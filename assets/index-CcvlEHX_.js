const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./javascript-D5ZNta1e.js","./typescript-Cc8OFXgj.js"])))=>i.map(i=>d[i]);
var cbe=Object.defineProperty;var iY=o=>{throw TypeError(o)};var dbe=(o,e,t)=>e in o?cbe(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var C0=(o,e,t)=>dbe(o,typeof e!="symbol"?e+"":e,t),M5=(o,e,t)=>e.has(o)||iY("Cannot "+t);var Pi=(o,e,t)=>(M5(o,e,"read from private field"),t?t.call(o):e.get(o)),Aa=(o,e,t)=>e.has(o)?iY("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(o):e.set(o,t),jl=(o,e,t,i)=>(M5(o,e,"write to private field"),i?i.call(o,t):e.set(o,t),t),D_=(o,e,t)=>(M5(o,e,"access private method"),t);var nY=(o,e,t,i)=>({set _(n){jl(o,e,n,t)},get _(){return Pi(o,e,i)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function t(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=t(n);fetch(n.href,s)}})();function U1(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var Dte={exports:{}},$B={},kte={exports:{}},eR={exports:{}};eR.exports;(function(o,e){/**
 * @license React
 * react.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var t="18.3.1",i=Symbol.for("react.element"),n=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),b=Symbol.for("react.offscreen"),y=Symbol.iterator,S="@@iterator";function L(B){if(B===null||typeof B!="object")return null;var ie=y&&B[y]||B[S];return typeof ie=="function"?ie:null}var x={current:null},D={transition:null},E={current:null,isBatchingLegacy:!1,didScheduleLegacyUpdate:!1},N={current:null},M={},F=null;function H(B){F=B}M.setExtraStackFrame=function(B){F=B},M.getCurrentStack=null,M.getStackAddendum=function(){var B="";F&&(B+=F);var ie=M.getCurrentStack;return ie&&(B+=ie()||""),B};var Q=!1,K=!1,j=!1,q=!1,se=!1,fe={ReactCurrentDispatcher:x,ReactCurrentBatchConfig:D,ReactCurrentOwner:N};fe.ReactDebugCurrentFrame=M,fe.ReactCurrentActQueue=E;function Ae(B){{for(var ie=arguments.length,xe=new Array(ie>1?ie-1:0),Oe=1;Oe<ie;Oe++)xe[Oe-1]=arguments[Oe];Le("warn",B,xe)}}function Ne(B){{for(var ie=arguments.length,xe=new Array(ie>1?ie-1:0),Oe=1;Oe<ie;Oe++)xe[Oe-1]=arguments[Oe];Le("error",B,xe)}}function Le(B,ie,xe){{var Oe=fe.ReactDebugCurrentFrame,ut=Oe.getStackAddendum();ut!==""&&(ie+="%s",xe=xe.concat([ut]));var li=xe.map(function(Ft){return String(Ft)});li.unshift("Warning: "+ie),Function.prototype.apply.call(console[B],console,li)}}var be={};function ze(B,ie){{var xe=B.constructor,Oe=xe&&(xe.displayName||xe.name)||"ReactClass",ut=Oe+"."+ie;if(be[ut])return;Ne("Can't call %s on a component that is not yet mounted. This is a no-op, but it might indicate a bug in your application. Instead, assign to `this.state` directly or define a `state = {};` class property with the desired state in the %s component.",ie,Oe),be[ut]=!0}}var it={isMounted:function(B){return!1},enqueueForceUpdate:function(B,ie,xe){ze(B,"forceUpdate")},enqueueReplaceState:function(B,ie,xe,Oe){ze(B,"replaceState")},enqueueSetState:function(B,ie,xe,Oe){ze(B,"setState")}},qe=Object.assign,Fe={};Object.freeze(Fe);function Li(B,ie,xe){this.props=B,this.context=ie,this.refs=Fe,this.updater=xe||it}Li.prototype.isReactComponent={},Li.prototype.setState=function(B,ie){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw new Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,ie,"setState")},Li.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};{var Bn={isMounted:["isMounted","Instead, make sure to clean up subscriptions and pending requests in componentWillUnmount to prevent memory leaks."],replaceState:["replaceState","Refactor your code to use setState instead (see https://github.com/facebook/react/issues/3236)."]},tn=function(B,ie){Object.defineProperty(Li.prototype,B,{get:function(){Ae("%s(...) is deprecated in plain JavaScript React classes. %s",ie[0],ie[1])}})};for(var Qt in Bn)Bn.hasOwnProperty(Qt)&&tn(Qt,Bn[Qt])}function nn(){}nn.prototype=Li.prototype;function un(B,ie,xe){this.props=B,this.context=ie,this.refs=Fe,this.updater=xe||it}var sn=un.prototype=new nn;sn.constructor=un,qe(sn,Li.prototype),sn.isPureReactComponent=!0;function Ct(){var B={current:null};return Object.seal(B),B}var Ss=Array.isArray;function Dn(B){return Ss(B)}function Wn(B){{var ie=typeof Symbol=="function"&&Symbol.toStringTag,xe=ie&&B[Symbol.toStringTag]||B.constructor.name||"Object";return xe}}function rs(B){try{return Ri(B),!1}catch{return!0}}function Ri(B){return""+B}function Vn(B){if(rs(B))return Ne("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",Wn(B)),Ri(B)}function Jo(B,ie,xe){var Oe=B.displayName;if(Oe)return Oe;var ut=ie.displayName||ie.name||"";return ut!==""?xe+"("+ut+")":xe}function Xr(B){return B.displayName||"Context"}function ve(B){if(B==null)return null;if(typeof B.tag=="number"&&Ne("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof B=="function")return B.displayName||B.name||null;if(typeof B=="string")return B;switch(B){case s:return"Fragment";case n:return"Portal";case a:return"Profiler";case r:return"StrictMode";case f:return"Suspense";case g:return"SuspenseList"}if(typeof B=="object")switch(B.$$typeof){case c:var ie=B;return Xr(ie)+".Consumer";case l:var xe=B;return Xr(xe._context)+".Provider";case u:return Jo(B,B.render,"ForwardRef");case p:var Oe=B.displayName||null;return Oe!==null?Oe:ve(B.type)||"Memo";case _:{var ut=B,li=ut._payload,Ft=ut._init;try{return ve(Ft(li))}catch{return null}}}return null}var de=Object.prototype.hasOwnProperty,ae={key:!0,ref:!0,__self:!0,__source:!0},z,$,ee;ee={};function X(B){if(de.call(B,"ref")){var ie=Object.getOwnPropertyDescriptor(B,"ref").get;if(ie&&ie.isReactWarning)return!1}return B.ref!==void 0}function pe(B){if(de.call(B,"key")){var ie=Object.getOwnPropertyDescriptor(B,"key").get;if(ie&&ie.isReactWarning)return!1}return B.key!==void 0}function He(B,ie){var xe=function(){z||(z=!0,Ne("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",ie))};xe.isReactWarning=!0,Object.defineProperty(B,"key",{get:xe,configurable:!0})}function ot(B,ie){var xe=function(){$||($=!0,Ne("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",ie))};xe.isReactWarning=!0,Object.defineProperty(B,"ref",{get:xe,configurable:!0})}function dt(B){if(typeof B.ref=="string"&&N.current&&B.__self&&N.current.stateNode!==B.__self){var ie=ve(N.current.type);ee[ie]||(Ne('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',ie,B.ref),ee[ie]=!0)}}var Re=function(B,ie,xe,Oe,ut,li,Ft){var _i={$$typeof:i,type:B,key:ie,ref:xe,props:Ft,_owner:li};return _i._store={},Object.defineProperty(_i._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(_i,"_self",{configurable:!1,enumerable:!1,writable:!1,value:Oe}),Object.defineProperty(_i,"_source",{configurable:!1,enumerable:!1,writable:!1,value:ut}),Object.freeze&&(Object.freeze(_i.props),Object.freeze(_i)),_i};function Ue(B,ie,xe){var Oe,ut={},li=null,Ft=null,_i=null,Yi=null;if(ie!=null){X(ie)&&(Ft=ie.ref,dt(ie)),pe(ie)&&(Vn(ie.key),li=""+ie.key),_i=ie.__self===void 0?null:ie.__self,Yi=ie.__source===void 0?null:ie.__source;for(Oe in ie)de.call(ie,Oe)&&!ae.hasOwnProperty(Oe)&&(ut[Oe]=ie[Oe])}var Kn=arguments.length-2;if(Kn===1)ut.children=xe;else if(Kn>1){for(var ms=Array(Kn),_s=0;_s<Kn;_s++)ms[_s]=arguments[_s+2];Object.freeze&&Object.freeze(ms),ut.children=ms}if(B&&B.defaultProps){var Ts=B.defaultProps;for(Oe in Ts)ut[Oe]===void 0&&(ut[Oe]=Ts[Oe])}if(li||Ft){var eo=typeof B=="function"?B.displayName||B.name||"Unknown":B;li&&He(ut,eo),Ft&&ot(ut,eo)}return Re(B,li,Ft,_i,Yi,N.current,ut)}function wt(B,ie){var xe=Re(B.type,ie,B.ref,B._self,B._source,B._owner,B.props);return xe}function Tt(B,ie,xe){if(B==null)throw new Error("React.cloneElement(...): The argument must be a React element, but you passed "+B+".");var Oe,ut=qe({},B.props),li=B.key,Ft=B.ref,_i=B._self,Yi=B._source,Kn=B._owner;if(ie!=null){X(ie)&&(Ft=ie.ref,Kn=N.current),pe(ie)&&(Vn(ie.key),li=""+ie.key);var ms;B.type&&B.type.defaultProps&&(ms=B.type.defaultProps);for(Oe in ie)de.call(ie,Oe)&&!ae.hasOwnProperty(Oe)&&(ie[Oe]===void 0&&ms!==void 0?ut[Oe]=ms[Oe]:ut[Oe]=ie[Oe])}var _s=arguments.length-2;if(_s===1)ut.children=xe;else if(_s>1){for(var Ts=Array(_s),eo=0;eo<_s;eo++)Ts[eo]=arguments[eo+2];ut.children=Ts}return Re(B.type,li,Ft,_i,Yi,Kn,ut)}function et(B){return typeof B=="object"&&B!==null&&B.$$typeof===i}var mi=".",ui=":";function ps(B){var ie=/[=:]/g,xe={"=":"=0",":":"=2"},Oe=B.replace(ie,function(ut){return xe[ut]});return"$"+Oe}var It=!1,ji=/\/+/g;function kn(B){return B.replace(ji,"$&/")}function En(B,ie){return typeof B=="object"&&B!==null&&B.key!=null?(Vn(B.key),ps(""+B.key)):ie.toString(36)}function Js(B,ie,xe,Oe,ut){var li=typeof B;(li==="undefined"||li==="boolean")&&(B=null);var Ft=!1;if(B===null)Ft=!0;else switch(li){case"string":case"number":Ft=!0;break;case"object":switch(B.$$typeof){case i:case n:Ft=!0}}if(Ft){var _i=B,Yi=ut(_i),Kn=Oe===""?mi+En(_i,0):Oe;if(Dn(Yi)){var ms="";Kn!=null&&(ms=kn(Kn)+"/"),Js(Yi,ie,ms,"",function(RO){return RO})}else Yi!=null&&(et(Yi)&&(Yi.key&&(!_i||_i.key!==Yi.key)&&Vn(Yi.key),Yi=wt(Yi,xe+(Yi.key&&(!_i||_i.key!==Yi.key)?kn(""+Yi.key)+"/":"")+Kn)),ie.push(Yi));return 1}var _s,Ts,eo=0,In=Oe===""?mi:Oe+ui;if(Dn(B))for(var Ig=0;Ig<B.length;Ig++)_s=B[Ig],Ts=In+En(_s,Ig),eo+=Js(_s,ie,xe,Ts,ut);else{var Db=L(B);if(typeof Db=="function"){var Iw=B;Db===Iw.entries&&(It||Ae("Using Maps as children is not supported. Use an array of keyed ReactElements instead."),It=!0);for(var NO=Db.call(Iw),Ih,Tw=0;!(Ih=NO.next()).done;)_s=Ih.value,Ts=In+En(_s,Tw++),eo+=Js(_s,ie,xe,Ts,ut)}else if(li==="object"){var Nw=String(B);throw new Error("Objects are not valid as a React child (found: "+(Nw==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":Nw)+"). If you meant to render a collection of children, use an array instead.")}}return eo}function Co(B,ie,xe){if(B==null)return B;var Oe=[],ut=0;return Js(B,Oe,"","",function(li){return ie.call(xe,li,ut++)}),Oe}function Sa(B){var ie=0;return Co(B,function(){ie++}),ie}function Za(B,ie,xe){Co(B,function(){ie.apply(this,arguments)},xe)}function yc(B){return Co(B,function(ie){return ie})||[]}function La(B){if(!et(B))throw new Error("React.Children.only expected to receive a single React element child.");return B}function Xc(B){var ie={$$typeof:c,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null};ie.Provider={$$typeof:l,_context:ie};var xe=!1,Oe=!1,ut=!1;{var li={$$typeof:c,_context:ie};Object.defineProperties(li,{Provider:{get:function(){return Oe||(Oe=!0,Ne("Rendering <Context.Consumer.Provider> is not supported and will be removed in a future major release. Did you mean to render <Context.Provider> instead?")),ie.Provider},set:function(Ft){ie.Provider=Ft}},_currentValue:{get:function(){return ie._currentValue},set:function(Ft){ie._currentValue=Ft}},_currentValue2:{get:function(){return ie._currentValue2},set:function(Ft){ie._currentValue2=Ft}},_threadCount:{get:function(){return ie._threadCount},set:function(Ft){ie._threadCount=Ft}},Consumer:{get:function(){return xe||(xe=!0,Ne("Rendering <Context.Consumer.Consumer> is not supported and will be removed in a future major release. Did you mean to render <Context.Consumer> instead?")),ie.Consumer}},displayName:{get:function(){return ie.displayName},set:function(Ft){ut||(Ae("Setting `displayName` on Context.Consumer has no effect. You should set it directly on the context with Context.displayName = '%s'.",Ft),ut=!0)}}}),ie.Consumer=li}return ie._currentRenderer=null,ie._currentRenderer2=null,ie}var wo=-1,Qa=0,xa=1,Da=2;function Pl(B){if(B._status===wo){var ie=B._result,xe=ie();if(xe.then(function(li){if(B._status===Qa||B._status===wo){var Ft=B;Ft._status=xa,Ft._result=li}},function(li){if(B._status===Qa||B._status===wo){var Ft=B;Ft._status=Da,Ft._result=li}}),B._status===wo){var Oe=B;Oe._status=Qa,Oe._result=xe}}if(B._status===xa){var ut=B._result;return ut===void 0&&Ne(`lazy: Expected the result of a dynamic import() call. Instead received: %s

Your code should look like: 
  const MyComponent = lazy(() => import('./MyComponent'))

Did you accidentally put curly braces around the import?`,ut),"default"in ut||Ne(`lazy: Expected the result of a dynamic import() call. Instead received: %s

Your code should look like: 
  const MyComponent = lazy(() => import('./MyComponent'))`,ut),ut.default}else throw B._result}function te(B){var ie={_status:wo,_result:B},xe={$$typeof:_,_payload:ie,_init:Pl};{var Oe,ut;Object.defineProperties(xe,{defaultProps:{configurable:!0,get:function(){return Oe},set:function(li){Ne("React.lazy(...): It is not supported to assign `defaultProps` to a lazy component import. Either specify them where the component is defined, or create a wrapping component around it."),Oe=li,Object.defineProperty(xe,"defaultProps",{enumerable:!0})}},propTypes:{configurable:!0,get:function(){return ut},set:function(li){Ne("React.lazy(...): It is not supported to assign `propTypes` to a lazy component import. Either specify them where the component is defined, or create a wrapping component around it."),ut=li,Object.defineProperty(xe,"propTypes",{enumerable:!0})}}})}return xe}function Ye(B){B!=null&&B.$$typeof===p?Ne("forwardRef requires a render function but received a `memo` component. Instead of forwardRef(memo(...)), use memo(forwardRef(...))."):typeof B!="function"?Ne("forwardRef requires a render function but was given %s.",B===null?"null":typeof B):B.length!==0&&B.length!==2&&Ne("forwardRef render functions accept exactly two parameters: props and ref. %s",B.length===1?"Did you forget to use the ref parameter?":"Any additional parameter will be undefined."),B!=null&&(B.defaultProps!=null||B.propTypes!=null)&&Ne("forwardRef render functions do not support propTypes or defaultProps. Did you accidentally pass a React component?");var ie={$$typeof:u,render:B};{var xe;Object.defineProperty(ie,"displayName",{enumerable:!1,configurable:!0,get:function(){return xe},set:function(Oe){xe=Oe,!B.name&&!B.displayName&&(B.displayName=Oe)}})}return ie}var _t;_t=Symbol.for("react.module.reference");function qt(B){return!!(typeof B=="string"||typeof B=="function"||B===s||B===a||se||B===r||B===f||B===g||q||B===b||Q||K||j||typeof B=="object"&&B!==null&&(B.$$typeof===_||B.$$typeof===p||B.$$typeof===l||B.$$typeof===c||B.$$typeof===u||B.$$typeof===_t||B.getModuleId!==void 0))}function Wi(B,ie){qt(B)||Ne("memo: The first argument must be a component. Instead received: %s",B===null?"null":typeof B);var xe={$$typeof:p,type:B,compare:ie===void 0?null:ie};{var Oe;Object.defineProperty(xe,"displayName",{enumerable:!1,configurable:!0,get:function(){return Oe},set:function(ut){Oe=ut,!B.name&&!B.displayName&&(B.displayName=ut)}})}return xe}function ti(){var B=x.current;return B===null&&Ne(`Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:
1. You might have mismatching versions of React and the renderer (such as React DOM)
2. You might be breaking the Rules of Hooks
3. You might have more than one copy of React in the same app
See https://reactjs.org/link/invalid-hook-call for tips about how to debug and fix this problem.`),B}function Ti(B){var ie=ti();if(B._context!==void 0){var xe=B._context;xe.Consumer===B?Ne("Calling useContext(Context.Consumer) is not supported, may cause bugs, and will be removed in a future major release. Did you mean to call useContext(Context) instead?"):xe.Provider===B&&Ne("Calling useContext(Context.Provider) is not supported. Did you mean to call useContext(Context) instead?")}return ie.useContext(B)}function Je(B){var ie=ti();return ie.useState(B)}function re(B,ie,xe){var Oe=ti();return Oe.useReducer(B,ie,xe)}function Pe(B){var ie=ti();return ie.useRef(B)}function nt(B,ie){var xe=ti();return xe.useEffect(B,ie)}function xi(B,ie){var xe=ti();return xe.useInsertionEffect(B,ie)}function jn(B,ie){var xe=ti();return xe.useLayoutEffect(B,ie)}function Bs(B,ie){var xe=ti();return xe.useCallback(B,ie)}function Mi(B,ie){var xe=ti();return xe.useMemo(B,ie)}function er(B,ie,xe){var Oe=ti();return Oe.useImperativeHandle(B,ie,xe)}function au(B,ie){{var xe=ti();return xe.useDebugValue(B,ie)}}function wg(){var B=ti();return B.useTransition()}function lu(B){var ie=ti();return ie.useDeferredValue(B)}function Ki(){var B=ti();return B.useId()}function qm(B,ie,xe){var Oe=ti();return Oe.useSyncExternalStore(B,ie,xe)}var yg=0,mw,_w,vw,bw,Cw,ww,yw;function kk(){}kk.__reactDisabledLog=!0;function EO(){{if(yg===0){mw=console.log,_w=console.info,vw=console.warn,bw=console.error,Cw=console.group,ww=console.groupCollapsed,yw=console.groupEnd;var B={configurable:!0,enumerable:!0,value:kk,writable:!0};Object.defineProperties(console,{info:B,log:B,warn:B,error:B,group:B,groupCollapsed:B,groupEnd:B})}yg++}}function Sw(){{if(yg--,yg===0){var B={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:qe({},B,{value:mw}),info:qe({},B,{value:_w}),warn:qe({},B,{value:vw}),error:qe({},B,{value:bw}),group:qe({},B,{value:Cw}),groupCollapsed:qe({},B,{value:ww}),groupEnd:qe({},B,{value:yw})})}yg<0&&Ne("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var Gm=fe.ReactCurrentDispatcher,Sc;function Sg(B,ie,xe){{if(Sc===void 0)try{throw Error()}catch(ut){var Oe=ut.stack.trim().match(/\n( *(at )?)/);Sc=Oe&&Oe[1]||""}return`
`+Sc+B}}var Lg=!1,wb;{var Lw=typeof WeakMap=="function"?WeakMap:Map;wb=new Lw}function Ek(B,ie){if(!B||Lg)return"";{var xe=wb.get(B);if(xe!==void 0)return xe}var Oe;Lg=!0;var ut=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var li;li=Gm.current,Gm.current=null,EO();try{if(ie){var Ft=function(){throw Error()};if(Object.defineProperty(Ft.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ft,[])}catch(In){Oe=In}Reflect.construct(B,[],Ft)}else{try{Ft.call()}catch(In){Oe=In}B.call(Ft.prototype)}}else{try{throw Error()}catch(In){Oe=In}B()}}catch(In){if(In&&Oe&&typeof In.stack=="string"){for(var _i=In.stack.split(`
`),Yi=Oe.stack.split(`
`),Kn=_i.length-1,ms=Yi.length-1;Kn>=1&&ms>=0&&_i[Kn]!==Yi[ms];)ms--;for(;Kn>=1&&ms>=0;Kn--,ms--)if(_i[Kn]!==Yi[ms]){if(Kn!==1||ms!==1)do if(Kn--,ms--,ms<0||_i[Kn]!==Yi[ms]){var _s=`
`+_i[Kn].replace(" at new "," at ");return B.displayName&&_s.includes("<anonymous>")&&(_s=_s.replace("<anonymous>",B.displayName)),typeof B=="function"&&wb.set(B,_s),_s}while(Kn>=1&&ms>=0);break}}}finally{Lg=!1,Gm.current=li,Sw(),Error.prepareStackTrace=ut}var Ts=B?B.displayName||B.name:"",eo=Ts?Sg(Ts):"";return typeof B=="function"&&wb.set(B,eo),eo}function xw(B,ie,xe){return Ek(B,!1)}function IO(B){var ie=B.prototype;return!!(ie&&ie.isReactComponent)}function xg(B,ie,xe){if(B==null)return"";if(typeof B=="function")return Ek(B,IO(B));if(typeof B=="string")return Sg(B);switch(B){case f:return Sg("Suspense");case g:return Sg("SuspenseList")}if(typeof B=="object")switch(B.$$typeof){case u:return xw(B.render);case p:return xg(B.type,ie,xe);case _:{var Oe=B,ut=Oe._payload,li=Oe._init;try{return xg(li(ut),ie,xe)}catch{}}}return""}var Ik={},Dw=fe.ReactDebugCurrentFrame;function yb(B){if(B){var ie=B._owner,xe=xg(B.type,B._source,ie?ie.type:null);Dw.setExtraStackFrame(xe)}else Dw.setExtraStackFrame(null)}function Tk(B,ie,xe,Oe,ut){{var li=Function.call.bind(de);for(var Ft in B)if(li(B,Ft)){var _i=void 0;try{if(typeof B[Ft]!="function"){var Yi=Error((Oe||"React class")+": "+xe+" type `"+Ft+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof B[Ft]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw Yi.name="Invariant Violation",Yi}_i=B[Ft](ie,Ft,Oe,xe,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(Kn){_i=Kn}_i&&!(_i instanceof Error)&&(yb(ut),Ne("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",Oe||"React class",xe,Ft,typeof _i),yb(null)),_i instanceof Error&&!(_i.message in Ik)&&(Ik[_i.message]=!0,yb(ut),Ne("Failed %s type: %s",xe,_i.message),yb(null))}}}function hn(B){if(B){var ie=B._owner,xe=xg(B.type,B._source,ie?ie.type:null);H(xe)}else H(null)}var kw;kw=!1;function Ew(){if(N.current){var B=ve(N.current.type);if(B)return`

Check the render method of \``+B+"`."}return""}function Ei(B){if(B!==void 0){var ie=B.fileName.replace(/^.*[\\\/]/,""),xe=B.lineNumber;return`

Check your code at `+ie+":"+xe+"."}return""}function Nk(B){return B!=null?Ei(B.__source):""}var Jr={};function Ym(B){var ie=Ew();if(!ie){var xe=typeof B=="string"?B:B.displayName||B.name;xe&&(ie=`

Check the top-level render call using <`+xe+">.")}return ie}function Dg(B,ie){if(!(!B._store||B._store.validated||B.key!=null)){B._store.validated=!0;var xe=Ym(ie);if(!Jr[xe]){Jr[xe]=!0;var Oe="";B&&B._owner&&B._owner!==N.current&&(Oe=" It was passed a child from "+ve(B._owner.type)+"."),hn(B),Ne('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',xe,Oe),hn(null)}}}function Rk(B,ie){if(typeof B=="object"){if(Dn(B))for(var xe=0;xe<B.length;xe++){var Oe=B[xe];et(Oe)&&Dg(Oe,ie)}else if(et(B))B._store&&(B._store.validated=!0);else if(B){var ut=L(B);if(typeof ut=="function"&&ut!==B.entries)for(var li=ut.call(B),Ft;!(Ft=li.next()).done;)et(Ft.value)&&Dg(Ft.value,ie)}}}function tr(B){{var ie=B.type;if(ie==null||typeof ie=="string")return;var xe;if(typeof ie=="function")xe=ie.propTypes;else if(typeof ie=="object"&&(ie.$$typeof===u||ie.$$typeof===p))xe=ie.propTypes;else return;if(xe){var Oe=ve(ie);Tk(xe,B.props,"prop",Oe,B)}else if(ie.PropTypes!==void 0&&!kw){kw=!0;var ut=ve(ie);Ne("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",ut||"Unknown")}typeof ie.getDefaultProps=="function"&&!ie.getDefaultProps.isReactClassApproved&&Ne("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function $s(B){{for(var ie=Object.keys(B.props),xe=0;xe<ie.length;xe++){var Oe=ie[xe];if(Oe!=="children"&&Oe!=="key"){hn(B),Ne("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",Oe),hn(null);break}}B.ref!==null&&(hn(B),Ne("Invalid attribute `ref` supplied to `React.Fragment`."),hn(null))}}function Mk(B,ie,xe){var Oe=qt(B);if(!Oe){var ut="";(B===void 0||typeof B=="object"&&B!==null&&Object.keys(B).length===0)&&(ut+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var li=Nk(ie);li?ut+=li:ut+=Ew();var Ft;B===null?Ft="null":Dn(B)?Ft="array":B!==void 0&&B.$$typeof===i?(Ft="<"+(ve(B.type)||"Unknown")+" />",ut=" Did you accidentally export a JSX literal instead of a component?"):Ft=typeof B,Ne("React.createElement: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",Ft,ut)}var _i=Ue.apply(this,arguments);if(_i==null)return _i;if(Oe)for(var Yi=2;Yi<arguments.length;Yi++)Rk(arguments[Yi],B);return B===s?$s(_i):tr(_i),_i}var Ol=!1;function Xa(B){var ie=Mk.bind(null,B);return ie.type=B,Ol||(Ol=!0,Ae("React.createFactory() is deprecated and will be removed in a future major release. Consider using JSX or use React.createElement() directly instead.")),Object.defineProperty(ie,"type",{enumerable:!1,get:function(){return Ae("Factory.type is deprecated. Access the class directly before passing it to createFactory."),Object.defineProperty(this,"type",{value:B}),B}}),ie}function cu(B,ie,xe){for(var Oe=Tt.apply(this,arguments),ut=2;ut<arguments.length;ut++)Rk(arguments[ut],Oe.type);return tr(Oe),Oe}function TO(B,ie){var xe=D.transition;D.transition={};var Oe=D.transition;D.transition._updatedFibers=new Set;try{B()}finally{if(D.transition=xe,xe===null&&Oe._updatedFibers){var ut=Oe._updatedFibers.size;ut>10&&Ae("Detected a large number of updates inside startTransition. If this is due to a subscription please re-write it to use React provided hooks. Otherwise concurrent mode guarantees are off the table."),Oe._updatedFibers.clear()}}}var Sb=!1,Zm=null;function Ak(B){if(Zm===null)try{var ie=("require"+Math.random()).slice(0,7),xe=o&&o[ie];Zm=xe.call(o,"timers").setImmediate}catch{Zm=function(ut){Sb===!1&&(Sb=!0,typeof MessageChannel>"u"&&Ne("This browser does not have a MessageChannel implementation, so enqueuing tasks via await act(async () => ...) will fail. Please file an issue at https://github.com/facebook/react/issues if you encounter this warning."));var li=new MessageChannel;li.port1.onmessage=ut,li.port2.postMessage(void 0)}}return Zm(B)}var kg=0,Pk=!1;function Ok(B){{var ie=kg;kg++,E.current===null&&(E.current=[]);var xe=E.isBatchingLegacy,Oe;try{if(E.isBatchingLegacy=!0,Oe=B(),!xe&&E.didScheduleLegacyUpdate){var ut=E.current;ut!==null&&(E.didScheduleLegacyUpdate=!1,xb(ut))}}catch(Ts){throw Eh(ie),Ts}finally{E.isBatchingLegacy=xe}if(Oe!==null&&typeof Oe=="object"&&typeof Oe.then=="function"){var li=Oe,Ft=!1,_i={then:function(Ts,eo){Ft=!0,li.then(function(In){Eh(ie),kg===0?Lb(In,Ts,eo):Ts(In)},function(In){Eh(ie),eo(In)})}};return!Pk&&typeof Promise<"u"&&Promise.resolve().then(function(){}).then(function(){Ft||(Pk=!0,Ne("You called act(async () => ...) without await. This could lead to unexpected testing behaviour, interleaving multiple act calls and mixing their scopes. You should - await act(async () => ...);"))}),_i}else{var Yi=Oe;if(Eh(ie),kg===0){var Kn=E.current;Kn!==null&&(xb(Kn),E.current=null);var ms={then:function(Ts,eo){E.current===null?(E.current=[],Lb(Yi,Ts,eo)):Ts(Yi)}};return ms}else{var _s={then:function(Ts,eo){Ts(Yi)}};return _s}}}}function Eh(B){B!==kg-1&&Ne("You seem to have overlapping act() calls, this is not supported. Be sure to await previous act() calls before making a new one. "),kg=B}function Lb(B,ie,xe){{var Oe=E.current;if(Oe!==null)try{xb(Oe),Ak(function(){Oe.length===0?(E.current=null,ie(B)):Lb(B,ie,xe)})}catch(ut){xe(ut)}else ie(B)}}var Eg=!1;function xb(B){if(!Eg){Eg=!0;var ie=0;try{for(;ie<B.length;ie++){var xe=B[ie];do xe=xe(!0);while(xe!==null)}B.length=0}catch(Oe){throw B=B.slice(ie+1),Oe}finally{Eg=!1}}}var Fk=Mk,Bk=cu,Wk=Xa,Vk={map:Co,forEach:Za,count:Sa,toArray:yc,only:La};e.Children=Vk,e.Component=Li,e.Fragment=s,e.Profiler=a,e.PureComponent=un,e.StrictMode=r,e.Suspense=f,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fe,e.act=Ok,e.cloneElement=Bk,e.createContext=Xc,e.createElement=Fk,e.createFactory=Wk,e.createRef=Ct,e.forwardRef=Ye,e.isValidElement=et,e.lazy=te,e.memo=Wi,e.startTransition=TO,e.unstable_act=Ok,e.useCallback=Bs,e.useContext=Ti,e.useDebugValue=au,e.useDeferredValue=lu,e.useEffect=nt,e.useId=Ki,e.useImperativeHandle=er,e.useInsertionEffect=xi,e.useLayoutEffect=jn,e.useMemo=Mi,e.useReducer=re,e.useRef=Pe,e.useState=Je,e.useSyncExternalStore=qm,e.useTransition=wg,e.version=t,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)})()})(eR,eR.exports);var ube=eR.exports;kte.exports=ube;var Fi=kte.exports;const Ge=U1(Fi);/**
 * @license React
 * react-jsx-dev-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){var o=Fi,e=Symbol.for("react.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),r=Symbol.for("react.provider"),a=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),p=Symbol.for("react.offscreen"),_=Symbol.iterator,b="@@iterator";function y(te){if(te===null||typeof te!="object")return null;var Ye=_&&te[_]||te[b];return typeof Ye=="function"?Ye:null}var S=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function L(te){{for(var Ye=arguments.length,_t=new Array(Ye>1?Ye-1:0),qt=1;qt<Ye;qt++)_t[qt-1]=arguments[qt];x("error",te,_t)}}function x(te,Ye,_t){{var qt=S.ReactDebugCurrentFrame,Wi=qt.getStackAddendum();Wi!==""&&(Ye+="%s",_t=_t.concat([Wi]));var ti=_t.map(function(Ti){return String(Ti)});ti.unshift("Warning: "+Ye),Function.prototype.apply.call(console[te],console,ti)}}var D=!1,E=!1,N=!1,M=!1,F=!1,H;H=Symbol.for("react.module.reference");function Q(te){return!!(typeof te=="string"||typeof te=="function"||te===i||te===s||F||te===n||te===c||te===u||M||te===p||D||E||N||typeof te=="object"&&te!==null&&(te.$$typeof===g||te.$$typeof===f||te.$$typeof===r||te.$$typeof===a||te.$$typeof===l||te.$$typeof===H||te.getModuleId!==void 0))}function K(te,Ye,_t){var qt=te.displayName;if(qt)return qt;var Wi=Ye.displayName||Ye.name||"";return Wi!==""?_t+"("+Wi+")":_t}function j(te){return te.displayName||"Context"}function q(te){if(te==null)return null;if(typeof te.tag=="number"&&L("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof te=="function")return te.displayName||te.name||null;if(typeof te=="string")return te;switch(te){case i:return"Fragment";case t:return"Portal";case s:return"Profiler";case n:return"StrictMode";case c:return"Suspense";case u:return"SuspenseList"}if(typeof te=="object")switch(te.$$typeof){case a:var Ye=te;return j(Ye)+".Consumer";case r:var _t=te;return j(_t._context)+".Provider";case l:return K(te,te.render,"ForwardRef");case f:var qt=te.displayName||null;return qt!==null?qt:q(te.type)||"Memo";case g:{var Wi=te,ti=Wi._payload,Ti=Wi._init;try{return q(Ti(ti))}catch{return null}}}return null}var se=Object.assign,fe=0,Ae,Ne,Le,be,ze,it,qe;function Fe(){}Fe.__reactDisabledLog=!0;function Li(){{if(fe===0){Ae=console.log,Ne=console.info,Le=console.warn,be=console.error,ze=console.group,it=console.groupCollapsed,qe=console.groupEnd;var te={configurable:!0,enumerable:!0,value:Fe,writable:!0};Object.defineProperties(console,{info:te,log:te,warn:te,error:te,group:te,groupCollapsed:te,groupEnd:te})}fe++}}function Bn(){{if(fe--,fe===0){var te={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:se({},te,{value:Ae}),info:se({},te,{value:Ne}),warn:se({},te,{value:Le}),error:se({},te,{value:be}),group:se({},te,{value:ze}),groupCollapsed:se({},te,{value:it}),groupEnd:se({},te,{value:qe})})}fe<0&&L("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var tn=S.ReactCurrentDispatcher,Qt;function nn(te,Ye,_t){{if(Qt===void 0)try{throw Error()}catch(Wi){var qt=Wi.stack.trim().match(/\n( *(at )?)/);Qt=qt&&qt[1]||""}return`
`+Qt+te}}var un=!1,sn;{var Ct=typeof WeakMap=="function"?WeakMap:Map;sn=new Ct}function Ss(te,Ye){if(!te||un)return"";{var _t=sn.get(te);if(_t!==void 0)return _t}var qt;un=!0;var Wi=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var ti;ti=tn.current,tn.current=null,Li();try{if(Ye){var Ti=function(){throw Error()};if(Object.defineProperty(Ti.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ti,[])}catch(Mi){qt=Mi}Reflect.construct(te,[],Ti)}else{try{Ti.call()}catch(Mi){qt=Mi}te.call(Ti.prototype)}}else{try{throw Error()}catch(Mi){qt=Mi}te()}}catch(Mi){if(Mi&&qt&&typeof Mi.stack=="string"){for(var Je=Mi.stack.split(`
`),re=qt.stack.split(`
`),Pe=Je.length-1,nt=re.length-1;Pe>=1&&nt>=0&&Je[Pe]!==re[nt];)nt--;for(;Pe>=1&&nt>=0;Pe--,nt--)if(Je[Pe]!==re[nt]){if(Pe!==1||nt!==1)do if(Pe--,nt--,nt<0||Je[Pe]!==re[nt]){var xi=`
`+Je[Pe].replace(" at new "," at ");return te.displayName&&xi.includes("<anonymous>")&&(xi=xi.replace("<anonymous>",te.displayName)),typeof te=="function"&&sn.set(te,xi),xi}while(Pe>=1&&nt>=0);break}}}finally{un=!1,tn.current=ti,Bn(),Error.prepareStackTrace=Wi}var jn=te?te.displayName||te.name:"",Bs=jn?nn(jn):"";return typeof te=="function"&&sn.set(te,Bs),Bs}function Dn(te,Ye,_t){return Ss(te,!1)}function Wn(te){var Ye=te.prototype;return!!(Ye&&Ye.isReactComponent)}function rs(te,Ye,_t){if(te==null)return"";if(typeof te=="function")return Ss(te,Wn(te));if(typeof te=="string")return nn(te);switch(te){case c:return nn("Suspense");case u:return nn("SuspenseList")}if(typeof te=="object")switch(te.$$typeof){case l:return Dn(te.render);case f:return rs(te.type,Ye,_t);case g:{var qt=te,Wi=qt._payload,ti=qt._init;try{return rs(ti(Wi),Ye,_t)}catch{}}}return""}var Ri=Object.prototype.hasOwnProperty,Vn={},Jo=S.ReactDebugCurrentFrame;function Xr(te){if(te){var Ye=te._owner,_t=rs(te.type,te._source,Ye?Ye.type:null);Jo.setExtraStackFrame(_t)}else Jo.setExtraStackFrame(null)}function ve(te,Ye,_t,qt,Wi){{var ti=Function.call.bind(Ri);for(var Ti in te)if(ti(te,Ti)){var Je=void 0;try{if(typeof te[Ti]!="function"){var re=Error((qt||"React class")+": "+_t+" type `"+Ti+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof te[Ti]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw re.name="Invariant Violation",re}Je=te[Ti](Ye,Ti,qt,_t,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(Pe){Je=Pe}Je&&!(Je instanceof Error)&&(Xr(Wi),L("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",qt||"React class",_t,Ti,typeof Je),Xr(null)),Je instanceof Error&&!(Je.message in Vn)&&(Vn[Je.message]=!0,Xr(Wi),L("Failed %s type: %s",_t,Je.message),Xr(null))}}}var de=Array.isArray;function ae(te){return de(te)}function z(te){{var Ye=typeof Symbol=="function"&&Symbol.toStringTag,_t=Ye&&te[Symbol.toStringTag]||te.constructor.name||"Object";return _t}}function $(te){try{return ee(te),!1}catch{return!0}}function ee(te){return""+te}function X(te){if($(te))return L("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",z(te)),ee(te)}var pe=S.ReactCurrentOwner,He={key:!0,ref:!0,__self:!0,__source:!0},ot,dt,Re;Re={};function Ue(te){if(Ri.call(te,"ref")){var Ye=Object.getOwnPropertyDescriptor(te,"ref").get;if(Ye&&Ye.isReactWarning)return!1}return te.ref!==void 0}function wt(te){if(Ri.call(te,"key")){var Ye=Object.getOwnPropertyDescriptor(te,"key").get;if(Ye&&Ye.isReactWarning)return!1}return te.key!==void 0}function Tt(te,Ye){if(typeof te.ref=="string"&&pe.current&&Ye&&pe.current.stateNode!==Ye){var _t=q(pe.current.type);Re[_t]||(L('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',q(pe.current.type),te.ref),Re[_t]=!0)}}function et(te,Ye){{var _t=function(){ot||(ot=!0,L("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",Ye))};_t.isReactWarning=!0,Object.defineProperty(te,"key",{get:_t,configurable:!0})}}function mi(te,Ye){{var _t=function(){dt||(dt=!0,L("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",Ye))};_t.isReactWarning=!0,Object.defineProperty(te,"ref",{get:_t,configurable:!0})}}var ui=function(te,Ye,_t,qt,Wi,ti,Ti){var Je={$$typeof:e,type:te,key:Ye,ref:_t,props:Ti,_owner:ti};return Je._store={},Object.defineProperty(Je._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(Je,"_self",{configurable:!1,enumerable:!1,writable:!1,value:qt}),Object.defineProperty(Je,"_source",{configurable:!1,enumerable:!1,writable:!1,value:Wi}),Object.freeze&&(Object.freeze(Je.props),Object.freeze(Je)),Je};function ps(te,Ye,_t,qt,Wi){{var ti,Ti={},Je=null,re=null;_t!==void 0&&(X(_t),Je=""+_t),wt(Ye)&&(X(Ye.key),Je=""+Ye.key),Ue(Ye)&&(re=Ye.ref,Tt(Ye,Wi));for(ti in Ye)Ri.call(Ye,ti)&&!He.hasOwnProperty(ti)&&(Ti[ti]=Ye[ti]);if(te&&te.defaultProps){var Pe=te.defaultProps;for(ti in Pe)Ti[ti]===void 0&&(Ti[ti]=Pe[ti])}if(Je||re){var nt=typeof te=="function"?te.displayName||te.name||"Unknown":te;Je&&et(Ti,nt),re&&mi(Ti,nt)}return ui(te,Je,re,Wi,qt,pe.current,Ti)}}var It=S.ReactCurrentOwner,ji=S.ReactDebugCurrentFrame;function kn(te){if(te){var Ye=te._owner,_t=rs(te.type,te._source,Ye?Ye.type:null);ji.setExtraStackFrame(_t)}else ji.setExtraStackFrame(null)}var En;En=!1;function Js(te){return typeof te=="object"&&te!==null&&te.$$typeof===e}function Co(){{if(It.current){var te=q(It.current.type);if(te)return`

Check the render method of \``+te+"`."}return""}}function Sa(te){{if(te!==void 0){var Ye=te.fileName.replace(/^.*[\\\/]/,""),_t=te.lineNumber;return`

Check your code at `+Ye+":"+_t+"."}return""}}var Za={};function yc(te){{var Ye=Co();if(!Ye){var _t=typeof te=="string"?te:te.displayName||te.name;_t&&(Ye=`

Check the top-level render call using <`+_t+">.")}return Ye}}function La(te,Ye){{if(!te._store||te._store.validated||te.key!=null)return;te._store.validated=!0;var _t=yc(Ye);if(Za[_t])return;Za[_t]=!0;var qt="";te&&te._owner&&te._owner!==It.current&&(qt=" It was passed a child from "+q(te._owner.type)+"."),kn(te),L('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',_t,qt),kn(null)}}function Xc(te,Ye){{if(typeof te!="object")return;if(ae(te))for(var _t=0;_t<te.length;_t++){var qt=te[_t];Js(qt)&&La(qt,Ye)}else if(Js(te))te._store&&(te._store.validated=!0);else if(te){var Wi=y(te);if(typeof Wi=="function"&&Wi!==te.entries)for(var ti=Wi.call(te),Ti;!(Ti=ti.next()).done;)Js(Ti.value)&&La(Ti.value,Ye)}}}function wo(te){{var Ye=te.type;if(Ye==null||typeof Ye=="string")return;var _t;if(typeof Ye=="function")_t=Ye.propTypes;else if(typeof Ye=="object"&&(Ye.$$typeof===l||Ye.$$typeof===f))_t=Ye.propTypes;else return;if(_t){var qt=q(Ye);ve(_t,te.props,"prop",qt,te)}else if(Ye.PropTypes!==void 0&&!En){En=!0;var Wi=q(Ye);L("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",Wi||"Unknown")}typeof Ye.getDefaultProps=="function"&&!Ye.getDefaultProps.isReactClassApproved&&L("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function Qa(te){{for(var Ye=Object.keys(te.props),_t=0;_t<Ye.length;_t++){var qt=Ye[_t];if(qt!=="children"&&qt!=="key"){kn(te),L("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",qt),kn(null);break}}te.ref!==null&&(kn(te),L("Invalid attribute `ref` supplied to `React.Fragment`."),kn(null))}}var xa={};function Da(te,Ye,_t,qt,Wi,ti){{var Ti=Q(te);if(!Ti){var Je="";(te===void 0||typeof te=="object"&&te!==null&&Object.keys(te).length===0)&&(Je+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var re=Sa(Wi);re?Je+=re:Je+=Co();var Pe;te===null?Pe="null":ae(te)?Pe="array":te!==void 0&&te.$$typeof===e?(Pe="<"+(q(te.type)||"Unknown")+" />",Je=" Did you accidentally export a JSX literal instead of a component?"):Pe=typeof te,L("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",Pe,Je)}var nt=ps(te,Ye,_t,Wi,ti);if(nt==null)return nt;if(Ti){var xi=Ye.children;if(xi!==void 0)if(qt)if(ae(xi)){for(var jn=0;jn<xi.length;jn++)Xc(xi[jn],te);Object.freeze&&Object.freeze(xi)}else L("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else Xc(xi,te)}if(Ri.call(Ye,"key")){var Bs=q(te),Mi=Object.keys(Ye).filter(function(wg){return wg!=="key"}),er=Mi.length>0?"{key: someKey, "+Mi.join(": ..., ")+": ...}":"{key: someKey}";if(!xa[Bs+er]){var au=Mi.length>0?"{"+Mi.join(": ..., ")+": ...}":"{}";L(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,er,Bs,au,Bs),xa[Bs+er]=!0}}return te===i?Qa(nt):wo(nt),nt}}var Pl=Da;$B.Fragment=i,$B.jsxDEV=Pl})();Dte.exports=$B;var fn=Dte.exports,jB={},Ete={exports:{}},Gl={},Ite={exports:{}},Tte={};(function(o){/**
 * @license React
 * scheduler.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var e=!1,t=!1,i=5;function n(Re,Ue){var wt=Re.length;Re.push(Ue),a(Re,Ue,wt)}function s(Re){return Re.length===0?null:Re[0]}function r(Re){if(Re.length===0)return null;var Ue=Re[0],wt=Re.pop();return wt!==Ue&&(Re[0]=wt,l(Re,wt,0)),Ue}function a(Re,Ue,wt){for(var Tt=wt;Tt>0;){var et=Tt-1>>>1,mi=Re[et];if(c(mi,Ue)>0)Re[et]=Ue,Re[Tt]=mi,Tt=et;else return}}function l(Re,Ue,wt){for(var Tt=wt,et=Re.length,mi=et>>>1;Tt<mi;){var ui=(Tt+1)*2-1,ps=Re[ui],It=ui+1,ji=Re[It];if(c(ps,Ue)<0)It<et&&c(ji,ps)<0?(Re[Tt]=ji,Re[It]=Ue,Tt=It):(Re[Tt]=ps,Re[ui]=Ue,Tt=ui);else if(It<et&&c(ji,Ue)<0)Re[Tt]=ji,Re[It]=Ue,Tt=It;else return}}function c(Re,Ue){var wt=Re.sortIndex-Ue.sortIndex;return wt!==0?wt:Re.id-Ue.id}var u=1,f=2,g=3,p=4,_=5;function b(Re,Ue){}var y=typeof performance=="object"&&typeof performance.now=="function";if(y){var S=performance;o.unstable_now=function(){return S.now()}}else{var L=Date,x=L.now();o.unstable_now=function(){return L.now()-x}}var D=1073741823,E=-1,N=250,M=5e3,F=1e4,H=D,Q=[],K=[],j=1,q=null,se=g,fe=!1,Ae=!1,Ne=!1,Le=typeof setTimeout=="function"?setTimeout:null,be=typeof clearTimeout=="function"?clearTimeout:null,ze=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function it(Re){for(var Ue=s(K);Ue!==null;){if(Ue.callback===null)r(K);else if(Ue.startTime<=Re)r(K),Ue.sortIndex=Ue.expirationTime,n(Q,Ue);else return;Ue=s(K)}}function qe(Re){if(Ne=!1,it(Re),!Ae)if(s(Q)!==null)Ae=!0,X(Fe);else{var Ue=s(K);Ue!==null&&pe(qe,Ue.startTime-Re)}}function Fe(Re,Ue){Ae=!1,Ne&&(Ne=!1,He()),fe=!0;var wt=se;try{var Tt;if(!t)return Li(Re,Ue)}finally{q=null,se=wt,fe=!1}}function Li(Re,Ue){var wt=Ue;for(it(wt),q=s(Q);q!==null&&!e&&!(q.expirationTime>wt&&(!Re||Xr()));){var Tt=q.callback;if(typeof Tt=="function"){q.callback=null,se=q.priorityLevel;var et=q.expirationTime<=wt,mi=Tt(et);wt=o.unstable_now(),typeof mi=="function"?q.callback=mi:q===s(Q)&&r(Q),it(wt)}else r(Q);q=s(Q)}if(q!==null)return!0;var ui=s(K);return ui!==null&&pe(qe,ui.startTime-wt),!1}function Bn(Re,Ue){switch(Re){case u:case f:case g:case p:case _:break;default:Re=g}var wt=se;se=Re;try{return Ue()}finally{se=wt}}function tn(Re){var Ue;switch(se){case u:case f:case g:Ue=g;break;default:Ue=se;break}var wt=se;se=Ue;try{return Re()}finally{se=wt}}function Qt(Re){var Ue=se;return function(){var wt=se;se=Ue;try{return Re.apply(this,arguments)}finally{se=wt}}}function nn(Re,Ue,wt){var Tt=o.unstable_now(),et;if(typeof wt=="object"&&wt!==null){var mi=wt.delay;typeof mi=="number"&&mi>0?et=Tt+mi:et=Tt}else et=Tt;var ui;switch(Re){case u:ui=E;break;case f:ui=N;break;case _:ui=H;break;case p:ui=F;break;case g:default:ui=M;break}var ps=et+ui,It={id:j++,callback:Ue,priorityLevel:Re,startTime:et,expirationTime:ps,sortIndex:-1};return et>Tt?(It.sortIndex=et,n(K,It),s(Q)===null&&It===s(K)&&(Ne?He():Ne=!0,pe(qe,et-Tt))):(It.sortIndex=ps,n(Q,It),!Ae&&!fe&&(Ae=!0,X(Fe))),It}function un(){}function sn(){!Ae&&!fe&&(Ae=!0,X(Fe))}function Ct(){return s(Q)}function Ss(Re){Re.callback=null}function Dn(){return se}var Wn=!1,rs=null,Ri=-1,Vn=i,Jo=-1;function Xr(){var Re=o.unstable_now()-Jo;return!(Re<Vn)}function ve(){}function de(Re){if(Re<0||Re>125){console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported");return}Re>0?Vn=Math.floor(1e3/Re):Vn=i}var ae=function(){if(rs!==null){var Re=o.unstable_now();Jo=Re;var Ue=!0,wt=!0;try{wt=rs(Ue,Re)}finally{wt?z():(Wn=!1,rs=null)}}else Wn=!1},z;if(typeof ze=="function")z=function(){ze(ae)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,ee=$.port2;$.port1.onmessage=ae,z=function(){ee.postMessage(null)}}else z=function(){Le(ae,0)};function X(Re){rs=Re,Wn||(Wn=!0,z())}function pe(Re,Ue){Ri=Le(function(){Re(o.unstable_now())},Ue)}function He(){be(Ri),Ri=-1}var ot=ve,dt=null;o.unstable_IdlePriority=_,o.unstable_ImmediatePriority=u,o.unstable_LowPriority=p,o.unstable_NormalPriority=g,o.unstable_Profiling=dt,o.unstable_UserBlockingPriority=f,o.unstable_cancelCallback=Ss,o.unstable_continueExecution=sn,o.unstable_forceFrameRate=de,o.unstable_getCurrentPriorityLevel=Dn,o.unstable_getFirstCallbackNode=Ct,o.unstable_next=tn,o.unstable_pauseExecution=un,o.unstable_requestPaint=ot,o.unstable_runWithPriority=Bn,o.unstable_scheduleCallback=nn,o.unstable_shouldYield=Xr,o.unstable_wrapCallback=Qt,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)})()})(Tte);Ite.exports=Tte;var hbe=Ite.exports;/**
 * @license React
 * react-dom.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var o=Fi,e=hbe,t=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,i=!1;function n(d){i=d}function s(d){if(!i){for(var h=arguments.length,m=new Array(h>1?h-1:0),C=1;C<h;C++)m[C-1]=arguments[C];a("warn",d,m)}}function r(d){if(!i){for(var h=arguments.length,m=new Array(h>1?h-1:0),C=1;C<h;C++)m[C-1]=arguments[C];a("error",d,m)}}function a(d,h,m){{var C=t.ReactDebugCurrentFrame,w=C.getStackAddendum();w!==""&&(h+="%s",m=m.concat([w]));var k=m.map(function(I){return String(I)});k.unshift("Warning: "+h),Function.prototype.apply.call(console[d],console,k)}}var l=0,c=1,u=2,f=3,g=4,p=5,_=6,b=7,y=8,S=9,L=10,x=11,D=12,E=13,N=14,M=15,F=16,H=17,Q=18,K=19,j=21,q=22,se=23,fe=24,Ae=25,Ne=!0,Le=!1,be=!1,ze=!1,it=!1,qe=!0,Fe=!1,Li=!0,Bn=!0,tn=!0,Qt=!0,nn=new Set,un={},sn={};function Ct(d,h){Ss(d,h),Ss(d+"Capture",h)}function Ss(d,h){un[d]&&r("EventRegistry: More than one plugin attempted to publish the same registration name, `%s`.",d),un[d]=h;{var m=d.toLowerCase();sn[m]=d,d==="onDoubleClick"&&(sn.ondblclick=d)}for(var C=0;C<h.length;C++)nn.add(h[C])}var Dn=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Wn=Object.prototype.hasOwnProperty;function rs(d){{var h=typeof Symbol=="function"&&Symbol.toStringTag,m=h&&d[Symbol.toStringTag]||d.constructor.name||"Object";return m}}function Ri(d){try{return Vn(d),!1}catch{return!0}}function Vn(d){return""+d}function Jo(d,h){if(Ri(d))return r("The provided `%s` attribute is an unsupported type %s. This value must be coerced to a string before before using it here.",h,rs(d)),Vn(d)}function Xr(d){if(Ri(d))return r("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",rs(d)),Vn(d)}function ve(d,h){if(Ri(d))return r("The provided `%s` prop is an unsupported type %s. This value must be coerced to a string before before using it here.",h,rs(d)),Vn(d)}function de(d,h){if(Ri(d))return r("The provided `%s` CSS property is an unsupported type %s. This value must be coerced to a string before before using it here.",h,rs(d)),Vn(d)}function ae(d){if(Ri(d))return r("The provided HTML markup uses a value of unsupported type %s. This value must be coerced to a string before before using it here.",rs(d)),Vn(d)}function z(d){if(Ri(d))return r("Form field values (value, checked, defaultValue, or defaultChecked props) must be strings, not %s. This value must be coerced to a string before before using it here.",rs(d)),Vn(d)}var $=0,ee=1,X=2,pe=3,He=4,ot=5,dt=6,Re=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",Ue=Re+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",wt=new RegExp("^["+Re+"]["+Ue+"]*$"),Tt={},et={};function mi(d){return Wn.call(et,d)?!0:Wn.call(Tt,d)?!1:wt.test(d)?(et[d]=!0,!0):(Tt[d]=!0,r("Invalid attribute name: `%s`",d),!1)}function ui(d,h,m){return h!==null?h.type===$:m?!1:d.length>2&&(d[0]==="o"||d[0]==="O")&&(d[1]==="n"||d[1]==="N")}function ps(d,h,m,C){if(m!==null&&m.type===$)return!1;switch(typeof h){case"function":case"symbol":return!0;case"boolean":{if(C)return!1;if(m!==null)return!m.acceptsBooleans;var w=d.toLowerCase().slice(0,5);return w!=="data-"&&w!=="aria-"}default:return!1}}function It(d,h,m,C){if(h===null||typeof h>"u"||ps(d,h,m,C))return!0;if(C)return!1;if(m!==null)switch(m.type){case pe:return!h;case He:return h===!1;case ot:return isNaN(h);case dt:return isNaN(h)||h<1}return!1}function ji(d){return En.hasOwnProperty(d)?En[d]:null}function kn(d,h,m,C,w,k,I){this.acceptsBooleans=h===X||h===pe||h===He,this.attributeName=C,this.attributeNamespace=w,this.mustUseProperty=m,this.propertyName=d,this.type=h,this.sanitizeURL=k,this.removeEmptyString=I}var En={},Js=["children","dangerouslySetInnerHTML","defaultValue","defaultChecked","innerHTML","suppressContentEditableWarning","suppressHydrationWarning","style"];Js.forEach(function(d){En[d]=new kn(d,$,!1,d,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(d){var h=d[0],m=d[1];En[h]=new kn(h,ee,!1,m,null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(d){En[d]=new kn(d,X,!1,d.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(d){En[d]=new kn(d,X,!1,d,null,!1,!1)}),["allowFullScreen","async","autoFocus","autoPlay","controls","default","defer","disabled","disablePictureInPicture","disableRemotePlayback","formNoValidate","hidden","loop","noModule","noValidate","open","playsInline","readOnly","required","reversed","scoped","seamless","itemScope"].forEach(function(d){En[d]=new kn(d,pe,!1,d.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(d){En[d]=new kn(d,pe,!0,d,null,!1,!1)}),["capture","download"].forEach(function(d){En[d]=new kn(d,He,!1,d,null,!1,!1)}),["cols","rows","size","span"].forEach(function(d){En[d]=new kn(d,dt,!1,d,null,!1,!1)}),["rowSpan","start"].forEach(function(d){En[d]=new kn(d,ot,!1,d.toLowerCase(),null,!1,!1)});var Co=/[\-\:]([a-z])/g,Sa=function(d){return d[1].toUpperCase()};["accent-height","alignment-baseline","arabic-form","baseline-shift","cap-height","clip-path","clip-rule","color-interpolation","color-interpolation-filters","color-profile","color-rendering","dominant-baseline","enable-background","fill-opacity","fill-rule","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","glyph-name","glyph-orientation-horizontal","glyph-orientation-vertical","horiz-adv-x","horiz-origin-x","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","overline-position","overline-thickness","paint-order","panose-1","pointer-events","rendering-intent","shape-rendering","stop-color","stop-opacity","strikethrough-position","strikethrough-thickness","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-rendering","underline-position","underline-thickness","unicode-bidi","unicode-range","units-per-em","v-alphabetic","v-hanging","v-ideographic","v-mathematical","vector-effect","vert-adv-y","vert-origin-x","vert-origin-y","word-spacing","writing-mode","xmlns:xlink","x-height"].forEach(function(d){var h=d.replace(Co,Sa);En[h]=new kn(h,ee,!1,d,null,!1,!1)}),["xlink:actuate","xlink:arcrole","xlink:role","xlink:show","xlink:title","xlink:type"].forEach(function(d){var h=d.replace(Co,Sa);En[h]=new kn(h,ee,!1,d,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(d){var h=d.replace(Co,Sa);En[h]=new kn(h,ee,!1,d,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(d){En[d]=new kn(d,ee,!1,d.toLowerCase(),null,!1,!1)});var Za="xlinkHref";En[Za]=new kn("xlinkHref",ee,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(d){En[d]=new kn(d,ee,!1,d.toLowerCase(),null,!0,!0)});var yc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*\:/i,La=!1;function Xc(d){!La&&yc.test(d)&&(La=!0,r("A future version of React will block javascript: URLs as a security precaution. Use event handlers instead if you can. If you need to generate unsafe HTML try using dangerouslySetInnerHTML instead. React was passed %s.",JSON.stringify(d)))}function wo(d,h,m,C){if(C.mustUseProperty){var w=C.propertyName;return d[w]}else{Jo(m,h),C.sanitizeURL&&Xc(""+m);var k=C.attributeName,I=null;if(C.type===He){if(d.hasAttribute(k)){var R=d.getAttribute(k);return R===""?!0:It(h,m,C,!1)?R:R===""+m?m:R}}else if(d.hasAttribute(k)){if(It(h,m,C,!1))return d.getAttribute(k);if(C.type===pe)return m;I=d.getAttribute(k)}return It(h,m,C,!1)?I===null?m:I:I===""+m?m:I}}function Qa(d,h,m,C){{if(!mi(h))return;if(!d.hasAttribute(h))return m===void 0?void 0:null;var w=d.getAttribute(h);return Jo(m,h),w===""+m?m:w}}function xa(d,h,m,C){var w=ji(h);if(!ui(h,w,C)){if(It(h,m,w,C)&&(m=null),C||w===null){if(mi(h)){var k=h;m===null?d.removeAttribute(k):(Jo(m,h),d.setAttribute(k,""+m))}return}var I=w.mustUseProperty;if(I){var R=w.propertyName;if(m===null){var O=w.type;d[R]=O===pe?!1:""}else d[R]=m;return}var U=w.attributeName,G=w.attributeNamespace;if(m===null)d.removeAttribute(U);else{var ce=w.type,le;ce===pe||ce===He&&m===!0?le="":(Jo(m,U),le=""+m,w.sanitizeURL&&Xc(le.toString())),G?d.setAttributeNS(G,U,le):d.setAttribute(U,le)}}}var Da=Symbol.for("react.element"),Pl=Symbol.for("react.portal"),te=Symbol.for("react.fragment"),Ye=Symbol.for("react.strict_mode"),_t=Symbol.for("react.profiler"),qt=Symbol.for("react.provider"),Wi=Symbol.for("react.context"),ti=Symbol.for("react.forward_ref"),Ti=Symbol.for("react.suspense"),Je=Symbol.for("react.suspense_list"),re=Symbol.for("react.memo"),Pe=Symbol.for("react.lazy"),nt=Symbol.for("react.scope"),xi=Symbol.for("react.debug_trace_mode"),jn=Symbol.for("react.offscreen"),Bs=Symbol.for("react.legacy_hidden"),Mi=Symbol.for("react.cache"),er=Symbol.for("react.tracing_marker"),au=Symbol.iterator,wg="@@iterator";function lu(d){if(d===null||typeof d!="object")return null;var h=au&&d[au]||d[wg];return typeof h=="function"?h:null}var Ki=Object.assign,qm=0,yg,mw,_w,vw,bw,Cw,ww;function yw(){}yw.__reactDisabledLog=!0;function kk(){{if(qm===0){yg=console.log,mw=console.info,_w=console.warn,vw=console.error,bw=console.group,Cw=console.groupCollapsed,ww=console.groupEnd;var d={configurable:!0,enumerable:!0,value:yw,writable:!0};Object.defineProperties(console,{info:d,log:d,warn:d,error:d,group:d,groupCollapsed:d,groupEnd:d})}qm++}}function EO(){{if(qm--,qm===0){var d={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:Ki({},d,{value:yg}),info:Ki({},d,{value:mw}),warn:Ki({},d,{value:_w}),error:Ki({},d,{value:vw}),group:Ki({},d,{value:bw}),groupCollapsed:Ki({},d,{value:Cw}),groupEnd:Ki({},d,{value:ww})})}qm<0&&r("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var Sw=t.ReactCurrentDispatcher,Gm;function Sc(d,h,m){{if(Gm===void 0)try{throw Error()}catch(w){var C=w.stack.trim().match(/\n( *(at )?)/);Gm=C&&C[1]||""}return`
`+Gm+d}}var Sg=!1,Lg;{var wb=typeof WeakMap=="function"?WeakMap:Map;Lg=new wb}function Lw(d,h){if(!d||Sg)return"";{var m=Lg.get(d);if(m!==void 0)return m}var C;Sg=!0;var w=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var k;k=Sw.current,Sw.current=null,kk();try{if(h){var I=function(){throw Error()};if(Object.defineProperty(I.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(I,[])}catch(De){C=De}Reflect.construct(d,[],I)}else{try{I.call()}catch(De){C=De}d.call(I.prototype)}}else{try{throw Error()}catch(De){C=De}d()}}catch(De){if(De&&C&&typeof De.stack=="string"){for(var R=De.stack.split(`
`),O=C.stack.split(`
`),U=R.length-1,G=O.length-1;U>=1&&G>=0&&R[U]!==O[G];)G--;for(;U>=1&&G>=0;U--,G--)if(R[U]!==O[G]){if(U!==1||G!==1)do if(U--,G--,G<0||R[U]!==O[G]){var ce=`
`+R[U].replace(" at new "," at ");return d.displayName&&ce.includes("<anonymous>")&&(ce=ce.replace("<anonymous>",d.displayName)),typeof d=="function"&&Lg.set(d,ce),ce}while(U>=1&&G>=0);break}}}finally{Sg=!1,Sw.current=k,EO(),Error.prepareStackTrace=w}var le=d?d.displayName||d.name:"",we=le?Sc(le):"";return typeof d=="function"&&Lg.set(d,we),we}function Ek(d,h,m){return Lw(d,!0)}function xw(d,h,m){return Lw(d,!1)}function IO(d){var h=d.prototype;return!!(h&&h.isReactComponent)}function xg(d,h,m){if(d==null)return"";if(typeof d=="function")return Lw(d,IO(d));if(typeof d=="string")return Sc(d);switch(d){case Ti:return Sc("Suspense");case Je:return Sc("SuspenseList")}if(typeof d=="object")switch(d.$$typeof){case ti:return xw(d.render);case re:return xg(d.type,h,m);case Pe:{var C=d,w=C._payload,k=C._init;try{return xg(k(w),h,m)}catch{}}}return""}function Ik(d){switch(d._debugOwner&&d._debugOwner.type,d._debugSource,d.tag){case p:return Sc(d.type);case F:return Sc("Lazy");case E:return Sc("Suspense");case K:return Sc("SuspenseList");case l:case u:case M:return xw(d.type);case x:return xw(d.type.render);case c:return Ek(d.type);default:return""}}function Dw(d){try{var h="",m=d;do h+=Ik(m),m=m.return;while(m);return h}catch(C){return`
Error generating stack: `+C.message+`
`+C.stack}}function yb(d,h,m){var C=d.displayName;if(C)return C;var w=h.displayName||h.name||"";return w!==""?m+"("+w+")":m}function Tk(d){return d.displayName||"Context"}function hn(d){if(d==null)return null;if(typeof d.tag=="number"&&r("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case te:return"Fragment";case Pl:return"Portal";case _t:return"Profiler";case Ye:return"StrictMode";case Ti:return"Suspense";case Je:return"SuspenseList"}if(typeof d=="object")switch(d.$$typeof){case Wi:var h=d;return Tk(h)+".Consumer";case qt:var m=d;return Tk(m._context)+".Provider";case ti:return yb(d,d.render,"ForwardRef");case re:var C=d.displayName||null;return C!==null?C:hn(d.type)||"Memo";case Pe:{var w=d,k=w._payload,I=w._init;try{return hn(I(k))}catch{return null}}}return null}function kw(d,h,m){var C=h.displayName||h.name||"";return d.displayName||(C!==""?m+"("+C+")":m)}function Ew(d){return d.displayName||"Context"}function Ei(d){var h=d.tag,m=d.type;switch(h){case fe:return"Cache";case S:var C=m;return Ew(C)+".Consumer";case L:var w=m;return Ew(w._context)+".Provider";case Q:return"DehydratedFragment";case x:return kw(m,m.render,"ForwardRef");case b:return"Fragment";case p:return m;case g:return"Portal";case f:return"Root";case _:return"Text";case F:return hn(m);case y:return m===Ye?"StrictMode":"Mode";case q:return"Offscreen";case D:return"Profiler";case j:return"Scope";case E:return"Suspense";case K:return"SuspenseList";case Ae:return"TracingMarker";case c:case l:case H:case u:case N:case M:if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m;break}return null}var Nk=t.ReactDebugCurrentFrame,Jr=null,Ym=!1;function Dg(){{if(Jr===null)return null;var d=Jr._debugOwner;if(d!==null&&typeof d<"u")return Ei(d)}return null}function Rk(){return Jr===null?"":Dw(Jr)}function tr(){Nk.getCurrentStack=null,Jr=null,Ym=!1}function $s(d){Nk.getCurrentStack=d===null?null:Rk,Jr=d,Ym=!1}function Mk(){return Jr}function Ol(d){Ym=d}function Xa(d){return""+d}function cu(d){switch(typeof d){case"boolean":case"number":case"string":case"undefined":return d;case"object":return z(d),d;default:return""}}var TO={button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0};function Sb(d,h){TO[h.type]||h.onChange||h.onInput||h.readOnly||h.disabled||h.value==null||r("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`."),h.onChange||h.readOnly||h.disabled||h.checked==null||r("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")}function Zm(d){var h=d.type,m=d.nodeName;return m&&m.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function Ak(d){return d._valueTracker}function kg(d){d._valueTracker=null}function Pk(d){var h="";return d&&(Zm(d)?h=d.checked?"true":"false":h=d.value),h}function Ok(d){var h=Zm(d)?"checked":"value",m=Object.getOwnPropertyDescriptor(d.constructor.prototype,h);z(d[h]);var C=""+d[h];if(!(d.hasOwnProperty(h)||typeof m>"u"||typeof m.get!="function"||typeof m.set!="function")){var w=m.get,k=m.set;Object.defineProperty(d,h,{configurable:!0,get:function(){return w.call(this)},set:function(R){z(R),C=""+R,k.call(this,R)}}),Object.defineProperty(d,h,{enumerable:m.enumerable});var I={getValue:function(){return C},setValue:function(R){z(R),C=""+R},stopTracking:function(){kg(d),delete d[h]}};return I}}function Eh(d){Ak(d)||(d._valueTracker=Ok(d))}function Lb(d){if(!d)return!1;var h=Ak(d);if(!h)return!0;var m=h.getValue(),C=Pk(d);return C!==m?(h.setValue(C),!0):!1}function Eg(d){if(d=d||(typeof document<"u"?document:void 0),typeof d>"u")return null;try{return d.activeElement||d.body}catch{return d.body}}var xb=!1,Fk=!1,Bk=!1,Wk=!1;function Vk(d){var h=d.type==="checkbox"||d.type==="radio";return h?d.checked!=null:d.value!=null}function B(d,h){var m=d,C=h.checked,w=Ki({},h,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:C??m._wrapperState.initialChecked});return w}function ie(d,h){Sb("input",h),h.checked!==void 0&&h.defaultChecked!==void 0&&!Fk&&(r("%s contains an input of type %s with both checked and defaultChecked props. Input elements must be either controlled or uncontrolled (specify either the checked prop, or the defaultChecked prop, but not both). Decide between using a controlled or uncontrolled input element and remove one of these props. More info: https://reactjs.org/link/controlled-components",Dg()||"A component",h.type),Fk=!0),h.value!==void 0&&h.defaultValue!==void 0&&!xb&&(r("%s contains an input of type %s with both value and defaultValue props. Input elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled input element and remove one of these props. More info: https://reactjs.org/link/controlled-components",Dg()||"A component",h.type),xb=!0);var m=d,C=h.defaultValue==null?"":h.defaultValue;m._wrapperState={initialChecked:h.checked!=null?h.checked:h.defaultChecked,initialValue:cu(h.value!=null?h.value:C),controlled:Vk(h)}}function xe(d,h){var m=d,C=h.checked;C!=null&&xa(m,"checked",C,!1)}function Oe(d,h){var m=d;{var C=Vk(h);!m._wrapperState.controlled&&C&&!Wk&&(r("A component is changing an uncontrolled input to be controlled. This is likely caused by the value changing from undefined to a defined value, which should not happen. Decide between using a controlled or uncontrolled input element for the lifetime of the component. More info: https://reactjs.org/link/controlled-components"),Wk=!0),m._wrapperState.controlled&&!C&&!Bk&&(r("A component is changing a controlled input to be uncontrolled. This is likely caused by the value changing from a defined to undefined, which should not happen. Decide between using a controlled or uncontrolled input element for the lifetime of the component. More info: https://reactjs.org/link/controlled-components"),Bk=!0)}xe(d,h);var w=cu(h.value),k=h.type;if(w!=null)k==="number"?(w===0&&m.value===""||m.value!=w)&&(m.value=Xa(w)):m.value!==Xa(w)&&(m.value=Xa(w));else if(k==="submit"||k==="reset"){m.removeAttribute("value");return}h.hasOwnProperty("value")?_i(m,h.type,w):h.hasOwnProperty("defaultValue")&&_i(m,h.type,cu(h.defaultValue)),h.checked==null&&h.defaultChecked!=null&&(m.defaultChecked=!!h.defaultChecked)}function ut(d,h,m){var C=d;if(h.hasOwnProperty("value")||h.hasOwnProperty("defaultValue")){var w=h.type,k=w==="submit"||w==="reset";if(k&&(h.value===void 0||h.value===null))return;var I=Xa(C._wrapperState.initialValue);m||I!==C.value&&(C.value=I),C.defaultValue=I}var R=C.name;R!==""&&(C.name=""),C.defaultChecked=!C.defaultChecked,C.defaultChecked=!!C._wrapperState.initialChecked,R!==""&&(C.name=R)}function li(d,h){var m=d;Oe(m,h),Ft(m,h)}function Ft(d,h){var m=h.name;if(h.type==="radio"&&m!=null){for(var C=d;C.parentNode;)C=C.parentNode;Jo(m,"name");for(var w=C.querySelectorAll("input[name="+JSON.stringify(""+m)+'][type="radio"]'),k=0;k<w.length;k++){var I=w[k];if(!(I===d||I.form!==d.form)){var R=DE(I);if(!R)throw new Error("ReactDOMInput: Mixing React and non-React radio inputs with the same `name` is not supported.");Lb(I),Oe(I,R)}}}}function _i(d,h,m){(h!=="number"||Eg(d.ownerDocument)!==d)&&(m==null?d.defaultValue=Xa(d._wrapperState.initialValue):d.defaultValue!==Xa(m)&&(d.defaultValue=Xa(m)))}var Yi=!1,Kn=!1,ms=!1;function _s(d,h){h.value==null&&(typeof h.children=="object"&&h.children!==null?o.Children.forEach(h.children,function(m){m!=null&&(typeof m=="string"||typeof m=="number"||Kn||(Kn=!0,r("Cannot infer the option value of complex children. Pass a `value` prop or use a plain string as children to <option>.")))}):h.dangerouslySetInnerHTML!=null&&(ms||(ms=!0,r("Pass a `value` prop if you set dangerouslyInnerHTML so React knows which value should be selected.")))),h.selected!=null&&!Yi&&(r("Use the `defaultValue` or `value` props on <select> instead of setting `selected` on <option>."),Yi=!0)}function Ts(d,h){h.value!=null&&d.setAttribute("value",Xa(cu(h.value)))}var eo=Array.isArray;function In(d){return eo(d)}var Ig;Ig=!1;function Db(){var d=Dg();return d?`

Check the render method of \``+d+"`.":""}var Iw=["value","defaultValue"];function NO(d){{Sb("select",d);for(var h=0;h<Iw.length;h++){var m=Iw[h];if(d[m]!=null){var C=In(d[m]);d.multiple&&!C?r("The `%s` prop supplied to <select> must be an array if `multiple` is true.%s",m,Db()):!d.multiple&&C&&r("The `%s` prop supplied to <select> must be a scalar value if `multiple` is false.%s",m,Db())}}}}function Ih(d,h,m,C){var w=d.options;if(h){for(var k=m,I={},R=0;R<k.length;R++)I["$"+k[R]]=!0;for(var O=0;O<w.length;O++){var U=I.hasOwnProperty("$"+w[O].value);w[O].selected!==U&&(w[O].selected=U),U&&C&&(w[O].defaultSelected=!0)}}else{for(var G=Xa(cu(m)),ce=null,le=0;le<w.length;le++){if(w[le].value===G){w[le].selected=!0,C&&(w[le].defaultSelected=!0);return}ce===null&&!w[le].disabled&&(ce=w[le])}ce!==null&&(ce.selected=!0)}}function Tw(d,h){return Ki({},h,{value:void 0})}function Nw(d,h){var m=d;NO(h),m._wrapperState={wasMultiple:!!h.multiple},h.value!==void 0&&h.defaultValue!==void 0&&!Ig&&(r("Select elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled select element and remove one of these props. More info: https://reactjs.org/link/controlled-components"),Ig=!0)}function RO(d,h){var m=d;m.multiple=!!h.multiple;var C=h.value;C!=null?Ih(m,!!h.multiple,C,!1):h.defaultValue!=null&&Ih(m,!!h.multiple,h.defaultValue,!0)}function qce(d,h){var m=d,C=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!h.multiple;var w=h.value;w!=null?Ih(m,!!h.multiple,w,!1):C!==!!h.multiple&&(h.defaultValue!=null?Ih(m,!!h.multiple,h.defaultValue,!0):Ih(m,!!h.multiple,h.multiple?[]:"",!1))}function Gce(d,h){var m=d,C=h.value;C!=null&&Ih(m,!!h.multiple,C,!1)}var YU=!1;function MO(d,h){var m=d;if(h.dangerouslySetInnerHTML!=null)throw new Error("`dangerouslySetInnerHTML` does not make sense on <textarea>.");var C=Ki({},h,{value:void 0,defaultValue:void 0,children:Xa(m._wrapperState.initialValue)});return C}function ZU(d,h){var m=d;Sb("textarea",h),h.value!==void 0&&h.defaultValue!==void 0&&!YU&&(r("%s contains a textarea with both value and defaultValue props. Textarea elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled textarea and remove one of these props. More info: https://reactjs.org/link/controlled-components",Dg()||"A component"),YU=!0);var C=h.value;if(C==null){var w=h.children,k=h.defaultValue;if(w!=null){r("Use the `defaultValue` or `value` props instead of setting children on <textarea>.");{if(k!=null)throw new Error("If you supply `defaultValue` on a <textarea>, do not pass children.");if(In(w)){if(w.length>1)throw new Error("<textarea> can only have at most one child.");w=w[0]}k=w}}k==null&&(k=""),C=k}m._wrapperState={initialValue:cu(C)}}function QU(d,h){var m=d,C=cu(h.value),w=cu(h.defaultValue);if(C!=null){var k=Xa(C);k!==m.value&&(m.value=k),h.defaultValue==null&&m.defaultValue!==k&&(m.defaultValue=k)}w!=null&&(m.defaultValue=Xa(w))}function XU(d,h){var m=d,C=m.textContent;C===m._wrapperState.initialValue&&C!==""&&C!==null&&(m.value=C)}function Yce(d,h){QU(d,h)}var Th="http://www.w3.org/1999/xhtml",Zce="http://www.w3.org/1998/Math/MathML",AO="http://www.w3.org/2000/svg";function PO(d){switch(d){case"svg":return AO;case"math":return Zce;default:return Th}}function OO(d,h){return d==null||d===Th?PO(h):d===AO&&h==="foreignObject"?Th:d}var Qce=function(d){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(h,m,C,w){MSApp.execUnsafeLocalFunction(function(){return d(h,m,C,w)})}:d},Hk,JU=Qce(function(d,h){if(d.namespaceURI===AO&&!("innerHTML"in d)){Hk=Hk||document.createElement("div"),Hk.innerHTML="<svg>"+h.valueOf().toString()+"</svg>";for(var m=Hk.firstChild;d.firstChild;)d.removeChild(d.firstChild);for(;m.firstChild;)d.appendChild(m.firstChild);return}d.innerHTML=h}),Ja=1,Nh=3,yo=8,Rh=9,FO=11,zk=function(d,h){if(h){var m=d.firstChild;if(m&&m===d.lastChild&&m.nodeType===Nh){m.nodeValue=h;return}}d.textContent=h},Xce={animation:["animationDelay","animationDirection","animationDuration","animationFillMode","animationIterationCount","animationName","animationPlayState","animationTimingFunction"],background:["backgroundAttachment","backgroundClip","backgroundColor","backgroundImage","backgroundOrigin","backgroundPositionX","backgroundPositionY","backgroundRepeat","backgroundSize"],backgroundPosition:["backgroundPositionX","backgroundPositionY"],border:["borderBottomColor","borderBottomStyle","borderBottomWidth","borderImageOutset","borderImageRepeat","borderImageSlice","borderImageSource","borderImageWidth","borderLeftColor","borderLeftStyle","borderLeftWidth","borderRightColor","borderRightStyle","borderRightWidth","borderTopColor","borderTopStyle","borderTopWidth"],borderBlockEnd:["borderBlockEndColor","borderBlockEndStyle","borderBlockEndWidth"],borderBlockStart:["borderBlockStartColor","borderBlockStartStyle","borderBlockStartWidth"],borderBottom:["borderBottomColor","borderBottomStyle","borderBottomWidth"],borderColor:["borderBottomColor","borderLeftColor","borderRightColor","borderTopColor"],borderImage:["borderImageOutset","borderImageRepeat","borderImageSlice","borderImageSource","borderImageWidth"],borderInlineEnd:["borderInlineEndColor","borderInlineEndStyle","borderInlineEndWidth"],borderInlineStart:["borderInlineStartColor","borderInlineStartStyle","borderInlineStartWidth"],borderLeft:["borderLeftColor","borderLeftStyle","borderLeftWidth"],borderRadius:["borderBottomLeftRadius","borderBottomRightRadius","borderTopLeftRadius","borderTopRightRadius"],borderRight:["borderRightColor","borderRightStyle","borderRightWidth"],borderStyle:["borderBottomStyle","borderLeftStyle","borderRightStyle","borderTopStyle"],borderTop:["borderTopColor","borderTopStyle","borderTopWidth"],borderWidth:["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth"],columnRule:["columnRuleColor","columnRuleStyle","columnRuleWidth"],columns:["columnCount","columnWidth"],flex:["flexBasis","flexGrow","flexShrink"],flexFlow:["flexDirection","flexWrap"],font:["fontFamily","fontFeatureSettings","fontKerning","fontLanguageOverride","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontVariantAlternates","fontVariantCaps","fontVariantEastAsian","fontVariantLigatures","fontVariantNumeric","fontVariantPosition","fontWeight","lineHeight"],fontVariant:["fontVariantAlternates","fontVariantCaps","fontVariantEastAsian","fontVariantLigatures","fontVariantNumeric","fontVariantPosition"],gap:["columnGap","rowGap"],grid:["gridAutoColumns","gridAutoFlow","gridAutoRows","gridTemplateAreas","gridTemplateColumns","gridTemplateRows"],gridArea:["gridColumnEnd","gridColumnStart","gridRowEnd","gridRowStart"],gridColumn:["gridColumnEnd","gridColumnStart"],gridColumnGap:["columnGap"],gridGap:["columnGap","rowGap"],gridRow:["gridRowEnd","gridRowStart"],gridRowGap:["rowGap"],gridTemplate:["gridTemplateAreas","gridTemplateColumns","gridTemplateRows"],listStyle:["listStyleImage","listStylePosition","listStyleType"],margin:["marginBottom","marginLeft","marginRight","marginTop"],marker:["markerEnd","markerMid","markerStart"],mask:["maskClip","maskComposite","maskImage","maskMode","maskOrigin","maskPositionX","maskPositionY","maskRepeat","maskSize"],maskPosition:["maskPositionX","maskPositionY"],outline:["outlineColor","outlineStyle","outlineWidth"],overflow:["overflowX","overflowY"],padding:["paddingBottom","paddingLeft","paddingRight","paddingTop"],placeContent:["alignContent","justifyContent"],placeItems:["alignItems","justifyItems"],placeSelf:["alignSelf","justifySelf"],textDecoration:["textDecorationColor","textDecorationLine","textDecorationStyle"],textEmphasis:["textEmphasisColor","textEmphasisStyle"],transition:["transitionDelay","transitionDuration","transitionProperty","transitionTimingFunction"],wordWrap:["overflowWrap"]},Rw={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};function Jce(d,h){return d+h.charAt(0).toUpperCase()+h.substring(1)}var ede=["Webkit","ms","Moz","O"];Object.keys(Rw).forEach(function(d){ede.forEach(function(h){Rw[Jce(h,d)]=Rw[d]})});function BO(d,h,m){var C=h==null||typeof h=="boolean"||h==="";return C?"":!m&&typeof h=="number"&&h!==0&&!(Rw.hasOwnProperty(d)&&Rw[d])?h+"px":(de(h,d),(""+h).trim())}var tde=/([A-Z])/g,ide=/^ms-/;function nde(d){return d.replace(tde,"-$1").toLowerCase().replace(ide,"-ms-")}var e$=function(){};{var sde=/^(?:webkit|moz|o)[A-Z]/,ode=/^-ms-/,rde=/-(.)/g,t$=/;\s*$/,kb={},WO={},i$=!1,n$=!1,ade=function(d){return d.replace(rde,function(h,m){return m.toUpperCase()})},lde=function(d){kb.hasOwnProperty(d)&&kb[d]||(kb[d]=!0,r("Unsupported style property %s. Did you mean %s?",d,ade(d.replace(ode,"ms-"))))},cde=function(d){kb.hasOwnProperty(d)&&kb[d]||(kb[d]=!0,r("Unsupported vendor-prefixed style property %s. Did you mean %s?",d,d.charAt(0).toUpperCase()+d.slice(1)))},dde=function(d,h){WO.hasOwnProperty(h)&&WO[h]||(WO[h]=!0,r(`Style property values shouldn't contain a semicolon. Try "%s: %s" instead.`,d,h.replace(t$,"")))},ude=function(d,h){i$||(i$=!0,r("`NaN` is an invalid value for the `%s` css style property.",d))},hde=function(d,h){n$||(n$=!0,r("`Infinity` is an invalid value for the `%s` css style property.",d))};e$=function(d,h){d.indexOf("-")>-1?lde(d):sde.test(d)?cde(d):t$.test(h)&&dde(d,h),typeof h=="number"&&(isNaN(h)?ude(d,h):isFinite(h)||hde(d,h))}}var fde=e$;function gde(d){{var h="",m="";for(var C in d)if(d.hasOwnProperty(C)){var w=d[C];if(w!=null){var k=C.indexOf("--")===0;h+=m+(k?C:nde(C))+":",h+=BO(C,w,k),m=";"}}return h||null}}function s$(d,h){var m=d.style;for(var C in h)if(h.hasOwnProperty(C)){var w=C.indexOf("--")===0;w||fde(C,h[C]);var k=BO(C,h[C],w);C==="float"&&(C="cssFloat"),w?m.setProperty(C,k):m[C]=k}}function pde(d){return d==null||typeof d=="boolean"||d===""}function o$(d){var h={};for(var m in d)for(var C=Xce[m]||[m],w=0;w<C.length;w++)h[C[w]]=m;return h}function mde(d,h){{if(!h)return;var m=o$(d),C=o$(h),w={};for(var k in m){var I=m[k],R=C[k];if(R&&I!==R){var O=I+","+R;if(w[O])continue;w[O]=!0,r("%s a style property during rerender (%s) when a conflicting property is set (%s) can lead to styling bugs. To avoid this, don't mix shorthand and non-shorthand properties for the same value; instead, replace the shorthand with separate values.",pde(d[I])?"Removing":"Updating",I,R)}}}}var _de={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},vde=Ki({menuitem:!0},_de),bde="__html";function VO(d,h){if(h){if(vde[d]&&(h.children!=null||h.dangerouslySetInnerHTML!=null))throw new Error(d+" is a void element tag and must neither have `children` nor use `dangerouslySetInnerHTML`.");if(h.dangerouslySetInnerHTML!=null){if(h.children!=null)throw new Error("Can only set one of `children` or `props.dangerouslySetInnerHTML`.");if(typeof h.dangerouslySetInnerHTML!="object"||!(bde in h.dangerouslySetInnerHTML))throw new Error("`props.dangerouslySetInnerHTML` must be in the form `{__html: ...}`. Please visit https://reactjs.org/link/dangerously-set-inner-html for more information.")}if(!h.suppressContentEditableWarning&&h.contentEditable&&h.children!=null&&r("A component is `contentEditable` and contains `children` managed by React. It is now your responsibility to guarantee that none of those nodes are unexpectedly modified or duplicated. This is probably not intentional."),h.style!=null&&typeof h.style!="object")throw new Error("The `style` prop expects a mapping from style properties to values, not a string. For example, style={{marginRight: spacing + 'em'}} when using JSX.")}}function Qm(d,h){if(d.indexOf("-")===-1)return typeof h.is=="string";switch(d){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Uk={accept:"accept",acceptcharset:"acceptCharset","accept-charset":"acceptCharset",accesskey:"accessKey",action:"action",allowfullscreen:"allowFullScreen",alt:"alt",as:"as",async:"async",autocapitalize:"autoCapitalize",autocomplete:"autoComplete",autocorrect:"autoCorrect",autofocus:"autoFocus",autoplay:"autoPlay",autosave:"autoSave",capture:"capture",cellpadding:"cellPadding",cellspacing:"cellSpacing",challenge:"challenge",charset:"charSet",checked:"checked",children:"children",cite:"cite",class:"className",classid:"classID",classname:"className",cols:"cols",colspan:"colSpan",content:"content",contenteditable:"contentEditable",contextmenu:"contextMenu",controls:"controls",controlslist:"controlsList",coords:"coords",crossorigin:"crossOrigin",dangerouslysetinnerhtml:"dangerouslySetInnerHTML",data:"data",datetime:"dateTime",default:"default",defaultchecked:"defaultChecked",defaultvalue:"defaultValue",defer:"defer",dir:"dir",disabled:"disabled",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback",download:"download",draggable:"draggable",enctype:"encType",enterkeyhint:"enterKeyHint",for:"htmlFor",form:"form",formmethod:"formMethod",formaction:"formAction",formenctype:"formEncType",formnovalidate:"formNoValidate",formtarget:"formTarget",frameborder:"frameBorder",headers:"headers",height:"height",hidden:"hidden",high:"high",href:"href",hreflang:"hrefLang",htmlfor:"htmlFor",httpequiv:"httpEquiv","http-equiv":"httpEquiv",icon:"icon",id:"id",imagesizes:"imageSizes",imagesrcset:"imageSrcSet",innerhtml:"innerHTML",inputmode:"inputMode",integrity:"integrity",is:"is",itemid:"itemID",itemprop:"itemProp",itemref:"itemRef",itemscope:"itemScope",itemtype:"itemType",keyparams:"keyParams",keytype:"keyType",kind:"kind",label:"label",lang:"lang",list:"list",loop:"loop",low:"low",manifest:"manifest",marginwidth:"marginWidth",marginheight:"marginHeight",max:"max",maxlength:"maxLength",media:"media",mediagroup:"mediaGroup",method:"method",min:"min",minlength:"minLength",multiple:"multiple",muted:"muted",name:"name",nomodule:"noModule",nonce:"nonce",novalidate:"noValidate",open:"open",optimum:"optimum",pattern:"pattern",placeholder:"placeholder",playsinline:"playsInline",poster:"poster",preload:"preload",profile:"profile",radiogroup:"radioGroup",readonly:"readOnly",referrerpolicy:"referrerPolicy",rel:"rel",required:"required",reversed:"reversed",role:"role",rows:"rows",rowspan:"rowSpan",sandbox:"sandbox",scope:"scope",scoped:"scoped",scrolling:"scrolling",seamless:"seamless",selected:"selected",shape:"shape",size:"size",sizes:"sizes",span:"span",spellcheck:"spellCheck",src:"src",srcdoc:"srcDoc",srclang:"srcLang",srcset:"srcSet",start:"start",step:"step",style:"style",summary:"summary",tabindex:"tabIndex",target:"target",title:"title",type:"type",usemap:"useMap",value:"value",width:"width",wmode:"wmode",wrap:"wrap",about:"about",accentheight:"accentHeight","accent-height":"accentHeight",accumulate:"accumulate",additive:"additive",alignmentbaseline:"alignmentBaseline","alignment-baseline":"alignmentBaseline",allowreorder:"allowReorder",alphabetic:"alphabetic",amplitude:"amplitude",arabicform:"arabicForm","arabic-form":"arabicForm",ascent:"ascent",attributename:"attributeName",attributetype:"attributeType",autoreverse:"autoReverse",azimuth:"azimuth",basefrequency:"baseFrequency",baselineshift:"baselineShift","baseline-shift":"baselineShift",baseprofile:"baseProfile",bbox:"bbox",begin:"begin",bias:"bias",by:"by",calcmode:"calcMode",capheight:"capHeight","cap-height":"capHeight",clip:"clip",clippath:"clipPath","clip-path":"clipPath",clippathunits:"clipPathUnits",cliprule:"clipRule","clip-rule":"clipRule",color:"color",colorinterpolation:"colorInterpolation","color-interpolation":"colorInterpolation",colorinterpolationfilters:"colorInterpolationFilters","color-interpolation-filters":"colorInterpolationFilters",colorprofile:"colorProfile","color-profile":"colorProfile",colorrendering:"colorRendering","color-rendering":"colorRendering",contentscripttype:"contentScriptType",contentstyletype:"contentStyleType",cursor:"cursor",cx:"cx",cy:"cy",d:"d",datatype:"datatype",decelerate:"decelerate",descent:"descent",diffuseconstant:"diffuseConstant",direction:"direction",display:"display",divisor:"divisor",dominantbaseline:"dominantBaseline","dominant-baseline":"dominantBaseline",dur:"dur",dx:"dx",dy:"dy",edgemode:"edgeMode",elevation:"elevation",enablebackground:"enableBackground","enable-background":"enableBackground",end:"end",exponent:"exponent",externalresourcesrequired:"externalResourcesRequired",fill:"fill",fillopacity:"fillOpacity","fill-opacity":"fillOpacity",fillrule:"fillRule","fill-rule":"fillRule",filter:"filter",filterres:"filterRes",filterunits:"filterUnits",floodopacity:"floodOpacity","flood-opacity":"floodOpacity",floodcolor:"floodColor","flood-color":"floodColor",focusable:"focusable",fontfamily:"fontFamily","font-family":"fontFamily",fontsize:"fontSize","font-size":"fontSize",fontsizeadjust:"fontSizeAdjust","font-size-adjust":"fontSizeAdjust",fontstretch:"fontStretch","font-stretch":"fontStretch",fontstyle:"fontStyle","font-style":"fontStyle",fontvariant:"fontVariant","font-variant":"fontVariant",fontweight:"fontWeight","font-weight":"fontWeight",format:"format",from:"from",fx:"fx",fy:"fy",g1:"g1",g2:"g2",glyphname:"glyphName","glyph-name":"glyphName",glyphorientationhorizontal:"glyphOrientationHorizontal","glyph-orientation-horizontal":"glyphOrientationHorizontal",glyphorientationvertical:"glyphOrientationVertical","glyph-orientation-vertical":"glyphOrientationVertical",glyphref:"glyphRef",gradienttransform:"gradientTransform",gradientunits:"gradientUnits",hanging:"hanging",horizadvx:"horizAdvX","horiz-adv-x":"horizAdvX",horizoriginx:"horizOriginX","horiz-origin-x":"horizOriginX",ideographic:"ideographic",imagerendering:"imageRendering","image-rendering":"imageRendering",in2:"in2",in:"in",inlist:"inlist",intercept:"intercept",k1:"k1",k2:"k2",k3:"k3",k4:"k4",k:"k",kernelmatrix:"kernelMatrix",kernelunitlength:"kernelUnitLength",kerning:"kerning",keypoints:"keyPoints",keysplines:"keySplines",keytimes:"keyTimes",lengthadjust:"lengthAdjust",letterspacing:"letterSpacing","letter-spacing":"letterSpacing",lightingcolor:"lightingColor","lighting-color":"lightingColor",limitingconeangle:"limitingConeAngle",local:"local",markerend:"markerEnd","marker-end":"markerEnd",markerheight:"markerHeight",markermid:"markerMid","marker-mid":"markerMid",markerstart:"markerStart","marker-start":"markerStart",markerunits:"markerUnits",markerwidth:"markerWidth",mask:"mask",maskcontentunits:"maskContentUnits",maskunits:"maskUnits",mathematical:"mathematical",mode:"mode",numoctaves:"numOctaves",offset:"offset",opacity:"opacity",operator:"operator",order:"order",orient:"orient",orientation:"orientation",origin:"origin",overflow:"overflow",overlineposition:"overlinePosition","overline-position":"overlinePosition",overlinethickness:"overlineThickness","overline-thickness":"overlineThickness",paintorder:"paintOrder","paint-order":"paintOrder",panose1:"panose1","panose-1":"panose1",pathlength:"pathLength",patterncontentunits:"patternContentUnits",patterntransform:"patternTransform",patternunits:"patternUnits",pointerevents:"pointerEvents","pointer-events":"pointerEvents",points:"points",pointsatx:"pointsAtX",pointsaty:"pointsAtY",pointsatz:"pointsAtZ",prefix:"prefix",preservealpha:"preserveAlpha",preserveaspectratio:"preserveAspectRatio",primitiveunits:"primitiveUnits",property:"property",r:"r",radius:"radius",refx:"refX",refy:"refY",renderingintent:"renderingIntent","rendering-intent":"renderingIntent",repeatcount:"repeatCount",repeatdur:"repeatDur",requiredextensions:"requiredExtensions",requiredfeatures:"requiredFeatures",resource:"resource",restart:"restart",result:"result",results:"results",rotate:"rotate",rx:"rx",ry:"ry",scale:"scale",security:"security",seed:"seed",shaperendering:"shapeRendering","shape-rendering":"shapeRendering",slope:"slope",spacing:"spacing",specularconstant:"specularConstant",specularexponent:"specularExponent",speed:"speed",spreadmethod:"spreadMethod",startoffset:"startOffset",stddeviation:"stdDeviation",stemh:"stemh",stemv:"stemv",stitchtiles:"stitchTiles",stopcolor:"stopColor","stop-color":"stopColor",stopopacity:"stopOpacity","stop-opacity":"stopOpacity",strikethroughposition:"strikethroughPosition","strikethrough-position":"strikethroughPosition",strikethroughthickness:"strikethroughThickness","strikethrough-thickness":"strikethroughThickness",string:"string",stroke:"stroke",strokedasharray:"strokeDasharray","stroke-dasharray":"strokeDasharray",strokedashoffset:"strokeDashoffset","stroke-dashoffset":"strokeDashoffset",strokelinecap:"strokeLinecap","stroke-linecap":"strokeLinecap",strokelinejoin:"strokeLinejoin","stroke-linejoin":"strokeLinejoin",strokemiterlimit:"strokeMiterlimit","stroke-miterlimit":"strokeMiterlimit",strokewidth:"strokeWidth","stroke-width":"strokeWidth",strokeopacity:"strokeOpacity","stroke-opacity":"strokeOpacity",suppresscontenteditablewarning:"suppressContentEditableWarning",suppresshydrationwarning:"suppressHydrationWarning",surfacescale:"surfaceScale",systemlanguage:"systemLanguage",tablevalues:"tableValues",targetx:"targetX",targety:"targetY",textanchor:"textAnchor","text-anchor":"textAnchor",textdecoration:"textDecoration","text-decoration":"textDecoration",textlength:"textLength",textrendering:"textRendering","text-rendering":"textRendering",to:"to",transform:"transform",typeof:"typeof",u1:"u1",u2:"u2",underlineposition:"underlinePosition","underline-position":"underlinePosition",underlinethickness:"underlineThickness","underline-thickness":"underlineThickness",unicode:"unicode",unicodebidi:"unicodeBidi","unicode-bidi":"unicodeBidi",unicoderange:"unicodeRange","unicode-range":"unicodeRange",unitsperem:"unitsPerEm","units-per-em":"unitsPerEm",unselectable:"unselectable",valphabetic:"vAlphabetic","v-alphabetic":"vAlphabetic",values:"values",vectoreffect:"vectorEffect","vector-effect":"vectorEffect",version:"version",vertadvy:"vertAdvY","vert-adv-y":"vertAdvY",vertoriginx:"vertOriginX","vert-origin-x":"vertOriginX",vertoriginy:"vertOriginY","vert-origin-y":"vertOriginY",vhanging:"vHanging","v-hanging":"vHanging",videographic:"vIdeographic","v-ideographic":"vIdeographic",viewbox:"viewBox",viewtarget:"viewTarget",visibility:"visibility",vmathematical:"vMathematical","v-mathematical":"vMathematical",vocab:"vocab",widths:"widths",wordspacing:"wordSpacing","word-spacing":"wordSpacing",writingmode:"writingMode","writing-mode":"writingMode",x1:"x1",x2:"x2",x:"x",xchannelselector:"xChannelSelector",xheight:"xHeight","x-height":"xHeight",xlinkactuate:"xlinkActuate","xlink:actuate":"xlinkActuate",xlinkarcrole:"xlinkArcrole","xlink:arcrole":"xlinkArcrole",xlinkhref:"xlinkHref","xlink:href":"xlinkHref",xlinkrole:"xlinkRole","xlink:role":"xlinkRole",xlinkshow:"xlinkShow","xlink:show":"xlinkShow",xlinktitle:"xlinkTitle","xlink:title":"xlinkTitle",xlinktype:"xlinkType","xlink:type":"xlinkType",xmlbase:"xmlBase","xml:base":"xmlBase",xmllang:"xmlLang","xml:lang":"xmlLang",xmlns:"xmlns","xml:space":"xmlSpace",xmlnsxlink:"xmlnsXlink","xmlns:xlink":"xmlnsXlink",xmlspace:"xmlSpace",y1:"y1",y2:"y2",y:"y",ychannelselector:"yChannelSelector",z:"z",zoomandpan:"zoomAndPan"},r$={"aria-current":0,"aria-description":0,"aria-details":0,"aria-disabled":0,"aria-hidden":0,"aria-invalid":0,"aria-keyshortcuts":0,"aria-label":0,"aria-roledescription":0,"aria-autocomplete":0,"aria-checked":0,"aria-expanded":0,"aria-haspopup":0,"aria-level":0,"aria-modal":0,"aria-multiline":0,"aria-multiselectable":0,"aria-orientation":0,"aria-placeholder":0,"aria-pressed":0,"aria-readonly":0,"aria-required":0,"aria-selected":0,"aria-sort":0,"aria-valuemax":0,"aria-valuemin":0,"aria-valuenow":0,"aria-valuetext":0,"aria-atomic":0,"aria-busy":0,"aria-live":0,"aria-relevant":0,"aria-dropeffect":0,"aria-grabbed":0,"aria-activedescendant":0,"aria-colcount":0,"aria-colindex":0,"aria-colspan":0,"aria-controls":0,"aria-describedby":0,"aria-errormessage":0,"aria-flowto":0,"aria-labelledby":0,"aria-owns":0,"aria-posinset":0,"aria-rowcount":0,"aria-rowindex":0,"aria-rowspan":0,"aria-setsize":0},Eb={},Cde=new RegExp("^(aria)-["+Ue+"]*$"),wde=new RegExp("^(aria)[A-Z]["+Ue+"]*$");function yde(d,h){{if(Wn.call(Eb,h)&&Eb[h])return!0;if(wde.test(h)){var m="aria-"+h.slice(4).toLowerCase(),C=r$.hasOwnProperty(m)?m:null;if(C==null)return r("Invalid ARIA attribute `%s`. ARIA attributes follow the pattern aria-* and must be lowercase.",h),Eb[h]=!0,!0;if(h!==C)return r("Invalid ARIA attribute `%s`. Did you mean `%s`?",h,C),Eb[h]=!0,!0}if(Cde.test(h)){var w=h.toLowerCase(),k=r$.hasOwnProperty(w)?w:null;if(k==null)return Eb[h]=!0,!1;if(h!==k)return r("Unknown ARIA attribute `%s`. Did you mean `%s`?",h,k),Eb[h]=!0,!0}}return!0}function Sde(d,h){{var m=[];for(var C in h){var w=yde(d,C);w||m.push(C)}var k=m.map(function(I){return"`"+I+"`"}).join(", ");m.length===1?r("Invalid aria prop %s on <%s> tag. For details, see https://reactjs.org/link/invalid-aria-props",k,d):m.length>1&&r("Invalid aria props %s on <%s> tag. For details, see https://reactjs.org/link/invalid-aria-props",k,d)}}function Lde(d,h){Qm(d,h)||Sde(d,h)}var a$=!1;function xde(d,h){{if(d!=="input"&&d!=="textarea"&&d!=="select")return;h!=null&&h.value===null&&!a$&&(a$=!0,d==="select"&&h.multiple?r("`value` prop on `%s` should not be null. Consider using an empty array when `multiple` is set to `true` to clear the component or `undefined` for uncontrolled components.",d):r("`value` prop on `%s` should not be null. Consider using an empty string to clear the component or `undefined` for uncontrolled components.",d))}}var l$=function(){};{var ka={},c$=/^on./,Dde=/^on[^A-Z]/,kde=new RegExp("^(aria)-["+Ue+"]*$"),Ede=new RegExp("^(aria)[A-Z]["+Ue+"]*$");l$=function(d,h,m,C){if(Wn.call(ka,h)&&ka[h])return!0;var w=h.toLowerCase();if(w==="onfocusin"||w==="onfocusout")return r("React uses onFocus and onBlur instead of onFocusIn and onFocusOut. All React events are normalized to bubble, so onFocusIn and onFocusOut are not needed/supported by React."),ka[h]=!0,!0;if(C!=null){var k=C.registrationNameDependencies,I=C.possibleRegistrationNames;if(k.hasOwnProperty(h))return!0;var R=I.hasOwnProperty(w)?I[w]:null;if(R!=null)return r("Invalid event handler property `%s`. Did you mean `%s`?",h,R),ka[h]=!0,!0;if(c$.test(h))return r("Unknown event handler property `%s`. It will be ignored.",h),ka[h]=!0,!0}else if(c$.test(h))return Dde.test(h)&&r("Invalid event handler property `%s`. React events use the camelCase naming convention, for example `onClick`.",h),ka[h]=!0,!0;if(kde.test(h)||Ede.test(h))return!0;if(w==="innerhtml")return r("Directly setting property `innerHTML` is not permitted. For more information, lookup documentation on `dangerouslySetInnerHTML`."),ka[h]=!0,!0;if(w==="aria")return r("The `aria` attribute is reserved for future use in React. Pass individual `aria-` attributes instead."),ka[h]=!0,!0;if(w==="is"&&m!==null&&m!==void 0&&typeof m!="string")return r("Received a `%s` for a string attribute `is`. If this is expected, cast the value to a string.",typeof m),ka[h]=!0,!0;if(typeof m=="number"&&isNaN(m))return r("Received NaN for the `%s` attribute. If this is expected, cast the value to a string.",h),ka[h]=!0,!0;var O=ji(h),U=O!==null&&O.type===$;if(Uk.hasOwnProperty(w)){var G=Uk[w];if(G!==h)return r("Invalid DOM property `%s`. Did you mean `%s`?",h,G),ka[h]=!0,!0}else if(!U&&h!==w)return r("React does not recognize the `%s` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `%s` instead. If you accidentally passed it from a parent component, remove it from the DOM element.",h,w),ka[h]=!0,!0;return typeof m=="boolean"&&ps(h,m,O,!1)?(m?r('Received `%s` for a non-boolean attribute `%s`.\n\nIf you want to write it to the DOM, pass a string instead: %s="%s" or %s={value.toString()}.',m,h,h,m,h):r('Received `%s` for a non-boolean attribute `%s`.\n\nIf you want to write it to the DOM, pass a string instead: %s="%s" or %s={value.toString()}.\n\nIf you used to conditionally omit it with %s={condition && value}, pass %s={condition ? value : undefined} instead.',m,h,h,m,h,h,h),ka[h]=!0,!0):U?!0:ps(h,m,O,!1)?(ka[h]=!0,!1):((m==="false"||m==="true")&&O!==null&&O.type===pe&&(r("Received the string `%s` for the boolean attribute `%s`. %s Did you mean %s={%s}?",m,h,m==="false"?"The browser will interpret it as a truthy value.":'Although this works, it will not work as expected if you pass the string "false".',h,m),ka[h]=!0),!0)}}var Ide=function(d,h,m){{var C=[];for(var w in h){var k=l$(d,w,h[w],m);k||C.push(w)}var I=C.map(function(R){return"`"+R+"`"}).join(", ");C.length===1?r("Invalid value for prop %s on <%s> tag. Either remove it from the element, or pass a string or number value to keep it in the DOM. For details, see https://reactjs.org/link/attribute-behavior ",I,d):C.length>1&&r("Invalid values for props %s on <%s> tag. Either remove them from the element, or pass a string or number value to keep them in the DOM. For details, see https://reactjs.org/link/attribute-behavior ",I,d)}};function Tde(d,h,m){Qm(d,h)||Ide(d,h,m)}var d$=1,HO=2,Mw=4,Nde=d$|HO|Mw,Aw=null;function Rde(d){Aw!==null&&r("Expected currently replaying event to be null. This error is likely caused by a bug in React. Please file an issue."),Aw=d}function Mde(){Aw===null&&r("Expected currently replaying event to not be null. This error is likely caused by a bug in React. Please file an issue."),Aw=null}function Ade(d){return d===Aw}function zO(d){var h=d.target||d.srcElement||window;return h.correspondingUseElement&&(h=h.correspondingUseElement),h.nodeType===Nh?h.parentNode:h}var UO=null,Ib=null,Tb=null;function u$(d){var h=Fg(d);if(h){if(typeof UO!="function")throw new Error("setRestoreImplementation() needs to be called to handle a target for controlled events. This error is likely caused by a bug in React. Please file an issue.");var m=h.stateNode;if(m){var C=DE(m);UO(h.stateNode,h.type,C)}}}function Pde(d){UO=d}function h$(d){Ib?Tb?Tb.push(d):Tb=[d]:Ib=d}function Ode(){return Ib!==null||Tb!==null}function f$(){if(Ib){var d=Ib,h=Tb;if(Ib=null,Tb=null,u$(d),h)for(var m=0;m<h.length;m++)u$(h[m])}}var g$=function(d,h){return d(h)},p$=function(){},$O=!1;function Fde(){var d=Ode();d&&(p$(),f$())}function m$(d,h,m){if($O)return d(h,m);$O=!0;try{return g$(d,h,m)}finally{$O=!1,Fde()}}function Bde(d,h,m){g$=d,p$=m}function Wde(d){return d==="button"||d==="input"||d==="select"||d==="textarea"}function Vde(d,h,m){switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":return!!(m.disabled&&Wde(h));default:return!1}}function Pw(d,h){var m=d.stateNode;if(m===null)return null;var C=DE(m);if(C===null)return null;var w=C[h];if(Vde(h,d.type,C))return null;if(w&&typeof w!="function")throw new Error("Expected `"+h+"` listener to be a function, instead got a value of `"+typeof w+"` type.");return w}var jO=!1;if(Dn)try{var Ow={};Object.defineProperty(Ow,"passive",{get:function(){jO=!0}}),window.addEventListener("test",Ow,Ow),window.removeEventListener("test",Ow,Ow)}catch{jO=!1}function _$(d,h,m,C,w,k,I,R,O){var U=Array.prototype.slice.call(arguments,3);try{h.apply(m,U)}catch(G){this.onError(G)}}var v$=_$;if(typeof window<"u"&&typeof window.dispatchEvent=="function"&&typeof document<"u"&&typeof document.createEvent=="function"){var KO=document.createElement("react");v$=function(h,m,C,w,k,I,R,O,U){if(typeof document>"u"||document===null)throw new Error("The `document` global was defined when React was initialized, but is not defined anymore. This can happen in a test environment if a component schedules an update from an asynchronous callback, but the test has already finished running. To solve this, you can either unmount the component at the end of your test (and ensure that any asynchronous operations get canceled in `componentWillUnmount`), or you can change the test itself to be asynchronous.");var G=document.createEvent("Event"),ce=!1,le=!0,we=window.event,De=Object.getOwnPropertyDescriptor(window,"event");function We(){KO.removeEventListener(Ve,Gt,!1),typeof window.event<"u"&&window.hasOwnProperty("event")&&(window.event=we)}var yt=Array.prototype.slice.call(arguments,3);function Gt(){ce=!0,We(),m.apply(C,yt),le=!1}var Ht,Xi=!1,$i=!1;function me(_e){if(Ht=_e.error,Xi=!0,Ht===null&&_e.colno===0&&_e.lineno===0&&($i=!0),_e.defaultPrevented&&Ht!=null&&typeof Ht=="object")try{Ht._suppressLogging=!0}catch{}}var Ve="react-"+(h||"invokeguardedcallback");if(window.addEventListener("error",me),KO.addEventListener(Ve,Gt,!1),G.initEvent(Ve,!1,!1),KO.dispatchEvent(G),De&&Object.defineProperty(window,"event",De),ce&&le&&(Xi?$i&&(Ht=new Error("A cross-origin error was thrown. React doesn't have access to the actual error object in development. See https://reactjs.org/link/crossorigin-error for more information.")):Ht=new Error(`An error was thrown inside one of your components, but React doesn't know what it was. This is likely due to browser flakiness. React does its best to preserve the "Pause on exceptions" behavior of the DevTools, which requires some DEV-mode only tricks. It's possible that these don't work in your browser. Try triggering the error in production mode, or switching to a modern browser. If you suspect that this is actually an issue with React, please file an issue.`),this.onError(Ht)),window.removeEventListener("error",me),!ce)return We(),_$.apply(this,arguments)}}var Hde=v$,Nb=!1,$k=null,jk=!1,qO=null,zde={onError:function(d){Nb=!0,$k=d}};function GO(d,h,m,C,w,k,I,R,O){Nb=!1,$k=null,Hde.apply(zde,arguments)}function Ude(d,h,m,C,w,k,I,R,O){if(GO.apply(this,arguments),Nb){var U=YO();jk||(jk=!0,qO=U)}}function $de(){if(jk){var d=qO;throw jk=!1,qO=null,d}}function jde(){return Nb}function YO(){if(Nb){var d=$k;return Nb=!1,$k=null,d}else throw new Error("clearCaughtError was called but no error was captured. This error is likely caused by a bug in React. Please file an issue.")}function Rb(d){return d._reactInternals}function Kde(d){return d._reactInternals!==void 0}function qde(d,h){d._reactInternals=h}var ri=0,Mb=1,So=2,on=4,Xm=16,Fw=32,ZO=64,Tn=128,Mh=256,Tg=512,Jm=1024,Jc=2048,Ah=4096,e_=8192,Kk=16384,Gde=Jc|on|ZO|Tg|Jm|Kk,Yde=32767,Bw=32768,Ea=65536,QO=131072,b$=1048576,XO=2097152,t_=4194304,JO=8388608,Ph=16777216,qk=33554432,e2=on|Jm|0,t2=So|on|Xm|Fw|Tg|Ah|e_,Ww=on|ZO|Tg|e_,Ab=Jc|Xm,Oh=t_|JO|XO,Zde=t.ReactCurrentOwner;function i_(d){var h=d,m=d;if(d.alternate)for(;h.return;)h=h.return;else{var C=h;do h=C,(h.flags&(So|Ah))!==ri&&(m=h.return),C=h.return;while(C)}return h.tag===f?m:null}function C$(d){if(d.tag===E){var h=d.memoizedState;if(h===null){var m=d.alternate;m!==null&&(h=m.memoizedState)}if(h!==null)return h.dehydrated}return null}function w$(d){return d.tag===f?d.stateNode.containerInfo:null}function Qde(d){return i_(d)===d}function Xde(d){{var h=Zde.current;if(h!==null&&h.tag===c){var m=h,C=m.stateNode;C._warnedAboutRefsInRender||r("%s is accessing isMounted inside its render() function. render() should be a pure function of props and state. It should never access something that requires stale data from the previous render, such as refs. Move this logic to componentDidMount and componentDidUpdate instead.",Ei(m)||"A component"),C._warnedAboutRefsInRender=!0}}var w=Rb(d);return w?i_(w)===w:!1}function y$(d){if(i_(d)!==d)throw new Error("Unable to find node on an unmounted component.")}function S$(d){var h=d.alternate;if(!h){var m=i_(d);if(m===null)throw new Error("Unable to find node on an unmounted component.");return m!==d?null:d}for(var C=d,w=h;;){var k=C.return;if(k===null)break;var I=k.alternate;if(I===null){var R=k.return;if(R!==null){C=w=R;continue}break}if(k.child===I.child){for(var O=k.child;O;){if(O===C)return y$(k),d;if(O===w)return y$(k),h;O=O.sibling}throw new Error("Unable to find node on an unmounted component.")}if(C.return!==w.return)C=k,w=I;else{for(var U=!1,G=k.child;G;){if(G===C){U=!0,C=k,w=I;break}if(G===w){U=!0,w=k,C=I;break}G=G.sibling}if(!U){for(G=I.child;G;){if(G===C){U=!0,C=I,w=k;break}if(G===w){U=!0,w=I,C=k;break}G=G.sibling}if(!U)throw new Error("Child was not found in either parent set. This indicates a bug in React related to the return pointer. Please file an issue.")}}if(C.alternate!==w)throw new Error("Return fibers should always be each others' alternates. This error is likely caused by a bug in React. Please file an issue.")}if(C.tag!==f)throw new Error("Unable to find node on an unmounted component.");return C.stateNode.current===C?d:h}function L$(d){var h=S$(d);return h!==null?x$(h):null}function x$(d){if(d.tag===p||d.tag===_)return d;for(var h=d.child;h!==null;){var m=x$(h);if(m!==null)return m;h=h.sibling}return null}function Jde(d){var h=S$(d);return h!==null?D$(h):null}function D$(d){if(d.tag===p||d.tag===_)return d;for(var h=d.child;h!==null;){if(h.tag!==g){var m=D$(h);if(m!==null)return m}h=h.sibling}return null}var k$=e.unstable_scheduleCallback,eue=e.unstable_cancelCallback,tue=e.unstable_shouldYield,iue=e.unstable_requestPaint,ir=e.unstable_now,nue=e.unstable_getCurrentPriorityLevel,Gk=e.unstable_ImmediatePriority,i2=e.unstable_UserBlockingPriority,n_=e.unstable_NormalPriority,sue=e.unstable_LowPriority,n2=e.unstable_IdlePriority,oue=e.unstable_yieldValue,rue=e.unstable_setDisableYieldValue,Pb=null,ea=null,xt=null,du=!1,ed=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u";function aue(d){if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")return!1;var h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(h.isDisabled)return!0;if(!h.supportsFiber)return r("The installed version of React DevTools is too old and will not work with the current version of React. Please update React DevTools. https://reactjs.org/link/react-devtools"),!0;try{Bn&&(d=Ki({},d,{getLaneLabelMap:fue,injectProfilingHooks:hue})),Pb=h.inject(d),ea=h}catch(m){r("React instrumentation encountered an error: %s.",m)}return!!h.checkDCE}function lue(d,h){if(ea&&typeof ea.onScheduleFiberRoot=="function")try{ea.onScheduleFiberRoot(Pb,d,h)}catch(m){du||(du=!0,r("React instrumentation encountered an error: %s",m))}}function cue(d,h){if(ea&&typeof ea.onCommitFiberRoot=="function")try{var m=(d.current.flags&Tn)===Tn;if(tn){var C;switch(h){case Wl:C=Gk;break;case Bh:C=i2;break;case Wh:C=n_;break;case tE:C=n2;break;default:C=n_;break}ea.onCommitFiberRoot(Pb,d,C,m)}}catch(w){du||(du=!0,r("React instrumentation encountered an error: %s",w))}}function due(d){if(ea&&typeof ea.onPostCommitFiberRoot=="function")try{ea.onPostCommitFiberRoot(Pb,d)}catch(h){du||(du=!0,r("React instrumentation encountered an error: %s",h))}}function uue(d){if(ea&&typeof ea.onCommitFiberUnmount=="function")try{ea.onCommitFiberUnmount(Pb,d)}catch(h){du||(du=!0,r("React instrumentation encountered an error: %s",h))}}function nr(d){if(typeof oue=="function"&&(rue(d),n(d)),ea&&typeof ea.setStrictMode=="function")try{ea.setStrictMode(Pb,d)}catch(h){du||(du=!0,r("React instrumentation encountered an error: %s",h))}}function hue(d){xt=d}function fue(){{for(var d=new Map,h=1,m=0;m<o2;m++){var C=Mue(h);d.set(h,C),h*=2}return d}}function gue(d){xt!==null&&typeof xt.markCommitStarted=="function"&&xt.markCommitStarted(d)}function E$(){xt!==null&&typeof xt.markCommitStopped=="function"&&xt.markCommitStopped()}function Vw(d){xt!==null&&typeof xt.markComponentRenderStarted=="function"&&xt.markComponentRenderStarted(d)}function Ob(){xt!==null&&typeof xt.markComponentRenderStopped=="function"&&xt.markComponentRenderStopped()}function pue(d){xt!==null&&typeof xt.markComponentPassiveEffectMountStarted=="function"&&xt.markComponentPassiveEffectMountStarted(d)}function mue(){xt!==null&&typeof xt.markComponentPassiveEffectMountStopped=="function"&&xt.markComponentPassiveEffectMountStopped()}function _ue(d){xt!==null&&typeof xt.markComponentPassiveEffectUnmountStarted=="function"&&xt.markComponentPassiveEffectUnmountStarted(d)}function vue(){xt!==null&&typeof xt.markComponentPassiveEffectUnmountStopped=="function"&&xt.markComponentPassiveEffectUnmountStopped()}function bue(d){xt!==null&&typeof xt.markComponentLayoutEffectMountStarted=="function"&&xt.markComponentLayoutEffectMountStarted(d)}function Cue(){xt!==null&&typeof xt.markComponentLayoutEffectMountStopped=="function"&&xt.markComponentLayoutEffectMountStopped()}function I$(d){xt!==null&&typeof xt.markComponentLayoutEffectUnmountStarted=="function"&&xt.markComponentLayoutEffectUnmountStarted(d)}function T$(){xt!==null&&typeof xt.markComponentLayoutEffectUnmountStopped=="function"&&xt.markComponentLayoutEffectUnmountStopped()}function wue(d,h,m){xt!==null&&typeof xt.markComponentErrored=="function"&&xt.markComponentErrored(d,h,m)}function yue(d,h,m){xt!==null&&typeof xt.markComponentSuspended=="function"&&xt.markComponentSuspended(d,h,m)}function Sue(d){xt!==null&&typeof xt.markLayoutEffectsStarted=="function"&&xt.markLayoutEffectsStarted(d)}function Lue(){xt!==null&&typeof xt.markLayoutEffectsStopped=="function"&&xt.markLayoutEffectsStopped()}function xue(d){xt!==null&&typeof xt.markPassiveEffectsStarted=="function"&&xt.markPassiveEffectsStarted(d)}function Due(){xt!==null&&typeof xt.markPassiveEffectsStopped=="function"&&xt.markPassiveEffectsStopped()}function N$(d){xt!==null&&typeof xt.markRenderStarted=="function"&&xt.markRenderStarted(d)}function kue(){xt!==null&&typeof xt.markRenderYielded=="function"&&xt.markRenderYielded()}function R$(){xt!==null&&typeof xt.markRenderStopped=="function"&&xt.markRenderStopped()}function Eue(d){xt!==null&&typeof xt.markRenderScheduled=="function"&&xt.markRenderScheduled(d)}function Iue(d,h){xt!==null&&typeof xt.markForceUpdateScheduled=="function"&&xt.markForceUpdateScheduled(d,h)}function s2(d,h){xt!==null&&typeof xt.markStateUpdateScheduled=="function"&&xt.markStateUpdateScheduled(d,h)}var ei=0,Zi=1,qn=2,to=8,uu=16,M$=Math.clz32?Math.clz32:Rue,Tue=Math.log,Nue=Math.LN2;function Rue(d){var h=d>>>0;return h===0?32:31-(Tue(h)/Nue|0)|0}var o2=31,Qe=0,sr=0,vi=1,Fb=2,Fh=4,s_=8,hu=16,Hw=32,Bb=4194240,zw=64,r2=128,a2=256,l2=512,c2=1024,d2=2048,u2=4096,h2=8192,f2=16384,g2=32768,p2=65536,m2=131072,_2=262144,v2=524288,b2=1048576,C2=2097152,Yk=130023424,Wb=4194304,w2=8388608,y2=16777216,S2=33554432,L2=67108864,A$=Wb,Uw=134217728,P$=268435455,$w=268435456,o_=536870912,Fl=1073741824;function Mue(d){{if(d&vi)return"Sync";if(d&Fb)return"InputContinuousHydration";if(d&Fh)return"InputContinuous";if(d&s_)return"DefaultHydration";if(d&hu)return"Default";if(d&Hw)return"TransitionHydration";if(d&Bb)return"Transition";if(d&Yk)return"Retry";if(d&Uw)return"SelectiveHydration";if(d&$w)return"IdleHydration";if(d&o_)return"Idle";if(d&Fl)return"Offscreen"}}var Ls=-1,Zk=zw,Qk=Wb;function jw(d){switch(r_(d)){case vi:return vi;case Fb:return Fb;case Fh:return Fh;case s_:return s_;case hu:return hu;case Hw:return Hw;case zw:case r2:case a2:case l2:case c2:case d2:case u2:case h2:case f2:case g2:case p2:case m2:case _2:case v2:case b2:case C2:return d&Bb;case Wb:case w2:case y2:case S2:case L2:return d&Yk;case Uw:return Uw;case $w:return $w;case o_:return o_;case Fl:return Fl;default:return r("Should have found matching lanes. This is a bug in React."),d}}function Xk(d,h){var m=d.pendingLanes;if(m===Qe)return Qe;var C=Qe,w=d.suspendedLanes,k=d.pingedLanes,I=m&P$;if(I!==Qe){var R=I&~w;if(R!==Qe)C=jw(R);else{var O=I&k;O!==Qe&&(C=jw(O))}}else{var U=m&~w;U!==Qe?C=jw(U):k!==Qe&&(C=jw(k))}if(C===Qe)return Qe;if(h!==Qe&&h!==C&&(h&w)===Qe){var G=r_(C),ce=r_(h);if(G>=ce||G===hu&&(ce&Bb)!==Qe)return h}(C&Fh)!==Qe&&(C|=m&hu);var le=d.entangledLanes;if(le!==Qe)for(var we=d.entanglements,De=C&le;De>0;){var We=a_(De),yt=1<<We;C|=we[We],De&=~yt}return C}function Aue(d,h){for(var m=d.eventTimes,C=Ls;h>0;){var w=a_(h),k=1<<w,I=m[w];I>C&&(C=I),h&=~k}return C}function Pue(d,h){switch(d){case vi:case Fb:case Fh:return h+250;case s_:case hu:case Hw:case zw:case r2:case a2:case l2:case c2:case d2:case u2:case h2:case f2:case g2:case p2:case m2:case _2:case v2:case b2:case C2:return h+5e3;case Wb:case w2:case y2:case S2:case L2:return Ls;case Uw:case $w:case o_:case Fl:return Ls;default:return r("Should have found matching lanes. This is a bug in React."),Ls}}function Oue(d,h){for(var m=d.pendingLanes,C=d.suspendedLanes,w=d.pingedLanes,k=d.expirationTimes,I=m;I>0;){var R=a_(I),O=1<<R,U=k[R];U===Ls?((O&C)===Qe||(O&w)!==Qe)&&(k[R]=Pue(O,h)):U<=h&&(d.expiredLanes|=O),I&=~O}}function Fue(d){return jw(d.pendingLanes)}function x2(d){var h=d.pendingLanes&~Fl;return h!==Qe?h:h&Fl?Fl:Qe}function Bue(d){return(d&vi)!==Qe}function D2(d){return(d&P$)!==Qe}function O$(d){return(d&Yk)===d}function Wue(d){var h=vi|Fh|hu;return(d&h)===Qe}function Vue(d){return(d&Bb)===d}function Jk(d,h){var m=Fb|Fh|s_|hu;return(h&m)!==Qe}function Hue(d,h){return(h&d.expiredLanes)!==Qe}function F$(d){return(d&Bb)!==Qe}function B$(){var d=Zk;return Zk<<=1,(Zk&Bb)===Qe&&(Zk=zw),d}function zue(){var d=Qk;return Qk<<=1,(Qk&Yk)===Qe&&(Qk=Wb),d}function r_(d){return d&-d}function Kw(d){return r_(d)}function a_(d){return 31-M$(d)}function k2(d){return a_(d)}function Bl(d,h){return(d&h)!==Qe}function Vb(d,h){return(d&h)===h}function Ai(d,h){return d|h}function eE(d,h){return d&~h}function W$(d,h){return d&h}function E$e(d){return d}function Uue(d,h){return d!==sr&&d<h?d:h}function E2(d){for(var h=[],m=0;m<o2;m++)h.push(d);return h}function qw(d,h,m){d.pendingLanes|=h,h!==o_&&(d.suspendedLanes=Qe,d.pingedLanes=Qe);var C=d.eventTimes,w=k2(h);C[w]=m}function $ue(d,h){d.suspendedLanes|=h,d.pingedLanes&=~h;for(var m=d.expirationTimes,C=h;C>0;){var w=a_(C),k=1<<w;m[w]=Ls,C&=~k}}function V$(d,h,m){d.pingedLanes|=d.suspendedLanes&h}function jue(d,h){var m=d.pendingLanes&~h;d.pendingLanes=h,d.suspendedLanes=Qe,d.pingedLanes=Qe,d.expiredLanes&=h,d.mutableReadLanes&=h,d.entangledLanes&=h;for(var C=d.entanglements,w=d.eventTimes,k=d.expirationTimes,I=m;I>0;){var R=a_(I),O=1<<R;C[R]=Qe,w[R]=Ls,k[R]=Ls,I&=~O}}function I2(d,h){for(var m=d.entangledLanes|=h,C=d.entanglements,w=m;w;){var k=a_(w),I=1<<k;I&h|C[k]&h&&(C[k]|=h),w&=~I}}function Kue(d,h){var m=r_(h),C;switch(m){case Fh:C=Fb;break;case hu:C=s_;break;case zw:case r2:case a2:case l2:case c2:case d2:case u2:case h2:case f2:case g2:case p2:case m2:case _2:case v2:case b2:case C2:case Wb:case w2:case y2:case S2:case L2:C=Hw;break;case o_:C=$w;break;default:C=sr;break}return(C&(d.suspendedLanes|h))!==sr?sr:C}function H$(d,h,m){if(ed)for(var C=d.pendingUpdatersLaneMap;m>0;){var w=k2(m),k=1<<w,I=C[w];I.add(h),m&=~k}}function z$(d,h){if(ed)for(var m=d.pendingUpdatersLaneMap,C=d.memoizedUpdaters;h>0;){var w=k2(h),k=1<<w,I=m[w];I.size>0&&(I.forEach(function(R){var O=R.alternate;(O===null||!C.has(O))&&C.add(R)}),I.clear()),h&=~k}}function U$(d,h){return null}var Wl=vi,Bh=Fh,Wh=hu,tE=o_,Gw=sr;function td(){return Gw}function or(d){Gw=d}function que(d,h){var m=Gw;try{return Gw=d,h()}finally{Gw=m}}function Gue(d,h){return d!==0&&d<h?d:h}function Yue(d,h){return d>h?d:h}function T2(d,h){return d!==0&&d<h}function $$(d){var h=r_(d);return T2(Wl,h)?T2(Bh,h)?D2(h)?Wh:tE:Bh:Wl}function iE(d){var h=d.current.memoizedState;return h.isDehydrated}var j$;function Zue(d){j$=d}function Que(d){j$(d)}var N2;function Xue(d){N2=d}var K$;function Jue(d){K$=d}var q$;function ehe(d){q$=d}var G$;function the(d){G$=d}var R2=!1,nE=[],Ng=null,Rg=null,Mg=null,Yw=new Map,Zw=new Map,Ag=[],ihe=["mousedown","mouseup","touchcancel","touchend","touchstart","auxclick","dblclick","pointercancel","pointerdown","pointerup","dragend","dragstart","drop","compositionend","compositionstart","keydown","keypress","keyup","input","textInput","copy","cut","paste","click","change","contextmenu","reset","submit"];function nhe(d){return ihe.indexOf(d)>-1}function she(d,h,m,C,w){return{blockedOn:d,domEventName:h,eventSystemFlags:m,nativeEvent:w,targetContainers:[C]}}function Y$(d,h){switch(d){case"focusin":case"focusout":Ng=null;break;case"dragenter":case"dragleave":Rg=null;break;case"mouseover":case"mouseout":Mg=null;break;case"pointerover":case"pointerout":{var m=h.pointerId;Yw.delete(m);break}case"gotpointercapture":case"lostpointercapture":{var C=h.pointerId;Zw.delete(C);break}}}function Qw(d,h,m,C,w,k){if(d===null||d.nativeEvent!==k){var I=she(h,m,C,w,k);if(h!==null){var R=Fg(h);R!==null&&N2(R)}return I}d.eventSystemFlags|=C;var O=d.targetContainers;return w!==null&&O.indexOf(w)===-1&&O.push(w),d}function ohe(d,h,m,C,w){switch(h){case"focusin":{var k=w;return Ng=Qw(Ng,d,h,m,C,k),!0}case"dragenter":{var I=w;return Rg=Qw(Rg,d,h,m,C,I),!0}case"mouseover":{var R=w;return Mg=Qw(Mg,d,h,m,C,R),!0}case"pointerover":{var O=w,U=O.pointerId;return Yw.set(U,Qw(Yw.get(U)||null,d,h,m,C,O)),!0}case"gotpointercapture":{var G=w,ce=G.pointerId;return Zw.set(ce,Qw(Zw.get(ce)||null,d,h,m,C,G)),!0}}return!1}function Z$(d){var h=d_(d.target);if(h!==null){var m=i_(h);if(m!==null){var C=m.tag;if(C===E){var w=C$(m);if(w!==null){d.blockedOn=w,G$(d.priority,function(){K$(m)});return}}else if(C===f){var k=m.stateNode;if(iE(k)){d.blockedOn=w$(m);return}}}}d.blockedOn=null}function rhe(d){for(var h=q$(),m={blockedOn:null,target:d,priority:h},C=0;C<Ag.length&&T2(h,Ag[C].priority);C++);Ag.splice(C,0,m),C===0&&Z$(m)}function sE(d){if(d.blockedOn!==null)return!1;for(var h=d.targetContainers;h.length>0;){var m=h[0],C=P2(d.domEventName,d.eventSystemFlags,m,d.nativeEvent);if(C===null){var w=d.nativeEvent,k=new w.constructor(w.type,w);Rde(k),w.target.dispatchEvent(k),Mde()}else{var I=Fg(C);return I!==null&&N2(I),d.blockedOn=C,!1}h.shift()}return!0}function Q$(d,h,m){sE(d)&&m.delete(h)}function ahe(){R2=!1,Ng!==null&&sE(Ng)&&(Ng=null),Rg!==null&&sE(Rg)&&(Rg=null),Mg!==null&&sE(Mg)&&(Mg=null),Yw.forEach(Q$),Zw.forEach(Q$)}function Xw(d,h){d.blockedOn===h&&(d.blockedOn=null,R2||(R2=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ahe)))}function Jw(d){if(nE.length>0){Xw(nE[0],d);for(var h=1;h<nE.length;h++){var m=nE[h];m.blockedOn===d&&(m.blockedOn=null)}}Ng!==null&&Xw(Ng,d),Rg!==null&&Xw(Rg,d),Mg!==null&&Xw(Mg,d);var C=function(R){return Xw(R,d)};Yw.forEach(C),Zw.forEach(C);for(var w=0;w<Ag.length;w++){var k=Ag[w];k.blockedOn===d&&(k.blockedOn=null)}for(;Ag.length>0;){var I=Ag[0];if(I.blockedOn!==null)break;Z$(I),I.blockedOn===null&&Ag.shift()}}var Hb=t.ReactCurrentBatchConfig,M2=!0;function X$(d){M2=!!d}function lhe(){return M2}function che(d,h,m){var C=J$(h),w;switch(C){case Wl:w=dhe;break;case Bh:w=uhe;break;case Wh:default:w=A2;break}return w.bind(null,h,m,d)}function dhe(d,h,m,C){var w=td(),k=Hb.transition;Hb.transition=null;try{or(Wl),A2(d,h,m,C)}finally{or(w),Hb.transition=k}}function uhe(d,h,m,C){var w=td(),k=Hb.transition;Hb.transition=null;try{or(Bh),A2(d,h,m,C)}finally{or(w),Hb.transition=k}}function A2(d,h,m,C){M2&&hhe(d,h,m,C)}function hhe(d,h,m,C){var w=P2(d,h,m,C);if(w===null){Y2(d,h,C,oE,m),Y$(d,C);return}if(ohe(w,d,h,m,C)){C.stopPropagation();return}if(Y$(d,C),h&Mw&&nhe(d)){for(;w!==null;){var k=Fg(w);k!==null&&Que(k);var I=P2(d,h,m,C);if(I===null&&Y2(d,h,C,oE,m),I===w)break;w=I}w!==null&&C.stopPropagation();return}Y2(d,h,C,null,m)}var oE=null;function P2(d,h,m,C){oE=null;var w=zO(C),k=d_(w);if(k!==null){var I=i_(k);if(I===null)k=null;else{var R=I.tag;if(R===E){var O=C$(I);if(O!==null)return O;k=null}else if(R===f){var U=I.stateNode;if(iE(U))return w$(I);k=null}else I!==k&&(k=null)}}return oE=k,null}function J$(d){switch(d){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return Wl;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return Bh;case"message":{var h=nue();switch(h){case Gk:return Wl;case i2:return Bh;case n_:case sue:return Wh;case n2:return tE;default:return Wh}}default:return Wh}}function fhe(d,h,m){return d.addEventListener(h,m,!1),m}function ghe(d,h,m){return d.addEventListener(h,m,!0),m}function phe(d,h,m,C){return d.addEventListener(h,m,{capture:!0,passive:C}),m}function mhe(d,h,m,C){return d.addEventListener(h,m,{passive:C}),m}var ey=null,O2=null,ty=null;function _he(d){return ey=d,O2=tj(),!0}function vhe(){ey=null,O2=null,ty=null}function ej(){if(ty)return ty;var d,h=O2,m=h.length,C,w=tj(),k=w.length;for(d=0;d<m&&h[d]===w[d];d++);var I=m-d;for(C=1;C<=I&&h[m-C]===w[k-C];C++);var R=C>1?1-C:void 0;return ty=w.slice(d,R),ty}function tj(){return"value"in ey?ey.value:ey.textContent}function rE(d){var h,m=d.keyCode;return"charCode"in d?(h=d.charCode,h===0&&m===13&&(h=13)):h=m,h===10&&(h=13),h>=32||h===13?h:0}function aE(){return!0}function ij(){return!1}function Vl(d){function h(m,C,w,k,I){this._reactName=m,this._targetInst=w,this.type=C,this.nativeEvent=k,this.target=I,this.currentTarget=null;for(var R in d)if(d.hasOwnProperty(R)){var O=d[R];O?this[R]=O(k):this[R]=k[R]}var U=k.defaultPrevented!=null?k.defaultPrevented:k.returnValue===!1;return U?this.isDefaultPrevented=aE:this.isDefaultPrevented=ij,this.isPropagationStopped=ij,this}return Ki(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=aE)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=aE)},persist:function(){},isPersistent:aE}),h}var zb={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(d){return d.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},F2=Vl(zb),iy=Ki({},zb,{view:0,detail:0}),bhe=Vl(iy),B2,W2,ny;function Che(d){d!==ny&&(ny&&d.type==="mousemove"?(B2=d.screenX-ny.screenX,W2=d.screenY-ny.screenY):(B2=0,W2=0),ny=d)}var lE=Ki({},iy,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:H2,button:0,buttons:0,relatedTarget:function(d){return d.relatedTarget===void 0?d.fromElement===d.srcElement?d.toElement:d.fromElement:d.relatedTarget},movementX:function(d){return"movementX"in d?d.movementX:(Che(d),B2)},movementY:function(d){return"movementY"in d?d.movementY:W2}}),nj=Vl(lE),whe=Ki({},lE,{dataTransfer:0}),yhe=Vl(whe),She=Ki({},iy,{relatedTarget:0}),V2=Vl(She),Lhe=Ki({},zb,{animationName:0,elapsedTime:0,pseudoElement:0}),xhe=Vl(Lhe),Dhe=Ki({},zb,{clipboardData:function(d){return"clipboardData"in d?d.clipboardData:window.clipboardData}}),khe=Vl(Dhe),Ehe=Ki({},zb,{data:0}),sj=Vl(Ehe),Ihe=sj,The={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nhe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};function Rhe(d){if(d.key){var h=The[d.key]||d.key;if(h!=="Unidentified")return h}if(d.type==="keypress"){var m=rE(d);return m===13?"Enter":String.fromCharCode(m)}return d.type==="keydown"||d.type==="keyup"?Nhe[d.keyCode]||"Unidentified":""}var Mhe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ahe(d){var h=this,m=h.nativeEvent;if(m.getModifierState)return m.getModifierState(d);var C=Mhe[d];return C?!!m[C]:!1}function H2(d){return Ahe}var Phe=Ki({},iy,{key:Rhe,code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:H2,charCode:function(d){return d.type==="keypress"?rE(d):0},keyCode:function(d){return d.type==="keydown"||d.type==="keyup"?d.keyCode:0},which:function(d){return d.type==="keypress"?rE(d):d.type==="keydown"||d.type==="keyup"?d.keyCode:0}}),Ohe=Vl(Phe),Fhe=Ki({},lE,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),oj=Vl(Fhe),Bhe=Ki({},iy,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:H2}),Whe=Vl(Bhe),Vhe=Ki({},zb,{propertyName:0,elapsedTime:0,pseudoElement:0}),Hhe=Vl(Vhe),zhe=Ki({},lE,{deltaX:function(d){return"deltaX"in d?d.deltaX:"wheelDeltaX"in d?-d.wheelDeltaX:0},deltaY:function(d){return"deltaY"in d?d.deltaY:"wheelDeltaY"in d?-d.wheelDeltaY:"wheelDelta"in d?-d.wheelDelta:0},deltaZ:0,deltaMode:0}),Uhe=Vl(zhe),$he=[9,13,27,32],rj=229,z2=Dn&&"CompositionEvent"in window,sy=null;Dn&&"documentMode"in document&&(sy=document.documentMode);var jhe=Dn&&"TextEvent"in window&&!sy,aj=Dn&&(!z2||sy&&sy>8&&sy<=11),lj=32,cj=String.fromCharCode(lj);function Khe(){Ct("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ct("onCompositionEnd",["compositionend","focusout","keydown","keypress","keyup","mousedown"]),Ct("onCompositionStart",["compositionstart","focusout","keydown","keypress","keyup","mousedown"]),Ct("onCompositionUpdate",["compositionupdate","focusout","keydown","keypress","keyup","mousedown"])}var dj=!1;function qhe(d){return(d.ctrlKey||d.altKey||d.metaKey)&&!(d.ctrlKey&&d.altKey)}function Ghe(d){switch(d){case"compositionstart":return"onCompositionStart";case"compositionend":return"onCompositionEnd";case"compositionupdate":return"onCompositionUpdate"}}function Yhe(d,h){return d==="keydown"&&h.keyCode===rj}function uj(d,h){switch(d){case"keyup":return $he.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==rj;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hj(d){var h=d.detail;return typeof h=="object"&&"data"in h?h.data:null}function fj(d){return d.locale==="ko"}var Ub=!1;function Zhe(d,h,m,C,w){var k,I;if(z2?k=Ghe(h):Ub?uj(h,C)&&(k="onCompositionEnd"):Yhe(h,C)&&(k="onCompositionStart"),!k)return null;aj&&!fj(C)&&(!Ub&&k==="onCompositionStart"?Ub=_he(w):k==="onCompositionEnd"&&Ub&&(I=ej()));var R=fE(m,k);if(R.length>0){var O=new sj(k,h,null,C,w);if(d.push({event:O,listeners:R}),I)O.data=I;else{var U=hj(C);U!==null&&(O.data=U)}}}function Qhe(d,h){switch(d){case"compositionend":return hj(h);case"keypress":var m=h.which;return m!==lj?null:(dj=!0,cj);case"textInput":var C=h.data;return C===cj&&dj?null:C;default:return null}}function Xhe(d,h){if(Ub){if(d==="compositionend"||!z2&&uj(d,h)){var m=ej();return vhe(),Ub=!1,m}return null}switch(d){case"paste":return null;case"keypress":if(!qhe(h)){if(h.char&&h.char.length>1)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return aj&&!fj(h)?null:h.data;default:return null}}function Jhe(d,h,m,C,w){var k;if(jhe?k=Qhe(h,C):k=Xhe(h,C),!k)return null;var I=fE(m,"onBeforeInput");if(I.length>0){var R=new Ihe("onBeforeInput","beforeinput",null,C,w);d.push({event:R,listeners:I}),R.data=k}}function efe(d,h,m,C,w,k,I){Zhe(d,h,m,C,w),Jhe(d,h,m,C,w)}var tfe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gj(d){var h=d&&d.nodeName&&d.nodeName.toLowerCase();return h==="input"?!!tfe[d.type]:h==="textarea"}/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function ife(d){if(!Dn)return!1;var h="on"+d,m=h in document;if(!m){var C=document.createElement("div");C.setAttribute(h,"return;"),m=typeof C[h]=="function"}return m}function nfe(){Ct("onChange",["change","click","focusin","focusout","input","keydown","keyup","selectionchange"])}function pj(d,h,m,C){h$(C);var w=fE(h,"onChange");if(w.length>0){var k=new F2("onChange","change",null,m,C);d.push({event:k,listeners:w})}}var oy=null,ry=null;function sfe(d){var h=d.nodeName&&d.nodeName.toLowerCase();return h==="select"||h==="input"&&d.type==="file"}function ofe(d){var h=[];pj(h,ry,d,zO(d)),m$(rfe,h)}function rfe(d){Mj(d,0)}function cE(d){var h=Yb(d);if(Lb(h))return d}function afe(d,h){if(d==="change")return h}var mj=!1;Dn&&(mj=ife("input")&&(!document.documentMode||document.documentMode>9));function lfe(d,h){oy=d,ry=h,oy.attachEvent("onpropertychange",vj)}function _j(){oy&&(oy.detachEvent("onpropertychange",vj),oy=null,ry=null)}function vj(d){d.propertyName==="value"&&cE(ry)&&ofe(d)}function cfe(d,h,m){d==="focusin"?(_j(),lfe(h,m)):d==="focusout"&&_j()}function dfe(d,h){if(d==="selectionchange"||d==="keyup"||d==="keydown")return cE(ry)}function ufe(d){var h=d.nodeName;return h&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")}function hfe(d,h){if(d==="click")return cE(h)}function ffe(d,h){if(d==="input"||d==="change")return cE(h)}function gfe(d){var h=d._wrapperState;!h||!h.controlled||d.type!=="number"||_i(d,"number",d.value)}function pfe(d,h,m,C,w,k,I){var R=m?Yb(m):window,O,U;if(sfe(R)?O=afe:gj(R)?mj?O=ffe:(O=dfe,U=cfe):ufe(R)&&(O=hfe),O){var G=O(h,m);if(G){pj(d,G,C,w);return}}U&&U(h,R,m),h==="focusout"&&gfe(R)}function mfe(){Ss("onMouseEnter",["mouseout","mouseover"]),Ss("onMouseLeave",["mouseout","mouseover"]),Ss("onPointerEnter",["pointerout","pointerover"]),Ss("onPointerLeave",["pointerout","pointerover"])}function _fe(d,h,m,C,w,k,I){var R=h==="mouseover"||h==="pointerover",O=h==="mouseout"||h==="pointerout";if(R&&!Ade(C)){var U=C.relatedTarget||C.fromElement;if(U&&(d_(U)||wy(U)))return}if(!(!O&&!R)){var G;if(w.window===w)G=w;else{var ce=w.ownerDocument;ce?G=ce.defaultView||ce.parentWindow:G=window}var le,we;if(O){var De=C.relatedTarget||C.toElement;if(le=m,we=De?d_(De):null,we!==null){var We=i_(we);(we!==We||we.tag!==p&&we.tag!==_)&&(we=null)}}else le=null,we=m;if(le!==we){var yt=nj,Gt="onMouseLeave",Ht="onMouseEnter",Xi="mouse";(h==="pointerout"||h==="pointerover")&&(yt=oj,Gt="onPointerLeave",Ht="onPointerEnter",Xi="pointer");var $i=le==null?G:Yb(le),me=we==null?G:Yb(we),Ve=new yt(Gt,Xi+"leave",le,C,w);Ve.target=$i,Ve.relatedTarget=me;var _e=null,tt=d_(w);if(tt===m){var Et=new yt(Ht,Xi+"enter",we,C,w);Et.target=me,Et.relatedTarget=$i,_e=Et}Hfe(d,Ve,_e,le,we)}}}function vfe(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var Hl=typeof Object.is=="function"?Object.is:vfe;function ay(d,h){if(Hl(d,h))return!0;if(typeof d!="object"||d===null||typeof h!="object"||h===null)return!1;var m=Object.keys(d),C=Object.keys(h);if(m.length!==C.length)return!1;for(var w=0;w<m.length;w++){var k=m[w];if(!Wn.call(h,k)||!Hl(d[k],h[k]))return!1}return!0}function bj(d){for(;d&&d.firstChild;)d=d.firstChild;return d}function bfe(d){for(;d;){if(d.nextSibling)return d.nextSibling;d=d.parentNode}}function Cj(d,h){for(var m=bj(d),C=0,w=0;m;){if(m.nodeType===Nh){if(w=C+m.textContent.length,C<=h&&w>=h)return{node:m,offset:h-C};C=w}m=bj(bfe(m))}}function Cfe(d){var h=d.ownerDocument,m=h&&h.defaultView||window,C=m.getSelection&&m.getSelection();if(!C||C.rangeCount===0)return null;var w=C.anchorNode,k=C.anchorOffset,I=C.focusNode,R=C.focusOffset;try{w.nodeType,I.nodeType}catch{return null}return wfe(d,w,k,I,R)}function wfe(d,h,m,C,w){var k=0,I=-1,R=-1,O=0,U=0,G=d,ce=null;e:for(;;){for(var le=null;G===h&&(m===0||G.nodeType===Nh)&&(I=k+m),G===C&&(w===0||G.nodeType===Nh)&&(R=k+w),G.nodeType===Nh&&(k+=G.nodeValue.length),(le=G.firstChild)!==null;)ce=G,G=le;for(;;){if(G===d)break e;if(ce===h&&++O===m&&(I=k),ce===C&&++U===w&&(R=k),(le=G.nextSibling)!==null)break;G=ce,ce=G.parentNode}G=le}return I===-1||R===-1?null:{start:I,end:R}}function yfe(d,h){var m=d.ownerDocument||document,C=m&&m.defaultView||window;if(C.getSelection){var w=C.getSelection(),k=d.textContent.length,I=Math.min(h.start,k),R=h.end===void 0?I:Math.min(h.end,k);if(!w.extend&&I>R){var O=R;R=I,I=O}var U=Cj(d,I),G=Cj(d,R);if(U&&G){if(w.rangeCount===1&&w.anchorNode===U.node&&w.anchorOffset===U.offset&&w.focusNode===G.node&&w.focusOffset===G.offset)return;var ce=m.createRange();ce.setStart(U.node,U.offset),w.removeAllRanges(),I>R?(w.addRange(ce),w.extend(G.node,G.offset)):(ce.setEnd(G.node,G.offset),w.addRange(ce))}}}function wj(d){return d&&d.nodeType===Nh}function yj(d,h){return!d||!h?!1:d===h?!0:wj(d)?!1:wj(h)?yj(d,h.parentNode):"contains"in d?d.contains(h):d.compareDocumentPosition?!!(d.compareDocumentPosition(h)&16):!1}function Sfe(d){return d&&d.ownerDocument&&yj(d.ownerDocument.documentElement,d)}function Lfe(d){try{return typeof d.contentWindow.location.href=="string"}catch{return!1}}function Sj(){for(var d=window,h=Eg();h instanceof d.HTMLIFrameElement;){if(Lfe(h))d=h.contentWindow;else return h;h=Eg(d.document)}return h}function U2(d){var h=d&&d.nodeName&&d.nodeName.toLowerCase();return h&&(h==="input"&&(d.type==="text"||d.type==="search"||d.type==="tel"||d.type==="url"||d.type==="password")||h==="textarea"||d.contentEditable==="true")}function xfe(){var d=Sj();return{focusedElem:d,selectionRange:U2(d)?kfe(d):null}}function Dfe(d){var h=Sj(),m=d.focusedElem,C=d.selectionRange;if(h!==m&&Sfe(m)){C!==null&&U2(m)&&Efe(m,C);for(var w=[],k=m;k=k.parentNode;)k.nodeType===Ja&&w.push({element:k,left:k.scrollLeft,top:k.scrollTop});typeof m.focus=="function"&&m.focus();for(var I=0;I<w.length;I++){var R=w[I];R.element.scrollLeft=R.left,R.element.scrollTop=R.top}}}function kfe(d){var h;return"selectionStart"in d?h={start:d.selectionStart,end:d.selectionEnd}:h=Cfe(d),h||{start:0,end:0}}function Efe(d,h){var m=h.start,C=h.end;C===void 0&&(C=m),"selectionStart"in d?(d.selectionStart=m,d.selectionEnd=Math.min(C,d.value.length)):yfe(d,h)}var Ife=Dn&&"documentMode"in document&&document.documentMode<=11;function Tfe(){Ct("onSelect",["focusout","contextmenu","dragend","focusin","keydown","keyup","mousedown","mouseup","selectionchange"])}var $b=null,$2=null,ly=null,j2=!1;function Nfe(d){if("selectionStart"in d&&U2(d))return{start:d.selectionStart,end:d.selectionEnd};var h=d.ownerDocument&&d.ownerDocument.defaultView||window,m=h.getSelection();return{anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}}function Rfe(d){return d.window===d?d.document:d.nodeType===Rh?d:d.ownerDocument}function Lj(d,h,m){var C=Rfe(m);if(!(j2||$b==null||$b!==Eg(C))){var w=Nfe($b);if(!ly||!ay(ly,w)){ly=w;var k=fE($2,"onSelect");if(k.length>0){var I=new F2("onSelect","select",null,h,m);d.push({event:I,listeners:k}),I.target=$b}}}}function Mfe(d,h,m,C,w,k,I){var R=m?Yb(m):window;switch(h){case"focusin":(gj(R)||R.contentEditable==="true")&&($b=R,$2=m,ly=null);break;case"focusout":$b=null,$2=null,ly=null;break;case"mousedown":j2=!0;break;case"contextmenu":case"mouseup":case"dragend":j2=!1,Lj(d,C,w);break;case"selectionchange":if(Ife)break;case"keydown":case"keyup":Lj(d,C,w)}}function dE(d,h){var m={};return m[d.toLowerCase()]=h.toLowerCase(),m["Webkit"+d]="webkit"+h,m["Moz"+d]="moz"+h,m}var jb={animationend:dE("Animation","AnimationEnd"),animationiteration:dE("Animation","AnimationIteration"),animationstart:dE("Animation","AnimationStart"),transitionend:dE("Transition","TransitionEnd")},K2={},xj={};Dn&&(xj=document.createElement("div").style,"AnimationEvent"in window||(delete jb.animationend.animation,delete jb.animationiteration.animation,delete jb.animationstart.animation),"TransitionEvent"in window||delete jb.transitionend.transition);function uE(d){if(K2[d])return K2[d];if(!jb[d])return d;var h=jb[d];for(var m in h)if(h.hasOwnProperty(m)&&m in xj)return K2[d]=h[m];return d}var Dj=uE("animationend"),kj=uE("animationiteration"),Ej=uE("animationstart"),Ij=uE("transitionend"),Tj=new Map,Nj=["abort","auxClick","cancel","canPlay","canPlayThrough","click","close","contextMenu","copy","cut","drag","dragEnd","dragEnter","dragExit","dragLeave","dragOver","dragStart","drop","durationChange","emptied","encrypted","ended","error","gotPointerCapture","input","invalid","keyDown","keyPress","keyUp","load","loadedData","loadedMetadata","loadStart","lostPointerCapture","mouseDown","mouseMove","mouseOut","mouseOver","mouseUp","paste","pause","play","playing","pointerCancel","pointerDown","pointerMove","pointerOut","pointerOver","pointerUp","progress","rateChange","reset","resize","seeked","seeking","stalled","submit","suspend","timeUpdate","touchCancel","touchEnd","touchStart","volumeChange","scroll","toggle","touchMove","waiting","wheel"];function Pg(d,h){Tj.set(d,h),Ct(h,[d])}function Afe(){for(var d=0;d<Nj.length;d++){var h=Nj[d],m=h.toLowerCase(),C=h[0].toUpperCase()+h.slice(1);Pg(m,"on"+C)}Pg(Dj,"onAnimationEnd"),Pg(kj,"onAnimationIteration"),Pg(Ej,"onAnimationStart"),Pg("dblclick","onDoubleClick"),Pg("focusin","onFocus"),Pg("focusout","onBlur"),Pg(Ij,"onTransitionEnd")}function Pfe(d,h,m,C,w,k,I){var R=Tj.get(h);if(R!==void 0){var O=F2,U=h;switch(h){case"keypress":if(rE(C)===0)return;case"keydown":case"keyup":O=Ohe;break;case"focusin":U="focus",O=V2;break;case"focusout":U="blur",O=V2;break;case"beforeblur":case"afterblur":O=V2;break;case"click":if(C.button===2)return;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":O=nj;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":O=yhe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":O=Whe;break;case Dj:case kj:case Ej:O=xhe;break;case Ij:O=Hhe;break;case"scroll":O=bhe;break;case"wheel":O=Uhe;break;case"copy":case"cut":case"paste":O=khe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":O=oj;break}var G=(k&Mw)!==0;{var ce=!G&&h==="scroll",le=Wfe(m,R,C.type,G,ce);if(le.length>0){var we=new O(R,U,null,C,w);d.push({event:we,listeners:le})}}}}Afe(),mfe(),nfe(),Tfe(),Khe();function Ofe(d,h,m,C,w,k,I){Pfe(d,h,m,C,w,k);var R=(k&Nde)===0;R&&(_fe(d,h,m,C,w),pfe(d,h,m,C,w),Mfe(d,h,m,C,w),efe(d,h,m,C,w))}var cy=["abort","canplay","canplaythrough","durationchange","emptied","encrypted","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","resize","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"],q2=new Set(["cancel","close","invalid","load","scroll","toggle"].concat(cy));function Rj(d,h,m){var C=d.type||"unknown-event";d.currentTarget=m,Ude(C,h,void 0,d),d.currentTarget=null}function Ffe(d,h,m){var C;if(m)for(var w=h.length-1;w>=0;w--){var k=h[w],I=k.instance,R=k.currentTarget,O=k.listener;if(I!==C&&d.isPropagationStopped())return;Rj(d,O,R),C=I}else for(var U=0;U<h.length;U++){var G=h[U],ce=G.instance,le=G.currentTarget,we=G.listener;if(ce!==C&&d.isPropagationStopped())return;Rj(d,we,le),C=ce}}function Mj(d,h){for(var m=(h&Mw)!==0,C=0;C<d.length;C++){var w=d[C],k=w.event,I=w.listeners;Ffe(k,I,m)}$de()}function Bfe(d,h,m,C,w){var k=zO(m),I=[];Ofe(I,d,C,m,k,h),Mj(I,h)}function Ns(d,h){q2.has(d)||r('Did not expect a listenToNonDelegatedEvent() call for "%s". This is a bug in React. Please file an issue.',d);var m=!1,C=gpe(h),w=zfe(d);C.has(w)||(Aj(h,d,HO,m),C.add(w))}function G2(d,h,m){q2.has(d)&&!h&&r('Did not expect a listenToNativeEvent() call for "%s" in the bubble phase. This is a bug in React. Please file an issue.',d);var C=0;h&&(C|=Mw),Aj(m,d,C,h)}var hE="_reactListening"+Math.random().toString(36).slice(2);function dy(d){if(!d[hE]){d[hE]=!0,nn.forEach(function(m){m!=="selectionchange"&&(q2.has(m)||G2(m,!1,d),G2(m,!0,d))});var h=d.nodeType===Rh?d:d.ownerDocument;h!==null&&(h[hE]||(h[hE]=!0,G2("selectionchange",!1,h)))}}function Aj(d,h,m,C,w){var k=che(d,h,m),I=void 0;jO&&(h==="touchstart"||h==="touchmove"||h==="wheel")&&(I=!0),d=d,C?I!==void 0?phe(d,h,k,I):ghe(d,h,k):I!==void 0?mhe(d,h,k,I):fhe(d,h,k)}function Pj(d,h){return d===h||d.nodeType===yo&&d.parentNode===h}function Y2(d,h,m,C,w){var k=C;if(!(h&d$)&&!(h&HO)){var I=w;if(C!==null){var R=C;e:for(;;){if(R===null)return;var O=R.tag;if(O===f||O===g){var U=R.stateNode.containerInfo;if(Pj(U,I))break;if(O===g)for(var G=R.return;G!==null;){var ce=G.tag;if(ce===f||ce===g){var le=G.stateNode.containerInfo;if(Pj(le,I))return}G=G.return}for(;U!==null;){var we=d_(U);if(we===null)return;var De=we.tag;if(De===p||De===_){R=k=we;continue e}U=U.parentNode}}R=R.return}}}m$(function(){return Bfe(d,h,m,k)})}function uy(d,h,m){return{instance:d,listener:h,currentTarget:m}}function Wfe(d,h,m,C,w,k){for(var I=h!==null?h+"Capture":null,R=C?I:h,O=[],U=d,G=null;U!==null;){var ce=U,le=ce.stateNode,we=ce.tag;if(we===p&&le!==null&&(G=le,R!==null)){var De=Pw(U,R);De!=null&&O.push(uy(U,De,G))}if(w)break;U=U.return}return O}function fE(d,h){for(var m=h+"Capture",C=[],w=d;w!==null;){var k=w,I=k.stateNode,R=k.tag;if(R===p&&I!==null){var O=I,U=Pw(w,m);U!=null&&C.unshift(uy(w,U,O));var G=Pw(w,h);G!=null&&C.push(uy(w,G,O))}w=w.return}return C}function Kb(d){if(d===null)return null;do d=d.return;while(d&&d.tag!==p);return d||null}function Vfe(d,h){for(var m=d,C=h,w=0,k=m;k;k=Kb(k))w++;for(var I=0,R=C;R;R=Kb(R))I++;for(;w-I>0;)m=Kb(m),w--;for(;I-w>0;)C=Kb(C),I--;for(var O=w;O--;){if(m===C||C!==null&&m===C.alternate)return m;m=Kb(m),C=Kb(C)}return null}function Oj(d,h,m,C,w){for(var k=h._reactName,I=[],R=m;R!==null&&R!==C;){var O=R,U=O.alternate,G=O.stateNode,ce=O.tag;if(U!==null&&U===C)break;if(ce===p&&G!==null){var le=G;if(w){var we=Pw(R,k);we!=null&&I.unshift(uy(R,we,le))}else if(!w){var De=Pw(R,k);De!=null&&I.push(uy(R,De,le))}}R=R.return}I.length!==0&&d.push({event:h,listeners:I})}function Hfe(d,h,m,C,w){var k=C&&w?Vfe(C,w):null;C!==null&&Oj(d,h,C,k,!1),w!==null&&m!==null&&Oj(d,m,w,k,!0)}function zfe(d,h){return d+"__bubble"}var el=!1,hy="dangerouslySetInnerHTML",gE="suppressContentEditableWarning",Og="suppressHydrationWarning",Fj="autoFocus",l_="children",c_="style",pE="__html",Z2,mE,fy,Bj,_E,Wj,Vj;Z2={dialog:!0,webview:!0},mE=function(d,h){Lde(d,h),xde(d,h),Tde(d,h,{registrationNameDependencies:un,possibleRegistrationNames:sn})},Wj=Dn&&!document.documentMode,fy=function(d,h,m){if(!el){var C=vE(m),w=vE(h);w!==C&&(el=!0,r("Prop `%s` did not match. Server: %s Client: %s",d,JSON.stringify(w),JSON.stringify(C)))}},Bj=function(d){if(!el){el=!0;var h=[];d.forEach(function(m){h.push(m)}),r("Extra attributes from the server: %s",h)}},_E=function(d,h){h===!1?r("Expected `%s` listener to be a function, instead got `false`.\n\nIf you used to conditionally omit it with %s={condition && value}, pass %s={condition ? value : undefined} instead.",d,d,d):r("Expected `%s` listener to be a function, instead got a value of `%s` type.",d,typeof h)},Vj=function(d,h){var m=d.namespaceURI===Th?d.ownerDocument.createElement(d.tagName):d.ownerDocument.createElementNS(d.namespaceURI,d.tagName);return m.innerHTML=h,m.innerHTML};var Ufe=/\r\n?/g,$fe=/\u0000|\uFFFD/g;function vE(d){ae(d);var h=typeof d=="string"?d:""+d;return h.replace(Ufe,`
`).replace($fe,"")}function bE(d,h,m,C){var w=vE(h),k=vE(d);if(k!==w&&(C&&(el||(el=!0,r('Text content did not match. Server: "%s" Client: "%s"',k,w))),m&&Ne))throw new Error("Text content does not match server-rendered HTML.")}function Hj(d){return d.nodeType===Rh?d:d.ownerDocument}function jfe(){}function CE(d){d.onclick=jfe}function Kfe(d,h,m,C,w){for(var k in C)if(C.hasOwnProperty(k)){var I=C[k];if(k===c_)I&&Object.freeze(I),s$(h,I);else if(k===hy){var R=I?I[pE]:void 0;R!=null&&JU(h,R)}else if(k===l_)if(typeof I=="string"){var O=d!=="textarea"||I!=="";O&&zk(h,I)}else typeof I=="number"&&zk(h,""+I);else k===gE||k===Og||k===Fj||(un.hasOwnProperty(k)?I!=null&&(typeof I!="function"&&_E(k,I),k==="onScroll"&&Ns("scroll",h)):I!=null&&xa(h,k,I,w))}}function qfe(d,h,m,C){for(var w=0;w<h.length;w+=2){var k=h[w],I=h[w+1];k===c_?s$(d,I):k===hy?JU(d,I):k===l_?zk(d,I):xa(d,k,I,C)}}function Gfe(d,h,m,C){var w,k=Hj(m),I,R=C;if(R===Th&&(R=PO(d)),R===Th){if(w=Qm(d,h),!w&&d!==d.toLowerCase()&&r("<%s /> is using incorrect casing. Use PascalCase for React components, or lowercase for HTML elements.",d),d==="script"){var O=k.createElement("div");O.innerHTML="<script><\/script>";var U=O.firstChild;I=O.removeChild(U)}else if(typeof h.is=="string")I=k.createElement(d,{is:h.is});else if(I=k.createElement(d),d==="select"){var G=I;h.multiple?G.multiple=!0:h.size&&(G.size=h.size)}}else I=k.createElementNS(R,d);return R===Th&&!w&&Object.prototype.toString.call(I)==="[object HTMLUnknownElement]"&&!Wn.call(Z2,d)&&(Z2[d]=!0,r("The tag <%s> is unrecognized in this browser. If you meant to render a React component, start its name with an uppercase letter.",d)),I}function Yfe(d,h){return Hj(h).createTextNode(d)}function Zfe(d,h,m,C){var w=Qm(h,m);mE(h,m);var k;switch(h){case"dialog":Ns("cancel",d),Ns("close",d),k=m;break;case"iframe":case"object":case"embed":Ns("load",d),k=m;break;case"video":case"audio":for(var I=0;I<cy.length;I++)Ns(cy[I],d);k=m;break;case"source":Ns("error",d),k=m;break;case"img":case"image":case"link":Ns("error",d),Ns("load",d),k=m;break;case"details":Ns("toggle",d),k=m;break;case"input":ie(d,m),k=B(d,m),Ns("invalid",d);break;case"option":_s(d,m),k=m;break;case"select":Nw(d,m),k=Tw(d,m),Ns("invalid",d);break;case"textarea":ZU(d,m),k=MO(d,m),Ns("invalid",d);break;default:k=m}switch(VO(h,k),Kfe(h,d,C,k,w),h){case"input":Eh(d),ut(d,m,!1);break;case"textarea":Eh(d),XU(d);break;case"option":Ts(d,m);break;case"select":RO(d,m);break;default:typeof k.onClick=="function"&&CE(d);break}}function Qfe(d,h,m,C,w){mE(h,C);var k=null,I,R;switch(h){case"input":I=B(d,m),R=B(d,C),k=[];break;case"select":I=Tw(d,m),R=Tw(d,C),k=[];break;case"textarea":I=MO(d,m),R=MO(d,C),k=[];break;default:I=m,R=C,typeof I.onClick!="function"&&typeof R.onClick=="function"&&CE(d);break}VO(h,R);var O,U,G=null;for(O in I)if(!(R.hasOwnProperty(O)||!I.hasOwnProperty(O)||I[O]==null))if(O===c_){var ce=I[O];for(U in ce)ce.hasOwnProperty(U)&&(G||(G={}),G[U]="")}else O===hy||O===l_||O===gE||O===Og||O===Fj||(un.hasOwnProperty(O)?k||(k=[]):(k=k||[]).push(O,null));for(O in R){var le=R[O],we=I!=null?I[O]:void 0;if(!(!R.hasOwnProperty(O)||le===we||le==null&&we==null))if(O===c_)if(le&&Object.freeze(le),we){for(U in we)we.hasOwnProperty(U)&&(!le||!le.hasOwnProperty(U))&&(G||(G={}),G[U]="");for(U in le)le.hasOwnProperty(U)&&we[U]!==le[U]&&(G||(G={}),G[U]=le[U])}else G||(k||(k=[]),k.push(O,G)),G=le;else if(O===hy){var De=le?le[pE]:void 0,We=we?we[pE]:void 0;De!=null&&We!==De&&(k=k||[]).push(O,De)}else O===l_?(typeof le=="string"||typeof le=="number")&&(k=k||[]).push(O,""+le):O===gE||O===Og||(un.hasOwnProperty(O)?(le!=null&&(typeof le!="function"&&_E(O,le),O==="onScroll"&&Ns("scroll",d)),!k&&we!==le&&(k=[])):(k=k||[]).push(O,le))}return G&&(mde(G,R[c_]),(k=k||[]).push(c_,G)),k}function Xfe(d,h,m,C,w){m==="input"&&w.type==="radio"&&w.name!=null&&xe(d,w);var k=Qm(m,C),I=Qm(m,w);switch(qfe(d,h,k,I),m){case"input":Oe(d,w);break;case"textarea":QU(d,w);break;case"select":qce(d,w);break}}function Jfe(d){{var h=d.toLowerCase();return Uk.hasOwnProperty(h)&&Uk[h]||null}}function ege(d,h,m,C,w,k,I){var R,O;switch(R=Qm(h,m),mE(h,m),h){case"dialog":Ns("cancel",d),Ns("close",d);break;case"iframe":case"object":case"embed":Ns("load",d);break;case"video":case"audio":for(var U=0;U<cy.length;U++)Ns(cy[U],d);break;case"source":Ns("error",d);break;case"img":case"image":case"link":Ns("error",d),Ns("load",d);break;case"details":Ns("toggle",d);break;case"input":ie(d,m),Ns("invalid",d);break;case"option":_s(d,m);break;case"select":Nw(d,m),Ns("invalid",d);break;case"textarea":ZU(d,m),Ns("invalid",d);break}VO(h,m);{O=new Set;for(var G=d.attributes,ce=0;ce<G.length;ce++){var le=G[ce].name.toLowerCase();switch(le){case"value":break;case"checked":break;case"selected":break;default:O.add(G[ce].name)}}}var we=null;for(var De in m)if(m.hasOwnProperty(De)){var We=m[De];if(De===l_)typeof We=="string"?d.textContent!==We&&(m[Og]!==!0&&bE(d.textContent,We,k,I),we=[l_,We]):typeof We=="number"&&d.textContent!==""+We&&(m[Og]!==!0&&bE(d.textContent,We,k,I),we=[l_,""+We]);else if(un.hasOwnProperty(De))We!=null&&(typeof We!="function"&&_E(De,We),De==="onScroll"&&Ns("scroll",d));else if(I&&typeof R=="boolean"){var yt=void 0,Gt=R&&Fe?null:ji(De);if(m[Og]!==!0){if(!(De===gE||De===Og||De==="value"||De==="checked"||De==="selected")){if(De===hy){var Ht=d.innerHTML,Xi=We?We[pE]:void 0;if(Xi!=null){var $i=Vj(d,Xi);$i!==Ht&&fy(De,Ht,$i)}}else if(De===c_){if(O.delete(De),Wj){var me=gde(We);yt=d.getAttribute("style"),me!==yt&&fy(De,yt,me)}}else if(R&&!Fe)O.delete(De.toLowerCase()),yt=Qa(d,De,We),We!==yt&&fy(De,yt,We);else if(!ui(De,Gt,R)&&!It(De,We,Gt,R)){var Ve=!1;if(Gt!==null)O.delete(Gt.attributeName),yt=wo(d,De,We,Gt);else{var _e=C;if(_e===Th&&(_e=PO(h)),_e===Th)O.delete(De.toLowerCase());else{var tt=Jfe(De);tt!==null&&tt!==De&&(Ve=!0,O.delete(tt)),O.delete(De)}yt=Qa(d,De,We)}var Et=Fe;!Et&&We!==yt&&!Ve&&fy(De,yt,We)}}}}}switch(I&&O.size>0&&m[Og]!==!0&&Bj(O),h){case"input":Eh(d),ut(d,m,!0);break;case"textarea":Eh(d),XU(d);break;case"select":case"option":break;default:typeof m.onClick=="function"&&CE(d);break}return we}function tge(d,h,m){var C=d.nodeValue!==h;return C}function Q2(d,h){{if(el)return;el=!0,r("Did not expect server HTML to contain a <%s> in <%s>.",h.nodeName.toLowerCase(),d.nodeName.toLowerCase())}}function X2(d,h){{if(el)return;el=!0,r('Did not expect server HTML to contain the text node "%s" in <%s>.',h.nodeValue,d.nodeName.toLowerCase())}}function J2(d,h,m){{if(el)return;el=!0,r("Expected server HTML to contain a matching <%s> in <%s>.",h,d.nodeName.toLowerCase())}}function eF(d,h){{if(h===""||el)return;el=!0,r('Expected server HTML to contain a matching text node for "%s" in <%s>.',h,d.nodeName.toLowerCase())}}function ige(d,h,m){switch(h){case"input":li(d,m);return;case"textarea":Yce(d,m);return;case"select":Gce(d,m);return}}var gy=function(){},py=function(){};{var nge=["address","applet","area","article","aside","base","basefont","bgsound","blockquote","body","br","button","caption","center","col","colgroup","dd","details","dir","div","dl","dt","embed","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","iframe","img","input","isindex","li","link","listing","main","marquee","menu","menuitem","meta","nav","noembed","noframes","noscript","object","ol","p","param","plaintext","pre","script","section","select","source","style","summary","table","tbody","td","template","textarea","tfoot","th","thead","title","tr","track","ul","wbr","xmp"],zj=["applet","caption","html","table","td","th","marquee","object","template","foreignObject","desc","title"],sge=zj.concat(["button"]),oge=["dd","dt","li","option","optgroup","p","rp","rt"],Uj={current:null,formTag:null,aTagInScope:null,buttonTagInScope:null,nobrTagInScope:null,pTagInButtonScope:null,listItemTagAutoclosing:null,dlItemTagAutoclosing:null};py=function(d,h){var m=Ki({},d||Uj),C={tag:h};return zj.indexOf(h)!==-1&&(m.aTagInScope=null,m.buttonTagInScope=null,m.nobrTagInScope=null),sge.indexOf(h)!==-1&&(m.pTagInButtonScope=null),nge.indexOf(h)!==-1&&h!=="address"&&h!=="div"&&h!=="p"&&(m.listItemTagAutoclosing=null,m.dlItemTagAutoclosing=null),m.current=C,h==="form"&&(m.formTag=C),h==="a"&&(m.aTagInScope=C),h==="button"&&(m.buttonTagInScope=C),h==="nobr"&&(m.nobrTagInScope=C),h==="p"&&(m.pTagInButtonScope=C),h==="li"&&(m.listItemTagAutoclosing=C),(h==="dd"||h==="dt")&&(m.dlItemTagAutoclosing=C),m};var rge=function(d,h){switch(h){case"select":return d==="option"||d==="optgroup"||d==="#text";case"optgroup":return d==="option"||d==="#text";case"option":return d==="#text";case"tr":return d==="th"||d==="td"||d==="style"||d==="script"||d==="template";case"tbody":case"thead":case"tfoot":return d==="tr"||d==="style"||d==="script"||d==="template";case"colgroup":return d==="col"||d==="template";case"table":return d==="caption"||d==="colgroup"||d==="tbody"||d==="tfoot"||d==="thead"||d==="style"||d==="script"||d==="template";case"head":return d==="base"||d==="basefont"||d==="bgsound"||d==="link"||d==="meta"||d==="title"||d==="noscript"||d==="noframes"||d==="style"||d==="script"||d==="template";case"html":return d==="head"||d==="body"||d==="frameset";case"frameset":return d==="frame";case"#document":return d==="html"}switch(d){case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return h!=="h1"&&h!=="h2"&&h!=="h3"&&h!=="h4"&&h!=="h5"&&h!=="h6";case"rp":case"rt":return oge.indexOf(h)===-1;case"body":case"caption":case"col":case"colgroup":case"frameset":case"frame":case"head":case"html":case"tbody":case"td":case"tfoot":case"th":case"thead":case"tr":return h==null}return!0},age=function(d,h){switch(d){case"address":case"article":case"aside":case"blockquote":case"center":case"details":case"dialog":case"dir":case"div":case"dl":case"fieldset":case"figcaption":case"figure":case"footer":case"header":case"hgroup":case"main":case"menu":case"nav":case"ol":case"p":case"section":case"summary":case"ul":case"pre":case"listing":case"table":case"hr":case"xmp":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return h.pTagInButtonScope;case"form":return h.formTag||h.pTagInButtonScope;case"li":return h.listItemTagAutoclosing;case"dd":case"dt":return h.dlItemTagAutoclosing;case"button":return h.buttonTagInScope;case"a":return h.aTagInScope;case"nobr":return h.nobrTagInScope}return null},$j={};gy=function(d,h,m){m=m||Uj;var C=m.current,w=C&&C.tag;h!=null&&(d!=null&&r("validateDOMNesting: when childText is passed, childTag should be null"),d="#text");var k=rge(d,w)?null:C,I=k?null:age(d,m),R=k||I;if(R){var O=R.tag,U=!!k+"|"+d+"|"+O;if(!$j[U]){$j[U]=!0;var G=d,ce="";if(d==="#text"?/\S/.test(h)?G="Text nodes":(G="Whitespace text nodes",ce=" Make sure you don't have any extra whitespace between tags on each line of your source code."):G="<"+d+">",k){var le="";O==="table"&&d==="tr"&&(le+=" Add a <tbody>, <thead> or <tfoot> to your code to match the DOM tree generated by the browser."),r("validateDOMNesting(...): %s cannot appear as a child of <%s>.%s%s",G,O,ce,le)}else r("validateDOMNesting(...): %s cannot appear as a descendant of <%s>.",G,O)}}}}var wE="suppressHydrationWarning",yE="$",SE="/$",my="$?",_y="$!",lge="style",tF=null,iF=null;function cge(d){var h,m,C=d.nodeType;switch(C){case Rh:case FO:{h=C===Rh?"#document":"#fragment";var w=d.documentElement;m=w?w.namespaceURI:OO(null,"");break}default:{var k=C===yo?d.parentNode:d,I=k.namespaceURI||null;h=k.tagName,m=OO(I,h);break}}{var R=h.toLowerCase(),O=py(null,R);return{namespace:m,ancestorInfo:O}}}function dge(d,h,m){{var C=d,w=OO(C.namespace,h),k=py(C.ancestorInfo,h);return{namespace:w,ancestorInfo:k}}}function I$e(d){return d}function uge(d){tF=lhe(),iF=xfe();var h=null;return X$(!1),h}function hge(d){Dfe(iF),X$(tF),tF=null,iF=null}function fge(d,h,m,C,w){var k;{var I=C;if(gy(d,null,I.ancestorInfo),typeof h.children=="string"||typeof h.children=="number"){var R=""+h.children,O=py(I.ancestorInfo,d);gy(null,R,O)}k=I.namespace}var U=Gfe(d,h,m,k);return Cy(w,U),dF(U,h),U}function gge(d,h){d.appendChild(h)}function pge(d,h,m,C,w){switch(Zfe(d,h,m,C),h){case"button":case"input":case"select":case"textarea":return!!m.autoFocus;case"img":return!0;default:return!1}}function mge(d,h,m,C,w,k){{var I=k;if(typeof C.children!=typeof m.children&&(typeof C.children=="string"||typeof C.children=="number")){var R=""+C.children,O=py(I.ancestorInfo,h);gy(null,R,O)}}return Qfe(d,h,m,C)}function nF(d,h){return d==="textarea"||d==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}function _ge(d,h,m,C){{var w=m;gy(null,d,w.ancestorInfo)}var k=Yfe(d,h);return Cy(C,k),k}function vge(){var d=window.event;return d===void 0?Wh:J$(d.type)}var sF=typeof setTimeout=="function"?setTimeout:void 0,bge=typeof clearTimeout=="function"?clearTimeout:void 0,oF=-1,jj=typeof Promise=="function"?Promise:void 0,Cge=typeof queueMicrotask=="function"?queueMicrotask:typeof jj<"u"?function(d){return jj.resolve(null).then(d).catch(wge)}:sF;function wge(d){setTimeout(function(){throw d})}function yge(d,h,m,C){switch(h){case"button":case"input":case"select":case"textarea":m.autoFocus&&d.focus();return;case"img":{m.src&&(d.src=m.src);return}}}function Sge(d,h,m,C,w,k){Xfe(d,h,m,C,w),dF(d,w)}function Kj(d){zk(d,"")}function Lge(d,h,m){d.nodeValue=m}function xge(d,h){d.appendChild(h)}function Dge(d,h){var m;d.nodeType===yo?(m=d.parentNode,m.insertBefore(h,d)):(m=d,m.appendChild(h));var C=d._reactRootContainer;C==null&&m.onclick===null&&CE(m)}function kge(d,h,m){d.insertBefore(h,m)}function Ege(d,h,m){d.nodeType===yo?d.parentNode.insertBefore(h,m):d.insertBefore(h,m)}function Ige(d,h){d.removeChild(h)}function Tge(d,h){d.nodeType===yo?d.parentNode.removeChild(h):d.removeChild(h)}function rF(d,h){var m=h,C=0;do{var w=m.nextSibling;if(d.removeChild(m),w&&w.nodeType===yo){var k=w.data;if(k===SE)if(C===0){d.removeChild(w),Jw(h);return}else C--;else(k===yE||k===my||k===_y)&&C++}m=w}while(m);Jw(h)}function Nge(d,h){d.nodeType===yo?rF(d.parentNode,h):d.nodeType===Ja&&rF(d,h),Jw(d)}function Rge(d){d=d;var h=d.style;typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none"}function Mge(d){d.nodeValue=""}function Age(d,h){d=d;var m=h[lge],C=m!=null&&m.hasOwnProperty("display")?m.display:null;d.style.display=BO("display",C)}function Pge(d,h){d.nodeValue=h}function Oge(d){d.nodeType===Ja?d.textContent="":d.nodeType===Rh&&d.documentElement&&d.removeChild(d.documentElement)}function Fge(d,h,m){return d.nodeType!==Ja||h.toLowerCase()!==d.nodeName.toLowerCase()?null:d}function Bge(d,h){return h===""||d.nodeType!==Nh?null:d}function Wge(d){return d.nodeType!==yo?null:d}function qj(d){return d.data===my}function aF(d){return d.data===_y}function Vge(d){var h=d.nextSibling&&d.nextSibling.dataset,m,C,w;return h&&(m=h.dgst,C=h.msg,w=h.stck),{message:C,digest:m,stack:w}}function Hge(d,h){d._reactRetry=h}function LE(d){for(;d!=null;d=d.nextSibling){var h=d.nodeType;if(h===Ja||h===Nh)break;if(h===yo){var m=d.data;if(m===yE||m===_y||m===my)break;if(m===SE)return null}}return d}function vy(d){return LE(d.nextSibling)}function zge(d){return LE(d.firstChild)}function Uge(d){return LE(d.firstChild)}function $ge(d){return LE(d.nextSibling)}function jge(d,h,m,C,w,k,I){Cy(k,d),dF(d,m);var R;{var O=w;R=O.namespace}var U=(k.mode&Zi)!==ei;return ege(d,h,m,R,C,U,I)}function Kge(d,h,m,C){return Cy(m,d),m.mode&Zi,tge(d,h)}function qge(d,h){Cy(h,d)}function Gge(d){for(var h=d.nextSibling,m=0;h;){if(h.nodeType===yo){var C=h.data;if(C===SE){if(m===0)return vy(h);m--}else(C===yE||C===_y||C===my)&&m++}h=h.nextSibling}return null}function Gj(d){for(var h=d.previousSibling,m=0;h;){if(h.nodeType===yo){var C=h.data;if(C===yE||C===_y||C===my){if(m===0)return h;m--}else C===SE&&m++}h=h.previousSibling}return null}function Yge(d){Jw(d)}function Zge(d){Jw(d)}function Qge(d){return d!=="head"&&d!=="body"}function Xge(d,h,m,C){var w=!0;bE(h.nodeValue,m,C,w)}function Jge(d,h,m,C,w,k){if(h[wE]!==!0){var I=!0;bE(C.nodeValue,w,k,I)}}function epe(d,h){h.nodeType===Ja?Q2(d,h):h.nodeType===yo||X2(d,h)}function tpe(d,h){{var m=d.parentNode;m!==null&&(h.nodeType===Ja?Q2(m,h):h.nodeType===yo||X2(m,h))}}function ipe(d,h,m,C,w){(w||h[wE]!==!0)&&(C.nodeType===Ja?Q2(m,C):C.nodeType===yo||X2(m,C))}function npe(d,h,m){J2(d,h)}function spe(d,h){eF(d,h)}function ope(d,h,m){{var C=d.parentNode;C!==null&&J2(C,h)}}function rpe(d,h){{var m=d.parentNode;m!==null&&eF(m,h)}}function ape(d,h,m,C,w,k){(k||h[wE]!==!0)&&J2(m,C)}function lpe(d,h,m,C,w){(w||h[wE]!==!0)&&eF(m,C)}function cpe(d){r("An error occurred during hydration. The server HTML was replaced with client content in <%s>.",d.nodeName.toLowerCase())}function dpe(d){dy(d)}var qb=Math.random().toString(36).slice(2),Gb="__reactFiber$"+qb,lF="__reactProps$"+qb,by="__reactContainer$"+qb,cF="__reactEvents$"+qb,upe="__reactListeners$"+qb,hpe="__reactHandles$"+qb;function fpe(d){delete d[Gb],delete d[lF],delete d[cF],delete d[upe],delete d[hpe]}function Cy(d,h){h[Gb]=d}function xE(d,h){h[by]=d}function Yj(d){d[by]=null}function wy(d){return!!d[by]}function d_(d){var h=d[Gb];if(h)return h;for(var m=d.parentNode;m;){if(h=m[by]||m[Gb],h){var C=h.alternate;if(h.child!==null||C!==null&&C.child!==null)for(var w=Gj(d);w!==null;){var k=w[Gb];if(k)return k;w=Gj(w)}return h}d=m,m=d.parentNode}return null}function Fg(d){var h=d[Gb]||d[by];return h&&(h.tag===p||h.tag===_||h.tag===E||h.tag===f)?h:null}function Yb(d){if(d.tag===p||d.tag===_)return d.stateNode;throw new Error("getNodeFromInstance: Invalid argument.")}function DE(d){return d[lF]||null}function dF(d,h){d[lF]=h}function gpe(d){var h=d[cF];return h===void 0&&(h=d[cF]=new Set),h}var Zj={},Qj=t.ReactDebugCurrentFrame;function kE(d){if(d){var h=d._owner,m=xg(d.type,d._source,h?h.type:null);Qj.setExtraStackFrame(m)}else Qj.setExtraStackFrame(null)}function id(d,h,m,C,w){{var k=Function.call.bind(Wn);for(var I in d)if(k(d,I)){var R=void 0;try{if(typeof d[I]!="function"){var O=Error((C||"React class")+": "+m+" type `"+I+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof d[I]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw O.name="Invariant Violation",O}R=d[I](h,I,C,m,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(U){R=U}R&&!(R instanceof Error)&&(kE(w),r("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",C||"React class",m,I,typeof R),kE(null)),R instanceof Error&&!(R.message in Zj)&&(Zj[R.message]=!0,kE(w),r("Failed %s type: %s",m,R.message),kE(null))}}}var uF=[],EE;EE=[];var Vh=-1;function Bg(d){return{current:d}}function ta(d,h){if(Vh<0){r("Unexpected pop.");return}h!==EE[Vh]&&r("Unexpected Fiber popped."),d.current=uF[Vh],uF[Vh]=null,EE[Vh]=null,Vh--}function ia(d,h,m){Vh++,uF[Vh]=d.current,EE[Vh]=m,d.current=h}var hF;hF={};var zl={};Object.freeze(zl);var Hh=Bg(zl),fu=Bg(!1),fF=zl;function Zb(d,h,m){return m&&gu(h)?fF:Hh.current}function Xj(d,h,m){{var C=d.stateNode;C.__reactInternalMemoizedUnmaskedChildContext=h,C.__reactInternalMemoizedMaskedChildContext=m}}function Qb(d,h){{var m=d.type,C=m.contextTypes;if(!C)return zl;var w=d.stateNode;if(w&&w.__reactInternalMemoizedUnmaskedChildContext===h)return w.__reactInternalMemoizedMaskedChildContext;var k={};for(var I in C)k[I]=h[I];{var R=Ei(d)||"Unknown";id(C,k,"context",R)}return w&&Xj(d,h,k),k}}function IE(){return fu.current}function gu(d){{var h=d.childContextTypes;return h!=null}}function TE(d){ta(fu,d),ta(Hh,d)}function gF(d){ta(fu,d),ta(Hh,d)}function Jj(d,h,m){{if(Hh.current!==zl)throw new Error("Unexpected context found on stack. This error is likely caused by a bug in React. Please file an issue.");ia(Hh,h,d),ia(fu,m,d)}}function eK(d,h,m){{var C=d.stateNode,w=h.childContextTypes;if(typeof C.getChildContext!="function"){{var k=Ei(d)||"Unknown";hF[k]||(hF[k]=!0,r("%s.childContextTypes is specified but there is no getChildContext() method on the instance. You can either define getChildContext() on %s or remove childContextTypes from it.",k,k))}return m}var I=C.getChildContext();for(var R in I)if(!(R in w))throw new Error((Ei(d)||"Unknown")+'.getChildContext(): key "'+R+'" is not defined in childContextTypes.');{var O=Ei(d)||"Unknown";id(w,I,"child context",O)}return Ki({},m,I)}}function NE(d){{var h=d.stateNode,m=h&&h.__reactInternalMemoizedMergedChildContext||zl;return fF=Hh.current,ia(Hh,m,d),ia(fu,fu.current,d),!0}}function tK(d,h,m){{var C=d.stateNode;if(!C)throw new Error("Expected to have an instance by this point. This error is likely caused by a bug in React. Please file an issue.");if(m){var w=eK(d,h,fF);C.__reactInternalMemoizedMergedChildContext=w,ta(fu,d),ta(Hh,d),ia(Hh,w,d),ia(fu,m,d)}else ta(fu,d),ia(fu,m,d)}}function ppe(d){{if(!Qde(d)||d.tag!==c)throw new Error("Expected subtree parent to be a mounted class component. This error is likely caused by a bug in React. Please file an issue.");var h=d;do{switch(h.tag){case f:return h.stateNode.context;case c:{var m=h.type;if(gu(m))return h.stateNode.__reactInternalMemoizedMergedChildContext;break}}h=h.return}while(h!==null);throw new Error("Found unexpected detached subtree parent. This error is likely caused by a bug in React. Please file an issue.")}}var Wg=0,RE=1,zh=null,pF=!1,mF=!1;function iK(d){zh===null?zh=[d]:zh.push(d)}function mpe(d){pF=!0,iK(d)}function nK(){pF&&Vg()}function Vg(){if(!mF&&zh!==null){mF=!0;var d=0,h=td();try{var m=!0,C=zh;for(or(Wl);d<C.length;d++){var w=C[d];do w=w(m);while(w!==null)}zh=null,pF=!1}catch(k){throw zh!==null&&(zh=zh.slice(d+1)),k$(Gk,Vg),k}finally{or(h),mF=!1}}return null}var Xb=[],Jb=0,ME=null,AE=0,Lc=[],xc=0,u_=null,Uh=1,$h="";function _pe(d){return f_(),(d.flags&b$)!==ri}function vpe(d){return f_(),AE}function bpe(){var d=$h,h=Uh,m=h&~Cpe(h);return m.toString(32)+d}function h_(d,h){f_(),Xb[Jb++]=AE,Xb[Jb++]=ME,ME=d,AE=h}function sK(d,h,m){f_(),Lc[xc++]=Uh,Lc[xc++]=$h,Lc[xc++]=u_,u_=d;var C=Uh,w=$h,k=PE(C)-1,I=C&~(1<<k),R=m+1,O=PE(h)+k;if(O>30){var U=k-k%5,G=(1<<U)-1,ce=(I&G).toString(32),le=I>>U,we=k-U,De=PE(h)+we,We=R<<we,yt=We|le,Gt=ce+w;Uh=1<<De|yt,$h=Gt}else{var Ht=R<<k,Xi=Ht|I,$i=w;Uh=1<<O|Xi,$h=$i}}function _F(d){f_();var h=d.return;if(h!==null){var m=1,C=0;h_(d,m),sK(d,m,C)}}function PE(d){return 32-M$(d)}function Cpe(d){return 1<<PE(d)-1}function vF(d){for(;d===ME;)ME=Xb[--Jb],Xb[Jb]=null,AE=Xb[--Jb],Xb[Jb]=null;for(;d===u_;)u_=Lc[--xc],Lc[xc]=null,$h=Lc[--xc],Lc[xc]=null,Uh=Lc[--xc],Lc[xc]=null}function wpe(){return f_(),u_!==null?{id:Uh,overflow:$h}:null}function ype(d,h){f_(),Lc[xc++]=Uh,Lc[xc++]=$h,Lc[xc++]=u_,Uh=h.id,$h=h.overflow,u_=d}function f_(){br()||r("Expected to be hydrating. This is a bug in React. Please file an issue.")}var vr=null,Dc=null,nd=!1,g_=!1,Hg=null;function Spe(){nd&&r("We should not be hydrating here. This is a bug in React. Please file a bug.")}function oK(){g_=!0}function Lpe(){return g_}function xpe(d){var h=d.stateNode.containerInfo;return Dc=Uge(h),vr=d,nd=!0,Hg=null,g_=!1,!0}function Dpe(d,h,m){return Dc=$ge(h),vr=d,nd=!0,Hg=null,g_=!1,m!==null&&ype(d,m),!0}function rK(d,h){switch(d.tag){case f:{epe(d.stateNode.containerInfo,h);break}case p:{var m=(d.mode&Zi)!==ei;ipe(d.type,d.memoizedProps,d.stateNode,h,m);break}case E:{var C=d.memoizedState;C.dehydrated!==null&&tpe(C.dehydrated,h);break}}}function aK(d,h){rK(d,h);var m=Tve();m.stateNode=h,m.return=d;var C=d.deletions;C===null?(d.deletions=[m],d.flags|=Xm):C.push(m)}function bF(d,h){{if(g_)return;switch(d.tag){case f:{var m=d.stateNode.containerInfo;switch(h.tag){case p:var C=h.type;h.pendingProps,npe(m,C);break;case _:var w=h.pendingProps;spe(m,w);break}break}case p:{var k=d.type,I=d.memoizedProps,R=d.stateNode;switch(h.tag){case p:{var O=h.type,U=h.pendingProps,G=(d.mode&Zi)!==ei;ape(k,I,R,O,U,G);break}case _:{var ce=h.pendingProps,le=(d.mode&Zi)!==ei;lpe(k,I,R,ce,le);break}}break}case E:{var we=d.memoizedState,De=we.dehydrated;if(De!==null)switch(h.tag){case p:var We=h.type;h.pendingProps,ope(De,We);break;case _:var yt=h.pendingProps;rpe(De,yt);break}break}default:return}}}function lK(d,h){h.flags=h.flags&~Ah|So,bF(d,h)}function cK(d,h){switch(d.tag){case p:{var m=d.type;d.pendingProps;var C=Fge(h,m);return C!==null?(d.stateNode=C,vr=d,Dc=zge(C),!0):!1}case _:{var w=d.pendingProps,k=Bge(h,w);return k!==null?(d.stateNode=k,vr=d,Dc=null,!0):!1}case E:{var I=Wge(h);if(I!==null){var R={dehydrated:I,treeContext:wpe(),retryLane:Fl};d.memoizedState=R;var O=Nve(I);return O.return=d,d.child=O,vr=d,Dc=null,!0}return!1}default:return!1}}function CF(d){return(d.mode&Zi)!==ei&&(d.flags&Tn)===ri}function wF(d){throw new Error("Hydration failed because the initial UI does not match what was rendered on the server.")}function yF(d){if(nd){var h=Dc;if(!h){CF(d)&&(bF(vr,d),wF()),lK(vr,d),nd=!1,vr=d;return}var m=h;if(!cK(d,h)){CF(d)&&(bF(vr,d),wF()),h=vy(m);var C=vr;if(!h||!cK(d,h)){lK(vr,d),nd=!1,vr=d;return}aK(C,m)}}}function kpe(d,h,m){var C=d.stateNode,w=!g_,k=jge(C,d.type,d.memoizedProps,h,m,d,w);return d.updateQueue=k,k!==null}function Epe(d){var h=d.stateNode,m=d.memoizedProps,C=Kge(h,m,d);if(C){var w=vr;if(w!==null)switch(w.tag){case f:{var k=w.stateNode.containerInfo,I=(w.mode&Zi)!==ei;Xge(k,h,m,I);break}case p:{var R=w.type,O=w.memoizedProps,U=w.stateNode,G=(w.mode&Zi)!==ei;Jge(R,O,U,h,m,G);break}}}return C}function Ipe(d){var h=d.memoizedState,m=h!==null?h.dehydrated:null;if(!m)throw new Error("Expected to have a hydrated suspense instance. This error is likely caused by a bug in React. Please file an issue.");qge(m,d)}function Tpe(d){var h=d.memoizedState,m=h!==null?h.dehydrated:null;if(!m)throw new Error("Expected to have a hydrated suspense instance. This error is likely caused by a bug in React. Please file an issue.");return Gge(m)}function dK(d){for(var h=d.return;h!==null&&h.tag!==p&&h.tag!==f&&h.tag!==E;)h=h.return;vr=h}function OE(d){if(d!==vr)return!1;if(!nd)return dK(d),nd=!0,!1;if(d.tag!==f&&(d.tag!==p||Qge(d.type)&&!nF(d.type,d.memoizedProps))){var h=Dc;if(h)if(CF(d))uK(d),wF();else for(;h;)aK(d,h),h=vy(h)}return dK(d),d.tag===E?Dc=Tpe(d):Dc=vr?vy(d.stateNode):null,!0}function Npe(){return nd&&Dc!==null}function uK(d){for(var h=Dc;h;)rK(d,h),h=vy(h)}function e0(){vr=null,Dc=null,nd=!1,g_=!1}function hK(){Hg!==null&&(oG(Hg),Hg=null)}function br(){return nd}function SF(d){Hg===null?Hg=[d]:Hg.push(d)}var Rpe=t.ReactCurrentBatchConfig,Mpe=null;function Ape(){return Rpe.transition}var sd={recordUnsafeLifecycleWarnings:function(d,h){},flushPendingUnsafeLifecycleWarnings:function(){},recordLegacyContextWarning:function(d,h){},flushLegacyContextWarning:function(){},discardPendingWarnings:function(){}};{var Ppe=function(d){for(var h=null,m=d;m!==null;)m.mode&to&&(h=m),m=m.return;return h},p_=function(d){var h=[];return d.forEach(function(m){h.push(m)}),h.sort().join(", ")},yy=[],Sy=[],Ly=[],xy=[],Dy=[],ky=[],m_=new Set;sd.recordUnsafeLifecycleWarnings=function(d,h){m_.has(d.type)||(typeof h.componentWillMount=="function"&&h.componentWillMount.__suppressDeprecationWarning!==!0&&yy.push(d),d.mode&to&&typeof h.UNSAFE_componentWillMount=="function"&&Sy.push(d),typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps.__suppressDeprecationWarning!==!0&&Ly.push(d),d.mode&to&&typeof h.UNSAFE_componentWillReceiveProps=="function"&&xy.push(d),typeof h.componentWillUpdate=="function"&&h.componentWillUpdate.__suppressDeprecationWarning!==!0&&Dy.push(d),d.mode&to&&typeof h.UNSAFE_componentWillUpdate=="function"&&ky.push(d))},sd.flushPendingUnsafeLifecycleWarnings=function(){var d=new Set;yy.length>0&&(yy.forEach(function(le){d.add(Ei(le)||"Component"),m_.add(le.type)}),yy=[]);var h=new Set;Sy.length>0&&(Sy.forEach(function(le){h.add(Ei(le)||"Component"),m_.add(le.type)}),Sy=[]);var m=new Set;Ly.length>0&&(Ly.forEach(function(le){m.add(Ei(le)||"Component"),m_.add(le.type)}),Ly=[]);var C=new Set;xy.length>0&&(xy.forEach(function(le){C.add(Ei(le)||"Component"),m_.add(le.type)}),xy=[]);var w=new Set;Dy.length>0&&(Dy.forEach(function(le){w.add(Ei(le)||"Component"),m_.add(le.type)}),Dy=[]);var k=new Set;if(ky.length>0&&(ky.forEach(function(le){k.add(Ei(le)||"Component"),m_.add(le.type)}),ky=[]),h.size>0){var I=p_(h);r(`Using UNSAFE_componentWillMount in strict mode is not recommended and may indicate bugs in your code. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move code with side effects to componentDidMount, and set initial state in the constructor.

Please update the following components: %s`,I)}if(C.size>0){var R=p_(C);r(`Using UNSAFE_componentWillReceiveProps in strict mode is not recommended and may indicate bugs in your code. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move data fetching code or side effects to componentDidUpdate.
* If you're updating state whenever props change, refactor your code to use memoization techniques or move it to static getDerivedStateFromProps. Learn more at: https://reactjs.org/link/derived-state

Please update the following components: %s`,R)}if(k.size>0){var O=p_(k);r(`Using UNSAFE_componentWillUpdate in strict mode is not recommended and may indicate bugs in your code. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move data fetching code or side effects to componentDidUpdate.

Please update the following components: %s`,O)}if(d.size>0){var U=p_(d);s(`componentWillMount has been renamed, and is not recommended for use. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move code with side effects to componentDidMount, and set initial state in the constructor.
* Rename componentWillMount to UNSAFE_componentWillMount to suppress this warning in non-strict mode. In React 18.x, only the UNSAFE_ name will work. To rename all deprecated lifecycles to their new names, you can run \`npx react-codemod rename-unsafe-lifecycles\` in your project source folder.

Please update the following components: %s`,U)}if(m.size>0){var G=p_(m);s(`componentWillReceiveProps has been renamed, and is not recommended for use. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move data fetching code or side effects to componentDidUpdate.
* If you're updating state whenever props change, refactor your code to use memoization techniques or move it to static getDerivedStateFromProps. Learn more at: https://reactjs.org/link/derived-state
* Rename componentWillReceiveProps to UNSAFE_componentWillReceiveProps to suppress this warning in non-strict mode. In React 18.x, only the UNSAFE_ name will work. To rename all deprecated lifecycles to their new names, you can run \`npx react-codemod rename-unsafe-lifecycles\` in your project source folder.

Please update the following components: %s`,G)}if(w.size>0){var ce=p_(w);s(`componentWillUpdate has been renamed, and is not recommended for use. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move data fetching code or side effects to componentDidUpdate.
* Rename componentWillUpdate to UNSAFE_componentWillUpdate to suppress this warning in non-strict mode. In React 18.x, only the UNSAFE_ name will work. To rename all deprecated lifecycles to their new names, you can run \`npx react-codemod rename-unsafe-lifecycles\` in your project source folder.

Please update the following components: %s`,ce)}};var FE=new Map,fK=new Set;sd.recordLegacyContextWarning=function(d,h){var m=Ppe(d);if(m===null){r("Expected to find a StrictMode component in a strict mode tree. This error is likely caused by a bug in React. Please file an issue.");return}if(!fK.has(d.type)){var C=FE.get(m);(d.type.contextTypes!=null||d.type.childContextTypes!=null||h!==null&&typeof h.getChildContext=="function")&&(C===void 0&&(C=[],FE.set(m,C)),C.push(d))}},sd.flushLegacyContextWarning=function(){FE.forEach(function(d,h){if(d.length!==0){var m=d[0],C=new Set;d.forEach(function(k){C.add(Ei(k)||"Component"),fK.add(k.type)});var w=p_(C);try{$s(m),r(`Legacy context API has been detected within a strict-mode tree.

The old API will be supported in all 16.x releases, but applications using it should migrate to the new version.

Please update the following components: %s

Learn more about this warning here: https://reactjs.org/link/legacy-context`,w)}finally{tr()}}})},sd.discardPendingWarnings=function(){yy=[],Sy=[],Ly=[],xy=[],Dy=[],ky=[],FE=new Map}}var LF,xF,DF,kF,EF,gK=function(d,h){};LF=!1,xF=!1,DF={},kF={},EF={},gK=function(d,h){if(!(d===null||typeof d!="object")&&!(!d._store||d._store.validated||d.key!=null)){if(typeof d._store!="object")throw new Error("React Component in warnForMissingKey should have a _store. This error is likely caused by a bug in React. Please file an issue.");d._store.validated=!0;var m=Ei(h)||"Component";kF[m]||(kF[m]=!0,r('Each child in a list should have a unique "key" prop. See https://reactjs.org/link/warning-keys for more information.'))}};function Ope(d){return d.prototype&&d.prototype.isReactComponent}function Ey(d,h,m){var C=m.ref;if(C!==null&&typeof C!="function"&&typeof C!="object"){if((d.mode&to||Li)&&!(m._owner&&m._self&&m._owner.stateNode!==m._self)&&!(m._owner&&m._owner.tag!==c)&&!(typeof m.type=="function"&&!Ope(m.type))&&m._owner){var w=Ei(d)||"Component";DF[w]||(r('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. We recommend using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',w,C),DF[w]=!0)}if(m._owner){var k=m._owner,I;if(k){var R=k;if(R.tag!==c)throw new Error("Function components cannot have string refs. We recommend using useRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref");I=R.stateNode}if(!I)throw new Error("Missing owner for string ref "+C+". This error is likely caused by a bug in React. Please file an issue.");var O=I;ve(C,"ref");var U=""+C;if(h!==null&&h.ref!==null&&typeof h.ref=="function"&&h.ref._stringRef===U)return h.ref;var G=function(ce){var le=O.refs;ce===null?delete le[U]:le[U]=ce};return G._stringRef=U,G}else{if(typeof C!="string")throw new Error("Expected ref to be a function, a string, an object returned by React.createRef(), or null.");if(!m._owner)throw new Error("Element ref was specified as a string ("+C+`) but no owner was set. This could happen for one of the following reasons:
1. You may be adding a ref to a function component
2. You may be adding a ref to a component that was not created inside a component's render method
3. You have multiple copies of React loaded
See https://reactjs.org/link/refs-must-have-owner for more information.`)}}return C}function BE(d,h){var m=Object.prototype.toString.call(h);throw new Error("Objects are not valid as a React child (found: "+(m==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":m)+"). If you meant to render a collection of children, use an array instead.")}function WE(d){{var h=Ei(d)||"Component";if(EF[h])return;EF[h]=!0,r("Functions are not valid as a React child. This may happen if you return a Component instead of <Component /> from render. Or maybe you meant to call this function rather than return it.")}}function pK(d){var h=d._payload,m=d._init;return m(h)}function mK(d){function h(me,Ve){if(d){var _e=me.deletions;_e===null?(me.deletions=[Ve],me.flags|=Xm):_e.push(Ve)}}function m(me,Ve){if(!d)return null;for(var _e=Ve;_e!==null;)h(me,_e),_e=_e.sibling;return null}function C(me,Ve){for(var _e=new Map,tt=Ve;tt!==null;)tt.key!==null?_e.set(tt.key,tt):_e.set(tt.index,tt),tt=tt.sibling;return _e}function w(me,Ve){var _e=x_(me,Ve);return _e.index=0,_e.sibling=null,_e}function k(me,Ve,_e){if(me.index=_e,!d)return me.flags|=b$,Ve;var tt=me.alternate;if(tt!==null){var Et=tt.index;return Et<Ve?(me.flags|=So,Ve):Et}else return me.flags|=So,Ve}function I(me){return d&&me.alternate===null&&(me.flags|=So),me}function R(me,Ve,_e,tt){if(Ve===null||Ve.tag!==_){var Et=S5(_e,me.mode,tt);return Et.return=me,Et}else{var St=w(Ve,_e);return St.return=me,St}}function O(me,Ve,_e,tt){var Et=_e.type;if(Et===te)return G(me,Ve,_e.props.children,tt,_e.key);if(Ve!==null&&(Ve.elementType===Et||wG(Ve,_e)||typeof Et=="object"&&Et!==null&&Et.$$typeof===Pe&&pK(Et)===Ve.type)){var St=w(Ve,_e.props);return St.ref=Ey(me,Ve,_e),St.return=me,St._debugSource=_e._source,St._debugOwner=_e._owner,St}var ci=y5(_e,me.mode,tt);return ci.ref=Ey(me,Ve,_e),ci.return=me,ci}function U(me,Ve,_e,tt){if(Ve===null||Ve.tag!==g||Ve.stateNode.containerInfo!==_e.containerInfo||Ve.stateNode.implementation!==_e.implementation){var Et=L5(_e,me.mode,tt);return Et.return=me,Et}else{var St=w(Ve,_e.children||[]);return St.return=me,St}}function G(me,Ve,_e,tt,Et){if(Ve===null||Ve.tag!==b){var St=Xg(_e,me.mode,tt,Et);return St.return=me,St}else{var ci=w(Ve,_e);return ci.return=me,ci}}function ce(me,Ve,_e){if(typeof Ve=="string"&&Ve!==""||typeof Ve=="number"){var tt=S5(""+Ve,me.mode,_e);return tt.return=me,tt}if(typeof Ve=="object"&&Ve!==null){switch(Ve.$$typeof){case Da:{var Et=y5(Ve,me.mode,_e);return Et.ref=Ey(me,null,Ve),Et.return=me,Et}case Pl:{var St=L5(Ve,me.mode,_e);return St.return=me,St}case Pe:{var ci=Ve._payload,Ci=Ve._init;return ce(me,Ci(ci),_e)}}if(In(Ve)||lu(Ve)){var Yn=Xg(Ve,me.mode,_e,null);return Yn.return=me,Yn}BE(me,Ve)}return typeof Ve=="function"&&WE(me),null}function le(me,Ve,_e,tt){var Et=Ve!==null?Ve.key:null;if(typeof _e=="string"&&_e!==""||typeof _e=="number")return Et!==null?null:R(me,Ve,""+_e,tt);if(typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case Da:return _e.key===Et?O(me,Ve,_e,tt):null;case Pl:return _e.key===Et?U(me,Ve,_e,tt):null;case Pe:{var St=_e._payload,ci=_e._init;return le(me,Ve,ci(St),tt)}}if(In(_e)||lu(_e))return Et!==null?null:G(me,Ve,_e,tt,null);BE(me,_e)}return typeof _e=="function"&&WE(me),null}function we(me,Ve,_e,tt,Et){if(typeof tt=="string"&&tt!==""||typeof tt=="number"){var St=me.get(_e)||null;return R(Ve,St,""+tt,Et)}if(typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case Da:{var ci=me.get(tt.key===null?_e:tt.key)||null;return O(Ve,ci,tt,Et)}case Pl:{var Ci=me.get(tt.key===null?_e:tt.key)||null;return U(Ve,Ci,tt,Et)}case Pe:var Yn=tt._payload,bn=tt._init;return we(me,Ve,_e,bn(Yn),Et)}if(In(tt)||lu(tt)){var co=me.get(_e)||null;return G(Ve,co,tt,Et,null)}BE(Ve,tt)}return typeof tt=="function"&&WE(Ve),null}function De(me,Ve,_e){{if(typeof me!="object"||me===null)return Ve;switch(me.$$typeof){case Da:case Pl:gK(me,_e);var tt=me.key;if(typeof tt!="string")break;if(Ve===null){Ve=new Set,Ve.add(tt);break}if(!Ve.has(tt)){Ve.add(tt);break}r("Encountered two children with the same key, `%s`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted  the behavior is unsupported and could change in a future version.",tt);break;case Pe:var Et=me._payload,St=me._init;De(St(Et),Ve,_e);break}}return Ve}function We(me,Ve,_e,tt){for(var Et=null,St=0;St<_e.length;St++){var ci=_e[St];Et=De(ci,Et,me)}for(var Ci=null,Yn=null,bn=Ve,co=0,Cn=0,io=null;bn!==null&&Cn<_e.length;Cn++){bn.index>Cn?(io=bn,bn=null):io=bn.sibling;var sa=le(me,bn,_e[Cn],tt);if(sa===null){bn===null&&(bn=io);break}d&&bn&&sa.alternate===null&&h(me,bn),co=k(sa,co,Cn),Yn===null?Ci=sa:Yn.sibling=sa,Yn=sa,bn=io}if(Cn===_e.length){if(m(me,bn),br()){var Dr=Cn;h_(me,Dr)}return Ci}if(bn===null){for(;Cn<_e.length;Cn++){var $l=ce(me,_e[Cn],tt);$l!==null&&(co=k($l,co,Cn),Yn===null?Ci=$l:Yn.sibling=$l,Yn=$l)}if(br()){var Ra=Cn;h_(me,Ra)}return Ci}for(var Ma=C(me,bn);Cn<_e.length;Cn++){var oa=we(Ma,me,Cn,_e[Cn],tt);oa!==null&&(d&&oa.alternate!==null&&Ma.delete(oa.key===null?Cn:oa.key),co=k(oa,co,Cn),Yn===null?Ci=oa:Yn.sibling=oa,Yn=oa)}if(d&&Ma.forEach(function(b0){return h(me,b0)}),br()){var Qh=Cn;h_(me,Qh)}return Ci}function yt(me,Ve,_e,tt){var Et=lu(_e);if(typeof Et!="function")throw new Error("An object is not an iterable. This error is likely caused by a bug in React. Please file an issue.");{typeof Symbol=="function"&&_e[Symbol.toStringTag]==="Generator"&&(xF||r("Using Generators as children is unsupported and will likely yield unexpected results because enumerating a generator mutates it. You may convert it to an array with `Array.from()` or the `[...spread]` operator before rendering. Keep in mind you might need to polyfill these features for older browsers."),xF=!0),_e.entries===Et&&(LF||r("Using Maps as children is not supported. Use an array of keyed ReactElements instead."),LF=!0);var St=Et.call(_e);if(St)for(var ci=null,Ci=St.next();!Ci.done;Ci=St.next()){var Yn=Ci.value;ci=De(Yn,ci,me)}}var bn=Et.call(_e);if(bn==null)throw new Error("An iterable object provided no iterator.");for(var co=null,Cn=null,io=Ve,sa=0,Dr=0,$l=null,Ra=bn.next();io!==null&&!Ra.done;Dr++,Ra=bn.next()){io.index>Dr?($l=io,io=null):$l=io.sibling;var Ma=le(me,io,Ra.value,tt);if(Ma===null){io===null&&(io=$l);break}d&&io&&Ma.alternate===null&&h(me,io),sa=k(Ma,sa,Dr),Cn===null?co=Ma:Cn.sibling=Ma,Cn=Ma,io=$l}if(Ra.done){if(m(me,io),br()){var oa=Dr;h_(me,oa)}return co}if(io===null){for(;!Ra.done;Dr++,Ra=bn.next()){var Qh=ce(me,Ra.value,tt);Qh!==null&&(sa=k(Qh,sa,Dr),Cn===null?co=Qh:Cn.sibling=Qh,Cn=Qh)}if(br()){var b0=Dr;h_(me,b0)}return co}for(var rS=C(me,io);!Ra.done;Dr++,Ra=bn.next()){var yu=we(rS,me,Dr,Ra.value,tt);yu!==null&&(d&&yu.alternate!==null&&rS.delete(yu.key===null?Dr:yu.key),sa=k(yu,sa,Dr),Cn===null?co=yu:Cn.sibling=yu,Cn=yu)}if(d&&rS.forEach(function(lbe){return h(me,lbe)}),br()){var abe=Dr;h_(me,abe)}return co}function Gt(me,Ve,_e,tt){if(Ve!==null&&Ve.tag===_){m(me,Ve.sibling);var Et=w(Ve,_e);return Et.return=me,Et}m(me,Ve);var St=S5(_e,me.mode,tt);return St.return=me,St}function Ht(me,Ve,_e,tt){for(var Et=_e.key,St=Ve;St!==null;){if(St.key===Et){var ci=_e.type;if(ci===te){if(St.tag===b){m(me,St.sibling);var Ci=w(St,_e.props.children);return Ci.return=me,Ci._debugSource=_e._source,Ci._debugOwner=_e._owner,Ci}}else if(St.elementType===ci||wG(St,_e)||typeof ci=="object"&&ci!==null&&ci.$$typeof===Pe&&pK(ci)===St.type){m(me,St.sibling);var Yn=w(St,_e.props);return Yn.ref=Ey(me,St,_e),Yn.return=me,Yn._debugSource=_e._source,Yn._debugOwner=_e._owner,Yn}m(me,St);break}else h(me,St);St=St.sibling}if(_e.type===te){var bn=Xg(_e.props.children,me.mode,tt,_e.key);return bn.return=me,bn}else{var co=y5(_e,me.mode,tt);return co.ref=Ey(me,Ve,_e),co.return=me,co}}function Xi(me,Ve,_e,tt){for(var Et=_e.key,St=Ve;St!==null;){if(St.key===Et)if(St.tag===g&&St.stateNode.containerInfo===_e.containerInfo&&St.stateNode.implementation===_e.implementation){m(me,St.sibling);var ci=w(St,_e.children||[]);return ci.return=me,ci}else{m(me,St);break}else h(me,St);St=St.sibling}var Ci=L5(_e,me.mode,tt);return Ci.return=me,Ci}function $i(me,Ve,_e,tt){var Et=typeof _e=="object"&&_e!==null&&_e.type===te&&_e.key===null;if(Et&&(_e=_e.props.children),typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case Da:return I(Ht(me,Ve,_e,tt));case Pl:return I(Xi(me,Ve,_e,tt));case Pe:var St=_e._payload,ci=_e._init;return $i(me,Ve,ci(St),tt)}if(In(_e))return We(me,Ve,_e,tt);if(lu(_e))return yt(me,Ve,_e,tt);BE(me,_e)}return typeof _e=="string"&&_e!==""||typeof _e=="number"?I(Gt(me,Ve,""+_e,tt)):(typeof _e=="function"&&WE(me),m(me,Ve))}return $i}var t0=mK(!0),_K=mK(!1);function Fpe(d,h){if(d!==null&&h.child!==d.child)throw new Error("Resuming work not yet implemented.");if(h.child!==null){var m=h.child,C=x_(m,m.pendingProps);for(h.child=C,C.return=h;m.sibling!==null;)m=m.sibling,C=C.sibling=x_(m,m.pendingProps),C.return=h;C.sibling=null}}function Bpe(d,h){for(var m=d.child;m!==null;)xve(m,h),m=m.sibling}var IF=Bg(null),TF;TF={};var VE=null,i0=null,NF=null,HE=!1;function zE(){VE=null,i0=null,NF=null,HE=!1}function vK(){HE=!0}function bK(){HE=!1}function CK(d,h,m){ia(IF,h._currentValue,d),h._currentValue=m,h._currentRenderer!==void 0&&h._currentRenderer!==null&&h._currentRenderer!==TF&&r("Detected multiple renderers concurrently rendering the same context provider. This is currently unsupported."),h._currentRenderer=TF}function RF(d,h){var m=IF.current;ta(IF,h),d._currentValue=m}function MF(d,h,m){for(var C=d;C!==null;){var w=C.alternate;if(Vb(C.childLanes,h)?w!==null&&!Vb(w.childLanes,h)&&(w.childLanes=Ai(w.childLanes,h)):(C.childLanes=Ai(C.childLanes,h),w!==null&&(w.childLanes=Ai(w.childLanes,h))),C===m)break;C=C.return}C!==m&&r("Expected to find the propagation root when scheduling context work. This error is likely caused by a bug in React. Please file an issue.")}function Wpe(d,h,m){Vpe(d,h,m)}function Vpe(d,h,m){var C=d.child;for(C!==null&&(C.return=d);C!==null;){var w=void 0,k=C.dependencies;if(k!==null){w=C.child;for(var I=k.firstContext;I!==null;){if(I.context===h){if(C.tag===c){var R=Kw(m),O=jh(Ls,R);O.tag=$E;var U=C.updateQueue;if(U!==null){var G=U.shared,ce=G.pending;ce===null?O.next=O:(O.next=ce.next,ce.next=O),G.pending=O}}C.lanes=Ai(C.lanes,m);var le=C.alternate;le!==null&&(le.lanes=Ai(le.lanes,m)),MF(C.return,m,d),k.lanes=Ai(k.lanes,m);break}I=I.next}}else if(C.tag===L)w=C.type===d.type?null:C.child;else if(C.tag===Q){var we=C.return;if(we===null)throw new Error("We just came from a parent so we must have had a parent. This is a bug in React.");we.lanes=Ai(we.lanes,m);var De=we.alternate;De!==null&&(De.lanes=Ai(De.lanes,m)),MF(we,m,d),w=C.sibling}else w=C.child;if(w!==null)w.return=C;else for(w=C;w!==null;){if(w===d){w=null;break}var We=w.sibling;if(We!==null){We.return=w.return,w=We;break}w=w.return}C=w}}function n0(d,h){VE=d,i0=null,NF=null;var m=d.dependencies;if(m!==null){var C=m.firstContext;C!==null&&(Bl(m.lanes,h)&&Uy(),m.firstContext=null)}}function Lo(d){HE&&r("Context can only be read while React is rendering. In classes, you can read it in the render method or getDerivedStateFromProps. In function components, you can read it directly in the function body, but not inside Hooks like useReducer() or useMemo().");var h=d._currentValue;if(NF!==d){var m={context:d,memoizedValue:h,next:null};if(i0===null){if(VE===null)throw new Error("Context can only be read while React is rendering. In classes, you can read it in the render method or getDerivedStateFromProps. In function components, you can read it directly in the function body, but not inside Hooks like useReducer() or useMemo().");i0=m,VE.dependencies={lanes:Qe,firstContext:m}}else i0=i0.next=m}return h}var __=null;function AF(d){__===null?__=[d]:__.push(d)}function Hpe(){if(__!==null){for(var d=0;d<__.length;d++){var h=__[d],m=h.interleaved;if(m!==null){h.interleaved=null;var C=m.next,w=h.pending;if(w!==null){var k=w.next;w.next=C,m.next=k}h.pending=m}}__=null}}function wK(d,h,m,C){var w=h.interleaved;return w===null?(m.next=m,AF(h)):(m.next=w.next,w.next=m),h.interleaved=m,UE(d,C)}function zpe(d,h,m,C){var w=h.interleaved;w===null?(m.next=m,AF(h)):(m.next=w.next,w.next=m),h.interleaved=m}function Upe(d,h,m,C){var w=h.interleaved;return w===null?(m.next=m,AF(h)):(m.next=w.next,w.next=m),h.interleaved=m,UE(d,C)}function tl(d,h){return UE(d,h)}var $pe=UE;function UE(d,h){d.lanes=Ai(d.lanes,h);var m=d.alternate;m!==null&&(m.lanes=Ai(m.lanes,h)),m===null&&(d.flags&(So|Ah))!==ri&&_G(d);for(var C=d,w=d.return;w!==null;)w.childLanes=Ai(w.childLanes,h),m=w.alternate,m!==null?m.childLanes=Ai(m.childLanes,h):(w.flags&(So|Ah))!==ri&&_G(d),C=w,w=w.return;if(C.tag===f){var k=C.stateNode;return k}else return null}var yK=0,SK=1,$E=2,PF=3,jE=!1,OF,KE;OF=!1,KE=null;function FF(d){var h={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:Qe},effects:null};d.updateQueue=h}function LK(d,h){var m=h.updateQueue,C=d.updateQueue;if(m===C){var w={baseState:C.baseState,firstBaseUpdate:C.firstBaseUpdate,lastBaseUpdate:C.lastBaseUpdate,shared:C.shared,effects:C.effects};h.updateQueue=w}}function jh(d,h){var m={eventTime:d,lane:h,tag:yK,payload:null,callback:null,next:null};return m}function zg(d,h,m){var C=d.updateQueue;if(C===null)return null;var w=C.shared;if(KE===w&&!OF&&(r("An update (setState, replaceState, or forceUpdate) was scheduled from inside an update function. Update functions should be pure, with zero side-effects. Consider using componentDidUpdate or a callback."),OF=!0),z_e()){var k=w.pending;return k===null?h.next=h:(h.next=k.next,k.next=h),w.pending=h,$pe(d,m)}else return Upe(d,w,h,m)}function qE(d,h,m){var C=h.updateQueue;if(C!==null){var w=C.shared;if(F$(m)){var k=w.lanes;k=W$(k,d.pendingLanes);var I=Ai(k,m);w.lanes=I,I2(d,I)}}}function BF(d,h){var m=d.updateQueue,C=d.alternate;if(C!==null){var w=C.updateQueue;if(m===w){var k=null,I=null,R=m.firstBaseUpdate;if(R!==null){var O=R;do{var U={eventTime:O.eventTime,lane:O.lane,tag:O.tag,payload:O.payload,callback:O.callback,next:null};I===null?k=I=U:(I.next=U,I=U),O=O.next}while(O!==null);I===null?k=I=h:(I.next=h,I=h)}else k=I=h;m={baseState:w.baseState,firstBaseUpdate:k,lastBaseUpdate:I,shared:w.shared,effects:w.effects},d.updateQueue=m;return}}var G=m.lastBaseUpdate;G===null?m.firstBaseUpdate=h:G.next=h,m.lastBaseUpdate=h}function jpe(d,h,m,C,w,k){switch(m.tag){case SK:{var I=m.payload;if(typeof I=="function"){vK();var R=I.call(k,C,w);{if(d.mode&to){nr(!0);try{I.call(k,C,w)}finally{nr(!1)}}bK()}return R}return I}case PF:d.flags=d.flags&~Ea|Tn;case yK:{var O=m.payload,U;if(typeof O=="function"){vK(),U=O.call(k,C,w);{if(d.mode&to){nr(!0);try{O.call(k,C,w)}finally{nr(!1)}}bK()}}else U=O;return U==null?C:Ki({},C,U)}case $E:return jE=!0,C}return C}function GE(d,h,m,C){var w=d.updateQueue;jE=!1,KE=w.shared;var k=w.firstBaseUpdate,I=w.lastBaseUpdate,R=w.shared.pending;if(R!==null){w.shared.pending=null;var O=R,U=O.next;O.next=null,I===null?k=U:I.next=U,I=O;var G=d.alternate;if(G!==null){var ce=G.updateQueue,le=ce.lastBaseUpdate;le!==I&&(le===null?ce.firstBaseUpdate=U:le.next=U,ce.lastBaseUpdate=O)}}if(k!==null){var we=w.baseState,De=Qe,We=null,yt=null,Gt=null,Ht=k;do{var Xi=Ht.lane,$i=Ht.eventTime;if(Vb(C,Xi)){if(Gt!==null){var Ve={eventTime:$i,lane:sr,tag:Ht.tag,payload:Ht.payload,callback:Ht.callback,next:null};Gt=Gt.next=Ve}we=jpe(d,w,Ht,we,h,m);var _e=Ht.callback;if(_e!==null&&Ht.lane!==sr){d.flags|=ZO;var tt=w.effects;tt===null?w.effects=[Ht]:tt.push(Ht)}}else{var me={eventTime:$i,lane:Xi,tag:Ht.tag,payload:Ht.payload,callback:Ht.callback,next:null};Gt===null?(yt=Gt=me,We=we):Gt=Gt.next=me,De=Ai(De,Xi)}if(Ht=Ht.next,Ht===null){if(R=w.shared.pending,R===null)break;var Et=R,St=Et.next;Et.next=null,Ht=St,w.lastBaseUpdate=Et,w.shared.pending=null}}while(!0);Gt===null&&(We=we),w.baseState=We,w.firstBaseUpdate=yt,w.lastBaseUpdate=Gt;var ci=w.shared.interleaved;if(ci!==null){var Ci=ci;do De=Ai(De,Ci.lane),Ci=Ci.next;while(Ci!==ci)}else k===null&&(w.shared.lanes=Qe);tS(De),d.lanes=De,d.memoizedState=we}KE=null}function Kpe(d,h){if(typeof d!="function")throw new Error("Invalid argument passed as callback. Expected a function. Instead "+("received: "+d));d.call(h)}function xK(){jE=!1}function YE(){return jE}function DK(d,h,m){var C=h.effects;if(h.effects=null,C!==null)for(var w=0;w<C.length;w++){var k=C[w],I=k.callback;I!==null&&(k.callback=null,Kpe(I,m))}}var Iy={},Ug=Bg(Iy),Ty=Bg(Iy),ZE=Bg(Iy);function QE(d){if(d===Iy)throw new Error("Expected host context to exist. This error is likely caused by a bug in React. Please file an issue.");return d}function kK(){var d=QE(ZE.current);return d}function WF(d,h){ia(ZE,h,d),ia(Ty,d,d),ia(Ug,Iy,d);var m=cge(h);ta(Ug,d),ia(Ug,m,d)}function s0(d){ta(Ug,d),ta(Ty,d),ta(ZE,d)}function VF(){var d=QE(Ug.current);return d}function EK(d){QE(ZE.current);var h=QE(Ug.current),m=dge(h,d.type);h!==m&&(ia(Ty,d,d),ia(Ug,m,d))}function HF(d){Ty.current===d&&(ta(Ug,d),ta(Ty,d))}var qpe=0,IK=1,TK=1,Ny=2,od=Bg(qpe);function zF(d,h){return(d&h)!==0}function o0(d){return d&IK}function UF(d,h){return d&IK|h}function Gpe(d,h){return d|h}function $g(d,h){ia(od,h,d)}function r0(d){ta(od,d)}function Ype(d,h){var m=d.memoizedState;return m!==null?m.dehydrated!==null:(d.memoizedProps,!0)}function XE(d){for(var h=d;h!==null;){if(h.tag===E){var m=h.memoizedState;if(m!==null){var C=m.dehydrated;if(C===null||qj(C)||aF(C))return h}}else if(h.tag===K&&h.memoizedProps.revealOrder!==void 0){var w=(h.flags&Tn)!==ri;if(w)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===d)return null;for(;h.sibling===null;){if(h.return===null||h.return===d)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var il=0,Po=1,pu=2,Oo=4,Cr=8,$F=[];function jF(){for(var d=0;d<$F.length;d++){var h=$F[d];h._workInProgressVersionPrimary=null}$F.length=0}function Zpe(d,h){var m=h._getVersion,C=m(h._source);d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[h,C]:d.mutableSourceEagerHydrationData.push(h,C)}var kt=t.ReactCurrentDispatcher,Ry=t.ReactCurrentBatchConfig,KF,a0;KF=new Set;var v_=Qe,Gn=null,Fo=null,Bo=null,JE=!1,My=!1,Ay=0,Qpe=0,Xpe=25,$e=null,kc=null,jg=-1,qF=!1;function Mn(){{var d=$e;kc===null?kc=[d]:kc.push(d)}}function mt(){{var d=$e;kc!==null&&(jg++,kc[jg]!==d&&Jpe(d))}}function l0(d){d!=null&&!In(d)&&r("%s received a final argument that is not an array (instead, received `%s`). When specified, the final argument must be an array.",$e,typeof d)}function Jpe(d){{var h=Ei(Gn);if(!KF.has(h)&&(KF.add(h),kc!==null)){for(var m="",C=30,w=0;w<=jg;w++){for(var k=kc[w],I=w===jg?d:k,R=w+1+". "+k;R.length<C;)R+=" ";R+=I+`
`,m+=R}r(`React has detected a change in the order of Hooks called by %s. This will lead to bugs and errors if not fixed. For more information, read the Rules of Hooks: https://reactjs.org/link/rules-of-hooks

   Previous render            Next render
   ------------------------------------------------------
%s   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
`,h,m)}}}function na(){throw new Error(`Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:
1. You might have mismatching versions of React and the renderer (such as React DOM)
2. You might be breaking the Rules of Hooks
3. You might have more than one copy of React in the same app
See https://reactjs.org/link/invalid-hook-call for tips about how to debug and fix this problem.`)}function GF(d,h){if(qF)return!1;if(h===null)return r("%s received a final argument during this render, but not during the previous render. Even though the final argument is optional, its type cannot change between renders.",$e),!1;d.length!==h.length&&r(`The final argument passed to %s changed size between renders. The order and size of this array must remain constant.

Previous: %s
Incoming: %s`,$e,"["+h.join(", ")+"]","["+d.join(", ")+"]");for(var m=0;m<h.length&&m<d.length;m++)if(!Hl(d[m],h[m]))return!1;return!0}function c0(d,h,m,C,w,k){v_=k,Gn=h,kc=d!==null?d._debugHookTypes:null,jg=-1,qF=d!==null&&d.type!==h.type,h.memoizedState=null,h.updateQueue=null,h.lanes=Qe,d!==null&&d.memoizedState!==null?kt.current=XK:kc!==null?kt.current=QK:kt.current=ZK;var I=m(C,w);if(My){var R=0;do{if(My=!1,Ay=0,R>=Xpe)throw new Error("Too many re-renders. React limits the number of renders to prevent an infinite loop.");R+=1,qF=!1,Fo=null,Bo=null,h.updateQueue=null,jg=-1,kt.current=JK,I=m(C,w)}while(My)}kt.current=hI,h._debugHookTypes=kc;var O=Fo!==null&&Fo.next!==null;if(v_=Qe,Gn=null,Fo=null,Bo=null,$e=null,kc=null,jg=-1,d!==null&&(d.flags&Oh)!==(h.flags&Oh)&&(d.mode&Zi)!==ei&&r("Internal React error: Expected static flag was missing. Please notify the React team."),JE=!1,O)throw new Error("Rendered fewer hooks than expected. This may be caused by an accidental early return statement.");return I}function d0(){var d=Ay!==0;return Ay=0,d}function NK(d,h,m){h.updateQueue=d.updateQueue,(h.mode&uu)!==ei?h.flags&=~(qk|Ph|Jc|on):h.flags&=~(Jc|on),d.lanes=eE(d.lanes,m)}function RK(){if(kt.current=hI,JE){for(var d=Gn.memoizedState;d!==null;){var h=d.queue;h!==null&&(h.pending=null),d=d.next}JE=!1}v_=Qe,Gn=null,Fo=null,Bo=null,kc=null,jg=-1,$e=null,jK=!1,My=!1,Ay=0}function mu(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bo===null?Gn.memoizedState=Bo=d:Bo=Bo.next=d,Bo}function Ec(){var d;if(Fo===null){var h=Gn.alternate;h!==null?d=h.memoizedState:d=null}else d=Fo.next;var m;if(Bo===null?m=Gn.memoizedState:m=Bo.next,m!==null)Bo=m,m=Bo.next,Fo=d;else{if(d===null)throw new Error("Rendered more hooks than during the previous render.");Fo=d;var C={memoizedState:Fo.memoizedState,baseState:Fo.baseState,baseQueue:Fo.baseQueue,queue:Fo.queue,next:null};Bo===null?Gn.memoizedState=Bo=C:Bo=Bo.next=C}return Bo}function MK(){return{lastEffect:null,stores:null}}function YF(d,h){return typeof h=="function"?h(d):h}function ZF(d,h,m){var C=mu(),w;m!==void 0?w=m(h):w=h,C.memoizedState=C.baseState=w;var k={pending:null,interleaved:null,lanes:Qe,dispatch:null,lastRenderedReducer:d,lastRenderedState:w};C.queue=k;var I=k.dispatch=nme.bind(null,Gn,k);return[C.memoizedState,I]}function QF(d,h,m){var C=Ec(),w=C.queue;if(w===null)throw new Error("Should have a queue. This is likely a bug in React. Please file an issue.");w.lastRenderedReducer=d;var k=Fo,I=k.baseQueue,R=w.pending;if(R!==null){if(I!==null){var O=I.next,U=R.next;I.next=U,R.next=O}k.baseQueue!==I&&r("Internal error: Expected work-in-progress queue to be a clone. This is a bug in React."),k.baseQueue=I=R,w.pending=null}if(I!==null){var G=I.next,ce=k.baseState,le=null,we=null,De=null,We=G;do{var yt=We.lane;if(Vb(v_,yt)){if(De!==null){var Ht={lane:sr,action:We.action,hasEagerState:We.hasEagerState,eagerState:We.eagerState,next:null};De=De.next=Ht}if(We.hasEagerState)ce=We.eagerState;else{var Xi=We.action;ce=d(ce,Xi)}}else{var Gt={lane:yt,action:We.action,hasEagerState:We.hasEagerState,eagerState:We.eagerState,next:null};De===null?(we=De=Gt,le=ce):De=De.next=Gt,Gn.lanes=Ai(Gn.lanes,yt),tS(yt)}We=We.next}while(We!==null&&We!==G);De===null?le=ce:De.next=we,Hl(ce,C.memoizedState)||Uy(),C.memoizedState=ce,C.baseState=le,C.baseQueue=De,w.lastRenderedState=ce}var $i=w.interleaved;if($i!==null){var me=$i;do{var Ve=me.lane;Gn.lanes=Ai(Gn.lanes,Ve),tS(Ve),me=me.next}while(me!==$i)}else I===null&&(w.lanes=Qe);var _e=w.dispatch;return[C.memoizedState,_e]}function XF(d,h,m){var C=Ec(),w=C.queue;if(w===null)throw new Error("Should have a queue. This is likely a bug in React. Please file an issue.");w.lastRenderedReducer=d;var k=w.dispatch,I=w.pending,R=C.memoizedState;if(I!==null){w.pending=null;var O=I.next,U=O;do{var G=U.action;R=d(R,G),U=U.next}while(U!==O);Hl(R,C.memoizedState)||Uy(),C.memoizedState=R,C.baseQueue===null&&(C.baseState=R),w.lastRenderedState=R}return[R,k]}function T$e(d,h,m){}function N$e(d,h,m){}function JF(d,h,m){var C=Gn,w=mu(),k,I=br();if(I){if(m===void 0)throw new Error("Missing getServerSnapshot, which is required for server-rendered content. Will revert to client rendering.");k=m(),a0||k!==m()&&(r("The result of getServerSnapshot should be cached to avoid an infinite loop"),a0=!0)}else{if(k=h(),!a0){var R=h();Hl(k,R)||(r("The result of getSnapshot should be cached to avoid an infinite loop"),a0=!0)}var O=NI();if(O===null)throw new Error("Expected a work-in-progress root. This is a bug in React. Please file an issue.");Jk(O,v_)||AK(C,h,k)}w.memoizedState=k;var U={value:k,getSnapshot:h};return w.queue=U,sI(OK.bind(null,C,U,d),[d]),C.flags|=Jc,Py(Po|Cr,PK.bind(null,C,U,k,h),void 0,null),k}function eI(d,h,m){var C=Gn,w=Ec(),k=h();if(!a0){var I=h();Hl(k,I)||(r("The result of getSnapshot should be cached to avoid an infinite loop"),a0=!0)}var R=w.memoizedState,O=!Hl(R,k);O&&(w.memoizedState=k,Uy());var U=w.queue;if(Fy(OK.bind(null,C,U,d),[d]),U.getSnapshot!==h||O||Bo!==null&&Bo.memoizedState.tag&Po){C.flags|=Jc,Py(Po|Cr,PK.bind(null,C,U,k,h),void 0,null);var G=NI();if(G===null)throw new Error("Expected a work-in-progress root. This is a bug in React. Please file an issue.");Jk(G,v_)||AK(C,h,k)}return k}function AK(d,h,m){d.flags|=Kk;var C={getSnapshot:h,value:m},w=Gn.updateQueue;if(w===null)w=MK(),Gn.updateQueue=w,w.stores=[C];else{var k=w.stores;k===null?w.stores=[C]:k.push(C)}}function PK(d,h,m,C){h.value=m,h.getSnapshot=C,FK(h)&&BK(d)}function OK(d,h,m){var C=function(){FK(h)&&BK(d)};return m(C)}function FK(d){var h=d.getSnapshot,m=d.value;try{var C=h();return!Hl(m,C)}catch{return!0}}function BK(d){var h=tl(d,vi);h!==null&&zo(h,d,vi,Ls)}function tI(d){var h=mu();typeof d=="function"&&(d=d()),h.memoizedState=h.baseState=d;var m={pending:null,interleaved:null,lanes:Qe,dispatch:null,lastRenderedReducer:YF,lastRenderedState:d};h.queue=m;var C=m.dispatch=sme.bind(null,Gn,m);return[h.memoizedState,C]}function e4(d){return QF(YF)}function t4(d){return XF(YF)}function Py(d,h,m,C){var w={tag:d,create:h,destroy:m,deps:C,next:null},k=Gn.updateQueue;if(k===null)k=MK(),Gn.updateQueue=k,k.lastEffect=w.next=w;else{var I=k.lastEffect;if(I===null)k.lastEffect=w.next=w;else{var R=I.next;I.next=w,w.next=R,k.lastEffect=w}}return w}function i4(d){var h=mu();{var m={current:d};return h.memoizedState=m,m}}function iI(d){var h=Ec();return h.memoizedState}function Oy(d,h,m,C){var w=mu(),k=C===void 0?null:C;Gn.flags|=d,w.memoizedState=Py(Po|h,m,void 0,k)}function nI(d,h,m,C){var w=Ec(),k=C===void 0?null:C,I=void 0;if(Fo!==null){var R=Fo.memoizedState;if(I=R.destroy,k!==null){var O=R.deps;if(GF(k,O)){w.memoizedState=Py(h,m,I,k);return}}}Gn.flags|=d,w.memoizedState=Py(Po|h,m,I,k)}function sI(d,h){return(Gn.mode&uu)!==ei?Oy(qk|Jc|JO,Cr,d,h):Oy(Jc|JO,Cr,d,h)}function Fy(d,h){return nI(Jc,Cr,d,h)}function n4(d,h){return Oy(on,pu,d,h)}function oI(d,h){return nI(on,pu,d,h)}function s4(d,h){var m=on;return m|=t_,(Gn.mode&uu)!==ei&&(m|=Ph),Oy(m,Oo,d,h)}function rI(d,h){return nI(on,Oo,d,h)}function WK(d,h){if(typeof h=="function"){var m=h,C=d();return m(C),function(){m(null)}}else if(h!=null){var w=h;w.hasOwnProperty("current")||r("Expected useImperativeHandle() first argument to either be a ref callback or React.createRef() object. Instead received: %s.","an object with keys {"+Object.keys(w).join(", ")+"}");var k=d();return w.current=k,function(){w.current=null}}}function o4(d,h,m){typeof h!="function"&&r("Expected useImperativeHandle() second argument to be a function that creates a handle. Instead received: %s.",h!==null?typeof h:"null");var C=m!=null?m.concat([d]):null,w=on;return w|=t_,(Gn.mode&uu)!==ei&&(w|=Ph),Oy(w,Oo,WK.bind(null,h,d),C)}function aI(d,h,m){typeof h!="function"&&r("Expected useImperativeHandle() second argument to be a function that creates a handle. Instead received: %s.",h!==null?typeof h:"null");var C=m!=null?m.concat([d]):null;return nI(on,Oo,WK.bind(null,h,d),C)}function eme(d,h){}var lI=eme;function r4(d,h){var m=mu(),C=h===void 0?null:h;return m.memoizedState=[d,C],d}function cI(d,h){var m=Ec(),C=h===void 0?null:h,w=m.memoizedState;if(w!==null&&C!==null){var k=w[1];if(GF(C,k))return w[0]}return m.memoizedState=[d,C],d}function a4(d,h){var m=mu(),C=h===void 0?null:h,w=d();return m.memoizedState=[w,C],w}function dI(d,h){var m=Ec(),C=h===void 0?null:h,w=m.memoizedState;if(w!==null&&C!==null){var k=w[1];if(GF(C,k))return w[0]}var I=d();return m.memoizedState=[I,C],I}function l4(d){var h=mu();return h.memoizedState=d,d}function VK(d){var h=Ec(),m=Fo,C=m.memoizedState;return zK(h,C,d)}function HK(d){var h=Ec();if(Fo===null)return h.memoizedState=d,d;var m=Fo.memoizedState;return zK(h,m,d)}function zK(d,h,m){var C=!Wue(v_);if(C){if(!Hl(m,h)){var w=B$();Gn.lanes=Ai(Gn.lanes,w),tS(w),d.baseState=!0}return h}else return d.baseState&&(d.baseState=!1,Uy()),d.memoizedState=m,m}function tme(d,h,m){var C=td();or(Gue(C,Bh)),d(!0);var w=Ry.transition;Ry.transition={};var k=Ry.transition;Ry.transition._updatedFibers=new Set;try{d(!1),h()}finally{if(or(C),Ry.transition=w,w===null&&k._updatedFibers){var I=k._updatedFibers.size;I>10&&s("Detected a large number of updates inside startTransition. If this is due to a subscription please re-write it to use React provided hooks. Otherwise concurrent mode guarantees are off the table."),k._updatedFibers.clear()}}}function c4(){var d=tI(!1),h=d[0],m=d[1],C=tme.bind(null,m),w=mu();return w.memoizedState=C,[h,C]}function UK(){var d=e4(),h=d[0],m=Ec(),C=m.memoizedState;return[h,C]}function $K(){var d=t4(),h=d[0],m=Ec(),C=m.memoizedState;return[h,C]}var jK=!1;function ime(){return jK}function d4(){var d=mu(),h=NI(),m=h.identifierPrefix,C;if(br()){var w=bpe();C=":"+m+"R"+w;var k=Ay++;k>0&&(C+="H"+k.toString(32)),C+=":"}else{var I=Qpe++;C=":"+m+"r"+I.toString(32)+":"}return d.memoizedState=C,C}function uI(){var d=Ec(),h=d.memoizedState;return h}function nme(d,h,m){typeof arguments[3]=="function"&&r("State updates from the useState() and useReducer() Hooks don't support the second callback argument. To execute a side effect after rendering, declare it in the component body with useEffect().");var C=Zg(d),w={lane:C,action:m,hasEagerState:!1,eagerState:null,next:null};if(KK(d))qK(h,w);else{var k=wK(d,h,w,C);if(k!==null){var I=Na();zo(k,d,C,I),GK(k,h,C)}}YK(d,C)}function sme(d,h,m){typeof arguments[3]=="function"&&r("State updates from the useState() and useReducer() Hooks don't support the second callback argument. To execute a side effect after rendering, declare it in the component body with useEffect().");var C=Zg(d),w={lane:C,action:m,hasEagerState:!1,eagerState:null,next:null};if(KK(d))qK(h,w);else{var k=d.alternate;if(d.lanes===Qe&&(k===null||k.lanes===Qe)){var I=h.lastRenderedReducer;if(I!==null){var R;R=kt.current,kt.current=rd;try{var O=h.lastRenderedState,U=I(O,m);if(w.hasEagerState=!0,w.eagerState=U,Hl(U,O)){zpe(d,h,w,C);return}}catch{}finally{kt.current=R}}}var G=wK(d,h,w,C);if(G!==null){var ce=Na();zo(G,d,C,ce),GK(G,h,C)}}YK(d,C)}function KK(d){var h=d.alternate;return d===Gn||h!==null&&h===Gn}function qK(d,h){My=JE=!0;var m=d.pending;m===null?h.next=h:(h.next=m.next,m.next=h),d.pending=h}function GK(d,h,m){if(F$(m)){var C=h.lanes;C=W$(C,d.pendingLanes);var w=Ai(C,m);h.lanes=w,I2(d,w)}}function YK(d,h,m){s2(d,h)}var hI={readContext:Lo,useCallback:na,useContext:na,useEffect:na,useImperativeHandle:na,useInsertionEffect:na,useLayoutEffect:na,useMemo:na,useReducer:na,useRef:na,useState:na,useDebugValue:na,useDeferredValue:na,useTransition:na,useMutableSource:na,useSyncExternalStore:na,useId:na,unstable_isNewReconciler:Le},ZK=null,QK=null,XK=null,JK=null,_u=null,rd=null,fI=null;{var u4=function(){r("Context can only be read while React is rendering. In classes, you can read it in the render method or getDerivedStateFromProps. In function components, you can read it directly in the function body, but not inside Hooks like useReducer() or useMemo().")},bi=function(){r("Do not call Hooks inside useEffect(...), useMemo(...), or other built-in Hooks. You can only call Hooks at the top level of your React function. For more information, see https://reactjs.org/link/rules-of-hooks")};ZK={readContext:function(d){return Lo(d)},useCallback:function(d,h){return $e="useCallback",Mn(),l0(h),r4(d,h)},useContext:function(d){return $e="useContext",Mn(),Lo(d)},useEffect:function(d,h){return $e="useEffect",Mn(),l0(h),sI(d,h)},useImperativeHandle:function(d,h,m){return $e="useImperativeHandle",Mn(),l0(m),o4(d,h,m)},useInsertionEffect:function(d,h){return $e="useInsertionEffect",Mn(),l0(h),n4(d,h)},useLayoutEffect:function(d,h){return $e="useLayoutEffect",Mn(),l0(h),s4(d,h)},useMemo:function(d,h){$e="useMemo",Mn(),l0(h);var m=kt.current;kt.current=_u;try{return a4(d,h)}finally{kt.current=m}},useReducer:function(d,h,m){$e="useReducer",Mn();var C=kt.current;kt.current=_u;try{return ZF(d,h,m)}finally{kt.current=C}},useRef:function(d){return $e="useRef",Mn(),i4(d)},useState:function(d){$e="useState",Mn();var h=kt.current;kt.current=_u;try{return tI(d)}finally{kt.current=h}},useDebugValue:function(d,h){return $e="useDebugValue",Mn(),void 0},useDeferredValue:function(d){return $e="useDeferredValue",Mn(),l4(d)},useTransition:function(){return $e="useTransition",Mn(),c4()},useMutableSource:function(d,h,m){return $e="useMutableSource",Mn(),void 0},useSyncExternalStore:function(d,h,m){return $e="useSyncExternalStore",Mn(),JF(d,h,m)},useId:function(){return $e="useId",Mn(),d4()},unstable_isNewReconciler:Le},QK={readContext:function(d){return Lo(d)},useCallback:function(d,h){return $e="useCallback",mt(),r4(d,h)},useContext:function(d){return $e="useContext",mt(),Lo(d)},useEffect:function(d,h){return $e="useEffect",mt(),sI(d,h)},useImperativeHandle:function(d,h,m){return $e="useImperativeHandle",mt(),o4(d,h,m)},useInsertionEffect:function(d,h){return $e="useInsertionEffect",mt(),n4(d,h)},useLayoutEffect:function(d,h){return $e="useLayoutEffect",mt(),s4(d,h)},useMemo:function(d,h){$e="useMemo",mt();var m=kt.current;kt.current=_u;try{return a4(d,h)}finally{kt.current=m}},useReducer:function(d,h,m){$e="useReducer",mt();var C=kt.current;kt.current=_u;try{return ZF(d,h,m)}finally{kt.current=C}},useRef:function(d){return $e="useRef",mt(),i4(d)},useState:function(d){$e="useState",mt();var h=kt.current;kt.current=_u;try{return tI(d)}finally{kt.current=h}},useDebugValue:function(d,h){return $e="useDebugValue",mt(),void 0},useDeferredValue:function(d){return $e="useDeferredValue",mt(),l4(d)},useTransition:function(){return $e="useTransition",mt(),c4()},useMutableSource:function(d,h,m){return $e="useMutableSource",mt(),void 0},useSyncExternalStore:function(d,h,m){return $e="useSyncExternalStore",mt(),JF(d,h,m)},useId:function(){return $e="useId",mt(),d4()},unstable_isNewReconciler:Le},XK={readContext:function(d){return Lo(d)},useCallback:function(d,h){return $e="useCallback",mt(),cI(d,h)},useContext:function(d){return $e="useContext",mt(),Lo(d)},useEffect:function(d,h){return $e="useEffect",mt(),Fy(d,h)},useImperativeHandle:function(d,h,m){return $e="useImperativeHandle",mt(),aI(d,h,m)},useInsertionEffect:function(d,h){return $e="useInsertionEffect",mt(),oI(d,h)},useLayoutEffect:function(d,h){return $e="useLayoutEffect",mt(),rI(d,h)},useMemo:function(d,h){$e="useMemo",mt();var m=kt.current;kt.current=rd;try{return dI(d,h)}finally{kt.current=m}},useReducer:function(d,h,m){$e="useReducer",mt();var C=kt.current;kt.current=rd;try{return QF(d,h,m)}finally{kt.current=C}},useRef:function(d){return $e="useRef",mt(),iI()},useState:function(d){$e="useState",mt();var h=kt.current;kt.current=rd;try{return e4(d)}finally{kt.current=h}},useDebugValue:function(d,h){return $e="useDebugValue",mt(),lI()},useDeferredValue:function(d){return $e="useDeferredValue",mt(),VK(d)},useTransition:function(){return $e="useTransition",mt(),UK()},useMutableSource:function(d,h,m){return $e="useMutableSource",mt(),void 0},useSyncExternalStore:function(d,h,m){return $e="useSyncExternalStore",mt(),eI(d,h)},useId:function(){return $e="useId",mt(),uI()},unstable_isNewReconciler:Le},JK={readContext:function(d){return Lo(d)},useCallback:function(d,h){return $e="useCallback",mt(),cI(d,h)},useContext:function(d){return $e="useContext",mt(),Lo(d)},useEffect:function(d,h){return $e="useEffect",mt(),Fy(d,h)},useImperativeHandle:function(d,h,m){return $e="useImperativeHandle",mt(),aI(d,h,m)},useInsertionEffect:function(d,h){return $e="useInsertionEffect",mt(),oI(d,h)},useLayoutEffect:function(d,h){return $e="useLayoutEffect",mt(),rI(d,h)},useMemo:function(d,h){$e="useMemo",mt();var m=kt.current;kt.current=fI;try{return dI(d,h)}finally{kt.current=m}},useReducer:function(d,h,m){$e="useReducer",mt();var C=kt.current;kt.current=fI;try{return XF(d,h,m)}finally{kt.current=C}},useRef:function(d){return $e="useRef",mt(),iI()},useState:function(d){$e="useState",mt();var h=kt.current;kt.current=fI;try{return t4(d)}finally{kt.current=h}},useDebugValue:function(d,h){return $e="useDebugValue",mt(),lI()},useDeferredValue:function(d){return $e="useDeferredValue",mt(),HK(d)},useTransition:function(){return $e="useTransition",mt(),$K()},useMutableSource:function(d,h,m){return $e="useMutableSource",mt(),void 0},useSyncExternalStore:function(d,h,m){return $e="useSyncExternalStore",mt(),eI(d,h)},useId:function(){return $e="useId",mt(),uI()},unstable_isNewReconciler:Le},_u={readContext:function(d){return u4(),Lo(d)},useCallback:function(d,h){return $e="useCallback",bi(),Mn(),r4(d,h)},useContext:function(d){return $e="useContext",bi(),Mn(),Lo(d)},useEffect:function(d,h){return $e="useEffect",bi(),Mn(),sI(d,h)},useImperativeHandle:function(d,h,m){return $e="useImperativeHandle",bi(),Mn(),o4(d,h,m)},useInsertionEffect:function(d,h){return $e="useInsertionEffect",bi(),Mn(),n4(d,h)},useLayoutEffect:function(d,h){return $e="useLayoutEffect",bi(),Mn(),s4(d,h)},useMemo:function(d,h){$e="useMemo",bi(),Mn();var m=kt.current;kt.current=_u;try{return a4(d,h)}finally{kt.current=m}},useReducer:function(d,h,m){$e="useReducer",bi(),Mn();var C=kt.current;kt.current=_u;try{return ZF(d,h,m)}finally{kt.current=C}},useRef:function(d){return $e="useRef",bi(),Mn(),i4(d)},useState:function(d){$e="useState",bi(),Mn();var h=kt.current;kt.current=_u;try{return tI(d)}finally{kt.current=h}},useDebugValue:function(d,h){return $e="useDebugValue",bi(),Mn(),void 0},useDeferredValue:function(d){return $e="useDeferredValue",bi(),Mn(),l4(d)},useTransition:function(){return $e="useTransition",bi(),Mn(),c4()},useMutableSource:function(d,h,m){return $e="useMutableSource",bi(),Mn(),void 0},useSyncExternalStore:function(d,h,m){return $e="useSyncExternalStore",bi(),Mn(),JF(d,h,m)},useId:function(){return $e="useId",bi(),Mn(),d4()},unstable_isNewReconciler:Le},rd={readContext:function(d){return u4(),Lo(d)},useCallback:function(d,h){return $e="useCallback",bi(),mt(),cI(d,h)},useContext:function(d){return $e="useContext",bi(),mt(),Lo(d)},useEffect:function(d,h){return $e="useEffect",bi(),mt(),Fy(d,h)},useImperativeHandle:function(d,h,m){return $e="useImperativeHandle",bi(),mt(),aI(d,h,m)},useInsertionEffect:function(d,h){return $e="useInsertionEffect",bi(),mt(),oI(d,h)},useLayoutEffect:function(d,h){return $e="useLayoutEffect",bi(),mt(),rI(d,h)},useMemo:function(d,h){$e="useMemo",bi(),mt();var m=kt.current;kt.current=rd;try{return dI(d,h)}finally{kt.current=m}},useReducer:function(d,h,m){$e="useReducer",bi(),mt();var C=kt.current;kt.current=rd;try{return QF(d,h,m)}finally{kt.current=C}},useRef:function(d){return $e="useRef",bi(),mt(),iI()},useState:function(d){$e="useState",bi(),mt();var h=kt.current;kt.current=rd;try{return e4(d)}finally{kt.current=h}},useDebugValue:function(d,h){return $e="useDebugValue",bi(),mt(),lI()},useDeferredValue:function(d){return $e="useDeferredValue",bi(),mt(),VK(d)},useTransition:function(){return $e="useTransition",bi(),mt(),UK()},useMutableSource:function(d,h,m){return $e="useMutableSource",bi(),mt(),void 0},useSyncExternalStore:function(d,h,m){return $e="useSyncExternalStore",bi(),mt(),eI(d,h)},useId:function(){return $e="useId",bi(),mt(),uI()},unstable_isNewReconciler:Le},fI={readContext:function(d){return u4(),Lo(d)},useCallback:function(d,h){return $e="useCallback",bi(),mt(),cI(d,h)},useContext:function(d){return $e="useContext",bi(),mt(),Lo(d)},useEffect:function(d,h){return $e="useEffect",bi(),mt(),Fy(d,h)},useImperativeHandle:function(d,h,m){return $e="useImperativeHandle",bi(),mt(),aI(d,h,m)},useInsertionEffect:function(d,h){return $e="useInsertionEffect",bi(),mt(),oI(d,h)},useLayoutEffect:function(d,h){return $e="useLayoutEffect",bi(),mt(),rI(d,h)},useMemo:function(d,h){$e="useMemo",bi(),mt();var m=kt.current;kt.current=rd;try{return dI(d,h)}finally{kt.current=m}},useReducer:function(d,h,m){$e="useReducer",bi(),mt();var C=kt.current;kt.current=rd;try{return XF(d,h,m)}finally{kt.current=C}},useRef:function(d){return $e="useRef",bi(),mt(),iI()},useState:function(d){$e="useState",bi(),mt();var h=kt.current;kt.current=rd;try{return t4(d)}finally{kt.current=h}},useDebugValue:function(d,h){return $e="useDebugValue",bi(),mt(),lI()},useDeferredValue:function(d){return $e="useDeferredValue",bi(),mt(),HK(d)},useTransition:function(){return $e="useTransition",bi(),mt(),$K()},useMutableSource:function(d,h,m){return $e="useMutableSource",bi(),mt(),void 0},useSyncExternalStore:function(d,h,m){return $e="useSyncExternalStore",bi(),mt(),eI(d,h)},useId:function(){return $e="useId",bi(),mt(),uI()},unstable_isNewReconciler:Le}}var Kg=e.unstable_now,eq=0,gI=-1,By=-1,pI=-1,h4=!1,mI=!1;function tq(){return h4}function ome(){mI=!0}function rme(){h4=!1,mI=!1}function ame(){h4=mI,mI=!1}function iq(){return eq}function nq(){eq=Kg()}function f4(d){By=Kg(),d.actualStartTime<0&&(d.actualStartTime=Kg())}function sq(d){By=-1}function _I(d,h){if(By>=0){var m=Kg()-By;d.actualDuration+=m,h&&(d.selfBaseDuration=m),By=-1}}function vu(d){if(gI>=0){var h=Kg()-gI;gI=-1;for(var m=d.return;m!==null;){switch(m.tag){case f:var C=m.stateNode;C.effectDuration+=h;return;case D:var w=m.stateNode;w.effectDuration+=h;return}m=m.return}}}function g4(d){if(pI>=0){var h=Kg()-pI;pI=-1;for(var m=d.return;m!==null;){switch(m.tag){case f:var C=m.stateNode;C!==null&&(C.passiveEffectDuration+=h);return;case D:var w=m.stateNode;w!==null&&(w.passiveEffectDuration+=h);return}m=m.return}}}function bu(){gI=Kg()}function p4(){pI=Kg()}function m4(d){for(var h=d.child;h;)d.actualDuration+=h.actualDuration,h=h.sibling}function ad(d,h){if(d&&d.defaultProps){var m=Ki({},h),C=d.defaultProps;for(var w in C)m[w]===void 0&&(m[w]=C[w]);return m}return h}var _4={},v4,b4,C4,w4,y4,oq,vI,S4,L4,x4,Wy;{v4=new Set,b4=new Set,C4=new Set,w4=new Set,S4=new Set,y4=new Set,L4=new Set,x4=new Set,Wy=new Set;var rq=new Set;vI=function(d,h){if(!(d===null||typeof d=="function")){var m=h+"_"+d;rq.has(m)||(rq.add(m),r("%s(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",h,d))}},oq=function(d,h){if(h===void 0){var m=hn(d)||"Component";y4.has(m)||(y4.add(m),r("%s.getDerivedStateFromProps(): A valid state object (or null) must be returned. You have returned undefined.",m))}},Object.defineProperty(_4,"_processChildContext",{enumerable:!1,value:function(){throw new Error("_processChildContext is not available in React 16+. This likely means you have multiple copies of React and are attempting to nest a React 15 tree inside a React 16 tree using unstable_renderSubtreeIntoContainer, which isn't supported. Try to make sure you have only one copy of React (and ideally, switch to ReactDOM.createPortal).")}}),Object.freeze(_4)}function D4(d,h,m,C){var w=d.memoizedState,k=m(C,w);{if(d.mode&to){nr(!0);try{k=m(C,w)}finally{nr(!1)}}oq(h,k)}var I=k==null?w:Ki({},w,k);if(d.memoizedState=I,d.lanes===Qe){var R=d.updateQueue;R.baseState=I}}var k4={isMounted:Xde,enqueueSetState:function(d,h,m){var C=Rb(d),w=Na(),k=Zg(C),I=jh(w,k);I.payload=h,m!=null&&(vI(m,"setState"),I.callback=m);var R=zg(C,I,k);R!==null&&(zo(R,C,k,w),qE(R,C,k)),s2(C,k)},enqueueReplaceState:function(d,h,m){var C=Rb(d),w=Na(),k=Zg(C),I=jh(w,k);I.tag=SK,I.payload=h,m!=null&&(vI(m,"replaceState"),I.callback=m);var R=zg(C,I,k);R!==null&&(zo(R,C,k,w),qE(R,C,k)),s2(C,k)},enqueueForceUpdate:function(d,h){var m=Rb(d),C=Na(),w=Zg(m),k=jh(C,w);k.tag=$E,h!=null&&(vI(h,"forceUpdate"),k.callback=h);var I=zg(m,k,w);I!==null&&(zo(I,m,w,C),qE(I,m,w)),Iue(m,w)}};function aq(d,h,m,C,w,k,I){var R=d.stateNode;if(typeof R.shouldComponentUpdate=="function"){var O=R.shouldComponentUpdate(C,k,I);{if(d.mode&to){nr(!0);try{O=R.shouldComponentUpdate(C,k,I)}finally{nr(!1)}}O===void 0&&r("%s.shouldComponentUpdate(): Returned undefined instead of a boolean value. Make sure to return true or false.",hn(h)||"Component")}return O}return h.prototype&&h.prototype.isPureReactComponent?!ay(m,C)||!ay(w,k):!0}function lme(d,h,m){var C=d.stateNode;{var w=hn(h)||"Component",k=C.render;k||(h.prototype&&typeof h.prototype.render=="function"?r("%s(...): No `render` method found on the returned component instance: did you accidentally return an object from the constructor?",w):r("%s(...): No `render` method found on the returned component instance: you may have forgotten to define `render`.",w)),C.getInitialState&&!C.getInitialState.isReactClassApproved&&!C.state&&r("getInitialState was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Did you mean to define a state property instead?",w),C.getDefaultProps&&!C.getDefaultProps.isReactClassApproved&&r("getDefaultProps was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Use a static property to define defaultProps instead.",w),C.propTypes&&r("propTypes was defined as an instance property on %s. Use a static property to define propTypes instead.",w),C.contextType&&r("contextType was defined as an instance property on %s. Use a static property to define contextType instead.",w),h.childContextTypes&&!Wy.has(h)&&(d.mode&to)===ei&&(Wy.add(h),r(`%s uses the legacy childContextTypes API which is no longer supported and will be removed in the next major release. Use React.createContext() instead

.Learn more about this warning here: https://reactjs.org/link/legacy-context`,w)),h.contextTypes&&!Wy.has(h)&&(d.mode&to)===ei&&(Wy.add(h),r(`%s uses the legacy contextTypes API which is no longer supported and will be removed in the next major release. Use React.createContext() with static contextType instead.

Learn more about this warning here: https://reactjs.org/link/legacy-context`,w)),C.contextTypes&&r("contextTypes was defined as an instance property on %s. Use a static property to define contextTypes instead.",w),h.contextType&&h.contextTypes&&!L4.has(h)&&(L4.add(h),r("%s declares both contextTypes and contextType static properties. The legacy contextTypes property will be ignored.",w)),typeof C.componentShouldUpdate=="function"&&r("%s has a method called componentShouldUpdate(). Did you mean shouldComponentUpdate()? The name is phrased as a question because the function is expected to return a value.",w),h.prototype&&h.prototype.isPureReactComponent&&typeof C.shouldComponentUpdate<"u"&&r("%s has a method called shouldComponentUpdate(). shouldComponentUpdate should not be used when extending React.PureComponent. Please extend React.Component if shouldComponentUpdate is used.",hn(h)||"A pure component"),typeof C.componentDidUnmount=="function"&&r("%s has a method called componentDidUnmount(). But there is no such lifecycle method. Did you mean componentWillUnmount()?",w),typeof C.componentDidReceiveProps=="function"&&r("%s has a method called componentDidReceiveProps(). But there is no such lifecycle method. If you meant to update the state in response to changing props, use componentWillReceiveProps(). If you meant to fetch data or run side-effects or mutations after React has updated the UI, use componentDidUpdate().",w),typeof C.componentWillRecieveProps=="function"&&r("%s has a method called componentWillRecieveProps(). Did you mean componentWillReceiveProps()?",w),typeof C.UNSAFE_componentWillRecieveProps=="function"&&r("%s has a method called UNSAFE_componentWillRecieveProps(). Did you mean UNSAFE_componentWillReceiveProps()?",w);var I=C.props!==m;C.props!==void 0&&I&&r("%s(...): When calling super() in `%s`, make sure to pass up the same props that your component's constructor was passed.",w,w),C.defaultProps&&r("Setting defaultProps as an instance property on %s is not supported and will be ignored. Instead, define defaultProps as a static property on %s.",w,w),typeof C.getSnapshotBeforeUpdate=="function"&&typeof C.componentDidUpdate!="function"&&!C4.has(h)&&(C4.add(h),r("%s: getSnapshotBeforeUpdate() should be used with componentDidUpdate(). This component defines getSnapshotBeforeUpdate() only.",hn(h))),typeof C.getDerivedStateFromProps=="function"&&r("%s: getDerivedStateFromProps() is defined as an instance method and will be ignored. Instead, declare it as a static method.",w),typeof C.getDerivedStateFromError=="function"&&r("%s: getDerivedStateFromError() is defined as an instance method and will be ignored. Instead, declare it as a static method.",w),typeof h.getSnapshotBeforeUpdate=="function"&&r("%s: getSnapshotBeforeUpdate() is defined as a static method and will be ignored. Instead, declare it as an instance method.",w);var R=C.state;R&&(typeof R!="object"||In(R))&&r("%s.state: must be set to an object or null",w),typeof C.getChildContext=="function"&&typeof h.childContextTypes!="object"&&r("%s.getChildContext(): childContextTypes must be defined in order to use getChildContext().",w)}}function lq(d,h){h.updater=k4,d.stateNode=h,qde(h,d),h._reactInternalInstance=_4}function cq(d,h,m){var C=!1,w=zl,k=zl,I=h.contextType;if("contextType"in h){var R=I===null||I!==void 0&&I.$$typeof===Wi&&I._context===void 0;if(!R&&!x4.has(h)){x4.add(h);var O="";I===void 0?O=" However, it is set to undefined. This can be caused by a typo or by mixing up named and default imports. This can also happen due to a circular dependency, so try moving the createContext() call to a separate file.":typeof I!="object"?O=" However, it is set to a "+typeof I+".":I.$$typeof===qt?O=" Did you accidentally pass the Context.Provider instead?":I._context!==void 0?O=" Did you accidentally pass the Context.Consumer instead?":O=" However, it is set to an object with keys {"+Object.keys(I).join(", ")+"}.",r("%s defines an invalid contextType. contextType should point to the Context object returned by React.createContext().%s",hn(h)||"Component",O)}}if(typeof I=="object"&&I!==null)k=Lo(I);else{w=Zb(d,h,!0);var U=h.contextTypes;C=U!=null,k=C?Qb(d,w):zl}var G=new h(m,k);if(d.mode&to){nr(!0);try{G=new h(m,k)}finally{nr(!1)}}var ce=d.memoizedState=G.state!==null&&G.state!==void 0?G.state:null;lq(d,G);{if(typeof h.getDerivedStateFromProps=="function"&&ce===null){var le=hn(h)||"Component";b4.has(le)||(b4.add(le),r("`%s` uses `getDerivedStateFromProps` but its initial state is %s. This is not recommended. Instead, define the initial state by assigning an object to `this.state` in the constructor of `%s`. This ensures that `getDerivedStateFromProps` arguments have a consistent shape.",le,G.state===null?"null":"undefined",le))}if(typeof h.getDerivedStateFromProps=="function"||typeof G.getSnapshotBeforeUpdate=="function"){var we=null,De=null,We=null;if(typeof G.componentWillMount=="function"&&G.componentWillMount.__suppressDeprecationWarning!==!0?we="componentWillMount":typeof G.UNSAFE_componentWillMount=="function"&&(we="UNSAFE_componentWillMount"),typeof G.componentWillReceiveProps=="function"&&G.componentWillReceiveProps.__suppressDeprecationWarning!==!0?De="componentWillReceiveProps":typeof G.UNSAFE_componentWillReceiveProps=="function"&&(De="UNSAFE_componentWillReceiveProps"),typeof G.componentWillUpdate=="function"&&G.componentWillUpdate.__suppressDeprecationWarning!==!0?We="componentWillUpdate":typeof G.UNSAFE_componentWillUpdate=="function"&&(We="UNSAFE_componentWillUpdate"),we!==null||De!==null||We!==null){var yt=hn(h)||"Component",Gt=typeof h.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";w4.has(yt)||(w4.add(yt),r(`Unsafe legacy lifecycles will not be called for components using new component APIs.

%s uses %s but also contains the following legacy lifecycles:%s%s%s

The above lifecycles should be removed. Learn more about this warning here:
https://reactjs.org/link/unsafe-component-lifecycles`,yt,Gt,we!==null?`
  `+we:"",De!==null?`
  `+De:"",We!==null?`
  `+We:""))}}}return C&&Xj(d,w,k),G}function cme(d,h){var m=h.state;typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),m!==h.state&&(r("%s.componentWillMount(): Assigning directly to this.state is deprecated (except inside a component's constructor). Use setState instead.",Ei(d)||"Component"),k4.enqueueReplaceState(h,h.state,null))}function dq(d,h,m,C){var w=h.state;if(typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(m,C),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(m,C),h.state!==w){{var k=Ei(d)||"Component";v4.has(k)||(v4.add(k),r("%s.componentWillReceiveProps(): Assigning directly to this.state is deprecated (except inside a component's constructor). Use setState instead.",k))}k4.enqueueReplaceState(h,h.state,null)}}function E4(d,h,m,C){lme(d,h,m);var w=d.stateNode;w.props=m,w.state=d.memoizedState,w.refs={},FF(d);var k=h.contextType;if(typeof k=="object"&&k!==null)w.context=Lo(k);else{var I=Zb(d,h,!0);w.context=Qb(d,I)}{if(w.state===m){var R=hn(h)||"Component";S4.has(R)||(S4.add(R),r("%s: It is not recommended to assign props directly to state because updates to props won't be reflected in state. In most cases, it is better to use props directly.",R))}d.mode&to&&sd.recordLegacyContextWarning(d,w),sd.recordUnsafeLifecycleWarnings(d,w)}w.state=d.memoizedState;var O=h.getDerivedStateFromProps;if(typeof O=="function"&&(D4(d,h,O,m),w.state=d.memoizedState),typeof h.getDerivedStateFromProps!="function"&&typeof w.getSnapshotBeforeUpdate!="function"&&(typeof w.UNSAFE_componentWillMount=="function"||typeof w.componentWillMount=="function")&&(cme(d,w),GE(d,m,w,C),w.state=d.memoizedState),typeof w.componentDidMount=="function"){var U=on;U|=t_,(d.mode&uu)!==ei&&(U|=Ph),d.flags|=U}}function dme(d,h,m,C){var w=d.stateNode,k=d.memoizedProps;w.props=k;var I=w.context,R=h.contextType,O=zl;if(typeof R=="object"&&R!==null)O=Lo(R);else{var U=Zb(d,h,!0);O=Qb(d,U)}var G=h.getDerivedStateFromProps,ce=typeof G=="function"||typeof w.getSnapshotBeforeUpdate=="function";!ce&&(typeof w.UNSAFE_componentWillReceiveProps=="function"||typeof w.componentWillReceiveProps=="function")&&(k!==m||I!==O)&&dq(d,w,m,O),xK();var le=d.memoizedState,we=w.state=le;if(GE(d,m,w,C),we=d.memoizedState,k===m&&le===we&&!IE()&&!YE()){if(typeof w.componentDidMount=="function"){var De=on;De|=t_,(d.mode&uu)!==ei&&(De|=Ph),d.flags|=De}return!1}typeof G=="function"&&(D4(d,h,G,m),we=d.memoizedState);var We=YE()||aq(d,h,k,m,le,we,O);if(We){if(!ce&&(typeof w.UNSAFE_componentWillMount=="function"||typeof w.componentWillMount=="function")&&(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"){var yt=on;yt|=t_,(d.mode&uu)!==ei&&(yt|=Ph),d.flags|=yt}}else{if(typeof w.componentDidMount=="function"){var Gt=on;Gt|=t_,(d.mode&uu)!==ei&&(Gt|=Ph),d.flags|=Gt}d.memoizedProps=m,d.memoizedState=we}return w.props=m,w.state=we,w.context=O,We}function ume(d,h,m,C,w){var k=h.stateNode;LK(d,h);var I=h.memoizedProps,R=h.type===h.elementType?I:ad(h.type,I);k.props=R;var O=h.pendingProps,U=k.context,G=m.contextType,ce=zl;if(typeof G=="object"&&G!==null)ce=Lo(G);else{var le=Zb(h,m,!0);ce=Qb(h,le)}var we=m.getDerivedStateFromProps,De=typeof we=="function"||typeof k.getSnapshotBeforeUpdate=="function";!De&&(typeof k.UNSAFE_componentWillReceiveProps=="function"||typeof k.componentWillReceiveProps=="function")&&(I!==O||U!==ce)&&dq(h,k,C,ce),xK();var We=h.memoizedState,yt=k.state=We;if(GE(h,C,k,w),yt=h.memoizedState,I===O&&We===yt&&!IE()&&!YE()&&!be)return typeof k.componentDidUpdate=="function"&&(I!==d.memoizedProps||We!==d.memoizedState)&&(h.flags|=on),typeof k.getSnapshotBeforeUpdate=="function"&&(I!==d.memoizedProps||We!==d.memoizedState)&&(h.flags|=Jm),!1;typeof we=="function"&&(D4(h,m,we,C),yt=h.memoizedState);var Gt=YE()||aq(h,m,R,C,We,yt,ce)||be;return Gt?(!De&&(typeof k.UNSAFE_componentWillUpdate=="function"||typeof k.componentWillUpdate=="function")&&(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(C,yt,ce),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(C,yt,ce)),typeof k.componentDidUpdate=="function"&&(h.flags|=on),typeof k.getSnapshotBeforeUpdate=="function"&&(h.flags|=Jm)):(typeof k.componentDidUpdate=="function"&&(I!==d.memoizedProps||We!==d.memoizedState)&&(h.flags|=on),typeof k.getSnapshotBeforeUpdate=="function"&&(I!==d.memoizedProps||We!==d.memoizedState)&&(h.flags|=Jm),h.memoizedProps=C,h.memoizedState=yt),k.props=C,k.state=yt,k.context=ce,Gt}function b_(d,h){return{value:d,source:h,stack:Dw(h),digest:null}}function I4(d,h,m){return{value:d,source:null,stack:m??null,digest:h??null}}function hme(d,h){return!0}function T4(d,h){try{var m=hme(d,h);if(m===!1)return;var C=h.value,w=h.source,k=h.stack,I=k!==null?k:"";if(C!=null&&C._suppressLogging){if(d.tag===c)return;console.error(C)}var R=w?Ei(w):null,O=R?"The above error occurred in the <"+R+"> component:":"The above error occurred in one of your React components:",U;if(d.tag===f)U=`Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.`;else{var G=Ei(d)||"Anonymous";U="React will try to recreate this component tree from scratch "+("using the error boundary you provided, "+G+".")}var ce=O+`
`+I+`

`+(""+U);console.error(ce)}catch(le){setTimeout(function(){throw le})}}var fme=typeof WeakMap=="function"?WeakMap:Map;function uq(d,h,m){var C=jh(Ls,m);C.tag=PF,C.payload={element:null};var w=h.value;return C.callback=function(){ove(w),T4(d,h)},C}function N4(d,h,m){var C=jh(Ls,m);C.tag=PF;var w=d.type.getDerivedStateFromError;if(typeof w=="function"){var k=h.value;C.payload=function(){return w(k)},C.callback=function(){yG(d),T4(d,h)}}var I=d.stateNode;return I!==null&&typeof I.componentDidCatch=="function"&&(C.callback=function(){yG(d),T4(d,h),typeof w!="function"&&nve(this);var O=h.value,U=h.stack;this.componentDidCatch(O,{componentStack:U!==null?U:""}),typeof w!="function"&&(Bl(d.lanes,vi)||r("%s: Error boundaries should implement getDerivedStateFromError(). In that method, return a state update to display an error message or fallback UI.",Ei(d)||"Unknown"))}),C}function hq(d,h,m){var C=d.pingCache,w;if(C===null?(C=d.pingCache=new fme,w=new Set,C.set(h,w)):(w=C.get(h),w===void 0&&(w=new Set,C.set(h,w))),!w.has(m)){w.add(m);var k=rve.bind(null,d,h,m);ed&&iS(d,m),h.then(k,k)}}function gme(d,h,m,C){var w=d.updateQueue;if(w===null){var k=new Set;k.add(m),d.updateQueue=k}else w.add(m)}function pme(d,h){var m=d.tag;if((d.mode&Zi)===ei&&(m===l||m===x||m===M)){var C=d.alternate;C?(d.updateQueue=C.updateQueue,d.memoizedState=C.memoizedState,d.lanes=C.lanes):(d.updateQueue=null,d.memoizedState=null)}}function fq(d){var h=d;do{if(h.tag===E&&Ype(h))return h;h=h.return}while(h!==null);return null}function gq(d,h,m,C,w){if((d.mode&Zi)===ei){if(d===h)d.flags|=Ea;else{if(d.flags|=Tn,m.flags|=QO,m.flags&=~(Gde|Bw),m.tag===c){var k=m.alternate;if(k===null)m.tag=H;else{var I=jh(Ls,vi);I.tag=$E,zg(m,I,vi)}}m.lanes=Ai(m.lanes,vi)}return d}return d.flags|=Ea,d.lanes=w,d}function mme(d,h,m,C,w){if(m.flags|=Bw,ed&&iS(d,w),C!==null&&typeof C=="object"&&typeof C.then=="function"){var k=C;pme(m),br()&&m.mode&Zi&&oK();var I=fq(h);if(I!==null){I.flags&=~Mh,gq(I,h,m,d,w),I.mode&Zi&&hq(d,k,w),gme(I,d,k);return}else{if(!Bue(w)){hq(d,k,w),d5();return}var R=new Error("A component suspended while responding to synchronous input. This will cause the UI to be replaced with a loading indicator. To fix, updates that suspend should be wrapped with startTransition.");C=R}}else if(br()&&m.mode&Zi){oK();var O=fq(h);if(O!==null){(O.flags&Ea)===ri&&(O.flags|=Mh),gq(O,h,m,d,w),SF(b_(C,m));return}}C=b_(C,m),Y_e(C);var U=h;do{switch(U.tag){case f:{var G=C;U.flags|=Ea;var ce=Kw(w);U.lanes=Ai(U.lanes,ce);var le=uq(U,G,ce);BF(U,le);return}case c:var we=C,De=U.type,We=U.stateNode;if((U.flags&Tn)===ri&&(typeof De.getDerivedStateFromError=="function"||We!==null&&typeof We.componentDidCatch=="function"&&!fG(We))){U.flags|=Ea;var yt=Kw(w);U.lanes=Ai(U.lanes,yt);var Gt=N4(U,we,yt);BF(U,Gt);return}break}U=U.return}while(U!==null)}function _me(){return null}var Vy=t.ReactCurrentOwner,ld=!1,R4,Hy,M4,A4,P4,C_,O4,bI,zy;R4={},Hy={},M4={},A4={},P4={},C_=!1,O4={},bI={},zy={};function Ia(d,h,m,C){d===null?h.child=_K(h,null,m,C):h.child=t0(h,d.child,m,C)}function vme(d,h,m,C){h.child=t0(h,d.child,null,C),h.child=t0(h,null,m,C)}function pq(d,h,m,C,w){if(h.type!==h.elementType){var k=m.propTypes;k&&id(k,C,"prop",hn(m))}var I=m.render,R=h.ref,O,U;n0(h,w),Vw(h);{if(Vy.current=h,Ol(!0),O=c0(d,h,I,C,R,w),U=d0(),h.mode&to){nr(!0);try{O=c0(d,h,I,C,R,w),U=d0()}finally{nr(!1)}}Ol(!1)}return Ob(),d!==null&&!ld?(NK(d,h,w),Kh(d,h,w)):(br()&&U&&_F(h),h.flags|=Mb,Ia(d,h,O,w),h.child)}function mq(d,h,m,C,w){if(d===null){var k=m.type;if(Sve(k)&&m.compare===null&&m.defaultProps===void 0){var I=k;return I=v0(k),h.tag=M,h.type=I,W4(h,k),_q(d,h,I,C,w)}{var R=k.propTypes;if(R&&id(R,C,"prop",hn(k)),m.defaultProps!==void 0){var O=hn(k)||"Unknown";zy[O]||(r("%s: Support for defaultProps will be removed from memo components in a future major release. Use JavaScript default parameters instead.",O),zy[O]=!0)}}var U=w5(m.type,null,C,h,h.mode,w);return U.ref=h.ref,U.return=h,h.child=U,U}{var G=m.type,ce=G.propTypes;ce&&id(ce,C,"prop",hn(G))}var le=d.child,we=j4(d,w);if(!we){var De=le.memoizedProps,We=m.compare;if(We=We!==null?We:ay,We(De,C)&&d.ref===h.ref)return Kh(d,h,w)}h.flags|=Mb;var yt=x_(le,C);return yt.ref=h.ref,yt.return=h,h.child=yt,yt}function _q(d,h,m,C,w){if(h.type!==h.elementType){var k=h.elementType;if(k.$$typeof===Pe){var I=k,R=I._payload,O=I._init;try{k=O(R)}catch{k=null}var U=k&&k.propTypes;U&&id(U,C,"prop",hn(k))}}if(d!==null){var G=d.memoizedProps;if(ay(G,C)&&d.ref===h.ref&&h.type===d.type)if(ld=!1,h.pendingProps=C=G,j4(d,w))(d.flags&QO)!==ri&&(ld=!0);else return h.lanes=d.lanes,Kh(d,h,w)}return F4(d,h,m,C,w)}function vq(d,h,m){var C=h.pendingProps,w=C.children,k=d!==null?d.memoizedState:null;if(C.mode==="hidden"||ze)if((h.mode&Zi)===ei){var I={baseLanes:Qe,cachePool:null,transitions:null};h.memoizedState=I,RI(h,m)}else if(Bl(m,Fl)){var ce={baseLanes:Qe,cachePool:null,transitions:null};h.memoizedState=ce;var le=k!==null?k.baseLanes:m;RI(h,le)}else{var R=null,O;if(k!==null){var U=k.baseLanes;O=Ai(U,m)}else O=m;h.lanes=h.childLanes=Fl;var G={baseLanes:O,cachePool:R,transitions:null};return h.memoizedState=G,h.updateQueue=null,RI(h,O),null}else{var we;k!==null?(we=Ai(k.baseLanes,m),h.memoizedState=null):we=m,RI(h,we)}return Ia(d,h,w,m),h.child}function bme(d,h,m){var C=h.pendingProps;return Ia(d,h,C,m),h.child}function Cme(d,h,m){var C=h.pendingProps.children;return Ia(d,h,C,m),h.child}function wme(d,h,m){{h.flags|=on;{var C=h.stateNode;C.effectDuration=0,C.passiveEffectDuration=0}}var w=h.pendingProps,k=w.children;return Ia(d,h,k,m),h.child}function bq(d,h){var m=h.ref;(d===null&&m!==null||d!==null&&d.ref!==m)&&(h.flags|=Tg,h.flags|=XO)}function F4(d,h,m,C,w){if(h.type!==h.elementType){var k=m.propTypes;k&&id(k,C,"prop",hn(m))}var I;{var R=Zb(h,m,!0);I=Qb(h,R)}var O,U;n0(h,w),Vw(h);{if(Vy.current=h,Ol(!0),O=c0(d,h,m,C,I,w),U=d0(),h.mode&to){nr(!0);try{O=c0(d,h,m,C,I,w),U=d0()}finally{nr(!1)}}Ol(!1)}return Ob(),d!==null&&!ld?(NK(d,h,w),Kh(d,h,w)):(br()&&U&&_F(h),h.flags|=Mb,Ia(d,h,O,w),h.child)}function Cq(d,h,m,C,w){{switch(Bve(h)){case!1:{var k=h.stateNode,I=h.type,R=new I(h.memoizedProps,k.context),O=R.state;k.updater.enqueueSetState(k,O,null);break}case!0:{h.flags|=Tn,h.flags|=Ea;var U=new Error("Simulated error coming from DevTools"),G=Kw(w);h.lanes=Ai(h.lanes,G);var ce=N4(h,b_(U,h),G);BF(h,ce);break}}if(h.type!==h.elementType){var le=m.propTypes;le&&id(le,C,"prop",hn(m))}}var we;gu(m)?(we=!0,NE(h)):we=!1,n0(h,w);var De=h.stateNode,We;De===null?(wI(d,h),cq(h,m,C),E4(h,m,C,w),We=!0):d===null?We=dme(h,m,C,w):We=ume(d,h,m,C,w);var yt=B4(d,h,m,We,we,w);{var Gt=h.stateNode;We&&Gt.props!==C&&(C_||r("It looks like %s is reassigning its own `this.props` while rendering. This is not supported and can lead to confusing bugs.",Ei(h)||"a component"),C_=!0)}return yt}function B4(d,h,m,C,w,k){bq(d,h);var I=(h.flags&Tn)!==ri;if(!C&&!I)return w&&tK(h,m,!1),Kh(d,h,k);var R=h.stateNode;Vy.current=h;var O;if(I&&typeof m.getDerivedStateFromError!="function")O=null,sq();else{Vw(h);{if(Ol(!0),O=R.render(),h.mode&to){nr(!0);try{R.render()}finally{nr(!1)}}Ol(!1)}Ob()}return h.flags|=Mb,d!==null&&I?vme(d,h,O,k):Ia(d,h,O,k),h.memoizedState=R.state,w&&tK(h,m,!0),h.child}function wq(d){var h=d.stateNode;h.pendingContext?Jj(d,h.pendingContext,h.pendingContext!==h.context):h.context&&Jj(d,h.context,!1),WF(d,h.containerInfo)}function yme(d,h,m){if(wq(h),d===null)throw new Error("Should have a current fiber. This is a bug in React.");var C=h.pendingProps,w=h.memoizedState,k=w.element;LK(d,h),GE(h,C,null,m);var I=h.memoizedState;h.stateNode;var R=I.element;if(w.isDehydrated){var O={element:R,isDehydrated:!1,cache:I.cache,pendingSuspenseBoundaries:I.pendingSuspenseBoundaries,transitions:I.transitions},U=h.updateQueue;if(U.baseState=O,h.memoizedState=O,h.flags&Mh){var G=b_(new Error("There was an error while hydrating. Because the error happened outside of a Suspense boundary, the entire root will switch to client rendering."),h);return yq(d,h,R,m,G)}else if(R!==k){var ce=b_(new Error("This root received an early update, before anything was able hydrate. Switched the entire root to client rendering."),h);return yq(d,h,R,m,ce)}else{xpe(h);var le=_K(h,null,R,m);h.child=le;for(var we=le;we;)we.flags=we.flags&~So|Ah,we=we.sibling}}else{if(e0(),R===k)return Kh(d,h,m);Ia(d,h,R,m)}return h.child}function yq(d,h,m,C,w){return e0(),SF(w),h.flags|=Mh,Ia(d,h,m,C),h.child}function Sme(d,h,m){EK(h),d===null&&yF(h);var C=h.type,w=h.pendingProps,k=d!==null?d.memoizedProps:null,I=w.children,R=nF(C,w);return R?I=null:k!==null&&nF(C,k)&&(h.flags|=Fw),bq(d,h),Ia(d,h,I,m),h.child}function Lme(d,h){return d===null&&yF(h),null}function xme(d,h,m,C){wI(d,h);var w=h.pendingProps,k=m,I=k._payload,R=k._init,O=R(I);h.type=O;var U=h.tag=Lve(O),G=ad(O,w),ce;switch(U){case l:return W4(h,O),h.type=O=v0(O),ce=F4(null,h,O,G,C),ce;case c:return h.type=O=p5(O),ce=Cq(null,h,O,G,C),ce;case x:return h.type=O=m5(O),ce=pq(null,h,O,G,C),ce;case N:{if(h.type!==h.elementType){var le=O.propTypes;le&&id(le,G,"prop",hn(O))}return ce=mq(null,h,O,ad(O.type,G),C),ce}}var we="";throw O!==null&&typeof O=="object"&&O.$$typeof===Pe&&(we=" Did you wrap a component in React.lazy() more than once?"),new Error("Element type is invalid. Received a promise that resolves to: "+O+". "+("Lazy element type must resolve to a class or function."+we))}function Dme(d,h,m,C,w){wI(d,h),h.tag=c;var k;return gu(m)?(k=!0,NE(h)):k=!1,n0(h,w),cq(h,m,C),E4(h,m,C,w),B4(null,h,m,!0,k,w)}function kme(d,h,m,C){wI(d,h);var w=h.pendingProps,k;{var I=Zb(h,m,!1);k=Qb(h,I)}n0(h,C);var R,O;Vw(h);{if(m.prototype&&typeof m.prototype.render=="function"){var U=hn(m)||"Unknown";R4[U]||(r("The <%s /> component appears to have a render method, but doesn't extend React.Component. This is likely to cause errors. Change %s to extend React.Component instead.",U,U),R4[U]=!0)}h.mode&to&&sd.recordLegacyContextWarning(h,null),Ol(!0),Vy.current=h,R=c0(null,h,m,w,k,C),O=d0(),Ol(!1)}if(Ob(),h.flags|=Mb,typeof R=="object"&&R!==null&&typeof R.render=="function"&&R.$$typeof===void 0){var G=hn(m)||"Unknown";Hy[G]||(r("The <%s /> component appears to be a function component that returns a class instance. Change %s to a class that extends React.Component instead. If you can't use a class try assigning the prototype on the function as a workaround. `%s.prototype = React.Component.prototype`. Don't use an arrow function since it cannot be called with `new` by React.",G,G,G),Hy[G]=!0)}if(typeof R=="object"&&R!==null&&typeof R.render=="function"&&R.$$typeof===void 0){{var ce=hn(m)||"Unknown";Hy[ce]||(r("The <%s /> component appears to be a function component that returns a class instance. Change %s to a class that extends React.Component instead. If you can't use a class try assigning the prototype on the function as a workaround. `%s.prototype = React.Component.prototype`. Don't use an arrow function since it cannot be called with `new` by React.",ce,ce,ce),Hy[ce]=!0)}h.tag=c,h.memoizedState=null,h.updateQueue=null;var le=!1;return gu(m)?(le=!0,NE(h)):le=!1,h.memoizedState=R.state!==null&&R.state!==void 0?R.state:null,FF(h),lq(h,R),E4(h,m,w,C),B4(null,h,m,!0,le,C)}else{if(h.tag=l,h.mode&to){nr(!0);try{R=c0(null,h,m,w,k,C),O=d0()}finally{nr(!1)}}return br()&&O&&_F(h),Ia(null,h,R,C),W4(h,m),h.child}}function W4(d,h){{if(h&&h.childContextTypes&&r("%s(...): childContextTypes cannot be defined on a function component.",h.displayName||h.name||"Component"),d.ref!==null){var m="",C=Dg();C&&(m+=`

Check the render method of \``+C+"`.");var w=C||"",k=d._debugSource;k&&(w=k.fileName+":"+k.lineNumber),P4[w]||(P4[w]=!0,r("Function components cannot be given refs. Attempts to access this ref will fail. Did you mean to use React.forwardRef()?%s",m))}if(h.defaultProps!==void 0){var I=hn(h)||"Unknown";zy[I]||(r("%s: Support for defaultProps will be removed from function components in a future major release. Use JavaScript default parameters instead.",I),zy[I]=!0)}if(typeof h.getDerivedStateFromProps=="function"){var R=hn(h)||"Unknown";A4[R]||(r("%s: Function components do not support getDerivedStateFromProps.",R),A4[R]=!0)}if(typeof h.contextType=="object"&&h.contextType!==null){var O=hn(h)||"Unknown";M4[O]||(r("%s: Function components do not support contextType.",O),M4[O]=!0)}}}var V4={dehydrated:null,treeContext:null,retryLane:sr};function H4(d){return{baseLanes:d,cachePool:_me(),transitions:null}}function Eme(d,h){var m=null;return{baseLanes:Ai(d.baseLanes,h),cachePool:m,transitions:d.transitions}}function Ime(d,h,m,C){if(h!==null){var w=h.memoizedState;if(w===null)return!1}return zF(d,Ny)}function Tme(d,h){return eE(d.childLanes,h)}function Sq(d,h,m){var C=h.pendingProps;Wve(h)&&(h.flags|=Tn);var w=od.current,k=!1,I=(h.flags&Tn)!==ri;if(I||Ime(w,d)?(k=!0,h.flags&=~Tn):(d===null||d.memoizedState!==null)&&(w=Gpe(w,TK)),w=o0(w),$g(h,w),d===null){yF(h);var R=h.memoizedState;if(R!==null){var O=R.dehydrated;if(O!==null)return Pme(h,O)}var U=C.children,G=C.fallback;if(k){var ce=Nme(h,U,G,m),le=h.child;return le.memoizedState=H4(m),h.memoizedState=V4,ce}else return z4(h,U)}else{var we=d.memoizedState;if(we!==null){var De=we.dehydrated;if(De!==null)return Ome(d,h,I,C,De,we,m)}if(k){var We=C.fallback,yt=C.children,Gt=Mme(d,h,yt,We,m),Ht=h.child,Xi=d.child.memoizedState;return Ht.memoizedState=Xi===null?H4(m):Eme(Xi,m),Ht.childLanes=Tme(d,m),h.memoizedState=V4,Gt}else{var $i=C.children,me=Rme(d,h,$i,m);return h.memoizedState=null,me}}}function z4(d,h,m){var C=d.mode,w={mode:"visible",children:h},k=U4(w,C);return k.return=d,d.child=k,k}function Nme(d,h,m,C){var w=d.mode,k=d.child,I={mode:"hidden",children:h},R,O;return(w&Zi)===ei&&k!==null?(R=k,R.childLanes=Qe,R.pendingProps=I,d.mode&qn&&(R.actualDuration=0,R.actualStartTime=-1,R.selfBaseDuration=0,R.treeBaseDuration=0),O=Xg(m,w,C,null)):(R=U4(I,w),O=Xg(m,w,C,null)),R.return=d,O.return=d,R.sibling=O,d.child=R,O}function U4(d,h,m){return LG(d,h,Qe,null)}function Lq(d,h){return x_(d,h)}function Rme(d,h,m,C){var w=d.child,k=w.sibling,I=Lq(w,{mode:"visible",children:m});if((h.mode&Zi)===ei&&(I.lanes=C),I.return=h,I.sibling=null,k!==null){var R=h.deletions;R===null?(h.deletions=[k],h.flags|=Xm):R.push(k)}return h.child=I,I}function Mme(d,h,m,C,w){var k=h.mode,I=d.child,R=I.sibling,O={mode:"hidden",children:m},U;if((k&Zi)===ei&&h.child!==I){var G=h.child;U=G,U.childLanes=Qe,U.pendingProps=O,h.mode&qn&&(U.actualDuration=0,U.actualStartTime=-1,U.selfBaseDuration=I.selfBaseDuration,U.treeBaseDuration=I.treeBaseDuration),h.deletions=null}else U=Lq(I,O),U.subtreeFlags=I.subtreeFlags&Oh;var ce;return R!==null?ce=x_(R,C):(ce=Xg(C,k,w,null),ce.flags|=So),ce.return=h,U.return=h,U.sibling=ce,h.child=U,ce}function CI(d,h,m,C){C!==null&&SF(C),t0(h,d.child,null,m);var w=h.pendingProps,k=w.children,I=z4(h,k);return I.flags|=So,h.memoizedState=null,I}function Ame(d,h,m,C,w){var k=h.mode,I={mode:"visible",children:m},R=U4(I,k),O=Xg(C,k,w,null);return O.flags|=So,R.return=h,O.return=h,R.sibling=O,h.child=R,(h.mode&Zi)!==ei&&t0(h,d.child,null,w),O}function Pme(d,h,m){return(d.mode&Zi)===ei?(r("Cannot hydrate Suspense in legacy mode. Switch from ReactDOM.hydrate(element, container) to ReactDOMClient.hydrateRoot(container, <App />).render(element) or remove the Suspense components from the server rendered components."),d.lanes=vi):aF(h)?d.lanes=s_:d.lanes=Fl,null}function Ome(d,h,m,C,w,k,I){if(m)if(h.flags&Mh){h.flags&=~Mh;var me=I4(new Error("There was an error while hydrating this Suspense boundary. Switched to client rendering."));return CI(d,h,I,me)}else{if(h.memoizedState!==null)return h.child=d.child,h.flags|=Tn,null;var Ve=C.children,_e=C.fallback,tt=Ame(d,h,Ve,_e,I),Et=h.child;return Et.memoizedState=H4(I),h.memoizedState=V4,tt}else{if(Spe(),(h.mode&Zi)===ei)return CI(d,h,I,null);if(aF(w)){var R,O,U;{var G=Vge(w);R=G.digest,O=G.message,U=G.stack}var ce;O?ce=new Error(O):ce=new Error("The server could not finish this Suspense boundary, likely due to an error during server rendering. Switched to client rendering.");var le=I4(ce,R,U);return CI(d,h,I,le)}var we=Bl(I,d.childLanes);if(ld||we){var De=NI();if(De!==null){var We=Kue(De,I);if(We!==sr&&We!==k.retryLane){k.retryLane=We;var yt=Ls;tl(d,We),zo(De,d,We,yt)}}d5();var Gt=I4(new Error("This Suspense boundary received an update before it finished hydrating. This caused the boundary to switch to client rendering. The usual way to fix this is to wrap the original update in startTransition."));return CI(d,h,I,Gt)}else if(qj(w)){h.flags|=Tn,h.child=d.child;var Ht=ave.bind(null,d);return Hge(w,Ht),null}else{Dpe(h,w,k.treeContext);var Xi=C.children,$i=z4(h,Xi);return $i.flags|=Ah,$i}}}function xq(d,h,m){d.lanes=Ai(d.lanes,h);var C=d.alternate;C!==null&&(C.lanes=Ai(C.lanes,h)),MF(d.return,h,m)}function Fme(d,h,m){for(var C=h;C!==null;){if(C.tag===E){var w=C.memoizedState;w!==null&&xq(C,m,d)}else if(C.tag===K)xq(C,m,d);else if(C.child!==null){C.child.return=C,C=C.child;continue}if(C===d)return;for(;C.sibling===null;){if(C.return===null||C.return===d)return;C=C.return}C.sibling.return=C.return,C=C.sibling}}function Bme(d){for(var h=d,m=null;h!==null;){var C=h.alternate;C!==null&&XE(C)===null&&(m=h),h=h.sibling}return m}function Wme(d){if(d!==void 0&&d!=="forwards"&&d!=="backwards"&&d!=="together"&&!O4[d])if(O4[d]=!0,typeof d=="string")switch(d.toLowerCase()){case"together":case"forwards":case"backwards":{r('"%s" is not a valid value for revealOrder on <SuspenseList />. Use lowercase "%s" instead.',d,d.toLowerCase());break}case"forward":case"backward":{r('"%s" is not a valid value for revealOrder on <SuspenseList />. React uses the -s suffix in the spelling. Use "%ss" instead.',d,d.toLowerCase());break}default:r('"%s" is not a supported revealOrder on <SuspenseList />. Did you mean "together", "forwards" or "backwards"?',d);break}else r('%s is not a supported value for revealOrder on <SuspenseList />. Did you mean "together", "forwards" or "backwards"?',d)}function Vme(d,h){d!==void 0&&!bI[d]&&(d!=="collapsed"&&d!=="hidden"?(bI[d]=!0,r('"%s" is not a supported value for tail on <SuspenseList />. Did you mean "collapsed" or "hidden"?',d)):h!=="forwards"&&h!=="backwards"&&(bI[d]=!0,r('<SuspenseList tail="%s" /> is only valid if revealOrder is "forwards" or "backwards". Did you mean to specify revealOrder="forwards"?',d)))}function Dq(d,h){{var m=In(d),C=!m&&typeof lu(d)=="function";if(m||C){var w=m?"array":"iterable";return r("A nested %s was passed to row #%s in <SuspenseList />. Wrap it in an additional SuspenseList to configure its revealOrder: <SuspenseList revealOrder=...> ... <SuspenseList revealOrder=...>{%s}</SuspenseList> ... </SuspenseList>",w,h,w),!1}}return!0}function Hme(d,h){if((h==="forwards"||h==="backwards")&&d!==void 0&&d!==null&&d!==!1)if(In(d)){for(var m=0;m<d.length;m++)if(!Dq(d[m],m))return}else{var C=lu(d);if(typeof C=="function"){var w=C.call(d);if(w)for(var k=w.next(),I=0;!k.done;k=w.next()){if(!Dq(k.value,I))return;I++}}else r('A single row was passed to a <SuspenseList revealOrder="%s" />. This is not useful since it needs multiple rows. Did you mean to pass multiple children or an array?',h)}}function $4(d,h,m,C,w){var k=d.memoizedState;k===null?d.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:C,tail:m,tailMode:w}:(k.isBackwards=h,k.rendering=null,k.renderingStartTime=0,k.last=C,k.tail=m,k.tailMode=w)}function kq(d,h,m){var C=h.pendingProps,w=C.revealOrder,k=C.tail,I=C.children;Wme(w),Vme(k,w),Hme(I,w),Ia(d,h,I,m);var R=od.current,O=zF(R,Ny);if(O)R=UF(R,Ny),h.flags|=Tn;else{var U=d!==null&&(d.flags&Tn)!==ri;U&&Fme(h,h.child,m),R=o0(R)}if($g(h,R),(h.mode&Zi)===ei)h.memoizedState=null;else switch(w){case"forwards":{var G=Bme(h.child),ce;G===null?(ce=h.child,h.child=null):(ce=G.sibling,G.sibling=null),$4(h,!1,ce,G,k);break}case"backwards":{var le=null,we=h.child;for(h.child=null;we!==null;){var De=we.alternate;if(De!==null&&XE(De)===null){h.child=we;break}var We=we.sibling;we.sibling=le,le=we,we=We}$4(h,!0,le,null,k);break}case"together":{$4(h,!1,null,null,void 0);break}default:h.memoizedState=null}return h.child}function zme(d,h,m){WF(h,h.stateNode.containerInfo);var C=h.pendingProps;return d===null?h.child=t0(h,null,C,m):Ia(d,h,C,m),h.child}var Eq=!1;function Ume(d,h,m){var C=h.type,w=C._context,k=h.pendingProps,I=h.memoizedProps,R=k.value;{"value"in k||Eq||(Eq=!0,r("The `value` prop is required for the `<Context.Provider>`. Did you misspell it or forget to pass it?"));var O=h.type.propTypes;O&&id(O,k,"prop","Context.Provider")}if(CK(h,w,R),I!==null){var U=I.value;if(Hl(U,R)){if(I.children===k.children&&!IE())return Kh(d,h,m)}else Wpe(h,w,m)}var G=k.children;return Ia(d,h,G,m),h.child}var Iq=!1;function $me(d,h,m){var C=h.type;C._context===void 0?C!==C.Consumer&&(Iq||(Iq=!0,r("Rendering <Context> directly is not supported and will be removed in a future major release. Did you mean to render <Context.Consumer> instead?"))):C=C._context;var w=h.pendingProps,k=w.children;typeof k!="function"&&r("A context consumer was rendered with multiple children, or a child that isn't a function. A context consumer expects a single child that is a function. If you did pass a function, make sure there is no trailing or leading whitespace around it."),n0(h,m);var I=Lo(C);Vw(h);var R;return Vy.current=h,Ol(!0),R=k(I),Ol(!1),Ob(),h.flags|=Mb,Ia(d,h,R,m),h.child}function Uy(){ld=!0}function wI(d,h){(h.mode&Zi)===ei&&d!==null&&(d.alternate=null,h.alternate=null,h.flags|=So)}function Kh(d,h,m){return d!==null&&(h.dependencies=d.dependencies),sq(),tS(h.lanes),Bl(m,h.childLanes)?(Fpe(d,h),h.child):null}function jme(d,h,m){{var C=h.return;if(C===null)throw new Error("Cannot swap the root fiber.");if(d.alternate=null,h.alternate=null,m.index=h.index,m.sibling=h.sibling,m.return=h.return,m.ref=h.ref,h===C.child)C.child=m;else{var w=C.child;if(w===null)throw new Error("Expected parent to have a child.");for(;w.sibling!==h;)if(w=w.sibling,w===null)throw new Error("Expected to find the previous sibling.");w.sibling=m}var k=C.deletions;return k===null?(C.deletions=[d],C.flags|=Xm):k.push(d),m.flags|=So,m}}function j4(d,h){var m=d.lanes;return!!Bl(m,h)}function Kme(d,h,m){switch(h.tag){case f:wq(h),h.stateNode,e0();break;case p:EK(h);break;case c:{var C=h.type;gu(C)&&NE(h);break}case g:WF(h,h.stateNode.containerInfo);break;case L:{var w=h.memoizedProps.value,k=h.type._context;CK(h,k,w);break}case D:{var I=Bl(m,h.childLanes);I&&(h.flags|=on);{var R=h.stateNode;R.effectDuration=0,R.passiveEffectDuration=0}}break;case E:{var O=h.memoizedState;if(O!==null){if(O.dehydrated!==null)return $g(h,o0(od.current)),h.flags|=Tn,null;var U=h.child,G=U.childLanes;if(Bl(m,G))return Sq(d,h,m);$g(h,o0(od.current));var ce=Kh(d,h,m);return ce!==null?ce.sibling:null}else $g(h,o0(od.current));break}case K:{var le=(d.flags&Tn)!==ri,we=Bl(m,h.childLanes);if(le){if(we)return kq(d,h,m);h.flags|=Tn}var De=h.memoizedState;if(De!==null&&(De.rendering=null,De.tail=null,De.lastEffect=null),$g(h,od.current),we)break;return null}case q:case se:return h.lanes=Qe,vq(d,h,m)}return Kh(d,h,m)}function Tq(d,h,m){if(h._debugNeedsRemount&&d!==null)return jme(d,h,w5(h.type,h.key,h.pendingProps,h._debugOwner||null,h.mode,h.lanes));if(d!==null){var C=d.memoizedProps,w=h.pendingProps;if(C!==w||IE()||h.type!==d.type)ld=!0;else{var k=j4(d,m);if(!k&&(h.flags&Tn)===ri)return ld=!1,Kme(d,h,m);(d.flags&QO)!==ri?ld=!0:ld=!1}}else if(ld=!1,br()&&_pe(h)){var I=h.index,R=vpe();sK(h,R,I)}switch(h.lanes=Qe,h.tag){case u:return kme(d,h,h.type,m);case F:{var O=h.elementType;return xme(d,h,O,m)}case l:{var U=h.type,G=h.pendingProps,ce=h.elementType===U?G:ad(U,G);return F4(d,h,U,ce,m)}case c:{var le=h.type,we=h.pendingProps,De=h.elementType===le?we:ad(le,we);return Cq(d,h,le,De,m)}case f:return yme(d,h,m);case p:return Sme(d,h,m);case _:return Lme(d,h);case E:return Sq(d,h,m);case g:return zme(d,h,m);case x:{var We=h.type,yt=h.pendingProps,Gt=h.elementType===We?yt:ad(We,yt);return pq(d,h,We,Gt,m)}case b:return bme(d,h,m);case y:return Cme(d,h,m);case D:return wme(d,h,m);case L:return Ume(d,h,m);case S:return $me(d,h,m);case N:{var Ht=h.type,Xi=h.pendingProps,$i=ad(Ht,Xi);if(h.type!==h.elementType){var me=Ht.propTypes;me&&id(me,$i,"prop",hn(Ht))}return $i=ad(Ht.type,$i),mq(d,h,Ht,$i,m)}case M:return _q(d,h,h.type,h.pendingProps,m);case H:{var Ve=h.type,_e=h.pendingProps,tt=h.elementType===Ve?_e:ad(Ve,_e);return Dme(d,h,Ve,tt,m)}case K:return kq(d,h,m);case j:break;case q:return vq(d,h,m)}throw new Error("Unknown unit of work tag ("+h.tag+"). This error is likely caused by a bug in React. Please file an issue.")}function u0(d){d.flags|=on}function Nq(d){d.flags|=Tg,d.flags|=XO}var Rq,K4,Mq,Aq;Rq=function(d,h,m,C){for(var w=h.child;w!==null;){if(w.tag===p||w.tag===_)gge(d,w.stateNode);else if(w.tag!==g){if(w.child!==null){w.child.return=w,w=w.child;continue}}if(w===h)return;for(;w.sibling===null;){if(w.return===null||w.return===h)return;w=w.return}w.sibling.return=w.return,w=w.sibling}},K4=function(d,h){},Mq=function(d,h,m,C,w){var k=d.memoizedProps;if(k!==C){var I=h.stateNode,R=VF(),O=mge(I,m,k,C,w,R);h.updateQueue=O,O&&u0(h)}},Aq=function(d,h,m,C){m!==C&&u0(h)};function $y(d,h){if(!br())switch(d.tailMode){case"hidden":{for(var m=d.tail,C=null;m!==null;)m.alternate!==null&&(C=m),m=m.sibling;C===null?d.tail=null:C.sibling=null;break}case"collapsed":{for(var w=d.tail,k=null;w!==null;)w.alternate!==null&&(k=w),w=w.sibling;k===null?!h&&d.tail!==null?d.tail.sibling=null:d.tail=null:k.sibling=null;break}}}function wr(d){var h=d.alternate!==null&&d.alternate.child===d.child,m=Qe,C=ri;if(h){if((d.mode&qn)!==ei){for(var O=d.selfBaseDuration,U=d.child;U!==null;)m=Ai(m,Ai(U.lanes,U.childLanes)),C|=U.subtreeFlags&Oh,C|=U.flags&Oh,O+=U.treeBaseDuration,U=U.sibling;d.treeBaseDuration=O}else for(var G=d.child;G!==null;)m=Ai(m,Ai(G.lanes,G.childLanes)),C|=G.subtreeFlags&Oh,C|=G.flags&Oh,G.return=d,G=G.sibling;d.subtreeFlags|=C}else{if((d.mode&qn)!==ei){for(var w=d.actualDuration,k=d.selfBaseDuration,I=d.child;I!==null;)m=Ai(m,Ai(I.lanes,I.childLanes)),C|=I.subtreeFlags,C|=I.flags,w+=I.actualDuration,k+=I.treeBaseDuration,I=I.sibling;d.actualDuration=w,d.treeBaseDuration=k}else for(var R=d.child;R!==null;)m=Ai(m,Ai(R.lanes,R.childLanes)),C|=R.subtreeFlags,C|=R.flags,R.return=d,R=R.sibling;d.subtreeFlags|=C}return d.childLanes=m,h}function qme(d,h,m){if(Npe()&&(h.mode&Zi)!==ei&&(h.flags&Tn)===ri)return uK(h),e0(),h.flags|=Mh|Bw|Ea,!1;var C=OE(h);if(m!==null&&m.dehydrated!==null)if(d===null){if(!C)throw new Error("A dehydrated suspense component was completed without a hydrated node. This is probably a bug in React.");if(Ipe(h),wr(h),(h.mode&qn)!==ei){var w=m!==null;if(w){var k=h.child;k!==null&&(h.treeBaseDuration-=k.treeBaseDuration)}}return!1}else{if(e0(),(h.flags&Tn)===ri&&(h.memoizedState=null),h.flags|=on,wr(h),(h.mode&qn)!==ei){var I=m!==null;if(I){var R=h.child;R!==null&&(h.treeBaseDuration-=R.treeBaseDuration)}}return!1}else return hK(),!0}function Pq(d,h,m){var C=h.pendingProps;switch(vF(h),h.tag){case u:case F:case M:case l:case x:case b:case y:case D:case S:case N:return wr(h),null;case c:{var w=h.type;return gu(w)&&TE(h),wr(h),null}case f:{var k=h.stateNode;if(s0(h),gF(h),jF(),k.pendingContext&&(k.context=k.pendingContext,k.pendingContext=null),d===null||d.child===null){var I=OE(h);if(I)u0(h);else if(d!==null){var R=d.memoizedState;(!R.isDehydrated||(h.flags&Mh)!==ri)&&(h.flags|=Jm,hK())}}return K4(d,h),wr(h),null}case p:{HF(h);var O=kK(),U=h.type;if(d!==null&&h.stateNode!=null)Mq(d,h,U,C,O),d.ref!==h.ref&&Nq(h);else{if(!C){if(h.stateNode===null)throw new Error("We must have new props for new mounts. This error is likely caused by a bug in React. Please file an issue.");return wr(h),null}var G=VF(),ce=OE(h);if(ce)kpe(h,O,G)&&u0(h);else{var le=fge(U,C,O,G,h);Rq(le,h,!1,!1),h.stateNode=le,pge(le,U,C,O)&&u0(h)}h.ref!==null&&Nq(h)}return wr(h),null}case _:{var we=C;if(d&&h.stateNode!=null){var De=d.memoizedProps;Aq(d,h,De,we)}else{if(typeof we!="string"&&h.stateNode===null)throw new Error("We must have new props for new mounts. This error is likely caused by a bug in React. Please file an issue.");var We=kK(),yt=VF(),Gt=OE(h);Gt?Epe(h)&&u0(h):h.stateNode=_ge(we,We,yt,h)}return wr(h),null}case E:{r0(h);var Ht=h.memoizedState;if(d===null||d.memoizedState!==null&&d.memoizedState.dehydrated!==null){var Xi=qme(d,h,Ht);if(!Xi)return h.flags&Ea?h:null}if((h.flags&Tn)!==ri)return h.lanes=m,(h.mode&qn)!==ei&&m4(h),h;var $i=Ht!==null,me=d!==null&&d.memoizedState!==null;if($i!==me&&$i){var Ve=h.child;if(Ve.flags|=e_,(h.mode&Zi)!==ei){var _e=d===null&&(h.memoizedProps.unstable_avoidThisFallback!==!0||!it);_e||zF(od.current,TK)?G_e():d5()}}var tt=h.updateQueue;if(tt!==null&&(h.flags|=on),wr(h),(h.mode&qn)!==ei&&$i){var Et=h.child;Et!==null&&(h.treeBaseDuration-=Et.treeBaseDuration)}return null}case g:return s0(h),K4(d,h),d===null&&dpe(h.stateNode.containerInfo),wr(h),null;case L:var St=h.type._context;return RF(St,h),wr(h),null;case H:{var ci=h.type;return gu(ci)&&TE(h),wr(h),null}case K:{r0(h);var Ci=h.memoizedState;if(Ci===null)return wr(h),null;var Yn=(h.flags&Tn)!==ri,bn=Ci.rendering;if(bn===null)if(Yn)$y(Ci,!1);else{var co=Z_e()&&(d===null||(d.flags&Tn)===ri);if(!co)for(var Cn=h.child;Cn!==null;){var io=XE(Cn);if(io!==null){Yn=!0,h.flags|=Tn,$y(Ci,!1);var sa=io.updateQueue;return sa!==null&&(h.updateQueue=sa,h.flags|=on),h.subtreeFlags=ri,Bpe(h,m),$g(h,UF(od.current,Ny)),h.child}Cn=Cn.sibling}Ci.tail!==null&&ir()>iG()&&(h.flags|=Tn,Yn=!0,$y(Ci,!1),h.lanes=A$)}else{if(!Yn){var Dr=XE(bn);if(Dr!==null){h.flags|=Tn,Yn=!0;var $l=Dr.updateQueue;if($l!==null&&(h.updateQueue=$l,h.flags|=on),$y(Ci,!0),Ci.tail===null&&Ci.tailMode==="hidden"&&!bn.alternate&&!br())return wr(h),null}else ir()*2-Ci.renderingStartTime>iG()&&m!==Fl&&(h.flags|=Tn,Yn=!0,$y(Ci,!1),h.lanes=A$)}if(Ci.isBackwards)bn.sibling=h.child,h.child=bn;else{var Ra=Ci.last;Ra!==null?Ra.sibling=bn:h.child=bn,Ci.last=bn}}if(Ci.tail!==null){var Ma=Ci.tail;Ci.rendering=Ma,Ci.tail=Ma.sibling,Ci.renderingStartTime=ir(),Ma.sibling=null;var oa=od.current;return Yn?oa=UF(oa,Ny):oa=o0(oa),$g(h,oa),Ma}return wr(h),null}case j:break;case q:case se:{c5(h);var Qh=h.memoizedState,b0=Qh!==null;if(d!==null){var rS=d.memoizedState,yu=rS!==null;yu!==b0&&!ze&&(h.flags|=e_)}return!b0||(h.mode&Zi)===ei?wr(h):Bl(wu,Fl)&&(wr(h),h.subtreeFlags&(So|on)&&(h.flags|=e_)),null}case fe:return null;case Ae:return null}throw new Error("Unknown unit of work tag ("+h.tag+"). This error is likely caused by a bug in React. Please file an issue.")}function Gme(d,h,m){switch(vF(h),h.tag){case c:{var C=h.type;gu(C)&&TE(h);var w=h.flags;return w&Ea?(h.flags=w&~Ea|Tn,(h.mode&qn)!==ei&&m4(h),h):null}case f:{h.stateNode,s0(h),gF(h),jF();var k=h.flags;return(k&Ea)!==ri&&(k&Tn)===ri?(h.flags=k&~Ea|Tn,h):null}case p:return HF(h),null;case E:{r0(h);var I=h.memoizedState;if(I!==null&&I.dehydrated!==null){if(h.alternate===null)throw new Error("Threw in newly mounted dehydrated component. This is likely a bug in React. Please file an issue.");e0()}var R=h.flags;return R&Ea?(h.flags=R&~Ea|Tn,(h.mode&qn)!==ei&&m4(h),h):null}case K:return r0(h),null;case g:return s0(h),null;case L:var O=h.type._context;return RF(O,h),null;case q:case se:return c5(h),null;case fe:return null;default:return null}}function Oq(d,h,m){switch(vF(h),h.tag){case c:{var C=h.type.childContextTypes;C!=null&&TE(h);break}case f:{h.stateNode,s0(h),gF(h),jF();break}case p:{HF(h);break}case g:s0(h);break;case E:r0(h);break;case K:r0(h);break;case L:var w=h.type._context;RF(w,h);break;case q:case se:c5(h);break}}var Fq=null;Fq=new Set;var yI=!1,yr=!1,Yme=typeof WeakSet=="function"?WeakSet:Set,Mt=null,h0=null,f0=null;function Zme(d){GO(null,function(){throw d}),YO()}var Qme=function(d,h){if(h.props=d.memoizedProps,h.state=d.memoizedState,d.mode&qn)try{bu(),h.componentWillUnmount()}finally{vu(d)}else h.componentWillUnmount()};function Bq(d,h){try{qg(Oo,d)}catch(m){vs(d,h,m)}}function q4(d,h,m){try{Qme(d,m)}catch(C){vs(d,h,C)}}function Xme(d,h,m){try{m.componentDidMount()}catch(C){vs(d,h,C)}}function Wq(d,h){try{Hq(d)}catch(m){vs(d,h,m)}}function g0(d,h){var m=d.ref;if(m!==null)if(typeof m=="function"){var C;try{if(tn&&Qt&&d.mode&qn)try{bu(),C=m(null)}finally{vu(d)}else C=m(null)}catch(w){vs(d,h,w)}typeof C=="function"&&r("Unexpected return value from a callback ref in %s. A callback ref should not return a function.",Ei(d))}else m.current=null}function SI(d,h,m){try{m()}catch(C){vs(d,h,C)}}var Vq=!1;function Jme(d,h){uge(d.containerInfo),Mt=h,e_e();var m=Vq;return Vq=!1,m}function e_e(){for(;Mt!==null;){var d=Mt,h=d.child;(d.subtreeFlags&e2)!==ri&&h!==null?(h.return=d,Mt=h):t_e()}}function t_e(){for(;Mt!==null;){var d=Mt;$s(d);try{i_e(d)}catch(m){vs(d,d.return,m)}tr();var h=d.sibling;if(h!==null){h.return=d.return,Mt=h;return}Mt=d.return}}function i_e(d){var h=d.alternate,m=d.flags;if((m&Jm)!==ri){switch($s(d),d.tag){case l:case x:case M:break;case c:{if(h!==null){var C=h.memoizedProps,w=h.memoizedState,k=d.stateNode;d.type===d.elementType&&!C_&&(k.props!==d.memoizedProps&&r("Expected %s props to match memoized props before getSnapshotBeforeUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",Ei(d)||"instance"),k.state!==d.memoizedState&&r("Expected %s state to match memoized state before getSnapshotBeforeUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",Ei(d)||"instance"));var I=k.getSnapshotBeforeUpdate(d.elementType===d.type?C:ad(d.type,C),w);{var R=Fq;I===void 0&&!R.has(d.type)&&(R.add(d.type),r("%s.getSnapshotBeforeUpdate(): A snapshot value (or null) must be returned. You have returned undefined.",Ei(d)))}k.__reactInternalSnapshotBeforeUpdate=I}break}case f:{{var O=d.stateNode;Oge(O.containerInfo)}break}case p:case _:case g:case H:break;default:throw new Error("This unit of work tag should not have side-effects. This error is likely caused by a bug in React. Please file an issue.")}tr()}}function cd(d,h,m){var C=h.updateQueue,w=C!==null?C.lastEffect:null;if(w!==null){var k=w.next,I=k;do{if((I.tag&d)===d){var R=I.destroy;I.destroy=void 0,R!==void 0&&((d&Cr)!==il?_ue(h):(d&Oo)!==il&&I$(h),(d&pu)!==il&&nS(!0),SI(h,m,R),(d&pu)!==il&&nS(!1),(d&Cr)!==il?vue():(d&Oo)!==il&&T$())}I=I.next}while(I!==k)}}function qg(d,h){var m=h.updateQueue,C=m!==null?m.lastEffect:null;if(C!==null){var w=C.next,k=w;do{if((k.tag&d)===d){(d&Cr)!==il?pue(h):(d&Oo)!==il&&bue(h);var I=k.create;(d&pu)!==il&&nS(!0),k.destroy=I(),(d&pu)!==il&&nS(!1),(d&Cr)!==il?mue():(d&Oo)!==il&&Cue();{var R=k.destroy;if(R!==void 0&&typeof R!="function"){var O=void 0;(k.tag&Oo)!==ri?O="useLayoutEffect":(k.tag&pu)!==ri?O="useInsertionEffect":O="useEffect";var U=void 0;R===null?U=" You returned null. If your effect does not require clean up, return undefined (or nothing).":typeof R.then=="function"?U=`

It looks like you wrote `+O+`(async () => ...) or returned a Promise. Instead, write the async function inside your effect and call it immediately:

`+O+`(() => {
  async function fetchData() {
    // You can await here
    const response = await MyAPI.getData(someId);
    // ...
  }
  fetchData();
}, [someId]); // Or [] if effect doesn't need props or state

Learn more about data fetching with Hooks: https://reactjs.org/link/hooks-data-fetching`:U=" You returned: "+R,r("%s must not return anything besides a function, which is used for clean-up.%s",O,U)}}}k=k.next}while(k!==w)}}function n_e(d,h){if((h.flags&on)!==ri)switch(h.tag){case D:{var m=h.stateNode.passiveEffectDuration,C=h.memoizedProps,w=C.id,k=C.onPostCommit,I=iq(),R=h.alternate===null?"mount":"update";tq()&&(R="nested-update"),typeof k=="function"&&k(w,R,m,I);var O=h.return;e:for(;O!==null;){switch(O.tag){case f:var U=O.stateNode;U.passiveEffectDuration+=m;break e;case D:var G=O.stateNode;G.passiveEffectDuration+=m;break e}O=O.return}break}}}function s_e(d,h,m,C){if((m.flags&Ww)!==ri)switch(m.tag){case l:case x:case M:{if(!yr)if(m.mode&qn)try{bu(),qg(Oo|Po,m)}finally{vu(m)}else qg(Oo|Po,m);break}case c:{var w=m.stateNode;if(m.flags&on&&!yr)if(h===null)if(m.type===m.elementType&&!C_&&(w.props!==m.memoizedProps&&r("Expected %s props to match memoized props before componentDidMount. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",Ei(m)||"instance"),w.state!==m.memoizedState&&r("Expected %s state to match memoized state before componentDidMount. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",Ei(m)||"instance")),m.mode&qn)try{bu(),w.componentDidMount()}finally{vu(m)}else w.componentDidMount();else{var k=m.elementType===m.type?h.memoizedProps:ad(m.type,h.memoizedProps),I=h.memoizedState;if(m.type===m.elementType&&!C_&&(w.props!==m.memoizedProps&&r("Expected %s props to match memoized props before componentDidUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",Ei(m)||"instance"),w.state!==m.memoizedState&&r("Expected %s state to match memoized state before componentDidUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",Ei(m)||"instance")),m.mode&qn)try{bu(),w.componentDidUpdate(k,I,w.__reactInternalSnapshotBeforeUpdate)}finally{vu(m)}else w.componentDidUpdate(k,I,w.__reactInternalSnapshotBeforeUpdate)}var R=m.updateQueue;R!==null&&(m.type===m.elementType&&!C_&&(w.props!==m.memoizedProps&&r("Expected %s props to match memoized props before processing the update queue. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",Ei(m)||"instance"),w.state!==m.memoizedState&&r("Expected %s state to match memoized state before processing the update queue. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",Ei(m)||"instance")),DK(m,R,w));break}case f:{var O=m.updateQueue;if(O!==null){var U=null;if(m.child!==null)switch(m.child.tag){case p:U=m.child.stateNode;break;case c:U=m.child.stateNode;break}DK(m,O,U)}break}case p:{var G=m.stateNode;if(h===null&&m.flags&on){var ce=m.type,le=m.memoizedProps;yge(G,ce,le)}break}case _:break;case g:break;case D:{{var we=m.memoizedProps,De=we.onCommit,We=we.onRender,yt=m.stateNode.effectDuration,Gt=iq(),Ht=h===null?"mount":"update";tq()&&(Ht="nested-update"),typeof We=="function"&&We(m.memoizedProps.id,Ht,m.actualDuration,m.treeBaseDuration,m.actualStartTime,Gt);{typeof De=="function"&&De(m.memoizedProps.id,Ht,yt,Gt),tve(m);var Xi=m.return;e:for(;Xi!==null;){switch(Xi.tag){case f:var $i=Xi.stateNode;$i.effectDuration+=yt;break e;case D:var me=Xi.stateNode;me.effectDuration+=yt;break e}Xi=Xi.return}}}break}case E:{h_e(d,m);break}case K:case H:case j:case q:case se:case Ae:break;default:throw new Error("This unit of work tag should not have side-effects. This error is likely caused by a bug in React. Please file an issue.")}yr||m.flags&Tg&&Hq(m)}function o_e(d){switch(d.tag){case l:case x:case M:{if(d.mode&qn)try{bu(),Bq(d,d.return)}finally{vu(d)}else Bq(d,d.return);break}case c:{var h=d.stateNode;typeof h.componentDidMount=="function"&&Xme(d,d.return,h),Wq(d,d.return);break}case p:{Wq(d,d.return);break}}}function r_e(d,h){for(var m=null,C=d;;){if(C.tag===p){if(m===null){m=C;try{var w=C.stateNode;h?Rge(w):Age(C.stateNode,C.memoizedProps)}catch(I){vs(d,d.return,I)}}}else if(C.tag===_){if(m===null)try{var k=C.stateNode;h?Mge(k):Pge(k,C.memoizedProps)}catch(I){vs(d,d.return,I)}}else if(!((C.tag===q||C.tag===se)&&C.memoizedState!==null&&C!==d)){if(C.child!==null){C.child.return=C,C=C.child;continue}}if(C===d)return;for(;C.sibling===null;){if(C.return===null||C.return===d)return;m===C&&(m=null),C=C.return}m===C&&(m=null),C.sibling.return=C.return,C=C.sibling}}function Hq(d){var h=d.ref;if(h!==null){var m=d.stateNode,C;switch(d.tag){case p:C=m;break;default:C=m}if(typeof h=="function"){var w;if(d.mode&qn)try{bu(),w=h(C)}finally{vu(d)}else w=h(C);typeof w=="function"&&r("Unexpected return value from a callback ref in %s. A callback ref should not return a function.",Ei(d))}else h.hasOwnProperty("current")||r("Unexpected ref object provided for %s. Use either a ref-setter function or React.createRef().",Ei(d)),h.current=C}}function a_e(d){var h=d.alternate;h!==null&&(h.return=null),d.return=null}function zq(d){var h=d.alternate;h!==null&&(d.alternate=null,zq(h));{if(d.child=null,d.deletions=null,d.sibling=null,d.tag===p){var m=d.stateNode;m!==null&&fpe(m)}d.stateNode=null,d._debugOwner=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}}function l_e(d){for(var h=d.return;h!==null;){if(Uq(h))return h;h=h.return}throw new Error("Expected to find a host parent. This error is likely caused by a bug in React. Please file an issue.")}function Uq(d){return d.tag===p||d.tag===f||d.tag===g}function $q(d){var h=d;e:for(;;){for(;h.sibling===null;){if(h.return===null||Uq(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==p&&h.tag!==_&&h.tag!==Q;){if(h.flags&So||h.child===null||h.tag===g)continue e;h.child.return=h,h=h.child}if(!(h.flags&So))return h.stateNode}}function c_e(d){var h=l_e(d);switch(h.tag){case p:{var m=h.stateNode;h.flags&Fw&&(Kj(m),h.flags&=~Fw);var C=$q(d);Y4(d,C,m);break}case f:case g:{var w=h.stateNode.containerInfo,k=$q(d);G4(d,k,w);break}default:throw new Error("Invalid host parent fiber. This error is likely caused by a bug in React. Please file an issue.")}}function G4(d,h,m){var C=d.tag,w=C===p||C===_;if(w){var k=d.stateNode;h?Ege(m,k,h):Dge(m,k)}else if(C!==g){var I=d.child;if(I!==null){G4(I,h,m);for(var R=I.sibling;R!==null;)G4(R,h,m),R=R.sibling}}}function Y4(d,h,m){var C=d.tag,w=C===p||C===_;if(w){var k=d.stateNode;h?kge(m,k,h):xge(m,k)}else if(C!==g){var I=d.child;if(I!==null){Y4(I,h,m);for(var R=I.sibling;R!==null;)Y4(R,h,m),R=R.sibling}}}var Sr=null,dd=!1;function d_e(d,h,m){{var C=h;e:for(;C!==null;){switch(C.tag){case p:{Sr=C.stateNode,dd=!1;break e}case f:{Sr=C.stateNode.containerInfo,dd=!0;break e}case g:{Sr=C.stateNode.containerInfo,dd=!0;break e}}C=C.return}if(Sr===null)throw new Error("Expected to find a host parent. This error is likely caused by a bug in React. Please file an issue.");jq(d,h,m),Sr=null,dd=!1}a_e(m)}function Gg(d,h,m){for(var C=m.child;C!==null;)jq(d,h,C),C=C.sibling}function jq(d,h,m){switch(uue(m),m.tag){case p:yr||g0(m,h);case _:{{var C=Sr,w=dd;Sr=null,Gg(d,h,m),Sr=C,dd=w,Sr!==null&&(dd?Tge(Sr,m.stateNode):Ige(Sr,m.stateNode))}return}case Q:{Sr!==null&&(dd?Nge(Sr,m.stateNode):rF(Sr,m.stateNode));return}case g:{{var k=Sr,I=dd;Sr=m.stateNode.containerInfo,dd=!0,Gg(d,h,m),Sr=k,dd=I}return}case l:case x:case N:case M:{if(!yr){var R=m.updateQueue;if(R!==null){var O=R.lastEffect;if(O!==null){var U=O.next,G=U;do{var ce=G,le=ce.destroy,we=ce.tag;le!==void 0&&((we&pu)!==il?SI(m,h,le):(we&Oo)!==il&&(I$(m),m.mode&qn?(bu(),SI(m,h,le),vu(m)):SI(m,h,le),T$())),G=G.next}while(G!==U)}}}Gg(d,h,m);return}case c:{if(!yr){g0(m,h);var De=m.stateNode;typeof De.componentWillUnmount=="function"&&q4(m,h,De)}Gg(d,h,m);return}case j:{Gg(d,h,m);return}case q:{if(m.mode&Zi){var We=yr;yr=We||m.memoizedState!==null,Gg(d,h,m),yr=We}else Gg(d,h,m);break}default:{Gg(d,h,m);return}}}function u_e(d){d.memoizedState}function h_e(d,h){var m=h.memoizedState;if(m===null){var C=h.alternate;if(C!==null){var w=C.memoizedState;if(w!==null){var k=w.dehydrated;k!==null&&Zge(k)}}}}function Kq(d){var h=d.updateQueue;if(h!==null){d.updateQueue=null;var m=d.stateNode;m===null&&(m=d.stateNode=new Yme),h.forEach(function(C){var w=lve.bind(null,d,C);if(!m.has(C)){if(m.add(C),ed)if(h0!==null&&f0!==null)iS(f0,h0);else throw Error("Expected finished root and lanes to be set. This is a bug in React.");C.then(w,w)}})}}function f_e(d,h,m){h0=m,f0=d,$s(h),qq(h,d),$s(h),h0=null,f0=null}function ud(d,h,m){var C=h.deletions;if(C!==null)for(var w=0;w<C.length;w++){var k=C[w];try{d_e(d,h,k)}catch(O){vs(k,h,O)}}var I=Mk();if(h.subtreeFlags&t2)for(var R=h.child;R!==null;)$s(R),qq(R,d),R=R.sibling;$s(I)}function qq(d,h,m){var C=d.alternate,w=d.flags;switch(d.tag){case l:case x:case N:case M:{if(ud(h,d),Cu(d),w&on){try{cd(pu|Po,d,d.return),qg(pu|Po,d)}catch(ci){vs(d,d.return,ci)}if(d.mode&qn){try{bu(),cd(Oo|Po,d,d.return)}catch(ci){vs(d,d.return,ci)}vu(d)}else try{cd(Oo|Po,d,d.return)}catch(ci){vs(d,d.return,ci)}}return}case c:{ud(h,d),Cu(d),w&Tg&&C!==null&&g0(C,C.return);return}case p:{ud(h,d),Cu(d),w&Tg&&C!==null&&g0(C,C.return);{if(d.flags&Fw){var k=d.stateNode;try{Kj(k)}catch(ci){vs(d,d.return,ci)}}if(w&on){var I=d.stateNode;if(I!=null){var R=d.memoizedProps,O=C!==null?C.memoizedProps:R,U=d.type,G=d.updateQueue;if(d.updateQueue=null,G!==null)try{Sge(I,G,U,O,R,d)}catch(ci){vs(d,d.return,ci)}}}}return}case _:{if(ud(h,d),Cu(d),w&on){if(d.stateNode===null)throw new Error("This should have a text node initialized. This error is likely caused by a bug in React. Please file an issue.");var ce=d.stateNode,le=d.memoizedProps,we=C!==null?C.memoizedProps:le;try{Lge(ce,we,le)}catch(ci){vs(d,d.return,ci)}}return}case f:{if(ud(h,d),Cu(d),w&on&&C!==null){var De=C.memoizedState;if(De.isDehydrated)try{Yge(h.containerInfo)}catch(ci){vs(d,d.return,ci)}}return}case g:{ud(h,d),Cu(d);return}case E:{ud(h,d),Cu(d);var We=d.child;if(We.flags&e_){var yt=We.stateNode,Gt=We.memoizedState,Ht=Gt!==null;if(yt.isHidden=Ht,Ht){var Xi=We.alternate!==null&&We.alternate.memoizedState!==null;Xi||q_e()}}if(w&on){try{u_e(d)}catch(ci){vs(d,d.return,ci)}Kq(d)}return}case q:{var $i=C!==null&&C.memoizedState!==null;if(d.mode&Zi){var me=yr;yr=me||$i,ud(h,d),yr=me}else ud(h,d);if(Cu(d),w&e_){var Ve=d.stateNode,_e=d.memoizedState,tt=_e!==null,Et=d;if(Ve.isHidden=tt,tt&&!$i&&(Et.mode&Zi)!==ei){Mt=Et;for(var St=Et.child;St!==null;)Mt=St,p_e(St),St=St.sibling}r_e(Et,tt)}return}case K:{ud(h,d),Cu(d),w&on&&Kq(d);return}case j:return;default:{ud(h,d),Cu(d);return}}}function Cu(d){var h=d.flags;if(h&So){try{c_e(d)}catch(m){vs(d,d.return,m)}d.flags&=~So}h&Ah&&(d.flags&=~Ah)}function g_e(d,h,m){h0=m,f0=h,Mt=d,Gq(d,h,m),h0=null,f0=null}function Gq(d,h,m){for(var C=(d.mode&Zi)!==ei;Mt!==null;){var w=Mt,k=w.child;if(w.tag===q&&C){var I=w.memoizedState!==null,R=I||yI;if(R){Z4(d,h,m);continue}else{var O=w.alternate,U=O!==null&&O.memoizedState!==null,G=U||yr,ce=yI,le=yr;yI=R,yr=G,yr&&!le&&(Mt=w,m_e(w));for(var we=k;we!==null;)Mt=we,Gq(we,h,m),we=we.sibling;Mt=w,yI=ce,yr=le,Z4(d,h,m);continue}}(w.subtreeFlags&Ww)!==ri&&k!==null?(k.return=w,Mt=k):Z4(d,h,m)}}function Z4(d,h,m){for(;Mt!==null;){var C=Mt;if((C.flags&Ww)!==ri){var w=C.alternate;$s(C);try{s_e(h,w,C,m)}catch(I){vs(C,C.return,I)}tr()}if(C===d){Mt=null;return}var k=C.sibling;if(k!==null){k.return=C.return,Mt=k;return}Mt=C.return}}function p_e(d){for(;Mt!==null;){var h=Mt,m=h.child;switch(h.tag){case l:case x:case N:case M:{if(h.mode&qn)try{bu(),cd(Oo,h,h.return)}finally{vu(h)}else cd(Oo,h,h.return);break}case c:{g0(h,h.return);var C=h.stateNode;typeof C.componentWillUnmount=="function"&&q4(h,h.return,C);break}case p:{g0(h,h.return);break}case q:{var w=h.memoizedState!==null;if(w){Yq(d);continue}break}}m!==null?(m.return=h,Mt=m):Yq(d)}}function Yq(d){for(;Mt!==null;){var h=Mt;if(h===d){Mt=null;return}var m=h.sibling;if(m!==null){m.return=h.return,Mt=m;return}Mt=h.return}}function m_e(d){for(;Mt!==null;){var h=Mt,m=h.child;if(h.tag===q){var C=h.memoizedState!==null;if(C){Zq(d);continue}}m!==null?(m.return=h,Mt=m):Zq(d)}}function Zq(d){for(;Mt!==null;){var h=Mt;$s(h);try{o_e(h)}catch(C){vs(h,h.return,C)}if(tr(),h===d){Mt=null;return}var m=h.sibling;if(m!==null){m.return=h.return,Mt=m;return}Mt=h.return}}function __e(d,h,m,C){Mt=h,v_e(h,d,m,C)}function v_e(d,h,m,C){for(;Mt!==null;){var w=Mt,k=w.child;(w.subtreeFlags&Ab)!==ri&&k!==null?(k.return=w,Mt=k):b_e(d,h,m,C)}}function b_e(d,h,m,C){for(;Mt!==null;){var w=Mt;if((w.flags&Jc)!==ri){$s(w);try{C_e(h,w,m,C)}catch(I){vs(w,w.return,I)}tr()}if(w===d){Mt=null;return}var k=w.sibling;if(k!==null){k.return=w.return,Mt=k;return}Mt=w.return}}function C_e(d,h,m,C){switch(h.tag){case l:case x:case M:{if(h.mode&qn){p4();try{qg(Cr|Po,h)}finally{g4(h)}}else qg(Cr|Po,h);break}}}function w_e(d){Mt=d,y_e()}function y_e(){for(;Mt!==null;){var d=Mt,h=d.child;if((Mt.flags&Xm)!==ri){var m=d.deletions;if(m!==null){for(var C=0;C<m.length;C++){var w=m[C];Mt=w,x_e(w,d)}{var k=d.alternate;if(k!==null){var I=k.child;if(I!==null){k.child=null;do{var R=I.sibling;I.sibling=null,I=R}while(I!==null)}}}Mt=d}}(d.subtreeFlags&Ab)!==ri&&h!==null?(h.return=d,Mt=h):S_e()}}function S_e(){for(;Mt!==null;){var d=Mt;(d.flags&Jc)!==ri&&($s(d),L_e(d),tr());var h=d.sibling;if(h!==null){h.return=d.return,Mt=h;return}Mt=d.return}}function L_e(d){switch(d.tag){case l:case x:case M:{d.mode&qn?(p4(),cd(Cr|Po,d,d.return),g4(d)):cd(Cr|Po,d,d.return);break}}}function x_e(d,h){for(;Mt!==null;){var m=Mt;$s(m),k_e(m,h),tr();var C=m.child;C!==null?(C.return=m,Mt=C):D_e(d)}}function D_e(d){for(;Mt!==null;){var h=Mt,m=h.sibling,C=h.return;if(zq(h),h===d){Mt=null;return}if(m!==null){m.return=C,Mt=m;return}Mt=C}}function k_e(d,h){switch(d.tag){case l:case x:case M:{d.mode&qn?(p4(),cd(Cr,d,h),g4(d)):cd(Cr,d,h);break}}}function E_e(d){switch(d.tag){case l:case x:case M:{try{qg(Oo|Po,d)}catch(m){vs(d,d.return,m)}break}case c:{var h=d.stateNode;try{h.componentDidMount()}catch(m){vs(d,d.return,m)}break}}}function I_e(d){switch(d.tag){case l:case x:case M:{try{qg(Cr|Po,d)}catch(h){vs(d,d.return,h)}break}}}function T_e(d){switch(d.tag){case l:case x:case M:{try{cd(Oo|Po,d,d.return)}catch(m){vs(d,d.return,m)}break}case c:{var h=d.stateNode;typeof h.componentWillUnmount=="function"&&q4(d,d.return,h);break}}}function N_e(d){switch(d.tag){case l:case x:case M:try{cd(Cr|Po,d,d.return)}catch(h){vs(d,d.return,h)}}}if(typeof Symbol=="function"&&Symbol.for){var jy=Symbol.for;jy("selector.component"),jy("selector.has_pseudo_class"),jy("selector.role"),jy("selector.test_id"),jy("selector.text")}var R_e=[];function M_e(){R_e.forEach(function(d){return d()})}var A_e=t.ReactCurrentActQueue;function P_e(d){{var h=typeof IS_REACT_ACT_ENVIRONMENT<"u"?IS_REACT_ACT_ENVIRONMENT:void 0,m=typeof jest<"u";return m&&h!==!1}}function Qq(){{var d=typeof IS_REACT_ACT_ENVIRONMENT<"u"?IS_REACT_ACT_ENVIRONMENT:void 0;return!d&&A_e.current!==null&&r("The current testing environment is not configured to support act(...)"),d}}var O_e=Math.ceil,Q4=t.ReactCurrentDispatcher,X4=t.ReactCurrentOwner,Lr=t.ReactCurrentBatchConfig,hd=t.ReactCurrentActQueue,Wo=0,Xq=1,xr=2,Ic=4,qh=0,Ky=1,w_=2,LI=3,qy=4,Jq=5,J4=6,Qi=Wo,Ta=null,js=null,Vo=Qe,wu=Qe,e5=Bg(Qe),Ho=qh,Gy=null,xI=Qe,Yy=Qe,DI=Qe,Zy=null,nl=null,t5=0,eG=500,tG=1/0,F_e=500,Gh=null;function Qy(){tG=ir()+F_e}function iG(){return tG}var kI=!1,i5=null,p0=null,y_=!1,Yg=null,Xy=Qe,n5=[],s5=null,B_e=50,Jy=0,o5=null,r5=!1,EI=!1,W_e=50,m0=0,II=null,eS=Ls,TI=Qe,nG=!1;function NI(){return Ta}function Na(){return(Qi&(xr|Ic))!==Wo?ir():(eS!==Ls||(eS=ir()),eS)}function Zg(d){var h=d.mode;if((h&Zi)===ei)return vi;if((Qi&xr)!==Wo&&Vo!==Qe)return Kw(Vo);var m=Ape()!==Mpe;if(m){if(Lr.transition!==null){var C=Lr.transition;C._updatedFibers||(C._updatedFibers=new Set),C._updatedFibers.add(d)}return TI===sr&&(TI=B$()),TI}var w=td();if(w!==sr)return w;var k=vge();return k}function V_e(d){var h=d.mode;return(h&Zi)===ei?vi:zue()}function zo(d,h,m,C){dve(),nG&&r("useInsertionEffect must not schedule updates."),r5&&(EI=!0),qw(d,m,C),(Qi&xr)!==Qe&&d===Ta?fve(h):(ed&&H$(d,h,m),gve(h),d===Ta&&((Qi&xr)===Wo&&(Yy=Ai(Yy,m)),Ho===qy&&Qg(d,Vo)),sl(d,C),m===vi&&Qi===Wo&&(h.mode&Zi)===ei&&!hd.isBatchingLegacy&&(Qy(),nK()))}function H_e(d,h,m){var C=d.current;C.lanes=h,qw(d,h,m),sl(d,m)}function z_e(d){return(Qi&xr)!==Wo}function sl(d,h){var m=d.callbackNode;Oue(d,h);var C=Xk(d,d===Ta?Vo:Qe);if(C===Qe){m!==null&&bG(m),d.callbackNode=null,d.callbackPriority=sr;return}var w=r_(C),k=d.callbackPriority;if(k===w&&!(hd.current!==null&&m!==f5)){m==null&&k!==vi&&r("Expected scheduled callback to exist. This error is likely caused by a bug in React. Please file an issue.");return}m!=null&&bG(m);var I;if(w===vi)d.tag===Wg?(hd.isBatchingLegacy!==null&&(hd.didScheduleLegacyUpdate=!0),mpe(rG.bind(null,d))):iK(rG.bind(null,d)),hd.current!==null?hd.current.push(Vg):Cge(function(){(Qi&(xr|Ic))===Wo&&Vg()}),I=null;else{var R;switch($$(C)){case Wl:R=Gk;break;case Bh:R=i2;break;case Wh:R=n_;break;case tE:R=n2;break;default:R=n_;break}I=g5(R,sG.bind(null,d))}d.callbackPriority=w,d.callbackNode=I}function sG(d,h){if(rme(),eS=Ls,TI=Qe,(Qi&(xr|Ic))!==Wo)throw new Error("Should not already be working.");var m=d.callbackNode,C=Zh();if(C&&d.callbackNode!==m)return null;var w=Xk(d,d===Ta?Vo:Qe);if(w===Qe)return null;var k=!Jk(d,w)&&!Hue(d,w)&&!h,I=k?X_e(d,w):MI(d,w);if(I!==qh){if(I===w_){var R=x2(d);R!==Qe&&(w=R,I=a5(d,R))}if(I===Ky){var O=Gy;throw S_(d,Qe),Qg(d,w),sl(d,ir()),O}if(I===J4)Qg(d,w);else{var U=!Jk(d,w),G=d.current.alternate;if(U&&!$_e(G)){if(I=MI(d,w),I===w_){var ce=x2(d);ce!==Qe&&(w=ce,I=a5(d,ce))}if(I===Ky){var le=Gy;throw S_(d,Qe),Qg(d,w),sl(d,ir()),le}}d.finishedWork=G,d.finishedLanes=w,U_e(d,I,w)}}return sl(d,ir()),d.callbackNode===m?sG.bind(null,d):null}function a5(d,h){var m=Zy;if(iE(d)){var C=S_(d,h);C.flags|=Mh,cpe(d.containerInfo)}var w=MI(d,h);if(w!==w_){var k=nl;nl=m,k!==null&&oG(k)}return w}function oG(d){nl===null?nl=d:nl.push.apply(nl,d)}function U_e(d,h,m){switch(h){case qh:case Ky:throw new Error("Root did not complete. This is a bug in React.");case w_:{L_(d,nl,Gh);break}case LI:{if(Qg(d,m),O$(m)&&!CG()){var C=t5+eG-ir();if(C>10){var w=Xk(d,Qe);if(w!==Qe)break;var k=d.suspendedLanes;if(!Vb(k,m)){Na(),V$(d,k);break}d.timeoutHandle=sF(L_.bind(null,d,nl,Gh),C);break}}L_(d,nl,Gh);break}case qy:{if(Qg(d,m),Vue(m))break;if(!CG()){var I=Aue(d,m),R=I,O=ir()-R,U=cve(O)-O;if(U>10){d.timeoutHandle=sF(L_.bind(null,d,nl,Gh),U);break}}L_(d,nl,Gh);break}case Jq:{L_(d,nl,Gh);break}default:throw new Error("Unknown root exit status.")}}function $_e(d){for(var h=d;;){if(h.flags&Kk){var m=h.updateQueue;if(m!==null){var C=m.stores;if(C!==null)for(var w=0;w<C.length;w++){var k=C[w],I=k.getSnapshot,R=k.value;try{if(!Hl(I(),R))return!1}catch{return!1}}}}var O=h.child;if(h.subtreeFlags&Kk&&O!==null){O.return=h,h=O;continue}if(h===d)return!0;for(;h.sibling===null;){if(h.return===null||h.return===d)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}return!0}function Qg(d,h){h=eE(h,DI),h=eE(h,Yy),$ue(d,h)}function rG(d){if(ame(),(Qi&(xr|Ic))!==Wo)throw new Error("Should not already be working.");Zh();var h=Xk(d,Qe);if(!Bl(h,vi))return sl(d,ir()),null;var m=MI(d,h);if(d.tag!==Wg&&m===w_){var C=x2(d);C!==Qe&&(h=C,m=a5(d,C))}if(m===Ky){var w=Gy;throw S_(d,Qe),Qg(d,h),sl(d,ir()),w}if(m===J4)throw new Error("Root did not complete. This is a bug in React.");var k=d.current.alternate;return d.finishedWork=k,d.finishedLanes=h,L_(d,nl,Gh),sl(d,ir()),null}function j_e(d,h){h!==Qe&&(I2(d,Ai(h,vi)),sl(d,ir()),(Qi&(xr|Ic))===Wo&&(Qy(),Vg()))}function l5(d,h){var m=Qi;Qi|=Xq;try{return d(h)}finally{Qi=m,Qi===Wo&&!hd.isBatchingLegacy&&(Qy(),nK())}}function K_e(d,h,m,C,w){var k=td(),I=Lr.transition;try{return Lr.transition=null,or(Wl),d(h,m,C,w)}finally{or(k),Lr.transition=I,Qi===Wo&&Qy()}}function Yh(d){Yg!==null&&Yg.tag===Wg&&(Qi&(xr|Ic))===Wo&&Zh();var h=Qi;Qi|=Xq;var m=Lr.transition,C=td();try{return Lr.transition=null,or(Wl),d?d():void 0}finally{or(C),Lr.transition=m,Qi=h,(Qi&(xr|Ic))===Wo&&Vg()}}function aG(){return(Qi&(xr|Ic))!==Wo}function RI(d,h){ia(e5,wu,d),wu=Ai(wu,h)}function c5(d){wu=e5.current,ta(e5,d)}function S_(d,h){d.finishedWork=null,d.finishedLanes=Qe;var m=d.timeoutHandle;if(m!==oF&&(d.timeoutHandle=oF,bge(m)),js!==null)for(var C=js.return;C!==null;){var w=C.alternate;Oq(w,C),C=C.return}Ta=d;var k=x_(d.current,null);return js=k,Vo=wu=h,Ho=qh,Gy=null,xI=Qe,Yy=Qe,DI=Qe,Zy=null,nl=null,Hpe(),sd.discardPendingWarnings(),k}function lG(d,h){do{var m=js;try{if(zE(),RK(),tr(),X4.current=null,m===null||m.return===null){Ho=Ky,Gy=h,js=null;return}if(tn&&m.mode&qn&&_I(m,!0),Bn)if(Ob(),h!==null&&typeof h=="object"&&typeof h.then=="function"){var C=h;yue(m,C,Vo)}else wue(m,h,Vo);mme(d,m.return,m,h,Vo),hG(m)}catch(w){h=w,js===m&&m!==null?(m=m.return,js=m):m=js;continue}return}while(!0)}function cG(){var d=Q4.current;return Q4.current=hI,d===null?hI:d}function dG(d){Q4.current=d}function q_e(){t5=ir()}function tS(d){xI=Ai(d,xI)}function G_e(){Ho===qh&&(Ho=LI)}function d5(){(Ho===qh||Ho===LI||Ho===w_)&&(Ho=qy),Ta!==null&&(D2(xI)||D2(Yy))&&Qg(Ta,Vo)}function Y_e(d){Ho!==qy&&(Ho=w_),Zy===null?Zy=[d]:Zy.push(d)}function Z_e(){return Ho===qh}function MI(d,h){var m=Qi;Qi|=xr;var C=cG();if(Ta!==d||Vo!==h){if(ed){var w=d.memoizedUpdaters;w.size>0&&(iS(d,Vo),w.clear()),z$(d,h)}Gh=U$(),S_(d,h)}N$(h);do try{Q_e();break}catch(k){lG(d,k)}while(!0);if(zE(),Qi=m,dG(C),js!==null)throw new Error("Cannot commit an incomplete root. This error is likely caused by a bug in React. Please file an issue.");return R$(),Ta=null,Vo=Qe,Ho}function Q_e(){for(;js!==null;)uG(js)}function X_e(d,h){var m=Qi;Qi|=xr;var C=cG();if(Ta!==d||Vo!==h){if(ed){var w=d.memoizedUpdaters;w.size>0&&(iS(d,Vo),w.clear()),z$(d,h)}Gh=U$(),Qy(),S_(d,h)}N$(h);do try{J_e();break}catch(k){lG(d,k)}while(!0);return zE(),dG(C),Qi=m,js!==null?(kue(),qh):(R$(),Ta=null,Vo=Qe,Ho)}function J_e(){for(;js!==null&&!tue();)uG(js)}function uG(d){var h=d.alternate;$s(d);var m;(d.mode&qn)!==ei?(f4(d),m=u5(h,d,wu),_I(d,!0)):m=u5(h,d,wu),tr(),d.memoizedProps=d.pendingProps,m===null?hG(d):js=m,X4.current=null}function hG(d){var h=d;do{var m=h.alternate,C=h.return;if((h.flags&Bw)===ri){$s(h);var w=void 0;if((h.mode&qn)===ei?w=Pq(m,h,wu):(f4(h),w=Pq(m,h,wu),_I(h,!1)),tr(),w!==null){js=w;return}}else{var k=Gme(m,h);if(k!==null){k.flags&=Yde,js=k;return}if((h.mode&qn)!==ei){_I(h,!1);for(var I=h.actualDuration,R=h.child;R!==null;)I+=R.actualDuration,R=R.sibling;h.actualDuration=I}if(C!==null)C.flags|=Bw,C.subtreeFlags=ri,C.deletions=null;else{Ho=J4,js=null;return}}var O=h.sibling;if(O!==null){js=O;return}h=C,js=h}while(h!==null);Ho===qh&&(Ho=Jq)}function L_(d,h,m){var C=td(),w=Lr.transition;try{Lr.transition=null,or(Wl),eve(d,h,m,C)}finally{Lr.transition=w,or(C)}return null}function eve(d,h,m,C){do Zh();while(Yg!==null);if(uve(),(Qi&(xr|Ic))!==Wo)throw new Error("Should not already be working.");var w=d.finishedWork,k=d.finishedLanes;if(gue(k),w===null)return E$(),null;if(k===Qe&&r("root.finishedLanes should not be empty during a commit. This is a bug in React."),d.finishedWork=null,d.finishedLanes=Qe,w===d.current)throw new Error("Cannot commit the same tree as before. This error is likely caused by a bug in React. Please file an issue.");d.callbackNode=null,d.callbackPriority=sr;var I=Ai(w.lanes,w.childLanes);jue(d,I),d===Ta&&(Ta=null,js=null,Vo=Qe),((w.subtreeFlags&Ab)!==ri||(w.flags&Ab)!==ri)&&(y_||(y_=!0,s5=m,g5(n_,function(){return Zh(),null})));var R=(w.subtreeFlags&(e2|t2|Ww|Ab))!==ri,O=(w.flags&(e2|t2|Ww|Ab))!==ri;if(R||O){var U=Lr.transition;Lr.transition=null;var G=td();or(Wl);var ce=Qi;Qi|=Ic,X4.current=null,Jme(d,w),nq(),f_e(d,w,k),hge(d.containerInfo),d.current=w,Sue(k),g_e(w,d,k),Lue(),iue(),Qi=ce,or(G),Lr.transition=U}else d.current=w,nq();var le=y_;if(y_?(y_=!1,Yg=d,Xy=k):(m0=0,II=null),I=d.pendingLanes,I===Qe&&(p0=null),le||mG(d.current,!1),cue(w.stateNode,C),ed&&d.memoizedUpdaters.clear(),M_e(),sl(d,ir()),h!==null)for(var we=d.onRecoverableError,De=0;De<h.length;De++){var We=h[De],yt=We.stack,Gt=We.digest;we(We.value,{componentStack:yt,digest:Gt})}if(kI){kI=!1;var Ht=i5;throw i5=null,Ht}return Bl(Xy,vi)&&d.tag!==Wg&&Zh(),I=d.pendingLanes,Bl(I,vi)?(ome(),d===o5?Jy++:(Jy=0,o5=d)):Jy=0,Vg(),E$(),null}function Zh(){if(Yg!==null){var d=$$(Xy),h=Yue(Wh,d),m=Lr.transition,C=td();try{return Lr.transition=null,or(h),ive()}finally{or(C),Lr.transition=m}}return!1}function tve(d){n5.push(d),y_||(y_=!0,g5(n_,function(){return Zh(),null}))}function ive(){if(Yg===null)return!1;var d=s5;s5=null;var h=Yg,m=Xy;if(Yg=null,Xy=Qe,(Qi&(xr|Ic))!==Wo)throw new Error("Cannot flush passive effects while already rendering.");r5=!0,EI=!1,xue(m);var C=Qi;Qi|=Ic,w_e(h.current),__e(h,h.current,m,d);{var w=n5;n5=[];for(var k=0;k<w.length;k++){var I=w[k];n_e(h,I)}}Due(),mG(h.current,!0),Qi=C,Vg(),EI?h===II?m0++:(m0=0,II=h):m0=0,r5=!1,EI=!1,due(h);{var R=h.current.stateNode;R.effectDuration=0,R.passiveEffectDuration=0}return!0}function fG(d){return p0!==null&&p0.has(d)}function nve(d){p0===null?p0=new Set([d]):p0.add(d)}function sve(d){kI||(kI=!0,i5=d)}var ove=sve;function gG(d,h,m){var C=b_(m,h),w=uq(d,C,vi),k=zg(d,w,vi),I=Na();k!==null&&(qw(k,vi,I),sl(k,I))}function vs(d,h,m){if(Zme(m),nS(!1),d.tag===f){gG(d,d,m);return}var C=null;for(C=h;C!==null;){if(C.tag===f){gG(C,d,m);return}else if(C.tag===c){var w=C.type,k=C.stateNode;if(typeof w.getDerivedStateFromError=="function"||typeof k.componentDidCatch=="function"&&!fG(k)){var I=b_(m,d),R=N4(C,I,vi),O=zg(C,R,vi),U=Na();O!==null&&(qw(O,vi,U),sl(O,U));return}}C=C.return}r(`Internal React error: Attempted to capture a commit phase error inside a detached tree. This indicates a bug in React. Likely causes include deleting the same fiber more than once, committing an already-finished tree, or an inconsistent return pointer.

Error message:

%s`,m)}function rve(d,h,m){var C=d.pingCache;C!==null&&C.delete(h);var w=Na();V$(d,m),pve(d),Ta===d&&Vb(Vo,m)&&(Ho===qy||Ho===LI&&O$(Vo)&&ir()-t5<eG?S_(d,Qe):DI=Ai(DI,m)),sl(d,w)}function pG(d,h){h===sr&&(h=V_e(d));var m=Na(),C=tl(d,h);C!==null&&(qw(C,h,m),sl(C,m))}function ave(d){var h=d.memoizedState,m=sr;h!==null&&(m=h.retryLane),pG(d,m)}function lve(d,h){var m=sr,C;switch(d.tag){case E:C=d.stateNode;var w=d.memoizedState;w!==null&&(m=w.retryLane);break;case K:C=d.stateNode;break;default:throw new Error("Pinged unknown suspense boundary type. This is probably a bug in React.")}C!==null&&C.delete(h),pG(d,m)}function cve(d){return d<120?120:d<480?480:d<1080?1080:d<1920?1920:d<3e3?3e3:d<4320?4320:O_e(d/1960)*1960}function dve(){if(Jy>B_e)throw Jy=0,o5=null,new Error("Maximum update depth exceeded. This can happen when a component repeatedly calls setState inside componentWillUpdate or componentDidUpdate. React limits the number of nested updates to prevent infinite loops.");m0>W_e&&(m0=0,II=null,r("Maximum update depth exceeded. This can happen when a component calls setState inside useEffect, but useEffect either doesn't have a dependency array, or one of the dependencies changes on every render."))}function uve(){sd.flushLegacyContextWarning(),sd.flushPendingUnsafeLifecycleWarnings()}function mG(d,h){$s(d),AI(d,Ph,T_e),h&&AI(d,qk,N_e),AI(d,Ph,E_e),h&&AI(d,qk,I_e),tr()}function AI(d,h,m){for(var C=d,w=null;C!==null;){var k=C.subtreeFlags&h;C!==w&&C.child!==null&&k!==ri?C=C.child:((C.flags&h)!==ri&&m(C),C.sibling!==null?C=C.sibling:C=w=C.return)}}var PI=null;function _G(d){{if((Qi&xr)!==Wo||!(d.mode&Zi))return;var h=d.tag;if(h!==u&&h!==f&&h!==c&&h!==l&&h!==x&&h!==N&&h!==M)return;var m=Ei(d)||"ReactComponent";if(PI!==null){if(PI.has(m))return;PI.add(m)}else PI=new Set([m]);var C=Jr;try{$s(d),r("Can't perform a React state update on a component that hasn't mounted yet. This indicates that you have a side-effect in your render function that asynchronously later calls tries to update the component. Move this work to useEffect instead.")}finally{C?$s(d):tr()}}}var u5;{var hve=null;u5=function(d,h,m){var C=xG(hve,h);try{return Tq(d,h,m)}catch(k){if(Lpe()||k!==null&&typeof k=="object"&&typeof k.then=="function")throw k;if(zE(),RK(),Oq(d,h),xG(h,C),h.mode&qn&&f4(h),GO(null,Tq,null,d,h,m),jde()){var w=YO();typeof w=="object"&&w!==null&&w._suppressLogging&&typeof k=="object"&&k!==null&&!k._suppressLogging&&(k._suppressLogging=!0)}throw k}}}var vG=!1,h5;h5=new Set;function fve(d){if(Ym&&!ime())switch(d.tag){case l:case x:case M:{var h=js&&Ei(js)||"Unknown",m=h;if(!h5.has(m)){h5.add(m);var C=Ei(d)||"Unknown";r("Cannot update a component (`%s`) while rendering a different component (`%s`). To locate the bad setState() call inside `%s`, follow the stack trace as described in https://reactjs.org/link/setstate-in-render",C,h,h)}break}case c:{vG||(r("Cannot update during an existing state transition (such as within `render`). Render methods should be a pure function of props and state."),vG=!0);break}}}function iS(d,h){if(ed){var m=d.memoizedUpdaters;m.forEach(function(C){H$(d,C,h)})}}var f5={};function g5(d,h){{var m=hd.current;return m!==null?(m.push(h),f5):k$(d,h)}}function bG(d){if(d!==f5)return eue(d)}function CG(){return hd.current!==null}function gve(d){{if(d.mode&Zi){if(!Qq())return}else if(!P_e()||Qi!==Wo||d.tag!==l&&d.tag!==x&&d.tag!==M)return;if(hd.current===null){var h=Jr;try{$s(d),r(`An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act`,Ei(d))}finally{h?$s(d):tr()}}}}function pve(d){d.tag!==Wg&&Qq()&&hd.current===null&&r(`A suspended resource finished loading inside a test, but the event was not wrapped in act(...).

When testing, code that resolves suspended data should be wrapped into act(...):

act(() => {
  /* finish loading suspended data */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act`)}function nS(d){nG=d}var Tc=null,_0=null,mve=function(d){Tc=d};function v0(d){{if(Tc===null)return d;var h=Tc(d);return h===void 0?d:h.current}}function p5(d){return v0(d)}function m5(d){{if(Tc===null)return d;var h=Tc(d);if(h===void 0){if(d!=null&&typeof d.render=="function"){var m=v0(d.render);if(d.render!==m){var C={$$typeof:ti,render:m};return d.displayName!==void 0&&(C.displayName=d.displayName),C}}return d}return h.current}}function wG(d,h){{if(Tc===null)return!1;var m=d.elementType,C=h.type,w=!1,k=typeof C=="object"&&C!==null?C.$$typeof:null;switch(d.tag){case c:{typeof C=="function"&&(w=!0);break}case l:{(typeof C=="function"||k===Pe)&&(w=!0);break}case x:{(k===ti||k===Pe)&&(w=!0);break}case N:case M:{(k===re||k===Pe)&&(w=!0);break}default:return!1}if(w){var I=Tc(m);if(I!==void 0&&I===Tc(C))return!0}return!1}}function yG(d){{if(Tc===null||typeof WeakSet!="function")return;_0===null&&(_0=new WeakSet),_0.add(d)}}var _ve=function(d,h){{if(Tc===null)return;var m=h.staleFamilies,C=h.updatedFamilies;Zh(),Yh(function(){_5(d.current,C,m)})}},vve=function(d,h){{if(d.context!==zl)return;Zh(),Yh(function(){sS(h,d,null,null)})}};function _5(d,h,m){{var C=d.alternate,w=d.child,k=d.sibling,I=d.tag,R=d.type,O=null;switch(I){case l:case M:case c:O=R;break;case x:O=R.render;break}if(Tc===null)throw new Error("Expected resolveFamily to be set during hot reload.");var U=!1,G=!1;if(O!==null){var ce=Tc(O);ce!==void 0&&(m.has(ce)?G=!0:h.has(ce)&&(I===c?G=!0:U=!0))}if(_0!==null&&(_0.has(d)||C!==null&&_0.has(C))&&(G=!0),G&&(d._debugNeedsRemount=!0),G||U){var le=tl(d,vi);le!==null&&zo(le,d,vi,Ls)}w!==null&&!G&&_5(w,h,m),k!==null&&_5(k,h,m)}}var bve=function(d,h){{var m=new Set,C=new Set(h.map(function(w){return w.current}));return v5(d.current,C,m),m}};function v5(d,h,m){{var C=d.child,w=d.sibling,k=d.tag,I=d.type,R=null;switch(k){case l:case M:case c:R=I;break;case x:R=I.render;break}var O=!1;R!==null&&h.has(R)&&(O=!0),O?Cve(d,m):C!==null&&v5(C,h,m),w!==null&&v5(w,h,m)}}function Cve(d,h){{var m=wve(d,h);if(m)return;for(var C=d;;){switch(C.tag){case p:h.add(C.stateNode);return;case g:h.add(C.stateNode.containerInfo);return;case f:h.add(C.stateNode.containerInfo);return}if(C.return===null)throw new Error("Expected to reach root first.");C=C.return}}}function wve(d,h){for(var m=d,C=!1;;){if(m.tag===p)C=!0,h.add(m.stateNode);else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===d)return C;for(;m.sibling===null;){if(m.return===null||m.return===d)return C;m=m.return}m.sibling.return=m.return,m=m.sibling}return!1}var b5;{b5=!1;try{var SG=Object.preventExtensions({})}catch{b5=!0}}function yve(d,h,m,C){this.tag=d,this.key=m,this.elementType=null,this.type=null,this.stateNode=null,this.return=null,this.child=null,this.sibling=null,this.index=0,this.ref=null,this.pendingProps=h,this.memoizedProps=null,this.updateQueue=null,this.memoizedState=null,this.dependencies=null,this.mode=C,this.flags=ri,this.subtreeFlags=ri,this.deletions=null,this.lanes=Qe,this.childLanes=Qe,this.alternate=null,this.actualDuration=Number.NaN,this.actualStartTime=Number.NaN,this.selfBaseDuration=Number.NaN,this.treeBaseDuration=Number.NaN,this.actualDuration=0,this.actualStartTime=-1,this.selfBaseDuration=0,this.treeBaseDuration=0,this._debugSource=null,this._debugOwner=null,this._debugNeedsRemount=!1,this._debugHookTypes=null,!b5&&typeof Object.preventExtensions=="function"&&Object.preventExtensions(this)}var Ul=function(d,h,m,C){return new yve(d,h,m,C)};function C5(d){var h=d.prototype;return!!(h&&h.isReactComponent)}function Sve(d){return typeof d=="function"&&!C5(d)&&d.defaultProps===void 0}function Lve(d){if(typeof d=="function")return C5(d)?c:l;if(d!=null){var h=d.$$typeof;if(h===ti)return x;if(h===re)return N}return u}function x_(d,h){var m=d.alternate;m===null?(m=Ul(d.tag,h,d.key,d.mode),m.elementType=d.elementType,m.type=d.type,m.stateNode=d.stateNode,m._debugSource=d._debugSource,m._debugOwner=d._debugOwner,m._debugHookTypes=d._debugHookTypes,m.alternate=d,d.alternate=m):(m.pendingProps=h,m.type=d.type,m.flags=ri,m.subtreeFlags=ri,m.deletions=null,m.actualDuration=0,m.actualStartTime=-1),m.flags=d.flags&Oh,m.childLanes=d.childLanes,m.lanes=d.lanes,m.child=d.child,m.memoizedProps=d.memoizedProps,m.memoizedState=d.memoizedState,m.updateQueue=d.updateQueue;var C=d.dependencies;switch(m.dependencies=C===null?null:{lanes:C.lanes,firstContext:C.firstContext},m.sibling=d.sibling,m.index=d.index,m.ref=d.ref,m.selfBaseDuration=d.selfBaseDuration,m.treeBaseDuration=d.treeBaseDuration,m._debugNeedsRemount=d._debugNeedsRemount,m.tag){case u:case l:case M:m.type=v0(d.type);break;case c:m.type=p5(d.type);break;case x:m.type=m5(d.type);break}return m}function xve(d,h){d.flags&=Oh|So;var m=d.alternate;if(m===null)d.childLanes=Qe,d.lanes=h,d.child=null,d.subtreeFlags=ri,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null,d.selfBaseDuration=0,d.treeBaseDuration=0;else{d.childLanes=m.childLanes,d.lanes=m.lanes,d.child=m.child,d.subtreeFlags=ri,d.deletions=null,d.memoizedProps=m.memoizedProps,d.memoizedState=m.memoizedState,d.updateQueue=m.updateQueue,d.type=m.type;var C=m.dependencies;d.dependencies=C===null?null:{lanes:C.lanes,firstContext:C.firstContext},d.selfBaseDuration=m.selfBaseDuration,d.treeBaseDuration=m.treeBaseDuration}return d}function Dve(d,h,m){var C;return d===RE?(C=Zi,h===!0&&(C|=to,C|=uu)):C=ei,ed&&(C|=qn),Ul(f,null,null,C)}function w5(d,h,m,C,w,k){var I=u,R=d;if(typeof d=="function")C5(d)?(I=c,R=p5(R)):R=v0(R);else if(typeof d=="string")I=p;else e:switch(d){case te:return Xg(m.children,w,k,h);case Ye:I=y,w|=to,(w&Zi)!==ei&&(w|=uu);break;case _t:return kve(m,w,k,h);case Ti:return Eve(m,w,k,h);case Je:return Ive(m,w,k,h);case jn:return LG(m,w,k,h);case Bs:case nt:case Mi:case er:case xi:default:{if(typeof d=="object"&&d!==null)switch(d.$$typeof){case qt:I=L;break e;case Wi:I=S;break e;case ti:I=x,R=m5(R);break e;case re:I=N;break e;case Pe:I=F,R=null;break e}var O="";{(d===void 0||typeof d=="object"&&d!==null&&Object.keys(d).length===0)&&(O+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var U=C?Ei(C):null;U&&(O+=`

Check the render method of \``+U+"`.")}throw new Error("Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) "+("but got: "+(d==null?d:typeof d)+"."+O))}}var G=Ul(I,m,h,w);return G.elementType=d,G.type=R,G.lanes=k,G._debugOwner=C,G}function y5(d,h,m){var C=null;C=d._owner;var w=d.type,k=d.key,I=d.props,R=w5(w,k,I,C,h,m);return R._debugSource=d._source,R._debugOwner=d._owner,R}function Xg(d,h,m,C){var w=Ul(b,d,C,h);return w.lanes=m,w}function kve(d,h,m,C){typeof d.id!="string"&&r('Profiler must specify an "id" of type `string` as a prop. Received the type `%s` instead.',typeof d.id);var w=Ul(D,d,C,h|qn);return w.elementType=_t,w.lanes=m,w.stateNode={effectDuration:0,passiveEffectDuration:0},w}function Eve(d,h,m,C){var w=Ul(E,d,C,h);return w.elementType=Ti,w.lanes=m,w}function Ive(d,h,m,C){var w=Ul(K,d,C,h);return w.elementType=Je,w.lanes=m,w}function LG(d,h,m,C){var w=Ul(q,d,C,h);w.elementType=jn,w.lanes=m;var k={isHidden:!1};return w.stateNode=k,w}function S5(d,h,m){var C=Ul(_,d,null,h);return C.lanes=m,C}function Tve(){var d=Ul(p,null,null,ei);return d.elementType="DELETED",d}function Nve(d){var h=Ul(Q,null,null,ei);return h.stateNode=d,h}function L5(d,h,m){var C=d.children!==null?d.children:[],w=Ul(g,C,d.key,h);return w.lanes=m,w.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},w}function xG(d,h){return d===null&&(d=Ul(u,null,null,ei)),d.tag=h.tag,d.key=h.key,d.elementType=h.elementType,d.type=h.type,d.stateNode=h.stateNode,d.return=h.return,d.child=h.child,d.sibling=h.sibling,d.index=h.index,d.ref=h.ref,d.pendingProps=h.pendingProps,d.memoizedProps=h.memoizedProps,d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.dependencies=h.dependencies,d.mode=h.mode,d.flags=h.flags,d.subtreeFlags=h.subtreeFlags,d.deletions=h.deletions,d.lanes=h.lanes,d.childLanes=h.childLanes,d.alternate=h.alternate,d.actualDuration=h.actualDuration,d.actualStartTime=h.actualStartTime,d.selfBaseDuration=h.selfBaseDuration,d.treeBaseDuration=h.treeBaseDuration,d._debugSource=h._debugSource,d._debugOwner=h._debugOwner,d._debugNeedsRemount=h._debugNeedsRemount,d._debugHookTypes=h._debugHookTypes,d}function Rve(d,h,m,C,w){this.tag=h,this.containerInfo=d,this.pendingChildren=null,this.current=null,this.pingCache=null,this.finishedWork=null,this.timeoutHandle=oF,this.context=null,this.pendingContext=null,this.callbackNode=null,this.callbackPriority=sr,this.eventTimes=E2(Qe),this.expirationTimes=E2(Ls),this.pendingLanes=Qe,this.suspendedLanes=Qe,this.pingedLanes=Qe,this.expiredLanes=Qe,this.mutableReadLanes=Qe,this.finishedLanes=Qe,this.entangledLanes=Qe,this.entanglements=E2(Qe),this.identifierPrefix=C,this.onRecoverableError=w,this.mutableSourceEagerHydrationData=null,this.effectDuration=0,this.passiveEffectDuration=0;{this.memoizedUpdaters=new Set;for(var k=this.pendingUpdatersLaneMap=[],I=0;I<o2;I++)k.push(new Set)}switch(h){case RE:this._debugRootType=m?"hydrateRoot()":"createRoot()";break;case Wg:this._debugRootType=m?"hydrate()":"render()";break}}function DG(d,h,m,C,w,k,I,R,O,U){var G=new Rve(d,h,m,R,O),ce=Dve(h,k);G.current=ce,ce.stateNode=G;{var le={element:C,isDehydrated:m,cache:null,transitions:null,pendingSuspenseBoundaries:null};ce.memoizedState=le}return FF(ce),G}var x5="18.3.1";function Mve(d,h,m){var C=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;return Xr(C),{$$typeof:Pl,key:C==null?null:""+C,children:d,containerInfo:h,implementation:m}}var D5,k5;D5=!1,k5={};function kG(d){if(!d)return zl;var h=Rb(d),m=ppe(h);if(h.tag===c){var C=h.type;if(gu(C))return eK(h,C,m)}return m}function Ave(d,h){{var m=Rb(d);if(m===void 0){if(typeof d.render=="function")throw new Error("Unable to find node on an unmounted component.");var C=Object.keys(d).join(",");throw new Error("Argument appears to not be a ReactComponent. Keys: "+C)}var w=L$(m);if(w===null)return null;if(w.mode&to){var k=Ei(m)||"Component";if(!k5[k]){k5[k]=!0;var I=Jr;try{$s(w),m.mode&to?r("%s is deprecated in StrictMode. %s was passed an instance of %s which is inside StrictMode. Instead, add a ref directly to the element you want to reference. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-find-node",h,h,k):r("%s is deprecated in StrictMode. %s was passed an instance of %s which renders StrictMode children. Instead, add a ref directly to the element you want to reference. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-find-node",h,h,k)}finally{I?$s(I):tr()}}}return w.stateNode}}function EG(d,h,m,C,w,k,I,R){var O=!1,U=null;return DG(d,h,O,U,m,C,w,k,I)}function IG(d,h,m,C,w,k,I,R,O,U){var G=!0,ce=DG(m,C,G,d,w,k,I,R,O);ce.context=kG(null);var le=ce.current,we=Na(),De=Zg(le),We=jh(we,De);return We.callback=h??null,zg(le,We,De),H_e(ce,De,we),ce}function sS(d,h,m,C){lue(h,d);var w=h.current,k=Na(),I=Zg(w);Eue(I);var R=kG(m);h.context===null?h.context=R:h.pendingContext=R,Ym&&Jr!==null&&!D5&&(D5=!0,r(`Render methods should be a pure function of props and state; triggering nested component updates from render is not allowed. If necessary, trigger nested updates in componentDidUpdate.

Check the render method of %s.`,Ei(Jr)||"Unknown"));var O=jh(k,I);O.payload={element:d},C=C===void 0?null:C,C!==null&&(typeof C!="function"&&r("render(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",C),O.callback=C);var U=zg(w,O,I);return U!==null&&(zo(U,w,I,k),qE(U,w,I)),I}function OI(d){var h=d.current;if(!h.child)return null;switch(h.child.tag){case p:return h.child.stateNode;default:return h.child.stateNode}}function Pve(d){switch(d.tag){case f:{var h=d.stateNode;if(iE(h)){var m=Fue(h);j_e(h,m)}break}case E:{Yh(function(){var w=tl(d,vi);if(w!==null){var k=Na();zo(w,d,vi,k)}});var C=vi;E5(d,C);break}}}function TG(d,h){var m=d.memoizedState;m!==null&&m.dehydrated!==null&&(m.retryLane=Uue(m.retryLane,h))}function E5(d,h){TG(d,h);var m=d.alternate;m&&TG(m,h)}function Ove(d){if(d.tag===E){var h=Uw,m=tl(d,h);if(m!==null){var C=Na();zo(m,d,h,C)}E5(d,h)}}function Fve(d){if(d.tag===E){var h=Zg(d),m=tl(d,h);if(m!==null){var C=Na();zo(m,d,h,C)}E5(d,h)}}function NG(d){var h=Jde(d);return h===null?null:h.stateNode}var RG=function(d){return null};function Bve(d){return RG(d)}var MG=function(d){return!1};function Wve(d){return MG(d)}var AG=null,PG=null,OG=null,FG=null,BG=null,WG=null,VG=null,HG=null,zG=null;{var UG=function(d,h,m){var C=h[m],w=In(d)?d.slice():Ki({},d);return m+1===h.length?(In(w)?w.splice(C,1):delete w[C],w):(w[C]=UG(d[C],h,m+1),w)},$G=function(d,h){return UG(d,h,0)},jG=function(d,h,m,C){var w=h[C],k=In(d)?d.slice():Ki({},d);if(C+1===h.length){var I=m[C];k[I]=k[w],In(k)?k.splice(w,1):delete k[w]}else k[w]=jG(d[w],h,m,C+1);return k},KG=function(d,h,m){if(h.length!==m.length){s("copyWithRename() expects paths of the same length");return}else for(var C=0;C<m.length-1;C++)if(h[C]!==m[C]){s("copyWithRename() expects paths to be the same except for the deepest key");return}return jG(d,h,m,0)},qG=function(d,h,m,C){if(m>=h.length)return C;var w=h[m],k=In(d)?d.slice():Ki({},d);return k[w]=qG(d[w],h,m+1,C),k},GG=function(d,h,m){return qG(d,h,0,m)},I5=function(d,h){for(var m=d.memoizedState;m!==null&&h>0;)m=m.next,h--;return m};AG=function(d,h,m,C){var w=I5(d,h);if(w!==null){var k=GG(w.memoizedState,m,C);w.memoizedState=k,w.baseState=k,d.memoizedProps=Ki({},d.memoizedProps);var I=tl(d,vi);I!==null&&zo(I,d,vi,Ls)}},PG=function(d,h,m){var C=I5(d,h);if(C!==null){var w=$G(C.memoizedState,m);C.memoizedState=w,C.baseState=w,d.memoizedProps=Ki({},d.memoizedProps);var k=tl(d,vi);k!==null&&zo(k,d,vi,Ls)}},OG=function(d,h,m,C){var w=I5(d,h);if(w!==null){var k=KG(w.memoizedState,m,C);w.memoizedState=k,w.baseState=k,d.memoizedProps=Ki({},d.memoizedProps);var I=tl(d,vi);I!==null&&zo(I,d,vi,Ls)}},FG=function(d,h,m){d.pendingProps=GG(d.memoizedProps,h,m),d.alternate&&(d.alternate.pendingProps=d.pendingProps);var C=tl(d,vi);C!==null&&zo(C,d,vi,Ls)},BG=function(d,h){d.pendingProps=$G(d.memoizedProps,h),d.alternate&&(d.alternate.pendingProps=d.pendingProps);var m=tl(d,vi);m!==null&&zo(m,d,vi,Ls)},WG=function(d,h,m){d.pendingProps=KG(d.memoizedProps,h,m),d.alternate&&(d.alternate.pendingProps=d.pendingProps);var C=tl(d,vi);C!==null&&zo(C,d,vi,Ls)},VG=function(d){var h=tl(d,vi);h!==null&&zo(h,d,vi,Ls)},HG=function(d){RG=d},zG=function(d){MG=d}}function Vve(d){var h=L$(d);return h===null?null:h.stateNode}function Hve(d){return null}function zve(){return Jr}function Uve(d){var h=d.findFiberByHostInstance,m=t.ReactCurrentDispatcher;return aue({bundleType:d.bundleType,version:d.version,rendererPackageName:d.rendererPackageName,rendererConfig:d.rendererConfig,overrideHookState:AG,overrideHookStateDeletePath:PG,overrideHookStateRenamePath:OG,overrideProps:FG,overridePropsDeletePath:BG,overridePropsRenamePath:WG,setErrorHandler:HG,setSuspenseHandler:zG,scheduleUpdate:VG,currentDispatcherRef:m,findHostInstanceByFiber:Vve,findFiberByHostInstance:h||Hve,findHostInstancesForRefresh:bve,scheduleRefresh:_ve,scheduleRoot:vve,setRefreshHandler:mve,getCurrentFiber:zve,reconcilerVersion:x5})}var YG=typeof reportError=="function"?reportError:function(d){console.error(d)};function T5(d){this._internalRoot=d}FI.prototype.render=T5.prototype.render=function(d){var h=this._internalRoot;if(h===null)throw new Error("Cannot update an unmounted root.");{typeof arguments[1]=="function"?r("render(...): does not support the second callback argument. To execute a side effect after rendering, declare it in a component body with useEffect()."):BI(arguments[1])?r("You passed a container to the second argument of root.render(...). You don't need to pass it again since you already passed it to create the root."):typeof arguments[1]<"u"&&r("You passed a second argument to root.render(...) but it only accepts one argument.");var m=h.containerInfo;if(m.nodeType!==yo){var C=NG(h.current);C&&C.parentNode!==m&&r("render(...): It looks like the React-rendered content of the root container was removed without using React. This is not supported and will cause errors. Instead, call root.unmount() to empty a root's container.")}}sS(d,h,null,null)},FI.prototype.unmount=T5.prototype.unmount=function(){typeof arguments[0]=="function"&&r("unmount(...): does not support a callback argument. To execute a side effect after rendering, declare it in a component body with useEffect().");var d=this._internalRoot;if(d!==null){this._internalRoot=null;var h=d.containerInfo;aG()&&r("Attempted to synchronously unmount a root while React was already rendering. React cannot finish unmounting the root until the current render has completed, which may lead to a race condition."),Yh(function(){sS(null,d,null,null)}),Yj(h)}};function $ve(d,h){if(!BI(d))throw new Error("createRoot(...): Target container is not a DOM element.");ZG(d);var m=!1,C=!1,w="",k=YG;h!=null&&(h.hydrate?s("hydrate through createRoot is deprecated. Use ReactDOMClient.hydrateRoot(container, <App />) instead."):typeof h=="object"&&h!==null&&h.$$typeof===Da&&r(`You passed a JSX element to createRoot. You probably meant to call root.render instead. Example usage:

  let root = createRoot(domContainer);
  root.render(<App />);`),h.unstable_strictMode===!0&&(m=!0),h.identifierPrefix!==void 0&&(w=h.identifierPrefix),h.onRecoverableError!==void 0&&(k=h.onRecoverableError),h.transitionCallbacks!==void 0&&h.transitionCallbacks);var I=EG(d,RE,null,m,C,w,k);xE(I.current,d);var R=d.nodeType===yo?d.parentNode:d;return dy(R),new T5(I)}function FI(d){this._internalRoot=d}function jve(d){d&&rhe(d)}FI.prototype.unstable_scheduleHydration=jve;function Kve(d,h,m){if(!BI(d))throw new Error("hydrateRoot(...): Target container is not a DOM element.");ZG(d),h===void 0&&r("Must provide initial children as second argument to hydrateRoot. Example usage: hydrateRoot(domContainer, <App />)");var C=m??null,w=m!=null&&m.hydratedSources||null,k=!1,I=!1,R="",O=YG;m!=null&&(m.unstable_strictMode===!0&&(k=!0),m.identifierPrefix!==void 0&&(R=m.identifierPrefix),m.onRecoverableError!==void 0&&(O=m.onRecoverableError));var U=IG(h,null,d,RE,C,k,I,R,O);if(xE(U.current,d),dy(d),w)for(var G=0;G<w.length;G++){var ce=w[G];Zpe(U,ce)}return new FI(U)}function BI(d){return!!(d&&(d.nodeType===Ja||d.nodeType===Rh||d.nodeType===FO||!qe))}function oS(d){return!!(d&&(d.nodeType===Ja||d.nodeType===Rh||d.nodeType===FO||d.nodeType===yo&&d.nodeValue===" react-mount-point-unstable "))}function ZG(d){d.nodeType===Ja&&d.tagName&&d.tagName.toUpperCase()==="BODY"&&r("createRoot(): Creating roots directly with document.body is discouraged, since its children are often manipulated by third-party scripts and browser extensions. This may lead to subtle reconciliation issues. Try using a container element created for your app."),wy(d)&&(d._reactRootContainer?r("You are calling ReactDOMClient.createRoot() on a container that was previously passed to ReactDOM.render(). This is not supported."):r("You are calling ReactDOMClient.createRoot() on a container that has already been passed to createRoot() before. Instead, call root.render() on the existing root instead if you want to update it."))}var qve=t.ReactCurrentOwner,QG;QG=function(d){if(d._reactRootContainer&&d.nodeType!==yo){var h=NG(d._reactRootContainer.current);h&&h.parentNode!==d&&r("render(...): It looks like the React-rendered content of this container was removed without using React. This is not supported and will cause errors. Instead, call ReactDOM.unmountComponentAtNode to empty a container.")}var m=!!d._reactRootContainer,C=N5(d),w=!!(C&&Fg(C));w&&!m&&r("render(...): Replacing React-rendered children with a new root component. If you intended to update the children of this node, you should instead have the existing children update their state and render the new components instead of calling ReactDOM.render."),d.nodeType===Ja&&d.tagName&&d.tagName.toUpperCase()==="BODY"&&r("render(): Rendering components directly into document.body is discouraged, since its children are often manipulated by third-party scripts and browser extensions. This may lead to subtle reconciliation issues. Try rendering into a container element created for your app.")};function N5(d){return d?d.nodeType===Rh?d.documentElement:d.firstChild:null}function XG(){}function Gve(d,h,m,C,w){if(w){if(typeof C=="function"){var k=C;C=function(){var le=OI(I);k.call(le)}}var I=IG(h,C,d,Wg,null,!1,!1,"",XG);d._reactRootContainer=I,xE(I.current,d);var R=d.nodeType===yo?d.parentNode:d;return dy(R),Yh(),I}else{for(var O;O=d.lastChild;)d.removeChild(O);if(typeof C=="function"){var U=C;C=function(){var le=OI(G);U.call(le)}}var G=EG(d,Wg,null,!1,!1,"",XG);d._reactRootContainer=G,xE(G.current,d);var ce=d.nodeType===yo?d.parentNode:d;return dy(ce),Yh(function(){sS(h,G,m,C)}),G}}function Yve(d,h){d!==null&&typeof d!="function"&&r("%s(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",h,d)}function WI(d,h,m,C,w){QG(m),Yve(w===void 0?null:w,"render");var k=m._reactRootContainer,I;if(!k)I=Gve(m,h,d,w,C);else{if(I=k,typeof w=="function"){var R=w;w=function(){var O=OI(I);R.call(O)}}sS(h,I,d,w)}return OI(I)}var JG=!1;function Zve(d){{JG||(JG=!0,r("findDOMNode is deprecated and will be removed in the next major release. Instead, add a ref directly to the element you want to reference. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-find-node"));var h=qve.current;if(h!==null&&h.stateNode!==null){var m=h.stateNode._warnedAboutRefsInRender;m||r("%s is accessing findDOMNode inside its render(). render() should be a pure function of props and state. It should never access something that requires stale data from the previous render, such as refs. Move this logic to componentDidMount and componentDidUpdate instead.",hn(h.type)||"A component"),h.stateNode._warnedAboutRefsInRender=!0}}return d==null?null:d.nodeType===Ja?d:Ave(d,"findDOMNode")}function Qve(d,h,m){if(r("ReactDOM.hydrate is no longer supported in React 18. Use hydrateRoot instead. Until you switch to the new API, your app will behave as if it's running React 17. Learn more: https://reactjs.org/link/switch-to-createroot"),!oS(h))throw new Error("Target container is not a DOM element.");{var C=wy(h)&&h._reactRootContainer===void 0;C&&r("You are calling ReactDOM.hydrate() on a container that was previously passed to ReactDOMClient.createRoot(). This is not supported. Did you mean to call hydrateRoot(container, element)?")}return WI(null,d,h,!0,m)}function Xve(d,h,m){if(r("ReactDOM.render is no longer supported in React 18. Use createRoot instead. Until you switch to the new API, your app will behave as if it's running React 17. Learn more: https://reactjs.org/link/switch-to-createroot"),!oS(h))throw new Error("Target container is not a DOM element.");{var C=wy(h)&&h._reactRootContainer===void 0;C&&r("You are calling ReactDOM.render() on a container that was previously passed to ReactDOMClient.createRoot(). This is not supported. Did you mean to call root.render(element)?")}return WI(null,d,h,!1,m)}function Jve(d,h,m,C){if(r("ReactDOM.unstable_renderSubtreeIntoContainer() is no longer supported in React 18. Consider using a portal instead. Until you switch to the createRoot API, your app will behave as if it's running React 17. Learn more: https://reactjs.org/link/switch-to-createroot"),!oS(m))throw new Error("Target container is not a DOM element.");if(d==null||!Kde(d))throw new Error("parentComponent must be a valid React Component");return WI(d,h,m,!1,C)}var eY=!1;function ebe(d){if(eY||(eY=!0,r("unmountComponentAtNode is deprecated and will be removed in the next major release. Switch to the createRoot API. Learn more: https://reactjs.org/link/switch-to-createroot")),!oS(d))throw new Error("unmountComponentAtNode(...): Target container is not a DOM element.");{var h=wy(d)&&d._reactRootContainer===void 0;h&&r("You are calling ReactDOM.unmountComponentAtNode() on a container that was previously passed to ReactDOMClient.createRoot(). This is not supported. Did you mean to call root.unmount()?")}if(d._reactRootContainer){{var m=N5(d),C=m&&!Fg(m);C&&r("unmountComponentAtNode(): The node you're attempting to unmount was rendered by another copy of React.")}return Yh(function(){WI(null,null,d,!1,function(){d._reactRootContainer=null,Yj(d)})}),!0}else{{var w=N5(d),k=!!(w&&Fg(w)),I=d.nodeType===Ja&&oS(d.parentNode)&&!!d.parentNode._reactRootContainer;k&&r("unmountComponentAtNode(): The node you're attempting to unmount was rendered by React and is not a top-level container. %s",I?"You may have accidentally passed in a React root node instead of its container.":"Instead, have the parent component update its state and rerender in order to remove this component.")}return!1}}Zue(Pve),Xue(Ove),Jue(Fve),ehe(td),the(que),(typeof Map!="function"||Map.prototype==null||typeof Map.prototype.forEach!="function"||typeof Set!="function"||Set.prototype==null||typeof Set.prototype.clear!="function"||typeof Set.prototype.forEach!="function")&&r("React depends on Map and Set built-in types. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),Pde(ige),Bde(l5,K_e,Yh);function tbe(d,h){var m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!BI(h))throw new Error("Target container is not a DOM element.");return Mve(d,h,null,m)}function ibe(d,h,m,C){return Jve(d,h,m,C)}var R5={usingClientEntryPoint:!1,Events:[Fg,Yb,DE,h$,f$,l5]};function nbe(d,h){return R5.usingClientEntryPoint||r('You are importing createRoot from "react-dom" which is not supported. You should instead import it from "react-dom/client".'),$ve(d,h)}function sbe(d,h,m){return R5.usingClientEntryPoint||r('You are importing hydrateRoot from "react-dom" which is not supported. You should instead import it from "react-dom/client".'),Kve(d,h,m)}function obe(d){return aG()&&r("flushSync was called from inside a lifecycle method. React cannot flush when React is already rendering. Consider moving this call to a scheduler task or micro task."),Yh(d)}var rbe=Uve({findFiberByHostInstance:d_,bundleType:1,version:x5,rendererPackageName:"react-dom"});if(!rbe&&Dn&&window.top===window.self&&(navigator.userAgent.indexOf("Chrome")>-1&&navigator.userAgent.indexOf("Edge")===-1||navigator.userAgent.indexOf("Firefox")>-1)){var tY=window.location.protocol;/^(https?|file):$/.test(tY)&&console.info("%cDownload the React DevTools for a better development experience: https://reactjs.org/link/react-devtools"+(tY==="file:"?`
You might need to use a local HTTP server (instead of file://): https://reactjs.org/link/react-devtools-faq`:""),"font-weight:bold")}Gl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R5,Gl.createPortal=tbe,Gl.createRoot=nbe,Gl.findDOMNode=Zve,Gl.flushSync=obe,Gl.hydrate=Qve,Gl.hydrateRoot=sbe,Gl.render=Xve,Gl.unmountComponentAtNode=ebe,Gl.unstable_batchedUpdates=l5,Gl.unstable_renderSubtreeIntoContainer=ibe,Gl.version=x5,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)})();Ete.exports=Gl;var fbe=Ete.exports,A5=fbe;{var VI=A5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;jB.createRoot=function(o,e){VI.usingClientEntryPoint=!0;try{return A5.createRoot(o,e)}finally{VI.usingClientEntryPoint=!1}},jB.hydrateRoot=function(o,e,t){VI.usingClientEntryPoint=!0;try{return A5.hydrateRoot(o,e,t)}finally{VI.usingClientEntryPoint=!1}}}function gbe(o){return new Worker(""+new URL("editor.worker-GzTmaUIK.js",import.meta.url).href,{name:o==null?void 0:o.name})}function pbe(o){return new Worker(""+new URL("json.worker-D_NTgjnn.js",import.meta.url).href,{name:o==null?void 0:o.name})}function mbe(o){return new Worker(""+new URL("ts.worker-B9dUIdCT.js",import.meta.url).href,{name:o==null?void 0:o.name})}const _be=`declare module "varhub:room" {
	/**
	 * Define all events dispatched by room controller
	 * @see RoomEvents#join
	 * @see RoomEvents#leave
	 * @see RoomEvents#online
	 * @see RoomEvents#offline
	 * @see RoomEvents#connectionJoin
	 * @see RoomEvents#connectionClosed
	 */
	type RoomEvents = {
		/**
		 * a new player joins the room.
		 * event is not dispatched if the player joins again from another session
		 * @param player name of joined player
		 */
		join: [player: string];
		/**
		 * a player leaves the room.
		 * event is not dispatched if the player closes session
		 * event dispatched only manually by \`room.kick\`
		 * @params name of leaved player
		 */
		leave: [player: string];
		/**
		 * a player joined again in new session
		 * @param player name of player who connected again
		 */
		online: [player: string];
		/**
		 * a player close all sessions
		 *
		 * Example: remove player when he had closes all sessions
		 * \`\`\`typescript
		 * 	room.on("offline", (player: string) => room.kick(player));
		 * \`\`\`
		 * @param player name of player who disconnected
		 */
		offline: [player: string];
		/**
		 * new connection created
		 *
		 * it can be a new player or existing player with new connection.
		 *
		 * \`connectionJoin\` emits after \`join\` event
		 *
		 * @param player name of player
		 * @param connection connection id
		 */
		connectionJoin: [player: string, connection: number];
		/**
		 * connection closed
		 *
		 * \`connectionClosed\` emits before \`offline\` and \`leave\` events
		 *
		 * @param player name of player
		 * @param connection connection id
		 * @param reason reason
		 */
		connectionClosed: [player: string, connection: number, reason: null | string];
	}
	
	class Room {
		/**
		 * public message of the room.
		 */
		get message(): string;
		/**
		 * change public message of the room. Set null to make room private.
		 * @param value
		 */
		set message(value: string | null);
		
		/**
		 * is room closed. New players can not join a closed room.
		 */
		get closed(): boolean;
		/**
		 * set room closed
		 */
		set closed(value: boolean);
		
		/**
		 * destroy this room.
		 */
		destroy(): void;
		
		/**
		 * check if player online
		 * @returns \`undefined\` if player is kicked or has not yet joined
		 */
		isPlayerOnline(player: string): boolean | undefined;
		
		/**
		 * check if player online
		 * @returns \`false\` if player offline or not yet joined
		 */
		isOnline(player: string): boolean;
		
		/**
		 * check if connection online
		 */
		isOnline(connection: number): boolean;
		/**
		 * check if player joined. \`room.getPlayers().includes(name)\`
		 */
		hasPlayer(player: string): boolean;
		
		/**
		 * kick player and close all sessions
		 * @returns \`true\` on success, otherwise \`false\`
		 */
		kick(player: string, reason?: string|null): boolean;
		
		/**
		 * kick one session of player
		 * @returns \`true\` on success, otherwise \`false\`
		 */
		kick(connection: number, reason?: string|null): boolean;
		/**
		 * send message to player
		 *
		 * Example
		 * \`\`\`typescript
		 *	room.on("join", (player) => {
		 *		room.send(player, "chatMessage", {
		 *			from: "system",
		 *			message: "Welcome, "+player+"!"
		 *		});
		 *	})
		 * \`\`\`
		 * @returns true if player online
		 */
		send(player: string, ...args: any[]): boolean;
		
		/**
		 * send message to special connection
		 *
		 * Example
		 * \`\`\`typescript
		 *	room.on("connectionJoin", (player, connection) => {
		 *		room.send(connection, "state", getCurrentState());
		 *	})
		 * \`\`\`
		 * @returns true if player online
		 */
		send(connection: number, ...args: any[]): boolean;
		/**
		 * send message to all players
		 *
		 * Example
		 * \`\`\`ts
		 * 	room.on("join", (player) => {
		 * 		room.broadcast("chatMessage", {
		 * 			from: "system",
		 * 			message: "New player connected: "+player;
		 * 		});
		 * 	})
		 * \`\`\`
		 */
		broadcast(...args: any[]): void;
		/**
		 * get player's data saved on first connection
		 */
		getPlayerData(player: string): unknown;
		/**
		 * get all established connections of player
		 * @returns
		 *
		 * \`undefined\` if there are no player
		 *
		 * \`[]\` if player offline
		 */
		getPlayerConnections(player: string): undefined | number[];
		/**
		 * list of all (online & offline) players
		 */
		getPlayers(): string[];
		
		/**
		 * Subscribe on room event.
		 * @see RoomEvents
		 */
		on<T extends keyof RoomEvents>(event: T, handler: (...args: RoomEvents[T]) => void): this;
		/**
		 * Subscribe on room event once.
		 * @see RoomEvents
		 */
		once<T extends keyof RoomEvents>(event: T, handler: (...args: RoomEvents[T]) => void): this;
		/**
		 * Unsubscribe from room event.
		 * @see RoomEvents
		 */
		off<T extends keyof RoomEvents>(event: T, handler: (...args: RoomEvents[T]) => void): this;
	}
	export type { Room };
	/**
	 * Controller of this room state.
	 */
	const room: Room;
	export default room;
}

declare module "varhub:events" {
	export class EventEmitter<M extends Record<any, any[]>> {
		on<T extends keyof M>(event: T, handler: (...args: M[T]) => void): this;
		once<T extends keyof M>(event: T, handler: (...args: M[T]) => void): this;
		off<T extends keyof M>(event: T, handler: (...args: M[T]) => void): this;
		emit<T extends keyof M>(event: T, ...args: M[T]): boolean
	}
}

declare module "varhub:config" {
	/**
	 * config of this room. Config is created with room.
	 */
	const config: unknown;
	export default config;
}

declare module "varhub:performance" {
	/** performance.now() */
	export const now: () => number;
}
`,vbe=`declare module "varhub:api/network" {
	export interface NetworkApi {
		fetch<T extends keyof BodyType>(url: string, params?: FetchParams<T>): Promise<FetchResult<T>>
	}
	type BodyType = {
		json: unknown;
		text: string;
		arrayBuffer: ArrayBuffer;
		formData: Array<[string, string | FileJson]>
	}

	interface FileJson {
		type: string,
		size: number,
		name: string,
		lastModified: number,
		data: ArrayBuffer
	}

	export type FetchParams<T extends keyof BodyType = keyof BodyType> = {
		type?: T
		method?: RequestInit["method"],
		headers?: Record<string, string>,
		body?: string | ArrayBuffer | Array<[string, string] | [string, FileJson] | [string, ArrayBuffer, string]>
		redirect?: RequestInit["redirect"],
		credentials?: RequestInit["credentials"]
		mode?: RequestInit["mode"]
		referrer?: RequestInit["referrer"]
		referrerPolicy?: RequestInit["referrerPolicy"]
	};

	export interface FetchResult<T extends keyof BodyType = keyof BodyType> {
		url: string,
		ok: boolean,
		type: string,
		statusText: string,
		redirected: boolean,
		status: number,
		headers: Record<string, string>,
		body: BodyType[T],
	}

	const api: NetworkApi
	export default api;
}

`;function Kl(o,e=0){return o[o.length-(1+e)]}function bbe(o){if(o.length===0)throw new Error("Invalid tail call");return[o.slice(0,o.length-1),o[o.length-1]]}function zn(o,e,t=(i,n)=>i===n){if(o===e)return!0;if(!o||!e||o.length!==e.length)return!1;for(let i=0,n=o.length;i<n;i++)if(!t(o[i],e[i]))return!1;return!0}function Cbe(o,e){const t=o.length-1;e<t&&(o[e]=o[t]),o.pop()}function KL(o,e,t){return wbe(o.length,i=>t(o[i],e))}function wbe(o,e){let t=0,i=o-1;for(;t<=i;){const n=(t+i)/2|0,s=e(n);if(s<0)t=n+1;else if(s>0)i=n-1;else return n}return-(t+1)}function KB(o,e,t){if(o=o|0,o>=e.length)throw new TypeError("invalid index");const i=e[Math.floor(e.length*Math.random())],n=[],s=[],r=[];for(const a of e){const l=t(a,i);l<0?n.push(a):l>0?s.push(a):r.push(a)}return o<n.length?KB(o,n,t):o<n.length+r.length?r[0]:KB(o-(n.length+r.length),s,t)}function sY(o,e){const t=[];let i;for(const n of o.slice(0).sort(e))!i||e(i[0],n)!==0?(i=[n],t.push(i)):i.push(n);return t}function*CV(o,e){let t,i;for(const n of o)i!==void 0&&e(i,n)?t.push(n):(t&&(yield t),t=[n]),i=n;t&&(yield t)}function Nte(o,e){for(let t=0;t<=o.length;t++)e(t===0?void 0:o[t-1],t===o.length?void 0:o[t])}function ybe(o,e){for(let t=0;t<o.length;t++)e(t===0?void 0:o[t-1],o[t],t+1===o.length?void 0:o[t+1])}function Ud(o){return o.filter(e=>!!e)}function oY(o){let e=0;for(let t=0;t<o.length;t++)o[t]&&(o[e]=o[t],e+=1);o.length=e}function Rte(o){return!Array.isArray(o)||o.length===0}function Yo(o){return Array.isArray(o)&&o.length>0}function eg(o,e=t=>t){const t=new Set;return o.filter(i=>{const n=e(i);return t.has(n)?!1:(t.add(n),!0)})}function wV(o,e){return o.length>0?o[0]:e}function la(o,e){let t=typeof e=="number"?o:0;typeof e=="number"?t=o:(t=0,e=o);const i=[];if(t<=e)for(let n=t;n<e;n++)i.push(n);else for(let n=t;n>e;n--)i.push(n);return i}function lA(o,e,t){const i=o.slice(0,e),n=o.slice(e);return i.concat(t,n)}function P5(o,e){const t=o.indexOf(e);t>-1&&(o.splice(t,1),o.unshift(e))}function HI(o,e){const t=o.indexOf(e);t>-1&&(o.splice(t,1),o.push(e))}function qB(o,e){for(const t of e)o.push(t)}function yV(o){return Array.isArray(o)?o:[o]}function Sbe(o,e,t){const i=Mte(o,e),n=o.length,s=t.length;o.length=n+s;for(let r=n-1;r>=i;r--)o[r+s]=o[r];for(let r=0;r<s;r++)o[r+i]=t[r]}function rY(o,e,t,i){const n=Mte(o,e);let s=o.splice(n,t);return s===void 0&&(s=[]),Sbe(o,n,i),s}function Mte(o,e){return e<0?Math.max(e+o.length,0):Math.min(e,o.length)}var qL;(function(o){function e(s){return s<0}o.isLessThan=e;function t(s){return s<=0}o.isLessThanOrEqual=t;function i(s){return s>0}o.isGreaterThan=i;function n(s){return s===0}o.isNeitherLessOrGreaterThan=n,o.greaterThan=1,o.lessThan=-1,o.neitherLessOrGreaterThan=0})(qL||(qL={}));function ac(o,e){return(t,i)=>e(o(t),o(i))}function Lbe(...o){return(e,t)=>{for(const i of o){const n=i(e,t);if(!qL.isNeitherLessOrGreaterThan(n))return n}return qL.neitherLessOrGreaterThan}}const Uf=(o,e)=>o-e,xbe=(o,e)=>Uf(o?1:0,e?1:0);function Ate(o){return(e,t)=>-o(e,t)}class tg{constructor(e){this.items=e,this.firstIdx=0,this.lastIdx=this.items.length-1}get length(){return this.lastIdx-this.firstIdx+1}takeWhile(e){let t=this.firstIdx;for(;t<this.items.length&&e(this.items[t]);)t++;const i=t===this.firstIdx?null:this.items.slice(this.firstIdx,t);return this.firstIdx=t,i}takeFromEndWhile(e){let t=this.lastIdx;for(;t>=0&&e(this.items[t]);)t--;const i=t===this.lastIdx?null:this.items.slice(t+1,this.lastIdx+1);return this.lastIdx=t,i}peek(){if(this.length!==0)return this.items[this.firstIdx]}dequeue(){const e=this.items[this.firstIdx];return this.firstIdx++,e}takeCount(e){const t=this.items.slice(this.firstIdx,this.firstIdx+e);return this.firstIdx+=e,t}}class nh{constructor(e){this.iterate=e}toArray(){const e=[];return this.iterate(t=>(e.push(t),!0)),e}filter(e){return new nh(t=>this.iterate(i=>e(i)?t(i):!0))}map(e){return new nh(t=>this.iterate(i=>t(e(i))))}findLast(e){let t;return this.iterate(i=>(e(i)&&(t=i),!0)),t}findLastMaxBy(e){let t,i=!0;return this.iterate(n=>((i||qL.isGreaterThan(e(n,t)))&&(i=!1,t=n),!0)),t}}nh.empty=new nh(o=>{});class tR{constructor(e){this._indexMap=e}static createSortPermutation(e,t){const i=Array.from(e.keys()).sort((n,s)=>t(e[n],e[s]));return new tR(i)}apply(e){return e.map((t,i)=>e[this._indexMap[i]])}inverse(){const e=this._indexMap.slice();for(let t=0;t<this._indexMap.length;t++)e[this._indexMap[t]]=t;return new tR(e)}}function Ur(o){return typeof o=="string"}function Br(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)&&!(o instanceof RegExp)&&!(o instanceof Date)}function Dbe(o){const e=Object.getPrototypeOf(Uint8Array);return typeof o=="object"&&o instanceof e}function om(o){return typeof o=="number"&&!isNaN(o)}function aY(o){return!!o&&typeof o[Symbol.iterator]=="function"}function Pte(o){return o===!0||o===!1}function Wa(o){return typeof o>"u"}function sh(o){return!pl(o)}function pl(o){return Wa(o)||o===null}function wi(o,e){if(!o)throw new Error(e?`Unexpected type, expected '${e}'`:"Unexpected type")}function Dp(o){if(pl(o))throw new Error("Assertion Failed: argument is undefined or null");return o}function GL(o){return typeof o=="function"}function kbe(o,e){const t=Math.min(o.length,e.length);for(let i=0;i<t;i++)Ebe(o[i],e[i])}function Ebe(o,e){if(Ur(e)){if(typeof o!==e)throw new Error(`argument does not match constraint: typeof ${e}`)}else if(GL(e)){try{if(o instanceof e)return}catch{}if(!pl(o)&&o.constructor===e||e.length===1&&e.call(void 0,o)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}function gf(o){if(!o||typeof o!="object"||o instanceof RegExp)return o;const e=Array.isArray(o)?[]:{};return Object.entries(o).forEach(([t,i])=>{e[t]=i&&typeof i=="object"?gf(i):i}),e}function Ibe(o){if(!o||typeof o!="object")return o;const e=[o];for(;e.length>0;){const t=e.shift();Object.freeze(t);for(const i in t)if(Ote.call(t,i)){const n=t[i];typeof n=="object"&&!Object.isFrozen(n)&&!Dbe(n)&&e.push(n)}}return o}const Ote=Object.prototype.hasOwnProperty;function Fte(o,e){return GB(o,e,new Set)}function GB(o,e,t){if(pl(o))return o;const i=e(o);if(typeof i<"u")return i;if(Array.isArray(o)){const n=[];for(const s of o)n.push(GB(s,e,t));return n}if(Br(o)){if(t.has(o))throw new Error("Cannot clone recursive data-structure");t.add(o);const n={};for(const s in o)Ote.call(o,s)&&(n[s]=GB(o[s],e,t));return t.delete(o),n}return o}function cA(o,e,t=!0){return Br(o)?(Br(e)&&Object.keys(e).forEach(i=>{i in o?t&&(Br(o[i])&&Br(e[i])?cA(o[i],e[i],t):o[i]=e[i]):o[i]=e[i]}),o):e}function wl(o,e){if(o===e)return!0;if(o==null||e===null||e===void 0||typeof o!=typeof e||typeof o!="object"||Array.isArray(o)!==Array.isArray(e))return!1;let t,i;if(Array.isArray(o)){if(o.length!==e.length)return!1;for(t=0;t<o.length;t++)if(!wl(o[t],e[t]))return!1}else{const n=[];for(i in o)n.push(i);n.sort();const s=[];for(i in e)s.push(i);if(s.sort(),!wl(n,s))return!1;for(t=0;t<n.length;t++)if(!wl(o[n[t]],e[n[t]]))return!1}return!0}function Tbe(o){let e=[];for(;Object.prototype!==o;)e=e.concat(Object.getOwnPropertyNames(o)),o=Object.getPrototypeOf(o);return e}function SV(o){const e=[];for(const t of Tbe(o))typeof o[t]=="function"&&e.push(t);return e}function Nbe(o,e){const t=n=>function(){const s=Array.prototype.slice.call(arguments,0);return e(n,s)},i={};for(const n of o)i[n]=t(n);return i}let Rbe=typeof document<"u"&&document.location&&document.location.hash.indexOf("pseudo=true")>=0;function Bte(o,e){let t;return e.length===0?t=o:t=o.replace(/\{(\d+)\}/g,(i,n)=>{const s=n[0],r=e[s];let a=i;return typeof r=="string"?a=r:(typeof r=="number"||typeof r=="boolean"||r===void 0||r===null)&&(a=String(r)),a}),Rbe&&(t=""+t.replace(/[aouei]/g,"$&$&")+""),t}function v(o,e,...t){return Bte(e,t)}function di(o,e,...t){const i=Bte(e,t);return{value:i,original:i}}var O5,F5;const Y0="en";let iR=!1,nR=!1,hN=!1,Wte=!1,LV=!1,xV=!1,Vte=!1,zI,fN=Y0,lY=Y0,Mbe,pd;const $f=globalThis;let Er;typeof $f.vscode<"u"&&typeof $f.vscode.process<"u"?Er=$f.vscode.process:typeof process<"u"&&typeof((O5=process==null?void 0:process.versions)===null||O5===void 0?void 0:O5.node)=="string"&&(Er=process);const Abe=typeof((F5=Er==null?void 0:Er.versions)===null||F5===void 0?void 0:F5.electron)=="string",Pbe=Abe&&(Er==null?void 0:Er.type)==="renderer";if(typeof Er=="object"){iR=Er.platform==="win32",nR=Er.platform==="darwin",hN=Er.platform==="linux",hN&&Er.env.SNAP&&Er.env.SNAP_REVISION,Er.env.CI||Er.env.BUILD_ARTIFACTSTAGINGDIRECTORY,zI=Y0,fN=Y0;const o=Er.env.VSCODE_NLS_CONFIG;if(o)try{const e=JSON.parse(o),t=e.availableLanguages["*"];zI=e.locale,lY=e.osLocale,fN=t||Y0,Mbe=e._translationsConfigFile}catch{}Wte=!0}else typeof navigator=="object"&&!Pbe?(pd=navigator.userAgent,iR=pd.indexOf("Windows")>=0,nR=pd.indexOf("Macintosh")>=0,xV=(pd.indexOf("Macintosh")>=0||pd.indexOf("iPad")>=0||pd.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,hN=pd.indexOf("Linux")>=0,Vte=(pd==null?void 0:pd.indexOf("Mobi"))>=0,LV=!0,v({key:"ensureLoaderPluginIsLoaded",comment:["{Locked}"]},"_"),zI=Y0,fN=zI,lY=navigator.language):console.error("Unable to resolve platform.");const Mo=iR,Kt=nR,jr=hN,Od=Wte,Mm=LV,Obe=LV&&typeof $f.importScripts=="function",Fbe=Obe?$f.origin:void 0,$d=xV,Hte=Vte,uh=pd,Bbe=fN,Wbe=typeof $f.postMessage=="function"&&!$f.importScripts,zte=(()=>{if(Wbe){const o=[];$f.addEventListener("message",t=>{if(t.data&&t.data.vscodeScheduleAsyncWork)for(let i=0,n=o.length;i<n;i++){const s=o[i];if(s.id===t.data.vscodeScheduleAsyncWork){o.splice(i,1),s.callback();return}}});let e=0;return t=>{const i=++e;o.push({id:i,callback:t}),$f.postMessage({vscodeScheduleAsyncWork:i},"*")}}return o=>setTimeout(o)})(),Va=nR||xV?2:iR?1:3;let cY=!0,dY=!1;function Ute(){if(!dY){dY=!0;const o=new Uint8Array(2);o[0]=1,o[1]=2,cY=new Uint16Array(o.buffer)[0]===513}return cY}const $te=!!(uh&&uh.indexOf("Chrome")>=0),Vbe=!!(uh&&uh.indexOf("Firefox")>=0),Hbe=!!(!$te&&uh&&uh.indexOf("Safari")>=0),zbe=!!(uh&&uh.indexOf("Edg/")>=0),Ube=!!(uh&&uh.indexOf("Android")>=0),Ko={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!0,independentColorPoolPerBracketType:!1}};var ii;(function(o){function e(x){return x&&typeof x=="object"&&typeof x[Symbol.iterator]=="function"}o.is=e;const t=Object.freeze([]);function i(){return t}o.empty=i;function*n(x){yield x}o.single=n;function s(x){return e(x)?x:n(x)}o.wrap=s;function r(x){return x||t}o.from=r;function*a(x){for(let D=x.length-1;D>=0;D--)yield x[D]}o.reverse=a;function l(x){return!x||x[Symbol.iterator]().next().done===!0}o.isEmpty=l;function c(x){return x[Symbol.iterator]().next().value}o.first=c;function u(x,D){for(const E of x)if(D(E))return!0;return!1}o.some=u;function f(x,D){for(const E of x)if(D(E))return E}o.find=f;function*g(x,D){for(const E of x)D(E)&&(yield E)}o.filter=g;function*p(x,D){let E=0;for(const N of x)yield D(N,E++)}o.map=p;function*_(...x){for(const D of x)yield*D}o.concat=_;function b(x,D,E){let N=E;for(const M of x)N=D(N,M);return N}o.reduce=b;function*y(x,D,E=x.length){for(D<0&&(D+=x.length),E<0?E+=x.length:E>x.length&&(E=x.length);D<E;D++)yield x[D]}o.slice=y;function S(x,D=Number.POSITIVE_INFINITY){const E=[];if(D===0)return[E,x];const N=x[Symbol.iterator]();for(let M=0;M<D;M++){const F=N.next();if(F.done)return[E,o.empty()];E.push(F.value)}return[E,{[Symbol.iterator](){return N}}]}o.consume=S;async function L(x){const D=[];for await(const E of x)D.push(E);return Promise.resolve(D)}o.asyncToArray=L})(ii||(ii={}));let Ms=class YB{constructor(e){this.element=e,this.next=YB.Undefined,this.prev=YB.Undefined}};Ms.Undefined=new Ms(void 0);class Wr{constructor(){this._first=Ms.Undefined,this._last=Ms.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===Ms.Undefined}clear(){let e=this._first;for(;e!==Ms.Undefined;){const t=e.next;e.prev=Ms.Undefined,e.next=Ms.Undefined,e=t}this._first=Ms.Undefined,this._last=Ms.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){const i=new Ms(e);if(this._first===Ms.Undefined)this._first=i,this._last=i;else if(t){const s=this._last;this._last=i,i.prev=s,s.next=i}else{const s=this._first;this._first=i,i.next=s,s.prev=i}this._size+=1;let n=!1;return()=>{n||(n=!0,this._remove(i))}}shift(){if(this._first!==Ms.Undefined){const e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==Ms.Undefined){const e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==Ms.Undefined&&e.next!==Ms.Undefined){const t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===Ms.Undefined&&e.next===Ms.Undefined?(this._first=Ms.Undefined,this._last=Ms.Undefined):e.next===Ms.Undefined?(this._last=this._last.prev,this._last.next=Ms.Undefined):e.prev===Ms.Undefined&&(this._first=this._first.next,this._first.prev=Ms.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==Ms.Undefined;)yield e.element,e=e.next}}const jte="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";function $be(o=""){let e="(-?\\d*\\.\\d\\w*)|([^";for(const t of jte)o.indexOf(t)>=0||(e+="\\"+t);return e+="\\s]+)",new RegExp(e,"g")}const DV=$be();function kV(o){let e=DV;if(o&&o instanceof RegExp)if(o.global)e=o;else{let t="g";o.ignoreCase&&(t+="i"),o.multiline&&(t+="m"),o.unicode&&(t+="u"),e=new RegExp(o.source,t)}return e.lastIndex=0,e}const Kte=new Wr;Kte.unshift({maxLen:1e3,windowSize:15,timeBudget:150});function YL(o,e,t,i,n){if(e=kV(e),n||(n=ii.first(Kte)),t.length>n.maxLen){let c=o-n.maxLen/2;return c<0?c=0:i+=c,t=t.substring(c,o+n.maxLen/2),YL(o,e,t,i,n)}const s=Date.now(),r=o-1-i;let a=-1,l=null;for(let c=1;!(Date.now()-s>=n.timeBudget);c++){const u=r-n.windowSize*c;e.lastIndex=Math.max(0,u);const f=jbe(e,t,r,a);if(!f&&l||(l=f,u<=0))break;a=u}if(l){const c={word:l[0],startColumn:i+1+l.index,endColumn:i+1+l.index+l[0].length};return e.lastIndex=0,c}return null}function jbe(o,e,t,i){let n;for(;n=o.exec(e);){const s=n.index||0;if(s<=t&&o.lastIndex>=t)return n;if(i>0&&s>i)return null}return null}const Iu=8;class qte{constructor(e){this._values=e}hasChanged(e){return this._values[e]}}class Gte{constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}}class Rn{constructor(e,t,i,n){this.id=e,this.name=t,this.defaultValue=i,this.schema=n}applyUpdate(e,t){return dA(e,t)}compute(e,t,i){return i}}class uL{constructor(e,t){this.newValue=e,this.didChange=t}}function dA(o,e){if(typeof o!="object"||typeof e!="object"||!o||!e)return new uL(e,o!==e);if(Array.isArray(o)||Array.isArray(e)){const i=Array.isArray(o)&&Array.isArray(e)&&zn(o,e);return new uL(e,!i)}let t=!1;for(const i in e)if(e.hasOwnProperty(i)){const n=dA(o[i],e[i]);n.didChange&&(o[i]=n.newValue,t=!0)}return new uL(o,t)}class ND{constructor(e){this.schema=void 0,this.id=e,this.name="_never_",this.defaultValue=void 0}applyUpdate(e,t){return dA(e,t)}validate(e){return this.defaultValue}}class $1{constructor(e,t,i,n){this.id=e,this.name=t,this.defaultValue=i,this.schema=n}applyUpdate(e,t){return dA(e,t)}validate(e){return typeof e>"u"?this.defaultValue:e}compute(e,t,i){return i}}function st(o,e){return typeof o>"u"?e:o==="false"?!1:!!o}class hi extends $1{constructor(e,t,i,n=void 0){typeof n<"u"&&(n.type="boolean",n.default=i),super(e,t,i,n)}validate(e){return st(e,this.defaultValue)}}function F_(o,e,t,i){if(typeof o>"u")return e;let n=parseInt(o,10);return isNaN(n)?e:(n=Math.max(t,n),n=Math.min(i,n),n|0)}class Ji extends $1{static clampedInt(e,t,i,n){return F_(e,t,i,n)}constructor(e,t,i,n,s,r=void 0){typeof r<"u"&&(r.type="integer",r.default=i,r.minimum=n,r.maximum=s),super(e,t,i,r),this.minimum=n,this.maximum=s}validate(e){return Ji.clampedInt(e,this.defaultValue,this.minimum,this.maximum)}}function Kbe(o,e,t,i){if(typeof o>"u")return e;const n=ic.float(o,e);return ic.clamp(n,t,i)}class ic extends $1{static clamp(e,t,i){return e<t?t:e>i?i:e}static float(e,t){if(typeof e=="number")return e;if(typeof e>"u")return t;const i=parseFloat(e);return isNaN(i)?t:i}constructor(e,t,i,n,s){typeof s<"u"&&(s.type="number",s.default=i),super(e,t,i,s),this.validationFn=n}validate(e){return this.validationFn(ic.float(e,this.defaultValue))}}class Nr extends $1{static string(e,t){return typeof e!="string"?t:e}constructor(e,t,i,n=void 0){typeof n<"u"&&(n.type="string",n.default=i),super(e,t,i,n)}validate(e){return Nr.string(e,this.defaultValue)}}function is(o,e,t,i){return typeof o!="string"?e:i&&o in i?i[o]:t.indexOf(o)===-1?e:o}class Zn extends $1{constructor(e,t,i,n,s=void 0){typeof s<"u"&&(s.type="string",s.enum=n,s.default=i),super(e,t,i,s),this._allowedValues=n}validate(e){return is(e,this.defaultValue,this._allowedValues)}}class UI extends Rn{constructor(e,t,i,n,s,r,a=void 0){typeof a<"u"&&(a.type="string",a.enum=s,a.default=n),super(e,t,i,a),this._allowedValues=s,this._convert=r}validate(e){return typeof e!="string"?this.defaultValue:this._allowedValues.indexOf(e)===-1?this.defaultValue:this._convert(e)}}function qbe(o){switch(o){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}}class Gbe extends Rn{constructor(){super(2,"accessibilitySupport",0,{type:"string",enum:["auto","on","off"],enumDescriptions:[v("accessibilitySupport.auto","Use platform APIs to detect when a Screen Reader is attached."),v("accessibilitySupport.on","Optimize for usage with a Screen Reader."),v("accessibilitySupport.off","Assume a screen reader is not attached.")],default:"auto",tags:["accessibility"],description:v("accessibilitySupport","Controls if the UI should run in a mode where it is optimized for screen readers.")})}validate(e){switch(e){case"auto":return 0;case"off":return 1;case"on":return 2}return this.defaultValue}compute(e,t,i){return i===0?e.accessibilitySupport:i}}class Ybe extends Rn{constructor(){const e={insertSpace:!0,ignoreEmptyLines:!0};super(23,"comments",e,{"editor.comments.insertSpace":{type:"boolean",default:e.insertSpace,description:v("comments.insertSpace","Controls whether a space character is inserted when commenting.")},"editor.comments.ignoreEmptyLines":{type:"boolean",default:e.ignoreEmptyLines,description:v("comments.ignoreEmptyLines","Controls if empty lines should be ignored with toggle, add or remove actions for line comments.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertSpace:st(t.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:st(t.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}}function Zbe(o){switch(o){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}}var po;(function(o){o[o.Line=1]="Line",o[o.Block=2]="Block",o[o.Underline=3]="Underline",o[o.LineThin=4]="LineThin",o[o.BlockOutline=5]="BlockOutline",o[o.UnderlineThin=6]="UnderlineThin"})(po||(po={}));function Qbe(o){switch(o){case"line":return po.Line;case"block":return po.Block;case"underline":return po.Underline;case"line-thin":return po.LineThin;case"block-outline":return po.BlockOutline;case"underline-thin":return po.UnderlineThin}}class Xbe extends ND{constructor(){super(142)}compute(e,t,i){const n=["monaco-editor"];return t.get(39)&&n.push(t.get(39)),e.extraEditorClassName&&n.push(e.extraEditorClassName),t.get(74)==="default"?n.push("mouse-default"):t.get(74)==="copy"&&n.push("mouse-copy"),t.get(111)&&n.push("showUnused"),t.get(140)&&n.push("showDeprecated"),n.join(" ")}}class Jbe extends hi{constructor(){super(37,"emptySelectionClipboard",!0,{description:v("emptySelectionClipboard","Controls whether copying without a selection copies the current line.")})}compute(e,t,i){return i&&e.emptySelectionClipboard}}class e0e extends Rn{constructor(){const e={cursorMoveOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0};super(41,"find",e,{"editor.find.cursorMoveOnType":{type:"boolean",default:e.cursorMoveOnType,description:v("find.cursorMoveOnType","Controls whether the cursor should jump to find matches while typing.")},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:e.seedSearchStringFromSelection,enumDescriptions:[v("editor.find.seedSearchStringFromSelection.never","Never seed search string from the editor selection."),v("editor.find.seedSearchStringFromSelection.always","Always seed search string from the editor selection, including word at cursor position."),v("editor.find.seedSearchStringFromSelection.selection","Only seed search string from the editor selection.")],description:v("find.seedSearchStringFromSelection","Controls whether the search string in the Find Widget is seeded from the editor selection.")},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:e.autoFindInSelection,enumDescriptions:[v("editor.find.autoFindInSelection.never","Never turn on Find in Selection automatically (default)."),v("editor.find.autoFindInSelection.always","Always turn on Find in Selection automatically."),v("editor.find.autoFindInSelection.multiline","Turn on Find in Selection automatically when multiple lines of content are selected.")],description:v("find.autoFindInSelection","Controls the condition for turning on Find in Selection automatically.")},"editor.find.globalFindClipboard":{type:"boolean",default:e.globalFindClipboard,description:v("find.globalFindClipboard","Controls whether the Find Widget should read or modify the shared find clipboard on macOS."),included:Kt},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:e.addExtraSpaceOnTop,description:v("find.addExtraSpaceOnTop","Controls whether the Find Widget should add extra lines on top of the editor. When true, you can scroll beyond the first line when the Find Widget is visible.")},"editor.find.loop":{type:"boolean",default:e.loop,description:v("find.loop","Controls whether the search automatically restarts from the beginning (or the end) when no further matches can be found.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{cursorMoveOnType:st(t.cursorMoveOnType,this.defaultValue.cursorMoveOnType),seedSearchStringFromSelection:typeof e.seedSearchStringFromSelection=="boolean"?e.seedSearchStringFromSelection?"always":"never":is(t.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:typeof e.autoFindInSelection=="boolean"?e.autoFindInSelection?"always":"never":is(t.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:st(t.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:st(t.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:st(t.loop,this.defaultValue.loop)}}}class ml extends Rn{constructor(){super(51,"fontLigatures",ml.OFF,{anyOf:[{type:"boolean",description:v("fontLigatures","Enables/Disables font ligatures ('calt' and 'liga' font features). Change this to a string for fine-grained control of the 'font-feature-settings' CSS property.")},{type:"string",description:v("fontFeatureSettings","Explicit 'font-feature-settings' CSS property. A boolean can be passed instead if one only needs to turn on/off ligatures.")}],description:v("fontLigaturesGeneral","Configures font ligatures or font features. Can be either a boolean to enable/disable ligatures or a string for the value of the CSS 'font-feature-settings' property."),default:!1})}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e==="false"||e.length===0?ml.OFF:e==="true"?ml.ON:e:e?ml.ON:ml.OFF}}ml.OFF='"liga" off, "calt" off';ml.ON='"liga" on, "calt" on';class Td extends Rn{constructor(){super(54,"fontVariations",Td.OFF,{anyOf:[{type:"boolean",description:v("fontVariations","Enables/Disables the translation from font-weight to font-variation-settings. Change this to a string for fine-grained control of the 'font-variation-settings' CSS property.")},{type:"string",description:v("fontVariationSettings","Explicit 'font-variation-settings' CSS property. A boolean can be passed instead if one only needs to translate font-weight to font-variation-settings.")}],description:v("fontVariationsGeneral","Configures font variations. Can be either a boolean to enable/disable the translation from font-weight to font-variation-settings or a string for the value of the CSS 'font-variation-settings' property."),default:!1})}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e==="false"?Td.OFF:e==="true"?Td.TRANSLATE:e:e?Td.TRANSLATE:Td.OFF}compute(e,t,i){return e.fontInfo.fontVariationSettings}}Td.OFF="normal";Td.TRANSLATE="translate";class t0e extends ND{constructor(){super(50)}compute(e,t,i){return e.fontInfo}}class i0e extends $1{constructor(){super(52,"fontSize",ga.fontSize,{type:"number",minimum:6,maximum:100,default:ga.fontSize,description:v("fontSize","Controls the font size in pixels.")})}validate(e){const t=ic.float(e,this.defaultValue);return t===0?ga.fontSize:ic.clamp(t,6,100)}compute(e,t,i){return e.fontInfo.fontSize}}class Hu extends Rn{constructor(){super(53,"fontWeight",ga.fontWeight,{anyOf:[{type:"number",minimum:Hu.MINIMUM_VALUE,maximum:Hu.MAXIMUM_VALUE,errorMessage:v("fontWeightErrorMessage",'Only "normal" and "bold" keywords or numbers between 1 and 1000 are allowed.')},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:Hu.SUGGESTION_VALUES}],default:ga.fontWeight,description:v("fontWeight",'Controls the font weight. Accepts "normal" and "bold" keywords or numbers between 1 and 1000.')})}validate(e){return e==="normal"||e==="bold"?e:String(Ji.clampedInt(e,ga.fontWeight,Hu.MINIMUM_VALUE,Hu.MAXIMUM_VALUE))}}Hu.SUGGESTION_VALUES=["normal","bold","100","200","300","400","500","600","700","800","900"];Hu.MINIMUM_VALUE=1;Hu.MAXIMUM_VALUE=1e3;class n0e extends Rn{constructor(){const e={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:""},t={type:"string",enum:["peek","gotoAndPeek","goto"],default:e.multiple,enumDescriptions:[v("editor.gotoLocation.multiple.peek","Show Peek view of the results (default)"),v("editor.gotoLocation.multiple.gotoAndPeek","Go to the primary result and show a Peek view"),v("editor.gotoLocation.multiple.goto","Go to the primary result and enable Peek-less navigation to others")]},i=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(58,"gotoLocation",e,{"editor.gotoLocation.multiple":{deprecationMessage:v("editor.gotoLocation.multiple.deprecated","This setting is deprecated, please use separate settings like 'editor.editor.gotoLocation.multipleDefinitions' or 'editor.editor.gotoLocation.multipleImplementations' instead.")},"editor.gotoLocation.multipleDefinitions":{description:v("editor.editor.gotoLocation.multipleDefinitions","Controls the behavior the 'Go to Definition'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleTypeDefinitions":{description:v("editor.editor.gotoLocation.multipleTypeDefinitions","Controls the behavior the 'Go to Type Definition'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleDeclarations":{description:v("editor.editor.gotoLocation.multipleDeclarations","Controls the behavior the 'Go to Declaration'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleImplementations":{description:v("editor.editor.gotoLocation.multipleImplemenattions","Controls the behavior the 'Go to Implementations'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleReferences":{description:v("editor.editor.gotoLocation.multipleReferences","Controls the behavior the 'Go to References'-command when multiple target locations exist."),...t},"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:e.alternativeDefinitionCommand,enum:i,description:v("alternativeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Definition' is the current location.")},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:e.alternativeTypeDefinitionCommand,enum:i,description:v("alternativeTypeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Type Definition' is the current location.")},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:e.alternativeDeclarationCommand,enum:i,description:v("alternativeDeclarationCommand","Alternative command id that is being executed when the result of 'Go to Declaration' is the current location.")},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:e.alternativeImplementationCommand,enum:i,description:v("alternativeImplementationCommand","Alternative command id that is being executed when the result of 'Go to Implementation' is the current location.")},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:e.alternativeReferenceCommand,enum:i,description:v("alternativeReferenceCommand","Alternative command id that is being executed when the result of 'Go to Reference' is the current location.")}})}validate(e){var t,i,n,s,r;if(!e||typeof e!="object")return this.defaultValue;const a=e;return{multiple:is(a.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:(t=a.multipleDefinitions)!==null&&t!==void 0?t:is(a.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:(i=a.multipleTypeDefinitions)!==null&&i!==void 0?i:is(a.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:(n=a.multipleDeclarations)!==null&&n!==void 0?n:is(a.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:(s=a.multipleImplementations)!==null&&s!==void 0?s:is(a.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:(r=a.multipleReferences)!==null&&r!==void 0?r:is(a.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:Nr.string(a.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:Nr.string(a.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:Nr.string(a.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:Nr.string(a.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:Nr.string(a.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand)}}}class s0e extends Rn{constructor(){const e={enabled:!0,delay:300,hidingDelay:300,sticky:!0,above:!0};super(60,"hover",e,{"editor.hover.enabled":{type:"boolean",default:e.enabled,description:v("hover.enabled","Controls whether the hover is shown.")},"editor.hover.delay":{type:"number",default:e.delay,minimum:0,maximum:1e4,description:v("hover.delay","Controls the delay in milliseconds after which the hover is shown.")},"editor.hover.sticky":{type:"boolean",default:e.sticky,description:v("hover.sticky","Controls whether the hover should remain visible when mouse is moved over it.")},"editor.hover.hidingDelay":{type:"integer",minimum:0,default:e.hidingDelay,description:v("hover.hidingDelay","Controls the delay in milliseconds after which the hover is hidden. Requires `editor.hover.sticky` to be enabled.")},"editor.hover.above":{type:"boolean",default:e.above,description:v("hover.above","Prefer showing hovers above the line, if there's space.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:st(t.enabled,this.defaultValue.enabled),delay:Ji.clampedInt(t.delay,this.defaultValue.delay,0,1e4),sticky:st(t.sticky,this.defaultValue.sticky),hidingDelay:Ji.clampedInt(t.hidingDelay,this.defaultValue.hidingDelay,0,6e5),above:st(t.above,this.defaultValue.above)}}}class CC extends ND{constructor(){super(145)}compute(e,t,i){return CC.computeLayout(t,{memory:e.memory,outerWidth:e.outerWidth,outerHeight:e.outerHeight,isDominatedByLongLines:e.isDominatedByLongLines,lineHeight:e.fontInfo.lineHeight,viewLineCount:e.viewLineCount,lineNumbersDigitCount:e.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:e.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:e.fontInfo.maxDigitWidth,pixelRatio:e.pixelRatio,glyphMarginDecorationLaneCount:e.glyphMarginDecorationLaneCount})}static computeContainedMinimapLineCount(e){const t=e.height/e.lineHeight,i=Math.floor(e.paddingTop/e.lineHeight);let n=Math.floor(e.paddingBottom/e.lineHeight);e.scrollBeyondLastLine&&(n=Math.max(n,t-1));const s=(i+e.viewLineCount+n)/(e.pixelRatio*e.height),r=Math.floor(e.viewLineCount/s);return{typicalViewportLineCount:t,extraLinesBeforeFirstLine:i,extraLinesBeyondLastLine:n,desiredRatio:s,minimapLineCount:r}}static _computeMinimapLayout(e,t){const i=e.outerWidth,n=e.outerHeight,s=e.pixelRatio;if(!e.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(s*n),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:n};const r=t.stableMinimapLayoutInput,a=r&&e.outerHeight===r.outerHeight&&e.lineHeight===r.lineHeight&&e.typicalHalfwidthCharacterWidth===r.typicalHalfwidthCharacterWidth&&e.pixelRatio===r.pixelRatio&&e.scrollBeyondLastLine===r.scrollBeyondLastLine&&e.paddingTop===r.paddingTop&&e.paddingBottom===r.paddingBottom&&e.minimap.enabled===r.minimap.enabled&&e.minimap.side===r.minimap.side&&e.minimap.size===r.minimap.size&&e.minimap.showSlider===r.minimap.showSlider&&e.minimap.renderCharacters===r.minimap.renderCharacters&&e.minimap.maxColumn===r.minimap.maxColumn&&e.minimap.scale===r.minimap.scale&&e.verticalScrollbarWidth===r.verticalScrollbarWidth&&e.isViewportWrapping===r.isViewportWrapping,l=e.lineHeight,c=e.typicalHalfwidthCharacterWidth,u=e.scrollBeyondLastLine,f=e.minimap.renderCharacters;let g=s>=2?Math.round(e.minimap.scale*2):e.minimap.scale;const p=e.minimap.maxColumn,_=e.minimap.size,b=e.minimap.side,y=e.verticalScrollbarWidth,S=e.viewLineCount,L=e.remainingWidth,x=e.isViewportWrapping,D=f?2:3;let E=Math.floor(s*n);const N=E/s;let M=!1,F=!1,H=D*g,Q=g/s,K=1;if(_==="fill"||_==="fit"){const{typicalViewportLineCount:Le,extraLinesBeforeFirstLine:be,extraLinesBeyondLastLine:ze,desiredRatio:it,minimapLineCount:qe}=CC.computeContainedMinimapLineCount({viewLineCount:S,scrollBeyondLastLine:u,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,height:n,lineHeight:l,pixelRatio:s});if(S/qe>1)M=!0,F=!0,g=1,H=1,Q=g/s;else{let Li=!1,Bn=g+1;if(_==="fit"){const tn=Math.ceil((be+S+ze)*H);x&&a&&L<=t.stableFitRemainingWidth?(Li=!0,Bn=t.stableFitMaxMinimapScale):Li=tn>E}if(_==="fill"||Li){M=!0;const tn=g;H=Math.min(l*s,Math.max(1,Math.floor(1/it))),x&&a&&L<=t.stableFitRemainingWidth&&(Bn=t.stableFitMaxMinimapScale),g=Math.min(Bn,Math.max(1,Math.floor(H/D))),g>tn&&(K=Math.min(2,g/tn)),Q=g/s/K,E=Math.ceil(Math.max(Le,be+S+ze)*H),x?(t.stableMinimapLayoutInput=e,t.stableFitRemainingWidth=L,t.stableFitMaxMinimapScale=g):(t.stableMinimapLayoutInput=null,t.stableFitRemainingWidth=0)}}}const j=Math.floor(p*Q),q=Math.min(j,Math.max(0,Math.floor((L-y-2)*Q/(c+Q)))+Iu);let se=Math.floor(s*q);const fe=se/s;se=Math.floor(se*K);const Ae=f?1:2,Ne=b==="left"?0:i-q-y;return{renderMinimap:Ae,minimapLeft:Ne,minimapWidth:q,minimapHeightIsEditorHeight:M,minimapIsSampling:F,minimapScale:g,minimapLineHeight:H,minimapCanvasInnerWidth:se,minimapCanvasInnerHeight:E,minimapCanvasOuterWidth:fe,minimapCanvasOuterHeight:N}}static computeLayout(e,t){const i=t.outerWidth|0,n=t.outerHeight|0,s=t.lineHeight|0,r=t.lineNumbersDigitCount|0,a=t.typicalHalfwidthCharacterWidth,l=t.maxDigitWidth,c=t.pixelRatio,u=t.viewLineCount,f=e.get(137),g=f==="inherit"?e.get(136):f,p=g==="inherit"?e.get(132):g,_=e.get(135),b=t.isDominatedByLongLines,y=e.get(57),S=e.get(68).renderType!==0,L=e.get(69),x=e.get(105),D=e.get(84),E=e.get(73),N=e.get(103),M=N.verticalScrollbarSize,F=N.verticalHasArrows,H=N.arrowSize,Q=N.horizontalScrollbarSize,K=e.get(43),j=e.get(110)!=="never";let q=e.get(66);K&&j&&(q+=16);let se=0;if(S){const nn=Math.max(r,L);se=Math.round(nn*l)}let fe=0;y&&(fe=s*t.glyphMarginDecorationLaneCount);let Ae=0,Ne=Ae+fe,Le=Ne+se,be=Le+q;const ze=i-fe-se-q;let it=!1,qe=!1,Fe=-1;g==="inherit"&&b?(it=!0,qe=!0):p==="on"||p==="bounded"?qe=!0:p==="wordWrapColumn"&&(Fe=_);const Li=CC._computeMinimapLayout({outerWidth:i,outerHeight:n,lineHeight:s,typicalHalfwidthCharacterWidth:a,pixelRatio:c,scrollBeyondLastLine:x,paddingTop:D.top,paddingBottom:D.bottom,minimap:E,verticalScrollbarWidth:M,viewLineCount:u,remainingWidth:ze,isViewportWrapping:qe},t.memory||new Gte);Li.renderMinimap!==0&&Li.minimapLeft===0&&(Ae+=Li.minimapWidth,Ne+=Li.minimapWidth,Le+=Li.minimapWidth,be+=Li.minimapWidth);const Bn=ze-Li.minimapWidth,tn=Math.max(1,Math.floor((Bn-M-2)/a)),Qt=F?H:0;return qe&&(Fe=Math.max(1,tn),p==="bounded"&&(Fe=Math.min(Fe,_))),{width:i,height:n,glyphMarginLeft:Ae,glyphMarginWidth:fe,glyphMarginDecorationLaneCount:t.glyphMarginDecorationLaneCount,lineNumbersLeft:Ne,lineNumbersWidth:se,decorationsLeft:Le,decorationsWidth:q,contentLeft:be,contentWidth:Bn,minimap:Li,viewportColumn:tn,isWordWrapMinified:it,isViewportWrapping:qe,wrappingColumn:Fe,verticalScrollbarWidth:M,horizontalScrollbarHeight:Q,overviewRuler:{top:Qt,width:M,height:n-2*Qt,right:0}}}}class o0e extends Rn{constructor(){super(139,"wrappingStrategy","simple",{"editor.wrappingStrategy":{enumDescriptions:[v("wrappingStrategy.simple","Assumes that all characters are of the same width. This is a fast algorithm that works correctly for monospace fonts and certain scripts (like Latin characters) where glyphs are of equal width."),v("wrappingStrategy.advanced","Delegates wrapping points computation to the browser. This is a slow algorithm, that might cause freezes for large files, but it works correctly in all cases.")],type:"string",enum:["simple","advanced"],default:"simple",description:v("wrappingStrategy","Controls the algorithm that computes wrapping points. Note that when in accessibility mode, advanced will be used for the best experience.")}})}validate(e){return is(e,"simple",["simple","advanced"])}compute(e,t,i){return t.get(2)===2?"advanced":i}}var Fc;(function(o){o.Off="off",o.OnCode="onCode",o.On="on"})(Fc||(Fc={}));class r0e extends Rn{constructor(){const e={enabled:Fc.On};super(65,"lightbulb",e,{"editor.lightbulb.enabled":{type:"string",tags:["experimental"],enum:[Fc.Off,Fc.OnCode,Fc.On],default:e.enabled,enumDescriptions:[v("editor.lightbulb.enabled.off","Disable the code action menu."),v("editor.lightbulb.enabled.onCode","Show the code action menu when the cursor is on lines with code."),v("editor.lightbulb.enabled.on","Show the code action menu when the cursor is on lines with code or on empty lines.")],description:v("enabled","Enables the Code Action lightbulb in the editor.")}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:is(e.enabled,this.defaultValue.enabled,[Fc.Off,Fc.OnCode,Fc.On])}}}class a0e extends Rn{constructor(){const e={enabled:!0,maxLineCount:5,defaultModel:"outlineModel",scrollWithEditor:!0};super(115,"stickyScroll",e,{"editor.stickyScroll.enabled":{type:"boolean",default:e.enabled,description:v("editor.stickyScroll.enabled","Shows the nested current scopes during the scroll at the top of the editor."),tags:["experimental"]},"editor.stickyScroll.maxLineCount":{type:"number",default:e.maxLineCount,minimum:1,maximum:20,description:v("editor.stickyScroll.maxLineCount","Defines the maximum number of sticky lines to show.")},"editor.stickyScroll.defaultModel":{type:"string",enum:["outlineModel","foldingProviderModel","indentationModel"],default:e.defaultModel,description:v("editor.stickyScroll.defaultModel","Defines the model to use for determining which lines to stick. If the outline model does not exist, it will fall back on the folding provider model which falls back on the indentation model. This order is respected in all three cases.")},"editor.stickyScroll.scrollWithEditor":{type:"boolean",default:e.scrollWithEditor,description:v("editor.stickyScroll.scrollWithEditor","Enable scrolling of Sticky Scroll with the editor's horizontal scrollbar.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:st(t.enabled,this.defaultValue.enabled),maxLineCount:Ji.clampedInt(t.maxLineCount,this.defaultValue.maxLineCount,1,20),defaultModel:is(t.defaultModel,this.defaultValue.defaultModel,["outlineModel","foldingProviderModel","indentationModel"]),scrollWithEditor:st(t.scrollWithEditor,this.defaultValue.scrollWithEditor)}}}class l0e extends Rn{constructor(){const e={enabled:"on",fontSize:0,fontFamily:"",padding:!1};super(141,"inlayHints",e,{"editor.inlayHints.enabled":{type:"string",default:e.enabled,description:v("inlayHints.enable","Enables the inlay hints in the editor."),enum:["on","onUnlessPressed","offUnlessPressed","off"],markdownEnumDescriptions:[v("editor.inlayHints.on","Inlay hints are enabled"),v("editor.inlayHints.onUnlessPressed","Inlay hints are showing by default and hide when holding {0}",Kt?"Ctrl+Option":"Ctrl+Alt"),v("editor.inlayHints.offUnlessPressed","Inlay hints are hidden by default and show when holding {0}",Kt?"Ctrl+Option":"Ctrl+Alt"),v("editor.inlayHints.off","Inlay hints are disabled")]},"editor.inlayHints.fontSize":{type:"number",default:e.fontSize,markdownDescription:v("inlayHints.fontSize","Controls font size of inlay hints in the editor. As default the {0} is used when the configured value is less than {1} or greater than the editor font size.","`#editor.fontSize#`","`5`")},"editor.inlayHints.fontFamily":{type:"string",default:e.fontFamily,markdownDescription:v("inlayHints.fontFamily","Controls font family of inlay hints in the editor. When set to empty, the {0} is used.","`#editor.fontFamily#`")},"editor.inlayHints.padding":{type:"boolean",default:e.padding,description:v("inlayHints.padding","Enables the padding around the inlay hints in the editor.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return typeof t.enabled=="boolean"&&(t.enabled=t.enabled?"on":"off"),{enabled:is(t.enabled,this.defaultValue.enabled,["on","off","offUnlessPressed","onUnlessPressed"]),fontSize:Ji.clampedInt(t.fontSize,this.defaultValue.fontSize,0,100),fontFamily:Nr.string(t.fontFamily,this.defaultValue.fontFamily),padding:st(t.padding,this.defaultValue.padding)}}}class c0e extends Rn{constructor(){super(66,"lineDecorationsWidth",10)}validate(e){return typeof e=="string"&&/^\d+(\.\d+)?ch$/.test(e)?-parseFloat(e.substring(0,e.length-2)):Ji.clampedInt(e,this.defaultValue,0,1e3)}compute(e,t,i){return i<0?Ji.clampedInt(-i*e.fontInfo.typicalHalfwidthCharacterWidth,this.defaultValue,0,1e3):i}}class d0e extends ic{constructor(){super(67,"lineHeight",ga.lineHeight,e=>ic.clamp(e,0,150),{markdownDescription:v("lineHeight",`Controls the line height. 
 - Use 0 to automatically compute the line height from the font size.
 - Values between 0 and 8 will be used as a multiplier with the font size.
 - Values greater than or equal to 8 will be used as effective values.`)})}compute(e,t,i){return e.fontInfo.lineHeight}}class u0e extends Rn{constructor(){const e={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",autohide:!1,renderCharacters:!0,maxColumn:120,scale:1,showRegionSectionHeaders:!0,showMarkSectionHeaders:!0,sectionHeaderFontSize:9};super(73,"minimap",e,{"editor.minimap.enabled":{type:"boolean",default:e.enabled,description:v("minimap.enabled","Controls whether the minimap is shown.")},"editor.minimap.autohide":{type:"boolean",default:e.autohide,description:v("minimap.autohide","Controls whether the minimap is hidden automatically.")},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[v("minimap.size.proportional","The minimap has the same size as the editor contents (and might scroll)."),v("minimap.size.fill","The minimap will stretch or shrink as necessary to fill the height of the editor (no scrolling)."),v("minimap.size.fit","The minimap will shrink as necessary to never be larger than the editor (no scrolling).")],default:e.size,description:v("minimap.size","Controls the size of the minimap.")},"editor.minimap.side":{type:"string",enum:["left","right"],default:e.side,description:v("minimap.side","Controls the side where to render the minimap.")},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:e.showSlider,description:v("minimap.showSlider","Controls when the minimap slider is shown.")},"editor.minimap.scale":{type:"number",default:e.scale,minimum:1,maximum:3,enum:[1,2,3],description:v("minimap.scale","Scale of content drawn in the minimap: 1, 2 or 3.")},"editor.minimap.renderCharacters":{type:"boolean",default:e.renderCharacters,description:v("minimap.renderCharacters","Render the actual characters on a line as opposed to color blocks.")},"editor.minimap.maxColumn":{type:"number",default:e.maxColumn,description:v("minimap.maxColumn","Limit the width of the minimap to render at most a certain number of columns.")},"editor.minimap.showRegionSectionHeaders":{type:"boolean",default:e.showRegionSectionHeaders,description:v("minimap.showRegionSectionHeaders","Controls whether named regions are shown as section headers in the minimap.")},"editor.minimap.showMarkSectionHeaders":{type:"boolean",default:e.showMarkSectionHeaders,description:v("minimap.showMarkSectionHeaders","Controls whether MARK: comments are shown as section headers in the minimap.")},"editor.minimap.sectionHeaderFontSize":{type:"number",default:e.sectionHeaderFontSize,description:v("minimap.sectionHeaderFontSize","Controls the font size of section headers in the minimap.")}})}validate(e){var t;if(!e||typeof e!="object")return this.defaultValue;const i=e;return{enabled:st(i.enabled,this.defaultValue.enabled),autohide:st(i.autohide,this.defaultValue.autohide),size:is(i.size,this.defaultValue.size,["proportional","fill","fit"]),side:is(i.side,this.defaultValue.side,["right","left"]),showSlider:is(i.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:st(i.renderCharacters,this.defaultValue.renderCharacters),scale:Ji.clampedInt(i.scale,1,1,3),maxColumn:Ji.clampedInt(i.maxColumn,this.defaultValue.maxColumn,1,1e4),showRegionSectionHeaders:st(i.showRegionSectionHeaders,this.defaultValue.showRegionSectionHeaders),showMarkSectionHeaders:st(i.showMarkSectionHeaders,this.defaultValue.showMarkSectionHeaders),sectionHeaderFontSize:ic.clamp((t=i.sectionHeaderFontSize)!==null&&t!==void 0?t:this.defaultValue.sectionHeaderFontSize,4,32)}}}function h0e(o){return o==="ctrlCmd"?Kt?"metaKey":"ctrlKey":"altKey"}class f0e extends Rn{constructor(){super(84,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:v("padding.top","Controls the amount of space between the top edge of the editor and the first line.")},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:v("padding.bottom","Controls the amount of space between the bottom edge of the editor and the last line.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{top:Ji.clampedInt(t.top,0,0,1e3),bottom:Ji.clampedInt(t.bottom,0,0,1e3)}}}class g0e extends Rn{constructor(){const e={enabled:!0,cycle:!0};super(86,"parameterHints",e,{"editor.parameterHints.enabled":{type:"boolean",default:e.enabled,description:v("parameterHints.enabled","Enables a pop-up that shows parameter documentation and type information as you type.")},"editor.parameterHints.cycle":{type:"boolean",default:e.cycle,description:v("parameterHints.cycle","Controls whether the parameter hints menu cycles or closes when reaching the end of the list.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:st(t.enabled,this.defaultValue.enabled),cycle:st(t.cycle,this.defaultValue.cycle)}}}class p0e extends ND{constructor(){super(143)}compute(e,t,i){return e.pixelRatio}}class m0e extends Rn{constructor(){const e={other:"on",comments:"off",strings:"off"},t=[{type:"boolean"},{type:"string",enum:["on","inline","off"],enumDescriptions:[v("on","Quick suggestions show inside the suggest widget"),v("inline","Quick suggestions show as ghost text"),v("off","Quick suggestions are disabled")]}];super(89,"quickSuggestions",e,{type:"object",additionalProperties:!1,properties:{strings:{anyOf:t,default:e.strings,description:v("quickSuggestions.strings","Enable quick suggestions inside strings.")},comments:{anyOf:t,default:e.comments,description:v("quickSuggestions.comments","Enable quick suggestions inside comments.")},other:{anyOf:t,default:e.other,description:v("quickSuggestions.other","Enable quick suggestions outside of strings and comments.")}},default:e,markdownDescription:v("quickSuggestions","Controls whether suggestions should automatically show up while typing. This can be controlled for typing in comments, strings, and other code. Quick suggestion can be configured to show as ghost text or with the suggest widget. Also be aware of the '{0}'-setting which controls if suggestions are triggered by special characters.","#editor.suggestOnTriggerCharacters#")}),this.defaultValue=e}validate(e){if(typeof e=="boolean"){const c=e?"on":"off";return{comments:c,strings:c,other:c}}if(!e||typeof e!="object")return this.defaultValue;const{other:t,comments:i,strings:n}=e,s=["on","inline","off"];let r,a,l;return typeof t=="boolean"?r=t?"on":"off":r=is(t,this.defaultValue.other,s),typeof i=="boolean"?a=i?"on":"off":a=is(i,this.defaultValue.comments,s),typeof n=="boolean"?l=n?"on":"off":l=is(n,this.defaultValue.strings,s),{other:r,comments:a,strings:l}}}class _0e extends Rn{constructor(){super(68,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[v("lineNumbers.off","Line numbers are not rendered."),v("lineNumbers.on","Line numbers are rendered as absolute number."),v("lineNumbers.relative","Line numbers are rendered as distance in lines to cursor position."),v("lineNumbers.interval","Line numbers are rendered every 10 lines.")],default:"on",description:v("lineNumbers","Controls the display of line numbers.")})}validate(e){let t=this.defaultValue.renderType,i=this.defaultValue.renderFn;return typeof e<"u"&&(typeof e=="function"?(t=4,i=e):e==="interval"?t=3:e==="relative"?t=2:e==="on"?t=1:t=0),{renderType:t,renderFn:i}}}function sR(o){const e=o.get(98);return e==="editable"?o.get(91):e!=="on"}class v0e extends Rn{constructor(){const e=[],t={type:"number",description:v("rulers.size","Number of monospace characters at which this editor ruler will render.")};super(102,"rulers",e,{type:"array",items:{anyOf:[t,{type:["object"],properties:{column:t,color:{type:"string",description:v("rulers.color","Color of this editor ruler."),format:"color-hex"}}}]},default:e,description:v("rulers","Render vertical rulers after a certain number of monospace characters. Use multiple values for multiple rulers. No rulers are drawn if array is empty.")})}validate(e){if(Array.isArray(e)){const t=[];for(const i of e)if(typeof i=="number")t.push({column:Ji.clampedInt(i,0,0,1e4),color:null});else if(i&&typeof i=="object"){const n=i;t.push({column:Ji.clampedInt(n.column,0,0,1e4),color:n.color})}return t.sort((i,n)=>i.column-n.column),t}return this.defaultValue}}class b0e extends Rn{constructor(){super(92,"readOnlyMessage",void 0)}validate(e){return!e||typeof e!="object"?this.defaultValue:e}}function uY(o,e){if(typeof o!="string")return e;switch(o){case"hidden":return 2;case"visible":return 3;default:return 1}}let C0e=class extends Rn{constructor(){const e={vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1,ignoreHorizontalScrollbarInContentHeight:!1};super(103,"scrollbar",e,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[v("scrollbar.vertical.auto","The vertical scrollbar will be visible only when necessary."),v("scrollbar.vertical.visible","The vertical scrollbar will always be visible."),v("scrollbar.vertical.fit","The vertical scrollbar will always be hidden.")],default:"auto",description:v("scrollbar.vertical","Controls the visibility of the vertical scrollbar.")},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[v("scrollbar.horizontal.auto","The horizontal scrollbar will be visible only when necessary."),v("scrollbar.horizontal.visible","The horizontal scrollbar will always be visible."),v("scrollbar.horizontal.fit","The horizontal scrollbar will always be hidden.")],default:"auto",description:v("scrollbar.horizontal","Controls the visibility of the horizontal scrollbar.")},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:e.verticalScrollbarSize,description:v("scrollbar.verticalScrollbarSize","The width of the vertical scrollbar.")},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:e.horizontalScrollbarSize,description:v("scrollbar.horizontalScrollbarSize","The height of the horizontal scrollbar.")},"editor.scrollbar.scrollByPage":{type:"boolean",default:e.scrollByPage,description:v("scrollbar.scrollByPage","Controls whether clicks scroll by page or jump to click position.")},"editor.scrollbar.ignoreHorizontalScrollbarInContentHeight":{type:"boolean",default:e.ignoreHorizontalScrollbarInContentHeight,description:v("scrollbar.ignoreHorizontalScrollbarInContentHeight","When set, the horizontal scrollbar will not increase the size of the editor's content.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e,i=Ji.clampedInt(t.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),n=Ji.clampedInt(t.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:Ji.clampedInt(t.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:uY(t.vertical,this.defaultValue.vertical),horizontal:uY(t.horizontal,this.defaultValue.horizontal),useShadows:st(t.useShadows,this.defaultValue.useShadows),verticalHasArrows:st(t.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:st(t.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:st(t.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:st(t.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:i,horizontalSliderSize:Ji.clampedInt(t.horizontalSliderSize,i,0,1e3),verticalScrollbarSize:n,verticalSliderSize:Ji.clampedInt(t.verticalSliderSize,n,0,1e3),scrollByPage:st(t.scrollByPage,this.defaultValue.scrollByPage),ignoreHorizontalScrollbarInContentHeight:st(t.ignoreHorizontalScrollbarInContentHeight,this.defaultValue.ignoreHorizontalScrollbarInContentHeight)}}};const cl="inUntrustedWorkspace",ua={allowedCharacters:"editor.unicodeHighlight.allowedCharacters",invisibleCharacters:"editor.unicodeHighlight.invisibleCharacters",nonBasicASCII:"editor.unicodeHighlight.nonBasicASCII",ambiguousCharacters:"editor.unicodeHighlight.ambiguousCharacters",includeComments:"editor.unicodeHighlight.includeComments",includeStrings:"editor.unicodeHighlight.includeStrings",allowedLocales:"editor.unicodeHighlight.allowedLocales"};class w0e extends Rn{constructor(){const e={nonBasicASCII:cl,invisibleCharacters:!0,ambiguousCharacters:!0,includeComments:cl,includeStrings:!0,allowedCharacters:{},allowedLocales:{_os:!0,_vscode:!0}};super(125,"unicodeHighlight",e,{[ua.nonBasicASCII]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,cl],default:e.nonBasicASCII,description:v("unicodeHighlight.nonBasicASCII","Controls whether all non-basic ASCII characters are highlighted. Only characters between U+0020 and U+007E, tab, line-feed and carriage-return are considered basic ASCII.")},[ua.invisibleCharacters]:{restricted:!0,type:"boolean",default:e.invisibleCharacters,description:v("unicodeHighlight.invisibleCharacters","Controls whether characters that just reserve space or have no width at all are highlighted.")},[ua.ambiguousCharacters]:{restricted:!0,type:"boolean",default:e.ambiguousCharacters,description:v("unicodeHighlight.ambiguousCharacters","Controls whether characters are highlighted that can be confused with basic ASCII characters, except those that are common in the current user locale.")},[ua.includeComments]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,cl],default:e.includeComments,description:v("unicodeHighlight.includeComments","Controls whether characters in comments should also be subject to Unicode highlighting.")},[ua.includeStrings]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,cl],default:e.includeStrings,description:v("unicodeHighlight.includeStrings","Controls whether characters in strings should also be subject to Unicode highlighting.")},[ua.allowedCharacters]:{restricted:!0,type:"object",default:e.allowedCharacters,description:v("unicodeHighlight.allowedCharacters","Defines allowed characters that are not being highlighted."),additionalProperties:{type:"boolean"}},[ua.allowedLocales]:{restricted:!0,type:"object",additionalProperties:{type:"boolean"},default:e.allowedLocales,description:v("unicodeHighlight.allowedLocales","Unicode characters that are common in allowed locales are not being highlighted.")}})}applyUpdate(e,t){let i=!1;t.allowedCharacters&&e&&(wl(e.allowedCharacters,t.allowedCharacters)||(e={...e,allowedCharacters:t.allowedCharacters},i=!0)),t.allowedLocales&&e&&(wl(e.allowedLocales,t.allowedLocales)||(e={...e,allowedLocales:t.allowedLocales},i=!0));const n=super.applyUpdate(e,t);return i?new uL(n.newValue,!0):n}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{nonBasicASCII:wC(t.nonBasicASCII,cl,[!0,!1,cl]),invisibleCharacters:st(t.invisibleCharacters,this.defaultValue.invisibleCharacters),ambiguousCharacters:st(t.ambiguousCharacters,this.defaultValue.ambiguousCharacters),includeComments:wC(t.includeComments,cl,[!0,!1,cl]),includeStrings:wC(t.includeStrings,cl,[!0,!1,cl]),allowedCharacters:this.validateBooleanMap(e.allowedCharacters,this.defaultValue.allowedCharacters),allowedLocales:this.validateBooleanMap(e.allowedLocales,this.defaultValue.allowedLocales)}}validateBooleanMap(e,t){if(typeof e!="object"||!e)return t;const i={};for(const[n,s]of Object.entries(e))s===!0&&(i[n]=!0);return i}}class y0e extends Rn{constructor(){const e={enabled:!0,mode:"subwordSmart",showToolbar:"onHover",suppressSuggestions:!1,keepOnBlur:!1,fontFamily:"default"};super(62,"inlineSuggest",e,{"editor.inlineSuggest.enabled":{type:"boolean",default:e.enabled,description:v("inlineSuggest.enabled","Controls whether to automatically show inline suggestions in the editor.")},"editor.inlineSuggest.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover","never"],enumDescriptions:[v("inlineSuggest.showToolbar.always","Show the inline suggestion toolbar whenever an inline suggestion is shown."),v("inlineSuggest.showToolbar.onHover","Show the inline suggestion toolbar when hovering over an inline suggestion."),v("inlineSuggest.showToolbar.never","Never show the inline suggestion toolbar.")],description:v("inlineSuggest.showToolbar","Controls when to show the inline suggestion toolbar.")},"editor.inlineSuggest.suppressSuggestions":{type:"boolean",default:e.suppressSuggestions,description:v("inlineSuggest.suppressSuggestions","Controls how inline suggestions interact with the suggest widget. If enabled, the suggest widget is not shown automatically when inline suggestions are available.")},"editor.inlineSuggest.fontFamily":{type:"string",default:e.fontFamily,description:v("inlineSuggest.fontFamily","Controls the font family of the inline suggestions.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:st(t.enabled,this.defaultValue.enabled),mode:is(t.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"]),showToolbar:is(t.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),suppressSuggestions:st(t.suppressSuggestions,this.defaultValue.suppressSuggestions),keepOnBlur:st(t.keepOnBlur,this.defaultValue.keepOnBlur),fontFamily:Nr.string(t.fontFamily,this.defaultValue.fontFamily)}}}class S0e extends Rn{constructor(){const e={enabled:!1,showToolbar:"onHover",fontFamily:"default",keepOnBlur:!1,backgroundColoring:!1};super(63,"experimentalInlineEdit",e,{"editor.experimentalInlineEdit.enabled":{type:"boolean",default:e.enabled,description:v("inlineEdit.enabled","Controls whether to show inline edits in the editor.")},"editor.experimentalInlineEdit.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover","never"],enumDescriptions:[v("inlineEdit.showToolbar.always","Show the inline edit toolbar whenever an inline suggestion is shown."),v("inlineEdit.showToolbar.onHover","Show the inline edit toolbar when hovering over an inline suggestion."),v("inlineEdit.showToolbar.never","Never show the inline edit toolbar.")],description:v("inlineEdit.showToolbar","Controls when to show the inline edit toolbar.")},"editor.experimentalInlineEdit.fontFamily":{type:"string",default:e.fontFamily,description:v("inlineEdit.fontFamily","Controls the font family of the inline edit.")},"editor.experimentalInlineEdit.backgroundColoring":{type:"boolean",default:e.backgroundColoring,description:v("inlineEdit.backgroundColoring","Controls whether to color the background of inline edits.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:st(t.enabled,this.defaultValue.enabled),showToolbar:is(t.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),fontFamily:Nr.string(t.fontFamily,this.defaultValue.fontFamily),keepOnBlur:st(t.keepOnBlur,this.defaultValue.keepOnBlur),backgroundColoring:st(t.backgroundColoring,this.defaultValue.backgroundColoring)}}}class L0e extends Rn{constructor(){const e={enabled:Ko.bracketPairColorizationOptions.enabled,independentColorPoolPerBracketType:Ko.bracketPairColorizationOptions.independentColorPoolPerBracketType};super(15,"bracketPairColorization",e,{"editor.bracketPairColorization.enabled":{type:"boolean",default:e.enabled,markdownDescription:v("bracketPairColorization.enabled","Controls whether bracket pair colorization is enabled or not. Use {0} to override the bracket highlight colors.","`#workbench.colorCustomizations#`")},"editor.bracketPairColorization.independentColorPoolPerBracketType":{type:"boolean",default:e.independentColorPoolPerBracketType,description:v("bracketPairColorization.independentColorPoolPerBracketType","Controls whether each bracket type has its own independent color pool.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:st(t.enabled,this.defaultValue.enabled),independentColorPoolPerBracketType:st(t.independentColorPoolPerBracketType,this.defaultValue.independentColorPoolPerBracketType)}}}class x0e extends Rn{constructor(){const e={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(16,"guides",e,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[v("editor.guides.bracketPairs.true","Enables bracket pair guides."),v("editor.guides.bracketPairs.active","Enables bracket pair guides only for the active bracket pair."),v("editor.guides.bracketPairs.false","Disables bracket pair guides.")],default:e.bracketPairs,description:v("editor.guides.bracketPairs","Controls whether bracket pair guides are enabled or not.")},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[v("editor.guides.bracketPairsHorizontal.true","Enables horizontal guides as addition to vertical bracket pair guides."),v("editor.guides.bracketPairsHorizontal.active","Enables horizontal guides only for the active bracket pair."),v("editor.guides.bracketPairsHorizontal.false","Disables horizontal bracket pair guides.")],default:e.bracketPairsHorizontal,description:v("editor.guides.bracketPairsHorizontal","Controls whether horizontal bracket pair guides are enabled or not.")},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:e.highlightActiveBracketPair,description:v("editor.guides.highlightActiveBracketPair","Controls whether the editor should highlight the active bracket pair.")},"editor.guides.indentation":{type:"boolean",default:e.indentation,description:v("editor.guides.indentation","Controls whether the editor should render indent guides.")},"editor.guides.highlightActiveIndentation":{type:["boolean","string"],enum:[!0,"always",!1],enumDescriptions:[v("editor.guides.highlightActiveIndentation.true","Highlights the active indent guide."),v("editor.guides.highlightActiveIndentation.always","Highlights the active indent guide even if bracket guides are highlighted."),v("editor.guides.highlightActiveIndentation.false","Do not highlight the active indent guide.")],default:e.highlightActiveIndentation,description:v("editor.guides.highlightActiveIndentation","Controls whether the editor should highlight the active indent guide.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{bracketPairs:wC(t.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:wC(t.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:st(t.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:st(t.indentation,this.defaultValue.indentation),highlightActiveIndentation:wC(t.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation,[!0,!1,"always"])}}}function wC(o,e,t){const i=t.indexOf(o);return i===-1?e:t[i]}class D0e extends Rn{constructor(){const e={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!1,localityBonus:!1,shareSuggestSelections:!1,selectionMode:"always",showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,matchOnWordStartOnly:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(118,"suggest",e,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[v("suggest.insertMode.insert","Insert suggestion without overwriting text right of the cursor."),v("suggest.insertMode.replace","Insert suggestion and overwrite text right of the cursor.")],default:e.insertMode,description:v("suggest.insertMode","Controls whether words are overwritten when accepting completions. Note that this depends on extensions opting into this feature.")},"editor.suggest.filterGraceful":{type:"boolean",default:e.filterGraceful,description:v("suggest.filterGraceful","Controls whether filtering and sorting suggestions accounts for small typos.")},"editor.suggest.localityBonus":{type:"boolean",default:e.localityBonus,description:v("suggest.localityBonus","Controls whether sorting favors words that appear close to the cursor.")},"editor.suggest.shareSuggestSelections":{type:"boolean",default:e.shareSuggestSelections,markdownDescription:v("suggest.shareSuggestSelections","Controls whether remembered suggestion selections are shared between multiple workspaces and windows (needs `#editor.suggestSelection#`).")},"editor.suggest.selectionMode":{type:"string",enum:["always","never","whenTriggerCharacter","whenQuickSuggestion"],enumDescriptions:[v("suggest.insertMode.always","Always select a suggestion when automatically triggering IntelliSense."),v("suggest.insertMode.never","Never select a suggestion when automatically triggering IntelliSense."),v("suggest.insertMode.whenTriggerCharacter","Select a suggestion only when triggering IntelliSense from a trigger character."),v("suggest.insertMode.whenQuickSuggestion","Select a suggestion only when triggering IntelliSense as you type.")],default:e.selectionMode,markdownDescription:v("suggest.selectionMode","Controls whether a suggestion is selected when the widget shows. Note that this only applies to automatically triggered suggestions (`#editor.quickSuggestions#` and `#editor.suggestOnTriggerCharacters#`) and that a suggestion is always selected when explicitly invoked, e.g via `Ctrl+Space`.")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:e.snippetsPreventQuickSuggestions,description:v("suggest.snippetsPreventQuickSuggestions","Controls whether an active snippet prevents quick suggestions.")},"editor.suggest.showIcons":{type:"boolean",default:e.showIcons,description:v("suggest.showIcons","Controls whether to show or hide icons in suggestions.")},"editor.suggest.showStatusBar":{type:"boolean",default:e.showStatusBar,description:v("suggest.showStatusBar","Controls the visibility of the status bar at the bottom of the suggest widget.")},"editor.suggest.preview":{type:"boolean",default:e.preview,description:v("suggest.preview","Controls whether to preview the suggestion outcome in the editor.")},"editor.suggest.showInlineDetails":{type:"boolean",default:e.showInlineDetails,description:v("suggest.showInlineDetails","Controls whether suggest details show inline with the label or only in the details widget.")},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:v("suggest.maxVisibleSuggestions.dep","This setting is deprecated. The suggest widget can now be resized.")},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:v("deprecated","This setting is deprecated, please use separate settings like 'editor.suggest.showKeywords' or 'editor.suggest.showSnippets' instead.")},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showMethods","When enabled IntelliSense shows `method`-suggestions.")},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showFunctions","When enabled IntelliSense shows `function`-suggestions.")},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showConstructors","When enabled IntelliSense shows `constructor`-suggestions.")},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showDeprecated","When enabled IntelliSense shows `deprecated`-suggestions.")},"editor.suggest.matchOnWordStartOnly":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.matchOnWordStartOnly","When enabled IntelliSense filtering requires that the first character matches on a word start. For example, `c` on `Console` or `WebContext` but _not_ on `description`. When disabled IntelliSense will show more results but still sorts them by match quality.")},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showFields","When enabled IntelliSense shows `field`-suggestions.")},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showVariables","When enabled IntelliSense shows `variable`-suggestions.")},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showClasss","When enabled IntelliSense shows `class`-suggestions.")},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showStructs","When enabled IntelliSense shows `struct`-suggestions.")},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showInterfaces","When enabled IntelliSense shows `interface`-suggestions.")},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showModules","When enabled IntelliSense shows `module`-suggestions.")},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showPropertys","When enabled IntelliSense shows `property`-suggestions.")},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showEvents","When enabled IntelliSense shows `event`-suggestions.")},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showOperators","When enabled IntelliSense shows `operator`-suggestions.")},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showUnits","When enabled IntelliSense shows `unit`-suggestions.")},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showValues","When enabled IntelliSense shows `value`-suggestions.")},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showConstants","When enabled IntelliSense shows `constant`-suggestions.")},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showEnums","When enabled IntelliSense shows `enum`-suggestions.")},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showEnumMembers","When enabled IntelliSense shows `enumMember`-suggestions.")},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showKeywords","When enabled IntelliSense shows `keyword`-suggestions.")},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showTexts","When enabled IntelliSense shows `text`-suggestions.")},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showColors","When enabled IntelliSense shows `color`-suggestions.")},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showFiles","When enabled IntelliSense shows `file`-suggestions.")},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showReferences","When enabled IntelliSense shows `reference`-suggestions.")},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showCustomcolors","When enabled IntelliSense shows `customcolor`-suggestions.")},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showFolders","When enabled IntelliSense shows `folder`-suggestions.")},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showTypeParameters","When enabled IntelliSense shows `typeParameter`-suggestions.")},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showSnippets","When enabled IntelliSense shows `snippet`-suggestions.")},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showUsers","When enabled IntelliSense shows `user`-suggestions.")},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showIssues","When enabled IntelliSense shows `issues`-suggestions.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertMode:is(t.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:st(t.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:st(t.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:st(t.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:st(t.shareSuggestSelections,this.defaultValue.shareSuggestSelections),selectionMode:is(t.selectionMode,this.defaultValue.selectionMode,["always","never","whenQuickSuggestion","whenTriggerCharacter"]),showIcons:st(t.showIcons,this.defaultValue.showIcons),showStatusBar:st(t.showStatusBar,this.defaultValue.showStatusBar),preview:st(t.preview,this.defaultValue.preview),previewMode:is(t.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:st(t.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:st(t.showMethods,this.defaultValue.showMethods),showFunctions:st(t.showFunctions,this.defaultValue.showFunctions),showConstructors:st(t.showConstructors,this.defaultValue.showConstructors),showDeprecated:st(t.showDeprecated,this.defaultValue.showDeprecated),matchOnWordStartOnly:st(t.matchOnWordStartOnly,this.defaultValue.matchOnWordStartOnly),showFields:st(t.showFields,this.defaultValue.showFields),showVariables:st(t.showVariables,this.defaultValue.showVariables),showClasses:st(t.showClasses,this.defaultValue.showClasses),showStructs:st(t.showStructs,this.defaultValue.showStructs),showInterfaces:st(t.showInterfaces,this.defaultValue.showInterfaces),showModules:st(t.showModules,this.defaultValue.showModules),showProperties:st(t.showProperties,this.defaultValue.showProperties),showEvents:st(t.showEvents,this.defaultValue.showEvents),showOperators:st(t.showOperators,this.defaultValue.showOperators),showUnits:st(t.showUnits,this.defaultValue.showUnits),showValues:st(t.showValues,this.defaultValue.showValues),showConstants:st(t.showConstants,this.defaultValue.showConstants),showEnums:st(t.showEnums,this.defaultValue.showEnums),showEnumMembers:st(t.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:st(t.showKeywords,this.defaultValue.showKeywords),showWords:st(t.showWords,this.defaultValue.showWords),showColors:st(t.showColors,this.defaultValue.showColors),showFiles:st(t.showFiles,this.defaultValue.showFiles),showReferences:st(t.showReferences,this.defaultValue.showReferences),showFolders:st(t.showFolders,this.defaultValue.showFolders),showTypeParameters:st(t.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:st(t.showSnippets,this.defaultValue.showSnippets),showUsers:st(t.showUsers,this.defaultValue.showUsers),showIssues:st(t.showIssues,this.defaultValue.showIssues)}}}class k0e extends Rn{constructor(){super(113,"smartSelect",{selectLeadingAndTrailingWhitespace:!0,selectSubwords:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:v("selectLeadingAndTrailingWhitespace","Whether leading and trailing whitespace should always be selected."),default:!0,type:"boolean"},"editor.smartSelect.selectSubwords":{description:v("selectSubwords","Whether subwords (like 'foo' in 'fooBar' or 'foo_bar') should be selected."),default:!0,type:"boolean"}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{selectLeadingAndTrailingWhitespace:st(e.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace),selectSubwords:st(e.selectSubwords,this.defaultValue.selectSubwords)}}}class E0e extends Rn{constructor(){const e=[];super(130,"wordSegmenterLocales",e,{anyOf:[{description:v("wordSegmenterLocales","Locales to be used for word segmentation when doing word related navigations or operations. Specify the BCP 47 language tag of the word you wish to recognize (e.g., ja, zh-CN, zh-Hant-TW, etc.)."),type:"string"},{description:v("wordSegmenterLocales","Locales to be used for word segmentation when doing word related navigations or operations. Specify the BCP 47 language tag of the word you wish to recognize (e.g., ja, zh-CN, zh-Hant-TW, etc.)."),type:"array",items:{type:"string"}}]})}validate(e){if(typeof e=="string"&&(e=[e]),Array.isArray(e)){const t=[];for(const i of e)if(typeof i=="string")try{Intl.Segmenter.supportedLocalesOf(i).length>0&&t.push(i)}catch{}return t}return this.defaultValue}}class I0e extends Rn{constructor(){super(138,"wrappingIndent",1,{"editor.wrappingIndent":{type:"string",enum:["none","same","indent","deepIndent"],enumDescriptions:[v("wrappingIndent.none","No indentation. Wrapped lines begin at column 1."),v("wrappingIndent.same","Wrapped lines get the same indentation as the parent."),v("wrappingIndent.indent","Wrapped lines get +1 indentation toward the parent."),v("wrappingIndent.deepIndent","Wrapped lines get +2 indentation toward the parent.")],description:v("wrappingIndent","Controls the indentation of wrapped lines."),default:"same"}})}validate(e){switch(e){case"none":return 0;case"same":return 1;case"indent":return 2;case"deepIndent":return 3}return 1}compute(e,t,i){return t.get(2)===2?0:i}}class T0e extends ND{constructor(){super(146)}compute(e,t,i){const n=t.get(145);return{isDominatedByLongLines:e.isDominatedByLongLines,isWordWrapMinified:n.isWordWrapMinified,isViewportWrapping:n.isViewportWrapping,wrappingColumn:n.wrappingColumn}}}class N0e extends Rn{constructor(){const e={enabled:!0,showDropSelector:"afterDrop"};super(36,"dropIntoEditor",e,{"editor.dropIntoEditor.enabled":{type:"boolean",default:e.enabled,markdownDescription:v("dropIntoEditor.enabled","Controls whether you can drag and drop a file into a text editor by holding down the `Shift` key (instead of opening the file in an editor).")},"editor.dropIntoEditor.showDropSelector":{type:"string",markdownDescription:v("dropIntoEditor.showDropSelector","Controls if a widget is shown when dropping files into the editor. This widget lets you control how the file is dropped."),enum:["afterDrop","never"],enumDescriptions:[v("dropIntoEditor.showDropSelector.afterDrop","Show the drop selector widget after a file is dropped into the editor."),v("dropIntoEditor.showDropSelector.never","Never show the drop selector widget. Instead the default drop provider is always used.")],default:"afterDrop"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:st(t.enabled,this.defaultValue.enabled),showDropSelector:is(t.showDropSelector,this.defaultValue.showDropSelector,["afterDrop","never"])}}}class R0e extends Rn{constructor(){const e={enabled:!0,showPasteSelector:"afterPaste"};super(85,"pasteAs",e,{"editor.pasteAs.enabled":{type:"boolean",default:e.enabled,markdownDescription:v("pasteAs.enabled","Controls whether you can paste content in different ways.")},"editor.pasteAs.showPasteSelector":{type:"string",markdownDescription:v("pasteAs.showPasteSelector","Controls if a widget is shown when pasting content in to the editor. This widget lets you control how the file is pasted."),enum:["afterPaste","never"],enumDescriptions:[v("pasteAs.showPasteSelector.afterPaste","Show the paste selector widget after content is pasted into the editor."),v("pasteAs.showPasteSelector.never","Never show the paste selector widget. Instead the default pasting behavior is always used.")],default:"afterPaste"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:st(t.enabled,this.defaultValue.enabled),showPasteSelector:is(t.showPasteSelector,this.defaultValue.showPasteSelector,["afterPaste","never"])}}}const M0e="Consolas, 'Courier New', monospace",A0e="Menlo, Monaco, 'Courier New', monospace",P0e="'Droid Sans Mono', 'monospace', monospace",ga={fontFamily:Kt?A0e:jr?P0e:M0e,fontWeight:"normal",fontSize:Kt?12:14,lineHeight:0,letterSpacing:0},Z0=[];function Se(o){return Z0[o.id]=o,o}const Jd={acceptSuggestionOnCommitCharacter:Se(new hi(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:v("acceptSuggestionOnCommitCharacter","Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (`;`) can be a commit character that accepts a suggestion and types that character.")})),acceptSuggestionOnEnter:Se(new Zn(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",v("acceptSuggestionOnEnterSmart","Only accept a suggestion with `Enter` when it makes a textual change."),""],markdownDescription:v("acceptSuggestionOnEnter","Controls whether suggestions should be accepted on `Enter`, in addition to `Tab`. Helps to avoid ambiguity between inserting new lines or accepting suggestions.")})),accessibilitySupport:Se(new Gbe),accessibilityPageSize:Se(new Ji(3,"accessibilityPageSize",10,1,1073741824,{description:v("accessibilityPageSize","Controls the number of lines in the editor that can be read out by a screen reader at once. When we detect a screen reader we automatically set the default to be 500. Warning: this has a performance implication for numbers larger than the default."),tags:["accessibility"]})),ariaLabel:Se(new Nr(4,"ariaLabel",v("editorViewAccessibleLabel","Editor content"))),ariaRequired:Se(new hi(5,"ariaRequired",!1,void 0)),screenReaderAnnounceInlineSuggestion:Se(new hi(8,"screenReaderAnnounceInlineSuggestion",!0,{description:v("screenReaderAnnounceInlineSuggestion","Control whether inline suggestions are announced by a screen reader."),tags:["accessibility"]})),autoClosingBrackets:Se(new Zn(6,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",v("editor.autoClosingBrackets.languageDefined","Use language configurations to determine when to autoclose brackets."),v("editor.autoClosingBrackets.beforeWhitespace","Autoclose brackets only when the cursor is to the left of whitespace."),""],description:v("autoClosingBrackets","Controls whether the editor should automatically close brackets after the user adds an opening bracket.")})),autoClosingComments:Se(new Zn(7,"autoClosingComments","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",v("editor.autoClosingComments.languageDefined","Use language configurations to determine when to autoclose comments."),v("editor.autoClosingComments.beforeWhitespace","Autoclose comments only when the cursor is to the left of whitespace."),""],description:v("autoClosingComments","Controls whether the editor should automatically close comments after the user adds an opening comment.")})),autoClosingDelete:Se(new Zn(9,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",v("editor.autoClosingDelete.auto","Remove adjacent closing quotes or brackets only if they were automatically inserted."),""],description:v("autoClosingDelete","Controls whether the editor should remove adjacent closing quotes or brackets when deleting.")})),autoClosingOvertype:Se(new Zn(10,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",v("editor.autoClosingOvertype.auto","Type over closing quotes or brackets only if they were automatically inserted."),""],description:v("autoClosingOvertype","Controls whether the editor should type over closing quotes or brackets.")})),autoClosingQuotes:Se(new Zn(11,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",v("editor.autoClosingQuotes.languageDefined","Use language configurations to determine when to autoclose quotes."),v("editor.autoClosingQuotes.beforeWhitespace","Autoclose quotes only when the cursor is to the left of whitespace."),""],description:v("autoClosingQuotes","Controls whether the editor should automatically close quotes after the user adds an opening quote.")})),autoIndent:Se(new UI(12,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],qbe,{enumDescriptions:[v("editor.autoIndent.none","The editor will not insert indentation automatically."),v("editor.autoIndent.keep","The editor will keep the current line's indentation."),v("editor.autoIndent.brackets","The editor will keep the current line's indentation and honor language defined brackets."),v("editor.autoIndent.advanced","The editor will keep the current line's indentation, honor language defined brackets and invoke special onEnterRules defined by languages."),v("editor.autoIndent.full","The editor will keep the current line's indentation, honor language defined brackets, invoke special onEnterRules defined by languages, and honor indentationRules defined by languages.")],description:v("autoIndent","Controls whether the editor should automatically adjust the indentation when users type, paste, move or indent lines.")})),automaticLayout:Se(new hi(13,"automaticLayout",!1)),autoSurround:Se(new Zn(14,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[v("editor.autoSurround.languageDefined","Use language configurations to determine when to automatically surround selections."),v("editor.autoSurround.quotes","Surround with quotes but not brackets."),v("editor.autoSurround.brackets","Surround with brackets but not quotes."),""],description:v("autoSurround","Controls whether the editor should automatically surround selections when typing quotes or brackets.")})),bracketPairColorization:Se(new L0e),bracketPairGuides:Se(new x0e),stickyTabStops:Se(new hi(116,"stickyTabStops",!1,{description:v("stickyTabStops","Emulate selection behavior of tab characters when using spaces for indentation. Selection will stick to tab stops.")})),codeLens:Se(new hi(17,"codeLens",!0,{description:v("codeLens","Controls whether the editor shows CodeLens.")})),codeLensFontFamily:Se(new Nr(18,"codeLensFontFamily","",{description:v("codeLensFontFamily","Controls the font family for CodeLens.")})),codeLensFontSize:Se(new Ji(19,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:v("codeLensFontSize","Controls the font size in pixels for CodeLens. When set to 0, 90% of `#editor.fontSize#` is used.")})),colorDecorators:Se(new hi(20,"colorDecorators",!0,{description:v("colorDecorators","Controls whether the editor should render the inline color decorators and color picker.")})),colorDecoratorActivatedOn:Se(new Zn(148,"colorDecoratorsActivatedOn","clickAndHover",["clickAndHover","hover","click"],{enumDescriptions:[v("editor.colorDecoratorActivatedOn.clickAndHover","Make the color picker appear both on click and hover of the color decorator"),v("editor.colorDecoratorActivatedOn.hover","Make the color picker appear on hover of the color decorator"),v("editor.colorDecoratorActivatedOn.click","Make the color picker appear on click of the color decorator")],description:v("colorDecoratorActivatedOn","Controls the condition to make a color picker appear from a color decorator")})),colorDecoratorsLimit:Se(new Ji(21,"colorDecoratorsLimit",500,1,1e6,{markdownDescription:v("colorDecoratorsLimit","Controls the max number of color decorators that can be rendered in an editor at once.")})),columnSelection:Se(new hi(22,"columnSelection",!1,{description:v("columnSelection","Enable that the selection with the mouse and keys is doing column selection.")})),comments:Se(new Ybe),contextmenu:Se(new hi(24,"contextmenu",!0)),copyWithSyntaxHighlighting:Se(new hi(25,"copyWithSyntaxHighlighting",!0,{description:v("copyWithSyntaxHighlighting","Controls whether syntax highlighting should be copied into the clipboard.")})),cursorBlinking:Se(new UI(26,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],Zbe,{description:v("cursorBlinking","Control the cursor animation style.")})),cursorSmoothCaretAnimation:Se(new Zn(27,"cursorSmoothCaretAnimation","off",["off","explicit","on"],{enumDescriptions:[v("cursorSmoothCaretAnimation.off","Smooth caret animation is disabled."),v("cursorSmoothCaretAnimation.explicit","Smooth caret animation is enabled only when the user moves the cursor with an explicit gesture."),v("cursorSmoothCaretAnimation.on","Smooth caret animation is always enabled.")],description:v("cursorSmoothCaretAnimation","Controls whether the smooth caret animation should be enabled.")})),cursorStyle:Se(new UI(28,"cursorStyle",po.Line,"line",["line","block","underline","line-thin","block-outline","underline-thin"],Qbe,{description:v("cursorStyle","Controls the cursor style.")})),cursorSurroundingLines:Se(new Ji(29,"cursorSurroundingLines",0,0,1073741824,{description:v("cursorSurroundingLines","Controls the minimal number of visible leading lines (minimum 0) and trailing lines (minimum 1) surrounding the cursor. Known as 'scrollOff' or 'scrollOffset' in some other editors.")})),cursorSurroundingLinesStyle:Se(new Zn(30,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[v("cursorSurroundingLinesStyle.default","`cursorSurroundingLines` is enforced only when triggered via the keyboard or API."),v("cursorSurroundingLinesStyle.all","`cursorSurroundingLines` is enforced always.")],markdownDescription:v("cursorSurroundingLinesStyle","Controls when `#editor.cursorSurroundingLines#` should be enforced.")})),cursorWidth:Se(new Ji(31,"cursorWidth",0,0,1073741824,{markdownDescription:v("cursorWidth","Controls the width of the cursor when `#editor.cursorStyle#` is set to `line`.")})),disableLayerHinting:Se(new hi(32,"disableLayerHinting",!1)),disableMonospaceOptimizations:Se(new hi(33,"disableMonospaceOptimizations",!1)),domReadOnly:Se(new hi(34,"domReadOnly",!1)),dragAndDrop:Se(new hi(35,"dragAndDrop",!0,{description:v("dragAndDrop","Controls whether the editor should allow moving selections via drag and drop.")})),emptySelectionClipboard:Se(new Jbe),dropIntoEditor:Se(new N0e),stickyScroll:Se(new a0e),experimentalWhitespaceRendering:Se(new Zn(38,"experimentalWhitespaceRendering","svg",["svg","font","off"],{enumDescriptions:[v("experimentalWhitespaceRendering.svg","Use a new rendering method with svgs."),v("experimentalWhitespaceRendering.font","Use a new rendering method with font characters."),v("experimentalWhitespaceRendering.off","Use the stable rendering method.")],description:v("experimentalWhitespaceRendering","Controls whether whitespace is rendered with a new, experimental method.")})),extraEditorClassName:Se(new Nr(39,"extraEditorClassName","")),fastScrollSensitivity:Se(new ic(40,"fastScrollSensitivity",5,o=>o<=0?5:o,{markdownDescription:v("fastScrollSensitivity","Scrolling speed multiplier when pressing `Alt`.")})),find:Se(new e0e),fixedOverflowWidgets:Se(new hi(42,"fixedOverflowWidgets",!1)),folding:Se(new hi(43,"folding",!0,{description:v("folding","Controls whether the editor has code folding enabled.")})),foldingStrategy:Se(new Zn(44,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[v("foldingStrategy.auto","Use a language-specific folding strategy if available, else the indentation-based one."),v("foldingStrategy.indentation","Use the indentation-based folding strategy.")],description:v("foldingStrategy","Controls the strategy for computing folding ranges.")})),foldingHighlight:Se(new hi(45,"foldingHighlight",!0,{description:v("foldingHighlight","Controls whether the editor should highlight folded ranges.")})),foldingImportsByDefault:Se(new hi(46,"foldingImportsByDefault",!1,{description:v("foldingImportsByDefault","Controls whether the editor automatically collapses import ranges.")})),foldingMaximumRegions:Se(new Ji(47,"foldingMaximumRegions",5e3,10,65e3,{description:v("foldingMaximumRegions","The maximum number of foldable regions. Increasing this value may result in the editor becoming less responsive when the current source has a large number of foldable regions.")})),unfoldOnClickAfterEndOfLine:Se(new hi(48,"unfoldOnClickAfterEndOfLine",!1,{description:v("unfoldOnClickAfterEndOfLine","Controls whether clicking on the empty content after a folded line will unfold the line.")})),fontFamily:Se(new Nr(49,"fontFamily",ga.fontFamily,{description:v("fontFamily","Controls the font family.")})),fontInfo:Se(new t0e),fontLigatures2:Se(new ml),fontSize:Se(new i0e),fontWeight:Se(new Hu),fontVariations:Se(new Td),formatOnPaste:Se(new hi(55,"formatOnPaste",!1,{description:v("formatOnPaste","Controls whether the editor should automatically format the pasted content. A formatter must be available and the formatter should be able to format a range in a document.")})),formatOnType:Se(new hi(56,"formatOnType",!1,{description:v("formatOnType","Controls whether the editor should automatically format the line after typing.")})),glyphMargin:Se(new hi(57,"glyphMargin",!0,{description:v("glyphMargin","Controls whether the editor should render the vertical glyph margin. Glyph margin is mostly used for debugging.")})),gotoLocation:Se(new n0e),hideCursorInOverviewRuler:Se(new hi(59,"hideCursorInOverviewRuler",!1,{description:v("hideCursorInOverviewRuler","Controls whether the cursor should be hidden in the overview ruler.")})),hover:Se(new s0e),inDiffEditor:Se(new hi(61,"inDiffEditor",!1)),letterSpacing:Se(new ic(64,"letterSpacing",ga.letterSpacing,o=>ic.clamp(o,-5,20),{description:v("letterSpacing","Controls the letter spacing in pixels.")})),lightbulb:Se(new r0e),lineDecorationsWidth:Se(new c0e),lineHeight:Se(new d0e),lineNumbers:Se(new _0e),lineNumbersMinChars:Se(new Ji(69,"lineNumbersMinChars",5,1,300)),linkedEditing:Se(new hi(70,"linkedEditing",!1,{description:v("linkedEditing","Controls whether the editor has linked editing enabled. Depending on the language, related symbols such as HTML tags, are updated while editing.")})),links:Se(new hi(71,"links",!0,{description:v("links","Controls whether the editor should detect links and make them clickable.")})),matchBrackets:Se(new Zn(72,"matchBrackets","always",["always","near","never"],{description:v("matchBrackets","Highlight matching brackets.")})),minimap:Se(new u0e),mouseStyle:Se(new Zn(74,"mouseStyle","text",["text","default","copy"])),mouseWheelScrollSensitivity:Se(new ic(75,"mouseWheelScrollSensitivity",1,o=>o===0?1:o,{markdownDescription:v("mouseWheelScrollSensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")})),mouseWheelZoom:Se(new hi(76,"mouseWheelZoom",!1,{markdownDescription:Kt?v("mouseWheelZoom.mac","Zoom the font of the editor when using mouse wheel and holding `Cmd`."):v("mouseWheelZoom","Zoom the font of the editor when using mouse wheel and holding `Ctrl`.")})),multiCursorMergeOverlapping:Se(new hi(77,"multiCursorMergeOverlapping",!0,{description:v("multiCursorMergeOverlapping","Merge multiple cursors when they are overlapping.")})),multiCursorModifier:Se(new UI(78,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],h0e,{markdownEnumDescriptions:[v("multiCursorModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),v("multiCursorModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],markdownDescription:v({key:"multiCursorModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add multiple cursors with the mouse. The Go to Definition and Open Link mouse gestures will adapt such that they do not conflict with the [multicursor modifier](https://code.visualstudio.com/docs/editor/codebasics#_multicursor-modifier).")})),multiCursorPaste:Se(new Zn(79,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[v("multiCursorPaste.spread","Each cursor pastes a single line of the text."),v("multiCursorPaste.full","Each cursor pastes the full text.")],markdownDescription:v("multiCursorPaste","Controls pasting when the line count of the pasted text matches the cursor count.")})),multiCursorLimit:Se(new Ji(80,"multiCursorLimit",1e4,1,1e5,{markdownDescription:v("multiCursorLimit","Controls the max number of cursors that can be in an active editor at once.")})),occurrencesHighlight:Se(new Zn(81,"occurrencesHighlight","singleFile",["off","singleFile","multiFile"],{markdownEnumDescriptions:[v("occurrencesHighlight.off","Does not highlight occurrences."),v("occurrencesHighlight.singleFile","Highlights occurrences only in the current file."),v("occurrencesHighlight.multiFile","Experimental: Highlights occurrences across all valid open files.")],markdownDescription:v("occurrencesHighlight","Controls whether occurrences should be highlighted across open files.")})),overviewRulerBorder:Se(new hi(82,"overviewRulerBorder",!0,{description:v("overviewRulerBorder","Controls whether a border should be drawn around the overview ruler.")})),overviewRulerLanes:Se(new Ji(83,"overviewRulerLanes",3,0,3)),padding:Se(new f0e),pasteAs:Se(new R0e),parameterHints:Se(new g0e),peekWidgetDefaultFocus:Se(new Zn(87,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[v("peekWidgetDefaultFocus.tree","Focus the tree when opening peek"),v("peekWidgetDefaultFocus.editor","Focus the editor when opening peek")],description:v("peekWidgetDefaultFocus","Controls whether to focus the inline editor or the tree in the peek widget.")})),definitionLinkOpensInPeek:Se(new hi(88,"definitionLinkOpensInPeek",!1,{description:v("definitionLinkOpensInPeek","Controls whether the Go to Definition mouse gesture always opens the peek widget.")})),quickSuggestions:Se(new m0e),quickSuggestionsDelay:Se(new Ji(90,"quickSuggestionsDelay",10,0,1073741824,{description:v("quickSuggestionsDelay","Controls the delay in milliseconds after which quick suggestions will show up.")})),readOnly:Se(new hi(91,"readOnly",!1)),readOnlyMessage:Se(new b0e),renameOnType:Se(new hi(93,"renameOnType",!1,{description:v("renameOnType","Controls whether the editor auto renames on type."),markdownDeprecationMessage:v("renameOnTypeDeprecate","Deprecated, use `editor.linkedEditing` instead.")})),renderControlCharacters:Se(new hi(94,"renderControlCharacters",!0,{description:v("renderControlCharacters","Controls whether the editor should render control characters."),restricted:!0})),renderFinalNewline:Se(new Zn(95,"renderFinalNewline",jr?"dimmed":"on",["off","on","dimmed"],{description:v("renderFinalNewline","Render last line number when the file ends with a newline.")})),renderLineHighlight:Se(new Zn(96,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",v("renderLineHighlight.all","Highlights both the gutter and the current line.")],description:v("renderLineHighlight","Controls how the editor should render the current line highlight.")})),renderLineHighlightOnlyWhenFocus:Se(new hi(97,"renderLineHighlightOnlyWhenFocus",!1,{description:v("renderLineHighlightOnlyWhenFocus","Controls if the editor should render the current line highlight only when the editor is focused.")})),renderValidationDecorations:Se(new Zn(98,"renderValidationDecorations","editable",["editable","on","off"])),renderWhitespace:Se(new Zn(99,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",v("renderWhitespace.boundary","Render whitespace characters except for single spaces between words."),v("renderWhitespace.selection","Render whitespace characters only on selected text."),v("renderWhitespace.trailing","Render only trailing whitespace characters."),""],description:v("renderWhitespace","Controls how the editor should render whitespace characters.")})),revealHorizontalRightPadding:Se(new Ji(100,"revealHorizontalRightPadding",15,0,1e3)),roundedSelection:Se(new hi(101,"roundedSelection",!0,{description:v("roundedSelection","Controls whether selections should have rounded corners.")})),rulers:Se(new v0e),scrollbar:Se(new C0e),scrollBeyondLastColumn:Se(new Ji(104,"scrollBeyondLastColumn",4,0,1073741824,{description:v("scrollBeyondLastColumn","Controls the number of extra characters beyond which the editor will scroll horizontally.")})),scrollBeyondLastLine:Se(new hi(105,"scrollBeyondLastLine",!0,{description:v("scrollBeyondLastLine","Controls whether the editor will scroll beyond the last line.")})),scrollPredominantAxis:Se(new hi(106,"scrollPredominantAxis",!0,{description:v("scrollPredominantAxis","Scroll only along the predominant axis when scrolling both vertically and horizontally at the same time. Prevents horizontal drift when scrolling vertically on a trackpad.")})),selectionClipboard:Se(new hi(107,"selectionClipboard",!0,{description:v("selectionClipboard","Controls whether the Linux primary clipboard should be supported."),included:jr})),selectionHighlight:Se(new hi(108,"selectionHighlight",!0,{description:v("selectionHighlight","Controls whether the editor should highlight matches similar to the selection.")})),selectOnLineNumbers:Se(new hi(109,"selectOnLineNumbers",!0)),showFoldingControls:Se(new Zn(110,"showFoldingControls","mouseover",["always","never","mouseover"],{enumDescriptions:[v("showFoldingControls.always","Always show the folding controls."),v("showFoldingControls.never","Never show the folding controls and reduce the gutter size."),v("showFoldingControls.mouseover","Only show the folding controls when the mouse is over the gutter.")],description:v("showFoldingControls","Controls when the folding controls on the gutter are shown.")})),showUnused:Se(new hi(111,"showUnused",!0,{description:v("showUnused","Controls fading out of unused code.")})),showDeprecated:Se(new hi(140,"showDeprecated",!0,{description:v("showDeprecated","Controls strikethrough deprecated variables.")})),inlayHints:Se(new l0e),snippetSuggestions:Se(new Zn(112,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[v("snippetSuggestions.top","Show snippet suggestions on top of other suggestions."),v("snippetSuggestions.bottom","Show snippet suggestions below other suggestions."),v("snippetSuggestions.inline","Show snippets suggestions with other suggestions."),v("snippetSuggestions.none","Do not show snippet suggestions.")],description:v("snippetSuggestions","Controls whether snippets are shown with other suggestions and how they are sorted.")})),smartSelect:Se(new k0e),smoothScrolling:Se(new hi(114,"smoothScrolling",!1,{description:v("smoothScrolling","Controls whether the editor will scroll using an animation.")})),stopRenderingLineAfter:Se(new Ji(117,"stopRenderingLineAfter",1e4,-1,1073741824)),suggest:Se(new D0e),inlineSuggest:Se(new y0e),inlineEdit:Se(new S0e),inlineCompletionsAccessibilityVerbose:Se(new hi(149,"inlineCompletionsAccessibilityVerbose",!1,{description:v("inlineCompletionsAccessibilityVerbose","Controls whether the accessibility hint should be provided to screen reader users when an inline completion is shown.")})),suggestFontSize:Se(new Ji(119,"suggestFontSize",0,0,1e3,{markdownDescription:v("suggestFontSize","Font size for the suggest widget. When set to {0}, the value of {1} is used.","`0`","`#editor.fontSize#`")})),suggestLineHeight:Se(new Ji(120,"suggestLineHeight",0,0,1e3,{markdownDescription:v("suggestLineHeight","Line height for the suggest widget. When set to {0}, the value of {1} is used. The minimum value is 8.","`0`","`#editor.lineHeight#`")})),suggestOnTriggerCharacters:Se(new hi(121,"suggestOnTriggerCharacters",!0,{description:v("suggestOnTriggerCharacters","Controls whether suggestions should automatically show up when typing trigger characters.")})),suggestSelection:Se(new Zn(122,"suggestSelection","first",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[v("suggestSelection.first","Always select the first suggestion."),v("suggestSelection.recentlyUsed","Select recent suggestions unless further typing selects one, e.g. `console.| -> console.log` because `log` has been completed recently."),v("suggestSelection.recentlyUsedByPrefix","Select suggestions based on previous prefixes that have completed those suggestions, e.g. `co -> console` and `con -> const`.")],description:v("suggestSelection","Controls how suggestions are pre-selected when showing the suggest list.")})),tabCompletion:Se(new Zn(123,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[v("tabCompletion.on","Tab complete will insert the best matching suggestion when pressing tab."),v("tabCompletion.off","Disable tab completions."),v("tabCompletion.onlySnippets","Tab complete snippets when their prefix match. Works best when 'quickSuggestions' aren't enabled.")],description:v("tabCompletion","Enables tab completions.")})),tabIndex:Se(new Ji(124,"tabIndex",0,-1,1073741824)),unicodeHighlight:Se(new w0e),unusualLineTerminators:Se(new Zn(126,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[v("unusualLineTerminators.auto","Unusual line terminators are automatically removed."),v("unusualLineTerminators.off","Unusual line terminators are ignored."),v("unusualLineTerminators.prompt","Unusual line terminators prompt to be removed.")],description:v("unusualLineTerminators","Remove unusual line terminators that might cause problems.")})),useShadowDOM:Se(new hi(127,"useShadowDOM",!0)),useTabStops:Se(new hi(128,"useTabStops",!0,{description:v("useTabStops","Spaces and tabs are inserted and deleted in alignment with tab stops.")})),wordBreak:Se(new Zn(129,"wordBreak","normal",["normal","keepAll"],{markdownEnumDescriptions:[v("wordBreak.normal","Use the default line break rule."),v("wordBreak.keepAll","Word breaks should not be used for Chinese/Japanese/Korean (CJK) text. Non-CJK text behavior is the same as for normal.")],description:v("wordBreak","Controls the word break rules used for Chinese/Japanese/Korean (CJK) text.")})),wordSegmenterLocales:Se(new E0e),wordSeparators:Se(new Nr(131,"wordSeparators",jte,{description:v("wordSeparators","Characters that will be used as word separators when doing word related navigations or operations.")})),wordWrap:Se(new Zn(132,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[v("wordWrap.off","Lines will never wrap."),v("wordWrap.on","Lines will wrap at the viewport width."),v({key:"wordWrap.wordWrapColumn",comment:["- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at `#editor.wordWrapColumn#`."),v({key:"wordWrap.bounded",comment:["- viewport means the edge of the visible window size.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at the minimum of viewport and `#editor.wordWrapColumn#`.")],description:v({key:"wordWrap",comment:["- 'off', 'on', 'wordWrapColumn' and 'bounded' refer to values the setting can take and should not be localized.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Controls how lines should wrap.")})),wordWrapBreakAfterCharacters:Se(new Nr(133,"wordWrapBreakAfterCharacters"," 	})]?|/&.,;")),wordWrapBreakBeforeCharacters:Se(new Nr(134,"wordWrapBreakBeforeCharacters","([{+")),wordWrapColumn:Se(new Ji(135,"wordWrapColumn",80,1,1073741824,{markdownDescription:v({key:"wordWrapColumn",comment:["- `editor.wordWrap` refers to a different setting and should not be localized.","- 'wordWrapColumn' and 'bounded' refer to values the different setting can take and should not be localized."]},"Controls the wrapping column of the editor when `#editor.wordWrap#` is `wordWrapColumn` or `bounded`.")})),wordWrapOverride1:Se(new Zn(136,"wordWrapOverride1","inherit",["off","on","inherit"])),wordWrapOverride2:Se(new Zn(137,"wordWrapOverride2","inherit",["off","on","inherit"])),editorClassName:Se(new Xbe),defaultColorDecorators:Se(new hi(147,"defaultColorDecorators",!1,{markdownDescription:v("defaultColorDecorators","Controls whether inline color decorations should be shown using the default document color provider")})),pixelRatio:Se(new p0e),tabFocusMode:Se(new hi(144,"tabFocusMode",!1,{markdownDescription:v("tabFocusMode","Controls whether the editor receives tabs or defers them to the workbench for navigation.")})),layoutInfo:Se(new CC),wrappingInfo:Se(new T0e),wrappingIndent:Se(new I0e),wrappingStrategy:Se(new o0e)};class O0e{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?JC.isErrorNoTelemetry(e)?new JC(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}emit(e){this.listeners.forEach(t=>{t(e)})}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}}const Yte=new O0e;function Nt(o){eu(o)||Yte.onUnexpectedError(o)}function hs(o){eu(o)||Yte.onUnexpectedExternalError(o)}function hY(o){if(o instanceof Error){const{name:e,message:t}=o,i=o.stacktrace||o.stack;return{$isError:!0,name:e,message:t,stack:i,noTelemetry:JC.isErrorNoTelemetry(o)}}return o}const oR="Canceled";function eu(o){return o instanceof hg?!0:o instanceof Error&&o.name===oR&&o.message===oR}class hg extends Error{constructor(){super(oR),this.name=this.message}}function F0e(){const o=new Error(oR);return o.name=o.message,o}function lc(o){return o?new Error(`Illegal argument: ${o}`):new Error("Illegal argument")}function EV(o){return o?new Error(`Illegal state: ${o}`):new Error("Illegal state")}class B0e extends Error{constructor(e){super("NotSupported"),e&&(this.message=e)}}class JC extends Error{constructor(e){super(e),this.name="CodeExpectedError"}static fromError(e){if(e instanceof JC)return e;const t=new JC;return t.message=e.message,t.stack=e.stack,t}static isErrorNoTelemetry(e){return e.name==="CodeExpectedError"}}class pn extends Error{constructor(e){super(e||"An unexpected bug occurred."),Object.setPrototypeOf(this,pn.prototype)}}function rm(o,e){const t=this;let i=!1,n;return function(){return i||(i=!0,n=o.apply(t,arguments)),n}}function IV(o){return typeof o.dispose=="function"&&o.dispose.length===0}function cn(o){if(ii.is(o)){const e=[];for(const t of o)if(t)try{t.dispose()}catch(i){e.push(i)}if(e.length===1)throw e[0];if(e.length>1)throw new AggregateError(e,"Encountered errors while disposing of store");return Array.isArray(o)?[]:o}else if(o)return o.dispose(),o}function $c(...o){return lt(()=>cn(o))}function lt(o){return{dispose:rm(()=>{o()})}}class he{constructor(){this._toDispose=new Set,this._isDisposed=!1}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{cn(this._toDispose)}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?he.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}deleteAndLeak(e){e&&this._toDispose.has(e)&&this._toDispose.delete(e)}}he.DISABLE_DISPOSED_WARNING=!1;class J{constructor(){this._store=new he,this._store}dispose(){this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}}J.None=Object.freeze({dispose(){}});class Xs{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(e){var t;this._isDisposed||e===this._value||((t=this._value)===null||t===void 0||t.dispose(),this._value=e)}clear(){this.value=void 0}dispose(){var e;this._isDisposed=!0,(e=this._value)===null||e===void 0||e.dispose(),this._value=void 0}}class W0e{constructor(e){this._disposable=e,this._counter=1}acquire(){return this._counter++,this}release(){return--this._counter===0&&this._disposable.dispose(),this}}class V0e{constructor(e){this.object=e}dispose(){}}class TV{constructor(){this._store=new Map,this._isDisposed=!1}dispose(){this._isDisposed=!0,this.clearAndDisposeAll()}clearAndDisposeAll(){if(this._store.size)try{cn(this._store.values())}finally{this._store.clear()}}get(e){return this._store.get(e)}set(e,t,i=!1){var n;this._isDisposed&&console.warn(new Error("Trying to add a disposable to a DisposableMap that has already been disposed of. The added object will be leaked!").stack),i||(n=this._store.get(e))===null||n===void 0||n.dispose(),this._store.set(e,t)}deleteAndDispose(e){var t;(t=this._store.get(e))===null||t===void 0||t.dispose(),this._store.delete(e)}[Symbol.iterator](){return this._store[Symbol.iterator]()}}const H0e=globalThis.performance&&typeof globalThis.performance.now=="function";class Ao{static create(e){return new Ao(e)}constructor(e){this._now=H0e&&e===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}}var Ie;(function(o){o.None=()=>J.None;function e(K,j){return f(K,()=>{},0,void 0,!0,void 0,j)}o.defer=e;function t(K){return(j,q=null,se)=>{let fe=!1,Ae;return Ae=K(Ne=>{if(!fe)return Ae?Ae.dispose():fe=!0,j.call(q,Ne)},null,se),fe&&Ae.dispose(),Ae}}o.once=t;function i(K,j,q){return c((se,fe=null,Ae)=>K(Ne=>se.call(fe,j(Ne)),null,Ae),q)}o.map=i;function n(K,j,q){return c((se,fe=null,Ae)=>K(Ne=>{j(Ne),se.call(fe,Ne)},null,Ae),q)}o.forEach=n;function s(K,j,q){return c((se,fe=null,Ae)=>K(Ne=>j(Ne)&&se.call(fe,Ne),null,Ae),q)}o.filter=s;function r(K){return K}o.signal=r;function a(...K){return(j,q=null,se)=>{const fe=$c(...K.map(Ae=>Ae(Ne=>j.call(q,Ne))));return u(fe,se)}}o.any=a;function l(K,j,q,se){let fe=q;return i(K,Ae=>(fe=j(fe,Ae),fe),se)}o.reduce=l;function c(K,j){let q;const se={onWillAddFirstListener(){q=K(fe.fire,fe)},onDidRemoveLastListener(){q==null||q.dispose()}},fe=new Y(se);return j==null||j.add(fe),fe.event}function u(K,j){return j instanceof Array?j.push(K):j&&j.add(K),K}function f(K,j,q=100,se=!1,fe=!1,Ae,Ne){let Le,be,ze,it=0,qe;const Fe={leakWarningThreshold:Ae,onWillAddFirstListener(){Le=K(Bn=>{it++,be=j(be,Bn),se&&!ze&&(Li.fire(be),be=void 0),qe=()=>{const tn=be;be=void 0,ze=void 0,(!se||it>1)&&Li.fire(tn),it=0},typeof q=="number"?(clearTimeout(ze),ze=setTimeout(qe,q)):ze===void 0&&(ze=0,queueMicrotask(qe))})},onWillRemoveListener(){fe&&it>0&&(qe==null||qe())},onDidRemoveLastListener(){qe=void 0,Le.dispose()}},Li=new Y(Fe);return Ne==null||Ne.add(Li),Li.event}o.debounce=f;function g(K,j=0,q){return o.debounce(K,(se,fe)=>se?(se.push(fe),se):[fe],j,void 0,!0,void 0,q)}o.accumulate=g;function p(K,j=(se,fe)=>se===fe,q){let se=!0,fe;return s(K,Ae=>{const Ne=se||!j(Ae,fe);return se=!1,fe=Ae,Ne},q)}o.latch=p;function _(K,j,q){return[o.filter(K,j,q),o.filter(K,se=>!j(se),q)]}o.split=_;function b(K,j=!1,q=[],se){let fe=q.slice(),Ae=K(be=>{fe?fe.push(be):Le.fire(be)});se&&se.add(Ae);const Ne=()=>{fe==null||fe.forEach(be=>Le.fire(be)),fe=null},Le=new Y({onWillAddFirstListener(){Ae||(Ae=K(be=>Le.fire(be)),se&&se.add(Ae))},onDidAddFirstListener(){fe&&(j?setTimeout(Ne):Ne())},onDidRemoveLastListener(){Ae&&Ae.dispose(),Ae=null}});return se&&se.add(Le),Le.event}o.buffer=b;function y(K,j){return(se,fe,Ae)=>{const Ne=j(new L);return K(function(Le){const be=Ne.evaluate(Le);be!==S&&se.call(fe,be)},void 0,Ae)}}o.chain=y;const S=Symbol("HaltChainable");class L{constructor(){this.steps=[]}map(j){return this.steps.push(j),this}forEach(j){return this.steps.push(q=>(j(q),q)),this}filter(j){return this.steps.push(q=>j(q)?q:S),this}reduce(j,q){let se=q;return this.steps.push(fe=>(se=j(se,fe),se)),this}latch(j=(q,se)=>q===se){let q=!0,se;return this.steps.push(fe=>{const Ae=q||!j(fe,se);return q=!1,se=fe,Ae?fe:S}),this}evaluate(j){for(const q of this.steps)if(j=q(j),j===S)break;return j}}function x(K,j,q=se=>se){const se=(...Le)=>Ne.fire(q(...Le)),fe=()=>K.on(j,se),Ae=()=>K.removeListener(j,se),Ne=new Y({onWillAddFirstListener:fe,onDidRemoveLastListener:Ae});return Ne.event}o.fromNodeEventEmitter=x;function D(K,j,q=se=>se){const se=(...Le)=>Ne.fire(q(...Le)),fe=()=>K.addEventListener(j,se),Ae=()=>K.removeEventListener(j,se),Ne=new Y({onWillAddFirstListener:fe,onDidRemoveLastListener:Ae});return Ne.event}o.fromDOMEventEmitter=D;function E(K){return new Promise(j=>t(K)(j))}o.toPromise=E;function N(K){const j=new Y;return K.then(q=>{j.fire(q)},()=>{j.fire(void 0)}).finally(()=>{j.dispose()}),j.event}o.fromPromise=N;function M(K,j,q){return j(q),K(se=>j(se))}o.runAndSubscribe=M;class F{constructor(j,q){this._observable=j,this._counter=0,this._hasChanged=!1;const se={onWillAddFirstListener:()=>{j.addObserver(this)},onDidRemoveLastListener:()=>{j.removeObserver(this)}};this.emitter=new Y(se),q&&q.add(this.emitter)}beginUpdate(j){this._counter++}handlePossibleChange(j){}handleChange(j,q){this._hasChanged=!0}endUpdate(j){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function H(K,j){return new F(K,j).emitter.event}o.fromObservable=H;function Q(K){return(j,q,se)=>{let fe=0,Ae=!1;const Ne={beginUpdate(){fe++},endUpdate(){fe--,fe===0&&(K.reportChanges(),Ae&&(Ae=!1,j.call(q)))},handlePossibleChange(){},handleChange(){Ae=!0}};K.addObserver(Ne),K.reportChanges();const Le={dispose(){K.removeObserver(Ne)}};return se instanceof he?se.add(Le):Array.isArray(se)&&se.push(Le),Le}}o.fromObservableLight=Q})(Ie||(Ie={}));class e1{constructor(e){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${e}_${e1._idPool++}`,e1.all.add(this)}start(e){this._stopWatch=new Ao,this.listenerCount=e}stop(){if(this._stopWatch){const e=this._stopWatch.elapsed();this.durations.push(e),this.elapsedOverall+=e,this.invocationCount+=1,this._stopWatch=void 0}}}e1.all=new Set;e1._idPool=0;let z0e=-1;class U0e{constructor(e,t=Math.random().toString(18).slice(2,5)){this.threshold=e,this.name=t,this._warnCountdown=0}dispose(){var e;(e=this._stacks)===null||e===void 0||e.clear()}check(e,t){const i=this.threshold;if(i<=0||t<i)return;this._stacks||(this._stacks=new Map);const n=this._stacks.get(e.value)||0;if(this._stacks.set(e.value,n+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=i*.5;let s,r=0;for(const[a,l]of this._stacks)(!s||r<l)&&(s=a,r=l);console.warn(`[${this.name}] potential listener LEAK detected, having ${t} listeners already. MOST frequent listener (${r}):`),console.warn(s)}return()=>{const s=this._stacks.get(e.value)||0;this._stacks.set(e.value,s-1)}}}class NV{static create(){var e;return new NV((e=new Error().stack)!==null&&e!==void 0?e:"")}constructor(e){this.value=e}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}}class B5{constructor(e){this.value=e}}const $0e=2;let Y=class{constructor(e){var t,i,n,s,r;this._size=0,this._options=e,this._leakageMon=!((t=this._options)===null||t===void 0)&&t.leakWarningThreshold?new U0e((n=(i=this._options)===null||i===void 0?void 0:i.leakWarningThreshold)!==null&&n!==void 0?n:z0e):void 0,this._perfMon=!((s=this._options)===null||s===void 0)&&s._profName?new e1(this._options._profName):void 0,this._deliveryQueue=(r=this._options)===null||r===void 0?void 0:r.deliveryQueue}dispose(){var e,t,i,n;this._disposed||(this._disposed=!0,((e=this._deliveryQueue)===null||e===void 0?void 0:e.current)===this&&this._deliveryQueue.reset(),this._listeners&&(this._listeners=void 0,this._size=0),(i=(t=this._options)===null||t===void 0?void 0:t.onDidRemoveLastListener)===null||i===void 0||i.call(t),(n=this._leakageMon)===null||n===void 0||n.dispose())}get event(){var e;return(e=this._event)!==null&&e!==void 0||(this._event=(t,i,n)=>{var s,r,a,l,c;if(this._leakageMon&&this._size>this._leakageMon.threshold*3)return console.warn(`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far`),J.None;if(this._disposed)return J.None;i&&(t=t.bind(i));const u=new B5(t);let f;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(u.stack=NV.create(),f=this._leakageMon.check(u.stack,this._size+1)),this._listeners?this._listeners instanceof B5?((c=this._deliveryQueue)!==null&&c!==void 0||(this._deliveryQueue=new Zte),this._listeners=[this._listeners,u]):this._listeners.push(u):((r=(s=this._options)===null||s===void 0?void 0:s.onWillAddFirstListener)===null||r===void 0||r.call(s,this),this._listeners=u,(l=(a=this._options)===null||a===void 0?void 0:a.onDidAddFirstListener)===null||l===void 0||l.call(a,this)),this._size++;const g=lt(()=>{f==null||f(),this._removeListener(u)});return n instanceof he?n.add(g):Array.isArray(n)&&n.push(g),g}),this._event}_removeListener(e){var t,i,n,s;if((i=(t=this._options)===null||t===void 0?void 0:t.onWillRemoveListener)===null||i===void 0||i.call(t,this),!this._listeners)return;if(this._size===1){this._listeners=void 0,(s=(n=this._options)===null||n===void 0?void 0:n.onDidRemoveLastListener)===null||s===void 0||s.call(n,this),this._size=0;return}const r=this._listeners,a=r.indexOf(e);if(a===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,r[a]=void 0;const l=this._deliveryQueue.current===this;if(this._size*$0e<=r.length){let c=0;for(let u=0;u<r.length;u++)r[u]?r[c++]=r[u]:l&&(this._deliveryQueue.end--,c<this._deliveryQueue.i&&this._deliveryQueue.i--);r.length=c}}_deliver(e,t){var i;if(!e)return;const n=((i=this._options)===null||i===void 0?void 0:i.onListenerError)||Nt;if(!n){e.value(t);return}try{e.value(t)}catch(s){n(s)}}_deliverQueue(e){const t=e.current._listeners;for(;e.i<e.end;)this._deliver(t[e.i++],e.value);e.reset()}fire(e){var t,i,n,s;if(!((t=this._deliveryQueue)===null||t===void 0)&&t.current&&(this._deliverQueue(this._deliveryQueue),(i=this._perfMon)===null||i===void 0||i.stop()),(n=this._perfMon)===null||n===void 0||n.start(this._size),this._listeners)if(this._listeners instanceof B5)this._deliver(this._listeners,e);else{const r=this._deliveryQueue;r.enqueue(this,e,this._listeners.length),this._deliverQueue(r)}(s=this._perfMon)===null||s===void 0||s.stop()}hasListeners(){return this._size>0}};const j0e=()=>new Zte;class Zte{constructor(){this.i=-1,this.end=0}enqueue(e,t,i){this.i=0,this.end=i,this.current=e,this.value=t}reset(){this.i=this.end,this.current=void 0,this.value=void 0}}class Dv extends Y{constructor(e){super(e),this._isPaused=0,this._eventQueue=new Wr,this._mergeFn=e==null?void 0:e.merge}pause(){this._isPaused++}resume(){if(this._isPaused!==0&&--this._isPaused===0)if(this._mergeFn){if(this._eventQueue.size>0){const e=Array.from(this._eventQueue);this._eventQueue.clear(),super.fire(this._mergeFn(e))}}else for(;!this._isPaused&&this._eventQueue.size!==0;)super.fire(this._eventQueue.shift())}fire(e){this._size&&(this._isPaused!==0?this._eventQueue.push(e):super.fire(e))}}class Qte extends Dv{constructor(e){var t;super(e),this._delay=(t=e.delay)!==null&&t!==void 0?t:100}fire(e){this._handle||(this.pause(),this._handle=setTimeout(()=>{this._handle=void 0,this.resume()},this._delay)),super.fire(e)}}class K0e extends Y{constructor(e){super(e),this._queuedEvents=[],this._mergeFn=e==null?void 0:e.merge}fire(e){this.hasListeners()&&(this._queuedEvents.push(e),this._queuedEvents.length===1&&queueMicrotask(()=>{this._mergeFn?super.fire(this._mergeFn(this._queuedEvents)):this._queuedEvents.forEach(t=>super.fire(t)),this._queuedEvents=[]}))}}class q0e{constructor(){this.hasListeners=!1,this.events=[],this.emitter=new Y({onWillAddFirstListener:()=>this.onFirstListenerAdd(),onDidRemoveLastListener:()=>this.onLastListenerRemove()})}get event(){return this.emitter.event}add(e){const t={event:e,listener:null};return this.events.push(t),this.hasListeners&&this.hook(t),lt(rm(()=>{this.hasListeners&&this.unhook(t);const n=this.events.indexOf(t);this.events.splice(n,1)}))}onFirstListenerAdd(){this.hasListeners=!0,this.events.forEach(e=>this.hook(e))}onLastListenerRemove(){this.hasListeners=!1,this.events.forEach(e=>this.unhook(e))}hook(e){e.listener=e.event(t=>this.emitter.fire(t))}unhook(e){var t;(t=e.listener)===null||t===void 0||t.dispose(),e.listener=null}dispose(){var e;this.emitter.dispose();for(const t of this.events)(e=t.listener)===null||e===void 0||e.dispose();this.events=[]}}class RV{constructor(){this.buffers=[]}wrapEvent(e){return(t,i,n)=>e(s=>{const r=this.buffers[this.buffers.length-1];r?r.push(()=>t.call(i,s)):t.call(i,s)},void 0,n)}bufferEvents(e){const t=[];this.buffers.push(t);const i=e();return this.buffers.pop(),t.forEach(n=>n()),i}}class fY{constructor(){this.listening=!1,this.inputEvent=Ie.None,this.inputEventListener=J.None,this.emitter=new Y({onDidAddFirstListener:()=>{this.listening=!0,this.inputEventListener=this.inputEvent(this.emitter.fire,this.emitter)},onDidRemoveLastListener:()=>{this.listening=!1,this.inputEventListener.dispose()}}),this.event=this.emitter.event}set input(e){this.inputEvent=e,this.listening&&(this.inputEventListener.dispose(),this.inputEventListener=e(this.emitter.fire,this.emitter))}dispose(){this.inputEventListener.dispose(),this.emitter.dispose()}}const Xte=Object.freeze(function(o,e){const t=setTimeout(o.bind(e),0);return{dispose(){clearTimeout(t)}}});var Yt;(function(o){function e(t){return t===o.None||t===o.Cancelled||t instanceof gN?!0:!t||typeof t!="object"?!1:typeof t.isCancellationRequested=="boolean"&&typeof t.onCancellationRequested=="function"}o.isCancellationToken=e,o.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Ie.None}),o.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Xte})})(Yt||(Yt={}));class gN{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?Xte:(this._emitter||(this._emitter=new Y),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}}let os=class{constructor(e){this._token=void 0,this._parentListener=void 0,this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new gN),this._token}cancel(){this._token?this._token instanceof gN&&this._token.cancel():this._token=Yt.Cancelled}dispose(e=!1){var t;e&&this.cancel(),(t=this._parentListener)===null||t===void 0||t.dispose(),this._token?this._token instanceof gN&&this._token.dispose():this._token=Yt.None}};class MV{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}}const pN=new MV,ZB=new MV,QB=new MV,Jte=new Array(230),G0e=Object.create(null),Y0e=Object.create(null),AV=[];for(let o=0;o<=193;o++)AV[o]=-1;(function(){const o="",e=[[1,0,"None",0,"unknown",0,"VK_UNKNOWN",o,o],[1,1,"Hyper",0,o,0,o,o,o],[1,2,"Super",0,o,0,o,o,o],[1,3,"Fn",0,o,0,o,o,o],[1,4,"FnLock",0,o,0,o,o,o],[1,5,"Suspend",0,o,0,o,o,o],[1,6,"Resume",0,o,0,o,o,o],[1,7,"Turbo",0,o,0,o,o,o],[1,8,"Sleep",0,o,0,"VK_SLEEP",o,o],[1,9,"WakeUp",0,o,0,o,o,o],[0,10,"KeyA",31,"A",65,"VK_A",o,o],[0,11,"KeyB",32,"B",66,"VK_B",o,o],[0,12,"KeyC",33,"C",67,"VK_C",o,o],[0,13,"KeyD",34,"D",68,"VK_D",o,o],[0,14,"KeyE",35,"E",69,"VK_E",o,o],[0,15,"KeyF",36,"F",70,"VK_F",o,o],[0,16,"KeyG",37,"G",71,"VK_G",o,o],[0,17,"KeyH",38,"H",72,"VK_H",o,o],[0,18,"KeyI",39,"I",73,"VK_I",o,o],[0,19,"KeyJ",40,"J",74,"VK_J",o,o],[0,20,"KeyK",41,"K",75,"VK_K",o,o],[0,21,"KeyL",42,"L",76,"VK_L",o,o],[0,22,"KeyM",43,"M",77,"VK_M",o,o],[0,23,"KeyN",44,"N",78,"VK_N",o,o],[0,24,"KeyO",45,"O",79,"VK_O",o,o],[0,25,"KeyP",46,"P",80,"VK_P",o,o],[0,26,"KeyQ",47,"Q",81,"VK_Q",o,o],[0,27,"KeyR",48,"R",82,"VK_R",o,o],[0,28,"KeyS",49,"S",83,"VK_S",o,o],[0,29,"KeyT",50,"T",84,"VK_T",o,o],[0,30,"KeyU",51,"U",85,"VK_U",o,o],[0,31,"KeyV",52,"V",86,"VK_V",o,o],[0,32,"KeyW",53,"W",87,"VK_W",o,o],[0,33,"KeyX",54,"X",88,"VK_X",o,o],[0,34,"KeyY",55,"Y",89,"VK_Y",o,o],[0,35,"KeyZ",56,"Z",90,"VK_Z",o,o],[0,36,"Digit1",22,"1",49,"VK_1",o,o],[0,37,"Digit2",23,"2",50,"VK_2",o,o],[0,38,"Digit3",24,"3",51,"VK_3",o,o],[0,39,"Digit4",25,"4",52,"VK_4",o,o],[0,40,"Digit5",26,"5",53,"VK_5",o,o],[0,41,"Digit6",27,"6",54,"VK_6",o,o],[0,42,"Digit7",28,"7",55,"VK_7",o,o],[0,43,"Digit8",29,"8",56,"VK_8",o,o],[0,44,"Digit9",30,"9",57,"VK_9",o,o],[0,45,"Digit0",21,"0",48,"VK_0",o,o],[1,46,"Enter",3,"Enter",13,"VK_RETURN",o,o],[1,47,"Escape",9,"Escape",27,"VK_ESCAPE",o,o],[1,48,"Backspace",1,"Backspace",8,"VK_BACK",o,o],[1,49,"Tab",2,"Tab",9,"VK_TAB",o,o],[1,50,"Space",10,"Space",32,"VK_SPACE",o,o],[0,51,"Minus",88,"-",189,"VK_OEM_MINUS","-","OEM_MINUS"],[0,52,"Equal",86,"=",187,"VK_OEM_PLUS","=","OEM_PLUS"],[0,53,"BracketLeft",92,"[",219,"VK_OEM_4","[","OEM_4"],[0,54,"BracketRight",94,"]",221,"VK_OEM_6","]","OEM_6"],[0,55,"Backslash",93,"\\",220,"VK_OEM_5","\\","OEM_5"],[0,56,"IntlHash",0,o,0,o,o,o],[0,57,"Semicolon",85,";",186,"VK_OEM_1",";","OEM_1"],[0,58,"Quote",95,"'",222,"VK_OEM_7","'","OEM_7"],[0,59,"Backquote",91,"`",192,"VK_OEM_3","`","OEM_3"],[0,60,"Comma",87,",",188,"VK_OEM_COMMA",",","OEM_COMMA"],[0,61,"Period",89,".",190,"VK_OEM_PERIOD",".","OEM_PERIOD"],[0,62,"Slash",90,"/",191,"VK_OEM_2","/","OEM_2"],[1,63,"CapsLock",8,"CapsLock",20,"VK_CAPITAL",o,o],[1,64,"F1",59,"F1",112,"VK_F1",o,o],[1,65,"F2",60,"F2",113,"VK_F2",o,o],[1,66,"F3",61,"F3",114,"VK_F3",o,o],[1,67,"F4",62,"F4",115,"VK_F4",o,o],[1,68,"F5",63,"F5",116,"VK_F5",o,o],[1,69,"F6",64,"F6",117,"VK_F6",o,o],[1,70,"F7",65,"F7",118,"VK_F7",o,o],[1,71,"F8",66,"F8",119,"VK_F8",o,o],[1,72,"F9",67,"F9",120,"VK_F9",o,o],[1,73,"F10",68,"F10",121,"VK_F10",o,o],[1,74,"F11",69,"F11",122,"VK_F11",o,o],[1,75,"F12",70,"F12",123,"VK_F12",o,o],[1,76,"PrintScreen",0,o,0,o,o,o],[1,77,"ScrollLock",84,"ScrollLock",145,"VK_SCROLL",o,o],[1,78,"Pause",7,"PauseBreak",19,"VK_PAUSE",o,o],[1,79,"Insert",19,"Insert",45,"VK_INSERT",o,o],[1,80,"Home",14,"Home",36,"VK_HOME",o,o],[1,81,"PageUp",11,"PageUp",33,"VK_PRIOR",o,o],[1,82,"Delete",20,"Delete",46,"VK_DELETE",o,o],[1,83,"End",13,"End",35,"VK_END",o,o],[1,84,"PageDown",12,"PageDown",34,"VK_NEXT",o,o],[1,85,"ArrowRight",17,"RightArrow",39,"VK_RIGHT","Right",o],[1,86,"ArrowLeft",15,"LeftArrow",37,"VK_LEFT","Left",o],[1,87,"ArrowDown",18,"DownArrow",40,"VK_DOWN","Down",o],[1,88,"ArrowUp",16,"UpArrow",38,"VK_UP","Up",o],[1,89,"NumLock",83,"NumLock",144,"VK_NUMLOCK",o,o],[1,90,"NumpadDivide",113,"NumPad_Divide",111,"VK_DIVIDE",o,o],[1,91,"NumpadMultiply",108,"NumPad_Multiply",106,"VK_MULTIPLY",o,o],[1,92,"NumpadSubtract",111,"NumPad_Subtract",109,"VK_SUBTRACT",o,o],[1,93,"NumpadAdd",109,"NumPad_Add",107,"VK_ADD",o,o],[1,94,"NumpadEnter",3,o,0,o,o,o],[1,95,"Numpad1",99,"NumPad1",97,"VK_NUMPAD1",o,o],[1,96,"Numpad2",100,"NumPad2",98,"VK_NUMPAD2",o,o],[1,97,"Numpad3",101,"NumPad3",99,"VK_NUMPAD3",o,o],[1,98,"Numpad4",102,"NumPad4",100,"VK_NUMPAD4",o,o],[1,99,"Numpad5",103,"NumPad5",101,"VK_NUMPAD5",o,o],[1,100,"Numpad6",104,"NumPad6",102,"VK_NUMPAD6",o,o],[1,101,"Numpad7",105,"NumPad7",103,"VK_NUMPAD7",o,o],[1,102,"Numpad8",106,"NumPad8",104,"VK_NUMPAD8",o,o],[1,103,"Numpad9",107,"NumPad9",105,"VK_NUMPAD9",o,o],[1,104,"Numpad0",98,"NumPad0",96,"VK_NUMPAD0",o,o],[1,105,"NumpadDecimal",112,"NumPad_Decimal",110,"VK_DECIMAL",o,o],[0,106,"IntlBackslash",97,"OEM_102",226,"VK_OEM_102",o,o],[1,107,"ContextMenu",58,"ContextMenu",93,o,o,o],[1,108,"Power",0,o,0,o,o,o],[1,109,"NumpadEqual",0,o,0,o,o,o],[1,110,"F13",71,"F13",124,"VK_F13",o,o],[1,111,"F14",72,"F14",125,"VK_F14",o,o],[1,112,"F15",73,"F15",126,"VK_F15",o,o],[1,113,"F16",74,"F16",127,"VK_F16",o,o],[1,114,"F17",75,"F17",128,"VK_F17",o,o],[1,115,"F18",76,"F18",129,"VK_F18",o,o],[1,116,"F19",77,"F19",130,"VK_F19",o,o],[1,117,"F20",78,"F20",131,"VK_F20",o,o],[1,118,"F21",79,"F21",132,"VK_F21",o,o],[1,119,"F22",80,"F22",133,"VK_F22",o,o],[1,120,"F23",81,"F23",134,"VK_F23",o,o],[1,121,"F24",82,"F24",135,"VK_F24",o,o],[1,122,"Open",0,o,0,o,o,o],[1,123,"Help",0,o,0,o,o,o],[1,124,"Select",0,o,0,o,o,o],[1,125,"Again",0,o,0,o,o,o],[1,126,"Undo",0,o,0,o,o,o],[1,127,"Cut",0,o,0,o,o,o],[1,128,"Copy",0,o,0,o,o,o],[1,129,"Paste",0,o,0,o,o,o],[1,130,"Find",0,o,0,o,o,o],[1,131,"AudioVolumeMute",117,"AudioVolumeMute",173,"VK_VOLUME_MUTE",o,o],[1,132,"AudioVolumeUp",118,"AudioVolumeUp",175,"VK_VOLUME_UP",o,o],[1,133,"AudioVolumeDown",119,"AudioVolumeDown",174,"VK_VOLUME_DOWN",o,o],[1,134,"NumpadComma",110,"NumPad_Separator",108,"VK_SEPARATOR",o,o],[0,135,"IntlRo",115,"ABNT_C1",193,"VK_ABNT_C1",o,o],[1,136,"KanaMode",0,o,0,o,o,o],[0,137,"IntlYen",0,o,0,o,o,o],[1,138,"Convert",0,o,0,o,o,o],[1,139,"NonConvert",0,o,0,o,o,o],[1,140,"Lang1",0,o,0,o,o,o],[1,141,"Lang2",0,o,0,o,o,o],[1,142,"Lang3",0,o,0,o,o,o],[1,143,"Lang4",0,o,0,o,o,o],[1,144,"Lang5",0,o,0,o,o,o],[1,145,"Abort",0,o,0,o,o,o],[1,146,"Props",0,o,0,o,o,o],[1,147,"NumpadParenLeft",0,o,0,o,o,o],[1,148,"NumpadParenRight",0,o,0,o,o,o],[1,149,"NumpadBackspace",0,o,0,o,o,o],[1,150,"NumpadMemoryStore",0,o,0,o,o,o],[1,151,"NumpadMemoryRecall",0,o,0,o,o,o],[1,152,"NumpadMemoryClear",0,o,0,o,o,o],[1,153,"NumpadMemoryAdd",0,o,0,o,o,o],[1,154,"NumpadMemorySubtract",0,o,0,o,o,o],[1,155,"NumpadClear",131,"Clear",12,"VK_CLEAR",o,o],[1,156,"NumpadClearEntry",0,o,0,o,o,o],[1,0,o,5,"Ctrl",17,"VK_CONTROL",o,o],[1,0,o,4,"Shift",16,"VK_SHIFT",o,o],[1,0,o,6,"Alt",18,"VK_MENU",o,o],[1,0,o,57,"Meta",91,"VK_COMMAND",o,o],[1,157,"ControlLeft",5,o,0,"VK_LCONTROL",o,o],[1,158,"ShiftLeft",4,o,0,"VK_LSHIFT",o,o],[1,159,"AltLeft",6,o,0,"VK_LMENU",o,o],[1,160,"MetaLeft",57,o,0,"VK_LWIN",o,o],[1,161,"ControlRight",5,o,0,"VK_RCONTROL",o,o],[1,162,"ShiftRight",4,o,0,"VK_RSHIFT",o,o],[1,163,"AltRight",6,o,0,"VK_RMENU",o,o],[1,164,"MetaRight",57,o,0,"VK_RWIN",o,o],[1,165,"BrightnessUp",0,o,0,o,o,o],[1,166,"BrightnessDown",0,o,0,o,o,o],[1,167,"MediaPlay",0,o,0,o,o,o],[1,168,"MediaRecord",0,o,0,o,o,o],[1,169,"MediaFastForward",0,o,0,o,o,o],[1,170,"MediaRewind",0,o,0,o,o,o],[1,171,"MediaTrackNext",124,"MediaTrackNext",176,"VK_MEDIA_NEXT_TRACK",o,o],[1,172,"MediaTrackPrevious",125,"MediaTrackPrevious",177,"VK_MEDIA_PREV_TRACK",o,o],[1,173,"MediaStop",126,"MediaStop",178,"VK_MEDIA_STOP",o,o],[1,174,"Eject",0,o,0,o,o,o],[1,175,"MediaPlayPause",127,"MediaPlayPause",179,"VK_MEDIA_PLAY_PAUSE",o,o],[1,176,"MediaSelect",128,"LaunchMediaPlayer",181,"VK_MEDIA_LAUNCH_MEDIA_SELECT",o,o],[1,177,"LaunchMail",129,"LaunchMail",180,"VK_MEDIA_LAUNCH_MAIL",o,o],[1,178,"LaunchApp2",130,"LaunchApp2",183,"VK_MEDIA_LAUNCH_APP2",o,o],[1,179,"LaunchApp1",0,o,0,"VK_MEDIA_LAUNCH_APP1",o,o],[1,180,"SelectTask",0,o,0,o,o,o],[1,181,"LaunchScreenSaver",0,o,0,o,o,o],[1,182,"BrowserSearch",120,"BrowserSearch",170,"VK_BROWSER_SEARCH",o,o],[1,183,"BrowserHome",121,"BrowserHome",172,"VK_BROWSER_HOME",o,o],[1,184,"BrowserBack",122,"BrowserBack",166,"VK_BROWSER_BACK",o,o],[1,185,"BrowserForward",123,"BrowserForward",167,"VK_BROWSER_FORWARD",o,o],[1,186,"BrowserStop",0,o,0,"VK_BROWSER_STOP",o,o],[1,187,"BrowserRefresh",0,o,0,"VK_BROWSER_REFRESH",o,o],[1,188,"BrowserFavorites",0,o,0,"VK_BROWSER_FAVORITES",o,o],[1,189,"ZoomToggle",0,o,0,o,o,o],[1,190,"MailReply",0,o,0,o,o,o],[1,191,"MailForward",0,o,0,o,o,o],[1,192,"MailSend",0,o,0,o,o,o],[1,0,o,114,"KeyInComposition",229,o,o,o],[1,0,o,116,"ABNT_C2",194,"VK_ABNT_C2",o,o],[1,0,o,96,"OEM_8",223,"VK_OEM_8",o,o],[1,0,o,0,o,0,"VK_KANA",o,o],[1,0,o,0,o,0,"VK_HANGUL",o,o],[1,0,o,0,o,0,"VK_JUNJA",o,o],[1,0,o,0,o,0,"VK_FINAL",o,o],[1,0,o,0,o,0,"VK_HANJA",o,o],[1,0,o,0,o,0,"VK_KANJI",o,o],[1,0,o,0,o,0,"VK_CONVERT",o,o],[1,0,o,0,o,0,"VK_NONCONVERT",o,o],[1,0,o,0,o,0,"VK_ACCEPT",o,o],[1,0,o,0,o,0,"VK_MODECHANGE",o,o],[1,0,o,0,o,0,"VK_SELECT",o,o],[1,0,o,0,o,0,"VK_PRINT",o,o],[1,0,o,0,o,0,"VK_EXECUTE",o,o],[1,0,o,0,o,0,"VK_SNAPSHOT",o,o],[1,0,o,0,o,0,"VK_HELP",o,o],[1,0,o,0,o,0,"VK_APPS",o,o],[1,0,o,0,o,0,"VK_PROCESSKEY",o,o],[1,0,o,0,o,0,"VK_PACKET",o,o],[1,0,o,0,o,0,"VK_DBE_SBCSCHAR",o,o],[1,0,o,0,o,0,"VK_DBE_DBCSCHAR",o,o],[1,0,o,0,o,0,"VK_ATTN",o,o],[1,0,o,0,o,0,"VK_CRSEL",o,o],[1,0,o,0,o,0,"VK_EXSEL",o,o],[1,0,o,0,o,0,"VK_EREOF",o,o],[1,0,o,0,o,0,"VK_PLAY",o,o],[1,0,o,0,o,0,"VK_ZOOM",o,o],[1,0,o,0,o,0,"VK_NONAME",o,o],[1,0,o,0,o,0,"VK_PA1",o,o],[1,0,o,0,o,0,"VK_OEM_CLEAR",o,o]],t=[],i=[];for(const n of e){const[s,r,a,l,c,u,f,g,p]=n;if(i[r]||(i[r]=!0,G0e[a]=r,Y0e[a.toLowerCase()]=r,s&&(AV[r]=l)),!t[l]){if(t[l]=!0,!c)throw new Error(`String representation missing for key code ${l} around scan code ${a}`);pN.define(l,c),ZB.define(l,g||c),QB.define(l,p||g||c)}u&&(Jte[u]=l)}})();var Cf;(function(o){function e(a){return pN.keyCodeToStr(a)}o.toString=e;function t(a){return pN.strToKeyCode(a)}o.fromString=t;function i(a){return ZB.keyCodeToStr(a)}o.toUserSettingsUS=i;function n(a){return QB.keyCodeToStr(a)}o.toUserSettingsGeneral=n;function s(a){return ZB.strToKeyCode(a)||QB.strToKeyCode(a)}o.fromUserSettings=s;function r(a){if(a>=98&&a<=113)return null;switch(a){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return pN.keyCodeToStr(a)}o.toElectronAccelerator=r})(Cf||(Cf={}));function Fs(o,e){const t=(e&65535)<<16>>>0;return(o|t)>>>0}var gY={};let yC;const W5=globalThis.vscode;if(typeof W5<"u"&&typeof W5.process<"u"){const o=W5.process;yC={get platform(){return o.platform},get arch(){return o.arch},get env(){return o.env},cwd(){return o.cwd()}}}else typeof process<"u"?yC={get platform(){return process.platform},get arch(){return process.arch},get env(){return gY},cwd(){return gY.VSCODE_CWD||process.cwd()}}:yC={get platform(){return Mo?"win32":Kt?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};const rR=yC.cwd,XB=yC.env,Z0e=yC.platform,Q0e=65,X0e=97,J0e=90,eCe=122,$p=46,lr=47,ll=92,Jg=58,tCe=63;class eie extends Error{constructor(e,t,i){let n;typeof t=="string"&&t.indexOf("not ")===0?(n="must not be",t=t.replace(/^not /,"")):n="must be";const s=e.indexOf(".")!==-1?"property":"argument";let r=`The "${e}" ${s} ${n} of type ${t}`;r+=`. Received type ${typeof i}`,super(r),this.code="ERR_INVALID_ARG_TYPE"}}function iCe(o,e){if(o===null||typeof o!="object")throw new eie(e,"Object",o)}function oo(o,e){if(typeof o!="string")throw new eie(e,"string",o)}const Am=Z0e==="win32";function Oi(o){return o===lr||o===ll}function JB(o){return o===lr}function ep(o){return o>=Q0e&&o<=J0e||o>=X0e&&o<=eCe}function aR(o,e,t,i){let n="",s=0,r=-1,a=0,l=0;for(let c=0;c<=o.length;++c){if(c<o.length)l=o.charCodeAt(c);else{if(i(l))break;l=lr}if(i(l)){if(!(r===c-1||a===1))if(a===2){if(n.length<2||s!==2||n.charCodeAt(n.length-1)!==$p||n.charCodeAt(n.length-2)!==$p){if(n.length>2){const u=n.lastIndexOf(t);u===-1?(n="",s=0):(n=n.slice(0,u),s=n.length-1-n.lastIndexOf(t)),r=c,a=0;continue}else if(n.length!==0){n="",s=0,r=c,a=0;continue}}e&&(n+=n.length>0?`${t}..`:"..",s=2)}else n.length>0?n+=`${t}${o.slice(r+1,c)}`:n=o.slice(r+1,c),s=c-r-1;r=c,a=0}else l===$p&&a!==-1?++a:a=-1}return n}function tie(o,e){iCe(e,"pathObject");const t=e.dir||e.root,i=e.base||`${e.name||""}${e.ext||""}`;return t?t===e.root?`${t}${i}`:`${t}${o}${i}`:i}const Ha={resolve(...o){let e="",t="",i=!1;for(let n=o.length-1;n>=-1;n--){let s;if(n>=0){if(s=o[n],oo(s,"path"),s.length===0)continue}else e.length===0?s=rR():(s=XB[`=${e}`]||rR(),(s===void 0||s.slice(0,2).toLowerCase()!==e.toLowerCase()&&s.charCodeAt(2)===ll)&&(s=`${e}\\`));const r=s.length;let a=0,l="",c=!1;const u=s.charCodeAt(0);if(r===1)Oi(u)&&(a=1,c=!0);else if(Oi(u))if(c=!0,Oi(s.charCodeAt(1))){let f=2,g=f;for(;f<r&&!Oi(s.charCodeAt(f));)f++;if(f<r&&f!==g){const p=s.slice(g,f);for(g=f;f<r&&Oi(s.charCodeAt(f));)f++;if(f<r&&f!==g){for(g=f;f<r&&!Oi(s.charCodeAt(f));)f++;(f===r||f!==g)&&(l=`\\\\${p}\\${s.slice(g,f)}`,a=f)}}}else a=1;else ep(u)&&s.charCodeAt(1)===Jg&&(l=s.slice(0,2),a=2,r>2&&Oi(s.charCodeAt(2))&&(c=!0,a=3));if(l.length>0)if(e.length>0){if(l.toLowerCase()!==e.toLowerCase())continue}else e=l;if(i){if(e.length>0)break}else if(t=`${s.slice(a)}\\${t}`,i=c,c&&e.length>0)break}return t=aR(t,!i,"\\",Oi),i?`${e}\\${t}`:`${e}${t}`||"."},normalize(o){oo(o,"path");const e=o.length;if(e===0)return".";let t=0,i,n=!1;const s=o.charCodeAt(0);if(e===1)return JB(s)?"\\":o;if(Oi(s))if(n=!0,Oi(o.charCodeAt(1))){let a=2,l=a;for(;a<e&&!Oi(o.charCodeAt(a));)a++;if(a<e&&a!==l){const c=o.slice(l,a);for(l=a;a<e&&Oi(o.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!Oi(o.charCodeAt(a));)a++;if(a===e)return`\\\\${c}\\${o.slice(l)}\\`;a!==l&&(i=`\\\\${c}\\${o.slice(l,a)}`,t=a)}}}else t=1;else ep(s)&&o.charCodeAt(1)===Jg&&(i=o.slice(0,2),t=2,e>2&&Oi(o.charCodeAt(2))&&(n=!0,t=3));let r=t<e?aR(o.slice(t),!n,"\\",Oi):"";return r.length===0&&!n&&(r="."),r.length>0&&Oi(o.charCodeAt(e-1))&&(r+="\\"),i===void 0?n?`\\${r}`:r:n?`${i}\\${r}`:`${i}${r}`},isAbsolute(o){oo(o,"path");const e=o.length;if(e===0)return!1;const t=o.charCodeAt(0);return Oi(t)||e>2&&ep(t)&&o.charCodeAt(1)===Jg&&Oi(o.charCodeAt(2))},join(...o){if(o.length===0)return".";let e,t;for(let s=0;s<o.length;++s){const r=o[s];oo(r,"path"),r.length>0&&(e===void 0?e=t=r:e+=`\\${r}`)}if(e===void 0)return".";let i=!0,n=0;if(typeof t=="string"&&Oi(t.charCodeAt(0))){++n;const s=t.length;s>1&&Oi(t.charCodeAt(1))&&(++n,s>2&&(Oi(t.charCodeAt(2))?++n:i=!1))}if(i){for(;n<e.length&&Oi(e.charCodeAt(n));)n++;n>=2&&(e=`\\${e.slice(n)}`)}return Ha.normalize(e)},relative(o,e){if(oo(o,"from"),oo(e,"to"),o===e)return"";const t=Ha.resolve(o),i=Ha.resolve(e);if(t===i||(o=t.toLowerCase(),e=i.toLowerCase(),o===e))return"";let n=0;for(;n<o.length&&o.charCodeAt(n)===ll;)n++;let s=o.length;for(;s-1>n&&o.charCodeAt(s-1)===ll;)s--;const r=s-n;let a=0;for(;a<e.length&&e.charCodeAt(a)===ll;)a++;let l=e.length;for(;l-1>a&&e.charCodeAt(l-1)===ll;)l--;const c=l-a,u=r<c?r:c;let f=-1,g=0;for(;g<u;g++){const _=o.charCodeAt(n+g);if(_!==e.charCodeAt(a+g))break;_===ll&&(f=g)}if(g!==u){if(f===-1)return i}else{if(c>u){if(e.charCodeAt(a+g)===ll)return i.slice(a+g+1);if(g===2)return i.slice(a+g)}r>u&&(o.charCodeAt(n+g)===ll?f=g:g===2&&(f=3)),f===-1&&(f=0)}let p="";for(g=n+f+1;g<=s;++g)(g===s||o.charCodeAt(g)===ll)&&(p+=p.length===0?"..":"\\..");return a+=f,p.length>0?`${p}${i.slice(a,l)}`:(i.charCodeAt(a)===ll&&++a,i.slice(a,l))},toNamespacedPath(o){if(typeof o!="string"||o.length===0)return o;const e=Ha.resolve(o);if(e.length<=2)return o;if(e.charCodeAt(0)===ll){if(e.charCodeAt(1)===ll){const t=e.charCodeAt(2);if(t!==tCe&&t!==$p)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(ep(e.charCodeAt(0))&&e.charCodeAt(1)===Jg&&e.charCodeAt(2)===ll)return`\\\\?\\${e}`;return o},dirname(o){oo(o,"path");const e=o.length;if(e===0)return".";let t=-1,i=0;const n=o.charCodeAt(0);if(e===1)return Oi(n)?o:".";if(Oi(n)){if(t=i=1,Oi(o.charCodeAt(1))){let a=2,l=a;for(;a<e&&!Oi(o.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&Oi(o.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!Oi(o.charCodeAt(a));)a++;if(a===e)return o;a!==l&&(t=i=a+1)}}}}else ep(n)&&o.charCodeAt(1)===Jg&&(t=e>2&&Oi(o.charCodeAt(2))?3:2,i=t);let s=-1,r=!0;for(let a=e-1;a>=i;--a)if(Oi(o.charCodeAt(a))){if(!r){s=a;break}}else r=!1;if(s===-1){if(t===-1)return".";s=t}return o.slice(0,s)},basename(o,e){e!==void 0&&oo(e,"ext"),oo(o,"path");let t=0,i=-1,n=!0,s;if(o.length>=2&&ep(o.charCodeAt(0))&&o.charCodeAt(1)===Jg&&(t=2),e!==void 0&&e.length>0&&e.length<=o.length){if(e===o)return"";let r=e.length-1,a=-1;for(s=o.length-1;s>=t;--s){const l=o.charCodeAt(s);if(Oi(l)){if(!n){t=s+1;break}}else a===-1&&(n=!1,a=s+1),r>=0&&(l===e.charCodeAt(r)?--r===-1&&(i=s):(r=-1,i=a))}return t===i?i=a:i===-1&&(i=o.length),o.slice(t,i)}for(s=o.length-1;s>=t;--s)if(Oi(o.charCodeAt(s))){if(!n){t=s+1;break}}else i===-1&&(n=!1,i=s+1);return i===-1?"":o.slice(t,i)},extname(o){oo(o,"path");let e=0,t=-1,i=0,n=-1,s=!0,r=0;o.length>=2&&o.charCodeAt(1)===Jg&&ep(o.charCodeAt(0))&&(e=i=2);for(let a=o.length-1;a>=e;--a){const l=o.charCodeAt(a);if(Oi(l)){if(!s){i=a+1;break}continue}n===-1&&(s=!1,n=a+1),l===$p?t===-1?t=a:r!==1&&(r=1):t!==-1&&(r=-1)}return t===-1||n===-1||r===0||r===1&&t===n-1&&t===i+1?"":o.slice(t,n)},format:tie.bind(null,"\\"),parse(o){oo(o,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(o.length===0)return e;const t=o.length;let i=0,n=o.charCodeAt(0);if(t===1)return Oi(n)?(e.root=e.dir=o,e):(e.base=e.name=o,e);if(Oi(n)){if(i=1,Oi(o.charCodeAt(1))){let f=2,g=f;for(;f<t&&!Oi(o.charCodeAt(f));)f++;if(f<t&&f!==g){for(g=f;f<t&&Oi(o.charCodeAt(f));)f++;if(f<t&&f!==g){for(g=f;f<t&&!Oi(o.charCodeAt(f));)f++;f===t?i=f:f!==g&&(i=f+1)}}}}else if(ep(n)&&o.charCodeAt(1)===Jg){if(t<=2)return e.root=e.dir=o,e;if(i=2,Oi(o.charCodeAt(2))){if(t===3)return e.root=e.dir=o,e;i=3}}i>0&&(e.root=o.slice(0,i));let s=-1,r=i,a=-1,l=!0,c=o.length-1,u=0;for(;c>=i;--c){if(n=o.charCodeAt(c),Oi(n)){if(!l){r=c+1;break}continue}a===-1&&(l=!1,a=c+1),n===$p?s===-1?s=c:u!==1&&(u=1):s!==-1&&(u=-1)}return a!==-1&&(s===-1||u===0||u===1&&s===a-1&&s===r+1?e.base=e.name=o.slice(r,a):(e.name=o.slice(r,s),e.base=o.slice(r,a),e.ext=o.slice(s,a))),r>0&&r!==i?e.dir=o.slice(0,r-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null},nCe=(()=>{if(Am){const o=/\\/g;return()=>{const e=rR().replace(o,"/");return e.slice(e.indexOf("/"))}}return()=>rR()})(),Es={resolve(...o){let e="",t=!1;for(let i=o.length-1;i>=-1&&!t;i--){const n=i>=0?o[i]:nCe();oo(n,"path"),n.length!==0&&(e=`${n}/${e}`,t=n.charCodeAt(0)===lr)}return e=aR(e,!t,"/",JB),t?`/${e}`:e.length>0?e:"."},normalize(o){if(oo(o,"path"),o.length===0)return".";const e=o.charCodeAt(0)===lr,t=o.charCodeAt(o.length-1)===lr;return o=aR(o,!e,"/",JB),o.length===0?e?"/":t?"./":".":(t&&(o+="/"),e?`/${o}`:o)},isAbsolute(o){return oo(o,"path"),o.length>0&&o.charCodeAt(0)===lr},join(...o){if(o.length===0)return".";let e;for(let t=0;t<o.length;++t){const i=o[t];oo(i,"path"),i.length>0&&(e===void 0?e=i:e+=`/${i}`)}return e===void 0?".":Es.normalize(e)},relative(o,e){if(oo(o,"from"),oo(e,"to"),o===e||(o=Es.resolve(o),e=Es.resolve(e),o===e))return"";const t=1,i=o.length,n=i-t,s=1,r=e.length-s,a=n<r?n:r;let l=-1,c=0;for(;c<a;c++){const f=o.charCodeAt(t+c);if(f!==e.charCodeAt(s+c))break;f===lr&&(l=c)}if(c===a)if(r>a){if(e.charCodeAt(s+c)===lr)return e.slice(s+c+1);if(c===0)return e.slice(s+c)}else n>a&&(o.charCodeAt(t+c)===lr?l=c:c===0&&(l=0));let u="";for(c=t+l+1;c<=i;++c)(c===i||o.charCodeAt(c)===lr)&&(u+=u.length===0?"..":"/..");return`${u}${e.slice(s+l)}`},toNamespacedPath(o){return o},dirname(o){if(oo(o,"path"),o.length===0)return".";const e=o.charCodeAt(0)===lr;let t=-1,i=!0;for(let n=o.length-1;n>=1;--n)if(o.charCodeAt(n)===lr){if(!i){t=n;break}}else i=!1;return t===-1?e?"/":".":e&&t===1?"//":o.slice(0,t)},basename(o,e){e!==void 0&&oo(e,"ext"),oo(o,"path");let t=0,i=-1,n=!0,s;if(e!==void 0&&e.length>0&&e.length<=o.length){if(e===o)return"";let r=e.length-1,a=-1;for(s=o.length-1;s>=0;--s){const l=o.charCodeAt(s);if(l===lr){if(!n){t=s+1;break}}else a===-1&&(n=!1,a=s+1),r>=0&&(l===e.charCodeAt(r)?--r===-1&&(i=s):(r=-1,i=a))}return t===i?i=a:i===-1&&(i=o.length),o.slice(t,i)}for(s=o.length-1;s>=0;--s)if(o.charCodeAt(s)===lr){if(!n){t=s+1;break}}else i===-1&&(n=!1,i=s+1);return i===-1?"":o.slice(t,i)},extname(o){oo(o,"path");let e=-1,t=0,i=-1,n=!0,s=0;for(let r=o.length-1;r>=0;--r){const a=o.charCodeAt(r);if(a===lr){if(!n){t=r+1;break}continue}i===-1&&(n=!1,i=r+1),a===$p?e===-1?e=r:s!==1&&(s=1):e!==-1&&(s=-1)}return e===-1||i===-1||s===0||s===1&&e===i-1&&e===t+1?"":o.slice(e,i)},format:tie.bind(null,"/"),parse(o){oo(o,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(o.length===0)return e;const t=o.charCodeAt(0)===lr;let i;t?(e.root="/",i=1):i=0;let n=-1,s=0,r=-1,a=!0,l=o.length-1,c=0;for(;l>=i;--l){const u=o.charCodeAt(l);if(u===lr){if(!a){s=l+1;break}continue}r===-1&&(a=!1,r=l+1),u===$p?n===-1?n=l:c!==1&&(c=1):n!==-1&&(c=-1)}if(r!==-1){const u=s===0&&t?1:s;n===-1||c===0||c===1&&n===r-1&&n===s+1?e.base=e.name=o.slice(u,r):(e.name=o.slice(u,n),e.base=o.slice(u,r),e.ext=o.slice(n,r))}return s>0?e.dir=o.slice(0,s-1):t&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};Es.win32=Ha.win32=Ha;Es.posix=Ha.posix=Es;const iie=Am?Ha.normalize:Es.normalize,sCe=Am?Ha.resolve:Es.resolve,oCe=Am?Ha.relative:Es.relative,nie=Am?Ha.dirname:Es.dirname,jp=Am?Ha.basename:Es.basename,rCe=Am?Ha.extname:Es.extname,Fd=Am?Ha.sep:Es.sep,aCe=/^\w[\w\d+.-]*$/,lCe=/^\//,cCe=/^\/\//;function dCe(o,e){if(!o.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${o.authority}", path: "${o.path}", query: "${o.query}", fragment: "${o.fragment}"}`);if(o.scheme&&!aCe.test(o.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(o.path){if(o.authority){if(!lCe.test(o.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(cCe.test(o.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function uCe(o,e){return!o&&!e?"file":o}function hCe(o,e){switch(o){case"https":case"http":case"file":e?e[0]!==Dd&&(e=Dd+e):e=Dd;break}return e}const bs="",Dd="/",fCe=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class gt{static isUri(e){return e instanceof gt?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}constructor(e,t,i,n,s,r=!1){typeof e=="object"?(this.scheme=e.scheme||bs,this.authority=e.authority||bs,this.path=e.path||bs,this.query=e.query||bs,this.fragment=e.fragment||bs):(this.scheme=uCe(e,r),this.authority=t||bs,this.path=hCe(this.scheme,i||bs),this.query=n||bs,this.fragment=s||bs,dCe(this,r))}get fsPath(){return lR(this,!1)}with(e){if(!e)return this;let{scheme:t,authority:i,path:n,query:s,fragment:r}=e;return t===void 0?t=this.scheme:t===null&&(t=bs),i===void 0?i=this.authority:i===null&&(i=bs),n===void 0?n=this.path:n===null&&(n=bs),s===void 0?s=this.query:s===null&&(s=bs),r===void 0?r=this.fragment:r===null&&(r=bs),t===this.scheme&&i===this.authority&&n===this.path&&s===this.query&&r===this.fragment?this:new w0(t,i,n,s,r)}static parse(e,t=!1){const i=fCe.exec(e);return i?new w0(i[2]||bs,$I(i[4]||bs),$I(i[5]||bs),$I(i[7]||bs),$I(i[9]||bs),t):new w0(bs,bs,bs,bs,bs)}static file(e){let t=bs;if(Mo&&(e=e.replace(/\\/g,Dd)),e[0]===Dd&&e[1]===Dd){const i=e.indexOf(Dd,2);i===-1?(t=e.substring(2),e=Dd):(t=e.substring(2,i),e=e.substring(i)||Dd)}return new w0("file",t,e,bs,bs)}static from(e,t){return new w0(e.scheme,e.authority,e.path,e.query,e.fragment,t)}static joinPath(e,...t){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let i;return Mo&&e.scheme==="file"?i=gt.file(Ha.join(lR(e,!0),...t)).path:i=Es.join(e.path,...t),e.with({path:i})}toString(e=!1){return e7(this,e)}toJSON(){return this}static revive(e){var t,i;if(e){if(e instanceof gt)return e;{const n=new w0(e);return n._formatted=(t=e.external)!==null&&t!==void 0?t:null,n._fsPath=e._sep===sie&&(i=e.fsPath)!==null&&i!==void 0?i:null,n}}else return e}}const sie=Mo?1:void 0;let w0=class extends gt{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=lR(this,!1)),this._fsPath}toString(e=!1){return e?e7(this,!0):(this._formatted||(this._formatted=e7(this,!1)),this._formatted)}toJSON(){const e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=sie),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}};const oie={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function pY(o,e,t){let i,n=-1;for(let s=0;s<o.length;s++){const r=o.charCodeAt(s);if(r>=97&&r<=122||r>=65&&r<=90||r>=48&&r<=57||r===45||r===46||r===95||r===126||e&&r===47||t&&r===91||t&&r===93||t&&r===58)n!==-1&&(i+=encodeURIComponent(o.substring(n,s)),n=-1),i!==void 0&&(i+=o.charAt(s));else{i===void 0&&(i=o.substr(0,s));const a=oie[r];a!==void 0?(n!==-1&&(i+=encodeURIComponent(o.substring(n,s)),n=-1),i+=a):n===-1&&(n=s)}}return n!==-1&&(i+=encodeURIComponent(o.substring(n))),i!==void 0?i:o}function gCe(o){let e;for(let t=0;t<o.length;t++){const i=o.charCodeAt(t);i===35||i===63?(e===void 0&&(e=o.substr(0,t)),e+=oie[i]):e!==void 0&&(e+=o[t])}return e!==void 0?e:o}function lR(o,e){let t;return o.authority&&o.path.length>1&&o.scheme==="file"?t=`//${o.authority}${o.path}`:o.path.charCodeAt(0)===47&&(o.path.charCodeAt(1)>=65&&o.path.charCodeAt(1)<=90||o.path.charCodeAt(1)>=97&&o.path.charCodeAt(1)<=122)&&o.path.charCodeAt(2)===58?e?t=o.path.substr(1):t=o.path[1].toLowerCase()+o.path.substr(2):t=o.path,Mo&&(t=t.replace(/\//g,"\\")),t}function e7(o,e){const t=e?gCe:pY;let i="",{scheme:n,authority:s,path:r,query:a,fragment:l}=o;if(n&&(i+=n,i+=":"),(s||n==="file")&&(i+=Dd,i+=Dd),s){let c=s.indexOf("@");if(c!==-1){const u=s.substr(0,c);s=s.substr(c+1),c=u.lastIndexOf(":"),c===-1?i+=t(u,!1,!1):(i+=t(u.substr(0,c),!1,!1),i+=":",i+=t(u.substr(c+1),!1,!0)),i+="@"}s=s.toLowerCase(),c=s.lastIndexOf(":"),c===-1?i+=t(s,!1,!0):(i+=t(s.substr(0,c),!1,!0),i+=s.substr(c))}if(r){if(r.length>=3&&r.charCodeAt(0)===47&&r.charCodeAt(2)===58){const c=r.charCodeAt(1);c>=65&&c<=90&&(r=`/${String.fromCharCode(c+32)}:${r.substr(3)}`)}else if(r.length>=2&&r.charCodeAt(1)===58){const c=r.charCodeAt(0);c>=65&&c<=90&&(r=`${String.fromCharCode(c+32)}:${r.substr(2)}`)}i+=t(r,!0,!1)}return a&&(i+="?",i+=t(a,!1,!1)),l&&(i+="#",i+=e?l:pY(l,!1,!1)),i}function rie(o){try{return decodeURIComponent(o)}catch{return o.length>3?o.substr(0,3)+rie(o.substr(3)):o}}const mY=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function $I(o){return o.match(mY)?o.replace(mY,e=>rie(e)):o}let Z=class B_{constructor(e,t){this.lineNumber=e,this.column=t}with(e=this.lineNumber,t=this.column){return e===this.lineNumber&&t===this.column?this:new B_(e,t)}delta(e=0,t=0){return this.with(this.lineNumber+e,this.column+t)}equals(e){return B_.equals(this,e)}static equals(e,t){return!e&&!t?!0:!!e&&!!t&&e.lineNumber===t.lineNumber&&e.column===t.column}isBefore(e){return B_.isBefore(this,e)}static isBefore(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<t.column}isBeforeOrEqual(e){return B_.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<=t.column}static compare(e,t){const i=e.lineNumber|0,n=t.lineNumber|0;if(i===n){const s=e.column|0,r=t.column|0;return s-r}return i-n}clone(){return new B_(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new B_(e.lineNumber,e.column)}static isIPosition(e){return e&&typeof e.lineNumber=="number"&&typeof e.column=="number"}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}},A=class uo{constructor(e,t,i,n){e>i||e===i&&t>n?(this.startLineNumber=i,this.startColumn=n,this.endLineNumber=e,this.endColumn=t):(this.startLineNumber=e,this.startColumn=t,this.endLineNumber=i,this.endColumn=n)}isEmpty(){return uo.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return uo.containsPosition(this,e)}static containsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<e.startColumn||t.lineNumber===e.endLineNumber&&t.column>e.endColumn)}static strictContainsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<=e.startColumn||t.lineNumber===e.endLineNumber&&t.column>=e.endColumn)}containsRange(e){return uo.containsRange(this,e)}static containsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>e.endColumn)}strictContainsRange(e){return uo.strictContainsRange(this,e)}static strictContainsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<=e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>=e.endColumn)}plusRange(e){return uo.plusRange(this,e)}static plusRange(e,t){let i,n,s,r;return t.startLineNumber<e.startLineNumber?(i=t.startLineNumber,n=t.startColumn):t.startLineNumber===e.startLineNumber?(i=t.startLineNumber,n=Math.min(t.startColumn,e.startColumn)):(i=e.startLineNumber,n=e.startColumn),t.endLineNumber>e.endLineNumber?(s=t.endLineNumber,r=t.endColumn):t.endLineNumber===e.endLineNumber?(s=t.endLineNumber,r=Math.max(t.endColumn,e.endColumn)):(s=e.endLineNumber,r=e.endColumn),new uo(i,n,s,r)}intersectRanges(e){return uo.intersectRanges(this,e)}static intersectRanges(e,t){let i=e.startLineNumber,n=e.startColumn,s=e.endLineNumber,r=e.endColumn;const a=t.startLineNumber,l=t.startColumn,c=t.endLineNumber,u=t.endColumn;return i<a?(i=a,n=l):i===a&&(n=Math.max(n,l)),s>c?(s=c,r=u):s===c&&(r=Math.min(r,u)),i>s||i===s&&n>r?null:new uo(i,n,s,r)}equalsRange(e){return uo.equalsRange(this,e)}static equalsRange(e,t){return!e&&!t?!0:!!e&&!!t&&e.startLineNumber===t.startLineNumber&&e.startColumn===t.startColumn&&e.endLineNumber===t.endLineNumber&&e.endColumn===t.endColumn}getEndPosition(){return uo.getEndPosition(this)}static getEndPosition(e){return new Z(e.endLineNumber,e.endColumn)}getStartPosition(){return uo.getStartPosition(this)}static getStartPosition(e){return new Z(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,t){return new uo(this.startLineNumber,this.startColumn,e,t)}setStartPosition(e,t){return new uo(e,t,this.endLineNumber,this.endColumn)}collapseToStart(){return uo.collapseToStart(this)}static collapseToStart(e){return new uo(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}collapseToEnd(){return uo.collapseToEnd(this)}static collapseToEnd(e){return new uo(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn)}delta(e){return new uo(this.startLineNumber+e,this.startColumn,this.endLineNumber+e,this.endColumn)}static fromPositions(e,t=e){return new uo(e.lineNumber,e.column,t.lineNumber,t.column)}static lift(e){return e?new uo(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&typeof e.startLineNumber=="number"&&typeof e.startColumn=="number"&&typeof e.endLineNumber=="number"&&typeof e.endColumn=="number"}static areIntersectingOrTouching(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<e.startColumn)}static areIntersecting(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<=t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,t){if(e&&t){const s=e.startLineNumber|0,r=t.startLineNumber|0;if(s===r){const a=e.startColumn|0,l=t.startColumn|0;if(a===l){const c=e.endLineNumber|0,u=t.endLineNumber|0;if(c===u){const f=e.endColumn|0,g=t.endColumn|0;return f-g}return c-u}return a-l}return s-r}return(e?1:0)-(t?1:0)}static compareRangesUsingEnds(e,t){return e.endLineNumber===t.endLineNumber?e.endColumn===t.endColumn?e.startLineNumber===t.startLineNumber?e.startColumn-t.startColumn:e.startLineNumber-t.startLineNumber:e.endColumn-t.endColumn:e.endLineNumber-t.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}toJSON(){return this}},Xe=class Rc extends A{constructor(e,t,i,n){super(e,t,i,n),this.selectionStartLineNumber=e,this.selectionStartColumn=t,this.positionLineNumber=i,this.positionColumn=n}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(e){return Rc.selectionsEqual(this,e)}static selectionsEqual(e,t){return e.selectionStartLineNumber===t.selectionStartLineNumber&&e.selectionStartColumn===t.selectionStartColumn&&e.positionLineNumber===t.positionLineNumber&&e.positionColumn===t.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(e,t){return this.getDirection()===0?new Rc(this.startLineNumber,this.startColumn,e,t):new Rc(e,t,this.startLineNumber,this.startColumn)}getPosition(){return new Z(this.positionLineNumber,this.positionColumn)}getSelectionStart(){return new Z(this.selectionStartLineNumber,this.selectionStartColumn)}setStartPosition(e,t){return this.getDirection()===0?new Rc(e,t,this.endLineNumber,this.endColumn):new Rc(this.endLineNumber,this.endColumn,e,t)}static fromPositions(e,t=e){return new Rc(e.lineNumber,e.column,t.lineNumber,t.column)}static fromRange(e,t){return t===0?new Rc(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):new Rc(e.endLineNumber,e.endColumn,e.startLineNumber,e.startColumn)}static liftSelection(e){return new Rc(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn)}static selectionsArrEqual(e,t){if(e&&!t||!e&&t)return!1;if(!e&&!t)return!0;if(e.length!==t.length)return!1;for(let i=0,n=e.length;i<n;i++)if(!this.selectionsEqual(e[i],t[i]))return!1;return!0}static isISelection(e){return e&&typeof e.selectionStartLineNumber=="number"&&typeof e.selectionStartColumn=="number"&&typeof e.positionLineNumber=="number"&&typeof e.positionColumn=="number"}static createWithDirection(e,t,i,n,s){return s===0?new Rc(e,t,i,n):new Rc(i,n,e,t)}};const t7=Object.create(null);function T(o,e){if(Ur(e)){const t=t7[e];if(t===void 0)throw new Error(`${o} references an unknown codicon: ${e}`);e=t}return t7[o]=e,{id:o}}function aie(){return t7}const pCe={add:T("add",6e4),plus:T("plus",6e4),gistNew:T("gist-new",6e4),repoCreate:T("repo-create",6e4),lightbulb:T("lightbulb",60001),lightBulb:T("light-bulb",60001),repo:T("repo",60002),repoDelete:T("repo-delete",60002),gistFork:T("gist-fork",60003),repoForked:T("repo-forked",60003),gitPullRequest:T("git-pull-request",60004),gitPullRequestAbandoned:T("git-pull-request-abandoned",60004),recordKeys:T("record-keys",60005),keyboard:T("keyboard",60005),tag:T("tag",60006),gitPullRequestLabel:T("git-pull-request-label",60006),tagAdd:T("tag-add",60006),tagRemove:T("tag-remove",60006),person:T("person",60007),personFollow:T("person-follow",60007),personOutline:T("person-outline",60007),personFilled:T("person-filled",60007),gitBranch:T("git-branch",60008),gitBranchCreate:T("git-branch-create",60008),gitBranchDelete:T("git-branch-delete",60008),sourceControl:T("source-control",60008),mirror:T("mirror",60009),mirrorPublic:T("mirror-public",60009),star:T("star",60010),starAdd:T("star-add",60010),starDelete:T("star-delete",60010),starEmpty:T("star-empty",60010),comment:T("comment",60011),commentAdd:T("comment-add",60011),alert:T("alert",60012),warning:T("warning",60012),search:T("search",60013),searchSave:T("search-save",60013),logOut:T("log-out",60014),signOut:T("sign-out",60014),logIn:T("log-in",60015),signIn:T("sign-in",60015),eye:T("eye",60016),eyeUnwatch:T("eye-unwatch",60016),eyeWatch:T("eye-watch",60016),circleFilled:T("circle-filled",60017),primitiveDot:T("primitive-dot",60017),closeDirty:T("close-dirty",60017),debugBreakpoint:T("debug-breakpoint",60017),debugBreakpointDisabled:T("debug-breakpoint-disabled",60017),debugHint:T("debug-hint",60017),terminalDecorationSuccess:T("terminal-decoration-success",60017),primitiveSquare:T("primitive-square",60018),edit:T("edit",60019),pencil:T("pencil",60019),info:T("info",60020),issueOpened:T("issue-opened",60020),gistPrivate:T("gist-private",60021),gitForkPrivate:T("git-fork-private",60021),lock:T("lock",60021),mirrorPrivate:T("mirror-private",60021),close:T("close",60022),removeClose:T("remove-close",60022),x:T("x",60022),repoSync:T("repo-sync",60023),sync:T("sync",60023),clone:T("clone",60024),desktopDownload:T("desktop-download",60024),beaker:T("beaker",60025),microscope:T("microscope",60025),vm:T("vm",60026),deviceDesktop:T("device-desktop",60026),file:T("file",60027),fileText:T("file-text",60027),more:T("more",60028),ellipsis:T("ellipsis",60028),kebabHorizontal:T("kebab-horizontal",60028),mailReply:T("mail-reply",60029),reply:T("reply",60029),organization:T("organization",60030),organizationFilled:T("organization-filled",60030),organizationOutline:T("organization-outline",60030),newFile:T("new-file",60031),fileAdd:T("file-add",60031),newFolder:T("new-folder",60032),fileDirectoryCreate:T("file-directory-create",60032),trash:T("trash",60033),trashcan:T("trashcan",60033),history:T("history",60034),clock:T("clock",60034),folder:T("folder",60035),fileDirectory:T("file-directory",60035),symbolFolder:T("symbol-folder",60035),logoGithub:T("logo-github",60036),markGithub:T("mark-github",60036),github:T("github",60036),terminal:T("terminal",60037),console:T("console",60037),repl:T("repl",60037),zap:T("zap",60038),symbolEvent:T("symbol-event",60038),error:T("error",60039),stop:T("stop",60039),variable:T("variable",60040),symbolVariable:T("symbol-variable",60040),array:T("array",60042),symbolArray:T("symbol-array",60042),symbolModule:T("symbol-module",60043),symbolPackage:T("symbol-package",60043),symbolNamespace:T("symbol-namespace",60043),symbolObject:T("symbol-object",60043),symbolMethod:T("symbol-method",60044),symbolFunction:T("symbol-function",60044),symbolConstructor:T("symbol-constructor",60044),symbolBoolean:T("symbol-boolean",60047),symbolNull:T("symbol-null",60047),symbolNumeric:T("symbol-numeric",60048),symbolNumber:T("symbol-number",60048),symbolStructure:T("symbol-structure",60049),symbolStruct:T("symbol-struct",60049),symbolParameter:T("symbol-parameter",60050),symbolTypeParameter:T("symbol-type-parameter",60050),symbolKey:T("symbol-key",60051),symbolText:T("symbol-text",60051),symbolReference:T("symbol-reference",60052),goToFile:T("go-to-file",60052),symbolEnum:T("symbol-enum",60053),symbolValue:T("symbol-value",60053),symbolRuler:T("symbol-ruler",60054),symbolUnit:T("symbol-unit",60054),activateBreakpoints:T("activate-breakpoints",60055),archive:T("archive",60056),arrowBoth:T("arrow-both",60057),arrowDown:T("arrow-down",60058),arrowLeft:T("arrow-left",60059),arrowRight:T("arrow-right",60060),arrowSmallDown:T("arrow-small-down",60061),arrowSmallLeft:T("arrow-small-left",60062),arrowSmallRight:T("arrow-small-right",60063),arrowSmallUp:T("arrow-small-up",60064),arrowUp:T("arrow-up",60065),bell:T("bell",60066),bold:T("bold",60067),book:T("book",60068),bookmark:T("bookmark",60069),debugBreakpointConditionalUnverified:T("debug-breakpoint-conditional-unverified",60070),debugBreakpointConditional:T("debug-breakpoint-conditional",60071),debugBreakpointConditionalDisabled:T("debug-breakpoint-conditional-disabled",60071),debugBreakpointDataUnverified:T("debug-breakpoint-data-unverified",60072),debugBreakpointData:T("debug-breakpoint-data",60073),debugBreakpointDataDisabled:T("debug-breakpoint-data-disabled",60073),debugBreakpointLogUnverified:T("debug-breakpoint-log-unverified",60074),debugBreakpointLog:T("debug-breakpoint-log",60075),debugBreakpointLogDisabled:T("debug-breakpoint-log-disabled",60075),briefcase:T("briefcase",60076),broadcast:T("broadcast",60077),browser:T("browser",60078),bug:T("bug",60079),calendar:T("calendar",60080),caseSensitive:T("case-sensitive",60081),check:T("check",60082),checklist:T("checklist",60083),chevronDown:T("chevron-down",60084),chevronLeft:T("chevron-left",60085),chevronRight:T("chevron-right",60086),chevronUp:T("chevron-up",60087),chromeClose:T("chrome-close",60088),chromeMaximize:T("chrome-maximize",60089),chromeMinimize:T("chrome-minimize",60090),chromeRestore:T("chrome-restore",60091),circleOutline:T("circle-outline",60092),circle:T("circle",60092),debugBreakpointUnverified:T("debug-breakpoint-unverified",60092),terminalDecorationIncomplete:T("terminal-decoration-incomplete",60092),circleSlash:T("circle-slash",60093),circuitBoard:T("circuit-board",60094),clearAll:T("clear-all",60095),clippy:T("clippy",60096),closeAll:T("close-all",60097),cloudDownload:T("cloud-download",60098),cloudUpload:T("cloud-upload",60099),code:T("code",60100),collapseAll:T("collapse-all",60101),colorMode:T("color-mode",60102),commentDiscussion:T("comment-discussion",60103),creditCard:T("credit-card",60105),dash:T("dash",60108),dashboard:T("dashboard",60109),database:T("database",60110),debugContinue:T("debug-continue",60111),debugDisconnect:T("debug-disconnect",60112),debugPause:T("debug-pause",60113),debugRestart:T("debug-restart",60114),debugStart:T("debug-start",60115),debugStepInto:T("debug-step-into",60116),debugStepOut:T("debug-step-out",60117),debugStepOver:T("debug-step-over",60118),debugStop:T("debug-stop",60119),debug:T("debug",60120),deviceCameraVideo:T("device-camera-video",60121),deviceCamera:T("device-camera",60122),deviceMobile:T("device-mobile",60123),diffAdded:T("diff-added",60124),diffIgnored:T("diff-ignored",60125),diffModified:T("diff-modified",60126),diffRemoved:T("diff-removed",60127),diffRenamed:T("diff-renamed",60128),diff:T("diff",60129),diffSidebyside:T("diff-sidebyside",60129),discard:T("discard",60130),editorLayout:T("editor-layout",60131),emptyWindow:T("empty-window",60132),exclude:T("exclude",60133),extensions:T("extensions",60134),eyeClosed:T("eye-closed",60135),fileBinary:T("file-binary",60136),fileCode:T("file-code",60137),fileMedia:T("file-media",60138),filePdf:T("file-pdf",60139),fileSubmodule:T("file-submodule",60140),fileSymlinkDirectory:T("file-symlink-directory",60141),fileSymlinkFile:T("file-symlink-file",60142),fileZip:T("file-zip",60143),files:T("files",60144),filter:T("filter",60145),flame:T("flame",60146),foldDown:T("fold-down",60147),foldUp:T("fold-up",60148),fold:T("fold",60149),folderActive:T("folder-active",60150),folderOpened:T("folder-opened",60151),gear:T("gear",60152),gift:T("gift",60153),gistSecret:T("gist-secret",60154),gist:T("gist",60155),gitCommit:T("git-commit",60156),gitCompare:T("git-compare",60157),compareChanges:T("compare-changes",60157),gitMerge:T("git-merge",60158),githubAction:T("github-action",60159),githubAlt:T("github-alt",60160),globe:T("globe",60161),grabber:T("grabber",60162),graph:T("graph",60163),gripper:T("gripper",60164),heart:T("heart",60165),home:T("home",60166),horizontalRule:T("horizontal-rule",60167),hubot:T("hubot",60168),inbox:T("inbox",60169),issueReopened:T("issue-reopened",60171),issues:T("issues",60172),italic:T("italic",60173),jersey:T("jersey",60174),json:T("json",60175),kebabVertical:T("kebab-vertical",60176),key:T("key",60177),law:T("law",60178),lightbulbAutofix:T("lightbulb-autofix",60179),linkExternal:T("link-external",60180),link:T("link",60181),listOrdered:T("list-ordered",60182),listUnordered:T("list-unordered",60183),liveShare:T("live-share",60184),loading:T("loading",60185),location:T("location",60186),mailRead:T("mail-read",60187),mail:T("mail",60188),markdown:T("markdown",60189),megaphone:T("megaphone",60190),mention:T("mention",60191),milestone:T("milestone",60192),gitPullRequestMilestone:T("git-pull-request-milestone",60192),mortarBoard:T("mortar-board",60193),move:T("move",60194),multipleWindows:T("multiple-windows",60195),mute:T("mute",60196),noNewline:T("no-newline",60197),note:T("note",60198),octoface:T("octoface",60199),openPreview:T("open-preview",60200),package:T("package",60201),paintcan:T("paintcan",60202),pin:T("pin",60203),play:T("play",60204),run:T("run",60204),plug:T("plug",60205),preserveCase:T("preserve-case",60206),preview:T("preview",60207),project:T("project",60208),pulse:T("pulse",60209),question:T("question",60210),quote:T("quote",60211),radioTower:T("radio-tower",60212),reactions:T("reactions",60213),references:T("references",60214),refresh:T("refresh",60215),regex:T("regex",60216),remoteExplorer:T("remote-explorer",60217),remote:T("remote",60218),remove:T("remove",60219),replaceAll:T("replace-all",60220),replace:T("replace",60221),repoClone:T("repo-clone",60222),repoForcePush:T("repo-force-push",60223),repoPull:T("repo-pull",60224),repoPush:T("repo-push",60225),report:T("report",60226),requestChanges:T("request-changes",60227),rocket:T("rocket",60228),rootFolderOpened:T("root-folder-opened",60229),rootFolder:T("root-folder",60230),rss:T("rss",60231),ruby:T("ruby",60232),saveAll:T("save-all",60233),saveAs:T("save-as",60234),save:T("save",60235),screenFull:T("screen-full",60236),screenNormal:T("screen-normal",60237),searchStop:T("search-stop",60238),server:T("server",60240),settingsGear:T("settings-gear",60241),settings:T("settings",60242),shield:T("shield",60243),smiley:T("smiley",60244),sortPrecedence:T("sort-precedence",60245),splitHorizontal:T("split-horizontal",60246),splitVertical:T("split-vertical",60247),squirrel:T("squirrel",60248),starFull:T("star-full",60249),starHalf:T("star-half",60250),symbolClass:T("symbol-class",60251),symbolColor:T("symbol-color",60252),symbolConstant:T("symbol-constant",60253),symbolEnumMember:T("symbol-enum-member",60254),symbolField:T("symbol-field",60255),symbolFile:T("symbol-file",60256),symbolInterface:T("symbol-interface",60257),symbolKeyword:T("symbol-keyword",60258),symbolMisc:T("symbol-misc",60259),symbolOperator:T("symbol-operator",60260),symbolProperty:T("symbol-property",60261),wrench:T("wrench",60261),wrenchSubaction:T("wrench-subaction",60261),symbolSnippet:T("symbol-snippet",60262),tasklist:T("tasklist",60263),telescope:T("telescope",60264),textSize:T("text-size",60265),threeBars:T("three-bars",60266),thumbsdown:T("thumbsdown",60267),thumbsup:T("thumbsup",60268),tools:T("tools",60269),triangleDown:T("triangle-down",60270),triangleLeft:T("triangle-left",60271),triangleRight:T("triangle-right",60272),triangleUp:T("triangle-up",60273),twitter:T("twitter",60274),unfold:T("unfold",60275),unlock:T("unlock",60276),unmute:T("unmute",60277),unverified:T("unverified",60278),verified:T("verified",60279),versions:T("versions",60280),vmActive:T("vm-active",60281),vmOutline:T("vm-outline",60282),vmRunning:T("vm-running",60283),watch:T("watch",60284),whitespace:T("whitespace",60285),wholeWord:T("whole-word",60286),window:T("window",60287),wordWrap:T("word-wrap",60288),zoomIn:T("zoom-in",60289),zoomOut:T("zoom-out",60290),listFilter:T("list-filter",60291),listFlat:T("list-flat",60292),listSelection:T("list-selection",60293),selection:T("selection",60293),listTree:T("list-tree",60294),debugBreakpointFunctionUnverified:T("debug-breakpoint-function-unverified",60295),debugBreakpointFunction:T("debug-breakpoint-function",60296),debugBreakpointFunctionDisabled:T("debug-breakpoint-function-disabled",60296),debugStackframeActive:T("debug-stackframe-active",60297),circleSmallFilled:T("circle-small-filled",60298),debugStackframeDot:T("debug-stackframe-dot",60298),terminalDecorationMark:T("terminal-decoration-mark",60298),debugStackframe:T("debug-stackframe",60299),debugStackframeFocused:T("debug-stackframe-focused",60299),debugBreakpointUnsupported:T("debug-breakpoint-unsupported",60300),symbolString:T("symbol-string",60301),debugReverseContinue:T("debug-reverse-continue",60302),debugStepBack:T("debug-step-back",60303),debugRestartFrame:T("debug-restart-frame",60304),debugAlt:T("debug-alt",60305),callIncoming:T("call-incoming",60306),callOutgoing:T("call-outgoing",60307),menu:T("menu",60308),expandAll:T("expand-all",60309),feedback:T("feedback",60310),gitPullRequestReviewer:T("git-pull-request-reviewer",60310),groupByRefType:T("group-by-ref-type",60311),ungroupByRefType:T("ungroup-by-ref-type",60312),account:T("account",60313),gitPullRequestAssignee:T("git-pull-request-assignee",60313),bellDot:T("bell-dot",60314),debugConsole:T("debug-console",60315),library:T("library",60316),output:T("output",60317),runAll:T("run-all",60318),syncIgnored:T("sync-ignored",60319),pinned:T("pinned",60320),githubInverted:T("github-inverted",60321),serverProcess:T("server-process",60322),serverEnvironment:T("server-environment",60323),pass:T("pass",60324),issueClosed:T("issue-closed",60324),stopCircle:T("stop-circle",60325),playCircle:T("play-circle",60326),record:T("record",60327),debugAltSmall:T("debug-alt-small",60328),vmConnect:T("vm-connect",60329),cloud:T("cloud",60330),merge:T("merge",60331),export:T("export",60332),graphLeft:T("graph-left",60333),magnet:T("magnet",60334),notebook:T("notebook",60335),redo:T("redo",60336),checkAll:T("check-all",60337),pinnedDirty:T("pinned-dirty",60338),passFilled:T("pass-filled",60339),circleLargeFilled:T("circle-large-filled",60340),circleLarge:T("circle-large",60341),circleLargeOutline:T("circle-large-outline",60341),combine:T("combine",60342),gather:T("gather",60342),table:T("table",60343),variableGroup:T("variable-group",60344),typeHierarchy:T("type-hierarchy",60345),typeHierarchySub:T("type-hierarchy-sub",60346),typeHierarchySuper:T("type-hierarchy-super",60347),gitPullRequestCreate:T("git-pull-request-create",60348),runAbove:T("run-above",60349),runBelow:T("run-below",60350),notebookTemplate:T("notebook-template",60351),debugRerun:T("debug-rerun",60352),workspaceTrusted:T("workspace-trusted",60353),workspaceUntrusted:T("workspace-untrusted",60354),workspaceUnknown:T("workspace-unknown",60355),terminalCmd:T("terminal-cmd",60356),terminalDebian:T("terminal-debian",60357),terminalLinux:T("terminal-linux",60358),terminalPowershell:T("terminal-powershell",60359),terminalTmux:T("terminal-tmux",60360),terminalUbuntu:T("terminal-ubuntu",60361),terminalBash:T("terminal-bash",60362),arrowSwap:T("arrow-swap",60363),copy:T("copy",60364),personAdd:T("person-add",60365),filterFilled:T("filter-filled",60366),wand:T("wand",60367),debugLineByLine:T("debug-line-by-line",60368),inspect:T("inspect",60369),layers:T("layers",60370),layersDot:T("layers-dot",60371),layersActive:T("layers-active",60372),compass:T("compass",60373),compassDot:T("compass-dot",60374),compassActive:T("compass-active",60375),azure:T("azure",60376),issueDraft:T("issue-draft",60377),gitPullRequestClosed:T("git-pull-request-closed",60378),gitPullRequestDraft:T("git-pull-request-draft",60379),debugAll:T("debug-all",60380),debugCoverage:T("debug-coverage",60381),runErrors:T("run-errors",60382),folderLibrary:T("folder-library",60383),debugContinueSmall:T("debug-continue-small",60384),beakerStop:T("beaker-stop",60385),graphLine:T("graph-line",60386),graphScatter:T("graph-scatter",60387),pieChart:T("pie-chart",60388),bracket:T("bracket",60175),bracketDot:T("bracket-dot",60389),bracketError:T("bracket-error",60390),lockSmall:T("lock-small",60391),azureDevops:T("azure-devops",60392),verifiedFilled:T("verified-filled",60393),newline:T("newline",60394),layout:T("layout",60395),layoutActivitybarLeft:T("layout-activitybar-left",60396),layoutActivitybarRight:T("layout-activitybar-right",60397),layoutPanelLeft:T("layout-panel-left",60398),layoutPanelCenter:T("layout-panel-center",60399),layoutPanelJustify:T("layout-panel-justify",60400),layoutPanelRight:T("layout-panel-right",60401),layoutPanel:T("layout-panel",60402),layoutSidebarLeft:T("layout-sidebar-left",60403),layoutSidebarRight:T("layout-sidebar-right",60404),layoutStatusbar:T("layout-statusbar",60405),layoutMenubar:T("layout-menubar",60406),layoutCentered:T("layout-centered",60407),target:T("target",60408),indent:T("indent",60409),recordSmall:T("record-small",60410),errorSmall:T("error-small",60411),terminalDecorationError:T("terminal-decoration-error",60411),arrowCircleDown:T("arrow-circle-down",60412),arrowCircleLeft:T("arrow-circle-left",60413),arrowCircleRight:T("arrow-circle-right",60414),arrowCircleUp:T("arrow-circle-up",60415),layoutSidebarRightOff:T("layout-sidebar-right-off",60416),layoutPanelOff:T("layout-panel-off",60417),layoutSidebarLeftOff:T("layout-sidebar-left-off",60418),blank:T("blank",60419),heartFilled:T("heart-filled",60420),map:T("map",60421),mapHorizontal:T("map-horizontal",60421),foldHorizontal:T("fold-horizontal",60421),mapFilled:T("map-filled",60422),mapHorizontalFilled:T("map-horizontal-filled",60422),foldHorizontalFilled:T("fold-horizontal-filled",60422),circleSmall:T("circle-small",60423),bellSlash:T("bell-slash",60424),bellSlashDot:T("bell-slash-dot",60425),commentUnresolved:T("comment-unresolved",60426),gitPullRequestGoToChanges:T("git-pull-request-go-to-changes",60427),gitPullRequestNewChanges:T("git-pull-request-new-changes",60428),searchFuzzy:T("search-fuzzy",60429),commentDraft:T("comment-draft",60430),send:T("send",60431),sparkle:T("sparkle",60432),insert:T("insert",60433),mic:T("mic",60434),thumbsdownFilled:T("thumbsdown-filled",60435),thumbsupFilled:T("thumbsup-filled",60436),coffee:T("coffee",60437),snake:T("snake",60438),game:T("game",60439),vr:T("vr",60440),chip:T("chip",60441),piano:T("piano",60442),music:T("music",60443),micFilled:T("mic-filled",60444),repoFetch:T("repo-fetch",60445),copilot:T("copilot",60446),lightbulbSparkle:T("lightbulb-sparkle",60447),robot:T("robot",60448),sparkleFilled:T("sparkle-filled",60449),diffSingle:T("diff-single",60450),diffMultiple:T("diff-multiple",60451),surroundWith:T("surround-with",60452),share:T("share",60453),gitStash:T("git-stash",60454),gitStashApply:T("git-stash-apply",60455),gitStashPop:T("git-stash-pop",60456),vscode:T("vscode",60457),vscodeInsiders:T("vscode-insiders",60458),codeOss:T("code-oss",60459),runCoverage:T("run-coverage",60460),runAllCoverage:T("run-all-coverage",60461),coverage:T("coverage",60462),githubProject:T("github-project",60463),mapVertical:T("map-vertical",60464),foldVertical:T("fold-vertical",60464),mapVerticalFilled:T("map-vertical-filled",60465),foldVerticalFilled:T("fold-vertical-filled",60465)},mCe={dialogError:T("dialog-error","error"),dialogWarning:T("dialog-warning","warning"),dialogInfo:T("dialog-info","info"),dialogClose:T("dialog-close","close"),treeItemExpanded:T("tree-item-expanded","chevron-down"),treeFilterOnTypeOn:T("tree-filter-on-type-on","list-filter"),treeFilterOnTypeOff:T("tree-filter-on-type-off","list-selection"),treeFilterClear:T("tree-filter-clear","close"),treeItemLoading:T("tree-item-loading","loading"),menuSelection:T("menu-selection","check"),menuSubmenu:T("menu-submenu","chevron-right"),menuBarMore:T("menubar-more","more"),scrollbarButtonLeft:T("scrollbar-button-left","triangle-left"),scrollbarButtonRight:T("scrollbar-button-right","triangle-right"),scrollbarButtonUp:T("scrollbar-button-up","triangle-up"),scrollbarButtonDown:T("scrollbar-button-down","triangle-down"),toolBarMore:T("toolbar-more","more"),quickInputBack:T("quick-input-back","arrow-left"),dropDownButton:T("drop-down-button",60084),symbolCustomColor:T("symbol-customcolor",60252),exportIcon:T("export",60332),workspaceUnspecified:T("workspace-unspecified",60355),newLine:T("newline",60394),thumbsDownFilled:T("thumbsdown-filled",60435),thumbsUpFilled:T("thumbsup-filled",60436),gitFetch:T("git-fetch",60445),lightbulbSparkleAutofix:T("lightbulb-sparkle-autofix",60447),debugBreakpointPending:T("debug-breakpoint-pending",60377)},Ee={...pCe,...mCe};let _Ce=class{constructor(){this._tokenizationSupports=new Map,this._factories=new Map,this._onDidChange=new Y,this.onDidChange=this._onDidChange.event,this._colorMap=null}handleChange(e){this._onDidChange.fire({changedLanguages:e,changedColorMap:!1})}register(e,t){return this._tokenizationSupports.set(e,t),this.handleChange([e]),lt(()=>{this._tokenizationSupports.get(e)===t&&(this._tokenizationSupports.delete(e),this.handleChange([e]))})}get(e){return this._tokenizationSupports.get(e)||null}registerFactory(e,t){var i;(i=this._factories.get(e))===null||i===void 0||i.dispose();const n=new vCe(this,e,t);return this._factories.set(e,n),lt(()=>{const s=this._factories.get(e);!s||s!==n||(this._factories.delete(e),s.dispose())})}async getOrCreate(e){const t=this.get(e);if(t)return t;const i=this._factories.get(e);return!i||i.isResolved?null:(await i.resolve(),this.get(e))}isResolved(e){if(this.get(e))return!0;const i=this._factories.get(e);return!!(!i||i.isResolved)}setColorMap(e){this._colorMap=e,this._onDidChange.fire({changedLanguages:Array.from(this._tokenizationSupports.keys()),changedColorMap:!0})}getColorMap(){return this._colorMap}getDefaultBackground(){return this._colorMap&&this._colorMap.length>2?this._colorMap[2]:null}};class vCe extends J{get isResolved(){return this._isResolved}constructor(e,t,i){super(),this._registry=e,this._languageId=t,this._factory=i,this._isDisposed=!1,this._resolvePromise=null,this._isResolved=!1}dispose(){this._isDisposed=!0,super.dispose()}async resolve(){return this._resolvePromise||(this._resolvePromise=this._create()),this._resolvePromise}async _create(){const e=await this._factory.tokenizationSupport;this._isResolved=!0,e&&!this._isDisposed&&this._register(this._registry.register(this._languageId,e))}}let ZL=class{constructor(e,t,i){this.offset=e,this.type=t,this.language=i,this._tokenBrand=void 0}toString(){return"("+this.offset+", "+this.type+")"}};class PV{constructor(e,t){this.tokens=e,this.endState=t,this._tokenizationResultBrand=void 0}}class uA{constructor(e,t){this.tokens=e,this.endState=t,this._encodedTokenizationResultBrand=void 0}}var QL;(function(o){const e=new Map;e.set(0,Ee.symbolMethod),e.set(1,Ee.symbolFunction),e.set(2,Ee.symbolConstructor),e.set(3,Ee.symbolField),e.set(4,Ee.symbolVariable),e.set(5,Ee.symbolClass),e.set(6,Ee.symbolStruct),e.set(7,Ee.symbolInterface),e.set(8,Ee.symbolModule),e.set(9,Ee.symbolProperty),e.set(10,Ee.symbolEvent),e.set(11,Ee.symbolOperator),e.set(12,Ee.symbolUnit),e.set(13,Ee.symbolValue),e.set(15,Ee.symbolEnum),e.set(14,Ee.symbolConstant),e.set(15,Ee.symbolEnum),e.set(16,Ee.symbolEnumMember),e.set(17,Ee.symbolKeyword),e.set(27,Ee.symbolSnippet),e.set(18,Ee.symbolText),e.set(19,Ee.symbolColor),e.set(20,Ee.symbolFile),e.set(21,Ee.symbolReference),e.set(22,Ee.symbolCustomColor),e.set(23,Ee.symbolFolder),e.set(24,Ee.symbolTypeParameter),e.set(25,Ee.account),e.set(26,Ee.issues);function t(s){let r=e.get(s);return r||(console.info("No codicon found for CompletionItemKind "+s),r=Ee.symbolProperty),r}o.toIcon=t;const i=new Map;i.set("method",0),i.set("function",1),i.set("constructor",2),i.set("field",3),i.set("variable",4),i.set("class",5),i.set("struct",6),i.set("interface",7),i.set("module",8),i.set("property",9),i.set("event",10),i.set("operator",11),i.set("unit",12),i.set("value",13),i.set("constant",14),i.set("enum",15),i.set("enum-member",16),i.set("enumMember",16),i.set("keyword",17),i.set("snippet",27),i.set("text",18),i.set("color",19),i.set("file",20),i.set("reference",21),i.set("customcolor",22),i.set("folder",23),i.set("type-parameter",24),i.set("typeParameter",24),i.set("account",25),i.set("issue",26);function n(s,r){let a=i.get(s);return typeof a>"u"&&!r&&(a=9),a}o.fromString=n})(QL||(QL={}));var jf;(function(o){o[o.Automatic=0]="Automatic",o[o.Explicit=1]="Explicit"})(jf||(jf={}));class lie{constructor(e,t,i,n){this.range=e,this.text=t,this.completionKind=i,this.isSnippetText=n}equals(e){return A.lift(this.range).equalsRange(e.range)&&this.text===e.text&&this.completionKind===e.completionKind&&this.isSnippetText===e.isSnippetText}}var XL;(function(o){o[o.Automatic=0]="Automatic",o[o.PasteAs=1]="PasteAs"})(XL||(XL={}));var oh;(function(o){o[o.Invoke=1]="Invoke",o[o.TriggerCharacter=2]="TriggerCharacter",o[o.ContentChange=3]="ContentChange"})(oh||(oh={}));var JL;(function(o){o[o.Text=0]="Text",o[o.Read=1]="Read",o[o.Write=2]="Write"})(JL||(JL={}));function bCe(o){return o&&gt.isUri(o.uri)&&A.isIRange(o.range)&&(A.isIRange(o.originSelectionRange)||A.isIRange(o.targetSelectionRange))}const CCe={17:v("Array","array"),16:v("Boolean","boolean"),4:v("Class","class"),13:v("Constant","constant"),8:v("Constructor","constructor"),9:v("Enum","enumeration"),21:v("EnumMember","enumeration member"),23:v("Event","event"),7:v("Field","field"),0:v("File","file"),11:v("Function","function"),10:v("Interface","interface"),19:v("Key","key"),5:v("Method","method"),1:v("Module","module"),2:v("Namespace","namespace"),20:v("Null","null"),15:v("Number","number"),18:v("Object","object"),24:v("Operator","operator"),3:v("Package","package"),6:v("Property","property"),14:v("String","string"),22:v("Struct","struct"),25:v("TypeParameter","type parameter"),12:v("Variable","variable")};function wCe(o,e){return v("symbolAriaLabel","{0} ({1})",o,CCe[e])}var cR;(function(o){const e=new Map;e.set(0,Ee.symbolFile),e.set(1,Ee.symbolModule),e.set(2,Ee.symbolNamespace),e.set(3,Ee.symbolPackage),e.set(4,Ee.symbolClass),e.set(5,Ee.symbolMethod),e.set(6,Ee.symbolProperty),e.set(7,Ee.symbolField),e.set(8,Ee.symbolConstructor),e.set(9,Ee.symbolEnum),e.set(10,Ee.symbolInterface),e.set(11,Ee.symbolFunction),e.set(12,Ee.symbolVariable),e.set(13,Ee.symbolConstant),e.set(14,Ee.symbolString),e.set(15,Ee.symbolNumber),e.set(16,Ee.symbolBoolean),e.set(17,Ee.symbolArray),e.set(18,Ee.symbolObject),e.set(19,Ee.symbolKey),e.set(20,Ee.symbolNull),e.set(21,Ee.symbolEnumMember),e.set(22,Ee.symbolStruct),e.set(23,Ee.symbolEvent),e.set(24,Ee.symbolOperator),e.set(25,Ee.symbolTypeParameter);function t(i){let n=e.get(i);return n||(console.info("No codicon found for SymbolKind "+i),n=Ee.symbolProperty),n}o.toIcon=t})(cR||(cR={}));class Vr{static fromValue(e){switch(e){case"comment":return Vr.Comment;case"imports":return Vr.Imports;case"region":return Vr.Region}return new Vr(e)}constructor(e){this.value=e}}Vr.Comment=new Vr("comment");Vr.Imports=new Vr("imports");Vr.Region=new Vr("region");var i7;(function(o){o[o.AIGenerated=1]="AIGenerated"})(i7||(i7={}));var n7;(function(o){function e(t){return!t||typeof t!="object"?!1:typeof t.id=="string"&&typeof t.title=="string"}o.is=e})(n7||(n7={}));var dR;(function(o){o[o.Type=1]="Type",o[o.Parameter=2]="Parameter"})(dR||(dR={}));class yCe{constructor(e){this.createSupport=e,this._tokenizationSupport=null}dispose(){this._tokenizationSupport&&this._tokenizationSupport.then(e=>{e&&e.dispose()})}get tokenizationSupport(){return this._tokenizationSupport||(this._tokenizationSupport=this.createSupport()),this._tokenizationSupport}}const Qn=new _Ce;var uR;(function(o){o[o.Invoke=0]="Invoke",o[o.Automatic=1]="Automatic"})(uR||(uR={}));var s7;(function(o){o[o.Unknown=0]="Unknown",o[o.Disabled=1]="Disabled",o[o.Enabled=2]="Enabled"})(s7||(s7={}));var o7;(function(o){o[o.Invoke=1]="Invoke",o[o.Auto=2]="Auto"})(o7||(o7={}));var r7;(function(o){o[o.None=0]="None",o[o.KeepWhitespace=1]="KeepWhitespace",o[o.InsertAsSnippet=4]="InsertAsSnippet"})(r7||(r7={}));var a7;(function(o){o[o.Method=0]="Method",o[o.Function=1]="Function",o[o.Constructor=2]="Constructor",o[o.Field=3]="Field",o[o.Variable=4]="Variable",o[o.Class=5]="Class",o[o.Struct=6]="Struct",o[o.Interface=7]="Interface",o[o.Module=8]="Module",o[o.Property=9]="Property",o[o.Event=10]="Event",o[o.Operator=11]="Operator",o[o.Unit=12]="Unit",o[o.Value=13]="Value",o[o.Constant=14]="Constant",o[o.Enum=15]="Enum",o[o.EnumMember=16]="EnumMember",o[o.Keyword=17]="Keyword",o[o.Text=18]="Text",o[o.Color=19]="Color",o[o.File=20]="File",o[o.Reference=21]="Reference",o[o.Customcolor=22]="Customcolor",o[o.Folder=23]="Folder",o[o.TypeParameter=24]="TypeParameter",o[o.User=25]="User",o[o.Issue=26]="Issue",o[o.Snippet=27]="Snippet"})(a7||(a7={}));var l7;(function(o){o[o.Deprecated=1]="Deprecated"})(l7||(l7={}));var c7;(function(o){o[o.Invoke=0]="Invoke",o[o.TriggerCharacter=1]="TriggerCharacter",o[o.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(c7||(c7={}));var d7;(function(o){o[o.EXACT=0]="EXACT",o[o.ABOVE=1]="ABOVE",o[o.BELOW=2]="BELOW"})(d7||(d7={}));var u7;(function(o){o[o.NotSet=0]="NotSet",o[o.ContentFlush=1]="ContentFlush",o[o.RecoverFromMarkers=2]="RecoverFromMarkers",o[o.Explicit=3]="Explicit",o[o.Paste=4]="Paste",o[o.Undo=5]="Undo",o[o.Redo=6]="Redo"})(u7||(u7={}));var h7;(function(o){o[o.LF=1]="LF",o[o.CRLF=2]="CRLF"})(h7||(h7={}));var f7;(function(o){o[o.Text=0]="Text",o[o.Read=1]="Read",o[o.Write=2]="Write"})(f7||(f7={}));var g7;(function(o){o[o.None=0]="None",o[o.Keep=1]="Keep",o[o.Brackets=2]="Brackets",o[o.Advanced=3]="Advanced",o[o.Full=4]="Full"})(g7||(g7={}));var p7;(function(o){o[o.acceptSuggestionOnCommitCharacter=0]="acceptSuggestionOnCommitCharacter",o[o.acceptSuggestionOnEnter=1]="acceptSuggestionOnEnter",o[o.accessibilitySupport=2]="accessibilitySupport",o[o.accessibilityPageSize=3]="accessibilityPageSize",o[o.ariaLabel=4]="ariaLabel",o[o.ariaRequired=5]="ariaRequired",o[o.autoClosingBrackets=6]="autoClosingBrackets",o[o.autoClosingComments=7]="autoClosingComments",o[o.screenReaderAnnounceInlineSuggestion=8]="screenReaderAnnounceInlineSuggestion",o[o.autoClosingDelete=9]="autoClosingDelete",o[o.autoClosingOvertype=10]="autoClosingOvertype",o[o.autoClosingQuotes=11]="autoClosingQuotes",o[o.autoIndent=12]="autoIndent",o[o.automaticLayout=13]="automaticLayout",o[o.autoSurround=14]="autoSurround",o[o.bracketPairColorization=15]="bracketPairColorization",o[o.guides=16]="guides",o[o.codeLens=17]="codeLens",o[o.codeLensFontFamily=18]="codeLensFontFamily",o[o.codeLensFontSize=19]="codeLensFontSize",o[o.colorDecorators=20]="colorDecorators",o[o.colorDecoratorsLimit=21]="colorDecoratorsLimit",o[o.columnSelection=22]="columnSelection",o[o.comments=23]="comments",o[o.contextmenu=24]="contextmenu",o[o.copyWithSyntaxHighlighting=25]="copyWithSyntaxHighlighting",o[o.cursorBlinking=26]="cursorBlinking",o[o.cursorSmoothCaretAnimation=27]="cursorSmoothCaretAnimation",o[o.cursorStyle=28]="cursorStyle",o[o.cursorSurroundingLines=29]="cursorSurroundingLines",o[o.cursorSurroundingLinesStyle=30]="cursorSurroundingLinesStyle",o[o.cursorWidth=31]="cursorWidth",o[o.disableLayerHinting=32]="disableLayerHinting",o[o.disableMonospaceOptimizations=33]="disableMonospaceOptimizations",o[o.domReadOnly=34]="domReadOnly",o[o.dragAndDrop=35]="dragAndDrop",o[o.dropIntoEditor=36]="dropIntoEditor",o[o.emptySelectionClipboard=37]="emptySelectionClipboard",o[o.experimentalWhitespaceRendering=38]="experimentalWhitespaceRendering",o[o.extraEditorClassName=39]="extraEditorClassName",o[o.fastScrollSensitivity=40]="fastScrollSensitivity",o[o.find=41]="find",o[o.fixedOverflowWidgets=42]="fixedOverflowWidgets",o[o.folding=43]="folding",o[o.foldingStrategy=44]="foldingStrategy",o[o.foldingHighlight=45]="foldingHighlight",o[o.foldingImportsByDefault=46]="foldingImportsByDefault",o[o.foldingMaximumRegions=47]="foldingMaximumRegions",o[o.unfoldOnClickAfterEndOfLine=48]="unfoldOnClickAfterEndOfLine",o[o.fontFamily=49]="fontFamily",o[o.fontInfo=50]="fontInfo",o[o.fontLigatures=51]="fontLigatures",o[o.fontSize=52]="fontSize",o[o.fontWeight=53]="fontWeight",o[o.fontVariations=54]="fontVariations",o[o.formatOnPaste=55]="formatOnPaste",o[o.formatOnType=56]="formatOnType",o[o.glyphMargin=57]="glyphMargin",o[o.gotoLocation=58]="gotoLocation",o[o.hideCursorInOverviewRuler=59]="hideCursorInOverviewRuler",o[o.hover=60]="hover",o[o.inDiffEditor=61]="inDiffEditor",o[o.inlineSuggest=62]="inlineSuggest",o[o.inlineEdit=63]="inlineEdit",o[o.letterSpacing=64]="letterSpacing",o[o.lightbulb=65]="lightbulb",o[o.lineDecorationsWidth=66]="lineDecorationsWidth",o[o.lineHeight=67]="lineHeight",o[o.lineNumbers=68]="lineNumbers",o[o.lineNumbersMinChars=69]="lineNumbersMinChars",o[o.linkedEditing=70]="linkedEditing",o[o.links=71]="links",o[o.matchBrackets=72]="matchBrackets",o[o.minimap=73]="minimap",o[o.mouseStyle=74]="mouseStyle",o[o.mouseWheelScrollSensitivity=75]="mouseWheelScrollSensitivity",o[o.mouseWheelZoom=76]="mouseWheelZoom",o[o.multiCursorMergeOverlapping=77]="multiCursorMergeOverlapping",o[o.multiCursorModifier=78]="multiCursorModifier",o[o.multiCursorPaste=79]="multiCursorPaste",o[o.multiCursorLimit=80]="multiCursorLimit",o[o.occurrencesHighlight=81]="occurrencesHighlight",o[o.overviewRulerBorder=82]="overviewRulerBorder",o[o.overviewRulerLanes=83]="overviewRulerLanes",o[o.padding=84]="padding",o[o.pasteAs=85]="pasteAs",o[o.parameterHints=86]="parameterHints",o[o.peekWidgetDefaultFocus=87]="peekWidgetDefaultFocus",o[o.definitionLinkOpensInPeek=88]="definitionLinkOpensInPeek",o[o.quickSuggestions=89]="quickSuggestions",o[o.quickSuggestionsDelay=90]="quickSuggestionsDelay",o[o.readOnly=91]="readOnly",o[o.readOnlyMessage=92]="readOnlyMessage",o[o.renameOnType=93]="renameOnType",o[o.renderControlCharacters=94]="renderControlCharacters",o[o.renderFinalNewline=95]="renderFinalNewline",o[o.renderLineHighlight=96]="renderLineHighlight",o[o.renderLineHighlightOnlyWhenFocus=97]="renderLineHighlightOnlyWhenFocus",o[o.renderValidationDecorations=98]="renderValidationDecorations",o[o.renderWhitespace=99]="renderWhitespace",o[o.revealHorizontalRightPadding=100]="revealHorizontalRightPadding",o[o.roundedSelection=101]="roundedSelection",o[o.rulers=102]="rulers",o[o.scrollbar=103]="scrollbar",o[o.scrollBeyondLastColumn=104]="scrollBeyondLastColumn",o[o.scrollBeyondLastLine=105]="scrollBeyondLastLine",o[o.scrollPredominantAxis=106]="scrollPredominantAxis",o[o.selectionClipboard=107]="selectionClipboard",o[o.selectionHighlight=108]="selectionHighlight",o[o.selectOnLineNumbers=109]="selectOnLineNumbers",o[o.showFoldingControls=110]="showFoldingControls",o[o.showUnused=111]="showUnused",o[o.snippetSuggestions=112]="snippetSuggestions",o[o.smartSelect=113]="smartSelect",o[o.smoothScrolling=114]="smoothScrolling",o[o.stickyScroll=115]="stickyScroll",o[o.stickyTabStops=116]="stickyTabStops",o[o.stopRenderingLineAfter=117]="stopRenderingLineAfter",o[o.suggest=118]="suggest",o[o.suggestFontSize=119]="suggestFontSize",o[o.suggestLineHeight=120]="suggestLineHeight",o[o.suggestOnTriggerCharacters=121]="suggestOnTriggerCharacters",o[o.suggestSelection=122]="suggestSelection",o[o.tabCompletion=123]="tabCompletion",o[o.tabIndex=124]="tabIndex",o[o.unicodeHighlighting=125]="unicodeHighlighting",o[o.unusualLineTerminators=126]="unusualLineTerminators",o[o.useShadowDOM=127]="useShadowDOM",o[o.useTabStops=128]="useTabStops",o[o.wordBreak=129]="wordBreak",o[o.wordSegmenterLocales=130]="wordSegmenterLocales",o[o.wordSeparators=131]="wordSeparators",o[o.wordWrap=132]="wordWrap",o[o.wordWrapBreakAfterCharacters=133]="wordWrapBreakAfterCharacters",o[o.wordWrapBreakBeforeCharacters=134]="wordWrapBreakBeforeCharacters",o[o.wordWrapColumn=135]="wordWrapColumn",o[o.wordWrapOverride1=136]="wordWrapOverride1",o[o.wordWrapOverride2=137]="wordWrapOverride2",o[o.wrappingIndent=138]="wrappingIndent",o[o.wrappingStrategy=139]="wrappingStrategy",o[o.showDeprecated=140]="showDeprecated",o[o.inlayHints=141]="inlayHints",o[o.editorClassName=142]="editorClassName",o[o.pixelRatio=143]="pixelRatio",o[o.tabFocusMode=144]="tabFocusMode",o[o.layoutInfo=145]="layoutInfo",o[o.wrappingInfo=146]="wrappingInfo",o[o.defaultColorDecorators=147]="defaultColorDecorators",o[o.colorDecoratorsActivatedOn=148]="colorDecoratorsActivatedOn",o[o.inlineCompletionsAccessibilityVerbose=149]="inlineCompletionsAccessibilityVerbose"})(p7||(p7={}));var m7;(function(o){o[o.TextDefined=0]="TextDefined",o[o.LF=1]="LF",o[o.CRLF=2]="CRLF"})(m7||(m7={}));var _7;(function(o){o[o.LF=0]="LF",o[o.CRLF=1]="CRLF"})(_7||(_7={}));var v7;(function(o){o[o.Left=1]="Left",o[o.Center=2]="Center",o[o.Right=3]="Right"})(v7||(v7={}));var b7;(function(o){o[o.None=0]="None",o[o.Indent=1]="Indent",o[o.IndentOutdent=2]="IndentOutdent",o[o.Outdent=3]="Outdent"})(b7||(b7={}));var C7;(function(o){o[o.Both=0]="Both",o[o.Right=1]="Right",o[o.Left=2]="Left",o[o.None=3]="None"})(C7||(C7={}));var w7;(function(o){o[o.Type=1]="Type",o[o.Parameter=2]="Parameter"})(w7||(w7={}));var y7;(function(o){o[o.Automatic=0]="Automatic",o[o.Explicit=1]="Explicit"})(y7||(y7={}));var S7;(function(o){o[o.Invoke=0]="Invoke",o[o.Automatic=1]="Automatic"})(S7||(S7={}));var L7;(function(o){o[o.DependsOnKbLayout=-1]="DependsOnKbLayout",o[o.Unknown=0]="Unknown",o[o.Backspace=1]="Backspace",o[o.Tab=2]="Tab",o[o.Enter=3]="Enter",o[o.Shift=4]="Shift",o[o.Ctrl=5]="Ctrl",o[o.Alt=6]="Alt",o[o.PauseBreak=7]="PauseBreak",o[o.CapsLock=8]="CapsLock",o[o.Escape=9]="Escape",o[o.Space=10]="Space",o[o.PageUp=11]="PageUp",o[o.PageDown=12]="PageDown",o[o.End=13]="End",o[o.Home=14]="Home",o[o.LeftArrow=15]="LeftArrow",o[o.UpArrow=16]="UpArrow",o[o.RightArrow=17]="RightArrow",o[o.DownArrow=18]="DownArrow",o[o.Insert=19]="Insert",o[o.Delete=20]="Delete",o[o.Digit0=21]="Digit0",o[o.Digit1=22]="Digit1",o[o.Digit2=23]="Digit2",o[o.Digit3=24]="Digit3",o[o.Digit4=25]="Digit4",o[o.Digit5=26]="Digit5",o[o.Digit6=27]="Digit6",o[o.Digit7=28]="Digit7",o[o.Digit8=29]="Digit8",o[o.Digit9=30]="Digit9",o[o.KeyA=31]="KeyA",o[o.KeyB=32]="KeyB",o[o.KeyC=33]="KeyC",o[o.KeyD=34]="KeyD",o[o.KeyE=35]="KeyE",o[o.KeyF=36]="KeyF",o[o.KeyG=37]="KeyG",o[o.KeyH=38]="KeyH",o[o.KeyI=39]="KeyI",o[o.KeyJ=40]="KeyJ",o[o.KeyK=41]="KeyK",o[o.KeyL=42]="KeyL",o[o.KeyM=43]="KeyM",o[o.KeyN=44]="KeyN",o[o.KeyO=45]="KeyO",o[o.KeyP=46]="KeyP",o[o.KeyQ=47]="KeyQ",o[o.KeyR=48]="KeyR",o[o.KeyS=49]="KeyS",o[o.KeyT=50]="KeyT",o[o.KeyU=51]="KeyU",o[o.KeyV=52]="KeyV",o[o.KeyW=53]="KeyW",o[o.KeyX=54]="KeyX",o[o.KeyY=55]="KeyY",o[o.KeyZ=56]="KeyZ",o[o.Meta=57]="Meta",o[o.ContextMenu=58]="ContextMenu",o[o.F1=59]="F1",o[o.F2=60]="F2",o[o.F3=61]="F3",o[o.F4=62]="F4",o[o.F5=63]="F5",o[o.F6=64]="F6",o[o.F7=65]="F7",o[o.F8=66]="F8",o[o.F9=67]="F9",o[o.F10=68]="F10",o[o.F11=69]="F11",o[o.F12=70]="F12",o[o.F13=71]="F13",o[o.F14=72]="F14",o[o.F15=73]="F15",o[o.F16=74]="F16",o[o.F17=75]="F17",o[o.F18=76]="F18",o[o.F19=77]="F19",o[o.F20=78]="F20",o[o.F21=79]="F21",o[o.F22=80]="F22",o[o.F23=81]="F23",o[o.F24=82]="F24",o[o.NumLock=83]="NumLock",o[o.ScrollLock=84]="ScrollLock",o[o.Semicolon=85]="Semicolon",o[o.Equal=86]="Equal",o[o.Comma=87]="Comma",o[o.Minus=88]="Minus",o[o.Period=89]="Period",o[o.Slash=90]="Slash",o[o.Backquote=91]="Backquote",o[o.BracketLeft=92]="BracketLeft",o[o.Backslash=93]="Backslash",o[o.BracketRight=94]="BracketRight",o[o.Quote=95]="Quote",o[o.OEM_8=96]="OEM_8",o[o.IntlBackslash=97]="IntlBackslash",o[o.Numpad0=98]="Numpad0",o[o.Numpad1=99]="Numpad1",o[o.Numpad2=100]="Numpad2",o[o.Numpad3=101]="Numpad3",o[o.Numpad4=102]="Numpad4",o[o.Numpad5=103]="Numpad5",o[o.Numpad6=104]="Numpad6",o[o.Numpad7=105]="Numpad7",o[o.Numpad8=106]="Numpad8",o[o.Numpad9=107]="Numpad9",o[o.NumpadMultiply=108]="NumpadMultiply",o[o.NumpadAdd=109]="NumpadAdd",o[o.NUMPAD_SEPARATOR=110]="NUMPAD_SEPARATOR",o[o.NumpadSubtract=111]="NumpadSubtract",o[o.NumpadDecimal=112]="NumpadDecimal",o[o.NumpadDivide=113]="NumpadDivide",o[o.KEY_IN_COMPOSITION=114]="KEY_IN_COMPOSITION",o[o.ABNT_C1=115]="ABNT_C1",o[o.ABNT_C2=116]="ABNT_C2",o[o.AudioVolumeMute=117]="AudioVolumeMute",o[o.AudioVolumeUp=118]="AudioVolumeUp",o[o.AudioVolumeDown=119]="AudioVolumeDown",o[o.BrowserSearch=120]="BrowserSearch",o[o.BrowserHome=121]="BrowserHome",o[o.BrowserBack=122]="BrowserBack",o[o.BrowserForward=123]="BrowserForward",o[o.MediaTrackNext=124]="MediaTrackNext",o[o.MediaTrackPrevious=125]="MediaTrackPrevious",o[o.MediaStop=126]="MediaStop",o[o.MediaPlayPause=127]="MediaPlayPause",o[o.LaunchMediaPlayer=128]="LaunchMediaPlayer",o[o.LaunchMail=129]="LaunchMail",o[o.LaunchApp2=130]="LaunchApp2",o[o.Clear=131]="Clear",o[o.MAX_VALUE=132]="MAX_VALUE"})(L7||(L7={}));var x7;(function(o){o[o.Hint=1]="Hint",o[o.Info=2]="Info",o[o.Warning=4]="Warning",o[o.Error=8]="Error"})(x7||(x7={}));var D7;(function(o){o[o.Unnecessary=1]="Unnecessary",o[o.Deprecated=2]="Deprecated"})(D7||(D7={}));var k7;(function(o){o[o.Inline=1]="Inline",o[o.Gutter=2]="Gutter"})(k7||(k7={}));var E7;(function(o){o[o.Normal=1]="Normal",o[o.Underlined=2]="Underlined"})(E7||(E7={}));var I7;(function(o){o[o.UNKNOWN=0]="UNKNOWN",o[o.TEXTAREA=1]="TEXTAREA",o[o.GUTTER_GLYPH_MARGIN=2]="GUTTER_GLYPH_MARGIN",o[o.GUTTER_LINE_NUMBERS=3]="GUTTER_LINE_NUMBERS",o[o.GUTTER_LINE_DECORATIONS=4]="GUTTER_LINE_DECORATIONS",o[o.GUTTER_VIEW_ZONE=5]="GUTTER_VIEW_ZONE",o[o.CONTENT_TEXT=6]="CONTENT_TEXT",o[o.CONTENT_EMPTY=7]="CONTENT_EMPTY",o[o.CONTENT_VIEW_ZONE=8]="CONTENT_VIEW_ZONE",o[o.CONTENT_WIDGET=9]="CONTENT_WIDGET",o[o.OVERVIEW_RULER=10]="OVERVIEW_RULER",o[o.SCROLLBAR=11]="SCROLLBAR",o[o.OVERLAY_WIDGET=12]="OVERLAY_WIDGET",o[o.OUTSIDE_EDITOR=13]="OUTSIDE_EDITOR"})(I7||(I7={}));var T7;(function(o){o[o.AIGenerated=1]="AIGenerated"})(T7||(T7={}));var N7;(function(o){o[o.TOP_RIGHT_CORNER=0]="TOP_RIGHT_CORNER",o[o.BOTTOM_RIGHT_CORNER=1]="BOTTOM_RIGHT_CORNER",o[o.TOP_CENTER=2]="TOP_CENTER"})(N7||(N7={}));var R7;(function(o){o[o.Left=1]="Left",o[o.Center=2]="Center",o[o.Right=4]="Right",o[o.Full=7]="Full"})(R7||(R7={}));var M7;(function(o){o[o.Word=0]="Word",o[o.Line=1]="Line",o[o.Suggest=2]="Suggest"})(M7||(M7={}));var A7;(function(o){o[o.Left=0]="Left",o[o.Right=1]="Right",o[o.None=2]="None",o[o.LeftOfInjectedText=3]="LeftOfInjectedText",o[o.RightOfInjectedText=4]="RightOfInjectedText"})(A7||(A7={}));var P7;(function(o){o[o.Off=0]="Off",o[o.On=1]="On",o[o.Relative=2]="Relative",o[o.Interval=3]="Interval",o[o.Custom=4]="Custom"})(P7||(P7={}));var O7;(function(o){o[o.None=0]="None",o[o.Text=1]="Text",o[o.Blocks=2]="Blocks"})(O7||(O7={}));var F7;(function(o){o[o.Smooth=0]="Smooth",o[o.Immediate=1]="Immediate"})(F7||(F7={}));var B7;(function(o){o[o.Auto=1]="Auto",o[o.Hidden=2]="Hidden",o[o.Visible=3]="Visible"})(B7||(B7={}));var W7;(function(o){o[o.LTR=0]="LTR",o[o.RTL=1]="RTL"})(W7||(W7={}));var V7;(function(o){o.Off="off",o.OnCode="onCode",o.On="on"})(V7||(V7={}));var H7;(function(o){o[o.Invoke=1]="Invoke",o[o.TriggerCharacter=2]="TriggerCharacter",o[o.ContentChange=3]="ContentChange"})(H7||(H7={}));var z7;(function(o){o[o.File=0]="File",o[o.Module=1]="Module",o[o.Namespace=2]="Namespace",o[o.Package=3]="Package",o[o.Class=4]="Class",o[o.Method=5]="Method",o[o.Property=6]="Property",o[o.Field=7]="Field",o[o.Constructor=8]="Constructor",o[o.Enum=9]="Enum",o[o.Interface=10]="Interface",o[o.Function=11]="Function",o[o.Variable=12]="Variable",o[o.Constant=13]="Constant",o[o.String=14]="String",o[o.Number=15]="Number",o[o.Boolean=16]="Boolean",o[o.Array=17]="Array",o[o.Object=18]="Object",o[o.Key=19]="Key",o[o.Null=20]="Null",o[o.EnumMember=21]="EnumMember",o[o.Struct=22]="Struct",o[o.Event=23]="Event",o[o.Operator=24]="Operator",o[o.TypeParameter=25]="TypeParameter"})(z7||(z7={}));var U7;(function(o){o[o.Deprecated=1]="Deprecated"})(U7||(U7={}));var $7;(function(o){o[o.Hidden=0]="Hidden",o[o.Blink=1]="Blink",o[o.Smooth=2]="Smooth",o[o.Phase=3]="Phase",o[o.Expand=4]="Expand",o[o.Solid=5]="Solid"})($7||($7={}));var j7;(function(o){o[o.Line=1]="Line",o[o.Block=2]="Block",o[o.Underline=3]="Underline",o[o.LineThin=4]="LineThin",o[o.BlockOutline=5]="BlockOutline",o[o.UnderlineThin=6]="UnderlineThin"})(j7||(j7={}));var K7;(function(o){o[o.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",o[o.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",o[o.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",o[o.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter"})(K7||(K7={}));var q7;(function(o){o[o.None=0]="None",o[o.Same=1]="Same",o[o.Indent=2]="Indent",o[o.DeepIndent=3]="DeepIndent"})(q7||(q7={}));let RD=class{static chord(e,t){return Fs(e,t)}};RD.CtrlCmd=2048;RD.Shift=1024;RD.Alt=512;RD.WinCtrl=256;function cie(){return{editor:void 0,languages:void 0,CancellationTokenSource:os,Emitter:Y,KeyCode:L7,KeyMod:RD,Position:Z,Range:A,Selection:Xe,SelectionDirection:W7,MarkerSeverity:x7,MarkerTag:D7,Uri:gt,Token:ZL}}function SCe(o,e){const t=o;typeof t.vscodeWindowId!="number"&&Object.defineProperty(t,"vscodeWindowId",{get:()=>e})}const Hi=window;class LCe{constructor(e,t=JSON.stringify){this.fn=e,this._computeKey=t,this.lastCache=void 0,this.lastArgKey=void 0}get(e){const t=this._computeKey(e);return this.lastArgKey!==t&&(this.lastArgKey=t,this.lastCache=this.fn(e)),this.lastCache}}class _Y{get cachedValues(){return this._map}constructor(e){this.fn=e,this._map=new Map}get(e){if(this._map.has(e))return this._map.get(e);const t=this.fn(e);return this._map.set(e,t),t}}class tu{constructor(e){this.executor=e,this._didRun=!1}get value(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}}var t1;function die(o){return!o||typeof o!="string"?!0:o.trim().length===0}const xCe=/{(\d+)}/g;function kv(o,...e){return e.length===0?o:o.replace(xCe,function(t,i){const n=parseInt(i,10);return isNaN(n)||n<0||n>=e.length?t:e[n]})}function DCe(o){return o.replace(/[<>"'&]/g,e=>{switch(e){case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"'":return"&apos;";case"&":return"&amp;"}return e})}function hR(o){return o.replace(/[<>&]/g,function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return e}})}function Ll(o){return o.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function kCe(o,e=" "){const t=MD(o,e);return uie(t,e)}function MD(o,e){if(!o||!e)return o;const t=e.length;if(t===0||o.length===0)return o;let i=0;for(;o.indexOf(e,i)===i;)i=i+t;return o.substring(i)}function uie(o,e){if(!o||!e)return o;const t=e.length,i=o.length;if(t===0||i===0)return o;let n=i,s=-1;for(;s=o.lastIndexOf(e,n-1),!(s===-1||s+t!==n);){if(s===0)return"";n=s}return o.substring(0,n)}function ECe(o){return o.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")}function ICe(o){return o.replace(/\*/g,"")}function hie(o,e,t={}){if(!o)throw new Error("Cannot create regex from empty string");e||(o=Ll(o)),t.wholeWord&&(/\B/.test(o.charAt(0))||(o="\\b"+o),/\B/.test(o.charAt(o.length-1))||(o=o+"\\b"));let i="";return t.global&&(i+="g"),t.matchCase||(i+="i"),t.multiline&&(i+="m"),t.unicode&&(i+="u"),new RegExp(o,i)}function TCe(o){return o.source==="^"||o.source==="^$"||o.source==="$"||o.source==="^\\s*$"?!1:!!(o.exec("")&&o.lastIndex===0)}function Sh(o){return o.split(/\r\n|\r|\n/)}function NCe(o){var e;const t=[],i=o.split(/(\r\n|\r|\n)/);for(let n=0;n<Math.ceil(i.length/2);n++)t.push(i[2*n]+((e=i[2*n+1])!==null&&e!==void 0?e:""));return t}function gr(o){for(let e=0,t=o.length;e<t;e++){const i=o.charCodeAt(e);if(i!==32&&i!==9)return e}return-1}function an(o,e=0,t=o.length){for(let i=e;i<t;i++){const n=o.charCodeAt(i);if(n!==32&&n!==9)return o.substring(e,i)}return o.substring(e,t)}function Bd(o,e=o.length-1){for(let t=e;t>=0;t--){const i=o.charCodeAt(t);if(i!==32&&i!==9)return t}return-1}function ex(o,e){return o<e?-1:o>e?1:0}function OV(o,e,t=0,i=o.length,n=0,s=e.length){for(;t<i&&n<s;t++,n++){const l=o.charCodeAt(t),c=e.charCodeAt(n);if(l<c)return-1;if(l>c)return 1}const r=i-t,a=s-n;return r<a?-1:r>a?1:0}function G7(o,e){return AD(o,e,0,o.length,0,e.length)}function AD(o,e,t=0,i=o.length,n=0,s=e.length){for(;t<i&&n<s;t++,n++){let l=o.charCodeAt(t),c=e.charCodeAt(n);if(l===c)continue;if(l>=128||c>=128)return OV(o.toLowerCase(),e.toLowerCase(),t,i,n,s);kp(l)&&(l-=32),kp(c)&&(c-=32);const u=l-c;if(u!==0)return u}const r=i-t,a=s-n;return r<a?-1:r>a?1:0}function jI(o){return o>=48&&o<=57}function kp(o){return o>=97&&o<=122}function Fu(o){return o>=65&&o<=90}function Q0(o,e){return o.length===e.length&&AD(o,e)===0}function FV(o,e){const t=e.length;return e.length>o.length?!1:AD(o,e,0,t)===0}function am(o,e){const t=Math.min(o.length,e.length);let i;for(i=0;i<t;i++)if(o.charCodeAt(i)!==e.charCodeAt(i))return i;return t}function fR(o,e){const t=Math.min(o.length,e.length);let i;const n=o.length-1,s=e.length-1;for(i=0;i<t;i++)if(o.charCodeAt(n-i)!==e.charCodeAt(s-i))return i;return t}function qs(o){return 55296<=o&&o<=56319}function Ev(o){return 56320<=o&&o<=57343}function BV(o,e){return(o-55296<<10)+(e-56320)+65536}function gR(o,e,t){const i=o.charCodeAt(t);if(qs(i)&&t+1<e){const n=o.charCodeAt(t+1);if(Ev(n))return BV(i,n)}return i}function RCe(o,e){const t=o.charCodeAt(e-1);if(Ev(t)&&e>1){const i=o.charCodeAt(e-2);if(qs(i))return BV(i,t)}return t}class WV{get offset(){return this._offset}constructor(e,t=0){this._str=e,this._len=e.length,this._offset=t}setOffset(e){this._offset=e}prevCodePoint(){const e=RCe(this._str,this._offset);return this._offset-=e>=65536?2:1,e}nextCodePoint(){const e=gR(this._str,this._len,this._offset);return this._offset+=e>=65536?2:1,e}eol(){return this._offset>=this._len}}class pR{get offset(){return this._iterator.offset}constructor(e,t=0){this._iterator=new WV(e,t)}nextGraphemeLength(){const e=Ep.getInstance(),t=this._iterator,i=t.offset;let n=e.getGraphemeBreakType(t.nextCodePoint());for(;!t.eol();){const s=t.offset,r=e.getGraphemeBreakType(t.nextCodePoint());if(vY(n,r)){t.setOffset(s);break}n=r}return t.offset-i}prevGraphemeLength(){const e=Ep.getInstance(),t=this._iterator,i=t.offset;let n=e.getGraphemeBreakType(t.prevCodePoint());for(;t.offset>0;){const s=t.offset,r=e.getGraphemeBreakType(t.prevCodePoint());if(vY(r,n)){t.setOffset(s);break}n=r}return i-t.offset}eol(){return this._iterator.eol()}}function VV(o,e){return new pR(o,e).nextGraphemeLength()}function fie(o,e){return new pR(o,e).prevGraphemeLength()}function MCe(o,e){e>0&&Ev(o.charCodeAt(e))&&e--;const t=e+VV(o,e);return[t-fie(o,t),t]}let V5;function ACe(){return/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/}function i1(o){return V5||(V5=ACe()),V5.test(o)}const PCe=/^[\t\n\r\x20-\x7E]*$/;function PD(o){return PCe.test(o)}const gie=/[\u2028\u2029]/;function pie(o){return gie.test(o)}function lm(o){return o>=11904&&o<=55215||o>=63744&&o<=64255||o>=65281&&o<=65374}function HV(o){return o>=127462&&o<=127487||o===8986||o===8987||o===9200||o===9203||o>=9728&&o<=10175||o===11088||o===11093||o>=127744&&o<=128591||o>=128640&&o<=128764||o>=128992&&o<=129008||o>=129280&&o<=129535||o>=129648&&o<=129782}const OCe="\uFEFF";function zV(o){return!!(o&&o.length>0&&o.charCodeAt(0)===65279)}function FCe(o,e=!1){return o?(e&&(o=o.replace(/\\./g,"")),o.toLowerCase()!==o):!1}function mie(o){return o=o%(2*26),o<26?String.fromCharCode(97+o):String.fromCharCode(65+o-26)}function vY(o,e){return o===0?e!==5&&e!==7:o===2&&e===3?!1:o===4||o===2||o===3||e===4||e===2||e===3?!0:!(o===8&&(e===8||e===9||e===11||e===12)||(o===11||o===9)&&(e===9||e===10)||(o===12||o===10)&&e===10||e===5||e===13||e===7||o===1||o===13&&e===14||o===6&&e===6)}class Ep{static getInstance(){return Ep._INSTANCE||(Ep._INSTANCE=new Ep),Ep._INSTANCE}constructor(){this._data=BCe()}getGraphemeBreakType(e){if(e<32)return e===10?3:e===13?2:4;if(e<127)return 0;const t=this._data,i=t.length/3;let n=1;for(;n<=i;)if(e<t[3*n])n=2*n;else if(e>t[3*n+1])n=2*n+1;else return t[3*n+2];return 0}}Ep._INSTANCE=null;function BCe(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}function WCe(o,e){if(o===0)return 0;const t=VCe(o,e);if(t!==void 0)return t;const i=new WV(e,o);return i.prevCodePoint(),i.offset}function VCe(o,e){const t=new WV(e,o);let i=t.prevCodePoint();for(;HCe(i)||i===65039||i===8419;){if(t.offset===0)return;i=t.prevCodePoint()}if(!HV(i))return;let n=t.offset;return n>0&&t.prevCodePoint()===8205&&(n=t.offset),n}function HCe(o){return 127995<=o&&o<=127999}const _ie="";class Iv{static getInstance(e){return t1.cache.get(Array.from(e))}static getLocales(){return t1._locales.value}constructor(e){this.confusableDictionary=e}isAmbiguous(e){return this.confusableDictionary.has(e)}getPrimaryConfusable(e){return this.confusableDictionary.get(e)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}}t1=Iv;Iv.ambiguousCharacterData=new tu(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}'));Iv.cache=new LCe(o=>{function e(c){const u=new Map;for(let f=0;f<c.length;f+=2)u.set(c[f],c[f+1]);return u}function t(c,u){const f=new Map(c);for(const[g,p]of u)f.set(g,p);return f}function i(c,u){if(!c)return u;const f=new Map;for(const[g,p]of c)u.has(g)&&f.set(g,p);return f}const n=t1.ambiguousCharacterData.value;let s=o.filter(c=>!c.startsWith("_")&&c in n);s.length===0&&(s=["_default"]);let r;for(const c of s){const u=e(n[c]);r=i(r,u)}const a=e(n._common),l=t(a,r);return new t1(l)});Iv._locales=new tu(()=>Object.keys(t1.ambiguousCharacterData.value).filter(o=>!o.startsWith("_")));class rh{static getRawData(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static getData(){return this._data||(this._data=new Set(rh.getRawData())),this._data}static isInvisibleCharacter(e){return rh.getData().has(e)}static get codePoints(){return rh.getData()}}rh._data=void 0;class Y7{constructor(){this.mapWindowIdToZoomFactor=new Map}getZoomFactor(e){var t;return(t=this.mapWindowIdToZoomFactor.get(this.getWindowId(e)))!==null&&t!==void 0?t:1}getWindowId(e){return e.vscodeWindowId}}Y7.INSTANCE=new Y7;function vie(o,e,t){typeof e=="string"&&(e=o.matchMedia(e)),e.addEventListener("change",t)}function zCe(o){return Y7.INSTANCE.getZoomFactor(o)}const j1=navigator.userAgent,uc=j1.indexOf("Firefox")>=0,fv=j1.indexOf("AppleWebKit")>=0,OD=j1.indexOf("Chrome")>=0,ig=!OD&&j1.indexOf("Safari")>=0,bie=!OD&&!ig&&fv;j1.indexOf("Electron/")>=0;const bY=j1.indexOf("Android")>=0;let mN=!1;if(typeof Hi.matchMedia=="function"){const o=Hi.matchMedia("(display-mode: standalone) or (display-mode: window-controls-overlay)"),e=Hi.matchMedia("(display-mode: fullscreen)");mN=o.matches,vie(Hi,o,({matches:t})=>{mN&&e.matches||(mN=t)})}function UCe(){return mN}const UV={clipboard:{writeText:Od||document.queryCommandSupported&&document.queryCommandSupported("copy")||!!(navigator&&navigator.clipboard&&navigator.clipboard.writeText),readText:Od||!!(navigator&&navigator.clipboard&&navigator.clipboard.readText)},keyboard:Od||UCe()?0:navigator.keyboard||ig?1:2,touch:"ontouchstart"in Hi||navigator.maxTouchPoints>0,pointerEvents:Hi.PointerEvent&&("ontouchstart"in Hi||navigator.maxTouchPoints>0)};function Z7(o,e){if(typeof o=="number"){if(o===0)return null;const t=(o&65535)>>>0,i=(o&4294901760)>>>16;return i!==0?new H5([KI(t,e),KI(i,e)]):new H5([KI(t,e)])}else{const t=[];for(let i=0;i<o.length;i++)t.push(KI(o[i],e));return new H5(t)}}function KI(o,e){const t=!!(o&2048),i=!!(o&256),n=e===2?i:t,s=!!(o&1024),r=!!(o&512),a=e===2?t:i,l=o&255;return new ng(n,s,r,a,l)}class ng{constructor(e,t,i,n,s){this.ctrlKey=e,this.shiftKey=t,this.altKey=i,this.metaKey=n,this.keyCode=s}equals(e){return e instanceof ng&&this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.keyCode===e.keyCode}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}}class H5{constructor(e){if(e.length===0)throw lc("chords");this.chords=e}}class $Ce{constructor(e,t,i,n,s,r){this.ctrlKey=e,this.shiftKey=t,this.altKey=i,this.metaKey=n,this.keyLabel=s,this.keyAriaLabel=r}}class jCe{}function KCe(o){if(o.charCode){const t=String.fromCharCode(o.charCode).toUpperCase();return Cf.fromString(t)}const e=o.keyCode;if(e===3)return 7;if(uc)switch(e){case 59:return 85;case 60:if(jr)return 97;break;case 61:return 86;case 107:return 109;case 109:return 111;case 173:return 88;case 224:if(Kt)return 57;break}else if(fv){if(Kt&&e===93)return 57;if(!Kt&&e===92)return 57}return Jte[e]||0}const qCe=Kt?256:2048,GCe=512,YCe=1024,ZCe=Kt?2048:256;class _n{constructor(e){var t;this._standardKeyboardEventBrand=!0;const i=e;this.browserEvent=i,this.target=i.target,this.ctrlKey=i.ctrlKey,this.shiftKey=i.shiftKey,this.altKey=i.altKey,this.metaKey=i.metaKey,this.altGraphKey=(t=i.getModifierState)===null||t===void 0?void 0:t.call(i,"AltGraph"),this.keyCode=KCe(i),this.code=i.code,this.ctrlKey=this.ctrlKey||this.keyCode===5,this.altKey=this.altKey||this.keyCode===6,this.shiftKey=this.shiftKey||this.keyCode===4,this.metaKey=this.metaKey||this.keyCode===57,this._asKeybinding=this._computeKeybinding(),this._asKeyCodeChord=this._computeKeyCodeChord()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeyCodeChord(){return this._asKeyCodeChord}equals(e){return this._asKeybinding===e}_computeKeybinding(){let e=0;this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode);let t=0;return this.ctrlKey&&(t|=qCe),this.altKey&&(t|=GCe),this.shiftKey&&(t|=YCe),this.metaKey&&(t|=ZCe),t|=e,t}_computeKeyCodeChord(){let e=0;return this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode),new ng(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,e)}}const CY=new WeakMap;function QCe(o){if(!o.parent||o.parent===o)return null;try{const e=o.location,t=o.parent.location;if(e.origin!=="null"&&t.origin!=="null"&&e.origin!==t.origin)return null}catch{return null}return o.parent}class XCe{static getSameOriginWindowChain(e){let t=CY.get(e);if(!t){t=[],CY.set(e,t);let i=e,n;do n=QCe(i),n?t.push({window:new WeakRef(i),iframeElement:i.frameElement||null}):t.push({window:new WeakRef(i),iframeElement:null}),i=n;while(i)}return t.slice(0)}static getPositionOfChildWindowRelativeToAncestorWindow(e,t){var i,n;if(!t||e===t)return{top:0,left:0};let s=0,r=0;const a=this.getSameOriginWindowChain(e);for(const l of a){const c=l.window.deref();if(s+=(i=c==null?void 0:c.scrollY)!==null&&i!==void 0?i:0,r+=(n=c==null?void 0:c.scrollX)!==null&&n!==void 0?n:0,c===t||!l.iframeElement)break;const u=l.iframeElement.getBoundingClientRect();s+=u.top,r+=u.left}return{top:s,left:r}}}class Wc{constructor(e,t){this.timestamp=Date.now(),this.browserEvent=t,this.leftButton=t.button===0,this.middleButton=t.button===1,this.rightButton=t.button===2,this.buttons=t.buttons,this.target=t.target,this.detail=t.detail||1,t.type==="dblclick"&&(this.detail=2),this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,typeof t.pageX=="number"?(this.posx=t.pageX,this.posy=t.pageY):(this.posx=t.clientX+this.target.ownerDocument.body.scrollLeft+this.target.ownerDocument.documentElement.scrollLeft,this.posy=t.clientY+this.target.ownerDocument.body.scrollTop+this.target.ownerDocument.documentElement.scrollTop);const i=XCe.getPositionOfChildWindowRelativeToAncestorWindow(e,t.view);this.posx-=i.left,this.posy-=i.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}}class Tv{constructor(e,t=0,i=0){var n;this.browserEvent=e||null,this.target=e?e.target||e.targetNode||e.srcElement:null,this.deltaY=i,this.deltaX=t;let s=!1;if(OD){const r=navigator.userAgent.match(/Chrome\/(\d+)/);s=(r?parseInt(r[1]):123)<=122}if(e){const r=e,a=e,l=((n=e.view)===null||n===void 0?void 0:n.devicePixelRatio)||1;if(typeof r.wheelDeltaY<"u")s?this.deltaY=r.wheelDeltaY/(120*l):this.deltaY=r.wheelDeltaY/120;else if(typeof a.VERTICAL_AXIS<"u"&&a.axis===a.VERTICAL_AXIS)this.deltaY=-a.detail/3;else if(e.type==="wheel"){const c=e;c.deltaMode===c.DOM_DELTA_LINE?uc&&!Kt?this.deltaY=-e.deltaY/3:this.deltaY=-e.deltaY:this.deltaY=-e.deltaY/40}if(typeof r.wheelDeltaX<"u")ig&&Mo?this.deltaX=-(r.wheelDeltaX/120):s?this.deltaX=r.wheelDeltaX/(120*l):this.deltaX=r.wheelDeltaX/120;else if(typeof a.HORIZONTAL_AXIS<"u"&&a.axis===a.HORIZONTAL_AXIS)this.deltaX=-e.detail/3;else if(e.type==="wheel"){const c=e;c.deltaMode===c.DOM_DELTA_LINE?uc&&!Kt?this.deltaX=-e.deltaX/3:this.deltaX=-e.deltaX:this.deltaX=-e.deltaX/40}this.deltaY===0&&this.deltaX===0&&e.wheelDelta&&(s?this.deltaY=e.wheelDelta/(120*l):this.deltaY=e.wheelDelta/120)}}preventDefault(){var e;(e=this.browserEvent)===null||e===void 0||e.preventDefault()}stopPropagation(){var e;(e=this.browserEvent)===null||e===void 0||e.stopPropagation()}}const Cie=Symbol("MicrotaskDelay");function Q7(o){return!!o&&typeof o.then=="function"}function Qs(o){const e=new os,t=o(e.token),i=new Promise((n,s)=>{const r=e.token.onCancellationRequested(()=>{r.dispose(),s(new hg)});Promise.resolve(t).then(a=>{r.dispose(),e.dispose(),n(a)},a=>{r.dispose(),e.dispose(),s(a)})});return new class{cancel(){e.cancel(),e.dispose()}then(n,s){return i.then(n,s)}catch(n){return this.then(void 0,n)}finally(n){return i.finally(n)}}}function FD(o,e,t){return new Promise((i,n)=>{const s=e.onCancellationRequested(()=>{s.dispose(),i(t)});o.then(i,n).finally(()=>s.dispose())})}class JCe{constructor(){this.isDisposed=!1,this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(e){if(this.isDisposed)return Promise.reject(new Error("Throttler is disposed"));if(this.activePromise){if(this.queuedPromiseFactory=e,!this.queuedPromise){const t=()=>{if(this.queuedPromise=null,this.isDisposed)return;const i=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,i};this.queuedPromise=new Promise(i=>{this.activePromise.then(t,t).then(i)})}return new Promise((t,i)=>{this.queuedPromise.then(t,i)})}return this.activePromise=e(),new Promise((t,i)=>{this.activePromise.then(n=>{this.activePromise=null,t(n)},n=>{this.activePromise=null,i(n)})})}dispose(){this.isDisposed=!0}}const e1e=(o,e)=>{let t=!0;const i=setTimeout(()=>{t=!1,e()},o);return{isTriggered:()=>t,dispose:()=>{clearTimeout(i),t=!1}}},t1e=o=>{let e=!0;return queueMicrotask(()=>{e&&(e=!1,o())}),{isTriggered:()=>e,dispose:()=>{e=!1}}};class Kc{constructor(e){this.defaultDelay=e,this.deferred=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(e,t=this.defaultDelay){this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((n,s)=>{this.doResolve=n,this.doReject=s}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const n=this.task;return this.task=null,n()}}));const i=()=>{var n;this.deferred=null,(n=this.doResolve)===null||n===void 0||n.call(this,null)};return this.deferred=t===Cie?t1e(i):e1e(t,i),this.completionPromise}isTriggered(){var e;return!!(!((e=this.deferred)===null||e===void 0)&&e.isTriggered())}cancel(){var e;this.cancelTimeout(),this.completionPromise&&((e=this.doReject)===null||e===void 0||e.call(this,new hg),this.completionPromise=null)}cancelTimeout(){var e;(e=this.deferred)===null||e===void 0||e.dispose(),this.deferred=null}dispose(){this.cancel()}}class wie{constructor(e){this.delayer=new Kc(e),this.throttler=new JCe}trigger(e,t){return this.delayer.trigger(()=>this.throttler.queue(e),t)}cancel(){this.delayer.cancel()}dispose(){this.delayer.dispose(),this.throttler.dispose()}}function cm(o,e){return e?new Promise((t,i)=>{const n=setTimeout(()=>{s.dispose(),t()},o),s=e.onCancellationRequested(()=>{clearTimeout(n),s.dispose(),i(new hg)})}):Qs(t=>cm(o,t))}function dm(o,e=0,t){const i=setTimeout(()=>{o(),t&&n.dispose()},e),n=lt(()=>{clearTimeout(i),t==null||t.deleteAndLeak(n)});return t==null||t.add(n),n}function $V(o,e=i=>!!i,t=null){let i=0;const n=o.length,s=()=>{if(i>=n)return Promise.resolve(t);const r=o[i++];return Promise.resolve(r()).then(l=>e(l)?Promise.resolve(l):s())};return s()}class Yc{constructor(e,t){this._token=-1,typeof e=="function"&&typeof t=="number"&&this.setIfNotSet(e,t)}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},t)}setIfNotSet(e,t){this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},t))}}class jV{constructor(){this.disposable=void 0}cancel(){var e;(e=this.disposable)===null||e===void 0||e.dispose(),this.disposable=void 0}cancelAndSet(e,t,i=globalThis){this.cancel();const n=i.setInterval(()=>{e()},t);this.disposable=lt(()=>{i.clearInterval(n),this.disposable=void 0})}dispose(){this.cancel()}}class Ui{constructor(e,t){this.timeoutToken=-1,this.runner=e,this.timeout=t,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(e=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,e)}get delay(){return this.timeout}set delay(e){this.timeout=e}isScheduled(){return this.timeoutToken!==-1}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){var e;(e=this.runner)===null||e===void 0||e.call(this)}}let yie,hL;(function(){typeof globalThis.requestIdleCallback!="function"||typeof globalThis.cancelIdleCallback!="function"?hL=(o,e)=>{zte(()=>{if(t)return;const i=Date.now()+15;e(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,i-Date.now())}}))});let t=!1;return{dispose(){t||(t=!0)}}}:hL=(o,e,t)=>{const i=o.requestIdleCallback(e,typeof t=="number"?{timeout:t}:void 0);let n=!1;return{dispose(){n||(n=!0,o.cancelIdleCallback(i))}}},yie=o=>hL(globalThis,o)})();class Sie{constructor(e,t){this._didRun=!1,this._executor=()=>{try{this._value=t()}catch(i){this._error=i}finally{this._didRun=!0}},this._handle=hL(e,()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}}class i1e extends Sie{constructor(e){super(globalThis,e)}}class BD{get isRejected(){var e;return((e=this.outcome)===null||e===void 0?void 0:e.outcome)===1}get isSettled(){return!!this.outcome}constructor(){this.p=new Promise((e,t)=>{this.completeCallback=e,this.errorCallback=t})}complete(e){return new Promise(t=>{this.completeCallback(e),this.outcome={outcome:0,value:e},t()})}error(e){return new Promise(t=>{this.errorCallback(e),this.outcome={outcome:1,value:e},t()})}cancel(){return this.error(new hg)}}var X7;(function(o){async function e(i){let n;const s=await Promise.all(i.map(r=>r.then(a=>a,a=>{n||(n=a)})));if(typeof n<"u")throw n;return s}o.settled=e;function t(i){return new Promise(async(n,s)=>{try{await i(n,s)}catch(r){s(r)}})}o.withAsyncBody=t})(X7||(X7={}));class ks{static fromArray(e){return new ks(t=>{t.emitMany(e)})}static fromPromise(e){return new ks(async t=>{t.emitMany(await e)})}static fromPromises(e){return new ks(async t=>{await Promise.all(e.map(async i=>t.emitOne(await i)))})}static merge(e){return new ks(async t=>{await Promise.all(e.map(async i=>{for await(const n of i)t.emitOne(n)}))})}constructor(e){this._state=0,this._results=[],this._error=null,this._onStateChanged=new Y,queueMicrotask(async()=>{const t={emitOne:i=>this.emitOne(i),emitMany:i=>this.emitMany(i),reject:i=>this.reject(i)};try{await Promise.resolve(e(t)),this.resolve()}catch(i){this.reject(i)}finally{t.emitOne=void 0,t.emitMany=void 0,t.reject=void 0}})}[Symbol.asyncIterator](){let e=0;return{next:async()=>{do{if(this._state===2)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(this._state===1)return{done:!0,value:void 0};await Ie.toPromise(this._onStateChanged.event)}while(!0)}}}static map(e,t){return new ks(async i=>{for await(const n of e)i.emitOne(t(n))})}map(e){return ks.map(this,e)}static filter(e,t){return new ks(async i=>{for await(const n of e)t(n)&&i.emitOne(n)})}filter(e){return ks.filter(this,e)}static coalesce(e){return ks.filter(e,t=>!!t)}coalesce(){return ks.coalesce(this)}static async toPromise(e){const t=[];for await(const i of e)t.push(i);return t}toPromise(){return ks.toPromise(this)}emitOne(e){this._state===0&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){this._state===0&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(e){this._state===0&&(this._state=2,this._error=e,this._onStateChanged.fire())}}ks.EMPTY=ks.fromArray([]);class n1e extends ks{constructor(e,t){super(t),this._source=e}cancel(){this._source.cancel()}}function s1e(o){const e=new os,t=o(e.token);return new n1e(e,async i=>{const n=e.token.onCancellationRequested(()=>{n.dispose(),e.dispose(),i.reject(new hg)});try{for await(const s of t){if(e.token.isCancellationRequested)return;i.emitOne(s)}n.dispose(),e.dispose()}catch(s){n.dispose(),e.dispose(),i.reject(s)}})}/*! @license DOMPurify 3.0.5 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.0.5/LICENSE */const{entries:Lie,setPrototypeOf:wY,isFrozen:o1e,getPrototypeOf:r1e,getOwnPropertyDescriptor:a1e}=Object;let{freeze:$a,seal:jd,create:l1e}=Object,{apply:J7,construct:e9}=typeof Reflect<"u"&&Reflect;J7||(J7=function(e,t,i){return e.apply(t,i)});$a||($a=function(e){return e});jd||(jd=function(e){return e});e9||(e9=function(e,t){return new e(...t)});const c1e=qc(Array.prototype.forEach),yY=qc(Array.prototype.pop),aS=qc(Array.prototype.push),_N=qc(String.prototype.toLowerCase),z5=qc(String.prototype.toString),d1e=qc(String.prototype.match),fd=qc(String.prototype.replace),u1e=qc(String.prototype.indexOf),h1e=qc(String.prototype.trim),ql=qc(RegExp.prototype.test),lS=f1e(TypeError);function qc(o){return function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return J7(o,e,i)}}function f1e(o){return function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return e9(o,t)}}function Vi(o,e,t){var i;t=(i=t)!==null&&i!==void 0?i:_N,wY&&wY(o,null);let n=e.length;for(;n--;){let s=e[n];if(typeof s=="string"){const r=t(s);r!==s&&(o1e(e)||(e[n]=r),s=r)}o[s]=!0}return o}function y0(o){const e=l1e(null);for(const[t,i]of Lie(o))e[t]=i;return e}function qI(o,e){for(;o!==null;){const i=a1e(o,e);if(i){if(i.get)return qc(i.get);if(typeof i.value=="function")return qc(i.value)}o=r1e(o)}function t(i){return console.warn("fallback value for",i),null}return t}const SY=$a(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),U5=$a(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),$5=$a(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),g1e=$a(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),j5=$a(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),p1e=$a(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),LY=$a(["#text"]),xY=$a(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),K5=$a(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),DY=$a(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),GI=$a(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),m1e=jd(/\{\{[\w\W]*|[\w\W]*\}\}/gm),_1e=jd(/<%[\w\W]*|[\w\W]*%>/gm),v1e=jd(/\${[\w\W]*}/gm),b1e=jd(/^data-[\-\w.\u00B7-\uFFFF]/),C1e=jd(/^aria-[\-\w]+$/),xie=jd(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),w1e=jd(/^(?:\w+script|data):/i),y1e=jd(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Die=jd(/^html$/i);var kY=Object.freeze({__proto__:null,MUSTACHE_EXPR:m1e,ERB_EXPR:_1e,TMPLIT_EXPR:v1e,DATA_ATTR:b1e,ARIA_ATTR:C1e,IS_ALLOWED_URI:xie,IS_SCRIPT_OR_DATA:w1e,ATTR_WHITESPACE:y1e,DOCTYPE_NAME:Die});const S1e=()=>typeof window>"u"?null:window,L1e=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let i=null;const n="data-tt-policy-suffix";t&&t.hasAttribute(n)&&(i=t.getAttribute(n));const s="dompurify"+(i?"#"+i:"");try{return e.createPolicy(s,{createHTML(r){return r},createScriptURL(r){return r}})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}};function kie(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:S1e();const e=Je=>kie(Je);if(e.version="3.0.5",e.removed=[],!o||!o.document||o.document.nodeType!==9)return e.isSupported=!1,e;const t=o.document,i=t.currentScript;let{document:n}=o;const{DocumentFragment:s,HTMLTemplateElement:r,Node:a,Element:l,NodeFilter:c,NamedNodeMap:u=o.NamedNodeMap||o.MozNamedAttrMap,HTMLFormElement:f,DOMParser:g,trustedTypes:p}=o,_=l.prototype,b=qI(_,"cloneNode"),y=qI(_,"nextSibling"),S=qI(_,"childNodes"),L=qI(_,"parentNode");if(typeof r=="function"){const Je=n.createElement("template");Je.content&&Je.content.ownerDocument&&(n=Je.content.ownerDocument)}let x,D="";const{implementation:E,createNodeIterator:N,createDocumentFragment:M,getElementsByTagName:F}=n,{importNode:H}=t;let Q={};e.isSupported=typeof Lie=="function"&&typeof L=="function"&&E&&E.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:K,ERB_EXPR:j,TMPLIT_EXPR:q,DATA_ATTR:se,ARIA_ATTR:fe,IS_SCRIPT_OR_DATA:Ae,ATTR_WHITESPACE:Ne}=kY;let{IS_ALLOWED_URI:Le}=kY,be=null;const ze=Vi({},[...SY,...U5,...$5,...j5,...LY]);let it=null;const qe=Vi({},[...xY,...K5,...DY,...GI]);let Fe=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Li=null,Bn=null,tn=!0,Qt=!0,nn=!1,un=!0,sn=!1,Ct=!1,Ss=!1,Dn=!1,Wn=!1,rs=!1,Ri=!1,Vn=!0,Jo=!1;const Xr="user-content-";let ve=!0,de=!1,ae={},z=null;const $=Vi({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ee=null;const X=Vi({},["audio","video","img","source","image","track"]);let pe=null;const He=Vi({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ot="http://www.w3.org/1998/Math/MathML",dt="http://www.w3.org/2000/svg",Re="http://www.w3.org/1999/xhtml";let Ue=Re,wt=!1,Tt=null;const et=Vi({},[ot,dt,Re],z5);let mi;const ui=["application/xhtml+xml","text/html"],ps="text/html";let It,ji=null;const kn=n.createElement("form"),En=function(re){return re instanceof RegExp||re instanceof Function},Js=function(re){if(!(ji&&ji===re)){if((!re||typeof re!="object")&&(re={}),re=y0(re),mi=ui.indexOf(re.PARSER_MEDIA_TYPE)===-1?mi=ps:mi=re.PARSER_MEDIA_TYPE,It=mi==="application/xhtml+xml"?z5:_N,be="ALLOWED_TAGS"in re?Vi({},re.ALLOWED_TAGS,It):ze,it="ALLOWED_ATTR"in re?Vi({},re.ALLOWED_ATTR,It):qe,Tt="ALLOWED_NAMESPACES"in re?Vi({},re.ALLOWED_NAMESPACES,z5):et,pe="ADD_URI_SAFE_ATTR"in re?Vi(y0(He),re.ADD_URI_SAFE_ATTR,It):He,ee="ADD_DATA_URI_TAGS"in re?Vi(y0(X),re.ADD_DATA_URI_TAGS,It):X,z="FORBID_CONTENTS"in re?Vi({},re.FORBID_CONTENTS,It):$,Li="FORBID_TAGS"in re?Vi({},re.FORBID_TAGS,It):{},Bn="FORBID_ATTR"in re?Vi({},re.FORBID_ATTR,It):{},ae="USE_PROFILES"in re?re.USE_PROFILES:!1,tn=re.ALLOW_ARIA_ATTR!==!1,Qt=re.ALLOW_DATA_ATTR!==!1,nn=re.ALLOW_UNKNOWN_PROTOCOLS||!1,un=re.ALLOW_SELF_CLOSE_IN_ATTR!==!1,sn=re.SAFE_FOR_TEMPLATES||!1,Ct=re.WHOLE_DOCUMENT||!1,Wn=re.RETURN_DOM||!1,rs=re.RETURN_DOM_FRAGMENT||!1,Ri=re.RETURN_TRUSTED_TYPE||!1,Dn=re.FORCE_BODY||!1,Vn=re.SANITIZE_DOM!==!1,Jo=re.SANITIZE_NAMED_PROPS||!1,ve=re.KEEP_CONTENT!==!1,de=re.IN_PLACE||!1,Le=re.ALLOWED_URI_REGEXP||xie,Ue=re.NAMESPACE||Re,Fe=re.CUSTOM_ELEMENT_HANDLING||{},re.CUSTOM_ELEMENT_HANDLING&&En(re.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Fe.tagNameCheck=re.CUSTOM_ELEMENT_HANDLING.tagNameCheck),re.CUSTOM_ELEMENT_HANDLING&&En(re.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Fe.attributeNameCheck=re.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),re.CUSTOM_ELEMENT_HANDLING&&typeof re.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Fe.allowCustomizedBuiltInElements=re.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),sn&&(Qt=!1),rs&&(Wn=!0),ae&&(be=Vi({},[...LY]),it=[],ae.html===!0&&(Vi(be,SY),Vi(it,xY)),ae.svg===!0&&(Vi(be,U5),Vi(it,K5),Vi(it,GI)),ae.svgFilters===!0&&(Vi(be,$5),Vi(it,K5),Vi(it,GI)),ae.mathMl===!0&&(Vi(be,j5),Vi(it,DY),Vi(it,GI))),re.ADD_TAGS&&(be===ze&&(be=y0(be)),Vi(be,re.ADD_TAGS,It)),re.ADD_ATTR&&(it===qe&&(it=y0(it)),Vi(it,re.ADD_ATTR,It)),re.ADD_URI_SAFE_ATTR&&Vi(pe,re.ADD_URI_SAFE_ATTR,It),re.FORBID_CONTENTS&&(z===$&&(z=y0(z)),Vi(z,re.FORBID_CONTENTS,It)),ve&&(be["#text"]=!0),Ct&&Vi(be,["html","head","body"]),be.table&&(Vi(be,["tbody"]),delete Li.tbody),re.TRUSTED_TYPES_POLICY){if(typeof re.TRUSTED_TYPES_POLICY.createHTML!="function")throw lS('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof re.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw lS('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');x=re.TRUSTED_TYPES_POLICY,D=x.createHTML("")}else x===void 0&&(x=L1e(p,i)),x!==null&&typeof D=="string"&&(D=x.createHTML(""));$a&&$a(re),ji=re}},Co=Vi({},["mi","mo","mn","ms","mtext"]),Sa=Vi({},["foreignobject","desc","title","annotation-xml"]),Za=Vi({},["title","style","font","a","script"]),yc=Vi({},U5);Vi(yc,$5),Vi(yc,g1e);const La=Vi({},j5);Vi(La,p1e);const Xc=function(re){let Pe=L(re);(!Pe||!Pe.tagName)&&(Pe={namespaceURI:Ue,tagName:"template"});const nt=_N(re.tagName),xi=_N(Pe.tagName);return Tt[re.namespaceURI]?re.namespaceURI===dt?Pe.namespaceURI===Re?nt==="svg":Pe.namespaceURI===ot?nt==="svg"&&(xi==="annotation-xml"||Co[xi]):!!yc[nt]:re.namespaceURI===ot?Pe.namespaceURI===Re?nt==="math":Pe.namespaceURI===dt?nt==="math"&&Sa[xi]:!!La[nt]:re.namespaceURI===Re?Pe.namespaceURI===dt&&!Sa[xi]||Pe.namespaceURI===ot&&!Co[xi]?!1:!La[nt]&&(Za[nt]||!yc[nt]):!!(mi==="application/xhtml+xml"&&Tt[re.namespaceURI]):!1},wo=function(re){aS(e.removed,{element:re});try{re.parentNode.removeChild(re)}catch{re.remove()}},Qa=function(re,Pe){try{aS(e.removed,{attribute:Pe.getAttributeNode(re),from:Pe})}catch{aS(e.removed,{attribute:null,from:Pe})}if(Pe.removeAttribute(re),re==="is"&&!it[re])if(Wn||rs)try{wo(Pe)}catch{}else try{Pe.setAttribute(re,"")}catch{}},xa=function(re){let Pe,nt;if(Dn)re="<remove></remove>"+re;else{const Bs=d1e(re,/^[\r\n\t ]+/);nt=Bs&&Bs[0]}mi==="application/xhtml+xml"&&Ue===Re&&(re='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+re+"</body></html>");const xi=x?x.createHTML(re):re;if(Ue===Re)try{Pe=new g().parseFromString(xi,mi)}catch{}if(!Pe||!Pe.documentElement){Pe=E.createDocument(Ue,"template",null);try{Pe.documentElement.innerHTML=wt?D:xi}catch{}}const jn=Pe.body||Pe.documentElement;return re&&nt&&jn.insertBefore(n.createTextNode(nt),jn.childNodes[0]||null),Ue===Re?F.call(Pe,Ct?"html":"body")[0]:Ct?Pe.documentElement:jn},Da=function(re){return N.call(re.ownerDocument||re,re,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT,null,!1)},Pl=function(re){return re instanceof f&&(typeof re.nodeName!="string"||typeof re.textContent!="string"||typeof re.removeChild!="function"||!(re.attributes instanceof u)||typeof re.removeAttribute!="function"||typeof re.setAttribute!="function"||typeof re.namespaceURI!="string"||typeof re.insertBefore!="function"||typeof re.hasChildNodes!="function")},te=function(re){return typeof a=="object"?re instanceof a:re&&typeof re=="object"&&typeof re.nodeType=="number"&&typeof re.nodeName=="string"},Ye=function(re,Pe,nt){Q[re]&&c1e(Q[re],xi=>{xi.call(e,Pe,nt,ji)})},_t=function(re){let Pe;if(Ye("beforeSanitizeElements",re,null),Pl(re))return wo(re),!0;const nt=It(re.nodeName);if(Ye("uponSanitizeElement",re,{tagName:nt,allowedTags:be}),re.hasChildNodes()&&!te(re.firstElementChild)&&(!te(re.content)||!te(re.content.firstElementChild))&&ql(/<[/\w]/g,re.innerHTML)&&ql(/<[/\w]/g,re.textContent))return wo(re),!0;if(!be[nt]||Li[nt]){if(!Li[nt]&&Wi(nt)&&(Fe.tagNameCheck instanceof RegExp&&ql(Fe.tagNameCheck,nt)||Fe.tagNameCheck instanceof Function&&Fe.tagNameCheck(nt)))return!1;if(ve&&!z[nt]){const xi=L(re)||re.parentNode,jn=S(re)||re.childNodes;if(jn&&xi){const Bs=jn.length;for(let Mi=Bs-1;Mi>=0;--Mi)xi.insertBefore(b(jn[Mi],!0),y(re))}}return wo(re),!0}return re instanceof l&&!Xc(re)||(nt==="noscript"||nt==="noembed"||nt==="noframes")&&ql(/<\/no(script|embed|frames)/i,re.innerHTML)?(wo(re),!0):(sn&&re.nodeType===3&&(Pe=re.textContent,Pe=fd(Pe,K," "),Pe=fd(Pe,j," "),Pe=fd(Pe,q," "),re.textContent!==Pe&&(aS(e.removed,{element:re.cloneNode()}),re.textContent=Pe)),Ye("afterSanitizeElements",re,null),!1)},qt=function(re,Pe,nt){if(Vn&&(Pe==="id"||Pe==="name")&&(nt in n||nt in kn))return!1;if(!(Qt&&!Bn[Pe]&&ql(se,Pe))){if(!(tn&&ql(fe,Pe))){if(!it[Pe]||Bn[Pe]){if(!(Wi(re)&&(Fe.tagNameCheck instanceof RegExp&&ql(Fe.tagNameCheck,re)||Fe.tagNameCheck instanceof Function&&Fe.tagNameCheck(re))&&(Fe.attributeNameCheck instanceof RegExp&&ql(Fe.attributeNameCheck,Pe)||Fe.attributeNameCheck instanceof Function&&Fe.attributeNameCheck(Pe))||Pe==="is"&&Fe.allowCustomizedBuiltInElements&&(Fe.tagNameCheck instanceof RegExp&&ql(Fe.tagNameCheck,nt)||Fe.tagNameCheck instanceof Function&&Fe.tagNameCheck(nt))))return!1}else if(!pe[Pe]){if(!ql(Le,fd(nt,Ne,""))){if(!((Pe==="src"||Pe==="xlink:href"||Pe==="href")&&re!=="script"&&u1e(nt,"data:")===0&&ee[re])){if(!(nn&&!ql(Ae,fd(nt,Ne,"")))){if(nt)return!1}}}}}}return!0},Wi=function(re){return re.indexOf("-")>0},ti=function(re){let Pe,nt,xi,jn;Ye("beforeSanitizeAttributes",re,null);const{attributes:Bs}=re;if(!Bs)return;const Mi={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:it};for(jn=Bs.length;jn--;){Pe=Bs[jn];const{name:er,namespaceURI:au}=Pe;if(nt=er==="value"?Pe.value:h1e(Pe.value),xi=It(er),Mi.attrName=xi,Mi.attrValue=nt,Mi.keepAttr=!0,Mi.forceKeepAttr=void 0,Ye("uponSanitizeAttribute",re,Mi),nt=Mi.attrValue,Mi.forceKeepAttr||(Qa(er,re),!Mi.keepAttr))continue;if(!un&&ql(/\/>/i,nt)){Qa(er,re);continue}sn&&(nt=fd(nt,K," "),nt=fd(nt,j," "),nt=fd(nt,q," "));const wg=It(re.nodeName);if(qt(wg,xi,nt)){if(Jo&&(xi==="id"||xi==="name")&&(Qa(er,re),nt=Xr+nt),x&&typeof p=="object"&&typeof p.getAttributeType=="function"&&!au)switch(p.getAttributeType(wg,xi)){case"TrustedHTML":{nt=x.createHTML(nt);break}case"TrustedScriptURL":{nt=x.createScriptURL(nt);break}}try{au?re.setAttributeNS(au,er,nt):re.setAttribute(er,nt),yY(e.removed)}catch{}}}Ye("afterSanitizeAttributes",re,null)},Ti=function Je(re){let Pe;const nt=Da(re);for(Ye("beforeSanitizeShadowDOM",re,null);Pe=nt.nextNode();)Ye("uponSanitizeShadowNode",Pe,null),!_t(Pe)&&(Pe.content instanceof s&&Je(Pe.content),ti(Pe));Ye("afterSanitizeShadowDOM",re,null)};return e.sanitize=function(Je){let re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Pe,nt,xi,jn;if(wt=!Je,wt&&(Je="<!-->"),typeof Je!="string"&&!te(Je))if(typeof Je.toString=="function"){if(Je=Je.toString(),typeof Je!="string")throw lS("dirty is not a string, aborting")}else throw lS("toString is not a function");if(!e.isSupported)return Je;if(Ss||Js(re),e.removed=[],typeof Je=="string"&&(de=!1),de){if(Je.nodeName){const er=It(Je.nodeName);if(!be[er]||Li[er])throw lS("root node is forbidden and cannot be sanitized in-place")}}else if(Je instanceof a)Pe=xa("<!---->"),nt=Pe.ownerDocument.importNode(Je,!0),nt.nodeType===1&&nt.nodeName==="BODY"||nt.nodeName==="HTML"?Pe=nt:Pe.appendChild(nt);else{if(!Wn&&!sn&&!Ct&&Je.indexOf("<")===-1)return x&&Ri?x.createHTML(Je):Je;if(Pe=xa(Je),!Pe)return Wn?null:Ri?D:""}Pe&&Dn&&wo(Pe.firstChild);const Bs=Da(de?Je:Pe);for(;xi=Bs.nextNode();)_t(xi)||(xi.content instanceof s&&Ti(xi.content),ti(xi));if(de)return Je;if(Wn){if(rs)for(jn=M.call(Pe.ownerDocument);Pe.firstChild;)jn.appendChild(Pe.firstChild);else jn=Pe;return(it.shadowroot||it.shadowrootmode)&&(jn=H.call(t,jn,!0)),jn}let Mi=Ct?Pe.outerHTML:Pe.innerHTML;return Ct&&be["!doctype"]&&Pe.ownerDocument&&Pe.ownerDocument.doctype&&Pe.ownerDocument.doctype.name&&ql(Die,Pe.ownerDocument.doctype.name)&&(Mi="<!DOCTYPE "+Pe.ownerDocument.doctype.name+`>
`+Mi),sn&&(Mi=fd(Mi,K," "),Mi=fd(Mi,j," "),Mi=fd(Mi,q," ")),x&&Ri?x.createHTML(Mi):Mi},e.setConfig=function(Je){Js(Je),Ss=!0},e.clearConfig=function(){ji=null,Ss=!1},e.isValidAttribute=function(Je,re,Pe){ji||Js({});const nt=It(Je),xi=It(re);return qt(nt,xi,Pe)},e.addHook=function(Je,re){typeof re=="function"&&(Q[Je]=Q[Je]||[],aS(Q[Je],re))},e.removeHook=function(Je){if(Q[Je])return yY(Q[Je])},e.removeHooks=function(Je){Q[Je]&&(Q[Je]=[])},e.removeAllHooks=function(){Q={}},e}var Lh=kie();Lh.version;Lh.isSupported;const Eie=Lh.sanitize;Lh.setConfig;Lh.clearConfig;Lh.isValidAttribute;const t9=Lh.addHook,Iie=Lh.removeHook;Lh.removeHooks;Lh.removeAllHooks;var Pt;(function(o){o.inMemory="inmemory",o.vscode="vscode",o.internal="private",o.walkThrough="walkThrough",o.walkThroughSnippet="walkThroughSnippet",o.http="http",o.https="https",o.file="file",o.mailto="mailto",o.untitled="untitled",o.data="data",o.command="command",o.vscodeRemote="vscode-remote",o.vscodeRemoteResource="vscode-remote-resource",o.vscodeManagedRemoteResource="vscode-managed-remote-resource",o.vscodeUserData="vscode-userdata",o.vscodeCustomEditor="vscode-custom-editor",o.vscodeNotebookCell="vscode-notebook-cell",o.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",o.vscodeNotebookCellOutput="vscode-notebook-cell-output",o.vscodeInteractiveInput="vscode-interactive-input",o.vscodeSettings="vscode-settings",o.vscodeWorkspaceTrust="vscode-workspace-trust",o.vscodeTerminal="vscode-terminal",o.vscodeChatCodeBlock="vscode-chat-code-block",o.vscodeChatSesssion="vscode-chat-editor",o.webviewPanel="webview-panel",o.vscodeWebview="vscode-webview",o.extension="extension",o.vscodeFileResource="vscode-file",o.tmp="tmp",o.vsls="vsls",o.vscodeSourceControl="vscode-scm",o.codeSetting="code-setting"})(Pt||(Pt={}));function KV(o,e){return gt.isUri(o)?Q0(o.scheme,e):FV(o,e+":")}function EY(o,...e){return e.some(t=>KV(o,t))}const x1e="tkn";class D1e{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null,this._serverRootPath="/"}setPreferredWebSchema(e){this._preferredWebSchema=e}get _remoteResourcesPath(){return Es.join(this._serverRootPath,Pt.vscodeRemoteResource)}rewrite(e){if(this._delegate)try{return this._delegate(e)}catch(a){return Nt(a),e}const t=e.authority;let i=this._hosts[t];i&&i.indexOf(":")!==-1&&i.indexOf("[")===-1&&(i=`[${i}]`);const n=this._ports[t],s=this._connectionTokens[t];let r=`path=${encodeURIComponent(e.path)}`;return typeof s=="string"&&(r+=`&${x1e}=${encodeURIComponent(s)}`),gt.from({scheme:Mm?this._preferredWebSchema:Pt.vscodeRemoteResource,authority:`${i}:${n}`,path:this._remoteResourcesPath,query:r})}}const Tie=new D1e,k1e="vscode-app";class tx{uriToBrowserUri(e){return e.scheme===Pt.vscodeRemote?Tie.rewrite(e):e.scheme===Pt.file&&(Od||Fbe===`${Pt.vscodeFileResource}://${tx.FALLBACK_AUTHORITY}`)?e.with({scheme:Pt.vscodeFileResource,authority:e.authority||tx.FALLBACK_AUTHORITY,query:null,fragment:null}):e}}tx.FALLBACK_AUTHORITY=k1e;const Nie=new tx;var IY;(function(o){const e=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);o.CoopAndCoep=Object.freeze(e.get("3"));const t="vscode-coi";function i(s){let r;typeof s=="string"?r=new URL(s).searchParams:s instanceof URL?r=s.searchParams:gt.isUri(s)&&(r=new URL(s.toString(!0)).searchParams);const a=r==null?void 0:r.get(t);if(a)return e.get(a)}o.getHeadersFromQuery=i;function n(s,r,a){if(!globalThis.crossOriginIsolated)return;const l=r&&a?"3":a?"2":"1";s instanceof URLSearchParams?s.set(t,l):s[t]=l}o.addSearchParam=n})(IY||(IY={}));function hA(o){return fA(o,0)}function fA(o,e){switch(typeof o){case"object":return o===null?kf(349,e):Array.isArray(o)?I1e(o,e):T1e(o,e);case"string":return qV(o,e);case"boolean":return E1e(o,e);case"number":return kf(o,e);case"undefined":return kf(937,e);default:return kf(617,e)}}function kf(o,e){return(e<<5)-e+o|0}function E1e(o,e){return kf(o?433:863,e)}function qV(o,e){e=kf(149417,e);for(let t=0,i=o.length;t<i;t++)e=kf(o.charCodeAt(t),e);return e}function I1e(o,e){return e=kf(104579,e),o.reduce((t,i)=>fA(i,t),e)}function T1e(o,e){return e=kf(181387,e),Object.keys(o).sort().reduce((t,i)=>(t=qV(i,t),fA(o[i],t)),e)}function q5(o,e,t=32){const i=t-e,n=~((1<<i)-1);return(o<<e|(n&o)>>>i)>>>0}function TY(o,e=0,t=o.byteLength,i=0){for(let n=0;n<t;n++)o[e+n]=i}function N1e(o,e,t="0"){for(;o.length<e;)o=t+o;return o}function cS(o,e=32){return o instanceof ArrayBuffer?Array.from(new Uint8Array(o)).map(t=>t.toString(16).padStart(2,"0")).join(""):N1e((o>>>0).toString(16),e/4)}class gA{constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(67),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._leftoverHighSurrogate=0,this._finished=!1}update(e){const t=e.length;if(t===0)return;const i=this._buff;let n=this._buffLen,s=this._leftoverHighSurrogate,r,a;for(s!==0?(r=s,a=-1,s=0):(r=e.charCodeAt(0),a=0);;){let l=r;if(qs(r))if(a+1<t){const c=e.charCodeAt(a+1);Ev(c)?(a++,l=BV(r,c)):l=65533}else{s=r;break}else Ev(r)&&(l=65533);if(n=this._push(i,n,l),a++,a<t)r=e.charCodeAt(a);else break}this._buffLen=n,this._leftoverHighSurrogate=s}_push(e,t,i){return i<128?e[t++]=i:i<2048?(e[t++]=192|(i&1984)>>>6,e[t++]=128|(i&63)>>>0):i<65536?(e[t++]=224|(i&61440)>>>12,e[t++]=128|(i&4032)>>>6,e[t++]=128|(i&63)>>>0):(e[t++]=240|(i&1835008)>>>18,e[t++]=128|(i&258048)>>>12,e[t++]=128|(i&4032)>>>6,e[t++]=128|(i&63)>>>0),t>=64&&(this._step(),t-=64,this._totalLen+=64,e[0]=e[64],e[1]=e[65],e[2]=e[66]),t}digest(){return this._finished||(this._finished=!0,this._leftoverHighSurrogate&&(this._leftoverHighSurrogate=0,this._buffLen=this._push(this._buff,this._buffLen,65533)),this._totalLen+=this._buffLen,this._wrapUp()),cS(this._h0)+cS(this._h1)+cS(this._h2)+cS(this._h3)+cS(this._h4)}_wrapUp(){this._buff[this._buffLen++]=128,TY(this._buff,this._buffLen),this._buffLen>56&&(this._step(),TY(this._buff));const e=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(e/4294967296),!1),this._buffDV.setUint32(60,e%4294967296,!1),this._step()}_step(){const e=gA._bigBlock32,t=this._buffDV;for(let f=0;f<64;f+=4)e.setUint32(f,t.getUint32(f,!1),!1);for(let f=64;f<320;f+=4)e.setUint32(f,q5(e.getUint32(f-12,!1)^e.getUint32(f-32,!1)^e.getUint32(f-56,!1)^e.getUint32(f-64,!1),1),!1);let i=this._h0,n=this._h1,s=this._h2,r=this._h3,a=this._h4,l,c,u;for(let f=0;f<80;f++)f<20?(l=n&s|~n&r,c=1518500249):f<40?(l=n^s^r,c=1859775393):f<60?(l=n&s|n&r|s&r,c=2400959708):(l=n^s^r,c=3395469782),u=q5(i,5)+l+a+c+e.getUint32(f*4,!1)&4294967295,a=r,r=s,s=q5(n,30),n=i,i=u;this._h0=this._h0+i&4294967295,this._h1=this._h1+n&4294967295,this._h2=this._h2+s&4294967295,this._h3=this._h3+r&4294967295,this._h4=this._h4+a&4294967295}}gA._bigBlock32=new DataView(new ArrayBuffer(320));const{registerWindow:V$e,getWindow:ft,getDocument:H$e,getWindows:Rie,getWindowsCount:R1e,getWindowId:mR,getWindowById:NY,hasWindow:z$e,onDidRegisterWindow:pA,onWillUnregisterWindow:M1e,onDidUnregisterWindow:A1e}=function(){const o=new Map;SCe(Hi,1);const e={window:Hi,disposables:new he};o.set(Hi.vscodeWindowId,e);const t=new Y,i=new Y,n=new Y;function s(r,a){const l=typeof r=="number"?o.get(r):void 0;return l??(a?e:void 0)}return{onDidRegisterWindow:t.event,onWillUnregisterWindow:n.event,onDidUnregisterWindow:i.event,registerWindow(r){if(o.has(r.vscodeWindowId))return J.None;const a=new he,l={window:r,disposables:a.add(new he)};return o.set(r.vscodeWindowId,l),a.add(lt(()=>{o.delete(r.vscodeWindowId),i.fire(r)})),a.add(oe(r,ke.BEFORE_UNLOAD,()=>{n.fire(r)})),t.fire(l),a},getWindows(){return o.values()},getWindowsCount(){return o.size},getWindowId(r){return r.vscodeWindowId},hasWindow(r){return o.has(r)},getWindowById:s,getWindow(r){var a;const l=r;if(!((a=l==null?void 0:l.ownerDocument)===null||a===void 0)&&a.defaultView)return l.ownerDocument.defaultView.window;const c=r;return c!=null&&c.view?c.view.window:Hi},getDocument(r){return ft(r).document}}}();function Zo(o){for(;o.firstChild;)o.firstChild.remove()}class P1e{constructor(e,t,i,n){this._node=e,this._type=t,this._handler=i,this._options=n||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}}function oe(o,e,t,i){return new P1e(o,e,t,i)}function Mie(o,e){return function(t){return e(new Wc(o,t))}}function O1e(o){return function(e){return o(new _n(e))}}const ss=function(e,t,i,n){let s=i;return t==="click"||t==="mousedown"?s=Mie(ft(e),i):(t==="keydown"||t==="keypress"||t==="keyup")&&(s=O1e(i)),oe(e,t,s,n)},F1e=function(e,t,i){const n=Mie(ft(e),t);return B1e(e,n,i)};function B1e(o,e,t){return oe(o,$d&&UV.pointerEvents?ke.POINTER_DOWN:ke.MOUSE_DOWN,e,t)}function WS(o,e,t){return hL(o,e,t)}class G5 extends Sie{constructor(e,t){super(e,t)}}let _R,ja;class GV extends jV{constructor(e){super(),this.defaultTarget=e&&ft(e)}cancelAndSet(e,t,i){return super.cancelAndSet(e,t,i??this.defaultTarget)}}class Y5{constructor(e,t=0){this._runner=e,this.priority=t,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(e){Nt(e)}}static sort(e,t){return t.priority-e.priority}}(function(){const o=new Map,e=new Map,t=new Map,i=new Map,n=s=>{var r;t.set(s,!1);const a=(r=o.get(s))!==null&&r!==void 0?r:[];for(e.set(s,a),o.set(s,[]),i.set(s,!0);a.length>0;)a.sort(Y5.sort),a.shift().execute();i.set(s,!1)};ja=(s,r,a=0)=>{const l=mR(s),c=new Y5(r,a);let u=o.get(l);return u||(u=[],o.set(l,u)),u.push(c),t.get(l)||(t.set(l,!0),s.requestAnimationFrame(()=>n(l))),c},_R=(s,r,a)=>{const l=mR(s);if(i.get(l)){const c=new Y5(r,a);let u=e.get(l);return u||(u=[],e.set(l,u)),u.push(c),c}else return ja(s,r,a)}})();function mA(o){return ft(o).getComputedStyle(o,null)}function um(o,e){const t=ft(o),i=t.document;if(o!==i.body)return new yi(o.clientWidth,o.clientHeight);if($d&&(t!=null&&t.visualViewport))return new yi(t.visualViewport.width,t.visualViewport.height);if(t!=null&&t.innerWidth&&t.innerHeight)return new yi(t.innerWidth,t.innerHeight);if(i.body&&i.body.clientWidth&&i.body.clientHeight)return new yi(i.body.clientWidth,i.body.clientHeight);if(i.documentElement&&i.documentElement.clientWidth&&i.documentElement.clientHeight)return new yi(i.documentElement.clientWidth,i.documentElement.clientHeight);throw new Error("Unable to figure out browser width and height")}class ls{static convertToPixels(e,t){return parseFloat(t)||0}static getDimension(e,t,i){const n=mA(e),s=n?n.getPropertyValue(t):"0";return ls.convertToPixels(e,s)}static getBorderLeftWidth(e){return ls.getDimension(e,"border-left-width","borderLeftWidth")}static getBorderRightWidth(e){return ls.getDimension(e,"border-right-width","borderRightWidth")}static getBorderTopWidth(e){return ls.getDimension(e,"border-top-width","borderTopWidth")}static getBorderBottomWidth(e){return ls.getDimension(e,"border-bottom-width","borderBottomWidth")}static getPaddingLeft(e){return ls.getDimension(e,"padding-left","paddingLeft")}static getPaddingRight(e){return ls.getDimension(e,"padding-right","paddingRight")}static getPaddingTop(e){return ls.getDimension(e,"padding-top","paddingTop")}static getPaddingBottom(e){return ls.getDimension(e,"padding-bottom","paddingBottom")}static getMarginLeft(e){return ls.getDimension(e,"margin-left","marginLeft")}static getMarginTop(e){return ls.getDimension(e,"margin-top","marginTop")}static getMarginRight(e){return ls.getDimension(e,"margin-right","marginRight")}static getMarginBottom(e){return ls.getDimension(e,"margin-bottom","marginBottom")}}class yi{constructor(e,t){this.width=e,this.height=t}with(e=this.width,t=this.height){return e!==this.width||t!==this.height?new yi(e,t):this}static is(e){return typeof e=="object"&&typeof e.height=="number"&&typeof e.width=="number"}static lift(e){return e instanceof yi?e:new yi(e.width,e.height)}static equals(e,t){return e===t?!0:!e||!t?!1:e.width===t.width&&e.height===t.height}}yi.None=new yi(0,0);function Aie(o){let e=o.offsetParent,t=o.offsetTop,i=o.offsetLeft;for(;(o=o.parentNode)!==null&&o!==o.ownerDocument.body&&o!==o.ownerDocument.documentElement;){t-=o.scrollTop;const n=Oie(o)?null:mA(o);n&&(i-=n.direction!=="rtl"?o.scrollLeft:-o.scrollLeft),o===e&&(i+=ls.getBorderLeftWidth(o),t+=ls.getBorderTopWidth(o),t+=o.offsetTop,i+=o.offsetLeft,e=o.offsetParent)}return{left:i,top:t}}function W1e(o,e,t){typeof e=="number"&&(o.style.width=`${e}px`),typeof t=="number"&&(o.style.height=`${t}px`)}function ws(o){const e=o.getBoundingClientRect(),t=ft(o);return{left:e.left+t.scrollX,top:e.top+t.scrollY,width:e.width,height:e.height}}function Pie(o){let e=o,t=1;do{const i=mA(e).zoom;i!=null&&i!=="1"&&(t*=i),e=e.parentElement}while(e!==null&&e!==e.ownerDocument.documentElement);return t}function Ir(o){const e=ls.getMarginLeft(o)+ls.getMarginRight(o);return o.offsetWidth+e}function Z5(o){const e=ls.getBorderLeftWidth(o)+ls.getBorderRightWidth(o),t=ls.getPaddingLeft(o)+ls.getPaddingRight(o);return o.offsetWidth-e-t}function V1e(o){const e=ls.getBorderTopWidth(o)+ls.getBorderBottomWidth(o),t=ls.getPaddingTop(o)+ls.getPaddingBottom(o);return o.offsetHeight-e-t}function Ef(o){const e=ls.getMarginTop(o)+ls.getMarginBottom(o);return o.offsetHeight+e}function ao(o,e){return!!(e!=null&&e.contains(o))}function H1e(o,e,t){for(;o&&o.nodeType===o.ELEMENT_NODE;){if(o.classList.contains(e))return o;if(t){if(typeof t=="string"){if(o.classList.contains(t))return null}else if(o===t)return null}o=o.parentNode}return null}function Q5(o,e,t){return!!H1e(o,e,t)}function Oie(o){return o&&!!o.host&&!!o.mode}function vR(o){return!!Nv(o)}function Nv(o){for(var e;o.parentNode;){if(o===((e=o.ownerDocument)===null||e===void 0?void 0:e.body))return null;o=o.parentNode}return Oie(o)?o:null}function No(){let o=K1().activeElement;for(;o!=null&&o.shadowRoot;)o=o.shadowRoot.activeElement;return o}function _A(o){return No()===o}function Fie(o){return ao(No(),o)}function K1(){var o;return R1e()<=1?Hi.document:(o=Array.from(Rie()).map(({window:t})=>t.document).find(t=>t.hasFocus()))!==null&&o!==void 0?o:Hi.document}function z1e(){var o,e;return(e=(o=K1().defaultView)===null||o===void 0?void 0:o.window)!==null&&e!==void 0?e:Hi}const YV=new Map;function Bie(){return new U1e}class U1e{constructor(){this._currentCssStyle="",this._styleSheet=void 0}setStyle(e){e!==this._currentCssStyle&&(this._currentCssStyle=e,this._styleSheet?this._styleSheet.innerText=e:this._styleSheet=xl(Hi.document.head,t=>t.innerText=e))}dispose(){this._styleSheet&&(this._styleSheet.remove(),this._styleSheet=void 0)}}function xl(o=Hi.document.head,e,t){const i=document.createElement("style");if(i.type="text/css",i.media="screen",e==null||e(i),o.appendChild(i),t&&t.add(lt(()=>o.removeChild(i))),o===Hi.document.head){const n=new Set;YV.set(i,n);for(const{window:s,disposables:r}of Rie()){if(s===Hi)continue;const a=r.add($1e(i,n,s));t==null||t.add(a)}}return i}function $1e(o,e,t){var i,n;const s=new he,r=o.cloneNode(!0);t.document.head.appendChild(r),s.add(lt(()=>t.document.head.removeChild(r)));for(const a of Vie(o))(i=r.sheet)===null||i===void 0||i.insertRule(a.cssText,(n=r.sheet)===null||n===void 0?void 0:n.cssRules.length);return s.add(j1e.observe(o,s,{childList:!0})(()=>{r.textContent=o.textContent})),e.add(r),s.add(lt(()=>e.delete(r))),s}const j1e=new class{constructor(){this.mutationObservers=new Map}observe(o,e,t){let i=this.mutationObservers.get(o);i||(i=new Map,this.mutationObservers.set(o,i));const n=hA(t);let s=i.get(n);if(s)s.users+=1;else{const r=new Y,a=new MutationObserver(c=>r.fire(c));a.observe(o,t);const l=s={users:1,observer:a,onDidMutate:r.event};e.add(lt(()=>{l.users-=1,l.users===0&&(r.dispose(),a.disconnect(),i==null||i.delete(n),(i==null?void 0:i.size)===0&&this.mutationObservers.delete(o))})),i.set(n,s)}return s.onDidMutate}};let X5=null;function Wie(){return X5||(X5=xl()),X5}function Vie(o){var e,t;return!((e=o==null?void 0:o.sheet)===null||e===void 0)&&e.rules?o.sheet.rules:!((t=o==null?void 0:o.sheet)===null||t===void 0)&&t.cssRules?o.sheet.cssRules:[]}function bR(o,e,t=Wie()){var i,n;if(!(!t||!e)){(i=t.sheet)===null||i===void 0||i.insertRule(`${o} {${e}}`,0);for(const s of(n=YV.get(t))!==null&&n!==void 0?n:[])bR(o,e,s)}}function i9(o,e=Wie()){var t,i;if(!e)return;const n=Vie(e),s=[];for(let r=0;r<n.length;r++){const a=n[r];K1e(a)&&a.selectorText.indexOf(o)!==-1&&s.push(r)}for(let r=s.length-1;r>=0;r--)(t=e.sheet)===null||t===void 0||t.deleteRule(s[r]);for(const r of(i=YV.get(e))!==null&&i!==void 0?i:[])i9(o,r)}function K1e(o){return typeof o.selectorText=="string"}function ZV(o){return o instanceof MouseEvent||o instanceof ft(o).MouseEvent}function pp(o){return o instanceof KeyboardEvent||o instanceof ft(o).KeyboardEvent}const ke={CLICK:"click",AUXCLICK:"auxclick",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",POINTER_LEAVE:"pointerleave",CONTEXT_MENU:"contextmenu",WHEEL:"wheel",KEY_DOWN:"keydown",KEY_PRESS:"keypress",KEY_UP:"keyup",LOAD:"load",BEFORE_UNLOAD:"beforeunload",UNLOAD:"unload",PAGE_SHOW:"pageshow",PAGE_HIDE:"pagehide",PASTE:"paste",ABORT:"abort",ERROR:"error",RESIZE:"resize",SCROLL:"scroll",FULLSCREEN_CHANGE:"fullscreenchange",WK_FULLSCREEN_CHANGE:"webkitfullscreenchange",SELECT:"select",CHANGE:"change",SUBMIT:"submit",RESET:"reset",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",BLUR:"blur",INPUT:"input",STORAGE:"storage",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend",ANIMATION_START:fv?"webkitAnimationStart":"animationstart",ANIMATION_END:fv?"webkitAnimationEnd":"animationend",ANIMATION_ITERATION:fv?"webkitAnimationIteration":"animationiteration"};function q1e(o){const e=o;return!!(e&&typeof e.preventDefault=="function"&&typeof e.stopPropagation=="function")}const Ut={stop:(o,e)=>(o.preventDefault(),e&&o.stopPropagation(),o)};function G1e(o){const e=[];for(let t=0;o&&o.nodeType===o.ELEMENT_NODE;t++)e[t]=o.scrollTop,o=o.parentNode;return e}function Y1e(o,e){for(let t=0;o&&o.nodeType===o.ELEMENT_NODE;t++)o.scrollTop!==e[t]&&(o.scrollTop=e[t]),o=o.parentNode}class CR extends J{static hasFocusWithin(e){if(e instanceof HTMLElement){const t=Nv(e),i=t?t.activeElement:e.ownerDocument.activeElement;return ao(i,e)}else{const t=e;return ao(t.document.activeElement,t.document)}}constructor(e){super(),this._onDidFocus=this._register(new Y),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new Y),this.onDidBlur=this._onDidBlur.event;let t=CR.hasFocusWithin(e),i=!1;const n=()=>{i=!1,t||(t=!0,this._onDidFocus.fire())},s=()=>{t&&(i=!0,(e instanceof HTMLElement?ft(e):e).setTimeout(()=>{i&&(i=!1,t=!1,this._onDidBlur.fire())},0))};this._refreshStateHandler=()=>{CR.hasFocusWithin(e)!==t&&(t?s():n())},this._register(oe(e,ke.FOCUS,n,!0)),this._register(oe(e,ke.BLUR,s,!0)),e instanceof HTMLElement&&(this._register(oe(e,ke.FOCUS_IN,()=>this._refreshStateHandler())),this._register(oe(e,ke.FOCUS_OUT,()=>this._refreshStateHandler())))}}function Kd(o){return new CR(o)}function Z1e(o,e){return o.after(e),e}function ge(o,...e){if(o.append(...e),e.length===1&&typeof e[0]!="string")return e[0]}function QV(o,e){return o.insertBefore(e,o.firstChild),e}function _o(o,...e){o.innerText="",ge(o,...e)}const Q1e=/([\w\-]+)?(#([\w\-]+))?((\.([\w\-]+))*)/;var ix;(function(o){o.HTML="http://www.w3.org/1999/xhtml",o.SVG="http://www.w3.org/2000/svg"})(ix||(ix={}));function Hie(o,e,t,...i){const n=Q1e.exec(e);if(!n)throw new Error("Bad use of emmet");const s=n[1]||"div";let r;return o!==ix.HTML?r=document.createElementNS(o,s):r=document.createElement(s),n[3]&&(r.id=n[3]),n[4]&&(r.className=n[4].replace(/\./g," ").trim()),t&&Object.entries(t).forEach(([a,l])=>{typeof l>"u"||(/^on\w+$/.test(a)?r[a]=l:a==="selected"?l&&r.setAttribute(a,"true"):r.setAttribute(a,l))}),r.append(...i),r}function ye(o,e,...t){return Hie(ix.HTML,o,e,...t)}ye.SVG=function(o,e,...t){return Hie(ix.SVG,o,e,...t)};function X1e(o,...e){o?Ba(...e):Rr(...e)}function Ba(...o){for(const e of o)e.style.display="",e.removeAttribute("aria-hidden")}function Rr(...o){for(const e of o)e.style.display="none",e.setAttribute("aria-hidden","true")}function RY(o,e){const t=o.devicePixelRatio*e;return Math.max(1,Math.floor(t))/o.devicePixelRatio}function zie(o){Hi.open(o,"_blank","noopener")}function J1e(o,e){const t=()=>{e(),i=ja(o,t)};let i=ja(o,t);return lt(()=>i.dispose())}Tie.setPreferredWebSchema(/^https:/.test(Hi.location.href)?"https":"http");function hm(o){return o?`url('${Nie.uriToBrowserUri(o).toString(!0).replace(/'/g,"%27")}')`:"url('')"}function MY(o){return`'${o.replace(/'/g,"%27")}'`}function Kf(o,e){if(o!==void 0){const t=o.match(/^\s*var\((.+)\)$/);if(t){const i=t[1].split(",",2);return i.length===2&&(e=Kf(i[1].trim(),e)),`var(${i[0]}, ${e})`}return o}return e}function ewe(o,e=!1){const t=document.createElement("a");return t9("afterSanitizeAttributes",i=>{for(const n of["href","src"])if(i.hasAttribute(n)){const s=i.getAttribute(n);if(n==="href"&&s.startsWith("#"))continue;if(t.href=s,!o.includes(t.protocol.replace(/:$/,""))){if(e&&n==="src"&&t.href.startsWith("data:"))continue;i.removeAttribute(n)}}}),lt(()=>{Iie("afterSanitizeAttributes")})}const twe=Object.freeze(["a","abbr","b","bdo","blockquote","br","caption","cite","code","col","colgroup","dd","del","details","dfn","div","dl","dt","em","figcaption","figure","h1","h2","h3","h4","h5","h6","hr","i","img","input","ins","kbd","label","li","mark","ol","p","pre","q","rp","rt","ruby","samp","small","small","source","span","strike","strong","sub","summary","sup","table","tbody","td","tfoot","th","thead","time","tr","tt","u","ul","var","video","wbr"]);class If extends Y{constructor(){super(),this._subscriptions=new he,this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1},this._subscriptions.add(Ie.runAndSubscribe(pA,({window:e,disposables:t})=>this.registerListeners(e,t),{window:Hi,disposables:this._subscriptions}))}registerListeners(e,t){t.add(oe(e,"keydown",i=>{if(i.defaultPrevented)return;const n=new _n(i);if(!(n.keyCode===6&&i.repeat)){if(i.altKey&&!this._keyStatus.altKey)this._keyStatus.lastKeyPressed="alt";else if(i.ctrlKey&&!this._keyStatus.ctrlKey)this._keyStatus.lastKeyPressed="ctrl";else if(i.metaKey&&!this._keyStatus.metaKey)this._keyStatus.lastKeyPressed="meta";else if(i.shiftKey&&!this._keyStatus.shiftKey)this._keyStatus.lastKeyPressed="shift";else if(n.keyCode!==6)this._keyStatus.lastKeyPressed=void 0;else return;this._keyStatus.altKey=i.altKey,this._keyStatus.ctrlKey=i.ctrlKey,this._keyStatus.metaKey=i.metaKey,this._keyStatus.shiftKey=i.shiftKey,this._keyStatus.lastKeyPressed&&(this._keyStatus.event=i,this.fire(this._keyStatus))}},!0)),t.add(oe(e,"keyup",i=>{i.defaultPrevented||(!i.altKey&&this._keyStatus.altKey?this._keyStatus.lastKeyReleased="alt":!i.ctrlKey&&this._keyStatus.ctrlKey?this._keyStatus.lastKeyReleased="ctrl":!i.metaKey&&this._keyStatus.metaKey?this._keyStatus.lastKeyReleased="meta":!i.shiftKey&&this._keyStatus.shiftKey?this._keyStatus.lastKeyReleased="shift":this._keyStatus.lastKeyReleased=void 0,this._keyStatus.lastKeyPressed!==this._keyStatus.lastKeyReleased&&(this._keyStatus.lastKeyPressed=void 0),this._keyStatus.altKey=i.altKey,this._keyStatus.ctrlKey=i.ctrlKey,this._keyStatus.metaKey=i.metaKey,this._keyStatus.shiftKey=i.shiftKey,this._keyStatus.lastKeyReleased&&(this._keyStatus.event=i,this.fire(this._keyStatus)))},!0)),t.add(oe(e.document.body,"mousedown",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),t.add(oe(e.document.body,"mouseup",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),t.add(oe(e.document.body,"mousemove",i=>{i.buttons&&(this._keyStatus.lastKeyPressed=void 0)},!0)),t.add(oe(e,"blur",()=>{this.resetKeyStatus()}))}get keyStatus(){return this._keyStatus}resetKeyStatus(){this.doResetKeyStatus(),this.fire(this._keyStatus)}doResetKeyStatus(){this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1}}static getInstance(){return If.instance||(If.instance=new If),If.instance}dispose(){super.dispose(),this._subscriptions.dispose()}}class iwe extends J{constructor(e,t){super(),this.element=e,this.callbacks=t,this.counter=0,this.dragStartTime=0,this.registerListeners()}registerListeners(){this.callbacks.onDragStart&&this._register(oe(this.element,ke.DRAG_START,e=>{var t,i;(i=(t=this.callbacks).onDragStart)===null||i===void 0||i.call(t,e)})),this.callbacks.onDrag&&this._register(oe(this.element,ke.DRAG,e=>{var t,i;(i=(t=this.callbacks).onDrag)===null||i===void 0||i.call(t,e)})),this._register(oe(this.element,ke.DRAG_ENTER,e=>{var t,i;this.counter++,this.dragStartTime=e.timeStamp,(i=(t=this.callbacks).onDragEnter)===null||i===void 0||i.call(t,e)})),this._register(oe(this.element,ke.DRAG_OVER,e=>{var t,i;e.preventDefault(),(i=(t=this.callbacks).onDragOver)===null||i===void 0||i.call(t,e,e.timeStamp-this.dragStartTime)})),this._register(oe(this.element,ke.DRAG_LEAVE,e=>{var t,i;this.counter--,this.counter===0&&(this.dragStartTime=0,(i=(t=this.callbacks).onDragLeave)===null||i===void 0||i.call(t,e))})),this._register(oe(this.element,ke.DRAG_END,e=>{var t,i;this.counter=0,this.dragStartTime=0,(i=(t=this.callbacks).onDragEnd)===null||i===void 0||i.call(t,e)})),this._register(oe(this.element,ke.DROP,e=>{var t,i;this.counter=0,this.dragStartTime=0,(i=(t=this.callbacks).onDrop)===null||i===void 0||i.call(t,e)}))}}const nwe=/(?<tag>[\w\-]+)?(?:#(?<id>[\w\-]+))?(?<class>(?:\.(?:[\w\-]+))*)(?:@(?<name>(?:[\w\_])+))?/;function Ii(o,...e){let t,i;Array.isArray(e[0])?(t={},i=e[0]):(t=e[0]||{},i=e[1]);const n=nwe.exec(o);if(!n||!n.groups)throw new Error("Bad use of h");const s=n.groups.tag||"div",r=document.createElement(s);n.groups.id&&(r.id=n.groups.id);const a=[];if(n.groups.class)for(const c of n.groups.class.split("."))c!==""&&a.push(c);if(t.className!==void 0)for(const c of t.className.split("."))c!==""&&a.push(c);a.length>0&&(r.className=a.join(" "));const l={};if(n.groups.name&&(l[n.groups.name]=r),i)for(const c of i)c instanceof HTMLElement?r.appendChild(c):typeof c=="string"?r.append(c):"root"in c&&(Object.assign(l,c),r.appendChild(c.root));for(const[c,u]of Object.entries(t))if(c!=="className")if(c==="style")for(const[f,g]of Object.entries(u))r.style.setProperty(AY(f),typeof g=="number"?g+"px":""+g);else c==="tabIndex"?r.tabIndex=u:r.setAttribute(AY(c),u.toString());return l.root=r,l}function AY(o){return o.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}class swe extends J{constructor(e){super(),this._onDidChange=this._register(new Y),this.onDidChange=this._onDidChange.event,this._listener=()=>this._handleChange(e,!0),this._mediaQueryList=null,this._handleChange(e,!1)}_handleChange(e,t){var i;(i=this._mediaQueryList)===null||i===void 0||i.removeEventListener("change",this._listener),this._mediaQueryList=e.matchMedia(`(resolution: ${e.devicePixelRatio}dppx)`),this._mediaQueryList.addEventListener("change",this._listener),t&&this._onDidChange.fire()}}class owe extends J{get value(){return this._value}constructor(e){super(),this._onDidChange=this._register(new Y),this.onDidChange=this._onDidChange.event,this._value=this._getPixelRatio(e);const t=this._register(new swe(e));this._register(t.onDidChange(()=>{this._value=this._getPixelRatio(e),this._onDidChange.fire(this._value)}))}_getPixelRatio(e){const t=document.createElement("canvas").getContext("2d"),i=e.devicePixelRatio||1,n=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return i/n}}class rwe{constructor(){this.mapWindowIdToPixelRatioMonitor=new Map}_getOrCreatePixelRatioMonitor(e){const t=mR(e);let i=this.mapWindowIdToPixelRatioMonitor.get(t);return i||(i=new owe(e),this.mapWindowIdToPixelRatioMonitor.set(t,i),Ie.once(A1e)(({vscodeWindowId:n})=>{n===t&&(i==null||i.dispose(),this.mapWindowIdToPixelRatioMonitor.delete(t))})),i}getInstance(e){return this._getOrCreatePixelRatioMonitor(e)}}const nx=new rwe;class Uie{constructor(e){this.domNode=e,this._maxWidth="",this._width="",this._height="",this._top="",this._left="",this._bottom="",this._right="",this._paddingLeft="",this._fontFamily="",this._fontWeight="",this._fontSize="",this._fontStyle="",this._fontFeatureSettings="",this._fontVariationSettings="",this._textDecoration="",this._lineHeight="",this._letterSpacing="",this._className="",this._display="",this._position="",this._visibility="",this._color="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}setMaxWidth(e){const t=gd(e);this._maxWidth!==t&&(this._maxWidth=t,this.domNode.style.maxWidth=this._maxWidth)}setWidth(e){const t=gd(e);this._width!==t&&(this._width=t,this.domNode.style.width=this._width)}setHeight(e){const t=gd(e);this._height!==t&&(this._height=t,this.domNode.style.height=this._height)}setTop(e){const t=gd(e);this._top!==t&&(this._top=t,this.domNode.style.top=this._top)}setLeft(e){const t=gd(e);this._left!==t&&(this._left=t,this.domNode.style.left=this._left)}setBottom(e){const t=gd(e);this._bottom!==t&&(this._bottom=t,this.domNode.style.bottom=this._bottom)}setRight(e){const t=gd(e);this._right!==t&&(this._right=t,this.domNode.style.right=this._right)}setPaddingLeft(e){const t=gd(e);this._paddingLeft!==t&&(this._paddingLeft=t,this.domNode.style.paddingLeft=this._paddingLeft)}setFontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(e){const t=gd(e);this._fontSize!==t&&(this._fontSize=t,this.domNode.style.fontSize=this._fontSize)}setFontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.domNode.style.fontStyle=this._fontStyle)}setFontFeatureSettings(e){this._fontFeatureSettings!==e&&(this._fontFeatureSettings=e,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setFontVariationSettings(e){this._fontVariationSettings!==e&&(this._fontVariationSettings=e,this.domNode.style.fontVariationSettings=this._fontVariationSettings)}setTextDecoration(e){this._textDecoration!==e&&(this._textDecoration=e,this.domNode.style.textDecoration=this._textDecoration)}setLineHeight(e){const t=gd(e);this._lineHeight!==t&&(this._lineHeight=t,this.domNode.style.lineHeight=this._lineHeight)}setLetterSpacing(e){const t=gd(e);this._letterSpacing!==t&&(this._letterSpacing=t,this.domNode.style.letterSpacing=this._letterSpacing)}setClassName(e){this._className!==e&&(this._className=e,this.domNode.className=this._className)}toggleClassName(e,t){this.domNode.classList.toggle(e,t),this._className=this.domNode.className}setDisplay(e){this._display!==e&&(this._display=e,this.domNode.style.display=this._display)}setPosition(e){this._position!==e&&(this._position=e,this.domNode.style.position=this._position)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this.domNode.style.visibility=this._visibility)}setColor(e){this._color!==e&&(this._color=e,this.domNode.style.color=this._color)}setBackgroundColor(e){this._backgroundColor!==e&&(this._backgroundColor=e,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(e){this._layerHint!==e&&(this._layerHint=e,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(e){this._boxShadow!==e&&(this._boxShadow=e,this.domNode.style.boxShadow=e)}setContain(e){this._contain!==e&&(this._contain=e,this.domNode.style.contain=this._contain)}setAttribute(e,t){this.domNode.setAttribute(e,t)}removeAttribute(e){this.domNode.removeAttribute(e)}appendChild(e){this.domNode.appendChild(e.domNode)}removeChild(e){this.domNode.removeChild(e.domNode)}}function gd(o){return typeof o=="number"?`${o}px`:o}function ki(o){return new Uie(o)}function vo(o,e){o instanceof Uie?(o.setFontFamily(e.getMassagedFontFamily()),o.setFontWeight(e.fontWeight),o.setFontSize(e.fontSize),o.setFontFeatureSettings(e.fontFeatureSettings),o.setFontVariationSettings(e.fontVariationSettings),o.setLineHeight(e.lineHeight),o.setLetterSpacing(e.letterSpacing)):(o.style.fontFamily=e.getMassagedFontFamily(),o.style.fontWeight=e.fontWeight,o.style.fontSize=e.fontSize+"px",o.style.fontFeatureSettings=e.fontFeatureSettings,o.style.fontVariationSettings=e.fontVariationSettings,o.style.lineHeight=e.lineHeight+"px",o.style.letterSpacing=e.letterSpacing+"px")}class awe{constructor(e,t){this.chr=e,this.type=t,this.width=0}fulfill(e){this.width=e}}class XV{constructor(e,t){this._bareFontInfo=e,this._requests=t,this._container=null,this._testElements=null}read(e){this._createDomElements(),e.document.body.appendChild(this._container),this._readFromDomElements(),e.document.body.removeChild(this._container),this._container=null,this._testElements=null}_createDomElements(){const e=document.createElement("div");e.style.position="absolute",e.style.top="-50000px",e.style.width="50000px";const t=document.createElement("div");vo(t,this._bareFontInfo),e.appendChild(t);const i=document.createElement("div");vo(i,this._bareFontInfo),i.style.fontWeight="bold",e.appendChild(i);const n=document.createElement("div");vo(n,this._bareFontInfo),n.style.fontStyle="italic",e.appendChild(n);const s=[];for(const r of this._requests){let a;r.type===0&&(a=t),r.type===2&&(a=i),r.type===1&&(a=n),a.appendChild(document.createElement("br"));const l=document.createElement("span");XV._render(l,r),a.appendChild(l),s.push(l)}this._container=e,this._testElements=s}static _render(e,t){if(t.chr===" "){let i="";for(let n=0;n<8;n++)i+=i;e.innerText=i}else{let i=t.chr;for(let n=0;n<8;n++)i+=i;e.textContent=i}}_readFromDomElements(){for(let e=0,t=this._requests.length;e<t;e++){const i=this._requests[e],n=this._testElements[e];i.fulfill(n.offsetWidth/256)}}}function lwe(o,e,t){new XV(e,t).read(o)}const Xl=new class{constructor(){this._zoomLevel=0,this._onDidChangeZoomLevel=new Y,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event}getZoomLevel(){return this._zoomLevel}setZoomLevel(o){o=Math.min(Math.max(-5,o),20),this._zoomLevel!==o&&(this._zoomLevel=o,this._onDidChangeZoomLevel.fire(this._zoomLevel))}},cwe=Kt?1.5:1.35,J5=8;class gv{static createFromValidatedSettings(e,t,i){const n=e.get(49),s=e.get(53),r=e.get(52),a=e.get(51),l=e.get(54),c=e.get(67),u=e.get(64);return gv._create(n,s,r,a,l,c,u,t,i)}static _create(e,t,i,n,s,r,a,l,c){r===0?r=cwe*i:r<J5&&(r=r*i),r=Math.round(r),r<J5&&(r=J5);const u=1+(c?0:Xl.getZoomLevel()*.1);return i*=u,r*=u,s===Td.TRANSLATE&&(t==="normal"||t==="bold"?s=Td.OFF:(s=`'wght' ${parseInt(t,10)}`,t="normal")),new gv({pixelRatio:l,fontFamily:e,fontWeight:t,fontSize:i,fontFeatureSettings:n,fontVariationSettings:s,lineHeight:r,letterSpacing:a})}constructor(e){this._bareFontInfoBrand=void 0,this.pixelRatio=e.pixelRatio,this.fontFamily=String(e.fontFamily),this.fontWeight=String(e.fontWeight),this.fontSize=e.fontSize,this.fontFeatureSettings=e.fontFeatureSettings,this.fontVariationSettings=e.fontVariationSettings,this.lineHeight=e.lineHeight|0,this.letterSpacing=e.letterSpacing}getId(){return`${this.pixelRatio}-${this.fontFamily}-${this.fontWeight}-${this.fontSize}-${this.fontFeatureSettings}-${this.fontVariationSettings}-${this.lineHeight}-${this.letterSpacing}`}getMassagedFontFamily(){const e=ga.fontFamily,t=gv._wrapInQuotes(this.fontFamily);return e&&this.fontFamily!==e?`${t}, ${e}`:t}static _wrapInQuotes(e){return/[,"']/.test(e)?e:/[+ ]/.test(e)?`"${e}"`:e}}const dwe=2;class n9 extends gv{constructor(e,t){super(e),this._editorStylingBrand=void 0,this.version=dwe,this.isTrusted=t,this.isMonospace=e.isMonospace,this.typicalHalfwidthCharacterWidth=e.typicalHalfwidthCharacterWidth,this.typicalFullwidthCharacterWidth=e.typicalFullwidthCharacterWidth,this.canUseHalfwidthRightwardsArrow=e.canUseHalfwidthRightwardsArrow,this.spaceWidth=e.spaceWidth,this.middotWidth=e.middotWidth,this.wsmiddotWidth=e.wsmiddotWidth,this.maxDigitWidth=e.maxDigitWidth}equals(e){return this.fontFamily===e.fontFamily&&this.fontWeight===e.fontWeight&&this.fontSize===e.fontSize&&this.fontFeatureSettings===e.fontFeatureSettings&&this.fontVariationSettings===e.fontVariationSettings&&this.lineHeight===e.lineHeight&&this.letterSpacing===e.letterSpacing&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.typicalFullwidthCharacterWidth===e.typicalFullwidthCharacterWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.maxDigitWidth===e.maxDigitWidth}}class uwe extends J{constructor(){super(...arguments),this._cache=new Map,this._evictUntrustedReadingsTimeout=-1,this._onDidChange=this._register(new Y),this.onDidChange=this._onDidChange.event}dispose(){this._evictUntrustedReadingsTimeout!==-1&&(clearTimeout(this._evictUntrustedReadingsTimeout),this._evictUntrustedReadingsTimeout=-1),super.dispose()}clearAllFontInfos(){this._cache.clear(),this._onDidChange.fire()}_ensureCache(e){const t=mR(e);let i=this._cache.get(t);return i||(i=new hwe,this._cache.set(t,i)),i}_writeToCache(e,t,i){this._ensureCache(e).put(t,i),!i.isTrusted&&this._evictUntrustedReadingsTimeout===-1&&(this._evictUntrustedReadingsTimeout=e.setTimeout(()=>{this._evictUntrustedReadingsTimeout=-1,this._evictUntrustedReadings(e)},5e3))}_evictUntrustedReadings(e){const t=this._ensureCache(e),i=t.getValues();let n=!1;for(const s of i)s.isTrusted||(n=!0,t.remove(s));n&&this._onDidChange.fire()}readFontInfo(e,t){const i=this._ensureCache(e);if(!i.has(t)){let n=this._actualReadFontInfo(e,t);(n.typicalHalfwidthCharacterWidth<=2||n.typicalFullwidthCharacterWidth<=2||n.spaceWidth<=2||n.maxDigitWidth<=2)&&(n=new n9({pixelRatio:nx.getInstance(e).value,fontFamily:n.fontFamily,fontWeight:n.fontWeight,fontSize:n.fontSize,fontFeatureSettings:n.fontFeatureSettings,fontVariationSettings:n.fontVariationSettings,lineHeight:n.lineHeight,letterSpacing:n.letterSpacing,isMonospace:n.isMonospace,typicalHalfwidthCharacterWidth:Math.max(n.typicalHalfwidthCharacterWidth,5),typicalFullwidthCharacterWidth:Math.max(n.typicalFullwidthCharacterWidth,5),canUseHalfwidthRightwardsArrow:n.canUseHalfwidthRightwardsArrow,spaceWidth:Math.max(n.spaceWidth,5),middotWidth:Math.max(n.middotWidth,5),wsmiddotWidth:Math.max(n.wsmiddotWidth,5),maxDigitWidth:Math.max(n.maxDigitWidth,5)},!1)),this._writeToCache(e,t,n)}return i.get(t)}_createRequest(e,t,i,n){const s=new awe(e,t);return i.push(s),n==null||n.push(s),s}_actualReadFontInfo(e,t){const i=[],n=[],s=this._createRequest("n",0,i,n),r=this._createRequest("",0,i,null),a=this._createRequest(" ",0,i,n),l=this._createRequest("0",0,i,n),c=this._createRequest("1",0,i,n),u=this._createRequest("2",0,i,n),f=this._createRequest("3",0,i,n),g=this._createRequest("4",0,i,n),p=this._createRequest("5",0,i,n),_=this._createRequest("6",0,i,n),b=this._createRequest("7",0,i,n),y=this._createRequest("8",0,i,n),S=this._createRequest("9",0,i,n),L=this._createRequest("",0,i,n),x=this._createRequest("",0,i,null),D=this._createRequest("",0,i,n),E=this._createRequest("",0,i,null),N="|/-_ilm%";for(let K=0,j=N.length;K<j;K++)this._createRequest(N.charAt(K),0,i,n),this._createRequest(N.charAt(K),1,i,n),this._createRequest(N.charAt(K),2,i,n);lwe(e,t,i);const M=Math.max(l.width,c.width,u.width,f.width,g.width,p.width,_.width,b.width,y.width,S.width);let F=t.fontFeatureSettings===ml.OFF;const H=n[0].width;for(let K=1,j=n.length;F&&K<j;K++){const q=H-n[K].width;if(q<-.001||q>.001){F=!1;break}}let Q=!0;return F&&x.width!==H&&(Q=!1),x.width>L.width&&(Q=!1),new n9({pixelRatio:nx.getInstance(e).value,fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontSize:t.fontSize,fontFeatureSettings:t.fontFeatureSettings,fontVariationSettings:t.fontVariationSettings,lineHeight:t.lineHeight,letterSpacing:t.letterSpacing,isMonospace:F,typicalHalfwidthCharacterWidth:s.width,typicalFullwidthCharacterWidth:r.width,canUseHalfwidthRightwardsArrow:Q,spaceWidth:a.width,middotWidth:D.width,wsmiddotWidth:E.width,maxDigitWidth:M},!0)}}class hwe{constructor(){this._keys=Object.create(null),this._values=Object.create(null)}has(e){const t=e.getId();return!!this._values[t]}get(e){const t=e.getId();return this._values[t]}put(e,t){const i=e.getId();this._keys[i]=e,this._values[i]=t}remove(e){const t=e.getId();delete this._keys[t],delete this._values[t]}getValues(){return Object.keys(this._keys).map(e=>this._values[e])}}const s9=new uwe;var Md;(function(o){o.serviceIds=new Map,o.DI_TARGET="$di$target",o.DI_DEPENDENCIES="$di$dependencies";function e(t){return t[o.DI_DEPENDENCIES]||[]}o.getServiceDependencies=e})(Md||(Md={}));const ct=Zt("instantiationService");function fwe(o,e,t){e[Md.DI_TARGET]===e?e[Md.DI_DEPENDENCIES].push({id:o,index:t}):(e[Md.DI_DEPENDENCIES]=[{id:o,index:t}],e[Md.DI_TARGET]=e)}function Zt(o){if(Md.serviceIds.has(o))return Md.serviceIds.get(o);const e=function(t,i,n){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");fwe(e,t,n)};return e.toString=()=>o,Md.serviceIds.set(o,e),e}const gi=Zt("codeEditorService"),Fn=Zt("modelService"),Ca=Zt("textModelService");class za extends J{constructor(e,t="",i="",n=!0,s){super(),this._onDidChange=this._register(new Y),this.onDidChange=this._onDidChange.event,this._enabled=!0,this._id=e,this._label=t,this._cssClass=i,this._enabled=n,this._actionCallback=s}get id(){return this._id}get label(){return this._label}set label(e){this._setLabel(e)}_setLabel(e){this._label!==e&&(this._label=e,this._onDidChange.fire({label:e}))}get tooltip(){return this._tooltip||""}set tooltip(e){this._setTooltip(e)}_setTooltip(e){this._tooltip!==e&&(this._tooltip=e,this._onDidChange.fire({tooltip:e}))}get class(){return this._cssClass}set class(e){this._setClass(e)}_setClass(e){this._cssClass!==e&&(this._cssClass=e,this._onDidChange.fire({class:e}))}get enabled(){return this._enabled}set enabled(e){this._setEnabled(e)}_setEnabled(e){this._enabled!==e&&(this._enabled=e,this._onDidChange.fire({enabled:e}))}get checked(){return this._checked}set checked(e){this._setChecked(e)}_setChecked(e){this._checked!==e&&(this._checked=e,this._onDidChange.fire({checked:e}))}async run(e,t){this._actionCallback&&await this._actionCallback(e)}}class Rv extends J{constructor(){super(...arguments),this._onWillRun=this._register(new Y),this.onWillRun=this._onWillRun.event,this._onDidRun=this._register(new Y),this.onDidRun=this._onDidRun.event}async run(e,t){if(!e.enabled)return;this._onWillRun.fire({action:e});let i;try{await this.runAction(e,t)}catch(n){i=n}this._onDidRun.fire({action:e,error:i})}async runAction(e,t){await e.run(t)}}class Os{constructor(){this.id=Os.ID,this.label="",this.tooltip="",this.class="separator",this.enabled=!1,this.checked=!1}static join(...e){let t=[];for(const i of e)i.length&&(t.length?t=[...t,new Os,...i]:t=i);return t}async run(){}}Os.ID="vs.actions.separator";class n1{get actions(){return this._actions}constructor(e,t,i,n){this.tooltip="",this.enabled=!0,this.checked=void 0,this.id=e,this.label=t,this.class=n,this._actions=i}async run(){}}class vA extends za{constructor(){super(vA.ID,v("submenu.empty","(empty)"),void 0,!1)}}vA.ID="vs.actions.empty";function SC(o){var e;return{id:o.id,label:o.label,class:o.class,enabled:(e=o.enabled)!==null&&e!==void 0?e:!0,checked:o.checked,run:async(...t)=>o.run(...t),tooltip:o.label}}var o9;(function(o){function e(t){return t&&typeof t=="object"&&typeof t.id=="string"}o.isThemeColor=e})(o9||(o9={}));var pt;(function(o){o.iconNameSegment="[A-Za-z0-9]+",o.iconNameExpression="[A-Za-z0-9-]+",o.iconModifierExpression="~[A-Za-z]+",o.iconNameCharacter="[A-Za-z0-9~-]";const e=new RegExp(`^(${o.iconNameExpression})(${o.iconModifierExpression})?$`);function t(g){const p=e.exec(g.id);if(!p)return t(Ee.error);const[,_,b]=p,y=["codicon","codicon-"+_];return b&&y.push("codicon-modifier-"+b.substring(1)),y}o.asClassNameArray=t;function i(g){return t(g).join(" ")}o.asClassName=i;function n(g){return"."+t(g).join(".")}o.asCSSSelector=n;function s(g){return g&&typeof g=="object"&&typeof g.id=="string"&&(typeof g.color>"u"||o9.isThemeColor(g.color))}o.isThemeIcon=s;const r=new RegExp(`^\\$\\((${o.iconNameExpression}(?:${o.iconModifierExpression})?)\\)$`);function a(g){const p=r.exec(g);if(!p)return;const[,_]=p;return{id:_}}o.fromString=a;function l(g){return{id:g}}o.fromId=l;function c(g,p){let _=g.id;const b=_.lastIndexOf("~");return b!==-1&&(_=_.substring(0,b)),p&&(_=`${_}~${p}`),{id:_}}o.modify=c;function u(g){const p=g.id.lastIndexOf("~");if(p!==-1)return g.id.substring(p+1)}o.getModifier=u;function f(g,p){var _,b;return g.id===p.id&&((_=g.color)===null||_===void 0?void 0:_.id)===((b=p.color)===null||b===void 0?void 0:b.id)}o.isEqual=f})(pt||(pt={}));const Un=Zt("commandService"),si=new class{constructor(){this._commands=new Map,this._onDidRegisterCommand=new Y,this.onDidRegisterCommand=this._onDidRegisterCommand.event}registerCommand(o,e){if(!o)throw new Error("invalid command");if(typeof o=="string"){if(!e)throw new Error("invalid command");return this.registerCommand({id:o,handler:e})}if(o.metadata&&Array.isArray(o.metadata.args)){const r=[];for(const l of o.metadata.args)r.push(l.constraint);const a=o.handler;o.handler=function(l,...c){return kbe(c,r),a(l,...c)}}const{id:t}=o;let i=this._commands.get(t);i||(i=new Wr,this._commands.set(t,i));const n=i.unshift(o),s=lt(()=>{n();const r=this._commands.get(t);r!=null&&r.isEmpty()&&this._commands.delete(t)});return this._onDidRegisterCommand.fire(t),s}registerCommandAlias(o,e){return si.registerCommand(o,(t,...i)=>t.get(Un).executeCommand(e,...i))}getCommand(o){const e=this._commands.get(o);if(!(!e||e.isEmpty()))return ii.first(e)}getCommands(){const o=new Map;for(const e of this._commands.keys()){const t=this.getCommand(e);t&&o.set(e,t)}return o}};si.registerCommand("noop",()=>{});function e3(...o){switch(o.length){case 1:return v("contextkey.scanner.hint.didYouMean1","Did you mean {0}?",o[0]);case 2:return v("contextkey.scanner.hint.didYouMean2","Did you mean {0} or {1}?",o[0],o[1]);case 3:return v("contextkey.scanner.hint.didYouMean3","Did you mean {0}, {1} or {2}?",o[0],o[1],o[2]);default:return}}const gwe=v("contextkey.scanner.hint.didYouForgetToOpenOrCloseQuote","Did you forget to open or close the quote?"),pwe=v("contextkey.scanner.hint.didYouForgetToEscapeSlash","Did you forget to escape the '/' (slash) character? Put two backslashes before it to escape, e.g., '\\\\/'.");let j_=class r9{constructor(){this._input="",this._start=0,this._current=0,this._tokens=[],this._errors=[],this.stringRe=/[a-zA-Z0-9_<>\-\./\\:\*\?\+\[\]\^,#@;"%\$\p{L}-]+/uy}static getLexeme(e){switch(e.type){case 0:return"(";case 1:return")";case 2:return"!";case 3:return e.isTripleEq?"===":"==";case 4:return e.isTripleEq?"!==":"!=";case 5:return"<";case 6:return"<=";case 7:return">=";case 8:return">=";case 9:return"=~";case 10:return e.lexeme;case 11:return"true";case 12:return"false";case 13:return"in";case 14:return"not";case 15:return"&&";case 16:return"||";case 17:return e.lexeme;case 18:return e.lexeme;case 19:return e.lexeme;case 20:return"EOF";default:throw EV(`unhandled token type: ${JSON.stringify(e)}; have you forgotten to add a case?`)}}reset(e){return this._input=e,this._start=0,this._current=0,this._tokens=[],this._errors=[],this}scan(){for(;!this._isAtEnd();)switch(this._start=this._current,this._advance()){case 40:this._addToken(0);break;case 41:this._addToken(1);break;case 33:if(this._match(61)){const t=this._match(61);this._tokens.push({type:4,offset:this._start,isTripleEq:t})}else this._addToken(2);break;case 39:this._quotedString();break;case 47:this._regex();break;case 61:if(this._match(61)){const t=this._match(61);this._tokens.push({type:3,offset:this._start,isTripleEq:t})}else this._match(126)?this._addToken(9):this._error(e3("==","=~"));break;case 60:this._addToken(this._match(61)?6:5);break;case 62:this._addToken(this._match(61)?8:7);break;case 38:this._match(38)?this._addToken(15):this._error(e3("&&"));break;case 124:this._match(124)?this._addToken(16):this._error(e3("||"));break;case 32:case 13:case 9:case 10:case 160:break;default:this._string()}return this._start=this._current,this._addToken(20),Array.from(this._tokens)}_match(e){return this._isAtEnd()||this._input.charCodeAt(this._current)!==e?!1:(this._current++,!0)}_advance(){return this._input.charCodeAt(this._current++)}_peek(){return this._isAtEnd()?0:this._input.charCodeAt(this._current)}_addToken(e){this._tokens.push({type:e,offset:this._start})}_error(e){const t=this._start,i=this._input.substring(this._start,this._current),n={type:19,offset:this._start,lexeme:i};this._errors.push({offset:t,lexeme:i,additionalInfo:e}),this._tokens.push(n)}_string(){this.stringRe.lastIndex=this._start;const e=this.stringRe.exec(this._input);if(e){this._current=this._start+e[0].length;const t=this._input.substring(this._start,this._current),i=r9._keywords.get(t);i?this._addToken(i):this._tokens.push({type:17,lexeme:t,offset:this._start})}}_quotedString(){for(;this._peek()!==39&&!this._isAtEnd();)this._advance();if(this._isAtEnd()){this._error(gwe);return}this._advance(),this._tokens.push({type:18,lexeme:this._input.substring(this._start+1,this._current-1),offset:this._start+1})}_regex(){let e=this._current,t=!1,i=!1;for(;;){if(e>=this._input.length){this._current=e,this._error(pwe);return}const s=this._input.charCodeAt(e);if(t)t=!1;else if(s===47&&!i){e++;break}else s===91?i=!0:s===92?t=!0:s===93&&(i=!1);e++}for(;e<this._input.length&&r9._regexFlags.has(this._input.charCodeAt(e));)e++;this._current=e;const n=this._input.substring(this._start,this._current);this._tokens.push({type:10,lexeme:n,offset:this._start})}_isAtEnd(){return this._current>=this._input.length}};j_._regexFlags=new Set(["i","g","s","m","y","u"].map(o=>o.charCodeAt(0)));j_._keywords=new Map([["not",14],["in",13],["false",12],["true",11]]);const Qo=new Map;Qo.set("false",!1);Qo.set("true",!0);Qo.set("isMac",Kt);Qo.set("isLinux",jr);Qo.set("isWindows",Mo);Qo.set("isWeb",Mm);Qo.set("isMacNative",Kt&&!Mm);Qo.set("isEdge",zbe);Qo.set("isFirefox",Vbe);Qo.set("isChrome",$te);Qo.set("isSafari",Hbe);const mwe=Object.prototype.hasOwnProperty,_we={regexParsingWithErrorRecovery:!0},vwe=v("contextkey.parser.error.emptyString","Empty context key expression"),bwe=v("contextkey.parser.error.emptyString.hint","Did you forget to write an expression? You can also put 'false' or 'true' to always evaluate to false or true, respectively."),Cwe=v("contextkey.parser.error.noInAfterNot","'in' after 'not'."),PY=v("contextkey.parser.error.closingParenthesis","closing parenthesis ')'"),wwe=v("contextkey.parser.error.unexpectedToken","Unexpected token"),ywe=v("contextkey.parser.error.unexpectedToken.hint","Did you forget to put && or || before the token?"),Swe=v("contextkey.parser.error.unexpectedEOF","Unexpected end of expression"),Lwe=v("contextkey.parser.error.unexpectedEOF.hint","Did you forget to put a context key?");let $ie=class VS{constructor(e=_we){this._config=e,this._scanner=new j_,this._tokens=[],this._current=0,this._parsingErrors=[],this._flagsGYRe=/g|y/g}parse(e){if(e===""){this._parsingErrors.push({message:vwe,offset:0,lexeme:"",additionalInfo:bwe});return}this._tokens=this._scanner.reset(e).scan(),this._current=0,this._parsingErrors=[];try{const t=this._expr();if(!this._isAtEnd()){const i=this._peek(),n=i.type===17?ywe:void 0;throw this._parsingErrors.push({message:wwe,offset:i.offset,lexeme:j_.getLexeme(i),additionalInfo:n}),VS._parseError}return t}catch(t){if(t!==VS._parseError)throw t;return}}_expr(){return this._or()}_or(){const e=[this._and()];for(;this._matchOne(16);){const t=this._and();e.push(t)}return e.length===1?e[0]:ue.or(...e)}_and(){const e=[this._term()];for(;this._matchOne(15);){const t=this._term();e.push(t)}return e.length===1?e[0]:ue.and(...e)}_term(){if(this._matchOne(2)){const e=this._peek();switch(e.type){case 11:return this._advance(),Kr.INSTANCE;case 12:return this._advance(),pa.INSTANCE;case 0:{this._advance();const t=this._expr();return this._consume(1,PY),t==null?void 0:t.negate()}case 17:return this._advance(),rb.create(e.lexeme);default:throw this._errExpectedButGot("KEY | true | false | '(' expression ')'",e)}}return this._primary()}_primary(){const e=this._peek();switch(e.type){case 11:return this._advance(),ue.true();case 12:return this._advance(),ue.false();case 0:{this._advance();const t=this._expr();return this._consume(1,PY),t}case 17:{const t=e.lexeme;if(this._advance(),this._matchOne(9)){const n=this._peek();if(!this._config.regexParsingWithErrorRecovery){if(this._advance(),n.type!==10)throw this._errExpectedButGot("REGEX",n);const s=n.lexeme,r=s.lastIndexOf("/"),a=r===s.length-1?void 0:this._removeFlagsGY(s.substring(r+1));let l;try{l=new RegExp(s.substring(1,r),a)}catch{throw this._errExpectedButGot("REGEX",n)}return sx.create(t,l)}switch(n.type){case 10:case 19:{const s=[n.lexeme];this._advance();let r=this._peek(),a=0;for(let g=0;g<n.lexeme.length;g++)n.lexeme.charCodeAt(g)===40?a++:n.lexeme.charCodeAt(g)===41&&a--;for(;!this._isAtEnd()&&r.type!==15&&r.type!==16;){switch(r.type){case 0:a++;break;case 1:a--;break;case 10:case 18:for(let g=0;g<r.lexeme.length;g++)r.lexeme.charCodeAt(g)===40?a++:n.lexeme.charCodeAt(g)===41&&a--}if(a<0)break;s.push(j_.getLexeme(r)),this._advance(),r=this._peek()}const l=s.join(""),c=l.lastIndexOf("/"),u=c===l.length-1?void 0:this._removeFlagsGY(l.substring(c+1));let f;try{f=new RegExp(l.substring(1,c),u)}catch{throw this._errExpectedButGot("REGEX",n)}return ue.regex(t,f)}case 18:{const s=n.lexeme;this._advance();let r=null;if(!die(s)){const a=s.indexOf("/"),l=s.lastIndexOf("/");if(a!==l&&a>=0){const c=s.slice(a+1,l),u=s[l+1]==="i"?"i":"";try{r=new RegExp(c,u)}catch{throw this._errExpectedButGot("REGEX",n)}}}if(r===null)throw this._errExpectedButGot("REGEX",n);return sx.create(t,r)}default:throw this._errExpectedButGot("REGEX",this._peek())}}if(this._matchOne(14)){this._consume(13,Cwe);const n=this._value();return ue.notIn(t,n)}switch(this._peek().type){case 3:{this._advance();const n=this._value();if(this._previous().type===18)return ue.equals(t,n);switch(n){case"true":return ue.has(t);case"false":return ue.not(t);default:return ue.equals(t,n)}}case 4:{this._advance();const n=this._value();if(this._previous().type===18)return ue.notEquals(t,n);switch(n){case"true":return ue.not(t);case"false":return ue.has(t);default:return ue.notEquals(t,n)}}case 5:return this._advance(),xA.create(t,this._value());case 6:return this._advance(),DA.create(t,this._value());case 7:return this._advance(),SA.create(t,this._value());case 8:return this._advance(),LA.create(t,this._value());case 13:return this._advance(),ue.in(t,this._value());default:return ue.has(t)}}case 20:throw this._parsingErrors.push({message:Swe,offset:e.offset,lexeme:"",additionalInfo:Lwe}),VS._parseError;default:throw this._errExpectedButGot(`true | false | KEY 
	| KEY '=~' REGEX 
	| KEY ('==' | '!=' | '<' | '<=' | '>' | '>=' | 'in' | 'not' 'in') value`,this._peek())}}_value(){const e=this._peek();switch(e.type){case 17:case 18:return this._advance(),e.lexeme;case 11:return this._advance(),"true";case 12:return this._advance(),"false";case 13:return this._advance(),"in";default:return""}}_removeFlagsGY(e){return e.replaceAll(this._flagsGYRe,"")}_previous(){return this._tokens[this._current-1]}_matchOne(e){return this._check(e)?(this._advance(),!0):!1}_advance(){return this._isAtEnd()||this._current++,this._previous()}_consume(e,t){if(this._check(e))return this._advance();throw this._errExpectedButGot(t,this._peek())}_errExpectedButGot(e,t,i){const n=v("contextkey.parser.error.expectedButGot",`Expected: {0}
Received: '{1}'.`,e,j_.getLexeme(t)),s=t.offset,r=j_.getLexeme(t);return this._parsingErrors.push({message:n,offset:s,lexeme:r,additionalInfo:i}),VS._parseError}_check(e){return this._peek().type===e}_peek(){return this._tokens[this._current]}_isAtEnd(){return this._peek().type===20}};$ie._parseError=new Error;class ue{static false(){return Kr.INSTANCE}static true(){return pa.INSTANCE}static has(e){return ob.create(e)}static equals(e,t){return q1.create(e,t)}static notEquals(e,t){return wA.create(e,t)}static regex(e,t){return sx.create(e,t)}static in(e,t){return bA.create(e,t)}static notIn(e,t){return CA.create(e,t)}static not(e){return rb.create(e)}static and(...e){return iv.create(e,null,!0)}static or(...e){return wf.create(e,null,!0)}static deserialize(e){return e==null?void 0:this._parser.parse(e)}}ue._parser=new $ie({regexParsingWithErrorRecovery:!1});function xwe(o,e){const t=o?o.substituteConstants():void 0,i=e?e.substituteConstants():void 0;return!t&&!i?!0:!t||!i?!1:t.equals(i)}function fL(o,e){return o.cmp(e)}class Kr{constructor(){this.type=0}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!1}serialize(){return"false"}keys(){return[]}negate(){return pa.INSTANCE}}Kr.INSTANCE=new Kr;class pa{constructor(){this.type=1}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!0}serialize(){return"true"}keys(){return[]}negate(){return Kr.INSTANCE}}pa.INSTANCE=new pa;class ob{static create(e,t=null){const i=Qo.get(e);return typeof i=="boolean"?i?pa.INSTANCE:Kr.INSTANCE:new ob(e,t)}constructor(e,t){this.key=e,this.negated=t,this.type=2}cmp(e){return e.type!==this.type?this.type-e.type:Kie(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=Qo.get(this.key);return typeof e=="boolean"?e?pa.INSTANCE:Kr.INSTANCE:this}evaluate(e){return!!e.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}negate(){return this.negated||(this.negated=rb.create(this.key,this)),this.negated}}class q1{static create(e,t,i=null){if(typeof t=="boolean")return t?ob.create(e,i):rb.create(e,i);const n=Qo.get(e);return typeof n=="boolean"?t===(n?"true":"false")?pa.INSTANCE:Kr.INSTANCE:new q1(e,t,i)}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=4}cmp(e){return e.type!==this.type?this.type-e.type:ab(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=Qo.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?pa.INSTANCE:Kr.INSTANCE}return this}evaluate(e){return e.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=wA.create(this.key,this.value,this)),this.negated}}class bA{static create(e,t){return new bA(e,t)}constructor(e,t){this.key=e,this.valueKey=t,this.type=10,this.negated=null}cmp(e){return e.type!==this.type?this.type-e.type:ab(this.key,this.valueKey,e.key,e.valueKey)}equals(e){return e.type===this.type?this.key===e.key&&this.valueKey===e.valueKey:!1}substituteConstants(){return this}evaluate(e){const t=e.getValue(this.valueKey),i=e.getValue(this.key);return Array.isArray(t)?t.includes(i):typeof i=="string"&&typeof t=="object"&&t!==null?mwe.call(t,i):!1}serialize(){return`${this.key} in '${this.valueKey}'`}keys(){return[this.key,this.valueKey]}negate(){return this.negated||(this.negated=CA.create(this.key,this.valueKey)),this.negated}}class CA{static create(e,t){return new CA(e,t)}constructor(e,t){this.key=e,this.valueKey=t,this.type=11,this._negated=bA.create(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:this._negated.cmp(e._negated)}equals(e){return e.type===this.type?this._negated.equals(e._negated):!1}substituteConstants(){return this}evaluate(e){return!this._negated.evaluate(e)}serialize(){return`${this.key} not in '${this.valueKey}'`}keys(){return this._negated.keys()}negate(){return this._negated}}class wA{static create(e,t,i=null){if(typeof t=="boolean")return t?rb.create(e,i):ob.create(e,i);const n=Qo.get(e);return typeof n=="boolean"?t===(n?"true":"false")?Kr.INSTANCE:pa.INSTANCE:new wA(e,t,i)}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=5}cmp(e){return e.type!==this.type?this.type-e.type:ab(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=Qo.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?Kr.INSTANCE:pa.INSTANCE}return this}evaluate(e){return e.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=q1.create(this.key,this.value,this)),this.negated}}class rb{static create(e,t=null){const i=Qo.get(e);return typeof i=="boolean"?i?Kr.INSTANCE:pa.INSTANCE:new rb(e,t)}constructor(e,t){this.key=e,this.negated=t,this.type=3}cmp(e){return e.type!==this.type?this.type-e.type:Kie(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=Qo.get(this.key);return typeof e=="boolean"?e?Kr.INSTANCE:pa.INSTANCE:this}evaluate(e){return!e.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=ob.create(this.key,this)),this.negated}}function yA(o,e){if(typeof o=="string"){const t=parseFloat(o);isNaN(t)||(o=t)}return typeof o=="string"||typeof o=="number"?e(o):Kr.INSTANCE}class SA{static create(e,t,i=null){return yA(t,n=>new SA(e,n,i))}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=12}cmp(e){return e.type!==this.type?this.type-e.type:ab(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>this.value}serialize(){return`${this.key} > ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=DA.create(this.key,this.value,this)),this.negated}}class LA{static create(e,t,i=null){return yA(t,n=>new LA(e,n,i))}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=13}cmp(e){return e.type!==this.type?this.type-e.type:ab(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>=this.value}serialize(){return`${this.key} >= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=xA.create(this.key,this.value,this)),this.negated}}class xA{static create(e,t,i=null){return yA(t,n=>new xA(e,n,i))}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=14}cmp(e){return e.type!==this.type?this.type-e.type:ab(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<this.value}serialize(){return`${this.key} < ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=LA.create(this.key,this.value,this)),this.negated}}class DA{static create(e,t,i=null){return yA(t,n=>new DA(e,n,i))}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=15}cmp(e){return e.type!==this.type?this.type-e.type:ab(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<=this.value}serialize(){return`${this.key} <= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=SA.create(this.key,this.value,this)),this.negated}}class sx{static create(e,t){return new sx(e,t)}constructor(e,t){this.key=e,this.regexp=t,this.type=7,this.negated=null}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.key<e.key)return-1;if(this.key>e.key)return 1;const t=this.regexp?this.regexp.source:"",i=e.regexp?e.regexp.source:"";return t<i?-1:t>i?1:0}equals(e){if(e.type===this.type){const t=this.regexp?this.regexp.source:"",i=e.regexp?e.regexp.source:"";return this.key===e.key&&t===i}return!1}substituteConstants(){return this}evaluate(e){const t=e.getValue(this.key);return this.regexp?this.regexp.test(t):!1}serialize(){const e=this.regexp?`/${this.regexp.source}/${this.regexp.flags}`:"/invalid/";return`${this.key} =~ ${e}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=JV.create(this)),this.negated}}class JV{static create(e){return new JV(e)}constructor(e){this._actual=e,this.type=8}cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type?this._actual.equals(e._actual):!1}substituteConstants(){return this}evaluate(e){return!this._actual.evaluate(e)}serialize(){return`!(${this._actual.serialize()})`}keys(){return this._actual.keys()}negate(){return this._actual}}function jie(o){let e=null;for(let t=0,i=o.length;t<i;t++){const n=o[t].substituteConstants();if(o[t]!==n&&e===null){e=[];for(let s=0;s<t;s++)e[s]=o[s]}e!==null&&(e[t]=n)}return e===null?o:e}class iv{static create(e,t,i){return iv._normalizeArr(e,t,i)}constructor(e,t){this.expr=e,this.negated=t,this.type=6}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,i=this.expr.length;t<i;t++){const n=fL(this.expr[t],e.expr[t]);if(n!==0)return n}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,i=this.expr.length;t<i;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=jie(this.expr);return e===this.expr?this:iv.create(e,this.negated,!1)}evaluate(e){for(let t=0,i=this.expr.length;t<i;t++)if(!this.expr[t].evaluate(e))return!1;return!0}static _normalizeArr(e,t,i){const n=[];let s=!1;for(const r of e)if(r){if(r.type===1){s=!0;continue}if(r.type===0)return Kr.INSTANCE;if(r.type===6){n.push(...r.expr);continue}n.push(r)}if(n.length===0&&s)return pa.INSTANCE;if(n.length!==0){if(n.length===1)return n[0];n.sort(fL);for(let r=1;r<n.length;r++)n[r-1].equals(n[r])&&(n.splice(r,1),r--);if(n.length===1)return n[0];for(;n.length>1;){const r=n[n.length-1];if(r.type!==9)break;n.pop();const a=n.pop(),l=n.length===0,c=wf.create(r.expr.map(u=>iv.create([u,a],null,i)),null,l);c&&(n.push(c),n.sort(fL))}if(n.length===1)return n[0];if(i){for(let r=0;r<n.length;r++)for(let a=r+1;a<n.length;a++)if(n[r].negate().equals(n[a]))return Kr.INSTANCE;if(n.length===1)return n[0]}return new iv(n,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" && ")}keys(){const e=[];for(const t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){const e=[];for(const t of this.expr)e.push(t.negate());this.negated=wf.create(e,this,!0)}return this.negated}}class wf{static create(e,t,i){return wf._normalizeArr(e,t,i)}constructor(e,t){this.expr=e,this.negated=t,this.type=9}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,i=this.expr.length;t<i;t++){const n=fL(this.expr[t],e.expr[t]);if(n!==0)return n}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,i=this.expr.length;t<i;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=jie(this.expr);return e===this.expr?this:wf.create(e,this.negated,!1)}evaluate(e){for(let t=0,i=this.expr.length;t<i;t++)if(this.expr[t].evaluate(e))return!0;return!1}static _normalizeArr(e,t,i){let n=[],s=!1;if(e){for(let r=0,a=e.length;r<a;r++){const l=e[r];if(l){if(l.type===0){s=!0;continue}if(l.type===1)return pa.INSTANCE;if(l.type===9){n=n.concat(l.expr);continue}n.push(l)}}if(n.length===0&&s)return Kr.INSTANCE;n.sort(fL)}if(n.length!==0){if(n.length===1)return n[0];for(let r=1;r<n.length;r++)n[r-1].equals(n[r])&&(n.splice(r,1),r--);if(n.length===1)return n[0];if(i){for(let r=0;r<n.length;r++)for(let a=r+1;a<n.length;a++)if(n[r].negate().equals(n[a]))return pa.INSTANCE;if(n.length===1)return n[0]}return new wf(n,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" || ")}keys(){const e=[];for(const t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){const e=[];for(const t of this.expr)e.push(t.negate());for(;e.length>1;){const t=e.shift(),i=e.shift(),n=[];for(const s of FY(t))for(const r of FY(i))n.push(iv.create([s,r],null,!1));e.unshift(wf.create(n,null,!1))}this.negated=wf.create(e,this,!0)}return this.negated}}class Be extends ob{static all(){return Be._info.values()}constructor(e,t,i){super(e,null),this._defaultValue=t,typeof i=="object"?Be._info.push({...i,key:e}):i!==!0&&Be._info.push({key:e,description:i,type:t!=null?typeof t:void 0})}bindTo(e){return e.createKey(this.key,this._defaultValue)}getValue(e){return e.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(e){return q1.create(this.key,e)}}Be._info=[];const bt=Zt("contextKeyService");function Kie(o,e){return o<e?-1:o>e?1:0}function ab(o,e,t,i){return o<t?-1:o>t?1:e<i?-1:e>i?1:0}function a9(o,e){if(o.type===0||e.type===1)return!0;if(o.type===9)return e.type===9?OY(o.expr,e.expr):!1;if(e.type===9){for(const t of e.expr)if(a9(o,t))return!0;return!1}if(o.type===6){if(e.type===6)return OY(e.expr,o.expr);for(const t of o.expr)if(a9(t,e))return!0;return!1}return o.equals(e)}function OY(o,e){let t=0,i=0;for(;t<o.length&&i<e.length;){const n=o[t].cmp(e[i]);if(n<0)return!1;n===0&&t++,i++}return t===o.length}function FY(o){return o.type===9?o.expr:[o]}function t3(o,e){if(!o)throw new Error(e?`Assertion failed (${e})`:"Assertion Failed")}function kA(o,e="Unreachable"){throw new Error(e)}function BY(o){o||Nt(new pn("Soft Assertion Failed"))}function Mv(o){if(!o()){debugger;o(),Nt(new pn("Assertion Failed"))}}function eH(o,e){let t=0;for(;t<o.length-1;){const i=o[t],n=o[t+1];if(!e(i,n))return!1;t++}return!0}class Dwe{constructor(){this.data=new Map}add(e,t){t3(Ur(e)),t3(Br(t)),t3(!this.data.has(e),"There is already an extension with this id"),this.data.set(e,t)}as(e){return this.data.get(e)||null}}const $n=new Dwe;class tH{constructor(){this._coreKeybindings=new Wr,this._extensionKeybindings=[],this._cachedMergedKeybindings=null}static bindToCurrentPlatform(e){if(Va===1){if(e&&e.win)return e.win}else if(Va===2){if(e&&e.mac)return e.mac}else if(e&&e.linux)return e.linux;return e}registerKeybindingRule(e){const t=tH.bindToCurrentPlatform(e),i=new he;if(t&&t.primary){const n=Z7(t.primary,Va);n&&i.add(this._registerDefaultKeybinding(n,e.id,e.args,e.weight,0,e.when))}if(t&&Array.isArray(t.secondary))for(let n=0,s=t.secondary.length;n<s;n++){const r=t.secondary[n],a=Z7(r,Va);a&&i.add(this._registerDefaultKeybinding(a,e.id,e.args,e.weight,-n-1,e.when))}return i}registerCommandAndKeybindingRule(e){return $c(this.registerKeybindingRule(e),si.registerCommand(e))}_registerDefaultKeybinding(e,t,i,n,s,r){const a=this._coreKeybindings.push({keybinding:e,command:t,commandArgs:i,when:r,weight1:n,weight2:s,extensionId:null,isBuiltinExtension:!1});return this._cachedMergedKeybindings=null,lt(()=>{a(),this._cachedMergedKeybindings=null})}getDefaultKeybindings(){return this._cachedMergedKeybindings||(this._cachedMergedKeybindings=Array.from(this._coreKeybindings).concat(this._extensionKeybindings),this._cachedMergedKeybindings.sort(Ewe)),this._cachedMergedKeybindings.slice(0)}}const ma=new tH,kwe={EditorModes:"platform.keybindingsRegistry"};$n.add(kwe.EditorModes,ma);function Ewe(o,e){if(o.weight1!==e.weight1)return o.weight1-e.weight1;if(o.command&&e.command){if(o.command<e.command)return-1;if(o.command>e.command)return 1}return o.weight2-e.weight2}var Iwe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},WY=function(o,e){return function(t,i){e(t,i,o)}},vN;function X0(o){return o.command!==void 0}function Twe(o){return o.submenu!==void 0}class P{constructor(e){if(P._instances.has(e))throw new TypeError(`MenuId with identifier '${e}' already exists. Use MenuId.for(ident) or a unique identifier`);P._instances.set(e,this),this.id=e}}P._instances=new Map;P.CommandPalette=new P("CommandPalette");P.DebugBreakpointsContext=new P("DebugBreakpointsContext");P.DebugCallStackContext=new P("DebugCallStackContext");P.DebugConsoleContext=new P("DebugConsoleContext");P.DebugVariablesContext=new P("DebugVariablesContext");P.NotebookVariablesContext=new P("NotebookVariablesContext");P.DebugHoverContext=new P("DebugHoverContext");P.DebugWatchContext=new P("DebugWatchContext");P.DebugToolBar=new P("DebugToolBar");P.DebugToolBarStop=new P("DebugToolBarStop");P.EditorContext=new P("EditorContext");P.SimpleEditorContext=new P("SimpleEditorContext");P.EditorContent=new P("EditorContent");P.EditorLineNumberContext=new P("EditorLineNumberContext");P.EditorContextCopy=new P("EditorContextCopy");P.EditorContextPeek=new P("EditorContextPeek");P.EditorContextShare=new P("EditorContextShare");P.EditorTitle=new P("EditorTitle");P.EditorTitleRun=new P("EditorTitleRun");P.EditorTitleContext=new P("EditorTitleContext");P.EditorTitleContextShare=new P("EditorTitleContextShare");P.EmptyEditorGroup=new P("EmptyEditorGroup");P.EmptyEditorGroupContext=new P("EmptyEditorGroupContext");P.EditorTabsBarContext=new P("EditorTabsBarContext");P.EditorTabsBarShowTabsSubmenu=new P("EditorTabsBarShowTabsSubmenu");P.EditorTabsBarShowTabsZenModeSubmenu=new P("EditorTabsBarShowTabsZenModeSubmenu");P.EditorActionsPositionSubmenu=new P("EditorActionsPositionSubmenu");P.ExplorerContext=new P("ExplorerContext");P.ExplorerContextShare=new P("ExplorerContextShare");P.ExtensionContext=new P("ExtensionContext");P.GlobalActivity=new P("GlobalActivity");P.CommandCenter=new P("CommandCenter");P.CommandCenterCenter=new P("CommandCenterCenter");P.LayoutControlMenuSubmenu=new P("LayoutControlMenuSubmenu");P.LayoutControlMenu=new P("LayoutControlMenu");P.MenubarMainMenu=new P("MenubarMainMenu");P.MenubarAppearanceMenu=new P("MenubarAppearanceMenu");P.MenubarDebugMenu=new P("MenubarDebugMenu");P.MenubarEditMenu=new P("MenubarEditMenu");P.MenubarCopy=new P("MenubarCopy");P.MenubarFileMenu=new P("MenubarFileMenu");P.MenubarGoMenu=new P("MenubarGoMenu");P.MenubarHelpMenu=new P("MenubarHelpMenu");P.MenubarLayoutMenu=new P("MenubarLayoutMenu");P.MenubarNewBreakpointMenu=new P("MenubarNewBreakpointMenu");P.PanelAlignmentMenu=new P("PanelAlignmentMenu");P.PanelPositionMenu=new P("PanelPositionMenu");P.ActivityBarPositionMenu=new P("ActivityBarPositionMenu");P.MenubarPreferencesMenu=new P("MenubarPreferencesMenu");P.MenubarRecentMenu=new P("MenubarRecentMenu");P.MenubarSelectionMenu=new P("MenubarSelectionMenu");P.MenubarShare=new P("MenubarShare");P.MenubarSwitchEditorMenu=new P("MenubarSwitchEditorMenu");P.MenubarSwitchGroupMenu=new P("MenubarSwitchGroupMenu");P.MenubarTerminalMenu=new P("MenubarTerminalMenu");P.MenubarViewMenu=new P("MenubarViewMenu");P.MenubarHomeMenu=new P("MenubarHomeMenu");P.OpenEditorsContext=new P("OpenEditorsContext");P.OpenEditorsContextShare=new P("OpenEditorsContextShare");P.ProblemsPanelContext=new P("ProblemsPanelContext");P.SCMInputBox=new P("SCMInputBox");P.SCMChangesSeparator=new P("SCMChangesSeparator");P.SCMIncomingChanges=new P("SCMIncomingChanges");P.SCMIncomingChangesContext=new P("SCMIncomingChangesContext");P.SCMIncomingChangesSetting=new P("SCMIncomingChangesSetting");P.SCMOutgoingChanges=new P("SCMOutgoingChanges");P.SCMOutgoingChangesContext=new P("SCMOutgoingChangesContext");P.SCMOutgoingChangesSetting=new P("SCMOutgoingChangesSetting");P.SCMIncomingChangesAllChangesContext=new P("SCMIncomingChangesAllChangesContext");P.SCMIncomingChangesHistoryItemContext=new P("SCMIncomingChangesHistoryItemContext");P.SCMOutgoingChangesAllChangesContext=new P("SCMOutgoingChangesAllChangesContext");P.SCMOutgoingChangesHistoryItemContext=new P("SCMOutgoingChangesHistoryItemContext");P.SCMChangeContext=new P("SCMChangeContext");P.SCMResourceContext=new P("SCMResourceContext");P.SCMResourceContextShare=new P("SCMResourceContextShare");P.SCMResourceFolderContext=new P("SCMResourceFolderContext");P.SCMResourceGroupContext=new P("SCMResourceGroupContext");P.SCMSourceControl=new P("SCMSourceControl");P.SCMSourceControlInline=new P("SCMSourceControlInline");P.SCMSourceControlTitle=new P("SCMSourceControlTitle");P.SCMTitle=new P("SCMTitle");P.SearchContext=new P("SearchContext");P.SearchActionMenu=new P("SearchActionContext");P.StatusBarWindowIndicatorMenu=new P("StatusBarWindowIndicatorMenu");P.StatusBarRemoteIndicatorMenu=new P("StatusBarRemoteIndicatorMenu");P.StickyScrollContext=new P("StickyScrollContext");P.TestItem=new P("TestItem");P.TestItemGutter=new P("TestItemGutter");P.TestMessageContext=new P("TestMessageContext");P.TestMessageContent=new P("TestMessageContent");P.TestPeekElement=new P("TestPeekElement");P.TestPeekTitle=new P("TestPeekTitle");P.TouchBarContext=new P("TouchBarContext");P.TitleBarContext=new P("TitleBarContext");P.TitleBarTitleContext=new P("TitleBarTitleContext");P.TunnelContext=new P("TunnelContext");P.TunnelPrivacy=new P("TunnelPrivacy");P.TunnelProtocol=new P("TunnelProtocol");P.TunnelPortInline=new P("TunnelInline");P.TunnelTitle=new P("TunnelTitle");P.TunnelLocalAddressInline=new P("TunnelLocalAddressInline");P.TunnelOriginInline=new P("TunnelOriginInline");P.ViewItemContext=new P("ViewItemContext");P.ViewContainerTitle=new P("ViewContainerTitle");P.ViewContainerTitleContext=new P("ViewContainerTitleContext");P.ViewTitle=new P("ViewTitle");P.ViewTitleContext=new P("ViewTitleContext");P.CommentEditorActions=new P("CommentEditorActions");P.CommentThreadTitle=new P("CommentThreadTitle");P.CommentThreadActions=new P("CommentThreadActions");P.CommentThreadAdditionalActions=new P("CommentThreadAdditionalActions");P.CommentThreadTitleContext=new P("CommentThreadTitleContext");P.CommentThreadCommentContext=new P("CommentThreadCommentContext");P.CommentTitle=new P("CommentTitle");P.CommentActions=new P("CommentActions");P.CommentsViewThreadActions=new P("CommentsViewThreadActions");P.InteractiveToolbar=new P("InteractiveToolbar");P.InteractiveCellTitle=new P("InteractiveCellTitle");P.InteractiveCellDelete=new P("InteractiveCellDelete");P.InteractiveCellExecute=new P("InteractiveCellExecute");P.InteractiveInputExecute=new P("InteractiveInputExecute");P.IssueReporter=new P("IssueReporter");P.NotebookToolbar=new P("NotebookToolbar");P.NotebookStickyScrollContext=new P("NotebookStickyScrollContext");P.NotebookCellTitle=new P("NotebookCellTitle");P.NotebookCellDelete=new P("NotebookCellDelete");P.NotebookCellInsert=new P("NotebookCellInsert");P.NotebookCellBetween=new P("NotebookCellBetween");P.NotebookCellListTop=new P("NotebookCellTop");P.NotebookCellExecute=new P("NotebookCellExecute");P.NotebookCellExecuteGoTo=new P("NotebookCellExecuteGoTo");P.NotebookCellExecutePrimary=new P("NotebookCellExecutePrimary");P.NotebookDiffCellInputTitle=new P("NotebookDiffCellInputTitle");P.NotebookDiffCellMetadataTitle=new P("NotebookDiffCellMetadataTitle");P.NotebookDiffCellOutputsTitle=new P("NotebookDiffCellOutputsTitle");P.NotebookOutputToolbar=new P("NotebookOutputToolbar");P.NotebookOutlineFilter=new P("NotebookOutlineFilter");P.NotebookOutlineActionMenu=new P("NotebookOutlineActionMenu");P.NotebookEditorLayoutConfigure=new P("NotebookEditorLayoutConfigure");P.NotebookKernelSource=new P("NotebookKernelSource");P.BulkEditTitle=new P("BulkEditTitle");P.BulkEditContext=new P("BulkEditContext");P.TimelineItemContext=new P("TimelineItemContext");P.TimelineTitle=new P("TimelineTitle");P.TimelineTitleContext=new P("TimelineTitleContext");P.TimelineFilterSubMenu=new P("TimelineFilterSubMenu");P.AccountsContext=new P("AccountsContext");P.SidebarTitle=new P("SidebarTitle");P.PanelTitle=new P("PanelTitle");P.AuxiliaryBarTitle=new P("AuxiliaryBarTitle");P.AuxiliaryBarHeader=new P("AuxiliaryBarHeader");P.TerminalInstanceContext=new P("TerminalInstanceContext");P.TerminalEditorInstanceContext=new P("TerminalEditorInstanceContext");P.TerminalNewDropdownContext=new P("TerminalNewDropdownContext");P.TerminalTabContext=new P("TerminalTabContext");P.TerminalTabEmptyAreaContext=new P("TerminalTabEmptyAreaContext");P.TerminalStickyScrollContext=new P("TerminalStickyScrollContext");P.WebviewContext=new P("WebviewContext");P.InlineCompletionsActions=new P("InlineCompletionsActions");P.InlineEditActions=new P("InlineEditActions");P.NewFile=new P("NewFile");P.MergeInput1Toolbar=new P("MergeToolbar1Toolbar");P.MergeInput2Toolbar=new P("MergeToolbar2Toolbar");P.MergeBaseToolbar=new P("MergeBaseToolbar");P.MergeInputResultToolbar=new P("MergeToolbarResultToolbar");P.InlineSuggestionToolbar=new P("InlineSuggestionToolbar");P.InlineEditToolbar=new P("InlineEditToolbar");P.ChatContext=new P("ChatContext");P.ChatCodeBlock=new P("ChatCodeblock");P.ChatMessageTitle=new P("ChatMessageTitle");P.ChatExecute=new P("ChatExecute");P.ChatExecuteSecondary=new P("ChatExecuteSecondary");P.ChatInputSide=new P("ChatInputSide");P.AccessibleView=new P("AccessibleView");P.MultiDiffEditorFileToolbar=new P("MultiDiffEditorFileToolbar");P.DiffEditorHunkToolbar=new P("DiffEditorHunkToolbar");P.DiffEditorSelectionToolbar=new P("DiffEditorSelectionToolbar");const Nl=Zt("menuService");class yf{static for(e){let t=this._all.get(e);return t||(t=new yf(e),this._all.set(e,t)),t}static merge(e){const t=new Set;for(const i of e)i instanceof yf&&t.add(i.id);return t}constructor(e){this.id=e,this.has=t=>t===e}}yf._all=new Map;const Ys=new class{constructor(){this._commands=new Map,this._menuItems=new Map,this._onDidChangeMenu=new K0e({merge:yf.merge}),this.onDidChangeMenu=this._onDidChangeMenu.event}addCommand(o){return this._commands.set(o.id,o),this._onDidChangeMenu.fire(yf.for(P.CommandPalette)),lt(()=>{this._commands.delete(o.id)&&this._onDidChangeMenu.fire(yf.for(P.CommandPalette))})}getCommand(o){return this._commands.get(o)}getCommands(){const o=new Map;return this._commands.forEach((e,t)=>o.set(t,e)),o}appendMenuItem(o,e){let t=this._menuItems.get(o);t||(t=new Wr,this._menuItems.set(o,t));const i=t.push(e);return this._onDidChangeMenu.fire(yf.for(o)),lt(()=>{i(),this._onDidChangeMenu.fire(yf.for(o))})}appendMenuItems(o){const e=new he;for(const{id:t,item:i}of o)e.add(this.appendMenuItem(t,i));return e}getMenuItems(o){let e;return this._menuItems.has(o)?e=[...this._menuItems.get(o)]:e=[],o===P.CommandPalette&&this._appendImplicitItems(e),e}_appendImplicitItems(o){const e=new Set;for(const t of o)X0(t)&&(e.add(t.command.id),t.alt&&e.add(t.alt.id));this._commands.forEach((t,i)=>{e.has(i)||o.push({command:t})})}};class ox extends n1{constructor(e,t,i){super(`submenuitem.${e.submenu.id}`,typeof e.title=="string"?e.title:e.title.value,i,"submenu"),this.item=e,this.hideActions=t}}let Dl=vN=class{static label(e,t){return t!=null&&t.renderShortTitle&&e.shortTitle?typeof e.shortTitle=="string"?e.shortTitle:e.shortTitle.value:typeof e.title=="string"?e.title:e.title.value}constructor(e,t,i,n,s,r){var a,l;this.hideActions=n,this._commandService=r,this.id=e.id,this.label=vN.label(e,i),this.tooltip=(l=typeof e.tooltip=="string"?e.tooltip:(a=e.tooltip)===null||a===void 0?void 0:a.value)!==null&&l!==void 0?l:"",this.enabled=!e.precondition||s.contextMatchesRules(e.precondition),this.checked=void 0;let c;if(e.toggled){const u=e.toggled.condition?e.toggled:{condition:e.toggled};this.checked=s.contextMatchesRules(u.condition),this.checked&&u.tooltip&&(this.tooltip=typeof u.tooltip=="string"?u.tooltip:u.tooltip.value),this.checked&&pt.isThemeIcon(u.icon)&&(c=u.icon),this.checked&&u.title&&(this.label=typeof u.title=="string"?u.title:u.title.value)}c||(c=pt.isThemeIcon(e.icon)?e.icon:void 0),this.item=e,this.alt=t?new vN(t,void 0,i,n,s,r):void 0,this._options=i,this.class=c&&pt.asClassName(c)}run(...e){var t,i;let n=[];return!((t=this._options)===null||t===void 0)&&t.arg&&(n=[...n,this._options.arg]),!((i=this._options)===null||i===void 0)&&i.shouldForwardArgs&&(n=[...n,...e]),this._commandService.executeCommand(this.id,...n)}};Dl=vN=Iwe([WY(4,bt),WY(5,Un)],Dl);class Gr{constructor(e){this.desc=e}}function en(o){const e=new he,t=new o,{f1:i,menu:n,keybinding:s,...r}=t.desc;if(si.getCommand(r.id))throw new Error(`Cannot register two commands with the same id: ${r.id}`);if(e.add(si.registerCommand({id:r.id,handler:(a,...l)=>t.run(a,...l),metadata:r.metadata})),Array.isArray(n))for(const a of n)e.add(Ys.appendMenuItem(a.id,{command:{...r,precondition:a.precondition===null?void 0:r.precondition},...a}));else n&&e.add(Ys.appendMenuItem(n.id,{command:{...r,precondition:n.precondition===null?void 0:r.precondition},...n}));if(i&&(e.add(Ys.appendMenuItem(P.CommandPalette,{command:r,when:r.precondition})),e.add(Ys.addCommand(r))),Array.isArray(s))for(const a of s)e.add(ma.registerKeybindingRule({...a,id:r.id,when:r.precondition?ue.and(r.precondition,a.when):a.when}));else s&&e.add(ma.registerKeybindingRule({...s,id:r.id,when:r.precondition?ue.and(r.precondition,s.when):s.when}));return e}const pr=Zt("telemetryService"),mr=Zt("logService");var Io;(function(o){o[o.Off=0]="Off",o[o.Trace=1]="Trace",o[o.Debug=2]="Debug",o[o.Info=3]="Info",o[o.Warning=4]="Warning",o[o.Error=5]="Error"})(Io||(Io={}));const qie=Io.Info;class Gie extends J{constructor(){super(...arguments),this.level=qie,this._onDidChangeLogLevel=this._register(new Y),this.onDidChangeLogLevel=this._onDidChangeLogLevel.event}setLevel(e){this.level!==e&&(this.level=e,this._onDidChangeLogLevel.fire(this.level))}getLevel(){return this.level}checkLogLevel(e){return this.level!==Io.Off&&this.level<=e}}class Nwe extends Gie{constructor(e=qie,t=!0){super(),this.useColors=t,this.setLevel(e)}trace(e,...t){this.checkLogLevel(Io.Trace)&&(this.useColors?console.log("%cTRACE","color: #888",e,...t):console.log(e,...t))}debug(e,...t){this.checkLogLevel(Io.Debug)&&(this.useColors?console.log("%cDEBUG","background: #eee; color: #888",e,...t):console.log(e,...t))}info(e,...t){this.checkLogLevel(Io.Info)&&(this.useColors?console.log("%c INFO","color: #33f",e,...t):console.log(e,...t))}warn(e,...t){this.checkLogLevel(Io.Warning)&&(this.useColors?console.log("%c WARN","color: #993",e,...t):console.log(e,...t))}error(e,...t){this.checkLogLevel(Io.Error)&&(this.useColors?console.log("%c  ERR","color: #f33",e,...t):console.error(e,...t))}}class Rwe extends Gie{constructor(e){super(),this.loggers=e,e.length&&this.setLevel(e[0].getLevel())}setLevel(e){for(const t of this.loggers)t.setLevel(e);super.setLevel(e)}trace(e,...t){for(const i of this.loggers)i.trace(e,...t)}debug(e,...t){for(const i of this.loggers)i.debug(e,...t)}info(e,...t){for(const i of this.loggers)i.info(e,...t)}warn(e,...t){for(const i of this.loggers)i.warn(e,...t)}error(e,...t){for(const i of this.loggers)i.error(e,...t)}dispose(){for(const e of this.loggers)e.dispose();super.dispose()}}function Mwe(o){switch(o){case Io.Trace:return"trace";case Io.Debug:return"debug";case Io.Info:return"info";case Io.Warning:return"warn";case Io.Error:return"error";case Io.Off:return"off"}}new Be("logLevel",Mwe(Io.Info));class EA{constructor(e){this.id=e.id,this.precondition=e.precondition,this._kbOpts=e.kbOpts,this._menuOpts=e.menuOpts,this.metadata=e.metadata}register(){if(Array.isArray(this._menuOpts)?this._menuOpts.forEach(this._registerMenuItem,this):this._menuOpts&&this._registerMenuItem(this._menuOpts),this._kbOpts){const e=Array.isArray(this._kbOpts)?this._kbOpts:[this._kbOpts];for(const t of e){let i=t.kbExpr;this.precondition&&(i?i=ue.and(i,this.precondition):i=this.precondition);const n={id:this.id,weight:t.weight,args:t.args,when:i,primary:t.primary,secondary:t.secondary,win:t.win,linux:t.linux,mac:t.mac};ma.registerKeybindingRule(n)}}si.registerCommand({id:this.id,handler:(e,t)=>this.runCommand(e,t),metadata:this.metadata})}_registerMenuItem(e){Ys.appendMenuItem(e.menuId,{group:e.group,command:{id:this.id,title:e.title,icon:e.icon,precondition:this.precondition},when:e.when,order:e.order})}}class G1 extends EA{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t,i,n){return this._implementations.push({priority:e,name:t,implementation:i,when:n}),this._implementations.sort((s,r)=>r.priority-s.priority),{dispose:()=>{for(let s=0;s<this._implementations.length;s++)if(this._implementations[s].implementation===i){this._implementations.splice(s,1);return}}}}runCommand(e,t){const i=e.get(mr),n=e.get(bt);i.trace(`Executing Command '${this.id}' which has ${this._implementations.length} bound.`);for(const s of this._implementations){if(s.when){const a=n.getContext(No());if(!s.when.evaluate(a))continue}const r=s.implementation(e,t);if(r)return i.trace(`Command '${this.id}' was handled by '${s.name}'.`),typeof r=="boolean"?void 0:r}i.trace(`The Command '${this.id}' was not handled by any implementation.`)}}class Yie extends EA{constructor(e,t){super(t),this.command=e}runCommand(e,t){return this.command.runCommand(e,t)}}class zs extends EA{static bindToContribution(e){return class extends zs{constructor(i){super(i),this._callback=i.handler}runEditorCommand(i,n,s){const r=e(n);r&&this._callback(r,s)}}}static runEditorCommand(e,t,i,n){const s=e.get(gi),r=s.getFocusedCodeEditor()||s.getActiveCodeEditor();if(r)return r.invokeWithinContext(a=>{if(a.get(bt).contextMatchesRules(i??void 0))return n(a,r,t)})}runCommand(e,t){return zs.runEditorCommand(e,t,this.precondition,(i,n,s)=>this.runEditorCommand(i,n,s))}}class Ke extends zs{static convertOptions(e){let t;Array.isArray(e.menuOpts)?t=e.menuOpts:e.menuOpts?t=[e.menuOpts]:t=[];function i(n){return n.menuId||(n.menuId=P.EditorContext),n.title||(n.title=e.label),n.when=ue.and(e.precondition,n.when),n}return Array.isArray(e.contextMenuOpts)?t.push(...e.contextMenuOpts.map(i)):e.contextMenuOpts&&t.push(i(e.contextMenuOpts)),e.menuOpts=t,e}constructor(e){super(Ke.convertOptions(e)),this.label=e.label,this.alias=e.alias}runEditorCommand(e,t,i){return this.reportTelemetry(e,t),this.run(e,t,i||{})}reportTelemetry(e,t){e.get(pr).publicLog2("editorActionInvoked",{name:this.label,id:this.id})}}class Zie extends Ke{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t){return this._implementations.push([e,t]),this._implementations.sort((i,n)=>n[0]-i[0]),{dispose:()=>{for(let i=0;i<this._implementations.length;i++)if(this._implementations[i][1]===t){this._implementations.splice(i,1);return}}}}run(e,t,i){for(const n of this._implementations){const s=n[1](e,t,i);if(s)return typeof s=="boolean"?void 0:s}}}class iu extends Gr{run(e,...t){const i=e.get(gi),n=i.getFocusedCodeEditor()||i.getActiveCodeEditor();if(n)return n.invokeWithinContext(s=>{var r,a;const l=s.get(bt),c=s.get(mr);if(!l.contextMatchesRules((r=this.desc.precondition)!==null&&r!==void 0?r:void 0)){c.debug("[EditorAction2] NOT running command because its precondition is FALSE",this.desc.id,(a=this.desc.precondition)===null||a===void 0?void 0:a.serialize());return}return this.runEditorCommand(s,n,...t)})}}function xh(o,e){si.registerCommand(o,function(t,...i){const n=t.get(ct),[s,r]=i;wi(gt.isUri(s)),wi(Z.isIPosition(r));const a=t.get(Fn).getModel(s);if(a){const l=Z.lift(r);return n.invokeFunction(e,a,l,...i.slice(2))}return t.get(Ca).createModelReference(s).then(l=>new Promise((c,u)=>{try{const f=n.invokeFunction(e,l.object.textEditorModel,Z.lift(r),i.slice(2));c(f)}catch(f){u(f)}}).finally(()=>{l.dispose()}))})}function Me(o){return Jl.INSTANCE.registerEditorCommand(o),o}function Ce(o){const e=new o;return Jl.INSTANCE.registerEditorAction(e),e}function Qie(o){return Jl.INSTANCE.registerEditorAction(o),o}function Awe(o){Jl.INSTANCE.registerEditorAction(o)}function pi(o,e,t){Jl.INSTANCE.registerEditorContribution(o,e,t)}var LC;(function(o){function e(r){return Jl.INSTANCE.getEditorCommand(r)}o.getEditorCommand=e;function t(){return Jl.INSTANCE.getEditorActions()}o.getEditorActions=t;function i(){return Jl.INSTANCE.getEditorContributions()}o.getEditorContributions=i;function n(r){return Jl.INSTANCE.getEditorContributions().filter(a=>r.indexOf(a.id)>=0)}o.getSomeEditorContributions=n;function s(){return Jl.INSTANCE.getDiffEditorContributions()}o.getDiffEditorContributions=s})(LC||(LC={}));const Pwe={EditorCommonContributions:"editor.contributions"};class Jl{constructor(){this.editorContributions=[],this.diffEditorContributions=[],this.editorActions=[],this.editorCommands=Object.create(null)}registerEditorContribution(e,t,i){this.editorContributions.push({id:e,ctor:t,instantiation:i})}getEditorContributions(){return this.editorContributions.slice(0)}getDiffEditorContributions(){return this.diffEditorContributions.slice(0)}registerEditorAction(e){e.register(),this.editorActions.push(e)}getEditorActions(){return this.editorActions}registerEditorCommand(e){e.register(),this.editorCommands[e.id]=e}getEditorCommand(e){return this.editorCommands[e]||null}}Jl.INSTANCE=new Jl;$n.add(Pwe.EditorCommonContributions,Jl.INSTANCE);function WD(o){return o.register(),o}const Xie=WD(new G1({id:"undo",precondition:void 0,kbOpts:{weight:0,primary:2104},menuOpts:[{menuId:P.MenubarEditMenu,group:"1_do",title:v({key:"miUndo",comment:["&& denotes a mnemonic"]},"&&Undo"),order:1},{menuId:P.CommandPalette,group:"",title:v("undo","Undo"),order:1}]}));WD(new Yie(Xie,{id:"default:undo",precondition:void 0}));const Jie=WD(new G1({id:"redo",precondition:void 0,kbOpts:{weight:0,primary:2103,secondary:[3128],mac:{primary:3128}},menuOpts:[{menuId:P.MenubarEditMenu,group:"1_do",title:v({key:"miRedo",comment:["&& denotes a mnemonic"]},"&&Redo"),order:2},{menuId:P.CommandPalette,group:"",title:v("redo","Redo"),order:1}]}));WD(new Yie(Jie,{id:"default:redo",precondition:void 0}));const Owe=WD(new G1({id:"editor.action.selectAll",precondition:void 0,kbOpts:{weight:0,kbExpr:null,primary:2079},menuOpts:[{menuId:P.MenubarSelectionMenu,group:"1_basic",title:v({key:"miSelectAll",comment:["&& denotes a mnemonic"]},"&&Select All"),order:1},{menuId:P.CommandPalette,group:"",title:v("selectAll","Select All"),order:1}]})),Fwe="$initialize";let VY=!1;function l9(o){Mm&&(VY||(VY=!0,console.warn("Could not create web worker(s). Falling back to loading web worker code in main thread, which might cause UI freezes. Please see https://github.com/microsoft/monaco-editor#faq")),console.warn(o.message))}class Bwe{constructor(e,t,i,n){this.vsWorker=e,this.req=t,this.method=i,this.args=n,this.type=0}}class HY{constructor(e,t,i,n){this.vsWorker=e,this.seq=t,this.res=i,this.err=n,this.type=1}}class Wwe{constructor(e,t,i,n){this.vsWorker=e,this.req=t,this.eventName=i,this.arg=n,this.type=2}}class Vwe{constructor(e,t,i){this.vsWorker=e,this.req=t,this.event=i,this.type=3}}class Hwe{constructor(e,t){this.vsWorker=e,this.req=t,this.type=4}}class zwe{constructor(e){this._workerId=-1,this._handler=e,this._lastSentReq=0,this._pendingReplies=Object.create(null),this._pendingEmitters=new Map,this._pendingEvents=new Map}setWorkerId(e){this._workerId=e}sendMessage(e,t){const i=String(++this._lastSentReq);return new Promise((n,s)=>{this._pendingReplies[i]={resolve:n,reject:s},this._send(new Bwe(this._workerId,i,e,t))})}listen(e,t){let i=null;const n=new Y({onWillAddFirstListener:()=>{i=String(++this._lastSentReq),this._pendingEmitters.set(i,n),this._send(new Wwe(this._workerId,i,e,t))},onDidRemoveLastListener:()=>{this._pendingEmitters.delete(i),this._send(new Hwe(this._workerId,i)),i=null}});return n.event}handleMessage(e){!e||!e.vsWorker||this._workerId!==-1&&e.vsWorker!==this._workerId||this._handleMessage(e)}_handleMessage(e){switch(e.type){case 1:return this._handleReplyMessage(e);case 0:return this._handleRequestMessage(e);case 2:return this._handleSubscribeEventMessage(e);case 3:return this._handleEventMessage(e);case 4:return this._handleUnsubscribeEventMessage(e)}}_handleReplyMessage(e){if(!this._pendingReplies[e.seq]){console.warn("Got reply to unknown seq");return}const t=this._pendingReplies[e.seq];if(delete this._pendingReplies[e.seq],e.err){let i=e.err;e.err.$isError&&(i=new Error,i.name=e.err.name,i.message=e.err.message,i.stack=e.err.stack),t.reject(i);return}t.resolve(e.res)}_handleRequestMessage(e){const t=e.req;this._handler.handleMessage(e.method,e.args).then(n=>{this._send(new HY(this._workerId,t,n,void 0))},n=>{n.detail instanceof Error&&(n.detail=hY(n.detail)),this._send(new HY(this._workerId,t,void 0,hY(n)))})}_handleSubscribeEventMessage(e){const t=e.req,i=this._handler.handleEvent(e.eventName,e.arg)(n=>{this._send(new Vwe(this._workerId,t,n))});this._pendingEvents.set(t,i)}_handleEventMessage(e){if(!this._pendingEmitters.has(e.req)){console.warn("Got event for unknown req");return}this._pendingEmitters.get(e.req).fire(e.event)}_handleUnsubscribeEventMessage(e){if(!this._pendingEvents.has(e.req)){console.warn("Got unsubscribe for unknown req");return}this._pendingEvents.get(e.req).dispose(),this._pendingEvents.delete(e.req)}_send(e){const t=[];if(e.type===0)for(let i=0;i<e.args.length;i++)e.args[i]instanceof ArrayBuffer&&t.push(e.args[i]);else e.type===1&&e.res instanceof ArrayBuffer&&t.push(e.res);this._handler.sendMessage(e,t)}}class Uwe extends J{constructor(e,t,i){super();let n=null;this._worker=this._register(e.create("vs/base/common/worker/simpleWorker",u=>{this._protocol.handleMessage(u)},u=>{n==null||n(u)})),this._protocol=new zwe({sendMessage:(u,f)=>{this._worker.postMessage(u,f)},handleMessage:(u,f)=>{if(typeof i[u]!="function")return Promise.reject(new Error("Missing method "+u+" on main thread host."));try{return Promise.resolve(i[u].apply(i,f))}catch(g){return Promise.reject(g)}},handleEvent:(u,f)=>{if(tne(u)){const g=i[u].call(i,f);if(typeof g!="function")throw new Error(`Missing dynamic event ${u} on main thread host.`);return g}if(ene(u)){const g=i[u];if(typeof g!="function")throw new Error(`Missing event ${u} on main thread host.`);return g}throw new Error(`Malformed event name ${u}`)}}),this._protocol.setWorkerId(this._worker.getId());let s=null;const r=globalThis.require;typeof r<"u"&&typeof r.getConfig=="function"?s=r.getConfig():typeof globalThis.requirejs<"u"&&(s=globalThis.requirejs.s.contexts._.config);const a=SV(i);this._onModuleLoaded=this._protocol.sendMessage(Fwe,[this._worker.getId(),JSON.parse(JSON.stringify(s)),t,a]);const l=(u,f)=>this._request(u,f),c=(u,f)=>this._protocol.listen(u,f);this._lazyProxy=new Promise((u,f)=>{n=f,this._onModuleLoaded.then(g=>{u($we(g,l,c))},g=>{f(g),this._onError("Worker failed to load "+t,g)})})}getProxyObject(){return this._lazyProxy}_request(e,t){return new Promise((i,n)=>{this._onModuleLoaded.then(()=>{this._protocol.sendMessage(e,t).then(i,n)},n)})}_onError(e,t){console.error(e),console.info(t)}}function ene(o){return o[0]==="o"&&o[1]==="n"&&Fu(o.charCodeAt(2))}function tne(o){return/^onDynamic/.test(o)&&Fu(o.charCodeAt(9))}function $we(o,e,t){const i=r=>function(){const a=Array.prototype.slice.call(arguments,0);return e(r,a)},n=r=>function(a){return t(r,a)},s={};for(const r of o){if(tne(r)){s[r]=n(r);continue}if(ene(r)){s[r]=t(r,void 0);continue}s[r]=i(r)}return s}function fg(o,e){var t;const i=globalThis.MonacoEnvironment;if(i!=null&&i.createTrustedTypesPolicy)try{return i.createTrustedTypesPolicy(o,e)}catch(n){Nt(n);return}try{return(t=Hi.trustedTypes)===null||t===void 0?void 0:t.createPolicy(o,e)}catch(n){Nt(n);return}}const zY=fg("defaultWorkerFactory",{createScriptURL:o=>o});function jwe(o){const e=globalThis.MonacoEnvironment;if(e){if(typeof e.getWorker=="function")return e.getWorker("workerMain.js",o);if(typeof e.getWorkerUrl=="function"){const t=e.getWorkerUrl("workerMain.js",o);return new Worker(zY?zY.createScriptURL(t):t,{name:o})}}throw new Error("You must define a function MonacoEnvironment.getWorkerUrl or MonacoEnvironment.getWorker")}function Kwe(o){return typeof o.then=="function"}class qwe extends J{constructor(e,t,i,n,s){super(),this.id=t,this.label=i;const r=jwe(i);Kwe(r)?this.worker=r:this.worker=Promise.resolve(r),this.postMessage(e,[]),this.worker.then(a=>{a.onmessage=function(l){n(l.data)},a.onmessageerror=s,typeof a.addEventListener=="function"&&a.addEventListener("error",s)}),this._register(lt(()=>{var a;(a=this.worker)===null||a===void 0||a.then(l=>{l.onmessage=null,l.onmessageerror=null,l.removeEventListener("error",s),l.terminate()}),this.worker=null}))}getId(){return this.id}postMessage(e,t){var i;(i=this.worker)===null||i===void 0||i.then(n=>{try{n.postMessage(e,t)}catch(s){Nt(s),Nt(new Error(`FAILED to post message to '${this.label}'-worker`,{cause:s}))}})}}class IA{constructor(e){this._label=e,this._webWorkerFailedBeforeError=!1}create(e,t,i){const n=++IA.LAST_WORKER_ID;if(this._webWorkerFailedBeforeError)throw this._webWorkerFailedBeforeError;return new qwe(e,n,this._label||"anonymous"+n,t,s=>{l9(s),this._webWorkerFailedBeforeError=s,i(s)})}}IA.LAST_WORKER_ID=0;var Is;(function(o){o[o.None=0]="None",o[o.Indent=1]="Indent",o[o.IndentOutdent=2]="IndentOutdent",o[o.Outdent=3]="Outdent"})(Is||(Is={}));class i3{constructor(e){if(this._neutralCharacter=null,this._neutralCharacterSearched=!1,this.open=e.open,this.close=e.close,this._inString=!0,this._inComment=!0,this._inRegEx=!0,Array.isArray(e.notIn))for(let t=0,i=e.notIn.length;t<i;t++)switch(e.notIn[t]){case"string":this._inString=!1;break;case"comment":this._inComment=!1;break;case"regex":this._inRegEx=!1;break}}isOK(e){switch(e){case 0:return!0;case 1:return this._inComment;case 2:return this._inString;case 3:return this._inRegEx}}shouldAutoClose(e,t){if(e.getTokenCount()===0)return!0;const i=e.findTokenIndexAtOffset(t-2),n=e.getStandardTokenType(i);return this.isOK(n)}_findNeutralCharacterInRange(e,t){for(let i=e;i<=t;i++){const n=String.fromCharCode(i);if(!this.open.includes(n)&&!this.close.includes(n))return n}return null}findNeutralCharacter(){return this._neutralCharacterSearched||(this._neutralCharacterSearched=!0,this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(48,57)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(97,122)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(65,90))),this._neutralCharacter}}class Gwe{constructor(e){this.autoClosingPairsOpenByStart=new Map,this.autoClosingPairsOpenByEnd=new Map,this.autoClosingPairsCloseByStart=new Map,this.autoClosingPairsCloseByEnd=new Map,this.autoClosingPairsCloseSingleChar=new Map;for(const t of e)dS(this.autoClosingPairsOpenByStart,t.open.charAt(0),t),dS(this.autoClosingPairsOpenByEnd,t.open.charAt(t.open.length-1),t),dS(this.autoClosingPairsCloseByStart,t.close.charAt(0),t),dS(this.autoClosingPairsCloseByEnd,t.close.charAt(t.close.length-1),t),t.close.length===1&&t.open.length===1&&dS(this.autoClosingPairsCloseSingleChar,t.close,t)}}function dS(o,e,t){o.has(e)?o.get(e).push(t):o.set(e,[t])}function TA(o,e){const t=o.getCount(),i=o.findTokenIndexAtOffset(e),n=o.getLanguageId(i);let s=i;for(;s+1<t&&o.getLanguageId(s+1)===n;)s++;let r=i;for(;r>0&&o.getLanguageId(r-1)===n;)r--;return new Ywe(o,n,r,s+1,o.getStartOffset(r),o.getEndOffset(s))}class Ywe{constructor(e,t,i,n,s,r){this._scopedLineTokensBrand=void 0,this._actual=e,this.languageId=t,this._firstTokenIndex=i,this._lastTokenIndex=n,this.firstCharOffset=s,this._lastCharOffset=r}getLineContent(){return this._actual.getLineContent().substring(this.firstCharOffset,this._lastCharOffset)}getActualLineContentBefore(e){return this._actual.getLineContent().substring(0,this.firstCharOffset+e)}getTokenCount(){return this._lastTokenIndex-this._firstTokenIndex}findTokenIndexAtOffset(e){return this._actual.findTokenIndexAtOffset(e+this.firstCharOffset)-this._firstTokenIndex}getStandardTokenType(e){return this._actual.getStandardTokenType(e+this._firstTokenIndex)}}function Tu(o){return(o&3)!==0}class s1{constructor(e){if(e.autoClosingPairs?this._autoClosingPairs=e.autoClosingPairs.map(t=>new i3(t)):e.brackets?this._autoClosingPairs=e.brackets.map(t=>new i3({open:t[0],close:t[1]})):this._autoClosingPairs=[],e.__electricCharacterSupport&&e.__electricCharacterSupport.docComment){const t=e.__electricCharacterSupport.docComment;this._autoClosingPairs.push(new i3({open:t.open,close:t.close||""}))}this._autoCloseBeforeForQuotes=typeof e.autoCloseBefore=="string"?e.autoCloseBefore:s1.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_QUOTES,this._autoCloseBeforeForBrackets=typeof e.autoCloseBefore=="string"?e.autoCloseBefore:s1.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_BRACKETS,this._surroundingPairs=e.surroundingPairs||this._autoClosingPairs}getAutoClosingPairs(){return this._autoClosingPairs}getAutoCloseBeforeSet(e){return e?this._autoCloseBeforeForQuotes:this._autoCloseBeforeForBrackets}getSurroundingPairs(){return this._surroundingPairs}}s1.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_QUOTES=`;:.,=}])> 
	`;s1.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_BRACKETS=`'"\`;:.,=}])> 
	`;const UY=typeof Buffer<"u";let n3;class NA{static wrap(e){return UY&&!Buffer.isBuffer(e)&&(e=Buffer.from(e.buffer,e.byteOffset,e.byteLength)),new NA(e)}constructor(e){this.buffer=e,this.byteLength=this.buffer.byteLength}toString(){return UY?this.buffer.toString():(n3||(n3=new TextDecoder),n3.decode(this.buffer))}}function Zwe(o,e){return o[e+0]<<0>>>0|o[e+1]<<8>>>0}function Qwe(o,e,t){o[t+0]=e&255,e=e>>>8,o[t+1]=e&255}function Cd(o,e){return o[e]*2**24+o[e+1]*2**16+o[e+2]*2**8+o[e+3]}function wd(o,e,t){o[t+3]=e,e=e>>>8,o[t+2]=e,e=e>>>8,o[t+1]=e,e=e>>>8,o[t]=e}function $Y(o,e){return o[e]}function jY(o,e,t){o[t]=e}let s3;function ine(){return s3||(s3=new TextDecoder("UTF-16LE")),s3}let o3;function Xwe(){return o3||(o3=new TextDecoder("UTF-16BE")),o3}let r3;function nne(){return r3||(r3=Ute()?ine():Xwe()),r3}function Jwe(o,e,t){const i=new Uint16Array(o.buffer,e,t);return t>0&&(i[0]===65279||i[0]===65534)?eye(o,e,t):ine().decode(i)}function eye(o,e,t){const i=[];let n=0;for(let s=0;s<t;s++){const r=Zwe(o,e);e+=2,i[n++]=String.fromCharCode(r)}return i.join("")}class Y1{constructor(e){this._capacity=e|0,this._buffer=new Uint16Array(this._capacity),this._completedStrings=null,this._bufferLength=0}reset(){this._completedStrings=null,this._bufferLength=0}build(){return this._completedStrings!==null?(this._flushBuffer(),this._completedStrings.join("")):this._buildBuffer()}_buildBuffer(){if(this._bufferLength===0)return"";const e=new Uint16Array(this._buffer.buffer,0,this._bufferLength);return nne().decode(e)}_flushBuffer(){const e=this._buildBuffer();this._bufferLength=0,this._completedStrings===null?this._completedStrings=[e]:this._completedStrings[this._completedStrings.length]=e}appendCharCode(e){const t=this._capacity-this._bufferLength;t<=1&&(t===0||qs(e))&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendASCIICharCode(e){this._bufferLength===this._capacity&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendString(e){const t=e.length;if(this._bufferLength+t>=this._capacity){this._flushBuffer(),this._completedStrings[this._completedStrings.length]=e;return}for(let i=0;i<t;i++)this._buffer[this._bufferLength++]=e.charCodeAt(i)}}class wR{constructor(e,t,i,n,s,r){this._richEditBracketBrand=void 0,this.languageId=e,this.index=t,this.open=i,this.close=n,this.forwardRegex=s,this.reversedRegex=r,this._openSet=wR._toSet(this.open),this._closeSet=wR._toSet(this.close)}isOpen(e){return this._openSet.has(e)}isClose(e){return this._closeSet.has(e)}static _toSet(e){const t=new Set;for(const i of e)t.add(i);return t}}function tye(o){const e=o.length;o=o.map(r=>[r[0].toLowerCase(),r[1].toLowerCase()]);const t=[];for(let r=0;r<e;r++)t[r]=r;const i=(r,a)=>{const[l,c]=r,[u,f]=a;return l===u||l===f||c===u||c===f},n=(r,a)=>{const l=Math.min(r,a),c=Math.max(r,a);for(let u=0;u<e;u++)t[u]===c&&(t[u]=l)};for(let r=0;r<e;r++){const a=o[r];for(let l=r+1;l<e;l++){const c=o[l];i(a,c)&&n(t[r],t[l])}}const s=[];for(let r=0;r<e;r++){const a=[],l=[];for(let c=0;c<e;c++)if(t[c]===r){const[u,f]=o[c];a.push(u),l.push(f)}a.length>0&&s.push({open:a,close:l})}return s}class iye{constructor(e,t){this._richEditBracketsBrand=void 0;const i=tye(t);this.brackets=i.map((n,s)=>new wR(e,s,n.open,n.close,nye(n.open,n.close,i,s),sye(n.open,n.close,i,s))),this.forwardRegex=oye(this.brackets),this.reversedRegex=rye(this.brackets),this.textIsBracket={},this.textIsOpenBracket={},this.maxBracketLength=0;for(const n of this.brackets){for(const s of n.open)this.textIsBracket[s]=n,this.textIsOpenBracket[s]=!0,this.maxBracketLength=Math.max(this.maxBracketLength,s.length);for(const s of n.close)this.textIsBracket[s]=n,this.textIsOpenBracket[s]=!1,this.maxBracketLength=Math.max(this.maxBracketLength,s.length)}}}function sne(o,e,t,i){for(let n=0,s=e.length;n<s;n++){if(n===t)continue;const r=e[n];for(const a of r.open)a.indexOf(o)>=0&&i.push(a);for(const a of r.close)a.indexOf(o)>=0&&i.push(a)}}function one(o,e){return o.length-e.length}function RA(o){if(o.length<=1)return o;const e=[],t=new Set;for(const i of o)t.has(i)||(e.push(i),t.add(i));return e}function nye(o,e,t,i){let n=[];n=n.concat(o),n=n.concat(e);for(let s=0,r=n.length;s<r;s++)sne(n[s],t,i,n);return n=RA(n),n.sort(one),n.reverse(),MA(n)}function sye(o,e,t,i){let n=[];n=n.concat(o),n=n.concat(e);for(let s=0,r=n.length;s<r;s++)sne(n[s],t,i,n);return n=RA(n),n.sort(one),n.reverse(),MA(n.map(iH))}function oye(o){let e=[];for(const t of o){for(const i of t.open)e.push(i);for(const i of t.close)e.push(i)}return e=RA(e),MA(e)}function rye(o){let e=[];for(const t of o){for(const i of t.open)e.push(i);for(const i of t.close)e.push(i)}return e=RA(e),MA(e.map(iH))}function aye(o){const e=/^[\w ]+$/.test(o);return o=Ll(o),e?`\\b${o}\\b`:o}function MA(o){const e=`(${o.map(aye).join(")|(")})`;return hie(e,!0)}const iH=function(){function o(i){const n=new Uint16Array(i.length);let s=0;for(let r=i.length-1;r>=0;r--)n[s++]=i.charCodeAt(r);return nne().decode(n)}let e=null,t=null;return function(n){return e!==n&&(e=n,t=o(e)),t}}();class Mc{static _findPrevBracketInText(e,t,i,n){const s=i.match(e);if(!s)return null;const r=i.length-(s.index||0),a=s[0].length,l=n+r;return new A(t,l-a+1,t,l+1)}static findPrevBracketInRange(e,t,i,n,s){const a=iH(i).substring(i.length-s,i.length-n);return this._findPrevBracketInText(e,t,a,n)}static findNextBracketInText(e,t,i,n){const s=i.match(e);if(!s)return null;const r=s.index||0,a=s[0].length;if(a===0)return null;const l=n+r;return new A(t,l+1,t,l+1+a)}static findNextBracketInRange(e,t,i,n,s){const r=i.substring(n,s);return this.findNextBracketInText(e,t,r,n)}}class lye{constructor(e){this._richEditBrackets=e}getElectricCharacters(){const e=[];if(this._richEditBrackets)for(const t of this._richEditBrackets.brackets)for(const i of t.close){const n=i.charAt(i.length-1);e.push(n)}return eg(e)}onElectricCharacter(e,t,i){if(!this._richEditBrackets||this._richEditBrackets.brackets.length===0)return null;const n=t.findTokenIndexAtOffset(i-1);if(Tu(t.getStandardTokenType(n)))return null;const s=this._richEditBrackets.reversedRegex,r=t.getLineContent().substring(0,i-1)+e,a=Mc.findPrevBracketInRange(s,1,r,0,r.length);if(!a)return null;const l=r.substring(a.startColumn-1,a.endColumn-1).toLowerCase();if(this._richEditBrackets.textIsOpenBracket[l])return null;const u=t.getActualLineContentBefore(a.startColumn-1);return/^\s*$/.test(u)?{matchOpenBracket:l}:null}}function YI(o){return o.global&&(o.lastIndex=0),!0}class cye{constructor(e){this._indentationRules=e}shouldIncrease(e){return!!(this._indentationRules&&this._indentationRules.increaseIndentPattern&&YI(this._indentationRules.increaseIndentPattern)&&this._indentationRules.increaseIndentPattern.test(e))}shouldDecrease(e){return!!(this._indentationRules&&this._indentationRules.decreaseIndentPattern&&YI(this._indentationRules.decreaseIndentPattern)&&this._indentationRules.decreaseIndentPattern.test(e))}shouldIndentNextLine(e){return!!(this._indentationRules&&this._indentationRules.indentNextLinePattern&&YI(this._indentationRules.indentNextLinePattern)&&this._indentationRules.indentNextLinePattern.test(e))}shouldIgnore(e){return!!(this._indentationRules&&this._indentationRules.unIndentedLinePattern&&YI(this._indentationRules.unIndentedLinePattern)&&this._indentationRules.unIndentedLinePattern.test(e))}getIndentMetadata(e){let t=0;return this.shouldIncrease(e)&&(t+=1),this.shouldDecrease(e)&&(t+=2),this.shouldIndentNextLine(e)&&(t+=4),this.shouldIgnore(e)&&(t+=8),t}}class J0{constructor(e){e=e||{},e.brackets=e.brackets||[["(",")"],["{","}"],["[","]"]],this._brackets=[],e.brackets.forEach(t=>{const i=J0._createOpenBracketRegExp(t[0]),n=J0._createCloseBracketRegExp(t[1]);i&&n&&this._brackets.push({open:t[0],openRegExp:i,close:t[1],closeRegExp:n})}),this._regExpRules=e.onEnterRules||[]}onEnter(e,t,i,n){if(e>=3)for(let s=0,r=this._regExpRules.length;s<r;s++){const a=this._regExpRules[s];if([{reg:a.beforeText,text:i},{reg:a.afterText,text:n},{reg:a.previousLineText,text:t}].every(c=>c.reg?(c.reg.lastIndex=0,c.reg.test(c.text)):!0))return a.action}if(e>=2&&i.length>0&&n.length>0)for(let s=0,r=this._brackets.length;s<r;s++){const a=this._brackets[s];if(a.openRegExp.test(i)&&a.closeRegExp.test(n))return{indentAction:Is.IndentOutdent}}if(e>=2&&i.length>0){for(let s=0,r=this._brackets.length;s<r;s++)if(this._brackets[s].openRegExp.test(i))return{indentAction:Is.Indent}}return null}static _createOpenBracketRegExp(e){let t=Ll(e);return/\B/.test(t.charAt(0))||(t="\\b"+t),t+="\\s*$",J0._safeRegExp(t)}static _createCloseBracketRegExp(e){let t=Ll(e);return/\B/.test(t.charAt(t.length-1))||(t=t+"\\b"),t="^\\s*"+t,J0._safeRegExp(t)}static _safeRegExp(e){try{return new RegExp(e)}catch(t){return Nt(t),null}}}const $t=Zt("configurationService");function c9(o,e){const t=Object.create(null);for(const i in o)rne(t,i,o[i],e);return t}function rne(o,e,t,i){const n=e.split("."),s=n.pop();let r=o;for(let a=0;a<n.length;a++){const l=n[a];let c=r[l];switch(typeof c){case"undefined":c=r[l]=Object.create(null);break;case"object":break;default:i(`Ignoring ${e} as ${n.slice(0,a+1).join(".")} is ${JSON.stringify(c)}`);return}r=c}if(typeof r=="object"&&r!==null)try{r[s]=t}catch{i(`Ignoring ${e} as ${n.join(".")} is ${JSON.stringify(r)}`)}else i(`Ignoring ${e} as ${n.join(".")} is ${JSON.stringify(r)}`)}function dye(o,e){const t=e.split(".");ane(o,t)}function ane(o,e){const t=e.shift();if(e.length===0){delete o[t];return}if(Object.keys(o).indexOf(t)!==-1){const i=o[t];typeof i=="object"&&!Array.isArray(i)&&(ane(i,e),Object.keys(i).length===0&&delete o[t])}}function KY(o,e,t){function i(r,a){let l=r;for(const c of a){if(typeof l!="object"||l===null)return;l=l[c]}return l}const n=e.split("."),s=i(o,n);return typeof s>"u"?t:s}function uye(o){return o.replace(/[\[\]]/g,"")}const xn=Zt("languageService");class Bu{constructor(e,t=[],i=!1){this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=i}}const lne=[];function oi(o,e,t){e instanceof Bu||(e=new Bu(e,[],!!t)),lne.push([o,e])}function qY(){return lne}const ns=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list"}),AA={JSONContribution:"base.contributions.json"};function hye(o){return o.length>0&&o.charAt(o.length-1)==="#"?o.substring(0,o.length-1):o}class fye{constructor(){this._onDidChangeSchema=new Y,this.schemasById={}}registerSchema(e,t){this.schemasById[hye(e)]=t,this._onDidChangeSchema.fire(e)}notifySchemaChanged(e){this._onDidChangeSchema.fire(e)}}const gye=new fye;$n.add(AA.JSONContribution,gye);const nu={Configuration:"base.contributions.configuration"},uS="vscode://schemas/settings/resourceLanguage",GY=$n.as(AA.JSONContribution);class pye{constructor(){this.overrideIdentifiers=new Set,this._onDidSchemaChange=new Y,this._onDidUpdateConfiguration=new Y,this.configurationDefaultsOverrides=new Map,this.defaultLanguageConfigurationOverridesNode={id:"defaultOverrides",title:v("defaultLanguageConfigurationOverrides.title","Default Language Configuration Overrides"),properties:{}},this.configurationContributors=[this.defaultLanguageConfigurationOverridesNode],this.resourceLanguageSettingsSchema={properties:{},patternProperties:{},additionalProperties:!0,allowTrailingCommas:!0,allowComments:!0},this.configurationProperties={},this.policyConfigurations=new Map,this.excludedConfigurationProperties={},GY.registerSchema(uS,this.resourceLanguageSettingsSchema),this.registerOverridePropertyPatternKey()}registerConfiguration(e,t=!0){this.registerConfigurations([e],t)}registerConfigurations(e,t=!0){const i=new Set;this.doRegisterConfigurations(e,t,i),GY.registerSchema(uS,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:i})}registerDefaultConfigurations(e){const t=new Set;this.doRegisterDefaultConfigurations(e,t),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:t,defaultsOverrides:!0})}doRegisterDefaultConfigurations(e,t){var i;const n=[];for(const{overrides:s,source:r}of e)for(const a in s)if(t.add(a),fm.test(a)){const l=this.configurationDefaultsOverrides.get(a),c=(i=l==null?void 0:l.valuesSources)!==null&&i!==void 0?i:new Map;if(r)for(const p of Object.keys(s[a]))c.set(p,r);const u={...(l==null?void 0:l.value)||{},...s[a]};this.configurationDefaultsOverrides.set(a,{source:r,value:u,valuesSources:c});const f=uye(a),g={type:"object",default:u,description:v("defaultLanguageConfiguration.description","Configure settings to be overridden for the {0} language.",f),$ref:uS,defaultDefaultValue:u,source:Ur(r)?void 0:r,defaultValueSource:r};n.push(...yR(a)),this.configurationProperties[a]=g,this.defaultLanguageConfigurationOverridesNode.properties[a]=g}else{this.configurationDefaultsOverrides.set(a,{value:s[a],source:r});const l=this.configurationProperties[a];l&&(this.updatePropertyDefaultValue(a,l),this.updateSchema(a,l))}this.doRegisterOverrideIdentifiers(n)}registerOverrideIdentifiers(e){this.doRegisterOverrideIdentifiers(e),this._onDidSchemaChange.fire()}doRegisterOverrideIdentifiers(e){for(const t of e)this.overrideIdentifiers.add(t);this.updateOverridePropertyPatternKey()}doRegisterConfigurations(e,t,i){e.forEach(n=>{this.validateAndRegisterProperties(n,t,n.extensionInfo,n.restrictedProperties,void 0,i),this.configurationContributors.push(n),this.registerJSONConfiguration(n)})}validateAndRegisterProperties(e,t=!0,i,n,s=3,r){var a;s=pl(e.scope)?s:e.scope;const l=e.properties;if(l)for(const u in l){const f=l[u];if(t&&vye(u,f)){delete l[u];continue}if(f.source=i,f.defaultDefaultValue=l[u].default,this.updatePropertyDefaultValue(u,f),fm.test(u)?f.scope=void 0:(f.scope=pl(f.scope)?s:f.scope,f.restricted=pl(f.restricted)?!!(n!=null&&n.includes(u)):f.restricted),l[u].hasOwnProperty("included")&&!l[u].included){this.excludedConfigurationProperties[u]=l[u],delete l[u];continue}else this.configurationProperties[u]=l[u],!((a=l[u].policy)===null||a===void 0)&&a.name&&this.policyConfigurations.set(l[u].policy.name,u);!l[u].deprecationMessage&&l[u].markdownDeprecationMessage&&(l[u].deprecationMessage=l[u].markdownDeprecationMessage),r.add(u)}const c=e.allOf;if(c)for(const u of c)this.validateAndRegisterProperties(u,t,i,n,s,r)}getConfigurationProperties(){return this.configurationProperties}getPolicyConfigurations(){return this.policyConfigurations}registerJSONConfiguration(e){const t=i=>{const n=i.properties;if(n)for(const r in n)this.updateSchema(r,n[r]);const s=i.allOf;s==null||s.forEach(t)};t(e)}updateSchema(e,t){switch(t.scope){case 1:break;case 2:break;case 6:break;case 3:break;case 4:break;case 5:this.resourceLanguageSettingsSchema.properties[e]=t;break}}updateOverridePropertyPatternKey(){for(const e of this.overrideIdentifiers.values()){const t=`[${e}]`,i={type:"object",description:v("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),errorMessage:v("overrideSettings.errorMessage","This setting does not support per-language configuration."),$ref:uS};this.updatePropertyDefaultValue(t,i)}}registerOverridePropertyPatternKey(){v("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),v("overrideSettings.errorMessage","This setting does not support per-language configuration."),this._onDidSchemaChange.fire()}updatePropertyDefaultValue(e,t){const i=this.configurationDefaultsOverrides.get(e);let n=i==null?void 0:i.value,s=i==null?void 0:i.source;Wa(n)&&(n=t.defaultDefaultValue,s=void 0),Wa(n)&&(n=_ye(t.type)),t.default=n,t.defaultValueSource=s}}const cne="\\[([^\\]]+)\\]",YY=new RegExp(cne,"g"),mye=`^(${cne})+$`,fm=new RegExp(mye);function yR(o){const e=[];if(fm.test(o)){let t=YY.exec(o);for(;t!=null&&t.length;){const i=t[1].trim();i&&e.push(i),t=YY.exec(o)}}return eg(e)}function _ye(o){switch(Array.isArray(o)?o[0]:o){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}const bN=new pye;$n.add(nu.Configuration,bN);function vye(o,e){var t,i,n,s;return o.trim()?fm.test(o)?v("config.property.languageDefault","Cannot register '{0}'. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.",o):bN.getConfigurationProperties()[o]!==void 0?v("config.property.duplicate","Cannot register '{0}'. This property is already registered.",o):!((t=e.policy)===null||t===void 0)&&t.name&&bN.getPolicyConfigurations().get((i=e.policy)===null||i===void 0?void 0:i.name)!==void 0?v("config.policy.duplicate","Cannot register '{0}'. The associated policy {1} is already registered with {2}.",o,(n=e.policy)===null||n===void 0?void 0:n.name,bN.getPolicyConfigurations().get((s=e.policy)===null||s===void 0?void 0:s.name)):null:v("config.property.empty","Cannot register an empty property")}const bye={ModesRegistry:"editor.modesRegistry"};class Cye{constructor(){this._onDidChangeLanguages=new Y,this.onDidChangeLanguages=this._onDidChangeLanguages.event,this._languages=[]}registerLanguage(e){return this._languages.push(e),this._onDidChangeLanguages.fire(void 0),{dispose:()=>{for(let t=0,i=this._languages.length;t<i;t++)if(this._languages[t]===e){this._languages.splice(t,1);return}}}}getLanguages(){return this._languages}}const o1=new Cye;$n.add(bye.ModesRegistry,o1);const yl="plaintext",wye=".txt";o1.registerLanguage({id:yl,extensions:[wye],aliases:[v("plainText.alias","Plain Text"),"text"],mimetypes:[ns.text]});$n.as(nu.Configuration).registerDefaultConfigurations([{overrides:{"[plaintext]":{"editor.unicodeHighlight.ambiguousCharacters":!1,"editor.unicodeHighlight.invisibleCharacters":!1}}}]);class yye{constructor(e,t){this.languageId=e;const i=t.brackets?ZY(t.brackets):[],n=new _Y(a=>{const l=new Set;return{info:new Sye(this,a,l),closing:l}}),s=new _Y(a=>{const l=new Set,c=new Set;return{info:new Lye(this,a,l,c),opening:l,openingColorized:c}});for(const[a,l]of i){const c=n.get(a),u=s.get(l);c.closing.add(u.info),u.opening.add(c.info)}const r=t.colorizedBracketPairs?ZY(t.colorizedBracketPairs):i.filter(a=>!(a[0]==="<"&&a[1]===">"));for(const[a,l]of r){const c=n.get(a),u=s.get(l);c.closing.add(u.info),u.openingColorized.add(c.info),u.opening.add(c.info)}this._openingBrackets=new Map([...n.cachedValues].map(([a,l])=>[a,l.info])),this._closingBrackets=new Map([...s.cachedValues].map(([a,l])=>[a,l.info]))}get openingBrackets(){return[...this._openingBrackets.values()]}get closingBrackets(){return[...this._closingBrackets.values()]}getOpeningBracketInfo(e){return this._openingBrackets.get(e)}getClosingBracketInfo(e){return this._closingBrackets.get(e)}getBracketInfo(e){return this.getOpeningBracketInfo(e)||this.getClosingBracketInfo(e)}}function ZY(o){return o.filter(([e,t])=>e!==""&&t!=="")}class dne{constructor(e,t){this.config=e,this.bracketText=t}get languageId(){return this.config.languageId}}class Sye extends dne{constructor(e,t,i){super(e,t),this.openedBrackets=i,this.isOpeningBracket=!0}}class Lye extends dne{constructor(e,t,i,n){super(e,t),this.openingBrackets=i,this.openingColorizedBrackets=n,this.isOpeningBracket=!1}closes(e){return e.config!==this.config?!1:this.openingBrackets.has(e)}closesColorized(e){return e.config!==this.config?!1:this.openingColorizedBrackets.has(e)}getOpeningBrackets(){return[...this.openingBrackets]}}var xye=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},QY=function(o,e){return function(t,i){e(t,i,o)}};class a3{constructor(e){this.languageId=e}affects(e){return this.languageId?this.languageId===e:!0}}const dn=Zt("languageConfigurationService");let d9=class extends J{constructor(e,t){super(),this.configurationService=e,this.languageService=t,this._registry=this._register(new Iye),this.onDidChangeEmitter=this._register(new Y),this.onDidChange=this.onDidChangeEmitter.event,this.configurations=new Map;const i=new Set(Object.values(u9));this._register(this.configurationService.onDidChangeConfiguration(n=>{const s=n.change.keys.some(a=>i.has(a)),r=n.change.overrides.filter(([a,l])=>l.some(c=>i.has(c))).map(([a])=>a);if(s)this.configurations.clear(),this.onDidChangeEmitter.fire(new a3(void 0));else for(const a of r)this.languageService.isRegisteredLanguageId(a)&&(this.configurations.delete(a),this.onDidChangeEmitter.fire(new a3(a)))})),this._register(this._registry.onDidChange(n=>{this.configurations.delete(n.languageId),this.onDidChangeEmitter.fire(new a3(n.languageId))}))}register(e,t,i){return this._registry.register(e,t,i)}getLanguageConfiguration(e){let t=this.configurations.get(e);return t||(t=Dye(e,this._registry,this.configurationService,this.languageService),this.configurations.set(e,t)),t}};d9=xye([QY(0,$t),QY(1,xn)],d9);function Dye(o,e,t,i){let n=e.getLanguageConfiguration(o);if(!n){if(!i.isRegisteredLanguageId(o))return new DC(o,{});n=new DC(o,{})}const s=kye(n.languageId,t),r=hne([n.underlyingConfig,s]);return new DC(n.languageId,r)}const u9={brackets:"editor.language.brackets",colorizedBracketPairs:"editor.language.colorizedBracketPairs"};function kye(o,e){const t=e.getValue(u9.brackets,{overrideIdentifier:o}),i=e.getValue(u9.colorizedBracketPairs,{overrideIdentifier:o});return{brackets:XY(t),colorizedBracketPairs:XY(i)}}function XY(o){if(Array.isArray(o))return o.map(e=>{if(!(!Array.isArray(e)||e.length!==2))return[e[0],e[1]]}).filter(e=>!!e)}function une(o,e,t){const i=o.getLineContent(e);let n=an(i);return n.length>t-1&&(n=n.substring(0,t-1)),n}function xC(o,e,t){o.tokenization.forceTokenization(e);const i=o.tokenization.getLineTokens(e),n=typeof t>"u"?o.getLineMaxColumn(e)-1:t-1;return TA(i,n)}class Eye{constructor(e){this.languageId=e,this._resolved=null,this._entries=[],this._order=0,this._resolved=null}register(e,t){const i=new JY(e,t,++this._order);return this._entries.push(i),this._resolved=null,lt(()=>{for(let n=0;n<this._entries.length;n++)if(this._entries[n]===i){this._entries.splice(n,1),this._resolved=null;break}})}getResolvedConfiguration(){if(!this._resolved){const e=this._resolve();e&&(this._resolved=new DC(this.languageId,e))}return this._resolved}_resolve(){return this._entries.length===0?null:(this._entries.sort(JY.cmp),hne(this._entries.map(e=>e.configuration)))}}function hne(o){let e={comments:void 0,brackets:void 0,wordPattern:void 0,indentationRules:void 0,onEnterRules:void 0,autoClosingPairs:void 0,surroundingPairs:void 0,autoCloseBefore:void 0,folding:void 0,colorizedBracketPairs:void 0,__electricCharacterSupport:void 0};for(const t of o)e={comments:t.comments||e.comments,brackets:t.brackets||e.brackets,wordPattern:t.wordPattern||e.wordPattern,indentationRules:t.indentationRules||e.indentationRules,onEnterRules:t.onEnterRules||e.onEnterRules,autoClosingPairs:t.autoClosingPairs||e.autoClosingPairs,surroundingPairs:t.surroundingPairs||e.surroundingPairs,autoCloseBefore:t.autoCloseBefore||e.autoCloseBefore,folding:t.folding||e.folding,colorizedBracketPairs:t.colorizedBracketPairs||e.colorizedBracketPairs,__electricCharacterSupport:t.__electricCharacterSupport||e.__electricCharacterSupport};return e}class JY{constructor(e,t,i){this.configuration=e,this.priority=t,this.order=i}static cmp(e,t){return e.priority===t.priority?e.order-t.order:e.priority-t.priority}}class eZ{constructor(e){this.languageId=e}}class Iye extends J{constructor(){super(),this._entries=new Map,this._onDidChange=this._register(new Y),this.onDidChange=this._onDidChange.event,this._register(this.register(yl,{brackets:[["(",")"],["[","]"],["{","}"]],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:"<",close:">"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}],colorizedBracketPairs:[],folding:{offSide:!0}},0))}register(e,t,i=0){let n=this._entries.get(e);n||(n=new Eye(e),this._entries.set(e,n));const s=n.register(t,i);return this._onDidChange.fire(new eZ(e)),lt(()=>{s.dispose(),this._onDidChange.fire(new eZ(e))})}getLanguageConfiguration(e){const t=this._entries.get(e);return(t==null?void 0:t.getResolvedConfiguration())||null}}class DC{constructor(e,t){this.languageId=e,this.underlyingConfig=t,this._brackets=null,this._electricCharacter=null,this._onEnterSupport=this.underlyingConfig.brackets||this.underlyingConfig.indentationRules||this.underlyingConfig.onEnterRules?new J0(this.underlyingConfig):null,this.comments=DC._handleComments(this.underlyingConfig),this.characterPair=new s1(this.underlyingConfig),this.wordDefinition=this.underlyingConfig.wordPattern||DV,this.indentationRules=this.underlyingConfig.indentationRules,this.underlyingConfig.indentationRules?this.indentRulesSupport=new cye(this.underlyingConfig.indentationRules):this.indentRulesSupport=null,this.foldingRules=this.underlyingConfig.folding||{},this.bracketsNew=new yye(e,this.underlyingConfig)}getWordDefinition(){return kV(this.wordDefinition)}get brackets(){return!this._brackets&&this.underlyingConfig.brackets&&(this._brackets=new iye(this.languageId,this.underlyingConfig.brackets)),this._brackets}get electricCharacter(){return this._electricCharacter||(this._electricCharacter=new lye(this.brackets)),this._electricCharacter}onEnter(e,t,i,n){return this._onEnterSupport?this._onEnterSupport.onEnter(e,t,i,n):null}getAutoClosingPairs(){return new Gwe(this.characterPair.getAutoClosingPairs())}getAutoCloseBeforeSet(e){return this.characterPair.getAutoCloseBeforeSet(e)}getSurroundingPairs(){return this.characterPair.getSurroundingPairs()}static _handleComments(e){const t=e.comments;if(!t)return null;const i={};if(t.lineComment&&(i.lineCommentToken=t.lineComment),t.blockComment){const[n,s]=t.blockComment;i.blockCommentStartToken=n,i.blockCommentEndToken=s}return i}}oi(dn,d9,1);class rp{constructor(e,t,i,n){this.originalStart=e,this.originalLength=t,this.modifiedStart=i,this.modifiedLength=n}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}}class tZ{constructor(e){this.source=e}getElements(){const e=this.source,t=new Int32Array(e.length);for(let i=0,n=e.length;i<n;i++)t[i]=e.charCodeAt(i);return t}}function Tye(o,e,t){return new zu(new tZ(o),new tZ(e)).ComputeDiff(t).changes}class S0{static Assert(e,t){if(!e)throw new Error(t)}}class L0{static Copy(e,t,i,n,s){for(let r=0;r<s;r++)i[n+r]=e[t+r]}static Copy2(e,t,i,n,s){for(let r=0;r<s;r++)i[n+r]=e[t+r]}}class iZ{constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new rp(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_originalCount++}AddModifiedElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}}class zu{constructor(e,t,i=null){this.ContinueProcessingPredicate=i,this._originalSequence=e,this._modifiedSequence=t;const[n,s,r]=zu._getElements(e),[a,l,c]=zu._getElements(t);this._hasStrings=r&&c,this._originalStringElements=n,this._originalElementsOrHash=s,this._modifiedStringElements=a,this._modifiedElementsOrHash=l,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _isStringArray(e){return e.length>0&&typeof e[0]=="string"}static _getElements(e){const t=e.getElements();if(zu._isStringArray(t)){const i=new Int32Array(t.length);for(let n=0,s=t.length;n<s;n++)i[n]=qV(t[n],0);return[t,i,!0]}return t instanceof Int32Array?[[],t,!1]:[[],new Int32Array(t),!1]}ElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._modifiedStringElements[t]:!0}ElementsAreStrictEqual(e,t){if(!this.ElementsAreEqual(e,t))return!1;const i=zu._getStrictElement(this._originalSequence,e),n=zu._getStrictElement(this._modifiedSequence,t);return i===n}static _getStrictElement(e,t){return typeof e.getStrictElement=="function"?e.getStrictElement(t):null}OriginalElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._originalElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._originalStringElements[t]:!0}ModifiedElementsAreEqual(e,t){return this._modifiedElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._modifiedStringElements[e]===this._modifiedStringElements[t]:!0}ComputeDiff(e){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,e)}_ComputeDiff(e,t,i,n,s){const r=[!1];let a=this.ComputeDiffRecursive(e,t,i,n,r);return s&&(a=this.PrettifyChanges(a)),{quitEarly:r[0],changes:a}}ComputeDiffRecursive(e,t,i,n,s){for(s[0]=!1;e<=t&&i<=n&&this.ElementsAreEqual(e,i);)e++,i++;for(;t>=e&&n>=i&&this.ElementsAreEqual(t,n);)t--,n--;if(e>t||i>n){let f;return i<=n?(S0.Assert(e===t+1,"originalStart should only be one more than originalEnd"),f=[new rp(e,0,i,n-i+1)]):e<=t?(S0.Assert(i===n+1,"modifiedStart should only be one more than modifiedEnd"),f=[new rp(e,t-e+1,i,0)]):(S0.Assert(e===t+1,"originalStart should only be one more than originalEnd"),S0.Assert(i===n+1,"modifiedStart should only be one more than modifiedEnd"),f=[]),f}const r=[0],a=[0],l=this.ComputeRecursionPoint(e,t,i,n,r,a,s),c=r[0],u=a[0];if(l!==null)return l;if(!s[0]){const f=this.ComputeDiffRecursive(e,c,i,u,s);let g=[];return s[0]?g=[new rp(c+1,t-(c+1)+1,u+1,n-(u+1)+1)]:g=this.ComputeDiffRecursive(c+1,t,u+1,n,s),this.ConcatenateChanges(f,g)}return[new rp(e,t-e+1,i,n-i+1)]}WALKTRACE(e,t,i,n,s,r,a,l,c,u,f,g,p,_,b,y,S,L){let x=null,D=null,E=new iZ,N=t,M=i,F=p[0]-y[0]-n,H=-1073741824,Q=this.m_forwardHistory.length-1;do{const K=F+e;K===N||K<M&&c[K-1]<c[K+1]?(f=c[K+1],_=f-F-n,f<H&&E.MarkNextChange(),H=f,E.AddModifiedElement(f+1,_),F=K+1-e):(f=c[K-1]+1,_=f-F-n,f<H&&E.MarkNextChange(),H=f-1,E.AddOriginalElement(f,_+1),F=K-1-e),Q>=0&&(c=this.m_forwardHistory[Q],e=c[0],N=1,M=c.length-1)}while(--Q>=-1);if(x=E.getReverseChanges(),L[0]){let K=p[0]+1,j=y[0]+1;if(x!==null&&x.length>0){const q=x[x.length-1];K=Math.max(K,q.getOriginalEnd()),j=Math.max(j,q.getModifiedEnd())}D=[new rp(K,g-K+1,j,b-j+1)]}else{E=new iZ,N=r,M=a,F=p[0]-y[0]-l,H=1073741824,Q=S?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{const K=F+s;K===N||K<M&&u[K-1]>=u[K+1]?(f=u[K+1]-1,_=f-F-l,f>H&&E.MarkNextChange(),H=f+1,E.AddOriginalElement(f+1,_+1),F=K+1-s):(f=u[K-1],_=f-F-l,f>H&&E.MarkNextChange(),H=f,E.AddModifiedElement(f+1,_+1),F=K-1-s),Q>=0&&(u=this.m_reverseHistory[Q],s=u[0],N=1,M=u.length-1)}while(--Q>=-1);D=E.getChanges()}return this.ConcatenateChanges(x,D)}ComputeRecursionPoint(e,t,i,n,s,r,a){let l=0,c=0,u=0,f=0,g=0,p=0;e--,i--,s[0]=0,r[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];const _=t-e+(n-i),b=_+1,y=new Int32Array(b),S=new Int32Array(b),L=n-i,x=t-e,D=e-i,E=t-n,M=(x-L)%2===0;y[L]=e,S[x]=t,a[0]=!1;for(let F=1;F<=_/2+1;F++){let H=0,Q=0;u=this.ClipDiagonalBound(L-F,F,L,b),f=this.ClipDiagonalBound(L+F,F,L,b);for(let j=u;j<=f;j+=2){j===u||j<f&&y[j-1]<y[j+1]?l=y[j+1]:l=y[j-1]+1,c=l-(j-L)-D;const q=l;for(;l<t&&c<n&&this.ElementsAreEqual(l+1,c+1);)l++,c++;if(y[j]=l,l+c>H+Q&&(H=l,Q=c),!M&&Math.abs(j-x)<=F-1&&l>=S[j])return s[0]=l,r[0]=c,q<=S[j]&&F<=1448?this.WALKTRACE(L,u,f,D,x,g,p,E,y,S,l,t,s,c,n,r,M,a):null}const K=(H-e+(Q-i)-F)/2;if(this.ContinueProcessingPredicate!==null&&!this.ContinueProcessingPredicate(H,K))return a[0]=!0,s[0]=H,r[0]=Q,K>0&&F<=1448?this.WALKTRACE(L,u,f,D,x,g,p,E,y,S,l,t,s,c,n,r,M,a):(e++,i++,[new rp(e,t-e+1,i,n-i+1)]);g=this.ClipDiagonalBound(x-F,F,x,b),p=this.ClipDiagonalBound(x+F,F,x,b);for(let j=g;j<=p;j+=2){j===g||j<p&&S[j-1]>=S[j+1]?l=S[j+1]-1:l=S[j-1],c=l-(j-x)-E;const q=l;for(;l>e&&c>i&&this.ElementsAreEqual(l,c);)l--,c--;if(S[j]=l,M&&Math.abs(j-L)<=F&&l<=y[j])return s[0]=l,r[0]=c,q>=y[j]&&F<=1448?this.WALKTRACE(L,u,f,D,x,g,p,E,y,S,l,t,s,c,n,r,M,a):null}if(F<=1447){let j=new Int32Array(f-u+2);j[0]=L-u+1,L0.Copy2(y,u,j,1,f-u+1),this.m_forwardHistory.push(j),j=new Int32Array(p-g+2),j[0]=x-g+1,L0.Copy2(S,g,j,1,p-g+1),this.m_reverseHistory.push(j)}}return this.WALKTRACE(L,u,f,D,x,g,p,E,y,S,l,t,s,c,n,r,M,a)}PrettifyChanges(e){for(let t=0;t<e.length;t++){const i=e[t],n=t<e.length-1?e[t+1].originalStart:this._originalElementsOrHash.length,s=t<e.length-1?e[t+1].modifiedStart:this._modifiedElementsOrHash.length,r=i.originalLength>0,a=i.modifiedLength>0;for(;i.originalStart+i.originalLength<n&&i.modifiedStart+i.modifiedLength<s&&(!r||this.OriginalElementsAreEqual(i.originalStart,i.originalStart+i.originalLength))&&(!a||this.ModifiedElementsAreEqual(i.modifiedStart,i.modifiedStart+i.modifiedLength));){const c=this.ElementsAreStrictEqual(i.originalStart,i.modifiedStart);if(this.ElementsAreStrictEqual(i.originalStart+i.originalLength,i.modifiedStart+i.modifiedLength)&&!c)break;i.originalStart++,i.modifiedStart++}const l=[null];if(t<e.length-1&&this.ChangesOverlap(e[t],e[t+1],l)){e[t]=l[0],e.splice(t+1,1),t--;continue}}for(let t=e.length-1;t>=0;t--){const i=e[t];let n=0,s=0;if(t>0){const f=e[t-1];n=f.originalStart+f.originalLength,s=f.modifiedStart+f.modifiedLength}const r=i.originalLength>0,a=i.modifiedLength>0;let l=0,c=this._boundaryScore(i.originalStart,i.originalLength,i.modifiedStart,i.modifiedLength);for(let f=1;;f++){const g=i.originalStart-f,p=i.modifiedStart-f;if(g<n||p<s||r&&!this.OriginalElementsAreEqual(g,g+i.originalLength)||a&&!this.ModifiedElementsAreEqual(p,p+i.modifiedLength))break;const b=(g===n&&p===s?5:0)+this._boundaryScore(g,i.originalLength,p,i.modifiedLength);b>c&&(c=b,l=f)}i.originalStart-=l,i.modifiedStart-=l;const u=[null];if(t>0&&this.ChangesOverlap(e[t-1],e[t],u)){e[t-1]=u[0],e.splice(t,1),t++;continue}}if(this._hasStrings)for(let t=1,i=e.length;t<i;t++){const n=e[t-1],s=e[t],r=s.originalStart-n.originalStart-n.originalLength,a=n.originalStart,l=s.originalStart+s.originalLength,c=l-a,u=n.modifiedStart,f=s.modifiedStart+s.modifiedLength,g=f-u;if(r<5&&c<20&&g<20){const p=this._findBetterContiguousSequence(a,c,u,g,r);if(p){const[_,b]=p;(_!==n.originalStart+n.originalLength||b!==n.modifiedStart+n.modifiedLength)&&(n.originalLength=_-n.originalStart,n.modifiedLength=b-n.modifiedStart,s.originalStart=_+r,s.modifiedStart=b+r,s.originalLength=l-s.originalStart,s.modifiedLength=f-s.modifiedStart)}}}return e}_findBetterContiguousSequence(e,t,i,n,s){if(t<s||n<s)return null;const r=e+t-s+1,a=i+n-s+1;let l=0,c=0,u=0;for(let f=e;f<r;f++)for(let g=i;g<a;g++){const p=this._contiguousSequenceScore(f,g,s);p>0&&p>l&&(l=p,c=f,u=g)}return l>0?[c,u]:null}_contiguousSequenceScore(e,t,i){let n=0;for(let s=0;s<i;s++){if(!this.ElementsAreEqual(e+s,t+s))return 0;n+=this._originalStringElements[e+s].length}return n}_OriginalIsBoundary(e){return e<=0||e>=this._originalElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._originalStringElements[e])}_OriginalRegionIsBoundary(e,t){if(this._OriginalIsBoundary(e)||this._OriginalIsBoundary(e-1))return!0;if(t>0){const i=e+t;if(this._OriginalIsBoundary(i-1)||this._OriginalIsBoundary(i))return!0}return!1}_ModifiedIsBoundary(e){return e<=0||e>=this._modifiedElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[e])}_ModifiedRegionIsBoundary(e,t){if(this._ModifiedIsBoundary(e)||this._ModifiedIsBoundary(e-1))return!0;if(t>0){const i=e+t;if(this._ModifiedIsBoundary(i-1)||this._ModifiedIsBoundary(i))return!0}return!1}_boundaryScore(e,t,i,n){const s=this._OriginalRegionIsBoundary(e,t)?1:0,r=this._ModifiedRegionIsBoundary(i,n)?1:0;return s+r}ConcatenateChanges(e,t){const i=[];if(e.length===0||t.length===0)return t.length>0?t:e;if(this.ChangesOverlap(e[e.length-1],t[0],i)){const n=new Array(e.length+t.length-1);return L0.Copy(e,0,n,0,e.length-1),n[e.length-1]=i[0],L0.Copy(t,1,n,e.length,t.length-1),n}else{const n=new Array(e.length+t.length);return L0.Copy(e,0,n,0,e.length),L0.Copy(t,0,n,e.length,t.length),n}}ChangesOverlap(e,t,i){if(S0.Assert(e.originalStart<=t.originalStart,"Left change is not less than or equal to right change"),S0.Assert(e.modifiedStart<=t.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=t.originalStart||e.modifiedStart+e.modifiedLength>=t.modifiedStart){const n=e.originalStart;let s=e.originalLength;const r=e.modifiedStart;let a=e.modifiedLength;return e.originalStart+e.originalLength>=t.originalStart&&(s=t.originalStart+t.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=t.modifiedStart&&(a=t.modifiedStart+t.modifiedLength-e.modifiedStart),i[0]=new rp(n,s,r,a),!0}else return i[0]=null,!1}ClipDiagonalBound(e,t,i,n){if(e>=0&&e<n)return e;const s=i,r=n-i-1,a=t%2===0;if(e<0){const l=s%2===0;return a===l?0:1}else{const l=r%2===0;return a===l?n-1:n-2}}}function SR(o){return o<0?0:o>255?255:o|0}function x0(o){return o<0?0:o>4294967295?4294967295:o|0}class Nye{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}insertValues(e,t){e=x0(e);const i=this.values,n=this.prefixSum,s=t.length;return s===0?!1:(this.values=new Uint32Array(i.length+s),this.values.set(i.subarray(0,e),0),this.values.set(i.subarray(e),e+s),this.values.set(t,e),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(n.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}setValue(e,t){return e=x0(e),t=x0(t),this.values[e]===t?!1:(this.values[e]=t,e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),!0)}removeValues(e,t){e=x0(e),t=x0(t);const i=this.values,n=this.prefixSum;if(e>=i.length)return!1;const s=i.length-e;return t>=s&&(t=s),t===0?!1:(this.values=new Uint32Array(i.length-t),this.values.set(i.subarray(0,e),0),this.values.set(i.subarray(e+t),e),this.prefixSum=new Uint32Array(this.values.length),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(n.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=x0(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let t=this.prefixSumValidIndex[0]+1;t===0&&(this.prefixSum[0]=this.values[0],t++),e>=this.values.length&&(e=this.values.length-1);for(let i=t;i<=e;i++)this.prefixSum[i]=this.prefixSum[i-1]+this.values[i];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let t=0,i=this.values.length-1,n=0,s=0,r=0;for(;t<=i;)if(n=t+(i-t)/2|0,s=this.prefixSum[n],r=s-this.values[n],e<r)i=n-1;else if(e>=s)t=n+1;else break;return new fne(n,e-r)}}class Rye{constructor(e){this._values=e,this._isValid=!1,this._validEndIndex=-1,this._prefixSum=[],this._indexBySum=[]}getTotalSum(){return this._ensureValid(),this._indexBySum.length}getPrefixSum(e){return this._ensureValid(),e===0?0:this._prefixSum[e-1]}getIndexOf(e){this._ensureValid();const t=this._indexBySum[e],i=t>0?this._prefixSum[t-1]:0;return new fne(t,e-i)}removeValues(e,t){this._values.splice(e,t),this._invalidate(e)}insertValues(e,t){this._values=lA(this._values,e,t),this._invalidate(e)}_invalidate(e){this._isValid=!1,this._validEndIndex=Math.min(this._validEndIndex,e-1)}_ensureValid(){if(!this._isValid){for(let e=this._validEndIndex+1,t=this._values.length;e<t;e++){const i=this._values[e],n=e>0?this._prefixSum[e-1]:0;this._prefixSum[e]=n+i;for(let s=0;s<i;s++)this._indexBySum[n+s]=e}this._prefixSum.length=this._values.length,this._indexBySum.length=this._prefixSum[this._prefixSum.length-1],this._isValid=!0,this._validEndIndex=this._values.length-1}}setValue(e,t){this._values[e]!==t&&(this._values[e]=t,this._invalidate(e))}}class fne{constructor(e,t){this.index=e,this.remainder=t,this._prefixSumIndexOfResultBrand=void 0,this.index=e,this.remainder=t}}class Mye{constructor(e,t,i,n){this._uri=e,this._lines=t,this._eol=i,this._versionId=n,this._lineStarts=null,this._cachedTextValue=null}dispose(){this._lines.length=0}get version(){return this._versionId}getText(){return this._cachedTextValue===null&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue}onEvents(e){e.eol&&e.eol!==this._eol&&(this._eol=e.eol,this._lineStarts=null);const t=e.changes;for(const i of t)this._acceptDeleteRange(i.range),this._acceptInsertText(new Z(i.range.startLineNumber,i.range.startColumn),i.text);this._versionId=e.versionId,this._cachedTextValue=null}_ensureLineStarts(){if(!this._lineStarts){const e=this._eol.length,t=this._lines.length,i=new Uint32Array(t);for(let n=0;n<t;n++)i[n]=this._lines[n].length+e;this._lineStarts=new Nye(i)}}_setLineText(e,t){this._lines[e]=t,this._lineStarts&&this._lineStarts.setValue(e,this._lines[e].length+this._eol.length)}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.startLineNumber-1].substring(e.endColumn-1));return}this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.endLineNumber-1].substring(e.endColumn-1)),this._lines.splice(e.startLineNumber,e.endLineNumber-e.startLineNumber),this._lineStarts&&this._lineStarts.removeValues(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t){if(t.length===0)return;const i=Sh(t);if(i.length===1){this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+i[0]+this._lines[e.lineNumber-1].substring(e.column-1));return}i[i.length-1]+=this._lines[e.lineNumber-1].substring(e.column-1),this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+i[0]);const n=new Uint32Array(i.length-1);for(let s=1;s<i.length;s++)this._lines.splice(e.lineNumber+s-1,0,i[s]),n[s-1]=i[s].length+this._eol.length;this._lineStarts&&this._lineStarts.insertValues(e.lineNumber,n)}}class Z1{constructor(e){const t=SR(e);this._defaultValue=t,this._asciiMap=Z1._createAsciiMap(t),this._map=new Map}static _createAsciiMap(e){const t=new Uint8Array(256);return t.fill(e),t}set(e,t){const i=SR(t);e>=0&&e<256?this._asciiMap[e]=i:this._map.set(e,i)}get(e){return e>=0&&e<256?this._asciiMap[e]:this._map.get(e)||this._defaultValue}clear(){this._asciiMap.fill(this._defaultValue),this._map.clear()}}class LR{constructor(){this._actual=new Z1(0)}add(e){this._actual.set(e,1)}has(e){return this._actual.get(e)===1}clear(){return this._actual.clear()}}class Aye{constructor(e,t,i){const n=new Uint8Array(e*t);for(let s=0,r=e*t;s<r;s++)n[s]=i;this._data=n,this.rows=e,this.cols=t}get(e,t){return this._data[e*this.cols+t]}set(e,t,i){this._data[e*this.cols+t]=i}}class Pye{constructor(e){let t=0,i=0;for(let s=0,r=e.length;s<r;s++){const[a,l,c]=e[s];l>t&&(t=l),a>i&&(i=a),c>i&&(i=c)}t++,i++;const n=new Aye(i,t,0);for(let s=0,r=e.length;s<r;s++){const[a,l,c]=e[s];n.set(a,l,c)}this._states=n,this._maxCharCode=t}nextState(e,t){return t<0||t>=this._maxCharCode?0:this._states.get(e,t)}}let l3=null;function Oye(){return l3===null&&(l3=new Pye([[1,104,2],[1,72,2],[1,102,6],[1,70,6],[2,116,3],[2,84,3],[3,116,4],[3,84,4],[4,112,5],[4,80,5],[5,115,9],[5,83,9],[5,58,10],[6,105,7],[6,73,7],[7,108,8],[7,76,8],[8,101,9],[8,69,9],[9,58,10],[10,47,11],[11,47,12]])),l3}let hS=null;function Fye(){if(hS===null){hS=new Z1(0);const o=` 	<>'"`;for(let t=0;t<o.length;t++)hS.set(o.charCodeAt(t),1);const e=".,;:";for(let t=0;t<e.length;t++)hS.set(e.charCodeAt(t),2)}return hS}class xR{static _createLink(e,t,i,n,s){let r=s-1;do{const a=t.charCodeAt(r);if(e.get(a)!==2)break;r--}while(r>n);if(n>0){const a=t.charCodeAt(n-1),l=t.charCodeAt(r);(a===40&&l===41||a===91&&l===93||a===123&&l===125)&&r--}return{range:{startLineNumber:i,startColumn:n+1,endLineNumber:i,endColumn:r+2},url:t.substring(n,r+1)}}static computeLinks(e,t=Oye()){const i=Fye(),n=[];for(let s=1,r=e.getLineCount();s<=r;s++){const a=e.getLineContent(s),l=a.length;let c=0,u=0,f=0,g=1,p=!1,_=!1,b=!1,y=!1;for(;c<l;){let S=!1;const L=a.charCodeAt(c);if(g===13){let x;switch(L){case 40:p=!0,x=0;break;case 41:x=p?0:1;break;case 91:b=!0,_=!0,x=0;break;case 93:b=!1,x=_?0:1;break;case 123:y=!0,x=0;break;case 125:x=y?0:1;break;case 39:case 34:case 96:f===L?x=1:f===39||f===34||f===96?x=0:x=1;break;case 42:x=f===42?1:0;break;case 124:x=f===124?1:0;break;case 32:x=b?0:1;break;default:x=i.get(L)}x===1&&(n.push(xR._createLink(i,a,s,u,c)),S=!0)}else if(g===12){let x;L===91?(_=!0,x=0):x=i.get(L),x===1?S=!0:g=13}else g=t.nextState(g,L),g===0&&(S=!0);S&&(g=1,p=!1,_=!1,y=!1,u=c+1,f=L),c++}g===13&&n.push(xR._createLink(i,a,s,u,l))}return n}}function Bye(o){return!o||typeof o.getLineCount!="function"||typeof o.getLineContent!="function"?[]:xR.computeLinks(o)}class h9{constructor(){this._defaultValueSet=[["true","false"],["True","False"],["Private","Public","Friend","ReadOnly","Partial","Protected","WriteOnly"],["public","protected","private"]]}navigateValueSet(e,t,i,n,s){if(e&&t){const r=this.doNavigateValueSet(t,s);if(r)return{range:e,value:r}}if(i&&n){const r=this.doNavigateValueSet(n,s);if(r)return{range:i,value:r}}return null}doNavigateValueSet(e,t){const i=this.numberReplace(e,t);return i!==null?i:this.textReplace(e,t)}numberReplace(e,t){const i=Math.pow(10,e.length-(e.lastIndexOf(".")+1));let n=Number(e);const s=parseFloat(e);return!isNaN(n)&&!isNaN(s)&&n===s?n===0&&!t?null:(n=Math.floor(n*i),n+=t?i:-i,String(n/i)):null}textReplace(e,t){return this.valueSetsReplace(this._defaultValueSet,e,t)}valueSetsReplace(e,t,i){let n=null;for(let s=0,r=e.length;n===null&&s<r;s++)n=this.valueSetReplace(e[s],t,i);return n}valueSetReplace(e,t,i){let n=e.indexOf(t);return n>=0?(n+=i?1:-1,n<0?n=e.length-1:n%=e.length,e[n]):null}}h9.INSTANCE=new h9;var nZ,sZ;class Wye{constructor(e,t){this.uri=e,this.value=t}}function Vye(o){return Array.isArray(o)}class ds{constructor(e,t){if(this[nZ]="ResourceMap",e instanceof ds)this.map=new Map(e.map),this.toKey=t??ds.defaultToKey;else if(Vye(e)){this.map=new Map,this.toKey=t??ds.defaultToKey;for(const[i,n]of e)this.set(i,n)}else this.map=new Map,this.toKey=e??ds.defaultToKey}set(e,t){return this.map.set(this.toKey(e),new Wye(e,t)),this}get(e){var t;return(t=this.map.get(this.toKey(e)))===null||t===void 0?void 0:t.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,t){typeof t<"u"&&(e=e.bind(t));for(const[i,n]of this.map)e(n.value,n.uri,this)}*values(){for(const e of this.map.values())yield e.value}*keys(){for(const e of this.map.values())yield e.uri}*entries(){for(const e of this.map.values())yield[e.uri,e.value]}*[(nZ=Symbol.toStringTag,Symbol.iterator)](){for(const[,e]of this.map)yield[e.uri,e.value]}}ds.defaultToKey=o=>o.toString();class Hye{constructor(){this[sZ]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return(e=this._head)===null||e===void 0?void 0:e.value}get last(){var e;return(e=this._tail)===null||e===void 0?void 0:e.value}has(e){return this._map.has(e)}get(e,t=0){const i=this._map.get(e);if(i)return t!==0&&this.touch(i,t),i.value}set(e,t,i=0){let n=this._map.get(e);if(n)n.value=t,i!==0&&this.touch(n,i);else{switch(n={key:e,value:t,next:void 0,previous:void 0},i){case 0:this.addItemLast(n);break;case 1:this.addItemFirst(n);break;case 2:this.addItemLast(n);break;default:this.addItemLast(n);break}this._map.set(e,n),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){const i=this._state;let n=this._head;for(;n;){if(t?e.bind(t)(n.value,n.key,this):e(n.value,n.key,this),this._state!==i)throw new Error("LinkedMap got modified during iteration.");n=n.next}}keys(){const e=this,t=this._state;let i=this._head;const n={[Symbol.iterator](){return n},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const s={value:i.key,done:!1};return i=i.next,s}else return{value:void 0,done:!0}}};return n}values(){const e=this,t=this._state;let i=this._head;const n={[Symbol.iterator](){return n},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const s={value:i.value,done:!1};return i=i.next,s}else return{value:void 0,done:!0}}};return n}entries(){const e=this,t=this._state;let i=this._head;const n={[Symbol.iterator](){return n},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const s={value:[i.key,i.value],done:!1};return i=i.next,s}else return{value:void 0,done:!0}}};return n}[(sZ=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._head,i=this.size;for(;t&&i>e;)this._map.delete(t.key),t=t.next,i--;this._head=t,this._size=i,t&&(t.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const t=e.next,i=e.previous;if(!t||!i)throw new Error("Invalid list");t.previous=i,i.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(t!==1&&t!==2)){if(t===1){if(e===this._head)return;const i=e.next,n=e.previous;e===this._tail?(n.next=void 0,this._tail=n):(i.previous=n,n.next=i),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===2){if(e===this._tail)return;const i=e.next,n=e.previous;e===this._head?(i.previous=void 0,this._head=i):(i.previous=n,n.next=i),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){const e=[];return this.forEach((t,i)=>{e.push([i,t])}),e}fromJSON(e){this.clear();for(const[t,i]of e)this.set(t,i)}}class Dh extends Hye{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get(e,t=2){return super.get(e,t)}peek(e){return super.get(e,0)}set(e,t){return super.set(e,t,2),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}class zye{constructor(e){if(this._m1=new Map,this._m2=new Map,e)for(const[t,i]of e)this.set(t,i)}clear(){this._m1.clear(),this._m2.clear()}set(e,t){this._m1.set(e,t),this._m2.set(t,e)}get(e){return this._m1.get(e)}getKey(e){return this._m2.get(e)}delete(e){const t=this._m1.get(e);return t===void 0?!1:(this._m1.delete(e),this._m2.delete(t),!0)}keys(){return this._m1.keys()}values(){return this._m1.values()}}class nH{constructor(){this.map=new Map}add(e,t){let i=this.map.get(e);i||(i=new Set,this.map.set(e,i)),i.add(t)}delete(e,t){const i=this.map.get(e);i&&(i.delete(t),i.size===0&&this.map.delete(e))}forEach(e,t){const i=this.map.get(e);i&&i.forEach(t)}get(e){const t=this.map.get(e);return t||new Set}}class Uye extends Z1{constructor(e,t){super(0),this._segmenter=null,this._cachedLine=null,this._cachedSegments=[],this.intlSegmenterLocales=t,this.intlSegmenterLocales.length>0?this._segmenter=new Intl.Segmenter(this.intlSegmenterLocales,{granularity:"word"}):this._segmenter=null;for(let i=0,n=e.length;i<n;i++)this.set(e.charCodeAt(i),2);this.set(32,1),this.set(9,1)}findPrevIntlWordBeforeOrAtOffset(e,t){let i=null;for(const n of this._getIntlSegmenterWordsOnLine(e)){if(n.index>t)break;i=n}return i}findNextIntlWordAtOrAfterOffset(e,t){for(const i of this._getIntlSegmenterWordsOnLine(e))if(!(i.index<t))return i;return null}_getIntlSegmenterWordsOnLine(e){return this._segmenter?this._cachedLine===e?this._cachedSegments:(this._cachedLine=e,this._cachedSegments=this._filterWordSegments(this._segmenter.segment(e)),this._cachedSegments):[]}_filterWordSegments(e){const t=[];for(const i of e)this._isWordLike(i)&&t.push(i);return t}_isWordLike(e){return!!e.isWordLike}}const oZ=new Dh(10);function hc(o,e){const t=`${o}/${e.join(",")}`;let i=oZ.get(t);return i||(i=new Uye(o,e),oZ.set(t,i)),i}var kl;(function(o){o[o.Left=1]="Left",o[o.Center=2]="Center",o[o.Right=4]="Right",o[o.Full=7]="Full"})(kl||(kl={}));var hh;(function(o){o[o.Left=1]="Left",o[o.Center=2]="Center",o[o.Right=3]="Right"})(hh||(hh={}));var Vc;(function(o){o[o.Both=0]="Both",o[o.Right=1]="Right",o[o.Left=2]="Left",o[o.None=3]="None"})(Vc||(Vc={}));class CN{get originalIndentSize(){return this._indentSizeIsTabSize?"tabSize":this.indentSize}constructor(e){this._textModelResolvedOptionsBrand=void 0,this.tabSize=Math.max(1,e.tabSize|0),e.indentSize==="tabSize"?(this.indentSize=this.tabSize,this._indentSizeIsTabSize=!0):(this.indentSize=Math.max(1,e.indentSize|0),this._indentSizeIsTabSize=!1),this.insertSpaces=!!e.insertSpaces,this.defaultEOL=e.defaultEOL|0,this.trimAutoWhitespace=!!e.trimAutoWhitespace,this.bracketPairColorizationOptions=e.bracketPairColorizationOptions}equals(e){return this.tabSize===e.tabSize&&this._indentSizeIsTabSize===e._indentSizeIsTabSize&&this.indentSize===e.indentSize&&this.insertSpaces===e.insertSpaces&&this.defaultEOL===e.defaultEOL&&this.trimAutoWhitespace===e.trimAutoWhitespace&&wl(this.bracketPairColorizationOptions,e.bracketPairColorizationOptions)}createChangeEvent(e){return{tabSize:this.tabSize!==e.tabSize,indentSize:this.indentSize!==e.indentSize,insertSpaces:this.insertSpaces!==e.insertSpaces,trimAutoWhitespace:this.trimAutoWhitespace!==e.trimAutoWhitespace}}}class rx{constructor(e,t){this._findMatchBrand=void 0,this.range=e,this.matches=t}}function $ye(o){return o&&typeof o.read=="function"}class c3{constructor(e,t,i,n,s,r){this.identifier=e,this.range=t,this.text=i,this.forceMoveMarkers=n,this.isAutoWhitespaceEdit=s,this._isTracked=r}}class jye{constructor(e,t,i){this.regex=e,this.wordSeparators=t,this.simpleSearch=i}}class Kye{constructor(e,t,i){this.reverseEdits=e,this.changes=t,this.trimAutoWhitespaceLineNumbers=i}}function gne(o){return!o.isTooLargeForSyncing()&&!o.isForSimpleWidget}const qye=999;class W_{constructor(e,t,i,n){this.searchString=e,this.isRegex=t,this.matchCase=i,this.wordSeparators=n}parseSearchRequest(){if(this.searchString==="")return null;let e;this.isRegex?e=Gye(this.searchString):e=this.searchString.indexOf(`
`)>=0;let t=null;try{t=hie(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch{return null}if(!t)return null;let i=!this.isRegex&&!e;return i&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(i=this.matchCase),new jye(t,this.wordSeparators?hc(this.wordSeparators,[]):null,i?this.searchString:null)}}function Gye(o){if(!o||o.length===0)return!1;for(let e=0,t=o.length;e<t;e++){const i=o.charCodeAt(e);if(i===10)return!0;if(i===92){if(e++,e>=t)break;const n=o.charCodeAt(e);if(n===110||n===114||n===87)return!0}}return!1}function K_(o,e,t){if(!t)return new rx(o,null);const i=[];for(let n=0,s=e.length;n<s;n++)i[n]=e[n];return new rx(o,i)}class rZ{constructor(e){const t=[];let i=0;for(let n=0,s=e.length;n<s;n++)e.charCodeAt(n)===10&&(t[i++]=n);this._lineFeedsOffsets=t}findLineFeedCountBeforeOffset(e){const t=this._lineFeedsOffsets;let i=0,n=t.length-1;if(n===-1||e<=t[0])return 0;for(;i<n;){const s=i+((n-i)/2>>0);t[s]>=e?n=s-1:t[s+1]>=e?(i=s,n=s):i=s+1}return i+1}}class ZI{static findMatches(e,t,i,n,s){const r=t.parseSearchRequest();return r?r.regex.multiline?this._doFindMatchesMultiline(e,i,new eC(r.wordSeparators,r.regex),n,s):this._doFindMatchesLineByLine(e,i,r,n,s):[]}static _getMultilineMatchRange(e,t,i,n,s,r){let a,l=0;n?(l=n.findLineFeedCountBeforeOffset(s),a=t+s+l):a=t+s;let c;if(n){const p=n.findLineFeedCountBeforeOffset(s+r.length)-l;c=a+r.length+p}else c=a+r.length;const u=e.getPositionAt(a),f=e.getPositionAt(c);return new A(u.lineNumber,u.column,f.lineNumber,f.column)}static _doFindMatchesMultiline(e,t,i,n,s){const r=e.getOffsetAt(t.getStartPosition()),a=e.getValueInRange(t,1),l=e.getEOL()===`\r
`?new rZ(a):null,c=[];let u=0,f;for(i.reset(0);f=i.next(a);)if(c[u++]=K_(this._getMultilineMatchRange(e,r,a,l,f.index,f[0]),f,n),u>=s)return c;return c}static _doFindMatchesLineByLine(e,t,i,n,s){const r=[];let a=0;if(t.startLineNumber===t.endLineNumber){const c=e.getLineContent(t.startLineNumber).substring(t.startColumn-1,t.endColumn-1);return a=this._findMatchesInLine(i,c,t.startLineNumber,t.startColumn-1,a,r,n,s),r}const l=e.getLineContent(t.startLineNumber).substring(t.startColumn-1);a=this._findMatchesInLine(i,l,t.startLineNumber,t.startColumn-1,a,r,n,s);for(let c=t.startLineNumber+1;c<t.endLineNumber&&a<s;c++)a=this._findMatchesInLine(i,e.getLineContent(c),c,0,a,r,n,s);if(a<s){const c=e.getLineContent(t.endLineNumber).substring(0,t.endColumn-1);a=this._findMatchesInLine(i,c,t.endLineNumber,0,a,r,n,s)}return r}static _findMatchesInLine(e,t,i,n,s,r,a,l){const c=e.wordSeparators;if(!a&&e.simpleSearch){const g=e.simpleSearch,p=g.length,_=t.length;let b=-p;for(;(b=t.indexOf(g,b+p))!==-1;)if((!c||sH(c,t,_,b,p))&&(r[s++]=new rx(new A(i,b+1+n,i,b+1+p+n),null),s>=l))return s;return s}const u=new eC(e.wordSeparators,e.regex);let f;u.reset(0);do if(f=u.next(t),f&&(r[s++]=K_(new A(i,f.index+1+n,i,f.index+1+f[0].length+n),f,a),s>=l))return s;while(f);return s}static findNextMatch(e,t,i,n){const s=t.parseSearchRequest();if(!s)return null;const r=new eC(s.wordSeparators,s.regex);return s.regex.multiline?this._doFindNextMatchMultiline(e,i,r,n):this._doFindNextMatchLineByLine(e,i,r,n)}static _doFindNextMatchMultiline(e,t,i,n){const s=new Z(t.lineNumber,1),r=e.getOffsetAt(s),a=e.getLineCount(),l=e.getValueInRange(new A(s.lineNumber,s.column,a,e.getLineMaxColumn(a)),1),c=e.getEOL()===`\r
`?new rZ(l):null;i.reset(t.column-1);const u=i.next(l);return u?K_(this._getMultilineMatchRange(e,r,l,c,u.index,u[0]),u,n):t.lineNumber!==1||t.column!==1?this._doFindNextMatchMultiline(e,new Z(1,1),i,n):null}static _doFindNextMatchLineByLine(e,t,i,n){const s=e.getLineCount(),r=t.lineNumber,a=e.getLineContent(r),l=this._findFirstMatchInLine(i,a,r,t.column,n);if(l)return l;for(let c=1;c<=s;c++){const u=(r+c-1)%s,f=e.getLineContent(u+1),g=this._findFirstMatchInLine(i,f,u+1,1,n);if(g)return g}return null}static _findFirstMatchInLine(e,t,i,n,s){e.reset(n-1);const r=e.next(t);return r?K_(new A(i,r.index+1,i,r.index+1+r[0].length),r,s):null}static findPreviousMatch(e,t,i,n){const s=t.parseSearchRequest();if(!s)return null;const r=new eC(s.wordSeparators,s.regex);return s.regex.multiline?this._doFindPreviousMatchMultiline(e,i,r,n):this._doFindPreviousMatchLineByLine(e,i,r,n)}static _doFindPreviousMatchMultiline(e,t,i,n){const s=this._doFindMatchesMultiline(e,new A(1,1,t.lineNumber,t.column),i,n,10*qye);if(s.length>0)return s[s.length-1];const r=e.getLineCount();return t.lineNumber!==r||t.column!==e.getLineMaxColumn(r)?this._doFindPreviousMatchMultiline(e,new Z(r,e.getLineMaxColumn(r)),i,n):null}static _doFindPreviousMatchLineByLine(e,t,i,n){const s=e.getLineCount(),r=t.lineNumber,a=e.getLineContent(r).substring(0,t.column-1),l=this._findLastMatchInLine(i,a,r,n);if(l)return l;for(let c=1;c<=s;c++){const u=(s+r-c-1)%s,f=e.getLineContent(u+1),g=this._findLastMatchInLine(i,f,u+1,n);if(g)return g}return null}static _findLastMatchInLine(e,t,i,n){let s=null,r;for(e.reset(0);r=e.next(t);)s=K_(new A(i,r.index+1,i,r.index+1+r[0].length),r,n);return s}}function Yye(o,e,t,i,n){if(i===0)return!0;const s=e.charCodeAt(i-1);if(o.get(s)!==0||s===13||s===10)return!0;if(n>0){const r=e.charCodeAt(i);if(o.get(r)!==0)return!0}return!1}function Zye(o,e,t,i,n){if(i+n===t)return!0;const s=e.charCodeAt(i+n);if(o.get(s)!==0||s===13||s===10)return!0;if(n>0){const r=e.charCodeAt(i+n-1);if(o.get(r)!==0)return!0}return!1}function sH(o,e,t,i,n){return Yye(o,e,t,i,n)&&Zye(o,e,t,i,n)}class eC{constructor(e,t){this._wordSeparators=e,this._searchRegex=t,this._prevMatchStartIndex=-1,this._prevMatchLength=0}reset(e){this._searchRegex.lastIndex=e,this._prevMatchStartIndex=-1,this._prevMatchLength=0}next(e){const t=e.length;let i;do{if(this._prevMatchStartIndex+this._prevMatchLength===t||(i=this._searchRegex.exec(e),!i))return null;const n=i.index,s=i[0].length;if(n===this._prevMatchStartIndex&&s===this._prevMatchLength){if(s===0){gR(e,t,this._searchRegex.lastIndex)>65535?this._searchRegex.lastIndex+=2:this._searchRegex.lastIndex+=1;continue}return null}if(this._prevMatchStartIndex=n,this._prevMatchLength=s,!this._wordSeparators||sH(this._wordSeparators,e,t,n,s))return i}while(i);return null}}class oH{static computeUnicodeHighlights(e,t,i){const n=i?i.startLineNumber:1,s=i?i.endLineNumber:e.getLineCount(),r=new aZ(t),a=r.getCandidateCodePoints();let l;a==="allNonBasicAscii"?l=new RegExp("[^\\t\\n\\r\\x20-\\x7E]","g"):l=new RegExp(`${Qye(Array.from(a))}`,"g");const c=new eC(null,l),u=[];let f=!1,g,p=0,_=0,b=0;e:for(let y=n,S=s;y<=S;y++){const L=e.getLineContent(y),x=L.length;c.reset(0);do if(g=c.next(L),g){let D=g.index,E=g.index+g[0].length;if(D>0){const H=L.charCodeAt(D-1);qs(H)&&D--}if(E+1<x){const H=L.charCodeAt(E-1);qs(H)&&E++}const N=L.substring(D,E);let M=YL(D+1,DV,L,0);M&&M.endColumn<=D+1&&(M=null);const F=r.shouldHighlightNonBasicASCII(N,M?M.word:null);if(F!==0){if(F===3?p++:F===2?_++:F===1?b++:kA(),u.length>=1e3){f=!0;break e}u.push(new A(y,D+1,y,E+1))}}while(g)}return{ranges:u,hasMore:f,ambiguousCharacterCount:p,invisibleCharacterCount:_,nonBasicAsciiCharacterCount:b}}static computeUnicodeHighlightReason(e,t){const i=new aZ(t);switch(i.shouldHighlightNonBasicASCII(e,null)){case 0:return null;case 2:return{kind:1};case 3:{const s=e.codePointAt(0),r=i.ambiguousCharacters.getPrimaryConfusable(s),a=Iv.getLocales().filter(l=>!Iv.getInstance(new Set([...t.allowedLocales,l])).isAmbiguous(s));return{kind:0,confusableWith:String.fromCodePoint(r),notAmbiguousInLocales:a}}case 1:return{kind:2}}}}function Qye(o,e){return`[${Ll(o.map(i=>String.fromCodePoint(i)).join(""))}]`}class aZ{constructor(e){this.options=e,this.allowedCodePoints=new Set(e.allowedCodePoints),this.ambiguousCharacters=Iv.getInstance(new Set(e.allowedLocales))}getCandidateCodePoints(){if(this.options.nonBasicASCII)return"allNonBasicAscii";const e=new Set;if(this.options.invisibleCharacters)for(const t of rh.codePoints)lZ(String.fromCodePoint(t))||e.add(t);if(this.options.ambiguousCharacters)for(const t of this.ambiguousCharacters.getConfusableCodePoints())e.add(t);for(const t of this.allowedCodePoints)e.delete(t);return e}shouldHighlightNonBasicASCII(e,t){const i=e.codePointAt(0);if(this.allowedCodePoints.has(i))return 0;if(this.options.nonBasicASCII)return 1;let n=!1,s=!1;if(t)for(const r of t){const a=r.codePointAt(0),l=PD(r);n=n||l,!l&&!this.ambiguousCharacters.isAmbiguous(a)&&!rh.isInvisibleCharacter(a)&&(s=!0)}return!n&&s?0:this.options.invisibleCharacters&&!lZ(e)&&rh.isInvisibleCharacter(i)?2:this.options.ambiguousCharacters&&this.ambiguousCharacters.isAmbiguous(i)?3:0}}function lZ(o){return o===" "||o===`
`||o==="	"}class wN{constructor(e,t,i){this.changes=e,this.moves=t,this.hitTimeout=i}}class pne{constructor(e,t){this.lineRangeMapping=e,this.changes=t}}class Wt{static addRange(e,t){let i=0;for(;i<t.length&&t[i].endExclusive<e.start;)i++;let n=i;for(;n<t.length&&t[n].start<=e.endExclusive;)n++;if(i===n)t.splice(i,0,e);else{const s=Math.min(e.start,t[i].start),r=Math.max(e.endExclusive,t[n-1].endExclusive);t.splice(i,n-i,new Wt(s,r))}}static tryCreate(e,t){if(!(e>t))return new Wt(e,t)}static ofLength(e){return new Wt(0,e)}static ofStartAndLength(e,t){return new Wt(e,e+t)}constructor(e,t){if(this.start=e,this.endExclusive=t,e>t)throw new pn(`Invalid range: ${this.toString()}`)}get isEmpty(){return this.start===this.endExclusive}delta(e){return new Wt(this.start+e,this.endExclusive+e)}deltaStart(e){return new Wt(this.start+e,this.endExclusive)}deltaEnd(e){return new Wt(this.start,this.endExclusive+e)}get length(){return this.endExclusive-this.start}toString(){return`[${this.start}, ${this.endExclusive})`}contains(e){return this.start<=e&&e<this.endExclusive}join(e){return new Wt(Math.min(this.start,e.start),Math.max(this.endExclusive,e.endExclusive))}intersect(e){const t=Math.max(this.start,e.start),i=Math.min(this.endExclusive,e.endExclusive);if(t<=i)return new Wt(t,i)}intersects(e){const t=Math.max(this.start,e.start),i=Math.min(this.endExclusive,e.endExclusive);return t<i}isBefore(e){return this.endExclusive<=e.start}isAfter(e){return this.start>=e.endExclusive}slice(e){return e.slice(this.start,this.endExclusive)}substring(e){return e.substring(this.start,this.endExclusive)}clip(e){if(this.isEmpty)throw new pn(`Invalid clipping range: ${this.toString()}`);return Math.max(this.start,Math.min(this.endExclusive-1,e))}clipCyclic(e){if(this.isEmpty)throw new pn(`Invalid clipping range: ${this.toString()}`);return e<this.start?this.endExclusive-(this.start-e)%this.length:e>=this.endExclusive?this.start+(e-this.start)%this.length:e}forEach(e){for(let t=this.start;t<this.endExclusive;t++)e(t)}}class rH{constructor(){this._sortedRanges=[]}addRange(e){let t=0;for(;t<this._sortedRanges.length&&this._sortedRanges[t].endExclusive<e.start;)t++;let i=t;for(;i<this._sortedRanges.length&&this._sortedRanges[i].start<=e.endExclusive;)i++;if(t===i)this._sortedRanges.splice(t,0,e);else{const n=Math.min(e.start,this._sortedRanges[t].start),s=Math.max(e.endExclusive,this._sortedRanges[i-1].endExclusive);this._sortedRanges.splice(t,i-t,new Wt(n,s))}}toString(){return this._sortedRanges.map(e=>e.toString()).join(", ")}intersectsStrict(e){let t=0;for(;t<this._sortedRanges.length&&this._sortedRanges[t].endExclusive<=e.start;)t++;return t<this._sortedRanges.length&&this._sortedRanges[t].start<e.endExclusive}intersectWithRange(e){const t=new rH;for(const i of this._sortedRanges){const n=i.intersect(e);n&&t.addRange(n)}return t}intersectWithRangeLength(e){return this.intersectWithRange(e).length}get length(){return this._sortedRanges.reduce((e,t)=>e+t.length,0)}}function ax(o,e,t){const i=Xye(o,e);if(i!==-1)return o[i]}function Xye(o,e,t=o.length-1){for(let i=t;i>=0;i--){const n=o[i];if(e(n))return i}return-1}function r1(o,e){const t=lx(o,e);return t===-1?void 0:o[t]}function lx(o,e,t=0,i=o.length){let n=t,s=i;for(;n<s;){const r=Math.floor((n+s)/2);e(o[r])?n=r+1:s=r}return n-1}function Jye(o,e){const t=cx(o,e);return t===o.length?void 0:o[t]}function cx(o,e,t=0,i=o.length){let n=t,s=i;for(;n<s;){const r=Math.floor((n+s)/2);e(o[r])?s=r:n=r+1}return n}class VD{constructor(e){this._array=e,this._findLastMonotonousLastIdx=0}findLastMonotonous(e){if(VD.assertInvariants){if(this._prevFindLastPredicate){for(const i of this._array)if(this._prevFindLastPredicate(i)&&!e(i))throw new Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.")}this._prevFindLastPredicate=e}const t=lx(this._array,e,this._findLastMonotonousLastIdx);return this._findLastMonotonousLastIdx=t+1,t===-1?void 0:this._array[t]}}VD.assertInvariants=!1;function aH(o,e){if(o.length===0)return;let t=o[0];for(let i=1;i<o.length;i++){const n=o[i];e(n,t)>0&&(t=n)}return t}function eSe(o,e){if(o.length===0)return;let t=o[0];for(let i=1;i<o.length;i++){const n=o[i];e(n,t)>=0&&(t=n)}return t}function tSe(o,e){return aH(o,(t,i)=>-e(t,i))}function iSe(o,e){if(o.length===0)return-1;let t=0;for(let i=1;i<o.length;i++){const n=o[i];e(n,o[t])>0&&(t=i)}return t}function nSe(o,e){for(const t of o){const i=e(t);if(i!==void 0)return i}}let Bt=class rf{static fromRangeInclusive(e){return new rf(e.startLineNumber,e.endLineNumber+1)}static joinMany(e){if(e.length===0)return[];let t=new ec(e[0].slice());for(let i=1;i<e.length;i++)t=t.getUnion(new ec(e[i].slice()));return t.ranges}static join(e){if(e.length===0)throw new pn("lineRanges cannot be empty");let t=e[0].startLineNumber,i=e[0].endLineNumberExclusive;for(let n=1;n<e.length;n++)t=Math.min(t,e[n].startLineNumber),i=Math.max(i,e[n].endLineNumberExclusive);return new rf(t,i)}static ofLength(e,t){return new rf(e,e+t)}static deserialize(e){return new rf(e[0],e[1])}constructor(e,t){if(e>t)throw new pn(`startLineNumber ${e} cannot be after endLineNumberExclusive ${t}`);this.startLineNumber=e,this.endLineNumberExclusive=t}contains(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}get isEmpty(){return this.startLineNumber===this.endLineNumberExclusive}delta(e){return new rf(this.startLineNumber+e,this.endLineNumberExclusive+e)}deltaLength(e){return new rf(this.startLineNumber,this.endLineNumberExclusive+e)}get length(){return this.endLineNumberExclusive-this.startLineNumber}join(e){return new rf(Math.min(this.startLineNumber,e.startLineNumber),Math.max(this.endLineNumberExclusive,e.endLineNumberExclusive))}toString(){return`[${this.startLineNumber},${this.endLineNumberExclusive})`}intersect(e){const t=Math.max(this.startLineNumber,e.startLineNumber),i=Math.min(this.endLineNumberExclusive,e.endLineNumberExclusive);if(t<=i)return new rf(t,i)}intersectsStrict(e){return this.startLineNumber<e.endLineNumberExclusive&&e.startLineNumber<this.endLineNumberExclusive}overlapOrTouch(e){return this.startLineNumber<=e.endLineNumberExclusive&&e.startLineNumber<=this.endLineNumberExclusive}equals(e){return this.startLineNumber===e.startLineNumber&&this.endLineNumberExclusive===e.endLineNumberExclusive}toInclusiveRange(){return this.isEmpty?null:new A(this.startLineNumber,1,this.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER)}toExclusiveRange(){return new A(this.startLineNumber,1,this.endLineNumberExclusive,1)}mapToLineArray(e){const t=[];for(let i=this.startLineNumber;i<this.endLineNumberExclusive;i++)t.push(e(i));return t}forEach(e){for(let t=this.startLineNumber;t<this.endLineNumberExclusive;t++)e(t)}serialize(){return[this.startLineNumber,this.endLineNumberExclusive]}includes(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}toOffsetRange(){return new Wt(this.startLineNumber-1,this.endLineNumberExclusive-1)}};class ec{constructor(e=[]){this._normalizedRanges=e}get ranges(){return this._normalizedRanges}addRange(e){if(e.length===0)return;const t=cx(this._normalizedRanges,n=>n.endLineNumberExclusive>=e.startLineNumber),i=lx(this._normalizedRanges,n=>n.startLineNumber<=e.endLineNumberExclusive)+1;if(t===i)this._normalizedRanges.splice(t,0,e);else if(t===i-1){const n=this._normalizedRanges[t];this._normalizedRanges[t]=n.join(e)}else{const n=this._normalizedRanges[t].join(this._normalizedRanges[i-1]).join(e);this._normalizedRanges.splice(t,i-t,n)}}contains(e){const t=r1(this._normalizedRanges,i=>i.startLineNumber<=e);return!!t&&t.endLineNumberExclusive>e}intersects(e){const t=r1(this._normalizedRanges,i=>i.startLineNumber<e.endLineNumberExclusive);return!!t&&t.endLineNumberExclusive>e.startLineNumber}getUnion(e){if(this._normalizedRanges.length===0)return e;if(e._normalizedRanges.length===0)return this;const t=[];let i=0,n=0,s=null;for(;i<this._normalizedRanges.length||n<e._normalizedRanges.length;){let r=null;if(i<this._normalizedRanges.length&&n<e._normalizedRanges.length){const a=this._normalizedRanges[i],l=e._normalizedRanges[n];a.startLineNumber<l.startLineNumber?(r=a,i++):(r=l,n++)}else i<this._normalizedRanges.length?(r=this._normalizedRanges[i],i++):(r=e._normalizedRanges[n],n++);s===null?s=r:s.endLineNumberExclusive>=r.startLineNumber?s=new Bt(s.startLineNumber,Math.max(s.endLineNumberExclusive,r.endLineNumberExclusive)):(t.push(s),s=r)}return s!==null&&t.push(s),new ec(t)}subtractFrom(e){const t=cx(this._normalizedRanges,r=>r.endLineNumberExclusive>=e.startLineNumber),i=lx(this._normalizedRanges,r=>r.startLineNumber<=e.endLineNumberExclusive)+1;if(t===i)return new ec([e]);const n=[];let s=e.startLineNumber;for(let r=t;r<i;r++){const a=this._normalizedRanges[r];a.startLineNumber>s&&n.push(new Bt(s,a.startLineNumber)),s=a.endLineNumberExclusive}return s<e.endLineNumberExclusive&&n.push(new Bt(s,e.endLineNumberExclusive)),new ec(n)}toString(){return this._normalizedRanges.map(e=>e.toString()).join(", ")}getIntersection(e){const t=[];let i=0,n=0;for(;i<this._normalizedRanges.length&&n<e._normalizedRanges.length;){const s=this._normalizedRanges[i],r=e._normalizedRanges[n],a=s.intersect(r);a&&!a.isEmpty&&t.push(a),s.endLineNumberExclusive<r.endLineNumberExclusive?i++:n++}return new ec(t)}getWithDelta(e){return new ec(this._normalizedRanges.map(t=>t.delta(e)))}}class Or{static inverse(e,t,i){const n=[];let s=1,r=1;for(const l of e){const c=new Or(new Bt(s,l.original.startLineNumber),new Bt(r,l.modified.startLineNumber));c.modified.isEmpty||n.push(c),s=l.original.endLineNumberExclusive,r=l.modified.endLineNumberExclusive}const a=new Or(new Bt(s,t+1),new Bt(r,i+1));return a.modified.isEmpty||n.push(a),n}static clip(e,t,i){const n=[];for(const s of e){const r=s.original.intersect(t),a=s.modified.intersect(i);r&&!r.isEmpty&&a&&!a.isEmpty&&n.push(new Or(r,a))}return n}constructor(e,t){this.original=e,this.modified=t}toString(){return`{${this.original.toString()}->${this.modified.toString()}}`}flip(){return new Or(this.modified,this.original)}join(e){return new Or(this.original.join(e.original),this.modified.join(e.modified))}}class Sl extends Or{static fromRangeMappings(e){const t=Bt.join(e.map(n=>Bt.fromRangeInclusive(n.originalRange))),i=Bt.join(e.map(n=>Bt.fromRangeInclusive(n.modifiedRange)));return new Sl(t,i,e)}constructor(e,t,i){super(e,t),this.innerChanges=i}flip(){var e;return new Sl(this.modified,this.original,(e=this.innerChanges)===null||e===void 0?void 0:e.map(t=>t.flip()))}withInnerChangesFromLineRanges(){return new Sl(this.original,this.modified,[new sg(this.original.toExclusiveRange(),this.modified.toExclusiveRange())])}}class sg{constructor(e,t){this.originalRange=e,this.modifiedRange=t}toString(){return`{${this.originalRange.toString()}->${this.modifiedRange.toString()}}`}flip(){return new sg(this.modifiedRange,this.originalRange)}}const sSe=3;class oSe{computeDiff(e,t,i){var n;const r=new lSe(e,t,{maxComputationTime:i.maxComputationTimeMs,shouldIgnoreTrimWhitespace:i.ignoreTrimWhitespace,shouldComputeCharChanges:!0,shouldMakePrettyDiff:!0,shouldPostProcessCharChanges:!0}).computeDiff(),a=[];let l=null;for(const c of r.changes){let u;c.originalEndLineNumber===0?u=new Bt(c.originalStartLineNumber+1,c.originalStartLineNumber+1):u=new Bt(c.originalStartLineNumber,c.originalEndLineNumber+1);let f;c.modifiedEndLineNumber===0?f=new Bt(c.modifiedStartLineNumber+1,c.modifiedStartLineNumber+1):f=new Bt(c.modifiedStartLineNumber,c.modifiedEndLineNumber+1);let g=new Sl(u,f,(n=c.charChanges)===null||n===void 0?void 0:n.map(p=>new sg(new A(p.originalStartLineNumber,p.originalStartColumn,p.originalEndLineNumber,p.originalEndColumn),new A(p.modifiedStartLineNumber,p.modifiedStartColumn,p.modifiedEndLineNumber,p.modifiedEndColumn))));l&&(l.modified.endLineNumberExclusive===g.modified.startLineNumber||l.original.endLineNumberExclusive===g.original.startLineNumber)&&(g=new Sl(l.original.join(g.original),l.modified.join(g.modified),l.innerChanges&&g.innerChanges?l.innerChanges.concat(g.innerChanges):void 0),a.pop()),a.push(g),l=g}return Mv(()=>eH(a,(c,u)=>u.original.startLineNumber-c.original.endLineNumberExclusive===u.modified.startLineNumber-c.modified.endLineNumberExclusive&&c.original.endLineNumberExclusive<u.original.startLineNumber&&c.modified.endLineNumberExclusive<u.modified.startLineNumber)),new wN(a,[],r.quitEarly)}}function mne(o,e,t,i){return new zu(o,e,t).ComputeDiff(i)}let cZ=class{constructor(e){const t=[],i=[];for(let n=0,s=e.length;n<s;n++)t[n]=f9(e[n],1),i[n]=g9(e[n],1);this.lines=e,this._startColumns=t,this._endColumns=i}getElements(){const e=[];for(let t=0,i=this.lines.length;t<i;t++)e[t]=this.lines[t].substring(this._startColumns[t]-1,this._endColumns[t]-1);return e}getStrictElement(e){return this.lines[e]}getStartLineNumber(e){return e+1}getEndLineNumber(e){return e+1}createCharSequence(e,t,i){const n=[],s=[],r=[];let a=0;for(let l=t;l<=i;l++){const c=this.lines[l],u=e?this._startColumns[l]:1,f=e?this._endColumns[l]:c.length+1;for(let g=u;g<f;g++)n[a]=c.charCodeAt(g-1),s[a]=l+1,r[a]=g,a++;!e&&l<i&&(n[a]=10,s[a]=l+1,r[a]=c.length+1,a++)}return new rSe(n,s,r)}};class rSe{constructor(e,t,i){this._charCodes=e,this._lineNumbers=t,this._columns=i}toString(){return"["+this._charCodes.map((e,t)=>(e===10?"\\n":String.fromCharCode(e))+`-(${this._lineNumbers[t]},${this._columns[t]})`).join(", ")+"]"}_assertIndex(e,t){if(e<0||e>=t.length)throw new Error("Illegal index")}getElements(){return this._charCodes}getStartLineNumber(e){return e>0&&e===this._lineNumbers.length?this.getEndLineNumber(e-1):(this._assertIndex(e,this._lineNumbers),this._lineNumbers[e])}getEndLineNumber(e){return e===-1?this.getStartLineNumber(e+1):(this._assertIndex(e,this._lineNumbers),this._charCodes[e]===10?this._lineNumbers[e]+1:this._lineNumbers[e])}getStartColumn(e){return e>0&&e===this._columns.length?this.getEndColumn(e-1):(this._assertIndex(e,this._columns),this._columns[e])}getEndColumn(e){return e===-1?this.getStartColumn(e+1):(this._assertIndex(e,this._columns),this._charCodes[e]===10?1:this._columns[e]+1)}}class kC{constructor(e,t,i,n,s,r,a,l){this.originalStartLineNumber=e,this.originalStartColumn=t,this.originalEndLineNumber=i,this.originalEndColumn=n,this.modifiedStartLineNumber=s,this.modifiedStartColumn=r,this.modifiedEndLineNumber=a,this.modifiedEndColumn=l}static createFromDiffChange(e,t,i){const n=t.getStartLineNumber(e.originalStart),s=t.getStartColumn(e.originalStart),r=t.getEndLineNumber(e.originalStart+e.originalLength-1),a=t.getEndColumn(e.originalStart+e.originalLength-1),l=i.getStartLineNumber(e.modifiedStart),c=i.getStartColumn(e.modifiedStart),u=i.getEndLineNumber(e.modifiedStart+e.modifiedLength-1),f=i.getEndColumn(e.modifiedStart+e.modifiedLength-1);return new kC(n,s,r,a,l,c,u,f)}}function aSe(o){if(o.length<=1)return o;const e=[o[0]];let t=e[0];for(let i=1,n=o.length;i<n;i++){const s=o[i],r=s.originalStart-(t.originalStart+t.originalLength),a=s.modifiedStart-(t.modifiedStart+t.modifiedLength);Math.min(r,a)<sSe?(t.originalLength=s.originalStart+s.originalLength-t.originalStart,t.modifiedLength=s.modifiedStart+s.modifiedLength-t.modifiedStart):(e.push(s),t=s)}return e}class gL{constructor(e,t,i,n,s){this.originalStartLineNumber=e,this.originalEndLineNumber=t,this.modifiedStartLineNumber=i,this.modifiedEndLineNumber=n,this.charChanges=s}static createFromDiffResult(e,t,i,n,s,r,a){let l,c,u,f,g;if(t.originalLength===0?(l=i.getStartLineNumber(t.originalStart)-1,c=0):(l=i.getStartLineNumber(t.originalStart),c=i.getEndLineNumber(t.originalStart+t.originalLength-1)),t.modifiedLength===0?(u=n.getStartLineNumber(t.modifiedStart)-1,f=0):(u=n.getStartLineNumber(t.modifiedStart),f=n.getEndLineNumber(t.modifiedStart+t.modifiedLength-1)),r&&t.originalLength>0&&t.originalLength<20&&t.modifiedLength>0&&t.modifiedLength<20&&s()){const p=i.createCharSequence(e,t.originalStart,t.originalStart+t.originalLength-1),_=n.createCharSequence(e,t.modifiedStart,t.modifiedStart+t.modifiedLength-1);if(p.getElements().length>0&&_.getElements().length>0){let b=mne(p,_,s,!0).changes;a&&(b=aSe(b)),g=[];for(let y=0,S=b.length;y<S;y++)g.push(kC.createFromDiffChange(b[y],p,_))}}return new gL(l,c,u,f,g)}}class lSe{constructor(e,t,i){this.shouldComputeCharChanges=i.shouldComputeCharChanges,this.shouldPostProcessCharChanges=i.shouldPostProcessCharChanges,this.shouldIgnoreTrimWhitespace=i.shouldIgnoreTrimWhitespace,this.shouldMakePrettyDiff=i.shouldMakePrettyDiff,this.originalLines=e,this.modifiedLines=t,this.original=new cZ(e),this.modified=new cZ(t),this.continueLineDiff=dZ(i.maxComputationTime),this.continueCharDiff=dZ(i.maxComputationTime===0?0:Math.min(i.maxComputationTime,5e3))}computeDiff(){if(this.original.lines.length===1&&this.original.lines[0].length===0)return this.modified.lines.length===1&&this.modified.lines[0].length===0?{quitEarly:!1,changes:[]}:{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:1,modifiedStartLineNumber:1,modifiedEndLineNumber:this.modified.lines.length,charChanges:void 0}]};if(this.modified.lines.length===1&&this.modified.lines[0].length===0)return{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:this.original.lines.length,modifiedStartLineNumber:1,modifiedEndLineNumber:1,charChanges:void 0}]};const e=mne(this.original,this.modified,this.continueLineDiff,this.shouldMakePrettyDiff),t=e.changes,i=e.quitEarly;if(this.shouldIgnoreTrimWhitespace){const a=[];for(let l=0,c=t.length;l<c;l++)a.push(gL.createFromDiffResult(this.shouldIgnoreTrimWhitespace,t[l],this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges));return{quitEarly:i,changes:a}}const n=[];let s=0,r=0;for(let a=-1,l=t.length;a<l;a++){const c=a+1<l?t[a+1]:null,u=c?c.originalStart:this.originalLines.length,f=c?c.modifiedStart:this.modifiedLines.length;for(;s<u&&r<f;){const g=this.originalLines[s],p=this.modifiedLines[r];if(g!==p){{let _=f9(g,1),b=f9(p,1);for(;_>1&&b>1;){const y=g.charCodeAt(_-2),S=p.charCodeAt(b-2);if(y!==S)break;_--,b--}(_>1||b>1)&&this._pushTrimWhitespaceCharChange(n,s+1,1,_,r+1,1,b)}{let _=g9(g,1),b=g9(p,1);const y=g.length+1,S=p.length+1;for(;_<y&&b<S;){const L=g.charCodeAt(_-1),x=g.charCodeAt(b-1);if(L!==x)break;_++,b++}(_<y||b<S)&&this._pushTrimWhitespaceCharChange(n,s+1,_,y,r+1,b,S)}}s++,r++}c&&(n.push(gL.createFromDiffResult(this.shouldIgnoreTrimWhitespace,c,this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges)),s+=c.originalLength,r+=c.modifiedLength)}return{quitEarly:i,changes:n}}_pushTrimWhitespaceCharChange(e,t,i,n,s,r,a){if(this._mergeTrimWhitespaceCharChange(e,t,i,n,s,r,a))return;let l;this.shouldComputeCharChanges&&(l=[new kC(t,i,t,n,s,r,s,a)]),e.push(new gL(t,t,s,s,l))}_mergeTrimWhitespaceCharChange(e,t,i,n,s,r,a){const l=e.length;if(l===0)return!1;const c=e[l-1];return c.originalEndLineNumber===0||c.modifiedEndLineNumber===0?!1:c.originalEndLineNumber===t&&c.modifiedEndLineNumber===s?(this.shouldComputeCharChanges&&c.charChanges&&c.charChanges.push(new kC(t,i,t,n,s,r,s,a)),!0):c.originalEndLineNumber+1===t&&c.modifiedEndLineNumber+1===s?(c.originalEndLineNumber=t,c.modifiedEndLineNumber=s,this.shouldComputeCharChanges&&c.charChanges&&c.charChanges.push(new kC(t,i,t,n,s,r,s,a)),!0):!1}}function f9(o,e){const t=gr(o);return t===-1?e:t+1}function g9(o,e){const t=Bd(o);return t===-1?e:t+2}function dZ(o){if(o===0)return()=>!0;const e=Date.now();return()=>Date.now()-e<o}class qf{static trivial(e,t){return new qf([new Ks(Wt.ofLength(e.length),Wt.ofLength(t.length))],!1)}static trivialTimedOut(e,t){return new qf([new Ks(Wt.ofLength(e.length),Wt.ofLength(t.length))],!0)}constructor(e,t){this.diffs=e,this.hitTimeout=t}}class Ks{static invert(e,t){const i=[];return Nte(e,(n,s)=>{i.push(Ks.fromOffsetPairs(n?n.getEndExclusives():nc.zero,s?s.getStarts():new nc(t,(n?n.seq2Range.endExclusive-n.seq1Range.endExclusive:0)+t)))}),i}static fromOffsetPairs(e,t){return new Ks(new Wt(e.offset1,t.offset1),new Wt(e.offset2,t.offset2))}constructor(e,t){this.seq1Range=e,this.seq2Range=t}swap(){return new Ks(this.seq2Range,this.seq1Range)}toString(){return`${this.seq1Range} <-> ${this.seq2Range}`}join(e){return new Ks(this.seq1Range.join(e.seq1Range),this.seq2Range.join(e.seq2Range))}delta(e){return e===0?this:new Ks(this.seq1Range.delta(e),this.seq2Range.delta(e))}deltaStart(e){return e===0?this:new Ks(this.seq1Range.deltaStart(e),this.seq2Range.deltaStart(e))}deltaEnd(e){return e===0?this:new Ks(this.seq1Range.deltaEnd(e),this.seq2Range.deltaEnd(e))}intersect(e){const t=this.seq1Range.intersect(e.seq1Range),i=this.seq2Range.intersect(e.seq2Range);if(!(!t||!i))return new Ks(t,i)}getStarts(){return new nc(this.seq1Range.start,this.seq2Range.start)}getEndExclusives(){return new nc(this.seq1Range.endExclusive,this.seq2Range.endExclusive)}}class nc{constructor(e,t){this.offset1=e,this.offset2=t}toString(){return`${this.offset1} <-> ${this.offset2}`}delta(e){return e===0?this:new nc(this.offset1+e,this.offset2+e)}equals(e){return this.offset1===e.offset1&&this.offset2===e.offset2}}nc.zero=new nc(0,0);nc.max=new nc(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER);class dx{isValid(){return!0}}dx.instance=new dx;class cSe{constructor(e){if(this.timeout=e,this.startTime=Date.now(),this.valid=!0,e<=0)throw new pn("timeout must be positive")}isValid(){if(!(Date.now()-this.startTime<this.timeout)&&this.valid){this.valid=!1;debugger}return this.valid}}class d3{constructor(e,t){this.width=e,this.height=t,this.array=[],this.array=new Array(e*t)}get(e,t){return this.array[e+t*this.width]}set(e,t,i){this.array[e+t*this.width]=i}}function p9(o){return o===32||o===9}class a1{static getKey(e){let t=this.chrKeys.get(e);return t===void 0&&(t=this.chrKeys.size,this.chrKeys.set(e,t)),t}constructor(e,t,i){this.range=e,this.lines=t,this.source=i,this.histogram=[];let n=0;for(let s=e.startLineNumber-1;s<e.endLineNumberExclusive-1;s++){const r=t[s];for(let l=0;l<r.length;l++){n++;const c=r[l],u=a1.getKey(c);this.histogram[u]=(this.histogram[u]||0)+1}n++;const a=a1.getKey(`
`);this.histogram[a]=(this.histogram[a]||0)+1}this.totalCount=n}computeSimilarity(e){var t,i;let n=0;const s=Math.max(this.histogram.length,e.histogram.length);for(let r=0;r<s;r++)n+=Math.abs(((t=this.histogram[r])!==null&&t!==void 0?t:0)-((i=e.histogram[r])!==null&&i!==void 0?i:0));return 1-n/(this.totalCount+e.totalCount)}}a1.chrKeys=new Map;class dSe{compute(e,t,i=dx.instance,n){if(e.length===0||t.length===0)return qf.trivial(e,t);const s=new d3(e.length,t.length),r=new d3(e.length,t.length),a=new d3(e.length,t.length);for(let _=0;_<e.length;_++)for(let b=0;b<t.length;b++){if(!i.isValid())return qf.trivialTimedOut(e,t);const y=_===0?0:s.get(_-1,b),S=b===0?0:s.get(_,b-1);let L;e.getElement(_)===t.getElement(b)?(_===0||b===0?L=0:L=s.get(_-1,b-1),_>0&&b>0&&r.get(_-1,b-1)===3&&(L+=a.get(_-1,b-1)),L+=n?n(_,b):1):L=-1;const x=Math.max(y,S,L);if(x===L){const D=_>0&&b>0?a.get(_-1,b-1):0;a.set(_,b,D+1),r.set(_,b,3)}else x===y?(a.set(_,b,0),r.set(_,b,1)):x===S&&(a.set(_,b,0),r.set(_,b,2));s.set(_,b,x)}const l=[];let c=e.length,u=t.length;function f(_,b){(_+1!==c||b+1!==u)&&l.push(new Ks(new Wt(_+1,c),new Wt(b+1,u))),c=_,u=b}let g=e.length-1,p=t.length-1;for(;g>=0&&p>=0;)r.get(g,p)===3?(f(g,p),g--,p--):r.get(g,p)===1?g--:p--;return f(-1,-1),l.reverse(),new qf(l,!1)}}class _ne{compute(e,t,i=dx.instance){if(e.length===0||t.length===0)return qf.trivial(e,t);const n=e,s=t;function r(b,y){for(;b<n.length&&y<s.length&&n.getElement(b)===s.getElement(y);)b++,y++;return b}let a=0;const l=new uSe;l.set(0,r(0,0));const c=new hSe;c.set(0,l.get(0)===0?null:new uZ(null,0,0,l.get(0)));let u=0;e:for(;;){if(a++,!i.isValid())return qf.trivialTimedOut(n,s);const b=-Math.min(a,s.length+a%2),y=Math.min(a,n.length+a%2);for(u=b;u<=y;u+=2){const S=u===y?-1:l.get(u+1),L=u===b?-1:l.get(u-1)+1,x=Math.min(Math.max(S,L),n.length),D=x-u;if(x>n.length||D>s.length)continue;const E=r(x,D);l.set(u,E);const N=x===S?c.get(u+1):c.get(u-1);if(c.set(u,E!==x?new uZ(N,x,D,E-x):N),l.get(u)===n.length&&l.get(u)-u===s.length)break e}}let f=c.get(u);const g=[];let p=n.length,_=s.length;for(;;){const b=f?f.x+f.length:0,y=f?f.y+f.length:0;if((b!==p||y!==_)&&g.push(new Ks(new Wt(b,p),new Wt(y,_))),!f)break;p=f.x,_=f.y,f=f.prev}return g.reverse(),new qf(g,!1)}}class uZ{constructor(e,t,i,n){this.prev=e,this.x=t,this.y=i,this.length=n}}class uSe{constructor(){this.positiveArr=new Int32Array(10),this.negativeArr=new Int32Array(10)}get(e){return e<0?(e=-e-1,this.negativeArr[e]):this.positiveArr[e]}set(e,t){if(e<0){if(e=-e-1,e>=this.negativeArr.length){const i=this.negativeArr;this.negativeArr=new Int32Array(i.length*2),this.negativeArr.set(i)}this.negativeArr[e]=t}else{if(e>=this.positiveArr.length){const i=this.positiveArr;this.positiveArr=new Int32Array(i.length*2),this.positiveArr.set(i)}this.positiveArr[e]=t}}}class hSe{constructor(){this.positiveArr=[],this.negativeArr=[]}get(e){return e<0?(e=-e-1,this.negativeArr[e]):this.positiveArr[e]}set(e,t){e<0?(e=-e-1,this.negativeArr[e]=t):this.positiveArr[e]=t}}class DR{constructor(e,t,i){this.lines=e,this.considerWhitespaceChanges=i,this.elements=[],this.firstCharOffsetByLine=[],this.additionalOffsetByLine=[];let n=!1;t.start>0&&t.endExclusive>=e.length&&(t=new Wt(t.start-1,t.endExclusive),n=!0),this.lineRange=t,this.firstCharOffsetByLine[0]=0;for(let s=this.lineRange.start;s<this.lineRange.endExclusive;s++){let r=e[s],a=0;if(n)a=r.length,r="",n=!1;else if(!i){const l=r.trimStart();a=r.length-l.length,r=l.trimEnd()}this.additionalOffsetByLine.push(a);for(let l=0;l<r.length;l++)this.elements.push(r.charCodeAt(l));s<e.length-1&&(this.elements.push(10),this.firstCharOffsetByLine[s-this.lineRange.start+1]=this.elements.length)}this.additionalOffsetByLine.push(0)}toString(){return`Slice: "${this.text}"`}get text(){return this.getText(new Wt(0,this.length))}getText(e){return this.elements.slice(e.start,e.endExclusive).map(t=>String.fromCharCode(t)).join("")}getElement(e){return this.elements[e]}get length(){return this.elements.length}getBoundaryScore(e){const t=fZ(e>0?this.elements[e-1]:-1),i=fZ(e<this.elements.length?this.elements[e]:-1);if(t===7&&i===8)return 0;if(t===8)return 150;let n=0;return t!==i&&(n+=10,t===0&&i===1&&(n+=1)),n+=hZ(t),n+=hZ(i),n}translateOffset(e){if(this.lineRange.isEmpty)return new Z(this.lineRange.start+1,1);const t=lx(this.firstCharOffsetByLine,i=>i<=e);return new Z(this.lineRange.start+t+1,e-this.firstCharOffsetByLine[t]+this.additionalOffsetByLine[t]+1)}translateRange(e){return A.fromPositions(this.translateOffset(e.start),this.translateOffset(e.endExclusive))}findWordContaining(e){if(e<0||e>=this.elements.length||!u3(this.elements[e]))return;let t=e;for(;t>0&&u3(this.elements[t-1]);)t--;let i=e;for(;i<this.elements.length&&u3(this.elements[i]);)i++;return new Wt(t,i)}countLinesIn(e){return this.translateOffset(e.endExclusive).lineNumber-this.translateOffset(e.start).lineNumber}isStronglyEqual(e,t){return this.elements[e]===this.elements[t]}extendToFullLines(e){var t,i;const n=(t=r1(this.firstCharOffsetByLine,r=>r<=e.start))!==null&&t!==void 0?t:0,s=(i=Jye(this.firstCharOffsetByLine,r=>e.endExclusive<=r))!==null&&i!==void 0?i:this.elements.length;return new Wt(n,s)}}function u3(o){return o>=97&&o<=122||o>=65&&o<=90||o>=48&&o<=57}const fSe={0:0,1:0,2:0,3:10,4:2,5:30,6:3,7:10,8:10};function hZ(o){return fSe[o]}function fZ(o){return o===10?8:o===13?7:p9(o)?6:o>=97&&o<=122?0:o>=65&&o<=90?1:o>=48&&o<=57?2:o===-1?3:o===44||o===59?5:4}function gSe(o,e,t,i,n,s){let{moves:r,excludedChanges:a}=mSe(o,e,t,s);if(!s.isValid())return[];const l=o.filter(u=>!a.has(u)),c=_Se(l,i,n,e,t,s);return qB(r,c),r=vSe(r),r=r.filter(u=>{const f=u.original.toOffsetRange().slice(e).map(p=>p.trim());return f.join(`
`).length>=15&&pSe(f,p=>p.length>=2)>=2}),r=bSe(o,r),r}function pSe(o,e){let t=0;for(const i of o)e(i)&&t++;return t}function mSe(o,e,t,i){const n=[],s=o.filter(l=>l.modified.isEmpty&&l.original.length>=3).map(l=>new a1(l.original,e,l)),r=new Set(o.filter(l=>l.original.isEmpty&&l.modified.length>=3).map(l=>new a1(l.modified,t,l))),a=new Set;for(const l of s){let c=-1,u;for(const f of r){const g=l.computeSimilarity(f);g>c&&(c=g,u=f)}if(c>.9&&u&&(r.delete(u),n.push(new Or(l.range,u.range)),a.add(l.source),a.add(u.source)),!i.isValid())return{moves:n,excludedChanges:a}}return{moves:n,excludedChanges:a}}function _Se(o,e,t,i,n,s){const r=[],a=new nH;for(const g of o)for(let p=g.original.startLineNumber;p<g.original.endLineNumberExclusive-2;p++){const _=`${e[p-1]}:${e[p+1-1]}:${e[p+2-1]}`;a.add(_,{range:new Bt(p,p+3)})}const l=[];o.sort(ac(g=>g.modified.startLineNumber,Uf));for(const g of o){let p=[];for(let _=g.modified.startLineNumber;_<g.modified.endLineNumberExclusive-2;_++){const b=`${t[_-1]}:${t[_+1-1]}:${t[_+2-1]}`,y=new Bt(_,_+3),S=[];a.forEach(b,({range:L})=>{for(const D of p)if(D.originalLineRange.endLineNumberExclusive+1===L.endLineNumberExclusive&&D.modifiedLineRange.endLineNumberExclusive+1===y.endLineNumberExclusive){D.originalLineRange=new Bt(D.originalLineRange.startLineNumber,L.endLineNumberExclusive),D.modifiedLineRange=new Bt(D.modifiedLineRange.startLineNumber,y.endLineNumberExclusive),S.push(D);return}const x={modifiedLineRange:y,originalLineRange:L};l.push(x),S.push(x)}),p=S}if(!s.isValid())return[]}l.sort(Ate(ac(g=>g.modifiedLineRange.length,Uf)));const c=new ec,u=new ec;for(const g of l){const p=g.modifiedLineRange.startLineNumber-g.originalLineRange.startLineNumber,_=c.subtractFrom(g.modifiedLineRange),b=u.subtractFrom(g.originalLineRange).getWithDelta(p),y=_.getIntersection(b);for(const S of y.ranges){if(S.length<3)continue;const L=S,x=S.delta(-p);r.push(new Or(x,L)),c.addRange(L),u.addRange(x)}}r.sort(ac(g=>g.original.startLineNumber,Uf));const f=new VD(o);for(let g=0;g<r.length;g++){const p=r[g],_=f.findLastMonotonous(N=>N.original.startLineNumber<=p.original.startLineNumber),b=r1(o,N=>N.modified.startLineNumber<=p.modified.startLineNumber),y=Math.max(p.original.startLineNumber-_.original.startLineNumber,p.modified.startLineNumber-b.modified.startLineNumber),S=f.findLastMonotonous(N=>N.original.startLineNumber<p.original.endLineNumberExclusive),L=r1(o,N=>N.modified.startLineNumber<p.modified.endLineNumberExclusive),x=Math.max(S.original.endLineNumberExclusive-p.original.endLineNumberExclusive,L.modified.endLineNumberExclusive-p.modified.endLineNumberExclusive);let D;for(D=0;D<y;D++){const N=p.original.startLineNumber-D-1,M=p.modified.startLineNumber-D-1;if(N>i.length||M>n.length||c.contains(M)||u.contains(N)||!gZ(i[N-1],n[M-1],s))break}D>0&&(u.addRange(new Bt(p.original.startLineNumber-D,p.original.startLineNumber)),c.addRange(new Bt(p.modified.startLineNumber-D,p.modified.startLineNumber)));let E;for(E=0;E<x;E++){const N=p.original.endLineNumberExclusive+E,M=p.modified.endLineNumberExclusive+E;if(N>i.length||M>n.length||c.contains(M)||u.contains(N)||!gZ(i[N-1],n[M-1],s))break}E>0&&(u.addRange(new Bt(p.original.endLineNumberExclusive,p.original.endLineNumberExclusive+E)),c.addRange(new Bt(p.modified.endLineNumberExclusive,p.modified.endLineNumberExclusive+E))),(D>0||E>0)&&(r[g]=new Or(new Bt(p.original.startLineNumber-D,p.original.endLineNumberExclusive+E),new Bt(p.modified.startLineNumber-D,p.modified.endLineNumberExclusive+E)))}return r}function gZ(o,e,t){if(o.trim()===e.trim())return!0;if(o.length>300&&e.length>300)return!1;const n=new _ne().compute(new DR([o],new Wt(0,1),!1),new DR([e],new Wt(0,1),!1),t);let s=0;const r=Ks.invert(n.diffs,o.length);for(const u of r)u.seq1Range.forEach(f=>{p9(o.charCodeAt(f))||s++});function a(u){let f=0;for(let g=0;g<o.length;g++)p9(u.charCodeAt(g))||f++;return f}const l=a(o.length>e.length?o:e);return s/l>.6&&l>10}function vSe(o){if(o.length===0)return o;o.sort(ac(t=>t.original.startLineNumber,Uf));const e=[o[0]];for(let t=1;t<o.length;t++){const i=e[e.length-1],n=o[t],s=n.original.startLineNumber-i.original.endLineNumberExclusive,r=n.modified.startLineNumber-i.modified.endLineNumberExclusive;if(s>=0&&r>=0&&s+r<=2){e[e.length-1]=i.join(n);continue}e.push(n)}return e}function bSe(o,e){const t=new VD(o);return e=e.filter(i=>{const n=t.findLastMonotonous(a=>a.original.startLineNumber<i.original.endLineNumberExclusive)||new Or(new Bt(1,1),new Bt(1,1)),s=r1(o,a=>a.modified.startLineNumber<i.modified.endLineNumberExclusive);return n!==s}),e}function m9(o,e,t){let i=t;return i=pZ(o,e,i),i=pZ(o,e,i),i=CSe(o,e,i),i}function pZ(o,e,t){if(t.length===0)return t;const i=[];i.push(t[0]);for(let s=1;s<t.length;s++){const r=i[i.length-1];let a=t[s];if(a.seq1Range.isEmpty||a.seq2Range.isEmpty){const l=a.seq1Range.start-r.seq1Range.endExclusive;let c;for(c=1;c<=l&&!(o.getElement(a.seq1Range.start-c)!==o.getElement(a.seq1Range.endExclusive-c)||e.getElement(a.seq2Range.start-c)!==e.getElement(a.seq2Range.endExclusive-c));c++);if(c--,c===l){i[i.length-1]=new Ks(new Wt(r.seq1Range.start,a.seq1Range.endExclusive-l),new Wt(r.seq2Range.start,a.seq2Range.endExclusive-l));continue}a=a.delta(-c)}i.push(a)}const n=[];for(let s=0;s<i.length-1;s++){const r=i[s+1];let a=i[s];if(a.seq1Range.isEmpty||a.seq2Range.isEmpty){const l=r.seq1Range.start-a.seq1Range.endExclusive;let c;for(c=0;c<l&&!(!o.isStronglyEqual(a.seq1Range.start+c,a.seq1Range.endExclusive+c)||!e.isStronglyEqual(a.seq2Range.start+c,a.seq2Range.endExclusive+c));c++);if(c===l){i[s+1]=new Ks(new Wt(a.seq1Range.start+l,r.seq1Range.endExclusive),new Wt(a.seq2Range.start+l,r.seq2Range.endExclusive));continue}c>0&&(a=a.delta(c))}n.push(a)}return i.length>0&&n.push(i[i.length-1]),n}function CSe(o,e,t){if(!o.getBoundaryScore||!e.getBoundaryScore)return t;for(let i=0;i<t.length;i++){const n=i>0?t[i-1]:void 0,s=t[i],r=i+1<t.length?t[i+1]:void 0,a=new Wt(n?n.seq1Range.endExclusive+1:0,r?r.seq1Range.start-1:o.length),l=new Wt(n?n.seq2Range.endExclusive+1:0,r?r.seq2Range.start-1:e.length);s.seq1Range.isEmpty?t[i]=mZ(s,o,e,a,l):s.seq2Range.isEmpty&&(t[i]=mZ(s.swap(),e,o,l,a).swap())}return t}function mZ(o,e,t,i,n){let r=1;for(;o.seq1Range.start-r>=i.start&&o.seq2Range.start-r>=n.start&&t.isStronglyEqual(o.seq2Range.start-r,o.seq2Range.endExclusive-r)&&r<100;)r++;r--;let a=0;for(;o.seq1Range.start+a<i.endExclusive&&o.seq2Range.endExclusive+a<n.endExclusive&&t.isStronglyEqual(o.seq2Range.start+a,o.seq2Range.endExclusive+a)&&a<100;)a++;if(r===0&&a===0)return o;let l=0,c=-1;for(let u=-r;u<=a;u++){const f=o.seq2Range.start+u,g=o.seq2Range.endExclusive+u,p=o.seq1Range.start+u,_=e.getBoundaryScore(p)+t.getBoundaryScore(f)+t.getBoundaryScore(g);_>c&&(c=_,l=u)}return o.delta(l)}function wSe(o,e,t){const i=[];for(const n of t){const s=i[i.length-1];if(!s){i.push(n);continue}n.seq1Range.start-s.seq1Range.endExclusive<=2||n.seq2Range.start-s.seq2Range.endExclusive<=2?i[i.length-1]=new Ks(s.seq1Range.join(n.seq1Range),s.seq2Range.join(n.seq2Range)):i.push(n)}return i}function ySe(o,e,t){const i=Ks.invert(t,o.length),n=[];let s=new nc(0,0);function r(l,c){if(l.offset1<s.offset1||l.offset2<s.offset2)return;const u=o.findWordContaining(l.offset1),f=e.findWordContaining(l.offset2);if(!u||!f)return;let g=new Ks(u,f);const p=g.intersect(c);let _=p.seq1Range.length,b=p.seq2Range.length;for(;i.length>0;){const y=i[0];if(!(y.seq1Range.intersects(g.seq1Range)||y.seq2Range.intersects(g.seq2Range)))break;const L=o.findWordContaining(y.seq1Range.start),x=e.findWordContaining(y.seq2Range.start),D=new Ks(L,x),E=D.intersect(y);if(_+=E.seq1Range.length,b+=E.seq2Range.length,g=g.join(D),g.seq1Range.endExclusive>=y.seq1Range.endExclusive)i.shift();else break}_+b<(g.seq1Range.length+g.seq2Range.length)*2/3&&n.push(g),s=g.getEndExclusives()}for(;i.length>0;){const l=i.shift();l.seq1Range.isEmpty||(r(l.getStarts(),l),r(l.getEndExclusives().delta(-1),l))}return SSe(t,n)}function SSe(o,e){const t=[];for(;o.length>0||e.length>0;){const i=o[0],n=e[0];let s;i&&(!n||i.seq1Range.start<n.seq1Range.start)?s=o.shift():s=e.shift(),t.length>0&&t[t.length-1].seq1Range.endExclusive>=s.seq1Range.start?t[t.length-1]=t[t.length-1].join(s):t.push(s)}return t}function LSe(o,e,t){let i=t;if(i.length===0)return i;let n=0,s;do{s=!1;const r=[i[0]];for(let a=1;a<i.length;a++){let u=function(g,p){const _=new Wt(c.seq1Range.endExclusive,l.seq1Range.start);return o.getText(_).replace(/\s/g,"").length<=4&&(g.seq1Range.length+g.seq2Range.length>5||p.seq1Range.length+p.seq2Range.length>5)};const l=i[a],c=r[r.length-1];u(c,l)?(s=!0,r[r.length-1]=r[r.length-1].join(l)):r.push(l)}i=r}while(n++<10&&s);return i}function xSe(o,e,t){let i=t;if(i.length===0)return i;let n=0,s;do{s=!1;const a=[i[0]];for(let l=1;l<i.length;l++){let f=function(p,_){const b=new Wt(u.seq1Range.endExclusive,c.seq1Range.start);if(o.countLinesIn(b)>5||b.length>500)return!1;const S=o.getText(b).trim();if(S.length>20||S.split(/\r\n|\r|\n/).length>1)return!1;const L=o.countLinesIn(p.seq1Range),x=p.seq1Range.length,D=e.countLinesIn(p.seq2Range),E=p.seq2Range.length,N=o.countLinesIn(_.seq1Range),M=_.seq1Range.length,F=e.countLinesIn(_.seq2Range),H=_.seq2Range.length,Q=2*40+50;function K(j){return Math.min(j,Q)}return Math.pow(Math.pow(K(L*40+x),1.5)+Math.pow(K(D*40+E),1.5),1.5)+Math.pow(Math.pow(K(N*40+M),1.5)+Math.pow(K(F*40+H),1.5),1.5)>(Q**1.5)**1.5*1.3};const c=i[l],u=a[a.length-1];f(u,c)?(s=!0,a[a.length-1]=a[a.length-1].join(c)):a.push(c)}i=a}while(n++<10&&s);const r=[];return ybe(i,(a,l,c)=>{let u=l;function f(S){return S.length>0&&S.trim().length<=3&&l.seq1Range.length+l.seq2Range.length>100}const g=o.extendToFullLines(l.seq1Range),p=o.getText(new Wt(g.start,l.seq1Range.start));f(p)&&(u=u.deltaStart(-p.length));const _=o.getText(new Wt(l.seq1Range.endExclusive,g.endExclusive));f(_)&&(u=u.deltaEnd(_.length));const b=Ks.fromOffsetPairs(a?a.getEndExclusives():nc.zero,c?c.getStarts():nc.max),y=u.intersect(b);r.length>0&&y.getStarts().equals(r[r.length-1].getEndExclusives())?r[r.length-1]=r[r.length-1].join(y):r.push(y)}),r}class _Z{constructor(e,t){this.trimmedHash=e,this.lines=t}getElement(e){return this.trimmedHash[e]}get length(){return this.trimmedHash.length}getBoundaryScore(e){const t=e===0?0:vZ(this.lines[e-1]),i=e===this.lines.length?0:vZ(this.lines[e]);return 1e3-(t+i)}getText(e){return this.lines.slice(e.start,e.endExclusive).join(`
`)}isStronglyEqual(e,t){return this.lines[e]===this.lines[t]}}function vZ(o){let e=0;for(;e<o.length&&(o.charCodeAt(e)===32||o.charCodeAt(e)===9);)e++;return e}class vne{constructor(){this.dynamicProgrammingDiffing=new dSe,this.myersDiffingAlgorithm=new _ne}computeDiff(e,t,i){if(e.length<=1&&zn(e,t,(E,N)=>E===N))return new wN([],[],!1);if(e.length===1&&e[0].length===0||t.length===1&&t[0].length===0)return new wN([new Sl(new Bt(1,e.length+1),new Bt(1,t.length+1),[new sg(new A(1,1,e.length,e[0].length+1),new A(1,1,t.length,t[0].length+1))])],[],!1);const n=i.maxComputationTimeMs===0?dx.instance:new cSe(i.maxComputationTimeMs),s=!i.ignoreTrimWhitespace,r=new Map;function a(E){let N=r.get(E);return N===void 0&&(N=r.size,r.set(E,N)),N}const l=e.map(E=>a(E.trim())),c=t.map(E=>a(E.trim())),u=new _Z(l,e),f=new _Z(c,t),g=u.length+f.length<1700?this.dynamicProgrammingDiffing.compute(u,f,n,(E,N)=>e[E]===t[N]?t[N].length===0?.1:1+Math.log(1+t[N].length):.99):this.myersDiffingAlgorithm.compute(u,f);let p=g.diffs,_=g.hitTimeout;p=m9(u,f,p),p=LSe(u,f,p);const b=[],y=E=>{if(s)for(let N=0;N<E;N++){const M=S+N,F=L+N;if(e[M]!==t[F]){const H=this.refineDiff(e,t,new Ks(new Wt(M,M+1),new Wt(F,F+1)),n,s);for(const Q of H.mappings)b.push(Q);H.hitTimeout&&(_=!0)}}};let S=0,L=0;for(const E of p){Mv(()=>E.seq1Range.start-S===E.seq2Range.start-L);const N=E.seq1Range.start-S;y(N),S=E.seq1Range.endExclusive,L=E.seq2Range.endExclusive;const M=this.refineDiff(e,t,E,n,s);M.hitTimeout&&(_=!0);for(const F of M.mappings)b.push(F)}y(e.length-S);const x=bZ(b,e,t);let D=[];return i.computeMoves&&(D=this.computeMoves(x,e,t,l,c,n,s)),Mv(()=>{function E(M,F){if(M.lineNumber<1||M.lineNumber>F.length)return!1;const H=F[M.lineNumber-1];return!(M.column<1||M.column>H.length+1)}function N(M,F){return!(M.startLineNumber<1||M.startLineNumber>F.length+1||M.endLineNumberExclusive<1||M.endLineNumberExclusive>F.length+1)}for(const M of x){if(!M.innerChanges)return!1;for(const F of M.innerChanges)if(!(E(F.modifiedRange.getStartPosition(),t)&&E(F.modifiedRange.getEndPosition(),t)&&E(F.originalRange.getStartPosition(),e)&&E(F.originalRange.getEndPosition(),e)))return!1;if(!N(M.modified,t)||!N(M.original,e))return!1}return!0}),new wN(x,D,_)}computeMoves(e,t,i,n,s,r,a){return gSe(e,t,i,n,s,r).map(u=>{const f=this.refineDiff(t,i,new Ks(u.original.toOffsetRange(),u.modified.toOffsetRange()),r,a),g=bZ(f.mappings,t,i,!0);return new pne(u,g)})}refineDiff(e,t,i,n,s){const r=new DR(e,i.seq1Range,s),a=new DR(t,i.seq2Range,s),l=r.length+a.length<500?this.dynamicProgrammingDiffing.compute(r,a,n):this.myersDiffingAlgorithm.compute(r,a,n);let c=l.diffs;return c=m9(r,a,c),c=ySe(r,a,c),c=wSe(r,a,c),c=xSe(r,a,c),{mappings:c.map(f=>new sg(r.translateRange(f.seq1Range),a.translateRange(f.seq2Range))),hitTimeout:l.hitTimeout}}}function bZ(o,e,t,i=!1){const n=[];for(const s of CV(o.map(r=>DSe(r,e,t)),(r,a)=>r.original.overlapOrTouch(a.original)||r.modified.overlapOrTouch(a.modified))){const r=s[0],a=s[s.length-1];n.push(new Sl(r.original.join(a.original),r.modified.join(a.modified),s.map(l=>l.innerChanges[0])))}return Mv(()=>!i&&n.length>0&&(n[0].modified.startLineNumber!==n[0].original.startLineNumber||t.length-n[n.length-1].modified.endLineNumberExclusive!==e.length-n[n.length-1].original.endLineNumberExclusive)?!1:eH(n,(s,r)=>r.original.startLineNumber-s.original.endLineNumberExclusive===r.modified.startLineNumber-s.modified.endLineNumberExclusive&&s.original.endLineNumberExclusive<r.original.startLineNumber&&s.modified.endLineNumberExclusive<r.modified.startLineNumber)),n}function DSe(o,e,t){let i=0,n=0;o.modifiedRange.endColumn===1&&o.originalRange.endColumn===1&&o.originalRange.startLineNumber+i<=o.originalRange.endLineNumber&&o.modifiedRange.startLineNumber+i<=o.modifiedRange.endLineNumber&&(n=-1),o.modifiedRange.startColumn-1>=t[o.modifiedRange.startLineNumber-1].length&&o.originalRange.startColumn-1>=e[o.originalRange.startLineNumber-1].length&&o.originalRange.startLineNumber<=o.originalRange.endLineNumber+n&&o.modifiedRange.startLineNumber<=o.modifiedRange.endLineNumber+n&&(i=1);const s=new Bt(o.originalRange.startLineNumber+i,o.originalRange.endLineNumber+1+n),r=new Bt(o.modifiedRange.startLineNumber+i,o.modifiedRange.endLineNumber+1+n);return new Sl(s,r,[o])}const CZ={getLegacy:()=>new oSe,getDefault:()=>new vne};function Kp(o,e){const t=Math.pow(10,e);return Math.round(o*t)/t}class ai{constructor(e,t,i,n=1){this._rgbaBrand=void 0,this.r=Math.min(255,Math.max(0,e))|0,this.g=Math.min(255,Math.max(0,t))|0,this.b=Math.min(255,Math.max(0,i))|0,this.a=Kp(Math.max(Math.min(1,n),0),3)}static equals(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a}}class Bc{constructor(e,t,i,n){this._hslaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=Kp(Math.max(Math.min(1,t),0),3),this.l=Kp(Math.max(Math.min(1,i),0),3),this.a=Kp(Math.max(Math.min(1,n),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.l===t.l&&e.a===t.a}static fromRGBA(e){const t=e.r/255,i=e.g/255,n=e.b/255,s=e.a,r=Math.max(t,i,n),a=Math.min(t,i,n);let l=0,c=0;const u=(a+r)/2,f=r-a;if(f>0){switch(c=Math.min(u<=.5?f/(2*u):f/(2-2*u),1),r){case t:l=(i-n)/f+(i<n?6:0);break;case i:l=(n-t)/f+2;break;case n:l=(t-i)/f+4;break}l*=60,l=Math.round(l)}return new Bc(l,c,u,s)}static _hue2rgb(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+(t-e)*6*i:i<1/2?t:i<2/3?e+(t-e)*(2/3-i)*6:e}static toRGBA(e){const t=e.h/360,{s:i,l:n,a:s}=e;let r,a,l;if(i===0)r=a=l=n;else{const c=n<.5?n*(1+i):n+i-n*i,u=2*n-c;r=Bc._hue2rgb(u,c,t+1/3),a=Bc._hue2rgb(u,c,t),l=Bc._hue2rgb(u,c,t-1/3)}return new ai(Math.round(r*255),Math.round(a*255),Math.round(l*255),s)}}class Zu{constructor(e,t,i,n){this._hsvaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=Kp(Math.max(Math.min(1,t),0),3),this.v=Kp(Math.max(Math.min(1,i),0),3),this.a=Kp(Math.max(Math.min(1,n),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.v===t.v&&e.a===t.a}static fromRGBA(e){const t=e.r/255,i=e.g/255,n=e.b/255,s=Math.max(t,i,n),r=Math.min(t,i,n),a=s-r,l=s===0?0:a/s;let c;return a===0?c=0:s===t?c=((i-n)/a%6+6)%6:s===i?c=(n-t)/a+2:c=(t-i)/a+4,new Zu(Math.round(c*60),l,s,e.a)}static toRGBA(e){const{h:t,s:i,v:n,a:s}=e,r=n*i,a=r*(1-Math.abs(t/60%2-1)),l=n-r;let[c,u,f]=[0,0,0];return t<60?(c=r,u=a):t<120?(c=a,u=r):t<180?(u=r,f=a):t<240?(u=a,f=r):t<300?(c=a,f=r):t<=360&&(c=r,f=a),c=Math.round((c+l)*255),u=Math.round((u+l)*255),f=Math.round((f+l)*255),new ai(c,u,f,s)}}class ne{static fromHex(e){return ne.Format.CSS.parseHex(e)||ne.red}static equals(e,t){return!e&&!t?!0:!e||!t?!1:e.equals(t)}get hsla(){return this._hsla?this._hsla:Bc.fromRGBA(this.rgba)}get hsva(){return this._hsva?this._hsva:Zu.fromRGBA(this.rgba)}constructor(e){if(e)if(e instanceof ai)this.rgba=e;else if(e instanceof Bc)this._hsla=e,this.rgba=Bc.toRGBA(e);else if(e instanceof Zu)this._hsva=e,this.rgba=Zu.toRGBA(e);else throw new Error("Invalid color ctor argument");else throw new Error("Color needs a value")}equals(e){return!!e&&ai.equals(this.rgba,e.rgba)&&Bc.equals(this.hsla,e.hsla)&&Zu.equals(this.hsva,e.hsva)}getRelativeLuminance(){const e=ne._relativeLuminanceForComponent(this.rgba.r),t=ne._relativeLuminanceForComponent(this.rgba.g),i=ne._relativeLuminanceForComponent(this.rgba.b),n=.2126*e+.7152*t+.0722*i;return Kp(n,4)}static _relativeLuminanceForComponent(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}isLighter(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3>=128}isLighterThan(e){const t=this.getRelativeLuminance(),i=e.getRelativeLuminance();return t>i}isDarkerThan(e){const t=this.getRelativeLuminance(),i=e.getRelativeLuminance();return t<i}lighten(e){return new ne(new Bc(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*e,this.hsla.a))}darken(e){return new ne(new Bc(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*e,this.hsla.a))}transparent(e){const{r:t,g:i,b:n,a:s}=this.rgba;return new ne(new ai(t,i,n,s*e))}isTransparent(){return this.rgba.a===0}isOpaque(){return this.rgba.a===1}opposite(){return new ne(new ai(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))}makeOpaque(e){if(this.isOpaque()||e.rgba.a!==1)return this;const{r:t,g:i,b:n,a:s}=this.rgba;return new ne(new ai(e.rgba.r-s*(e.rgba.r-t),e.rgba.g-s*(e.rgba.g-i),e.rgba.b-s*(e.rgba.b-n),1))}toString(){return this._toString||(this._toString=ne.Format.CSS.format(this)),this._toString}static getLighterColor(e,t,i){if(e.isLighterThan(t))return e;i=i||.5;const n=e.getRelativeLuminance(),s=t.getRelativeLuminance();return i=i*(s-n)/s,e.lighten(i)}static getDarkerColor(e,t,i){if(e.isDarkerThan(t))return e;i=i||.5;const n=e.getRelativeLuminance(),s=t.getRelativeLuminance();return i=i*(n-s)/n,e.darken(i)}}ne.white=new ne(new ai(255,255,255,1));ne.black=new ne(new ai(0,0,0,1));ne.red=new ne(new ai(255,0,0,1));ne.blue=new ne(new ai(0,0,255,1));ne.green=new ne(new ai(0,255,0,1));ne.cyan=new ne(new ai(0,255,255,1));ne.lightgrey=new ne(new ai(211,211,211,1));ne.transparent=new ne(new ai(0,0,0,0));(function(o){(function(e){(function(t){function i(p){return p.rgba.a===1?`rgb(${p.rgba.r}, ${p.rgba.g}, ${p.rgba.b})`:o.Format.CSS.formatRGBA(p)}t.formatRGB=i;function n(p){return`rgba(${p.rgba.r}, ${p.rgba.g}, ${p.rgba.b}, ${+p.rgba.a.toFixed(2)})`}t.formatRGBA=n;function s(p){return p.hsla.a===1?`hsl(${p.hsla.h}, ${(p.hsla.s*100).toFixed(2)}%, ${(p.hsla.l*100).toFixed(2)}%)`:o.Format.CSS.formatHSLA(p)}t.formatHSL=s;function r(p){return`hsla(${p.hsla.h}, ${(p.hsla.s*100).toFixed(2)}%, ${(p.hsla.l*100).toFixed(2)}%, ${p.hsla.a.toFixed(2)})`}t.formatHSLA=r;function a(p){const _=p.toString(16);return _.length!==2?"0"+_:_}function l(p){return`#${a(p.rgba.r)}${a(p.rgba.g)}${a(p.rgba.b)}`}t.formatHex=l;function c(p,_=!1){return _&&p.rgba.a===1?o.Format.CSS.formatHex(p):`#${a(p.rgba.r)}${a(p.rgba.g)}${a(p.rgba.b)}${a(Math.round(p.rgba.a*255))}`}t.formatHexA=c;function u(p){return p.isOpaque()?o.Format.CSS.formatHex(p):o.Format.CSS.formatRGBA(p)}t.format=u;function f(p){const _=p.length;if(_===0||p.charCodeAt(0)!==35)return null;if(_===7){const b=16*g(p.charCodeAt(1))+g(p.charCodeAt(2)),y=16*g(p.charCodeAt(3))+g(p.charCodeAt(4)),S=16*g(p.charCodeAt(5))+g(p.charCodeAt(6));return new o(new ai(b,y,S,1))}if(_===9){const b=16*g(p.charCodeAt(1))+g(p.charCodeAt(2)),y=16*g(p.charCodeAt(3))+g(p.charCodeAt(4)),S=16*g(p.charCodeAt(5))+g(p.charCodeAt(6)),L=16*g(p.charCodeAt(7))+g(p.charCodeAt(8));return new o(new ai(b,y,S,L/255))}if(_===4){const b=g(p.charCodeAt(1)),y=g(p.charCodeAt(2)),S=g(p.charCodeAt(3));return new o(new ai(16*b+b,16*y+y,16*S+S))}if(_===5){const b=g(p.charCodeAt(1)),y=g(p.charCodeAt(2)),S=g(p.charCodeAt(3)),L=g(p.charCodeAt(4));return new o(new ai(16*b+b,16*y+y,16*S+S,(16*L+L)/255))}return null}t.parseHex=f;function g(p){switch(p){case 48:return 0;case 49:return 1;case 50:return 2;case 51:return 3;case 52:return 4;case 53:return 5;case 54:return 6;case 55:return 7;case 56:return 8;case 57:return 9;case 97:return 10;case 65:return 10;case 98:return 11;case 66:return 11;case 99:return 12;case 67:return 12;case 100:return 13;case 68:return 13;case 101:return 14;case 69:return 14;case 102:return 15;case 70:return 15}return 0}})(e.CSS||(e.CSS={}))})(o.Format||(o.Format={}))})(ne||(ne={}));function bne(o){const e=[];for(const t of o){const i=Number(t);(i||i===0&&t.replace(/\s/g,"")!=="")&&e.push(i)}return e}function lH(o,e,t,i){return{red:o/255,blue:t/255,green:e/255,alpha:i}}function fS(o,e){const t=e.index,i=e[0].length;if(!t)return;const n=o.positionAt(t);return{startLineNumber:n.lineNumber,startColumn:n.column,endLineNumber:n.lineNumber,endColumn:n.column+i}}function kSe(o,e){if(!o)return;const t=ne.Format.CSS.parseHex(e);if(t)return{range:o,color:lH(t.rgba.r,t.rgba.g,t.rgba.b,t.rgba.a)}}function wZ(o,e,t){if(!o||e.length!==1)return;const n=e[0].values(),s=bne(n);return{range:o,color:lH(s[0],s[1],s[2],t?s[3]:1)}}function yZ(o,e,t){if(!o||e.length!==1)return;const n=e[0].values(),s=bne(n),r=new ne(new Bc(s[0],s[1]/100,s[2]/100,t?s[3]:1));return{range:o,color:lH(r.rgba.r,r.rgba.g,r.rgba.b,r.rgba.a)}}function gS(o,e){return typeof o=="string"?[...o.matchAll(e)]:o.findMatches(e)}function ESe(o){const e=[],i=gS(o,/\b(rgb|rgba|hsl|hsla)(\([0-9\s,.\%]*\))|(#)([A-Fa-f0-9]{3})\b|(#)([A-Fa-f0-9]{4})\b|(#)([A-Fa-f0-9]{6})\b|(#)([A-Fa-f0-9]{8})\b/gm);if(i.length>0)for(const n of i){const s=n.filter(c=>c!==void 0),r=s[1],a=s[2];if(!a)continue;let l;if(r==="rgb"){const c=/^\(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*\)$/gm;l=wZ(fS(o,n),gS(a,c),!1)}else if(r==="rgba"){const c=/^\(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(0[.][0-9]+|[.][0-9]+|[01][.]|[01])\s*\)$/gm;l=wZ(fS(o,n),gS(a,c),!0)}else if(r==="hsl"){const c=/^\(\s*(36[0]|3[0-5][0-9]|[12][0-9][0-9]|[1-9]?[0-9])\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*\)$/gm;l=yZ(fS(o,n),gS(a,c),!1)}else if(r==="hsla"){const c=/^\(\s*(36[0]|3[0-5][0-9]|[12][0-9][0-9]|[1-9]?[0-9])\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(0[.][0-9]+|[.][0-9]+|[01][.]|[01])\s*\)$/gm;l=yZ(fS(o,n),gS(a,c),!0)}else r==="#"&&(l=kSe(fS(o,n),r+a));l&&e.push(l)}return e}function ISe(o){return!o||typeof o.getValue!="function"||typeof o.positionAt!="function"?[]:ESe(o)}const SZ=new RegExp("\\bMARK:\\s*(.*)$","d"),TSe=/^-+|-+$/g;function NSe(o,e){var t;let i=[];if(e.findRegionSectionHeaders&&(!((t=e.foldingRules)===null||t===void 0)&&t.markers)){const n=RSe(o,e);i=i.concat(n)}if(e.findMarkSectionHeaders){const n=MSe(o);i=i.concat(n)}return i}function RSe(o,e){const t=[],i=o.getLineCount();for(let n=1;n<=i;n++){const s=o.getLineContent(n),r=s.match(e.foldingRules.markers.start);if(r){const a={startLineNumber:n,startColumn:r[0].length+1,endLineNumber:n,endColumn:s.length+1};if(a.endColumn>a.startColumn){const l={range:a,...Cne(s.substring(r[0].length)),shouldBeInComments:!1};(l.text||l.hasSeparatorLine)&&t.push(l)}}}return t}function MSe(o){const e=[],t=o.getLineCount();for(let i=1;i<=t;i++){const n=o.getLineContent(i);ASe(n,i,e)}return e}function ASe(o,e,t){SZ.lastIndex=0;const i=SZ.exec(o);if(i){const n=i.indices[1][0]+1,s=i.indices[1][1]+1,r={startLineNumber:e,startColumn:n,endLineNumber:e,endColumn:s};if(r.endColumn>r.startColumn){const a={range:r,...Cne(i[1]),shouldBeInComments:!0};(a.text||a.hasSeparatorLine)&&t.push(a)}}}function Cne(o){o=o.trim();const e=o.startsWith("-");return o=o.replace(TSe,""),{text:o,hasSeparatorLine:e}}class PSe extends Mye{get uri(){return this._uri}get eol(){return this._eol}getValue(){return this.getText()}findMatches(e){const t=[];for(let i=0;i<this._lines.length;i++){const n=this._lines[i],s=this.offsetAt(new Z(i+1,1)),r=n.matchAll(e);for(const a of r)(a.index||a.index===0)&&(a.index=a.index+s),t.push(a)}return t}getLinesContent(){return this._lines.slice(0)}getLineCount(){return this._lines.length}getLineContent(e){return this._lines[e-1]}getWordAtPosition(e,t){const i=YL(e.column,kV(t),this._lines[e.lineNumber-1],0);return i?new A(e.lineNumber,i.startColumn,e.lineNumber,i.endColumn):null}words(e){const t=this._lines,i=this._wordenize.bind(this);let n=0,s="",r=0,a=[];return{*[Symbol.iterator](){for(;;)if(r<a.length){const l=s.substring(a[r].start,a[r].end);r+=1,yield l}else if(n<t.length)s=t[n],a=i(s,e),r=0,n+=1;else break}}}getLineWords(e,t){const i=this._lines[e-1],n=this._wordenize(i,t),s=[];for(const r of n)s.push({word:i.substring(r.start,r.end),startColumn:r.start+1,endColumn:r.end+1});return s}_wordenize(e,t){const i=[];let n;for(t.lastIndex=0;(n=t.exec(e))&&n[0].length!==0;)i.push({start:n.index,end:n.index+n[0].length});return i}getValueInRange(e){if(e=this._validateRange(e),e.startLineNumber===e.endLineNumber)return this._lines[e.startLineNumber-1].substring(e.startColumn-1,e.endColumn-1);const t=this._eol,i=e.startLineNumber-1,n=e.endLineNumber-1,s=[];s.push(this._lines[i].substring(e.startColumn-1));for(let r=i+1;r<n;r++)s.push(this._lines[r]);return s.push(this._lines[n].substring(0,e.endColumn-1)),s.join(t)}offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.lineNumber-2)+(e.column-1)}positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();const t=this._lineStarts.getIndexOf(e),i=this._lines[t.index].length;return{lineNumber:1+t.index,column:1+Math.min(t.remainder,i)}}_validateRange(e){const t=this._validatePosition({lineNumber:e.startLineNumber,column:e.startColumn}),i=this._validatePosition({lineNumber:e.endLineNumber,column:e.endColumn});return t.lineNumber!==e.startLineNumber||t.column!==e.startColumn||i.lineNumber!==e.endLineNumber||i.column!==e.endColumn?{startLineNumber:t.lineNumber,startColumn:t.column,endLineNumber:i.lineNumber,endColumn:i.column}:e}_validatePosition(e){if(!Z.isIPosition(e))throw new Error("bad position");let{lineNumber:t,column:i}=e,n=!1;if(t<1)t=1,i=1,n=!0;else if(t>this._lines.length)t=this._lines.length,i=this._lines[t-1].length+1,n=!0;else{const s=this._lines[t-1].length+1;i<1?(i=1,n=!0):i>s&&(i=s,n=!0)}return n?{lineNumber:t,column:i}:e}}class qp{constructor(e,t){this._host=e,this._models=Object.create(null),this._foreignModuleFactory=t,this._foreignModule=null}dispose(){this._models=Object.create(null)}_getModel(e){return this._models[e]}_getModels(){const e=[];return Object.keys(this._models).forEach(t=>e.push(this._models[t])),e}acceptNewModel(e){this._models[e.url]=new PSe(gt.parse(e.url),e.lines,e.EOL,e.versionId)}acceptModelChanged(e,t){if(!this._models[e])return;this._models[e].onEvents(t)}acceptRemovedModel(e){this._models[e]&&delete this._models[e]}async computeUnicodeHighlights(e,t,i){const n=this._getModel(e);return n?oH.computeUnicodeHighlights(n,t,i):{ranges:[],hasMore:!1,ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0}}async findSectionHeaders(e,t){const i=this._getModel(e);return i?NSe(i,t):[]}async computeDiff(e,t,i,n){const s=this._getModel(e),r=this._getModel(t);return!s||!r?null:qp.computeDiff(s,r,i,n)}static computeDiff(e,t,i,n){const s=n==="advanced"?CZ.getDefault():CZ.getLegacy(),r=e.getLinesContent(),a=t.getLinesContent(),l=s.computeDiff(r,a,i),c=l.changes.length>0?!1:this._modelsAreIdentical(e,t);function u(f){return f.map(g=>{var p;return[g.original.startLineNumber,g.original.endLineNumberExclusive,g.modified.startLineNumber,g.modified.endLineNumberExclusive,(p=g.innerChanges)===null||p===void 0?void 0:p.map(_=>[_.originalRange.startLineNumber,_.originalRange.startColumn,_.originalRange.endLineNumber,_.originalRange.endColumn,_.modifiedRange.startLineNumber,_.modifiedRange.startColumn,_.modifiedRange.endLineNumber,_.modifiedRange.endColumn])]})}return{identical:c,quitEarly:l.hitTimeout,changes:u(l.changes),moves:l.moves.map(f=>[f.lineRangeMapping.original.startLineNumber,f.lineRangeMapping.original.endLineNumberExclusive,f.lineRangeMapping.modified.startLineNumber,f.lineRangeMapping.modified.endLineNumberExclusive,u(f.changes)])}}static _modelsAreIdentical(e,t){const i=e.getLineCount(),n=t.getLineCount();if(i!==n)return!1;for(let s=1;s<=i;s++){const r=e.getLineContent(s),a=t.getLineContent(s);if(r!==a)return!1}return!0}async computeMoreMinimalEdits(e,t,i){const n=this._getModel(e);if(!n)return t;const s=[];let r;t=t.slice(0).sort((l,c)=>{if(l.range&&c.range)return A.compareRangesUsingStarts(l.range,c.range);const u=l.range?0:1,f=c.range?0:1;return u-f});let a=0;for(let l=1;l<t.length;l++)A.getEndPosition(t[a].range).equals(A.getStartPosition(t[l].range))?(t[a].range=A.fromPositions(A.getStartPosition(t[a].range),A.getEndPosition(t[l].range)),t[a].text+=t[l].text):(a++,t[a]=t[l]);t.length=a+1;for(let{range:l,text:c,eol:u}of t){if(typeof u=="number"&&(r=u),A.isEmpty(l)&&!c)continue;const f=n.getValueInRange(l);if(c=c.replace(/\r\n|\n|\r/g,n.eol),f===c)continue;if(Math.max(c.length,f.length)>qp._diffLimit){s.push({range:l,text:c});continue}const g=Tye(f,c,i),p=n.offsetAt(A.lift(l).getStartPosition());for(const _ of g){const b=n.positionAt(p+_.originalStart),y=n.positionAt(p+_.originalStart+_.originalLength),S={text:c.substr(_.modifiedStart,_.modifiedLength),range:{startLineNumber:b.lineNumber,startColumn:b.column,endLineNumber:y.lineNumber,endColumn:y.column}};n.getValueInRange(S.range)!==S.text&&s.push(S)}}return typeof r=="number"&&s.push({eol:r,text:"",range:{startLineNumber:0,startColumn:0,endLineNumber:0,endColumn:0}}),s}async computeLinks(e){const t=this._getModel(e);return t?Bye(t):null}async computeDefaultDocumentColors(e){const t=this._getModel(e);return t?ISe(t):null}async textualSuggest(e,t,i,n){const s=new Ao,r=new RegExp(i,n),a=new Set;e:for(const l of e){const c=this._getModel(l);if(c){for(const u of c.words(r))if(!(u===t||!isNaN(Number(u)))&&(a.add(u),a.size>qp._suggestionsLimit))break e}}return{words:Array.from(a),duration:s.elapsed()}}async computeWordRanges(e,t,i,n){const s=this._getModel(e);if(!s)return Object.create(null);const r=new RegExp(i,n),a=Object.create(null);for(let l=t.startLineNumber;l<t.endLineNumber;l++){const c=s.getLineWords(l,r);for(const u of c){if(!isNaN(Number(u.word)))continue;let f=a[u.word];f||(f=[],a[u.word]=f),f.push({startLineNumber:l,startColumn:u.startColumn,endLineNumber:l,endColumn:u.endColumn})}}return a}async navigateValueSet(e,t,i,n,s){const r=this._getModel(e);if(!r)return null;const a=new RegExp(n,s);t.startColumn===t.endColumn&&(t={startLineNumber:t.startLineNumber,startColumn:t.startColumn,endLineNumber:t.endLineNumber,endColumn:t.endColumn+1});const l=r.getValueInRange(t),c=r.getWordAtPosition({lineNumber:t.startLineNumber,column:t.startColumn},a);if(!c)return null;const u=r.getValueInRange(c);return h9.INSTANCE.navigateValueSet(t,l,c,u,i)}loadForeignModule(e,t,i){const r={host:Nbe(i,(a,l)=>this._host.fhr(a,l)),getMirrorModels:()=>this._getModels()};return this._foreignModuleFactory?(this._foreignModule=this._foreignModuleFactory(r,t),Promise.resolve(SV(this._foreignModule))):Promise.reject(new Error("Unexpected usage"))}fmr(e,t){if(!this._foreignModule||typeof this._foreignModule[e]!="function")return Promise.reject(new Error("Missing requestHandler or method: "+e));try{return Promise.resolve(this._foreignModule[e].apply(this._foreignModule,t))}catch(i){return Promise.reject(i)}}}qp._diffLimit=1e5;qp._suggestionsLimit=1e4;typeof importScripts=="function"&&(globalThis.monaco=cie());const cH=Zt("textResourceConfigurationService"),wne=Zt("textResourcePropertiesService"),Ze=Zt("ILanguageFeaturesService");var OSe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},pS=function(o,e){return function(t,i){e(t,i,o)}};const LZ=60*1e3,xZ=5*60*1e3;function q_(o,e){const t=o.getModel(e);return!(!t||t.isTooLargeForSyncing())}let _9=class extends J{constructor(e,t,i,n,s){super(),this._modelService=e,this._workerManager=this._register(new BSe(this._modelService,n)),this._logService=i,this._register(s.linkProvider.register({language:"*",hasAccessToAllModels:!0},{provideLinks:(r,a)=>q_(this._modelService,r.uri)?this._workerManager.withWorker().then(l=>l.computeLinks(r.uri)).then(l=>l&&{links:l}):Promise.resolve({links:[]})})),this._register(s.completionProvider.register("*",new FSe(this._workerManager,t,this._modelService,n)))}dispose(){super.dispose()}canComputeUnicodeHighlights(e){return q_(this._modelService,e)}computedUnicodeHighlights(e,t,i){return this._workerManager.withWorker().then(n=>n.computedUnicodeHighlights(e,t,i))}async computeDiff(e,t,i,n){const s=await this._workerManager.withWorker().then(l=>l.computeDiff(e,t,i,n));if(!s)return null;return{identical:s.identical,quitEarly:s.quitEarly,changes:a(s.changes),moves:s.moves.map(l=>new pne(new Or(new Bt(l[0],l[1]),new Bt(l[2],l[3])),a(l[4])))};function a(l){return l.map(c=>{var u;return new Sl(new Bt(c[0],c[1]),new Bt(c[2],c[3]),(u=c[4])===null||u===void 0?void 0:u.map(f=>new sg(new A(f[0],f[1],f[2],f[3]),new A(f[4],f[5],f[6],f[7]))))})}}computeMoreMinimalEdits(e,t,i=!1){if(Yo(t)){if(!q_(this._modelService,e))return Promise.resolve(t);const n=Ao.create(),s=this._workerManager.withWorker().then(r=>r.computeMoreMinimalEdits(e,t,i));return s.finally(()=>this._logService.trace("FORMAT#computeMoreMinimalEdits",e.toString(!0),n.elapsed())),Promise.race([s,cm(1e3).then(()=>t)])}else return Promise.resolve(void 0)}canNavigateValueSet(e){return q_(this._modelService,e)}navigateValueSet(e,t,i){return this._workerManager.withWorker().then(n=>n.navigateValueSet(e,t,i))}canComputeWordRanges(e){return q_(this._modelService,e)}computeWordRanges(e,t){return this._workerManager.withWorker().then(i=>i.computeWordRanges(e,t))}findSectionHeaders(e,t){return this._workerManager.withWorker().then(i=>i.findSectionHeaders(e,t))}};_9=OSe([pS(0,Fn),pS(1,cH),pS(2,mr),pS(3,dn),pS(4,Ze)],_9);class FSe{constructor(e,t,i,n){this.languageConfigurationService=n,this._debugDisplayName="wordbasedCompletions",this._workerManager=e,this._configurationService=t,this._modelService=i}async provideCompletionItems(e,t){const i=this._configurationService.getValue(e.uri,t,"editor");if(i.wordBasedSuggestions==="off")return;const n=[];if(i.wordBasedSuggestions==="currentDocument")q_(this._modelService,e.uri)&&n.push(e.uri);else for(const f of this._modelService.getModels())q_(this._modelService,f.uri)&&(f===e?n.unshift(f.uri):(i.wordBasedSuggestions==="allDocuments"||f.getLanguageId()===e.getLanguageId())&&n.push(f.uri));if(n.length===0)return;const s=this.languageConfigurationService.getLanguageConfiguration(e.getLanguageId()).getWordDefinition(),r=e.getWordAtPosition(t),a=r?new A(t.lineNumber,r.startColumn,t.lineNumber,r.endColumn):A.fromPositions(t),l=a.setEndPosition(t.lineNumber,t.column),u=await(await this._workerManager.withWorker()).textualSuggest(n,r==null?void 0:r.word,s);if(u)return{duration:u.duration,suggestions:u.words.map(f=>({kind:18,label:f,insertText:f,range:{insert:l,replace:a}}))}}}class BSe extends J{constructor(e,t){super(),this.languageConfigurationService=t,this._modelService=e,this._editorWorkerClient=null,this._lastWorkerUsedTime=new Date().getTime(),this._register(new GV).cancelAndSet(()=>this._checkStopIdleWorker(),Math.round(xZ/2),Hi),this._register(this._modelService.onModelRemoved(n=>this._checkStopEmptyWorker()))}dispose(){this._editorWorkerClient&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null),super.dispose()}_checkStopEmptyWorker(){if(!this._editorWorkerClient)return;this._modelService.getModels().length===0&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}_checkStopIdleWorker(){if(!this._editorWorkerClient)return;new Date().getTime()-this._lastWorkerUsedTime>xZ&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}withWorker(){return this._lastWorkerUsedTime=new Date().getTime(),this._editorWorkerClient||(this._editorWorkerClient=new dH(this._modelService,!1,"editorWorkerService",this.languageConfigurationService)),Promise.resolve(this._editorWorkerClient)}}class WSe extends J{constructor(e,t,i){if(super(),this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),this._proxy=e,this._modelService=t,!i){const n=new jV;n.cancelAndSet(()=>this._checkStopModelSync(),Math.round(LZ/2)),this._register(n)}}dispose(){for(const e in this._syncedModels)cn(this._syncedModels[e]);this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),super.dispose()}ensureSyncedResources(e,t){for(const i of e){const n=i.toString();this._syncedModels[n]||this._beginModelSync(i,t),this._syncedModels[n]&&(this._syncedModelsLastUsedTime[n]=new Date().getTime())}}_checkStopModelSync(){const e=new Date().getTime(),t=[];for(const i in this._syncedModelsLastUsedTime)e-this._syncedModelsLastUsedTime[i]>LZ&&t.push(i);for(const i of t)this._stopModelSync(i)}_beginModelSync(e,t){const i=this._modelService.getModel(e);if(!i||!t&&i.isTooLargeForSyncing())return;const n=e.toString();this._proxy.acceptNewModel({url:i.uri.toString(),lines:i.getLinesContent(),EOL:i.getEOL(),versionId:i.getVersionId()});const s=new he;s.add(i.onDidChangeContent(r=>{this._proxy.acceptModelChanged(n.toString(),r)})),s.add(i.onWillDispose(()=>{this._stopModelSync(n)})),s.add(lt(()=>{this._proxy.acceptRemovedModel(n)})),this._syncedModels[n]=s}_stopModelSync(e){const t=this._syncedModels[e];delete this._syncedModels[e],delete this._syncedModelsLastUsedTime[e],cn(t)}}class DZ{constructor(e){this._instance=e,this._proxyObj=Promise.resolve(this._instance)}dispose(){this._instance.dispose()}getProxyObject(){return this._proxyObj}}class h3{constructor(e){this._workerClient=e}fhr(e,t){return this._workerClient.fhr(e,t)}}class dH extends J{constructor(e,t,i,n){super(),this.languageConfigurationService=n,this._disposed=!1,this._modelService=e,this._keepIdleModels=t,this._workerFactory=new IA(i),this._worker=null,this._modelManager=null}fhr(e,t){throw new Error("Not implemented!")}_getOrCreateWorker(){if(!this._worker)try{this._worker=this._register(new Uwe(this._workerFactory,"vs/editor/common/services/editorSimpleWorker",new h3(this)))}catch(e){l9(e),this._worker=new DZ(new qp(new h3(this),null))}return this._worker}_getProxy(){return this._getOrCreateWorker().getProxyObject().then(void 0,e=>(l9(e),this._worker=new DZ(new qp(new h3(this),null)),this._getOrCreateWorker().getProxyObject()))}_getOrCreateModelManager(e){return this._modelManager||(this._modelManager=this._register(new WSe(e,this._modelService,this._keepIdleModels))),this._modelManager}async _withSyncedResources(e,t=!1){return this._disposed?Promise.reject(F0e()):this._getProxy().then(i=>(this._getOrCreateModelManager(i).ensureSyncedResources(e,t),i))}computedUnicodeHighlights(e,t,i){return this._withSyncedResources([e]).then(n=>n.computeUnicodeHighlights(e.toString(),t,i))}computeDiff(e,t,i,n){return this._withSyncedResources([e,t],!0).then(s=>s.computeDiff(e.toString(),t.toString(),i,n))}computeMoreMinimalEdits(e,t,i){return this._withSyncedResources([e]).then(n=>n.computeMoreMinimalEdits(e.toString(),t,i))}computeLinks(e){return this._withSyncedResources([e]).then(t=>t.computeLinks(e.toString()))}computeDefaultDocumentColors(e){return this._withSyncedResources([e]).then(t=>t.computeDefaultDocumentColors(e.toString()))}async textualSuggest(e,t,i){const n=await this._withSyncedResources(e),s=i.source,r=i.flags;return n.textualSuggest(e.map(a=>a.toString()),t,s,r)}computeWordRanges(e,t){return this._withSyncedResources([e]).then(i=>{const n=this._modelService.getModel(e);if(!n)return Promise.resolve(null);const s=this.languageConfigurationService.getLanguageConfiguration(n.getLanguageId()).getWordDefinition(),r=s.source,a=s.flags;return i.computeWordRanges(e.toString(),t,r,a)})}navigateValueSet(e,t,i){return this._withSyncedResources([e]).then(n=>{const s=this._modelService.getModel(e);if(!s)return null;const r=this.languageConfigurationService.getLanguageConfiguration(s.getLanguageId()).getWordDefinition(),a=r.source,l=r.flags;return n.navigateValueSet(e.toString(),t,i,a,l)})}findSectionHeaders(e,t){return this._withSyncedResources([e]).then(i=>i.findSectionHeaders(e.toString(),t))}dispose(){super.dispose(),this._disposed=!0}}function VSe(o,e,t){return new HSe(o,e,t)}class HSe extends dH{constructor(e,t,i){super(e,i.keepIdleModels||!1,i.label,t),this._foreignModuleId=i.moduleId,this._foreignModuleCreateData=i.createData||null,this._foreignModuleHost=i.host||null,this._foreignProxy=null}fhr(e,t){if(!this._foreignModuleHost||typeof this._foreignModuleHost[e]!="function")return Promise.reject(new Error("Missing method "+e+" or missing main thread foreign host."));try{return Promise.resolve(this._foreignModuleHost[e].apply(this._foreignModuleHost,t))}catch(i){return Promise.reject(i)}}_getForeignProxy(){return this._foreignProxy||(this._foreignProxy=this._getProxy().then(e=>{const t=this._foreignModuleHost?SV(this._foreignModuleHost):[];return e.loadForeignModule(this._foreignModuleId,this._foreignModuleCreateData,t).then(i=>{this._foreignModuleCreateData=null;const n=(a,l)=>e.fmr(a,l),s=(a,l)=>function(){const c=Array.prototype.slice.call(arguments,0);return l(a,c)},r={};for(const a of i)r[a]=s(a,n);return r})})),this._foreignProxy}getProxy(){return this._getForeignProxy()}withSyncedResources(e){return this._withSyncedResources(e).then(t=>this.getProxy())}}const HD={ICodeEditor:"vs.editor.ICodeEditor",IDiffEditor:"vs.editor.IDiffEditor"},l1=new class{clone(){return this}equals(o){return this===o}};function uH(o,e){return new PV([new ZL(0,"",o)],e)}function PA(o,e){const t=new Uint32Array(2);return t[0]=0,t[1]=(o<<0|0|0|32768|2<<24)>>>0,new uA(t,e===null?l1:e)}class To{static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&768)>>>8}static containsBalancedBrackets(e){return(e&1024)!==0}static getFontStyle(e){return(e&30720)>>>11}static getForeground(e){return(e&16744448)>>>15}static getBackground(e){return(e&4278190080)>>>24}static getClassNameFromMetadata(e){let i="mtk"+this.getForeground(e);const n=this.getFontStyle(e);return n&1&&(i+=" mtki"),n&2&&(i+=" mtkb"),n&4&&(i+=" mtku"),n&8&&(i+=" mtks"),i}static getInlineStyleFromMetadata(e,t){const i=this.getForeground(e),n=this.getFontStyle(e);let s=`color: ${t[i]};`;n&1&&(s+="font-style: italic;"),n&2&&(s+="font-weight: bold;");let r="";return n&4&&(r+=" underline"),n&8&&(r+=" line-through"),r&&(s+=`text-decoration:${r};`),s}static getPresentationFromMetadata(e){const t=this.getForeground(e),i=this.getFontStyle(e);return{foreground:t,italic:!!(i&1),bold:!!(i&2),underline:!!(i&4),strikethrough:!!(i&8)}}}class Gs{static createEmpty(e,t){const i=Gs.defaultTokenMetadata,n=new Uint32Array(2);return n[0]=e.length,n[1]=i,new Gs(n,e,t)}constructor(e,t,i){this._lineTokensBrand=void 0,this._tokens=e,this._tokensCount=this._tokens.length>>>1,this._text=t,this._languageIdCodec=i}equals(e){return e instanceof Gs?this.slicedEquals(e,0,this._tokensCount):!1}slicedEquals(e,t,i){if(this._text!==e._text||this._tokensCount!==e._tokensCount)return!1;const n=t<<1,s=n+(i<<1);for(let r=n;r<s;r++)if(this._tokens[r]!==e._tokens[r])return!1;return!0}getLineContent(){return this._text}getCount(){return this._tokensCount}getStartOffset(e){return e>0?this._tokens[e-1<<1]:0}getMetadata(e){return this._tokens[(e<<1)+1]}getLanguageId(e){const t=this._tokens[(e<<1)+1],i=To.getLanguageId(t);return this._languageIdCodec.decodeLanguageId(i)}getStandardTokenType(e){const t=this._tokens[(e<<1)+1];return To.getTokenType(t)}getForeground(e){const t=this._tokens[(e<<1)+1];return To.getForeground(t)}getClassName(e){const t=this._tokens[(e<<1)+1];return To.getClassNameFromMetadata(t)}getInlineStyle(e,t){const i=this._tokens[(e<<1)+1];return To.getInlineStyleFromMetadata(i,t)}getPresentation(e){const t=this._tokens[(e<<1)+1];return To.getPresentationFromMetadata(t)}getEndOffset(e){return this._tokens[e<<1]}findTokenIndexAtOffset(e){return Gs.findIndexInTokensArray(this._tokens,e)}inflate(){return this}sliceAndInflate(e,t,i){return new hH(this,e,t,i)}static convertToEndOffset(e,t){const n=(e.length>>>1)-1;for(let s=0;s<n;s++)e[s<<1]=e[s+1<<1];e[n<<1]=t}static findIndexInTokensArray(e,t){if(e.length<=2)return 0;let i=0,n=(e.length>>>1)-1;for(;i<n;){const s=i+Math.floor((n-i)/2),r=e[s<<1];if(r===t)return s+1;r<t?i=s+1:r>t&&(n=s)}return i}withInserted(e){if(e.length===0)return this;let t=0,i=0,n="";const s=new Array;let r=0;for(;;){const a=t<this._tokensCount?this._tokens[t<<1]:-1,l=i<e.length?e[i]:null;if(a!==-1&&(l===null||a<=l.offset)){n+=this._text.substring(r,a);const c=this._tokens[(t<<1)+1];s.push(n.length,c),t++,r=a}else if(l){if(l.offset>r){n+=this._text.substring(r,l.offset);const c=this._tokens[(t<<1)+1];s.push(n.length,c),r=l.offset}n+=l.text,s.push(n.length,l.tokenMetadata),i++}else break}return new Gs(new Uint32Array(s),n,this._languageIdCodec)}}Gs.defaultTokenMetadata=(32768|2<<24)>>>0;class hH{constructor(e,t,i,n){this._source=e,this._startOffset=t,this._endOffset=i,this._deltaOffset=n,this._firstTokenIndex=e.findTokenIndexAtOffset(t),this._tokensCount=0;for(let s=this._firstTokenIndex,r=e.getCount();s<r&&!(e.getStartOffset(s)>=i);s++)this._tokensCount++}getMetadata(e){return this._source.getMetadata(this._firstTokenIndex+e)}getLanguageId(e){return this._source.getLanguageId(this._firstTokenIndex+e)}getLineContent(){return this._source.getLineContent().substring(this._startOffset,this._endOffset)}equals(e){return e instanceof hH?this._startOffset===e._startOffset&&this._endOffset===e._endOffset&&this._deltaOffset===e._deltaOffset&&this._source.slicedEquals(e._source,this._firstTokenIndex,this._tokensCount):!1}getCount(){return this._tokensCount}getForeground(e){return this._source.getForeground(this._firstTokenIndex+e)}getEndOffset(e){const t=this._source.getEndOffset(this._firstTokenIndex+e);return Math.min(this._endOffset,t)-this._startOffset+this._deltaOffset}getClassName(e){return this._source.getClassName(this._firstTokenIndex+e)}getInlineStyle(e,t){return this._source.getInlineStyle(this._firstTokenIndex+e,t)}getPresentation(e){return this._source.getPresentation(this._firstTokenIndex+e)}findTokenIndexAtOffset(e){return this._source.findTokenIndexAtOffset(e+this._startOffset-this._deltaOffset)-this._firstTokenIndex}}class Hr{constructor(e,t,i,n){this.startColumn=e,this.endColumn=t,this.className=i,this.type=n,this._lineDecorationBrand=void 0}static _equals(e,t){return e.startColumn===t.startColumn&&e.endColumn===t.endColumn&&e.className===t.className&&e.type===t.type}static equalsArr(e,t){const i=e.length,n=t.length;if(i!==n)return!1;for(let s=0;s<i;s++)if(!Hr._equals(e[s],t[s]))return!1;return!0}static extractWrapped(e,t,i){if(e.length===0)return e;const n=t+1,s=i+1,r=i-t,a=[];let l=0;for(const c of e)c.endColumn<=n||c.startColumn>=s||(a[l++]=new Hr(Math.max(1,c.startColumn-n+1),Math.min(r+1,c.endColumn-n+1),c.className,c.type));return a}static filter(e,t,i,n){if(e.length===0)return[];const s=[];let r=0;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.range;if(u.endLineNumber<t||u.startLineNumber>t||u.isEmpty()&&(c.type===0||c.type===3))continue;const f=u.startLineNumber===t?u.startColumn:i,g=u.endLineNumber===t?u.endColumn:n;s[r++]=new Hr(f,g,c.inlineClassName,c.type)}return s}static _typeCompare(e,t){const i=[2,0,1,3];return i[e]-i[t]}static compare(e,t){if(e.startColumn!==t.startColumn)return e.startColumn-t.startColumn;if(e.endColumn!==t.endColumn)return e.endColumn-t.endColumn;const i=Hr._typeCompare(e.type,t.type);return i!==0?i:e.className!==t.className?e.className<t.className?-1:1:0}}class kZ{constructor(e,t,i,n){this.startOffset=e,this.endOffset=t,this.className=i,this.metadata=n}}class kR{constructor(){this.stopOffsets=[],this.classNames=[],this.metadata=[],this.count=0}static _metadata(e){let t=0;for(let i=0,n=e.length;i<n;i++)t|=e[i];return t}consumeLowerThan(e,t,i){for(;this.count>0&&this.stopOffsets[0]<e;){let n=0;for(;n+1<this.count&&this.stopOffsets[n]===this.stopOffsets[n+1];)n++;i.push(new kZ(t,this.stopOffsets[n],this.classNames.join(" "),kR._metadata(this.metadata))),t=this.stopOffsets[n]+1,this.stopOffsets.splice(0,n+1),this.classNames.splice(0,n+1),this.metadata.splice(0,n+1),this.count-=n+1}return this.count>0&&t<e&&(i.push(new kZ(t,e-1,this.classNames.join(" "),kR._metadata(this.metadata))),t=e),t}insert(e,t,i){if(this.count===0||this.stopOffsets[this.count-1]<=e)this.stopOffsets.push(e),this.classNames.push(t),this.metadata.push(i);else for(let n=0;n<this.count;n++)if(this.stopOffsets[n]>=e){this.stopOffsets.splice(n,0,e),this.classNames.splice(n,0,t),this.metadata.splice(n,0,i);break}this.count++}}class zSe{static normalize(e,t){if(t.length===0)return[];const i=[],n=new kR;let s=0;for(let r=0,a=t.length;r<a;r++){const l=t[r];let c=l.startColumn,u=l.endColumn;const f=l.className,g=l.type===1?2:l.type===2?4:0;if(c>1){const b=e.charCodeAt(c-2);qs(b)&&c--}if(u>1){const b=e.charCodeAt(u-2);qs(b)&&u--}const p=c-1,_=u-2;s=n.consumeLowerThan(p,s,i),n.count===0&&(s=p),n.insert(_,f,g)}return n.consumeLowerThan(1073741824,s,i),i}}class ro{constructor(e,t,i,n){this.endIndex=e,this.type=t,this.metadata=i,this.containsRTL=n,this._linePartBrand=void 0}isWhitespace(){return!!(this.metadata&1)}isPseudoAfter(){return!!(this.metadata&4)}}class yne{constructor(e,t){this.startOffset=e,this.endOffset=t}equals(e){return this.startOffset===e.startOffset&&this.endOffset===e.endOffset}}class Pm{constructor(e,t,i,n,s,r,a,l,c,u,f,g,p,_,b,y,S,L,x){this.useMonospaceOptimizations=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=i,this.continuesWithWrappedLine=n,this.isBasicASCII=s,this.containsRTL=r,this.fauxIndentLength=a,this.lineTokens=l,this.lineDecorations=c.sort(Hr.compare),this.tabSize=u,this.startVisibleColumn=f,this.spaceWidth=g,this.stopRenderingLineAfter=b,this.renderWhitespace=y==="all"?4:y==="boundary"?1:y==="selection"?2:y==="trailing"?3:0,this.renderControlCharacters=S,this.fontLigatures=L,this.selectionsOnLine=x&&x.sort((N,M)=>N.startOffset<M.startOffset?-1:1);const D=Math.abs(_-g),E=Math.abs(p-g);D<E?(this.renderSpaceWidth=_,this.renderSpaceCharCode=11825):(this.renderSpaceWidth=p,this.renderSpaceCharCode=183)}sameSelection(e){if(this.selectionsOnLine===null)return e===null;if(e===null||e.length!==this.selectionsOnLine.length)return!1;for(let t=0;t<this.selectionsOnLine.length;t++)if(!this.selectionsOnLine[t].equals(e[t]))return!1;return!0}equals(e){return this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineContent===e.lineContent&&this.continuesWithWrappedLine===e.continuesWithWrappedLine&&this.isBasicASCII===e.isBasicASCII&&this.containsRTL===e.containsRTL&&this.fauxIndentLength===e.fauxIndentLength&&this.tabSize===e.tabSize&&this.startVisibleColumn===e.startVisibleColumn&&this.spaceWidth===e.spaceWidth&&this.renderSpaceWidth===e.renderSpaceWidth&&this.renderSpaceCharCode===e.renderSpaceCharCode&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.fontLigatures===e.fontLigatures&&Hr.equalsArr(this.lineDecorations,e.lineDecorations)&&this.lineTokens.equals(e.lineTokens)&&this.sameSelection(e.selectionsOnLine)}}class Sne{constructor(e,t){this.partIndex=e,this.charIndex=t}}class Wu{static getPartIndex(e){return(e&4294901760)>>>16}static getCharIndex(e){return(e&65535)>>>0}constructor(e,t){this.length=e,this._data=new Uint32Array(this.length),this._horizontalOffset=new Uint32Array(this.length)}setColumnInfo(e,t,i,n){const s=(t<<16|i<<0)>>>0;this._data[e-1]=s,this._horizontalOffset[e-1]=n}getHorizontalOffset(e){return this._horizontalOffset.length===0?0:this._horizontalOffset[e-1]}charOffsetToPartData(e){return this.length===0?0:e<0?this._data[0]:e>=this.length?this._data[this.length-1]:this._data[e]}getDomPosition(e){const t=this.charOffsetToPartData(e-1),i=Wu.getPartIndex(t),n=Wu.getCharIndex(t);return new Sne(i,n)}getColumn(e,t){return this.partDataToCharOffset(e.partIndex,t,e.charIndex)+1}partDataToCharOffset(e,t,i){if(this.length===0)return 0;const n=(e<<16|i<<0)>>>0;let s=0,r=this.length-1;for(;s+1<r;){const b=s+r>>>1,y=this._data[b];if(y===n)return b;y>n?r=b:s=b}if(s===r)return s;const a=this._data[s],l=this._data[r];if(a===n)return s;if(l===n)return r;const c=Wu.getPartIndex(a),u=Wu.getCharIndex(a),f=Wu.getPartIndex(l);let g;c!==f?g=t:g=Wu.getCharIndex(l);const p=i-u,_=g-i;return p<=_?s:r}}class v9{constructor(e,t,i){this._renderLineOutputBrand=void 0,this.characterMapping=e,this.containsRTL=t,this.containsForeignElements=i}}function zD(o,e){if(o.lineContent.length===0){if(o.lineDecorations.length>0){e.appendString("<span>");let t=0,i=0,n=0;for(const r of o.lineDecorations)(r.type===1||r.type===2)&&(e.appendString('<span class="'),e.appendString(r.className),e.appendString('"></span>'),r.type===1&&(n|=1,t++),r.type===2&&(n|=2,i++));e.appendString("</span>");const s=new Wu(1,t+i);return s.setColumnInfo(1,t,0,0),new v9(s,!1,n)}return e.appendString("<span><span></span></span>"),new v9(new Wu(0,0),!1,0)}return QSe(jSe(o),e)}class USe{constructor(e,t,i,n){this.characterMapping=e,this.html=t,this.containsRTL=i,this.containsForeignElements=n}}function OA(o){const e=new Y1(1e4),t=zD(o,e);return new USe(t.characterMapping,e.build(),t.containsRTL,t.containsForeignElements)}class $Se{constructor(e,t,i,n,s,r,a,l,c,u,f,g,p,_,b,y){this.fontIsMonospace=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=i,this.len=n,this.isOverflowing=s,this.overflowingCharCount=r,this.parts=a,this.containsForeignElements=l,this.fauxIndentLength=c,this.tabSize=u,this.startVisibleColumn=f,this.containsRTL=g,this.spaceWidth=p,this.renderSpaceCharCode=_,this.renderWhitespace=b,this.renderControlCharacters=y}}function jSe(o){const e=o.lineContent;let t,i,n;o.stopRenderingLineAfter!==-1&&o.stopRenderingLineAfter<e.length?(t=!0,i=e.length-o.stopRenderingLineAfter,n=o.stopRenderingLineAfter):(t=!1,i=0,n=e.length);let s=KSe(e,o.containsRTL,o.lineTokens,o.fauxIndentLength,n);o.renderControlCharacters&&!o.isBasicASCII&&(s=GSe(e,s)),(o.renderWhitespace===4||o.renderWhitespace===1||o.renderWhitespace===2&&o.selectionsOnLine||o.renderWhitespace===3&&!o.continuesWithWrappedLine)&&(s=YSe(o,e,n,s));let r=0;if(o.lineDecorations.length>0){for(let a=0,l=o.lineDecorations.length;a<l;a++){const c=o.lineDecorations[a];c.type===3||c.type===1?r|=1:c.type===2&&(r|=2)}s=ZSe(e,n,s,o.lineDecorations)}return o.containsRTL||(s=qSe(e,s,!o.isBasicASCII||o.fontLigatures)),new $Se(o.useMonospaceOptimizations,o.canUseHalfwidthRightwardsArrow,e,n,t,i,s,r,o.fauxIndentLength,o.tabSize,o.startVisibleColumn,o.containsRTL,o.spaceWidth,o.renderSpaceCharCode,o.renderWhitespace,o.renderControlCharacters)}function KSe(o,e,t,i,n){const s=[];let r=0;i>0&&(s[r++]=new ro(i,"",0,!1));let a=i;for(let l=0,c=t.getCount();l<c;l++){const u=t.getEndOffset(l);if(u<=i)continue;const f=t.getClassName(l);if(u>=n){const p=e?i1(o.substring(a,n)):!1;s[r++]=new ro(n,f,0,p);break}const g=e?i1(o.substring(a,u)):!1;s[r++]=new ro(u,f,0,g),a=u}return s}function qSe(o,e,t){let i=0;const n=[];let s=0;if(t)for(let r=0,a=e.length;r<a;r++){const l=e[r],c=l.endIndex;if(i+50<c){const u=l.type,f=l.metadata,g=l.containsRTL;let p=-1,_=i;for(let b=i;b<c;b++)o.charCodeAt(b)===32&&(p=b),p!==-1&&b-_>=50&&(n[s++]=new ro(p+1,u,f,g),_=p+1,p=-1);_!==c&&(n[s++]=new ro(c,u,f,g))}else n[s++]=l;i=c}else for(let r=0,a=e.length;r<a;r++){const l=e[r],c=l.endIndex,u=c-i;if(u>50){const f=l.type,g=l.metadata,p=l.containsRTL,_=Math.ceil(u/50);for(let b=1;b<_;b++){const y=i+b*50;n[s++]=new ro(y,f,g,p)}n[s++]=new ro(c,f,g,p)}else n[s++]=l;i=c}return n}function Lne(o){return o<32?o!==9:o===127||o>=8234&&o<=8238||o>=8294&&o<=8297||o>=8206&&o<=8207||o===1564}function GSe(o,e){const t=[];let i=new ro(0,"",0,!1),n=0;for(const s of e){const r=s.endIndex;for(;n<r;n++){const a=o.charCodeAt(n);Lne(a)&&(n>i.endIndex&&(i=new ro(n,s.type,s.metadata,s.containsRTL),t.push(i)),i=new ro(n+1,"mtkcontrol",s.metadata,!1),t.push(i))}n>i.endIndex&&(i=new ro(r,s.type,s.metadata,s.containsRTL),t.push(i))}return t}function YSe(o,e,t,i){const n=o.continuesWithWrappedLine,s=o.fauxIndentLength,r=o.tabSize,a=o.startVisibleColumn,l=o.useMonospaceOptimizations,c=o.selectionsOnLine,u=o.renderWhitespace===1,f=o.renderWhitespace===3,g=o.renderSpaceWidth!==o.spaceWidth,p=[];let _=0,b=0,y=i[b].type,S=i[b].containsRTL,L=i[b].endIndex;const x=i.length;let D=!1,E=gr(e),N;E===-1?(D=!0,E=t,N=t):N=Bd(e);let M=!1,F=0,H=c&&c[F],Q=a%r;for(let j=s;j<t;j++){const q=e.charCodeAt(j);H&&j>=H.endOffset&&(F++,H=c&&c[F]);let se;if(j<E||j>N)se=!0;else if(q===9)se=!0;else if(q===32)if(u)if(M)se=!0;else{const fe=j+1<t?e.charCodeAt(j+1):0;se=fe===32||fe===9}else se=!0;else se=!1;if(se&&c&&(se=!!H&&H.startOffset<=j&&H.endOffset>j),se&&f&&(se=D||j>N),se&&S&&j>=E&&j<=N&&(se=!1),M){if(!se||!l&&Q>=r){if(g){const fe=_>0?p[_-1].endIndex:s;for(let Ae=fe+1;Ae<=j;Ae++)p[_++]=new ro(Ae,"mtkw",1,!1)}else p[_++]=new ro(j,"mtkw",1,!1);Q=Q%r}}else(j===L||se&&j>s)&&(p[_++]=new ro(j,y,0,S),Q=Q%r);for(q===9?Q=r:lm(q)?Q+=2:Q++,M=se;j===L&&(b++,b<x);)y=i[b].type,S=i[b].containsRTL,L=i[b].endIndex}let K=!1;if(M)if(n&&u){const j=t>0?e.charCodeAt(t-1):0,q=t>1?e.charCodeAt(t-2):0;j===32&&q!==32&&q!==9||(K=!0)}else K=!0;if(K)if(g){const j=_>0?p[_-1].endIndex:s;for(let q=j+1;q<=t;q++)p[_++]=new ro(q,"mtkw",1,!1)}else p[_++]=new ro(t,"mtkw",1,!1);else p[_++]=new ro(t,y,0,S);return p}function ZSe(o,e,t,i){i.sort(Hr.compare);const n=zSe.normalize(o,i),s=n.length;let r=0;const a=[];let l=0,c=0;for(let f=0,g=t.length;f<g;f++){const p=t[f],_=p.endIndex,b=p.type,y=p.metadata,S=p.containsRTL;for(;r<s&&n[r].startOffset<_;){const L=n[r];if(L.startOffset>c&&(c=L.startOffset,a[l++]=new ro(c,b,y,S)),L.endOffset+1<=_)c=L.endOffset+1,a[l++]=new ro(c,b+" "+L.className,y|L.metadata,S),r++;else{c=_,a[l++]=new ro(c,b+" "+L.className,y|L.metadata,S);break}}_>c&&(c=_,a[l++]=new ro(c,b,y,S))}const u=t[t.length-1].endIndex;if(r<s&&n[r].startOffset===u)for(;r<s&&n[r].startOffset===u;){const f=n[r];a[l++]=new ro(c,f.className,f.metadata,!1),r++}return a}function QSe(o,e){const t=o.fontIsMonospace,i=o.canUseHalfwidthRightwardsArrow,n=o.containsForeignElements,s=o.lineContent,r=o.len,a=o.isOverflowing,l=o.overflowingCharCount,c=o.parts,u=o.fauxIndentLength,f=o.tabSize,g=o.startVisibleColumn,p=o.containsRTL,_=o.spaceWidth,b=o.renderSpaceCharCode,y=o.renderWhitespace,S=o.renderControlCharacters,L=new Wu(r+1,c.length);let x=!1,D=0,E=g,N=0,M=0,F=0;p?e.appendString('<span dir="ltr">'):e.appendString("<span>");for(let H=0,Q=c.length;H<Q;H++){const K=c[H],j=K.endIndex,q=K.type,se=K.containsRTL,fe=y!==0&&K.isWhitespace(),Ae=fe&&!t&&(q==="mtkw"||!n),Ne=D===j&&K.isPseudoAfter();if(N=0,e.appendString("<span "),se&&e.appendString('style="unicode-bidi:isolate" '),e.appendString('class="'),e.appendString(Ae?"mtkz":q),e.appendASCIICharCode(34),fe){let Le=0;{let be=D,ze=E;for(;be<j;be++){const qe=(s.charCodeAt(be)===9?f-ze%f:1)|0;Le+=qe,be>=u&&(ze+=qe)}}for(Ae&&(e.appendString(' style="width:'),e.appendString(String(_*Le)),e.appendString('px"')),e.appendASCIICharCode(62);D<j;D++){L.setColumnInfo(D+1,H-F,N,M),F=0;const be=s.charCodeAt(D);let ze,it;if(be===9){ze=f-E%f|0,it=ze,!i||it>1?e.appendCharCode(8594):e.appendCharCode(65515);for(let qe=2;qe<=it;qe++)e.appendCharCode(160)}else ze=2,it=1,e.appendCharCode(b),e.appendCharCode(8204);N+=ze,M+=it,D>=u&&(E+=it)}}else for(e.appendASCIICharCode(62);D<j;D++){L.setColumnInfo(D+1,H-F,N,M),F=0;const Le=s.charCodeAt(D);let be=1,ze=1;switch(Le){case 9:be=f-E%f,ze=be;for(let it=1;it<=be;it++)e.appendCharCode(160);break;case 32:e.appendCharCode(160);break;case 60:e.appendString("&lt;");break;case 62:e.appendString("&gt;");break;case 38:e.appendString("&amp;");break;case 0:S?e.appendCharCode(9216):e.appendString("&#00;");break;case 65279:case 8232:case 8233:case 133:e.appendCharCode(65533);break;default:lm(Le)&&ze++,S&&Le<32?e.appendCharCode(9216+Le):S&&Le===127?e.appendCharCode(9249):S&&Lne(Le)?(e.appendString("[U+"),e.appendString(XSe(Le)),e.appendString("]"),be=8,ze=be):e.appendCharCode(Le)}N+=be,M+=ze,D>=u&&(E+=ze)}Ne?F++:F=0,D>=r&&!x&&K.isPseudoAfter()&&(x=!0,L.setColumnInfo(D+1,H,N,M)),e.appendString("</span>")}return x||L.setColumnInfo(r+1,c.length-1,N,M),a&&(e.appendString('<span class="mtkoverflow">'),e.appendString(v("showMore","Show more ({0})",JSe(l))),e.appendString("</span>")),e.appendString("</span>"),new v9(L,p,n)}function XSe(o){return o.toString(16).toUpperCase().padStart(4,"0")}function JSe(o){return o<1024?v("overflow.chars","{0} chars",o):o<1024*1024?`${(o/1024).toFixed(1)} KB`:`${(o/1024/1024).toFixed(1)} MB`}class EZ{constructor(e,t,i,n){this._viewportBrand=void 0,this.top=e|0,this.left=t|0,this.width=i|0,this.height=n|0}}class eLe{constructor(e,t){this.tabSize=e,this.data=t}}class fH{constructor(e,t,i,n,s,r,a){this._viewLineDataBrand=void 0,this.content=e,this.continuesWithWrappedLine=t,this.minColumn=i,this.maxColumn=n,this.startVisibleColumn=s,this.tokens=r,this.inlineDecorations=a}}class El{constructor(e,t,i,n,s,r,a,l,c,u){this.minColumn=e,this.maxColumn=t,this.content=i,this.continuesWithWrappedLine=n,this.isBasicASCII=El.isBasicASCII(i,r),this.containsRTL=El.containsRTL(i,this.isBasicASCII,s),this.tokens=a,this.inlineDecorations=l,this.tabSize=c,this.startVisibleColumn=u}static isBasicASCII(e,t){return t?PD(e):!0}static containsRTL(e,t,i){return!t&&i?i1(e):!1}}class pL{constructor(e,t,i){this.range=e,this.inlineClassName=t,this.type=i}}class tLe{constructor(e,t,i,n){this.startOffset=e,this.endOffset=t,this.inlineClassName=i,this.inlineClassNameAffectsLetterSpacing=n}toInlineDecoration(e){return new pL(new A(e,this.startOffset+1,e,this.endOffset+1),this.inlineClassName,this.inlineClassNameAffectsLetterSpacing?3:0)}}class xne{constructor(e,t){this._viewModelDecorationBrand=void 0,this.range=e,this.options=t}}class ux{constructor(e,t,i){this.color=e,this.zIndex=t,this.data=i}static compareByRenderingProps(e,t){return e.zIndex===t.zIndex?e.color<t.color?-1:e.color>t.color?1:0:e.zIndex-t.zIndex}static equals(e,t){return e.color===t.color&&e.zIndex===t.zIndex&&zn(e.data,t.data)}static equalsArr(e,t){return zn(e,t,ux.equals)}}function iLe(o){return Array.isArray(o)}function nLe(o){return!iLe(o)}function Dne(o){return typeof o=="string"}function IZ(o){return!Dne(o)}function G_(o){return!o}function Gf(o,e){return o.ignoreCase&&e?e.toLowerCase():e}function TZ(o){return o.replace(/[&<>'"_]/g,"-")}function sLe(o,e){console.log(`${o.languageId}: ${e}`)}function yn(o,e){return new Error(`${o.languageId}: ${e}`)}function mp(o,e,t,i,n){const s=/\$((\$)|(#)|(\d\d?)|[sS](\d\d?)|@(\w+))/g;let r=null;return e.replace(s,function(a,l,c,u,f,g,p,_,b){return G_(c)?G_(u)?!G_(f)&&f<i.length?Gf(o,i[f]):!G_(p)&&o&&typeof o[p]=="string"?o[p]:(r===null&&(r=n.split("."),r.unshift(n)),!G_(g)&&g<r.length?Gf(o,r[g]):""):Gf(o,t):"$"})}function oLe(o,e,t){const i=/\$[sS](\d\d?)/g;let n=null;return e.replace(i,function(s,r){return n===null&&(n=t.split("."),n.unshift(t)),!G_(r)&&r<n.length?Gf(o,n[r]):""})}function QI(o,e){let t=e;for(;t&&t.length>0;){const i=o.tokenizer[t];if(i)return i;const n=t.lastIndexOf(".");n<0?t=null:t=t.substr(0,n)}return null}function rLe(o,e){let t=e;for(;t&&t.length>0;){if(o.stateNames[t])return!0;const n=t.lastIndexOf(".");n<0?t=null:t=t.substr(0,n)}return!1}var aLe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},lLe=function(o,e){return function(t,i){e(t,i,o)}},b9;const kne=5;class hx{static create(e,t){return this._INSTANCE.create(e,t)}constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}create(e,t){if(e!==null&&e.depth>=this._maxCacheDepth)return new EC(e,t);let i=EC.getStackElementId(e);i.length>0&&(i+="|"),i+=t;let n=this._entries[i];return n||(n=new EC(e,t),this._entries[i]=n,n)}}hx._INSTANCE=new hx(kne);class EC{constructor(e,t){this.parent=e,this.state=t,this.depth=(this.parent?this.parent.depth:0)+1}static getStackElementId(e){let t="";for(;e!==null;)t.length>0&&(t+="|"),t+=e.state,e=e.parent;return t}static _equals(e,t){for(;e!==null&&t!==null;){if(e===t)return!0;if(e.state!==t.state)return!1;e=e.parent,t=t.parent}return e===null&&t===null}equals(e){return EC._equals(this,e)}push(e){return hx.create(this,e)}pop(){return this.parent}popall(){let e=this;for(;e.parent;)e=e.parent;return e}switchTo(e){return hx.create(this.parent,e)}}class tC{constructor(e,t){this.languageId=e,this.state=t}equals(e){return this.languageId===e.languageId&&this.state.equals(e.state)}clone(){return this.state.clone()===this.state?this:new tC(this.languageId,this.state)}}class _p{static create(e,t){return this._INSTANCE.create(e,t)}constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}create(e,t){if(t!==null)return new mL(e,t);if(e!==null&&e.depth>=this._maxCacheDepth)return new mL(e,t);const i=EC.getStackElementId(e);let n=this._entries[i];return n||(n=new mL(e,null),this._entries[i]=n,n)}}_p._INSTANCE=new _p(kne);class mL{constructor(e,t){this.stack=e,this.embeddedLanguageData=t}clone(){return(this.embeddedLanguageData?this.embeddedLanguageData.clone():null)===this.embeddedLanguageData?this:_p.create(this.stack,this.embeddedLanguageData)}equals(e){return!(e instanceof mL)||!this.stack.equals(e.stack)?!1:this.embeddedLanguageData===null&&e.embeddedLanguageData===null?!0:this.embeddedLanguageData===null||e.embeddedLanguageData===null?!1:this.embeddedLanguageData.equals(e.embeddedLanguageData)}}class cLe{constructor(){this._tokens=[],this._languageId=null,this._lastTokenType=null,this._lastTokenLanguage=null}enterLanguage(e){this._languageId=e}emit(e,t){this._lastTokenType===t&&this._lastTokenLanguage===this._languageId||(this._lastTokenType=t,this._lastTokenLanguage=this._languageId,this._tokens.push(new ZL(e,t,this._languageId)))}nestedLanguageTokenize(e,t,i,n){const s=i.languageId,r=i.state,a=Qn.get(s);if(!a)return this.enterLanguage(s),this.emit(n,""),r;const l=a.tokenize(e,t,r);if(n!==0)for(const c of l.tokens)this._tokens.push(new ZL(c.offset+n,c.type,c.language));else this._tokens=this._tokens.concat(l.tokens);return this._lastTokenType=null,this._lastTokenLanguage=null,this._languageId=null,l.endState}finalize(e){return new PV(this._tokens,e)}}class ER{constructor(e,t){this._languageService=e,this._theme=t,this._prependTokens=null,this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0}enterLanguage(e){this._currentLanguageId=this._languageService.languageIdCodec.encodeLanguageId(e)}emit(e,t){const i=this._theme.match(this._currentLanguageId,t)|1024;this._lastTokenMetadata!==i&&(this._lastTokenMetadata=i,this._tokens.push(e),this._tokens.push(i))}static _merge(e,t,i){const n=e!==null?e.length:0,s=t.length,r=i!==null?i.length:0;if(n===0&&s===0&&r===0)return new Uint32Array(0);if(n===0&&s===0)return i;if(s===0&&r===0)return e;const a=new Uint32Array(n+s+r);e!==null&&a.set(e);for(let l=0;l<s;l++)a[n+l]=t[l];return i!==null&&a.set(i,n+s),a}nestedLanguageTokenize(e,t,i,n){const s=i.languageId,r=i.state,a=Qn.get(s);if(!a)return this.enterLanguage(s),this.emit(n,""),r;const l=a.tokenizeEncoded(e,t,r);if(n!==0)for(let c=0,u=l.tokens.length;c<u;c+=2)l.tokens[c]+=n;return this._prependTokens=ER._merge(this._prependTokens,this._tokens,l.tokens),this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0,l.endState}finalize(e){return new uA(ER._merge(this._prependTokens,this._tokens,null),e)}}let fx=b9=class extends J{constructor(e,t,i,n,s){super(),this._configurationService=s,this._languageService=e,this._standaloneThemeService=t,this._languageId=i,this._lexer=n,this._embeddedLanguages=Object.create(null),this.embeddedLoaded=Promise.resolve(void 0);let r=!1;this._register(Qn.onDidChange(a=>{if(r)return;let l=!1;for(let c=0,u=a.changedLanguages.length;c<u;c++){const f=a.changedLanguages[c];if(this._embeddedLanguages[f]){l=!0;break}}l&&(r=!0,Qn.handleChange([this._languageId]),r=!1)})),this._maxTokenizationLineLength=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:this._languageId}),this._register(this._configurationService.onDidChangeConfiguration(a=>{a.affectsConfiguration("editor.maxTokenizationLineLength")&&(this._maxTokenizationLineLength=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:this._languageId}))}))}getLoadStatus(){const e=[];for(const t in this._embeddedLanguages){const i=Qn.get(t);if(i){if(i instanceof b9){const n=i.getLoadStatus();n.loaded===!1&&e.push(n.promise)}continue}Qn.isResolved(t)||e.push(Qn.getOrCreate(t))}return e.length===0?{loaded:!0}:{loaded:!1,promise:Promise.all(e).then(t=>{})}}getInitialState(){const e=hx.create(null,this._lexer.start);return _p.create(e,null)}tokenize(e,t,i){if(e.length>=this._maxTokenizationLineLength)return uH(this._languageId,i);const n=new cLe,s=this._tokenize(e,t,i,n);return n.finalize(s)}tokenizeEncoded(e,t,i){if(e.length>=this._maxTokenizationLineLength)return PA(this._languageService.languageIdCodec.encodeLanguageId(this._languageId),i);const n=new ER(this._languageService,this._standaloneThemeService.getColorTheme().tokenTheme),s=this._tokenize(e,t,i,n);return n.finalize(s)}_tokenize(e,t,i,n){return i.embeddedLanguageData?this._nestedTokenize(e,t,i,0,n):this._myTokenize(e,t,i,0,n)}_findLeavingNestedLanguageOffset(e,t){let i=this._lexer.tokenizer[t.stack.state];if(!i&&(i=QI(this._lexer,t.stack.state),!i))throw yn(this._lexer,"tokenizer state is not defined: "+t.stack.state);let n=-1,s=!1;for(const r of i){if(!IZ(r.action)||r.action.nextEmbedded!=="@pop")continue;s=!0;let a=r.resolveRegex(t.stack.state);const l=a.source;if(l.substr(0,4)==="^(?:"&&l.substr(l.length-1,1)===")"){const u=(a.ignoreCase?"i":"")+(a.unicode?"u":"");a=new RegExp(l.substr(4,l.length-5),u)}const c=e.search(a);c===-1||c!==0&&r.matchOnlyAtLineStart||(n===-1||c<n)&&(n=c)}if(!s)throw yn(this._lexer,'no rule containing nextEmbedded: "@pop" in tokenizer embedded state: '+t.stack.state);return n}_nestedTokenize(e,t,i,n,s){const r=this._findLeavingNestedLanguageOffset(e,i);if(r===-1){const c=s.nestedLanguageTokenize(e,t,i.embeddedLanguageData,n);return _p.create(i.stack,new tC(i.embeddedLanguageData.languageId,c))}const a=e.substring(0,r);a.length>0&&s.nestedLanguageTokenize(a,!1,i.embeddedLanguageData,n);const l=e.substring(r);return this._myTokenize(l,t,i,n+r,s)}_safeRuleName(e){return e?e.name:"(unknown)"}_myTokenize(e,t,i,n,s){s.enterLanguage(this._languageId);const r=e.length,a=t&&this._lexer.includeLF?e+`
`:e,l=a.length;let c=i.embeddedLanguageData,u=i.stack,f=0,g=null,p=!0;for(;p||f<l;){const _=f,b=u.depth,y=g?g.groups.length:0,S=u.state;let L=null,x=null,D=null,E=null,N=null;if(g){L=g.matches;const H=g.groups.shift();x=H.matched,D=H.action,E=g.rule,g.groups.length===0&&(g=null)}else{if(!p&&f>=l)break;p=!1;let H=this._lexer.tokenizer[S];if(!H&&(H=QI(this._lexer,S),!H))throw yn(this._lexer,"tokenizer state is not defined: "+S);const Q=a.substr(f);for(const K of H)if((f===0||!K.matchOnlyAtLineStart)&&(L=Q.match(K.resolveRegex(S)),L)){x=L[0],D=K.action;break}}if(L||(L=[""],x=""),D||(f<l&&(L=[a.charAt(f)],x=L[0]),D=this._lexer.defaultToken),x===null)break;for(f+=x.length;nLe(D)&&IZ(D)&&D.test;)D=D.test(x,L,S,f===l);let M=null;if(typeof D=="string"||Array.isArray(D))M=D;else if(D.group)M=D.group;else if(D.token!==null&&D.token!==void 0){if(D.tokenSubst?M=mp(this._lexer,D.token,x,L,S):M=D.token,D.nextEmbedded)if(D.nextEmbedded==="@pop"){if(!c)throw yn(this._lexer,"cannot pop embedded language if not inside one");c=null}else{if(c)throw yn(this._lexer,"cannot enter embedded language from within an embedded language");N=mp(this._lexer,D.nextEmbedded,x,L,S)}if(D.goBack&&(f=Math.max(0,f-D.goBack)),D.switchTo&&typeof D.switchTo=="string"){let H=mp(this._lexer,D.switchTo,x,L,S);if(H[0]==="@"&&(H=H.substr(1)),QI(this._lexer,H))u=u.switchTo(H);else throw yn(this._lexer,"trying to switch to a state '"+H+"' that is undefined in rule: "+this._safeRuleName(E))}else{if(D.transform&&typeof D.transform=="function")throw yn(this._lexer,"action.transform not supported");if(D.next)if(D.next==="@push"){if(u.depth>=this._lexer.maxStack)throw yn(this._lexer,"maximum tokenizer stack size reached: ["+u.state+","+u.parent.state+",...]");u=u.push(S)}else if(D.next==="@pop"){if(u.depth<=1)throw yn(this._lexer,"trying to pop an empty stack in rule: "+this._safeRuleName(E));u=u.pop()}else if(D.next==="@popall")u=u.popall();else{let H=mp(this._lexer,D.next,x,L,S);if(H[0]==="@"&&(H=H.substr(1)),QI(this._lexer,H))u=u.push(H);else throw yn(this._lexer,"trying to set a next state '"+H+"' that is undefined in rule: "+this._safeRuleName(E))}}D.log&&typeof D.log=="string"&&sLe(this._lexer,this._lexer.languageId+": "+mp(this._lexer,D.log,x,L,S))}if(M===null)throw yn(this._lexer,"lexer rule has no well-defined action in rule: "+this._safeRuleName(E));const F=H=>{const Q=this._languageService.getLanguageIdByLanguageName(H)||this._languageService.getLanguageIdByMimeType(H)||H,K=this._getNestedEmbeddedLanguageData(Q);if(f<l){const j=e.substr(f);return this._nestedTokenize(j,t,_p.create(u,K),n+f,s)}else return _p.create(u,K)};if(Array.isArray(M)){if(g&&g.groups.length>0)throw yn(this._lexer,"groups cannot be nested: "+this._safeRuleName(E));if(L.length!==M.length+1)throw yn(this._lexer,"matched number of groups does not match the number of actions in rule: "+this._safeRuleName(E));let H=0;for(let Q=1;Q<L.length;Q++)H+=L[Q].length;if(H!==x.length)throw yn(this._lexer,"with groups, all characters should be matched in consecutive groups in rule: "+this._safeRuleName(E));g={rule:E,matches:L,groups:[]};for(let Q=0;Q<M.length;Q++)g.groups[Q]={action:M[Q],matched:L[Q+1]};f-=x.length;continue}else{if(M==="@rematch"&&(f-=x.length,x="",L=null,M="",N!==null))return F(N);if(x.length===0){if(l===0||b!==u.depth||S!==u.state||(g?g.groups.length:0)!==y)continue;throw yn(this._lexer,"no progress in tokenizer in rule: "+this._safeRuleName(E))}let H=null;if(Dne(M)&&M.indexOf("@brackets")===0){const Q=M.substr(9),K=dLe(this._lexer,x);if(!K)throw yn(this._lexer,"@brackets token returned but no bracket defined as: "+x);H=TZ(K.token+Q)}else{const Q=M===""?"":M+this._lexer.tokenPostfix;H=TZ(Q)}_<r&&s.emit(_+n,H)}if(N!==null)return F(N)}return _p.create(u,c)}_getNestedEmbeddedLanguageData(e){if(!this._languageService.isRegisteredLanguageId(e))return new tC(e,l1);e!==this._languageId&&(this._languageService.requestBasicLanguageFeatures(e),Qn.getOrCreate(e),this._embeddedLanguages[e]=!0);const t=Qn.get(e);return t?new tC(e,t.getInitialState()):new tC(e,l1)}};fx=b9=aLe([lLe(4,$t)],fx);function dLe(o,e){if(!e)return null;e=Gf(o,e);const t=o.brackets;for(const i of t){if(i.open===e)return{token:i.token,bracketType:1};if(i.close===e)return{token:i.token,bracketType:-1}}return null}const f3=fg("standaloneColorizer",{createHTML:o=>o});class gH{static colorizeElement(e,t,i,n){n=n||{};const s=n.theme||"vs",r=n.mimeType||i.getAttribute("lang")||i.getAttribute("data-lang");if(!r)return console.error("Mode not detected"),Promise.resolve();const a=t.getLanguageIdByMimeType(r)||r;e.setTheme(s);const l=i.firstChild?i.firstChild.nodeValue:"";i.className+=" "+s;const c=u=>{var f;const g=(f=f3==null?void 0:f3.createHTML(u))!==null&&f!==void 0?f:u;i.innerHTML=g};return this.colorize(t,l||"",a,n).then(c,u=>console.error(u))}static async colorize(e,t,i,n){const s=e.languageIdCodec;let r=4;n&&typeof n.tabSize=="number"&&(r=n.tabSize),zV(t)&&(t=t.substr(1));const a=Sh(t);if(!e.isRegisteredLanguageId(i))return NZ(a,r,s);const l=await Qn.getOrCreate(i);return l?uLe(a,r,l,s):NZ(a,r,s)}static colorizeLine(e,t,i,n,s=4){const r=El.isBasicASCII(e,t),a=El.containsRTL(e,r,i);return OA(new Pm(!1,!0,e,!1,r,a,0,n,[],s,0,0,0,0,-1,"none",!1,!1,null)).html}static colorizeModelLine(e,t,i=4){const n=e.getLineContent(t);e.tokenization.forceTokenization(t);const r=e.tokenization.getLineTokens(t).inflate();return this.colorizeLine(n,e.mightContainNonBasicASCII(),e.mightContainRTL(),r,i)}}function uLe(o,e,t,i){return new Promise((n,s)=>{const r=()=>{const a=hLe(o,e,t,i);if(t instanceof fx){const l=t.getLoadStatus();if(l.loaded===!1){l.promise.then(r,s);return}}n(a)};r()})}function NZ(o,e,t){let i=[];const s=new Uint32Array(2);s[0]=0,s[1]=33587200;for(let r=0,a=o.length;r<a;r++){const l=o[r];s[0]=l.length;const c=new Gs(s,l,t),u=El.isBasicASCII(l,!0),f=El.containsRTL(l,u,!0),g=OA(new Pm(!1,!0,l,!1,u,f,0,c,[],e,0,0,0,0,-1,"none",!1,!1,null));i=i.concat(g.html),i.push("<br/>")}return i.join("")}function hLe(o,e,t,i){let n=[],s=t.getInitialState();for(let r=0,a=o.length;r<a;r++){const l=o[r],c=t.tokenizeEncoded(l,!0,s);Gs.convertToEndOffset(c.tokens,l.length);const u=new Gs(c.tokens,l,i),f=El.isBasicASCII(l,!0),g=El.containsRTL(l,f,!0),p=OA(new Pm(!1,!0,l,!1,f,g,0,u.inflate(),[],e,0,0,0,0,-1,"none",!1,!1,null));n=n.concat(p.html),n.push("<br/>"),s=c.endState}return n.join("")}const RZ=2e4;let Y_,yN,C9,SN,w9;function fLe(o){Y_=document.createElement("div"),Y_.className="monaco-aria-container";const e=()=>{const i=document.createElement("div");return i.className="monaco-alert",i.setAttribute("role","alert"),i.setAttribute("aria-atomic","true"),Y_.appendChild(i),i};yN=e(),C9=e();const t=()=>{const i=document.createElement("div");return i.className="monaco-status",i.setAttribute("aria-live","polite"),i.setAttribute("aria-atomic","true"),Y_.appendChild(i),i};SN=t(),w9=t(),o.appendChild(Y_)}function _a(o){Y_&&(yN.textContent!==o?(Zo(C9),IR(yN,o)):(Zo(yN),IR(C9,o)))}function fh(o){Y_&&(SN.textContent!==o?(Zo(w9),IR(SN,o)):(Zo(SN),IR(w9,o)))}function IR(o,e){Zo(o),e.length>RZ&&(e=e.substr(0,RZ)),o.textContent=e,o.style.visibility="hidden",o.style.visibility="visible"}const pH=Zt("markerDecorationsService");var gLe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},pLe=function(o,e){return function(t,i){e(t,i,o)}};let gx=class{constructor(e,t){}dispose(){}};gx.ID="editor.contrib.markerDecorations";gx=gLe([pLe(1,pH)],gx);pi(gx.ID,gx,0);class Ene extends J{constructor(e,t){super(),this._onDidChange=this._register(new Y),this.onDidChange=this._onDidChange.event,this._referenceDomElement=e,this._width=-1,this._height=-1,this._resizeObserver=null,this.measureReferenceDomElement(!1,t)}dispose(){this.stopObserving(),super.dispose()}getWidth(){return this._width}getHeight(){return this._height}startObserving(){if(!this._resizeObserver&&this._referenceDomElement){let e=null;const t=()=>{e?this.observe({width:e.width,height:e.height}):this.observe()};let i=!1,n=!1;const s=()=>{if(i&&!n)try{i=!1,n=!0,t()}finally{ja(ft(this._referenceDomElement),()=>{n=!1,s()})}};this._resizeObserver=new ResizeObserver(r=>{r&&r[0]&&r[0].contentRect?e={width:r[0].contentRect.width,height:r[0].contentRect.height}:e=null,i=!0,s()}),this._resizeObserver.observe(this._referenceDomElement)}}stopObserving(){this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null)}observe(e){this.measureReferenceDomElement(!0,e)}measureReferenceDomElement(e,t){let i=0,n=0;t?(i=t.width,n=t.height):this._referenceDomElement&&(i=this._referenceDomElement.clientWidth,n=this._referenceDomElement.clientHeight),i=Math.max(5,i),n=Math.max(5,n),(this._width!==i||this._height!==n)&&(this._width=i,this._height=n,e&&this._onDidChange.fire())}}class Gp{constructor(e,t){this.key=e,this.migrate=t}apply(e){const t=Gp._read(e,this.key),i=s=>Gp._read(e,s),n=(s,r)=>Gp._write(e,s,r);this.migrate(t,i,n)}static _read(e,t){if(typeof e>"u")return;const i=t.indexOf(".");if(i>=0){const n=t.substring(0,i);return this._read(e[n],t.substring(i+1))}return e[t]}static _write(e,t,i){const n=t.indexOf(".");if(n>=0){const s=t.substring(0,n);e[s]=e[s]||{},this._write(e[s],t.substring(n+1),i);return}e[t]=i}}Gp.items=[];function su(o,e){Gp.items.push(new Gp(o,e))}function qa(o,e){su(o,(t,i,n)=>{if(typeof t<"u"){for(const[s,r]of e)if(t===s){n(o,r);return}}})}function mLe(o){Gp.items.forEach(e=>e.apply(o))}qa("wordWrap",[[!0,"on"],[!1,"off"]]);qa("lineNumbers",[[!0,"on"],[!1,"off"]]);qa("cursorBlinking",[["visible","solid"]]);qa("renderWhitespace",[[!0,"boundary"],[!1,"none"]]);qa("renderLineHighlight",[[!0,"line"],[!1,"none"]]);qa("acceptSuggestionOnEnter",[[!0,"on"],[!1,"off"]]);qa("tabCompletion",[[!1,"off"],[!0,"onlySnippets"]]);qa("hover",[[!0,{enabled:!0}],[!1,{enabled:!1}]]);qa("parameterHints",[[!0,{enabled:!0}],[!1,{enabled:!1}]]);qa("autoIndent",[[!1,"advanced"],[!0,"full"]]);qa("matchBrackets",[[!0,"always"],[!1,"never"]]);qa("renderFinalNewline",[[!0,"on"],[!1,"off"]]);qa("cursorSmoothCaretAnimation",[[!0,"on"],[!1,"off"]]);qa("occurrencesHighlight",[[!0,"singleFile"],[!1,"off"]]);qa("wordBasedSuggestions",[[!0,"matchingDocuments"],[!1,"off"]]);su("autoClosingBrackets",(o,e,t)=>{o===!1&&(t("autoClosingBrackets","never"),typeof e("autoClosingQuotes")>"u"&&t("autoClosingQuotes","never"),typeof e("autoSurround")>"u"&&t("autoSurround","never"))});su("renderIndentGuides",(o,e,t)=>{typeof o<"u"&&(t("renderIndentGuides",void 0),typeof e("guides.indentation")>"u"&&t("guides.indentation",!!o))});su("highlightActiveIndentGuide",(o,e,t)=>{typeof o<"u"&&(t("highlightActiveIndentGuide",void 0),typeof e("guides.highlightActiveIndentation")>"u"&&t("guides.highlightActiveIndentation",!!o))});const _Le={method:"showMethods",function:"showFunctions",constructor:"showConstructors",deprecated:"showDeprecated",field:"showFields",variable:"showVariables",class:"showClasses",struct:"showStructs",interface:"showInterfaces",module:"showModules",property:"showProperties",event:"showEvents",operator:"showOperators",unit:"showUnits",value:"showValues",constant:"showConstants",enum:"showEnums",enumMember:"showEnumMembers",keyword:"showKeywords",text:"showWords",color:"showColors",file:"showFiles",reference:"showReferences",folder:"showFolders",typeParameter:"showTypeParameters",snippet:"showSnippets"};su("suggest.filteredTypes",(o,e,t)=>{if(o&&typeof o=="object"){for(const i of Object.entries(_Le))o[i[0]]===!1&&typeof e(`suggest.${i[1]}`)>"u"&&t(`suggest.${i[1]}`,!1);t("suggest.filteredTypes",void 0)}});su("quickSuggestions",(o,e,t)=>{if(typeof o=="boolean"){const i=o?"on":"off";t("quickSuggestions",{comments:i,strings:i,other:i})}});su("experimental.stickyScroll.enabled",(o,e,t)=>{typeof o=="boolean"&&(t("experimental.stickyScroll.enabled",void 0),typeof e("stickyScroll.enabled")>"u"&&t("stickyScroll.enabled",o))});su("experimental.stickyScroll.maxLineCount",(o,e,t)=>{typeof o=="number"&&(t("experimental.stickyScroll.maxLineCount",void 0),typeof e("stickyScroll.maxLineCount")>"u"&&t("stickyScroll.maxLineCount",o))});su("codeActionsOnSave",(o,e,t)=>{if(o&&typeof o=="object"){let i=!1;const n={};for(const s of Object.entries(o))typeof s[1]=="boolean"?(i=!0,n[s[0]]=s[1]?"explicit":"never"):n[s[0]]=s[1];i&&t("codeActionsOnSave",n)}});su("codeActionWidget.includeNearbyQuickfixes",(o,e,t)=>{typeof o=="boolean"&&(t("codeActionWidget.includeNearbyQuickfixes",void 0),typeof e("codeActionWidget.includeNearbyQuickFixes")>"u"&&t("codeActionWidget.includeNearbyQuickFixes",o))});su("lightbulb.enabled",(o,e,t)=>{typeof o=="boolean"&&t("lightbulb.enabled",o?void 0:"off")});class vLe{constructor(){this._tabFocus=!1,this._onDidChangeTabFocus=new Y,this.onDidChangeTabFocus=this._onDidChangeTabFocus.event}getTabFocusMode(){return this._tabFocus}setTabFocusMode(e){this._tabFocus=e,this._onDidChangeTabFocus.fire(this._tabFocus)}}const c1=new vLe,mc=Zt("accessibilityService"),UD=new Be("accessibilityModeEnabled",!1);var bLe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},CLe=function(o,e){return function(t,i){e(t,i,o)}};let y9=class extends J{constructor(e,t,i,n){super(),this._accessibilityService=n,this._onDidChange=this._register(new Y),this.onDidChange=this._onDidChange.event,this._onDidChangeFast=this._register(new Y),this.onDidChangeFast=this._onDidChangeFast.event,this._isDominatedByLongLines=!1,this._viewLineCount=1,this._lineNumbersDigitCount=1,this._reservedHeight=0,this._glyphMarginDecorationLaneCount=1,this._computeOptionsMemory=new Gte,this.isSimpleWidget=e,this._containerObserver=this._register(new Ene(i,t.dimension)),this._targetWindowId=ft(i).vscodeWindowId,this._rawOptions=MZ(t),this._validatedOptions=vp.validateOptions(this._rawOptions),this.options=this._computeOptions(),this.options.get(13)&&this._containerObserver.startObserving(),this._register(Xl.onDidChangeZoomLevel(()=>this._recomputeOptions())),this._register(c1.onDidChangeTabFocus(()=>this._recomputeOptions())),this._register(this._containerObserver.onDidChange(()=>this._recomputeOptions())),this._register(s9.onDidChange(()=>this._recomputeOptions())),this._register(nx.getInstance(ft(i)).onDidChange(()=>this._recomputeOptions())),this._register(this._accessibilityService.onDidChangeScreenReaderOptimized(()=>this._recomputeOptions()))}_recomputeOptions(){const e=this._computeOptions(),t=vp.checkEquals(this.options,e);t!==null&&(this.options=e,this._onDidChangeFast.fire(t),this._onDidChange.fire(t))}_computeOptions(){const e=this._readEnvConfiguration(),t=gv.createFromValidatedSettings(this._validatedOptions,e.pixelRatio,this.isSimpleWidget),i=this._readFontInfo(t),n={memory:this._computeOptionsMemory,outerWidth:e.outerWidth,outerHeight:e.outerHeight-this._reservedHeight,fontInfo:i,extraEditorClassName:e.extraEditorClassName,isDominatedByLongLines:this._isDominatedByLongLines,viewLineCount:this._viewLineCount,lineNumbersDigitCount:this._lineNumbersDigitCount,emptySelectionClipboard:e.emptySelectionClipboard,pixelRatio:e.pixelRatio,tabFocusMode:c1.getTabFocusMode(),accessibilitySupport:e.accessibilitySupport,glyphMarginDecorationLaneCount:this._glyphMarginDecorationLaneCount};return vp.computeOptions(this._validatedOptions,n)}_readEnvConfiguration(){return{extraEditorClassName:yLe(),outerWidth:this._containerObserver.getWidth(),outerHeight:this._containerObserver.getHeight(),emptySelectionClipboard:fv||uc,pixelRatio:nx.getInstance(NY(this._targetWindowId,!0).window).value,accessibilitySupport:this._accessibilityService.isScreenReaderOptimized()?2:this._accessibilityService.getAccessibilitySupport()}}_readFontInfo(e){return s9.readFontInfo(NY(this._targetWindowId,!0).window,e)}getRawOptions(){return this._rawOptions}updateOptions(e){const t=MZ(e);vp.applyUpdate(this._rawOptions,t)&&(this._validatedOptions=vp.validateOptions(this._rawOptions),this._recomputeOptions())}observeContainer(e){this._containerObserver.observe(e)}setIsDominatedByLongLines(e){this._isDominatedByLongLines!==e&&(this._isDominatedByLongLines=e,this._recomputeOptions())}setModelLineCount(e){const t=wLe(e);this._lineNumbersDigitCount!==t&&(this._lineNumbersDigitCount=t,this._recomputeOptions())}setViewLineCount(e){this._viewLineCount!==e&&(this._viewLineCount=e,this._recomputeOptions())}setReservedHeight(e){this._reservedHeight!==e&&(this._reservedHeight=e,this._recomputeOptions())}setGlyphMarginDecorationLaneCount(e){this._glyphMarginDecorationLaneCount!==e&&(this._glyphMarginDecorationLaneCount=e,this._recomputeOptions())}};y9=bLe([CLe(3,mc)],y9);function wLe(o){let e=0;for(;o;)o=Math.floor(o/10),e++;return e||1}function yLe(){let o="";return!ig&&!bie&&(o+="no-user-select "),ig&&(o+="no-minimap-shadow ",o+="enable-user-select "),Kt&&(o+="mac "),o}class SLe{constructor(){this._values=[]}_read(e){return this._values[e]}get(e){return this._values[e]}_write(e,t){this._values[e]=t}}class LLe{constructor(){this._values=[]}_read(e){if(e>=this._values.length)throw new Error("Cannot read uninitialized value");return this._values[e]}get(e){return this._read(e)}_write(e,t){this._values[e]=t}}class vp{static validateOptions(e){const t=new SLe;for(const i of Z0){const n=i.name==="_never_"?void 0:e[i.name];t._write(i.id,i.validate(n))}return t}static computeOptions(e,t){const i=new LLe;for(const n of Z0)i._write(n.id,n.compute(t,i,e._read(n.id)));return i}static _deepEquals(e,t){if(typeof e!="object"||typeof t!="object"||!e||!t)return e===t;if(Array.isArray(e)||Array.isArray(t))return Array.isArray(e)&&Array.isArray(t)?zn(e,t):!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const i in e)if(!vp._deepEquals(e[i],t[i]))return!1;return!0}static checkEquals(e,t){const i=[];let n=!1;for(const s of Z0){const r=!vp._deepEquals(e._read(s.id),t._read(s.id));i[s.id]=r,r&&(n=!0)}return n?new qte(i):null}static applyUpdate(e,t){let i=!1;for(const n of Z0)if(t.hasOwnProperty(n.name)){const s=n.applyUpdate(e[n.name],t[n.name]);e[n.name]=s.newValue,i=i||s.didChange}return i}}function MZ(o){const e=gf(o);return mLe(e),e}var Ip;(function(o){const e={total:0,min:Number.MAX_VALUE,max:0},t={...e},i={...e},n={...e};let s=0;const r={keydown:0,input:0,render:0};function a(){S(),performance.mark("inputlatency/start"),performance.mark("keydown/start"),r.keydown=1,queueMicrotask(l)}o.onKeyDown=a;function l(){r.keydown===1&&(performance.mark("keydown/end"),r.keydown=2)}function c(){performance.mark("input/start"),r.input=1,y()}o.onBeforeInput=c;function u(){r.input===0&&c(),queueMicrotask(f)}o.onInput=u;function f(){r.input===1&&(performance.mark("input/end"),r.input=2)}function g(){S()}o.onKeyUp=g;function p(){S()}o.onSelectionChange=p;function _(){r.keydown===2&&r.input===2&&r.render===0&&(performance.mark("render/start"),r.render=1,queueMicrotask(b),y())}o.onRenderStart=_;function b(){r.render===1&&(performance.mark("render/end"),r.render=2)}function y(){setTimeout(S)}function S(){r.keydown===2&&r.input===2&&r.render===2&&(performance.mark("inputlatency/end"),performance.measure("keydown","keydown/start","keydown/end"),performance.measure("input","input/start","input/end"),performance.measure("render","render/start","render/end"),performance.measure("inputlatency","inputlatency/start","inputlatency/end"),L("keydown",e),L("input",t),L("render",i),L("inputlatency",n),s++,x())}function L(M,F){const H=performance.getEntriesByName(M)[0].duration;F.total+=H,F.min=Math.min(F.min,H),F.max=Math.max(F.max,H)}function x(){performance.clearMarks("keydown/start"),performance.clearMarks("keydown/end"),performance.clearMarks("input/start"),performance.clearMarks("input/end"),performance.clearMarks("render/start"),performance.clearMarks("render/end"),performance.clearMarks("inputlatency/start"),performance.clearMarks("inputlatency/end"),performance.clearMeasures("keydown"),performance.clearMeasures("input"),performance.clearMeasures("render"),performance.clearMeasures("inputlatency"),r.keydown=0,r.input=0,r.render=0}function D(){if(s===0)return;const M={keydown:E(e),input:E(t),render:E(i),total:E(n),sampleCount:s};return N(e),N(t),N(i),N(n),s=0,M}o.getAndClearMeasurements=D;function E(M){return{average:M.total/s,max:M.max,min:M.min}}function N(M){M.total=0,M.min=Number.MAX_VALUE,M.max=0}})(Ip||(Ip={}));class Q1{constructor(){this._hooks=new he,this._pointerMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(e,t){if(!this.isMonitoring())return;this._hooks.clear(),this._pointerMoveCallback=null;const i=this._onStopCallback;this._onStopCallback=null,e&&i&&i(t)}isMonitoring(){return!!this._pointerMoveCallback}startMonitoring(e,t,i,n,s){this.isMonitoring()&&this.stopMonitoring(!1),this._pointerMoveCallback=n,this._onStopCallback=s;let r=e;try{e.setPointerCapture(t),this._hooks.add(lt(()=>{try{e.releasePointerCapture(t)}catch{}}))}catch{r=ft(e)}this._hooks.add(oe(r,ke.POINTER_MOVE,a=>{if(a.buttons!==i){this.stopMonitoring(!0);return}a.preventDefault(),this._pointerMoveCallback(a)})),this._hooks.add(oe(r,ke.POINTER_UP,a=>this.stopMonitoring(!0)))}}function mH(o){return`--vscode-${o.replace(/\./g,"-")}`}function je(o){return`var(${mH(o)})`}function xLe(o,e){return`var(${mH(o)}, ${e})`}const Ine={ColorContribution:"base.contributions.colors"};class DLe{constructor(){this._onDidChangeSchema=new Y,this.onDidChangeSchema=this._onDidChangeSchema.event,this.colorSchema={type:"object",properties:{}},this.colorReferenceSchema={type:"string",enum:[],enumDescriptions:[]},this.colorsById={}}registerColor(e,t,i,n=!1,s){const r={id:e,description:i,defaults:t,needsTransparency:n,deprecationMessage:s};this.colorsById[e]=r;const a={type:"string",description:i,format:"color-hex",defaultSnippets:[{body:"${1:#ff0000}"}]};return s&&(a.deprecationMessage=s),n&&(a.pattern="^#(?:(?<rgba>[0-9a-fA-f]{3}[0-9a-eA-E])|(?:[0-9a-fA-F]{6}(?:(?![fF]{2})(?:[0-9a-fA-F]{2}))))?$",a.patternErrorMessage="This color must be transparent or it will obscure content"),this.colorSchema.properties[e]=a,this.colorReferenceSchema.enum.push(e),this.colorReferenceSchema.enumDescriptions.push(i),this._onDidChangeSchema.fire(),e}getColors(){return Object.keys(this.colorsById).map(e=>this.colorsById[e])}resolveDefaultColor(e,t){const i=this.colorsById[e];if(i&&i.defaults){const n=i.defaults[t.type];return md(n,t)}}getColorSchema(){return this.colorSchema}toString(){const e=(t,i)=>{const n=t.indexOf(".")===-1?0:1,s=i.indexOf(".")===-1?0:1;return n!==s?n-s:t.localeCompare(i)};return Object.keys(this.colorsById).sort(e).map(t=>`- \`${t}\`: ${this.colorsById[t].description}`).join(`
`)}}const FA=new DLe;$n.add(Ine.ColorContribution,FA);function V(o,e,t,i,n){return FA.registerColor(o,e,t,i,n)}function kLe(o,e){var t,i,n,s;switch(o.op){case 0:return(t=md(o.value,e))===null||t===void 0?void 0:t.darken(o.factor);case 1:return(i=md(o.value,e))===null||i===void 0?void 0:i.lighten(o.factor);case 2:return(n=md(o.value,e))===null||n===void 0?void 0:n.transparent(o.factor);case 3:{const r=md(o.background,e);return r?(s=md(o.value,e))===null||s===void 0?void 0:s.makeOpaque(r):md(o.value,e)}case 4:for(const r of o.values){const a=md(r,e);if(a)return a}return;case 6:return md(e.defines(o.if)?o.then:o.else,e);case 5:{const r=md(o.value,e);if(!r)return;const a=md(o.background,e);return a?r.isDarkerThan(a)?ne.getLighterColor(r,a,o.factor).transparent(o.transparency):ne.getDarkerColor(r,a,o.factor).transparent(o.transparency):r.transparent(o.factor*o.transparency)}default:throw kA()}}function lb(o,e){return{op:0,value:o,factor:e}}function Wd(o,e){return{op:1,value:o,factor:e}}function at(o,e){return{op:2,value:o,factor:e}}function px(...o){return{op:4,values:o}}function ELe(o,e,t){return{op:6,if:o,then:e,else:t}}function AZ(o,e,t,i){return{op:5,value:o,background:e,factor:t,transparency:i}}function md(o,e){if(o!==null){if(typeof o=="string")return o[0]==="#"?ne.fromHex(o):e.getColor(o);if(o instanceof ne)return o;if(typeof o=="object")return kLe(o,e)}}const Tne="vscode://schemas/workbench-colors",Nne=$n.as(AA.JSONContribution);Nne.registerSchema(Tne,FA.getColorSchema());const PZ=new Ui(()=>Nne.notifySchemaChanged(Tne),200);FA.onDidChangeSchema(()=>{PZ.isScheduled()||PZ.schedule()});const Te=V("foreground",{dark:"#CCCCCC",light:"#616161",hcDark:"#FFFFFF",hcLight:"#292929"},v("foreground","Overall foreground color. This color is only used if not overridden by a component."));V("disabledForeground",{dark:"#CCCCCC80",light:"#61616180",hcDark:"#A5A5A5",hcLight:"#7F7F7F"},v("disabledForeground","Overall foreground for disabled elements. This color is only used if not overridden by a component."));V("errorForeground",{dark:"#F48771",light:"#A1260D",hcDark:"#F48771",hcLight:"#B5200D"},v("errorForeground","Overall foreground color for error messages. This color is only used if not overridden by a component."));V("descriptionForeground",{light:"#717171",dark:at(Te,.7),hcDark:at(Te,.7),hcLight:at(Te,.7)},v("descriptionForeground","Foreground color for description text providing additional information, for example for a label."));const Qu=V("icon.foreground",{dark:"#C5C5C5",light:"#424242",hcDark:"#FFFFFF",hcLight:"#292929"},v("iconForeground","The default color for icons in the workbench.")),sc=V("focusBorder",{dark:"#007FD4",light:"#0090F1",hcDark:"#F38518",hcLight:"#006BBD"},v("focusBorder","Overall border color for focused elements. This color is only used if not overridden by a component.")),Jt=V("contrastBorder",{light:null,dark:null,hcDark:"#6FC3DF",hcLight:"#0F4A85"},v("contrastBorder","An extra border around elements to separate them from others for greater contrast.")),Sn=V("contrastActiveBorder",{light:null,dark:null,hcDark:sc,hcLight:sc},v("activeContrastBorder","An extra border around active elements to separate them from others for greater contrast."));V("selection.background",{light:null,dark:null,hcDark:null,hcLight:null},v("selectionBackground","The background color of text selections in the workbench (e.g. for input fields or text areas). Note that this does not apply to selections within the editor."));const ILe=V("textLink.foreground",{light:"#006AB1",dark:"#3794FF",hcDark:"#21A6FF",hcLight:"#0F4A85"},v("textLinkForeground","Foreground color for links in text."));V("textLink.activeForeground",{light:"#006AB1",dark:"#3794FF",hcDark:"#21A6FF",hcLight:"#0F4A85"},v("textLinkActiveForeground","Foreground color for links in text when clicked on and on mouse hover."));V("textSeparator.foreground",{light:"#0000002e",dark:"#ffffff2e",hcDark:ne.black,hcLight:"#292929"},v("textSeparatorForeground","Color for text separators."));V("textPreformat.foreground",{light:"#A31515",dark:"#D7BA7D",hcDark:"#000000",hcLight:"#FFFFFF"},v("textPreformatForeground","Foreground color for preformatted text segments."));V("textPreformat.background",{light:"#0000001A",dark:"#FFFFFF1A",hcDark:"#FFFFFF",hcLight:"#09345f"},v("textPreformatBackground","Background color for preformatted text segments."));V("textBlockQuote.background",{light:"#f2f2f2",dark:"#222222",hcDark:null,hcLight:"#F2F2F2"},v("textBlockQuoteBackground","Background color for block quotes in text."));V("textBlockQuote.border",{light:"#007acc80",dark:"#007acc80",hcDark:ne.white,hcLight:"#292929"},v("textBlockQuoteBorder","Border color for block quotes in text."));V("textCodeBlock.background",{light:"#dcdcdc66",dark:"#0a0a0a66",hcDark:ne.black,hcLight:"#F2F2F2"},v("textCodeBlockBackground","Background color for code blocks in text."));V("sash.hoverBorder",{dark:sc,light:sc,hcDark:sc,hcLight:sc},v("sashActiveBorder","Border color of active sashes."));const LN=V("badge.background",{dark:"#4D4D4D",light:"#C4C4C4",hcDark:ne.black,hcLight:"#0F4A85"},v("badgeBackground","Badge background color. Badges are small information labels, e.g. for search results count.")),TLe=V("badge.foreground",{dark:ne.white,light:"#333",hcDark:ne.white,hcLight:ne.white},v("badgeForeground","Badge foreground color. Badges are small information labels, e.g. for search results count.")),HS=V("scrollbar.shadow",{dark:"#000000",light:"#DDDDDD",hcDark:null,hcLight:null},v("scrollbarShadow","Scrollbar shadow to indicate that the view is scrolled.")),zS=V("scrollbarSlider.background",{dark:ne.fromHex("#797979").transparent(.4),light:ne.fromHex("#646464").transparent(.4),hcDark:at(Jt,.6),hcLight:at(Jt,.4)},v("scrollbarSliderBackground","Scrollbar slider background color.")),US=V("scrollbarSlider.hoverBackground",{dark:ne.fromHex("#646464").transparent(.7),light:ne.fromHex("#646464").transparent(.7),hcDark:at(Jt,.8),hcLight:at(Jt,.8)},v("scrollbarSliderHoverBackground","Scrollbar slider background color when hovering.")),$S=V("scrollbarSlider.activeBackground",{dark:ne.fromHex("#BFBFBF").transparent(.4),light:ne.fromHex("#000000").transparent(.6),hcDark:Jt,hcLight:Jt},v("scrollbarSliderActiveBackground","Scrollbar slider background color when clicked on.")),NLe=V("progressBar.background",{dark:ne.fromHex("#0E70C0"),light:ne.fromHex("#0E70C0"),hcDark:Jt,hcLight:Jt},v("progressBarBackground","Background color of the progress bar that can show for long running operations.")),Zs=V("editor.background",{light:"#ffffff",dark:"#1E1E1E",hcDark:ne.black,hcLight:ne.white},v("editorBackground","Editor background color.")),oc=V("editor.foreground",{light:"#333333",dark:"#BBBBBB",hcDark:ne.white,hcLight:Te},v("editorForeground","Editor default foreground color."));V("editorStickyScroll.background",{light:Zs,dark:Zs,hcDark:Zs,hcLight:Zs},v("editorStickyScrollBackground","Background color of sticky scroll in the editor"));V("editorStickyScrollHover.background",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:null,hcLight:ne.fromHex("#0F4A85").transparent(.1)},v("editorStickyScrollHoverBackground","Background color of sticky scroll on hover in the editor"));V("editorStickyScroll.border",{dark:null,light:null,hcDark:Jt,hcLight:Jt},v("editorStickyScrollBorder","Border color of sticky scroll in the editor"));V("editorStickyScroll.shadow",{dark:HS,light:HS,hcDark:HS,hcLight:HS},v("editorStickyScrollShadow"," Shadow color of sticky scroll in the editor"));const us=V("editorWidget.background",{dark:"#252526",light:"#F3F3F3",hcDark:"#0C141F",hcLight:ne.white},v("editorWidgetBackground","Background color of editor widgets, such as find/replace.")),Tf=V("editorWidget.foreground",{dark:Te,light:Te,hcDark:Te,hcLight:Te},v("editorWidgetForeground","Foreground color of editor widgets, such as find/replace.")),Nf=V("editorWidget.border",{dark:"#454545",light:"#C8C8C8",hcDark:Jt,hcLight:Jt},v("editorWidgetBorder","Border color of editor widgets. The color is only used if the widget chooses to have a border and if the color is not overridden by a widget."));V("editorWidget.resizeBorder",{light:null,dark:null,hcDark:null,hcLight:null},v("editorWidgetResizeBorder","Border color of the resize bar of editor widgets. The color is only used if the widget chooses to have a resize border and if the color is not overridden by a widget."));V("editorError.background",{dark:null,light:null,hcDark:null,hcLight:null},v("editorError.background","Background color of error text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0);const Xu=V("editorError.foreground",{dark:"#F14C4C",light:"#E51400",hcDark:"#F48771",hcLight:"#B5200D"},v("editorError.foreground","Foreground color of error squigglies in the editor.")),RLe=V("editorError.border",{dark:null,light:null,hcDark:ne.fromHex("#E47777").transparent(.8),hcLight:"#B5200D"},v("errorBorder","If set, color of double underlines for errors in the editor.")),XI=V("editorWarning.background",{dark:null,light:null,hcDark:null,hcLight:null},v("editorWarning.background","Background color of warning text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),fr=V("editorWarning.foreground",{dark:"#CCA700",light:"#BF8803",hcDark:"#FFD370",hcLight:"#895503"},v("editorWarning.foreground","Foreground color of warning squigglies in the editor.")),mx=V("editorWarning.border",{dark:null,light:null,hcDark:ne.fromHex("#FFCC00").transparent(.8),hcLight:ne.fromHex("#FFCC00").transparent(.8)},v("warningBorder","If set, color of double underlines for warnings in the editor."));V("editorInfo.background",{dark:null,light:null,hcDark:null,hcLight:null},v("editorInfo.background","Background color of info text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0);const fa=V("editorInfo.foreground",{dark:"#3794FF",light:"#1a85ff",hcDark:"#3794FF",hcLight:"#1a85ff"},v("editorInfo.foreground","Foreground color of info squigglies in the editor.")),_x=V("editorInfo.border",{dark:null,light:null,hcDark:ne.fromHex("#3794FF").transparent(.8),hcLight:"#292929"},v("infoBorder","If set, color of double underlines for infos in the editor.")),MLe=V("editorHint.foreground",{dark:ne.fromHex("#eeeeee").transparent(.7),light:"#6c6c6c",hcDark:null,hcLight:null},v("editorHint.foreground","Foreground color of hint squigglies in the editor."));V("editorHint.border",{dark:null,light:null,hcDark:ne.fromHex("#eeeeee").transparent(.8),hcLight:"#292929"},v("hintBorder","If set, color of double underlines for hints in the editor."));const ALe=V("editorLink.activeForeground",{dark:"#4E94CE",light:ne.blue,hcDark:ne.cyan,hcLight:"#292929"},v("activeLinkForeground","Color of active links.")),Tp=V("editor.selectionBackground",{light:"#ADD6FF",dark:"#264F78",hcDark:"#f3f518",hcLight:"#0F4A85"},v("editorSelectionBackground","Color of the editor selection.")),PLe=V("editor.selectionForeground",{light:null,dark:null,hcDark:"#000000",hcLight:ne.white},v("editorSelectionForeground","Color of the selected text for high contrast.")),Rne=V("editor.inactiveSelectionBackground",{light:at(Tp,.5),dark:at(Tp,.5),hcDark:at(Tp,.7),hcLight:at(Tp,.5)},v("editorInactiveSelection","Color of the selection in an inactive editor. The color must not be opaque so as not to hide underlying decorations."),!0),_H=V("editor.selectionHighlightBackground",{light:AZ(Tp,Zs,.3,.6),dark:AZ(Tp,Zs,.3,.6),hcDark:null,hcLight:null},v("editorSelectionHighlight","Color for regions with the same content as the selection. The color must not be opaque so as not to hide underlying decorations."),!0);V("editor.selectionHighlightBorder",{light:null,dark:null,hcDark:Sn,hcLight:Sn},v("editorSelectionHighlightBorder","Border color for regions with the same content as the selection."));V("editor.findMatchBackground",{light:"#A8AC94",dark:"#515C6A",hcDark:null,hcLight:null},v("editorFindMatch","Color of the current search match."));const Rf=V("editor.findMatchHighlightBackground",{light:"#EA5C0055",dark:"#EA5C0055",hcDark:null,hcLight:null},v("findMatchHighlight","Color of the other search matches. The color must not be opaque so as not to hide underlying decorations."),!0);V("editor.findRangeHighlightBackground",{dark:"#3a3d4166",light:"#b4b4b44d",hcDark:null,hcLight:null},v("findRangeHighlight","Color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0);V("editor.findMatchBorder",{light:null,dark:null,hcDark:Sn,hcLight:Sn},v("editorFindMatchBorder","Border color of the current search match."));const Np=V("editor.findMatchHighlightBorder",{light:null,dark:null,hcDark:Sn,hcLight:Sn},v("findMatchHighlightBorder","Border color of the other search matches.")),OLe=V("editor.findRangeHighlightBorder",{dark:null,light:null,hcDark:at(Sn,.4),hcLight:at(Sn,.4)},v("findRangeHighlightBorder","Border color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0);V("editor.hoverHighlightBackground",{light:"#ADD6FF26",dark:"#264f7840",hcDark:"#ADD6FF26",hcLight:null},v("hoverHighlight","Highlight below the word for which a hover is shown. The color must not be opaque so as not to hide underlying decorations."),!0);const TR=V("editorHoverWidget.background",{light:us,dark:us,hcDark:us,hcLight:us},v("hoverBackground","Background color of the editor hover."));V("editorHoverWidget.foreground",{light:Tf,dark:Tf,hcDark:Tf,hcLight:Tf},v("hoverForeground","Foreground color of the editor hover."));const Mne=V("editorHoverWidget.border",{light:Nf,dark:Nf,hcDark:Nf,hcLight:Nf},v("hoverBorder","Border color of the editor hover."));V("editorHoverWidget.statusBarBackground",{dark:Wd(TR,.2),light:lb(TR,.05),hcDark:us,hcLight:us},v("statusBarBackground","Background color of the editor hover status bar."));const Mf=V("editorInlayHint.foreground",{dark:"#969696",light:"#969696",hcDark:ne.white,hcLight:ne.black},v("editorInlayHintForeground","Foreground color of inline hints")),Af=V("editorInlayHint.background",{dark:at(LN,.1),light:at(LN,.1),hcDark:at(ne.white,.1),hcLight:at(LN,.1)},v("editorInlayHintBackground","Background color of inline hints")),FLe=V("editorInlayHint.typeForeground",{dark:Mf,light:Mf,hcDark:Mf,hcLight:Mf},v("editorInlayHintForegroundTypes","Foreground color of inline hints for types")),BLe=V("editorInlayHint.typeBackground",{dark:Af,light:Af,hcDark:Af,hcLight:Af},v("editorInlayHintBackgroundTypes","Background color of inline hints for types")),WLe=V("editorInlayHint.parameterForeground",{dark:Mf,light:Mf,hcDark:Mf,hcLight:Mf},v("editorInlayHintForegroundParameter","Foreground color of inline hints for parameters")),VLe=V("editorInlayHint.parameterBackground",{dark:Af,light:Af,hcDark:Af,hcLight:Af},v("editorInlayHintBackgroundParameter","Background color of inline hints for parameters")),JI=V("editorLightBulb.foreground",{dark:"#FFCC00",light:"#DDB100",hcDark:"#FFCC00",hcLight:"#007ACC"},v("editorLightBulbForeground","The color used for the lightbulb actions icon."));V("editorLightBulbAutoFix.foreground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},v("editorLightBulbAutoFixForeground","The color used for the lightbulb auto fix actions icon."));V("editorLightBulbAi.foreground",{dark:JI,light:JI,hcDark:JI,hcLight:JI},v("editorLightBulbAiForeground","The color used for the lightbulb AI icon."));V("editor.snippetTabstopHighlightBackground",{dark:new ne(new ai(124,124,124,.3)),light:new ne(new ai(10,50,100,.2)),hcDark:new ne(new ai(124,124,124,.3)),hcLight:new ne(new ai(10,50,100,.2))},v("snippetTabstopHighlightBackground","Highlight background color of a snippet tabstop."));V("editor.snippetTabstopHighlightBorder",{dark:null,light:null,hcDark:null,hcLight:null},v("snippetTabstopHighlightBorder","Highlight border color of a snippet tabstop."));V("editor.snippetFinalTabstopHighlightBackground",{dark:null,light:null,hcDark:null,hcLight:null},v("snippetFinalTabstopHighlightBackground","Highlight background color of the final tabstop of a snippet."));V("editor.snippetFinalTabstopHighlightBorder",{dark:"#525252",light:new ne(new ai(10,50,100,.5)),hcDark:"#525252",hcLight:"#292929"},v("snippetFinalTabstopHighlightBorder","Highlight border color of the final tabstop of a snippet."));const S9=new ne(new ai(155,185,85,.2)),L9=new ne(new ai(255,0,0,.2)),HLe=V("diffEditor.insertedTextBackground",{dark:"#9ccc2c33",light:"#9ccc2c40",hcDark:null,hcLight:null},v("diffEditorInserted","Background color for text that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),zLe=V("diffEditor.removedTextBackground",{dark:"#ff000033",light:"#ff000033",hcDark:null,hcLight:null},v("diffEditorRemoved","Background color for text that got removed. The color must not be opaque so as not to hide underlying decorations."),!0);V("diffEditor.insertedLineBackground",{dark:S9,light:S9,hcDark:null,hcLight:null},v("diffEditorInsertedLines","Background color for lines that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0);V("diffEditor.removedLineBackground",{dark:L9,light:L9,hcDark:null,hcLight:null},v("diffEditorRemovedLines","Background color for lines that got removed. The color must not be opaque so as not to hide underlying decorations."),!0);V("diffEditorGutter.insertedLineBackground",{dark:null,light:null,hcDark:null,hcLight:null},v("diffEditorInsertedLineGutter","Background color for the margin where lines got inserted."));V("diffEditorGutter.removedLineBackground",{dark:null,light:null,hcDark:null,hcLight:null},v("diffEditorRemovedLineGutter","Background color for the margin where lines got removed."));const ULe=V("diffEditorOverview.insertedForeground",{dark:null,light:null,hcDark:null,hcLight:null},v("diffEditorOverviewInserted","Diff overview ruler foreground for inserted content.")),$Le=V("diffEditorOverview.removedForeground",{dark:null,light:null,hcDark:null,hcLight:null},v("diffEditorOverviewRemoved","Diff overview ruler foreground for removed content."));V("diffEditor.insertedTextBorder",{dark:null,light:null,hcDark:"#33ff2eff",hcLight:"#374E06"},v("diffEditorInsertedOutline","Outline color for the text that got inserted."));V("diffEditor.removedTextBorder",{dark:null,light:null,hcDark:"#FF008F",hcLight:"#AD0707"},v("diffEditorRemovedOutline","Outline color for text that got removed."));V("diffEditor.border",{dark:null,light:null,hcDark:Jt,hcLight:Jt},v("diffEditorBorder","Border color between the two text editors."));V("diffEditor.diagonalFill",{dark:"#cccccc33",light:"#22222233",hcDark:null,hcLight:null},v("diffDiagonalFill","Color of the diff editor's diagonal fill. The diagonal fill is used in side-by-side diff views."));V("diffEditor.unchangedRegionBackground",{dark:"sideBar.background",light:"sideBar.background",hcDark:"sideBar.background",hcLight:"sideBar.background"},v("diffEditor.unchangedRegionBackground","The background color of unchanged blocks in the diff editor."));V("diffEditor.unchangedRegionForeground",{dark:"foreground",light:"foreground",hcDark:"foreground",hcLight:"foreground"},v("diffEditor.unchangedRegionForeground","The foreground color of unchanged blocks in the diff editor."));V("diffEditor.unchangedCodeBackground",{dark:"#74747429",light:"#b8b8b829",hcDark:null,hcLight:null},v("diffEditor.unchangedCodeBackground","The background color of unchanged code in the diff editor."));const Pf=V("widget.shadow",{dark:at(ne.black,.36),light:at(ne.black,.16),hcDark:null,hcLight:null},v("widgetShadow","Shadow color of widgets such as find/replace inside the editor.")),Ane=V("widget.border",{dark:null,light:null,hcDark:Jt,hcLight:Jt},v("widgetBorder","Border color of widgets such as find/replace inside the editor.")),OZ=V("toolbar.hoverBackground",{dark:"#5a5d5e50",light:"#b8b8b850",hcDark:null,hcLight:null},v("toolbarHoverBackground","Toolbar background when hovering over actions using the mouse"));V("toolbar.hoverOutline",{dark:null,light:null,hcDark:Sn,hcLight:Sn},v("toolbarHoverOutline","Toolbar outline when hovering over actions using the mouse"));V("toolbar.activeBackground",{dark:Wd(OZ,.1),light:lb(OZ,.1),hcDark:null,hcLight:null},v("toolbarActiveBackground","Toolbar background when holding the mouse over actions"));const jLe=V("breadcrumb.foreground",{light:at(Te,.8),dark:at(Te,.8),hcDark:at(Te,.8),hcLight:at(Te,.8)},v("breadcrumbsFocusForeground","Color of focused breadcrumb items.")),KLe=V("breadcrumb.background",{light:Zs,dark:Zs,hcDark:Zs,hcLight:Zs},v("breadcrumbsBackground","Background color of breadcrumb items.")),FZ=V("breadcrumb.focusForeground",{light:lb(Te,.2),dark:Wd(Te,.1),hcDark:Wd(Te,.1),hcLight:Wd(Te,.1)},v("breadcrumbsFocusForeground","Color of focused breadcrumb items.")),qLe=V("breadcrumb.activeSelectionForeground",{light:lb(Te,.2),dark:Wd(Te,.1),hcDark:Wd(Te,.1),hcLight:Wd(Te,.1)},v("breadcrumbsSelectedForeground","Color of selected breadcrumb items."));V("breadcrumbPicker.background",{light:us,dark:us,hcDark:us,hcLight:us},v("breadcrumbsSelectedBackground","Background color of breadcrumb item picker."));const Pne=.5,BZ=ne.fromHex("#40C8AE").transparent(Pne),WZ=ne.fromHex("#40A6FF").transparent(Pne),VZ=ne.fromHex("#606060").transparent(.4),Hc=.4,d1=1,iC=V("merge.currentHeaderBackground",{dark:BZ,light:BZ,hcDark:null,hcLight:null},v("mergeCurrentHeaderBackground","Current header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);V("merge.currentContentBackground",{dark:at(iC,Hc),light:at(iC,Hc),hcDark:at(iC,Hc),hcLight:at(iC,Hc)},v("mergeCurrentContentBackground","Current content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const nC=V("merge.incomingHeaderBackground",{dark:WZ,light:WZ,hcDark:null,hcLight:null},v("mergeIncomingHeaderBackground","Incoming header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);V("merge.incomingContentBackground",{dark:at(nC,Hc),light:at(nC,Hc),hcDark:at(nC,Hc),hcLight:at(nC,Hc)},v("mergeIncomingContentBackground","Incoming content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const sC=V("merge.commonHeaderBackground",{dark:VZ,light:VZ,hcDark:null,hcLight:null},v("mergeCommonHeaderBackground","Common ancestor header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);V("merge.commonContentBackground",{dark:at(sC,Hc),light:at(sC,Hc),hcDark:at(sC,Hc),hcLight:at(sC,Hc)},v("mergeCommonContentBackground","Common ancestor content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const u1=V("merge.border",{dark:null,light:null,hcDark:"#C3DF6F",hcLight:"#007ACC"},v("mergeBorder","Border color on headers and the splitter in inline merge-conflicts."));V("editorOverviewRuler.currentContentForeground",{dark:at(iC,d1),light:at(iC,d1),hcDark:u1,hcLight:u1},v("overviewRulerCurrentContentForeground","Current overview ruler foreground for inline merge-conflicts."));V("editorOverviewRuler.incomingContentForeground",{dark:at(nC,d1),light:at(nC,d1),hcDark:u1,hcLight:u1},v("overviewRulerIncomingContentForeground","Incoming overview ruler foreground for inline merge-conflicts."));V("editorOverviewRuler.commonContentForeground",{dark:at(sC,d1),light:at(sC,d1),hcDark:u1,hcLight:u1},v("overviewRulerCommonContentForeground","Common ancestor overview ruler foreground for inline merge-conflicts."));const vH=V("editorOverviewRuler.findMatchForeground",{dark:"#d186167e",light:"#d186167e",hcDark:"#AB5A00",hcLight:""},v("overviewRulerFindMatchForeground","Overview ruler marker color for find matches. The color must not be opaque so as not to hide underlying decorations."),!0),jS=V("editorOverviewRuler.selectionHighlightForeground",{dark:"#A0A0A0CC",light:"#A0A0A0CC",hcDark:"#A0A0A0CC",hcLight:"#A0A0A0CC"},v("overviewRulerSelectionHighlightForeground","Overview ruler marker color for selection highlights. The color must not be opaque so as not to hide underlying decorations."),!0),GLe=V("problemsErrorIcon.foreground",{dark:Xu,light:Xu,hcDark:Xu,hcLight:Xu},v("problemsErrorIconForeground","The color used for the problems error icon.")),YLe=V("problemsWarningIcon.foreground",{dark:fr,light:fr,hcDark:fr,hcLight:fr},v("problemsWarningIconForeground","The color used for the problems warning icon.")),ZLe=V("problemsInfoIcon.foreground",{dark:fa,light:fa,hcDark:fa,hcLight:fa},v("problemsInfoIconForeground","The color used for the problems info icon.")),oC=V("minimap.findMatchHighlight",{light:"#d18616",dark:"#d18616",hcDark:"#AB5A00",hcLight:"#0F4A85"},v("minimapFindMatchHighlight","Minimap marker color for find matches."),!0),BA=V("minimap.selectionOccurrenceHighlight",{light:"#c9c9c9",dark:"#676767",hcDark:"#ffffff",hcLight:"#0F4A85"},v("minimapSelectionOccurrenceHighlight","Minimap marker color for repeating editor selections."),!0),HZ=V("minimap.selectionHighlight",{light:"#ADD6FF",dark:"#264F78",hcDark:"#ffffff",hcLight:"#0F4A85"},v("minimapSelectionHighlight","Minimap marker color for the editor selection."),!0),QLe=V("minimap.infoHighlight",{dark:fa,light:fa,hcDark:_x,hcLight:_x},v("minimapInfo","Minimap marker color for infos.")),XLe=V("minimap.warningHighlight",{dark:fr,light:fr,hcDark:mx,hcLight:mx},v("overviewRuleWarning","Minimap marker color for warnings.")),JLe=V("minimap.errorHighlight",{dark:new ne(new ai(255,18,18,.7)),light:new ne(new ai(255,18,18,.7)),hcDark:new ne(new ai(255,50,50,1)),hcLight:"#B5200D"},v("minimapError","Minimap marker color for errors.")),exe=V("minimap.background",{dark:null,light:null,hcDark:null,hcLight:null},v("minimapBackground","Minimap background color.")),txe=V("minimap.foregroundOpacity",{dark:ne.fromHex("#000f"),light:ne.fromHex("#000f"),hcDark:ne.fromHex("#000f"),hcLight:ne.fromHex("#000f")},v("minimapForegroundOpacity",'Opacity of foreground elements rendered in the minimap. For example, "#000000c0" will render the elements with 75% opacity.'));V("minimapSlider.background",{light:at(zS,.5),dark:at(zS,.5),hcDark:at(zS,.5),hcLight:at(zS,.5)},v("minimapSliderBackground","Minimap slider background color."));V("minimapSlider.hoverBackground",{light:at(US,.5),dark:at(US,.5),hcDark:at(US,.5),hcLight:at(US,.5)},v("minimapSliderHoverBackground","Minimap slider background color when hovering."));V("minimapSlider.activeBackground",{light:at($S,.5),dark:at($S,.5),hcDark:at($S,.5),hcLight:at($S,.5)},v("minimapSliderActiveBackground","Minimap slider background color when clicked on."));V("charts.foreground",{dark:Te,light:Te,hcDark:Te,hcLight:Te},v("chartsForeground","The foreground color used in charts."));V("charts.lines",{dark:at(Te,.5),light:at(Te,.5),hcDark:at(Te,.5),hcLight:at(Te,.5)},v("chartsLines","The color used for horizontal lines in charts."));V("charts.red",{dark:Xu,light:Xu,hcDark:Xu,hcLight:Xu},v("chartsRed","The red color used in chart visualizations."));V("charts.blue",{dark:fa,light:fa,hcDark:fa,hcLight:fa},v("chartsBlue","The blue color used in chart visualizations."));V("charts.yellow",{dark:fr,light:fr,hcDark:fr,hcLight:fr},v("chartsYellow","The yellow color used in chart visualizations."));V("charts.orange",{dark:oC,light:oC,hcDark:oC,hcLight:oC},v("chartsOrange","The orange color used in chart visualizations."));V("charts.green",{dark:"#89D185",light:"#388A34",hcDark:"#89D185",hcLight:"#374e06"},v("chartsGreen","The green color used in chart visualizations."));V("charts.purple",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},v("chartsPurple","The purple color used in chart visualizations."));const One=V("input.background",{dark:"#3C3C3C",light:ne.white,hcDark:ne.black,hcLight:ne.white},v("inputBoxBackground","Input box background.")),Fne=V("input.foreground",{dark:Te,light:Te,hcDark:Te,hcLight:Te},v("inputBoxForeground","Input box foreground.")),Bne=V("input.border",{dark:null,light:null,hcDark:Jt,hcLight:Jt},v("inputBoxBorder","Input box border.")),bH=V("inputOption.activeBorder",{dark:"#007ACC",light:"#007ACC",hcDark:Jt,hcLight:Jt},v("inputBoxActiveOptionBorder","Border color of activated options in input fields."));V("inputOption.hoverBackground",{dark:"#5a5d5e80",light:"#b8b8b850",hcDark:null,hcLight:null},v("inputOption.hoverBackground","Background color of activated options in input fields."));const nv=V("inputOption.activeBackground",{dark:at(sc,.4),light:at(sc,.2),hcDark:ne.transparent,hcLight:ne.transparent},v("inputOption.activeBackground","Background hover color of options in input fields.")),CH=V("inputOption.activeForeground",{dark:ne.white,light:ne.black,hcDark:Te,hcLight:Te},v("inputOption.activeForeground","Foreground color of activated options in input fields."));V("input.placeholderForeground",{light:at(Te,.5),dark:at(Te,.5),hcDark:at(Te,.7),hcLight:at(Te,.7)},v("inputPlaceholderForeground","Input box foreground color for placeholder text."));const ixe=V("inputValidation.infoBackground",{dark:"#063B49",light:"#D6ECF2",hcDark:ne.black,hcLight:ne.white},v("inputValidationInfoBackground","Input validation background color for information severity.")),nxe=V("inputValidation.infoForeground",{dark:null,light:null,hcDark:null,hcLight:Te},v("inputValidationInfoForeground","Input validation foreground color for information severity.")),sxe=V("inputValidation.infoBorder",{dark:"#007acc",light:"#007acc",hcDark:Jt,hcLight:Jt},v("inputValidationInfoBorder","Input validation border color for information severity.")),oxe=V("inputValidation.warningBackground",{dark:"#352A05",light:"#F6F5D2",hcDark:ne.black,hcLight:ne.white},v("inputValidationWarningBackground","Input validation background color for warning severity.")),rxe=V("inputValidation.warningForeground",{dark:null,light:null,hcDark:null,hcLight:Te},v("inputValidationWarningForeground","Input validation foreground color for warning severity.")),axe=V("inputValidation.warningBorder",{dark:"#B89500",light:"#B89500",hcDark:Jt,hcLight:Jt},v("inputValidationWarningBorder","Input validation border color for warning severity.")),lxe=V("inputValidation.errorBackground",{dark:"#5A1D1D",light:"#F2DEDE",hcDark:ne.black,hcLight:ne.white},v("inputValidationErrorBackground","Input validation background color for error severity.")),cxe=V("inputValidation.errorForeground",{dark:null,light:null,hcDark:null,hcLight:Te},v("inputValidationErrorForeground","Input validation foreground color for error severity.")),dxe=V("inputValidation.errorBorder",{dark:"#BE1100",light:"#BE1100",hcDark:Jt,hcLight:Jt},v("inputValidationErrorBorder","Input validation border color for error severity.")),Ju=V("dropdown.background",{dark:"#3C3C3C",light:ne.white,hcDark:ne.black,hcLight:ne.white},v("dropdownBackground","Dropdown background.")),uxe=V("dropdown.listBackground",{dark:null,light:null,hcDark:ne.black,hcLight:ne.white},v("dropdownListBackground","Dropdown list background.")),Of=V("dropdown.foreground",{dark:"#F0F0F0",light:Te,hcDark:ne.white,hcLight:Te},v("dropdownForeground","Dropdown foreground.")),rC=V("dropdown.border",{dark:Ju,light:"#CECECE",hcDark:Jt,hcLight:Jt},v("dropdownBorder","Dropdown border.")),KS=V("button.foreground",{dark:ne.white,light:ne.white,hcDark:ne.white,hcLight:ne.white},v("buttonForeground","Button foreground color.")),hxe=V("button.separator",{dark:at(KS,.4),light:at(KS,.4),hcDark:at(KS,.4),hcLight:at(KS,.4)},v("buttonSeparator","Button separator color.")),qS=V("button.background",{dark:"#0E639C",light:"#007ACC",hcDark:null,hcLight:"#0F4A85"},v("buttonBackground","Button background color.")),fxe=V("button.hoverBackground",{dark:Wd(qS,.2),light:lb(qS,.2),hcDark:qS,hcLight:qS},v("buttonHoverBackground","Button background color when hovering.")),gxe=V("button.border",{dark:Jt,light:Jt,hcDark:Jt,hcLight:Jt},v("buttonBorder","Button border color.")),pxe=V("button.secondaryForeground",{dark:ne.white,light:ne.white,hcDark:ne.white,hcLight:Te},v("buttonSecondaryForeground","Secondary button foreground color.")),x9=V("button.secondaryBackground",{dark:"#3A3D41",light:"#5F6A79",hcDark:null,hcLight:ne.white},v("buttonSecondaryBackground","Secondary button background color.")),mxe=V("button.secondaryHoverBackground",{dark:Wd(x9,.2),light:lb(x9,.2),hcDark:null,hcLight:null},v("buttonSecondaryHoverBackground","Secondary button background color when hovering.")),_xe=V("checkbox.background",{dark:Ju,light:Ju,hcDark:Ju,hcLight:Ju},v("checkbox.background","Background color of checkbox widget."));V("checkbox.selectBackground",{dark:us,light:us,hcDark:us,hcLight:us},v("checkbox.select.background","Background color of checkbox widget when the element it's in is selected."));const vxe=V("checkbox.foreground",{dark:Of,light:Of,hcDark:Of,hcLight:Of},v("checkbox.foreground","Foreground color of checkbox widget.")),bxe=V("checkbox.border",{dark:rC,light:rC,hcDark:rC,hcLight:rC},v("checkbox.border","Border color of checkbox widget."));V("checkbox.selectBorder",{dark:Qu,light:Qu,hcDark:Qu,hcLight:Qu},v("checkbox.select.border","Border color of checkbox widget when the element it's in is selected."));const Cxe=V("keybindingLabel.background",{dark:new ne(new ai(128,128,128,.17)),light:new ne(new ai(221,221,221,.4)),hcDark:ne.transparent,hcLight:ne.transparent},v("keybindingLabelBackground","Keybinding label background color. The keybinding label is used to represent a keyboard shortcut.")),wxe=V("keybindingLabel.foreground",{dark:ne.fromHex("#CCCCCC"),light:ne.fromHex("#555555"),hcDark:ne.white,hcLight:Te},v("keybindingLabelForeground","Keybinding label foreground color. The keybinding label is used to represent a keyboard shortcut.")),yxe=V("keybindingLabel.border",{dark:new ne(new ai(51,51,51,.6)),light:new ne(new ai(204,204,204,.4)),hcDark:new ne(new ai(111,195,223)),hcLight:Jt},v("keybindingLabelBorder","Keybinding label border color. The keybinding label is used to represent a keyboard shortcut.")),Sxe=V("keybindingLabel.bottomBorder",{dark:new ne(new ai(68,68,68,.6)),light:new ne(new ai(187,187,187,.4)),hcDark:new ne(new ai(111,195,223)),hcLight:Te},v("keybindingLabelBottomBorder","Keybinding label border bottom color. The keybinding label is used to represent a keyboard shortcut.")),Lxe=V("list.focusBackground",{dark:null,light:null,hcDark:null,hcLight:null},v("listFocusBackground","List/Tree background color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),xxe=V("list.focusForeground",{dark:null,light:null,hcDark:null,hcLight:null},v("listFocusForeground","List/Tree foreground color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Dxe=V("list.focusOutline",{dark:sc,light:sc,hcDark:Sn,hcLight:Sn},v("listFocusOutline","List/Tree outline color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),kxe=V("list.focusAndSelectionOutline",{dark:null,light:null,hcDark:null,hcLight:null},v("listFocusAndSelectionOutline","List/Tree outline color for the focused item when the list/tree is active and selected. An active list/tree has keyboard focus, an inactive does not.")),Ff=V("list.activeSelectionBackground",{dark:"#04395E",light:"#0060C0",hcDark:null,hcLight:ne.fromHex("#0F4A85").transparent(.1)},v("listActiveSelectionBackground","List/Tree background color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),eh=V("list.activeSelectionForeground",{dark:ne.white,light:ne.white,hcDark:null,hcLight:null},v("listActiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),GS=V("list.activeSelectionIconForeground",{dark:null,light:null,hcDark:null,hcLight:null},v("listActiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Exe=V("list.inactiveSelectionBackground",{dark:"#37373D",light:"#E4E6F1",hcDark:null,hcLight:ne.fromHex("#0F4A85").transparent(.1)},v("listInactiveSelectionBackground","List/Tree background color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),Ixe=V("list.inactiveSelectionForeground",{dark:null,light:null,hcDark:null,hcLight:null},v("listInactiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),Txe=V("list.inactiveSelectionIconForeground",{dark:null,light:null,hcDark:null,hcLight:null},v("listInactiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),Nxe=V("list.inactiveFocusBackground",{dark:null,light:null,hcDark:null,hcLight:null},v("listInactiveFocusBackground","List/Tree background color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),Rxe=V("list.inactiveFocusOutline",{dark:null,light:null,hcDark:null,hcLight:null},v("listInactiveFocusOutline","List/Tree outline color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),Wne=V("list.hoverBackground",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:ne.white.transparent(.1),hcLight:ne.fromHex("#0F4A85").transparent(.1)},v("listHoverBackground","List/Tree background when hovering over items using the mouse.")),Vne=V("list.hoverForeground",{dark:null,light:null,hcDark:null,hcLight:null},v("listHoverForeground","List/Tree foreground when hovering over items using the mouse.")),Mxe=V("list.dropBackground",{dark:"#062F4A",light:"#D6EBFF",hcDark:null,hcLight:null},v("listDropBackground","List/Tree drag and drop background when moving items over other items when using the mouse.")),Axe=V("list.dropBetweenBackground",{dark:Qu,light:Qu,hcDark:null,hcLight:null},v("listDropBetweenBackground","List/Tree drag and drop border color when moving items between items when using the mouse.")),zc=V("list.highlightForeground",{dark:"#2AAAFF",light:"#0066BF",hcDark:sc,hcLight:sc},v("highlight","List/Tree foreground color of the match highlights when searching inside the list/tree.")),eT=V("list.focusHighlightForeground",{dark:zc,light:ELe(Ff,zc,"#BBE7FF"),hcDark:zc,hcLight:zc},v("listFocusHighlightForeground","List/Tree foreground color of the match highlights on actively focused items when searching inside the list/tree."));V("list.invalidItemForeground",{dark:"#B89500",light:"#B89500",hcDark:"#B89500",hcLight:"#B5200D"},v("invalidItemForeground","List/Tree foreground color for invalid items, for example an unresolved root in explorer."));V("list.errorForeground",{dark:"#F88070",light:"#B01011",hcDark:null,hcLight:null},v("listErrorForeground","Foreground color of list items containing errors."));V("list.warningForeground",{dark:"#CCA700",light:"#855F00",hcDark:null,hcLight:null},v("listWarningForeground","Foreground color of list items containing warnings."));const Pxe=V("listFilterWidget.background",{light:lb(us,0),dark:Wd(us,0),hcDark:us,hcLight:us},v("listFilterWidgetBackground","Background color of the type filter widget in lists and trees.")),Oxe=V("listFilterWidget.outline",{dark:ne.transparent,light:ne.transparent,hcDark:"#f38518",hcLight:"#007ACC"},v("listFilterWidgetOutline","Outline color of the type filter widget in lists and trees.")),Fxe=V("listFilterWidget.noMatchesOutline",{dark:"#BE1100",light:"#BE1100",hcDark:Jt,hcLight:Jt},v("listFilterWidgetNoMatchesOutline","Outline color of the type filter widget in lists and trees, when there are no matches.")),Bxe=V("listFilterWidget.shadow",{dark:Pf,light:Pf,hcDark:Pf,hcLight:Pf},v("listFilterWidgetShadow","Shadow color of the type filter widget in lists and trees."));V("list.filterMatchBackground",{dark:Rf,light:Rf,hcDark:null,hcLight:null},v("listFilterMatchHighlight","Background color of the filtered match."));V("list.filterMatchBorder",{dark:Np,light:Np,hcDark:Jt,hcLight:Sn},v("listFilterMatchHighlightBorder","Border color of the filtered match."));V("list.deemphasizedForeground",{dark:"#8C8C8C",light:"#8E8E90",hcDark:"#A7A8A9",hcLight:"#666666"},v("listDeemphasizedForeground","List/Tree foreground color for items that are deemphasized."));const YS=V("tree.indentGuidesStroke",{dark:"#585858",light:"#a9a9a9",hcDark:"#a9a9a9",hcLight:"#a5a5a5"},v("treeIndentGuidesStroke","Tree stroke color for the indentation guides.")),Wxe=V("tree.inactiveIndentGuidesStroke",{dark:at(YS,.4),light:at(YS,.4),hcDark:at(YS,.4),hcLight:at(YS,.4)},v("treeInactiveIndentGuidesStroke","Tree stroke color for the indentation guides that are not active.")),Vxe=V("tree.tableColumnsBorder",{dark:"#CCCCCC20",light:"#61616120",hcDark:null,hcLight:null},v("tableColumnsBorder","Table border color between columns.")),Hxe=V("tree.tableOddRowsBackground",{dark:at(Te,.04),light:at(Te,.04),hcDark:null,hcLight:null},v("tableOddRowsBackgroundColor","Background color for odd table rows.")),zxe=V("menu.border",{dark:null,light:null,hcDark:Jt,hcLight:Jt},v("menuBorder","Border color of menus.")),Uxe=V("menu.foreground",{dark:Of,light:Of,hcDark:Of,hcLight:Of},v("menuForeground","Foreground color of menu items.")),$xe=V("menu.background",{dark:Ju,light:Ju,hcDark:Ju,hcLight:Ju},v("menuBackground","Background color of menu items.")),jxe=V("menu.selectionForeground",{dark:eh,light:eh,hcDark:eh,hcLight:eh},v("menuSelectionForeground","Foreground color of the selected menu item in menus.")),Kxe=V("menu.selectionBackground",{dark:Ff,light:Ff,hcDark:Ff,hcLight:Ff},v("menuSelectionBackground","Background color of the selected menu item in menus.")),qxe=V("menu.selectionBorder",{dark:null,light:null,hcDark:Sn,hcLight:Sn},v("menuSelectionBorder","Border color of the selected menu item in menus.")),Gxe=V("menu.separatorBackground",{dark:"#606060",light:"#D4D4D4",hcDark:Jt,hcLight:Jt},v("menuSeparatorBackground","Color of a separator menu item in menus.")),zZ=V("quickInput.background",{dark:us,light:us,hcDark:us,hcLight:us},v("pickerBackground","Quick picker background color. The quick picker widget is the container for pickers like the command palette.")),Yxe=V("quickInput.foreground",{dark:Tf,light:Tf,hcDark:Tf,hcLight:Tf},v("pickerForeground","Quick picker foreground color. The quick picker widget is the container for pickers like the command palette.")),Zxe=V("quickInputTitle.background",{dark:new ne(new ai(255,255,255,.105)),light:new ne(new ai(0,0,0,.06)),hcDark:"#000000",hcLight:ne.white},v("pickerTitleBackground","Quick picker title background color. The quick picker widget is the container for pickers like the command palette.")),Hne=V("pickerGroup.foreground",{dark:"#3794FF",light:"#0066BF",hcDark:ne.white,hcLight:"#0F4A85"},v("pickerGroupForeground","Quick picker color for grouping labels.")),Qxe=V("pickerGroup.border",{dark:"#3F3F46",light:"#CCCEDB",hcDark:ne.white,hcLight:"#0F4A85"},v("pickerGroupBorder","Quick picker color for grouping borders.")),UZ=V("quickInput.list.focusBackground",{dark:null,light:null,hcDark:null,hcLight:null},"",void 0,v("quickInput.list.focusBackground deprecation","Please use quickInputList.focusBackground instead")),Rp=V("quickInputList.focusForeground",{dark:eh,light:eh,hcDark:eh,hcLight:eh},v("quickInput.listFocusForeground","Quick picker foreground color for the focused item.")),aC=V("quickInputList.focusIconForeground",{dark:GS,light:GS,hcDark:GS,hcLight:GS},v("quickInput.listFocusIconForeground","Quick picker icon foreground color for the focused item.")),Mp=V("quickInputList.focusBackground",{dark:px(UZ,Ff),light:px(UZ,Ff),hcDark:null,hcLight:null},v("quickInput.listFocusBackground","Quick picker background color for the focused item."));V("search.resultsInfoForeground",{light:Te,dark:at(Te,.65),hcDark:Te,hcLight:Te},v("search.resultsInfoForeground","Color of the text in the search viewlet's completion message."));V("searchEditor.findMatchBackground",{light:at(Rf,.66),dark:at(Rf,.66),hcDark:Rf,hcLight:Rf},v("searchEditor.queryMatch","Color of the Search Editor query matches."));V("searchEditor.findMatchBorder",{light:at(Np,.66),dark:at(Np,.66),hcDark:Np,hcLight:Np},v("searchEditor.editorFindMatchBorder","Border color of the Search Editor query matches."));class WA{constructor(e,t){this.x=e,this.y=t,this._pageCoordinatesBrand=void 0}toClientCoordinates(e){return new zne(this.x-e.scrollX,this.y-e.scrollY)}}class zne{constructor(e,t){this.clientX=e,this.clientY=t,this._clientCoordinatesBrand=void 0}toPageCoordinates(e){return new WA(this.clientX+e.scrollX,this.clientY+e.scrollY)}}class Xxe{constructor(e,t,i,n){this.x=e,this.y=t,this.width=i,this.height=n,this._editorPagePositionBrand=void 0}}class Jxe{constructor(e,t){this.x=e,this.y=t,this._positionRelativeToEditorBrand=void 0}}function wH(o){const e=ws(o);return new Xxe(e.left,e.top,e.width,e.height)}function yH(o,e,t){const i=e.width/o.offsetWidth,n=e.height/o.offsetHeight,s=(t.x-e.x)/i,r=(t.y-e.y)/n;return new Jxe(s,r)}class gm extends Wc{constructor(e,t,i){super(ft(i),e),this._editorMouseEventBrand=void 0,this.isFromPointerCapture=t,this.pos=new WA(this.posx,this.posy),this.editorPos=wH(i),this.relativePos=yH(i,this.editorPos,this.pos)}}class eDe{constructor(e){this._editorViewDomNode=e}_create(e){return new gm(e,!1,this._editorViewDomNode)}onContextMenu(e,t){return oe(e,"contextmenu",i=>{t(this._create(i))})}onMouseUp(e,t){return oe(e,"mouseup",i=>{t(this._create(i))})}onMouseDown(e,t){return oe(e,ke.MOUSE_DOWN,i=>{t(this._create(i))})}onPointerDown(e,t){return oe(e,ke.POINTER_DOWN,i=>{t(this._create(i),i.pointerId)})}onMouseLeave(e,t){return oe(e,ke.MOUSE_LEAVE,i=>{t(this._create(i))})}onMouseMove(e,t){return oe(e,"mousemove",i=>t(this._create(i)))}}class tDe{constructor(e){this._editorViewDomNode=e}_create(e){return new gm(e,!1,this._editorViewDomNode)}onPointerUp(e,t){return oe(e,"pointerup",i=>{t(this._create(i))})}onPointerDown(e,t){return oe(e,ke.POINTER_DOWN,i=>{t(this._create(i),i.pointerId)})}onPointerLeave(e,t){return oe(e,ke.POINTER_LEAVE,i=>{t(this._create(i))})}onPointerMove(e,t){return oe(e,"pointermove",i=>t(this._create(i)))}}class iDe extends J{constructor(e){super(),this._editorViewDomNode=e,this._globalPointerMoveMonitor=this._register(new Q1),this._keydownListener=null}startMonitoring(e,t,i,n,s){this._keydownListener=ss(e.ownerDocument,"keydown",r=>{r.toKeyCodeChord().isModifierKey()||this._globalPointerMoveMonitor.stopMonitoring(!0,r.browserEvent)},!0),this._globalPointerMoveMonitor.startMonitoring(e,t,i,r=>{n(new gm(r,!0,this._editorViewDomNode))},r=>{this._keydownListener.dispose(),s(r)})}stopMonitoring(){this._globalPointerMoveMonitor.stopMonitoring(!0)}}class $D{constructor(e){this._editor=e,this._instanceId=++$D._idPool,this._counter=0,this._rules=new Map,this._garbageCollectionScheduler=new Ui(()=>this.garbageCollect(),1e3)}createClassNameRef(e){const t=this.getOrCreateRule(e);return t.increaseRefCount(),{className:t.className,dispose:()=>{t.decreaseRefCount(),this._garbageCollectionScheduler.schedule()}}}getOrCreateRule(e){const t=this.computeUniqueKey(e);let i=this._rules.get(t);if(!i){const n=this._counter++;i=new nDe(t,`dyn-rule-${this._instanceId}-${n}`,vR(this._editor.getContainerDomNode())?this._editor.getContainerDomNode():void 0,e),this._rules.set(t,i)}return i}computeUniqueKey(e){return JSON.stringify(e)}garbageCollect(){for(const e of this._rules.values())e.hasReferences()||(this._rules.delete(e.key),e.dispose())}}$D._idPool=0;class nDe{constructor(e,t,i,n){this.key=e,this.className=t,this.properties=n,this._referenceCount=0,this._styleElementDisposables=new he,this._styleElement=xl(i,void 0,this._styleElementDisposables),this._styleElement.textContent=this.getCssText(this.className,this.properties)}getCssText(e,t){let i=`.${e} {`;for(const n in t){const s=t[n];let r;typeof s=="object"?r=je(s.id):r=s;const a=sDe(n);i+=`
	${a}: ${r};`}return i+=`
}`,i}dispose(){this._styleElementDisposables.dispose(),this._styleElement=void 0}increaseRefCount(){this._referenceCount++}decreaseRefCount(){this._referenceCount--}hasReferences(){return this._referenceCount>0}}function sDe(o){return o.replace(/(^[A-Z])/,([e])=>e.toLowerCase()).replace(/([A-Z])/g,([e])=>`-${e.toLowerCase()}`)}class jD extends J{constructor(){super(),this._shouldRender=!0}shouldRender(){return this._shouldRender}forceShouldRender(){this._shouldRender=!0}setShouldRender(){this._shouldRender=!0}onDidRender(){this._shouldRender=!1}onCompositionStart(e){return!1}onCompositionEnd(e){return!1}onConfigurationChanged(e){return!1}onCursorStateChanged(e){return!1}onDecorationsChanged(e){return!1}onFlushed(e){return!1}onFocusChanged(e){return!1}onLanguageConfigurationChanged(e){return!1}onLineMappingChanged(e){return!1}onLinesChanged(e){return!1}onLinesDeleted(e){return!1}onLinesInserted(e){return!1}onRevealRangeRequest(e){return!1}onScrollChanged(e){return!1}onThemeChanged(e){return!1}onTokensChanged(e){return!1}onTokensColorsChanged(e){return!1}onZonesChanged(e){return!1}handleEvents(e){let t=!1;for(let i=0,n=e.length;i<n;i++){const s=e[i];switch(s.type){case 0:this.onCompositionStart(s)&&(t=!0);break;case 1:this.onCompositionEnd(s)&&(t=!0);break;case 2:this.onConfigurationChanged(s)&&(t=!0);break;case 3:this.onCursorStateChanged(s)&&(t=!0);break;case 4:this.onDecorationsChanged(s)&&(t=!0);break;case 5:this.onFlushed(s)&&(t=!0);break;case 6:this.onFocusChanged(s)&&(t=!0);break;case 7:this.onLanguageConfigurationChanged(s)&&(t=!0);break;case 8:this.onLineMappingChanged(s)&&(t=!0);break;case 9:this.onLinesChanged(s)&&(t=!0);break;case 10:this.onLinesDeleted(s)&&(t=!0);break;case 11:this.onLinesInserted(s)&&(t=!0);break;case 12:this.onRevealRangeRequest(s)&&(t=!0);break;case 13:this.onScrollChanged(s)&&(t=!0);break;case 15:this.onTokensChanged(s)&&(t=!0);break;case 14:this.onThemeChanged(s)&&(t=!0);break;case 16:this.onTokensColorsChanged(s)&&(t=!0);break;case 17:this.onZonesChanged(s)&&(t=!0);break;default:console.info("View received unknown event: "),console.info(s)}}t&&(this._shouldRender=!0)}}class Ga extends jD{constructor(e){super(),this._context=e,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}}class qd{static write(e,t){e.setAttribute("data-mprt",String(t))}static read(e){const t=e.getAttribute("data-mprt");return t===null?0:parseInt(t,10)}static collect(e,t){const i=[];let n=0;for(;e&&e!==e.ownerDocument.body&&e!==t;)e.nodeType===e.ELEMENT_NODE&&(i[n++]=this.read(e)),e=e.parentElement;const s=new Uint8Array(n);for(let r=0;r<n;r++)s[r]=i[n-r-1];return s}}class oDe{constructor(e,t){this._restrictedRenderingContextBrand=void 0,this._viewLayout=e,this.viewportData=t,this.scrollWidth=this._viewLayout.getScrollWidth(),this.scrollHeight=this._viewLayout.getScrollHeight(),this.visibleRange=this.viewportData.visibleRange,this.bigNumbersDelta=this.viewportData.bigNumbersDelta;const i=this._viewLayout.getCurrentViewport();this.scrollTop=i.top,this.scrollLeft=i.left,this.viewportWidth=i.width,this.viewportHeight=i.height}getScrolledTopFromAbsoluteTop(e){return e-this.scrollTop}getVerticalOffsetForLineNumber(e,t){return this._viewLayout.getVerticalOffsetForLineNumber(e,t)}getVerticalOffsetAfterLineNumber(e,t){return this._viewLayout.getVerticalOffsetAfterLineNumber(e,t)}getDecorationsInViewport(){return this.viewportData.getDecorationsInViewport()}}class rDe extends oDe{constructor(e,t,i){super(e,t),this._renderingContextBrand=void 0,this._viewLines=i}linesVisibleRangesForRange(e,t){return this._viewLines.linesVisibleRangesForRange(e,t)}visibleRangeForPosition(e){return this._viewLines.visibleRangeForPosition(e)}}class aDe{constructor(e,t,i,n){this.outsideRenderedLine=e,this.lineNumber=t,this.ranges=i,this.continuesOnNextLine=n}}class VA{static from(e){const t=new Array(e.length);for(let i=0,n=e.length;i<n;i++){const s=e[i];t[i]=new VA(s.left,s.width)}return t}constructor(e,t){this._horizontalRangeBrand=void 0,this.left=Math.round(e),this.width=Math.round(t)}toString(){return`[${this.left},${this.width}]`}}class pv{constructor(e,t){this._floatHorizontalRangeBrand=void 0,this.left=e,this.width=t}toString(){return`[${this.left},${this.width}]`}static compare(e,t){return e.left-t.left}}class lDe{constructor(e,t){this.outsideRenderedLine=e,this.originalLeft=t,this.left=Math.round(this.originalLeft)}}class $Z{constructor(e,t){this.outsideRenderedLine=e,this.ranges=t}}class xN{static _createRange(){return this._handyReadyRange||(this._handyReadyRange=document.createRange()),this._handyReadyRange}static _detachRange(e,t){e.selectNodeContents(t)}static _readClientRects(e,t,i,n,s){const r=this._createRange();try{return r.setStart(e,t),r.setEnd(i,n),r.getClientRects()}catch{return null}finally{this._detachRange(r,s)}}static _mergeAdjacentRanges(e){if(e.length===1)return e;e.sort(pv.compare);const t=[];let i=0,n=e[0];for(let s=1,r=e.length;s<r;s++){const a=e[s];n.left+n.width+.9>=a.left?n.width=Math.max(n.width,a.left+a.width-n.left):(t[i++]=n,n=a)}return t[i++]=n,t}static _createHorizontalRangesFromClientRects(e,t,i){if(!e||e.length===0)return null;const n=[];for(let s=0,r=e.length;s<r;s++){const a=e[s];n[s]=new pv(Math.max(0,(a.left-t)/i),a.width/i)}return this._mergeAdjacentRanges(n)}static readHorizontalRanges(e,t,i,n,s,r){const l=e.children.length-1;if(0>l)return null;if(t=Math.min(l,Math.max(0,t)),n=Math.min(l,Math.max(0,n)),t===n&&i===s&&i===0&&!e.children[t].firstChild){const g=e.children[t].getClientRects();return r.markDidDomLayout(),this._createHorizontalRangesFromClientRects(g,r.clientRectDeltaLeft,r.clientRectScale)}t!==n&&n>0&&s===0&&(n--,s=1073741824);let c=e.children[t].firstChild,u=e.children[n].firstChild;if((!c||!u)&&(!c&&i===0&&t>0&&(c=e.children[t-1].firstChild,i=1073741824),!u&&s===0&&n>0&&(u=e.children[n-1].firstChild,s=1073741824)),!c||!u)return null;i=Math.min(c.textContent.length,Math.max(0,i)),s=Math.min(u.textContent.length,Math.max(0,s));const f=this._readClientRects(c,i,u,s,r.endNode);return r.markDidDomLayout(),this._createHorizontalRangesFromClientRects(f,r.clientRectDeltaLeft,r.clientRectScale)}}var rc;(function(o){o.DARK="dark",o.LIGHT="light",o.HIGH_CONTRAST_DARK="hcDark",o.HIGH_CONTRAST_LIGHT="hcLight"})(rc||(rc={}));function Vd(o){return o===rc.HIGH_CONTRAST_DARK||o===rc.HIGH_CONTRAST_LIGHT}function h1(o){return o===rc.DARK||o===rc.HIGH_CONTRAST_DARK}const cDe=function(){return Od?!0:!(jr||uc||ig)}();let IC=!0;class jZ{constructor(e,t){this.themeType=t;const i=e.options,n=i.get(50);i.get(38)==="off"?this.renderWhitespace=i.get(99):this.renderWhitespace="none",this.renderControlCharacters=i.get(94),this.spaceWidth=n.spaceWidth,this.middotWidth=n.middotWidth,this.wsmiddotWidth=n.wsmiddotWidth,this.useMonospaceOptimizations=n.isMonospace&&!i.get(33),this.canUseHalfwidthRightwardsArrow=n.canUseHalfwidthRightwardsArrow,this.lineHeight=i.get(67),this.stopRenderingLineAfter=i.get(117),this.fontLigatures=i.get(51)}equals(e){return this.themeType===e.themeType&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.fontLigatures===e.fontLigatures}}class Uu{constructor(e){this._options=e,this._isMaybeInvalid=!0,this._renderedViewLine=null}getDomNode(){return this._renderedViewLine&&this._renderedViewLine.domNode?this._renderedViewLine.domNode.domNode:null}setDomNode(e){if(this._renderedViewLine)this._renderedViewLine.domNode=ki(e);else throw new Error("I have no rendered view line to set the dom node to...")}onContentChanged(){this._isMaybeInvalid=!0}onTokensChanged(){this._isMaybeInvalid=!0}onDecorationsChanged(){this._isMaybeInvalid=!0}onOptionsChanged(e){this._isMaybeInvalid=!0,this._options=e}onSelectionChanged(){return Vd(this._options.themeType)||this._options.renderWhitespace==="selection"?(this._isMaybeInvalid=!0,!0):!1}renderLine(e,t,i,n,s){if(this._isMaybeInvalid===!1)return!1;this._isMaybeInvalid=!1;const r=n.getViewLineRenderingData(e),a=this._options,l=Hr.filter(r.inlineDecorations,e,r.minColumn,r.maxColumn);let c=null;if(Vd(a.themeType)||this._options.renderWhitespace==="selection"){const p=n.selections;for(const _ of p){if(_.endLineNumber<e||_.startLineNumber>e)continue;const b=_.startLineNumber===e?_.startColumn:r.minColumn,y=_.endLineNumber===e?_.endColumn:r.maxColumn;b<y&&(Vd(a.themeType)&&l.push(new Hr(b,y,"inline-selected-text",0)),this._options.renderWhitespace==="selection"&&(c||(c=[]),c.push(new yne(b-1,y-1))))}}const u=new Pm(a.useMonospaceOptimizations,a.canUseHalfwidthRightwardsArrow,r.content,r.continuesWithWrappedLine,r.isBasicASCII,r.containsRTL,r.minColumn-1,r.tokens,l,r.tabSize,r.startVisibleColumn,a.spaceWidth,a.middotWidth,a.wsmiddotWidth,a.stopRenderingLineAfter,a.renderWhitespace,a.renderControlCharacters,a.fontLigatures!==ml.OFF,c);if(this._renderedViewLine&&this._renderedViewLine.input.equals(u))return!1;s.appendString('<div style="top:'),s.appendString(String(t)),s.appendString("px;height:"),s.appendString(String(i)),s.appendString('px;" class="'),s.appendString(Uu.CLASS_NAME),s.appendString('">');const f=zD(u,s);s.appendString("</div>");let g=null;return IC&&cDe&&r.isBasicASCII&&a.useMonospaceOptimizations&&f.containsForeignElements===0&&(g=new tT(this._renderedViewLine?this._renderedViewLine.domNode:null,u,f.characterMapping)),g||(g=$ne(this._renderedViewLine?this._renderedViewLine.domNode:null,u,f.characterMapping,f.containsRTL,f.containsForeignElements)),this._renderedViewLine=g,!0}layoutLine(e,t,i){this._renderedViewLine&&this._renderedViewLine.domNode&&(this._renderedViewLine.domNode.setTop(t),this._renderedViewLine.domNode.setHeight(i))}getWidth(e){return this._renderedViewLine?this._renderedViewLine.getWidth(e):0}getWidthIsFast(){return this._renderedViewLine?this._renderedViewLine.getWidthIsFast():!0}needsMonospaceFontCheck(){return this._renderedViewLine?this._renderedViewLine instanceof tT:!1}monospaceAssumptionsAreValid(){return this._renderedViewLine&&this._renderedViewLine instanceof tT?this._renderedViewLine.monospaceAssumptionsAreValid():IC}onMonospaceAssumptionsInvalidated(){this._renderedViewLine&&this._renderedViewLine instanceof tT&&(this._renderedViewLine=this._renderedViewLine.toSlowRenderedLine())}getVisibleRangesForRange(e,t,i,n){if(!this._renderedViewLine)return null;t=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,t)),i=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,i));const s=this._renderedViewLine.input.stopRenderingLineAfter;if(s!==-1&&t>s+1&&i>s+1)return new $Z(!0,[new pv(this.getWidth(n),0)]);s!==-1&&t>s+1&&(t=s+1),s!==-1&&i>s+1&&(i=s+1);const r=this._renderedViewLine.getVisibleRangesForRange(e,t,i,n);return r&&r.length>0?new $Z(!1,r):null}getColumnOfNodeOffset(e,t){return this._renderedViewLine?this._renderedViewLine.getColumnOfNodeOffset(e,t):1}}Uu.CLASS_NAME="view-line";class tT{constructor(e,t,i){this._cachedWidth=-1,this.domNode=e,this.input=t;const n=Math.floor(t.lineContent.length/300);if(n>0){this._keyColumnPixelOffsetCache=new Float32Array(n);for(let s=0;s<n;s++)this._keyColumnPixelOffsetCache[s]=-1}else this._keyColumnPixelOffsetCache=null;this._characterMapping=i,this._charWidth=t.spaceWidth}getWidth(e){if(!this.domNode||this.input.lineContent.length<300){const t=this._characterMapping.getHorizontalOffset(this._characterMapping.length);return Math.round(this._charWidth*t)}return this._cachedWidth===-1&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth,e==null||e.markDidDomLayout()),this._cachedWidth}getWidthIsFast(){return this.input.lineContent.length<300||this._cachedWidth!==-1}monospaceAssumptionsAreValid(){if(!this.domNode)return IC;if(this.input.lineContent.length<300){const e=this.getWidth(null),t=this.domNode.domNode.firstChild.offsetWidth;Math.abs(e-t)>=2&&(console.warn("monospace assumptions have been violated, therefore disabling monospace optimizations!"),IC=!1)}return IC}toSlowRenderedLine(){return $ne(this.domNode,this.input,this._characterMapping,!1,0)}getVisibleRangesForRange(e,t,i,n){const s=this._getColumnPixelOffset(e,t,n),r=this._getColumnPixelOffset(e,i,n);return[new pv(s,r-s)]}_getColumnPixelOffset(e,t,i){if(t<=300){const c=this._characterMapping.getHorizontalOffset(t);return this._charWidth*c}const n=Math.floor((t-1)/300)-1,s=(n+1)*300+1;let r=-1;if(this._keyColumnPixelOffsetCache&&(r=this._keyColumnPixelOffsetCache[n],r===-1&&(r=this._actualReadPixelOffset(e,s,i),this._keyColumnPixelOffsetCache[n]=r)),r===-1){const c=this._characterMapping.getHorizontalOffset(t);return this._charWidth*c}const a=this._characterMapping.getHorizontalOffset(s),l=this._characterMapping.getHorizontalOffset(t);return r+this._charWidth*(l-a)}_getReadingTarget(e){return e.domNode.firstChild}_actualReadPixelOffset(e,t,i){if(!this.domNode)return-1;const n=this._characterMapping.getDomPosition(t),s=xN.readHorizontalRanges(this._getReadingTarget(this.domNode),n.partIndex,n.charIndex,n.partIndex,n.charIndex,i);return!s||s.length===0?-1:s[0].left}getColumnOfNodeOffset(e,t){return SH(this._characterMapping,e,t)}}class Une{constructor(e,t,i,n,s){if(this.domNode=e,this.input=t,this._characterMapping=i,this._isWhitespaceOnly=/^\s*$/.test(t.lineContent),this._containsForeignElements=s,this._cachedWidth=-1,this._pixelOffsetCache=null,!n||this._characterMapping.length===0){this._pixelOffsetCache=new Float32Array(Math.max(2,this._characterMapping.length+1));for(let r=0,a=this._characterMapping.length;r<=a;r++)this._pixelOffsetCache[r]=-1}}_getReadingTarget(e){return e.domNode.firstChild}getWidth(e){return this.domNode?(this._cachedWidth===-1&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth,e==null||e.markDidDomLayout()),this._cachedWidth):0}getWidthIsFast(){return this._cachedWidth!==-1}getVisibleRangesForRange(e,t,i,n){if(!this.domNode)return null;if(this._pixelOffsetCache!==null){const s=this._readPixelOffset(this.domNode,e,t,n);if(s===-1)return null;const r=this._readPixelOffset(this.domNode,e,i,n);return r===-1?null:[new pv(s,r-s)]}return this._readVisibleRangesForRange(this.domNode,e,t,i,n)}_readVisibleRangesForRange(e,t,i,n,s){if(i===n){const r=this._readPixelOffset(e,t,i,s);return r===-1?null:[new pv(r,0)]}else return this._readRawVisibleRangesForRange(e,i,n,s)}_readPixelOffset(e,t,i,n){if(this._characterMapping.length===0){if(this._containsForeignElements===0||this._containsForeignElements===2)return 0;if(this._containsForeignElements===1)return this.getWidth(n);const s=this._getReadingTarget(e);return s.firstChild?(n.markDidDomLayout(),s.firstChild.offsetWidth):0}if(this._pixelOffsetCache!==null){const s=this._pixelOffsetCache[i];if(s!==-1)return s;const r=this._actualReadPixelOffset(e,t,i,n);return this._pixelOffsetCache[i]=r,r}return this._actualReadPixelOffset(e,t,i,n)}_actualReadPixelOffset(e,t,i,n){if(this._characterMapping.length===0){const l=xN.readHorizontalRanges(this._getReadingTarget(e),0,0,0,0,n);return!l||l.length===0?-1:l[0].left}if(i===this._characterMapping.length&&this._isWhitespaceOnly&&this._containsForeignElements===0)return this.getWidth(n);const s=this._characterMapping.getDomPosition(i),r=xN.readHorizontalRanges(this._getReadingTarget(e),s.partIndex,s.charIndex,s.partIndex,s.charIndex,n);if(!r||r.length===0)return-1;const a=r[0].left;if(this.input.isBasicASCII){const l=this._characterMapping.getHorizontalOffset(i),c=Math.round(this.input.spaceWidth*l);if(Math.abs(c-a)<=1)return c}return a}_readRawVisibleRangesForRange(e,t,i,n){if(t===1&&i===this._characterMapping.length)return[new pv(0,this.getWidth(n))];const s=this._characterMapping.getDomPosition(t),r=this._characterMapping.getDomPosition(i);return xN.readHorizontalRanges(this._getReadingTarget(e),s.partIndex,s.charIndex,r.partIndex,r.charIndex,n)}getColumnOfNodeOffset(e,t){return SH(this._characterMapping,e,t)}}class dDe extends Une{_readVisibleRangesForRange(e,t,i,n,s){const r=super._readVisibleRangesForRange(e,t,i,n,s);if(!r||r.length===0||i===n||i===1&&n===this._characterMapping.length)return r;if(!this.input.containsRTL){const a=this._readPixelOffset(e,t,n,s);if(a!==-1){const l=r[r.length-1];l.left<a&&(l.width=a-l.left)}}return r}}const $ne=function(){return fv?uDe:hDe}();function uDe(o,e,t,i,n){return new dDe(o,e,t,i,n)}function hDe(o,e,t,i,n){return new Une(o,e,t,i,n)}function SH(o,e,t){const i=e.textContent.length;let n=-1;for(;e;)e=e.previousSibling,n++;return o.getColumn(new Sne(n,t),i)}class Vs{static _nextVisibleColumn(e,t,i){return e===9?Vs.nextRenderTabStop(t,i):lm(e)||HV(e)?t+2:t+1}static visibleColumnFromColumn(e,t,i){const n=Math.min(t-1,e.length),s=e.substring(0,n),r=new pR(s);let a=0;for(;!r.eol();){const l=gR(s,n,r.offset);r.nextGraphemeLength(),a=this._nextVisibleColumn(l,a,i)}return a}static columnFromVisibleColumn(e,t,i){if(t<=0)return 1;const n=e.length,s=new pR(e);let r=0,a=1;for(;!s.eol();){const l=gR(e,n,s.offset);s.nextGraphemeLength();const c=this._nextVisibleColumn(l,r,i),u=s.offset+1;if(c>=t){const f=t-r;return c-t<f?u:a}r=c,a=u}return n+1}static nextRenderTabStop(e,t){return e+t-e%t}static nextIndentTabStop(e,t){return e+t-e%t}static prevRenderTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}static prevIndentTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}}class vx{static whitespaceVisibleColumn(e,t,i){const n=e.length;let s=0,r=-1,a=-1;for(let l=0;l<n;l++){if(l===t)return[r,a,s];switch(s%i===0&&(r=l,a=s),e.charCodeAt(l)){case 32:s+=1;break;case 9:s=Vs.nextRenderTabStop(s,i);break;default:return[-1,-1,-1]}}return t===n?[r,a,s]:[-1,-1,-1]}static atomicPosition(e,t,i,n){const s=e.length,[r,a,l]=vx.whitespaceVisibleColumn(e,t,i);if(l===-1)return-1;let c;switch(n){case 0:c=!0;break;case 1:c=!1;break;case 2:if(l%i===0)return t;c=l%i<=i/2;break}if(c){if(r===-1)return-1;let g=a;for(let p=r;p<s;++p){if(g===a+i)return r;switch(e.charCodeAt(p)){case 32:g+=1;break;case 9:g=Vs.nextRenderTabStop(g,i);break;default:return-1}}return g===a+i?r:-1}const u=Vs.nextRenderTabStop(l,i);let f=l;for(let g=t;g<s;g++){if(f===u)return g;switch(e.charCodeAt(g)){case 32:f+=1;break;case 9:f=Vs.nextRenderTabStop(f,i);break;default:return-1}}return f===u?s:-1}}class ap{constructor(e=null){this.hitTarget=e,this.type=0}}class jne{get hitTarget(){return this.spanNode}constructor(e,t,i){this.position=e,this.spanNode=t,this.injectedText=i,this.type=1}}var Z_;(function(o){function e(t,i,n){const s=t.getPositionFromDOMInfo(i,n);return s?new jne(s,i,null):new ap(i)}o.createFromDOMInfo=e})(Z_||(Z_={}));class fDe{constructor(e,t){this.lastViewCursorsRenderData=e,this.lastTextareaPosition=t}}class ur{static _deduceRage(e,t=null){return!t&&e?new A(e.lineNumber,e.column,e.lineNumber,e.column):t??null}static createUnknown(e,t,i){return{type:0,element:e,mouseColumn:t,position:i,range:this._deduceRage(i)}}static createTextarea(e,t){return{type:1,element:e,mouseColumn:t,position:null,range:null}}static createMargin(e,t,i,n,s,r){return{type:e,element:t,mouseColumn:i,position:n,range:s,detail:r}}static createViewZone(e,t,i,n,s){return{type:e,element:t,mouseColumn:i,position:n,range:this._deduceRage(n),detail:s}}static createContentText(e,t,i,n,s){return{type:6,element:e,mouseColumn:t,position:i,range:this._deduceRage(i,n),detail:s}}static createContentEmpty(e,t,i,n){return{type:7,element:e,mouseColumn:t,position:i,range:this._deduceRage(i),detail:n}}static createContentWidget(e,t,i){return{type:9,element:e,mouseColumn:t,position:null,range:null,detail:i}}static createScrollbar(e,t,i){return{type:11,element:e,mouseColumn:t,position:i,range:this._deduceRage(i)}}static createOverlayWidget(e,t,i){return{type:12,element:e,mouseColumn:t,position:null,range:null,detail:i}}static createOutsideEditor(e,t,i,n){return{type:13,element:null,mouseColumn:e,position:t,range:this._deduceRage(t),outsidePosition:i,outsideDistance:n}}static _typeToString(e){return e===1?"TEXTAREA":e===2?"GUTTER_GLYPH_MARGIN":e===3?"GUTTER_LINE_NUMBERS":e===4?"GUTTER_LINE_DECORATIONS":e===5?"GUTTER_VIEW_ZONE":e===6?"CONTENT_TEXT":e===7?"CONTENT_EMPTY":e===8?"CONTENT_VIEW_ZONE":e===9?"CONTENT_WIDGET":e===10?"OVERVIEW_RULER":e===11?"SCROLLBAR":e===12?"OVERLAY_WIDGET":"UNKNOWN"}static toString(e){return this._typeToString(e.type)+": "+e.position+" - "+e.range+" - "+JSON.stringify(e.detail)}}class kr{static isTextArea(e){return e.length===2&&e[0]===3&&e[1]===7}static isChildOfViewLines(e){return e.length>=4&&e[0]===3&&e[3]===8}static isStrictChildOfViewLines(e){return e.length>4&&e[0]===3&&e[3]===8}static isChildOfScrollableElement(e){return e.length>=2&&e[0]===3&&e[1]===6}static isChildOfMinimap(e){return e.length>=2&&e[0]===3&&e[1]===9}static isChildOfContentWidgets(e){return e.length>=4&&e[0]===3&&e[3]===1}static isChildOfOverflowGuard(e){return e.length>=1&&e[0]===3}static isChildOfOverflowingContentWidgets(e){return e.length>=1&&e[0]===2}static isChildOfOverlayWidgets(e){return e.length>=2&&e[0]===3&&e[1]===4}static isChildOfOverflowingOverlayWidgets(e){return e.length>=1&&e[0]===5}}class f1{constructor(e,t,i){this.viewModel=e.viewModel;const n=e.configuration.options;this.layoutInfo=n.get(145),this.viewDomNode=t.viewDomNode,this.lineHeight=n.get(67),this.stickyTabStops=n.get(116),this.typicalHalfwidthCharacterWidth=n.get(50).typicalHalfwidthCharacterWidth,this.lastRenderData=i,this._context=e,this._viewHelper=t}getZoneAtCoord(e){return f1.getZoneAtCoord(this._context,e)}static getZoneAtCoord(e,t){const i=e.viewLayout.getWhitespaceAtVerticalOffset(t);if(i){const n=i.verticalOffset+i.height/2,s=e.viewModel.getLineCount();let r=null,a,l=null;return i.afterLineNumber!==s&&(l=new Z(i.afterLineNumber+1,1)),i.afterLineNumber>0&&(r=new Z(i.afterLineNumber,e.viewModel.getLineMaxColumn(i.afterLineNumber))),l===null?a=r:r===null?a=l:t<n?a=r:a=l,{viewZoneId:i.id,afterLineNumber:i.afterLineNumber,positionBefore:r,positionAfter:l,position:a}}return null}getFullLineRangeAtCoord(e){if(this._context.viewLayout.isAfterLines(e)){const n=this._context.viewModel.getLineCount(),s=this._context.viewModel.getLineMaxColumn(n);return{range:new A(n,s,n,s),isAfterLines:!0}}const t=this._context.viewLayout.getLineNumberAtVerticalOffset(e),i=this._context.viewModel.getLineMaxColumn(t);return{range:new A(t,1,t,i),isAfterLines:!1}}getLineNumberAtVerticalOffset(e){return this._context.viewLayout.getLineNumberAtVerticalOffset(e)}isAfterLines(e){return this._context.viewLayout.isAfterLines(e)}isInTopPadding(e){return this._context.viewLayout.isInTopPadding(e)}isInBottomPadding(e){return this._context.viewLayout.isInBottomPadding(e)}getVerticalOffsetForLineNumber(e){return this._context.viewLayout.getVerticalOffsetForLineNumber(e)}findAttribute(e,t){return f1._findAttribute(e,t,this._viewHelper.viewDomNode)}static _findAttribute(e,t,i){for(;e&&e!==e.ownerDocument.body;){if(e.hasAttribute&&e.hasAttribute(t))return e.getAttribute(t);if(e===i)return null;e=e.parentNode}return null}getLineWidth(e){return this._viewHelper.getLineWidth(e)}visibleRangeForPosition(e,t){return this._viewHelper.visibleRangeForPosition(e,t)}getPositionFromDOMInfo(e,t){return this._viewHelper.getPositionFromDOMInfo(e,t)}getCurrentScrollTop(){return this._context.viewLayout.getCurrentScrollTop()}getCurrentScrollLeft(){return this._context.viewLayout.getCurrentScrollLeft()}}class gDe{constructor(e,t,i,n){this.editorPos=t,this.pos=i,this.relativePos=n,this.mouseVerticalOffset=Math.max(0,e.getCurrentScrollTop()+this.relativePos.y),this.mouseContentHorizontalOffset=e.getCurrentScrollLeft()+this.relativePos.x-e.layoutInfo.contentLeft,this.isInMarginArea=this.relativePos.x<e.layoutInfo.contentLeft&&this.relativePos.x>=e.layoutInfo.glyphMarginLeft,this.isInContentArea=!this.isInMarginArea,this.mouseColumn=Math.max(0,cr._getMouseColumn(this.mouseContentHorizontalOffset,e.typicalHalfwidthCharacterWidth))}}class pDe extends gDe{get target(){return this._useHitTestTarget?this.hitTestResult.value.hitTarget:this._eventTarget}get targetPath(){return this._targetPathCacheElement!==this.target&&(this._targetPathCacheElement=this.target,this._targetPathCacheValue=qd.collect(this.target,this._ctx.viewDomNode)),this._targetPathCacheValue}constructor(e,t,i,n,s){super(e,t,i,n),this.hitTestResult=new tu(()=>cr.doHitTest(this._ctx,this)),this._targetPathCacheElement=null,this._targetPathCacheValue=new Uint8Array(0),this._ctx=e,this._eventTarget=s;const r=!!this._eventTarget;this._useHitTestTarget=!r}toString(){return`pos(${this.pos.x},${this.pos.y}), editorPos(${this.editorPos.x},${this.editorPos.y}), relativePos(${this.relativePos.x},${this.relativePos.y}), mouseVerticalOffset: ${this.mouseVerticalOffset}, mouseContentHorizontalOffset: ${this.mouseContentHorizontalOffset}
	target: ${this.target?this.target.outerHTML:null}`}get wouldBenefitFromHitTestTargetSwitch(){return!this._useHitTestTarget&&this.hitTestResult.value.hitTarget!==null&&this.target!==this.hitTestResult.value.hitTarget}switchToHitTestTarget(){this._useHitTestTarget=!0}_getMouseColumn(e=null){return e&&e.column<this._ctx.viewModel.getLineMaxColumn(e.lineNumber)?Vs.visibleColumnFromColumn(this._ctx.viewModel.getLineContent(e.lineNumber),e.column,this._ctx.viewModel.model.getOptions().tabSize)+1:this.mouseColumn}fulfillUnknown(e=null){return ur.createUnknown(this.target,this._getMouseColumn(e),e)}fulfillTextarea(){return ur.createTextarea(this.target,this._getMouseColumn())}fulfillMargin(e,t,i,n){return ur.createMargin(e,this.target,this._getMouseColumn(t),t,i,n)}fulfillViewZone(e,t,i){return ur.createViewZone(e,this.target,this._getMouseColumn(t),t,i)}fulfillContentText(e,t,i){return ur.createContentText(this.target,this._getMouseColumn(e),e,t,i)}fulfillContentEmpty(e,t){return ur.createContentEmpty(this.target,this._getMouseColumn(e),e,t)}fulfillContentWidget(e){return ur.createContentWidget(this.target,this._getMouseColumn(),e)}fulfillScrollbar(e){return ur.createScrollbar(this.target,this._getMouseColumn(e),e)}fulfillOverlayWidget(e){return ur.createOverlayWidget(this.target,this._getMouseColumn(),e)}}const KZ={isAfterLines:!0};function g3(o){return{isAfterLines:!1,horizontalDistanceToText:o}}class cr{constructor(e,t){this._context=e,this._viewHelper=t}mouseTargetIsWidget(e){const t=e.target,i=qd.collect(t,this._viewHelper.viewDomNode);return!!(kr.isChildOfContentWidgets(i)||kr.isChildOfOverflowingContentWidgets(i)||kr.isChildOfOverlayWidgets(i)||kr.isChildOfOverflowingOverlayWidgets(i))}createMouseTarget(e,t,i,n,s){const r=new f1(this._context,this._viewHelper,e),a=new pDe(r,t,i,n,s);try{const l=cr._createMouseTarget(r,a);if(l.type===6&&r.stickyTabStops&&l.position!==null){const c=cr._snapToSoftTabBoundary(l.position,r.viewModel),u=A.fromPositions(c,c).plusRange(l.range);return a.fulfillContentText(c,u,l.detail)}return l}catch{return a.fulfillUnknown()}}static _createMouseTarget(e,t){if(t.target===null)return t.fulfillUnknown();const i=t;let n=null;return!kr.isChildOfOverflowGuard(t.targetPath)&&!kr.isChildOfOverflowingContentWidgets(t.targetPath)&&!kr.isChildOfOverflowingOverlayWidgets(t.targetPath)&&(n=n||t.fulfillUnknown()),n=n||cr._hitTestContentWidget(e,i),n=n||cr._hitTestOverlayWidget(e,i),n=n||cr._hitTestMinimap(e,i),n=n||cr._hitTestScrollbarSlider(e,i),n=n||cr._hitTestViewZone(e,i),n=n||cr._hitTestMargin(e,i),n=n||cr._hitTestViewCursor(e,i),n=n||cr._hitTestTextArea(e,i),n=n||cr._hitTestViewLines(e,i),n=n||cr._hitTestScrollbar(e,i),n||t.fulfillUnknown()}static _hitTestContentWidget(e,t){if(kr.isChildOfContentWidgets(t.targetPath)||kr.isChildOfOverflowingContentWidgets(t.targetPath)){const i=e.findAttribute(t.target,"widgetId");return i?t.fulfillContentWidget(i):t.fulfillUnknown()}return null}static _hitTestOverlayWidget(e,t){if(kr.isChildOfOverlayWidgets(t.targetPath)||kr.isChildOfOverflowingOverlayWidgets(t.targetPath)){const i=e.findAttribute(t.target,"widgetId");return i?t.fulfillOverlayWidget(i):t.fulfillUnknown()}return null}static _hitTestViewCursor(e,t){if(t.target){const i=e.lastRenderData.lastViewCursorsRenderData;for(const n of i)if(t.target===n.domNode)return t.fulfillContentText(n.position,null,{mightBeForeignElement:!1,injectedText:null})}if(t.isInContentArea){const i=e.lastRenderData.lastViewCursorsRenderData,n=t.mouseContentHorizontalOffset,s=t.mouseVerticalOffset;for(const r of i){if(n<r.contentLeft||n>r.contentLeft+r.width)continue;const a=e.getVerticalOffsetForLineNumber(r.position.lineNumber);if(a<=s&&s<=a+r.height)return t.fulfillContentText(r.position,null,{mightBeForeignElement:!1,injectedText:null})}}return null}static _hitTestViewZone(e,t){const i=e.getZoneAtCoord(t.mouseVerticalOffset);if(i){const n=t.isInContentArea?8:5;return t.fulfillViewZone(n,i.position,i)}return null}static _hitTestTextArea(e,t){return kr.isTextArea(t.targetPath)?e.lastRenderData.lastTextareaPosition?t.fulfillContentText(e.lastRenderData.lastTextareaPosition,null,{mightBeForeignElement:!1,injectedText:null}):t.fulfillTextarea():null}static _hitTestMargin(e,t){if(t.isInMarginArea){const i=e.getFullLineRangeAtCoord(t.mouseVerticalOffset),n=i.range.getStartPosition();let s=Math.abs(t.relativePos.x);const r={isAfterLines:i.isAfterLines,glyphMarginLeft:e.layoutInfo.glyphMarginLeft,glyphMarginWidth:e.layoutInfo.glyphMarginWidth,lineNumbersWidth:e.layoutInfo.lineNumbersWidth,offsetX:s};if(s-=e.layoutInfo.glyphMarginLeft,s<=e.layoutInfo.glyphMarginWidth){const a=e.viewModel.coordinatesConverter.convertViewPositionToModelPosition(i.range.getStartPosition()),l=e.viewModel.glyphLanes.getLanesAtLine(a.lineNumber);return r.glyphMarginLane=l[Math.floor(s/e.lineHeight)],t.fulfillMargin(2,n,i.range,r)}return s-=e.layoutInfo.glyphMarginWidth,s<=e.layoutInfo.lineNumbersWidth?t.fulfillMargin(3,n,i.range,r):(s-=e.layoutInfo.lineNumbersWidth,t.fulfillMargin(4,n,i.range,r))}return null}static _hitTestViewLines(e,t){if(!kr.isChildOfViewLines(t.targetPath))return null;if(e.isInTopPadding(t.mouseVerticalOffset))return t.fulfillContentEmpty(new Z(1,1),KZ);if(e.isAfterLines(t.mouseVerticalOffset)||e.isInBottomPadding(t.mouseVerticalOffset)){const n=e.viewModel.getLineCount(),s=e.viewModel.getLineMaxColumn(n);return t.fulfillContentEmpty(new Z(n,s),KZ)}if(kr.isStrictChildOfViewLines(t.targetPath)){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset);if(e.viewModel.getLineLength(n)===0){const r=e.getLineWidth(n),a=g3(t.mouseContentHorizontalOffset-r);return t.fulfillContentEmpty(new Z(n,1),a)}const s=e.getLineWidth(n);if(t.mouseContentHorizontalOffset>=s){const r=g3(t.mouseContentHorizontalOffset-s),a=new Z(n,e.viewModel.getLineMaxColumn(n));return t.fulfillContentEmpty(a,r)}}const i=t.hitTestResult.value;return i.type===1?cr.createMouseTargetFromHitTestPosition(e,t,i.spanNode,i.position,i.injectedText):t.wouldBenefitFromHitTestTargetSwitch?(t.switchToHitTestTarget(),this._createMouseTarget(e,t)):t.fulfillUnknown()}static _hitTestMinimap(e,t){if(kr.isChildOfMinimap(t.targetPath)){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),n=e.viewModel.getLineMaxColumn(i);return t.fulfillScrollbar(new Z(i,n))}return null}static _hitTestScrollbarSlider(e,t){if(kr.isChildOfScrollableElement(t.targetPath)&&t.target&&t.target.nodeType===1){const i=t.target.className;if(i&&/\b(slider|scrollbar)\b/.test(i)){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),s=e.viewModel.getLineMaxColumn(n);return t.fulfillScrollbar(new Z(n,s))}}return null}static _hitTestScrollbar(e,t){if(kr.isChildOfScrollableElement(t.targetPath)){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),n=e.viewModel.getLineMaxColumn(i);return t.fulfillScrollbar(new Z(i,n))}return null}getMouseColumn(e){const t=this._context.configuration.options,i=t.get(145),n=this._context.viewLayout.getCurrentScrollLeft()+e.x-i.contentLeft;return cr._getMouseColumn(n,t.get(50).typicalHalfwidthCharacterWidth)}static _getMouseColumn(e,t){return e<0?1:Math.round(e/t)+1}static createMouseTargetFromHitTestPosition(e,t,i,n,s){const r=n.lineNumber,a=n.column,l=e.getLineWidth(r);if(t.mouseContentHorizontalOffset>l){const S=g3(t.mouseContentHorizontalOffset-l);return t.fulfillContentEmpty(n,S)}const c=e.visibleRangeForPosition(r,a);if(!c)return t.fulfillUnknown(n);const u=c.left;if(Math.abs(t.mouseContentHorizontalOffset-u)<1)return t.fulfillContentText(n,null,{mightBeForeignElement:!!s,injectedText:s});const f=[];if(f.push({offset:c.left,column:a}),a>1){const S=e.visibleRangeForPosition(r,a-1);S&&f.push({offset:S.left,column:a-1})}const g=e.viewModel.getLineMaxColumn(r);if(a<g){const S=e.visibleRangeForPosition(r,a+1);S&&f.push({offset:S.left,column:a+1})}f.sort((S,L)=>S.offset-L.offset);const p=t.pos.toClientCoordinates(ft(e.viewDomNode)),_=i.getBoundingClientRect(),b=_.left<=p.clientX&&p.clientX<=_.right;let y=null;for(let S=1;S<f.length;S++){const L=f[S-1],x=f[S];if(L.offset<=t.mouseContentHorizontalOffset&&t.mouseContentHorizontalOffset<=x.offset){y=new A(r,L.column,r,x.column);const D=Math.abs(L.offset-t.mouseContentHorizontalOffset),E=Math.abs(x.offset-t.mouseContentHorizontalOffset);n=D<E?new Z(r,L.column):new Z(r,x.column);break}}return t.fulfillContentText(n,y,{mightBeForeignElement:!b||!!s,injectedText:s})}static _doHitTestWithCaretRangeFromPoint(e,t){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),n=e.getVerticalOffsetForLineNumber(i),s=n+e.lineHeight;if(!(i===e.viewModel.getLineCount()&&t.mouseVerticalOffset>s)){const a=Math.floor((n+s)/2);let l=t.pos.y+(a-t.mouseVerticalOffset);l<=t.editorPos.y&&(l=t.editorPos.y+1),l>=t.editorPos.y+t.editorPos.height&&(l=t.editorPos.y+t.editorPos.height-1);const c=new WA(t.pos.x,l),u=this._actualDoHitTestWithCaretRangeFromPoint(e,c.toClientCoordinates(ft(e.viewDomNode)));if(u.type===1)return u}return this._actualDoHitTestWithCaretRangeFromPoint(e,t.pos.toClientCoordinates(ft(e.viewDomNode)))}static _actualDoHitTestWithCaretRangeFromPoint(e,t){const i=Nv(e.viewDomNode);let n;if(i?typeof i.caretRangeFromPoint>"u"?n=mDe(i,t.clientX,t.clientY):n=i.caretRangeFromPoint(t.clientX,t.clientY):n=e.viewDomNode.ownerDocument.caretRangeFromPoint(t.clientX,t.clientY),!n||!n.startContainer)return new ap;const s=n.startContainer;if(s.nodeType===s.TEXT_NODE){const r=s.parentNode,a=r?r.parentNode:null,l=a?a.parentNode:null;return(l&&l.nodeType===l.ELEMENT_NODE?l.className:null)===Uu.CLASS_NAME?Z_.createFromDOMInfo(e,r,n.startOffset):new ap(s.parentNode)}else if(s.nodeType===s.ELEMENT_NODE){const r=s.parentNode,a=r?r.parentNode:null;return(a&&a.nodeType===a.ELEMENT_NODE?a.className:null)===Uu.CLASS_NAME?Z_.createFromDOMInfo(e,s,s.textContent.length):new ap(s)}return new ap}static _doHitTestWithCaretPositionFromPoint(e,t){const i=e.viewDomNode.ownerDocument.caretPositionFromPoint(t.clientX,t.clientY);if(i.offsetNode.nodeType===i.offsetNode.TEXT_NODE){const n=i.offsetNode.parentNode,s=n?n.parentNode:null,r=s?s.parentNode:null;return(r&&r.nodeType===r.ELEMENT_NODE?r.className:null)===Uu.CLASS_NAME?Z_.createFromDOMInfo(e,i.offsetNode.parentNode,i.offset):new ap(i.offsetNode.parentNode)}if(i.offsetNode.nodeType===i.offsetNode.ELEMENT_NODE){const n=i.offsetNode.parentNode,s=n&&n.nodeType===n.ELEMENT_NODE?n.className:null,r=n?n.parentNode:null,a=r&&r.nodeType===r.ELEMENT_NODE?r.className:null;if(s===Uu.CLASS_NAME){const l=i.offsetNode.childNodes[Math.min(i.offset,i.offsetNode.childNodes.length-1)];if(l)return Z_.createFromDOMInfo(e,l,0)}else if(a===Uu.CLASS_NAME)return Z_.createFromDOMInfo(e,i.offsetNode,0)}return new ap(i.offsetNode)}static _snapToSoftTabBoundary(e,t){const i=t.getLineContent(e.lineNumber),{tabSize:n}=t.model.getOptions(),s=vx.atomicPosition(i,e.column-1,n,2);return s!==-1?new Z(e.lineNumber,s+1):e}static doHitTest(e,t){let i=new ap;if(typeof e.viewDomNode.ownerDocument.caretRangeFromPoint=="function"?i=this._doHitTestWithCaretRangeFromPoint(e,t):e.viewDomNode.ownerDocument.caretPositionFromPoint&&(i=this._doHitTestWithCaretPositionFromPoint(e,t.pos.toClientCoordinates(ft(e.viewDomNode)))),i.type===1){const n=e.viewModel.getInjectedTextAt(i.position),s=e.viewModel.normalizePosition(i.position,2);(n||!s.equals(i.position))&&(i=new jne(s,i.spanNode,n))}return i}}function mDe(o,e,t){const i=document.createRange();let n=o.elementFromPoint(e,t);if(n!==null){for(;n&&n.firstChild&&n.firstChild.nodeType!==n.firstChild.TEXT_NODE&&n.lastChild&&n.lastChild.firstChild;)n=n.lastChild;const s=n.getBoundingClientRect(),r=ft(n),a=r.getComputedStyle(n,null).getPropertyValue("font-style"),l=r.getComputedStyle(n,null).getPropertyValue("font-variant"),c=r.getComputedStyle(n,null).getPropertyValue("font-weight"),u=r.getComputedStyle(n,null).getPropertyValue("font-size"),f=r.getComputedStyle(n,null).getPropertyValue("line-height"),g=r.getComputedStyle(n,null).getPropertyValue("font-family"),p=`${a} ${l} ${c} ${u}/${f} ${g}`,_=n.innerText;let b=s.left,y=0,S;if(e>s.left+s.width)y=_.length;else{const L=sv.getInstance();for(let x=0;x<_.length+1;x++){if(S=L.getCharWidth(_.charAt(x),p)/2,b+=S,e<b){y=x;break}b+=S}}i.setStart(n.firstChild,y),i.setEnd(n.firstChild,y)}return i}class sv{static getInstance(){return sv._INSTANCE||(sv._INSTANCE=new sv),sv._INSTANCE}constructor(){this._cache={},this._canvas=document.createElement("canvas")}getCharWidth(e,t){const i=e+t;if(this._cache[i])return this._cache[i];const n=this._canvas.getContext("2d");n.font=t;const r=n.measureText(e).width;return this._cache[i]=r,r}}sv._INSTANCE=null;function fs(o,e,t){let i=null,n=null;if(typeof t.value=="function"?(i="value",n=t.value,n.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof t.get=="function"&&(i="get",n=t.get),!n)throw new Error("not supported");const s=`$memoize$${e}`;t[i]=function(...r){return this.hasOwnProperty(s)||Object.defineProperty(this,s,{configurable:!1,enumerable:!1,writable:!1,value:n.apply(this,r)}),this[s]}}var _De=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},ln;(function(o){o.Tap="-monaco-gesturetap",o.Change="-monaco-gesturechange",o.Start="-monaco-gesturestart",o.End="-monaco-gesturesend",o.Contextmenu="-monaco-gesturecontextmenu"})(ln||(ln={}));class rn extends J{constructor(){super(),this.dispatched=!1,this.targets=new Wr,this.ignoreTargets=new Wr,this.activeTouches={},this.handle=null,this._lastSetTapCountTime=0,this._register(Ie.runAndSubscribe(pA,({window:e,disposables:t})=>{t.add(oe(e.document,"touchstart",i=>this.onTouchStart(i),{passive:!1})),t.add(oe(e.document,"touchend",i=>this.onTouchEnd(e,i))),t.add(oe(e.document,"touchmove",i=>this.onTouchMove(i),{passive:!1}))},{window:Hi,disposables:this._store}))}static addTarget(e){if(!rn.isTouchDevice())return J.None;rn.INSTANCE||(rn.INSTANCE=new rn);const t=rn.INSTANCE.targets.push(e);return lt(t)}static ignoreTarget(e){if(!rn.isTouchDevice())return J.None;rn.INSTANCE||(rn.INSTANCE=new rn);const t=rn.INSTANCE.ignoreTargets.push(e);return lt(t)}static isTouchDevice(){return"ontouchstart"in Hi||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(e){const t=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let i=0,n=e.targetTouches.length;i<n;i++){const s=e.targetTouches.item(i);this.activeTouches[s.identifier]={id:s.identifier,initialTarget:s.target,initialTimeStamp:t,initialPageX:s.pageX,initialPageY:s.pageY,rollingTimestamps:[t],rollingPageX:[s.pageX],rollingPageY:[s.pageY]};const r=this.newGestureEvent(ln.Start,s.target);r.pageX=s.pageX,r.pageY=s.pageY,this.dispatchEvent(r)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}onTouchEnd(e,t){const i=Date.now(),n=Object.keys(this.activeTouches).length;for(let s=0,r=t.changedTouches.length;s<r;s++){const a=t.changedTouches.item(s);if(!this.activeTouches.hasOwnProperty(String(a.identifier))){console.warn("move of an UNKNOWN touch",a);continue}const l=this.activeTouches[a.identifier],c=Date.now()-l.initialTimeStamp;if(c<rn.HOLD_DELAY&&Math.abs(l.initialPageX-Kl(l.rollingPageX))<30&&Math.abs(l.initialPageY-Kl(l.rollingPageY))<30){const u=this.newGestureEvent(ln.Tap,l.initialTarget);u.pageX=Kl(l.rollingPageX),u.pageY=Kl(l.rollingPageY),this.dispatchEvent(u)}else if(c>=rn.HOLD_DELAY&&Math.abs(l.initialPageX-Kl(l.rollingPageX))<30&&Math.abs(l.initialPageY-Kl(l.rollingPageY))<30){const u=this.newGestureEvent(ln.Contextmenu,l.initialTarget);u.pageX=Kl(l.rollingPageX),u.pageY=Kl(l.rollingPageY),this.dispatchEvent(u)}else if(n===1){const u=Kl(l.rollingPageX),f=Kl(l.rollingPageY),g=Kl(l.rollingTimestamps)-l.rollingTimestamps[0],p=u-l.rollingPageX[0],_=f-l.rollingPageY[0],b=[...this.targets].filter(y=>l.initialTarget instanceof Node&&y.contains(l.initialTarget));this.inertia(e,b,i,Math.abs(p)/g,p>0?1:-1,u,Math.abs(_)/g,_>0?1:-1,f)}this.dispatchEvent(this.newGestureEvent(ln.End,l.initialTarget)),delete this.activeTouches[a.identifier]}this.dispatched&&(t.preventDefault(),t.stopPropagation(),this.dispatched=!1)}newGestureEvent(e,t){const i=document.createEvent("CustomEvent");return i.initEvent(e,!1,!0),i.initialTarget=t,i.tapCount=0,i}dispatchEvent(e){if(e.type===ln.Tap){const t=new Date().getTime();let i=0;t-this._lastSetTapCountTime>rn.CLEAR_TAP_COUNT_TIME?i=1:i=2,this._lastSetTapCountTime=t,e.tapCount=i}else(e.type===ln.Change||e.type===ln.Contextmenu)&&(this._lastSetTapCountTime=0);if(e.initialTarget instanceof Node){for(const i of this.ignoreTargets)if(i.contains(e.initialTarget))return;const t=[];for(const i of this.targets)if(i.contains(e.initialTarget)){let n=0,s=e.initialTarget;for(;s&&s!==i;)n++,s=s.parentElement;t.push([n,i])}t.sort((i,n)=>i[0]-n[0]);for(const[i,n]of t)n.dispatchEvent(e),this.dispatched=!0}}inertia(e,t,i,n,s,r,a,l,c){this.handle=ja(e,()=>{const u=Date.now(),f=u-i;let g=0,p=0,_=!0;n+=rn.SCROLL_FRICTION*f,a+=rn.SCROLL_FRICTION*f,n>0&&(_=!1,g=s*n*f),a>0&&(_=!1,p=l*a*f);const b=this.newGestureEvent(ln.Change);b.translationX=g,b.translationY=p,t.forEach(y=>y.dispatchEvent(b)),_||this.inertia(e,t,u,n,s,r+g,a,l,c+p)})}onTouchMove(e){const t=Date.now();for(let i=0,n=e.changedTouches.length;i<n;i++){const s=e.changedTouches.item(i);if(!this.activeTouches.hasOwnProperty(String(s.identifier))){console.warn("end of an UNKNOWN touch",s);continue}const r=this.activeTouches[s.identifier],a=this.newGestureEvent(ln.Change,r.initialTarget);a.translationX=s.pageX-Kl(r.rollingPageX),a.translationY=s.pageY-Kl(r.rollingPageY),a.pageX=s.pageX,a.pageY=s.pageY,this.dispatchEvent(a),r.rollingPageX.length>3&&(r.rollingPageX.shift(),r.rollingPageY.shift(),r.rollingTimestamps.shift()),r.rollingPageX.push(s.pageX),r.rollingPageY.push(s.pageY),r.rollingTimestamps.push(t)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}}rn.SCROLL_FRICTION=-.005;rn.HOLD_DELAY=700;rn.CLEAR_TAP_COUNT_TIME=400;_De([fs],rn,"isTouchDevice",null);let Rl=class extends J{onclick(e,t){this._register(oe(e,ke.CLICK,i=>t(new Wc(ft(e),i))))}onmousedown(e,t){this._register(oe(e,ke.MOUSE_DOWN,i=>t(new Wc(ft(e),i))))}onmouseover(e,t){this._register(oe(e,ke.MOUSE_OVER,i=>t(new Wc(ft(e),i))))}onmouseleave(e,t){this._register(oe(e,ke.MOUSE_LEAVE,i=>t(new Wc(ft(e),i))))}onkeydown(e,t){this._register(oe(e,ke.KEY_DOWN,i=>t(new _n(i))))}onkeyup(e,t){this._register(oe(e,ke.KEY_UP,i=>t(new _n(i))))}oninput(e,t){this._register(oe(e,ke.INPUT,t))}onblur(e,t){this._register(oe(e,ke.BLUR,t))}onfocus(e,t){this._register(oe(e,ke.FOCUS,t))}ignoreGesture(e){return rn.ignoreTarget(e)}};const g1=11;class vDe extends Rl{constructor(e){super(),this._onActivate=e.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=e.bgWidth+"px",this.bgDomNode.style.height=e.bgHeight+"px",typeof e.top<"u"&&(this.bgDomNode.style.top="0px"),typeof e.left<"u"&&(this.bgDomNode.style.left="0px"),typeof e.bottom<"u"&&(this.bgDomNode.style.bottom="0px"),typeof e.right<"u"&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=e.className,this.domNode.classList.add(...pt.asClassNameArray(e.icon)),this.domNode.style.position="absolute",this.domNode.style.width=g1+"px",this.domNode.style.height=g1+"px",typeof e.top<"u"&&(this.domNode.style.top=e.top+"px"),typeof e.left<"u"&&(this.domNode.style.left=e.left+"px"),typeof e.bottom<"u"&&(this.domNode.style.bottom=e.bottom+"px"),typeof e.right<"u"&&(this.domNode.style.right=e.right+"px"),this._pointerMoveMonitor=this._register(new Q1),this._register(ss(this.bgDomNode,ke.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._register(ss(this.domNode,ke.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._pointerdownRepeatTimer=this._register(new GV),this._pointerdownScheduleRepeatTimer=this._register(new Yc)}_arrowPointerDown(e){if(!e.target||!(e.target instanceof Element))return;const t=()=>{this._pointerdownRepeatTimer.cancelAndSet(()=>this._onActivate(),1e3/24,ft(e))};this._onActivate(),this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancelAndSet(t,200),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,i=>{},()=>{this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancel()}),e.preventDefault()}}class bDe extends J{constructor(e,t,i){super(),this._visibility=e,this._visibleClassName=t,this._invisibleClassName=i,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new Yc)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this._updateShouldBeVisible())}setShouldBeVisible(e){this._rawShouldBeVisible=e,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility===2?!1:this._visibility===3?!0:this._rawShouldBeVisible}_updateShouldBeVisible(){const e=this._applyVisibilitySetting();this._shouldBeVisible!==e&&(this._shouldBeVisible=e,this.ensureVisibility())}setIsNeeded(e){this._isNeeded!==e&&(this._isNeeded=e,this.ensureVisibility())}setDomNode(e){this._domNode=e,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{var e;(e=this._domNode)===null||e===void 0||e.setClassName(this._visibleClassName)},0))}_hide(e){var t;this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,(t=this._domNode)===null||t===void 0||t.setClassName(this._invisibleClassName+(e?" fade":"")))}}const CDe=140;class Kne extends Rl{constructor(e){super(),this._lazyRender=e.lazyRender,this._host=e.host,this._scrollable=e.scrollable,this._scrollByPage=e.scrollByPage,this._scrollbarState=e.scrollbarState,this._visibilityController=this._register(new bDe(e.visibility,"visible scrollbar "+e.extraScrollbarClassName,"invisible scrollbar "+e.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._pointerMoveMonitor=this._register(new Q1),this._shouldRender=!0,this.domNode=ki(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this._register(oe(this.domNode.domNode,ke.POINTER_DOWN,t=>this._domNodePointerDown(t)))}_createArrow(e){const t=this._register(new vDe(e));this.domNode.domNode.appendChild(t.bgDomNode),this.domNode.domNode.appendChild(t.domNode)}_createSlider(e,t,i,n){this.slider=ki(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(e),this.slider.setLeft(t),typeof i=="number"&&this.slider.setWidth(i),typeof n=="number"&&this.slider.setHeight(n),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this._register(oe(this.slider.domNode,ke.POINTER_DOWN,s=>{s.button===0&&(s.preventDefault(),this._sliderPointerDown(s))})),this.onclick(this.slider.domNode,s=>{s.leftButton&&s.stopPropagation()})}_onElementSize(e){return this._scrollbarState.setVisibleSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(e){return this._scrollbarState.setScrollSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(e){return this._scrollbarState.setScrollPosition(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodePointerDown(e){e.target===this.domNode.domNode&&this._onPointerDown(e)}delegatePointerDown(e){const t=this.domNode.domNode.getClientRects()[0].top,i=t+this._scrollbarState.getSliderPosition(),n=t+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),s=this._sliderPointerPosition(e);i<=s&&s<=n?e.button===0&&(e.preventDefault(),this._sliderPointerDown(e)):this._onPointerDown(e)}_onPointerDown(e){let t,i;if(e.target===this.domNode.domNode&&typeof e.offsetX=="number"&&typeof e.offsetY=="number")t=e.offsetX,i=e.offsetY;else{const s=ws(this.domNode.domNode);t=e.pageX-s.left,i=e.pageY-s.top}const n=this._pointerDownRelativePosition(t,i);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(n):this._scrollbarState.getDesiredScrollPositionFromOffset(n)),e.button===0&&(e.preventDefault(),this._sliderPointerDown(e))}_sliderPointerDown(e){if(!e.target||!(e.target instanceof Element))return;const t=this._sliderPointerPosition(e),i=this._sliderOrthogonalPointerPosition(e),n=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,s=>{const r=this._sliderOrthogonalPointerPosition(s),a=Math.abs(r-i);if(Mo&&a>CDe){this._setDesiredScrollPositionNow(n.getScrollPosition());return}const c=this._sliderPointerPosition(s)-t;this._setDesiredScrollPositionNow(n.getDesiredScrollPositionFromDelta(c))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd()}),this._host.onDragStart()}_setDesiredScrollPositionNow(e){const t={};this.writeScrollPosition(t,e),this._scrollable.setScrollPositionNow(t)}updateScrollbarSize(e){this._updateScrollbarSize(e),this._scrollbarState.setScrollbarSize(e),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}}const wDe=20;class p1{constructor(e,t,i,n,s,r){this._scrollbarSize=Math.round(t),this._oppositeScrollbarSize=Math.round(i),this._arrowSize=Math.round(e),this._visibleSize=n,this._scrollSize=s,this._scrollPosition=r,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new p1(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(e){const t=Math.round(e);return this._visibleSize!==t?(this._visibleSize=t,this._refreshComputedValues(),!0):!1}setScrollSize(e){const t=Math.round(e);return this._scrollSize!==t?(this._scrollSize=t,this._refreshComputedValues(),!0):!1}setScrollPosition(e){const t=Math.round(e);return this._scrollPosition!==t?(this._scrollPosition=t,this._refreshComputedValues(),!0):!1}setScrollbarSize(e){this._scrollbarSize=Math.round(e)}setOppositeScrollbarSize(e){this._oppositeScrollbarSize=Math.round(e)}static _computeValues(e,t,i,n,s){const r=Math.max(0,i-e),a=Math.max(0,r-2*t),l=n>0&&n>i;if(!l)return{computedAvailableSize:Math.round(r),computedIsNeeded:l,computedSliderSize:Math.round(a),computedSliderRatio:0,computedSliderPosition:0};const c=Math.round(Math.max(wDe,Math.floor(i*a/n))),u=(a-c)/(n-i),f=s*u;return{computedAvailableSize:Math.round(r),computedIsNeeded:l,computedSliderSize:Math.round(c),computedSliderRatio:u,computedSliderPosition:Math.round(f)}}_refreshComputedValues(){const e=p1._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=e.computedAvailableSize,this._computedIsNeeded=e.computedIsNeeded,this._computedSliderSize=e.computedSliderSize,this._computedSliderRatio=e.computedSliderRatio,this._computedSliderPosition=e.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize-this._computedSliderSize/2;return Math.round(t/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize;let i=this._scrollPosition;return t<this._computedSliderPosition?i-=this._visibleSize:i+=this._visibleSize,i}getDesiredScrollPositionFromDelta(e){if(!this._computedIsNeeded)return 0;const t=this._computedSliderPosition+e;return Math.round(t/this._computedSliderRatio)}}class yDe extends Kne{constructor(e,t,i){const n=e.getScrollDimensions(),s=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:i,scrollbarState:new p1(t.horizontalHasArrows?t.arrowSize:0,t.horizontal===2?0:t.horizontalScrollbarSize,t.vertical===2?0:t.verticalScrollbarSize,n.width,n.scrollWidth,s.scrollLeft),visibility:t.horizontal,extraScrollbarClassName:"horizontal",scrollable:e,scrollByPage:t.scrollByPage}),t.horizontalHasArrows){const r=(t.arrowSize-g1)/2,a=(t.horizontalScrollbarSize-g1)/2;this._createArrow({className:"scra",icon:Ee.scrollbarButtonLeft,top:a,left:r,bottom:void 0,right:void 0,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new Tv(null,1,0))}),this._createArrow({className:"scra",icon:Ee.scrollbarButtonRight,top:a,left:void 0,bottom:void 0,right:r,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new Tv(null,-1,0))})}this._createSlider(Math.floor((t.horizontalScrollbarSize-t.horizontalSliderSize)/2),0,void 0,t.horizontalSliderSize)}_updateSlider(e,t){this.slider.setWidth(e),this.slider.setLeft(t)}_renderDomNode(e,t){this.domNode.setWidth(e),this.domNode.setHeight(t),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(e.width)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return e}_sliderPointerPosition(e){return e.pageX}_sliderOrthogonalPointerPosition(e){return e.pageY}_updateScrollbarSize(e){this.slider.setHeight(e)}writeScrollPosition(e,t){e.scrollLeft=t}updateOptions(e){this.updateScrollbarSize(e.horizontal===2?0:e.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._visibilityController.setVisibility(e.horizontal),this._scrollByPage=e.scrollByPage}}class SDe extends Kne{constructor(e,t,i){const n=e.getScrollDimensions(),s=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:i,scrollbarState:new p1(t.verticalHasArrows?t.arrowSize:0,t.vertical===2?0:t.verticalScrollbarSize,0,n.height,n.scrollHeight,s.scrollTop),visibility:t.vertical,extraScrollbarClassName:"vertical",scrollable:e,scrollByPage:t.scrollByPage}),t.verticalHasArrows){const r=(t.arrowSize-g1)/2,a=(t.verticalScrollbarSize-g1)/2;this._createArrow({className:"scra",icon:Ee.scrollbarButtonUp,top:r,left:a,bottom:void 0,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new Tv(null,0,1))}),this._createArrow({className:"scra",icon:Ee.scrollbarButtonDown,top:void 0,left:a,bottom:r,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new Tv(null,0,-1))})}this._createSlider(0,Math.floor((t.verticalScrollbarSize-t.verticalSliderSize)/2),t.verticalSliderSize,void 0)}_updateSlider(e,t){this.slider.setHeight(e),this.slider.setTop(t)}_renderDomNode(e,t){this.domNode.setWidth(t),this.domNode.setHeight(e),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(e.height)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return t}_sliderPointerPosition(e){return e.pageY}_sliderOrthogonalPointerPosition(e){return e.pageX}_updateScrollbarSize(e){this.slider.setWidth(e)}writeScrollPosition(e,t){e.scrollTop=t}updateOptions(e){this.updateScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(e.vertical),this._scrollByPage=e.scrollByPage}}class NR{constructor(e,t,i,n,s,r,a){this._forceIntegerValues=e,this._scrollStateBrand=void 0,this._forceIntegerValues&&(t=t|0,i=i|0,n=n|0,s=s|0,r=r|0,a=a|0),this.rawScrollLeft=n,this.rawScrollTop=a,t<0&&(t=0),n+t>i&&(n=i-t),n<0&&(n=0),s<0&&(s=0),a+s>r&&(a=r-s),a<0&&(a=0),this.width=t,this.scrollWidth=i,this.scrollLeft=n,this.height=s,this.scrollHeight=r,this.scrollTop=a}equals(e){return this.rawScrollLeft===e.rawScrollLeft&&this.rawScrollTop===e.rawScrollTop&&this.width===e.width&&this.scrollWidth===e.scrollWidth&&this.scrollLeft===e.scrollLeft&&this.height===e.height&&this.scrollHeight===e.scrollHeight&&this.scrollTop===e.scrollTop}withScrollDimensions(e,t){return new NR(this._forceIntegerValues,typeof e.width<"u"?e.width:this.width,typeof e.scrollWidth<"u"?e.scrollWidth:this.scrollWidth,t?this.rawScrollLeft:this.scrollLeft,typeof e.height<"u"?e.height:this.height,typeof e.scrollHeight<"u"?e.scrollHeight:this.scrollHeight,t?this.rawScrollTop:this.scrollTop)}withScrollPosition(e){return new NR(this._forceIntegerValues,this.width,this.scrollWidth,typeof e.scrollLeft<"u"?e.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,typeof e.scrollTop<"u"?e.scrollTop:this.rawScrollTop)}createScrollEvent(e,t){const i=this.width!==e.width,n=this.scrollWidth!==e.scrollWidth,s=this.scrollLeft!==e.scrollLeft,r=this.height!==e.height,a=this.scrollHeight!==e.scrollHeight,l=this.scrollTop!==e.scrollTop;return{inSmoothScrolling:t,oldWidth:e.width,oldScrollWidth:e.scrollWidth,oldScrollLeft:e.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:e.height,oldScrollHeight:e.scrollHeight,oldScrollTop:e.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:i,scrollWidthChanged:n,scrollLeftChanged:s,heightChanged:r,scrollHeightChanged:a,scrollTopChanged:l}}}class X1 extends J{constructor(e){super(),this._scrollableBrand=void 0,this._onScroll=this._register(new Y),this.onScroll=this._onScroll.event,this._smoothScrollDuration=e.smoothScrollDuration,this._scheduleAtNextAnimationFrame=e.scheduleAtNextAnimationFrame,this._state=new NR(e.forceIntegerValues,0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(e){this._smoothScrollDuration=e}validateScrollPosition(e){return this._state.withScrollPosition(e)}getScrollDimensions(){return this._state}setScrollDimensions(e,t){var i;const n=this._state.withScrollDimensions(e,t);this._setState(n,!!this._smoothScrolling),(i=this._smoothScrolling)===null||i===void 0||i.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(e){const t=this._state.withScrollPosition(e);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(t,!1)}setScrollPositionSmooth(e,t){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(e);if(this._smoothScrolling){e={scrollLeft:typeof e.scrollLeft>"u"?this._smoothScrolling.to.scrollLeft:e.scrollLeft,scrollTop:typeof e.scrollTop>"u"?this._smoothScrolling.to.scrollTop:e.scrollTop};const i=this._state.withScrollPosition(e);if(this._smoothScrolling.to.scrollLeft===i.scrollLeft&&this._smoothScrolling.to.scrollTop===i.scrollTop)return;let n;t?n=new bx(this._smoothScrolling.from,i,this._smoothScrolling.startTime,this._smoothScrolling.duration):n=this._smoothScrolling.combine(this._state,i,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=n}else{const i=this._state.withScrollPosition(e);this._smoothScrolling=bx.start(this._state,i,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}hasPendingScrollAnimation(){return!!this._smoothScrolling}_performSmoothScrolling(){if(!this._smoothScrolling)return;const e=this._smoothScrolling.tick(),t=this._state.withScrollPosition(e);if(this._setState(t,!0),!!this._smoothScrolling){if(e.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}}_setState(e,t){const i=this._state;i.equals(e)||(this._state=e,this._onScroll.fire(this._state.createScrollEvent(i,t)))}}class qZ{constructor(e,t,i){this.scrollLeft=e,this.scrollTop=t,this.isDone=i}}function p3(o,e){const t=e-o;return function(i){return o+t*DDe(i)}}function LDe(o,e,t){return function(i){return i<t?o(i/t):e((i-t)/(1-t))}}class bx{constructor(e,t,i,n){this.from=e,this.to=t,this.duration=n,this.startTime=i,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(e,t,i){if(Math.abs(e-t)>2.5*i){let s,r;return e<t?(s=e+.75*i,r=t-.75*i):(s=e-.75*i,r=t+.75*i),LDe(p3(e,s),p3(r,t),.33)}return p3(e,t)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(e){this.to=e.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(e){const t=(e-this.startTime)/this.duration;if(t<1){const i=this.scrollLeft(t),n=this.scrollTop(t);return new qZ(i,n,!1)}return new qZ(this.to.scrollLeft,this.to.scrollTop,!0)}combine(e,t,i){return bx.start(e,t,i)}static start(e,t,i){i=i+10;const n=Date.now()-10;return new bx(e,t,n,i)}}function xDe(o){return Math.pow(o,3)}function DDe(o){return 1-xDe(1-o)}const kDe=500,GZ=50;class EDe{constructor(e,t,i){this.timestamp=e,this.deltaX=t,this.deltaY=i,this.score=0}}class RR{constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let e=1,t=0,i=1,n=this._rear;do{const s=n===this._front?e:Math.pow(2,-i);if(e-=s,t+=this._memory[n].score*s,n===this._front)break;n=(this._capacity+n-1)%this._capacity,i++}while(!0);return t<=.5}acceptStandardWheelEvent(e){if(OD){const t=ft(e.browserEvent),i=zCe(t);this.accept(Date.now(),e.deltaX*i,e.deltaY*i)}else this.accept(Date.now(),e.deltaX,e.deltaY)}accept(e,t,i){let n=null;const s=new EDe(e,t,i);this._front===-1&&this._rear===-1?(this._memory[0]=s,this._front=0,this._rear=0):(n=this._memory[this._rear],this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=s),s.score=this._computeScore(s,n)}_computeScore(e,t){if(Math.abs(e.deltaX)>0&&Math.abs(e.deltaY)>0)return 1;let i=.5;if((!this._isAlmostInt(e.deltaX)||!this._isAlmostInt(e.deltaY))&&(i+=.25),t){const n=Math.abs(e.deltaX),s=Math.abs(e.deltaY),r=Math.abs(t.deltaX),a=Math.abs(t.deltaY),l=Math.max(Math.min(n,r),1),c=Math.max(Math.min(s,a),1),u=Math.max(n,r),f=Math.max(s,a);u%l===0&&f%c===0&&(i-=.5)}return Math.min(Math.max(i,0),1)}_isAlmostInt(e){return Math.abs(Math.round(e)-e)<.01}}RR.INSTANCE=new RR;class LH extends Rl{get options(){return this._options}constructor(e,t,i){super(),this._onScroll=this._register(new Y),this.onScroll=this._onScroll.event,this._onWillScroll=this._register(new Y),e.style.overflow="hidden",this._options=IDe(t),this._scrollable=i,this._register(this._scrollable.onScroll(s=>{this._onWillScroll.fire(s),this._onDidScroll(s),this._onScroll.fire(s)}));const n={onMouseWheel:s=>this._onMouseWheel(s),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new SDe(this._scrollable,this._options,n)),this._horizontalScrollbar=this._register(new yDe(this._scrollable,this._options,n)),this._domNode=document.createElement("div"),this._domNode.className="monaco-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.style.overflow="hidden",this._domNode.appendChild(e),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=ki(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=ki(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=ki(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,s=>this._onMouseOver(s)),this.onmouseleave(this._listenOnDomNode,s=>this._onMouseLeave(s)),this._hideTimeout=this._register(new Yc),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}dispose(){this._mouseWheelToDispose=cn(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarPointerDown(e){this._verticalScrollbar.delegatePointerDown(e)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(e){this._scrollable.setScrollDimensions(e,!1)}updateClassName(e){this._options.className=e,Kt&&(this._options.className+=" mac"),this._domNode.className="monaco-scrollable-element "+this._options.className}updateOptions(e){typeof e.handleMouseWheel<"u"&&(this._options.handleMouseWheel=e.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),typeof e.mouseWheelScrollSensitivity<"u"&&(this._options.mouseWheelScrollSensitivity=e.mouseWheelScrollSensitivity),typeof e.fastScrollSensitivity<"u"&&(this._options.fastScrollSensitivity=e.fastScrollSensitivity),typeof e.scrollPredominantAxis<"u"&&(this._options.scrollPredominantAxis=e.scrollPredominantAxis),typeof e.horizontal<"u"&&(this._options.horizontal=e.horizontal),typeof e.vertical<"u"&&(this._options.vertical=e.vertical),typeof e.horizontalScrollbarSize<"u"&&(this._options.horizontalScrollbarSize=e.horizontalScrollbarSize),typeof e.verticalScrollbarSize<"u"&&(this._options.verticalScrollbarSize=e.verticalScrollbarSize),typeof e.scrollByPage<"u"&&(this._options.scrollByPage=e.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}delegateScrollFromMouseWheelEvent(e){this._onMouseWheel(new Tv(e))}_setListeningToMouseWheel(e){if(this._mouseWheelToDispose.length>0!==e&&(this._mouseWheelToDispose=cn(this._mouseWheelToDispose),e)){const i=n=>{this._onMouseWheel(new Tv(n))};this._mouseWheelToDispose.push(oe(this._listenOnDomNode,ke.MOUSE_WHEEL,i,{passive:!1}))}}_onMouseWheel(e){var t;if(!((t=e.browserEvent)===null||t===void 0)&&t.defaultPrevented)return;const i=RR.INSTANCE;i.acceptStandardWheelEvent(e);let n=!1;if(e.deltaY||e.deltaX){let r=e.deltaY*this._options.mouseWheelScrollSensitivity,a=e.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(this._options.scrollYToX&&a+r===0?a=r=0:Math.abs(r)>=Math.abs(a)?a=0:r=0),this._options.flipAxes&&([r,a]=[a,r]);const l=!Kt&&e.browserEvent&&e.browserEvent.shiftKey;(this._options.scrollYToX||l)&&!a&&(a=r,r=0),e.browserEvent&&e.browserEvent.altKey&&(a=a*this._options.fastScrollSensitivity,r=r*this._options.fastScrollSensitivity);const c=this._scrollable.getFutureScrollPosition();let u={};if(r){const f=GZ*r,g=c.scrollTop-(f<0?Math.floor(f):Math.ceil(f));this._verticalScrollbar.writeScrollPosition(u,g)}if(a){const f=GZ*a,g=c.scrollLeft-(f<0?Math.floor(f):Math.ceil(f));this._horizontalScrollbar.writeScrollPosition(u,g)}u=this._scrollable.validateScrollPosition(u),(c.scrollLeft!==u.scrollLeft||c.scrollTop!==u.scrollTop)&&(this._options.mouseWheelSmoothScroll&&i.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(u):this._scrollable.setScrollPositionNow(u),n=!0)}let s=n;!s&&this._options.alwaysConsumeMouseWheel&&(s=!0),!s&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(s=!0),s&&(e.preventDefault(),e.stopPropagation())}_onDidScroll(e){this._shouldRender=this._horizontalScrollbar.onDidScroll(e)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(e)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){const e=this._scrollable.getCurrentScrollPosition(),t=e.scrollTop>0,i=e.scrollLeft>0,n=i?" left":"",s=t?" top":"",r=i||t?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${n}`),this._topShadowDomNode.setClassName(`shadow${s}`),this._topLeftShadowDomNode.setClassName(`shadow${r}${s}${n}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseLeave(e){this._mouseIsOver=!1,this._hide()}_onMouseOver(e){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(()=>this._hide(),kDe)}}class qne extends LH{constructor(e,t){t=t||{},t.mouseWheelSmoothScroll=!1;const i=new X1({forceIntegerValues:!0,smoothScrollDuration:0,scheduleAtNextAnimationFrame:n=>ja(ft(e),n)});super(e,t,i),this._register(i)}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}}class HA extends LH{constructor(e,t,i){super(e,t,i)}setScrollPosition(e){e.reuseAnimation?this._scrollable.setScrollPositionSmooth(e,e.reuseAnimation):this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}}class KD extends LH{constructor(e,t){t=t||{},t.mouseWheelSmoothScroll=!1;const i=new X1({forceIntegerValues:!1,smoothScrollDuration:0,scheduleAtNextAnimationFrame:n=>ja(ft(e),n)});super(e,t,i),this._register(i),this._element=e,this._register(this.onScroll(n=>{n.scrollTopChanged&&(this._element.scrollTop=n.scrollTop),n.scrollLeftChanged&&(this._element.scrollLeft=n.scrollLeft)})),this.scanDomNode()}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}scanDomNode(){this.setScrollDimensions({width:this._element.clientWidth,scrollWidth:this._element.scrollWidth,height:this._element.clientHeight,scrollHeight:this._element.scrollHeight}),this.setScrollPosition({scrollLeft:this._element.scrollLeft,scrollTop:this._element.scrollTop})}}function IDe(o){const e={lazyRender:typeof o.lazyRender<"u"?o.lazyRender:!1,className:typeof o.className<"u"?o.className:"",useShadows:typeof o.useShadows<"u"?o.useShadows:!0,handleMouseWheel:typeof o.handleMouseWheel<"u"?o.handleMouseWheel:!0,flipAxes:typeof o.flipAxes<"u"?o.flipAxes:!1,consumeMouseWheelIfScrollbarIsNeeded:typeof o.consumeMouseWheelIfScrollbarIsNeeded<"u"?o.consumeMouseWheelIfScrollbarIsNeeded:!1,alwaysConsumeMouseWheel:typeof o.alwaysConsumeMouseWheel<"u"?o.alwaysConsumeMouseWheel:!1,scrollYToX:typeof o.scrollYToX<"u"?o.scrollYToX:!1,mouseWheelScrollSensitivity:typeof o.mouseWheelScrollSensitivity<"u"?o.mouseWheelScrollSensitivity:1,fastScrollSensitivity:typeof o.fastScrollSensitivity<"u"?o.fastScrollSensitivity:5,scrollPredominantAxis:typeof o.scrollPredominantAxis<"u"?o.scrollPredominantAxis:!0,mouseWheelSmoothScroll:typeof o.mouseWheelSmoothScroll<"u"?o.mouseWheelSmoothScroll:!0,arrowSize:typeof o.arrowSize<"u"?o.arrowSize:11,listenOnDomNode:typeof o.listenOnDomNode<"u"?o.listenOnDomNode:null,horizontal:typeof o.horizontal<"u"?o.horizontal:1,horizontalScrollbarSize:typeof o.horizontalScrollbarSize<"u"?o.horizontalScrollbarSize:10,horizontalSliderSize:typeof o.horizontalSliderSize<"u"?o.horizontalSliderSize:0,horizontalHasArrows:typeof o.horizontalHasArrows<"u"?o.horizontalHasArrows:!1,vertical:typeof o.vertical<"u"?o.vertical:1,verticalScrollbarSize:typeof o.verticalScrollbarSize<"u"?o.verticalScrollbarSize:10,verticalHasArrows:typeof o.verticalHasArrows<"u"?o.verticalHasArrows:!1,verticalSliderSize:typeof o.verticalSliderSize<"u"?o.verticalSliderSize:0,scrollByPage:typeof o.scrollByPage<"u"?o.scrollByPage:!1};return e.horizontalSliderSize=typeof o.horizontalSliderSize<"u"?o.horizontalSliderSize:e.horizontalScrollbarSize,e.verticalSliderSize=typeof o.verticalSliderSize<"u"?o.verticalSliderSize:e.verticalScrollbarSize,Kt&&(e.className+=" mac"),e}class xH extends jD{constructor(e,t,i){super(),this._mouseLeaveMonitor=null,this._context=e,this.viewController=t,this.viewHelper=i,this.mouseTargetFactory=new cr(this._context,i),this._mouseDownOperation=this._register(new TDe(this._context,this.viewController,this.viewHelper,this.mouseTargetFactory,(r,a)=>this._createMouseTarget(r,a),r=>this._getMouseColumn(r))),this.lastMouseLeaveTime=-1,this._height=this._context.configuration.options.get(145).height;const n=new eDe(this.viewHelper.viewDomNode);this._register(n.onContextMenu(this.viewHelper.viewDomNode,r=>this._onContextMenu(r,!0))),this._register(n.onMouseMove(this.viewHelper.viewDomNode,r=>{this._onMouseMove(r),this._mouseLeaveMonitor||(this._mouseLeaveMonitor=oe(this.viewHelper.viewDomNode.ownerDocument,"mousemove",a=>{this.viewHelper.viewDomNode.contains(a.target)||this._onMouseLeave(new gm(a,!1,this.viewHelper.viewDomNode))}))})),this._register(n.onMouseUp(this.viewHelper.viewDomNode,r=>this._onMouseUp(r))),this._register(n.onMouseLeave(this.viewHelper.viewDomNode,r=>this._onMouseLeave(r)));let s=0;this._register(n.onPointerDown(this.viewHelper.viewDomNode,(r,a)=>{s=a})),this._register(oe(this.viewHelper.viewDomNode,ke.POINTER_UP,r=>{this._mouseDownOperation.onPointerUp()})),this._register(n.onMouseDown(this.viewHelper.viewDomNode,r=>this._onMouseDown(r,s))),this._setupMouseWheelZoomListener(),this._context.addEventHandler(this)}_setupMouseWheelZoomListener(){const e=RR.INSTANCE;let t=0,i=Xl.getZoomLevel(),n=!1,s=0;const r=l=>{if(this.viewController.emitMouseWheel(l),!this._context.configuration.options.get(76))return;const c=new Tv(l);if(e.acceptStandardWheelEvent(c),e.isPhysicalMouseWheel()){if(a(l)){const u=Xl.getZoomLevel(),f=c.deltaY>0?1:-1;Xl.setZoomLevel(u+f),c.preventDefault(),c.stopPropagation()}}else Date.now()-t>50&&(i=Xl.getZoomLevel(),n=a(l),s=0),t=Date.now(),s+=c.deltaY,n&&(Xl.setZoomLevel(i+s/5),c.preventDefault(),c.stopPropagation())};this._register(oe(this.viewHelper.viewDomNode,ke.MOUSE_WHEEL,r,{capture:!0,passive:!1}));function a(l){return Kt?(l.metaKey||l.ctrlKey)&&!l.shiftKey&&!l.altKey:l.ctrlKey&&!l.metaKey&&!l.shiftKey&&!l.altKey}}dispose(){this._context.removeEventHandler(this),this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),super.dispose()}onConfigurationChanged(e){if(e.hasChanged(145)){const t=this._context.configuration.options.get(145).height;this._height!==t&&(this._height=t,this._mouseDownOperation.onHeightChanged())}return!1}onCursorStateChanged(e){return this._mouseDownOperation.onCursorStateChanged(e),!1}onFocusChanged(e){return!1}getTargetAtClientPoint(e,t){const n=new zne(e,t).toPageCoordinates(ft(this.viewHelper.viewDomNode)),s=wH(this.viewHelper.viewDomNode);if(n.y<s.y||n.y>s.y+s.height||n.x<s.x||n.x>s.x+s.width)return null;const r=yH(this.viewHelper.viewDomNode,s,n);return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),s,n,r,null)}_createMouseTarget(e,t){let i=e.target;if(!this.viewHelper.viewDomNode.contains(i)){const n=Nv(this.viewHelper.viewDomNode);n&&(i=n.elementsFromPoint(e.posx,e.posy).find(s=>this.viewHelper.viewDomNode.contains(s)))}return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),e.editorPos,e.pos,e.relativePos,t?i:null)}_getMouseColumn(e){return this.mouseTargetFactory.getMouseColumn(e.relativePos)}_onContextMenu(e,t){this.viewController.emitContextMenu({event:e,target:this._createMouseTarget(e,t)})}_onMouseMove(e){this.mouseTargetFactory.mouseTargetIsWidget(e)||e.preventDefault(),!(this._mouseDownOperation.isActive()||e.timestamp<this.lastMouseLeaveTime)&&this.viewController.emitMouseMove({event:e,target:this._createMouseTarget(e,!0)})}_onMouseLeave(e){this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),this.lastMouseLeaveTime=new Date().getTime(),this.viewController.emitMouseLeave({event:e,target:null})}_onMouseUp(e){this.viewController.emitMouseUp({event:e,target:this._createMouseTarget(e,!0)})}_onMouseDown(e,t){const i=this._createMouseTarget(e,!0),n=i.type===6||i.type===7,s=i.type===2||i.type===3||i.type===4,r=i.type===3,a=this._context.configuration.options.get(109),l=i.type===8||i.type===5,c=i.type===9;let u=e.leftButton||e.middleButton;Kt&&e.leftButton&&e.ctrlKey&&(u=!1);const f=()=>{e.preventDefault(),this.viewHelper.focusTextArea()};if(u&&(n||r&&a))f(),this._mouseDownOperation.start(i.type,e,t);else if(s)e.preventDefault();else if(l){const g=i.detail;u&&this.viewHelper.shouldSuppressMouseDownOnViewZone(g.viewZoneId)&&(f(),this._mouseDownOperation.start(i.type,e,t),e.preventDefault())}else c&&this.viewHelper.shouldSuppressMouseDownOnWidget(i.detail)&&(f(),e.preventDefault());this.viewController.emitMouseDown({event:e,target:i})}}class TDe extends J{constructor(e,t,i,n,s,r){super(),this._context=e,this._viewController=t,this._viewHelper=i,this._mouseTargetFactory=n,this._createMouseTarget=s,this._getMouseColumn=r,this._mouseMoveMonitor=this._register(new iDe(this._viewHelper.viewDomNode)),this._topBottomDragScrolling=this._register(new NDe(this._context,this._viewHelper,this._mouseTargetFactory,(a,l,c)=>this._dispatchMouse(a,l,c))),this._mouseState=new zA,this._currentSelection=new Xe(1,1,1,1),this._isActive=!1,this._lastMouseEvent=null}dispose(){super.dispose()}isActive(){return this._isActive}_onMouseDownThenMove(e){this._lastMouseEvent=e,this._mouseState.setModifiers(e);const t=this._findMousePosition(e,!1);t&&(this._mouseState.isDragAndDrop?this._viewController.emitMouseDrag({event:e,target:t}):t.type===13&&(t.outsidePosition==="above"||t.outsidePosition==="below")?this._topBottomDragScrolling.start(t,e):(this._topBottomDragScrolling.stop(),this._dispatchMouse(t,!0,1)))}start(e,t,i){this._lastMouseEvent=t,this._mouseState.setStartedOnLineNumbers(e===3),this._mouseState.setStartButtons(t),this._mouseState.setModifiers(t);const n=this._findMousePosition(t,!0);if(!n||!n.position)return;this._mouseState.trySetCount(t.detail,n.position),t.detail=this._mouseState.count;const s=this._context.configuration.options;if(!s.get(91)&&s.get(35)&&!s.get(22)&&!this._mouseState.altKey&&t.detail<2&&!this._isActive&&!this._currentSelection.isEmpty()&&n.type===6&&n.position&&this._currentSelection.containsPosition(n.position)){this._mouseState.isDragAndDrop=!0,this._isActive=!0,this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,i,t.buttons,r=>this._onMouseDownThenMove(r),r=>{const a=this._findMousePosition(this._lastMouseEvent,!1);pp(r)?this._viewController.emitMouseDropCanceled():this._viewController.emitMouseDrop({event:this._lastMouseEvent,target:a?this._createMouseTarget(this._lastMouseEvent,!0):null}),this._stop()});return}this._mouseState.isDragAndDrop=!1,this._dispatchMouse(n,t.shiftKey,1),this._isActive||(this._isActive=!0,this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,i,t.buttons,r=>this._onMouseDownThenMove(r),()=>this._stop()))}_stop(){this._isActive=!1,this._topBottomDragScrolling.stop()}onHeightChanged(){this._mouseMoveMonitor.stopMonitoring()}onPointerUp(){this._mouseMoveMonitor.stopMonitoring()}onCursorStateChanged(e){this._currentSelection=e.selections[0]}_getPositionOutsideEditor(e){const t=e.editorPos,i=this._context.viewModel,n=this._context.viewLayout,s=this._getMouseColumn(e);if(e.posy<t.y){const a=t.y-e.posy,l=Math.max(n.getCurrentScrollTop()-a,0),c=f1.getZoneAtCoord(this._context,l);if(c){const f=this._helpPositionJumpOverViewZone(c);if(f)return ur.createOutsideEditor(s,f,"above",a)}const u=n.getLineNumberAtVerticalOffset(l);return ur.createOutsideEditor(s,new Z(u,1),"above",a)}if(e.posy>t.y+t.height){const a=e.posy-t.y-t.height,l=n.getCurrentScrollTop()+e.relativePos.y,c=f1.getZoneAtCoord(this._context,l);if(c){const f=this._helpPositionJumpOverViewZone(c);if(f)return ur.createOutsideEditor(s,f,"below",a)}const u=n.getLineNumberAtVerticalOffset(l);return ur.createOutsideEditor(s,new Z(u,i.getLineMaxColumn(u)),"below",a)}const r=n.getLineNumberAtVerticalOffset(n.getCurrentScrollTop()+e.relativePos.y);if(e.posx<t.x){const a=t.x-e.posx;return ur.createOutsideEditor(s,new Z(r,1),"left",a)}if(e.posx>t.x+t.width){const a=e.posx-t.x-t.width;return ur.createOutsideEditor(s,new Z(r,i.getLineMaxColumn(r)),"right",a)}return null}_findMousePosition(e,t){const i=this._getPositionOutsideEditor(e);if(i)return i;const n=this._createMouseTarget(e,t);if(!n.position)return null;if(n.type===8||n.type===5){const r=this._helpPositionJumpOverViewZone(n.detail);if(r)return ur.createViewZone(n.type,n.element,n.mouseColumn,r,n.detail)}return n}_helpPositionJumpOverViewZone(e){const t=new Z(this._currentSelection.selectionStartLineNumber,this._currentSelection.selectionStartColumn),i=e.positionBefore,n=e.positionAfter;return i&&n?i.isBefore(t)?i:n:null}_dispatchMouse(e,t,i){e.position&&this._viewController.dispatchMouse({position:e.position,mouseColumn:e.mouseColumn,startedOnLineNumbers:this._mouseState.startedOnLineNumbers,revealType:i,inSelectionMode:t,mouseDownCount:this._mouseState.count,altKey:this._mouseState.altKey,ctrlKey:this._mouseState.ctrlKey,metaKey:this._mouseState.metaKey,shiftKey:this._mouseState.shiftKey,leftButton:this._mouseState.leftButton,middleButton:this._mouseState.middleButton,onInjectedText:e.type===6&&e.detail.injectedText!==null})}}class NDe extends J{constructor(e,t,i,n){super(),this._context=e,this._viewHelper=t,this._mouseTargetFactory=i,this._dispatchMouse=n,this._operation=null}dispose(){super.dispose(),this.stop()}start(e,t){this._operation?this._operation.setPosition(e,t):this._operation=new RDe(this._context,this._viewHelper,this._mouseTargetFactory,this._dispatchMouse,e,t)}stop(){this._operation&&(this._operation.dispose(),this._operation=null)}}class RDe extends J{constructor(e,t,i,n,s,r){super(),this._context=e,this._viewHelper=t,this._mouseTargetFactory=i,this._dispatchMouse=n,this._position=s,this._mouseEvent=r,this._lastTime=Date.now(),this._animationFrameDisposable=ja(ft(r.browserEvent),()=>this._execute())}dispose(){this._animationFrameDisposable.dispose(),super.dispose()}setPosition(e,t){this._position=e,this._mouseEvent=t}_tick(){const e=Date.now(),t=e-this._lastTime;return this._lastTime=e,t}_getScrollSpeed(){const e=this._context.configuration.options.get(67),t=this._context.configuration.options.get(145).height/e,i=this._position.outsideDistance/e;return i<=1.5?Math.max(30,t*(1+i)):i<=3?Math.max(60,t*(2+i)):Math.max(200,t*(7+i))}_execute(){const e=this._context.configuration.options.get(67),t=this._getScrollSpeed(),i=this._tick(),n=t*(i/1e3)*e,s=this._position.outsidePosition==="above"?-n:n;this._context.viewModel.viewLayout.deltaScrollNow(0,s),this._viewHelper.renderNow();const r=this._context.viewLayout.getLinesViewportData(),a=this._position.outsidePosition==="above"?r.startLineNumber:r.endLineNumber;let l;{const c=wH(this._viewHelper.viewDomNode),u=this._context.configuration.options.get(145).horizontalScrollbarHeight,f=new WA(this._mouseEvent.pos.x,c.y+c.height-u-.1),g=yH(this._viewHelper.viewDomNode,c,f);l=this._mouseTargetFactory.createMouseTarget(this._viewHelper.getLastRenderData(),c,f,g,null)}(!l.position||l.position.lineNumber!==a)&&(this._position.outsidePosition==="above"?l=ur.createOutsideEditor(this._position.mouseColumn,new Z(a,1),"above",this._position.outsideDistance):l=ur.createOutsideEditor(this._position.mouseColumn,new Z(a,this._context.viewModel.getLineMaxColumn(a)),"below",this._position.outsideDistance)),this._dispatchMouse(l,!0,2),this._animationFrameDisposable=ja(ft(l.element),()=>this._execute())}}class zA{get altKey(){return this._altKey}get ctrlKey(){return this._ctrlKey}get metaKey(){return this._metaKey}get shiftKey(){return this._shiftKey}get leftButton(){return this._leftButton}get middleButton(){return this._middleButton}get startedOnLineNumbers(){return this._startedOnLineNumbers}constructor(){this._altKey=!1,this._ctrlKey=!1,this._metaKey=!1,this._shiftKey=!1,this._leftButton=!1,this._middleButton=!1,this._startedOnLineNumbers=!1,this._lastMouseDownPosition=null,this._lastMouseDownPositionEqualCount=0,this._lastMouseDownCount=0,this._lastSetMouseDownCountTime=0,this.isDragAndDrop=!1}get count(){return this._lastMouseDownCount}setModifiers(e){this._altKey=e.altKey,this._ctrlKey=e.ctrlKey,this._metaKey=e.metaKey,this._shiftKey=e.shiftKey}setStartButtons(e){this._leftButton=e.leftButton,this._middleButton=e.middleButton}setStartedOnLineNumbers(e){this._startedOnLineNumbers=e}trySetCount(e,t){const i=new Date().getTime();i-this._lastSetMouseDownCountTime>zA.CLEAR_MOUSE_DOWN_COUNT_TIME&&(e=1),this._lastSetMouseDownCountTime=i,e>this._lastMouseDownCount+1&&(e=this._lastMouseDownCount+1),this._lastMouseDownPosition&&this._lastMouseDownPosition.equals(t)?this._lastMouseDownPositionEqualCount++:this._lastMouseDownPositionEqualCount=1,this._lastMouseDownPosition=t,this._lastMouseDownCount=Math.min(e,this._lastMouseDownPositionEqualCount)}}zA.CLEAR_MOUSE_DOWN_COUNT_TIME=400;class Xt{get event(){return this.emitter.event}constructor(e,t,i){const n=s=>this.emitter.fire(s);this.emitter=new Y({onWillAddFirstListener:()=>e.addEventListener(t,n,i),onDidRemoveLastListener:()=>e.removeEventListener(t,n,i)})}dispose(){this.emitter.dispose()}}class fo{constructor(e,t,i,n,s){this.value=e,this.selectionStart=t,this.selectionEnd=i,this.selection=n,this.newlineCountBeforeSelection=s}toString(){return`[ <${this.value}>, selectionStart: ${this.selectionStart}, selectionEnd: ${this.selectionEnd}]`}static readFromTextArea(e,t){const i=e.getValue(),n=e.getSelectionStart(),s=e.getSelectionEnd();let r;if(t){const a=i.substring(0,n),l=t.value.substring(0,t.selectionStart);a===l&&(r=t.newlineCountBeforeSelection)}return new fo(i,n,s,null,r)}collapseSelection(){return this.selectionStart===this.value.length?this:new fo(this.value,this.value.length,this.value.length,null,void 0)}writeToTextArea(e,t,i){t.setValue(e,this.value),i&&t.setSelectionRange(e,this.selectionStart,this.selectionEnd)}deduceEditorPosition(e){var t,i,n,s,r,a,l,c;if(e<=this.selectionStart){const g=this.value.substring(e,this.selectionStart);return this._finishDeduceEditorPosition((i=(t=this.selection)===null||t===void 0?void 0:t.getStartPosition())!==null&&i!==void 0?i:null,g,-1)}if(e>=this.selectionEnd){const g=this.value.substring(this.selectionEnd,e);return this._finishDeduceEditorPosition((s=(n=this.selection)===null||n===void 0?void 0:n.getEndPosition())!==null&&s!==void 0?s:null,g,1)}const u=this.value.substring(this.selectionStart,e);if(u.indexOf("")===-1)return this._finishDeduceEditorPosition((a=(r=this.selection)===null||r===void 0?void 0:r.getStartPosition())!==null&&a!==void 0?a:null,u,1);const f=this.value.substring(e,this.selectionEnd);return this._finishDeduceEditorPosition((c=(l=this.selection)===null||l===void 0?void 0:l.getEndPosition())!==null&&c!==void 0?c:null,f,-1)}_finishDeduceEditorPosition(e,t,i){let n=0,s=-1;for(;(s=t.indexOf(`
`,s+1))!==-1;)n++;return[e,i*t.length,n]}static deduceInput(e,t,i){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};const n=Math.min(am(e.value,t.value),e.selectionStart,t.selectionStart),s=Math.min(fR(e.value,t.value),e.value.length-e.selectionEnd,t.value.length-t.selectionEnd);e.value.substring(n,e.value.length-s);const r=t.value.substring(n,t.value.length-s),a=e.selectionStart-n,l=e.selectionEnd-n,c=t.selectionStart-n,u=t.selectionEnd-n;if(c===u){const g=e.selectionStart-n;return{text:r,replacePrevCharCnt:g,replaceNextCharCnt:0,positionDelta:0}}const f=l-a;return{text:r,replacePrevCharCnt:f,replaceNextCharCnt:0,positionDelta:0}}static deduceAndroidCompositionInput(e,t){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};if(e.value===t.value)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:t.selectionEnd-e.selectionEnd};const i=Math.min(am(e.value,t.value),e.selectionEnd),n=Math.min(fR(e.value,t.value),e.value.length-e.selectionEnd),s=e.value.substring(i,e.value.length-n),r=t.value.substring(i,t.value.length-n);e.selectionStart-i;const a=e.selectionEnd-i;t.selectionStart-i;const l=t.selectionEnd-i;return{text:r,replacePrevCharCnt:a,replaceNextCharCnt:s.length-a,positionDelta:l-r.length}}}fo.EMPTY=new fo("",0,0,null,void 0);class lC{static _getPageOfLine(e,t){return Math.floor((e-1)/t)}static _getRangeForPage(e,t){const i=e*t,n=i+1,s=i+t;return new A(n,1,s+1,1)}static fromEditorSelection(e,t,i,n){const r=lC._getPageOfLine(t.startLineNumber,i),a=lC._getRangeForPage(r,i),l=lC._getPageOfLine(t.endLineNumber,i),c=lC._getRangeForPage(l,i);let u=a.intersectRanges(new A(1,1,t.startLineNumber,t.startColumn));if(n&&e.getValueLengthInRange(u,1)>500){const S=e.modifyPosition(u.getEndPosition(),-500);u=A.fromPositions(S,u.getEndPosition())}const f=e.getValueInRange(u,1),g=e.getLineCount(),p=e.getLineMaxColumn(g);let _=c.intersectRanges(new A(t.endLineNumber,t.endColumn,g,p));if(n&&e.getValueLengthInRange(_,1)>500){const S=e.modifyPosition(_.getStartPosition(),500);_=A.fromPositions(_.getStartPosition(),S)}const b=e.getValueInRange(_,1);let y;if(r===l||r+1===l)y=e.getValueInRange(t,1);else{const S=a.intersectRanges(t),L=c.intersectRanges(t);y=e.getValueInRange(S,1)+""+e.getValueInRange(L,1)}return n&&y.length>2*500&&(y=y.substring(0,500)+""+y.substring(y.length-500,y.length)),new fo(f+y+b,f.length,f.length+y.length,t,u.endLineNumber-u.startLineNumber)}}var MDe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},YZ=function(o,e){return function(t,i){e(t,i,o)}},MR;(function(o){o.Tap="-monaco-textarea-synthetic-tap"})(MR||(MR={}));const D9={forceCopyWithSyntaxHighlighting:!1};class Cx{constructor(){this._lastState=null}set(e,t){this._lastState={lastCopiedValue:e,data:t}}get(e){return this._lastState&&this._lastState.lastCopiedValue===e?this._lastState.data:(this._lastState=null,null)}}Cx.INSTANCE=new Cx;class ADe{constructor(){this._lastTypeTextLength=0}handleCompositionUpdate(e){e=e||"";const t={text:e,replacePrevCharCnt:this._lastTypeTextLength,replaceNextCharCnt:0,positionDelta:0};return this._lastTypeTextLength=e.length,t}}let k9=class extends J{get textAreaState(){return this._textAreaState}constructor(e,t,i,n,s,r){super(),this._host=e,this._textArea=t,this._OS=i,this._browser=n,this._accessibilityService=s,this._logService=r,this._onFocus=this._register(new Y),this.onFocus=this._onFocus.event,this._onBlur=this._register(new Y),this.onBlur=this._onBlur.event,this._onKeyDown=this._register(new Y),this.onKeyDown=this._onKeyDown.event,this._onKeyUp=this._register(new Y),this.onKeyUp=this._onKeyUp.event,this._onCut=this._register(new Y),this.onCut=this._onCut.event,this._onPaste=this._register(new Y),this.onPaste=this._onPaste.event,this._onType=this._register(new Y),this.onType=this._onType.event,this._onCompositionStart=this._register(new Y),this.onCompositionStart=this._onCompositionStart.event,this._onCompositionUpdate=this._register(new Y),this.onCompositionUpdate=this._onCompositionUpdate.event,this._onCompositionEnd=this._register(new Y),this.onCompositionEnd=this._onCompositionEnd.event,this._onSelectionChangeRequest=this._register(new Y),this.onSelectionChangeRequest=this._onSelectionChangeRequest.event,this._asyncFocusGainWriteScreenReaderContent=this._register(new Xs),this._asyncTriggerCut=this._register(new Ui(()=>this._onCut.fire(),0)),this._textAreaState=fo.EMPTY,this._selectionChangeListener=null,this._accessibilityService.isScreenReaderOptimized()&&this.writeNativeTextAreaContent("ctor"),this._register(Ie.runAndSubscribe(this._accessibilityService.onDidChangeScreenReaderOptimized,()=>{this._accessibilityService.isScreenReaderOptimized()&&!this._asyncFocusGainWriteScreenReaderContent.value?this._asyncFocusGainWriteScreenReaderContent.value=this._register(new Ui(()=>this.writeNativeTextAreaContent("asyncFocusGain"),0)):this._asyncFocusGainWriteScreenReaderContent.clear()})),this._hasFocus=!1,this._currentComposition=null;let a=null;this._register(this._textArea.onKeyDown(l=>{const c=new _n(l);(c.keyCode===114||this._currentComposition&&c.keyCode===1)&&c.stopPropagation(),c.equals(9)&&c.preventDefault(),a=c,this._onKeyDown.fire(c)})),this._register(this._textArea.onKeyUp(l=>{const c=new _n(l);this._onKeyUp.fire(c)})),this._register(this._textArea.onCompositionStart(l=>{const c=new ADe;if(this._currentComposition){this._currentComposition=c;return}if(this._currentComposition=c,this._OS===2&&a&&a.equals(114)&&this._textAreaState.selectionStart===this._textAreaState.selectionEnd&&this._textAreaState.selectionStart>0&&this._textAreaState.value.substr(this._textAreaState.selectionStart-1,1)===l.data&&(a.code==="ArrowRight"||a.code==="ArrowLeft")){c.handleCompositionUpdate("x"),this._onCompositionStart.fire({data:l.data});return}if(this._browser.isAndroid){this._onCompositionStart.fire({data:l.data});return}this._onCompositionStart.fire({data:l.data})})),this._register(this._textArea.onCompositionUpdate(l=>{const c=this._currentComposition;if(!c)return;if(this._browser.isAndroid){const f=fo.readFromTextArea(this._textArea,this._textAreaState),g=fo.deduceAndroidCompositionInput(this._textAreaState,f);this._textAreaState=f,this._onType.fire(g),this._onCompositionUpdate.fire(l);return}const u=c.handleCompositionUpdate(l.data);this._textAreaState=fo.readFromTextArea(this._textArea,this._textAreaState),this._onType.fire(u),this._onCompositionUpdate.fire(l)})),this._register(this._textArea.onCompositionEnd(l=>{const c=this._currentComposition;if(!c)return;if(this._currentComposition=null,this._browser.isAndroid){const f=fo.readFromTextArea(this._textArea,this._textAreaState),g=fo.deduceAndroidCompositionInput(this._textAreaState,f);this._textAreaState=f,this._onType.fire(g),this._onCompositionEnd.fire();return}const u=c.handleCompositionUpdate(l.data);this._textAreaState=fo.readFromTextArea(this._textArea,this._textAreaState),this._onType.fire(u),this._onCompositionEnd.fire()})),this._register(this._textArea.onInput(l=>{if(this._textArea.setIgnoreSelectionChangeTime("received input event"),this._currentComposition)return;const c=fo.readFromTextArea(this._textArea,this._textAreaState),u=fo.deduceInput(this._textAreaState,c,this._OS===2);u.replacePrevCharCnt===0&&u.text.length===1&&(qs(u.text.charCodeAt(0))||u.text.charCodeAt(0)===127)||(this._textAreaState=c,(u.text!==""||u.replacePrevCharCnt!==0||u.replaceNextCharCnt!==0||u.positionDelta!==0)&&this._onType.fire(u))})),this._register(this._textArea.onCut(l=>{this._textArea.setIgnoreSelectionChangeTime("received cut event"),this._ensureClipboardGetsEditorSelection(l),this._asyncTriggerCut.schedule()})),this._register(this._textArea.onCopy(l=>{this._ensureClipboardGetsEditorSelection(l)})),this._register(this._textArea.onPaste(l=>{if(this._textArea.setIgnoreSelectionChangeTime("received paste event"),l.preventDefault(),!l.clipboardData)return;let[c,u]=E9.getTextData(l.clipboardData);c&&(u=u||Cx.INSTANCE.get(c),this._onPaste.fire({text:c,metadata:u}))})),this._register(this._textArea.onFocus(()=>{const l=this._hasFocus;this._setHasFocus(!0),this._accessibilityService.isScreenReaderOptimized()&&this._browser.isSafari&&!l&&this._hasFocus&&(this._asyncFocusGainWriteScreenReaderContent.value||(this._asyncFocusGainWriteScreenReaderContent.value=new Ui(()=>this.writeNativeTextAreaContent("asyncFocusGain"),0)),this._asyncFocusGainWriteScreenReaderContent.value.schedule())})),this._register(this._textArea.onBlur(()=>{this._currentComposition&&(this._currentComposition=null,this.writeNativeTextAreaContent("blurWithoutCompositionEnd"),this._onCompositionEnd.fire()),this._setHasFocus(!1)})),this._register(this._textArea.onSyntheticTap(()=>{this._browser.isAndroid&&this._currentComposition&&(this._currentComposition=null,this.writeNativeTextAreaContent("tapWithoutCompositionEnd"),this._onCompositionEnd.fire())}))}_installSelectionChangeListener(){let e=0;return oe(this._textArea.ownerDocument,"selectionchange",t=>{if(Ip.onSelectionChange(),!this._hasFocus||this._currentComposition||!this._browser.isChrome)return;const i=Date.now(),n=i-e;if(e=i,n<5)return;const s=i-this._textArea.getIgnoreSelectionChangeTime();if(this._textArea.resetSelectionChangeTime(),s<100||!this._textAreaState.selection)return;const r=this._textArea.getValue();if(this._textAreaState.value!==r)return;const a=this._textArea.getSelectionStart(),l=this._textArea.getSelectionEnd();if(this._textAreaState.selectionStart===a&&this._textAreaState.selectionEnd===l)return;const c=this._textAreaState.deduceEditorPosition(a),u=this._host.deduceModelPosition(c[0],c[1],c[2]),f=this._textAreaState.deduceEditorPosition(l),g=this._host.deduceModelPosition(f[0],f[1],f[2]),p=new Xe(u.lineNumber,u.column,g.lineNumber,g.column);this._onSelectionChangeRequest.fire(p)})}dispose(){super.dispose(),this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null)}focusTextArea(){this._setHasFocus(!0),this.refreshFocusState()}isFocused(){return this._hasFocus}refreshFocusState(){this._setHasFocus(this._textArea.hasFocus())}_setHasFocus(e){this._hasFocus!==e&&(this._hasFocus=e,this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null),this._hasFocus&&(this._selectionChangeListener=this._installSelectionChangeListener()),this._hasFocus&&this.writeNativeTextAreaContent("focusgain"),this._hasFocus?this._onFocus.fire():this._onBlur.fire())}_setAndWriteTextAreaState(e,t){this._hasFocus||(t=t.collapseSelection()),t.writeToTextArea(e,this._textArea,this._hasFocus),this._textAreaState=t}writeNativeTextAreaContent(e){!this._accessibilityService.isScreenReaderOptimized()&&e==="render"||this._currentComposition||(this._logService.trace(`writeTextAreaState(reason: ${e})`),this._setAndWriteTextAreaState(e,this._host.getScreenReaderContent()))}_ensureClipboardGetsEditorSelection(e){const t=this._host.getDataToCopy(),i={version:1,isFromEmptySelection:t.isFromEmptySelection,multicursorText:t.multicursorText,mode:t.mode};Cx.INSTANCE.set(this._browser.isFirefox?t.text.replace(/\r\n/g,`
`):t.text,i),e.preventDefault(),e.clipboardData&&E9.setTextData(e.clipboardData,t.text,t.html,i)}};k9=MDe([YZ(4,mc),YZ(5,mr)],k9);const E9={getTextData(o){const e=o.getData(ns.text);let t=null;const i=o.getData("vscode-editor-data");if(typeof i=="string")try{t=JSON.parse(i),t.version!==1&&(t=null)}catch{}return e.length===0&&t===null&&o.files.length>0?[Array.prototype.slice.call(o.files,0).map(s=>s.name).join(`
`),null]:[e,t]},setTextData(o,e,t,i){o.setData(ns.text,e),typeof t=="string"&&o.setData("text/html",t),o.setData("vscode-editor-data",JSON.stringify(i))}};class PDe extends J{get ownerDocument(){return this._actual.ownerDocument}constructor(e){super(),this._actual=e,this.onKeyDown=this._register(new Xt(this._actual,"keydown")).event,this.onKeyUp=this._register(new Xt(this._actual,"keyup")).event,this.onCompositionStart=this._register(new Xt(this._actual,"compositionstart")).event,this.onCompositionUpdate=this._register(new Xt(this._actual,"compositionupdate")).event,this.onCompositionEnd=this._register(new Xt(this._actual,"compositionend")).event,this.onBeforeInput=this._register(new Xt(this._actual,"beforeinput")).event,this.onInput=this._register(new Xt(this._actual,"input")).event,this.onCut=this._register(new Xt(this._actual,"cut")).event,this.onCopy=this._register(new Xt(this._actual,"copy")).event,this.onPaste=this._register(new Xt(this._actual,"paste")).event,this.onFocus=this._register(new Xt(this._actual,"focus")).event,this.onBlur=this._register(new Xt(this._actual,"blur")).event,this._onSyntheticTap=this._register(new Y),this.onSyntheticTap=this._onSyntheticTap.event,this._ignoreSelectionChangeTime=0,this._register(this.onKeyDown(()=>Ip.onKeyDown())),this._register(this.onBeforeInput(()=>Ip.onBeforeInput())),this._register(this.onInput(()=>Ip.onInput())),this._register(this.onKeyUp(()=>Ip.onKeyUp())),this._register(oe(this._actual,MR.Tap,()=>this._onSyntheticTap.fire()))}hasFocus(){const e=Nv(this._actual);return e?e.activeElement===this._actual:this._actual.isConnected?No()===this._actual:!1}setIgnoreSelectionChangeTime(e){this._ignoreSelectionChangeTime=Date.now()}getIgnoreSelectionChangeTime(){return this._ignoreSelectionChangeTime}resetSelectionChangeTime(){this._ignoreSelectionChangeTime=0}getValue(){return this._actual.value}setValue(e,t){const i=this._actual;i.value!==t&&(this.setIgnoreSelectionChangeTime("setValue"),i.value=t)}getSelectionStart(){return this._actual.selectionDirection==="backward"?this._actual.selectionEnd:this._actual.selectionStart}getSelectionEnd(){return this._actual.selectionDirection==="backward"?this._actual.selectionStart:this._actual.selectionEnd}setSelectionRange(e,t,i){const n=this._actual;let s=null;const r=Nv(n);r?s=r.activeElement:s=No();const a=ft(s),l=s===n,c=n.selectionStart,u=n.selectionEnd;if(l&&c===t&&u===i){uc&&a.parent!==a&&n.focus();return}if(l){this.setIgnoreSelectionChangeTime("setSelectionRange"),n.setSelectionRange(t,i),uc&&a.parent!==a&&n.focus();return}try{const f=G1e(n);this.setIgnoreSelectionChangeTime("setSelectionRange"),n.focus(),n.setSelectionRange(t,i),Y1e(n,f)}catch{}}}class ODe extends xH{constructor(e,t,i){super(e,t,i),this._register(rn.addTarget(this.viewHelper.linesContentDomNode)),this._register(oe(this.viewHelper.linesContentDomNode,ln.Tap,s=>this.onTap(s))),this._register(oe(this.viewHelper.linesContentDomNode,ln.Change,s=>this.onChange(s))),this._register(oe(this.viewHelper.linesContentDomNode,ln.Contextmenu,s=>this._onContextMenu(new gm(s,!1,this.viewHelper.viewDomNode),!1))),this._lastPointerType="mouse",this._register(oe(this.viewHelper.linesContentDomNode,"pointerdown",s=>{const r=s.pointerType;if(r==="mouse"){this._lastPointerType="mouse";return}else r==="touch"?this._lastPointerType="touch":this._lastPointerType="pen"}));const n=new tDe(this.viewHelper.viewDomNode);this._register(n.onPointerMove(this.viewHelper.viewDomNode,s=>this._onMouseMove(s))),this._register(n.onPointerUp(this.viewHelper.viewDomNode,s=>this._onMouseUp(s))),this._register(n.onPointerLeave(this.viewHelper.viewDomNode,s=>this._onMouseLeave(s))),this._register(n.onPointerDown(this.viewHelper.viewDomNode,(s,r)=>this._onMouseDown(s,r)))}onTap(e){!e.initialTarget||!this.viewHelper.linesContentDomNode.contains(e.initialTarget)||(e.preventDefault(),this.viewHelper.focusTextArea(),this._dispatchGesture(e,!1))}onChange(e){this._lastPointerType==="touch"&&this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX,-e.translationY),this._lastPointerType==="pen"&&this._dispatchGesture(e,!0)}_dispatchGesture(e,t){const i=this._createMouseTarget(new gm(e,!1,this.viewHelper.viewDomNode),!1);i.position&&this.viewController.dispatchMouse({position:i.position,mouseColumn:i.position.column,startedOnLineNumbers:!1,revealType:1,mouseDownCount:e.tapCount,inSelectionMode:t,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,leftButton:!1,middleButton:!1,onInjectedText:i.type===6&&i.detail.injectedText!==null})}_onMouseDown(e,t){e.browserEvent.pointerType!=="touch"&&super._onMouseDown(e,t)}}class FDe extends xH{constructor(e,t,i){super(e,t,i),this._register(rn.addTarget(this.viewHelper.linesContentDomNode)),this._register(oe(this.viewHelper.linesContentDomNode,ln.Tap,n=>this.onTap(n))),this._register(oe(this.viewHelper.linesContentDomNode,ln.Change,n=>this.onChange(n))),this._register(oe(this.viewHelper.linesContentDomNode,ln.Contextmenu,n=>this._onContextMenu(new gm(n,!1,this.viewHelper.viewDomNode),!1)))}onTap(e){e.preventDefault(),this.viewHelper.focusTextArea();const t=this._createMouseTarget(new gm(e,!1,this.viewHelper.viewDomNode),!1);if(t.position){const i=document.createEvent("CustomEvent");i.initEvent(MR.Tap,!1,!0),this.viewHelper.dispatchTextAreaEvent(i),this.viewController.moveTo(t.position,1)}}onChange(e){this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX,-e.translationY)}}class BDe extends J{constructor(e,t,i){super(),($d||Ube&&Hte)&&UV.pointerEvents?this.handler=this._register(new ODe(e,t,i)):Hi.TouchEvent?this.handler=this._register(new FDe(e,t,i)):this.handler=this._register(new xH(e,t,i))}getTargetAtClientPoint(e,t){return this.handler.getTargetAtClientPoint(e,t)}}class cb extends jD{}const Us=Zt("themeService");function Xn(o){return{id:o}}function I9(o){switch(o){case rc.DARK:return"vs-dark";case rc.HIGH_CONTRAST_DARK:return"hc-black";case rc.HIGH_CONTRAST_LIGHT:return"hc-light";default:return"vs"}}const Gne={ThemingContribution:"base.contributions.theming"};class WDe{constructor(){this.themingParticipants=[],this.themingParticipants=[],this.onThemingParticipantAddedEmitter=new Y}onColorThemeChange(e){return this.themingParticipants.push(e),this.onThemingParticipantAddedEmitter.fire(e),lt(()=>{const t=this.themingParticipants.indexOf(e);this.themingParticipants.splice(t,1)})}getThemingParticipants(){return this.themingParticipants}}const Yne=new WDe;$n.add(Gne.ThemingContribution,Yne);function _c(o){return Yne.onColorThemeChange(o)}class VDe extends J{constructor(e){super(),this.themeService=e,this.theme=e.getColorTheme(),this._register(this.themeService.onDidColorThemeChange(t=>this.onThemeChange(t)))}onThemeChange(e){this.theme=e,this.updateStyles()}updateStyles(){}}const Zne=V("editor.lineHighlightBackground",{dark:null,light:null,hcDark:null,hcLight:null},v("lineHighlight","Background color for the highlight of line at the cursor position.")),ZZ=V("editor.lineHighlightBorder",{dark:"#282828",light:"#eeeeee",hcDark:"#f38518",hcLight:Jt},v("lineHighlightBorderBox","Background color for the border around the line at the cursor position."));V("editor.rangeHighlightBackground",{dark:"#ffffff0b",light:"#fdff0033",hcDark:null,hcLight:null},v("rangeHighlight","Background color of highlighted ranges, like by quick open and find features. The color must not be opaque so as not to hide underlying decorations."),!0);V("editor.rangeHighlightBorder",{dark:null,light:null,hcDark:Sn,hcLight:Sn},v("rangeHighlightBorder","Background color of the border around highlighted ranges."),!0);V("editor.symbolHighlightBackground",{dark:Rf,light:Rf,hcDark:null,hcLight:null},v("symbolHighlight","Background color of highlighted symbol, like for go to definition or go next/previous symbol. The color must not be opaque so as not to hide underlying decorations."),!0);V("editor.symbolHighlightBorder",{dark:null,light:null,hcDark:Sn,hcLight:Sn},v("symbolHighlightBorder","Background color of the border around highlighted symbols."),!0);const th=V("editorCursor.foreground",{dark:"#AEAFAD",light:ne.black,hcDark:ne.white,hcLight:"#0F4A85"},v("caret","Color of the editor cursor.")),Bf=V("editorCursor.background",null,v("editorCursorBackground","The background color of the editor cursor. Allows customizing the color of a character overlapped by a block cursor.")),Qne=V("editorMultiCursor.primary.foreground",{dark:th,light:th,hcDark:th,hcLight:th},v("editorMultiCursorPrimaryForeground","Color of the primary editor cursor when multiple cursors are present.")),HDe=V("editorMultiCursor.primary.background",{dark:Bf,light:Bf,hcDark:Bf,hcLight:Bf},v("editorMultiCursorPrimaryBackground","The background color of the primary editor cursor when multiple cursors are present. Allows customizing the color of a character overlapped by a block cursor.")),Xne=V("editorMultiCursor.secondary.foreground",{dark:th,light:th,hcDark:th,hcLight:th},v("editorMultiCursorSecondaryForeground","Color of secondary editor cursors when multiple cursors are present.")),zDe=V("editorMultiCursor.secondary.background",{dark:Bf,light:Bf,hcDark:Bf,hcLight:Bf},v("editorMultiCursorSecondaryBackground","The background color of secondary editor cursors when multiple cursors are present. Allows customizing the color of a character overlapped by a block cursor.")),Wf=V("editorWhitespace.foreground",{dark:"#e3e4e229",light:"#33333333",hcDark:"#e3e4e229",hcLight:"#CCCCCC"},v("editorWhitespaces","Color of whitespace characters in the editor.")),UDe=V("editorLineNumber.foreground",{dark:"#858585",light:"#237893",hcDark:ne.white,hcLight:"#292929"},v("editorLineNumbers","Color of editor line numbers.")),iT=V("editorIndentGuide.background",{dark:Wf,light:Wf,hcDark:Wf,hcLight:Wf},v("editorIndentGuides","Color of the editor indentation guides."),!1,v("deprecatedEditorIndentGuides","'editorIndentGuide.background' is deprecated. Use 'editorIndentGuide.background1' instead.")),nT=V("editorIndentGuide.activeBackground",{dark:Wf,light:Wf,hcDark:Wf,hcLight:Wf},v("editorActiveIndentGuide","Color of the active editor indentation guides."),!1,v("deprecatedEditorActiveIndentGuide","'editorIndentGuide.activeBackground' is deprecated. Use 'editorIndentGuide.activeBackground1' instead.")),qD=V("editorIndentGuide.background1",{dark:iT,light:iT,hcDark:iT,hcLight:iT},v("editorIndentGuides1","Color of the editor indentation guides (1).")),$De=V("editorIndentGuide.background2",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},v("editorIndentGuides2","Color of the editor indentation guides (2).")),jDe=V("editorIndentGuide.background3",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},v("editorIndentGuides3","Color of the editor indentation guides (3).")),KDe=V("editorIndentGuide.background4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},v("editorIndentGuides4","Color of the editor indentation guides (4).")),qDe=V("editorIndentGuide.background5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},v("editorIndentGuides5","Color of the editor indentation guides (5).")),GDe=V("editorIndentGuide.background6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},v("editorIndentGuides6","Color of the editor indentation guides (6).")),GD=V("editorIndentGuide.activeBackground1",{dark:nT,light:nT,hcDark:nT,hcLight:nT},v("editorActiveIndentGuide1","Color of the active editor indentation guides (1).")),YDe=V("editorIndentGuide.activeBackground2",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},v("editorActiveIndentGuide2","Color of the active editor indentation guides (2).")),ZDe=V("editorIndentGuide.activeBackground3",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},v("editorActiveIndentGuide3","Color of the active editor indentation guides (3).")),QDe=V("editorIndentGuide.activeBackground4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},v("editorActiveIndentGuide4","Color of the active editor indentation guides (4).")),XDe=V("editorIndentGuide.activeBackground5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},v("editorActiveIndentGuide5","Color of the active editor indentation guides (5).")),JDe=V("editorIndentGuide.activeBackground6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},v("editorActiveIndentGuide6","Color of the active editor indentation guides (6).")),sT=V("editorActiveLineNumber.foreground",{dark:"#c6c6c6",light:"#0B216F",hcDark:Sn,hcLight:Sn},v("editorActiveLineNumber","Color of editor active line number"),!1,v("deprecatedEditorActiveLineNumber","Id is deprecated. Use 'editorLineNumber.activeForeground' instead."));V("editorLineNumber.activeForeground",{dark:sT,light:sT,hcDark:sT,hcLight:sT},v("editorActiveLineNumber","Color of editor active line number"));const eke=V("editorLineNumber.dimmedForeground",{dark:null,light:null,hcDark:null,hcLight:null},v("editorDimmedLineNumber","Color of the final editor line when editor.renderFinalNewline is set to dimmed."));V("editorRuler.foreground",{dark:"#5A5A5A",light:ne.lightgrey,hcDark:ne.white,hcLight:"#292929"},v("editorRuler","Color of the editor rulers."));V("editorCodeLens.foreground",{dark:"#999999",light:"#919191",hcDark:"#999999",hcLight:"#292929"},v("editorCodeLensForeground","Foreground color of editor CodeLens"));V("editorBracketMatch.background",{dark:"#0064001a",light:"#0064001a",hcDark:"#0064001a",hcLight:"#0000"},v("editorBracketMatchBackground","Background color behind matching brackets"));V("editorBracketMatch.border",{dark:"#888",light:"#B9B9B9",hcDark:Jt,hcLight:Jt},v("editorBracketMatchBorder","Color for matching brackets boxes"));const tke=V("editorOverviewRuler.border",{dark:"#7f7f7f4d",light:"#7f7f7f4d",hcDark:"#7f7f7f4d",hcLight:"#666666"},v("editorOverviewRulerBorder","Color of the overview ruler border.")),ike=V("editorOverviewRuler.background",null,v("editorOverviewRulerBackground","Background color of the editor overview ruler."));V("editorGutter.background",{dark:Zs,light:Zs,hcDark:Zs,hcLight:Zs},v("editorGutter","Background color of the editor gutter. The gutter contains the glyph margins and the line numbers."));V("editorUnnecessaryCode.border",{dark:null,light:null,hcDark:ne.fromHex("#fff").transparent(.8),hcLight:Jt},v("unnecessaryCodeBorder","Border color of unnecessary (unused) source code in the editor."));const nke=V("editorUnnecessaryCode.opacity",{dark:ne.fromHex("#000a"),light:ne.fromHex("#0007"),hcDark:null,hcLight:null},v("unnecessaryCodeOpacity",`Opacity of unnecessary (unused) source code in the editor. For example, "#000000c0" will render the code with 75% opacity. For high contrast themes, use the  'editorUnnecessaryCode.border' theme color to underline unnecessary code instead of fading it out.`));V("editorGhostText.border",{dark:null,light:null,hcDark:ne.fromHex("#fff").transparent(.8),hcLight:ne.fromHex("#292929").transparent(.8)},v("editorGhostTextBorder","Border color of ghost text in the editor."));V("editorGhostText.foreground",{dark:ne.fromHex("#ffffff56"),light:ne.fromHex("#0007"),hcDark:null,hcLight:null},v("editorGhostTextForeground","Foreground color of the ghost text in the editor."));V("editorGhostText.background",{dark:null,light:null,hcDark:null,hcLight:null},v("editorGhostTextBackground","Background color of the ghost text in the editor."));const oT=new ne(new ai(0,122,204,.6)),Jne=V("editorOverviewRuler.rangeHighlightForeground",{dark:oT,light:oT,hcDark:oT,hcLight:oT},v("overviewRulerRangeHighlight","Overview ruler marker color for range highlights. The color must not be opaque so as not to hide underlying decorations."),!0),ske=V("editorOverviewRuler.errorForeground",{dark:new ne(new ai(255,18,18,.7)),light:new ne(new ai(255,18,18,.7)),hcDark:new ne(new ai(255,50,50,1)),hcLight:"#B5200D"},v("overviewRuleError","Overview ruler marker color for errors.")),oke=V("editorOverviewRuler.warningForeground",{dark:fr,light:fr,hcDark:mx,hcLight:mx},v("overviewRuleWarning","Overview ruler marker color for warnings.")),rke=V("editorOverviewRuler.infoForeground",{dark:fa,light:fa,hcDark:_x,hcLight:_x},v("overviewRuleInfo","Overview ruler marker color for infos.")),ese=V("editorBracketHighlight.foreground1",{dark:"#FFD700",light:"#0431FAFF",hcDark:"#FFD700",hcLight:"#0431FAFF"},v("editorBracketHighlightForeground1","Foreground color of brackets (1). Requires enabling bracket pair colorization.")),tse=V("editorBracketHighlight.foreground2",{dark:"#DA70D6",light:"#319331FF",hcDark:"#DA70D6",hcLight:"#319331FF"},v("editorBracketHighlightForeground2","Foreground color of brackets (2). Requires enabling bracket pair colorization.")),ise=V("editorBracketHighlight.foreground3",{dark:"#179FFF",light:"#7B3814FF",hcDark:"#87CEFA",hcLight:"#7B3814FF"},v("editorBracketHighlightForeground3","Foreground color of brackets (3). Requires enabling bracket pair colorization.")),nse=V("editorBracketHighlight.foreground4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},v("editorBracketHighlightForeground4","Foreground color of brackets (4). Requires enabling bracket pair colorization.")),sse=V("editorBracketHighlight.foreground5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},v("editorBracketHighlightForeground5","Foreground color of brackets (5). Requires enabling bracket pair colorization.")),ose=V("editorBracketHighlight.foreground6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},v("editorBracketHighlightForeground6","Foreground color of brackets (6). Requires enabling bracket pair colorization.")),ake=V("editorBracketHighlight.unexpectedBracket.foreground",{dark:new ne(new ai(255,18,18,.8)),light:new ne(new ai(255,18,18,.8)),hcDark:new ne(new ai(255,50,50,1)),hcLight:""},v("editorBracketHighlightUnexpectedBracketForeground","Foreground color of unexpected brackets.")),lke=V("editorBracketPairGuide.background1",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},v("editorBracketPairGuide.background1","Background color of inactive bracket pair guides (1). Requires enabling bracket pair guides.")),cke=V("editorBracketPairGuide.background2",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},v("editorBracketPairGuide.background2","Background color of inactive bracket pair guides (2). Requires enabling bracket pair guides.")),dke=V("editorBracketPairGuide.background3",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},v("editorBracketPairGuide.background3","Background color of inactive bracket pair guides (3). Requires enabling bracket pair guides.")),uke=V("editorBracketPairGuide.background4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},v("editorBracketPairGuide.background4","Background color of inactive bracket pair guides (4). Requires enabling bracket pair guides.")),hke=V("editorBracketPairGuide.background5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},v("editorBracketPairGuide.background5","Background color of inactive bracket pair guides (5). Requires enabling bracket pair guides.")),fke=V("editorBracketPairGuide.background6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},v("editorBracketPairGuide.background6","Background color of inactive bracket pair guides (6). Requires enabling bracket pair guides.")),gke=V("editorBracketPairGuide.activeBackground1",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},v("editorBracketPairGuide.activeBackground1","Background color of active bracket pair guides (1). Requires enabling bracket pair guides.")),pke=V("editorBracketPairGuide.activeBackground2",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},v("editorBracketPairGuide.activeBackground2","Background color of active bracket pair guides (2). Requires enabling bracket pair guides.")),mke=V("editorBracketPairGuide.activeBackground3",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},v("editorBracketPairGuide.activeBackground3","Background color of active bracket pair guides (3). Requires enabling bracket pair guides.")),_ke=V("editorBracketPairGuide.activeBackground4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},v("editorBracketPairGuide.activeBackground4","Background color of active bracket pair guides (4). Requires enabling bracket pair guides.")),vke=V("editorBracketPairGuide.activeBackground5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},v("editorBracketPairGuide.activeBackground5","Background color of active bracket pair guides (5). Requires enabling bracket pair guides.")),bke=V("editorBracketPairGuide.activeBackground6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},v("editorBracketPairGuide.activeBackground6","Background color of active bracket pair guides (6). Requires enabling bracket pair guides."));V("editorUnicodeHighlight.border",{dark:fr,light:fr,hcDark:fr,hcLight:fr},v("editorUnicodeHighlight.border","Border color used to highlight unicode characters."));V("editorUnicodeHighlight.background",{dark:XI,light:XI,hcDark:XI,hcLight:XI},v("editorUnicodeHighlight.background","Background color used to highlight unicode characters."));_c((o,e)=>{const t=o.getColor(Zs),i=o.getColor(Zne),n=i&&!i.isTransparent()?i:t;n&&e.addRule(`.monaco-editor .inputarea.ime-input { background-color: ${n}; }`)});class YD extends cb{constructor(e){super(),this._context=e,this._readConfig(),this._lastCursorModelPosition=new Z(1,1),this._renderResult=null,this._activeLineNumber=1,this._context.addEventHandler(this)}_readConfig(){const e=this._context.configuration.options;this._lineHeight=e.get(67);const t=e.get(68);this._renderLineNumbers=t.renderType,this._renderCustomLineNumbers=t.renderFn,this._renderFinalNewline=e.get(95);const i=e.get(145);this._lineNumbersLeft=i.lineNumbersLeft,this._lineNumbersWidth=i.lineNumbersWidth}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return this._readConfig(),!0}onCursorStateChanged(e){const t=e.selections[0].getPosition();this._lastCursorModelPosition=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(t);let i=!1;return this._activeLineNumber!==t.lineNumber&&(this._activeLineNumber=t.lineNumber,i=!0),(this._renderLineNumbers===2||this._renderLineNumbers===3)&&(i=!0),i}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}onDecorationsChanged(e){return e.affectsLineNumber}_getLineRenderLineNumber(e){const t=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new Z(e,1));if(t.column!==1)return"";const i=t.lineNumber;if(this._renderCustomLineNumbers)return this._renderCustomLineNumbers(i);if(this._renderLineNumbers===2){const n=Math.abs(this._lastCursorModelPosition.lineNumber-i);return n===0?'<span class="relative-current-line-number">'+i+"</span>":String(n)}if(this._renderLineNumbers===3){if(this._lastCursorModelPosition.lineNumber===i||i%10===0)return String(i);const n=this._context.viewModel.getLineCount();return i===n?String(i):""}return String(i)}prepareRender(e){if(this._renderLineNumbers===0){this._renderResult=null;return}const t=jr?this._lineHeight%2===0?" lh-even":" lh-odd":"",i=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,s=this._context.viewModel.getDecorationsInViewport(e.visibleRange).filter(c=>!!c.options.lineNumberClassName);s.sort((c,u)=>A.compareRangesUsingEnds(c.range,u.range));let r=0;const a=this._context.viewModel.getLineCount(),l=[];for(let c=i;c<=n;c++){const u=c-i;let f=this._getLineRenderLineNumber(c),g="";for(;r<s.length&&s[r].range.endLineNumber<c;)r++;for(let p=r;p<s.length;p++){const{range:_,options:b}=s[p];_.startLineNumber<=c&&(g+=" "+b.lineNumberClassName)}if(!f&&!g){l[u]="";continue}c===a&&this._context.viewModel.getLineLength(c)===0&&(this._renderFinalNewline==="off"&&(f=""),this._renderFinalNewline==="dimmed"&&(g+=" dimmed-line-number")),c===this._activeLineNumber&&(g+=" active-line-number"),l[u]=`<div class="${YD.CLASS_NAME}${t}${g}" style="left:${this._lineNumbersLeft}px;width:${this._lineNumbersWidth}px;">${f}</div>`}this._renderResult=l}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}YD.CLASS_NAME="line-numbers";_c((o,e)=>{const t=o.getColor(UDe),i=o.getColor(eke);i?e.addRule(`.monaco-editor .line-numbers.dimmed-line-number { color: ${i}; }`):t&&e.addRule(`.monaco-editor .line-numbers.dimmed-line-number { color: ${t.transparent(.4)}; }`)});class Av extends Ga{constructor(e){super(e);const t=this._context.configuration.options,i=t.get(145);this._canUseLayerHinting=!t.get(32),this._contentLeft=i.contentLeft,this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,this._domNode=ki(document.createElement("div")),this._domNode.setClassName(Av.OUTER_CLASS_NAME),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._glyphMarginBackgroundDomNode=ki(document.createElement("div")),this._glyphMarginBackgroundDomNode.setClassName(Av.CLASS_NAME),this._domNode.appendChild(this._glyphMarginBackgroundDomNode)}dispose(){super.dispose()}getDomNode(){return this._domNode}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(145);return this._canUseLayerHinting=!t.get(32),this._contentLeft=i.contentLeft,this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollTopChanged}prepareRender(e){}render(e){this._domNode.setLayerHinting(this._canUseLayerHinting),this._domNode.setContain("strict");const t=e.scrollTop-e.bigNumbersDelta;this._domNode.setTop(-t);const i=Math.min(e.scrollHeight,1e6);this._domNode.setHeight(i),this._domNode.setWidth(this._contentLeft),this._glyphMarginBackgroundDomNode.setLeft(this._glyphMarginLeft),this._glyphMarginBackgroundDomNode.setWidth(this._glyphMarginWidth),this._glyphMarginBackgroundDomNode.setHeight(i)}}Av.CLASS_NAME="glyph-margin";Av.OUTER_CLASS_NAME="margin";const TC="monaco-mouse-cursor-text";class Cke{constructor(){this._onDidChange=new Y,this.onDidChange=this._onDidChange.event,this._enabled=!0}get enabled(){return this._enabled}enable(){this._enabled=!0,this._onDidChange.fire()}disable(){this._enabled=!1,this._onDidChange.fire()}}const _L=new Cke,Bi=Zt("keybindingService");var wke=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},QZ=function(o,e){return function(t,i){e(t,i,o)}};class yke{constructor(e,t,i,n,s){this._context=e,this.modelLineNumber=t,this.distanceToModelLineStart=i,this.widthOfHiddenLineTextBefore=n,this.distanceToModelLineEnd=s,this._visibleTextAreaBrand=void 0,this.startPosition=null,this.endPosition=null,this.visibleTextareaStart=null,this.visibleTextareaEnd=null,this._previousPresentation=null}prepareRender(e){const t=new Z(this.modelLineNumber,this.distanceToModelLineStart+1),i=new Z(this.modelLineNumber,this._context.viewModel.model.getLineMaxColumn(this.modelLineNumber)-this.distanceToModelLineEnd);this.startPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(t),this.endPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(i),this.startPosition.lineNumber===this.endPosition.lineNumber?(this.visibleTextareaStart=e.visibleRangeForPosition(this.startPosition),this.visibleTextareaEnd=e.visibleRangeForPosition(this.endPosition)):(this.visibleTextareaStart=null,this.visibleTextareaEnd=null)}definePresentation(e){return this._previousPresentation||(e?this._previousPresentation=e:this._previousPresentation={foreground:1,italic:!1,bold:!1,underline:!1,strikethrough:!1}),this._previousPresentation}}const m3=uc;let T9=class extends Ga{constructor(e,t,i,n,s){super(e),this._keybindingService=n,this._instantiationService=s,this._primaryCursorPosition=new Z(1,1),this._primaryCursorVisibleRange=null,this._viewController=t,this._visibleRangeProvider=i,this._scrollLeft=0,this._scrollTop=0;const r=this._context.configuration.options,a=r.get(145);this._setAccessibilityOptions(r),this._contentLeft=a.contentLeft,this._contentWidth=a.contentWidth,this._contentHeight=a.height,this._fontInfo=r.get(50),this._lineHeight=r.get(67),this._emptySelectionClipboard=r.get(37),this._copyWithSyntaxHighlighting=r.get(25),this._visibleTextArea=null,this._selections=[new Xe(1,1,1,1)],this._modelSelections=[new Xe(1,1,1,1)],this._lastRenderPosition=null,this.textArea=ki(document.createElement("textarea")),qd.write(this.textArea,7),this.textArea.setClassName(`inputarea ${TC}`),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off");const{tabSize:l}=this._context.viewModel.model.getOptions();this.textArea.domNode.style.tabSize=`${l*this._fontInfo.spaceWidth}px`,this.textArea.setAttribute("autocorrect","off"),this.textArea.setAttribute("autocapitalize","off"),this.textArea.setAttribute("autocomplete","off"),this.textArea.setAttribute("spellcheck","false"),this.textArea.setAttribute("aria-label",this._getAriaLabel(r)),this.textArea.setAttribute("aria-required",r.get(5)?"true":"false"),this.textArea.setAttribute("tabindex",String(r.get(124))),this.textArea.setAttribute("role","textbox"),this.textArea.setAttribute("aria-roledescription",v("editor","editor")),this.textArea.setAttribute("aria-multiline","true"),this.textArea.setAttribute("aria-autocomplete",r.get(91)?"none":"both"),this._ensureReadOnlyAttribute(),this.textAreaCover=ki(document.createElement("div")),this.textAreaCover.setPosition("absolute");const c={getLineCount:()=>this._context.viewModel.getLineCount(),getLineMaxColumn:g=>this._context.viewModel.getLineMaxColumn(g),getValueInRange:(g,p)=>this._context.viewModel.getValueInRange(g,p),getValueLengthInRange:(g,p)=>this._context.viewModel.getValueLengthInRange(g,p),modifyPosition:(g,p)=>this._context.viewModel.modifyPosition(g,p)},u={getDataToCopy:()=>{const g=this._context.viewModel.getPlainTextToCopy(this._modelSelections,this._emptySelectionClipboard,Mo),p=this._context.viewModel.model.getEOL(),_=this._emptySelectionClipboard&&this._modelSelections.length===1&&this._modelSelections[0].isEmpty(),b=Array.isArray(g)?g:null,y=Array.isArray(g)?g.join(p):g;let S,L=null;if(D9.forceCopyWithSyntaxHighlighting||this._copyWithSyntaxHighlighting&&y.length<65536){const x=this._context.viewModel.getRichTextToCopy(this._modelSelections,this._emptySelectionClipboard);x&&(S=x.html,L=x.mode)}return{isFromEmptySelection:_,multicursorText:b,text:y,html:S,mode:L}},getScreenReaderContent:()=>{if(this._accessibilitySupport===1){const g=this._selections[0];if(Kt&&g.isEmpty()){const _=g.getStartPosition();let b=this._getWordBeforePosition(_);if(b.length===0&&(b=this._getCharacterBeforePosition(_)),b.length>0)return new fo(b,b.length,b.length,A.fromPositions(_),0)}if(Kt&&!g.isEmpty()&&c.getValueLengthInRange(g,0)<500){const _=c.getValueInRange(g,0);return new fo(_,0,_.length,g,0)}if(ig&&!g.isEmpty()){const _="vscode-placeholder";return new fo(_,0,_.length,null,void 0)}return fo.EMPTY}if(bY){const g=this._selections[0];if(g.isEmpty()){const p=g.getStartPosition(),[_,b]=this._getAndroidWordAtPosition(p);if(_.length>0)return new fo(_,b,b,A.fromPositions(p),0)}return fo.EMPTY}return lC.fromEditorSelection(c,this._selections[0],this._accessibilityPageSize,this._accessibilitySupport===0)},deduceModelPosition:(g,p,_)=>this._context.viewModel.deduceModelPositionRelativeToViewPosition(g,p,_)},f=this._register(new PDe(this.textArea.domNode));this._textAreaInput=this._register(this._instantiationService.createInstance(k9,u,f,Va,{isAndroid:bY,isChrome:OD,isFirefox:uc,isSafari:ig})),this._register(this._textAreaInput.onKeyDown(g=>{this._viewController.emitKeyDown(g)})),this._register(this._textAreaInput.onKeyUp(g=>{this._viewController.emitKeyUp(g)})),this._register(this._textAreaInput.onPaste(g=>{let p=!1,_=null,b=null;g.metadata&&(p=this._emptySelectionClipboard&&!!g.metadata.isFromEmptySelection,_=typeof g.metadata.multicursorText<"u"?g.metadata.multicursorText:null,b=g.metadata.mode),this._viewController.paste(g.text,p,_,b)})),this._register(this._textAreaInput.onCut(()=>{this._viewController.cut()})),this._register(this._textAreaInput.onType(g=>{g.replacePrevCharCnt||g.replaceNextCharCnt||g.positionDelta?this._viewController.compositionType(g.text,g.replacePrevCharCnt,g.replaceNextCharCnt,g.positionDelta):this._viewController.type(g.text)})),this._register(this._textAreaInput.onSelectionChangeRequest(g=>{this._viewController.setSelection(g)})),this._register(this._textAreaInput.onCompositionStart(g=>{const p=this.textArea.domNode,_=this._modelSelections[0],{distanceToModelLineStart:b,widthOfHiddenTextBefore:y}=(()=>{const L=p.value.substring(0,Math.min(p.selectionStart,p.selectionEnd)),x=L.lastIndexOf(`
`),D=L.substring(x+1),E=D.lastIndexOf("	"),N=D.length-E-1,M=_.getStartPosition(),F=Math.min(M.column-1,N),H=M.column-1-F,Q=D.substring(0,D.length-F),{tabSize:K}=this._context.viewModel.model.getOptions(),j=Ske(this.textArea.domNode.ownerDocument,Q,this._fontInfo,K);return{distanceToModelLineStart:H,widthOfHiddenTextBefore:j}})(),{distanceToModelLineEnd:S}=(()=>{const L=p.value.substring(Math.max(p.selectionStart,p.selectionEnd)),x=L.indexOf(`
`),D=x===-1?L:L.substring(0,x),E=D.indexOf("	"),N=E===-1?D.length:D.length-E-1,M=_.getEndPosition(),F=Math.min(this._context.viewModel.model.getLineMaxColumn(M.lineNumber)-M.column,N);return{distanceToModelLineEnd:this._context.viewModel.model.getLineMaxColumn(M.lineNumber)-M.column-F}})();this._context.viewModel.revealRange("keyboard",!0,A.fromPositions(this._selections[0].getStartPosition()),0,1),this._visibleTextArea=new yke(this._context,_.startLineNumber,b,y,S),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off"),this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render(),this.textArea.setClassName(`inputarea ${TC} ime-input`),this._viewController.compositionStart(),this._context.viewModel.onCompositionStart()})),this._register(this._textAreaInput.onCompositionUpdate(g=>{this._visibleTextArea&&(this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render())})),this._register(this._textAreaInput.onCompositionEnd(()=>{this._visibleTextArea=null,this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off"),this._render(),this.textArea.setClassName(`inputarea ${TC}`),this._viewController.compositionEnd(),this._context.viewModel.onCompositionEnd()})),this._register(this._textAreaInput.onFocus(()=>{this._context.viewModel.setHasFocus(!0)})),this._register(this._textAreaInput.onBlur(()=>{this._context.viewModel.setHasFocus(!1)})),this._register(_L.onDidChange(()=>{this._ensureReadOnlyAttribute()}))}writeScreenReaderContent(e){this._textAreaInput.writeNativeTextAreaContent(e)}dispose(){super.dispose()}_getAndroidWordAtPosition(e){const t='`~!@#$%^&*()-=+[{]}\\|;:",.<>/?',i=this._context.viewModel.getLineContent(e.lineNumber),n=hc(t,[]);let s=!0,r=e.column,a=!0,l=e.column,c=0;for(;c<50&&(s||a);){if(s&&r<=1&&(s=!1),s){const u=i.charCodeAt(r-2);n.get(u)!==0?s=!1:r--}if(a&&l>i.length&&(a=!1),a){const u=i.charCodeAt(l-1);n.get(u)!==0?a=!1:l++}c++}return[i.substring(r-1,l-1),e.column-r]}_getWordBeforePosition(e){const t=this._context.viewModel.getLineContent(e.lineNumber),i=hc(this._context.configuration.options.get(131),[]);let n=e.column,s=0;for(;n>1;){const r=t.charCodeAt(n-2);if(i.get(r)!==0||s>50)return t.substring(n-1,e.column-1);s++,n--}return t.substring(0,e.column-1)}_getCharacterBeforePosition(e){if(e.column>1){const i=this._context.viewModel.getLineContent(e.lineNumber).charAt(e.column-2);if(!qs(i.charCodeAt(0)))return i}return""}_getAriaLabel(e){var t,i,n;if(e.get(2)===1){const r=(t=this._keybindingService.lookupKeybinding("editor.action.toggleScreenReaderAccessibilityMode"))===null||t===void 0?void 0:t.getAriaLabel(),a=(i=this._keybindingService.lookupKeybinding("workbench.action.showCommands"))===null||i===void 0?void 0:i.getAriaLabel(),l=(n=this._keybindingService.lookupKeybinding("workbench.action.openGlobalKeybindings"))===null||n===void 0?void 0:n.getAriaLabel(),c=v("accessibilityModeOff","The editor is not accessible at this time.");return r?v("accessibilityOffAriaLabel","{0} To enable screen reader optimized mode, use {1}",c,r):a?v("accessibilityOffAriaLabelNoKb","{0} To enable screen reader optimized mode, open the quick pick with {1} and run the command Toggle Screen Reader Accessibility Mode, which is currently not triggerable via keyboard.",c,a):l?v("accessibilityOffAriaLabelNoKbs","{0} Please assign a keybinding for the command Toggle Screen Reader Accessibility Mode by accessing the keybindings editor with {1} and run it.",c,l):c}return e.get(4)}_setAccessibilityOptions(e){this._accessibilitySupport=e.get(2);const t=e.get(3);this._accessibilitySupport===2&&t===Jd.accessibilityPageSize.defaultValue?this._accessibilityPageSize=500:this._accessibilityPageSize=t;const n=e.get(145).wrappingColumn;if(n!==-1&&this._accessibilitySupport!==1){const s=e.get(50);this._textAreaWrapping=!0,this._textAreaWidth=Math.round(n*s.typicalHalfwidthCharacterWidth)}else this._textAreaWrapping=!1,this._textAreaWidth=m3?0:1}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(145);this._setAccessibilityOptions(t),this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,this._contentHeight=i.height,this._fontInfo=t.get(50),this._lineHeight=t.get(67),this._emptySelectionClipboard=t.get(37),this._copyWithSyntaxHighlighting=t.get(25),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off");const{tabSize:n}=this._context.viewModel.model.getOptions();return this.textArea.domNode.style.tabSize=`${n*this._fontInfo.spaceWidth}px`,this.textArea.setAttribute("aria-label",this._getAriaLabel(t)),this.textArea.setAttribute("aria-required",t.get(5)?"true":"false"),this.textArea.setAttribute("tabindex",String(t.get(124))),(e.hasChanged(34)||e.hasChanged(91))&&this._ensureReadOnlyAttribute(),e.hasChanged(2)&&this._textAreaInput.writeNativeTextAreaContent("strategy changed"),!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),this._modelSelections=e.modelSelections.slice(0),this._textAreaInput.writeNativeTextAreaContent("selection changed"),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return this._scrollLeft=e.scrollLeft,this._scrollTop=e.scrollTop,!0}onZonesChanged(e){return!0}isFocused(){return this._textAreaInput.isFocused()}focusTextArea(){this._textAreaInput.focusTextArea()}getLastRenderData(){return this._lastRenderPosition}setAriaOptions(e){e.activeDescendant?(this.textArea.setAttribute("aria-haspopup","true"),this.textArea.setAttribute("aria-autocomplete","list"),this.textArea.setAttribute("aria-activedescendant",e.activeDescendant)):(this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),this.textArea.removeAttribute("aria-activedescendant")),e.role&&this.textArea.setAttribute("role",e.role)}_ensureReadOnlyAttribute(){const e=this._context.configuration.options;!_L.enabled||e.get(34)&&e.get(91)?this.textArea.setAttribute("readonly","true"):this.textArea.removeAttribute("readonly")}prepareRender(e){var t;this._primaryCursorPosition=new Z(this._selections[0].positionLineNumber,this._selections[0].positionColumn),this._primaryCursorVisibleRange=e.visibleRangeForPosition(this._primaryCursorPosition),(t=this._visibleTextArea)===null||t===void 0||t.prepareRender(e)}render(e){this._textAreaInput.writeNativeTextAreaContent("render"),this._render()}_render(){var e;if(this._visibleTextArea){const n=this._visibleTextArea.visibleTextareaStart,s=this._visibleTextArea.visibleTextareaEnd,r=this._visibleTextArea.startPosition,a=this._visibleTextArea.endPosition;if(r&&a&&n&&s&&s.left>=this._scrollLeft&&n.left<=this._scrollLeft+this._contentWidth){const l=this._context.viewLayout.getVerticalOffsetForLineNumber(this._primaryCursorPosition.lineNumber)-this._scrollTop,c=this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));let u=this._visibleTextArea.widthOfHiddenLineTextBefore,f=this._contentLeft+n.left-this._scrollLeft,g=s.left-n.left+1;if(f<this._contentLeft){const L=this._contentLeft-f;f+=L,u+=L,g-=L}g>this._contentWidth&&(g=this._contentWidth);const p=this._context.viewModel.getViewLineData(r.lineNumber),_=p.tokens.findTokenIndexAtOffset(r.column-1),b=p.tokens.findTokenIndexAtOffset(a.column-1),y=_===b,S=this._visibleTextArea.definePresentation(y?p.tokens.getPresentation(_):null);this.textArea.domNode.scrollTop=c*this._lineHeight,this.textArea.domNode.scrollLeft=u,this._doRender({lastRenderPosition:null,top:l,left:f,width:g,height:this._lineHeight,useCover:!1,color:(Qn.getColorMap()||[])[S.foreground],italic:S.italic,bold:S.bold,underline:S.underline,strikethrough:S.strikethrough})}return}if(!this._primaryCursorVisibleRange){this._renderAtTopLeft();return}const t=this._contentLeft+this._primaryCursorVisibleRange.left-this._scrollLeft;if(t<this._contentLeft||t>this._contentLeft+this._contentWidth){this._renderAtTopLeft();return}const i=this._context.viewLayout.getVerticalOffsetForLineNumber(this._selections[0].positionLineNumber)-this._scrollTop;if(i<0||i>this._contentHeight){this._renderAtTopLeft();return}if(Kt||this._accessibilitySupport===2){this._doRender({lastRenderPosition:this._primaryCursorPosition,top:i,left:this._textAreaWrapping?this._contentLeft:t,width:this._textAreaWidth,height:this._lineHeight,useCover:!1}),this.textArea.domNode.scrollLeft=this._primaryCursorVisibleRange.left;const n=(e=this._textAreaInput.textAreaState.newlineCountBeforeSelection)!==null&&e!==void 0?e:this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));this.textArea.domNode.scrollTop=n*this._lineHeight;return}this._doRender({lastRenderPosition:this._primaryCursorPosition,top:i,left:this._textAreaWrapping?this._contentLeft:t,width:this._textAreaWidth,height:m3?0:1,useCover:!1})}_newlinecount(e){let t=0,i=-1;do{if(i=e.indexOf(`
`,i+1),i===-1)break;t++}while(!0);return t}_renderAtTopLeft(){this._doRender({lastRenderPosition:null,top:0,left:0,width:this._textAreaWidth,height:m3?0:1,useCover:!0})}_doRender(e){this._lastRenderPosition=e.lastRenderPosition;const t=this.textArea,i=this.textAreaCover;vo(t,this._fontInfo),t.setTop(e.top),t.setLeft(e.left),t.setWidth(e.width),t.setHeight(e.height),t.setColor(e.color?ne.Format.CSS.formatHex(e.color):""),t.setFontStyle(e.italic?"italic":""),e.bold&&t.setFontWeight("bold"),t.setTextDecoration(`${e.underline?" underline":""}${e.strikethrough?" line-through":""}`),i.setTop(e.useCover?e.top:0),i.setLeft(e.useCover?e.left:0),i.setWidth(e.useCover?e.width:0),i.setHeight(e.useCover?e.height:0);const n=this._context.configuration.options;n.get(57)?i.setClassName("monaco-editor-background textAreaCover "+Av.OUTER_CLASS_NAME):n.get(68).renderType!==0?i.setClassName("monaco-editor-background textAreaCover "+YD.CLASS_NAME):i.setClassName("monaco-editor-background textAreaCover")}};T9=wke([QZ(3,Bi),QZ(4,ct)],T9);function Ske(o,e,t,i){if(e.length===0)return 0;const n=o.createElement("div");n.style.position="absolute",n.style.top="-50000px",n.style.width="50000px";const s=o.createElement("span");vo(s,t),s.style.whiteSpace="pre",s.style.tabSize=`${i*t.spaceWidth}px`,s.append(e),n.appendChild(s),o.body.appendChild(n);const r=s.offsetWidth;return o.body.removeChild(n),r}function Lke(o,e,t){let i=0;for(let s=0;s<o.length;s++)o.charAt(s)==="	"?i=Vs.nextIndentTabStop(i,e):i++;let n="";if(!t){const s=Math.floor(i/e);i=i%e;for(let r=0;r<s;r++)n+="	"}for(let s=0;s<i;s++)n+=" ";return n}function DH(o,e,t){let i=gr(o);return i===-1&&(i=o.length),Lke(o.substring(0,i),e,t)+o.substring(i)}const xke=()=>!0,Dke=()=>!1,kke=o=>o===" "||o==="	";class D0{static shouldRecreate(e){return e.hasChanged(145)||e.hasChanged(131)||e.hasChanged(37)||e.hasChanged(77)||e.hasChanged(79)||e.hasChanged(80)||e.hasChanged(6)||e.hasChanged(7)||e.hasChanged(11)||e.hasChanged(9)||e.hasChanged(10)||e.hasChanged(14)||e.hasChanged(128)||e.hasChanged(50)||e.hasChanged(91)||e.hasChanged(130)}constructor(e,t,i,n){var s;this.languageConfigurationService=n,this._cursorMoveConfigurationBrand=void 0,this._languageId=e;const r=i.options,a=r.get(145),l=r.get(50);this.readOnly=r.get(91),this.tabSize=t.tabSize,this.indentSize=t.indentSize,this.insertSpaces=t.insertSpaces,this.stickyTabStops=r.get(116),this.lineHeight=l.lineHeight,this.typicalHalfwidthCharacterWidth=l.typicalHalfwidthCharacterWidth,this.pageSize=Math.max(1,Math.floor(a.height/this.lineHeight)-2),this.useTabStops=r.get(128),this.wordSeparators=r.get(131),this.emptySelectionClipboard=r.get(37),this.copyWithSyntaxHighlighting=r.get(25),this.multiCursorMergeOverlapping=r.get(77),this.multiCursorPaste=r.get(79),this.multiCursorLimit=r.get(80),this.autoClosingBrackets=r.get(6),this.autoClosingComments=r.get(7),this.autoClosingQuotes=r.get(11),this.autoClosingDelete=r.get(9),this.autoClosingOvertype=r.get(10),this.autoSurround=r.get(14),this.autoIndent=r.get(12),this.wordSegmenterLocales=r.get(130),this.surroundingPairs={},this._electricChars=null,this.shouldAutoCloseBefore={quote:this._getShouldAutoClose(e,this.autoClosingQuotes,!0),comment:this._getShouldAutoClose(e,this.autoClosingComments,!1),bracket:this._getShouldAutoClose(e,this.autoClosingBrackets,!1)},this.autoClosingPairs=this.languageConfigurationService.getLanguageConfiguration(e).getAutoClosingPairs();const c=this.languageConfigurationService.getLanguageConfiguration(e).getSurroundingPairs();if(c)for(const f of c)this.surroundingPairs[f.open]=f.close;const u=this.languageConfigurationService.getLanguageConfiguration(e).comments;this.blockCommentStartToken=(s=u==null?void 0:u.blockCommentStartToken)!==null&&s!==void 0?s:null}get electricChars(){var e;if(!this._electricChars){this._electricChars={};const t=(e=this.languageConfigurationService.getLanguageConfiguration(this._languageId).electricCharacter)===null||e===void 0?void 0:e.getElectricCharacters();if(t)for(const i of t)this._electricChars[i]=!0}return this._electricChars}onElectricCharacter(e,t,i){const n=TA(t,i-1),s=this.languageConfigurationService.getLanguageConfiguration(n.languageId).electricCharacter;return s?s.onElectricCharacter(e,n,i-n.firstCharOffset):null}normalizeIndentation(e){return DH(e,this.indentSize,this.insertSpaces)}_getShouldAutoClose(e,t,i){switch(t){case"beforeWhitespace":return kke;case"languageDefined":return this._getLanguageDefinedShouldAutoClose(e,i);case"always":return xke;case"never":return Dke}}_getLanguageDefinedShouldAutoClose(e,t){const i=this.languageConfigurationService.getLanguageConfiguration(e).getAutoCloseBeforeSet(t);return n=>i.indexOf(n)!==-1}visibleColumnFromColumn(e,t){return Vs.visibleColumnFromColumn(e.getLineContent(t.lineNumber),t.column,this.tabSize)}columnFromVisibleColumn(e,t,i){const n=Vs.columnFromVisibleColumn(e.getLineContent(t),i,this.tabSize),s=e.getLineMinColumn(t);if(n<s)return s;const r=e.getLineMaxColumn(t);return n>r?r:n}}let fi=class rse{static fromModelState(e){return new Eke(e)}static fromViewState(e){return new Ike(e)}static fromModelSelection(e){const t=Xe.liftSelection(e),i=new go(A.fromPositions(t.getSelectionStart()),0,0,t.getPosition(),0);return rse.fromModelState(i)}static fromModelSelections(e){const t=[];for(let i=0,n=e.length;i<n;i++)t[i]=this.fromModelSelection(e[i]);return t}constructor(e,t){this._cursorStateBrand=void 0,this.modelState=e,this.viewState=t}equals(e){return this.viewState.equals(e.viewState)&&this.modelState.equals(e.modelState)}};class Eke{constructor(e){this.modelState=e,this.viewState=null}}class Ike{constructor(e){this.modelState=null,this.viewState=e}}class go{constructor(e,t,i,n,s){this.selectionStart=e,this.selectionStartKind=t,this.selectionStartLeftoverVisibleColumns=i,this.position=n,this.leftoverVisibleColumns=s,this._singleCursorStateBrand=void 0,this.selection=go._computeSelection(this.selectionStart,this.position)}equals(e){return this.selectionStartLeftoverVisibleColumns===e.selectionStartLeftoverVisibleColumns&&this.leftoverVisibleColumns===e.leftoverVisibleColumns&&this.selectionStartKind===e.selectionStartKind&&this.position.equals(e.position)&&this.selectionStart.equalsRange(e.selectionStart)}hasSelection(){return!this.selection.isEmpty()||!this.selectionStart.isEmpty()}move(e,t,i,n){return e?new go(this.selectionStart,this.selectionStartKind,this.selectionStartLeftoverVisibleColumns,new Z(t,i),n):new go(new A(t,i,t,i),0,n,new Z(t,i),n)}static _computeSelection(e,t){return e.isEmpty()||!t.isBeforeOrEqual(e.getStartPosition())?Xe.fromPositions(e.getStartPosition(),t):Xe.fromPositions(e.getEndPosition(),t)}}class ra{constructor(e,t,i){this._editOperationResultBrand=void 0,this.type=e,this.commands=t,this.shouldPushStackElementBefore=i.shouldPushStackElementBefore,this.shouldPushStackElementAfter=i.shouldPushStackElementAfter}}function lp(o){return o==="'"||o==='"'||o==="`"}class Q_{static columnSelect(e,t,i,n,s,r){const a=Math.abs(s-i)+1,l=i>s,c=n>r,u=n<r,f=[];for(let g=0;g<a;g++){const p=i+(l?-g:g),_=e.columnFromVisibleColumn(t,p,n),b=e.columnFromVisibleColumn(t,p,r),y=e.visibleColumnFromColumn(t,new Z(p,_)),S=e.visibleColumnFromColumn(t,new Z(p,b));u&&(y>r||S<n)||c&&(S>n||y<r)||f.push(new go(new A(p,_,p,_),0,0,new Z(p,b),0))}if(f.length===0)for(let g=0;g<a;g++){const p=i+(l?-g:g),_=t.getLineMaxColumn(p);f.push(new go(new A(p,_,p,_),0,0,new Z(p,_),0))}return{viewStates:f,reversed:l,fromLineNumber:i,fromVisualColumn:n,toLineNumber:s,toVisualColumn:r}}static columnSelectLeft(e,t,i){let n=i.toViewVisualColumn;return n>0&&n--,Q_.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,i.toViewLineNumber,n)}static columnSelectRight(e,t,i){let n=0;const s=Math.min(i.fromViewLineNumber,i.toViewLineNumber),r=Math.max(i.fromViewLineNumber,i.toViewLineNumber);for(let l=s;l<=r;l++){const c=t.getLineMaxColumn(l),u=e.visibleColumnFromColumn(t,new Z(l,c));n=Math.max(n,u)}let a=i.toViewVisualColumn;return a<n&&a++,this.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,i.toViewLineNumber,a)}static columnSelectUp(e,t,i,n){const s=n?e.pageSize:1,r=Math.max(1,i.toViewLineNumber-s);return this.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,r,i.toViewVisualColumn)}static columnSelectDown(e,t,i,n){const s=n?e.pageSize:1,r=Math.min(t.getLineCount(),i.toViewLineNumber+s);return this.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,r,i.toViewVisualColumn)}}class Do{constructor(e,t,i=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=i}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const n=t.getInverseEditOperations()[0].range;return Xe.fromPositions(n.getEndPosition())}}class Tke{constructor(e,t){this._range=e,this._text=t}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const n=t.getInverseEditOperations()[0].range;return Xe.fromRange(n,0)}}class rT{constructor(e,t,i=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=i}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const n=t.getInverseEditOperations()[0].range;return Xe.fromPositions(n.getStartPosition())}}class DN{constructor(e,t,i,n,s=!1){this._range=e,this._text=t,this._columnDeltaOffset=n,this._lineNumberDeltaOffset=i,this.insertsAutoWhitespace=s}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const n=t.getInverseEditOperations()[0].range;return Xe.fromPositions(n.getEndPosition().delta(this._lineNumberDeltaOffset,this._columnDeltaOffset))}}class kH{constructor(e,t,i,n=!1){this._range=e,this._text=t,this._initialSelection=i,this._forceMoveMarkers=n,this._selectionId=null}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text,this._forceMoveMarkers),this._selectionId=t.trackSelection(this._initialSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}class _3{constructor(e,t,i){this._cursorPositionBrand=void 0,this.lineNumber=e,this.column=t,this.leftoverVisibleColumns=i}}class Ni{static leftPosition(e,t){if(t.column>e.getLineMinColumn(t.lineNumber))return t.delta(void 0,-fie(e.getLineContent(t.lineNumber),t.column-1));if(t.lineNumber>1){const i=t.lineNumber-1;return new Z(i,e.getLineMaxColumn(i))}else return t}static leftPositionAtomicSoftTabs(e,t,i){if(t.column<=e.getLineIndentColumn(t.lineNumber)){const n=e.getLineMinColumn(t.lineNumber),s=e.getLineContent(t.lineNumber),r=vx.atomicPosition(s,t.column-1,i,0);if(r!==-1&&r+1>=n)return new Z(t.lineNumber,r+1)}return this.leftPosition(e,t)}static left(e,t,i){const n=e.stickyTabStops?Ni.leftPositionAtomicSoftTabs(t,i,e.tabSize):Ni.leftPosition(t,i);return new _3(n.lineNumber,n.column,0)}static moveLeft(e,t,i,n,s){let r,a;if(i.hasSelection()&&!n)r=i.selection.startLineNumber,a=i.selection.startColumn;else{const l=i.position.delta(void 0,-(s-1)),c=t.normalizePosition(Ni.clipPositionColumn(l,t),0),u=Ni.left(e,t,c);r=u.lineNumber,a=u.column}return i.move(n,r,a,0)}static clipPositionColumn(e,t){return new Z(e.lineNumber,Ni.clipRange(e.column,t.getLineMinColumn(e.lineNumber),t.getLineMaxColumn(e.lineNumber)))}static clipRange(e,t,i){return e<t?t:e>i?i:e}static rightPosition(e,t,i){return i<e.getLineMaxColumn(t)?i=i+VV(e.getLineContent(t),i-1):t<e.getLineCount()&&(t=t+1,i=e.getLineMinColumn(t)),new Z(t,i)}static rightPositionAtomicSoftTabs(e,t,i,n,s){if(i<e.getLineIndentColumn(t)){const r=e.getLineContent(t),a=vx.atomicPosition(r,i-1,n,1);if(a!==-1)return new Z(t,a+1)}return this.rightPosition(e,t,i)}static right(e,t,i){const n=e.stickyTabStops?Ni.rightPositionAtomicSoftTabs(t,i.lineNumber,i.column,e.tabSize,e.indentSize):Ni.rightPosition(t,i.lineNumber,i.column);return new _3(n.lineNumber,n.column,0)}static moveRight(e,t,i,n,s){let r,a;if(i.hasSelection()&&!n)r=i.selection.endLineNumber,a=i.selection.endColumn;else{const l=i.position.delta(void 0,s-1),c=t.normalizePosition(Ni.clipPositionColumn(l,t),1),u=Ni.right(e,t,c);r=u.lineNumber,a=u.column}return i.move(n,r,a,0)}static vertical(e,t,i,n,s,r,a,l){const c=Vs.visibleColumnFromColumn(t.getLineContent(i),n,e.tabSize)+s,u=t.getLineCount(),f=i===1&&n===1,g=i===u&&n===t.getLineMaxColumn(i),p=r<i?f:g;if(i=r,i<1?(i=1,a?n=t.getLineMinColumn(i):n=Math.min(t.getLineMaxColumn(i),n)):i>u?(i=u,a?n=t.getLineMaxColumn(i):n=Math.min(t.getLineMaxColumn(i),n)):n=e.columnFromVisibleColumn(t,i,c),p?s=0:s=c-Vs.visibleColumnFromColumn(t.getLineContent(i),n,e.tabSize),l!==void 0){const _=new Z(i,n),b=t.normalizePosition(_,l);s=s+(n-b.column),i=b.lineNumber,n=b.column}return new _3(i,n,s)}static down(e,t,i,n,s,r,a){return this.vertical(e,t,i,n,s,i+r,a,4)}static moveDown(e,t,i,n,s){let r,a;i.hasSelection()&&!n?(r=i.selection.endLineNumber,a=i.selection.endColumn):(r=i.position.lineNumber,a=i.position.column);let l=0,c;do if(c=Ni.down(e,t,r+l,a,i.leftoverVisibleColumns,s,!0),t.normalizePosition(new Z(c.lineNumber,c.column),2).lineNumber>r)break;while(l++<10&&r+l<t.getLineCount());return i.move(n,c.lineNumber,c.column,c.leftoverVisibleColumns)}static translateDown(e,t,i){const n=i.selection,s=Ni.down(e,t,n.selectionStartLineNumber,n.selectionStartColumn,i.selectionStartLeftoverVisibleColumns,1,!1),r=Ni.down(e,t,n.positionLineNumber,n.positionColumn,i.leftoverVisibleColumns,1,!1);return new go(new A(s.lineNumber,s.column,s.lineNumber,s.column),0,s.leftoverVisibleColumns,new Z(r.lineNumber,r.column),r.leftoverVisibleColumns)}static up(e,t,i,n,s,r,a){return this.vertical(e,t,i,n,s,i-r,a,3)}static moveUp(e,t,i,n,s){let r,a;i.hasSelection()&&!n?(r=i.selection.startLineNumber,a=i.selection.startColumn):(r=i.position.lineNumber,a=i.position.column);const l=Ni.up(e,t,r,a,i.leftoverVisibleColumns,s,!0);return i.move(n,l.lineNumber,l.column,l.leftoverVisibleColumns)}static translateUp(e,t,i){const n=i.selection,s=Ni.up(e,t,n.selectionStartLineNumber,n.selectionStartColumn,i.selectionStartLeftoverVisibleColumns,1,!1),r=Ni.up(e,t,n.positionLineNumber,n.positionColumn,i.leftoverVisibleColumns,1,!1);return new go(new A(s.lineNumber,s.column,s.lineNumber,s.column),0,s.leftoverVisibleColumns,new Z(r.lineNumber,r.column),r.leftoverVisibleColumns)}static _isBlankLine(e,t){return e.getLineFirstNonWhitespaceColumn(t)===0}static moveToPrevBlankLine(e,t,i,n){let s=i.position.lineNumber;for(;s>1&&this._isBlankLine(t,s);)s--;for(;s>1&&!this._isBlankLine(t,s);)s--;return i.move(n,s,t.getLineMinColumn(s),0)}static moveToNextBlankLine(e,t,i,n){const s=t.getLineCount();let r=i.position.lineNumber;for(;r<s&&this._isBlankLine(t,r);)r++;for(;r<s&&!this._isBlankLine(t,r);)r++;return i.move(n,r,t.getLineMinColumn(r),0)}static moveToBeginningOfLine(e,t,i,n){const s=i.position.lineNumber,r=t.getLineMinColumn(s),a=t.getLineFirstNonWhitespaceColumn(s)||r;let l;return i.position.column===a?l=r:l=a,i.move(n,s,l,0)}static moveToEndOfLine(e,t,i,n,s){const r=i.position.lineNumber,a=t.getLineMaxColumn(r);return i.move(n,r,a,s?1073741824-a:0)}static moveToBeginningOfBuffer(e,t,i,n){return i.move(n,1,1,0)}static moveToEndOfBuffer(e,t,i,n){const s=t.getLineCount(),r=t.getLineMaxColumn(s);return i.move(n,s,r,0)}}class Pv{static deleteRight(e,t,i,n){const s=[];let r=e!==3;for(let a=0,l=n.length;a<l;a++){const c=n[a];let u=c;if(u.isEmpty()){const f=c.getPosition(),g=Ni.right(t,i,f);u=new A(g.lineNumber,g.column,f.lineNumber,f.column)}if(u.isEmpty()){s[a]=null;continue}u.startLineNumber!==u.endLineNumber&&(r=!0),s[a]=new Do(u,"")}return[r,s]}static isAutoClosingPairDelete(e,t,i,n,s,r,a){if(t==="never"&&i==="never"||e==="never")return!1;for(let l=0,c=r.length;l<c;l++){const u=r[l],f=u.getPosition();if(!u.isEmpty())return!1;const g=s.getLineContent(f.lineNumber);if(f.column<2||f.column>=g.length+1)return!1;const p=g.charAt(f.column-2),_=n.get(p);if(!_)return!1;if(lp(p)){if(i==="never")return!1}else if(t==="never")return!1;const b=g.charAt(f.column-1);let y=!1;for(const S of _)S.open===p&&S.close===b&&(y=!0);if(!y)return!1;if(e==="auto"){let S=!1;for(let L=0,x=a.length;L<x;L++){const D=a[L];if(f.lineNumber===D.startLineNumber&&f.column===D.startColumn){S=!0;break}}if(!S)return!1}}return!0}static _runAutoClosingPairDelete(e,t,i){const n=[];for(let s=0,r=i.length;s<r;s++){const a=i[s].getPosition(),l=new A(a.lineNumber,a.column-1,a.lineNumber,a.column+1);n[s]=new Do(l,"")}return[!0,n]}static deleteLeft(e,t,i,n,s){if(this.isAutoClosingPairDelete(t.autoClosingDelete,t.autoClosingBrackets,t.autoClosingQuotes,t.autoClosingPairs.autoClosingPairsOpenByEnd,i,n,s))return this._runAutoClosingPairDelete(t,i,n);const r=[];let a=e!==2;for(let l=0,c=n.length;l<c;l++){const u=Pv.getDeleteRange(n[l],i,t);if(u.isEmpty()){r[l]=null;continue}u.startLineNumber!==u.endLineNumber&&(a=!0),r[l]=new Do(u,"")}return[a,r]}static getDeleteRange(e,t,i){if(!e.isEmpty())return e;const n=e.getPosition();if(i.useTabStops&&n.column>1){const s=t.getLineContent(n.lineNumber),r=gr(s),a=r===-1?s.length+1:r+1;if(n.column<=a){const l=i.visibleColumnFromColumn(t,n),c=Vs.prevIndentTabStop(l,i.indentSize),u=i.columnFromVisibleColumn(t,n.lineNumber,c);return new A(n.lineNumber,u,n.lineNumber,n.column)}}return A.fromPositions(Pv.getPositionAfterDeleteLeft(n,t),n)}static getPositionAfterDeleteLeft(e,t){if(e.column>1){const i=WCe(e.column-1,t.getLineContent(e.lineNumber));return e.with(void 0,i+1)}else if(e.lineNumber>1){const i=e.lineNumber-1;return new Z(i,t.getLineMaxColumn(i))}else return e}static cut(e,t,i){const n=[];let s=null;i.sort((r,a)=>Z.compare(r.getStartPosition(),a.getEndPosition()));for(let r=0,a=i.length;r<a;r++){const l=i[r];if(l.isEmpty())if(e.emptySelectionClipboard){const c=l.getPosition();let u,f,g,p;c.lineNumber<t.getLineCount()?(u=c.lineNumber,f=1,g=c.lineNumber+1,p=1):c.lineNumber>1&&(s==null?void 0:s.endLineNumber)!==c.lineNumber?(u=c.lineNumber-1,f=t.getLineMaxColumn(c.lineNumber-1),g=c.lineNumber,p=t.getLineMaxColumn(c.lineNumber)):(u=c.lineNumber,f=1,g=c.lineNumber,p=t.getLineMaxColumn(c.lineNumber));const _=new A(u,f,g,p);s=_,_.isEmpty()?n[r]=null:n[r]=new Do(_,"")}else n[r]=null;else n[r]=new Do(l,"")}return new ra(0,n,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}}class Di{static _createWord(e,t,i,n,s){return{start:n,end:s,wordType:t,nextCharClass:i}}static _createIntlWord(e,t){return{start:e.index,end:e.index+e.segment.length,wordType:1,nextCharClass:t}}static _findPreviousWordOnLine(e,t,i){const n=t.getLineContent(i.lineNumber);return this._doFindPreviousWordOnLine(n,e,i)}static _doFindPreviousWordOnLine(e,t,i){let n=0;const s=t.findPrevIntlWordBeforeOrAtOffset(e,i.column-2);for(let r=i.column-2;r>=0;r--){const a=e.charCodeAt(r),l=t.get(a);if(s&&r===s.index)return this._createIntlWord(s,l);if(l===0){if(n===2)return this._createWord(e,n,l,r+1,this._findEndOfWord(e,t,n,r+1));n=1}else if(l===2){if(n===1)return this._createWord(e,n,l,r+1,this._findEndOfWord(e,t,n,r+1));n=2}else if(l===1&&n!==0)return this._createWord(e,n,l,r+1,this._findEndOfWord(e,t,n,r+1))}return n!==0?this._createWord(e,n,1,0,this._findEndOfWord(e,t,n,0)):null}static _findEndOfWord(e,t,i,n){const s=t.findNextIntlWordAtOrAfterOffset(e,n),r=e.length;for(let a=n;a<r;a++){const l=e.charCodeAt(a),c=t.get(l);if(s&&a===s.index+s.segment.length||c===1||i===1&&c===2||i===2&&c===0)return a}return r}static _findNextWordOnLine(e,t,i){const n=t.getLineContent(i.lineNumber);return this._doFindNextWordOnLine(n,e,i)}static _doFindNextWordOnLine(e,t,i){let n=0;const s=e.length,r=t.findNextIntlWordAtOrAfterOffset(e,i.column-1);for(let a=i.column-1;a<s;a++){const l=e.charCodeAt(a),c=t.get(l);if(r&&a===r.index)return this._createIntlWord(r,c);if(c===0){if(n===2)return this._createWord(e,n,c,this._findStartOfWord(e,t,n,a-1),a);n=1}else if(c===2){if(n===1)return this._createWord(e,n,c,this._findStartOfWord(e,t,n,a-1),a);n=2}else if(c===1&&n!==0)return this._createWord(e,n,c,this._findStartOfWord(e,t,n,a-1),a)}return n!==0?this._createWord(e,n,1,this._findStartOfWord(e,t,n,s-1),s):null}static _findStartOfWord(e,t,i,n){const s=t.findPrevIntlWordBeforeOrAtOffset(e,n);for(let r=n;r>=0;r--){const a=e.charCodeAt(r),l=t.get(a);if(s&&r===s.index)return r;if(l===1||i===1&&l===2||i===2&&l===0)return r+1}return 0}static moveWordLeft(e,t,i,n){let s=i.lineNumber,r=i.column;r===1&&s>1&&(s=s-1,r=t.getLineMaxColumn(s));let a=Di._findPreviousWordOnLine(e,t,new Z(s,r));if(n===0)return new Z(s,a?a.start+1:1);if(n===1)return a&&a.wordType===2&&a.end-a.start===1&&a.nextCharClass===0&&(a=Di._findPreviousWordOnLine(e,t,new Z(s,a.start+1))),new Z(s,a?a.start+1:1);if(n===3){for(;a&&a.wordType===2;)a=Di._findPreviousWordOnLine(e,t,new Z(s,a.start+1));return new Z(s,a?a.start+1:1)}return a&&r<=a.end+1&&(a=Di._findPreviousWordOnLine(e,t,new Z(s,a.start+1))),new Z(s,a?a.end+1:1)}static _moveWordPartLeft(e,t){const i=t.lineNumber,n=e.getLineMaxColumn(i);if(t.column===1)return i>1?new Z(i-1,e.getLineMaxColumn(i-1)):t;const s=e.getLineContent(i);for(let r=t.column-1;r>1;r--){const a=s.charCodeAt(r-2),l=s.charCodeAt(r-1);if(a===95&&l!==95)return new Z(i,r);if(a===45&&l!==45)return new Z(i,r);if((kp(a)||jI(a))&&Fu(l))return new Z(i,r);if(Fu(a)&&Fu(l)&&r+1<n){const c=s.charCodeAt(r);if(kp(c)||jI(c))return new Z(i,r)}}return new Z(i,1)}static moveWordRight(e,t,i,n){let s=i.lineNumber,r=i.column,a=!1;r===t.getLineMaxColumn(s)&&s<t.getLineCount()&&(a=!0,s=s+1,r=1);let l=Di._findNextWordOnLine(e,t,new Z(s,r));if(n===2)l&&l.wordType===2&&l.end-l.start===1&&l.nextCharClass===0&&(l=Di._findNextWordOnLine(e,t,new Z(s,l.end+1))),l?r=l.end+1:r=t.getLineMaxColumn(s);else if(n===3){for(a&&(r=0);l&&(l.wordType===2||l.start+1<=r);)l=Di._findNextWordOnLine(e,t,new Z(s,l.end+1));l?r=l.start+1:r=t.getLineMaxColumn(s)}else l&&!a&&r>=l.start+1&&(l=Di._findNextWordOnLine(e,t,new Z(s,l.end+1))),l?r=l.start+1:r=t.getLineMaxColumn(s);return new Z(s,r)}static _moveWordPartRight(e,t){const i=t.lineNumber,n=e.getLineMaxColumn(i);if(t.column===n)return i<e.getLineCount()?new Z(i+1,1):t;const s=e.getLineContent(i);for(let r=t.column+1;r<n;r++){const a=s.charCodeAt(r-2),l=s.charCodeAt(r-1);if(a!==95&&l===95)return new Z(i,r);if(a!==45&&l===45)return new Z(i,r);if((kp(a)||jI(a))&&Fu(l))return new Z(i,r);if(Fu(a)&&Fu(l)&&r+1<n){const c=s.charCodeAt(r);if(kp(c)||jI(c))return new Z(i,r)}}return new Z(i,n)}static _deleteWordLeftWhitespace(e,t){const i=e.getLineContent(t.lineNumber),n=t.column-2,s=Bd(i,n);return s+1<n?new A(t.lineNumber,s+2,t.lineNumber,t.column):null}static deleteWordLeft(e,t){const i=e.wordSeparators,n=e.model,s=e.selection,r=e.whitespaceHeuristics;if(!s.isEmpty())return s;if(Pv.isAutoClosingPairDelete(e.autoClosingDelete,e.autoClosingBrackets,e.autoClosingQuotes,e.autoClosingPairs.autoClosingPairsOpenByEnd,e.model,[e.selection],e.autoClosedCharacters)){const f=e.selection.getPosition();return new A(f.lineNumber,f.column-1,f.lineNumber,f.column+1)}const a=new Z(s.positionLineNumber,s.positionColumn);let l=a.lineNumber,c=a.column;if(l===1&&c===1)return null;if(r){const f=this._deleteWordLeftWhitespace(n,a);if(f)return f}let u=Di._findPreviousWordOnLine(i,n,a);return t===0?u?c=u.start+1:c>1?c=1:(l--,c=n.getLineMaxColumn(l)):(u&&c<=u.end+1&&(u=Di._findPreviousWordOnLine(i,n,new Z(l,u.start+1))),u?c=u.end+1:c>1?c=1:(l--,c=n.getLineMaxColumn(l))),new A(l,c,a.lineNumber,a.column)}static deleteInsideWord(e,t,i){if(!i.isEmpty())return i;const n=new Z(i.positionLineNumber,i.positionColumn),s=this._deleteInsideWordWhitespace(t,n);return s||this._deleteInsideWordDetermineDeleteRange(e,t,n)}static _charAtIsWhitespace(e,t){const i=e.charCodeAt(t);return i===32||i===9}static _deleteInsideWordWhitespace(e,t){const i=e.getLineContent(t.lineNumber),n=i.length;if(n===0)return null;let s=Math.max(t.column-2,0);if(!this._charAtIsWhitespace(i,s))return null;let r=Math.min(t.column-1,n-1);if(!this._charAtIsWhitespace(i,r))return null;for(;s>0&&this._charAtIsWhitespace(i,s-1);)s--;for(;r+1<n&&this._charAtIsWhitespace(i,r+1);)r++;return new A(t.lineNumber,s+1,t.lineNumber,r+2)}static _deleteInsideWordDetermineDeleteRange(e,t,i){const n=t.getLineContent(i.lineNumber),s=n.length;if(s===0)return i.lineNumber>1?new A(i.lineNumber-1,t.getLineMaxColumn(i.lineNumber-1),i.lineNumber,1):i.lineNumber<t.getLineCount()?new A(i.lineNumber,1,i.lineNumber+1,1):new A(i.lineNumber,1,i.lineNumber,1);const r=f=>f.start+1<=i.column&&i.column<=f.end+1,a=(f,g)=>(f=Math.min(f,i.column),g=Math.max(g,i.column),new A(i.lineNumber,f,i.lineNumber,g)),l=f=>{let g=f.start+1,p=f.end+1,_=!1;for(;p-1<s&&this._charAtIsWhitespace(n,p-1);)_=!0,p++;if(!_)for(;g>1&&this._charAtIsWhitespace(n,g-2);)g--;return a(g,p)},c=Di._findPreviousWordOnLine(e,t,i);if(c&&r(c))return l(c);const u=Di._findNextWordOnLine(e,t,i);return u&&r(u)?l(u):c&&u?a(c.end+1,u.start+1):c?a(c.start+1,c.end+1):u?a(u.start+1,u.end+1):a(1,s+1)}static _deleteWordPartLeft(e,t){if(!t.isEmpty())return t;const i=t.getPosition(),n=Di._moveWordPartLeft(e,i);return new A(i.lineNumber,i.column,n.lineNumber,n.column)}static _findFirstNonWhitespaceChar(e,t){const i=e.length;for(let n=t;n<i;n++){const s=e.charAt(n);if(s!==" "&&s!=="	")return n}return i}static _deleteWordRightWhitespace(e,t){const i=e.getLineContent(t.lineNumber),n=t.column-1,s=this._findFirstNonWhitespaceChar(i,n);return n+1<s?new A(t.lineNumber,t.column,t.lineNumber,s+1):null}static deleteWordRight(e,t){const i=e.wordSeparators,n=e.model,s=e.selection,r=e.whitespaceHeuristics;if(!s.isEmpty())return s;const a=new Z(s.positionLineNumber,s.positionColumn);let l=a.lineNumber,c=a.column;const u=n.getLineCount(),f=n.getLineMaxColumn(l);if(l===u&&c===f)return null;if(r){const p=this._deleteWordRightWhitespace(n,a);if(p)return p}let g=Di._findNextWordOnLine(i,n,a);return t===2?g?c=g.end+1:c<f||l===u?c=f:(l++,g=Di._findNextWordOnLine(i,n,new Z(l,1)),g?c=g.start+1:c=n.getLineMaxColumn(l)):(g&&c>=g.start+1&&(g=Di._findNextWordOnLine(i,n,new Z(l,g.end+1))),g?c=g.start+1:c<f||l===u?c=f:(l++,g=Di._findNextWordOnLine(i,n,new Z(l,1)),g?c=g.start+1:c=n.getLineMaxColumn(l))),new A(l,c,a.lineNumber,a.column)}static _deleteWordPartRight(e,t){if(!t.isEmpty())return t;const i=t.getPosition(),n=Di._moveWordPartRight(e,i);return new A(i.lineNumber,i.column,n.lineNumber,n.column)}static _createWordAtPosition(e,t,i){const n=new A(t,i.start+1,t,i.end+1);return{word:e.getValueInRange(n),startColumn:n.startColumn,endColumn:n.endColumn}}static getWordAtPosition(e,t,i,n){const s=hc(t,i),r=Di._findPreviousWordOnLine(s,e,n);if(r&&r.wordType===1&&r.start<=n.column-1&&n.column-1<=r.end)return Di._createWordAtPosition(e,n.lineNumber,r);const a=Di._findNextWordOnLine(s,e,n);return a&&a.wordType===1&&a.start<=n.column-1&&n.column-1<=a.end?Di._createWordAtPosition(e,n.lineNumber,a):null}static word(e,t,i,n,s){const r=hc(e.wordSeparators,e.wordSegmenterLocales),a=Di._findPreviousWordOnLine(r,t,s),l=Di._findNextWordOnLine(r,t,s);if(!n){let p,_;return a&&a.wordType===1&&a.start<=s.column-1&&s.column-1<=a.end?(p=a.start+1,_=a.end+1):l&&l.wordType===1&&l.start<=s.column-1&&s.column-1<=l.end?(p=l.start+1,_=l.end+1):(a?p=a.end+1:p=1,l?_=l.start+1:_=t.getLineMaxColumn(s.lineNumber)),new go(new A(s.lineNumber,p,s.lineNumber,_),1,0,new Z(s.lineNumber,_),0)}let c,u;a&&a.wordType===1&&a.start<s.column-1&&s.column-1<a.end?(c=a.start+1,u=a.end+1):l&&l.wordType===1&&l.start<s.column-1&&s.column-1<l.end?(c=l.start+1,u=l.end+1):(c=s.column,u=s.column);const f=s.lineNumber;let g;if(i.selectionStart.containsPosition(s))g=i.selectionStart.endColumn;else if(s.isBeforeOrEqual(i.selectionStart.getStartPosition())){g=c;const p=new Z(f,g);i.selectionStart.containsPosition(p)&&(g=i.selectionStart.endColumn)}else{g=u;const p=new Z(f,g);i.selectionStart.containsPosition(p)&&(g=i.selectionStart.startColumn)}return i.move(!0,f,g,0)}}class UA extends Di{static deleteWordPartLeft(e){const t=aT([Di.deleteWordLeft(e,0),Di.deleteWordLeft(e,2),Di._deleteWordPartLeft(e.model,e.selection)]);return t.sort(A.compareRangesUsingEnds),t[2]}static deleteWordPartRight(e){const t=aT([Di.deleteWordRight(e,0),Di.deleteWordRight(e,2),Di._deleteWordPartRight(e.model,e.selection)]);return t.sort(A.compareRangesUsingStarts),t[0]}static moveWordPartLeft(e,t,i){const n=aT([Di.moveWordLeft(e,t,i,0),Di.moveWordLeft(e,t,i,2),Di._moveWordPartLeft(t,i)]);return n.sort(Z.compare),n[2]}static moveWordPartRight(e,t,i){const n=aT([Di.moveWordRight(e,t,i,0),Di.moveWordRight(e,t,i,2),Di._moveWordPartRight(t,i)]);return n.sort(Z.compare),n[0]}}function aT(o){return o.filter(e=>!!e)}class ho{static addCursorDown(e,t,i){const n=[];let s=0;for(let r=0,a=t.length;r<a;r++){const l=t[r];n[s++]=new fi(l.modelState,l.viewState),i?n[s++]=fi.fromModelState(Ni.translateDown(e.cursorConfig,e.model,l.modelState)):n[s++]=fi.fromViewState(Ni.translateDown(e.cursorConfig,e,l.viewState))}return n}static addCursorUp(e,t,i){const n=[];let s=0;for(let r=0,a=t.length;r<a;r++){const l=t[r];n[s++]=new fi(l.modelState,l.viewState),i?n[s++]=fi.fromModelState(Ni.translateUp(e.cursorConfig,e.model,l.modelState)):n[s++]=fi.fromViewState(Ni.translateUp(e.cursorConfig,e,l.viewState))}return n}static moveToBeginningOfLine(e,t,i){const n=[];for(let s=0,r=t.length;s<r;s++){const a=t[s];n[s]=this._moveToLineStart(e,a,i)}return n}static _moveToLineStart(e,t,i){const n=t.viewState.position.column,s=t.modelState.position.column,r=n===s,a=t.viewState.position.lineNumber,l=e.getLineFirstNonWhitespaceColumn(a);return!r&&!(n===l)?this._moveToLineStartByView(e,t,i):this._moveToLineStartByModel(e,t,i)}static _moveToLineStartByView(e,t,i){return fi.fromViewState(Ni.moveToBeginningOfLine(e.cursorConfig,e,t.viewState,i))}static _moveToLineStartByModel(e,t,i){return fi.fromModelState(Ni.moveToBeginningOfLine(e.cursorConfig,e.model,t.modelState,i))}static moveToEndOfLine(e,t,i,n){const s=[];for(let r=0,a=t.length;r<a;r++){const l=t[r];s[r]=this._moveToLineEnd(e,l,i,n)}return s}static _moveToLineEnd(e,t,i,n){const s=t.viewState.position,r=e.getLineMaxColumn(s.lineNumber),a=s.column===r,l=t.modelState.position,c=e.model.getLineMaxColumn(l.lineNumber),u=r-s.column===c-l.column;return a||u?this._moveToLineEndByModel(e,t,i,n):this._moveToLineEndByView(e,t,i,n)}static _moveToLineEndByView(e,t,i,n){return fi.fromViewState(Ni.moveToEndOfLine(e.cursorConfig,e,t.viewState,i,n))}static _moveToLineEndByModel(e,t,i,n){return fi.fromModelState(Ni.moveToEndOfLine(e.cursorConfig,e.model,t.modelState,i,n))}static expandLineSelection(e,t){const i=[];for(let n=0,s=t.length;n<s;n++){const r=t[n],a=r.modelState.selection.startLineNumber,l=e.model.getLineCount();let c=r.modelState.selection.endLineNumber,u;c===l?u=e.model.getLineMaxColumn(l):(c++,u=1),i[n]=fi.fromModelState(new go(new A(a,1,a,1),0,0,new Z(c,u),0))}return i}static moveToBeginningOfBuffer(e,t,i){const n=[];for(let s=0,r=t.length;s<r;s++){const a=t[s];n[s]=fi.fromModelState(Ni.moveToBeginningOfBuffer(e.cursorConfig,e.model,a.modelState,i))}return n}static moveToEndOfBuffer(e,t,i){const n=[];for(let s=0,r=t.length;s<r;s++){const a=t[s];n[s]=fi.fromModelState(Ni.moveToEndOfBuffer(e.cursorConfig,e.model,a.modelState,i))}return n}static selectAll(e,t){const i=e.model.getLineCount(),n=e.model.getLineMaxColumn(i);return fi.fromModelState(new go(new A(1,1,1,1),0,0,new Z(i,n),0))}static line(e,t,i,n,s){const r=e.model.validatePosition(n),a=s?e.coordinatesConverter.validateViewPosition(new Z(s.lineNumber,s.column),r):e.coordinatesConverter.convertModelPositionToViewPosition(r);if(!i){const c=e.model.getLineCount();let u=r.lineNumber+1,f=1;return u>c&&(u=c,f=e.model.getLineMaxColumn(u)),fi.fromModelState(new go(new A(r.lineNumber,1,u,f),2,0,new Z(u,f),0))}const l=t.modelState.selectionStart.getStartPosition().lineNumber;if(r.lineNumber<l)return fi.fromViewState(t.viewState.move(!0,a.lineNumber,1,0));if(r.lineNumber>l){const c=e.getLineCount();let u=a.lineNumber+1,f=1;return u>c&&(u=c,f=e.getLineMaxColumn(u)),fi.fromViewState(t.viewState.move(!0,u,f,0))}else{const c=t.modelState.selectionStart.getEndPosition();return fi.fromModelState(t.modelState.move(!0,c.lineNumber,c.column,0))}}static word(e,t,i,n){const s=e.model.validatePosition(n);return fi.fromModelState(Di.word(e.cursorConfig,e.model,t.modelState,i,s))}static cancelSelection(e,t){if(!t.modelState.hasSelection())return new fi(t.modelState,t.viewState);const i=t.viewState.position.lineNumber,n=t.viewState.position.column;return fi.fromViewState(new go(new A(i,n,i,n),0,0,new Z(i,n),0))}static moveTo(e,t,i,n,s){if(i){if(t.modelState.selectionStartKind===1)return this.word(e,t,i,n);if(t.modelState.selectionStartKind===2)return this.line(e,t,i,n,s)}const r=e.model.validatePosition(n),a=s?e.coordinatesConverter.validateViewPosition(new Z(s.lineNumber,s.column),r):e.coordinatesConverter.convertModelPositionToViewPosition(r);return fi.fromViewState(t.viewState.move(i,a.lineNumber,a.column,0))}static simpleMove(e,t,i,n,s,r){switch(i){case 0:return r===4?this._moveHalfLineLeft(e,t,n):this._moveLeft(e,t,n,s);case 1:return r===4?this._moveHalfLineRight(e,t,n):this._moveRight(e,t,n,s);case 2:return r===2?this._moveUpByViewLines(e,t,n,s):this._moveUpByModelLines(e,t,n,s);case 3:return r===2?this._moveDownByViewLines(e,t,n,s):this._moveDownByModelLines(e,t,n,s);case 4:return r===2?t.map(a=>fi.fromViewState(Ni.moveToPrevBlankLine(e.cursorConfig,e,a.viewState,n))):t.map(a=>fi.fromModelState(Ni.moveToPrevBlankLine(e.cursorConfig,e.model,a.modelState,n)));case 5:return r===2?t.map(a=>fi.fromViewState(Ni.moveToNextBlankLine(e.cursorConfig,e,a.viewState,n))):t.map(a=>fi.fromModelState(Ni.moveToNextBlankLine(e.cursorConfig,e.model,a.modelState,n)));case 6:return this._moveToViewMinColumn(e,t,n);case 7:return this._moveToViewFirstNonWhitespaceColumn(e,t,n);case 8:return this._moveToViewCenterColumn(e,t,n);case 9:return this._moveToViewMaxColumn(e,t,n);case 10:return this._moveToViewLastNonWhitespaceColumn(e,t,n);default:return null}}static viewportMove(e,t,i,n,s){const r=e.getCompletelyVisibleViewRange(),a=e.coordinatesConverter.convertViewRangeToModelRange(r);switch(i){case 11:{const l=this._firstLineNumberInRange(e.model,a,s),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],n,l,c)]}case 13:{const l=this._lastLineNumberInRange(e.model,a,s),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],n,l,c)]}case 12:{const l=Math.round((a.startLineNumber+a.endLineNumber)/2),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],n,l,c)]}case 14:{const l=[];for(let c=0,u=t.length;c<u;c++){const f=t[c];l[c]=this.findPositionInViewportIfOutside(e,f,r,n)}return l}default:return null}}static findPositionInViewportIfOutside(e,t,i,n){const s=t.viewState.position.lineNumber;if(i.startLineNumber<=s&&s<=i.endLineNumber-1)return new fi(t.modelState,t.viewState);{let r;s>i.endLineNumber-1?r=i.endLineNumber-1:s<i.startLineNumber?r=i.startLineNumber:r=s;const a=Ni.vertical(e.cursorConfig,e,s,t.viewState.position.column,t.viewState.leftoverVisibleColumns,r,!1);return fi.fromViewState(t.viewState.move(n,a.lineNumber,a.column,a.leftoverVisibleColumns))}}static _firstLineNumberInRange(e,t,i){let n=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(n)&&n++,Math.min(t.endLineNumber,n+i-1)}static _lastLineNumberInRange(e,t,i){let n=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(n)&&n++,Math.max(n,t.endLineNumber-i+1)}static _moveLeft(e,t,i,n){return t.map(s=>fi.fromViewState(Ni.moveLeft(e.cursorConfig,e,s.viewState,i,n)))}static _moveHalfLineLeft(e,t,i){const n=[];for(let s=0,r=t.length;s<r;s++){const a=t[s],l=a.viewState.position.lineNumber,c=Math.round(e.getLineLength(l)/2);n[s]=fi.fromViewState(Ni.moveLeft(e.cursorConfig,e,a.viewState,i,c))}return n}static _moveRight(e,t,i,n){return t.map(s=>fi.fromViewState(Ni.moveRight(e.cursorConfig,e,s.viewState,i,n)))}static _moveHalfLineRight(e,t,i){const n=[];for(let s=0,r=t.length;s<r;s++){const a=t[s],l=a.viewState.position.lineNumber,c=Math.round(e.getLineLength(l)/2);n[s]=fi.fromViewState(Ni.moveRight(e.cursorConfig,e,a.viewState,i,c))}return n}static _moveDownByViewLines(e,t,i,n){const s=[];for(let r=0,a=t.length;r<a;r++){const l=t[r];s[r]=fi.fromViewState(Ni.moveDown(e.cursorConfig,e,l.viewState,i,n))}return s}static _moveDownByModelLines(e,t,i,n){const s=[];for(let r=0,a=t.length;r<a;r++){const l=t[r];s[r]=fi.fromModelState(Ni.moveDown(e.cursorConfig,e.model,l.modelState,i,n))}return s}static _moveUpByViewLines(e,t,i,n){const s=[];for(let r=0,a=t.length;r<a;r++){const l=t[r];s[r]=fi.fromViewState(Ni.moveUp(e.cursorConfig,e,l.viewState,i,n))}return s}static _moveUpByModelLines(e,t,i,n){const s=[];for(let r=0,a=t.length;r<a;r++){const l=t[r];s[r]=fi.fromModelState(Ni.moveUp(e.cursorConfig,e.model,l.modelState,i,n))}return s}static _moveToViewPosition(e,t,i,n,s){return fi.fromViewState(t.viewState.move(i,n,s,0))}static _moveToModelPosition(e,t,i,n,s){return fi.fromModelState(t.modelState.move(i,n,s,0))}static _moveToViewMinColumn(e,t,i){const n=[];for(let s=0,r=t.length;s<r;s++){const a=t[s],l=a.viewState.position.lineNumber,c=e.getLineMinColumn(l);n[s]=this._moveToViewPosition(e,a,i,l,c)}return n}static _moveToViewFirstNonWhitespaceColumn(e,t,i){const n=[];for(let s=0,r=t.length;s<r;s++){const a=t[s],l=a.viewState.position.lineNumber,c=e.getLineFirstNonWhitespaceColumn(l);n[s]=this._moveToViewPosition(e,a,i,l,c)}return n}static _moveToViewCenterColumn(e,t,i){const n=[];for(let s=0,r=t.length;s<r;s++){const a=t[s],l=a.viewState.position.lineNumber,c=Math.round((e.getLineMaxColumn(l)+e.getLineMinColumn(l))/2);n[s]=this._moveToViewPosition(e,a,i,l,c)}return n}static _moveToViewMaxColumn(e,t,i){const n=[];for(let s=0,r=t.length;s<r;s++){const a=t[s],l=a.viewState.position.lineNumber,c=e.getLineMaxColumn(l);n[s]=this._moveToViewPosition(e,a,i,l,c)}return n}static _moveToViewLastNonWhitespaceColumn(e,t,i){const n=[];for(let s=0,r=t.length;s<r;s++){const a=t[s],l=a.viewState.position.lineNumber,c=e.getLineLastNonWhitespaceColumn(l);n[s]=this._moveToViewPosition(e,a,i,l,c)}return n}}var AR;(function(o){const e=function(i){if(!Br(i))return!1;const n=i;return!(!Ur(n.to)||!Wa(n.select)&&!Pte(n.select)||!Wa(n.by)&&!Ur(n.by)||!Wa(n.value)&&!om(n.value))};o.metadata={description:"Move cursor to a logical position in the view",args:[{name:"Cursor move argument object",description:`Property-value pairs that can be passed through this argument:
					* 'to': A mandatory logical position value providing where to move the cursor.
						\`\`\`
						'left', 'right', 'up', 'down', 'prevBlankLine', 'nextBlankLine',
						'wrappedLineStart', 'wrappedLineEnd', 'wrappedLineColumnCenter'
						'wrappedLineFirstNonWhitespaceCharacter', 'wrappedLineLastNonWhitespaceCharacter'
						'viewPortTop', 'viewPortCenter', 'viewPortBottom', 'viewPortIfOutside'
						\`\`\`
					* 'by': Unit to move. Default is computed based on 'to' value.
						\`\`\`
						'line', 'wrappedLine', 'character', 'halfLine'
						\`\`\`
					* 'value': Number of units to move. Default is '1'.
					* 'select': If 'true' makes the selection. Default is 'false'.
				`,constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["left","right","up","down","prevBlankLine","nextBlankLine","wrappedLineStart","wrappedLineEnd","wrappedLineColumnCenter","wrappedLineFirstNonWhitespaceCharacter","wrappedLineLastNonWhitespaceCharacter","viewPortTop","viewPortCenter","viewPortBottom","viewPortIfOutside"]},by:{type:"string",enum:["line","wrappedLine","character","halfLine"]},value:{type:"number",default:1},select:{type:"boolean",default:!1}}}}]},o.RawDirection={Left:"left",Right:"right",Up:"up",Down:"down",PrevBlankLine:"prevBlankLine",NextBlankLine:"nextBlankLine",WrappedLineStart:"wrappedLineStart",WrappedLineFirstNonWhitespaceCharacter:"wrappedLineFirstNonWhitespaceCharacter",WrappedLineColumnCenter:"wrappedLineColumnCenter",WrappedLineEnd:"wrappedLineEnd",WrappedLineLastNonWhitespaceCharacter:"wrappedLineLastNonWhitespaceCharacter",ViewPortTop:"viewPortTop",ViewPortCenter:"viewPortCenter",ViewPortBottom:"viewPortBottom",ViewPortIfOutside:"viewPortIfOutside"},o.RawUnit={Line:"line",WrappedLine:"wrappedLine",Character:"character",HalfLine:"halfLine"};function t(i){if(!i.to)return null;let n;switch(i.to){case o.RawDirection.Left:n=0;break;case o.RawDirection.Right:n=1;break;case o.RawDirection.Up:n=2;break;case o.RawDirection.Down:n=3;break;case o.RawDirection.PrevBlankLine:n=4;break;case o.RawDirection.NextBlankLine:n=5;break;case o.RawDirection.WrappedLineStart:n=6;break;case o.RawDirection.WrappedLineFirstNonWhitespaceCharacter:n=7;break;case o.RawDirection.WrappedLineColumnCenter:n=8;break;case o.RawDirection.WrappedLineEnd:n=9;break;case o.RawDirection.WrappedLineLastNonWhitespaceCharacter:n=10;break;case o.RawDirection.ViewPortTop:n=11;break;case o.RawDirection.ViewPortBottom:n=13;break;case o.RawDirection.ViewPortCenter:n=12;break;case o.RawDirection.ViewPortIfOutside:n=14;break;default:return null}let s=0;switch(i.by){case o.RawUnit.Line:s=1;break;case o.RawUnit.WrappedLine:s=2;break;case o.RawUnit.Character:s=3;break;case o.RawUnit.HalfLine:s=4;break}return{direction:n,unit:s,select:!!i.select,value:i.value||1}}o.parse=t})(AR||(AR={}));function NC(o,e,t,i){const n=xC(e,t.startLineNumber,t.startColumn),s=i.getLanguageConfiguration(n.languageId);if(!s)return null;const r=n.getLineContent(),a=r.substr(0,t.startColumn-1-n.firstCharOffset);let l;t.isEmpty()?l=r.substr(t.startColumn-1-n.firstCharOffset):l=xC(e,t.endLineNumber,t.endColumn).getLineContent().substr(t.endColumn-1-n.firstCharOffset);let c="";if(t.startLineNumber>1&&n.firstCharOffset===0){const b=xC(e,t.startLineNumber-1);b.languageId===n.languageId&&(c=b.getLineContent())}const u=s.onEnter(o,c,a,l);if(!u)return null;const f=u.indentAction;let g=u.appendText;const p=u.removeText||0;g?f===Is.Indent&&(g="	"+g):f===Is.Indent||f===Is.IndentOutdent?g="	":g="";let _=une(e,t.startLineNumber,t.startColumn);return p&&(_=_.substring(0,_.length-p)),{indentAction:f,appendText:g,removeText:p,indentation:_}}var Nke=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Rke=function(o,e){return function(t,i){e(t,i,o)}},kN;const v3=Object.create(null);function k_(o,e){if(e<=0)return"";v3[o]||(v3[o]=["",o]);const t=v3[o];for(let i=t.length;i<=e;i++)t[i]=t[i-1]+o;return t[e]}let tc=kN=class{static unshiftIndent(e,t,i,n,s){const r=Vs.visibleColumnFromColumn(e,t,i);if(s){const a=k_(" ",n),c=Vs.prevIndentTabStop(r,n)/n;return k_(a,c)}else{const a="	",c=Vs.prevRenderTabStop(r,i)/i;return k_(a,c)}}static shiftIndent(e,t,i,n,s){const r=Vs.visibleColumnFromColumn(e,t,i);if(s){const a=k_(" ",n),c=Vs.nextIndentTabStop(r,n)/n;return k_(a,c)}else{const a="	",c=Vs.nextRenderTabStop(r,i)/i;return k_(a,c)}}constructor(e,t,i){this._languageConfigurationService=i,this._opts=t,this._selection=e,this._selectionId=null,this._useLastEditRangeForCursorEndPosition=!1,this._selectionStartColumnStaysPut=!1}_addEditOperation(e,t,i){this._useLastEditRangeForCursorEndPosition?e.addTrackedEditOperation(t,i):e.addEditOperation(t,i)}getEditOperations(e,t){const i=this._selection.startLineNumber;let n=this._selection.endLineNumber;this._selection.endColumn===1&&i!==n&&(n=n-1);const{tabSize:s,indentSize:r,insertSpaces:a}=this._opts,l=i===n;if(this._opts.useTabStops){this._selection.isEmpty()&&/^\s*$/.test(e.getLineContent(i))&&(this._useLastEditRangeForCursorEndPosition=!0);let c=0,u=0;for(let f=i;f<=n;f++,c=u){u=0;const g=e.getLineContent(f);let p=gr(g);if(this._opts.isUnshift&&(g.length===0||p===0)||!l&&!this._opts.isUnshift&&g.length===0)continue;if(p===-1&&(p=g.length),f>1&&Vs.visibleColumnFromColumn(g,p+1,s)%r!==0&&e.tokenization.isCheapToTokenize(f-1)){const y=NC(this._opts.autoIndent,e,new A(f-1,e.getLineMaxColumn(f-1),f-1,e.getLineMaxColumn(f-1)),this._languageConfigurationService);if(y){if(u=c,y.appendText)for(let S=0,L=y.appendText.length;S<L&&u<r&&y.appendText.charCodeAt(S)===32;S++)u++;y.removeText&&(u=Math.max(0,u-y.removeText));for(let S=0;S<u&&!(p===0||g.charCodeAt(p-1)!==32);S++)p--}}if(this._opts.isUnshift&&p===0)continue;let _;this._opts.isUnshift?_=kN.unshiftIndent(g,p+1,s,r,a):_=kN.shiftIndent(g,p+1,s,r,a),this._addEditOperation(t,new A(f,1,f,p+1),_),f===i&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn<=p+1)}}else{!this._opts.isUnshift&&this._selection.isEmpty()&&e.getLineLength(i)===0&&(this._useLastEditRangeForCursorEndPosition=!0);const c=a?k_(" ",r):"	";for(let u=i;u<=n;u++){const f=e.getLineContent(u);let g=gr(f);if(!(this._opts.isUnshift&&(f.length===0||g===0))&&!(!l&&!this._opts.isUnshift&&f.length===0)&&(g===-1&&(g=f.length),!(this._opts.isUnshift&&g===0)))if(this._opts.isUnshift){g=Math.min(g,r);for(let p=0;p<g;p++)if(f.charCodeAt(p)===9){g=p+1;break}this._addEditOperation(t,new A(u,1,u,g+1),"")}else this._addEditOperation(t,new A(u,1,u,1),c),u===i&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn===1)}}this._selectionId=t.trackSelection(this._selection)}computeCursorState(e,t){if(this._useLastEditRangeForCursorEndPosition){const n=t.getInverseEditOperations()[0];return new Xe(n.range.endLineNumber,n.range.endColumn,n.range.endLineNumber,n.range.endColumn)}const i=t.getTrackedSelection(this._selectionId);if(this._selectionStartColumnStaysPut){const n=this._selection.startColumn;return i.startColumn<=n?i:i.getDirection()===0?new Xe(i.startLineNumber,n,i.endLineNumber,i.endColumn):new Xe(i.endLineNumber,i.endColumn,i.startLineNumber,n)}return i}};tc=kN=Nke([Rke(2,dn)],tc);class Mke{constructor(e,t,i){this._range=e,this._charBeforeSelection=t,this._charAfterSelection=i}getEditOperations(e,t){t.addTrackedEditOperation(new A(this._range.startLineNumber,this._range.startColumn,this._range.startLineNumber,this._range.startColumn),this._charBeforeSelection),t.addTrackedEditOperation(new A(this._range.endLineNumber,this._range.endColumn,this._range.endLineNumber,this._range.endColumn),this._charAfterSelection)}computeCursorState(e,t){const i=t.getInverseEditOperations(),n=i[0].range,s=i[1].range;return new Xe(n.endLineNumber,n.endColumn,s.endLineNumber,s.endColumn-this._charAfterSelection.length)}}class Ake{constructor(e,t,i){this._position=e,this._text=t,this._charAfter=i}getEditOperations(e,t){t.addTrackedEditOperation(new A(this._position.lineNumber,this._position.column,this._position.lineNumber,this._position.column),this._text+this._charAfter)}computeCursorState(e,t){const n=t.getInverseEditOperations()[0].range;return new Xe(n.endLineNumber,n.startColumn,n.endLineNumber,n.endColumn-this._charAfter.length)}}function Pke(o,e,t){const i=o.tokenization.getLanguageIdAtPosition(e,0);if(e>1){let n,s=-1;for(n=e-1;n>=1;n--){if(o.tokenization.getLanguageIdAtPosition(n,0)!==i)return s;const r=o.getLineContent(n);if(t.shouldIgnore(r)||/^\s+$/.test(r)||r===""){s=n;continue}return n}}return-1}function $A(o,e,t,i=!0,n){if(o<4)return null;const s=n.getLanguageConfiguration(e.tokenization.getLanguageId()).indentRulesSupport;if(!s)return null;if(t<=1)return{indentation:"",action:null};for(let l=t-1;l>0&&e.getLineContent(l)==="";l--)if(l===1)return{indentation:"",action:null};const r=Pke(e,t,s);if(r<0)return null;if(r<1)return{indentation:"",action:null};const a=e.getLineContent(r);if(s.shouldIncrease(a)||s.shouldIndentNextLine(a))return{indentation:an(a),action:Is.Indent,line:r};if(s.shouldDecrease(a))return{indentation:an(a),action:null,line:r};{if(r===1)return{indentation:an(e.getLineContent(r)),action:null,line:r};const l=r-1,c=s.getIndentMetadata(e.getLineContent(l));if(!(c&3)&&c&4){let u=0;for(let f=l-1;f>0;f--)if(!s.shouldIndentNextLine(e.getLineContent(f))){u=f;break}return{indentation:an(e.getLineContent(u+1)),action:null,line:u+1}}if(i)return{indentation:an(e.getLineContent(r)),action:null,line:r};for(let u=r;u>0;u--){const f=e.getLineContent(u);if(s.shouldIncrease(f))return{indentation:an(f),action:Is.Indent,line:u};if(s.shouldIndentNextLine(f)){let g=0;for(let p=u-1;p>0;p--)if(!s.shouldIndentNextLine(e.getLineContent(u))){g=p;break}return{indentation:an(e.getLineContent(g+1)),action:null,line:g+1}}else if(s.shouldDecrease(f))return{indentation:an(f),action:null,line:u}}return{indentation:an(e.getLineContent(1)),action:null,line:1}}}function vL(o,e,t,i,n,s){if(o<4)return null;const r=s.getLanguageConfiguration(t);if(!r)return null;const a=s.getLanguageConfiguration(t).indentRulesSupport;if(!a)return null;const l=$A(o,e,i,void 0,s),c=e.getLineContent(i);if(l){const u=l.line;if(u!==void 0){let f=!0;for(let g=u;g<i-1;g++)if(!/^\s*$/.test(e.getLineContent(g))){f=!1;break}if(f){const g=r.onEnter(o,"",e.getLineContent(u),"");if(g){let p=an(e.getLineContent(u));return g.removeText&&(p=p.substring(0,p.length-g.removeText)),g.indentAction===Is.Indent||g.indentAction===Is.IndentOutdent?p=n.shiftIndent(p):g.indentAction===Is.Outdent&&(p=n.unshiftIndent(p)),a.shouldDecrease(c)&&(p=n.unshiftIndent(p)),g.appendText&&(p+=g.appendText),an(p)}}}return a.shouldDecrease(c)?l.action===Is.Indent?l.indentation:n.unshiftIndent(l.indentation):l.action===Is.Indent?n.shiftIndent(l.indentation):l.indentation}return null}function Oke(o,e,t,i,n){if(o<4)return null;e.tokenization.forceTokenization(t.startLineNumber);const s=e.tokenization.getLineTokens(t.startLineNumber),r=TA(s,t.startColumn-1),a=r.getLineContent();let l=!1,c;r.firstCharOffset>0&&s.getLanguageId(0)!==r.languageId?(l=!0,c=a.substr(0,t.startColumn-1-r.firstCharOffset)):c=s.getLineContent().substring(0,t.startColumn-1);let u;t.isEmpty()?u=a.substr(t.startColumn-1-r.firstCharOffset):u=xC(e,t.endLineNumber,t.endColumn).getLineContent().substr(t.endColumn-1-r.firstCharOffset);const f=n.getLanguageConfiguration(r.languageId).indentRulesSupport;if(!f)return null;const g=c,p=an(c),_={tokenization:{getLineTokens:L=>e.tokenization.getLineTokens(L),getLanguageId:()=>e.getLanguageId(),getLanguageIdAtPosition:(L,x)=>e.getLanguageIdAtPosition(L,x)},getLineContent:L=>L===t.startLineNumber?g:e.getLineContent(L)},b=an(s.getLineContent()),y=$A(o,_,t.startLineNumber+1,void 0,n);if(!y){const L=l?b:p;return{beforeEnter:L,afterEnter:L}}let S=l?b:y.indentation;return y.action===Is.Indent&&(S=i.shiftIndent(S)),f.shouldDecrease(u)&&(S=i.unshiftIndent(S)),{beforeEnter:l?b:p,afterEnter:S}}function Fke(o,e,t,i,n,s){if(o<4)return null;const r=xC(e,t.startLineNumber,t.startColumn);if(r.firstCharOffset)return null;const a=s.getLanguageConfiguration(r.languageId).indentRulesSupport;if(!a)return null;const l=r.getLineContent(),c=l.substr(0,t.startColumn-1-r.firstCharOffset);let u;if(t.isEmpty()?u=l.substr(t.startColumn-1-r.firstCharOffset):u=xC(e,t.endLineNumber,t.endColumn).getLineContent().substr(t.endColumn-1-r.firstCharOffset),!a.shouldDecrease(c+u)&&a.shouldDecrease(c+i+u)){const f=$A(o,e,t.startLineNumber,!1,s);if(!f)return null;let g=f.indentation;return f.action!==Is.Indent&&(g=n.unshiftIndent(g)),g}return null}function ase(o,e,t){const i=t.getLanguageConfiguration(o.getLanguageId()).indentRulesSupport;return!i||e<1||e>o.getLineCount()?null:i.getIndentMetadata(o.getLineContent(e))}class Hn{static indent(e,t,i){if(t===null||i===null)return[];const n=[];for(let s=0,r=i.length;s<r;s++)n[s]=new tc(i[s],{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService);return n}static outdent(e,t,i){const n=[];for(let s=0,r=i.length;s<r;s++)n[s]=new tc(i[s],{isUnshift:!0,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService);return n}static shiftIndent(e,t,i){return i=i||1,tc.shiftIndent(t,t.length+i,e.tabSize,e.indentSize,e.insertSpaces)}static unshiftIndent(e,t,i){return i=i||1,tc.unshiftIndent(t,t.length+i,e.tabSize,e.indentSize,e.insertSpaces)}static _distributedPaste(e,t,i,n){const s=[];for(let r=0,a=i.length;r<a;r++)s[r]=new Do(i[r],n[r]);return new ra(0,s,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _simplePaste(e,t,i,n,s){const r=[];for(let a=0,l=i.length;a<l;a++){const c=i[a],u=c.getPosition();if(s&&!c.isEmpty()&&(s=!1),s&&n.indexOf(`
`)!==n.length-1&&(s=!1),s){const f=new A(u.lineNumber,1,u.lineNumber,1);r[a]=new kH(f,n,c,!0)}else r[a]=new Do(c,n)}return new ra(0,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _distributePasteToCursors(e,t,i,n,s){if(n||t.length===1)return null;if(s&&s.length===t.length)return s;if(e.multiCursorPaste==="spread"){i.charCodeAt(i.length-1)===10&&(i=i.substr(0,i.length-1)),i.charCodeAt(i.length-1)===13&&(i=i.substr(0,i.length-1));const r=Sh(i);if(r.length===t.length)return r}return null}static paste(e,t,i,n,s,r){const a=this._distributePasteToCursors(e,i,n,s,r);return a?(i=i.sort(A.compareRangesUsingStarts),this._distributedPaste(e,t,i,a)):this._simplePaste(e,t,i,n,s)}static _goodIndentForLine(e,t,i){let n=null,s="";const r=$A(e.autoIndent,t,i,!1,e.languageConfigurationService);if(r)n=r.action,s=r.indentation;else if(i>1){let a;for(a=i-1;a>=1;a--){const u=t.getLineContent(a);if(Bd(u)>=0)break}if(a<1)return null;const l=t.getLineMaxColumn(a),c=NC(e.autoIndent,t,new A(a,l,a,l),e.languageConfigurationService);c&&(s=c.indentation+c.appendText)}return n&&(n===Is.Indent&&(s=Hn.shiftIndent(e,s)),n===Is.Outdent&&(s=Hn.unshiftIndent(e,s)),s=e.normalizeIndentation(s)),s||null}static _replaceJumpToNextIndent(e,t,i,n){let s="";const r=i.getStartPosition();if(e.insertSpaces){const a=e.visibleColumnFromColumn(t,r),l=e.indentSize,c=l-a%l;for(let u=0;u<c;u++)s+=" "}else s="	";return new Do(i,s,n)}static tab(e,t,i){const n=[];for(let s=0,r=i.length;s<r;s++){const a=i[s];if(a.isEmpty()){const l=t.getLineContent(a.startLineNumber);if(/^\s*$/.test(l)&&t.tokenization.isCheapToTokenize(a.startLineNumber)){let c=this._goodIndentForLine(e,t,a.startLineNumber);c=c||"	";const u=e.normalizeIndentation(c);if(!l.startsWith(u)){n[s]=new Do(new A(a.startLineNumber,1,a.startLineNumber,l.length+1),u,!0);continue}}n[s]=this._replaceJumpToNextIndent(e,t,a,!0)}else{if(a.startLineNumber===a.endLineNumber){const l=t.getLineMaxColumn(a.startLineNumber);if(a.startColumn!==1||a.endColumn!==l){n[s]=this._replaceJumpToNextIndent(e,t,a,!1);continue}}n[s]=new tc(a,{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService)}}return n}static compositionType(e,t,i,n,s,r,a,l){const c=n.map(u=>this._compositionType(i,u,s,r,a,l));return new ra(4,c,{shouldPushStackElementBefore:lT(e,4),shouldPushStackElementAfter:!1})}static _compositionType(e,t,i,n,s,r){if(!t.isEmpty())return null;const a=t.getPosition(),l=Math.max(1,a.column-n),c=Math.min(e.getLineMaxColumn(a.lineNumber),a.column+s),u=new A(a.lineNumber,l,a.lineNumber,c);return e.getValueInRange(u)===i&&r===0?null:new DN(u,i,0,r)}static _typeCommand(e,t,i){return i?new rT(e,t,!0):new Do(e,t,!0)}static _enter(e,t,i,n){if(e.autoIndent===0)return Hn._typeCommand(n,`
`,i);if(!t.tokenization.isCheapToTokenize(n.getStartPosition().lineNumber)||e.autoIndent===1){const l=t.getLineContent(n.startLineNumber),c=an(l).substring(0,n.startColumn-1);return Hn._typeCommand(n,`
`+e.normalizeIndentation(c),i)}const s=NC(e.autoIndent,t,n,e.languageConfigurationService);if(s){if(s.indentAction===Is.None)return Hn._typeCommand(n,`
`+e.normalizeIndentation(s.indentation+s.appendText),i);if(s.indentAction===Is.Indent)return Hn._typeCommand(n,`
`+e.normalizeIndentation(s.indentation+s.appendText),i);if(s.indentAction===Is.IndentOutdent){const l=e.normalizeIndentation(s.indentation),c=e.normalizeIndentation(s.indentation+s.appendText),u=`
`+c+`
`+l;return i?new rT(n,u,!0):new DN(n,u,-1,c.length-l.length,!0)}else if(s.indentAction===Is.Outdent){const l=Hn.unshiftIndent(e,s.indentation);return Hn._typeCommand(n,`
`+e.normalizeIndentation(l+s.appendText),i)}}const r=t.getLineContent(n.startLineNumber),a=an(r).substring(0,n.startColumn-1);if(e.autoIndent>=4){const l=Oke(e.autoIndent,t,n,{unshiftIndent:c=>Hn.unshiftIndent(e,c),shiftIndent:c=>Hn.shiftIndent(e,c),normalizeIndentation:c=>e.normalizeIndentation(c)},e.languageConfigurationService);if(l){let c=e.visibleColumnFromColumn(t,n.getEndPosition());const u=n.endColumn,f=t.getLineContent(n.endLineNumber),g=gr(f);if(g>=0?n=n.setEndPosition(n.endLineNumber,Math.max(n.endColumn,g+1)):n=n.setEndPosition(n.endLineNumber,t.getLineMaxColumn(n.endLineNumber)),i)return new rT(n,`
`+e.normalizeIndentation(l.afterEnter),!0);{let p=0;return u<=g+1&&(e.insertSpaces||(c=Math.ceil(c/e.indentSize)),p=Math.min(c+1-e.normalizeIndentation(l.afterEnter).length-1,0)),new DN(n,`
`+e.normalizeIndentation(l.afterEnter),0,p,!0)}}}return Hn._typeCommand(n,`
`+e.normalizeIndentation(a),i)}static _isAutoIndentType(e,t,i){if(e.autoIndent<4)return!1;for(let n=0,s=i.length;n<s;n++)if(!t.tokenization.isCheapToTokenize(i[n].getEndPosition().lineNumber))return!1;return!0}static _runAutoIndentType(e,t,i,n){const s=une(t,i.startLineNumber,i.startColumn),r=Fke(e.autoIndent,t,i,n,{shiftIndent:a=>Hn.shiftIndent(e,a),unshiftIndent:a=>Hn.unshiftIndent(e,a)},e.languageConfigurationService);if(r===null)return null;if(r!==e.normalizeIndentation(s)){const a=t.getLineFirstNonWhitespaceColumn(i.startLineNumber);return a===0?Hn._typeCommand(new A(i.startLineNumber,1,i.endLineNumber,i.endColumn),e.normalizeIndentation(r)+n,!1):Hn._typeCommand(new A(i.startLineNumber,1,i.endLineNumber,i.endColumn),e.normalizeIndentation(r)+t.getLineContent(i.startLineNumber).substring(a-1,i.startColumn-1)+n,!1)}return null}static _isAutoClosingOvertype(e,t,i,n,s){if(e.autoClosingOvertype==="never"||!e.autoClosingPairs.autoClosingPairsCloseSingleChar.has(s))return!1;for(let r=0,a=i.length;r<a;r++){const l=i[r];if(!l.isEmpty())return!1;const c=l.getPosition(),u=t.getLineContent(c.lineNumber);if(u.charAt(c.column-1)!==s)return!1;const g=lp(s);if((c.column>2?u.charCodeAt(c.column-2):0)===92&&g)return!1;if(e.autoClosingOvertype==="auto"){let _=!1;for(let b=0,y=n.length;b<y;b++){const S=n[b];if(c.lineNumber===S.startLineNumber&&c.column===S.startColumn){_=!0;break}}if(!_)return!1}}return!0}static _runAutoClosingOvertype(e,t,i,n,s){const r=[];for(let a=0,l=n.length;a<l;a++){const u=n[a].getPosition(),f=new A(u.lineNumber,u.column,u.lineNumber,u.column+1);r[a]=new Do(f,s)}return new ra(4,r,{shouldPushStackElementBefore:lT(e,4),shouldPushStackElementAfter:!1})}static _isBeforeClosingBrace(e,t){const i=t.charAt(0),n=e.autoClosingPairs.autoClosingPairsOpenByStart.get(i)||[],s=e.autoClosingPairs.autoClosingPairsCloseByStart.get(i)||[],r=n.some(l=>t.startsWith(l.open)),a=s.some(l=>t.startsWith(l.close));return!r&&a}static _findAutoClosingPairOpen(e,t,i,n){const s=e.autoClosingPairs.autoClosingPairsOpenByEnd.get(n);if(!s)return null;let r=null;for(const a of s)if(r===null||a.open.length>r.open.length){let l=!0;for(const c of i)if(t.getValueInRange(new A(c.lineNumber,c.column-a.open.length+1,c.lineNumber,c.column))+n!==a.open){l=!1;break}l&&(r=a)}return r}static _findContainedAutoClosingPair(e,t){if(t.open.length<=1)return null;const i=t.close.charAt(t.close.length-1),n=e.autoClosingPairs.autoClosingPairsCloseByEnd.get(i)||[];let s=null;for(const r of n)r.open!==t.open&&t.open.includes(r.open)&&t.close.endsWith(r.close)&&(!s||r.open.length>s.open.length)&&(s=r);return s}static _getAutoClosingPairClose(e,t,i,n,s){for(const _ of i)if(!_.isEmpty())return null;const r=i.map(_=>{const b=_.getPosition();return s?{lineNumber:b.lineNumber,beforeColumn:b.column-n.length,afterColumn:b.column}:{lineNumber:b.lineNumber,beforeColumn:b.column,afterColumn:b.column}}),a=this._findAutoClosingPairOpen(e,t,r.map(_=>new Z(_.lineNumber,_.beforeColumn)),n);if(!a)return null;let l,c;if(lp(n)?(l=e.autoClosingQuotes,c=e.shouldAutoCloseBefore.quote):(e.blockCommentStartToken?a.open.includes(e.blockCommentStartToken):!1)?(l=e.autoClosingComments,c=e.shouldAutoCloseBefore.comment):(l=e.autoClosingBrackets,c=e.shouldAutoCloseBefore.bracket),l==="never")return null;const f=this._findContainedAutoClosingPair(e,a),g=f?f.close:"";let p=!0;for(const _ of r){const{lineNumber:b,beforeColumn:y,afterColumn:S}=_,L=t.getLineContent(b),x=L.substring(0,y-1),D=L.substring(S-1);if(D.startsWith(g)||(p=!1),D.length>0){const F=D.charAt(0);if(!Hn._isBeforeClosingBrace(e,D)&&!c(F))return null}if(a.open.length===1&&(n==="'"||n==='"')&&l!=="always"){const F=hc(e.wordSeparators,[]);if(x.length>0){const H=x.charCodeAt(x.length-1);if(F.get(H)===0)return null}}if(!t.tokenization.isCheapToTokenize(b))return null;t.tokenization.forceTokenization(b);const E=t.tokenization.getLineTokens(b),N=TA(E,y-1);if(!a.shouldAutoClose(N,y-N.firstCharOffset))return null;const M=a.findNeutralCharacter();if(M){const F=t.tokenization.getTokenTypeIfInsertingCharacter(b,y,M);if(!a.isOK(F))return null}}return p?a.close.substring(0,a.close.length-g.length):a.close}static _runAutoClosingOpenCharType(e,t,i,n,s,r,a){const l=[];for(let c=0,u=n.length;c<u;c++){const f=n[c];l[c]=new lse(f,s,!r,a)}return new ra(4,l,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}static _shouldSurroundChar(e,t){return lp(t)?e.autoSurround==="quotes"||e.autoSurround==="languageDefined":e.autoSurround==="brackets"||e.autoSurround==="languageDefined"}static _isSurroundSelectionType(e,t,i,n){if(!Hn._shouldSurroundChar(e,n)||!e.surroundingPairs.hasOwnProperty(n))return!1;const s=lp(n);for(const r of i){if(r.isEmpty())return!1;let a=!0;for(let l=r.startLineNumber;l<=r.endLineNumber;l++){const c=t.getLineContent(l),u=l===r.startLineNumber?r.startColumn-1:0,f=l===r.endLineNumber?r.endColumn-1:c.length,g=c.substring(u,f);if(/[^ \t]/.test(g)){a=!1;break}}if(a)return!1;if(s&&r.startLineNumber===r.endLineNumber&&r.startColumn+1===r.endColumn){const l=t.getValueInRange(r);if(lp(l))return!1}}return!0}static _runSurroundSelectionType(e,t,i,n,s){const r=[];for(let a=0,l=n.length;a<l;a++){const c=n[a],u=t.surroundingPairs[s];r[a]=new Mke(c,s,u)}return new ra(0,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _isTypeInterceptorElectricChar(e,t,i){return!!(i.length===1&&t.tokenization.isCheapToTokenize(i[0].getEndPosition().lineNumber))}static _typeInterceptorElectricChar(e,t,i,n,s){if(!t.electricChars.hasOwnProperty(s)||!n.isEmpty())return null;const r=n.getPosition();i.tokenization.forceTokenization(r.lineNumber);const a=i.tokenization.getLineTokens(r.lineNumber);let l;try{l=t.onElectricCharacter(s,a,r.column)}catch(c){return Nt(c),null}if(!l)return null;if(l.matchOpenBracket){const c=(a.getLineContent()+s).lastIndexOf(l.matchOpenBracket)+1,u=i.bracketPairs.findMatchingBracketUp(l.matchOpenBracket,{lineNumber:r.lineNumber,column:c},500);if(u){if(u.startLineNumber===r.lineNumber)return null;const f=i.getLineContent(u.startLineNumber),g=an(f),p=t.normalizeIndentation(g),_=i.getLineContent(r.lineNumber),b=i.getLineFirstNonWhitespaceColumn(r.lineNumber)||r.column,y=_.substring(b-1,r.column-1),S=p+y+s,L=new A(r.lineNumber,1,r.lineNumber,r.column),x=new Do(L,S);return new ra(b3(S,e),[x],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!0})}}return null}static compositionEndWithInterceptors(e,t,i,n,s,r){if(!n)return null;let a=null;for(const f of n)if(a===null)a=f.insertedText;else if(a!==f.insertedText)return null;if(!a||a.length!==1)return null;const l=a;let c=!1;for(const f of n)if(f.deletedText.length!==0){c=!0;break}if(c){if(!Hn._shouldSurroundChar(t,l)||!t.surroundingPairs.hasOwnProperty(l))return null;const f=lp(l);for(const _ of n)if(_.deletedSelectionStart!==0||_.deletedSelectionEnd!==_.deletedText.length||/^[ \t]+$/.test(_.deletedText)||f&&lp(_.deletedText))return null;const g=[];for(const _ of s){if(!_.isEmpty())return null;g.push(_.getPosition())}if(g.length!==n.length)return null;const p=[];for(let _=0,b=g.length;_<b;_++)p.push(new Ake(g[_],n[_].deletedText,t.surroundingPairs[l]));return new ra(4,p,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(this._isAutoClosingOvertype(t,i,s,r,l)){const f=s.map(g=>new Do(new A(g.positionLineNumber,g.positionColumn,g.positionLineNumber,g.positionColumn+1),"",!1));return new ra(4,f,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}const u=this._getAutoClosingPairClose(t,i,s,l,!0);return u!==null?this._runAutoClosingOpenCharType(e,t,i,s,l,!0,u):null}static typeWithInterceptors(e,t,i,n,s,r,a){if(!e&&a===`
`){const u=[];for(let f=0,g=s.length;f<g;f++)u[f]=Hn._enter(i,n,!1,s[f]);return new ra(4,u,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(!e&&this._isAutoIndentType(i,n,s)){const u=[];let f=!1;for(let g=0,p=s.length;g<p;g++)if(u[g]=this._runAutoIndentType(i,n,s[g],a),!u[g]){f=!0;break}if(!f)return new ra(4,u,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(this._isAutoClosingOvertype(i,n,s,r,a))return this._runAutoClosingOvertype(t,i,n,s,a);if(!e){const u=this._getAutoClosingPairClose(i,n,s,a,!1);if(u)return this._runAutoClosingOpenCharType(t,i,n,s,a,!1,u)}if(!e&&this._isSurroundSelectionType(i,n,s,a))return this._runSurroundSelectionType(t,i,n,s,a);if(!e&&this._isTypeInterceptorElectricChar(i,n,s)){const u=this._typeInterceptorElectricChar(t,i,n,s[0],a);if(u)return u}const l=[];for(let u=0,f=s.length;u<f;u++)l[u]=new Do(s[u],a);const c=b3(a,t);return new ra(c,l,{shouldPushStackElementBefore:lT(t,c),shouldPushStackElementAfter:!1})}static typeWithoutInterceptors(e,t,i,n,s){const r=[];for(let l=0,c=n.length;l<c;l++)r[l]=new Do(n[l],s);const a=b3(s,e);return new ra(a,r,{shouldPushStackElementBefore:lT(e,a),shouldPushStackElementAfter:!1})}static lineInsertBefore(e,t,i){if(t===null||i===null)return[];const n=[];for(let s=0,r=i.length;s<r;s++){let a=i[s].positionLineNumber;if(a===1)n[s]=new rT(new A(1,1,1,1),`
`);else{a--;const l=t.getLineMaxColumn(a);n[s]=this._enter(e,t,!1,new A(a,l,a,l))}}return n}static lineInsertAfter(e,t,i){if(t===null||i===null)return[];const n=[];for(let s=0,r=i.length;s<r;s++){const a=i[s].positionLineNumber,l=t.getLineMaxColumn(a);n[s]=this._enter(e,t,!1,new A(a,l,a,l))}return n}static lineBreakInsert(e,t,i){const n=[];for(let s=0,r=i.length;s<r;s++)n[s]=this._enter(e,t,!0,i[s]);return n}}class lse extends DN{constructor(e,t,i,n){super(e,(i?t:"")+n,0,-n.length),this._openCharacter=t,this._closeCharacter=n,this.closeCharacterRange=null,this.enclosingRange=null}computeCursorState(e,t){const n=t.getInverseEditOperations()[0].range;return this.closeCharacterRange=new A(n.startLineNumber,n.endColumn-this._closeCharacter.length,n.endLineNumber,n.endColumn),this.enclosingRange=new A(n.startLineNumber,n.endColumn-this._openCharacter.length-this._closeCharacter.length,n.endLineNumber,n.endColumn),super.computeCursorState(e,t)}}class Bke{constructor(e,t,i,n,s,r){this.deletedText=e,this.deletedSelectionStart=t,this.deletedSelectionEnd=i,this.insertedText=n,this.insertedSelectionStart=s,this.insertedSelectionEnd=r}}function b3(o,e){return o===" "?e===5||e===6?6:5:4}function lT(o,e){return JZ(o)&&!JZ(e)?!0:o===5?!1:XZ(o)!==XZ(e)}function XZ(o){return o===6||o===5?"space":o}function JZ(o){return o===4||o===5||o===6}var W;(function(o){o.editorSimpleInput=new Be("editorSimpleInput",!1,!0),o.editorTextFocus=new Be("editorTextFocus",!1,v("editorTextFocus","Whether the editor text has focus (cursor is blinking)")),o.focus=new Be("editorFocus",!1,v("editorFocus","Whether the editor or an editor widget has focus (e.g. focus is in the find widget)")),o.textInputFocus=new Be("textInputFocus",!1,v("textInputFocus","Whether an editor or a rich text input has focus (cursor is blinking)")),o.readOnly=new Be("editorReadonly",!1,v("editorReadonly","Whether the editor is read-only")),o.inDiffEditor=new Be("inDiffEditor",!1,v("inDiffEditor","Whether the context is a diff editor")),o.isEmbeddedDiffEditor=new Be("isEmbeddedDiffEditor",!1,v("isEmbeddedDiffEditor","Whether the context is an embedded diff editor")),o.inMultiDiffEditor=new Be("inMultiDiffEditor",!1,v("inMultiDiffEditor","Whether the context is a multi diff editor")),o.multiDiffEditorAllCollapsed=new Be("multiDiffEditorAllCollapsed",void 0,v("multiDiffEditorAllCollapsed","Whether all files in multi diff editor are collapsed")),o.hasChanges=new Be("diffEditorHasChanges",!1,v("diffEditorHasChanges","Whether the diff editor has changes")),o.comparingMovedCode=new Be("comparingMovedCode",!1,v("comparingMovedCode","Whether a moved code block is selected for comparison")),o.accessibleDiffViewerVisible=new Be("accessibleDiffViewerVisible",!1,v("accessibleDiffViewerVisible","Whether the accessible diff viewer is visible")),o.diffEditorRenderSideBySideInlineBreakpointReached=new Be("diffEditorRenderSideBySideInlineBreakpointReached",!1,v("diffEditorRenderSideBySideInlineBreakpointReached","Whether the diff editor render side by side inline breakpoint is reached")),o.diffEditorInlineMode=new Be("diffEditorInlineMode",!1,v("diffEditorInlineMode","Whether inline mode is active")),o.diffEditorOriginalWritable=new Be("diffEditorOriginalWritable",!1,v("diffEditorOriginalWritable","Whether modified is writable in the diff editor")),o.diffEditorModifiedWritable=new Be("diffEditorModifiedWritable",!1,v("diffEditorModifiedWritable","Whether modified is writable in the diff editor")),o.diffEditorOriginalUri=new Be("diffEditorOriginalUri","",v("diffEditorOriginalUri","The uri of the original document")),o.diffEditorModifiedUri=new Be("diffEditorModifiedUri","",v("diffEditorModifiedUri","The uri of the modified document")),o.columnSelection=new Be("editorColumnSelection",!1,v("editorColumnSelection","Whether `editor.columnSelection` is enabled")),o.writable=o.readOnly.toNegated(),o.hasNonEmptySelection=new Be("editorHasSelection",!1,v("editorHasSelection","Whether the editor has text selected")),o.hasOnlyEmptySelection=o.hasNonEmptySelection.toNegated(),o.hasMultipleSelections=new Be("editorHasMultipleSelections",!1,v("editorHasMultipleSelections","Whether the editor has multiple selections")),o.hasSingleSelection=o.hasMultipleSelections.toNegated(),o.tabMovesFocus=new Be("editorTabMovesFocus",!1,v("editorTabMovesFocus","Whether `Tab` will move focus out of the editor")),o.tabDoesNotMoveFocus=o.tabMovesFocus.toNegated(),o.isInEmbeddedEditor=new Be("isInEmbeddedEditor",!1,!0),o.canUndo=new Be("canUndo",!1,!0),o.canRedo=new Be("canRedo",!1,!0),o.hoverVisible=new Be("editorHoverVisible",!1,v("editorHoverVisible","Whether the editor hover is visible")),o.hoverFocused=new Be("editorHoverFocused",!1,v("editorHoverFocused","Whether the editor hover is focused")),o.stickyScrollFocused=new Be("stickyScrollFocused",!1,v("stickyScrollFocused","Whether the sticky scroll is focused")),o.stickyScrollVisible=new Be("stickyScrollVisible",!1,v("stickyScrollVisible","Whether the sticky scroll is visible")),o.standaloneColorPickerVisible=new Be("standaloneColorPickerVisible",!1,v("standaloneColorPickerVisible","Whether the standalone color picker is visible")),o.standaloneColorPickerFocused=new Be("standaloneColorPickerFocused",!1,v("standaloneColorPickerFocused","Whether the standalone color picker is focused")),o.inCompositeEditor=new Be("inCompositeEditor",void 0,v("inCompositeEditor","Whether the editor is part of a larger editor (e.g. notebooks)")),o.notInCompositeEditor=o.inCompositeEditor.toNegated(),o.languageId=new Be("editorLangId","",v("editorLangId","The language identifier of the editor")),o.hasCompletionItemProvider=new Be("editorHasCompletionItemProvider",!1,v("editorHasCompletionItemProvider","Whether the editor has a completion item provider")),o.hasCodeActionsProvider=new Be("editorHasCodeActionsProvider",!1,v("editorHasCodeActionsProvider","Whether the editor has a code actions provider")),o.hasCodeLensProvider=new Be("editorHasCodeLensProvider",!1,v("editorHasCodeLensProvider","Whether the editor has a code lens provider")),o.hasDefinitionProvider=new Be("editorHasDefinitionProvider",!1,v("editorHasDefinitionProvider","Whether the editor has a definition provider")),o.hasDeclarationProvider=new Be("editorHasDeclarationProvider",!1,v("editorHasDeclarationProvider","Whether the editor has a declaration provider")),o.hasImplementationProvider=new Be("editorHasImplementationProvider",!1,v("editorHasImplementationProvider","Whether the editor has an implementation provider")),o.hasTypeDefinitionProvider=new Be("editorHasTypeDefinitionProvider",!1,v("editorHasTypeDefinitionProvider","Whether the editor has a type definition provider")),o.hasHoverProvider=new Be("editorHasHoverProvider",!1,v("editorHasHoverProvider","Whether the editor has a hover provider")),o.hasDocumentHighlightProvider=new Be("editorHasDocumentHighlightProvider",!1,v("editorHasDocumentHighlightProvider","Whether the editor has a document highlight provider")),o.hasDocumentSymbolProvider=new Be("editorHasDocumentSymbolProvider",!1,v("editorHasDocumentSymbolProvider","Whether the editor has a document symbol provider")),o.hasReferenceProvider=new Be("editorHasReferenceProvider",!1,v("editorHasReferenceProvider","Whether the editor has a reference provider")),o.hasRenameProvider=new Be("editorHasRenameProvider",!1,v("editorHasRenameProvider","Whether the editor has a rename provider")),o.hasSignatureHelpProvider=new Be("editorHasSignatureHelpProvider",!1,v("editorHasSignatureHelpProvider","Whether the editor has a signature help provider")),o.hasInlayHintsProvider=new Be("editorHasInlayHintsProvider",!1,v("editorHasInlayHintsProvider","Whether the editor has an inline hints provider")),o.hasDocumentFormattingProvider=new Be("editorHasDocumentFormattingProvider",!1,v("editorHasDocumentFormattingProvider","Whether the editor has a document formatting provider")),o.hasDocumentSelectionFormattingProvider=new Be("editorHasDocumentSelectionFormattingProvider",!1,v("editorHasDocumentSelectionFormattingProvider","Whether the editor has a document selection formatting provider")),o.hasMultipleDocumentFormattingProvider=new Be("editorHasMultipleDocumentFormattingProvider",!1,v("editorHasMultipleDocumentFormattingProvider","Whether the editor has multiple document formatting providers")),o.hasMultipleDocumentSelectionFormattingProvider=new Be("editorHasMultipleDocumentSelectionFormattingProvider",!1,v("editorHasMultipleDocumentSelectionFormattingProvider","Whether the editor has multiple document selection formatting providers"))})(W||(W={}));const Si=0;class ts extends zs{runEditorCommand(e,t,i){const n=t._getViewModel();n&&this.runCoreEditorCommand(n,i||{})}}var xo;(function(o){const e=function(i){if(!Br(i))return!1;const n=i;return!(!Ur(n.to)||!Wa(n.by)&&!Ur(n.by)||!Wa(n.value)&&!om(n.value)||!Wa(n.revealCursor)&&!Pte(n.revealCursor))};o.metadata={description:"Scroll editor in the given direction",args:[{name:"Editor scroll argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'to': A mandatory direction value.\n						```\n						'up', 'down'\n						```\n					* 'by': Unit to move. Default is computed based on 'to' value.\n						```\n						'line', 'wrappedLine', 'page', 'halfPage', 'editor'\n						```\n					* 'value': Number of units to move. Default is '1'.\n					* 'revealCursor': If 'true' reveals the cursor if it is outside view port.\n				",constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["up","down"]},by:{type:"string",enum:["line","wrappedLine","page","halfPage","editor"]},value:{type:"number",default:1},revealCursor:{type:"boolean"}}}}]},o.RawDirection={Up:"up",Right:"right",Down:"down",Left:"left"},o.RawUnit={Line:"line",WrappedLine:"wrappedLine",Page:"page",HalfPage:"halfPage",Editor:"editor",Column:"column"};function t(i){let n;switch(i.to){case o.RawDirection.Up:n=1;break;case o.RawDirection.Right:n=2;break;case o.RawDirection.Down:n=3;break;case o.RawDirection.Left:n=4;break;default:return null}let s;switch(i.by){case o.RawUnit.Line:s=1;break;case o.RawUnit.WrappedLine:s=2;break;case o.RawUnit.Page:s=3;break;case o.RawUnit.HalfPage:s=4;break;case o.RawUnit.Editor:s=5;break;case o.RawUnit.Column:s=6;break;default:s=2}const r=Math.floor(i.value||1),a=!!i.revealCursor;return{direction:n,unit:s,value:r,revealCursor:a,select:!!i.select}}o.parse=t})(xo||(xo={}));var cC;(function(o){const e=function(t){if(!Br(t))return!1;const i=t;return!(!om(i.lineNumber)&&!Ur(i.lineNumber)||!Wa(i.at)&&!Ur(i.at))};o.metadata={description:"Reveal the given line at the given logical position",args:[{name:"Reveal line argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'lineNumber': A mandatory line number value.\n					* 'at': Logical position at which line has to be revealed.\n						```\n						'top', 'center', 'bottom'\n						```\n				",constraint:e,schema:{type:"object",required:["lineNumber"],properties:{lineNumber:{type:["number","string"]},at:{type:"string",enum:["top","center","bottom"]}}}}]},o.RawAtArgument={Top:"top",Center:"center",Bottom:"bottom"}})(cC||(cC={}));class N9{constructor(e){e.addImplementation(1e4,"code-editor",(t,i)=>{const n=t.get(gi).getFocusedCodeEditor();return n&&n.hasTextFocus()?this._runEditorCommand(t,n,i):!1}),e.addImplementation(1e3,"generic-dom-input-textarea",(t,i)=>{const n=No();return n&&["input","textarea"].indexOf(n.tagName.toLowerCase())>=0?(this.runDOMCommand(n),!0):!1}),e.addImplementation(0,"generic-dom",(t,i)=>{const n=t.get(gi).getActiveCodeEditor();return n?(n.focus(),this._runEditorCommand(t,n,i)):!1})}_runEditorCommand(e,t,i){const n=this.runEditorCommand(e,t,i);return n||!0}}var no;(function(o){class e extends ts{constructor(L){super(L),this._inSelectionMode=L.inSelectionMode}runCoreEditorCommand(L,x){if(!x.position)return;L.model.pushStackElement(),L.setCursorStates(x.source,3,[ho.moveTo(L,L.getPrimaryCursorState(),this._inSelectionMode,x.position,x.viewPosition)])&&x.revealType!==2&&L.revealAllCursors(x.source,!0,!0)}}o.MoveTo=Me(new e({id:"_moveTo",inSelectionMode:!1,precondition:void 0})),o.MoveToSelect=Me(new e({id:"_moveToSelect",inSelectionMode:!0,precondition:void 0}));class t extends ts{runCoreEditorCommand(L,x){L.model.pushStackElement();const D=this._getColumnSelectResult(L,L.getPrimaryCursorState(),L.getCursorColumnSelectData(),x);D!==null&&(L.setCursorStates(x.source,3,D.viewStates.map(E=>fi.fromViewState(E))),L.setCursorColumnSelectData({isReal:!0,fromViewLineNumber:D.fromLineNumber,fromViewVisualColumn:D.fromVisualColumn,toViewLineNumber:D.toLineNumber,toViewVisualColumn:D.toVisualColumn}),D.reversed?L.revealTopMostCursor(x.source):L.revealBottomMostCursor(x.source))}}o.ColumnSelect=Me(new class extends t{constructor(){super({id:"columnSelect",precondition:void 0})}_getColumnSelectResult(S,L,x,D){if(typeof D.position>"u"||typeof D.viewPosition>"u"||typeof D.mouseColumn>"u")return null;const E=S.model.validatePosition(D.position),N=S.coordinatesConverter.validateViewPosition(new Z(D.viewPosition.lineNumber,D.viewPosition.column),E),M=D.doColumnSelect?x.fromViewLineNumber:N.lineNumber,F=D.doColumnSelect?x.fromViewVisualColumn:D.mouseColumn-1;return Q_.columnSelect(S.cursorConfig,S,M,F,N.lineNumber,D.mouseColumn-1)}}),o.CursorColumnSelectLeft=Me(new class extends t{constructor(){super({id:"cursorColumnSelectLeft",precondition:void 0,kbOpts:{weight:Si,kbExpr:W.textInputFocus,primary:3599,linux:{primary:0}}})}_getColumnSelectResult(S,L,x,D){return Q_.columnSelectLeft(S.cursorConfig,S,x)}}),o.CursorColumnSelectRight=Me(new class extends t{constructor(){super({id:"cursorColumnSelectRight",precondition:void 0,kbOpts:{weight:Si,kbExpr:W.textInputFocus,primary:3601,linux:{primary:0}}})}_getColumnSelectResult(S,L,x,D){return Q_.columnSelectRight(S.cursorConfig,S,x)}});class i extends t{constructor(L){super(L),this._isPaged=L.isPaged}_getColumnSelectResult(L,x,D,E){return Q_.columnSelectUp(L.cursorConfig,L,D,this._isPaged)}}o.CursorColumnSelectUp=Me(new i({isPaged:!1,id:"cursorColumnSelectUp",precondition:void 0,kbOpts:{weight:Si,kbExpr:W.textInputFocus,primary:3600,linux:{primary:0}}})),o.CursorColumnSelectPageUp=Me(new i({isPaged:!0,id:"cursorColumnSelectPageUp",precondition:void 0,kbOpts:{weight:Si,kbExpr:W.textInputFocus,primary:3595,linux:{primary:0}}}));class n extends t{constructor(L){super(L),this._isPaged=L.isPaged}_getColumnSelectResult(L,x,D,E){return Q_.columnSelectDown(L.cursorConfig,L,D,this._isPaged)}}o.CursorColumnSelectDown=Me(new n({isPaged:!1,id:"cursorColumnSelectDown",precondition:void 0,kbOpts:{weight:Si,kbExpr:W.textInputFocus,primary:3602,linux:{primary:0}}})),o.CursorColumnSelectPageDown=Me(new n({isPaged:!0,id:"cursorColumnSelectPageDown",precondition:void 0,kbOpts:{weight:Si,kbExpr:W.textInputFocus,primary:3596,linux:{primary:0}}}));class s extends ts{constructor(){super({id:"cursorMove",precondition:void 0,metadata:AR.metadata})}runCoreEditorCommand(L,x){const D=AR.parse(x);D&&this._runCursorMove(L,x.source,D)}_runCursorMove(L,x,D){L.model.pushStackElement(),L.setCursorStates(x,3,s._move(L,L.getCursorStates(),D)),L.revealAllCursors(x,!0)}static _move(L,x,D){const E=D.select,N=D.value;switch(D.direction){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:return ho.simpleMove(L,x,D.direction,E,N,D.unit);case 11:case 13:case 12:case 14:return ho.viewportMove(L,x,D.direction,E,N);default:return null}}}o.CursorMoveImpl=s,o.CursorMove=Me(new s);class r extends ts{constructor(L){super(L),this._staticArgs=L.args}runCoreEditorCommand(L,x){let D=this._staticArgs;this._staticArgs.value===-1&&(D={direction:this._staticArgs.direction,unit:this._staticArgs.unit,select:this._staticArgs.select,value:x.pageSize||L.cursorConfig.pageSize}),L.model.pushStackElement(),L.setCursorStates(x.source,3,ho.simpleMove(L,L.getCursorStates(),D.direction,D.select,D.value,D.unit)),L.revealAllCursors(x.source,!0)}}o.CursorLeft=Me(new r({args:{direction:0,unit:0,select:!1,value:1},id:"cursorLeft",precondition:void 0,kbOpts:{weight:Si,kbExpr:W.textInputFocus,primary:15,mac:{primary:15,secondary:[288]}}})),o.CursorLeftSelect=Me(new r({args:{direction:0,unit:0,select:!0,value:1},id:"cursorLeftSelect",precondition:void 0,kbOpts:{weight:Si,kbExpr:W.textInputFocus,primary:1039}})),o.CursorRight=Me(new r({args:{direction:1,unit:0,select:!1,value:1},id:"cursorRight",precondition:void 0,kbOpts:{weight:Si,kbExpr:W.textInputFocus,primary:17,mac:{primary:17,secondary:[292]}}})),o.CursorRightSelect=Me(new r({args:{direction:1,unit:0,select:!0,value:1},id:"cursorRightSelect",precondition:void 0,kbOpts:{weight:Si,kbExpr:W.textInputFocus,primary:1041}})),o.CursorUp=Me(new r({args:{direction:2,unit:2,select:!1,value:1},id:"cursorUp",precondition:void 0,kbOpts:{weight:Si,kbExpr:W.textInputFocus,primary:16,mac:{primary:16,secondary:[302]}}})),o.CursorUpSelect=Me(new r({args:{direction:2,unit:2,select:!0,value:1},id:"cursorUpSelect",precondition:void 0,kbOpts:{weight:Si,kbExpr:W.textInputFocus,primary:1040,secondary:[3088],mac:{primary:1040},linux:{primary:1040}}})),o.CursorPageUp=Me(new r({args:{direction:2,unit:2,select:!1,value:-1},id:"cursorPageUp",precondition:void 0,kbOpts:{weight:Si,kbExpr:W.textInputFocus,primary:11}})),o.CursorPageUpSelect=Me(new r({args:{direction:2,unit:2,select:!0,value:-1},id:"cursorPageUpSelect",precondition:void 0,kbOpts:{weight:Si,kbExpr:W.textInputFocus,primary:1035}})),o.CursorDown=Me(new r({args:{direction:3,unit:2,select:!1,value:1},id:"cursorDown",precondition:void 0,kbOpts:{weight:Si,kbExpr:W.textInputFocus,primary:18,mac:{primary:18,secondary:[300]}}})),o.CursorDownSelect=Me(new r({args:{direction:3,unit:2,select:!0,value:1},id:"cursorDownSelect",precondition:void 0,kbOpts:{weight:Si,kbExpr:W.textInputFocus,primary:1042,secondary:[3090],mac:{primary:1042},linux:{primary:1042}}})),o.CursorPageDown=Me(new r({args:{direction:3,unit:2,select:!1,value:-1},id:"cursorPageDown",precondition:void 0,kbOpts:{weight:Si,kbExpr:W.textInputFocus,primary:12}})),o.CursorPageDownSelect=Me(new r({args:{direction:3,unit:2,select:!0,value:-1},id:"cursorPageDownSelect",precondition:void 0,kbOpts:{weight:Si,kbExpr:W.textInputFocus,primary:1036}})),o.CreateCursor=Me(new class extends ts{constructor(){super({id:"createCursor",precondition:void 0})}runCoreEditorCommand(S,L){if(!L.position)return;let x;L.wholeLine?x=ho.line(S,S.getPrimaryCursorState(),!1,L.position,L.viewPosition):x=ho.moveTo(S,S.getPrimaryCursorState(),!1,L.position,L.viewPosition);const D=S.getCursorStates();if(D.length>1){const E=x.modelState?x.modelState.position:null,N=x.viewState?x.viewState.position:null;for(let M=0,F=D.length;M<F;M++){const H=D[M];if(!(E&&!H.modelState.selection.containsPosition(E))&&!(N&&!H.viewState.selection.containsPosition(N))){D.splice(M,1),S.model.pushStackElement(),S.setCursorStates(L.source,3,D);return}}}D.push(x),S.model.pushStackElement(),S.setCursorStates(L.source,3,D)}}),o.LastCursorMoveToSelect=Me(new class extends ts{constructor(){super({id:"_lastCursorMoveToSelect",precondition:void 0})}runCoreEditorCommand(S,L){if(!L.position)return;const x=S.getLastAddedCursorIndex(),D=S.getCursorStates(),E=D.slice(0);E[x]=ho.moveTo(S,D[x],!0,L.position,L.viewPosition),S.model.pushStackElement(),S.setCursorStates(L.source,3,E)}});class a extends ts{constructor(L){super(L),this._inSelectionMode=L.inSelectionMode}runCoreEditorCommand(L,x){L.model.pushStackElement(),L.setCursorStates(x.source,3,ho.moveToBeginningOfLine(L,L.getCursorStates(),this._inSelectionMode)),L.revealAllCursors(x.source,!0)}}o.CursorHome=Me(new a({inSelectionMode:!1,id:"cursorHome",precondition:void 0,kbOpts:{weight:Si,kbExpr:W.textInputFocus,primary:14,mac:{primary:14,secondary:[2063]}}})),o.CursorHomeSelect=Me(new a({inSelectionMode:!0,id:"cursorHomeSelect",precondition:void 0,kbOpts:{weight:Si,kbExpr:W.textInputFocus,primary:1038,mac:{primary:1038,secondary:[3087]}}}));class l extends ts{constructor(L){super(L),this._inSelectionMode=L.inSelectionMode}runCoreEditorCommand(L,x){L.model.pushStackElement(),L.setCursorStates(x.source,3,this._exec(L.getCursorStates())),L.revealAllCursors(x.source,!0)}_exec(L){const x=[];for(let D=0,E=L.length;D<E;D++){const N=L[D],M=N.modelState.position.lineNumber;x[D]=fi.fromModelState(N.modelState.move(this._inSelectionMode,M,1,0))}return x}}o.CursorLineStart=Me(new l({inSelectionMode:!1,id:"cursorLineStart",precondition:void 0,kbOpts:{weight:Si,kbExpr:W.textInputFocus,primary:0,mac:{primary:287}}})),o.CursorLineStartSelect=Me(new l({inSelectionMode:!0,id:"cursorLineStartSelect",precondition:void 0,kbOpts:{weight:Si,kbExpr:W.textInputFocus,primary:0,mac:{primary:1311}}}));class c extends ts{constructor(L){super(L),this._inSelectionMode=L.inSelectionMode}runCoreEditorCommand(L,x){L.model.pushStackElement(),L.setCursorStates(x.source,3,ho.moveToEndOfLine(L,L.getCursorStates(),this._inSelectionMode,x.sticky||!1)),L.revealAllCursors(x.source,!0)}}o.CursorEnd=Me(new c({inSelectionMode:!1,id:"cursorEnd",precondition:void 0,kbOpts:{args:{sticky:!1},weight:Si,kbExpr:W.textInputFocus,primary:13,mac:{primary:13,secondary:[2065]}},metadata:{description:"Go to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:v("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}})),o.CursorEndSelect=Me(new c({inSelectionMode:!0,id:"cursorEndSelect",precondition:void 0,kbOpts:{args:{sticky:!1},weight:Si,kbExpr:W.textInputFocus,primary:1037,mac:{primary:1037,secondary:[3089]}},metadata:{description:"Select to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:v("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}}));class u extends ts{constructor(L){super(L),this._inSelectionMode=L.inSelectionMode}runCoreEditorCommand(L,x){L.model.pushStackElement(),L.setCursorStates(x.source,3,this._exec(L,L.getCursorStates())),L.revealAllCursors(x.source,!0)}_exec(L,x){const D=[];for(let E=0,N=x.length;E<N;E++){const M=x[E],F=M.modelState.position.lineNumber,H=L.model.getLineMaxColumn(F);D[E]=fi.fromModelState(M.modelState.move(this._inSelectionMode,F,H,0))}return D}}o.CursorLineEnd=Me(new u({inSelectionMode:!1,id:"cursorLineEnd",precondition:void 0,kbOpts:{weight:Si,kbExpr:W.textInputFocus,primary:0,mac:{primary:291}}})),o.CursorLineEndSelect=Me(new u({inSelectionMode:!0,id:"cursorLineEndSelect",precondition:void 0,kbOpts:{weight:Si,kbExpr:W.textInputFocus,primary:0,mac:{primary:1315}}}));class f extends ts{constructor(L){super(L),this._inSelectionMode=L.inSelectionMode}runCoreEditorCommand(L,x){L.model.pushStackElement(),L.setCursorStates(x.source,3,ho.moveToBeginningOfBuffer(L,L.getCursorStates(),this._inSelectionMode)),L.revealAllCursors(x.source,!0)}}o.CursorTop=Me(new f({inSelectionMode:!1,id:"cursorTop",precondition:void 0,kbOpts:{weight:Si,kbExpr:W.textInputFocus,primary:2062,mac:{primary:2064}}})),o.CursorTopSelect=Me(new f({inSelectionMode:!0,id:"cursorTopSelect",precondition:void 0,kbOpts:{weight:Si,kbExpr:W.textInputFocus,primary:3086,mac:{primary:3088}}}));class g extends ts{constructor(L){super(L),this._inSelectionMode=L.inSelectionMode}runCoreEditorCommand(L,x){L.model.pushStackElement(),L.setCursorStates(x.source,3,ho.moveToEndOfBuffer(L,L.getCursorStates(),this._inSelectionMode)),L.revealAllCursors(x.source,!0)}}o.CursorBottom=Me(new g({inSelectionMode:!1,id:"cursorBottom",precondition:void 0,kbOpts:{weight:Si,kbExpr:W.textInputFocus,primary:2061,mac:{primary:2066}}})),o.CursorBottomSelect=Me(new g({inSelectionMode:!0,id:"cursorBottomSelect",precondition:void 0,kbOpts:{weight:Si,kbExpr:W.textInputFocus,primary:3085,mac:{primary:3090}}}));class p extends ts{constructor(){super({id:"editorScroll",precondition:void 0,metadata:xo.metadata})}determineScrollMethod(L){const x=[6],D=[1,2,3,4,5,6],E=[4,2],N=[1,3];return x.includes(L.unit)&&E.includes(L.direction)?this._runHorizontalEditorScroll.bind(this):D.includes(L.unit)&&N.includes(L.direction)?this._runVerticalEditorScroll.bind(this):null}runCoreEditorCommand(L,x){const D=xo.parse(x);if(!D)return;const E=this.determineScrollMethod(D);E&&E(L,x.source,D)}_runVerticalEditorScroll(L,x,D){const E=this._computeDesiredScrollTop(L,D);if(D.revealCursor){const N=L.getCompletelyVisibleViewRangeAtScrollTop(E);L.setCursorStates(x,3,[ho.findPositionInViewportIfOutside(L,L.getPrimaryCursorState(),N,D.select)])}L.viewLayout.setScrollPosition({scrollTop:E},0)}_computeDesiredScrollTop(L,x){if(x.unit===1){const N=L.viewLayout.getFutureViewport(),M=L.getCompletelyVisibleViewRangeAtScrollTop(N.top),F=L.coordinatesConverter.convertViewRangeToModelRange(M);let H;x.direction===1?H=Math.max(1,F.startLineNumber-x.value):H=Math.min(L.model.getLineCount(),F.startLineNumber+x.value);const Q=L.coordinatesConverter.convertModelPositionToViewPosition(new Z(H,1));return L.viewLayout.getVerticalOffsetForLineNumber(Q.lineNumber)}if(x.unit===5){let N=0;return x.direction===3&&(N=L.model.getLineCount()-L.cursorConfig.pageSize),L.viewLayout.getVerticalOffsetForLineNumber(N)}let D;x.unit===3?D=L.cursorConfig.pageSize*x.value:x.unit===4?D=Math.round(L.cursorConfig.pageSize/2)*x.value:D=x.value;const E=(x.direction===1?-1:1)*D;return L.viewLayout.getCurrentScrollTop()+E*L.cursorConfig.lineHeight}_runHorizontalEditorScroll(L,x,D){const E=this._computeDesiredScrollLeft(L,D);L.viewLayout.setScrollPosition({scrollLeft:E},0)}_computeDesiredScrollLeft(L,x){const D=(x.direction===4?-1:1)*x.value;return L.viewLayout.getCurrentScrollLeft()+D*L.cursorConfig.typicalHalfwidthCharacterWidth}}o.EditorScrollImpl=p,o.EditorScroll=Me(new p),o.ScrollLineUp=Me(new class extends ts{constructor(){super({id:"scrollLineUp",precondition:void 0,kbOpts:{weight:Si,kbExpr:W.textInputFocus,primary:2064,mac:{primary:267}}})}runCoreEditorCommand(S,L){o.EditorScroll.runCoreEditorCommand(S,{to:xo.RawDirection.Up,by:xo.RawUnit.WrappedLine,value:1,revealCursor:!1,select:!1,source:L.source})}}),o.ScrollPageUp=Me(new class extends ts{constructor(){super({id:"scrollPageUp",precondition:void 0,kbOpts:{weight:Si,kbExpr:W.textInputFocus,primary:2059,win:{primary:523},linux:{primary:523}}})}runCoreEditorCommand(S,L){o.EditorScroll.runCoreEditorCommand(S,{to:xo.RawDirection.Up,by:xo.RawUnit.Page,value:1,revealCursor:!1,select:!1,source:L.source})}}),o.ScrollEditorTop=Me(new class extends ts{constructor(){super({id:"scrollEditorTop",precondition:void 0,kbOpts:{weight:Si,kbExpr:W.textInputFocus}})}runCoreEditorCommand(S,L){o.EditorScroll.runCoreEditorCommand(S,{to:xo.RawDirection.Up,by:xo.RawUnit.Editor,value:1,revealCursor:!1,select:!1,source:L.source})}}),o.ScrollLineDown=Me(new class extends ts{constructor(){super({id:"scrollLineDown",precondition:void 0,kbOpts:{weight:Si,kbExpr:W.textInputFocus,primary:2066,mac:{primary:268}}})}runCoreEditorCommand(S,L){o.EditorScroll.runCoreEditorCommand(S,{to:xo.RawDirection.Down,by:xo.RawUnit.WrappedLine,value:1,revealCursor:!1,select:!1,source:L.source})}}),o.ScrollPageDown=Me(new class extends ts{constructor(){super({id:"scrollPageDown",precondition:void 0,kbOpts:{weight:Si,kbExpr:W.textInputFocus,primary:2060,win:{primary:524},linux:{primary:524}}})}runCoreEditorCommand(S,L){o.EditorScroll.runCoreEditorCommand(S,{to:xo.RawDirection.Down,by:xo.RawUnit.Page,value:1,revealCursor:!1,select:!1,source:L.source})}}),o.ScrollEditorBottom=Me(new class extends ts{constructor(){super({id:"scrollEditorBottom",precondition:void 0,kbOpts:{weight:Si,kbExpr:W.textInputFocus}})}runCoreEditorCommand(S,L){o.EditorScroll.runCoreEditorCommand(S,{to:xo.RawDirection.Down,by:xo.RawUnit.Editor,value:1,revealCursor:!1,select:!1,source:L.source})}}),o.ScrollLeft=Me(new class extends ts{constructor(){super({id:"scrollLeft",precondition:void 0,kbOpts:{weight:Si,kbExpr:W.textInputFocus}})}runCoreEditorCommand(S,L){o.EditorScroll.runCoreEditorCommand(S,{to:xo.RawDirection.Left,by:xo.RawUnit.Column,value:2,revealCursor:!1,select:!1,source:L.source})}}),o.ScrollRight=Me(new class extends ts{constructor(){super({id:"scrollRight",precondition:void 0,kbOpts:{weight:Si,kbExpr:W.textInputFocus}})}runCoreEditorCommand(S,L){o.EditorScroll.runCoreEditorCommand(S,{to:xo.RawDirection.Right,by:xo.RawUnit.Column,value:2,revealCursor:!1,select:!1,source:L.source})}});class _ extends ts{constructor(L){super(L),this._inSelectionMode=L.inSelectionMode}runCoreEditorCommand(L,x){x.position&&(L.model.pushStackElement(),L.setCursorStates(x.source,3,[ho.word(L,L.getPrimaryCursorState(),this._inSelectionMode,x.position)]),x.revealType!==2&&L.revealAllCursors(x.source,!0,!0))}}o.WordSelect=Me(new _({inSelectionMode:!1,id:"_wordSelect",precondition:void 0})),o.WordSelectDrag=Me(new _({inSelectionMode:!0,id:"_wordSelectDrag",precondition:void 0})),o.LastCursorWordSelect=Me(new class extends ts{constructor(){super({id:"lastCursorWordSelect",precondition:void 0})}runCoreEditorCommand(S,L){if(!L.position)return;const x=S.getLastAddedCursorIndex(),D=S.getCursorStates(),E=D.slice(0),N=D[x];E[x]=ho.word(S,N,N.modelState.hasSelection(),L.position),S.model.pushStackElement(),S.setCursorStates(L.source,3,E)}});class b extends ts{constructor(L){super(L),this._inSelectionMode=L.inSelectionMode}runCoreEditorCommand(L,x){x.position&&(L.model.pushStackElement(),L.setCursorStates(x.source,3,[ho.line(L,L.getPrimaryCursorState(),this._inSelectionMode,x.position,x.viewPosition)]),x.revealType!==2&&L.revealAllCursors(x.source,!1,!0))}}o.LineSelect=Me(new b({inSelectionMode:!1,id:"_lineSelect",precondition:void 0})),o.LineSelectDrag=Me(new b({inSelectionMode:!0,id:"_lineSelectDrag",precondition:void 0}));class y extends ts{constructor(L){super(L),this._inSelectionMode=L.inSelectionMode}runCoreEditorCommand(L,x){if(!x.position)return;const D=L.getLastAddedCursorIndex(),E=L.getCursorStates(),N=E.slice(0);N[D]=ho.line(L,E[D],this._inSelectionMode,x.position,x.viewPosition),L.model.pushStackElement(),L.setCursorStates(x.source,3,N)}}o.LastCursorLineSelect=Me(new y({inSelectionMode:!1,id:"lastCursorLineSelect",precondition:void 0})),o.LastCursorLineSelectDrag=Me(new y({inSelectionMode:!0,id:"lastCursorLineSelectDrag",precondition:void 0})),o.CancelSelection=Me(new class extends ts{constructor(){super({id:"cancelSelection",precondition:W.hasNonEmptySelection,kbOpts:{weight:Si,kbExpr:W.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(S,L){S.model.pushStackElement(),S.setCursorStates(L.source,3,[ho.cancelSelection(S,S.getPrimaryCursorState())]),S.revealAllCursors(L.source,!0)}}),o.RemoveSecondaryCursors=Me(new class extends ts{constructor(){super({id:"removeSecondaryCursors",precondition:W.hasMultipleSelections,kbOpts:{weight:Si+1,kbExpr:W.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(S,L){S.model.pushStackElement(),S.setCursorStates(L.source,3,[S.getPrimaryCursorState()]),S.revealAllCursors(L.source,!0),fh(v("removedCursor","Removed secondary cursors"))}}),o.RevealLine=Me(new class extends ts{constructor(){super({id:"revealLine",precondition:void 0,metadata:cC.metadata})}runCoreEditorCommand(S,L){const x=L,D=x.lineNumber||0;let E=typeof D=="number"?D+1:parseInt(D)+1;E<1&&(E=1);const N=S.model.getLineCount();E>N&&(E=N);const M=new A(E,1,E,S.model.getLineMaxColumn(E));let F=0;if(x.at)switch(x.at){case cC.RawAtArgument.Top:F=3;break;case cC.RawAtArgument.Center:F=1;break;case cC.RawAtArgument.Bottom:F=4;break}const H=S.coordinatesConverter.convertModelRangeToViewRange(M);S.revealRange(L.source,!1,H,F,0)}}),o.SelectAll=new class extends N9{constructor(){super(Owe)}runDOMCommand(S){uc&&(S.focus(),S.select()),S.ownerDocument.execCommand("selectAll")}runEditorCommand(S,L,x){const D=L._getViewModel();D&&this.runCoreEditorCommand(D,x)}runCoreEditorCommand(S,L){S.model.pushStackElement(),S.setCursorStates("keyboard",3,[ho.selectAll(S,S.getPrimaryCursorState())])}},o.SetSelection=Me(new class extends ts{constructor(){super({id:"setSelection",precondition:void 0})}runCoreEditorCommand(S,L){L.selection&&(S.model.pushStackElement(),S.setCursorStates(L.source,3,[fi.fromModelSelection(L.selection)]))}})})(no||(no={}));const Wke=ue.and(W.textInputFocus,W.columnSelection);function J1(o,e){ma.registerKeybindingRule({id:o,primary:e,when:Wke,weight:Si+1})}J1(no.CursorColumnSelectLeft.id,1039);J1(no.CursorColumnSelectRight.id,1041);J1(no.CursorColumnSelectUp.id,1040);J1(no.CursorColumnSelectPageUp.id,1035);J1(no.CursorColumnSelectDown.id,1042);J1(no.CursorColumnSelectPageDown.id,1036);function eQ(o){return o.register(),o}var RC;(function(o){class e extends zs{runEditorCommand(i,n,s){const r=n._getViewModel();r&&this.runCoreEditingCommand(n,r,s||{})}}o.CoreEditingCommand=e,o.LineBreakInsert=Me(new class extends e{constructor(){super({id:"lineBreakInsert",precondition:W.writable,kbOpts:{weight:Si,kbExpr:W.textInputFocus,primary:0,mac:{primary:301}}})}runCoreEditingCommand(t,i,n){t.pushUndoStop(),t.executeCommands(this.id,Hn.lineBreakInsert(i.cursorConfig,i.model,i.getCursorStates().map(s=>s.modelState.selection)))}}),o.Outdent=Me(new class extends e{constructor(){super({id:"outdent",precondition:W.writable,kbOpts:{weight:Si,kbExpr:ue.and(W.editorTextFocus,W.tabDoesNotMoveFocus),primary:1026}})}runCoreEditingCommand(t,i,n){t.pushUndoStop(),t.executeCommands(this.id,Hn.outdent(i.cursorConfig,i.model,i.getCursorStates().map(s=>s.modelState.selection))),t.pushUndoStop()}}),o.Tab=Me(new class extends e{constructor(){super({id:"tab",precondition:W.writable,kbOpts:{weight:Si,kbExpr:ue.and(W.editorTextFocus,W.tabDoesNotMoveFocus),primary:2}})}runCoreEditingCommand(t,i,n){t.pushUndoStop(),t.executeCommands(this.id,Hn.tab(i.cursorConfig,i.model,i.getCursorStates().map(s=>s.modelState.selection))),t.pushUndoStop()}}),o.DeleteLeft=Me(new class extends e{constructor(){super({id:"deleteLeft",precondition:void 0,kbOpts:{weight:Si,kbExpr:W.textInputFocus,primary:1,secondary:[1025],mac:{primary:1,secondary:[1025,294,257]}}})}runCoreEditingCommand(t,i,n){const[s,r]=Pv.deleteLeft(i.getPrevEditOperationType(),i.cursorConfig,i.model,i.getCursorStates().map(a=>a.modelState.selection),i.getCursorAutoClosedCharacters());s&&t.pushUndoStop(),t.executeCommands(this.id,r),i.setPrevEditOperationType(2)}}),o.DeleteRight=Me(new class extends e{constructor(){super({id:"deleteRight",precondition:void 0,kbOpts:{weight:Si,kbExpr:W.textInputFocus,primary:20,mac:{primary:20,secondary:[290,276]}}})}runCoreEditingCommand(t,i,n){const[s,r]=Pv.deleteRight(i.getPrevEditOperationType(),i.cursorConfig,i.model,i.getCursorStates().map(a=>a.modelState.selection));s&&t.pushUndoStop(),t.executeCommands(this.id,r),i.setPrevEditOperationType(3)}}),o.Undo=new class extends N9{constructor(){super(Xie)}runDOMCommand(t){t.ownerDocument.execCommand("undo")}runEditorCommand(t,i,n){if(!(!i.hasModel()||i.getOption(91)===!0))return i.getModel().undo()}},o.Redo=new class extends N9{constructor(){super(Jie)}runDOMCommand(t){t.ownerDocument.execCommand("redo")}runEditorCommand(t,i,n){if(!(!i.hasModel()||i.getOption(91)===!0))return i.getModel().redo()}}})(RC||(RC={}));class tQ extends EA{constructor(e,t,i){super({id:e,precondition:void 0,metadata:i}),this._handlerId=t}runCommand(e,t){const i=e.get(gi).getFocusedCodeEditor();i&&i.trigger("keyboard",this._handlerId,t)}}function db(o,e){eQ(new tQ("default:"+o,o)),eQ(new tQ(o,o,e))}db("type",{description:"Type",args:[{name:"args",schema:{type:"object",required:["text"],properties:{text:{type:"string"}}}}]});db("replacePreviousChar");db("compositionType");db("compositionStart");db("compositionEnd");db("paste");db("cut");class Vke{constructor(e,t,i,n){this.configuration=e,this.viewModel=t,this.userInputEvents=i,this.commandDelegate=n}paste(e,t,i,n){this.commandDelegate.paste(e,t,i,n)}type(e){this.commandDelegate.type(e)}compositionType(e,t,i,n){this.commandDelegate.compositionType(e,t,i,n)}compositionStart(){this.commandDelegate.startComposition()}compositionEnd(){this.commandDelegate.endComposition()}cut(){this.commandDelegate.cut()}setSelection(e){no.SetSelection.runCoreEditorCommand(this.viewModel,{source:"keyboard",selection:e})}_validateViewColumn(e){const t=this.viewModel.getLineMinColumn(e.lineNumber);return e.column<t?new Z(e.lineNumber,t):e}_hasMulticursorModifier(e){switch(this.configuration.options.get(78)){case"altKey":return e.altKey;case"ctrlKey":return e.ctrlKey;case"metaKey":return e.metaKey;default:return!1}}_hasNonMulticursorModifier(e){switch(this.configuration.options.get(78)){case"altKey":return e.ctrlKey||e.metaKey;case"ctrlKey":return e.altKey||e.metaKey;case"metaKey":return e.ctrlKey||e.altKey;default:return!1}}dispatchMouse(e){const t=this.configuration.options,i=jr&&t.get(107),n=t.get(22);e.middleButton&&!i?this._columnSelect(e.position,e.mouseColumn,e.inSelectionMode):e.startedOnLineNumbers?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelect(e.position,e.revealType):this._createCursor(e.position,!0):e.inSelectionMode?this._lineSelectDrag(e.position,e.revealType):this._lineSelect(e.position,e.revealType):e.mouseDownCount>=4?this._selectAll():e.mouseDownCount===3?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelectDrag(e.position,e.revealType):this._lastCursorLineSelect(e.position,e.revealType):e.inSelectionMode?this._lineSelectDrag(e.position,e.revealType):this._lineSelect(e.position,e.revealType):e.mouseDownCount===2?e.onInjectedText||(this._hasMulticursorModifier(e)?this._lastCursorWordSelect(e.position,e.revealType):e.inSelectionMode?this._wordSelectDrag(e.position,e.revealType):this._wordSelect(e.position,e.revealType)):this._hasMulticursorModifier(e)?this._hasNonMulticursorModifier(e)||(e.shiftKey?this._columnSelect(e.position,e.mouseColumn,!0):e.inSelectionMode?this._lastCursorMoveToSelect(e.position,e.revealType):this._createCursor(e.position,!1)):e.inSelectionMode?e.altKey?this._columnSelect(e.position,e.mouseColumn,!0):n?this._columnSelect(e.position,e.mouseColumn,!0):this._moveToSelect(e.position,e.revealType):this.moveTo(e.position,e.revealType)}_usualArgs(e,t){return e=this._validateViewColumn(e),{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,revealType:t}}moveTo(e,t){no.MoveTo.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_moveToSelect(e,t){no.MoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_columnSelect(e,t,i){e=this._validateViewColumn(e),no.ColumnSelect.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,mouseColumn:t,doColumnSelect:i})}_createCursor(e,t){e=this._validateViewColumn(e),no.CreateCursor.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,wholeLine:t})}_lastCursorMoveToSelect(e,t){no.LastCursorMoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_wordSelect(e,t){no.WordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_wordSelectDrag(e,t){no.WordSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorWordSelect(e,t){no.LastCursorWordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lineSelect(e,t){no.LineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lineSelectDrag(e,t){no.LineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorLineSelect(e,t){no.LastCursorLineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorLineSelectDrag(e,t){no.LastCursorLineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_selectAll(){no.SelectAll.runCoreEditorCommand(this.viewModel,{source:"mouse"})}_convertViewToModelPosition(e){return this.viewModel.coordinatesConverter.convertViewPositionToModelPosition(e)}emitKeyDown(e){this.userInputEvents.emitKeyDown(e)}emitKeyUp(e){this.userInputEvents.emitKeyUp(e)}emitContextMenu(e){this.userInputEvents.emitContextMenu(e)}emitMouseMove(e){this.userInputEvents.emitMouseMove(e)}emitMouseLeave(e){this.userInputEvents.emitMouseLeave(e)}emitMouseUp(e){this.userInputEvents.emitMouseUp(e)}emitMouseDown(e){this.userInputEvents.emitMouseDown(e)}emitMouseDrag(e){this.userInputEvents.emitMouseDrag(e)}emitMouseDrop(e){this.userInputEvents.emitMouseDrop(e)}emitMouseDropCanceled(){this.userInputEvents.emitMouseDropCanceled()}emitMouseWheel(e){this.userInputEvents.emitMouseWheel(e)}}class cse{constructor(e){this._createLine=e,this._set(1,[])}flush(){this._set(1,[])}_set(e,t){this._lines=t,this._rendLineNumberStart=e}_get(){return{rendLineNumberStart:this._rendLineNumberStart,lines:this._lines}}getStartLineNumber(){return this._rendLineNumberStart}getEndLineNumber(){return this._rendLineNumberStart+this._lines.length-1}getCount(){return this._lines.length}getLine(e){const t=e-this._rendLineNumberStart;if(t<0||t>=this._lines.length)throw new pn("Illegal value for lineNumber");return this._lines[t]}onLinesDeleted(e,t){if(this.getCount()===0)return null;const i=this.getStartLineNumber(),n=this.getEndLineNumber();if(t<i){const l=t-e+1;return this._rendLineNumberStart-=l,null}if(e>n)return null;let s=0,r=0;for(let l=i;l<=n;l++){const c=l-this._rendLineNumberStart;e<=l&&l<=t&&(r===0?(s=c,r=1):r++)}if(e<i){let l=0;t<i?l=t-e+1:l=i-e,this._rendLineNumberStart-=l}return this._lines.splice(s,r)}onLinesChanged(e,t){const i=e+t-1;if(this.getCount()===0)return!1;const n=this.getStartLineNumber(),s=this.getEndLineNumber();let r=!1;for(let a=e;a<=i;a++)a>=n&&a<=s&&(this._lines[a-this._rendLineNumberStart].onContentChanged(),r=!0);return r}onLinesInserted(e,t){if(this.getCount()===0)return null;const i=t-e+1,n=this.getStartLineNumber(),s=this.getEndLineNumber();if(e<=n)return this._rendLineNumberStart+=i,null;if(e>s)return null;if(i+e>s)return this._lines.splice(e-this._rendLineNumberStart,s-e+1);const r=[];for(let f=0;f<i;f++)r[f]=this._createLine();const a=e-this._rendLineNumberStart,l=this._lines.slice(0,a),c=this._lines.slice(a,this._lines.length-i),u=this._lines.slice(this._lines.length-i,this._lines.length);return this._lines=l.concat(r).concat(c),u}onTokensChanged(e){if(this.getCount()===0)return!1;const t=this.getStartLineNumber(),i=this.getEndLineNumber();let n=!1;for(let s=0,r=e.length;s<r;s++){const a=e[s];if(a.toLineNumber<t||a.fromLineNumber>i)continue;const l=Math.max(t,a.fromLineNumber),c=Math.min(i,a.toLineNumber);for(let u=l;u<=c;u++){const f=u-this._rendLineNumberStart;this._lines[f].onTokensChanged(),n=!0}}return n}}class dse{constructor(e){this._host=e,this.domNode=this._createDomNode(),this._linesCollection=new cse(()=>this._host.createVisibleLine())}_createDomNode(){const e=ki(document.createElement("div"));return e.setClassName("view-layer"),e.setPosition("absolute"),e.domNode.setAttribute("role","presentation"),e.domNode.setAttribute("aria-hidden","true"),e}onConfigurationChanged(e){return!!e.hasChanged(145)}onFlushed(e){return this._linesCollection.flush(),!0}onLinesChanged(e){return this._linesCollection.onLinesChanged(e.fromLineNumber,e.count)}onLinesDeleted(e){const t=this._linesCollection.onLinesDeleted(e.fromLineNumber,e.toLineNumber);if(t)for(let i=0,n=t.length;i<n;i++){const s=t[i].getDomNode();s&&this.domNode.domNode.removeChild(s)}return!0}onLinesInserted(e){const t=this._linesCollection.onLinesInserted(e.fromLineNumber,e.toLineNumber);if(t)for(let i=0,n=t.length;i<n;i++){const s=t[i].getDomNode();s&&this.domNode.domNode.removeChild(s)}return!0}onScrollChanged(e){return e.scrollTopChanged}onTokensChanged(e){return this._linesCollection.onTokensChanged(e.ranges)}onZonesChanged(e){return!0}getStartLineNumber(){return this._linesCollection.getStartLineNumber()}getEndLineNumber(){return this._linesCollection.getEndLineNumber()}getVisibleLine(e){return this._linesCollection.getLine(e)}renderLines(e){const t=this._linesCollection._get(),i=new Sf(this.domNode.domNode,this._host,e),n={rendLineNumberStart:t.rendLineNumberStart,lines:t.lines,linesLength:t.lines.length},s=i.render(n,e.startLineNumber,e.endLineNumber,e.relativeVerticalOffset);this._linesCollection._set(s.rendLineNumberStart,s.lines)}}class Sf{constructor(e,t,i){this.domNode=e,this.host=t,this.viewportData=i}render(e,t,i,n){const s={rendLineNumberStart:e.rendLineNumberStart,lines:e.lines.slice(0),linesLength:e.linesLength};if(s.rendLineNumberStart+s.linesLength-1<t||i<s.rendLineNumberStart){s.rendLineNumberStart=t,s.linesLength=i-t+1,s.lines=[];for(let r=t;r<=i;r++)s.lines[r-t]=this.host.createVisibleLine();return this._finishRendering(s,!0,n),s}if(this._renderUntouchedLines(s,Math.max(t-s.rendLineNumberStart,0),Math.min(i-s.rendLineNumberStart,s.linesLength-1),n,t),s.rendLineNumberStart>t){const r=t,a=Math.min(i,s.rendLineNumberStart-1);r<=a&&(this._insertLinesBefore(s,r,a,n,t),s.linesLength+=a-r+1)}else if(s.rendLineNumberStart<t){const r=Math.min(s.linesLength,t-s.rendLineNumberStart);r>0&&(this._removeLinesBefore(s,r),s.linesLength-=r)}if(s.rendLineNumberStart=t,s.rendLineNumberStart+s.linesLength-1<i){const r=s.rendLineNumberStart+s.linesLength,a=i;r<=a&&(this._insertLinesAfter(s,r,a,n,t),s.linesLength+=a-r+1)}else if(s.rendLineNumberStart+s.linesLength-1>i){const r=Math.max(0,i-s.rendLineNumberStart+1),l=s.linesLength-1-r+1;l>0&&(this._removeLinesAfter(s,l),s.linesLength-=l)}return this._finishRendering(s,!1,n),s}_renderUntouchedLines(e,t,i,n,s){const r=e.rendLineNumberStart,a=e.lines;for(let l=t;l<=i;l++){const c=r+l;a[l].layoutLine(c,n[c-s],this.viewportData.lineHeight)}}_insertLinesBefore(e,t,i,n,s){const r=[];let a=0;for(let l=t;l<=i;l++)r[a++]=this.host.createVisibleLine();e.lines=r.concat(e.lines)}_removeLinesBefore(e,t){for(let i=0;i<t;i++){const n=e.lines[i].getDomNode();n&&this.domNode.removeChild(n)}e.lines.splice(0,t)}_insertLinesAfter(e,t,i,n,s){const r=[];let a=0;for(let l=t;l<=i;l++)r[a++]=this.host.createVisibleLine();e.lines=e.lines.concat(r)}_removeLinesAfter(e,t){const i=e.linesLength-t;for(let n=0;n<t;n++){const s=e.lines[i+n].getDomNode();s&&this.domNode.removeChild(s)}e.lines.splice(i,t)}_finishRenderingNewLines(e,t,i,n){Sf._ttPolicy&&(i=Sf._ttPolicy.createHTML(i));const s=this.domNode.lastChild;t||!s?this.domNode.innerHTML=i:s.insertAdjacentHTML("afterend",i);let r=this.domNode.lastChild;for(let a=e.linesLength-1;a>=0;a--){const l=e.lines[a];n[a]&&(l.setDomNode(r),r=r.previousSibling)}}_finishRenderingInvalidLines(e,t,i){const n=document.createElement("div");Sf._ttPolicy&&(t=Sf._ttPolicy.createHTML(t)),n.innerHTML=t;for(let s=0;s<e.linesLength;s++){const r=e.lines[s];if(i[s]){const a=n.firstChild,l=r.getDomNode();l.parentNode.replaceChild(a,l),r.setDomNode(a)}}}_finishRendering(e,t,i){const n=Sf._sb,s=e.linesLength,r=e.lines,a=e.rendLineNumberStart,l=[];{n.reset();let c=!1;for(let u=0;u<s;u++){const f=r[u];l[u]=!1,!(f.getDomNode()||!f.renderLine(u+a,i[u],this.viewportData.lineHeight,this.viewportData,n))&&(l[u]=!0,c=!0)}c&&this._finishRenderingNewLines(e,t,n.build(),l)}{n.reset();let c=!1;const u=[];for(let f=0;f<s;f++){const g=r[f];u[f]=!1,!(l[f]||!g.renderLine(f+a,i[f],this.viewportData.lineHeight,this.viewportData,n))&&(u[f]=!0,c=!0)}c&&this._finishRenderingInvalidLines(e,n.build(),u)}}}Sf._ttPolicy=fg("editorViewLayer",{createHTML:o=>o});Sf._sb=new Y1(1e5);class use extends Ga{constructor(e){super(e),this._visibleLines=new dse(this),this.domNode=this._visibleLines.domNode;const i=this._context.configuration.options.get(50);vo(this.domNode,i),this._dynamicOverlays=[],this._isFocused=!1,this.domNode.setClassName("view-overlays")}shouldRender(){if(super.shouldRender())return!0;for(let e=0,t=this._dynamicOverlays.length;e<t;e++)if(this._dynamicOverlays[e].shouldRender())return!0;return!1}dispose(){super.dispose();for(let e=0,t=this._dynamicOverlays.length;e<t;e++)this._dynamicOverlays[e].dispose();this._dynamicOverlays=[]}getDomNode(){return this.domNode}createVisibleLine(){return new Hke(this._dynamicOverlays)}addDynamicOverlay(e){this._dynamicOverlays.push(e)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e);const i=this._context.configuration.options.get(50);return vo(this.domNode,i),!0}onFlushed(e){return this._visibleLines.onFlushed(e)}onFocusChanged(e){return this._isFocused=e.isFocused,!0}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onScrollChanged(e){return this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._visibleLines.onZonesChanged(e)}prepareRender(e){const t=this._dynamicOverlays.filter(i=>i.shouldRender());for(let i=0,n=t.length;i<n;i++){const s=t[i];s.prepareRender(e),s.onDidRender()}}render(e){this._viewOverlaysRender(e),this.domNode.toggleClassName("focused",this._isFocused)}_viewOverlaysRender(e){this._visibleLines.renderLines(e.viewportData)}}class Hke{constructor(e){this._dynamicOverlays=e,this._domNode=null,this._renderedContent=null}getDomNode(){return this._domNode?this._domNode.domNode:null}setDomNode(e){this._domNode=ki(e)}onContentChanged(){}onTokensChanged(){}renderLine(e,t,i,n,s){let r="";for(let a=0,l=this._dynamicOverlays.length;a<l;a++){const c=this._dynamicOverlays[a];r+=c.render(n.startLineNumber,e)}return this._renderedContent===r?!1:(this._renderedContent=r,s.appendString('<div style="top:'),s.appendString(String(t)),s.appendString("px;height:"),s.appendString(String(i)),s.appendString('px;">'),s.appendString(r),s.appendString("</div>"),!0)}layoutLine(e,t,i){this._domNode&&(this._domNode.setTop(t),this._domNode.setHeight(i))}}class zke extends use{constructor(e){super(e);const i=this._context.configuration.options.get(145);this._contentWidth=i.contentWidth,this.domNode.setHeight(0)}onConfigurationChanged(e){const i=this._context.configuration.options.get(145);return this._contentWidth=i.contentWidth,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollWidthChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e),this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth))}}class Uke extends use{constructor(e){super(e);const t=this._context.configuration.options,i=t.get(145);this._contentLeft=i.contentLeft,this.domNode.setClassName("margin-view-overlays"),this.domNode.setWidth(1),vo(this.domNode,t.get(50))}onConfigurationChanged(e){const t=this._context.configuration.options;vo(this.domNode,t.get(50));const i=t.get(145);return this._contentLeft=i.contentLeft,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollHeightChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e);const t=Math.min(e.scrollHeight,1e6);this.domNode.setHeight(t),this.domNode.setWidth(this._contentLeft)}}class jA{constructor(e){this.onKeyDown=null,this.onKeyUp=null,this.onContextMenu=null,this.onMouseMove=null,this.onMouseLeave=null,this.onMouseDown=null,this.onMouseUp=null,this.onMouseDrag=null,this.onMouseDrop=null,this.onMouseDropCanceled=null,this.onMouseWheel=null,this._coordinatesConverter=e}emitKeyDown(e){var t;(t=this.onKeyDown)===null||t===void 0||t.call(this,e)}emitKeyUp(e){var t;(t=this.onKeyUp)===null||t===void 0||t.call(this,e)}emitContextMenu(e){var t;(t=this.onContextMenu)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseMove(e){var t;(t=this.onMouseMove)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseLeave(e){var t;(t=this.onMouseLeave)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDown(e){var t;(t=this.onMouseDown)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseUp(e){var t;(t=this.onMouseUp)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDrag(e){var t;(t=this.onMouseDrag)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDrop(e){var t;(t=this.onMouseDrop)===null||t===void 0||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDropCanceled(){var e;(e=this.onMouseDropCanceled)===null||e===void 0||e.call(this)}emitMouseWheel(e){var t;(t=this.onMouseWheel)===null||t===void 0||t.call(this,e)}_convertViewToModelMouseEvent(e){return e.target?{event:e.event,target:this._convertViewToModelMouseTarget(e.target)}:e}_convertViewToModelMouseTarget(e){return jA.convertViewToModelMouseTarget(e,this._coordinatesConverter)}static convertViewToModelMouseTarget(e,t){const i={...e};return i.position&&(i.position=t.convertViewPositionToModelPosition(i.position)),i.range&&(i.range=t.convertViewRangeToModelRange(i.range)),(i.type===5||i.type===8)&&(i.detail=this.convertViewToModelViewZoneData(i.detail,t)),i}static convertViewToModelViewZoneData(e,t){return{viewZoneId:e.viewZoneId,positionBefore:e.positionBefore?t.convertViewPositionToModelPosition(e.positionBefore):e.positionBefore,positionAfter:e.positionAfter?t.convertViewPositionToModelPosition(e.positionAfter):e.positionAfter,position:t.convertViewPositionToModelPosition(e.position),afterLineNumber:t.convertViewPositionToModelPosition(new Z(e.afterLineNumber,1)).lineNumber}}}class $ke extends Ga{constructor(e){super(e),this.blocks=[],this.contentWidth=-1,this.contentLeft=0,this.domNode=ki(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("blockDecorations-container"),this.update()}update(){let e=!1;const i=this._context.configuration.options.get(145),n=i.contentWidth-i.verticalScrollbarWidth;this.contentWidth!==n&&(this.contentWidth=n,e=!0);const s=i.contentLeft;return this.contentLeft!==s&&(this.contentLeft=s,e=!0),e}dispose(){super.dispose()}onConfigurationChanged(e){return this.update()}onScrollChanged(e){return e.scrollTopChanged||e.scrollLeftChanged}onDecorationsChanged(e){return!0}onZonesChanged(e){return!0}prepareRender(e){}render(e){var t;let i=0;const n=e.getDecorationsInViewport();for(const s of n){if(!s.options.blockClassName)continue;let r=this.blocks[i];r||(r=this.blocks[i]=ki(document.createElement("div")),this.domNode.appendChild(r));let a,l;s.options.blockIsAfterEnd?(a=e.getVerticalOffsetAfterLineNumber(s.range.endLineNumber,!1),l=e.getVerticalOffsetAfterLineNumber(s.range.endLineNumber,!0)):(a=e.getVerticalOffsetForLineNumber(s.range.startLineNumber,!0),l=s.range.isEmpty()&&!s.options.blockDoesNotCollapse?e.getVerticalOffsetForLineNumber(s.range.startLineNumber,!1):e.getVerticalOffsetAfterLineNumber(s.range.endLineNumber,!0));const[c,u,f,g]=(t=s.options.blockPadding)!==null&&t!==void 0?t:[0,0,0,0];r.setClassName("blockDecorations-block "+s.options.blockClassName),r.setLeft(this.contentLeft-g),r.setWidth(this.contentWidth+g+u),r.setTop(a-e.scrollTop-c),r.setHeight(l-a+c+f),i++}for(let s=i;s<this.blocks.length;s++)this.blocks[s].domNode.remove();this.blocks.length=i}}class jke extends Ga{constructor(e,t){super(e),this._viewDomNode=t,this._widgets={},this.domNode=ki(document.createElement("div")),qd.write(this.domNode,1),this.domNode.setClassName("contentWidgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this.overflowingContentWidgetsDomNode=ki(document.createElement("div")),qd.write(this.overflowingContentWidgetsDomNode,2),this.overflowingContentWidgetsDomNode.setClassName("overflowingContentWidgets")}dispose(){super.dispose(),this._widgets={}}onConfigurationChanged(e){const t=Object.keys(this._widgets);for(const i of t)this._widgets[i].onConfigurationChanged(e);return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLineMappingChanged(e){return this._updateAnchorsViewPositions(),!0}onLinesChanged(e){return this._updateAnchorsViewPositions(),!0}onLinesDeleted(e){return this._updateAnchorsViewPositions(),!0}onLinesInserted(e){return this._updateAnchorsViewPositions(),!0}onScrollChanged(e){return!0}onZonesChanged(e){return!0}_updateAnchorsViewPositions(){const e=Object.keys(this._widgets);for(const t of e)this._widgets[t].updateAnchorViewPosition()}addWidget(e){const t=new Kke(this._context,this._viewDomNode,e);this._widgets[t.id]=t,t.allowEditorOverflow?this.overflowingContentWidgetsDomNode.appendChild(t.domNode):this.domNode.appendChild(t.domNode),this.setShouldRender()}setWidgetPosition(e,t,i,n,s){this._widgets[e.getId()].setPosition(t,i,n,s),this.setShouldRender()}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const i=this._widgets[t];delete this._widgets[t];const n=i.domNode.domNode;n.parentNode.removeChild(n),n.removeAttribute("monaco-visible-content-widget"),this.setShouldRender()}}shouldSuppressMouseDownOnWidget(e){return this._widgets.hasOwnProperty(e)?this._widgets[e].suppressMouseDown:!1}onBeforeRender(e){const t=Object.keys(this._widgets);for(const i of t)this._widgets[i].onBeforeRender(e)}prepareRender(e){const t=Object.keys(this._widgets);for(const i of t)this._widgets[i].prepareRender(e)}render(e){const t=Object.keys(this._widgets);for(const i of t)this._widgets[i].render(e)}}class Kke{constructor(e,t,i){this._primaryAnchor=new mS(null,null),this._secondaryAnchor=new mS(null,null),this._context=e,this._viewDomNode=t,this._actual=i,this.domNode=ki(this._actual.getDomNode()),this.id=this._actual.getId(),this.allowEditorOverflow=this._actual.allowEditorOverflow||!1,this.suppressMouseDown=this._actual.suppressMouseDown||!1;const n=this._context.configuration.options,s=n.get(145);this._fixedOverflowWidgets=n.get(42),this._contentWidth=s.contentWidth,this._contentLeft=s.contentLeft,this._lineHeight=n.get(67),this._affinity=null,this._preference=[],this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1,this._maxWidth=this._getMaxWidth(),this._isVisible=!1,this._renderData=null,this.domNode.setPosition(this._fixedOverflowWidgets&&this.allowEditorOverflow?"fixed":"absolute"),this.domNode.setDisplay("none"),this.domNode.setVisibility("hidden"),this.domNode.setAttribute("widgetId",this.id),this.domNode.setMaxWidth(this._maxWidth)}onConfigurationChanged(e){const t=this._context.configuration.options;if(this._lineHeight=t.get(67),e.hasChanged(145)){const i=t.get(145);this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,this._maxWidth=this._getMaxWidth()}}updateAnchorViewPosition(){this._setPosition(this._affinity,this._primaryAnchor.modelPosition,this._secondaryAnchor.modelPosition)}_setPosition(e,t,i){this._affinity=e,this._primaryAnchor=n(t,this._context.viewModel,this._affinity),this._secondaryAnchor=n(i,this._context.viewModel,this._affinity);function n(s,r,a){if(!s)return new mS(null,null);const l=r.model.validatePosition(s);if(r.coordinatesConverter.modelPositionIsVisible(l)){const c=r.coordinatesConverter.convertModelPositionToViewPosition(l,a??void 0);return new mS(s,c)}return new mS(s,null)}}_getMaxWidth(){const e=this.domNode.domNode.ownerDocument,t=e.defaultView;return this.allowEditorOverflow?(t==null?void 0:t.innerWidth)||e.documentElement.offsetWidth||e.body.offsetWidth:this._contentWidth}setPosition(e,t,i,n){this._setPosition(n,e,t),this._preference=i,this._primaryAnchor.viewPosition&&this._preference&&this._preference.length>0?this.domNode.setDisplay("block"):this.domNode.setDisplay("none"),this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1}_layoutBoxInViewport(e,t,i,n){const s=e.top,r=s,a=e.top+e.height,l=n.viewportHeight-a,c=s-i,u=r>=i,f=a,g=l>=i;let p=e.left;return p+t>n.scrollLeft+n.viewportWidth&&(p=n.scrollLeft+n.viewportWidth-t),p<n.scrollLeft&&(p=n.scrollLeft),{fitsAbove:u,aboveTop:c,fitsBelow:g,belowTop:f,left:p}}_layoutHorizontalSegmentInPage(e,t,i,n){var s;const l=Math.max(15,t.left-n),c=Math.min(t.left+t.width+n,e.width-15),f=this._viewDomNode.domNode.ownerDocument.defaultView;let g=t.left+i-((s=f==null?void 0:f.scrollX)!==null&&s!==void 0?s:0);if(g+n>c){const p=g-(c-n);g-=p,i-=p}if(g<l){const p=g-l;g-=p,i-=p}return[i,g]}_layoutBoxInPage(e,t,i,n){var s,r;const a=e.top-i,l=e.top+e.height,c=ws(this._viewDomNode.domNode),u=this._viewDomNode.domNode.ownerDocument,f=u.defaultView,g=c.top+a-((s=f==null?void 0:f.scrollY)!==null&&s!==void 0?s:0),p=c.top+l-((r=f==null?void 0:f.scrollY)!==null&&r!==void 0?r:0),_=um(u.body),[b,y]=this._layoutHorizontalSegmentInPage(_,c,e.left-n.scrollLeft+this._contentLeft,t),S=22,L=22,x=g>=S,D=p+i<=_.height-L;return this._fixedOverflowWidgets?{fitsAbove:x,aboveTop:Math.max(g,S),fitsBelow:D,belowTop:p,left:y}:{fitsAbove:x,aboveTop:a,fitsBelow:D,belowTop:l,left:b}}_prepareRenderWidgetAtExactPositionOverflowing(e){return new _S(e.top,e.left+this._contentLeft)}_getAnchorsCoordinates(e){var t,i;const n=a(this._primaryAnchor.viewPosition,this._affinity,this._lineHeight),s=((t=this._secondaryAnchor.viewPosition)===null||t===void 0?void 0:t.lineNumber)===((i=this._primaryAnchor.viewPosition)===null||i===void 0?void 0:i.lineNumber)?this._secondaryAnchor.viewPosition:null,r=a(s,this._affinity,this._lineHeight);return{primary:n,secondary:r};function a(l,c,u){if(!l)return null;const f=e.visibleRangeForPosition(l);if(!f)return null;const g=l.column===1&&c===3?0:f.left,p=e.getVerticalOffsetForLineNumber(l.lineNumber)-e.scrollTop;return new iQ(p,g,u)}}_reduceAnchorCoordinates(e,t,i){if(!t)return e;const n=this._context.configuration.options.get(50);let s=t.left;return s<e.left?s=Math.max(s,e.left-i+n.typicalFullwidthCharacterWidth):s=Math.min(s,e.left+i-n.typicalFullwidthCharacterWidth),new iQ(e.top,s,e.height)}_prepareRenderWidget(e){if(!this._preference||this._preference.length===0)return null;const{primary:t,secondary:i}=this._getAnchorsCoordinates(e);if(!t)return null;if(this._cachedDomNodeOffsetWidth===-1||this._cachedDomNodeOffsetHeight===-1){let r=null;if(typeof this._actual.beforeRender=="function"&&(r=C3(this._actual.beforeRender,this._actual)),r)this._cachedDomNodeOffsetWidth=r.width,this._cachedDomNodeOffsetHeight=r.height;else{const l=this.domNode.domNode.getBoundingClientRect();this._cachedDomNodeOffsetWidth=Math.round(l.width),this._cachedDomNodeOffsetHeight=Math.round(l.height)}}const n=this._reduceAnchorCoordinates(t,i,this._cachedDomNodeOffsetWidth);let s;this.allowEditorOverflow?s=this._layoutBoxInPage(n,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,e):s=this._layoutBoxInViewport(n,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,e);for(let r=1;r<=2;r++)for(const a of this._preference)if(a===1){if(!s)return null;if(r===2||s.fitsAbove)return{coordinate:new _S(s.aboveTop,s.left),position:1}}else if(a===2){if(!s)return null;if(r===2||s.fitsBelow)return{coordinate:new _S(s.belowTop,s.left),position:2}}else return this.allowEditorOverflow?{coordinate:this._prepareRenderWidgetAtExactPositionOverflowing(new _S(n.top,n.left)),position:0}:{coordinate:new _S(n.top,n.left),position:0};return null}onBeforeRender(e){!this._primaryAnchor.viewPosition||!this._preference||this._primaryAnchor.viewPosition.lineNumber<e.startLineNumber||this._primaryAnchor.viewPosition.lineNumber>e.endLineNumber||this.domNode.setMaxWidth(this._maxWidth)}prepareRender(e){this._renderData=this._prepareRenderWidget(e)}render(e){if(!this._renderData){this._isVisible&&(this.domNode.removeAttribute("monaco-visible-content-widget"),this._isVisible=!1,this.domNode.setVisibility("hidden")),typeof this._actual.afterRender=="function"&&C3(this._actual.afterRender,this._actual,null);return}this.allowEditorOverflow?(this.domNode.setTop(this._renderData.coordinate.top),this.domNode.setLeft(this._renderData.coordinate.left)):(this.domNode.setTop(this._renderData.coordinate.top+e.scrollTop-e.bigNumbersDelta),this.domNode.setLeft(this._renderData.coordinate.left)),this._isVisible||(this.domNode.setVisibility("inherit"),this.domNode.setAttribute("monaco-visible-content-widget","true"),this._isVisible=!0),typeof this._actual.afterRender=="function"&&C3(this._actual.afterRender,this._actual,this._renderData.position)}}class mS{constructor(e,t){this.modelPosition=e,this.viewPosition=t}}class _S{constructor(e,t){this.top=e,this.left=t,this._coordinateBrand=void 0}}class iQ{constructor(e,t,i){this.top=e,this.left=t,this.height=i,this._anchorCoordinateBrand=void 0}}function C3(o,e,...t){try{return o.call(e,...t)}catch{return null}}class hse extends cb{constructor(e){super(),this._context=e;const t=this._context.configuration.options,i=t.get(145);this._renderLineHighlight=t.get(96),this._renderLineHighlightOnlyWhenFocus=t.get(97),this._wordWrap=i.isViewportWrapping,this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,this._selectionIsEmpty=!0,this._focused=!1,this._cursorLineNumbers=[1],this._selections=[new Xe(1,1,1,1)],this._renderData=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}_readFromSelections(){let e=!1;const t=new Set;for(const s of this._selections)t.add(s.positionLineNumber);const i=Array.from(t);i.sort((s,r)=>s-r),zn(this._cursorLineNumbers,i)||(this._cursorLineNumbers=i,e=!0);const n=this._selections.every(s=>s.isEmpty());return this._selectionIsEmpty!==n&&(this._selectionIsEmpty=n,e=!0),e}onThemeChanged(e){return this._readFromSelections()}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(145);return this._renderLineHighlight=t.get(96),this._renderLineHighlightOnlyWhenFocus=t.get(97),this._wordWrap=i.isViewportWrapping,this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,!0}onCursorStateChanged(e){return this._selections=e.selections,this._readFromSelections()}onFlushed(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollWidthChanged||e.scrollTopChanged}onZonesChanged(e){return!0}onFocusChanged(e){return this._renderLineHighlightOnlyWhenFocus?(this._focused=e.isFocused,!0):!1}prepareRender(e){if(!this._shouldRenderThis()){this._renderData=null;return}const t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,n=[];for(let r=t;r<=i;r++){const a=r-t;n[a]=""}if(this._wordWrap){const r=this._renderOne(e,!1);for(const a of this._cursorLineNumbers){const l=this._context.viewModel.coordinatesConverter,c=l.convertViewPositionToModelPosition(new Z(a,1)).lineNumber,u=l.convertModelPositionToViewPosition(new Z(c,1)).lineNumber,f=l.convertModelPositionToViewPosition(new Z(c,this._context.viewModel.model.getLineMaxColumn(c))).lineNumber,g=Math.max(u,t),p=Math.min(f,i);for(let _=g;_<=p;_++){const b=_-t;n[b]=r}}}const s=this._renderOne(e,!0);for(const r of this._cursorLineNumbers){if(r<t||r>i)continue;const a=r-t;n[a]=s}this._renderData=n}render(e,t){if(!this._renderData)return"";const i=t-e;return i>=this._renderData.length?"":this._renderData[i]}_shouldRenderInMargin(){return(this._renderLineHighlight==="gutter"||this._renderLineHighlight==="all")&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}_shouldRenderInContent(){return(this._renderLineHighlight==="line"||this._renderLineHighlight==="all")&&this._selectionIsEmpty&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}}class qke extends hse{_renderOne(e,t){return`<div class="${"current-line"+(this._shouldRenderInMargin()?" current-line-both":"")+(t?" current-line-exact":"")}" style="width:${Math.max(e.scrollWidth,this._contentWidth)}px;"></div>`}_shouldRenderThis(){return this._shouldRenderInContent()}_shouldRenderOther(){return this._shouldRenderInMargin()}}class Gke extends hse{_renderOne(e,t){return`<div class="${"current-line"+(this._shouldRenderInMargin()?" current-line-margin":"")+(this._shouldRenderOther()?" current-line-margin-both":"")+(this._shouldRenderInMargin()&&t?" current-line-exact-margin":"")}" style="width:${this._contentLeft}px"></div>`}_shouldRenderThis(){return!0}_shouldRenderOther(){return this._shouldRenderInContent()}}_c((o,e)=>{const t=o.getColor(Zne);if(t&&(e.addRule(`.monaco-editor .view-overlays .current-line { background-color: ${t}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { background-color: ${t}; border: none; }`)),!t||t.isTransparent()||o.defines(ZZ)){const i=o.getColor(ZZ);i&&(e.addRule(`.monaco-editor .view-overlays .current-line-exact { border: 2px solid ${i}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-exact-margin { border: 2px solid ${i}; }`),Vd(o.type)&&(e.addRule(".monaco-editor .view-overlays .current-line-exact { border-width: 1px; }"),e.addRule(".monaco-editor .margin-view-overlays .current-line-exact-margin { border-width: 1px; }")))}});class Yke extends cb{constructor(e){super(),this._context=e;const t=this._context.configuration.options;this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}prepareRender(e){const t=e.getDecorationsInViewport();let i=[],n=0;for(let l=0,c=t.length;l<c;l++){const u=t[l];u.options.className&&(i[n++]=u)}i=i.sort((l,c)=>{if(l.options.zIndex<c.options.zIndex)return-1;if(l.options.zIndex>c.options.zIndex)return 1;const u=l.options.className,f=c.options.className;return u<f?-1:u>f?1:A.compareRangesUsingStarts(l.range,c.range)});const s=e.visibleRange.startLineNumber,r=e.visibleRange.endLineNumber,a=[];for(let l=s;l<=r;l++){const c=l-s;a[c]=""}this._renderWholeLineDecorations(e,i,a),this._renderNormalDecorations(e,i,a),this._renderResult=a}_renderWholeLineDecorations(e,t,i){const n=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber;for(let r=0,a=t.length;r<a;r++){const l=t[r];if(!l.options.isWholeLine)continue;const c='<div class="cdr '+l.options.className+'" style="left:0;width:100%;"></div>',u=Math.max(l.range.startLineNumber,n),f=Math.min(l.range.endLineNumber,s);for(let g=u;g<=f;g++){const p=g-n;i[p]+=c}}}_renderNormalDecorations(e,t,i){var n;const s=e.visibleRange.startLineNumber;let r=null,a=!1,l=null,c=!1;for(let u=0,f=t.length;u<f;u++){const g=t[u];if(g.options.isWholeLine)continue;const p=g.options.className,_=!!g.options.showIfCollapsed;let b=g.range;if(_&&b.endColumn===1&&b.endLineNumber!==b.startLineNumber&&(b=new A(b.startLineNumber,b.startColumn,b.endLineNumber-1,this._context.viewModel.getLineMaxColumn(b.endLineNumber-1))),r===p&&a===_&&A.areIntersectingOrTouching(l,b)){l=A.plusRange(l,b);continue}r!==null&&this._renderNormalDecoration(e,l,r,c,a,s,i),r=p,a=_,l=b,c=(n=g.options.shouldFillLineOnLineBreak)!==null&&n!==void 0?n:!1}r!==null&&this._renderNormalDecoration(e,l,r,c,a,s,i)}_renderNormalDecoration(e,t,i,n,s,r,a){const l=e.linesVisibleRangesForRange(t,i==="findMatch");if(l)for(let c=0,u=l.length;c<u;c++){const f=l[c];if(f.outsideRenderedLine)continue;const g=f.lineNumber-r;if(s&&f.ranges.length===1){const p=f.ranges[0];if(p.width<this._typicalHalfwidthCharacterWidth){const _=Math.round(p.left+p.width/2),b=Math.max(0,Math.round(_-this._typicalHalfwidthCharacterWidth/2));f.ranges[0]=new VA(b,this._typicalHalfwidthCharacterWidth)}}for(let p=0,_=f.ranges.length;p<_;p++){const b=n&&f.continuesOnNextLine&&_===1,y=f.ranges[p],S='<div class="cdr '+i+'" style="left:'+String(y.left)+"px;width:"+(b?"100%;":String(y.width)+"px;")+'"></div>';a[g]+=S}}}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}class Zke extends Ga{constructor(e,t,i,n){super(e);const s=this._context.configuration.options,r=s.get(103),a=s.get(75),l=s.get(40),c=s.get(106),u={listenOnDomNode:i.domNode,className:"editor-scrollable "+I9(e.theme.type),useShadows:!1,lazyRender:!0,vertical:r.vertical,horizontal:r.horizontal,verticalHasArrows:r.verticalHasArrows,horizontalHasArrows:r.horizontalHasArrows,verticalScrollbarSize:r.verticalScrollbarSize,verticalSliderSize:r.verticalSliderSize,horizontalScrollbarSize:r.horizontalScrollbarSize,horizontalSliderSize:r.horizontalSliderSize,handleMouseWheel:r.handleMouseWheel,alwaysConsumeMouseWheel:r.alwaysConsumeMouseWheel,arrowSize:r.arrowSize,mouseWheelScrollSensitivity:a,fastScrollSensitivity:l,scrollPredominantAxis:c,scrollByPage:r.scrollByPage};this.scrollbar=this._register(new HA(t.domNode,u,this._context.viewLayout.getScrollable())),qd.write(this.scrollbar.getDomNode(),6),this.scrollbarDomNode=ki(this.scrollbar.getDomNode()),this.scrollbarDomNode.setPosition("absolute"),this._setLayout();const f=(g,p,_)=>{const b={};{const y=g.scrollTop;y&&(b.scrollTop=this._context.viewLayout.getCurrentScrollTop()+y,g.scrollTop=0)}if(_){const y=g.scrollLeft;y&&(b.scrollLeft=this._context.viewLayout.getCurrentScrollLeft()+y,g.scrollLeft=0)}this._context.viewModel.viewLayout.setScrollPosition(b,1)};this._register(oe(i.domNode,"scroll",g=>f(i.domNode,!0,!0))),this._register(oe(t.domNode,"scroll",g=>f(t.domNode,!0,!1))),this._register(oe(n.domNode,"scroll",g=>f(n.domNode,!0,!1))),this._register(oe(this.scrollbarDomNode.domNode,"scroll",g=>f(this.scrollbarDomNode.domNode,!0,!1)))}dispose(){super.dispose()}_setLayout(){const e=this._context.configuration.options,t=e.get(145);this.scrollbarDomNode.setLeft(t.contentLeft),e.get(73).side==="right"?this.scrollbarDomNode.setWidth(t.contentWidth+t.minimap.minimapWidth):this.scrollbarDomNode.setWidth(t.contentWidth),this.scrollbarDomNode.setHeight(t.height)}getOverviewRulerLayoutInfo(){return this.scrollbar.getOverviewRulerLayoutInfo()}getDomNode(){return this.scrollbarDomNode}delegateVerticalScrollbarPointerDown(e){this.scrollbar.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){this.scrollbar.delegateScrollFromMouseWheelEvent(e)}onConfigurationChanged(e){if(e.hasChanged(103)||e.hasChanged(75)||e.hasChanged(40)){const t=this._context.configuration.options,i=t.get(103),n=t.get(75),s=t.get(40),r=t.get(106),a={vertical:i.vertical,horizontal:i.horizontal,verticalScrollbarSize:i.verticalScrollbarSize,horizontalScrollbarSize:i.horizontalScrollbarSize,scrollByPage:i.scrollByPage,handleMouseWheel:i.handleMouseWheel,mouseWheelScrollSensitivity:n,fastScrollSensitivity:s,scrollPredominantAxis:r};this.scrollbar.updateOptions(a)}return e.hasChanged(145)&&this._setLayout(),!0}onScrollChanged(e){return!0}onThemeChanged(e){return this.scrollbar.updateClassName("editor-scrollable "+I9(this._context.theme.type)),!0}prepareRender(e){}render(e){this.scrollbar.renderNow()}}class R9{constructor(e,t,i,n,s){this.startLineNumber=e,this.endLineNumber=t,this.className=i,this.tooltip=n,this._decorationToRenderBrand=void 0,this.zIndex=s??0}}class Qke{constructor(e,t,i){this.className=e,this.zIndex=t,this.tooltip=i}}class Xke{constructor(){this.decorations=[]}add(e){this.decorations.push(e)}getDecorations(){return this.decorations}}class fse extends cb{_render(e,t,i){const n=[];for(let a=e;a<=t;a++){const l=a-e;n[l]=new Xke}if(i.length===0)return n;i.sort((a,l)=>a.className===l.className?a.startLineNumber===l.startLineNumber?a.endLineNumber-l.endLineNumber:a.startLineNumber-l.startLineNumber:a.className<l.className?-1:1);let s=null,r=0;for(let a=0,l=i.length;a<l;a++){const c=i[a],u=c.className,f=c.zIndex;let g=Math.max(c.startLineNumber,e)-e;const p=Math.min(c.endLineNumber,t)-e;s===u?(g=Math.max(r+1,g),r=Math.max(r,p)):(s=u,r=p);for(let _=g;_<=r;_++)n[_].add(new Qke(u,f,c.tooltip))}return n}}class Jke extends Ga{constructor(e){super(e),this._widgets={},this._context=e;const t=this._context.configuration.options,i=t.get(145);this.domNode=ki(document.createElement("div")),this.domNode.setClassName("glyph-margin-widgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this._lineHeight=t.get(67),this._glyphMargin=t.get(57),this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,this._glyphMarginDecorationLaneCount=i.glyphMarginDecorationLaneCount,this._managedDomNodes=[],this._decorationGlyphsToRender=[]}dispose(){this._managedDomNodes=[],this._decorationGlyphsToRender=[],this._widgets={},super.dispose()}getWidgets(){return Object.values(this._widgets)}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(145);return this._lineHeight=t.get(67),this._glyphMargin=t.get(57),this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,this._glyphMarginDecorationLaneCount=i.glyphMarginDecorationLaneCount,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}addWidget(e){const t=ki(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:e.getPosition(),domNode:t,renderInfo:null},t.setPosition("absolute"),t.setDisplay("none"),t.setAttribute("widgetId",e.getId()),this.domNode.appendChild(t),this.setShouldRender()}setWidgetPosition(e,t){const i=this._widgets[e.getId()];return i.preference.lane===t.lane&&i.preference.zIndex===t.zIndex&&A.equalsRange(i.preference.range,t.range)?!1:(i.preference=t,this.setShouldRender(),!0)}removeWidget(e){var t;const i=e.getId();if(this._widgets[i]){const s=this._widgets[i].domNode.domNode;delete this._widgets[i],(t=s.parentNode)===null||t===void 0||t.removeChild(s),this.setShouldRender()}}_collectDecorationBasedGlyphRenderRequest(e,t){var i,n,s;const r=e.visibleRange.startLineNumber,a=e.visibleRange.endLineNumber,l=e.getDecorationsInViewport();for(const c of l){const u=c.options.glyphMarginClassName;if(!u)continue;const f=Math.max(c.range.startLineNumber,r),g=Math.min(c.range.endLineNumber,a),p=(n=(i=c.options.glyphMargin)===null||i===void 0?void 0:i.position)!==null&&n!==void 0?n:hh.Center,_=(s=c.options.zIndex)!==null&&s!==void 0?s:0;for(let b=f;b<=g;b++){const y=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new Z(b,0)),S=this._context.viewModel.glyphLanes.getLanesAtLine(y.lineNumber).indexOf(p);t.push(new eEe(b,S,_,u))}}}_collectWidgetBasedGlyphRenderRequest(e,t){const i=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber;for(const s of Object.values(this._widgets)){const r=s.preference.range,{startLineNumber:a,endLineNumber:l}=this._context.viewModel.coordinatesConverter.convertModelRangeToViewRange(A.lift(r));if(!a||!l||l<i||a>n)continue;const c=Math.max(a,i),u=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new Z(c,0)),f=this._context.viewModel.glyphLanes.getLanesAtLine(u.lineNumber).indexOf(s.preference.lane);t.push(new tEe(c,f,s.preference.zIndex,s))}}_collectSortedGlyphRenderRequests(e){const t=[];return this._collectDecorationBasedGlyphRenderRequest(e,t),this._collectWidgetBasedGlyphRenderRequest(e,t),t.sort((i,n)=>i.lineNumber===n.lineNumber?i.laneIndex===n.laneIndex?i.zIndex===n.zIndex?n.type===i.type?i.type===0&&n.type===0?i.className<n.className?-1:1:0:n.type-i.type:n.zIndex-i.zIndex:i.laneIndex-n.laneIndex:i.lineNumber-n.lineNumber),t}prepareRender(e){if(!this._glyphMargin){this._decorationGlyphsToRender=[];return}for(const n of Object.values(this._widgets))n.renderInfo=null;const t=new tg(this._collectSortedGlyphRenderRequests(e)),i=[];for(;t.length>0;){const n=t.peek();if(!n)break;const s=t.takeWhile(a=>a.lineNumber===n.lineNumber&&a.laneIndex===n.laneIndex);if(!s||s.length===0)break;const r=s[0];if(r.type===0){const a=[];for(const l of s){if(l.zIndex!==r.zIndex||l.type!==r.type)break;(a.length===0||a[a.length-1]!==l.className)&&a.push(l.className)}i.push(r.accept(a.join(" ")))}else r.widget.renderInfo={lineNumber:r.lineNumber,laneIndex:r.laneIndex}}this._decorationGlyphsToRender=i}render(e){if(!this._glyphMargin){for(const i of Object.values(this._widgets))i.domNode.setDisplay("none");for(;this._managedDomNodes.length>0;){const i=this._managedDomNodes.pop();i==null||i.domNode.remove()}return}const t=Math.round(this._glyphMarginWidth/this._glyphMarginDecorationLaneCount);for(const i of Object.values(this._widgets))if(!i.renderInfo)i.domNode.setDisplay("none");else{const n=e.viewportData.relativeVerticalOffset[i.renderInfo.lineNumber-e.viewportData.startLineNumber],s=this._glyphMarginLeft+i.renderInfo.laneIndex*this._lineHeight;i.domNode.setDisplay("block"),i.domNode.setTop(n),i.domNode.setLeft(s),i.domNode.setWidth(t),i.domNode.setHeight(this._lineHeight)}for(let i=0;i<this._decorationGlyphsToRender.length;i++){const n=this._decorationGlyphsToRender[i],s=e.viewportData.relativeVerticalOffset[n.lineNumber-e.viewportData.startLineNumber],r=this._glyphMarginLeft+n.laneIndex*this._lineHeight;let a;i<this._managedDomNodes.length?a=this._managedDomNodes[i]:(a=ki(document.createElement("div")),this._managedDomNodes.push(a),this.domNode.appendChild(a)),a.setClassName("cgmr codicon "+n.combinedClassName),a.setPosition("absolute"),a.setTop(s),a.setLeft(r),a.setWidth(t),a.setHeight(this._lineHeight)}for(;this._managedDomNodes.length>this._decorationGlyphsToRender.length;){const i=this._managedDomNodes.pop();i==null||i.domNode.remove()}}}class eEe{constructor(e,t,i,n){this.lineNumber=e,this.laneIndex=t,this.zIndex=i,this.className=n,this.type=0}accept(e){return new iEe(this.lineNumber,this.laneIndex,e)}}class tEe{constructor(e,t,i,n){this.lineNumber=e,this.laneIndex=t,this.zIndex=i,this.widget=n,this.type=1}}class iEe{constructor(e,t,i){this.lineNumber=e,this.laneIndex=t,this.combinedClassName=i}}class gse extends J{constructor(){super(...arguments),this._isDisposed=!1}dispose(){super.dispose(),this._isDisposed=!0}assertNotDisposed(){if(this._isDisposed)throw new Error("TextModelPart is disposed!")}}function KA(o,e){let t=0,i=0;const n=o.length;for(;i<n;){const s=o.charCodeAt(i);if(s===32)t++;else if(s===9)t=t-t%e+e;else break;i++}return i===n?-1:t}var mv;(function(o){o[o.Disabled=0]="Disabled",o[o.EnabledForActive=1]="EnabledForActive",o[o.Enabled=2]="Enabled"})(mv||(mv={}));class ov{constructor(e,t,i,n,s,r){if(this.visibleColumn=e,this.column=t,this.className=i,this.horizontalLine=n,this.forWrappedLinesAfterColumn=s,this.forWrappedLinesBeforeOrAtColumn=r,e!==-1==(t!==-1))throw new Error}}class bL{constructor(e,t){this.top=e,this.endColumn=t}}class nEe extends gse{constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t}getLanguageConfiguration(e){return this.languageConfigurationService.getLanguageConfiguration(e)}_computeIndentLevel(e){return KA(this.textModel.getLineContent(e+1),this.textModel.getOptions().tabSize)}getActiveIndentGuide(e,t,i){this.assertNotDisposed();const n=this.textModel.getLineCount();if(e<1||e>n)throw new pn("Illegal value for lineNumber");const s=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,r=!!(s&&s.offSide);let a=-2,l=-1,c=-2,u=-1;const f=M=>{if(a!==-1&&(a===-2||a>M-1)){a=-1,l=-1;for(let F=M-2;F>=0;F--){const H=this._computeIndentLevel(F);if(H>=0){a=F,l=H;break}}}if(c===-2){c=-1,u=-1;for(let F=M;F<n;F++){const H=this._computeIndentLevel(F);if(H>=0){c=F,u=H;break}}}};let g=-2,p=-1,_=-2,b=-1;const y=M=>{if(g===-2){g=-1,p=-1;for(let F=M-2;F>=0;F--){const H=this._computeIndentLevel(F);if(H>=0){g=F,p=H;break}}}if(_!==-1&&(_===-2||_<M-1)){_=-1,b=-1;for(let F=M;F<n;F++){const H=this._computeIndentLevel(F);if(H>=0){_=F,b=H;break}}}};let S=0,L=!0,x=0,D=!0,E=0,N=0;for(let M=0;L||D;M++){const F=e-M,H=e+M;M>1&&(F<1||F<t)&&(L=!1),M>1&&(H>n||H>i)&&(D=!1),M>5e4&&(L=!1,D=!1);let Q=-1;if(L&&F>=1){const j=this._computeIndentLevel(F-1);j>=0?(c=F-1,u=j,Q=Math.ceil(j/this.textModel.getOptions().indentSize)):(f(F),Q=this._getIndentLevelForWhitespaceLine(r,l,u))}let K=-1;if(D&&H<=n){const j=this._computeIndentLevel(H-1);j>=0?(g=H-1,p=j,K=Math.ceil(j/this.textModel.getOptions().indentSize)):(y(H),K=this._getIndentLevelForWhitespaceLine(r,p,b))}if(M===0){N=Q;continue}if(M===1){if(H<=n&&K>=0&&N+1===K){L=!1,S=H,x=H,E=K;continue}if(F>=1&&Q>=0&&Q-1===N){D=!1,S=F,x=F,E=Q;continue}if(S=e,x=e,E=N,E===0)return{startLineNumber:S,endLineNumber:x,indent:E}}L&&(Q>=E?S=F:L=!1),D&&(K>=E?x=H:D=!1)}return{startLineNumber:S,endLineNumber:x,indent:E}}getLinesBracketGuides(e,t,i,n){var s;const r=[];for(let g=e;g<=t;g++)r.push([]);const a=!0,l=this.textModel.bracketPairs.getBracketPairsInRangeWithMinIndentation(new A(e,1,t,this.textModel.getLineMaxColumn(t))).toArray();let c;if(i&&l.length>0){const g=(e<=i.lineNumber&&i.lineNumber<=t?l:this.textModel.bracketPairs.getBracketPairsInRange(A.fromPositions(i)).toArray()).filter(p=>A.strictContainsPosition(p.range,i));c=(s=ax(g,p=>a))===null||s===void 0?void 0:s.range}const u=this.textModel.getOptions().bracketPairColorizationOptions.independentColorPoolPerBracketType,f=new pse;for(const g of l){if(!g.closingBracketRange)continue;const p=c&&g.range.equalsRange(c);if(!p&&!n.includeInactive)continue;const _=f.getInlineClassName(g.nestingLevel,g.nestingLevelOfEqualBracketType,u)+(n.highlightActive&&p?" "+f.activeClassName:""),b=g.openingBracketRange.getStartPosition(),y=g.closingBracketRange.getStartPosition(),S=n.horizontalGuides===mv.Enabled||n.horizontalGuides===mv.EnabledForActive&&p;if(g.range.startLineNumber===g.range.endLineNumber){S&&r[g.range.startLineNumber-e].push(new ov(-1,g.openingBracketRange.getEndPosition().column,_,new bL(!1,y.column),-1,-1));continue}const L=this.getVisibleColumnFromPosition(y),x=this.getVisibleColumnFromPosition(g.openingBracketRange.getStartPosition()),D=Math.min(x,L,g.minVisibleColumnIndentation+1);let E=!1;gr(this.textModel.getLineContent(g.closingBracketRange.startLineNumber))<g.closingBracketRange.startColumn-1&&(E=!0);const F=Math.max(b.lineNumber,e),H=Math.min(y.lineNumber,t),Q=E?1:0;for(let K=F;K<H+Q;K++)r[K-e].push(new ov(D,-1,_,null,K===b.lineNumber?b.column:-1,K===y.lineNumber?y.column:-1));S&&(b.lineNumber>=e&&x>D&&r[b.lineNumber-e].push(new ov(D,-1,_,new bL(!1,b.column),-1,-1)),y.lineNumber<=t&&L>D&&r[y.lineNumber-e].push(new ov(D,-1,_,new bL(!E,y.column),-1,-1)))}for(const g of r)g.sort((p,_)=>p.visibleColumn-_.visibleColumn);return r}getVisibleColumnFromPosition(e){return Vs.visibleColumnFromColumn(this.textModel.getLineContent(e.lineNumber),e.column,this.textModel.getOptions().tabSize)+1}getLinesIndentGuides(e,t){this.assertNotDisposed();const i=this.textModel.getLineCount();if(e<1||e>i)throw new Error("Illegal value for startLineNumber");if(t<1||t>i)throw new Error("Illegal value for endLineNumber");const n=this.textModel.getOptions(),s=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,r=!!(s&&s.offSide),a=new Array(t-e+1);let l=-2,c=-1,u=-2,f=-1;for(let g=e;g<=t;g++){const p=g-e,_=this._computeIndentLevel(g-1);if(_>=0){l=g-1,c=_,a[p]=Math.ceil(_/n.indentSize);continue}if(l===-2){l=-1,c=-1;for(let b=g-2;b>=0;b--){const y=this._computeIndentLevel(b);if(y>=0){l=b,c=y;break}}}if(u!==-1&&(u===-2||u<g-1)){u=-1,f=-1;for(let b=g;b<i;b++){const y=this._computeIndentLevel(b);if(y>=0){u=b,f=y;break}}}a[p]=this._getIndentLevelForWhitespaceLine(r,c,f)}return a}_getIndentLevelForWhitespaceLine(e,t,i){const n=this.textModel.getOptions();return t===-1||i===-1?0:t<i?1+Math.floor(t/n.indentSize):t===i||e?Math.ceil(i/n.indentSize):1+Math.floor(i/n.indentSize)}}class pse{constructor(){this.activeClassName="indent-active"}getInlineClassName(e,t,i){return this.getInlineClassNameOfLevel(i?t:e)}getInlineClassNameOfLevel(e){return`bracket-indent-guide lvl-${e%30}`}}class sEe extends cb{constructor(e){super(),this._context=e,this._primaryPosition=null;const t=this._context.configuration.options,i=t.get(146),n=t.get(50);this._spaceWidth=n.spaceWidth,this._maxIndentLeft=i.wrappingColumn===-1?-1:i.wrappingColumn*n.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(16),this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(146),n=t.get(50);return this._spaceWidth=n.spaceWidth,this._maxIndentLeft=i.wrappingColumn===-1?-1:i.wrappingColumn*n.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(16),!0}onCursorStateChanged(e){var t;const n=e.selections[0].getPosition();return!((t=this._primaryPosition)===null||t===void 0)&&t.equals(n)?!1:(this._primaryPosition=n,!0)}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}onLanguageConfigurationChanged(e){return!0}prepareRender(e){var t,i,n,s;if(!this._bracketPairGuideOptions.indentation&&this._bracketPairGuideOptions.bracketPairs===!1){this._renderResult=null;return}const r=e.visibleRange.startLineNumber,a=e.visibleRange.endLineNumber,l=e.scrollWidth,c=this._primaryPosition,u=this.getGuidesByLine(r,Math.min(a+1,this._context.viewModel.getLineCount()),c),f=[];for(let g=r;g<=a;g++){const p=g-r,_=u[p];let b="";const y=(i=(t=e.visibleRangeForPosition(new Z(g,1)))===null||t===void 0?void 0:t.left)!==null&&i!==void 0?i:0;for(const S of _){const L=S.column===-1?y+(S.visibleColumn-1)*this._spaceWidth:e.visibleRangeForPosition(new Z(g,S.column)).left;if(L>l||this._maxIndentLeft>0&&L>this._maxIndentLeft)break;const x=S.horizontalLine?S.horizontalLine.top?"horizontal-top":"horizontal-bottom":"vertical",D=S.horizontalLine?((s=(n=e.visibleRangeForPosition(new Z(g,S.horizontalLine.endColumn)))===null||n===void 0?void 0:n.left)!==null&&s!==void 0?s:L+this._spaceWidth)-L:this._spaceWidth;b+=`<div class="core-guide ${S.className} ${x}" style="left:${L}px;width:${D}px"></div>`}f[p]=b}this._renderResult=f}getGuidesByLine(e,t,i){const n=this._bracketPairGuideOptions.bracketPairs!==!1?this._context.viewModel.getBracketGuidesInRangeByLine(e,t,i,{highlightActive:this._bracketPairGuideOptions.highlightActiveBracketPair,horizontalGuides:this._bracketPairGuideOptions.bracketPairsHorizontal===!0?mv.Enabled:this._bracketPairGuideOptions.bracketPairsHorizontal==="active"?mv.EnabledForActive:mv.Disabled,includeInactive:this._bracketPairGuideOptions.bracketPairs===!0}):null,s=this._bracketPairGuideOptions.indentation?this._context.viewModel.getLinesIndentGuides(e,t):null;let r=0,a=0,l=0;if(this._bracketPairGuideOptions.highlightActiveIndentation!==!1&&i){const f=this._context.viewModel.getActiveIndentGuide(i.lineNumber,e,t);r=f.startLineNumber,a=f.endLineNumber,l=f.indent}const{indentSize:c}=this._context.viewModel.model.getOptions(),u=[];for(let f=e;f<=t;f++){const g=new Array;u.push(g);const p=n?n[f-e]:[],_=new tg(p),b=s?s[f-e]:0;for(let y=1;y<=b;y++){const S=(y-1)*c+1,L=(this._bracketPairGuideOptions.highlightActiveIndentation==="always"||p.length===0)&&r<=f&&f<=a&&y===l;g.push(..._.takeWhile(D=>D.visibleColumn<S)||[]);const x=_.peek();(!x||x.visibleColumn!==S||x.horizontalLine)&&g.push(new ov(S,-1,`core-guide-indent lvl-${(y-1)%30}`+(L?" indent-active":""),null,-1,-1))}g.push(..._.takeWhile(y=>!0)||[])}return u}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}function k0(o){if(!(o&&o.isTransparent()))return o}_c((o,e)=>{const t=[{bracketColor:ese,guideColor:lke,guideColorActive:gke},{bracketColor:tse,guideColor:cke,guideColorActive:pke},{bracketColor:ise,guideColor:dke,guideColorActive:mke},{bracketColor:nse,guideColor:uke,guideColorActive:_ke},{bracketColor:sse,guideColor:hke,guideColorActive:vke},{bracketColor:ose,guideColor:fke,guideColorActive:bke}],i=new pse,n=[{indentColor:qD,indentColorActive:GD},{indentColor:$De,indentColorActive:YDe},{indentColor:jDe,indentColorActive:ZDe},{indentColor:KDe,indentColorActive:QDe},{indentColor:qDe,indentColorActive:XDe},{indentColor:GDe,indentColorActive:JDe}],s=t.map(a=>{var l,c;const u=o.getColor(a.bracketColor),f=o.getColor(a.guideColor),g=o.getColor(a.guideColorActive),p=k0((l=k0(f))!==null&&l!==void 0?l:u==null?void 0:u.transparent(.3)),_=k0((c=k0(g))!==null&&c!==void 0?c:u);if(!(!p||!_))return{guideColor:p,guideColorActive:_}}).filter(sh),r=n.map(a=>{const l=o.getColor(a.indentColor),c=o.getColor(a.indentColorActive),u=k0(l),f=k0(c);if(!(!u||!f))return{indentColor:u,indentColorActive:f}}).filter(sh);if(s.length>0){for(let a=0;a<30;a++){const l=s[a%s.length];e.addRule(`.monaco-editor .${i.getInlineClassNameOfLevel(a).replace(/ /g,".")} { --guide-color: ${l.guideColor}; --guide-color-active: ${l.guideColorActive}; }`)}e.addRule(".monaco-editor .vertical { box-shadow: 1px 0 0 0 var(--guide-color) inset; }"),e.addRule(".monaco-editor .horizontal-top { border-top: 1px solid var(--guide-color); }"),e.addRule(".monaco-editor .horizontal-bottom { border-bottom: 1px solid var(--guide-color); }"),e.addRule(`.monaco-editor .vertical.${i.activeClassName} { box-shadow: 1px 0 0 0 var(--guide-color-active) inset; }`),e.addRule(`.monaco-editor .horizontal-top.${i.activeClassName} { border-top: 1px solid var(--guide-color-active); }`),e.addRule(`.monaco-editor .horizontal-bottom.${i.activeClassName} { border-bottom: 1px solid var(--guide-color-active); }`)}if(r.length>0){for(let a=0;a<30;a++){const l=r[a%r.length];e.addRule(`.monaco-editor .lines-content .core-guide-indent.lvl-${a} { --indent-color: ${l.indentColor}; --indent-color-active: ${l.indentColorActive}; }`)}e.addRule(".monaco-editor .lines-content .core-guide-indent { box-shadow: 1px 0 0 0 var(--indent-color) inset; }"),e.addRule(".monaco-editor .lines-content .core-guide-indent.indent-active { box-shadow: 1px 0 0 0 var(--indent-color-active) inset; }")}});class w3{get didDomLayout(){return this._didDomLayout}readClientRect(){if(!this._clientRectRead){this._clientRectRead=!0;const e=this._domNode.getBoundingClientRect();this.markDidDomLayout(),this._clientRectDeltaLeft=e.left,this._clientRectScale=e.width/this._domNode.offsetWidth}}get clientRectDeltaLeft(){return this._clientRectRead||this.readClientRect(),this._clientRectDeltaLeft}get clientRectScale(){return this._clientRectRead||this.readClientRect(),this._clientRectScale}constructor(e,t){this._domNode=e,this.endNode=t,this._didDomLayout=!1,this._clientRectDeltaLeft=0,this._clientRectScale=1,this._clientRectRead=!1}markDidDomLayout(){this._didDomLayout=!0}}class oEe{constructor(){this._currentVisibleRange=new A(1,1,1,1)}getCurrentVisibleRange(){return this._currentVisibleRange}setCurrentVisibleRange(e){this._currentVisibleRange=e}}class rEe{constructor(e,t,i,n,s,r,a){this.minimalReveal=e,this.lineNumber=t,this.startColumn=i,this.endColumn=n,this.startScrollTop=s,this.stopScrollTop=r,this.scrollType=a,this.type="range",this.minLineNumber=t,this.maxLineNumber=t}}class aEe{constructor(e,t,i,n,s){this.minimalReveal=e,this.selections=t,this.startScrollTop=i,this.stopScrollTop=n,this.scrollType=s,this.type="selections";let r=t[0].startLineNumber,a=t[0].endLineNumber;for(let l=1,c=t.length;l<c;l++){const u=t[l];r=Math.min(r,u.startLineNumber),a=Math.max(a,u.endLineNumber)}this.minLineNumber=r,this.maxLineNumber=a}}class qA extends Ga{constructor(e,t){super(e),this._linesContent=t,this._textRangeRestingSpot=document.createElement("div"),this._visibleLines=new dse(this),this.domNode=this._visibleLines.domNode;const i=this._context.configuration,n=this._context.configuration.options,s=n.get(50),r=n.get(146);this._lineHeight=n.get(67),this._typicalHalfwidthCharacterWidth=s.typicalHalfwidthCharacterWidth,this._isViewportWrapping=r.isViewportWrapping,this._revealHorizontalRightPadding=n.get(100),this._cursorSurroundingLines=n.get(29),this._cursorSurroundingLinesStyle=n.get(30),this._canUseLayerHinting=!n.get(32),this._viewLineOptions=new jZ(i,this._context.theme.type),qd.write(this.domNode,8),this.domNode.setClassName(`view-lines ${TC}`),vo(this.domNode,s),this._maxLineWidth=0,this._asyncUpdateLineWidths=new Ui(()=>{this._updateLineWidthsSlow()},200),this._asyncCheckMonospaceFontAssumptions=new Ui(()=>{this._checkMonospaceFontAssumptions()},2e3),this._lastRenderedData=new oEe,this._horizontalRevealRequest=null,this._stickyScrollEnabled=n.get(115).enabled,this._maxNumberStickyLines=n.get(115).maxLineCount}dispose(){this._asyncUpdateLineWidths.dispose(),this._asyncCheckMonospaceFontAssumptions.dispose(),super.dispose()}getDomNode(){return this.domNode}createVisibleLine(){return new Uu(this._viewLineOptions)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e),e.hasChanged(146)&&(this._maxLineWidth=0);const t=this._context.configuration.options,i=t.get(50),n=t.get(146);return this._lineHeight=t.get(67),this._typicalHalfwidthCharacterWidth=i.typicalHalfwidthCharacterWidth,this._isViewportWrapping=n.isViewportWrapping,this._revealHorizontalRightPadding=t.get(100),this._cursorSurroundingLines=t.get(29),this._cursorSurroundingLinesStyle=t.get(30),this._canUseLayerHinting=!t.get(32),this._stickyScrollEnabled=t.get(115).enabled,this._maxNumberStickyLines=t.get(115).maxLineCount,vo(this.domNode,i),this._onOptionsMaybeChanged(),e.hasChanged(145)&&(this._maxLineWidth=0),!0}_onOptionsMaybeChanged(){const e=this._context.configuration,t=new jZ(e,this._context.theme.type);if(!this._viewLineOptions.equals(t)){this._viewLineOptions=t;const i=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let s=i;s<=n;s++)this._visibleLines.getVisibleLine(s).onOptionsChanged(this._viewLineOptions);return!0}return!1}onCursorStateChanged(e){const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();let n=!1;for(let s=t;s<=i;s++)n=this._visibleLines.getVisibleLine(s).onSelectionChanged()||n;return n}onDecorationsChanged(e){{const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let n=t;n<=i;n++)this._visibleLines.getVisibleLine(n).onDecorationsChanged()}return!0}onFlushed(e){const t=this._visibleLines.onFlushed(e);return this._maxLineWidth=0,t}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onRevealRangeRequest(e){const t=this._computeScrollTopToRevealRange(this._context.viewLayout.getFutureViewport(),e.source,e.minimalReveal,e.range,e.selections,e.verticalType);if(t===-1)return!1;let i=this._context.viewLayout.validateScrollPosition({scrollTop:t});e.revealHorizontal?e.range&&e.range.startLineNumber!==e.range.endLineNumber?i={scrollTop:i.scrollTop,scrollLeft:0}:e.range?this._horizontalRevealRequest=new rEe(e.minimalReveal,e.range.startLineNumber,e.range.startColumn,e.range.endColumn,this._context.viewLayout.getCurrentScrollTop(),i.scrollTop,e.scrollType):e.selections&&e.selections.length>0&&(this._horizontalRevealRequest=new aEe(e.minimalReveal,e.selections,this._context.viewLayout.getCurrentScrollTop(),i.scrollTop,e.scrollType)):this._horizontalRevealRequest=null;const s=Math.abs(this._context.viewLayout.getCurrentScrollTop()-i.scrollTop)<=this._lineHeight?1:e.scrollType;return this._context.viewModel.viewLayout.setScrollPosition(i,s),!0}onScrollChanged(e){if(this._horizontalRevealRequest&&e.scrollLeftChanged&&(this._horizontalRevealRequest=null),this._horizontalRevealRequest&&e.scrollTopChanged){const t=Math.min(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop),i=Math.max(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop);(e.scrollTop<t||e.scrollTop>i)&&(this._horizontalRevealRequest=null)}return this.domNode.setWidth(e.scrollWidth),this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth),this._visibleLines.onZonesChanged(e)}onThemeChanged(e){return this._onOptionsMaybeChanged()}getPositionFromDOMInfo(e,t){const i=this._getViewLineDomNode(e);if(i===null)return null;const n=this._getLineNumberFor(i);if(n===-1||n<1||n>this._context.viewModel.getLineCount())return null;if(this._context.viewModel.getLineMaxColumn(n)===1)return new Z(n,1);const s=this._visibleLines.getStartLineNumber(),r=this._visibleLines.getEndLineNumber();if(n<s||n>r)return null;let a=this._visibleLines.getVisibleLine(n).getColumnOfNodeOffset(e,t);const l=this._context.viewModel.getLineMinColumn(n);return a<l&&(a=l),new Z(n,a)}_getViewLineDomNode(e){for(;e&&e.nodeType===1;){if(e.className===Uu.CLASS_NAME)return e;e=e.parentElement}return null}_getLineNumberFor(e){const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let n=t;n<=i;n++){const s=this._visibleLines.getVisibleLine(n);if(e===s.getDomNode())return n}return-1}getLineWidth(e){const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();if(e<t||e>i)return-1;const n=new w3(this.domNode.domNode,this._textRangeRestingSpot),s=this._visibleLines.getVisibleLine(e).getWidth(n);return this._updateLineWidthsSlowIfDomDidLayout(n),s}linesVisibleRangesForRange(e,t){if(this.shouldRender())return null;const i=e.endLineNumber,n=A.intersectRanges(e,this._lastRenderedData.getCurrentVisibleRange());if(!n)return null;const s=[];let r=0;const a=new w3(this.domNode.domNode,this._textRangeRestingSpot);let l=0;t&&(l=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new Z(n.startLineNumber,1)).lineNumber);const c=this._visibleLines.getStartLineNumber(),u=this._visibleLines.getEndLineNumber();for(let f=n.startLineNumber;f<=n.endLineNumber;f++){if(f<c||f>u)continue;const g=f===n.startLineNumber?n.startColumn:1,p=f!==n.endLineNumber,_=p?this._context.viewModel.getLineMaxColumn(f):n.endColumn,b=this._visibleLines.getVisibleLine(f).getVisibleRangesForRange(f,g,_,a);if(b){if(t&&f<i){const y=l;l=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new Z(f+1,1)).lineNumber,y!==l&&(b.ranges[b.ranges.length-1].width+=this._typicalHalfwidthCharacterWidth)}s[r++]=new aDe(b.outsideRenderedLine,f,VA.from(b.ranges),p)}}return this._updateLineWidthsSlowIfDomDidLayout(a),r===0?null:s}_visibleRangesForLineRange(e,t,i){if(this.shouldRender()||e<this._visibleLines.getStartLineNumber()||e>this._visibleLines.getEndLineNumber())return null;const n=new w3(this.domNode.domNode,this._textRangeRestingSpot),s=this._visibleLines.getVisibleLine(e).getVisibleRangesForRange(e,t,i,n);return this._updateLineWidthsSlowIfDomDidLayout(n),s}visibleRangeForPosition(e){const t=this._visibleRangesForLineRange(e.lineNumber,e.column,e.column);return t?new lDe(t.outsideRenderedLine,t.ranges[0].left):null}_updateLineWidthsFast(){return this._updateLineWidths(!0)}_updateLineWidthsSlow(){this._updateLineWidths(!1)}_updateLineWidthsSlowIfDomDidLayout(e){e.didDomLayout&&(this._asyncUpdateLineWidths.isScheduled()||(this._asyncUpdateLineWidths.cancel(),this._updateLineWidthsSlow()))}_updateLineWidths(e){const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();let n=1,s=!0;for(let r=t;r<=i;r++){const a=this._visibleLines.getVisibleLine(r);if(e&&!a.getWidthIsFast()){s=!1;continue}n=Math.max(n,a.getWidth(null))}return s&&t===1&&i===this._context.viewModel.getLineCount()&&(this._maxLineWidth=0),this._ensureMaxLineWidth(n),s}_checkMonospaceFontAssumptions(){let e=-1,t=-1;const i=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let s=i;s<=n;s++){const r=this._visibleLines.getVisibleLine(s);if(r.needsMonospaceFontCheck()){const a=r.getWidth(null);a>t&&(t=a,e=s)}}if(e!==-1&&!this._visibleLines.getVisibleLine(e).monospaceAssumptionsAreValid())for(let s=i;s<=n;s++)this._visibleLines.getVisibleLine(s).onMonospaceAssumptionsInvalidated()}prepareRender(){throw new Error("Not supported")}render(){throw new Error("Not supported")}renderText(e){if(this._visibleLines.renderLines(e),this._lastRenderedData.setCurrentVisibleRange(e.visibleRange),this.domNode.setWidth(this._context.viewLayout.getScrollWidth()),this.domNode.setHeight(Math.min(this._context.viewLayout.getScrollHeight(),1e6)),this._horizontalRevealRequest){const i=this._horizontalRevealRequest;if(e.startLineNumber<=i.minLineNumber&&i.maxLineNumber<=e.endLineNumber){this._horizontalRevealRequest=null,this.onDidRender();const n=this._computeScrollLeftToReveal(i);n&&(this._isViewportWrapping||this._ensureMaxLineWidth(n.maxHorizontalOffset),this._context.viewModel.viewLayout.setScrollPosition({scrollLeft:n.scrollLeft},i.scrollType))}}if(this._updateLineWidthsFast()?this._asyncUpdateLineWidths.cancel():this._asyncUpdateLineWidths.schedule(),jr&&!this._asyncCheckMonospaceFontAssumptions.isScheduled()){const i=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let s=i;s<=n;s++)if(this._visibleLines.getVisibleLine(s).needsMonospaceFontCheck()){this._asyncCheckMonospaceFontAssumptions.schedule();break}}this._linesContent.setLayerHinting(this._canUseLayerHinting),this._linesContent.setContain("strict");const t=this._context.viewLayout.getCurrentScrollTop()-e.bigNumbersDelta;this._linesContent.setTop(-t),this._linesContent.setLeft(-this._context.viewLayout.getCurrentScrollLeft())}_ensureMaxLineWidth(e){const t=Math.ceil(e);this._maxLineWidth<t&&(this._maxLineWidth=t,this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth))}_computeScrollTopToRevealRange(e,t,i,n,s,r){const a=e.top,l=e.height,c=a+l;let u,f,g;if(s&&s.length>0){let S=s[0].startLineNumber,L=s[0].endLineNumber;for(let x=1,D=s.length;x<D;x++){const E=s[x];S=Math.min(S,E.startLineNumber),L=Math.max(L,E.endLineNumber)}u=!1,f=this._context.viewLayout.getVerticalOffsetForLineNumber(S),g=this._context.viewLayout.getVerticalOffsetForLineNumber(L)+this._lineHeight}else if(n)u=!0,f=this._context.viewLayout.getVerticalOffsetForLineNumber(n.startLineNumber),g=this._context.viewLayout.getVerticalOffsetForLineNumber(n.endLineNumber)+this._lineHeight;else return-1;const p=(t==="mouse"||i)&&this._cursorSurroundingLinesStyle==="default";let _=0,b=0;if(p)i||(_=this._lineHeight);else{const S=Math.min(l/this._lineHeight/2,this._cursorSurroundingLines);this._stickyScrollEnabled?_=Math.max(S,this._maxNumberStickyLines)*this._lineHeight:_=S*this._lineHeight,b=Math.max(0,S-1)*this._lineHeight}i||(r===0||r===4)&&(b+=this._lineHeight),f-=_,g+=b;let y;if(g-f>l){if(!u)return-1;y=f}else if(r===5||r===6)if(r===6&&a<=f&&g<=c)y=a;else{const S=Math.max(5*this._lineHeight,l*.2),L=f-S,x=g-l;y=Math.max(x,L)}else if(r===1||r===2)if(r===2&&a<=f&&g<=c)y=a;else{const S=(f+g)/2;y=Math.max(0,S-l/2)}else y=this._computeMinimumScrolling(a,c,f,g,r===3,r===4);return y}_computeScrollLeftToReveal(e){const t=this._context.viewLayout.getCurrentViewport(),i=this._context.configuration.options.get(145),n=t.left,s=n+t.width-i.verticalScrollbarWidth;let r=1073741824,a=0;if(e.type==="range"){const c=this._visibleRangesForLineRange(e.lineNumber,e.startColumn,e.endColumn);if(!c)return null;for(const u of c.ranges)r=Math.min(r,Math.round(u.left)),a=Math.max(a,Math.round(u.left+u.width))}else for(const c of e.selections){if(c.startLineNumber!==c.endLineNumber)return null;const u=this._visibleRangesForLineRange(c.startLineNumber,c.startColumn,c.endColumn);if(!u)return null;for(const f of u.ranges)r=Math.min(r,Math.round(f.left)),a=Math.max(a,Math.round(f.left+f.width))}return e.minimalReveal||(r=Math.max(0,r-qA.HORIZONTAL_EXTRA_PX),a+=this._revealHorizontalRightPadding),e.type==="selections"&&a-r>t.width?null:{scrollLeft:this._computeMinimumScrolling(n,s,r,a),maxHorizontalOffset:a}}_computeMinimumScrolling(e,t,i,n,s,r){e=e|0,t=t|0,i=i|0,n=n|0,s=!!s,r=!!r;const a=t-e;if(n-i<a){if(s)return i;if(r)return Math.max(0,n-a);if(i<e)return i;if(n>t)return Math.max(0,n-a)}else return i;return e}}qA.HORIZONTAL_EXTRA_PX=30;class lEe extends fse{constructor(e){super(),this._context=e;const i=this._context.configuration.options.get(145);this._decorationsLeft=i.decorationsLeft,this._decorationsWidth=i.decorationsWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const i=this._context.configuration.options.get(145);return this._decorationsLeft=i.decorationsLeft,this._decorationsWidth=i.decorationsWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){var t,i;const n=e.getDecorationsInViewport(),s=[];let r=0;for(let a=0,l=n.length;a<l;a++){const c=n[a],u=c.options.linesDecorationsClassName,f=c.options.zIndex;u&&(s[r++]=new R9(c.range.startLineNumber,c.range.endLineNumber,u,(t=c.options.linesDecorationsTooltip)!==null&&t!==void 0?t:null,f));const g=c.options.firstLineDecorationClassName;g&&(s[r++]=new R9(c.range.startLineNumber,c.range.startLineNumber,g,(i=c.options.linesDecorationsTooltip)!==null&&i!==void 0?i:null,f))}return s}prepareRender(e){const t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,n=this._render(t,i,this._getDecorations(e)),s=this._decorationsLeft.toString(),r=this._decorationsWidth.toString(),a='" style="left:'+s+"px;width:"+r+'px;"></div>',l=[];for(let c=t;c<=i;c++){const u=c-t,f=n[u].getDecorations();let g="";for(const p of f){let _='<div class="cldr '+p.className;p.tooltip!==null&&(_+='" title="'+p.tooltip),_+=a,g+=_}l[u]=g}this._renderResult=l}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}class cEe extends fse{constructor(e){super(),this._context=e,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport(),i=[];let n=0;for(let s=0,r=t.length;s<r;s++){const a=t[s],l=a.options.marginClassName,c=a.options.zIndex;l&&(i[n++]=new R9(a.range.startLineNumber,a.range.endLineNumber,l,null,c))}return i}prepareRender(e){const t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,n=this._render(t,i,this._getDecorations(e)),s=[];for(let r=t;r<=i;r++){const a=r-t,l=n[a].getDecorations();let c="";for(const u of l)c+='<div class="cmdr '+u.className+'" style=""></div>';s[a]=c}this._renderResult=s}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}class bl{constructor(e,t,i,n){this._rgba8Brand=void 0,this.r=bl._clamp(e),this.g=bl._clamp(t),this.b=bl._clamp(i),this.a=bl._clamp(n)}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}static _clamp(e){return e<0?0:e>255?255:e|0}}bl.Empty=new bl(0,0,0,0);class ZD extends J{static getInstance(){return this._INSTANCE||(this._INSTANCE=new ZD),this._INSTANCE}constructor(){super(),this._onDidChange=new Y,this.onDidChange=this._onDidChange.event,this._updateColorMap(),this._register(Qn.onDidChange(e=>{e.changedColorMap&&this._updateColorMap()}))}_updateColorMap(){const e=Qn.getColorMap();if(!e){this._colors=[bl.Empty],this._backgroundIsLight=!0;return}this._colors=[bl.Empty];for(let i=1;i<e.length;i++){const n=e[i].rgba;this._colors[i]=new bl(n.r,n.g,n.b,Math.round(n.a*255))}const t=e[2].getRelativeLuminance();this._backgroundIsLight=t>=.5,this._onDidChange.fire(void 0)}getColor(e){return(e<1||e>=this._colors.length)&&(e=2),this._colors[e]}backgroundIsLight(){return this._backgroundIsLight}}ZD._INSTANCE=null;const dEe=(()=>{const o=[];for(let e=32;e<=126;e++)o.push(e);return o.push(65533),o})(),uEe=(o,e)=>(o-=32,o<0||o>96?e<=2?(o+96)%96:95:o);class wx{constructor(e,t){this.scale=t,this._minimapCharRendererBrand=void 0,this.charDataNormal=wx.soften(e,12/15),this.charDataLight=wx.soften(e,50/60)}static soften(e,t){const i=new Uint8ClampedArray(e.length);for(let n=0,s=e.length;n<s;n++)i[n]=SR(e[n]*t);return i}renderChar(e,t,i,n,s,r,a,l,c,u,f){const g=1*this.scale,p=2*this.scale,_=f?1:p;if(t+g>e.width||i+_>e.height){console.warn("bad render request outside image data");return}const b=u?this.charDataLight:this.charDataNormal,y=uEe(n,c),S=e.width*4,L=a.r,x=a.g,D=a.b,E=s.r-L,N=s.g-x,M=s.b-D,F=Math.max(r,l),H=e.data;let Q=y*g*p,K=i*S+t*4;for(let j=0;j<_;j++){let q=K;for(let se=0;se<g;se++){const fe=b[Q++]/255*(r/255);H[q++]=L+E*fe,H[q++]=x+N*fe,H[q++]=D+M*fe,H[q++]=F}K+=S}}blockRenderChar(e,t,i,n,s,r,a,l){const c=1*this.scale,u=2*this.scale,f=l?1:u;if(t+c>e.width||i+f>e.height){console.warn("bad render request outside image data");return}const g=e.width*4,p=.5*(s/255),_=r.r,b=r.g,y=r.b,S=n.r-_,L=n.g-b,x=n.b-y,D=_+S*p,E=b+L*p,N=y+x*p,M=Math.max(s,a),F=e.data;let H=i*g+t*4;for(let Q=0;Q<f;Q++){let K=H;for(let j=0;j<c;j++)F[K++]=D,F[K++]=E,F[K++]=N,F[K++]=M;H+=g}}}const nQ={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15},sQ=o=>{const e=new Uint8ClampedArray(o.length/2);for(let t=0;t<o.length;t+=2)e[t>>1]=nQ[o[t]]<<4|nQ[o[t+1]]&15;return e},oQ={1:rm(()=>sQ("0000511D6300CF609C709645A78432005642574171487021003C451900274D35D762755E8B629C5BA856AF57BA649530C167D1512A272A3F6038604460398526BCA2A968DB6F8957C768BE5FBE2FB467CF5D8D5B795DC7625B5DFF50DE64C466DB2FC47CD860A65E9A2EB96CB54CE06DA763AB2EA26860524D3763536601005116008177A8705E53AB738E6A982F88BAA35B5F5B626D9C636B449B737E5B7B678598869A662F6B5B8542706C704C80736A607578685B70594A49715A4522E792")),2:rm(()=>sQ("000000000000000055394F383D2800008B8B1F210002000081B1CBCBCC820000847AAF6B9AAF2119BE08B8881AD60000A44FD07DCCF107015338130C00000000385972265F390B406E2437634B4B48031B12B8A0847000001E15B29A402F0000000000004B33460B00007A752C2A0000000000004D3900000084394B82013400ABA5CFC7AD9C0302A45A3E5A98AB000089A43382D97900008BA54AA087A70A0248A6A7AE6DBE0000BF6F94987EA40A01A06DCFA7A7A9030496C32F77891D0000A99FB1A0AFA80603B29AB9CA75930D010C0948354D3900000C0948354F37460D0028BE673D8400000000AF9D7B6E00002B007AA8933400007AA642675C2700007984CFB9C3985B768772A8A6B7B20000CAAECAAFC4B700009F94A6009F840009D09F9BA4CA9C0000CC8FC76DC87F0000C991C472A2000000A894A48CA7B501079BA2C9C69BA20000B19A5D3FA89000005CA6009DA2960901B0A7F0669FB200009D009E00B7890000DAD0F5D092820000D294D4C48BD10000B5A7A4A3B1A50402CAB6CBA6A2000000B5A7A4A3B1A8044FCDADD19D9CB00000B7778F7B8AAE0803C9AB5D3F5D3F00009EA09EA0BAB006039EA0989A8C7900009B9EF4D6B7C00000A9A7816CACA80000ABAC84705D3F000096DA635CDC8C00006F486F266F263D4784006124097B00374F6D2D6D2D6D4A3A95872322000000030000000000008D8939130000000000002E22A5C9CBC70600AB25C0B5C9B400061A2DB04CA67001082AA6BEBEBFC606002321DACBC19E03087AA08B6768380000282FBAC0B8CA7A88AD25BBA5A29900004C396C5894A6000040485A6E356E9442A32CD17EADA70000B4237923628600003E2DE9C1D7B500002F25BBA5A2990000231DB6AFB4A804023025C0B5CAB588062B2CBDBEC0C706882435A75CA20000002326BD6A82A908048B4B9A5A668000002423A09CB4BB060025259C9D8A7900001C1FCAB2C7C700002A2A9387ABA200002626A4A47D6E9D14333163A0C87500004B6F9C2D643A257049364936493647358A34438355497F1A0000A24C1D590000D38DFFBDD4CD3126"))};class CL{static create(e,t){if(this.lastCreated&&e===this.lastCreated.scale&&t===this.lastFontFamily)return this.lastCreated;let i;return oQ[e]?i=new wx(oQ[e](),e):i=CL.createFromSampleData(CL.createSampleData(t).data,e),this.lastFontFamily=t,this.lastCreated=i,i}static createSampleData(e){const t=document.createElement("canvas"),i=t.getContext("2d");t.style.height="16px",t.height=16,t.width=96*10,t.style.width=96*10+"px",i.fillStyle="#ffffff",i.font=`bold 16px ${e}`,i.textBaseline="middle";let n=0;for(const s of dEe)i.fillText(String.fromCharCode(s),n,16/2),n+=10;return i.getImageData(0,0,96*10,16)}static createFromSampleData(e,t){if(e.length!==61440)throw new Error("Unexpected source in MinimapCharRenderer");const n=CL._downsample(e,t);return new wx(n,t)}static _downsampleChar(e,t,i,n,s){const r=1*s,a=2*s;let l=n,c=0;for(let u=0;u<a;u++){const f=u/a*16,g=(u+1)/a*16;for(let p=0;p<r;p++){const _=p/r*10,b=(p+1)/r*10;let y=0,S=0;for(let x=f;x<g;x++){const D=t+Math.floor(x)*3840,E=1-(x-Math.floor(x));for(let N=_;N<b;N++){const M=1-(N-Math.floor(N)),F=D+Math.floor(N)*4,H=M*E;S+=H,y+=e[F]*e[F+3]/255*H}}const L=y/S;c=Math.max(c,L),i[l++]=SR(L)}}return c}static _downsample(e,t){const i=2*t*1*t,n=i*96,s=new Uint8ClampedArray(n);let r=0,a=0,l=0;for(let c=0;c<96;c++)l=Math.max(l,this._downsampleChar(e,a,s,r,t)),r+=i,a+=10*4;if(l>0){const c=255/l;for(let u=0;u<n;u++)s[u]*=c}return s}}const hEe=Mo?'"Segoe WPC", "Segoe UI", sans-serif':Kt?"-apple-system, BlinkMacSystemFont, sans-serif":'system-ui, "Ubuntu", "Droid Sans", sans-serif',fEe=140,gEe=2;class MC{constructor(e,t,i){const n=e.options,s=n.get(143),r=n.get(145),a=r.minimap,l=n.get(50),c=n.get(73);this.renderMinimap=a.renderMinimap,this.size=c.size,this.minimapHeightIsEditorHeight=a.minimapHeightIsEditorHeight,this.scrollBeyondLastLine=n.get(105),this.paddingTop=n.get(84).top,this.paddingBottom=n.get(84).bottom,this.showSlider=c.showSlider,this.autohide=c.autohide,this.pixelRatio=s,this.typicalHalfwidthCharacterWidth=l.typicalHalfwidthCharacterWidth,this.lineHeight=n.get(67),this.minimapLeft=a.minimapLeft,this.minimapWidth=a.minimapWidth,this.minimapHeight=r.height,this.canvasInnerWidth=a.minimapCanvasInnerWidth,this.canvasInnerHeight=a.minimapCanvasInnerHeight,this.canvasOuterWidth=a.minimapCanvasOuterWidth,this.canvasOuterHeight=a.minimapCanvasOuterHeight,this.isSampling=a.minimapIsSampling,this.editorHeight=r.height,this.fontScale=a.minimapScale,this.minimapLineHeight=a.minimapLineHeight,this.minimapCharWidth=1*this.fontScale,this.sectionHeaderFontFamily=hEe,this.sectionHeaderFontSize=c.sectionHeaderFontSize*s,this.sectionHeaderFontColor=MC._getSectionHeaderColor(t,i.getColor(1)),this.charRenderer=rm(()=>CL.create(this.fontScale,l.fontFamily)),this.defaultBackgroundColor=i.getColor(2),this.backgroundColor=MC._getMinimapBackground(t,this.defaultBackgroundColor),this.foregroundAlpha=MC._getMinimapForegroundOpacity(t)}static _getMinimapBackground(e,t){const i=e.getColor(exe);return i?new bl(i.rgba.r,i.rgba.g,i.rgba.b,Math.round(255*i.rgba.a)):t}static _getMinimapForegroundOpacity(e){const t=e.getColor(txe);return t?bl._clamp(Math.round(255*t.rgba.a)):255}static _getSectionHeaderColor(e,t){const i=e.getColor(oc);return i?new bl(i.rgba.r,i.rgba.g,i.rgba.b,Math.round(255*i.rgba.a)):t}equals(e){return this.renderMinimap===e.renderMinimap&&this.size===e.size&&this.minimapHeightIsEditorHeight===e.minimapHeightIsEditorHeight&&this.scrollBeyondLastLine===e.scrollBeyondLastLine&&this.paddingTop===e.paddingTop&&this.paddingBottom===e.paddingBottom&&this.showSlider===e.showSlider&&this.autohide===e.autohide&&this.pixelRatio===e.pixelRatio&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.lineHeight===e.lineHeight&&this.minimapLeft===e.minimapLeft&&this.minimapWidth===e.minimapWidth&&this.minimapHeight===e.minimapHeight&&this.canvasInnerWidth===e.canvasInnerWidth&&this.canvasInnerHeight===e.canvasInnerHeight&&this.canvasOuterWidth===e.canvasOuterWidth&&this.canvasOuterHeight===e.canvasOuterHeight&&this.isSampling===e.isSampling&&this.editorHeight===e.editorHeight&&this.fontScale===e.fontScale&&this.minimapLineHeight===e.minimapLineHeight&&this.minimapCharWidth===e.minimapCharWidth&&this.sectionHeaderFontSize===e.sectionHeaderFontSize&&this.defaultBackgroundColor&&this.defaultBackgroundColor.equals(e.defaultBackgroundColor)&&this.backgroundColor&&this.backgroundColor.equals(e.backgroundColor)&&this.foregroundAlpha===e.foregroundAlpha}}class wL{constructor(e,t,i,n,s,r,a,l,c){this.scrollTop=e,this.scrollHeight=t,this.sliderNeeded=i,this._computedSliderRatio=n,this.sliderTop=s,this.sliderHeight=r,this.topPaddingLineCount=a,this.startLineNumber=l,this.endLineNumber=c}getDesiredScrollTopFromDelta(e){return Math.round(this.scrollTop+e/this._computedSliderRatio)}getDesiredScrollTopFromTouchLocation(e){return Math.round((e-this.sliderHeight/2)/this._computedSliderRatio)}intersectWithViewport(e){const t=Math.max(this.startLineNumber,e.startLineNumber),i=Math.min(this.endLineNumber,e.endLineNumber);return t>i?null:[t,i]}getYForLineNumber(e,t){return+(e-this.startLineNumber+this.topPaddingLineCount)*t}static create(e,t,i,n,s,r,a,l,c,u,f){const g=e.pixelRatio,p=e.minimapLineHeight,_=Math.floor(e.canvasInnerHeight/p),b=e.lineHeight;if(e.minimapHeightIsEditorHeight){let N=l*e.lineHeight+e.paddingTop+e.paddingBottom;e.scrollBeyondLastLine&&(N+=Math.max(0,s-e.lineHeight-e.paddingBottom));const M=Math.max(1,Math.floor(s*s/N)),F=Math.max(0,e.minimapHeight-M),H=F/(u-s),Q=c*H,K=F>0,j=Math.floor(e.canvasInnerHeight/e.minimapLineHeight),q=Math.floor(e.paddingTop/e.lineHeight);return new wL(c,u,K,H,Q,M,q,1,Math.min(a,j))}let y;if(r&&i!==a){const N=i-t+1;y=Math.floor(N*p/g)}else{const N=s/b;y=Math.floor(N*p/g)}const S=Math.floor(e.paddingTop/b);let L=Math.floor(e.paddingBottom/b);if(e.scrollBeyondLastLine){const N=s/b;L=Math.max(L,N-1)}let x;if(L>0){const N=s/b;x=(S+a+L-N-1)*p/g}else x=Math.max(0,(S+a)*p/g-y);x=Math.min(e.minimapHeight-y,x);const D=x/(u-s),E=c*D;if(_>=S+a+L){const N=x>0;return new wL(c,u,N,D,E,y,S,1,a)}else{let N;t>1?N=t+S:N=Math.max(1,c/b);let M,F=Math.max(1,Math.floor(N-E*g/p));F<S?(M=S-F+1,F=1):(M=0,F=Math.max(1,F-S)),f&&f.scrollHeight===u&&(f.scrollTop>c&&(F=Math.min(F,f.startLineNumber),M=Math.max(M,f.topPaddingLineCount)),f.scrollTop<c&&(F=Math.max(F,f.startLineNumber),M=Math.min(M,f.topPaddingLineCount)));const H=Math.min(a,F-M+_-1),Q=(c-n)/b;let K;return c>=e.paddingTop?K=(t-F+M+Q)*p/g:K=c/e.paddingTop*(M+Q)*p/g,new wL(c,u,!0,D,K,y,M,F,H)}}}class PR{constructor(e){this.dy=e}onContentChanged(){this.dy=-1}onTokensChanged(){this.dy=-1}}PR.INVALID=new PR(-1);class rQ{constructor(e,t,i){this.renderedLayout=e,this._imageData=t,this._renderedLines=new cse(()=>PR.INVALID),this._renderedLines._set(e.startLineNumber,i)}linesEquals(e){if(!this.scrollEquals(e))return!1;const i=this._renderedLines._get().lines;for(let n=0,s=i.length;n<s;n++)if(i[n].dy===-1)return!1;return!0}scrollEquals(e){return this.renderedLayout.startLineNumber===e.startLineNumber&&this.renderedLayout.endLineNumber===e.endLineNumber}_get(){const e=this._renderedLines._get();return{imageData:this._imageData,rendLineNumberStart:e.rendLineNumberStart,lines:e.lines}}onLinesChanged(e,t){return this._renderedLines.onLinesChanged(e,t)}onLinesDeleted(e,t){this._renderedLines.onLinesDeleted(e,t)}onLinesInserted(e,t){this._renderedLines.onLinesInserted(e,t)}onTokensChanged(e){return this._renderedLines.onTokensChanged(e)}}class EH{constructor(e,t,i,n){this._backgroundFillData=EH._createBackgroundFillData(t,i,n),this._buffers=[e.createImageData(t,i),e.createImageData(t,i)],this._lastUsedBuffer=0}getBuffer(){this._lastUsedBuffer=1-this._lastUsedBuffer;const e=this._buffers[this._lastUsedBuffer];return e.data.set(this._backgroundFillData),e}static _createBackgroundFillData(e,t,i){const n=i.r,s=i.g,r=i.b,a=i.a,l=new Uint8ClampedArray(e*t*4);let c=0;for(let u=0;u<t;u++)for(let f=0;f<e;f++)l[c]=n,l[c+1]=s,l[c+2]=r,l[c+3]=a,c+=4;return l}}class yx{static compute(e,t,i){if(e.renderMinimap===0||!e.isSampling)return[null,[]];const{minimapLineCount:n}=CC.computeContainedMinimapLineCount({viewLineCount:t,scrollBeyondLastLine:e.scrollBeyondLastLine,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,height:e.editorHeight,lineHeight:e.lineHeight,pixelRatio:e.pixelRatio}),s=t/n,r=s/2;if(!i||i.minimapLines.length===0){const y=[];if(y[0]=1,n>1){for(let S=0,L=n-1;S<L;S++)y[S]=Math.round(S*s+r);y[n-1]=t}return[new yx(s,y),[]]}const a=i.minimapLines,l=a.length,c=[];let u=0,f=0,g=1;const p=10;let _=[],b=null;for(let y=0;y<n;y++){const S=Math.max(g,Math.round(y*s)),L=Math.max(S,Math.round((y+1)*s));for(;u<l&&a[u]<S;){if(_.length<p){const D=u+1+f;b&&b.type==="deleted"&&b._oldIndex===u-1?b.deleteToLineNumber++:(b={type:"deleted",_oldIndex:u,deleteFromLineNumber:D,deleteToLineNumber:D},_.push(b)),f--}u++}let x;if(u<l&&a[u]<=L)x=a[u],u++;else if(y===0?x=1:y+1===n?x=t:x=Math.round(y*s+r),_.length<p){const D=u+1+f;b&&b.type==="inserted"&&b._i===y-1?b.insertToLineNumber++:(b={type:"inserted",_i:y,insertFromLineNumber:D,insertToLineNumber:D},_.push(b)),f++}c[y]=x,g=x}if(_.length<p)for(;u<l;){const y=u+1+f;b&&b.type==="deleted"&&b._oldIndex===u-1?b.deleteToLineNumber++:(b={type:"deleted",_oldIndex:u,deleteFromLineNumber:y,deleteToLineNumber:y},_.push(b)),f--,u++}else _=[{type:"flush"}];return[new yx(s,c),_]}constructor(e,t){this.samplingRatio=e,this.minimapLines=t}modelLineToMinimapLine(e){return Math.min(this.minimapLines.length,Math.max(1,Math.round(e/this.samplingRatio)))}modelLineRangeToMinimapLineRange(e,t){let i=this.modelLineToMinimapLine(e)-1;for(;i>0&&this.minimapLines[i-1]>=e;)i--;let n=this.modelLineToMinimapLine(t)-1;for(;n+1<this.minimapLines.length&&this.minimapLines[n+1]<=t;)n++;if(i===n){const s=this.minimapLines[i];if(s<e||s>t)return null}return[i+1,n+1]}decorationLineRangeToMinimapLineRange(e,t){let i=this.modelLineToMinimapLine(e),n=this.modelLineToMinimapLine(t);return e!==t&&n===i&&(n===this.minimapLines.length?i>1&&i--:n++),[i,n]}onLinesDeleted(e){const t=e.toLineNumber-e.fromLineNumber+1;let i=this.minimapLines.length,n=0;for(let s=this.minimapLines.length-1;s>=0&&!(this.minimapLines[s]<e.fromLineNumber);s--)this.minimapLines[s]<=e.toLineNumber?(this.minimapLines[s]=Math.max(1,e.fromLineNumber-1),i=Math.min(i,s),n=Math.max(n,s)):this.minimapLines[s]-=t;return[i,n]}onLinesInserted(e){const t=e.toLineNumber-e.fromLineNumber+1;for(let i=this.minimapLines.length-1;i>=0&&!(this.minimapLines[i]<e.fromLineNumber);i--)this.minimapLines[i]+=t}}class pEe extends Ga{constructor(e){super(e),this._sectionHeaderCache=new Dh(10,1.5),this.tokensColorTracker=ZD.getInstance(),this._selections=[],this._minimapSelections=null,this.options=new MC(this._context.configuration,this._context.theme,this.tokensColorTracker);const[t]=yx.compute(this.options,this._context.viewModel.getLineCount(),null);this._samplingState=t,this._shouldCheckSampling=!1,this._actual=new dC(e.theme,this)}dispose(){this._actual.dispose(),super.dispose()}getDomNode(){return this._actual.getDomNode()}_onOptionsMaybeChanged(){const e=new MC(this._context.configuration,this._context.theme,this.tokensColorTracker);return this.options.equals(e)?!1:(this.options=e,this._recreateLineSampling(),this._actual.onDidChangeOptions(),!0)}onConfigurationChanged(e){return this._onOptionsMaybeChanged()}onCursorStateChanged(e){return this._selections=e.selections,this._minimapSelections=null,this._actual.onSelectionChanged()}onDecorationsChanged(e){return e.affectsMinimap?this._actual.onDecorationsChanged():!1}onFlushed(e){return this._samplingState&&(this._shouldCheckSampling=!0),this._actual.onFlushed()}onLinesChanged(e){if(this._samplingState){const t=this._samplingState.modelLineRangeToMinimapLineRange(e.fromLineNumber,e.fromLineNumber+e.count-1);return t?this._actual.onLinesChanged(t[0],t[1]-t[0]+1):!1}else return this._actual.onLinesChanged(e.fromLineNumber,e.count)}onLinesDeleted(e){if(this._samplingState){const[t,i]=this._samplingState.onLinesDeleted(e);return t<=i&&this._actual.onLinesChanged(t+1,i-t+1),this._shouldCheckSampling=!0,!0}else return this._actual.onLinesDeleted(e.fromLineNumber,e.toLineNumber)}onLinesInserted(e){return this._samplingState?(this._samplingState.onLinesInserted(e),this._shouldCheckSampling=!0,!0):this._actual.onLinesInserted(e.fromLineNumber,e.toLineNumber)}onScrollChanged(e){return this._actual.onScrollChanged()}onThemeChanged(e){return this._actual.onThemeChanged(),this._onOptionsMaybeChanged(),!0}onTokensChanged(e){if(this._samplingState){const t=[];for(const i of e.ranges){const n=this._samplingState.modelLineRangeToMinimapLineRange(i.fromLineNumber,i.toLineNumber);n&&t.push({fromLineNumber:n[0],toLineNumber:n[1]})}return t.length?this._actual.onTokensChanged(t):!1}else return this._actual.onTokensChanged(e.ranges)}onTokensColorsChanged(e){return this._onOptionsMaybeChanged(),this._actual.onTokensColorsChanged()}onZonesChanged(e){return this._actual.onZonesChanged()}prepareRender(e){this._shouldCheckSampling&&(this._shouldCheckSampling=!1,this._recreateLineSampling())}render(e){let t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber;this._samplingState&&(t=this._samplingState.modelLineToMinimapLine(t),i=this._samplingState.modelLineToMinimapLine(i));const n={viewportContainsWhitespaceGaps:e.viewportData.whitespaceViewportData.length>0,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,viewportStartLineNumber:t,viewportEndLineNumber:i,viewportStartLineNumberVerticalOffset:e.getVerticalOffsetForLineNumber(t),scrollTop:e.scrollTop,scrollLeft:e.scrollLeft,viewportWidth:e.viewportWidth,viewportHeight:e.viewportHeight};this._actual.render(n)}_recreateLineSampling(){this._minimapSelections=null;const e=!!this._samplingState,[t,i]=yx.compute(this.options,this._context.viewModel.getLineCount(),this._samplingState);if(this._samplingState=t,e&&this._samplingState)for(const n of i)switch(n.type){case"deleted":this._actual.onLinesDeleted(n.deleteFromLineNumber,n.deleteToLineNumber);break;case"inserted":this._actual.onLinesInserted(n.insertFromLineNumber,n.insertToLineNumber);break;case"flush":this._actual.onFlushed();break}}getLineCount(){return this._samplingState?this._samplingState.minimapLines.length:this._context.viewModel.getLineCount()}getRealLineCount(){return this._context.viewModel.getLineCount()}getLineContent(e){return this._samplingState?this._context.viewModel.getLineContent(this._samplingState.minimapLines[e-1]):this._context.viewModel.getLineContent(e)}getLineMaxColumn(e){return this._samplingState?this._context.viewModel.getLineMaxColumn(this._samplingState.minimapLines[e-1]):this._context.viewModel.getLineMaxColumn(e)}getMinimapLinesRenderingData(e,t,i){if(this._samplingState){const n=[];for(let s=0,r=t-e+1;s<r;s++)i[s]?n[s]=this._context.viewModel.getViewLineData(this._samplingState.minimapLines[e+s-1]):n[s]=null;return n}return this._context.viewModel.getMinimapLinesRenderingData(e,t,i).data}getSelections(){if(this._minimapSelections===null)if(this._samplingState){this._minimapSelections=[];for(const e of this._selections){const[t,i]=this._samplingState.decorationLineRangeToMinimapLineRange(e.startLineNumber,e.endLineNumber);this._minimapSelections.push(new Xe(t,e.startColumn,i,e.endColumn))}}else this._minimapSelections=this._selections;return this._minimapSelections}getMinimapDecorationsInViewport(e,t){const i=this._getMinimapDecorationsInViewport(e,t).filter(n=>{var s;return!(!((s=n.options.minimap)===null||s===void 0)&&s.sectionHeaderStyle)});if(this._samplingState){const n=[];for(const s of i){if(!s.options.minimap)continue;const r=s.range,a=this._samplingState.modelLineToMinimapLine(r.startLineNumber),l=this._samplingState.modelLineToMinimapLine(r.endLineNumber);n.push(new xne(new A(a,r.startColumn,l,r.endColumn),s.options))}return n}return i}getSectionHeaderDecorationsInViewport(e,t){const i=this.options.minimapLineHeight,s=this.options.sectionHeaderFontSize/i;return e=Math.floor(Math.max(1,e-s)),this._getMinimapDecorationsInViewport(e,t).filter(r=>{var a;return!!(!((a=r.options.minimap)===null||a===void 0)&&a.sectionHeaderStyle)})}_getMinimapDecorationsInViewport(e,t){let i;if(this._samplingState){const n=this._samplingState.minimapLines[e-1],s=this._samplingState.minimapLines[t-1];i=new A(n,1,s,this._context.viewModel.getLineMaxColumn(s))}else i=new A(e,1,t,this._context.viewModel.getLineMaxColumn(t));return this._context.viewModel.getMinimapDecorationsInRange(i)}getSectionHeaderText(e,t){var i;const n=(i=e.options.minimap)===null||i===void 0?void 0:i.sectionHeaderText;if(!n)return null;const s=this._sectionHeaderCache.get(n);if(s)return s;const r=t(n);return this._sectionHeaderCache.set(n,r),r}getOptions(){return this._context.viewModel.model.getOptions()}revealLineNumber(e){this._samplingState&&(e=this._samplingState.minimapLines[e-1]),this._context.viewModel.revealRange("mouse",!1,new A(e,1,e,1),1,0)}setScrollTop(e){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:e},1)}}class dC extends J{constructor(e,t){super(),this._renderDecorations=!1,this._gestureInProgress=!1,this._theme=e,this._model=t,this._lastRenderData=null,this._buffers=null,this._selectionColor=this._theme.getColor(HZ),this._domNode=ki(document.createElement("div")),qd.write(this._domNode,9),this._domNode.setClassName(this._getMinimapDomNodeClassName()),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._shadow=ki(document.createElement("div")),this._shadow.setClassName("minimap-shadow-hidden"),this._domNode.appendChild(this._shadow),this._canvas=ki(document.createElement("canvas")),this._canvas.setPosition("absolute"),this._canvas.setLeft(0),this._domNode.appendChild(this._canvas),this._decorationsCanvas=ki(document.createElement("canvas")),this._decorationsCanvas.setPosition("absolute"),this._decorationsCanvas.setClassName("minimap-decorations-layer"),this._decorationsCanvas.setLeft(0),this._domNode.appendChild(this._decorationsCanvas),this._slider=ki(document.createElement("div")),this._slider.setPosition("absolute"),this._slider.setClassName("minimap-slider"),this._slider.setLayerHinting(!0),this._slider.setContain("strict"),this._domNode.appendChild(this._slider),this._sliderHorizontal=ki(document.createElement("div")),this._sliderHorizontal.setPosition("absolute"),this._sliderHorizontal.setClassName("minimap-slider-horizontal"),this._slider.appendChild(this._sliderHorizontal),this._applyLayout(),this._pointerDownListener=ss(this._domNode.domNode,ke.POINTER_DOWN,i=>{if(i.preventDefault(),this._model.options.renderMinimap===0||!this._lastRenderData)return;if(this._model.options.size!=="proportional"){if(i.button===0&&this._lastRenderData){const c=ws(this._slider.domNode),u=c.top+c.height/2;this._startSliderDragging(i,u,this._lastRenderData.renderedLayout)}return}const s=this._model.options.minimapLineHeight,r=this._model.options.canvasInnerHeight/this._model.options.canvasOuterHeight*i.offsetY;let l=Math.floor(r/s)+this._lastRenderData.renderedLayout.startLineNumber-this._lastRenderData.renderedLayout.topPaddingLineCount;l=Math.min(l,this._model.getLineCount()),this._model.revealLineNumber(l)}),this._sliderPointerMoveMonitor=new Q1,this._sliderPointerDownListener=ss(this._slider.domNode,ke.POINTER_DOWN,i=>{i.preventDefault(),i.stopPropagation(),i.button===0&&this._lastRenderData&&this._startSliderDragging(i,i.pageY,this._lastRenderData.renderedLayout)}),this._gestureDisposable=rn.addTarget(this._domNode.domNode),this._sliderTouchStartListener=oe(this._domNode.domNode,ln.Start,i=>{i.preventDefault(),i.stopPropagation(),this._lastRenderData&&(this._slider.toggleClassName("active",!0),this._gestureInProgress=!0,this.scrollDueToTouchEvent(i))},{passive:!1}),this._sliderTouchMoveListener=oe(this._domNode.domNode,ln.Change,i=>{i.preventDefault(),i.stopPropagation(),this._lastRenderData&&this._gestureInProgress&&this.scrollDueToTouchEvent(i)},{passive:!1}),this._sliderTouchEndListener=ss(this._domNode.domNode,ln.End,i=>{i.preventDefault(),i.stopPropagation(),this._gestureInProgress=!1,this._slider.toggleClassName("active",!1)})}_startSliderDragging(e,t,i){if(!e.target||!(e.target instanceof Element))return;const n=e.pageX;this._slider.toggleClassName("active",!0);const s=(r,a)=>{const l=ws(this._domNode.domNode),c=Math.min(Math.abs(a-n),Math.abs(a-l.left),Math.abs(a-l.left-l.width));if(Mo&&c>fEe){this._model.setScrollTop(i.scrollTop);return}const u=r-t;this._model.setScrollTop(i.getDesiredScrollTopFromDelta(u))};e.pageY!==t&&s(e.pageY,n),this._sliderPointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,r=>s(r.pageY,r.pageX),()=>{this._slider.toggleClassName("active",!1)})}scrollDueToTouchEvent(e){const t=this._domNode.domNode.getBoundingClientRect().top,i=this._lastRenderData.renderedLayout.getDesiredScrollTopFromTouchLocation(e.pageY-t);this._model.setScrollTop(i)}dispose(){this._pointerDownListener.dispose(),this._sliderPointerMoveMonitor.dispose(),this._sliderPointerDownListener.dispose(),this._gestureDisposable.dispose(),this._sliderTouchStartListener.dispose(),this._sliderTouchMoveListener.dispose(),this._sliderTouchEndListener.dispose(),super.dispose()}_getMinimapDomNodeClassName(){const e=["minimap"];return this._model.options.showSlider==="always"?e.push("slider-always"):e.push("slider-mouseover"),this._model.options.autohide&&e.push("autohide"),e.join(" ")}getDomNode(){return this._domNode}_applyLayout(){this._domNode.setLeft(this._model.options.minimapLeft),this._domNode.setWidth(this._model.options.minimapWidth),this._domNode.setHeight(this._model.options.minimapHeight),this._shadow.setHeight(this._model.options.minimapHeight),this._canvas.setWidth(this._model.options.canvasOuterWidth),this._canvas.setHeight(this._model.options.canvasOuterHeight),this._canvas.domNode.width=this._model.options.canvasInnerWidth,this._canvas.domNode.height=this._model.options.canvasInnerHeight,this._decorationsCanvas.setWidth(this._model.options.canvasOuterWidth),this._decorationsCanvas.setHeight(this._model.options.canvasOuterHeight),this._decorationsCanvas.domNode.width=this._model.options.canvasInnerWidth,this._decorationsCanvas.domNode.height=this._model.options.canvasInnerHeight,this._slider.setWidth(this._model.options.minimapWidth)}_getBuffer(){return this._buffers||this._model.options.canvasInnerWidth>0&&this._model.options.canvasInnerHeight>0&&(this._buffers=new EH(this._canvas.domNode.getContext("2d"),this._model.options.canvasInnerWidth,this._model.options.canvasInnerHeight,this._model.options.backgroundColor)),this._buffers?this._buffers.getBuffer():null}onDidChangeOptions(){this._lastRenderData=null,this._buffers=null,this._applyLayout(),this._domNode.setClassName(this._getMinimapDomNodeClassName())}onSelectionChanged(){return this._renderDecorations=!0,!0}onDecorationsChanged(){return this._renderDecorations=!0,!0}onFlushed(){return this._lastRenderData=null,!0}onLinesChanged(e,t){return this._lastRenderData?this._lastRenderData.onLinesChanged(e,t):!1}onLinesDeleted(e,t){var i;return(i=this._lastRenderData)===null||i===void 0||i.onLinesDeleted(e,t),!0}onLinesInserted(e,t){var i;return(i=this._lastRenderData)===null||i===void 0||i.onLinesInserted(e,t),!0}onScrollChanged(){return this._renderDecorations=!0,!0}onThemeChanged(){return this._selectionColor=this._theme.getColor(HZ),this._renderDecorations=!0,!0}onTokensChanged(e){return this._lastRenderData?this._lastRenderData.onTokensChanged(e):!1}onTokensColorsChanged(){return this._lastRenderData=null,this._buffers=null,!0}onZonesChanged(){return this._lastRenderData=null,!0}render(e){if(this._model.options.renderMinimap===0){this._shadow.setClassName("minimap-shadow-hidden"),this._sliderHorizontal.setWidth(0),this._sliderHorizontal.setHeight(0);return}e.scrollLeft+e.viewportWidth>=e.scrollWidth?this._shadow.setClassName("minimap-shadow-hidden"):this._shadow.setClassName("minimap-shadow-visible");const i=wL.create(this._model.options,e.viewportStartLineNumber,e.viewportEndLineNumber,e.viewportStartLineNumberVerticalOffset,e.viewportHeight,e.viewportContainsWhitespaceGaps,this._model.getLineCount(),this._model.getRealLineCount(),e.scrollTop,e.scrollHeight,this._lastRenderData?this._lastRenderData.renderedLayout:null);this._slider.setDisplay(i.sliderNeeded?"block":"none"),this._slider.setTop(i.sliderTop),this._slider.setHeight(i.sliderHeight),this._sliderHorizontal.setLeft(0),this._sliderHorizontal.setWidth(this._model.options.minimapWidth),this._sliderHorizontal.setTop(0),this._sliderHorizontal.setHeight(i.sliderHeight),this.renderDecorations(i),this._lastRenderData=this.renderLines(i)}renderDecorations(e){if(this._renderDecorations){this._renderDecorations=!1;const t=this._model.getSelections();t.sort(A.compareRangesUsingStarts);const i=this._model.getMinimapDecorationsInViewport(e.startLineNumber,e.endLineNumber);i.sort((g,p)=>(g.options.zIndex||0)-(p.options.zIndex||0));const{canvasInnerWidth:n,canvasInnerHeight:s}=this._model.options,r=this._model.options.minimapLineHeight,a=this._model.options.minimapCharWidth,l=this._model.getOptions().tabSize,c=this._decorationsCanvas.domNode.getContext("2d");c.clearRect(0,0,n,s);const u=new aQ(e.startLineNumber,e.endLineNumber,!1);this._renderSelectionLineHighlights(c,t,u,e,r),this._renderDecorationsLineHighlights(c,i,u,e,r);const f=new aQ(e.startLineNumber,e.endLineNumber,null);this._renderSelectionsHighlights(c,t,f,e,r,l,a,n),this._renderDecorationsHighlights(c,i,f,e,r,l,a,n),this._renderSectionHeaders(e)}}_renderSelectionLineHighlights(e,t,i,n,s){if(!this._selectionColor||this._selectionColor.isTransparent())return;e.fillStyle=this._selectionColor.transparent(.5).toString();let r=0,a=0;for(const l of t){const c=n.intersectWithViewport(l);if(!c)continue;const[u,f]=c;for(let _=u;_<=f;_++)i.set(_,!0);const g=n.getYForLineNumber(u,s),p=n.getYForLineNumber(f,s);a>=g||(a>r&&e.fillRect(Iu,r,e.canvas.width,a-r),r=g),a=p}a>r&&e.fillRect(Iu,r,e.canvas.width,a-r)}_renderDecorationsLineHighlights(e,t,i,n,s){const r=new Map;for(let a=t.length-1;a>=0;a--){const l=t[a],c=l.options.minimap;if(!c||c.position!==1)continue;const u=n.intersectWithViewport(l.range);if(!u)continue;const[f,g]=u,p=c.getColor(this._theme.value);if(!p||p.isTransparent())continue;let _=r.get(p.toString());_||(_=p.transparent(.5).toString(),r.set(p.toString(),_)),e.fillStyle=_;for(let b=f;b<=g;b++){if(i.has(b))continue;i.set(b,!0);const y=n.getYForLineNumber(f,s);e.fillRect(Iu,y,e.canvas.width,s)}}}_renderSelectionsHighlights(e,t,i,n,s,r,a,l){if(!(!this._selectionColor||this._selectionColor.isTransparent()))for(const c of t){const u=n.intersectWithViewport(c);if(!u)continue;const[f,g]=u;for(let p=f;p<=g;p++)this.renderDecorationOnLine(e,i,c,this._selectionColor,n,p,s,s,r,a,l)}}_renderDecorationsHighlights(e,t,i,n,s,r,a,l){for(const c of t){const u=c.options.minimap;if(!u)continue;const f=n.intersectWithViewport(c.range);if(!f)continue;const[g,p]=f,_=u.getColor(this._theme.value);if(!(!_||_.isTransparent()))for(let b=g;b<=p;b++)switch(u.position){case 1:this.renderDecorationOnLine(e,i,c.range,_,n,b,s,s,r,a,l);continue;case 2:{const y=n.getYForLineNumber(b,s);this.renderDecoration(e,_,2,y,gEe,s);continue}}}}renderDecorationOnLine(e,t,i,n,s,r,a,l,c,u,f){const g=s.getYForLineNumber(r,l);if(g+a<0||g>this._model.options.canvasInnerHeight)return;const{startLineNumber:p,endLineNumber:_}=i,b=p===r?i.startColumn:1,y=_===r?i.endColumn:this._model.getLineMaxColumn(r),S=this.getXOffsetForPosition(t,r,b,c,u,f),L=this.getXOffsetForPosition(t,r,y,c,u,f);this.renderDecoration(e,n,S,g,L-S,a)}getXOffsetForPosition(e,t,i,n,s,r){if(i===1)return Iu;if((i-1)*s>=r)return r;let l=e.get(t);if(!l){const c=this._model.getLineContent(t);l=[Iu];let u=Iu;for(let f=1;f<c.length+1;f++){const g=c.charCodeAt(f-1),p=g===9?n*s:lm(g)?2*s:s,_=u+p;if(_>=r){l[f]=r;break}l[f]=_,u=_}e.set(t,l)}return i-1<l.length?l[i-1]:r}renderDecoration(e,t,i,n,s,r){e.fillStyle=t&&t.toString()||"",e.fillRect(i,n,s,r)}_renderSectionHeaders(e){var t;const i=this._model.options.minimapLineHeight,n=this._model.options.sectionHeaderFontSize,s=n*1.5,{canvasInnerWidth:r}=this._model.options,a=this._model.options.backgroundColor,l=`rgb(${a.r} ${a.g} ${a.b} / .7)`,c=this._model.options.sectionHeaderFontColor,u=`rgb(${c.r} ${c.g} ${c.b})`,f=u,g=this._decorationsCanvas.domNode.getContext("2d");g.font=n+"px "+this._model.options.sectionHeaderFontFamily,g.strokeStyle=f,g.lineWidth=.2;const p=this._model.getSectionHeaderDecorationsInViewport(e.startLineNumber,e.endLineNumber);p.sort((b,y)=>b.range.startLineNumber-y.range.startLineNumber);const _=dC._fitSectionHeader.bind(null,g,r-Iu);for(const b of p){const y=e.getYForLineNumber(b.range.startLineNumber,i)+n,S=y-n,L=S+2,x=this._model.getSectionHeaderText(b,_);dC._renderSectionLabel(g,x,((t=b.options.minimap)===null||t===void 0?void 0:t.sectionHeaderStyle)===2,l,u,r,S,s,y,L)}}static _fitSectionHeader(e,t,i){if(!i)return i;const n="",s=e.measureText(i).width,r=e.measureText(n).width;if(s<=t||s<=r)return i;const a=i.length,l=s/i.length,c=Math.floor((t-r)/l)-1;let u=Math.ceil(c/2);for(;u>0&&/\s/.test(i[u-1]);)--u;return i.substring(0,u)+n+i.substring(a-(c-u))}static _renderSectionLabel(e,t,i,n,s,r,a,l,c,u){t&&(e.fillStyle=n,e.fillRect(0,a,r,l),e.fillStyle=s,e.fillText(t,Iu,c)),i&&(e.beginPath(),e.moveTo(0,u),e.lineTo(r,u),e.closePath(),e.stroke())}renderLines(e){const t=e.startLineNumber,i=e.endLineNumber,n=this._model.options.minimapLineHeight;if(this._lastRenderData&&this._lastRenderData.linesEquals(e)){const fe=this._lastRenderData._get();return new rQ(e,fe.imageData,fe.lines)}const s=this._getBuffer();if(!s)return null;const[r,a,l]=dC._renderUntouchedLines(s,e.topPaddingLineCount,t,i,n,this._lastRenderData),c=this._model.getMinimapLinesRenderingData(t,i,l),u=this._model.getOptions().tabSize,f=this._model.options.defaultBackgroundColor,g=this._model.options.backgroundColor,p=this._model.options.foregroundAlpha,_=this._model.tokensColorTracker,b=_.backgroundIsLight(),y=this._model.options.renderMinimap,S=this._model.options.charRenderer(),L=this._model.options.fontScale,x=this._model.options.minimapCharWidth,E=(y===1?2:3)*L,N=n>E?Math.floor((n-E)/2):0,M=g.a/255,F=new bl(Math.round((g.r-f.r)*M+f.r),Math.round((g.g-f.g)*M+f.g),Math.round((g.b-f.b)*M+f.b),255);let H=e.topPaddingLineCount*n;const Q=[];for(let fe=0,Ae=i-t+1;fe<Ae;fe++)l[fe]&&dC._renderLine(s,F,g.a,b,y,x,_,p,S,H,N,u,c[fe],L,n),Q[fe]=new PR(H),H+=n;const K=r===-1?0:r,q=(a===-1?s.height:a)-K;return this._canvas.domNode.getContext("2d").putImageData(s,0,0,0,K,s.width,q),new rQ(e,s,Q)}static _renderUntouchedLines(e,t,i,n,s,r){const a=[];if(!r){for(let H=0,Q=n-i+1;H<Q;H++)a[H]=!0;return[-1,-1,a]}const l=r._get(),c=l.imageData.data,u=l.rendLineNumberStart,f=l.lines,g=f.length,p=e.width,_=e.data,b=(n-i+1)*s*p*4;let y=-1,S=-1,L=-1,x=-1,D=-1,E=-1,N=t*s;for(let H=i;H<=n;H++){const Q=H-i,K=H-u,j=K>=0&&K<g?f[K].dy:-1;if(j===-1){a[Q]=!0,N+=s;continue}const q=j*p*4,se=(j+s)*p*4,fe=N*p*4,Ae=(N+s)*p*4;x===q&&E===fe?(x=se,E=Ae):(L!==-1&&(_.set(c.subarray(L,x),D),y===-1&&L===0&&L===D&&(y=x),S===-1&&x===b&&L===D&&(S=L)),L=q,x=se,D=fe,E=Ae),a[Q]=!1,N+=s}L!==-1&&(_.set(c.subarray(L,x),D),y===-1&&L===0&&L===D&&(y=x),S===-1&&x===b&&L===D&&(S=L));const M=y===-1?-1:y/(p*4),F=S===-1?-1:S/(p*4);return[M,F,a]}static _renderLine(e,t,i,n,s,r,a,l,c,u,f,g,p,_,b){const y=p.content,S=p.tokens,L=e.width-r,x=b===1;let D=Iu,E=0,N=0;for(let M=0,F=S.getCount();M<F;M++){const H=S.getEndOffset(M),Q=S.getForeground(M),K=a.getColor(Q);for(;E<H;E++){if(D>L)return;const j=y.charCodeAt(E);if(j===9){const q=g-(E+N)%g;N+=q-1,D+=q*r}else if(j===32)D+=r;else{const q=lm(j)?2:1;for(let se=0;se<q;se++)if(s===2?c.blockRenderChar(e,D,u+f,K,l,t,i,x):c.renderChar(e,D,u+f,j,K,l,t,i,_,n,x),D+=r,D>L)return}}}}}class aQ{constructor(e,t,i){this._startLineNumber=e,this._endLineNumber=t,this._defaultValue=i,this._values=[];for(let n=0,s=this._endLineNumber-this._startLineNumber+1;n<s;n++)this._values[n]=i}has(e){return this.get(e)!==this._defaultValue}set(e,t){e<this._startLineNumber||e>this._endLineNumber||(this._values[e-this._startLineNumber]=t)}get(e){return e<this._startLineNumber||e>this._endLineNumber?this._defaultValue:this._values[e-this._startLineNumber]}}class mEe extends Ga{constructor(e,t){super(e),this._viewDomNode=t;const n=this._context.configuration.options.get(145);this._widgets={},this._verticalScrollbarWidth=n.verticalScrollbarWidth,this._minimapWidth=n.minimap.minimapWidth,this._horizontalScrollbarHeight=n.horizontalScrollbarHeight,this._editorHeight=n.height,this._editorWidth=n.width,this._viewDomNodeRect={top:0,left:0,width:0,height:0},this._domNode=ki(document.createElement("div")),qd.write(this._domNode,4),this._domNode.setClassName("overlayWidgets"),this.overflowingOverlayWidgetsDomNode=ki(document.createElement("div")),qd.write(this.overflowingOverlayWidgetsDomNode,5),this.overflowingOverlayWidgetsDomNode.setClassName("overflowingOverlayWidgets")}dispose(){super.dispose(),this._widgets={}}getDomNode(){return this._domNode}onConfigurationChanged(e){const i=this._context.configuration.options.get(145);return this._verticalScrollbarWidth=i.verticalScrollbarWidth,this._minimapWidth=i.minimap.minimapWidth,this._horizontalScrollbarHeight=i.horizontalScrollbarHeight,this._editorHeight=i.height,this._editorWidth=i.width,!0}addWidget(e){const t=ki(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:null,domNode:t},t.setPosition("absolute"),t.setAttribute("widgetId",e.getId()),e.allowEditorOverflow?this.overflowingOverlayWidgetsDomNode.appendChild(t):this._domNode.appendChild(t),this.setShouldRender(),this._updateMaxMinWidth()}setWidgetPosition(e,t){const i=this._widgets[e.getId()];return i.preference===t?(this._updateMaxMinWidth(),!1):(i.preference=t,this.setShouldRender(),this._updateMaxMinWidth(),!0)}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const n=this._widgets[t].domNode.domNode;delete this._widgets[t],n.remove(),this.setShouldRender(),this._updateMaxMinWidth()}}_updateMaxMinWidth(){var e,t;let i=0;const n=Object.keys(this._widgets);for(let s=0,r=n.length;s<r;s++){const a=n[s],c=(t=(e=this._widgets[a].widget).getMinContentWidthInPx)===null||t===void 0?void 0:t.call(e);typeof c<"u"&&(i=Math.max(i,c))}this._context.viewLayout.setOverlayWidgetsMinWidth(i)}_renderWidget(e){const t=e.domNode;if(e.preference===null){t.setTop("");return}if(e.preference===0)t.setTop(0),t.setRight(2*this._verticalScrollbarWidth+this._minimapWidth);else if(e.preference===1){const i=t.domNode.clientHeight;t.setTop(this._editorHeight-i-2*this._horizontalScrollbarHeight),t.setRight(2*this._verticalScrollbarWidth+this._minimapWidth)}else if(e.preference===2)t.setTop(0),t.domNode.style.right="50%";else{const{top:i,left:n}=e.preference;if(this._context.configuration.options.get(42)&&e.widget.allowEditorOverflow){const r=this._viewDomNodeRect;t.setTop(i+r.top),t.setLeft(n+r.left),t.setPosition("fixed")}else t.setTop(i),t.setLeft(n),t.setPosition("absolute")}}prepareRender(e){this._viewDomNodeRect=ws(this._viewDomNode.domNode)}render(e){this._domNode.setWidth(this._editorWidth);const t=Object.keys(this._widgets);for(let i=0,n=t.length;i<n;i++){const s=t[i];this._renderWidget(this._widgets[s])}}}class _Ee{constructor(e,t){const i=e.options;this.lineHeight=i.get(67),this.pixelRatio=i.get(143),this.overviewRulerLanes=i.get(83),this.renderBorder=i.get(82);const n=t.getColor(tke);this.borderColor=n?n.toString():null,this.hideCursor=i.get(59);const s=t.getColor(th);this.cursorColorSingle=s?s.transparent(.7).toString():null;const r=t.getColor(Qne);this.cursorColorPrimary=r?r.transparent(.7).toString():null;const a=t.getColor(Xne);this.cursorColorSecondary=a?a.transparent(.7).toString():null,this.themeType=t.type;const l=i.get(73),c=l.enabled,u=l.side,f=t.getColor(ike),g=Qn.getDefaultBackground();f?this.backgroundColor=f:c&&u==="right"?this.backgroundColor=g:this.backgroundColor=null;const _=i.get(145).overviewRuler;this.top=_.top,this.right=_.right,this.domWidth=_.width,this.domHeight=_.height,this.overviewRulerLanes===0?(this.canvasWidth=0,this.canvasHeight=0):(this.canvasWidth=this.domWidth*this.pixelRatio|0,this.canvasHeight=this.domHeight*this.pixelRatio|0);const[b,y]=this._initLanes(1,this.canvasWidth,this.overviewRulerLanes);this.x=b,this.w=y}_initLanes(e,t,i){const n=t-e;if(i>=3){const s=Math.floor(n/3),r=Math.floor(n/3),a=n-s-r,l=e,c=l+s,u=l+s+a;return[[0,l,c,l,u,l,c,l],[0,s,a,s+a,r,s+a+r,a+r,s+a+r]]}else if(i===2){const s=Math.floor(n/2),r=n-s,a=e,l=a+s;return[[0,a,a,a,l,a,a,a],[0,s,s,s,r,s+r,s+r,s+r]]}else{const s=e,r=n;return[[0,s,s,s,s,s,s,s],[0,r,r,r,r,r,r,r]]}}equals(e){return this.lineHeight===e.lineHeight&&this.pixelRatio===e.pixelRatio&&this.overviewRulerLanes===e.overviewRulerLanes&&this.renderBorder===e.renderBorder&&this.borderColor===e.borderColor&&this.hideCursor===e.hideCursor&&this.cursorColorSingle===e.cursorColorSingle&&this.cursorColorPrimary===e.cursorColorPrimary&&this.cursorColorSecondary===e.cursorColorSecondary&&this.themeType===e.themeType&&ne.equals(this.backgroundColor,e.backgroundColor)&&this.top===e.top&&this.right===e.right&&this.domWidth===e.domWidth&&this.domHeight===e.domHeight&&this.canvasWidth===e.canvasWidth&&this.canvasHeight===e.canvasHeight}}class vEe extends Ga{constructor(e){super(e),this._actualShouldRender=0,this._renderedDecorations=[],this._renderedCursorPositions=[],this._domNode=ki(document.createElement("canvas")),this._domNode.setClassName("decorationsOverviewRuler"),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._domNode.setAttribute("aria-hidden","true"),this._updateSettings(!1),this._tokensColorTrackerListener=Qn.onDidChange(t=>{t.changedColorMap&&this._updateSettings(!0)}),this._cursorPositions=[{position:new Z(1,1),color:this._settings.cursorColorSingle}]}dispose(){super.dispose(),this._tokensColorTrackerListener.dispose()}_updateSettings(e){const t=new _Ee(this._context.configuration,this._context.theme);return this._settings&&this._settings.equals(t)?!1:(this._settings=t,this._domNode.setTop(this._settings.top),this._domNode.setRight(this._settings.right),this._domNode.setWidth(this._settings.domWidth),this._domNode.setHeight(this._settings.domHeight),this._domNode.domNode.width=this._settings.canvasWidth,this._domNode.domNode.height=this._settings.canvasHeight,e&&this._render(),!0)}_markRenderingIsNeeded(){return this._actualShouldRender=2,!0}_markRenderingIsMaybeNeeded(){return this._actualShouldRender=1,!0}onConfigurationChanged(e){return this._updateSettings(!1)?this._markRenderingIsNeeded():!1}onCursorStateChanged(e){this._cursorPositions=[];for(let t=0,i=e.selections.length;t<i;t++){let n=this._settings.cursorColorSingle;i>1&&(n=t===0?this._settings.cursorColorPrimary:this._settings.cursorColorSecondary),this._cursorPositions.push({position:e.selections[t].getPosition(),color:n})}return this._cursorPositions.sort((t,i)=>Z.compare(t.position,i.position)),this._markRenderingIsMaybeNeeded()}onDecorationsChanged(e){return e.affectsOverviewRuler?this._markRenderingIsMaybeNeeded():!1}onFlushed(e){return this._markRenderingIsNeeded()}onScrollChanged(e){return e.scrollHeightChanged?this._markRenderingIsNeeded():!1}onZonesChanged(e){return this._markRenderingIsNeeded()}onThemeChanged(e){return this._updateSettings(!1)?this._markRenderingIsNeeded():!1}getDomNode(){return this._domNode.domNode}prepareRender(e){}render(e){this._render(),this._actualShouldRender=0}_render(){const e=this._settings.backgroundColor;if(this._settings.overviewRulerLanes===0){this._domNode.setBackgroundColor(e?ne.Format.CSS.formatHexA(e):""),this._domNode.setDisplay("none");return}const t=this._context.viewModel.getAllOverviewRulerDecorations(this._context.theme);if(t.sort(ux.compareByRenderingProps),this._actualShouldRender===1&&!ux.equalsArr(this._renderedDecorations,t)&&(this._actualShouldRender=2),this._actualShouldRender===1&&!zn(this._renderedCursorPositions,this._cursorPositions,(_,b)=>_.position.lineNumber===b.position.lineNumber&&_.color===b.color)&&(this._actualShouldRender=2),this._actualShouldRender===1)return;this._renderedDecorations=t,this._renderedCursorPositions=this._cursorPositions,this._domNode.setDisplay("block");const i=this._settings.canvasWidth,n=this._settings.canvasHeight,s=this._settings.lineHeight,r=this._context.viewLayout,a=this._context.viewLayout.getScrollHeight(),l=n/a,c=6*this._settings.pixelRatio|0,u=c/2|0,f=this._domNode.domNode.getContext("2d");e?e.isOpaque()?(f.fillStyle=ne.Format.CSS.formatHexA(e),f.fillRect(0,0,i,n)):(f.clearRect(0,0,i,n),f.fillStyle=ne.Format.CSS.formatHexA(e),f.fillRect(0,0,i,n)):f.clearRect(0,0,i,n);const g=this._settings.x,p=this._settings.w;for(const _ of t){const b=_.color,y=_.data;f.fillStyle=b;let S=0,L=0,x=0;for(let D=0,E=y.length/3;D<E;D++){const N=y[3*D],M=y[3*D+1],F=y[3*D+2];let H=r.getVerticalOffsetForLineNumber(M)*l|0,Q=(r.getVerticalOffsetForLineNumber(F)+s)*l|0;if(Q-H<c){let j=(H+Q)/2|0;j<u?j=u:j+u>n&&(j=n-u),H=j-u,Q=j+u}H>x+1||N!==S?(D!==0&&f.fillRect(g[S],L,p[S],x-L),S=N,L=H,x=Q):Q>x&&(x=Q)}f.fillRect(g[S],L,p[S],x-L)}if(!this._settings.hideCursor){const _=2*this._settings.pixelRatio|0,b=_/2|0,y=this._settings.x[7],S=this._settings.w[7];let L=-100,x=-100,D=null;for(let E=0,N=this._cursorPositions.length;E<N;E++){const M=this._cursorPositions[E].color;if(!M)continue;const F=this._cursorPositions[E].position;let H=r.getVerticalOffsetForLineNumber(F.lineNumber)*l|0;H<b?H=b:H+b>n&&(H=n-b);const Q=H-b,K=Q+_;Q>x+1||M!==D?(E!==0&&D&&f.fillRect(y,L,S,x-L),L=Q,x=K):K>x&&(x=K),D=M,f.fillStyle=M}D&&f.fillRect(y,L,S,x-L)}this._settings.renderBorder&&this._settings.borderColor&&this._settings.overviewRulerLanes>0&&(f.beginPath(),f.lineWidth=1,f.strokeStyle=this._settings.borderColor,f.moveTo(0,0),f.lineTo(0,n),f.stroke(),f.moveTo(0,0),f.lineTo(i,0),f.stroke())}}class lQ{constructor(e,t,i){this._colorZoneBrand=void 0,this.from=e|0,this.to=t|0,this.colorId=i|0}static compare(e,t){return e.colorId===t.colorId?e.from===t.from?e.to-t.to:e.from-t.from:e.colorId-t.colorId}}class mse{constructor(e,t,i,n){this._overviewRulerZoneBrand=void 0,this.startLineNumber=e,this.endLineNumber=t,this.heightInLines=i,this.color=n,this._colorZone=null}static compare(e,t){return e.color===t.color?e.startLineNumber===t.startLineNumber?e.heightInLines===t.heightInLines?e.endLineNumber-t.endLineNumber:e.heightInLines-t.heightInLines:e.startLineNumber-t.startLineNumber:e.color<t.color?-1:1}setColorZone(e){this._colorZone=e}getColorZones(){return this._colorZone}}class bEe{constructor(e){this._getVerticalOffsetForLine=e,this._zones=[],this._colorZonesInvalid=!1,this._lineHeight=0,this._domWidth=0,this._domHeight=0,this._outerHeight=0,this._pixelRatio=1,this._lastAssignedId=0,this._color2Id=Object.create(null),this._id2Color=[]}getId2Color(){return this._id2Color}setZones(e){this._zones=e,this._zones.sort(mse.compare)}setLineHeight(e){return this._lineHeight===e?!1:(this._lineHeight=e,this._colorZonesInvalid=!0,!0)}setPixelRatio(e){this._pixelRatio=e,this._colorZonesInvalid=!0}getDOMWidth(){return this._domWidth}getCanvasWidth(){return this._domWidth*this._pixelRatio}setDOMWidth(e){return this._domWidth===e?!1:(this._domWidth=e,this._colorZonesInvalid=!0,!0)}getDOMHeight(){return this._domHeight}getCanvasHeight(){return this._domHeight*this._pixelRatio}setDOMHeight(e){return this._domHeight===e?!1:(this._domHeight=e,this._colorZonesInvalid=!0,!0)}getOuterHeight(){return this._outerHeight}setOuterHeight(e){return this._outerHeight===e?!1:(this._outerHeight=e,this._colorZonesInvalid=!0,!0)}resolveColorZones(){const e=this._colorZonesInvalid,t=Math.floor(this._lineHeight),i=Math.floor(this.getCanvasHeight()),n=Math.floor(this._outerHeight),s=i/n,r=Math.floor(4*this._pixelRatio/2),a=[];for(let l=0,c=this._zones.length;l<c;l++){const u=this._zones[l];if(!e){const D=u.getColorZones();if(D){a.push(D);continue}}const f=this._getVerticalOffsetForLine(u.startLineNumber),g=u.heightInLines===0?this._getVerticalOffsetForLine(u.endLineNumber)+t:f+u.heightInLines*t,p=Math.floor(s*f),_=Math.floor(s*g);let b=Math.floor((p+_)/2),y=_-b;y<r&&(y=r),b-y<0&&(b=y),b+y>i&&(b=i-y);const S=u.color;let L=this._color2Id[S];L||(L=++this._lastAssignedId,this._color2Id[S]=L,this._id2Color[L]=S);const x=new lQ(b-y,b+y,L);u.setColorZone(x),a.push(x)}return this._colorZonesInvalid=!1,a.sort(lQ.compare),a}}class CEe extends jD{constructor(e,t){super(),this._context=e;const i=this._context.configuration.options;this._domNode=ki(document.createElement("canvas")),this._domNode.setClassName(t),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._zoneManager=new bEe(n=>this._context.viewLayout.getVerticalOffsetForLineNumber(n)),this._zoneManager.setDOMWidth(0),this._zoneManager.setDOMHeight(0),this._zoneManager.setOuterHeight(this._context.viewLayout.getScrollHeight()),this._zoneManager.setLineHeight(i.get(67)),this._zoneManager.setPixelRatio(i.get(143)),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return e.hasChanged(67)&&(this._zoneManager.setLineHeight(t.get(67)),this._render()),e.hasChanged(143)&&(this._zoneManager.setPixelRatio(t.get(143)),this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render()),!0}onFlushed(e){return this._render(),!0}onScrollChanged(e){return e.scrollHeightChanged&&(this._zoneManager.setOuterHeight(e.scrollHeight),this._render()),!0}onZonesChanged(e){return this._render(),!0}getDomNode(){return this._domNode.domNode}setLayout(e){this._domNode.setTop(e.top),this._domNode.setRight(e.right);let t=!1;t=this._zoneManager.setDOMWidth(e.width)||t,t=this._zoneManager.setDOMHeight(e.height)||t,t&&(this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render())}setZones(e){this._zoneManager.setZones(e),this._render()}_render(){if(this._zoneManager.getOuterHeight()===0)return!1;const e=this._zoneManager.getCanvasWidth(),t=this._zoneManager.getCanvasHeight(),i=this._zoneManager.resolveColorZones(),n=this._zoneManager.getId2Color(),s=this._domNode.domNode.getContext("2d");return s.clearRect(0,0,e,t),i.length>0&&this._renderOneLane(s,i,n,e),!0}_renderOneLane(e,t,i,n){let s=0,r=0,a=0;for(const l of t){const c=l.colorId,u=l.from,f=l.to;c!==s?(e.fillRect(0,r,n,a-r),s=c,e.fillStyle=i[s],r=u,a=f):a>=u?a=Math.max(a,f):(e.fillRect(0,r,n,a-r),r=u,a=f)}e.fillRect(0,r,n,a-r)}}class wEe extends Ga{constructor(e){super(e),this.domNode=ki(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("view-rulers"),this._renderedRulers=[];const t=this._context.configuration.options;this._rulers=t.get(102),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth}dispose(){super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._rulers=t.get(102),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,!0}onScrollChanged(e){return e.scrollHeightChanged}prepareRender(e){}_ensureRulersCount(){const e=this._renderedRulers.length,t=this._rulers.length;if(e===t)return;if(e<t){const{tabSize:n}=this._context.viewModel.model.getOptions(),s=n;let r=t-e;for(;r>0;){const a=ki(document.createElement("div"));a.setClassName("view-ruler"),a.setWidth(s),this.domNode.appendChild(a),this._renderedRulers.push(a),r--}return}let i=e-t;for(;i>0;){const n=this._renderedRulers.pop();this.domNode.removeChild(n),i--}}render(e){this._ensureRulersCount();for(let t=0,i=this._rulers.length;t<i;t++){const n=this._renderedRulers[t],s=this._rulers[t];n.setBoxShadow(s.color?`1px 0 0 0 ${s.color} inset`:""),n.setHeight(Math.min(e.scrollHeight,1e6)),n.setLeft(s.column*this._typicalHalfwidthCharacterWidth)}}}class yEe extends Ga{constructor(e){super(e),this._scrollTop=0,this._width=0,this._updateWidth(),this._shouldShow=!1;const i=this._context.configuration.options.get(103);this._useShadows=i.useShadows,this._domNode=ki(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true")}dispose(){super.dispose()}_updateShouldShow(){const e=this._useShadows&&this._scrollTop>0;return this._shouldShow!==e?(this._shouldShow=e,!0):!1}getDomNode(){return this._domNode}_updateWidth(){const t=this._context.configuration.options.get(145);t.minimap.renderMinimap===0||t.minimap.minimapWidth>0&&t.minimap.minimapLeft===0?this._width=t.width:this._width=t.width-t.verticalScrollbarWidth}onConfigurationChanged(e){const i=this._context.configuration.options.get(103);return this._useShadows=i.useShadows,this._updateWidth(),this._updateShouldShow(),!0}onScrollChanged(e){return this._scrollTop=e.scrollTop,this._updateShouldShow()}prepareRender(e){}render(e){this._domNode.setWidth(this._width),this._domNode.setClassName(this._shouldShow?"scroll-decoration":"")}}class SEe{constructor(e){this.left=e.left,this.width=e.width,this.startStyle=null,this.endStyle=null}}class LEe{constructor(e,t){this.lineNumber=e,this.ranges=t}}function xEe(o){return new SEe(o)}function DEe(o){return new LEe(o.lineNumber,o.ranges.map(xEe))}class as extends cb{constructor(e){super(),this._previousFrameVisibleRangesWithStyle=[],this._context=e;const t=this._context.configuration.options;this._roundedSelection=t.get(101),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,this._selections=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._roundedSelection=t.get(101),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_visibleRangesHaveGaps(e){for(let t=0,i=e.length;t<i;t++)if(e[t].ranges.length>1)return!0;return!1}_enrichVisibleRangesWithStyle(e,t,i){const n=this._typicalHalfwidthCharacterWidth/4;let s=null,r=null;if(i&&i.length>0&&t.length>0){const a=t[0].lineNumber;if(a===e.startLineNumber)for(let c=0;!s&&c<i.length;c++)i[c].lineNumber===a&&(s=i[c].ranges[0]);const l=t[t.length-1].lineNumber;if(l===e.endLineNumber)for(let c=i.length-1;!r&&c>=0;c--)i[c].lineNumber===l&&(r=i[c].ranges[0]);s&&!s.startStyle&&(s=null),r&&!r.startStyle&&(r=null)}for(let a=0,l=t.length;a<l;a++){const c=t[a].ranges[0],u=c.left,f=c.left+c.width,g={top:0,bottom:0},p={top:0,bottom:0};if(a>0){const _=t[a-1].ranges[0].left,b=t[a-1].ranges[0].left+t[a-1].ranges[0].width;cT(u-_)<n?g.top=2:u>_&&(g.top=1),cT(f-b)<n?p.top=2:_<f&&f<b&&(p.top=1)}else s&&(g.top=s.startStyle.top,p.top=s.endStyle.top);if(a+1<l){const _=t[a+1].ranges[0].left,b=t[a+1].ranges[0].left+t[a+1].ranges[0].width;cT(u-_)<n?g.bottom=2:_<u&&u<b&&(g.bottom=1),cT(f-b)<n?p.bottom=2:f<b&&(p.bottom=1)}else r&&(g.bottom=r.startStyle.bottom,p.bottom=r.endStyle.bottom);c.startStyle=g,c.endStyle=p}}_getVisibleRangesWithStyle(e,t,i){const s=(t.linesVisibleRangesForRange(e,!0)||[]).map(DEe);return!this._visibleRangesHaveGaps(s)&&this._roundedSelection&&this._enrichVisibleRangesWithStyle(t.visibleRange,s,i),s}_createSelectionPiece(e,t,i,n,s){return'<div class="cslr '+i+'" style="top:'+e.toString()+"px;bottom:"+t.toString()+"px;left:"+n.toString()+"px;width:"+s.toString()+'px;"></div>'}_actualRenderOneSelection(e,t,i,n){if(n.length===0)return;const s=!!n[0].ranges[0].startStyle,r=n[0].lineNumber,a=n[n.length-1].lineNumber;for(let l=0,c=n.length;l<c;l++){const u=n[l],f=u.lineNumber,g=f-t,p=i&&f===r?1:0,_=i&&f!==r&&f===a?1:0;let b="",y="";for(let S=0,L=u.ranges.length;S<L;S++){const x=u.ranges[S];if(s){const E=x.startStyle,N=x.endStyle;if(E.top===1||E.bottom===1){b+=this._createSelectionPiece(p,_,as.SELECTION_CLASS_NAME,x.left-as.ROUNDED_PIECE_WIDTH,as.ROUNDED_PIECE_WIDTH);let M=as.EDITOR_BACKGROUND_CLASS_NAME;E.top===1&&(M+=" "+as.SELECTION_TOP_RIGHT),E.bottom===1&&(M+=" "+as.SELECTION_BOTTOM_RIGHT),b+=this._createSelectionPiece(p,_,M,x.left-as.ROUNDED_PIECE_WIDTH,as.ROUNDED_PIECE_WIDTH)}if(N.top===1||N.bottom===1){b+=this._createSelectionPiece(p,_,as.SELECTION_CLASS_NAME,x.left+x.width,as.ROUNDED_PIECE_WIDTH);let M=as.EDITOR_BACKGROUND_CLASS_NAME;N.top===1&&(M+=" "+as.SELECTION_TOP_LEFT),N.bottom===1&&(M+=" "+as.SELECTION_BOTTOM_LEFT),b+=this._createSelectionPiece(p,_,M,x.left+x.width,as.ROUNDED_PIECE_WIDTH)}}let D=as.SELECTION_CLASS_NAME;if(s){const E=x.startStyle,N=x.endStyle;E.top===0&&(D+=" "+as.SELECTION_TOP_LEFT),E.bottom===0&&(D+=" "+as.SELECTION_BOTTOM_LEFT),N.top===0&&(D+=" "+as.SELECTION_TOP_RIGHT),N.bottom===0&&(D+=" "+as.SELECTION_BOTTOM_RIGHT)}y+=this._createSelectionPiece(p,_,D,x.left,x.width)}e[g][0]+=b,e[g][1]+=y}}prepareRender(e){const t=[],i=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber;for(let r=i;r<=n;r++){const a=r-i;t[a]=["",""]}const s=[];for(let r=0,a=this._selections.length;r<a;r++){const l=this._selections[r];if(l.isEmpty()){s[r]=null;continue}const c=this._getVisibleRangesWithStyle(l,e,this._previousFrameVisibleRangesWithStyle[r]);s[r]=c,this._actualRenderOneSelection(t,i,this._selections.length>1,c)}this._previousFrameVisibleRangesWithStyle=s,this._renderResult=t.map(([r,a])=>r+a)}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}as.SELECTION_CLASS_NAME="selected-text";as.SELECTION_TOP_LEFT="top-left-radius";as.SELECTION_BOTTOM_LEFT="bottom-left-radius";as.SELECTION_TOP_RIGHT="top-right-radius";as.SELECTION_BOTTOM_RIGHT="bottom-right-radius";as.EDITOR_BACKGROUND_CLASS_NAME="monaco-editor-background";as.ROUNDED_PIECE_WIDTH=10;_c((o,e)=>{const t=o.getColor(PLe);t&&!t.isTransparent()&&e.addRule(`.monaco-editor .view-line span.inline-selected-text { color: ${t}; }`)});function cT(o){return o<0?-o:o}class cQ{constructor(e,t,i,n,s,r,a){this.top=e,this.left=t,this.paddingLeft=i,this.width=n,this.height=s,this.textContent=r,this.textContentClassName=a}}var Vf;(function(o){o[o.Single=0]="Single",o[o.MultiPrimary=1]="MultiPrimary",o[o.MultiSecondary=2]="MultiSecondary"})(Vf||(Vf={}));class dQ{constructor(e,t){this._context=e;const i=this._context.configuration.options,n=i.get(50);this._cursorStyle=i.get(28),this._lineHeight=i.get(67),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(i.get(31),this._typicalHalfwidthCharacterWidth),this._isVisible=!0,this._domNode=ki(document.createElement("div")),this._domNode.setClassName(`cursor ${TC}`),this._domNode.setHeight(this._lineHeight),this._domNode.setTop(0),this._domNode.setLeft(0),vo(this._domNode,n),this._domNode.setDisplay("none"),this._position=new Z(1,1),this._pluralityClass="",this.setPlurality(t),this._lastRenderedContent="",this._renderData=null}getDomNode(){return this._domNode}getPosition(){return this._position}setPlurality(e){switch(e){default:case Vf.Single:this._pluralityClass="";break;case Vf.MultiPrimary:this._pluralityClass="cursor-primary";break;case Vf.MultiSecondary:this._pluralityClass="cursor-secondary";break}}show(){this._isVisible||(this._domNode.setVisibility("inherit"),this._isVisible=!0)}hide(){this._isVisible&&(this._domNode.setVisibility("hidden"),this._isVisible=!1)}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(50);return this._cursorStyle=t.get(28),this._lineHeight=t.get(67),this._typicalHalfwidthCharacterWidth=i.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(31),this._typicalHalfwidthCharacterWidth),vo(this._domNode,i),!0}onCursorPositionChanged(e,t){return t?this._domNode.domNode.style.transitionProperty="none":this._domNode.domNode.style.transitionProperty="",this._position=e,!0}_getGraphemeAwarePosition(){const{lineNumber:e,column:t}=this._position,i=this._context.viewModel.getLineContent(e),[n,s]=MCe(i,t-1);return[new Z(e,n+1),i.substring(n,s)]}_prepareRender(e){let t="",i="";const[n,s]=this._getGraphemeAwarePosition();if(this._cursorStyle===po.Line||this._cursorStyle===po.LineThin){const g=e.visibleRangeForPosition(n);if(!g||g.outsideRenderedLine)return null;const p=ft(this._domNode.domNode);let _;this._cursorStyle===po.Line?(_=RY(p,this._lineCursorWidth>0?this._lineCursorWidth:2),_>2&&(t=s,i=this._getTokenClassName(n))):_=RY(p,1);let b=g.left,y=0;_>=2&&b>=1&&(y=1,b-=y);const S=e.getVerticalOffsetForLineNumber(n.lineNumber)-e.bigNumbersDelta;return new cQ(S,b,y,_,this._lineHeight,t,i)}const r=e.linesVisibleRangesForRange(new A(n.lineNumber,n.column,n.lineNumber,n.column+s.length),!1);if(!r||r.length===0)return null;const a=r[0];if(a.outsideRenderedLine||a.ranges.length===0)return null;const l=a.ranges[0],c=s==="	"?this._typicalHalfwidthCharacterWidth:l.width<1?this._typicalHalfwidthCharacterWidth:l.width;this._cursorStyle===po.Block&&(t=s,i=this._getTokenClassName(n));let u=e.getVerticalOffsetForLineNumber(n.lineNumber)-e.bigNumbersDelta,f=this._lineHeight;return(this._cursorStyle===po.Underline||this._cursorStyle===po.UnderlineThin)&&(u+=this._lineHeight-2,f=2),new cQ(u,l.left,0,c,f,t,i)}_getTokenClassName(e){const t=this._context.viewModel.getViewLineData(e.lineNumber),i=t.tokens.findTokenIndexAtOffset(e.column-1);return t.tokens.getClassName(i)}prepareRender(e){this._renderData=this._prepareRender(e)}render(e){return this._renderData?(this._lastRenderedContent!==this._renderData.textContent&&(this._lastRenderedContent=this._renderData.textContent,this._domNode.domNode.textContent=this._lastRenderedContent),this._domNode.setClassName(`cursor ${this._pluralityClass} ${TC} ${this._renderData.textContentClassName}`),this._domNode.setDisplay("block"),this._domNode.setTop(this._renderData.top),this._domNode.setLeft(this._renderData.left),this._domNode.setPaddingLeft(this._renderData.paddingLeft),this._domNode.setWidth(this._renderData.width),this._domNode.setLineHeight(this._renderData.height),this._domNode.setHeight(this._renderData.height),{domNode:this._domNode.domNode,position:this._position,contentLeft:this._renderData.left,height:this._renderData.height,width:2}):(this._domNode.setDisplay("none"),null)}}class Sx extends Ga{constructor(e){super(e);const t=this._context.configuration.options;this._readOnly=t.get(91),this._cursorBlinking=t.get(26),this._cursorStyle=t.get(28),this._cursorSmoothCaretAnimation=t.get(27),this._selectionIsEmpty=!0,this._isComposingInput=!1,this._isVisible=!1,this._primaryCursor=new dQ(this._context,Vf.Single),this._secondaryCursors=[],this._renderData=[],this._domNode=ki(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._updateDomClassName(),this._domNode.appendChild(this._primaryCursor.getDomNode()),this._startCursorBlinkAnimation=new Yc,this._cursorFlatBlinkInterval=new GV,this._blinkingEnabled=!1,this._editorHasFocus=!1,this._updateBlinking()}dispose(){super.dispose(),this._startCursorBlinkAnimation.dispose(),this._cursorFlatBlinkInterval.dispose()}getDomNode(){return this._domNode}onCompositionStart(e){return this._isComposingInput=!0,this._updateBlinking(),!0}onCompositionEnd(e){return this._isComposingInput=!1,this._updateBlinking(),!0}onConfigurationChanged(e){const t=this._context.configuration.options;this._readOnly=t.get(91),this._cursorBlinking=t.get(26),this._cursorStyle=t.get(28),this._cursorSmoothCaretAnimation=t.get(27),this._updateBlinking(),this._updateDomClassName(),this._primaryCursor.onConfigurationChanged(e);for(let i=0,n=this._secondaryCursors.length;i<n;i++)this._secondaryCursors[i].onConfigurationChanged(e);return!0}_onCursorPositionChanged(e,t,i){const n=this._secondaryCursors.length!==t.length||this._cursorSmoothCaretAnimation==="explicit"&&i!==3;if(this._primaryCursor.setPlurality(t.length?Vf.MultiPrimary:Vf.Single),this._primaryCursor.onCursorPositionChanged(e,n),this._updateBlinking(),this._secondaryCursors.length<t.length){const s=t.length-this._secondaryCursors.length;for(let r=0;r<s;r++){const a=new dQ(this._context,Vf.MultiSecondary);this._domNode.domNode.insertBefore(a.getDomNode().domNode,this._primaryCursor.getDomNode().domNode.nextSibling),this._secondaryCursors.push(a)}}else if(this._secondaryCursors.length>t.length){const s=this._secondaryCursors.length-t.length;for(let r=0;r<s;r++)this._domNode.removeChild(this._secondaryCursors[0].getDomNode()),this._secondaryCursors.splice(0,1)}for(let s=0;s<t.length;s++)this._secondaryCursors[s].onCursorPositionChanged(t[s],n)}onCursorStateChanged(e){const t=[];for(let n=0,s=e.selections.length;n<s;n++)t[n]=e.selections[n].getPosition();this._onCursorPositionChanged(t[0],t.slice(1),e.reason);const i=e.selections[0].isEmpty();return this._selectionIsEmpty!==i&&(this._selectionIsEmpty=i,this._updateDomClassName()),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onFocusChanged(e){return this._editorHasFocus=e.isFocused,this._updateBlinking(),!1}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return!0}onTokensChanged(e){const t=i=>{for(let n=0,s=e.ranges.length;n<s;n++)if(e.ranges[n].fromLineNumber<=i.lineNumber&&i.lineNumber<=e.ranges[n].toLineNumber)return!0;return!1};if(t(this._primaryCursor.getPosition()))return!0;for(const i of this._secondaryCursors)if(t(i.getPosition()))return!0;return!1}onZonesChanged(e){return!0}_getCursorBlinking(){return this._isComposingInput||!this._editorHasFocus?0:this._readOnly?5:this._cursorBlinking}_updateBlinking(){this._startCursorBlinkAnimation.cancel(),this._cursorFlatBlinkInterval.cancel();const e=this._getCursorBlinking(),t=e===0,i=e===5;t?this._hide():this._show(),this._blinkingEnabled=!1,this._updateDomClassName(),!t&&!i&&(e===1?this._cursorFlatBlinkInterval.cancelAndSet(()=>{this._isVisible?this._hide():this._show()},Sx.BLINK_INTERVAL,ft(this._domNode.domNode)):this._startCursorBlinkAnimation.setIfNotSet(()=>{this._blinkingEnabled=!0,this._updateDomClassName()},Sx.BLINK_INTERVAL))}_updateDomClassName(){this._domNode.setClassName(this._getClassName())}_getClassName(){let e="cursors-layer";switch(this._selectionIsEmpty||(e+=" has-selection"),this._cursorStyle){case po.Line:e+=" cursor-line-style";break;case po.Block:e+=" cursor-block-style";break;case po.Underline:e+=" cursor-underline-style";break;case po.LineThin:e+=" cursor-line-thin-style";break;case po.BlockOutline:e+=" cursor-block-outline-style";break;case po.UnderlineThin:e+=" cursor-underline-thin-style";break;default:e+=" cursor-line-style"}if(this._blinkingEnabled)switch(this._getCursorBlinking()){case 1:e+=" cursor-blink";break;case 2:e+=" cursor-smooth";break;case 3:e+=" cursor-phase";break;case 4:e+=" cursor-expand";break;case 5:e+=" cursor-solid";break;default:e+=" cursor-solid"}else e+=" cursor-solid";return(this._cursorSmoothCaretAnimation==="on"||this._cursorSmoothCaretAnimation==="explicit")&&(e+=" cursor-smooth-caret-animation"),e}_show(){this._primaryCursor.show();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].show();this._isVisible=!0}_hide(){this._primaryCursor.hide();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].hide();this._isVisible=!1}prepareRender(e){this._primaryCursor.prepareRender(e);for(let t=0,i=this._secondaryCursors.length;t<i;t++)this._secondaryCursors[t].prepareRender(e)}render(e){const t=[];let i=0;const n=this._primaryCursor.render(e);n&&(t[i++]=n);for(let s=0,r=this._secondaryCursors.length;s<r;s++){const a=this._secondaryCursors[s].render(e);a&&(t[i++]=a)}this._renderData=t}getLastRenderData(){return this._renderData}}Sx.BLINK_INTERVAL=500;_c((o,e)=>{const t=[{class:".cursor",foreground:th,background:Bf},{class:".cursor-primary",foreground:Qne,background:HDe},{class:".cursor-secondary",foreground:Xne,background:zDe}];for(const i of t){const n=o.getColor(i.foreground);if(n){let s=o.getColor(i.background);s||(s=n.opposite()),e.addRule(`.monaco-editor .cursors-layer ${i.class} { background-color: ${n}; border-color: ${n}; color: ${s}; }`),Vd(o.type)&&e.addRule(`.monaco-editor .cursors-layer.has-selection ${i.class} { border-left: 1px solid ${s}; border-right: 1px solid ${s}; }`)}}});const y3=()=>{throw new Error("Invalid change accessor")};class kEe extends Ga{constructor(e){super(e);const t=this._context.configuration.options,i=t.get(145);this._lineHeight=t.get(67),this._contentWidth=i.contentWidth,this._contentLeft=i.contentLeft,this.domNode=ki(document.createElement("div")),this.domNode.setClassName("view-zones"),this.domNode.setPosition("absolute"),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.marginDomNode=ki(document.createElement("div")),this.marginDomNode.setClassName("margin-view-zones"),this.marginDomNode.setPosition("absolute"),this.marginDomNode.setAttribute("role","presentation"),this.marginDomNode.setAttribute("aria-hidden","true"),this._zones={}}dispose(){super.dispose(),this._zones={}}_recomputeWhitespacesProps(){const e=this._context.viewLayout.getWhitespaces(),t=new Map;for(const n of e)t.set(n.id,n);let i=!1;return this._context.viewModel.changeWhitespace(n=>{const s=Object.keys(this._zones);for(let r=0,a=s.length;r<a;r++){const l=s[r],c=this._zones[l],u=this._computeWhitespaceProps(c.delegate);c.isInHiddenArea=u.isInHiddenArea;const f=t.get(l);f&&(f.afterLineNumber!==u.afterViewLineNumber||f.height!==u.heightInPx)&&(n.changeOneWhitespace(l,u.afterViewLineNumber,u.heightInPx),this._safeCallOnComputedHeight(c.delegate,u.heightInPx),i=!0)}}),i}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(145);return this._lineHeight=t.get(67),this._contentWidth=i.contentWidth,this._contentLeft=i.contentLeft,e.hasChanged(67)&&this._recomputeWhitespacesProps(),!0}onLineMappingChanged(e){return this._recomputeWhitespacesProps()}onLinesDeleted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}onLinesInserted(e){return!0}_getZoneOrdinal(e){var t,i;return(i=(t=e.ordinal)!==null&&t!==void 0?t:e.afterColumn)!==null&&i!==void 0?i:1e4}_computeWhitespaceProps(e){if(e.afterLineNumber===0)return{isInHiddenArea:!1,afterViewLineNumber:0,heightInPx:this._heightInPixels(e),minWidthInPx:this._minWidthInPixels(e)};let t;if(typeof e.afterColumn<"u")t=this._context.viewModel.model.validatePosition({lineNumber:e.afterLineNumber,column:e.afterColumn});else{const r=this._context.viewModel.model.validatePosition({lineNumber:e.afterLineNumber,column:1}).lineNumber;t=new Z(r,this._context.viewModel.model.getLineMaxColumn(r))}let i;t.column===this._context.viewModel.model.getLineMaxColumn(t.lineNumber)?i=this._context.viewModel.model.validatePosition({lineNumber:t.lineNumber+1,column:1}):i=this._context.viewModel.model.validatePosition({lineNumber:t.lineNumber,column:t.column+1});const n=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(t,e.afterColumnAffinity,!0),s=e.showInHiddenAreas||this._context.viewModel.coordinatesConverter.modelPositionIsVisible(i);return{isInHiddenArea:!s,afterViewLineNumber:n.lineNumber,heightInPx:s?this._heightInPixels(e):0,minWidthInPx:this._minWidthInPixels(e)}}changeViewZones(e){let t=!1;return this._context.viewModel.changeWhitespace(i=>{const n={addZone:s=>(t=!0,this._addZone(i,s)),removeZone:s=>{s&&(t=this._removeZone(i,s)||t)},layoutZone:s=>{s&&(t=this._layoutZone(i,s)||t)}};EEe(e,n),n.addZone=y3,n.removeZone=y3,n.layoutZone=y3}),t}_addZone(e,t){const i=this._computeWhitespaceProps(t),s={whitespaceId:e.insertWhitespace(i.afterViewLineNumber,this._getZoneOrdinal(t),i.heightInPx,i.minWidthInPx),delegate:t,isInHiddenArea:i.isInHiddenArea,isVisible:!1,domNode:ki(t.domNode),marginDomNode:t.marginDomNode?ki(t.marginDomNode):null};return this._safeCallOnComputedHeight(s.delegate,i.heightInPx),s.domNode.setPosition("absolute"),s.domNode.domNode.style.width="100%",s.domNode.setDisplay("none"),s.domNode.setAttribute("monaco-view-zone",s.whitespaceId),this.domNode.appendChild(s.domNode),s.marginDomNode&&(s.marginDomNode.setPosition("absolute"),s.marginDomNode.domNode.style.width="100%",s.marginDomNode.setDisplay("none"),s.marginDomNode.setAttribute("monaco-view-zone",s.whitespaceId),this.marginDomNode.appendChild(s.marginDomNode)),this._zones[s.whitespaceId]=s,this.setShouldRender(),s.whitespaceId}_removeZone(e,t){if(this._zones.hasOwnProperty(t)){const i=this._zones[t];return delete this._zones[t],e.removeWhitespace(i.whitespaceId),i.domNode.removeAttribute("monaco-visible-view-zone"),i.domNode.removeAttribute("monaco-view-zone"),i.domNode.domNode.parentNode.removeChild(i.domNode.domNode),i.marginDomNode&&(i.marginDomNode.removeAttribute("monaco-visible-view-zone"),i.marginDomNode.removeAttribute("monaco-view-zone"),i.marginDomNode.domNode.parentNode.removeChild(i.marginDomNode.domNode)),this.setShouldRender(),!0}return!1}_layoutZone(e,t){if(this._zones.hasOwnProperty(t)){const i=this._zones[t],n=this._computeWhitespaceProps(i.delegate);return i.isInHiddenArea=n.isInHiddenArea,e.changeOneWhitespace(i.whitespaceId,n.afterViewLineNumber,n.heightInPx),this._safeCallOnComputedHeight(i.delegate,n.heightInPx),this.setShouldRender(),!0}return!1}shouldSuppressMouseDownOnViewZone(e){return this._zones.hasOwnProperty(e)?!!this._zones[e].delegate.suppressMouseDown:!1}_heightInPixels(e){return typeof e.heightInPx=="number"?e.heightInPx:typeof e.heightInLines=="number"?this._lineHeight*e.heightInLines:this._lineHeight}_minWidthInPixels(e){return typeof e.minWidthInPx=="number"?e.minWidthInPx:0}_safeCallOnComputedHeight(e,t){if(typeof e.onComputedHeight=="function")try{e.onComputedHeight(t)}catch(i){Nt(i)}}_safeCallOnDomNodeTop(e,t){if(typeof e.onDomNodeTop=="function")try{e.onDomNodeTop(t)}catch(i){Nt(i)}}prepareRender(e){}render(e){const t=e.viewportData.whitespaceViewportData,i={};let n=!1;for(const r of t)this._zones[r.id].isInHiddenArea||(i[r.id]=r,n=!0);const s=Object.keys(this._zones);for(let r=0,a=s.length;r<a;r++){const l=s[r],c=this._zones[l];let u=0,f=0,g="none";i.hasOwnProperty(l)?(u=i[l].verticalOffset-e.bigNumbersDelta,f=i[l].height,g="block",c.isVisible||(c.domNode.setAttribute("monaco-visible-view-zone","true"),c.isVisible=!0),this._safeCallOnDomNodeTop(c.delegate,e.getScrolledTopFromAbsoluteTop(i[l].verticalOffset))):(c.isVisible&&(c.domNode.removeAttribute("monaco-visible-view-zone"),c.isVisible=!1),this._safeCallOnDomNodeTop(c.delegate,e.getScrolledTopFromAbsoluteTop(-1e6))),c.domNode.setTop(u),c.domNode.setHeight(f),c.domNode.setDisplay(g),c.marginDomNode&&(c.marginDomNode.setTop(u),c.marginDomNode.setHeight(f),c.marginDomNode.setDisplay(g))}n&&(this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth)),this.marginDomNode.setWidth(this._contentLeft))}}function EEe(o,e){try{return o(e)}catch(t){Nt(t)}}class IEe extends cb{constructor(e){super(),this._context=e,this._options=new uQ(this._context.configuration),this._selection=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=new uQ(this._context.configuration);return this._options.equals(t)?e.hasChanged(145):(this._options=t,!0)}onCursorStateChanged(e){return this._selection=e.selections,this._options.renderWhitespace==="selection"}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}prepareRender(e){if(this._options.renderWhitespace==="none"){this._renderResult=null;return}const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber-t+1,s=new Array(n);for(let a=0;a<n;a++)s[a]=!0;const r=this._context.viewModel.getMinimapLinesRenderingData(e.viewportData.startLineNumber,e.viewportData.endLineNumber,s);this._renderResult=[];for(let a=e.viewportData.startLineNumber;a<=e.viewportData.endLineNumber;a++){const l=a-e.viewportData.startLineNumber,c=r.data[l];let u=null;if(this._options.renderWhitespace==="selection"){const f=this._selection;for(const g of f){if(g.endLineNumber<a||g.startLineNumber>a)continue;const p=g.startLineNumber===a?g.startColumn:c.minColumn,_=g.endLineNumber===a?g.endColumn:c.maxColumn;p<_&&(u||(u=[]),u.push(new yne(p-1,_-1)))}}this._renderResult[l]=this._applyRenderWhitespace(e,a,u,c)}}_applyRenderWhitespace(e,t,i,n){if(this._options.renderWhitespace==="selection"&&!i||this._options.renderWhitespace==="trailing"&&n.continuesWithWrappedLine)return"";const s=this._context.theme.getColor(Wf),r=this._options.renderWithSVG,a=n.content,l=this._options.stopRenderingLineAfter===-1?a.length:Math.min(this._options.stopRenderingLineAfter,a.length),c=n.continuesWithWrappedLine,u=n.minColumn-1,f=this._options.renderWhitespace==="boundary",g=this._options.renderWhitespace==="trailing",p=this._options.lineHeight,_=this._options.middotWidth,b=this._options.wsmiddotWidth,y=this._options.spaceWidth,S=Math.abs(b-y),L=Math.abs(_-y),x=S<L?11825:183,D=this._options.canUseHalfwidthRightwardsArrow;let E="",N=!1,M=gr(a),F;M===-1?(N=!0,M=l,F=l):F=Bd(a);let H=0,Q=i&&i[H],K=0;for(let j=u;j<l;j++){const q=a.charCodeAt(j);if(Q&&j>=Q.endOffset&&(H++,Q=i&&i[H]),q!==9&&q!==32||g&&!N&&j<=F)continue;if(f&&j>=M&&j<=F&&q===32){const fe=j-1>=0?a.charCodeAt(j-1):0,Ae=j+1<l?a.charCodeAt(j+1):0;if(fe!==32&&Ae!==32)continue}if(f&&c&&j===l-1){const fe=j-1>=0?a.charCodeAt(j-1):0;if(q===32&&fe!==32&&fe!==9)continue}if(i&&(!Q||Q.startOffset>j||Q.endOffset<=j))continue;const se=e.visibleRangeForPosition(new Z(t,j+1));se&&(r?(K=Math.max(K,se.left),q===9?E+=this._renderArrow(p,y,se.left):E+=`<circle cx="${(se.left+y/2).toFixed(2)}" cy="${(p/2).toFixed(2)}" r="${(y/7).toFixed(2)}" />`):q===9?E+=`<div class="mwh" style="left:${se.left}px;height:${p}px;">${D?"":""}</div>`:E+=`<div class="mwh" style="left:${se.left}px;height:${p}px;">${String.fromCharCode(x)}</div>`)}return r?(K=Math.round(K+y),`<svg style="bottom:0;position:absolute;width:${K}px;height:${p}px" viewBox="0 0 ${K} ${p}" xmlns="http://www.w3.org/2000/svg" fill="${s}">`+E+"</svg>"):E}_renderArrow(e,t,i){const n=t/7,s=t,r=e/2,a=i,l={x:0,y:n/2},c={x:100/125*s,y:l.y},u={x:c.x-.2*c.x,y:c.y+.2*c.x},f={x:u.x+.1*c.x,y:u.y+.1*c.x},g={x:f.x+.35*c.x,y:f.y-.35*c.x},p={x:g.x,y:-g.y},_={x:f.x,y:-f.y},b={x:u.x,y:-u.y},y={x:c.x,y:-c.y},S={x:l.x,y:-l.y};return`<path d="M ${[l,c,u,f,g,p,_,b,y,S].map(D=>`${(a+D.x).toFixed(2)} ${(r+D.y).toFixed(2)}`).join(" L ")}" />`}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}class uQ{constructor(e){const t=e.options,i=t.get(50),n=t.get(38);n==="off"?(this.renderWhitespace="none",this.renderWithSVG=!1):n==="svg"?(this.renderWhitespace=t.get(99),this.renderWithSVG=!0):(this.renderWhitespace=t.get(99),this.renderWithSVG=!1),this.spaceWidth=i.spaceWidth,this.middotWidth=i.middotWidth,this.wsmiddotWidth=i.wsmiddotWidth,this.canUseHalfwidthRightwardsArrow=i.canUseHalfwidthRightwardsArrow,this.lineHeight=t.get(67),this.stopRenderingLineAfter=t.get(117)}equals(e){return this.renderWhitespace===e.renderWhitespace&&this.renderWithSVG===e.renderWithSVG&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter}}class TEe{constructor(e,t,i,n){this.selections=e,this.startLineNumber=t.startLineNumber|0,this.endLineNumber=t.endLineNumber|0,this.relativeVerticalOffset=t.relativeVerticalOffset,this.bigNumbersDelta=t.bigNumbersDelta|0,this.lineHeight=t.lineHeight|0,this.whitespaceViewportData=i,this._model=n,this.visibleRange=new A(t.startLineNumber,this._model.getLineMinColumn(t.startLineNumber),t.endLineNumber,this._model.getLineMaxColumn(t.endLineNumber))}getViewLineRenderingData(e){return this._model.getViewportViewLineRenderingData(this.visibleRange,e)}getDecorationsInViewport(){return this._model.getDecorationsInViewport(this.visibleRange)}}class NEe{get type(){return this._theme.type}get value(){return this._theme}constructor(e){this._theme=e}update(e){this._theme=e}getColor(e){return this._theme.getColor(e)}}class REe{constructor(e,t,i){this.configuration=e,this.theme=new NEe(t),this.viewModel=i,this.viewLayout=i.viewLayout}addEventHandler(e){this.viewModel.addViewEventHandler(e)}removeEventHandler(e){this.viewModel.removeViewEventHandler(e)}}var MEe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},AEe=function(o,e){return function(t,i){e(t,i,o)}};let M9=class extends jD{constructor(e,t,i,n,s,r,a){super(),this._instantiationService=a,this._shouldRecomputeGlyphMarginLanes=!1,this._selections=[new Xe(1,1,1,1)],this._renderAnimationFrame=null;const l=new Vke(t,n,s,e);this._context=new REe(t,i,n),this._context.addEventHandler(this),this._viewParts=[],this._textAreaHandler=this._instantiationService.createInstance(T9,this._context,l,this._createTextAreaHandlerHelper()),this._viewParts.push(this._textAreaHandler),this._linesContent=ki(document.createElement("div")),this._linesContent.setClassName("lines-content monaco-editor-background"),this._linesContent.setPosition("absolute"),this.domNode=ki(document.createElement("div")),this.domNode.setClassName(this._getEditorClassName()),this.domNode.setAttribute("role","code"),this._overflowGuardContainer=ki(document.createElement("div")),qd.write(this._overflowGuardContainer,3),this._overflowGuardContainer.setClassName("overflow-guard"),this._scrollbar=new Zke(this._context,this._linesContent,this.domNode,this._overflowGuardContainer),this._viewParts.push(this._scrollbar),this._viewLines=new qA(this._context,this._linesContent),this._viewZones=new kEe(this._context),this._viewParts.push(this._viewZones);const c=new vEe(this._context);this._viewParts.push(c);const u=new yEe(this._context);this._viewParts.push(u);const f=new zke(this._context);this._viewParts.push(f),f.addDynamicOverlay(new qke(this._context)),f.addDynamicOverlay(new as(this._context)),f.addDynamicOverlay(new sEe(this._context)),f.addDynamicOverlay(new Yke(this._context)),f.addDynamicOverlay(new IEe(this._context));const g=new Uke(this._context);this._viewParts.push(g),g.addDynamicOverlay(new Gke(this._context)),g.addDynamicOverlay(new cEe(this._context)),g.addDynamicOverlay(new lEe(this._context)),g.addDynamicOverlay(new YD(this._context)),this._glyphMarginWidgets=new Jke(this._context),this._viewParts.push(this._glyphMarginWidgets);const p=new Av(this._context);p.getDomNode().appendChild(this._viewZones.marginDomNode),p.getDomNode().appendChild(g.getDomNode()),p.getDomNode().appendChild(this._glyphMarginWidgets.domNode),this._viewParts.push(p),this._contentWidgets=new jke(this._context,this.domNode),this._viewParts.push(this._contentWidgets),this._viewCursors=new Sx(this._context),this._viewParts.push(this._viewCursors),this._overlayWidgets=new mEe(this._context,this.domNode),this._viewParts.push(this._overlayWidgets);const _=new wEe(this._context);this._viewParts.push(_);const b=new $ke(this._context);this._viewParts.push(b);const y=new pEe(this._context);if(this._viewParts.push(y),c){const S=this._scrollbar.getOverviewRulerLayoutInfo();S.parent.insertBefore(c.getDomNode(),S.insertBefore)}this._linesContent.appendChild(f.getDomNode()),this._linesContent.appendChild(_.domNode),this._linesContent.appendChild(this._viewZones.domNode),this._linesContent.appendChild(this._viewLines.getDomNode()),this._linesContent.appendChild(this._contentWidgets.domNode),this._linesContent.appendChild(this._viewCursors.getDomNode()),this._overflowGuardContainer.appendChild(p.getDomNode()),this._overflowGuardContainer.appendChild(this._scrollbar.getDomNode()),this._overflowGuardContainer.appendChild(u.getDomNode()),this._overflowGuardContainer.appendChild(this._textAreaHandler.textArea),this._overflowGuardContainer.appendChild(this._textAreaHandler.textAreaCover),this._overflowGuardContainer.appendChild(this._overlayWidgets.getDomNode()),this._overflowGuardContainer.appendChild(y.getDomNode()),this._overflowGuardContainer.appendChild(b.domNode),this.domNode.appendChild(this._overflowGuardContainer),r?(r.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode.domNode),r.appendChild(this._overlayWidgets.overflowingOverlayWidgetsDomNode.domNode)):(this.domNode.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode),this.domNode.appendChild(this._overlayWidgets.overflowingOverlayWidgetsDomNode)),this._applyLayout(),this._pointerHandler=this._register(new BDe(this._context,l,this._createPointerHandlerHelper()))}_computeGlyphMarginLanes(){const e=this._context.viewModel.model,t=this._context.viewModel.glyphLanes;let i=[],n=0;i=i.concat(e.getAllMarginDecorations().map(s=>{var r,a,l;const c=(a=(r=s.options.glyphMargin)===null||r===void 0?void 0:r.position)!==null&&a!==void 0?a:hh.Center;return n=Math.max(n,s.range.endLineNumber),{range:s.range,lane:c,persist:(l=s.options.glyphMargin)===null||l===void 0?void 0:l.persistLane}})),i=i.concat(this._glyphMarginWidgets.getWidgets().map(s=>{const r=e.validateRange(s.preference.range);return n=Math.max(n,r.endLineNumber),{range:r,lane:s.preference.lane}})),i.sort((s,r)=>A.compareRangesUsingStarts(s.range,r.range)),t.reset(n);for(const s of i)t.push(s.lane,s.range,s.persist);return t}_createPointerHandlerHelper(){return{viewDomNode:this.domNode.domNode,linesContentDomNode:this._linesContent.domNode,viewLinesDomNode:this._viewLines.getDomNode().domNode,focusTextArea:()=>{this.focus()},dispatchTextAreaEvent:e=>{this._textAreaHandler.textArea.domNode.dispatchEvent(e)},getLastRenderData:()=>{const e=this._viewCursors.getLastRenderData()||[],t=this._textAreaHandler.getLastRenderData();return new fDe(e,t)},renderNow:()=>{this.render(!0,!1)},shouldSuppressMouseDownOnViewZone:e=>this._viewZones.shouldSuppressMouseDownOnViewZone(e),shouldSuppressMouseDownOnWidget:e=>this._contentWidgets.shouldSuppressMouseDownOnWidget(e),getPositionFromDOMInfo:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getPositionFromDOMInfo(e,t)),visibleRangeForPosition:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(new Z(e,t))),getLineWidth:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getLineWidth(e))}}_createTextAreaHandlerHelper(){return{visibleRangeForPosition:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(e))}}_applyLayout(){const t=this._context.configuration.options.get(145);this.domNode.setWidth(t.width),this.domNode.setHeight(t.height),this._overflowGuardContainer.setWidth(t.width),this._overflowGuardContainer.setHeight(t.height),this._linesContent.setWidth(16777216),this._linesContent.setHeight(16777216)}_getEditorClassName(){const e=this._textAreaHandler.isFocused()?" focused":"";return this._context.configuration.options.get(142)+" "+I9(this._context.theme.type)+e}handleEvents(e){super.handleEvents(e),this._scheduleRender()}onConfigurationChanged(e){return this.domNode.setClassName(this._getEditorClassName()),this._applyLayout(),!1}onCursorStateChanged(e){return this._selections=e.selections,!1}onDecorationsChanged(e){return e.affectsGlyphMargin&&(this._shouldRecomputeGlyphMarginLanes=!0),!1}onFocusChanged(e){return this.domNode.setClassName(this._getEditorClassName()),!1}onThemeChanged(e){return this._context.theme.update(e.theme),this.domNode.setClassName(this._getEditorClassName()),!1}dispose(){this._renderAnimationFrame!==null&&(this._renderAnimationFrame.dispose(),this._renderAnimationFrame=null),this._contentWidgets.overflowingContentWidgetsDomNode.domNode.remove(),this._context.removeEventHandler(this),this._viewLines.dispose();for(const e of this._viewParts)e.dispose();super.dispose()}_scheduleRender(){if(this._store.isDisposed)throw new pn;if(this._renderAnimationFrame===null){const e=this._createCoordinatedRendering();this._renderAnimationFrame=A9.INSTANCE.scheduleCoordinatedRendering({window:ft(this.domNode.domNode),prepareRenderText:()=>{if(this._store.isDisposed)throw new pn;try{return e.prepareRenderText()}finally{this._renderAnimationFrame=null}},renderText:()=>{if(this._store.isDisposed)throw new pn;return e.renderText()},prepareRender:(t,i)=>{if(this._store.isDisposed)throw new pn;return e.prepareRender(t,i)},render:(t,i)=>{if(this._store.isDisposed)throw new pn;return e.render(t,i)}})}}_flushAccumulatedAndRenderNow(){const e=this._createCoordinatedRendering();Ap(()=>e.prepareRenderText());const t=Ap(()=>e.renderText());if(t){const[i,n]=t;Ap(()=>e.prepareRender(i,n)),Ap(()=>e.render(i,n))}}_getViewPartsToRender(){const e=[];let t=0;for(const i of this._viewParts)i.shouldRender()&&(e[t++]=i);return e}_createCoordinatedRendering(){return{prepareRenderText:()=>{if(this._shouldRecomputeGlyphMarginLanes){this._shouldRecomputeGlyphMarginLanes=!1;const e=this._computeGlyphMarginLanes();this._context.configuration.setGlyphMarginDecorationLaneCount(e.requiredLanes)}Ip.onRenderStart()},renderText:()=>{if(!this.domNode.domNode.isConnected)return null;let e=this._getViewPartsToRender();if(!this._viewLines.shouldRender()&&e.length===0)return null;const t=this._context.viewLayout.getLinesViewportData();this._context.viewModel.setViewport(t.startLineNumber,t.endLineNumber,t.centeredLineNumber);const i=new TEe(this._selections,t,this._context.viewLayout.getWhitespaceViewportData(),this._context.viewModel);return this._contentWidgets.shouldRender()&&this._contentWidgets.onBeforeRender(i),this._viewLines.shouldRender()&&(this._viewLines.renderText(i),this._viewLines.onDidRender(),e=this._getViewPartsToRender()),[e,new rDe(this._context.viewLayout,i,this._viewLines)]},prepareRender:(e,t)=>{for(const i of e)i.prepareRender(t)},render:(e,t)=>{for(const i of e)i.render(t),i.onDidRender()}}}delegateVerticalScrollbarPointerDown(e){this._scrollbar.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){this._scrollbar.delegateScrollFromMouseWheelEvent(e)}restoreState(e){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft},1),this._context.viewModel.visibleLinesStabilized()}getOffsetForColumn(e,t){const i=this._context.viewModel.model.validatePosition({lineNumber:e,column:t}),n=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(i);this._flushAccumulatedAndRenderNow();const s=this._viewLines.visibleRangeForPosition(new Z(n.lineNumber,n.column));return s?s.left:-1}getTargetAtClientPoint(e,t){const i=this._pointerHandler.getTargetAtClientPoint(e,t);return i?jA.convertViewToModelMouseTarget(i,this._context.viewModel.coordinatesConverter):null}createOverviewRuler(e){return new CEe(this._context,e)}change(e){this._viewZones.changeViewZones(e),this._scheduleRender()}render(e,t){if(t){this._viewLines.forceShouldRender();for(const i of this._viewParts)i.forceShouldRender()}e?this._flushAccumulatedAndRenderNow():this._scheduleRender()}writeScreenReaderContent(e){this._textAreaHandler.writeScreenReaderContent(e)}focus(){this._textAreaHandler.focusTextArea()}isFocused(){return this._textAreaHandler.isFocused()}setAriaOptions(e){this._textAreaHandler.setAriaOptions(e)}addContentWidget(e){this._contentWidgets.addWidget(e.widget),this.layoutContentWidget(e),this._scheduleRender()}layoutContentWidget(e){var t,i,n,s,r,a,l,c;this._contentWidgets.setWidgetPosition(e.widget,(i=(t=e.position)===null||t===void 0?void 0:t.position)!==null&&i!==void 0?i:null,(s=(n=e.position)===null||n===void 0?void 0:n.secondaryPosition)!==null&&s!==void 0?s:null,(a=(r=e.position)===null||r===void 0?void 0:r.preference)!==null&&a!==void 0?a:null,(c=(l=e.position)===null||l===void 0?void 0:l.positionAffinity)!==null&&c!==void 0?c:null),this._scheduleRender()}removeContentWidget(e){this._contentWidgets.removeWidget(e.widget),this._scheduleRender()}addOverlayWidget(e){this._overlayWidgets.addWidget(e.widget),this.layoutOverlayWidget(e),this._scheduleRender()}layoutOverlayWidget(e){const t=e.position?e.position.preference:null;this._overlayWidgets.setWidgetPosition(e.widget,t)&&this._scheduleRender()}removeOverlayWidget(e){this._overlayWidgets.removeWidget(e.widget),this._scheduleRender()}addGlyphMarginWidget(e){this._glyphMarginWidgets.addWidget(e.widget),this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender()}layoutGlyphMarginWidget(e){const t=e.position;this._glyphMarginWidgets.setWidgetPosition(e.widget,t)&&(this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender())}removeGlyphMarginWidget(e){this._glyphMarginWidgets.removeWidget(e.widget),this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender()}};M9=MEe([AEe(6,ct)],M9);function Ap(o){try{return o()}catch(e){return Nt(e),null}}class A9{constructor(){this._coordinatedRenderings=[],this._animationFrameRunners=new Map}scheduleCoordinatedRendering(e){return this._coordinatedRenderings.push(e),this._scheduleRender(e.window),{dispose:()=>{const t=this._coordinatedRenderings.indexOf(e);if(t!==-1&&(this._coordinatedRenderings.splice(t,1),this._coordinatedRenderings.length===0)){for(const[i,n]of this._animationFrameRunners)n.dispose();this._animationFrameRunners.clear()}}}}_scheduleRender(e){if(!this._animationFrameRunners.has(e)){const t=()=>{this._animationFrameRunners.delete(e),this._onRenderScheduled()};this._animationFrameRunners.set(e,_R(e,t,100))}}_onRenderScheduled(){const e=this._coordinatedRenderings.slice(0);this._coordinatedRenderings=[];for(const i of e)Ap(()=>i.prepareRenderText());const t=[];for(let i=0,n=e.length;i<n;i++){const s=e[i];t[i]=Ap(()=>s.renderText())}for(let i=0,n=e.length;i<n;i++){const s=e[i],r=t[i];if(!r)continue;const[a,l]=r;Ap(()=>s.prepareRender(a,l))}for(let i=0,n=e.length;i<n;i++){const s=e[i],r=t[i];if(!r)continue;const[a,l]=r;Ap(()=>s.render(a,l))}}}A9.INSTANCE=new A9;class yL{constructor(e,t,i,n,s){this.injectionOffsets=e,this.injectionOptions=t,this.breakOffsets=i,this.breakOffsetsVisibleColumn=n,this.wrappedTextIndentLength=s}getOutputLineCount(){return this.breakOffsets.length}getMinOutputOffset(e){return e>0?this.wrappedTextIndentLength:0}getLineLength(e){const t=e>0?this.breakOffsets[e-1]:0;let n=this.breakOffsets[e]-t;return e>0&&(n+=this.wrappedTextIndentLength),n}getMaxOutputOffset(e){return this.getLineLength(e)}translateToInputOffset(e,t){e>0&&(t=Math.max(0,t-this.wrappedTextIndentLength));let n=e===0?t:this.breakOffsets[e-1]+t;if(this.injectionOffsets!==null)for(let s=0;s<this.injectionOffsets.length&&n>this.injectionOffsets[s];s++)n<this.injectionOffsets[s]+this.injectionOptions[s].content.length?n=this.injectionOffsets[s]:n-=this.injectionOptions[s].content.length;return n}translateToOutputPosition(e,t=2){let i=e;if(this.injectionOffsets!==null)for(let n=0;n<this.injectionOffsets.length&&!(e<this.injectionOffsets[n]||t!==1&&e===this.injectionOffsets[n]);n++)i+=this.injectionOptions[n].content.length;return this.offsetInInputWithInjectionsToOutputPosition(i,t)}offsetInInputWithInjectionsToOutputPosition(e,t=2){let i=0,n=this.breakOffsets.length-1,s=0,r=0;for(;i<=n;){s=i+(n-i)/2|0;const l=this.breakOffsets[s];if(r=s>0?this.breakOffsets[s-1]:0,t===0)if(e<=r)n=s-1;else if(e>l)i=s+1;else break;else if(e<r)n=s-1;else if(e>=l)i=s+1;else break}let a=e-r;return s>0&&(a+=this.wrappedTextIndentLength),new dT(s,a)}normalizeOutputPosition(e,t,i){if(this.injectionOffsets!==null){const n=this.outputPositionToOffsetInInputWithInjections(e,t),s=this.normalizeOffsetInInputWithInjectionsAroundInjections(n,i);if(s!==n)return this.offsetInInputWithInjectionsToOutputPosition(s,i)}if(i===0){if(e>0&&t===this.getMinOutputOffset(e))return new dT(e-1,this.getMaxOutputOffset(e-1))}else if(i===1){const n=this.getOutputLineCount()-1;if(e<n&&t===this.getMaxOutputOffset(e))return new dT(e+1,this.getMinOutputOffset(e+1))}return new dT(e,t)}outputPositionToOffsetInInputWithInjections(e,t){return e>0&&(t=Math.max(0,t-this.wrappedTextIndentLength)),(e>0?this.breakOffsets[e-1]:0)+t}normalizeOffsetInInputWithInjectionsAroundInjections(e,t){const i=this.getInjectedTextAtOffset(e);if(!i)return e;if(t===2){if(e===i.offsetInInputWithInjections+i.length&&hQ(this.injectionOptions[i.injectedTextIndex].cursorStops))return i.offsetInInputWithInjections+i.length;{let n=i.offsetInInputWithInjections;if(fQ(this.injectionOptions[i.injectedTextIndex].cursorStops))return n;let s=i.injectedTextIndex-1;for(;s>=0&&this.injectionOffsets[s]===this.injectionOffsets[i.injectedTextIndex]&&!(hQ(this.injectionOptions[s].cursorStops)||(n-=this.injectionOptions[s].content.length,fQ(this.injectionOptions[s].cursorStops)));)s--;return n}}else if(t===1||t===4){let n=i.offsetInInputWithInjections+i.length,s=i.injectedTextIndex;for(;s+1<this.injectionOffsets.length&&this.injectionOffsets[s+1]===this.injectionOffsets[s];)n+=this.injectionOptions[s+1].content.length,s++;return n}else if(t===0||t===3){let n=i.offsetInInputWithInjections,s=i.injectedTextIndex;for(;s-1>=0&&this.injectionOffsets[s-1]===this.injectionOffsets[s];)n-=this.injectionOptions[s-1].content.length,s--;return n}kA()}getInjectedText(e,t){const i=this.outputPositionToOffsetInInputWithInjections(e,t),n=this.getInjectedTextAtOffset(i);return n?{options:this.injectionOptions[n.injectedTextIndex]}:null}getInjectedTextAtOffset(e){const t=this.injectionOffsets,i=this.injectionOptions;if(t!==null){let n=0;for(let s=0;s<t.length;s++){const r=i[s].content.length,a=t[s]+n,l=t[s]+n+r;if(a>e)break;if(e<=l)return{injectedTextIndex:s,offsetInInputWithInjections:a,length:r};n+=r}}}}function hQ(o){return o==null?!0:o===Vc.Right||o===Vc.Both}function fQ(o){return o==null?!0:o===Vc.Left||o===Vc.Both}class dT{constructor(e,t){this.outputLineIndex=e,this.outputOffset=t}toString(){return`${this.outputLineIndex}:${this.outputOffset}`}toPosition(e){return new Z(e+this.outputLineIndex,this.outputOffset+1)}}class PEe{constructor(){this.changeType=1}}class Gd{static applyInjectedText(e,t){if(!t||t.length===0)return e;let i="",n=0;for(const s of t)i+=e.substring(n,s.column-1),n=s.column-1,i+=s.options.content;return i+=e.substring(n),i}static fromDecorations(e){const t=[];for(const i of e)i.options.before&&i.options.before.content.length>0&&t.push(new Gd(i.ownerId,i.range.startLineNumber,i.range.startColumn,i.options.before,0)),i.options.after&&i.options.after.content.length>0&&t.push(new Gd(i.ownerId,i.range.endLineNumber,i.range.endColumn,i.options.after,1));return t.sort((i,n)=>i.lineNumber===n.lineNumber?i.column===n.column?i.order-n.order:i.column-n.column:i.lineNumber-n.lineNumber),t}constructor(e,t,i,n,s){this.ownerId=e,this.lineNumber=t,this.column=i,this.options=n,this.order=s}}class gQ{constructor(e,t,i){this.changeType=2,this.lineNumber=e,this.detail=t,this.injectedText=i}}class OEe{constructor(e,t){this.changeType=3,this.fromLineNumber=e,this.toLineNumber=t}}class FEe{constructor(e,t,i,n){this.changeType=4,this.injectedTexts=n,this.fromLineNumber=e,this.toLineNumber=t,this.detail=i}}class BEe{constructor(){this.changeType=5}}class AC{constructor(e,t,i,n){this.changes=e,this.versionId=t,this.isUndoing=i,this.isRedoing=n,this.resultingSelection=null}containsEvent(e){for(let t=0,i=this.changes.length;t<i;t++)if(this.changes[t].changeType===e)return!0;return!1}static merge(e,t){const i=[].concat(e.changes).concat(t.changes),n=t.versionId,s=e.isUndoing||t.isUndoing,r=e.isRedoing||t.isRedoing;return new AC(i,n,s,r)}}class _se{constructor(e){this.changes=e}}class _v{constructor(e,t){this.rawContentChangedEvent=e,this.contentChangedEvent=t}merge(e){const t=AC.merge(this.rawContentChangedEvent,e.rawContentChangedEvent),i=_v._mergeChangeEvents(this.contentChangedEvent,e.contentChangedEvent);return new _v(t,i)}static _mergeChangeEvents(e,t){const i=[].concat(e.changes).concat(t.changes),n=t.eol,s=t.versionId,r=e.isUndoing||t.isUndoing,a=e.isRedoing||t.isRedoing,l=e.isFlush||t.isFlush,c=e.isEolChange&&t.isEolChange;return{changes:i,eol:n,isEolChange:c,versionId:s,isUndoing:r,isRedoing:a,isFlush:l}}}const S3=fg("domLineBreaksComputer",{createHTML:o=>o});class IH{static create(e){return new IH(new WeakRef(e))}constructor(e){this.targetWindow=e}createLineBreaksComputer(e,t,i,n,s){const r=[],a=[];return{addRequest:(l,c,u)=>{r.push(l),a.push(c)},finalize:()=>WEe(Dp(this.targetWindow.deref()),r,e,t,i,n,s,a)}}}function WEe(o,e,t,i,n,s,r,a){var l;function c(Q){const K=a[Q];if(K){const j=Gd.applyInjectedText(e[Q],K),q=K.map(fe=>fe.options),se=K.map(fe=>fe.column-1);return new yL(se,q,[j.length],[],0)}else return null}if(n===-1){const Q=[];for(let K=0,j=e.length;K<j;K++)Q[K]=c(K);return Q}const u=Math.round(n*t.typicalHalfwidthCharacterWidth),g=Math.round(i*(s===3?2:s===2?1:0)),p=Math.ceil(t.spaceWidth*g),_=document.createElement("div");vo(_,t);const b=new Y1(1e4),y=[],S=[],L=[],x=[],D=[];for(let Q=0;Q<e.length;Q++){const K=Gd.applyInjectedText(e[Q],a[Q]);let j=0,q=0,se=u;if(s!==0)if(j=gr(K),j===-1)j=0;else{for(let Le=0;Le<j;Le++){const be=K.charCodeAt(Le)===9?i-q%i:1;q+=be}const Ne=Math.ceil(t.spaceWidth*q);Ne+t.typicalFullwidthCharacterWidth>u?(j=0,q=0):se=u-Ne}const fe=K.substr(j),Ae=VEe(fe,q,i,se,b,p);y[Q]=j,S[Q]=q,L[Q]=fe,x[Q]=Ae[0],D[Q]=Ae[1]}const E=b.build(),N=(l=S3==null?void 0:S3.createHTML(E))!==null&&l!==void 0?l:E;_.innerHTML=N,_.style.position="absolute",_.style.top="10000",r==="keepAll"?(_.style.wordBreak="keep-all",_.style.overflowWrap="anywhere"):(_.style.wordBreak="inherit",_.style.overflowWrap="break-word"),o.document.body.appendChild(_);const M=document.createRange(),F=Array.prototype.slice.call(_.children,0),H=[];for(let Q=0;Q<e.length;Q++){const K=F[Q],j=HEe(M,K,L[Q],x[Q]);if(j===null){H[Q]=c(Q);continue}const q=y[Q],se=S[Q]+g,fe=D[Q],Ae=[];for(let ze=0,it=j.length;ze<it;ze++)Ae[ze]=fe[j[ze]];if(q!==0)for(let ze=0,it=j.length;ze<it;ze++)j[ze]+=q;let Ne,Le;const be=a[Q];be?(Ne=be.map(ze=>ze.options),Le=be.map(ze=>ze.column-1)):(Ne=null,Le=null),H[Q]=new yL(Le,Ne,j,Ae,se)}return o.document.body.removeChild(_),H}function VEe(o,e,t,i,n,s){if(s!==0){const g=String(s);n.appendString('<div style="text-indent: -'),n.appendString(g),n.appendString("px; padding-left: "),n.appendString(g),n.appendString("px; box-sizing: border-box; width:")}else n.appendString('<div style="width:');n.appendString(String(i)),n.appendString('px;">');const r=o.length;let a=e,l=0;const c=[],u=[];let f=0<r?o.charCodeAt(0):0;n.appendString("<span>");for(let g=0;g<r;g++){g!==0&&g%16384===0&&n.appendString("</span><span>"),c[g]=l,u[g]=a;const p=f;f=g+1<r?o.charCodeAt(g+1):0;let _=1,b=1;switch(p){case 9:_=t-a%t,b=_;for(let y=1;y<=_;y++)y<_?n.appendCharCode(160):n.appendASCIICharCode(32);break;case 32:f===32?n.appendCharCode(160):n.appendASCIICharCode(32);break;case 60:n.appendString("&lt;");break;case 62:n.appendString("&gt;");break;case 38:n.appendString("&amp;");break;case 0:n.appendString("&#00;");break;case 65279:case 8232:case 8233:case 133:n.appendCharCode(65533);break;default:lm(p)&&b++,p<32?n.appendCharCode(9216+p):n.appendCharCode(p)}l+=_,a+=b}return n.appendString("</span>"),c[o.length]=l,u[o.length]=a,n.appendString("</div>"),[c,u]}function HEe(o,e,t,i){if(t.length<=1)return null;const n=Array.prototype.slice.call(e.children,0),s=[];try{P9(o,n,i,0,null,t.length-1,null,s)}catch(r){return console.log(r),null}return s.length===0?null:(s.push(t.length),s)}function P9(o,e,t,i,n,s,r,a){if(i===s||(n=n||L3(o,e,t[i],t[i+1]),r=r||L3(o,e,t[s],t[s+1]),Math.abs(n[0].top-r[0].top)<=.1))return;if(i+1===s){a.push(s);return}const l=i+(s-i)/2|0,c=L3(o,e,t[l],t[l+1]);P9(o,e,t,i,n,l,c,a),P9(o,e,t,l,c,s,r,a)}function L3(o,e,t,i){return o.setStart(e[t/16384|0].firstChild,t%16384),o.setEnd(e[i/16384|0].firstChild,i%16384),o.getClientRects()}class zEe extends J{constructor(){super(),this._editor=null,this._instantiationService=null,this._instances=this._register(new TV),this._pending=new Map,this._finishedInstantiation=[],this._finishedInstantiation[0]=!1,this._finishedInstantiation[1]=!1,this._finishedInstantiation[2]=!1,this._finishedInstantiation[3]=!1}initialize(e,t,i){this._editor=e,this._instantiationService=i;for(const n of t){if(this._pending.has(n.id)){Nt(new Error(`Cannot have two contributions with the same id ${n.id}`));continue}this._pending.set(n.id,n)}this._instantiateSome(0),this._register(WS(ft(this._editor.getDomNode()),()=>{this._instantiateSome(1)})),this._register(WS(ft(this._editor.getDomNode()),()=>{this._instantiateSome(2)})),this._register(WS(ft(this._editor.getDomNode()),()=>{this._instantiateSome(3)},5e3))}saveViewState(){const e={};for(const[t,i]of this._instances)typeof i.saveViewState=="function"&&(e[t]=i.saveViewState());return e}restoreViewState(e){for(const[t,i]of this._instances)typeof i.restoreViewState=="function"&&i.restoreViewState(e[t])}get(e){return this._instantiateById(e),this._instances.get(e)||null}onBeforeInteractionEvent(){this._instantiateSome(2)}onAfterModelAttached(){var e;return WS(ft((e=this._editor)===null||e===void 0?void 0:e.getDomNode()),()=>{this._instantiateSome(1)},50)}_instantiateSome(e){if(this._finishedInstantiation[e])return;this._finishedInstantiation[e]=!0;const t=this._findPendingContributionsByInstantiation(e);for(const i of t)this._instantiateById(i.id)}_findPendingContributionsByInstantiation(e){const t=[];for(const[,i]of this._pending)i.instantiation===e&&t.push(i);return t}_instantiateById(e){const t=this._pending.get(e);if(t){if(this._pending.delete(e),!this._instantiationService||!this._editor)throw new Error("Cannot instantiate contributions before being initialized!");try{const i=this._instantiationService.createInstance(t.ctor,this._editor);this._instances.set(t.id,i),typeof i.restoreViewState=="function"&&t.instantiation!==0&&console.warn(`Editor contribution '${t.id}' should be eager instantiated because it uses saveViewState / restoreViewState.`)}catch(i){Nt(i)}}}}class vse{constructor(e,t,i,n,s,r,a){this.id=e,this.label=t,this.alias=i,this.metadata=n,this._precondition=s,this._run=r,this._contextKeyService=a}isSupported(){return this._contextKeyService.contextMatchesRules(this._precondition)}run(e){return this.isSupported()?this._run(e):Promise.resolve(void 0)}}function pm(o){let e=0,t=0,i=0,n=0;for(let s=0,r=o.length;s<r;s++){const a=o.charCodeAt(s);a===13?(e===0&&(t=s),e++,s+1<r&&o.charCodeAt(s+1)===10?(n|=2,s++):n|=3,i=s+1):a===10&&(n|=1,e===0&&(t=s),e++,i=s+1)}return e===0&&(t=o.length),[e,t,o.length-i,n]}class pQ{constructor(e,t,i,n){this.range=e,this.nestingLevel=t,this.nestingLevelOfEqualBracketType=i,this.isInvalid=n}}class UEe{constructor(e,t,i,n,s,r){this.range=e,this.openingBracketRange=t,this.closingBracketRange=i,this.nestingLevel=n,this.nestingLevelOfEqualBracketType=s,this.bracketPairNode=r}get openingBracketInfo(){return this.bracketPairNode.openingBracket.bracketInfo}}class $Ee extends UEe{constructor(e,t,i,n,s,r,a){super(e,t,i,n,s,r),this.minVisibleColumnIndentation=a}}class Gc{static ofText(e){let t=0,i=0;for(const n of e)n===`
`?(t++,i=0):i++;return new Gc(t,i)}constructor(e,t){this.lineCount=e,this.columnCount=t}createRange(e){return this.lineCount===0?new A(e.lineNumber,e.column,e.lineNumber,e.column+this.columnCount):new A(e.lineNumber,e.column,e.lineNumber+this.lineCount,this.columnCount+1)}addToPosition(e){return this.lineCount===0?new Z(e.lineNumber,e.column+this.columnCount):new Z(e.lineNumber+this.lineCount,this.columnCount+1)}toString(){return`${this.lineCount},${this.columnCount}`}}Gc.zero=new Gc(0,0);function jEe(o,e,t,i){return o!==t?Cs(t-o,i):Cs(0,i-e)}const zr=0;function OR(o){return o===0}const Cl=2**26;function Cs(o,e){return o*Cl+e}function cc(o){const e=o,t=Math.floor(e/Cl),i=e-t*Cl;return new Gc(t,i)}function KEe(o){return Math.floor(o/Cl)}function Jn(o,e){let t=o+e;return e>=Cl&&(t=t-o%Cl),t}function qEe(o,e){return o.reduce((t,i)=>Jn(t,e(i)),zr)}function bse(o,e){return o===e}function Lx(o,e){const t=o,i=e;if(i-t<=0)return zr;const s=Math.floor(t/Cl),r=Math.floor(i/Cl),a=i-r*Cl;if(s===r){const l=t-s*Cl;return Cs(0,a-l)}else return Cs(r-s,a)}function PC(o,e){return o<e}function OC(o,e){return o<=e}function ZS(o,e){return o>=e}function uC(o){return Cs(o.lineNumber-1,o.column-1)}function vv(o,e){const t=o,i=Math.floor(t/Cl),n=t-i*Cl,s=e,r=Math.floor(s/Cl),a=s-r*Cl;return new A(i+1,n+1,r+1,a+1)}function GEe(o){const e=Sh(o);return Cs(e.length-1,e[e.length-1].length)}class Hf{static fromModelContentChanges(e){return e.map(i=>{const n=A.lift(i.range);return new Hf(uC(n.getStartPosition()),uC(n.getEndPosition()),GEe(i.text))}).reverse()}constructor(e,t,i){this.startOffset=e,this.endOffset=t,this.newLength=i}toString(){return`[${cc(this.startOffset)}...${cc(this.endOffset)}) -> ${cc(this.newLength)}`}}class YEe{constructor(e){this.nextEditIdx=0,this.deltaOldToNewLineCount=0,this.deltaOldToNewColumnCount=0,this.deltaLineIdxInOld=-1,this.edits=e.map(t=>TH.from(t))}getOffsetBeforeChange(e){return this.adjustNextEdit(e),this.translateCurToOld(e)}getDistanceToNextChange(e){this.adjustNextEdit(e);const t=this.edits[this.nextEditIdx],i=t?this.translateOldToCur(t.offsetObj):null;return i===null?null:Lx(e,i)}translateOldToCur(e){return e.lineCount===this.deltaLineIdxInOld?Cs(e.lineCount+this.deltaOldToNewLineCount,e.columnCount+this.deltaOldToNewColumnCount):Cs(e.lineCount+this.deltaOldToNewLineCount,e.columnCount)}translateCurToOld(e){const t=cc(e);return t.lineCount-this.deltaOldToNewLineCount===this.deltaLineIdxInOld?Cs(t.lineCount-this.deltaOldToNewLineCount,t.columnCount-this.deltaOldToNewColumnCount):Cs(t.lineCount-this.deltaOldToNewLineCount,t.columnCount)}adjustNextEdit(e){for(;this.nextEditIdx<this.edits.length;){const t=this.edits[this.nextEditIdx],i=this.translateOldToCur(t.endOffsetAfterObj);if(OC(i,e)){this.nextEditIdx++;const n=cc(i),s=cc(this.translateOldToCur(t.endOffsetBeforeObj)),r=n.lineCount-s.lineCount;this.deltaOldToNewLineCount+=r;const a=this.deltaLineIdxInOld===t.endOffsetBeforeObj.lineCount?this.deltaOldToNewColumnCount:0,l=n.columnCount-s.columnCount;this.deltaOldToNewColumnCount=a+l,this.deltaLineIdxInOld=t.endOffsetBeforeObj.lineCount}else break}}}class TH{static from(e){return new TH(e.startOffset,e.endOffset,e.newLength)}constructor(e,t,i){this.endOffsetBeforeObj=cc(t),this.endOffsetAfterObj=cc(Jn(e,i)),this.offsetObj=cc(e)}}const EN=[];class Ps{static create(e,t){if(e<=128&&t.length===0){let i=Ps.cache[e];return i||(i=new Ps(e,t),Ps.cache[e]=i),i}return new Ps(e,t)}static getEmpty(){return this.empty}constructor(e,t){this.items=e,this.additionalItems=t}add(e,t){const i=t.getKey(e);let n=i>>5;if(n===0){const r=1<<i|this.items;return r===this.items?this:Ps.create(r,this.additionalItems)}n--;const s=this.additionalItems.slice(0);for(;s.length<n;)s.push(0);return s[n]|=1<<(i&31),Ps.create(this.items,s)}merge(e){const t=this.items|e.items;if(this.additionalItems===EN&&e.additionalItems===EN)return t===this.items?this:t===e.items?e:Ps.create(t,EN);const i=[];for(let n=0;n<Math.max(this.additionalItems.length,e.additionalItems.length);n++){const s=this.additionalItems[n]||0,r=e.additionalItems[n]||0;i.push(s|r)}return Ps.create(t,i)}intersects(e){if(this.items&e.items)return!0;for(let t=0;t<Math.min(this.additionalItems.length,e.additionalItems.length);t++)if(this.additionalItems[t]&e.additionalItems[t])return!0;return!1}}Ps.cache=new Array(129);Ps.empty=Ps.create(0,EN);const mQ={getKey(o){return o}};class Cse{constructor(){this.items=new Map}getKey(e){let t=this.items.get(e);return t===void 0&&(t=this.items.size,this.items.set(e,t)),t}}class NH{get length(){return this._length}constructor(e){this._length=e}}class xx extends NH{static create(e,t,i){let n=e.length;return t&&(n=Jn(n,t.length)),i&&(n=Jn(n,i.length)),new xx(n,e,t,i,t?t.missingOpeningBracketIds:Ps.getEmpty())}get kind(){return 2}get listHeight(){return 0}get childrenLength(){return 3}getChild(e){switch(e){case 0:return this.openingBracket;case 1:return this.child;case 2:return this.closingBracket}throw new Error("Invalid child index")}get children(){const e=[];return e.push(this.openingBracket),this.child&&e.push(this.child),this.closingBracket&&e.push(this.closingBracket),e}constructor(e,t,i,n,s){super(e),this.openingBracket=t,this.child=i,this.closingBracket=n,this.missingOpeningBracketIds=s}canBeReused(e){return!(this.closingBracket===null||e.intersects(this.missingOpeningBracketIds))}deepClone(){return new xx(this.length,this.openingBracket.deepClone(),this.child&&this.child.deepClone(),this.closingBracket&&this.closingBracket.deepClone(),this.missingOpeningBracketIds)}computeMinIndentation(e,t){return this.child?this.child.computeMinIndentation(Jn(e,this.openingBracket.length),t):Number.MAX_SAFE_INTEGER}}class gh extends NH{static create23(e,t,i,n=!1){let s=e.length,r=e.missingOpeningBracketIds;if(e.listHeight!==t.listHeight)throw new Error("Invalid list heights");if(s=Jn(s,t.length),r=r.merge(t.missingOpeningBracketIds),i){if(e.listHeight!==i.listHeight)throw new Error("Invalid list heights");s=Jn(s,i.length),r=r.merge(i.missingOpeningBracketIds)}return n?new ZEe(s,e.listHeight+1,e,t,i,r):new Dx(s,e.listHeight+1,e,t,i,r)}static getEmpty(){return new QEe(zr,0,[],Ps.getEmpty())}get kind(){return 4}get missingOpeningBracketIds(){return this._missingOpeningBracketIds}constructor(e,t,i){super(e),this.listHeight=t,this._missingOpeningBracketIds=i,this.cachedMinIndentation=-1}throwIfImmutable(){}makeLastElementMutable(){this.throwIfImmutable();const e=this.childrenLength;if(e===0)return;const t=this.getChild(e-1),i=t.kind===4?t.toMutable():t;return t!==i&&this.setChild(e-1,i),i}makeFirstElementMutable(){if(this.throwIfImmutable(),this.childrenLength===0)return;const t=this.getChild(0),i=t.kind===4?t.toMutable():t;return t!==i&&this.setChild(0,i),i}canBeReused(e){if(e.intersects(this.missingOpeningBracketIds)||this.childrenLength===0)return!1;let t=this;for(;t.kind===4;){const i=t.childrenLength;if(i===0)throw new pn;t=t.getChild(i-1)}return t.canBeReused(e)}handleChildrenChanged(){this.throwIfImmutable();const e=this.childrenLength;let t=this.getChild(0).length,i=this.getChild(0).missingOpeningBracketIds;for(let n=1;n<e;n++){const s=this.getChild(n);t=Jn(t,s.length),i=i.merge(s.missingOpeningBracketIds)}this._length=t,this._missingOpeningBracketIds=i,this.cachedMinIndentation=-1}computeMinIndentation(e,t){if(this.cachedMinIndentation!==-1)return this.cachedMinIndentation;let i=Number.MAX_SAFE_INTEGER,n=e;for(let s=0;s<this.childrenLength;s++){const r=this.getChild(s);r&&(i=Math.min(i,r.computeMinIndentation(n,t)),n=Jn(n,r.length))}return this.cachedMinIndentation=i,i}}class Dx extends gh{get childrenLength(){return this._item3!==null?3:2}getChild(e){switch(e){case 0:return this._item1;case 1:return this._item2;case 2:return this._item3}throw new Error("Invalid child index")}setChild(e,t){switch(e){case 0:this._item1=t;return;case 1:this._item2=t;return;case 2:this._item3=t;return}throw new Error("Invalid child index")}get children(){return this._item3?[this._item1,this._item2,this._item3]:[this._item1,this._item2]}get item1(){return this._item1}get item2(){return this._item2}get item3(){return this._item3}constructor(e,t,i,n,s,r){super(e,t,r),this._item1=i,this._item2=n,this._item3=s}deepClone(){return new Dx(this.length,this.listHeight,this._item1.deepClone(),this._item2.deepClone(),this._item3?this._item3.deepClone():null,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){if(this._item3)throw new Error("Cannot append to a full (2,3) tree node");this.throwIfImmutable(),this._item3=e,this.handleChildrenChanged()}unappendChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item3;return this._item3=null,this.handleChildrenChanged(),e}prependChildOfSameHeight(e){if(this._item3)throw new Error("Cannot prepend to a full (2,3) tree node");this.throwIfImmutable(),this._item3=this._item2,this._item2=this._item1,this._item1=e,this.handleChildrenChanged()}unprependChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item1;return this._item1=this._item2,this._item2=this._item3,this._item3=null,this.handleChildrenChanged(),e}toMutable(){return this}}class ZEe extends Dx{toMutable(){return new Dx(this.length,this.listHeight,this.item1,this.item2,this.item3,this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}class FR extends gh{get childrenLength(){return this._children.length}getChild(e){return this._children[e]}setChild(e,t){this._children[e]=t}get children(){return this._children}constructor(e,t,i,n){super(e,t,n),this._children=i}deepClone(){const e=new Array(this._children.length);for(let t=0;t<this._children.length;t++)e[t]=this._children[t].deepClone();return new FR(this.length,this.listHeight,e,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){this.throwIfImmutable(),this._children.push(e),this.handleChildrenChanged()}unappendChild(){this.throwIfImmutable();const e=this._children.pop();return this.handleChildrenChanged(),e}prependChildOfSameHeight(e){this.throwIfImmutable(),this._children.unshift(e),this.handleChildrenChanged()}unprependChild(){this.throwIfImmutable();const e=this._children.shift();return this.handleChildrenChanged(),e}toMutable(){return this}}class QEe extends FR{toMutable(){return new FR(this.length,this.listHeight,[...this.children],this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}const XEe=[];class RH extends NH{get listHeight(){return 0}get childrenLength(){return 0}getChild(e){return null}get children(){return XEe}deepClone(){return this}}class X_ extends RH{get kind(){return 0}get missingOpeningBracketIds(){return Ps.getEmpty()}canBeReused(e){return!0}computeMinIndentation(e,t){const i=cc(e),n=(i.columnCount===0?i.lineCount:i.lineCount+1)+1,s=KEe(Jn(e,this.length))+1;let r=Number.MAX_SAFE_INTEGER;for(let a=n;a<=s;a++){const l=t.getLineFirstNonWhitespaceColumn(a),c=t.getLineContent(a);if(l===0)continue;const u=Vs.visibleColumnFromColumn(c,l,t.getOptions().tabSize);r=Math.min(r,u)}return r}}class BR extends RH{static create(e,t,i){return new BR(e,t,i)}get kind(){return 1}get missingOpeningBracketIds(){return Ps.getEmpty()}constructor(e,t,i){super(e),this.bracketInfo=t,this.bracketIds=i}get text(){return this.bracketInfo.bracketText}get languageId(){return this.bracketInfo.languageId}canBeReused(e){return!1}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}class JEe extends RH{get kind(){return 3}constructor(e,t){super(t),this.missingOpeningBracketIds=e}canBeReused(e){return!e.intersects(this.missingOpeningBracketIds)}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}let bp=class{constructor(e,t,i,n,s){this.length=e,this.kind=t,this.bracketId=i,this.bracketIds=n,this.astNode=s}};class wse{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.reader=new eIe(this.textModel,this.bracketTokens),this._offset=zr,this.didPeek=!1,this.peeked=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}get offset(){return this._offset}get length(){return Cs(this.textBufferLineCount-1,this.textBufferLastLineLength)}skip(e){this.didPeek=!1,this._offset=Jn(this._offset,e);const t=cc(this._offset);this.reader.setPosition(t.lineCount,t.columnCount)}read(){let e;return this.peeked?(this.didPeek=!1,e=this.peeked):e=this.reader.read(),e&&(this._offset=Jn(this._offset,e.length)),e}peek(){return this.didPeek||(this.peeked=this.reader.read(),this.didPeek=!0),this.peeked}}class eIe{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.lineIdx=0,this.line=null,this.lineCharOffset=0,this.lineTokens=null,this.lineTokenOffset=0,this.peekedToken=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}setPosition(e,t){e===this.lineIdx?(this.lineCharOffset=t,this.line!==null&&(this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset))):(this.lineIdx=e,this.lineCharOffset=t,this.line=null),this.peekedToken=null}read(){if(this.peekedToken){const s=this.peekedToken;return this.peekedToken=null,this.lineCharOffset+=s.length,s}if(this.lineIdx>this.textBufferLineCount-1||this.lineIdx===this.textBufferLineCount-1&&this.lineCharOffset>=this.textBufferLastLineLength)return null;this.line===null&&(this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.line=this.lineTokens.getLineContent(),this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset));const e=this.lineIdx,t=this.lineCharOffset;let i=0;for(;;){const s=this.lineTokens,r=s.getCount();let a=null;if(this.lineTokenOffset<r){const l=s.getMetadata(this.lineTokenOffset);for(;this.lineTokenOffset+1<r&&l===s.getMetadata(this.lineTokenOffset+1);)this.lineTokenOffset++;const c=To.getTokenType(l)===0,u=To.containsBalancedBrackets(l),f=s.getEndOffset(this.lineTokenOffset);if(u&&c&&this.lineCharOffset<f){const g=s.getLanguageId(this.lineTokenOffset),p=this.line.substring(this.lineCharOffset,f),_=this.bracketTokens.getSingleLanguageBracketTokens(g),b=_.regExpGlobal;if(b){b.lastIndex=0;const y=b.exec(p);y&&(a=_.getToken(y[0]),a&&(this.lineCharOffset+=y.index))}}if(i+=f-this.lineCharOffset,a)if(e!==this.lineIdx||t!==this.lineCharOffset){this.peekedToken=a;break}else return this.lineCharOffset+=a.length,a;else this.lineTokenOffset++,this.lineCharOffset=f}else if(this.lineIdx===this.textBufferLineCount-1||(this.lineIdx++,this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.lineTokenOffset=0,this.line=this.lineTokens.getLineContent(),this.lineCharOffset=0,i+=33,i>1e3))break;if(i>1500)break}const n=jEe(e,t,this.lineIdx,this.lineCharOffset);return new bp(n,0,-1,Ps.getEmpty(),new X_(n))}}class tIe{constructor(e,t){this.text=e,this._offset=zr,this.idx=0;const i=t.getRegExpStr(),n=i?new RegExp(i+`|
`,"gi"):null,s=[];let r,a=0,l=0,c=0,u=0;const f=[];for(let _=0;_<60;_++)f.push(new bp(Cs(0,_),0,-1,Ps.getEmpty(),new X_(Cs(0,_))));const g=[];for(let _=0;_<60;_++)g.push(new bp(Cs(1,_),0,-1,Ps.getEmpty(),new X_(Cs(1,_))));if(n)for(n.lastIndex=0;(r=n.exec(e))!==null;){const _=r.index,b=r[0];if(b===`
`)a++,l=_+1;else{if(c!==_){let y;if(u===a){const S=_-c;if(S<f.length)y=f[S];else{const L=Cs(0,S);y=new bp(L,0,-1,Ps.getEmpty(),new X_(L))}}else{const S=a-u,L=_-l;if(S===1&&L<g.length)y=g[L];else{const x=Cs(S,L);y=new bp(x,0,-1,Ps.getEmpty(),new X_(x))}}s.push(y)}s.push(t.getToken(b)),c=_+b.length,u=a}}const p=e.length;if(c!==p){const _=u===a?Cs(0,p-c):Cs(a-u,p-l);s.push(new bp(_,0,-1,Ps.getEmpty(),new X_(_)))}this.length=Cs(a,p-l),this.tokens=s}get offset(){return this._offset}read(){return this.tokens[this.idx++]||null}peek(){return this.tokens[this.idx]||null}skip(e){throw new B0e}}class MH{static createFromLanguage(e,t){function i(s){return t.getKey(`${s.languageId}:::${s.bracketText}`)}const n=new Map;for(const s of e.bracketsNew.openingBrackets){const r=Cs(0,s.bracketText.length),a=i(s),l=Ps.getEmpty().add(a,mQ);n.set(s.bracketText,new bp(r,1,a,l,BR.create(r,s,l)))}for(const s of e.bracketsNew.closingBrackets){const r=Cs(0,s.bracketText.length);let a=Ps.getEmpty();const l=s.getOpeningBrackets();for(const c of l)a=a.add(i(c),mQ);n.set(s.bracketText,new bp(r,2,i(l[0]),a,BR.create(r,s,a)))}return new MH(n)}constructor(e){this.map=e,this.hasRegExp=!1,this._regExpGlobal=null}getRegExpStr(){if(this.isEmpty)return null;{const e=[...this.map.keys()];return e.sort(),e.reverse(),e.map(t=>iIe(t)).join("|")}}get regExpGlobal(){if(!this.hasRegExp){const e=this.getRegExpStr();this._regExpGlobal=e?new RegExp(e,"gi"):null,this.hasRegExp=!0}return this._regExpGlobal}getToken(e){return this.map.get(e.toLowerCase())}findClosingTokenText(e){for(const[t,i]of this.map)if(i.kind===2&&i.bracketIds.intersects(e))return t}get isEmpty(){return this.map.size===0}}function iIe(o){let e=Ll(o);return/^[\w ]+/.test(o)&&(e=`\\b${e}`),/[\w ]+$/.test(o)&&(e=`${e}\\b`),e}class yse{constructor(e,t){this.denseKeyProvider=e,this.getLanguageConfiguration=t,this.languageIdToBracketTokens=new Map}didLanguageChange(e){return this.languageIdToBracketTokens.has(e)}getSingleLanguageBracketTokens(e){let t=this.languageIdToBracketTokens.get(e);return t||(t=MH.createFromLanguage(this.getLanguageConfiguration(e),this.denseKeyProvider),this.languageIdToBracketTokens.set(e,t)),t}}function nIe(o){if(o.length===0)return null;if(o.length===1)return o[0];let e=0;function t(){if(e>=o.length)return null;const r=e,a=o[r].listHeight;for(e++;e<o.length&&o[e].listHeight===a;)e++;return e-r>=2?Sse(r===0&&e===o.length?o:o.slice(r,e),!1):o[r]}let i=t(),n=t();if(!n)return i;for(let r=t();r;r=t())_Q(i,n)<=_Q(n,r)?(i=x3(i,n),n=r):n=x3(n,r);return x3(i,n)}function Sse(o,e=!1){if(o.length===0)return null;if(o.length===1)return o[0];let t=o.length;for(;t>3;){const i=t>>1;for(let n=0;n<i;n++){const s=n<<1;o[n]=gh.create23(o[s],o[s+1],s+3===t?o[s+2]:null,e)}t=i}return gh.create23(o[0],o[1],t>=3?o[2]:null,e)}function _Q(o,e){return Math.abs(o.listHeight-e.listHeight)}function x3(o,e){return o.listHeight===e.listHeight?gh.create23(o,e,null,!1):o.listHeight>e.listHeight?sIe(o,e):oIe(e,o)}function sIe(o,e){o=o.toMutable();let t=o;const i=[];let n;for(;;){if(e.listHeight===t.listHeight){n=e;break}if(t.kind!==4)throw new Error("unexpected");i.push(t),t=t.makeLastElementMutable()}for(let s=i.length-1;s>=0;s--){const r=i[s];n?r.childrenLength>=3?n=gh.create23(r.unappendChild(),n,null,!1):(r.appendChildOfSameHeight(n),n=void 0):r.handleChildrenChanged()}return n?gh.create23(o,n,null,!1):o}function oIe(o,e){o=o.toMutable();let t=o;const i=[];for(;e.listHeight!==t.listHeight;){if(t.kind!==4)throw new Error("unexpected");i.push(t),t=t.makeFirstElementMutable()}let n=e;for(let s=i.length-1;s>=0;s--){const r=i[s];n?r.childrenLength>=3?n=gh.create23(n,r.unprependChild(),null,!1):(r.prependChildOfSameHeight(n),n=void 0):r.handleChildrenChanged()}return n?gh.create23(n,o,null,!1):o}class rIe{constructor(e){this.lastOffset=zr,this.nextNodes=[e],this.offsets=[zr],this.idxs=[]}readLongestNodeAt(e,t){if(PC(e,this.lastOffset))throw new Error("Invalid offset");for(this.lastOffset=e;;){const i=vS(this.nextNodes);if(!i)return;const n=vS(this.offsets);if(PC(e,n))return;if(PC(n,e))if(Jn(n,i.length)<=e)this.nextNodeAfterCurrent();else{const s=D3(i);s!==-1?(this.nextNodes.push(i.getChild(s)),this.offsets.push(n),this.idxs.push(s)):this.nextNodeAfterCurrent()}else{if(t(i))return this.nextNodeAfterCurrent(),i;{const s=D3(i);if(s===-1){this.nextNodeAfterCurrent();return}else this.nextNodes.push(i.getChild(s)),this.offsets.push(n),this.idxs.push(s)}}}}nextNodeAfterCurrent(){for(;;){const e=vS(this.offsets),t=vS(this.nextNodes);if(this.nextNodes.pop(),this.offsets.pop(),this.idxs.length===0)break;const i=vS(this.nextNodes),n=D3(i,this.idxs[this.idxs.length-1]);if(n!==-1){this.nextNodes.push(i.getChild(n)),this.offsets.push(Jn(e,t.length)),this.idxs[this.idxs.length-1]=n;break}else this.idxs.pop()}}}function D3(o,e=-1){for(;;){if(e++,e>=o.childrenLength)return-1;if(o.getChild(e))return e}}function vS(o){return o.length>0?o[o.length-1]:void 0}function O9(o,e,t,i){return new aIe(o,e,t,i).parseDocument()}class aIe{constructor(e,t,i,n){if(this.tokenizer=e,this.createImmutableLists=n,this._itemsConstructed=0,this._itemsFromCache=0,i&&n)throw new Error("Not supported");this.oldNodeReader=i?new rIe(i):void 0,this.positionMapper=new YEe(t)}parseDocument(){this._itemsConstructed=0,this._itemsFromCache=0;let e=this.parseList(Ps.getEmpty(),0);return e||(e=gh.getEmpty()),e}parseList(e,t){const i=[];for(;;){let s=this.tryReadChildFromCache(e);if(!s){const r=this.tokenizer.peek();if(!r||r.kind===2&&r.bracketIds.intersects(e))break;s=this.parseChild(e,t+1)}s.kind===4&&s.childrenLength===0||i.push(s)}return this.oldNodeReader?nIe(i):Sse(i,this.createImmutableLists)}tryReadChildFromCache(e){if(this.oldNodeReader){const t=this.positionMapper.getDistanceToNextChange(this.tokenizer.offset);if(t===null||!OR(t)){const i=this.oldNodeReader.readLongestNodeAt(this.positionMapper.getOffsetBeforeChange(this.tokenizer.offset),n=>t!==null&&!PC(n.length,t)?!1:n.canBeReused(e));if(i)return this._itemsFromCache++,this.tokenizer.skip(i.length),i}}}parseChild(e,t){this._itemsConstructed++;const i=this.tokenizer.read();switch(i.kind){case 2:return new JEe(i.bracketIds,i.length);case 0:return i.astNode;case 1:{if(t>300)return new X_(i.length);const n=e.merge(i.bracketIds),s=this.parseList(n,t+1),r=this.tokenizer.peek();return r&&r.kind===2&&(r.bracketId===i.bracketId||r.bracketIds.intersects(i.bracketIds))?(this.tokenizer.read(),xx.create(i.astNode,s,r.astNode)):xx.create(i.astNode,s,null)}default:throw new Error("unexpected")}}}function WR(o,e){if(o.length===0)return e;if(e.length===0)return o;const t=new tg(vQ(o)),i=vQ(e);i.push({modified:!1,lengthBefore:void 0,lengthAfter:void 0});let n=t.dequeue();function s(c){if(c===void 0){const f=t.takeWhile(g=>!0)||[];return n&&f.unshift(n),f}const u=[];for(;n&&!OR(c);){const[f,g]=n.splitAt(c);u.push(f),c=Lx(f.lengthAfter,c),n=g??t.dequeue()}return OR(c)||u.push(new Pp(!1,c,c)),u}const r=[];function a(c,u,f){if(r.length>0&&bse(r[r.length-1].endOffset,c)){const g=r[r.length-1];r[r.length-1]=new Hf(g.startOffset,u,Jn(g.newLength,f))}else r.push({startOffset:c,endOffset:u,newLength:f})}let l=zr;for(const c of i){const u=s(c.lengthBefore);if(c.modified){const f=qEe(u,p=>p.lengthBefore),g=Jn(l,f);a(l,g,c.lengthAfter),l=g}else for(const f of u){const g=l;l=Jn(l,f.lengthBefore),f.modified&&a(g,l,f.lengthAfter)}}return r}class Pp{constructor(e,t,i){this.modified=e,this.lengthBefore=t,this.lengthAfter=i}splitAt(e){const t=Lx(e,this.lengthAfter);return bse(t,zr)?[this,void 0]:this.modified?[new Pp(this.modified,this.lengthBefore,e),new Pp(this.modified,zr,t)]:[new Pp(this.modified,e,e),new Pp(this.modified,t,t)]}toString(){return`${this.modified?"M":"U"}:${cc(this.lengthBefore)} -> ${cc(this.lengthAfter)}`}}function vQ(o){const e=[];let t=zr;for(const i of o){const n=Lx(t,i.startOffset);OR(n)||e.push(new Pp(!1,n,n));const s=Lx(i.startOffset,i.endOffset);e.push(new Pp(!0,s,i.newLength)),t=i.endOffset}return e}class lIe extends J{didLanguageChange(e){return this.brackets.didLanguageChange(e)}constructor(e,t){if(super(),this.textModel=e,this.getLanguageConfiguration=t,this.didChangeEmitter=new Y,this.denseKeyProvider=new Cse,this.brackets=new yse(this.denseKeyProvider,this.getLanguageConfiguration),this.onDidChange=this.didChangeEmitter.event,this.queuedTextEditsForInitialAstWithoutTokens=[],this.queuedTextEdits=[],e.tokenization.hasTokens)e.tokenization.backgroundTokenizationState===2?(this.initialAstWithoutTokens=void 0,this.astWithTokens=this.parseDocumentFromTextBuffer([],void 0,!1)):(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer([],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens);else{const i=this.brackets.getSingleLanguageBracketTokens(this.textModel.getLanguageId()),n=new tIe(this.textModel.getValue(),i);this.initialAstWithoutTokens=O9(n,[],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens}}handleDidChangeBackgroundTokenizationState(){if(this.textModel.tokenization.backgroundTokenizationState===2){const e=this.initialAstWithoutTokens===void 0;this.initialAstWithoutTokens=void 0,e||this.didChangeEmitter.fire()}}handleDidChangeTokens({ranges:e}){const t=e.map(i=>new Hf(Cs(i.fromLineNumber-1,0),Cs(i.toLineNumber,0),Cs(i.toLineNumber-i.fromLineNumber+1,0)));this.handleEdits(t,!0),this.initialAstWithoutTokens||this.didChangeEmitter.fire()}handleContentChanged(e){const t=Hf.fromModelContentChanges(e.changes);this.handleEdits(t,!1)}handleEdits(e,t){const i=WR(this.queuedTextEdits,e);this.queuedTextEdits=i,this.initialAstWithoutTokens&&!t&&(this.queuedTextEditsForInitialAstWithoutTokens=WR(this.queuedTextEditsForInitialAstWithoutTokens,e))}flushQueue(){this.queuedTextEdits.length>0&&(this.astWithTokens=this.parseDocumentFromTextBuffer(this.queuedTextEdits,this.astWithTokens,!1),this.queuedTextEdits=[]),this.queuedTextEditsForInitialAstWithoutTokens.length>0&&(this.initialAstWithoutTokens&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer(this.queuedTextEditsForInitialAstWithoutTokens,this.initialAstWithoutTokens,!1)),this.queuedTextEditsForInitialAstWithoutTokens=[])}parseDocumentFromTextBuffer(e,t,i){const n=t,s=new wse(this.textModel,this.brackets);return O9(s,e,n,i)}getBracketsInRange(e,t){this.flushQueue();const i=Cs(e.startLineNumber-1,e.startColumn-1),n=Cs(e.endLineNumber-1,e.endColumn-1);return new nh(s=>{const r=this.initialAstWithoutTokens||this.astWithTokens;F9(r,zr,r.length,i,n,s,0,0,new Map,t)})}getBracketPairsInRange(e,t){this.flushQueue();const i=uC(e.getStartPosition()),n=uC(e.getEndPosition());return new nh(s=>{const r=this.initialAstWithoutTokens||this.astWithTokens,a=new cIe(s,t,this.textModel);B9(r,zr,r.length,i,n,a,0,new Map)})}getFirstBracketAfter(e){this.flushQueue();const t=this.initialAstWithoutTokens||this.astWithTokens;return xse(t,zr,t.length,uC(e))}getFirstBracketBefore(e){this.flushQueue();const t=this.initialAstWithoutTokens||this.astWithTokens;return Lse(t,zr,t.length,uC(e))}}function Lse(o,e,t,i){if(o.kind===4||o.kind===2){const n=[];for(const s of o.children)t=Jn(e,s.length),n.push({nodeOffsetStart:e,nodeOffsetEnd:t}),e=t;for(let s=n.length-1;s>=0;s--){const{nodeOffsetStart:r,nodeOffsetEnd:a}=n[s];if(PC(r,i)){const l=Lse(o.children[s],r,a,i);if(l)return l}}return null}else{if(o.kind===3)return null;if(o.kind===1){const n=vv(e,t);return{bracketInfo:o.bracketInfo,range:n}}}return null}function xse(o,e,t,i){if(o.kind===4||o.kind===2){for(const n of o.children){if(t=Jn(e,n.length),PC(i,t)){const s=xse(n,e,t,i);if(s)return s}e=t}return null}else{if(o.kind===3)return null;if(o.kind===1){const n=vv(e,t);return{bracketInfo:o.bracketInfo,range:n}}}return null}function F9(o,e,t,i,n,s,r,a,l,c,u=!1){if(r>200)return!0;e:for(;;)switch(o.kind){case 4:{const f=o.childrenLength;for(let g=0;g<f;g++){const p=o.getChild(g);if(p){if(t=Jn(e,p.length),OC(e,n)&&ZS(t,i)){if(ZS(t,n)){o=p;continue e}if(!F9(p,e,t,i,n,s,r,0,l,c))return!1}e=t}}return!0}case 2:{const f=!c||!o.closingBracket||o.closingBracket.bracketInfo.closesColorized(o.openingBracket.bracketInfo);let g=0;if(l){let _=l.get(o.openingBracket.text);_===void 0&&(_=0),g=_,f&&(_++,l.set(o.openingBracket.text,_))}const p=o.childrenLength;for(let _=0;_<p;_++){const b=o.getChild(_);if(b){if(t=Jn(e,b.length),OC(e,n)&&ZS(t,i)){if(ZS(t,n)&&b.kind!==1){o=b,f?(r++,a=g+1):a=g;continue e}if((f||b.kind!==1||!o.closingBracket)&&!F9(b,e,t,i,n,s,f?r+1:r,f?g+1:g,l,c,!o.closingBracket))return!1}e=t}}return l==null||l.set(o.openingBracket.text,g),!0}case 3:{const f=vv(e,t);return s(new pQ(f,r-1,0,!0))}case 1:{const f=vv(e,t);return s(new pQ(f,r-1,a-1,u))}case 0:return!0}}class cIe{constructor(e,t,i){this.push=e,this.includeMinIndentation=t,this.textModel=i}}function B9(o,e,t,i,n,s,r,a){var l;if(r>200)return!0;let c=!0;if(o.kind===2){let u=0;if(a){let p=a.get(o.openingBracket.text);p===void 0&&(p=0),u=p,p++,a.set(o.openingBracket.text,p)}const f=Jn(e,o.openingBracket.length);let g=-1;if(s.includeMinIndentation&&(g=o.computeMinIndentation(e,s.textModel)),c=s.push(new $Ee(vv(e,t),vv(e,f),o.closingBracket?vv(Jn(f,((l=o.child)===null||l===void 0?void 0:l.length)||zr),t):void 0,r,u,o,g)),e=f,c&&o.child){const p=o.child;if(t=Jn(e,p.length),OC(e,n)&&ZS(t,i)&&(c=B9(p,e,t,i,n,s,r+1,a),!c))return!1}a==null||a.set(o.openingBracket.text,u)}else{let u=e;for(const f of o.children){const g=u;if(u=Jn(u,f.length),OC(g,n)&&OC(i,u)&&(c=B9(f,g,u,i,n,s,r,a),!c))return!1}}return c}class dIe extends J{get canBuildAST(){return this.textModel.getValueLength()<=5e6}constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t,this.bracketPairsTree=this._register(new Xs),this.onDidChangeEmitter=new Y,this.onDidChange=this.onDidChangeEmitter.event,this.bracketsRequested=!1,this._register(this.languageConfigurationService.onDidChange(i=>{var n;(!i.languageId||!((n=this.bracketPairsTree.value)===null||n===void 0)&&n.object.didLanguageChange(i.languageId))&&(this.bracketPairsTree.clear(),this.updateBracketPairsTree())}))}handleDidChangeOptions(e){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeLanguage(e){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeContent(e){var t;(t=this.bracketPairsTree.value)===null||t===void 0||t.object.handleContentChanged(e)}handleDidChangeBackgroundTokenizationState(){var e;(e=this.bracketPairsTree.value)===null||e===void 0||e.object.handleDidChangeBackgroundTokenizationState()}handleDidChangeTokens(e){var t;(t=this.bracketPairsTree.value)===null||t===void 0||t.object.handleDidChangeTokens(e)}updateBracketPairsTree(){if(this.bracketsRequested&&this.canBuildAST){if(!this.bracketPairsTree.value){const e=new he;this.bracketPairsTree.value=uIe(e.add(new lIe(this.textModel,t=>this.languageConfigurationService.getLanguageConfiguration(t))),e),e.add(this.bracketPairsTree.value.object.onDidChange(t=>this.onDidChangeEmitter.fire(t))),this.onDidChangeEmitter.fire()}}else this.bracketPairsTree.value&&(this.bracketPairsTree.clear(),this.onDidChangeEmitter.fire())}getBracketPairsInRange(e){var t;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)===null||t===void 0?void 0:t.object.getBracketPairsInRange(e,!1))||nh.empty}getBracketPairsInRangeWithMinIndentation(e){var t;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)===null||t===void 0?void 0:t.object.getBracketPairsInRange(e,!0))||nh.empty}getBracketsInRange(e,t=!1){var i;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((i=this.bracketPairsTree.value)===null||i===void 0?void 0:i.object.getBracketsInRange(e,t))||nh.empty}findMatchingBracketUp(e,t,i){const n=this.textModel.validatePosition(t),s=this.textModel.getLanguageIdAtPosition(n.lineNumber,n.column);if(this.canBuildAST){const r=this.languageConfigurationService.getLanguageConfiguration(s).bracketsNew.getClosingBracketInfo(e);if(!r)return null;const a=this.getBracketPairsInRange(A.fromPositions(t,t)).findLast(l=>r.closes(l.openingBracketInfo));return a?a.openingBracketRange:null}else{const r=e.toLowerCase(),a=this.languageConfigurationService.getLanguageConfiguration(s).brackets;if(!a)return null;const l=a.textIsBracket[r];return l?uT(this._findMatchingBracketUp(l,n,k3(i))):null}}matchBracket(e,t){if(this.canBuildAST){const i=this.getBracketPairsInRange(A.fromPositions(e,e)).filter(n=>n.closingBracketRange!==void 0&&(n.openingBracketRange.containsPosition(e)||n.closingBracketRange.containsPosition(e))).findLastMaxBy(ac(n=>n.openingBracketRange.containsPosition(e)?n.openingBracketRange:n.closingBracketRange,A.compareRangesUsingStarts));return i?[i.openingBracketRange,i.closingBracketRange]:null}else{const i=k3(t);return this._matchBracket(this.textModel.validatePosition(e),i)}}_establishBracketSearchOffsets(e,t,i,n){const s=t.getCount(),r=t.getLanguageId(n);let a=Math.max(0,e.column-1-i.maxBracketLength);for(let c=n-1;c>=0;c--){const u=t.getEndOffset(c);if(u<=a)break;if(Tu(t.getStandardTokenType(c))||t.getLanguageId(c)!==r){a=u;break}}let l=Math.min(t.getLineContent().length,e.column-1+i.maxBracketLength);for(let c=n+1;c<s;c++){const u=t.getStartOffset(c);if(u>=l)break;if(Tu(t.getStandardTokenType(c))||t.getLanguageId(c)!==r){l=u;break}}return{searchStartOffset:a,searchEndOffset:l}}_matchBracket(e,t){const i=e.lineNumber,n=this.textModel.tokenization.getLineTokens(i),s=this.textModel.getLineContent(i),r=n.findTokenIndexAtOffset(e.column-1);if(r<0)return null;const a=this.languageConfigurationService.getLanguageConfiguration(n.getLanguageId(r)).brackets;if(a&&!Tu(n.getStandardTokenType(r))){let{searchStartOffset:l,searchEndOffset:c}=this._establishBracketSearchOffsets(e,n,a,r),u=null;for(;;){const f=Mc.findNextBracketInRange(a.forwardRegex,i,s,l,c);if(!f)break;if(f.startColumn<=e.column&&e.column<=f.endColumn){const g=s.substring(f.startColumn-1,f.endColumn-1).toLowerCase(),p=this._matchFoundBracket(f,a.textIsBracket[g],a.textIsOpenBracket[g],t);if(p){if(p instanceof pf)return null;u=p}}l=f.endColumn-1}if(u)return u}if(r>0&&n.getStartOffset(r)===e.column-1){const l=r-1,c=this.languageConfigurationService.getLanguageConfiguration(n.getLanguageId(l)).brackets;if(c&&!Tu(n.getStandardTokenType(l))){const{searchStartOffset:u,searchEndOffset:f}=this._establishBracketSearchOffsets(e,n,c,l),g=Mc.findPrevBracketInRange(c.reversedRegex,i,s,u,f);if(g&&g.startColumn<=e.column&&e.column<=g.endColumn){const p=s.substring(g.startColumn-1,g.endColumn-1).toLowerCase(),_=this._matchFoundBracket(g,c.textIsBracket[p],c.textIsOpenBracket[p],t);if(_)return _ instanceof pf?null:_}}}return null}_matchFoundBracket(e,t,i,n){if(!t)return null;const s=i?this._findMatchingBracketDown(t,e.getEndPosition(),n):this._findMatchingBracketUp(t,e.getStartPosition(),n);return s?s instanceof pf?s:[e,s]:null}_findMatchingBracketUp(e,t,i){const n=e.languageId,s=e.reversedRegex;let r=-1,a=0;const l=(c,u,f,g)=>{for(;;){if(i&&++a%100===0&&!i())return pf.INSTANCE;const p=Mc.findPrevBracketInRange(s,c,u,f,g);if(!p)break;const _=u.substring(p.startColumn-1,p.endColumn-1).toLowerCase();if(e.isOpen(_)?r++:e.isClose(_)&&r--,r===0)return p;g=p.startColumn-1}return null};for(let c=t.lineNumber;c>=1;c--){const u=this.textModel.tokenization.getLineTokens(c),f=u.getCount(),g=this.textModel.getLineContent(c);let p=f-1,_=g.length,b=g.length;c===t.lineNumber&&(p=u.findTokenIndexAtOffset(t.column-1),_=t.column-1,b=t.column-1);let y=!0;for(;p>=0;p--){const S=u.getLanguageId(p)===n&&!Tu(u.getStandardTokenType(p));if(S)y?_=u.getStartOffset(p):(_=u.getStartOffset(p),b=u.getEndOffset(p));else if(y&&_!==b){const L=l(c,g,_,b);if(L)return L}y=S}if(y&&_!==b){const S=l(c,g,_,b);if(S)return S}}return null}_findMatchingBracketDown(e,t,i){const n=e.languageId,s=e.forwardRegex;let r=1,a=0;const l=(u,f,g,p)=>{for(;;){if(i&&++a%100===0&&!i())return pf.INSTANCE;const _=Mc.findNextBracketInRange(s,u,f,g,p);if(!_)break;const b=f.substring(_.startColumn-1,_.endColumn-1).toLowerCase();if(e.isOpen(b)?r++:e.isClose(b)&&r--,r===0)return _;g=_.endColumn-1}return null},c=this.textModel.getLineCount();for(let u=t.lineNumber;u<=c;u++){const f=this.textModel.tokenization.getLineTokens(u),g=f.getCount(),p=this.textModel.getLineContent(u);let _=0,b=0,y=0;u===t.lineNumber&&(_=f.findTokenIndexAtOffset(t.column-1),b=t.column-1,y=t.column-1);let S=!0;for(;_<g;_++){const L=f.getLanguageId(_)===n&&!Tu(f.getStandardTokenType(_));if(L)S||(b=f.getStartOffset(_)),y=f.getEndOffset(_);else if(S&&b!==y){const x=l(u,p,b,y);if(x)return x}S=L}if(S&&b!==y){const L=l(u,p,b,y);if(L)return L}}return null}findPrevBracket(e){var t;const i=this.textModel.validatePosition(e);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)===null||t===void 0?void 0:t.object.getFirstBracketBefore(i))||null;let n=null,s=null,r=null;for(let a=i.lineNumber;a>=1;a--){const l=this.textModel.tokenization.getLineTokens(a),c=l.getCount(),u=this.textModel.getLineContent(a);let f=c-1,g=u.length,p=u.length;if(a===i.lineNumber){f=l.findTokenIndexAtOffset(i.column-1),g=i.column-1,p=i.column-1;const b=l.getLanguageId(f);n!==b&&(n=b,s=this.languageConfigurationService.getLanguageConfiguration(n).brackets,r=this.languageConfigurationService.getLanguageConfiguration(n).bracketsNew)}let _=!0;for(;f>=0;f--){const b=l.getLanguageId(f);if(n!==b){if(s&&r&&_&&g!==p){const S=Mc.findPrevBracketInRange(s.reversedRegex,a,u,g,p);if(S)return this._toFoundBracket(r,S);_=!1}n=b,s=this.languageConfigurationService.getLanguageConfiguration(n).brackets,r=this.languageConfigurationService.getLanguageConfiguration(n).bracketsNew}const y=!!s&&!Tu(l.getStandardTokenType(f));if(y)_?g=l.getStartOffset(f):(g=l.getStartOffset(f),p=l.getEndOffset(f));else if(r&&s&&_&&g!==p){const S=Mc.findPrevBracketInRange(s.reversedRegex,a,u,g,p);if(S)return this._toFoundBracket(r,S)}_=y}if(r&&s&&_&&g!==p){const b=Mc.findPrevBracketInRange(s.reversedRegex,a,u,g,p);if(b)return this._toFoundBracket(r,b)}}return null}findNextBracket(e){var t;const i=this.textModel.validatePosition(e);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)===null||t===void 0?void 0:t.object.getFirstBracketAfter(i))||null;const n=this.textModel.getLineCount();let s=null,r=null,a=null;for(let l=i.lineNumber;l<=n;l++){const c=this.textModel.tokenization.getLineTokens(l),u=c.getCount(),f=this.textModel.getLineContent(l);let g=0,p=0,_=0;if(l===i.lineNumber){g=c.findTokenIndexAtOffset(i.column-1),p=i.column-1,_=i.column-1;const y=c.getLanguageId(g);s!==y&&(s=y,r=this.languageConfigurationService.getLanguageConfiguration(s).brackets,a=this.languageConfigurationService.getLanguageConfiguration(s).bracketsNew)}let b=!0;for(;g<u;g++){const y=c.getLanguageId(g);if(s!==y){if(a&&r&&b&&p!==_){const L=Mc.findNextBracketInRange(r.forwardRegex,l,f,p,_);if(L)return this._toFoundBracket(a,L);b=!1}s=y,r=this.languageConfigurationService.getLanguageConfiguration(s).brackets,a=this.languageConfigurationService.getLanguageConfiguration(s).bracketsNew}const S=!!r&&!Tu(c.getStandardTokenType(g));if(S)b||(p=c.getStartOffset(g)),_=c.getEndOffset(g);else if(a&&r&&b&&p!==_){const L=Mc.findNextBracketInRange(r.forwardRegex,l,f,p,_);if(L)return this._toFoundBracket(a,L)}b=S}if(a&&r&&b&&p!==_){const y=Mc.findNextBracketInRange(r.forwardRegex,l,f,p,_);if(y)return this._toFoundBracket(a,y)}}return null}findEnclosingBrackets(e,t){const i=this.textModel.validatePosition(e);if(this.canBuildAST){const p=A.fromPositions(i),_=this.getBracketPairsInRange(A.fromPositions(i,i)).findLast(b=>b.closingBracketRange!==void 0&&b.range.strictContainsRange(p));return _?[_.openingBracketRange,_.closingBracketRange]:null}const n=k3(t),s=this.textModel.getLineCount(),r=new Map;let a=[];const l=(p,_)=>{if(!r.has(p)){const b=[];for(let y=0,S=_?_.brackets.length:0;y<S;y++)b[y]=0;r.set(p,b)}a=r.get(p)};let c=0;const u=(p,_,b,y,S)=>{for(;;){if(n&&++c%100===0&&!n())return pf.INSTANCE;const L=Mc.findNextBracketInRange(p.forwardRegex,_,b,y,S);if(!L)break;const x=b.substring(L.startColumn-1,L.endColumn-1).toLowerCase(),D=p.textIsBracket[x];if(D&&(D.isOpen(x)?a[D.index]++:D.isClose(x)&&a[D.index]--,a[D.index]===-1))return this._matchFoundBracket(L,D,!1,n);y=L.endColumn-1}return null};let f=null,g=null;for(let p=i.lineNumber;p<=s;p++){const _=this.textModel.tokenization.getLineTokens(p),b=_.getCount(),y=this.textModel.getLineContent(p);let S=0,L=0,x=0;if(p===i.lineNumber){S=_.findTokenIndexAtOffset(i.column-1),L=i.column-1,x=i.column-1;const E=_.getLanguageId(S);f!==E&&(f=E,g=this.languageConfigurationService.getLanguageConfiguration(f).brackets,l(f,g))}let D=!0;for(;S<b;S++){const E=_.getLanguageId(S);if(f!==E){if(g&&D&&L!==x){const M=u(g,p,y,L,x);if(M)return uT(M);D=!1}f=E,g=this.languageConfigurationService.getLanguageConfiguration(f).brackets,l(f,g)}const N=!!g&&!Tu(_.getStandardTokenType(S));if(N)D||(L=_.getStartOffset(S)),x=_.getEndOffset(S);else if(g&&D&&L!==x){const M=u(g,p,y,L,x);if(M)return uT(M)}D=N}if(g&&D&&L!==x){const E=u(g,p,y,L,x);if(E)return uT(E)}}return null}_toFoundBracket(e,t){if(!t)return null;let i=this.textModel.getValueInRange(t);i=i.toLowerCase();const n=e.getBracketInfo(i);return n?{range:t,bracketInfo:n}:null}}function uIe(o,e){return{object:o,dispose:()=>e==null?void 0:e.dispose()}}function k3(o){if(typeof o>"u")return()=>!0;{const e=Date.now();return()=>Date.now()-e<=o}}class pf{constructor(){this._searchCanceledBrand=void 0}}pf.INSTANCE=new pf;function uT(o){return o instanceof pf?null:o}class hIe extends J{constructor(e){super(),this.textModel=e,this.colorProvider=new Dse,this.onDidChangeEmitter=new Y,this.onDidChange=this.onDidChangeEmitter.event,this.colorizationOptions=e.getOptions().bracketPairColorizationOptions,this._register(e.bracketPairs.onDidChange(t=>{this.onDidChangeEmitter.fire()}))}handleDidChangeOptions(e){this.colorizationOptions=this.textModel.getOptions().bracketPairColorizationOptions}getDecorationsInRange(e,t,i,n){return n?[]:t===void 0?[]:this.colorizationOptions.enabled?this.textModel.bracketPairs.getBracketsInRange(e,!0).map(r=>({id:`bracket${r.range.toString()}-${r.nestingLevel}`,options:{description:"BracketPairColorization",inlineClassName:this.colorProvider.getInlineClassName(r,this.colorizationOptions.independentColorPoolPerBracketType)},ownerId:0,range:r.range})).toArray():[]}getAllDecorations(e,t){return e===void 0?[]:this.colorizationOptions.enabled?this.getDecorationsInRange(new A(1,1,this.textModel.getLineCount(),1),e,t):[]}}class Dse{constructor(){this.unexpectedClosingBracketClassName="unexpected-closing-bracket"}getInlineClassName(e,t){return e.isInvalid?this.unexpectedClosingBracketClassName:this.getInlineClassNameOfLevel(t?e.nestingLevelOfEqualBracketType:e.nestingLevel)}getInlineClassNameOfLevel(e){return`bracket-highlighting-${e%30}`}}_c((o,e)=>{const t=[ese,tse,ise,nse,sse,ose],i=new Dse;e.addRule(`.monaco-editor .${i.unexpectedClosingBracketClassName} { color: ${o.getColor(ake)}; }`);const n=t.map(s=>o.getColor(s)).filter(s=>!!s).filter(s=>!s.isTransparent());for(let s=0;s<30;s++){const r=n[s%n.length];e.addRule(`.monaco-editor .${i.getInlineClassNameOfLevel(s)} { color: ${r}; }`)}});function hT(o){return o.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}class ko{get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}constructor(e,t,i,n){this.oldPosition=e,this.oldText=t,this.newPosition=i,this.newText=n}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${hT(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${hT(this.oldText)}")`:`(replace@${this.oldPosition} "${hT(this.oldText)}" with "${hT(this.newText)}")`}static _writeStringSize(e){return 4+2*e.length}static _writeString(e,t,i){const n=t.length;wd(e,n,i),i+=4;for(let s=0;s<n;s++)Qwe(e,t.charCodeAt(s),i),i+=2;return i}static _readString(e,t){const i=Cd(e,t);return t+=4,Jwe(e,t,i)}writeSize(){return 8+ko._writeStringSize(this.oldText)+ko._writeStringSize(this.newText)}write(e,t){return wd(e,this.oldPosition,t),t+=4,wd(e,this.newPosition,t),t+=4,t=ko._writeString(e,this.oldText,t),t=ko._writeString(e,this.newText,t),t}static read(e,t,i){const n=Cd(e,t);t+=4;const s=Cd(e,t);t+=4;const r=ko._readString(e,t);t+=ko._writeStringSize(r);const a=ko._readString(e,t);return t+=ko._writeStringSize(a),i.push(new ko(n,r,s,a)),t}}function fIe(o,e){return o===null||o.length===0?e:new Au(o,e).compress()}class Au{constructor(e,t){this._prevEdits=e,this._currEdits=t,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}compress(){let e=0,t=0,i=this._getPrev(e),n=this._getCurr(t);for(;e<this._prevLen||t<this._currLen;){if(i===null){this._acceptCurr(n),n=this._getCurr(++t);continue}if(n===null){this._acceptPrev(i),i=this._getPrev(++e);continue}if(n.oldEnd<=i.newPosition){this._acceptCurr(n),n=this._getCurr(++t);continue}if(i.newEnd<=n.oldPosition){this._acceptPrev(i),i=this._getPrev(++e);continue}if(n.oldPosition<i.newPosition){const[c,u]=Au._splitCurr(n,i.newPosition-n.oldPosition);this._acceptCurr(c),n=u;continue}if(i.newPosition<n.oldPosition){const[c,u]=Au._splitPrev(i,n.oldPosition-i.newPosition);this._acceptPrev(c),i=u;continue}let a,l;if(n.oldEnd===i.newEnd)a=i,l=n,i=this._getPrev(++e),n=this._getCurr(++t);else if(n.oldEnd<i.newEnd){const[c,u]=Au._splitPrev(i,n.oldLength);a=c,l=n,i=u,n=this._getCurr(++t)}else{const[c,u]=Au._splitCurr(n,i.newLength);a=i,l=c,i=this._getPrev(++e),n=u}this._result[this._resultLen++]=new ko(a.oldPosition,a.oldText,l.newPosition,l.newText),this._prevDeltaOffset+=a.newLength-a.oldLength,this._currDeltaOffset+=l.newLength-l.oldLength}const s=Au._merge(this._result);return Au._removeNoOps(s)}_acceptCurr(e){this._result[this._resultLen++]=Au._rebaseCurr(this._prevDeltaOffset,e),this._currDeltaOffset+=e.newLength-e.oldLength}_getCurr(e){return e<this._currLen?this._currEdits[e]:null}_acceptPrev(e){this._result[this._resultLen++]=Au._rebasePrev(this._currDeltaOffset,e),this._prevDeltaOffset+=e.newLength-e.oldLength}_getPrev(e){return e<this._prevLen?this._prevEdits[e]:null}static _rebaseCurr(e,t){return new ko(t.oldPosition-e,t.oldText,t.newPosition,t.newText)}static _rebasePrev(e,t){return new ko(t.oldPosition,t.oldText,t.newPosition+e,t.newText)}static _splitPrev(e,t){const i=e.newText.substr(0,t),n=e.newText.substr(t);return[new ko(e.oldPosition,e.oldText,e.newPosition,i),new ko(e.oldEnd,"",e.newPosition+t,n)]}static _splitCurr(e,t){const i=e.oldText.substr(0,t),n=e.oldText.substr(t);return[new ko(e.oldPosition,i,e.newPosition,e.newText),new ko(e.oldPosition+t,n,e.newEnd,"")]}static _merge(e){if(e.length===0)return e;const t=[];let i=0,n=e[0];for(let s=1;s<e.length;s++){const r=e[s];n.oldEnd===r.oldPosition?n=new ko(n.oldPosition,n.oldText+r.oldText,n.newPosition,n.newText+r.newText):(t[i++]=n,n=r)}return t[i++]=n,t}static _removeNoOps(e){if(e.length===0)return e;const t=[];let i=0;for(let n=0;n<e.length;n++){const s=e[n];s.oldText!==s.newText&&(t[i++]=s)}return t}}function tp(o){return o===47||o===92}function kse(o){return o.replace(/[\\/]/g,Es.sep)}function gIe(o){return o.indexOf("/")===-1&&(o=kse(o)),/^[a-zA-Z]:(\/|$)/.test(o)&&(o="/"+o),o}function bQ(o,e=Es.sep){if(!o)return"";const t=o.length,i=o.charCodeAt(0);if(tp(i)){if(tp(o.charCodeAt(1))&&!tp(o.charCodeAt(2))){let s=3;const r=s;for(;s<t&&!tp(o.charCodeAt(s));s++);if(r!==s&&!tp(o.charCodeAt(s+1))){for(s+=1;s<t;s++)if(tp(o.charCodeAt(s)))return o.slice(0,s+1).replace(/[\\/]/g,e)}}return e}else if(Ese(i)&&o.charCodeAt(1)===58)return tp(o.charCodeAt(2))?o.slice(0,2)+e:o.slice(0,2);let n=o.indexOf("://");if(n!==-1){for(n+=3;n<t;n++)if(tp(o.charCodeAt(n)))return o.slice(0,n+1)}return""}function W9(o,e,t,i=Fd){if(o===e)return!0;if(!o||!e||e.length>o.length)return!1;if(t){if(!FV(o,e))return!1;if(e.length===o.length)return!0;let s=e.length;return e.charAt(e.length-1)===i&&s--,o.charAt(s)===i}return e.charAt(e.length-1)!==i&&(e+=i),o.indexOf(e)===0}function Ese(o){return o>=65&&o<=90||o>=97&&o<=122}function pIe(o,e=Mo){return e?Ese(o.charCodeAt(0))&&o.charCodeAt(1)===58:!1}function Nu(o){return lR(o,!0)}class mIe{constructor(e){this._ignorePathCasing=e}compare(e,t,i=!1){return e===t?0:ex(this.getComparisonKey(e,i),this.getComparisonKey(t,i))}isEqual(e,t,i=!1){return e===t?!0:!e||!t?!1:this.getComparisonKey(e,i)===this.getComparisonKey(t,i)}getComparisonKey(e,t=!1){return e.with({path:this._ignorePathCasing(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}isEqualOrParent(e,t,i=!1){if(e.scheme===t.scheme){if(e.scheme===Pt.file)return W9(Nu(e),Nu(t),this._ignorePathCasing(e))&&e.query===t.query&&(i||e.fragment===t.fragment);if(wQ(e.authority,t.authority))return W9(e.path,t.path,this._ignorePathCasing(e),"/")&&e.query===t.query&&(i||e.fragment===t.fragment)}return!1}joinPath(e,...t){return gt.joinPath(e,...t)}basenameOrAuthority(e){return fc(e)||e.authority}basename(e){return Es.basename(e.path)}extname(e){return Es.extname(e.path)}dirname(e){if(e.path.length===0)return e;let t;return e.scheme===Pt.file?t=gt.file(nie(Nu(e))).path:(t=Es.dirname(e.path),e.authority&&t.length&&t.charCodeAt(0)!==47&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return e.scheme===Pt.file?t=gt.file(iie(Nu(e))).path:t=Es.normalize(e.path),e.with({path:t})}relativePath(e,t){if(e.scheme!==t.scheme||!wQ(e.authority,t.authority))return;if(e.scheme===Pt.file){const s=oCe(Nu(e),Nu(t));return Mo?kse(s):s}let i=e.path||"/";const n=t.path||"/";if(this._ignorePathCasing(e)){let s=0;for(const r=Math.min(i.length,n.length);s<r&&!(i.charCodeAt(s)!==n.charCodeAt(s)&&i.charAt(s).toLowerCase()!==n.charAt(s).toLowerCase());s++);i=n.substr(0,s)+i.substr(s)}return Es.relative(i,n)}resolvePath(e,t){if(e.scheme===Pt.file){const i=gt.file(sCe(Nu(e),t));return e.with({authority:i.authority,path:i.path})}return t=gIe(t),e.with({path:Es.resolve(e.path,t)})}isAbsolutePath(e){return!!e.path&&e.path[0]==="/"}isEqualAuthority(e,t){return e===t||e!==void 0&&t!==void 0&&Q0(e,t)}hasTrailingPathSeparator(e,t=Fd){if(e.scheme===Pt.file){const i=Nu(e);return i.length>bQ(i).length&&i[i.length-1]===t}else{const i=e.path;return i.length>1&&i.charCodeAt(i.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}}removeTrailingPathSeparator(e,t=Fd){return yQ(e,t)?e.with({path:e.path.substr(0,e.path.length-1)}):e}addTrailingPathSeparator(e,t=Fd){let i=!1;if(e.scheme===Pt.file){const n=Nu(e);i=n!==void 0&&n.length===bQ(n).length&&n[n.length-1]===t}else{t="/";const n=e.path;i=n.length===1&&n.charCodeAt(n.length-1)===47}return!i&&!yQ(e,t)?e.with({path:e.path+"/"}):e}}const Ln=new mIe(()=>!1),AH=Ln.isEqual.bind(Ln);Ln.isEqualOrParent.bind(Ln);Ln.getComparisonKey.bind(Ln);const _Ie=Ln.basenameOrAuthority.bind(Ln),fc=Ln.basename.bind(Ln),vIe=Ln.extname.bind(Ln),GA=Ln.dirname.bind(Ln),bIe=Ln.joinPath.bind(Ln),CIe=Ln.normalizePath.bind(Ln),wIe=Ln.relativePath.bind(Ln),CQ=Ln.resolvePath.bind(Ln);Ln.isAbsolutePath.bind(Ln);const wQ=Ln.isEqualAuthority.bind(Ln),yQ=Ln.hasTrailingPathSeparator.bind(Ln);Ln.removeTrailingPathSeparator.bind(Ln);Ln.addTrailingPathSeparator.bind(Ln);var mm;(function(o){o.META_DATA_LABEL="label",o.META_DATA_DESCRIPTION="description",o.META_DATA_SIZE="size",o.META_DATA_MIME="mime";function e(t){const i=new Map;t.path.substring(t.path.indexOf(";")+1,t.path.lastIndexOf(";")).split(";").forEach(r=>{const[a,l]=r.split(":");a&&l&&i.set(a,l)});const s=t.path.substring(0,t.path.indexOf(";"));return s&&i.set(o.META_DATA_MIME,s),i}o.parseMetaData=e})(mm||(mm={}));function E0(o){return o.toString()}class so{static create(e,t){const i=e.getAlternativeVersionId(),n=V9(e);return new so(i,i,n,n,t,t,[])}constructor(e,t,i,n,s,r,a){this.beforeVersionId=e,this.afterVersionId=t,this.beforeEOL=i,this.afterEOL=n,this.beforeCursorState=s,this.afterCursorState=r,this.changes=a}append(e,t,i,n,s){t.length>0&&(this.changes=fIe(this.changes,t)),this.afterEOL=i,this.afterVersionId=n,this.afterCursorState=s}static _writeSelectionsSize(e){return 4+4*4*(e?e.length:0)}static _writeSelections(e,t,i){if(wd(e,t?t.length:0,i),i+=4,t)for(const n of t)wd(e,n.selectionStartLineNumber,i),i+=4,wd(e,n.selectionStartColumn,i),i+=4,wd(e,n.positionLineNumber,i),i+=4,wd(e,n.positionColumn,i),i+=4;return i}static _readSelections(e,t,i){const n=Cd(e,t);t+=4;for(let s=0;s<n;s++){const r=Cd(e,t);t+=4;const a=Cd(e,t);t+=4;const l=Cd(e,t);t+=4;const c=Cd(e,t);t+=4,i.push(new Xe(r,a,l,c))}return t}serialize(){let e=10+so._writeSelectionsSize(this.beforeCursorState)+so._writeSelectionsSize(this.afterCursorState)+4;for(const n of this.changes)e+=n.writeSize();const t=new Uint8Array(e);let i=0;wd(t,this.beforeVersionId,i),i+=4,wd(t,this.afterVersionId,i),i+=4,jY(t,this.beforeEOL,i),i+=1,jY(t,this.afterEOL,i),i+=1,i=so._writeSelections(t,this.beforeCursorState,i),i=so._writeSelections(t,this.afterCursorState,i),wd(t,this.changes.length,i),i+=4;for(const n of this.changes)i=n.write(t,i);return t.buffer}static deserialize(e){const t=new Uint8Array(e);let i=0;const n=Cd(t,i);i+=4;const s=Cd(t,i);i+=4;const r=$Y(t,i);i+=1;const a=$Y(t,i);i+=1;const l=[];i=so._readSelections(t,i,l);const c=[];i=so._readSelections(t,i,c);const u=Cd(t,i);i+=4;const f=[];for(let g=0;g<u;g++)i=ko.read(t,i,f);return new so(n,s,r,a,l,c,f)}}class Ise{get type(){return 0}get resource(){return gt.isUri(this.model)?this.model:this.model.uri}constructor(e,t,i,n){this.label=e,this.code=t,this.model=i,this._data=so.create(i,n)}toString(){return(this._data instanceof so?this._data:so.deserialize(this._data)).changes.map(t=>t.toString()).join(", ")}matchesResource(e){return(gt.isUri(this.model)?this.model:this.model.uri).toString()===e.toString()}setModel(e){this.model=e}canAppend(e){return this.model===e&&this._data instanceof so}append(e,t,i,n,s){this._data instanceof so&&this._data.append(e,t,i,n,s)}close(){this._data instanceof so&&(this._data=this._data.serialize())}open(){this._data instanceof so||(this._data=so.deserialize(this._data))}undo(){if(gt.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof so&&(this._data=this._data.serialize());const e=so.deserialize(this._data);this.model._applyUndo(e.changes,e.beforeEOL,e.beforeVersionId,e.beforeCursorState)}redo(){if(gt.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof so&&(this._data=this._data.serialize());const e=so.deserialize(this._data);this.model._applyRedo(e.changes,e.afterEOL,e.afterVersionId,e.afterCursorState)}heapSize(){return this._data instanceof so&&(this._data=this._data.serialize()),this._data.byteLength+168}}class yIe{get resources(){return this._editStackElementsArr.map(e=>e.resource)}constructor(e,t,i){this.label=e,this.code=t,this.type=1,this._isOpen=!0,this._editStackElementsArr=i.slice(0),this._editStackElementsMap=new Map;for(const n of this._editStackElementsArr){const s=E0(n.resource);this._editStackElementsMap.set(s,n)}this._delegate=null}prepareUndoRedo(){if(this._delegate)return this._delegate.prepareUndoRedo(this)}matchesResource(e){const t=E0(e);return this._editStackElementsMap.has(t)}setModel(e){const t=E0(gt.isUri(e)?e:e.uri);this._editStackElementsMap.has(t)&&this._editStackElementsMap.get(t).setModel(e)}canAppend(e){if(!this._isOpen)return!1;const t=E0(e.uri);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).canAppend(e):!1}append(e,t,i,n,s){const r=E0(e.uri);this._editStackElementsMap.get(r).append(e,t,i,n,s)}close(){this._isOpen=!1}open(){}undo(){this._isOpen=!1;for(const e of this._editStackElementsArr)e.undo()}redo(){for(const e of this._editStackElementsArr)e.redo()}heapSize(e){const t=E0(e);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).heapSize():0}split(){return this._editStackElementsArr}toString(){const e=[];for(const t of this._editStackElementsArr)e.push(`${fc(t.resource)}: ${t}`);return`{${e.join(", ")}}`}}function V9(o){return o.getEOL()===`
`?0:1}function mf(o){return o?o instanceof Ise||o instanceof yIe:!1}class PH{constructor(e,t){this._model=e,this._undoRedoService=t}pushStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);mf(e)&&e.close()}popStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);mf(e)&&e.open()}clear(){this._undoRedoService.removeElements(this._model.uri)}_getOrCreateEditStackElement(e,t){const i=this._undoRedoService.getLastElement(this._model.uri);if(mf(i)&&i.canAppend(this._model))return i;const n=new Ise(v("edit","Typing"),"undoredo.textBufferEdit",this._model,e);return this._undoRedoService.pushElement(n,t),n}pushEOL(e){const t=this._getOrCreateEditStackElement(null,void 0);this._model.setEOL(e),t.append(this._model,[],V9(this._model),this._model.getAlternativeVersionId(),null)}pushEditOperation(e,t,i,n){const s=this._getOrCreateEditStackElement(e,n),r=this._model.applyEdits(t,!0),a=PH._computeCursorState(i,r),l=r.map((c,u)=>({index:u,textChange:c.textChange}));return l.sort((c,u)=>c.textChange.oldPosition===u.textChange.oldPosition?c.index-u.index:c.textChange.oldPosition-u.textChange.oldPosition),s.append(this._model,l.map(c=>c.textChange),V9(this._model),this._model.getAlternativeVersionId(),a),a}static _computeCursorState(e,t){try{return e?e(t):null}catch(i){return Nt(i),null}}}class SIe{constructor(){this.spacesDiff=0,this.looksLikeAlignment=!1}}function LIe(o,e,t,i,n){n.spacesDiff=0,n.looksLikeAlignment=!1;let s;for(s=0;s<e&&s<i;s++){const g=o.charCodeAt(s),p=t.charCodeAt(s);if(g!==p)break}let r=0,a=0;for(let g=s;g<e;g++)o.charCodeAt(g)===32?r++:a++;let l=0,c=0;for(let g=s;g<i;g++)t.charCodeAt(g)===32?l++:c++;if(r>0&&a>0||l>0&&c>0)return;const u=Math.abs(a-c),f=Math.abs(r-l);if(u===0){n.spacesDiff=f,f>0&&0<=l-1&&l-1<o.length&&l<t.length&&t.charCodeAt(l)!==32&&o.charCodeAt(l-1)===32&&o.charCodeAt(o.length-1)===44&&(n.looksLikeAlignment=!0);return}if(f%u===0){n.spacesDiff=f/u;return}}function SQ(o,e,t){const i=Math.min(o.getLineCount(),1e4);let n=0,s=0,r="",a=0;const l=[2,4,6,8,3,5,7],c=8,u=[0,0,0,0,0,0,0,0,0],f=new SIe;for(let _=1;_<=i;_++){const b=o.getLineLength(_),y=o.getLineContent(_),S=b<=65536;let L=!1,x=0,D=0,E=0;for(let M=0,F=b;M<F;M++){const H=S?y.charCodeAt(M):o.getLineCharCode(_,M);if(H===9)E++;else if(H===32)D++;else{L=!0,x=M;break}}if(!L||(E>0?n++:D>1&&s++,LIe(r,a,y,x,f),f.looksLikeAlignment&&!(t&&e===f.spacesDiff)))continue;const N=f.spacesDiff;N<=c&&u[N]++,r=y,a=x}let g=t;n!==s&&(g=n<s);let p=e;if(g){let _=g?0:.1*i;l.forEach(b=>{const y=u[b];y>_&&(_=y,p=b)}),p===4&&u[4]>0&&u[2]>0&&u[2]>=u[4]/2&&(p=2)}return{insertSpaces:g,tabSize:p}}function aa(o){return(o.metadata&1)>>>0}function wn(o,e){o.metadata=o.metadata&254|e<<0}function Ro(o){return(o.metadata&2)>>>1===1}function mn(o,e){o.metadata=o.metadata&253|(e?1:0)<<1}function Tse(o){return(o.metadata&4)>>>2===1}function LQ(o,e){o.metadata=o.metadata&251|(e?1:0)<<2}function Nse(o){return(o.metadata&64)>>>6===1}function xQ(o,e){o.metadata=o.metadata&191|(e?1:0)<<6}function xIe(o){return(o.metadata&24)>>>3}function DQ(o,e){o.metadata=o.metadata&231|e<<3}function DIe(o){return(o.metadata&32)>>>5===1}function kQ(o,e){o.metadata=o.metadata&223|(e?1:0)<<5}class Rse{constructor(e,t,i){this.metadata=0,this.parent=this,this.left=this,this.right=this,wn(this,1),this.start=t,this.end=i,this.delta=0,this.maxEnd=i,this.id=e,this.ownerId=0,this.options=null,LQ(this,!1),xQ(this,!1),DQ(this,1),kQ(this,!1),this.cachedVersionId=0,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=i,this.range=null,mn(this,!1)}reset(e,t,i,n){this.start=t,this.end=i,this.maxEnd=i,this.cachedVersionId=e,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=i,this.range=n}setOptions(e){this.options=e;const t=this.options.className;LQ(this,t==="squiggly-error"||t==="squiggly-warning"||t==="squiggly-info"),xQ(this,this.options.glyphMarginClassName!==null),DQ(this,this.options.stickiness),kQ(this,this.options.collapseOnReplaceEdit)}setCachedOffsets(e,t,i){this.cachedVersionId!==i&&(this.range=null),this.cachedVersionId=i,this.cachedAbsoluteStart=e,this.cachedAbsoluteEnd=t}detach(){this.parent=null,this.left=null,this.right=null}}const jt=new Rse(null,0,0);jt.parent=jt;jt.left=jt;jt.right=jt;wn(jt,0);class E3{constructor(){this.root=jt,this.requestNormalizeDelta=!1}intervalSearch(e,t,i,n,s,r){return this.root===jt?[]:AIe(this,e,t,i,n,s,r)}search(e,t,i,n){return this.root===jt?[]:MIe(this,e,t,i,n)}collectNodesFromOwner(e){return NIe(this,e)}collectNodesPostOrder(){return RIe(this)}insert(e){EQ(this,e),this._normalizeDeltaIfNecessary()}delete(e){IQ(this,e),this._normalizeDeltaIfNecessary()}resolveNode(e,t){const i=e;let n=0;for(;e!==this.root;)e===e.parent.right&&(n+=e.parent.delta),e=e.parent;const s=i.start+n,r=i.end+n;i.setCachedOffsets(s,r,t)}acceptReplace(e,t,i,n){const s=IIe(this,e,e+t);for(let r=0,a=s.length;r<a;r++){const l=s[r];IQ(this,l)}this._normalizeDeltaIfNecessary(),TIe(this,e,e+t,i),this._normalizeDeltaIfNecessary();for(let r=0,a=s.length;r<a;r++){const l=s[r];l.start=l.cachedAbsoluteStart,l.end=l.cachedAbsoluteEnd,EIe(l,e,e+t,i,n),l.maxEnd=l.end,EQ(this,l)}this._normalizeDeltaIfNecessary()}_normalizeDeltaIfNecessary(){this.requestNormalizeDelta&&(this.requestNormalizeDelta=!1,kIe(this))}}function kIe(o){let e=o.root,t=0;for(;e!==jt;){if(e.left!==jt&&!Ro(e.left)){e=e.left;continue}if(e.right!==jt&&!Ro(e.right)){t+=e.delta,e=e.right;continue}e.start=t+e.start,e.end=t+e.end,e.delta=0,_m(e),mn(e,!0),mn(e.left,!1),mn(e.right,!1),e===e.parent.right&&(t-=e.parent.delta),e=e.parent}mn(o.root,!1)}function I0(o,e,t,i){return o<t?!0:o>t||i===1?!1:i===2?!0:e}function EIe(o,e,t,i,n){const s=xIe(o),r=s===0||s===2,a=s===1||s===2,l=t-e,c=i,u=Math.min(l,c),f=o.start;let g=!1;const p=o.end;let _=!1;e<=f&&p<=t&&DIe(o)&&(o.start=e,g=!0,o.end=e,_=!0);{const y=n?1:l>0?2:0;!g&&I0(f,r,e,y)&&(g=!0),!_&&I0(p,a,e,y)&&(_=!0)}if(u>0&&!n){const y=l>c?2:0;!g&&I0(f,r,e+u,y)&&(g=!0),!_&&I0(p,a,e+u,y)&&(_=!0)}{const y=n?1:0;!g&&I0(f,r,t,y)&&(o.start=e+c,g=!0),!_&&I0(p,a,t,y)&&(o.end=e+c,_=!0)}const b=c-l;g||(o.start=Math.max(0,f+b)),_||(o.end=Math.max(0,p+b)),o.start>o.end&&(o.end=o.start)}function IIe(o,e,t){let i=o.root,n=0,s=0,r=0,a=0;const l=[];let c=0;for(;i!==jt;){if(Ro(i)){mn(i.left,!1),mn(i.right,!1),i===i.parent.right&&(n-=i.parent.delta),i=i.parent;continue}if(!Ro(i.left)){if(s=n+i.maxEnd,s<e){mn(i,!0);continue}if(i.left!==jt){i=i.left;continue}}if(r=n+i.start,r>t){mn(i,!0);continue}if(a=n+i.end,a>=e&&(i.setCachedOffsets(r,a,0),l[c++]=i),mn(i,!0),i.right!==jt&&!Ro(i.right)){n+=i.delta,i=i.right;continue}}return mn(o.root,!1),l}function TIe(o,e,t,i){let n=o.root,s=0,r=0,a=0;const l=i-(t-e);for(;n!==jt;){if(Ro(n)){mn(n.left,!1),mn(n.right,!1),n===n.parent.right&&(s-=n.parent.delta),_m(n),n=n.parent;continue}if(!Ro(n.left)){if(r=s+n.maxEnd,r<e){mn(n,!0);continue}if(n.left!==jt){n=n.left;continue}}if(a=s+n.start,a>t){n.start+=l,n.end+=l,n.delta+=l,(n.delta<-1073741824||n.delta>1073741824)&&(o.requestNormalizeDelta=!0),mn(n,!0);continue}if(mn(n,!0),n.right!==jt&&!Ro(n.right)){s+=n.delta,n=n.right;continue}}mn(o.root,!1)}function NIe(o,e){let t=o.root;const i=[];let n=0;for(;t!==jt;){if(Ro(t)){mn(t.left,!1),mn(t.right,!1),t=t.parent;continue}if(t.left!==jt&&!Ro(t.left)){t=t.left;continue}if(t.ownerId===e&&(i[n++]=t),mn(t,!0),t.right!==jt&&!Ro(t.right)){t=t.right;continue}}return mn(o.root,!1),i}function RIe(o){let e=o.root;const t=[];let i=0;for(;e!==jt;){if(Ro(e)){mn(e.left,!1),mn(e.right,!1),e=e.parent;continue}if(e.left!==jt&&!Ro(e.left)){e=e.left;continue}if(e.right!==jt&&!Ro(e.right)){e=e.right;continue}t[i++]=e,mn(e,!0)}return mn(o.root,!1),t}function MIe(o,e,t,i,n){let s=o.root,r=0,a=0,l=0;const c=[];let u=0;for(;s!==jt;){if(Ro(s)){mn(s.left,!1),mn(s.right,!1),s===s.parent.right&&(r-=s.parent.delta),s=s.parent;continue}if(s.left!==jt&&!Ro(s.left)){s=s.left;continue}a=r+s.start,l=r+s.end,s.setCachedOffsets(a,l,i);let f=!0;if(e&&s.ownerId&&s.ownerId!==e&&(f=!1),t&&Tse(s)&&(f=!1),n&&!Nse(s)&&(f=!1),f&&(c[u++]=s),mn(s,!0),s.right!==jt&&!Ro(s.right)){r+=s.delta,s=s.right;continue}}return mn(o.root,!1),c}function AIe(o,e,t,i,n,s,r){let a=o.root,l=0,c=0,u=0,f=0;const g=[];let p=0;for(;a!==jt;){if(Ro(a)){mn(a.left,!1),mn(a.right,!1),a===a.parent.right&&(l-=a.parent.delta),a=a.parent;continue}if(!Ro(a.left)){if(c=l+a.maxEnd,c<e){mn(a,!0);continue}if(a.left!==jt){a=a.left;continue}}if(u=l+a.start,u>t){mn(a,!0);continue}if(f=l+a.end,f>=e){a.setCachedOffsets(u,f,s);let _=!0;i&&a.ownerId&&a.ownerId!==i&&(_=!1),n&&Tse(a)&&(_=!1),r&&!Nse(a)&&(_=!1),_&&(g[p++]=a)}if(mn(a,!0),a.right!==jt&&!Ro(a.right)){l+=a.delta,a=a.right;continue}}return mn(o.root,!1),g}function EQ(o,e){if(o.root===jt)return e.parent=jt,e.left=jt,e.right=jt,wn(e,0),o.root=e,o.root;PIe(o,e),cp(e.parent);let t=e;for(;t!==o.root&&aa(t.parent)===1;)if(t.parent===t.parent.parent.left){const i=t.parent.parent.right;aa(i)===1?(wn(t.parent,0),wn(i,0),wn(t.parent.parent,1),t=t.parent.parent):(t===t.parent.right&&(t=t.parent,SL(o,t)),wn(t.parent,0),wn(t.parent.parent,1),LL(o,t.parent.parent))}else{const i=t.parent.parent.left;aa(i)===1?(wn(t.parent,0),wn(i,0),wn(t.parent.parent,1),t=t.parent.parent):(t===t.parent.left&&(t=t.parent,LL(o,t)),wn(t.parent,0),wn(t.parent.parent,1),SL(o,t.parent.parent))}return wn(o.root,0),e}function PIe(o,e){let t=0,i=o.root;const n=e.start,s=e.end;for(;;)if(FIe(n,s,i.start+t,i.end+t)<0)if(i.left===jt){e.start-=t,e.end-=t,e.maxEnd-=t,i.left=e;break}else i=i.left;else if(i.right===jt){e.start-=t+i.delta,e.end-=t+i.delta,e.maxEnd-=t+i.delta,i.right=e;break}else t+=i.delta,i=i.right;e.parent=i,e.left=jt,e.right=jt,wn(e,1)}function IQ(o,e){let t,i;if(e.left===jt?(t=e.right,i=e,t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(o.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta):e.right===jt?(t=e.left,i=e):(i=OIe(e.right),t=i.right,t.start+=i.delta,t.end+=i.delta,t.delta+=i.delta,(t.delta<-1073741824||t.delta>1073741824)&&(o.requestNormalizeDelta=!0),i.start+=e.delta,i.end+=e.delta,i.delta=e.delta,(i.delta<-1073741824||i.delta>1073741824)&&(o.requestNormalizeDelta=!0)),i===o.root){o.root=t,wn(t,0),e.detach(),I3(),_m(t),o.root.parent=jt;return}const n=aa(i)===1;if(i===i.parent.left?i.parent.left=t:i.parent.right=t,i===e?t.parent=i.parent:(i.parent===e?t.parent=i:t.parent=i.parent,i.left=e.left,i.right=e.right,i.parent=e.parent,wn(i,aa(e)),e===o.root?o.root=i:e===e.parent.left?e.parent.left=i:e.parent.right=i,i.left!==jt&&(i.left.parent=i),i.right!==jt&&(i.right.parent=i)),e.detach(),n){cp(t.parent),i!==e&&(cp(i),cp(i.parent)),I3();return}cp(t),cp(t.parent),i!==e&&(cp(i),cp(i.parent));let s;for(;t!==o.root&&aa(t)===0;)t===t.parent.left?(s=t.parent.right,aa(s)===1&&(wn(s,0),wn(t.parent,1),SL(o,t.parent),s=t.parent.right),aa(s.left)===0&&aa(s.right)===0?(wn(s,1),t=t.parent):(aa(s.right)===0&&(wn(s.left,0),wn(s,1),LL(o,s),s=t.parent.right),wn(s,aa(t.parent)),wn(t.parent,0),wn(s.right,0),SL(o,t.parent),t=o.root)):(s=t.parent.left,aa(s)===1&&(wn(s,0),wn(t.parent,1),LL(o,t.parent),s=t.parent.left),aa(s.left)===0&&aa(s.right)===0?(wn(s,1),t=t.parent):(aa(s.left)===0&&(wn(s.right,0),wn(s,1),SL(o,s),s=t.parent.left),wn(s,aa(t.parent)),wn(t.parent,0),wn(s.left,0),LL(o,t.parent),t=o.root));wn(t,0),I3()}function OIe(o){for(;o.left!==jt;)o=o.left;return o}function I3(){jt.parent=jt,jt.delta=0,jt.start=0,jt.end=0}function SL(o,e){const t=e.right;t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(o.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta,e.right=t.left,t.left!==jt&&(t.left.parent=e),t.parent=e.parent,e.parent===jt?o.root=t:e===e.parent.left?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t,_m(e),_m(t)}function LL(o,e){const t=e.left;e.delta-=t.delta,(e.delta<-1073741824||e.delta>1073741824)&&(o.requestNormalizeDelta=!0),e.start-=t.delta,e.end-=t.delta,e.left=t.right,t.right!==jt&&(t.right.parent=e),t.parent=e.parent,e.parent===jt?o.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t,_m(e),_m(t)}function Mse(o){let e=o.end;if(o.left!==jt){const t=o.left.maxEnd;t>e&&(e=t)}if(o.right!==jt){const t=o.right.maxEnd+o.delta;t>e&&(e=t)}return e}function _m(o){o.maxEnd=Mse(o)}function cp(o){for(;o!==jt;){const e=Mse(o);if(o.maxEnd===e)return;o.maxEnd=e,o=o.parent}}function FIe(o,e,t,i){return o===t?e-i:o-t}class H9{constructor(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==At)return OH(this.right);let e=this;for(;e.parent!==At&&e.parent.left!==e;)e=e.parent;return e.parent===At?At:e.parent}prev(){if(this.left!==At)return Ase(this.left);let e=this;for(;e.parent!==At&&e.parent.right!==e;)e=e.parent;return e.parent===At?At:e.parent}detach(){this.parent=null,this.left=null,this.right=null}}const At=new H9(null,0);At.parent=At;At.left=At;At.right=At;At.color=0;function OH(o){for(;o.left!==At;)o=o.left;return o}function Ase(o){for(;o.right!==At;)o=o.right;return o}function FH(o){return o===At?0:o.size_left+o.piece.length+FH(o.right)}function BH(o){return o===At?0:o.lf_left+o.piece.lineFeedCnt+BH(o.right)}function T3(){At.parent=At}function xL(o,e){const t=e.right;t.size_left+=e.size_left+(e.piece?e.piece.length:0),t.lf_left+=e.lf_left+(e.piece?e.piece.lineFeedCnt:0),e.right=t.left,t.left!==At&&(t.left.parent=e),t.parent=e.parent,e.parent===At?o.root=t:e.parent.left===e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t}function DL(o,e){const t=e.left;e.left=t.right,t.right!==At&&(t.right.parent=e),t.parent=e.parent,e.size_left-=t.size_left+(t.piece?t.piece.length:0),e.lf_left-=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),e.parent===At?o.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t}function fT(o,e){let t,i;if(e.left===At?(i=e,t=i.right):e.right===At?(i=e,t=i.left):(i=OH(e.right),t=i.right),i===o.root){o.root=t,t.color=0,e.detach(),T3(),o.root.parent=At;return}const n=i.color===1;if(i===i.parent.left?i.parent.left=t:i.parent.right=t,i===e?(t.parent=i.parent,QS(o,t)):(i.parent===e?t.parent=i:t.parent=i.parent,QS(o,t),i.left=e.left,i.right=e.right,i.parent=e.parent,i.color=e.color,e===o.root?o.root=i:e===e.parent.left?e.parent.left=i:e.parent.right=i,i.left!==At&&(i.left.parent=i),i.right!==At&&(i.right.parent=i),i.size_left=e.size_left,i.lf_left=e.lf_left,QS(o,i)),e.detach(),t.parent.left===t){const r=FH(t),a=BH(t);if(r!==t.parent.size_left||a!==t.parent.lf_left){const l=r-t.parent.size_left,c=a-t.parent.lf_left;t.parent.size_left=r,t.parent.lf_left=a,af(o,t.parent,l,c)}}if(QS(o,t.parent),n){T3();return}let s;for(;t!==o.root&&t.color===0;)t===t.parent.left?(s=t.parent.right,s.color===1&&(s.color=0,t.parent.color=1,xL(o,t.parent),s=t.parent.right),s.left.color===0&&s.right.color===0?(s.color=1,t=t.parent):(s.right.color===0&&(s.left.color=0,s.color=1,DL(o,s),s=t.parent.right),s.color=t.parent.color,t.parent.color=0,s.right.color=0,xL(o,t.parent),t=o.root)):(s=t.parent.left,s.color===1&&(s.color=0,t.parent.color=1,DL(o,t.parent),s=t.parent.left),s.left.color===0&&s.right.color===0?(s.color=1,t=t.parent):(s.left.color===0&&(s.right.color=0,s.color=1,xL(o,s),s=t.parent.left),s.color=t.parent.color,t.parent.color=0,s.left.color=0,DL(o,t.parent),t=o.root));t.color=0,T3()}function TQ(o,e){for(QS(o,e);e!==o.root&&e.parent.color===1;)if(e.parent===e.parent.parent.left){const t=e.parent.parent.right;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.right&&(e=e.parent,xL(o,e)),e.parent.color=0,e.parent.parent.color=1,DL(o,e.parent.parent))}else{const t=e.parent.parent.left;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.left&&(e=e.parent,DL(o,e)),e.parent.color=0,e.parent.parent.color=1,xL(o,e.parent.parent))}o.root.color=0}function af(o,e,t,i){for(;e!==o.root&&e!==At;)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=i),e=e.parent}function QS(o,e){let t=0,i=0;if(e!==o.root){for(;e!==o.root&&e===e.parent.right;)e=e.parent;if(e!==o.root)for(e=e.parent,t=FH(e.left)-e.size_left,i=BH(e.left)-e.lf_left,e.size_left+=t,e.lf_left+=i;e!==o.root&&(t!==0||i!==0);)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=i),e=e.parent}}const Xh=65535;function Pse(o){let e;return o[o.length-1]<65536?e=new Uint16Array(o.length):e=new Uint32Array(o.length),e.set(o,0),e}class BIe{constructor(e,t,i,n,s){this.lineStarts=e,this.cr=t,this.lf=i,this.crlf=n,this.isBasicASCII=s}}function df(o,e=!0){const t=[0];let i=1;for(let n=0,s=o.length;n<s;n++){const r=o.charCodeAt(n);r===13?n+1<s&&o.charCodeAt(n+1)===10?(t[i++]=n+2,n++):t[i++]=n+1:r===10&&(t[i++]=n+1)}return e?Pse(t):t}function WIe(o,e){o.length=0,o[0]=0;let t=1,i=0,n=0,s=0,r=!0;for(let l=0,c=e.length;l<c;l++){const u=e.charCodeAt(l);u===13?l+1<c&&e.charCodeAt(l+1)===10?(s++,o[t++]=l+2,l++):(i++,o[t++]=l+1):u===10?(n++,o[t++]=l+1):r&&u!==9&&(u<32||u>126)&&(r=!1)}const a=new BIe(Pse(o),i,n,s,r);return o.length=0,a}class Pa{constructor(e,t,i,n,s){this.bufferIndex=e,this.start=t,this.end=i,this.lineFeedCnt=n,this.length=s}}class J_{constructor(e,t){this.buffer=e,this.lineStarts=t}}class VIe{constructor(e,t){this._pieces=[],this._tree=e,this._BOM=t,this._index=0,e.root!==At&&e.iterate(e.root,i=>(i!==At&&this._pieces.push(i.piece),!0))}read(){return this._pieces.length===0?this._index===0?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:this._index===0?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}}class HIe{constructor(e){this._limit=e,this._cache=[]}get(e){for(let t=this._cache.length-1;t>=0;t--){const i=this._cache[t];if(i.nodeStartOffset<=e&&i.nodeStartOffset+i.node.piece.length>=e)return i}return null}get2(e){for(let t=this._cache.length-1;t>=0;t--){const i=this._cache[t];if(i.nodeStartLineNumber&&i.nodeStartLineNumber<e&&i.nodeStartLineNumber+i.node.piece.lineFeedCnt>=e)return i}return null}set(e){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(e)}validate(e){let t=!1;const i=this._cache;for(let n=0;n<i.length;n++){const s=i[n];if(s.node.parent===null||s.nodeStartOffset>=e){i[n]=null,t=!0;continue}}if(t){const n=[];for(const s of i)s!==null&&n.push(s);this._cache=n}}}class zIe{constructor(e,t,i){this.create(e,t,i)}create(e,t,i){this._buffers=[new J_("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=At,this._lineCnt=1,this._length=0,this._EOL=t,this._EOLLength=t.length,this._EOLNormalized=i;let n=null;for(let s=0,r=e.length;s<r;s++)if(e[s].buffer.length>0){e[s].lineStarts||(e[s].lineStarts=df(e[s].buffer));const a=new Pa(s+1,{line:0,column:0},{line:e[s].lineStarts.length-1,column:e[s].buffer.length-e[s].lineStarts[e[s].lineStarts.length-1]},e[s].lineStarts.length-1,e[s].buffer.length);this._buffers.push(e[s]),n=this.rbInsertRight(n,a)}this._searchCache=new HIe(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()}normalizeEOL(e){const t=Xh,i=t-Math.floor(t/3),n=i*2;let s="",r=0;const a=[];if(this.iterate(this.root,l=>{const c=this.getNodeContent(l),u=c.length;if(r<=i||r+u<n)return s+=c,r+=u,!0;const f=s.replace(/\r\n|\r|\n/g,e);return a.push(new J_(f,df(f))),s=c,r=u,!0}),r>0){const l=s.replace(/\r\n|\r|\n/g,e);a.push(new J_(l,df(l)))}this.create(a,e,!0)}getEOL(){return this._EOL}setEOL(e){this._EOL=e,this._EOLLength=this._EOL.length,this.normalizeEOL(e)}createSnapshot(e){return new VIe(this,e)}getOffsetAt(e,t){let i=0,n=this.root;for(;n!==At;)if(n.left!==At&&n.lf_left+1>=e)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt+1>=e){i+=n.size_left;const s=this.getAccumulatedValue(n,e-n.lf_left-2);return i+=s+t-1}else e-=n.lf_left+n.piece.lineFeedCnt,i+=n.size_left+n.piece.length,n=n.right;return i}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let t=this.root,i=0;const n=e;for(;t!==At;)if(t.size_left!==0&&t.size_left>=e)t=t.left;else if(t.size_left+t.piece.length>=e){const s=this.getIndexOf(t,e-t.size_left);if(i+=t.lf_left+s.index,s.index===0){const r=this.getOffsetAt(i+1,1),a=n-r;return new Z(i+1,a+1)}return new Z(i+1,s.remainder+1)}else if(e-=t.size_left+t.piece.length,i+=t.lf_left+t.piece.lineFeedCnt,t.right===At){const s=this.getOffsetAt(i+1,1),r=n-e-s;return new Z(i+1,r+1)}else t=t.right;return new Z(1,1)}getValueInRange(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";const i=this.nodeAt2(e.startLineNumber,e.startColumn),n=this.nodeAt2(e.endLineNumber,e.endColumn),s=this.getValueInRange2(i,n);return t?t!==this._EOL||!this._EOLNormalized?s.replace(/\r\n|\r|\n/g,t):t===this.getEOL()&&this._EOLNormalized?s:s.replace(/\r\n|\r|\n/g,t):s}getValueInRange2(e,t){if(e.node===t.node){const a=e.node,l=this._buffers[a.piece.bufferIndex].buffer,c=this.offsetInBuffer(a.piece.bufferIndex,a.piece.start);return l.substring(c+e.remainder,c+t.remainder)}let i=e.node;const n=this._buffers[i.piece.bufferIndex].buffer,s=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);let r=n.substring(s+e.remainder,s+i.piece.length);for(i=i.next();i!==At;){const a=this._buffers[i.piece.bufferIndex].buffer,l=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);if(i===t.node){r+=a.substring(l,l+t.remainder);break}else r+=a.substr(l,i.piece.length);i=i.next()}return r}getLinesContent(){const e=[];let t=0,i="",n=!1;return this.iterate(this.root,s=>{if(s===At)return!0;const r=s.piece;let a=r.length;if(a===0)return!0;const l=this._buffers[r.bufferIndex].buffer,c=this._buffers[r.bufferIndex].lineStarts,u=r.start.line,f=r.end.line;let g=c[u]+r.start.column;if(n&&(l.charCodeAt(g)===10&&(g++,a--),e[t++]=i,i="",n=!1,a===0))return!0;if(u===f)return!this._EOLNormalized&&l.charCodeAt(g+a-1)===13?(n=!0,i+=l.substr(g,a-1)):i+=l.substr(g,a),!0;i+=this._EOLNormalized?l.substring(g,Math.max(g,c[u+1]-this._EOLLength)):l.substring(g,c[u+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=i;for(let p=u+1;p<f;p++)i=this._EOLNormalized?l.substring(c[p],c[p+1]-this._EOLLength):l.substring(c[p],c[p+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=i;return!this._EOLNormalized&&l.charCodeAt(c[f]+r.end.column-1)===13?(n=!0,r.end.column===0?t--:i=l.substr(c[f],r.end.column-1)):i=l.substr(c[f],r.end.column),!0}),n&&(e[t++]=i,i=""),e[t++]=i,e}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(e){return this._lastVisitedLine.lineNumber===e?this._lastVisitedLine.value:(this._lastVisitedLine.lineNumber=e,e===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(e):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(e,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,""),this._lastVisitedLine.value)}_getCharCode(e){if(e.remainder===e.node.piece.length){const t=e.node.next();if(!t)return 0;const i=this._buffers[t.piece.bufferIndex],n=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start);return i.buffer.charCodeAt(n)}else{const t=this._buffers[e.node.piece.bufferIndex],n=this.offsetInBuffer(e.node.piece.bufferIndex,e.node.piece.start)+e.remainder;return t.buffer.charCodeAt(n)}}getLineCharCode(e,t){const i=this.nodeAt2(e,t+1);return this._getCharCode(i)}getLineLength(e){if(e===this.getLineCount()){const t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this._EOLLength}findMatchesInNode(e,t,i,n,s,r,a,l,c,u,f){const g=this._buffers[e.piece.bufferIndex],p=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start),_=this.offsetInBuffer(e.piece.bufferIndex,s),b=this.offsetInBuffer(e.piece.bufferIndex,r);let y;const S={line:0,column:0};let L,x;t._wordSeparators?(L=g.buffer.substring(_,b),x=D=>D+_,t.reset(0)):(L=g.buffer,x=D=>D,t.reset(_));do if(y=t.next(L),y){if(x(y.index)>=b)return u;this.positionInBuffer(e,x(y.index)-p,S);const D=this.getLineFeedCnt(e.piece.bufferIndex,s,S),E=S.line===s.line?S.column-s.column+n:S.column+1,N=E+y[0].length;if(f[u++]=K_(new A(i+D,E,i+D,N),y,l),x(y.index)+y[0].length>=b||u>=c)return u}while(y);return u}findMatchesLineByLine(e,t,i,n){const s=[];let r=0;const a=new eC(t.wordSeparators,t.regex);let l=this.nodeAt2(e.startLineNumber,e.startColumn);if(l===null)return[];const c=this.nodeAt2(e.endLineNumber,e.endColumn);if(c===null)return[];let u=this.positionInBuffer(l.node,l.remainder);const f=this.positionInBuffer(c.node,c.remainder);if(l.node===c.node)return this.findMatchesInNode(l.node,a,e.startLineNumber,e.startColumn,u,f,t,i,n,r,s),s;let g=e.startLineNumber,p=l.node;for(;p!==c.node;){const b=this.getLineFeedCnt(p.piece.bufferIndex,u,p.piece.end);if(b>=1){const S=this._buffers[p.piece.bufferIndex].lineStarts,L=this.offsetInBuffer(p.piece.bufferIndex,p.piece.start),x=S[u.line+b],D=g===e.startLineNumber?e.startColumn:1;if(r=this.findMatchesInNode(p,a,g,D,u,this.positionInBuffer(p,x-L),t,i,n,r,s),r>=n)return s;g+=b}const y=g===e.startLineNumber?e.startColumn-1:0;if(g===e.endLineNumber){const S=this.getLineContent(g).substring(y,e.endColumn-1);return r=this._findMatchesInLine(t,a,S,e.endLineNumber,y,r,s,i,n),s}if(r=this._findMatchesInLine(t,a,this.getLineContent(g).substr(y),g,y,r,s,i,n),r>=n)return s;g++,l=this.nodeAt2(g,1),p=l.node,u=this.positionInBuffer(l.node,l.remainder)}if(g===e.endLineNumber){const b=g===e.startLineNumber?e.startColumn-1:0,y=this.getLineContent(g).substring(b,e.endColumn-1);return r=this._findMatchesInLine(t,a,y,e.endLineNumber,b,r,s,i,n),s}const _=g===e.startLineNumber?e.startColumn:1;return r=this.findMatchesInNode(c.node,a,g,_,u,f,t,i,n,r,s),s}_findMatchesInLine(e,t,i,n,s,r,a,l,c){const u=e.wordSeparators;if(!l&&e.simpleSearch){const g=e.simpleSearch,p=g.length,_=i.length;let b=-p;for(;(b=i.indexOf(g,b+p))!==-1;)if((!u||sH(u,i,_,b,p))&&(a[r++]=new rx(new A(n,b+1+s,n,b+1+p+s),null),r>=c))return r;return r}let f;t.reset(0);do if(f=t.next(i),f&&(a[r++]=K_(new A(n,f.index+1+s,n,f.index+1+f[0].length+s),f,l),r>=c))return r;while(f);return r}insert(e,t,i=!1){if(this._EOLNormalized=this._EOLNormalized&&i,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==At){const{node:n,remainder:s,nodeStartOffset:r}=this.nodeAt(e),a=n.piece,l=a.bufferIndex,c=this.positionInBuffer(n,s);if(n.piece.bufferIndex===0&&a.end.line===this._lastChangeBufferPos.line&&a.end.column===this._lastChangeBufferPos.column&&r+a.length===e&&t.length<Xh){this.appendToNode(n,t),this.computeBufferMetadata();return}if(r===e)this.insertContentToNodeLeft(t,n),this._searchCache.validate(e);else if(r+n.piece.length>e){const u=[];let f=new Pa(a.bufferIndex,c,a.end,this.getLineFeedCnt(a.bufferIndex,c,a.end),this.offsetInBuffer(l,a.end)-this.offsetInBuffer(l,c));if(this.shouldCheckCRLF()&&this.endWithCR(t)&&this.nodeCharCodeAt(n,s)===10){const b={line:f.start.line+1,column:0};f=new Pa(f.bufferIndex,b,f.end,this.getLineFeedCnt(f.bufferIndex,b,f.end),f.length-1),t+=`
`}if(this.shouldCheckCRLF()&&this.startWithLF(t))if(this.nodeCharCodeAt(n,s-1)===13){const b=this.positionInBuffer(n,s-1);this.deleteNodeTail(n,b),t="\r"+t,n.piece.length===0&&u.push(n)}else this.deleteNodeTail(n,c);else this.deleteNodeTail(n,c);const g=this.createNewPieces(t);f.length>0&&this.rbInsertRight(n,f);let p=n;for(let _=0;_<g.length;_++)p=this.rbInsertRight(p,g[_]);this.deleteNodes(u)}else this.insertContentToNodeRight(t,n)}else{const n=this.createNewPieces(t);let s=this.rbInsertLeft(null,n[0]);for(let r=1;r<n.length;r++)s=this.rbInsertRight(s,n[r])}this.computeBufferMetadata()}delete(e,t){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",t<=0||this.root===At)return;const i=this.nodeAt(e),n=this.nodeAt(e+t),s=i.node,r=n.node;if(s===r){const g=this.positionInBuffer(s,i.remainder),p=this.positionInBuffer(s,n.remainder);if(i.nodeStartOffset===e){if(t===s.piece.length){const _=s.next();fT(this,s),this.validateCRLFWithPrevNode(_),this.computeBufferMetadata();return}this.deleteNodeHead(s,p),this._searchCache.validate(e),this.validateCRLFWithPrevNode(s),this.computeBufferMetadata();return}if(i.nodeStartOffset+s.piece.length===e+t){this.deleteNodeTail(s,g),this.validateCRLFWithNextNode(s),this.computeBufferMetadata();return}this.shrinkNode(s,g,p),this.computeBufferMetadata();return}const a=[],l=this.positionInBuffer(s,i.remainder);this.deleteNodeTail(s,l),this._searchCache.validate(e),s.piece.length===0&&a.push(s);const c=this.positionInBuffer(r,n.remainder);this.deleteNodeHead(r,c),r.piece.length===0&&a.push(r);const u=s.next();for(let g=u;g!==At&&g!==r;g=g.next())a.push(g);const f=s.piece.length===0?s.prev():s;this.deleteNodes(a),this.validateCRLFWithNextNode(f),this.computeBufferMetadata()}insertContentToNodeLeft(e,t){const i=[];if(this.shouldCheckCRLF()&&this.endWithCR(e)&&this.startWithLF(t)){const r=t.piece,a={line:r.start.line+1,column:0},l=new Pa(r.bufferIndex,a,r.end,this.getLineFeedCnt(r.bufferIndex,a,r.end),r.length-1);t.piece=l,e+=`
`,af(this,t,-1,-1),t.piece.length===0&&i.push(t)}const n=this.createNewPieces(e);let s=this.rbInsertLeft(t,n[n.length-1]);for(let r=n.length-2;r>=0;r--)s=this.rbInsertLeft(s,n[r]);this.validateCRLFWithPrevNode(s),this.deleteNodes(i)}insertContentToNodeRight(e,t){this.adjustCarriageReturnFromNext(e,t)&&(e+=`
`);const i=this.createNewPieces(e),n=this.rbInsertRight(t,i[0]);let s=n;for(let r=1;r<i.length;r++)s=this.rbInsertRight(s,i[r]);this.validateCRLFWithPrevNode(n)}positionInBuffer(e,t,i){const n=e.piece,s=e.piece.bufferIndex,r=this._buffers[s].lineStarts,l=r[n.start.line]+n.start.column+t;let c=n.start.line,u=n.end.line,f=0,g=0,p=0;for(;c<=u&&(f=c+(u-c)/2|0,p=r[f],f!==u);)if(g=r[f+1],l<p)u=f-1;else if(l>=g)c=f+1;else break;return i?(i.line=f,i.column=l-p,null):{line:f,column:l-p}}getLineFeedCnt(e,t,i){if(i.column===0)return i.line-t.line;const n=this._buffers[e].lineStarts;if(i.line===n.length-1)return i.line-t.line;const s=n[i.line+1],r=n[i.line]+i.column;if(s>r+1)return i.line-t.line;const a=r-1;return this._buffers[e].buffer.charCodeAt(a)===13?i.line-t.line+1:i.line-t.line}offsetInBuffer(e,t){return this._buffers[e].lineStarts[t.line]+t.column}deleteNodes(e){for(let t=0;t<e.length;t++)fT(this,e[t])}createNewPieces(e){if(e.length>Xh){const u=[];for(;e.length>Xh;){const g=e.charCodeAt(Xh-1);let p;g===13||g>=55296&&g<=56319?(p=e.substring(0,Xh-1),e=e.substring(Xh-1)):(p=e.substring(0,Xh),e=e.substring(Xh));const _=df(p);u.push(new Pa(this._buffers.length,{line:0,column:0},{line:_.length-1,column:p.length-_[_.length-1]},_.length-1,p.length)),this._buffers.push(new J_(p,_))}const f=df(e);return u.push(new Pa(this._buffers.length,{line:0,column:0},{line:f.length-1,column:e.length-f[f.length-1]},f.length-1,e.length)),this._buffers.push(new J_(e,f)),u}let t=this._buffers[0].buffer.length;const i=df(e,!1);let n=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===t&&t!==0&&this.startWithLF(e)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},n=this._lastChangeBufferPos;for(let u=0;u<i.length;u++)i[u]+=t+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(i.slice(1)),this._buffers[0].buffer+="_"+e,t+=1}else{if(t!==0)for(let u=0;u<i.length;u++)i[u]+=t;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(i.slice(1)),this._buffers[0].buffer+=e}const s=this._buffers[0].buffer.length,r=this._buffers[0].lineStarts.length-1,a=s-this._buffers[0].lineStarts[r],l={line:r,column:a},c=new Pa(0,n,l,this.getLineFeedCnt(0,n,l),s-t);return this._lastChangeBufferPos=l,[c]}getLineRawContent(e,t=0){let i=this.root,n="";const s=this._searchCache.get2(e);if(s){i=s.node;const r=this.getAccumulatedValue(i,e-s.nodeStartLineNumber-1),a=this._buffers[i.piece.bufferIndex].buffer,l=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);if(s.nodeStartLineNumber+i.piece.lineFeedCnt===e)n=a.substring(l+r,l+i.piece.length);else{const c=this.getAccumulatedValue(i,e-s.nodeStartLineNumber);return a.substring(l+r,l+c-t)}}else{let r=0;const a=e;for(;i!==At;)if(i.left!==At&&i.lf_left>=e-1)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt>e-1){const l=this.getAccumulatedValue(i,e-i.lf_left-2),c=this.getAccumulatedValue(i,e-i.lf_left-1),u=this._buffers[i.piece.bufferIndex].buffer,f=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);return r+=i.size_left,this._searchCache.set({node:i,nodeStartOffset:r,nodeStartLineNumber:a-(e-1-i.lf_left)}),u.substring(f+l,f+c-t)}else if(i.lf_left+i.piece.lineFeedCnt===e-1){const l=this.getAccumulatedValue(i,e-i.lf_left-2),c=this._buffers[i.piece.bufferIndex].buffer,u=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);n=c.substring(u+l,u+i.piece.length);break}else e-=i.lf_left+i.piece.lineFeedCnt,r+=i.size_left+i.piece.length,i=i.right}for(i=i.next();i!==At;){const r=this._buffers[i.piece.bufferIndex].buffer;if(i.piece.lineFeedCnt>0){const a=this.getAccumulatedValue(i,0),l=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);return n+=r.substring(l,l+a-t),n}else{const a=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);n+=r.substr(a,i.piece.length)}i=i.next()}return n}computeBufferMetadata(){let e=this.root,t=1,i=0;for(;e!==At;)t+=e.lf_left+e.piece.lineFeedCnt,i+=e.size_left+e.piece.length,e=e.right;this._lineCnt=t,this._length=i,this._searchCache.validate(this._length)}getIndexOf(e,t){const i=e.piece,n=this.positionInBuffer(e,t),s=n.line-i.start.line;if(this.offsetInBuffer(i.bufferIndex,i.end)-this.offsetInBuffer(i.bufferIndex,i.start)===t){const r=this.getLineFeedCnt(e.piece.bufferIndex,i.start,n);if(r!==s)return{index:r,remainder:0}}return{index:s,remainder:n.column}}getAccumulatedValue(e,t){if(t<0)return 0;const i=e.piece,n=this._buffers[i.bufferIndex].lineStarts,s=i.start.line+t+1;return s>i.end.line?n[i.end.line]+i.end.column-n[i.start.line]-i.start.column:n[s]-n[i.start.line]-i.start.column}deleteNodeTail(e,t){const i=e.piece,n=i.lineFeedCnt,s=this.offsetInBuffer(i.bufferIndex,i.end),r=t,a=this.offsetInBuffer(i.bufferIndex,r),l=this.getLineFeedCnt(i.bufferIndex,i.start,r),c=l-n,u=a-s,f=i.length+u;e.piece=new Pa(i.bufferIndex,i.start,r,l,f),af(this,e,u,c)}deleteNodeHead(e,t){const i=e.piece,n=i.lineFeedCnt,s=this.offsetInBuffer(i.bufferIndex,i.start),r=t,a=this.getLineFeedCnt(i.bufferIndex,r,i.end),l=this.offsetInBuffer(i.bufferIndex,r),c=a-n,u=s-l,f=i.length+u;e.piece=new Pa(i.bufferIndex,r,i.end,a,f),af(this,e,u,c)}shrinkNode(e,t,i){const n=e.piece,s=n.start,r=n.end,a=n.length,l=n.lineFeedCnt,c=t,u=this.getLineFeedCnt(n.bufferIndex,n.start,c),f=this.offsetInBuffer(n.bufferIndex,t)-this.offsetInBuffer(n.bufferIndex,s);e.piece=new Pa(n.bufferIndex,n.start,c,u,f),af(this,e,f-a,u-l);const g=new Pa(n.bufferIndex,i,r,this.getLineFeedCnt(n.bufferIndex,i,r),this.offsetInBuffer(n.bufferIndex,r)-this.offsetInBuffer(n.bufferIndex,i)),p=this.rbInsertRight(e,g);this.validateCRLFWithPrevNode(p)}appendToNode(e,t){this.adjustCarriageReturnFromNext(t,e)&&(t+=`
`);const i=this.shouldCheckCRLF()&&this.startWithLF(t)&&this.endWithCR(e),n=this._buffers[0].buffer.length;this._buffers[0].buffer+=t;const s=df(t,!1);for(let p=0;p<s.length;p++)s[p]+=n;if(i){const p=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:n-p}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(s.slice(1));const r=this._buffers[0].lineStarts.length-1,a=this._buffers[0].buffer.length-this._buffers[0].lineStarts[r],l={line:r,column:a},c=e.piece.length+t.length,u=e.piece.lineFeedCnt,f=this.getLineFeedCnt(0,e.piece.start,l),g=f-u;e.piece=new Pa(e.piece.bufferIndex,e.piece.start,l,f,c),this._lastChangeBufferPos=l,af(this,e,t.length,g)}nodeAt(e){let t=this.root;const i=this._searchCache.get(e);if(i)return{node:i.node,nodeStartOffset:i.nodeStartOffset,remainder:e-i.nodeStartOffset};let n=0;for(;t!==At;)if(t.size_left>e)t=t.left;else if(t.size_left+t.piece.length>=e){n+=t.size_left;const s={node:t,remainder:e-t.size_left,nodeStartOffset:n};return this._searchCache.set(s),s}else e-=t.size_left+t.piece.length,n+=t.size_left+t.piece.length,t=t.right;return null}nodeAt2(e,t){let i=this.root,n=0;for(;i!==At;)if(i.left!==At&&i.lf_left>=e-1)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt>e-1){const s=this.getAccumulatedValue(i,e-i.lf_left-2),r=this.getAccumulatedValue(i,e-i.lf_left-1);return n+=i.size_left,{node:i,remainder:Math.min(s+t-1,r),nodeStartOffset:n}}else if(i.lf_left+i.piece.lineFeedCnt===e-1){const s=this.getAccumulatedValue(i,e-i.lf_left-2);if(s+t-1<=i.piece.length)return{node:i,remainder:s+t-1,nodeStartOffset:n};t-=i.piece.length-s;break}else e-=i.lf_left+i.piece.lineFeedCnt,n+=i.size_left+i.piece.length,i=i.right;for(i=i.next();i!==At;){if(i.piece.lineFeedCnt>0){const s=this.getAccumulatedValue(i,0),r=this.offsetOfNode(i);return{node:i,remainder:Math.min(t-1,s),nodeStartOffset:r}}else if(i.piece.length>=t-1){const s=this.offsetOfNode(i);return{node:i,remainder:t-1,nodeStartOffset:s}}else t-=i.piece.length;i=i.next()}return null}nodeCharCodeAt(e,t){if(e.piece.lineFeedCnt<1)return-1;const i=this._buffers[e.piece.bufferIndex],n=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start)+t;return i.buffer.charCodeAt(n)}offsetOfNode(e){if(!e)return 0;let t=e.size_left;for(;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}shouldCheckCRLF(){return!(this._EOLNormalized&&this._EOL===`
`)}startWithLF(e){if(typeof e=="string")return e.charCodeAt(0)===10;if(e===At||e.piece.lineFeedCnt===0)return!1;const t=e.piece,i=this._buffers[t.bufferIndex].lineStarts,n=t.start.line,s=i[n]+t.start.column;return n===i.length-1||i[n+1]>s+1?!1:this._buffers[t.bufferIndex].buffer.charCodeAt(s)===10}endWithCR(e){return typeof e=="string"?e.charCodeAt(e.length-1)===13:e===At||e.piece.lineFeedCnt===0?!1:this.nodeCharCodeAt(e,e.piece.length-1)===13}validateCRLFWithPrevNode(e){if(this.shouldCheckCRLF()&&this.startWithLF(e)){const t=e.prev();this.endWithCR(t)&&this.fixCRLF(t,e)}}validateCRLFWithNextNode(e){if(this.shouldCheckCRLF()&&this.endWithCR(e)){const t=e.next();this.startWithLF(t)&&this.fixCRLF(e,t)}}fixCRLF(e,t){const i=[],n=this._buffers[e.piece.bufferIndex].lineStarts;let s;e.piece.end.column===0?s={line:e.piece.end.line-1,column:n[e.piece.end.line]-n[e.piece.end.line-1]-1}:s={line:e.piece.end.line,column:e.piece.end.column-1};const r=e.piece.length-1,a=e.piece.lineFeedCnt-1;e.piece=new Pa(e.piece.bufferIndex,e.piece.start,s,a,r),af(this,e,-1,-1),e.piece.length===0&&i.push(e);const l={line:t.piece.start.line+1,column:0},c=t.piece.length-1,u=this.getLineFeedCnt(t.piece.bufferIndex,l,t.piece.end);t.piece=new Pa(t.piece.bufferIndex,l,t.piece.end,u,c),af(this,t,-1,-1),t.piece.length===0&&i.push(t);const f=this.createNewPieces(`\r
`);this.rbInsertRight(e,f[0]);for(let g=0;g<i.length;g++)fT(this,i[g])}adjustCarriageReturnFromNext(e,t){if(this.shouldCheckCRLF()&&this.endWithCR(e)){const i=t.next();if(this.startWithLF(i)){if(e+=`
`,i.piece.length===1)fT(this,i);else{const n=i.piece,s={line:n.start.line+1,column:0},r=n.length-1,a=this.getLineFeedCnt(n.bufferIndex,s,n.end);i.piece=new Pa(n.bufferIndex,s,n.end,a,r),af(this,i,-1,-1)}return!0}}return!1}iterate(e,t){if(e===At)return t(At);const i=this.iterate(e.left,t);return i&&t(e)&&this.iterate(e.right,t)}getNodeContent(e){if(e===At)return"";const t=this._buffers[e.piece.bufferIndex],i=e.piece,n=this.offsetInBuffer(i.bufferIndex,i.start),s=this.offsetInBuffer(i.bufferIndex,i.end);return t.buffer.substring(n,s)}getPieceContent(e){const t=this._buffers[e.bufferIndex],i=this.offsetInBuffer(e.bufferIndex,e.start),n=this.offsetInBuffer(e.bufferIndex,e.end);return t.buffer.substring(i,n)}rbInsertRight(e,t){const i=new H9(t,1);if(i.left=At,i.right=At,i.parent=At,i.size_left=0,i.lf_left=0,this.root===At)this.root=i,i.color=0;else if(e.right===At)e.right=i,i.parent=e;else{const s=OH(e.right);s.left=i,i.parent=s}return TQ(this,i),i}rbInsertLeft(e,t){const i=new H9(t,1);if(i.left=At,i.right=At,i.parent=At,i.size_left=0,i.lf_left=0,this.root===At)this.root=i,i.color=0;else if(e.left===At)e.left=i,i.parent=e;else{const n=Ase(e.left);n.right=i,i.parent=n}return TQ(this,i),i}}class FC extends J{constructor(e,t,i,n,s,r,a){super(),this._onDidChangeContent=this._register(new Y),this._BOM=t,this._mightContainNonBasicASCII=!r,this._mightContainRTL=n,this._mightContainUnusualLineTerminators=s,this._pieceTree=new zIe(e,i,a)}mightContainRTL(){return this._mightContainRTL}mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators}resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=!1}mightContainNonBasicASCII(){return this._mightContainNonBasicASCII}getBOM(){return this._BOM}getEOL(){return this._pieceTree.getEOL()}createSnapshot(e){return this._pieceTree.createSnapshot(e?this._BOM:"")}getOffsetAt(e,t){return this._pieceTree.getOffsetAt(e,t)}getPositionAt(e){return this._pieceTree.getPositionAt(e)}getRangeAt(e,t){const i=e+t,n=this.getPositionAt(e),s=this.getPositionAt(i);return new A(n.lineNumber,n.column,s.lineNumber,s.column)}getValueInRange(e,t=0){if(e.isEmpty())return"";const i=this._getEndOfLine(t);return this._pieceTree.getValueInRange(e,i)}getValueLengthInRange(e,t=0){if(e.isEmpty())return 0;if(e.startLineNumber===e.endLineNumber)return e.endColumn-e.startColumn;const i=this.getOffsetAt(e.startLineNumber,e.startColumn),n=this.getOffsetAt(e.endLineNumber,e.endColumn);let s=0;const r=this._getEndOfLine(t),a=this.getEOL();if(r.length!==a.length){const l=r.length-a.length,c=e.endLineNumber-e.startLineNumber;s=l*c}return n-i+s}getCharacterCountInRange(e,t=0){if(this._mightContainNonBasicASCII){let i=0;const n=e.startLineNumber,s=e.endLineNumber;for(let r=n;r<=s;r++){const a=this.getLineContent(r),l=r===n?e.startColumn-1:0,c=r===s?e.endColumn-1:a.length;for(let u=l;u<c;u++)qs(a.charCodeAt(u))?(i=i+1,u=u+1):i=i+1}return i+=this._getEndOfLine(t).length*(s-n),i}return this.getValueLengthInRange(e,t)}getLength(){return this._pieceTree.getLength()}getLineCount(){return this._pieceTree.getLineCount()}getLinesContent(){return this._pieceTree.getLinesContent()}getLineContent(e){return this._pieceTree.getLineContent(e)}getLineCharCode(e,t){return this._pieceTree.getLineCharCode(e,t)}getLineLength(e){return this._pieceTree.getLineLength(e)}getLineFirstNonWhitespaceColumn(e){const t=gr(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){const t=Bd(this.getLineContent(e));return t===-1?0:t+2}_getEndOfLine(e){switch(e){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(e){this._pieceTree.setEOL(e)}applyEdits(e,t,i){let n=this._mightContainRTL,s=this._mightContainUnusualLineTerminators,r=this._mightContainNonBasicASCII,a=!0,l=[];for(let b=0;b<e.length;b++){const y=e[b];a&&y._isTracked&&(a=!1);const S=y.range;if(y.text){let N=!0;r||(N=!PD(y.text),r=N),!n&&N&&(n=i1(y.text)),!s&&N&&(s=pie(y.text))}let L="",x=0,D=0,E=0;if(y.text){let N;[x,D,E,N]=pm(y.text);const M=this.getEOL();N===0||N===(M===`\r
`?2:1)?L=y.text:L=y.text.replace(/\r\n|\r|\n/g,M)}l[b]={sortIndex:b,identifier:y.identifier||null,range:S,rangeOffset:this.getOffsetAt(S.startLineNumber,S.startColumn),rangeLength:this.getValueLengthInRange(S),text:L,eolCount:x,firstLineLength:D,lastLineLength:E,forceMoveMarkers:!!y.forceMoveMarkers,isAutoWhitespaceEdit:y.isAutoWhitespaceEdit||!1}}l.sort(FC._sortOpsAscending);let c=!1;for(let b=0,y=l.length-1;b<y;b++){const S=l[b].range.getEndPosition(),L=l[b+1].range.getStartPosition();if(L.isBeforeOrEqual(S)){if(L.isBefore(S))throw new Error("Overlapping ranges are not allowed!");c=!0}}a&&(l=this._reduceOperations(l));const u=i||t?FC._getInverseEditRanges(l):[],f=[];if(t)for(let b=0;b<l.length;b++){const y=l[b],S=u[b];if(y.isAutoWhitespaceEdit&&y.range.isEmpty())for(let L=S.startLineNumber;L<=S.endLineNumber;L++){let x="";L===S.startLineNumber&&(x=this.getLineContent(y.range.startLineNumber),gr(x)!==-1)||f.push({lineNumber:L,oldContent:x})}}let g=null;if(i){let b=0;g=[];for(let y=0;y<l.length;y++){const S=l[y],L=u[y],x=this.getValueInRange(S.range),D=S.rangeOffset+b;b+=S.text.length-x.length,g[y]={sortIndex:S.sortIndex,identifier:S.identifier,range:L,text:x,textChange:new ko(S.rangeOffset,x,D,S.text)}}c||g.sort((y,S)=>y.sortIndex-S.sortIndex)}this._mightContainRTL=n,this._mightContainUnusualLineTerminators=s,this._mightContainNonBasicASCII=r;const p=this._doApplyEdits(l);let _=null;if(t&&f.length>0){f.sort((b,y)=>y.lineNumber-b.lineNumber),_=[];for(let b=0,y=f.length;b<y;b++){const S=f[b].lineNumber;if(b>0&&f[b-1].lineNumber===S)continue;const L=f[b].oldContent,x=this.getLineContent(S);x.length===0||x===L||gr(x)!==-1||_.push(S)}}return this._onDidChangeContent.fire(),new Kye(g,p,_)}_reduceOperations(e){return e.length<1e3?e:[this._toSingleEditOperation(e)]}_toSingleEditOperation(e){let t=!1;const i=e[0].range,n=e[e.length-1].range,s=new A(i.startLineNumber,i.startColumn,n.endLineNumber,n.endColumn);let r=i.startLineNumber,a=i.startColumn;const l=[];for(let p=0,_=e.length;p<_;p++){const b=e[p],y=b.range;t=t||b.forceMoveMarkers,l.push(this.getValueInRange(new A(r,a,y.startLineNumber,y.startColumn))),b.text.length>0&&l.push(b.text),r=y.endLineNumber,a=y.endColumn}const c=l.join(""),[u,f,g]=pm(c);return{sortIndex:0,identifier:e[0].identifier,range:s,rangeOffset:this.getOffsetAt(s.startLineNumber,s.startColumn),rangeLength:this.getValueLengthInRange(s,0),text:c,eolCount:u,firstLineLength:f,lastLineLength:g,forceMoveMarkers:t,isAutoWhitespaceEdit:!1}}_doApplyEdits(e){e.sort(FC._sortOpsDescending);const t=[];for(let i=0;i<e.length;i++){const n=e[i],s=n.range.startLineNumber,r=n.range.startColumn,a=n.range.endLineNumber,l=n.range.endColumn;if(s===a&&r===l&&n.text.length===0)continue;n.text?(this._pieceTree.delete(n.rangeOffset,n.rangeLength),this._pieceTree.insert(n.rangeOffset,n.text,!0)):this._pieceTree.delete(n.rangeOffset,n.rangeLength);const c=new A(s,r,a,l);t.push({range:c,rangeLength:n.rangeLength,text:n.text,rangeOffset:n.rangeOffset,forceMoveMarkers:n.forceMoveMarkers})}return t}findMatchesLineByLine(e,t,i,n){return this._pieceTree.findMatchesLineByLine(e,t,i,n)}static _getInverseEditRanges(e){const t=[];let i=0,n=0,s=null;for(let r=0,a=e.length;r<a;r++){const l=e[r];let c,u;s?s.range.endLineNumber===l.range.startLineNumber?(c=i,u=n+(l.range.startColumn-s.range.endColumn)):(c=i+(l.range.startLineNumber-s.range.endLineNumber),u=l.range.startColumn):(c=l.range.startLineNumber,u=l.range.startColumn);let f;if(l.text.length>0){const g=l.eolCount+1;g===1?f=new A(c,u,c,u+l.firstLineLength):f=new A(c,u,c+g-1,l.lastLineLength+1)}else f=new A(c,u,c,u);i=f.endLineNumber,n=f.endColumn,t.push(f),s=l}return t}static _sortOpsAscending(e,t){const i=A.compareRangesUsingEnds(e.range,t.range);return i===0?e.sortIndex-t.sortIndex:i}static _sortOpsDescending(e,t){const i=A.compareRangesUsingEnds(e.range,t.range);return i===0?t.sortIndex-e.sortIndex:-i}}class UIe{constructor(e,t,i,n,s,r,a,l,c){this._chunks=e,this._bom=t,this._cr=i,this._lf=n,this._crlf=s,this._containsRTL=r,this._containsUnusualLineTerminators=a,this._isBasicASCII=l,this._normalizeEOL=c}_getEOL(e){const t=this._cr+this._lf+this._crlf,i=this._cr+this._crlf;return t===0?e===1?`
`:`\r
`:i>t/2?`\r
`:`
`}create(e){const t=this._getEOL(e),i=this._chunks;if(this._normalizeEOL&&(t===`\r
`&&(this._cr>0||this._lf>0)||t===`
`&&(this._cr>0||this._crlf>0)))for(let s=0,r=i.length;s<r;s++){const a=i[s].buffer.replace(/\r\n|\r|\n/g,t),l=df(a);i[s]=new J_(a,l)}const n=new FC(i,this._bom,t,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:n,disposable:n}}}class Ose{constructor(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}acceptChunk(e){if(e.length===0)return;this.chunks.length===0&&zV(e)&&(this.BOM=OCe,e=e.substr(1));const t=e.charCodeAt(e.length-1);t===13||t>=55296&&t<=56319?(this._acceptChunk1(e.substr(0,e.length-1),!1),this._hasPreviousChar=!0,this._previousChar=t):(this._acceptChunk1(e,!1),this._hasPreviousChar=!1,this._previousChar=t)}_acceptChunk1(e,t){!t&&e.length===0||(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+e):this._acceptChunk2(e))}_acceptChunk2(e){const t=WIe(this._tmpLineStarts,e);this.chunks.push(new J_(e,t.lineStarts)),this.cr+=t.cr,this.lf+=t.lf,this.crlf+=t.crlf,t.isBasicASCII||(this.isBasicASCII=!1,this.containsRTL||(this.containsRTL=i1(e)),this.containsUnusualLineTerminators||(this.containsUnusualLineTerminators=pie(e)))}finish(e=!0){return this._finish(),new UIe(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,e)}_finish(){if(this.chunks.length===0&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;const e=this.chunks[this.chunks.length-1];e.buffer+=String.fromCharCode(this._previousChar);const t=df(e.buffer);e.lineStarts=t,this._previousChar===13&&this.cr++}}}class $Ie{constructor(e){this._default=e,this._store=[]}get(e){return e<this._store.length?this._store[e]:this._default}set(e,t){for(;e>=this._store.length;)this._store[this._store.length]=this._default;this._store[e]=t}replace(e,t,i){if(e>=this._store.length)return;if(t===0){this.insert(e,i);return}else if(i===0){this.delete(e,t);return}const n=this._store.slice(0,e),s=this._store.slice(e+t),r=jIe(i,this._default);this._store=n.concat(r,s)}delete(e,t){t===0||e>=this._store.length||this._store.splice(e,t)}insert(e,t){if(t===0||e>=this._store.length)return;const i=[];for(let n=0;n<t;n++)i[n]=this._default;this._store=lA(this._store,e,i)}}function jIe(o,e){const t=[];for(let i=0;i<o;i++)t[i]=e;return t}class KIe{get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._startLineNumber+this._tokens.length-1}constructor(e,t){this._startLineNumber=e,this._tokens=t}getLineTokens(e){return this._tokens[e-this._startLineNumber]}appendLineTokens(e){this._tokens.push(e)}}class z9{constructor(){this._tokens=[]}add(e,t){if(this._tokens.length>0){const i=this._tokens[this._tokens.length-1];if(i.endLineNumber+1===e){i.appendLineTokens(t);return}}this._tokens.push(new KIe(e,[t]))}finalize(){return this._tokens}}class qIe{constructor(e,t){this.tokenizationSupport=t,this.initialState=this.tokenizationSupport.getInitialState(),this.store=new U9(e)}getStartState(e){return this.store.getStartState(e,this.initialState)}getFirstInvalidLine(){return this.store.getFirstInvalidLine(this.initialState)}}class GIe extends qIe{constructor(e,t,i,n){super(e,t),this._textModel=i,this._languageIdCodec=n}updateTokensUntilLine(e,t){const i=this._textModel.getLanguageId();for(;;){const n=this.getFirstInvalidLine();if(!n||n.lineNumber>t)break;const s=this._textModel.getLineContent(n.lineNumber),r=bS(this._languageIdCodec,i,this.tokenizationSupport,s,!0,n.startState);e.add(n.lineNumber,r.tokens),this.store.setEndState(n.lineNumber,r.endState)}}getTokenTypeIfInsertingCharacter(e,t){const i=this.getStartState(e.lineNumber);if(!i)return 0;const n=this._textModel.getLanguageId(),s=this._textModel.getLineContent(e.lineNumber),r=s.substring(0,e.column-1)+t+s.substring(e.column-1),a=bS(this._languageIdCodec,n,this.tokenizationSupport,r,!0,i),l=new Gs(a.tokens,r,this._languageIdCodec);if(l.getCount()===0)return 0;const c=l.findTokenIndexAtOffset(e.column-1);return l.getStandardTokenType(c)}tokenizeLineWithEdit(e,t,i){const n=e.lineNumber,s=e.column,r=this.getStartState(n);if(!r)return null;const a=this._textModel.getLineContent(n),l=a.substring(0,s-1)+i+a.substring(s-1+t),c=this._textModel.getLanguageIdAtPosition(n,0),u=bS(this._languageIdCodec,c,this.tokenizationSupport,l,!0,r);return new Gs(u.tokens,l,this._languageIdCodec)}hasAccurateTokensForLine(e){const t=this.store.getFirstInvalidEndStateLineNumberOrMax();return e<t}isCheapToTokenize(e){const t=this.store.getFirstInvalidEndStateLineNumberOrMax();return e<t||e===t&&this._textModel.getLineLength(e)<2048}tokenizeHeuristically(e,t,i){if(i<=this.store.getFirstInvalidEndStateLineNumberOrMax())return{heuristicTokens:!1};if(t<=this.store.getFirstInvalidEndStateLineNumberOrMax())return this.updateTokensUntilLine(e,i),{heuristicTokens:!1};let n=this.guessStartState(t);const s=this._textModel.getLanguageId();for(let r=t;r<=i;r++){const a=this._textModel.getLineContent(r),l=bS(this._languageIdCodec,s,this.tokenizationSupport,a,!0,n);e.add(r,l.tokens),n=l.endState}return{heuristicTokens:!0}}guessStartState(e){let t=this._textModel.getLineFirstNonWhitespaceColumn(e);const i=[];let n=null;for(let a=e-1;t>1&&a>=1;a--){const l=this._textModel.getLineFirstNonWhitespaceColumn(a);if(l!==0&&l<t&&(i.push(this._textModel.getLineContent(a)),t=l,n=this.getStartState(a),n))break}n||(n=this.tokenizationSupport.getInitialState()),i.reverse();const s=this._textModel.getLanguageId();let r=n;for(const a of i)r=bS(this._languageIdCodec,s,this.tokenizationSupport,a,!1,r).endState;return r}}class U9{constructor(e){this.lineCount=e,this._tokenizationStateStore=new YIe,this._invalidEndStatesLineNumbers=new ZIe,this._invalidEndStatesLineNumbers.addRange(new Wt(1,e+1))}getEndState(e){return this._tokenizationStateStore.getEndState(e)}setEndState(e,t){if(!t)throw new pn("Cannot set null/undefined state");this._invalidEndStatesLineNumbers.delete(e);const i=this._tokenizationStateStore.setEndState(e,t);return i&&e<this.lineCount&&this._invalidEndStatesLineNumbers.addRange(new Wt(e+1,e+2)),i}acceptChange(e,t){this.lineCount+=t-e.length,this._tokenizationStateStore.acceptChange(e,t),this._invalidEndStatesLineNumbers.addRangeAndResize(new Wt(e.startLineNumber,e.endLineNumberExclusive),t)}acceptChanges(e){for(const t of e){const[i]=pm(t.text);this.acceptChange(new Bt(t.range.startLineNumber,t.range.endLineNumber+1),i+1)}}invalidateEndStateRange(e){this._invalidEndStatesLineNumbers.addRange(new Wt(e.startLineNumber,e.endLineNumberExclusive))}getFirstInvalidEndStateLineNumber(){return this._invalidEndStatesLineNumbers.min}getFirstInvalidEndStateLineNumberOrMax(){return this.getFirstInvalidEndStateLineNumber()||Number.MAX_SAFE_INTEGER}allStatesValid(){return this._invalidEndStatesLineNumbers.min===null}getStartState(e,t){return e===1?t:this.getEndState(e-1)}getFirstInvalidLine(e){const t=this.getFirstInvalidEndStateLineNumber();if(t===null)return null;const i=this.getStartState(t,e);if(!i)throw new pn("Start state must be defined");return{lineNumber:t,startState:i}}}class YIe{constructor(){this._lineEndStates=new $Ie(null)}getEndState(e){return this._lineEndStates.get(e)}setEndState(e,t){const i=this._lineEndStates.get(e);return i&&i.equals(t)?!1:(this._lineEndStates.set(e,t),!0)}acceptChange(e,t){let i=e.length;t>0&&i>0&&(i--,t--),this._lineEndStates.replace(e.startLineNumber,i,t)}}class ZIe{constructor(){this._ranges=[]}get min(){return this._ranges.length===0?null:this._ranges[0].start}delete(e){const t=this._ranges.findIndex(i=>i.contains(e));if(t!==-1){const i=this._ranges[t];i.start===e?i.endExclusive===e+1?this._ranges.splice(t,1):this._ranges[t]=new Wt(e+1,i.endExclusive):i.endExclusive===e+1?this._ranges[t]=new Wt(i.start,e):this._ranges.splice(t,1,new Wt(i.start,e),new Wt(e+1,i.endExclusive))}}addRange(e){Wt.addRange(e,this._ranges)}addRangeAndResize(e,t){let i=0;for(;!(i>=this._ranges.length||e.start<=this._ranges[i].endExclusive);)i++;let n=i;for(;!(n>=this._ranges.length||e.endExclusive<this._ranges[n].start);)n++;const s=t-e.length;for(let r=n;r<this._ranges.length;r++)this._ranges[r]=this._ranges[r].delta(s);if(i===n){const r=new Wt(e.start,e.start+t);r.isEmpty||this._ranges.splice(i,0,r)}else{const r=Math.min(e.start,this._ranges[i].start),a=Math.max(e.endExclusive,this._ranges[n-1].endExclusive),l=new Wt(r,a+s);l.isEmpty?this._ranges.splice(i,n-i):this._ranges.splice(i,n-i,l)}}toString(){return this._ranges.map(e=>e.toString()).join(" + ")}}function bS(o,e,t,i,n,s){let r=null;if(t)try{r=t.tokenizeEncoded(i,n,s.clone())}catch(a){Nt(a)}return r||(r=PA(o.encodeLanguageId(e),s)),Gs.convertToEndOffset(r.tokens,i.length),r}class QIe{constructor(e,t){this._tokenizerWithStateStore=e,this._backgroundTokenStore=t,this._isDisposed=!1,this._isScheduled=!1}dispose(){this._isDisposed=!0}handleChanges(){this._beginBackgroundTokenization()}_beginBackgroundTokenization(){this._isScheduled||!this._tokenizerWithStateStore._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._isScheduled=!0,yie(e=>{this._isScheduled=!1,this._backgroundTokenizeWithDeadline(e)}))}_backgroundTokenizeWithDeadline(e){const t=Date.now()+e.timeRemaining(),i=()=>{this._isDisposed||!this._tokenizerWithStateStore._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._backgroundTokenizeForAtLeast1ms(),Date.now()<t?zte(i):this._beginBackgroundTokenization())};i()}_backgroundTokenizeForAtLeast1ms(){const e=this._tokenizerWithStateStore._textModel.getLineCount(),t=new z9,i=Ao.create(!1);do if(i.elapsed()>1||this._tokenizeOneInvalidLine(t)>=e)break;while(this._hasLinesToTokenize());this._backgroundTokenStore.setTokens(t.finalize()),this.checkFinished()}_hasLinesToTokenize(){return this._tokenizerWithStateStore?!this._tokenizerWithStateStore.store.allStatesValid():!1}_tokenizeOneInvalidLine(e){var t;const i=(t=this._tokenizerWithStateStore)===null||t===void 0?void 0:t.getFirstInvalidLine();return i?(this._tokenizerWithStateStore.updateTokensUntilLine(e,i.lineNumber),i.lineNumber):this._tokenizerWithStateStore._textModel.getLineCount()+1}checkFinished(){this._isDisposed||this._tokenizerWithStateStore.store.allStatesValid()&&this._backgroundTokenStore.backgroundTokenizationFinished()}requestTokens(e,t){this._tokenizerWithStateStore.store.invalidateEndStateRange(new Bt(e,t))}}const uf=new Uint32Array(0).buffer;class Pu{static deleteBeginning(e,t){return e===null||e===uf?e:Pu.delete(e,0,t)}static deleteEnding(e,t){if(e===null||e===uf)return e;const i=Lf(e),n=i[i.length-2];return Pu.delete(e,t,n)}static delete(e,t,i){if(e===null||e===uf||t===i)return e;const n=Lf(e),s=n.length>>>1;if(t===0&&n[n.length-2]===i)return uf;const r=Gs.findIndexInTokensArray(n,t),a=r>0?n[r-1<<1]:0,l=n[r<<1];if(i<l){const p=i-t;for(let _=r;_<s;_++)n[_<<1]-=p;return e}let c,u;a!==t?(n[r<<1]=t,c=r+1<<1,u=t):(c=r<<1,u=a);const f=i-t;for(let p=r+1;p<s;p++){const _=n[p<<1]-f;_>u&&(n[c++]=_,n[c++]=n[(p<<1)+1],u=_)}if(c===n.length)return e;const g=new Uint32Array(c);return g.set(n.subarray(0,c),0),g.buffer}static append(e,t){if(t===uf)return e;if(e===uf)return t;if(e===null)return e;if(t===null)return null;const i=Lf(e),n=Lf(t),s=n.length>>>1,r=new Uint32Array(i.length+n.length);r.set(i,0);let a=i.length;const l=i[i.length-2];for(let c=0;c<s;c++)r[a++]=n[c<<1]+l,r[a++]=n[(c<<1)+1];return r.buffer}static insert(e,t,i){if(e===null||e===uf)return e;const n=Lf(e),s=n.length>>>1;let r=Gs.findIndexInTokensArray(n,t);r>0&&n[r-1<<1]===t&&r--;for(let a=r;a<s;a++)n[a<<1]+=i;return e}}function Lf(o){return o instanceof Uint32Array?o:new Uint32Array(o)}class kx{constructor(e){this._lineTokens=[],this._len=0,this._languageIdCodec=e}flush(){this._lineTokens=[],this._len=0}get hasTokens(){return this._lineTokens.length>0}getTokens(e,t,i){let n=null;if(t<this._len&&(n=this._lineTokens[t]),n!==null&&n!==uf)return new Gs(Lf(n),i,this._languageIdCodec);const s=new Uint32Array(2);return s[0]=i.length,s[1]=NQ(this._languageIdCodec.encodeLanguageId(e)),new Gs(s,i,this._languageIdCodec)}static _massageTokens(e,t,i){const n=i?Lf(i):null;if(t===0){let s=!1;if(n&&n.length>1&&(s=To.getLanguageId(n[1])!==e),!s)return uf}if(!n||n.length===0){const s=new Uint32Array(2);return s[0]=t,s[1]=NQ(e),s.buffer}return n[n.length-2]=t,n.byteOffset===0&&n.byteLength===n.buffer.byteLength?n.buffer:n}_ensureLine(e){for(;e>=this._len;)this._lineTokens[this._len]=null,this._len++}_deleteLines(e,t){t!==0&&(e+t>this._len&&(t=this._len-e),this._lineTokens.splice(e,t),this._len-=t)}_insertLines(e,t){if(t===0)return;const i=[];for(let n=0;n<t;n++)i[n]=null;this._lineTokens=lA(this._lineTokens,e,i),this._len+=t}setTokens(e,t,i,n,s){const r=kx._massageTokens(this._languageIdCodec.encodeLanguageId(e),i,n);this._ensureLine(t);const a=this._lineTokens[t];return this._lineTokens[t]=r,s?!kx._equals(a,r):!1}static _equals(e,t){if(!e||!t)return!e&&!t;const i=Lf(e),n=Lf(t);if(i.length!==n.length)return!1;for(let s=0,r=i.length;s<r;s++)if(i[s]!==n[s])return!1;return!0}acceptEdit(e,t,i){this._acceptDeleteRange(e),this._acceptInsertText(new Z(e.startLineNumber,e.startColumn),t,i)}_acceptDeleteRange(e){const t=e.startLineNumber-1;if(t>=this._len)return;if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._lineTokens[t]=Pu.delete(this._lineTokens[t],e.startColumn-1,e.endColumn-1);return}this._lineTokens[t]=Pu.deleteEnding(this._lineTokens[t],e.startColumn-1);const i=e.endLineNumber-1;let n=null;i<this._len&&(n=Pu.deleteBeginning(this._lineTokens[i],e.endColumn-1)),this._lineTokens[t]=Pu.append(this._lineTokens[t],n),this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t,i){if(t===0&&i===0)return;const n=e.lineNumber-1;if(!(n>=this._len)){if(t===0){this._lineTokens[n]=Pu.insert(this._lineTokens[n],e.column-1,i);return}this._lineTokens[n]=Pu.deleteEnding(this._lineTokens[n],e.column-1),this._lineTokens[n]=Pu.insert(this._lineTokens[n],e.column-1,i),this._insertLines(e.lineNumber,t)}}setMultilineTokens(e,t){if(e.length===0)return{changes:[]};const i=[];for(let n=0,s=e.length;n<s;n++){const r=e[n];let a=0,l=0,c=!1;for(let u=r.startLineNumber;u<=r.endLineNumber;u++)c?(this.setTokens(t.getLanguageId(),u-1,t.getLineLength(u),r.getLineTokens(u),!1),l=u):this.setTokens(t.getLanguageId(),u-1,t.getLineLength(u),r.getLineTokens(u),!0)&&(c=!0,a=u,l=u);c&&i.push({fromLineNumber:a,toLineNumber:l})}return{changes:i}}}function NQ(o){return(o<<0|0|0|32768|2<<24|1024)>>>0}class WH{constructor(e){this._pieces=[],this._isComplete=!1,this._languageIdCodec=e}flush(){this._pieces=[],this._isComplete=!1}isEmpty(){return this._pieces.length===0}set(e,t){this._pieces=e||[],this._isComplete=t}setPartial(e,t){let i=e;if(t.length>0){const s=t[0].getRange(),r=t[t.length-1].getRange();if(!s||!r)return e;i=e.plusRange(s).plusRange(r)}let n=null;for(let s=0,r=this._pieces.length;s<r;s++){const a=this._pieces[s];if(a.endLineNumber<i.startLineNumber)continue;if(a.startLineNumber>i.endLineNumber){n=n||{index:s};break}if(a.removeTokens(i),a.isEmpty()){this._pieces.splice(s,1),s--,r--;continue}if(a.endLineNumber<i.startLineNumber)continue;if(a.startLineNumber>i.endLineNumber){n=n||{index:s};continue}const[l,c]=a.split(i);if(l.isEmpty()){n=n||{index:s};continue}c.isEmpty()||(this._pieces.splice(s,1,l,c),s++,r++,n=n||{index:s})}return n=n||{index:this._pieces.length},t.length>0&&(this._pieces=lA(this._pieces,n.index,t)),i}isComplete(){return this._isComplete}addSparseTokens(e,t){if(t.getLineContent().length===0)return t;const i=this._pieces;if(i.length===0)return t;const n=WH._findFirstPieceWithLine(i,e),s=i[n].getLineTokens(e);if(!s)return t;const r=t.getCount(),a=s.getCount();let l=0;const c=[];let u=0,f=0;const g=(p,_)=>{p!==f&&(f=p,c[u++]=p,c[u++]=_)};for(let p=0;p<a;p++){const _=s.getStartCharacter(p),b=s.getEndCharacter(p),y=s.getMetadata(p),S=((y&1?2048:0)|(y&2?4096:0)|(y&4?8192:0)|(y&8?16384:0)|(y&16?16744448:0)|(y&32?4278190080:0))>>>0,L=~S>>>0;for(;l<r&&t.getEndOffset(l)<=_;)g(t.getEndOffset(l),t.getMetadata(l)),l++;for(l<r&&t.getStartOffset(l)<_&&g(_,t.getMetadata(l));l<r&&t.getEndOffset(l)<b;)g(t.getEndOffset(l),t.getMetadata(l)&L|y&S),l++;if(l<r)g(b,t.getMetadata(l)&L|y&S),t.getEndOffset(l)===b&&l++;else{const x=Math.min(Math.max(0,l-1),r-1);g(b,t.getMetadata(x)&L|y&S)}}for(;l<r;)g(t.getEndOffset(l),t.getMetadata(l)),l++;return new Gs(new Uint32Array(c),t.getLineContent(),this._languageIdCodec)}static _findFirstPieceWithLine(e,t){let i=0,n=e.length-1;for(;i<n;){let s=i+Math.floor((n-i)/2);if(e[s].endLineNumber<t)i=s+1;else if(e[s].startLineNumber>t)n=s-1;else{for(;s>i&&e[s-1].startLineNumber<=t&&t<=e[s-1].endLineNumber;)s--;return s}}return i}acceptEdit(e,t,i,n,s){for(const r of this._pieces)r.acceptEdit(e,t,i,n,s)}}class VR extends gse{constructor(e,t,i,n,s,r){super(),this._languageService=e,this._languageConfigurationService=t,this._textModel=i,this._bracketPairsTextModelPart=n,this._languageId=s,this._attachedViews=r,this._semanticTokens=new WH(this._languageService.languageIdCodec),this._onDidChangeLanguage=this._register(new Y),this.onDidChangeLanguage=this._onDidChangeLanguage.event,this._onDidChangeLanguageConfiguration=this._register(new Y),this.onDidChangeLanguageConfiguration=this._onDidChangeLanguageConfiguration.event,this._onDidChangeTokens=this._register(new Y),this.onDidChangeTokens=this._onDidChangeTokens.event,this.grammarTokens=this._register(new XIe(this._languageService.languageIdCodec,this._textModel,()=>this._languageId,this._attachedViews)),this._register(this._languageConfigurationService.onDidChange(a=>{a.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})})),this._register(this.grammarTokens.onDidChangeTokens(a=>{this._emitModelTokensChangedEvent(a)})),this._register(this.grammarTokens.onDidChangeBackgroundTokenizationState(a=>{this._bracketPairsTextModelPart.handleDidChangeBackgroundTokenizationState()}))}handleDidChangeContent(e){if(e.isFlush)this._semanticTokens.flush();else if(!e.isEolChange)for(const t of e.changes){const[i,n,s]=pm(t.text);this._semanticTokens.acceptEdit(t.range,i,n,s,t.text.length>0?t.text.charCodeAt(0):0)}this.grammarTokens.handleDidChangeContent(e)}handleDidChangeAttached(){this.grammarTokens.handleDidChangeAttached()}getLineTokens(e){this.validateLineNumber(e);const t=this.grammarTokens.getLineTokens(e);return this._semanticTokens.addSparseTokens(e,t)}_emitModelTokensChangedEvent(e){this._textModel._isDisposing()||(this._bracketPairsTextModelPart.handleDidChangeTokens(e),this._onDidChangeTokens.fire(e))}validateLineNumber(e){if(e<1||e>this._textModel.getLineCount())throw new pn("Illegal value for lineNumber")}get hasTokens(){return this.grammarTokens.hasTokens}resetTokenization(){this.grammarTokens.resetTokenization()}get backgroundTokenizationState(){return this.grammarTokens.backgroundTokenizationState}forceTokenization(e){this.validateLineNumber(e),this.grammarTokens.forceTokenization(e)}hasAccurateTokensForLine(e){return this.validateLineNumber(e),this.grammarTokens.hasAccurateTokensForLine(e)}isCheapToTokenize(e){return this.validateLineNumber(e),this.grammarTokens.isCheapToTokenize(e)}tokenizeIfCheap(e){this.validateLineNumber(e),this.grammarTokens.tokenizeIfCheap(e)}getTokenTypeIfInsertingCharacter(e,t,i){return this.grammarTokens.getTokenTypeIfInsertingCharacter(e,t,i)}tokenizeLineWithEdit(e,t,i){return this.grammarTokens.tokenizeLineWithEdit(e,t,i)}setSemanticTokens(e,t){this._semanticTokens.set(e,t),this._emitModelTokensChangedEvent({semanticTokensApplied:e!==null,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]})}hasCompleteSemanticTokens(){return this._semanticTokens.isComplete()}hasSomeSemanticTokens(){return!this._semanticTokens.isEmpty()}setPartialSemanticTokens(e,t){if(this.hasCompleteSemanticTokens())return;const i=this._textModel.validateRange(this._semanticTokens.setPartial(e,t));this._emitModelTokensChangedEvent({semanticTokensApplied:!0,ranges:[{fromLineNumber:i.startLineNumber,toLineNumber:i.endLineNumber}]})}getWordAtPosition(e){this.assertNotDisposed();const t=this._textModel.validatePosition(e),i=this._textModel.getLineContent(t.lineNumber),n=this.getLineTokens(t.lineNumber),s=n.findTokenIndexAtOffset(t.column-1),[r,a]=VR._findLanguageBoundaries(n,s),l=YL(t.column,this.getLanguageConfiguration(n.getLanguageId(s)).getWordDefinition(),i.substring(r,a),r);if(l&&l.startColumn<=e.column&&e.column<=l.endColumn)return l;if(s>0&&r===t.column-1){const[c,u]=VR._findLanguageBoundaries(n,s-1),f=YL(t.column,this.getLanguageConfiguration(n.getLanguageId(s-1)).getWordDefinition(),i.substring(c,u),c);if(f&&f.startColumn<=e.column&&e.column<=f.endColumn)return f}return null}getLanguageConfiguration(e){return this._languageConfigurationService.getLanguageConfiguration(e)}static _findLanguageBoundaries(e,t){const i=e.getLanguageId(t);let n=0;for(let r=t;r>=0&&e.getLanguageId(r)===i;r--)n=e.getStartOffset(r);let s=e.getLineContent().length;for(let r=t,a=e.getCount();r<a&&e.getLanguageId(r)===i;r++)s=e.getEndOffset(r);return[n,s]}getWordUntilPosition(e){const t=this.getWordAtPosition(e);return t?{word:t.word.substr(0,e.column-t.startColumn),startColumn:t.startColumn,endColumn:e.column}:{word:"",startColumn:e.column,endColumn:e.column}}getLanguageId(){return this._languageId}getLanguageIdAtPosition(e,t){const i=this._textModel.validatePosition(new Z(e,t)),n=this.getLineTokens(i.lineNumber);return n.getLanguageId(n.findTokenIndexAtOffset(i.column-1))}setLanguageId(e,t="api"){if(this._languageId===e)return;const i={oldLanguage:this._languageId,newLanguage:e,source:t};this._languageId=e,this._bracketPairsTextModelPart.handleDidChangeLanguage(i),this.grammarTokens.resetTokenization(),this._onDidChangeLanguage.fire(i),this._onDidChangeLanguageConfiguration.fire({})}}class XIe extends J{get backgroundTokenizationState(){return this._backgroundTokenizationState}constructor(e,t,i,n){super(),this._languageIdCodec=e,this._textModel=t,this.getLanguageId=i,this._tokenizer=null,this._defaultBackgroundTokenizer=null,this._backgroundTokenizer=this._register(new Xs),this._tokens=new kx(this._languageIdCodec),this._debugBackgroundTokenizer=this._register(new Xs),this._backgroundTokenizationState=1,this._onDidChangeBackgroundTokenizationState=this._register(new Y),this.onDidChangeBackgroundTokenizationState=this._onDidChangeBackgroundTokenizationState.event,this._onDidChangeTokens=this._register(new Y),this.onDidChangeTokens=this._onDidChangeTokens.event,this._attachedViewStates=this._register(new TV),this._register(Qn.onDidChange(s=>{const r=this.getLanguageId();s.changedLanguages.indexOf(r)!==-1&&this.resetTokenization()})),this.resetTokenization(),this._register(n.onDidChangeVisibleRanges(({view:s,state:r})=>{if(r){let a=this._attachedViewStates.get(s);a||(a=new JIe(()=>this.refreshRanges(a.lineRanges)),this._attachedViewStates.set(s,a)),a.handleStateChange(r)}else this._attachedViewStates.deleteAndDispose(s)}))}resetTokenization(e=!0){var t;this._tokens.flush(),(t=this._debugBackgroundTokens)===null||t===void 0||t.flush(),this._debugBackgroundStates&&(this._debugBackgroundStates=new U9(this._textModel.getLineCount())),e&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]});const i=()=>{if(this._textModel.isTooLargeForTokenization())return[null,null];const r=Qn.get(this.getLanguageId());if(!r)return[null,null];let a;try{a=r.getInitialState()}catch(l){return Nt(l),[null,null]}return[r,a]},[n,s]=i();if(n&&s?this._tokenizer=new GIe(this._textModel.getLineCount(),n,this._textModel,this._languageIdCodec):this._tokenizer=null,this._backgroundTokenizer.clear(),this._defaultBackgroundTokenizer=null,this._tokenizer){const r={setTokens:a=>{this.setTokens(a)},backgroundTokenizationFinished:()=>{if(this._backgroundTokenizationState===2)return;const a=2;this._backgroundTokenizationState=a,this._onDidChangeBackgroundTokenizationState.fire()},setEndState:(a,l)=>{var c;if(!this._tokenizer)return;const u=this._tokenizer.store.getFirstInvalidEndStateLineNumber();u!==null&&a>=u&&((c=this._tokenizer)===null||c===void 0||c.store.setEndState(a,l))}};n&&n.createBackgroundTokenizer&&!n.backgroundTokenizerShouldOnlyVerifyTokens&&(this._backgroundTokenizer.value=n.createBackgroundTokenizer(this._textModel,r)),!this._backgroundTokenizer.value&&!this._textModel.isTooLargeForTokenization()&&(this._backgroundTokenizer.value=this._defaultBackgroundTokenizer=new QIe(this._tokenizer,r),this._defaultBackgroundTokenizer.handleChanges()),n!=null&&n.backgroundTokenizerShouldOnlyVerifyTokens&&n.createBackgroundTokenizer?(this._debugBackgroundTokens=new kx(this._languageIdCodec),this._debugBackgroundStates=new U9(this._textModel.getLineCount()),this._debugBackgroundTokenizer.clear(),this._debugBackgroundTokenizer.value=n.createBackgroundTokenizer(this._textModel,{setTokens:a=>{var l;(l=this._debugBackgroundTokens)===null||l===void 0||l.setMultilineTokens(a,this._textModel)},backgroundTokenizationFinished(){},setEndState:(a,l)=>{var c;(c=this._debugBackgroundStates)===null||c===void 0||c.setEndState(a,l)}})):(this._debugBackgroundTokens=void 0,this._debugBackgroundStates=void 0,this._debugBackgroundTokenizer.value=void 0)}this.refreshAllVisibleLineTokens()}handleDidChangeAttached(){var e;(e=this._defaultBackgroundTokenizer)===null||e===void 0||e.handleChanges()}handleDidChangeContent(e){var t,i,n;if(e.isFlush)this.resetTokenization(!1);else if(!e.isEolChange){for(const s of e.changes){const[r,a]=pm(s.text);this._tokens.acceptEdit(s.range,r,a),(t=this._debugBackgroundTokens)===null||t===void 0||t.acceptEdit(s.range,r,a)}(i=this._debugBackgroundStates)===null||i===void 0||i.acceptChanges(e.changes),this._tokenizer&&this._tokenizer.store.acceptChanges(e.changes),(n=this._defaultBackgroundTokenizer)===null||n===void 0||n.handleChanges()}}setTokens(e){const{changes:t}=this._tokens.setMultilineTokens(e,this._textModel);return t.length>0&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:t}),{changes:t}}refreshAllVisibleLineTokens(){const e=Bt.joinMany([...this._attachedViewStates].map(([t,i])=>i.lineRanges));this.refreshRanges(e)}refreshRanges(e){for(const t of e)this.refreshRange(t.startLineNumber,t.endLineNumberExclusive-1)}refreshRange(e,t){var i,n;if(!this._tokenizer)return;e=Math.max(1,Math.min(this._textModel.getLineCount(),e)),t=Math.min(this._textModel.getLineCount(),t);const s=new z9,{heuristicTokens:r}=this._tokenizer.tokenizeHeuristically(s,e,t),a=this.setTokens(s.finalize());if(r)for(const l of a.changes)(i=this._backgroundTokenizer.value)===null||i===void 0||i.requestTokens(l.fromLineNumber,l.toLineNumber+1);(n=this._defaultBackgroundTokenizer)===null||n===void 0||n.checkFinished()}forceTokenization(e){var t,i;const n=new z9;(t=this._tokenizer)===null||t===void 0||t.updateTokensUntilLine(n,e),this.setTokens(n.finalize()),(i=this._defaultBackgroundTokenizer)===null||i===void 0||i.checkFinished()}hasAccurateTokensForLine(e){return this._tokenizer?this._tokenizer.hasAccurateTokensForLine(e):!0}isCheapToTokenize(e){return this._tokenizer?this._tokenizer.isCheapToTokenize(e):!0}tokenizeIfCheap(e){this.isCheapToTokenize(e)&&this.forceTokenization(e)}getLineTokens(e){var t;const i=this._textModel.getLineContent(e),n=this._tokens.getTokens(this._textModel.getLanguageId(),e-1,i);if(this._debugBackgroundTokens&&this._debugBackgroundStates&&this._tokenizer&&this._debugBackgroundStates.getFirstInvalidEndStateLineNumberOrMax()>e&&this._tokenizer.store.getFirstInvalidEndStateLineNumberOrMax()>e){const s=this._debugBackgroundTokens.getTokens(this._textModel.getLanguageId(),e-1,i);!n.equals(s)&&(!((t=this._debugBackgroundTokenizer.value)===null||t===void 0)&&t.reportMismatchingTokens)&&this._debugBackgroundTokenizer.value.reportMismatchingTokens(e)}return n}getTokenTypeIfInsertingCharacter(e,t,i){if(!this._tokenizer)return 0;const n=this._textModel.validatePosition(new Z(e,t));return this.forceTokenization(n.lineNumber),this._tokenizer.getTokenTypeIfInsertingCharacter(n,i)}tokenizeLineWithEdit(e,t,i){if(!this._tokenizer)return null;const n=this._textModel.validatePosition(e);return this.forceTokenization(n.lineNumber),this._tokenizer.tokenizeLineWithEdit(n,t,i)}get hasTokens(){return this._tokens.hasTokens}}class JIe extends J{get lineRanges(){return this._lineRanges}constructor(e){super(),this._refreshTokens=e,this.runner=this._register(new Ui(()=>this.update(),50)),this._computedLineRanges=[],this._lineRanges=[]}update(){zn(this._computedLineRanges,this._lineRanges,(e,t)=>e.equals(t))||(this._computedLineRanges=this._lineRanges,this._refreshTokens())}handleStateChange(e){this._lineRanges=e.visibleLineRanges,e.stabilized?(this.runner.cancel(),this.update()):this.runner.schedule()}}const YA=Zt("undoRedoService");class Fse{constructor(e,t){this.resource=e,this.elements=t}}class m1{constructor(){this.id=m1._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}}m1._ID=0;m1.None=new m1;class $u{constructor(){this.id=$u._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}}$u._ID=0;$u.None=new $u;var eTe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},N3=function(o,e){return function(t,i){e(t,i,o)}},V_;function tTe(o){const e=new Ose;return e.acceptChunk(o),e.finish()}function iTe(o){const e=new Ose;let t;for(;typeof(t=o.read())=="string";)e.acceptChunk(t);return e.finish()}function RQ(o,e){let t;return typeof o=="string"?t=tTe(o):$ye(o)?t=iTe(o):t=o,t.create(e)}let gT=0;const nTe=999,sTe=1e4;class oTe{constructor(e){this._source=e,this._eos=!1}read(){if(this._eos)return null;const e=[];let t=0,i=0;do{const n=this._source.read();if(n===null)return this._eos=!0,t===0?null:e.join("");if(n.length>0&&(e[t++]=n,i+=n.length),i>=64*1024)return e.join("")}while(!0)}}const CS=()=>{throw new Error("Invalid change accessor")};let ph=V_=class extends J{static resolveOptions(e,t){if(t.detectIndentation){const i=SQ(e,t.tabSize,t.insertSpaces);return new CN({tabSize:i.tabSize,indentSize:"tabSize",insertSpaces:i.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL,bracketPairColorizationOptions:t.bracketPairColorizationOptions})}return new CN(t)}get onDidChangeLanguage(){return this._tokenizationTextModelPart.onDidChangeLanguage}get onDidChangeLanguageConfiguration(){return this._tokenizationTextModelPart.onDidChangeLanguageConfiguration}get onDidChangeTokens(){return this._tokenizationTextModelPart.onDidChangeTokens}onDidChangeContent(e){return this._eventEmitter.slowEvent(t=>e(t.contentChangedEvent))}onDidChangeContentOrInjectedText(e){return $c(this._eventEmitter.fastEvent(t=>e(t)),this._onDidChangeInjectedText.event(t=>e(t)))}_isDisposing(){return this.__isDisposing}get tokenization(){return this._tokenizationTextModelPart}get bracketPairs(){return this._bracketPairs}get guides(){return this._guidesTextModelPart}constructor(e,t,i,n=null,s,r,a){super(),this._undoRedoService=s,this._languageService=r,this._languageConfigurationService=a,this._onWillDispose=this._register(new Y),this.onWillDispose=this._onWillDispose.event,this._onDidChangeDecorations=this._register(new uTe(p=>this.handleBeforeFireDecorationsChangedEvent(p))),this.onDidChangeDecorations=this._onDidChangeDecorations.event,this._onDidChangeOptions=this._register(new Y),this.onDidChangeOptions=this._onDidChangeOptions.event,this._onDidChangeAttached=this._register(new Y),this.onDidChangeAttached=this._onDidChangeAttached.event,this._onDidChangeInjectedText=this._register(new Y),this._eventEmitter=this._register(new hTe),this._languageSelectionListener=this._register(new Xs),this._deltaDecorationCallCnt=0,this._attachedViews=new fTe,gT++,this.id="$model"+gT,this.isForSimpleWidget=i.isForSimpleWidget,typeof n>"u"||n===null?this._associatedResource=gt.parse("inmemory://model/"+gT):this._associatedResource=n,this._attachedEditorCount=0;const{textBuffer:l,disposable:c}=RQ(e,i.defaultEOL);this._buffer=l,this._bufferDisposable=c,this._options=V_.resolveOptions(this._buffer,i);const u=typeof t=="string"?t:t.languageId;typeof t!="string"&&(this._languageSelectionListener.value=t.onDidChange(()=>this._setLanguage(t.languageId))),this._bracketPairs=this._register(new dIe(this,this._languageConfigurationService)),this._guidesTextModelPart=this._register(new nEe(this,this._languageConfigurationService)),this._decorationProvider=this._register(new hIe(this)),this._tokenizationTextModelPart=new VR(this._languageService,this._languageConfigurationService,this,this._bracketPairs,u,this._attachedViews);const f=this._buffer.getLineCount(),g=this._buffer.getValueLengthInRange(new A(1,1,f,this._buffer.getLineLength(f)+1),0);i.largeFileOptimizations?(this._isTooLargeForTokenization=g>V_.LARGE_FILE_SIZE_THRESHOLD||f>V_.LARGE_FILE_LINE_COUNT_THRESHOLD,this._isTooLargeForHeapOperation=g>V_.LARGE_FILE_HEAP_OPERATION_THRESHOLD):(this._isTooLargeForTokenization=!1,this._isTooLargeForHeapOperation=!1),this._isTooLargeForSyncing=g>V_._MODEL_SYNC_LIMIT,this._versionId=1,this._alternativeVersionId=1,this._initialUndoRedoSnapshot=null,this._isDisposed=!1,this.__isDisposing=!1,this._instanceId=mie(gT),this._lastDecorationId=0,this._decorations=Object.create(null),this._decorationsTree=new MQ,this._commandManager=new PH(this,this._undoRedoService),this._isUndoing=!1,this._isRedoing=!1,this._trimAutoWhitespaceLines=null,this._register(this._decorationProvider.onDidChange(()=>{this._onDidChangeDecorations.beginDeferredEmit(),this._onDidChangeDecorations.fire(),this._onDidChangeDecorations.endDeferredEmit()})),this._languageService.requestRichLanguageFeatures(u)}dispose(){this.__isDisposing=!0,this._onWillDispose.fire(),this._tokenizationTextModelPart.dispose(),this._isDisposed=!0,super.dispose(),this._bufferDisposable.dispose(),this.__isDisposing=!1;const e=new FC([],"",`
`,!1,!1,!0,!0);e.dispose(),this._buffer=e,this._bufferDisposable=J.None}_assertNotDisposed(){if(this._isDisposed)throw new Error("Model is disposed!")}_emitContentChangedEvent(e,t){this.__isDisposing||(this._tokenizationTextModelPart.handleDidChangeContent(t),this._bracketPairs.handleDidChangeContent(t),this._eventEmitter.fire(new _v(e,t)))}setValue(e){if(this._assertNotDisposed(),e==null)throw lc();const{textBuffer:t,disposable:i}=RQ(e,this._options.defaultEOL);this._setValueFromTextBuffer(t,i)}_createContentChanged2(e,t,i,n,s,r,a,l){return{changes:[{range:e,rangeOffset:t,rangeLength:i,text:n}],eol:this._buffer.getEOL(),isEolChange:l,versionId:this.getVersionId(),isUndoing:s,isRedoing:r,isFlush:a}}_setValueFromTextBuffer(e,t){this._assertNotDisposed();const i=this.getFullModelRange(),n=this.getValueLengthInRange(i),s=this.getLineCount(),r=this.getLineMaxColumn(s);this._buffer=e,this._bufferDisposable.dispose(),this._bufferDisposable=t,this._increaseVersionId(),this._decorations=Object.create(null),this._decorationsTree=new MQ,this._commandManager.clear(),this._trimAutoWhitespaceLines=null,this._emitContentChangedEvent(new AC([new PEe],this._versionId,!1,!1),this._createContentChanged2(new A(1,1,s,r),0,n,this.getValue(),!1,!1,!0,!1))}setEOL(e){this._assertNotDisposed();const t=e===1?`\r
`:`
`;if(this._buffer.getEOL()===t)return;const i=this.getFullModelRange(),n=this.getValueLengthInRange(i),s=this.getLineCount(),r=this.getLineMaxColumn(s);this._onBeforeEOLChange(),this._buffer.setEOL(t),this._increaseVersionId(),this._onAfterEOLChange(),this._emitContentChangedEvent(new AC([new BEe],this._versionId,!1,!1),this._createContentChanged2(new A(1,1,s,r),0,n,this.getValue(),!1,!1,!1,!0))}_onBeforeEOLChange(){this._decorationsTree.ensureAllNodesHaveRanges(this)}_onAfterEOLChange(){const e=this.getVersionId(),t=this._decorationsTree.collectNodesPostOrder();for(let i=0,n=t.length;i<n;i++){const s=t[i],r=s.range,a=s.cachedAbsoluteStart-s.start,l=this._buffer.getOffsetAt(r.startLineNumber,r.startColumn),c=this._buffer.getOffsetAt(r.endLineNumber,r.endColumn);s.cachedAbsoluteStart=l,s.cachedAbsoluteEnd=c,s.cachedVersionId=e,s.start=l-a,s.end=c-a,_m(s)}}onBeforeAttached(){return this._attachedEditorCount++,this._attachedEditorCount===1&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.attachView()}onBeforeDetached(e){this._attachedEditorCount--,this._attachedEditorCount===0&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.detachView(e)}isAttachedToEditor(){return this._attachedEditorCount>0}getAttachedEditorCount(){return this._attachedEditorCount}isTooLargeForSyncing(){return this._isTooLargeForSyncing}isTooLargeForTokenization(){return this._isTooLargeForTokenization}isTooLargeForHeapOperation(){return this._isTooLargeForHeapOperation}isDisposed(){return this._isDisposed}isDominatedByLongLines(){if(this._assertNotDisposed(),this.isTooLargeForTokenization())return!1;let e=0,t=0;const i=this._buffer.getLineCount();for(let n=1;n<=i;n++){const s=this._buffer.getLineLength(n);s>=sTe?t+=s:e+=s}return t>e}get uri(){return this._associatedResource}getOptions(){return this._assertNotDisposed(),this._options}getFormattingOptions(){return{tabSize:this._options.indentSize,insertSpaces:this._options.insertSpaces}}updateOptions(e){this._assertNotDisposed();const t=typeof e.tabSize<"u"?e.tabSize:this._options.tabSize,i=typeof e.indentSize<"u"?e.indentSize:this._options.originalIndentSize,n=typeof e.insertSpaces<"u"?e.insertSpaces:this._options.insertSpaces,s=typeof e.trimAutoWhitespace<"u"?e.trimAutoWhitespace:this._options.trimAutoWhitespace,r=typeof e.bracketColorizationOptions<"u"?e.bracketColorizationOptions:this._options.bracketPairColorizationOptions,a=new CN({tabSize:t,indentSize:i,insertSpaces:n,defaultEOL:this._options.defaultEOL,trimAutoWhitespace:s,bracketPairColorizationOptions:r});if(this._options.equals(a))return;const l=this._options.createChangeEvent(a);this._options=a,this._bracketPairs.handleDidChangeOptions(l),this._decorationProvider.handleDidChangeOptions(l),this._onDidChangeOptions.fire(l)}detectIndentation(e,t){this._assertNotDisposed();const i=SQ(this._buffer,t,e);this.updateOptions({insertSpaces:i.insertSpaces,tabSize:i.tabSize,indentSize:i.tabSize})}normalizeIndentation(e){return this._assertNotDisposed(),DH(e,this._options.indentSize,this._options.insertSpaces)}getVersionId(){return this._assertNotDisposed(),this._versionId}mightContainRTL(){return this._buffer.mightContainRTL()}mightContainUnusualLineTerminators(){return this._buffer.mightContainUnusualLineTerminators()}removeUnusualLineTerminators(e=null){const t=this.findMatches(gie.source,!1,!0,!1,null,!1,1073741824);this._buffer.resetMightContainUnusualLineTerminators(),this.pushEditOperations(e,t.map(i=>({range:i.range,text:null})),()=>null)}mightContainNonBasicASCII(){return this._buffer.mightContainNonBasicASCII()}getAlternativeVersionId(){return this._assertNotDisposed(),this._alternativeVersionId}getInitialUndoRedoSnapshot(){return this._assertNotDisposed(),this._initialUndoRedoSnapshot}getOffsetAt(e){this._assertNotDisposed();const t=this._validatePosition(e.lineNumber,e.column,0);return this._buffer.getOffsetAt(t.lineNumber,t.column)}getPositionAt(e){this._assertNotDisposed();const t=Math.min(this._buffer.getLength(),Math.max(0,e));return this._buffer.getPositionAt(t)}_increaseVersionId(){this._versionId=this._versionId+1,this._alternativeVersionId=this._versionId}_overwriteVersionId(e){this._versionId=e}_overwriteAlternativeVersionId(e){this._alternativeVersionId=e}_overwriteInitialUndoRedoSnapshot(e){this._initialUndoRedoSnapshot=e}getValue(e,t=!1){if(this._assertNotDisposed(),this.isTooLargeForHeapOperation())throw new pn("Operation would exceed heap memory limits");const i=this.getFullModelRange(),n=this.getValueInRange(i,e);return t?this._buffer.getBOM()+n:n}createSnapshot(e=!1){return new oTe(this._buffer.createSnapshot(e))}getValueLength(e,t=!1){this._assertNotDisposed();const i=this.getFullModelRange(),n=this.getValueLengthInRange(i,e);return t?this._buffer.getBOM().length+n:n}getValueInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueInRange(this.validateRange(e),t)}getValueLengthInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueLengthInRange(this.validateRange(e),t)}getCharacterCountInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getCharacterCountInRange(this.validateRange(e),t)}getLineCount(){return this._assertNotDisposed(),this._buffer.getLineCount()}getLineContent(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new pn("Illegal value for lineNumber");return this._buffer.getLineContent(e)}getLineLength(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new pn("Illegal value for lineNumber");return this._buffer.getLineLength(e)}getLinesContent(){if(this._assertNotDisposed(),this.isTooLargeForHeapOperation())throw new pn("Operation would exceed heap memory limits");return this._buffer.getLinesContent()}getEOL(){return this._assertNotDisposed(),this._buffer.getEOL()}getEndOfLineSequence(){return this._assertNotDisposed(),this._buffer.getEOL()===`
`?0:1}getLineMinColumn(e){return this._assertNotDisposed(),1}getLineMaxColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new pn("Illegal value for lineNumber");return this._buffer.getLineLength(e)+1}getLineFirstNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new pn("Illegal value for lineNumber");return this._buffer.getLineFirstNonWhitespaceColumn(e)}getLineLastNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new pn("Illegal value for lineNumber");return this._buffer.getLineLastNonWhitespaceColumn(e)}_validateRangeRelaxedNoAllocations(e){const t=this._buffer.getLineCount(),i=e.startLineNumber,n=e.startColumn;let s=Math.floor(typeof i=="number"&&!isNaN(i)?i:1),r=Math.floor(typeof n=="number"&&!isNaN(n)?n:1);if(s<1)s=1,r=1;else if(s>t)s=t,r=this.getLineMaxColumn(s);else if(r<=1)r=1;else{const f=this.getLineMaxColumn(s);r>=f&&(r=f)}const a=e.endLineNumber,l=e.endColumn;let c=Math.floor(typeof a=="number"&&!isNaN(a)?a:1),u=Math.floor(typeof l=="number"&&!isNaN(l)?l:1);if(c<1)c=1,u=1;else if(c>t)c=t,u=this.getLineMaxColumn(c);else if(u<=1)u=1;else{const f=this.getLineMaxColumn(c);u>=f&&(u=f)}return i===s&&n===r&&a===c&&l===u&&e instanceof A&&!(e instanceof Xe)?e:new A(s,r,c,u)}_isValidPosition(e,t,i){if(typeof e!="number"||typeof t!="number"||isNaN(e)||isNaN(t)||e<1||t<1||(e|0)!==e||(t|0)!==t)return!1;const n=this._buffer.getLineCount();if(e>n)return!1;if(t===1)return!0;const s=this.getLineMaxColumn(e);if(t>s)return!1;if(i===1){const r=this._buffer.getLineCharCode(e,t-2);if(qs(r))return!1}return!0}_validatePosition(e,t,i){const n=Math.floor(typeof e=="number"&&!isNaN(e)?e:1),s=Math.floor(typeof t=="number"&&!isNaN(t)?t:1),r=this._buffer.getLineCount();if(n<1)return new Z(1,1);if(n>r)return new Z(r,this.getLineMaxColumn(r));if(s<=1)return new Z(n,1);const a=this.getLineMaxColumn(n);if(s>=a)return new Z(n,a);if(i===1){const l=this._buffer.getLineCharCode(n,s-2);if(qs(l))return new Z(n,s-1)}return new Z(n,s)}validatePosition(e){return this._assertNotDisposed(),e instanceof Z&&this._isValidPosition(e.lineNumber,e.column,1)?e:this._validatePosition(e.lineNumber,e.column,1)}_isValidRange(e,t){const i=e.startLineNumber,n=e.startColumn,s=e.endLineNumber,r=e.endColumn;if(!this._isValidPosition(i,n,0)||!this._isValidPosition(s,r,0))return!1;if(t===1){const a=n>1?this._buffer.getLineCharCode(i,n-2):0,l=r>1&&r<=this._buffer.getLineLength(s)?this._buffer.getLineCharCode(s,r-2):0,c=qs(a),u=qs(l);return!c&&!u}return!0}validateRange(e){if(this._assertNotDisposed(),e instanceof A&&!(e instanceof Xe)&&this._isValidRange(e,1))return e;const i=this._validatePosition(e.startLineNumber,e.startColumn,0),n=this._validatePosition(e.endLineNumber,e.endColumn,0),s=i.lineNumber,r=i.column,a=n.lineNumber,l=n.column;{const c=r>1?this._buffer.getLineCharCode(s,r-2):0,u=l>1&&l<=this._buffer.getLineLength(a)?this._buffer.getLineCharCode(a,l-2):0,f=qs(c),g=qs(u);return!f&&!g?new A(s,r,a,l):s===a&&r===l?new A(s,r-1,a,l-1):f&&g?new A(s,r-1,a,l+1):f?new A(s,r-1,a,l):new A(s,r,a,l+1)}}modifyPosition(e,t){this._assertNotDisposed();const i=this.getOffsetAt(e)+t;return this.getPositionAt(Math.min(this._buffer.getLength(),Math.max(0,i)))}getFullModelRange(){this._assertNotDisposed();const e=this.getLineCount();return new A(1,1,e,this.getLineMaxColumn(e))}findMatchesLineByLine(e,t,i,n){return this._buffer.findMatchesLineByLine(e,t,i,n)}findMatches(e,t,i,n,s,r,a=nTe){this._assertNotDisposed();let l=null;t!==null&&(Array.isArray(t)||(t=[t]),t.every(f=>A.isIRange(f))&&(l=t.map(f=>this.validateRange(f)))),l===null&&(l=[this.getFullModelRange()]),l=l.sort((f,g)=>f.startLineNumber-g.startLineNumber||f.startColumn-g.startColumn);const c=[];c.push(l.reduce((f,g)=>A.areIntersecting(f,g)?f.plusRange(g):(c.push(f),g)));let u;if(!i&&e.indexOf(`
`)<0){const g=new W_(e,i,n,s).parseSearchRequest();if(!g)return[];u=p=>this.findMatchesLineByLine(p,g,r,a)}else u=f=>ZI.findMatches(this,new W_(e,i,n,s),f,r,a);return c.map(u).reduce((f,g)=>f.concat(g),[])}findNextMatch(e,t,i,n,s,r){this._assertNotDisposed();const a=this.validatePosition(t);if(!i&&e.indexOf(`
`)<0){const c=new W_(e,i,n,s).parseSearchRequest();if(!c)return null;const u=this.getLineCount();let f=new A(a.lineNumber,a.column,u,this.getLineMaxColumn(u)),g=this.findMatchesLineByLine(f,c,r,1);return ZI.findNextMatch(this,new W_(e,i,n,s),a,r),g.length>0||(f=new A(1,1,a.lineNumber,this.getLineMaxColumn(a.lineNumber)),g=this.findMatchesLineByLine(f,c,r,1),g.length>0)?g[0]:null}return ZI.findNextMatch(this,new W_(e,i,n,s),a,r)}findPreviousMatch(e,t,i,n,s,r){this._assertNotDisposed();const a=this.validatePosition(t);return ZI.findPreviousMatch(this,new W_(e,i,n,s),a,r)}pushStackElement(){this._commandManager.pushStackElement()}popStackElement(){this._commandManager.popStackElement()}pushEOL(e){if((this.getEOL()===`
`?0:1)!==e)try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEOL(e)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_validateEditOperation(e){return e instanceof c3?e:new c3(e.identifier||null,this.validateRange(e.range),e.text,e.forceMoveMarkers||!1,e.isAutoWhitespaceEdit||!1,e._isTracked||!1)}_validateEditOperations(e){const t=[];for(let i=0,n=e.length;i<n;i++)t[i]=this._validateEditOperation(e[i]);return t}pushEditOperations(e,t,i,n){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._pushEditOperations(e,this._validateEditOperations(t),i,n)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_pushEditOperations(e,t,i,n){if(this._options.trimAutoWhitespace&&this._trimAutoWhitespaceLines){const s=t.map(a=>({range:this.validateRange(a.range),text:a.text}));let r=!0;if(e)for(let a=0,l=e.length;a<l;a++){const c=e[a];let u=!1;for(let f=0,g=s.length;f<g;f++){const p=s[f].range,_=p.startLineNumber>c.endLineNumber,b=c.startLineNumber>p.endLineNumber;if(!_&&!b){u=!0;break}}if(!u){r=!1;break}}if(r)for(let a=0,l=this._trimAutoWhitespaceLines.length;a<l;a++){const c=this._trimAutoWhitespaceLines[a],u=this.getLineMaxColumn(c);let f=!0;for(let g=0,p=s.length;g<p;g++){const _=s[g].range,b=s[g].text;if(!(c<_.startLineNumber||c>_.endLineNumber)&&!(c===_.startLineNumber&&_.startColumn===u&&_.isEmpty()&&b&&b.length>0&&b.charAt(0)===`
`)&&!(c===_.startLineNumber&&_.startColumn===1&&_.isEmpty()&&b&&b.length>0&&b.charAt(b.length-1)===`
`)){f=!1;break}}if(f){const g=new A(c,1,c,u);t.push(new c3(null,g,null,!1,!1,!1))}}this._trimAutoWhitespaceLines=null}return this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEditOperation(e,t,i,n)}_applyUndo(e,t,i,n){const s=e.map(r=>{const a=this.getPositionAt(r.newPosition),l=this.getPositionAt(r.newEnd);return{range:new A(a.lineNumber,a.column,l.lineNumber,l.column),text:r.oldText}});this._applyUndoRedoEdits(s,t,!0,!1,i,n)}_applyRedo(e,t,i,n){const s=e.map(r=>{const a=this.getPositionAt(r.oldPosition),l=this.getPositionAt(r.oldEnd);return{range:new A(a.lineNumber,a.column,l.lineNumber,l.column),text:r.newText}});this._applyUndoRedoEdits(s,t,!1,!0,i,n)}_applyUndoRedoEdits(e,t,i,n,s,r){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._isUndoing=i,this._isRedoing=n,this.applyEdits(e,!1),this.setEOL(t),this._overwriteAlternativeVersionId(s)}finally{this._isUndoing=!1,this._isRedoing=!1,this._eventEmitter.endDeferredEmit(r),this._onDidChangeDecorations.endDeferredEmit()}}applyEdits(e,t=!1){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit();const i=this._validateEditOperations(e);return this._doApplyEdits(i,t)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_doApplyEdits(e,t){const i=this._buffer.getLineCount(),n=this._buffer.applyEdits(e,this._options.trimAutoWhitespace,t),s=this._buffer.getLineCount(),r=n.changes;if(this._trimAutoWhitespaceLines=n.trimAutoWhitespaceLineNumbers,r.length!==0){for(let c=0,u=r.length;c<u;c++){const f=r[c];this._decorationsTree.acceptReplace(f.rangeOffset,f.rangeLength,f.text.length,f.forceMoveMarkers)}const a=[];this._increaseVersionId();let l=i;for(let c=0,u=r.length;c<u;c++){const f=r[c],[g]=pm(f.text);this._onDidChangeDecorations.fire();const p=f.range.startLineNumber,_=f.range.endLineNumber,b=_-p,y=g,S=Math.min(b,y),L=y-b,x=s-l-L+p,D=x,E=x+y,N=this._decorationsTree.getInjectedTextInInterval(this,this.getOffsetAt(new Z(D,1)),this.getOffsetAt(new Z(E,this.getLineMaxColumn(E))),0),M=Gd.fromDecorations(N),F=new tg(M);for(let H=S;H>=0;H--){const Q=p+H,K=x+H;F.takeFromEndWhile(q=>q.lineNumber>K);const j=F.takeFromEndWhile(q=>q.lineNumber===K);a.push(new gQ(Q,this.getLineContent(K),j))}if(S<b){const H=p+S;a.push(new OEe(H+1,_))}if(S<y){const H=new tg(M),Q=p+S,K=y-S,j=s-l-K+Q+1,q=[],se=[];for(let fe=0;fe<K;fe++){const Ae=j+fe;se[fe]=this.getLineContent(Ae),H.takeWhile(Ne=>Ne.lineNumber<Ae),q[fe]=H.takeWhile(Ne=>Ne.lineNumber===Ae)}a.push(new FEe(Q+1,p+y,se,q))}l+=L}this._emitContentChangedEvent(new AC(a,this.getVersionId(),this._isUndoing,this._isRedoing),{changes:r,eol:this._buffer.getEOL(),isEolChange:!1,versionId:this.getVersionId(),isUndoing:this._isUndoing,isRedoing:this._isRedoing,isFlush:!1})}return n.reverseEdits===null?void 0:n.reverseEdits}undo(){return this._undoRedoService.undo(this.uri)}canUndo(){return this._undoRedoService.canUndo(this.uri)}redo(){return this._undoRedoService.redo(this.uri)}canRedo(){return this._undoRedoService.canRedo(this.uri)}handleBeforeFireDecorationsChangedEvent(e){if(e===null||e.size===0)return;const i=Array.from(e).map(n=>new gQ(n,this.getLineContent(n),this._getInjectedTextInLine(n)));this._onDidChangeInjectedText.fire(new _se(i))}changeDecorations(e,t=0){this._assertNotDisposed();try{return this._onDidChangeDecorations.beginDeferredEmit(),this._changeDecorations(t,e)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_changeDecorations(e,t){const i={addDecoration:(s,r)=>this._deltaDecorationsImpl(e,[],[{range:s,options:r}])[0],changeDecoration:(s,r)=>{this._changeDecorationImpl(s,r)},changeDecorationOptions:(s,r)=>{this._changeDecorationOptionsImpl(s,PQ(r))},removeDecoration:s=>{this._deltaDecorationsImpl(e,[s],[])},deltaDecorations:(s,r)=>s.length===0&&r.length===0?[]:this._deltaDecorationsImpl(e,s,r)};let n=null;try{n=t(i)}catch(s){Nt(s)}return i.addDecoration=CS,i.changeDecoration=CS,i.changeDecorationOptions=CS,i.removeDecoration=CS,i.deltaDecorations=CS,n}deltaDecorations(e,t,i=0){if(this._assertNotDisposed(),e||(e=[]),e.length===0&&t.length===0)return[];try{return this._deltaDecorationCallCnt++,this._deltaDecorationCallCnt>1&&(console.warn("Invoking deltaDecorations recursively could lead to leaking decorations."),Nt(new Error("Invoking deltaDecorations recursively could lead to leaking decorations."))),this._onDidChangeDecorations.beginDeferredEmit(),this._deltaDecorationsImpl(i,e,t)}finally{this._onDidChangeDecorations.endDeferredEmit(),this._deltaDecorationCallCnt--}}_getTrackedRange(e){return this.getDecorationRange(e)}_setTrackedRange(e,t,i){const n=e?this._decorations[e]:null;if(!n)return t?this._deltaDecorationsImpl(0,[],[{range:t,options:AQ[i]}],!0)[0]:null;if(!t)return this._decorationsTree.delete(n),delete this._decorations[n.id],null;const s=this._validateRangeRelaxedNoAllocations(t),r=this._buffer.getOffsetAt(s.startLineNumber,s.startColumn),a=this._buffer.getOffsetAt(s.endLineNumber,s.endColumn);return this._decorationsTree.delete(n),n.reset(this.getVersionId(),r,a,s),n.setOptions(AQ[i]),this._decorationsTree.insert(n),n.id}removeAllDecorationsWithOwnerId(e){if(this._isDisposed)return;const t=this._decorationsTree.collectNodesFromOwner(e);for(let i=0,n=t.length;i<n;i++){const s=t[i];this._decorationsTree.delete(s),delete this._decorations[s.id]}}getDecorationOptions(e){const t=this._decorations[e];return t?t.options:null}getDecorationRange(e){const t=this._decorations[e];return t?this._decorationsTree.getNodeRange(this,t):null}getLineDecorations(e,t=0,i=!1){return e<1||e>this.getLineCount()?[]:this.getLinesDecorations(e,e,t,i)}getLinesDecorations(e,t,i=0,n=!1,s=!1){const r=this.getLineCount(),a=Math.min(r,Math.max(1,e)),l=Math.min(r,Math.max(1,t)),c=this.getLineMaxColumn(l),u=new A(a,1,l,c),f=this._getDecorationsInRange(u,i,n,s);return qB(f,this._decorationProvider.getDecorationsInRange(u,i,n)),f}getDecorationsInRange(e,t=0,i=!1,n=!1,s=!1){const r=this.validateRange(e),a=this._getDecorationsInRange(r,t,i,s);return qB(a,this._decorationProvider.getDecorationsInRange(r,t,i,n)),a}getOverviewRulerDecorations(e=0,t=!1){return this._decorationsTree.getAll(this,e,t,!0,!1)}getInjectedTextDecorations(e=0){return this._decorationsTree.getAllInjectedText(this,e)}_getInjectedTextInLine(e){const t=this._buffer.getOffsetAt(e,1),i=t+this._buffer.getLineLength(e),n=this._decorationsTree.getInjectedTextInInterval(this,t,i,0);return Gd.fromDecorations(n).filter(s=>s.lineNumber===e)}getAllDecorations(e=0,t=!1){let i=this._decorationsTree.getAll(this,e,t,!1,!1);return i=i.concat(this._decorationProvider.getAllDecorations(e,t)),i}getAllMarginDecorations(e=0){return this._decorationsTree.getAll(this,e,!1,!1,!0)}_getDecorationsInRange(e,t,i,n){const s=this._buffer.getOffsetAt(e.startLineNumber,e.startColumn),r=this._buffer.getOffsetAt(e.endLineNumber,e.endColumn);return this._decorationsTree.getAllInInterval(this,s,r,t,i,n)}getRangeAt(e,t){return this._buffer.getRangeAt(e,t-e)}_changeDecorationImpl(e,t){const i=this._decorations[e];if(!i)return;if(i.options.after){const a=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.endLineNumber)}if(i.options.before){const a=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.startLineNumber)}const n=this._validateRangeRelaxedNoAllocations(t),s=this._buffer.getOffsetAt(n.startLineNumber,n.startColumn),r=this._buffer.getOffsetAt(n.endLineNumber,n.endColumn);this._decorationsTree.delete(i),i.reset(this.getVersionId(),s,r,n),this._decorationsTree.insert(i),this._onDidChangeDecorations.checkAffectedAndFire(i.options),i.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(n.endLineNumber),i.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(n.startLineNumber)}_changeDecorationOptionsImpl(e,t){const i=this._decorations[e];if(!i)return;const n=!!(i.options.overviewRuler&&i.options.overviewRuler.color),s=!!(t.overviewRuler&&t.overviewRuler.color);if(this._onDidChangeDecorations.checkAffectedAndFire(i.options),this._onDidChangeDecorations.checkAffectedAndFire(t),i.options.after||t.after){const l=this._decorationsTree.getNodeRange(this,i);this._onDidChangeDecorations.recordLineAffectedByInjectedText(l.endLineNumber)}if(i.options.before||t.before){const l=this._decorationsTree.getNodeRange(this,i);this._onDidChangeDecorations.recordLineAffectedByInjectedText(l.startLineNumber)}const r=n!==s,a=aTe(t)!==IN(i);r||a?(this._decorationsTree.delete(i),i.setOptions(t),this._decorationsTree.insert(i)):i.setOptions(t)}_deltaDecorationsImpl(e,t,i,n=!1){const s=this.getVersionId(),r=t.length;let a=0;const l=i.length;let c=0;this._onDidChangeDecorations.beginDeferredEmit();try{const u=new Array(l);for(;a<r||c<l;){let f=null;if(a<r){do f=this._decorations[t[a++]];while(!f&&a<r);if(f){if(f.options.after){const g=this._decorationsTree.getNodeRange(this,f);this._onDidChangeDecorations.recordLineAffectedByInjectedText(g.endLineNumber)}if(f.options.before){const g=this._decorationsTree.getNodeRange(this,f);this._onDidChangeDecorations.recordLineAffectedByInjectedText(g.startLineNumber)}this._decorationsTree.delete(f),n||this._onDidChangeDecorations.checkAffectedAndFire(f.options)}}if(c<l){if(!f){const S=++this._lastDecorationId,L=`${this._instanceId};${S}`;f=new Rse(L,0,0),this._decorations[L]=f}const g=i[c],p=this._validateRangeRelaxedNoAllocations(g.range),_=PQ(g.options),b=this._buffer.getOffsetAt(p.startLineNumber,p.startColumn),y=this._buffer.getOffsetAt(p.endLineNumber,p.endColumn);f.ownerId=e,f.reset(s,b,y,p),f.setOptions(_),f.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(p.endLineNumber),f.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(p.startLineNumber),n||this._onDidChangeDecorations.checkAffectedAndFire(_),this._decorationsTree.insert(f),u[c]=f.id,c++}else f&&delete this._decorations[f.id]}return u}finally{this._onDidChangeDecorations.endDeferredEmit()}}getLanguageId(){return this.tokenization.getLanguageId()}setLanguage(e,t){typeof e=="string"?(this._languageSelectionListener.clear(),this._setLanguage(e,t)):(this._languageSelectionListener.value=e.onDidChange(()=>this._setLanguage(e.languageId,t)),this._setLanguage(e.languageId,t))}_setLanguage(e,t){this.tokenization.setLanguageId(e,t),this._languageService.requestRichLanguageFeatures(e)}getLanguageIdAtPosition(e,t){return this.tokenization.getLanguageIdAtPosition(e,t)}getWordAtPosition(e){return this._tokenizationTextModelPart.getWordAtPosition(e)}getWordUntilPosition(e){return this._tokenizationTextModelPart.getWordUntilPosition(e)}normalizePosition(e,t){return e}getLineIndentColumn(e){return rTe(this.getLineContent(e))+1}};ph._MODEL_SYNC_LIMIT=50*1024*1024;ph.LARGE_FILE_SIZE_THRESHOLD=20*1024*1024;ph.LARGE_FILE_LINE_COUNT_THRESHOLD=300*1e3;ph.LARGE_FILE_HEAP_OPERATION_THRESHOLD=256*1024*1024;ph.DEFAULT_CREATION_OPTIONS={isForSimpleWidget:!1,tabSize:Ko.tabSize,indentSize:Ko.indentSize,insertSpaces:Ko.insertSpaces,detectIndentation:!1,defaultEOL:1,trimAutoWhitespace:Ko.trimAutoWhitespace,largeFileOptimizations:Ko.largeFileOptimizations,bracketPairColorizationOptions:Ko.bracketPairColorizationOptions};ph=V_=eTe([N3(4,YA),N3(5,xn),N3(6,dn)],ph);function rTe(o){let e=0;for(const t of o)if(t===" "||t==="	")e++;else break;return e}function R3(o){return!!(o.options.overviewRuler&&o.options.overviewRuler.color)}function aTe(o){return!!o.after||!!o.before}function IN(o){return!!o.options.after||!!o.options.before}class MQ{constructor(){this._decorationsTree0=new E3,this._decorationsTree1=new E3,this._injectedTextDecorationsTree=new E3}ensureAllNodesHaveRanges(e){this.getAll(e,0,!1,!1,!1)}_ensureNodesHaveRanges(e,t){for(const i of t)i.range===null&&(i.range=e.getRangeAt(i.cachedAbsoluteStart,i.cachedAbsoluteEnd));return t}getAllInInterval(e,t,i,n,s,r){const a=e.getVersionId(),l=this._intervalSearch(t,i,n,s,a,r);return this._ensureNodesHaveRanges(e,l)}_intervalSearch(e,t,i,n,s,r){const a=this._decorationsTree0.intervalSearch(e,t,i,n,s,r),l=this._decorationsTree1.intervalSearch(e,t,i,n,s,r),c=this._injectedTextDecorationsTree.intervalSearch(e,t,i,n,s,r);return a.concat(l).concat(c)}getInjectedTextInInterval(e,t,i,n){const s=e.getVersionId(),r=this._injectedTextDecorationsTree.intervalSearch(t,i,n,!1,s,!1);return this._ensureNodesHaveRanges(e,r).filter(a=>a.options.showIfCollapsed||!a.range.isEmpty())}getAllInjectedText(e,t){const i=e.getVersionId(),n=this._injectedTextDecorationsTree.search(t,!1,i,!1);return this._ensureNodesHaveRanges(e,n).filter(s=>s.options.showIfCollapsed||!s.range.isEmpty())}getAll(e,t,i,n,s){const r=e.getVersionId(),a=this._search(t,i,n,r,s);return this._ensureNodesHaveRanges(e,a)}_search(e,t,i,n,s){if(i)return this._decorationsTree1.search(e,t,n,s);{const r=this._decorationsTree0.search(e,t,n,s),a=this._decorationsTree1.search(e,t,n,s),l=this._injectedTextDecorationsTree.search(e,t,n,s);return r.concat(a).concat(l)}}collectNodesFromOwner(e){const t=this._decorationsTree0.collectNodesFromOwner(e),i=this._decorationsTree1.collectNodesFromOwner(e),n=this._injectedTextDecorationsTree.collectNodesFromOwner(e);return t.concat(i).concat(n)}collectNodesPostOrder(){const e=this._decorationsTree0.collectNodesPostOrder(),t=this._decorationsTree1.collectNodesPostOrder(),i=this._injectedTextDecorationsTree.collectNodesPostOrder();return e.concat(t).concat(i)}insert(e){IN(e)?this._injectedTextDecorationsTree.insert(e):R3(e)?this._decorationsTree1.insert(e):this._decorationsTree0.insert(e)}delete(e){IN(e)?this._injectedTextDecorationsTree.delete(e):R3(e)?this._decorationsTree1.delete(e):this._decorationsTree0.delete(e)}getNodeRange(e,t){const i=e.getVersionId();return t.cachedVersionId!==i&&this._resolveNode(t,i),t.range===null&&(t.range=e.getRangeAt(t.cachedAbsoluteStart,t.cachedAbsoluteEnd)),t.range}_resolveNode(e,t){IN(e)?this._injectedTextDecorationsTree.resolveNode(e,t):R3(e)?this._decorationsTree1.resolveNode(e,t):this._decorationsTree0.resolveNode(e,t)}acceptReplace(e,t,i,n){this._decorationsTree0.acceptReplace(e,t,i,n),this._decorationsTree1.acceptReplace(e,t,i,n),this._injectedTextDecorationsTree.acceptReplace(e,t,i,n)}}function Su(o){return o.replace(/[^a-z0-9\-_]/gi," ")}class Bse{constructor(e){this.color=e.color||"",this.darkColor=e.darkColor||""}}class lTe extends Bse{constructor(e){super(e),this._resolvedColor=null,this.position=typeof e.position=="number"?e.position:kl.Center}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=null}_resolveColor(e,t){if(typeof e=="string")return e;const i=e?t.getColor(e.id):null;return i?i.toString():""}}class cTe{constructor(e){var t;this.position=(t=e==null?void 0:e.position)!==null&&t!==void 0?t:hh.Center,this.persistLane=e==null?void 0:e.persistLane}}class dTe extends Bse{constructor(e){var t,i;super(e),this.position=e.position,this.sectionHeaderStyle=(t=e.sectionHeaderStyle)!==null&&t!==void 0?t:null,this.sectionHeaderText=(i=e.sectionHeaderText)!==null&&i!==void 0?i:null}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=void 0}_resolveColor(e,t){return typeof e=="string"?ne.fromHex(e):t.getColor(e.id)}}class vm{static from(e){return e instanceof vm?e:new vm(e)}constructor(e){this.content=e.content||"",this.inlineClassName=e.inlineClassName||null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.attachedData=e.attachedData||null,this.cursorStops=e.cursorStops||null}}class Rt{static register(e){return new Rt(e)}static createDynamic(e){return new Rt(e)}constructor(e){var t,i,n,s,r,a;this.description=e.description,this.blockClassName=e.blockClassName?Su(e.blockClassName):null,this.blockDoesNotCollapse=(t=e.blockDoesNotCollapse)!==null&&t!==void 0?t:null,this.blockIsAfterEnd=(i=e.blockIsAfterEnd)!==null&&i!==void 0?i:null,this.blockPadding=(n=e.blockPadding)!==null&&n!==void 0?n:null,this.stickiness=e.stickiness||0,this.zIndex=e.zIndex||0,this.className=e.className?Su(e.className):null,this.shouldFillLineOnLineBreak=(s=e.shouldFillLineOnLineBreak)!==null&&s!==void 0?s:null,this.hoverMessage=e.hoverMessage||null,this.glyphMarginHoverMessage=e.glyphMarginHoverMessage||null,this.lineNumberHoverMessage=e.lineNumberHoverMessage||null,this.isWholeLine=e.isWholeLine||!1,this.showIfCollapsed=e.showIfCollapsed||!1,this.collapseOnReplaceEdit=e.collapseOnReplaceEdit||!1,this.overviewRuler=e.overviewRuler?new lTe(e.overviewRuler):null,this.minimap=e.minimap?new dTe(e.minimap):null,this.glyphMargin=e.glyphMarginClassName?new cTe(e.glyphMargin):null,this.glyphMarginClassName=e.glyphMarginClassName?Su(e.glyphMarginClassName):null,this.linesDecorationsClassName=e.linesDecorationsClassName?Su(e.linesDecorationsClassName):null,this.lineNumberClassName=e.lineNumberClassName?Su(e.lineNumberClassName):null,this.linesDecorationsTooltip=e.linesDecorationsTooltip?DCe(e.linesDecorationsTooltip):null,this.firstLineDecorationClassName=e.firstLineDecorationClassName?Su(e.firstLineDecorationClassName):null,this.marginClassName=e.marginClassName?Su(e.marginClassName):null,this.inlineClassName=e.inlineClassName?Su(e.inlineClassName):null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.beforeContentClassName=e.beforeContentClassName?Su(e.beforeContentClassName):null,this.afterContentClassName=e.afterContentClassName?Su(e.afterContentClassName):null,this.after=e.after?vm.from(e.after):null,this.before=e.before?vm.from(e.before):null,this.hideInCommentTokens=(r=e.hideInCommentTokens)!==null&&r!==void 0?r:!1,this.hideInStringTokens=(a=e.hideInStringTokens)!==null&&a!==void 0?a:!1}}Rt.EMPTY=Rt.register({description:"empty"});const AQ=[Rt.register({description:"tracked-range-always-grows-when-typing-at-edges",stickiness:0}),Rt.register({description:"tracked-range-never-grows-when-typing-at-edges",stickiness:1}),Rt.register({description:"tracked-range-grows-only-when-typing-before",stickiness:2}),Rt.register({description:"tracked-range-grows-only-when-typing-after",stickiness:3})];function PQ(o){return o instanceof Rt?o:Rt.createDynamic(o)}class uTe extends J{constructor(e){super(),this.handleBeforeFire=e,this._actual=this._register(new Y),this.event=this._actual.event,this._affectedInjectedTextLines=null,this._deferredCnt=0,this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1,this._affectsLineNumber=!1}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(){var e;this._deferredCnt--,this._deferredCnt===0&&(this._shouldFireDeferred&&this.doFire(),(e=this._affectedInjectedTextLines)===null||e===void 0||e.clear(),this._affectedInjectedTextLines=null)}recordLineAffectedByInjectedText(e){this._affectedInjectedTextLines||(this._affectedInjectedTextLines=new Set),this._affectedInjectedTextLines.add(e)}checkAffectedAndFire(e){var t,i;this._affectsMinimap||(this._affectsMinimap=!!(!((t=e.minimap)===null||t===void 0)&&t.position)),this._affectsOverviewRuler||(this._affectsOverviewRuler=!!(!((i=e.overviewRuler)===null||i===void 0)&&i.color)),this._affectsGlyphMargin||(this._affectsGlyphMargin=!!e.glyphMarginClassName),this._affectsLineNumber||(this._affectsLineNumber=!!e.lineNumberClassName),this.tryFire()}fire(){this._affectsMinimap=!0,this._affectsOverviewRuler=!0,this._affectsGlyphMargin=!0,this.tryFire()}tryFire(){this._deferredCnt===0?this.doFire():this._shouldFireDeferred=!0}doFire(){this.handleBeforeFire(this._affectedInjectedTextLines);const e={affectsMinimap:this._affectsMinimap,affectsOverviewRuler:this._affectsOverviewRuler,affectsGlyphMargin:this._affectsGlyphMargin,affectsLineNumber:this._affectsLineNumber};this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1,this._actual.fire(e)}}class hTe extends J{constructor(){super(),this._fastEmitter=this._register(new Y),this.fastEvent=this._fastEmitter.event,this._slowEmitter=this._register(new Y),this.slowEvent=this._slowEmitter.event,this._deferredCnt=0,this._deferredEvent=null}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(e=null){if(this._deferredCnt--,this._deferredCnt===0&&this._deferredEvent!==null){this._deferredEvent.rawContentChangedEvent.resultingSelection=e;const t=this._deferredEvent;this._deferredEvent=null,this._fastEmitter.fire(t),this._slowEmitter.fire(t)}}fire(e){if(this._deferredCnt>0){this._deferredEvent?this._deferredEvent=this._deferredEvent.merge(e):this._deferredEvent=e;return}this._fastEmitter.fire(e),this._slowEmitter.fire(e)}}class fTe{constructor(){this._onDidChangeVisibleRanges=new Y,this.onDidChangeVisibleRanges=this._onDidChangeVisibleRanges.event,this._views=new Set}attachView(){const e=new gTe(t=>{this._onDidChangeVisibleRanges.fire({view:e,state:t})});return this._views.add(e),e}detachView(e){this._views.delete(e),this._onDidChangeVisibleRanges.fire({view:e,state:void 0})}}class gTe{constructor(e){this.handleStateChange=e}setVisibleLines(e,t){const i=e.map(n=>new Bt(n.startLineNumber,n.endLineNumber+1));this.handleStateChange({visibleLineRanges:i,stabilized:t})}}class VH{static create(e){return new VH(e.get(134),e.get(133))}constructor(e,t){this.classifier=new pTe(e,t)}createLineBreaksComputer(e,t,i,n,s){const r=[],a=[],l=[];return{addRequest:(c,u,f)=>{r.push(c),a.push(u),l.push(f)},finalize:()=>{const c=e.typicalFullwidthCharacterWidth/e.typicalHalfwidthCharacterWidth,u=[];for(let f=0,g=r.length;f<g;f++){const p=a[f],_=l[f];_&&!_.injectionOptions&&!p?u[f]=mTe(this.classifier,_,r[f],t,i,c,n,s):u[f]=_Te(this.classifier,r[f],p,t,i,c,n,s)}return $9.length=0,j9.length=0,u}}}}class pTe extends Z1{constructor(e,t){super(0);for(let i=0;i<e.length;i++)this.set(e.charCodeAt(i),1);for(let i=0;i<t.length;i++)this.set(t.charCodeAt(i),2)}get(e){return e>=0&&e<256?this._asciiMap[e]:e>=12352&&e<=12543||e>=13312&&e<=19903||e>=19968&&e<=40959?3:this._map.get(e)||this._defaultValue}}let $9=[],j9=[];function mTe(o,e,t,i,n,s,r,a){if(n===-1)return null;const l=t.length;if(l<=1)return null;const c=a==="keepAll",u=e.breakOffsets,f=e.breakOffsetsVisibleColumn,g=Wse(t,i,n,s,r),p=n-g,_=$9,b=j9;let y=0,S=0,L=0,x=n;const D=u.length;let E=0;if(E>=0){let N=Math.abs(f[E]-x);for(;E+1<D;){const M=Math.abs(f[E+1]-x);if(M>=N)break;N=M,E++}}for(;E<D;){let N=E<0?0:u[E],M=E<0?0:f[E];S>N&&(N=S,M=L);let F=0,H=0,Q=0,K=0;if(M<=x){let q=M,se=N===0?0:t.charCodeAt(N-1),fe=N===0?0:o.get(se),Ae=!0;for(let Ne=N;Ne<l;Ne++){const Le=Ne,be=t.charCodeAt(Ne);let ze,it;if(qs(be)?(Ne++,ze=0,it=2):(ze=o.get(be),it=kL(be,q,i,s)),Le>S&&K9(se,fe,be,ze,c)&&(F=Le,H=q),q+=it,q>x){Le>S?(Q=Le,K=q-it):(Q=Ne+1,K=q),q-H>p&&(F=0),Ae=!1;break}se=be,fe=ze}if(Ae){y>0&&(_[y]=u[u.length-1],b[y]=f[u.length-1],y++);break}}if(F===0){let q=M,se=t.charCodeAt(N),fe=o.get(se),Ae=!1;for(let Ne=N-1;Ne>=S;Ne--){const Le=Ne+1,be=t.charCodeAt(Ne);if(be===9){Ae=!0;break}let ze,it;if(Ev(be)?(Ne--,ze=0,it=2):(ze=o.get(be),it=lm(be)?s:1),q<=x){if(Q===0&&(Q=Le,K=q),q<=x-p)break;if(K9(be,ze,se,fe,c)){F=Le,H=q;break}}q-=it,se=be,fe=ze}if(F!==0){const Ne=p-(K-H);if(Ne<=i){const Le=t.charCodeAt(Q);let be;qs(Le)?be=2:be=kL(Le,K,i,s),Ne-be<0&&(F=0)}}if(Ae){E--;continue}}if(F===0&&(F=Q,H=K),F<=S){const q=t.charCodeAt(S);qs(q)?(F=S+2,H=L+2):(F=S+1,H=L+kL(q,L,i,s))}for(S=F,_[y]=F,L=H,b[y]=H,y++,x=H+p;E<0||E<D&&f[E]<H;)E++;let j=Math.abs(f[E]-x);for(;E+1<D;){const q=Math.abs(f[E+1]-x);if(q>=j)break;j=q,E++}}return y===0?null:(_.length=y,b.length=y,$9=e.breakOffsets,j9=e.breakOffsetsVisibleColumn,e.breakOffsets=_,e.breakOffsetsVisibleColumn=b,e.wrappedTextIndentLength=g,e)}function _Te(o,e,t,i,n,s,r,a){const l=Gd.applyInjectedText(e,t);let c,u;if(t&&t.length>0?(c=t.map(H=>H.options),u=t.map(H=>H.column-1)):(c=null,u=null),n===-1)return c?new yL(u,c,[l.length],[],0):null;const f=l.length;if(f<=1)return c?new yL(u,c,[l.length],[],0):null;const g=a==="keepAll",p=Wse(l,i,n,s,r),_=n-p,b=[],y=[];let S=0,L=0,x=0,D=n,E=l.charCodeAt(0),N=o.get(E),M=kL(E,0,i,s),F=1;qs(E)&&(M+=1,E=l.charCodeAt(1),N=o.get(E),F++);for(let H=F;H<f;H++){const Q=H,K=l.charCodeAt(H);let j,q;qs(K)?(H++,j=0,q=2):(j=o.get(K),q=kL(K,M,i,s)),K9(E,N,K,j,g)&&(L=Q,x=M),M+=q,M>D&&((L===0||M-x>_)&&(L=Q,x=M-q),b[S]=L,y[S]=x,S++,D=x+_,L=0),E=K,N=j}return S===0&&(!t||t.length===0)?null:(b[S]=f,y[S]=M,new yL(u,c,b,y,p))}function kL(o,e,t,i){return o===9?t-e%t:lm(o)||o<32?i:1}function OQ(o,e){return e-o%e}function K9(o,e,t,i,n){return t!==32&&(e===2&&i!==2||e!==1&&i===1||!n&&e===3&&i!==2||!n&&i===3&&e!==1)}function Wse(o,e,t,i,n){let s=0;if(n!==0){const r=gr(o);if(r!==-1){for(let l=0;l<r;l++){const c=o.charCodeAt(l)===9?OQ(s,e):1;s+=c}const a=n===3?2:n===2?1:0;for(let l=0;l<a;l++){const c=OQ(s,e);s+=c}s+i>t&&(s=0)}}return s}class HR{constructor(e){this._selTrackedRange=null,this._trackSelection=!0,this._setState(e,new go(new A(1,1,1,1),0,0,new Z(1,1),0),new go(new A(1,1,1,1),0,0,new Z(1,1),0))}dispose(e){this._removeTrackedRange(e)}startTrackingSelection(e){this._trackSelection=!0,this._updateTrackedRange(e)}stopTrackingSelection(e){this._trackSelection=!1,this._removeTrackedRange(e)}_updateTrackedRange(e){this._trackSelection&&(this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,this.modelState.selection,0))}_removeTrackedRange(e){this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,null,0)}asCursorState(){return new fi(this.modelState,this.viewState)}readSelectionFromMarkers(e){const t=e.model._getTrackedRange(this._selTrackedRange);return this.modelState.selection.isEmpty()&&!t.isEmpty()?Xe.fromRange(t.collapseToEnd(),this.modelState.selection.getDirection()):Xe.fromRange(t,this.modelState.selection.getDirection())}ensureValidState(e){this._setState(e,this.modelState,this.viewState)}setState(e,t,i){this._setState(e,t,i)}static _validatePositionWithCache(e,t,i,n){return t.equals(i)?n:e.normalizePosition(t,2)}static _validateViewState(e,t){const i=t.position,n=t.selectionStart.getStartPosition(),s=t.selectionStart.getEndPosition(),r=e.normalizePosition(i,2),a=this._validatePositionWithCache(e,n,i,r),l=this._validatePositionWithCache(e,s,n,a);return i.equals(r)&&n.equals(a)&&s.equals(l)?t:new go(A.fromPositions(a,l),t.selectionStartKind,t.selectionStartLeftoverVisibleColumns+n.column-a.column,r,t.leftoverVisibleColumns+i.column-r.column)}_setState(e,t,i){if(i&&(i=HR._validateViewState(e.viewModel,i)),t){const n=e.model.validateRange(t.selectionStart),s=t.selectionStart.equalsRange(n)?t.selectionStartLeftoverVisibleColumns:0,r=e.model.validatePosition(t.position),a=t.position.equals(r)?t.leftoverVisibleColumns:0;t=new go(n,t.selectionStartKind,s,r,a)}else{if(!i)return;const n=e.model.validateRange(e.coordinatesConverter.convertViewRangeToModelRange(i.selectionStart)),s=e.model.validatePosition(e.coordinatesConverter.convertViewPositionToModelPosition(i.position));t=new go(n,i.selectionStartKind,i.selectionStartLeftoverVisibleColumns,s,i.leftoverVisibleColumns)}if(i){const n=e.coordinatesConverter.validateViewRange(i.selectionStart,t.selectionStart),s=e.coordinatesConverter.validateViewPosition(i.position,t.position);i=new go(n,t.selectionStartKind,t.selectionStartLeftoverVisibleColumns,s,t.leftoverVisibleColumns)}else{const n=e.coordinatesConverter.convertModelPositionToViewPosition(new Z(t.selectionStart.startLineNumber,t.selectionStart.startColumn)),s=e.coordinatesConverter.convertModelPositionToViewPosition(new Z(t.selectionStart.endLineNumber,t.selectionStart.endColumn)),r=new A(n.lineNumber,n.column,s.lineNumber,s.column),a=e.coordinatesConverter.convertModelPositionToViewPosition(t.position);i=new go(r,t.selectionStartKind,t.selectionStartLeftoverVisibleColumns,a,t.leftoverVisibleColumns)}this.modelState=t,this.viewState=i,this._updateTrackedRange(e)}}class FQ{constructor(e){this.context=e,this.cursors=[new HR(e)],this.lastAddedCursorIndex=0}dispose(){for(const e of this.cursors)e.dispose(this.context)}startTrackingSelections(){for(const e of this.cursors)e.startTrackingSelection(this.context)}stopTrackingSelections(){for(const e of this.cursors)e.stopTrackingSelection(this.context)}updateContext(e){this.context=e}ensureValidState(){for(const e of this.cursors)e.ensureValidState(this.context)}readSelectionFromMarkers(){return this.cursors.map(e=>e.readSelectionFromMarkers(this.context))}getAll(){return this.cursors.map(e=>e.asCursorState())}getViewPositions(){return this.cursors.map(e=>e.viewState.position)}getTopMostViewPosition(){return tSe(this.cursors,ac(e=>e.viewState.position,Z.compare)).viewState.position}getBottomMostViewPosition(){return eSe(this.cursors,ac(e=>e.viewState.position,Z.compare)).viewState.position}getSelections(){return this.cursors.map(e=>e.modelState.selection)}getViewSelections(){return this.cursors.map(e=>e.viewState.selection)}setSelections(e){this.setStates(fi.fromModelSelections(e))}getPrimaryCursor(){return this.cursors[0].asCursorState()}setStates(e){e!==null&&(this.cursors[0].setState(this.context,e[0].modelState,e[0].viewState),this._setSecondaryStates(e.slice(1)))}_setSecondaryStates(e){const t=this.cursors.length-1,i=e.length;if(t<i){const n=i-t;for(let s=0;s<n;s++)this._addSecondaryCursor()}else if(t>i){const n=t-i;for(let s=0;s<n;s++)this._removeSecondaryCursor(this.cursors.length-2)}for(let n=0;n<i;n++)this.cursors[n+1].setState(this.context,e[n].modelState,e[n].viewState)}killSecondaryCursors(){this._setSecondaryStates([])}_addSecondaryCursor(){this.cursors.push(new HR(this.context)),this.lastAddedCursorIndex=this.cursors.length-1}getLastAddedCursorIndex(){return this.cursors.length===1||this.lastAddedCursorIndex===0?0:this.lastAddedCursorIndex}_removeSecondaryCursor(e){this.lastAddedCursorIndex>=e+1&&this.lastAddedCursorIndex--,this.cursors[e+1].dispose(this.context),this.cursors.splice(e+1,1)}normalize(){if(this.cursors.length===1)return;const e=this.cursors.slice(0),t=[];for(let i=0,n=e.length;i<n;i++)t.push({index:i,selection:e[i].modelState.selection});t.sort(ac(i=>i.selection,A.compareRangesUsingStarts));for(let i=0;i<t.length-1;i++){const n=t[i],s=t[i+1],r=n.selection,a=s.selection;if(!this.context.cursorConfig.multiCursorMergeOverlapping)continue;let l;if(a.isEmpty()||r.isEmpty()?l=a.getStartPosition().isBeforeOrEqual(r.getEndPosition()):l=a.getStartPosition().isBefore(r.getEndPosition()),l){const c=n.index<s.index?i:i+1,u=n.index<s.index?i+1:i,f=t[u].index,g=t[c].index,p=t[u].selection,_=t[c].selection;if(!p.equalsSelection(_)){const b=p.plusRange(_),y=p.selectionStartLineNumber===p.startLineNumber&&p.selectionStartColumn===p.startColumn,S=_.selectionStartLineNumber===_.startLineNumber&&_.selectionStartColumn===_.startColumn;let L;f===this.lastAddedCursorIndex?(L=y,this.lastAddedCursorIndex=g):L=S;let x;L?x=new Xe(b.startLineNumber,b.startColumn,b.endLineNumber,b.endColumn):x=new Xe(b.endLineNumber,b.endColumn,b.startLineNumber,b.startColumn),t[c].selection=x;const D=fi.fromModelSelection(x);e[g].setState(this.context,D.modelState,D.viewState)}for(const b of t)b.index>f&&b.index--;e.splice(f,1),t.splice(u,1),this._removeSecondaryCursor(f-1),i--}}}}class BQ{constructor(e,t,i,n){this._cursorContextBrand=void 0,this.model=e,this.viewModel=t,this.coordinatesConverter=i,this.cursorConfig=n}}class vTe{constructor(){this.type=0}}class bTe{constructor(){this.type=1}}class CTe{constructor(e){this.type=2,this._source=e}hasChanged(e){return this._source.hasChanged(e)}}class wTe{constructor(e,t,i){this.selections=e,this.modelSelections=t,this.reason=i,this.type=3}}class E_{constructor(e){this.type=4,e?(this.affectsMinimap=e.affectsMinimap,this.affectsOverviewRuler=e.affectsOverviewRuler,this.affectsGlyphMargin=e.affectsGlyphMargin,this.affectsLineNumber=e.affectsLineNumber):(this.affectsMinimap=!0,this.affectsOverviewRuler=!0,this.affectsGlyphMargin=!0,this.affectsLineNumber=!0)}}class pT{constructor(){this.type=5}}class yTe{constructor(e){this.type=6,this.isFocused=e}}class STe{constructor(){this.type=7}}class mT{constructor(){this.type=8}}class Vse{constructor(e,t){this.fromLineNumber=e,this.count=t,this.type=9}}class q9{constructor(e,t){this.type=10,this.fromLineNumber=e,this.toLineNumber=t}}class G9{constructor(e,t){this.type=11,this.fromLineNumber=e,this.toLineNumber=t}}class EL{constructor(e,t,i,n,s,r,a){this.source=e,this.minimalReveal=t,this.range=i,this.selections=n,this.verticalType=s,this.revealHorizontal=r,this.scrollType=a,this.type=12}}class LTe{constructor(e){this.type=13,this.scrollWidth=e.scrollWidth,this.scrollLeft=e.scrollLeft,this.scrollHeight=e.scrollHeight,this.scrollTop=e.scrollTop,this.scrollWidthChanged=e.scrollWidthChanged,this.scrollLeftChanged=e.scrollLeftChanged,this.scrollHeightChanged=e.scrollHeightChanged,this.scrollTopChanged=e.scrollTopChanged}}class xTe{constructor(e){this.theme=e,this.type=14}}class DTe{constructor(e){this.type=15,this.ranges=e}}class kTe{constructor(){this.type=16}}let ETe=class{constructor(){this.type=17}};class ITe extends J{constructor(){super(),this._onEvent=this._register(new Y),this.onEvent=this._onEvent.event,this._eventHandlers=[],this._viewEventQueue=null,this._isConsumingViewEventQueue=!1,this._collector=null,this._collectorCnt=0,this._outgoingEvents=[]}emitOutgoingEvent(e){this._addOutgoingEvent(e),this._emitOutgoingEvents()}_addOutgoingEvent(e){for(let t=0,i=this._outgoingEvents.length;t<i;t++){const n=this._outgoingEvents[t].kind===e.kind?this._outgoingEvents[t].attemptToMerge(e):null;if(n){this._outgoingEvents[t]=n;return}}this._outgoingEvents.push(e)}_emitOutgoingEvents(){for(;this._outgoingEvents.length>0;){if(this._collector||this._isConsumingViewEventQueue)return;const e=this._outgoingEvents.shift();e.isNoOp()||this._onEvent.fire(e)}}addViewEventHandler(e){for(let t=0,i=this._eventHandlers.length;t<i;t++)this._eventHandlers[t]===e&&console.warn("Detected duplicate listener in ViewEventDispatcher",e);this._eventHandlers.push(e)}removeViewEventHandler(e){for(let t=0;t<this._eventHandlers.length;t++)if(this._eventHandlers[t]===e){this._eventHandlers.splice(t,1);break}}beginEmitViewEvents(){return this._collectorCnt++,this._collectorCnt===1&&(this._collector=new TTe),this._collector}endEmitViewEvents(){if(this._collectorCnt--,this._collectorCnt===0){const e=this._collector.outgoingEvents,t=this._collector.viewEvents;this._collector=null;for(const i of e)this._addOutgoingEvent(i);t.length>0&&this._emitMany(t)}this._emitOutgoingEvents()}emitSingleViewEvent(e){try{this.beginEmitViewEvents().emitViewEvent(e)}finally{this.endEmitViewEvents()}}_emitMany(e){this._viewEventQueue?this._viewEventQueue=this._viewEventQueue.concat(e):this._viewEventQueue=e,this._isConsumingViewEventQueue||this._consumeViewEventQueue()}_consumeViewEventQueue(){try{this._isConsumingViewEventQueue=!0,this._doConsumeQueue()}finally{this._isConsumingViewEventQueue=!1}}_doConsumeQueue(){for(;this._viewEventQueue;){const e=this._viewEventQueue;this._viewEventQueue=null;const t=this._eventHandlers.slice(0);for(const i of t)i.handleEvents(e)}}}class TTe{constructor(){this.viewEvents=[],this.outgoingEvents=[]}emitViewEvent(e){this.viewEvents.push(e)}emitOutgoingEvent(e){this.outgoingEvents.push(e)}}class HH{constructor(e,t,i,n){this.kind=0,this._oldContentWidth=e,this._oldContentHeight=t,this.contentWidth=i,this.contentHeight=n,this.contentWidthChanged=this._oldContentWidth!==this.contentWidth,this.contentHeightChanged=this._oldContentHeight!==this.contentHeight}isNoOp(){return!this.contentWidthChanged&&!this.contentHeightChanged}attemptToMerge(e){return e.kind!==this.kind?null:new HH(this._oldContentWidth,this._oldContentHeight,e.contentWidth,e.contentHeight)}}class zH{constructor(e,t){this.kind=1,this.oldHasFocus=e,this.hasFocus=t}isNoOp(){return this.oldHasFocus===this.hasFocus}attemptToMerge(e){return e.kind!==this.kind?null:new zH(this.oldHasFocus,e.hasFocus)}}class UH{constructor(e,t,i,n,s,r,a,l){this.kind=2,this._oldScrollWidth=e,this._oldScrollLeft=t,this._oldScrollHeight=i,this._oldScrollTop=n,this.scrollWidth=s,this.scrollLeft=r,this.scrollHeight=a,this.scrollTop=l,this.scrollWidthChanged=this._oldScrollWidth!==this.scrollWidth,this.scrollLeftChanged=this._oldScrollLeft!==this.scrollLeft,this.scrollHeightChanged=this._oldScrollHeight!==this.scrollHeight,this.scrollTopChanged=this._oldScrollTop!==this.scrollTop}isNoOp(){return!this.scrollWidthChanged&&!this.scrollLeftChanged&&!this.scrollHeightChanged&&!this.scrollTopChanged}attemptToMerge(e){return e.kind!==this.kind?null:new UH(this._oldScrollWidth,this._oldScrollLeft,this._oldScrollHeight,this._oldScrollTop,e.scrollWidth,e.scrollLeft,e.scrollHeight,e.scrollTop)}}class NTe{constructor(){this.kind=3}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class RTe{constructor(){this.kind=4}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class zR{constructor(e,t,i,n,s,r,a){this.kind=6,this.oldSelections=e,this.selections=t,this.oldModelVersionId=i,this.modelVersionId=n,this.source=s,this.reason=r,this.reachedMaxCursorCount=a}static _selectionsAreEqual(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;const i=e.length,n=t.length;if(i!==n)return!1;for(let s=0;s<i;s++)if(!e[s].equalsSelection(t[s]))return!1;return!0}isNoOp(){return zR._selectionsAreEqual(this.oldSelections,this.selections)&&this.oldModelVersionId===this.modelVersionId}attemptToMerge(e){return e.kind!==this.kind?null:new zR(this.oldSelections,e.selections,this.oldModelVersionId,e.modelVersionId,e.source,e.reason,this.reachedMaxCursorCount||e.reachedMaxCursorCount)}}class MTe{constructor(){this.kind=5}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class ATe{constructor(e){this.event=e,this.kind=7}isNoOp(){return!1}attemptToMerge(e){return null}}class PTe{constructor(e){this.event=e,this.kind=8}isNoOp(){return!1}attemptToMerge(e){return null}}class OTe{constructor(e){this.event=e,this.kind=9}isNoOp(){return!1}attemptToMerge(e){return null}}class FTe{constructor(e){this.event=e,this.kind=10}isNoOp(){return!1}attemptToMerge(e){return null}}class BTe{constructor(e){this.event=e,this.kind=11}isNoOp(){return!1}attemptToMerge(e){return null}}class WTe{constructor(e){this.event=e,this.kind=12}isNoOp(){return!1}attemptToMerge(e){return null}}class VTe extends J{constructor(e,t,i,n){super(),this._model=e,this._knownModelVersionId=this._model.getVersionId(),this._viewModel=t,this._coordinatesConverter=i,this.context=new BQ(this._model,this._viewModel,this._coordinatesConverter,n),this._cursors=new FQ(this.context),this._hasFocus=!1,this._isHandling=!1,this._compositionState=null,this._columnSelectData=null,this._autoClosedActions=[],this._prevEditOperationType=0}dispose(){this._cursors.dispose(),this._autoClosedActions=cn(this._autoClosedActions),super.dispose()}updateConfiguration(e){this.context=new BQ(this._model,this._viewModel,this._coordinatesConverter,e),this._cursors.updateContext(this.context)}onLineMappingChanged(e){this._knownModelVersionId===this._model.getVersionId()&&this.setStates(e,"viewModel",0,this.getCursorStates())}setHasFocus(e){this._hasFocus=e}_validateAutoClosedActions(){if(this._autoClosedActions.length>0){const e=this._cursors.getSelections();for(let t=0;t<this._autoClosedActions.length;t++){const i=this._autoClosedActions[t];i.isValid(e)||(i.dispose(),this._autoClosedActions.splice(t,1),t--)}}}getPrimaryCursorState(){return this._cursors.getPrimaryCursor()}getLastAddedCursorIndex(){return this._cursors.getLastAddedCursorIndex()}getCursorStates(){return this._cursors.getAll()}setStates(e,t,i,n){let s=!1;const r=this.context.cursorConfig.multiCursorLimit;n!==null&&n.length>r&&(n=n.slice(0,r),s=!0);const a=IL.from(this._model,this);return this._cursors.setStates(n),this._cursors.normalize(),this._columnSelectData=null,this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,t,i,a,s)}setCursorColumnSelectData(e){this._columnSelectData=e}revealAll(e,t,i,n,s,r){const a=this._cursors.getViewPositions();let l=null,c=null;a.length>1?c=this._cursors.getViewSelections():l=A.fromPositions(a[0],a[0]),e.emitViewEvent(new EL(t,i,l,c,n,s,r))}revealPrimary(e,t,i,n,s,r){const l=[this._cursors.getPrimaryCursor().viewState.selection];e.emitViewEvent(new EL(t,i,null,l,n,s,r))}saveState(){const e=[],t=this._cursors.getSelections();for(let i=0,n=t.length;i<n;i++){const s=t[i];e.push({inSelectionMode:!s.isEmpty(),selectionStart:{lineNumber:s.selectionStartLineNumber,column:s.selectionStartColumn},position:{lineNumber:s.positionLineNumber,column:s.positionColumn}})}return e}restoreState(e,t){const i=[];for(let n=0,s=t.length;n<s;n++){const r=t[n];let a=1,l=1;r.position&&r.position.lineNumber&&(a=r.position.lineNumber),r.position&&r.position.column&&(l=r.position.column);let c=a,u=l;r.selectionStart&&r.selectionStart.lineNumber&&(c=r.selectionStart.lineNumber),r.selectionStart&&r.selectionStart.column&&(u=r.selectionStart.column),i.push({selectionStartLineNumber:c,selectionStartColumn:u,positionLineNumber:a,positionColumn:l})}this.setStates(e,"restoreState",0,fi.fromModelSelections(i)),this.revealAll(e,"restoreState",!1,0,!0,1)}onModelContentChanged(e,t){if(t instanceof _se){if(this._isHandling)return;this._isHandling=!0;try{this.setStates(e,"modelChange",0,this.getCursorStates())}finally{this._isHandling=!1}}else{const i=t.rawContentChangedEvent;if(this._knownModelVersionId=i.versionId,this._isHandling)return;const n=i.containsEvent(1);if(this._prevEditOperationType=0,n)this._cursors.dispose(),this._cursors=new FQ(this.context),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,"model",1,null,!1);else if(this._hasFocus&&i.resultingSelection&&i.resultingSelection.length>0){const s=fi.fromModelSelections(i.resultingSelection);this.setStates(e,"modelChange",i.isUndoing?5:i.isRedoing?6:2,s)&&this.revealAll(e,"modelChange",!1,0,!0,0)}else{const s=this._cursors.readSelectionFromMarkers();this.setStates(e,"modelChange",2,fi.fromModelSelections(s))}}}getSelection(){return this._cursors.getPrimaryCursor().modelState.selection}getTopMostViewPosition(){return this._cursors.getTopMostViewPosition()}getBottomMostViewPosition(){return this._cursors.getBottomMostViewPosition()}getCursorColumnSelectData(){if(this._columnSelectData)return this._columnSelectData;const e=this._cursors.getPrimaryCursor(),t=e.viewState.selectionStart.getStartPosition(),i=e.viewState.position;return{isReal:!1,fromViewLineNumber:t.lineNumber,fromViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,t),toViewLineNumber:i.lineNumber,toViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,i)}}getSelections(){return this._cursors.getSelections()}setSelections(e,t,i,n){this.setStates(e,t,n,fi.fromModelSelections(i))}getPrevEditOperationType(){return this._prevEditOperationType}setPrevEditOperationType(e){this._prevEditOperationType=e}_pushAutoClosedAction(e,t){const i=[],n=[];for(let a=0,l=e.length;a<l;a++)i.push({range:e[a],options:{description:"auto-closed-character",inlineClassName:"auto-closed-character",stickiness:1}}),n.push({range:t[a],options:{description:"auto-closed-enclosing",stickiness:1}});const s=this._model.deltaDecorations([],i),r=this._model.deltaDecorations([],n);this._autoClosedActions.push(new WQ(this._model,s,r))}_executeEditOperation(e){if(!e)return;e.shouldPushStackElementBefore&&this._model.pushStackElement();const t=HTe.executeCommands(this._model,this._cursors.getSelections(),e.commands);if(t){this._interpretCommandResult(t);const i=[],n=[];for(let s=0;s<e.commands.length;s++){const r=e.commands[s];r instanceof lse&&r.enclosingRange&&r.closeCharacterRange&&(i.push(r.closeCharacterRange),n.push(r.enclosingRange))}i.length>0&&this._pushAutoClosedAction(i,n),this._prevEditOperationType=e.type}e.shouldPushStackElementAfter&&this._model.pushStackElement()}_interpretCommandResult(e){(!e||e.length===0)&&(e=this._cursors.readSelectionFromMarkers()),this._columnSelectData=null,this._cursors.setSelections(e),this._cursors.normalize()}_emitStateChangedIfNecessary(e,t,i,n,s){const r=IL.from(this._model,this);if(r.equals(n))return!1;const a=this._cursors.getSelections(),l=this._cursors.getViewSelections();if(e.emitViewEvent(new wTe(l,a,i)),!n||n.cursorState.length!==r.cursorState.length||r.cursorState.some((c,u)=>!c.modelState.equals(n.cursorState[u].modelState))){const c=n?n.cursorState.map(f=>f.modelState.selection):null,u=n?n.modelVersionId:0;e.emitOutgoingEvent(new zR(c,a,u,r.modelVersionId,t||"keyboard",i,s))}return!0}_findAutoClosingPairs(e){if(!e.length)return null;const t=[];for(let i=0,n=e.length;i<n;i++){const s=e[i];if(!s.text||s.text.indexOf(`
`)>=0)return null;const r=s.text.match(/([)\]}>'"`])([^)\]}>'"`]*)$/);if(!r)return null;const a=r[1],l=this.context.cursorConfig.autoClosingPairs.autoClosingPairsCloseSingleChar.get(a);if(!l||l.length!==1)return null;const c=l[0].open,u=s.text.length-r[2].length-1,f=s.text.lastIndexOf(c,u-1);if(f===-1)return null;t.push([f,u])}return t}executeEdits(e,t,i,n){let s=null;t==="snippet"&&(s=this._findAutoClosingPairs(i)),s&&(i[0]._isTracked=!0);const r=[],a=[],l=this._model.pushEditOperations(this.getSelections(),i,c=>{if(s)for(let f=0,g=s.length;f<g;f++){const[p,_]=s[f],b=c[f],y=b.range.startLineNumber,S=b.range.startColumn-1+p,L=b.range.startColumn-1+_;r.push(new A(y,L+1,y,L+2)),a.push(new A(y,S+1,y,L+2))}const u=n(c);return u&&(this._isHandling=!0),u});l&&(this._isHandling=!1,this.setSelections(e,t,l,0)),r.length>0&&this._pushAutoClosedAction(r,a)}_executeEdit(e,t,i,n=0){if(this.context.cursorConfig.readOnly)return;const s=IL.from(this._model,this);this._cursors.stopTrackingSelections(),this._isHandling=!0;try{this._cursors.ensureValidState(),e()}catch(r){Nt(r)}this._isHandling=!1,this._cursors.startTrackingSelections(),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(t,i,n,s,!1)&&this.revealAll(t,i,!1,0,!0,0)}getAutoClosedCharacters(){return WQ.getAllAutoClosedCharacters(this._autoClosedActions)}startComposition(e){this._compositionState=new TL(this._model,this.getSelections())}endComposition(e,t){const i=this._compositionState?this._compositionState.deduceOutcome(this._model,this.getSelections()):null;this._compositionState=null,this._executeEdit(()=>{t==="keyboard"&&this._executeEditOperation(Hn.compositionEndWithInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,i,this.getSelections(),this.getAutoClosedCharacters()))},e,t)}type(e,t,i){this._executeEdit(()=>{if(i==="keyboard"){const n=t.length;let s=0;for(;s<n;){const r=VV(t,s),a=t.substr(s,r);this._executeEditOperation(Hn.typeWithInterceptors(!!this._compositionState,this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),this.getAutoClosedCharacters(),a)),s+=r}}else this._executeEditOperation(Hn.typeWithoutInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t))},e,i)}compositionType(e,t,i,n,s,r){if(t.length===0&&i===0&&n===0){if(s!==0){const a=this.getSelections().map(l=>{const c=l.getPosition();return new Xe(c.lineNumber,c.column+s,c.lineNumber,c.column+s)});this.setSelections(e,r,a,0)}return}this._executeEdit(()=>{this._executeEditOperation(Hn.compositionType(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t,i,n,s))},e,r)}paste(e,t,i,n,s){this._executeEdit(()=>{this._executeEditOperation(Hn.paste(this.context.cursorConfig,this._model,this.getSelections(),t,i,n||[]))},e,s,4)}cut(e,t){this._executeEdit(()=>{this._executeEditOperation(Pv.cut(this.context.cursorConfig,this._model,this.getSelections()))},e,t)}executeCommand(e,t,i){this._executeEdit(()=>{this._cursors.killSecondaryCursors(),this._executeEditOperation(new ra(0,[t],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,i)}executeCommands(e,t,i){this._executeEdit(()=>{this._executeEditOperation(new ra(0,t,{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,i)}}class IL{static from(e,t){return new IL(e.getVersionId(),t.getCursorStates())}constructor(e,t){this.modelVersionId=e,this.cursorState=t}equals(e){if(!e||this.modelVersionId!==e.modelVersionId||this.cursorState.length!==e.cursorState.length)return!1;for(let t=0,i=this.cursorState.length;t<i;t++)if(!this.cursorState[t].equals(e.cursorState[t]))return!1;return!0}}class WQ{static getAllAutoClosedCharacters(e){let t=[];for(const i of e)t=t.concat(i.getAutoClosedCharactersRanges());return t}constructor(e,t,i){this._model=e,this._autoClosedCharactersDecorations=t,this._autoClosedEnclosingDecorations=i}dispose(){this._autoClosedCharactersDecorations=this._model.deltaDecorations(this._autoClosedCharactersDecorations,[]),this._autoClosedEnclosingDecorations=this._model.deltaDecorations(this._autoClosedEnclosingDecorations,[])}getAutoClosedCharactersRanges(){const e=[];for(let t=0;t<this._autoClosedCharactersDecorations.length;t++){const i=this._model.getDecorationRange(this._autoClosedCharactersDecorations[t]);i&&e.push(i)}return e}isValid(e){const t=[];for(let i=0;i<this._autoClosedEnclosingDecorations.length;i++){const n=this._model.getDecorationRange(this._autoClosedEnclosingDecorations[i]);if(n&&(t.push(n),n.startLineNumber!==n.endLineNumber))return!1}t.sort(A.compareRangesUsingStarts),e.sort(A.compareRangesUsingStarts);for(let i=0;i<e.length;i++)if(i>=t.length||!t[i].strictContainsRange(e[i]))return!1;return!0}}class HTe{static executeCommands(e,t,i){const n={model:e,selectionsBefore:t,trackedRanges:[],trackedRangesDirection:[]},s=this._innerExecuteCommands(n,i);for(let r=0,a=n.trackedRanges.length;r<a;r++)n.model._setTrackedRange(n.trackedRanges[r],null,0);return s}static _innerExecuteCommands(e,t){if(this._arrayIsEmpty(t))return null;const i=this._getEditOperations(e,t);if(i.operations.length===0)return null;const n=i.operations,s=this._getLoserCursorMap(n);if(s.hasOwnProperty("0"))return console.warn("Ignoring commands"),null;const r=[];for(let c=0,u=n.length;c<u;c++)s.hasOwnProperty(n[c].identifier.major.toString())||r.push(n[c]);i.hadTrackedEditOperation&&r.length>0&&(r[0]._isTracked=!0);let a=e.model.pushEditOperations(e.selectionsBefore,r,c=>{const u=[];for(let p=0;p<e.selectionsBefore.length;p++)u[p]=[];for(const p of c)p.identifier&&u[p.identifier.major].push(p);const f=(p,_)=>p.identifier.minor-_.identifier.minor,g=[];for(let p=0;p<e.selectionsBefore.length;p++)u[p].length>0?(u[p].sort(f),g[p]=t[p].computeCursorState(e.model,{getInverseEditOperations:()=>u[p],getTrackedSelection:_=>{const b=parseInt(_,10),y=e.model._getTrackedRange(e.trackedRanges[b]);return e.trackedRangesDirection[b]===0?new Xe(y.startLineNumber,y.startColumn,y.endLineNumber,y.endColumn):new Xe(y.endLineNumber,y.endColumn,y.startLineNumber,y.startColumn)}})):g[p]=e.selectionsBefore[p];return g});a||(a=e.selectionsBefore);const l=[];for(const c in s)s.hasOwnProperty(c)&&l.push(parseInt(c,10));l.sort((c,u)=>u-c);for(const c of l)a.splice(c,1);return a}static _arrayIsEmpty(e){for(let t=0,i=e.length;t<i;t++)if(e[t])return!1;return!0}static _getEditOperations(e,t){let i=[],n=!1;for(let s=0,r=t.length;s<r;s++){const a=t[s];if(a){const l=this._getEditOperationsFromCommand(e,s,a);i=i.concat(l.operations),n=n||l.hadTrackedEditOperation}}return{operations:i,hadTrackedEditOperation:n}}static _getEditOperationsFromCommand(e,t,i){const n=[];let s=0;const r=(f,g,p=!1)=>{A.isEmpty(f)&&g===""||n.push({identifier:{major:t,minor:s++},range:f,text:g,forceMoveMarkers:p,isAutoWhitespaceEdit:i.insertsAutoWhitespace})};let a=!1;const u={addEditOperation:r,addTrackedEditOperation:(f,g,p)=>{a=!0,r(f,g,p)},trackSelection:(f,g)=>{const p=Xe.liftSelection(f);let _;if(p.isEmpty())if(typeof g=="boolean")g?_=2:_=3;else{const S=e.model.getLineMaxColumn(p.startLineNumber);p.startColumn===S?_=2:_=3}else _=1;const b=e.trackedRanges.length,y=e.model._setTrackedRange(null,p,_);return e.trackedRanges[b]=y,e.trackedRangesDirection[b]=p.getDirection(),b.toString()}};try{i.getEditOperations(e.model,u)}catch(f){return Nt(f),{operations:[],hadTrackedEditOperation:!1}}return{operations:n,hadTrackedEditOperation:a}}static _getLoserCursorMap(e){e=e.slice(0),e.sort((i,n)=>-A.compareRangesUsingEnds(i.range,n.range));const t={};for(let i=1;i<e.length;i++){const n=e[i-1],s=e[i];if(A.getStartPosition(n.range).isBefore(A.getEndPosition(s.range))){let r;n.identifier.major>s.identifier.major?r=n.identifier.major:r=s.identifier.major,t[r.toString()]=!0;for(let a=0;a<e.length;a++)e[a].identifier.major===r&&(e.splice(a,1),a<i&&i--,a--);i>0&&i--}}return t}}class zTe{constructor(e,t,i){this.text=e,this.startSelection=t,this.endSelection=i}}class TL{static _capture(e,t){const i=[];for(const n of t){if(n.startLineNumber!==n.endLineNumber)return null;i.push(new zTe(e.getLineContent(n.startLineNumber),n.startColumn-1,n.endColumn-1))}return i}constructor(e,t){this._original=TL._capture(e,t)}deduceOutcome(e,t){if(!this._original)return null;const i=TL._capture(e,t);if(!i||this._original.length!==i.length)return null;const n=[];for(let s=0,r=this._original.length;s<r;s++)n.push(TL._deduceOutcome(this._original[s],i[s]));return n}static _deduceOutcome(e,t){const i=Math.min(e.startSelection,t.startSelection,am(e.text,t.text)),n=Math.min(e.text.length-e.endSelection,t.text.length-t.endSelection,fR(e.text,t.text)),s=e.text.substring(i,e.text.length-n),r=t.text.substring(i,t.text.length-n);return new Bke(s,e.startSelection-i,e.endSelection-i,r,t.startSelection-i,t.endSelection-i)}}const VQ={getInitialState:()=>l1,tokenizeEncoded:(o,e,t)=>PA(0,t)};async function UTe(o,e,t){if(!t)return HQ(e,o.languageIdCodec,VQ);const i=await Qn.getOrCreate(t);return HQ(e,o.languageIdCodec,i||VQ)}function $Te(o,e,t,i,n,s,r){let a="<div>",l=i,c=0,u=!0;for(let f=0,g=e.getCount();f<g;f++){const p=e.getEndOffset(f);if(p<=i)continue;let _="";for(;l<p&&l<n;l++){const b=o.charCodeAt(l);switch(b){case 9:{let y=s-(l+c)%s;for(c+=y-1;y>0;)r&&u?(_+="&#160;",u=!1):(_+=" ",u=!0),y--;break}case 60:_+="&lt;",u=!1;break;case 62:_+="&gt;",u=!1;break;case 38:_+="&amp;",u=!1;break;case 0:_+="&#00;",u=!1;break;case 65279:case 8232:case 8233:case 133:_+="",u=!1;break;case 13:_+="&#8203",u=!1;break;case 32:r&&u?(_+="&#160;",u=!1):(_+=" ",u=!0);break;default:_+=String.fromCharCode(b),u=!1}}if(a+=`<span style="${e.getInlineStyle(f,t)}">${_}</span>`,p>n||l>=n)break}return a+="</div>",a}function HQ(o,e,t){let i='<div class="monaco-tokenized-source">';const n=Sh(o);let s=t.getInitialState();for(let r=0,a=n.length;r<a;r++){const l=n[r];r>0&&(i+="<br/>");const c=t.tokenizeEncoded(l,!0,s);Gs.convertToEndOffset(c.tokens,l.length);const f=new Gs(c.tokens,l,e).inflate();let g=0;for(let p=0,_=f.getCount();p<_;p++){const b=f.getClassName(p),y=f.getEndOffset(p);i+=`<span class="${b}">${hR(l.substring(g,y))}</span>`,g=y}s=c.endState}return i+="</div>",i}class jTe{constructor(){this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[]}insert(e){this._hasPending=!0,this._inserts.push(e)}change(e){this._hasPending=!0,this._changes.push(e)}remove(e){this._hasPending=!0,this._removes.push(e)}mustCommit(){return this._hasPending}commit(e){if(!this._hasPending)return;const t=this._inserts,i=this._changes,n=this._removes;this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[],e._commitPendingChanges(t,i,n)}}class KTe{constructor(e,t,i,n,s){this.id=e,this.afterLineNumber=t,this.ordinal=i,this.height=n,this.minWidth=s,this.prefixSum=0}}let Hse=class Y9{constructor(e,t,i,n){this._instanceId=mie(++Y9.INSTANCE_COUNT),this._pendingChanges=new jTe,this._lastWhitespaceId=0,this._arr=[],this._prefixSumValidIndex=-1,this._minWidth=-1,this._lineCount=e,this._lineHeight=t,this._paddingTop=i,this._paddingBottom=n}static findInsertionIndex(e,t,i){let n=0,s=e.length;for(;n<s;){const r=n+s>>>1;t===e[r].afterLineNumber?i<e[r].ordinal?s=r:n=r+1:t<e[r].afterLineNumber?s=r:n=r+1}return n}setLineHeight(e){this._checkPendingChanges(),this._lineHeight=e}setPadding(e,t){this._paddingTop=e,this._paddingBottom=t}onFlushed(e){this._checkPendingChanges(),this._lineCount=e}changeWhitespace(e){let t=!1;try{e({insertWhitespace:(n,s,r,a)=>{t=!0,n=n|0,s=s|0,r=r|0,a=a|0;const l=this._instanceId+ ++this._lastWhitespaceId;return this._pendingChanges.insert(new KTe(l,n,s,r,a)),l},changeOneWhitespace:(n,s,r)=>{t=!0,s=s|0,r=r|0,this._pendingChanges.change({id:n,newAfterLineNumber:s,newHeight:r})},removeWhitespace:n=>{t=!0,this._pendingChanges.remove({id:n})}})}finally{this._pendingChanges.commit(this)}return t}_commitPendingChanges(e,t,i){if((e.length>0||i.length>0)&&(this._minWidth=-1),e.length+t.length+i.length<=1){for(const l of e)this._insertWhitespace(l);for(const l of t)this._changeOneWhitespace(l.id,l.newAfterLineNumber,l.newHeight);for(const l of i){const c=this._findWhitespaceIndex(l.id);c!==-1&&this._removeWhitespace(c)}return}const n=new Set;for(const l of i)n.add(l.id);const s=new Map;for(const l of t)s.set(l.id,l);const r=l=>{const c=[];for(const u of l)if(!n.has(u.id)){if(s.has(u.id)){const f=s.get(u.id);u.afterLineNumber=f.newAfterLineNumber,u.height=f.newHeight}c.push(u)}return c},a=r(this._arr).concat(r(e));a.sort((l,c)=>l.afterLineNumber===c.afterLineNumber?l.ordinal-c.ordinal:l.afterLineNumber-c.afterLineNumber),this._arr=a,this._prefixSumValidIndex=-1}_checkPendingChanges(){this._pendingChanges.mustCommit()&&this._pendingChanges.commit(this)}_insertWhitespace(e){const t=Y9.findInsertionIndex(this._arr,e.afterLineNumber,e.ordinal);this._arr.splice(t,0,e),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,t-1)}_findWhitespaceIndex(e){const t=this._arr;for(let i=0,n=t.length;i<n;i++)if(t[i].id===e)return i;return-1}_changeOneWhitespace(e,t,i){const n=this._findWhitespaceIndex(e);if(n!==-1&&(this._arr[n].height!==i&&(this._arr[n].height=i,this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,n-1)),this._arr[n].afterLineNumber!==t)){const s=this._arr[n];this._removeWhitespace(n),s.afterLineNumber=t,this._insertWhitespace(s)}}_removeWhitespace(e){this._arr.splice(e,1),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,e-1)}onLinesDeleted(e,t){this._checkPendingChanges(),e=e|0,t=t|0,this._lineCount-=t-e+1;for(let i=0,n=this._arr.length;i<n;i++){const s=this._arr[i].afterLineNumber;e<=s&&s<=t?this._arr[i].afterLineNumber=e-1:s>t&&(this._arr[i].afterLineNumber-=t-e+1)}}onLinesInserted(e,t){this._checkPendingChanges(),e=e|0,t=t|0,this._lineCount+=t-e+1;for(let i=0,n=this._arr.length;i<n;i++){const s=this._arr[i].afterLineNumber;e<=s&&(this._arr[i].afterLineNumber+=t-e+1)}}getWhitespacesTotalHeight(){return this._checkPendingChanges(),this._arr.length===0?0:this.getWhitespacesAccumulatedHeight(this._arr.length-1)}getWhitespacesAccumulatedHeight(e){this._checkPendingChanges(),e=e|0;let t=Math.max(0,this._prefixSumValidIndex+1);t===0&&(this._arr[0].prefixSum=this._arr[0].height,t++);for(let i=t;i<=e;i++)this._arr[i].prefixSum=this._arr[i-1].prefixSum+this._arr[i].height;return this._prefixSumValidIndex=Math.max(this._prefixSumValidIndex,e),this._arr[e].prefixSum}getLinesTotalHeight(){this._checkPendingChanges();const e=this._lineHeight*this._lineCount,t=this.getWhitespacesTotalHeight();return e+t+this._paddingTop+this._paddingBottom}getWhitespaceAccumulatedHeightBeforeLineNumber(e){this._checkPendingChanges(),e=e|0;const t=this._findLastWhitespaceBeforeLineNumber(e);return t===-1?0:this.getWhitespacesAccumulatedHeight(t)}_findLastWhitespaceBeforeLineNumber(e){e=e|0;const t=this._arr;let i=0,n=t.length-1;for(;i<=n;){const r=(n-i|0)/2|0,a=i+r|0;if(t[a].afterLineNumber<e){if(a+1>=t.length||t[a+1].afterLineNumber>=e)return a;i=a+1|0}else n=a-1|0}return-1}_findFirstWhitespaceAfterLineNumber(e){e=e|0;const i=this._findLastWhitespaceBeforeLineNumber(e)+1;return i<this._arr.length?i:-1}getFirstWhitespaceIndexAfterLineNumber(e){return this._checkPendingChanges(),e=e|0,this._findFirstWhitespaceAfterLineNumber(e)}getVerticalOffsetForLineNumber(e,t=!1){this._checkPendingChanges(),e=e|0;let i;e>1?i=this._lineHeight*(e-1):i=0;const n=this.getWhitespaceAccumulatedHeightBeforeLineNumber(e-(t?1:0));return i+n+this._paddingTop}getVerticalOffsetAfterLineNumber(e,t=!1){this._checkPendingChanges(),e=e|0;const i=this._lineHeight*e,n=this.getWhitespaceAccumulatedHeightBeforeLineNumber(e+(t?1:0));return i+n+this._paddingTop}getWhitespaceMinWidth(){if(this._checkPendingChanges(),this._minWidth===-1){let e=0;for(let t=0,i=this._arr.length;t<i;t++)e=Math.max(e,this._arr[t].minWidth);this._minWidth=e}return this._minWidth}isAfterLines(e){this._checkPendingChanges();const t=this.getLinesTotalHeight();return e>t}isInTopPadding(e){return this._paddingTop===0?!1:(this._checkPendingChanges(),e<this._paddingTop)}isInBottomPadding(e){if(this._paddingBottom===0)return!1;this._checkPendingChanges();const t=this.getLinesTotalHeight();return e>=t-this._paddingBottom}getLineNumberAtOrAfterVerticalOffset(e){if(this._checkPendingChanges(),e=e|0,e<0)return 1;const t=this._lineCount|0,i=this._lineHeight;let n=1,s=t;for(;n<s;){const r=(n+s)/2|0,a=this.getVerticalOffsetForLineNumber(r)|0;if(e>=a+i)n=r+1;else{if(e>=a)return r;s=r}}return n>t?t:n}getLinesViewportData(e,t){this._checkPendingChanges(),e=e|0,t=t|0;const i=this._lineHeight,n=this.getLineNumberAtOrAfterVerticalOffset(e)|0,s=this.getVerticalOffsetForLineNumber(n)|0;let r=this._lineCount|0,a=this.getFirstWhitespaceIndexAfterLineNumber(n)|0;const l=this.getWhitespacesCount()|0;let c,u;a===-1?(a=l,u=r+1,c=0):(u=this.getAfterLineNumberForWhitespaceIndex(a)|0,c=this.getHeightForWhitespaceIndex(a)|0);let f=s,g=f;const p=5e5;let _=0;s>=p&&(_=Math.floor(s/p)*p,_=Math.floor(_/i)*i,g-=_);const b=[],y=e+(t-e)/2;let S=-1;for(let E=n;E<=r;E++){if(S===-1){const N=f,M=f+i;(N<=y&&y<M||N>y)&&(S=E)}for(f+=i,b[E-n]=g,g+=i;u===E;)g+=c,f+=c,a++,a>=l?u=r+1:(u=this.getAfterLineNumberForWhitespaceIndex(a)|0,c=this.getHeightForWhitespaceIndex(a)|0);if(f>=t){r=E;break}}S===-1&&(S=r);const L=this.getVerticalOffsetForLineNumber(r)|0;let x=n,D=r;return x<D&&s<e&&x++,x<D&&L+i>t&&D--,{bigNumbersDelta:_,startLineNumber:n,endLineNumber:r,relativeVerticalOffset:b,centeredLineNumber:S,completelyVisibleStartLineNumber:x,completelyVisibleEndLineNumber:D,lineHeight:this._lineHeight}}getVerticalOffsetForWhitespaceIndex(e){this._checkPendingChanges(),e=e|0;const t=this.getAfterLineNumberForWhitespaceIndex(e);let i;t>=1?i=this._lineHeight*t:i=0;let n;return e>0?n=this.getWhitespacesAccumulatedHeight(e-1):n=0,i+n+this._paddingTop}getWhitespaceIndexAtOrAfterVerticallOffset(e){this._checkPendingChanges(),e=e|0;let t=0,i=this.getWhitespacesCount()-1;if(i<0)return-1;const n=this.getVerticalOffsetForWhitespaceIndex(i),s=this.getHeightForWhitespaceIndex(i);if(e>=n+s)return-1;for(;t<i;){const r=Math.floor((t+i)/2),a=this.getVerticalOffsetForWhitespaceIndex(r),l=this.getHeightForWhitespaceIndex(r);if(e>=a+l)t=r+1;else{if(e>=a)return r;i=r}}return t}getWhitespaceAtVerticalOffset(e){this._checkPendingChanges(),e=e|0;const t=this.getWhitespaceIndexAtOrAfterVerticallOffset(e);if(t<0||t>=this.getWhitespacesCount())return null;const i=this.getVerticalOffsetForWhitespaceIndex(t);if(i>e)return null;const n=this.getHeightForWhitespaceIndex(t),s=this.getIdForWhitespaceIndex(t),r=this.getAfterLineNumberForWhitespaceIndex(t);return{id:s,afterLineNumber:r,verticalOffset:i,height:n}}getWhitespaceViewportData(e,t){this._checkPendingChanges(),e=e|0,t=t|0;const i=this.getWhitespaceIndexAtOrAfterVerticallOffset(e),n=this.getWhitespacesCount()-1;if(i<0)return[];const s=[];for(let r=i;r<=n;r++){const a=this.getVerticalOffsetForWhitespaceIndex(r),l=this.getHeightForWhitespaceIndex(r);if(a>=t)break;s.push({id:this.getIdForWhitespaceIndex(r),afterLineNumber:this.getAfterLineNumberForWhitespaceIndex(r),verticalOffset:a,height:l})}return s}getWhitespaces(){return this._checkPendingChanges(),this._arr.slice(0)}getWhitespacesCount(){return this._checkPendingChanges(),this._arr.length}getIdForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].id}getAfterLineNumberForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].afterLineNumber}getHeightForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].height}};Hse.INSTANCE_COUNT=0;const qTe=125;class XS{constructor(e,t,i,n){e=e|0,t=t|0,i=i|0,n=n|0,e<0&&(e=0),t<0&&(t=0),i<0&&(i=0),n<0&&(n=0),this.width=e,this.contentWidth=t,this.scrollWidth=Math.max(e,t),this.height=i,this.contentHeight=n,this.scrollHeight=Math.max(i,n)}equals(e){return this.width===e.width&&this.contentWidth===e.contentWidth&&this.height===e.height&&this.contentHeight===e.contentHeight}}class GTe extends J{constructor(e,t){super(),this._onDidContentSizeChange=this._register(new Y),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._dimensions=new XS(0,0,0,0),this._scrollable=this._register(new X1({forceIntegerValues:!0,smoothScrollDuration:e,scheduleAtNextAnimationFrame:t})),this.onDidScroll=this._scrollable.onScroll}getScrollable(){return this._scrollable}setSmoothScrollDuration(e){this._scrollable.setSmoothScrollDuration(e)}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}getScrollDimensions(){return this._dimensions}setScrollDimensions(e){if(this._dimensions.equals(e))return;const t=this._dimensions;this._dimensions=e,this._scrollable.setScrollDimensions({width:e.width,scrollWidth:e.scrollWidth,height:e.height,scrollHeight:e.scrollHeight},!0);const i=t.contentWidth!==e.contentWidth,n=t.contentHeight!==e.contentHeight;(i||n)&&this._onDidContentSizeChange.fire(new HH(t.contentWidth,t.contentHeight,e.contentWidth,e.contentHeight))}getFutureScrollPosition(){return this._scrollable.getFutureScrollPosition()}getCurrentScrollPosition(){return this._scrollable.getCurrentScrollPosition()}setScrollPositionNow(e){this._scrollable.setScrollPositionNow(e)}setScrollPositionSmooth(e){this._scrollable.setScrollPositionSmooth(e)}hasPendingScrollAnimation(){return this._scrollable.hasPendingScrollAnimation()}}class YTe extends J{constructor(e,t,i){super(),this._configuration=e;const n=this._configuration.options,s=n.get(145),r=n.get(84);this._linesLayout=new Hse(t,n.get(67),r.top,r.bottom),this._maxLineWidth=0,this._overlayWidgetsMinWidth=0,this._scrollable=this._register(new GTe(0,i)),this._configureSmoothScrollDuration(),this._scrollable.setScrollDimensions(new XS(s.contentWidth,0,s.height,0)),this.onDidScroll=this._scrollable.onDidScroll,this.onDidContentSizeChange=this._scrollable.onDidContentSizeChange,this._updateHeight()}dispose(){super.dispose()}getScrollable(){return this._scrollable.getScrollable()}onHeightMaybeChanged(){this._updateHeight()}_configureSmoothScrollDuration(){this._scrollable.setSmoothScrollDuration(this._configuration.options.get(114)?qTe:0)}onConfigurationChanged(e){const t=this._configuration.options;if(e.hasChanged(67)&&this._linesLayout.setLineHeight(t.get(67)),e.hasChanged(84)){const i=t.get(84);this._linesLayout.setPadding(i.top,i.bottom)}if(e.hasChanged(145)){const i=t.get(145),n=i.contentWidth,s=i.height,r=this._scrollable.getScrollDimensions(),a=r.contentWidth;this._scrollable.setScrollDimensions(new XS(n,r.contentWidth,s,this._getContentHeight(n,s,a)))}else this._updateHeight();e.hasChanged(114)&&this._configureSmoothScrollDuration()}onFlushed(e){this._linesLayout.onFlushed(e)}onLinesDeleted(e,t){this._linesLayout.onLinesDeleted(e,t)}onLinesInserted(e,t){this._linesLayout.onLinesInserted(e,t)}_getHorizontalScrollbarHeight(e,t){const n=this._configuration.options.get(103);return n.horizontal===2||e>=t?0:n.horizontalScrollbarSize}_getContentHeight(e,t,i){const n=this._configuration.options;let s=this._linesLayout.getLinesTotalHeight();return n.get(105)?s+=Math.max(0,t-n.get(67)-n.get(84).bottom):n.get(103).ignoreHorizontalScrollbarInContentHeight||(s+=this._getHorizontalScrollbarHeight(e,i)),s}_updateHeight(){const e=this._scrollable.getScrollDimensions(),t=e.width,i=e.height,n=e.contentWidth;this._scrollable.setScrollDimensions(new XS(t,e.contentWidth,i,this._getContentHeight(t,i,n)))}getCurrentViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getCurrentScrollPosition();return new EZ(t.scrollTop,t.scrollLeft,e.width,e.height)}getFutureViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getFutureScrollPosition();return new EZ(t.scrollTop,t.scrollLeft,e.width,e.height)}_computeContentWidth(){const e=this._configuration.options,t=this._maxLineWidth,i=e.get(146),n=e.get(50),s=e.get(145);if(i.isViewportWrapping){const r=e.get(73);return t>s.contentWidth+n.typicalHalfwidthCharacterWidth&&r.enabled&&r.side==="right"?t+s.verticalScrollbarWidth:t}else{const r=e.get(104)*n.typicalHalfwidthCharacterWidth,a=this._linesLayout.getWhitespaceMinWidth();return Math.max(t+r+s.verticalScrollbarWidth,a,this._overlayWidgetsMinWidth)}}setMaxLineWidth(e){this._maxLineWidth=e,this._updateContentWidth()}setOverlayWidgetsMinWidth(e){this._overlayWidgetsMinWidth=e,this._updateContentWidth()}_updateContentWidth(){const e=this._scrollable.getScrollDimensions();this._scrollable.setScrollDimensions(new XS(e.width,this._computeContentWidth(),e.height,e.contentHeight)),this._updateHeight()}saveState(){const e=this._scrollable.getFutureScrollPosition(),t=e.scrollTop,i=this._linesLayout.getLineNumberAtOrAfterVerticalOffset(t),n=this._linesLayout.getWhitespaceAccumulatedHeightBeforeLineNumber(i);return{scrollTop:t,scrollTopWithoutViewZones:t-n,scrollLeft:e.scrollLeft}}changeWhitespace(e){const t=this._linesLayout.changeWhitespace(e);return t&&this.onHeightMaybeChanged(),t}getVerticalOffsetForLineNumber(e,t=!1){return this._linesLayout.getVerticalOffsetForLineNumber(e,t)}getVerticalOffsetAfterLineNumber(e,t=!1){return this._linesLayout.getVerticalOffsetAfterLineNumber(e,t)}isAfterLines(e){return this._linesLayout.isAfterLines(e)}isInTopPadding(e){return this._linesLayout.isInTopPadding(e)}isInBottomPadding(e){return this._linesLayout.isInBottomPadding(e)}getLineNumberAtVerticalOffset(e){return this._linesLayout.getLineNumberAtOrAfterVerticalOffset(e)}getWhitespaceAtVerticalOffset(e){return this._linesLayout.getWhitespaceAtVerticalOffset(e)}getLinesViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getLinesViewportData(e.top,e.top+e.height)}getLinesViewportDataAtScrollTop(e){const t=this._scrollable.getScrollDimensions();return e+t.height>t.scrollHeight&&(e=t.scrollHeight-t.height),e<0&&(e=0),this._linesLayout.getLinesViewportData(e,e+t.height)}getWhitespaceViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getWhitespaceViewportData(e.top,e.top+e.height)}getWhitespaces(){return this._linesLayout.getWhitespaces()}getContentWidth(){return this._scrollable.getScrollDimensions().contentWidth}getScrollWidth(){return this._scrollable.getScrollDimensions().scrollWidth}getContentHeight(){return this._scrollable.getScrollDimensions().contentHeight}getScrollHeight(){return this._scrollable.getScrollDimensions().scrollHeight}getCurrentScrollLeft(){return this._scrollable.getCurrentScrollPosition().scrollLeft}getCurrentScrollTop(){return this._scrollable.getCurrentScrollPosition().scrollTop}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}setScrollPosition(e,t){t===1?this._scrollable.setScrollPositionNow(e):this._scrollable.setScrollPositionSmooth(e)}hasPendingScrollAnimation(){return this._scrollable.hasPendingScrollAnimation()}deltaScrollNow(e,t){const i=this._scrollable.getCurrentScrollPosition();this._scrollable.setScrollPositionNow({scrollLeft:i.scrollLeft+e,scrollTop:i.scrollTop+t})}}class ZTe{constructor(e,t,i,n,s){this.editorId=e,this.model=t,this.configuration=i,this._linesCollection=n,this._coordinatesConverter=s,this._decorationsCache=Object.create(null),this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}_clearCachedModelDecorationsResolver(){this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}dispose(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}reset(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onModelDecorationsChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onLineMappingChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}_getOrCreateViewModelDecoration(e){const t=e.id;let i=this._decorationsCache[t];if(!i){const n=e.range,s=e.options;let r;if(s.isWholeLine){const a=this._coordinatesConverter.convertModelPositionToViewPosition(new Z(n.startLineNumber,1),0,!1,!0),l=this._coordinatesConverter.convertModelPositionToViewPosition(new Z(n.endLineNumber,this.model.getLineMaxColumn(n.endLineNumber)),1);r=new A(a.lineNumber,a.column,l.lineNumber,l.column)}else r=this._coordinatesConverter.convertModelRangeToViewRange(n,1);i=new xne(r,s),this._decorationsCache[t]=i}return i}getMinimapDecorationsInRange(e){return this._getDecorationsInRange(e,!0,!1).decorations}getDecorationsViewportData(e){let t=this._cachedModelDecorationsResolver!==null;return t=t&&e.equalsRange(this._cachedModelDecorationsResolverViewRange),t||(this._cachedModelDecorationsResolver=this._getDecorationsInRange(e,!1,!1),this._cachedModelDecorationsResolverViewRange=e),this._cachedModelDecorationsResolver}getInlineDecorationsOnLine(e,t=!1,i=!1){const n=new A(e,this._linesCollection.getViewLineMinColumn(e),e,this._linesCollection.getViewLineMaxColumn(e));return this._getDecorationsInRange(n,t,i).inlineDecorations[0]}_getDecorationsInRange(e,t,i){const n=this._linesCollection.getDecorationsInRange(e,this.editorId,sR(this.configuration.options),t,i),s=e.startLineNumber,r=e.endLineNumber,a=[];let l=0;const c=[];for(let u=s;u<=r;u++)c[u-s]=[];for(let u=0,f=n.length;u<f;u++){const g=n[u],p=g.options;if(!$H(this.model,g))continue;const _=this._getOrCreateViewModelDecoration(g),b=_.range;if(a[l++]=_,p.inlineClassName){const y=new pL(b,p.inlineClassName,p.inlineClassNameAffectsLetterSpacing?3:0),S=Math.max(s,b.startLineNumber),L=Math.min(r,b.endLineNumber);for(let x=S;x<=L;x++)c[x-s].push(y)}if(p.beforeContentClassName&&s<=b.startLineNumber&&b.startLineNumber<=r){const y=new pL(new A(b.startLineNumber,b.startColumn,b.startLineNumber,b.startColumn),p.beforeContentClassName,1);c[b.startLineNumber-s].push(y)}if(p.afterContentClassName&&s<=b.endLineNumber&&b.endLineNumber<=r){const y=new pL(new A(b.endLineNumber,b.endColumn,b.endLineNumber,b.endColumn),p.afterContentClassName,2);c[b.endLineNumber-s].push(y)}}return{decorations:a,inlineDecorations:c}}}function $H(o,e){return!(e.options.hideInCommentTokens&&jH(o,e)||e.options.hideInStringTokens&&KH(o,e))}function jH(o,e){return zse(o,e.range,t=>t===1)}function KH(o,e){return zse(o,e.range,t=>t===2)}function zse(o,e,t){for(let i=e.startLineNumber;i<=e.endLineNumber;i++){const n=o.tokenization.getLineTokens(i),s=i===e.startLineNumber,r=i===e.endLineNumber;let a=s?n.findTokenIndexAtOffset(e.startColumn-1):0;for(;a<n.getCount()&&!(r&&n.getStartOffset(a)>e.endColumn-1);){if(!t(n.getStandardTokenType(a)))return!1;a++}}return!0}function M3(o,e){return o===null?e?UR.INSTANCE:$R.INSTANCE:new QTe(o,e)}class QTe{constructor(e,t){this._projectionData=e,this._isVisible=t}isVisible(){return this._isVisible}setVisible(e){return this._isVisible=e,this}getProjectionData(){return this._projectionData}getViewLineCount(){return this._isVisible?this._projectionData.getOutputLineCount():0}getViewLineContent(e,t,i){this._assertVisible();const n=i>0?this._projectionData.breakOffsets[i-1]:0,s=this._projectionData.breakOffsets[i];let r;if(this._projectionData.injectionOffsets!==null){const a=this._projectionData.injectionOffsets.map((c,u)=>new Gd(0,0,c+1,this._projectionData.injectionOptions[u],0));r=Gd.applyInjectedText(e.getLineContent(t),a).substring(n,s)}else r=e.getValueInRange({startLineNumber:t,startColumn:n+1,endLineNumber:t,endColumn:s+1});return i>0&&(r=zQ(this._projectionData.wrappedTextIndentLength)+r),r}getViewLineLength(e,t,i){return this._assertVisible(),this._projectionData.getLineLength(i)}getViewLineMinColumn(e,t,i){return this._assertVisible(),this._projectionData.getMinOutputOffset(i)+1}getViewLineMaxColumn(e,t,i){return this._assertVisible(),this._projectionData.getMaxOutputOffset(i)+1}getViewLineData(e,t,i){const n=new Array;return this.getViewLinesData(e,t,i,1,0,[!0],n),n[0]}getViewLinesData(e,t,i,n,s,r,a){this._assertVisible();const l=this._projectionData,c=l.injectionOffsets,u=l.injectionOptions;let f=null;if(c){f=[];let p=0,_=0;for(let b=0;b<l.getOutputLineCount();b++){const y=new Array;f[b]=y;const S=b>0?l.breakOffsets[b-1]:0,L=l.breakOffsets[b];for(;_<c.length;){const x=u[_].content.length,D=c[_]+p,E=D+x;if(D>L)break;if(S<E){const N=u[_];if(N.inlineClassName){const M=b>0?l.wrappedTextIndentLength:0,F=M+Math.max(D-S,0),H=M+Math.min(E-S,L-S);F!==H&&y.push(new tLe(F,H,N.inlineClassName,N.inlineClassNameAffectsLetterSpacing))}}if(E<=L)p+=x,_++;else break}}}let g;c?g=e.tokenization.getLineTokens(t).withInserted(c.map((p,_)=>({offset:p,text:u[_].content,tokenMetadata:Gs.defaultTokenMetadata}))):g=e.tokenization.getLineTokens(t);for(let p=i;p<i+n;p++){const _=s+p-i;if(!r[_]){a[_]=null;continue}a[_]=this._getViewLineData(g,f?f[p]:null,p)}}_getViewLineData(e,t,i){this._assertVisible();const n=this._projectionData,s=i>0?n.wrappedTextIndentLength:0,r=i>0?n.breakOffsets[i-1]:0,a=n.breakOffsets[i],l=e.sliceAndInflate(r,a,s);let c=l.getLineContent();i>0&&(c=zQ(n.wrappedTextIndentLength)+c);const u=this._projectionData.getMinOutputOffset(i)+1,f=c.length+1,g=i+1<this.getViewLineCount(),p=i===0?0:n.breakOffsetsVisibleColumn[i-1];return new fH(c,g,u,f,p,l,t)}getModelColumnOfViewPosition(e,t){return this._assertVisible(),this._projectionData.translateToInputOffset(e,t-1)+1}getViewPositionOfModelPosition(e,t,i=2){return this._assertVisible(),this._projectionData.translateToOutputPosition(t-1,i).toPosition(e)}getViewLineNumberOfModelPosition(e,t){this._assertVisible();const i=this._projectionData.translateToOutputPosition(t-1);return e+i.outputLineIndex}normalizePosition(e,t,i){const n=t.lineNumber-e;return this._projectionData.normalizeOutputPosition(e,t.column-1,i).toPosition(n)}getInjectedTextAt(e,t){return this._projectionData.getInjectedText(e,t-1)}_assertVisible(){if(!this._isVisible)throw new Error("Not supported")}}class UR{constructor(){}isVisible(){return!0}setVisible(e){return e?this:$R.INSTANCE}getProjectionData(){return null}getViewLineCount(){return 1}getViewLineContent(e,t,i){return e.getLineContent(t)}getViewLineLength(e,t,i){return e.getLineLength(t)}getViewLineMinColumn(e,t,i){return e.getLineMinColumn(t)}getViewLineMaxColumn(e,t,i){return e.getLineMaxColumn(t)}getViewLineData(e,t,i){const n=e.tokenization.getLineTokens(t),s=n.getLineContent();return new fH(s,!1,1,s.length+1,0,n.inflate(),null)}getViewLinesData(e,t,i,n,s,r,a){if(!r[s]){a[s]=null;return}a[s]=this.getViewLineData(e,t,0)}getModelColumnOfViewPosition(e,t){return t}getViewPositionOfModelPosition(e,t){return new Z(e,t)}getViewLineNumberOfModelPosition(e,t){return e}normalizePosition(e,t,i){return t}getInjectedTextAt(e,t){return null}}UR.INSTANCE=new UR;class $R{constructor(){}isVisible(){return!1}setVisible(e){return e?UR.INSTANCE:this}getProjectionData(){return null}getViewLineCount(){return 0}getViewLineContent(e,t,i){throw new Error("Not supported")}getViewLineLength(e,t,i){throw new Error("Not supported")}getViewLineMinColumn(e,t,i){throw new Error("Not supported")}getViewLineMaxColumn(e,t,i){throw new Error("Not supported")}getViewLineData(e,t,i){throw new Error("Not supported")}getViewLinesData(e,t,i,n,s,r,a){throw new Error("Not supported")}getModelColumnOfViewPosition(e,t){throw new Error("Not supported")}getViewPositionOfModelPosition(e,t){throw new Error("Not supported")}getViewLineNumberOfModelPosition(e,t){throw new Error("Not supported")}normalizePosition(e,t,i){throw new Error("Not supported")}getInjectedTextAt(e,t){throw new Error("Not supported")}}$R.INSTANCE=new $R;const A3=[""];function zQ(o){if(o>=A3.length)for(let e=1;e<=o;e++)A3[e]=XTe(e);return A3[o]}function XTe(o){return new Array(o+1).join(" ")}class JTe{constructor(e,t,i,n,s,r,a,l,c,u){this._editorId=e,this.model=t,this._validModelVersionId=-1,this._domLineBreaksComputerFactory=i,this._monospaceLineBreaksComputerFactory=n,this.fontInfo=s,this.tabSize=r,this.wrappingStrategy=a,this.wrappingColumn=l,this.wrappingIndent=c,this.wordBreak=u,this._constructLines(!0,null)}dispose(){this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[])}createCoordinatesConverter(){return new tNe(this)}_constructLines(e,t){this.modelLineProjections=[],e&&(this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[]));const i=this.model.getLinesContent(),n=this.model.getInjectedTextDecorations(this._editorId),s=i.length,r=this.createLineBreaksComputer(),a=new tg(Gd.fromDecorations(n));for(let b=0;b<s;b++){const y=a.takeWhile(S=>S.lineNumber===b+1);r.addRequest(i[b],y,t?t[b]:null)}const l=r.finalize(),c=[],u=this.hiddenAreasDecorationIds.map(b=>this.model.getDecorationRange(b)).sort(A.compareRangesUsingStarts);let f=1,g=0,p=-1,_=p+1<u.length?g+1:s+2;for(let b=0;b<s;b++){const y=b+1;y===_&&(p++,f=u[p].startLineNumber,g=u[p].endLineNumber,_=p+1<u.length?g+1:s+2);const S=y>=f&&y<=g,L=M3(l[b],!S);c[b]=L.getViewLineCount(),this.modelLineProjections[b]=L}this._validModelVersionId=this.model.getVersionId(),this.projectedModelLineLineCounts=new Rye(c)}getHiddenAreas(){return this.hiddenAreasDecorationIds.map(e=>this.model.getDecorationRange(e))}setHiddenAreas(e){const t=e.map(g=>this.model.validateRange(g)),i=eNe(t),n=this.hiddenAreasDecorationIds.map(g=>this.model.getDecorationRange(g)).sort(A.compareRangesUsingStarts);if(i.length===n.length){let g=!1;for(let p=0;p<i.length;p++)if(!i[p].equalsRange(n[p])){g=!0;break}if(!g)return!1}const s=i.map(g=>({range:g,options:Rt.EMPTY}));this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,s);const r=i;let a=1,l=0,c=-1,u=c+1<r.length?l+1:this.modelLineProjections.length+2,f=!1;for(let g=0;g<this.modelLineProjections.length;g++){const p=g+1;p===u&&(c++,a=r[c].startLineNumber,l=r[c].endLineNumber,u=c+1<r.length?l+1:this.modelLineProjections.length+2);let _=!1;if(p>=a&&p<=l?this.modelLineProjections[g].isVisible()&&(this.modelLineProjections[g]=this.modelLineProjections[g].setVisible(!1),_=!0):(f=!0,this.modelLineProjections[g].isVisible()||(this.modelLineProjections[g]=this.modelLineProjections[g].setVisible(!0),_=!0)),_){const b=this.modelLineProjections[g].getViewLineCount();this.projectedModelLineLineCounts.setValue(g,b)}}return f||this.setHiddenAreas([]),!0}modelPositionIsVisible(e,t){return e<1||e>this.modelLineProjections.length?!1:this.modelLineProjections[e-1].isVisible()}getModelLineViewLineCount(e){return e<1||e>this.modelLineProjections.length?1:this.modelLineProjections[e-1].getViewLineCount()}setTabSize(e){return this.tabSize===e?!1:(this.tabSize=e,this._constructLines(!1,null),!0)}setWrappingSettings(e,t,i,n,s){const r=this.fontInfo.equals(e),a=this.wrappingStrategy===t,l=this.wrappingColumn===i,c=this.wrappingIndent===n,u=this.wordBreak===s;if(r&&a&&l&&c&&u)return!1;const f=r&&a&&!l&&c&&u;this.fontInfo=e,this.wrappingStrategy=t,this.wrappingColumn=i,this.wrappingIndent=n,this.wordBreak=s;let g=null;if(f){g=[];for(let p=0,_=this.modelLineProjections.length;p<_;p++)g[p]=this.modelLineProjections[p].getProjectionData()}return this._constructLines(!1,g),!0}createLineBreaksComputer(){return(this.wrappingStrategy==="advanced"?this._domLineBreaksComputerFactory:this._monospaceLineBreaksComputerFactory).createLineBreaksComputer(this.fontInfo,this.tabSize,this.wrappingColumn,this.wrappingIndent,this.wordBreak)}onModelFlushed(){this._constructLines(!0,null)}onModelLinesDeleted(e,t,i){if(!e||e<=this._validModelVersionId)return null;const n=t===1?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,s=this.projectedModelLineLineCounts.getPrefixSum(i);return this.modelLineProjections.splice(t-1,i-t+1),this.projectedModelLineLineCounts.removeValues(t-1,i-t+1),new q9(n,s)}onModelLinesInserted(e,t,i,n){if(!e||e<=this._validModelVersionId)return null;const s=t>2&&!this.modelLineProjections[t-2].isVisible(),r=t===1?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1;let a=0;const l=[],c=[];for(let u=0,f=n.length;u<f;u++){const g=M3(n[u],!s);l.push(g);const p=g.getViewLineCount();a+=p,c[u]=p}return this.modelLineProjections=this.modelLineProjections.slice(0,t-1).concat(l).concat(this.modelLineProjections.slice(t-1)),this.projectedModelLineLineCounts.insertValues(t-1,c),new G9(r,r+a-1)}onModelLineChanged(e,t,i){if(e!==null&&e<=this._validModelVersionId)return[!1,null,null,null];const n=t-1,s=this.modelLineProjections[n].getViewLineCount(),r=this.modelLineProjections[n].isVisible(),a=M3(i,r);this.modelLineProjections[n]=a;const l=this.modelLineProjections[n].getViewLineCount();let c=!1,u=0,f=-1,g=0,p=-1,_=0,b=-1;s>l?(u=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,f=u+l-1,_=f+1,b=_+(s-l)-1,c=!0):s<l?(u=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,f=u+s-1,g=f+1,p=g+(l-s)-1,c=!0):(u=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,f=u+l-1),this.projectedModelLineLineCounts.setValue(n,l);const y=u<=f?new Vse(u,f-u+1):null,S=g<=p?new G9(g,p):null,L=_<=b?new q9(_,b):null;return[c,y,S,L]}acceptVersionId(e){this._validModelVersionId=e,this.modelLineProjections.length===1&&!this.modelLineProjections[0].isVisible()&&this.setHiddenAreas([])}getViewLineCount(){return this.projectedModelLineLineCounts.getTotalSum()}_toValidViewLineNumber(e){if(e<1)return 1;const t=this.getViewLineCount();return e>t?t:e|0}getActiveIndentGuide(e,t,i){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t),i=this._toValidViewLineNumber(i);const n=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),s=this.convertViewPositionToModelPosition(t,this.getViewLineMinColumn(t)),r=this.convertViewPositionToModelPosition(i,this.getViewLineMinColumn(i)),a=this.model.guides.getActiveIndentGuide(n.lineNumber,s.lineNumber,r.lineNumber),l=this.convertModelPositionToViewPosition(a.startLineNumber,1),c=this.convertModelPositionToViewPosition(a.endLineNumber,this.model.getLineMaxColumn(a.endLineNumber));return{startLineNumber:l.lineNumber,endLineNumber:c.lineNumber,indent:a.indent}}getViewLineInfo(e){e=this._toValidViewLineNumber(e);const t=this.projectedModelLineLineCounts.getIndexOf(e-1),i=t.index,n=t.remainder;return new UQ(i+1,n)}getMinColumnOfViewLine(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getMaxColumnOfViewLine(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getModelStartPositionOfViewLine(e){const t=this.modelLineProjections[e.modelLineNumber-1],i=t.getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),n=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,i);return new Z(e.modelLineNumber,n)}getModelEndPositionOfViewLine(e){const t=this.modelLineProjections[e.modelLineNumber-1],i=t.getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),n=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,i);return new Z(e.modelLineNumber,n)}getViewLineInfosGroupedByModelRanges(e,t){const i=this.getViewLineInfo(e),n=this.getViewLineInfo(t),s=new Array;let r=this.getModelStartPositionOfViewLine(i),a=new Array;for(let l=i.modelLineNumber;l<=n.modelLineNumber;l++){const c=this.modelLineProjections[l-1];if(c.isVisible()){const u=l===i.modelLineNumber?i.modelLineWrappedLineIdx:0,f=l===n.modelLineNumber?n.modelLineWrappedLineIdx+1:c.getViewLineCount();for(let g=u;g<f;g++)a.push(new UQ(l,g))}if(!c.isVisible()&&r){const u=new Z(l-1,this.model.getLineMaxColumn(l-1)+1),f=A.fromPositions(r,u);s.push(new $Q(f,a)),a=[],r=null}else c.isVisible()&&!r&&(r=new Z(l,1))}if(r){const l=A.fromPositions(r,this.getModelEndPositionOfViewLine(n));s.push(new $Q(l,a))}return s}getViewLinesBracketGuides(e,t,i,n){const s=i?this.convertViewPositionToModelPosition(i.lineNumber,i.column):null,r=[];for(const a of this.getViewLineInfosGroupedByModelRanges(e,t)){const l=a.modelRange.startLineNumber,c=this.model.guides.getLinesBracketGuides(l,a.modelRange.endLineNumber,s,n);for(const u of a.viewLines){const g=c[u.modelLineNumber-l].map(p=>{if(p.forWrappedLinesAfterColumn!==-1&&this.modelLineProjections[u.modelLineNumber-1].getViewPositionOfModelPosition(0,p.forWrappedLinesAfterColumn).lineNumber>=u.modelLineWrappedLineIdx||p.forWrappedLinesBeforeOrAtColumn!==-1&&this.modelLineProjections[u.modelLineNumber-1].getViewPositionOfModelPosition(0,p.forWrappedLinesBeforeOrAtColumn).lineNumber<u.modelLineWrappedLineIdx)return;if(!p.horizontalLine)return p;let _=-1;if(p.column!==-1){const S=this.modelLineProjections[u.modelLineNumber-1].getViewPositionOfModelPosition(0,p.column);if(S.lineNumber===u.modelLineWrappedLineIdx)_=S.column;else if(S.lineNumber<u.modelLineWrappedLineIdx)_=this.getMinColumnOfViewLine(u);else if(S.lineNumber>u.modelLineWrappedLineIdx)return}const b=this.convertModelPositionToViewPosition(u.modelLineNumber,p.horizontalLine.endColumn),y=this.modelLineProjections[u.modelLineNumber-1].getViewPositionOfModelPosition(0,p.horizontalLine.endColumn);return y.lineNumber===u.modelLineWrappedLineIdx?new ov(p.visibleColumn,_,p.className,new bL(p.horizontalLine.top,b.column),-1,-1):y.lineNumber<u.modelLineWrappedLineIdx||p.visibleColumn!==-1?void 0:new ov(p.visibleColumn,_,p.className,new bL(p.horizontalLine.top,this.getMaxColumnOfViewLine(u)),-1,-1)});r.push(g.filter(p=>!!p))}}return r}getViewLinesIndentGuides(e,t){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);const i=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),n=this.convertViewPositionToModelPosition(t,this.getViewLineMaxColumn(t));let s=[];const r=[],a=[],l=i.lineNumber-1,c=n.lineNumber-1;let u=null;for(let _=l;_<=c;_++){const b=this.modelLineProjections[_];if(b.isVisible()){const y=b.getViewLineNumberOfModelPosition(0,_===l?i.column:1),S=b.getViewLineNumberOfModelPosition(0,this.model.getLineMaxColumn(_+1)),L=S-y+1;let x=0;L>1&&b.getViewLineMinColumn(this.model,_+1,S)===1&&(x=y===0?1:2),r.push(L),a.push(x),u===null&&(u=new Z(_+1,0))}else u!==null&&(s=s.concat(this.model.guides.getLinesIndentGuides(u.lineNumber,_)),u=null)}u!==null&&(s=s.concat(this.model.guides.getLinesIndentGuides(u.lineNumber,n.lineNumber)),u=null);const f=t-e+1,g=new Array(f);let p=0;for(let _=0,b=s.length;_<b;_++){let y=s[_];const S=Math.min(f-p,r[_]),L=a[_];let x;L===2?x=0:L===1?x=1:x=S;for(let D=0;D<S;D++)D===x&&(y=0),g[p++]=y}return g}getViewLineContent(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineContent(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineLength(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineLength(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineMinColumn(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMinColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineMaxColumn(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMaxColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineData(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineData(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLinesData(e,t,i){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);const n=this.projectedModelLineLineCounts.getIndexOf(e-1);let s=e;const r=n.index,a=n.remainder,l=[];for(let c=r,u=this.model.getLineCount();c<u;c++){const f=this.modelLineProjections[c];if(!f.isVisible())continue;const g=c===r?a:0;let p=f.getViewLineCount()-g,_=!1;if(s+p>t&&(_=!0,p=t-s+1),f.getViewLinesData(this.model,c+1,g,p,s-e,i,l),s+=p,_)break}return l}validateViewPosition(e,t,i){e=this._toValidViewLineNumber(e);const n=this.projectedModelLineLineCounts.getIndexOf(e-1),s=n.index,r=n.remainder,a=this.modelLineProjections[s],l=a.getViewLineMinColumn(this.model,s+1,r),c=a.getViewLineMaxColumn(this.model,s+1,r);t<l&&(t=l),t>c&&(t=c);const u=a.getModelColumnOfViewPosition(r,t);return this.model.validatePosition(new Z(s+1,u)).equals(i)?new Z(e,t):this.convertModelPositionToViewPosition(i.lineNumber,i.column)}validateViewRange(e,t){const i=this.validateViewPosition(e.startLineNumber,e.startColumn,t.getStartPosition()),n=this.validateViewPosition(e.endLineNumber,e.endColumn,t.getEndPosition());return new A(i.lineNumber,i.column,n.lineNumber,n.column)}convertViewPositionToModelPosition(e,t){const i=this.getViewLineInfo(e),n=this.modelLineProjections[i.modelLineNumber-1].getModelColumnOfViewPosition(i.modelLineWrappedLineIdx,t);return this.model.validatePosition(new Z(i.modelLineNumber,n))}convertViewRangeToModelRange(e){const t=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),i=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);return new A(t.lineNumber,t.column,i.lineNumber,i.column)}convertModelPositionToViewPosition(e,t,i=2,n=!1,s=!1){const r=this.model.validatePosition(new Z(e,t)),a=r.lineNumber,l=r.column;let c=a-1,u=!1;if(s)for(;c<this.modelLineProjections.length&&!this.modelLineProjections[c].isVisible();)c++,u=!0;else for(;c>0&&!this.modelLineProjections[c].isVisible();)c--,u=!0;if(c===0&&!this.modelLineProjections[c].isVisible())return new Z(n?0:1,1);const f=1+this.projectedModelLineLineCounts.getPrefixSum(c);let g;return u?s?g=this.modelLineProjections[c].getViewPositionOfModelPosition(f,1,i):g=this.modelLineProjections[c].getViewPositionOfModelPosition(f,this.model.getLineMaxColumn(c+1),i):g=this.modelLineProjections[a-1].getViewPositionOfModelPosition(f,l,i),g}convertModelRangeToViewRange(e,t=0){if(e.isEmpty()){const i=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,t);return A.fromPositions(i)}else{const i=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,1),n=this.convertModelPositionToViewPosition(e.endLineNumber,e.endColumn,0);return new A(i.lineNumber,i.column,n.lineNumber,n.column)}}getViewLineNumberOfModelPosition(e,t){let i=e-1;if(this.modelLineProjections[i].isVisible()){const s=1+this.projectedModelLineLineCounts.getPrefixSum(i);return this.modelLineProjections[i].getViewLineNumberOfModelPosition(s,t)}for(;i>0&&!this.modelLineProjections[i].isVisible();)i--;if(i===0&&!this.modelLineProjections[i].isVisible())return 1;const n=1+this.projectedModelLineLineCounts.getPrefixSum(i);return this.modelLineProjections[i].getViewLineNumberOfModelPosition(n,this.model.getLineMaxColumn(i+1))}getDecorationsInRange(e,t,i,n,s){const r=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),a=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);if(a.lineNumber-r.lineNumber<=e.endLineNumber-e.startLineNumber)return this.model.getDecorationsInRange(new A(r.lineNumber,1,a.lineNumber,a.column),t,i,n,s);let l=[];const c=r.lineNumber-1,u=a.lineNumber-1;let f=null;for(let b=c;b<=u;b++)if(this.modelLineProjections[b].isVisible())f===null&&(f=new Z(b+1,b===c?r.column:1));else if(f!==null){const S=this.model.getLineMaxColumn(b);l=l.concat(this.model.getDecorationsInRange(new A(f.lineNumber,f.column,b,S),t,i,n)),f=null}f!==null&&(l=l.concat(this.model.getDecorationsInRange(new A(f.lineNumber,f.column,a.lineNumber,a.column),t,i,n)),f=null),l.sort((b,y)=>{const S=A.compareRangesUsingStarts(b.range,y.range);return S===0?b.id<y.id?-1:b.id>y.id?1:0:S});const g=[];let p=0,_=null;for(const b of l){const y=b.id;_!==y&&(_=y,g[p++]=b)}return g}getInjectedTextAt(e){const t=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[t.modelLineNumber-1].getInjectedTextAt(t.modelLineWrappedLineIdx,e.column)}normalizePosition(e,t){const i=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[i.modelLineNumber-1].normalizePosition(i.modelLineWrappedLineIdx,e,t)}getLineIndentColumn(e){const t=this.getViewLineInfo(e);return t.modelLineWrappedLineIdx===0?this.model.getLineIndentColumn(t.modelLineNumber):0}}function eNe(o){if(o.length===0)return[];const e=o.slice();e.sort(A.compareRangesUsingStarts);const t=[];let i=e[0].startLineNumber,n=e[0].endLineNumber;for(let s=1,r=e.length;s<r;s++){const a=e[s];a.startLineNumber>n+1?(t.push(new A(i,1,n,1)),i=a.startLineNumber,n=a.endLineNumber):a.endLineNumber>n&&(n=a.endLineNumber)}return t.push(new A(i,1,n,1)),t}class UQ{constructor(e,t){this.modelLineNumber=e,this.modelLineWrappedLineIdx=t}}class $Q{constructor(e,t){this.modelRange=e,this.viewLines=t}}class tNe{constructor(e){this._lines=e}convertViewPositionToModelPosition(e){return this._lines.convertViewPositionToModelPosition(e.lineNumber,e.column)}convertViewRangeToModelRange(e){return this._lines.convertViewRangeToModelRange(e)}validateViewPosition(e,t){return this._lines.validateViewPosition(e.lineNumber,e.column,t)}validateViewRange(e,t){return this._lines.validateViewRange(e,t)}convertModelPositionToViewPosition(e,t,i,n){return this._lines.convertModelPositionToViewPosition(e.lineNumber,e.column,t,i,n)}convertModelRangeToViewRange(e,t){return this._lines.convertModelRangeToViewRange(e,t)}modelPositionIsVisible(e){return this._lines.modelPositionIsVisible(e.lineNumber,e.column)}getModelLineViewLineCount(e){return this._lines.getModelLineViewLineCount(e)}getViewLineNumberOfModelPosition(e,t){return this._lines.getViewLineNumberOfModelPosition(e,t)}}class iNe{constructor(e){this.model=e}dispose(){}createCoordinatesConverter(){return new nNe(this)}getHiddenAreas(){return[]}setHiddenAreas(e){return!1}setTabSize(e){return!1}setWrappingSettings(e,t,i,n){return!1}createLineBreaksComputer(){const e=[];return{addRequest:(t,i,n)=>{e.push(null)},finalize:()=>e}}onModelFlushed(){}onModelLinesDeleted(e,t,i){return new q9(t,i)}onModelLinesInserted(e,t,i,n){return new G9(t,i)}onModelLineChanged(e,t,i){return[!1,new Vse(t,1),null,null]}acceptVersionId(e){}getViewLineCount(){return this.model.getLineCount()}getActiveIndentGuide(e,t,i){return{startLineNumber:e,endLineNumber:e,indent:0}}getViewLinesBracketGuides(e,t,i){return new Array(t-e+1).fill([])}getViewLinesIndentGuides(e,t){const i=t-e+1,n=new Array(i);for(let s=0;s<i;s++)n[s]=0;return n}getViewLineContent(e){return this.model.getLineContent(e)}getViewLineLength(e){return this.model.getLineLength(e)}getViewLineMinColumn(e){return this.model.getLineMinColumn(e)}getViewLineMaxColumn(e){return this.model.getLineMaxColumn(e)}getViewLineData(e){const t=this.model.tokenization.getLineTokens(e),i=t.getLineContent();return new fH(i,!1,1,i.length+1,0,t.inflate(),null)}getViewLinesData(e,t,i){const n=this.model.getLineCount();e=Math.min(Math.max(1,e),n),t=Math.min(Math.max(1,t),n);const s=[];for(let r=e;r<=t;r++){const a=r-e;s[a]=i[a]?this.getViewLineData(r):null}return s}getDecorationsInRange(e,t,i,n,s){return this.model.getDecorationsInRange(e,t,i,n,s)}normalizePosition(e,t){return this.model.normalizePosition(e,t)}getLineIndentColumn(e){return this.model.getLineIndentColumn(e)}getInjectedTextAt(e){return null}}class nNe{constructor(e){this._lines=e}_validPosition(e){return this._lines.model.validatePosition(e)}_validRange(e){return this._lines.model.validateRange(e)}convertViewPositionToModelPosition(e){return this._validPosition(e)}convertViewRangeToModelRange(e){return this._validRange(e)}validateViewPosition(e,t){return this._validPosition(t)}validateViewRange(e,t){return this._validRange(t)}convertModelPositionToViewPosition(e){return this._validPosition(e)}convertModelRangeToViewRange(e){return this._validRange(e)}modelPositionIsVisible(e){const t=this._lines.model.getLineCount();return!(e.lineNumber<1||e.lineNumber>t)}getModelLineViewLineCount(e){return 1}getViewLineNumberOfModelPosition(e,t){return e}}const I_=hh.Right;class sNe{constructor(e){this.persist=0,this._requiredLanes=1,this.lanes=new Uint8Array(Math.ceil((e+1)*I_/8))}reset(e){const t=Math.ceil((e+1)*I_/8);this.lanes.length<t?this.lanes=new Uint8Array(t):this.lanes.fill(0),this._requiredLanes=1}get requiredLanes(){return this._requiredLanes}push(e,t,i){i&&(this.persist|=1<<e-1);for(let n=t.startLineNumber;n<=t.endLineNumber;n++){const s=I_*n+(e-1);this.lanes[s>>>3]|=1<<s%8,this._requiredLanes=Math.max(this._requiredLanes,this.countAtLine(n))}}getLanesAtLine(e){const t=[];let i=I_*e;for(let n=0;n<I_;n++)(this.persist&1<<n||this.lanes[i>>>3]&1<<i%8)&&t.push(n+1),i++;return t.length?t:[hh.Center]}countAtLine(e){let t=I_*e,i=0;for(let n=0;n<I_;n++)(this.persist&1<<n||this.lanes[t>>>3]&1<<t%8)&&i++,t++;return i}}let oNe=class extends J{constructor(e,t,i,n,s,r,a,l,c){if(super(),this.languageConfigurationService=a,this._themeService=l,this._attachedView=c,this.hiddenAreasModel=new aNe,this.previousHiddenAreas=[],this._editorId=e,this._configuration=t,this.model=i,this._eventDispatcher=new ITe,this.onEvent=this._eventDispatcher.onEvent,this.cursorConfig=new D0(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._updateConfigurationViewLineCount=this._register(new Ui(()=>this._updateConfigurationViewLineCountNow(),0)),this._hasFocus=!1,this._viewportStart=qH.create(this.model),this.glyphLanes=new sNe(0),this.model.isTooLargeForTokenization())this._lines=new iNe(this.model);else{const u=this._configuration.options,f=u.get(50),g=u.get(139),p=u.get(146),_=u.get(138),b=u.get(129);this._lines=new JTe(this._editorId,this.model,n,s,f,this.model.getOptions().tabSize,g,p.wrappingColumn,_,b)}this.coordinatesConverter=this._lines.createCoordinatesConverter(),this._cursor=this._register(new VTe(i,this,this.coordinatesConverter,this.cursorConfig)),this.viewLayout=this._register(new YTe(this._configuration,this.getLineCount(),r)),this._register(this.viewLayout.onDidScroll(u=>{u.scrollTopChanged&&this._handleVisibleLinesChanged(),u.scrollTopChanged&&this._viewportStart.invalidate(),this._eventDispatcher.emitSingleViewEvent(new LTe(u)),this._eventDispatcher.emitOutgoingEvent(new UH(u.oldScrollWidth,u.oldScrollLeft,u.oldScrollHeight,u.oldScrollTop,u.scrollWidth,u.scrollLeft,u.scrollHeight,u.scrollTop))})),this._register(this.viewLayout.onDidContentSizeChange(u=>{this._eventDispatcher.emitOutgoingEvent(u)})),this._decorations=new ZTe(this._editorId,this.model,this._configuration,this._lines,this.coordinatesConverter),this._registerModelEvents(),this._register(this._configuration.onDidChangeFast(u=>{try{const f=this._eventDispatcher.beginEmitViewEvents();this._onConfigurationChanged(f,u)}finally{this._eventDispatcher.endEmitViewEvents()}})),this._register(ZD.getInstance().onDidChange(()=>{this._eventDispatcher.emitSingleViewEvent(new kTe)})),this._register(this._themeService.onDidColorThemeChange(u=>{this._invalidateDecorationsColorCache(),this._eventDispatcher.emitSingleViewEvent(new xTe(u))})),this._updateConfigurationViewLineCountNow()}dispose(){super.dispose(),this._decorations.dispose(),this._lines.dispose(),this._viewportStart.dispose(),this._eventDispatcher.dispose()}createLineBreaksComputer(){return this._lines.createLineBreaksComputer()}addViewEventHandler(e){this._eventDispatcher.addViewEventHandler(e)}removeViewEventHandler(e){this._eventDispatcher.removeViewEventHandler(e)}_updateConfigurationViewLineCountNow(){this._configuration.setViewLineCount(this._lines.getViewLineCount())}getModelVisibleRanges(){const e=this.viewLayout.getLinesViewportData(),t=new A(e.startLineNumber,this.getLineMinColumn(e.startLineNumber),e.endLineNumber,this.getLineMaxColumn(e.endLineNumber));return this._toModelVisibleRanges(t)}visibleLinesStabilized(){const e=this.getModelVisibleRanges();this._attachedView.setVisibleLines(e,!0)}_handleVisibleLinesChanged(){const e=this.getModelVisibleRanges();this._attachedView.setVisibleLines(e,!1)}setHasFocus(e){this._hasFocus=e,this._cursor.setHasFocus(e),this._eventDispatcher.emitSingleViewEvent(new yTe(e)),this._eventDispatcher.emitOutgoingEvent(new zH(!e,e))}onCompositionStart(){this._eventDispatcher.emitSingleViewEvent(new vTe)}onCompositionEnd(){this._eventDispatcher.emitSingleViewEvent(new bTe)}_captureStableViewport(){if(this._viewportStart.isValid&&this.viewLayout.getCurrentScrollTop()>0){const e=new Z(this._viewportStart.viewLineNumber,this.getLineMinColumn(this._viewportStart.viewLineNumber)),t=this.coordinatesConverter.convertViewPositionToModelPosition(e);return new KQ(t,this._viewportStart.startLineDelta)}return new KQ(null,0)}_onConfigurationChanged(e,t){const i=this._captureStableViewport(),n=this._configuration.options,s=n.get(50),r=n.get(139),a=n.get(146),l=n.get(138),c=n.get(129);this._lines.setWrappingSettings(s,r,a.wrappingColumn,l,c)&&(e.emitViewEvent(new pT),e.emitViewEvent(new mT),e.emitViewEvent(new E_(null)),this._cursor.onLineMappingChanged(e),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this._updateConfigurationViewLineCount.schedule()),t.hasChanged(91)&&(this._decorations.reset(),e.emitViewEvent(new E_(null))),t.hasChanged(98)&&(this._decorations.reset(),e.emitViewEvent(new E_(null))),e.emitViewEvent(new CTe(t)),this.viewLayout.onConfigurationChanged(t),i.recoverViewportStart(this.coordinatesConverter,this.viewLayout),D0.shouldRecreate(t)&&(this.cursorConfig=new D0(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig))}_registerModelEvents(){this._register(this.model.onDidChangeContentOrInjectedText(e=>{try{const i=this._eventDispatcher.beginEmitViewEvents();let n=!1,s=!1;const r=e instanceof _v?e.rawContentChangedEvent.changes:e.changes,a=e instanceof _v?e.rawContentChangedEvent.versionId:null,l=this._lines.createLineBreaksComputer();for(const f of r)switch(f.changeType){case 4:{for(let g=0;g<f.detail.length;g++){const p=f.detail[g];let _=f.injectedTexts[g];_&&(_=_.filter(b=>!b.ownerId||b.ownerId===this._editorId)),l.addRequest(p,_,null)}break}case 2:{let g=null;f.injectedText&&(g=f.injectedText.filter(p=>!p.ownerId||p.ownerId===this._editorId)),l.addRequest(f.detail,g,null);break}}const c=l.finalize(),u=new tg(c);for(const f of r)switch(f.changeType){case 1:{this._lines.onModelFlushed(),i.emitViewEvent(new pT),this._decorations.reset(),this.viewLayout.onFlushed(this.getLineCount()),n=!0;break}case 3:{const g=this._lines.onModelLinesDeleted(a,f.fromLineNumber,f.toLineNumber);g!==null&&(i.emitViewEvent(g),this.viewLayout.onLinesDeleted(g.fromLineNumber,g.toLineNumber)),n=!0;break}case 4:{const g=u.takeCount(f.detail.length),p=this._lines.onModelLinesInserted(a,f.fromLineNumber,f.toLineNumber,g);p!==null&&(i.emitViewEvent(p),this.viewLayout.onLinesInserted(p.fromLineNumber,p.toLineNumber)),n=!0;break}case 2:{const g=u.dequeue(),[p,_,b,y]=this._lines.onModelLineChanged(a,f.lineNumber,g);s=p,_&&i.emitViewEvent(_),b&&(i.emitViewEvent(b),this.viewLayout.onLinesInserted(b.fromLineNumber,b.toLineNumber)),y&&(i.emitViewEvent(y),this.viewLayout.onLinesDeleted(y.fromLineNumber,y.toLineNumber));break}case 5:break}a!==null&&this._lines.acceptVersionId(a),this.viewLayout.onHeightMaybeChanged(),!n&&s&&(i.emitViewEvent(new mT),i.emitViewEvent(new E_(null)),this._cursor.onLineMappingChanged(i),this._decorations.onLineMappingChanged())}finally{this._eventDispatcher.endEmitViewEvents()}const t=this._viewportStart.isValid;if(this._viewportStart.invalidate(),this._configuration.setModelLineCount(this.model.getLineCount()),this._updateConfigurationViewLineCountNow(),!this._hasFocus&&this.model.getAttachedEditorCount()>=2&&t){const i=this.model._getTrackedRange(this._viewportStart.modelTrackedRange);if(i){const n=this.coordinatesConverter.convertModelPositionToViewPosition(i.getStartPosition()),s=this.viewLayout.getVerticalOffsetForLineNumber(n.lineNumber);this.viewLayout.setScrollPosition({scrollTop:s+this._viewportStart.startLineDelta},1)}}try{const i=this._eventDispatcher.beginEmitViewEvents();e instanceof _v&&i.emitOutgoingEvent(new FTe(e.contentChangedEvent)),this._cursor.onModelContentChanged(i,e)}finally{this._eventDispatcher.endEmitViewEvents()}this._handleVisibleLinesChanged()})),this._register(this.model.onDidChangeTokens(e=>{const t=[];for(let i=0,n=e.ranges.length;i<n;i++){const s=e.ranges[i],r=this.coordinatesConverter.convertModelPositionToViewPosition(new Z(s.fromLineNumber,1)).lineNumber,a=this.coordinatesConverter.convertModelPositionToViewPosition(new Z(s.toLineNumber,this.model.getLineMaxColumn(s.toLineNumber))).lineNumber;t[i]={fromLineNumber:r,toLineNumber:a}}this._eventDispatcher.emitSingleViewEvent(new DTe(t)),this._eventDispatcher.emitOutgoingEvent(new WTe(e))})),this._register(this.model.onDidChangeLanguageConfiguration(e=>{this._eventDispatcher.emitSingleViewEvent(new STe),this.cursorConfig=new D0(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new OTe(e))})),this._register(this.model.onDidChangeLanguage(e=>{this.cursorConfig=new D0(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new PTe(e))})),this._register(this.model.onDidChangeOptions(e=>{if(this._lines.setTabSize(this.model.getOptions().tabSize)){try{const t=this._eventDispatcher.beginEmitViewEvents();t.emitViewEvent(new pT),t.emitViewEvent(new mT),t.emitViewEvent(new E_(null)),this._cursor.onLineMappingChanged(t),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule()}this.cursorConfig=new D0(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new BTe(e))})),this._register(this.model.onDidChangeDecorations(e=>{this._decorations.onModelDecorationsChanged(),this._eventDispatcher.emitSingleViewEvent(new E_(e)),this._eventDispatcher.emitOutgoingEvent(new ATe(e))}))}setHiddenAreas(e,t){var i;this.hiddenAreasModel.setHiddenAreas(t,e);const n=this.hiddenAreasModel.getMergedRanges();if(n===this.previousHiddenAreas)return;this.previousHiddenAreas=n;const s=this._captureStableViewport();let r=!1;try{const a=this._eventDispatcher.beginEmitViewEvents();r=this._lines.setHiddenAreas(n),r&&(a.emitViewEvent(new pT),a.emitViewEvent(new mT),a.emitViewEvent(new E_(null)),this._cursor.onLineMappingChanged(a),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.onHeightMaybeChanged());const l=(i=s.viewportStartModelPosition)===null||i===void 0?void 0:i.lineNumber;l&&n.some(u=>u.startLineNumber<=l&&l<=u.endLineNumber)||s.recoverViewportStart(this.coordinatesConverter,this.viewLayout)}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule(),r&&this._eventDispatcher.emitOutgoingEvent(new RTe)}getVisibleRangesPlusViewportAboveBelow(){const e=this._configuration.options.get(145),t=this._configuration.options.get(67),i=Math.max(20,Math.round(e.height/t)),n=this.viewLayout.getLinesViewportData(),s=Math.max(1,n.completelyVisibleStartLineNumber-i),r=Math.min(this.getLineCount(),n.completelyVisibleEndLineNumber+i);return this._toModelVisibleRanges(new A(s,this.getLineMinColumn(s),r,this.getLineMaxColumn(r)))}getVisibleRanges(){const e=this.getCompletelyVisibleViewRange();return this._toModelVisibleRanges(e)}getHiddenAreas(){return this._lines.getHiddenAreas()}_toModelVisibleRanges(e){const t=this.coordinatesConverter.convertViewRangeToModelRange(e),i=this._lines.getHiddenAreas();if(i.length===0)return[t];const n=[];let s=0,r=t.startLineNumber,a=t.startColumn;const l=t.endLineNumber,c=t.endColumn;for(let u=0,f=i.length;u<f;u++){const g=i[u].startLineNumber,p=i[u].endLineNumber;p<r||g>l||(r<g&&(n[s++]=new A(r,a,g-1,this.model.getLineMaxColumn(g-1))),r=p+1,a=1)}return(r<l||r===l&&a<c)&&(n[s++]=new A(r,a,l,c)),n}getCompletelyVisibleViewRange(){const e=this.viewLayout.getLinesViewportData(),t=e.completelyVisibleStartLineNumber,i=e.completelyVisibleEndLineNumber;return new A(t,this.getLineMinColumn(t),i,this.getLineMaxColumn(i))}getCompletelyVisibleViewRangeAtScrollTop(e){const t=this.viewLayout.getLinesViewportDataAtScrollTop(e),i=t.completelyVisibleStartLineNumber,n=t.completelyVisibleEndLineNumber;return new A(i,this.getLineMinColumn(i),n,this.getLineMaxColumn(n))}saveState(){const e=this.viewLayout.saveState(),t=e.scrollTop,i=this.viewLayout.getLineNumberAtVerticalOffset(t),n=this.coordinatesConverter.convertViewPositionToModelPosition(new Z(i,this.getLineMinColumn(i))),s=this.viewLayout.getVerticalOffsetForLineNumber(i)-t;return{scrollLeft:e.scrollLeft,firstPosition:n,firstPositionDeltaTop:s}}reduceRestoreState(e){if(typeof e.firstPosition>"u")return this._reduceRestoreStateCompatibility(e);const t=this.model.validatePosition(e.firstPosition),i=this.coordinatesConverter.convertModelPositionToViewPosition(t),n=this.viewLayout.getVerticalOffsetForLineNumber(i.lineNumber)-e.firstPositionDeltaTop;return{scrollLeft:e.scrollLeft,scrollTop:n}}_reduceRestoreStateCompatibility(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTopWithoutViewZones}}getTabSize(){return this.model.getOptions().tabSize}getLineCount(){return this._lines.getViewLineCount()}setViewport(e,t,i){this._viewportStart.update(this,e)}getActiveIndentGuide(e,t,i){return this._lines.getActiveIndentGuide(e,t,i)}getLinesIndentGuides(e,t){return this._lines.getViewLinesIndentGuides(e,t)}getBracketGuidesInRangeByLine(e,t,i,n){return this._lines.getViewLinesBracketGuides(e,t,i,n)}getLineContent(e){return this._lines.getViewLineContent(e)}getLineLength(e){return this._lines.getViewLineLength(e)}getLineMinColumn(e){return this._lines.getViewLineMinColumn(e)}getLineMaxColumn(e){return this._lines.getViewLineMaxColumn(e)}getLineFirstNonWhitespaceColumn(e){const t=gr(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){const t=Bd(this.getLineContent(e));return t===-1?0:t+2}getMinimapDecorationsInRange(e){return this._decorations.getMinimapDecorationsInRange(e)}getDecorationsInViewport(e){return this._decorations.getDecorationsViewportData(e).decorations}getInjectedTextAt(e){return this._lines.getInjectedTextAt(e)}getViewportViewLineRenderingData(e,t){const n=this._decorations.getDecorationsViewportData(e).inlineDecorations[t-e.startLineNumber];return this._getViewLineRenderingData(t,n)}getViewLineRenderingData(e){const t=this._decorations.getInlineDecorationsOnLine(e);return this._getViewLineRenderingData(e,t)}_getViewLineRenderingData(e,t){const i=this.model.mightContainRTL(),n=this.model.mightContainNonBasicASCII(),s=this.getTabSize(),r=this._lines.getViewLineData(e);return r.inlineDecorations&&(t=[...t,...r.inlineDecorations.map(a=>a.toInlineDecoration(e))]),new El(r.minColumn,r.maxColumn,r.content,r.continuesWithWrappedLine,i,n,r.tokens,t,s,r.startVisibleColumn)}getViewLineData(e){return this._lines.getViewLineData(e)}getMinimapLinesRenderingData(e,t,i){const n=this._lines.getViewLinesData(e,t,i);return new eLe(this.getTabSize(),n)}getAllOverviewRulerDecorations(e){const t=this.model.getOverviewRulerDecorations(this._editorId,sR(this._configuration.options)),i=new rNe;for(const n of t){const s=n.options,r=s.overviewRuler;if(!r)continue;const a=r.position;if(a===0)continue;const l=r.getColor(e.value),c=this.coordinatesConverter.getViewLineNumberOfModelPosition(n.range.startLineNumber,n.range.startColumn),u=this.coordinatesConverter.getViewLineNumberOfModelPosition(n.range.endLineNumber,n.range.endColumn);i.accept(l,s.zIndex,c,u,a)}return i.asArray}_invalidateDecorationsColorCache(){const e=this.model.getOverviewRulerDecorations();for(const t of e){const i=t.options.overviewRuler;i==null||i.invalidateCachedColor();const n=t.options.minimap;n==null||n.invalidateCachedColor()}}getValueInRange(e,t){const i=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueInRange(i,t)}getValueLengthInRange(e,t){const i=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueLengthInRange(i,t)}modifyPosition(e,t){const i=this.coordinatesConverter.convertViewPositionToModelPosition(e),n=this.model.modifyPosition(i,t);return this.coordinatesConverter.convertModelPositionToViewPosition(n)}deduceModelPositionRelativeToViewPosition(e,t,i){const n=this.coordinatesConverter.convertViewPositionToModelPosition(e);this.model.getEOL().length===2&&(t<0?t-=i:t+=i);const r=this.model.getOffsetAt(n)+t;return this.model.getPositionAt(r)}getPlainTextToCopy(e,t,i){const n=i?`\r
`:this.model.getEOL();e=e.slice(0),e.sort(A.compareRangesUsingStarts);let s=!1,r=!1;for(const l of e)l.isEmpty()?s=!0:r=!0;if(!r){if(!t)return"";const l=e.map(u=>u.startLineNumber);let c="";for(let u=0;u<l.length;u++)u>0&&l[u-1]===l[u]||(c+=this.model.getLineContent(l[u])+n);return c}if(s&&t){const l=[];let c=0;for(const u of e){const f=u.startLineNumber;u.isEmpty()?f!==c&&l.push(this.model.getLineContent(f)):l.push(this.model.getValueInRange(u,i?2:0)),c=f}return l.length===1?l[0]:l}const a=[];for(const l of e)l.isEmpty()||a.push(this.model.getValueInRange(l,i?2:0));return a.length===1?a[0]:a}getRichTextToCopy(e,t){const i=this.model.getLanguageId();if(i===yl||e.length!==1)return null;let n=e[0];if(n.isEmpty()){if(!t)return null;const u=n.startLineNumber;n=new A(u,this.model.getLineMinColumn(u),u,this.model.getLineMaxColumn(u))}const s=this._configuration.options.get(50),r=this._getColorMap(),l=/[:;\\\/<>]/.test(s.fontFamily)||s.fontFamily===ga.fontFamily;let c;return l?c=ga.fontFamily:(c=s.fontFamily,c=c.replace(/"/g,"'"),/[,']/.test(c)||/[+ ]/.test(c)&&(c=`'${c}'`),c=`${c}, ${ga.fontFamily}`),{mode:i,html:`<div style="color: ${r[1]};background-color: ${r[2]};font-family: ${c};font-weight: ${s.fontWeight};font-size: ${s.fontSize}px;line-height: ${s.lineHeight}px;white-space: pre;">`+this._getHTMLToCopy(n,r)+"</div>"}}_getHTMLToCopy(e,t){const i=e.startLineNumber,n=e.startColumn,s=e.endLineNumber,r=e.endColumn,a=this.getTabSize();let l="";for(let c=i;c<=s;c++){const u=this.model.tokenization.getLineTokens(c),f=u.getLineContent(),g=c===i?n-1:0,p=c===s?r-1:f.length;f===""?l+="<br>":l+=$Te(f,u.inflate(),t,g,p,a,Mo)}return l}_getColorMap(){const e=Qn.getColorMap(),t=["#000000"];if(e)for(let i=1,n=e.length;i<n;i++)t[i]=ne.Format.CSS.formatHex(e[i]);return t}getPrimaryCursorState(){return this._cursor.getPrimaryCursorState()}getLastAddedCursorIndex(){return this._cursor.getLastAddedCursorIndex()}getCursorStates(){return this._cursor.getCursorStates()}setCursorStates(e,t,i){return this._withViewEventsCollector(n=>this._cursor.setStates(n,e,t,i))}getCursorColumnSelectData(){return this._cursor.getCursorColumnSelectData()}getCursorAutoClosedCharacters(){return this._cursor.getAutoClosedCharacters()}setCursorColumnSelectData(e){this._cursor.setCursorColumnSelectData(e)}getPrevEditOperationType(){return this._cursor.getPrevEditOperationType()}setPrevEditOperationType(e){this._cursor.setPrevEditOperationType(e)}getSelection(){return this._cursor.getSelection()}getSelections(){return this._cursor.getSelections()}getPosition(){return this._cursor.getPrimaryCursorState().modelState.position}setSelections(e,t,i=0){this._withViewEventsCollector(n=>this._cursor.setSelections(n,e,t,i))}saveCursorState(){return this._cursor.saveState()}restoreCursorState(e){this._withViewEventsCollector(t=>this._cursor.restoreState(t,e))}_executeCursorEdit(e){if(this._cursor.context.cursorConfig.readOnly){this._eventDispatcher.emitOutgoingEvent(new MTe);return}this._withViewEventsCollector(e)}executeEdits(e,t,i){this._executeCursorEdit(n=>this._cursor.executeEdits(n,e,t,i))}startComposition(){this._executeCursorEdit(e=>this._cursor.startComposition(e))}endComposition(e){this._executeCursorEdit(t=>this._cursor.endComposition(t,e))}type(e,t){this._executeCursorEdit(i=>this._cursor.type(i,e,t))}compositionType(e,t,i,n,s){this._executeCursorEdit(r=>this._cursor.compositionType(r,e,t,i,n,s))}paste(e,t,i,n){this._executeCursorEdit(s=>this._cursor.paste(s,e,t,i,n))}cut(e){this._executeCursorEdit(t=>this._cursor.cut(t,e))}executeCommand(e,t){this._executeCursorEdit(i=>this._cursor.executeCommand(i,e,t))}executeCommands(e,t){this._executeCursorEdit(i=>this._cursor.executeCommands(i,e,t))}revealAllCursors(e,t,i=!1){this._withViewEventsCollector(n=>this._cursor.revealAll(n,e,i,0,t,0))}revealPrimaryCursor(e,t,i=!1){this._withViewEventsCollector(n=>this._cursor.revealPrimary(n,e,i,0,t,0))}revealTopMostCursor(e){const t=this._cursor.getTopMostViewPosition(),i=new A(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(n=>n.emitViewEvent(new EL(e,!1,i,null,0,!0,0)))}revealBottomMostCursor(e){const t=this._cursor.getBottomMostViewPosition(),i=new A(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(n=>n.emitViewEvent(new EL(e,!1,i,null,0,!0,0)))}revealRange(e,t,i,n,s){this._withViewEventsCollector(r=>r.emitViewEvent(new EL(e,!1,i,null,n,t,s)))}changeWhitespace(e){this.viewLayout.changeWhitespace(e)&&(this._eventDispatcher.emitSingleViewEvent(new ETe),this._eventDispatcher.emitOutgoingEvent(new NTe))}_withViewEventsCollector(e){try{const t=this._eventDispatcher.beginEmitViewEvents();return e(t)}finally{this._eventDispatcher.endEmitViewEvents()}}normalizePosition(e,t){return this._lines.normalizePosition(e,t)}getLineIndentColumn(e){return this._lines.getLineIndentColumn(e)}};class qH{static create(e){const t=e._setTrackedRange(null,new A(1,1,1,1),1);return new qH(e,1,!1,t,0)}get viewLineNumber(){return this._viewLineNumber}get isValid(){return this._isValid}get modelTrackedRange(){return this._modelTrackedRange}get startLineDelta(){return this._startLineDelta}constructor(e,t,i,n,s){this._model=e,this._viewLineNumber=t,this._isValid=i,this._modelTrackedRange=n,this._startLineDelta=s}dispose(){this._model._setTrackedRange(this._modelTrackedRange,null,1)}update(e,t){const i=e.coordinatesConverter.convertViewPositionToModelPosition(new Z(t,e.getLineMinColumn(t))),n=e.model._setTrackedRange(this._modelTrackedRange,new A(i.lineNumber,i.column,i.lineNumber,i.column),1),s=e.viewLayout.getVerticalOffsetForLineNumber(t),r=e.viewLayout.getCurrentScrollTop();this._viewLineNumber=t,this._isValid=!0,this._modelTrackedRange=n,this._startLineDelta=r-s}invalidate(){this._isValid=!1}}class rNe{constructor(){this._asMap=Object.create(null),this.asArray=[]}accept(e,t,i,n,s){const r=this._asMap[e];if(r){const a=r.data,l=a[a.length-3],c=a[a.length-1];if(l===s&&c+1>=i){n>c&&(a[a.length-1]=n);return}a.push(s,i,n)}else{const a=new ux(e,t,[s,i,n]);this._asMap[e]=a,this.asArray.push(a)}}}class aNe{constructor(){this.hiddenAreas=new Map,this.shouldRecompute=!1,this.ranges=[]}setHiddenAreas(e,t){const i=this.hiddenAreas.get(e);i&&jQ(i,t)||(this.hiddenAreas.set(e,t),this.shouldRecompute=!0)}getMergedRanges(){if(!this.shouldRecompute)return this.ranges;this.shouldRecompute=!1;const e=Array.from(this.hiddenAreas.values()).reduce((t,i)=>lNe(t,i),[]);return jQ(this.ranges,e)?this.ranges:(this.ranges=e,this.ranges)}}function lNe(o,e){const t=[];let i=0,n=0;for(;i<o.length&&n<e.length;){const s=o[i],r=e[n];if(s.endLineNumber<r.startLineNumber-1)t.push(o[i++]);else if(r.endLineNumber<s.startLineNumber-1)t.push(e[n++]);else{const a=Math.min(s.startLineNumber,r.startLineNumber),l=Math.max(s.endLineNumber,r.endLineNumber);t.push(new A(a,1,l,1)),i++,n++}}for(;i<o.length;)t.push(o[i++]);for(;n<e.length;)t.push(e[n++]);return t}function jQ(o,e){if(o.length!==e.length)return!1;for(let t=0;t<o.length;t++)if(!o[t].equalsRange(e[t]))return!1;return!0}class KQ{constructor(e,t){this.viewportStartModelPosition=e,this.startLineDelta=t}recoverViewportStart(e,t){if(!this.viewportStartModelPosition)return;const i=e.convertModelPositionToViewPosition(this.viewportStartModelPosition),n=t.getVerticalOffsetForLineNumber(i.lineNumber);t.setScrollPosition({scrollTop:n+this.startLineDelta},1)}}class QD{constructor(...e){this._entries=new Map;for(const[t,i]of e)this.set(t,i)}set(e,t){const i=this._entries.get(e);return this._entries.set(e,t),i}get(e){return this._entries.get(e)}}var Ex;(function(o){o[o.Ignore=0]="Ignore",o[o.Info=1]="Info",o[o.Warning=2]="Warning",o[o.Error=3]="Error"})(Ex||(Ex={}));(function(o){const e="error",t="warning",i="warn",n="info",s="ignore";function r(l){return l?Q0(e,l)?o.Error:Q0(t,l)||Q0(i,l)?o.Warning:Q0(n,l)?o.Info:o.Ignore:o.Ignore}o.fromValue=r;function a(l){switch(l){case o.Error:return e;case o.Warning:return t;case o.Info:return n;default:return s}}o.toString=a})(Ex||(Ex={}));const cs=Ex;var ZA=cs;const ys=Zt("notificationService");class cNe{}var dNe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Jh=function(o,e){return function(t,i){e(t,i,o)}},H_;let _1=H_=class extends J{get isSimpleWidget(){return this._configuration.isSimpleWidget}constructor(e,t,i,n,s,r,a,l,c,u,f,g){var p;super(),this.languageConfigurationService=f,this._deliveryQueue=j0e(),this._contributions=this._register(new zEe),this._onDidDispose=this._register(new Y),this.onDidDispose=this._onDidDispose.event,this._onDidChangeModelContent=this._register(new Y({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelContent=this._onDidChangeModelContent.event,this._onDidChangeModelLanguage=this._register(new Y({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelLanguage=this._onDidChangeModelLanguage.event,this._onDidChangeModelLanguageConfiguration=this._register(new Y({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelLanguageConfiguration=this._onDidChangeModelLanguageConfiguration.event,this._onDidChangeModelOptions=this._register(new Y({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelOptions=this._onDidChangeModelOptions.event,this._onDidChangeModelDecorations=this._register(new Y({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelDecorations=this._onDidChangeModelDecorations.event,this._onDidChangeModelTokens=this._register(new Y({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelTokens=this._onDidChangeModelTokens.event,this._onDidChangeConfiguration=this._register(new Y({deliveryQueue:this._deliveryQueue})),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._onWillChangeModel=this._register(new Y({deliveryQueue:this._deliveryQueue})),this.onWillChangeModel=this._onWillChangeModel.event,this._onDidChangeModel=this._register(new Y({deliveryQueue:this._deliveryQueue})),this.onDidChangeModel=this._onDidChangeModel.event,this._onDidChangeCursorPosition=this._register(new Y({deliveryQueue:this._deliveryQueue})),this.onDidChangeCursorPosition=this._onDidChangeCursorPosition.event,this._onDidChangeCursorSelection=this._register(new Y({deliveryQueue:this._deliveryQueue})),this.onDidChangeCursorSelection=this._onDidChangeCursorSelection.event,this._onDidAttemptReadOnlyEdit=this._register(new rr(this._contributions,this._deliveryQueue)),this.onDidAttemptReadOnlyEdit=this._onDidAttemptReadOnlyEdit.event,this._onDidLayoutChange=this._register(new Y({deliveryQueue:this._deliveryQueue})),this.onDidLayoutChange=this._onDidLayoutChange.event,this._editorTextFocus=this._register(new qQ({deliveryQueue:this._deliveryQueue})),this.onDidFocusEditorText=this._editorTextFocus.onDidChangeToTrue,this.onDidBlurEditorText=this._editorTextFocus.onDidChangeToFalse,this._editorWidgetFocus=this._register(new qQ({deliveryQueue:this._deliveryQueue})),this.onDidFocusEditorWidget=this._editorWidgetFocus.onDidChangeToTrue,this.onDidBlurEditorWidget=this._editorWidgetFocus.onDidChangeToFalse,this._onWillType=this._register(new rr(this._contributions,this._deliveryQueue)),this.onWillType=this._onWillType.event,this._onDidType=this._register(new rr(this._contributions,this._deliveryQueue)),this.onDidType=this._onDidType.event,this._onDidCompositionStart=this._register(new rr(this._contributions,this._deliveryQueue)),this.onDidCompositionStart=this._onDidCompositionStart.event,this._onDidCompositionEnd=this._register(new rr(this._contributions,this._deliveryQueue)),this.onDidCompositionEnd=this._onDidCompositionEnd.event,this._onDidPaste=this._register(new rr(this._contributions,this._deliveryQueue)),this.onDidPaste=this._onDidPaste.event,this._onMouseUp=this._register(new rr(this._contributions,this._deliveryQueue)),this.onMouseUp=this._onMouseUp.event,this._onMouseDown=this._register(new rr(this._contributions,this._deliveryQueue)),this.onMouseDown=this._onMouseDown.event,this._onMouseDrag=this._register(new rr(this._contributions,this._deliveryQueue)),this.onMouseDrag=this._onMouseDrag.event,this._onMouseDrop=this._register(new rr(this._contributions,this._deliveryQueue)),this.onMouseDrop=this._onMouseDrop.event,this._onMouseDropCanceled=this._register(new rr(this._contributions,this._deliveryQueue)),this.onMouseDropCanceled=this._onMouseDropCanceled.event,this._onDropIntoEditor=this._register(new rr(this._contributions,this._deliveryQueue)),this.onDropIntoEditor=this._onDropIntoEditor.event,this._onContextMenu=this._register(new rr(this._contributions,this._deliveryQueue)),this.onContextMenu=this._onContextMenu.event,this._onMouseMove=this._register(new rr(this._contributions,this._deliveryQueue)),this.onMouseMove=this._onMouseMove.event,this._onMouseLeave=this._register(new rr(this._contributions,this._deliveryQueue)),this.onMouseLeave=this._onMouseLeave.event,this._onMouseWheel=this._register(new rr(this._contributions,this._deliveryQueue)),this.onMouseWheel=this._onMouseWheel.event,this._onKeyUp=this._register(new rr(this._contributions,this._deliveryQueue)),this.onKeyUp=this._onKeyUp.event,this._onKeyDown=this._register(new rr(this._contributions,this._deliveryQueue)),this.onKeyDown=this._onKeyDown.event,this._onDidContentSizeChange=this._register(new Y({deliveryQueue:this._deliveryQueue})),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._onDidScrollChange=this._register(new Y({deliveryQueue:this._deliveryQueue})),this.onDidScrollChange=this._onDidScrollChange.event,this._onDidChangeViewZones=this._register(new Y({deliveryQueue:this._deliveryQueue})),this.onDidChangeViewZones=this._onDidChangeViewZones.event,this._onDidChangeHiddenAreas=this._register(new Y({deliveryQueue:this._deliveryQueue})),this.onDidChangeHiddenAreas=this._onDidChangeHiddenAreas.event,this._actions=new Map,this._bannerDomNode=null,this._dropIntoEditorDecorations=this.createDecorationsCollection(),s.willCreateCodeEditor();const _={...t};this._domElement=e,this._overflowWidgetsDomNode=_.overflowWidgetsDomNode,delete _.overflowWidgetsDomNode,this._id=++uNe,this._decorationTypeKeysToIds={},this._decorationTypeSubtypes={},this._telemetryData=i.telemetryData,this._configuration=this._register(this._createConfiguration(i.isSimpleWidget||!1,_,u)),this._register(this._configuration.onDidChange(S=>{this._onDidChangeConfiguration.fire(S);const L=this._configuration.options;if(S.hasChanged(145)){const x=L.get(145);this._onDidLayoutChange.fire(x)}})),this._contextKeyService=this._register(a.createScoped(this._domElement)),this._notificationService=c,this._codeEditorService=s,this._commandService=r,this._themeService=l,this._register(new fNe(this,this._contextKeyService)),this._register(new gNe(this,this._contextKeyService,g)),this._instantiationService=n.createChild(new QD([bt,this._contextKeyService])),this._modelData=null,this._focusTracker=new pNe(e,this._overflowWidgetsDomNode),this._register(this._focusTracker.onChange(()=>{this._editorWidgetFocus.setValue(this._focusTracker.hasFocus())})),this._contentWidgets={},this._overlayWidgets={},this._glyphMarginWidgets={};let b;Array.isArray(i.contributions)?b=i.contributions:b=LC.getEditorContributions(),this._contributions.initialize(this,b,this._instantiationService);for(const S of LC.getEditorActions()){if(this._actions.has(S.id)){Nt(new Error(`Cannot have two actions with the same id ${S.id}`));continue}const L=new vse(S.id,S.label,S.alias,S.metadata,(p=S.precondition)!==null&&p!==void 0?p:void 0,x=>this._instantiationService.invokeFunction(D=>Promise.resolve(S.runEditorCommand(D,this,x))),this._contextKeyService);this._actions.set(L.id,L)}const y=()=>!this._configuration.options.get(91)&&this._configuration.options.get(36).enabled;this._register(new iwe(this._domElement,{onDragOver:S=>{if(!y())return;const L=this.getTargetAtClientPoint(S.clientX,S.clientY);L!=null&&L.position&&this.showDropIndicatorAt(L.position)},onDrop:async S=>{if(!y()||(this.removeDropIndicator(),!S.dataTransfer))return;const L=this.getTargetAtClientPoint(S.clientX,S.clientY);L!=null&&L.position&&this._onDropIntoEditor.fire({position:L.position,event:S})},onDragLeave:()=>{this.removeDropIndicator()},onDragEnd:()=>{this.removeDropIndicator()}})),this._codeEditorService.addCodeEditor(this)}writeScreenReaderContent(e){var t;(t=this._modelData)===null||t===void 0||t.view.writeScreenReaderContent(e)}_createConfiguration(e,t,i){return new y9(e,t,this._domElement,i)}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return HD.ICodeEditor}dispose(){this._codeEditorService.removeCodeEditor(this),this._focusTracker.dispose(),this._actions.clear(),this._contentWidgets={},this._overlayWidgets={},this._removeDecorationTypes(),this._postDetachModelCleanup(this._detachModel()),this._onDidDispose.fire(),super.dispose()}invokeWithinContext(e){return this._instantiationService.invokeFunction(e)}updateOptions(e){this._configuration.updateOptions(e||{})}getOptions(){return this._configuration.options}getOption(e){return this._configuration.options.get(e)}getRawOptions(){return this._configuration.getRawOptions()}getOverflowWidgetsDomNode(){return this._overflowWidgetsDomNode}getConfiguredWordAtPosition(e){return this._modelData?Di.getWordAtPosition(this._modelData.model,this._configuration.options.get(131),this._configuration.options.get(130),e):null}getValue(e=null){if(!this._modelData)return"";const t=!!(e&&e.preserveBOM);let i=0;return e&&e.lineEnding&&e.lineEnding===`
`?i=1:e&&e.lineEnding&&e.lineEnding===`\r
`&&(i=2),this._modelData.model.getValue(i,t)}setValue(e){this._modelData&&this._modelData.model.setValue(e)}getModel(){return this._modelData?this._modelData.model:null}setModel(e=null){var t;const i=e;if(this._modelData===null&&i===null||this._modelData&&this._modelData.model===i)return;const n={oldModelUrl:((t=this._modelData)===null||t===void 0?void 0:t.model.uri)||null,newModelUrl:(i==null?void 0:i.uri)||null};this._onWillChangeModel.fire(n);const s=this.hasTextFocus(),r=this._detachModel();this._attachModel(i),s&&this.hasModel()&&this.focus(),this._removeDecorationTypes(),this._onDidChangeModel.fire(n),this._postDetachModelCleanup(r),this._contributionsDisposable=this._contributions.onAfterModelAttached()}_removeDecorationTypes(){if(this._decorationTypeKeysToIds={},this._decorationTypeSubtypes){for(const e in this._decorationTypeSubtypes){const t=this._decorationTypeSubtypes[e];for(const i in t)this._removeDecorationType(e+"-"+i)}this._decorationTypeSubtypes={}}}getVisibleRanges(){return this._modelData?this._modelData.viewModel.getVisibleRanges():[]}getVisibleRangesPlusViewportAboveBelow(){return this._modelData?this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow():[]}getWhitespaces(){return this._modelData?this._modelData.viewModel.viewLayout.getWhitespaces():[]}static _getVerticalOffsetAfterPosition(e,t,i,n){const s=e.model.validatePosition({lineNumber:t,column:i}),r=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(s);return e.viewModel.viewLayout.getVerticalOffsetAfterLineNumber(r.lineNumber,n)}getTopForLineNumber(e,t=!1){return this._modelData?H_._getVerticalOffsetForPosition(this._modelData,e,1,t):-1}getTopForPosition(e,t){return this._modelData?H_._getVerticalOffsetForPosition(this._modelData,e,t,!1):-1}static _getVerticalOffsetForPosition(e,t,i,n=!1){const s=e.model.validatePosition({lineNumber:t,column:i}),r=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(s);return e.viewModel.viewLayout.getVerticalOffsetForLineNumber(r.lineNumber,n)}getBottomForLineNumber(e,t=!1){return this._modelData?H_._getVerticalOffsetAfterPosition(this._modelData,e,1,t):-1}setHiddenAreas(e,t){var i;(i=this._modelData)===null||i===void 0||i.viewModel.setHiddenAreas(e.map(n=>A.lift(n)),t)}getVisibleColumnFromPosition(e){if(!this._modelData)return e.column;const t=this._modelData.model.validatePosition(e),i=this._modelData.model.getOptions().tabSize;return Vs.visibleColumnFromColumn(this._modelData.model.getLineContent(t.lineNumber),t.column,i)+1}getPosition(){return this._modelData?this._modelData.viewModel.getPosition():null}setPosition(e,t="api"){if(this._modelData){if(!Z.isIPosition(e))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(t,[{selectionStartLineNumber:e.lineNumber,selectionStartColumn:e.column,positionLineNumber:e.lineNumber,positionColumn:e.column}])}}_sendRevealRange(e,t,i,n){if(!this._modelData)return;if(!A.isIRange(e))throw new Error("Invalid arguments");const s=this._modelData.model.validateRange(e),r=this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(s);this._modelData.viewModel.revealRange("api",i,r,t,n)}revealLine(e,t=0){this._revealLine(e,0,t)}revealLineInCenter(e,t=0){this._revealLine(e,1,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._revealLine(e,2,t)}revealLineNearTop(e,t=0){this._revealLine(e,5,t)}_revealLine(e,t,i){if(typeof e!="number")throw new Error("Invalid arguments");this._sendRevealRange(new A(e,1,e,1),t,!1,i)}revealPosition(e,t=0){this._revealPosition(e,0,!0,t)}revealPositionInCenter(e,t=0){this._revealPosition(e,1,!0,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._revealPosition(e,2,!0,t)}revealPositionNearTop(e,t=0){this._revealPosition(e,5,!0,t)}_revealPosition(e,t,i,n){if(!Z.isIPosition(e))throw new Error("Invalid arguments");this._sendRevealRange(new A(e.lineNumber,e.column,e.lineNumber,e.column),t,i,n)}getSelection(){return this._modelData?this._modelData.viewModel.getSelection():null}getSelections(){return this._modelData?this._modelData.viewModel.getSelections():null}setSelection(e,t="api"){const i=Xe.isISelection(e),n=A.isIRange(e);if(!i&&!n)throw new Error("Invalid arguments");if(i)this._setSelectionImpl(e,t);else if(n){const s={selectionStartLineNumber:e.startLineNumber,selectionStartColumn:e.startColumn,positionLineNumber:e.endLineNumber,positionColumn:e.endColumn};this._setSelectionImpl(s,t)}}_setSelectionImpl(e,t){if(!this._modelData)return;const i=new Xe(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn);this._modelData.viewModel.setSelections(t,[i])}revealLines(e,t,i=0){this._revealLines(e,t,0,i)}revealLinesInCenter(e,t,i=0){this._revealLines(e,t,1,i)}revealLinesInCenterIfOutsideViewport(e,t,i=0){this._revealLines(e,t,2,i)}revealLinesNearTop(e,t,i=0){this._revealLines(e,t,5,i)}_revealLines(e,t,i,n){if(typeof e!="number"||typeof t!="number")throw new Error("Invalid arguments");this._sendRevealRange(new A(e,1,t,1),i,!1,n)}revealRange(e,t=0,i=!1,n=!0){this._revealRange(e,i?1:0,n,t)}revealRangeInCenter(e,t=0){this._revealRange(e,1,!0,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._revealRange(e,2,!0,t)}revealRangeNearTop(e,t=0){this._revealRange(e,5,!0,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._revealRange(e,6,!0,t)}revealRangeAtTop(e,t=0){this._revealRange(e,3,!0,t)}_revealRange(e,t,i,n){if(!A.isIRange(e))throw new Error("Invalid arguments");this._sendRevealRange(A.lift(e),t,i,n)}setSelections(e,t="api",i=0){if(this._modelData){if(!e||e.length===0)throw new Error("Invalid arguments");for(let n=0,s=e.length;n<s;n++)if(!Xe.isISelection(e[n]))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(t,e,i)}}getContentWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getContentWidth():-1}getScrollWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollWidth():-1}getScrollLeft(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollLeft():-1}getContentHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getContentHeight():-1}getScrollHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollHeight():-1}getScrollTop(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollTop():-1}setScrollLeft(e,t=1){if(this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollLeft:e},t)}}setScrollTop(e,t=1){if(this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollTop:e},t)}}setScrollPosition(e,t=1){this._modelData&&this._modelData.viewModel.viewLayout.setScrollPosition(e,t)}hasPendingScrollAnimation(){return this._modelData?this._modelData.viewModel.viewLayout.hasPendingScrollAnimation():!1}saveViewState(){if(!this._modelData)return null;const e=this._contributions.saveViewState(),t=this._modelData.viewModel.saveCursorState(),i=this._modelData.viewModel.saveState();return{cursorState:t,viewState:i,contributionsState:e}}restoreViewState(e){if(!this._modelData||!this._modelData.hasRealView)return;const t=e;if(t&&t.cursorState&&t.viewState){const i=t.cursorState;Array.isArray(i)?i.length>0&&this._modelData.viewModel.restoreCursorState(i):this._modelData.viewModel.restoreCursorState([i]),this._contributions.restoreViewState(t.contributionsState||{});const n=this._modelData.viewModel.reduceRestoreState(t.viewState);this._modelData.view.restoreState(n)}}handleInitialized(){var e;(e=this._getViewModel())===null||e===void 0||e.visibleLinesStabilized()}getContribution(e){return this._contributions.get(e)}getActions(){return Array.from(this._actions.values())}getSupportedActions(){let e=this.getActions();return e=e.filter(t=>t.isSupported()),e}getAction(e){return this._actions.get(e)||null}trigger(e,t,i){switch(i=i||{},t){case"compositionStart":this._startComposition();return;case"compositionEnd":this._endComposition(e);return;case"type":{const s=i;this._type(e,s.text||"");return}case"replacePreviousChar":{const s=i;this._compositionType(e,s.text||"",s.replaceCharCnt||0,0,0);return}case"compositionType":{const s=i;this._compositionType(e,s.text||"",s.replacePrevCharCnt||0,s.replaceNextCharCnt||0,s.positionDelta||0);return}case"paste":{const s=i;this._paste(e,s.text||"",s.pasteOnNewLine||!1,s.multicursorText||null,s.mode||null,s.clipboardEvent);return}case"cut":this._cut(e);return}const n=this.getAction(t);if(n){Promise.resolve(n.run(i)).then(void 0,Nt);return}this._modelData&&(this._triggerEditorCommand(e,t,i)||this._triggerCommand(t,i))}_triggerCommand(e,t){this._commandService.executeCommand(e,t)}_startComposition(){this._modelData&&(this._modelData.viewModel.startComposition(),this._onDidCompositionStart.fire())}_endComposition(e){this._modelData&&(this._modelData.viewModel.endComposition(e),this._onDidCompositionEnd.fire())}_type(e,t){!this._modelData||t.length===0||(e==="keyboard"&&this._onWillType.fire(t),this._modelData.viewModel.type(t,e),e==="keyboard"&&this._onDidType.fire(t))}_compositionType(e,t,i,n,s){this._modelData&&this._modelData.viewModel.compositionType(t,i,n,s,e)}_paste(e,t,i,n,s,r){if(!this._modelData)return;const a=this._modelData.viewModel,l=a.getSelection().getStartPosition();a.paste(t,i,n,e);const c=a.getSelection().getStartPosition();e==="keyboard"&&this._onDidPaste.fire({clipboardEvent:r,range:new A(l.lineNumber,l.column,c.lineNumber,c.column),languageId:s})}_cut(e){this._modelData&&this._modelData.viewModel.cut(e)}_triggerEditorCommand(e,t,i){const n=LC.getEditorCommand(t);return n?(i=i||{},i.source=e,this._instantiationService.invokeFunction(s=>{Promise.resolve(n.runEditorCommand(s,this,i)).then(void 0,Nt)}),!0):!1}_getViewModel(){return this._modelData?this._modelData.viewModel:null}pushUndoStop(){return!this._modelData||this._configuration.options.get(91)?!1:(this._modelData.model.pushStackElement(),!0)}popUndoStop(){return!this._modelData||this._configuration.options.get(91)?!1:(this._modelData.model.popStackElement(),!0)}executeEdits(e,t,i){if(!this._modelData||this._configuration.options.get(91))return!1;let n;return i?Array.isArray(i)?n=()=>i:n=i:n=()=>null,this._modelData.viewModel.executeEdits(e,t,n),!0}executeCommand(e,t){this._modelData&&this._modelData.viewModel.executeCommand(t,e)}executeCommands(e,t){this._modelData&&this._modelData.viewModel.executeCommands(t,e)}createDecorationsCollection(e){return new mNe(this,e)}changeDecorations(e){return this._modelData?this._modelData.model.changeDecorations(e,this._id):null}getLineDecorations(e){return this._modelData?this._modelData.model.getLineDecorations(e,this._id,sR(this._configuration.options)):null}getDecorationsInRange(e){return this._modelData?this._modelData.model.getDecorationsInRange(e,this._id,sR(this._configuration.options)):null}deltaDecorations(e,t){return this._modelData?e.length===0&&t.length===0?e:this._modelData.model.deltaDecorations(e,t,this._id):[]}removeDecorations(e){!this._modelData||e.length===0||this._modelData.model.changeDecorations(t=>{t.deltaDecorations(e,[])})}removeDecorationsByType(e){const t=this._decorationTypeKeysToIds[e];t&&this.changeDecorations(i=>i.deltaDecorations(t,[])),this._decorationTypeKeysToIds.hasOwnProperty(e)&&delete this._decorationTypeKeysToIds[e],this._decorationTypeSubtypes.hasOwnProperty(e)&&delete this._decorationTypeSubtypes[e]}getLayoutInfo(){return this._configuration.options.get(145)}createOverviewRuler(e){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.createOverviewRuler(e)}getContainerDomNode(){return this._domElement}getDomNode(){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.domNode.domNode}delegateVerticalScrollbarPointerDown(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.delegateScrollFromMouseWheelEvent(e)}layout(e,t=!1){this._configuration.observeContainer(e),t||this.render()}focus(){!this._modelData||!this._modelData.hasRealView||this._modelData.view.focus()}hasTextFocus(){return!this._modelData||!this._modelData.hasRealView?!1:this._modelData.view.isFocused()}hasWidgetFocus(){return this._focusTracker&&this._focusTracker.hasFocus()}addContentWidget(e){const t={widget:e,position:e.getPosition()};this._contentWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a content widget with the same id:"+e.getId()),this._contentWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addContentWidget(t)}layoutContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const i=this._contentWidgets[t];i.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutContentWidget(i)}}removeContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const i=this._contentWidgets[t];delete this._contentWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeContentWidget(i)}}addOverlayWidget(e){const t={widget:e,position:e.getPosition()};this._overlayWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting an overlay widget with the same id."),this._overlayWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addOverlayWidget(t)}layoutOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const i=this._overlayWidgets[t];i.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutOverlayWidget(i)}}removeOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const i=this._overlayWidgets[t];delete this._overlayWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeOverlayWidget(i)}}addGlyphMarginWidget(e){const t={widget:e,position:e.getPosition()};this._glyphMarginWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a glyph margin widget with the same id."),this._glyphMarginWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addGlyphMarginWidget(t)}layoutGlyphMarginWidget(e){const t=e.getId();if(this._glyphMarginWidgets.hasOwnProperty(t)){const i=this._glyphMarginWidgets[t];i.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutGlyphMarginWidget(i)}}removeGlyphMarginWidget(e){const t=e.getId();if(this._glyphMarginWidgets.hasOwnProperty(t)){const i=this._glyphMarginWidgets[t];delete this._glyphMarginWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeGlyphMarginWidget(i)}}changeViewZones(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.change(e)}getTargetAtClientPoint(e,t){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.getTargetAtClientPoint(e,t)}getScrolledVisiblePosition(e){if(!this._modelData||!this._modelData.hasRealView)return null;const t=this._modelData.model.validatePosition(e),i=this._configuration.options,n=i.get(145),s=H_._getVerticalOffsetForPosition(this._modelData,t.lineNumber,t.column)-this.getScrollTop(),r=this._modelData.view.getOffsetForColumn(t.lineNumber,t.column)+n.glyphMarginWidth+n.lineNumbersWidth+n.decorationsWidth-this.getScrollLeft();return{top:s,left:r,height:i.get(67)}}getOffsetForColumn(e,t){return!this._modelData||!this._modelData.hasRealView?-1:this._modelData.view.getOffsetForColumn(e,t)}render(e=!1){!this._modelData||!this._modelData.hasRealView||this._modelData.view.render(!0,e)}setAriaOptions(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.setAriaOptions(e)}applyFontInfo(e){vo(e,this._configuration.options.get(50))}setBanner(e,t){this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._domElement.removeChild(this._bannerDomNode),this._bannerDomNode=e,this._configuration.setReservedHeight(e?t:0),this._bannerDomNode&&this._domElement.prepend(this._bannerDomNode)}_attachModel(e){if(!e){this._modelData=null;return}const t=[];this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._configuration.setIsDominatedByLongLines(e.isDominatedByLongLines()),this._configuration.setModelLineCount(e.getLineCount());const i=e.onBeforeAttached(),n=new oNe(this._id,this._configuration,e,IH.create(ft(this._domElement)),VH.create(this._configuration.options),a=>ja(ft(this._domElement),a),this.languageConfigurationService,this._themeService,i);t.push(e.onWillDispose(()=>this.setModel(null))),t.push(n.onEvent(a=>{switch(a.kind){case 0:this._onDidContentSizeChange.fire(a);break;case 1:this._editorTextFocus.setValue(a.hasFocus);break;case 2:this._onDidScrollChange.fire(a);break;case 3:this._onDidChangeViewZones.fire();break;case 4:this._onDidChangeHiddenAreas.fire();break;case 5:this._onDidAttemptReadOnlyEdit.fire();break;case 6:{if(a.reachedMaxCursorCount){const f=this.getOption(80),g=v("cursors.maximum","The number of cursors has been limited to {0}. Consider using [find and replace](https://code.visualstudio.com/docs/editor/codebasics#_find-and-replace) for larger changes or increase the editor multi cursor limit setting.",f);this._notificationService.prompt(ZA.Warning,g,[{label:"Find and Replace",run:()=>{this._commandService.executeCommand("editor.action.startFindReplaceAction")}},{label:v("goToSetting","Increase Multi Cursor Limit"),run:()=>{this._commandService.executeCommand("workbench.action.openSettings2",{query:"editor.multiCursorLimit"})}}])}const l=[];for(let f=0,g=a.selections.length;f<g;f++)l[f]=a.selections[f].getPosition();const c={position:l[0],secondaryPositions:l.slice(1),reason:a.reason,source:a.source};this._onDidChangeCursorPosition.fire(c);const u={selection:a.selections[0],secondarySelections:a.selections.slice(1),modelVersionId:a.modelVersionId,oldSelections:a.oldSelections,oldModelVersionId:a.oldModelVersionId,source:a.source,reason:a.reason};this._onDidChangeCursorSelection.fire(u);break}case 7:this._onDidChangeModelDecorations.fire(a.event);break;case 8:this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._onDidChangeModelLanguage.fire(a.event);break;case 9:this._onDidChangeModelLanguageConfiguration.fire(a.event);break;case 10:this._onDidChangeModelContent.fire(a.event);break;case 11:this._onDidChangeModelOptions.fire(a.event);break;case 12:this._onDidChangeModelTokens.fire(a.event);break}}));const[s,r]=this._createView(n);if(r){this._domElement.appendChild(s.domNode.domNode);let a=Object.keys(this._contentWidgets);for(let l=0,c=a.length;l<c;l++){const u=a[l];s.addContentWidget(this._contentWidgets[u])}a=Object.keys(this._overlayWidgets);for(let l=0,c=a.length;l<c;l++){const u=a[l];s.addOverlayWidget(this._overlayWidgets[u])}a=Object.keys(this._glyphMarginWidgets);for(let l=0,c=a.length;l<c;l++){const u=a[l];s.addGlyphMarginWidget(this._glyphMarginWidgets[u])}s.render(!1,!0),s.domNode.domNode.setAttribute("data-uri",e.uri.toString())}this._modelData=new hNe(e,n,s,r,t,i)}_createView(e){let t;this.isSimpleWidget?t={paste:(s,r,a,l)=>{this._paste("keyboard",s,r,a,l)},type:s=>{this._type("keyboard",s)},compositionType:(s,r,a,l)=>{this._compositionType("keyboard",s,r,a,l)},startComposition:()=>{this._startComposition()},endComposition:()=>{this._endComposition("keyboard")},cut:()=>{this._cut("keyboard")}}:t={paste:(s,r,a,l)=>{const c={text:s,pasteOnNewLine:r,multicursorText:a,mode:l};this._commandService.executeCommand("paste",c)},type:s=>{const r={text:s};this._commandService.executeCommand("type",r)},compositionType:(s,r,a,l)=>{if(a||l){const c={text:s,replacePrevCharCnt:r,replaceNextCharCnt:a,positionDelta:l};this._commandService.executeCommand("compositionType",c)}else{const c={text:s,replaceCharCnt:r};this._commandService.executeCommand("replacePreviousChar",c)}},startComposition:()=>{this._commandService.executeCommand("compositionStart",{})},endComposition:()=>{this._commandService.executeCommand("compositionEnd",{})},cut:()=>{this._commandService.executeCommand("cut",{})}};const i=new jA(e.coordinatesConverter);return i.onKeyDown=s=>this._onKeyDown.fire(s),i.onKeyUp=s=>this._onKeyUp.fire(s),i.onContextMenu=s=>this._onContextMenu.fire(s),i.onMouseMove=s=>this._onMouseMove.fire(s),i.onMouseLeave=s=>this._onMouseLeave.fire(s),i.onMouseDown=s=>this._onMouseDown.fire(s),i.onMouseUp=s=>this._onMouseUp.fire(s),i.onMouseDrag=s=>this._onMouseDrag.fire(s),i.onMouseDrop=s=>this._onMouseDrop.fire(s),i.onMouseDropCanceled=s=>this._onMouseDropCanceled.fire(s),i.onMouseWheel=s=>this._onMouseWheel.fire(s),[new M9(t,this._configuration,this._themeService.getColorTheme(),e,i,this._overflowWidgetsDomNode,this._instantiationService),!0]}_postDetachModelCleanup(e){e==null||e.removeAllDecorationsWithOwnerId(this._id)}_detachModel(){var e;if((e=this._contributionsDisposable)===null||e===void 0||e.dispose(),this._contributionsDisposable=void 0,!this._modelData)return null;const t=this._modelData.model,i=this._modelData.hasRealView?this._modelData.view.domNode.domNode:null;return this._modelData.dispose(),this._modelData=null,this._domElement.removeAttribute("data-mode-id"),i&&this._domElement.contains(i)&&this._domElement.removeChild(i),this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._domElement.removeChild(this._bannerDomNode),t}_removeDecorationType(e){this._codeEditorService.removeDecorationType(e)}hasModel(){return this._modelData!==null}showDropIndicatorAt(e){const t=[{range:new A(e.lineNumber,e.column,e.lineNumber,e.column),options:H_.dropIntoEditorDecorationOptions}];this._dropIntoEditorDecorations.set(t),this.revealPosition(e,1)}removeDropIndicator(){this._dropIntoEditorDecorations.clear()}setContextValue(e,t){this._contextKeyService.createKey(e,t)}};_1.dropIntoEditorDecorationOptions=Rt.register({description:"workbench-dnd-target",className:"dnd-target"});_1=H_=dNe([Jh(3,ct),Jh(4,gi),Jh(5,Un),Jh(6,bt),Jh(7,Us),Jh(8,ys),Jh(9,mc),Jh(10,dn),Jh(11,Ze)],_1);let uNe=0,hNe=class{constructor(e,t,i,n,s,r){this.model=e,this.viewModel=t,this.view=i,this.hasRealView=n,this.listenersToRemove=s,this.attachedView=r}dispose(){cn(this.listenersToRemove),this.model.onBeforeDetached(this.attachedView),this.hasRealView&&this.view.dispose(),this.viewModel.dispose()}};class qQ extends J{constructor(e){super(),this._emitterOptions=e,this._onDidChangeToTrue=this._register(new Y(this._emitterOptions)),this.onDidChangeToTrue=this._onDidChangeToTrue.event,this._onDidChangeToFalse=this._register(new Y(this._emitterOptions)),this.onDidChangeToFalse=this._onDidChangeToFalse.event,this._value=0}setValue(e){const t=e?2:1;this._value!==t&&(this._value=t,this._value===2?this._onDidChangeToTrue.fire():this._value===1&&this._onDidChangeToFalse.fire())}}class rr extends Y{constructor(e,t){super({deliveryQueue:t}),this._contributions=e}fire(e){this._contributions.onBeforeInteractionEvent(),super.fire(e)}}class fNe extends J{constructor(e,t){super(),this._editor=e,t.createKey("editorId",e.getId()),this._editorSimpleInput=W.editorSimpleInput.bindTo(t),this._editorFocus=W.focus.bindTo(t),this._textInputFocus=W.textInputFocus.bindTo(t),this._editorTextFocus=W.editorTextFocus.bindTo(t),this._tabMovesFocus=W.tabMovesFocus.bindTo(t),this._editorReadonly=W.readOnly.bindTo(t),this._inDiffEditor=W.inDiffEditor.bindTo(t),this._editorColumnSelection=W.columnSelection.bindTo(t),this._hasMultipleSelections=W.hasMultipleSelections.bindTo(t),this._hasNonEmptySelection=W.hasNonEmptySelection.bindTo(t),this._canUndo=W.canUndo.bindTo(t),this._canRedo=W.canRedo.bindTo(t),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromConfig())),this._register(this._editor.onDidChangeCursorSelection(()=>this._updateFromSelection())),this._register(this._editor.onDidFocusEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidFocusEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidChangeModel(()=>this._updateFromModel())),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromModel())),this._register(c1.onDidChangeTabFocus(i=>this._tabMovesFocus.set(i))),this._updateFromConfig(),this._updateFromSelection(),this._updateFromFocus(),this._updateFromModel(),this._editorSimpleInput.set(this._editor.isSimpleWidget)}_updateFromConfig(){const e=this._editor.getOptions();this._tabMovesFocus.set(c1.getTabFocusMode()),this._editorReadonly.set(e.get(91)),this._inDiffEditor.set(e.get(61)),this._editorColumnSelection.set(e.get(22))}_updateFromSelection(){const e=this._editor.getSelections();e?(this._hasMultipleSelections.set(e.length>1),this._hasNonEmptySelection.set(e.some(t=>!t.isEmpty()))):(this._hasMultipleSelections.reset(),this._hasNonEmptySelection.reset())}_updateFromFocus(){this._editorFocus.set(this._editor.hasWidgetFocus()&&!this._editor.isSimpleWidget),this._editorTextFocus.set(this._editor.hasTextFocus()&&!this._editor.isSimpleWidget),this._textInputFocus.set(this._editor.hasTextFocus())}_updateFromModel(){const e=this._editor.getModel();this._canUndo.set(!!(e&&e.canUndo())),this._canRedo.set(!!(e&&e.canRedo()))}}class gNe extends J{constructor(e,t,i){super(),this._editor=e,this._contextKeyService=t,this._languageFeaturesService=i,this._langId=W.languageId.bindTo(t),this._hasCompletionItemProvider=W.hasCompletionItemProvider.bindTo(t),this._hasCodeActionsProvider=W.hasCodeActionsProvider.bindTo(t),this._hasCodeLensProvider=W.hasCodeLensProvider.bindTo(t),this._hasDefinitionProvider=W.hasDefinitionProvider.bindTo(t),this._hasDeclarationProvider=W.hasDeclarationProvider.bindTo(t),this._hasImplementationProvider=W.hasImplementationProvider.bindTo(t),this._hasTypeDefinitionProvider=W.hasTypeDefinitionProvider.bindTo(t),this._hasHoverProvider=W.hasHoverProvider.bindTo(t),this._hasDocumentHighlightProvider=W.hasDocumentHighlightProvider.bindTo(t),this._hasDocumentSymbolProvider=W.hasDocumentSymbolProvider.bindTo(t),this._hasReferenceProvider=W.hasReferenceProvider.bindTo(t),this._hasRenameProvider=W.hasRenameProvider.bindTo(t),this._hasSignatureHelpProvider=W.hasSignatureHelpProvider.bindTo(t),this._hasInlayHintsProvider=W.hasInlayHintsProvider.bindTo(t),this._hasDocumentFormattingProvider=W.hasDocumentFormattingProvider.bindTo(t),this._hasDocumentSelectionFormattingProvider=W.hasDocumentSelectionFormattingProvider.bindTo(t),this._hasMultipleDocumentFormattingProvider=W.hasMultipleDocumentFormattingProvider.bindTo(t),this._hasMultipleDocumentSelectionFormattingProvider=W.hasMultipleDocumentSelectionFormattingProvider.bindTo(t),this._isInEmbeddedEditor=W.isInEmbeddedEditor.bindTo(t);const n=()=>this._update();this._register(e.onDidChangeModel(n)),this._register(e.onDidChangeModelLanguage(n)),this._register(i.completionProvider.onDidChange(n)),this._register(i.codeActionProvider.onDidChange(n)),this._register(i.codeLensProvider.onDidChange(n)),this._register(i.definitionProvider.onDidChange(n)),this._register(i.declarationProvider.onDidChange(n)),this._register(i.implementationProvider.onDidChange(n)),this._register(i.typeDefinitionProvider.onDidChange(n)),this._register(i.hoverProvider.onDidChange(n)),this._register(i.documentHighlightProvider.onDidChange(n)),this._register(i.documentSymbolProvider.onDidChange(n)),this._register(i.referenceProvider.onDidChange(n)),this._register(i.renameProvider.onDidChange(n)),this._register(i.documentFormattingEditProvider.onDidChange(n)),this._register(i.documentRangeFormattingEditProvider.onDidChange(n)),this._register(i.signatureHelpProvider.onDidChange(n)),this._register(i.inlayHintsProvider.onDidChange(n)),n()}dispose(){super.dispose()}reset(){this._contextKeyService.bufferChangeEvents(()=>{this._langId.reset(),this._hasCompletionItemProvider.reset(),this._hasCodeActionsProvider.reset(),this._hasCodeLensProvider.reset(),this._hasDefinitionProvider.reset(),this._hasDeclarationProvider.reset(),this._hasImplementationProvider.reset(),this._hasTypeDefinitionProvider.reset(),this._hasHoverProvider.reset(),this._hasDocumentHighlightProvider.reset(),this._hasDocumentSymbolProvider.reset(),this._hasReferenceProvider.reset(),this._hasRenameProvider.reset(),this._hasDocumentFormattingProvider.reset(),this._hasDocumentSelectionFormattingProvider.reset(),this._hasSignatureHelpProvider.reset(),this._isInEmbeddedEditor.reset()})}_update(){const e=this._editor.getModel();if(!e){this.reset();return}this._contextKeyService.bufferChangeEvents(()=>{this._langId.set(e.getLanguageId()),this._hasCompletionItemProvider.set(this._languageFeaturesService.completionProvider.has(e)),this._hasCodeActionsProvider.set(this._languageFeaturesService.codeActionProvider.has(e)),this._hasCodeLensProvider.set(this._languageFeaturesService.codeLensProvider.has(e)),this._hasDefinitionProvider.set(this._languageFeaturesService.definitionProvider.has(e)),this._hasDeclarationProvider.set(this._languageFeaturesService.declarationProvider.has(e)),this._hasImplementationProvider.set(this._languageFeaturesService.implementationProvider.has(e)),this._hasTypeDefinitionProvider.set(this._languageFeaturesService.typeDefinitionProvider.has(e)),this._hasHoverProvider.set(this._languageFeaturesService.hoverProvider.has(e)),this._hasDocumentHighlightProvider.set(this._languageFeaturesService.documentHighlightProvider.has(e)),this._hasDocumentSymbolProvider.set(this._languageFeaturesService.documentSymbolProvider.has(e)),this._hasReferenceProvider.set(this._languageFeaturesService.referenceProvider.has(e)),this._hasRenameProvider.set(this._languageFeaturesService.renameProvider.has(e)),this._hasSignatureHelpProvider.set(this._languageFeaturesService.signatureHelpProvider.has(e)),this._hasInlayHintsProvider.set(this._languageFeaturesService.inlayHintsProvider.has(e)),this._hasDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.has(e)||this._languageFeaturesService.documentRangeFormattingEditProvider.has(e)),this._hasDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.has(e)),this._hasMultipleDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.all(e).length+this._languageFeaturesService.documentRangeFormattingEditProvider.all(e).length>1),this._hasMultipleDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.all(e).length>1),this._isInEmbeddedEditor.set(e.uri.scheme===Pt.walkThroughSnippet||e.uri.scheme===Pt.vscodeChatCodeBlock)})}}class pNe extends J{constructor(e,t){super(),this._onChange=this._register(new Y),this.onChange=this._onChange.event,this._hadFocus=void 0,this._hasDomElementFocus=!1,this._domFocusTracker=this._register(Kd(e)),this._overflowWidgetsDomNodeHasFocus=!1,this._register(this._domFocusTracker.onDidFocus(()=>{this._hasDomElementFocus=!0,this._update()})),this._register(this._domFocusTracker.onDidBlur(()=>{this._hasDomElementFocus=!1,this._update()})),t&&(this._overflowWidgetsDomNode=this._register(Kd(t)),this._register(this._overflowWidgetsDomNode.onDidFocus(()=>{this._overflowWidgetsDomNodeHasFocus=!0,this._update()})),this._register(this._overflowWidgetsDomNode.onDidBlur(()=>{this._overflowWidgetsDomNodeHasFocus=!1,this._update()})))}_update(){const e=this._hasDomElementFocus||this._overflowWidgetsDomNodeHasFocus;this._hadFocus!==e&&(this._hadFocus=e,this._onChange.fire(void 0))}hasFocus(){var e;return(e=this._hadFocus)!==null&&e!==void 0?e:!1}}class mNe{get length(){return this._decorationIds.length}constructor(e,t){this._editor=e,this._decorationIds=[],this._isChangingDecorations=!1,Array.isArray(t)&&t.length>0&&this.set(t)}onDidChange(e,t,i){return this._editor.onDidChangeModelDecorations(n=>{this._isChangingDecorations||e.call(t,n)},i)}getRange(e){return!this._editor.hasModel()||e>=this._decorationIds.length?null:this._editor.getModel().getDecorationRange(this._decorationIds[e])}getRanges(){if(!this._editor.hasModel())return[];const e=this._editor.getModel(),t=[];for(const i of this._decorationIds){const n=e.getDecorationRange(i);n&&t.push(n)}return t}has(e){return this._decorationIds.includes(e.id)}clear(){this._decorationIds.length!==0&&this.set([])}set(e){try{this._isChangingDecorations=!0,this._editor.changeDecorations(t=>{this._decorationIds=t.deltaDecorations(this._decorationIds,e)})}finally{this._isChangingDecorations=!1}return this._decorationIds}append(e){let t=[];try{this._isChangingDecorations=!0,this._editor.changeDecorations(i=>{t=i.deltaDecorations([],e),this._decorationIds=this._decorationIds.concat(t)})}finally{this._isChangingDecorations=!1}return t}}const _Ne=encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='"),vNe=encodeURIComponent("'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>");function P3(o){return _Ne+encodeURIComponent(o.toString())+vNe}const bNe=encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" height="3" width="12"><g fill="'),CNe=encodeURIComponent('"><circle cx="1" cy="1" r="1"/><circle cx="5" cy="1" r="1"/><circle cx="9" cy="1" r="1"/></g></svg>');function wNe(o){return bNe+encodeURIComponent(o.toString())+CNe}_c((o,e)=>{const t=o.getColor(Xu);t&&e.addRule(`.monaco-editor .squiggly-error { background: url("data:image/svg+xml,${P3(t)}") repeat-x bottom left; }`);const i=o.getColor(fr);i&&e.addRule(`.monaco-editor .squiggly-warning { background: url("data:image/svg+xml,${P3(i)}") repeat-x bottom left; }`);const n=o.getColor(fa);n&&e.addRule(`.monaco-editor .squiggly-info { background: url("data:image/svg+xml,${P3(n)}") repeat-x bottom left; }`);const s=o.getColor(MLe);s&&e.addRule(`.monaco-editor .squiggly-hint { background: url("data:image/svg+xml,${wNe(s)}") no-repeat bottom left; }`);const r=o.getColor(nke);r&&e.addRule(`.monaco-editor.showUnused .squiggly-inline-unnecessary { opacity: ${r.rgba.a}; }`)});var yNe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},SNe=function(o,e){return function(t,i){e(t,i,o)}};let Z9=class extends J{constructor(e){super(),this._themeService=e,this._onWillCreateCodeEditor=this._register(new Y),this._onCodeEditorAdd=this._register(new Y),this.onCodeEditorAdd=this._onCodeEditorAdd.event,this._onCodeEditorRemove=this._register(new Y),this.onCodeEditorRemove=this._onCodeEditorRemove.event,this._onWillCreateDiffEditor=this._register(new Y),this._onDiffEditorAdd=this._register(new Y),this.onDiffEditorAdd=this._onDiffEditorAdd.event,this._onDiffEditorRemove=this._register(new Y),this.onDiffEditorRemove=this._onDiffEditorRemove.event,this._decorationOptionProviders=new Map,this._codeEditorOpenHandlers=new Wr,this._modelProperties=new Map,this._codeEditors=Object.create(null),this._diffEditors=Object.create(null),this._globalStyleSheet=null}willCreateCodeEditor(){this._onWillCreateCodeEditor.fire()}addCodeEditor(e){this._codeEditors[e.getId()]=e,this._onCodeEditorAdd.fire(e)}removeCodeEditor(e){delete this._codeEditors[e.getId()]&&this._onCodeEditorRemove.fire(e)}listCodeEditors(){return Object.keys(this._codeEditors).map(e=>this._codeEditors[e])}willCreateDiffEditor(){this._onWillCreateDiffEditor.fire()}addDiffEditor(e){this._diffEditors[e.getId()]=e,this._onDiffEditorAdd.fire(e)}listDiffEditors(){return Object.keys(this._diffEditors).map(e=>this._diffEditors[e])}getFocusedCodeEditor(){let e=null;const t=this.listCodeEditors();for(const i of t){if(i.hasTextFocus())return i;i.hasWidgetFocus()&&(e=i)}return e}removeDecorationType(e){const t=this._decorationOptionProviders.get(e);t&&(t.refCount--,t.refCount<=0&&(this._decorationOptionProviders.delete(e),t.dispose(),this.listCodeEditors().forEach(i=>i.removeDecorationsByType(e))))}setModelProperty(e,t,i){const n=e.toString();let s;this._modelProperties.has(n)?s=this._modelProperties.get(n):(s=new Map,this._modelProperties.set(n,s)),s.set(t,i)}getModelProperty(e,t){const i=e.toString();if(this._modelProperties.has(i))return this._modelProperties.get(i).get(t)}async openCodeEditor(e,t,i){for(const n of this._codeEditorOpenHandlers){const s=await n(e,t,i);if(s!==null)return s}return null}registerCodeEditorOpenHandler(e){const t=this._codeEditorOpenHandlers.unshift(e);return lt(t)}};Z9=yNe([SNe(0,Us)],Z9);var LNe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},GQ=function(o,e){return function(t,i){e(t,i,o)}};let jR=class extends Z9{constructor(e,t){super(t),this._register(this.onCodeEditorAdd(()=>this._checkContextKey())),this._register(this.onCodeEditorRemove(()=>this._checkContextKey())),this._editorIsOpen=e.createKey("editorIsOpen",!1),this._activeCodeEditor=null,this._register(this.registerCodeEditorOpenHandler(async(i,n,s)=>n?this.doOpenEditor(n,i):null))}_checkContextKey(){let e=!1;for(const t of this.listCodeEditors())if(!t.isSimpleWidget){e=!0;break}this._editorIsOpen.set(e)}setActiveCodeEditor(e){this._activeCodeEditor=e}getActiveCodeEditor(){return this._activeCodeEditor}doOpenEditor(e,t){if(!this.findModel(e,t.resource)){if(t.resource){const s=t.resource.scheme;if(s===Pt.http||s===Pt.https)return zie(t.resource.toString()),e}return null}const n=t.options?t.options.selection:null;if(n)if(typeof n.endLineNumber=="number"&&typeof n.endColumn=="number")e.setSelection(n),e.revealRangeInCenter(n,1);else{const s={lineNumber:n.startLineNumber,column:n.startColumn};e.setPosition(s),e.revealPositionInCenter(s,1)}return e}findModel(e,t){const i=e.getModel();return i&&i.uri.toString()!==t.toString()?null:i}};jR=LNe([GQ(0,bt),GQ(1,Us)],jR);oi(gi,jR,0);const Om=Zt("layoutService");var Use=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},$se=function(o,e){return function(t,i){e(t,i,o)}};let KR=class{get mainContainer(){var e,t;return(t=(e=wV(this._codeEditorService.listCodeEditors()))===null||e===void 0?void 0:e.getContainerDomNode())!==null&&t!==void 0?t:Hi.document.body}get activeContainer(){var e,t;const i=(e=this._codeEditorService.getFocusedCodeEditor())!==null&&e!==void 0?e:this._codeEditorService.getActiveCodeEditor();return(t=i==null?void 0:i.getContainerDomNode())!==null&&t!==void 0?t:this.mainContainer}get mainContainerDimension(){return um(this.mainContainer)}get activeContainerDimension(){return um(this.activeContainer)}get containers(){return Ud(this._codeEditorService.listCodeEditors().map(e=>e.getContainerDomNode()))}getContainer(){return this.activeContainer}whenContainerStylesLoaded(){}focus(){var e;(e=this._codeEditorService.getFocusedCodeEditor())===null||e===void 0||e.focus()}constructor(e){this._codeEditorService=e,this.onDidLayoutMainContainer=Ie.None,this.onDidLayoutActiveContainer=Ie.None,this.onDidLayoutContainer=Ie.None,this.onDidChangeActiveContainer=Ie.None,this.onDidAddContainer=Ie.None,this.mainContainerOffset={top:0,quickPickTop:0},this.activeContainerOffset={top:0,quickPickTop:0}}};KR=Use([$se(0,gi)],KR);let Q9=class extends KR{get mainContainer(){return this._container}constructor(e,t){super(t),this._container=e}};Q9=Use([$se(1,gi)],Q9);oi(Om,KR,1);const XD=Zt("dialogService");var xNe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},YQ=function(o,e){return function(t,i){e(t,i,o)}};function _T(o){return o.scheme===Pt.file?o.fsPath:o.path}let jse=0;class vT{constructor(e,t,i,n,s,r,a){this.id=++jse,this.type=0,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabel=t,this.strResource=i,this.resourceLabels=[this.resourceLabel],this.strResources=[this.strResource],this.groupId=n,this.groupOrder=s,this.sourceId=r,this.sourceOrder=a,this.isValid=!0}setValid(e){this.isValid=e}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.isValid?"  VALID":"INVALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class ZQ{constructor(e,t){this.resourceLabel=e,this.reason=t}}class QQ{constructor(){this.elements=new Map}createMessage(){const e=[],t=[];for(const[,n]of this.elements)(n.reason===0?e:t).push(n.resourceLabel);const i=[];return e.length>0&&i.push(v({key:"externalRemoval",comment:["{0} is a list of filenames"]},"The following files have been closed and modified on disk: {0}.",e.join(", "))),t.length>0&&i.push(v({key:"noParallelUniverses",comment:["{0} is a list of filenames"]},"The following files have been modified in an incompatible way: {0}.",t.join(", "))),i.join(`
`)}get size(){return this.elements.size}has(e){return this.elements.has(e)}set(e,t){this.elements.set(e,t)}delete(e){return this.elements.delete(e)}}class DNe{constructor(e,t,i,n,s,r,a){this.id=++jse,this.type=1,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabels=t,this.strResources=i,this.groupId=n,this.groupOrder=s,this.sourceId=r,this.sourceOrder=a,this.removedResources=null,this.invalidatedResources=null}canSplit(){return typeof this.actual.split=="function"}removeResource(e,t,i){this.removedResources||(this.removedResources=new QQ),this.removedResources.has(t)||this.removedResources.set(t,new ZQ(e,i))}setValid(e,t,i){i?this.invalidatedResources&&(this.invalidatedResources.delete(t),this.invalidatedResources.size===0&&(this.invalidatedResources=null)):(this.invalidatedResources||(this.invalidatedResources=new QQ),this.invalidatedResources.has(t)||this.invalidatedResources.set(t,new ZQ(e,0)))}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.invalidatedResources?"INVALID":"  VALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class Kse{constructor(e,t){this.resourceLabel=e,this.strResource=t,this._past=[],this._future=[],this.locked=!1,this.versionId=1}dispose(){for(const e of this._past)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);for(const e of this._future)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);this.versionId++}toString(){const e=[];e.push(`* ${this.strResource}:`);for(let t=0;t<this._past.length;t++)e.push(`   * [UNDO] ${this._past[t]}`);for(let t=this._future.length-1;t>=0;t--)e.push(`   * [REDO] ${this._future[t]}`);return e.join(`
`)}flushAllElements(){this._past=[],this._future=[],this.versionId++}_setElementValidFlag(e,t){e.type===1?e.setValid(this.resourceLabel,this.strResource,t):e.setValid(t)}setElementsValidFlag(e,t){for(const i of this._past)t(i.actual)&&this._setElementValidFlag(i,e);for(const i of this._future)t(i.actual)&&this._setElementValidFlag(i,e)}pushElement(e){for(const t of this._future)t.type===1&&t.removeResource(this.resourceLabel,this.strResource,1);this._future=[],this._past.push(e),this.versionId++}createSnapshot(e){const t=[];for(let i=0,n=this._past.length;i<n;i++)t.push(this._past[i].id);for(let i=this._future.length-1;i>=0;i--)t.push(this._future[i].id);return new Fse(e,t)}restoreSnapshot(e){const t=e.elements.length;let i=!0,n=0,s=-1;for(let a=0,l=this._past.length;a<l;a++,n++){const c=this._past[a];i&&(n>=t||c.id!==e.elements[n])&&(i=!1,s=0),!i&&c.type===1&&c.removeResource(this.resourceLabel,this.strResource,0)}let r=-1;for(let a=this._future.length-1;a>=0;a--,n++){const l=this._future[a];i&&(n>=t||l.id!==e.elements[n])&&(i=!1,r=a),!i&&l.type===1&&l.removeResource(this.resourceLabel,this.strResource,0)}s!==-1&&(this._past=this._past.slice(0,s)),r!==-1&&(this._future=this._future.slice(r+1)),this.versionId++}getElements(){const e=[],t=[];for(const i of this._past)e.push(i.actual);for(const i of this._future)t.push(i.actual);return{past:e,future:t}}getClosestPastElement(){return this._past.length===0?null:this._past[this._past.length-1]}getSecondClosestPastElement(){return this._past.length<2?null:this._past[this._past.length-2]}getClosestFutureElement(){return this._future.length===0?null:this._future[this._future.length-1]}hasPastElements(){return this._past.length>0}hasFutureElements(){return this._future.length>0}splitPastWorkspaceElement(e,t){for(let i=this._past.length-1;i>=0;i--)if(this._past[i]===e){t.has(this.strResource)?this._past[i]=t.get(this.strResource):this._past.splice(i,1);break}this.versionId++}splitFutureWorkspaceElement(e,t){for(let i=this._future.length-1;i>=0;i--)if(this._future[i]===e){t.has(this.strResource)?this._future[i]=t.get(this.strResource):this._future.splice(i,1);break}this.versionId++}moveBackward(e){this._past.pop(),this._future.push(e),this.versionId++}moveForward(e){this._future.pop(),this._past.push(e),this.versionId++}}class O3{constructor(e){this.editStacks=e,this._versionIds=[];for(let t=0,i=this.editStacks.length;t<i;t++)this._versionIds[t]=this.editStacks[t].versionId}isValid(){for(let e=0,t=this.editStacks.length;e<t;e++)if(this._versionIds[e]!==this.editStacks[e].versionId)return!1;return!0}}const qse=new Kse("","");qse.locked=!0;let X9=class{constructor(e,t){this._dialogService=e,this._notificationService=t,this._editStacks=new Map,this._uriComparisonKeyComputers=[]}getUriComparisonKey(e){for(const t of this._uriComparisonKeyComputers)if(t[0]===e.scheme)return t[1].getComparisonKey(e);return e.toString()}_print(e){console.log("------------------------------------"),console.log(`AFTER ${e}: `);const t=[];for(const i of this._editStacks)t.push(i[1].toString());console.log(t.join(`
`))}pushElement(e,t=m1.None,i=$u.None){if(e.type===0){const n=_T(e.resource),s=this.getUriComparisonKey(e.resource);this._pushElement(new vT(e,n,s,t.id,t.nextOrder(),i.id,i.nextOrder()))}else{const n=new Set,s=[],r=[];for(const a of e.resources){const l=_T(a),c=this.getUriComparisonKey(a);n.has(c)||(n.add(c),s.push(l),r.push(c))}s.length===1?this._pushElement(new vT(e,s[0],r[0],t.id,t.nextOrder(),i.id,i.nextOrder())):this._pushElement(new DNe(e,s,r,t.id,t.nextOrder(),i.id,i.nextOrder()))}}_pushElement(e){for(let t=0,i=e.strResources.length;t<i;t++){const n=e.resourceLabels[t],s=e.strResources[t];let r;this._editStacks.has(s)?r=this._editStacks.get(s):(r=new Kse(n,s),this._editStacks.set(s,r)),r.pushElement(e)}}getLastElement(e){const t=this.getUriComparisonKey(e);if(this._editStacks.has(t)){const i=this._editStacks.get(t);if(i.hasFutureElements())return null;const n=i.getClosestPastElement();return n?n.actual:null}return null}_splitPastWorkspaceElement(e,t){const i=e.actual.split(),n=new Map;for(const s of i){const r=_T(s.resource),a=this.getUriComparisonKey(s.resource),l=new vT(s,r,a,0,0,0,0);n.set(l.strResource,l)}for(const s of e.strResources){if(t&&t.has(s))continue;this._editStacks.get(s).splitPastWorkspaceElement(e,n)}}_splitFutureWorkspaceElement(e,t){const i=e.actual.split(),n=new Map;for(const s of i){const r=_T(s.resource),a=this.getUriComparisonKey(s.resource),l=new vT(s,r,a,0,0,0,0);n.set(l.strResource,l)}for(const s of e.strResources){if(t&&t.has(s))continue;this._editStacks.get(s).splitFutureWorkspaceElement(e,n)}}removeElements(e){const t=typeof e=="string"?e:this.getUriComparisonKey(e);this._editStacks.has(t)&&(this._editStacks.get(t).dispose(),this._editStacks.delete(t))}setElementsValidFlag(e,t,i){const n=this.getUriComparisonKey(e);this._editStacks.has(n)&&this._editStacks.get(n).setElementsValidFlag(t,i)}createSnapshot(e){const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).createSnapshot(e):new Fse(e,[])}restoreSnapshot(e){const t=this.getUriComparisonKey(e.resource);if(this._editStacks.has(t)){const i=this._editStacks.get(t);i.restoreSnapshot(e),!i.hasPastElements()&&!i.hasFutureElements()&&(i.dispose(),this._editStacks.delete(t))}}getElements(e){const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).getElements():{past:[],future:[]}}_findClosestUndoElementWithSource(e){if(!e)return[null,null];let t=null,i=null;for(const[n,s]of this._editStacks){const r=s.getClosestPastElement();r&&r.sourceId===e&&(!t||r.sourceOrder>t.sourceOrder)&&(t=r,i=n)}return[t,i]}canUndo(e){if(e instanceof $u){const[,i]=this._findClosestUndoElementWithSource(e.id);return!!i}const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasPastElements():!1}_onError(e,t){Nt(e);for(const i of t.strResources)this.removeElements(i);this._notificationService.error(e)}_acquireLocks(e){for(const t of e.editStacks)if(t.locked)throw new Error("Cannot acquire edit stack lock");for(const t of e.editStacks)t.locked=!0;return()=>{for(const t of e.editStacks)t.locked=!1}}_safeInvokeWithLocks(e,t,i,n,s){const r=this._acquireLocks(i);let a;try{a=t()}catch(l){return r(),n.dispose(),this._onError(l,e)}return a?a.then(()=>(r(),n.dispose(),s()),l=>(r(),n.dispose(),this._onError(l,e))):(r(),n.dispose(),s())}async _invokeWorkspacePrepare(e){if(typeof e.actual.prepareUndoRedo>"u")return J.None;const t=e.actual.prepareUndoRedo();return typeof t>"u"?J.None:t}_invokeResourcePrepare(e,t){if(e.actual.type!==1||typeof e.actual.prepareUndoRedo>"u")return t(J.None);const i=e.actual.prepareUndoRedo();return i?IV(i)?t(i):i.then(n=>t(n)):t(J.None)}_getAffectedEditStacks(e){const t=[];for(const i of e.strResources)t.push(this._editStacks.get(i)||qse);return new O3(t)}_tryToSplitAndUndo(e,t,i,n){if(t.canSplit())return this._splitPastWorkspaceElement(t,i),this._notificationService.warn(n),new bT(this._undo(e,0,!0));for(const s of t.strResources)this.removeElements(s);return this._notificationService.warn(n),new bT}_checkWorkspaceUndo(e,t,i,n){if(t.removedResources)return this._tryToSplitAndUndo(e,t,t.removedResources,v({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(n&&t.invalidatedResources)return this._tryToSplitAndUndo(e,t,t.invalidatedResources,v({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const s=[];for(const a of i.editStacks)a.getClosestPastElement()!==t&&s.push(a.resourceLabel);if(s.length>0)return this._tryToSplitAndUndo(e,t,null,v({key:"cannotWorkspaceUndoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because changes were made to {1}",t.label,s.join(", ")));const r=[];for(const a of i.editStacks)a.locked&&r.push(a.resourceLabel);return r.length>0?this._tryToSplitAndUndo(e,t,null,v({key:"cannotWorkspaceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,r.join(", "))):i.isValid()?null:this._tryToSplitAndUndo(e,t,null,v({key:"cannotWorkspaceUndoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceUndo(e,t,i){const n=this._getAffectedEditStacks(t),s=this._checkWorkspaceUndo(e,t,n,!1);return s?s.returnValue:this._confirmAndExecuteWorkspaceUndo(e,t,n,i)}_isPartOfUndoGroup(e){if(!e.groupId)return!1;for(const[,t]of this._editStacks){const i=t.getClosestPastElement();if(i){if(i===e){const n=t.getSecondClosestPastElement();if(n&&n.groupId===e.groupId)return!0}if(i.groupId===e.groupId)return!0}}return!1}async _confirmAndExecuteWorkspaceUndo(e,t,i,n){if(t.canSplit()&&!this._isPartOfUndoGroup(t)){let a;(function(u){u[u.All=0]="All",u[u.This=1]="This",u[u.Cancel=2]="Cancel"})(a||(a={}));const{result:l}=await this._dialogService.prompt({type:cs.Info,message:v("confirmWorkspace","Would you like to undo '{0}' across all files?",t.label),buttons:[{label:v({key:"ok",comment:["{0} denotes a number that is > 1, && denotes a mnemonic"]},"&&Undo in {0} Files",i.editStacks.length),run:()=>a.All},{label:v({key:"nok",comment:["&& denotes a mnemonic"]},"Undo this &&File"),run:()=>a.This}],cancelButton:{run:()=>a.Cancel}});if(l===a.Cancel)return;if(l===a.This)return this._splitPastWorkspaceElement(t,null),this._undo(e,0,!0);const c=this._checkWorkspaceUndo(e,t,i,!1);if(c)return c.returnValue;n=!0}let s;try{s=await this._invokeWorkspacePrepare(t)}catch(a){return this._onError(a,t)}const r=this._checkWorkspaceUndo(e,t,i,!0);if(r)return s.dispose(),r.returnValue;for(const a of i.editStacks)a.moveBackward(t);return this._safeInvokeWithLocks(t,()=>t.actual.undo(),i,s,()=>this._continueUndoInGroup(t.groupId,n))}_resourceUndo(e,t,i){if(!t.isValid){e.flushAllElements();return}if(e.locked){const n=v({key:"cannotResourceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not undo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(n);return}return this._invokeResourcePrepare(t,n=>(e.moveBackward(t),this._safeInvokeWithLocks(t,()=>t.actual.undo(),new O3([e]),n,()=>this._continueUndoInGroup(t.groupId,i))))}_findClosestUndoElementInGroup(e){if(!e)return[null,null];let t=null,i=null;for(const[n,s]of this._editStacks){const r=s.getClosestPastElement();r&&r.groupId===e&&(!t||r.groupOrder>t.groupOrder)&&(t=r,i=n)}return[t,i]}_continueUndoInGroup(e,t){if(!e)return;const[,i]=this._findClosestUndoElementInGroup(e);if(i)return this._undo(i,0,t)}undo(e){if(e instanceof $u){const[,t]=this._findClosestUndoElementWithSource(e.id);return t?this._undo(t,e.id,!1):void 0}return typeof e=="string"?this._undo(e,0,!1):this._undo(this.getUriComparisonKey(e),0,!1)}_undo(e,t=0,i){if(!this._editStacks.has(e))return;const n=this._editStacks.get(e),s=n.getClosestPastElement();if(!s)return;if(s.groupId){const[a,l]=this._findClosestUndoElementInGroup(s.groupId);if(s!==a&&l)return this._undo(l,t,i)}if((s.sourceId!==t||s.confirmBeforeUndo)&&!i)return this._confirmAndContinueUndo(e,t,s);try{return s.type===1?this._workspaceUndo(e,s,i):this._resourceUndo(n,s,i)}finally{}}async _confirmAndContinueUndo(e,t,i){if((await this._dialogService.confirm({message:v("confirmDifferentSource","Would you like to undo '{0}'?",i.label),primaryButton:v({key:"confirmDifferentSource.yes",comment:["&& denotes a mnemonic"]},"&&Yes"),cancelButton:v("confirmDifferentSource.no","No")})).confirmed)return this._undo(e,t,!0)}_findClosestRedoElementWithSource(e){if(!e)return[null,null];let t=null,i=null;for(const[n,s]of this._editStacks){const r=s.getClosestFutureElement();r&&r.sourceId===e&&(!t||r.sourceOrder<t.sourceOrder)&&(t=r,i=n)}return[t,i]}canRedo(e){if(e instanceof $u){const[,i]=this._findClosestRedoElementWithSource(e.id);return!!i}const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasFutureElements():!1}_tryToSplitAndRedo(e,t,i,n){if(t.canSplit())return this._splitFutureWorkspaceElement(t,i),this._notificationService.warn(n),new bT(this._redo(e));for(const s of t.strResources)this.removeElements(s);return this._notificationService.warn(n),new bT}_checkWorkspaceRedo(e,t,i,n){if(t.removedResources)return this._tryToSplitAndRedo(e,t,t.removedResources,v({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(n&&t.invalidatedResources)return this._tryToSplitAndRedo(e,t,t.invalidatedResources,v({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const s=[];for(const a of i.editStacks)a.getClosestFutureElement()!==t&&s.push(a.resourceLabel);if(s.length>0)return this._tryToSplitAndRedo(e,t,null,v({key:"cannotWorkspaceRedoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because changes were made to {1}",t.label,s.join(", ")));const r=[];for(const a of i.editStacks)a.locked&&r.push(a.resourceLabel);return r.length>0?this._tryToSplitAndRedo(e,t,null,v({key:"cannotWorkspaceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,r.join(", "))):i.isValid()?null:this._tryToSplitAndRedo(e,t,null,v({key:"cannotWorkspaceRedoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceRedo(e,t){const i=this._getAffectedEditStacks(t),n=this._checkWorkspaceRedo(e,t,i,!1);return n?n.returnValue:this._executeWorkspaceRedo(e,t,i)}async _executeWorkspaceRedo(e,t,i){let n;try{n=await this._invokeWorkspacePrepare(t)}catch(r){return this._onError(r,t)}const s=this._checkWorkspaceRedo(e,t,i,!0);if(s)return n.dispose(),s.returnValue;for(const r of i.editStacks)r.moveForward(t);return this._safeInvokeWithLocks(t,()=>t.actual.redo(),i,n,()=>this._continueRedoInGroup(t.groupId))}_resourceRedo(e,t){if(!t.isValid){e.flushAllElements();return}if(e.locked){const i=v({key:"cannotResourceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not redo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(i);return}return this._invokeResourcePrepare(t,i=>(e.moveForward(t),this._safeInvokeWithLocks(t,()=>t.actual.redo(),new O3([e]),i,()=>this._continueRedoInGroup(t.groupId))))}_findClosestRedoElementInGroup(e){if(!e)return[null,null];let t=null,i=null;for(const[n,s]of this._editStacks){const r=s.getClosestFutureElement();r&&r.groupId===e&&(!t||r.groupOrder<t.groupOrder)&&(t=r,i=n)}return[t,i]}_continueRedoInGroup(e){if(!e)return;const[,t]=this._findClosestRedoElementInGroup(e);if(t)return this._redo(t)}redo(e){if(e instanceof $u){const[,t]=this._findClosestRedoElementWithSource(e.id);return t?this._redo(t):void 0}return typeof e=="string"?this._redo(e):this._redo(this.getUriComparisonKey(e))}_redo(e){if(!this._editStacks.has(e))return;const t=this._editStacks.get(e),i=t.getClosestFutureElement();if(i){if(i.groupId){const[n,s]=this._findClosestRedoElementInGroup(i.groupId);if(i!==n&&s)return this._redo(s)}try{return i.type===1?this._workspaceRedo(e,i):this._resourceRedo(t,i)}finally{}}}};X9=xNe([YQ(0,XD),YQ(1,ys)],X9);class bT{constructor(e){this.returnValue=e}}oi(YA,X9,1);function Tr(o,e,t){return Math.min(Math.max(o,e),t)}class Gse{constructor(){this._n=1,this._val=0}update(e){return this._val=this._val+(e-this._val)/this._n,this._n+=1,this._val}get value(){return this._val}}class kNe{constructor(e){this._n=0,this._val=0,this._values=[],this._index=0,this._sum=0,this._values=new Array(e),this._values.fill(0,0,e)}update(e){const t=this._values[this._index];return this._values[this._index]=e,this._index=(this._index+1)%this._values.length,this._sum-=t,this._sum+=e,this._n<this._values.length&&(this._n+=1),this._val=this._sum/this._n,this._val}get value(){return this._val}}const GH=Zt("environmentService");var ENe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},XQ=function(o,e){return function(t,i){e(t,i,o)}};const vc=Zt("ILanguageFeatureDebounceService");var qR;(function(o){const e=new WeakMap;let t=0;function i(n){let s=e.get(n);return s===void 0&&(s=++t,e.set(n,s)),s}o.of=i})(qR||(qR={}));class INe{constructor(e){this._default=e}get(e){return this._default}update(e,t){return this._default}default(){return this._default}}class TNe{constructor(e,t,i,n,s,r){this._logService=e,this._name=t,this._registry=i,this._default=n,this._min=s,this._max=r,this._cache=new Dh(50,.7)}_key(e){return e.id+this._registry.all(e).reduce((t,i)=>fA(qR.of(i),t),0)}get(e){const t=this._key(e),i=this._cache.get(t);return i?Tr(i.value,this._min,this._max):this.default()}update(e,t){const i=this._key(e);let n=this._cache.get(i);n||(n=new kNe(6),this._cache.set(i,n));const s=Tr(n.update(t),this._min,this._max);return KV(e.uri,"output")||this._logService.trace(`[DEBOUNCE: ${this._name}] for ${e.uri.toString()} is ${s}ms`),s}_overall(){const e=new Gse;for(const[,t]of this._cache)e.update(t.value);return e.value}default(){const e=this._overall()|0||this._default;return Tr(e,this._min,this._max)}}let J9=class{constructor(e,t){this._logService=e,this._data=new Map,this._isDev=t.isExtensionDevelopment||!t.isBuilt}for(e,t,i){var n,s,r;const a=(n=i==null?void 0:i.min)!==null&&n!==void 0?n:50,l=(s=i==null?void 0:i.max)!==null&&s!==void 0?s:a**2,c=(r=i==null?void 0:i.key)!==null&&r!==void 0?r:void 0,u=`${qR.of(e)},${a}${c?","+c:""}`;let f=this._data.get(u);return f||(this._isDev?f=new TNe(this._logService,t,e,this._overallAverage()|0||a*1.5,a,l):(this._logService.debug(`[DEBOUNCE: ${t}] is disabled in developed mode`),f=new INe(a*1.5)),this._data.set(u,f)),f}_overallAverage(){const e=new Gse;for(const t of this._data.values())e.update(t.default());return e.value}};J9=ENe([XQ(0,mr),XQ(1,GH)],J9);oi(vc,J9,1);class NL{static create(e,t){return new NL(e,new GR(t))}get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._endLineNumber}constructor(e,t){this._startLineNumber=e,this._tokens=t,this._endLineNumber=this._startLineNumber+this._tokens.getMaxDeltaLine()}toString(){return this._tokens.toString(this._startLineNumber)}_updateEndLineNumber(){this._endLineNumber=this._startLineNumber+this._tokens.getMaxDeltaLine()}isEmpty(){return this._tokens.isEmpty()}getLineTokens(e){return this._startLineNumber<=e&&e<=this._endLineNumber?this._tokens.getLineTokens(e-this._startLineNumber):null}getRange(){const e=this._tokens.getRange();return e&&new A(this._startLineNumber+e.startLineNumber,e.startColumn,this._startLineNumber+e.endLineNumber,e.endColumn)}removeTokens(e){const t=e.startLineNumber-this._startLineNumber,i=e.endLineNumber-this._startLineNumber;this._startLineNumber+=this._tokens.removeTokens(t,e.startColumn-1,i,e.endColumn-1),this._updateEndLineNumber()}split(e){const t=e.startLineNumber-this._startLineNumber,i=e.endLineNumber-this._startLineNumber,[n,s,r]=this._tokens.split(t,e.startColumn-1,i,e.endColumn-1);return[new NL(this._startLineNumber,n),new NL(this._startLineNumber+r,s)]}applyEdit(e,t){const[i,n,s]=pm(t);this.acceptEdit(e,i,n,s,t.length>0?t.charCodeAt(0):0)}acceptEdit(e,t,i,n,s){this._acceptDeleteRange(e),this._acceptInsertText(new Z(e.startLineNumber,e.startColumn),t,i,n,s),this._updateEndLineNumber()}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return;const t=e.startLineNumber-this._startLineNumber,i=e.endLineNumber-this._startLineNumber;if(i<0){const s=i-t;this._startLineNumber-=s;return}const n=this._tokens.getMaxDeltaLine();if(!(t>=n+1)){if(t<0&&i>=n+1){this._startLineNumber=0,this._tokens.clear();return}if(t<0){const s=-t;this._startLineNumber-=s,this._tokens.acceptDeleteRange(e.startColumn-1,0,0,i,e.endColumn-1)}else this._tokens.acceptDeleteRange(0,t,e.startColumn-1,i,e.endColumn-1)}}_acceptInsertText(e,t,i,n,s){if(t===0&&i===0)return;const r=e.lineNumber-this._startLineNumber;if(r<0){this._startLineNumber+=t;return}const a=this._tokens.getMaxDeltaLine();r>=a+1||this._tokens.acceptInsertText(r,e.column-1,t,i,n,s)}}class GR{constructor(e){this._tokens=e,this._tokenCount=e.length/4}toString(e){const t=[];for(let i=0;i<this._tokenCount;i++)t.push(`(${this._getDeltaLine(i)+e},${this._getStartCharacter(i)}-${this._getEndCharacter(i)})`);return`[${t.join(",")}]`}getMaxDeltaLine(){const e=this._getTokenCount();return e===0?-1:this._getDeltaLine(e-1)}getRange(){const e=this._getTokenCount();if(e===0)return null;const t=this._getStartCharacter(0),i=this._getDeltaLine(e-1),n=this._getEndCharacter(e-1);return new A(0,t+1,i,n+1)}_getTokenCount(){return this._tokenCount}_getDeltaLine(e){return this._tokens[4*e]}_getStartCharacter(e){return this._tokens[4*e+1]}_getEndCharacter(e){return this._tokens[4*e+2]}isEmpty(){return this._getTokenCount()===0}getLineTokens(e){let t=0,i=this._getTokenCount()-1;for(;t<i;){const n=t+Math.floor((i-t)/2),s=this._getDeltaLine(n);if(s<e)t=n+1;else if(s>e)i=n-1;else{let r=n;for(;r>t&&this._getDeltaLine(r-1)===e;)r--;let a=n;for(;a<i&&this._getDeltaLine(a+1)===e;)a++;return new JQ(this._tokens.subarray(4*r,4*a+4))}}return this._getDeltaLine(t)===e?new JQ(this._tokens.subarray(4*t,4*t+4)):null}clear(){this._tokenCount=0}removeTokens(e,t,i,n){const s=this._tokens,r=this._tokenCount;let a=0,l=!1,c=0;for(let u=0;u<r;u++){const f=4*u,g=s[f],p=s[f+1],_=s[f+2],b=s[f+3];if((g>e||g===e&&_>=t)&&(g<i||g===i&&p<=n))l=!0;else{if(a===0&&(c=g),l){const y=4*a;s[y]=g-c,s[y+1]=p,s[y+2]=_,s[y+3]=b}a++}}return this._tokenCount=a,c}split(e,t,i,n){const s=this._tokens,r=this._tokenCount,a=[],l=[];let c=a,u=0,f=0;for(let g=0;g<r;g++){const p=4*g,_=s[p],b=s[p+1],y=s[p+2],S=s[p+3];if(_>e||_===e&&y>=t){if(_<i||_===i&&b<=n)continue;c!==l&&(c=l,u=0,f=_)}c[u++]=_-f,c[u++]=b,c[u++]=y,c[u++]=S}return[new GR(new Uint32Array(a)),new GR(new Uint32Array(l)),f]}acceptDeleteRange(e,t,i,n,s){const r=this._tokens,a=this._tokenCount,l=n-t;let c=0,u=!1;for(let f=0;f<a;f++){const g=4*f;let p=r[g],_=r[g+1],b=r[g+2];const y=r[g+3];if(p<t||p===t&&b<=i){c++;continue}else if(p===t&&_<i)p===n&&b>s?b-=s-i:b=i;else if(p===t&&_===i)if(p===n&&b>s)b-=s-i;else{u=!0;continue}else if(p<n||p===n&&_<s)if(p===n&&b>s)p=t,_=i,b=_+(b-s);else{u=!0;continue}else if(p>n){if(l===0&&!u){c=a;break}p-=l}else if(p===n&&_>=s)e&&p===0&&(_+=e,b+=e),p-=l,_-=s-i,b-=s-i;else throw new Error("Not possible!");const S=4*c;r[S]=p,r[S+1]=_,r[S+2]=b,r[S+3]=y,c++}this._tokenCount=c}acceptInsertText(e,t,i,n,s,r){const a=i===0&&n===1&&(r>=48&&r<=57||r>=65&&r<=90||r>=97&&r<=122),l=this._tokens,c=this._tokenCount;for(let u=0;u<c;u++){const f=4*u;let g=l[f],p=l[f+1],_=l[f+2];if(!(g<e||g===e&&_<t)){if(g===e&&_===t)if(a)_+=1;else continue;else if(g===e&&p<t&&t<_)i===0?_+=n:_=t;else{if(g===e&&p===t&&a)continue;if(g===e)if(g+=i,i===0)p+=n,_+=n;else{const b=_-p;p=s+(p-t),_=p+b}else g+=i}l[f]=g,l[f+1]=p,l[f+2]=_}}}}class JQ{constructor(e){this._tokens=e}getCount(){return this._tokens.length/4}getStartCharacter(e){return this._tokens[4*e+1]}getEndCharacter(e){return this._tokens[4*e+2]}getMetadata(e){return this._tokens[4*e+3]}}var NNe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},F3=function(o,e){return function(t,i){e(t,i,o)}};let e8=class{constructor(e,t,i,n){this._legend=e,this._themeService=t,this._languageService=i,this._logService=n,this._hasWarnedOverlappingTokens=!1,this._hasWarnedInvalidLengthTokens=!1,this._hasWarnedInvalidEditStart=!1,this._hashTable=new _f}getMetadata(e,t,i){const n=this._languageService.languageIdCodec.encodeLanguageId(i),s=this._hashTable.get(e,t,n);let r;if(s)r=s.metadata,this._logService.getLevel()===Io.Trace&&this._logService.trace(`SemanticTokensProviderStyling [CACHED] ${e} / ${t}: foreground ${To.getForeground(r)}, fontStyle ${To.getFontStyle(r).toString(2)}`);else{let a=this._legend.tokenTypes[e];const l=[];if(a){let c=t;for(let f=0;c>0&&f<this._legend.tokenModifiers.length;f++)c&1&&l.push(this._legend.tokenModifiers[f]),c=c>>1;c>0&&this._logService.getLevel()===Io.Trace&&(this._logService.trace(`SemanticTokensProviderStyling: unknown token modifier index: ${t.toString(2)} for legend: ${JSON.stringify(this._legend.tokenModifiers)}`),l.push("not-in-legend"));const u=this._themeService.getColorTheme().getTokenStyleMetadata(a,l,i);if(typeof u>"u")r=2147483647;else{if(r=0,typeof u.italic<"u"){const f=(u.italic?1:0)<<11;r|=f|1}if(typeof u.bold<"u"){const f=(u.bold?2:0)<<11;r|=f|2}if(typeof u.underline<"u"){const f=(u.underline?4:0)<<11;r|=f|4}if(typeof u.strikethrough<"u"){const f=(u.strikethrough?8:0)<<11;r|=f|8}if(u.foreground){const f=u.foreground<<15;r|=f|16}r===0&&(r=2147483647)}}else this._logService.getLevel()===Io.Trace&&this._logService.trace(`SemanticTokensProviderStyling: unknown token type index: ${e} for legend: ${JSON.stringify(this._legend.tokenTypes)}`),r=2147483647,a="not-in-legend";this._hashTable.add(e,t,n,r),this._logService.getLevel()===Io.Trace&&this._logService.trace(`SemanticTokensProviderStyling ${e} (${a}) / ${t} (${l.join(" ")}): foreground ${To.getForeground(r)}, fontStyle ${To.getFontStyle(r).toString(2)}`)}return r}warnOverlappingSemanticTokens(e,t){this._hasWarnedOverlappingTokens||(this._hasWarnedOverlappingTokens=!0,this._logService.warn(`Overlapping semantic tokens detected at lineNumber ${e}, column ${t}`))}warnInvalidLengthSemanticTokens(e,t){this._hasWarnedInvalidLengthTokens||(this._hasWarnedInvalidLengthTokens=!0,this._logService.warn(`Semantic token with invalid length detected at lineNumber ${e}, column ${t}`))}warnInvalidEditStart(e,t,i,n,s){this._hasWarnedInvalidEditStart||(this._hasWarnedInvalidEditStart=!0,this._logService.warn(`Invalid semantic tokens edit detected (previousResultId: ${e}, resultId: ${t}) at edit #${i}: The provided start offset ${n} is outside the previous data (length ${s}).`))}};e8=NNe([F3(1,Us),F3(2,xn),F3(3,mr)],e8);function Yse(o,e,t){const i=o.data,n=o.data.length/5|0,s=Math.max(Math.ceil(n/1024),400),r=[];let a=0,l=1,c=0;for(;a<n;){const u=a;let f=Math.min(u+s,n);if(f<n){let L=f;for(;L-1>u&&i[5*L]===0;)L--;if(L-1===u){let x=f;for(;x+1<n&&i[5*x]===0;)x++;f=x}else f=L}let g=new Uint32Array((f-u)*4),p=0,_=0,b=0,y=0;for(;a<f;){const L=5*a,x=i[L],D=i[L+1],E=l+x|0,N=x===0?c+D|0:D,M=i[L+2],F=N+M|0,H=i[L+3],Q=i[L+4];if(F<=N)e.warnInvalidLengthSemanticTokens(E,N+1);else if(b===E&&y>N)e.warnOverlappingSemanticTokens(E,N+1);else{const K=e.getMetadata(H,Q,t);K!==2147483647&&(_===0&&(_=E),g[p]=E-_,g[p+1]=N,g[p+2]=F,g[p+3]=K,p+=4,b=E,y=F)}l=E,c=N,a++}p!==g.length&&(g=g.subarray(0,p));const S=NL.create(_,g);r.push(S)}return r}class RNe{constructor(e,t,i,n){this.tokenTypeIndex=e,this.tokenModifierSet=t,this.languageId=i,this.metadata=n,this.next=null}}class _f{constructor(){this._elementsCount=0,this._currentLengthIndex=0,this._currentLength=_f._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<_f._SIZES.length?2/3*this._currentLength:0),this._elements=[],_f._nullOutEntries(this._elements,this._currentLength)}static _nullOutEntries(e,t){for(let i=0;i<t;i++)e[i]=null}_hash2(e,t){return(e<<5)-e+t|0}_hashFunc(e,t,i){return this._hash2(this._hash2(e,t),i)%this._currentLength}get(e,t,i){const n=this._hashFunc(e,t,i);let s=this._elements[n];for(;s;){if(s.tokenTypeIndex===e&&s.tokenModifierSet===t&&s.languageId===i)return s;s=s.next}return null}add(e,t,i,n){if(this._elementsCount++,this._growCount!==0&&this._elementsCount>=this._growCount){const s=this._elements;this._currentLengthIndex++,this._currentLength=_f._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<_f._SIZES.length?2/3*this._currentLength:0),this._elements=[],_f._nullOutEntries(this._elements,this._currentLength);for(const r of s){let a=r;for(;a;){const l=a.next;a.next=null,this._add(a),a=l}}}this._add(new RNe(e,t,i,n))}_add(e){const t=this._hashFunc(e.tokenTypeIndex,e.tokenModifierSet,e.languageId);e.next=this._elements[t],this._elements[t]=e}}_f._SIZES=[3,7,13,31,61,127,251,509,1021,2039,4093,8191,16381,32749,65521,131071,262139,524287,1048573,2097143];const QA=Zt("semanticTokensStylingService");var MNe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},B3=function(o,e){return function(t,i){e(t,i,o)}};let t8=class extends J{constructor(e,t,i){super(),this._themeService=e,this._logService=t,this._languageService=i,this._caches=new WeakMap,this._register(this._themeService.onDidColorThemeChange(()=>{this._caches=new WeakMap}))}getStyling(e){return this._caches.has(e)||this._caches.set(e,new e8(e.getLegend(),this._themeService,this._languageService,this._logService)),this._caches.get(e)}};t8=MNe([B3(0,Us),B3(1,mr),B3(2,xn)],t8);oi(QA,t8,1);const CT="**",eX="/",TN="[/\\\\]",NN="[^/\\\\]",ANe=/\//g;function tX(o,e){switch(o){case 0:return"";case 1:return`${NN}*?`;default:return`(?:${TN}|${NN}+${TN}${e?`|${TN}${NN}+`:""})*?`}}function iX(o,e){if(!o)return[];const t=[];let i=!1,n=!1,s="";for(const r of o){switch(r){case e:if(!i&&!n){t.push(s),s="";continue}break;case"{":i=!0;break;case"}":i=!1;break;case"[":n=!0;break;case"]":n=!1;break}s+=r}return s&&t.push(s),t}function Zse(o){if(!o)return"";let e="";const t=iX(o,eX);if(t.every(i=>i===CT))e=".*";else{let i=!1;t.forEach((n,s)=>{if(n===CT){if(i)return;e+=tX(2,s===t.length-1)}else{let r=!1,a="",l=!1,c="";for(const u of n){if(u!=="}"&&r){a+=u;continue}if(l&&(u!=="]"||!c)){let f;u==="-"?f=u:(u==="^"||u==="!")&&!c?f="^":u===eX?f="":f=Ll(u),c+=f;continue}switch(u){case"{":r=!0;continue;case"[":l=!0;continue;case"}":{const g=`(?:${iX(a,",").map(p=>Zse(p)).join("|")})`;e+=g,r=!1,a="";break}case"]":{e+="["+c+"]",l=!1,c="";break}case"?":e+=NN;continue;case"*":e+=tX(1);continue;default:e+=Ll(u)}}s<t.length-1&&(t[s+1]!==CT||s+2<t.length)&&(e+=TN)}i=n===CT})}return e}const PNe=/^\*\*\/\*\.[\w\.-]+$/,ONe=/^\*\*\/([\w\.-]+)\/?$/,FNe=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,BNe=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,WNe=/^\*\*((\/[\w\.-]+)+)\/?$/,VNe=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,nX=new Dh(1e4),sX=function(){return!1},ah=function(){return null};function YH(o,e){if(!o)return ah;let t;typeof o!="string"?t=o.pattern:t=o,t=t.trim();const i=`${t}_${!!e.trimForExclusions}`;let n=nX.get(i);if(n)return oX(n,o);let s;return PNe.test(t)?n=HNe(t.substr(4),t):(s=ONe.exec(W3(t,e)))?n=zNe(s[1],t):(e.trimForExclusions?BNe:FNe).test(t)?n=UNe(t,e):(s=WNe.exec(W3(t,e)))?n=rX(s[1].substr(1),t,!0):(s=VNe.exec(W3(t,e)))?n=rX(s[1],t,!1):n=$Ne(t),nX.set(i,n),oX(n,o)}function oX(o,e){if(typeof e=="string")return o;const t=function(i,n){return W9(i,e.base,!jr)?o(MD(i.substr(e.base.length),Fd),n):null};return t.allBasenames=o.allBasenames,t.allPaths=o.allPaths,t.basenames=o.basenames,t.patterns=o.patterns,t}function W3(o,e){return e.trimForExclusions&&o.endsWith("/**")?o.substr(0,o.length-2):o}function HNe(o,e){return function(t,i){return typeof t=="string"&&t.endsWith(o)?e:null}}function zNe(o,e){const t=`/${o}`,i=`\\${o}`,n=function(r,a){return typeof r!="string"?null:a?a===o?e:null:r===o||r.endsWith(t)||r.endsWith(i)?e:null},s=[o];return n.basenames=s,n.patterns=[e],n.allBasenames=s,n}function UNe(o,e){const t=Xse(o.slice(1,-1).split(",").map(a=>YH(a,e)).filter(a=>a!==ah),o),i=t.length;if(!i)return ah;if(i===1)return t[0];const n=function(a,l){for(let c=0,u=t.length;c<u;c++)if(t[c](a,l))return o;return null},s=t.find(a=>!!a.allBasenames);s&&(n.allBasenames=s.allBasenames);const r=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return r.length&&(n.allPaths=r),n}function rX(o,e,t){const i=Fd===Es.sep,n=i?o:o.replace(ANe,Fd),s=Fd+n,r=Es.sep+o;let a;return t?a=function(l,c){return typeof l=="string"&&(l===n||l.endsWith(s)||!i&&(l===o||l.endsWith(r)))?e:null}:a=function(l,c){return typeof l=="string"&&(l===n||!i&&l===o)?e:null},a.allPaths=[(t?"*/":"./")+o],a}function $Ne(o){try{const e=new RegExp(`^${Zse(o)}$`);return function(t){return e.lastIndex=0,typeof t=="string"&&e.test(t)?o:null}}catch{return ah}}function jNe(o,e,t){return!o||typeof e!="string"?!1:Qse(o)(e,void 0,t)}function Qse(o,e={}){if(!o)return sX;if(typeof o=="string"||KNe(o)){const t=YH(o,e);if(t===ah)return sX;const i=function(n,s){return!!t(n,s)};return t.allBasenames&&(i.allBasenames=t.allBasenames),t.allPaths&&(i.allPaths=t.allPaths),i}return qNe(o,e)}function KNe(o){const e=o;return e?typeof e.base=="string"&&typeof e.pattern=="string":!1}function qNe(o,e){const t=Xse(Object.getOwnPropertyNames(o).map(a=>GNe(a,o[a],e)).filter(a=>a!==ah)),i=t.length;if(!i)return ah;if(!t.some(a=>!!a.requiresSiblings)){if(i===1)return t[0];const a=function(u,f){let g;for(let p=0,_=t.length;p<_;p++){const b=t[p](u,f);if(typeof b=="string")return b;Q7(b)&&(g||(g=[]),g.push(b))}return g?(async()=>{for(const p of g){const _=await p;if(typeof _=="string")return _}return null})():null},l=t.find(u=>!!u.allBasenames);l&&(a.allBasenames=l.allBasenames);const c=t.reduce((u,f)=>f.allPaths?u.concat(f.allPaths):u,[]);return c.length&&(a.allPaths=c),a}const n=function(a,l,c){let u,f;for(let g=0,p=t.length;g<p;g++){const _=t[g];_.requiresSiblings&&c&&(l||(l=jp(a)),u||(u=l.substr(0,l.length-rCe(a).length)));const b=_(a,l,u,c);if(typeof b=="string")return b;Q7(b)&&(f||(f=[]),f.push(b))}return f?(async()=>{for(const g of f){const p=await g;if(typeof p=="string")return p}return null})():null},s=t.find(a=>!!a.allBasenames);s&&(n.allBasenames=s.allBasenames);const r=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return r.length&&(n.allPaths=r),n}function GNe(o,e,t){if(e===!1)return ah;const i=YH(o,t);if(i===ah)return ah;if(typeof e=="boolean")return i;if(e){const n=e.when;if(typeof n=="string"){const s=(r,a,l,c)=>{if(!c||!i(r,a))return null;const u=n.replace("$(basename)",()=>l),f=c(u);return Q7(f)?f.then(g=>g?o:null):f?o:null};return s.requiresSiblings=!0,s}}return i}function Xse(o,e){const t=o.filter(a=>!!a.basenames);if(t.length<2)return o;const i=t.reduce((a,l)=>{const c=l.basenames;return c?a.concat(c):a},[]);let n;if(e){n=[];for(let a=0,l=i.length;a<l;a++)n.push(e)}else n=t.reduce((a,l)=>{const c=l.patterns;return c?a.concat(c):a},[]);const s=function(a,l){if(typeof a!="string")return null;if(!l){let u;for(u=a.length;u>0;u--){const f=a.charCodeAt(u-1);if(f===47||f===92)break}l=a.substr(u)}const c=i.indexOf(l);return c!==-1?n[c]:null};s.basenames=i,s.patterns=n,s.allBasenames=i;const r=o.filter(a=>!a.basenames);return r.push(s),r}function ZH(o,e,t,i,n,s){if(Array.isArray(o)){let r=0;for(const a of o){const l=ZH(a,e,t,i,n,s);if(l===10)return l;l>r&&(r=l)}return r}else{if(typeof o=="string")return i?o==="*"?5:o===t?10:0:0;if(o){const{language:r,pattern:a,scheme:l,hasAccessToAllModels:c,notebookType:u}=o;if(!i&&!c)return 0;u&&n&&(e=n);let f=0;if(l)if(l===e.scheme)f=10;else if(l==="*")f=5;else return 0;if(r)if(r===t)f=10;else if(r==="*")f=Math.max(f,5);else return 0;if(u)if(u===s)f=10;else if(u==="*"&&s!==void 0)f=Math.max(f,5);else return 0;if(a){let g;if(typeof a=="string"?g=a:g={...a,base:iie(a.base)},g===e.fsPath||jNe(g,e.fsPath))f=10;else return 0}return f}else return 0}}function Jse(o){return typeof o=="string"?!1:Array.isArray(o)?o.every(Jse):!!o.exclusive}class aX{constructor(e,t,i,n){this.uri=e,this.languageId=t,this.notebookUri=i,this.notebookType=n}equals(e){var t,i;return this.notebookType===e.notebookType&&this.languageId===e.languageId&&this.uri.toString()===e.uri.toString()&&((t=this.notebookUri)===null||t===void 0?void 0:t.toString())===((i=e.notebookUri)===null||i===void 0?void 0:i.toString())}}class An{constructor(e){this._notebookInfoResolver=e,this._clock=0,this._entries=[],this._onDidChange=new Y,this.onDidChange=this._onDidChange.event}register(e,t){let i={selector:e,provider:t,_score:-1,_time:this._clock++};return this._entries.push(i),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),lt(()=>{if(i){const n=this._entries.indexOf(i);n>=0&&(this._entries.splice(n,1),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),i=void 0)}})}has(e){return this.all(e).length>0}all(e){if(!e)return[];this._updateScores(e);const t=[];for(const i of this._entries)i._score>0&&t.push(i.provider);return t}ordered(e){const t=[];return this._orderedForEach(e,i=>t.push(i.provider)),t}orderedGroups(e){const t=[];let i,n;return this._orderedForEach(e,s=>{i&&n===s._score?i.push(s.provider):(n=s._score,i=[s.provider],t.push(i))}),t}_orderedForEach(e,t){this._updateScores(e);for(const i of this._entries)i._score>0&&t(i)}_updateScores(e){var t,i;const n=(t=this._notebookInfoResolver)===null||t===void 0?void 0:t.call(this,e.uri),s=n?new aX(e.uri,e.getLanguageId(),n.uri,n.type):new aX(e.uri,e.getLanguageId(),void 0,void 0);if(!(!((i=this._lastCandidate)===null||i===void 0)&&i.equals(s))){this._lastCandidate=s;for(const r of this._entries)if(r._score=ZH(r.selector,s.uri,s.languageId,gne(e),s.notebookUri,s.notebookType),Jse(r.selector)&&r._score>0){for(const a of this._entries)a._score=0;r._score=1e3;break}this._entries.sort(An._compareByScoreAndTime)}}static _compareByScoreAndTime(e,t){return e._score<t._score?1:e._score>t._score?-1:JS(e.selector)&&!JS(t.selector)?1:!JS(e.selector)&&JS(t.selector)?-1:e._time<t._time?1:e._time>t._time?-1:0}}function JS(o){return typeof o=="string"?!1:Array.isArray(o)?o.some(JS):!!o.isBuiltin}class YNe{constructor(){this.referenceProvider=new An(this._score.bind(this)),this.renameProvider=new An(this._score.bind(this)),this.newSymbolNamesProvider=new An(this._score.bind(this)),this.codeActionProvider=new An(this._score.bind(this)),this.definitionProvider=new An(this._score.bind(this)),this.typeDefinitionProvider=new An(this._score.bind(this)),this.declarationProvider=new An(this._score.bind(this)),this.implementationProvider=new An(this._score.bind(this)),this.documentSymbolProvider=new An(this._score.bind(this)),this.inlayHintsProvider=new An(this._score.bind(this)),this.colorProvider=new An(this._score.bind(this)),this.codeLensProvider=new An(this._score.bind(this)),this.documentFormattingEditProvider=new An(this._score.bind(this)),this.documentRangeFormattingEditProvider=new An(this._score.bind(this)),this.onTypeFormattingEditProvider=new An(this._score.bind(this)),this.signatureHelpProvider=new An(this._score.bind(this)),this.hoverProvider=new An(this._score.bind(this)),this.documentHighlightProvider=new An(this._score.bind(this)),this.multiDocumentHighlightProvider=new An(this._score.bind(this)),this.selectionRangeProvider=new An(this._score.bind(this)),this.foldingRangeProvider=new An(this._score.bind(this)),this.linkProvider=new An(this._score.bind(this)),this.inlineCompletionsProvider=new An(this._score.bind(this)),this.inlineEditProvider=new An(this._score.bind(this)),this.completionProvider=new An(this._score.bind(this)),this.linkedEditingRangeProvider=new An(this._score.bind(this)),this.documentRangeSemanticTokensProvider=new An(this._score.bind(this)),this.documentSemanticTokensProvider=new An(this._score.bind(this)),this.documentOnDropEditProvider=new An(this._score.bind(this)),this.documentPasteEditProvider=new An(this._score.bind(this))}_score(e){var t;return(t=this._notebookTypeResolver)===null||t===void 0?void 0:t.call(this,e)}}oi(Ze,YNe,1);var ZNe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},lX=function(o,e){return function(t,i){e(t,i,o)}};const QH=Zt("hoverService");let Ix=class extends J{get delay(){return this.isInstantlyHovering()?0:this._delay}constructor(e,t,i={},n,s){super(),this.placement=e,this.instantHover=t,this.overrideOptions=i,this.configurationService=n,this.hoverService=s,this.lastHoverHideTime=0,this.timeLimit=200,this.hoverDisposables=this._register(new he),this._delay=this.configurationService.getValue("workbench.hover.delay"),this._register(this.configurationService.onDidChangeConfiguration(r=>{r.affectsConfiguration("workbench.hover.delay")&&(this._delay=this.configurationService.getValue("workbench.hover.delay"))}))}showHover(e,t){const i=typeof this.overrideOptions=="function"?this.overrideOptions(e,t):this.overrideOptions;this.hoverDisposables.clear();const n=e.target instanceof HTMLElement?[e.target]:e.target.targetElements;for(const r of n)this.hoverDisposables.add(ss(r,"keydown",a=>{a.equals(9)&&this.hoverService.hideHover()}));const s=e.content instanceof HTMLElement?void 0:e.content.toString();return this.hoverService.showHover({...e,...i,persistence:{hideOnKeyDown:!0,...i.persistence},id:s,appearance:{...e.appearance,compact:!0,skipFadeInAnimation:this.isInstantlyHovering(),...i.appearance}},t)}isInstantlyHovering(){return this.instantHover&&Date.now()-this.lastHoverHideTime<this.timeLimit}onDidHideHover(){this.hoverDisposables.clear(),this.instantHover&&(this.lastHoverHideTime=Date.now())}};Ix=ZNe([lX(3,$t),lX(4,QH)],Ix);const gg=Zt("contextViewService"),Ya=Zt("contextMenuService"),wT=ye;let XH=class extends J{constructor(){super(),this.containerDomNode=document.createElement("div"),this.containerDomNode.className="monaco-hover",this.containerDomNode.tabIndex=0,this.containerDomNode.setAttribute("role","tooltip"),this.contentsDomNode=document.createElement("div"),this.contentsDomNode.className="monaco-hover-content",this.scrollbar=this._register(new KD(this.contentsDomNode,{consumeMouseWheelIfScrollbarIsNeeded:!0})),this.containerDomNode.appendChild(this.scrollbar.getDomNode())}onContentsChanged(){this.scrollbar.scanDomNode()}};class XA extends J{static render(e,t,i){return new XA(e,t,i)}constructor(e,t,i){super(),this.actionContainer=ge(e,wT("div.action-container")),this.actionContainer.setAttribute("tabindex","0"),this.action=ge(this.actionContainer,wT("a.action")),this.action.setAttribute("role","button"),t.iconClass&&ge(this.action,wT(`span.icon.${t.iconClass}`));const n=ge(this.action,wT("span"));n.textContent=i?`${t.label} (${i})`:t.label,this._register(oe(this.actionContainer,ke.CLICK,s=>{s.stopPropagation(),s.preventDefault(),t.run(this.actionContainer)})),this._register(oe(this.actionContainer,ke.KEY_DOWN,s=>{const r=new _n(s);(r.equals(3)||r.equals(10))&&(s.stopPropagation(),s.preventDefault(),t.run(this.actionContainer))})),this.setEnabled(!0)}setEnabled(e){e?(this.actionContainer.classList.remove("disabled"),this.actionContainer.removeAttribute("aria-disabled")):(this.actionContainer.classList.add("disabled"),this.actionContainer.setAttribute("aria-disabled","true"))}}function eoe(o,e){return o&&e?v("acessibleViewHint","Inspect this in the accessible view with {0}.",e):o?v("acessibleViewHintNoKbOpen","Inspect this in the accessible view via the command Open Accessible View which is currently not triggerable via keybinding."):""}const wa=Zt("openerService");function QNe(o){let e;const t=/^L?(\d+)(?:,(\d+))?(-L?(\d+)(?:,(\d+))?)?/.exec(o.fragment);return t&&(e={startLineNumber:parseInt(t[1]),startColumn:t[2]?parseInt(t[2]):1,endLineNumber:t[4]?parseInt(t[4]):void 0,endColumn:t[4]?t[5]?parseInt(t[5]):1:void 0},o=o.with({fragment:""})),{selection:e,uri:o}}function XNe(o,e={}){const t=JH(e);return t.textContent=o,t}function JNe(o,e={}){const t=JH(e);return toe(t,tRe(o,!!e.renderCodeSegments),e.actionHandler,e.renderCodeSegments),t}function JH(o){const e=o.inline?"span":"div",t=document.createElement(e);return o.className&&(t.className=o.className),t}class eRe{constructor(e){this.source=e,this.index=0}eos(){return this.index>=this.source.length}next(){const e=this.peek();return this.advance(),e}peek(){return this.source[this.index]}advance(){this.index++}}function toe(o,e,t,i){let n;if(e.type===2)n=document.createTextNode(e.content||"");else if(e.type===3)n=document.createElement("b");else if(e.type===4)n=document.createElement("i");else if(e.type===7&&i)n=document.createElement("code");else if(e.type===5&&t){const s=document.createElement("a");t.disposables.add(ss(s,"click",r=>{t.callback(String(e.index),r)})),n=s}else e.type===8?n=document.createElement("br"):e.type===1&&(n=o);n&&o!==n&&o.appendChild(n),n&&Array.isArray(e.children)&&e.children.forEach(s=>{toe(n,s,t,i)})}function tRe(o,e){const t={type:1,children:[]};let i=0,n=t;const s=[],r=new eRe(o);for(;!r.eos();){let a=r.next();const l=a==="\\"&&i8(r.peek(),e)!==0;if(l&&(a=r.next()),!l&&iRe(a,e)&&a===r.peek()){r.advance(),n.type===2&&(n=s.pop());const c=i8(a,e);if(n.type===c||n.type===5&&c===6)n=s.pop();else{const u={type:c,children:[]};c===5&&(u.index=i,i++),n.children.push(u),s.push(n),n=u}}else if(a===`
`)n.type===2&&(n=s.pop()),n.children.push({type:8});else if(n.type!==2){const c={type:2,content:a};n.children.push(c),s.push(n),n=c}else n.content+=a}return n.type===2&&(n=s.pop()),t}function iRe(o,e){return i8(o,e)!==0}function i8(o,e){switch(o){case"*":return 3;case"_":return 4;case"[":return 5;case"]":return 6;case"`":return e?7:0;default:return 0}}const nRe=new RegExp(`(\\\\)?\\$\\((${pt.iconNameExpression}(?:${pt.iconModifierExpression})?)\\)`,"g");function Yp(o){const e=new Array;let t,i=0,n=0;for(;(t=nRe.exec(o))!==null;){n=t.index||0,i<n&&e.push(o.substring(i,n)),i=(t.index||0)+t[0].length;const[,s,r]=t;e.push(s?`$(${r})`:Tx({id:r}))}return i<o.length&&e.push(o.substring(i)),e}function Tx(o){const e=ye("span");return e.classList.add(...pt.asClassNameArray(o)),e}function sRe(o){const e=oRe(o);if(e&&e.length>0)return new Uint32Array(e)}let dl=0;const Cp=new Uint32Array(10);function oRe(o){if(dl=0,Lu(o,V3,4352),dl>0||(Lu(o,H3,4449),dl>0)||(Lu(o,z3,4520),dl>0)||(Lu(o,T_,12593),dl))return Cp.subarray(0,dl);if(o>=44032&&o<=55203){const e=o-44032,t=e%588,i=Math.floor(e/588),n=Math.floor(t/28),s=t%28-1;if(i<V3.length?Lu(i,V3,0):4352+i-12593<T_.length&&Lu(4352+i,T_,12593),n<H3.length?Lu(n,H3,0):4449+n-12593<T_.length&&Lu(4449+n-12593,T_,12593),s>=0&&(s<z3.length?Lu(s,z3,0):4520+s-12593<T_.length&&Lu(4520+s-12593,T_,12593)),dl>0)return Cp.subarray(0,dl)}}function Lu(o,e,t){o>=t&&o<t+e.length&&rRe(e[o-t])}function rRe(o){o!==0&&(Cp[dl++]=o&255,o>>8&&(Cp[dl++]=o>>8&255),o>>16&&(Cp[dl++]=o>>16&255))}const V3=new Uint8Array([114,82,115,101,69,102,97,113,81,116,84,100,119,87,99,122,120,118,103]),H3=new Uint16Array([107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]),z3=new Uint16Array([114,82,29810,115,30579,26483,101,102,29286,24934,29030,29798,30822,30310,26470,97,113,29809,116,84,100,119,99,122,120,118,103]),T_=new Uint16Array([114,82,29810,115,30579,26483,101,69,102,29286,24934,29030,29798,30822,30310,26470,97,113,81,29809,116,84,100,119,87,99,122,120,118,103,107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]);function ez(...o){return function(e,t){for(let i=0,n=o.length;i<n;i++){const s=o[i](e,t);if(s)return s}return null}}ioe.bind(void 0,!1);const Nx=ioe.bind(void 0,!0);function ioe(o,e,t){if(!t||t.length<e.length)return null;let i;return o?i=FV(t,e):i=t.indexOf(e)===0,i?e.length>0?[{start:0,end:e.length}]:[]:null}function noe(o,e){const t=e.toLowerCase().indexOf(o.toLowerCase());return t===-1?null:[{start:t,end:t+o.length}]}function soe(o,e){return n8(o.toLowerCase(),e.toLowerCase(),0,0)}function n8(o,e,t,i){if(t===o.length)return[];if(i===e.length)return null;if(o[t]===e[i]){let n=null;return(n=n8(o,e,t+1,i+1))?nz({start:i,end:i+1},n):null}return n8(o,e,t,i+1)}function tz(o){return 97<=o&&o<=122}function JA(o){return 65<=o&&o<=90}function iz(o){return 48<=o&&o<=57}function ooe(o){return o===32||o===9||o===10||o===13}const roe=new Set;"()[]{}<>`'\"-/;:,.?!".split("").forEach(o=>roe.add(o.charCodeAt(0)));function YR(o){return ooe(o)||roe.has(o)}function cX(o,e){return o===e||YR(o)&&YR(e)}const U3=new Map;function dX(o){if(U3.has(o))return U3.get(o);let e;const t=sRe(o);return t&&(e=t),U3.set(o,e),e}function aoe(o){return tz(o)||JA(o)||iz(o)}function nz(o,e){return e.length===0?e=[o]:o.end===e[0].start?e[0].start=o.start:e.unshift(o),e}function loe(o,e){for(let t=e;t<o.length;t++){const i=o.charCodeAt(t);if(JA(i)||iz(i)||t>0&&!aoe(o.charCodeAt(t-1)))return t}return o.length}function s8(o,e,t,i){if(t===o.length)return[];if(i===e.length)return null;if(o[t]!==e[i].toLowerCase())return null;{let n=null,s=i+1;for(n=s8(o,e,t+1,i+1);!n&&(s=loe(e,s))<e.length;)n=s8(o,e,t+1,s),s++;return n===null?null:nz({start:i,end:i+1},n)}}function aRe(o){let e=0,t=0,i=0,n=0,s=0;for(let u=0;u<o.length;u++)s=o.charCodeAt(u),JA(s)&&e++,tz(s)&&t++,aoe(s)&&i++,iz(s)&&n++;const r=e/o.length,a=t/o.length,l=i/o.length,c=n/o.length;return{upperPercent:r,lowerPercent:a,alphaPercent:l,numericPercent:c}}function lRe(o){const{upperPercent:e,lowerPercent:t}=o;return t===0&&e>.6}function cRe(o){const{upperPercent:e,lowerPercent:t,alphaPercent:i,numericPercent:n}=o;return t>.2&&e<.8&&i>.6&&n<.2}function dRe(o){let e=0,t=0,i=0,n=0;for(let s=0;s<o.length;s++)i=o.charCodeAt(s),JA(i)&&e++,tz(i)&&t++,ooe(i)&&n++;return(e===0||t===0)&&n===0?o.length<=30:e<=5}function coe(o,e){if(!e||(e=e.trim(),e.length===0)||!dRe(o))return null;e.length>60&&(e=e.substring(0,60));const t=aRe(e);if(!cRe(t)){if(!lRe(t))return null;e=e.toLowerCase()}let i=null,n=0;for(o=o.toLowerCase();n<e.length&&(i=s8(o,e,0,n))===null;)n=loe(e,n+1);return i}function uRe(o,e,t=!1){if(!e||e.length===0)return null;let i=null,n=0;for(o=o.toLowerCase(),e=e.toLowerCase();n<e.length&&(i=o8(o,e,0,n,t),i===null);)n=doe(e,n+1);return i}function o8(o,e,t,i,n){let s=0;if(t===o.length)return[];if(i===e.length)return null;if(!cX(o.charCodeAt(t),e.charCodeAt(i))){const l=dX(o.charCodeAt(t));if(!l)return null;for(let c=0;c<l.length;c++)if(!cX(l[c],e.charCodeAt(i+c)))return null;s+=l.length-1}let r=null,a=i+s+1;if(r=o8(o,e,t+1,a,n),!n)for(;!r&&(a=doe(e,a))<e.length;)r=o8(o,e,t+1,a,n),a++;if(!r)return null;if(o.charCodeAt(t)!==e.charCodeAt(i)){const l=dX(o.charCodeAt(t));if(!l)return r;for(let c=0;c<l.length;c++)if(l[c]!==e.charCodeAt(i+c))return r}return nz({start:i,end:i+s+1},r)}function doe(o,e){for(let t=e;t<o.length;t++)if(YR(o.charCodeAt(t))||t>0&&YR(o.charCodeAt(t-1)))return t;return o.length}const hRe=ez(Nx,coe,noe),fRe=ez(Nx,coe,soe),uX=new Dh(1e4);function hX(o,e,t=!1){if(typeof o!="string"||typeof e!="string")return null;let i=uX.get(o);i||(i=new RegExp(ECe(o),"i"),uX.set(o,i));const n=i.exec(e);return n?[{start:n.index,end:n.index+n[0].length}]:t?fRe(o,e):hRe(o,e)}function gRe(o,e){const t=Ov(o,o.toLowerCase(),0,e,e.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});return t?JD(t):null}function pRe(o,e,t,i,n,s){const r=Math.min(13,o.length);for(;t<r;t++){const a=Ov(o,e,t,i,n,s,{firstMatchCanBeWeak:!0,boostFullMatch:!0});if(a)return a}return[0,s]}function JD(o){if(typeof o>"u")return[];const e=[],t=o[1];for(let i=o.length-1;i>1;i--){const n=o[i]+t,s=e[e.length-1];s&&s.end===n?s.end=n+1:e.push({start:n,end:n+1})}return e}const Op=128;function sz(){const o=[],e=[];for(let t=0;t<=Op;t++)e[t]=0;for(let t=0;t<=Op;t++)o.push(e.slice(0));return o}function uoe(o){const e=[];for(let t=0;t<=o;t++)e[t]=0;return e}const hoe=uoe(2*Op),r8=uoe(2*Op),ef=sz(),N_=sz(),yT=sz();function ST(o,e){if(e<0||e>=o.length)return!1;const t=o.codePointAt(e);switch(t){case 95:case 45:case 46:case 32:case 47:case 92:case 39:case 34:case 58:case 36:case 60:case 62:case 40:case 41:case 91:case 93:case 123:case 125:return!0;case void 0:return!1;default:return!!HV(t)}}function fX(o,e){if(e<0||e>=o.length)return!1;switch(o.charCodeAt(e)){case 32:case 9:return!0;default:return!1}}function RN(o,e,t){return e[o]!==t[o]}function mRe(o,e,t,i,n,s,r=!1){for(;e<t&&n<s;)o[e]===i[n]&&(r&&(hoe[e]=n),e+=1),n+=1;return e===t}var Hd;(function(o){o.Default=[-100,0];function e(t){return!t||t.length===2&&t[0]===-100&&t[1]===0}o.isDefault=e})(Hd||(Hd={}));class eP{constructor(e,t){this.firstMatchCanBeWeak=e,this.boostFullMatch=t}}eP.default={boostFullMatch:!0,firstMatchCanBeWeak:!1};function Ov(o,e,t,i,n,s,r=eP.default){const a=o.length>Op?Op:o.length,l=i.length>Op?Op:i.length;if(t>=a||s>=l||a-t>l-s||!mRe(e,t,a,n,s,l,!0))return;_Re(a,l,t,s,e,n);let c=1,u=1,f=t,g=s;const p=[!1];for(c=1,f=t;f<a;c++,f++){const L=hoe[f],x=r8[f],D=f+1<a?r8[f+1]:l;for(u=L-s+1,g=L;g<D;u++,g++){let E=Number.MIN_SAFE_INTEGER,N=!1;g<=x&&(E=vRe(o,e,f,t,i,n,g,l,s,ef[c-1][u-1]===0,p));let M=0;E!==Number.MAX_SAFE_INTEGER&&(N=!0,M=E+N_[c-1][u-1]);const F=g>L,H=F?N_[c][u-1]+(ef[c][u-1]>0?-5:0):0,Q=g>L+1&&ef[c][u-1]>0,K=Q?N_[c][u-2]+(ef[c][u-2]>0?-5:0):0;if(Q&&(!F||K>=H)&&(!N||K>=M))N_[c][u]=K,yT[c][u]=3,ef[c][u]=0;else if(F&&(!N||H>=M))N_[c][u]=H,yT[c][u]=2,ef[c][u]=0;else if(N)N_[c][u]=M,yT[c][u]=1,ef[c][u]=ef[c-1][u-1]+1;else throw new Error("not possible")}}if(!p[0]&&!r.firstMatchCanBeWeak)return;c--,u--;const _=[N_[c][u],s];let b=0,y=0;for(;c>=1;){let L=u;do{const x=yT[c][L];if(x===3)L=L-2;else if(x===2)L=L-1;else break}while(L>=1);b>1&&e[t+c-1]===n[s+u-1]&&!RN(L+s-1,i,n)&&b+1>ef[c][L]&&(L=u),L===u?b++:b=1,y||(y=L),c--,u=L-1,_.push(u)}l===a&&r.boostFullMatch&&(_[0]+=2);const S=y-a;return _[0]-=S,_}function _Re(o,e,t,i,n,s){let r=o-1,a=e-1;for(;r>=t&&a>=i;)n[r]===s[a]&&(r8[r]=a,r--),a--}function vRe(o,e,t,i,n,s,r,a,l,c,u){if(e[t]!==s[r])return Number.MIN_SAFE_INTEGER;let f=1,g=!1;return r===t-i?f=o[t]===n[r]?7:5:RN(r,n,s)&&(r===0||!RN(r-1,n,s))?(f=o[t]===n[r]?7:5,g=!0):ST(s,r)&&(r===0||!ST(s,r-1))?f=5:(ST(s,r-1)||fX(s,r-1))&&(f=5,g=!0),f>1&&t===i&&(u[0]=!0),g||(g=RN(r,n,s)||ST(s,r-1)||fX(s,r-1)),t===i?r>l&&(f-=g?3:5):c?f+=g?2:0:f+=g?0:1,r+1===a&&(f-=g?3:5),f}function bRe(o,e,t,i,n,s,r){return CRe(o,e,t,i,n,s,!0,r)}function CRe(o,e,t,i,n,s,r,a){let l=Ov(o,e,t,i,n,s,a);if(l&&!r)return l;if(o.length>=3){const c=Math.min(7,o.length-1);for(let u=t+1;u<c;u++){const f=wRe(o,u);if(f){const g=Ov(f,f.toLowerCase(),t,i,n,s,a);g&&(g[0]-=3,(!l||g[0]>l[0])&&(l=g))}}}return l}function wRe(o,e){if(e+1>=o.length)return;const t=o[e],i=o[e+1];if(t!==i)return o.slice(0,e)+i+t+o.slice(e+2)}const yRe="$(",oz=new RegExp(`\\$\\(${pt.iconNameExpression}(?:${pt.iconModifierExpression})?\\)`,"g"),SRe=new RegExp(`(\\\\)?${oz.source}`,"g");function LRe(o){return o.replace(SRe,(e,t)=>t?e:`\\${e}`)}const xRe=new RegExp(`\\\\${oz.source}`,"g");function DRe(o){return o.replace(xRe,e=>`\\${e}`)}const kRe=new RegExp(`(\\s)?(\\\\)?${oz.source}(\\s)?`,"g");function rz(o){return o.indexOf(yRe)===-1?o:o.replace(kRe,(e,t,i,n)=>i?e:t||n||"")}function ERe(o){return o?o.replace(/\$\((.*?)\)/g,(e,t)=>` ${t} `).trim():""}const $3=new RegExp(`\\$\\(${pt.iconNameCharacter}+\\)`,"g");function eL(o){$3.lastIndex=0;let e="";const t=[];let i=0;for(;;){const n=$3.lastIndex,s=$3.exec(o),r=o.substring(n,s==null?void 0:s.index);if(r.length>0){e+=r;for(let a=0;a<r.length;a++)t.push(i)}if(!s)break;i+=s[0].length}return{text:e,iconOffsets:t}}function j3(o,e,t=!1){const{text:i,iconOffsets:n}=e;if(!n||n.length===0)return hX(o,i,t);const s=MD(i," "),r=i.length-s.length,a=hX(o,s,t);if(a)for(const l of a){const c=n[l.start+r]+r;l.start+=c,l.end+=c}return a}class qo{constructor(e="",t=!1){var i,n,s;if(this.value=e,typeof this.value!="string")throw lc("value");typeof t=="boolean"?(this.isTrusted=t,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=(i=t.isTrusted)!==null&&i!==void 0?i:void 0,this.supportThemeIcons=(n=t.supportThemeIcons)!==null&&n!==void 0?n:!1,this.supportHtml=(s=t.supportHtml)!==null&&s!==void 0?s:!1)}appendText(e,t=0){return this.value+=TRe(this.supportThemeIcons?LRe(e):e).replace(/([ \t]+)/g,(i,n)=>"&nbsp;".repeat(n.length)).replace(/\>/gm,"\\>").replace(/\n/g,t===1?`\\
`:`

`),this}appendMarkdown(e){return this.value+=e,this}appendCodeblock(e,t){return this.value+=`
${NRe(t,e)}
`,this}appendLink(e,t,i){return this.value+="[",this.value+=this._escape(t,"]"),this.value+="](",this.value+=this._escape(String(e),")"),i&&(this.value+=` "${this._escape(this._escape(i,'"'),")")}"`),this.value+=")",this}_escape(e,t){const i=new RegExp(Ll(t),"g");return e.replace(i,(n,s)=>e.charAt(s-1)!=="\\"?`\\${n}`:n)}}function v1(o){return zd(o)?!o.value:Array.isArray(o)?o.every(v1):!0}function zd(o){return o instanceof qo?!0:o&&typeof o=="object"?typeof o.value=="string"&&(typeof o.isTrusted=="boolean"||typeof o.isTrusted=="object"||o.isTrusted===void 0)&&(typeof o.supportThemeIcons=="boolean"||o.supportThemeIcons===void 0):!1}function IRe(o,e){return o===e?!0:!o||!e?!1:o.value===e.value&&o.isTrusted===e.isTrusted&&o.supportThemeIcons===e.supportThemeIcons&&o.supportHtml===e.supportHtml&&(o.baseUri===e.baseUri||!!o.baseUri&&!!e.baseUri&&AH(gt.from(o.baseUri),gt.from(e.baseUri)))}function TRe(o){return o.replace(/[\\`*_{}[\]()#+\-!~]/g,"\\$&")}function NRe(o,e){var t,i;const n=(i=(t=o.match(/^`+/gm))===null||t===void 0?void 0:t.reduce((r,a)=>r.length>a.length?r:a).length)!==null&&i!==void 0?i:0,s=n>=3?n+1:3;return[`${"`".repeat(s)}${e}`,o,`${"`".repeat(s)}`].join(`
`)}function LT(o){return o.replace(/"/g,"&quot;")}function K3(o){return o&&o.replace(/\\([\\`*_{}[\]()#+\-.!~])/g,"$1")}function RRe(o){const e=[],t=o.split("|").map(n=>n.trim());o=t[0];const i=t[1];if(i){const n=/height=(\d+)/.exec(i),s=/width=(\d+)/.exec(i),r=n?n[1]:"",a=s?s[1]:"",l=isFinite(parseInt(a)),c=isFinite(parseInt(r));l&&e.push(`width="${a}"`),c&&e.push(`height="${r}"`)}return{href:o,dimensions:e}}class az{constructor(e){this._prefix=e,this._lastId=0}nextId(){return this._prefix+ ++this._lastId}}const a8=new az("id#");let Yr={};(function(){function o(e,t){t(Yr)}o.amd=!0,function(e,t){typeof o=="function"&&o.amd?o(["exports"],t):typeof exports=="object"&&typeof module<"u"?t(exports):(e=typeof globalThis<"u"?globalThis:e||self,t(e.marked={}))}(this,function(e){function t(ve,de){for(var ae=0;ae<de.length;ae++){var z=de[ae];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(ve,z.key,z)}}function i(ve,de,ae){return ae&&t(ve,ae),Object.defineProperty(ve,"prototype",{writable:!1}),ve}function n(ve,de){if(ve){if(typeof ve=="string")return s(ve,de);var ae=Object.prototype.toString.call(ve).slice(8,-1);if(ae==="Object"&&ve.constructor&&(ae=ve.constructor.name),ae==="Map"||ae==="Set")return Array.from(ve);if(ae==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ae))return s(ve,de)}}function s(ve,de){(de==null||de>ve.length)&&(de=ve.length);for(var ae=0,z=new Array(de);ae<de;ae++)z[ae]=ve[ae];return z}function r(ve,de){var ae=typeof Symbol<"u"&&ve[Symbol.iterator]||ve["@@iterator"];if(ae)return(ae=ae.call(ve)).next.bind(ae);if(Array.isArray(ve)||(ae=n(ve))||de){ae&&(ve=ae);var z=0;return function(){return z>=ve.length?{done:!0}:{done:!1,value:ve[z++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function a(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}e.defaults=a();function l(ve){e.defaults=ve}var c=/[&<>"']/,u=/[&<>"']/g,f=/[<>"']|&(?!#?\w+;)/,g=/[<>"']|&(?!#?\w+;)/g,p={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},_=function(de){return p[de]};function b(ve,de){if(de){if(c.test(ve))return ve.replace(u,_)}else if(f.test(ve))return ve.replace(g,_);return ve}var y=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function S(ve){return ve.replace(y,function(de,ae){return ae=ae.toLowerCase(),ae==="colon"?":":ae.charAt(0)==="#"?ae.charAt(1)==="x"?String.fromCharCode(parseInt(ae.substring(2),16)):String.fromCharCode(+ae.substring(1)):""})}var L=/(^|[^\[])\^/g;function x(ve,de){ve=typeof ve=="string"?ve:ve.source,de=de||"";var ae={replace:function($,ee){return ee=ee.source||ee,ee=ee.replace(L,"$1"),ve=ve.replace($,ee),ae},getRegex:function(){return new RegExp(ve,de)}};return ae}var D=/[^\w:]/g,E=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function N(ve,de,ae){if(ve){var z;try{z=decodeURIComponent(S(ae)).replace(D,"").toLowerCase()}catch{return null}if(z.indexOf("javascript:")===0||z.indexOf("vbscript:")===0||z.indexOf("data:")===0)return null}de&&!E.test(ae)&&(ae=K(de,ae));try{ae=encodeURI(ae).replace(/%25/g,"%")}catch{return null}return ae}var M={},F=/^[^:]+:\/*[^/]*$/,H=/^([^:]+:)[\s\S]*$/,Q=/^([^:]+:\/*[^/]*)[\s\S]*$/;function K(ve,de){M[" "+ve]||(F.test(ve)?M[" "+ve]=ve+"/":M[" "+ve]=fe(ve,"/",!0)),ve=M[" "+ve];var ae=ve.indexOf(":")===-1;return de.substring(0,2)==="//"?ae?de:ve.replace(H,"$1")+de:de.charAt(0)==="/"?ae?de:ve.replace(Q,"$1")+de:ve+de}var j={exec:function(){}};function q(ve){for(var de=1,ae,z;de<arguments.length;de++){ae=arguments[de];for(z in ae)Object.prototype.hasOwnProperty.call(ae,z)&&(ve[z]=ae[z])}return ve}function se(ve,de){var ae=ve.replace(/\|/g,function(ee,X,pe){for(var He=!1,ot=X;--ot>=0&&pe[ot]==="\\";)He=!He;return He?"|":" |"}),z=ae.split(/ \|/),$=0;if(z[0].trim()||z.shift(),z.length>0&&!z[z.length-1].trim()&&z.pop(),z.length>de)z.splice(de);else for(;z.length<de;)z.push("");for(;$<z.length;$++)z[$]=z[$].trim().replace(/\\\|/g,"|");return z}function fe(ve,de,ae){var z=ve.length;if(z===0)return"";for(var $=0;$<z;){var ee=ve.charAt(z-$-1);if(ee===de&&!ae)$++;else if(ee!==de&&ae)$++;else break}return ve.slice(0,z-$)}function Ae(ve,de){if(ve.indexOf(de[1])===-1)return-1;for(var ae=ve.length,z=0,$=0;$<ae;$++)if(ve[$]==="\\")$++;else if(ve[$]===de[0])z++;else if(ve[$]===de[1]&&(z--,z<0))return $;return-1}function Ne(ve){ve&&ve.sanitize&&!ve.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function Le(ve,de){if(de<1)return"";for(var ae="";de>1;)de&1&&(ae+=ve),de>>=1,ve+=ve;return ae+ve}function be(ve,de,ae,z){var $=de.href,ee=de.title?b(de.title):null,X=ve[1].replace(/\\([\[\]])/g,"$1");if(ve[0].charAt(0)!=="!"){z.state.inLink=!0;var pe={type:"link",raw:ae,href:$,title:ee,text:X,tokens:z.inlineTokens(X)};return z.state.inLink=!1,pe}return{type:"image",raw:ae,href:$,title:ee,text:b(X)}}function ze(ve,de){var ae=ve.match(/^(\s+)(?:```)/);if(ae===null)return de;var z=ae[1];return de.split(`
`).map(function($){var ee=$.match(/^\s+/);if(ee===null)return $;var X=ee[0];return X.length>=z.length?$.slice(z.length):$}).join(`
`)}var it=function(){function ve(ae){this.options=ae||e.defaults}var de=ve.prototype;return de.space=function(z){var $=this.rules.block.newline.exec(z);if($&&$[0].length>0)return{type:"space",raw:$[0]}},de.code=function(z){var $=this.rules.block.code.exec(z);if($){var ee=$[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:$[0],codeBlockStyle:"indented",text:this.options.pedantic?ee:fe(ee,`
`)}}},de.fences=function(z){var $=this.rules.block.fences.exec(z);if($){var ee=$[0],X=ze(ee,$[3]||"");return{type:"code",raw:ee,lang:$[2]?$[2].trim():$[2],text:X}}},de.heading=function(z){var $=this.rules.block.heading.exec(z);if($){var ee=$[2].trim();if(/#$/.test(ee)){var X=fe(ee,"#");(this.options.pedantic||!X||/ $/.test(X))&&(ee=X.trim())}return{type:"heading",raw:$[0],depth:$[1].length,text:ee,tokens:this.lexer.inline(ee)}}},de.hr=function(z){var $=this.rules.block.hr.exec(z);if($)return{type:"hr",raw:$[0]}},de.blockquote=function(z){var $=this.rules.block.blockquote.exec(z);if($){var ee=$[0].replace(/^ *>[ \t]?/gm,"");return{type:"blockquote",raw:$[0],tokens:this.lexer.blockTokens(ee,[]),text:ee}}},de.list=function(z){var $=this.rules.block.list.exec(z);if($){var ee,X,pe,He,ot,dt,Re,Ue,wt,Tt,et,mi,ui=$[1].trim(),ps=ui.length>1,It={type:"list",raw:"",ordered:ps,start:ps?+ui.slice(0,-1):"",loose:!1,items:[]};ui=ps?"\\d{1,9}\\"+ui.slice(-1):"\\"+ui,this.options.pedantic&&(ui=ps?ui:"[*+-]");for(var ji=new RegExp("^( {0,3}"+ui+")((?:[	 ][^\\n]*)?(?:\\n|$))");z&&(mi=!1,!(!($=ji.exec(z))||this.rules.block.hr.test(z)));){if(ee=$[0],z=z.substring(ee.length),Ue=$[2].split(`
`,1)[0],wt=z.split(`
`,1)[0],this.options.pedantic?(He=2,et=Ue.trimLeft()):(He=$[2].search(/[^ ]/),He=He>4?1:He,et=Ue.slice(He),He+=$[1].length),dt=!1,!Ue&&/^ *$/.test(wt)&&(ee+=wt+`
`,z=z.substring(wt.length+1),mi=!0),!mi)for(var kn=new RegExp("^ {0,"+Math.min(3,He-1)+"}(?:[*+-]|\\d{1,9}[.)])((?: [^\\n]*)?(?:\\n|$))"),En=new RegExp("^ {0,"+Math.min(3,He-1)+"}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)"),Js=new RegExp("^ {0,"+Math.min(3,He-1)+"}(?:```|~~~)"),Co=new RegExp("^ {0,"+Math.min(3,He-1)+"}#");z&&(Tt=z.split(`
`,1)[0],Ue=Tt,this.options.pedantic&&(Ue=Ue.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(Js.test(Ue)||Co.test(Ue)||kn.test(Ue)||En.test(z)));){if(Ue.search(/[^ ]/)>=He||!Ue.trim())et+=`
`+Ue.slice(He);else if(!dt)et+=`
`+Ue;else break;!dt&&!Ue.trim()&&(dt=!0),ee+=Tt+`
`,z=z.substring(Tt.length+1)}It.loose||(Re?It.loose=!0:/\n *\n *$/.test(ee)&&(Re=!0)),this.options.gfm&&(X=/^\[[ xX]\] /.exec(et),X&&(pe=X[0]!=="[ ] ",et=et.replace(/^\[[ xX]\] +/,""))),It.items.push({type:"list_item",raw:ee,task:!!X,checked:pe,loose:!1,text:et}),It.raw+=ee}It.items[It.items.length-1].raw=ee.trimRight(),It.items[It.items.length-1].text=et.trimRight(),It.raw=It.raw.trimRight();var Sa=It.items.length;for(ot=0;ot<Sa;ot++){this.lexer.state.top=!1,It.items[ot].tokens=this.lexer.blockTokens(It.items[ot].text,[]);var Za=It.items[ot].tokens.filter(function(La){return La.type==="space"}),yc=Za.every(function(La){for(var Xc=La.raw.split(""),wo=0,Qa=r(Xc),xa;!(xa=Qa()).done;){var Da=xa.value;if(Da===`
`&&(wo+=1),wo>1)return!0}return!1});!It.loose&&Za.length&&yc&&(It.loose=!0,It.items[ot].loose=!0)}return It}},de.html=function(z){var $=this.rules.block.html.exec(z);if($){var ee={type:"html",raw:$[0],pre:!this.options.sanitizer&&($[1]==="pre"||$[1]==="script"||$[1]==="style"),text:$[0]};if(this.options.sanitize){var X=this.options.sanitizer?this.options.sanitizer($[0]):b($[0]);ee.type="paragraph",ee.text=X,ee.tokens=this.lexer.inline(X)}return ee}},de.def=function(z){var $=this.rules.block.def.exec(z);if($){$[3]&&($[3]=$[3].substring(1,$[3].length-1));var ee=$[1].toLowerCase().replace(/\s+/g," ");return{type:"def",tag:ee,raw:$[0],href:$[2],title:$[3]}}},de.table=function(z){var $=this.rules.block.table.exec(z);if($){var ee={type:"table",header:se($[1]).map(function(Re){return{text:Re}}),align:$[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:$[3]&&$[3].trim()?$[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(ee.header.length===ee.align.length){ee.raw=$[0];var X=ee.align.length,pe,He,ot,dt;for(pe=0;pe<X;pe++)/^ *-+: *$/.test(ee.align[pe])?ee.align[pe]="right":/^ *:-+: *$/.test(ee.align[pe])?ee.align[pe]="center":/^ *:-+ *$/.test(ee.align[pe])?ee.align[pe]="left":ee.align[pe]=null;for(X=ee.rows.length,pe=0;pe<X;pe++)ee.rows[pe]=se(ee.rows[pe],ee.header.length).map(function(Re){return{text:Re}});for(X=ee.header.length,He=0;He<X;He++)ee.header[He].tokens=this.lexer.inline(ee.header[He].text);for(X=ee.rows.length,He=0;He<X;He++)for(dt=ee.rows[He],ot=0;ot<dt.length;ot++)dt[ot].tokens=this.lexer.inline(dt[ot].text);return ee}}},de.lheading=function(z){var $=this.rules.block.lheading.exec(z);if($)return{type:"heading",raw:$[0],depth:$[2].charAt(0)==="="?1:2,text:$[1],tokens:this.lexer.inline($[1])}},de.paragraph=function(z){var $=this.rules.block.paragraph.exec(z);if($){var ee=$[1].charAt($[1].length-1)===`
`?$[1].slice(0,-1):$[1];return{type:"paragraph",raw:$[0],text:ee,tokens:this.lexer.inline(ee)}}},de.text=function(z){var $=this.rules.block.text.exec(z);if($)return{type:"text",raw:$[0],text:$[0],tokens:this.lexer.inline($[0])}},de.escape=function(z){var $=this.rules.inline.escape.exec(z);if($)return{type:"escape",raw:$[0],text:b($[1])}},de.tag=function(z){var $=this.rules.inline.tag.exec(z);if($)return!this.lexer.state.inLink&&/^<a /i.test($[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test($[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test($[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test($[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:$[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer($[0]):b($[0]):$[0]}},de.link=function(z){var $=this.rules.inline.link.exec(z);if($){var ee=$[2].trim();if(!this.options.pedantic&&/^</.test(ee)){if(!/>$/.test(ee))return;var X=fe(ee.slice(0,-1),"\\");if((ee.length-X.length)%2===0)return}else{var pe=Ae($[2],"()");if(pe>-1){var He=$[0].indexOf("!")===0?5:4,ot=He+$[1].length+pe;$[2]=$[2].substring(0,pe),$[0]=$[0].substring(0,ot).trim(),$[3]=""}}var dt=$[2],Re="";if(this.options.pedantic){var Ue=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(dt);Ue&&(dt=Ue[1],Re=Ue[3])}else Re=$[3]?$[3].slice(1,-1):"";return dt=dt.trim(),/^</.test(dt)&&(this.options.pedantic&&!/>$/.test(ee)?dt=dt.slice(1):dt=dt.slice(1,-1)),be($,{href:dt&&dt.replace(this.rules.inline._escapes,"$1"),title:Re&&Re.replace(this.rules.inline._escapes,"$1")},$[0],this.lexer)}},de.reflink=function(z,$){var ee;if((ee=this.rules.inline.reflink.exec(z))||(ee=this.rules.inline.nolink.exec(z))){var X=(ee[2]||ee[1]).replace(/\s+/g," ");if(X=$[X.toLowerCase()],!X||!X.href){var pe=ee[0].charAt(0);return{type:"text",raw:pe,text:pe}}return be(ee,X,ee[0],this.lexer)}},de.emStrong=function(z,$,ee){ee===void 0&&(ee="");var X=this.rules.inline.emStrong.lDelim.exec(z);if(X&&!(X[3]&&ee.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDF70-\uDF81\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))){var pe=X[1]||X[2]||"";if(!pe||pe&&(ee===""||this.rules.inline.punctuation.exec(ee))){var He=X[0].length-1,ot,dt,Re=He,Ue=0,wt=X[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(wt.lastIndex=0,$=$.slice(-1*z.length+He);(X=wt.exec($))!=null;)if(ot=X[1]||X[2]||X[3]||X[4]||X[5]||X[6],!!ot){if(dt=ot.length,X[3]||X[4]){Re+=dt;continue}else if((X[5]||X[6])&&He%3&&!((He+dt)%3)){Ue+=dt;continue}if(Re-=dt,!(Re>0)){if(dt=Math.min(dt,dt+Re+Ue),Math.min(He,dt)%2){var Tt=z.slice(1,He+X.index+dt);return{type:"em",raw:z.slice(0,He+X.index+dt+1),text:Tt,tokens:this.lexer.inlineTokens(Tt)}}var et=z.slice(2,He+X.index+dt-1);return{type:"strong",raw:z.slice(0,He+X.index+dt+1),text:et,tokens:this.lexer.inlineTokens(et)}}}}}},de.codespan=function(z){var $=this.rules.inline.code.exec(z);if($){var ee=$[2].replace(/\n/g," "),X=/[^ ]/.test(ee),pe=/^ /.test(ee)&&/ $/.test(ee);return X&&pe&&(ee=ee.substring(1,ee.length-1)),ee=b(ee,!0),{type:"codespan",raw:$[0],text:ee}}},de.br=function(z){var $=this.rules.inline.br.exec(z);if($)return{type:"br",raw:$[0]}},de.del=function(z){var $=this.rules.inline.del.exec(z);if($)return{type:"del",raw:$[0],text:$[2],tokens:this.lexer.inlineTokens($[2])}},de.autolink=function(z,$){var ee=this.rules.inline.autolink.exec(z);if(ee){var X,pe;return ee[2]==="@"?(X=b(this.options.mangle?$(ee[1]):ee[1]),pe="mailto:"+X):(X=b(ee[1]),pe=X),{type:"link",raw:ee[0],text:X,href:pe,tokens:[{type:"text",raw:X,text:X}]}}},de.url=function(z,$){var ee;if(ee=this.rules.inline.url.exec(z)){var X,pe;if(ee[2]==="@")X=b(this.options.mangle?$(ee[0]):ee[0]),pe="mailto:"+X;else{var He;do He=ee[0],ee[0]=this.rules.inline._backpedal.exec(ee[0])[0];while(He!==ee[0]);X=b(ee[0]),ee[1]==="www."?pe="http://"+X:pe=X}return{type:"link",raw:ee[0],text:X,href:pe,tokens:[{type:"text",raw:X,text:X}]}}},de.inlineText=function(z,$){var ee=this.rules.inline.text.exec(z);if(ee){var X;return this.lexer.state.inRawBlock?X=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(ee[0]):b(ee[0]):ee[0]:X=b(this.options.smartypants?$(ee[0]):ee[0]),{type:"text",raw:ee[0],text:X}}},ve}(),qe={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:j,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};qe._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/,qe._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,qe.def=x(qe.def).replace("label",qe._label).replace("title",qe._title).getRegex(),qe.bullet=/(?:[*+-]|\d{1,9}[.)])/,qe.listItemStart=x(/^( *)(bull) */).replace("bull",qe.bullet).getRegex(),qe.list=x(qe.list).replace(/bull/g,qe.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+qe.def.source+")").getRegex(),qe._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",qe._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,qe.html=x(qe.html,"i").replace("comment",qe._comment).replace("tag",qe._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),qe.paragraph=x(qe._paragraph).replace("hr",qe.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",qe._tag).getRegex(),qe.blockquote=x(qe.blockquote).replace("paragraph",qe.paragraph).getRegex(),qe.normal=q({},qe),qe.gfm=q({},qe.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),qe.gfm.table=x(qe.gfm.table).replace("hr",qe.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",qe._tag).getRegex(),qe.gfm.paragraph=x(qe._paragraph).replace("hr",qe.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",qe.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",qe._tag).getRegex(),qe.pedantic=q({},qe.normal,{html:x(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",qe._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:j,paragraph:x(qe.normal._paragraph).replace("hr",qe.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",qe.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var Fe={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:j,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[^*]+(?=[^*])|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:j,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};Fe._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",Fe.punctuation=x(Fe.punctuation).replace(/punctuation/g,Fe._punctuation).getRegex(),Fe.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,Fe.escapedEmSt=/\\\*|\\_/g,Fe._comment=x(qe._comment).replace("(?:-->|$)","-->").getRegex(),Fe.emStrong.lDelim=x(Fe.emStrong.lDelim).replace(/punct/g,Fe._punctuation).getRegex(),Fe.emStrong.rDelimAst=x(Fe.emStrong.rDelimAst,"g").replace(/punct/g,Fe._punctuation).getRegex(),Fe.emStrong.rDelimUnd=x(Fe.emStrong.rDelimUnd,"g").replace(/punct/g,Fe._punctuation).getRegex(),Fe._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,Fe._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,Fe._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,Fe.autolink=x(Fe.autolink).replace("scheme",Fe._scheme).replace("email",Fe._email).getRegex(),Fe._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,Fe.tag=x(Fe.tag).replace("comment",Fe._comment).replace("attribute",Fe._attribute).getRegex(),Fe._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Fe._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,Fe._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,Fe.link=x(Fe.link).replace("label",Fe._label).replace("href",Fe._href).replace("title",Fe._title).getRegex(),Fe.reflink=x(Fe.reflink).replace("label",Fe._label).replace("ref",qe._label).getRegex(),Fe.nolink=x(Fe.nolink).replace("ref",qe._label).getRegex(),Fe.reflinkSearch=x(Fe.reflinkSearch,"g").replace("reflink",Fe.reflink).replace("nolink",Fe.nolink).getRegex(),Fe.normal=q({},Fe),Fe.pedantic=q({},Fe.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:x(/^!?\[(label)\]\((.*?)\)/).replace("label",Fe._label).getRegex(),reflink:x(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Fe._label).getRegex()}),Fe.gfm=q({},Fe.normal,{escape:x(Fe.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),Fe.gfm.url=x(Fe.gfm.url,"i").replace("email",Fe.gfm._extended_email).getRegex(),Fe.breaks=q({},Fe.gfm,{br:x(Fe.br).replace("{2,}","*").getRegex(),text:x(Fe.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});function Li(ve){return ve.replace(/---/g,"").replace(/--/g,"").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1").replace(/'/g,"").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1").replace(/"/g,"").replace(/\.{3}/g,"")}function Bn(ve){var de="",ae,z,$=ve.length;for(ae=0;ae<$;ae++)z=ve.charCodeAt(ae),Math.random()>.5&&(z="x"+z.toString(16)),de+="&#"+z+";";return de}var tn=function(){function ve(ae){this.tokens=[],this.tokens.links=Object.create(null),this.options=ae||e.defaults,this.options.tokenizer=this.options.tokenizer||new it,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};var z={block:qe.normal,inline:Fe.normal};this.options.pedantic?(z.block=qe.pedantic,z.inline=Fe.pedantic):this.options.gfm&&(z.block=qe.gfm,this.options.breaks?z.inline=Fe.breaks:z.inline=Fe.gfm),this.tokenizer.rules=z}ve.lex=function(z,$){var ee=new ve($);return ee.lex(z)},ve.lexInline=function(z,$){var ee=new ve($);return ee.inlineTokens(z)};var de=ve.prototype;return de.lex=function(z){z=z.replace(/\r\n|\r/g,`
`),this.blockTokens(z,this.tokens);for(var $;$=this.inlineQueue.shift();)this.inlineTokens($.src,$.tokens);return this.tokens},de.blockTokens=function(z,$){var ee=this;$===void 0&&($=[]),this.options.pedantic?z=z.replace(/\t/g,"    ").replace(/^ +$/gm,""):z=z.replace(/^( *)(\t+)/gm,function(Re,Ue,wt){return Ue+"    ".repeat(wt.length)});for(var X,pe,He,ot;z;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(function(Re){return(X=Re.call({lexer:ee},z,$))?(z=z.substring(X.raw.length),$.push(X),!0):!1}))){if(X=this.tokenizer.space(z)){z=z.substring(X.raw.length),X.raw.length===1&&$.length>0?$[$.length-1].raw+=`
`:$.push(X);continue}if(X=this.tokenizer.code(z)){z=z.substring(X.raw.length),pe=$[$.length-1],pe&&(pe.type==="paragraph"||pe.type==="text")?(pe.raw+=`
`+X.raw,pe.text+=`
`+X.text,this.inlineQueue[this.inlineQueue.length-1].src=pe.text):$.push(X);continue}if(X=this.tokenizer.fences(z)){z=z.substring(X.raw.length),$.push(X);continue}if(X=this.tokenizer.heading(z)){z=z.substring(X.raw.length),$.push(X);continue}if(X=this.tokenizer.hr(z)){z=z.substring(X.raw.length),$.push(X);continue}if(X=this.tokenizer.blockquote(z)){z=z.substring(X.raw.length),$.push(X);continue}if(X=this.tokenizer.list(z)){z=z.substring(X.raw.length),$.push(X);continue}if(X=this.tokenizer.html(z)){z=z.substring(X.raw.length),$.push(X);continue}if(X=this.tokenizer.def(z)){z=z.substring(X.raw.length),pe=$[$.length-1],pe&&(pe.type==="paragraph"||pe.type==="text")?(pe.raw+=`
`+X.raw,pe.text+=`
`+X.raw,this.inlineQueue[this.inlineQueue.length-1].src=pe.text):this.tokens.links[X.tag]||(this.tokens.links[X.tag]={href:X.href,title:X.title});continue}if(X=this.tokenizer.table(z)){z=z.substring(X.raw.length),$.push(X);continue}if(X=this.tokenizer.lheading(z)){z=z.substring(X.raw.length),$.push(X);continue}if(He=z,this.options.extensions&&this.options.extensions.startBlock&&function(){var Re=1/0,Ue=z.slice(1),wt=void 0;ee.options.extensions.startBlock.forEach(function(Tt){wt=Tt.call({lexer:this},Ue),typeof wt=="number"&&wt>=0&&(Re=Math.min(Re,wt))}),Re<1/0&&Re>=0&&(He=z.substring(0,Re+1))}(),this.state.top&&(X=this.tokenizer.paragraph(He))){pe=$[$.length-1],ot&&pe.type==="paragraph"?(pe.raw+=`
`+X.raw,pe.text+=`
`+X.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=pe.text):$.push(X),ot=He.length!==z.length,z=z.substring(X.raw.length);continue}if(X=this.tokenizer.text(z)){z=z.substring(X.raw.length),pe=$[$.length-1],pe&&pe.type==="text"?(pe.raw+=`
`+X.raw,pe.text+=`
`+X.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=pe.text):$.push(X);continue}if(z){var dt="Infinite loop on byte: "+z.charCodeAt(0);if(this.options.silent){console.error(dt);break}else throw new Error(dt)}}return this.state.top=!0,$},de.inline=function(z,$){return $===void 0&&($=[]),this.inlineQueue.push({src:z,tokens:$}),$},de.inlineTokens=function(z,$){var ee=this;$===void 0&&($=[]);var X,pe,He,ot=z,dt,Re,Ue;if(this.tokens.links){var wt=Object.keys(this.tokens.links);if(wt.length>0)for(;(dt=this.tokenizer.rules.inline.reflinkSearch.exec(ot))!=null;)wt.includes(dt[0].slice(dt[0].lastIndexOf("[")+1,-1))&&(ot=ot.slice(0,dt.index)+"["+Le("a",dt[0].length-2)+"]"+ot.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(dt=this.tokenizer.rules.inline.blockSkip.exec(ot))!=null;)ot=ot.slice(0,dt.index)+"["+Le("a",dt[0].length-2)+"]"+ot.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(dt=this.tokenizer.rules.inline.escapedEmSt.exec(ot))!=null;)ot=ot.slice(0,dt.index)+"++"+ot.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;z;)if(Re||(Ue=""),Re=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(function(et){return(X=et.call({lexer:ee},z,$))?(z=z.substring(X.raw.length),$.push(X),!0):!1}))){if(X=this.tokenizer.escape(z)){z=z.substring(X.raw.length),$.push(X);continue}if(X=this.tokenizer.tag(z)){z=z.substring(X.raw.length),pe=$[$.length-1],pe&&X.type==="text"&&pe.type==="text"?(pe.raw+=X.raw,pe.text+=X.text):$.push(X);continue}if(X=this.tokenizer.link(z)){z=z.substring(X.raw.length),$.push(X);continue}if(X=this.tokenizer.reflink(z,this.tokens.links)){z=z.substring(X.raw.length),pe=$[$.length-1],pe&&X.type==="text"&&pe.type==="text"?(pe.raw+=X.raw,pe.text+=X.text):$.push(X);continue}if(X=this.tokenizer.emStrong(z,ot,Ue)){z=z.substring(X.raw.length),$.push(X);continue}if(X=this.tokenizer.codespan(z)){z=z.substring(X.raw.length),$.push(X);continue}if(X=this.tokenizer.br(z)){z=z.substring(X.raw.length),$.push(X);continue}if(X=this.tokenizer.del(z)){z=z.substring(X.raw.length),$.push(X);continue}if(X=this.tokenizer.autolink(z,Bn)){z=z.substring(X.raw.length),$.push(X);continue}if(!this.state.inLink&&(X=this.tokenizer.url(z,Bn))){z=z.substring(X.raw.length),$.push(X);continue}if(He=z,this.options.extensions&&this.options.extensions.startInline&&function(){var et=1/0,mi=z.slice(1),ui=void 0;ee.options.extensions.startInline.forEach(function(ps){ui=ps.call({lexer:this},mi),typeof ui=="number"&&ui>=0&&(et=Math.min(et,ui))}),et<1/0&&et>=0&&(He=z.substring(0,et+1))}(),X=this.tokenizer.inlineText(He,Li)){z=z.substring(X.raw.length),X.raw.slice(-1)!=="_"&&(Ue=X.raw.slice(-1)),Re=!0,pe=$[$.length-1],pe&&pe.type==="text"?(pe.raw+=X.raw,pe.text+=X.text):$.push(X);continue}if(z){var Tt="Infinite loop on byte: "+z.charCodeAt(0);if(this.options.silent){console.error(Tt);break}else throw new Error(Tt)}}return $},i(ve,null,[{key:"rules",get:function(){return{block:qe,inline:Fe}}}]),ve}(),Qt=function(){function ve(ae){this.options=ae||e.defaults}var de=ve.prototype;return de.code=function(z,$,ee){var X=($||"").match(/\S*/)[0];if(this.options.highlight){var pe=this.options.highlight(z,X);pe!=null&&pe!==z&&(ee=!0,z=pe)}return z=z.replace(/\n$/,"")+`
`,X?'<pre><code class="'+this.options.langPrefix+b(X,!0)+'">'+(ee?z:b(z,!0))+`</code></pre>
`:"<pre><code>"+(ee?z:b(z,!0))+`</code></pre>
`},de.blockquote=function(z){return`<blockquote>
`+z+`</blockquote>
`},de.html=function(z){return z},de.heading=function(z,$,ee,X){if(this.options.headerIds){var pe=this.options.headerPrefix+X.slug(ee);return"<h"+$+' id="'+pe+'">'+z+"</h"+$+`>
`}return"<h"+$+">"+z+"</h"+$+`>
`},de.hr=function(){return this.options.xhtml?`<hr/>
`:`<hr>
`},de.list=function(z,$,ee){var X=$?"ol":"ul",pe=$&&ee!==1?' start="'+ee+'"':"";return"<"+X+pe+`>
`+z+"</"+X+`>
`},de.listitem=function(z){return"<li>"+z+`</li>
`},de.checkbox=function(z){return"<input "+(z?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},de.paragraph=function(z){return"<p>"+z+`</p>
`},de.table=function(z,$){return $&&($="<tbody>"+$+"</tbody>"),`<table>
<thead>
`+z+`</thead>
`+$+`</table>
`},de.tablerow=function(z){return`<tr>
`+z+`</tr>
`},de.tablecell=function(z,$){var ee=$.header?"th":"td",X=$.align?"<"+ee+' align="'+$.align+'">':"<"+ee+">";return X+z+("</"+ee+`>
`)},de.strong=function(z){return"<strong>"+z+"</strong>"},de.em=function(z){return"<em>"+z+"</em>"},de.codespan=function(z){return"<code>"+z+"</code>"},de.br=function(){return this.options.xhtml?"<br/>":"<br>"},de.del=function(z){return"<del>"+z+"</del>"},de.link=function(z,$,ee){if(z=N(this.options.sanitize,this.options.baseUrl,z),z===null)return ee;var X='<a href="'+b(z)+'"';return $&&(X+=' title="'+$+'"'),X+=">"+ee+"</a>",X},de.image=function(z,$,ee){if(z=N(this.options.sanitize,this.options.baseUrl,z),z===null)return ee;var X='<img src="'+z+'" alt="'+ee+'"';return $&&(X+=' title="'+$+'"'),X+=this.options.xhtml?"/>":">",X},de.text=function(z){return z},ve}(),nn=function(){function ve(){}var de=ve.prototype;return de.strong=function(z){return z},de.em=function(z){return z},de.codespan=function(z){return z},de.del=function(z){return z},de.html=function(z){return z},de.text=function(z){return z},de.link=function(z,$,ee){return""+ee},de.image=function(z,$,ee){return""+ee},de.br=function(){return""},ve}(),un=function(){function ve(){this.seen={}}var de=ve.prototype;return de.serialize=function(z){return z.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},de.getNextSafeSlug=function(z,$){var ee=z,X=0;if(this.seen.hasOwnProperty(ee)){X=this.seen[z];do X++,ee=z+"-"+X;while(this.seen.hasOwnProperty(ee))}return $||(this.seen[z]=X,this.seen[ee]=0),ee},de.slug=function(z,$){$===void 0&&($={});var ee=this.serialize(z);return this.getNextSafeSlug(ee,$.dryrun)},ve}(),sn=function(){function ve(ae){this.options=ae||e.defaults,this.options.renderer=this.options.renderer||new Qt,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new nn,this.slugger=new un}ve.parse=function(z,$){var ee=new ve($);return ee.parse(z)},ve.parseInline=function(z,$){var ee=new ve($);return ee.parseInline(z)};var de=ve.prototype;return de.parse=function(z,$){$===void 0&&($=!0);var ee="",X,pe,He,ot,dt,Re,Ue,wt,Tt,et,mi,ui,ps,It,ji,kn,En,Js,Co,Sa=z.length;for(X=0;X<Sa;X++){if(et=z[X],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[et.type]&&(Co=this.options.extensions.renderers[et.type].call({parser:this},et),Co!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(et.type))){ee+=Co||"";continue}switch(et.type){case"space":continue;case"hr":{ee+=this.renderer.hr();continue}case"heading":{ee+=this.renderer.heading(this.parseInline(et.tokens),et.depth,S(this.parseInline(et.tokens,this.textRenderer)),this.slugger);continue}case"code":{ee+=this.renderer.code(et.text,et.lang,et.escaped);continue}case"table":{for(wt="",Ue="",ot=et.header.length,pe=0;pe<ot;pe++)Ue+=this.renderer.tablecell(this.parseInline(et.header[pe].tokens),{header:!0,align:et.align[pe]});for(wt+=this.renderer.tablerow(Ue),Tt="",ot=et.rows.length,pe=0;pe<ot;pe++){for(Re=et.rows[pe],Ue="",dt=Re.length,He=0;He<dt;He++)Ue+=this.renderer.tablecell(this.parseInline(Re[He].tokens),{header:!1,align:et.align[He]});Tt+=this.renderer.tablerow(Ue)}ee+=this.renderer.table(wt,Tt);continue}case"blockquote":{Tt=this.parse(et.tokens),ee+=this.renderer.blockquote(Tt);continue}case"list":{for(mi=et.ordered,ui=et.start,ps=et.loose,ot=et.items.length,Tt="",pe=0;pe<ot;pe++)ji=et.items[pe],kn=ji.checked,En=ji.task,It="",ji.task&&(Js=this.renderer.checkbox(kn),ps?ji.tokens.length>0&&ji.tokens[0].type==="paragraph"?(ji.tokens[0].text=Js+" "+ji.tokens[0].text,ji.tokens[0].tokens&&ji.tokens[0].tokens.length>0&&ji.tokens[0].tokens[0].type==="text"&&(ji.tokens[0].tokens[0].text=Js+" "+ji.tokens[0].tokens[0].text)):ji.tokens.unshift({type:"text",text:Js}):It+=Js),It+=this.parse(ji.tokens,ps),Tt+=this.renderer.listitem(It,En,kn);ee+=this.renderer.list(Tt,mi,ui);continue}case"html":{ee+=this.renderer.html(et.text);continue}case"paragraph":{ee+=this.renderer.paragraph(this.parseInline(et.tokens));continue}case"text":{for(Tt=et.tokens?this.parseInline(et.tokens):et.text;X+1<Sa&&z[X+1].type==="text";)et=z[++X],Tt+=`
`+(et.tokens?this.parseInline(et.tokens):et.text);ee+=$?this.renderer.paragraph(Tt):Tt;continue}default:{var Za='Token with "'+et.type+'" type was not found.';if(this.options.silent){console.error(Za);return}else throw new Error(Za)}}}return ee},de.parseInline=function(z,$){$=$||this.renderer;var ee="",X,pe,He,ot=z.length;for(X=0;X<ot;X++){if(pe=z[X],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[pe.type]&&(He=this.options.extensions.renderers[pe.type].call({parser:this},pe),He!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(pe.type))){ee+=He||"";continue}switch(pe.type){case"escape":{ee+=$.text(pe.text);break}case"html":{ee+=$.html(pe.text);break}case"link":{ee+=$.link(pe.href,pe.title,this.parseInline(pe.tokens,$));break}case"image":{ee+=$.image(pe.href,pe.title,pe.text);break}case"strong":{ee+=$.strong(this.parseInline(pe.tokens,$));break}case"em":{ee+=$.em(this.parseInline(pe.tokens,$));break}case"codespan":{ee+=$.codespan(pe.text);break}case"br":{ee+=$.br();break}case"del":{ee+=$.del(this.parseInline(pe.tokens,$));break}case"text":{ee+=$.text(pe.text);break}default:{var dt='Token with "'+pe.type+'" type was not found.';if(this.options.silent){console.error(dt);return}else throw new Error(dt)}}}return ee},ve}();function Ct(ve,de,ae){if(typeof ve>"u"||ve===null)throw new Error("marked(): input parameter is undefined or null");if(typeof ve!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(ve)+", string expected");if(typeof de=="function"&&(ae=de,de=null),de=q({},Ct.defaults,de||{}),Ne(de),ae){var z=de.highlight,$;try{$=tn.lex(ve,de)}catch(ot){return ae(ot)}var ee=function(dt){var Re;if(!dt)try{de.walkTokens&&Ct.walkTokens($,de.walkTokens),Re=sn.parse($,de)}catch(Ue){dt=Ue}return de.highlight=z,dt?ae(dt):ae(null,Re)};if(!z||z.length<3||(delete de.highlight,!$.length))return ee();var X=0;Ct.walkTokens($,function(ot){ot.type==="code"&&(X++,setTimeout(function(){z(ot.text,ot.lang,function(dt,Re){if(dt)return ee(dt);Re!=null&&Re!==ot.text&&(ot.text=Re,ot.escaped=!0),X--,X===0&&ee()})},0))}),X===0&&ee();return}function pe(ot){if(ot.message+=`
Please report this to https://github.com/markedjs/marked.`,de.silent)return"<p>An error occurred:</p><pre>"+b(ot.message+"",!0)+"</pre>";throw ot}try{var He=tn.lex(ve,de);if(de.walkTokens){if(de.async)return Promise.all(Ct.walkTokens(He,de.walkTokens)).then(function(){return sn.parse(He,de)}).catch(pe);Ct.walkTokens(He,de.walkTokens)}return sn.parse(He,de)}catch(ot){pe(ot)}}Ct.options=Ct.setOptions=function(ve){return q(Ct.defaults,ve),l(Ct.defaults),Ct},Ct.getDefaults=a,Ct.defaults=e.defaults,Ct.use=function(){for(var ve=arguments.length,de=new Array(ve),ae=0;ae<ve;ae++)de[ae]=arguments[ae];var z=q.apply(void 0,[{}].concat(de)),$=Ct.defaults.extensions||{renderers:{},childTokens:{}},ee;de.forEach(function(X){if(X.extensions&&(ee=!0,X.extensions.forEach(function(He){if(!He.name)throw new Error("extension name required");if(He.renderer){var ot=$.renderers?$.renderers[He.name]:null;ot?$.renderers[He.name]=function(){for(var dt=arguments.length,Re=new Array(dt),Ue=0;Ue<dt;Ue++)Re[Ue]=arguments[Ue];var wt=He.renderer.apply(this,Re);return wt===!1&&(wt=ot.apply(this,Re)),wt}:$.renderers[He.name]=He.renderer}if(He.tokenizer){if(!He.level||He.level!=="block"&&He.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");$[He.level]?$[He.level].unshift(He.tokenizer):$[He.level]=[He.tokenizer],He.start&&(He.level==="block"?$.startBlock?$.startBlock.push(He.start):$.startBlock=[He.start]:He.level==="inline"&&($.startInline?$.startInline.push(He.start):$.startInline=[He.start]))}He.childTokens&&($.childTokens[He.name]=He.childTokens)})),X.renderer&&function(){var He=Ct.defaults.renderer||new Qt,ot=function(Ue){var wt=He[Ue];He[Ue]=function(){for(var Tt=arguments.length,et=new Array(Tt),mi=0;mi<Tt;mi++)et[mi]=arguments[mi];var ui=X.renderer[Ue].apply(He,et);return ui===!1&&(ui=wt.apply(He,et)),ui}};for(var dt in X.renderer)ot(dt);z.renderer=He}(),X.tokenizer&&function(){var He=Ct.defaults.tokenizer||new it,ot=function(Ue){var wt=He[Ue];He[Ue]=function(){for(var Tt=arguments.length,et=new Array(Tt),mi=0;mi<Tt;mi++)et[mi]=arguments[mi];var ui=X.tokenizer[Ue].apply(He,et);return ui===!1&&(ui=wt.apply(He,et)),ui}};for(var dt in X.tokenizer)ot(dt);z.tokenizer=He}(),X.walkTokens){var pe=Ct.defaults.walkTokens;z.walkTokens=function(He){var ot=[];return ot.push(X.walkTokens.call(this,He)),pe&&(ot=ot.concat(pe.call(this,He))),ot}}ee&&(z.extensions=$),Ct.setOptions(z)})},Ct.walkTokens=function(ve,de){for(var ae=[],z=function(){var pe=ee.value;switch(ae=ae.concat(de.call(Ct,pe)),pe.type){case"table":{for(var He=r(pe.header),ot;!(ot=He()).done;){var dt=ot.value;ae=ae.concat(Ct.walkTokens(dt.tokens,de))}for(var Re=r(pe.rows),Ue;!(Ue=Re()).done;)for(var wt=Ue.value,Tt=r(wt),et;!(et=Tt()).done;){var mi=et.value;ae=ae.concat(Ct.walkTokens(mi.tokens,de))}break}case"list":{ae=ae.concat(Ct.walkTokens(pe.items,de));break}default:Ct.defaults.extensions&&Ct.defaults.extensions.childTokens&&Ct.defaults.extensions.childTokens[pe.type]?Ct.defaults.extensions.childTokens[pe.type].forEach(function(ui){ae=ae.concat(Ct.walkTokens(pe[ui],de))}):pe.tokens&&(ae=ae.concat(Ct.walkTokens(pe.tokens,de)))}},$=r(ve),ee;!(ee=$()).done;)z();return ae},Ct.parseInline=function(ve,de){if(typeof ve>"u"||ve===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof ve!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(ve)+", string expected");de=q({},Ct.defaults,de||{}),Ne(de);try{var ae=tn.lexInline(ve,de);return de.walkTokens&&Ct.walkTokens(ae,de.walkTokens),sn.parseInline(ae,de)}catch(z){if(z.message+=`
Please report this to https://github.com/markedjs/marked.`,de.silent)return"<p>An error occurred:</p><pre>"+b(z.message+"",!0)+"</pre>";throw z}},Ct.Parser=sn,Ct.parser=sn.parse,Ct.Renderer=Qt,Ct.TextRenderer=nn,Ct.Lexer=tn,Ct.lexer=tn.lex,Ct.Tokenizer=it,Ct.Slugger=un,Ct.parse=Ct;var Ss=Ct.options,Dn=Ct.setOptions,Wn=Ct.use,rs=Ct.walkTokens,Ri=Ct.parseInline,Vn=Ct,Jo=sn.parse,Xr=tn.lex;e.Lexer=tn,e.Parser=sn,e.Renderer=Qt,e.Slugger=un,e.TextRenderer=nn,e.Tokenizer=it,e.getDefaults=a,e.lexer=Xr,e.marked=Ct,e.options=Ss,e.parse=Vn,e.parseInline=Ri,e.parser=Jo,e.setOptions=Dn,e.use=Wn,e.walkTokens=rs,Object.defineProperty(e,"__esModule",{value:!0})})})();Yr.Lexer||exports.Lexer;Yr.Parser||exports.Parser;Yr.Renderer||exports.Renderer;Yr.Slugger||exports.Slugger;Yr.TextRenderer||exports.TextRenderer;Yr.Tokenizer||exports.Tokenizer;Yr.getDefaults||exports.getDefaults;Yr.lexer||exports.lexer;var ju=Yr.marked||exports.marked;Yr.options||exports.options;Yr.parse||exports.parse;Yr.parseInline||exports.parseInline;Yr.parser||exports.parser;Yr.setOptions||exports.setOptions;Yr.use||exports.use;Yr.walkTokens||exports.walkTokens;function MRe(o){return JSON.stringify(o,ARe)}function l8(o){let e=JSON.parse(o);return e=c8(e),e}function ARe(o,e){return e instanceof RegExp?{$mid:2,source:e.source,flags:e.flags}:e}function c8(o,e=0){if(!o||e>200)return o;if(typeof o=="object"){switch(o.$mid){case 1:return gt.revive(o);case 2:return new RegExp(o.source,o.flags);case 17:return new Date(o.source)}if(o instanceof NA||o instanceof Uint8Array)return o;if(Array.isArray(o))for(let t=0;t<o.length;++t)o[t]=c8(o[t],e+1);else for(const t in o)Object.hasOwnProperty.call(o,t)&&(o[t]=c8(o[t],e+1))}return o}const q3=Object.freeze({image:(o,e,t)=>{let i=[],n=[];return o&&({href:o,dimensions:i}=RRe(o),n.push(`src="${LT(o)}"`)),t&&n.push(`alt="${LT(t)}"`),e&&n.push(`title="${LT(e)}"`),i.length&&(n=n.concat(i)),"<img "+n.join(" ")+">"},paragraph:o=>`<p>${o}</p>`,link:(o,e,t)=>typeof o!="string"?"":(o===t&&(t=K3(t)),e=typeof e=="string"?LT(K3(e)):"",o=K3(o),o=o.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),`<a href="${o}" title="${e||o}" draggable="false">${t}</a>`)});function tP(o,e={},t={}){var i,n;const s=new he;let r=!1;const a=JH(e),l=function(S){let L;try{L=l8(decodeURIComponent(S))}catch{}return L?(L=Fte(L,x=>{if(o.uris&&o.uris[x])return gt.revive(o.uris[x])}),encodeURIComponent(JSON.stringify(L))):S},c=function(S,L){const x=o.uris&&o.uris[S];let D=gt.revive(x);return L?S.startsWith(Pt.data+":")?S:(D||(D=gt.parse(S)),Nie.uriToBrowserUri(D).toString(!0)):!D||gt.parse(S).toString()===D.toString()?S:(D.query&&(D=D.with({query:l(D.query)})),D.toString())},u=new ju.Renderer;u.image=q3.image,u.link=q3.link,u.paragraph=q3.paragraph;const f=[],g=[];if(e.codeBlockRendererSync?u.code=(S,L)=>{const x=a8.nextId(),D=e.codeBlockRendererSync(gX(L),S);return g.push([x,D]),`<div class="code" data-code="${x}">${hR(S)}</div>`}:e.codeBlockRenderer&&(u.code=(S,L)=>{const x=a8.nextId(),D=e.codeBlockRenderer(gX(L),S);return f.push(D.then(E=>[x,E])),`<div class="code" data-code="${x}">${hR(S)}</div>`}),e.actionHandler){const S=function(D){let E=D.target;if(!(E.tagName!=="A"&&(E=E.parentElement,!E||E.tagName!=="A")))try{let N=E.dataset.href;N&&(o.baseUri&&(N=G3(gt.from(o.baseUri),N)),e.actionHandler.callback(N,D))}catch(N){Nt(N)}finally{D.preventDefault()}},L=e.actionHandler.disposables.add(new Xt(a,"click")),x=e.actionHandler.disposables.add(new Xt(a,"auxclick"));e.actionHandler.disposables.add(Ie.any(L.event,x.event)(D=>{const E=new Wc(ft(a),D);!E.leftButton&&!E.middleButton||S(E)})),e.actionHandler.disposables.add(oe(a,"keydown",D=>{const E=new _n(D);!E.equals(10)&&!E.equals(3)||S(E)}))}o.supportHtml||(t.sanitizer=S=>(o.isTrusted?S.match(/^(<span[^>]+>)|(<\/\s*span>)$/):void 0)?S:"",t.sanitize=!0,t.silent=!0),t.renderer=u;let p=(i=o.value)!==null&&i!==void 0?i:"";p.length>1e5&&(p=`${p.substr(0,1e5)}`),o.supportThemeIcons&&(p=DRe(p));let _;if(e.fillInIncompleteTokens){const S={...ju.defaults,...t},L=ju.lexer(p,S),x=zRe(L);_=ju.parser(x,S)}else _=ju.parse(p,t);o.supportThemeIcons&&(_=Yp(_).map(L=>typeof L=="string"?L:L.outerHTML).join(""));const y=new DOMParser().parseFromString(d8(o,_),"text/html");if(y.body.querySelectorAll("img").forEach(S=>{const L=S.getAttribute("src");if(L){let x=L;try{o.baseUri&&(x=G3(gt.from(o.baseUri),x))}catch{}S.src=c(x,!0)}}),y.body.querySelectorAll("a").forEach(S=>{const L=S.getAttribute("href");if(S.setAttribute("href",""),!L||/^data:|javascript:/i.test(L)||/^command:/i.test(L)&&!o.isTrusted||/^command:(\/\/\/)?_workbench\.downloadResource/i.test(L))S.replaceWith(...S.childNodes);else{let x=c(L,!1);o.baseUri&&(x=G3(gt.from(o.baseUri),L)),S.dataset.href=x}}),a.innerHTML=d8(o,y.body.innerHTML),f.length>0)Promise.all(f).then(S=>{var L,x;if(r)return;const D=new Map(S),E=a.querySelectorAll("div[data-code]");for(const N of E){const M=D.get((L=N.dataset.code)!==null&&L!==void 0?L:"");M&&_o(N,M)}(x=e.asyncRenderCallback)===null||x===void 0||x.call(e)});else if(g.length>0){const S=new Map(g),L=a.querySelectorAll("div[data-code]");for(const x of L){const D=S.get((n=x.dataset.code)!==null&&n!==void 0?n:"");D&&_o(x,D)}}if(e.asyncRenderCallback)for(const S of a.getElementsByTagName("img")){const L=s.add(oe(S,"load",()=>{L.dispose(),e.asyncRenderCallback()}))}return{element:a,dispose:()=>{r=!0,s.dispose()}}}function gX(o){if(!o)return"";const e=o.split(/[\s+|:|,|\{|\?]/,1);return e.length?e[0]:o}function G3(o,e){return/^\w[\w\d+.-]*:/.test(e)?e:o.path.endsWith("/")?CQ(o,e).toString():CQ(GA(o),e).toString()}function d8(o,e){const{config:t,allowedSchemes:i}=ORe(o);t9("uponSanitizeAttribute",(s,r)=>{var a;if(r.attrName==="style"||r.attrName==="class"){if(s.tagName==="SPAN"){if(r.attrName==="style"){r.keepAttr=/^(color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z]+)+\));)?(background-color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z]+)+\));)?$/.test(r.attrValue);return}else if(r.attrName==="class"){r.keepAttr=/^codicon codicon-[a-z\-]+( codicon-modifier-[a-z\-]+)?$/.test(r.attrValue);return}}r.keepAttr=!1;return}else if(s.tagName==="INPUT"&&((a=s.attributes.getNamedItem("type"))===null||a===void 0?void 0:a.value)==="checkbox"){if(r.attrName==="type"&&r.attrValue==="checkbox"||r.attrName==="disabled"||r.attrName==="checked"){r.keepAttr=!0;return}r.keepAttr=!1}}),t9("uponSanitizeElement",(s,r)=>{var a,l;r.tagName==="input"&&(((a=s.attributes.getNamedItem("type"))===null||a===void 0?void 0:a.value)==="checkbox"?s.setAttribute("disabled",""):(l=s.parentElement)===null||l===void 0||l.removeChild(s))});const n=ewe(i);try{return Eie(e,{...t,RETURN_TRUSTED_TYPE:!0})}finally{Iie("uponSanitizeAttribute"),n.dispose()}}const PRe=["align","autoplay","alt","checked","class","controls","data-code","data-href","disabled","draggable","height","href","loop","muted","playsinline","poster","src","style","target","title","type","width","start"];function ORe(o){const e=[Pt.http,Pt.https,Pt.mailto,Pt.data,Pt.file,Pt.vscodeFileResource,Pt.vscodeRemote,Pt.vscodeRemoteResource];return o.isTrusted&&e.push(Pt.command),{config:{ALLOWED_TAGS:[...twe],ALLOWED_ATTR:PRe,ALLOW_UNKNOWN_PROTOCOLS:!0},allowedSchemes:e}}function FRe(o){return typeof o=="string"?o:BRe(o)}function BRe(o){var e;let t=(e=o.value)!==null&&e!==void 0?e:"";t.length>1e5&&(t=`${t.substr(0,1e5)}`);const i=ju.parse(t,{renderer:VRe.value}).replace(/&(#\d+|[a-zA-Z]+);/g,n=>{var s;return(s=WRe.get(n))!==null&&s!==void 0?s:n});return d8({isTrusted:!1},i).toString()}const WRe=new Map([["&quot;",'"'],["&nbsp;"," "],["&amp;","&"],["&#39;","'"],["&lt;","<"],["&gt;",">"]]),VRe=new tu(()=>{const o=new ju.Renderer;return o.code=e=>e,o.blockquote=e=>e,o.html=e=>"",o.heading=(e,t,i)=>e+`
`,o.hr=()=>"",o.list=(e,t)=>e,o.listitem=e=>e+`
`,o.paragraph=e=>e+`
`,o.table=(e,t)=>e+t+`
`,o.tablerow=e=>e,o.tablecell=(e,t)=>e+" ",o.strong=e=>e,o.em=e=>e,o.codespan=e=>e,o.br=()=>`
`,o.del=e=>e,o.image=(e,t,i)=>"",o.text=e=>e,o.link=(e,t,i)=>i,o});function lz(o){let e="";return o.forEach(t=>{e+=t.raw}),e}function HRe(o){var e,t;for(let i=0;i<o.tokens.length;i++){const n=o.tokens[i];if(n.type==="text"){const s=n.raw.split(`
`),r=s[s.length-1];if(r.includes("`"))return $Re(o);if(r.includes("**"))return YRe(o);if(r.match(/\*\w/))return jRe(o);if(r.match(/(^|\s)__\w/))return ZRe(o);if(r.match(/(^|\s)_\w/))return KRe(o);if(r.match(/(^|\s)\[.*\]\(\w*/)){const a=o.tokens.slice(i+1);return((e=a[0])===null||e===void 0?void 0:e.type)==="link"&&((t=a[1])===null||t===void 0?void 0:t.type)==="text"&&a[1].raw.match(/^ *"[^"]*$/)?qRe(o):mX(o)}else{if(pX(r))return mX(o);if(r.match(/(^|\s)\[\w/)&&!o.tokens.slice(i+1).some(a=>pX(a.raw)))return GRe(o)}}}}function pX(o){return!!o.match(/^[^\[]*\]\([^\)]*$/)}function zRe(o){let e,t;for(e=0;e<o.length;e++){const i=o[e];let n;if(i.type==="paragraph"&&(n=i.raw.match(/(\n|^)(````*)/))){const s=n[2];t=URe(o.slice(e),s);break}if(i.type==="paragraph"&&i.raw.match(/(\n|^)\|/)){t=QRe(o.slice(e));break}if(e===o.length-1&&i.type==="paragraph"){const s=HRe(i);if(s){t=[s];break}}}if(t){const i=[...o.slice(0,e),...t];return i.links=o.links,i}return o}function URe(o,e){const t=lz(o);return ju.lexer(t+`
${e}`)}function $Re(o){return Fm(o,"`")}function jRe(o){return Fm(o,"*")}function KRe(o){return Fm(o,"_")}function mX(o){return Fm(o,")")}function qRe(o){return Fm(o,'")')}function GRe(o){return Fm(o,"](about:blank)")}function YRe(o){return Fm(o,"**")}function ZRe(o){return Fm(o,"__")}function Fm(o,e){const t=lz(Array.isArray(o)?o:[o]);return ju.lexer(t+e)[0]}function QRe(o){const e=lz(o),t=e.split(`
`);let i,n=!1;for(let s=0;s<t.length;s++){const r=t[s].trim();if(typeof i>"u"&&r.match(/^\s*\|/)){const a=r.match(/(\|[^\|]+)(?=\||$)/g);a&&(i=a.length)}else if(typeof i=="number")if(r.match(/^\s*\|/)){if(s!==t.length-1)return;n=!0}else return}if(typeof i=="number"&&i>0){const s=n?t.slice(0,-1).join(`
`):e,r=!!s.match(/\|\s*$/),a=s+(r?"":"|")+`
|${" --- |".repeat(i)}`;return ju.lexer(a)}}var XRe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},_X=function(o,e){return function(t,i){e(t,i,o)}},u8;let mh=u8=class{constructor(e,t,i){this._options=e,this._languageService=t,this._openerService=i,this._onDidRenderAsync=new Y,this.onDidRenderAsync=this._onDidRenderAsync.event}dispose(){this._onDidRenderAsync.dispose()}render(e,t,i){if(!e)return{element:document.createElement("span"),dispose:()=>{}};const n=new he,s=n.add(tP(e,{...this._getRenderOptions(e,n),...t},i));return s.element.classList.add("rendered-markdown"),{element:s.element,dispose:()=>n.dispose()}}_getRenderOptions(e,t){return{codeBlockRenderer:async(i,n)=>{var s,r,a;let l;i?l=this._languageService.getLanguageIdByLanguageName(i):this._options.editor&&(l=(s=this._options.editor.getModel())===null||s===void 0?void 0:s.getLanguageId()),l||(l=yl);const c=await UTe(this._languageService,n,l),u=document.createElement("span");if(u.innerHTML=(a=(r=u8._ttpTokenizer)===null||r===void 0?void 0:r.createHTML(c))!==null&&a!==void 0?a:c,this._options.editor){const f=this._options.editor.getOption(50);vo(u,f)}else this._options.codeBlockFontFamily&&(u.style.fontFamily=this._options.codeBlockFontFamily);return this._options.codeBlockFontSize!==void 0&&(u.style.fontSize=this._options.codeBlockFontSize),u},asyncRenderCallback:()=>this._onDidRenderAsync.fire(),actionHandler:{callback:i=>cz(this._openerService,i,e.isTrusted),disposables:t}}}};mh._ttpTokenizer=fg("tokenizeToString",{createHTML(o){return o}});mh=u8=XRe([_X(1,xn),_X(2,wa)],mh);async function cz(o,e,t){try{return await o.open(e,{fromUserGesture:!0,allowContributedOpeners:!0,allowCommands:JRe(t)})}catch(i){return Nt(i),!1}}function JRe(o){return o===!0?!0:o&&Array.isArray(o.enabledCommands)?o.enabledCommands:!1}var eMe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},wS=function(o,e){return function(t,i){e(t,i,o)}};const xu=ye;let h8=class extends Rl{get _targetWindow(){return ft(this._target.targetElements[0])}get _targetDocumentElement(){return ft(this._target.targetElements[0]).document.documentElement}get isDisposed(){return this._isDisposed}get isMouseIn(){return this._lockMouseTracker.isMouseIn}get domNode(){return this._hover.containerDomNode}get onDispose(){return this._onDispose.event}get onRequestLayout(){return this._onRequestLayout.event}get anchor(){return this._hoverPosition===2?0:1}get x(){return this._x}get y(){return this._y}get isLocked(){return this._isLocked}set isLocked(e){this._isLocked!==e&&(this._isLocked=e,this._hoverContainer.classList.toggle("locked",this._isLocked))}constructor(e,t,i,n,s,r){var a,l,c,u,f,g,p,_;super(),this._keybindingService=t,this._configurationService=i,this._openerService=n,this._instantiationService=s,this._accessibilityService=r,this._messageListeners=new he,this._isDisposed=!1,this._forcePosition=!1,this._x=0,this._y=0,this._isLocked=!1,this._enableFocusTraps=!1,this._addedFocusTrap=!1,this._onDispose=this._register(new Y),this._onRequestLayout=this._register(new Y),this._linkHandler=e.linkHandler||(D=>cz(this._openerService,D,zd(e.content)?e.content.isTrusted:void 0)),this._target="targetElements"in e.target?e.target:new tMe(e.target),this._hoverPointer=!((a=e.appearance)===null||a===void 0)&&a.showPointer?xu("div.workbench-hover-pointer"):void 0,this._hover=this._register(new XH),this._hover.containerDomNode.classList.add("workbench-hover","fadeIn"),!((l=e.appearance)===null||l===void 0)&&l.compact&&this._hover.containerDomNode.classList.add("workbench-hover","compact"),!((c=e.appearance)===null||c===void 0)&&c.skipFadeInAnimation&&this._hover.containerDomNode.classList.add("skip-fade-in"),e.additionalClasses&&this._hover.containerDomNode.classList.add(...e.additionalClasses),!((u=e.position)===null||u===void 0)&&u.forcePosition&&(this._forcePosition=!0),e.trapFocus&&(this._enableFocusTraps=!0),this._hoverPosition=(g=(f=e.position)===null||f===void 0?void 0:f.hoverPosition)!==null&&g!==void 0?g:3,this.onmousedown(this._hover.containerDomNode,D=>D.stopPropagation()),this.onkeydown(this._hover.containerDomNode,D=>{D.equals(9)&&this.dispose()}),this._register(oe(this._targetWindow,"blur",()=>this.dispose()));const b=xu("div.hover-row.markdown-hover"),y=xu("div.hover-contents");if(typeof e.content=="string")y.textContent=e.content,y.style.whiteSpace="pre-wrap";else if(e.content instanceof HTMLElement)y.appendChild(e.content),y.classList.add("html-hover-contents");else{const D=e.content,E=this._instantiationService.createInstance(mh,{codeBlockFontFamily:this._configurationService.getValue("editor").fontFamily||ga.fontFamily}),{element:N}=E.render(D,{actionHandler:{callback:M=>this._linkHandler(M),disposables:this._messageListeners},asyncRenderCallback:()=>{y.classList.add("code-hover-contents"),this.layout(),this._onRequestLayout.fire()}});y.appendChild(N)}if(b.appendChild(y),this._hover.contentsDomNode.appendChild(b),e.actions&&e.actions.length>0){const D=xu("div.hover-row.status-bar"),E=xu("div.actions");e.actions.forEach(N=>{const M=this._keybindingService.lookupKeybinding(N.commandId),F=M?M.getLabel():null;XA.render(E,{label:N.label,commandId:N.commandId,run:H=>{N.run(H),this.dispose()},iconClass:N.iconClass},F)}),D.appendChild(E),this._hover.containerDomNode.appendChild(D)}this._hoverContainer=xu("div.workbench-hover-container"),this._hoverPointer&&this._hoverContainer.appendChild(this._hoverPointer),this._hoverContainer.appendChild(this._hover.containerDomNode);let S;if(e.actions&&e.actions.length>0?S=!1:((p=e.persistence)===null||p===void 0?void 0:p.hideOnHover)===void 0?S=typeof e.content=="string"||zd(e.content)&&!e.content.value.includes("](")&&!e.content.value.includes("</a>"):S=e.persistence.hideOnHover,S&&(!((_=e.appearance)===null||_===void 0)&&_.showHoverHint)){const D=xu("div.hover-row.status-bar"),E=xu("div.info");E.textContent=v("hoverhint","Hold {0} key to mouse over",Kt?"Option":"Alt"),D.appendChild(E),this._hover.containerDomNode.appendChild(D)}const L=[...this._target.targetElements];S||L.push(this._hoverContainer);const x=this._register(new vX(L));if(this._register(x.onMouseOut(()=>{this._isLocked||this.dispose()})),S){const D=[...this._target.targetElements,this._hoverContainer];this._lockMouseTracker=this._register(new vX(D)),this._register(this._lockMouseTracker.onMouseOut(()=>{this._isLocked||this.dispose()}))}else this._lockMouseTracker=x}addFocusTrap(){if(!this._enableFocusTraps||this._addedFocusTrap)return;this._addedFocusTrap=!0;const e=this._hover.containerDomNode,t=this.findLastFocusableChild(this._hover.containerDomNode);if(t){const i=QV(this._hoverContainer,xu("div")),n=ge(this._hoverContainer,xu("div"));i.tabIndex=0,n.tabIndex=0,this._register(oe(n,"focus",s=>{e.focus(),s.preventDefault()})),this._register(oe(i,"focus",s=>{t.focus(),s.preventDefault()}))}}findLastFocusableChild(e){if(e.hasChildNodes())for(let t=0;t<e.childNodes.length;t++){const i=e.childNodes.item(e.childNodes.length-t-1);if(i.nodeType===i.ELEMENT_NODE){const s=i;if(typeof s.tabIndex=="number"&&s.tabIndex>=0)return s}const n=this.findLastFocusableChild(i);if(n)return n}}render(e){var t;e.appendChild(this._hoverContainer);const n=this._hoverContainer.contains(this._hoverContainer.ownerDocument.activeElement)&&eoe(this._configurationService.getValue("accessibility.verbosity.hover")===!0&&this._accessibilityService.isScreenReaderOptimized(),(t=this._keybindingService.lookupKeybinding("editor.action.accessibleView"))===null||t===void 0?void 0:t.getAriaLabel());n&&fh(n),this.layout(),this.addFocusTrap()}layout(){this._hover.containerDomNode.classList.remove("right-aligned"),this._hover.contentsDomNode.style.maxHeight="";const e=u=>{const f=Pie(u),g=u.getBoundingClientRect();return{top:g.top*f,bottom:g.bottom*f,right:g.right*f,left:g.left*f}},t=this._target.targetElements.map(u=>e(u)),{top:i,right:n,bottom:s,left:r}=t[0],a=n-r,l=s-i,c={top:i,right:n,bottom:s,left:r,width:a,height:l,center:{x:r+a/2,y:i+l/2}};if(this.adjustHorizontalHoverPosition(c),this.adjustVerticalHoverPosition(c),this.adjustHoverMaxHeight(c),this._hoverContainer.style.padding="",this._hoverContainer.style.margin="",this._hoverPointer){switch(this._hoverPosition){case 1:c.left+=3,c.right+=3,this._hoverContainer.style.paddingLeft="3px",this._hoverContainer.style.marginLeft="-3px";break;case 0:c.left-=3,c.right-=3,this._hoverContainer.style.paddingRight="3px",this._hoverContainer.style.marginRight="-3px";break;case 2:c.top+=3,c.bottom+=3,this._hoverContainer.style.paddingTop="3px",this._hoverContainer.style.marginTop="-3px";break;case 3:c.top-=3,c.bottom-=3,this._hoverContainer.style.paddingBottom="3px",this._hoverContainer.style.marginBottom="-3px";break}c.center.x=c.left+a/2,c.center.y=c.top+l/2}this.computeXCordinate(c),this.computeYCordinate(c),this._hoverPointer&&(this._hoverPointer.classList.remove("top"),this._hoverPointer.classList.remove("left"),this._hoverPointer.classList.remove("right"),this._hoverPointer.classList.remove("bottom"),this.setHoverPointerPosition(c)),this._hover.onContentsChanged()}computeXCordinate(e){const t=this._hover.containerDomNode.clientWidth+2;this._target.x!==void 0?this._x=this._target.x:this._hoverPosition===1?this._x=e.right:this._hoverPosition===0?this._x=e.left-t:(this._hoverPointer?this._x=e.center.x-this._hover.containerDomNode.clientWidth/2:this._x=e.left,this._x+t>=this._targetDocumentElement.clientWidth&&(this._hover.containerDomNode.classList.add("right-aligned"),this._x=Math.max(this._targetDocumentElement.clientWidth-t-2,this._targetDocumentElement.clientLeft))),this._x<this._targetDocumentElement.clientLeft&&(this._x=e.left+2)}computeYCordinate(e){this._target.y!==void 0?this._y=this._target.y:this._hoverPosition===3?this._y=e.top:this._hoverPosition===2?this._y=e.bottom-2:this._hoverPointer?this._y=e.center.y+this._hover.containerDomNode.clientHeight/2:this._y=e.bottom,this._y>this._targetWindow.innerHeight&&(this._y=e.bottom)}adjustHorizontalHoverPosition(e){if(this._target.x!==void 0)return;const t=this._hoverPointer?3:0;if(this._forcePosition){const i=t+2;this._hoverPosition===1?this._hover.containerDomNode.style.maxWidth=`${this._targetDocumentElement.clientWidth-e.right-i}px`:this._hoverPosition===0&&(this._hover.containerDomNode.style.maxWidth=`${e.left-i}px`);return}this._hoverPosition===1?this._targetDocumentElement.clientWidth-e.right<this._hover.containerDomNode.clientWidth+t&&(e.left>=this._hover.containerDomNode.clientWidth+t?this._hoverPosition=0:this._hoverPosition=2):this._hoverPosition===0&&(e.left<this._hover.containerDomNode.clientWidth+t&&(this._targetDocumentElement.clientWidth-e.right>=this._hover.containerDomNode.clientWidth+t?this._hoverPosition=1:this._hoverPosition=2),e.left-this._hover.containerDomNode.clientWidth-t<=this._targetDocumentElement.clientLeft&&(this._hoverPosition=1))}adjustVerticalHoverPosition(e){if(this._target.y!==void 0||this._forcePosition)return;const t=this._hoverPointer?3:0;this._hoverPosition===3?e.top-this._hover.containerDomNode.clientHeight-t<0&&(this._hoverPosition=2):this._hoverPosition===2&&e.bottom+this._hover.containerDomNode.clientHeight+t>this._targetWindow.innerHeight&&(this._hoverPosition=3)}adjustHoverMaxHeight(e){let t=this._targetWindow.innerHeight/2;if(this._forcePosition){const i=(this._hoverPointer?3:0)+2;this._hoverPosition===3?t=Math.min(t,e.top-i):this._hoverPosition===2&&(t=Math.min(t,this._targetWindow.innerHeight-e.bottom-i))}if(this._hover.containerDomNode.style.maxHeight=`${t}px`,this._hover.contentsDomNode.clientHeight<this._hover.contentsDomNode.scrollHeight){const i=`${this._hover.scrollbar.options.verticalScrollbarSize}px`;this._hover.contentsDomNode.style.paddingRight!==i&&(this._hover.contentsDomNode.style.paddingRight=i)}}setHoverPointerPosition(e){if(this._hoverPointer)switch(this._hoverPosition){case 0:case 1:{this._hoverPointer.classList.add(this._hoverPosition===0?"right":"left");const t=this._hover.containerDomNode.clientHeight;t>e.height?this._hoverPointer.style.top=`${e.center.y-(this._y-t)-3}px`:this._hoverPointer.style.top=`${Math.round(t/2)-3}px`;break}case 3:case 2:{this._hoverPointer.classList.add(this._hoverPosition===3?"bottom":"top");const t=this._hover.containerDomNode.clientWidth;let i=Math.round(t/2)-3;const n=this._x+i;(n<e.left||n>e.right)&&(i=e.center.x-this._x-3),this._hoverPointer.style.left=`${i}px`;break}}}focus(){this._hover.containerDomNode.focus()}dispose(){this._isDisposed||(this._onDispose.fire(),this._hoverContainer.remove(),this._messageListeners.dispose(),this._target.dispose(),super.dispose()),this._isDisposed=!0}};h8=eMe([wS(1,Bi),wS(2,$t),wS(3,wa),wS(4,ct),wS(5,mc)],h8);class vX extends Rl{get onMouseOut(){return this._onMouseOut.event}get isMouseIn(){return this._isMouseIn}constructor(e){super(),this._elements=e,this._isMouseIn=!0,this._onMouseOut=this._register(new Y),this._elements.forEach(t=>this.onmouseover(t,()=>this._onTargetMouseOver(t))),this._elements.forEach(t=>this.onmouseleave(t,()=>this._onTargetMouseLeave(t)))}_onTargetMouseOver(e){this._isMouseIn=!0,this._clearEvaluateMouseStateTimeout(e)}_onTargetMouseLeave(e){this._isMouseIn=!1,this._evaluateMouseState(e)}_evaluateMouseState(e){this._clearEvaluateMouseStateTimeout(e),this._mouseTimeout=ft(e).setTimeout(()=>this._fireIfMouseOutside(),0)}_clearEvaluateMouseStateTimeout(e){this._mouseTimeout&&(ft(e).clearTimeout(this._mouseTimeout),this._mouseTimeout=void 0)}_fireIfMouseOutside(){this._isMouseIn||this._onMouseOut.fire()}}class tMe{constructor(e){this._element=e,this.targetElements=[this._element]}dispose(){}}var $o;(function(o){function e(s,r){if(s.start>=r.end||r.start>=s.end)return{start:0,end:0};const a=Math.max(s.start,r.start),l=Math.min(s.end,r.end);return l-a<=0?{start:0,end:0}:{start:a,end:l}}o.intersect=e;function t(s){return s.end-s.start<=0}o.isEmpty=t;function i(s,r){return!t(e(s,r))}o.intersects=i;function n(s,r){const a=[],l={start:s.start,end:Math.min(r.start,s.end)},c={start:Math.max(r.end,s.start),end:s.end};return t(l)||a.push(l),t(c)||a.push(c),a}o.relativeComplement=n})($o||($o={}));function iMe(o){const e=o;return!!e&&typeof e.x=="number"&&typeof e.y=="number"}var Fp;(function(o){o[o.AVOID=0]="AVOID",o[o.ALIGN=1]="ALIGN"})(Fp||(Fp={}));function hC(o,e,t){const i=t.mode===Fp.ALIGN?t.offset:t.offset+t.size,n=t.mode===Fp.ALIGN?t.offset+t.size:t.offset;return t.position===0?e<=o-i?i:e<=n?n-e:Math.max(o-e,0):e<=n?n-e:e<=o-i?i:0}class b1 extends J{constructor(e,t){super(),this.container=null,this.useFixedPosition=!1,this.useShadowDOM=!1,this.delegate=null,this.toDisposeOnClean=J.None,this.toDisposeOnSetContainer=J.None,this.shadowRoot=null,this.shadowRootHostElement=null,this.view=ye(".context-view"),Rr(this.view),this.setContainer(e,t),this._register(lt(()=>this.setContainer(null,1)))}setContainer(e,t){var i;this.useFixedPosition=t!==1;const n=this.useShadowDOM;if(this.useShadowDOM=t===3,!(e===this.container&&n===this.useShadowDOM)&&(this.container&&(this.toDisposeOnSetContainer.dispose(),this.shadowRoot?(this.shadowRoot.removeChild(this.view),this.shadowRoot=null,(i=this.shadowRootHostElement)===null||i===void 0||i.remove(),this.shadowRootHostElement=null):this.container.removeChild(this.view),this.container=null),e)){if(this.container=e,this.useShadowDOM){this.shadowRootHostElement=ye(".shadow-root-host"),this.container.appendChild(this.shadowRootHostElement),this.shadowRoot=this.shadowRootHostElement.attachShadow({mode:"open"});const r=document.createElement("style");r.textContent=nMe,this.shadowRoot.appendChild(r),this.shadowRoot.appendChild(this.view),this.shadowRoot.appendChild(ye("slot"))}else this.container.appendChild(this.view);const s=new he;b1.BUBBLE_UP_EVENTS.forEach(r=>{s.add(ss(this.container,r,a=>{this.onDOMEvent(a,!1)}))}),b1.BUBBLE_DOWN_EVENTS.forEach(r=>{s.add(ss(this.container,r,a=>{this.onDOMEvent(a,!0)},!0))}),this.toDisposeOnSetContainer=s}}show(e){var t,i,n;this.isVisible()&&this.hide(),Zo(this.view),this.view.className="context-view",this.view.style.top="0px",this.view.style.left="0px",this.view.style.zIndex=`${2575+((t=e.layer)!==null&&t!==void 0?t:0)}`,this.view.style.position=this.useFixedPosition?"fixed":"absolute",Ba(this.view),this.toDisposeOnClean=e.render(this.view)||J.None,this.delegate=e,this.doLayout(),(n=(i=this.delegate).focus)===null||n===void 0||n.call(i)}getViewElement(){return this.view}layout(){var e,t;if(this.isVisible()){if(this.delegate.canRelayout===!1&&!($d&&UV.pointerEvents)){this.hide();return}(t=(e=this.delegate)===null||e===void 0?void 0:e.layout)===null||t===void 0||t.call(e),this.doLayout()}}doLayout(){if(!this.isVisible())return;const e=this.delegate.getAnchor();let t;if(e instanceof HTMLElement){const g=ws(e),p=Pie(e);t={top:g.top*p,left:g.left*p,width:g.width*p,height:g.height*p}}else iMe(e)?t={top:e.y,left:e.x,width:e.width||1,height:e.height||2}:t={top:e.posy,left:e.posx,width:2,height:2};const i=Ir(this.view),n=Ef(this.view),s=this.delegate.anchorPosition||0,r=this.delegate.anchorAlignment||0,a=this.delegate.anchorAxisAlignment||0;let l,c;const u=z1e();if(a===0){const g={offset:t.top-u.pageYOffset,size:t.height,position:s===0?0:1},p={offset:t.left,size:t.width,position:r===0?0:1,mode:Fp.ALIGN};l=hC(u.innerHeight,n,g)+u.pageYOffset,$o.intersects({start:l,end:l+n},{start:g.offset,end:g.offset+g.size})&&(p.mode=Fp.AVOID),c=hC(u.innerWidth,i,p)}else{const g={offset:t.left,size:t.width,position:r===0?0:1},p={offset:t.top,size:t.height,position:s===0?0:1,mode:Fp.ALIGN};c=hC(u.innerWidth,i,g),$o.intersects({start:c,end:c+i},{start:g.offset,end:g.offset+g.size})&&(p.mode=Fp.AVOID),l=hC(u.innerHeight,n,p)+u.pageYOffset}this.view.classList.remove("top","bottom","left","right"),this.view.classList.add(s===0?"bottom":"top"),this.view.classList.add(r===0?"left":"right"),this.view.classList.toggle("fixed",this.useFixedPosition);const f=ws(this.container);this.view.style.top=`${l-(this.useFixedPosition?ws(this.view).top:f.top)}px`,this.view.style.left=`${c-(this.useFixedPosition?ws(this.view).left:f.left)}px`,this.view.style.width="initial"}hide(e){const t=this.delegate;this.delegate=null,t!=null&&t.onHide&&t.onHide(e),this.toDisposeOnClean.dispose(),Rr(this.view)}isVisible(){return!!this.delegate}onDOMEvent(e,t){this.delegate&&(this.delegate.onDOMEvent?this.delegate.onDOMEvent(e,ft(e).document.activeElement):t&&!ao(e.target,this.container)&&this.hide())}dispose(){this.hide(),super.dispose()}}b1.BUBBLE_UP_EVENTS=["click","keydown","focus","blur"];b1.BUBBLE_DOWN_EVENTS=["click"];const nMe=`
	:host {
		all: initial; /* 1st rule so subsequent properties are reset. */
	}

	.codicon[class*='codicon-'] {
		font: normal normal normal 16px/1 codicon;
		display: inline-block;
		text-decoration: none;
		text-rendering: auto;
		text-align: center;
		-webkit-font-smoothing: antialiased;
		-moz-osx-font-smoothing: grayscale;
		user-select: none;
		-webkit-user-select: none;
		-ms-user-select: none;
	}

	:host {
		font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "HelveticaNeue-Light", system-ui, "Ubuntu", "Droid Sans", sans-serif;
	}

	:host-context(.mac) { font-family: -apple-system, BlinkMacSystemFont, sans-serif; }
	:host-context(.mac:lang(zh-Hans)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Hiragino Sans GB", sans-serif; }
	:host-context(.mac:lang(zh-Hant)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang TC", sans-serif; }
	:host-context(.mac:lang(ja)) { font-family: -apple-system, BlinkMacSystemFont, "Hiragino Kaku Gothic Pro", sans-serif; }
	:host-context(.mac:lang(ko)) { font-family: -apple-system, BlinkMacSystemFont, "Nanum Gothic", "Apple SD Gothic Neo", "AppleGothic", sans-serif; }

	:host-context(.windows) { font-family: "Segoe WPC", "Segoe UI", sans-serif; }
	:host-context(.windows:lang(zh-Hans)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft YaHei", sans-serif; }
	:host-context(.windows:lang(zh-Hant)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft Jhenghei", sans-serif; }
	:host-context(.windows:lang(ja)) { font-family: "Segoe WPC", "Segoe UI", "Yu Gothic UI", "Meiryo UI", sans-serif; }
	:host-context(.windows:lang(ko)) { font-family: "Segoe WPC", "Segoe UI", "Malgun Gothic", "Dotom", sans-serif; }

	:host-context(.linux) { font-family: system-ui, "Ubuntu", "Droid Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hans)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans SC", "Source Han Sans CN", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hant)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans TC", "Source Han Sans TW", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ja)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans J", "Source Han Sans JP", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ko)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans K", "Source Han Sans JR", "Source Han Sans", "UnDotum", "FBaekmuk Gulim", sans-serif; }
`;var sMe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},oMe=function(o,e){return function(t,i){e(t,i,o)}};let ZR=class extends J{constructor(e){super(),this.layoutService=e,this.currentViewDisposable=this._register(new Xs),this.contextView=this._register(new b1(this.layoutService.mainContainer,1)),this.layout(),this._register(e.onDidLayoutContainer(()=>this.layout()))}showContextView(e,t,i){let n;t?t===this.layoutService.getContainer(ft(t))?n=1:i?n=3:n=2:n=1,this.contextView.setContainer(t??this.layoutService.activeContainer,n),this.contextView.show(e);const s=lt(()=>{this.currentViewDisposable===s&&this.hideContextView()});return this.currentViewDisposable.value=s,s}layout(){this.contextView.layout()}hideContextView(e){this.contextView.hide(e)}};ZR=sMe([oMe(0,Om)],ZR);class rMe extends ZR{getContextViewElement(){return this.contextView.getViewElement()}}var aMe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},yS=function(o,e){return function(t,i){e(t,i,o)}};let f8=class extends J{constructor(e,t,i,n,s){super(),this._instantiationService=e,this._keybindingService=i,this._layoutService=n,this._accessibilityService=s,t.onDidShowContextMenu(()=>this.hideHover()),this._contextViewHandler=this._register(new ZR(this._layoutService))}showHover(e,t,i){var n,s,r,a;if(bX(this._currentHoverOptions)===bX(e)||this._currentHover&&(!((s=(n=this._currentHoverOptions)===null||n===void 0?void 0:n.persistence)===null||s===void 0)&&s.sticky))return;this._currentHoverOptions=e,this._lastHoverOptions=e;const l=e.trapFocus||this._accessibilityService.isScreenReaderOptimized(),c=No();i||(l&&c?this._lastFocusedElementBeforeOpen=c:this._lastFocusedElementBeforeOpen=void 0);const u=new he,f=this._instantiationService.createInstance(h8,e);if(!((r=e.persistence)===null||r===void 0)&&r.sticky&&(f.isLocked=!0),f.onDispose(()=>{var g,p;((g=this._currentHover)===null||g===void 0?void 0:g.domNode)&&Fie(this._currentHover.domNode)&&((p=this._lastFocusedElementBeforeOpen)===null||p===void 0||p.focus()),this._currentHoverOptions===e&&(this._currentHoverOptions=void 0),u.dispose()}),!e.container){const g=e.target instanceof HTMLElement?e.target:e.target.targetElements[0];e.container=this._layoutService.getContainer(ft(g))}if(this._contextViewHandler.showContextView(new lMe(f,t),e.container),f.onRequestLayout(()=>this._contextViewHandler.layout()),!((a=e.persistence)===null||a===void 0)&&a.sticky)u.add(oe(ft(e.container).document,ke.MOUSE_DOWN,g=>{ao(g.target,f.domNode)||this.doHideHover()}));else{if("targetElements"in e.target)for(const p of e.target.targetElements)u.add(oe(p,ke.CLICK,()=>this.hideHover()));else u.add(oe(e.target,ke.CLICK,()=>this.hideHover()));const g=No();if(g){const p=ft(g).document;u.add(oe(g,ke.KEY_DOWN,_=>{var b;return this._keyDown(_,f,!!(!((b=e.persistence)===null||b===void 0)&&b.hideOnKeyDown))})),u.add(oe(p,ke.KEY_DOWN,_=>{var b;return this._keyDown(_,f,!!(!((b=e.persistence)===null||b===void 0)&&b.hideOnKeyDown))})),u.add(oe(g,ke.KEY_UP,_=>this._keyUp(_,f))),u.add(oe(p,ke.KEY_UP,_=>this._keyUp(_,f)))}}if("IntersectionObserver"in Hi){const g=new IntersectionObserver(_=>this._intersectionChange(_,f),{threshold:0}),p="targetElements"in e.target?e.target.targetElements[0]:e.target;g.observe(p),u.add(lt(()=>g.disconnect()))}return this._currentHover=f,f}hideHover(){var e;!((e=this._currentHover)===null||e===void 0)&&e.isLocked||!this._currentHoverOptions||this.doHideHover()}doHideHover(){this._currentHover=void 0,this._currentHoverOptions=void 0,this._contextViewHandler.hideContextView()}_intersectionChange(e,t){e[e.length-1].isIntersecting||t.dispose()}_keyDown(e,t,i){var n,s;if(e.key==="Alt"){t.isLocked=!0;return}const r=new _n(e);this._keybindingService.resolveKeyboardEvent(r).getSingleModifierDispatchChords().some(l=>!!l)||this._keybindingService.softDispatch(r,r.target).kind!==0||i&&(!(!((n=this._currentHoverOptions)===null||n===void 0)&&n.trapFocus)||e.key!=="Tab")&&(this.hideHover(),(s=this._lastFocusedElementBeforeOpen)===null||s===void 0||s.focus())}_keyUp(e,t){var i;e.key==="Alt"&&(t.isLocked=!1,t.isMouseIn||(this.hideHover(),(i=this._lastFocusedElementBeforeOpen)===null||i===void 0||i.focus()))}};f8=aMe([yS(0,ct),yS(1,Ya),yS(2,Bi),yS(3,Om),yS(4,mc)],f8);function bX(o){var e;if(o!==void 0)return(e=o==null?void 0:o.id)!==null&&e!==void 0?e:o}class lMe{get anchorPosition(){return this._hover.anchor}constructor(e,t=!1){this._hover=e,this._focus=t,this.layer=1}render(e){return this._hover.render(e),this._focus&&this._hover.focus(),this._hover}getAnchor(){return{x:this._hover.x,y:this._hover.y}}layout(){this._hover.layout()}}oi(QH,f8,1);_c((o,e)=>{const t=o.getColor(Mne);t&&(e.addRule(`.monaco-workbench .workbench-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${t.transparent(.5)}; }`),e.addRule(`.monaco-workbench .workbench-hover hr { border-top: 1px solid ${t.transparent(.5)}; }`))});const ek=Zt("IWorkspaceEditService");class dz{constructor(e){this.metadata=e}static convert(e){return e.edits.map(t=>{if(Zp.is(t))return Zp.lift(t);if(BC.is(t))return BC.lift(t);throw new Error("Unsupported edit")})}}class Zp extends dz{static is(e){return e instanceof Zp?!0:Br(e)&&gt.isUri(e.resource)&&Br(e.textEdit)}static lift(e){return e instanceof Zp?e:new Zp(e.resource,e.textEdit,e.versionId,e.metadata)}constructor(e,t,i=void 0,n){super(n),this.resource=e,this.textEdit=t,this.versionId=i}}class BC extends dz{static is(e){return e instanceof BC?!0:Br(e)&&(!!e.newResource||!!e.oldResource)}static lift(e){return e instanceof BC?e:new BC(e.oldResource,e.newResource,e.options,e.metadata)}constructor(e,t,i={},n){super(n),this.oldResource=e,this.newResource=t,this.options=i}}const Uo={enableSplitViewResizing:!0,splitViewDefaultRatio:.5,renderSideBySide:!0,renderMarginRevertIcon:!0,renderGutterMenu:!0,maxComputationTime:5e3,maxFileSize:50,ignoreTrimWhitespace:!0,renderIndicators:!0,originalEditable:!1,diffCodeLens:!1,renderOverviewRuler:!0,diffWordWrap:"inherit",diffAlgorithm:"advanced",accessibilityVerbose:!1,experimental:{showMoves:!1,showEmptyDecorations:!0},hideUnchangedRegions:{enabled:!1,contextLineCount:3,minimumLineCount:3,revealLineCount:20},isInEmbeddedEditor:!1,onlyShowAccessibleDiffViewer:!1,renderSideBySideInlineBreakpoint:900,useInlineViewWhenSpaceIsLimited:!0},iP=Object.freeze({id:"editor",order:5,type:"object",title:v("editorConfigurationTitle","Editor"),scope:5}),QR={...iP,properties:{"editor.tabSize":{type:"number",default:Ko.tabSize,minimum:1,markdownDescription:v("tabSize","The number of spaces a tab is equal to. This setting is overridden based on the file contents when {0} is on.","`#editor.detectIndentation#`")},"editor.indentSize":{anyOf:[{type:"string",enum:["tabSize"]},{type:"number",minimum:1}],default:"tabSize",markdownDescription:v("indentSize",'The number of spaces used for indentation or `"tabSize"` to use the value from `#editor.tabSize#`. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.')},"editor.insertSpaces":{type:"boolean",default:Ko.insertSpaces,markdownDescription:v("insertSpaces","Insert spaces when pressing `Tab`. This setting is overridden based on the file contents when {0} is on.","`#editor.detectIndentation#`")},"editor.detectIndentation":{type:"boolean",default:Ko.detectIndentation,markdownDescription:v("detectIndentation","Controls whether {0} and {1} will be automatically detected when a file is opened based on the file contents.","`#editor.tabSize#`","`#editor.insertSpaces#`")},"editor.trimAutoWhitespace":{type:"boolean",default:Ko.trimAutoWhitespace,description:v("trimAutoWhitespace","Remove trailing auto inserted whitespace.")},"editor.largeFileOptimizations":{type:"boolean",default:Ko.largeFileOptimizations,description:v("largeFileOptimizations","Special handling for large files to disable certain memory intensive features.")},"editor.wordBasedSuggestions":{enum:["off","currentDocument","matchingDocuments","allDocuments"],default:"matchingDocuments",enumDescriptions:[v("wordBasedSuggestions.off","Turn off Word Based Suggestions."),v("wordBasedSuggestions.currentDocument","Only suggest words from the active document."),v("wordBasedSuggestions.matchingDocuments","Suggest words from all open documents of the same language."),v("wordBasedSuggestions.allDocuments","Suggest words from all open documents.")],description:v("wordBasedSuggestions","Controls whether completions should be computed based on words in the document and from which documents they are computed.")},"editor.semanticHighlighting.enabled":{enum:[!0,!1,"configuredByTheme"],enumDescriptions:[v("semanticHighlighting.true","Semantic highlighting enabled for all color themes."),v("semanticHighlighting.false","Semantic highlighting disabled for all color themes."),v("semanticHighlighting.configuredByTheme","Semantic highlighting is configured by the current color theme's `semanticHighlighting` setting.")],default:"configuredByTheme",description:v("semanticHighlighting.enabled","Controls whether the semanticHighlighting is shown for the languages that support it.")},"editor.stablePeek":{type:"boolean",default:!1,markdownDescription:v("stablePeek","Keep peek editors open even when double-clicking their content or when hitting `Escape`.")},"editor.maxTokenizationLineLength":{type:"integer",default:2e4,description:v("maxTokenizationLineLength","Lines above this length will not be tokenized for performance reasons")},"editor.experimental.asyncTokenization":{type:"boolean",default:!1,description:v("editor.experimental.asyncTokenization","Controls whether the tokenization should happen asynchronously on a web worker."),tags:["experimental"]},"editor.experimental.asyncTokenizationLogging":{type:"boolean",default:!1,description:v("editor.experimental.asyncTokenizationLogging","Controls whether async tokenization should be logged. For debugging only.")},"editor.experimental.asyncTokenizationVerification":{type:"boolean",default:!1,description:v("editor.experimental.asyncTokenizationVerification","Controls whether async tokenization should be verified against legacy background tokenization. Might slow down tokenization. For debugging only."),tags:["experimental"]},"editor.language.brackets":{type:["array","null"],default:null,description:v("schema.brackets","Defines the bracket symbols that increase or decrease the indentation."),items:{type:"array",items:[{type:"string",description:v("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:v("schema.closeBracket","The closing bracket character or string sequence.")}]}},"editor.language.colorizedBracketPairs":{type:["array","null"],default:null,description:v("schema.colorizedBracketPairs","Defines the bracket pairs that are colorized by their nesting level if bracket pair colorization is enabled."),items:{type:"array",items:[{type:"string",description:v("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:v("schema.closeBracket","The closing bracket character or string sequence.")}]}},"diffEditor.maxComputationTime":{type:"number",default:Uo.maxComputationTime,description:v("maxComputationTime","Timeout in milliseconds after which diff computation is cancelled. Use 0 for no timeout.")},"diffEditor.maxFileSize":{type:"number",default:Uo.maxFileSize,description:v("maxFileSize","Maximum file size in MB for which to compute diffs. Use 0 for no limit.")},"diffEditor.renderSideBySide":{type:"boolean",default:Uo.renderSideBySide,description:v("sideBySide","Controls whether the diff editor shows the diff side by side or inline.")},"diffEditor.renderSideBySideInlineBreakpoint":{type:"number",default:Uo.renderSideBySideInlineBreakpoint,description:v("renderSideBySideInlineBreakpoint","If the diff editor width is smaller than this value, the inline view is used.")},"diffEditor.useInlineViewWhenSpaceIsLimited":{type:"boolean",default:Uo.useInlineViewWhenSpaceIsLimited,description:v("useInlineViewWhenSpaceIsLimited","If enabled and the editor width is too small, the inline view is used.")},"diffEditor.renderMarginRevertIcon":{type:"boolean",default:Uo.renderMarginRevertIcon,description:v("renderMarginRevertIcon","When enabled, the diff editor shows arrows in its glyph margin to revert changes.")},"diffEditor.renderGutterMenu":{type:"boolean",default:Uo.renderGutterMenu,description:v("renderGutterMenu","When enabled, the diff editor shows a special gutter for revert and stage actions.")},"diffEditor.ignoreTrimWhitespace":{type:"boolean",default:Uo.ignoreTrimWhitespace,description:v("ignoreTrimWhitespace","When enabled, the diff editor ignores changes in leading or trailing whitespace.")},"diffEditor.renderIndicators":{type:"boolean",default:Uo.renderIndicators,description:v("renderIndicators","Controls whether the diff editor shows +/- indicators for added/removed changes.")},"diffEditor.codeLens":{type:"boolean",default:Uo.diffCodeLens,description:v("codeLens","Controls whether the editor shows CodeLens.")},"diffEditor.wordWrap":{type:"string",enum:["off","on","inherit"],default:Uo.diffWordWrap,markdownEnumDescriptions:[v("wordWrap.off","Lines will never wrap."),v("wordWrap.on","Lines will wrap at the viewport width."),v("wordWrap.inherit","Lines will wrap according to the {0} setting.","`#editor.wordWrap#`")]},"diffEditor.diffAlgorithm":{type:"string",enum:["legacy","advanced"],default:Uo.diffAlgorithm,markdownEnumDescriptions:[v("diffAlgorithm.legacy","Uses the legacy diffing algorithm."),v("diffAlgorithm.advanced","Uses the advanced diffing algorithm.")],tags:["experimental"]},"diffEditor.hideUnchangedRegions.enabled":{type:"boolean",default:Uo.hideUnchangedRegions.enabled,markdownDescription:v("hideUnchangedRegions.enabled","Controls whether the diff editor shows unchanged regions.")},"diffEditor.hideUnchangedRegions.revealLineCount":{type:"integer",default:Uo.hideUnchangedRegions.revealLineCount,markdownDescription:v("hideUnchangedRegions.revealLineCount","Controls how many lines are used for unchanged regions."),minimum:1},"diffEditor.hideUnchangedRegions.minimumLineCount":{type:"integer",default:Uo.hideUnchangedRegions.minimumLineCount,markdownDescription:v("hideUnchangedRegions.minimumLineCount","Controls how many lines are used as a minimum for unchanged regions."),minimum:1},"diffEditor.hideUnchangedRegions.contextLineCount":{type:"integer",default:Uo.hideUnchangedRegions.contextLineCount,markdownDescription:v("hideUnchangedRegions.contextLineCount","Controls how many lines are used as context when comparing unchanged regions."),minimum:1},"diffEditor.experimental.showMoves":{type:"boolean",default:Uo.experimental.showMoves,markdownDescription:v("showMoves","Controls whether the diff editor should show detected code moves.")},"diffEditor.experimental.showEmptyDecorations":{type:"boolean",default:Uo.experimental.showEmptyDecorations,description:v("showEmptyDecorations","Controls whether the diff editor shows empty decorations to see where characters got inserted or deleted.")}}};function cMe(o){return typeof o.type<"u"||typeof o.anyOf<"u"}for(const o of Z0){const e=o.schema;if(typeof e<"u")if(cMe(e))QR.properties[`editor.${o.name}`]=e;else for(const t in e)Object.hasOwnProperty.call(e,t)&&(QR.properties[t]=e[t])}let xT=null;function foe(){return xT===null&&(xT=Object.create(null),Object.keys(QR.properties).forEach(o=>{xT[o]=!0})),xT}function dMe(o){return foe()[`editor.${o}`]||!1}function uMe(o){return foe()[`diffEditor.${o}`]||!1}const hMe=$n.as(nu.Configuration);hMe.registerConfiguration(QR);class On{static insert(e,t){return{range:new A(e.lineNumber,e.column,e.lineNumber,e.column),text:t,forceMoveMarkers:!0}}static delete(e){return{range:e,text:null}}static replace(e,t){return{range:e,text:t}}static replaceMove(e,t){return{range:e,text:t,forceMoveMarkers:!0}}}function DT(o){return Object.isFrozen(o)?o:Ibe(o)}class Eo{constructor(e={},t=[],i=[],n){this._contents=e,this._keys=t,this._overrides=i,this.raw=n,this.overrideConfigurations=new Map}get rawConfiguration(){var e;if(!this._rawConfiguration)if(!((e=this.raw)===null||e===void 0)&&e.length){const t=this.raw.map(i=>{if(i instanceof Eo)return i;const n=new fMe("");return n.parseRaw(i),n.configurationModel});this._rawConfiguration=t.reduce((i,n)=>n===i?n:i.merge(n),t[0])}else this._rawConfiguration=this;return this._rawConfiguration}get contents(){return this._contents}get overrides(){return this._overrides}get keys(){return this._keys}isEmpty(){return this._keys.length===0&&Object.keys(this._contents).length===0&&this._overrides.length===0}getValue(e){return e?KY(this.contents,e):this.contents}inspect(e,t){const i=this;return{get value(){return DT(i.rawConfiguration.getValue(e))},get override(){return t?DT(i.rawConfiguration.getOverrideValue(e,t)):void 0},get merged(){return DT(t?i.rawConfiguration.override(t).getValue(e):i.rawConfiguration.getValue(e))},get overrides(){const n=[];for(const{contents:s,identifiers:r,keys:a}of i.rawConfiguration.overrides){const l=new Eo(s,a).getValue(e);l!==void 0&&n.push({identifiers:r,value:l})}return n.length?DT(n):void 0}}}getOverrideValue(e,t){const i=this.getContentsForOverrideIdentifer(t);return i?e?KY(i,e):i:void 0}override(e){let t=this.overrideConfigurations.get(e);return t||(t=this.createOverrideConfigurationModel(e),this.overrideConfigurations.set(e,t)),t}merge(...e){var t,i;const n=gf(this.contents),s=gf(this.overrides),r=[...this.keys],a=!((t=this.raw)===null||t===void 0)&&t.length?[...this.raw]:[this];for(const l of e)if(a.push(...!((i=l.raw)===null||i===void 0)&&i.length?l.raw:[l]),!l.isEmpty()){this.mergeContents(n,l.contents);for(const c of l.overrides){const[u]=s.filter(f=>zn(f.identifiers,c.identifiers));u?(this.mergeContents(u.contents,c.contents),u.keys.push(...c.keys),u.keys=eg(u.keys)):s.push(gf(c))}for(const c of l.keys)r.indexOf(c)===-1&&r.push(c)}return new Eo(n,r,s,a.every(l=>l instanceof Eo)?void 0:a)}createOverrideConfigurationModel(e){const t=this.getContentsForOverrideIdentifer(e);if(!t||typeof t!="object"||!Object.keys(t).length)return this;const i={};for(const n of eg([...Object.keys(this.contents),...Object.keys(t)])){let s=this.contents[n];const r=t[n];r&&(typeof s=="object"&&typeof r=="object"?(s=gf(s),this.mergeContents(s,r)):s=r),i[n]=s}return new Eo(i,this.keys,this.overrides)}mergeContents(e,t){for(const i of Object.keys(t)){if(i in e&&Br(e[i])&&Br(t[i])){this.mergeContents(e[i],t[i]);continue}e[i]=gf(t[i])}}getContentsForOverrideIdentifer(e){let t=null,i=null;const n=s=>{s&&(i?this.mergeContents(i,s):i=gf(s))};for(const s of this.overrides)s.identifiers.length===1&&s.identifiers[0]===e?t=s.contents:s.identifiers.includes(e)&&n(s.contents);return n(t),i}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}addValue(e,t){this.updateValue(e,t,!0)}setValue(e,t){this.updateValue(e,t,!1)}removeValue(e){const t=this.keys.indexOf(e);t!==-1&&(this.keys.splice(t,1),dye(this.contents,e),fm.test(e)&&this.overrides.splice(this.overrides.findIndex(i=>zn(i.identifiers,yR(e))),1))}updateValue(e,t,i){rne(this.contents,e,t,n=>console.error(n)),i=i||this.keys.indexOf(e)===-1,i&&this.keys.push(e),fm.test(e)&&this.overrides.push({identifiers:yR(e),keys:Object.keys(this.contents[e]),contents:c9(this.contents[e],n=>console.error(n))})}}class fMe{constructor(e){this._name=e,this._raw=null,this._configurationModel=null,this._restrictedConfigurations=[]}get configurationModel(){return this._configurationModel||new Eo}parseRaw(e,t){this._raw=e;const{contents:i,keys:n,overrides:s,restricted:r,hasExcludedProperties:a}=this.doParseRaw(e,t);this._configurationModel=new Eo(i,n,s,a?[e]:void 0),this._restrictedConfigurations=r||[]}doParseRaw(e,t){const i=$n.as(nu.Configuration).getConfigurationProperties(),n=this.filter(e,i,!0,t);e=n.raw;const s=c9(e,l=>console.error(`Conflict in settings file ${this._name}: ${l}`)),r=Object.keys(e),a=this.toOverrides(e,l=>console.error(`Conflict in settings file ${this._name}: ${l}`));return{contents:s,keys:r,overrides:a,restricted:n.restricted,hasExcludedProperties:n.hasExcludedProperties}}filter(e,t,i,n){var s,r,a;let l=!1;if(!(n!=null&&n.scopes)&&!(n!=null&&n.skipRestricted)&&!(!((s=n==null?void 0:n.exclude)===null||s===void 0)&&s.length))return{raw:e,restricted:[],hasExcludedProperties:l};const c={},u=[];for(const f in e)if(fm.test(f)&&i){const g=this.filter(e[f],t,!1,n);c[f]=g.raw,l=l||g.hasExcludedProperties,u.push(...g.restricted)}else{const g=t[f],p=g?typeof g.scope<"u"?g.scope:3:void 0;g!=null&&g.restricted&&u.push(f),!(!((r=n.exclude)===null||r===void 0)&&r.includes(f))&&(!((a=n.include)===null||a===void 0)&&a.includes(f)||(p===void 0||n.scopes===void 0||n.scopes.includes(p))&&!(n.skipRestricted&&(g!=null&&g.restricted)))?c[f]=e[f]:l=!0}return{raw:c,restricted:u,hasExcludedProperties:l}}toOverrides(e,t){const i=[];for(const n of Object.keys(e))if(fm.test(n)){const s={};for(const r in e[n])s[r]=e[n][r];i.push({identifiers:yR(n),keys:Object.keys(s),contents:c9(s,t)})}return i}}class gMe{constructor(e,t,i,n,s,r,a,l,c,u,f,g,p){this.key=e,this.overrides=t,this._value=i,this.overrideIdentifiers=n,this.defaultConfiguration=s,this.policyConfiguration=r,this.applicationConfiguration=a,this.userConfiguration=l,this.localUserConfiguration=c,this.remoteUserConfiguration=u,this.workspaceConfiguration=f,this.folderConfigurationModel=g,this.memoryConfigurationModel=p}toInspectValue(e){return(e==null?void 0:e.value)!==void 0||(e==null?void 0:e.override)!==void 0||(e==null?void 0:e.overrides)!==void 0?e:void 0}get userInspectValue(){return this._userInspectValue||(this._userInspectValue=this.userConfiguration.inspect(this.key,this.overrides.overrideIdentifier)),this._userInspectValue}get user(){return this.toInspectValue(this.userInspectValue)}}class nP{constructor(e,t,i,n,s=new Eo,r=new Eo,a=new ds,l=new Eo,c=new ds){this._defaultConfiguration=e,this._policyConfiguration=t,this._applicationConfiguration=i,this._localUserConfiguration=n,this._remoteUserConfiguration=s,this._workspaceConfiguration=r,this._folderConfigurations=a,this._memoryConfiguration=l,this._memoryConfigurationByResource=c,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations=new ds,this._userConfiguration=null}getValue(e,t,i){return this.getConsolidatedConfigurationModel(e,t,i).getValue(e)}updateValue(e,t,i={}){let n;i.resource?(n=this._memoryConfigurationByResource.get(i.resource),n||(n=new Eo,this._memoryConfigurationByResource.set(i.resource,n))):n=this._memoryConfiguration,t===void 0?n.removeValue(e):n.setValue(e,t),i.resource||(this._workspaceConsolidatedConfiguration=null)}inspect(e,t,i){const n=this.getConsolidatedConfigurationModel(e,t,i),s=this.getFolderConfigurationModelForResource(t.resource,i),r=t.resource?this._memoryConfigurationByResource.get(t.resource)||this._memoryConfiguration:this._memoryConfiguration,a=new Set;for(const l of n.overrides)for(const c of l.identifiers)n.getOverrideValue(e,c)!==void 0&&a.add(c);return new gMe(e,t,n.getValue(e),a.size?[...a]:void 0,this._defaultConfiguration,this._policyConfiguration.isEmpty()?void 0:this._policyConfiguration,this.applicationConfiguration.isEmpty()?void 0:this.applicationConfiguration,this.userConfiguration,this.localUserConfiguration,this.remoteUserConfiguration,i?this._workspaceConfiguration:void 0,s||void 0,r)}get applicationConfiguration(){return this._applicationConfiguration}get userConfiguration(){return this._userConfiguration||(this._userConfiguration=this._remoteUserConfiguration.isEmpty()?this._localUserConfiguration:this._localUserConfiguration.merge(this._remoteUserConfiguration)),this._userConfiguration}get localUserConfiguration(){return this._localUserConfiguration}get remoteUserConfiguration(){return this._remoteUserConfiguration}getConsolidatedConfigurationModel(e,t,i){let n=this.getConsolidatedConfigurationModelForResource(t,i);return t.overrideIdentifier&&(n=n.override(t.overrideIdentifier)),!this._policyConfiguration.isEmpty()&&this._policyConfiguration.getValue(e)!==void 0&&(n=n.merge(this._policyConfiguration)),n}getConsolidatedConfigurationModelForResource({resource:e},t){let i=this.getWorkspaceConsolidatedConfiguration();if(t&&e){const n=t.getFolder(e);n&&(i=this.getFolderConsolidatedConfiguration(n.uri)||i);const s=this._memoryConfigurationByResource.get(e);s&&(i=i.merge(s))}return i}getWorkspaceConsolidatedConfiguration(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this.applicationConfiguration,this.userConfiguration,this._workspaceConfiguration,this._memoryConfiguration)),this._workspaceConsolidatedConfiguration}getFolderConsolidatedConfiguration(e){let t=this._foldersConsolidatedConfigurations.get(e);if(!t){const i=this.getWorkspaceConsolidatedConfiguration(),n=this._folderConfigurations.get(e);n?(t=i.merge(n),this._foldersConsolidatedConfigurations.set(e,t)):t=i}return t}getFolderConfigurationModelForResource(e,t){if(t&&e){const i=t.getFolder(e);if(i)return this._folderConfigurations.get(i.uri)}}toData(){return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys},policy:{contents:this._policyConfiguration.contents,overrides:this._policyConfiguration.overrides,keys:this._policyConfiguration.keys},application:{contents:this.applicationConfiguration.contents,overrides:this.applicationConfiguration.overrides,keys:this.applicationConfiguration.keys},user:{contents:this.userConfiguration.contents,overrides:this.userConfiguration.overrides,keys:this.userConfiguration.keys},workspace:{contents:this._workspaceConfiguration.contents,overrides:this._workspaceConfiguration.overrides,keys:this._workspaceConfiguration.keys},folders:[...this._folderConfigurations.keys()].reduce((e,t)=>{const{contents:i,overrides:n,keys:s}=this._folderConfigurations.get(t);return e.push([t,{contents:i,overrides:n,keys:s}]),e},[])}}static parse(e){const t=this.parseConfigurationModel(e.defaults),i=this.parseConfigurationModel(e.policy),n=this.parseConfigurationModel(e.application),s=this.parseConfigurationModel(e.user),r=this.parseConfigurationModel(e.workspace),a=e.folders.reduce((l,c)=>(l.set(gt.revive(c[0]),this.parseConfigurationModel(c[1])),l),new ds);return new nP(t,i,n,s,new Eo,r,a,new Eo,new ds)}static parseConfigurationModel(e){return new Eo(e.contents,e.keys,e.overrides)}}class pMe{constructor(e,t,i,n){this.change=e,this.previous=t,this.currentConfiguraiton=i,this.currentWorkspace=n,this._marker=`
`,this._markerCode1=this._marker.charCodeAt(0),this._markerCode2=46,this.affectedKeys=new Set,this._previousConfiguration=void 0;for(const s of e.keys)this.affectedKeys.add(s);for(const[,s]of e.overrides)for(const r of s)this.affectedKeys.add(r);this._affectsConfigStr=this._marker;for(const s of this.affectedKeys)this._affectsConfigStr+=s+this._marker}get previousConfiguration(){return!this._previousConfiguration&&this.previous&&(this._previousConfiguration=nP.parse(this.previous.data)),this._previousConfiguration}affectsConfiguration(e,t){var i;const n=this._marker+e,s=this._affectsConfigStr.indexOf(n);if(s<0)return!1;const r=s+n.length;if(r>=this._affectsConfigStr.length)return!1;const a=this._affectsConfigStr.charCodeAt(r);if(a!==this._markerCode1&&a!==this._markerCode2)return!1;if(t){const l=this.previousConfiguration?this.previousConfiguration.getValue(e,t,(i=this.previous)===null||i===void 0?void 0:i.workspace):void 0,c=this.currentConfiguraiton.getValue(e,t,this.currentWorkspace);return!wl(l,c)}return!0}}const XR={kind:0},mMe={kind:1};function _Me(o,e,t){return{kind:2,commandId:o,commandArgs:e,isBubble:t}}class RL{constructor(e,t,i){var n;this._log=i,this._defaultKeybindings=e,this._defaultBoundCommands=new Map;for(const s of e){const r=s.command;r&&r.charAt(0)!=="-"&&this._defaultBoundCommands.set(r,!0)}this._map=new Map,this._lookupMap=new Map,this._keybindings=RL.handleRemovals([].concat(e).concat(t));for(let s=0,r=this._keybindings.length;s<r;s++){const a=this._keybindings[s];if(a.chords.length===0)continue;const l=(n=a.when)===null||n===void 0?void 0:n.substituteConstants();l&&l.type===0||this._addKeyPress(a.chords[0],a)}}static _isTargetedForRemoval(e,t,i){if(t){for(let n=0;n<t.length;n++)if(t[n]!==e.chords[n])return!1}return!(i&&i.type!==1&&(!e.when||!xwe(i,e.when)))}static handleRemovals(e){const t=new Map;for(let n=0,s=e.length;n<s;n++){const r=e[n];if(r.command&&r.command.charAt(0)==="-"){const a=r.command.substring(1);t.has(a)?t.get(a).push(r):t.set(a,[r])}}if(t.size===0)return e;const i=[];for(let n=0,s=e.length;n<s;n++){const r=e[n];if(!r.command||r.command.length===0){i.push(r);continue}if(r.command.charAt(0)==="-")continue;const a=t.get(r.command);if(!a||!r.isDefault){i.push(r);continue}let l=!1;for(const c of a){const u=c.when;if(this._isTargetedForRemoval(r,c.chords,u)){l=!0;break}}if(!l){i.push(r);continue}}return i}_addKeyPress(e,t){const i=this._map.get(e);if(typeof i>"u"){this._map.set(e,[t]),this._addToLookupMap(t);return}for(let n=i.length-1;n>=0;n--){const s=i[n];if(s.command===t.command)continue;let r=!0;for(let a=1;a<s.chords.length&&a<t.chords.length;a++)if(s.chords[a]!==t.chords[a]){r=!1;break}r&&RL.whenIsEntirelyIncluded(s.when,t.when)&&this._removeFromLookupMap(s)}i.push(t),this._addToLookupMap(t)}_addToLookupMap(e){if(!e.command)return;let t=this._lookupMap.get(e.command);typeof t>"u"?(t=[e],this._lookupMap.set(e.command,t)):t.push(e)}_removeFromLookupMap(e){if(!e.command)return;const t=this._lookupMap.get(e.command);if(!(typeof t>"u")){for(let i=0,n=t.length;i<n;i++)if(t[i]===e){t.splice(i,1);return}}}static whenIsEntirelyIncluded(e,t){return!t||t.type===1?!0:!e||e.type===1?!1:a9(e,t)}getKeybindings(){return this._keybindings}lookupPrimaryKeybinding(e,t){const i=this._lookupMap.get(e);if(typeof i>"u"||i.length===0)return null;if(i.length===1)return i[0];for(let n=i.length-1;n>=0;n--){const s=i[n];if(t.contextMatchesRules(s.when))return s}return i[i.length-1]}resolve(e,t,i){const n=[...t,i];this._log(`| Resolving ${n}`);const s=this._map.get(n[0]);if(s===void 0)return this._log("\\ No keybinding entries."),XR;let r=null;if(n.length<2)r=s;else{r=[];for(let l=0,c=s.length;l<c;l++){const u=s[l];if(n.length>u.chords.length)continue;let f=!0;for(let g=1;g<n.length;g++)if(u.chords[g]!==n[g]){f=!1;break}f&&r.push(u)}}const a=this._findCommand(e,r);return a?n.length<a.chords.length?(this._log(`\\ From ${r.length} keybinding entries, awaiting ${a.chords.length-n.length} more chord(s), when: ${CX(a.when)}, source: ${wX(a)}.`),mMe):(this._log(`\\ From ${r.length} keybinding entries, matched ${a.command}, when: ${CX(a.when)}, source: ${wX(a)}.`),_Me(a.command,a.commandArgs,a.bubble)):(this._log(`\\ From ${r.length} keybinding entries, no when clauses matched the context.`),XR)}_findCommand(e,t){for(let i=t.length-1;i>=0;i--){const n=t[i];if(RL._contextMatchesRules(e,n.when))return n}return null}static _contextMatchesRules(e,t){return t?t.evaluate(e):!0}}function CX(o){return o?`${o.serialize()}`:"no when condition"}function wX(o){return o.extensionId?o.isBuiltinExtension?`built-in extension ${o.extensionId}`:`user extension ${o.extensionId}`:o.isDefault?"built-in":"user"}const vMe=/^(cursor|delete|undo|redo|tab|editor\.action\.clipboard)/;class bMe extends J{get onDidUpdateKeybindings(){return this._onDidUpdateKeybindings?this._onDidUpdateKeybindings.event:Ie.None}get inChordMode(){return this._currentChords.length>0}constructor(e,t,i,n,s){super(),this._contextKeyService=e,this._commandService=t,this._telemetryService=i,this._notificationService=n,this._logService=s,this._onDidUpdateKeybindings=this._register(new Y),this._currentChords=[],this._currentChordChecker=new jV,this._currentChordStatusMessage=null,this._ignoreSingleModifiers=fC.EMPTY,this._currentSingleModifier=null,this._currentSingleModifierClearTimeout=new Yc,this._currentlyDispatchingCommandId=null,this._logging=!1}dispose(){super.dispose()}_log(e){this._logging&&this._logService.info(`[KeybindingService]: ${e}`)}getKeybindings(){return this._getResolver().getKeybindings()}lookupKeybinding(e,t){const i=this._getResolver().lookupPrimaryKeybinding(e,t||this._contextKeyService);if(i)return i.resolvedKeybinding}dispatchEvent(e,t){return this._dispatch(e,t)}softDispatch(e,t){this._log("/ Soft dispatching keyboard event");const i=this.resolveKeyboardEvent(e);if(i.hasMultipleChords())return console.warn("keyboard event should not be mapped to multiple chords"),XR;const[n]=i.getDispatchChords();if(n===null)return this._log("\\ Keyboard event cannot be dispatched"),XR;const s=this._contextKeyService.getContext(t),r=this._currentChords.map(({keypress:a})=>a);return this._getResolver().resolve(s,r,n)}_scheduleLeaveChordMode(){const e=Date.now();this._currentChordChecker.cancelAndSet(()=>{if(!this._documentHasFocus()){this._leaveChordMode();return}Date.now()-e>5e3&&this._leaveChordMode()},500)}_expectAnotherChord(e,t){switch(this._currentChords.push({keypress:e,label:t}),this._currentChords.length){case 0:throw EV("impossible");case 1:this._currentChordStatusMessage=this._notificationService.status(v("first.chord","({0}) was pressed. Waiting for second key of chord...",t));break;default:{const i=this._currentChords.map(({label:n})=>n).join(", ");this._currentChordStatusMessage=this._notificationService.status(v("next.chord","({0}) was pressed. Waiting for next key of chord...",i))}}this._scheduleLeaveChordMode(),_L.enabled&&_L.disable()}_leaveChordMode(){this._currentChordStatusMessage&&(this._currentChordStatusMessage.dispose(),this._currentChordStatusMessage=null),this._currentChordChecker.cancel(),this._currentChords=[],_L.enable()}_dispatch(e,t){return this._doDispatch(this.resolveKeyboardEvent(e),t,!1)}_singleModifierDispatch(e,t){const i=this.resolveKeyboardEvent(e),[n]=i.getSingleModifierDispatchChords();if(n)return this._ignoreSingleModifiers.has(n)?(this._log(`+ Ignoring single modifier ${n} due to it being pressed together with other keys.`),this._ignoreSingleModifiers=fC.EMPTY,this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1):(this._ignoreSingleModifiers=fC.EMPTY,this._currentSingleModifier===null?(this._log(`+ Storing single modifier for possible chord ${n}.`),this._currentSingleModifier=n,this._currentSingleModifierClearTimeout.cancelAndSet(()=>{this._log("+ Clearing single modifier due to 300ms elapsed."),this._currentSingleModifier=null},300),!1):n===this._currentSingleModifier?(this._log(`/ Dispatching single modifier chord ${n} ${n}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,this._doDispatch(i,t,!0)):(this._log(`+ Clearing single modifier due to modifier mismatch: ${this._currentSingleModifier} ${n}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1));const[s]=i.getChords();return this._ignoreSingleModifiers=new fC(s),this._currentSingleModifier!==null&&this._log("+ Clearing single modifier due to other key up."),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1}_doDispatch(e,t,i=!1){var n;let s=!1;if(e.hasMultipleChords())return console.warn("Unexpected keyboard event mapped to multiple chords"),!1;let r=null,a=null;if(i){const[f]=e.getSingleModifierDispatchChords();r=f,a=f?[f]:[]}else[r]=e.getDispatchChords(),a=this._currentChords.map(({keypress:f})=>f);if(r===null)return this._log("\\ Keyboard event cannot be dispatched in keydown phase."),s;const l=this._contextKeyService.getContext(t),c=e.getLabel(),u=this._getResolver().resolve(l,a,r);switch(u.kind){case 0:{if(this._logService.trace("KeybindingService#dispatch",c,"[ No matching keybinding ]"),this.inChordMode){const f=this._currentChords.map(({label:g})=>g).join(", ");this._log(`+ Leaving multi-chord mode: Nothing bound to "${f}, ${c}".`),this._notificationService.status(v("missing.chord","The key combination ({0}, {1}) is not a command.",f,c),{hideAfter:10*1e3}),this._leaveChordMode(),s=!0}return s}case 1:return this._logService.trace("KeybindingService#dispatch",c,"[ Several keybindings match - more chords needed ]"),s=!0,this._expectAnotherChord(r,c),this._log(this._currentChords.length===1?"+ Entering multi-chord mode...":"+ Continuing multi-chord mode..."),s;case 2:{if(this._logService.trace("KeybindingService#dispatch",c,`[ Will dispatch command ${u.commandId} ]`),u.commandId===null||u.commandId===""){if(this.inChordMode){const f=this._currentChords.map(({label:g})=>g).join(", ");this._log(`+ Leaving chord mode: Nothing bound to "${f}, ${c}".`),this._notificationService.status(v("missing.chord","The key combination ({0}, {1}) is not a command.",f,c),{hideAfter:10*1e3}),this._leaveChordMode(),s=!0}}else{this.inChordMode&&this._leaveChordMode(),u.isBubble||(s=!0),this._log(`+ Invoking command ${u.commandId}.`),this._currentlyDispatchingCommandId=u.commandId;try{typeof u.commandArgs>"u"?this._commandService.executeCommand(u.commandId).then(void 0,f=>this._notificationService.warn(f)):this._commandService.executeCommand(u.commandId,u.commandArgs).then(void 0,f=>this._notificationService.warn(f))}finally{this._currentlyDispatchingCommandId=null}vMe.test(u.commandId)||this._telemetryService.publicLog2("workbenchActionExecuted",{id:u.commandId,from:"keybinding",detail:(n=e.getUserSettingsLabel())!==null&&n!==void 0?n:void 0})}return s}}}mightProducePrintableCharacter(e){return e.ctrlKey||e.metaKey?!1:e.keyCode>=31&&e.keyCode<=56||e.keyCode>=21&&e.keyCode<=30}}class fC{constructor(e){this._ctrlKey=e?e.ctrlKey:!1,this._shiftKey=e?e.shiftKey:!1,this._altKey=e?e.altKey:!1,this._metaKey=e?e.metaKey:!1}has(e){switch(e){case"ctrl":return this._ctrlKey;case"shift":return this._shiftKey;case"alt":return this._altKey;case"meta":return this._metaKey}}}fC.EMPTY=new fC(null);class yX{constructor(e,t,i,n,s,r,a){this._resolvedKeybindingItemBrand=void 0,this.resolvedKeybinding=e,this.chords=e?g8(e.getDispatchChords()):[],e&&this.chords.length===0&&(this.chords=g8(e.getSingleModifierDispatchChords())),this.bubble=t?t.charCodeAt(0)===94:!1,this.command=this.bubble?t.substr(1):t,this.commandArgs=i,this.when=n,this.isDefault=s,this.extensionId=r,this.isBuiltinExtension=a}}function g8(o){const e=[];for(let t=0,i=o.length;t<i;t++){const n=o[t];if(!n)return[];e.push(n)}return e}class sP{constructor(e,t,i=t){this.modifierLabels=[null],this.modifierLabels[2]=e,this.modifierLabels[1]=t,this.modifierLabels[3]=i}toLabel(e,t,i){if(t.length===0)return null;const n=[];for(let s=0,r=t.length;s<r;s++){const a=t[s],l=i(a);if(l===null)return null;n[s]=SMe(a,l,this.modifierLabels[e])}return n.join(" ")}}const uz=new sP({ctrlKey:"",shiftKey:"",altKey:"",metaKey:"",separator:""},{ctrlKey:v({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:v({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:v({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:v({key:"windowsKey",comment:["This is the short form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:v({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:v({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:v({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:v({key:"superKey",comment:["This is the short form for the Super key on the keyboard"]},"Super"),separator:"+"}),CMe=new sP({ctrlKey:v({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:v({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:v({key:"optKey.long",comment:["This is the long form for the Alt/Option key on the keyboard"]},"Option"),metaKey:v({key:"cmdKey.long",comment:["This is the long form for the Command key on the keyboard"]},"Command"),separator:"+"},{ctrlKey:v({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:v({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:v({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:v({key:"windowsKey.long",comment:["This is the long form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:v({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:v({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:v({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:v({key:"superKey.long",comment:["This is the long form for the Super key on the keyboard"]},"Super"),separator:"+"}),wMe=new sP({ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Cmd",separator:"+"},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Super",separator:"+"}),yMe=new sP({ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"cmd",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"win",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"meta",separator:"+"});function SMe(o,e,t){if(e===null)return"";const i=[];return o.ctrlKey&&i.push(t.ctrlKey),o.shiftKey&&i.push(t.shiftKey),o.altKey&&i.push(t.altKey),o.metaKey&&i.push(t.metaKey),e!==""&&i.push(e),i.join(t.separator)}class LMe extends jCe{constructor(e,t){if(super(),t.length===0)throw lc("chords");this._os=e,this._chords=t}getLabel(){return uz.toLabel(this._os,this._chords,e=>this._getLabel(e))}getAriaLabel(){return CMe.toLabel(this._os,this._chords,e=>this._getAriaLabel(e))}getElectronAccelerator(){return this._chords.length>1||this._chords[0].isDuplicateModifierCase()?null:wMe.toLabel(this._os,this._chords,e=>this._getElectronAccelerator(e))}getUserSettingsLabel(){return yMe.toLabel(this._os,this._chords,e=>this._getUserSettingsLabel(e))}hasMultipleChords(){return this._chords.length>1}getChords(){return this._chords.map(e=>this._getChord(e))}_getChord(e){return new $Ce(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,this._getLabel(e),this._getAriaLabel(e))}getDispatchChords(){return this._chords.map(e=>this._getChordDispatch(e))}getSingleModifierDispatchChords(){return this._chords.map(e=>this._getSingleModifierChordDispatch(e))}}class Rx extends LMe{constructor(e,t){super(t,e)}_keyCodeToUILabel(e){if(this._os===2)switch(e){case 15:return"";case 16:return"";case 17:return"";case 18:return""}return Cf.toString(e)}_getLabel(e){return e.isDuplicateModifierCase()?"":this._keyCodeToUILabel(e.keyCode)}_getAriaLabel(e){return e.isDuplicateModifierCase()?"":Cf.toString(e.keyCode)}_getElectronAccelerator(e){return Cf.toElectronAccelerator(e.keyCode)}_getUserSettingsLabel(e){if(e.isDuplicateModifierCase())return"";const t=Cf.toUserSettingsUS(e.keyCode);return t&&t.toLowerCase()}_getChordDispatch(e){return Rx.getDispatchStr(e)}static getDispatchStr(e){if(e.isModifierKey())return null;let t="";return e.ctrlKey&&(t+="ctrl+"),e.shiftKey&&(t+="shift+"),e.altKey&&(t+="alt+"),e.metaKey&&(t+="meta+"),t+=Cf.toString(e.keyCode),t}_getSingleModifierChordDispatch(e){return e.keyCode===5&&!e.shiftKey&&!e.altKey&&!e.metaKey?"ctrl":e.keyCode===4&&!e.ctrlKey&&!e.altKey&&!e.metaKey?"shift":e.keyCode===6&&!e.ctrlKey&&!e.shiftKey&&!e.metaKey?"alt":e.keyCode===57&&!e.ctrlKey&&!e.shiftKey&&!e.altKey?"meta":null}static _scanCodeToKeyCode(e){const t=AV[e];if(t!==-1)return t;switch(e){case 10:return 31;case 11:return 32;case 12:return 33;case 13:return 34;case 14:return 35;case 15:return 36;case 16:return 37;case 17:return 38;case 18:return 39;case 19:return 40;case 20:return 41;case 21:return 42;case 22:return 43;case 23:return 44;case 24:return 45;case 25:return 46;case 26:return 47;case 27:return 48;case 28:return 49;case 29:return 50;case 30:return 51;case 31:return 52;case 32:return 53;case 33:return 54;case 34:return 55;case 35:return 56;case 36:return 22;case 37:return 23;case 38:return 24;case 39:return 25;case 40:return 26;case 41:return 27;case 42:return 28;case 43:return 29;case 44:return 30;case 45:return 21;case 51:return 88;case 52:return 86;case 53:return 92;case 54:return 94;case 55:return 93;case 56:return 0;case 57:return 85;case 58:return 95;case 59:return 91;case 60:return 87;case 61:return 89;case 62:return 90;case 106:return 97}return 0}static _toKeyCodeChord(e){if(!e)return null;if(e instanceof ng)return e;const t=this._scanCodeToKeyCode(e.scanCode);return t===0?null:new ng(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,t)}static resolveKeybinding(e,t){const i=g8(e.chords.map(n=>this._toKeyCodeChord(n)));return i.length>0?[new Rx(i,t)]:[]}}const C1=Zt("labelService"),goe=Zt("progressService");class Yf{constructor(e){this.callback=e}report(e){this._value=e,this.callback(this._value)}}Yf.None=Object.freeze({report(){}});const Bm=Zt("editorProgressService");class xMe{constructor(){this._value="",this._pos=0}reset(e){return this._value=e,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){const t=e.charCodeAt(0),i=this._value.charCodeAt(this._pos);return t-i}value(){return this._value[this._pos]}}class DMe{constructor(e=!0){this._caseSensitive=e}reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46)if(e)this._from++;else break;else e=!1;return this}cmp(e){return this._caseSensitive?OV(e,this._value,0,e.length,this._from,this._to):AD(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class kMe{constructor(e=!0,t=!0){this._splitOnBackslash=e,this._caseSensitive=t}reset(e){this._from=0,this._to=0,this._value=e,this._valueLen=e.length;for(let t=e.length-1;t>=0;t--,this._valueLen--){const i=this._value.charCodeAt(t);if(!(i===47||this._splitOnBackslash&&i===92))break}return this.next()}hasNext(){return this._to<this._valueLen}next(){this._from=this._to;let e=!0;for(;this._to<this._valueLen;this._to++){const t=this._value.charCodeAt(this._to);if(t===47||this._splitOnBackslash&&t===92)if(e)this._from++;else break;else e=!1}return this}cmp(e){return this._caseSensitive?OV(e,this._value,0,e.length,this._from,this._to):AD(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class EMe{constructor(e,t){this._ignorePathCasing=e,this._ignoreQueryAndFragment=t,this._states=[],this._stateIdx=0}reset(e){return this._value=e,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new kMe(!1,!this._ignorePathCasing(e)),this._pathIterator.reset(e.path),this._pathIterator.value()&&this._states.push(3)),this._ignoreQueryAndFragment(e)||(this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5)),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(e){if(this._states[this._stateIdx]===1)return G7(e,this._value.scheme);if(this._states[this._stateIdx]===2)return G7(e,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(e);if(this._states[this._stateIdx]===4)return ex(e,this._value.query);if(this._states[this._stateIdx]===5)return ex(e,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}}class kT{constructor(){this.height=1}rotateLeft(){const e=this.right;return this.right=e.left,e.left=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){const e=this.left;return this.left=e.right,e.right=this,this.updateHeight(),e.updateHeight(),e}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){var e,t;return(t=(e=this.left)===null||e===void 0?void 0:e.height)!==null&&t!==void 0?t:0}get heightRight(){var e,t;return(t=(e=this.right)===null||e===void 0?void 0:e.height)!==null&&t!==void 0?t:0}}class WC{static forUris(e=()=>!1,t=()=>!1){return new WC(new EMe(e,t))}static forStrings(){return new WC(new xMe)}static forConfigKeys(){return new WC(new DMe)}constructor(e){this._iter=e}clear(){this._root=void 0}set(e,t){const i=this._iter.reset(e);let n;this._root||(this._root=new kT,this._root.segment=i.value());const s=[];for(n=this._root;;){const a=i.cmp(n.segment);if(a>0)n.left||(n.left=new kT,n.left.segment=i.value()),s.push([-1,n]),n=n.left;else if(a<0)n.right||(n.right=new kT,n.right.segment=i.value()),s.push([1,n]),n=n.right;else if(i.hasNext())i.next(),n.mid||(n.mid=new kT,n.mid.segment=i.value()),s.push([0,n]),n=n.mid;else break}const r=n.value;n.value=t,n.key=e;for(let a=s.length-1;a>=0;a--){const l=s[a][1];l.updateHeight();const c=l.balanceFactor();if(c<-1||c>1){const u=s[a][0],f=s[a+1][0];if(u===1&&f===1)s[a][1]=l.rotateLeft();else if(u===-1&&f===-1)s[a][1]=l.rotateRight();else if(u===1&&f===-1)l.right=s[a+1][1]=s[a+1][1].rotateRight(),s[a][1]=l.rotateLeft();else if(u===-1&&f===1)l.left=s[a+1][1]=s[a+1][1].rotateLeft(),s[a][1]=l.rotateRight();else throw new Error;if(a>0)switch(s[a-1][0]){case-1:s[a-1][1].left=s[a][1];break;case 1:s[a-1][1].right=s[a][1];break;case 0:s[a-1][1].mid=s[a][1];break}else this._root=s[0][1]}}return r}get(e){var t;return(t=this._getNode(e))===null||t===void 0?void 0:t.value}_getNode(e){const t=this._iter.reset(e);let i=this._root;for(;i;){const n=t.cmp(i.segment);if(n>0)i=i.left;else if(n<0)i=i.right;else if(t.hasNext())t.next(),i=i.mid;else break}return i}has(e){const t=this._getNode(e);return!((t==null?void 0:t.value)===void 0&&(t==null?void 0:t.mid)===void 0)}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,t){var i;const n=this._iter.reset(e),s=[];let r=this._root;for(;r;){const a=n.cmp(r.segment);if(a>0)s.push([-1,r]),r=r.left;else if(a<0)s.push([1,r]),r=r.right;else if(n.hasNext())n.next(),s.push([0,r]),r=r.mid;else break}if(r){if(t?(r.left=void 0,r.mid=void 0,r.right=void 0,r.height=1):(r.key=void 0,r.value=void 0),!r.mid&&!r.value)if(r.left&&r.right){const a=this._min(r.right);if(a.key){const{key:l,value:c,segment:u}=a;this._delete(a.key,!1),r.key=l,r.value=c,r.segment=u}}else{const a=(i=r.left)!==null&&i!==void 0?i:r.right;if(s.length>0){const[l,c]=s[s.length-1];switch(l){case-1:c.left=a;break;case 0:c.mid=a;break;case 1:c.right=a;break}}else this._root=a}for(let a=s.length-1;a>=0;a--){const l=s[a][1];l.updateHeight();const c=l.balanceFactor();if(c>1?(l.right.balanceFactor()>=0||(l.right=l.right.rotateRight()),s[a][1]=l.rotateLeft()):c<-1&&(l.left.balanceFactor()<=0||(l.left=l.left.rotateLeft()),s[a][1]=l.rotateRight()),a>0)switch(s[a-1][0]){case-1:s[a-1][1].left=s[a][1];break;case 1:s[a-1][1].right=s[a][1];break;case 0:s[a-1][1].mid=s[a][1];break}else this._root=s[0][1]}}}_min(e){for(;e.left;)e=e.left;return e}findSubstr(e){const t=this._iter.reset(e);let i=this._root,n;for(;i;){const s=t.cmp(i.segment);if(s>0)i=i.left;else if(s<0)i=i.right;else if(t.hasNext())t.next(),n=i.value||n,i=i.mid;else break}return i&&i.value||n}findSuperstr(e){return this._findSuperstrOrElement(e,!1)}_findSuperstrOrElement(e,t){const i=this._iter.reset(e);let n=this._root;for(;n;){const s=i.cmp(n.segment);if(s>0)n=n.left;else if(s<0)n=n.right;else if(i.hasNext())i.next(),n=n.mid;else return n.mid?this._entries(n.mid):t?n.value:void 0}}forEach(e){for(const[t,i]of this)e(i,t)}*[Symbol.iterator](){yield*this._entries(this._root)}_entries(e){const t=[];return this._dfsEntries(e,t),t[Symbol.iterator]()}_dfsEntries(e,t){e&&(e.left&&this._dfsEntries(e.left,t),e.value&&t.push([e.key,e.value]),e.mid&&this._dfsEntries(e.mid,t),e.right&&this._dfsEntries(e.right,t))}}const Fv=Zt("contextService");function p8(o){const e=o;return typeof(e==null?void 0:e.id)=="string"&&gt.isUri(e.uri)}function IMe(o){const e=o;return typeof(e==null?void 0:e.id)=="string"&&!p8(o)&&!RMe(o)}const TMe={id:"empty-window"};function NMe(o,e){if(typeof o=="string"||typeof o>"u")return typeof o=="string"?{id:jp(o)}:TMe;const t=o;return t.configuration?{id:t.id,configPath:t.configuration}:t.folders.length===1?{id:t.id,uri:t.folders[0].uri}:{id:t.id}}function RMe(o){const e=o;return typeof(e==null?void 0:e.id)=="string"&&gt.isUri(e.configPath)}class MMe{constructor(e,t){this.raw=t,this.uri=e.uri,this.index=e.index,this.name=e.name}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}}const m8="code-workspace";v("codeWorkspace","Code Workspace");const poe="4064f6ec-cb38-4ad0-af64-ee6467e63c82";function AMe(o){return o.id===poe}var _8;(function(o){o.inspectTokensAction=v("inspectTokens","Developer: Inspect Tokens")})(_8||(_8={}));var JR;(function(o){o.gotoLineActionLabel=v("gotoLineActionLabel","Go to Line/Column...")})(JR||(JR={}));var v8;(function(o){o.helpQuickAccessActionLabel=v("helpQuickAccess","Show all Quick Access Providers")})(v8||(v8={}));var eM;(function(o){o.quickCommandActionLabel=v("quickCommandActionLabel","Command Palette"),o.quickCommandHelp=v("quickCommandActionHelp","Show And Run Commands")})(eM||(eM={}));var Mx;(function(o){o.quickOutlineActionLabel=v("quickOutlineActionLabel","Go to Symbol..."),o.quickOutlineByCategoryActionLabel=v("quickOutlineByCategoryActionLabel","Go to Symbol by Category...")})(Mx||(Mx={}));var tM;(function(o){o.editorViewAccessibleLabel=v("editorViewAccessibleLabel","Editor content"),o.accessibilityHelpMessage=v("accessibilityHelpMessage","Press Alt+F1 for Accessibility Options.")})(tM||(tM={}));var b8;(function(o){o.toggleHighContrast=v("toggleHighContrast","Toggle High Contrast Theme")})(b8||(b8={}));var C8;(function(o){o.bulkEditServiceSummary=v("bulkEditServiceSummary","Made {0} edits in {1} files")})(C8||(C8={}));const moe=Zt("workspaceTrustManagementService");let w1=[],hz=[],_oe=[];function ET(o,e=!1){PMe(o,!1,e)}function PMe(o,e,t){const i=OMe(o,e);w1.push(i),i.userConfigured?_oe.push(i):hz.push(i),t&&!i.userConfigured&&w1.forEach(n=>{n.mime===i.mime||n.userConfigured||(i.extension&&n.extension===i.extension&&console.warn(`Overwriting extension <<${i.extension}>> to now point to mime <<${i.mime}>>`),i.filename&&n.filename===i.filename&&console.warn(`Overwriting filename <<${i.filename}>> to now point to mime <<${i.mime}>>`),i.filepattern&&n.filepattern===i.filepattern&&console.warn(`Overwriting filepattern <<${i.filepattern}>> to now point to mime <<${i.mime}>>`),i.firstline&&n.firstline===i.firstline&&console.warn(`Overwriting firstline <<${i.firstline}>> to now point to mime <<${i.mime}>>`))})}function OMe(o,e){return{id:o.id,mime:o.mime,filename:o.filename,extension:o.extension,filepattern:o.filepattern,firstline:o.firstline,userConfigured:e,filenameLowercase:o.filename?o.filename.toLowerCase():void 0,extensionLowercase:o.extension?o.extension.toLowerCase():void 0,filepatternLowercase:o.filepattern?Qse(o.filepattern.toLowerCase()):void 0,filepatternOnPath:o.filepattern?o.filepattern.indexOf(Es.sep)>=0:!1}}function FMe(){w1=w1.filter(o=>o.userConfigured),hz=[]}function BMe(o,e){return WMe(o,e).map(t=>t.id)}function WMe(o,e){let t;if(o)switch(o.scheme){case Pt.file:t=o.fsPath;break;case Pt.data:{t=mm.parseMetaData(o).get(mm.META_DATA_LABEL);break}case Pt.vscodeNotebookCell:t=void 0;break;default:t=o.path}if(!t)return[{id:"unknown",mime:ns.unknown}];t=t.toLowerCase();const i=jp(t),n=SX(t,i,_oe);if(n)return[n,{id:yl,mime:ns.text}];const s=SX(t,i,hz);if(s)return[s,{id:yl,mime:ns.text}];if(e){const r=VMe(e);if(r)return[r,{id:yl,mime:ns.text}]}return[{id:"unknown",mime:ns.unknown}]}function SX(o,e,t){var i;let n,s,r;for(let a=t.length-1;a>=0;a--){const l=t[a];if(e===l.filenameLowercase){n=l;break}if(l.filepattern&&(!s||l.filepattern.length>s.filepattern.length)){const c=l.filepatternOnPath?o:e;!((i=l.filepatternLowercase)===null||i===void 0)&&i.call(l,c)&&(s=l)}l.extension&&(!r||l.extension.length>r.extension.length)&&e.endsWith(l.extensionLowercase)&&(r=l)}if(n)return n;if(s)return s;if(r)return r}function VMe(o){if(zV(o)&&(o=o.substr(1)),o.length>0)for(let e=w1.length-1;e>=0;e--){const t=w1[e];if(!t.firstline)continue;const i=o.match(t.firstline);if(i&&i.length>0)return t}}const IT=Object.prototype.hasOwnProperty,LX="vs.editor.nullLanguage";class HMe{constructor(){this._languageIdToLanguage=[],this._languageToLanguageId=new Map,this._register(LX,0),this._register(yl,1),this._nextLanguageId=2}_register(e,t){this._languageIdToLanguage[t]=e,this._languageToLanguageId.set(e,t)}register(e){if(this._languageToLanguageId.has(e))return;const t=this._nextLanguageId++;this._register(e,t)}encodeLanguageId(e){return this._languageToLanguageId.get(e)||0}decodeLanguageId(e){return this._languageIdToLanguage[e]||LX}}class Ax extends J{constructor(e=!0,t=!1){super(),this._onDidChange=this._register(new Y),this.onDidChange=this._onDidChange.event,Ax.instanceCount++,this._warnOnOverwrite=t,this.languageIdCodec=new HMe,this._dynamicLanguages=[],this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},e&&(this._initializeFromRegistry(),this._register(o1.onDidChangeLanguages(i=>{this._initializeFromRegistry()})))}dispose(){Ax.instanceCount--,super.dispose()}_initializeFromRegistry(){this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},FMe();const e=[].concat(o1.getLanguages()).concat(this._dynamicLanguages);this._registerLanguages(e)}_registerLanguages(e){for(const t of e)this._registerLanguage(t);this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},Object.keys(this._languages).forEach(t=>{const i=this._languages[t];i.name&&(this._nameMap[i.name]=i.identifier),i.aliases.forEach(n=>{this._lowercaseNameMap[n.toLowerCase()]=i.identifier}),i.mimetypes.forEach(n=>{this._mimeTypesMap[n]=i.identifier})}),$n.as(nu.Configuration).registerOverrideIdentifiers(this.getRegisteredLanguageIds()),this._onDidChange.fire()}_registerLanguage(e){const t=e.id;let i;IT.call(this._languages,t)?i=this._languages[t]:(this.languageIdCodec.register(t),i={identifier:t,name:null,mimetypes:[],aliases:[],extensions:[],filenames:[],configurationFiles:[],icons:[]},this._languages[t]=i),this._mergeLanguage(i,e)}_mergeLanguage(e,t){const i=t.id;let n=null;if(Array.isArray(t.mimetypes)&&t.mimetypes.length>0&&(e.mimetypes.push(...t.mimetypes),n=t.mimetypes[0]),n||(n=`text/x-${i}`,e.mimetypes.push(n)),Array.isArray(t.extensions)){t.configuration?e.extensions=t.extensions.concat(e.extensions):e.extensions=e.extensions.concat(t.extensions);for(const a of t.extensions)ET({id:i,mime:n,extension:a},this._warnOnOverwrite)}if(Array.isArray(t.filenames))for(const a of t.filenames)ET({id:i,mime:n,filename:a},this._warnOnOverwrite),e.filenames.push(a);if(Array.isArray(t.filenamePatterns))for(const a of t.filenamePatterns)ET({id:i,mime:n,filepattern:a},this._warnOnOverwrite);if(typeof t.firstLine=="string"&&t.firstLine.length>0){let a=t.firstLine;a.charAt(0)!=="^"&&(a="^"+a);try{const l=new RegExp(a);TCe(l)||ET({id:i,mime:n,firstline:l},this._warnOnOverwrite)}catch(l){console.warn(`[${t.id}]: Invalid regular expression \`${a}\`: `,l)}}e.aliases.push(i);let s=null;if(typeof t.aliases<"u"&&Array.isArray(t.aliases)&&(t.aliases.length===0?s=[null]:s=t.aliases),s!==null)for(const a of s)!a||a.length===0||e.aliases.push(a);const r=s!==null&&s.length>0;if(!(r&&s[0]===null)){const a=(r?s[0]:null)||i;(r||!e.name)&&(e.name=a)}t.configuration&&e.configurationFiles.push(t.configuration),t.icon&&e.icons.push(t.icon)}isRegisteredLanguageId(e){return e?IT.call(this._languages,e):!1}getRegisteredLanguageIds(){return Object.keys(this._languages)}getLanguageIdByLanguageName(e){const t=e.toLowerCase();return IT.call(this._lowercaseNameMap,t)?this._lowercaseNameMap[t]:null}getLanguageIdByMimeType(e){return e&&IT.call(this._mimeTypesMap,e)?this._mimeTypesMap[e]:null}guessLanguageIdByFilepathOrFirstLine(e,t){return!e&&!t?[]:BMe(e,t)}}Ax.instanceCount=0;class Px extends J{constructor(e=!1){super(),this._onDidRequestBasicLanguageFeatures=this._register(new Y),this.onDidRequestBasicLanguageFeatures=this._onDidRequestBasicLanguageFeatures.event,this._onDidRequestRichLanguageFeatures=this._register(new Y),this.onDidRequestRichLanguageFeatures=this._onDidRequestRichLanguageFeatures.event,this._onDidChange=this._register(new Y({leakWarningThreshold:200})),this.onDidChange=this._onDidChange.event,this._requestedBasicLanguages=new Set,this._requestedRichLanguages=new Set,Px.instanceCount++,this._registry=this._register(new Ax(!0,e)),this.languageIdCodec=this._registry.languageIdCodec,this._register(this._registry.onDidChange(()=>this._onDidChange.fire()))}dispose(){Px.instanceCount--,super.dispose()}isRegisteredLanguageId(e){return this._registry.isRegisteredLanguageId(e)}getLanguageIdByLanguageName(e){return this._registry.getLanguageIdByLanguageName(e)}getLanguageIdByMimeType(e){return this._registry.getLanguageIdByMimeType(e)}guessLanguageIdByFilepathOrFirstLine(e,t){const i=this._registry.guessLanguageIdByFilepathOrFirstLine(e,t);return wV(i,null)}createById(e){return new xX(this.onDidChange,()=>this._createAndGetLanguageIdentifier(e))}createByFilepathOrFirstLine(e,t){return new xX(this.onDidChange,()=>{const i=this.guessLanguageIdByFilepathOrFirstLine(e,t);return this._createAndGetLanguageIdentifier(i)})}_createAndGetLanguageIdentifier(e){return(!e||!this.isRegisteredLanguageId(e))&&(e=yl),e}requestBasicLanguageFeatures(e){this._requestedBasicLanguages.has(e)||(this._requestedBasicLanguages.add(e),this._onDidRequestBasicLanguageFeatures.fire(e))}requestRichLanguageFeatures(e){this._requestedRichLanguages.has(e)||(this._requestedRichLanguages.add(e),this.requestBasicLanguageFeatures(e),Qn.getOrCreate(e),this._onDidRequestRichLanguageFeatures.fire(e))}}Px.instanceCount=0;class xX{constructor(e,t){this._onDidChangeLanguages=e,this._selector=t,this._listener=null,this._emitter=null,this.languageId=this._selector()}_dispose(){this._listener&&(this._listener.dispose(),this._listener=null),this._emitter&&(this._emitter.dispose(),this._emitter=null)}get onDidChange(){return this._listener||(this._listener=this._onDidChangeLanguages(()=>this._evaluate())),this._emitter||(this._emitter=new Y({onDidRemoveLastListener:()=>{this._dispose()}})),this._emitter.event}_evaluate(){var e;const t=this._selector();t!==this.languageId&&(this.languageId=t,(e=this._emitter)===null||e===void 0||e.fire(this.languageId))}}const Ox={RESOURCES:"ResourceURLs",DOWNLOAD_URL:"DownloadURL",FILES:"Files",TEXT:ns.text,INTERNAL_URI_LIST:"application/vnd.code.uri-list"},zMe=()=>({get delay(){return-1},dispose:()=>{},showHover:()=>{}});let oP=zMe;const UMe=new tu(()=>oP("mouse",!1)),$Me=new tu(()=>oP("element",!1));function jMe(o){oP=o}function ya(o){return o==="element"?$Me.value:UMe.value}function y1(){return oP("element",!0)}function KMe(o,e){Ur(e)?o.title=rz(e):e!=null&&e.markdownNotSupportedFallback?o.title=e.markdownNotSupportedFallback:o.removeAttribute("title")}class qMe{constructor(e,t,i){this.hoverDelegate=e,this.target=t,this.fadeInAnimation=i}async update(e,t,i){var n;if(this._cancellationTokenSource&&(this._cancellationTokenSource.dispose(!0),this._cancellationTokenSource=void 0),this.isDisposed)return;let s;if(e===void 0||Ur(e)||e instanceof HTMLElement)s=e;else if(!GL(e.markdown))s=(n=e.markdown)!==null&&n!==void 0?n:e.markdownNotSupportedFallback;else{this._hoverWidget||this.show(v("iconLabel.loading","Loading..."),t),this._cancellationTokenSource=new os;const r=this._cancellationTokenSource.token;if(s=await e.markdown(r),s===void 0&&(s=e.markdownNotSupportedFallback),this.isDisposed||r.isCancellationRequested)return}this.show(s,t,i)}show(e,t,i){const n=this._hoverWidget;if(this.hasContent(e)){const s={content:e,target:this.target,appearance:{showPointer:this.hoverDelegate.placement==="element",skipFadeInAnimation:!this.fadeInAnimation||!!n},position:{hoverPosition:2},...i};this._hoverWidget=this.hoverDelegate.showHover(s,t)}n==null||n.dispose()}hasContent(e){return e?zd(e)?!!e.value:!0:!1}get isDisposed(){var e;return(e=this._hoverWidget)===null||e===void 0?void 0:e.isDisposed}dispose(){var e,t;(e=this._hoverWidget)===null||e===void 0||e.dispose(),(t=this._cancellationTokenSource)===null||t===void 0||t.dispose(!0),this._cancellationTokenSource=void 0}}function DX(o,e){for(e=e??ft(o).document.body;!o.hasAttribute("custom-hover")&&o!==e;)o=o.parentElement;return o}function Zc(o,e,t,i){e.setAttribute("custom-hover","true"),e.title!==""&&(console.warn("HTML element already has a title attribute, which will conflict with the custom hover. Please remove the title attribute."),console.trace("Stack trace:",e.title),e.title="");let n,s;const r=(L,x)=>{var D;const E=s!==void 0;L&&(s==null||s.dispose(),s=void 0),x&&(n==null||n.dispose(),n=void 0),E&&((D=o.onDidHideHover)===null||D===void 0||D.call(o),s=void 0)},a=(L,x,D)=>new Yc(async()=>{(!s||s.isDisposed)&&(s=new qMe(o,D||e,L>0),await s.update(typeof t=="function"?t():t,x,i))},L);let l=!1;const c=oe(e,ke.MOUSE_DOWN,()=>{l=!0,r(!0,!0)},!0),u=oe(e,ke.MOUSE_UP,()=>{l=!1},!0),f=oe(e,ke.MOUSE_LEAVE,L=>{l=!1,r(!1,L.fromElement===e)},!0),g=L=>{if(n)return;const x=new he,D={targetElements:[e],dispose:()=>{}};if(o.placement===void 0||o.placement==="mouse"){const E=N=>{D.x=N.x+10,N.target instanceof HTMLElement&&DX(N.target,e)!==e&&r(!0,!0)};x.add(oe(e,ke.MOUSE_MOVE,E,!0))}n=x,!(L.target instanceof HTMLElement&&DX(L.target,e)!==e)&&x.add(a(o.delay,!1,D))},p=oe(e,ke.MOUSE_OVER,g,!0),_=()=>{if(l||n)return;const L={targetElements:[e],dispose:()=>{}},x=new he,D=()=>r(!0,!0);x.add(oe(e,ke.BLUR,D,!0)),x.add(a(o.delay,!1,L)),n=x};let b;const y=e.tagName.toLowerCase();return y!=="input"&&y!=="textarea"&&(b=oe(e,ke.FOCUS,_,!0)),{show:L=>{r(!1,!0),a(0,L)},hide:()=>{r(!0,!0)},update:async(L,x)=>{t=L,await(s==null?void 0:s.update(t,void 0,x))},dispose:()=>{p.dispose(),f.dispose(),c.dispose(),u.dispose(),b==null||b.dispose(),r(!0,!0)}}}class GMe{constructor(e){this.spliceables=e}splice(e,t,i){this.spliceables.forEach(n=>n.splice(e,t,i))}}class R_ extends Error{constructor(e,t){super(`ListError [${e}] ${t}`)}}function kX(o,e){const t=[];for(const i of e){if(o.start>=i.range.end)continue;if(o.end<i.range.start)break;const n=$o.intersect(o,i.range);$o.isEmpty(n)||t.push({range:n,size:i.size})}return t}function w8({start:o,end:e},t){return{start:o+t,end:e+t}}function YMe(o){const e=[];let t=null;for(const i of o){const n=i.range.start,s=i.range.end,r=i.size;if(t&&r===t.size){t.range.end=s;continue}t={range:{start:n,end:s},size:r},e.push(t)}return e}function ZMe(...o){return YMe(o.reduce((e,t)=>e.concat(t),[]))}class QMe{get paddingTop(){return this._paddingTop}set paddingTop(e){this._size=this._size+e-this._paddingTop,this._paddingTop=e}constructor(e){this.groups=[],this._size=0,this._paddingTop=0,this._paddingTop=e??0,this._size=this._paddingTop}splice(e,t,i=[]){const n=i.length-t,s=kX({start:0,end:e},this.groups),r=kX({start:e+t,end:Number.POSITIVE_INFINITY},this.groups).map(l=>({range:w8(l.range,n),size:l.size})),a=i.map((l,c)=>({range:{start:e+c,end:e+c+1},size:l.size}));this.groups=ZMe(s,a,r),this._size=this._paddingTop+this.groups.reduce((l,c)=>l+c.size*(c.range.end-c.range.start),0)}get count(){const e=this.groups.length;return e?this.groups[e-1].range.end:0}get size(){return this._size}indexAt(e){if(e<0)return-1;if(e<this._paddingTop)return 0;let t=0,i=this._paddingTop;for(const n of this.groups){const s=n.range.end-n.range.start,r=i+s*n.size;if(e<r)return t+Math.floor((e-i)/n.size);t+=s,i=r}return t}indexAfter(e){return Math.min(this.indexAt(e)+1,this.count)}positionAt(e){if(e<0)return-1;let t=0,i=0;for(const n of this.groups){const s=n.range.end-n.range.start,r=i+s;if(e<r)return this._paddingTop+t+(e-i)*n.size;t+=s*n.size,i=r}return-1}}function XMe(o){var e;try{(e=o.parentElement)===null||e===void 0||e.removeChild(o)}catch{}}class JMe{constructor(e){this.renderers=e,this.cache=new Map,this.transactionNodesPendingRemoval=new Set,this.inTransaction=!1}alloc(e){let t=this.getTemplateCache(e).pop(),i=!1;if(t)i=this.transactionNodesPendingRemoval.has(t.domNode),i&&this.transactionNodesPendingRemoval.delete(t.domNode);else{const n=ye(".monaco-list-row"),r=this.getRenderer(e).renderTemplate(n);t={domNode:n,templateId:e,templateData:r}}return{row:t,isReusingConnectedDomNode:i}}release(e){e&&this.releaseRow(e)}transact(e){if(this.inTransaction)throw new Error("Already in transaction");this.inTransaction=!0;try{e()}finally{for(const t of this.transactionNodesPendingRemoval)this.doRemoveNode(t);this.transactionNodesPendingRemoval.clear(),this.inTransaction=!1}}releaseRow(e){const{domNode:t,templateId:i}=e;t&&(this.inTransaction?this.transactionNodesPendingRemoval.add(t):this.doRemoveNode(t)),this.getTemplateCache(i).push(e)}doRemoveNode(e){e.classList.remove("scrolling"),XMe(e)}getTemplateCache(e){let t=this.cache.get(e);return t||(t=[],this.cache.set(e,t)),t}dispose(){this.cache.forEach((e,t)=>{for(const i of e)this.getRenderer(t).disposeTemplate(i.templateData),i.templateData=null}),this.cache.clear(),this.transactionNodesPendingRemoval.clear()}getRenderer(e){const t=this.renderers.get(e);if(!t)throw new Error(`No renderer found for ${e}`);return t}}var pg=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};const M_={CurrentDragAndDropData:void 0},Du={useShadows:!0,verticalScrollMode:1,setRowLineHeight:!0,setRowHeight:!0,supportDynamicHeights:!1,dnd:{getDragElements(o){return[o]},getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){},dispose(){}},horizontalScrolling:!1,transformOptimization:!0,alwaysConsumeMouseWheel:!0};class tk{constructor(e){this.elements=e}update(){}getData(){return this.elements}}class eAe{constructor(e){this.elements=e}update(){}getData(){return this.elements}}class tAe{constructor(){this.types=[],this.files=[]}update(e){if(e.types&&this.types.splice(0,this.types.length,...e.types),e.files){this.files.splice(0,this.files.length);for(let t=0;t<e.files.length;t++){const i=e.files.item(t);i&&(i.size||i.type)&&this.files.push(i)}}}getData(){return{types:this.types,files:this.files}}}function iAe(o,e){return Array.isArray(o)&&Array.isArray(e)?zn(o,e):o===e}class nAe{constructor(e){e!=null&&e.getSetSize?this.getSetSize=e.getSetSize.bind(e):this.getSetSize=(t,i,n)=>n,e!=null&&e.getPosInSet?this.getPosInSet=e.getPosInSet.bind(e):this.getPosInSet=(t,i)=>i+1,e!=null&&e.getRole?this.getRole=e.getRole.bind(e):this.getRole=t=>"listitem",e!=null&&e.isChecked?this.isChecked=e.isChecked.bind(e):this.isChecked=t=>{}}}class bc{get contentHeight(){return this.rangeMap.size}get onDidScroll(){return this.scrollableElement.onScroll}get scrollableElementDomNode(){return this.scrollableElement.getDomNode()}get horizontalScrolling(){return this._horizontalScrolling}set horizontalScrolling(e){if(e!==this._horizontalScrolling){if(e&&this.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");if(this._horizontalScrolling=e,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this._horizontalScrolling){for(const t of this.items)this.measureItemWidth(t);this.updateScrollWidth(),this.scrollableElement.setScrollDimensions({width:Z5(this.domNode)}),this.rowsContainer.style.width=`${Math.max(this.scrollWidth||0,this.renderWidth)}px`}else this.scrollableElementWidthDelayer.cancel(),this.scrollableElement.setScrollDimensions({width:this.renderWidth,scrollWidth:this.renderWidth}),this.rowsContainer.style.width=""}}constructor(e,t,i,n=Du){var s,r,a,l,c,u,f,g,p,_,b,y,S;if(this.virtualDelegate=t,this.domId=`list_id_${++bc.InstanceCount}`,this.renderers=new Map,this.renderWidth=0,this._scrollHeight=0,this.scrollableElementUpdateDisposable=null,this.scrollableElementWidthDelayer=new Kc(50),this.splicing=!1,this.dragOverAnimationStopDisposable=J.None,this.dragOverMouseY=0,this.canDrop=!1,this.currentDragFeedbackDisposable=J.None,this.onDragLeaveTimeout=J.None,this.disposables=new he,this._onDidChangeContentHeight=new Y,this._onDidChangeContentWidth=new Y,this.onDidChangeContentHeight=Ie.latch(this._onDidChangeContentHeight.event,void 0,this.disposables),this._horizontalScrolling=!1,n.horizontalScrolling&&n.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");this.items=[],this.itemId=0,this.rangeMap=this.createRangeMap((s=n.paddingTop)!==null&&s!==void 0?s:0);for(const x of i)this.renderers.set(x.templateId,x);this.cache=this.disposables.add(new JMe(this.renderers)),this.lastRenderTop=0,this.lastRenderHeight=0,this.domNode=document.createElement("div"),this.domNode.className="monaco-list",this.domNode.classList.add(this.domId),this.domNode.tabIndex=0,this.domNode.classList.toggle("mouse-support",typeof n.mouseSupport=="boolean"?n.mouseSupport:!0),this._horizontalScrolling=(r=n.horizontalScrolling)!==null&&r!==void 0?r:Du.horizontalScrolling,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this.paddingBottom=typeof n.paddingBottom>"u"?0:n.paddingBottom,this.accessibilityProvider=new nAe(n.accessibilityProvider),this.rowsContainer=document.createElement("div"),this.rowsContainer.className="monaco-list-rows",((a=n.transformOptimization)!==null&&a!==void 0?a:Du.transformOptimization)&&(this.rowsContainer.style.transform="translate3d(0px, 0px, 0px)",this.rowsContainer.style.overflow="hidden",this.rowsContainer.style.contain="strict"),this.disposables.add(rn.addTarget(this.rowsContainer)),this.scrollable=this.disposables.add(new X1({forceIntegerValues:!0,smoothScrollDuration:(l=n.smoothScrolling)!==null&&l!==void 0&&l?125:0,scheduleAtNextAnimationFrame:x=>ja(ft(this.domNode),x)})),this.scrollableElement=this.disposables.add(new HA(this.rowsContainer,{alwaysConsumeMouseWheel:(c=n.alwaysConsumeMouseWheel)!==null&&c!==void 0?c:Du.alwaysConsumeMouseWheel,horizontal:1,vertical:(u=n.verticalScrollMode)!==null&&u!==void 0?u:Du.verticalScrollMode,useShadows:(f=n.useShadows)!==null&&f!==void 0?f:Du.useShadows,mouseWheelScrollSensitivity:n.mouseWheelScrollSensitivity,fastScrollSensitivity:n.fastScrollSensitivity,scrollByPage:n.scrollByPage},this.scrollable)),this.domNode.appendChild(this.scrollableElement.getDomNode()),e.appendChild(this.domNode),this.scrollableElement.onScroll(this.onScroll,this,this.disposables),this.disposables.add(oe(this.rowsContainer,ln.Change,x=>this.onTouchChange(x))),this.disposables.add(oe(this.scrollableElement.getDomNode(),"scroll",x=>x.target.scrollTop=0)),this.disposables.add(oe(this.domNode,"dragover",x=>this.onDragOver(this.toDragEvent(x)))),this.disposables.add(oe(this.domNode,"drop",x=>this.onDrop(this.toDragEvent(x)))),this.disposables.add(oe(this.domNode,"dragleave",x=>this.onDragLeave(this.toDragEvent(x)))),this.disposables.add(oe(this.domNode,"dragend",x=>this.onDragEnd(x))),this.setRowLineHeight=(g=n.setRowLineHeight)!==null&&g!==void 0?g:Du.setRowLineHeight,this.setRowHeight=(p=n.setRowHeight)!==null&&p!==void 0?p:Du.setRowHeight,this.supportDynamicHeights=(_=n.supportDynamicHeights)!==null&&_!==void 0?_:Du.supportDynamicHeights,this.dnd=(b=n.dnd)!==null&&b!==void 0?b:this.disposables.add(Du.dnd),this.layout((y=n.initialSize)===null||y===void 0?void 0:y.height,(S=n.initialSize)===null||S===void 0?void 0:S.width)}updateOptions(e){e.paddingBottom!==void 0&&(this.paddingBottom=e.paddingBottom,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),e.smoothScrolling!==void 0&&this.scrollable.setSmoothScrollDuration(e.smoothScrolling?125:0),e.horizontalScrolling!==void 0&&(this.horizontalScrolling=e.horizontalScrolling);let t;if(e.scrollByPage!==void 0&&(t={...t??{},scrollByPage:e.scrollByPage}),e.mouseWheelScrollSensitivity!==void 0&&(t={...t??{},mouseWheelScrollSensitivity:e.mouseWheelScrollSensitivity}),e.fastScrollSensitivity!==void 0&&(t={...t??{},fastScrollSensitivity:e.fastScrollSensitivity}),t&&this.scrollableElement.updateOptions(t),e.paddingTop!==void 0&&e.paddingTop!==this.rangeMap.paddingTop){const i=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),n=e.paddingTop-this.rangeMap.paddingTop;this.rangeMap.paddingTop=e.paddingTop,this.render(i,Math.max(0,this.lastRenderTop+n),this.lastRenderHeight,void 0,void 0,!0),this.setScrollTop(this.lastRenderTop),this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.lastRenderTop,this.lastRenderHeight)}}createRangeMap(e){return new QMe(e)}splice(e,t,i=[]){if(this.splicing)throw new Error("Can't run recursive splices.");this.splicing=!0;try{return this._splice(e,t,i)}finally{this.splicing=!1,this._onDidChangeContentHeight.fire(this.contentHeight)}}_splice(e,t,i=[]){const n=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),s={start:e,end:e+t},r=$o.intersect(n,s),a=new Map;for(let E=r.end-1;E>=r.start;E--){const N=this.items[E];if(N.dragStartDisposable.dispose(),N.checkedDisposable.dispose(),N.row){let M=a.get(N.templateId);M||(M=[],a.set(N.templateId,M));const F=this.renderers.get(N.templateId);F&&F.disposeElement&&F.disposeElement(N.element,E,N.row.templateData,N.size),M.push(N.row)}N.row=null,N.stale=!0}const l={start:e+t,end:this.items.length},c=$o.intersect(l,n),u=$o.relativeComplement(l,n),f=i.map(E=>({id:String(this.itemId++),element:E,templateId:this.virtualDelegate.getTemplateId(E),size:this.virtualDelegate.getHeight(E),width:void 0,hasDynamicHeight:!!this.virtualDelegate.hasDynamicHeight&&this.virtualDelegate.hasDynamicHeight(E),lastDynamicHeightWidth:void 0,row:null,uri:void 0,dropTarget:!1,dragStartDisposable:J.None,checkedDisposable:J.None,stale:!1}));let g;e===0&&t>=this.items.length?(this.rangeMap=this.createRangeMap(this.rangeMap.paddingTop),this.rangeMap.splice(0,0,f),g=this.items,this.items=f):(this.rangeMap.splice(e,t,f),g=this.items.splice(e,t,...f));const p=i.length-t,_=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),b=w8(c,p),y=$o.intersect(_,b);for(let E=y.start;E<y.end;E++)this.updateItemInDOM(this.items[E],E);const S=$o.relativeComplement(b,_);for(const E of S)for(let N=E.start;N<E.end;N++)this.removeItemFromDOM(N);const L=u.map(E=>w8(E,p)),D=[{start:e,end:e+i.length},...L].map(E=>$o.intersect(_,E)).reverse();for(const E of D)for(let N=E.end-1;N>=E.start;N--){const M=this.items[N],F=a.get(M.templateId),H=F==null?void 0:F.pop();this.insertItemInDOM(N,H)}for(const E of a.values())for(const N of E)this.cache.release(N);return this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight),g.map(E=>E.element)}eventuallyUpdateScrollDimensions(){this._scrollHeight=this.contentHeight,this.rowsContainer.style.height=`${this._scrollHeight}px`,this.scrollableElementUpdateDisposable||(this.scrollableElementUpdateDisposable=ja(ft(this.domNode),()=>{this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight}),this.updateScrollWidth(),this.scrollableElementUpdateDisposable=null}))}eventuallyUpdateScrollWidth(){if(!this.horizontalScrolling){this.scrollableElementWidthDelayer.cancel();return}this.scrollableElementWidthDelayer.trigger(()=>this.updateScrollWidth())}updateScrollWidth(){if(!this.horizontalScrolling)return;let e=0;for(const t of this.items)typeof t.width<"u"&&(e=Math.max(e,t.width));this.scrollWidth=e,this.scrollableElement.setScrollDimensions({scrollWidth:e===0?0:e+10}),this._onDidChangeContentWidth.fire(this.scrollWidth)}rerender(){if(this.supportDynamicHeights){for(const e of this.items)e.lastDynamicHeightWidth=void 0;this._rerender(this.lastRenderTop,this.lastRenderHeight)}}get length(){return this.items.length}get renderHeight(){return this.scrollableElement.getScrollDimensions().height}get firstVisibleIndex(){return this.getRenderRange(this.lastRenderTop,this.lastRenderHeight).start}element(e){return this.items[e].element}indexOf(e){return this.items.findIndex(t=>t.element===e)}domElement(e){const t=this.items[e].row;return t&&t.domNode}elementHeight(e){return this.items[e].size}elementTop(e){return this.rangeMap.positionAt(e)}indexAt(e){return this.rangeMap.indexAt(e)}indexAfter(e){return this.rangeMap.indexAfter(e)}layout(e,t){const i={height:typeof e=="number"?e:V1e(this.domNode)};this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,i.scrollHeight=this.scrollHeight),this.scrollableElement.setScrollDimensions(i),typeof t<"u"&&(this.renderWidth=t,this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight)),this.horizontalScrolling&&this.scrollableElement.setScrollDimensions({width:typeof t=="number"?t:Z5(this.domNode)})}render(e,t,i,n,s,r=!1){const a=this.getRenderRange(t,i),l=$o.relativeComplement(a,e).reverse(),c=$o.relativeComplement(e,a);if(r){const u=$o.intersect(e,a);for(let f=u.start;f<u.end;f++)this.updateItemInDOM(this.items[f],f)}this.cache.transact(()=>{for(const u of c)for(let f=u.start;f<u.end;f++)this.removeItemFromDOM(f);for(const u of l)for(let f=u.end-1;f>=u.start;f--)this.insertItemInDOM(f)}),n!==void 0&&(this.rowsContainer.style.left=`-${n}px`),this.rowsContainer.style.top=`-${t}px`,this.horizontalScrolling&&s!==void 0&&(this.rowsContainer.style.width=`${Math.max(s,this.renderWidth)}px`),this.lastRenderTop=t,this.lastRenderHeight=i}insertItemInDOM(e,t){var i,n,s;const r=this.items[e];if(!r.row)if(t)r.row=t,r.stale=!0;else{const f=this.cache.alloc(r.templateId);r.row=f.row,r.stale||(r.stale=f.isReusingConnectedDomNode)}const a=this.accessibilityProvider.getRole(r.element)||"listitem";r.row.domNode.setAttribute("role",a);const l=this.accessibilityProvider.isChecked(r.element);if(typeof l=="boolean")r.row.domNode.setAttribute("aria-checked",String(!!l));else if(l){const f=g=>r.row.domNode.setAttribute("aria-checked",String(!!g));f(l.value),r.checkedDisposable=l.onDidChange(f)}if(r.stale||!r.row.domNode.parentElement){const f=(s=(n=(i=this.items.at(e+1))===null||i===void 0?void 0:i.row)===null||n===void 0?void 0:n.domNode)!==null&&s!==void 0?s:null;this.rowsContainer.insertBefore(r.row.domNode,f),r.stale=!1}this.updateItemInDOM(r,e);const c=this.renderers.get(r.templateId);if(!c)throw new Error(`No renderer found for template id ${r.templateId}`);c==null||c.renderElement(r.element,e,r.row.templateData,r.size);const u=this.dnd.getDragURI(r.element);r.dragStartDisposable.dispose(),r.row.domNode.draggable=!!u,u&&(r.dragStartDisposable=oe(r.row.domNode,"dragstart",f=>this.onDragStart(r.element,u,f))),this.horizontalScrolling&&(this.measureItemWidth(r),this.eventuallyUpdateScrollWidth())}measureItemWidth(e){if(!e.row||!e.row.domNode)return;e.row.domNode.style.width="fit-content",e.width=Z5(e.row.domNode);const t=ft(e.row.domNode).getComputedStyle(e.row.domNode);t.paddingLeft&&(e.width+=parseFloat(t.paddingLeft)),t.paddingRight&&(e.width+=parseFloat(t.paddingRight)),e.row.domNode.style.width=""}updateItemInDOM(e,t){e.row.domNode.style.top=`${this.elementTop(t)}px`,this.setRowHeight&&(e.row.domNode.style.height=`${e.size}px`),this.setRowLineHeight&&(e.row.domNode.style.lineHeight=`${e.size}px`),e.row.domNode.setAttribute("data-index",`${t}`),e.row.domNode.setAttribute("data-last-element",t===this.length-1?"true":"false"),e.row.domNode.setAttribute("data-parity",t%2===0?"even":"odd"),e.row.domNode.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(e.element,t,this.length))),e.row.domNode.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(e.element,t))),e.row.domNode.setAttribute("id",this.getElementDomId(t)),e.row.domNode.classList.toggle("drop-target",e.dropTarget)}removeItemFromDOM(e){const t=this.items[e];if(t.dragStartDisposable.dispose(),t.checkedDisposable.dispose(),t.row){const i=this.renderers.get(t.templateId);i&&i.disposeElement&&i.disposeElement(t.element,e,t.row.templateData,t.size),this.cache.release(t.row),t.row=null}this.horizontalScrolling&&this.eventuallyUpdateScrollWidth()}getScrollTop(){return this.scrollableElement.getScrollPosition().scrollTop}setScrollTop(e,t){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),this.scrollableElement.setScrollPosition({scrollTop:e,reuseAnimation:t})}get scrollTop(){return this.getScrollTop()}set scrollTop(e){this.setScrollTop(e)}get scrollHeight(){return this._scrollHeight+(this.horizontalScrolling?10:0)+this.paddingBottom}get onMouseClick(){return Ie.map(this.disposables.add(new Xt(this.domNode,"click")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseDblClick(){return Ie.map(this.disposables.add(new Xt(this.domNode,"dblclick")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseMiddleClick(){return Ie.filter(Ie.map(this.disposables.add(new Xt(this.domNode,"auxclick")).event,e=>this.toMouseEvent(e),this.disposables),e=>e.browserEvent.button===1,this.disposables)}get onMouseDown(){return Ie.map(this.disposables.add(new Xt(this.domNode,"mousedown")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseOver(){return Ie.map(this.disposables.add(new Xt(this.domNode,"mouseover")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseOut(){return Ie.map(this.disposables.add(new Xt(this.domNode,"mouseout")).event,e=>this.toMouseEvent(e),this.disposables)}get onContextMenu(){return Ie.any(Ie.map(this.disposables.add(new Xt(this.domNode,"contextmenu")).event,e=>this.toMouseEvent(e),this.disposables),Ie.map(this.disposables.add(new Xt(this.domNode,ln.Contextmenu)).event,e=>this.toGestureEvent(e),this.disposables))}get onTouchStart(){return Ie.map(this.disposables.add(new Xt(this.domNode,"touchstart")).event,e=>this.toTouchEvent(e),this.disposables)}get onTap(){return Ie.map(this.disposables.add(new Xt(this.rowsContainer,ln.Tap)).event,e=>this.toGestureEvent(e),this.disposables)}toMouseEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),i=typeof t>"u"?void 0:this.items[t],n=i&&i.element;return{browserEvent:e,index:t,element:n}}toTouchEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),i=typeof t>"u"?void 0:this.items[t],n=i&&i.element;return{browserEvent:e,index:t,element:n}}toGestureEvent(e){const t=this.getItemIndexFromEventTarget(e.initialTarget||null),i=typeof t>"u"?void 0:this.items[t],n=i&&i.element;return{browserEvent:e,index:t,element:n}}toDragEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),i=typeof t>"u"?void 0:this.items[t],n=i&&i.element,s=this.getTargetSector(e,t);return{browserEvent:e,index:t,element:n,sector:s}}onScroll(e){try{const t=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);this.render(t,e.scrollTop,e.height,e.scrollLeft,e.scrollWidth),this.supportDynamicHeights&&this._rerender(e.scrollTop,e.height,e.inSmoothScrolling)}catch(t){throw console.error("Got bad scroll event:",e),t}}onTouchChange(e){e.preventDefault(),e.stopPropagation(),this.scrollTop-=e.translationY}onDragStart(e,t,i){var n,s;if(!i.dataTransfer)return;const r=this.dnd.getDragElements(e);if(i.dataTransfer.effectAllowed="copyMove",i.dataTransfer.setData(Ox.TEXT,t),i.dataTransfer.setDragImage){let a;this.dnd.getDragLabel&&(a=this.dnd.getDragLabel(r,i)),typeof a>"u"&&(a=String(r.length));const l=ye(".monaco-drag-image");l.textContent=a;const u=(f=>{for(;f&&!f.classList.contains("monaco-workbench");)f=f.parentElement;return f||this.domNode.ownerDocument})(this.domNode);u.appendChild(l),i.dataTransfer.setDragImage(l,-10,-10),setTimeout(()=>u.removeChild(l),0)}this.domNode.classList.add("dragging"),this.currentDragData=new tk(r),M_.CurrentDragAndDropData=new eAe(r),(s=(n=this.dnd).onDragStart)===null||s===void 0||s.call(n,this.currentDragData,i)}onDragOver(e){var t,i;if(e.browserEvent.preventDefault(),this.onDragLeaveTimeout.dispose(),M_.CurrentDragAndDropData&&M_.CurrentDragAndDropData.getData()==="vscode-ui"||(this.setupDragAndDropScrollTopAnimation(e.browserEvent),!e.browserEvent.dataTransfer))return!1;if(!this.currentDragData)if(M_.CurrentDragAndDropData)this.currentDragData=M_.CurrentDragAndDropData;else{if(!e.browserEvent.dataTransfer.types)return!1;this.currentDragData=new tAe}const n=this.dnd.onDragOver(this.currentDragData,e.element,e.index,e.sector,e.browserEvent);if(this.canDrop=typeof n=="boolean"?n:n.accept,!this.canDrop)return this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),!1;e.browserEvent.dataTransfer.dropEffect=typeof n!="boolean"&&((t=n.effect)===null||t===void 0?void 0:t.type)===0?"copy":"move";let s;typeof n!="boolean"&&n.feedback?s=n.feedback:typeof e.index>"u"?s=[-1]:s=[e.index],s=eg(s).filter(a=>a>=-1&&a<this.length).sort((a,l)=>a-l),s=s[0]===-1?[-1]:s;let r=typeof n!="boolean"&&n.effect&&n.effect.position?n.effect.position:"drop-target";if(iAe(this.currentDragFeedback,s)&&this.currentDragFeedbackPosition===r)return!0;if(this.currentDragFeedback=s,this.currentDragFeedbackPosition=r,this.currentDragFeedbackDisposable.dispose(),s[0]===-1)this.domNode.classList.add(r),this.rowsContainer.classList.add(r),this.currentDragFeedbackDisposable=lt(()=>{this.domNode.classList.remove(r),this.rowsContainer.classList.remove(r)});else{if(s.length>1&&r!=="drop-target")throw new Error("Can't use multiple feedbacks with position different than 'over'");r==="drop-target-after"&&s[0]<this.length-1&&(s[0]+=1,r="drop-target-before");for(const a of s){const l=this.items[a];l.dropTarget=!0,(i=l.row)===null||i===void 0||i.domNode.classList.add(r)}this.currentDragFeedbackDisposable=lt(()=>{var a;for(const l of s){const c=this.items[l];c.dropTarget=!1,(a=c.row)===null||a===void 0||a.domNode.classList.remove(r)}})}return!0}onDragLeave(e){var t,i;this.onDragLeaveTimeout.dispose(),this.onDragLeaveTimeout=dm(()=>this.clearDragOverFeedback(),100,this.disposables),this.currentDragData&&((i=(t=this.dnd).onDragLeave)===null||i===void 0||i.call(t,this.currentDragData,e.element,e.index,e.browserEvent))}onDrop(e){if(!this.canDrop)return;const t=this.currentDragData;this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,M_.CurrentDragAndDropData=void 0,!(!t||!e.browserEvent.dataTransfer)&&(e.browserEvent.preventDefault(),t.update(e.browserEvent.dataTransfer),this.dnd.drop(t,e.element,e.index,e.sector,e.browserEvent))}onDragEnd(e){var t,i;this.canDrop=!1,this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,M_.CurrentDragAndDropData=void 0,(i=(t=this.dnd).onDragEnd)===null||i===void 0||i.call(t,e)}clearDragOverFeedback(){this.currentDragFeedback=void 0,this.currentDragFeedbackPosition=void 0,this.currentDragFeedbackDisposable.dispose(),this.currentDragFeedbackDisposable=J.None}setupDragAndDropScrollTopAnimation(e){if(!this.dragOverAnimationDisposable){const t=Aie(this.domNode).top;this.dragOverAnimationDisposable=J1e(ft(this.domNode),this.animateDragAndDropScrollTop.bind(this,t))}this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationStopDisposable=dm(()=>{this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)},1e3,this.disposables),this.dragOverMouseY=e.pageY}animateDragAndDropScrollTop(e){if(this.dragOverMouseY===void 0)return;const t=this.dragOverMouseY-e,i=this.renderHeight-35;t<35?this.scrollTop+=Math.max(-14,Math.floor(.3*(t-35))):t>i&&(this.scrollTop+=Math.min(14,Math.floor(.3*(t-i))))}teardownDragAndDropScrollTopAnimation(){this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)}getTargetSector(e,t){if(t===void 0)return;const i=e.offsetY/this.items[t].size,n=Math.floor(i/.25);return Tr(n,0,3)}getItemIndexFromEventTarget(e){const t=this.scrollableElement.getDomNode();let i=e;for(;i instanceof HTMLElement&&i!==this.rowsContainer&&t.contains(i);){const n=i.getAttribute("data-index");if(n){const s=Number(n);if(!isNaN(s))return s}i=i.parentElement}}getRenderRange(e,t){return{start:this.rangeMap.indexAt(e),end:this.rangeMap.indexAfter(e+t-1)}}_rerender(e,t,i){const n=this.getRenderRange(e,t);let s,r;e===this.elementTop(n.start)?(s=n.start,r=0):n.end-n.start>1&&(s=n.start+1,r=this.elementTop(s)-e);let a=0;for(;;){const l=this.getRenderRange(e,t);let c=!1;for(let u=l.start;u<l.end;u++){const f=this.probeDynamicHeight(u);f!==0&&this.rangeMap.splice(u,1,[this.items[u]]),a+=f,c=c||f!==0}if(!c){a!==0&&this.eventuallyUpdateScrollDimensions();const u=$o.relativeComplement(n,l);for(const g of u)for(let p=g.start;p<g.end;p++)this.items[p].row&&this.removeItemFromDOM(p);const f=$o.relativeComplement(l,n).reverse();for(const g of f)for(let p=g.end-1;p>=g.start;p--)this.insertItemInDOM(p);for(let g=l.start;g<l.end;g++)this.items[g].row&&this.updateItemInDOM(this.items[g],g);if(typeof s=="number"){const g=this.scrollable.getFutureScrollPosition().scrollTop-e,p=this.elementTop(s)-r+g;this.setScrollTop(p,i)}this._onDidChangeContentHeight.fire(this.contentHeight);return}}}probeDynamicHeight(e){var t,i,n;const s=this.items[e];if(this.virtualDelegate.getDynamicHeight){const c=this.virtualDelegate.getDynamicHeight(s.element);if(c!==null){const u=s.size;return s.size=c,s.lastDynamicHeightWidth=this.renderWidth,c-u}}if(!s.hasDynamicHeight||s.lastDynamicHeightWidth===this.renderWidth||this.virtualDelegate.hasDynamicHeight&&!this.virtualDelegate.hasDynamicHeight(s.element))return 0;const r=s.size;if(s.row)return s.row.domNode.style.height="",s.size=s.row.domNode.offsetHeight,s.size===0&&!ao(s.row.domNode,ft(s.row.domNode).document.body)&&console.warn("Measuring item node that is not in DOM! Add ListView to the DOM before measuring row height!"),s.lastDynamicHeightWidth=this.renderWidth,s.size-r;const{row:a}=this.cache.alloc(s.templateId);a.domNode.style.height="",this.rowsContainer.appendChild(a.domNode);const l=this.renderers.get(s.templateId);if(!l)throw new pn("Missing renderer for templateId: "+s.templateId);return l.renderElement(s.element,e,a.templateData,void 0),s.size=a.domNode.offsetHeight,(t=l.disposeElement)===null||t===void 0||t.call(l,s.element,e,a.templateData,void 0),(n=(i=this.virtualDelegate).setDynamicHeight)===null||n===void 0||n.call(i,s.element,s.size),s.lastDynamicHeightWidth=this.renderWidth,this.rowsContainer.removeChild(a.domNode),this.cache.release(a),s.size-r}getElementDomId(e){return`${this.domId}_${e}`}dispose(){var e,t;for(const i of this.items)if(i.dragStartDisposable.dispose(),i.checkedDisposable.dispose(),i.row){const n=this.renderers.get(i.row.templateId);n&&((e=n.disposeElement)===null||e===void 0||e.call(n,i.element,-1,i.row.templateData,void 0),n.disposeTemplate(i.row.templateData))}this.items=[],this.domNode&&this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),(t=this.dragOverAnimationDisposable)===null||t===void 0||t.dispose(),this.disposables.dispose()}}bc.InstanceCount=0;pg([fs],bc.prototype,"onMouseClick",null);pg([fs],bc.prototype,"onMouseDblClick",null);pg([fs],bc.prototype,"onMouseMiddleClick",null);pg([fs],bc.prototype,"onMouseDown",null);pg([fs],bc.prototype,"onMouseOver",null);pg([fs],bc.prototype,"onMouseOut",null);pg([fs],bc.prototype,"onContextMenu",null);pg([fs],bc.prototype,"onTouchStart",null);pg([fs],bc.prototype,"onTap",null);class Yd{constructor(e,t,i){this.owner=e,this.debugNameSource=t,this.referenceFn=i}getDebugName(e){return sAe(e,this)}}const EX=new Map,y8=new WeakMap;function sAe(o,e){var t;const i=y8.get(o);if(i)return i;const n=oAe(o,e);if(n){let s=(t=EX.get(n))!==null&&t!==void 0?t:0;s++,EX.set(n,s);const r=s===1?n:`${n}#${s}`;return y8.set(o,r),r}}function oAe(o,e){const t=y8.get(o);if(t)return t;const i=e.owner?aAe(e.owner)+".":"";let n;const s=e.debugNameSource;if(s!==void 0)if(typeof s=="function"){if(n=s(),n!==void 0)return i+n}else return i+s;const r=e.referenceFn;if(r!==void 0&&(n=rP(r),n!==void 0))return i+n;if(e.owner!==void 0){const a=rAe(e.owner,o);if(a!==void 0)return i+a}}function rAe(o,e){for(const t in o)if(o[t]===e)return t}const IX=new Map,TX=new WeakMap;function aAe(o){var e;const t=TX.get(o);if(t)return t;const i=lAe(o);let n=(e=IX.get(i))!==null&&e!==void 0?e:0;n++,IX.set(i,n);const s=n===1?i:`${i}#${n}`;return TX.set(o,s),s}function lAe(o){const e=o.constructor;return e?e.name:"Object"}function rP(o){const e=o.toString(),i=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(e),n=i?i[1]:void 0;return n==null?void 0:n.trim()}let cAe;function lh(){return cAe}let voe;function dAe(o){voe=o}let boe;function uAe(o){boe=o}class Coe{get TChange(){return null}reportChanges(){this.get()}read(e){return e?e.readObservable(this):this.get()}map(e,t){const i=t===void 0?void 0:e,n=t===void 0?e:t;return boe({owner:i,debugName:()=>{const s=rP(n);if(s!==void 0)return s;const a=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(n.toString());if(a)return`${this.debugName}.${a[2]}`;if(!i)return`${this.debugName} (mapped)`}},s=>n(this.read(s),s))}recomputeInitiallyAndOnChange(e,t){return e.add(voe(this,t)),this}}class ik extends Coe{constructor(){super(...arguments),this.observers=new Set}addObserver(e){const t=this.observers.size;this.observers.add(e),t===0&&this.onFirstObserverAdded()}removeObserver(e){this.observers.delete(e)&&this.observers.size===0&&this.onLastObserverRemoved()}onFirstObserverAdded(){}onLastObserverRemoved(){}}function qi(o,e){const t=new aP(o,e);try{o(t)}finally{t.finish()}}let TT;function MN(o){if(TT)o(TT);else{const e=new aP(o,void 0);TT=e;try{o(e)}finally{e.finish(),TT=void 0}}}async function hAe(o,e){const t=new aP(o,e);try{await o(t)}finally{t.finish()}}function Fx(o,e,t){o?e(o):qi(e,t)}class aP{constructor(e,t){var i;this._fn=e,this._getDebugName=t,this.updatingObservers=[],(i=lh())===null||i===void 0||i.handleBeginTransaction(this)}getDebugName(){return this._getDebugName?this._getDebugName():rP(this._fn)}updateObserver(e,t){this.updatingObservers.push({observer:e,observable:t}),e.beginUpdate(t)}finish(){var e;const t=this.updatingObservers;for(let i=0;i<t.length;i++){const{observer:n,observable:s}=t[i];n.endUpdate(s)}this.updatingObservers=null,(e=lh())===null||e===void 0||e.handleEndTransaction()}}function ni(o,e){return typeof o=="string"?new S8(void 0,o,e):new S8(o,void 0,e)}class S8 extends ik{get debugName(){var e;return(e=new Yd(this._owner,this._debugName,void 0).getDebugName(this))!==null&&e!==void 0?e:"ObservableValue"}constructor(e,t,i){super(),this._owner=e,this._debugName=t,this._value=i}get(){return this._value}set(e,t,i){var n;if(this._value===e)return;let s;t||(t=s=new aP(()=>{},()=>`Setting ${this.debugName}`));try{const r=this._value;this._setValue(e),(n=lh())===null||n===void 0||n.handleObservableChanged(this,{oldValue:r,newValue:e,change:i,didChange:!0,hadValue:!0});for(const a of this.observers)t.updateObserver(a,this),a.handleChange(this,i)}finally{s&&s.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(e){this._value=e}}function Bx(o,e){return typeof o=="string"?new NX(void 0,o,e):new NX(o,void 0,e)}class NX extends S8{_setValue(e){this._value!==e&&(this._value&&this._value.dispose(),this._value=e)}dispose(){var e;(e=this._value)===null||e===void 0||e.dispose()}}const S1=(o,e)=>o===e;function Dt(o,e){return e!==void 0?new L1(new Yd(o,void 0,e),e,void 0,void 0,void 0,S1):new L1(new Yd(void 0,void 0,o),o,void 0,void 0,void 0,S1)}function VC(o,e){var t;return new L1(new Yd(o.owner,o.debugName,o.debugReferenceFn),e,void 0,void 0,o.onLastObserverRemoved,(t=o.equalityComparer)!==null&&t!==void 0?t:S1)}uAe(VC);function fAe(o,e){var t;return new L1(new Yd(o.owner,o.debugName,void 0),e,o.createEmptyChangeSummary,o.handleChange,void 0,(t=o.equalityComparer)!==null&&t!==void 0?t:S1)}function ew(o,e){let t,i;e===void 0?(t=o,i=void 0):(i=o,t=e);const n=new he;return new L1(new Yd(i,void 0,t),s=>(n.clear(),t(s,n)),void 0,void 0,()=>n.dispose(),S1)}function lf(o,e){let t,i;e===void 0?(t=o,i=void 0):(i=o,t=e);const n=new he;return new L1(new Yd(i,void 0,t),s=>{n.clear();const r=t(s);return r&&n.add(r),r},void 0,void 0,()=>n.dispose(),S1)}class L1 extends ik{get debugName(){var e;return(e=this._debugNameData.getDebugName(this))!==null&&e!==void 0?e:"(anonymous)"}constructor(e,t,i,n,s=void 0,r){var a,l;super(),this._debugNameData=e,this._computeFn=t,this.createChangeSummary=i,this._handleChange=n,this._handleLastObserverRemoved=s,this._equalityComparator=r,this.state=0,this.value=void 0,this.updateCount=0,this.dependencies=new Set,this.dependenciesToBeRemoved=new Set,this.changeSummary=void 0,this.changeSummary=(a=this.createChangeSummary)===null||a===void 0?void 0:a.call(this),(l=lh())===null||l===void 0||l.handleDerivedCreated(this)}onLastObserverRemoved(){var e;this.state=0,this.value=void 0;for(const t of this.dependencies)t.removeObserver(this);this.dependencies.clear(),(e=this._handleLastObserverRemoved)===null||e===void 0||e.call(this)}get(){var e;if(this.observers.size===0){const t=this._computeFn(this,(e=this.createChangeSummary)===null||e===void 0?void 0:e.call(this));return this.onLastObserverRemoved(),t}else{do{if(this.state===1){for(const t of this.dependencies)if(t.reportChanges(),this.state===2)break}this.state===1&&(this.state=3),this._recomputeIfNeeded()}while(this.state!==3);return this.value}}_recomputeIfNeeded(){var e,t;if(this.state===3)return;const i=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=i;const n=this.state!==0,s=this.value;this.state=3;const r=this.changeSummary;this.changeSummary=(e=this.createChangeSummary)===null||e===void 0?void 0:e.call(this);try{this.value=this._computeFn(this,r)}finally{for(const l of this.dependenciesToBeRemoved)l.removeObserver(this);this.dependenciesToBeRemoved.clear()}const a=n&&!this._equalityComparator(s,this.value);if((t=lh())===null||t===void 0||t.handleDerivedRecomputed(this,{oldValue:s,newValue:this.value,change:void 0,didChange:a,hadValue:n}),a)for(const l of this.observers)l.handleChange(this,void 0)}toString(){return`LazyDerived<${this.debugName}>`}beginUpdate(e){this.updateCount++;const t=this.updateCount===1;if(this.state===3&&(this.state=1,!t))for(const i of this.observers)i.handlePossibleChange(this);if(t)for(const i of this.observers)i.beginUpdate(this)}endUpdate(e){if(this.updateCount--,this.updateCount===0){const t=[...this.observers];for(const i of t)i.endUpdate(this)}Mv(()=>this.updateCount>=0)}handlePossibleChange(e){if(this.state===3&&this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)){this.state=1;for(const t of this.observers)t.handlePossibleChange(this)}}handleChange(e,t){if(this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)){const i=this._handleChange?this._handleChange({changedObservable:e,change:t,didChange:s=>s===e},this.changeSummary):!0,n=this.state===3;if(i&&(this.state===1||n)&&(this.state=2,n))for(const s of this.observers)s.handlePossibleChange(this)}}readObservable(e){e.addObserver(this);const t=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),t}addObserver(e){const t=!this.observers.has(e)&&this.updateCount>0;super.addObserver(e),t&&e.beginUpdate(this)}removeObserver(e){const t=this.observers.has(e)&&this.updateCount>0;super.removeObserver(e),t&&e.endUpdate(this)}}function zt(o){return new cP(new Yd(void 0,void 0,o),o,void 0,void 0)}function lP(o,e){var t;return new cP(new Yd(o.owner,o.debugName,(t=o.debugReferenceFn)!==null&&t!==void 0?t:e),e,void 0,void 0)}function nk(o,e){var t;return new cP(new Yd(o.owner,o.debugName,(t=o.debugReferenceFn)!==null&&t!==void 0?t:e),e,o.createEmptyChangeSummary,o.handleChange)}function gc(o){const e=new he,t=lP({owner:void 0,debugName:void 0,debugReferenceFn:o},i=>{e.clear(),o(i,e)});return lt(()=>{t.dispose(),e.dispose()})}class cP{get debugName(){var e;return(e=this._debugNameData.getDebugName(this))!==null&&e!==void 0?e:"(anonymous)"}constructor(e,t,i,n){var s,r;this._debugNameData=e,this._runFn=t,this.createChangeSummary=i,this._handleChange=n,this.state=2,this.updateCount=0,this.disposed=!1,this.dependencies=new Set,this.dependenciesToBeRemoved=new Set,this.changeSummary=(s=this.createChangeSummary)===null||s===void 0?void 0:s.call(this),(r=lh())===null||r===void 0||r.handleAutorunCreated(this),this._runIfNeeded()}dispose(){this.disposed=!0;for(const e of this.dependencies)e.removeObserver(this);this.dependencies.clear()}_runIfNeeded(){var e,t,i;if(this.state===3)return;const n=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=n,this.state=3;const s=this.disposed;try{if(!s){(e=lh())===null||e===void 0||e.handleAutorunTriggered(this);const r=this.changeSummary;this.changeSummary=(t=this.createChangeSummary)===null||t===void 0?void 0:t.call(this),this._runFn(this,r)}}finally{s||(i=lh())===null||i===void 0||i.handleAutorunFinished(this);for(const r of this.dependenciesToBeRemoved)r.removeObserver(this);this.dependenciesToBeRemoved.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(){this.state===3&&(this.state=1),this.updateCount++}endUpdate(){if(this.updateCount===1)do{if(this.state===1){this.state=3;for(const e of this.dependencies)if(e.reportChanges(),this.state===2)break}this._runIfNeeded()}while(this.state!==3);this.updateCount--,Mv(()=>this.updateCount>=0)}handlePossibleChange(e){this.state===3&&this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)&&(this.state=1)}handleChange(e,t){this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)&&(!this._handleChange||this._handleChange({changedObservable:e,change:t,didChange:n=>n===e},this.changeSummary))&&(this.state=2)}readObservable(e){if(this.disposed)return e.get();e.addObserver(this);const t=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),t}}(function(o){o.Observer=cP})(zt||(zt={}));function Ad(o){return new gAe(o)}class gAe extends Coe{constructor(e){super(),this.value=e}get debugName(){return this.toString()}get(){return this.value}addObserver(e){}removeObserver(e){}toString(){return`Const: ${this.value}`}}function Gi(o,e){return new rv(o,e)}class rv extends ik{constructor(e,t){super(),this.event=e,this._getValue=t,this.hasValue=!1,this.handleEvent=i=>{var n;const s=this._getValue(i),r=this.value,a=!this.hasValue||r!==s;let l=!1;a&&(this.value=s,this.hasValue&&(l=!0,Fx(rv.globalTransaction,c=>{var u;(u=lh())===null||u===void 0||u.handleFromEventObservableTriggered(this,{oldValue:r,newValue:s,change:void 0,didChange:a,hadValue:this.hasValue});for(const f of this.observers)c.updateObserver(f,this),f.handleChange(this,void 0)},()=>{const c=this.getDebugName();return"Event fired"+(c?`: ${c}`:"")})),this.hasValue=!0),l||(n=lh())===null||n===void 0||n.handleFromEventObservableTriggered(this,{oldValue:r,newValue:s,change:void 0,didChange:a,hadValue:this.hasValue})}}getDebugName(){return rP(this._getValue)}get debugName(){const e=this.getDebugName();return"From Event"+(e?`: ${e}`:"")}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0,this.hasValue=!1,this.value=void 0}get(){return this.subscription?(this.hasValue||this.handleEvent(void 0),this.value):this._getValue(void 0)}}(function(o){o.Observer=rv;function e(t,i){let n=!1;rv.globalTransaction===void 0&&(rv.globalTransaction=t,n=!0);try{i()}finally{n&&(rv.globalTransaction=void 0)}}o.batchEventsGlobally=e})(Gi||(Gi={}));function Go(o,e){return new pAe(o,e)}class pAe extends ik{constructor(e,t){super(),this.debugName=e,this.event=t,this.handleEvent=()=>{qi(i=>{for(const n of this.observers)i.updateObserver(n,this),n.handleChange(this,void 0)},()=>this.debugName)}}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0}get(){}}function dP(o){return typeof o=="string"?new RX(o):new RX(void 0,o)}class RX extends ik{get debugName(){var e;return(e=new Yd(this._owner,this._debugName,void 0).getDebugName(this))!==null&&e!==void 0?e:"Observable Signal"}constructor(e,t){super(),this._debugName=e,this._owner=t}trigger(e,t){if(!e){qi(i=>{this.trigger(i,t)},()=>`Trigger signal ${this.debugName}`);return}for(const i of this.observers)e.updateObserver(i,this),i.handleChange(this,t)}get(){}}function sk(o,e){const t=new mAe(!0,e);return o.addObserver(t),e?e(o.get()):o.reportChanges(),lt(()=>{o.removeObserver(t)})}dAe(sk);class mAe{constructor(e,t){this._forceRecompute=e,this._handleValue=t,this._counter=0}beginUpdate(e){this._counter++}endUpdate(e){this._counter--,this._counter===0&&this._forceRecompute&&(this._handleValue?this._handleValue(e.get()):e.reportChanges())}handlePossibleChange(e){}handleChange(e,t){}}function _Ae(o){let e;return Dt(i=>(e=o(i,e),e))}function vAe(o,e,t,i){let n=new MX(t,i);return VC({debugReferenceFn:t,owner:o,onLastObserverRemoved:()=>{n.dispose(),n=new MX(t)}},r=>(n.setItems(e.read(r)),n.getItems()))}class MX{constructor(e,t){this._map=e,this._keySelector=t,this._cache=new Map,this._items=[]}dispose(){this._cache.forEach(e=>e.store.dispose()),this._cache.clear()}setItems(e){const t=[],i=new Set(this._cache.keys());for(const n of e){const s=this._keySelector?this._keySelector(n):n;let r=this._cache.get(s);if(r)i.delete(s);else{const a=new he;r={out:this._map(n,a),store:a},this._cache.set(s,r)}t.push(r.out)}for(const n of i)this._cache.get(n).store.dispose(),this._cache.delete(n);this._items=t}getItems(){return this._items}}function bAe(o,e,t){return new Promise((i,n)=>{let s=!0,r=!1;const a=o.map(c=>({isFinished:e(c),error:!1,state:c})),l=zt(c=>{const{isFinished:u,error:f,state:g}=a.read(c);(u||f)&&(s?r=!0:l.dispose(),f?n(f===!0?g:f):i(g))});s=!1,r&&l.dispose()})}var Wm=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class CAe{constructor(e){this.trait=e,this.renderedElements=[]}get templateId(){return`template:${this.trait.name}`}renderTemplate(e){return e}renderElement(e,t,i){const n=this.renderedElements.findIndex(s=>s.templateData===i);if(n>=0){const s=this.renderedElements[n];this.trait.unrender(i),s.index=t}else{const s={index:t,templateData:i};this.renderedElements.push(s)}this.trait.renderIndex(t,i)}splice(e,t,i){const n=[];for(const s of this.renderedElements)s.index<e?n.push(s):s.index>=e+t&&n.push({index:s.index+i-t,templateData:s.templateData});this.renderedElements=n}renderIndexes(e){for(const{index:t,templateData:i}of this.renderedElements)e.indexOf(t)>-1&&this.trait.renderIndex(t,i)}disposeTemplate(e){const t=this.renderedElements.findIndex(i=>i.templateData===e);t<0||this.renderedElements.splice(t,1)}}let iM=class{get name(){return this._trait}get renderer(){return new CAe(this)}constructor(e){this._trait=e,this.indexes=[],this.sortedIndexes=[],this._onChange=new Y,this.onChange=this._onChange.event}splice(e,t,i){const n=i.length-t,s=e+t,r=[];let a=0;for(;a<this.sortedIndexes.length&&this.sortedIndexes[a]<e;)r.push(this.sortedIndexes[a++]);for(let l=0;l<i.length;l++)i[l]&&r.push(l+e);for(;a<this.sortedIndexes.length&&this.sortedIndexes[a]>=s;)r.push(this.sortedIndexes[a++]+n);this.renderer.splice(e,t,i.length),this._set(r,r)}renderIndex(e,t){t.classList.toggle(this._trait,this.contains(e))}unrender(e){e.classList.remove(this._trait)}set(e,t){return this._set(e,[...e].sort(PX),t)}_set(e,t,i){const n=this.indexes,s=this.sortedIndexes;this.indexes=e,this.sortedIndexes=t;const r=L8(s,e);return this.renderer.renderIndexes(r),this._onChange.fire({indexes:e,browserEvent:i}),n}get(){return this.indexes}contains(e){return KL(this.sortedIndexes,e,PX)>=0}dispose(){cn(this._onChange)}};Wm([fs],iM.prototype,"renderer",null);class wAe extends iM{constructor(e){super("selected"),this.setAriaSelected=e}renderIndex(e,t){super.renderIndex(e,t),this.setAriaSelected&&(this.contains(e)?t.setAttribute("aria-selected","true"):t.setAttribute("aria-selected","false"))}}class Y3{constructor(e,t,i){this.trait=e,this.view=t,this.identityProvider=i}splice(e,t,i){if(!this.identityProvider)return this.trait.splice(e,t,new Array(i.length).fill(!1));const n=this.trait.get().map(a=>this.identityProvider.getId(this.view.element(a)).toString());if(n.length===0)return this.trait.splice(e,t,new Array(i.length).fill(!1));const s=new Set(n),r=i.map(a=>s.has(this.identityProvider.getId(a).toString()));this.trait.splice(e,t,r)}}function Qp(o){return o.tagName==="INPUT"||o.tagName==="TEXTAREA"}function ok(o,e){return o.classList.contains(e)?!0:o.classList.contains("monaco-list")||!o.parentElement?!1:ok(o.parentElement,e)}function tL(o){return ok(o,"monaco-editor")}function yAe(o){return ok(o,"monaco-custom-toggle")}function SAe(o){return ok(o,"action-item")}function ML(o){return ok(o,"monaco-tree-sticky-row")}function Wx(o){return o.classList.contains("monaco-tree-sticky-container")}function woe(o){return o.tagName==="A"&&o.classList.contains("monaco-button")||o.tagName==="DIV"&&o.classList.contains("monaco-button-dropdown")?!0:o.classList.contains("monaco-list")||!o.parentElement?!1:woe(o.parentElement)}class yoe{get onKeyDown(){return Ie.chain(this.disposables.add(new Xt(this.view.domNode,"keydown")).event,e=>e.filter(t=>!Qp(t.target)).map(t=>new _n(t)))}constructor(e,t,i){this.list=e,this.view=t,this.disposables=new he,this.multipleSelectionDisposables=new he,this.multipleSelectionSupport=i.multipleSelectionSupport,this.disposables.add(this.onKeyDown(n=>{switch(n.keyCode){case 3:return this.onEnter(n);case 16:return this.onUpArrow(n);case 18:return this.onDownArrow(n);case 11:return this.onPageUpArrow(n);case 12:return this.onPageDownArrow(n);case 9:return this.onEscape(n);case 31:this.multipleSelectionSupport&&(Kt?n.metaKey:n.ctrlKey)&&this.onCtrlA(n)}}))}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionSupport=e.multipleSelectionSupport)}onEnter(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(this.list.getFocus(),e.browserEvent)}onUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPrevious(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNext(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPreviousPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNextPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onCtrlA(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(la(this.list.length),e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus()}onEscape(e){this.list.getSelection().length&&(e.preventDefault(),e.stopPropagation(),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus())}dispose(){this.disposables.dispose(),this.multipleSelectionDisposables.dispose()}}Wm([fs],yoe.prototype,"onKeyDown",null);var Ku;(function(o){o[o.Automatic=0]="Automatic",o[o.Trigger=1]="Trigger"})(Ku||(Ku={}));var gC;(function(o){o[o.Idle=0]="Idle",o[o.Typing=1]="Typing"})(gC||(gC={}));const LAe=new class{mightProducePrintableCharacter(o){return o.ctrlKey||o.metaKey||o.altKey?!1:o.keyCode>=31&&o.keyCode<=56||o.keyCode>=21&&o.keyCode<=30||o.keyCode>=98&&o.keyCode<=107||o.keyCode>=85&&o.keyCode<=95}};class xAe{constructor(e,t,i,n,s){this.list=e,this.view=t,this.keyboardNavigationLabelProvider=i,this.keyboardNavigationEventFilter=n,this.delegate=s,this.enabled=!1,this.state=gC.Idle,this.mode=Ku.Automatic,this.triggered=!1,this.previouslyFocused=-1,this.enabledDisposables=new he,this.disposables=new he,this.updateOptions(e.options)}updateOptions(e){var t,i;!((t=e.typeNavigationEnabled)!==null&&t!==void 0)||t?this.enable():this.disable(),this.mode=(i=e.typeNavigationMode)!==null&&i!==void 0?i:Ku.Automatic}enable(){if(this.enabled)return;let e=!1;const t=Ie.chain(this.enabledDisposables.add(new Xt(this.view.domNode,"keydown")).event,s=>s.filter(r=>!Qp(r.target)).filter(()=>this.mode===Ku.Automatic||this.triggered).map(r=>new _n(r)).filter(r=>e||this.keyboardNavigationEventFilter(r)).filter(r=>this.delegate.mightProducePrintableCharacter(r)).forEach(r=>Ut.stop(r,!0)).map(r=>r.browserEvent.key)),i=Ie.debounce(t,()=>null,800,void 0,void 0,void 0,this.enabledDisposables);Ie.reduce(Ie.any(t,i),(s,r)=>r===null?null:(s||"")+r,void 0,this.enabledDisposables)(this.onInput,this,this.enabledDisposables),i(this.onClear,this,this.enabledDisposables),t(()=>e=!0,void 0,this.enabledDisposables),i(()=>e=!1,void 0,this.enabledDisposables),this.enabled=!0,this.triggered=!1}disable(){this.enabled&&(this.enabledDisposables.clear(),this.enabled=!1,this.triggered=!1)}onClear(){var e;const t=this.list.getFocus();if(t.length>0&&t[0]===this.previouslyFocused){const i=(e=this.list.options.accessibilityProvider)===null||e===void 0?void 0:e.getAriaLabel(this.list.element(t[0]));typeof i=="string"?_a(i):i&&_a(i.get())}this.previouslyFocused=-1}onInput(e){if(!e){this.state=gC.Idle,this.triggered=!1;return}const t=this.list.getFocus(),i=t.length>0?t[0]:0,n=this.state===gC.Idle?1:0;this.state=gC.Typing;for(let s=0;s<this.list.length;s++){const r=(i+s+n)%this.list.length,a=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(r)),l=a&&a.toString();if(this.list.options.typeNavigationEnabled){if(typeof l<"u"){if(Nx(e,l)){this.previouslyFocused=i,this.list.setFocus([r]),this.list.reveal(r);return}const c=gRe(e,l);if(c&&c[0].end-c[0].start>1&&c.length===1){this.previouslyFocused=i,this.list.setFocus([r]),this.list.reveal(r);return}}}else if(typeof l>"u"||Nx(e,l)){this.previouslyFocused=i,this.list.setFocus([r]),this.list.reveal(r);return}}}dispose(){this.disable(),this.enabledDisposables.dispose(),this.disposables.dispose()}}class DAe{constructor(e,t){this.list=e,this.view=t,this.disposables=new he;const i=Ie.chain(this.disposables.add(new Xt(t.domNode,"keydown")).event,s=>s.filter(r=>!Qp(r.target)).map(r=>new _n(r)));Ie.chain(i,s=>s.filter(r=>r.keyCode===2&&!r.ctrlKey&&!r.metaKey&&!r.shiftKey&&!r.altKey))(this.onTab,this,this.disposables)}onTab(e){if(e.target!==this.view.domNode)return;const t=this.list.getFocus();if(t.length===0)return;const i=this.view.domElement(t[0]);if(!i)return;const n=i.querySelector("[tabIndex]");if(!n||!(n instanceof HTMLElement)||n.tabIndex===-1)return;const s=ft(n).getComputedStyle(n);s.visibility==="hidden"||s.display==="none"||(e.preventDefault(),e.stopPropagation(),n.focus())}dispose(){this.disposables.dispose()}}function Soe(o){return Kt?o.browserEvent.metaKey:o.browserEvent.ctrlKey}function Loe(o){return o.browserEvent.shiftKey}function kAe(o){return ZV(o)&&o.button===2}const AX={isSelectionSingleChangeEvent:Soe,isSelectionRangeChangeEvent:Loe};class xoe{constructor(e){this.list=e,this.disposables=new he,this._onPointer=new Y,this.onPointer=this._onPointer.event,e.options.multipleSelectionSupport!==!1&&(this.multipleSelectionController=this.list.options.multipleSelectionController||AX),this.mouseSupport=typeof e.options.mouseSupport>"u"||!!e.options.mouseSupport,this.mouseSupport&&(e.onMouseDown(this.onMouseDown,this,this.disposables),e.onContextMenu(this.onContextMenu,this,this.disposables),e.onMouseDblClick(this.onDoubleClick,this,this.disposables),e.onTouchStart(this.onMouseDown,this,this.disposables),this.disposables.add(rn.addTarget(e.getHTMLElement()))),Ie.any(e.onMouseClick,e.onMouseMiddleClick,e.onTap)(this.onViewPointer,this,this.disposables)}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionController=void 0,e.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||AX))}isSelectionSingleChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionSingleChangeEvent(e):!1}isSelectionRangeChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionRangeChangeEvent(e):!1}isSelectionChangeEvent(e){return this.isSelectionSingleChangeEvent(e)||this.isSelectionRangeChangeEvent(e)}onMouseDown(e){tL(e.browserEvent.target)||No()!==e.browserEvent.target&&this.list.domFocus()}onContextMenu(e){if(Qp(e.browserEvent.target)||tL(e.browserEvent.target))return;const t=typeof e.index>"u"?[]:[e.index];this.list.setFocus(t,e.browserEvent)}onViewPointer(e){if(!this.mouseSupport||Qp(e.browserEvent.target)||tL(e.browserEvent.target)||e.browserEvent.isHandledByList)return;e.browserEvent.isHandledByList=!0;const t=e.index;if(typeof t>"u"){this.list.setFocus([],e.browserEvent),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0);return}if(this.isSelectionChangeEvent(e))return this.changeSelection(e);this.list.setFocus([t],e.browserEvent),this.list.setAnchor(t),kAe(e.browserEvent)||this.list.setSelection([t],e.browserEvent),this._onPointer.fire(e)}onDoubleClick(e){if(Qp(e.browserEvent.target)||tL(e.browserEvent.target)||this.isSelectionChangeEvent(e)||e.browserEvent.isHandledByList)return;e.browserEvent.isHandledByList=!0;const t=this.list.getFocus();this.list.setSelection(t,e.browserEvent)}changeSelection(e){const t=e.index;let i=this.list.getAnchor();if(this.isSelectionRangeChangeEvent(e)){if(typeof i>"u"){const u=this.list.getFocus()[0];i=u??t,this.list.setAnchor(i)}const n=Math.min(i,t),s=Math.max(i,t),r=la(n,s+1),a=this.list.getSelection(),l=TAe(L8(a,[i]),i);if(l.length===0)return;const c=L8(r,NAe(a,l));this.list.setSelection(c,e.browserEvent),this.list.setFocus([t],e.browserEvent)}else if(this.isSelectionSingleChangeEvent(e)){const n=this.list.getSelection(),s=n.filter(r=>r!==t);this.list.setFocus([t]),this.list.setAnchor(t),n.length===s.length?this.list.setSelection([...s,t],e.browserEvent):this.list.setSelection(s,e.browserEvent)}}dispose(){this.disposables.dispose()}}class Doe{constructor(e,t){this.styleElement=e,this.selectorSuffix=t}style(e){var t,i;const n=this.selectorSuffix&&`.${this.selectorSuffix}`,s=[];e.listBackground&&s.push(`.monaco-list${n} .monaco-list-rows { background: ${e.listBackground}; }`),e.listFocusBackground&&(s.push(`.monaco-list${n}:focus .monaco-list-row.focused { background-color: ${e.listFocusBackground}; }`),s.push(`.monaco-list${n}:focus .monaco-list-row.focused:hover { background-color: ${e.listFocusBackground}; }`)),e.listFocusForeground&&s.push(`.monaco-list${n}:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),e.listActiveSelectionBackground&&(s.push(`.monaco-list${n}:focus .monaco-list-row.selected { background-color: ${e.listActiveSelectionBackground}; }`),s.push(`.monaco-list${n}:focus .monaco-list-row.selected:hover { background-color: ${e.listActiveSelectionBackground}; }`)),e.listActiveSelectionForeground&&s.push(`.monaco-list${n}:focus .monaco-list-row.selected { color: ${e.listActiveSelectionForeground}; }`),e.listActiveSelectionIconForeground&&s.push(`.monaco-list${n}:focus .monaco-list-row.selected .codicon { color: ${e.listActiveSelectionIconForeground}; }`),e.listFocusAndSelectionBackground&&s.push(`
				.monaco-drag-image,
				.monaco-list${n}:focus .monaco-list-row.selected.focused { background-color: ${e.listFocusAndSelectionBackground}; }
			`),e.listFocusAndSelectionForeground&&s.push(`
				.monaco-drag-image,
				.monaco-list${n}:focus .monaco-list-row.selected.focused { color: ${e.listFocusAndSelectionForeground}; }
			`),e.listInactiveFocusForeground&&(s.push(`.monaco-list${n} .monaco-list-row.focused { color:  ${e.listInactiveFocusForeground}; }`),s.push(`.monaco-list${n} .monaco-list-row.focused:hover { color:  ${e.listInactiveFocusForeground}; }`)),e.listInactiveSelectionIconForeground&&s.push(`.monaco-list${n} .monaco-list-row.focused .codicon { color:  ${e.listInactiveSelectionIconForeground}; }`),e.listInactiveFocusBackground&&(s.push(`.monaco-list${n} .monaco-list-row.focused { background-color:  ${e.listInactiveFocusBackground}; }`),s.push(`.monaco-list${n} .monaco-list-row.focused:hover { background-color:  ${e.listInactiveFocusBackground}; }`)),e.listInactiveSelectionBackground&&(s.push(`.monaco-list${n} .monaco-list-row.selected { background-color:  ${e.listInactiveSelectionBackground}; }`),s.push(`.monaco-list${n} .monaco-list-row.selected:hover { background-color:  ${e.listInactiveSelectionBackground}; }`)),e.listInactiveSelectionForeground&&s.push(`.monaco-list${n} .monaco-list-row.selected { color: ${e.listInactiveSelectionForeground}; }`),e.listHoverBackground&&s.push(`.monaco-list${n}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ${e.listHoverBackground}; }`),e.listHoverForeground&&s.push(`.monaco-list${n}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { color:  ${e.listHoverForeground}; }`);const r=Kf(e.listFocusAndSelectionOutline,Kf(e.listSelectionOutline,(t=e.listFocusOutline)!==null&&t!==void 0?t:""));r&&s.push(`.monaco-list${n}:focus .monaco-list-row.focused.selected { outline: 1px solid ${r}; outline-offset: -1px;}`),e.listFocusOutline&&s.push(`
				.monaco-drag-image,
				.monaco-list${n}:focus .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
				.monaco-workbench.context-menu-visible .monaco-list${n}.last-focused .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
			`);const a=Kf(e.listSelectionOutline,(i=e.listInactiveFocusOutline)!==null&&i!==void 0?i:"");a&&s.push(`.monaco-list${n} .monaco-list-row.focused.selected { outline: 1px dotted ${a}; outline-offset: -1px; }`),e.listSelectionOutline&&s.push(`.monaco-list${n} .monaco-list-row.selected { outline: 1px dotted ${e.listSelectionOutline}; outline-offset: -1px; }`),e.listInactiveFocusOutline&&s.push(`.monaco-list${n} .monaco-list-row.focused { outline: 1px dotted ${e.listInactiveFocusOutline}; outline-offset: -1px; }`),e.listHoverOutline&&s.push(`.monaco-list${n} .monaco-list-row:hover { outline: 1px dashed ${e.listHoverOutline}; outline-offset: -1px; }`),e.listDropOverBackground&&s.push(`
				.monaco-list${n}.drop-target,
				.monaco-list${n} .monaco-list-rows.drop-target,
				.monaco-list${n} .monaco-list-row.drop-target { background-color: ${e.listDropOverBackground} !important; color: inherit !important; }
			`),e.listDropBetweenBackground&&(s.push(`
			.monaco-list${n} .monaco-list-rows.drop-target-before .monaco-list-row:first-child::before,
			.monaco-list${n} .monaco-list-row.drop-target-before::before {
				content: ""; position: absolute; top: 0px; left: 0px; width: 100%; height: 1px;
				background-color: ${e.listDropBetweenBackground};
			}`),s.push(`
			.monaco-list${n} .monaco-list-rows.drop-target-after .monaco-list-row:last-child::after,
			.monaco-list${n} .monaco-list-row.drop-target-after::after {
				content: ""; position: absolute; bottom: 0px; left: 0px; width: 100%; height: 1px;
				background-color: ${e.listDropBetweenBackground};
			}`)),e.tableColumnsBorder&&s.push(`
				.monaco-table > .monaco-split-view2,
				.monaco-table > .monaco-split-view2 .monaco-sash.vertical::before,
				.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2,
				.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: ${e.tableColumnsBorder};
				}

				.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2,
				.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: transparent;
				}
			`),e.tableOddRowsBackgroundColor&&s.push(`
				.monaco-table .monaco-list-row[data-parity=odd]:not(.focused):not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(:focus) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(.focused) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr {
					background-color: ${e.tableOddRowsBackgroundColor};
				}
			`),this.styleElement.textContent=s.join(`
`)}}const EAe={listFocusBackground:"#7FB0D0",listActiveSelectionBackground:"#0E639C",listActiveSelectionForeground:"#FFFFFF",listActiveSelectionIconForeground:"#FFFFFF",listFocusAndSelectionOutline:"#90C2F9",listFocusAndSelectionBackground:"#094771",listFocusAndSelectionForeground:"#FFFFFF",listInactiveSelectionBackground:"#3F3F46",listInactiveSelectionIconForeground:"#FFFFFF",listHoverBackground:"#2A2D2E",listDropOverBackground:"#383B3D",listDropBetweenBackground:"#EEEEEE",treeIndentGuidesStroke:"#a9a9a9",treeInactiveIndentGuidesStroke:ne.fromHex("#a9a9a9").transparent(.4).toString(),tableColumnsBorder:ne.fromHex("#cccccc").transparent(.2).toString(),tableOddRowsBackgroundColor:ne.fromHex("#cccccc").transparent(.04).toString(),listBackground:void 0,listFocusForeground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusForeground:void 0,listInactiveFocusBackground:void 0,listHoverForeground:void 0,listFocusOutline:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listHoverOutline:void 0},IAe={keyboardSupport:!0,mouseSupport:!0,multipleSelectionSupport:!0,dnd:{getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){},dispose(){}}};function TAe(o,e){const t=o.indexOf(e);if(t===-1)return[];const i=[];let n=t-1;for(;n>=0&&o[n]===e-(t-n);)i.push(o[n--]);for(i.reverse(),n=t;n<o.length&&o[n]===e+(n-t);)i.push(o[n++]);return i}function L8(o,e){const t=[];let i=0,n=0;for(;i<o.length||n<e.length;)if(i>=o.length)t.push(e[n++]);else if(n>=e.length)t.push(o[i++]);else if(o[i]===e[n]){t.push(o[i]),i++,n++;continue}else o[i]<e[n]?t.push(o[i++]):t.push(e[n++]);return t}function NAe(o,e){const t=[];let i=0,n=0;for(;i<o.length||n<e.length;)if(i>=o.length)t.push(e[n++]);else if(n>=e.length)t.push(o[i++]);else if(o[i]===e[n]){i++,n++;continue}else o[i]<e[n]?t.push(o[i++]):n++;return t}const PX=(o,e)=>o-e;class RAe{constructor(e,t){this._templateId=e,this.renderers=t}get templateId(){return this._templateId}renderTemplate(e){return this.renderers.map(t=>t.renderTemplate(e))}renderElement(e,t,i,n){let s=0;for(const r of this.renderers)r.renderElement(e,t,i[s++],n)}disposeElement(e,t,i,n){var s;let r=0;for(const a of this.renderers)(s=a.disposeElement)===null||s===void 0||s.call(a,e,t,i[r],n),r+=1}disposeTemplate(e){let t=0;for(const i of this.renderers)i.disposeTemplate(e[t++])}}class MAe{constructor(e){this.accessibilityProvider=e,this.templateId="a18n"}renderTemplate(e){return{container:e,disposables:new he}}renderElement(e,t,i){const n=this.accessibilityProvider.getAriaLabel(e),s=n&&typeof n!="string"?n:Ad(n);i.disposables.add(zt(a=>{this.setAriaLabel(a.readObservable(s),i.container)}));const r=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(e);typeof r=="number"?i.container.setAttribute("aria-level",`${r}`):i.container.removeAttribute("aria-level")}setAriaLabel(e,t){e?t.setAttribute("aria-label",e):t.removeAttribute("aria-label")}disposeElement(e,t,i,n){i.disposables.clear()}disposeTemplate(e){e.disposables.dispose()}}class AAe{constructor(e,t){this.list=e,this.dnd=t}getDragElements(e){const t=this.list.getSelectedElements();return t.indexOf(e)>-1?t:[e]}getDragURI(e){return this.dnd.getDragURI(e)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e,t)}onDragStart(e,t){var i,n;(n=(i=this.dnd).onDragStart)===null||n===void 0||n.call(i,e,t)}onDragOver(e,t,i,n,s){return this.dnd.onDragOver(e,t,i,n,s)}onDragLeave(e,t,i,n){var s,r;(r=(s=this.dnd).onDragLeave)===null||r===void 0||r.call(s,e,t,i,n)}onDragEnd(e){var t,i;(i=(t=this.dnd).onDragEnd)===null||i===void 0||i.call(t,e)}drop(e,t,i,n,s){this.dnd.drop(e,t,i,n,s)}dispose(){this.dnd.dispose()}}class Ml{get onDidChangeFocus(){return Ie.map(this.eventBufferer.wrapEvent(this.focus.onChange),e=>this.toListEvent(e),this.disposables)}get onDidChangeSelection(){return Ie.map(this.eventBufferer.wrapEvent(this.selection.onChange),e=>this.toListEvent(e),this.disposables)}get domId(){return this.view.domId}get onDidScroll(){return this.view.onDidScroll}get onMouseClick(){return this.view.onMouseClick}get onMouseDblClick(){return this.view.onMouseDblClick}get onMouseMiddleClick(){return this.view.onMouseMiddleClick}get onPointer(){return this.mouseController.onPointer}get onMouseDown(){return this.view.onMouseDown}get onMouseOver(){return this.view.onMouseOver}get onMouseOut(){return this.view.onMouseOut}get onTouchStart(){return this.view.onTouchStart}get onTap(){return this.view.onTap}get onContextMenu(){let e=!1;const t=Ie.chain(this.disposables.add(new Xt(this.view.domNode,"keydown")).event,s=>s.map(r=>new _n(r)).filter(r=>e=r.keyCode===58||r.shiftKey&&r.keyCode===68).map(r=>Ut.stop(r,!0)).filter(()=>!1)),i=Ie.chain(this.disposables.add(new Xt(this.view.domNode,"keyup")).event,s=>s.forEach(()=>e=!1).map(r=>new _n(r)).filter(r=>r.keyCode===58||r.shiftKey&&r.keyCode===68).map(r=>Ut.stop(r,!0)).map(({browserEvent:r})=>{const a=this.getFocus(),l=a.length?a[0]:void 0,c=typeof l<"u"?this.view.element(l):void 0,u=typeof l<"u"?this.view.domElement(l):this.view.domNode;return{index:l,element:c,anchor:u,browserEvent:r}})),n=Ie.chain(this.view.onContextMenu,s=>s.filter(r=>!e).map(({element:r,index:a,browserEvent:l})=>({element:r,index:a,anchor:new Wc(ft(this.view.domNode),l),browserEvent:l})));return Ie.any(t,i,n)}get onKeyDown(){return this.disposables.add(new Xt(this.view.domNode,"keydown")).event}get onDidFocus(){return Ie.signal(this.disposables.add(new Xt(this.view.domNode,"focus",!0)).event)}get onDidBlur(){return Ie.signal(this.disposables.add(new Xt(this.view.domNode,"blur",!0)).event)}constructor(e,t,i,n,s=IAe){var r,a,l,c;this.user=e,this._options=s,this.focus=new iM("focused"),this.anchor=new iM("anchor"),this.eventBufferer=new RV,this._ariaLabel="",this.disposables=new he,this._onDidDispose=new Y,this.onDidDispose=this._onDidDispose.event;const u=this._options.accessibilityProvider&&this._options.accessibilityProvider.getWidgetRole?(r=this._options.accessibilityProvider)===null||r===void 0?void 0:r.getWidgetRole():"list";this.selection=new wAe(u!=="listbox");const f=[this.focus.renderer,this.selection.renderer];this.accessibilityProvider=s.accessibilityProvider,this.accessibilityProvider&&(f.push(new MAe(this.accessibilityProvider)),(l=(a=this.accessibilityProvider).onDidChangeActiveDescendant)===null||l===void 0||l.call(a,this.onDidChangeActiveDescendant,this,this.disposables)),n=n.map(p=>new RAe(p.templateId,[...f,p]));const g={...s,dnd:s.dnd&&new AAe(this,s.dnd)};if(this.view=this.createListView(t,i,n,g),this.view.domNode.setAttribute("role",u),s.styleController)this.styleController=s.styleController(this.view.domId);else{const p=xl(this.view.domNode);this.styleController=new Doe(p,this.view.domId)}if(this.spliceable=new GMe([new Y3(this.focus,this.view,s.identityProvider),new Y3(this.selection,this.view,s.identityProvider),new Y3(this.anchor,this.view,s.identityProvider),this.view]),this.disposables.add(this.focus),this.disposables.add(this.selection),this.disposables.add(this.anchor),this.disposables.add(this.view),this.disposables.add(this._onDidDispose),this.disposables.add(new DAe(this,this.view)),(typeof s.keyboardSupport!="boolean"||s.keyboardSupport)&&(this.keyboardController=new yoe(this,this.view,s),this.disposables.add(this.keyboardController)),s.keyboardNavigationLabelProvider){const p=s.keyboardNavigationDelegate||LAe;this.typeNavigationController=new xAe(this,this.view,s.keyboardNavigationLabelProvider,(c=s.keyboardNavigationEventFilter)!==null&&c!==void 0?c:()=>!0,p),this.disposables.add(this.typeNavigationController)}this.mouseController=this.createMouseController(s),this.disposables.add(this.mouseController),this.onDidChangeFocus(this._onFocusChange,this,this.disposables),this.onDidChangeSelection(this._onSelectionChange,this,this.disposables),this.accessibilityProvider&&(this.ariaLabel=this.accessibilityProvider.getWidgetAriaLabel()),this._options.multipleSelectionSupport!==!1&&this.view.domNode.setAttribute("aria-multiselectable","true")}createListView(e,t,i,n){return new bc(e,t,i,n)}createMouseController(e){return new xoe(this)}updateOptions(e={}){var t,i;this._options={...this._options,...e},(t=this.typeNavigationController)===null||t===void 0||t.updateOptions(this._options),this._options.multipleSelectionController!==void 0&&(this._options.multipleSelectionSupport?this.view.domNode.setAttribute("aria-multiselectable","true"):this.view.domNode.removeAttribute("aria-multiselectable")),this.mouseController.updateOptions(e),(i=this.keyboardController)===null||i===void 0||i.updateOptions(e),this.view.updateOptions(e)}get options(){return this._options}splice(e,t,i=[]){if(e<0||e>this.view.length)throw new R_(this.user,`Invalid start index: ${e}`);if(t<0)throw new R_(this.user,`Invalid delete count: ${t}`);t===0&&i.length===0||this.eventBufferer.bufferEvents(()=>this.spliceable.splice(e,t,i))}rerender(){this.view.rerender()}element(e){return this.view.element(e)}indexOf(e){return this.view.indexOf(e)}indexAt(e){return this.view.indexAt(e)}get length(){return this.view.length}get contentHeight(){return this.view.contentHeight}get onDidChangeContentHeight(){return this.view.onDidChangeContentHeight}get scrollTop(){return this.view.getScrollTop()}set scrollTop(e){this.view.setScrollTop(e)}get scrollHeight(){return this.view.scrollHeight}get renderHeight(){return this.view.renderHeight}get firstVisibleIndex(){return this.view.firstVisibleIndex}get ariaLabel(){return this._ariaLabel}set ariaLabel(e){this._ariaLabel=e,this.view.domNode.setAttribute("aria-label",e)}domFocus(){this.view.domNode.focus({preventScroll:!0})}layout(e,t){this.view.layout(e,t)}setSelection(e,t){for(const i of e)if(i<0||i>=this.length)throw new R_(this.user,`Invalid index ${i}`);this.selection.set(e,t)}getSelection(){return this.selection.get()}getSelectedElements(){return this.getSelection().map(e=>this.view.element(e))}setAnchor(e){if(typeof e>"u"){this.anchor.set([]);return}if(e<0||e>=this.length)throw new R_(this.user,`Invalid index ${e}`);this.anchor.set([e])}getAnchor(){return wV(this.anchor.get(),void 0)}getAnchorElement(){const e=this.getAnchor();return typeof e>"u"?void 0:this.element(e)}setFocus(e,t){for(const i of e)if(i<0||i>=this.length)throw new R_(this.user,`Invalid index ${i}`);this.focus.set(e,t)}focusNext(e=1,t=!1,i,n){if(this.length===0)return;const s=this.focus.get(),r=this.findNextIndex(s.length>0?s[0]+e:0,t,n);r>-1&&this.setFocus([r],i)}focusPrevious(e=1,t=!1,i,n){if(this.length===0)return;const s=this.focus.get(),r=this.findPreviousIndex(s.length>0?s[0]-e:0,t,n);r>-1&&this.setFocus([r],i)}async focusNextPage(e,t){let i=this.view.indexAt(this.view.getScrollTop()+this.view.renderHeight);i=i===0?0:i-1;const n=this.getFocus()[0];if(n!==i&&(n===void 0||i>n)){const s=this.findPreviousIndex(i,!1,t);s>-1&&n!==s?this.setFocus([s],e):this.setFocus([i],e)}else{const s=this.view.getScrollTop();let r=s+this.view.renderHeight;i>n&&(r-=this.view.elementHeight(i)),this.view.setScrollTop(r),this.view.getScrollTop()!==s&&(this.setFocus([]),await cm(0),await this.focusNextPage(e,t))}}async focusPreviousPage(e,t,i=()=>0){let n;const s=i(),r=this.view.getScrollTop()+s;r===0?n=this.view.indexAt(r):n=this.view.indexAfter(r-1);const a=this.getFocus()[0];if(a!==n&&(a===void 0||a>=n)){const l=this.findNextIndex(n,!1,t);l>-1&&a!==l?this.setFocus([l],e):this.setFocus([n],e)}else{const l=r;this.view.setScrollTop(r-this.view.renderHeight-s),this.view.getScrollTop()+i()!==l&&(this.setFocus([]),await cm(0),await this.focusPreviousPage(e,t,i))}}focusLast(e,t){if(this.length===0)return;const i=this.findPreviousIndex(this.length-1,!1,t);i>-1&&this.setFocus([i],e)}focusFirst(e,t){this.focusNth(0,e,t)}focusNth(e,t,i){if(this.length===0)return;const n=this.findNextIndex(e,!1,i);n>-1&&this.setFocus([n],t)}findNextIndex(e,t=!1,i){for(let n=0;n<this.length;n++){if(e>=this.length&&!t)return-1;if(e=e%this.length,!i||i(this.element(e)))return e;e++}return-1}findPreviousIndex(e,t=!1,i){for(let n=0;n<this.length;n++){if(e<0&&!t)return-1;if(e=(this.length+e%this.length)%this.length,!i||i(this.element(e)))return e;e--}return-1}getFocus(){return this.focus.get()}getFocusedElements(){return this.getFocus().map(e=>this.view.element(e))}reveal(e,t,i=0){if(e<0||e>=this.length)throw new R_(this.user,`Invalid index ${e}`);const n=this.view.getScrollTop(),s=this.view.elementTop(e),r=this.view.elementHeight(e);if(om(t)){const a=r-this.view.renderHeight+i;this.view.setScrollTop(a*Tr(t,0,1)+s-i)}else{const a=s+r,l=n+this.view.renderHeight;s<n+i&&a>=l||(s<n+i||a>=l&&r>=this.view.renderHeight?this.view.setScrollTop(s-i):a>=l&&this.view.setScrollTop(a-this.view.renderHeight))}}getRelativeTop(e,t=0){if(e<0||e>=this.length)throw new R_(this.user,`Invalid index ${e}`);const i=this.view.getScrollTop(),n=this.view.elementTop(e),s=this.view.elementHeight(e);if(n<i+t||n+s>i+this.view.renderHeight)return null;const r=s-this.view.renderHeight+t;return Math.abs((i+t-n)/r)}getHTMLElement(){return this.view.domNode}getScrollableElement(){return this.view.scrollableElementDomNode}getElementID(e){return this.view.getElementDomId(e)}getElementTop(e){return this.view.elementTop(e)}style(e){this.styleController.style(e)}toListEvent({indexes:e,browserEvent:t}){return{indexes:e,elements:e.map(i=>this.view.element(i)),browserEvent:t}}_onFocusChange(){const e=this.focus.get();this.view.domNode.classList.toggle("element-focused",e.length>0),this.onDidChangeActiveDescendant()}onDidChangeActiveDescendant(){var e;const t=this.focus.get();if(t.length>0){let i;!((e=this.accessibilityProvider)===null||e===void 0)&&e.getActiveDescendantId&&(i=this.accessibilityProvider.getActiveDescendantId(this.view.element(t[0]))),this.view.domNode.setAttribute("aria-activedescendant",i||this.view.getElementDomId(t[0]))}else this.view.domNode.removeAttribute("aria-activedescendant")}_onSelectionChange(){const e=this.selection.get();this.view.domNode.classList.toggle("selection-none",e.length===0),this.view.domNode.classList.toggle("selection-single",e.length===1),this.view.domNode.classList.toggle("selection-multiple",e.length>1)}dispose(){this._onDidDispose.fire(),this.disposables.dispose(),this._onDidDispose.dispose()}}Wm([fs],Ml.prototype,"onDidChangeFocus",null);Wm([fs],Ml.prototype,"onDidChangeSelection",null);Wm([fs],Ml.prototype,"onContextMenu",null);Wm([fs],Ml.prototype,"onKeyDown",null);Wm([fs],Ml.prototype,"onDidFocus",null);Wm([fs],Ml.prototype,"onDidBlur",null);const av=ye,koe="selectOption.entry.template";class PAe{get templateId(){return koe}renderTemplate(e){const t=Object.create(null);return t.root=e,t.text=ge(e,av(".option-text")),t.detail=ge(e,av(".option-detail")),t.decoratorRight=ge(e,av(".option-decorator-right")),t}renderElement(e,t,i){const n=i,s=e.text,r=e.detail,a=e.decoratorRight,l=e.isDisabled;n.text.textContent=s,n.detail.textContent=r||"",n.decoratorRight.innerText=a||"",l?n.root.classList.add("option-disabled"):n.root.classList.remove("option-disabled")}disposeTemplate(e){}}class qu extends J{constructor(e,t,i,n,s){super(),this.options=[],this._currentSelection=0,this._hasDetails=!1,this._skipLayout=!1,this._sticky=!1,this._isVisible=!1,this.styles=n,this.selectBoxOptions=s||Object.create(null),typeof this.selectBoxOptions.minBottomMargin!="number"?this.selectBoxOptions.minBottomMargin=qu.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN:this.selectBoxOptions.minBottomMargin<0&&(this.selectBoxOptions.minBottomMargin=0),this.selectElement=document.createElement("select"),this.selectElement.className="monaco-select-box monaco-select-box-dropdown-padding",typeof this.selectBoxOptions.ariaLabel=="string"&&this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel),typeof this.selectBoxOptions.ariaDescription=="string"&&this.selectElement.setAttribute("aria-description",this.selectBoxOptions.ariaDescription),this._onDidSelect=new Y,this._register(this._onDidSelect),this.registerListeners(),this.constructSelectDropDown(i),this.selected=t||0,e&&this.setOptions(e,t),this.initStyleSheet()}setTitle(e){!this._hover&&e?this._hover=this._register(Zc(ya("mouse"),this.selectElement,e)):this._hover&&this._hover.update(e)}getHeight(){return 22}getTemplateId(){return koe}constructSelectDropDown(e){this.contextViewProvider=e,this.selectDropDownContainer=ye(".monaco-select-box-dropdown-container"),this.selectDropDownContainer.classList.add("monaco-select-box-dropdown-padding"),this.selectionDetailsPane=ge(this.selectDropDownContainer,av(".select-box-details-pane"));const t=ge(this.selectDropDownContainer,av(".select-box-dropdown-container-width-control")),i=ge(t,av(".width-control-div"));this.widthControlElement=document.createElement("span"),this.widthControlElement.className="option-text-width-control",ge(i,this.widthControlElement),this._dropDownPosition=0,this.styleElement=xl(this.selectDropDownContainer),this.selectDropDownContainer.setAttribute("draggable","true"),this._register(oe(this.selectDropDownContainer,ke.DRAG_START,n=>{Ut.stop(n,!0)}))}registerListeners(){this._register(ss(this.selectElement,"change",t=>{this.selected=t.target.selectedIndex,this._onDidSelect.fire({index:t.target.selectedIndex,selected:t.target.value}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)})),this._register(oe(this.selectElement,ke.CLICK,t=>{Ut.stop(t),this._isVisible?this.hideSelectDropDown(!0):this.showSelectDropDown()})),this._register(oe(this.selectElement,ke.MOUSE_DOWN,t=>{Ut.stop(t)}));let e;this._register(oe(this.selectElement,"touchstart",t=>{e=this._isVisible})),this._register(oe(this.selectElement,"touchend",t=>{Ut.stop(t),e?this.hideSelectDropDown(!0):this.showSelectDropDown()})),this._register(oe(this.selectElement,ke.KEY_DOWN,t=>{const i=new _n(t);let n=!1;Kt?(i.keyCode===18||i.keyCode===16||i.keyCode===10||i.keyCode===3)&&(n=!0):(i.keyCode===18&&i.altKey||i.keyCode===16&&i.altKey||i.keyCode===10||i.keyCode===3)&&(n=!0),n&&(this.showSelectDropDown(),Ut.stop(t,!0))}))}get onDidSelect(){return this._onDidSelect.event}setOptions(e,t){zn(this.options,e)||(this.options=e,this.selectElement.options.length=0,this._hasDetails=!1,this._cachedMaxDetailsHeight=void 0,this.options.forEach((i,n)=>{this.selectElement.add(this.createOption(i.text,n,i.isDisabled)),typeof i.description=="string"&&(this._hasDetails=!0)})),t!==void 0&&(this.select(t),this._currentSelection=this.selected)}setOptionsList(){var e;(e=this.selectList)===null||e===void 0||e.splice(0,this.selectList.length,this.options)}select(e){e>=0&&e<this.options.length?this.selected=e:e>this.options.length-1?this.select(this.options.length-1):this.selected<0&&(this.selected=0),this.selectElement.selectedIndex=this.selected,this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)}focus(){this.selectElement&&(this.selectElement.tabIndex=0,this.selectElement.focus())}blur(){this.selectElement&&(this.selectElement.tabIndex=-1,this.selectElement.blur())}setFocusable(e){this.selectElement.tabIndex=e?0:-1}render(e){this.container=e,e.classList.add("select-container"),e.appendChild(this.selectElement),this.styleSelectElement()}initStyleSheet(){const e=[];this.styles.listFocusBackground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { background-color: ${this.styles.listFocusBackground} !important; }`),this.styles.listFocusForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { color: ${this.styles.listFocusForeground} !important; }`),this.styles.decoratorRightForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.focused) .option-decorator-right { color: ${this.styles.decoratorRightForeground}; }`),this.styles.selectBackground&&this.styles.selectBorder&&this.styles.selectBorder!==this.styles.selectBackground?(e.push(`.monaco-select-box-dropdown-container { border: 1px solid ${this.styles.selectBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectBorder} } `)):this.styles.selectListBorder&&(e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectListBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectListBorder} } `)),this.styles.listHoverForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { color: ${this.styles.listHoverForeground} !important; }`),this.styles.listHoverBackground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { background-color: ${this.styles.listHoverBackground} !important; }`),this.styles.listFocusOutline&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { outline: 1.6px dotted ${this.styles.listFocusOutline} !important; outline-offset: -1.6px !important; }`),this.styles.listHoverOutline&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { outline: 1.6px dashed ${this.styles.listHoverOutline} !important; outline-offset: -1.6px !important; }`),e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled.focused { background-color: transparent !important; color: inherit !important; outline: none !important; }"),e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled:hover { background-color: transparent !important; color: inherit !important; outline: none !important; }"),this.styleElement.textContent=e.join(`
`)}styleSelectElement(){var e,t,i;const n=(e=this.styles.selectBackground)!==null&&e!==void 0?e:"",s=(t=this.styles.selectForeground)!==null&&t!==void 0?t:"",r=(i=this.styles.selectBorder)!==null&&i!==void 0?i:"";this.selectElement.style.backgroundColor=n,this.selectElement.style.color=s,this.selectElement.style.borderColor=r}styleList(){var e,t;const i=(e=this.styles.selectBackground)!==null&&e!==void 0?e:"",n=Kf(this.styles.selectListBackground,i);this.selectDropDownListContainer.style.backgroundColor=n,this.selectionDetailsPane.style.backgroundColor=n;const s=(t=this.styles.focusBorder)!==null&&t!==void 0?t:"";this.selectDropDownContainer.style.outlineColor=s,this.selectDropDownContainer.style.outlineOffset="-1px",this.selectList.style(this.styles)}createOption(e,t,i){const n=document.createElement("option");return n.value=e,n.text=e,n.disabled=!!i,n}showSelectDropDown(){this.selectionDetailsPane.innerText="",!(!this.contextViewProvider||this._isVisible)&&(this.createSelectList(this.selectDropDownContainer),this.setOptionsList(),this.contextViewProvider.showContextView({getAnchor:()=>this.selectElement,render:e=>this.renderSelectDropDown(e,!0),layout:()=>{this.layoutSelectDropDown()},onHide:()=>{this.selectDropDownContainer.classList.remove("visible"),this.selectElement.classList.remove("synthetic-focus")},anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._isVisible=!0,this.hideSelectDropDown(!1),this.contextViewProvider.showContextView({getAnchor:()=>this.selectElement,render:e=>this.renderSelectDropDown(e),layout:()=>this.layoutSelectDropDown(),onHide:()=>{this.selectDropDownContainer.classList.remove("visible"),this.selectElement.classList.remove("synthetic-focus")},anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._currentSelection=this.selected,this._isVisible=!0,this.selectElement.setAttribute("aria-expanded","true"))}hideSelectDropDown(e){!this.contextViewProvider||!this._isVisible||(this._isVisible=!1,this.selectElement.setAttribute("aria-expanded","false"),e&&this.selectElement.focus(),this.contextViewProvider.hideContextView())}renderSelectDropDown(e,t){return e.appendChild(this.selectDropDownContainer),this.layoutSelectDropDown(t),{dispose:()=>{try{e.removeChild(this.selectDropDownContainer)}catch{}}}}measureMaxDetailsHeight(){let e=0;return this.options.forEach((t,i)=>{this.updateDetail(i),this.selectionDetailsPane.offsetHeight>e&&(e=this.selectionDetailsPane.offsetHeight)}),e}layoutSelectDropDown(e){if(this._skipLayout)return!1;if(this.selectList){this.selectDropDownContainer.classList.add("visible");const t=ft(this.selectElement),i=ws(this.selectElement),n=ft(this.selectElement).getComputedStyle(this.selectElement),s=parseFloat(n.getPropertyValue("--dropdown-padding-top"))+parseFloat(n.getPropertyValue("--dropdown-padding-bottom")),r=t.innerHeight-i.top-i.height-(this.selectBoxOptions.minBottomMargin||0),a=i.top-qu.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN,l=this.selectElement.offsetWidth,c=this.setWidthControlElement(this.widthControlElement),u=Math.max(c,Math.round(l)).toString()+"px";this.selectDropDownContainer.style.width=u,this.selectList.getHTMLElement().style.height="",this.selectList.layout();let f=this.selectList.contentHeight;this._hasDetails&&this._cachedMaxDetailsHeight===void 0&&(this._cachedMaxDetailsHeight=this.measureMaxDetailsHeight());const g=this._hasDetails?this._cachedMaxDetailsHeight:0,p=f+s+g,_=Math.floor((r-s-g)/this.getHeight()),b=Math.floor((a-s-g)/this.getHeight());if(e)return i.top+i.height>t.innerHeight-22||i.top<qu.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||_<1&&b<1?!1:(_<qu.DEFAULT_MINIMUM_VISIBLE_OPTIONS&&b>_&&this.options.length>_?(this._dropDownPosition=1,this.selectDropDownContainer.removeChild(this.selectDropDownListContainer),this.selectDropDownContainer.removeChild(this.selectionDetailsPane),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectionDetailsPane.classList.remove("border-top"),this.selectionDetailsPane.classList.add("border-bottom")):(this._dropDownPosition=0,this.selectDropDownContainer.removeChild(this.selectDropDownListContainer),this.selectDropDownContainer.removeChild(this.selectionDetailsPane),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectionDetailsPane.classList.remove("border-bottom"),this.selectionDetailsPane.classList.add("border-top")),!0);if(i.top+i.height>t.innerHeight-22||i.top<qu.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||this._dropDownPosition===0&&_<1||this._dropDownPosition===1&&b<1)return this.hideSelectDropDown(!0),!1;if(this._dropDownPosition===0){if(this._isVisible&&_+b<1)return this.hideSelectDropDown(!0),!1;p>r&&(f=_*this.getHeight())}else p>a&&(f=b*this.getHeight());return this.selectList.layout(f),this.selectList.domFocus(),this.selectList.length>0&&(this.selectList.setFocus([this.selected||0]),this.selectList.reveal(this.selectList.getFocus()[0]||0)),this._hasDetails?(this.selectList.getHTMLElement().style.height=f+s+"px",this.selectDropDownContainer.style.height=""):this.selectDropDownContainer.style.height=f+s+"px",this.updateDetail(this.selected),this.selectDropDownContainer.style.width=u,this.selectDropDownListContainer.setAttribute("tabindex","0"),this.selectElement.classList.add("synthetic-focus"),this.selectDropDownContainer.classList.add("synthetic-focus"),!0}else return!1}setWidthControlElement(e){let t=0;if(e){let i=0,n=0;this.options.forEach((s,r)=>{const a=s.detail?s.detail.length:0,l=s.decoratorRight?s.decoratorRight.length:0,c=s.text.length+a+l;c>n&&(i=r,n=c)}),e.textContent=this.options[i].text+(this.options[i].decoratorRight?this.options[i].decoratorRight+" ":""),t=Ir(e)}return t}createSelectList(e){if(this.selectList)return;this.selectDropDownListContainer=ge(e,av(".select-box-dropdown-list-container")),this.listRenderer=new PAe,this.selectList=new Ml("SelectBoxCustom",this.selectDropDownListContainer,this,[this.listRenderer],{useShadows:!1,verticalScrollMode:3,keyboardSupport:!1,mouseSupport:!1,accessibilityProvider:{getAriaLabel:n=>{let s=n.text;return n.detail&&(s+=`. ${n.detail}`),n.decoratorRight&&(s+=`. ${n.decoratorRight}`),n.description&&(s+=`. ${n.description}`),s},getWidgetAriaLabel:()=>v({key:"selectBox",comment:["Behave like native select dropdown element."]},"Select Box"),getRole:()=>Kt?"":"option",getWidgetRole:()=>"listbox"}}),this.selectBoxOptions.ariaLabel&&(this.selectList.ariaLabel=this.selectBoxOptions.ariaLabel);const t=this._register(new Xt(this.selectDropDownListContainer,"keydown")),i=Ie.chain(t.event,n=>n.filter(()=>this.selectList.length>0).map(s=>new _n(s)));this._register(Ie.chain(i,n=>n.filter(s=>s.keyCode===3))(this.onEnter,this)),this._register(Ie.chain(i,n=>n.filter(s=>s.keyCode===2))(this.onEnter,this)),this._register(Ie.chain(i,n=>n.filter(s=>s.keyCode===9))(this.onEscape,this)),this._register(Ie.chain(i,n=>n.filter(s=>s.keyCode===16))(this.onUpArrow,this)),this._register(Ie.chain(i,n=>n.filter(s=>s.keyCode===18))(this.onDownArrow,this)),this._register(Ie.chain(i,n=>n.filter(s=>s.keyCode===12))(this.onPageDown,this)),this._register(Ie.chain(i,n=>n.filter(s=>s.keyCode===11))(this.onPageUp,this)),this._register(Ie.chain(i,n=>n.filter(s=>s.keyCode===14))(this.onHome,this)),this._register(Ie.chain(i,n=>n.filter(s=>s.keyCode===13))(this.onEnd,this)),this._register(Ie.chain(i,n=>n.filter(s=>s.keyCode>=21&&s.keyCode<=56||s.keyCode>=85&&s.keyCode<=113))(this.onCharacter,this)),this._register(oe(this.selectList.getHTMLElement(),ke.POINTER_UP,n=>this.onPointerUp(n))),this._register(this.selectList.onMouseOver(n=>typeof n.index<"u"&&this.selectList.setFocus([n.index]))),this._register(this.selectList.onDidChangeFocus(n=>this.onListFocus(n))),this._register(oe(this.selectDropDownContainer,ke.FOCUS_OUT,n=>{!this._isVisible||ao(n.relatedTarget,this.selectDropDownContainer)||this.onListBlur()})),this.selectList.getHTMLElement().setAttribute("aria-label",this.selectBoxOptions.ariaLabel||""),this.selectList.getHTMLElement().setAttribute("aria-expanded","true"),this.styleList()}onPointerUp(e){if(!this.selectList.length)return;Ut.stop(e);const t=e.target;if(!t||t.classList.contains("slider"))return;const i=t.closest(".monaco-list-row");if(!i)return;const n=Number(i.getAttribute("data-index")),s=i.classList.contains("option-disabled");n>=0&&n<this.options.length&&!s&&(this.selected=n,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0]),this.selected!==this._currentSelection&&(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)),this.hideSelectDropDown(!0))}onListBlur(){this._sticky||(this.selected!==this._currentSelection&&this.select(this._currentSelection),this.hideSelectDropDown(!1))}renderDescriptionMarkdown(e,t){const i=s=>{for(let r=0;r<s.childNodes.length;r++){const a=s.childNodes.item(r);(a.tagName&&a.tagName.toLowerCase())==="img"?s.removeChild(a):i(a)}},n=tP({value:e,supportThemeIcons:!0},{actionHandler:t});return n.element.classList.add("select-box-description-markdown"),i(n.element),n.element}onListFocus(e){!this._isVisible||!this._hasDetails||this.updateDetail(e.indexes[0])}updateDetail(e){var t,i;this.selectionDetailsPane.innerText="";const n=this.options[e],s=(t=n==null?void 0:n.description)!==null&&t!==void 0?t:"",r=(i=n==null?void 0:n.descriptionIsMarkdown)!==null&&i!==void 0?i:!1;if(s){if(r){const a=n.descriptionMarkdownActionHandler;this.selectionDetailsPane.appendChild(this.renderDescriptionMarkdown(s,a))}else this.selectionDetailsPane.innerText=s;this.selectionDetailsPane.style.display="block"}else this.selectionDetailsPane.style.display="none";this._skipLayout=!0,this.contextViewProvider.layout(),this._skipLayout=!1}onEscape(e){Ut.stop(e),this.select(this._currentSelection),this.hideSelectDropDown(!0)}onEnter(e){Ut.stop(e),this.selected!==this._currentSelection&&(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)),this.hideSelectDropDown(!0)}onDownArrow(e){if(this.selected<this.options.length-1){Ut.stop(e,!0);const t=this.options[this.selected+1].isDisabled;if(t&&this.options.length>this.selected+2)this.selected+=2;else{if(t)return;this.selected++}this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0])}}onUpArrow(e){this.selected>0&&(Ut.stop(e,!0),this.options[this.selected-1].isDisabled&&this.selected>1?this.selected-=2:this.selected--,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0]))}onPageUp(e){Ut.stop(e),this.selectList.focusPreviousPage(),setTimeout(()=>{this.selected=this.selectList.getFocus()[0],this.options[this.selected].isDisabled&&this.selected<this.options.length-1&&(this.selected++,this.selectList.setFocus([this.selected])),this.selectList.reveal(this.selected),this.select(this.selected)},1)}onPageDown(e){Ut.stop(e),this.selectList.focusNextPage(),setTimeout(()=>{this.selected=this.selectList.getFocus()[0],this.options[this.selected].isDisabled&&this.selected>0&&(this.selected--,this.selectList.setFocus([this.selected])),this.selectList.reveal(this.selected),this.select(this.selected)},1)}onHome(e){Ut.stop(e),!(this.options.length<2)&&(this.selected=0,this.options[this.selected].isDisabled&&this.selected>1&&this.selected++,this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected))}onEnd(e){Ut.stop(e),!(this.options.length<2)&&(this.selected=this.options.length-1,this.options[this.selected].isDisabled&&this.selected>1&&this.selected--,this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected))}onCharacter(e){const t=Cf.toString(e.keyCode);let i=-1;for(let n=0;n<this.options.length-1;n++)if(i=(n+this.selected+1)%this.options.length,this.options[i].text.charAt(0).toUpperCase()===t&&!this.options[i].isDisabled){this.select(i),this.selectList.setFocus([i]),this.selectList.reveal(this.selectList.getFocus()[0]),Ut.stop(e);break}}dispose(){this.hideSelectDropDown(!1),super.dispose()}}qu.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN=32;qu.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN=2;qu.DEFAULT_MINIMUM_VISIBLE_OPTIONS=3;class OAe extends J{constructor(e,t,i,n){super(),this.selected=0,this.selectBoxOptions=n||Object.create(null),this.options=[],this.selectElement=document.createElement("select"),this.selectElement.className="monaco-select-box",typeof this.selectBoxOptions.ariaLabel=="string"&&this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel),typeof this.selectBoxOptions.ariaDescription=="string"&&this.selectElement.setAttribute("aria-description",this.selectBoxOptions.ariaDescription),this._onDidSelect=this._register(new Y),this.styles=i,this.registerListeners(),this.setOptions(e,t)}registerListeners(){this._register(rn.addTarget(this.selectElement)),[ln.Tap].forEach(e=>{this._register(oe(this.selectElement,e,t=>{this.selectElement.focus()}))}),this._register(ss(this.selectElement,"click",e=>{Ut.stop(e,!0)})),this._register(ss(this.selectElement,"change",e=>{this.selectElement.title=e.target.value,this._onDidSelect.fire({index:e.target.selectedIndex,selected:e.target.value})})),this._register(ss(this.selectElement,"keydown",e=>{let t=!1;Kt?(e.keyCode===18||e.keyCode===16||e.keyCode===10)&&(t=!0):(e.keyCode===18&&e.altKey||e.keyCode===10||e.keyCode===3)&&(t=!0),t&&e.stopPropagation()}))}get onDidSelect(){return this._onDidSelect.event}setOptions(e,t){(!this.options||!zn(this.options,e))&&(this.options=e,this.selectElement.options.length=0,this.options.forEach((i,n)=>{this.selectElement.add(this.createOption(i.text,n,i.isDisabled))})),t!==void 0&&this.select(t)}select(e){this.options.length===0?this.selected=0:e>=0&&e<this.options.length?this.selected=e:e>this.options.length-1?this.select(this.options.length-1):this.selected<0&&(this.selected=0),this.selectElement.selectedIndex=this.selected,this.selected<this.options.length&&typeof this.options[this.selected].text=="string"?this.selectElement.title=this.options[this.selected].text:this.selectElement.title=""}focus(){this.selectElement&&(this.selectElement.tabIndex=0,this.selectElement.focus())}blur(){this.selectElement&&(this.selectElement.tabIndex=-1,this.selectElement.blur())}setFocusable(e){this.selectElement.tabIndex=e?0:-1}render(e){e.classList.add("select-container"),e.appendChild(this.selectElement),this.setOptions(this.options,this.selected),this.applyStyles()}applyStyles(){var e,t,i;this.selectElement&&(this.selectElement.style.backgroundColor=(e=this.styles.selectBackground)!==null&&e!==void 0?e:"",this.selectElement.style.color=(t=this.styles.selectForeground)!==null&&t!==void 0?t:"",this.selectElement.style.borderColor=(i=this.styles.selectBorder)!==null&&i!==void 0?i:"")}createOption(e,t,i){const n=document.createElement("option");return n.value=e,n.text=e,n.disabled=!!i,n}}class FAe extends Rl{constructor(e,t,i,n,s){super(),Kt&&!(s!=null&&s.useCustomDrawn)?this.selectBoxDelegate=new OAe(e,t,n,s):this.selectBoxDelegate=new qu(e,t,i,n,s),this._register(this.selectBoxDelegate)}get onDidSelect(){return this.selectBoxDelegate.onDidSelect}setOptions(e,t){this.selectBoxDelegate.setOptions(e,t)}select(e){this.selectBoxDelegate.select(e)}focus(){this.selectBoxDelegate.focus()}blur(){this.selectBoxDelegate.blur()}setFocusable(e){this.selectBoxDelegate.setFocusable(e)}render(e){this.selectBoxDelegate.render(e)}}class kd extends J{get action(){return this._action}constructor(e,t,i={}){super(),this.options=i,this._context=e||this,this._action=t,t instanceof za&&this._register(t.onDidChange(n=>{this.element&&this.handleActionChangeEvent(n)}))}handleActionChangeEvent(e){e.enabled!==void 0&&this.updateEnabled(),e.checked!==void 0&&this.updateChecked(),e.class!==void 0&&this.updateClass(),e.label!==void 0&&(this.updateLabel(),this.updateTooltip()),e.tooltip!==void 0&&this.updateTooltip()}get actionRunner(){return this._actionRunner||(this._actionRunner=this._register(new Rv)),this._actionRunner}set actionRunner(e){this._actionRunner=e}isEnabled(){return this._action.enabled}setActionContext(e){this._context=e}render(e){const t=this.element=e;this._register(rn.addTarget(e));const i=this.options&&this.options.draggable;i&&(e.draggable=!0,uc&&this._register(oe(e,ke.DRAG_START,n=>{var s;return(s=n.dataTransfer)===null||s===void 0?void 0:s.setData(Ox.TEXT,this._action.label)}))),this._register(oe(t,ln.Tap,n=>this.onClick(n,!0))),this._register(oe(t,ke.MOUSE_DOWN,n=>{i||Ut.stop(n,!0),this._action.enabled&&n.button===0&&t.classList.add("active")})),Kt&&this._register(oe(t,ke.CONTEXT_MENU,n=>{n.button===0&&n.ctrlKey===!0&&this.onClick(n)})),this._register(oe(t,ke.CLICK,n=>{Ut.stop(n,!0),this.options&&this.options.isMenu||this.onClick(n)})),this._register(oe(t,ke.DBLCLICK,n=>{Ut.stop(n,!0)})),[ke.MOUSE_UP,ke.MOUSE_OUT].forEach(n=>{this._register(oe(t,n,s=>{Ut.stop(s),t.classList.remove("active")}))})}onClick(e,t=!1){var i;Ut.stop(e,!0);const n=pl(this._context)?!((i=this.options)===null||i===void 0)&&i.useEventAsContext?e:{preserveFocus:t}:this._context;this.actionRunner.run(this._action,n)}focus(){this.element&&(this.element.tabIndex=0,this.element.focus(),this.element.classList.add("focused"))}blur(){this.element&&(this.element.blur(),this.element.tabIndex=-1,this.element.classList.remove("focused"))}setFocusable(e){this.element&&(this.element.tabIndex=e?0:-1)}get trapsArrowNavigation(){return!1}updateEnabled(){}updateLabel(){}getClass(){return this.action.class}getTooltip(){return this.action.tooltip}updateTooltip(){var e,t,i;if(!this.element)return;const n=(e=this.getTooltip())!==null&&e!==void 0?e:"";if(this.updateAriaLabel(),!((t=this.options.hoverDelegate)===null||t===void 0)&&t.showNativeHover)this.element.title=n;else if(!this.customHover&&n!==""){const s=(i=this.options.hoverDelegate)!==null&&i!==void 0?i:ya("element");this.customHover=this._store.add(Zc(s,this.element,n))}else this.customHover&&this.customHover.update(n)}updateAriaLabel(){var e;if(this.element){const t=(e=this.getTooltip())!==null&&e!==void 0?e:"";this.element.setAttribute("aria-label",t)}}updateClass(){}updateChecked(){}dispose(){this.element&&(this.element.remove(),this.element=void 0),this._context=void 0,super.dispose()}}class x1 extends kd{constructor(e,t,i){super(e,t,i),this.options=i,this.options.icon=i.icon!==void 0?i.icon:!1,this.options.label=i.label!==void 0?i.label:!0,this.cssClass=""}render(e){super.render(e),wi(this.element);const t=document.createElement("a");if(t.classList.add("action-label"),t.setAttribute("role",this.getDefaultAriaRole()),this.label=t,this.element.appendChild(t),this.options.label&&this.options.keybinding){const i=document.createElement("span");i.classList.add("keybinding"),i.textContent=this.options.keybinding,this.element.appendChild(i)}this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked()}getDefaultAriaRole(){return this._action.id===Os.ID?"presentation":this.options.isMenu?"menuitem":"button"}focus(){this.label&&(this.label.tabIndex=0,this.label.focus())}blur(){this.label&&(this.label.tabIndex=-1)}setFocusable(e){this.label&&(this.label.tabIndex=e?0:-1)}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this.action.label)}getTooltip(){let e=null;return this.action.tooltip?e=this.action.tooltip:!this.options.label&&this.action.label&&this.options.icon&&(e=this.action.label,this.options.keybinding&&(e=v({key:"titleLabel",comment:["action title","action keybinding"]},"{0} ({1})",e,this.options.keybinding))),e??void 0}updateClass(){var e;this.cssClass&&this.label&&this.label.classList.remove(...this.cssClass.split(" ")),this.options.icon?(this.cssClass=this.getClass(),this.label&&(this.label.classList.add("codicon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" "))),this.updateEnabled()):(e=this.label)===null||e===void 0||e.classList.remove("codicon")}updateEnabled(){var e,t;this.action.enabled?(this.label&&(this.label.removeAttribute("aria-disabled"),this.label.classList.remove("disabled")),(e=this.element)===null||e===void 0||e.classList.remove("disabled")):(this.label&&(this.label.setAttribute("aria-disabled","true"),this.label.classList.add("disabled")),(t=this.element)===null||t===void 0||t.classList.add("disabled"))}updateAriaLabel(){var e;if(this.label){const t=(e=this.getTooltip())!==null&&e!==void 0?e:"";this.label.setAttribute("aria-label",t)}}updateChecked(){this.label&&(this.action.checked!==void 0?(this.label.classList.toggle("checked",this.action.checked),this.label.setAttribute("aria-checked",this.action.checked?"true":"false"),this.label.setAttribute("role","checkbox")):(this.label.classList.remove("checked"),this.label.removeAttribute("aria-checked"),this.label.setAttribute("role",this.getDefaultAriaRole())))}}class BAe extends kd{constructor(e,t,i,n,s,r,a){super(e,t),this.selectBox=new FAe(i,n,s,r,a),this.selectBox.setFocusable(!1),this._register(this.selectBox),this.registerListeners()}select(e){this.selectBox.select(e)}registerListeners(){this._register(this.selectBox.onDidSelect(e=>this.runAction(e.selected,e.index)))}runAction(e,t){this.actionRunner.run(this._action,this.getActionContext(e,t))}getActionContext(e,t){return e}setFocusable(e){this.selectBox.setFocusable(e)}focus(){var e;(e=this.selectBox)===null||e===void 0||e.focus()}blur(){var e;(e=this.selectBox)===null||e===void 0||e.blur()}render(e){this.selectBox.render(e)}}class WAe extends Rv{constructor(e,t){super(),this._onDidChangeVisibility=this._register(new Y),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this._element=ge(e,ye(".monaco-dropdown")),this._label=ge(this._element,ye(".dropdown-label"));let i=t.labelRenderer;i||(i=s=>(s.textContent=t.label||"",null));for(const s of[ke.CLICK,ke.MOUSE_DOWN,ln.Tap])this._register(oe(this.element,s,r=>Ut.stop(r,!0)));for(const s of[ke.MOUSE_DOWN,ln.Tap])this._register(oe(this._label,s,r=>{ZV(r)&&(r.detail>1||r.button!==0)||(this.visible?this.hide():this.show())}));this._register(oe(this._label,ke.KEY_UP,s=>{const r=new _n(s);(r.equals(3)||r.equals(10))&&(Ut.stop(s,!0),this.visible?this.hide():this.show())}));const n=i(this._label);n&&this._register(n),this._register(rn.addTarget(this._label))}get element(){return this._element}show(){this.visible||(this.visible=!0,this._onDidChangeVisibility.fire(!0))}hide(){this.visible&&(this.visible=!1,this._onDidChangeVisibility.fire(!1))}dispose(){super.dispose(),this.hide(),this.boxContainer&&(this.boxContainer.remove(),this.boxContainer=void 0),this.contents&&(this.contents.remove(),this.contents=void 0),this._label&&(this._label.remove(),this._label=void 0)}}class VAe extends WAe{constructor(e,t){super(e,t),this._options=t,this._actions=[],this.actions=t.actions||[]}set menuOptions(e){this._menuOptions=e}get menuOptions(){return this._menuOptions}get actions(){return this._options.actionProvider?this._options.actionProvider.getActions():this._actions}set actions(e){this._actions=e}show(){super.show(),this.element.classList.add("active"),this._options.contextMenuProvider.showContextMenu({getAnchor:()=>this.element,getActions:()=>this.actions,getActionsContext:()=>this.menuOptions?this.menuOptions.context:null,getActionViewItem:(e,t)=>this.menuOptions&&this.menuOptions.actionViewItemProvider?this.menuOptions.actionViewItemProvider(e,t):void 0,getKeyBinding:e=>this.menuOptions&&this.menuOptions.getKeyBinding?this.menuOptions.getKeyBinding(e):void 0,getMenuClassName:()=>this._options.menuClassName||"",onHide:()=>this.onHide(),actionRunner:this.menuOptions?this.menuOptions.actionRunner:void 0,anchorAlignment:this.menuOptions?this.menuOptions.anchorAlignment:0,domForShadowRoot:this._options.menuAsChild?this.element:void 0,skipTelemetry:this._options.skipTelemetry})}hide(){super.hide()}onHide(){this.hide(),this.element.classList.remove("active")}}class nM extends kd{constructor(e,t,i,n=Object.create(null)){super(null,e,n),this.actionItem=null,this._onDidChangeVisibility=this._register(new Y),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this.menuActionsOrProvider=t,this.contextMenuProvider=i,this.options=n,this.options.actionRunner&&(this.actionRunner=this.options.actionRunner)}render(e){this.actionItem=e;const t=s=>{var r;this.element=ge(s,ye("a.action-label"));let a=[];return typeof this.options.classNames=="string"?a=this.options.classNames.split(/\s+/g).filter(l=>!!l):this.options.classNames&&(a=this.options.classNames),a.find(l=>l==="icon")||a.push("codicon"),this.element.classList.add(...a),this.element.setAttribute("role","button"),this.element.setAttribute("aria-haspopup","true"),this.element.setAttribute("aria-expanded","false"),this._action.label&&this._register(Zc((r=this.options.hoverDelegate)!==null&&r!==void 0?r:ya("mouse"),this.element,this._action.label)),this.element.ariaLabel=this._action.label||"",null},i=Array.isArray(this.menuActionsOrProvider),n={contextMenuProvider:this.contextMenuProvider,labelRenderer:t,menuAsChild:this.options.menuAsChild,actions:i?this.menuActionsOrProvider:void 0,actionProvider:i?void 0:this.menuActionsOrProvider,skipTelemetry:this.options.skipTelemetry};if(this.dropdownMenu=this._register(new VAe(e,n)),this._register(this.dropdownMenu.onDidChangeVisibility(s=>{var r;(r=this.element)===null||r===void 0||r.setAttribute("aria-expanded",`${s}`),this._onDidChangeVisibility.fire(s)})),this.dropdownMenu.menuOptions={actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,getKeyBinding:this.options.keybindingProvider,context:this._context},this.options.anchorAlignmentProvider){const s=this;this.dropdownMenu.menuOptions={...this.dropdownMenu.menuOptions,get anchorAlignment(){return s.options.anchorAlignmentProvider()}}}this.updateTooltip(),this.updateEnabled()}getTooltip(){let e=null;return this.action.tooltip?e=this.action.tooltip:this.action.label&&(e=this.action.label),e??void 0}setActionContext(e){super.setActionContext(e),this.dropdownMenu&&(this.dropdownMenu.menuOptions?this.dropdownMenu.menuOptions.context=e:this.dropdownMenu.menuOptions={context:e})}show(){var e;(e=this.dropdownMenu)===null||e===void 0||e.show()}updateEnabled(){var e,t;const i=!this.action.enabled;(e=this.actionItem)===null||e===void 0||e.classList.toggle("disabled",i),(t=this.element)===null||t===void 0||t.classList.toggle("disabled",i)}}function HAe(o){return o?o.condition!==void 0:!1}var HC;(function(o){o[o.STORAGE_DOES_NOT_EXIST=0]="STORAGE_DOES_NOT_EXIST",o[o.STORAGE_IN_MEMORY=1]="STORAGE_IN_MEMORY"})(HC||(HC={}));var pC;(function(o){o[o.None=0]="None",o[o.Initialized=1]="Initialized",o[o.Closed=2]="Closed"})(pC||(pC={}));class zC extends J{constructor(e,t=Object.create(null)){super(),this.database=e,this.options=t,this._onDidChangeStorage=this._register(new Dv),this.onDidChangeStorage=this._onDidChangeStorage.event,this.state=pC.None,this.cache=new Map,this.flushDelayer=this._register(new wie(zC.DEFAULT_FLUSH_DELAY)),this.pendingDeletes=new Set,this.pendingInserts=new Map,this.whenFlushedCallbacks=[],this.registerListeners()}registerListeners(){this._register(this.database.onDidChangeItemsExternal(e=>this.onDidChangeItemsExternal(e)))}onDidChangeItemsExternal(e){var t,i;this._onDidChangeStorage.pause();try{(t=e.changed)===null||t===void 0||t.forEach((n,s)=>this.acceptExternal(s,n)),(i=e.deleted)===null||i===void 0||i.forEach(n=>this.acceptExternal(n,void 0))}finally{this._onDidChangeStorage.resume()}}acceptExternal(e,t){if(this.state===pC.Closed)return;let i=!1;pl(t)?i=this.cache.delete(e):this.cache.get(e)!==t&&(this.cache.set(e,t),i=!0),i&&this._onDidChangeStorage.fire({key:e,external:!0})}get(e,t){const i=this.cache.get(e);return pl(i)?t:i}getBoolean(e,t){const i=this.get(e);return pl(i)?t:i==="true"}getNumber(e,t){const i=this.get(e);return pl(i)?t:parseInt(i,10)}async set(e,t,i=!1){if(this.state===pC.Closed)return;if(pl(t))return this.delete(e,i);const n=Br(t)||Array.isArray(t)?MRe(t):String(t);if(this.cache.get(e)!==n)return this.cache.set(e,n),this.pendingInserts.set(e,n),this.pendingDeletes.delete(e),this._onDidChangeStorage.fire({key:e,external:i}),this.doFlush()}async delete(e,t=!1){if(!(this.state===pC.Closed||!this.cache.delete(e)))return this.pendingDeletes.has(e)||this.pendingDeletes.add(e),this.pendingInserts.delete(e),this._onDidChangeStorage.fire({key:e,external:t}),this.doFlush()}get hasPending(){return this.pendingInserts.size>0||this.pendingDeletes.size>0}async flushPending(){if(!this.hasPending)return;const e={insert:this.pendingInserts,delete:this.pendingDeletes};return this.pendingDeletes=new Set,this.pendingInserts=new Map,this.database.updateItems(e).finally(()=>{var t;if(!this.hasPending)for(;this.whenFlushedCallbacks.length;)(t=this.whenFlushedCallbacks.pop())===null||t===void 0||t()})}async doFlush(e){return this.options.hint===HC.STORAGE_IN_MEMORY?this.flushPending():this.flushDelayer.trigger(()=>this.flushPending(),e)}}zC.DEFAULT_FLUSH_DELAY=100;class Z3{constructor(){this.onDidChangeItemsExternal=Ie.None,this.items=new Map}async updateItems(e){var t,i;(t=e.insert)===null||t===void 0||t.forEach((n,s)=>this.items.set(s,n)),(i=e.delete)===null||i===void 0||i.forEach(n=>this.items.delete(n))}}const AN="__$__targetStorageMarker",Qc=Zt("storageService");var Vx;(function(o){o[o.NONE=0]="NONE",o[o.SHUTDOWN=1]="SHUTDOWN"})(Vx||(Vx={}));function zAe(o){const e=o.get(AN);if(e)try{return JSON.parse(e)}catch{}return Object.create(null)}class uP extends J{constructor(e={flushInterval:uP.DEFAULT_FLUSH_INTERVAL}){super(),this.options=e,this._onDidChangeValue=this._register(new Dv),this._onDidChangeTarget=this._register(new Dv),this._onWillSaveState=this._register(new Y),this.onWillSaveState=this._onWillSaveState.event,this._workspaceKeyTargets=void 0,this._profileKeyTargets=void 0,this._applicationKeyTargets=void 0}onDidChangeValue(e,t,i){return Ie.filter(this._onDidChangeValue.event,n=>n.scope===e&&(t===void 0||n.key===t),i)}emitDidChangeValue(e,t){const{key:i,external:n}=t;if(i===AN){switch(e){case-1:this._applicationKeyTargets=void 0;break;case 0:this._profileKeyTargets=void 0;break;case 1:this._workspaceKeyTargets=void 0;break}this._onDidChangeTarget.fire({scope:e})}else this._onDidChangeValue.fire({scope:e,key:i,target:this.getKeyTargets(e)[i],external:n})}get(e,t,i){var n;return(n=this.getStorage(t))===null||n===void 0?void 0:n.get(e,i)}getBoolean(e,t,i){var n;return(n=this.getStorage(t))===null||n===void 0?void 0:n.getBoolean(e,i)}getNumber(e,t,i){var n;return(n=this.getStorage(t))===null||n===void 0?void 0:n.getNumber(e,i)}store(e,t,i,n,s=!1){if(pl(t)){this.remove(e,i,s);return}this.withPausedEmitters(()=>{var r;this.updateKeyTarget(e,i,n),(r=this.getStorage(i))===null||r===void 0||r.set(e,t,s)})}remove(e,t,i=!1){this.withPausedEmitters(()=>{var n;this.updateKeyTarget(e,t,void 0),(n=this.getStorage(t))===null||n===void 0||n.delete(e,i)})}withPausedEmitters(e){this._onDidChangeValue.pause(),this._onDidChangeTarget.pause();try{e()}finally{this._onDidChangeValue.resume(),this._onDidChangeTarget.resume()}}updateKeyTarget(e,t,i,n=!1){var s,r;const a=this.getKeyTargets(t);typeof i=="number"?a[e]!==i&&(a[e]=i,(s=this.getStorage(t))===null||s===void 0||s.set(AN,JSON.stringify(a),n)):typeof a[e]=="number"&&(delete a[e],(r=this.getStorage(t))===null||r===void 0||r.set(AN,JSON.stringify(a),n))}get workspaceKeyTargets(){return this._workspaceKeyTargets||(this._workspaceKeyTargets=this.loadKeyTargets(1)),this._workspaceKeyTargets}get profileKeyTargets(){return this._profileKeyTargets||(this._profileKeyTargets=this.loadKeyTargets(0)),this._profileKeyTargets}get applicationKeyTargets(){return this._applicationKeyTargets||(this._applicationKeyTargets=this.loadKeyTargets(-1)),this._applicationKeyTargets}getKeyTargets(e){switch(e){case-1:return this.applicationKeyTargets;case 0:return this.profileKeyTargets;default:return this.workspaceKeyTargets}}loadKeyTargets(e){const t=this.getStorage(e);return t?zAe(t):Object.create(null)}}uP.DEFAULT_FLUSH_INTERVAL=60*1e3;class UAe extends uP{constructor(){super(),this.applicationStorage=this._register(new zC(new Z3,{hint:HC.STORAGE_IN_MEMORY})),this.profileStorage=this._register(new zC(new Z3,{hint:HC.STORAGE_IN_MEMORY})),this.workspaceStorage=this._register(new zC(new Z3,{hint:HC.STORAGE_IN_MEMORY})),this._register(this.workspaceStorage.onDidChangeStorage(e=>this.emitDidChangeValue(1,e))),this._register(this.profileStorage.onDidChangeStorage(e=>this.emitDidChangeValue(0,e))),this._register(this.applicationStorage.onDidChangeStorage(e=>this.emitDidChangeValue(-1,e)))}getStorage(e){switch(e){case-1:return this.applicationStorage;case 0:return this.profileStorage;default:return this.workspaceStorage}}}function $Ae(o,e){const t={...e};for(const i in o){const n=o[i];t[i]=n!==void 0?je(n):void 0}return t}const jAe={keybindingLabelBackground:je(Cxe),keybindingLabelForeground:je(wxe),keybindingLabelBorder:je(yxe),keybindingLabelBottomBorder:je(Sxe),keybindingLabelShadow:je(Pf)},KAe={buttonForeground:je(KS),buttonSeparator:je(hxe),buttonBackground:je(qS),buttonHoverBackground:je(fxe),buttonSecondaryForeground:je(pxe),buttonSecondaryBackground:je(x9),buttonSecondaryHoverBackground:je(mxe),buttonBorder:je(gxe)},qAe={progressBarBackground:je(NLe)},sM={inputActiveOptionBorder:je(bH),inputActiveOptionForeground:je(CH),inputActiveOptionBackground:je(nv)};je(_xe),je(bxe),je(vxe);je(us),je(Tf),je(Pf),je(Jt),je(GLe),je(YLe),je(ZLe),je(ILe);const oM={inputBackground:je(One),inputForeground:je(Fne),inputBorder:je(Bne),inputValidationInfoBorder:je(sxe),inputValidationInfoBackground:je(ixe),inputValidationInfoForeground:je(nxe),inputValidationWarningBorder:je(axe),inputValidationWarningBackground:je(oxe),inputValidationWarningForeground:je(rxe),inputValidationErrorBorder:je(dxe),inputValidationErrorBackground:je(lxe),inputValidationErrorForeground:je(cxe)},GAe={listFilterWidgetBackground:je(Pxe),listFilterWidgetOutline:je(Oxe),listFilterWidgetNoMatchesOutline:je(Fxe),listFilterWidgetShadow:je(Bxe),inputBoxStyles:oM,toggleStyles:sM},Eoe={badgeBackground:je(LN),badgeForeground:je(TLe),badgeBorder:je(Jt)};je(KLe),je(jLe),je(FZ),je(FZ),je(qLe);const ub={listBackground:void 0,listInactiveFocusForeground:void 0,listFocusBackground:je(Lxe),listFocusForeground:je(xxe),listFocusOutline:je(Dxe),listActiveSelectionBackground:je(Ff),listActiveSelectionForeground:je(eh),listActiveSelectionIconForeground:je(GS),listFocusAndSelectionOutline:je(kxe),listFocusAndSelectionBackground:je(Ff),listFocusAndSelectionForeground:je(eh),listInactiveSelectionBackground:je(Exe),listInactiveSelectionIconForeground:je(Txe),listInactiveSelectionForeground:je(Ixe),listInactiveFocusBackground:je(Nxe),listInactiveFocusOutline:je(Rxe),listHoverBackground:je(Wne),listHoverForeground:je(Vne),listDropOverBackground:je(Mxe),listDropBetweenBackground:je(Axe),listSelectionOutline:je(Sn),listHoverOutline:je(Sn),treeIndentGuidesStroke:je(YS),treeInactiveIndentGuidesStroke:je(Wxe),tableColumnsBorder:je(Vxe),tableOddRowsBackgroundColor:je(Hxe)};function hb(o){return $Ae(o,ub)}const YAe={selectBackground:je(Ju),selectListBackground:je(uxe),selectForeground:je(Of),decoratorRightForeground:je(Hne),selectBorder:je(rC),focusBorder:je(sc),listFocusBackground:je(Mp),listInactiveSelectionIconForeground:je(aC),listFocusForeground:je(Rp),listFocusOutline:xLe(Sn,ne.transparent.toString()),listHoverBackground:je(Wne),listHoverForeground:je(Vne),listHoverOutline:je(Sn),selectListBorder:je(Nf),listBackground:void 0,listActiveSelectionBackground:void 0,listActiveSelectionForeground:void 0,listActiveSelectionIconForeground:void 0,listFocusAndSelectionBackground:void 0,listDropOverBackground:void 0,listDropBetweenBackground:void 0,listInactiveSelectionBackground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusBackground:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listFocusAndSelectionForeground:void 0,listFocusAndSelectionOutline:void 0,listInactiveFocusForeground:void 0,tableColumnsBorder:void 0,tableOddRowsBackgroundColor:void 0,treeIndentGuidesStroke:void 0,treeInactiveIndentGuidesStroke:void 0},ZAe={shadowColor:je(Pf),borderColor:je(zxe),foregroundColor:je(Uxe),backgroundColor:je($xe),selectionForegroundColor:je(jxe),selectionBackgroundColor:je(Kxe),selectionBorderColor:je(qxe),separatorColor:je(Gxe),scrollbarShadow:je(HS),scrollbarSliderBackground:je(zS),scrollbarSliderHoverBackground:je(US),scrollbarSliderActiveBackground:je($S)};var hP=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},ha=function(o,e){return function(t,i){e(t,i,o)}};function QAe(o,e,t,i){const n=o.getActions(e),s=If.getInstance(),r=s.keyStatus.altKey||(Mo||jr)&&s.keyStatus.shiftKey;Ioe(n,t,r,a=>a==="navigation")}function fP(o,e,t,i,n,s){const r=o.getActions(e);Ioe(r,t,!1,typeof i=="string"?l=>l===i:i,n,s)}function Ioe(o,e,t,i=r=>r==="navigation",n=()=>!1,s=!1){let r,a;Array.isArray(e)?(r=e,a=e):(r=e.primary,a=e.secondary);const l=new Set;for(const[c,u]of o){let f;i(c)?(f=r,f.length>0&&s&&f.push(new Os)):(f=a,f.length>0&&f.push(new Os));for(let g of u){t&&(g=g instanceof Dl&&g.alt?g.alt:g);const p=f.push(g);g instanceof n1&&l.add({group:c,action:g,index:p-1})}}for(const{group:c,action:u,index:f}of l){const g=i(c)?r:a,p=u.actions;n(u,c,g.length)&&g.splice(f,1,...p)}}let bm=class extends x1{constructor(e,t,i,n,s,r,a,l){super(void 0,e,{icon:!!(e.class||e.item.icon),label:!e.class&&!e.item.icon,draggable:t==null?void 0:t.draggable,keybinding:t==null?void 0:t.keybinding,hoverDelegate:t==null?void 0:t.hoverDelegate}),this._keybindingService=i,this._notificationService=n,this._contextKeyService=s,this._themeService=r,this._contextMenuService=a,this._accessibilityService=l,this._wantsAltCommand=!1,this._itemClassDispose=this._register(new Xs),this._altKey=If.getInstance()}get _menuItemAction(){return this._action}get _commandAction(){return this._wantsAltCommand&&this._menuItemAction.alt||this._menuItemAction}async onClick(e){e.preventDefault(),e.stopPropagation();try{await this.actionRunner.run(this._commandAction,this._context)}catch(t){this._notificationService.error(t)}}render(e){if(super.render(e),e.classList.add("menu-entry"),this.options.icon&&this._updateItemClass(this._menuItemAction.item),this._menuItemAction.alt){let t=!1;const i=()=>{var n;const s=!!(!((n=this._menuItemAction.alt)===null||n===void 0)&&n.enabled)&&(!this._accessibilityService.isMotionReduced()||t)&&(this._altKey.keyStatus.altKey||this._altKey.keyStatus.shiftKey&&t);s!==this._wantsAltCommand&&(this._wantsAltCommand=s,this.updateLabel(),this.updateTooltip(),this.updateClass())};this._register(this._altKey.event(i)),this._register(oe(e,"mouseleave",n=>{t=!1,i()})),this._register(oe(e,"mouseenter",n=>{t=!0,i()})),i()}}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this._commandAction.label)}getTooltip(){var e;const t=this._keybindingService.lookupKeybinding(this._commandAction.id,this._contextKeyService),i=t&&t.getLabel(),n=this._commandAction.tooltip||this._commandAction.label;let s=i?v("titleAndKb","{0} ({1})",n,i):n;if(!this._wantsAltCommand&&(!((e=this._menuItemAction.alt)===null||e===void 0)&&e.enabled)){const r=this._menuItemAction.alt.tooltip||this._menuItemAction.alt.label,a=this._keybindingService.lookupKeybinding(this._menuItemAction.alt.id,this._contextKeyService),l=a&&a.getLabel(),c=l?v("titleAndKb","{0} ({1})",r,l):r;s=v("titleAndKbAndAlt",`{0}
[{1}] {2}`,s,uz.modifierLabels[Va].altKey,c)}return s}updateClass(){this.options.icon&&(this._commandAction!==this._menuItemAction?this._menuItemAction.alt&&this._updateItemClass(this._menuItemAction.alt.item):this._updateItemClass(this._menuItemAction.item))}_updateItemClass(e){this._itemClassDispose.value=void 0;const{element:t,label:i}=this;if(!t||!i)return;const n=this._commandAction.checked&&HAe(e.toggled)&&e.toggled.icon?e.toggled.icon:e.icon;if(n)if(pt.isThemeIcon(n)){const s=pt.asClassNameArray(n);i.classList.add(...s),this._itemClassDispose.value=lt(()=>{i.classList.remove(...s)})}else i.style.backgroundImage=h1(this._themeService.getColorTheme().type)?hm(n.dark):hm(n.light),i.classList.add("icon"),this._itemClassDispose.value=$c(lt(()=>{i.style.backgroundImage="",i.classList.remove("icon")}),this._themeService.onDidColorThemeChange(()=>{this.updateClass()}))}};bm=hP([ha(2,Bi),ha(3,ys),ha(4,bt),ha(5,Us),ha(6,Ya),ha(7,mc)],bm);let x8=class extends nM{constructor(e,t,i,n,s){var r,a,l;const c={...t,menuAsChild:(r=t==null?void 0:t.menuAsChild)!==null&&r!==void 0?r:!1,classNames:(a=t==null?void 0:t.classNames)!==null&&a!==void 0?a:pt.isThemeIcon(e.item.icon)?pt.asClassName(e.item.icon):void 0,keybindingProvider:(l=t==null?void 0:t.keybindingProvider)!==null&&l!==void 0?l:u=>i.lookupKeybinding(u.id)};super(e,{getActions:()=>e.actions},n,c),this._keybindingService=i,this._contextMenuService=n,this._themeService=s}render(e){super.render(e),wi(this.element),e.classList.add("menu-entry");const t=this._action,{icon:i}=t.item;if(i&&!pt.isThemeIcon(i)){this.element.classList.add("icon");const n=()=>{this.element&&(this.element.style.backgroundImage=h1(this._themeService.getColorTheme().type)?hm(i.dark):hm(i.light))};n(),this._register(this._themeService.onDidColorThemeChange(()=>{n()}))}}};x8=hP([ha(2,Bi),ha(3,Ya),ha(4,Us)],x8);let D8=class extends kd{constructor(e,t,i,n,s,r,a,l){var c,u,f;super(null,e),this._keybindingService=i,this._notificationService=n,this._contextMenuService=s,this._menuService=r,this._instaService=a,this._storageService=l,this._container=null,this._options=t,this._storageKey=`${e.item.submenu.id}_lastActionId`;let g;const p=t!=null&&t.persistLastActionId?l.get(this._storageKey,1):void 0;p&&(g=e.actions.find(b=>p===b.id)),g||(g=e.actions[0]),this._defaultAction=this._instaService.createInstance(bm,g,{keybinding:this._getDefaultActionKeybindingLabel(g)});const _={keybindingProvider:b=>this._keybindingService.lookupKeybinding(b.id),...t,menuAsChild:(c=t==null?void 0:t.menuAsChild)!==null&&c!==void 0?c:!0,classNames:(u=t==null?void 0:t.classNames)!==null&&u!==void 0?u:["codicon","codicon-chevron-down"],actionRunner:(f=t==null?void 0:t.actionRunner)!==null&&f!==void 0?f:new Rv};this._dropdown=new nM(e,e.actions,this._contextMenuService,_),this._register(this._dropdown.actionRunner.onDidRun(b=>{b.action instanceof Dl&&this.update(b.action)}))}update(e){var t;!((t=this._options)===null||t===void 0)&&t.persistLastActionId&&this._storageService.store(this._storageKey,e.id,1,1),this._defaultAction.dispose(),this._defaultAction=this._instaService.createInstance(bm,e,{keybinding:this._getDefaultActionKeybindingLabel(e)}),this._defaultAction.actionRunner=new class extends Rv{async runAction(i,n){await i.run(void 0)}},this._container&&this._defaultAction.render(QV(this._container,ye(".action-container")))}_getDefaultActionKeybindingLabel(e){var t;let i;if(!((t=this._options)===null||t===void 0)&&t.renderKeybindingWithDefaultActionLabel){const n=this._keybindingService.lookupKeybinding(e.id);n&&(i=`(${n.getLabel()})`)}return i}setActionContext(e){super.setActionContext(e),this._defaultAction.setActionContext(e),this._dropdown.setActionContext(e)}render(e){this._container=e,super.render(this._container),this._container.classList.add("monaco-dropdown-with-default");const t=ye(".action-container");this._defaultAction.render(ge(this._container,t)),this._register(oe(t,ke.KEY_DOWN,n=>{const s=new _n(n);s.equals(17)&&(this._defaultAction.element.tabIndex=-1,this._dropdown.focus(),s.stopPropagation())}));const i=ye(".dropdown-action-container");this._dropdown.render(ge(this._container,i)),this._register(oe(i,ke.KEY_DOWN,n=>{var s;const r=new _n(n);r.equals(15)&&(this._defaultAction.element.tabIndex=0,this._dropdown.setFocusable(!1),(s=this._defaultAction.element)===null||s===void 0||s.focus(),r.stopPropagation())}))}focus(e){e?this._dropdown.focus():(this._defaultAction.element.tabIndex=0,this._defaultAction.element.focus())}blur(){this._defaultAction.element.tabIndex=-1,this._dropdown.blur(),this._container.blur()}setFocusable(e){e?this._defaultAction.element.tabIndex=0:(this._defaultAction.element.tabIndex=-1,this._dropdown.setFocusable(!1))}dispose(){this._defaultAction.dispose(),this._dropdown.dispose(),super.dispose()}};D8=hP([ha(2,Bi),ha(3,ys),ha(4,Ya),ha(5,Nl),ha(6,ct),ha(7,Qc)],D8);let k8=class extends BAe{constructor(e,t){super(null,e,e.actions.map(i=>({text:i.id===Os.ID?"":i.label,isDisabled:!i.enabled})),0,t,YAe,{ariaLabel:e.tooltip,optionsAsChildren:!0}),this.select(Math.max(0,e.actions.findIndex(i=>i.checked)))}render(e){super.render(e),e.style.borderColor=je(rC)}runAction(e,t){const i=this.action.actions[t];i&&this.actionRunner.run(i)}};k8=hP([ha(1,gg)],k8);function Toe(o,e,t){return e instanceof Dl?o.createInstance(bm,e,t):e instanceof ox?e.item.isSelection?o.createInstance(k8,e):e.item.rememberDefaultAction?o.createInstance(D8,e,{...t,persistLastActionId:!0}):o.createInstance(x8,e,t):void 0}class pc extends J{constructor(e,t={}){var i,n,s,r,a,l,c;super(),this._actionRunnerDisposables=this._register(new he),this.viewItemDisposables=this._register(new TV),this.triggerKeyDown=!1,this.focusable=!0,this._onDidBlur=this._register(new Y),this.onDidBlur=this._onDidBlur.event,this._onDidCancel=this._register(new Y({onWillAddFirstListener:()=>this.cancelHasListener=!0})),this.onDidCancel=this._onDidCancel.event,this.cancelHasListener=!1,this._onDidRun=this._register(new Y),this.onDidRun=this._onDidRun.event,this._onWillRun=this._register(new Y),this.onWillRun=this._onWillRun.event,this.options=t,this._context=(i=t.context)!==null&&i!==void 0?i:null,this._orientation=(n=this.options.orientation)!==null&&n!==void 0?n:0,this._triggerKeys={keyDown:(r=(s=this.options.triggerKeys)===null||s===void 0?void 0:s.keyDown)!==null&&r!==void 0?r:!1,keys:(l=(a=this.options.triggerKeys)===null||a===void 0?void 0:a.keys)!==null&&l!==void 0?l:[3,10]},this._hoverDelegate=(c=t.hoverDelegate)!==null&&c!==void 0?c:this._register(y1()),this.options.actionRunner?this._actionRunner=this.options.actionRunner:(this._actionRunner=new Rv,this._actionRunnerDisposables.add(this._actionRunner)),this._actionRunnerDisposables.add(this._actionRunner.onDidRun(g=>this._onDidRun.fire(g))),this._actionRunnerDisposables.add(this._actionRunner.onWillRun(g=>this._onWillRun.fire(g))),this.viewItems=[],this.focusedItem=void 0,this.domNode=document.createElement("div"),this.domNode.className="monaco-action-bar";let u,f;switch(this._orientation){case 0:u=[15],f=[17];break;case 1:u=[16],f=[18],this.domNode.className+=" vertical";break}this._register(oe(this.domNode,ke.KEY_DOWN,g=>{const p=new _n(g);let _=!0;const b=typeof this.focusedItem=="number"?this.viewItems[this.focusedItem]:void 0;u&&(p.equals(u[0])||p.equals(u[1]))?_=this.focusPrevious():f&&(p.equals(f[0])||p.equals(f[1]))?_=this.focusNext():p.equals(9)&&this.cancelHasListener?this._onDidCancel.fire():p.equals(14)?_=this.focusFirst():p.equals(13)?_=this.focusLast():p.equals(2)&&b instanceof kd&&b.trapsArrowNavigation?_=this.focusNext():this.isTriggerKeyEvent(p)?this._triggerKeys.keyDown?this.doTrigger(p):this.triggerKeyDown=!0:_=!1,_&&(p.preventDefault(),p.stopPropagation())})),this._register(oe(this.domNode,ke.KEY_UP,g=>{const p=new _n(g);this.isTriggerKeyEvent(p)?(!this._triggerKeys.keyDown&&this.triggerKeyDown&&(this.triggerKeyDown=!1,this.doTrigger(p)),p.preventDefault(),p.stopPropagation()):(p.equals(2)||p.equals(1026)||p.equals(16)||p.equals(18)||p.equals(15)||p.equals(17))&&this.updateFocusedItem()})),this.focusTracker=this._register(Kd(this.domNode)),this._register(this.focusTracker.onDidBlur(()=>{(No()===this.domNode||!ao(No(),this.domNode))&&(this._onDidBlur.fire(),this.previouslyFocusedItem=this.focusedItem,this.focusedItem=void 0,this.triggerKeyDown=!1)})),this._register(this.focusTracker.onDidFocus(()=>this.updateFocusedItem())),this.actionsList=document.createElement("ul"),this.actionsList.className="actions-container",this.options.highlightToggledItems&&this.actionsList.classList.add("highlight-toggled"),this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"),this.options.ariaLabel&&this.actionsList.setAttribute("aria-label",this.options.ariaLabel),this.domNode.appendChild(this.actionsList),e.appendChild(this.domNode)}refreshRole(){this.length()>=1?this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"):this.actionsList.setAttribute("role","presentation")}setFocusable(e){if(this.focusable=e,this.focusable){const t=this.viewItems.find(i=>i instanceof kd&&i.isEnabled());t instanceof kd&&t.setFocusable(!0)}else this.viewItems.forEach(t=>{t instanceof kd&&t.setFocusable(!1)})}isTriggerKeyEvent(e){let t=!1;return this._triggerKeys.keys.forEach(i=>{t=t||e.equals(i)}),t}updateFocusedItem(){var e,t;for(let i=0;i<this.actionsList.children.length;i++){const n=this.actionsList.children[i];if(ao(No(),n)){this.focusedItem=i,(t=(e=this.viewItems[this.focusedItem])===null||e===void 0?void 0:e.showHover)===null||t===void 0||t.call(e);break}}}get context(){return this._context}set context(e){this._context=e,this.viewItems.forEach(t=>t.setActionContext(e))}get actionRunner(){return this._actionRunner}set actionRunner(e){this._actionRunner=e,this._actionRunnerDisposables.clear(),this._actionRunnerDisposables.add(this._actionRunner.onDidRun(t=>this._onDidRun.fire(t))),this._actionRunnerDisposables.add(this._actionRunner.onWillRun(t=>this._onWillRun.fire(t))),this.viewItems.forEach(t=>t.actionRunner=e)}getContainer(){return this.domNode}getAction(e){var t;if(typeof e=="number")return(t=this.viewItems[e])===null||t===void 0?void 0:t.action;if(e instanceof HTMLElement){for(;e.parentElement!==this.actionsList;){if(!e.parentElement)return;e=e.parentElement}for(let i=0;i<this.actionsList.childNodes.length;i++)if(this.actionsList.childNodes[i]===e)return this.viewItems[i].action}}push(e,t={}){const i=Array.isArray(e)?e:[e];let n=om(t.index)?t.index:null;i.forEach(s=>{const r=document.createElement("li");r.className="action-item",r.setAttribute("role","presentation");let a;const l={hoverDelegate:this._hoverDelegate,...t};this.options.actionViewItemProvider&&(a=this.options.actionViewItemProvider(s,l)),a||(a=new x1(this.context,s,l)),this.options.allowContextMenu||this.viewItemDisposables.set(a,oe(r,ke.CONTEXT_MENU,c=>{Ut.stop(c,!0)})),a.actionRunner=this._actionRunner,a.setActionContext(this.context),a.render(r),this.focusable&&a instanceof kd&&this.viewItems.length===0&&a.setFocusable(!0),n===null||n<0||n>=this.actionsList.children.length?(this.actionsList.appendChild(r),this.viewItems.push(a)):(this.actionsList.insertBefore(r,this.actionsList.children[n]),this.viewItems.splice(n,0,a),n++)}),typeof this.focusedItem=="number"&&this.focus(this.focusedItem),this.refreshRole()}clear(){this.isEmpty()||(this.viewItems=cn(this.viewItems),this.viewItemDisposables.clearAndDisposeAll(),Zo(this.actionsList),this.refreshRole())}length(){return this.viewItems.length}isEmpty(){return this.viewItems.length===0}focus(e){let t=!1,i;if(e===void 0?t=!0:typeof e=="number"?i=e:typeof e=="boolean"&&(t=e),t&&typeof this.focusedItem>"u"){const n=this.viewItems.findIndex(s=>s.isEnabled());this.focusedItem=n===-1?void 0:n,this.updateFocus(void 0,void 0,!0)}else i!==void 0&&(this.focusedItem=i),this.updateFocus(void 0,void 0,!0)}focusFirst(){return this.focusedItem=this.length()-1,this.focusNext(!0)}focusLast(){return this.focusedItem=0,this.focusPrevious(!0)}focusNext(e){if(typeof this.focusedItem>"u")this.focusedItem=this.viewItems.length-1;else if(this.viewItems.length<=1)return!1;const t=this.focusedItem;let i;do{if(!e&&this.options.preventLoopNavigation&&this.focusedItem+1>=this.viewItems.length)return this.focusedItem=t,!1;this.focusedItem=(this.focusedItem+1)%this.viewItems.length,i=this.viewItems[this.focusedItem]}while(this.focusedItem!==t&&(this.options.focusOnlyEnabledItems&&!i.isEnabled()||i.action.id===Os.ID));return this.updateFocus(),!0}focusPrevious(e){if(typeof this.focusedItem>"u")this.focusedItem=0;else if(this.viewItems.length<=1)return!1;const t=this.focusedItem;let i;do{if(this.focusedItem=this.focusedItem-1,this.focusedItem<0){if(!e&&this.options.preventLoopNavigation)return this.focusedItem=t,!1;this.focusedItem=this.viewItems.length-1}i=this.viewItems[this.focusedItem]}while(this.focusedItem!==t&&(this.options.focusOnlyEnabledItems&&!i.isEnabled()||i.action.id===Os.ID));return this.updateFocus(!0),!0}updateFocus(e,t,i=!1){var n,s;typeof this.focusedItem>"u"&&this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem!==void 0&&this.previouslyFocusedItem!==this.focusedItem&&((n=this.viewItems[this.previouslyFocusedItem])===null||n===void 0||n.blur());const r=this.focusedItem!==void 0?this.viewItems[this.focusedItem]:void 0;if(r){let a=!0;GL(r.focus)||(a=!1),this.options.focusOnlyEnabledItems&&GL(r.isEnabled)&&!r.isEnabled()&&(a=!1),r.action.id===Os.ID&&(a=!1),a?(i||this.previouslyFocusedItem!==this.focusedItem)&&(r.focus(e),this.previouslyFocusedItem=this.focusedItem):(this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem=void 0),a&&((s=r.showHover)===null||s===void 0||s.call(r))}}doTrigger(e){if(typeof this.focusedItem>"u")return;const t=this.viewItems[this.focusedItem];if(t instanceof kd){const i=t._context===null||t._context===void 0?e:t._context;this.run(t._action,i)}}async run(e,t){await this._actionRunner.run(e,t)}dispose(){this._context=void 0,this.viewItems=cn(this.viewItems),this.getContainer().remove(),super.dispose()}}const E8=/\(&([^\s&])\)|(^|[^&])&([^\s&])/,Q3=/(&amp;)?(&amp;)([^\s&])/g;var rM;(function(o){o[o.Right=0]="Right",o[o.Left=1]="Left"})(rM||(rM={}));var I8;(function(o){o[o.Above=0]="Above",o[o.Below=1]="Below"})(I8||(I8={}));class UC extends pc{constructor(e,t,i,n){e.classList.add("monaco-menu-container"),e.setAttribute("role","presentation");const s=document.createElement("div");s.classList.add("monaco-menu"),s.setAttribute("role","presentation"),super(s,{orientation:1,actionViewItemProvider:c=>this.doGetActionViewItem(c,i,r),context:i.context,actionRunner:i.actionRunner,ariaLabel:i.ariaLabel,ariaRole:"menu",focusOnlyEnabledItems:!0,triggerKeys:{keys:[3,...Kt||jr?[10]:[]],keyDown:!0}}),this.menuStyles=n,this.menuElement=s,this.actionsList.tabIndex=0,this.initializeOrUpdateStyleSheet(e,n),this._register(rn.addTarget(s)),this._register(oe(s,ke.KEY_DOWN,c=>{new _n(c).equals(2)&&c.preventDefault()})),i.enableMnemonics&&this._register(oe(s,ke.KEY_DOWN,c=>{const u=c.key.toLocaleLowerCase();if(this.mnemonics.has(u)){Ut.stop(c,!0);const f=this.mnemonics.get(u);if(f.length===1&&(f[0]instanceof OX&&f[0].container&&this.focusItemByElement(f[0].container),f[0].onClick(c)),f.length>1){const g=f.shift();g&&g.container&&(this.focusItemByElement(g.container),f.push(g)),this.mnemonics.set(u,f)}}})),jr&&this._register(oe(s,ke.KEY_DOWN,c=>{const u=new _n(c);u.equals(14)||u.equals(11)?(this.focusedItem=this.viewItems.length-1,this.focusNext(),Ut.stop(c,!0)):(u.equals(13)||u.equals(12))&&(this.focusedItem=0,this.focusPrevious(),Ut.stop(c,!0))})),this._register(oe(this.domNode,ke.MOUSE_OUT,c=>{const u=c.relatedTarget;ao(u,this.domNode)||(this.focusedItem=void 0,this.updateFocus(),c.stopPropagation())})),this._register(oe(this.actionsList,ke.MOUSE_OVER,c=>{let u=c.target;if(!(!u||!ao(u,this.actionsList)||u===this.actionsList)){for(;u.parentElement!==this.actionsList&&u.parentElement!==null;)u=u.parentElement;if(u.classList.contains("action-item")){const f=this.focusedItem;this.setFocusedItem(u),f!==this.focusedItem&&this.updateFocus()}}})),this._register(rn.addTarget(this.actionsList)),this._register(oe(this.actionsList,ln.Tap,c=>{let u=c.initialTarget;if(!(!u||!ao(u,this.actionsList)||u===this.actionsList)){for(;u.parentElement!==this.actionsList&&u.parentElement!==null;)u=u.parentElement;if(u.classList.contains("action-item")){const f=this.focusedItem;this.setFocusedItem(u),f!==this.focusedItem&&this.updateFocus()}}}));const r={parent:this};this.mnemonics=new Map,this.scrollableElement=this._register(new KD(s,{alwaysConsumeMouseWheel:!0,horizontal:2,vertical:3,verticalScrollbarSize:7,handleMouseWheel:!0,useShadows:!0}));const a=this.scrollableElement.getDomNode();a.style.position="",this.styleScrollElement(a,n),this._register(oe(s,ln.Change,c=>{Ut.stop(c,!0);const u=this.scrollableElement.getScrollPosition().scrollTop;this.scrollableElement.setScrollPosition({scrollTop:u-c.translationY})})),this._register(oe(a,ke.MOUSE_UP,c=>{c.preventDefault()}));const l=ft(e);s.style.maxHeight=`${Math.max(10,l.innerHeight-e.getBoundingClientRect().top-35)}px`,t=t.filter((c,u)=>{var f;return!((f=i.submenuIds)===null||f===void 0)&&f.has(c.id)?(console.warn(`Found submenu cycle: ${c.id}`),!1):!(c instanceof Os&&(u===t.length-1||u===0||t[u-1]instanceof Os))}),this.push(t,{icon:!0,label:!0,isMenu:!0}),e.appendChild(this.scrollableElement.getDomNode()),this.scrollableElement.scanDomNode(),this.viewItems.filter(c=>!(c instanceof FX)).forEach((c,u,f)=>{c.updatePositionInSet(u+1,f.length)})}initializeOrUpdateStyleSheet(e,t){this.styleSheet||(vR(e)?this.styleSheet=xl(e):(UC.globalStyleSheet||(UC.globalStyleSheet=xl()),this.styleSheet=UC.globalStyleSheet)),this.styleSheet.textContent=JAe(t,vR(e))}styleScrollElement(e,t){var i,n;const s=(i=t.foregroundColor)!==null&&i!==void 0?i:"",r=(n=t.backgroundColor)!==null&&n!==void 0?n:"",a=t.borderColor?`1px solid ${t.borderColor}`:"",l="5px",c=t.shadowColor?`0 2px 8px ${t.shadowColor}`:"";e.style.outline=a,e.style.borderRadius=l,e.style.color=s,e.style.backgroundColor=r,e.style.boxShadow=c}getContainer(){return this.scrollableElement.getDomNode()}get onScroll(){return this.scrollableElement.onScroll}focusItemByElement(e){const t=this.focusedItem;this.setFocusedItem(e),t!==this.focusedItem&&this.updateFocus()}setFocusedItem(e){for(let t=0;t<this.actionsList.children.length;t++){const i=this.actionsList.children[t];if(e===i){this.focusedItem=t;break}}}updateFocus(e){super.updateFocus(e,!0,!0),typeof this.focusedItem<"u"&&this.scrollableElement.setScrollPosition({scrollTop:Math.round(this.menuElement.scrollTop)})}doGetActionViewItem(e,t,i){if(e instanceof Os)return new FX(t.context,e,{icon:!0},this.menuStyles);if(e instanceof n1){const n=new OX(e,e.actions,i,{...t,submenuIds:new Set([...t.submenuIds||[],e.id])},this.menuStyles);if(t.enableMnemonics){const s=n.getMnemonic();if(s&&n.isEnabled()){let r=[];this.mnemonics.has(s)&&(r=this.mnemonics.get(s)),r.push(n),this.mnemonics.set(s,r)}}return n}else{const n={enableMnemonics:t.enableMnemonics,useEventAsContext:t.useEventAsContext};if(t.getKeyBinding){const r=t.getKeyBinding(e);if(r){const a=r.getLabel();a&&(n.keybinding=a)}}const s=new Noe(t.context,e,n,this.menuStyles);if(t.enableMnemonics){const r=s.getMnemonic();if(r&&s.isEnabled()){let a=[];this.mnemonics.has(r)&&(a=this.mnemonics.get(r)),a.push(s),this.mnemonics.set(r,a)}}return s}}}class Noe extends kd{constructor(e,t,i,n){if(i.isMenu=!0,super(t,t,i),this.menuStyle=n,this.options=i,this.options.icon=i.icon!==void 0?i.icon:!1,this.options.label=i.label!==void 0?i.label:!0,this.cssClass="",this.options.label&&i.enableMnemonics){const s=this.action.label;if(s){const r=E8.exec(s);r&&(this.mnemonic=(r[1]?r[1]:r[3]).toLocaleLowerCase())}}this.runOnceToEnableMouseUp=new Ui(()=>{this.element&&(this._register(oe(this.element,ke.MOUSE_UP,s=>{if(Ut.stop(s,!0),uc){if(new Wc(ft(this.element),s).rightButton)return;this.onClick(s)}else setTimeout(()=>{this.onClick(s)},0)})),this._register(oe(this.element,ke.CONTEXT_MENU,s=>{Ut.stop(s,!0)})))},100),this._register(this.runOnceToEnableMouseUp)}render(e){super.render(e),this.element&&(this.container=e,this.item=ge(this.element,ye("a.action-menu-item")),this._action.id===Os.ID?this.item.setAttribute("role","presentation"):(this.item.setAttribute("role","menuitem"),this.mnemonic&&this.item.setAttribute("aria-keyshortcuts",`${this.mnemonic}`)),this.check=ge(this.item,ye("span.menu-item-check"+pt.asCSSSelector(Ee.menuSelection))),this.check.setAttribute("role","none"),this.label=ge(this.item,ye("span.action-label")),this.options.label&&this.options.keybinding&&(ge(this.item,ye("span.keybinding")).textContent=this.options.keybinding),this.runOnceToEnableMouseUp.schedule(),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked(),this.applyStyle())}blur(){super.blur(),this.applyStyle()}focus(){var e;super.focus(),(e=this.item)===null||e===void 0||e.focus(),this.applyStyle()}updatePositionInSet(e,t){this.item&&(this.item.setAttribute("aria-posinset",`${e}`),this.item.setAttribute("aria-setsize",`${t}`))}updateLabel(){var e;if(this.label&&this.options.label){Zo(this.label);let t=rz(this.action.label);if(t){const i=XAe(t);this.options.enableMnemonics||(t=i),this.label.setAttribute("aria-label",i.replace(/&&/g,"&"));const n=E8.exec(t);if(n){t=hR(t),Q3.lastIndex=0;let s=Q3.exec(t);for(;s&&s[1];)s=Q3.exec(t);const r=a=>a.replace(/&amp;&amp;/g,"&amp;");s?this.label.append(MD(r(t.substr(0,s.index))," "),ye("u",{"aria-hidden":"true"},s[3]),uie(r(t.substr(s.index+s[0].length))," ")):this.label.innerText=r(t).trim(),(e=this.item)===null||e===void 0||e.setAttribute("aria-keyshortcuts",(n[1]?n[1]:n[3]).toLocaleLowerCase())}else this.label.innerText=t.replace(/&&/g,"&").trim()}}}updateTooltip(){}updateClass(){this.cssClass&&this.item&&this.item.classList.remove(...this.cssClass.split(" ")),this.options.icon&&this.label?(this.cssClass=this.action.class||"",this.label.classList.add("icon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" ")),this.updateEnabled()):this.label&&this.label.classList.remove("icon")}updateEnabled(){this.action.enabled?(this.element&&(this.element.classList.remove("disabled"),this.element.removeAttribute("aria-disabled")),this.item&&(this.item.classList.remove("disabled"),this.item.removeAttribute("aria-disabled"),this.item.tabIndex=0)):(this.element&&(this.element.classList.add("disabled"),this.element.setAttribute("aria-disabled","true")),this.item&&(this.item.classList.add("disabled"),this.item.setAttribute("aria-disabled","true")))}updateChecked(){if(!this.item)return;const e=this.action.checked;this.item.classList.toggle("checked",!!e),e!==void 0?(this.item.setAttribute("role","menuitemcheckbox"),this.item.setAttribute("aria-checked",e?"true":"false")):(this.item.setAttribute("role","menuitem"),this.item.setAttribute("aria-checked",""))}getMnemonic(){return this.mnemonic}applyStyle(){const e=this.element&&this.element.classList.contains("focused"),t=e&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor,i=e&&this.menuStyle.selectionBackgroundColor?this.menuStyle.selectionBackgroundColor:void 0,n=e&&this.menuStyle.selectionBorderColor?`1px solid ${this.menuStyle.selectionBorderColor}`:"",s=e&&this.menuStyle.selectionBorderColor?"-1px":"";this.item&&(this.item.style.color=t??"",this.item.style.backgroundColor=i??"",this.item.style.outline=n,this.item.style.outlineOffset=s),this.check&&(this.check.style.color=t??"")}}class OX extends Noe{constructor(e,t,i,n,s){super(e,e,n,s),this.submenuActions=t,this.parentData=i,this.submenuOptions=n,this.mysubmenu=null,this.submenuDisposables=this._register(new he),this.mouseOver=!1,this.expandDirection=n&&n.expandDirection!==void 0?n.expandDirection:{horizontal:rM.Right,vertical:I8.Below},this.showScheduler=new Ui(()=>{this.mouseOver&&(this.cleanupExistingSubmenu(!1),this.createSubmenu(!1))},250),this.hideScheduler=new Ui(()=>{this.element&&!ao(No(),this.element)&&this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))},750)}render(e){super.render(e),this.element&&(this.item&&(this.item.classList.add("monaco-submenu-item"),this.item.tabIndex=0,this.item.setAttribute("aria-haspopup","true"),this.updateAriaExpanded("false"),this.submenuIndicator=ge(this.item,ye("span.submenu-indicator"+pt.asCSSSelector(Ee.menuSubmenu))),this.submenuIndicator.setAttribute("aria-hidden","true")),this._register(oe(this.element,ke.KEY_UP,t=>{const i=new _n(t);(i.equals(17)||i.equals(3))&&(Ut.stop(t,!0),this.createSubmenu(!0))})),this._register(oe(this.element,ke.KEY_DOWN,t=>{const i=new _n(t);No()===this.item&&(i.equals(17)||i.equals(3))&&Ut.stop(t,!0)})),this._register(oe(this.element,ke.MOUSE_OVER,t=>{this.mouseOver||(this.mouseOver=!0,this.showScheduler.schedule())})),this._register(oe(this.element,ke.MOUSE_LEAVE,t=>{this.mouseOver=!1})),this._register(oe(this.element,ke.FOCUS_OUT,t=>{this.element&&!ao(No(),this.element)&&this.hideScheduler.schedule()})),this._register(this.parentData.parent.onScroll(()=>{this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))})))}updateEnabled(){}onClick(e){Ut.stop(e,!0),this.cleanupExistingSubmenu(!1),this.createSubmenu(!0)}cleanupExistingSubmenu(e){if(this.parentData.submenu&&(e||this.parentData.submenu!==this.mysubmenu)){try{this.parentData.submenu.dispose()}catch{}this.parentData.submenu=void 0,this.updateAriaExpanded("false"),this.submenuContainer&&(this.submenuDisposables.clear(),this.submenuContainer=void 0)}}calculateSubmenuMenuLayout(e,t,i,n){const s={top:0,left:0};return s.left=hC(e.width,t.width,{position:n.horizontal===rM.Right?0:1,offset:i.left,size:i.width}),s.left>=i.left&&s.left<i.left+i.width&&(i.left+10+t.width<=e.width&&(s.left=i.left+10),i.top+=10,i.height=0),s.top=hC(e.height,t.height,{position:0,offset:i.top,size:0}),s.top+t.height===i.top&&s.top+i.height+t.height<=e.height&&(s.top+=i.height),s}createSubmenu(e=!0){if(this.element)if(this.parentData.submenu)this.parentData.submenu.focus(!1);else{this.updateAriaExpanded("true"),this.submenuContainer=ge(this.element,ye("div.monaco-submenu")),this.submenuContainer.classList.add("menubar-menu-items-holder","context-view");const t=ft(this.parentData.parent.domNode).getComputedStyle(this.parentData.parent.domNode),i=parseFloat(t.paddingTop||"0")||0;this.submenuContainer.style.zIndex="1",this.submenuContainer.style.position="fixed",this.submenuContainer.style.top="0",this.submenuContainer.style.left="0",this.parentData.submenu=new UC(this.submenuContainer,this.submenuActions.length?this.submenuActions:[new vA],this.submenuOptions,this.menuStyle);const n=this.element.getBoundingClientRect(),s={top:n.top-i,left:n.left,height:n.height+2*i,width:n.width},r=this.submenuContainer.getBoundingClientRect(),a=ft(this.element),{top:l,left:c}=this.calculateSubmenuMenuLayout(new yi(a.innerWidth,a.innerHeight),yi.lift(r),s,this.expandDirection);this.submenuContainer.style.left=`${c-r.left}px`,this.submenuContainer.style.top=`${l-r.top}px`,this.submenuDisposables.add(oe(this.submenuContainer,ke.KEY_UP,u=>{new _n(u).equals(15)&&(Ut.stop(u,!0),this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0))})),this.submenuDisposables.add(oe(this.submenuContainer,ke.KEY_DOWN,u=>{new _n(u).equals(15)&&Ut.stop(u,!0)})),this.submenuDisposables.add(this.parentData.submenu.onDidCancel(()=>{this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0)})),this.parentData.submenu.focus(e),this.mysubmenu=this.parentData.submenu}}updateAriaExpanded(e){var t;this.item&&((t=this.item)===null||t===void 0||t.setAttribute("aria-expanded",e))}applyStyle(){super.applyStyle();const t=this.element&&this.element.classList.contains("focused")&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor;this.submenuIndicator&&(this.submenuIndicator.style.color=t??"")}dispose(){super.dispose(),this.hideScheduler.dispose(),this.mysubmenu&&(this.mysubmenu.dispose(),this.mysubmenu=null),this.submenuContainer&&(this.submenuContainer=void 0)}}class FX extends x1{constructor(e,t,i,n){super(e,t,i),this.menuStyles=n}render(e){super.render(e),this.label&&(this.label.style.borderBottomColor=this.menuStyles.separatorColor?`${this.menuStyles.separatorColor}`:"")}}function XAe(o){const e=E8,t=e.exec(o);if(!t)return o;const i=!t[1];return o.replace(e,i?"$2$3":"").trim()}function BX(o){const e=aie()[o.id];return`.codicon-${o.id}:before { content: '\\${e.toString(16)}'; }`}function JAe(o,e){let t=`
.monaco-menu {
	font-size: 13px;
	border-radius: 5px;
	min-width: 160px;
}

${BX(Ee.menuSelection)}
${BX(Ee.menuSubmenu)}

.monaco-menu .monaco-action-bar {
	text-align: right;
	overflow: hidden;
	white-space: nowrap;
}

.monaco-menu .monaco-action-bar .actions-container {
	display: flex;
	margin: 0 auto;
	padding: 0;
	width: 100%;
	justify-content: flex-end;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: inline-block;
}

.monaco-menu .monaco-action-bar.reverse .actions-container {
	flex-direction: row-reverse;
}

.monaco-menu .monaco-action-bar .action-item {
	cursor: pointer;
	display: inline-block;
	transition: transform 50ms ease;
	position: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */
}

.monaco-menu .monaco-action-bar .action-item.disabled {
	cursor: default;
}

.monaco-menu .monaco-action-bar .action-item .icon,
.monaco-menu .monaco-action-bar .action-item .codicon {
	display: inline-block;
}

.monaco-menu .monaco-action-bar .action-item .codicon {
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar .action-label {
	font-size: 11px;
	margin-right: 4px;
}

.monaco-menu .monaco-action-bar .action-item.disabled .action-label,
.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {
	color: var(--vscode-disabledForeground);
}

/* Vertical actions */

.monaco-menu .monaco-action-bar.vertical {
	text-align: left;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	display: block;
	border-bottom: 1px solid var(--vscode-menu-separatorBackground);
	padding-top: 1px;
	padding: 30px;
}

.monaco-menu .secondary-actions .monaco-action-bar .action-label {
	margin-left: 6px;
}

/* Action Items */
.monaco-menu .monaco-action-bar .action-item.select-container {
	overflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */
	flex: 1;
	max-width: 170px;
	min-width: 60px;
	display: flex;
	align-items: center;
	justify-content: center;
	margin-right: 10px;
}

.monaco-menu .monaco-action-bar.vertical {
	margin-left: 0;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	padding: 0;
	transform: none;
	display: flex;
}

.monaco-menu .monaco-action-bar.vertical .action-item.active {
	transform: none;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	flex: 1 1 auto;
	display: flex;
	height: 2em;
	align-items: center;
	position: relative;
	margin: 0 4px;
	border-radius: 4px;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item:hover .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-menu-item:focus .keybinding {
	opacity: unset;
}

.monaco-menu .monaco-action-bar.vertical .action-label {
	flex: 1 1 auto;
	text-decoration: none;
	padding: 0 1em;
	background: none;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .keybinding,
.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	display: inline-block;
	flex: 2 1 auto;
	padding: 0 1em;
	text-align: right;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {
	font-size: 16px !important;
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {
	margin-left: auto;
	margin-right: -20px;
}

.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {
	opacity: 0.4;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {
	display: inline-block;
	box-sizing: border-box;
	margin: 0;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	position: static;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {
	position: absolute;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	width: 100%;
	height: 0px !important;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {
	padding: 0.7em 1em 0.1em 1em;
	font-weight: bold;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label:hover {
	color: inherit;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	position: absolute;
	visibility: hidden;
	width: 1em;
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {
	visibility: visible;
	display: flex;
	align-items: center;
	justify-content: center;
}

/* Context Menu */

.context-view.monaco-menu-container {
	outline: 0;
	border: none;
	animation: fadeIn 0.083s linear;
	-webkit-app-region: no-drag;
}

.context-view.monaco-menu-container :focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {
	outline: 0;
}

.hc-black .context-view.monaco-menu-container,
.hc-light .context-view.monaco-menu-container,
:host-context(.hc-black) .context-view.monaco-menu-container,
:host-context(.hc-light) .context-view.monaco-menu-container {
	box-shadow: none;
}

.hc-black .monaco-menu .monaco-action-bar.vertical .action-item.focused,
.hc-light .monaco-menu .monaco-action-bar.vertical .action-item.focused,
:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused,
:host-context(.hc-light) .monaco-menu .monaco-action-bar.vertical .action-item.focused {
	background: none;
}

/* Vertical Action Bar Styles */

.monaco-menu .monaco-action-bar.vertical {
	padding: 4px 0;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	height: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),
.monaco-menu .monaco-action-bar.vertical .keybinding {
	font-size: inherit;
	padding: 0 2em;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	font-size: inherit;
	width: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	font-size: inherit;
	margin: 5px 0 !important;
	padding: 0;
	border-radius: 0;
}

.linux .monaco-menu .monaco-action-bar.vertical .action-label.separator,
:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {
	margin-left: 0;
	margin-right: 0;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	font-size: 60%;
	padding: 0 1.8em;
}

.linux .monaco-menu .monaco-action-bar.vertical .submenu-indicator,
:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
	mask-size: 10px 10px;
	-webkit-mask-size: 10px 10px;
}

.monaco-menu .action-item {
	cursor: default;
}`;if(e){t+=`
			/* Arrows */
			.monaco-scrollable-element > .scrollbar > .scra {
				cursor: pointer;
				font-size: 11px !important;
			}

			.monaco-scrollable-element > .visible {
				opacity: 1;

				/* Background rule added for IE9 - to allow clicks on dom node */
				background:rgba(0,0,0,0);

				transition: opacity 100ms linear;
			}
			.monaco-scrollable-element > .invisible {
				opacity: 0;
				pointer-events: none;
			}
			.monaco-scrollable-element > .invisible.fade {
				transition: opacity 800ms linear;
			}

			/* Scrollable Content Inset Shadow */
			.monaco-scrollable-element > .shadow {
				position: absolute;
				display: none;
			}
			.monaco-scrollable-element > .shadow.top {
				display: block;
				top: 0;
				left: 3px;
				height: 3px;
				width: 100%;
			}
			.monaco-scrollable-element > .shadow.left {
				display: block;
				top: 3px;
				left: 0;
				height: 100%;
				width: 3px;
			}
			.monaco-scrollable-element > .shadow.top-left-corner {
				display: block;
				top: 0;
				left: 0;
				height: 3px;
				width: 3px;
			}
		`;const i=o.scrollbarShadow;i&&(t+=`
				.monaco-scrollable-element > .shadow.top {
					box-shadow: ${i} 0 6px 6px -6px inset;
				}

				.monaco-scrollable-element > .shadow.left {
					box-shadow: ${i} 6px 0 6px -6px inset;
				}

				.monaco-scrollable-element > .shadow.top.left {
					box-shadow: ${i} 6px 6px 6px -6px inset;
				}
			`);const n=o.scrollbarSliderBackground;n&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider {
					background: ${n};
				}
			`);const s=o.scrollbarSliderHoverBackground;s&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider:hover {
					background: ${s};
				}
			`);const r=o.scrollbarSliderActiveBackground;r&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider.active {
					background: ${r};
				}
			`)}return t}class ePe{constructor(e,t,i,n){this.contextViewService=e,this.telemetryService=t,this.notificationService=i,this.keybindingService=n,this.focusToReturn=null,this.lastContainer=null,this.block=null,this.blockDisposable=null,this.options={blockMouse:!0}}configure(e){this.options=e}showContextMenu(e){const t=e.getActions();if(!t.length)return;this.focusToReturn=No();let i;const n=e.domForShadowRoot instanceof HTMLElement?e.domForShadowRoot:void 0;this.contextViewService.showContextView({getAnchor:()=>e.getAnchor(),canRelayout:!1,anchorAlignment:e.anchorAlignment,anchorAxisAlignment:e.anchorAxisAlignment,render:s=>{var r;this.lastContainer=s;const a=e.getMenuClassName?e.getMenuClassName():"";a&&(s.className+=" "+a),this.options.blockMouse&&(this.block=s.appendChild(ye(".context-view-block")),this.block.style.position="fixed",this.block.style.cursor="initial",this.block.style.left="0",this.block.style.top="0",this.block.style.width="100%",this.block.style.height="100%",this.block.style.zIndex="-1",(r=this.blockDisposable)===null||r===void 0||r.dispose(),this.blockDisposable=oe(this.block,ke.MOUSE_DOWN,f=>f.stopPropagation()));const l=new he,c=e.actionRunner||new Rv;c.onWillRun(f=>this.onActionRun(f,!e.skipTelemetry),this,l),c.onDidRun(this.onDidActionRun,this,l),i=new UC(s,t,{actionViewItemProvider:e.getActionViewItem,context:e.getActionsContext?e.getActionsContext():null,actionRunner:c,getKeyBinding:e.getKeyBinding?e.getKeyBinding:f=>this.keybindingService.lookupKeybinding(f.id)},ZAe),i.onDidCancel(()=>this.contextViewService.hideContextView(!0),null,l),i.onDidBlur(()=>this.contextViewService.hideContextView(!0),null,l);const u=ft(s);return l.add(oe(u,ke.BLUR,()=>this.contextViewService.hideContextView(!0))),l.add(oe(u,ke.MOUSE_DOWN,f=>{if(f.defaultPrevented)return;const g=new Wc(u,f);let p=g.target;if(!g.rightButton){for(;p;){if(p===s)return;p=p.parentElement}this.contextViewService.hideContextView(!0)}})),$c(l,i)},focus:()=>{i==null||i.focus(!!e.autoSelectFirstItem)},onHide:s=>{var r,a,l;(r=e.onHide)===null||r===void 0||r.call(e,!!s),this.block&&(this.block.remove(),this.block=null),(a=this.blockDisposable)===null||a===void 0||a.dispose(),this.blockDisposable=null,this.lastContainer&&(No()===this.lastContainer||ao(No(),this.lastContainer))&&((l=this.focusToReturn)===null||l===void 0||l.focus()),this.lastContainer=null}},n,!!n)}onActionRun(e,t){t&&this.telemetryService.publicLog2("workbenchActionExecuted",{id:e.action.id,from:"contextMenu"}),this.contextViewService.hideContextView(!1)}onDidActionRun(e){e.error&&!eu(e.error)&&this.notificationService.error(e.error)}}var tPe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},T0=function(o,e){return function(t,i){e(t,i,o)}};let T8=class extends J{get contextMenuHandler(){return this._contextMenuHandler||(this._contextMenuHandler=new ePe(this.contextViewService,this.telemetryService,this.notificationService,this.keybindingService)),this._contextMenuHandler}constructor(e,t,i,n,s,r){super(),this.telemetryService=e,this.notificationService=t,this.contextViewService=i,this.keybindingService=n,this.menuService=s,this.contextKeyService=r,this._contextMenuHandler=void 0,this._onDidShowContextMenu=this._store.add(new Y),this.onDidShowContextMenu=this._onDidShowContextMenu.event,this._onDidHideContextMenu=this._store.add(new Y)}configure(e){this.contextMenuHandler.configure(e)}showContextMenu(e){e=N8.transform(e,this.menuService,this.contextKeyService),this.contextMenuHandler.showContextMenu({...e,onHide:t=>{var i;(i=e.onHide)===null||i===void 0||i.call(e,t),this._onDidHideContextMenu.fire()}}),If.getInstance().resetKeyStatus(),this._onDidShowContextMenu.fire()}};T8=tPe([T0(0,pr),T0(1,ys),T0(2,gg),T0(3,Bi),T0(4,Nl),T0(5,bt)],T8);var N8;(function(o){function e(i){return i&&i.menuId instanceof P}function t(i,n,s){if(!e(i))return i;const{menuId:r,menuActionOptions:a,contextKeyService:l}=i;return{...i,getActions:()=>{const c=[];if(r){const u=n.createMenu(r,l??s);QAe(u,a,c),u.dispose()}return i.getActions?Os.join(i.getActions(),c):c}}}o.transform=t})(N8||(N8={}));var aM;(function(o){o[o.API=0]="API",o[o.USER=1]="USER"})(aM||(aM={}));var fz=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},lM=function(o,e){return function(t,i){e(t,i,o)}};let R8=class{constructor(e){this._commandService=e}async open(e,t){if(!KV(e,Pt.command))return!1;if(!(t!=null&&t.allowCommands)||(typeof e=="string"&&(e=gt.parse(e)),Array.isArray(t.allowCommands)&&!t.allowCommands.includes(e.path)))return!0;let i=[];try{i=l8(decodeURIComponent(e.query))}catch{try{i=l8(e.query)}catch{}}return Array.isArray(i)||(i=[i]),await this._commandService.executeCommand(e.path,...i),!0}};R8=fz([lM(0,Un)],R8);let M8=class{constructor(e){this._editorService=e}async open(e,t){typeof e=="string"&&(e=gt.parse(e));const{selection:i,uri:n}=QNe(e);return e=n,e.scheme===Pt.file&&(e=CIe(e)),await this._editorService.openCodeEditor({resource:e,options:{selection:i,source:t!=null&&t.fromUserGesture?aM.USER:aM.API,...t==null?void 0:t.editorOptions}},this._editorService.getFocusedCodeEditor(),t==null?void 0:t.openToSide),!0}};M8=fz([lM(0,gi)],M8);let A8=class{constructor(e,t){this._openers=new Wr,this._validators=new Wr,this._resolvers=new Wr,this._resolvedUriTargets=new ds(i=>i.with({path:null,fragment:null,query:null}).toString()),this._externalOpeners=new Wr,this._defaultExternalOpener={openExternal:async i=>(EY(i,Pt.http,Pt.https)?zie(i):Hi.location.href=i,!0)},this._openers.push({open:async(i,n)=>n!=null&&n.openExternal||EY(i,Pt.mailto,Pt.http,Pt.https,Pt.vsls)?(await this._doOpenExternal(i,n),!0):!1}),this._openers.push(new R8(t)),this._openers.push(new M8(e))}registerOpener(e){return{dispose:this._openers.unshift(e)}}async open(e,t){var i;const n=typeof e=="string"?gt.parse(e):e,s=(i=this._resolvedUriTargets.get(n))!==null&&i!==void 0?i:e;for(const r of this._validators)if(!await r.shouldOpen(s,t))return!1;for(const r of this._openers)if(await r.open(e,t))return!0;return!1}async resolveExternalUri(e,t){for(const i of this._resolvers)try{const n=await i.resolveExternalUri(e,t);if(n)return this._resolvedUriTargets.has(n.resolved)||this._resolvedUriTargets.set(n.resolved,e),n}catch{}throw new Error("Could not resolve external URI: "+e.toString())}async _doOpenExternal(e,t){const i=typeof e=="string"?gt.parse(e):e;let n;try{n=(await this.resolveExternalUri(i,t)).resolved}catch{n=i}let s;if(typeof e=="string"&&i.toString()===n.toString()?s=e:s=encodeURI(n.toString(!0)),t!=null&&t.allowContributedOpeners){const r=typeof(t==null?void 0:t.allowContributedOpeners)=="string"?t==null?void 0:t.allowContributedOpeners:void 0;for(const a of this._externalOpeners)if(await a.openExternal(s,{sourceUri:i,preferredOpenerId:r},Yt.None))return!0}return this._defaultExternalOpener.openExternal(s,{sourceUri:i},Yt.None)}dispose(){this._validators.clear()}};A8=fz([lM(0,gi),lM(1,Un)],A8);const Cc=Zt("editorWorkerService");var es;(function(o){o[o.Hint=1]="Hint",o[o.Info=2]="Info",o[o.Warning=4]="Warning",o[o.Error=8]="Error"})(es||(es={}));(function(o){function e(r,a){return a-r}o.compare=e;const t=Object.create(null);t[o.Error]=v("sev.error","Error"),t[o.Warning]=v("sev.warning","Warning"),t[o.Info]=v("sev.info","Info");function i(r){return t[r]||""}o.toString=i;function n(r){switch(r){case cs.Error:return o.Error;case cs.Warning:return o.Warning;case cs.Info:return o.Info;case cs.Ignore:return o.Hint}}o.fromSeverity=n;function s(r){switch(r){case o.Error:return cs.Error;case o.Warning:return cs.Warning;case o.Info:return cs.Info;case o.Hint:return cs.Ignore}}o.toSeverity=s})(es||(es={}));var cM;(function(o){const e="";function t(n){return i(n,!0)}o.makeKey=t;function i(n,s){const r=[e];return n.source?r.push(n.source.replace("","\\")):r.push(e),n.code?typeof n.code=="string"?r.push(n.code.replace("","\\")):r.push(n.code.value.replace("","\\")):r.push(e),n.severity!==void 0&&n.severity!==null?r.push(es.toString(n.severity)):r.push(e),n.message&&s?r.push(n.message.replace("","\\")):r.push(e),n.startLineNumber!==void 0&&n.startLineNumber!==null?r.push(n.startLineNumber.toString()):r.push(e),n.startColumn!==void 0&&n.startColumn!==null?r.push(n.startColumn.toString()):r.push(e),n.endLineNumber!==void 0&&n.endLineNumber!==null?r.push(n.endLineNumber.toString()):r.push(e),n.endColumn!==void 0&&n.endColumn!==null?r.push(n.endColumn.toString()):r.push(e),r.push(e),r.join("")}o.makeKeyOptionalMessage=i})(cM||(cM={}));const kh=Zt("markerService");function iPe(o,e){const t=[],i=[];for(const n of o)e.has(n)||t.push(n);for(const n of e)o.has(n)||i.push(n);return{removed:t,added:i}}function nPe(o,e){const t=new Set;for(const i of e)o.has(i)&&t.add(i);return t}var sPe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},WX=function(o,e){return function(t,i){e(t,i,o)}};let P8=class extends J{constructor(e,t){super(),this._markerService=t,this._onDidChangeMarker=this._register(new Y),this._markerDecorations=new ds,e.getModels().forEach(i=>this._onModelAdded(i)),this._register(e.onModelAdded(this._onModelAdded,this)),this._register(e.onModelRemoved(this._onModelRemoved,this)),this._register(this._markerService.onMarkerChanged(this._handleMarkerChange,this))}dispose(){super.dispose(),this._markerDecorations.forEach(e=>e.dispose()),this._markerDecorations.clear()}getMarker(e,t){const i=this._markerDecorations.get(e);return i&&i.getMarker(t)||null}_handleMarkerChange(e){e.forEach(t=>{const i=this._markerDecorations.get(t);i&&this._updateDecorations(i)})}_onModelAdded(e){const t=new oPe(e);this._markerDecorations.set(e.uri,t),this._updateDecorations(t)}_onModelRemoved(e){var t;const i=this._markerDecorations.get(e.uri);i&&(i.dispose(),this._markerDecorations.delete(e.uri)),(e.uri.scheme===Pt.inMemory||e.uri.scheme===Pt.internal||e.uri.scheme===Pt.vscode)&&((t=this._markerService)===null||t===void 0||t.read({resource:e.uri}).map(n=>n.owner).forEach(n=>this._markerService.remove(n,[e.uri])))}_updateDecorations(e){const t=this._markerService.read({resource:e.model.uri,take:500});e.update(t)&&this._onDidChangeMarker.fire(e.model)}};P8=sPe([WX(0,Fn),WX(1,kh)],P8);class oPe extends J{constructor(e){super(),this.model=e,this._map=new zye,this._register(lt(()=>{this.model.deltaDecorations([...this._map.values()],[]),this._map.clear()}))}update(e){const{added:t,removed:i}=iPe(new Set(this._map.keys()),new Set(e));if(t.length===0&&i.length===0)return!1;const n=i.map(a=>this._map.get(a)),s=t.map(a=>({range:this._createDecorationRange(this.model,a),options:this._createDecorationOption(a)})),r=this.model.deltaDecorations(n,s);for(const a of i)this._map.delete(a);for(let a=0;a<r.length;a++)this._map.set(t[a],r[a]);return!0}getMarker(e){return this._map.getKey(e.id)}_createDecorationRange(e,t){let i=A.lift(t);if(t.severity===es.Hint&&!this._hasMarkerTag(t,1)&&!this._hasMarkerTag(t,2)&&(i=i.setEndPosition(i.startLineNumber,i.startColumn+2)),i=e.validateRange(i),i.isEmpty()){const n=e.getLineLastNonWhitespaceColumn(i.startLineNumber)||e.getLineMaxColumn(i.startLineNumber);if(n===1||i.endColumn>=n)return i;const s=e.getWordAtPosition(i.getStartPosition());s&&(i=new A(i.startLineNumber,s.startColumn,i.endLineNumber,s.endColumn))}else if(t.endColumn===Number.MAX_VALUE&&t.startColumn===1&&i.startLineNumber===i.endLineNumber){const n=e.getLineFirstNonWhitespaceColumn(t.startLineNumber);n<i.endColumn&&(i=new A(i.startLineNumber,n,i.endLineNumber,i.endColumn),t.startColumn=n)}return i}_createDecorationOption(e){let t,i,n,s,r;switch(e.severity){case es.Hint:this._hasMarkerTag(e,2)?t=void 0:this._hasMarkerTag(e,1)?t="squiggly-unnecessary":t="squiggly-hint",n=0;break;case es.Info:t="squiggly-info",i=Xn(rke),n=10,r={color:Xn(QLe),position:1};break;case es.Warning:t="squiggly-warning",i=Xn(oke),n=20,r={color:Xn(XLe),position:1};break;case es.Error:default:t="squiggly-error",i=Xn(ske),n=30,r={color:Xn(JLe),position:1};break}return e.tags&&(e.tags.indexOf(1)!==-1&&(s="squiggly-inline-unnecessary"),e.tags.indexOf(2)!==-1&&(s="squiggly-inline-deprecated")),{description:"marker-decoration",stickiness:1,className:t,showIfCollapsed:!0,overviewRuler:{color:i,position:kl.Right},minimap:r,zIndex:n,inlineClassName:s}}_hasMarkerTag(e,t){return e.tags?e.tags.indexOf(t)>=0:!1}}var rPe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},SS=function(o,e){return function(t,i){e(t,i,o)}},H0;function A_(o){return o.toString()}class aPe{constructor(e,t,i){this.model=e,this._modelEventListeners=new he,this.model=e,this._modelEventListeners.add(e.onWillDispose(()=>t(e))),this._modelEventListeners.add(e.onDidChangeLanguage(n=>i(e,n)))}dispose(){this._modelEventListeners.dispose()}}const lPe=jr||Kt?1:2;class cPe{constructor(e,t,i,n,s,r,a,l){this.uri=e,this.initialUndoRedoSnapshot=t,this.time=i,this.sharesUndoRedoStack=n,this.heapSize=s,this.sha1=r,this.versionId=a,this.alternativeVersionId=l}}let dM=H0=class extends J{constructor(e,t,i,n,s){super(),this._configurationService=e,this._resourcePropertiesService=t,this._undoRedoService=i,this._languageService=n,this._languageConfigurationService=s,this._onModelAdded=this._register(new Y),this.onModelAdded=this._onModelAdded.event,this._onModelRemoved=this._register(new Y),this.onModelRemoved=this._onModelRemoved.event,this._onModelModeChanged=this._register(new Y),this.onModelLanguageChanged=this._onModelModeChanged.event,this._modelCreationOptionsByLanguageAndResource=Object.create(null),this._models={},this._disposedModels=new Map,this._disposedModelsHeapSize=0,this._register(this._configurationService.onDidChangeConfiguration(r=>this._updateModelOptions(r))),this._updateModelOptions(void 0)}static _readModelOptions(e,t){var i;let n=Ko.tabSize;if(e.editor&&typeof e.editor.tabSize<"u"){const p=parseInt(e.editor.tabSize,10);isNaN(p)||(n=p),n<1&&(n=1)}let s="tabSize";if(e.editor&&typeof e.editor.indentSize<"u"&&e.editor.indentSize!=="tabSize"){const p=parseInt(e.editor.indentSize,10);isNaN(p)||(s=Math.max(p,1))}let r=Ko.insertSpaces;e.editor&&typeof e.editor.insertSpaces<"u"&&(r=e.editor.insertSpaces==="false"?!1:!!e.editor.insertSpaces);let a=lPe;const l=e.eol;l===`\r
`?a=2:l===`
`&&(a=1);let c=Ko.trimAutoWhitespace;e.editor&&typeof e.editor.trimAutoWhitespace<"u"&&(c=e.editor.trimAutoWhitespace==="false"?!1:!!e.editor.trimAutoWhitespace);let u=Ko.detectIndentation;e.editor&&typeof e.editor.detectIndentation<"u"&&(u=e.editor.detectIndentation==="false"?!1:!!e.editor.detectIndentation);let f=Ko.largeFileOptimizations;e.editor&&typeof e.editor.largeFileOptimizations<"u"&&(f=e.editor.largeFileOptimizations==="false"?!1:!!e.editor.largeFileOptimizations);let g=Ko.bracketPairColorizationOptions;return!((i=e.editor)===null||i===void 0)&&i.bracketPairColorization&&typeof e.editor.bracketPairColorization=="object"&&(g={enabled:!!e.editor.bracketPairColorization.enabled,independentColorPoolPerBracketType:!!e.editor.bracketPairColorization.independentColorPoolPerBracketType}),{isForSimpleWidget:t,tabSize:n,indentSize:s,insertSpaces:r,detectIndentation:u,defaultEOL:a,trimAutoWhitespace:c,largeFileOptimizations:f,bracketPairColorizationOptions:g}}_getEOL(e,t){if(e)return this._resourcePropertiesService.getEOL(e,t);const i=this._configurationService.getValue("files.eol",{overrideIdentifier:t});return i&&typeof i=="string"&&i!=="auto"?i:Va===3||Va===2?`
`:`\r
`}_shouldRestoreUndoStack(){const e=this._configurationService.getValue("files.restoreUndoStack");return typeof e=="boolean"?e:!0}getCreationOptions(e,t,i){const n=typeof e=="string"?e:e.languageId;let s=this._modelCreationOptionsByLanguageAndResource[n+t];if(!s){const r=this._configurationService.getValue("editor",{overrideIdentifier:n,resource:t}),a=this._getEOL(t,n);s=H0._readModelOptions({editor:r,eol:a},i),this._modelCreationOptionsByLanguageAndResource[n+t]=s}return s}_updateModelOptions(e){const t=this._modelCreationOptionsByLanguageAndResource;this._modelCreationOptionsByLanguageAndResource=Object.create(null);const i=Object.keys(this._models);for(let n=0,s=i.length;n<s;n++){const r=i[n],a=this._models[r],l=a.model.getLanguageId(),c=a.model.uri;if(e&&!e.affectsConfiguration("editor",{overrideIdentifier:l,resource:c})&&!e.affectsConfiguration("files.eol",{overrideIdentifier:l,resource:c}))continue;const u=t[l+c],f=this.getCreationOptions(l,c,a.model.isForSimpleWidget);H0._setModelOptionsForModel(a.model,f,u)}}static _setModelOptionsForModel(e,t,i){i&&i.defaultEOL!==t.defaultEOL&&e.getLineCount()===1&&e.setEOL(t.defaultEOL===1?0:1),!(i&&i.detectIndentation===t.detectIndentation&&i.insertSpaces===t.insertSpaces&&i.tabSize===t.tabSize&&i.indentSize===t.indentSize&&i.trimAutoWhitespace===t.trimAutoWhitespace&&wl(i.bracketPairColorizationOptions,t.bracketPairColorizationOptions))&&(t.detectIndentation?(e.detectIndentation(t.insertSpaces,t.tabSize),e.updateOptions({trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions})):e.updateOptions({insertSpaces:t.insertSpaces,tabSize:t.tabSize,indentSize:t.indentSize,trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions}))}_insertDisposedModel(e){this._disposedModels.set(A_(e.uri),e),this._disposedModelsHeapSize+=e.heapSize}_removeDisposedModel(e){const t=this._disposedModels.get(A_(e));return t&&(this._disposedModelsHeapSize-=t.heapSize),this._disposedModels.delete(A_(e)),t}_ensureDisposedModelsHeapSize(e){if(this._disposedModelsHeapSize>e){const t=[];for(this._disposedModels.forEach(i=>{i.sharesUndoRedoStack||t.push(i)}),t.sort((i,n)=>i.time-n.time);t.length>0&&this._disposedModelsHeapSize>e;){const i=t.shift();this._removeDisposedModel(i.uri),i.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(i.initialUndoRedoSnapshot)}}}_createModelData(e,t,i,n){const s=this.getCreationOptions(t,i,n),r=new ph(e,t,s,i,this._undoRedoService,this._languageService,this._languageConfigurationService);if(i&&this._disposedModels.has(A_(i))){const c=this._removeDisposedModel(i),u=this._undoRedoService.getElements(i),f=this._getSHA1Computer(),g=f.canComputeSHA1(r)?f.computeSHA1(r)===c.sha1:!1;if(g||c.sharesUndoRedoStack){for(const p of u.past)mf(p)&&p.matchesResource(i)&&p.setModel(r);for(const p of u.future)mf(p)&&p.matchesResource(i)&&p.setModel(r);this._undoRedoService.setElementsValidFlag(i,!0,p=>mf(p)&&p.matchesResource(i)),g&&(r._overwriteVersionId(c.versionId),r._overwriteAlternativeVersionId(c.alternativeVersionId),r._overwriteInitialUndoRedoSnapshot(c.initialUndoRedoSnapshot))}else c.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(c.initialUndoRedoSnapshot)}const a=A_(r.uri);if(this._models[a])throw new Error("ModelService: Cannot add model because it already exists!");const l=new aPe(r,c=>this._onWillDispose(c),(c,u)=>this._onDidChangeLanguage(c,u));return this._models[a]=l,l}createModel(e,t,i,n=!1){let s;return t?s=this._createModelData(e,t,i,n):s=this._createModelData(e,yl,i,n),this._onModelAdded.fire(s.model),s.model}getModels(){const e=[],t=Object.keys(this._models);for(let i=0,n=t.length;i<n;i++){const s=t[i];e.push(this._models[s].model)}return e}getModel(e){const t=A_(e),i=this._models[t];return i?i.model:null}_schemaShouldMaintainUndoRedoElements(e){return e.scheme===Pt.file||e.scheme===Pt.vscodeRemote||e.scheme===Pt.vscodeUserData||e.scheme===Pt.vscodeNotebookCell||e.scheme==="fake-fs"}_onWillDispose(e){const t=A_(e.uri),i=this._models[t],n=this._undoRedoService.getUriComparisonKey(e.uri)!==e.uri.toString();let s=!1,r=0;if(n||this._shouldRestoreUndoStack()&&this._schemaShouldMaintainUndoRedoElements(e.uri)){const c=this._undoRedoService.getElements(e.uri);if(c.past.length>0||c.future.length>0){for(const u of c.past)mf(u)&&u.matchesResource(e.uri)&&(s=!0,r+=u.heapSize(e.uri),u.setModel(e.uri));for(const u of c.future)mf(u)&&u.matchesResource(e.uri)&&(s=!0,r+=u.heapSize(e.uri),u.setModel(e.uri))}}const a=H0.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK,l=this._getSHA1Computer();if(s)if(!n&&(r>a||!l.canComputeSHA1(e))){const c=i.model.getInitialUndoRedoSnapshot();c!==null&&this._undoRedoService.restoreSnapshot(c)}else this._ensureDisposedModelsHeapSize(a-r),this._undoRedoService.setElementsValidFlag(e.uri,!1,c=>mf(c)&&c.matchesResource(e.uri)),this._insertDisposedModel(new cPe(e.uri,i.model.getInitialUndoRedoSnapshot(),Date.now(),n,r,l.computeSHA1(e),e.getVersionId(),e.getAlternativeVersionId()));else if(!n){const c=i.model.getInitialUndoRedoSnapshot();c!==null&&this._undoRedoService.restoreSnapshot(c)}delete this._models[t],i.dispose(),delete this._modelCreationOptionsByLanguageAndResource[e.getLanguageId()+e.uri],this._onModelRemoved.fire(e)}_onDidChangeLanguage(e,t){const i=t.oldLanguage,n=e.getLanguageId(),s=this.getCreationOptions(i,e.uri,e.isForSimpleWidget),r=this.getCreationOptions(n,e.uri,e.isForSimpleWidget);H0._setModelOptionsForModel(e,r,s),this._onModelModeChanged.fire({model:e,oldLanguageId:i})}_getSHA1Computer(){return new gP}};dM.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK=20*1024*1024;dM=H0=rPe([SS(0,$t),SS(1,wne),SS(2,YA),SS(3,xn),SS(4,dn)],dM);class gP{canComputeSHA1(e){return e.getValueLength()<=gP.MAX_MODEL_SIZE}computeSHA1(e){const t=new gA,i=e.createSnapshot();let n;for(;n=i.read();)t.update(n);return t.digest()}}gP.MAX_MODEL_SIZE=10*1024*1024;var O8;(function(o){o[o.PRESERVE=0]="PRESERVE",o[o.LAST=1]="LAST"})(O8||(O8={}));const fb={Quickaccess:"workbench.contributions.quickaccess"};class dPe{constructor(){this.providers=[],this.defaultProvider=void 0}registerQuickAccessProvider(e){return e.prefix.length===0?this.defaultProvider=e:this.providers.push(e),this.providers.sort((t,i)=>i.prefix.length-t.prefix.length),lt(()=>{this.providers.splice(this.providers.indexOf(e),1),this.defaultProvider===e&&(this.defaultProvider=void 0)})}getQuickAccessProviders(){return Ud([this.defaultProvider,...this.providers])}getQuickAccessProvider(e){return e&&this.providers.find(i=>e.startsWith(i.prefix))||void 0||this.defaultProvider}}$n.add(fb.Quickaccess,new dPe);const uPe={ctrlCmd:!1,alt:!1};var D1;(function(o){o[o.Blur=1]="Blur",o[o.Gesture=2]="Gesture",o[o.Other=3]="Other"})(D1||(D1={}));var yd;(function(o){o[o.NONE=0]="NONE",o[o.FIRST=1]="FIRST",o[o.SECOND=2]="SECOND",o[o.LAST=3]="LAST"})(yd||(yd={}));const ou=Zt("quickInputService");var hPe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},VX=function(o,e){return function(t,i){e(t,i,o)}};let F8=class extends J{constructor(e,t){super(),this.quickInputService=e,this.instantiationService=t,this.registry=$n.as(fb.Quickaccess),this.mapProviderToDescriptor=new Map,this.lastAcceptedPickerValues=new Map,this.visibleQuickAccess=void 0}show(e="",t){this.doShowOrPick(e,!1,t)}doShowOrPick(e,t,i){var n,s,r;const[a,l]=this.getOrInstantiateProvider(e),c=this.visibleQuickAccess,u=c==null?void 0:c.descriptor;if(c&&l&&u===l){e!==l.prefix&&!(i!=null&&i.preserveValue)&&(c.picker.value=e),this.adjustValueSelection(c.picker,l,i);return}if(l&&!(i!=null&&i.preserveValue)){let S;if(c&&u&&u!==l){const L=c.value.substr(u.prefix.length);L&&(S=`${l.prefix}${L}`)}if(!S){const L=a==null?void 0:a.defaultFilterValue;L===O8.LAST?S=this.lastAcceptedPickerValues.get(l):typeof L=="string"&&(S=`${l.prefix}${L}`)}typeof S=="string"&&(e=S)}const f=(n=c==null?void 0:c.picker)===null||n===void 0?void 0:n.valueSelection,g=(s=c==null?void 0:c.picker)===null||s===void 0?void 0:s.value,p=new he,_=p.add(this.quickInputService.createQuickPick());_.value=e,this.adjustValueSelection(_,l,i),_.placeholder=l==null?void 0:l.placeholder,_.quickNavigate=i==null?void 0:i.quickNavigateConfiguration,_.hideInput=!!_.quickNavigate&&!c,(typeof(i==null?void 0:i.itemActivation)=="number"||i!=null&&i.quickNavigateConfiguration)&&(_.itemActivation=(r=i==null?void 0:i.itemActivation)!==null&&r!==void 0?r:yd.SECOND),_.contextKey=l==null?void 0:l.contextKey,_.filterValue=S=>S.substring(l?l.prefix.length:0);let b;t&&(b=new BD,p.add(Ie.once(_.onWillAccept)(S=>{S.veto(),_.hide()}))),p.add(this.registerPickerListeners(_,a,l,e,i==null?void 0:i.providerOptions));const y=p.add(new os);if(a&&p.add(a.provide(_,y.token,i==null?void 0:i.providerOptions)),Ie.once(_.onDidHide)(()=>{_.selectedItems.length===0&&y.cancel(),p.dispose(),b==null||b.complete(_.selectedItems.slice(0))}),_.show(),f&&g===e&&(_.valueSelection=f),t)return b==null?void 0:b.p}adjustValueSelection(e,t,i){var n;let s;i!=null&&i.preserveValue?s=[e.value.length,e.value.length]:s=[(n=t==null?void 0:t.prefix.length)!==null&&n!==void 0?n:0,e.value.length],e.valueSelection=s}registerPickerListeners(e,t,i,n,s){const r=new he,a=this.visibleQuickAccess={picker:e,descriptor:i,value:n};return r.add(lt(()=>{a===this.visibleQuickAccess&&(this.visibleQuickAccess=void 0)})),r.add(e.onDidChangeValue(l=>{const[c]=this.getOrInstantiateProvider(l);c!==t?this.show(l,{preserveValue:!0,providerOptions:s}):a.value=l})),i&&r.add(e.onDidAccept(()=>{this.lastAcceptedPickerValues.set(i,e.value)})),r}getOrInstantiateProvider(e){const t=this.registry.getQuickAccessProvider(e);if(!t)return[void 0,void 0];let i=this.mapProviderToDescriptor.get(t);return i||(i=this.instantiationService.createInstance(t.ctor),this.mapProviderToDescriptor.set(t,i)),[i,t]}};F8=hPe([VX(0,ou),VX(1,ct)],F8);class tw extends Rl{constructor(e){var t;super(),this._onChange=this._register(new Y),this.onChange=this._onChange.event,this._onKeyDown=this._register(new Y),this.onKeyDown=this._onKeyDown.event,this._opts=e,this._checked=this._opts.isChecked;const i=["monaco-custom-toggle"];this._opts.icon&&(this._icon=this._opts.icon,i.push(...pt.asClassNameArray(this._icon))),this._opts.actionClassName&&i.push(...this._opts.actionClassName.split(" ")),this._checked&&i.push("checked"),this.domNode=document.createElement("div"),this._hover=this._register(Zc((t=e.hoverDelegate)!==null&&t!==void 0?t:ya("mouse"),this.domNode,this._opts.title)),this.domNode.classList.add(...i),this._opts.notFocusable||(this.domNode.tabIndex=0),this.domNode.setAttribute("role","checkbox"),this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.setAttribute("aria-label",this._opts.title),this.applyStyles(),this.onclick(this.domNode,n=>{this.enabled&&(this.checked=!this._checked,this._onChange.fire(!1),n.preventDefault())}),this._register(this.ignoreGesture(this.domNode)),this.onkeydown(this.domNode,n=>{if(n.keyCode===10||n.keyCode===3){this.checked=!this._checked,this._onChange.fire(!0),n.preventDefault(),n.stopPropagation();return}this._onKeyDown.fire(n)})}get enabled(){return this.domNode.getAttribute("aria-disabled")!=="true"}focus(){this.domNode.focus()}get checked(){return this._checked}set checked(e){this._checked=e,this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.classList.toggle("checked",this._checked),this.applyStyles()}width(){return 22}applyStyles(){this.domNode&&(this.domNode.style.borderColor=this._checked&&this._opts.inputActiveOptionBorder||"",this.domNode.style.color=this._checked&&this._opts.inputActiveOptionForeground||"inherit",this.domNode.style.backgroundColor=this._checked&&this._opts.inputActiveOptionBackground||"")}enable(){this.domNode.setAttribute("aria-disabled",String(!1))}disable(){this.domNode.setAttribute("aria-disabled",String(!0))}}var fPe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class Roe{constructor(e){this.nodes=e}toString(){return this.nodes.map(e=>typeof e=="string"?e:e.label).join("")}}fPe([fs],Roe.prototype,"toString",null);const gPe=/\[([^\]]+)\]\(((?:https?:\/\/|command:|file:)[^\)\s]+)(?: (["'])(.+?)(\3))?\)/gi;function pPe(o){const e=[];let t=0,i;for(;i=gPe.exec(o);){i.index-t>0&&e.push(o.substring(t,i.index));const[,n,s,,r]=i;r?e.push({label:n,href:s,title:r}):e.push({label:n,href:s}),t=i.index+i[0].length}return t<o.length&&e.push(o.substring(t)),new Roe(e)}const X3={},mPe=new az("quick-input-button-icon-");function _Pe(o){if(!o)return;let e;const t=o.dark.toString();return X3[t]?e=X3[t]:(e=mPe.nextId(),bR(`.${e}, .hc-light .${e}`,`background-image: ${hm(o.light||o.dark)}`),bR(`.vs-dark .${e}, .hc-black .${e}`,`background-image: ${hm(o.dark)}`),X3[t]=e),e}function uM(o,e,t){let i=o.iconClass||_Pe(o.iconPath);return o.alwaysVisible&&(i=i?`${i} always-visible`:"always-visible"),{id:e,label:"",tooltip:o.tooltip||"",class:i,enabled:!0,run:t}}function vPe(o,e,t){_o(e);const i=pPe(o);let n=0;for(const s of i.nodes)if(typeof s=="string")e.append(...Yp(s));else{let r=s.title;!r&&s.href.startsWith("command:")?r=v("executeCommand","Click to execute command '{0}'",s.href.substring(8)):r||(r=s.href);const a=ye("a",{href:s.href,title:r,tabIndex:n++},s.label);a.style.textDecoration="underline";const l=p=>{q1e(p)&&Ut.stop(p,!0),t.callback(s.href)},c=t.disposables.add(new Xt(a,ke.CLICK)).event,u=t.disposables.add(new Xt(a,ke.KEY_DOWN)).event,f=Ie.chain(u,p=>p.filter(_=>{const b=new _n(_);return b.equals(10)||b.equals(3)}));t.disposables.add(rn.addTarget(a));const g=t.disposables.add(new Xt(a,ln.Tap)).event;Ie.any(c,g,f)(l,null,t.disposables),e.appendChild(a)}}class bPe{get templateId(){return this.renderer.templateId}constructor(e,t){this.renderer=e,this.modelProvider=t}renderTemplate(e){return{data:this.renderer.renderTemplate(e),disposable:J.None}}renderElement(e,t,i,n){var s;if((s=i.disposable)===null||s===void 0||s.dispose(),!i.data)return;const r=this.modelProvider();if(r.isResolved(e))return this.renderer.renderElement(r.get(e),e,i.data,n);const a=new os,l=r.resolve(e,a.token);i.disposable={dispose:()=>a.cancel()},this.renderer.renderPlaceholder(e,i.data),l.then(c=>this.renderer.renderElement(c,e,i.data,n))}disposeTemplate(e){e.disposable&&(e.disposable.dispose(),e.disposable=void 0),e.data&&(this.renderer.disposeTemplate(e.data),e.data=void 0)}}class CPe{constructor(e,t){this.modelProvider=e,this.accessibilityProvider=t}getWidgetAriaLabel(){return this.accessibilityProvider.getWidgetAriaLabel()}getAriaLabel(e){const t=this.modelProvider();return t.isResolved(e)?this.accessibilityProvider.getAriaLabel(t.get(e)):null}}function wPe(o,e){return{...e,accessibilityProvider:e.accessibilityProvider&&new CPe(o,e.accessibilityProvider)}}class yPe{constructor(e,t,i,n,s={}){const r=()=>this.model,a=n.map(l=>new bPe(l,r));this.list=new Ml(e,t,i,a,wPe(r,s))}updateOptions(e){this.list.updateOptions(e)}getHTMLElement(){return this.list.getHTMLElement()}get onDidFocus(){return this.list.onDidFocus}get widget(){return this.list}get onDidDispose(){return this.list.onDidDispose}get onMouseDblClick(){return Ie.map(this.list.onMouseDblClick,({element:e,index:t,browserEvent:i})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:i}))}get onPointer(){return Ie.map(this.list.onPointer,({element:e,index:t,browserEvent:i})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:i}))}get onDidChangeSelection(){return Ie.map(this.list.onDidChangeSelection,({elements:e,indexes:t,browserEvent:i})=>({elements:e.map(n=>this._model.get(n)),indexes:t,browserEvent:i}))}get model(){return this._model}set model(e){this._model=e,this.list.splice(0,this.list.length,la(e.length))}getFocus(){return this.list.getFocus()}getSelection(){return this.list.getSelection()}getSelectedElements(){return this.getSelection().map(e=>this.model.get(e))}style(e){this.list.style(e)}dispose(){this.list.dispose()}}var iw=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};const SPe=!1;var hM;(function(o){o.North="north",o.South="south",o.East="east",o.West="west"})(hM||(hM={}));let LPe=4;const xPe=new Y;let DPe=300;const kPe=new Y;class gz{constructor(e){this.el=e,this.disposables=new he}get onPointerMove(){return this.disposables.add(new Xt(ft(this.el),"mousemove")).event}get onPointerUp(){return this.disposables.add(new Xt(ft(this.el),"mouseup")).event}dispose(){this.disposables.dispose()}}iw([fs],gz.prototype,"onPointerMove",null);iw([fs],gz.prototype,"onPointerUp",null);class pz{get onPointerMove(){return this.disposables.add(new Xt(this.el,ln.Change)).event}get onPointerUp(){return this.disposables.add(new Xt(this.el,ln.End)).event}constructor(e){this.el=e,this.disposables=new he}dispose(){this.disposables.dispose()}}iw([fs],pz.prototype,"onPointerMove",null);iw([fs],pz.prototype,"onPointerUp",null);class fM{get onPointerMove(){return this.factory.onPointerMove}get onPointerUp(){return this.factory.onPointerUp}constructor(e){this.factory=e}dispose(){}}iw([fs],fM.prototype,"onPointerMove",null);iw([fs],fM.prototype,"onPointerUp",null);const HX="pointer-events-disabled";class jo extends J{get state(){return this._state}get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}set state(e){this._state!==e&&(this.el.classList.toggle("disabled",e===0),this.el.classList.toggle("minimum",e===1),this.el.classList.toggle("maximum",e===2),this._state=e,this.onDidEnablementChange.fire(e))}set orthogonalStartSash(e){if(this._orthogonalStartSash!==e){if(this.orthogonalStartDragHandleDisposables.clear(),this.orthogonalStartSashDisposables.clear(),e){const t=i=>{this.orthogonalStartDragHandleDisposables.clear(),i!==0&&(this._orthogonalStartDragHandle=ge(this.el,ye(".orthogonal-drag-handle.start")),this.orthogonalStartDragHandleDisposables.add(lt(()=>this._orthogonalStartDragHandle.remove())),this.orthogonalStartDragHandleDisposables.add(new Xt(this._orthogonalStartDragHandle,"mouseenter")).event(()=>jo.onMouseEnter(e),void 0,this.orthogonalStartDragHandleDisposables),this.orthogonalStartDragHandleDisposables.add(new Xt(this._orthogonalStartDragHandle,"mouseleave")).event(()=>jo.onMouseLeave(e),void 0,this.orthogonalStartDragHandleDisposables))};this.orthogonalStartSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalStartSash=e}}set orthogonalEndSash(e){if(this._orthogonalEndSash!==e){if(this.orthogonalEndDragHandleDisposables.clear(),this.orthogonalEndSashDisposables.clear(),e){const t=i=>{this.orthogonalEndDragHandleDisposables.clear(),i!==0&&(this._orthogonalEndDragHandle=ge(this.el,ye(".orthogonal-drag-handle.end")),this.orthogonalEndDragHandleDisposables.add(lt(()=>this._orthogonalEndDragHandle.remove())),this.orthogonalEndDragHandleDisposables.add(new Xt(this._orthogonalEndDragHandle,"mouseenter")).event(()=>jo.onMouseEnter(e),void 0,this.orthogonalEndDragHandleDisposables),this.orthogonalEndDragHandleDisposables.add(new Xt(this._orthogonalEndDragHandle,"mouseleave")).event(()=>jo.onMouseLeave(e),void 0,this.orthogonalEndDragHandleDisposables))};this.orthogonalEndSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalEndSash=e}}constructor(e,t,i){super(),this.hoverDelay=DPe,this.hoverDelayer=this._register(new Kc(this.hoverDelay)),this._state=3,this.onDidEnablementChange=this._register(new Y),this._onDidStart=this._register(new Y),this._onDidChange=this._register(new Y),this._onDidReset=this._register(new Y),this._onDidEnd=this._register(new Y),this.orthogonalStartSashDisposables=this._register(new he),this.orthogonalStartDragHandleDisposables=this._register(new he),this.orthogonalEndSashDisposables=this._register(new he),this.orthogonalEndDragHandleDisposables=this._register(new he),this.onDidStart=this._onDidStart.event,this.onDidChange=this._onDidChange.event,this.onDidReset=this._onDidReset.event,this.onDidEnd=this._onDidEnd.event,this.linkedSash=void 0,this.el=ge(e,ye(".monaco-sash")),i.orthogonalEdge&&this.el.classList.add(`orthogonal-edge-${i.orthogonalEdge}`),Kt&&this.el.classList.add("mac");const n=this._register(new Xt(this.el,"mousedown")).event;this._register(n(f=>this.onPointerStart(f,new gz(e)),this));const s=this._register(new Xt(this.el,"dblclick")).event;this._register(s(this.onPointerDoublePress,this));const r=this._register(new Xt(this.el,"mouseenter")).event;this._register(r(()=>jo.onMouseEnter(this)));const a=this._register(new Xt(this.el,"mouseleave")).event;this._register(a(()=>jo.onMouseLeave(this))),this._register(rn.addTarget(this.el));const l=this._register(new Xt(this.el,ln.Start)).event;this._register(l(f=>this.onPointerStart(f,new pz(this.el)),this));const c=this._register(new Xt(this.el,ln.Tap)).event;let u;this._register(c(f=>{if(u){clearTimeout(u),u=void 0,this.onPointerDoublePress(f);return}clearTimeout(u),u=setTimeout(()=>u=void 0,250)},this)),typeof i.size=="number"?(this.size=i.size,i.orientation===0?this.el.style.width=`${this.size}px`:this.el.style.height=`${this.size}px`):(this.size=LPe,this._register(xPe.event(f=>{this.size=f,this.layout()}))),this._register(kPe.event(f=>this.hoverDelay=f)),this.layoutProvider=t,this.orthogonalStartSash=i.orthogonalStartSash,this.orthogonalEndSash=i.orthogonalEndSash,this.orientation=i.orientation||0,this.orientation===1?(this.el.classList.add("horizontal"),this.el.classList.remove("vertical")):(this.el.classList.remove("horizontal"),this.el.classList.add("vertical")),this.el.classList.toggle("debug",SPe),this.layout()}onPointerStart(e,t){Ut.stop(e);let i=!1;if(!e.__orthogonalSashEvent){const _=this.getOrthogonalSash(e);_&&(i=!0,e.__orthogonalSashEvent=!0,_.onPointerStart(e,new fM(t)))}if(this.linkedSash&&!e.__linkedSashEvent&&(e.__linkedSashEvent=!0,this.linkedSash.onPointerStart(e,new fM(t))),!this.state)return;const n=this.el.ownerDocument.getElementsByTagName("iframe");for(const _ of n)_.classList.add(HX);const s=e.pageX,r=e.pageY,a=e.altKey,l={startX:s,currentX:s,startY:r,currentY:r,altKey:a};this.el.classList.add("active"),this._onDidStart.fire(l);const c=xl(this.el),u=()=>{let _="";i?_="all-scroll":this.orientation===1?this.state===1?_="s-resize":this.state===2?_="n-resize":_=Kt?"row-resize":"ns-resize":this.state===1?_="e-resize":this.state===2?_="w-resize":_=Kt?"col-resize":"ew-resize",c.textContent=`* { cursor: ${_} !important; }`},f=new he;u(),i||this.onDidEnablementChange.event(u,null,f);const g=_=>{Ut.stop(_,!1);const b={startX:s,currentX:_.pageX,startY:r,currentY:_.pageY,altKey:a};this._onDidChange.fire(b)},p=_=>{Ut.stop(_,!1),this.el.removeChild(c),this.el.classList.remove("active"),this._onDidEnd.fire(),f.dispose();for(const b of n)b.classList.remove(HX)};t.onPointerMove(g,null,f),t.onPointerUp(p,null,f),f.add(t)}onPointerDoublePress(e){const t=this.getOrthogonalSash(e);t&&t._onDidReset.fire(),this.linkedSash&&this.linkedSash._onDidReset.fire(),this._onDidReset.fire()}static onMouseEnter(e,t=!1){e.el.classList.contains("active")?(e.hoverDelayer.cancel(),e.el.classList.add("hover")):e.hoverDelayer.trigger(()=>e.el.classList.add("hover"),e.hoverDelay).then(void 0,()=>{}),!t&&e.linkedSash&&jo.onMouseEnter(e.linkedSash,!0)}static onMouseLeave(e,t=!1){e.hoverDelayer.cancel(),e.el.classList.remove("hover"),!t&&e.linkedSash&&jo.onMouseLeave(e.linkedSash,!0)}clearSashHoverState(){jo.onMouseLeave(this)}layout(){if(this.orientation===0){const e=this.layoutProvider;this.el.style.left=e.getVerticalSashLeft(this)-this.size/2+"px",e.getVerticalSashTop&&(this.el.style.top=e.getVerticalSashTop(this)+"px"),e.getVerticalSashHeight&&(this.el.style.height=e.getVerticalSashHeight(this)+"px")}else{const e=this.layoutProvider;this.el.style.top=e.getHorizontalSashTop(this)-this.size/2+"px",e.getHorizontalSashLeft&&(this.el.style.left=e.getHorizontalSashLeft(this)+"px"),e.getHorizontalSashWidth&&(this.el.style.width=e.getHorizontalSashWidth(this)+"px")}}getOrthogonalSash(e){var t;const i=(t=e.initialTarget)!==null&&t!==void 0?t:e.target;if(!(!i||!(i instanceof HTMLElement))&&i.classList.contains("orthogonal-drag-handle"))return i.classList.contains("start")?this.orthogonalStartSash:this.orthogonalEndSash}dispose(){super.dispose(),this.el.remove()}}const EPe={separatorBorder:ne.transparent};class Moe{set size(e){this._size=e}get size(){return this._size}get visible(){return typeof this._cachedVisibleSize>"u"}setVisible(e,t){var i,n;if(e!==this.visible){e?(this.size=Tr(this._cachedVisibleSize,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize=typeof t=="number"?t:this.size,this.size=0),this.container.classList.toggle("visible",e);try{(n=(i=this.view).setVisible)===null||n===void 0||n.call(i,e)}catch(s){console.error("Splitview: Failed to set visible view"),console.error(s)}}}get minimumSize(){return this.visible?this.view.minimumSize:0}get viewMinimumSize(){return this.view.minimumSize}get maximumSize(){return this.visible?this.view.maximumSize:0}get viewMaximumSize(){return this.view.maximumSize}get priority(){return this.view.priority}get proportionalLayout(){var e;return(e=this.view.proportionalLayout)!==null&&e!==void 0?e:!0}get snap(){return!!this.view.snap}set enabled(e){this.container.style.pointerEvents=e?"":"none"}constructor(e,t,i,n){this.container=e,this.view=t,this.disposable=n,this._cachedVisibleSize=void 0,typeof i=="number"?(this._size=i,this._cachedVisibleSize=void 0,e.classList.add("visible")):(this._size=0,this._cachedVisibleSize=i.cachedVisibleSize)}layout(e,t){this.layoutContainer(e);try{this.view.layout(this.size,e,t)}catch(i){console.error("Splitview: Failed to layout view"),console.error(i)}}dispose(){this.disposable.dispose()}}class IPe extends Moe{layoutContainer(e){this.container.style.top=`${e}px`,this.container.style.height=`${this.size}px`}}class TPe extends Moe{layoutContainer(e){this.container.style.left=`${e}px`,this.container.style.width=`${this.size}px`}}var hf;(function(o){o[o.Idle=0]="Idle",o[o.Busy=1]="Busy"})(hf||(hf={}));var gM;(function(o){o.Distribute={type:"distribute"};function e(n){return{type:"split",index:n}}o.Split=e;function t(n){return{type:"auto",index:n}}o.Auto=t;function i(n){return{type:"invisible",cachedVisibleSize:n}}o.Invisible=i})(gM||(gM={}));class Aoe extends J{get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}get startSnappingEnabled(){return this._startSnappingEnabled}get endSnappingEnabled(){return this._endSnappingEnabled}set orthogonalStartSash(e){for(const t of this.sashItems)t.sash.orthogonalStartSash=e;this._orthogonalStartSash=e}set orthogonalEndSash(e){for(const t of this.sashItems)t.sash.orthogonalEndSash=e;this._orthogonalEndSash=e}set startSnappingEnabled(e){this._startSnappingEnabled!==e&&(this._startSnappingEnabled=e,this.updateSashEnablement())}set endSnappingEnabled(e){this._endSnappingEnabled!==e&&(this._endSnappingEnabled=e,this.updateSashEnablement())}constructor(e,t={}){var i,n,s,r,a;super(),this.size=0,this._contentSize=0,this.proportions=void 0,this.viewItems=[],this.sashItems=[],this.state=hf.Idle,this._onDidSashChange=this._register(new Y),this._onDidSashReset=this._register(new Y),this._startSnappingEnabled=!0,this._endSnappingEnabled=!0,this.onDidSashChange=this._onDidSashChange.event,this.onDidSashReset=this._onDidSashReset.event,this.orientation=(i=t.orientation)!==null&&i!==void 0?i:0,this.inverseAltBehavior=(n=t.inverseAltBehavior)!==null&&n!==void 0?n:!1,this.proportionalLayout=(s=t.proportionalLayout)!==null&&s!==void 0?s:!0,this.getSashOrthogonalSize=t.getSashOrthogonalSize,this.el=document.createElement("div"),this.el.classList.add("monaco-split-view2"),this.el.classList.add(this.orientation===0?"vertical":"horizontal"),e.appendChild(this.el),this.sashContainer=ge(this.el,ye(".sash-container")),this.viewContainer=ye(".split-view-container"),this.scrollable=this._register(new X1({forceIntegerValues:!0,smoothScrollDuration:125,scheduleAtNextAnimationFrame:c=>ja(ft(this.el),c)})),this.scrollableElement=this._register(new HA(this.viewContainer,{vertical:this.orientation===0?(r=t.scrollbarVisibility)!==null&&r!==void 0?r:1:2,horizontal:this.orientation===1?(a=t.scrollbarVisibility)!==null&&a!==void 0?a:1:2},this.scrollable));const l=this._register(new Xt(this.viewContainer,"scroll")).event;this._register(l(c=>{const u=this.scrollableElement.getScrollPosition(),f=Math.abs(this.viewContainer.scrollLeft-u.scrollLeft)<=1?void 0:this.viewContainer.scrollLeft,g=Math.abs(this.viewContainer.scrollTop-u.scrollTop)<=1?void 0:this.viewContainer.scrollTop;(f!==void 0||g!==void 0)&&this.scrollableElement.setScrollPosition({scrollLeft:f,scrollTop:g})})),this.onDidScroll=this.scrollableElement.onScroll,this._register(this.onDidScroll(c=>{c.scrollTopChanged&&(this.viewContainer.scrollTop=c.scrollTop),c.scrollLeftChanged&&(this.viewContainer.scrollLeft=c.scrollLeft)})),ge(this.el,this.scrollableElement.getDomNode()),this.style(t.styles||EPe),t.descriptor&&(this.size=t.descriptor.size,t.descriptor.views.forEach((c,u)=>{const f=Wa(c.visible)||c.visible?c.size:{type:"invisible",cachedVisibleSize:c.size},g=c.view;this.doAddView(g,f,u,!0)}),this._contentSize=this.viewItems.reduce((c,u)=>c+u.size,0),this.saveProportions())}style(e){e.separatorBorder.isTransparent()?(this.el.classList.remove("separator-border"),this.el.style.removeProperty("--separator-border")):(this.el.classList.add("separator-border"),this.el.style.setProperty("--separator-border",e.separatorBorder.toString()))}addView(e,t,i=this.viewItems.length,n){this.doAddView(e,t,i,n)}layout(e,t){const i=Math.max(this.size,this._contentSize);if(this.size=e,this.layoutContext=t,this.proportions){let n=0;for(let s=0;s<this.viewItems.length;s++){const r=this.viewItems[s],a=this.proportions[s];typeof a=="number"?n+=a:e-=r.size}for(let s=0;s<this.viewItems.length;s++){const r=this.viewItems[s],a=this.proportions[s];typeof a=="number"&&n>0&&(r.size=Tr(Math.round(a*e/n),r.minimumSize,r.maximumSize))}}else{const n=la(this.viewItems.length),s=n.filter(a=>this.viewItems[a].priority===1),r=n.filter(a=>this.viewItems[a].priority===2);this.resize(this.viewItems.length-1,e-i,void 0,s,r)}this.distributeEmptySpace(),this.layoutViews()}saveProportions(){this.proportionalLayout&&this._contentSize>0&&(this.proportions=this.viewItems.map(e=>e.proportionalLayout&&e.visible?e.size/this._contentSize:void 0))}onSashStart({sash:e,start:t,alt:i}){for(const a of this.viewItems)a.enabled=!1;const n=this.sashItems.findIndex(a=>a.sash===e),s=$c(oe(this.el.ownerDocument.body,"keydown",a=>r(this.sashDragState.current,a.altKey)),oe(this.el.ownerDocument.body,"keyup",()=>r(this.sashDragState.current,!1))),r=(a,l)=>{const c=this.viewItems.map(_=>_.size);let u=Number.NEGATIVE_INFINITY,f=Number.POSITIVE_INFINITY;if(this.inverseAltBehavior&&(l=!l),l)if(n===this.sashItems.length-1){const b=this.viewItems[n];u=(b.minimumSize-b.size)/2,f=(b.maximumSize-b.size)/2}else{const b=this.viewItems[n+1];u=(b.size-b.maximumSize)/2,f=(b.size-b.minimumSize)/2}let g,p;if(!l){const _=la(n,-1),b=la(n+1,this.viewItems.length),y=_.reduce((F,H)=>F+(this.viewItems[H].minimumSize-c[H]),0),S=_.reduce((F,H)=>F+(this.viewItems[H].viewMaximumSize-c[H]),0),L=b.length===0?Number.POSITIVE_INFINITY:b.reduce((F,H)=>F+(c[H]-this.viewItems[H].minimumSize),0),x=b.length===0?Number.NEGATIVE_INFINITY:b.reduce((F,H)=>F+(c[H]-this.viewItems[H].viewMaximumSize),0),D=Math.max(y,x),E=Math.min(L,S),N=this.findFirstSnapIndex(_),M=this.findFirstSnapIndex(b);if(typeof N=="number"){const F=this.viewItems[N],H=Math.floor(F.viewMinimumSize/2);g={index:N,limitDelta:F.visible?D-H:D+H,size:F.size}}if(typeof M=="number"){const F=this.viewItems[M],H=Math.floor(F.viewMinimumSize/2);p={index:M,limitDelta:F.visible?E+H:E-H,size:F.size}}}this.sashDragState={start:a,current:a,index:n,sizes:c,minDelta:u,maxDelta:f,alt:l,snapBefore:g,snapAfter:p,disposable:s}};r(t,i)}onSashChange({current:e}){const{index:t,start:i,sizes:n,alt:s,minDelta:r,maxDelta:a,snapBefore:l,snapAfter:c}=this.sashDragState;this.sashDragState.current=e;const u=e-i,f=this.resize(t,u,n,void 0,void 0,r,a,l,c);if(s){const g=t===this.sashItems.length-1,p=this.viewItems.map(x=>x.size),_=g?t:t+1,b=this.viewItems[_],y=b.size-b.maximumSize,S=b.size-b.minimumSize,L=g?t-1:t+1;this.resize(L,-f,p,void 0,void 0,y,S)}this.distributeEmptySpace(),this.layoutViews()}onSashEnd(e){this._onDidSashChange.fire(e),this.sashDragState.disposable.dispose(),this.saveProportions();for(const t of this.viewItems)t.enabled=!0}onViewChange(e,t){const i=this.viewItems.indexOf(e);i<0||i>=this.viewItems.length||(t=typeof t=="number"?t:e.size,t=Tr(t,e.minimumSize,e.maximumSize),this.inverseAltBehavior&&i>0?(this.resize(i-1,Math.floor((e.size-t)/2)),this.distributeEmptySpace(),this.layoutViews()):(e.size=t,this.relayout([i],void 0)))}resizeView(e,t){if(!(e<0||e>=this.viewItems.length)){if(this.state!==hf.Idle)throw new Error("Cant modify splitview");this.state=hf.Busy;try{const i=la(this.viewItems.length).filter(a=>a!==e),n=[...i.filter(a=>this.viewItems[a].priority===1),e],s=i.filter(a=>this.viewItems[a].priority===2),r=this.viewItems[e];t=Math.round(t),t=Tr(t,r.minimumSize,Math.min(r.maximumSize,this.size)),r.size=t,this.relayout(n,s)}finally{this.state=hf.Idle}}}distributeViewSizes(){const e=[];let t=0;for(const a of this.viewItems)a.maximumSize-a.minimumSize>0&&(e.push(a),t+=a.size);const i=Math.floor(t/e.length);for(const a of e)a.size=Tr(i,a.minimumSize,a.maximumSize);const n=la(this.viewItems.length),s=n.filter(a=>this.viewItems[a].priority===1),r=n.filter(a=>this.viewItems[a].priority===2);this.relayout(s,r)}getViewSize(e){return e<0||e>=this.viewItems.length?-1:this.viewItems[e].size}doAddView(e,t,i=this.viewItems.length,n){if(this.state!==hf.Idle)throw new Error("Cant modify splitview");this.state=hf.Busy;try{const s=ye(".split-view-view");i===this.viewItems.length?this.viewContainer.appendChild(s):this.viewContainer.insertBefore(s,this.viewContainer.children.item(i));const r=e.onDidChange(g=>this.onViewChange(u,g)),a=lt(()=>this.viewContainer.removeChild(s)),l=$c(r,a);let c;typeof t=="number"?c=t:(t.type==="auto"&&(this.areViewsDistributed()?t={type:"distribute"}:t={type:"split",index:t.index}),t.type==="split"?c=this.getViewSize(t.index)/2:t.type==="invisible"?c={cachedVisibleSize:t.cachedVisibleSize}:c=e.minimumSize);const u=this.orientation===0?new IPe(s,e,c,l):new TPe(s,e,c,l);if(this.viewItems.splice(i,0,u),this.viewItems.length>1){const g={orthogonalStartSash:this.orthogonalStartSash,orthogonalEndSash:this.orthogonalEndSash},p=this.orientation===0?new jo(this.sashContainer,{getHorizontalSashTop:F=>this.getSashPosition(F),getHorizontalSashWidth:this.getSashOrthogonalSize},{...g,orientation:1}):new jo(this.sashContainer,{getVerticalSashLeft:F=>this.getSashPosition(F),getVerticalSashHeight:this.getSashOrthogonalSize},{...g,orientation:0}),_=this.orientation===0?F=>({sash:p,start:F.startY,current:F.currentY,alt:F.altKey}):F=>({sash:p,start:F.startX,current:F.currentX,alt:F.altKey}),y=Ie.map(p.onDidStart,_)(this.onSashStart,this),L=Ie.map(p.onDidChange,_)(this.onSashChange,this),D=Ie.map(p.onDidEnd,()=>this.sashItems.findIndex(F=>F.sash===p))(this.onSashEnd,this),E=p.onDidReset(()=>{const F=this.sashItems.findIndex(q=>q.sash===p),H=la(F,-1),Q=la(F+1,this.viewItems.length),K=this.findFirstSnapIndex(H),j=this.findFirstSnapIndex(Q);typeof K=="number"&&!this.viewItems[K].visible||typeof j=="number"&&!this.viewItems[j].visible||this._onDidSashReset.fire(F)}),N=$c(y,L,D,E,p),M={sash:p,disposable:N};this.sashItems.splice(i-1,0,M)}s.appendChild(e.element);let f;typeof t!="number"&&t.type==="split"&&(f=[t.index]),n||this.relayout([i],f),!n&&typeof t!="number"&&t.type==="distribute"&&this.distributeViewSizes()}finally{this.state=hf.Idle}}relayout(e,t){const i=this.viewItems.reduce((n,s)=>n+s.size,0);this.resize(this.viewItems.length-1,this.size-i,void 0,e,t),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}resize(e,t,i=this.viewItems.map(u=>u.size),n,s,r=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,l,c){if(e<0||e>=this.viewItems.length)return 0;const u=la(e,-1),f=la(e+1,this.viewItems.length);if(s)for(const M of s)P5(u,M),P5(f,M);if(n)for(const M of n)HI(u,M),HI(f,M);const g=u.map(M=>this.viewItems[M]),p=u.map(M=>i[M]),_=f.map(M=>this.viewItems[M]),b=f.map(M=>i[M]),y=u.reduce((M,F)=>M+(this.viewItems[F].minimumSize-i[F]),0),S=u.reduce((M,F)=>M+(this.viewItems[F].maximumSize-i[F]),0),L=f.length===0?Number.POSITIVE_INFINITY:f.reduce((M,F)=>M+(i[F]-this.viewItems[F].minimumSize),0),x=f.length===0?Number.NEGATIVE_INFINITY:f.reduce((M,F)=>M+(i[F]-this.viewItems[F].maximumSize),0),D=Math.max(y,x,r),E=Math.min(L,S,a);let N=!1;if(l){const M=this.viewItems[l.index],F=t>=l.limitDelta;N=F!==M.visible,M.setVisible(F,l.size)}if(!N&&c){const M=this.viewItems[c.index],F=t<c.limitDelta;N=F!==M.visible,M.setVisible(F,c.size)}if(N)return this.resize(e,t,i,n,s,r,a);t=Tr(t,D,E);for(let M=0,F=t;M<g.length;M++){const H=g[M],Q=Tr(p[M]+F,H.minimumSize,H.maximumSize),K=Q-p[M];F-=K,H.size=Q}for(let M=0,F=t;M<_.length;M++){const H=_[M],Q=Tr(b[M]-F,H.minimumSize,H.maximumSize),K=Q-b[M];F+=K,H.size=Q}return t}distributeEmptySpace(e){const t=this.viewItems.reduce((a,l)=>a+l.size,0);let i=this.size-t;const n=la(this.viewItems.length-1,-1),s=n.filter(a=>this.viewItems[a].priority===1),r=n.filter(a=>this.viewItems[a].priority===2);for(const a of r)P5(n,a);for(const a of s)HI(n,a);typeof e=="number"&&HI(n,e);for(let a=0;i!==0&&a<n.length;a++){const l=this.viewItems[n[a]],c=Tr(l.size+i,l.minimumSize,l.maximumSize),u=c-l.size;i-=u,l.size=c}}layoutViews(){this._contentSize=this.viewItems.reduce((t,i)=>t+i.size,0);let e=0;for(const t of this.viewItems)t.layout(e,this.layoutContext),e+=t.size;this.sashItems.forEach(t=>t.sash.layout()),this.updateSashEnablement(),this.updateScrollableElement()}updateScrollableElement(){this.orientation===0?this.scrollableElement.setScrollDimensions({height:this.size,scrollHeight:this._contentSize}):this.scrollableElement.setScrollDimensions({width:this.size,scrollWidth:this._contentSize})}updateSashEnablement(){let e=!1;const t=this.viewItems.map(l=>e=l.size-l.minimumSize>0||e);e=!1;const i=this.viewItems.map(l=>e=l.maximumSize-l.size>0||e),n=[...this.viewItems].reverse();e=!1;const s=n.map(l=>e=l.size-l.minimumSize>0||e).reverse();e=!1;const r=n.map(l=>e=l.maximumSize-l.size>0||e).reverse();let a=0;for(let l=0;l<this.sashItems.length;l++){const{sash:c}=this.sashItems[l],u=this.viewItems[l];a+=u.size;const f=!(t[l]&&r[l+1]),g=!(i[l]&&s[l+1]);if(f&&g){const p=la(l,-1),_=la(l+1,this.viewItems.length),b=this.findFirstSnapIndex(p),y=this.findFirstSnapIndex(_),S=typeof b=="number"&&!this.viewItems[b].visible,L=typeof y=="number"&&!this.viewItems[y].visible;S&&s[l]&&(a>0||this.startSnappingEnabled)?c.state=1:L&&t[l]&&(a<this._contentSize||this.endSnappingEnabled)?c.state=2:c.state=0}else f&&!g?c.state=1:!f&&g?c.state=2:c.state=3}}getSashPosition(e){let t=0;for(let i=0;i<this.sashItems.length;i++)if(t+=this.viewItems[i].size,this.sashItems[i].sash===e)return t;return 0}findFirstSnapIndex(e){for(const t of e){const i=this.viewItems[t];if(i.visible&&i.snap)return t}for(const t of e){const i=this.viewItems[t];if(i.visible&&i.maximumSize-i.minimumSize>0)return;if(!i.visible&&i.snap)return t}}areViewsDistributed(){let e,t;for(const i of this.viewItems)if(e=e===void 0?i.size:Math.min(e,i.size),t=t===void 0?i.size:Math.max(t,i.size),t-e>2)return!1;return!0}dispose(){var e;(e=this.sashDragState)===null||e===void 0||e.disposable.dispose(),cn(this.viewItems),this.viewItems=[],this.sashItems.forEach(t=>t.disposable.dispose()),this.sashItems=[],super.dispose()}}class rk{constructor(e,t,i){this.columns=e,this.getColumnSize=i,this.templateId=rk.TemplateId,this.renderedTemplates=new Set;const n=new Map(t.map(s=>[s.templateId,s]));this.renderers=[];for(const s of e){const r=n.get(s.templateId);if(!r)throw new Error(`Table cell renderer for template id ${s.templateId} not found.`);this.renderers.push(r)}}renderTemplate(e){const t=ge(e,ye(".monaco-table-tr")),i=[],n=[];for(let r=0;r<this.columns.length;r++){const a=this.renderers[r],l=ge(t,ye(".monaco-table-td",{"data-col-index":r}));l.style.width=`${this.getColumnSize(r)}px`,i.push(l),n.push(a.renderTemplate(l))}const s={container:e,cellContainers:i,cellTemplateData:n};return this.renderedTemplates.add(s),s}renderElement(e,t,i,n){for(let s=0;s<this.columns.length;s++){const a=this.columns[s].project(e);this.renderers[s].renderElement(a,t,i.cellTemplateData[s],n)}}disposeElement(e,t,i,n){for(let s=0;s<this.columns.length;s++){const r=this.renderers[s];if(r.disposeElement){const l=this.columns[s].project(e);r.disposeElement(l,t,i.cellTemplateData[s],n)}}}disposeTemplate(e){for(let t=0;t<this.columns.length;t++)this.renderers[t].disposeTemplate(e.cellTemplateData[t]);Zo(e.container),this.renderedTemplates.delete(e)}layoutColumn(e,t){for(const{cellContainers:i}of this.renderedTemplates)i[e].style.width=`${t}px`}}rk.TemplateId="row";function NPe(o){return{getHeight(e){return o.getHeight(e)},getTemplateId(){return rk.TemplateId}}}class RPe extends J{get minimumSize(){var e;return(e=this.column.minimumWidth)!==null&&e!==void 0?e:120}get maximumSize(){var e;return(e=this.column.maximumWidth)!==null&&e!==void 0?e:Number.POSITIVE_INFINITY}get onDidChange(){var e;return(e=this.column.onDidChangeWidthConstraints)!==null&&e!==void 0?e:Ie.None}constructor(e,t){super(),this.column=e,this.index=t,this._onDidLayout=new Y,this.onDidLayout=this._onDidLayout.event,this.element=ye(".monaco-table-th",{"data-col-index":t},e.label),e.tooltip&&this._register(Zc(ya("mouse"),this.element,e.tooltip))}layout(e){this._onDidLayout.fire([this.index,e])}}class pP{get onDidChangeFocus(){return this.list.onDidChangeFocus}get onDidChangeSelection(){return this.list.onDidChangeSelection}get onDidScroll(){return this.list.onDidScroll}get onMouseDblClick(){return this.list.onMouseDblClick}get onPointer(){return this.list.onPointer}get onDidFocus(){return this.list.onDidFocus}get scrollTop(){return this.list.scrollTop}set scrollTop(e){this.list.scrollTop=e}get scrollHeight(){return this.list.scrollHeight}get renderHeight(){return this.list.renderHeight}get onDidDispose(){return this.list.onDidDispose}constructor(e,t,i,n,s,r){this.virtualDelegate=i,this.domId=`table_id_${++pP.InstanceCount}`,this.disposables=new he,this.cachedWidth=0,this.cachedHeight=0,this.domNode=ge(t,ye(`.monaco-table.${this.domId}`));const a=n.map((u,f)=>this.disposables.add(new RPe(u,f))),l={size:a.reduce((u,f)=>u+f.column.weight,0),views:a.map(u=>({size:u.column.weight,view:u}))};this.splitview=this.disposables.add(new Aoe(this.domNode,{orientation:1,scrollbarVisibility:2,getSashOrthogonalSize:()=>this.cachedHeight,descriptor:l})),this.splitview.el.style.height=`${i.headerRowHeight}px`,this.splitview.el.style.lineHeight=`${i.headerRowHeight}px`;const c=new rk(n,s,u=>this.splitview.getViewSize(u));this.list=this.disposables.add(new Ml(e,this.domNode,NPe(i),[c],r)),Ie.any(...a.map(u=>u.onDidLayout))(([u,f])=>c.layoutColumn(u,f),null,this.disposables),this.splitview.onDidSashReset(u=>{const f=n.reduce((p,_)=>p+_.weight,0),g=n[u].weight/f*this.cachedWidth;this.splitview.resizeView(u,g)},null,this.disposables),this.styleElement=xl(this.domNode),this.style(EAe)}updateOptions(e){this.list.updateOptions(e)}splice(e,t,i=[]){this.list.splice(e,t,i)}getHTMLElement(){return this.domNode}style(e){const t=[];t.push(`.monaco-table.${this.domId} > .monaco-split-view2 .monaco-sash.vertical::before {
			top: ${this.virtualDelegate.headerRowHeight+1}px;
			height: calc(100% - ${this.virtualDelegate.headerRowHeight}px);
		}`),this.styleElement.textContent=t.join(`
`),this.list.style(e)}getSelectedElements(){return this.list.getSelectedElements()}getSelection(){return this.list.getSelection()}getFocus(){return this.list.getFocus()}dispose(){this.disposables.dispose()}}pP.InstanceCount=0;const MPe=v("caseDescription","Match Case"),APe=v("wordsDescription","Match Whole Word"),PPe=v("regexDescription","Use Regular Expression");class Poe extends tw{constructor(e){var t;super({icon:Ee.caseSensitive,title:MPe+e.appendTitle,isChecked:e.isChecked,hoverDelegate:(t=e.hoverDelegate)!==null&&t!==void 0?t:ya("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class Ooe extends tw{constructor(e){var t;super({icon:Ee.wholeWord,title:APe+e.appendTitle,isChecked:e.isChecked,hoverDelegate:(t=e.hoverDelegate)!==null&&t!==void 0?t:ya("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class Foe extends tw{constructor(e){var t;super({icon:Ee.regex,title:PPe+e.appendTitle,isChecked:e.isChecked,hoverDelegate:(t=e.hoverDelegate)!==null&&t!==void 0?t:ya("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class OPe{constructor(e,t=0,i=e.length,n=t-1){this.items=e,this.start=t,this.end=i,this.index=n}current(){return this.index===this.start-1||this.index===this.end?null:this.items[this.index]}next(){return this.index=Math.min(this.index+1,this.end),this.current()}previous(){return this.index=Math.max(this.index-1,this.start-1),this.current()}first(){return this.index=this.start,this.current()}last(){return this.index=this.end-1,this.current()}}class FPe{constructor(e=[],t=10){this._initialize(e),this._limit=t,this._onChange()}getHistory(){return this._elements}add(e){this._history.delete(e),this._history.add(e),this._onChange()}next(){return this._navigator.next()}previous(){return this._currentPosition()!==0?this._navigator.previous():null}current(){return this._navigator.current()}first(){return this._navigator.first()}last(){return this._navigator.last()}isLast(){return this._currentPosition()>=this._elements.length-1}isNowhere(){return this._navigator.current()===null}has(e){return this._history.has(e)}_onChange(){this._reduceToLimit();const e=this._elements;this._navigator=new OPe(e,0,e.length,e.length)}_reduceToLimit(){const e=this._elements;e.length>this._limit&&this._initialize(e.slice(e.length-this._limit))}_currentPosition(){const e=this._navigator.current();return e?this._elements.indexOf(e):-1}_initialize(e){this._history=new Set;for(const t of e)this._history.add(t)}get _elements(){const e=[];return this._history.forEach(t=>e.push(t)),e}}const LS=ye;let BPe=class extends Rl{constructor(e,t,i){var n;super(),this.state="idle",this.maxHeight=Number.POSITIVE_INFINITY,this._onDidChange=this._register(new Y),this.onDidChange=this._onDidChange.event,this._onDidHeightChange=this._register(new Y),this.onDidHeightChange=this._onDidHeightChange.event,this.contextViewProvider=t,this.options=i,this.message=null,this.placeholder=this.options.placeholder||"",this.tooltip=(n=this.options.tooltip)!==null&&n!==void 0?n:this.placeholder||"",this.ariaLabel=this.options.ariaLabel||"",this.options.validationOptions&&(this.validation=this.options.validationOptions.validation),this.element=ge(e,LS(".monaco-inputbox.idle"));const s=this.options.flexibleHeight?"textarea":"input",r=ge(this.element,LS(".ibwrapper"));if(this.input=ge(r,LS(s+".input.empty")),this.input.setAttribute("autocorrect","off"),this.input.setAttribute("autocapitalize","off"),this.input.setAttribute("spellcheck","false"),this.onfocus(this.input,()=>this.element.classList.add("synthetic-focus")),this.onblur(this.input,()=>this.element.classList.remove("synthetic-focus")),this.options.flexibleHeight){this.maxHeight=typeof this.options.flexibleMaxHeight=="number"?this.options.flexibleMaxHeight:Number.POSITIVE_INFINITY,this.mirror=ge(r,LS("div.mirror")),this.mirror.innerText="",this.scrollableElement=new qne(this.element,{vertical:1}),this.options.flexibleWidth&&(this.input.setAttribute("wrap","off"),this.mirror.style.whiteSpace="pre",this.mirror.style.wordWrap="initial"),ge(e,this.scrollableElement.getDomNode()),this._register(this.scrollableElement),this._register(this.scrollableElement.onScroll(c=>this.input.scrollTop=c.scrollTop));const a=this._register(new Xt(e.ownerDocument,"selectionchange")),l=Ie.filter(a.event,()=>{const c=e.ownerDocument.getSelection();return(c==null?void 0:c.anchorNode)===r});this._register(l(this.updateScrollDimensions,this)),this._register(this.onDidHeightChange(this.updateScrollDimensions,this))}else this.input.type=this.options.type||"text",this.input.setAttribute("wrap","off");this.ariaLabel&&this.input.setAttribute("aria-label",this.ariaLabel),this.placeholder&&!this.options.showPlaceholderOnFocus&&this.setPlaceHolder(this.placeholder),this.tooltip&&this.setTooltip(this.tooltip),this.oninput(this.input,()=>this.onValueChange()),this.onblur(this.input,()=>this.onBlur()),this.onfocus(this.input,()=>this.onFocus()),this._register(this.ignoreGesture(this.input)),setTimeout(()=>this.updateMirror(),0),this.options.actions&&(this.actionbar=this._register(new pc(this.element)),this.actionbar.push(this.options.actions,{icon:!0,label:!1})),this.applyStyles()}onBlur(){this._hideMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder","")}onFocus(){this._showMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder",this.placeholder||"")}setPlaceHolder(e){this.placeholder=e,this.input.setAttribute("placeholder",e)}setTooltip(e){this.tooltip=e,this.hover?this.hover.update(e):this.hover=this._register(Zc(ya("mouse"),this.input,e))}get inputElement(){return this.input}get value(){return this.input.value}set value(e){this.input.value!==e&&(this.input.value=e,this.onValueChange())}get height(){return typeof this.cachedHeight=="number"?this.cachedHeight:Ef(this.element)}focus(){this.input.focus()}blur(){this.input.blur()}hasFocus(){return _A(this.input)}select(e=null){this.input.select(),e&&(this.input.setSelectionRange(e.start,e.end),e.end===this.input.value.length&&(this.input.scrollLeft=this.input.scrollWidth))}isSelectionAtEnd(){return this.input.selectionEnd===this.input.value.length&&this.input.selectionStart===this.input.selectionEnd}getSelection(){var e;const t=this.input.selectionStart;if(t===null)return null;const i=(e=this.input.selectionEnd)!==null&&e!==void 0?e:t;return{start:t,end:i}}enable(){this.input.removeAttribute("disabled")}disable(){this.blur(),this.input.disabled=!0,this._hideMessage()}set paddingRight(e){this.input.style.width=`calc(100% - ${e}px)`,this.mirror&&(this.mirror.style.paddingRight=e+"px")}updateScrollDimensions(){if(typeof this.cachedContentHeight!="number"||typeof this.cachedHeight!="number"||!this.scrollableElement)return;const e=this.cachedContentHeight,t=this.cachedHeight,i=this.input.scrollTop;this.scrollableElement.setScrollDimensions({scrollHeight:e,height:t}),this.scrollableElement.setScrollPosition({scrollTop:i})}showMessage(e,t){if(this.state==="open"&&wl(this.message,e))return;this.message=e,this.element.classList.remove("idle"),this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add(this.classForType(e.type));const i=this.stylesForType(this.message.type);this.element.style.border=`1px solid ${Kf(i.border,"transparent")}`,this.message.content&&(this.hasFocus()||t)&&this._showMessage()}hideMessage(){this.message=null,this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add("idle"),this._hideMessage(),this.applyStyles()}validate(){let e=null;return this.validation&&(e=this.validation(this.value),e?(this.inputElement.setAttribute("aria-invalid","true"),this.showMessage(e)):this.inputElement.hasAttribute("aria-invalid")&&(this.inputElement.removeAttribute("aria-invalid"),this.hideMessage())),e==null?void 0:e.type}stylesForType(e){const t=this.options.inputBoxStyles;switch(e){case 1:return{border:t.inputValidationInfoBorder,background:t.inputValidationInfoBackground,foreground:t.inputValidationInfoForeground};case 2:return{border:t.inputValidationWarningBorder,background:t.inputValidationWarningBackground,foreground:t.inputValidationWarningForeground};default:return{border:t.inputValidationErrorBorder,background:t.inputValidationErrorBackground,foreground:t.inputValidationErrorForeground}}}classForType(e){switch(e){case 1:return"info";case 2:return"warning";default:return"error"}}_showMessage(){if(!this.contextViewProvider||!this.message)return;let e;const t=()=>e.style.width=Ir(this.element)+"px";this.contextViewProvider.showContextView({getAnchor:()=>this.element,anchorAlignment:1,render:n=>{var s,r;if(!this.message)return null;e=ge(n,LS(".monaco-inputbox-container")),t();const a={inline:!0,className:"monaco-inputbox-message"},l=this.message.formatContent?JNe(this.message.content,a):XNe(this.message.content,a);l.classList.add(this.classForType(this.message.type));const c=this.stylesForType(this.message.type);return l.style.backgroundColor=(s=c.background)!==null&&s!==void 0?s:"",l.style.color=(r=c.foreground)!==null&&r!==void 0?r:"",l.style.border=c.border?`1px solid ${c.border}`:"",ge(e,l),null},onHide:()=>{this.state="closed"},layout:t});let i;this.message.type===3?i=v("alertErrorMessage","Error: {0}",this.message.content):this.message.type===2?i=v("alertWarningMessage","Warning: {0}",this.message.content):i=v("alertInfoMessage","Info: {0}",this.message.content),_a(i),this.state="open"}_hideMessage(){this.contextViewProvider&&(this.state==="open"&&this.contextViewProvider.hideContextView(),this.state="idle")}onValueChange(){this._onDidChange.fire(this.value),this.validate(),this.updateMirror(),this.input.classList.toggle("empty",!this.value),this.state==="open"&&this.contextViewProvider&&this.contextViewProvider.layout()}updateMirror(){if(!this.mirror)return;const e=this.value,i=e.charCodeAt(e.length-1)===10?" ":"";(e+i).replace(/\u000c/g,"")?this.mirror.textContent=e+i:this.mirror.innerText="",this.layout()}applyStyles(){var e,t,i;const n=this.options.inputBoxStyles,s=(e=n.inputBackground)!==null&&e!==void 0?e:"",r=(t=n.inputForeground)!==null&&t!==void 0?t:"",a=(i=n.inputBorder)!==null&&i!==void 0?i:"";this.element.style.backgroundColor=s,this.element.style.color=r,this.input.style.backgroundColor="inherit",this.input.style.color=r,this.element.style.border=`1px solid ${Kf(a,"transparent")}`}layout(){if(!this.mirror)return;const e=this.cachedContentHeight;this.cachedContentHeight=Ef(this.mirror),e!==this.cachedContentHeight&&(this.cachedHeight=Math.min(this.cachedContentHeight,this.maxHeight),this.input.style.height=this.cachedHeight+"px",this._onDidHeightChange.fire(this.cachedContentHeight))}insertAtCursor(e){const t=this.inputElement,i=t.selectionStart,n=t.selectionEnd,s=t.value;i!==null&&n!==null&&(this.value=s.substr(0,i)+e+s.substr(n),t.setSelectionRange(i+1,i+1),this.layout())}dispose(){var e;this._hideMessage(),this.message=null,(e=this.actionbar)===null||e===void 0||e.dispose(),super.dispose()}};class Boe extends BPe{constructor(e,t,i){const n=v({key:"history.inputbox.hint.suffix.noparens",comment:['Text is the suffix of an input field placeholder coming after the action the input field performs, this will be used when the input field ends in a closing parenthesis ")", for example "Filter (e.g. text, !exclude)". The character inserted into the final string is  to represent the up and down arrow keys.']}," or {0} for history",""),s=v({key:"history.inputbox.hint.suffix.inparens",comment:['Text is the suffix of an input field placeholder coming after the action the input field performs, this will be used when the input field does NOT end in a closing parenthesis (eg. "Find"). The character inserted into the final string is  to represent the up and down arrow keys.']}," ({0} for history)","");super(e,t,i),this._onDidFocus=this._register(new Y),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new Y),this.onDidBlur=this._onDidBlur.event,this.history=new FPe(i.history,100);const r=()=>{if(i.showHistoryHint&&i.showHistoryHint()&&!this.placeholder.endsWith(n)&&!this.placeholder.endsWith(s)&&this.history.getHistory().length){const a=this.placeholder.endsWith(")")?n:s,l=this.placeholder+a;i.showPlaceholderOnFocus&&!_A(this.input)?this.placeholder=l:this.setPlaceHolder(l)}};this.observer=new MutationObserver((a,l)=>{a.forEach(c=>{c.target.textContent||r()})}),this.observer.observe(this.input,{attributeFilter:["class"]}),this.onfocus(this.input,()=>r()),this.onblur(this.input,()=>{const a=l=>{if(this.placeholder.endsWith(l)){const c=this.placeholder.slice(0,this.placeholder.length-l.length);return i.showPlaceholderOnFocus?this.placeholder=c:this.setPlaceHolder(c),!0}else return!1};a(s)||a(n)})}dispose(){super.dispose(),this.observer&&(this.observer.disconnect(),this.observer=void 0)}addToHistory(e){this.value&&(e||this.value!==this.getCurrentValue())&&this.history.add(this.value)}isAtLastInHistory(){return this.history.isLast()}isNowhereInHistory(){return this.history.isNowhere()}showNextValue(){this.history.has(this.value)||this.addToHistory();let e=this.getNextValue();e&&(e=e===this.value?this.getNextValue():e),this.value=e??"",fh(this.value?this.value:v("clearedInput","Cleared Input"))}showPreviousValue(){this.history.has(this.value)||this.addToHistory();let e=this.getPreviousValue();e&&(e=e===this.value?this.getPreviousValue():e),e&&(this.value=e,fh(this.value))}setPlaceHolder(e){super.setPlaceHolder(e),this.setTooltip(e)}onBlur(){super.onBlur(),this._onDidBlur.fire()}onFocus(){super.onFocus(),this._onDidFocus.fire()}getCurrentValue(){let e=this.history.current();return e||(e=this.history.last(),this.history.next()),e}getPreviousValue(){return this.history.previous()||this.history.first()}getNextValue(){return this.history.next()}}const WPe=v("defaultLabel","input");class Woe extends Rl{constructor(e,t,i){super(),this.fixFocusOnOptionClickEnabled=!0,this.imeSessionInProgress=!1,this.additionalTogglesDisposables=this._register(new Xs),this.additionalToggles=[],this._onDidOptionChange=this._register(new Y),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new Y),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new Y),this.onMouseDown=this._onMouseDown.event,this._onInput=this._register(new Y),this._onKeyUp=this._register(new Y),this._onCaseSensitiveKeyDown=this._register(new Y),this.onCaseSensitiveKeyDown=this._onCaseSensitiveKeyDown.event,this._onRegexKeyDown=this._register(new Y),this.onRegexKeyDown=this._onRegexKeyDown.event,this._lastHighlightFindOptions=0,this.placeholder=i.placeholder||"",this.validation=i.validation,this.label=i.label||WPe,this.showCommonFindToggles=!!i.showCommonFindToggles;const n=i.appendCaseSensitiveLabel||"",s=i.appendWholeWordsLabel||"",r=i.appendRegexLabel||"",a=i.history||[],l=!!i.flexibleHeight,c=!!i.flexibleWidth,u=i.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new Boe(this.domNode,t,{placeholder:this.placeholder||"",ariaLabel:this.label||"",validationOptions:{validation:this.validation},history:a,showHistoryHint:i.showHistoryHint,flexibleHeight:l,flexibleWidth:c,flexibleMaxHeight:u,inputBoxStyles:i.inputBoxStyles}));const f=this._register(y1());if(this.showCommonFindToggles){this.regex=this._register(new Foe({appendTitle:r,isChecked:!1,hoverDelegate:f,...i.toggleStyles})),this._register(this.regex.onChange(p=>{this._onDidOptionChange.fire(p),!p&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.regex.onKeyDown(p=>{this._onRegexKeyDown.fire(p)})),this.wholeWords=this._register(new Ooe({appendTitle:s,isChecked:!1,hoverDelegate:f,...i.toggleStyles})),this._register(this.wholeWords.onChange(p=>{this._onDidOptionChange.fire(p),!p&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this.caseSensitive=this._register(new Poe({appendTitle:n,isChecked:!1,hoverDelegate:f,...i.toggleStyles})),this._register(this.caseSensitive.onChange(p=>{this._onDidOptionChange.fire(p),!p&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.caseSensitive.onKeyDown(p=>{this._onCaseSensitiveKeyDown.fire(p)}));const g=[this.caseSensitive.domNode,this.wholeWords.domNode,this.regex.domNode];this.onkeydown(this.domNode,p=>{if(p.equals(15)||p.equals(17)||p.equals(9)){const _=g.indexOf(this.domNode.ownerDocument.activeElement);if(_>=0){let b=-1;p.equals(17)?b=(_+1)%g.length:p.equals(15)&&(_===0?b=g.length-1:b=_-1),p.equals(9)?(g[_].blur(),this.inputBox.focus()):b>=0&&g[b].focus(),Ut.stop(p,!0)}}})}this.controls=document.createElement("div"),this.controls.className="controls",this.controls.style.display=this.showCommonFindToggles?"":"none",this.caseSensitive&&this.controls.append(this.caseSensitive.domNode),this.wholeWords&&this.controls.appendChild(this.wholeWords.domNode),this.regex&&this.controls.appendChild(this.regex.domNode),this.setAdditionalToggles(i==null?void 0:i.additionalToggles),this.controls&&this.domNode.appendChild(this.controls),e==null||e.appendChild(this.domNode),this._register(oe(this.inputBox.inputElement,"compositionstart",g=>{this.imeSessionInProgress=!0})),this._register(oe(this.inputBox.inputElement,"compositionend",g=>{this.imeSessionInProgress=!1,this._onInput.fire()})),this.onkeydown(this.inputBox.inputElement,g=>this._onKeyDown.fire(g)),this.onkeyup(this.inputBox.inputElement,g=>this._onKeyUp.fire(g)),this.oninput(this.inputBox.inputElement,g=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,g=>this._onMouseDown.fire(g))}get onDidChange(){return this.inputBox.onDidChange}layout(e){this.inputBox.layout(),this.updateInputBoxPadding(e.collapsedFindWidget)}enable(){var e,t,i;this.domNode.classList.remove("disabled"),this.inputBox.enable(),(e=this.regex)===null||e===void 0||e.enable(),(t=this.wholeWords)===null||t===void 0||t.enable(),(i=this.caseSensitive)===null||i===void 0||i.enable();for(const n of this.additionalToggles)n.enable()}disable(){var e,t,i;this.domNode.classList.add("disabled"),this.inputBox.disable(),(e=this.regex)===null||e===void 0||e.disable(),(t=this.wholeWords)===null||t===void 0||t.disable(),(i=this.caseSensitive)===null||i===void 0||i.disable();for(const n of this.additionalToggles)n.disable()}setFocusInputOnOptionClick(e){this.fixFocusOnOptionClickEnabled=e}setEnabled(e){e?this.enable():this.disable()}setAdditionalToggles(e){for(const t of this.additionalToggles)t.domNode.remove();this.additionalToggles=[],this.additionalTogglesDisposables.value=new he;for(const t of e??[])this.additionalTogglesDisposables.value.add(t),this.controls.appendChild(t.domNode),this.additionalTogglesDisposables.value.add(t.onChange(i=>{this._onDidOptionChange.fire(i),!i&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus()})),this.additionalToggles.push(t);this.additionalToggles.length>0&&(this.controls.style.display=""),this.updateInputBoxPadding()}updateInputBoxPadding(e=!1){var t,i,n,s,r,a;e?this.inputBox.paddingRight=0:this.inputBox.paddingRight=((i=(t=this.caseSensitive)===null||t===void 0?void 0:t.width())!==null&&i!==void 0?i:0)+((s=(n=this.wholeWords)===null||n===void 0?void 0:n.width())!==null&&s!==void 0?s:0)+((a=(r=this.regex)===null||r===void 0?void 0:r.width())!==null&&a!==void 0?a:0)+this.additionalToggles.reduce((l,c)=>l+c.width(),0)}getValue(){return this.inputBox.value}setValue(e){this.inputBox.value!==e&&(this.inputBox.value=e)}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getCaseSensitive(){var e,t;return(t=(e=this.caseSensitive)===null||e===void 0?void 0:e.checked)!==null&&t!==void 0?t:!1}setCaseSensitive(e){this.caseSensitive&&(this.caseSensitive.checked=e)}getWholeWords(){var e,t;return(t=(e=this.wholeWords)===null||e===void 0?void 0:e.checked)!==null&&t!==void 0?t:!1}setWholeWords(e){this.wholeWords&&(this.wholeWords.checked=e)}getRegex(){var e,t;return(t=(e=this.regex)===null||e===void 0?void 0:e.checked)!==null&&t!==void 0?t:!1}setRegex(e){this.regex&&(this.regex.checked=e,this.validate())}focusOnCaseSensitive(){var e;(e=this.caseSensitive)===null||e===void 0||e.focus()}highlightFindOptions(){this.domNode.classList.remove("highlight-"+this._lastHighlightFindOptions),this._lastHighlightFindOptions=1-this._lastHighlightFindOptions,this.domNode.classList.add("highlight-"+this._lastHighlightFindOptions)}validate(){this.inputBox.validate()}showMessage(e){this.inputBox.showMessage(e)}clearMessage(){this.inputBox.hideMessage()}}var fl;(function(o){o[o.Expanded=0]="Expanded",o[o.Collapsed=1]="Collapsed",o[o.PreserveOrExpanded=2]="PreserveOrExpanded",o[o.PreserveOrCollapsed=3]="PreserveOrCollapsed"})(fl||(fl={}));var lv;(function(o){o[o.Unknown=0]="Unknown",o[o.Twistie=1]="Twistie",o[o.Element=2]="Element",o[o.Filter=3]="Filter"})(lv||(lv={}));class _l extends Error{constructor(e,t){super(`TreeError [${e}] ${t}`)}}class mz{constructor(e){this.fn=e,this._map=new WeakMap}map(e){let t=this._map.get(e);return t||(t=this.fn(e),this._map.set(e,t)),t}}function _z(o){return typeof o=="object"&&"visibility"in o&&"data"in o}function Hx(o){switch(o){case!0:return 1;case!1:return 0;default:return o}}function J3(o){return typeof o.collapsible=="boolean"}class VPe{constructor(e,t,i,n={}){var s;this.user=e,this.list=t,this.rootRef=[],this.eventBufferer=new RV,this._onDidChangeCollapseState=new Y,this.onDidChangeCollapseState=this.eventBufferer.wrapEvent(this._onDidChangeCollapseState.event),this._onDidChangeRenderNodeCount=new Y,this.onDidChangeRenderNodeCount=this.eventBufferer.wrapEvent(this._onDidChangeRenderNodeCount.event),this._onDidSplice=new Y,this.onDidSplice=this._onDidSplice.event,this.refilterDelayer=new Kc(Cie),this.collapseByDefault=typeof n.collapseByDefault>"u"?!1:n.collapseByDefault,this.allowNonCollapsibleParents=(s=n.allowNonCollapsibleParents)!==null&&s!==void 0?s:!1,this.filter=n.filter,this.autoExpandSingleChildren=typeof n.autoExpandSingleChildren>"u"?!1:n.autoExpandSingleChildren,this.root={parent:void 0,element:i,children:[],depth:0,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:!1,collapsed:!1,renderNodeCount:0,visibility:1,visible:!0,filterData:void 0}}splice(e,t,i=ii.empty(),n={}){if(e.length===0)throw new _l(this.user,"Invalid tree location");n.diffIdentityProvider?this.spliceSmart(n.diffIdentityProvider,e,t,i,n):this.spliceSimple(e,t,i,n)}spliceSmart(e,t,i,n,s,r){var a;n===void 0&&(n=ii.empty()),r===void 0&&(r=(a=s.diffDepth)!==null&&a!==void 0?a:0);const{parentNode:l}=this.getParentNodeWithListIndex(t);if(!l.lastDiffIds)return this.spliceSimple(t,i,n,s);const c=[...n],u=t[t.length-1],f=new zu({getElements:()=>l.lastDiffIds},{getElements:()=>[...l.children.slice(0,u),...c,...l.children.slice(u+i)].map(y=>e.getId(y.element).toString())}).ComputeDiff(!1);if(f.quitEarly)return l.lastDiffIds=void 0,this.spliceSimple(t,i,c,s);const g=t.slice(0,-1),p=(y,S,L)=>{if(r>0)for(let x=0;x<L;x++)y--,S--,this.spliceSmart(e,[...g,y,0],Number.MAX_SAFE_INTEGER,c[S].children,s,r-1)};let _=Math.min(l.children.length,u+i),b=c.length;for(const y of f.changes.sort((S,L)=>L.originalStart-S.originalStart))p(_,b,_-(y.originalStart+y.originalLength)),_=y.originalStart,b=y.modifiedStart-u,this.spliceSimple([...g,_],y.originalLength,ii.slice(c,b,b+y.modifiedLength),s);p(_,b,_)}spliceSimple(e,t,i=ii.empty(),{onDidCreateNode:n,onDidDeleteNode:s,diffIdentityProvider:r}){const{parentNode:a,listIndex:l,revealed:c,visible:u}=this.getParentNodeWithListIndex(e),f=[],g=ii.map(i,E=>this.createTreeNode(E,a,a.visible?1:0,c,f,n)),p=e[e.length-1];let _=0;for(let E=p;E>=0&&E<a.children.length;E--){const N=a.children[E];if(N.visible){_=N.visibleChildIndex;break}}const b=[];let y=0,S=0;for(const E of g)b.push(E),S+=E.renderNodeCount,E.visible&&(E.visibleChildIndex=_+y++);const L=rY(a.children,p,t,b);r?a.lastDiffIds?rY(a.lastDiffIds,p,t,b.map(E=>r.getId(E.element).toString())):a.lastDiffIds=a.children.map(E=>r.getId(E.element).toString()):a.lastDiffIds=void 0;let x=0;for(const E of L)E.visible&&x++;if(x!==0)for(let E=p+b.length;E<a.children.length;E++){const N=a.children[E];N.visible&&(N.visibleChildIndex-=x)}if(a.visibleChildrenCount+=y-x,c&&u){const E=L.reduce((N,M)=>N+(M.visible?M.renderNodeCount:0),0);this._updateAncestorsRenderNodeCount(a,S-E),this.list.splice(l,E,f)}if(L.length>0&&s){const E=N=>{s(N),N.children.forEach(E)};L.forEach(E)}this._onDidSplice.fire({insertedNodes:b,deletedNodes:L});let D=a;for(;D;){if(D.visibility===2){this.refilterDelayer.trigger(()=>this.refilter());break}D=D.parent}}rerender(e){if(e.length===0)throw new _l(this.user,"Invalid tree location");const{node:t,listIndex:i,revealed:n}=this.getTreeNodeWithListIndex(e);t.visible&&n&&this.list.splice(i,1,[t])}has(e){return this.hasTreeNode(e)}getListIndex(e){const{listIndex:t,visible:i,revealed:n}=this.getTreeNodeWithListIndex(e);return i&&n?t:-1}getListRenderCount(e){return this.getTreeNode(e).renderNodeCount}isCollapsible(e){return this.getTreeNode(e).collapsible}setCollapsible(e,t){const i=this.getTreeNode(e);typeof t>"u"&&(t=!i.collapsible);const n={collapsible:t};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,n))}isCollapsed(e){return this.getTreeNode(e).collapsed}setCollapsed(e,t,i){const n=this.getTreeNode(e);typeof t>"u"&&(t=!n.collapsed);const s={collapsed:t,recursive:i||!1};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,s))}_setCollapseState(e,t){const{node:i,listIndex:n,revealed:s}=this.getTreeNodeWithListIndex(e),r=this._setListNodeCollapseState(i,n,s,t);if(i!==this.root&&this.autoExpandSingleChildren&&r&&!J3(t)&&i.collapsible&&!i.collapsed&&!t.recursive){let a=-1;for(let l=0;l<i.children.length;l++)if(i.children[l].visible)if(a>-1){a=-1;break}else a=l;a>-1&&this._setCollapseState([...e,a],t)}return r}_setListNodeCollapseState(e,t,i,n){const s=this._setNodeCollapseState(e,n,!1);if(!i||!e.visible||!s)return s;const r=e.renderNodeCount,a=this.updateNodeAfterCollapseChange(e),l=r-(t===-1?0:1);return this.list.splice(t+1,l,a.slice(1)),s}_setNodeCollapseState(e,t,i){let n;if(e===this.root?n=!1:(J3(t)?(n=e.collapsible!==t.collapsible,e.collapsible=t.collapsible):e.collapsible?(n=e.collapsed!==t.collapsed,e.collapsed=t.collapsed):n=!1,n&&this._onDidChangeCollapseState.fire({node:e,deep:i})),!J3(t)&&t.recursive)for(const s of e.children)n=this._setNodeCollapseState(s,t,!0)||n;return n}expandTo(e){this.eventBufferer.bufferEvents(()=>{let t=this.getTreeNode(e);for(;t.parent;)t=t.parent,e=e.slice(0,e.length-1),t.collapsed&&this._setCollapseState(e,{collapsed:!1,recursive:!1})})}refilter(){const e=this.root.renderNodeCount,t=this.updateNodeAfterFilterChange(this.root);this.list.splice(0,e,t),this.refilterDelayer.cancel()}createTreeNode(e,t,i,n,s,r){const a={parent:t,element:e.element,children:[],depth:t.depth+1,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:typeof e.collapsible=="boolean"?e.collapsible:typeof e.collapsed<"u",collapsed:typeof e.collapsed>"u"?this.collapseByDefault:e.collapsed,renderNodeCount:1,visibility:1,visible:!0,filterData:void 0},l=this._filterNode(a,i);a.visibility=l,n&&s.push(a);const c=e.children||ii.empty(),u=n&&l!==0&&!a.collapsed;let f=0,g=1;for(const p of c){const _=this.createTreeNode(p,a,l,u,s,r);a.children.push(_),g+=_.renderNodeCount,_.visible&&(_.visibleChildIndex=f++)}return this.allowNonCollapsibleParents||(a.collapsible=a.collapsible||a.children.length>0),a.visibleChildrenCount=f,a.visible=l===2?f>0:l===1,a.visible?a.collapsed||(a.renderNodeCount=g):(a.renderNodeCount=0,n&&s.pop()),r==null||r(a),a}updateNodeAfterCollapseChange(e){const t=e.renderNodeCount,i=[];return this._updateNodeAfterCollapseChange(e,i),this._updateAncestorsRenderNodeCount(e.parent,i.length-t),i}_updateNodeAfterCollapseChange(e,t){if(e.visible===!1)return 0;if(t.push(e),e.renderNodeCount=1,!e.collapsed)for(const i of e.children)e.renderNodeCount+=this._updateNodeAfterCollapseChange(i,t);return this._onDidChangeRenderNodeCount.fire(e),e.renderNodeCount}updateNodeAfterFilterChange(e){const t=e.renderNodeCount,i=[];return this._updateNodeAfterFilterChange(e,e.visible?1:0,i),this._updateAncestorsRenderNodeCount(e.parent,i.length-t),i}_updateNodeAfterFilterChange(e,t,i,n=!0){let s;if(e!==this.root){if(s=this._filterNode(e,t),s===0)return e.visible=!1,e.renderNodeCount=0,!1;n&&i.push(e)}const r=i.length;e.renderNodeCount=e===this.root?0:1;let a=!1;if(!e.collapsed||s!==0){let l=0;for(const c of e.children)a=this._updateNodeAfterFilterChange(c,s,i,n&&!e.collapsed)||a,c.visible&&(c.visibleChildIndex=l++);e.visibleChildrenCount=l}else e.visibleChildrenCount=0;return e!==this.root&&(e.visible=s===2?a:s===1,e.visibility=s),e.visible?e.collapsed||(e.renderNodeCount+=i.length-r):(e.renderNodeCount=0,n&&i.pop()),this._onDidChangeRenderNodeCount.fire(e),e.visible}_updateAncestorsRenderNodeCount(e,t){if(t!==0)for(;e;)e.renderNodeCount+=t,this._onDidChangeRenderNodeCount.fire(e),e=e.parent}_filterNode(e,t){const i=this.filter?this.filter.filter(e.element,t):1;return typeof i=="boolean"?(e.filterData=void 0,i?1:0):_z(i)?(e.filterData=i.data,Hx(i.visibility)):(e.filterData=void 0,Hx(i))}hasTreeNode(e,t=this.root){if(!e||e.length===0)return!0;const[i,...n]=e;return i<0||i>t.children.length?!1:this.hasTreeNode(n,t.children[i])}getTreeNode(e,t=this.root){if(!e||e.length===0)return t;const[i,...n]=e;if(i<0||i>t.children.length)throw new _l(this.user,"Invalid tree location");return this.getTreeNode(n,t.children[i])}getTreeNodeWithListIndex(e){if(e.length===0)return{node:this.root,listIndex:-1,revealed:!0,visible:!1};const{parentNode:t,listIndex:i,revealed:n,visible:s}=this.getParentNodeWithListIndex(e),r=e[e.length-1];if(r<0||r>t.children.length)throw new _l(this.user,"Invalid tree location");const a=t.children[r];return{node:a,listIndex:i,revealed:n,visible:s&&a.visible}}getParentNodeWithListIndex(e,t=this.root,i=0,n=!0,s=!0){const[r,...a]=e;if(r<0||r>t.children.length)throw new _l(this.user,"Invalid tree location");for(let l=0;l<r;l++)i+=t.children[l].renderNodeCount;return n=n&&!t.collapsed,s=s&&t.visible,a.length===0?{parentNode:t,listIndex:i,revealed:n,visible:s}:this.getParentNodeWithListIndex(a,t.children[r],i+1,n,s)}getNode(e=[]){return this.getTreeNode(e)}getNodeLocation(e){const t=[];let i=e;for(;i.parent;)t.push(i.parent.children.indexOf(i)),i=i.parent;return t.reverse()}getParentNodeLocation(e){if(e.length!==0)return e.length===1?[]:bbe(e)[0]}getFirstElementChild(e){const t=this.getTreeNode(e);if(t.children.length!==0)return t.children[0].element}}class HPe extends tk{constructor(e){super(e.elements.map(t=>t.element)),this.data=e}}function eB(o){return o instanceof tk?new HPe(o):o}class zPe{constructor(e,t){this.modelProvider=e,this.dnd=t,this.autoExpandDisposable=J.None,this.disposables=new he}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(i=>i.element),t)}onDragStart(e,t){var i,n;(n=(i=this.dnd).onDragStart)===null||n===void 0||n.call(i,eB(e),t)}onDragOver(e,t,i,n,s,r=!0){const a=this.dnd.onDragOver(eB(e),t&&t.element,i,n,s),l=this.autoExpandNode!==t;if(l&&(this.autoExpandDisposable.dispose(),this.autoExpandNode=t),typeof t>"u")return a;if(l&&typeof a!="boolean"&&a.autoExpand&&(this.autoExpandDisposable=dm(()=>{const p=this.modelProvider(),_=p.getNodeLocation(t);p.isCollapsed(_)&&p.setCollapsed(_,!1),this.autoExpandNode=void 0},500,this.disposables)),typeof a=="boolean"||!a.accept||typeof a.bubble>"u"||a.feedback){if(!r){const p=typeof a=="boolean"?a:a.accept,_=typeof a=="boolean"?void 0:a.effect;return{accept:p,effect:_,feedback:[i]}}return a}if(a.bubble===1){const p=this.modelProvider(),_=p.getNodeLocation(t),b=p.getParentNodeLocation(_),y=p.getNode(b),S=b&&p.getListIndex(b);return this.onDragOver(e,y,S,n,s,!1)}const c=this.modelProvider(),u=c.getNodeLocation(t),f=c.getListIndex(u),g=c.getListRenderCount(u);return{...a,feedback:la(f,f+g)}}drop(e,t,i,n,s){this.autoExpandDisposable.dispose(),this.autoExpandNode=void 0,this.dnd.drop(eB(e),t&&t.element,i,n,s)}onDragEnd(e){var t,i;(i=(t=this.dnd).onDragEnd)===null||i===void 0||i.call(t,e)}dispose(){this.disposables.dispose(),this.dnd.dispose()}}function UPe(o,e){return e&&{...e,identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(t.element)}},dnd:e.dnd&&new zPe(o,e.dnd),multipleSelectionController:e.multipleSelectionController&&{isSelectionSingleChangeEvent(t){return e.multipleSelectionController.isSelectionSingleChangeEvent({...t,element:t.element})},isSelectionRangeChangeEvent(t){return e.multipleSelectionController.isSelectionRangeChangeEvent({...t,element:t.element})}},accessibilityProvider:e.accessibilityProvider&&{...e.accessibilityProvider,getSetSize(t){const i=o(),n=i.getNodeLocation(t),s=i.getParentNodeLocation(n);return i.getNode(s).visibleChildrenCount},getPosInSet(t){return t.visibleChildIndex+1},isChecked:e.accessibilityProvider&&e.accessibilityProvider.isChecked?t=>e.accessibilityProvider.isChecked(t.element):void 0,getRole:e.accessibilityProvider&&e.accessibilityProvider.getRole?t=>e.accessibilityProvider.getRole(t.element):()=>"treeitem",getAriaLabel(t){return e.accessibilityProvider.getAriaLabel(t.element)},getWidgetAriaLabel(){return e.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:e.accessibilityProvider&&e.accessibilityProvider.getWidgetRole?()=>e.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:e.accessibilityProvider&&e.accessibilityProvider.getAriaLevel?t=>e.accessibilityProvider.getAriaLevel(t.element):t=>t.depth,getActiveDescendantId:e.accessibilityProvider.getActiveDescendantId&&(t=>e.accessibilityProvider.getActiveDescendantId(t.element))},keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{...e.keyboardNavigationLabelProvider,getKeyboardNavigationLabel(t){return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t.element)}}}}class vz{constructor(e){this.delegate=e}getHeight(e){return this.delegate.getHeight(e.element)}getTemplateId(e){return this.delegate.getTemplateId(e.element)}hasDynamicHeight(e){return!!this.delegate.hasDynamicHeight&&this.delegate.hasDynamicHeight(e.element)}setDynamicHeight(e,t){var i,n;(n=(i=this.delegate).setDynamicHeight)===null||n===void 0||n.call(i,e.element,t)}}var k1;(function(o){o.None="none",o.OnHover="onHover",o.Always="always"})(k1||(k1={}));class $Pe{get elements(){return this._elements}constructor(e,t=[]){this._elements=t,this.disposables=new he,this.onDidChange=Ie.forEach(e,i=>this._elements=i,this.disposables)}dispose(){this.disposables.dispose()}}class zx{constructor(e,t,i,n,s,r={}){var a;this.renderer=e,this.modelProvider=t,this.activeNodes=n,this.renderedIndentGuides=s,this.renderedElements=new Map,this.renderedNodes=new Map,this.indent=zx.DefaultIndent,this.hideTwistiesOfChildlessElements=!1,this.shouldRenderIndentGuides=!1,this.activeIndentNodes=new Set,this.indentGuidesDisposable=J.None,this.disposables=new he,this.templateId=e.templateId,this.updateOptions(r),Ie.map(i,l=>l.node)(this.onDidChangeNodeTwistieState,this,this.disposables),(a=e.onDidChangeTwistieState)===null||a===void 0||a.call(e,this.onDidChangeTwistieState,this,this.disposables)}updateOptions(e={}){if(typeof e.indent<"u"){const t=Tr(e.indent,0,40);if(t!==this.indent){this.indent=t;for(const[i,n]of this.renderedNodes)this.renderTreeElement(i,n)}}if(typeof e.renderIndentGuides<"u"){const t=e.renderIndentGuides!==k1.None;if(t!==this.shouldRenderIndentGuides){this.shouldRenderIndentGuides=t;for(const[i,n]of this.renderedNodes)this._renderIndentGuides(i,n);if(this.indentGuidesDisposable.dispose(),t){const i=new he;this.activeNodes.onDidChange(this._onDidChangeActiveNodes,this,i),this.indentGuidesDisposable=i,this._onDidChangeActiveNodes(this.activeNodes.elements)}}}typeof e.hideTwistiesOfChildlessElements<"u"&&(this.hideTwistiesOfChildlessElements=e.hideTwistiesOfChildlessElements)}renderTemplate(e){const t=ge(e,ye(".monaco-tl-row")),i=ge(t,ye(".monaco-tl-indent")),n=ge(t,ye(".monaco-tl-twistie")),s=ge(t,ye(".monaco-tl-contents")),r=this.renderer.renderTemplate(s);return{container:e,indent:i,twistie:n,indentGuidesDisposable:J.None,templateData:r}}renderElement(e,t,i,n){this.renderedNodes.set(e,i),this.renderedElements.set(e.element,e),this.renderTreeElement(e,i),this.renderer.renderElement(e,t,i.templateData,n)}disposeElement(e,t,i,n){var s,r;i.indentGuidesDisposable.dispose(),(r=(s=this.renderer).disposeElement)===null||r===void 0||r.call(s,e,t,i.templateData,n),typeof n=="number"&&(this.renderedNodes.delete(e),this.renderedElements.delete(e.element))}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}onDidChangeTwistieState(e){const t=this.renderedElements.get(e);t&&this.onDidChangeNodeTwistieState(t)}onDidChangeNodeTwistieState(e){const t=this.renderedNodes.get(e);t&&(this._onDidChangeActiveNodes(this.activeNodes.elements),this.renderTreeElement(e,t))}renderTreeElement(e,t){const i=zx.DefaultIndent+(e.depth-1)*this.indent;t.twistie.style.paddingLeft=`${i}px`,t.indent.style.width=`${i+this.indent-16}px`,e.collapsible?t.container.setAttribute("aria-expanded",String(!e.collapsed)):t.container.removeAttribute("aria-expanded"),t.twistie.classList.remove(...pt.asClassNameArray(Ee.treeItemExpanded));let n=!1;this.renderer.renderTwistie&&(n=this.renderer.renderTwistie(e.element,t.twistie)),e.collapsible&&(!this.hideTwistiesOfChildlessElements||e.visibleChildrenCount>0)?(n||t.twistie.classList.add(...pt.asClassNameArray(Ee.treeItemExpanded)),t.twistie.classList.add("collapsible"),t.twistie.classList.toggle("collapsed",e.collapsed)):t.twistie.classList.remove("collapsible","collapsed"),this._renderIndentGuides(e,t)}_renderIndentGuides(e,t){if(Zo(t.indent),t.indentGuidesDisposable.dispose(),!this.shouldRenderIndentGuides)return;const i=new he,n=this.modelProvider();for(;;){const s=n.getNodeLocation(e),r=n.getParentNodeLocation(s);if(!r)break;const a=n.getNode(r),l=ye(".indent-guide",{style:`width: ${this.indent}px`});this.activeIndentNodes.has(a)&&l.classList.add("active"),t.indent.childElementCount===0?t.indent.appendChild(l):t.indent.insertBefore(l,t.indent.firstElementChild),this.renderedIndentGuides.add(a,l),i.add(lt(()=>this.renderedIndentGuides.delete(a,l))),e=a}t.indentGuidesDisposable=i}_onDidChangeActiveNodes(e){if(!this.shouldRenderIndentGuides)return;const t=new Set,i=this.modelProvider();e.forEach(n=>{const s=i.getNodeLocation(n);try{const r=i.getParentNodeLocation(s);n.collapsible&&n.children.length>0&&!n.collapsed?t.add(n):r&&t.add(i.getNode(r))}catch{}}),this.activeIndentNodes.forEach(n=>{t.has(n)||this.renderedIndentGuides.forEach(n,s=>s.classList.remove("active"))}),t.forEach(n=>{this.activeIndentNodes.has(n)||this.renderedIndentGuides.forEach(n,s=>s.classList.add("active"))}),this.activeIndentNodes=t}dispose(){this.renderedNodes.clear(),this.renderedElements.clear(),this.indentGuidesDisposable.dispose(),cn(this.disposables)}}zx.DefaultIndent=8;class jPe{get totalCount(){return this._totalCount}get matchCount(){return this._matchCount}constructor(e,t,i){this.tree=e,this.keyboardNavigationLabelProvider=t,this._filter=i,this._totalCount=0,this._matchCount=0,this._pattern="",this._lowercasePattern="",this.disposables=new he,e.onWillRefilter(this.reset,this,this.disposables)}filter(e,t){let i=1;if(this._filter){const r=this._filter.filter(e,t);if(typeof r=="boolean"?i=r?1:0:_z(r)?i=Hx(r.visibility):i=r,i===0)return!1}if(this._totalCount++,!this._pattern)return this._matchCount++,{data:Hd.Default,visibility:i};const n=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e),s=Array.isArray(n)?n:[n];for(const r of s){const a=r&&r.toString();if(typeof a>"u")return{data:Hd.Default,visibility:i};let l;if(this.tree.findMatchType===Bv.Contiguous){const c=a.toLowerCase().indexOf(this._lowercasePattern);if(c>-1){l=[Number.MAX_SAFE_INTEGER,0];for(let u=this._lowercasePattern.length;u>0;u--)l.push(c+u-1)}}else l=Ov(this._pattern,this._lowercasePattern,0,a,a.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});if(l)return this._matchCount++,s.length===1?{data:l,visibility:i}:{data:{label:a,score:l},visibility:i}}return this.tree.findMode===zf.Filter?typeof this.tree.options.defaultFindVisibility=="number"?this.tree.options.defaultFindVisibility:this.tree.options.defaultFindVisibility?this.tree.options.defaultFindVisibility(e):2:{data:Hd.Default,visibility:i}}reset(){this._totalCount=0,this._matchCount=0}dispose(){cn(this.disposables)}}var zf;(function(o){o[o.Highlight=0]="Highlight",o[o.Filter=1]="Filter"})(zf||(zf={}));var Bv;(function(o){o[o.Fuzzy=0]="Fuzzy",o[o.Contiguous=1]="Contiguous"})(Bv||(Bv={}));let KPe=class{get pattern(){return this._pattern}get mode(){return this._mode}set mode(e){e!==this._mode&&(this._mode=e,this.widget&&(this.widget.mode=this._mode),this.tree.refilter(),this.render(),this._onDidChangeMode.fire(e))}get matchType(){return this._matchType}set matchType(e){e!==this._matchType&&(this._matchType=e,this.widget&&(this.widget.matchType=this._matchType),this.tree.refilter(),this.render(),this._onDidChangeMatchType.fire(e))}constructor(e,t,i,n,s,r={}){var a,l;this.tree=e,this.view=i,this.filter=n,this.contextViewProvider=s,this.options=r,this._pattern="",this.width=0,this._onDidChangeMode=new Y,this.onDidChangeMode=this._onDidChangeMode.event,this._onDidChangeMatchType=new Y,this.onDidChangeMatchType=this._onDidChangeMatchType.event,this._onDidChangePattern=new Y,this._onDidChangeOpenState=new Y,this.onDidChangeOpenState=this._onDidChangeOpenState.event,this.enabledDisposables=new he,this.disposables=new he,this._mode=(a=e.options.defaultFindMode)!==null&&a!==void 0?a:zf.Highlight,this._matchType=(l=e.options.defaultFindMatchType)!==null&&l!==void 0?l:Bv.Fuzzy,t.onDidSplice(this.onDidSpliceModel,this,this.disposables)}updateOptions(e={}){e.defaultFindMode!==void 0&&(this.mode=e.defaultFindMode),e.defaultFindMatchType!==void 0&&(this.matchType=e.defaultFindMatchType)}onDidSpliceModel(){!this.widget||this.pattern.length===0||(this.tree.refilter(),this.render())}render(){var e,t,i,n;const s=this.filter.totalCount>0&&this.filter.matchCount===0;this.pattern&&s?!((e=this.tree.options.showNotFoundMessage)!==null&&e!==void 0)||e?(t=this.widget)===null||t===void 0||t.showMessage({type:2,content:v("not found","No elements found.")}):(i=this.widget)===null||i===void 0||i.showMessage({type:2}):(n=this.widget)===null||n===void 0||n.clearMessage()}shouldAllowFocus(e){return!this.widget||!this.pattern||this.filter.totalCount>0&&this.filter.matchCount<=1?!0:!Hd.isDefault(e.filterData)}layout(e){var t;this.width=e,(t=this.widget)===null||t===void 0||t.layout(e)}dispose(){this._history=void 0,this._onDidChangePattern.dispose(),this.enabledDisposables.dispose(),this.disposables.dispose()}};function qPe(o,e){return o.position===e.position&&Voe(o,e)}function Voe(o,e){return o.node.element===e.node.element&&o.startIndex===e.startIndex&&o.height===e.height&&o.endIndex===e.endIndex}class GPe{constructor(e=[]){this.stickyNodes=e}get count(){return this.stickyNodes.length}equal(e){return zn(this.stickyNodes,e.stickyNodes,qPe)}lastNodePartiallyVisible(){if(this.count===0)return!1;const e=this.stickyNodes[this.count-1];if(this.count===1)return e.position!==0;const t=this.stickyNodes[this.count-2];return t.position+t.height!==e.position}animationStateChanged(e){if(!zn(this.stickyNodes,e.stickyNodes,Voe)||this.count===0)return!1;const t=this.stickyNodes[this.count-1],i=e.stickyNodes[e.count-1];return t.position!==i.position}}class YPe{constrainStickyScrollNodes(e,t,i){for(let n=0;n<e.length;n++){const s=e[n];if(s.position+s.height>i||n>=t)return e.slice(0,n)}return e}}let zX=class extends J{constructor(e,t,i,n,s,r={}){var a;super(),this.tree=e,this.model=t,this.view=i,this.treeDelegate=s,this.maxWidgetViewRatio=.4;const l=this.validateStickySettings(r);this.stickyScrollMaxItemCount=l.stickyScrollMaxItemCount,this.stickyScrollDelegate=(a=r.stickyScrollDelegate)!==null&&a!==void 0?a:new YPe,this._widget=this._register(new ZPe(i.getScrollableElement(),i,e,n,s,r.accessibilityProvider)),this.onDidChangeHasFocus=this._widget.onDidChangeHasFocus,this.onContextMenu=this._widget.onContextMenu,this._register(i.onDidScroll(()=>this.update())),this._register(i.onDidChangeContentHeight(()=>this.update())),this._register(e.onDidChangeCollapseState(()=>this.update())),this.update()}get height(){return this._widget.height}getNodeAtHeight(e){let t;if(e===0?t=this.view.firstVisibleIndex:t=this.view.indexAt(e+this.view.scrollTop),!(t<0||t>=this.view.length))return this.view.element(t)}update(){const e=this.getNodeAtHeight(0);if(!e||this.tree.scrollTop===0){this._widget.setState(void 0);return}const t=this.findStickyState(e);this._widget.setState(t)}findStickyState(e){const t=[];let i=e,n=0,s=this.getNextStickyNode(i,void 0,n);for(;s&&(t.push(s),n+=s.height,!(t.length<=this.stickyScrollMaxItemCount&&(i=this.getNextVisibleNode(s),!i)));)s=this.getNextStickyNode(i,s.node,n);const r=this.constrainStickyNodes(t);return r.length?new GPe(r):void 0}getNextVisibleNode(e){return this.getNodeAtHeight(e.position+e.height)}getNextStickyNode(e,t,i){const n=this.getAncestorUnderPrevious(e,t);if(n&&!(n===e&&(!this.nodeIsUncollapsedParent(e)||this.nodeTopAlignsWithStickyNodesBottom(e,i))))return this.createStickyScrollNode(n,i)}nodeTopAlignsWithStickyNodesBottom(e,t){const i=this.getNodeIndex(e),n=this.view.getElementTop(i),s=t;return this.view.scrollTop===n-s}createStickyScrollNode(e,t){const i=this.treeDelegate.getHeight(e),{startIndex:n,endIndex:s}=this.getNodeRange(e),r=this.calculateStickyNodePosition(s,t,i);return{node:e,position:r,height:i,startIndex:n,endIndex:s}}getAncestorUnderPrevious(e,t=void 0){let i=e,n=this.getParentNode(i);for(;n;){if(n===t)return i;i=n,n=this.getParentNode(i)}if(t===void 0)return i}calculateStickyNodePosition(e,t,i){let n=this.view.getRelativeTop(e);if(n===null&&this.view.firstVisibleIndex===e&&e+1<this.view.length){const c=this.treeDelegate.getHeight(this.view.element(e)),u=this.view.getRelativeTop(e+1);n=u?u-c/this.view.renderHeight:null}if(n===null)return t;const s=this.view.element(e),r=this.treeDelegate.getHeight(s),l=n*this.view.renderHeight+r;return t+i>l&&t<=l?l-i:t}constrainStickyNodes(e){if(e.length===0)return[];const t=this.view.renderHeight*this.maxWidgetViewRatio,i=e[e.length-1];if(e.length<=this.stickyScrollMaxItemCount&&i.position+i.height<=t)return e;const n=this.stickyScrollDelegate.constrainStickyScrollNodes(e,this.stickyScrollMaxItemCount,t);if(!n.length)return[];const s=n[n.length-1];if(n.length>this.stickyScrollMaxItemCount||s.position+s.height>t)throw new Error("stickyScrollDelegate violates constraints");return n}getParentNode(e){const t=this.model.getNodeLocation(e),i=this.model.getParentNodeLocation(t);return i?this.model.getNode(i):void 0}nodeIsUncollapsedParent(e){const t=this.model.getNodeLocation(e);return this.model.getListRenderCount(t)>1}getNodeIndex(e){const t=this.model.getNodeLocation(e);return this.model.getListIndex(t)}getNodeRange(e){const t=this.model.getNodeLocation(e),i=this.model.getListIndex(t);if(i<0)throw new Error("Node not found in tree");const n=this.model.getListRenderCount(t),s=i+n-1;return{startIndex:i,endIndex:s}}nodePositionTopBelowWidget(e){const t=[];let i=this.getParentNode(e);for(;i;)t.push(i),i=this.getParentNode(i);let n=0;for(let s=0;s<t.length&&s<this.stickyScrollMaxItemCount;s++)n+=this.treeDelegate.getHeight(t[s]);return n}domFocus(){this._widget.domFocus()}focusedLast(){return this._widget.focusedLast()}updateOptions(e={}){if(!e.stickyScrollMaxItemCount)return;const t=this.validateStickySettings(e);this.stickyScrollMaxItemCount!==t.stickyScrollMaxItemCount&&(this.stickyScrollMaxItemCount=t.stickyScrollMaxItemCount,this.update())}validateStickySettings(e){let t=7;return typeof e.stickyScrollMaxItemCount=="number"&&(t=Math.max(e.stickyScrollMaxItemCount,1)),{stickyScrollMaxItemCount:t}}},ZPe=class{constructor(e,t,i,n,s,r){this.view=t,this.tree=i,this.treeRenderers=n,this.treeDelegate=s,this.accessibilityProvider=r,this._previousElements=[],this._previousStateDisposables=new he,this._rootDomNode=ye(".monaco-tree-sticky-container.empty"),e.appendChild(this._rootDomNode);const a=ye(".monaco-tree-sticky-container-shadow");this._rootDomNode.appendChild(a),this.stickyScrollFocus=new QPe(this._rootDomNode,t),this.onDidChangeHasFocus=this.stickyScrollFocus.onDidChangeHasFocus,this.onContextMenu=this.stickyScrollFocus.onContextMenu}get height(){if(!this._previousState)return 0;const e=this._previousState.stickyNodes[this._previousState.count-1];return e.position+e.height}setState(e){const t=!!this._previousState&&this._previousState.count>0,i=!!e&&e.count>0;if(!t&&!i||t&&i&&this._previousState.equal(e))return;if(t!==i&&this.setVisible(i),!i){this._previousState=void 0,this._previousElements=[],this._previousStateDisposables.clear();return}const n=e.stickyNodes[e.count-1];if(this._previousState&&e.animationStateChanged(this._previousState))this._previousElements[this._previousState.count-1].style.top=`${n.position}px`;else{this._previousStateDisposables.clear();const s=Array(e.count);for(let r=e.count-1;r>=0;r--){const a=e.stickyNodes[r],{element:l,disposable:c}=this.createElement(a,r,e.count);s[r]=l,this._rootDomNode.appendChild(l),this._previousStateDisposables.add(c)}this.stickyScrollFocus.updateElements(s,e),this._previousElements=s}this._previousState=e,this._rootDomNode.style.height=`${n.position+n.height}px`}createElement(e,t,i){const n=e.startIndex,s=document.createElement("div");s.style.top=`${e.position}px`,this.tree.options.setRowHeight!==!1&&(s.style.height=`${e.height}px`),this.tree.options.setRowLineHeight!==!1&&(s.style.lineHeight=`${e.height}px`),s.classList.add("monaco-tree-sticky-row"),s.classList.add("monaco-list-row"),s.setAttribute("data-index",`${n}`),s.setAttribute("data-parity",n%2===0?"even":"odd"),s.setAttribute("id",this.view.getElementID(n));const r=this.setAccessibilityAttributes(s,e.node.element,t,i),a=this.treeDelegate.getTemplateId(e.node),l=this.treeRenderers.find(g=>g.templateId===a);if(!l)throw new Error(`No renderer found for template id ${a}`);let c=e.node;c===this.tree.getNode(this.tree.getNodeLocation(e.node))&&(c=new Proxy(e.node,{}));const u=l.renderTemplate(s);l.renderElement(c,e.startIndex,u,e.height);const f=lt(()=>{r.dispose(),l.disposeElement(c,e.startIndex,u,e.height),l.disposeTemplate(u),s.remove()});return{element:s,disposable:f}}setAccessibilityAttributes(e,t,i,n){var s;if(!this.accessibilityProvider)return J.None;this.accessibilityProvider.getSetSize&&e.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(t,i,n))),this.accessibilityProvider.getPosInSet&&e.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(t,i))),this.accessibilityProvider.getRole&&e.setAttribute("role",(s=this.accessibilityProvider.getRole(t))!==null&&s!==void 0?s:"treeitem");const r=this.accessibilityProvider.getAriaLabel(t),a=r&&typeof r!="string"?r:Ad(r),l=zt(u=>{const f=u.readObservable(a);f?e.setAttribute("aria-label",f):e.removeAttribute("aria-label")});typeof r=="string"||r&&e.setAttribute("aria-label",r.get());const c=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(t);return typeof c=="number"&&e.setAttribute("aria-level",`${c}`),e.setAttribute("aria-selected",String(!1)),l}setVisible(e){this._rootDomNode.classList.toggle("empty",!e),e||this.stickyScrollFocus.updateElements([],void 0)}domFocus(){this.stickyScrollFocus.domFocus()}focusedLast(){return this.stickyScrollFocus.focusedLast()}dispose(){this.stickyScrollFocus.dispose(),this._previousStateDisposables.dispose(),this._rootDomNode.remove()}};class QPe extends J{get domHasFocus(){return this._domHasFocus}set domHasFocus(e){e!==this._domHasFocus&&(this._onDidChangeHasFocus.fire(e),this._domHasFocus=e)}constructor(e,t){super(),this.container=e,this.view=t,this.focusedIndex=-1,this.elements=[],this._onDidChangeHasFocus=new Y,this.onDidChangeHasFocus=this._onDidChangeHasFocus.event,this._onContextMenu=new Y,this.onContextMenu=this._onContextMenu.event,this._domHasFocus=!1,this.container.addEventListener("focus",()=>this.onFocus()),this.container.addEventListener("blur",()=>this.onBlur()),this._register(this.view.onDidFocus(()=>this.toggleStickyScrollFocused(!1))),this._register(this.view.onKeyDown(i=>this.onKeyDown(i))),this._register(this.view.onMouseDown(i=>this.onMouseDown(i))),this._register(this.view.onContextMenu(i=>this.handleContextMenu(i)))}handleContextMenu(e){const t=e.browserEvent.target;if(!Wx(t)&&!ML(t)){this.focusedLast()&&this.view.domFocus();return}if(!pp(e.browserEvent)){if(!this.state)throw new Error("Context menu should not be triggered when state is undefined");const r=this.state.stickyNodes.findIndex(a=>{var l;return a.node.element===((l=e.element)===null||l===void 0?void 0:l.element)});if(r===-1)throw new Error("Context menu should not be triggered when element is not in sticky scroll widget");this.container.focus(),this.setFocus(r);return}if(!this.state||this.focusedIndex<0)throw new Error("Context menu key should not be triggered when focus is not in sticky scroll widget");const n=this.state.stickyNodes[this.focusedIndex].node.element,s=this.elements[this.focusedIndex];this._onContextMenu.fire({element:n,anchor:s,browserEvent:e.browserEvent,isStickyScroll:!0})}onKeyDown(e){if(this.domHasFocus&&this.state){if(e.key==="ArrowUp")this.setFocusedElement(Math.max(0,this.focusedIndex-1)),e.preventDefault(),e.stopPropagation();else if(e.key==="ArrowDown"||e.key==="ArrowRight"){if(this.focusedIndex>=this.state.count-1){const t=this.state.stickyNodes[this.state.count-1].startIndex+1;this.view.domFocus(),this.view.setFocus([t]),this.scrollNodeUnderWidget(t,this.state)}else this.setFocusedElement(this.focusedIndex+1);e.preventDefault(),e.stopPropagation()}}}onMouseDown(e){const t=e.browserEvent.target;!Wx(t)&&!ML(t)||(e.browserEvent.preventDefault(),e.browserEvent.stopPropagation())}updateElements(e,t){if(t&&t.count===0)throw new Error("Sticky scroll state must be undefined when there are no sticky nodes");if(t&&t.count!==e.length)throw new Error("Sticky scroll focus received illigel state");const i=this.focusedIndex;if(this.removeFocus(),this.elements=e,this.state=t,t){const n=Tr(i,0,t.count-1);this.setFocus(n)}else this.domHasFocus&&this.view.domFocus();this.container.tabIndex=t?0:-1}setFocusedElement(e){const t=this.state;if(!t)throw new Error("Cannot set focus when state is undefined");if(this.setFocus(e),!(e<t.count-1)&&t.lastNodePartiallyVisible()){const i=t.stickyNodes[e];this.scrollNodeUnderWidget(i.endIndex+1,t)}}scrollNodeUnderWidget(e,t){const i=t.stickyNodes[t.count-1],n=t.count>1?t.stickyNodes[t.count-2]:void 0,s=this.view.getElementTop(e),r=n?n.position+n.height+i.height:i.height;this.view.scrollTop=s-r}domFocus(){if(!this.state)throw new Error("Cannot focus when state is undefined");this.container.focus()}focusedLast(){return this.state?this.view.getHTMLElement().classList.contains("sticky-scroll-focused"):!1}removeFocus(){this.focusedIndex!==-1&&(this.toggleElementFocus(this.elements[this.focusedIndex],!1),this.focusedIndex=-1)}setFocus(e){if(0>e)throw new Error("addFocus() can not remove focus");if(!this.state&&e>=0)throw new Error("Cannot set focus index when state is undefined");if(this.state&&e>=this.state.count)throw new Error("Cannot set focus index to an index that does not exist");const t=this.focusedIndex;t>=0&&this.toggleElementFocus(this.elements[t],!1),e>=0&&this.toggleElementFocus(this.elements[e],!0),this.focusedIndex=e}toggleElementFocus(e,t){this.toggleElementActiveFocus(e,t&&this.domHasFocus),this.toggleElementPassiveFocus(e,t)}toggleCurrentElementActiveFocus(e){this.focusedIndex!==-1&&this.toggleElementActiveFocus(this.elements[this.focusedIndex],e)}toggleElementActiveFocus(e,t){e.classList.toggle("focused",t)}toggleElementPassiveFocus(e,t){e.classList.toggle("passive-focused",t)}toggleStickyScrollFocused(e){this.view.getHTMLElement().classList.toggle("sticky-scroll-focused",e)}onFocus(){if(!this.state||this.elements.length===0)throw new Error("Cannot focus when state is undefined or elements are empty");this.domHasFocus=!0,this.toggleStickyScrollFocused(!0),this.toggleCurrentElementActiveFocus(!0),this.focusedIndex===-1&&this.setFocus(0)}onBlur(){this.domHasFocus=!1,this.toggleCurrentElementActiveFocus(!1)}dispose(){this.toggleStickyScrollFocused(!1),this._onDidChangeHasFocus.fire(!1),super.dispose()}}function NT(o){let e=lv.Unknown;return Q5(o.browserEvent.target,"monaco-tl-twistie","monaco-tl-row")?e=lv.Twistie:Q5(o.browserEvent.target,"monaco-tl-contents","monaco-tl-row")?e=lv.Element:Q5(o.browserEvent.target,"monaco-tree-type-filter","monaco-list")&&(e=lv.Filter),{browserEvent:o.browserEvent,element:o.element?o.element.element:null,target:e}}function XPe(o){const e=Wx(o.browserEvent.target);return{element:o.element?o.element.element:null,browserEvent:o.browserEvent,anchor:o.anchor,isStickyScroll:e}}function PN(o,e){e(o),o.children.forEach(t=>PN(t,e))}class tB{get nodeSet(){return this._nodeSet||(this._nodeSet=this.createNodeSet()),this._nodeSet}constructor(e,t){this.getFirstViewElementWithTrait=e,this.identityProvider=t,this.nodes=[],this._onDidChange=new Y,this.onDidChange=this._onDidChange.event}set(e,t){!(t!=null&&t.__forceEvent)&&zn(this.nodes,e)||this._set(e,!1,t)}_set(e,t,i){if(this.nodes=[...e],this.elements=void 0,this._nodeSet=void 0,!t){const n=this;this._onDidChange.fire({get elements(){return n.get()},browserEvent:i})}}get(){return this.elements||(this.elements=this.nodes.map(e=>e.element)),[...this.elements]}getNodes(){return this.nodes}has(e){return this.nodeSet.has(e)}onDidModelSplice({insertedNodes:e,deletedNodes:t}){if(!this.identityProvider){const l=this.createNodeSet(),c=u=>l.delete(u);t.forEach(u=>PN(u,c)),this.set([...l.values()]);return}const i=new Set,n=l=>i.add(this.identityProvider.getId(l.element).toString());t.forEach(l=>PN(l,n));const s=new Map,r=l=>s.set(this.identityProvider.getId(l.element).toString(),l);e.forEach(l=>PN(l,r));const a=[];for(const l of this.nodes){const c=this.identityProvider.getId(l.element).toString();if(!i.has(c))a.push(l);else{const f=s.get(c);f&&f.visible&&a.push(f)}}if(this.nodes.length>0&&a.length===0){const l=this.getFirstViewElementWithTrait();l&&a.push(l)}this._set(a,!0)}createNodeSet(){const e=new Set;for(const t of this.nodes)e.add(t);return e}}class JPe extends xoe{constructor(e,t,i){super(e),this.tree=t,this.stickyScrollProvider=i}onViewPointer(e){if(woe(e.browserEvent.target)||Qp(e.browserEvent.target)||tL(e.browserEvent.target)||e.browserEvent.isHandledByList)return;const t=e.element;if(!t)return super.onViewPointer(e);if(this.isSelectionRangeChangeEvent(e)||this.isSelectionSingleChangeEvent(e))return super.onViewPointer(e);const i=e.browserEvent.target,n=i.classList.contains("monaco-tl-twistie")||i.classList.contains("monaco-icon-label")&&i.classList.contains("folder-icon")&&e.browserEvent.offsetX<16,s=ML(e.browserEvent.target);let r=!1;if(s?r=!0:typeof this.tree.expandOnlyOnTwistieClick=="function"?r=this.tree.expandOnlyOnTwistieClick(t.element):r=!!this.tree.expandOnlyOnTwistieClick,s)this.handleStickyScrollMouseEvent(e,t);else{if(r&&!n&&e.browserEvent.detail!==2)return super.onViewPointer(e);if(!this.tree.expandOnDoubleClick&&e.browserEvent.detail===2)return super.onViewPointer(e)}if(t.collapsible&&(!s||n)){const a=this.tree.getNodeLocation(t),l=e.browserEvent.altKey;if(this.tree.setFocus([a]),this.tree.toggleCollapsed(a,l),r&&n){e.browserEvent.isHandledByList=!0;return}}s||super.onViewPointer(e)}handleStickyScrollMouseEvent(e,t){if(yAe(e.browserEvent.target)||SAe(e.browserEvent.target))return;const i=this.stickyScrollProvider();if(!i)throw new Error("Sticky scroll controller not found");const n=this.list.indexOf(t),s=this.list.getElementTop(n),r=i.nodePositionTopBelowWidget(t);this.tree.scrollTop=s-r,this.list.domFocus(),this.list.setFocus([n]),this.list.setSelection([n])}onDoubleClick(e){e.browserEvent.target.classList.contains("monaco-tl-twistie")||!this.tree.expandOnDoubleClick||e.browserEvent.isHandledByList||super.onDoubleClick(e)}onMouseDown(e){const t=e.browserEvent.target;if(!Wx(t)&&!ML(t)){super.onMouseDown(e);return}}onContextMenu(e){const t=e.browserEvent.target;if(!Wx(t)&&!ML(t)){super.onContextMenu(e);return}}}class eOe extends Ml{constructor(e,t,i,n,s,r,a,l){super(e,t,i,n,l),this.focusTrait=s,this.selectionTrait=r,this.anchorTrait=a}createMouseController(e){return new JPe(this,e.tree,e.stickyScrollProvider)}splice(e,t,i=[]){if(super.splice(e,t,i),i.length===0)return;const n=[],s=[];let r;i.forEach((a,l)=>{this.focusTrait.has(a)&&n.push(e+l),this.selectionTrait.has(a)&&s.push(e+l),this.anchorTrait.has(a)&&(r=e+l)}),n.length>0&&super.setFocus(eg([...super.getFocus(),...n])),s.length>0&&super.setSelection(eg([...super.getSelection(),...s])),typeof r=="number"&&super.setAnchor(r)}setFocus(e,t,i=!1){super.setFocus(e,t),i||this.focusTrait.set(e.map(n=>this.element(n)),t)}setSelection(e,t,i=!1){super.setSelection(e,t),i||this.selectionTrait.set(e.map(n=>this.element(n)),t)}setAnchor(e,t=!1){super.setAnchor(e),t||(typeof e>"u"?this.anchorTrait.set([]):this.anchorTrait.set([this.element(e)]))}}class Hoe{get onDidScroll(){return this.view.onDidScroll}get onDidChangeFocus(){return this.eventBufferer.wrapEvent(this.focus.onDidChange)}get onDidChangeSelection(){return this.eventBufferer.wrapEvent(this.selection.onDidChange)}get onMouseDblClick(){return Ie.filter(Ie.map(this.view.onMouseDblClick,NT),e=>e.target!==lv.Filter)}get onMouseOver(){return Ie.map(this.view.onMouseOver,NT)}get onMouseOut(){return Ie.map(this.view.onMouseOut,NT)}get onContextMenu(){var e,t;return Ie.any(Ie.filter(Ie.map(this.view.onContextMenu,XPe),i=>!i.isStickyScroll),(t=(e=this.stickyScrollController)===null||e===void 0?void 0:e.onContextMenu)!==null&&t!==void 0?t:Ie.None)}get onPointer(){return Ie.map(this.view.onPointer,NT)}get onKeyDown(){return this.view.onKeyDown}get onDidFocus(){return this.view.onDidFocus}get onDidChangeModel(){return Ie.signal(this.model.onDidSplice)}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get findMode(){var e,t;return(t=(e=this.findController)===null||e===void 0?void 0:e.mode)!==null&&t!==void 0?t:zf.Highlight}set findMode(e){this.findController&&(this.findController.mode=e)}get findMatchType(){var e,t;return(t=(e=this.findController)===null||e===void 0?void 0:e.matchType)!==null&&t!==void 0?t:Bv.Fuzzy}set findMatchType(e){this.findController&&(this.findController.matchType=e)}get expandOnDoubleClick(){return typeof this._options.expandOnDoubleClick>"u"?!0:this._options.expandOnDoubleClick}get expandOnlyOnTwistieClick(){return typeof this._options.expandOnlyOnTwistieClick>"u"?!0:this._options.expandOnlyOnTwistieClick}get onDidDispose(){return this.view.onDidDispose}constructor(e,t,i,n,s={}){var r;this._user=e,this._options=s,this.eventBufferer=new RV,this.onDidChangeFindOpenState=Ie.None,this.onDidChangeStickyScrollFocused=Ie.None,this.disposables=new he,this._onWillRefilter=new Y,this.onWillRefilter=this._onWillRefilter.event,this._onDidUpdateOptions=new Y,this.treeDelegate=new vz(i);const a=new fY,l=new fY,c=this.disposables.add(new $Pe(l.event)),u=new nH;this.renderers=n.map(b=>new zx(b,()=>this.model,a.event,c,u,s));for(const b of this.renderers)this.disposables.add(b);let f;s.keyboardNavigationLabelProvider&&(f=new jPe(this,s.keyboardNavigationLabelProvider,s.filter),s={...s,filter:f},this.disposables.add(f)),this.focus=new tB(()=>this.view.getFocusedElements()[0],s.identityProvider),this.selection=new tB(()=>this.view.getSelectedElements()[0],s.identityProvider),this.anchor=new tB(()=>this.view.getAnchorElement(),s.identityProvider),this.view=new eOe(e,t,this.treeDelegate,this.renderers,this.focus,this.selection,this.anchor,{...UPe(()=>this.model,s),tree:this,stickyScrollProvider:()=>this.stickyScrollController}),this.model=this.createModel(e,this.view,s),a.input=this.model.onDidChangeCollapseState;const g=Ie.forEach(this.model.onDidSplice,b=>{this.eventBufferer.bufferEvents(()=>{this.focus.onDidModelSplice(b),this.selection.onDidModelSplice(b)})},this.disposables);g(()=>null,null,this.disposables);const p=this.disposables.add(new Y),_=this.disposables.add(new Kc(0));if(this.disposables.add(Ie.any(g,this.focus.onDidChange,this.selection.onDidChange)(()=>{_.trigger(()=>{const b=new Set;for(const y of this.focus.getNodes())b.add(y);for(const y of this.selection.getNodes())b.add(y);p.fire([...b.values()])})})),l.input=p.event,s.keyboardSupport!==!1){const b=Ie.chain(this.view.onKeyDown,y=>y.filter(S=>!Qp(S.target)).map(S=>new _n(S)));Ie.chain(b,y=>y.filter(S=>S.keyCode===15))(this.onLeftArrow,this,this.disposables),Ie.chain(b,y=>y.filter(S=>S.keyCode===17))(this.onRightArrow,this,this.disposables),Ie.chain(b,y=>y.filter(S=>S.keyCode===10))(this.onSpace,this,this.disposables)}if((!((r=s.findWidgetEnabled)!==null&&r!==void 0)||r)&&s.keyboardNavigationLabelProvider&&s.contextViewProvider){const b=this.options.findWidgetStyles?{styles:this.options.findWidgetStyles}:void 0;this.findController=new KPe(this,this.model,this.view,f,s.contextViewProvider,b),this.focusNavigationFilter=y=>this.findController.shouldAllowFocus(y),this.onDidChangeFindOpenState=this.findController.onDidChangeOpenState,this.disposables.add(this.findController),this.onDidChangeFindMode=this.findController.onDidChangeMode,this.onDidChangeFindMatchType=this.findController.onDidChangeMatchType}else this.onDidChangeFindMode=Ie.None,this.onDidChangeFindMatchType=Ie.None;s.enableStickyScroll&&(this.stickyScrollController=new zX(this,this.model,this.view,this.renderers,this.treeDelegate,s),this.onDidChangeStickyScrollFocused=this.stickyScrollController.onDidChangeHasFocus),this.styleElement=xl(this.view.getHTMLElement()),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===k1.Always)}updateOptions(e={}){var t;this._options={...this._options,...e};for(const i of this.renderers)i.updateOptions(e);this.view.updateOptions(this._options),(t=this.findController)===null||t===void 0||t.updateOptions(e),this.updateStickyScroll(e),this._onDidUpdateOptions.fire(this._options),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===k1.Always)}get options(){return this._options}updateStickyScroll(e){var t;!this.stickyScrollController&&this._options.enableStickyScroll?(this.stickyScrollController=new zX(this,this.model,this.view,this.renderers,this.treeDelegate,this._options),this.onDidChangeStickyScrollFocused=this.stickyScrollController.onDidChangeHasFocus):this.stickyScrollController&&!this._options.enableStickyScroll&&(this.onDidChangeStickyScrollFocused=Ie.None,this.stickyScrollController.dispose(),this.stickyScrollController=void 0),(t=this.stickyScrollController)===null||t===void 0||t.updateOptions(e)}getHTMLElement(){return this.view.getHTMLElement()}get scrollTop(){return this.view.scrollTop}set scrollTop(e){this.view.scrollTop=e}get scrollHeight(){return this.view.scrollHeight}get renderHeight(){return this.view.renderHeight}get ariaLabel(){return this.view.ariaLabel}set ariaLabel(e){this.view.ariaLabel=e}domFocus(){var e;!((e=this.stickyScrollController)===null||e===void 0)&&e.focusedLast()?this.stickyScrollController.domFocus():this.view.domFocus()}layout(e,t){var i;this.view.layout(e,t),om(t)&&((i=this.findController)===null||i===void 0||i.layout(t))}style(e){var t;const i=`.${this.view.domId}`,n=[];e.treeIndentGuidesStroke&&(n.push(`.monaco-list${i}:hover .monaco-tl-indent > .indent-guide, .monaco-list${i}.always .monaco-tl-indent > .indent-guide  { border-color: ${e.treeInactiveIndentGuidesStroke}; }`),n.push(`.monaco-list${i} .monaco-tl-indent > .indent-guide.active { border-color: ${e.treeIndentGuidesStroke}; }`)),e.listBackground&&(n.push(`.monaco-list${i} .monaco-scrollable-element .monaco-tree-sticky-container { background-color: ${e.listBackground}; }`),n.push(`.monaco-list${i} .monaco-scrollable-element .monaco-tree-sticky-container .monaco-tree-sticky-row { background-color: ${e.listBackground}; }`)),e.listFocusForeground&&(n.push(`.monaco-list${i}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),n.push(`.monaco-list${i}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused { color: inherit; }`));const s=Kf(e.listFocusAndSelectionOutline,Kf(e.listSelectionOutline,(t=e.listFocusOutline)!==null&&t!==void 0?t:""));s&&(n.push(`.monaco-list${i}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused.selected { outline: 1px solid ${s}; outline-offset: -1px;}`),n.push(`.monaco-list${i}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused.selected { outline: inherit;}`)),e.listFocusOutline&&(n.push(`.monaco-list${i}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }`),n.push(`.monaco-list${i}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused { outline: inherit; }`),n.push(`.monaco-workbench.context-menu-visible .monaco-list${i}.last-focused.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.passive-focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }`),n.push(`.monaco-workbench.context-menu-visible .monaco-list${i}.last-focused.sticky-scroll-focused .monaco-list-rows .monaco-list-row.focused { outline: inherit; }`),n.push(`.monaco-workbench.context-menu-visible .monaco-list${i}.last-focused:not(.sticky-scroll-focused) .monaco-tree-sticky-container .monaco-list-rows .monaco-list-row.focused { outline: inherit; }`)),this.styleElement.textContent=n.join(`
`),this.view.style(e)}getParentElement(e){const t=this.model.getParentNodeLocation(e);return this.model.getNode(t).element}getFirstElementChild(e){return this.model.getFirstElementChild(e)}getNode(e){return this.model.getNode(e)}getNodeLocation(e){return this.model.getNodeLocation(e)}collapse(e,t=!1){return this.model.setCollapsed(e,!0,t)}expand(e,t=!1){return this.model.setCollapsed(e,!1,t)}toggleCollapsed(e,t=!1){return this.model.setCollapsed(e,void 0,t)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}refilter(){this._onWillRefilter.fire(void 0),this.model.refilter()}setSelection(e,t){this.eventBufferer.bufferEvents(()=>{const i=e.map(s=>this.model.getNode(s));this.selection.set(i,t);const n=e.map(s=>this.model.getListIndex(s)).filter(s=>s>-1);this.view.setSelection(n,t,!0)})}getSelection(){return this.selection.get()}setFocus(e,t){this.eventBufferer.bufferEvents(()=>{const i=e.map(s=>this.model.getNode(s));this.focus.set(i,t);const n=e.map(s=>this.model.getListIndex(s)).filter(s=>s>-1);this.view.setFocus(n,t,!0)})}focusNext(e=1,t=!1,i,n=pp(i)&&i.altKey?void 0:this.focusNavigationFilter){this.view.focusNext(e,t,i,n)}focusPrevious(e=1,t=!1,i,n=pp(i)&&i.altKey?void 0:this.focusNavigationFilter){this.view.focusPrevious(e,t,i,n)}focusNextPage(e,t=pp(e)&&e.altKey?void 0:this.focusNavigationFilter){return this.view.focusNextPage(e,t)}focusPreviousPage(e,t=pp(e)&&e.altKey?void 0:this.focusNavigationFilter){return this.view.focusPreviousPage(e,t,()=>{var i,n;return(n=(i=this.stickyScrollController)===null||i===void 0?void 0:i.height)!==null&&n!==void 0?n:0})}focusFirst(e,t=pp(e)&&e.altKey?void 0:this.focusNavigationFilter){this.view.focusFirst(e,t)}getFocus(){return this.focus.get()}reveal(e,t){this.model.expandTo(e);const i=this.model.getListIndex(e);if(i!==-1)if(!this.stickyScrollController)this.view.reveal(i,t);else{const n=this.stickyScrollController.nodePositionTopBelowWidget(this.getNode(e));this.view.reveal(i,t,n)}}onLeftArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const i=t[0],n=this.model.getNodeLocation(i);if(!this.model.setCollapsed(n,!0)){const r=this.model.getParentNodeLocation(n);if(!r)return;const a=this.model.getListIndex(r);this.view.reveal(a),this.view.setFocus([a])}}onRightArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const i=t[0],n=this.model.getNodeLocation(i);if(!this.model.setCollapsed(n,!1)){if(!i.children.some(l=>l.visible))return;const[r]=this.view.getFocus(),a=r+1;this.view.reveal(a),this.view.setFocus([a])}}onSpace(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const i=t[0],n=this.model.getNodeLocation(i),s=e.browserEvent.altKey;this.model.setCollapsed(n,void 0,s)}dispose(){var e;cn(this.disposables),(e=this.stickyScrollController)===null||e===void 0||e.dispose(),this.view.dispose()}}class bz{constructor(e,t,i={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.nodesByIdentity=new Map,this.model=new VPe(e,t,null,i),this.onDidSplice=this.model.onDidSplice,this.onDidChangeCollapseState=this.model.onDidChangeCollapseState,this.onDidChangeRenderNodeCount=this.model.onDidChangeRenderNodeCount,i.sorter&&(this.sorter={compare(n,s){return i.sorter.compare(n.element,s.element)}}),this.identityProvider=i.identityProvider}setChildren(e,t=ii.empty(),i={}){const n=this.getElementLocation(e);this._setChildren(n,this.preserveCollapseState(t),i)}_setChildren(e,t=ii.empty(),i){const n=new Set,s=new Set,r=l=>{var c;if(l.element===null)return;const u=l;if(n.add(u.element),this.nodes.set(u.element,u),this.identityProvider){const f=this.identityProvider.getId(u.element).toString();s.add(f),this.nodesByIdentity.set(f,u)}(c=i.onDidCreateNode)===null||c===void 0||c.call(i,u)},a=l=>{var c;if(l.element===null)return;const u=l;if(n.has(u.element)||this.nodes.delete(u.element),this.identityProvider){const f=this.identityProvider.getId(u.element).toString();s.has(f)||this.nodesByIdentity.delete(f)}(c=i.onDidDeleteNode)===null||c===void 0||c.call(i,u)};this.model.splice([...e,0],Number.MAX_VALUE,t,{...i,onDidCreateNode:r,onDidDeleteNode:a})}preserveCollapseState(e=ii.empty()){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),ii.map(e,t=>{let i=this.nodes.get(t.element);if(!i&&this.identityProvider){const r=this.identityProvider.getId(t.element).toString();i=this.nodesByIdentity.get(r)}if(!i){let r;return typeof t.collapsed>"u"?r=void 0:t.collapsed===fl.Collapsed||t.collapsed===fl.PreserveOrCollapsed?r=!0:t.collapsed===fl.Expanded||t.collapsed===fl.PreserveOrExpanded?r=!1:r=!!t.collapsed,{...t,children:this.preserveCollapseState(t.children),collapsed:r}}const n=typeof t.collapsible=="boolean"?t.collapsible:i.collapsible;let s;return typeof t.collapsed>"u"||t.collapsed===fl.PreserveOrCollapsed||t.collapsed===fl.PreserveOrExpanded?s=i.collapsed:t.collapsed===fl.Collapsed?s=!0:t.collapsed===fl.Expanded?s=!1:s=!!t.collapsed,{...t,collapsible:n,collapsed:s,children:this.preserveCollapseState(t.children)}})}rerender(e){const t=this.getElementLocation(e);this.model.rerender(t)}getFirstElementChild(e=null){const t=this.getElementLocation(e);return this.model.getFirstElementChild(t)}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getElementLocation(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getElementLocation(e);return this.model.getListRenderCount(t)}isCollapsible(e){const t=this.getElementLocation(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const i=this.getElementLocation(e);return this.model.setCollapsible(i,t)}isCollapsed(e){const t=this.getElementLocation(e);return this.model.isCollapsed(t)}setCollapsed(e,t,i){const n=this.getElementLocation(e);return this.model.setCollapsed(n,t,i)}expandTo(e){const t=this.getElementLocation(e);this.model.expandTo(t)}refilter(){this.model.refilter()}getNode(e=null){if(e===null)return this.model.getNode(this.model.rootRef);const t=this.nodes.get(e);if(!t)throw new _l(this.user,`Tree element not found: ${e}`);return t}getNodeLocation(e){return e.element}getParentNodeLocation(e){if(e===null)throw new _l(this.user,"Invalid getParentNodeLocation call");const t=this.nodes.get(e);if(!t)throw new _l(this.user,`Tree element not found: ${e}`);const i=this.model.getNodeLocation(t),n=this.model.getParentNodeLocation(i);return this.model.getNode(n).element}getElementLocation(e){if(e===null)return[];const t=this.nodes.get(e);if(!t)throw new _l(this.user,`Tree element not found: ${e}`);return this.model.getNodeLocation(t)}}function ON(o){const e=[o.element],t=o.incompressible||!1;return{element:{elements:e,incompressible:t},children:ii.map(ii.from(o.children),ON),collapsible:o.collapsible,collapsed:o.collapsed}}function FN(o){const e=[o.element],t=o.incompressible||!1;let i,n;for(;[n,i]=ii.consume(ii.from(o.children),2),!(n.length!==1||n[0].incompressible);)o=n[0],e.push(o.element);return{element:{elements:e,incompressible:t},children:ii.map(ii.concat(n,i),FN),collapsible:o.collapsible,collapsed:o.collapsed}}function B8(o,e=0){let t;return e<o.element.elements.length-1?t=[B8(o,e+1)]:t=ii.map(ii.from(o.children),i=>B8(i,0)),e===0&&o.element.incompressible?{element:o.element.elements[e],children:t,incompressible:!0,collapsible:o.collapsible,collapsed:o.collapsed}:{element:o.element.elements[e],children:t,collapsible:o.collapsible,collapsed:o.collapsed}}function UX(o){return B8(o,0)}function zoe(o,e,t){return o.element===e?{...o,children:t}:{...o,children:ii.map(ii.from(o.children),i=>zoe(i,e,t))}}const tOe=o=>({getId(e){return e.elements.map(t=>o.getId(t).toString()).join("\0")}});class iOe{get onDidSplice(){return this.model.onDidSplice}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get onDidChangeRenderNodeCount(){return this.model.onDidChangeRenderNodeCount}constructor(e,t,i={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.model=new bz(e,t,i),this.enabled=typeof i.compressionEnabled>"u"?!0:i.compressionEnabled,this.identityProvider=i.identityProvider}setChildren(e,t=ii.empty(),i){const n=i.diffIdentityProvider&&tOe(i.diffIdentityProvider);if(e===null){const _=ii.map(t,this.enabled?FN:ON);this._setChildren(null,_,{diffIdentityProvider:n,diffDepth:1/0});return}const s=this.nodes.get(e);if(!s)throw new _l(this.user,"Unknown compressed tree node");const r=this.model.getNode(s),a=this.model.getParentNodeLocation(s),l=this.model.getNode(a),c=UX(r),u=zoe(c,e,t),f=(this.enabled?FN:ON)(u),g=i.diffIdentityProvider?(_,b)=>i.diffIdentityProvider.getId(_)===i.diffIdentityProvider.getId(b):void 0;if(zn(f.element.elements,r.element.elements,g)){this._setChildren(s,f.children||ii.empty(),{diffIdentityProvider:n,diffDepth:1});return}const p=l.children.map(_=>_===r?f:_);this._setChildren(l.element,p,{diffIdentityProvider:n,diffDepth:r.depth-l.depth})}isCompressionEnabled(){return this.enabled}setCompressionEnabled(e){if(e===this.enabled)return;this.enabled=e;const i=this.model.getNode().children,n=ii.map(i,UX),s=ii.map(n,e?FN:ON);this._setChildren(null,s,{diffIdentityProvider:this.identityProvider,diffDepth:1/0})}_setChildren(e,t,i){const n=new Set,s=a=>{for(const l of a.element.elements)n.add(l),this.nodes.set(l,a.element)},r=a=>{for(const l of a.element.elements)n.has(l)||this.nodes.delete(l)};this.model.setChildren(e,t,{...i,onDidCreateNode:s,onDidDeleteNode:r})}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getCompressedNode(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getCompressedNode(e);return this.model.getListRenderCount(t)}getNode(e){if(typeof e>"u")return this.model.getNode();const t=this.getCompressedNode(e);return this.model.getNode(t)}getNodeLocation(e){const t=this.model.getNodeLocation(e);return t===null?null:t.elements[t.elements.length-1]}getParentNodeLocation(e){const t=this.getCompressedNode(e),i=this.model.getParentNodeLocation(t);return i===null?null:i.elements[i.elements.length-1]}getFirstElementChild(e){const t=this.getCompressedNode(e);return this.model.getFirstElementChild(t)}isCollapsible(e){const t=this.getCompressedNode(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const i=this.getCompressedNode(e);return this.model.setCollapsible(i,t)}isCollapsed(e){const t=this.getCompressedNode(e);return this.model.isCollapsed(t)}setCollapsed(e,t,i){const n=this.getCompressedNode(e);return this.model.setCollapsed(n,t,i)}expandTo(e){const t=this.getCompressedNode(e);this.model.expandTo(t)}rerender(e){const t=this.getCompressedNode(e);this.model.rerender(t)}refilter(){this.model.refilter()}getCompressedNode(e){if(e===null)return null;const t=this.nodes.get(e);if(!t)throw new _l(this.user,`Tree element not found: ${e}`);return t}}const nOe=o=>o[o.length-1];class Cz{get element(){return this.node.element===null?null:this.unwrapper(this.node.element)}get children(){return this.node.children.map(e=>new Cz(this.unwrapper,e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e,t){this.unwrapper=e,this.node=t}}function sOe(o,e){return{splice(t,i,n){e.splice(t,i,n.map(s=>o.map(s)))},updateElementHeight(t,i){e.updateElementHeight(t,i)}}}function oOe(o,e){return{...e,identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(o(t))}},sorter:e.sorter&&{compare(t,i){return e.sorter.compare(t.elements[0],i.elements[0])}},filter:e.filter&&{filter(t,i){return e.filter.filter(o(t),i)}}}}class rOe{get onDidSplice(){return Ie.map(this.model.onDidSplice,({insertedNodes:e,deletedNodes:t})=>({insertedNodes:e.map(i=>this.nodeMapper.map(i)),deletedNodes:t.map(i=>this.nodeMapper.map(i))}))}get onDidChangeCollapseState(){return Ie.map(this.model.onDidChangeCollapseState,({node:e,deep:t})=>({node:this.nodeMapper.map(e),deep:t}))}get onDidChangeRenderNodeCount(){return Ie.map(this.model.onDidChangeRenderNodeCount,e=>this.nodeMapper.map(e))}constructor(e,t,i={}){this.rootRef=null,this.elementMapper=i.elementMapper||nOe;const n=s=>this.elementMapper(s.elements);this.nodeMapper=new mz(s=>new Cz(n,s)),this.model=new iOe(e,sOe(this.nodeMapper,t),oOe(n,i))}setChildren(e,t=ii.empty(),i={}){this.model.setChildren(e,t,i)}isCompressionEnabled(){return this.model.isCompressionEnabled()}setCompressionEnabled(e){this.model.setCompressionEnabled(e)}has(e){return this.model.has(e)}getListIndex(e){return this.model.getListIndex(e)}getListRenderCount(e){return this.model.getListRenderCount(e)}getNode(e){return this.nodeMapper.map(this.model.getNode(e))}getNodeLocation(e){return e.element}getParentNodeLocation(e){return this.model.getParentNodeLocation(e)}getFirstElementChild(e){const t=this.model.getFirstElementChild(e);return t===null||typeof t>"u"?t:this.elementMapper(t.elements)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}setCollapsed(e,t,i){return this.model.setCollapsed(e,t,i)}expandTo(e){return this.model.expandTo(e)}rerender(e){return this.model.rerender(e)}refilter(){return this.model.refilter()}getCompressedTreeNode(e=null){return this.model.getNode(e)}}var aOe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class wz extends Hoe{get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}constructor(e,t,i,n,s={}){super(e,t,i,n,s),this.user=e}setChildren(e,t=ii.empty(),i){this.model.setChildren(e,t,i)}rerender(e){if(e===void 0){this.view.rerender();return}this.model.rerender(e)}hasElement(e){return this.model.has(e)}createModel(e,t,i){return new bz(e,t,i)}}class Uoe{get compressedTreeNodeProvider(){return this._compressedTreeNodeProvider()}constructor(e,t,i){this._compressedTreeNodeProvider=e,this.stickyScrollDelegate=t,this.renderer=i,this.templateId=i.templateId,i.onDidChangeTwistieState&&(this.onDidChangeTwistieState=i.onDidChangeTwistieState)}renderTemplate(e){return{compressedTreeNode:void 0,data:this.renderer.renderTemplate(e)}}renderElement(e,t,i,n){let s=this.stickyScrollDelegate.getCompressedNode(e);s||(s=this.compressedTreeNodeProvider.getCompressedTreeNode(e.element)),s.element.elements.length===1?(i.compressedTreeNode=void 0,this.renderer.renderElement(e,t,i.data,n)):(i.compressedTreeNode=s,this.renderer.renderCompressedElements(s,t,i.data,n))}disposeElement(e,t,i,n){var s,r,a,l;i.compressedTreeNode?(r=(s=this.renderer).disposeCompressedElements)===null||r===void 0||r.call(s,i.compressedTreeNode,t,i.data,n):(l=(a=this.renderer).disposeElement)===null||l===void 0||l.call(a,e,t,i.data,n)}disposeTemplate(e){this.renderer.disposeTemplate(e.data)}renderTwistie(e,t){return this.renderer.renderTwistie?this.renderer.renderTwistie(e,t):!1}}aOe([fs],Uoe.prototype,"compressedTreeNodeProvider",null);class lOe{constructor(e){this.modelProvider=e,this.compressedStickyNodes=new Map}getCompressedNode(e){return this.compressedStickyNodes.get(e)}constrainStickyScrollNodes(e,t,i){if(this.compressedStickyNodes.clear(),e.length===0)return[];for(let n=0;n<e.length;n++){const s=e[n],r=s.position+s.height;if(n+1<e.length&&r+e[n+1].height>i||n>=t-1&&t<e.length){const l=e.slice(0,n),c=e.slice(n),u=this.compressStickyNodes(c);return[...l,u]}}return e}compressStickyNodes(e){if(e.length===0)throw new Error("Can't compress empty sticky nodes");if(!this.modelProvider().isCompressionEnabled())return e[0];const t=[];for(const l of e){const c=this.modelProvider().getCompressedTreeNode(l.node.element);if(c.element){if(c.element.incompressible)break;t.push(...c.element.elements)}}if(t.length<2)return e[0];const i=e[e.length-1],n={elements:t,incompressible:!1},s={...i.node,children:[],element:n},r=new Proxy(e[0].node,{}),a={node:r,startIndex:e[0].startIndex,endIndex:i.endIndex,position:e[0].position,height:e[0].height};return this.compressedStickyNodes.set(r,s),a}}function cOe(o,e){return e&&{...e,keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{getKeyboardNavigationLabel(t){let i;try{i=o().getCompressedTreeNode(t)}catch{return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t)}return i.element.elements.length===1?e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t):e.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(i.element.elements)}}}}class $oe extends wz{constructor(e,t,i,n,s={}){const r=()=>this,a=new lOe(()=>this.model),l=n.map(c=>new Uoe(r,a,c));super(e,t,i,l,{...cOe(r,s),stickyScrollDelegate:a})}setChildren(e,t=ii.empty(),i){this.model.setChildren(e,t,i)}createModel(e,t,i){return new rOe(e,t,i)}updateOptions(e={}){super.updateOptions(e),typeof e.compressionEnabled<"u"&&this.model.setCompressionEnabled(e.compressionEnabled)}getCompressedTreeNode(e=null){return this.model.getCompressedTreeNode(e)}}function iB(o){return{...o,children:[],refreshPromise:void 0,stale:!0,slow:!1,forceExpanded:!1}}function W8(o,e){return e.parent?e.parent===o?!0:W8(o,e.parent):!1}function dOe(o,e){return o===e||W8(o,e)||W8(e,o)}class yz{get element(){return this.node.element.element}get children(){return this.node.children.map(e=>new yz(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e){this.node=e}}class uOe{constructor(e,t,i){this.renderer=e,this.nodeMapper=t,this.onDidChangeTwistieState=i,this.renderedNodes=new Map,this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,i,n){this.renderer.renderElement(this.nodeMapper.map(e),t,i.templateData,n)}renderTwistie(e,t){return e.slow?(t.classList.add(...pt.asClassNameArray(Ee.treeItemLoading)),!0):(t.classList.remove(...pt.asClassNameArray(Ee.treeItemLoading)),!1)}disposeElement(e,t,i,n){var s,r;(r=(s=this.renderer).disposeElement)===null||r===void 0||r.call(s,this.nodeMapper.map(e),t,i.templateData,n)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear()}}function $X(o){return{browserEvent:o.browserEvent,elements:o.elements.map(e=>e.element)}}function jX(o){return{browserEvent:o.browserEvent,element:o.element&&o.element.element,target:o.target}}class hOe extends tk{constructor(e){super(e.elements.map(t=>t.element)),this.data=e}}function nB(o){return o instanceof tk?new hOe(o):o}class fOe{constructor(e){this.dnd=e}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(i=>i.element),t)}onDragStart(e,t){var i,n;(n=(i=this.dnd).onDragStart)===null||n===void 0||n.call(i,nB(e),t)}onDragOver(e,t,i,n,s,r=!0){return this.dnd.onDragOver(nB(e),t&&t.element,i,n,s)}drop(e,t,i,n,s){this.dnd.drop(nB(e),t&&t.element,i,n,s)}onDragEnd(e){var t,i;(i=(t=this.dnd).onDragEnd)===null||i===void 0||i.call(t,e)}dispose(){this.dnd.dispose()}}function joe(o){return o&&{...o,collapseByDefault:!0,identityProvider:o.identityProvider&&{getId(e){return o.identityProvider.getId(e.element)}},dnd:o.dnd&&new fOe(o.dnd),multipleSelectionController:o.multipleSelectionController&&{isSelectionSingleChangeEvent(e){return o.multipleSelectionController.isSelectionSingleChangeEvent({...e,element:e.element})},isSelectionRangeChangeEvent(e){return o.multipleSelectionController.isSelectionRangeChangeEvent({...e,element:e.element})}},accessibilityProvider:o.accessibilityProvider&&{...o.accessibilityProvider,getPosInSet:void 0,getSetSize:void 0,getRole:o.accessibilityProvider.getRole?e=>o.accessibilityProvider.getRole(e.element):()=>"treeitem",isChecked:o.accessibilityProvider.isChecked?e=>{var t;return!!(!((t=o.accessibilityProvider)===null||t===void 0)&&t.isChecked(e.element))}:void 0,getAriaLabel(e){return o.accessibilityProvider.getAriaLabel(e.element)},getWidgetAriaLabel(){return o.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:o.accessibilityProvider.getWidgetRole?()=>o.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:o.accessibilityProvider.getAriaLevel&&(e=>o.accessibilityProvider.getAriaLevel(e.element)),getActiveDescendantId:o.accessibilityProvider.getActiveDescendantId&&(e=>o.accessibilityProvider.getActiveDescendantId(e.element))},filter:o.filter&&{filter(e,t){return o.filter.filter(e.element,t)}},keyboardNavigationLabelProvider:o.keyboardNavigationLabelProvider&&{...o.keyboardNavigationLabelProvider,getKeyboardNavigationLabel(e){return o.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e.element)}},sorter:void 0,expandOnlyOnTwistieClick:typeof o.expandOnlyOnTwistieClick>"u"?void 0:typeof o.expandOnlyOnTwistieClick!="function"?o.expandOnlyOnTwistieClick:e=>o.expandOnlyOnTwistieClick(e.element),defaultFindVisibility:e=>e.hasChildren&&e.stale?1:typeof o.defaultFindVisibility=="number"?o.defaultFindVisibility:typeof o.defaultFindVisibility>"u"?2:o.defaultFindVisibility(e.element)}}function V8(o,e){e(o),o.children.forEach(t=>V8(t,e))}class Koe{get onDidScroll(){return this.tree.onDidScroll}get onDidChangeFocus(){return Ie.map(this.tree.onDidChangeFocus,$X)}get onDidChangeSelection(){return Ie.map(this.tree.onDidChangeSelection,$X)}get onMouseDblClick(){return Ie.map(this.tree.onMouseDblClick,jX)}get onPointer(){return Ie.map(this.tree.onPointer,jX)}get onDidFocus(){return this.tree.onDidFocus}get onDidChangeModel(){return this.tree.onDidChangeModel}get onDidChangeCollapseState(){return this.tree.onDidChangeCollapseState}get onDidChangeFindOpenState(){return this.tree.onDidChangeFindOpenState}get onDidChangeStickyScrollFocused(){return this.tree.onDidChangeStickyScrollFocused}get onDidDispose(){return this.tree.onDidDispose}constructor(e,t,i,n,s,r={}){this.user=e,this.dataSource=s,this.nodes=new Map,this.subTreeRefreshPromises=new Map,this.refreshPromises=new Map,this._onDidRender=new Y,this._onDidChangeNodeSlowState=new Y,this.nodeMapper=new mz(a=>new yz(a)),this.disposables=new he,this.identityProvider=r.identityProvider,this.autoExpandSingleChildren=typeof r.autoExpandSingleChildren>"u"?!1:r.autoExpandSingleChildren,this.sorter=r.sorter,this.getDefaultCollapseState=a=>r.collapseByDefault?r.collapseByDefault(a)?fl.PreserveOrCollapsed:fl.PreserveOrExpanded:void 0,this.tree=this.createTree(e,t,i,n,r),this.onDidChangeFindMode=this.tree.onDidChangeFindMode,this.onDidChangeFindMatchType=this.tree.onDidChangeFindMatchType,this.root=iB({element:void 0,parent:null,hasChildren:!0,defaultCollapseState:void 0}),this.identityProvider&&(this.root={...this.root,id:null}),this.nodes.set(null,this.root),this.tree.onDidChangeCollapseState(this._onDidChangeCollapseState,this,this.disposables)}createTree(e,t,i,n,s){const r=new vz(i),a=n.map(c=>new uOe(c,this.nodeMapper,this._onDidChangeNodeSlowState.event)),l=joe(s)||{};return new wz(e,t,r,a,l)}updateOptions(e={}){this.tree.updateOptions(e)}getHTMLElement(){return this.tree.getHTMLElement()}get scrollTop(){return this.tree.scrollTop}set scrollTop(e){this.tree.scrollTop=e}get scrollHeight(){return this.tree.scrollHeight}get renderHeight(){return this.tree.renderHeight}domFocus(){this.tree.domFocus()}layout(e,t){this.tree.layout(e,t)}style(e){this.tree.style(e)}getInput(){return this.root.element}async setInput(e,t){this.refreshPromises.forEach(n=>n.cancel()),this.refreshPromises.clear(),this.root.element=e;const i=t&&{viewState:t,focus:[],selection:[]};await this._updateChildren(e,!0,!1,i),i&&(this.tree.setFocus(i.focus),this.tree.setSelection(i.selection)),t&&typeof t.scrollTop=="number"&&(this.scrollTop=t.scrollTop)}async _updateChildren(e=this.root.element,t=!0,i=!1,n,s){if(typeof this.root.element>"u")throw new _l(this.user,"Tree input not set");this.root.refreshPromise&&(await this.root.refreshPromise,await Ie.toPromise(this._onDidRender.event));const r=this.getDataNode(e);if(await this.refreshAndRenderNode(r,t,n,s),i)try{this.tree.rerender(r)}catch{}}rerender(e){if(e===void 0||e===this.root.element){this.tree.rerender();return}const t=this.getDataNode(e);this.tree.rerender(t)}getNode(e=this.root.element){const t=this.getDataNode(e),i=this.tree.getNode(t===this.root?null:t);return this.nodeMapper.map(i)}collapse(e,t=!1){const i=this.getDataNode(e);return this.tree.collapse(i===this.root?null:i,t)}async expand(e,t=!1){if(typeof this.root.element>"u")throw new _l(this.user,"Tree input not set");this.root.refreshPromise&&(await this.root.refreshPromise,await Ie.toPromise(this._onDidRender.event));const i=this.getDataNode(e);if(this.tree.hasElement(i)&&!this.tree.isCollapsible(i)||(i.refreshPromise&&(await this.root.refreshPromise,await Ie.toPromise(this._onDidRender.event)),i!==this.root&&!i.refreshPromise&&!this.tree.isCollapsed(i)))return!1;const n=this.tree.expand(i===this.root?null:i,t);return i.refreshPromise&&(await this.root.refreshPromise,await Ie.toPromise(this._onDidRender.event)),n}setSelection(e,t){const i=e.map(n=>this.getDataNode(n));this.tree.setSelection(i,t)}getSelection(){return this.tree.getSelection().map(t=>t.element)}setFocus(e,t){const i=e.map(n=>this.getDataNode(n));this.tree.setFocus(i,t)}getFocus(){return this.tree.getFocus().map(t=>t.element)}reveal(e,t){this.tree.reveal(this.getDataNode(e),t)}getParentElement(e){const t=this.tree.getParentElement(this.getDataNode(e));return t&&t.element}getFirstElementChild(e=this.root.element){const t=this.getDataNode(e),i=this.tree.getFirstElementChild(t===this.root?null:t);return i&&i.element}getDataNode(e){const t=this.nodes.get(e===this.root.element?null:e);if(!t)throw new _l(this.user,`Data tree node not found: ${e}`);return t}async refreshAndRenderNode(e,t,i,n){await this.refreshNode(e,t,i),!this.disposables.isDisposed&&this.render(e,i,n)}async refreshNode(e,t,i){let n;if(this.subTreeRefreshPromises.forEach((s,r)=>{!n&&dOe(r,e)&&(n=s.then(()=>this.refreshNode(e,t,i)))}),n)return n;if(e!==this.root&&this.tree.getNode(e).collapsed){e.hasChildren=!!this.dataSource.hasChildren(e.element),e.stale=!0,this.setChildren(e,[],t,i);return}return this.doRefreshSubTree(e,t,i)}async doRefreshSubTree(e,t,i){let n;e.refreshPromise=new Promise(s=>n=s),this.subTreeRefreshPromises.set(e,e.refreshPromise),e.refreshPromise.finally(()=>{e.refreshPromise=void 0,this.subTreeRefreshPromises.delete(e)});try{const s=await this.doRefreshNode(e,t,i);e.stale=!1,await X7.settled(s.map(r=>this.doRefreshSubTree(r,t,i)))}finally{n()}}async doRefreshNode(e,t,i){e.hasChildren=!!this.dataSource.hasChildren(e.element);let n;if(!e.hasChildren)n=Promise.resolve(ii.empty());else{const s=this.doGetChildren(e);if(aY(s))n=Promise.resolve(s);else{const r=cm(800);r.then(()=>{e.slow=!0,this._onDidChangeNodeSlowState.fire(e)},a=>null),n=s.finally(()=>r.cancel())}}try{const s=await n;return this.setChildren(e,s,t,i)}catch(s){if(e!==this.root&&this.tree.hasElement(e)&&this.tree.collapse(e),eu(s))return[];throw s}finally{e.slow&&(e.slow=!1,this._onDidChangeNodeSlowState.fire(e))}}doGetChildren(e){let t=this.refreshPromises.get(e);if(t)return t;const i=this.dataSource.getChildren(e.element);return aY(i)?this.processChildren(i):(t=Qs(async()=>this.processChildren(await i)),this.refreshPromises.set(e,t),t.finally(()=>{this.refreshPromises.delete(e)}))}_onDidChangeCollapseState({node:e,deep:t}){e.element!==null&&!e.collapsed&&e.element.stale&&(t?this.collapse(e.element.element):this.refreshAndRenderNode(e.element,!1).catch(Nt))}setChildren(e,t,i,n){const s=[...t];if(e.children.length===0&&s.length===0)return[];const r=new Map,a=new Map;for(const u of e.children)r.set(u.element,u),this.identityProvider&&a.set(u.id,{node:u,collapsed:this.tree.hasElement(u)&&this.tree.isCollapsed(u)});const l=[],c=s.map(u=>{const f=!!this.dataSource.hasChildren(u);if(!this.identityProvider){const b=iB({element:u,parent:e,hasChildren:f,defaultCollapseState:this.getDefaultCollapseState(u)});return f&&b.defaultCollapseState===fl.PreserveOrExpanded&&l.push(b),b}const g=this.identityProvider.getId(u).toString(),p=a.get(g);if(p){const b=p.node;return r.delete(b.element),this.nodes.delete(b.element),this.nodes.set(u,b),b.element=u,b.hasChildren=f,i?p.collapsed?(b.children.forEach(y=>V8(y,S=>this.nodes.delete(S.element))),b.children.splice(0,b.children.length),b.stale=!0):l.push(b):f&&!p.collapsed&&l.push(b),b}const _=iB({element:u,parent:e,id:g,hasChildren:f,defaultCollapseState:this.getDefaultCollapseState(u)});return n&&n.viewState.focus&&n.viewState.focus.indexOf(g)>-1&&n.focus.push(_),n&&n.viewState.selection&&n.viewState.selection.indexOf(g)>-1&&n.selection.push(_),(n&&n.viewState.expanded&&n.viewState.expanded.indexOf(g)>-1||f&&_.defaultCollapseState===fl.PreserveOrExpanded)&&l.push(_),_});for(const u of r.values())V8(u,f=>this.nodes.delete(f.element));for(const u of c)this.nodes.set(u.element,u);return e.children.splice(0,e.children.length,...c),e!==this.root&&this.autoExpandSingleChildren&&c.length===1&&l.length===0&&(c[0].forceExpanded=!0,l.push(c[0])),l}render(e,t,i){const n=e.children.map(r=>this.asTreeElement(r,t)),s=i&&{...i,diffIdentityProvider:i.diffIdentityProvider&&{getId(r){return i.diffIdentityProvider.getId(r.element)}}};this.tree.setChildren(e===this.root?null:e,n,s),e!==this.root&&this.tree.setCollapsible(e,e.hasChildren),this._onDidRender.fire()}asTreeElement(e,t){if(e.stale)return{element:e,collapsible:e.hasChildren,collapsed:!0};let i;return t&&t.viewState.expanded&&e.id&&t.viewState.expanded.indexOf(e.id)>-1?i=!1:e.forceExpanded?(i=!1,e.forceExpanded=!1):i=e.defaultCollapseState,{element:e,children:e.hasChildren?ii.map(e.children,n=>this.asTreeElement(n,t)):[],collapsible:e.hasChildren,collapsed:i}}processChildren(e){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),e}dispose(){this.disposables.dispose(),this.tree.dispose()}}class Sz{get element(){return{elements:this.node.element.elements.map(e=>e.element),incompressible:this.node.element.incompressible}}get children(){return this.node.children.map(e=>new Sz(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e){this.node=e}}class gOe{constructor(e,t,i,n){this.renderer=e,this.nodeMapper=t,this.compressibleNodeMapperProvider=i,this.onDidChangeTwistieState=n,this.renderedNodes=new Map,this.disposables=[],this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,i,n){this.renderer.renderElement(this.nodeMapper.map(e),t,i.templateData,n)}renderCompressedElements(e,t,i,n){this.renderer.renderCompressedElements(this.compressibleNodeMapperProvider().map(e),t,i.templateData,n)}renderTwistie(e,t){return e.slow?(t.classList.add(...pt.asClassNameArray(Ee.treeItemLoading)),!0):(t.classList.remove(...pt.asClassNameArray(Ee.treeItemLoading)),!1)}disposeElement(e,t,i,n){var s,r;(r=(s=this.renderer).disposeElement)===null||r===void 0||r.call(s,this.nodeMapper.map(e),t,i.templateData,n)}disposeCompressedElements(e,t,i,n){var s,r;(r=(s=this.renderer).disposeCompressedElements)===null||r===void 0||r.call(s,this.compressibleNodeMapperProvider().map(e),t,i.templateData,n)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear(),this.disposables=cn(this.disposables)}}function pOe(o){const e=o&&joe(o);return e&&{...e,keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{...e.keyboardNavigationLabelProvider,getCompressedNodeKeyboardNavigationLabel(t){return o.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(t.map(i=>i.element))}}}}class mOe extends Koe{constructor(e,t,i,n,s,r,a={}){super(e,t,i,s,r,a),this.compressionDelegate=n,this.compressibleNodeMapper=new mz(l=>new Sz(l)),this.filter=a.filter}createTree(e,t,i,n,s){const r=new vz(i),a=n.map(c=>new gOe(c,this.nodeMapper,()=>this.compressibleNodeMapper,this._onDidChangeNodeSlowState.event)),l=pOe(s)||{};return new $oe(e,t,r,a,l)}asTreeElement(e,t){return{incompressible:this.compressionDelegate.isIncompressible(e.element),...super.asTreeElement(e,t)}}updateOptions(e={}){this.tree.updateOptions(e)}render(e,t,i){if(!this.identityProvider)return super.render(e,t);const n=p=>this.identityProvider.getId(p).toString(),s=p=>{const _=new Set;for(const b of p){const y=this.tree.getCompressedTreeNode(b===this.root?null:b);if(y.element)for(const S of y.element.elements)_.add(n(S.element))}return _},r=s(this.tree.getSelection()),a=s(this.tree.getFocus());super.render(e,t,i);const l=this.getSelection();let c=!1;const u=this.getFocus();let f=!1;const g=p=>{const _=p.element;if(_)for(let b=0;b<_.elements.length;b++){const y=n(_.elements[b].element),S=_.elements[_.elements.length-1].element;r.has(y)&&l.indexOf(S)===-1&&(l.push(S),c=!0),a.has(y)&&u.indexOf(S)===-1&&(u.push(S),f=!0)}p.children.forEach(g)};g(this.tree.getCompressedTreeNode(e===this.root?null:e)),c&&this.setSelection(l),f&&this.setFocus(u)}processChildren(e){return this.filter&&(e=ii.filter(e,t=>{const i=this.filter.filter(t,1),n=_Oe(i);if(n===2)throw new Error("Recursive tree visibility not supported in async data compressed trees");return n===1})),super.processChildren(e)}}function _Oe(o){return typeof o=="boolean"?o?1:0:_z(o)?Hx(o.visibility):Hx(o)}class vOe extends Hoe{constructor(e,t,i,n,s,r={}){super(e,t,i,n,r),this.user=e,this.dataSource=s,this.identityProvider=r.identityProvider}createModel(e,t,i){return new bz(e,t,i)}}new Be("isMac",Kt,v("isMac","Whether the operating system is macOS"));new Be("isLinux",jr,v("isLinux","Whether the operating system is Linux"));const mP=new Be("isWindows",Mo,v("isWindows","Whether the operating system is Windows")),qoe=new Be("isWeb",Mm,v("isWeb","Whether the platform is a web browser"));new Be("isMacNative",Kt&&!Mm,v("isMacNative","Whether the operating system is macOS on a non-browser platform"));new Be("isIOS",$d,v("isIOS","Whether the operating system is iOS"));new Be("isMobile",Hte,v("isMobile","Whether the platform is a mobile web browser"));new Be("isDevelopment",!1,!0);new Be("productQualityType","",v("productQualityType","Quality type of VS Code"));const Goe="inputFocus",bOe=new Be(Goe,!1,v("inputFocus","Whether keyboard focus is inside an input box"));var mg=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},vn=function(o,e){return function(t,i){e(t,i,o)}};const wc=Zt("listService");class COe{get lastFocusedList(){return this._lastFocusedWidget}constructor(){this.disposables=new he,this.lists=[],this._lastFocusedWidget=void 0,this._hasCreatedStyleController=!1}setLastFocusedList(e){var t,i;e!==this._lastFocusedWidget&&((t=this._lastFocusedWidget)===null||t===void 0||t.getHTMLElement().classList.remove("last-focused"),this._lastFocusedWidget=e,(i=this._lastFocusedWidget)===null||i===void 0||i.getHTMLElement().classList.add("last-focused"))}register(e,t){if(this._hasCreatedStyleController||(this._hasCreatedStyleController=!0,new Doe(xl(),"").style(ub)),this.lists.some(n=>n.widget===e))throw new Error("Cannot register the same widget multiple times");const i={widget:e,extraContextKeys:t};return this.lists.push(i),_A(e.getHTMLElement())&&this.setLastFocusedList(e),$c(e.onDidFocus(()=>this.setLastFocusedList(e)),lt(()=>this.lists.splice(this.lists.indexOf(i),1)),e.onDidDispose(()=>{this.lists=this.lists.filter(n=>n!==i),this._lastFocusedWidget===e&&this.setLastFocusedList(void 0)}))}dispose(){this.disposables.dispose()}}const Ux=new Be("listScrollAtBoundary","none");ue.or(Ux.isEqualTo("top"),Ux.isEqualTo("both"));ue.or(Ux.isEqualTo("bottom"),Ux.isEqualTo("both"));const Yoe=new Be("listFocus",!0),Zoe=new Be("treestickyScrollFocused",!1),_P=new Be("listSupportsMultiselect",!0),Qoe=ue.and(Yoe,ue.not(Goe),Zoe.negate()),Lz=new Be("listHasSelectionOrFocus",!1),xz=new Be("listDoubleSelection",!1),Dz=new Be("listMultiSelection",!1),vP=new Be("listSelectionNavigation",!1),wOe=new Be("listSupportsFind",!0),kz=new Be("treeElementCanCollapse",!1),yOe=new Be("treeElementHasParent",!1),Ez=new Be("treeElementCanExpand",!1),SOe=new Be("treeElementHasChild",!1),LOe=new Be("treeFindOpen",!1),Xoe="listTypeNavigationMode",Joe="listAutomaticKeyboardNavigation";function bP(o,e){const t=o.createScoped(e.getHTMLElement());return Yoe.bindTo(t),t}function CP(o,e){const t=Ux.bindTo(o),i=()=>{const n=e.scrollTop===0,s=e.scrollHeight-e.renderHeight-e.scrollTop<1;n&&s?t.set("both"):n?t.set("top"):s?t.set("bottom"):t.set("none")};return i(),e.onDidScroll(i)}const gb="workbench.list.multiSelectModifier",BN="workbench.list.openMode",dc="workbench.list.horizontalScrolling",Iz="workbench.list.defaultFindMode",Tz="workbench.list.typeNavigationMode",pM="workbench.list.keyboardNavigation",Zd="workbench.list.scrollByPage",Nz="workbench.list.defaultFindMatchType",$x="workbench.tree.indent",mM="workbench.tree.renderIndentGuides",Qd="workbench.list.smoothScrolling",_h="workbench.list.mouseWheelScrollSensitivity",vh="workbench.list.fastScrollSensitivity",_M="workbench.tree.expandMode",vM="workbench.tree.enableStickyScroll",bM="workbench.tree.stickyScrollMaxItemCount";function bh(o){return o.getValue(gb)==="alt"}class xOe extends J{constructor(e){super(),this.configurationService=e,this.useAltAsMultipleSelectionModifier=bh(e),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(e=>{e.affectsConfiguration(gb)&&(this.useAltAsMultipleSelectionModifier=bh(this.configurationService))}))}isSelectionSingleChangeEvent(e){return this.useAltAsMultipleSelectionModifier?e.browserEvent.altKey:Soe(e)}isSelectionRangeChangeEvent(e){return Loe(e)}}function wP(o,e){var t;const i=o.get($t),n=o.get(Bi),s=new he;return[{...e,keyboardNavigationDelegate:{mightProducePrintableCharacter(a){return n.mightProducePrintableCharacter(a)}},smoothScrolling:!!i.getValue(Qd),mouseWheelScrollSensitivity:i.getValue(_h),fastScrollSensitivity:i.getValue(vh),multipleSelectionController:(t=e.multipleSelectionController)!==null&&t!==void 0?t:s.add(new xOe(i)),keyboardNavigationEventFilter:EOe(n),scrollByPage:!!i.getValue(Zd)},s]}let KX=class extends Ml{constructor(e,t,i,n,s,r,a,l,c){const u=typeof s.horizontalScrolling<"u"?s.horizontalScrolling:!!l.getValue(dc),[f,g]=c.invokeFunction(wP,s);super(e,t,i,n,{keyboardSupport:!1,...f,horizontalScrolling:u}),this.disposables.add(g),this.contextKeyService=bP(r,this),this.disposables.add(CP(this.contextKeyService,this)),this.listSupportsMultiSelect=_P.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(s.multipleSelectionSupport!==!1),vP.bindTo(this.contextKeyService).set(!!s.selectionNavigation),this.listHasSelectionOrFocus=Lz.bindTo(this.contextKeyService),this.listDoubleSelection=xz.bindTo(this.contextKeyService),this.listMultiSelection=Dz.bindTo(this.contextKeyService),this.horizontalScrolling=s.horizontalScrolling,this._useAltAsMultipleSelectionModifier=bh(l),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),this.updateStyles(s.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const _=this.getSelection(),b=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(_.length>0||b.length>0),this.listMultiSelection.set(_.length>1),this.listDoubleSelection.set(_.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const _=this.getSelection(),b=this.getFocus();this.listHasSelectionOrFocus.set(_.length>0||b.length>0)})),this.disposables.add(l.onDidChangeConfiguration(_=>{_.affectsConfiguration(gb)&&(this._useAltAsMultipleSelectionModifier=bh(l));let b={};if(_.affectsConfiguration(dc)&&this.horizontalScrolling===void 0){const y=!!l.getValue(dc);b={...b,horizontalScrolling:y}}if(_.affectsConfiguration(Zd)){const y=!!l.getValue(Zd);b={...b,scrollByPage:y}}if(_.affectsConfiguration(Qd)){const y=!!l.getValue(Qd);b={...b,smoothScrolling:y}}if(_.affectsConfiguration(_h)){const y=l.getValue(_h);b={...b,mouseWheelScrollSensitivity:y}}if(_.affectsConfiguration(vh)){const y=l.getValue(vh);b={...b,fastScrollSensitivity:y}}Object.keys(b).length>0&&this.updateOptions(b)})),this.navigator=new ere(this,{configurationService:l,...s}),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles!==void 0&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?hb(e):ub)}};KX=mg([vn(5,bt),vn(6,wc),vn(7,$t),vn(8,ct)],KX);let qX=class extends yPe{constructor(e,t,i,n,s,r,a,l,c){const u=typeof s.horizontalScrolling<"u"?s.horizontalScrolling:!!l.getValue(dc),[f,g]=c.invokeFunction(wP,s);super(e,t,i,n,{keyboardSupport:!1,...f,horizontalScrolling:u}),this.disposables=new he,this.disposables.add(g),this.contextKeyService=bP(r,this),this.disposables.add(CP(this.contextKeyService,this.widget)),this.horizontalScrolling=s.horizontalScrolling,this.listSupportsMultiSelect=_P.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(s.multipleSelectionSupport!==!1),vP.bindTo(this.contextKeyService).set(!!s.selectionNavigation),this._useAltAsMultipleSelectionModifier=bh(l),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),this.updateStyles(s.overrideStyles),this.disposables.add(l.onDidChangeConfiguration(_=>{_.affectsConfiguration(gb)&&(this._useAltAsMultipleSelectionModifier=bh(l));let b={};if(_.affectsConfiguration(dc)&&this.horizontalScrolling===void 0){const y=!!l.getValue(dc);b={...b,horizontalScrolling:y}}if(_.affectsConfiguration(Zd)){const y=!!l.getValue(Zd);b={...b,scrollByPage:y}}if(_.affectsConfiguration(Qd)){const y=!!l.getValue(Qd);b={...b,smoothScrolling:y}}if(_.affectsConfiguration(_h)){const y=l.getValue(_h);b={...b,mouseWheelScrollSensitivity:y}}if(_.affectsConfiguration(vh)){const y=l.getValue(vh);b={...b,fastScrollSensitivity:y}}Object.keys(b).length>0&&this.updateOptions(b)})),this.navigator=new ere(this,{configurationService:l,...s}),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles!==void 0&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?hb(e):ub)}dispose(){this.disposables.dispose(),super.dispose()}};qX=mg([vn(5,bt),vn(6,wc),vn(7,$t),vn(8,ct)],qX);let GX=class extends pP{constructor(e,t,i,n,s,r,a,l,c,u){const f=typeof r.horizontalScrolling<"u"?r.horizontalScrolling:!!c.getValue(dc),[g,p]=u.invokeFunction(wP,r);super(e,t,i,n,s,{keyboardSupport:!1,...g,horizontalScrolling:f}),this.disposables.add(p),this.contextKeyService=bP(a,this),this.disposables.add(CP(this.contextKeyService,this)),this.listSupportsMultiSelect=_P.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(r.multipleSelectionSupport!==!1),vP.bindTo(this.contextKeyService).set(!!r.selectionNavigation),this.listHasSelectionOrFocus=Lz.bindTo(this.contextKeyService),this.listDoubleSelection=xz.bindTo(this.contextKeyService),this.listMultiSelection=Dz.bindTo(this.contextKeyService),this.horizontalScrolling=r.horizontalScrolling,this._useAltAsMultipleSelectionModifier=bh(c),this.disposables.add(this.contextKeyService),this.disposables.add(l.register(this)),this.updateStyles(r.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const b=this.getSelection(),y=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(b.length>0||y.length>0),this.listMultiSelection.set(b.length>1),this.listDoubleSelection.set(b.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const b=this.getSelection(),y=this.getFocus();this.listHasSelectionOrFocus.set(b.length>0||y.length>0)})),this.disposables.add(c.onDidChangeConfiguration(b=>{b.affectsConfiguration(gb)&&(this._useAltAsMultipleSelectionModifier=bh(c));let y={};if(b.affectsConfiguration(dc)&&this.horizontalScrolling===void 0){const S=!!c.getValue(dc);y={...y,horizontalScrolling:S}}if(b.affectsConfiguration(Zd)){const S=!!c.getValue(Zd);y={...y,scrollByPage:S}}if(b.affectsConfiguration(Qd)){const S=!!c.getValue(Qd);y={...y,smoothScrolling:S}}if(b.affectsConfiguration(_h)){const S=c.getValue(_h);y={...y,mouseWheelScrollSensitivity:S}}if(b.affectsConfiguration(vh)){const S=c.getValue(vh);y={...y,fastScrollSensitivity:S}}Object.keys(y).length>0&&this.updateOptions(y)})),this.navigator=new DOe(this,{configurationService:c,...r}),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles!==void 0&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?hb(e):ub)}dispose(){this.disposables.dispose(),super.dispose()}};GX=mg([vn(6,bt),vn(7,wc),vn(8,$t),vn(9,ct)],GX);class Rz extends J{constructor(e,t){var i;super(),this.widget=e,this._onDidOpen=this._register(new Y),this.onDidOpen=this._onDidOpen.event,this._register(Ie.filter(this.widget.onDidChangeSelection,n=>pp(n.browserEvent))(n=>this.onSelectionFromKeyboard(n))),this._register(this.widget.onPointer(n=>this.onPointer(n.element,n.browserEvent))),this._register(this.widget.onMouseDblClick(n=>this.onMouseDblClick(n.element,n.browserEvent))),typeof(t==null?void 0:t.openOnSingleClick)!="boolean"&&(t!=null&&t.configurationService)?(this.openOnSingleClick=(t==null?void 0:t.configurationService.getValue(BN))!=="doubleClick",this._register(t==null?void 0:t.configurationService.onDidChangeConfiguration(n=>{n.affectsConfiguration(BN)&&(this.openOnSingleClick=(t==null?void 0:t.configurationService.getValue(BN))!=="doubleClick")}))):this.openOnSingleClick=(i=t==null?void 0:t.openOnSingleClick)!==null&&i!==void 0?i:!0}onSelectionFromKeyboard(e){if(e.elements.length!==1)return;const t=e.browserEvent,i=typeof t.preserveFocus=="boolean"?t.preserveFocus:!0,n=typeof t.pinned=="boolean"?t.pinned:!i;this._open(this.getSelectedElement(),i,n,!1,e.browserEvent)}onPointer(e,t){if(!this.openOnSingleClick||t.detail===2)return;const n=t.button===1,s=!0,r=n,a=t.ctrlKey||t.metaKey||t.altKey;this._open(e,s,r,a,t)}onMouseDblClick(e,t){if(!t)return;const i=t.target;if(i.classList.contains("monaco-tl-twistie")||i.classList.contains("monaco-icon-label")&&i.classList.contains("folder-icon")&&t.offsetX<16)return;const s=!1,r=!0,a=t.ctrlKey||t.metaKey||t.altKey;this._open(e,s,r,a,t)}_open(e,t,i,n,s){e&&this._onDidOpen.fire({editorOptions:{preserveFocus:t,pinned:i,revealIfVisible:!0},sideBySide:n,element:e,browserEvent:s})}}class ere extends Rz{constructor(e,t){super(e,t),this.widget=e}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class DOe extends Rz{constructor(e,t){super(e,t)}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class kOe extends Rz{constructor(e,t){super(e,t)}getSelectedElement(){var e;return(e=this.widget.getSelection()[0])!==null&&e!==void 0?e:void 0}}function EOe(o){let e=!1;return t=>{if(t.toKeyCodeChord().isModifierKey())return!1;if(e)return e=!1,!1;const i=o.softDispatch(t,t.target);return i.kind===1?(e=!0,!1):(e=!1,i.kind===0)}}let H8=class extends wz{constructor(e,t,i,n,s,r,a,l,c){const{options:u,getTypeNavigationMode:f,disposable:g}=r.invokeFunction(ak,s);super(e,t,i,n,u),this.disposables.add(g),this.internals=new Wv(this,s,f,s.overrideStyles,a,l,c),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};H8=mg([vn(5,ct),vn(6,bt),vn(7,wc),vn(8,$t)],H8);let YX=class extends $oe{constructor(e,t,i,n,s,r,a,l,c){const{options:u,getTypeNavigationMode:f,disposable:g}=r.invokeFunction(ak,s);super(e,t,i,n,u),this.disposables.add(g),this.internals=new Wv(this,s,f,s.overrideStyles,a,l,c),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};YX=mg([vn(5,ct),vn(6,bt),vn(7,wc),vn(8,$t)],YX);let ZX=class extends vOe{constructor(e,t,i,n,s,r,a,l,c,u){const{options:f,getTypeNavigationMode:g,disposable:p}=a.invokeFunction(ak,r);super(e,t,i,n,s,f),this.disposables.add(p),this.internals=new Wv(this,r,g,r.overrideStyles,l,c,u),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles!==void 0&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};ZX=mg([vn(6,ct),vn(7,bt),vn(8,wc),vn(9,$t)],ZX);let z8=class extends Koe{get onDidOpen(){return this.internals.onDidOpen}constructor(e,t,i,n,s,r,a,l,c,u){const{options:f,getTypeNavigationMode:g,disposable:p}=a.invokeFunction(ak,r);super(e,t,i,n,s,f),this.disposables.add(p),this.internals=new Wv(this,r,g,r.overrideStyles,l,c,u),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};z8=mg([vn(6,ct),vn(7,bt),vn(8,wc),vn(9,$t)],z8);let QX=class extends mOe{constructor(e,t,i,n,s,r,a,l,c,u,f){const{options:g,getTypeNavigationMode:p,disposable:_}=l.invokeFunction(ak,a);super(e,t,i,n,s,r,g),this.disposables.add(_),this.internals=new Wv(this,a,p,a.overrideStyles,c,u,f),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};QX=mg([vn(7,ct),vn(8,bt),vn(9,wc),vn(10,$t)],QX);function tre(o){const e=o.getValue(Iz);if(e==="highlight")return zf.Highlight;if(e==="filter")return zf.Filter;const t=o.getValue(pM);if(t==="simple"||t==="highlight")return zf.Highlight;if(t==="filter")return zf.Filter}function ire(o){const e=o.getValue(Nz);if(e==="fuzzy")return Bv.Fuzzy;if(e==="contiguous")return Bv.Contiguous}function ak(o,e){var t;const i=o.get($t),n=o.get(gg),s=o.get(bt),r=o.get(ct),a=()=>{const p=s.getContextKeyValue(Xoe);if(p==="automatic")return Ku.Automatic;if(p==="trigger"||s.getContextKeyValue(Joe)===!1)return Ku.Trigger;const b=i.getValue(Tz);if(b==="automatic")return Ku.Automatic;if(b==="trigger")return Ku.Trigger},l=e.horizontalScrolling!==void 0?e.horizontalScrolling:!!i.getValue(dc),[c,u]=r.invokeFunction(wP,e),f=e.paddingBottom,g=e.renderIndentGuides!==void 0?e.renderIndentGuides:i.getValue(mM);return{getTypeNavigationMode:a,disposable:u,options:{keyboardSupport:!1,...c,indent:typeof i.getValue($x)=="number"?i.getValue($x):void 0,renderIndentGuides:g,smoothScrolling:!!i.getValue(Qd),defaultFindMode:tre(i),defaultFindMatchType:ire(i),horizontalScrolling:l,scrollByPage:!!i.getValue(Zd),paddingBottom:f,hideTwistiesOfChildlessElements:e.hideTwistiesOfChildlessElements,expandOnlyOnTwistieClick:(t=e.expandOnlyOnTwistieClick)!==null&&t!==void 0?t:i.getValue(_M)==="doubleClick",contextViewProvider:n,findWidgetStyles:GAe,enableStickyScroll:!!i.getValue(vM),stickyScrollMaxItemCount:Number(i.getValue(bM))}}}let Wv=class{get onDidOpen(){return this.navigator.onDidOpen}constructor(e,t,i,n,s,r,a){var l;this.tree=e,this.disposables=[],this.contextKeyService=bP(s,e),this.disposables.push(CP(this.contextKeyService,e)),this.listSupportsMultiSelect=_P.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(t.multipleSelectionSupport!==!1),vP.bindTo(this.contextKeyService).set(!!t.selectionNavigation),this.listSupportFindWidget=wOe.bindTo(this.contextKeyService),this.listSupportFindWidget.set((l=t.findWidgetEnabled)!==null&&l!==void 0?l:!0),this.hasSelectionOrFocus=Lz.bindTo(this.contextKeyService),this.hasDoubleSelection=xz.bindTo(this.contextKeyService),this.hasMultiSelection=Dz.bindTo(this.contextKeyService),this.treeElementCanCollapse=kz.bindTo(this.contextKeyService),this.treeElementHasParent=yOe.bindTo(this.contextKeyService),this.treeElementCanExpand=Ez.bindTo(this.contextKeyService),this.treeElementHasChild=SOe.bindTo(this.contextKeyService),this.treeFindOpen=LOe.bindTo(this.contextKeyService),this.treeStickyScrollFocused=Zoe.bindTo(this.contextKeyService),this._useAltAsMultipleSelectionModifier=bh(a),this.updateStyleOverrides(n);const u=()=>{const g=e.getFocus()[0];if(!g)return;const p=e.getNode(g);this.treeElementCanCollapse.set(p.collapsible&&!p.collapsed),this.treeElementHasParent.set(!!e.getParentElement(g)),this.treeElementCanExpand.set(p.collapsible&&p.collapsed),this.treeElementHasChild.set(!!e.getFirstElementChild(g))},f=new Set;f.add(Xoe),f.add(Joe),this.disposables.push(this.contextKeyService,r.register(e),e.onDidChangeSelection(()=>{const g=e.getSelection(),p=e.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.hasSelectionOrFocus.set(g.length>0||p.length>0),this.hasMultiSelection.set(g.length>1),this.hasDoubleSelection.set(g.length===2)})}),e.onDidChangeFocus(()=>{const g=e.getSelection(),p=e.getFocus();this.hasSelectionOrFocus.set(g.length>0||p.length>0),u()}),e.onDidChangeCollapseState(u),e.onDidChangeModel(u),e.onDidChangeFindOpenState(g=>this.treeFindOpen.set(g)),e.onDidChangeStickyScrollFocused(g=>this.treeStickyScrollFocused.set(g)),a.onDidChangeConfiguration(g=>{let p={};if(g.affectsConfiguration(gb)&&(this._useAltAsMultipleSelectionModifier=bh(a)),g.affectsConfiguration($x)){const _=a.getValue($x);p={...p,indent:_}}if(g.affectsConfiguration(mM)&&t.renderIndentGuides===void 0){const _=a.getValue(mM);p={...p,renderIndentGuides:_}}if(g.affectsConfiguration(Qd)){const _=!!a.getValue(Qd);p={...p,smoothScrolling:_}}if(g.affectsConfiguration(Iz)||g.affectsConfiguration(pM)){const _=tre(a);p={...p,defaultFindMode:_}}if(g.affectsConfiguration(Tz)||g.affectsConfiguration(pM)){const _=i();p={...p,typeNavigationMode:_}}if(g.affectsConfiguration(Nz)){const _=ire(a);p={...p,defaultFindMatchType:_}}if(g.affectsConfiguration(dc)&&t.horizontalScrolling===void 0){const _=!!a.getValue(dc);p={...p,horizontalScrolling:_}}if(g.affectsConfiguration(Zd)){const _=!!a.getValue(Zd);p={...p,scrollByPage:_}}if(g.affectsConfiguration(_M)&&t.expandOnlyOnTwistieClick===void 0&&(p={...p,expandOnlyOnTwistieClick:a.getValue(_M)==="doubleClick"}),g.affectsConfiguration(vM)){const _=a.getValue(vM);p={...p,enableStickyScroll:_}}if(g.affectsConfiguration(bM)){const _=Math.max(1,a.getValue(bM));p={...p,stickyScrollMaxItemCount:_}}if(g.affectsConfiguration(_h)){const _=a.getValue(_h);p={...p,mouseWheelScrollSensitivity:_}}if(g.affectsConfiguration(vh)){const _=a.getValue(vh);p={...p,fastScrollSensitivity:_}}Object.keys(p).length>0&&e.updateOptions(p)}),this.contextKeyService.onDidChangeContext(g=>{g.affectsSome(f)&&e.updateOptions({typeNavigationMode:i()})})),this.navigator=new kOe(e,{configurationService:a,...t}),this.disposables.push(this.navigator)}updateOptions(e){e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyleOverrides(e){this.tree.style(e?hb(e):ub)}dispose(){this.disposables=cn(this.disposables)}};Wv=mg([vn(4,bt),vn(5,wc),vn(6,$t)],Wv);const IOe=$n.as(nu.Configuration);IOe.registerConfiguration({id:"workbench",order:7,title:v("workbenchConfigurationTitle","Workbench"),type:"object",properties:{[gb]:{type:"string",enum:["ctrlCmd","alt"],markdownEnumDescriptions:[v("multiSelectModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),v("multiSelectModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],default:"ctrlCmd",description:v({key:"multiSelectModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add an item in trees and lists to a multi-selection with the mouse (for example in the explorer, open editors and scm view). The 'Open to Side' mouse gestures - if supported - will adapt such that they do not conflict with the multiselect modifier.")},[BN]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:v({key:"openModeModifier",comment:["`singleClick` and `doubleClick` refers to a value the setting can take and should not be localized."]},"Controls how to open items in trees and lists using the mouse (if supported). Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[dc]:{type:"boolean",default:!1,description:v("horizontalScrolling setting","Controls whether lists and trees support horizontal scrolling in the workbench. Warning: turning on this setting has a performance implication.")},[Zd]:{type:"boolean",default:!1,description:v("list.scrollByPage","Controls whether clicks in the scrollbar scroll page by page.")},[$x]:{type:"number",default:8,minimum:4,maximum:40,description:v("tree indent setting","Controls tree indentation in pixels.")},[mM]:{type:"string",enum:["none","onHover","always"],default:"onHover",description:v("render tree indent guides","Controls whether the tree should render indent guides.")},[Qd]:{type:"boolean",default:!1,description:v("list smoothScrolling setting","Controls whether lists and trees have smooth scrolling.")},[_h]:{type:"number",default:1,markdownDescription:v("Mouse Wheel Scroll Sensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")},[vh]:{type:"number",default:5,markdownDescription:v("Fast Scroll Sensitivity","Scrolling speed multiplier when pressing `Alt`.")},[Iz]:{type:"string",enum:["highlight","filter"],enumDescriptions:[v("defaultFindModeSettingKey.highlight","Highlight elements when searching. Further up and down navigation will traverse only the highlighted elements."),v("defaultFindModeSettingKey.filter","Filter elements when searching.")],default:"highlight",description:v("defaultFindModeSettingKey","Controls the default find mode for lists and trees in the workbench.")},[pM]:{type:"string",enum:["simple","highlight","filter"],enumDescriptions:[v("keyboardNavigationSettingKey.simple","Simple keyboard navigation focuses elements which match the keyboard input. Matching is done only on prefixes."),v("keyboardNavigationSettingKey.highlight","Highlight keyboard navigation highlights elements which match the keyboard input. Further up and down navigation will traverse only the highlighted elements."),v("keyboardNavigationSettingKey.filter","Filter keyboard navigation will filter out and hide all the elements which do not match the keyboard input.")],default:"highlight",description:v("keyboardNavigationSettingKey","Controls the keyboard navigation style for lists and trees in the workbench. Can be simple, highlight and filter."),deprecated:!0,deprecationMessage:v("keyboardNavigationSettingKeyDeprecated","Please use 'workbench.list.defaultFindMode' and	'workbench.list.typeNavigationMode' instead.")},[Nz]:{type:"string",enum:["fuzzy","contiguous"],enumDescriptions:[v("defaultFindMatchTypeSettingKey.fuzzy","Use fuzzy matching when searching."),v("defaultFindMatchTypeSettingKey.contiguous","Use contiguous matching when searching.")],default:"fuzzy",description:v("defaultFindMatchTypeSettingKey","Controls the type of matching used when searching lists and trees in the workbench.")},[_M]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:v("expand mode","Controls how tree folders are expanded when clicking the folder names. Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[vM]:{type:"boolean",default:!0,description:v("sticky scroll","Controls whether sticky scrolling is enabled in trees.")},[bM]:{type:"number",minimum:1,default:7,markdownDescription:v("sticky scroll maximum items","Controls the number of sticky elements displayed in the tree when `#workbench.tree.enableStickyScroll#` is enabled.")},[Tz]:{type:"string",enum:["automatic","trigger"],default:"automatic",markdownDescription:v("typeNavigationMode2","Controls how type navigation works in lists and trees in the workbench. When set to `trigger`, type navigation begins once the `list.triggerTypeNavigation` command is run.")}}});class Xp extends J{constructor(e,t){var i;super(),this.options=t,this.text="",this.title="",this.highlights=[],this.didEverRender=!1,this.supportIcons=(i=t==null?void 0:t.supportIcons)!==null&&i!==void 0?i:!1,this.domNode=ge(e,ye("span.monaco-highlighted-label"))}get element(){return this.domNode}set(e,t=[],i="",n){e||(e=""),n&&(e=Xp.escapeNewLines(e,t)),!(this.didEverRender&&this.text===e&&this.title===i&&wl(this.highlights,t))&&(this.text=e,this.title=i,this.highlights=t,this.render())}render(){var e,t,i,n;const s=[];let r=0;for(const a of this.highlights){if(a.end===a.start)continue;if(r<a.start){const u=this.text.substring(r,a.start);this.supportIcons?s.push(...Yp(u)):s.push(u),r=a.start}const l=this.text.substring(r,a.end),c=ye("span.highlight",void 0,...this.supportIcons?Yp(l):[l]);a.extraClasses&&c.classList.add(...a.extraClasses),s.push(c),r=a.end}if(r<this.text.length){const a=this.text.substring(r);this.supportIcons?s.push(...Yp(a)):s.push(a)}if(_o(this.domNode,...s),!((t=(e=this.options)===null||e===void 0?void 0:e.hoverDelegate)===null||t===void 0)&&t.showNativeHover)this.domNode.title=this.title;else if(!this.customHover&&this.title!==""){const a=(n=(i=this.options)===null||i===void 0?void 0:i.hoverDelegate)!==null&&n!==void 0?n:ya("mouse");this.customHover=this._register(Zc(a,this.domNode,this.title))}else this.customHover&&this.customHover.update(this.title);this.didEverRender=!0}static escapeNewLines(e,t){let i=0,n=0;return e.replace(/\r\n|\r|\n/g,(s,r)=>{n=s===`\r
`?-1:0,r+=i;for(const a of t)a.end<=r||(a.start>=r&&(a.start+=n),a.end>=r&&(a.end+=n));return i+=n,""})}}class xS{constructor(e){this._element=e}get element(){return this._element}set textContent(e){this.disposed||e===this._textContent||(this._textContent=e,this._element.textContent=e)}set className(e){this.disposed||e===this._className||(this._className=e,this._element.className=e)}set empty(e){this.disposed||e===this._empty||(this._empty=e,this._element.style.marginLeft=e?"0":"")}dispose(){this.disposed=!0}}class CM extends J{constructor(e,t){var i;super(),this.customHovers=new Map,this.creationOptions=t,this.domNode=this._register(new xS(ge(e,ye(".monaco-icon-label")))),this.labelContainer=ge(this.domNode.element,ye(".monaco-icon-label-container")),this.nameContainer=ge(this.labelContainer,ye("span.monaco-icon-name-container")),t!=null&&t.supportHighlights||t!=null&&t.supportIcons?this.nameNode=this._register(new ROe(this.nameContainer,!!t.supportIcons)):this.nameNode=new TOe(this.nameContainer),this.hoverDelegate=(i=t==null?void 0:t.hoverDelegate)!==null&&i!==void 0?i:ya("mouse")}get element(){return this.domNode.element}setLabel(e,t,i){var n;const s=["monaco-icon-label"],r=["monaco-icon-label-container"];let a="";if(i&&(i.extraClasses&&s.push(...i.extraClasses),i.italic&&s.push("italic"),i.strikethrough&&s.push("strikethrough"),i.disabledCommand&&r.push("disabled"),i.title&&(typeof i.title=="string"?a+=i.title:a+=e)),this.domNode.className=s.join(" "),this.domNode.element.setAttribute("aria-label",a),this.labelContainer.className=r.join(" "),this.setupHover(i!=null&&i.descriptionTitle?this.labelContainer:this.element,i==null?void 0:i.title),this.nameNode.setLabel(e,i),t||this.descriptionNode){const l=this.getOrCreateDescriptionNode();l instanceof Xp?(l.set(t||"",i?i.descriptionMatches:void 0,void 0,i==null?void 0:i.labelEscapeNewLines),this.setupHover(l.element,i==null?void 0:i.descriptionTitle)):(l.textContent=t&&(i!=null&&i.labelEscapeNewLines)?Xp.escapeNewLines(t,[]):t||"",this.setupHover(l.element,(i==null?void 0:i.descriptionTitle)||""),l.empty=!t)}if(i!=null&&i.suffix||this.suffixNode){const l=this.getOrCreateSuffixNode();l.textContent=(n=i==null?void 0:i.suffix)!==null&&n!==void 0?n:""}}setupHover(e,t){const i=this.customHovers.get(e);if(i&&(i.dispose(),this.customHovers.delete(e)),!t){e.removeAttribute("title");return}if(this.hoverDelegate.showNativeHover)KMe(e,t);else{const n=Zc(this.hoverDelegate,e,t);n&&this.customHovers.set(e,n)}}dispose(){super.dispose();for(const e of this.customHovers.values())e.dispose();this.customHovers.clear()}getOrCreateSuffixNode(){if(!this.suffixNode){const e=this._register(new xS(Z1e(this.nameContainer,ye("span.monaco-icon-suffix-container"))));this.suffixNode=this._register(new xS(ge(e.element,ye("span.label-suffix"))))}return this.suffixNode}getOrCreateDescriptionNode(){var e;if(!this.descriptionNode){const t=this._register(new xS(ge(this.labelContainer,ye("span.monaco-icon-description-container"))));!((e=this.creationOptions)===null||e===void 0)&&e.supportDescriptionHighlights?this.descriptionNode=this._register(new Xp(ge(t.element,ye("span.label-description")),{supportIcons:!!this.creationOptions.supportIcons})):this.descriptionNode=this._register(new xS(ge(t.element,ye("span.label-description"))))}return this.descriptionNode}}class TOe{constructor(e){this.container=e,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&wl(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=ge(this.container,ye("a.label-name",{id:t==null?void 0:t.domId}))),this.singleLabel.textContent=e;else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;for(let i=0;i<e.length;i++){const n=e[i],s=(t==null?void 0:t.domId)&&`${t==null?void 0:t.domId}_${i}`;ge(this.container,ye("a.label-name",{id:s,"data-icon-label-count":e.length,"data-icon-label-index":i,role:"treeitem"},n)),i<e.length-1&&ge(this.container,ye("span.label-separator",void 0,(t==null?void 0:t.separator)||"/"))}}}}function NOe(o,e,t){if(!t)return;let i=0;return o.map(n=>{const s={start:i,end:i+n.length},r=t.map(a=>$o.intersect(s,a)).filter(a=>!$o.isEmpty(a)).map(({start:a,end:l})=>({start:a-i,end:l-i}));return i=s.end+e.length,r})}class ROe extends J{constructor(e,t){super(),this.container=e,this.supportIcons=t,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&wl(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=this._register(new Xp(ge(this.container,ye("a.label-name",{id:t==null?void 0:t.domId})),{supportIcons:this.supportIcons}))),this.singleLabel.set(e,t==null?void 0:t.matches,void 0,t==null?void 0:t.labelEscapeNewLines);else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;const i=(t==null?void 0:t.separator)||"/",n=NOe(e,i,t==null?void 0:t.matches);for(let s=0;s<e.length;s++){const r=e[s],a=n?n[s]:void 0,l=(t==null?void 0:t.domId)&&`${t==null?void 0:t.domId}_${s}`,c=ye("a.label-name",{id:l,"data-icon-label-count":e.length,"data-icon-label-index":s,role:"treeitem"});this._register(new Xp(ge(this.container,c),{supportIcons:this.supportIcons})).set(r,a,void 0,t==null?void 0:t.labelEscapeNewLines),s<e.length-1&&ge(c,ye("span.label-separator",void 0,i))}}}}const RT=ye,nre={keybindingLabelBackground:void 0,keybindingLabelForeground:void 0,keybindingLabelBorder:void 0,keybindingLabelBottomBorder:void 0,keybindingLabelShadow:void 0};class nw extends J{constructor(e,t,i){super(),this.os=t,this.keyElements=new Set,this.options=i||Object.create(null);const n=this.options.keybindingLabelForeground;this.domNode=ge(e,RT(".monaco-keybinding")),n&&(this.domNode.style.color=n),this.hover=this._register(Zc(ya("mouse"),this.domNode,"")),this.didEverRender=!1,e.appendChild(this.domNode)}get element(){return this.domNode}set(e,t){this.didEverRender&&this.keybinding===e&&nw.areSame(this.matches,t)||(this.keybinding=e,this.matches=t,this.render())}render(){var e;if(this.clear(),this.keybinding){const t=this.keybinding.getChords();t[0]&&this.renderChord(this.domNode,t[0],this.matches?this.matches.firstPart:null);for(let n=1;n<t.length;n++)ge(this.domNode,RT("span.monaco-keybinding-key-chord-separator",void 0," ")),this.renderChord(this.domNode,t[n],this.matches?this.matches.chordPart:null);const i=(e=this.options.disableTitle)!==null&&e!==void 0&&e?void 0:this.keybinding.getAriaLabel()||void 0;this.hover.update(i),this.domNode.setAttribute("aria-label",i||"")}else this.options&&this.options.renderUnboundKeybindings&&this.renderUnbound(this.domNode);this.didEverRender=!0}clear(){Zo(this.domNode),this.keyElements.clear()}renderChord(e,t,i){const n=uz.modifierLabels[this.os];t.ctrlKey&&this.renderKey(e,n.ctrlKey,!!(i!=null&&i.ctrlKey),n.separator),t.shiftKey&&this.renderKey(e,n.shiftKey,!!(i!=null&&i.shiftKey),n.separator),t.altKey&&this.renderKey(e,n.altKey,!!(i!=null&&i.altKey),n.separator),t.metaKey&&this.renderKey(e,n.metaKey,!!(i!=null&&i.metaKey),n.separator);const s=t.keyLabel;s&&this.renderKey(e,s,!!(i!=null&&i.keyCode),"")}renderKey(e,t,i,n){ge(e,this.createKeyElement(t,i?".highlight":"")),n&&ge(e,RT("span.monaco-keybinding-key-separator",void 0,n))}renderUnbound(e){ge(e,this.createKeyElement(v("unbound","Unbound")))}createKeyElement(e,t=""){const i=RT("span.monaco-keybinding-key"+t,void 0,e);return this.keyElements.add(i),this.options.keybindingLabelBackground&&(i.style.backgroundColor=this.options.keybindingLabelBackground),this.options.keybindingLabelBorder&&(i.style.borderColor=this.options.keybindingLabelBorder),this.options.keybindingLabelBottomBorder&&(i.style.borderBottomColor=this.options.keybindingLabelBottomBorder),this.options.keybindingLabelShadow&&(i.style.boxShadow=`inset 0 -1px 0 ${this.options.keybindingLabelShadow}`),i}static areSame(e,t){return e===t||!e&&!t?!0:!!e&&!!t&&wl(e.firstPart,t.firstPart)&&wl(e.chordPart,t.chordPart)}}const XX=new tu(()=>{const o=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return{collator:o,collatorIsNumeric:o.resolvedOptions().numeric}});function MOe(o,e,t=!1){const i=o||"",n=e||"",s=XX.value.collator.compare(i,n);return XX.value.collatorIsNumeric&&s===0&&i!==n?i<n?-1:1:s}function AOe(o,e,t){const i=o.toLowerCase(),n=e.toLowerCase(),s=POe(o,e,t);if(s)return s;const r=i.endsWith(t),a=n.endsWith(t);if(r!==a)return r?-1:1;const l=MOe(i,n);return l!==0?l:i.localeCompare(n)}function POe(o,e,t){const i=o.toLowerCase(),n=e.toLowerCase(),s=i.startsWith(t),r=n.startsWith(t);if(s!==r)return s?-1:1;if(s&&r){if(i.length<n.length)return-1;if(i.length>n.length)return 1}return 0}var yP=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},sre=function(o,e){return function(t,i){e(t,i,o)}},U8;const _d=ye;var As;(function(o){o[o.First=1]="First",o[o.Second=2]="Second",o[o.Last=3]="Last",o[o.Next=4]="Next",o[o.Previous=5]="Previous",o[o.NextPage=6]="NextPage",o[o.PreviousPage=7]="PreviousPage",o[o.NextSeparator=8]="NextSeparator",o[o.PreviousSeparator=9]="PreviousSeparator"})(As||(As={}));class ore{constructor(e,t,i){this.index=e,this.hasCheckbox=t,this._hidden=!1,this._init=new tu(()=>{var n;const s=(n=i.label)!==null&&n!==void 0?n:"",r=eL(s).text.trim(),a=i.ariaLabel||[s,this.saneDescription,this.saneDetail].map(l=>ERe(l)).filter(l=>!!l).join(", ");return{saneLabel:s,saneSortLabel:r,saneAriaLabel:a}}),this._saneDescription=i.description,this._saneTooltip=i.tooltip}get saneLabel(){return this._init.value.saneLabel}get saneSortLabel(){return this._init.value.saneSortLabel}get saneAriaLabel(){return this._init.value.saneAriaLabel}get element(){return this._element}set element(e){this._element=e}get hidden(){return this._hidden}set hidden(e){this._hidden=e}get saneDescription(){return this._saneDescription}set saneDescription(e){this._saneDescription=e}get saneDetail(){return this._saneDetail}set saneDetail(e){this._saneDetail=e}get saneTooltip(){return this._saneTooltip}set saneTooltip(e){this._saneTooltip=e}get labelHighlights(){return this._labelHighlights}set labelHighlights(e){this._labelHighlights=e}get descriptionHighlights(){return this._descriptionHighlights}set descriptionHighlights(e){this._descriptionHighlights=e}get detailHighlights(){return this._detailHighlights}set detailHighlights(e){this._detailHighlights=e}}class ar extends ore{constructor(e,t,i,n,s,r){var a,l,c;super(e,t,s),this.fireButtonTriggered=i,this._onChecked=n,this.item=s,this._separator=r,this._checked=!1,this.onChecked=t?Ie.map(Ie.filter(this._onChecked.event,u=>u.element===this),u=>u.checked):Ie.None,this._saneDetail=s.detail,this._labelHighlights=(a=s.highlights)===null||a===void 0?void 0:a.label,this._descriptionHighlights=(l=s.highlights)===null||l===void 0?void 0:l.description,this._detailHighlights=(c=s.highlights)===null||c===void 0?void 0:c.detail}get separator(){return this._separator}set separator(e){this._separator=e}get checked(){return this._checked}set checked(e){e!==this._checked&&(this._checked=e,this._onChecked.fire({element:this,checked:e}))}get checkboxDisabled(){return!!this.item.disabled}}var Ou;(function(o){o[o.NONE=0]="NONE",o[o.MOUSE_HOVER=1]="MOUSE_HOVER",o[o.ACTIVE_ITEM=2]="ACTIVE_ITEM"})(Ou||(Ou={}));class dp extends ore{constructor(e,t,i){super(e,!1,i),this.fireSeparatorButtonTriggered=t,this.separator=i,this.children=new Array,this.focusInsideSeparator=Ou.NONE}}class OOe{getHeight(e){return e instanceof dp?30:e.saneDetail?44:22}getTemplateId(e){return e instanceof ar?jx.ID:lk.ID}}class FOe{getWidgetAriaLabel(){return v("quickInput","Quick Input")}getAriaLabel(e){var t;return!((t=e.separator)===null||t===void 0)&&t.label?`${e.saneAriaLabel}, ${e.separator.label}`:e.saneAriaLabel}getWidgetRole(){return"listbox"}getRole(e){return e.hasCheckbox?"checkbox":"option"}isChecked(e){if(!(!e.hasCheckbox||!(e instanceof ar)))return{value:e.checked,onDidChange:e.onChecked}}}class rre{constructor(e){this.hoverDelegate=e}renderTemplate(e){const t=Object.create(null);t.toDisposeElement=new he,t.toDisposeTemplate=new he,t.entry=ge(e,_d(".quick-input-list-entry"));const i=ge(t.entry,_d("label.quick-input-list-label"));t.toDisposeTemplate.add(ss(i,ke.CLICK,c=>{t.checkbox.offsetParent||c.preventDefault()})),t.checkbox=ge(i,_d("input.quick-input-list-checkbox")),t.checkbox.type="checkbox";const n=ge(i,_d(".quick-input-list-rows")),s=ge(n,_d(".quick-input-list-row")),r=ge(n,_d(".quick-input-list-row"));t.label=new CM(s,{supportHighlights:!0,supportDescriptionHighlights:!0,supportIcons:!0,hoverDelegate:this.hoverDelegate}),t.toDisposeTemplate.add(t.label),t.icon=QV(t.label.element,_d(".quick-input-list-icon"));const a=ge(s,_d(".quick-input-list-entry-keybinding"));t.keybinding=new nw(a,Va),t.toDisposeTemplate.add(t.keybinding);const l=ge(r,_d(".quick-input-list-label-meta"));return t.detail=new CM(l,{supportHighlights:!0,supportIcons:!0,hoverDelegate:this.hoverDelegate}),t.toDisposeTemplate.add(t.detail),t.separator=ge(t.entry,_d(".quick-input-list-separator")),t.actionBar=new pc(t.entry,this.hoverDelegate?{hoverDelegate:this.hoverDelegate}:void 0),t.actionBar.domNode.classList.add("quick-input-list-entry-action-bar"),t.toDisposeTemplate.add(t.actionBar),t}disposeTemplate(e){e.toDisposeElement.dispose(),e.toDisposeTemplate.dispose()}disposeElement(e,t,i){i.toDisposeElement.clear(),i.actionBar.clear()}}let jx=U8=class extends rre{constructor(e,t){super(e),this.themeService=t,this._itemsWithSeparatorsFrequency=new Map}get templateId(){return U8.ID}renderTemplate(e){const t=super.renderTemplate(e);return t.toDisposeTemplate.add(ss(t.checkbox,ke.CHANGE,i=>{t.element.checked=t.checkbox.checked})),t}renderElement(e,t,i){var n,s,r;const a=e.element;i.element=a,a.element=(n=i.entry)!==null&&n!==void 0?n:void 0;const l=a.item;i.checkbox.checked=a.checked,i.toDisposeElement.add(a.onChecked(b=>i.checkbox.checked=b)),i.checkbox.disabled=a.checkboxDisabled;const{labelHighlights:c,descriptionHighlights:u,detailHighlights:f}=a;if(l.iconPath){const b=h1(this.themeService.getColorTheme().type)?l.iconPath.dark:(s=l.iconPath.light)!==null&&s!==void 0?s:l.iconPath.dark,y=gt.revive(b);i.icon.className="quick-input-list-icon",i.icon.style.backgroundImage=hm(y)}else i.icon.style.backgroundImage="",i.icon.className=l.iconClass?`quick-input-list-icon ${l.iconClass}`:"";let g;!a.saneTooltip&&a.saneDescription&&(g={markdown:{value:a.saneDescription,supportThemeIcons:!0},markdownNotSupportedFallback:a.saneDescription});const p={matches:c||[],descriptionTitle:g,descriptionMatches:u||[],labelEscapeNewLines:!0};if(p.extraClasses=l.iconClasses,p.italic=l.italic,p.strikethrough=l.strikethrough,i.entry.classList.remove("quick-input-list-separator-as-item"),i.label.setLabel(a.saneLabel,a.saneDescription,p),i.keybinding.set(l.keybinding),a.saneDetail){let b;a.saneTooltip||(b={markdown:{value:a.saneDetail,supportThemeIcons:!0},markdownNotSupportedFallback:a.saneDetail}),i.detail.element.style.display="",i.detail.setLabel(a.saneDetail,void 0,{matches:f,title:b,labelEscapeNewLines:!0})}else i.detail.element.style.display="none";!((r=a.separator)===null||r===void 0)&&r.label?(i.separator.textContent=a.separator.label,i.separator.style.display="",this.addItemWithSeparator(a)):i.separator.style.display="none",i.entry.classList.toggle("quick-input-list-separator-border",!!a.separator);const _=l.buttons;_&&_.length?(i.actionBar.push(_.map((b,y)=>uM(b,`id-${y}`,()=>a.fireButtonTriggered({button:b,item:a.item}))),{icon:!0,label:!1}),i.entry.classList.add("has-actions")):i.entry.classList.remove("has-actions")}disposeElement(e,t,i){this.removeItemWithSeparator(e.element),super.disposeElement(e,t,i)}isItemWithSeparatorVisible(e){return this._itemsWithSeparatorsFrequency.has(e)}addItemWithSeparator(e){this._itemsWithSeparatorsFrequency.set(e,(this._itemsWithSeparatorsFrequency.get(e)||0)+1)}removeItemWithSeparator(e){const t=this._itemsWithSeparatorsFrequency.get(e)||0;t>1?this._itemsWithSeparatorsFrequency.set(e,t-1):this._itemsWithSeparatorsFrequency.delete(e)}};jx.ID="quickpickitem";jx=U8=yP([sre(1,Us)],jx);class lk extends rre{constructor(){super(...arguments),this._visibleSeparatorsFrequency=new Map}get templateId(){return lk.ID}get visibleSeparators(){return[...this._visibleSeparatorsFrequency.keys()]}isSeparatorVisible(e){return this._visibleSeparatorsFrequency.has(e)}renderElement(e,t,i){var n;const s=e.element;i.element=s,s.element=(n=i.entry)!==null&&n!==void 0?n:void 0,s.element.classList.toggle("focus-inside",!!s.focusInsideSeparator);const r=s.separator,{labelHighlights:a,descriptionHighlights:l,detailHighlights:c}=s;i.icon.style.backgroundImage="",i.icon.className="";let u;!s.saneTooltip&&s.saneDescription&&(u={markdown:{value:s.saneDescription,supportThemeIcons:!0},markdownNotSupportedFallback:s.saneDescription});const f={matches:a||[],descriptionTitle:u,descriptionMatches:l||[],labelEscapeNewLines:!0};if(i.entry.classList.add("quick-input-list-separator-as-item"),i.label.setLabel(s.saneLabel,s.saneDescription,f),s.saneDetail){let p;s.saneTooltip||(p={markdown:{value:s.saneDetail,supportThemeIcons:!0},markdownNotSupportedFallback:s.saneDetail}),i.detail.element.style.display="",i.detail.setLabel(s.saneDetail,void 0,{matches:c,title:p,labelEscapeNewLines:!0})}else i.detail.element.style.display="none";i.separator.style.display="none",i.entry.classList.add("quick-input-list-separator-border");const g=r.buttons;g&&g.length?(i.actionBar.push(g.map((p,_)=>uM(p,`id-${_}`,()=>s.fireSeparatorButtonTriggered({button:p,separator:s.separator}))),{icon:!0,label:!1}),i.entry.classList.add("has-actions")):i.entry.classList.remove("has-actions"),this.addSeparator(s)}disposeElement(e,t,i){var n;this.removeSeparator(e.element),this.isSeparatorVisible(e.element)||(n=e.element.element)===null||n===void 0||n.classList.remove("focus-inside"),super.disposeElement(e,t,i)}addSeparator(e){this._visibleSeparatorsFrequency.set(e,(this._visibleSeparatorsFrequency.get(e)||0)+1)}removeSeparator(e){const t=this._visibleSeparatorsFrequency.get(e)||0;t>1?this._visibleSeparatorsFrequency.set(e,t-1):this._visibleSeparatorsFrequency.delete(e)}}lk.ID="quickpickseparator";let Kx=class extends J{constructor(e,t,i,n,s){super(),this.parent=e,this.hoverDelegate=t,this.linkOpenerDelegate=i,this._onKeyDown=new Y,this.onKeyDown=this._onKeyDown.event,this._onLeave=new Y,this.onLeave=this._onLeave.event,this._onChangedAllVisibleChecked=new Y,this.onChangedAllVisibleChecked=this._onChangedAllVisibleChecked.event,this._onChangedCheckedCount=new Y,this.onChangedCheckedCount=this._onChangedCheckedCount.event,this._onChangedVisibleCount=new Y,this.onChangedVisibleCount=this._onChangedVisibleCount.event,this._onChangedCheckedElements=new Y,this.onChangedCheckedElements=this._onChangedCheckedElements.event,this._onButtonTriggered=new Y,this.onButtonTriggered=this._onButtonTriggered.event,this._onSeparatorButtonTriggered=new Y,this.onSeparatorButtonTriggered=this._onSeparatorButtonTriggered.event,this._onTriggerEmptySelectionOrFocus=new Y,this._elementChecked=new Y,this._inputElements=new Array,this._elementTree=new Array,this._itemElements=new Array,this._elementDisposable=this._register(new he),this._shouldFireCheckedEvents=!0,this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._matchOnLabelMode="fuzzy",this._sortByLabel=!0,this._container=ge(this.parent,_d(".quick-input-list")),this._separatorRenderer=new lk(t),this._itemRenderer=s.createInstance(jx,t),this._tree=this._register(s.createInstance(H8,"QuickInput",this._container,new OOe,[this._itemRenderer,this._separatorRenderer],{accessibilityProvider:new FOe,setRowLineHeight:!1,multipleSelectionSupport:!1,hideTwistiesOfChildlessElements:!0,renderIndentGuides:k1.None,findWidgetEnabled:!1,indent:0,horizontalScrolling:!1,allowNonCollapsibleParents:!0,identityProvider:{getId:r=>{var a,l,c,u,f,g,p,_;return(_=(g=(u=(l=(a=r.item)===null||a===void 0?void 0:a.id)!==null&&l!==void 0?l:(c=r.item)===null||c===void 0?void 0:c.label)!==null&&u!==void 0?u:(f=r.separator)===null||f===void 0?void 0:f.id)!==null&&g!==void 0?g:(p=r.separator)===null||p===void 0?void 0:p.label)!==null&&_!==void 0?_:""}},alwaysConsumeMouseWheel:!0})),this._tree.getHTMLElement().id=n,this._registerListeners()}get onDidChangeFocus(){return Ie.map(Ie.any(this._tree.onDidChangeFocus,this._onTriggerEmptySelectionOrFocus.event),e=>e.elements.filter(t=>t instanceof ar).map(t=>t.item))}get onDidChangeSelection(){return Ie.map(Ie.any(this._tree.onDidChangeSelection,this._onTriggerEmptySelectionOrFocus.event),e=>({items:e.elements.filter(t=>t instanceof ar).map(t=>t.item),event:e.browserEvent}))}get scrollTop(){return this._tree.scrollTop}set scrollTop(e){this._tree.scrollTop=e}get ariaLabel(){return this._tree.ariaLabel}set ariaLabel(e){this._tree.ariaLabel=e??""}set enabled(e){this._tree.getHTMLElement().style.pointerEvents=e?"":"none"}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(e){this._matchOnDescription=e}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(e){this._matchOnDetail=e}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(e){this._matchOnLabel=e}get matchOnLabelMode(){return this._matchOnLabelMode}set matchOnLabelMode(e){this._matchOnLabelMode=e}get sortByLabel(){return this._sortByLabel}set sortByLabel(e){this._sortByLabel=e}_registerListeners(){this._registerOnKeyDown(),this._registerOnContainerClick(),this._registerOnMouseMiddleClick(),this._registerOnElementChecked(),this._registerOnContextMenu(),this._registerHoverListeners(),this._registerSelectionChangeListener(),this._registerSeparatorActionShowingListeners()}_registerOnKeyDown(){this._register(this._tree.onKeyDown(e=>{const t=new _n(e);switch(t.keyCode){case 10:this.toggleCheckbox();break;case 31:(Kt?e.metaKey:e.ctrlKey)&&this._tree.setFocus(this._itemElements);break;case 16:{const i=this._tree.getFocus();i.length===1&&i[0]===this._itemElements[0]&&this._onLeave.fire();break}case 18:{const i=this._tree.getFocus();i.length===1&&i[0]===this._itemElements[this._itemElements.length-1]&&this._onLeave.fire();break}}this._onKeyDown.fire(t)}))}_registerOnContainerClick(){this._register(oe(this._container,ke.CLICK,e=>{(e.x||e.y)&&this._onLeave.fire()}))}_registerOnMouseMiddleClick(){this._register(oe(this._container,ke.AUXCLICK,e=>{e.button===1&&this._onLeave.fire()}))}_registerOnElementChecked(){this._register(this._elementChecked.event(e=>this._fireCheckedEvents()))}_registerOnContextMenu(){this._register(this._tree.onContextMenu(e=>{e.element&&(e.browserEvent.preventDefault(),this._tree.setSelection([e.element]))}))}_registerHoverListeners(){const e=this._register(new wie(this.hoverDelegate.delay));this._register(this._tree.onMouseOver(async t=>{var i;if(t.browserEvent.target instanceof HTMLAnchorElement){e.cancel();return}if(!(!(t.browserEvent.relatedTarget instanceof HTMLAnchorElement)&&ao(t.browserEvent.relatedTarget,(i=t.element)===null||i===void 0?void 0:i.element)))try{await e.trigger(async()=>{t.element instanceof ar&&this.showHover(t.element)})}catch(n){if(!eu(n))throw n}})),this._register(this._tree.onMouseOut(t=>{var i;ao(t.browserEvent.relatedTarget,(i=t.element)===null||i===void 0?void 0:i.element)||e.cancel()}))}_registerSeparatorActionShowingListeners(){this._register(this._tree.onDidChangeFocus(e=>{const t=e.elements[0]?this._tree.getParentElement(e.elements[0]):null;for(const i of this._separatorRenderer.visibleSeparators){const n=i===t;!!(i.focusInsideSeparator&Ou.ACTIVE_ITEM)!==n&&(n?i.focusInsideSeparator|=Ou.ACTIVE_ITEM:i.focusInsideSeparator&=~Ou.ACTIVE_ITEM,this._tree.rerender(i))}})),this._register(this._tree.onMouseOver(e=>{const t=e.element?this._tree.getParentElement(e.element):null;for(const i of this._separatorRenderer.visibleSeparators){if(i!==t)continue;!!(i.focusInsideSeparator&Ou.MOUSE_HOVER)||(i.focusInsideSeparator|=Ou.MOUSE_HOVER,this._tree.rerender(i))}})),this._register(this._tree.onMouseOut(e=>{const t=e.element?this._tree.getParentElement(e.element):null;for(const i of this._separatorRenderer.visibleSeparators){if(i!==t)continue;!!(i.focusInsideSeparator&Ou.MOUSE_HOVER)&&(i.focusInsideSeparator&=~Ou.MOUSE_HOVER,this._tree.rerender(i))}}))}_registerSelectionChangeListener(){this._register(this._tree.onDidChangeSelection(e=>{const t=e.elements.filter(i=>i instanceof ar);t.length!==e.elements.length&&(e.elements.length===1&&e.elements[0]instanceof dp&&(this._tree.setFocus([e.elements[0].children[0]]),this._tree.reveal(e.elements[0],0)),this._tree.setSelection(t))}))}getAllVisibleChecked(){return this._allVisibleChecked(this._itemElements,!1)}getCheckedCount(){return this._itemElements.filter(e=>e.checked).length}getVisibleCount(){return this._itemElements.filter(e=>!e.hidden).length}setAllVisibleChecked(e){try{this._shouldFireCheckedEvents=!1,this._itemElements.forEach(t=>{!t.hidden&&!t.checkboxDisabled&&(t.checked=e)})}finally{this._shouldFireCheckedEvents=!0,this._fireCheckedEvents()}}setElements(e){this._elementDisposable.clear(),this._inputElements=e;const t=this.parent.classList.contains("show-checkboxes");let i;this._itemElements=new Array,this._elementTree=e.reduce((r,a,l)=>{let c;if(a.type==="separator"){if(!a.buttons)return r;i=new dp(l,u=>this.fireSeparatorButtonTriggered(u),a),c=i}else{const u=l>0?e[l-1]:void 0;let f;u&&u.type==="separator"&&!u.buttons&&(i=void 0,f=u);const g=new ar(l,t,p=>this.fireButtonTriggered(p),this._elementChecked,a,f);if(this._itemElements.push(g),i)return i.children.push(g),r;c=g}return r.push(c),r},new Array);const n=new Array;let s=0;for(const r of this._elementTree)r instanceof dp?(n.push({element:r,collapsible:!1,collapsed:!1,children:r.children.map(a=>({element:a,collapsible:!1,collapsed:!1}))}),s+=r.children.length+1):(n.push({element:r,collapsible:!1,collapsed:!1}),s++);this._tree.setChildren(null,n),this._onChangedVisibleCount.fire(s)}setFocusedElements(e){const t=e.map(i=>this._itemElements.find(n=>n.item===i)).filter(i=>!!i);if(this._tree.setFocus(t),e.length>0){const i=this._tree.getFocus()[0];i&&this._tree.reveal(i)}}getActiveDescendant(){return this._tree.getHTMLElement().getAttribute("aria-activedescendant")}setSelectedElements(e){const t=e.map(i=>this._itemElements.find(n=>n.item===i)).filter(i=>!!i);this._tree.setSelection(t)}getCheckedElements(){return this._itemElements.filter(e=>e.checked).map(e=>e.item)}setCheckedElements(e){try{this._shouldFireCheckedEvents=!1;const t=new Set;for(const i of e)t.add(i);for(const i of this._itemElements)i.checked=t.has(i.item)}finally{this._shouldFireCheckedEvents=!0,this._fireCheckedEvents()}}focus(e){var t;if(this._itemElements.length)switch(e===As.Second&&this._itemElements.length<2&&(e=As.First),e){case As.First:this._tree.scrollTop=0,this._tree.focusFirst(void 0,i=>i.element instanceof ar);break;case As.Second:this._tree.scrollTop=0,this._tree.setFocus([this._itemElements[1]]);break;case As.Last:this._tree.scrollTop=this._tree.scrollHeight,this._tree.setFocus([this._itemElements[this._itemElements.length-1]]);break;case As.Next:this._tree.focusNext(void 0,!0,void 0,i=>i.element instanceof ar?(this._tree.reveal(i.element),!0):!1);break;case As.Previous:this._tree.focusPrevious(void 0,!0,void 0,i=>{if(!(i.element instanceof ar))return!1;const n=this._tree.getParentElement(i.element);return n===null||n.children[0]!==i.element?this._tree.reveal(i.element):this._tree.reveal(n),!0});break;case As.NextPage:this._tree.focusNextPage(void 0,i=>i.element instanceof ar?(this._tree.reveal(i.element),!0):!1);break;case As.PreviousPage:this._tree.focusPreviousPage(void 0,i=>{if(!(i.element instanceof ar))return!1;const n=this._tree.getParentElement(i.element);return n===null||n.children[0]!==i.element?this._tree.reveal(i.element):this._tree.reveal(n),!0});break;case As.NextSeparator:{let i=!1;const n=this._tree.getFocus()[0];this._tree.focusNext(void 0,!0,void 0,r=>{if(i)return!0;if(r.element instanceof dp)i=!0,this._separatorRenderer.isSeparatorVisible(r.element)?this._tree.reveal(r.element.children[0]):this._tree.reveal(r.element,0);else if(r.element instanceof ar){if(r.element.separator)return this._itemRenderer.isItemWithSeparatorVisible(r.element)?this._tree.reveal(r.element):this._tree.reveal(r.element,0),!0;if(r.element===this._elementTree[0])return this._tree.reveal(r.element,0),!0}return!1});const s=this._tree.getFocus()[0];n===s&&(this._tree.scrollTop=this._tree.scrollHeight,this._tree.setFocus([this._itemElements[this._itemElements.length-1]]));break}case As.PreviousSeparator:{let i,n=!!(!((t=this._tree.getFocus()[0])===null||t===void 0)&&t.separator);this._tree.focusPrevious(void 0,!0,void 0,s=>{if(s.element instanceof dp)n?i||(this._separatorRenderer.isSeparatorVisible(s.element)?this._tree.reveal(s.element):this._tree.reveal(s.element,0),i=s.element.children[0]):n=!0;else if(s.element instanceof ar&&!i){if(s.element.separator)this._itemRenderer.isItemWithSeparatorVisible(s.element)?this._tree.reveal(s.element):this._tree.reveal(s.element,0),i=s.element;else if(s.element===this._elementTree[0])return this._tree.reveal(s.element,0),!0}return!1}),i&&this._tree.setFocus([i]);break}}}clearFocus(){this._tree.setFocus([])}domFocus(){this._tree.domFocus()}layout(e){this._tree.getHTMLElement().style.maxHeight=e?`${Math.floor(e/44)*44+6}px`:"",this._tree.layout()}filter(e){if(!(this._sortByLabel||this._matchOnLabel||this._matchOnDescription||this._matchOnDetail))return this._tree.layout(),!1;const t=e;if(e=e.trim(),!e||!(this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))this._itemElements.forEach(l=>{l.labelHighlights=void 0,l.descriptionHighlights=void 0,l.detailHighlights=void 0,l.hidden=!1;const c=l.index&&this._inputElements[l.index-1];l.item&&(l.separator=c&&c.type==="separator"&&!c.buttons?c:void 0)});else{let l;this._elementTree.forEach(c=>{var u,f,g,p;let _;this.matchOnLabelMode==="fuzzy"?_=this.matchOnLabel&&(u=j3(e,eL(c.saneLabel)))!==null&&u!==void 0?u:void 0:_=this.matchOnLabel&&(f=BOe(t,eL(c.saneLabel)))!==null&&f!==void 0?f:void 0;const b=this.matchOnDescription&&(g=j3(e,eL(c.saneDescription||"")))!==null&&g!==void 0?g:void 0,y=this.matchOnDetail&&(p=j3(e,eL(c.saneDetail||"")))!==null&&p!==void 0?p:void 0;if(_||b||y?(c.labelHighlights=_,c.descriptionHighlights=b,c.detailHighlights=y,c.hidden=!1):(c.labelHighlights=void 0,c.descriptionHighlights=void 0,c.detailHighlights=void 0,c.hidden=c.item?!c.item.alwaysShow:!0),c.item?c.separator=void 0:c.separator&&(c.hidden=!0),!this.sortByLabel){const S=c.index&&this._inputElements[c.index-1];l=S&&S.type==="separator"?S:l,l&&!c.hidden&&(c.separator=l,l=void 0)}})}const i=this._elementTree.filter(l=>!l.hidden);if(this.sortByLabel&&e){const l=e.toLowerCase();i.sort((c,u)=>WOe(c,u,l))}let n;const s=i.reduce((l,c,u)=>(c instanceof ar?n?n.children.push(c):l.push(c):c instanceof dp&&(c.children=[],n=c,l.push(c)),l),new Array),r=new Array;for(const l of s)l instanceof dp?r.push({element:l,collapsible:!1,collapsed:!1,children:l.children.map(c=>({element:c,collapsible:!1,collapsed:!1}))}):r.push({element:l,collapsible:!1,collapsed:!1});const a=this._tree.getFocus().length;return this._tree.setChildren(null,r),a>0&&r.length===0&&this._onTriggerEmptySelectionOrFocus.fire({elements:[]}),this._tree.layout(),this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked()),this._onChangedVisibleCount.fire(i.length),!0}toggleCheckbox(){try{this._shouldFireCheckedEvents=!1;const e=this._tree.getFocus().filter(i=>i instanceof ar),t=this._allVisibleChecked(e);for(const i of e)i.checkboxDisabled||(i.checked=!t)}finally{this._shouldFireCheckedEvents=!0,this._fireCheckedEvents()}}display(e){this._container.style.display=e?"":"none"}isDisplayed(){return this._container.style.display!=="none"}style(e){this._tree.style(e)}toggleHover(){const e=this._tree.getFocus()[0];if(!(e!=null&&e.saneTooltip)||!(e instanceof ar))return;if(this._lastHover&&!this._lastHover.isDisposed){this._lastHover.dispose();return}this.showHover(e);const t=new he;t.add(this._tree.onDidChangeFocus(i=>{i.elements[0]instanceof ar&&this.showHover(i.elements[0])})),this._lastHover&&t.add(this._lastHover),this._elementDisposable.add(t)}_allVisibleChecked(e,t=!0){for(let i=0,n=e.length;i<n;i++){const s=e[i];if(!s.hidden)if(s.checked)t=!0;else return!1}return t}_fireCheckedEvents(){this._shouldFireCheckedEvents&&(this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked()),this._onChangedCheckedCount.fire(this.getCheckedCount()),this._onChangedCheckedElements.fire(this.getCheckedElements()))}fireButtonTriggered(e){this._onButtonTriggered.fire(e)}fireSeparatorButtonTriggered(e){this._onSeparatorButtonTriggered.fire(e)}showHover(e){var t,i,n;this._lastHover&&!this._lastHover.isDisposed&&((i=(t=this.hoverDelegate).onDidHideHover)===null||i===void 0||i.call(t),(n=this._lastHover)===null||n===void 0||n.dispose()),!(!e.element||!e.saneTooltip)&&(this._lastHover=this.hoverDelegate.showHover({content:e.saneTooltip,target:e.element,linkHandler:s=>{this.linkOpenerDelegate(s)},appearance:{showPointer:!0},container:this._container,position:{hoverPosition:1}},!1))}};yP([fs],Kx.prototype,"onDidChangeFocus",null);yP([fs],Kx.prototype,"onDidChangeSelection",null);Kx=yP([sre(4,ct)],Kx);function BOe(o,e){const{text:t,iconOffsets:i}=e;if(!i||i.length===0)return JX(o,t);const n=MD(t," "),s=t.length-n.length,r=JX(o,n);if(r)for(const a of r){const l=i[a.start+s]+s;a.start+=l,a.end+=l}return r}function JX(o,e){const t=e.toLowerCase().indexOf(o.toLowerCase());return t!==-1?[{start:t,end:t+o.length}]:null}function WOe(o,e,t){const i=o.labelHighlights||[],n=e.labelHighlights||[];return i.length&&!n.length?-1:!i.length&&n.length?1:i.length===0&&n.length===0?0:AOe(o.saneSortLabel,e.saneSortLabel,t)}var VOe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},eJ=function(o,e){return function(t,i){e(t,i,o)}};const $8={iconClass:pt.asClassName(Ee.quickInputBack),tooltip:v("quickInput.back","Back"),handle:-1};class ck extends J{constructor(e){super(),this.ui=e,this._widgetUpdated=!1,this.visible=!1,this._enabled=!0,this._busy=!1,this._ignoreFocusOut=!1,this._buttons=[],this.buttonsUpdated=!1,this._toggles=[],this.togglesUpdated=!1,this.noValidationMessage=ck.noPromptMessage,this._severity=cs.Ignore,this.onDidTriggerButtonEmitter=this._register(new Y),this.onDidHideEmitter=this._register(new Y),this.onWillHideEmitter=this._register(new Y),this.onDisposeEmitter=this._register(new Y),this.visibleDisposables=this._register(new he),this.onDidHide=this.onDidHideEmitter.event}get title(){return this._title}set title(e){this._title=e,this.update()}get description(){return this._description}set description(e){this._description=e,this.update()}get step(){return this._steps}set step(e){this._steps=e,this.update()}get totalSteps(){return this._totalSteps}set totalSteps(e){this._totalSteps=e,this.update()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this.update()}get contextKey(){return this._contextKey}set contextKey(e){this._contextKey=e,this.update()}get busy(){return this._busy}set busy(e){this._busy=e,this.update()}get ignoreFocusOut(){return this._ignoreFocusOut}set ignoreFocusOut(e){const t=this._ignoreFocusOut!==e&&!$d;this._ignoreFocusOut=e&&!$d,t&&this.update()}get buttons(){return this._buttons}set buttons(e){this._buttons=e,this.buttonsUpdated=!0,this.update()}get toggles(){return this._toggles}set toggles(e){this._toggles=e??[],this.togglesUpdated=!0,this.update()}get validationMessage(){return this._validationMessage}set validationMessage(e){this._validationMessage=e,this.update()}get severity(){return this._severity}set severity(e){this._severity=e,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.onDidTriggerButton(e=>{this.buttons.indexOf(e)!==-1&&this.onDidTriggerButtonEmitter.fire(e)})),this.ui.show(this),this.visible=!0,this._lastValidationMessage=void 0,this._lastSeverity=void 0,this.buttons.length&&(this.buttonsUpdated=!0),this.toggles.length&&(this.togglesUpdated=!0),this.update())}hide(){this.visible&&this.ui.hide()}didHide(e=D1.Other){this.visible=!1,this.visibleDisposables.clear(),this.onDidHideEmitter.fire({reason:e})}willHide(e=D1.Other){this.onWillHideEmitter.fire({reason:e})}update(){var e,t;if(!this.visible)return;const i=this.getTitle();i&&this.ui.title.textContent!==i?this.ui.title.textContent=i:!i&&this.ui.title.innerHTML!=="&nbsp;"&&(this.ui.title.innerText="");const n=this.getDescription();if(this.ui.description1.textContent!==n&&(this.ui.description1.textContent=n),this.ui.description2.textContent!==n&&(this.ui.description2.textContent=n),this._widgetUpdated&&(this._widgetUpdated=!1,this._widget?_o(this.ui.widget,this._widget):_o(this.ui.widget)),this.busy&&!this.busyDelay&&(this.busyDelay=new Yc,this.busyDelay.setIfNotSet(()=>{this.visible&&this.ui.progressBar.infinite()},800)),!this.busy&&this.busyDelay&&(this.ui.progressBar.stop(),this.busyDelay.cancel(),this.busyDelay=void 0),this.buttonsUpdated){this.buttonsUpdated=!1,this.ui.leftActionBar.clear();const r=this.buttons.filter(l=>l===$8).map((l,c)=>uM(l,`id-${c}`,async()=>this.onDidTriggerButtonEmitter.fire(l)));this.ui.leftActionBar.push(r,{icon:!0,label:!1}),this.ui.rightActionBar.clear();const a=this.buttons.filter(l=>l!==$8).map((l,c)=>uM(l,`id-${c}`,async()=>this.onDidTriggerButtonEmitter.fire(l)));this.ui.rightActionBar.push(a,{icon:!0,label:!1})}if(this.togglesUpdated){this.togglesUpdated=!1;const r=(t=(e=this.toggles)===null||e===void 0?void 0:e.filter(a=>a instanceof tw))!==null&&t!==void 0?t:[];this.ui.inputBox.toggles=r}this.ui.ignoreFocusOut=this.ignoreFocusOut,this.ui.setEnabled(this.enabled),this.ui.setContextKey(this.contextKey);const s=this.validationMessage||this.noValidationMessage;this._lastValidationMessage!==s&&(this._lastValidationMessage=s,_o(this.ui.message),vPe(s,this.ui.message,{callback:r=>{this.ui.linkOpenerDelegate(r)},disposables:this.visibleDisposables})),this._lastSeverity!==this.severity&&(this._lastSeverity=this.severity,this.showMessageDecoration(this.severity))}getTitle(){return this.title&&this.step?`${this.title} (${this.getSteps()})`:this.title?this.title:this.step?this.getSteps():""}getDescription(){return this.description||""}getSteps(){return this.step&&this.totalSteps?v("quickInput.steps","{0}/{1}",this.step,this.totalSteps):this.step?String(this.step):""}showMessageDecoration(e){if(this.ui.inputBox.showDecoration(e),e!==cs.Ignore){const t=this.ui.inputBox.stylesForType(e);this.ui.message.style.color=t.foreground?`${t.foreground}`:"",this.ui.message.style.backgroundColor=t.background?`${t.background}`:"",this.ui.message.style.border=t.border?`1px solid ${t.border}`:"",this.ui.message.style.marginBottom="-2px"}else this.ui.message.style.color="",this.ui.message.style.backgroundColor="",this.ui.message.style.border="",this.ui.message.style.marginBottom=""}dispose(){this.hide(),this.onDisposeEmitter.fire(),super.dispose()}}ck.noPromptMessage=v("inputModeEntry","Press 'Enter' to confirm your input or 'Escape' to cancel");class qx extends ck{constructor(){super(...arguments),this._value="",this.onDidChangeValueEmitter=this._register(new Y),this.onWillAcceptEmitter=this._register(new Y),this.onDidAcceptEmitter=this._register(new Y),this.onDidCustomEmitter=this._register(new Y),this._items=[],this.itemsUpdated=!1,this._canSelectMany=!1,this._canAcceptInBackground=!1,this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._matchOnLabelMode="fuzzy",this._sortByLabel=!0,this._keepScrollPosition=!1,this._itemActivation=yd.FIRST,this._activeItems=[],this.activeItemsUpdated=!1,this.activeItemsToConfirm=[],this.onDidChangeActiveEmitter=this._register(new Y),this._selectedItems=[],this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=[],this.onDidChangeSelectionEmitter=this._register(new Y),this.onDidTriggerItemButtonEmitter=this._register(new Y),this.onDidTriggerSeparatorButtonEmitter=this._register(new Y),this.valueSelectionUpdated=!0,this._ok="default",this._customButton=!1,this.filterValue=e=>e,this.onDidChangeValue=this.onDidChangeValueEmitter.event,this.onWillAccept=this.onWillAcceptEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event,this.onDidChangeActive=this.onDidChangeActiveEmitter.event,this.onDidChangeSelection=this.onDidChangeSelectionEmitter.event,this.onDidTriggerItemButton=this.onDidTriggerItemButtonEmitter.event,this.onDidTriggerSeparatorButton=this.onDidTriggerSeparatorButtonEmitter.event}get quickNavigate(){return this._quickNavigate}set quickNavigate(e){this._quickNavigate=e,this.update()}get value(){return this._value}set value(e){this.doSetValue(e)}doSetValue(e,t){this._value!==e&&(this._value=e,t||this.update(),this.visible&&this.ui.list.filter(this.filterValue(this._value))&&this.trySelectFirst(),this.onDidChangeValueEmitter.fire(this._value))}set ariaLabel(e){this._ariaLabel=e,this.update()}get ariaLabel(){return this._ariaLabel}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get items(){return this._items}get scrollTop(){return this.ui.list.scrollTop}set scrollTop(e){this.ui.list.scrollTop=e}set items(e){this._items=e,this.itemsUpdated=!0,this.update()}get canSelectMany(){return this._canSelectMany}set canSelectMany(e){this._canSelectMany=e,this.update()}get canAcceptInBackground(){return this._canAcceptInBackground}set canAcceptInBackground(e){this._canAcceptInBackground=e}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(e){this._matchOnDescription=e,this.update()}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(e){this._matchOnDetail=e,this.update()}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(e){this._matchOnLabel=e,this.update()}get matchOnLabelMode(){return this._matchOnLabelMode}set matchOnLabelMode(e){this._matchOnLabelMode=e,this.update()}get sortByLabel(){return this._sortByLabel}set sortByLabel(e){this._sortByLabel=e,this.update()}get keepScrollPosition(){return this._keepScrollPosition}set keepScrollPosition(e){this._keepScrollPosition=e}get itemActivation(){return this._itemActivation}set itemActivation(e){this._itemActivation=e}get activeItems(){return this._activeItems}set activeItems(e){this._activeItems=e,this.activeItemsUpdated=!0,this.update()}get selectedItems(){return this._selectedItems}set selectedItems(e){this._selectedItems=e,this.selectedItemsUpdated=!0,this.update()}get keyMods(){return this._quickNavigate?uPe:this.ui.keyMods}get valueSelection(){const e=this.ui.inputBox.getSelection();if(e)return[e.start,e.end]}set valueSelection(e){this._valueSelection=e,this.valueSelectionUpdated=!0,this.update()}get customButton(){return this._customButton}set customButton(e){this._customButton=e,this.update()}get customLabel(){return this._customButtonLabel}set customLabel(e){this._customButtonLabel=e,this.update()}get customHover(){return this._customButtonHover}set customHover(e){this._customButtonHover=e,this.update()}get ok(){return this._ok}set ok(e){this._ok=e,this.update()}get hideInput(){return!!this._hideInput}set hideInput(e){this._hideInput=e,this.update()}trySelectFirst(){this.canSelectMany||this.ui.list.focus(As.First)}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(e=>{this.doSetValue(e,!0)})),this.visibleDisposables.add((this._hideInput?this.ui.list:this.ui.inputBox).onKeyDown(e=>{switch(e.keyCode){case 18:(Kt?e.metaKey:e.altKey)?this.ui.list.focus(As.NextSeparator):this.ui.list.focus(As.Next),this.canSelectMany&&this.ui.list.domFocus(),Ut.stop(e,!0);break;case 16:(Kt?e.metaKey:e.altKey)?this.ui.list.focus(As.PreviousSeparator):this.ui.list.focus(As.Previous),this.canSelectMany&&this.ui.list.domFocus(),Ut.stop(e,!0);break;case 12:this.ui.list.focus(As.NextPage),this.canSelectMany&&this.ui.list.domFocus(),Ut.stop(e,!0);break;case 11:this.ui.list.focus(As.PreviousPage),this.canSelectMany&&this.ui.list.domFocus(),Ut.stop(e,!0);break;case 17:if(!this._canAcceptInBackground||!this.ui.inputBox.isSelectionAtEnd())return;this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!0));break;case 14:(e.ctrlKey||e.metaKey)&&!e.shiftKey&&!e.altKey&&(this.ui.list.focus(As.First),Ut.stop(e,!0));break;case 13:(e.ctrlKey||e.metaKey)&&!e.shiftKey&&!e.altKey&&(this.ui.list.focus(As.Last),Ut.stop(e,!0));break}})),this.visibleDisposables.add(this.ui.onDidAccept(()=>{this.canSelectMany?this.ui.list.getCheckedElements().length||(this._selectedItems=[],this.onDidChangeSelectionEmitter.fire(this.selectedItems)):this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems)),this.handleAccept(!1)})),this.visibleDisposables.add(this.ui.onDidCustom(()=>{this.onDidCustomEmitter.fire()})),this.visibleDisposables.add(this.ui.list.onDidChangeFocus(e=>{this.activeItemsUpdated||this.activeItemsToConfirm!==this._activeItems&&zn(e,this._activeItems,(t,i)=>t===i)||(this._activeItems=e,this.onDidChangeActiveEmitter.fire(e))})),this.visibleDisposables.add(this.ui.list.onDidChangeSelection(({items:e,event:t})=>{if(this.canSelectMany){e.length&&this.ui.list.setSelectedElements([]);return}this.selectedItemsToConfirm!==this._selectedItems&&zn(e,this._selectedItems,(i,n)=>i===n)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e),e.length&&this.handleAccept(ZV(t)&&t.button===1))})),this.visibleDisposables.add(this.ui.list.onChangedCheckedElements(e=>{this.canSelectMany&&(this.selectedItemsToConfirm!==this._selectedItems&&zn(e,this._selectedItems,(t,i)=>t===i)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e)))})),this.visibleDisposables.add(this.ui.list.onButtonTriggered(e=>this.onDidTriggerItemButtonEmitter.fire(e))),this.visibleDisposables.add(this.ui.list.onSeparatorButtonTriggered(e=>this.onDidTriggerSeparatorButtonEmitter.fire(e))),this.visibleDisposables.add(this.registerQuickNavigation()),this.valueSelectionUpdated=!0),super.show()}handleAccept(e){let t=!1;this.onWillAcceptEmitter.fire({veto:()=>t=!0}),t||this.onDidAcceptEmitter.fire({inBackground:e})}registerQuickNavigation(){return oe(this.ui.container,ke.KEY_UP,e=>{if(this.canSelectMany||!this._quickNavigate)return;const t=new _n(e),i=t.keyCode;this._quickNavigate.keybindings.some(r=>{const a=r.getChords();return a.length>1?!1:a[0].shiftKey&&i===4?!(t.ctrlKey||t.altKey||t.metaKey):!!(a[0].altKey&&i===6||a[0].ctrlKey&&i===5||a[0].metaKey&&i===57)})&&(this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!1)),this._quickNavigate=void 0)})}update(){if(!this.visible)return;const e=this.keepScrollPosition?this.scrollTop:0,t=!!this.description,i={title:!!this.title||!!this.step||!!this.buttons.length,description:t,checkAll:this.canSelectMany&&!this._hideCheckAll,checkBox:this.canSelectMany,inputBox:!this._hideInput,progressBar:!this._hideInput||t,visibleCount:!0,count:this.canSelectMany&&!this._hideCountBadge,ok:this.ok==="default"?this.canSelectMany:this.ok,list:!0,message:!!this.validationMessage,customButton:this.customButton};this.ui.setVisibilities(i),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||"");let n=this.ariaLabel;if(!n&&i.inputBox&&(n=this.placeholder||qx.DEFAULT_ARIA_LABEL,this.title&&(n+=` - ${this.title}`)),this.ui.list.ariaLabel!==n&&(this.ui.list.ariaLabel=n??null),this.ui.list.matchOnDescription=this.matchOnDescription,this.ui.list.matchOnDetail=this.matchOnDetail,this.ui.list.matchOnLabel=this.matchOnLabel,this.ui.list.matchOnLabelMode=this.matchOnLabelMode,this.ui.list.sortByLabel=this.sortByLabel,this.itemsUpdated){this.itemsUpdated=!1;const s=this._activeItems;switch(this.ui.list.setElements(this.items),this.ui.list.filter(this.filterValue(this.ui.inputBox.value)),this.ui.checkAll.checked=this.ui.list.getAllVisibleChecked(),this.ui.visibleCount.setCount(this.ui.list.getVisibleCount()),this.ui.count.setCount(this.ui.list.getCheckedCount()),this._itemActivation){case yd.NONE:s.length>0&&(this._activeItems=[],this.onDidChangeActiveEmitter.fire(this._activeItems)),this._itemActivation=yd.FIRST;break;case yd.SECOND:this.ui.list.focus(As.Second),this._itemActivation=yd.FIRST;break;case yd.LAST:this.ui.list.focus(As.Last),this._itemActivation=yd.FIRST;break;default:this.trySelectFirst();break}}this.ui.container.classList.contains("show-checkboxes")!==!!this.canSelectMany&&(this.canSelectMany?this.ui.list.clearFocus():this.trySelectFirst()),this.activeItemsUpdated&&(this.activeItemsUpdated=!1,this.activeItemsToConfirm=this._activeItems,this.ui.list.setFocusedElements(this.activeItems),this.activeItemsToConfirm===this._activeItems&&(this.activeItemsToConfirm=null)),this.selectedItemsUpdated&&(this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=this._selectedItems,this.canSelectMany?this.ui.list.setCheckedElements(this.selectedItems):this.ui.list.setSelectedElements(this.selectedItems),this.selectedItemsToConfirm===this._selectedItems&&(this.selectedItemsToConfirm=null)),this.ui.customButton.label=this.customLabel||"",this.ui.customButton.element.title=this.customHover||"",i.inputBox||(this.ui.list.domFocus(),this.canSelectMany&&this.ui.list.focus(As.First)),this.keepScrollPosition&&(this.scrollTop=e)}}qx.DEFAULT_ARIA_LABEL=v("quickInputBox.ariaLabel","Type to narrow down results.");class HOe extends ck{constructor(){super(...arguments),this._value="",this.valueSelectionUpdated=!0,this._password=!1,this.onDidValueChangeEmitter=this._register(new Y),this.onDidAcceptEmitter=this._register(new Y),this.onDidChangeValue=this.onDidValueChangeEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event}get value(){return this._value}set value(e){this._value=e||"",this.update()}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get password(){return this._password}set password(e){this._password=e,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(e=>{e!==this.value&&(this._value=e,this.onDidValueChangeEmitter.fire(e))})),this.visibleDisposables.add(this.ui.onDidAccept(()=>this.onDidAcceptEmitter.fire())),this.valueSelectionUpdated=!0),super.show()}update(){if(!this.visible)return;this.ui.container.classList.remove("hidden-input");const e={title:!!this.title||!!this.step||!!this.buttons.length,description:!!this.description||!!this.step,inputBox:!0,message:!0,progressBar:!0};this.ui.setVisibilities(e),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||""),this.ui.inputBox.password!==this.password&&(this.ui.inputBox.password=this.password)}}let j8=class extends Ix{constructor(e,t){super("element",!1,i=>this.getOverrideOptions(i),e,t)}getOverrideOptions(e){var t;const i=(e.content instanceof HTMLElement?(t=e.content.textContent)!==null&&t!==void 0?t:"":typeof e.content=="string"?e.content:e.content.value).includes(`
`);return{persistence:{hideOnKeyDown:!1},appearance:{showHoverHint:i,skipFadeInAnimation:!0}}}};j8=VOe([eJ(0,$t),eJ(1,QH)],j8);ne.white.toString(),ne.white.toString();class wM extends J{get onDidClick(){return this._onDidClick.event}constructor(e,t){super(),this._label="",this._onDidClick=this._register(new Y),this._onDidEscape=this._register(new Y),this.options=t,this._element=document.createElement("a"),this._element.classList.add("monaco-button"),this._element.tabIndex=0,this._element.setAttribute("role","button"),this._element.classList.toggle("secondary",!!t.secondary);const i=t.secondary?t.buttonSecondaryBackground:t.buttonBackground,n=t.secondary?t.buttonSecondaryForeground:t.buttonForeground;this._element.style.color=n||"",this._element.style.backgroundColor=i||"",t.supportShortLabel&&(this._labelShortElement=document.createElement("div"),this._labelShortElement.classList.add("monaco-button-label-short"),this._element.appendChild(this._labelShortElement),this._labelElement=document.createElement("div"),this._labelElement.classList.add("monaco-button-label"),this._element.appendChild(this._labelElement),this._element.classList.add("monaco-text-button-with-short-label")),typeof t.title=="string"&&this.setTitle(t.title),typeof t.ariaLabel=="string"&&this._element.setAttribute("aria-label",t.ariaLabel),e.appendChild(this._element),this._register(rn.addTarget(this._element)),[ke.CLICK,ln.Tap].forEach(s=>{this._register(oe(this._element,s,r=>{if(!this.enabled){Ut.stop(r);return}this._onDidClick.fire(r)}))}),this._register(oe(this._element,ke.KEY_DOWN,s=>{const r=new _n(s);let a=!1;this.enabled&&(r.equals(3)||r.equals(10))?(this._onDidClick.fire(s),a=!0):r.equals(9)&&(this._onDidEscape.fire(s),this._element.blur(),a=!0),a&&Ut.stop(r,!0)})),this._register(oe(this._element,ke.MOUSE_OVER,s=>{this._element.classList.contains("disabled")||this.updateBackground(!0)})),this._register(oe(this._element,ke.MOUSE_OUT,s=>{this.updateBackground(!1)})),this.focusTracker=this._register(Kd(this._element)),this._register(this.focusTracker.onDidFocus(()=>{this.enabled&&this.updateBackground(!0)})),this._register(this.focusTracker.onDidBlur(()=>{this.enabled&&this.updateBackground(!1)}))}dispose(){super.dispose(),this._element.remove()}getContentElements(e){const t=[];for(let i of Yp(e))if(typeof i=="string"){if(i=i.trim(),i==="")continue;const n=document.createElement("span");n.textContent=i,t.push(n)}else t.push(i);return t}updateBackground(e){let t;this.options.secondary?t=e?this.options.buttonSecondaryHoverBackground:this.options.buttonSecondaryBackground:t=e?this.options.buttonHoverBackground:this.options.buttonBackground,t&&(this._element.style.backgroundColor=t)}get element(){return this._element}set label(e){var t;if(this._label===e||zd(this._label)&&zd(e)&&IRe(this._label,e))return;this._element.classList.add("monaco-text-button");const i=this.options.supportShortLabel?this._labelElement:this._element;if(zd(e)){const s=tP(e,{inline:!0});s.dispose();const r=(t=s.element.querySelector("p"))===null||t===void 0?void 0:t.innerHTML;if(r){const a=Eie(r,{ADD_TAGS:["b","i","u","code","span"],ALLOWED_ATTR:["class"],RETURN_TRUSTED_TYPE:!0});i.innerHTML=a}else _o(i)}else this.options.supportIcons?_o(i,...this.getContentElements(e)):i.textContent=e;let n="";typeof this.options.title=="string"?n=this.options.title:this.options.title&&(n=FRe(e)),this.setTitle(n),typeof this.options.ariaLabel=="string"?this._element.setAttribute("aria-label",this.options.ariaLabel):this.options.ariaLabel&&this._element.setAttribute("aria-label",n),this._label=e}get label(){return this._label}set icon(e){this._element.classList.add(...pt.asClassNameArray(e))}set enabled(e){e?(this._element.classList.remove("disabled"),this._element.setAttribute("aria-disabled",String(!1)),this._element.tabIndex=0):(this._element.classList.add("disabled"),this._element.setAttribute("aria-disabled",String(!0)))}get enabled(){return!this._element.classList.contains("disabled")}setTitle(e){var t;!this._hover&&e!==""?this._hover=this._register(Zc((t=this.options.hoverDelegate)!==null&&t!==void 0?t:ya("mouse"),this._element,e)):this._hover&&this._hover.update(e)}}class K8{constructor(e,t,i){this.options=t,this.styles=i,this.count=0,this.element=ge(e,ye(".monaco-count-badge")),this.countFormat=this.options.countFormat||"{0}",this.titleFormat=this.options.titleFormat||"",this.setCount(this.options.count||0)}setCount(e){this.count=e,this.render()}setTitleFormat(e){this.titleFormat=e,this.render()}render(){var e,t;this.element.textContent=kv(this.countFormat,this.count),this.element.title=kv(this.titleFormat,this.count),this.element.style.backgroundColor=(e=this.styles.badgeBackground)!==null&&e!==void 0?e:"",this.element.style.color=(t=this.styles.badgeForeground)!==null&&t!==void 0?t:"",this.styles.badgeBorder&&(this.element.style.border=`1px solid ${this.styles.badgeBorder}`)}}const tJ="done",iJ="active",sB="infinite",oB="infinite-long-running",nJ="discrete";class SP extends J{constructor(e,t){super(),this.workedVal=0,this.showDelayedScheduler=this._register(new Ui(()=>Ba(this.element),0)),this.longRunningScheduler=this._register(new Ui(()=>this.infiniteLongRunning(),SP.LONG_RUNNING_INFINITE_THRESHOLD)),this.create(e,t)}create(e,t){this.element=document.createElement("div"),this.element.classList.add("monaco-progress-container"),this.element.setAttribute("role","progressbar"),this.element.setAttribute("aria-valuemin","0"),e.appendChild(this.element),this.bit=document.createElement("div"),this.bit.classList.add("progress-bit"),this.bit.style.backgroundColor=(t==null?void 0:t.progressBarBackground)||"#0E70C0",this.element.appendChild(this.bit)}off(){this.bit.style.width="inherit",this.bit.style.opacity="1",this.element.classList.remove(iJ,sB,oB,nJ),this.workedVal=0,this.totalWork=void 0,this.longRunningScheduler.cancel()}stop(){return this.doDone(!1)}doDone(e){return this.element.classList.add(tJ),this.element.classList.contains(sB)?(this.bit.style.opacity="0",e?setTimeout(()=>this.off(),200):this.off()):(this.bit.style.width="inherit",e?setTimeout(()=>this.off(),200):this.off()),this}infinite(){return this.bit.style.width="2%",this.bit.style.opacity="1",this.element.classList.remove(nJ,tJ,oB),this.element.classList.add(iJ,sB),this.longRunningScheduler.schedule(),this}infiniteLongRunning(){this.element.classList.add(oB)}getContainer(){return this.element}}SP.LONG_RUNNING_INFINITE_THRESHOLD=1e4;const zOe=ye;class UOe extends J{constructor(e,t,i){super(),this.parent=e,this.onKeyDown=s=>ss(this.findInput.inputBox.inputElement,ke.KEY_DOWN,s),this.onDidChange=s=>this.findInput.onDidChange(s),this.container=ge(this.parent,zOe(".quick-input-box")),this.findInput=this._register(new Woe(this.container,void 0,{label:"",inputBoxStyles:t,toggleStyles:i}));const n=this.findInput.inputBox.inputElement;n.role="combobox",n.ariaHasPopup="menu",n.ariaAutoComplete="list",n.ariaExpanded="true"}get value(){return this.findInput.getValue()}set value(e){this.findInput.setValue(e)}select(e=null){this.findInput.inputBox.select(e)}getSelection(){return this.findInput.inputBox.getSelection()}isSelectionAtEnd(){return this.findInput.inputBox.isSelectionAtEnd()}get placeholder(){return this.findInput.inputBox.inputElement.getAttribute("placeholder")||""}set placeholder(e){this.findInput.inputBox.setPlaceHolder(e)}get password(){return this.findInput.inputBox.inputElement.type==="password"}set password(e){this.findInput.inputBox.inputElement.type=e?"password":"text"}set enabled(e){this.findInput.inputBox.inputElement.toggleAttribute("readonly",!e)}set toggles(e){this.findInput.setAdditionalToggles(e)}setAttribute(e,t){this.findInput.inputBox.inputElement.setAttribute(e,t)}showDecoration(e){e===cs.Ignore?this.findInput.clearMessage():this.findInput.showMessage({type:e===cs.Info?1:e===cs.Warning?2:3,content:""})}stylesForType(e){return this.findInput.inputBox.stylesForType(e===cs.Info?1:e===cs.Warning?2:3)}setFocus(){this.findInput.focus()}layout(){this.findInput.inputBox.layout()}}var $Oe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},sJ=function(o,e){return function(t,i){e(t,i,o)}},q8;const Oa=ye;let yM=q8=class extends J{get container(){return this._container}constructor(e,t,i){super(),this.options=e,this.layoutService=t,this.instantiationService=i,this.enabled=!0,this.onDidAcceptEmitter=this._register(new Y),this.onDidCustomEmitter=this._register(new Y),this.onDidTriggerButtonEmitter=this._register(new Y),this.keyMods={ctrlCmd:!1,alt:!1},this.controller=null,this.onShowEmitter=this._register(new Y),this.onShow=this.onShowEmitter.event,this.onHideEmitter=this._register(new Y),this.onHide=this.onHideEmitter.event,this.idPrefix=e.idPrefix,this._container=e.container,this.styles=e.styles,this._register(Ie.runAndSubscribe(pA,({window:n,disposables:s})=>this.registerKeyModsListeners(n,s),{window:Hi,disposables:this._store})),this._register(M1e(n=>{this.ui&&ft(this.ui.container)===n&&(this.reparentUI(this.layoutService.mainContainer),this.layout(this.layoutService.mainContainerDimension,this.layoutService.mainContainerOffset.quickPickTop))}))}registerKeyModsListeners(e,t){const i=n=>{this.keyMods.ctrlCmd=n.ctrlKey||n.metaKey,this.keyMods.alt=n.altKey};for(const n of[ke.KEY_DOWN,ke.KEY_UP,ke.MOUSE_DOWN])t.add(oe(e,n,i,!0))}getUI(e){if(this.ui)return e&&ft(this._container)!==ft(this.layoutService.activeContainer)&&(this.reparentUI(this.layoutService.activeContainer),this.layout(this.layoutService.activeContainerDimension,this.layoutService.activeContainerOffset.quickPickTop)),this.ui;const t=ge(this._container,Oa(".quick-input-widget.show-file-icons"));t.tabIndex=-1,t.style.display="none";const i=xl(t),n=ge(t,Oa(".quick-input-titlebar")),s=this._register(new pc(n,{hoverDelegate:this.options.hoverDelegate}));s.domNode.classList.add("quick-input-left-action-bar");const r=ge(n,Oa(".quick-input-title")),a=this._register(new pc(n,{hoverDelegate:this.options.hoverDelegate}));a.domNode.classList.add("quick-input-right-action-bar");const l=ge(t,Oa(".quick-input-header")),c=ge(l,Oa("input.quick-input-check-all"));c.type="checkbox",c.setAttribute("aria-label",v("quickInput.checkAll","Toggle all checkboxes")),this._register(ss(c,ke.CHANGE,q=>{const se=c.checked;K.setAllVisibleChecked(se)})),this._register(oe(c,ke.CLICK,q=>{(q.x||q.y)&&p.setFocus()}));const u=ge(l,Oa(".quick-input-description")),f=ge(l,Oa(".quick-input-and-message")),g=ge(f,Oa(".quick-input-filter")),p=this._register(new UOe(g,this.styles.inputBox,this.styles.toggle));p.setAttribute("aria-describedby",`${this.idPrefix}message`);const _=ge(g,Oa(".quick-input-visible-count"));_.setAttribute("aria-live","polite"),_.setAttribute("aria-atomic","true");const b=new K8(_,{countFormat:v({key:"quickInput.visibleCount",comment:["This tells the user how many items are shown in a list of items to select from. The items can be anything. Currently not visible, but read by screen readers."]},"{0} Results")},this.styles.countBadge),y=ge(g,Oa(".quick-input-count"));y.setAttribute("aria-live","polite");const S=new K8(y,{countFormat:v({key:"quickInput.countSelected",comment:["This tells the user how many items are selected in a list of items to select from. The items can be anything."]},"{0} Selected")},this.styles.countBadge),L=ge(l,Oa(".quick-input-action")),x=this._register(new wM(L,this.styles.button));x.label=v("ok","OK"),this._register(x.onDidClick(q=>{this.onDidAcceptEmitter.fire()}));const D=ge(l,Oa(".quick-input-action")),E=this._register(new wM(D,{...this.styles.button,supportIcons:!0}));E.label=v("custom","Custom"),this._register(E.onDidClick(q=>{this.onDidCustomEmitter.fire()}));const N=ge(f,Oa(`#${this.idPrefix}message.quick-input-message`)),M=this._register(new SP(t,this.styles.progressBar));M.getContainer().classList.add("quick-input-progress");const F=ge(t,Oa(".quick-input-html-widget"));F.tabIndex=-1;const H=ge(t,Oa(".quick-input-description")),Q=this.idPrefix+"list",K=this._register(this.instantiationService.createInstance(Kx,t,this.options.hoverDelegate,this.options.linkOpenerDelegate,Q));p.setAttribute("aria-controls",Q),this._register(K.onDidChangeFocus(()=>{var q;p.setAttribute("aria-activedescendant",(q=K.getActiveDescendant())!==null&&q!==void 0?q:"")})),this._register(K.onChangedAllVisibleChecked(q=>{c.checked=q})),this._register(K.onChangedVisibleCount(q=>{b.setCount(q)})),this._register(K.onChangedCheckedCount(q=>{S.setCount(q)})),this._register(K.onLeave(()=>{setTimeout(()=>{this.controller&&(p.setFocus(),this.controller instanceof qx&&this.controller.canSelectMany&&K.clearFocus())},0)}));const j=Kd(t);return this._register(j),this._register(oe(t,ke.FOCUS,q=>{ao(q.relatedTarget,t)||(this.previousFocusElement=q.relatedTarget instanceof HTMLElement?q.relatedTarget:void 0)},!0)),this._register(j.onDidBlur(()=>{!this.getUI().ignoreFocusOut&&!this.options.ignoreFocusOut()&&this.hide(D1.Blur),this.previousFocusElement=void 0})),this._register(oe(t,ke.FOCUS,q=>{p.setFocus()})),this._register(ss(t,ke.KEY_DOWN,q=>{if(!ao(q.target,F))switch(q.keyCode){case 3:Ut.stop(q,!0),this.enabled&&this.onDidAcceptEmitter.fire();break;case 9:Ut.stop(q,!0),this.hide(D1.Gesture);break;case 2:if(!q.altKey&&!q.ctrlKey&&!q.metaKey){const se=[".quick-input-list .monaco-action-bar .always-visible",".quick-input-list-entry:hover .monaco-action-bar",".monaco-list-row.focused .monaco-action-bar"];if(t.classList.contains("show-checkboxes")?se.push("input"):se.push("input[type=text]"),this.getUI().list.isDisplayed()&&se.push(".monaco-list"),this.getUI().message&&se.push(".quick-input-message a"),this.getUI().widget){if(ao(q.target,this.getUI().widget))break;se.push(".quick-input-html-widget")}const fe=t.querySelectorAll(se.join(", "));q.shiftKey&&q.target===fe[0]?(Ut.stop(q,!0),K.clearFocus()):!q.shiftKey&&ao(q.target,fe[fe.length-1])&&(Ut.stop(q,!0),fe[0].focus())}break;case 10:q.ctrlKey&&(Ut.stop(q,!0),this.getUI().list.toggleHover());break}})),this.ui={container:t,styleSheet:i,leftActionBar:s,titleBar:n,title:r,description1:H,description2:u,widget:F,rightActionBar:a,checkAll:c,inputContainer:f,filterContainer:g,inputBox:p,visibleCountContainer:_,visibleCount:b,countContainer:y,count:S,okContainer:L,ok:x,message:N,customButtonContainer:D,customButton:E,list:K,progressBar:M,onDidAccept:this.onDidAcceptEmitter.event,onDidCustom:this.onDidCustomEmitter.event,onDidTriggerButton:this.onDidTriggerButtonEmitter.event,ignoreFocusOut:!1,keyMods:this.keyMods,show:q=>this.show(q),hide:()=>this.hide(),setVisibilities:q=>this.setVisibilities(q),setEnabled:q=>this.setEnabled(q),setContextKey:q=>this.options.setContextKey(q),linkOpenerDelegate:q=>this.options.linkOpenerDelegate(q)},this.updateStyles(),this.ui}reparentUI(e){this.ui&&(this._container=e,ge(this._container,this.ui.container))}pick(e,t={},i=Yt.None){return new Promise((n,s)=>{let r=u=>{var f;r=n,(f=t.onKeyMods)===null||f===void 0||f.call(t,a.keyMods),n(u)};if(i.isCancellationRequested){r(void 0);return}const a=this.createQuickPick();let l;const c=[a,a.onDidAccept(()=>{if(a.canSelectMany)r(a.selectedItems.slice()),a.hide();else{const u=a.activeItems[0];u&&(r(u),a.hide())}}),a.onDidChangeActive(u=>{const f=u[0];f&&t.onDidFocus&&t.onDidFocus(f)}),a.onDidChangeSelection(u=>{if(!a.canSelectMany){const f=u[0];f&&(r(f),a.hide())}}),a.onDidTriggerItemButton(u=>t.onDidTriggerItemButton&&t.onDidTriggerItemButton({...u,removeItem:()=>{const f=a.items.indexOf(u.item);if(f!==-1){const g=a.items.slice(),p=g.splice(f,1),_=a.activeItems.filter(y=>y!==p[0]),b=a.keepScrollPosition;a.keepScrollPosition=!0,a.items=g,_&&(a.activeItems=_),a.keepScrollPosition=b}}})),a.onDidTriggerSeparatorButton(u=>{var f;return(f=t.onDidTriggerSeparatorButton)===null||f===void 0?void 0:f.call(t,u)}),a.onDidChangeValue(u=>{l&&!u&&(a.activeItems.length!==1||a.activeItems[0]!==l)&&(a.activeItems=[l])}),i.onCancellationRequested(()=>{a.hide()}),a.onDidHide(()=>{cn(c),r(void 0)})];a.title=t.title,a.canSelectMany=!!t.canPickMany,a.placeholder=t.placeHolder,a.ignoreFocusOut=!!t.ignoreFocusLost,a.matchOnDescription=!!t.matchOnDescription,a.matchOnDetail=!!t.matchOnDetail,a.matchOnLabel=t.matchOnLabel===void 0||t.matchOnLabel,a.quickNavigate=t.quickNavigate,a.hideInput=!!t.hideInput,a.contextKey=t.contextKey,a.busy=!0,Promise.all([e,t.activeItem]).then(([u,f])=>{l=f,a.busy=!1,a.items=u,a.canSelectMany&&(a.selectedItems=u.filter(g=>g.type!=="separator"&&g.picked)),l&&(a.activeItems=[l])}),a.show(),Promise.resolve(e).then(void 0,u=>{s(u),a.hide()})})}createQuickPick(){const e=this.getUI(!0);return new qx(e)}createInputBox(){const e=this.getUI(!0);return new HOe(e)}show(e){const t=this.getUI(!0);this.onShowEmitter.fire();const i=this.controller;this.controller=e,i==null||i.didHide(),this.setEnabled(!0),t.leftActionBar.clear(),t.title.textContent="",t.description1.textContent="",t.description2.textContent="",_o(t.widget),t.rightActionBar.clear(),t.checkAll.checked=!1,t.inputBox.placeholder="",t.inputBox.password=!1,t.inputBox.showDecoration(cs.Ignore),t.visibleCount.setCount(0),t.count.setCount(0),_o(t.message),t.progressBar.stop(),t.list.setElements([]),t.list.matchOnDescription=!1,t.list.matchOnDetail=!1,t.list.matchOnLabel=!0,t.list.sortByLabel=!0,t.ignoreFocusOut=!1,t.inputBox.toggles=void 0;const n=this.options.backKeybindingLabel();$8.tooltip=n?v("quickInput.backWithKeybinding","Back ({0})",n):v("quickInput.back","Back"),t.container.style.display="",this.updateLayout(),t.inputBox.setFocus()}isVisible(){return!!this.ui&&this.ui.container.style.display!=="none"}setVisibilities(e){const t=this.getUI();t.title.style.display=e.title?"":"none",t.description1.style.display=e.description&&(e.inputBox||e.checkAll)?"":"none",t.description2.style.display=e.description&&!(e.inputBox||e.checkAll)?"":"none",t.checkAll.style.display=e.checkAll?"":"none",t.inputContainer.style.display=e.inputBox?"":"none",t.filterContainer.style.display=e.inputBox?"":"none",t.visibleCountContainer.style.display=e.visibleCount?"":"none",t.countContainer.style.display=e.count?"":"none",t.okContainer.style.display=e.ok?"":"none",t.customButtonContainer.style.display=e.customButton?"":"none",t.message.style.display=e.message?"":"none",t.progressBar.getContainer().style.display=e.progressBar?"":"none",t.list.display(!!e.list),t.container.classList.toggle("show-checkboxes",!!e.checkBox),t.container.classList.toggle("hidden-input",!e.inputBox&&!e.description),this.updateLayout()}setEnabled(e){if(e!==this.enabled){this.enabled=e;for(const t of this.getUI().leftActionBar.viewItems)t.action.enabled=e;for(const t of this.getUI().rightActionBar.viewItems)t.action.enabled=e;this.getUI().checkAll.disabled=!e,this.getUI().inputBox.enabled=e,this.getUI().ok.enabled=e,this.getUI().list.enabled=e}}hide(e){var t,i;const n=this.controller;if(!n)return;n.willHide(e);const s=(t=this.ui)===null||t===void 0?void 0:t.container,r=s&&!Fie(s);if(this.controller=null,this.onHideEmitter.fire(),s&&(s.style.display="none"),!r){let a=this.previousFocusElement;for(;a&&!a.offsetParent;)a=(i=a.parentElement)!==null&&i!==void 0?i:void 0;a!=null&&a.offsetParent?(a.focus(),this.previousFocusElement=void 0):this.options.returnFocus()}n.didHide(e)}layout(e,t){this.dimension=e,this.titleBarOffset=t,this.updateLayout()}updateLayout(){if(this.ui&&this.isVisible()){this.ui.container.style.top=`${this.titleBarOffset}px`;const e=this.ui.container.style,t=Math.min(this.dimension.width*.62,q8.MAX_WIDTH);e.width=t+"px",e.marginLeft="-"+t/2+"px",this.ui.inputBox.layout(),this.ui.list.layout(this.dimension&&this.dimension.height*.4)}}applyStyles(e){this.styles=e,this.updateStyles()}updateStyles(){if(this.ui){const{quickInputTitleBackground:e,quickInputBackground:t,quickInputForeground:i,widgetBorder:n,widgetShadow:s}=this.styles.widget;this.ui.titleBar.style.backgroundColor=e??"",this.ui.container.style.backgroundColor=t??"",this.ui.container.style.color=i??"",this.ui.container.style.border=n?`1px solid ${n}`:"",this.ui.container.style.boxShadow=s?`0 0 8px 2px ${s}`:"",this.ui.list.style(this.styles.list);const r=[];this.styles.pickerGroup.pickerGroupBorder&&r.push(`.quick-input-list .quick-input-list-entry { border-top-color:  ${this.styles.pickerGroup.pickerGroupBorder}; }`),this.styles.pickerGroup.pickerGroupForeground&&r.push(`.quick-input-list .quick-input-list-separator { color:  ${this.styles.pickerGroup.pickerGroupForeground}; }`),this.styles.pickerGroup.pickerGroupForeground&&r.push(".quick-input-list .quick-input-list-separator-as-item { color: var(--vscode-descriptionForeground); }"),(this.styles.keybindingLabel.keybindingLabelBackground||this.styles.keybindingLabel.keybindingLabelBorder||this.styles.keybindingLabel.keybindingLabelBottomBorder||this.styles.keybindingLabel.keybindingLabelShadow||this.styles.keybindingLabel.keybindingLabelForeground)&&(r.push(".quick-input-list .monaco-keybinding > .monaco-keybinding-key {"),this.styles.keybindingLabel.keybindingLabelBackground&&r.push(`background-color: ${this.styles.keybindingLabel.keybindingLabelBackground};`),this.styles.keybindingLabel.keybindingLabelBorder&&r.push(`border-color: ${this.styles.keybindingLabel.keybindingLabelBorder};`),this.styles.keybindingLabel.keybindingLabelBottomBorder&&r.push(`border-bottom-color: ${this.styles.keybindingLabel.keybindingLabelBottomBorder};`),this.styles.keybindingLabel.keybindingLabelShadow&&r.push(`box-shadow: inset 0 -1px 0 ${this.styles.keybindingLabel.keybindingLabelShadow};`),this.styles.keybindingLabel.keybindingLabelForeground&&r.push(`color: ${this.styles.keybindingLabel.keybindingLabelForeground};`),r.push("}"));const a=r.join(`
`);a!==this.ui.styleSheet.textContent&&(this.ui.styleSheet.textContent=a)}}};yM.MAX_WIDTH=600;yM=q8=$Oe([sJ(1,Om),sJ(2,ct)],yM);var jOe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},DS=function(o,e){return function(t,i){e(t,i,o)}};let G8=class extends VDe{get controller(){return this._controller||(this._controller=this._register(this.createController())),this._controller}get hasController(){return!!this._controller}get quickAccess(){return this._quickAccess||(this._quickAccess=this._register(this.instantiationService.createInstance(F8))),this._quickAccess}constructor(e,t,i,n,s){super(i),this.instantiationService=e,this.contextKeyService=t,this.layoutService=n,this.configurationService=s,this._onShow=this._register(new Y),this._onHide=this._register(new Y),this.contexts=new Map}createController(e=this.layoutService,t){const i={idPrefix:"quickInput_",container:e.activeContainer,ignoreFocusOut:()=>!1,backKeybindingLabel:()=>{},setContextKey:s=>this.setContextKey(s),linkOpenerDelegate:s=>{this.instantiationService.invokeFunction(r=>{r.get(wa).open(s,{allowCommands:!0,fromUserGesture:!0})})},returnFocus:()=>e.focus(),styles:this.computeStyles(),hoverDelegate:this._register(this.instantiationService.createInstance(j8))},n=this._register(this.instantiationService.createInstance(yM,{...i,...t}));return n.layout(e.activeContainerDimension,e.activeContainerOffset.quickPickTop),this._register(e.onDidLayoutActiveContainer(s=>{ft(e.activeContainer)===ft(n.container)&&n.layout(s,e.activeContainerOffset.quickPickTop)})),this._register(e.onDidChangeActiveContainer(()=>{n.isVisible()||n.layout(e.activeContainerDimension,e.activeContainerOffset.quickPickTop)})),this._register(n.onShow(()=>{this.resetContextKeys(),this._onShow.fire()})),this._register(n.onHide(()=>{this.resetContextKeys(),this._onHide.fire()})),n}setContextKey(e){let t;e&&(t=this.contexts.get(e),t||(t=new Be(e,!1).bindTo(this.contextKeyService),this.contexts.set(e,t))),!(t&&t.get())&&(this.resetContextKeys(),t==null||t.set(!0))}resetContextKeys(){this.contexts.forEach(e=>{e.get()&&e.reset()})}pick(e,t={},i=Yt.None){return this.controller.pick(e,t,i)}createQuickPick(){return this.controller.createQuickPick()}createInputBox(){return this.controller.createInputBox()}updateStyles(){this.hasController&&this.controller.applyStyles(this.computeStyles())}computeStyles(){return{widget:{quickInputBackground:je(zZ),quickInputForeground:je(Yxe),quickInputTitleBackground:je(Zxe),widgetBorder:je(Ane),widgetShadow:je(Pf)},inputBox:oM,toggle:sM,countBadge:Eoe,button:KAe,progressBar:qAe,keybindingLabel:jAe,list:hb({listBackground:zZ,listFocusBackground:Mp,listFocusForeground:Rp,listInactiveFocusForeground:Rp,listInactiveSelectionIconForeground:aC,listInactiveFocusBackground:Mp,listFocusOutline:Sn,listInactiveFocusOutline:Sn}),pickerGroup:{pickerGroupBorder:je(Qxe),pickerGroupForeground:je(Hne)}}}};G8=jOe([DS(0,ct),DS(1,bt),DS(2,Us),DS(3,Om),DS(4,$t)],G8);var are=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},ev=function(o,e){return function(t,i){e(t,i,o)}};let Y8=class extends G8{constructor(e,t,i,n,s,r){super(t,i,n,new Q9(e.getContainerDomNode(),s),r),this.host=void 0;const a=E1.get(e);if(a){const l=a.widget;this.host={_serviceBrand:void 0,get mainContainer(){return l.getDomNode()},getContainer(){return l.getDomNode()},whenContainerStylesLoaded(){},get containers(){return[l.getDomNode()]},get activeContainer(){return l.getDomNode()},get mainContainerDimension(){return e.getLayoutInfo()},get activeContainerDimension(){return e.getLayoutInfo()},get onDidLayoutMainContainer(){return e.onDidLayoutChange},get onDidLayoutActiveContainer(){return e.onDidLayoutChange},get onDidLayoutContainer(){return Ie.map(e.onDidLayoutChange,c=>({container:l.getDomNode(),dimension:c}))},get onDidChangeActiveContainer(){return Ie.None},get onDidAddContainer(){return Ie.None},get mainContainerOffset(){return{top:0,quickPickTop:0}},get activeContainerOffset(){return{top:0,quickPickTop:0}},focus:()=>e.focus()}}else this.host=void 0}createController(){return super.createController(this.host)}};Y8=are([ev(1,ct),ev(2,bt),ev(3,Us),ev(4,gi),ev(5,$t)],Y8);let Z8=class{get activeService(){const e=this.codeEditorService.getFocusedCodeEditor();if(!e)throw new Error("Quick input service needs a focused editor to work.");let t=this.mapEditorToService.get(e);if(!t){const i=t=this.instantiationService.createInstance(Y8,e);this.mapEditorToService.set(e,t),rm(e.onDidDispose)(()=>{i.dispose(),this.mapEditorToService.delete(e)})}return t}get quickAccess(){return this.activeService.quickAccess}constructor(e,t){this.instantiationService=e,this.codeEditorService=t,this.mapEditorToService=new Map}pick(e,t={},i=Yt.None){return this.activeService.pick(e,t,i)}createQuickPick(){return this.activeService.createQuickPick()}createInputBox(){return this.activeService.createInputBox()}};Z8=are([ev(0,ct),ev(1,gi)],Z8);class E1{static get(e){return e.getContribution(E1.ID)}constructor(e){this.editor=e,this.widget=new LP(this.editor)}dispose(){this.widget.dispose()}}E1.ID="editor.controller.quickInput";class LP{constructor(e){this.codeEditor=e,this.domNode=document.createElement("div"),this.codeEditor.addOverlayWidget(this)}getId(){return LP.ID}getDomNode(){return this.domNode}getPosition(){return{preference:2}}dispose(){this.codeEditor.removeOverlayWidget(this)}}LP.ID="editor.contrib.quickInputWidget";pi(E1.ID,E1,4);class KOe{constructor(e,t,i,n,s){this._parsedThemeRuleBrand=void 0,this.token=e,this.index=t,this.fontStyle=i,this.foreground=n,this.background=s}}function qOe(o){if(!o||!Array.isArray(o))return[];const e=[];let t=0;for(let i=0,n=o.length;i<n;i++){const s=o[i];let r=-1;if(typeof s.fontStyle=="string"){r=0;const c=s.fontStyle.split(" ");for(let u=0,f=c.length;u<f;u++)switch(c[u]){case"italic":r=r|1;break;case"bold":r=r|2;break;case"underline":r=r|4;break;case"strikethrough":r=r|8;break}}let a=null;typeof s.foreground=="string"&&(a=s.foreground);let l=null;typeof s.background=="string"&&(l=s.background),e[t++]=new KOe(s.token||"",i,r,a,l)}return e}function GOe(o,e){o.sort((u,f)=>{const g=JOe(u.token,f.token);return g!==0?g:u.index-f.index});let t=0,i="000000",n="ffffff";for(;o.length>=1&&o[0].token==="";){const u=o.shift();u.fontStyle!==-1&&(t=u.fontStyle),u.foreground!==null&&(i=u.foreground),u.background!==null&&(n=u.background)}const s=new ZOe;for(const u of e)s.getId(u);const r=s.getId(i),a=s.getId(n),l=new Mz(t,r,a),c=new Az(l);for(let u=0,f=o.length;u<f;u++){const g=o[u];c.insert(g.token,g.fontStyle,s.getId(g.foreground),s.getId(g.background))}return new lre(s,c)}const YOe=/^#?([0-9A-Fa-f]{6})([0-9A-Fa-f]{2})?$/;class ZOe{constructor(){this._lastColorId=0,this._id2color=[],this._color2id=new Map}getId(e){if(e===null)return 0;const t=e.match(YOe);if(!t)throw new Error("Illegal value for token color: "+e);e=t[1].toUpperCase();let i=this._color2id.get(e);return i||(i=++this._lastColorId,this._color2id.set(e,i),this._id2color[i]=ne.fromHex("#"+e),i)}getColorMap(){return this._id2color.slice(0)}}class lre{static createFromRawTokenTheme(e,t){return this.createFromParsedTokenTheme(qOe(e),t)}static createFromParsedTokenTheme(e,t){return GOe(e,t)}constructor(e,t){this._colorMap=e,this._root=t,this._cache=new Map}getColorMap(){return this._colorMap.getColorMap()}_match(e){return this._root.match(e)}match(e,t){let i=this._cache.get(t);if(typeof i>"u"){const n=this._match(t),s=XOe(t);i=(n.metadata|s<<8)>>>0,this._cache.set(t,i)}return(i|e<<0)>>>0}}const QOe=/\b(comment|string|regex|regexp)\b/;function XOe(o){const e=o.match(QOe);if(!e)return 0;switch(e[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"regexp":return 3}throw new Error("Unexpected match for standard token type!")}function JOe(o,e){return o<e?-1:o>e?1:0}class Mz{constructor(e,t,i){this._themeTrieElementRuleBrand=void 0,this._fontStyle=e,this._foreground=t,this._background=i,this.metadata=(this._fontStyle<<11|this._foreground<<15|this._background<<24)>>>0}clone(){return new Mz(this._fontStyle,this._foreground,this._background)}acceptOverwrite(e,t,i){e!==-1&&(this._fontStyle=e),t!==0&&(this._foreground=t),i!==0&&(this._background=i),this.metadata=(this._fontStyle<<11|this._foreground<<15|this._background<<24)>>>0}}class Az{constructor(e){this._themeTrieElementBrand=void 0,this._mainRule=e,this._children=new Map}match(e){if(e==="")return this._mainRule;const t=e.indexOf(".");let i,n;t===-1?(i=e,n=""):(i=e.substring(0,t),n=e.substring(t+1));const s=this._children.get(i);return typeof s<"u"?s.match(n):this._mainRule}insert(e,t,i,n){if(e===""){this._mainRule.acceptOverwrite(t,i,n);return}const s=e.indexOf(".");let r,a;s===-1?(r=e,a=""):(r=e.substring(0,s),a=e.substring(s+1));let l=this._children.get(r);typeof l>"u"&&(l=new Az(this._mainRule.clone()),this._children.set(r,l)),l.insert(a,t,i,n)}}function e2e(o){const e=[];for(let t=1,i=o.length;t<i;t++){const n=o[t];e[t]=`.mtk${t} { color: ${n}; }`}return e.push(".mtki { font-style: italic; }"),e.push(".mtkb { font-weight: bold; }"),e.push(".mtku { text-decoration: underline; text-underline-position: under; }"),e.push(".mtks { text-decoration: line-through; }"),e.push(".mtks.mtku { text-decoration: underline line-through; text-underline-position: under; }"),e.join(`
`)}const t2e={base:"vs",inherit:!1,rules:[{token:"",foreground:"000000",background:"fffffe"},{token:"invalid",foreground:"cd3131"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"001188"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"delimiter.xml",foreground:"0000FF"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"FF0000"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"FF0000"},{token:"attribute.value",foreground:"0451A5"},{token:"attribute.value.number",foreground:"098658"},{token:"attribute.value.unit",foreground:"098658"},{token:"attribute.value.html",foreground:"0000FF"},{token:"attribute.value.xml",foreground:"0000FF"},{token:"string",foreground:"A31515"},{token:"string.html",foreground:"0000FF"},{token:"string.sql",foreground:"FF0000"},{token:"string.yaml",foreground:"0451A5"},{token:"keyword",foreground:"0000FF"},{token:"keyword.json",foreground:"0451A5"},{token:"keyword.flow",foreground:"AF00DB"},{token:"keyword.flow.scss",foreground:"0000FF"},{token:"operator.scss",foreground:"666666"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[Zs]:"#FFFFFE",[oc]:"#000000",[Rne]:"#E5EBF1",[qD]:"#D3D3D3",[GD]:"#939393",[_H]:"#ADD6FF4D"}},i2e={base:"vs-dark",inherit:!1,rules:[{token:"",foreground:"D4D4D4",background:"1E1E1E"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"74B0DF"},{token:"variable.predefined",foreground:"4864AA"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"B5CEA8"},{token:"number.hex",foreground:"5BB498"},{token:"regexp",foreground:"B46695"},{token:"annotation",foreground:"cc6666"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"DCDCDC"},{token:"delimiter.html",foreground:"808080"},{token:"delimiter.xml",foreground:"808080"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"A79873"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"DD6A6F"},{token:"metatag.content.html",foreground:"9CDCFE"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key.json",foreground:"9CDCFE"},{token:"string.value.json",foreground:"CE9178"},{token:"attribute.name",foreground:"9CDCFE"},{token:"attribute.value",foreground:"CE9178"},{token:"attribute.value.number.css",foreground:"B5CEA8"},{token:"attribute.value.unit.css",foreground:"B5CEA8"},{token:"attribute.value.hex.css",foreground:"D4D4D4"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"keyword.json",foreground:"CE9178"},{token:"keyword.flow.scss",foreground:"569CD6"},{token:"operator.scss",foreground:"909090"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[Zs]:"#1E1E1E",[oc]:"#D4D4D4",[Rne]:"#3A3D41",[qD]:"#404040",[GD]:"#707070",[_H]:"#ADD6FF26"}},n2e={base:"hc-black",inherit:!1,rules:[{token:"",foreground:"FFFFFF",background:"000000"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"1AEBFF"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"FFFFFF"},{token:"regexp",foreground:"C0C0C0"},{token:"annotation",foreground:"569CD6"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"FFFF00"},{token:"delimiter.html",foreground:"FFFF00"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta",foreground:"D4D4D4"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"569CD6"},{token:"metatag.content.html",foreground:"1AEBFF"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key",foreground:"9CDCFE"},{token:"string.value",foreground:"CE9178"},{token:"attribute.name",foreground:"569CD6"},{token:"attribute.value",foreground:"3FF23F"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[Zs]:"#000000",[oc]:"#FFFFFF",[qD]:"#FFFFFF",[GD]:"#FFFFFF"}},s2e={base:"hc-light",inherit:!1,rules:[{token:"",foreground:"292929",background:"FFFFFF"},{token:"invalid",foreground:"B5200D"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"264F70"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"B5200D"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"264F78"},{token:"attribute.value",foreground:"0451A5"},{token:"string",foreground:"A31515"},{token:"string.sql",foreground:"B5200D"},{token:"keyword",foreground:"0000FF"},{token:"keyword.flow",foreground:"AF00DB"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[Zs]:"#FFFFFF",[oc]:"#292929",[qD]:"#292929",[GD]:"#292929"}},o2e={IconContribution:"base.contributions.icons"};var oJ;(function(o){function e(t,i){let n=t.defaults;for(;pt.isThemeIcon(n);){const s=pb.getIcon(n.id);if(!s)return;n=s.defaults}return n}o.getDefinition=e})(oJ||(oJ={}));var rJ;(function(o){function e(i){return{weight:i.weight,style:i.style,src:i.src.map(n=>({format:n.format,location:n.location.toString()}))}}o.toJSONObject=e;function t(i){const n=s=>Ur(s)?s:void 0;if(i&&Array.isArray(i.src)&&i.src.every(s=>Ur(s.format)&&Ur(s.location)))return{weight:n(i.weight),style:n(i.style),src:i.src.map(s=>({format:s.format,location:gt.parse(s.location)}))}}o.fromJSONObject=t})(rJ||(rJ={}));class r2e{constructor(){this._onDidChange=new Y,this.onDidChange=this._onDidChange.event,this.iconSchema={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:v("iconDefinition.fontId","The id of the font to use. If not set, the font that is defined first is used.")},fontCharacter:{type:"string",description:v("iconDefinition.fontCharacter","The font character associated with the icon definition.")}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}},this.iconReferenceSchema={type:"string",pattern:`^${pt.iconNameExpression}$`,enum:[],enumDescriptions:[]},this.iconsById={},this.iconFontsById={}}registerIcon(e,t,i,n){const s=this.iconsById[e];if(s){if(i&&!s.description){s.description=i,this.iconSchema.properties[e].markdownDescription=`${i} $(${e})`;const l=this.iconReferenceSchema.enum.indexOf(e);l!==-1&&(this.iconReferenceSchema.enumDescriptions[l]=i),this._onDidChange.fire()}return s}const r={id:e,description:i,defaults:t,deprecationMessage:n};this.iconsById[e]=r;const a={$ref:"#/definitions/icons"};return n&&(a.deprecationMessage=n),i&&(a.markdownDescription=`${i}: $(${e})`),this.iconSchema.properties[e]=a,this.iconReferenceSchema.enum.push(e),this.iconReferenceSchema.enumDescriptions.push(i||""),this._onDidChange.fire(),{id:e}}getIcons(){return Object.keys(this.iconsById).map(e=>this.iconsById[e])}getIcon(e){return this.iconsById[e]}getIconSchema(){return this.iconSchema}toString(){const e=(s,r)=>s.id.localeCompare(r.id),t=s=>{for(;pt.isThemeIcon(s.defaults);)s=this.iconsById[s.defaults.id];return`codicon codicon-${s?s.id:""}`},i=[];i.push("| preview     | identifier                        | default codicon ID                | description"),i.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");const n=Object.keys(this.iconsById).map(s=>this.iconsById[s]);for(const s of n.filter(r=>!!r.description).sort(e))i.push(`|<i class="${t(s)}"></i>|${s.id}|${pt.isThemeIcon(s.defaults)?s.defaults.id:s.id}|${s.description||""}|`);i.push("| preview     | identifier                        "),i.push("| ----------- | --------------------------------- |");for(const s of n.filter(r=>!pt.isThemeIcon(r.defaults)).sort(e))i.push(`|<i class="${t(s)}"></i>|${s.id}|`);return i.join(`
`)}}const pb=new r2e;$n.add(o2e.IconContribution,pb);function gs(o,e,t,i){return pb.registerIcon(o,e,t,i)}function cre(){return pb}function a2e(){const o=aie();for(const e in o){const t="\\"+o[e].toString(16);pb.registerIcon(e,{fontCharacter:t})}}a2e();const dre="vscode://schemas/icons",ure=$n.as(AA.JSONContribution);ure.registerSchema(dre,pb.getIconSchema());const aJ=new Ui(()=>ure.notifySchemaChanged(dre),200);pb.onDidChange(()=>{aJ.isScheduled()||aJ.schedule()});const hre=gs("widget-close",Ee.close,v("widgetClose","Icon for the close action in widgets."));gs("goto-previous-location",Ee.arrowUp,v("previousChangeIcon","Icon for goto previous editor location."));gs("goto-next-location",Ee.arrowDown,v("nextChangeIcon","Icon for goto next editor location."));pt.modify(Ee.sync,"spin");pt.modify(Ee.loading,"spin");function l2e(o){const e=new he,t=e.add(new Y),i=cre();return e.add(i.onDidChange(()=>t.fire())),o&&e.add(o.onDidProductIconThemeChange(()=>t.fire())),{dispose:()=>e.dispose(),onDidChange:t.event,getCSS(){const n=o?o.getProductIconTheme():new fre,s={},r=l=>{const c=n.getIcon(l);if(!c)return;const u=c.font;return u?(s[u.id]=u.definition,`.codicon-${l.id}:before { content: '${c.fontCharacter}'; font-family: ${MY(u.id)}; }`):`.codicon-${l.id}:before { content: '${c.fontCharacter}'; }`},a=[];for(const l of i.getIcons()){const c=r(l);c&&a.push(c)}for(const l in s){const c=s[l],u=c.weight?`font-weight: ${c.weight};`:"",f=c.style?`font-style: ${c.style};`:"",g=c.src.map(p=>`${hm(p.location)} format('${p.format}')`).join(", ");a.push(`@font-face { src: ${g}; font-family: ${MY(l)};${u}${f} font-display: block; }`)}return a.join(`
`)}}}class fre{getIcon(e){const t=cre();let i=e.defaults;for(;pt.isThemeIcon(i);){const n=t.getIcon(i.id);if(!n)return;i=n.defaults}return i}}const xf="vs",$C="vs-dark",bv="hc-black",Cv="hc-light",gre=$n.as(Ine.ColorContribution),c2e=$n.as(Gne.ThemingContribution);class pre{constructor(e,t){this.semanticHighlighting=!1,this.themeData=t;const i=t.base;e.length>0?(WN(e)?this.id=e:this.id=i+" "+e,this.themeName=e):(this.id=i,this.themeName=i),this.colors=null,this.defaultColors=Object.create(null),this._tokenTheme=null}get base(){return this.themeData.base}notifyBaseUpdated(){this.themeData.inherit&&(this.colors=null,this._tokenTheme=null)}getColors(){if(!this.colors){const e=new Map;for(const t in this.themeData.colors)e.set(t,ne.fromHex(this.themeData.colors[t]));if(this.themeData.inherit){const t=Q8(this.themeData.base);for(const i in t.colors)e.has(i)||e.set(i,ne.fromHex(t.colors[i]))}this.colors=e}return this.colors}getColor(e,t){const i=this.getColors().get(e);if(i)return i;if(t!==!1)return this.getDefault(e)}getDefault(e){let t=this.defaultColors[e];return t||(t=gre.resolveDefaultColor(e,this),this.defaultColors[e]=t,t)}defines(e){return this.getColors().has(e)}get type(){switch(this.base){case xf:return rc.LIGHT;case bv:return rc.HIGH_CONTRAST_DARK;case Cv:return rc.HIGH_CONTRAST_LIGHT;default:return rc.DARK}}get tokenTheme(){if(!this._tokenTheme){let e=[],t=[];if(this.themeData.inherit){const s=Q8(this.themeData.base);e=s.rules,s.encodedTokensColors&&(t=s.encodedTokensColors)}const i=this.themeData.colors["editor.foreground"],n=this.themeData.colors["editor.background"];if(i||n){const s={token:""};i&&(s.foreground=i),n&&(s.background=n),e.push(s)}e=e.concat(this.themeData.rules),this.themeData.encodedTokensColors&&(t=this.themeData.encodedTokensColors),this._tokenTheme=lre.createFromRawTokenTheme(e,t)}return this._tokenTheme}getTokenStyleMetadata(e,t,i){const s=this.tokenTheme._match([e].concat(t).join(".")).metadata,r=To.getForeground(s),a=To.getFontStyle(s);return{foreground:r,italic:!!(a&1),bold:!!(a&2),underline:!!(a&4),strikethrough:!!(a&8)}}}function WN(o){return o===xf||o===$C||o===bv||o===Cv}function Q8(o){switch(o){case xf:return t2e;case $C:return i2e;case bv:return n2e;case Cv:return s2e}}function MT(o){const e=Q8(o);return new pre(o,e)}class d2e extends J{constructor(){super(),this._onColorThemeChange=this._register(new Y),this.onDidColorThemeChange=this._onColorThemeChange.event,this._onProductIconThemeChange=this._register(new Y),this.onDidProductIconThemeChange=this._onProductIconThemeChange.event,this._environment=Object.create(null),this._builtInProductIconTheme=new fre,this._autoDetectHighContrast=!0,this._knownThemes=new Map,this._knownThemes.set(xf,MT(xf)),this._knownThemes.set($C,MT($C)),this._knownThemes.set(bv,MT(bv)),this._knownThemes.set(Cv,MT(Cv));const e=this._register(l2e(this));this._codiconCSS=e.getCSS(),this._themeCSS="",this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._globalStyleElement=null,this._styleElements=[],this._colorMapOverride=null,this.setTheme(xf),this._onOSSchemeChanged(),this._register(e.onDidChange(()=>{this._codiconCSS=e.getCSS(),this._updateCSS()})),vie(Hi,"(forced-colors: active)",()=>{this._onOSSchemeChanged()})}registerEditorContainer(e){return vR(e)?this._registerShadowDomContainer(e):this._registerRegularEditorContainer()}_registerRegularEditorContainer(){return this._globalStyleElement||(this._globalStyleElement=xl(void 0,e=>{e.className="monaco-colors",e.textContent=this._allCSS}),this._styleElements.push(this._globalStyleElement)),J.None}_registerShadowDomContainer(e){const t=xl(e,i=>{i.className="monaco-colors",i.textContent=this._allCSS});return this._styleElements.push(t),{dispose:()=>{for(let i=0;i<this._styleElements.length;i++)if(this._styleElements[i]===t){this._styleElements.splice(i,1);return}}}}defineTheme(e,t){if(!/^[a-z0-9\-]+$/i.test(e))throw new Error("Illegal theme name!");if(!WN(t.base)&&!WN(e))throw new Error("Illegal theme base!");this._knownThemes.set(e,new pre(e,t)),WN(e)&&this._knownThemes.forEach(i=>{i.base===e&&i.notifyBaseUpdated()}),this._theme.themeName===e&&this.setTheme(e)}getColorTheme(){return this._theme}setColorMapOverride(e){this._colorMapOverride=e,this._updateThemeOrColorMap()}setTheme(e){let t;this._knownThemes.has(e)?t=this._knownThemes.get(e):t=this._knownThemes.get(xf),this._updateActualTheme(t)}_updateActualTheme(e){!e||this._theme===e||(this._theme=e,this._updateThemeOrColorMap())}_onOSSchemeChanged(){if(this._autoDetectHighContrast){const e=Hi.matchMedia("(forced-colors: active)").matches;if(e!==Vd(this._theme.type)){let t;h1(this._theme.type)?t=e?bv:$C:t=e?Cv:xf,this._updateActualTheme(this._knownThemes.get(t))}}}setAutoDetectHighContrast(e){this._autoDetectHighContrast=e,this._onOSSchemeChanged()}_updateThemeOrColorMap(){const e=[],t={},i={addRule:r=>{t[r]||(e.push(r),t[r]=!0)}};c2e.getThemingParticipants().forEach(r=>r(this._theme,i,this._environment));const n=[];for(const r of gre.getColors()){const a=this._theme.getColor(r.id,!0);a&&n.push(`${mH(r.id)}: ${a.toString()};`)}i.addRule(`.monaco-editor, .monaco-diff-editor, .monaco-component { ${n.join(`
`)} }`);const s=this._colorMapOverride||this._theme.tokenTheme.getColorMap();i.addRule(e2e(s)),this._themeCSS=e.join(`
`),this._updateCSS(),Qn.setColorMap(s),this._onColorThemeChange.fire(this._theme)}_updateCSS(){this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._styleElements.forEach(e=>e.textContent=this._allCSS)}getFileIconTheme(){return{hasFileIcons:!1,hasFolderIcons:!1,hidesExplorerArrows:!1}}getProductIconTheme(){return this._builtInProductIconTheme}}const Al=Zt("themeService");var u2e=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},rB=function(o,e){return function(t,i){e(t,i,o)}};let X8=class extends J{constructor(e,t,i){super(),this._contextKeyService=e,this._layoutService=t,this._configurationService=i,this._accessibilitySupport=0,this._onDidChangeScreenReaderOptimized=new Y,this._onDidChangeReducedMotion=new Y,this._accessibilityModeEnabledContext=UD.bindTo(this._contextKeyService);const n=()=>this._accessibilityModeEnabledContext.set(this.isScreenReaderOptimized());this._register(this._configurationService.onDidChangeConfiguration(r=>{r.affectsConfiguration("editor.accessibilitySupport")&&(n(),this._onDidChangeScreenReaderOptimized.fire()),r.affectsConfiguration("workbench.reduceMotion")&&(this._configMotionReduced=this._configurationService.getValue("workbench.reduceMotion"),this._onDidChangeReducedMotion.fire())})),n(),this._register(this.onDidChangeScreenReaderOptimized(()=>n()));const s=Hi.matchMedia("(prefers-reduced-motion: reduce)");this._systemMotionReduced=s.matches,this._configMotionReduced=this._configurationService.getValue("workbench.reduceMotion"),this.initReducedMotionListeners(s)}initReducedMotionListeners(e){this._register(oe(e,"change",()=>{this._systemMotionReduced=e.matches,this._configMotionReduced==="auto"&&this._onDidChangeReducedMotion.fire()}));const t=()=>{const i=this.isMotionReduced();this._layoutService.mainContainer.classList.toggle("reduce-motion",i),this._layoutService.mainContainer.classList.toggle("enable-motion",!i)};t(),this._register(this.onDidChangeReducedMotion(()=>t()))}get onDidChangeScreenReaderOptimized(){return this._onDidChangeScreenReaderOptimized.event}isScreenReaderOptimized(){const e=this._configurationService.getValue("editor.accessibilitySupport");return e==="on"||e==="auto"&&this._accessibilitySupport===2}get onDidChangeReducedMotion(){return this._onDidChangeReducedMotion.event}isMotionReduced(){const e=this._configMotionReduced;return e==="on"||e==="auto"&&this._systemMotionReduced}getAccessibilitySupport(){return this._accessibilitySupport}};X8=u2e([rB(0,bt),rB(1,Om),rB(2,$t)],X8);var xP=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Vv=function(o,e){return function(t,i){e(t,i,o)}},z0,up;let J8=class{constructor(e,t){this._commandService=e,this._hiddenStates=new SM(t)}createMenu(e,t,i){return new tW(e,this._hiddenStates,{emitEventsForSubmenuChanges:!1,eventDebounceDelay:50,...i},this._commandService,t)}resetHiddenStates(e){this._hiddenStates.reset(e)}};J8=xP([Vv(0,Un),Vv(1,Qc)],J8);let SM=z0=class{constructor(e){this._storageService=e,this._disposables=new he,this._onDidChange=new Y,this.onDidChange=this._onDidChange.event,this._ignoreChangeEvent=!1,this._hiddenByDefaultCache=new Map;try{const t=e.get(z0._key,0,"{}");this._data=JSON.parse(t)}catch{this._data=Object.create(null)}this._disposables.add(e.onDidChangeValue(0,z0._key,this._disposables)(()=>{if(!this._ignoreChangeEvent)try{const t=e.get(z0._key,0,"{}");this._data=JSON.parse(t)}catch(t){console.log("FAILED to read storage after UPDATE",t)}this._onDidChange.fire()}))}dispose(){this._onDidChange.dispose(),this._disposables.dispose()}_isHiddenByDefault(e,t){var i;return(i=this._hiddenByDefaultCache.get(`${e.id}/${t}`))!==null&&i!==void 0?i:!1}setDefaultState(e,t,i){this._hiddenByDefaultCache.set(`${e.id}/${t}`,i)}isHidden(e,t){var i,n;const s=this._isHiddenByDefault(e,t),r=(n=(i=this._data[e.id])===null||i===void 0?void 0:i.includes(t))!==null&&n!==void 0?n:!1;return s?!r:r}updateHidden(e,t,i){this._isHiddenByDefault(e,t)&&(i=!i);const s=this._data[e.id];if(i)s?s.indexOf(t)<0&&s.push(t):this._data[e.id]=[t];else if(s){const r=s.indexOf(t);r>=0&&Cbe(s,r),s.length===0&&delete this._data[e.id]}this._persist()}reset(e){if(e===void 0)this._data=Object.create(null),this._persist();else{for(const{id:t}of e)this._data[t]&&delete this._data[t];this._persist()}}_persist(){try{this._ignoreChangeEvent=!0;const e=JSON.stringify(this._data);this._storageService.store(z0._key,e,0,0)}finally{this._ignoreChangeEvent=!1}}};SM._key="menu.hiddenCommands";SM=z0=xP([Vv(0,Qc)],SM);let eW=up=class{constructor(e,t,i,n,s){this._id=e,this._hiddenStates=t,this._collectContextKeysForSubmenus=i,this._commandService=n,this._contextKeyService=s,this._menuGroups=[],this._structureContextKeys=new Set,this._preconditionContextKeys=new Set,this._toggledContextKeys=new Set,this.refresh()}get structureContextKeys(){return this._structureContextKeys}get preconditionContextKeys(){return this._preconditionContextKeys}get toggledContextKeys(){return this._toggledContextKeys}refresh(){this._menuGroups.length=0,this._structureContextKeys.clear(),this._preconditionContextKeys.clear(),this._toggledContextKeys.clear();const e=Ys.getMenuItems(this._id);let t;e.sort(up._compareMenuItems);for(const i of e){const n=i.group||"";(!t||t[0]!==n)&&(t=[n,[]],this._menuGroups.push(t)),t[1].push(i),this._collectContextKeys(i)}}_collectContextKeys(e){if(up._fillInKbExprKeys(e.when,this._structureContextKeys),X0(e)){if(e.command.precondition&&up._fillInKbExprKeys(e.command.precondition,this._preconditionContextKeys),e.command.toggled){const t=e.command.toggled.condition||e.command.toggled;up._fillInKbExprKeys(t,this._toggledContextKeys)}}else this._collectContextKeysForSubmenus&&Ys.getMenuItems(e.submenu).forEach(this._collectContextKeys,this)}createActionGroups(e){const t=[];for(const i of this._menuGroups){const[n,s]=i,r=[];for(const a of s)if(this._contextKeyService.contextMatchesRules(a.when)){const l=X0(a);l&&this._hiddenStates.setDefaultState(this._id,a.command.id,!!a.isHiddenByDefault);const c=h2e(this._id,l?a.command:a,this._hiddenStates);if(l)r.push(new Dl(a.command,a.alt,e,c,this._contextKeyService,this._commandService));else{const u=new up(a.submenu,this._hiddenStates,this._collectContextKeysForSubmenus,this._commandService,this._contextKeyService).createActionGroups(e),f=Os.join(...u.map(g=>g[1]));f.length>0&&r.push(new ox(a,c,f))}}r.length>0&&t.push([n,r])}return t}static _fillInKbExprKeys(e,t){if(e)for(const i of e.keys())t.add(i)}static _compareMenuItems(e,t){const i=e.group,n=t.group;if(i!==n){if(i){if(!n)return-1}else return 1;if(i==="navigation")return-1;if(n==="navigation")return 1;const a=i.localeCompare(n);if(a!==0)return a}const s=e.order||0,r=t.order||0;return s<r?-1:s>r?1:up._compareTitles(X0(e)?e.command.title:e.title,X0(t)?t.command.title:t.title)}static _compareTitles(e,t){const i=typeof e=="string"?e:e.original,n=typeof t=="string"?t:t.original;return i.localeCompare(n)}};eW=up=xP([Vv(3,Un),Vv(4,bt)],eW);let tW=class{constructor(e,t,i,n,s){this._disposables=new he,this._menuInfo=new eW(e,t,i.emitEventsForSubmenuChanges,n,s);const r=new Ui(()=>{this._menuInfo.refresh(),this._onDidChange.fire({menu:this,isStructuralChange:!0,isEnablementChange:!0,isToggleChange:!0})},i.eventDebounceDelay);this._disposables.add(r),this._disposables.add(Ys.onDidChangeMenu(u=>{u.has(e)&&r.schedule()}));const a=this._disposables.add(new he),l=u=>{let f=!1,g=!1,p=!1;for(const _ of u)if(f=f||_.isStructuralChange,g=g||_.isEnablementChange,p=p||_.isToggleChange,f&&g&&p)break;return{menu:this,isStructuralChange:f,isEnablementChange:g,isToggleChange:p}},c=()=>{a.add(s.onDidChangeContext(u=>{const f=u.affectsSome(this._menuInfo.structureContextKeys),g=u.affectsSome(this._menuInfo.preconditionContextKeys),p=u.affectsSome(this._menuInfo.toggledContextKeys);(f||g||p)&&this._onDidChange.fire({menu:this,isStructuralChange:f,isEnablementChange:g,isToggleChange:p})})),a.add(t.onDidChange(u=>{this._onDidChange.fire({menu:this,isStructuralChange:!0,isEnablementChange:!1,isToggleChange:!1})}))};this._onDidChange=new Qte({onWillAddFirstListener:c,onDidRemoveLastListener:a.clear.bind(a),delay:i.eventDebounceDelay,merge:l}),this.onDidChange=this._onDidChange.event}getActions(e){return this._menuInfo.createActionGroups(e)}dispose(){this._disposables.dispose(),this._onDidChange.dispose()}};tW=xP([Vv(3,Un),Vv(4,bt)],tW);function h2e(o,e,t){const i=Twe(e)?e.submenu.id:e.id,n=typeof e.title=="string"?e.title:e.title.value,s=SC({id:`hide/${o.id}/${i}`,label:v("hide.label","Hide '{0}'",n),run(){t.updateHidden(o,i,!0)}}),r=SC({id:`toggle/${o.id}/${i}`,label:n,get checked(){return!t.isHidden(o,i)},run(){t.updateHidden(o,i,!!this.checked)}});return{hide:s,toggle:r,get isHidden(){return!r.checked}}}var f2e=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},lJ=function(o,e){return function(t,i){e(t,i,o)}},iW;let LM=iW=class extends J{constructor(e,t){super(),this.layoutService=e,this.logService=t,this.mapTextToType=new Map,this.findText="",this.resources=[],this.resourcesStateHash=void 0,(ig||bie)&&this.installWebKitWriteTextWorkaround(),this._register(Ie.runAndSubscribe(pA,({window:i,disposables:n})=>{n.add(oe(i.document,"copy",()=>this.clearResources()))},{window:Hi,disposables:this._store}))}installWebKitWriteTextWorkaround(){const e=()=>{const t=new BD;this.webKitPendingClipboardWritePromise&&!this.webKitPendingClipboardWritePromise.isSettled&&this.webKitPendingClipboardWritePromise.cancel(),this.webKitPendingClipboardWritePromise=t,navigator.clipboard.write([new ClipboardItem({"text/plain":t.p})]).catch(async i=>{(!(i instanceof Error)||i.name!=="NotAllowedError"||!t.isRejected)&&this.logService.error(i)})};this._register(Ie.runAndSubscribe(this.layoutService.onDidAddContainer,({container:t,disposables:i})=>{i.add(oe(t,"click",e)),i.add(oe(t,"keydown",e))},{container:this.layoutService.mainContainer,disposables:this._store}))}async writeText(e,t){if(this.writeResources([]),t){this.mapTextToType.set(t,e);return}if(this.webKitPendingClipboardWritePromise)return this.webKitPendingClipboardWritePromise.complete(e);try{return await navigator.clipboard.writeText(e)}catch(i){console.error(i)}this.fallbackWriteText(e)}fallbackWriteText(e){const t=K1(),i=t.activeElement,n=t.body.appendChild(ye("textarea",{"aria-hidden":!0}));n.style.height="1px",n.style.width="1px",n.style.position="absolute",n.value=e,n.focus(),n.select(),t.execCommand("copy"),i instanceof HTMLElement&&i.focus(),t.body.removeChild(n)}async readText(e){if(e)return this.mapTextToType.get(e)||"";try{return await navigator.clipboard.readText()}catch(t){console.error(t)}return""}async readFindText(){return this.findText}async writeFindText(e){this.findText=e}async writeResources(e){e.length===0?this.clearResources():(this.resources=e,this.resourcesStateHash=await this.computeResourcesStateHash())}async readResources(){const e=await this.computeResourcesStateHash();return this.resourcesStateHash!==e&&this.clearResources(),this.resources}async computeResourcesStateHash(){if(this.resources.length===0)return;const e=await this.readText();return hA(e.substring(0,iW.MAX_RESOURCE_STATE_SOURCE_LENGTH))}clearResources(){this.resources=[],this.resourcesStateHash=void 0}};LM.MAX_RESOURCE_STATE_SOURCE_LENGTH=1e3;LM=iW=f2e([lJ(0,Om),lJ(1,mr)],LM);const _g=Zt("clipboardService");var g2e=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},p2e=function(o,e){return function(t,i){e(t,i,o)}};const AL="data-keybinding-context";let Pz=class{constructor(e,t){this._id=e,this._parent=t,this._value=Object.create(null),this._value._contextId=e}get value(){return{...this._value}}setValue(e,t){return this._value[e]!==t?(this._value[e]=t,!0):!1}removeValue(e){return e in this._value?(delete this._value[e],!0):!1}getValue(e){const t=this._value[e];return typeof t>"u"&&this._parent?this._parent.getValue(e):t}};class I1 extends Pz{constructor(){super(-1,null)}setValue(e,t){return!1}removeValue(e){return!1}getValue(e){}}I1.INSTANCE=new I1;class Gx extends Pz{constructor(e,t,i){super(e,null),this._configurationService=t,this._values=WC.forConfigKeys(),this._listener=this._configurationService.onDidChangeConfiguration(n=>{if(n.source===7){const s=Array.from(this._values,([r])=>r);this._values.clear(),i.fire(new dJ(s))}else{const s=[];for(const r of n.affectedKeys){const a=`config.${r}`,l=this._values.findSuperstr(a);l!==void 0&&(s.push(...ii.map(l,([c])=>c)),this._values.deleteSuperstr(a)),this._values.has(a)&&(s.push(a),this._values.delete(a))}i.fire(new dJ(s))}})}dispose(){this._listener.dispose()}getValue(e){if(e.indexOf(Gx._keyPrefix)!==0)return super.getValue(e);if(this._values.has(e))return this._values.get(e);const t=e.substr(Gx._keyPrefix.length),i=this._configurationService.getValue(t);let n;switch(typeof i){case"number":case"boolean":case"string":n=i;break;default:Array.isArray(i)?n=JSON.stringify(i):n=i}return this._values.set(e,n),n}setValue(e,t){return super.setValue(e,t)}removeValue(e){return super.removeValue(e)}}Gx._keyPrefix="config.";class m2e{constructor(e,t,i){this._service=e,this._key=t,this._defaultValue=i,this.reset()}set(e){this._service.setContext(this._key,e)}reset(){typeof this._defaultValue>"u"?this._service.removeContext(this._key):this._service.setContext(this._key,this._defaultValue)}get(){return this._service.getContextKeyValue(this._key)}}class cJ{constructor(e){this.key=e}affectsSome(e){return e.has(this.key)}allKeysContainedIn(e){return this.affectsSome(e)}}class dJ{constructor(e){this.keys=e}affectsSome(e){for(const t of this.keys)if(e.has(t))return!0;return!1}allKeysContainedIn(e){return this.keys.every(t=>e.has(t))}}class _2e{constructor(e){this.events=e}affectsSome(e){for(const t of this.events)if(t.affectsSome(e))return!0;return!1}allKeysContainedIn(e){return this.events.every(t=>t.allKeysContainedIn(e))}}function v2e(o,e){return o.allKeysContainedIn(new Set(Object.keys(e)))}class mre extends J{constructor(e){super(),this._onDidChangeContext=this._register(new Dv({merge:t=>new _2e(t)})),this.onDidChangeContext=this._onDidChangeContext.event,this._isDisposed=!1,this._myContextId=e}createKey(e,t){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new m2e(this,e,t)}bufferChangeEvents(e){this._onDidChangeContext.pause();try{e()}finally{this._onDidChangeContext.resume()}}createScoped(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new b2e(this,e)}contextMatchesRules(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");const t=this.getContextValuesContainer(this._myContextId);return e?e.evaluate(t):!0}getContextKeyValue(e){if(!this._isDisposed)return this.getContextValuesContainer(this._myContextId).getValue(e)}setContext(e,t){if(this._isDisposed)return;const i=this.getContextValuesContainer(this._myContextId);i&&i.setValue(e,t)&&this._onDidChangeContext.fire(new cJ(e))}removeContext(e){this._isDisposed||this.getContextValuesContainer(this._myContextId).removeValue(e)&&this._onDidChangeContext.fire(new cJ(e))}getContext(e){return this._isDisposed?I1.INSTANCE:this.getContextValuesContainer(C2e(e))}dispose(){super.dispose(),this._isDisposed=!0}}let nW=class extends mre{constructor(e){super(0),this._contexts=new Map,this._lastContextId=0;const t=this._register(new Gx(this._myContextId,e,this._onDidChangeContext));this._contexts.set(this._myContextId,t)}getContextValuesContainer(e){return this._isDisposed?I1.INSTANCE:this._contexts.get(e)||I1.INSTANCE}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ContextKeyService has been disposed");const t=++this._lastContextId;return this._contexts.set(t,new Pz(t,this.getContextValuesContainer(e))),t}disposeContext(e){this._isDisposed||this._contexts.delete(e)}};nW=g2e([p2e(0,$t)],nW);class b2e extends mre{constructor(e,t){if(super(e.createChildContext()),this._parentChangeListener=this._register(new Xs),this._parent=e,this._updateParentChangeListener(),this._domNode=t,this._domNode.hasAttribute(AL)){let i="";this._domNode.classList&&(i=Array.from(this._domNode.classList.values()).join(", ")),console.error(`Element already has context attribute${i?": "+i:""}`)}this._domNode.setAttribute(AL,String(this._myContextId))}_updateParentChangeListener(){this._parentChangeListener.value=this._parent.onDidChangeContext(e=>{const i=this._parent.getContextValuesContainer(this._myContextId).value;v2e(e,i)||this._onDidChangeContext.fire(e)})}dispose(){this._isDisposed||(this._parent.disposeContext(this._myContextId),this._domNode.removeAttribute(AL),super.dispose())}getContextValuesContainer(e){return this._isDisposed?I1.INSTANCE:this._parent.getContextValuesContainer(e)}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ScopedContextKeyService has been disposed");return this._parent.createChildContext(e)}disposeContext(e){this._isDisposed||this._parent.disposeContext(e)}}function C2e(o){for(;o;){if(o.hasAttribute(AL)){const e=o.getAttribute(AL);return e?parseInt(e,10):NaN}o=o.parentElement}return 0}function w2e(o,e,t){o.get(bt).createKey(String(e),y2e(t))}function y2e(o){return Fte(o,e=>{if(typeof e=="object"&&e.$mid===1)return gt.revive(e).toString();if(e instanceof gt)return e.toString()})}si.registerCommand("_setContext",w2e);si.registerCommand({id:"getContextKeyInfo",handler(){return[...Be.all()].sort((o,e)=>o.key.localeCompare(e.key))},metadata:{description:v("getContextKeyInfo","A command that returns information about context keys"),args:[]}});si.registerCommand("_generateContextKeyInfo",function(){const o=[],e=new Set;for(const t of Be.all())e.has(t.key)||(e.add(t.key),o.push(t));o.sort((t,i)=>t.key.localeCompare(i.key)),console.log(JSON.stringify(o,void 0,2))});let S2e=class{constructor(e,t){this.key=e,this.data=t,this.incoming=new Map,this.outgoing=new Map}};class uJ{constructor(e){this._hashFn=e,this._nodes=new Map}roots(){const e=[];for(const t of this._nodes.values())t.outgoing.size===0&&e.push(t);return e}insertEdge(e,t){const i=this.lookupOrInsertNode(e),n=this.lookupOrInsertNode(t);i.outgoing.set(n.key,n),n.incoming.set(i.key,i)}removeNode(e){const t=this._hashFn(e);this._nodes.delete(t);for(const i of this._nodes.values())i.outgoing.delete(t),i.incoming.delete(t)}lookupOrInsertNode(e){const t=this._hashFn(e);let i=this._nodes.get(t);return i||(i=new S2e(t,e),this._nodes.set(t,i)),i}isEmpty(){return this._nodes.size===0}toString(){const e=[];for(const[t,i]of this._nodes)e.push(`${t}
	(-> incoming)[${[...i.incoming.keys()].join(", ")}]
	(outgoing ->)[${[...i.outgoing.keys()].join(",")}]
`);return e.join(`
`)}findCycleSlow(){for(const[e,t]of this._nodes){const i=new Set([e]),n=this._findCycle(t,i);if(n)return n}}_findCycle(e,t){for(const[i,n]of e.outgoing){if(t.has(i))return[...t,i].join(" -> ");t.add(i);const s=this._findCycle(n,t);if(s)return s;t.delete(i)}}}const L2e=!1;class hJ extends Error{constructor(e){var t;super("cyclic dependency between services"),this.message=(t=e.findCycleSlow())!==null&&t!==void 0?t:`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}}class xM{constructor(e=new QD,t=!1,i,n=L2e){var s;this._services=e,this._strict=t,this._parent=i,this._enableTracing=n,this._activeInstantiations=new Set,this._services.set(ct,this),this._globalGraph=n?(s=i==null?void 0:i._globalGraph)!==null&&s!==void 0?s:new uJ(r=>r):void 0}createChild(e){return new xM(e,this._strict,this,this._enableTracing)}invokeFunction(e,...t){const i=ca.traceInvocation(this._enableTracing,e);let n=!1;try{return e({get:r=>{if(n)throw EV("service accessor is only valid during the invocation of its target method");const a=this._getOrCreateServiceInstance(r,i);if(!a)throw new Error(`[invokeFunction] unknown service '${r}'`);return a}},...t)}finally{n=!0,i.stop()}}createInstance(e,...t){let i,n;return e instanceof Bu?(i=ca.traceCreation(this._enableTracing,e.ctor),n=this._createInstance(e.ctor,e.staticArguments.concat(t),i)):(i=ca.traceCreation(this._enableTracing,e),n=this._createInstance(e,t,i)),i.stop(),n}_createInstance(e,t=[],i){const n=Md.getServiceDependencies(e).sort((a,l)=>a.index-l.index),s=[];for(const a of n){const l=this._getOrCreateServiceInstance(a.id,i);l||this._throwIfStrict(`[createInstance] ${e.name} depends on UNKNOWN service ${a.id}.`,!1),s.push(l)}const r=n.length>0?n[0].index:t.length;if(t.length!==r){console.trace(`[createInstance] First service dependency of ${e.name} at position ${r+1} conflicts with ${t.length} static arguments`);const a=r-t.length;a>0?t=t.concat(new Array(a)):t=t.slice(0,r)}return Reflect.construct(e,t.concat(s))}_setServiceInstance(e,t){if(this._services.get(e)instanceof Bu)this._services.set(e,t);else if(this._parent)this._parent._setServiceInstance(e,t);else throw new Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(e){const t=this._services.get(e);return!t&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):t}_getOrCreateServiceInstance(e,t){this._globalGraph&&this._globalGraphImplicitDependency&&this._globalGraph.insertEdge(this._globalGraphImplicitDependency,String(e));const i=this._getServiceInstanceOrDescriptor(e);return i instanceof Bu?this._safeCreateAndCacheServiceInstance(e,i,t.branch(e,!0)):(t.branch(e,!1),i)}_safeCreateAndCacheServiceInstance(e,t,i){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,t,i)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,t,i){var n;const s=new uJ(l=>l.id.toString());let r=0;const a=[{id:e,desc:t,_trace:i}];for(;a.length;){const l=a.pop();if(s.lookupOrInsertNode(l),r++>1e3)throw new hJ(s);for(const c of Md.getServiceDependencies(l.desc.ctor)){const u=this._getServiceInstanceOrDescriptor(c.id);if(u||this._throwIfStrict(`[createInstance] ${e} depends on ${c.id} which is NOT registered.`,!0),(n=this._globalGraph)===null||n===void 0||n.insertEdge(String(l.id),String(c.id)),u instanceof Bu){const f={id:c.id,desc:u,_trace:l._trace.branch(c.id,!0)};s.insertEdge(l,f),a.push(f)}}}for(;;){const l=s.roots();if(l.length===0){if(!s.isEmpty())throw new hJ(s);break}for(const{data:c}of l){if(this._getServiceInstanceOrDescriptor(c.id)instanceof Bu){const f=this._createServiceInstanceWithOwner(c.id,c.desc.ctor,c.desc.staticArguments,c.desc.supportsDelayedInstantiation,c._trace);this._setServiceInstance(c.id,f)}s.removeNode(c)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,t,i=[],n,s){if(this._services.get(e)instanceof Bu)return this._createServiceInstance(e,t,i,n,s);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,t,i,n,s);throw new Error(`illegalState - creating UNKNOWN service instance ${t.name}`)}_createServiceInstance(e,t,i=[],n,s){if(n){const r=new xM(void 0,this._strict,this,this._enableTracing);r._globalGraphImplicitDependency=String(e);const a=new Map,l=new i1e(()=>{const c=r._createInstance(t,i,s);for(const[u,f]of a){const g=c[u];if(typeof g=="function")for(const p of f)p.disposable=g.apply(c,p.listener)}return a.clear(),c});return new Proxy(Object.create(null),{get(c,u){if(!l.isInitialized&&typeof u=="string"&&(u.startsWith("onDid")||u.startsWith("onWill"))){let p=a.get(u);return p||(p=new Wr,a.set(u,p)),(b,y,S)=>{if(l.isInitialized)return l.value[u](b,y,S);{const L={listener:[b,y,S],disposable:void 0},x=p.push(L);return lt(()=>{var E;x(),(E=L.disposable)===null||E===void 0||E.dispose()})}}}if(u in c)return c[u];const f=l.value;let g=f[u];return typeof g!="function"||(g=g.bind(f),c[u]=g),g},set(c,u,f){return l.value[u]=f,!0},getPrototypeOf(c){return t.prototype}})}else return this._createInstance(t,i,s)}_throwIfStrict(e,t){if(t&&console.warn(e),this._strict)throw new Error(e)}}class ca{static traceInvocation(e,t){return e?new ca(2,t.name||new Error().stack.split(`
`).slice(3,4).join(`
`)):ca._None}static traceCreation(e,t){return e?new ca(1,t.name):ca._None}constructor(e,t){this.type=e,this.name=t,this._start=Date.now(),this._dep=[]}branch(e,t){const i=new ca(3,e.toString());return this._dep.push([e,t,i]),i}stop(){const e=Date.now()-this._start;ca._totals+=e;let t=!1;function i(s,r){const a=[],l=new Array(s+1).join("	");for(const[c,u,f]of r._dep)if(u&&f){t=!0,a.push(`${l}CREATES -> ${c}`);const g=i(s+1,f);g&&a.push(g)}else a.push(`${l}uses -> ${c}`);return a.join(`
`)}const n=[`${this.type===1?"CREATE":"CALL"} ${this.name}`,`${i(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${ca._totals.toFixed(2)}ms)`];(e>2||t)&&ca.all.add(n.join(`
`))}}ca.all=new Set;ca._None=new class extends ca{constructor(){super(0,null)}stop(){}branch(){return this}};ca._totals=0;const x2e=new Set([Pt.inMemory,Pt.vscodeSourceControl,Pt.walkThrough,Pt.walkThroughSnippet,Pt.vscodeChatCodeBlock]);class D2e{constructor(){this._byResource=new ds,this._byOwner=new Map}set(e,t,i){let n=this._byResource.get(e);n||(n=new Map,this._byResource.set(e,n)),n.set(t,i);let s=this._byOwner.get(t);s||(s=new ds,this._byOwner.set(t,s)),s.set(e,i)}get(e,t){const i=this._byResource.get(e);return i==null?void 0:i.get(t)}delete(e,t){let i=!1,n=!1;const s=this._byResource.get(e);s&&(i=s.delete(t));const r=this._byOwner.get(t);if(r&&(n=r.delete(e)),i!==n)throw new Error("illegal state");return i&&n}values(e){var t,i,n,s;return typeof e=="string"?(i=(t=this._byOwner.get(e))===null||t===void 0?void 0:t.values())!==null&&i!==void 0?i:ii.empty():gt.isUri(e)?(s=(n=this._byResource.get(e))===null||n===void 0?void 0:n.values())!==null&&s!==void 0?s:ii.empty():ii.map(ii.concat(...this._byOwner.values()),r=>r[1])}}class k2e{constructor(e){this.errors=0,this.infos=0,this.warnings=0,this.unknowns=0,this._data=new ds,this._service=e,this._subscription=e.onMarkerChanged(this._update,this)}dispose(){this._subscription.dispose()}_update(e){for(const t of e){const i=this._data.get(t);i&&this._substract(i);const n=this._resourceStats(t);this._add(n),this._data.set(t,n)}}_resourceStats(e){const t={errors:0,warnings:0,infos:0,unknowns:0};if(x2e.has(e.scheme))return t;for(const{severity:i}of this._service.read({resource:e}))i===es.Error?t.errors+=1:i===es.Warning?t.warnings+=1:i===es.Info?t.infos+=1:t.unknowns+=1;return t}_substract(e){this.errors-=e.errors,this.warnings-=e.warnings,this.infos-=e.infos,this.unknowns-=e.unknowns}_add(e){this.errors+=e.errors,this.warnings+=e.warnings,this.infos+=e.infos,this.unknowns+=e.unknowns}}class fp{constructor(){this._onMarkerChanged=new Qte({delay:0,merge:fp._merge}),this.onMarkerChanged=this._onMarkerChanged.event,this._data=new D2e,this._stats=new k2e(this)}dispose(){this._stats.dispose(),this._onMarkerChanged.dispose()}remove(e,t){for(const i of t||[])this.changeOne(e,i,[])}changeOne(e,t,i){if(Rte(i))this._data.delete(t,e)&&this._onMarkerChanged.fire([t]);else{const n=[];for(const s of i){const r=fp._toMarker(e,t,s);r&&n.push(r)}this._data.set(t,e,n),this._onMarkerChanged.fire([t])}}static _toMarker(e,t,i){let{code:n,severity:s,message:r,source:a,startLineNumber:l,startColumn:c,endLineNumber:u,endColumn:f,relatedInformation:g,tags:p}=i;if(r)return l=l>0?l:1,c=c>0?c:1,u=u>=l?u:l,f=f>0?f:c,{resource:t,owner:e,code:n,severity:s,message:r,source:a,startLineNumber:l,startColumn:c,endLineNumber:u,endColumn:f,relatedInformation:g,tags:p}}changeAll(e,t){const i=[],n=this._data.values(e);if(n)for(const s of n){const r=ii.first(s);r&&(i.push(r.resource),this._data.delete(r.resource,e))}if(Yo(t)){const s=new ds;for(const{resource:r,marker:a}of t){const l=fp._toMarker(e,r,a);if(!l)continue;const c=s.get(r);c?c.push(l):(s.set(r,[l]),i.push(r))}for(const[r,a]of s)this._data.set(r,e,a)}i.length>0&&this._onMarkerChanged.fire(i)}read(e=Object.create(null)){let{owner:t,resource:i,severities:n,take:s}=e;if((!s||s<0)&&(s=-1),t&&i){const r=this._data.get(i,t);if(r){const a=[];for(const l of r)if(fp._accept(l,n)){const c=a.push(l);if(s>0&&c===s)break}return a}else return[]}else if(!t&&!i){const r=[];for(const a of this._data.values())for(const l of a)if(fp._accept(l,n)){const c=r.push(l);if(s>0&&c===s)return r}return r}else{const r=this._data.values(i??t),a=[];for(const l of r)for(const c of l)if(fp._accept(c,n)){const u=a.push(c);if(s>0&&u===s)return a}return a}}static _accept(e,t){return t===void 0||(t&e.severity)===e.severity}static _merge(e){const t=new ds;for(const i of e)for(const n of i)t.set(n,!0);return Array.from(t.keys())}}class E2e extends J{constructor(){super(...arguments),this._configurationModel=new Eo}get configurationModel(){return this._configurationModel}reload(){return this.resetConfigurationModel(),this.configurationModel}getConfigurationDefaultOverrides(){return{}}resetConfigurationModel(){this._configurationModel=new Eo;const e=$n.as(nu.Configuration).getConfigurationProperties();this.updateConfigurationModel(Object.keys(e),e)}updateConfigurationModel(e,t){const i=this.getConfigurationDefaultOverrides();for(const n of e){const s=i[n],r=t[n];s!==void 0?this._configurationModel.addValue(n,s):r?this._configurationModel.addValue(n,r.default):this._configurationModel.removeValue(n)}}}const Vm=Zt("accessibilitySignalService");class Lt{static register(e){return new Lt(e.fileName)}constructor(e){this.fileName=e}}Lt.error=Lt.register({fileName:"error.mp3"});Lt.warning=Lt.register({fileName:"warning.mp3"});Lt.foldedArea=Lt.register({fileName:"foldedAreas.mp3"});Lt.break=Lt.register({fileName:"break.mp3"});Lt.quickFixes=Lt.register({fileName:"quickFixes.mp3"});Lt.taskCompleted=Lt.register({fileName:"taskCompleted.mp3"});Lt.taskFailed=Lt.register({fileName:"taskFailed.mp3"});Lt.terminalBell=Lt.register({fileName:"terminalBell.mp3"});Lt.diffLineInserted=Lt.register({fileName:"diffLineInserted.mp3"});Lt.diffLineDeleted=Lt.register({fileName:"diffLineDeleted.mp3"});Lt.diffLineModified=Lt.register({fileName:"diffLineModified.mp3"});Lt.chatRequestSent=Lt.register({fileName:"chatRequestSent.mp3"});Lt.chatResponsePending=Lt.register({fileName:"chatResponsePending.mp3"});Lt.chatResponseReceived1=Lt.register({fileName:"chatResponseReceived1.mp3"});Lt.chatResponseReceived2=Lt.register({fileName:"chatResponseReceived2.mp3"});Lt.chatResponseReceived3=Lt.register({fileName:"chatResponseReceived3.mp3"});Lt.chatResponseReceived4=Lt.register({fileName:"chatResponseReceived4.mp3"});Lt.clear=Lt.register({fileName:"clear.mp3"});Lt.save=Lt.register({fileName:"save.mp3"});Lt.format=Lt.register({fileName:"format.mp3"});Lt.voiceRecordingStarted=Lt.register({fileName:"voiceRecordingStarted.mp3"});Lt.voiceRecordingStopped=Lt.register({fileName:"voiceRecordingStopped.mp3"});class I2e{constructor(e){this.randomOneOf=e}}class Ot{static register(e){const t=new I2e("randomOneOf"in e.sound?e.sound.randomOneOf:[e.sound]),i=new Ot(t,e.name,e.legacySoundSettingsKey,e.settingsKey,e.legacyAnnouncementSettingsKey,e.announcementMessage);return Ot._signals.add(i),i}constructor(e,t,i,n,s,r){this.sound=e,this.name=t,this.legacySoundSettingsKey=i,this.settingsKey=n,this.legacyAnnouncementSettingsKey=s,this.announcementMessage=r}}Ot._signals=new Set;Ot.error=Ot.register({name:v("accessibilitySignals.lineHasError.name","Error on Line"),sound:Lt.error,legacySoundSettingsKey:"audioCues.lineHasError",legacyAnnouncementSettingsKey:"accessibility.alert.error",announcementMessage:v("accessibility.signals.lineHasError","Error"),settingsKey:"accessibility.signals.lineHasError"});Ot.warning=Ot.register({name:v("accessibilitySignals.lineHasWarning.name","Warning on Line"),sound:Lt.warning,legacySoundSettingsKey:"audioCues.lineHasWarning",legacyAnnouncementSettingsKey:"accessibility.alert.warning",announcementMessage:v("accessibility.signals.lineHasWarning","Warning"),settingsKey:"accessibility.signals.lineHasWarning"});Ot.foldedArea=Ot.register({name:v("accessibilitySignals.lineHasFoldedArea.name","Folded Area on Line"),sound:Lt.foldedArea,legacySoundSettingsKey:"audioCues.lineHasFoldedArea",legacyAnnouncementSettingsKey:"accessibility.alert.foldedArea",announcementMessage:v("accessibility.signals.lineHasFoldedArea","Folded"),settingsKey:"accessibility.signals.lineHasFoldedArea"});Ot.break=Ot.register({name:v("accessibilitySignals.lineHasBreakpoint.name","Breakpoint on Line"),sound:Lt.break,legacySoundSettingsKey:"audioCues.lineHasBreakpoint",legacyAnnouncementSettingsKey:"accessibility.alert.breakpoint",announcementMessage:v("accessibility.signals.lineHasBreakpoint","Breakpoint"),settingsKey:"accessibility.signals.lineHasBreakpoint"});Ot.inlineSuggestion=Ot.register({name:v("accessibilitySignals.lineHasInlineSuggestion.name","Inline Suggestion on Line"),sound:Lt.quickFixes,legacySoundSettingsKey:"audioCues.lineHasInlineSuggestion",settingsKey:"accessibility.signals.lineHasInlineSuggestion"});Ot.terminalQuickFix=Ot.register({name:v("accessibilitySignals.terminalQuickFix.name","Terminal Quick Fix"),sound:Lt.quickFixes,legacySoundSettingsKey:"audioCues.terminalQuickFix",legacyAnnouncementSettingsKey:"accessibility.alert.terminalQuickFix",announcementMessage:v("accessibility.signals.terminalQuickFix","Quick Fix"),settingsKey:"accessibility.signals.terminalQuickFix"});Ot.onDebugBreak=Ot.register({name:v("accessibilitySignals.onDebugBreak.name","Debugger Stopped on Breakpoint"),sound:Lt.break,legacySoundSettingsKey:"audioCues.onDebugBreak",legacyAnnouncementSettingsKey:"accessibility.alert.onDebugBreak",announcementMessage:v("accessibility.signals.onDebugBreak","Breakpoint"),settingsKey:"accessibility.signals.onDebugBreak"});Ot.noInlayHints=Ot.register({name:v("accessibilitySignals.noInlayHints","No Inlay Hints on Line"),sound:Lt.error,legacySoundSettingsKey:"audioCues.noInlayHints",legacyAnnouncementSettingsKey:"accessibility.alert.noInlayHints",announcementMessage:v("accessibility.signals.noInlayHints","No Inlay Hints"),settingsKey:"accessibility.signals.noInlayHints"});Ot.taskCompleted=Ot.register({name:v("accessibilitySignals.taskCompleted","Task Completed"),sound:Lt.taskCompleted,legacySoundSettingsKey:"audioCues.taskCompleted",legacyAnnouncementSettingsKey:"accessibility.alert.taskCompleted",announcementMessage:v("accessibility.signals.taskCompleted","Task Completed"),settingsKey:"accessibility.signals.taskCompleted"});Ot.taskFailed=Ot.register({name:v("accessibilitySignals.taskFailed","Task Failed"),sound:Lt.taskFailed,legacySoundSettingsKey:"audioCues.taskFailed",legacyAnnouncementSettingsKey:"accessibility.alert.taskFailed",announcementMessage:v("accessibility.signals.taskFailed","Task Failed"),settingsKey:"accessibility.signals.taskFailed"});Ot.terminalCommandFailed=Ot.register({name:v("accessibilitySignals.terminalCommandFailed","Terminal Command Failed"),sound:Lt.error,legacySoundSettingsKey:"audioCues.terminalCommandFailed",legacyAnnouncementSettingsKey:"accessibility.alert.terminalCommandFailed",announcementMessage:v("accessibility.signals.terminalCommandFailed","Command Failed"),settingsKey:"accessibility.signals.terminalCommandFailed"});Ot.terminalBell=Ot.register({name:v("accessibilitySignals.terminalBell","Terminal Bell"),sound:Lt.terminalBell,legacySoundSettingsKey:"audioCues.terminalBell",legacyAnnouncementSettingsKey:"accessibility.alert.terminalBell",announcementMessage:v("accessibility.signals.terminalBell","Terminal Bell"),settingsKey:"accessibility.signals.terminalBell"});Ot.notebookCellCompleted=Ot.register({name:v("accessibilitySignals.notebookCellCompleted","Notebook Cell Completed"),sound:Lt.taskCompleted,legacySoundSettingsKey:"audioCues.notebookCellCompleted",legacyAnnouncementSettingsKey:"accessibility.alert.notebookCellCompleted",announcementMessage:v("accessibility.signals.notebookCellCompleted","Notebook Cell Completed"),settingsKey:"accessibility.signals.notebookCellCompleted"});Ot.notebookCellFailed=Ot.register({name:v("accessibilitySignals.notebookCellFailed","Notebook Cell Failed"),sound:Lt.taskFailed,legacySoundSettingsKey:"audioCues.notebookCellFailed",legacyAnnouncementSettingsKey:"accessibility.alert.notebookCellFailed",announcementMessage:v("accessibility.signals.notebookCellFailed","Notebook Cell Failed"),settingsKey:"accessibility.signals.notebookCellFailed"});Ot.diffLineInserted=Ot.register({name:v("accessibilitySignals.diffLineInserted","Diff Line Inserted"),sound:Lt.diffLineInserted,legacySoundSettingsKey:"audioCues.diffLineInserted",settingsKey:"accessibility.signals.diffLineInserted"});Ot.diffLineDeleted=Ot.register({name:v("accessibilitySignals.diffLineDeleted","Diff Line Deleted"),sound:Lt.diffLineDeleted,legacySoundSettingsKey:"audioCues.diffLineDeleted",settingsKey:"accessibility.signals.diffLineDeleted"});Ot.diffLineModified=Ot.register({name:v("accessibilitySignals.diffLineModified","Diff Line Modified"),sound:Lt.diffLineModified,legacySoundSettingsKey:"audioCues.diffLineModified",settingsKey:"accessibility.signals.diffLineModified"});Ot.chatRequestSent=Ot.register({name:v("accessibilitySignals.chatRequestSent","Chat Request Sent"),sound:Lt.chatRequestSent,legacySoundSettingsKey:"audioCues.chatRequestSent",legacyAnnouncementSettingsKey:"accessibility.alert.chatRequestSent",announcementMessage:v("accessibility.signals.chatRequestSent","Chat Request Sent"),settingsKey:"accessibility.signals.chatRequestSent"});Ot.chatResponseReceived=Ot.register({name:v("accessibilitySignals.chatResponseReceived","Chat Response Received"),legacySoundSettingsKey:"audioCues.chatResponseReceived",sound:{randomOneOf:[Lt.chatResponseReceived1,Lt.chatResponseReceived2,Lt.chatResponseReceived3,Lt.chatResponseReceived4]},settingsKey:"accessibility.signals.chatResponseReceived"});Ot.chatResponsePending=Ot.register({name:v("accessibilitySignals.chatResponsePending","Chat Response Pending"),sound:Lt.chatResponsePending,legacySoundSettingsKey:"audioCues.chatResponsePending",legacyAnnouncementSettingsKey:"accessibility.alert.chatResponsePending",announcementMessage:v("accessibility.signals.chatResponsePending","Chat Response Pending"),settingsKey:"accessibility.signals.chatResponsePending"});Ot.clear=Ot.register({name:v("accessibilitySignals.clear","Clear"),sound:Lt.clear,legacySoundSettingsKey:"audioCues.clear",legacyAnnouncementSettingsKey:"accessibility.alert.clear",announcementMessage:v("accessibility.signals.clear","Clear"),settingsKey:"accessibility.signals.clear"});Ot.save=Ot.register({name:v("accessibilitySignals.save","Save"),sound:Lt.save,legacySoundSettingsKey:"audioCues.save",legacyAnnouncementSettingsKey:"accessibility.alert.save",announcementMessage:v("accessibility.signals.save","Save"),settingsKey:"accessibility.signals.save"});Ot.format=Ot.register({name:v("accessibilitySignals.format","Format"),sound:Lt.format,legacySoundSettingsKey:"audioCues.format",legacyAnnouncementSettingsKey:"accessibility.alert.format",announcementMessage:v("accessibility.signals.format","Format"),settingsKey:"accessibility.signals.format"});Ot.voiceRecordingStarted=Ot.register({name:v("accessibilitySignals.voiceRecordingStarted","Voice Recording Started"),sound:Lt.voiceRecordingStarted,legacySoundSettingsKey:"audioCues.voiceRecordingStarted",settingsKey:"accessibility.signals.voiceRecordingStarted"});Ot.voiceRecordingStopped=Ot.register({name:v("accessibilitySignals.voiceRecordingStopped","Voice Recording Stopped"),sound:Lt.voiceRecordingStopped,legacySoundSettingsKey:"audioCues.voiceRecordingStopped",settingsKey:"accessibility.signals.voiceRecordingStopped"});class T2e extends J{constructor(e,t=[]){super(),this.logger=new Rwe([e,...t]),this._register(e.onDidChangeLogLevel(i=>this.setLevel(i)))}get onDidChangeLogLevel(){return this.logger.onDidChangeLogLevel}setLevel(e){this.logger.setLevel(e)}getLevel(){return this.logger.getLevel()}trace(e,...t){this.logger.trace(e,...t)}debug(e,...t){this.logger.debug(e,...t)}info(e,...t){this.logger.info(e,...t)}warn(e,...t){this.logger.warn(e,...t)}error(e,...t){this.logger.error(e,...t)}}const _re=[];function dk(o){_re.push(o)}function N2e(){return _re.slice(0)}var Hm=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},mo=function(o,e){return function(t,i){e(t,i,o)}};class R2e{constructor(e){this.disposed=!1,this.model=e,this._onWillDispose=new Y}get textEditorModel(){return this.model}dispose(){this.disposed=!0,this._onWillDispose.fire()}}let sW=class{constructor(e){this.modelService=e}createModelReference(e){const t=this.modelService.getModel(e);return t?Promise.resolve(new V0e(new R2e(t))):Promise.reject(new Error("Model not found"))}};sW=Hm([mo(0,Fn)],sW);class DP{show(){return DP.NULL_PROGRESS_RUNNER}async showWhile(e,t){await e}}DP.NULL_PROGRESS_RUNNER={done:()=>{},total:()=>{},worked:()=>{}};class M2e{withProgress(e,t,i){return t({report:()=>{}})}}class A2e{constructor(){this.isExtensionDevelopment=!1,this.isBuilt=!1}}class P2e{async confirm(e){return{confirmed:this.doConfirm(e.message,e.detail),checkboxChecked:!1}}doConfirm(e,t){let i=e;return t&&(i=i+`

`+t),Hi.confirm(i)}async prompt(e){var t,i;let n;if(this.doConfirm(e.message,e.detail)){const r=[...(t=e.buttons)!==null&&t!==void 0?t:[]];e.cancelButton&&typeof e.cancelButton!="string"&&typeof e.cancelButton!="boolean"&&r.push(e.cancelButton),n=await((i=r[0])===null||i===void 0?void 0:i.run({checkboxChecked:!1}))}return{result:n}}async error(e,t){await this.prompt({type:cs.Error,message:e,detail:t})}}class Yx{info(e){return this.notify({severity:cs.Info,message:e})}warn(e){return this.notify({severity:cs.Warning,message:e})}error(e){return this.notify({severity:cs.Error,message:e})}notify(e){switch(e.severity){case cs.Error:console.error(e.message);break;case cs.Warning:console.warn(e.message);break;default:console.log(e.message);break}return Yx.NO_OP}prompt(e,t,i,n){return Yx.NO_OP}status(e,t){return J.None}}Yx.NO_OP=new cNe;let oW=class{constructor(e){this._onWillExecuteCommand=new Y,this._onDidExecuteCommand=new Y,this.onDidExecuteCommand=this._onDidExecuteCommand.event,this._instantiationService=e}executeCommand(e,...t){const i=si.getCommand(e);if(!i)return Promise.reject(new Error(`command '${e}' not found`));try{this._onWillExecuteCommand.fire({commandId:e,args:t});const n=this._instantiationService.invokeFunction.apply(this._instantiationService,[i.handler,...t]);return this._onDidExecuteCommand.fire({commandId:e,args:t}),Promise.resolve(n)}catch(n){return Promise.reject(n)}}};oW=Hm([mo(0,ct)],oW);let T1=class extends bMe{constructor(e,t,i,n,s,r){super(e,t,i,n,s),this._cachedResolver=null,this._dynamicKeybindings=[],this._domNodeListeners=[];const a=p=>{const _=new he;_.add(oe(p,ke.KEY_DOWN,b=>{const y=new _n(b);this._dispatch(y,y.target)&&(y.preventDefault(),y.stopPropagation())})),_.add(oe(p,ke.KEY_UP,b=>{const y=new _n(b);this._singleModifierDispatch(y,y.target)&&y.preventDefault()})),this._domNodeListeners.push(new O2e(p,_))},l=p=>{for(let _=0;_<this._domNodeListeners.length;_++){const b=this._domNodeListeners[_];b.domNode===p&&(this._domNodeListeners.splice(_,1),b.dispose())}},c=p=>{p.getOption(61)||a(p.getContainerDomNode())},u=p=>{p.getOption(61)||l(p.getContainerDomNode())};this._register(r.onCodeEditorAdd(c)),this._register(r.onCodeEditorRemove(u)),r.listCodeEditors().forEach(c);const f=p=>{a(p.getContainerDomNode())},g=p=>{l(p.getContainerDomNode())};this._register(r.onDiffEditorAdd(f)),this._register(r.onDiffEditorRemove(g)),r.listDiffEditors().forEach(f)}addDynamicKeybinding(e,t,i,n){return $c(si.registerCommand(e,i),this.addDynamicKeybindings([{keybinding:t,command:e,when:n}]))}addDynamicKeybindings(e){const t=e.map(i=>{var n;return{keybinding:Z7(i.keybinding,Va),command:(n=i.command)!==null&&n!==void 0?n:null,commandArgs:i.commandArgs,when:i.when,weight1:1e3,weight2:0,extensionId:null,isBuiltinExtension:!1}});return this._dynamicKeybindings=this._dynamicKeybindings.concat(t),this.updateResolver(),lt(()=>{for(let i=0;i<this._dynamicKeybindings.length;i++)if(this._dynamicKeybindings[i]===t[0]){this._dynamicKeybindings.splice(i,t.length),this.updateResolver();return}})}updateResolver(){this._cachedResolver=null,this._onDidUpdateKeybindings.fire()}_getResolver(){if(!this._cachedResolver){const e=this._toNormalizedKeybindingItems(ma.getDefaultKeybindings(),!0),t=this._toNormalizedKeybindingItems(this._dynamicKeybindings,!1);this._cachedResolver=new RL(e,t,i=>this._log(i))}return this._cachedResolver}_documentHasFocus(){return Hi.document.hasFocus()}_toNormalizedKeybindingItems(e,t){const i=[];let n=0;for(const s of e){const r=s.when||void 0,a=s.keybinding;if(!a)i[n++]=new yX(void 0,s.command,s.commandArgs,r,t,null,!1);else{const l=Rx.resolveKeybinding(a,Va);for(const c of l)i[n++]=new yX(c,s.command,s.commandArgs,r,t,null,!1)}}return i}resolveKeyboardEvent(e){const t=new ng(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,e.keyCode);return new Rx([t],Va)}};T1=Hm([mo(0,bt),mo(1,Un),mo(2,pr),mo(3,ys),mo(4,mr),mo(5,gi)],T1);class O2e extends J{constructor(e,t){super(),this.domNode=e,this._register(t)}}function fJ(o){return o&&typeof o=="object"&&(!o.overrideIdentifier||typeof o.overrideIdentifier=="string")&&(!o.resource||o.resource instanceof gt)}class vre{constructor(){this._onDidChangeConfiguration=new Y,this.onDidChangeConfiguration=this._onDidChangeConfiguration.event;const e=new E2e;this._configuration=new nP(e.reload(),new Eo,new Eo,new Eo),e.dispose()}getValue(e,t){const i=typeof e=="string"?e:void 0,n=fJ(e)?e:fJ(t)?t:{};return this._configuration.getValue(i,n,void 0)}updateValues(e){const t={data:this._configuration.toData()},i=[];for(const n of e){const[s,r]=n;this.getValue(s)!==r&&(this._configuration.updateValue(s,r),i.push(s))}if(i.length>0){const n=new pMe({keys:i,overrides:[]},t,this._configuration);n.source=8,this._onDidChangeConfiguration.fire(n)}return Promise.resolve()}updateValue(e,t,i,n){return this.updateValues([[e,t]])}inspect(e,t={}){return this._configuration.inspect(e,t,void 0)}}let rW=class{constructor(e,t,i){this.configurationService=e,this.modelService=t,this.languageService=i,this._onDidChangeConfiguration=new Y,this.configurationService.onDidChangeConfiguration(n=>{this._onDidChangeConfiguration.fire({affectedKeys:n.affectedKeys,affectsConfiguration:(s,r)=>n.affectsConfiguration(r)})})}getValue(e,t,i){const n=Z.isIPosition(t)?t:null,s=n?typeof i=="string"?i:void 0:typeof t=="string"?t:void 0,r=e?this.getLanguage(e,n):void 0;return typeof s>"u"?this.configurationService.getValue({resource:e,overrideIdentifier:r}):this.configurationService.getValue(s,{resource:e,overrideIdentifier:r})}getLanguage(e,t){const i=this.modelService.getModel(e);return i?t?i.getLanguageIdAtPosition(t.lineNumber,t.column):i.getLanguageId():this.languageService.guessLanguageIdByFilepathOrFirstLine(e)}};rW=Hm([mo(0,$t),mo(1,Fn),mo(2,xn)],rW);let aW=class{constructor(e){this.configurationService=e}getEOL(e,t){const i=this.configurationService.getValue("files.eol",{overrideIdentifier:t,resource:e});return i&&typeof i=="string"&&i!=="auto"?i:jr||Kt?`
`:`\r
`}};aW=Hm([mo(0,$t)],aW);class F2e{publicLog2(){}}class Zx{constructor(){const e=gt.from({scheme:Zx.SCHEME,authority:"model",path:"/"});this.workspace={id:poe,folders:[new MMe({uri:e,name:"",index:0})]}}getWorkspace(){return this.workspace}getWorkspaceFolder(e){return e&&e.scheme===Zx.SCHEME?this.workspace.folders[0]:null}}Zx.SCHEME="inmemory";function DM(o,e,t){if(!e||!(o instanceof vre))return;const i=[];Object.keys(e).forEach(n=>{dMe(n)&&i.push([`editor.${n}`,e[n]]),t&&uMe(n)&&i.push([`diffEditor.${n}`,e[n]])}),i.length>0&&o.updateValues(i)}let lW=class{constructor(e){this._modelService=e}hasPreviewHandler(){return!1}async apply(e,t){const i=Array.isArray(e)?e:dz.convert(e),n=new Map;for(const a of i){if(!(a instanceof Zp))throw new Error("bad edit - only text edits are supported");const l=this._modelService.getModel(a.resource);if(!l)throw new Error("bad edit - model not found");if(typeof a.versionId=="number"&&l.getVersionId()!==a.versionId)throw new Error("bad state - model changed in the meantime");let c=n.get(l);c||(c=[],n.set(l,c)),c.push(On.replaceMove(A.lift(a.textEdit.range),a.textEdit.text))}let s=0,r=0;for(const[a,l]of n)a.pushStackElement(),a.pushEditOperations([],l,()=>[]),a.pushStackElement(),r+=1,s+=l.length;return{ariaSummary:kv(C8.bulkEditServiceSummary,s,r),isApplied:s>0}}};lW=Hm([mo(0,Fn)],lW);class B2e{getUriLabel(e,t){return e.scheme==="file"?e.fsPath:e.path}getUriBasenameLabel(e){return fc(e)}}let cW=class extends rMe{constructor(e,t){super(e),this._codeEditorService=t}showContextView(e,t,i){if(!t){const n=this._codeEditorService.getFocusedCodeEditor()||this._codeEditorService.getActiveCodeEditor();n&&(t=n.getContainerDomNode())}return super.showContextView(e,t,i)}};cW=Hm([mo(0,Om),mo(1,gi)],cW);class W2e{constructor(){this._neverEmitter=new Y,this.onDidChangeTrust=this._neverEmitter.event}isWorkspaceTrusted(){return!0}}class V2e extends Px{constructor(){super()}}class H2e extends T2e{constructor(){super(new Nwe)}}let dW=class extends T8{constructor(e,t,i,n,s,r){super(e,t,i,n,s,r),this.configure({blockMouse:!1})}};dW=Hm([mo(0,pr),mo(1,ys),mo(2,gg),mo(3,Bi),mo(4,Nl),mo(5,bt)],dW);class z2e{async playSignal(e,t){}}oi($t,vre,0);oi(cH,rW,0);oi(wne,aW,0);oi(Fv,Zx,0);oi(C1,B2e,0);oi(pr,F2e,0);oi(XD,P2e,0);oi(GH,A2e,0);oi(ys,Yx,0);oi(kh,fp,0);oi(xn,V2e,0);oi(Al,d2e,0);oi(mr,H2e,0);oi(Fn,dM,0);oi(pH,P8,0);oi(bt,nW,0);oi(goe,M2e,0);oi(Bm,DP,0);oi(Qc,UAe,0);oi(Cc,_9,0);oi(ek,lW,0);oi(moe,W2e,0);oi(Ca,sW,0);oi(mc,X8,0);oi(wc,COe,0);oi(Un,oW,0);oi(Bi,T1,0);oi(ou,Z8,0);oi(gg,cW,0);oi(wa,A8,0);oi(_g,LM,0);oi(Ya,dW,0);oi(Nl,J8,0);oi(Vm,z2e,0);var vt;(function(o){const e=new QD;for(const[l,c]of qY())e.set(l,c);const t=new xM(e,!0);e.set(ct,t);function i(l){n||r({});const c=e.get(l);if(!c)throw new Error("Missing service "+l);return c instanceof Bu?t.invokeFunction(u=>u.get(l)):c}o.get=i;let n=!1;const s=new Y;function r(l){if(n)return t;n=!0;for(const[u,f]of qY())e.get(u)||e.set(u,f);for(const u in l)if(l.hasOwnProperty(u)){const f=Zt(u);e.get(f)instanceof Bu&&e.set(f,l[u])}const c=N2e();for(const u of c)try{t.createInstance(u)}catch(f){Nt(f)}return s.fire(),t}o.initialize=r;function a(l){if(n)return l();const c=new he,u=c.add(s.event(()=>{u.dispose(),c.add(l())}));return c}o.withServices=a})(vt||(vt={}));class Xd{static capture(e){if(e.getScrollTop()===0||e.hasPendingScrollAnimation())return new Xd(e.getScrollTop(),e.getContentHeight(),null,0,null);let t=null,i=0;const n=e.getVisibleRanges();if(n.length>0){t=n[0].getStartPosition();const s=e.getTopForPosition(t.lineNumber,t.column);i=e.getScrollTop()-s}return new Xd(e.getScrollTop(),e.getContentHeight(),t,i,e.getPosition())}constructor(e,t,i,n,s){this._initialScrollTop=e,this._initialContentHeight=t,this._visiblePosition=i,this._visiblePositionScrollDelta=n,this._cursorPosition=s}restore(e){if(!(this._initialContentHeight===e.getContentHeight()&&this._initialScrollTop===e.getScrollTop())&&this._visiblePosition){const t=e.getTopForPosition(this._visiblePosition.lineNumber,this._visiblePosition.column);e.setScrollTop(t+this._visiblePositionScrollDelta)}}restoreRelativeVerticalPositionOfCursor(e){if(this._initialContentHeight===e.getContentHeight()&&this._initialScrollTop===e.getScrollTop())return;const t=e.getPosition();if(!this._cursorPosition||!t)return;const i=e.getTopForLineNumber(t.lineNumber)-e.getTopForLineNumber(this._cursorPosition.lineNumber);e.setScrollTop(e.getScrollTop()+i)}}function Oz(){return XB&&!!XB.VSCODE_DEV}function bre(o){if(Oz()){const e=U2e();return e.add(o),{dispose(){e.delete(o)}}}else return{dispose(){}}}function U2e(){AT||(AT=new Set);const o=globalThis;return o.$hotReload_applyNewExports||(o.$hotReload_applyNewExports=e=>{const t={config:{mode:void 0},...e};for(const i of AT){const n=i(t);if(n)return n}}),AT}let AT;Oz()&&bre(({oldExports:o,newSrc:e,config:t})=>{if(t.mode==="patch-prototype")return i=>{var n,s;for(const r in i){const a=i[r];if(console.log(`[hot-reload] Patching prototype methods of '${r}'`,{exportedItem:a}),typeof a=="function"&&a.prototype){const l=o[r];if(l){for(const c of Object.getOwnPropertyNames(a.prototype)){const u=Object.getOwnPropertyDescriptor(a.prototype,c),f=Object.getOwnPropertyDescriptor(l.prototype,c);((n=u==null?void 0:u.value)===null||n===void 0?void 0:n.toString())!==((s=f==null?void 0:f.value)===null||s===void 0?void 0:s.toString())&&console.log(`[hot-reload] Patching prototype method '${r}.${c}'`),Object.defineProperty(l.prototype,c,u)}i[r]=l}}}return!0}});function $2e(o,e,t,i){if(o.length===0)return e;if(e.length===0)return o;const n=[];let s=0,r=0;for(;s<o.length&&r<e.length;){const a=o[s],l=e[r],c=t(a),u=t(l);c<u?(n.push(a),s++):c>u?(n.push(l),r++):(n.push(i(a,l)),s++,r++)}for(;s<o.length;)n.push(o[s]),s++;for(;r<e.length;)n.push(e[r]),r++;return n}function kM(o,e){const t=new he,i=o.createDecorationsCollection();return t.add(lP({debugName:()=>`Apply decorations from ${e.debugName}`},n=>{const s=e.read(n);i.set(s)})),t.add({dispose:()=>{i.clear()}}),t}function iL(o,e){return o.appendChild(e),lt(()=>{o.removeChild(e)})}function j2e(o,e){return o.prepend(e),lt(()=>{o.removeChild(e)})}class Cre extends J{get width(){return this._width}get height(){return this._height}constructor(e,t){super(),this.elementSizeObserver=this._register(new Ene(e,t)),this._width=ni(this,this.elementSizeObserver.getWidth()),this._height=ni(this,this.elementSizeObserver.getHeight()),this._register(this.elementSizeObserver.onDidChange(i=>qi(n=>{this._width.set(this.elementSizeObserver.getWidth(),n),this._height.set(this.elementSizeObserver.getHeight(),n)})))}observe(e){this.elementSizeObserver.observe(e)}setAutomaticLayout(e){e?this.elementSizeObserver.startObserving():this.elementSizeObserver.stopObserving()}}function gJ(o,e,t){let i=e.get(),n=i,s=i;const r=ni("animatedValue",i);let a=-1;const l=300;let c;t.add(nk({createEmptyChangeSummary:()=>({animate:!1}),handleChange:(f,g)=>(f.didChange(e)&&(g.animate=g.animate||f.change),!0)},(f,g)=>{c!==void 0&&(o.cancelAnimationFrame(c),c=void 0),n=s,i=e.read(f),a=Date.now()-(g.animate?0:l),u()}));function u(){const f=Date.now()-a;s=Math.floor(K2e(f,n,i-n,l)),f<l?c=o.requestAnimationFrame(u):s=i,r.set(s,void 0)}return r}function K2e(o,e,t,i){return o===i?e+t:t*(-Math.pow(2,-10*o/i)+1)+e}class wre extends J{constructor(e,t,i){super(),this._register(new kP(e,i)),this._register(Zf(i,{height:t.actualHeight,top:t.actualTop}))}}class EM{get afterLineNumber(){return this._afterLineNumber.get()}constructor(e,t){this._afterLineNumber=e,this.heightInPx=t,this.domNode=document.createElement("div"),this._actualTop=ni(this,void 0),this._actualHeight=ni(this,void 0),this.actualTop=this._actualTop,this.actualHeight=this._actualHeight,this.showInHiddenAreas=!0,this.onChange=this._afterLineNumber,this.onDomNodeTop=i=>{this._actualTop.set(i,void 0)},this.onComputedHeight=i=>{this._actualHeight.set(i,void 0)}}}class kP{constructor(e,t){this._editor=e,this._domElement=t,this._overlayWidgetId=`managedOverlayWidget-${kP._counter++}`,this._overlayWidget={getId:()=>this._overlayWidgetId,getDomNode:()=>this._domElement,getPosition:()=>null},this._editor.addOverlayWidget(this._overlayWidget)}dispose(){this._editor.removeOverlayWidget(this._overlayWidget)}}kP._counter=0;function Zf(o,e){return zt(t=>{for(let[i,n]of Object.entries(e))n&&typeof n=="object"&&"read"in n&&(n=n.read(t)),typeof n=="number"&&(n=`${n}px`),i=i.replace(/[A-Z]/g,s=>"-"+s.toLowerCase()),o.style[i]=n})}function Oc(o,e){return q2e([o],e),o}function q2e(o,e){Oz()&&Go("reload",i=>bre(({oldExports:n})=>{if([...Object.values(n)].some(s=>o.includes(s)))return s=>(i(void 0),!0)})).read(e)}function IM(o,e,t,i){const n=new he,s=[];return n.add(gc((r,a)=>{const l=e.read(r),c=new Map,u=new Map;t&&t(!0),o.changeViewZones(f=>{for(const g of s)f.removeZone(g),i==null||i.delete(g);s.length=0;for(const g of l){const p=f.addZone(g);g.setZoneId&&g.setZoneId(p),s.push(p),i==null||i.add(p),c.set(g,p)}}),t&&t(!1),a.add(nk({createEmptyChangeSummary(){return{zoneIds:[]}},handleChange(f,g){const p=u.get(f.changedObservable);return p!==void 0&&g.zoneIds.push(p),!0}},(f,g)=>{for(const p of l)p.onChange&&(u.set(p.onChange,c.get(p)),p.onChange.read(f));t&&t(!0),o.changeViewZones(p=>{for(const _ of g.zoneIds)p.layoutZone(_)}),t&&t(!1)}))})),n.add({dispose(){t&&t(!0),o.changeViewZones(r=>{for(const a of s)r.removeZone(a)}),i==null||i.clear(),t&&t(!1)}}),n}class G2e extends os{dispose(){super.dispose(!0)}}function pJ(o,e){const t=ax(e,n=>n.original.startLineNumber<=o.lineNumber);if(!t)return A.fromPositions(o);if(t.original.endLineNumberExclusive<=o.lineNumber){const n=o.lineNumber-t.original.endLineNumberExclusive+t.modified.endLineNumberExclusive;return A.fromPositions(new Z(n,o.column))}if(!t.innerChanges)return A.fromPositions(new Z(t.modified.startLineNumber,1));const i=ax(t.innerChanges,n=>n.originalRange.getStartPosition().isBeforeOrEqual(o));if(!i){const n=o.lineNumber-t.original.startLineNumber+t.modified.startLineNumber;return A.fromPositions(new Z(n,o.column))}if(i.originalRange.containsPosition(o))return i.modifiedRange;{const n=Y2e(i.originalRange.getEndPosition(),o);return A.fromPositions(n.addToPosition(i.modifiedRange.getEndPosition()))}}function Y2e(o,e){return o.lineNumber===e.lineNumber?new Gc(0,e.column-o.column):new Gc(e.lineNumber-o.lineNumber,e.column-1)}function tf(o,e,t){const i=o.bindTo(e);return lP({debugName:()=>`Set Context Key "${o.key}"`},n=>{i.set(t(n))})}function Z2e(o,e){let t;return o.filter(i=>{const n=e(i,t);return t=i,n})}var Fz=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Bz=function(o,e){return function(t,i){e(t,i,o)}};const Q2e=gs("diff-review-insert",Ee.add,v("accessibleDiffViewerInsertIcon","Icon for 'Insert' in accessible diff viewer.")),X2e=gs("diff-review-remove",Ee.remove,v("accessibleDiffViewerRemoveIcon","Icon for 'Remove' in accessible diff viewer.")),J2e=gs("diff-review-close",Ee.close,v("accessibleDiffViewerCloseIcon","Icon for 'Close' in accessible diff viewer."));let Bp=class extends J{constructor(e,t,i,n,s,r,a,l,c){super(),this._parentNode=e,this._visible=t,this._setVisible=i,this._canClose=n,this._width=s,this._height=r,this._diffs=a,this._models=l,this._instantiationService=c,this._state=ew(this,(u,f)=>{const g=this._visible.read(u);if(this._parentNode.style.visibility=g?"visible":"hidden",!g)return null;const p=f.add(this._instantiationService.createInstance(uW,this._diffs,this._models,this._setVisible,this._canClose)),_=f.add(this._instantiationService.createInstance(hW,this._parentNode,p,this._width,this._height,this._models));return{model:p,view:_}}).recomputeInitiallyAndOnChange(this._store)}next(){qi(e=>{const t=this._visible.get();this._setVisible(!0,e),t&&this._state.get().model.nextGroup(e)})}prev(){qi(e=>{this._setVisible(!0,e),this._state.get().model.previousGroup(e)})}close(){qi(e=>{this._setVisible(!1,e)})}};Bp._ttPolicy=fg("diffReview",{createHTML:o=>o});Bp=Fz([Bz(8,ct)],Bp);let uW=class extends J{constructor(e,t,i,n,s){super(),this._diffs=e,this._models=t,this._setVisible=i,this.canClose=n,this._accessibilitySignalService=s,this._groups=ni(this,[]),this._currentGroupIdx=ni(this,0),this._currentElementIdx=ni(this,0),this.groups=this._groups,this.currentGroup=this._currentGroupIdx.map((r,a)=>this._groups.read(a)[r]),this.currentGroupIndex=this._currentGroupIdx,this.currentElement=this._currentElementIdx.map((r,a)=>{var l;return(l=this.currentGroup.read(a))===null||l===void 0?void 0:l.lines[r]}),this._register(zt(r=>{const a=this._diffs.read(r);if(!a){this._groups.set([],void 0);return}const l=eFe(a,this._models.getOriginalModel().getLineCount(),this._models.getModifiedModel().getLineCount());qi(c=>{const u=this._models.getModifiedPosition();if(u){const f=l.findIndex(g=>(u==null?void 0:u.lineNumber)<g.range.modified.endLineNumberExclusive);f!==-1&&this._currentGroupIdx.set(f,c)}this._groups.set(l,c)})})),this._register(zt(r=>{const a=this.currentElement.read(r);(a==null?void 0:a.type)===Mr.Deleted?this._accessibilitySignalService.playSignal(Ot.diffLineDeleted,{source:"accessibleDiffViewer.currentElementChanged"}):(a==null?void 0:a.type)===Mr.Added&&this._accessibilitySignalService.playSignal(Ot.diffLineInserted,{source:"accessibleDiffViewer.currentElementChanged"})})),this._register(zt(r=>{var a;const l=this.currentElement.read(r);if(l&&l.type!==Mr.Header){const c=(a=l.modifiedLineNumber)!==null&&a!==void 0?a:l.diff.modified.startLineNumber;this._models.modifiedSetSelection(A.fromPositions(new Z(c,1)))}}))}_goToGroupDelta(e,t){const i=this.groups.get();!i||i.length<=1||Fx(t,n=>{this._currentGroupIdx.set(Wt.ofLength(i.length).clipCyclic(this._currentGroupIdx.get()+e),n),this._currentElementIdx.set(0,n)})}nextGroup(e){this._goToGroupDelta(1,e)}previousGroup(e){this._goToGroupDelta(-1,e)}_goToLineDelta(e){const t=this.currentGroup.get();!t||t.lines.length<=1||qi(i=>{this._currentElementIdx.set(Wt.ofLength(t.lines.length).clip(this._currentElementIdx.get()+e),i)})}goToNextLine(){this._goToLineDelta(1)}goToPreviousLine(){this._goToLineDelta(-1)}goToLine(e){const t=this.currentGroup.get();if(!t)return;const i=t.lines.indexOf(e);i!==-1&&qi(n=>{this._currentElementIdx.set(i,n)})}revealCurrentElementInEditor(){if(!this.canClose.get())return;this._setVisible(!1,void 0);const e=this.currentElement.get();e&&(e.type===Mr.Deleted?this._models.originalReveal(A.fromPositions(new Z(e.originalLineNumber,1))):this._models.modifiedReveal(e.type!==Mr.Header?A.fromPositions(new Z(e.modifiedLineNumber,1)):void 0))}close(){this.canClose.get()&&(this._setVisible(!1,void 0),this._models.modifiedFocus())}};uW=Fz([Bz(4,Vm)],uW);const kS=3;function eFe(o,e,t){const i=[];for(const n of CV(o,(s,r)=>r.modified.startLineNumber-s.modified.endLineNumberExclusive<2*kS)){const s=[];s.push(new iFe);const r=new Bt(Math.max(1,n[0].original.startLineNumber-kS),Math.min(n[n.length-1].original.endLineNumberExclusive+kS,e+1)),a=new Bt(Math.max(1,n[0].modified.startLineNumber-kS),Math.min(n[n.length-1].modified.endLineNumberExclusive+kS,t+1));Nte(n,(u,f)=>{const g=new Bt(u?u.original.endLineNumberExclusive:r.startLineNumber,f?f.original.startLineNumber:r.endLineNumberExclusive),p=new Bt(u?u.modified.endLineNumberExclusive:a.startLineNumber,f?f.modified.startLineNumber:a.endLineNumberExclusive);g.forEach(_=>{s.push(new oFe(_,p.startLineNumber+(_-g.startLineNumber)))}),f&&(f.original.forEach(_=>{s.push(new nFe(f,_))}),f.modified.forEach(_=>{s.push(new sFe(f,_))}))});const l=n[0].modified.join(n[n.length-1].modified),c=n[0].original.join(n[n.length-1].original);i.push(new tFe(new Or(l,c),s))}return i}var Mr;(function(o){o[o.Header=0]="Header",o[o.Unchanged=1]="Unchanged",o[o.Deleted=2]="Deleted",o[o.Added=3]="Added"})(Mr||(Mr={}));class tFe{constructor(e,t){this.range=e,this.lines=t}}class iFe{constructor(){this.type=Mr.Header}}class nFe{constructor(e,t){this.diff=e,this.originalLineNumber=t,this.type=Mr.Deleted,this.modifiedLineNumber=void 0}}class sFe{constructor(e,t){this.diff=e,this.modifiedLineNumber=t,this.type=Mr.Added,this.originalLineNumber=void 0}}class oFe{constructor(e,t){this.originalLineNumber=e,this.modifiedLineNumber=t,this.type=Mr.Unchanged}}let hW=class extends J{constructor(e,t,i,n,s,r){super(),this._element=e,this._model=t,this._width=i,this._height=n,this._models=s,this._languageService=r,this.domNode=this._element,this.domNode.className="monaco-component diff-review monaco-editor-background";const a=document.createElement("div");a.className="diff-review-actions",this._actionBar=this._register(new pc(a)),this._register(zt(l=>{this._actionBar.clear(),this._model.canClose.read(l)&&this._actionBar.push(new za("diffreview.close",v("label.close","Close"),"close-diff-review "+pt.asClassName(J2e),!0,async()=>t.close()),{label:!1,icon:!0})})),this._content=document.createElement("div"),this._content.className="diff-review-content",this._content.setAttribute("role","code"),this._scrollbar=this._register(new KD(this._content,{})),_o(this.domNode,this._scrollbar.getDomNode(),a),this._register(zt(l=>{this._height.read(l),this._width.read(l),this._scrollbar.scanDomNode()})),this._register(lt(()=>{_o(this.domNode)})),this._register(Zf(this.domNode,{width:this._width,height:this._height})),this._register(Zf(this._content,{width:this._width,height:this._height})),this._register(gc((l,c)=>{this._model.currentGroup.read(l),this._render(c)})),this._register(ss(this.domNode,"keydown",l=>{(l.equals(18)||l.equals(2066)||l.equals(530))&&(l.preventDefault(),this._model.goToNextLine()),(l.equals(16)||l.equals(2064)||l.equals(528))&&(l.preventDefault(),this._model.goToPreviousLine()),(l.equals(9)||l.equals(2057)||l.equals(521)||l.equals(1033))&&(l.preventDefault(),this._model.close()),(l.equals(10)||l.equals(3))&&(l.preventDefault(),this._model.revealCurrentElementInEditor())}))}_render(e){const t=this._models.getOriginalOptions(),i=this._models.getModifiedOptions(),n=document.createElement("div");n.className="diff-review-table",n.setAttribute("role","list"),n.setAttribute("aria-label",v("ariaLabel","Accessible Diff Viewer. Use arrow up and down to navigate.")),vo(n,i.get(50)),_o(this._content,n);const s=this._models.getOriginalModel(),r=this._models.getModifiedModel();if(!s||!r)return;const a=s.getOptions(),l=r.getOptions(),c=i.get(67),u=this._model.currentGroup.get();for(const f of(u==null?void 0:u.lines)||[]){if(!u)break;let g;if(f.type===Mr.Header){const _=document.createElement("div");_.className="diff-review-row",_.setAttribute("role","listitem");const b=u.range,y=this._model.currentGroupIndex.get(),S=this._model.groups.get().length,L=N=>N===0?v("no_lines_changed","no lines changed"):N===1?v("one_line_changed","1 line changed"):v("more_lines_changed","{0} lines changed",N),x=L(b.original.length),D=L(b.modified.length);_.setAttribute("aria-label",v({key:"header",comment:["This is the ARIA label for a git diff header.","A git diff header looks like this: @@ -154,12 +159,39 @@.","That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.","Variables 0 and 1 refer to the diff index out of total number of diffs.","Variables 2 and 4 will be numbers (a line number).",'Variables 3 and 5 will be "no lines changed", "1 line changed" or "X lines changed", localized separately.']},"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}",y+1,S,b.original.startLineNumber,x,b.modified.startLineNumber,D));const E=document.createElement("div");E.className="diff-review-cell diff-review-summary",E.appendChild(document.createTextNode(`${y+1}/${S}: @@ -${b.original.startLineNumber},${b.original.length} +${b.modified.startLineNumber},${b.modified.length} @@`)),_.appendChild(E),g=_}else g=this._createRow(f,c,this._width.get(),t,s,a,i,r,l);n.appendChild(g);const p=Dt(_=>this._model.currentElement.read(_)===f);e.add(zt(_=>{const b=p.read(_);g.tabIndex=b?0:-1,b&&g.focus()})),e.add(oe(g,"focus",()=>{this._model.goToLine(f)}))}this._scrollbar.scanDomNode()}_createRow(e,t,i,n,s,r,a,l,c){const u=n.get(145),f=u.glyphMarginWidth+u.lineNumbersWidth,g=a.get(145),p=10+g.glyphMarginWidth+g.lineNumbersWidth;let _="diff-review-row",b="";const y="diff-review-spacer";let S=null;switch(e.type){case Mr.Added:_="diff-review-row line-insert",b=" char-insert",S=Q2e;break;case Mr.Deleted:_="diff-review-row line-delete",b=" char-delete",S=X2e;break}const L=document.createElement("div");L.style.minWidth=i+"px",L.className=_,L.setAttribute("role","listitem"),L.ariaLevel="";const x=document.createElement("div");x.className="diff-review-cell",x.style.height=`${t}px`,L.appendChild(x);const D=document.createElement("span");D.style.width=f+"px",D.style.minWidth=f+"px",D.className="diff-review-line-number"+b,e.originalLineNumber!==void 0?D.appendChild(document.createTextNode(String(e.originalLineNumber))):D.innerText="",x.appendChild(D);const E=document.createElement("span");E.style.width=p+"px",E.style.minWidth=p+"px",E.style.paddingRight="10px",E.className="diff-review-line-number"+b,e.modifiedLineNumber!==void 0?E.appendChild(document.createTextNode(String(e.modifiedLineNumber))):E.innerText="",x.appendChild(E);const N=document.createElement("span");if(N.className=y,S){const H=document.createElement("span");H.className=pt.asClassName(S),H.innerText="",N.appendChild(H)}else N.innerText="";x.appendChild(N);let M;if(e.modifiedLineNumber!==void 0){let H=this._getLineHtml(l,a,c.tabSize,e.modifiedLineNumber,this._languageService.languageIdCodec);Bp._ttPolicy&&(H=Bp._ttPolicy.createHTML(H)),x.insertAdjacentHTML("beforeend",H),M=l.getLineContent(e.modifiedLineNumber)}else{let H=this._getLineHtml(s,n,r.tabSize,e.originalLineNumber,this._languageService.languageIdCodec);Bp._ttPolicy&&(H=Bp._ttPolicy.createHTML(H)),x.insertAdjacentHTML("beforeend",H),M=s.getLineContent(e.originalLineNumber)}M.length===0&&(M=v("blankLine","blank"));let F="";switch(e.type){case Mr.Unchanged:e.originalLineNumber===e.modifiedLineNumber?F=v({key:"unchangedLine",comment:["The placeholders are contents of the line and should not be translated."]},"{0} unchanged line {1}",M,e.originalLineNumber):F=v("equalLine","{0} original line {1} modified line {2}",M,e.originalLineNumber,e.modifiedLineNumber);break;case Mr.Added:F=v("insertLine","+ {0} modified line {1}",M,e.modifiedLineNumber);break;case Mr.Deleted:F=v("deleteLine","- {0} original line {1}",M,e.originalLineNumber);break}return L.setAttribute("aria-label",F),L}_getLineHtml(e,t,i,n,s){const r=e.getLineContent(n),a=t.get(50),l=Gs.createEmpty(r,s),c=El.isBasicASCII(r,e.mightContainNonBasicASCII()),u=El.containsRTL(r,c,e.mightContainRTL());return OA(new Pm(a.isMonospace&&!t.get(33),a.canUseHalfwidthRightwardsArrow,r,!1,c,u,0,l,[],i,0,a.spaceWidth,a.middotWidth,a.wsmiddotWidth,t.get(117),t.get(99),t.get(94),t.get(51)!==ml.OFF,null)).html}};hW=Fz([Bz(5,xn)],hW);class rFe{constructor(e){this.editors=e}getOriginalModel(){return this.editors.original.getModel()}getOriginalOptions(){return this.editors.original.getOptions()}originalReveal(e){this.editors.original.revealRange(e),this.editors.original.setSelection(e),this.editors.original.focus()}getModifiedModel(){return this.editors.modified.getModel()}getModifiedOptions(){return this.editors.modified.getOptions()}modifiedReveal(e){e&&(this.editors.modified.revealRange(e),this.editors.modified.setSelection(e)),this.editors.modified.focus()}modifiedSetSelection(e){this.editors.modified.setSelection(e)}modifiedFocus(){this.editors.modified.focus()}getModifiedPosition(){var e;return(e=this.editors.modified.getPosition())!==null&&e!==void 0?e:void 0}}class Jp extends J{constructor(e,t,i,n,s){super(),this._rootElement=e,this._diffModel=t,this._originalEditorLayoutInfo=i,this._modifiedEditorLayoutInfo=n,this._editors=s,this._originalScrollTop=Gi(this._editors.original.onDidScrollChange,()=>this._editors.original.getScrollTop()),this._modifiedScrollTop=Gi(this._editors.modified.onDidScrollChange,()=>this._editors.modified.getScrollTop()),this._viewZonesChanged=Go("onDidChangeViewZones",this._editors.modified.onDidChangeViewZones),this.width=ni(this,0),this._modifiedViewZonesChangedSignal=Go("modified.onDidChangeViewZones",this._editors.modified.onDidChangeViewZones),this._originalViewZonesChangedSignal=Go("original.onDidChangeViewZones",this._editors.original.onDidChangeViewZones),this._state=ew(this,(u,f)=>{var g;this._element.replaceChildren();const p=this._diffModel.read(u),_=(g=p==null?void 0:p.diff.read(u))===null||g===void 0?void 0:g.movedTexts;if(!_||_.length===0){this.width.set(0,void 0);return}this._viewZonesChanged.read(u);const b=this._originalEditorLayoutInfo.read(u),y=this._modifiedEditorLayoutInfo.read(u);if(!b||!y){this.width.set(0,void 0);return}this._modifiedViewZonesChangedSignal.read(u),this._originalViewZonesChangedSignal.read(u);const S=_.map(F=>{function H(Le,be){const ze=be.getTopForLineNumber(Le.startLineNumber,!0),it=be.getTopForLineNumber(Le.endLineNumberExclusive,!0);return(ze+it)/2}const Q=H(F.lineRangeMapping.original,this._editors.original),K=this._originalScrollTop.read(u),j=H(F.lineRangeMapping.modified,this._editors.modified),q=this._modifiedScrollTop.read(u),se=Q-K,fe=j-q,Ae=Math.min(Q,j),Ne=Math.max(Q,j);return{range:new Wt(Ae,Ne),from:se,to:fe,fromWithoutScroll:Q,toWithoutScroll:j,move:F}});S.sort(Lbe(ac(F=>F.fromWithoutScroll>F.toWithoutScroll,xbe),ac(F=>F.fromWithoutScroll>F.toWithoutScroll?F.fromWithoutScroll:-F.toWithoutScroll,Uf)));const L=Wz.compute(S.map(F=>F.range)),x=10,D=b.verticalScrollbarWidth,E=(L.getTrackCount()-1)*10+x*2,N=D+E+(y.contentLeft-Jp.movedCodeBlockPadding);let M=0;for(const F of S){const H=L.getTrack(M),Q=D+x+H*10,K=15,j=15,q=N,se=y.glyphMarginWidth+y.lineNumbersWidth,fe=18,Ae=document.createElementNS("http://www.w3.org/2000/svg","rect");Ae.classList.add("arrow-rectangle"),Ae.setAttribute("x",`${q-se}`),Ae.setAttribute("y",`${F.to-fe/2}`),Ae.setAttribute("width",`${se}`),Ae.setAttribute("height",`${fe}`),this._element.appendChild(Ae);const Ne=document.createElementNS("http://www.w3.org/2000/svg","g"),Le=document.createElementNS("http://www.w3.org/2000/svg","path");Le.setAttribute("d",`M 0 ${F.from} L ${Q} ${F.from} L ${Q} ${F.to} L ${q-j} ${F.to}`),Le.setAttribute("fill","none"),Ne.appendChild(Le);const be=document.createElementNS("http://www.w3.org/2000/svg","polygon");be.classList.add("arrow"),f.add(zt(ze=>{Le.classList.toggle("currentMove",F.move===p.activeMovedText.read(ze)),be.classList.toggle("currentMove",F.move===p.activeMovedText.read(ze))})),be.setAttribute("points",`${q-j},${F.to-K/2} ${q},${F.to} ${q-j},${F.to+K/2}`),Ne.appendChild(be),this._element.appendChild(Ne),M++}this.width.set(E,void 0)}),this._element=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._element.setAttribute("class","moved-blocks-lines"),this._rootElement.appendChild(this._element),this._register(lt(()=>this._element.remove())),this._register(zt(u=>{const f=this._originalEditorLayoutInfo.read(u),g=this._modifiedEditorLayoutInfo.read(u);!f||!g||(this._element.style.left=`${f.width-f.verticalScrollbarWidth}px`,this._element.style.height=`${f.height}px`,this._element.style.width=`${f.verticalScrollbarWidth+f.contentLeft-Jp.movedCodeBlockPadding+this.width.read(u)}px`)})),this._register(sk(this._state));const r=Dt(u=>{const f=this._diffModel.read(u),g=f==null?void 0:f.diff.read(u);return g?g.movedTexts.map(p=>({move:p,original:new EM(Ad(p.lineRangeMapping.original.startLineNumber-1),18),modified:new EM(Ad(p.lineRangeMapping.modified.startLineNumber-1),18)})):[]});this._register(IM(this._editors.original,r.map(u=>u.map(f=>f.original)))),this._register(IM(this._editors.modified,r.map(u=>u.map(f=>f.modified)))),this._register(gc((u,f)=>{const g=r.read(u);for(const p of g)f.add(new mJ(this._editors.original,p.original,p.move,"original",this._diffModel.get())),f.add(new mJ(this._editors.modified,p.modified,p.move,"modified",this._diffModel.get()))}));const a=Go("original.onDidFocusEditorWidget",u=>this._editors.original.onDidFocusEditorWidget(()=>setTimeout(()=>u(void 0),0))),l=Go("modified.onDidFocusEditorWidget",u=>this._editors.modified.onDidFocusEditorWidget(()=>setTimeout(()=>u(void 0),0)));let c="modified";this._register(nk({createEmptyChangeSummary:()=>{},handleChange:(u,f)=>(u.didChange(a)&&(c="original"),u.didChange(l)&&(c="modified"),!0)},u=>{a.read(u),l.read(u);const f=this._diffModel.read(u);if(!f)return;const g=f.diff.read(u);let p;if(g&&c==="original"){const _=this._editors.originalCursor.read(u);_&&(p=g.movedTexts.find(b=>b.lineRangeMapping.original.contains(_.lineNumber)))}if(g&&c==="modified"){const _=this._editors.modifiedCursor.read(u);_&&(p=g.movedTexts.find(b=>b.lineRangeMapping.modified.contains(_.lineNumber)))}p!==f.movedTextToCompare.get()&&f.movedTextToCompare.set(void 0,void 0),f.setActiveMovedText(p)}))}}Jp.movedCodeBlockPadding=4;class Wz{static compute(e){const t=[],i=[];for(const n of e){let s=t.findIndex(r=>!r.intersectsStrict(n));s===-1&&(t.length>=6?s=iSe(t,ac(a=>a.intersectWithRangeLength(n),Uf)):(s=t.length,t.push(new rH))),t[s].addRange(n),i.push(s)}return new Wz(t.length,i)}constructor(e,t){this._trackCount=e,this.trackPerLineIdx=t}getTrack(e){return this.trackPerLineIdx[e]}getTrackCount(){return this._trackCount}}class mJ extends wre{constructor(e,t,i,n,s){const r=Ii("div.diff-hidden-lines-widget");super(e,t,r.root),this._editor=e,this._move=i,this._kind=n,this._diffModel=s,this._nodes=Ii("div.diff-moved-code-block",{style:{marginRight:"4px"}},[Ii("div.text-content@textContent"),Ii("div.action-bar@actionBar")]),r.root.appendChild(this._nodes.root);const a=Gi(this._editor.onDidLayoutChange,()=>this._editor.getLayoutInfo());this._register(Zf(this._nodes.root,{paddingRight:a.map(g=>g.verticalScrollbarWidth)}));let l;i.changes.length>0?l=this._kind==="original"?v("codeMovedToWithChanges","Code moved with changes to line {0}-{1}",this._move.lineRangeMapping.modified.startLineNumber,this._move.lineRangeMapping.modified.endLineNumberExclusive-1):v("codeMovedFromWithChanges","Code moved with changes from line {0}-{1}",this._move.lineRangeMapping.original.startLineNumber,this._move.lineRangeMapping.original.endLineNumberExclusive-1):l=this._kind==="original"?v("codeMovedTo","Code moved to line {0}-{1}",this._move.lineRangeMapping.modified.startLineNumber,this._move.lineRangeMapping.modified.endLineNumberExclusive-1):v("codeMovedFrom","Code moved from line {0}-{1}",this._move.lineRangeMapping.original.startLineNumber,this._move.lineRangeMapping.original.endLineNumberExclusive-1);const c=this._register(new pc(this._nodes.actionBar,{highlightToggledItems:!0})),u=new za("",l,"",!1);c.push(u,{icon:!1,label:!0});const f=new za("","Compare",pt.asClassName(Ee.compareChanges),!0,()=>{this._editor.focus(),this._diffModel.movedTextToCompare.set(this._diffModel.movedTextToCompare.get()===i?void 0:this._move,void 0)});this._register(zt(g=>{const p=this._diffModel.movedTextToCompare.read(g)===i;f.checked=p})),c.push(f,{icon:!1,label:!0})}}V("diffEditor.move.border",{dark:"#8b8b8b9c",light:"#8b8b8b9c",hcDark:"#8b8b8b9c",hcLight:"#8b8b8b9c"},v("diffEditor.move.border","The border color for text that got moved in the diff editor."));V("diffEditor.moveActive.border",{dark:"#FFA500",light:"#FFA500",hcDark:"#FFA500",hcLight:"#FFA500"},v("diffEditor.moveActive.border","The active border color for text that got moved in the diff editor."));V("diffEditor.unchangedRegionShadow",{dark:"#000000",light:"#737373BF",hcDark:"#000000",hcLight:"#737373BF"},v("diffEditor.unchangedRegionShadow","The color of the shadow around unchanged region widgets."));const aFe=gs("diff-insert",Ee.add,v("diffInsertIcon","Line decoration for inserts in the diff editor.")),yre=gs("diff-remove",Ee.remove,v("diffRemoveIcon","Line decoration for removals in the diff editor.")),_J=Rt.register({className:"line-insert",description:"line-insert",isWholeLine:!0,linesDecorationsClassName:"insert-sign "+pt.asClassName(aFe),marginClassName:"gutter-insert"}),vJ=Rt.register({className:"line-delete",description:"line-delete",isWholeLine:!0,linesDecorationsClassName:"delete-sign "+pt.asClassName(yre),marginClassName:"gutter-delete"}),bJ=Rt.register({className:"line-insert",description:"line-insert",isWholeLine:!0,marginClassName:"gutter-insert"}),CJ=Rt.register({className:"line-delete",description:"line-delete",isWholeLine:!0,marginClassName:"gutter-delete"}),wJ=Rt.register({className:"char-insert",description:"char-insert",shouldFillLineOnLineBreak:!0}),lFe=Rt.register({className:"char-insert",description:"char-insert",isWholeLine:!0}),cFe=Rt.register({className:"char-insert diff-range-empty",description:"char-insert diff-range-empty"}),fW=Rt.register({className:"char-delete",description:"char-delete",shouldFillLineOnLineBreak:!0}),dFe=Rt.register({className:"char-delete",description:"char-delete",isWholeLine:!0}),uFe=Rt.register({className:"char-delete diff-range-empty",description:"char-delete diff-range-empty"});class hFe extends J{constructor(e,t,i,n){super(),this._editors=e,this._diffModel=t,this._options=i,this._decorations=Dt(this,s=>{var r;const a=(r=this._diffModel.read(s))===null||r===void 0?void 0:r.diff.read(s);if(!a)return null;const l=this._diffModel.read(s).movedTextToCompare.read(s),c=this._options.renderIndicators.read(s),u=this._options.showEmptyDecorations.read(s),f=[],g=[];if(!l)for(const _ of a.mappings)if(_.lineRangeMapping.original.isEmpty||f.push({range:_.lineRangeMapping.original.toInclusiveRange(),options:c?vJ:CJ}),_.lineRangeMapping.modified.isEmpty||g.push({range:_.lineRangeMapping.modified.toInclusiveRange(),options:c?_J:bJ}),_.lineRangeMapping.modified.isEmpty||_.lineRangeMapping.original.isEmpty)_.lineRangeMapping.original.isEmpty||f.push({range:_.lineRangeMapping.original.toInclusiveRange(),options:dFe}),_.lineRangeMapping.modified.isEmpty||g.push({range:_.lineRangeMapping.modified.toInclusiveRange(),options:lFe});else for(const b of _.lineRangeMapping.innerChanges||[])_.lineRangeMapping.original.contains(b.originalRange.startLineNumber)&&f.push({range:b.originalRange,options:b.originalRange.isEmpty()&&u?uFe:fW}),_.lineRangeMapping.modified.contains(b.modifiedRange.startLineNumber)&&g.push({range:b.modifiedRange,options:b.modifiedRange.isEmpty()&&u?cFe:wJ});if(l)for(const _ of l.changes){const b=_.original.toInclusiveRange();b&&f.push({range:b,options:c?vJ:CJ});const y=_.modified.toInclusiveRange();y&&g.push({range:y,options:c?_J:bJ});for(const S of _.innerChanges||[])f.push({range:S.originalRange,options:fW}),g.push({range:S.modifiedRange,options:wJ})}const p=this._diffModel.read(s).activeMovedText.read(s);for(const _ of a.movedTexts)f.push({range:_.lineRangeMapping.original.toInclusiveRange(),options:{description:"moved",blockClassName:"movedOriginal"+(_===p?" currentMove":""),blockPadding:[Jp.movedCodeBlockPadding,0,Jp.movedCodeBlockPadding,Jp.movedCodeBlockPadding]}}),g.push({range:_.lineRangeMapping.modified.toInclusiveRange(),options:{description:"moved",blockClassName:"movedModified"+(_===p?" currentMove":""),blockPadding:[4,0,4,4]}});return{originalDecorations:f,modifiedDecorations:g}}),this._register(kM(this._editors.original,this._decorations.map(s=>(s==null?void 0:s.originalDecorations)||[]))),this._register(kM(this._editors.modified,this._decorations.map(s=>(s==null?void 0:s.modifiedDecorations)||[])))}}class fFe extends J{constructor(e,t,i,n){super(),this._options=e,this._domNode=t,this._dimensions=i,this._sashes=n,this._sashRatio=ni(this,void 0),this.sashLeft=Dt(this,s=>{var r;const a=(r=this._sashRatio.read(s))!==null&&r!==void 0?r:this._options.splitViewDefaultRatio.read(s);return this._computeSashLeft(a,s)}),this._sash=this._register(new jo(this._domNode,{getVerticalSashTop:s=>0,getVerticalSashLeft:s=>this.sashLeft.get(),getVerticalSashHeight:s=>this._dimensions.height.get()},{orientation:0})),this._startSashPosition=void 0,this._register(this._sash.onDidStart(()=>{this._startSashPosition=this.sashLeft.get()})),this._register(this._sash.onDidChange(s=>{const r=this._dimensions.width.get(),a=this._computeSashLeft((this._startSashPosition+(s.currentX-s.startX))/r,void 0);this._sashRatio.set(a/r,void 0)})),this._register(this._sash.onDidEnd(()=>this._sash.layout())),this._register(this._sash.onDidReset(()=>this._sashRatio.set(void 0,void 0))),this._register(zt(s=>{const r=this._sashes.read(s);r&&(this._sash.orthogonalEndSash=r.bottom)})),this._register(zt(s=>{const r=this._options.enableSplitViewResizing.read(s);this._sash.state=r?3:0,this.sashLeft.read(s),this._dimensions.height.read(s),this._sash.layout()}))}_computeSashLeft(e,t){const i=this._dimensions.width.read(t),n=Math.floor(this._options.splitViewDefaultRatio.read(t)*i),s=this._options.enableSplitViewResizing.read(t)?Math.floor(e*i):n,r=100;return i<=r*2?n:s<r?r:s>i-r?i-r:s}}var Sre=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},gW=function(o,e){return function(t,i){e(t,i,o)}},z_;const Lre=Zt("diffProviderFactoryService");let pW=class{constructor(e){this.instantiationService=e}createDiffProvider(e){return this.instantiationService.createInstance(TM,e)}};pW=Sre([gW(0,ct)],pW);oi(Lre,pW,1);let TM=z_=class{constructor(e,t,i){this.editorWorkerService=t,this.telemetryService=i,this.onDidChangeEventEmitter=new Y,this.onDidChange=this.onDidChangeEventEmitter.event,this.diffAlgorithm="advanced",this.diffAlgorithmOnDidChangeSubscription=void 0,this.setOptions(e)}dispose(){var e;(e=this.diffAlgorithmOnDidChangeSubscription)===null||e===void 0||e.dispose()}async computeDiff(e,t,i,n){var s,r;if(typeof this.diffAlgorithm!="string")return this.diffAlgorithm.computeDiff(e,t,i,n);if(e.getLineCount()===1&&e.getLineMaxColumn(1)===1)return t.getLineCount()===1&&t.getLineMaxColumn(1)===1?{changes:[],identical:!0,quitEarly:!1,moves:[]}:{changes:[new Sl(new Bt(1,2),new Bt(1,t.getLineCount()+1),[new sg(e.getFullModelRange(),t.getFullModelRange())])],identical:!1,quitEarly:!1,moves:[]};const a=JSON.stringify([e.uri.toString(),t.uri.toString()]),l=JSON.stringify([e.id,t.id,e.getAlternativeVersionId(),t.getAlternativeVersionId(),JSON.stringify(i)]),c=z_.diffCache.get(a);if(c&&c.context===l)return c.result;const u=Ao.create(),f=await this.editorWorkerService.computeDiff(e.uri,t.uri,i,this.diffAlgorithm),g=u.elapsed();if(this.telemetryService.publicLog2("diffEditor.computeDiff",{timeMs:g,timedOut:(s=f==null?void 0:f.quitEarly)!==null&&s!==void 0?s:!0,detectedMoves:i.computeMoves?(r=f==null?void 0:f.moves.length)!==null&&r!==void 0?r:0:-1}),n.isCancellationRequested)return{changes:[],identical:!1,quitEarly:!0,moves:[]};if(!f)throw new Error("no diff result available");return z_.diffCache.size>10&&z_.diffCache.delete(z_.diffCache.keys().next().value),z_.diffCache.set(a,{result:f,context:l}),f}setOptions(e){var t;let i=!1;e.diffAlgorithm&&this.diffAlgorithm!==e.diffAlgorithm&&((t=this.diffAlgorithmOnDidChangeSubscription)===null||t===void 0||t.dispose(),this.diffAlgorithmOnDidChangeSubscription=void 0,this.diffAlgorithm=e.diffAlgorithm,typeof e.diffAlgorithm!="string"&&(this.diffAlgorithmOnDidChangeSubscription=e.diffAlgorithm.onDidChange(()=>this.onDidChangeEventEmitter.fire())),i=!0),i&&this.onDidChangeEventEmitter.fire()}};TM.diffCache=new Map;TM=z_=Sre([gW(1,Cc),gW(2,pr)],TM);var gFe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},pFe=function(o,e){return function(t,i){e(t,i,o)}};let mW=class extends J{setActiveMovedText(e){this._activeMovedText.set(e,void 0)}constructor(e,t,i){super(),this.model=e,this._options=t,this._diffProviderFactoryService=i,this._isDiffUpToDate=ni(this,!1),this.isDiffUpToDate=this._isDiffUpToDate,this._diff=ni(this,void 0),this.diff=this._diff,this._unchangedRegions=ni(this,void 0),this.unchangedRegions=Dt(this,a=>{var l,c;return this._options.hideUnchangedRegions.read(a)?(c=(l=this._unchangedRegions.read(a))===null||l===void 0?void 0:l.regions)!==null&&c!==void 0?c:[]:(qi(u=>{var f;for(const g of((f=this._unchangedRegions.get())===null||f===void 0?void 0:f.regions)||[])g.collapseAll(u)}),[])}),this.movedTextToCompare=ni(this,void 0),this._activeMovedText=ni(this,void 0),this._hoveredMovedText=ni(this,void 0),this.activeMovedText=Dt(this,a=>{var l,c;return(c=(l=this.movedTextToCompare.read(a))!==null&&l!==void 0?l:this._hoveredMovedText.read(a))!==null&&c!==void 0?c:this._activeMovedText.read(a)}),this._cancellationTokenSource=new os,this._diffProvider=Dt(this,a=>{const l=this._diffProviderFactoryService.createDiffProvider({diffAlgorithm:this._options.diffAlgorithm.read(a)}),c=Go("onDidChange",l.onDidChange);return{diffProvider:l,onChangeSignal:c}}),this._register(lt(()=>this._cancellationTokenSource.cancel()));const n=dP("contentChangedSignal"),s=this._register(new Ui(()=>n.trigger(void 0),200));this._register(zt(a=>{const l=this._unchangedRegions.read(a);if(!l||l.regions.some(_=>_.isDragged.read(a)))return;const c=l.originalDecorationIds.map(_=>e.original.getDecorationRange(_)).map(_=>_?Bt.fromRangeInclusive(_):void 0),u=l.modifiedDecorationIds.map(_=>e.modified.getDecorationRange(_)).map(_=>_?Bt.fromRangeInclusive(_):void 0),f=l.regions.map((_,b)=>!c[b]||!u[b]?void 0:new Wp(c[b].startLineNumber,u[b].startLineNumber,c[b].length,_.visibleLineCountTop.read(a),_.visibleLineCountBottom.read(a))).filter(sh),g=[];let p=!1;for(const _ of CV(f,(b,y)=>b.getHiddenModifiedRange(a).endLineNumberExclusive===y.getHiddenModifiedRange(a).startLineNumber))if(_.length>1){p=!0;const b=_.reduce((S,L)=>S+L.lineCount,0),y=new Wp(_[0].originalLineNumber,_[0].modifiedLineNumber,b,_[0].visibleLineCountTop.get(),_[_.length-1].visibleLineCountBottom.get());g.push(y)}else g.push(_[0]);if(p){const _=e.original.deltaDecorations(l.originalDecorationIds,g.map(y=>({range:y.originalUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}}))),b=e.modified.deltaDecorations(l.modifiedDecorationIds,g.map(y=>({range:y.modifiedUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}})));qi(y=>{this._unchangedRegions.set({regions:g,originalDecorationIds:_,modifiedDecorationIds:b},y)})}}));const r=(a,l,c)=>{const u=Wp.fromDiffs(a.changes,e.original.getLineCount(),e.modified.getLineCount(),this._options.hideUnchangedRegionsMinimumLineCount.read(c),this._options.hideUnchangedRegionsContextLineCount.read(c));let f;const g=this._unchangedRegions.get();if(g){const y=g.originalDecorationIds.map(D=>e.original.getDecorationRange(D)).map(D=>D?Bt.fromRangeInclusive(D):void 0),S=g.modifiedDecorationIds.map(D=>e.modified.getDecorationRange(D)).map(D=>D?Bt.fromRangeInclusive(D):void 0);let x=Z2e(g.regions.map((D,E)=>{if(!y[E]||!S[E])return;const N=y[E].length;return new Wp(y[E].startLineNumber,S[E].startLineNumber,N,Math.min(D.visibleLineCountTop.get(),N),Math.min(D.visibleLineCountBottom.get(),N-D.visibleLineCountTop.get()))}).filter(sh),(D,E)=>!E||D.modifiedLineNumber>=E.modifiedLineNumber+E.lineCount&&D.originalLineNumber>=E.originalLineNumber+E.lineCount).map(D=>new Or(D.getHiddenOriginalRange(c),D.getHiddenModifiedRange(c)));x=Or.clip(x,Bt.ofLength(1,e.original.getLineCount()),Bt.ofLength(1,e.modified.getLineCount())),f=Or.inverse(x,e.original.getLineCount(),e.modified.getLineCount())}const p=[];if(f)for(const y of u){const S=f.filter(L=>L.original.intersectsStrict(y.originalUnchangedRange)&&L.modified.intersectsStrict(y.modifiedUnchangedRange));p.push(...y.setVisibleRanges(S,l))}else p.push(...u);const _=e.original.deltaDecorations((g==null?void 0:g.originalDecorationIds)||[],p.map(y=>({range:y.originalUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}}))),b=e.modified.deltaDecorations((g==null?void 0:g.modifiedDecorationIds)||[],p.map(y=>({range:y.modifiedUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}})));this._unchangedRegions.set({regions:p,originalDecorationIds:_,modifiedDecorationIds:b},l)};this._register(e.modified.onDidChangeContent(a=>{if(this._diff.get()){const c=Hf.fromModelContentChanges(a.changes);this._lastDiff,e.original,e.modified}this._isDiffUpToDate.set(!1,void 0),s.schedule()})),this._register(e.original.onDidChangeContent(a=>{if(this._diff.get()){const c=Hf.fromModelContentChanges(a.changes);this._lastDiff,e.original,e.modified}this._isDiffUpToDate.set(!1,void 0),s.schedule()})),this._register(gc(async(a,l)=>{var c,u;this._options.hideUnchangedRegionsMinimumLineCount.read(a),this._options.hideUnchangedRegionsContextLineCount.read(a),s.cancel(),n.read(a);const f=this._diffProvider.read(a);f.onChangeSignal.read(a),Oc(vne,a),Oc(m9,a),this._isDiffUpToDate.set(!1,void 0);let g=[];l.add(e.original.onDidChangeContent(b=>{const y=Hf.fromModelContentChanges(b.changes);g=WR(g,y)}));let p=[];l.add(e.modified.onDidChangeContent(b=>{const y=Hf.fromModelContentChanges(b.changes);p=WR(p,y)}));let _=await f.diffProvider.computeDiff(e.original,e.modified,{ignoreTrimWhitespace:this._options.ignoreTrimWhitespace.read(a),maxComputationTimeMs:this._options.maxComputationTimeMs.read(a),computeMoves:this._options.showMoves.read(a)},this._cancellationTokenSource.token);this._cancellationTokenSource.token.isCancellationRequested||(_=mFe(_,e.original,e.modified),_=(c=(e.original,e.modified,void 0))!==null&&c!==void 0?c:_,_=(u=(e.original,e.modified,void 0))!==null&&u!==void 0?u:_,qi(b=>{r(_,b),this._lastDiff=_;const y=Vz.fromDiffResult(_);this._diff.set(y,b),this._isDiffUpToDate.set(!0,b);const S=this.movedTextToCompare.get();this.movedTextToCompare.set(S?this._lastDiff.moves.find(L=>L.lineRangeMapping.modified.intersect(S.lineRangeMapping.modified)):void 0,b)}))}))}ensureModifiedLineIsVisible(e,t,i){var n,s;if(((n=this.diff.get())===null||n===void 0?void 0:n.mappings.length)===0)return;const r=((s=this._unchangedRegions.get())===null||s===void 0?void 0:s.regions)||[];for(const a of r)if(a.getHiddenModifiedRange(void 0).contains(e)){a.showModifiedLine(e,t,i);return}}ensureOriginalLineIsVisible(e,t,i){var n,s;if(((n=this.diff.get())===null||n===void 0?void 0:n.mappings.length)===0)return;const r=((s=this._unchangedRegions.get())===null||s===void 0?void 0:s.regions)||[];for(const a of r)if(a.getHiddenOriginalRange(void 0).contains(e)){a.showOriginalLine(e,t,i);return}}async waitForDiff(){await bAe(this.isDiffUpToDate,e=>e)}serializeState(){const e=this._unchangedRegions.get();return{collapsedRegions:e==null?void 0:e.regions.map(t=>({range:t.getHiddenModifiedRange(void 0).serialize()}))}}restoreSerializedState(e){var t;const i=(t=e.collapsedRegions)===null||t===void 0?void 0:t.map(s=>Bt.deserialize(s.range)),n=this._unchangedRegions.get();!n||!i||qi(s=>{for(const r of n.regions)for(const a of i)if(r.modifiedUnchangedRange.intersect(a)){r.setHiddenModifiedRange(a,s);break}})}};mW=gFe([pFe(2,Lre)],mW);function mFe(o,e,t){return{changes:o.changes.map(i=>new Sl(i.original,i.modified,i.innerChanges?i.innerChanges.map(n=>_Fe(n,e,t)):void 0)),moves:o.moves,identical:o.identical,quitEarly:o.quitEarly}}function _Fe(o,e,t){let i=o.originalRange,n=o.modifiedRange;return(i.endColumn!==1||n.endColumn!==1)&&i.endColumn===e.getLineMaxColumn(i.endLineNumber)&&n.endColumn===t.getLineMaxColumn(n.endLineNumber)&&i.endLineNumber<e.getLineCount()&&n.endLineNumber<t.getLineCount()&&(i=i.setEndPosition(i.endLineNumber+1,1),n=n.setEndPosition(n.endLineNumber+1,1)),new sg(i,n)}class Vz{static fromDiffResult(e){return new Vz(e.changes.map(t=>new xre(t)),e.moves||[],e.identical,e.quitEarly)}constructor(e,t,i,n){this.mappings=e,this.movedTexts=t,this.identical=i,this.quitEarly=n}}class xre{constructor(e){this.lineRangeMapping=e}}class Wp{static fromDiffs(e,t,i,n,s){const r=Sl.inverse(e,t,i),a=[];for(const l of r){let c=l.original.startLineNumber,u=l.modified.startLineNumber,f=l.original.length;const g=c===1&&u===1,p=c+f===t+1&&u+f===i+1;(g||p)&&f>=s+n?(g&&!p&&(f-=s),p&&!g&&(c+=s,u+=s,f-=s),a.push(new Wp(c,u,f,0,0))):f>=s*2+n&&(c+=s,u+=s,f-=s*2,a.push(new Wp(c,u,f,0,0)))}return a}get originalUnchangedRange(){return Bt.ofLength(this.originalLineNumber,this.lineCount)}get modifiedUnchangedRange(){return Bt.ofLength(this.modifiedLineNumber,this.lineCount)}constructor(e,t,i,n,s){this.originalLineNumber=e,this.modifiedLineNumber=t,this.lineCount=i,this._visibleLineCountTop=ni(this,0),this.visibleLineCountTop=this._visibleLineCountTop,this._visibleLineCountBottom=ni(this,0),this.visibleLineCountBottom=this._visibleLineCountBottom,this._shouldHideControls=Dt(this,l=>this.visibleLineCountTop.read(l)+this.visibleLineCountBottom.read(l)===this.lineCount&&!this.isDragged.read(l)),this.isDragged=ni(this,void 0);const r=Math.max(Math.min(n,this.lineCount),0),a=Math.max(Math.min(s,this.lineCount-n),0);BY(n===r),BY(s===a),this._visibleLineCountTop.set(r,void 0),this._visibleLineCountBottom.set(a,void 0)}setVisibleRanges(e,t){const i=[],n=new ec(e.map(l=>l.modified)).subtractFrom(this.modifiedUnchangedRange);let s=this.originalLineNumber,r=this.modifiedLineNumber;const a=this.modifiedLineNumber+this.lineCount;if(n.ranges.length===0)this.showAll(t),i.push(this);else{let l=0;for(const c of n.ranges){const u=l===n.ranges.length-1;l++;const f=(u?a:c.endLineNumberExclusive)-r,g=new Wp(s,r,f,0,0);g.setHiddenModifiedRange(c,t),i.push(g),s=g.originalUnchangedRange.endLineNumberExclusive,r=g.modifiedUnchangedRange.endLineNumberExclusive}}return i}shouldHideControls(e){return this._shouldHideControls.read(e)}getHiddenOriginalRange(e){return Bt.ofLength(this.originalLineNumber+this._visibleLineCountTop.read(e),this.lineCount-this._visibleLineCountTop.read(e)-this._visibleLineCountBottom.read(e))}getHiddenModifiedRange(e){return Bt.ofLength(this.modifiedLineNumber+this._visibleLineCountTop.read(e),this.lineCount-this._visibleLineCountTop.read(e)-this._visibleLineCountBottom.read(e))}setHiddenModifiedRange(e,t){const i=e.startLineNumber-this.modifiedLineNumber,n=this.modifiedLineNumber+this.lineCount-e.endLineNumberExclusive;this.setState(i,n,t)}getMaxVisibleLineCountTop(){return this.lineCount-this._visibleLineCountBottom.get()}getMaxVisibleLineCountBottom(){return this.lineCount-this._visibleLineCountTop.get()}showMoreAbove(e=10,t){const i=this.getMaxVisibleLineCountTop();this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get()+e,i),t)}showMoreBelow(e=10,t){const i=this.lineCount-this._visibleLineCountTop.get();this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get()+e,i),t)}showAll(e){this._visibleLineCountBottom.set(this.lineCount-this._visibleLineCountTop.get(),e)}showModifiedLine(e,t,i){const n=e+1-(this.modifiedLineNumber+this._visibleLineCountTop.get()),s=this.modifiedLineNumber-this._visibleLineCountBottom.get()+this.lineCount-e;t===0&&n<s||t===1?this._visibleLineCountTop.set(this._visibleLineCountTop.get()+n,i):this._visibleLineCountBottom.set(this._visibleLineCountBottom.get()+s,i)}showOriginalLine(e,t,i){const n=e-this.originalLineNumber,s=this.originalLineNumber+this.lineCount-e;t===0&&n<s||t===1?this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get()+s-n,this.getMaxVisibleLineCountTop()),i):this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get()+n-s,this.getMaxVisibleLineCountBottom()),i)}collapseAll(e){this._visibleLineCountTop.set(0,e),this._visibleLineCountBottom.set(0,e)}setState(e,t,i){e=Math.max(Math.min(e,this.lineCount),0),t=Math.max(Math.min(t,this.lineCount-e),0),this._visibleLineCountTop.set(e,i),this._visibleLineCountBottom.set(t,i)}}class vFe extends J{get visibility(){return this._visibility}set visibility(e){this._visibility!==e&&(this._visibility=e,this._diffActions.style.visibility=e?"visible":"hidden")}constructor(e,t,i,n,s,r,a,l,c){super(),this._getViewZoneId=e,this._marginDomNode=t,this._modifiedEditor=i,this._diff=n,this._editor=s,this._viewLineCounts=r,this._originalTextModel=a,this._contextMenuService=l,this._clipboardService=c,this._visibility=!1,this._marginDomNode.style.zIndex="10",this._diffActions=document.createElement("div"),this._diffActions.className=pt.asClassName(Ee.lightBulb)+" lightbulb-glyph",this._diffActions.style.position="absolute";const u=this._modifiedEditor.getOption(67);this._diffActions.style.right="0px",this._diffActions.style.visibility="hidden",this._diffActions.style.height=`${u}px`,this._diffActions.style.lineHeight=`${u}px`,this._marginDomNode.appendChild(this._diffActions);let f=0;const g=i.getOption(127)&&!$d,p=(_,b)=>{var y;this._contextMenuService.showContextMenu({domForShadowRoot:g&&(y=i.getDomNode())!==null&&y!==void 0?y:void 0,getAnchor:()=>({x:_,y:b}),getActions:()=>{const S=[],L=n.modified.isEmpty;return S.push(new za("diff.clipboard.copyDeletedContent",L?n.original.length>1?v("diff.clipboard.copyDeletedLinesContent.label","Copy deleted lines"):v("diff.clipboard.copyDeletedLinesContent.single.label","Copy deleted line"):n.original.length>1?v("diff.clipboard.copyChangedLinesContent.label","Copy changed lines"):v("diff.clipboard.copyChangedLinesContent.single.label","Copy changed line"),void 0,!0,async()=>{const D=this._originalTextModel.getValueInRange(n.original.toExclusiveRange());await this._clipboardService.writeText(D)})),n.original.length>1&&S.push(new za("diff.clipboard.copyDeletedLineContent",L?v("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",n.original.startLineNumber+f):v("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",n.original.startLineNumber+f),void 0,!0,async()=>{let D=this._originalTextModel.getLineContent(n.original.startLineNumber+f);D===""&&(D=this._originalTextModel.getEndOfLineSequence()===0?`
`:`\r
`),await this._clipboardService.writeText(D)})),i.getOption(91)||S.push(new za("diff.inline.revertChange",v("diff.inline.revertChange.label","Revert this change"),void 0,!0,async()=>{this._editor.revert(this._diff)})),S},autoSelectFirstItem:!0})};this._register(ss(this._diffActions,"mousedown",_=>{if(!_.leftButton)return;const{top:b,height:y}=ws(this._diffActions),S=Math.floor(u/3);_.preventDefault(),p(_.posx,b+y+S)})),this._register(i.onMouseMove(_=>{(_.target.type===8||_.target.type===5)&&_.target.detail.viewZoneId===this._getViewZoneId()?(f=this._updateLightBulbPosition(this._marginDomNode,_.event.browserEvent.y,u),this.visibility=!0):this.visibility=!1})),this._register(i.onMouseDown(_=>{_.event.leftButton&&(_.target.type===8||_.target.type===5)&&_.target.detail.viewZoneId===this._getViewZoneId()&&(_.event.preventDefault(),f=this._updateLightBulbPosition(this._marginDomNode,_.event.browserEvent.y,u),p(_.event.posx,_.event.posy+u))}))}_updateLightBulbPosition(e,t,i){const{top:n}=ws(e),s=t-n,r=Math.floor(s/i),a=r*i;if(this._diffActions.style.top=`${a}px`,this._viewLineCounts){let l=0;for(let c=0;c<this._viewLineCounts.length;c++)if(l+=this._viewLineCounts[c],r<l)return c}return r}}const yJ=fg("diffEditorWidget",{createHTML:o=>o});function bFe(o,e,t,i){vo(i,e.fontInfo);const n=t.length>0,s=new Y1(1e4);let r=0,a=0;const l=[];for(let g=0;g<o.lineTokens.length;g++){const p=g+1,_=o.lineTokens[g],b=o.lineBreakData[g],y=Hr.filter(t,p,1,Number.MAX_SAFE_INTEGER);if(b){let S=0;for(const L of b.breakOffsets){const x=_.sliceAndInflate(S,L,0);r=Math.max(r,SJ(a,x,Hr.extractWrapped(y,S,L),n,o.mightContainNonBasicASCII,o.mightContainRTL,e,s)),a++,S=L}l.push(b.breakOffsets.length)}else l.push(1),r=Math.max(r,SJ(a,_,y,n,o.mightContainNonBasicASCII,o.mightContainRTL,e,s)),a++}r+=e.scrollBeyondLastColumn;const c=s.build(),u=yJ?yJ.createHTML(c):c;i.innerHTML=u;const f=r*e.typicalHalfwidthCharacterWidth;return{heightInLines:a,minWidthInPx:f,viewLineCounts:l}}class CFe{constructor(e,t,i,n){this.lineTokens=e,this.lineBreakData=t,this.mightContainNonBasicASCII=i,this.mightContainRTL=n}}class Hz{static fromEditor(e){var t;const i=e.getOptions(),n=i.get(50),s=i.get(145);return new Hz(((t=e.getModel())===null||t===void 0?void 0:t.getOptions().tabSize)||0,n,i.get(33),n.typicalHalfwidthCharacterWidth,i.get(104),i.get(67),s.decorationsWidth,i.get(117),i.get(99),i.get(94),i.get(51))}constructor(e,t,i,n,s,r,a,l,c,u,f){this.tabSize=e,this.fontInfo=t,this.disableMonospaceOptimizations=i,this.typicalHalfwidthCharacterWidth=n,this.scrollBeyondLastColumn=s,this.lineHeight=r,this.lineDecorationsWidth=a,this.stopRenderingLineAfter=l,this.renderWhitespace=c,this.renderControlCharacters=u,this.fontLigatures=f}}function SJ(o,e,t,i,n,s,r,a){a.appendString('<div class="view-line'),i||a.appendString(" char-delete"),a.appendString('" style="top:'),a.appendString(String(o*r.lineHeight)),a.appendString('px;width:1000000px;">');const l=e.getLineContent(),c=El.isBasicASCII(l,n),u=El.containsRTL(l,c,s),f=zD(new Pm(r.fontInfo.isMonospace&&!r.disableMonospaceOptimizations,r.fontInfo.canUseHalfwidthRightwardsArrow,l,!1,c,u,0,e,t,r.tabSize,0,r.fontInfo.spaceWidth,r.fontInfo.middotWidth,r.fontInfo.wsmiddotWidth,r.stopRenderingLineAfter,r.renderWhitespace,r.renderControlCharacters,r.fontLigatures!==ml.OFF,null),a);return a.appendString("</div>"),f.characterMapping.getHorizontalOffset(f.characterMapping.length)}var wFe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},LJ=function(o,e){return function(t,i){e(t,i,o)}};let _W=class extends J{constructor(e,t,i,n,s,r,a,l,c,u){super(),this._targetWindow=e,this._editors=t,this._diffModel=i,this._options=n,this._diffEditorWidget=s,this._canIgnoreViewZoneUpdateEvent=r,this._origViewZonesToIgnore=a,this._modViewZonesToIgnore=l,this._clipboardService=c,this._contextMenuService=u,this._originalTopPadding=ni(this,0),this._originalScrollOffset=ni(this,0),this._originalScrollOffsetAnimated=gJ(this._targetWindow,this._originalScrollOffset,this._store),this._modifiedTopPadding=ni(this,0),this._modifiedScrollOffset=ni(this,0),this._modifiedScrollOffsetAnimated=gJ(this._targetWindow,this._modifiedScrollOffset,this._store);const f=ni("invalidateAlignmentsState",0),g=this._register(new Ui(()=>{f.set(f.get()+1,void 0)},0));this._register(this._editors.original.onDidChangeViewZones(x=>{this._canIgnoreViewZoneUpdateEvent()||g.schedule()})),this._register(this._editors.modified.onDidChangeViewZones(x=>{this._canIgnoreViewZoneUpdateEvent()||g.schedule()})),this._register(this._editors.original.onDidChangeConfiguration(x=>{(x.hasChanged(146)||x.hasChanged(67))&&g.schedule()})),this._register(this._editors.modified.onDidChangeConfiguration(x=>{(x.hasChanged(146)||x.hasChanged(67))&&g.schedule()}));const p=this._diffModel.map(x=>x?Gi(x.model.original.onDidChangeTokens,()=>x.model.original.tokenization.backgroundTokenizationState===2):void 0).map((x,D)=>x==null?void 0:x.read(D)),_=Dt(x=>{const D=this._diffModel.read(x),E=D==null?void 0:D.diff.read(x);if(!D||!E)return null;f.read(x);const M=this._options.renderSideBySide.read(x);return xJ(this._editors.original,this._editors.modified,E.mappings,this._origViewZonesToIgnore,this._modViewZonesToIgnore,M)}),b=Dt(x=>{var D;const E=(D=this._diffModel.read(x))===null||D===void 0?void 0:D.movedTextToCompare.read(x);if(!E)return null;f.read(x);const N=E.changes.map(M=>new xre(M));return xJ(this._editors.original,this._editors.modified,N,this._origViewZonesToIgnore,this._modViewZonesToIgnore,!0)});function y(){const x=document.createElement("div");return x.className="diagonal-fill",x}const S=this._register(new he);this.viewZones=ew(this,(x,D)=>{var E,N,M,F,H,Q,K,j;S.clear();const q=_.read(x)||[],se=[],fe=[],Ae=this._modifiedTopPadding.read(x);Ae>0&&fe.push({afterLineNumber:0,domNode:document.createElement("div"),heightInPx:Ae,showInHiddenAreas:!0,suppressMouseDown:!0});const Ne=this._originalTopPadding.read(x);Ne>0&&se.push({afterLineNumber:0,domNode:document.createElement("div"),heightInPx:Ne,showInHiddenAreas:!0,suppressMouseDown:!0});const Le=this._options.renderSideBySide.read(x),be=Le||(E=this._editors.modified._getViewModel())===null||E===void 0?void 0:E.createLineBreaksComputer();if(be){const Qt=this._editors.original.getModel();for(const nn of q)if(nn.diff)for(let un=nn.originalRange.startLineNumber;un<nn.originalRange.endLineNumberExclusive;un++){if(un>Qt.getLineCount())return{orig:se,mod:fe};be==null||be.addRequest(Qt.getLineContent(un),null,null)}}const ze=(N=be==null?void 0:be.finalize())!==null&&N!==void 0?N:[];let it=0;const qe=this._editors.modified.getOption(67),Fe=(M=this._diffModel.read(x))===null||M===void 0?void 0:M.movedTextToCompare.read(x),Li=(H=(F=this._editors.original.getModel())===null||F===void 0?void 0:F.mightContainNonBasicASCII())!==null&&H!==void 0?H:!1,Bn=(K=(Q=this._editors.original.getModel())===null||Q===void 0?void 0:Q.mightContainRTL())!==null&&K!==void 0?K:!1,tn=Hz.fromEditor(this._editors.modified);for(const Qt of q)if(Qt.diff&&!Le){if(!Qt.originalRange.isEmpty){p.read(x);const un=document.createElement("div");un.classList.add("view-lines","line-delete","monaco-mouse-cursor-text");const sn=this._editors.original.getModel();if(Qt.originalRange.endLineNumberExclusive-1>sn.getLineCount())return{orig:se,mod:fe};const Ct=new CFe(Qt.originalRange.mapToLineArray(Ri=>sn.tokenization.getLineTokens(Ri)),Qt.originalRange.mapToLineArray(Ri=>ze[it++]),Li,Bn),Ss=[];for(const Ri of Qt.diff.innerChanges||[])Ss.push(new pL(Ri.originalRange.delta(-(Qt.diff.original.startLineNumber-1)),fW.className,0));const Dn=bFe(Ct,tn,Ss,un),Wn=document.createElement("div");if(Wn.className="inline-deleted-margin-view-zone",vo(Wn,tn.fontInfo),this._options.renderIndicators.read(x))for(let Ri=0;Ri<Dn.heightInLines;Ri++){const Vn=document.createElement("div");Vn.className=`delete-sign ${pt.asClassName(yre)}`,Vn.setAttribute("style",`position:absolute;top:${Ri*qe}px;width:${tn.lineDecorationsWidth}px;height:${qe}px;right:0;`),Wn.appendChild(Vn)}let rs;S.add(new vFe(()=>Dp(rs),Wn,this._editors.modified,Qt.diff,this._diffEditorWidget,Dn.viewLineCounts,this._editors.original.getModel(),this._contextMenuService,this._clipboardService));for(let Ri=0;Ri<Dn.viewLineCounts.length;Ri++){const Vn=Dn.viewLineCounts[Ri];Vn>1&&se.push({afterLineNumber:Qt.originalRange.startLineNumber+Ri,domNode:y(),heightInPx:(Vn-1)*qe,showInHiddenAreas:!0,suppressMouseDown:!0})}fe.push({afterLineNumber:Qt.modifiedRange.startLineNumber-1,domNode:un,heightInPx:Dn.heightInLines*qe,minWidthInPx:Dn.minWidthInPx,marginDomNode:Wn,setZoneId(Ri){rs=Ri},showInHiddenAreas:!0,suppressMouseDown:!0})}const nn=document.createElement("div");nn.className="gutter-delete",se.push({afterLineNumber:Qt.originalRange.endLineNumberExclusive-1,domNode:y(),heightInPx:Qt.modifiedHeightInPx,marginDomNode:nn,showInHiddenAreas:!0,suppressMouseDown:!0})}else{const nn=Qt.modifiedHeightInPx-Qt.originalHeightInPx;if(nn>0){if(Fe!=null&&Fe.lineRangeMapping.original.delta(-1).deltaLength(2).contains(Qt.originalRange.endLineNumberExclusive-1))continue;se.push({afterLineNumber:Qt.originalRange.endLineNumberExclusive-1,domNode:y(),heightInPx:nn,showInHiddenAreas:!0,suppressMouseDown:!0})}else{let un=function(){const Ct=document.createElement("div");return Ct.className="arrow-revert-change "+pt.asClassName(Ee.arrowRight),D.add(oe(Ct,"mousedown",Ss=>Ss.stopPropagation())),D.add(oe(Ct,"click",Ss=>{Ss.stopPropagation(),s.revert(Qt.diff)})),ye("div",{},Ct)};if(Fe!=null&&Fe.lineRangeMapping.modified.delta(-1).deltaLength(2).contains(Qt.modifiedRange.endLineNumberExclusive-1))continue;let sn;Qt.diff&&Qt.diff.modified.isEmpty&&this._options.shouldRenderOldRevertArrows.read(x)&&(sn=un()),fe.push({afterLineNumber:Qt.modifiedRange.endLineNumberExclusive-1,domNode:y(),heightInPx:-nn,marginDomNode:sn,showInHiddenAreas:!0,suppressMouseDown:!0})}}for(const Qt of(j=b.read(x))!==null&&j!==void 0?j:[]){if(!(Fe!=null&&Fe.lineRangeMapping.original.intersect(Qt.originalRange))||!(Fe!=null&&Fe.lineRangeMapping.modified.intersect(Qt.modifiedRange)))continue;const nn=Qt.modifiedHeightInPx-Qt.originalHeightInPx;nn>0?se.push({afterLineNumber:Qt.originalRange.endLineNumberExclusive-1,domNode:y(),heightInPx:nn,showInHiddenAreas:!0,suppressMouseDown:!0}):fe.push({afterLineNumber:Qt.modifiedRange.endLineNumberExclusive-1,domNode:y(),heightInPx:-nn,showInHiddenAreas:!0,suppressMouseDown:!0})}return{orig:se,mod:fe}});let L=!1;this._register(this._editors.original.onDidScrollChange(x=>{x.scrollLeftChanged&&!L&&(L=!0,this._editors.modified.setScrollLeft(x.scrollLeft),L=!1)})),this._register(this._editors.modified.onDidScrollChange(x=>{x.scrollLeftChanged&&!L&&(L=!0,this._editors.original.setScrollLeft(x.scrollLeft),L=!1)})),this._originalScrollTop=Gi(this._editors.original.onDidScrollChange,()=>this._editors.original.getScrollTop()),this._modifiedScrollTop=Gi(this._editors.modified.onDidScrollChange,()=>this._editors.modified.getScrollTop()),this._register(zt(x=>{const D=this._originalScrollTop.read(x)-(this._originalScrollOffsetAnimated.get()-this._modifiedScrollOffsetAnimated.read(x))-(this._originalTopPadding.get()-this._modifiedTopPadding.read(x));D!==this._editors.modified.getScrollTop()&&this._editors.modified.setScrollTop(D,1)})),this._register(zt(x=>{const D=this._modifiedScrollTop.read(x)-(this._modifiedScrollOffsetAnimated.get()-this._originalScrollOffsetAnimated.read(x))-(this._modifiedTopPadding.get()-this._originalTopPadding.read(x));D!==this._editors.original.getScrollTop()&&this._editors.original.setScrollTop(D,1)})),this._register(zt(x=>{var D;const E=(D=this._diffModel.read(x))===null||D===void 0?void 0:D.movedTextToCompare.read(x);let N=0;if(E){const M=this._editors.original.getTopForLineNumber(E.lineRangeMapping.original.startLineNumber,!0)-this._originalTopPadding.get();N=this._editors.modified.getTopForLineNumber(E.lineRangeMapping.modified.startLineNumber,!0)-this._modifiedTopPadding.get()-M}N>0?(this._modifiedTopPadding.set(0,void 0),this._originalTopPadding.set(N,void 0)):N<0?(this._modifiedTopPadding.set(-N,void 0),this._originalTopPadding.set(0,void 0)):setTimeout(()=>{this._modifiedTopPadding.set(0,void 0),this._originalTopPadding.set(0,void 0)},400),this._editors.modified.hasTextFocus()?this._originalScrollOffset.set(this._modifiedScrollOffset.get()-N,void 0,!0):this._modifiedScrollOffset.set(this._originalScrollOffset.get()+N,void 0,!0)}))}};_W=wFe([LJ(8,_g),LJ(9,Ya)],_W);function xJ(o,e,t,i,n,s){const r=new tg(DJ(o,i)),a=new tg(DJ(e,n)),l=o.getOption(67),c=e.getOption(67),u=[];let f=0,g=0;function p(_,b){for(;;){let y=r.peek(),S=a.peek();if(y&&y.lineNumber>=_&&(y=void 0),S&&S.lineNumber>=b&&(S=void 0),!y&&!S)break;const L=y?y.lineNumber-f:Number.MAX_VALUE,x=S?S.lineNumber-g:Number.MAX_VALUE;L<x?(r.dequeue(),S={lineNumber:y.lineNumber-f+g,heightInPx:0}):L>x?(a.dequeue(),y={lineNumber:S.lineNumber-g+f,heightInPx:0}):(r.dequeue(),a.dequeue()),u.push({originalRange:Bt.ofLength(y.lineNumber,1),modifiedRange:Bt.ofLength(S.lineNumber,1),originalHeightInPx:l+y.heightInPx,modifiedHeightInPx:c+S.heightInPx,diff:void 0})}}for(const _ of t){let x=function(D,E){var N,M,F,H;if(D<L||E<S)return;if(y)y=!1;else if(D===L||E===S)return;const Q=new Bt(L,D),K=new Bt(S,E);if(Q.isEmpty&&K.isEmpty)return;const j=(M=(N=r.takeWhile(se=>se.lineNumber<D))===null||N===void 0?void 0:N.reduce((se,fe)=>se+fe.heightInPx,0))!==null&&M!==void 0?M:0,q=(H=(F=a.takeWhile(se=>se.lineNumber<E))===null||F===void 0?void 0:F.reduce((se,fe)=>se+fe.heightInPx,0))!==null&&H!==void 0?H:0;u.push({originalRange:Q,modifiedRange:K,originalHeightInPx:Q.length*l+j,modifiedHeightInPx:K.length*c+q,diff:_.lineRangeMapping}),L=D,S=E};const b=_.lineRangeMapping;p(b.original.startLineNumber,b.modified.startLineNumber);let y=!0,S=b.modified.startLineNumber,L=b.original.startLineNumber;if(s)for(const D of b.innerChanges||[]){D.originalRange.startColumn>1&&D.modifiedRange.startColumn>1&&x(D.originalRange.startLineNumber,D.modifiedRange.startLineNumber);const E=o.getModel(),N=D.originalRange.endLineNumber<=E.getLineCount()?E.getLineMaxColumn(D.originalRange.endLineNumber):Number.MAX_SAFE_INTEGER;D.originalRange.endColumn<N&&x(D.originalRange.endLineNumber,D.modifiedRange.endLineNumber)}x(b.original.endLineNumberExclusive,b.modified.endLineNumberExclusive),f=b.original.endLineNumberExclusive,g=b.modified.endLineNumberExclusive}return p(Number.MAX_VALUE,Number.MAX_VALUE),u}function DJ(o,e){const t=[],i=[],n=o.getOption(146).wrappingColumn!==-1,s=o._getViewModel().coordinatesConverter,r=o.getOption(67);if(n)for(let l=1;l<=o.getModel().getLineCount();l++){const c=s.getModelLineViewLineCount(l);c>1&&i.push({lineNumber:l,heightInPx:r*(c-1)})}for(const l of o.getWhitespaces()){if(e.has(l.id))continue;const c=l.afterLineNumber===0?0:s.convertViewPositionToModelPosition(new Z(l.afterLineNumber,1)).lineNumber;t.push({lineNumber:c,heightInPx:l.height})}return $2e(t,i,l=>l.lineNumber,(l,c)=>({lineNumber:l.lineNumber,heightInPx:l.heightInPx+c.heightInPx}))}var yFe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},SFe=function(o,e){return function(t,i){e(t,i,o)}},vW;let Qx=vW=class extends J{static setBreadcrumbsSourceFactory(e){this._breadcrumbsSourceFactory.set(e,void 0)}get isUpdatingHiddenAreas(){return this._isUpdatingHiddenAreas}constructor(e,t,i,n){super(),this._editors=e,this._diffModel=t,this._options=i,this._instantiationService=n,this._modifiedOutlineSource=lf(this,l=>{const c=this._editors.modifiedModel.read(l),u=vW._breadcrumbsSourceFactory.read(l);return!c||!u?void 0:u(c,this._instantiationService)}),this._isUpdatingHiddenAreas=!1,this._register(this._editors.original.onDidChangeCursorPosition(l=>{if(l.reason===1)return;const c=this._diffModel.get();qi(u=>{for(const f of this._editors.original.getSelections()||[])c==null||c.ensureOriginalLineIsVisible(f.getStartPosition().lineNumber,0,u),c==null||c.ensureOriginalLineIsVisible(f.getEndPosition().lineNumber,0,u)})})),this._register(this._editors.modified.onDidChangeCursorPosition(l=>{if(l.reason===1)return;const c=this._diffModel.get();qi(u=>{for(const f of this._editors.modified.getSelections()||[])c==null||c.ensureModifiedLineIsVisible(f.getStartPosition().lineNumber,0,u),c==null||c.ensureModifiedLineIsVisible(f.getEndPosition().lineNumber,0,u)})}));const s=this._diffModel.map((l,c)=>{var u,f;const g=(u=l==null?void 0:l.unchangedRegions.read(c))!==null&&u!==void 0?u:[];return g.length===1&&g[0].modifiedLineNumber===1&&g[0].lineCount===((f=this._editors.modifiedModel.read(c))===null||f===void 0?void 0:f.getLineCount())?[]:g});this.viewZones=ew(this,(l,c)=>{const u=this._modifiedOutlineSource.read(l);if(!u)return{origViewZones:[],modViewZones:[]};const f=[],g=[],p=this._options.renderSideBySide.read(l),_=s.read(l);for(const b of _)if(!b.shouldHideControls(l)){{const y=Dt(this,L=>b.getHiddenOriginalRange(L).startLineNumber-1),S=new EM(y,24);f.push(S),c.add(new kJ(this._editors.original,S,b,b.originalUnchangedRange,!p,u,L=>this._diffModel.get().ensureModifiedLineIsVisible(L,2,void 0),this._options))}{const y=Dt(this,L=>b.getHiddenModifiedRange(L).startLineNumber-1),S=new EM(y,24);g.push(S),c.add(new kJ(this._editors.modified,S,b,b.modifiedUnchangedRange,!1,u,L=>this._diffModel.get().ensureModifiedLineIsVisible(L,2,void 0),this._options))}}return{origViewZones:f,modViewZones:g}});const r={description:"unchanged lines",className:"diff-unchanged-lines",isWholeLine:!0},a={description:"Fold Unchanged",glyphMarginHoverMessage:new qo(void 0,{isTrusted:!0,supportThemeIcons:!0}).appendMarkdown(v("foldUnchanged","Fold Unchanged Region")),glyphMarginClassName:"fold-unchanged "+pt.asClassName(Ee.fold),zIndex:10001};this._register(kM(this._editors.original,Dt(this,l=>{const c=s.read(l),u=c.map(f=>({range:f.originalUnchangedRange.toInclusiveRange(),options:r}));for(const f of c)f.shouldHideControls(l)&&u.push({range:A.fromPositions(new Z(f.originalLineNumber,1)),options:a});return u}))),this._register(kM(this._editors.modified,Dt(this,l=>{const c=s.read(l),u=c.map(f=>({range:f.modifiedUnchangedRange.toInclusiveRange(),options:r}));for(const f of c)f.shouldHideControls(l)&&u.push({range:Bt.ofLength(f.modifiedLineNumber,1).toInclusiveRange(),options:a});return u}))),this._register(zt(l=>{const c=s.read(l);this._isUpdatingHiddenAreas=!0;try{this._editors.original.setHiddenAreas(c.map(u=>u.getHiddenOriginalRange(l).toInclusiveRange()).filter(sh)),this._editors.modified.setHiddenAreas(c.map(u=>u.getHiddenModifiedRange(l).toInclusiveRange()).filter(sh))}finally{this._isUpdatingHiddenAreas=!1}})),this._register(this._editors.modified.onMouseUp(l=>{var c;if(!l.event.rightButton&&l.target.position&&(!((c=l.target.element)===null||c===void 0)&&c.className.includes("fold-unchanged"))){const u=l.target.position.lineNumber,f=this._diffModel.get();if(!f)return;const g=f.unchangedRegions.get().find(p=>p.modifiedUnchangedRange.includes(u));if(!g)return;g.collapseAll(void 0),l.event.stopPropagation(),l.event.preventDefault()}})),this._register(this._editors.original.onMouseUp(l=>{var c;if(!l.event.rightButton&&l.target.position&&(!((c=l.target.element)===null||c===void 0)&&c.className.includes("fold-unchanged"))){const u=l.target.position.lineNumber,f=this._diffModel.get();if(!f)return;const g=f.unchangedRegions.get().find(p=>p.originalUnchangedRange.includes(u));if(!g)return;g.collapseAll(void 0),l.event.stopPropagation(),l.event.preventDefault()}}))}};Qx._breadcrumbsSourceFactory=ni("breadcrumbsSourceFactory",void 0);Qx=vW=yFe([SFe(3,ct)],Qx);class kJ extends wre{constructor(e,t,i,n,s,r,a,l){const c=Ii("div.diff-hidden-lines-widget");super(e,t,c.root),this._editor=e,this._unchangedRegion=i,this._unchangedRegionRange=n,this._hide=s,this._modifiedOutlineSource=r,this._revealModifiedHiddenLine=a,this._options=l,this._nodes=Ii("div.diff-hidden-lines",[Ii("div.top@top",{title:v("diff.hiddenLines.top","Click or drag to show more above")}),Ii("div.center@content",{style:{display:"flex"}},[Ii("div@first",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexShrink:"0"}},[ye("a",{title:v("showUnchangedRegion","Show Unchanged Region"),role:"button",onclick:()=>{this._unchangedRegion.showAll(void 0)}},...Yp("$(unfold)"))]),Ii("div@others",{style:{display:"flex",justifyContent:"center",alignItems:"center"}})]),Ii("div.bottom@bottom",{title:v("diff.bottom","Click or drag to show more below"),role:"button"})]),c.root.appendChild(this._nodes.root);const u=Gi(this._editor.onDidLayoutChange,()=>this._editor.getLayoutInfo());this._hide?_o(this._nodes.first):this._register(Zf(this._nodes.first,{width:u.map(g=>g.contentLeft)})),this._register(zt(g=>{const p=this._unchangedRegion.visibleLineCountTop.read(g)+this._unchangedRegion.visibleLineCountBottom.read(g)===this._unchangedRegion.lineCount;this._nodes.bottom.classList.toggle("canMoveTop",!p),this._nodes.bottom.classList.toggle("canMoveBottom",this._unchangedRegion.visibleLineCountBottom.read(g)>0),this._nodes.top.classList.toggle("canMoveTop",this._unchangedRegion.visibleLineCountTop.read(g)>0),this._nodes.top.classList.toggle("canMoveBottom",!p);const _=this._unchangedRegion.isDragged.read(g),b=this._editor.getDomNode();b&&(b.classList.toggle("draggingUnchangedRegion",!!_),_==="top"?(b.classList.toggle("canMoveTop",this._unchangedRegion.visibleLineCountTop.read(g)>0),b.classList.toggle("canMoveBottom",!p)):_==="bottom"?(b.classList.toggle("canMoveTop",!p),b.classList.toggle("canMoveBottom",this._unchangedRegion.visibleLineCountBottom.read(g)>0)):(b.classList.toggle("canMoveTop",!1),b.classList.toggle("canMoveBottom",!1)))}));const f=this._editor;this._register(oe(this._nodes.top,"mousedown",g=>{if(g.button!==0)return;this._nodes.top.classList.toggle("dragging",!0),this._nodes.root.classList.toggle("dragging",!0),g.preventDefault();const p=g.clientY;let _=!1;const b=this._unchangedRegion.visibleLineCountTop.get();this._unchangedRegion.isDragged.set("top",void 0);const y=ft(this._nodes.top),S=oe(y,"mousemove",x=>{const E=x.clientY-p;_=_||Math.abs(E)>2;const N=Math.round(E/f.getOption(67)),M=Math.max(0,Math.min(b+N,this._unchangedRegion.getMaxVisibleLineCountTop()));this._unchangedRegion.visibleLineCountTop.set(M,void 0)}),L=oe(y,"mouseup",x=>{_||this._unchangedRegion.showMoreAbove(this._options.hideUnchangedRegionsRevealLineCount.get(),void 0),this._nodes.top.classList.toggle("dragging",!1),this._nodes.root.classList.toggle("dragging",!1),this._unchangedRegion.isDragged.set(void 0,void 0),S.dispose(),L.dispose()})})),this._register(oe(this._nodes.bottom,"mousedown",g=>{if(g.button!==0)return;this._nodes.bottom.classList.toggle("dragging",!0),this._nodes.root.classList.toggle("dragging",!0),g.preventDefault();const p=g.clientY;let _=!1;const b=this._unchangedRegion.visibleLineCountBottom.get();this._unchangedRegion.isDragged.set("bottom",void 0);const y=ft(this._nodes.bottom),S=oe(y,"mousemove",x=>{const E=x.clientY-p;_=_||Math.abs(E)>2;const N=Math.round(E/f.getOption(67)),M=Math.max(0,Math.min(b-N,this._unchangedRegion.getMaxVisibleLineCountBottom())),F=this._unchangedRegionRange.endLineNumberExclusive>f.getModel().getLineCount()?f.getContentHeight():f.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);this._unchangedRegion.visibleLineCountBottom.set(M,void 0);const H=this._unchangedRegionRange.endLineNumberExclusive>f.getModel().getLineCount()?f.getContentHeight():f.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);f.setScrollTop(f.getScrollTop()+(H-F))}),L=oe(y,"mouseup",x=>{if(this._unchangedRegion.isDragged.set(void 0,void 0),!_){const D=f.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);this._unchangedRegion.showMoreBelow(this._options.hideUnchangedRegionsRevealLineCount.get(),void 0);const E=f.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);f.setScrollTop(f.getScrollTop()+(E-D))}this._nodes.bottom.classList.toggle("dragging",!1),this._nodes.root.classList.toggle("dragging",!1),S.dispose(),L.dispose()})})),this._register(zt(g=>{const p=[];if(!this._hide){const _=i.getHiddenModifiedRange(g).length,b=v("hiddenLines","{0} hidden lines",_),y=ye("span",{title:v("diff.hiddenLines.expandAll","Double click to unfold")},b);y.addEventListener("dblclick",x=>{x.button===0&&(x.preventDefault(),this._unchangedRegion.showAll(void 0))}),p.push(y);const S=this._unchangedRegion.getHiddenModifiedRange(g),L=this._modifiedOutlineSource.getBreadcrumbItems(S,g);if(L.length>0){p.push(ye("span",void 0,"|"));for(let x=0;x<L.length;x++){const D=L[x],E=cR.toIcon(D.kind),N=Ii("div.breadcrumb-item",{style:{display:"flex",alignItems:"center"}},[Tx(E),"",D.name,...x===L.length-1?[]:[Tx(Ee.chevronRight)]]).root;p.push(N),N.onclick=()=>{this._revealModifiedHiddenLine(D.startLineNumber)}}}}_o(this._nodes.others,...p)}))}}var LFe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},xFe=function(o,e){return function(t,i){e(t,i,o)}},Ac;let Hv=Ac=class extends J{constructor(e,t,i,n,s,r,a){super(),this._editors=e,this._rootElement=t,this._diffModel=i,this._rootWidth=n,this._rootHeight=s,this._modifiedEditorLayoutInfo=r,this._themeService=a,this.width=Ac.ENTIRE_DIFF_OVERVIEW_WIDTH;const l=Gi(this._themeService.onDidColorThemeChange,()=>this._themeService.getColorTheme()),c=Dt(g=>{const p=l.read(g),_=p.getColor(ULe)||(p.getColor(HLe)||S9).transparent(2),b=p.getColor($Le)||(p.getColor(zLe)||L9).transparent(2);return{insertColor:_,removeColor:b}}),u=ki(document.createElement("div"));u.setClassName("diffViewport"),u.setPosition("absolute");const f=Ii("div.diffOverview",{style:{position:"absolute",top:"0px",width:Ac.ENTIRE_DIFF_OVERVIEW_WIDTH+"px"}}).root;this._register(iL(f,u.domNode)),this._register(ss(f,ke.POINTER_DOWN,g=>{this._editors.modified.delegateVerticalScrollbarPointerDown(g)})),this._register(oe(f,ke.MOUSE_WHEEL,g=>{this._editors.modified.delegateScrollFromMouseWheelEvent(g)},{passive:!1})),this._register(iL(this._rootElement,f)),this._register(gc((g,p)=>{const _=this._diffModel.read(g),b=this._editors.original.createOverviewRuler("original diffOverviewRuler");b&&(p.add(b),p.add(iL(f,b.getDomNode())));const y=this._editors.modified.createOverviewRuler("modified diffOverviewRuler");if(y&&(p.add(y),p.add(iL(f,y.getDomNode()))),!b||!y)return;const S=Go("viewZoneChanged",this._editors.original.onDidChangeViewZones),L=Go("viewZoneChanged",this._editors.modified.onDidChangeViewZones),x=Go("hiddenRangesChanged",this._editors.original.onDidChangeHiddenAreas),D=Go("hiddenRangesChanged",this._editors.modified.onDidChangeHiddenAreas);p.add(zt(E=>{var N;S.read(E),L.read(E),x.read(E),D.read(E);const M=c.read(E),F=(N=_==null?void 0:_.diff.read(E))===null||N===void 0?void 0:N.mappings;function H(j,q,se){const fe=se._getViewModel();return fe?j.filter(Ae=>Ae.length>0).map(Ae=>{const Ne=fe.coordinatesConverter.convertModelPositionToViewPosition(new Z(Ae.startLineNumber,1)),Le=fe.coordinatesConverter.convertModelPositionToViewPosition(new Z(Ae.endLineNumberExclusive,1)),be=Le.lineNumber-Ne.lineNumber;return new mse(Ne.lineNumber,Le.lineNumber,be,q.toString())}):[]}const Q=H((F||[]).map(j=>j.lineRangeMapping.original),M.removeColor,this._editors.original),K=H((F||[]).map(j=>j.lineRangeMapping.modified),M.insertColor,this._editors.modified);b==null||b.setZones(Q),y==null||y.setZones(K)})),p.add(zt(E=>{const N=this._rootHeight.read(E),M=this._rootWidth.read(E),F=this._modifiedEditorLayoutInfo.read(E);if(F){const H=Ac.ENTIRE_DIFF_OVERVIEW_WIDTH-2*Ac.ONE_OVERVIEW_WIDTH;b.setLayout({top:0,height:N,right:H+Ac.ONE_OVERVIEW_WIDTH,width:Ac.ONE_OVERVIEW_WIDTH}),y.setLayout({top:0,height:N,right:0,width:Ac.ONE_OVERVIEW_WIDTH});const Q=this._editors.modifiedScrollTop.read(E),K=this._editors.modifiedScrollHeight.read(E),j=this._editors.modified.getOption(103),q=new p1(j.verticalHasArrows?j.arrowSize:0,j.verticalScrollbarSize,0,F.height,K,Q);u.setTop(q.getSliderPosition()),u.setHeight(q.getSliderSize())}else u.setTop(0),u.setHeight(0);f.style.height=N+"px",f.style.left=M-Ac.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",u.setWidth(Ac.ENTIRE_DIFF_OVERVIEW_WIDTH)}))}))}};Hv.ONE_OVERVIEW_WIDTH=15;Hv.ENTIRE_DIFF_OVERVIEW_WIDTH=Ac.ONE_OVERVIEW_WIDTH*2;Hv=Ac=LFe([xFe(6,Us)],Hv);const aB=[];class DFe extends J{constructor(e,t,i,n){super(),this._editors=e,this._diffModel=t,this._options=i,this._widget=n,this._selectedDiffs=Dt(this,s=>{const r=this._diffModel.read(s),a=r==null?void 0:r.diff.read(s);if(!a)return aB;const l=this._editors.modifiedSelections.read(s);if(l.every(g=>g.isEmpty()))return aB;const c=new ec(l.map(g=>Bt.fromRangeInclusive(g))),f=a.mappings.filter(g=>g.lineRangeMapping.innerChanges&&c.intersects(g.lineRangeMapping.modified)).map(g=>({mapping:g,rangeMappings:g.lineRangeMapping.innerChanges.filter(p=>l.some(_=>A.areIntersecting(p.modifiedRange,_)))}));return f.length===0||f.every(g=>g.rangeMappings.length===0)?aB:f}),this._register(gc((s,r)=>{if(!this._options.shouldRenderOldRevertArrows.read(s))return;const a=this._diffModel.read(s),l=a==null?void 0:a.diff.read(s);if(!a||!l||a.movedTextToCompare.read(s))return;const c=[],u=this._selectedDiffs.read(s),f=new Set(u.map(g=>g.mapping));if(u.length>0){const g=this._editors.modifiedSelections.read(s),p=r.add(new Xx(g[g.length-1].positionLineNumber,this._widget,u.flatMap(_=>_.rangeMappings),!0));this._editors.modified.addGlyphMarginWidget(p),c.push(p)}for(const g of l.mappings)if(!f.has(g)&&!g.lineRangeMapping.modified.isEmpty&&g.lineRangeMapping.innerChanges){const p=r.add(new Xx(g.lineRangeMapping.modified.startLineNumber,this._widget,g.lineRangeMapping,!1));this._editors.modified.addGlyphMarginWidget(p),c.push(p)}r.add(lt(()=>{for(const g of c)this._editors.modified.removeGlyphMarginWidget(g)}))}))}}class Xx extends J{getId(){return this._id}constructor(e,t,i,n){super(),this._lineNumber=e,this._widget=t,this._diffs=i,this._revertSelection=n,this._id=`revertButton${Xx.counter++}`,this._domNode=Ii("div.revertButton",{title:this._revertSelection?v("revertSelectedChanges","Revert Selected Changes"):v("revertChange","Revert Change")},[Tx(Ee.arrowRight)]).root,this._register(oe(this._domNode,ke.MOUSE_DOWN,s=>{s.button!==2&&(s.stopPropagation(),s.preventDefault())})),this._register(oe(this._domNode,ke.MOUSE_UP,s=>{s.stopPropagation(),s.preventDefault()})),this._register(oe(this._domNode,ke.CLICK,s=>{this._diffs instanceof Or?this._widget.revert(this._diffs):this._widget.revertRangeMappings(this._diffs),s.stopPropagation(),s.preventDefault()}))}getDomNode(){return this._domNode}getPosition(){return{lane:hh.Right,range:{startColumn:1,startLineNumber:this._lineNumber,endColumn:1,endLineNumber:this._lineNumber},zIndex:10001}}}Xx.counter=0;var kFe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},EJ=function(o,e){return function(t,i){e(t,i,o)}};let bW=class extends J{get onDidContentSizeChange(){return this._onDidContentSizeChange.event}constructor(e,t,i,n,s,r,a){super(),this.originalEditorElement=e,this.modifiedEditorElement=t,this._options=i,this._argCodeEditorWidgetOptions=n,this._createInnerEditor=s,this._instantiationService=r,this._keybindingService=a,this.original=this._register(this._createLeftHandSideEditor(this._options.editorOptions.get(),this._argCodeEditorWidgetOptions.originalEditor||{})),this.modified=this._register(this._createRightHandSideEditor(this._options.editorOptions.get(),this._argCodeEditorWidgetOptions.modifiedEditor||{})),this._onDidContentSizeChange=this._register(new Y),this.modifiedScrollTop=Gi(this.modified.onDidScrollChange,()=>this.modified.getScrollTop()),this.modifiedScrollHeight=Gi(this.modified.onDidScrollChange,()=>this.modified.getScrollHeight()),this.modifiedModel=Gi(this.modified.onDidChangeModel,()=>this.modified.getModel()),this.modifiedSelections=Gi(this.modified.onDidChangeCursorSelection,()=>{var l;return(l=this.modified.getSelections())!==null&&l!==void 0?l:[]}),this.modifiedCursor=VC({owner:this,equalityComparer:Z.equals},l=>{var c,u;return(u=(c=this.modifiedSelections.read(l)[0])===null||c===void 0?void 0:c.getPosition())!==null&&u!==void 0?u:new Z(1,1)}),this.originalCursor=Gi(this.original.onDidChangeCursorPosition,()=>{var l;return(l=this.original.getPosition())!==null&&l!==void 0?l:new Z(1,1)}),this._argCodeEditorWidgetOptions=null,this._register(nk({createEmptyChangeSummary:()=>({}),handleChange:(l,c)=>(l.didChange(i.editorOptions)&&Object.assign(c,l.change.changedOptions),!0)},(l,c)=>{i.editorOptions.read(l),this._options.renderSideBySide.read(l),this.modified.updateOptions(this._adjustOptionsForRightHandSide(l,c)),this.original.updateOptions(this._adjustOptionsForLeftHandSide(l,c))}))}_createLeftHandSideEditor(e,t){const i=this._adjustOptionsForLeftHandSide(void 0,e),n=this._constructInnerEditor(this._instantiationService,this.originalEditorElement,i,t);return n.setContextValue("isInDiffLeftEditor",!0),n}_createRightHandSideEditor(e,t){const i=this._adjustOptionsForRightHandSide(void 0,e),n=this._constructInnerEditor(this._instantiationService,this.modifiedEditorElement,i,t);return n.setContextValue("isInDiffRightEditor",!0),n}_constructInnerEditor(e,t,i,n){const s=this._createInnerEditor(e,t,i,n);return this._register(s.onDidContentSizeChange(r=>{const a=this.original.getContentWidth()+this.modified.getContentWidth()+Hv.ENTIRE_DIFF_OVERVIEW_WIDTH,l=Math.max(this.modified.getContentHeight(),this.original.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:l,contentWidth:a,contentHeightChanged:r.contentHeightChanged,contentWidthChanged:r.contentWidthChanged})})),s}_adjustOptionsForLeftHandSide(e,t){const i=this._adjustOptionsForSubEditor(t);return this._options.renderSideBySide.get()?(i.unicodeHighlight=this._options.editorOptions.get().unicodeHighlight||{},i.wordWrapOverride1=this._options.diffWordWrap.get()):(i.wordWrapOverride1="off",i.wordWrapOverride2="off",i.stickyScroll={enabled:!1},i.unicodeHighlight={nonBasicASCII:!1,ambiguousCharacters:!1,invisibleCharacters:!1}),i.glyphMargin=this._options.renderSideBySide.get(),t.originalAriaLabel&&(i.ariaLabel=t.originalAriaLabel),i.ariaLabel=this._updateAriaLabel(i.ariaLabel),i.readOnly=!this._options.originalEditable.get(),i.dropIntoEditor={enabled:!i.readOnly},i.extraEditorClassName="original-in-monaco-diff-editor",i}_adjustOptionsForRightHandSide(e,t){const i=this._adjustOptionsForSubEditor(t);return t.modifiedAriaLabel&&(i.ariaLabel=t.modifiedAriaLabel),i.ariaLabel=this._updateAriaLabel(i.ariaLabel),i.wordWrapOverride1=this._options.diffWordWrap.get(),i.revealHorizontalRightPadding=Jd.revealHorizontalRightPadding.defaultValue+Hv.ENTIRE_DIFF_OVERVIEW_WIDTH,i.scrollbar.verticalHasArrows=!1,i.extraEditorClassName="modified-in-monaco-diff-editor",i}_adjustOptionsForSubEditor(e){const t={...e,dimension:{height:0,width:0}};return t.inDiffEditor=!0,t.automaticLayout=!1,t.scrollbar={...t.scrollbar||{}},t.folding=!1,t.codeLens=this._options.diffCodeLens.get(),t.fixedOverflowWidgets=!0,t.minimap={...t.minimap||{}},t.minimap.enabled=!1,this._options.hideUnchangedRegions.get()?t.stickyScroll={enabled:!1}:t.stickyScroll=this._options.editorOptions.get().stickyScroll,t}_updateAriaLabel(e){var t;e||(e="");const i=v("diff-aria-navigation-tip"," use {0} to open the accessibility help.",(t=this._keybindingService.lookupKeybinding("editor.action.accessibilityHelp"))===null||t===void 0?void 0:t.getAriaLabel());return this._options.accessibilityVerbose.get()?e+i:e?e.replaceAll(i,""):""}};bW=kFe([EJ(5,ct),EJ(6,Bi)],bW);class EP extends J{constructor(){super(...arguments),this._id=++EP.idCounter,this._onDidDispose=this._register(new Y),this.onDidDispose=this._onDidDispose.event}getId(){return this.getEditorType()+":v2:"+this._id}getVisibleColumnFromPosition(e){return this._targetEditor.getVisibleColumnFromPosition(e)}getPosition(){return this._targetEditor.getPosition()}setPosition(e,t="api"){this._targetEditor.setPosition(e,t)}revealLine(e,t=0){this._targetEditor.revealLine(e,t)}revealLineInCenter(e,t=0){this._targetEditor.revealLineInCenter(e,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._targetEditor.revealLineInCenterIfOutsideViewport(e,t)}revealLineNearTop(e,t=0){this._targetEditor.revealLineNearTop(e,t)}revealPosition(e,t=0){this._targetEditor.revealPosition(e,t)}revealPositionInCenter(e,t=0){this._targetEditor.revealPositionInCenter(e,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._targetEditor.revealPositionInCenterIfOutsideViewport(e,t)}revealPositionNearTop(e,t=0){this._targetEditor.revealPositionNearTop(e,t)}getSelection(){return this._targetEditor.getSelection()}getSelections(){return this._targetEditor.getSelections()}setSelection(e,t="api"){this._targetEditor.setSelection(e,t)}setSelections(e,t="api"){this._targetEditor.setSelections(e,t)}revealLines(e,t,i=0){this._targetEditor.revealLines(e,t,i)}revealLinesInCenter(e,t,i=0){this._targetEditor.revealLinesInCenter(e,t,i)}revealLinesInCenterIfOutsideViewport(e,t,i=0){this._targetEditor.revealLinesInCenterIfOutsideViewport(e,t,i)}revealLinesNearTop(e,t,i=0){this._targetEditor.revealLinesNearTop(e,t,i)}revealRange(e,t=0,i=!1,n=!0){this._targetEditor.revealRange(e,t,i,n)}revealRangeInCenter(e,t=0){this._targetEditor.revealRangeInCenter(e,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._targetEditor.revealRangeInCenterIfOutsideViewport(e,t)}revealRangeNearTop(e,t=0){this._targetEditor.revealRangeNearTop(e,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._targetEditor.revealRangeNearTopIfOutsideViewport(e,t)}revealRangeAtTop(e,t=0){this._targetEditor.revealRangeAtTop(e,t)}getSupportedActions(){return this._targetEditor.getSupportedActions()}focus(){this._targetEditor.focus()}trigger(e,t,i){this._targetEditor.trigger(e,t,i)}createDecorationsCollection(e){return this._targetEditor.createDecorationsCollection(e)}changeDecorations(e){return this._targetEditor.changeDecorations(e)}}EP.idCounter=0;var EFe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},IFe=function(o,e){return function(t,i){e(t,i,o)}};let CW=class{get editorOptions(){return this._options}constructor(e,t){this._accessibilityService=t,this._diffEditorWidth=ni(this,0),this._screenReaderMode=Gi(this._accessibilityService.onDidChangeScreenReaderOptimized,()=>this._accessibilityService.isScreenReaderOptimized()),this.couldShowInlineViewBecauseOfSize=Dt(this,n=>this._options.read(n).renderSideBySide&&this._diffEditorWidth.read(n)<=this._options.read(n).renderSideBySideInlineBreakpoint),this.renderOverviewRuler=Dt(this,n=>this._options.read(n).renderOverviewRuler),this.renderSideBySide=Dt(this,n=>this._options.read(n).renderSideBySide&&!(this._options.read(n).useInlineViewWhenSpaceIsLimited&&this.couldShowInlineViewBecauseOfSize.read(n)&&!this._screenReaderMode.read(n))),this.readOnly=Dt(this,n=>this._options.read(n).readOnly),this.shouldRenderOldRevertArrows=Dt(this,n=>!(!this._options.read(n).renderMarginRevertIcon||!this.renderSideBySide.read(n)||this.readOnly.read(n)||this.shouldRenderGutterMenu.read(n))),this.shouldRenderGutterMenu=Dt(this,n=>this._options.read(n).renderGutterMenu),this.renderIndicators=Dt(this,n=>this._options.read(n).renderIndicators),this.enableSplitViewResizing=Dt(this,n=>this._options.read(n).enableSplitViewResizing),this.splitViewDefaultRatio=Dt(this,n=>this._options.read(n).splitViewDefaultRatio),this.ignoreTrimWhitespace=Dt(this,n=>this._options.read(n).ignoreTrimWhitespace),this.maxComputationTimeMs=Dt(this,n=>this._options.read(n).maxComputationTime),this.showMoves=Dt(this,n=>this._options.read(n).experimental.showMoves&&this.renderSideBySide.read(n)),this.isInEmbeddedEditor=Dt(this,n=>this._options.read(n).isInEmbeddedEditor),this.diffWordWrap=Dt(this,n=>this._options.read(n).diffWordWrap),this.originalEditable=Dt(this,n=>this._options.read(n).originalEditable),this.diffCodeLens=Dt(this,n=>this._options.read(n).diffCodeLens),this.accessibilityVerbose=Dt(this,n=>this._options.read(n).accessibilityVerbose),this.diffAlgorithm=Dt(this,n=>this._options.read(n).diffAlgorithm),this.showEmptyDecorations=Dt(this,n=>this._options.read(n).experimental.showEmptyDecorations),this.onlyShowAccessibleDiffViewer=Dt(this,n=>this._options.read(n).onlyShowAccessibleDiffViewer),this.hideUnchangedRegions=Dt(this,n=>this._options.read(n).hideUnchangedRegions.enabled),this.hideUnchangedRegionsRevealLineCount=Dt(this,n=>this._options.read(n).hideUnchangedRegions.revealLineCount),this.hideUnchangedRegionsContextLineCount=Dt(this,n=>this._options.read(n).hideUnchangedRegions.contextLineCount),this.hideUnchangedRegionsMinimumLineCount=Dt(this,n=>this._options.read(n).hideUnchangedRegions.minimumLineCount);const i={...e,...IJ(e,Uo)};this._options=ni(this,i)}updateOptions(e){const t=IJ(e,this._options.get()),i={...this._options.get(),...e,...t};this._options.set(i,void 0,{changedOptions:e})}setWidth(e){this._diffEditorWidth.set(e,void 0)}};CW=EFe([IFe(1,mc)],CW);function IJ(o,e){var t,i,n,s,r,a,l,c;return{enableSplitViewResizing:st(o.enableSplitViewResizing,e.enableSplitViewResizing),splitViewDefaultRatio:Kbe(o.splitViewDefaultRatio,.5,.1,.9),renderSideBySide:st(o.renderSideBySide,e.renderSideBySide),renderMarginRevertIcon:st(o.renderMarginRevertIcon,e.renderMarginRevertIcon),maxComputationTime:F_(o.maxComputationTime,e.maxComputationTime,0,1073741824),maxFileSize:F_(o.maxFileSize,e.maxFileSize,0,1073741824),ignoreTrimWhitespace:st(o.ignoreTrimWhitespace,e.ignoreTrimWhitespace),renderIndicators:st(o.renderIndicators,e.renderIndicators),originalEditable:st(o.originalEditable,e.originalEditable),diffCodeLens:st(o.diffCodeLens,e.diffCodeLens),renderOverviewRuler:st(o.renderOverviewRuler,e.renderOverviewRuler),diffWordWrap:is(o.diffWordWrap,e.diffWordWrap,["off","on","inherit"]),diffAlgorithm:is(o.diffAlgorithm,e.diffAlgorithm,["legacy","advanced"],{smart:"legacy",experimental:"advanced"}),accessibilityVerbose:st(o.accessibilityVerbose,e.accessibilityVerbose),experimental:{showMoves:st((t=o.experimental)===null||t===void 0?void 0:t.showMoves,e.experimental.showMoves),showEmptyDecorations:st((i=o.experimental)===null||i===void 0?void 0:i.showEmptyDecorations,e.experimental.showEmptyDecorations)},hideUnchangedRegions:{enabled:st((s=(n=o.hideUnchangedRegions)===null||n===void 0?void 0:n.enabled)!==null&&s!==void 0?s:(r=o.experimental)===null||r===void 0?void 0:r.collapseUnchangedRegions,e.hideUnchangedRegions.enabled),contextLineCount:F_((a=o.hideUnchangedRegions)===null||a===void 0?void 0:a.contextLineCount,e.hideUnchangedRegions.contextLineCount,0,1073741824),minimumLineCount:F_((l=o.hideUnchangedRegions)===null||l===void 0?void 0:l.minimumLineCount,e.hideUnchangedRegions.minimumLineCount,0,1073741824),revealLineCount:F_((c=o.hideUnchangedRegions)===null||c===void 0?void 0:c.revealLineCount,e.hideUnchangedRegions.revealLineCount,0,1073741824)},isInEmbeddedEditor:st(o.isInEmbeddedEditor,e.isInEmbeddedEditor),onlyShowAccessibleDiffViewer:st(o.onlyShowAccessibleDiffViewer,e.onlyShowAccessibleDiffViewer),renderSideBySideInlineBreakpoint:F_(o.renderSideBySideInlineBreakpoint,e.renderSideBySideInlineBreakpoint,0,1073741824),useInlineViewWhenSpaceIsLimited:st(o.useInlineViewWhenSpaceIsLimited,e.useInlineViewWhenSpaceIsLimited),renderGutterMenu:st(o.renderGutterMenu,e.renderGutterMenu)}}class TFe extends J{constructor(e,t,i){super(),this._editor=e,this._domNode=t,this.itemProvider=i,this.scrollTop=Gi(this._editor.onDidScrollChange,r=>this._editor.getScrollTop()),this.isScrollTopZero=this.scrollTop.map(r=>r===0),this.modelAttached=Gi(this._editor.onDidChangeModel,r=>this._editor.hasModel()),this.editorOnDidChangeViewZones=Go("onDidChangeViewZones",this._editor.onDidChangeViewZones),this.editorOnDidContentSizeChange=Go("onDidContentSizeChange",this._editor.onDidContentSizeChange),this.domNodeSizeChanged=dP("domNodeSizeChanged"),this.views=new Map,this._domNode.className="gutter monaco-editor";const n=this._domNode.appendChild(Ii("div.scroll-decoration",{role:"presentation",ariaHidden:"true",style:{width:"100%"}}).root),s=new ResizeObserver(()=>{qi(r=>{this.domNodeSizeChanged.trigger(r)})});s.observe(this._domNode),this._register(lt(()=>s.disconnect())),this._register(zt(r=>{n.className=this.isScrollTopZero.read(r)?"":"scroll-decoration"})),this._register(zt(r=>this.render(r)))}dispose(){super.dispose(),_o(this._domNode)}render(e){if(!this.modelAttached.read(e))return;this.domNodeSizeChanged.read(e),this.editorOnDidChangeViewZones.read(e),this.editorOnDidContentSizeChange.read(e);const t=this.scrollTop.read(e),i=this._editor.getVisibleRanges(),n=new Set(this.views.keys()),s=Wt.ofStartAndLength(0,this._domNode.clientHeight);if(!s.isEmpty)for(const r of i){const a=new Bt(r.startLineNumber,r.endLineNumber+1),l=this.itemProvider.getIntersectingGutterItems(a,e);qi(c=>{for(const u of l){if(!u.range.intersect(a))continue;n.delete(u.id);let f=this.views.get(u.id);if(f)f.item.set(u,c);else{const b=document.createElement("div");this._domNode.appendChild(b);const y=ni("item",u),S=this.itemProvider.createView(y,b);f=new NFe(y,S,b),this.views.set(u.id,f)}const g=u.range.startLineNumber<=this._editor.getModel().getLineCount()?this._editor.getTopForLineNumber(u.range.startLineNumber,!0)-t:this._editor.getBottomForLineNumber(u.range.startLineNumber-1,!1)-t,_=(u.range.isEmpty?g:this._editor.getBottomForLineNumber(u.range.endLineNumberExclusive-1,!0)-t)-g;f.domNode.style.top=`${g}px`,f.domNode.style.height=`${_}px`,f.gutterItemView.layout(Wt.ofStartAndLength(g,_),s)}})}for(const r of n){const a=this.views.get(r);a.gutterItemView.dispose(),this._domNode.removeChild(a.domNode),this.views.delete(r)}}}class NFe{constructor(e,t,i){this.item=e,this.gutterItemView=t,this.domNode=i}}class Dre extends Rv{constructor(e){super(),this._getContext=e}runAction(e,t){const i=this._getContext();return super.runAction(e,i)}}class RFe{constructor(e){this.text=e,this.lineStartOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let t=0;t<e.length;t++)e.charAt(t)===`
`&&this.lineStartOffsetByLineIdx.push(t+1)}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}getOffsetRange(e){return new Wt(this.getOffset(e.getStartPosition()),this.getOffset(e.getEndPosition()))}get textLength(){const e=this.lineStartOffsetByLineIdx.length-1;return new Gc(e,this.text.length-this.lineStartOffsetByLineIdx[e])}}class zz{constructor(e){this.edits=e,Mv(()=>eH(e,(t,i)=>t.range.getEndPosition().isBeforeOrEqual(i.range.getStartPosition())))}apply(e){let t="",i=new Z(1,1);for(const s of this.edits){const r=s.range,a=r.getStartPosition(),l=r.getEndPosition(),c=TJ(i,a);c.isEmpty()||(t+=e.getValueOfRange(c)),t+=s.text,i=l}const n=TJ(i,e.endPositionExclusive);return n.isEmpty()||(t+=e.getValueOfRange(n)),t}applyToString(e){const t=new MFe(e);return this.apply(t)}getNewRanges(){const e=[];let t=0,i=0,n=0;for(const s of this.edits){const r=Gc.ofText(s.text),a=Z.lift({lineNumber:s.range.startLineNumber+i,column:s.range.startColumn+(s.range.startLineNumber===t?n:0)}),l=r.createRange(a);e.push(l),i=l.endLineNumber-s.range.endLineNumber,n=l.endColumn-s.range.endColumn,t=s.range.endLineNumber}return e}}class og{constructor(e,t){this.range=e,this.text=t}}function TJ(o,e){if(!o.isBeforeOrEqual(e))throw new pn("start must be before end");return new A(o.lineNumber,o.column,e.lineNumber,e.column)}class kre{get endPositionExclusive(){return this.length.addToPosition(new Z(1,1))}}class MFe extends kre{constructor(e){super(),this.value=e,this._t=new RFe(this.value)}getValueOfRange(e){return this._t.getOffsetRange(e).substring(this.value)}get length(){return this._t.textLength}}class AFe extends kre{constructor(e){super(),this._textModel=e}getValueOfRange(e){return this._textModel.getValueInRange(e)}get length(){const e=this._textModel.getLineCount(),t=this._textModel.getLineLength(e);return new Gc(e-1,t)}}class PFe extends J{constructor(e,t,i={orientation:0}){var n;super(),this.submenuActionViewItems=[],this.hasSecondaryActions=!1,this._onDidChangeDropdownVisibility=this._register(new q0e),this.onDidChangeDropdownVisibility=this._onDidChangeDropdownVisibility.event,this.disposables=this._register(new he),i.hoverDelegate=(n=i.hoverDelegate)!==null&&n!==void 0?n:this._register(y1()),this.options=i,this.lookupKeybindings=typeof this.options.getKeyBinding=="function",this.toggleMenuAction=this._register(new Jx(()=>{var s;return(s=this.toggleMenuActionViewItem)===null||s===void 0?void 0:s.show()},i.toggleMenuTitle)),this.element=document.createElement("div"),this.element.className="monaco-toolbar",e.appendChild(this.element),this.actionBar=this._register(new pc(this.element,{orientation:i.orientation,ariaLabel:i.ariaLabel,actionRunner:i.actionRunner,allowContextMenu:i.allowContextMenu,highlightToggledItems:i.highlightToggledItems,hoverDelegate:i.hoverDelegate,actionViewItemProvider:(s,r)=>{var a;if(s.id===Jx.ID)return this.toggleMenuActionViewItem=new nM(s,s.menuActions,t,{actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,keybindingProvider:this.options.getKeyBinding,classNames:pt.asClassNameArray((a=i.moreIcon)!==null&&a!==void 0?a:Ee.toolBarMore),anchorAlignmentProvider:this.options.anchorAlignmentProvider,menuAsChild:!!this.options.renderDropdownAsChildElement,skipTelemetry:this.options.skipTelemetry,isMenu:!0,hoverDelegate:this.options.hoverDelegate}),this.toggleMenuActionViewItem.setActionContext(this.actionBar.context),this.disposables.add(this._onDidChangeDropdownVisibility.add(this.toggleMenuActionViewItem.onDidChangeVisibility)),this.toggleMenuActionViewItem;if(i.actionViewItemProvider){const l=i.actionViewItemProvider(s,r);if(l)return l}if(s instanceof n1){const l=new nM(s,s.actions,t,{actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,keybindingProvider:this.options.getKeyBinding,classNames:s.class,anchorAlignmentProvider:this.options.anchorAlignmentProvider,menuAsChild:!!this.options.renderDropdownAsChildElement,skipTelemetry:this.options.skipTelemetry,hoverDelegate:this.options.hoverDelegate});return l.setActionContext(this.actionBar.context),this.submenuActionViewItems.push(l),this.disposables.add(this._onDidChangeDropdownVisibility.add(l.onDidChangeVisibility)),l}}}))}set actionRunner(e){this.actionBar.actionRunner=e}get actionRunner(){return this.actionBar.actionRunner}getElement(){return this.element}getItemAction(e){return this.actionBar.getAction(e)}setActions(e,t){this.clear();const i=e?e.slice(0):[];this.hasSecondaryActions=!!(t&&t.length>0),this.hasSecondaryActions&&t&&(this.toggleMenuAction.menuActions=t.slice(0),i.push(this.toggleMenuAction)),i.forEach(n=>{this.actionBar.push(n,{icon:!0,label:!1,keybinding:this.getKeybindingLabel(n)})})}getKeybindingLabel(e){var t,i,n;const s=this.lookupKeybindings?(i=(t=this.options).getKeyBinding)===null||i===void 0?void 0:i.call(t,e):void 0;return(n=s==null?void 0:s.getLabel())!==null&&n!==void 0?n:void 0}clear(){this.submenuActionViewItems=[],this.disposables.clear(),this.actionBar.clear()}dispose(){this.clear(),this.disposables.dispose(),super.dispose()}}class Jx extends za{constructor(e,t){t=t||v("moreActions","More Actions..."),super(Jx.ID,t,void 0,!0),this._menuActions=[],this.toggleDropdownMenu=e}async run(){this.toggleDropdownMenu()}get menuActions(){return this._menuActions}set menuActions(e){this._menuActions=e}}Jx.ID="toolbar.toggle.more";var Ere=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Gu=function(o,e){return function(t,i){e(t,i,o)}};let eD=class extends PFe{constructor(e,t,i,n,s,r,a){super(e,s,{getKeyBinding:c=>{var u;return(u=r.lookupKeybinding(c.id))!==null&&u!==void 0?u:void 0},...t,allowContextMenu:!0,skipTelemetry:typeof(t==null?void 0:t.telemetrySource)=="string"}),this._options=t,this._menuService=i,this._contextKeyService=n,this._contextMenuService=s,this._sessionDisposables=this._store.add(new he);const l=t==null?void 0:t.telemetrySource;l&&this._store.add(this.actionBar.onDidRun(c=>a.publicLog2("workbenchActionExecuted",{id:c.action.id,from:l})))}setActions(e,t=[],i){var n,s,r;this._sessionDisposables.clear();const a=e.slice(),l=t.slice(),c=[];let u=0;const f=[];let g=!1;if(((n=this._options)===null||n===void 0?void 0:n.hiddenItemStrategy)!==-1)for(let p=0;p<a.length;p++){const _=a[p];!(_ instanceof Dl)&&!(_ instanceof ox)||_.hideActions&&(c.push(_.hideActions.toggle),_.hideActions.toggle.checked&&u++,_.hideActions.isHidden&&(g=!0,a[p]=void 0,((s=this._options)===null||s===void 0?void 0:s.hiddenItemStrategy)!==0&&(f[p]=_)))}if(((r=this._options)===null||r===void 0?void 0:r.overflowBehavior)!==void 0){const p=nPe(new Set(this._options.overflowBehavior.exempted),ii.map(a,y=>y==null?void 0:y.id)),_=this._options.overflowBehavior.maxItems-p.size;let b=0;for(let y=0;y<a.length;y++){const S=a[y];S&&(b++,!p.has(S.id)&&b>=_&&(a[y]=void 0,f[y]=S))}}oY(a),oY(f),super.setActions(a,Os.join(f,l)),c.length>0&&this._sessionDisposables.add(oe(this.getElement(),"contextmenu",p=>{var _,b,y,S,L;const x=new Wc(ft(this.getElement()),p),D=this.getItemAction(x.target);if(!D)return;x.preventDefault(),x.stopPropagation();let E=!1;if(u===1&&((_=this._options)===null||_===void 0?void 0:_.hiddenItemStrategy)===0){E=!0;for(let F=0;F<c.length;F++)if(c[F].checked){c[F]=SC({id:D.id,label:D.label,checked:!0,enabled:!1,run(){}});break}}let N;if(!E&&(D instanceof Dl||D instanceof ox)){if(!D.hideActions)return;N=D.hideActions.hide}else N=SC({id:"label",label:v("hide","Hide"),enabled:!1,run(){}});const M=Os.join([N],c);!((b=this._options)===null||b===void 0)&&b.resetMenu&&!i&&(i=[this._options.resetMenu]),g&&i&&(M.push(new Os),M.push(SC({id:"resetThisMenu",label:v("resetThisMenu","Reset Menu"),run:()=>this._menuService.resetHiddenStates(i)}))),this._contextMenuService.showContextMenu({getAnchor:()=>x,getActions:()=>M,menuId:(y=this._options)===null||y===void 0?void 0:y.contextMenu,menuActionOptions:{renderShortTitle:!0,...(S=this._options)===null||S===void 0?void 0:S.menuOptions},skipTelemetry:typeof((L=this._options)===null||L===void 0?void 0:L.telemetrySource)=="string",contextKeyService:this._contextKeyService})}))}};eD=Ere([Gu(2,Nl),Gu(3,bt),Gu(4,Ya),Gu(5,Bi),Gu(6,pr)],eD);let NM=class extends eD{constructor(e,t,i,n,s,r,a,l){super(e,{resetMenu:t,...i},n,s,r,a,l),this._onDidChangeMenuItems=this._store.add(new Y),this.onDidChangeMenuItems=this._onDidChangeMenuItems.event;const c=this._store.add(n.createMenu(t,s,{emitEventsForSubmenuChanges:!0})),u=()=>{var f,g,p;const _=[],b=[];fP(c,i==null?void 0:i.menuOptions,{primary:_,secondary:b},(f=i==null?void 0:i.toolbarOptions)===null||f===void 0?void 0:f.primaryGroup,(g=i==null?void 0:i.toolbarOptions)===null||g===void 0?void 0:g.shouldInlineSubmenu,(p=i==null?void 0:i.toolbarOptions)===null||p===void 0?void 0:p.useSeparatorsInPrimaryActions),e.classList.toggle("has-no-actions",_.length===0&&b.length===0),super.setActions(_,b)};this._store.add(c.onDidChange(()=>{u(),this._onDidChangeMenuItems.fire(this)})),u()}setActions(){throw new pn("This toolbar is populated from a menu.")}};NM=Ere([Gu(3,Nl),Gu(4,bt),Gu(5,Ya),Gu(6,Bi),Gu(7,pr)],NM);var Ire=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},VN=function(o,e){return function(t,i){e(t,i,o)}};const lB=[],NJ=35;let wW=class extends J{constructor(e,t,i,n,s,r){super(),this._diffModel=t,this._editors=i,this._instantiationService=n,this._contextKeyService=s,this._menuService=r,this._menu=this._register(this._menuService.createMenu(P.DiffEditorHunkToolbar,this._contextKeyService)),this._actions=Gi(this._menu.onDidChange,()=>this._menu.getActions()),this._hasActions=this._actions.map(a=>a.length>0),this.width=Dt(this,a=>this._hasActions.read(a)?NJ:0),this.elements=Ii("div.gutter@gutter",{style:{position:"absolute",height:"100%",width:NJ+"px"}},[]),this._currentDiff=Dt(this,a=>{var l;const c=this._diffModel.read(a);if(!c)return;const u=(l=c.diff.read(a))===null||l===void 0?void 0:l.mappings,f=this._editors.modifiedCursor.read(a);if(f)return u==null?void 0:u.find(g=>g.lineRangeMapping.modified.contains(f.lineNumber))}),this._selectedDiffs=Dt(this,a=>{const l=this._diffModel.read(a),c=l==null?void 0:l.diff.read(a);if(!c)return lB;const u=this._editors.modifiedSelections.read(a);if(u.every(_=>_.isEmpty()))return lB;const f=new ec(u.map(_=>Bt.fromRangeInclusive(_))),p=c.mappings.filter(_=>_.lineRangeMapping.innerChanges&&f.intersects(_.lineRangeMapping.modified)).map(_=>({mapping:_,rangeMappings:_.lineRangeMapping.innerChanges.filter(b=>u.some(y=>A.areIntersecting(b.modifiedRange,y)))}));return p.length===0||p.every(_=>_.rangeMappings.length===0)?lB:p}),this._register(j2e(e,this.elements.root)),this._register(oe(this.elements.root,"click",()=>{this._editors.modified.focus()})),this._register(Zf(this.elements.root,{display:this._hasActions.map(a=>a?"block":"none")})),this._register(new TFe(this._editors.modified,this.elements.root,{getIntersectingGutterItems:(a,l)=>{const c=this._diffModel.read(l);if(!c)return[];const u=c.diff.read(l);if(!u)return[];const f=this._selectedDiffs.read(l);if(f.length>0){const p=Sl.fromRangeMappings(f.flatMap(_=>_.rangeMappings));return[new RJ(p,!0,P.DiffEditorSelectionToolbar,void 0,c.model.original.uri,c.model.modified.uri)]}const g=this._currentDiff.read(l);return u.mappings.map(p=>new RJ(p.lineRangeMapping.withInnerChangesFromLineRanges(),p.lineRangeMapping===(g==null?void 0:g.lineRangeMapping),P.DiffEditorHunkToolbar,void 0,c.model.original.uri,c.model.modified.uri))},createView:(a,l)=>this._instantiationService.createInstance(yW,a,l,this)})),this._register(oe(this.elements.gutter,ke.MOUSE_WHEEL,a=>{this._editors.modified.getOption(103).handleMouseWheel&&this._editors.modified.delegateScrollFromMouseWheelEvent(a)},{passive:!1}))}computeStagedValue(e){var t;const i=(t=e.innerChanges)!==null&&t!==void 0?t:[];return new zz(i.map(r=>new og(r.originalRange,this._editors.modifiedModel.get().getValueInRange(r.modifiedRange)))).apply(new AFe(this._editors.original.getModel()))}layout(e){this.elements.gutter.style.left=e+"px"}};wW=Ire([VN(3,ct),VN(4,bt),VN(5,Nl)],wW);class RJ{constructor(e,t,i,n,s,r){this.mapping=e,this.showAlways=t,this.menuId=i,this.rangeOverride=n,this.originalUri=s,this.modifiedUri=r}get id(){return this.mapping.modified.toString()}get range(){var e;return(e=this.rangeOverride)!==null&&e!==void 0?e:this.mapping.modified}}let yW=class extends J{constructor(e,t,i,n){super(),this._item=e,this._elements=Ii("div.gutterItem",{style:{height:"20px",width:"34px"}},[Ii("div.background@background",{},[]),Ii("div.buttons@buttons",{},[])]),this._showAlways=this._item.map(this,r=>r.showAlways),this._menuId=this._item.map(this,r=>r.menuId),this._isSmall=ni(this,!1),this._lastItemRange=void 0,this._lastViewRange=void 0;const s=this._register(n.createInstance(Ix,"element",!0,{position:{hoverPosition:1}}));this._register(iL(t,this._elements.root)),this._register(zt(r=>{const a=this._showAlways.read(r);this._elements.root.classList.toggle("noTransition",!0),this._elements.root.classList.toggle("showAlways",a),setTimeout(()=>{this._elements.root.classList.toggle("noTransition",!1)},0)})),this._register(gc((r,a)=>{this._elements.buttons.replaceChildren();const l=a.add(n.createInstance(NM,this._elements.buttons,this._menuId.read(r),{orientation:1,hoverDelegate:s,toolbarOptions:{primaryGroup:c=>c.startsWith("primary")},overflowBehavior:{maxItems:this._isSmall.read(r)?1:3},hiddenItemStrategy:0,actionRunner:new Dre(()=>{const c=this._item.get(),u=c.mapping;return{mapping:u,originalWithModifiedChanges:i.computeStagedValue(u),originalUri:c.originalUri,modifiedUri:c.modifiedUri}}),menuOptions:{shouldForwardArgs:!0}}));a.add(l.onDidChangeMenuItems(()=>{this._lastItemRange&&this.layout(this._lastItemRange,this._lastViewRange)}))}))}layout(e,t){this._lastItemRange=e,this._lastViewRange=t;let i=this._elements.buttons.clientHeight;this._isSmall.set(this._item.get().mapping.original.startLineNumber===1&&e.length<30,void 0),i=this._elements.buttons.clientHeight,this._elements.root.style.top=e.start+"px",this._elements.root.style.height=e.length+"px";const n=e.length/2-i/2,s=i;let r=e.start+n;const a=Wt.tryCreate(s,t.endExclusive-s-i),l=Wt.tryCreate(e.start+s,e.endExclusive-i-s);l&&a&&l.start<l.endExclusive&&(r=a.clip(r),r=l.clip(r)),this._elements.buttons.style.top=`${r-e.start}px`}};yW=Ire([VN(3,ct)],yW);var OFe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},ES=function(o,e){return function(t,i){e(t,i,o)}};let rg=class extends EP{get onDidContentSizeChange(){return this._editors.onDidContentSizeChange}constructor(e,t,i,n,s,r,a,l){var c;super(),this._domElement=e,this._parentContextKeyService=n,this._parentInstantiationService=s,this._accessibilitySignalService=a,this._editorProgressService=l,this.elements=Ii("div.monaco-diff-editor.side-by-side",{style:{position:"relative",height:"100%"}},[Ii("div.noModificationsOverlay@overlay",{style:{position:"absolute",height:"100%",visibility:"hidden"}},[ye("span",{},"No Changes")]),Ii("div.editor.original@original",{style:{position:"absolute",height:"100%"}}),Ii("div.editor.modified@modified",{style:{position:"absolute",height:"100%"}}),Ii("div.accessibleDiffViewer@accessibleDiffViewer",{style:{position:"absolute",height:"100%"}})]),this._diffModel=ni(this,void 0),this._shouldDisposeDiffModel=!1,this.onDidChangeModel=Ie.fromObservableLight(this._diffModel),this._contextKeyService=this._register(this._parentContextKeyService.createScoped(this._domElement)),this._instantiationService=this._parentInstantiationService.createChild(new QD([bt,this._contextKeyService])),this._boundarySashes=ni(this,void 0),this._accessibleDiffViewerShouldBeVisible=ni(this,!1),this._accessibleDiffViewerVisible=Dt(this,D=>this._options.onlyShowAccessibleDiffViewer.read(D)?!0:this._accessibleDiffViewerShouldBeVisible.read(D)),this._movedBlocksLinesPart=ni(this,void 0),this._layoutInfo=Dt(this,D=>{var E,N,M,F,H;const Q=this._rootSizeObserver.width.read(D),K=this._rootSizeObserver.height.read(D),j=this._sash.read(D),q=this._gutter.read(D),se=(E=q==null?void 0:q.width.read(D))!==null&&E!==void 0?E:0,fe=(M=(N=this._overviewRulerPart.read(D))===null||N===void 0?void 0:N.width)!==null&&M!==void 0?M:0;let Ae,Ne,Le,be,ze;if(!!j){const qe=j.sashLeft.read(D),Fe=(H=(F=this._movedBlocksLinesPart.read(D))===null||F===void 0?void 0:F.width.read(D))!==null&&H!==void 0?H:0;Ae=0,Ne=qe-se-Fe,ze=qe-se,Le=qe,be=Q-Le-fe}else ze=0,Ae=se,Ne=Math.max(5,this._editors.original.getLayoutInfo().decorationsLeft),Le=se+Ne,be=Q-Le-fe;return this.elements.original.style.left=Ae+"px",this.elements.original.style.width=Ne+"px",this._editors.original.layout({width:Ne,height:K},!0),q==null||q.layout(ze),this.elements.modified.style.left=Le+"px",this.elements.modified.style.width=be+"px",this._editors.modified.layout({width:be,height:K},!0),{modifiedEditor:this._editors.modified.getLayoutInfo(),originalEditor:this._editors.original.getLayoutInfo()}}),this._diffValue=this._diffModel.map((D,E)=>D==null?void 0:D.diff.read(E)),this.onDidUpdateDiff=Ie.fromObservableLight(this._diffValue),r.willCreateDiffEditor(),this._contextKeyService.createKey("isInDiffEditor",!0),this._domElement.appendChild(this.elements.root),this._register(lt(()=>this._domElement.removeChild(this.elements.root))),this._rootSizeObserver=this._register(new Cre(this.elements.root,t.dimension)),this._rootSizeObserver.setAutomaticLayout((c=t.automaticLayout)!==null&&c!==void 0?c:!1),this._options=this._instantiationService.createInstance(CW,t),this._register(zt(D=>{this._options.setWidth(this._rootSizeObserver.width.read(D))})),this._contextKeyService.createKey(W.isEmbeddedDiffEditor.key,!1),this._register(tf(W.isEmbeddedDiffEditor,this._contextKeyService,D=>this._options.isInEmbeddedEditor.read(D))),this._register(tf(W.comparingMovedCode,this._contextKeyService,D=>{var E;return!!(!((E=this._diffModel.read(D))===null||E===void 0)&&E.movedTextToCompare.read(D))})),this._register(tf(W.diffEditorRenderSideBySideInlineBreakpointReached,this._contextKeyService,D=>this._options.couldShowInlineViewBecauseOfSize.read(D))),this._register(tf(W.diffEditorInlineMode,this._contextKeyService,D=>!this._options.renderSideBySide.read(D))),this._register(tf(W.hasChanges,this._contextKeyService,D=>{var E,N,M;return((M=(N=(E=this._diffModel.read(D))===null||E===void 0?void 0:E.diff.read(D))===null||N===void 0?void 0:N.mappings.length)!==null&&M!==void 0?M:0)>0})),this._editors=this._register(this._instantiationService.createInstance(bW,this.elements.original,this.elements.modified,this._options,i,(D,E,N,M)=>this._createInnerEditor(D,E,N,M))),this._register(tf(W.diffEditorOriginalWritable,this._contextKeyService,D=>this._options.originalEditable.read(D))),this._register(tf(W.diffEditorModifiedWritable,this._contextKeyService,D=>!this._options.readOnly.read(D))),this._register(tf(W.diffEditorOriginalUri,this._contextKeyService,D=>{var E,N;return(N=(E=this._diffModel.read(D))===null||E===void 0?void 0:E.model.original.uri.toString())!==null&&N!==void 0?N:""})),this._register(tf(W.diffEditorModifiedUri,this._contextKeyService,D=>{var E,N;return(N=(E=this._diffModel.read(D))===null||E===void 0?void 0:E.model.modified.uri.toString())!==null&&N!==void 0?N:""})),this._overviewRulerPart=lf(this,D=>this._options.renderOverviewRuler.read(D)?this._instantiationService.createInstance(Oc(Hv,D),this._editors,this.elements.root,this._diffModel,this._rootSizeObserver.width,this._rootSizeObserver.height,this._layoutInfo.map(E=>E.modifiedEditor)):void 0).recomputeInitiallyAndOnChange(this._store),this._sash=lf(this,D=>{const E=this._options.renderSideBySide.read(D);return this.elements.root.classList.toggle("side-by-side",E),E?new fFe(this._options,this.elements.root,{height:this._rootSizeObserver.height,width:this._rootSizeObserver.width.map((N,M)=>{var F,H;return N-((H=(F=this._overviewRulerPart.read(M))===null||F===void 0?void 0:F.width)!==null&&H!==void 0?H:0)})},this._boundarySashes):void 0}).recomputeInitiallyAndOnChange(this._store);const u=lf(this,D=>this._instantiationService.createInstance(Oc(Qx,D),this._editors,this._diffModel,this._options)).recomputeInitiallyAndOnChange(this._store);lf(this,D=>this._instantiationService.createInstance(Oc(hFe,D),this._editors,this._diffModel,this._options,this)).recomputeInitiallyAndOnChange(this._store);const f=new Set,g=new Set;let p=!1;const _=lf(this,D=>this._instantiationService.createInstance(Oc(_W,D),ft(this._domElement),this._editors,this._diffModel,this._options,this,()=>p||u.get().isUpdatingHiddenAreas,f,g)).recomputeInitiallyAndOnChange(this._store),b=Dt(this,D=>{const E=_.read(D).viewZones.read(D).orig,N=u.read(D).viewZones.read(D).origViewZones;return E.concat(N)}),y=Dt(this,D=>{const E=_.read(D).viewZones.read(D).mod,N=u.read(D).viewZones.read(D).modViewZones;return E.concat(N)});this._register(IM(this._editors.original,b,D=>{p=D},f));let S;this._register(IM(this._editors.modified,y,D=>{p=D,p?S=Xd.capture(this._editors.modified):(S==null||S.restore(this._editors.modified),S=void 0)},g)),this._accessibleDiffViewer=lf(this,D=>this._instantiationService.createInstance(Oc(Bp,D),this.elements.accessibleDiffViewer,this._accessibleDiffViewerVisible,(E,N)=>this._accessibleDiffViewerShouldBeVisible.set(E,N),this._options.onlyShowAccessibleDiffViewer.map(E=>!E),this._rootSizeObserver.width,this._rootSizeObserver.height,this._diffModel.map((E,N)=>{var M;return(M=E==null?void 0:E.diff.read(N))===null||M===void 0?void 0:M.mappings.map(F=>F.lineRangeMapping)}),new rFe(this._editors))).recomputeInitiallyAndOnChange(this._store);const L=this._accessibleDiffViewerVisible.map(D=>D?"hidden":"visible");this._register(Zf(this.elements.modified,{visibility:L})),this._register(Zf(this.elements.original,{visibility:L})),this._createDiffEditorContributions(),r.addDiffEditor(this),this._gutter=lf(this,D=>this._options.shouldRenderGutterMenu.read(D)?this._instantiationService.createInstance(Oc(wW,D),this.elements.root,this._diffModel,this._editors):void 0),this._register(sk(this._layoutInfo)),lf(this,D=>new(Oc(Jp,D))(this.elements.root,this._diffModel,this._layoutInfo.map(E=>E.originalEditor),this._layoutInfo.map(E=>E.modifiedEditor),this._editors)).recomputeInitiallyAndOnChange(this._store,D=>{this._movedBlocksLinesPart.set(D,void 0)}),this._register(Zf(this.elements.overlay,{width:this._layoutInfo.map((D,E)=>D.originalEditor.width+(this._options.renderSideBySide.read(E)?0:D.modifiedEditor.width)),visibility:Dt(D=>{var E,N;return this._options.hideUnchangedRegions.read(D)&&((N=(E=this._diffModel.read(D))===null||E===void 0?void 0:E.diff.read(D))===null||N===void 0?void 0:N.mappings.length)===0?"visible":"hidden"})})),this._register(Ie.runAndSubscribe(this._editors.modified.onDidChangeCursorPosition,D=>this._handleCursorPositionChange(D,!0))),this._register(Ie.runAndSubscribe(this._editors.original.onDidChangeCursorPosition,D=>this._handleCursorPositionChange(D,!1)));const x=this._diffModel.map(this,(D,E)=>{if(D)return D.diff.read(E)===void 0&&!D.isDiffUpToDate.read(E)});this._register(gc((D,E)=>{if(x.read(D)===!0){const N=this._editorProgressService.show(!0,1e3);E.add(lt(()=>N.done()))}})),this._register(lt(()=>{var D;this._shouldDisposeDiffModel&&((D=this._diffModel.get())===null||D===void 0||D.dispose())})),this._register(gc((D,E)=>{E.add(new(Oc(DFe,D))(this._editors,this._diffModel,this._options,this))}))}_createInnerEditor(e,t,i,n){return e.createInstance(_1,t,i,n)}_createDiffEditorContributions(){const e=LC.getDiffEditorContributions();for(const t of e)try{this._register(this._instantiationService.createInstance(t.ctor,this))}catch(i){Nt(i)}}get _targetEditor(){return this._editors.modified}getEditorType(){return HD.IDiffEditor}layout(e){this._rootSizeObserver.observe(e)}hasTextFocus(){return this._editors.original.hasTextFocus()||this._editors.modified.hasTextFocus()}saveViewState(){var e;const t=this._editors.original.saveViewState(),i=this._editors.modified.saveViewState();return{original:t,modified:i,modelState:(e=this._diffModel.get())===null||e===void 0?void 0:e.serializeState()}}restoreViewState(e){var t;if(e&&e.original&&e.modified){const i=e;this._editors.original.restoreViewState(i.original),this._editors.modified.restoreViewState(i.modified),i.modelState&&((t=this._diffModel.get())===null||t===void 0||t.restoreSerializedState(i.modelState))}}handleInitialized(){this._editors.original.handleInitialized(),this._editors.modified.handleInitialized()}createViewModel(e){return this._instantiationService.createInstance(mW,e,this._options)}getModel(){var e,t;return(t=(e=this._diffModel.get())===null||e===void 0?void 0:e.model)!==null&&t!==void 0?t:null}setModel(e,t){!e&&this._diffModel.get()&&this._accessibleDiffViewer.get().close();const i=e?"model"in e?{model:e,shouldDispose:!1}:{model:this.createViewModel(e),shouldDispose:!0}:void 0;this._diffModel.get()!==(i==null?void 0:i.model)&&Fx(t,n=>{var s;Gi.batchEventsGlobally(n,()=>{this._editors.original.setModel(i?i.model.model.original:null),this._editors.modified.setModel(i?i.model.model.modified:null)});const r=this._diffModel.get(),a=this._shouldDisposeDiffModel;this._shouldDisposeDiffModel=(s=i==null?void 0:i.shouldDispose)!==null&&s!==void 0?s:!1,this._diffModel.set(i==null?void 0:i.model,n),a&&(r==null||r.dispose())})}updateOptions(e){this._options.updateOptions(e)}getContainerDomNode(){return this._domElement}getOriginalEditor(){return this._editors.original}getModifiedEditor(){return this._editors.modified}getLineChanges(){var e;const t=(e=this._diffModel.get())===null||e===void 0?void 0:e.diff.get();return t?FFe(t):null}revert(e){const t=this._diffModel.get();!t||!t.isDiffUpToDate.get()||this._editors.modified.executeEdits("diffEditor",[{range:e.modified.toExclusiveRange(),text:t.model.original.getValueInRange(e.original.toExclusiveRange())}])}revertRangeMappings(e){const t=this._diffModel.get();if(!t||!t.isDiffUpToDate.get())return;const i=e.map(n=>({range:n.modifiedRange,text:t.model.original.getValueInRange(n.originalRange)}));this._editors.modified.executeEdits("diffEditor",i)}_goTo(e){this._editors.modified.setPosition(new Z(e.lineRangeMapping.modified.startLineNumber,1)),this._editors.modified.revealRangeInCenter(e.lineRangeMapping.modified.toExclusiveRange())}goToDiff(e){var t,i,n,s;const r=(i=(t=this._diffModel.get())===null||t===void 0?void 0:t.diff.get())===null||i===void 0?void 0:i.mappings;if(!r||r.length===0)return;const a=this._editors.modified.getPosition().lineNumber;let l;e==="next"?l=(n=r.find(c=>c.lineRangeMapping.modified.startLineNumber>a))!==null&&n!==void 0?n:r[0]:l=(s=ax(r,c=>c.lineRangeMapping.modified.startLineNumber<a))!==null&&s!==void 0?s:r[r.length-1],this._goTo(l),l.lineRangeMapping.modified.isEmpty?this._accessibilitySignalService.playSignal(Ot.diffLineDeleted,{source:"diffEditor.goToDiff"}):l.lineRangeMapping.original.isEmpty?this._accessibilitySignalService.playSignal(Ot.diffLineInserted,{source:"diffEditor.goToDiff"}):l&&this._accessibilitySignalService.playSignal(Ot.diffLineModified,{source:"diffEditor.goToDiff"})}revealFirstDiff(){const e=this._diffModel.get();e&&this.waitForDiff().then(()=>{var t;const i=(t=e.diff.get())===null||t===void 0?void 0:t.mappings;!i||i.length===0||this._goTo(i[0])})}accessibleDiffViewerNext(){this._accessibleDiffViewer.get().next()}accessibleDiffViewerPrev(){this._accessibleDiffViewer.get().prev()}async waitForDiff(){const e=this._diffModel.get();e&&await e.waitForDiff()}mapToOtherSide(){var e,t;const i=this._editors.modified.hasWidgetFocus(),n=i?this._editors.modified:this._editors.original,s=i?this._editors.original:this._editors.modified;let r;const a=n.getSelection();if(a){const l=(t=(e=this._diffModel.get())===null||e===void 0?void 0:e.diff.get())===null||t===void 0?void 0:t.mappings.map(c=>i?c.lineRangeMapping.flip():c.lineRangeMapping);if(l){const c=pJ(a.getStartPosition(),l),u=pJ(a.getEndPosition(),l);r=A.plusRange(c,u)}}return{destination:s,destinationSelection:r}}switchSide(){const{destination:e,destinationSelection:t}=this.mapToOtherSide();e.focus(),t&&e.setSelection(t)}exitCompareMove(){const e=this._diffModel.get();e&&e.movedTextToCompare.set(void 0,void 0)}collapseAllUnchangedRegions(){var e;const t=(e=this._diffModel.get())===null||e===void 0?void 0:e.unchangedRegions.get();t&&qi(i=>{for(const n of t)n.collapseAll(i)})}showAllUnchangedRegions(){var e;const t=(e=this._diffModel.get())===null||e===void 0?void 0:e.unchangedRegions.get();t&&qi(i=>{for(const n of t)n.showAll(i)})}_handleCursorPositionChange(e,t){var i,n;if((e==null?void 0:e.reason)===3){const s=(n=(i=this._diffModel.get())===null||i===void 0?void 0:i.diff.get())===null||n===void 0?void 0:n.mappings.find(r=>t?r.lineRangeMapping.modified.contains(e.position.lineNumber):r.lineRangeMapping.original.contains(e.position.lineNumber));s!=null&&s.lineRangeMapping.modified.isEmpty?this._accessibilitySignalService.playSignal(Ot.diffLineDeleted,{source:"diffEditor.cursorPositionChanged"}):s!=null&&s.lineRangeMapping.original.isEmpty?this._accessibilitySignalService.playSignal(Ot.diffLineInserted,{source:"diffEditor.cursorPositionChanged"}):s&&this._accessibilitySignalService.playSignal(Ot.diffLineModified,{source:"diffEditor.cursorPositionChanged"})}}};rg=OFe([ES(3,bt),ES(4,ct),ES(5,gi),ES(6,Vm),ES(7,Bm)],rg);function FFe(o){return o.mappings.map(e=>{const t=e.lineRangeMapping;let i,n,s,r,a=t.innerChanges;return t.original.isEmpty?(i=t.original.startLineNumber-1,n=0,a=void 0):(i=t.original.startLineNumber,n=t.original.endLineNumberExclusive-1),t.modified.isEmpty?(s=t.modified.startLineNumber-1,r=0,a=void 0):(s=t.modified.startLineNumber,r=t.modified.endLineNumberExclusive-1),{originalStartLineNumber:i,originalEndLineNumber:n,modifiedStartLineNumber:s,modifiedEndLineNumber:r,charChanges:a==null?void 0:a.map(l=>({originalStartLineNumber:l.originalRange.startLineNumber,originalStartColumn:l.originalRange.startColumn,originalEndLineNumber:l.originalRange.endLineNumber,originalEndColumn:l.originalRange.endColumn,modifiedStartLineNumber:l.modifiedRange.startLineNumber,modifiedStartColumn:l.modifiedRange.startColumn,modifiedEndLineNumber:l.modifiedRange.endLineNumber,modifiedEndColumn:l.modifiedRange.endColumn}))}})}var Uz=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Nn=function(o,e){return function(t,i){e(t,i,o)}};let BFe=0,MJ=!1;function WFe(o){if(!o){if(MJ)return;MJ=!0}fLe(o||Hi.document.body)}let RM=class extends _1{constructor(e,t,i,n,s,r,a,l,c,u,f,g){const p={...t};p.ariaLabel=p.ariaLabel||tM.editorViewAccessibleLabel,p.ariaLabel=p.ariaLabel+";"+tM.accessibilityHelpMessage,super(e,p,{},i,n,s,r,l,c,u,f,g),a instanceof T1?this._standaloneKeybindingService=a:this._standaloneKeybindingService=null,WFe(p.ariaContainerElement),jMe((_,b)=>i.createInstance(Ix,_,b,{}))}addCommand(e,t,i){if(!this._standaloneKeybindingService)return console.warn("Cannot add command because the editor is configured with an unrecognized KeybindingService"),null;const n="DYNAMIC_"+ ++BFe,s=ue.deserialize(i);return this._standaloneKeybindingService.addDynamicKeybinding(n,e,t,s),n}createContextKey(e,t){return this._contextKeyService.createKey(e,t)}addAction(e){if(typeof e.id!="string"||typeof e.label!="string"||typeof e.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");if(!this._standaloneKeybindingService)return console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),J.None;const t=e.id,i=e.label,n=ue.and(ue.equals("editorId",this.getId()),ue.deserialize(e.precondition)),s=e.keybindings,r=ue.and(n,ue.deserialize(e.keybindingContext)),a=e.contextMenuGroupId||null,l=e.contextMenuOrder||0,c=(p,..._)=>Promise.resolve(e.run(this,..._)),u=new he,f=this.getId()+":"+t;if(u.add(si.registerCommand(f,c)),a){const p={command:{id:f,title:i},when:n,group:a,order:l};u.add(Ys.appendMenuItem(P.EditorContext,p))}if(Array.isArray(s))for(const p of s)u.add(this._standaloneKeybindingService.addDynamicKeybinding(f,p,c,r));const g=new vse(f,i,i,void 0,n,(...p)=>Promise.resolve(e.run(this,...p)),this._contextKeyService);return this._actions.set(t,g),u.add(lt(()=>{this._actions.delete(t)})),u}_triggerCommand(e,t){if(this._codeEditorService instanceof jR)try{this._codeEditorService.setActiveCodeEditor(this),super._triggerCommand(e,t)}finally{this._codeEditorService.setActiveCodeEditor(null)}else super._triggerCommand(e,t)}};RM=Uz([Nn(2,ct),Nn(3,gi),Nn(4,Un),Nn(5,bt),Nn(6,Bi),Nn(7,Us),Nn(8,ys),Nn(9,mc),Nn(10,dn),Nn(11,Ze)],RM);let SW=class extends RM{constructor(e,t,i,n,s,r,a,l,c,u,f,g,p,_,b){const y={...t};DM(u,y,!1);const S=l.registerEditorContainer(e);typeof y.theme=="string"&&l.setTheme(y.theme),typeof y.autoDetectHighContrast<"u"&&l.setAutoDetectHighContrast(!!y.autoDetectHighContrast);const L=y.model;delete y.model,super(e,y,i,n,s,r,a,l,c,f,_,b),this._configurationService=u,this._standaloneThemeService=l,this._register(S);let x;if(typeof L>"u"){const D=p.getLanguageIdByMimeType(y.language)||y.language||yl;x=Tre(g,p,y.value||"",D,void 0),this._ownsModel=!0}else x=L,this._ownsModel=!1;if(this._attachModel(x),x){const D={oldModelUrl:null,newModelUrl:x.uri};this._onDidChangeModel.fire(D)}}dispose(){super.dispose()}updateOptions(e){DM(this._configurationService,e,!1),typeof e.theme=="string"&&this._standaloneThemeService.setTheme(e.theme),typeof e.autoDetectHighContrast<"u"&&this._standaloneThemeService.setAutoDetectHighContrast(!!e.autoDetectHighContrast),super.updateOptions(e)}_postDetachModelCleanup(e){super._postDetachModelCleanup(e),e&&this._ownsModel&&(e.dispose(),this._ownsModel=!1)}};SW=Uz([Nn(2,ct),Nn(3,gi),Nn(4,Un),Nn(5,bt),Nn(6,Bi),Nn(7,Al),Nn(8,ys),Nn(9,$t),Nn(10,mc),Nn(11,Fn),Nn(12,xn),Nn(13,dn),Nn(14,Ze)],SW);let LW=class extends rg{constructor(e,t,i,n,s,r,a,l,c,u,f,g){const p={...t};DM(l,p,!0);const _=r.registerEditorContainer(e);typeof p.theme=="string"&&r.setTheme(p.theme),typeof p.autoDetectHighContrast<"u"&&r.setAutoDetectHighContrast(!!p.autoDetectHighContrast),super(e,p,{},n,i,s,g,u),this._configurationService=l,this._standaloneThemeService=r,this._register(_)}dispose(){super.dispose()}updateOptions(e){DM(this._configurationService,e,!0),typeof e.theme=="string"&&this._standaloneThemeService.setTheme(e.theme),typeof e.autoDetectHighContrast<"u"&&this._standaloneThemeService.setAutoDetectHighContrast(!!e.autoDetectHighContrast),super.updateOptions(e)}_createInnerEditor(e,t,i){return e.createInstance(RM,t,i)}getOriginalEditor(){return super.getOriginalEditor()}getModifiedEditor(){return super.getModifiedEditor()}addCommand(e,t,i){return this.getModifiedEditor().addCommand(e,t,i)}createContextKey(e,t){return this.getModifiedEditor().createContextKey(e,t)}addAction(e){return this.getModifiedEditor().addAction(e)}};LW=Uz([Nn(2,ct),Nn(3,bt),Nn(4,gi),Nn(5,Al),Nn(6,ys),Nn(7,$t),Nn(8,Ya),Nn(9,Bm),Nn(10,_g),Nn(11,Vm)],LW);function Tre(o,e,t,i,n){if(t=t||"",!i){const s=t.indexOf(`
`);let r=t;return s!==-1&&(r=t.substring(0,s)),AJ(o,t,e.createByFilepathOrFirstLine(n||null,r),n)}return AJ(o,t,e.createById(i),n)}function AJ(o,e,t,i){return o.createModel(e,t,i)}var VFe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},HFe=function(o,e){return function(t,i){e(t,i,o)}};class zFe{constructor(e,t){this.viewModel=e,this.deltaScrollVertical=t}getId(){return this.viewModel}}let MM=class extends J{constructor(e,t,i,n){super(),this._container=e,this._overflowWidgetsDomNode=t,this._workbenchUIElementFactory=i,this._instantiationService=n,this._viewModel=ni(this,void 0),this._collapsed=Dt(this,r=>{var a;return(a=this._viewModel.read(r))===null||a===void 0?void 0:a.collapsed.read(r)}),this._editorContentHeight=ni(this,500),this.contentHeight=Dt(this,r=>(this._collapsed.read(r)?0:this._editorContentHeight.read(r))+this._outerEditorHeight),this._modifiedContentWidth=ni(this,0),this._modifiedWidth=ni(this,0),this._originalContentWidth=ni(this,0),this._originalWidth=ni(this,0),this.maxScroll=Dt(this,r=>{const a=this._modifiedContentWidth.read(r)-this._modifiedWidth.read(r),l=this._originalContentWidth.read(r)-this._originalWidth.read(r);return a>l?{maxScroll:a,width:this._modifiedWidth.read(r)}:{maxScroll:l,width:this._originalWidth.read(r)}}),this._elements=Ii("div.multiDiffEntry",[Ii("div.header@header",[Ii("div.header-content",[Ii("div.collapse-button@collapseButton"),Ii("div.file-path",[Ii("div.title.modified.show-file-icons@primaryPath",[]),Ii("div.status.deleted@status",["R"]),Ii("div.title.original.show-file-icons@secondaryPath",[])]),Ii("div.actions@actions")])]),Ii("div.editorParent",[Ii("div.editorContainer@editor")])]),this.editor=this._register(this._instantiationService.createInstance(rg,this._elements.editor,{overflowWidgetsDomNode:this._overflowWidgetsDomNode},{})),this.isModifedFocused=PJ(this.editor.getModifiedEditor()),this.isOriginalFocused=PJ(this.editor.getOriginalEditor()),this.isFocused=Dt(this,r=>this.isModifedFocused.read(r)||this.isOriginalFocused.read(r)),this._resourceLabel=this._workbenchUIElementFactory.createResourceLabel?this._register(this._workbenchUIElementFactory.createResourceLabel(this._elements.primaryPath)):void 0,this._resourceLabel2=this._workbenchUIElementFactory.createResourceLabel?this._register(this._workbenchUIElementFactory.createResourceLabel(this._elements.secondaryPath)):void 0,this._dataStore=new he,this._headerHeight=40,this._lastScrollTop=-1,this._isSettingScrollTop=!1;const s=new wM(this._elements.collapseButton,{});this._register(zt(r=>{s.element.className="",s.icon=this._collapsed.read(r)?Ee.chevronRight:Ee.chevronDown})),this._register(s.onDidClick(()=>{var r;(r=this._viewModel.get())===null||r===void 0||r.collapsed.set(!this._collapsed.get(),void 0)})),this._register(zt(r=>{this._elements.editor.style.display=this._collapsed.read(r)?"none":"block"})),this._register(this.editor.getModifiedEditor().onDidLayoutChange(r=>{const a=this.editor.getModifiedEditor().getLayoutInfo().contentWidth;this._modifiedWidth.set(a,void 0)})),this._register(this.editor.getOriginalEditor().onDidLayoutChange(r=>{const a=this.editor.getOriginalEditor().getLayoutInfo().contentWidth;this._originalWidth.set(a,void 0)})),this._register(this.editor.onDidContentSizeChange(r=>{MN(a=>{this._editorContentHeight.set(r.contentHeight,a),this._modifiedContentWidth.set(this.editor.getModifiedEditor().getContentWidth(),a),this._originalContentWidth.set(this.editor.getOriginalEditor().getContentWidth(),a)})})),this._register(this.editor.getOriginalEditor().onDidScrollChange(r=>{if(this._isSettingScrollTop||!r.scrollTopChanged||!this._data)return;const a=r.scrollTop-this._lastScrollTop;this._data.deltaScrollVertical(a)})),this._register(zt(r=>{const a=this.isFocused.read(r);this._elements.root.classList.toggle("focused",a)})),this._container.appendChild(this._elements.root),this._outerEditorHeight=this._headerHeight,this._register(this._instantiationService.createInstance(NM,this._elements.actions,P.MultiDiffEditorFileToolbar,{actionRunner:this._register(new Dre(()=>{var r;return(r=this._viewModel.get())===null||r===void 0?void 0:r.modifiedUri})),menuOptions:{shouldForwardArgs:!0},toolbarOptions:{primaryGroup:r=>r.startsWith("navigation")},actionViewItemProvider:(r,a)=>Toe(n,r,a)}))}setScrollLeft(e){this._modifiedContentWidth.get()-this._modifiedWidth.get()>this._originalContentWidth.get()-this._originalWidth.get()?this.editor.getModifiedEditor().setScrollLeft(e):this.editor.getOriginalEditor().setScrollLeft(e)}setData(e){this._data=e;function t(n){return{...n,scrollBeyondLastLine:!1,hideUnchangedRegions:{enabled:!0},scrollbar:{vertical:"hidden",horizontal:"hidden",handleMouseWheel:!1,useShadows:!1},renderOverviewRuler:!1,fixedOverflowWidgets:!0,overviewRulerBorder:!1}}const i=e.viewModel.entry.value;i.onOptionsDidChange&&this._dataStore.add(i.onOptionsDidChange(()=>{var n;this.editor.updateOptions(t((n=i.options)!==null&&n!==void 0?n:{}))})),MN(n=>{var s,r,a,l;(s=this._resourceLabel)===null||s===void 0||s.setUri((r=e.viewModel.modifiedUri)!==null&&r!==void 0?r:e.viewModel.originalUri,{strikethrough:e.viewModel.modifiedUri===void 0});let c=!1,u=!1,f=!1,g="";e.viewModel.modifiedUri&&e.viewModel.originalUri&&e.viewModel.modifiedUri.path!==e.viewModel.originalUri.path?(g="R",c=!0):e.viewModel.modifiedUri?e.viewModel.originalUri||(g="A",f=!0):(g="D",u=!0),this._elements.status.classList.toggle("renamed",c),this._elements.status.classList.toggle("deleted",u),this._elements.status.classList.toggle("added",f),this._elements.status.innerText=g,(a=this._resourceLabel2)===null||a===void 0||a.setUri(c?e.viewModel.originalUri:void 0,{strikethrough:!0}),this._dataStore.clear(),this._viewModel.set(e.viewModel,n),this.editor.setModel(e.viewModel.diffEditorViewModel,n),this.editor.updateOptions(t((l=i.options)!==null&&l!==void 0?l:{}))})}render(e,t,i,n){this._elements.root.style.visibility="visible",this._elements.root.style.top=`${e.start}px`,this._elements.root.style.height=`${e.length}px`,this._elements.root.style.width=`${t}px`,this._elements.root.style.position="absolute";const s=e.length-this._headerHeight,r=Math.max(0,Math.min(n.start-e.start,s));this._elements.header.style.transform=`translateY(${r}px)`,MN(a=>{this.editor.layout({width:t-2*8-2*1,height:e.length-this._outerEditorHeight})});try{this._isSettingScrollTop=!0,this._lastScrollTop=i,this.editor.getOriginalEditor().setScrollTop(i)}finally{this._isSettingScrollTop=!1}this._elements.header.classList.toggle("shadow",r>0||i>0),this._elements.header.classList.toggle("collapsed",r===s)}hide(){this._elements.root.style.top="-100000px",this._elements.root.style.visibility="hidden"}};MM=VFe([HFe(3,ct)],MM);function PJ(o){return Gi(e=>{const t=new he;return t.add(o.onDidFocusEditorWidget(()=>e(!0))),t.add(o.onDidBlurEditorWidget(()=>e(!1))),t},()=>o.hasTextFocus())}class UFe{constructor(e){this._create=e,this._unused=new Set,this._used=new Set,this._itemData=new Map}getUnusedObj(e){var t;let i;if(this._unused.size===0)i=this._create(e),this._itemData.set(i,e);else{const n=[...this._unused.values()];i=(t=n.find(s=>this._itemData.get(s).getId()===e.getId()))!==null&&t!==void 0?t:n[0],this._unused.delete(i),this._itemData.set(i,e),i.setData(e)}return this._used.add(i),{object:i,dispose:()=>{this._used.delete(i),this._unused.size>5?i.dispose():this._unused.add(i)}}}dispose(){for(const e of this._used)e.dispose();for(const e of this._unused)e.dispose();this._used.clear(),this._unused.clear()}}var $Fe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},OJ=function(o,e){return function(t,i){e(t,i,o)}};let xW=class extends J{constructor(e,t,i,n,s,r){super(),this._element=e,this._dimension=t,this._viewModel=i,this._workbenchUIElementFactory=n,this._parentContextKeyService=s,this._parentInstantiationService=r,this._elements=Ii("div.monaco-component.multiDiffEditor",[Ii("div@content",{style:{overflow:"hidden"}}),Ii("div.monaco-editor@overflowWidgetsDomNode",{})]),this._sizeObserver=this._register(new Cre(this._element,void 0)),this._objectPool=this._register(new UFe(l=>{const c=this._instantiationService.createInstance(MM,this._elements.content,this._elements.overflowWidgetsDomNode,this._workbenchUIElementFactory);return c.setData(l),c})),this._scrollable=this._register(new X1({forceIntegerValues:!1,scheduleAtNextAnimationFrame:l=>ja(ft(this._element),l),smoothScrollDuration:100})),this._scrollableElement=this._register(new HA(this._elements.root,{vertical:1,horizontal:1,useShadows:!1},this._scrollable)),this.scrollTop=Gi(this._scrollableElement.onScroll,()=>this._scrollableElement.getScrollPosition().scrollTop),this.scrollLeft=Gi(this._scrollableElement.onScroll,()=>this._scrollableElement.getScrollPosition().scrollLeft),this._viewItems=ew(this,(l,c)=>{const u=this._viewModel.read(l);return u?u.items.read(l).map(g=>{var p;const _=c.add(new jFe(g,this._objectPool,this.scrollLeft,y=>{this._scrollableElement.setScrollPosition({scrollTop:this._scrollableElement.getScrollPosition().scrollTop+y})})),b=(p=this._lastDocStates)===null||p===void 0?void 0:p[_.getKey()];return b&&qi(y=>{_.setViewState(b,y)}),_}):[]}),this._spaceBetweenPx=0,this._totalHeight=this._viewItems.map(this,(l,c)=>l.reduce((u,f)=>u+f.contentHeight.read(c)+this._spaceBetweenPx,0)),this.activeDiffItem=Dt(this,l=>this._viewItems.read(l).find(c=>{var u;return(u=c.template.read(l))===null||u===void 0?void 0:u.isFocused.read(l)})),this.lastActiveDiffItem=_Ae((l,c)=>{var u;return(u=this.activeDiffItem.read(l))!==null&&u!==void 0?u:c}),this._contextKeyService=this._register(this._parentContextKeyService.createScoped(this._element)),this._instantiationService=this._parentInstantiationService.createChild(new QD([bt,this._contextKeyService])),this._lastDocStates={},this._contextKeyService.createKey(W.inMultiDiffEditor.key,!0),this._register(gc((l,c)=>{const u=this._viewModel.read(l);if(u&&u.contextKeys)for(const[f,g]of Object.entries(u.contextKeys)){const p=this._contextKeyService.createKey(f,void 0);p.set(g),c.add(lt(()=>p.reset()))}}));const a=this._parentContextKeyService.createKey(W.multiDiffEditorAllCollapsed.key,!1);this._register(zt(l=>{const c=this._viewModel.read(l);if(c){const u=c.items.read(l).every(f=>f.collapsed.read(l));a.set(u)}})),this._register(zt(l=>{const c=this.lastActiveDiffItem.read(l);qi(u=>{var f;(f=this._viewModel.read(l))===null||f===void 0||f.activeDiffItem.set(c==null?void 0:c.viewModel,u)})})),this._register(zt(l=>{const c=this._dimension.read(l);this._sizeObserver.observe(c)})),this._elements.content.style.position="relative",this._register(zt(l=>{const c=this._sizeObserver.height.read(l);this._elements.root.style.height=`${c}px`;const u=this._totalHeight.read(l);this._elements.content.style.height=`${u}px`;const f=this._sizeObserver.width.read(l);let g=f;const p=this._viewItems.read(l),_=aH(p,b=>b.maxScroll.read(l).maxScroll);if(_){const b=_.maxScroll.read(l);g=f+b.maxScroll}this._scrollableElement.setScrollDimensions({width:f,height:c,scrollHeight:u,scrollWidth:g})})),e.replaceChildren(this._scrollableElement.getDomNode()),this._register(lt(()=>{e.replaceChildren()})),this._register(this._register(zt(l=>{MN(c=>{this.render(l)})})))}render(e){const t=this.scrollTop.read(e);let i=0,n=0,s=0;const r=this._sizeObserver.height.read(e),a=Wt.ofStartAndLength(t,r),l=this._sizeObserver.width.read(e);for(const c of this._viewItems.read(e)){const u=c.contentHeight.read(e),f=Math.min(u,r),g=Wt.ofStartAndLength(n,f),p=Wt.ofStartAndLength(s,u);if(p.isBefore(a))i-=u-f,c.hide();else if(p.isAfter(a))c.hide();else{const _=Math.max(0,Math.min(a.start-p.start,u-f));i-=_;const b=Wt.ofStartAndLength(t+i,r);c.render(g,_,l,b)}n+=f+this._spaceBetweenPx,s+=u+this._spaceBetweenPx}this._elements.content.style.transform=`translateY(${-(t+i)}px)`}};xW=$Fe([OJ(4,bt),OJ(5,ct)],xW);class jFe extends J{constructor(e,t,i,n){super(),this.viewModel=e,this._objectPool=t,this._scrollLeft=i,this._deltaScrollVertical=n,this._templateRef=this._register(Bx(this,void 0)),this.contentHeight=Dt(this,s=>{var r,a,l;return(l=(a=(r=this._templateRef.read(s))===null||r===void 0?void 0:r.object.contentHeight)===null||a===void 0?void 0:a.read(s))!==null&&l!==void 0?l:this.viewModel.lastTemplateData.read(s).contentHeight}),this.maxScroll=Dt(this,s=>{var r,a;return(a=(r=this._templateRef.read(s))===null||r===void 0?void 0:r.object.maxScroll.read(s))!==null&&a!==void 0?a:{maxScroll:0,scrollWidth:0}}),this.template=Dt(this,s=>{var r;return(r=this._templateRef.read(s))===null||r===void 0?void 0:r.object}),this._isHidden=ni(this,!1),this._register(zt(s=>{var r;const a=this._scrollLeft.read(s);(r=this._templateRef.read(s))===null||r===void 0||r.object.setScrollLeft(a)})),this._register(zt(s=>{const r=this._templateRef.read(s);!r||!this._isHidden.read(s)||r.object.isFocused.read(s)||this._clear()}))}dispose(){this._clear(),super.dispose()}toString(){var e;return`VirtualViewItem(${(e=this.viewModel.entry.value.modified)===null||e===void 0?void 0:e.uri.toString()})`}getKey(){return this.viewModel.getKey()}setViewState(e,t){var i;this.viewModel.collapsed.set(e.collapsed,t),this._updateTemplateData(t);const n=this.viewModel.lastTemplateData.get(),s=(i=e.selections)===null||i===void 0?void 0:i.map(Xe.liftSelection);this.viewModel.lastTemplateData.set({...n,selections:s},t);const r=this._templateRef.get();r&&s&&r.object.editor.setSelections(s)}_updateTemplateData(e){var t;const i=this._templateRef.get();i&&this.viewModel.lastTemplateData.set({contentHeight:i.object.contentHeight.get(),selections:(t=i.object.editor.getSelections())!==null&&t!==void 0?t:void 0},e)}_clear(){const e=this._templateRef.get();e&&qi(t=>{this._updateTemplateData(t),e.object.hide(),this._templateRef.set(void 0,t)})}hide(){this._isHidden.set(!0,void 0)}render(e,t,i,n){this._isHidden.set(!1,void 0);let s=this._templateRef.get();if(!s){s=this._objectPool.getUnusedObj(new zFe(this.viewModel,this._deltaScrollVertical)),this._templateRef.set(s,void 0);const r=this.viewModel.lastTemplateData.get().selections;r&&s.object.editor.setSelections(r)}s.object.render(e,i,t,n)}}V("multiDiffEditor.headerBackground",{dark:"#262626",light:"tab.inactiveBackground",hcDark:"tab.inactiveBackground",hcLight:"tab.inactiveBackground"},v("multiDiffEditor.headerBackground","The background color of the diff editor's header"));V("multiDiffEditor.background",{dark:"editorBackground",light:"editorBackground",hcDark:"editorBackground",hcLight:"editorBackground"},v("multiDiffEditor.background","The background color of the multi file diff editor"));V("multiDiffEditor.border",{dark:"sideBarSectionHeader.border",light:"#cccccc",hcDark:"sideBarSectionHeader.border",hcLight:"#cccccc"},v("multiDiffEditor.border","The border color of the multi file diff editor"));var KFe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},qFe=function(o,e){return function(t,i){e(t,i,o)}};let DW=class extends J{constructor(e,t,i){super(),this._element=e,this._workbenchUIElementFactory=t,this._instantiationService=i,this._dimension=ni(this,void 0),this._viewModel=ni(this,void 0),this._widgetImpl=ew(this,(n,s)=>(Oc(MM,n),s.add(this._instantiationService.createInstance(Oc(xW,n),this._element,this._dimension,this._viewModel,this._workbenchUIElementFactory)))),this._register(sk(this._widgetImpl))}};DW=KFe([qFe(2,ct)],DW);function GFe(o,e,t){return vt.initialize(t||{}).createInstance(SW,o,e)}function YFe(o){return vt.get(gi).onCodeEditorAdd(t=>{o(t)})}function ZFe(o){return vt.get(gi).onDiffEditorAdd(t=>{o(t)})}function QFe(){return vt.get(gi).listCodeEditors()}function XFe(){return vt.get(gi).listDiffEditors()}function JFe(o,e,t){return vt.initialize(t||{}).createInstance(LW,o,e)}function e4e(o,e){const t=vt.initialize(e||{});return new DW(o,{},t)}function t4e(o){if(typeof o.id!="string"||typeof o.run!="function")throw new Error("Invalid command descriptor, `id` and `run` are required properties!");return si.registerCommand(o.id,o.run)}function i4e(o){if(typeof o.id!="string"||typeof o.label!="string"||typeof o.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");const e=ue.deserialize(o.precondition),t=(n,...s)=>zs.runEditorCommand(n,s,e,(r,a,l)=>Promise.resolve(o.run(a,...l))),i=new he;if(i.add(si.registerCommand(o.id,t)),o.contextMenuGroupId){const n={command:{id:o.id,title:o.label},when:e,group:o.contextMenuGroupId,order:o.contextMenuOrder||0};i.add(Ys.appendMenuItem(P.EditorContext,n))}if(Array.isArray(o.keybindings)){const n=vt.get(Bi);if(!(n instanceof T1))console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService");else{const s=ue.and(e,ue.deserialize(o.keybindingContext));i.add(n.addDynamicKeybindings(o.keybindings.map(r=>({keybinding:r,command:o.id,when:s}))))}}return i}function n4e(o){return Nre([o])}function Nre(o){const e=vt.get(Bi);return e instanceof T1?e.addDynamicKeybindings(o.map(t=>({keybinding:t.keybinding,command:t.command,commandArgs:t.commandArgs,when:ue.deserialize(t.when)}))):(console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),J.None)}function s4e(o,e,t){const i=vt.get(xn),n=i.getLanguageIdByMimeType(e)||e;return Tre(vt.get(Fn),i,o,n,t)}function o4e(o,e){const t=vt.get(xn),i=t.getLanguageIdByMimeType(e)||e||yl;o.setLanguage(t.createById(i))}function r4e(o,e,t){o&&vt.get(kh).changeOne(e,o.uri,t)}function a4e(o){vt.get(kh).changeAll(o,[])}function l4e(o){return vt.get(kh).read(o)}function c4e(o){return vt.get(kh).onMarkerChanged(o)}function d4e(o){return vt.get(Fn).getModel(o)}function u4e(){return vt.get(Fn).getModels()}function h4e(o){return vt.get(Fn).onModelAdded(o)}function f4e(o){return vt.get(Fn).onModelRemoved(o)}function g4e(o){return vt.get(Fn).onModelLanguageChanged(t=>{o({model:t.model,oldLanguage:t.oldLanguageId})})}function p4e(o){return VSe(vt.get(Fn),vt.get(dn),o)}function m4e(o,e){const t=vt.get(xn),i=vt.get(Al);return gH.colorizeElement(i,t,o,e).then(()=>{i.registerEditorContainer(o)})}function _4e(o,e,t){const i=vt.get(xn);return vt.get(Al).registerEditorContainer(Hi.document.body),gH.colorize(i,o,e,t)}function v4e(o,e,t=4){return vt.get(Al).registerEditorContainer(Hi.document.body),gH.colorizeModelLine(o,e,t)}function b4e(o){const e=Qn.get(o);return e||{getInitialState:()=>l1,tokenize:(t,i,n)=>uH(o,n)}}function C4e(o,e){Qn.getOrCreate(e);const t=b4e(e),i=Sh(o),n=[];let s=t.getInitialState();for(let r=0,a=i.length;r<a;r++){const l=i[r],c=t.tokenize(l,!0,s);n[r]=c.tokens,s=c.endState}return n}function w4e(o,e){vt.get(Al).defineTheme(o,e)}function y4e(o){vt.get(Al).setTheme(o)}function S4e(){s9.clearAllFontInfos()}function L4e(o,e){return si.registerCommand({id:o,handler:e})}function x4e(o){return vt.get(wa).registerOpener({async open(t){return typeof t=="string"&&(t=gt.parse(t)),o.open(t)}})}function D4e(o){return vt.get(gi).registerCodeEditorOpenHandler(async(t,i,n)=>{var s;if(!i)return null;const r=(s=t.options)===null||s===void 0?void 0:s.selection;let a;return r&&typeof r.endLineNumber=="number"&&typeof r.endColumn=="number"?a=r:r&&(a={lineNumber:r.startLineNumber,column:r.startColumn}),await o.openCodeEditor(i,t.resource,a)?i:null})}function k4e(){return{create:GFe,getEditors:QFe,getDiffEditors:XFe,onDidCreateEditor:YFe,onDidCreateDiffEditor:ZFe,createDiffEditor:JFe,addCommand:t4e,addEditorAction:i4e,addKeybindingRule:n4e,addKeybindingRules:Nre,createModel:s4e,setModelLanguage:o4e,setModelMarkers:r4e,getModelMarkers:l4e,removeAllMarkers:a4e,onDidChangeMarkers:c4e,getModels:u4e,getModel:d4e,onDidCreateModel:h4e,onWillDisposeModel:f4e,onDidChangeModelLanguage:g4e,createWebWorker:p4e,colorizeElement:m4e,colorize:_4e,colorizeModelLine:v4e,tokenize:C4e,defineTheme:w4e,setTheme:y4e,remeasureFonts:S4e,registerCommand:L4e,registerLinkOpener:x4e,registerEditorOpener:D4e,AccessibilitySupport:s7,ContentWidgetPositionPreference:d7,CursorChangeReason:u7,DefaultEndOfLine:h7,EditorAutoIndentStrategy:g7,EditorOption:p7,EndOfLinePreference:m7,EndOfLineSequence:_7,MinimapPosition:k7,MinimapSectionHeaderStyle:E7,MouseTargetType:I7,OverlayWidgetPositionPreference:N7,OverviewRulerLane:R7,GlyphMarginLane:v7,RenderLineNumbersType:P7,RenderMinimap:O7,ScrollbarVisibility:B7,ScrollType:F7,TextEditorCursorBlinkingStyle:$7,TextEditorCursorStyle:j7,TrackedRangeStickiness:K7,WrappingIndent:q7,InjectedTextCursorStops:C7,PositionAffinity:A7,ShowLightbulbIconMode:V7,ConfigurationChangedEvent:qte,BareFontInfo:gv,FontInfo:n9,TextModelResolvedOptions:CN,FindMatch:rx,ApplyUpdateResult:uL,EditorZoom:Xl,createMultiFileDiffEditor:e4e,EditorType:HD,EditorOptions:Jd}}function E4e(o,e){if(!e||!Array.isArray(e))return!1;for(const t of e)if(!o(t))return!1;return!0}function PT(o,e){return typeof o=="boolean"?o:e}function FJ(o,e){return typeof o=="string"?o:e}function I4e(o){const e={};for(const t of o)e[t]=!0;return e}function BJ(o,e=!1){e&&(o=o.map(function(i){return i.toLowerCase()}));const t=I4e(o);return e?function(i){return t[i.toLowerCase()]!==void 0&&t.hasOwnProperty(i.toLowerCase())}:function(i){return t[i]!==void 0&&t.hasOwnProperty(i)}}function kW(o,e,t){e=e.replace(/@@/g,"");let i=0,n;do n=!1,e=e.replace(/@(\w+)/g,function(r,a){n=!0;let l="";if(typeof o[a]=="string")l=o[a];else if(o[a]&&o[a]instanceof RegExp)l=o[a].source;else throw o[a]===void 0?yn(o,"language definition does not contain attribute '"+a+"', used at: "+e):yn(o,"attribute reference '"+a+"' must be a string, used at: "+e);return G_(l)?"":"(?:"+l+")"}),i++;while(n&&i<5);e=e.replace(/\x01/g,"@");const s=(o.ignoreCase?"i":"")+(o.unicode?"u":"");if(t&&e.match(/\$[sS](\d\d?)/g)){let a=null,l=null;return c=>(l&&a===c||(a=c,l=new RegExp(oLe(o,e,c),s)),l)}return new RegExp(e,s)}function T4e(o,e,t,i){if(i<0)return o;if(i<e.length)return e[i];if(i>=100){i=i-100;const n=t.split(".");if(n.unshift(t),i<n.length)return n[i]}return null}function N4e(o,e,t,i){let n=-1,s=t,r=t.match(/^\$(([sS]?)(\d\d?)|#)(.*)$/);r&&(r[3]&&(n=parseInt(r[3]),r[2]&&(n=n+100)),s=r[4]);let a="~",l=s;!s||s.length===0?(a="!=",l=""):/^\w*$/.test(l)?a="==":(r=s.match(/^(@|!@|~|!~|==|!=)(.*)$/),r&&(a=r[1],l=r[2]));let c;if((a==="~"||a==="!~")&&/^(\w|\|)*$/.test(l)){const u=BJ(l.split("|"),o.ignoreCase);c=function(f){return a==="~"?u(f):!u(f)}}else if(a==="@"||a==="!@"){const u=o[l];if(!u)throw yn(o,"the @ match target '"+l+"' is not defined, in rule: "+e);if(!E4e(function(g){return typeof g=="string"},u))throw yn(o,"the @ match target '"+l+"' must be an array of strings, in rule: "+e);const f=BJ(u,o.ignoreCase);c=function(g){return a==="@"?f(g):!f(g)}}else if(a==="~"||a==="!~")if(l.indexOf("$")<0){const u=kW(o,"^"+l+"$",!1);c=function(f){return a==="~"?u.test(f):!u.test(f)}}else c=function(u,f,g,p){return kW(o,"^"+mp(o,l,f,g,p)+"$",!1).test(u)};else if(l.indexOf("$")<0){const u=Gf(o,l);c=function(f){return a==="=="?f===u:f!==u}}else{const u=Gf(o,l);c=function(f,g,p,_,b){const y=mp(o,u,g,p,_);return a==="=="?f===y:f!==y}}return n===-1?{name:t,value:i,test:function(u,f,g,p){return c(u,u,f,g,p)}}:{name:t,value:i,test:function(u,f,g,p){const _=T4e(u,f,g,n);return c(_||"",u,f,g,p)}}}function EW(o,e,t){if(t){if(typeof t=="string")return t;if(t.token||t.token===""){if(typeof t.token!="string")throw yn(o,"a 'token' attribute must be of type string, in rule: "+e);{const i={token:t.token};if(t.token.indexOf("$")>=0&&(i.tokenSubst=!0),typeof t.bracket=="string")if(t.bracket==="@open")i.bracket=1;else if(t.bracket==="@close")i.bracket=-1;else throw yn(o,"a 'bracket' attribute must be either '@open' or '@close', in rule: "+e);if(t.next){if(typeof t.next!="string")throw yn(o,"the next state must be a string value in rule: "+e);{let n=t.next;if(!/^(@pop|@push|@popall)$/.test(n)&&(n[0]==="@"&&(n=n.substr(1)),n.indexOf("$")<0&&!rLe(o,mp(o,n,"",[],""))))throw yn(o,"the next state '"+t.next+"' is not defined in rule: "+e);i.next=n}}return typeof t.goBack=="number"&&(i.goBack=t.goBack),typeof t.switchTo=="string"&&(i.switchTo=t.switchTo),typeof t.log=="string"&&(i.log=t.log),typeof t.nextEmbedded=="string"&&(i.nextEmbedded=t.nextEmbedded,o.usesEmbedded=!0),i}}else if(Array.isArray(t)){const i=[];for(let n=0,s=t.length;n<s;n++)i[n]=EW(o,e,t[n]);return{group:i}}else if(t.cases){const i=[];for(const s in t.cases)if(t.cases.hasOwnProperty(s)){const r=EW(o,e,t.cases[s]);s==="@default"||s==="@"||s===""?i.push({test:void 0,value:r,name:s}):s==="@eos"?i.push({test:function(a,l,c,u){return u},value:r,name:s}):i.push(N4e(o,e,s,r))}const n=o.defaultToken;return{test:function(s,r,a,l){for(const c of i)if(!c.test||c.test(s,r,a,l))return c.value;return n}}}else throw yn(o,"an action must be a string, an object with a 'token' or 'cases' attribute, or an array of actions; in rule: "+e)}else return{token:""}}class R4e{constructor(e){this.regex=new RegExp(""),this.action={token:""},this.matchOnlyAtLineStart=!1,this.name="",this.name=e}setRegex(e,t){let i;if(typeof t=="string")i=t;else if(t instanceof RegExp)i=t.source;else throw yn(e,"rules must start with a match string or regular expression: "+this.name);this.matchOnlyAtLineStart=i.length>0&&i[0]==="^",this.name=this.name+": "+i,this.regex=kW(e,"^(?:"+(this.matchOnlyAtLineStart?i.substr(1):i)+")",!0)}setAction(e,t){this.action=EW(e,this.name,t)}resolveRegex(e){return this.regex instanceof RegExp?this.regex:this.regex(e)}}function Rre(o,e){if(!e||typeof e!="object")throw new Error("Monarch: expecting a language definition object");const t={};t.languageId=o,t.includeLF=PT(e.includeLF,!1),t.noThrow=!1,t.maxStack=100,t.start=typeof e.start=="string"?e.start:null,t.ignoreCase=PT(e.ignoreCase,!1),t.unicode=PT(e.unicode,!1),t.tokenPostfix=FJ(e.tokenPostfix,"."+t.languageId),t.defaultToken=FJ(e.defaultToken,"source"),t.usesEmbedded=!1;const i=e;i.languageId=o,i.includeLF=t.includeLF,i.ignoreCase=t.ignoreCase,i.unicode=t.unicode,i.noThrow=t.noThrow,i.usesEmbedded=t.usesEmbedded,i.stateNames=e.tokenizer,i.defaultToken=t.defaultToken;function n(r,a,l){for(const c of l){let u=c.include;if(u){if(typeof u!="string")throw yn(t,"an 'include' attribute must be a string at: "+r);if(u[0]==="@"&&(u=u.substr(1)),!e.tokenizer[u])throw yn(t,"include target '"+u+"' is not defined at: "+r);n(r+"."+u,a,e.tokenizer[u])}else{const f=new R4e(r);if(Array.isArray(c)&&c.length>=1&&c.length<=3)if(f.setRegex(i,c[0]),c.length>=3)if(typeof c[1]=="string")f.setAction(i,{token:c[1],next:c[2]});else if(typeof c[1]=="object"){const g=c[1];g.next=c[2],f.setAction(i,g)}else throw yn(t,"a next state as the last element of a rule can only be given if the action is either an object or a string, at: "+r);else f.setAction(i,c[1]);else{if(!c.regex)throw yn(t,"a rule must either be an array, or an object with a 'regex' or 'include' field at: "+r);c.name&&typeof c.name=="string"&&(f.name=c.name),c.matchOnlyAtStart&&(f.matchOnlyAtLineStart=PT(c.matchOnlyAtLineStart,!1)),f.setRegex(i,c.regex),f.setAction(i,c.action)}a.push(f)}}}if(!e.tokenizer||typeof e.tokenizer!="object")throw yn(t,"a language definition must define the 'tokenizer' attribute as an object");t.tokenizer=[];for(const r in e.tokenizer)if(e.tokenizer.hasOwnProperty(r)){t.start||(t.start=r);const a=e.tokenizer[r];t.tokenizer[r]=new Array,n("tokenizer."+r,t.tokenizer[r],a)}if(t.usesEmbedded=i.usesEmbedded,e.brackets){if(!Array.isArray(e.brackets))throw yn(t,"the 'brackets' attribute must be defined as an array")}else e.brackets=[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"},{open:"<",close:">",token:"delimiter.angle"}];const s=[];for(const r of e.brackets){let a=r;if(a&&Array.isArray(a)&&a.length===3&&(a={token:a[2],open:a[0],close:a[1]}),a.open===a.close)throw yn(t,"open and close brackets in a 'brackets' attribute must be different: "+a.open+`
 hint: use the 'bracket' attribute if matching on equal brackets is required.`);if(typeof a.open=="string"&&typeof a.token=="string"&&typeof a.close=="string")s.push({token:a.token+t.tokenPostfix,open:Gf(t,a.open),close:Gf(t,a.close)});else throw yn(t,"every element in the 'brackets' array must be a '{open,close,token}' object or array")}return t.brackets=s,t.noThrow=!0,t}function M4e(o){o1.registerLanguage(o)}function A4e(){let o=[];return o=o.concat(o1.getLanguages()),o}function P4e(o){return vt.get(xn).languageIdCodec.encodeLanguageId(o)}function O4e(o,e){return vt.withServices(()=>{const i=vt.get(xn).onDidRequestRichLanguageFeatures(n=>{n===o&&(i.dispose(),e())});return i})}function F4e(o,e){return vt.withServices(()=>{const i=vt.get(xn).onDidRequestBasicLanguageFeatures(n=>{n===o&&(i.dispose(),e())});return i})}function B4e(o,e){if(!vt.get(xn).isRegisteredLanguageId(o))throw new Error(`Cannot set configuration for unknown language ${o}`);return vt.get(dn).register(o,e,100)}class W4e{constructor(e,t){this._languageId=e,this._actual=t}dispose(){}getInitialState(){return this._actual.getInitialState()}tokenize(e,t,i){if(typeof this._actual.tokenize=="function")return tD.adaptTokenize(this._languageId,this._actual,e,i);throw new Error("Not supported!")}tokenizeEncoded(e,t,i){const n=this._actual.tokenizeEncoded(e,i);return new uA(n.tokens,n.endState)}}class tD{constructor(e,t,i,n){this._languageId=e,this._actual=t,this._languageService=i,this._standaloneThemeService=n}dispose(){}getInitialState(){return this._actual.getInitialState()}static _toClassicTokens(e,t){const i=[];let n=0;for(let s=0,r=e.length;s<r;s++){const a=e[s];let l=a.startIndex;s===0?l=0:l<n&&(l=n),i[s]=new ZL(l,a.scopes,t),n=l}return i}static adaptTokenize(e,t,i,n){const s=t.tokenize(i,n),r=tD._toClassicTokens(s.tokens,e);let a;return s.endState.equals(n)?a=n:a=s.endState,new PV(r,a)}tokenize(e,t,i){return tD.adaptTokenize(this._languageId,this._actual,e,i)}_toBinaryTokens(e,t){const i=e.encodeLanguageId(this._languageId),n=this._standaloneThemeService.getColorTheme().tokenTheme,s=[];let r=0,a=0;for(let c=0,u=t.length;c<u;c++){const f=t[c],g=n.match(i,f.scopes)|1024;if(r>0&&s[r-1]===g)continue;let p=f.startIndex;c===0?p=0:p<a&&(p=a),s[r++]=p,s[r++]=g,a=p}const l=new Uint32Array(r);for(let c=0;c<r;c++)l[c]=s[c];return l}tokenizeEncoded(e,t,i){const n=this._actual.tokenize(e,i),s=this._toBinaryTokens(this._languageService.languageIdCodec,n.tokens);let r;return n.endState.equals(i)?r=i:r=n.endState,new uA(s,r)}}function V4e(o){return typeof o.getInitialState=="function"}function H4e(o){return"tokenizeEncoded"in o}function Mre(o){return o&&typeof o.then=="function"}function z4e(o){const e=vt.get(Al);if(o){const t=[null];for(let i=1,n=o.length;i<n;i++)t[i]=ne.fromHex(o[i]);e.setColorMapOverride(t)}else e.setColorMapOverride(null)}function Are(o,e){return H4e(e)?new W4e(o,e):new tD(o,e,vt.get(xn),vt.get(Al))}function $z(o,e){const t=new yCe(async()=>{const i=await Promise.resolve(e.create());return i?V4e(i)?Are(o,i):new fx(vt.get(xn),vt.get(Al),o,Rre(o,i),vt.get($t)):null});return Qn.registerFactory(o,t)}function U4e(o,e){if(!vt.get(xn).isRegisteredLanguageId(o))throw new Error(`Cannot set tokens provider for unknown language ${o}`);return Mre(e)?$z(o,{create:()=>e}):Qn.register(o,Are(o,e))}function $4e(o,e){const t=i=>new fx(vt.get(xn),vt.get(Al),o,Rre(o,i),vt.get($t));return Mre(e)?$z(o,{create:()=>e}):Qn.register(o,t(e))}function j4e(o,e){return vt.get(Ze).referenceProvider.register(o,e)}function K4e(o,e){return vt.get(Ze).renameProvider.register(o,e)}function q4e(o,e){return vt.get(Ze).newSymbolNamesProvider.register(o,e)}function G4e(o,e){return vt.get(Ze).signatureHelpProvider.register(o,e)}function Y4e(o,e){return vt.get(Ze).hoverProvider.register(o,{provideHover:(i,n,s)=>{const r=i.getWordAtPosition(n);return Promise.resolve(e.provideHover(i,n,s)).then(a=>{if(a)return!a.range&&r&&(a.range=new A(n.lineNumber,r.startColumn,n.lineNumber,r.endColumn)),a.range||(a.range=new A(n.lineNumber,n.column,n.lineNumber,n.column)),a})}})}function Z4e(o,e){return vt.get(Ze).documentSymbolProvider.register(o,e)}function Q4e(o,e){return vt.get(Ze).documentHighlightProvider.register(o,e)}function X4e(o,e){return vt.get(Ze).linkedEditingRangeProvider.register(o,e)}function J4e(o,e){return vt.get(Ze).definitionProvider.register(o,e)}function e5e(o,e){return vt.get(Ze).implementationProvider.register(o,e)}function t5e(o,e){return vt.get(Ze).typeDefinitionProvider.register(o,e)}function i5e(o,e){return vt.get(Ze).codeLensProvider.register(o,e)}function n5e(o,e,t){return vt.get(Ze).codeActionProvider.register(o,{providedCodeActionKinds:t==null?void 0:t.providedCodeActionKinds,documentation:t==null?void 0:t.documentation,provideCodeActions:(n,s,r,a)=>{const c=vt.get(kh).read({resource:n.uri}).filter(u=>A.areIntersectingOrTouching(u,s));return e.provideCodeActions(n,s,{markers:c,only:r.only,trigger:r.trigger},a)},resolveCodeAction:e.resolveCodeAction})}function s5e(o,e){return vt.get(Ze).documentFormattingEditProvider.register(o,e)}function o5e(o,e){return vt.get(Ze).documentRangeFormattingEditProvider.register(o,e)}function r5e(o,e){return vt.get(Ze).onTypeFormattingEditProvider.register(o,e)}function a5e(o,e){return vt.get(Ze).linkProvider.register(o,e)}function l5e(o,e){return vt.get(Ze).completionProvider.register(o,e)}function c5e(o,e){return vt.get(Ze).colorProvider.register(o,e)}function d5e(o,e){return vt.get(Ze).foldingRangeProvider.register(o,e)}function u5e(o,e){return vt.get(Ze).declarationProvider.register(o,e)}function h5e(o,e){return vt.get(Ze).selectionRangeProvider.register(o,e)}function f5e(o,e){return vt.get(Ze).documentSemanticTokensProvider.register(o,e)}function g5e(o,e){return vt.get(Ze).documentRangeSemanticTokensProvider.register(o,e)}function p5e(o,e){return vt.get(Ze).inlineCompletionsProvider.register(o,e)}function m5e(o,e){return vt.get(Ze).inlineEditProvider.register(o,e)}function _5e(o,e){return vt.get(Ze).inlayHintsProvider.register(o,e)}function v5e(){return{register:M4e,getLanguages:A4e,onLanguage:O4e,onLanguageEncountered:F4e,getEncodedLanguageId:P4e,setLanguageConfiguration:B4e,setColorMap:z4e,registerTokensProviderFactory:$z,setTokensProvider:U4e,setMonarchTokensProvider:$4e,registerReferenceProvider:j4e,registerRenameProvider:K4e,registerNewSymbolNameProvider:q4e,registerCompletionItemProvider:l5e,registerSignatureHelpProvider:G4e,registerHoverProvider:Y4e,registerDocumentSymbolProvider:Z4e,registerDocumentHighlightProvider:Q4e,registerLinkedEditingRangeProvider:X4e,registerDefinitionProvider:J4e,registerImplementationProvider:e5e,registerTypeDefinitionProvider:t5e,registerCodeLensProvider:i5e,registerCodeActionProvider:n5e,registerDocumentFormattingEditProvider:s5e,registerDocumentRangeFormattingEditProvider:o5e,registerOnTypeFormattingEditProvider:r5e,registerLinkProvider:a5e,registerColorProvider:c5e,registerFoldingRangeProvider:d5e,registerDeclarationProvider:u5e,registerSelectionRangeProvider:h5e,registerDocumentSemanticTokensProvider:f5e,registerDocumentRangeSemanticTokensProvider:g5e,registerInlineCompletionsProvider:p5e,registerInlineEditProvider:m5e,registerInlayHintsProvider:_5e,DocumentHighlightKind:f7,CompletionItemKind:a7,CompletionItemTag:l7,CompletionItemInsertTextRule:r7,SymbolKind:z7,SymbolTag:U7,IndentAction:b7,CompletionTriggerKind:c7,SignatureHelpTriggerKind:H7,InlayHintKind:w7,InlineCompletionTriggerKind:y7,InlineEditTriggerKind:S7,CodeActionTriggerType:o7,NewSymbolNameTag:T7,PartialAcceptTriggerKind:M7,FoldingRangeKind:Vr,SelectedSuggestionInfo:lie}}const jz=Zt("IEditorCancelService"),Pre=new Be("cancellableOperation",!1,v("cancellableOperation","Whether the editor runs a cancellable operation, e.g. like 'Peek References'"));oi(jz,class{constructor(){this._tokens=new WeakMap}add(o,e){let t=this._tokens.get(o);t||(t=o.invokeWithinContext(n=>{const s=Pre.bindTo(n.get(bt)),r=new Wr;return{key:s,tokens:r}}),this._tokens.set(o,t));let i;return t.key.set(!0),i=t.tokens.push(e),()=>{i&&(i(),t.key.set(!t.tokens.isEmpty()),i=void 0)}}cancel(o){const e=this._tokens.get(o);if(!e)return;const t=e.tokens.pop();t&&(t.cancel(),e.key.set(!e.tokens.isEmpty()))}},1);class b5e extends os{constructor(e,t){super(t),this.editor=e,this._unregister=e.invokeWithinContext(i=>i.get(jz).add(e,this))}dispose(){this._unregister(),super.dispose()}}Me(new class extends zs{constructor(){super({id:"editor.cancelOperation",kbOpts:{weight:100,primary:9},precondition:Pre})}runEditorCommand(o,e){o.get(jz).cancel(e)}});let Ore=class IW{constructor(e,t){if(this.flags=t,this.flags&1){const i=e.getModel();this.modelVersionId=i?kv("{0}#{1}",i.uri.toString(),i.getVersionId()):null}else this.modelVersionId=null;this.flags&4?this.position=e.getPosition():this.position=null,this.flags&2?this.selection=e.getSelection():this.selection=null,this.flags&8?(this.scrollLeft=e.getScrollLeft(),this.scrollTop=e.getScrollTop()):(this.scrollLeft=-1,this.scrollTop=-1)}_equals(e){if(!(e instanceof IW))return!1;const t=e;return!(this.modelVersionId!==t.modelVersionId||this.scrollLeft!==t.scrollLeft||this.scrollTop!==t.scrollTop||!this.position&&t.position||this.position&&!t.position||this.position&&t.position&&!this.position.equals(t.position)||!this.selection&&t.selection||this.selection&&!t.selection||this.selection&&t.selection&&!this.selection.equalsRange(t.selection))}validate(e){return this._equals(new IW(e,this.flags))}};class Cm extends b5e{constructor(e,t,i,n){super(e,n),this._listener=new he,t&4&&this._listener.add(e.onDidChangeCursorPosition(s=>{(!i||!A.containsPosition(i,s.position))&&this.cancel()})),t&2&&this._listener.add(e.onDidChangeCursorSelection(s=>{(!i||!A.containsRange(i,s.selection))&&this.cancel()})),t&8&&this._listener.add(e.onDidScrollChange(s=>this.cancel())),t&1&&(this._listener.add(e.onDidChangeModel(s=>this.cancel())),this._listener.add(e.onDidChangeModelContent(s=>this.cancel())))}dispose(){this._listener.dispose(),super.dispose()}}class Kz extends os{constructor(e,t){super(t),this._listener=e.onDidChangeContent(()=>this.cancel())}dispose(){this._listener.dispose(),super.dispose()}}function Ch(o){return o&&typeof o.getEditorType=="function"?o.getEditorType()===HD.ICodeEditor:!1}function qz(o){return o&&typeof o.getEditorType=="function"?o.getEditorType()===HD.IDiffEditor:!1}function C5e(o){return!!o&&typeof o=="object"&&typeof o.onDidChangeActiveEditor=="function"}function Fre(o){return Ch(o)?o:qz(o)?o.getModifiedEditor():C5e(o)&&Ch(o.activeCodeEditor)?o.activeCodeEditor:null}class N1{static _handleEolEdits(e,t){let i;const n=[];for(const s of t)typeof s.eol=="number"&&(i=s.eol),s.range&&typeof s.text=="string"&&n.push(s);return typeof i=="number"&&e.hasModel()&&e.getModel().pushEOL(i),n}static _isFullModelReplaceEdit(e,t){if(!e.hasModel())return!1;const i=e.getModel(),n=i.validateRange(t.range);return i.getFullModelRange().equalsRange(n)}static execute(e,t,i){i&&e.pushUndoStop();const n=Xd.capture(e),s=N1._handleEolEdits(e,t);s.length===1&&N1._isFullModelReplaceEdit(e,s[0])?e.executeEdits("formatEditsCommand",s.map(r=>On.replace(A.lift(r.range),r.text))):e.executeEdits("formatEditsCommand",s.map(r=>On.replaceMove(A.lift(r.range),r.text))),i&&e.pushUndoStop(),n.restoreRelativeVerticalPositionOfCursor(e)}}class WJ{constructor(e){this.value=e,this._lower=e.toLowerCase()}static toKey(e){return typeof e=="string"?e.toLowerCase():e._lower}}class w5e{constructor(e){if(this._set=new Set,e)for(const t of e)this.add(t)}add(e){this._set.add(WJ.toKey(e))}has(e){return this._set.has(WJ.toKey(e))}}function Bre(o,e,t){const i=[],n=new w5e,s=o.ordered(t);for(const a of s)i.push(a),a.extensionId&&n.add(a.extensionId);const r=e.ordered(t);for(const a of r){if(a.extensionId){if(n.has(a.extensionId))continue;n.add(a.extensionId)}i.push({displayName:a.displayName,extensionId:a.extensionId,provideDocumentFormattingEdits(l,c,u){return a.provideDocumentRangeFormattingEdits(l,l.getFullModelRange(),c,u)}})}return i}class zv{static setFormatterSelector(e){return{dispose:zv._selectors.unshift(e)}}static async select(e,t,i,n){if(e.length===0)return;const s=ii.first(zv._selectors);if(s)return await s(e,t,i,n)}}zv._selectors=new Wr;async function Wre(o,e,t,i,n,s,r){const a=o.get(ct),{documentRangeFormattingEditProvider:l}=o.get(Ze),c=Ch(e)?e.getModel():e,u=l.ordered(c),f=await zv.select(u,c,i,2);f&&(n.report(f),await a.invokeFunction(y5e,f,e,t,s,r))}async function y5e(o,e,t,i,n,s){var r,a;const l=o.get(Cc),c=o.get(mr),u=o.get(Vm);let f,g;Ch(t)?(f=t.getModel(),g=new Cm(t,5,void 0,n)):(f=t,g=new Kz(t,n));const p=[];let _=0;for(const x of yV(i).sort(A.compareRangesUsingStarts))_>0&&A.areIntersectingOrTouching(p[_-1],x)?p[_-1]=A.fromPositions(p[_-1].getStartPosition(),x.getEndPosition()):_=p.push(x);const b=async x=>{var D,E;c.trace("[format][provideDocumentRangeFormattingEdits] (request)",(D=e.extensionId)===null||D===void 0?void 0:D.value,x);const N=await e.provideDocumentRangeFormattingEdits(f,x,f.getFormattingOptions(),g.token)||[];return c.trace("[format][provideDocumentRangeFormattingEdits] (response)",(E=e.extensionId)===null||E===void 0?void 0:E.value,N),N},y=(x,D)=>{if(!x.length||!D.length)return!1;const E=x.reduce((N,M)=>A.plusRange(N,M.range),x[0].range);if(!D.some(N=>A.intersectRanges(E,N.range)))return!1;for(const N of x)for(const M of D)if(A.intersectRanges(N.range,M.range))return!0;return!1},S=[],L=[];try{if(typeof e.provideDocumentRangesFormattingEdits=="function"){c.trace("[format][provideDocumentRangeFormattingEdits] (request)",(r=e.extensionId)===null||r===void 0?void 0:r.value,p);const x=await e.provideDocumentRangesFormattingEdits(f,p,f.getFormattingOptions(),g.token)||[];c.trace("[format][provideDocumentRangeFormattingEdits] (response)",(a=e.extensionId)===null||a===void 0?void 0:a.value,x),L.push(x)}else{for(const x of p){if(g.token.isCancellationRequested)return!0;L.push(await b(x))}for(let x=0;x<p.length;++x)for(let D=x+1;D<p.length;++D){if(g.token.isCancellationRequested)return!0;if(y(L[x],L[D])){const E=A.plusRange(p[x],p[D]),N=await b(E);p.splice(D,1),p.splice(x,1),p.push(E),L.splice(D,1),L.splice(x,1),L.push(N),x=0,D=0}}}for(const x of L){if(g.token.isCancellationRequested)return!0;const D=await l.computeMoreMinimalEdits(f.uri,x);D&&S.push(...D)}}finally{g.dispose()}if(S.length===0)return!1;if(Ch(t))N1.execute(t,S,!0),t.revealPositionInCenterIfOutsideViewport(t.getPosition(),1);else{const[{range:x}]=S,D=new Xe(x.startLineNumber,x.startColumn,x.endLineNumber,x.endColumn);f.pushEditOperations([D],S.map(E=>({text:E.text,range:A.lift(E.range),forceMoveMarkers:!0})),E=>{for(const{range:N}of E)if(A.areIntersectingOrTouching(N,D))return[new Xe(N.startLineNumber,N.startColumn,N.endLineNumber,N.endColumn)];return null})}return u.playSignal(Ot.format,{userGesture:s}),!0}async function S5e(o,e,t,i,n,s){const r=o.get(ct),a=o.get(Ze),l=Ch(e)?e.getModel():e,c=Bre(a.documentFormattingEditProvider,a.documentRangeFormattingEditProvider,l),u=await zv.select(c,l,t,1);u&&(i.report(u),await r.invokeFunction(L5e,u,e,t,n,s))}async function L5e(o,e,t,i,n,s){const r=o.get(Cc),a=o.get(Vm);let l,c;Ch(t)?(l=t.getModel(),c=new Cm(t,5,void 0,n)):(l=t,c=new Kz(t,n));let u;try{const f=await e.provideDocumentFormattingEdits(l,l.getFormattingOptions(),c.token);if(u=await r.computeMoreMinimalEdits(l.uri,f),c.token.isCancellationRequested)return!0}finally{c.dispose()}if(!u||u.length===0)return!1;if(Ch(t))N1.execute(t,u,i!==2),i!==2&&t.revealPositionInCenterIfOutsideViewport(t.getPosition(),1);else{const[{range:f}]=u,g=new Xe(f.startLineNumber,f.startColumn,f.endLineNumber,f.endColumn);l.pushEditOperations([g],u.map(p=>({text:p.text,range:A.lift(p.range),forceMoveMarkers:!0})),p=>{for(const{range:_}of p)if(A.areIntersectingOrTouching(_,g))return[new Xe(_.startLineNumber,_.startColumn,_.endLineNumber,_.endColumn)];return null})}return a.playSignal(Ot.format,{userGesture:s}),!0}async function x5e(o,e,t,i,n,s){const r=e.documentRangeFormattingEditProvider.ordered(t);for(const a of r){const l=await Promise.resolve(a.provideDocumentRangeFormattingEdits(t,i,n,s)).catch(hs);if(Yo(l))return await o.computeMoreMinimalEdits(t.uri,l)}}async function D5e(o,e,t,i,n){const s=Bre(e.documentFormattingEditProvider,e.documentRangeFormattingEditProvider,t);for(const r of s){const a=await Promise.resolve(r.provideDocumentFormattingEdits(t,i,n)).catch(hs);if(Yo(a))return await o.computeMoreMinimalEdits(t.uri,a)}}function Vre(o,e,t,i,n,s,r){const a=e.onTypeFormattingEditProvider.ordered(t);return a.length===0||a[0].autoFormatTriggerCharacters.indexOf(n)<0?Promise.resolve(void 0):Promise.resolve(a[0].provideOnTypeFormattingEdits(t,i,n,s,r)).catch(hs).then(l=>o.computeMoreMinimalEdits(t.uri,l))}si.registerCommand("_executeFormatRangeProvider",async function(o,...e){const[t,i,n]=e;wi(gt.isUri(t)),wi(A.isIRange(i));const s=o.get(Ca),r=o.get(Cc),a=o.get(Ze),l=await s.createModelReference(t);try{return x5e(r,a,l.object.textEditorModel,A.lift(i),n,Yt.None)}finally{l.dispose()}});si.registerCommand("_executeFormatDocumentProvider",async function(o,...e){const[t,i]=e;wi(gt.isUri(t));const n=o.get(Ca),s=o.get(Cc),r=o.get(Ze),a=await n.createModelReference(t);try{return D5e(s,r,a.object.textEditorModel,i,Yt.None)}finally{a.dispose()}});si.registerCommand("_executeFormatOnTypeProvider",async function(o,...e){const[t,i,n,s]=e;wi(gt.isUri(t)),wi(Z.isIPosition(i)),wi(typeof n=="string");const r=o.get(Ca),a=o.get(Cc),l=o.get(Ze),c=await r.createModelReference(t);try{return Vre(a,l,c.object.textEditorModel,Z.lift(i),n,s,Yt.None)}finally{c.dispose()}});Jd.wrappingIndent.defaultValue=0;Jd.glyphMargin.defaultValue=!1;Jd.autoIndent.defaultValue=3;Jd.overviewRulerLanes.defaultValue=2;zv.setFormatterSelector((o,e,t)=>Promise.resolve(o[0]));const Zr=cie();Zr.editor=k4e();Zr.languages=v5e();const k5e=Zr.CancellationTokenSource,Hre=Zr.Emitter,E5e=Zr.KeyCode,I5e=Zr.KeyMod,T5e=Zr.Position,N5e=Zr.Range,R5e=Zr.Selection,M5e=Zr.SelectionDirection,A5e=Zr.MarkerSeverity,P5e=Zr.MarkerTag,O5e=Zr.Uri,F5e=Zr.Token,zre=Zr.editor,sw=Zr.languages,cB=globalThis.MonacoEnvironment;(cB!=null&&cB.globalAPI||typeof define=="function"&&define.amd)&&(globalThis.monaco=Zr);typeof globalThis.require<"u"&&typeof globalThis.require.config=="function"&&globalThis.require.config({ignoreDuplicateModules:["vscode-languageserver-types","vscode-languageserver-types/main","vscode-languageserver-textdocument","vscode-languageserver-textdocument/main","vscode-nls","vscode-nls/vscode-nls","jsonc-parser","jsonc-parser/main","vscode-uri","vscode-uri/index","vs/basic-languages/typescript/typescript"]});const IP=Object.freeze(Object.defineProperty({__proto__:null,CancellationTokenSource:k5e,Emitter:Hre,KeyCode:E5e,KeyMod:I5e,MarkerSeverity:A5e,MarkerTag:P5e,Position:T5e,Range:N5e,Selection:R5e,SelectionDirection:M5e,Token:F5e,Uri:O5e,editor:zre,languages:sw},Symbol.toStringTag,{value:"Module"})),B5e="modulepreload",W5e=function(o,e){return new URL(o,e).href},VJ={},rt=function(e,t,i){let n=Promise.resolve();if(t&&t.length>0){const r=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));n=Promise.allSettled(t.map(c=>{if(c=W5e(c,i),c in VJ)return;VJ[c]=!0;const u=c.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(!!i)for(let _=r.length-1;_>=0;_--){const b=r[_];if(b.href===c&&(!u||b.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${f}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":B5e,u||(p.as="script"),p.crossOrigin="",p.href=c,l&&p.setAttribute("nonce",l),document.head.appendChild(p),u)return new Promise((_,b)=>{p.addEventListener("load",_),p.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(r){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=r,window.dispatchEvent(a),!a.defaultPrevented)throw r}return n.then(r=>{for(const a of r||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.48.0(0037b13fb5d186fdf1e7df51a9416a2de2b8c670)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var V5e=Object.defineProperty,H5e=Object.getOwnPropertyDescriptor,z5e=Object.getOwnPropertyNames,U5e=Object.prototype.hasOwnProperty,$5e=(o,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of z5e(e))!U5e.call(o,n)&&n!==t&&V5e(o,n,{get:()=>e[n],enumerable:!(i=H5e(e,n))||i.enumerable});return o},j5e=(o,e,t)=>($5e(o,e,"default"),t),nL={};j5e(nL,IP);var Ure={},dB={},K5e=class $re{static getOrCreate(e){return dB[e]||(dB[e]=new $re(e)),dB[e]}constructor(e){this._languageId=e,this._loadingTriggered=!1,this._lazyLoadPromise=new Promise((t,i)=>{this._lazyLoadPromiseResolve=t,this._lazyLoadPromiseReject=i})}load(){return this._loadingTriggered||(this._loadingTriggered=!0,Ure[this._languageId].loader().then(e=>this._lazyLoadPromiseResolve(e),e=>this._lazyLoadPromiseReject(e))),this._lazyLoadPromise}};function ht(o){const e=o.id;Ure[e]=o,nL.languages.register(o);const t=K5e.getOrCreate(e);nL.languages.registerTokensProviderFactory(e,{create:async()=>(await t.load()).language}),nL.languages.onLanguageEncountered(e,async()=>{const i=await t.load();nL.languages.setLanguageConfiguration(e,i.conf)})}ht({id:"abap",extensions:[".abap"],aliases:["abap","ABAP"],loader:()=>rt(()=>import("./abap-D_AlL1At.js"),[],import.meta.url)});ht({id:"apex",extensions:[".cls"],aliases:["Apex","apex"],mimetypes:["text/x-apex-source","text/x-apex"],loader:()=>rt(()=>import("./apex-CmxtnpeZ.js"),[],import.meta.url)});ht({id:"azcli",extensions:[".azcli"],aliases:["Azure CLI","azcli"],loader:()=>rt(()=>import("./azcli-C2vBA31i.js"),[],import.meta.url)});ht({id:"bat",extensions:[".bat",".cmd"],aliases:["Batch","bat"],loader:()=>rt(()=>import("./bat-BAKJxmMu.js"),[],import.meta.url)});ht({id:"bicep",extensions:[".bicep"],aliases:["Bicep"],loader:()=>rt(()=>import("./bicep-DKtM9ezo.js"),[],import.meta.url)});ht({id:"cameligo",extensions:[".mligo"],aliases:["Cameligo"],loader:()=>rt(()=>import("./cameligo-DzurU_SJ.js"),[],import.meta.url)});ht({id:"clojure",extensions:[".clj",".cljs",".cljc",".edn"],aliases:["clojure","Clojure"],loader:()=>rt(()=>import("./clojure-COTUvZem.js"),[],import.meta.url)});ht({id:"coffeescript",extensions:[".coffee"],aliases:["CoffeeScript","coffeescript","coffee"],mimetypes:["text/x-coffeescript","text/coffeescript"],loader:()=>rt(()=>import("./coffee-Bux12N06.js"),[],import.meta.url)});ht({id:"c",extensions:[".c",".h"],aliases:["C","c"],loader:()=>rt(()=>import("./cpp-DkOsvrPi.js"),[],import.meta.url)});ht({id:"cpp",extensions:[".cpp",".cc",".cxx",".hpp",".hh",".hxx"],aliases:["C++","Cpp","cpp"],loader:()=>rt(()=>import("./cpp-DkOsvrPi.js"),[],import.meta.url)});ht({id:"csharp",extensions:[".cs",".csx",".cake"],aliases:["C#","csharp"],loader:()=>rt(()=>import("./csharp-DKqJBhJO.js"),[],import.meta.url)});ht({id:"csp",extensions:[],aliases:["CSP","csp"],loader:()=>rt(()=>import("./csp-CqIl6iSx.js"),[],import.meta.url)});ht({id:"css",extensions:[".css"],aliases:["CSS","css"],mimetypes:["text/css"],loader:()=>rt(()=>import("./css-CGpWsIrG.js"),[],import.meta.url)});ht({id:"cypher",extensions:[".cypher",".cyp"],aliases:["Cypher","OpenCypher"],loader:()=>rt(()=>import("./cypher-C0NOBBnI.js"),[],import.meta.url)});ht({id:"dart",extensions:[".dart"],aliases:["Dart","dart"],mimetypes:["text/x-dart-source","text/x-dart"],loader:()=>rt(()=>import("./dart-DRkxg4lA.js"),[],import.meta.url)});ht({id:"dockerfile",extensions:[".dockerfile"],filenames:["Dockerfile"],aliases:["Dockerfile"],loader:()=>rt(()=>import("./dockerfile-BgOGWaCf.js"),[],import.meta.url)});ht({id:"ecl",extensions:[".ecl"],aliases:["ECL","Ecl","ecl"],loader:()=>rt(()=>import("./ecl-DnJ8rW3U.js"),[],import.meta.url)});ht({id:"elixir",extensions:[".ex",".exs"],aliases:["Elixir","elixir","ex"],loader:()=>rt(()=>import("./elixir-B7YTO__p.js"),[],import.meta.url)});ht({id:"flow9",extensions:[".flow"],aliases:["Flow9","Flow","flow9","flow"],loader:()=>rt(()=>import("./flow9-wLXmeo6b.js"),[],import.meta.url)});ht({id:"fsharp",extensions:[".fs",".fsi",".ml",".mli",".fsx",".fsscript"],aliases:["F#","FSharp","fsharp"],loader:()=>rt(()=>import("./fsharp-CEbfBfAU.js"),[],import.meta.url)});ht({id:"freemarker2",extensions:[".ftl",".ftlh",".ftlx"],aliases:["FreeMarker2","Apache FreeMarker2"],loader:()=>rt(()=>import("./freemarker2-2AZJBxSu.js"),[],import.meta.url).then(o=>o.TagAutoInterpolationDollar)});ht({id:"freemarker2.tag-angle.interpolation-dollar",aliases:["FreeMarker2 (Angle/Dollar)","Apache FreeMarker2 (Angle/Dollar)"],loader:()=>rt(()=>import("./freemarker2-2AZJBxSu.js"),[],import.meta.url).then(o=>o.TagAngleInterpolationDollar)});ht({id:"freemarker2.tag-bracket.interpolation-dollar",aliases:["FreeMarker2 (Bracket/Dollar)","Apache FreeMarker2 (Bracket/Dollar)"],loader:()=>rt(()=>import("./freemarker2-2AZJBxSu.js"),[],import.meta.url).then(o=>o.TagBracketInterpolationDollar)});ht({id:"freemarker2.tag-angle.interpolation-bracket",aliases:["FreeMarker2 (Angle/Bracket)","Apache FreeMarker2 (Angle/Bracket)"],loader:()=>rt(()=>import("./freemarker2-2AZJBxSu.js"),[],import.meta.url).then(o=>o.TagAngleInterpolationBracket)});ht({id:"freemarker2.tag-bracket.interpolation-bracket",aliases:["FreeMarker2 (Bracket/Bracket)","Apache FreeMarker2 (Bracket/Bracket)"],loader:()=>rt(()=>import("./freemarker2-2AZJBxSu.js"),[],import.meta.url).then(o=>o.TagBracketInterpolationBracket)});ht({id:"freemarker2.tag-auto.interpolation-dollar",aliases:["FreeMarker2 (Auto/Dollar)","Apache FreeMarker2 (Auto/Dollar)"],loader:()=>rt(()=>import("./freemarker2-2AZJBxSu.js"),[],import.meta.url).then(o=>o.TagAutoInterpolationDollar)});ht({id:"freemarker2.tag-auto.interpolation-bracket",aliases:["FreeMarker2 (Auto/Bracket)","Apache FreeMarker2 (Auto/Bracket)"],loader:()=>rt(()=>import("./freemarker2-2AZJBxSu.js"),[],import.meta.url).then(o=>o.TagAutoInterpolationBracket)});ht({id:"go",extensions:[".go"],aliases:["Go"],loader:()=>rt(()=>import("./go-CQdGEiqo.js"),[],import.meta.url)});ht({id:"graphql",extensions:[".graphql",".gql"],aliases:["GraphQL","graphql","gql"],mimetypes:["application/graphql"],loader:()=>rt(()=>import("./graphql-uScX0mLr.js"),[],import.meta.url)});ht({id:"handlebars",extensions:[".handlebars",".hbs"],aliases:["Handlebars","handlebars","hbs"],mimetypes:["text/x-handlebars-template"],loader:()=>rt(()=>import("./handlebars-CAHgTV1F.js"),[],import.meta.url)});ht({id:"hcl",extensions:[".tf",".tfvars",".hcl"],aliases:["Terraform","tf","HCL","hcl"],loader:()=>rt(()=>import("./hcl-CLUKkYLV.js"),[],import.meta.url)});ht({id:"html",extensions:[".html",".htm",".shtml",".xhtml",".mdoc",".jsp",".asp",".aspx",".jshtm"],aliases:["HTML","htm","html","xhtml"],mimetypes:["text/html","text/x-jshtm","text/template","text/ng-template"],loader:()=>rt(()=>import("./html-C2qhnYs-.js"),[],import.meta.url)});ht({id:"ini",extensions:[".ini",".properties",".gitconfig"],filenames:["config",".gitattributes",".gitconfig",".editorconfig"],aliases:["Ini","ini"],loader:()=>rt(()=>import("./ini-yF59P7jx.js"),[],import.meta.url)});ht({id:"java",extensions:[".java",".jav"],aliases:["Java","java"],mimetypes:["text/x-java-source","text/x-java"],loader:()=>rt(()=>import("./java-B4nVP7zA.js"),[],import.meta.url)});ht({id:"javascript",extensions:[".js",".es6",".jsx",".mjs",".cjs"],firstLine:"^#!.*\\bnode",filenames:["jakefile"],aliases:["JavaScript","javascript","js"],mimetypes:["text/javascript"],loader:()=>rt(()=>import("./javascript-D5ZNta1e.js"),__vite__mapDeps([0,1]),import.meta.url)});ht({id:"julia",extensions:[".jl"],aliases:["julia","Julia"],loader:()=>rt(()=>import("./julia-BuzzKf8T.js"),[],import.meta.url)});ht({id:"kotlin",extensions:[".kt",".kts"],aliases:["Kotlin","kotlin"],mimetypes:["text/x-kotlin-source","text/x-kotlin"],loader:()=>rt(()=>import("./kotlin-C3T34NxZ.js"),[],import.meta.url)});ht({id:"less",extensions:[".less"],aliases:["Less","less"],mimetypes:["text/x-less","text/less"],loader:()=>rt(()=>import("./less-_0mhvbjD.js"),[],import.meta.url)});ht({id:"lexon",extensions:[".lex"],aliases:["Lexon"],loader:()=>rt(()=>import("./lexon-BMz0APkk.js"),[],import.meta.url)});ht({id:"lua",extensions:[".lua"],aliases:["Lua","lua"],loader:()=>rt(()=>import("./lua-FbLRz07w.js"),[],import.meta.url)});ht({id:"liquid",extensions:[".liquid",".html.liquid"],aliases:["Liquid","liquid"],mimetypes:["application/liquid"],loader:()=>rt(()=>import("./liquid-y3s4v0wE.js"),[],import.meta.url)});ht({id:"m3",extensions:[".m3",".i3",".mg",".ig"],aliases:["Modula-3","Modula3","modula3","m3"],loader:()=>rt(()=>import("./m3-F3MR2vpL.js"),[],import.meta.url)});ht({id:"markdown",extensions:[".md",".markdown",".mdown",".mkdn",".mkd",".mdwn",".mdtxt",".mdtext"],aliases:["Markdown","markdown"],loader:()=>rt(()=>import("./markdown-BpaYHsZh.js"),[],import.meta.url)});ht({id:"mdx",extensions:[".mdx"],aliases:["MDX","mdx"],loader:()=>rt(()=>import("./mdx-qE5wEUCU.js"),[],import.meta.url)});ht({id:"mips",extensions:[".s"],aliases:["MIPS","MIPS-V"],mimetypes:["text/x-mips","text/mips","text/plaintext"],loader:()=>rt(()=>import("./mips-D2BB_tA0.js"),[],import.meta.url)});ht({id:"msdax",extensions:[".dax",".msdax"],aliases:["DAX","MSDAX"],loader:()=>rt(()=>import("./msdax-Dbqax-4H.js"),[],import.meta.url)});ht({id:"mysql",extensions:[],aliases:["MySQL","mysql"],loader:()=>rt(()=>import("./mysql-BlazkCxF.js"),[],import.meta.url)});ht({id:"objective-c",extensions:[".m"],aliases:["Objective-C"],loader:()=>rt(()=>import("./objective-c-DBolmLrR.js"),[],import.meta.url)});ht({id:"pascal",extensions:[".pas",".p",".pp"],aliases:["Pascal","pas"],mimetypes:["text/x-pascal-source","text/x-pascal"],loader:()=>rt(()=>import("./pascal-C4E8LjYg.js"),[],import.meta.url)});ht({id:"pascaligo",extensions:[".ligo"],aliases:["Pascaligo","ligo"],loader:()=>rt(()=>import("./pascaligo-Z17T2ccY.js"),[],import.meta.url)});ht({id:"perl",extensions:[".pl",".pm"],aliases:["Perl","pl"],loader:()=>rt(()=>import("./perl-COEbQRNw.js"),[],import.meta.url)});ht({id:"pgsql",extensions:[],aliases:["PostgreSQL","postgres","pg","postgre"],loader:()=>rt(()=>import("./pgsql-Dy_Aa0h1.js"),[],import.meta.url)});ht({id:"php",extensions:[".php",".php4",".php5",".phtml",".ctp"],aliases:["PHP","php"],mimetypes:["application/x-php"],loader:()=>rt(()=>import("./php-DZgQod0H.js"),[],import.meta.url)});ht({id:"pla",extensions:[".pla"],loader:()=>rt(()=>import("./pla-Cp8kinq6.js"),[],import.meta.url)});ht({id:"postiats",extensions:[".dats",".sats",".hats"],aliases:["ATS","ATS/Postiats"],loader:()=>rt(()=>import("./postiats-Cc2rLWR_.js"),[],import.meta.url)});ht({id:"powerquery",extensions:[".pq",".pqm"],aliases:["PQ","M","Power Query","Power Query M"],loader:()=>rt(()=>import("./powerquery-0Oii_npw.js"),[],import.meta.url)});ht({id:"powershell",extensions:[".ps1",".psm1",".psd1"],aliases:["PowerShell","powershell","ps","ps1"],loader:()=>rt(()=>import("./powershell-DUtNlkbn.js"),[],import.meta.url)});ht({id:"proto",extensions:[".proto"],aliases:["protobuf","Protocol Buffers"],loader:()=>rt(()=>import("./protobuf-YVfST0Lp.js"),[],import.meta.url)});ht({id:"pug",extensions:[".jade",".pug"],aliases:["Pug","Jade","jade"],loader:()=>rt(()=>import("./pug-Cof0Wj-Z.js"),[],import.meta.url)});ht({id:"python",extensions:[".py",".rpy",".pyw",".cpy",".gyp",".gypi"],aliases:["Python","py"],firstLine:"^#!/.*\\bpython[0-9.-]*\\b",loader:()=>rt(()=>import("./python-CwfoRb3x.js"),[],import.meta.url)});ht({id:"qsharp",extensions:[".qs"],aliases:["Q#","qsharp"],loader:()=>rt(()=>import("./qsharp-iGC6f2xL.js"),[],import.meta.url)});ht({id:"r",extensions:[".r",".rhistory",".rmd",".rprofile",".rt"],aliases:["R","r"],loader:()=>rt(()=>import("./r-DgOh-GpK.js"),[],import.meta.url)});ht({id:"razor",extensions:[".cshtml"],aliases:["Razor","razor"],mimetypes:["text/x-cshtml"],loader:()=>rt(()=>import("./razor-D0o9xwFt.js"),[],import.meta.url)});ht({id:"redis",extensions:[".redis"],aliases:["redis"],loader:()=>rt(()=>import("./redis-CUjHknjG.js"),[],import.meta.url)});ht({id:"redshift",extensions:[],aliases:["Redshift","redshift"],loader:()=>rt(()=>import("./redshift-DpiWUl_b.js"),[],import.meta.url)});ht({id:"restructuredtext",extensions:[".rst"],aliases:["reStructuredText","restructuredtext"],loader:()=>rt(()=>import("./restructuredtext-DoYnpR8y.js"),[],import.meta.url)});ht({id:"ruby",extensions:[".rb",".rbx",".rjs",".gemspec",".pp"],filenames:["rakefile","Gemfile"],aliases:["Ruby","rb"],loader:()=>rt(()=>import("./ruby-8Ngq79DM.js"),[],import.meta.url)});ht({id:"rust",extensions:[".rs",".rlib"],aliases:["Rust","rust"],loader:()=>rt(()=>import("./rust-E66qEhVJ.js"),[],import.meta.url)});ht({id:"sb",extensions:[".sb"],aliases:["Small Basic","sb"],loader:()=>rt(()=>import("./sb-NROjXV9s.js"),[],import.meta.url)});ht({id:"scala",extensions:[".scala",".sc",".sbt"],aliases:["Scala","scala","SBT","Sbt","sbt","Dotty","dotty"],mimetypes:["text/x-scala-source","text/x-scala","text/x-sbt","text/x-dotty"],loader:()=>rt(()=>import("./scala-DNKydVIG.js"),[],import.meta.url)});ht({id:"scheme",extensions:[".scm",".ss",".sch",".rkt"],aliases:["scheme","Scheme"],loader:()=>rt(()=>import("./scheme-gDjqwtwY.js"),[],import.meta.url)});ht({id:"scss",extensions:[".scss"],aliases:["Sass","sass","scss"],mimetypes:["text/x-scss","text/scss"],loader:()=>rt(()=>import("./scss-Nrac8q0b.js"),[],import.meta.url)});ht({id:"shell",extensions:[".sh",".bash"],aliases:["Shell","sh"],loader:()=>rt(()=>import("./shell-CHwqnE9N.js"),[],import.meta.url)});ht({id:"sol",extensions:[".sol"],aliases:["sol","solidity","Solidity"],loader:()=>rt(()=>import("./solidity-DzvweBVM.js"),[],import.meta.url)});ht({id:"aes",extensions:[".aes"],aliases:["aes","sophia","Sophia"],loader:()=>rt(()=>import("./sophia-LwATRHaW.js"),[],import.meta.url)});ht({id:"sparql",extensions:[".rq"],aliases:["sparql","SPARQL"],loader:()=>rt(()=>import("./sparql-5hUL7dXb.js"),[],import.meta.url)});ht({id:"sql",extensions:[".sql"],aliases:["SQL"],loader:()=>rt(()=>import("./sql-CVxjL13O.js"),[],import.meta.url)});ht({id:"st",extensions:[".st",".iecst",".iecplc",".lc3lib",".TcPOU",".TcDUT",".TcGVL",".TcIO"],aliases:["StructuredText","scl","stl"],loader:()=>rt(()=>import("./st-Cc39erT-.js"),[],import.meta.url)});ht({id:"swift",aliases:["Swift","swift"],extensions:[".swift"],mimetypes:["text/swift"],loader:()=>rt(()=>import("./swift-C8fNz67c.js"),[],import.meta.url)});ht({id:"systemverilog",extensions:[".sv",".svh"],aliases:["SV","sv","SystemVerilog","systemverilog"],loader:()=>rt(()=>import("./systemverilog-BFUzWeNg.js"),[],import.meta.url)});ht({id:"verilog",extensions:[".v",".vh"],aliases:["V","v","Verilog","verilog"],loader:()=>rt(()=>import("./systemverilog-BFUzWeNg.js"),[],import.meta.url)});ht({id:"tcl",extensions:[".tcl"],aliases:["tcl","Tcl","tcltk","TclTk","tcl/tk","Tcl/Tk"],loader:()=>rt(()=>import("./tcl-CtpYBwaD.js"),[],import.meta.url)});ht({id:"twig",extensions:[".twig"],aliases:["Twig","twig"],mimetypes:["text/x-twig"],loader:()=>rt(()=>import("./twig-CbPmbPKL.js"),[],import.meta.url)});ht({id:"typescript",extensions:[".ts",".tsx",".cts",".mts"],aliases:["TypeScript","ts","typescript"],mimetypes:["text/typescript"],loader:()=>rt(()=>import("./typescript-Cc8OFXgj.js"),[],import.meta.url)});ht({id:"vb",extensions:[".vb"],aliases:["Visual Basic","vb"],loader:()=>rt(()=>import("./vb-DqkExfjG.js"),[],import.meta.url)});ht({id:"wgsl",extensions:[".wgsl"],aliases:["WebGPU Shading Language","WGSL","wgsl"],loader:()=>rt(()=>import("./wgsl-BkzIWQci.js"),[],import.meta.url)});ht({id:"xml",extensions:[".xml",".xsd",".dtd",".ascx",".csproj",".config",".props",".targets",".wxi",".wxl",".wxs",".xaml",".svg",".svgz",".opf",".xslt",".xsl"],firstLine:"(\\<\\?xml.*)|(\\<svg)|(\\<\\!doctype\\s+svg)",aliases:["XML","xml"],mimetypes:["text/xml","application/xml","application/xaml+xml","application/xml-dtd"],loader:()=>rt(()=>import("./xml-EqmLT65E.js"),[],import.meta.url)});ht({id:"yaml",extensions:[".yaml",".yml"],aliases:["YAML","yaml","YML","yml"],mimetypes:["application/x-yaml","text/x-yaml"],loader:()=>rt(()=>import("./yaml-D205M4Dw.js"),[],import.meta.url)});/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.48.0(0037b13fb5d186fdf1e7df51a9416a2de2b8c670)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var q5e=Object.defineProperty,G5e=Object.getOwnPropertyDescriptor,Y5e=Object.getOwnPropertyNames,Z5e=Object.prototype.hasOwnProperty,Q5e=(o,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of Y5e(e))!Z5e.call(o,n)&&n!==t&&q5e(o,n,{get:()=>e[n],enumerable:!(i=G5e(e,n))||i.enumerable});return o},X5e=(o,e,t)=>(Q5e(o,e,"default"),t),ow={};X5e(ow,IP);var Gz=class{constructor(e,t,i){this._onDidChange=new ow.Emitter,this._languageId=e,this.setOptions(t),this.setModeConfiguration(i)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get modeConfiguration(){return this._modeConfiguration}get diagnosticsOptions(){return this.options}get options(){return this._options}setOptions(e){this._options=e||Object.create(null),this._onDidChange.fire(this)}setDiagnosticsOptions(e){this.setOptions(e)}setModeConfiguration(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)}},Yz={validate:!0,lint:{compatibleVendorPrefixes:"ignore",vendorPrefix:"warning",duplicateProperties:"warning",emptyRules:"warning",importStatement:"ignore",boxModel:"ignore",universalSelector:"ignore",zeroUnits:"ignore",fontFaceProperties:"warning",hexColorLength:"error",argumentsInColorFunction:"error",unknownProperties:"warning",ieHack:"ignore",unknownVendorSpecificProperties:"ignore",propertyIgnoredDueToDisplay:"warning",important:"ignore",float:"ignore",idSelector:"ignore"},data:{useDefaultDataProvider:!0},format:{newlineBetweenSelectors:!0,newlineBetweenRules:!0,spaceAroundSelectorSeparator:!1,braceStyle:"collapse",maxPreserveNewLines:void 0,preserveNewLines:!0}},Zz={completionItems:!0,hovers:!0,documentSymbols:!0,definitions:!0,references:!0,documentHighlights:!0,rename:!0,colors:!0,foldingRanges:!0,diagnostics:!0,selectionRanges:!0,documentFormattingEdits:!0,documentRangeFormattingEdits:!0},jre=new Gz("css",Yz,Zz),Kre=new Gz("scss",Yz,Zz),qre=new Gz("less",Yz,Zz);ow.languages.css={cssDefaults:jre,lessDefaults:qre,scssDefaults:Kre};function Qz(){return rt(()=>import("./cssMode-Dkibzrk9.js"),[],import.meta.url)}ow.languages.onLanguage("less",()=>{Qz().then(o=>o.setupMode(qre))});ow.languages.onLanguage("scss",()=>{Qz().then(o=>o.setupMode(Kre))});ow.languages.onLanguage("css",()=>{Qz().then(o=>o.setupMode(jre))});/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.48.0(0037b13fb5d186fdf1e7df51a9416a2de2b8c670)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var J5e=Object.defineProperty,e3e=Object.getOwnPropertyDescriptor,t3e=Object.getOwnPropertyNames,i3e=Object.prototype.hasOwnProperty,n3e=(o,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of t3e(e))!i3e.call(o,n)&&n!==t&&J5e(o,n,{get:()=>e[n],enumerable:!(i=e3e(e,n))||i.enumerable});return o},s3e=(o,e,t)=>(n3e(o,e,"default"),t),TP={};s3e(TP,IP);var o3e=class{constructor(e,t,i){this._onDidChange=new TP.Emitter,this._languageId=e,this.setOptions(t),this.setModeConfiguration(i)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get options(){return this._options}get modeConfiguration(){return this._modeConfiguration}setOptions(e){this._options=e||Object.create(null),this._onDidChange.fire(this)}setModeConfiguration(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)}},r3e={tabSize:4,insertSpaces:!1,wrapLineLength:120,unformatted:'default": "a, abbr, acronym, b, bdo, big, br, button, cite, code, dfn, em, i, img, input, kbd, label, map, object, q, samp, select, small, span, strong, sub, sup, textarea, tt, var',contentUnformatted:"pre",indentInnerHtml:!1,preserveNewLines:!0,maxPreserveNewLines:void 0,indentHandlebars:!1,endWithNewline:!1,extraLiners:"head, body, /html",wrapAttributes:"auto"},NP={format:r3e,suggest:{},data:{useDefaultDataProvider:!0}};function RP(o){return{completionItems:!0,hovers:!0,documentSymbols:!0,links:!0,documentHighlights:!0,rename:!0,colors:!0,foldingRanges:!0,selectionRanges:!0,diagnostics:o===PL,documentFormattingEdits:o===PL,documentRangeFormattingEdits:o===PL}}var PL="html",HJ="handlebars",zJ="razor",Gre=MP(PL,NP,RP(PL)),a3e=Gre.defaults,Yre=MP(HJ,NP,RP(HJ)),l3e=Yre.defaults,Zre=MP(zJ,NP,RP(zJ)),c3e=Zre.defaults;TP.languages.html={htmlDefaults:a3e,razorDefaults:c3e,handlebarDefaults:l3e,htmlLanguageService:Gre,handlebarLanguageService:Yre,razorLanguageService:Zre,registerHTMLLanguageService:MP};function d3e(){return rt(()=>import("./htmlMode-DOkg1cif.js"),[],import.meta.url)}function MP(o,e=NP,t=RP(o)){const i=new o3e(o,e,t);let n;const s=TP.languages.onLanguage(o,async()=>{n=(await d3e()).setupMode(i)});return{defaults:i,dispose(){s.dispose(),n==null||n.dispose(),n=void 0}}}var u3e=class{constructor(e,t,i){this._onDidChange=new Hre,this._languageId=e,this.setDiagnosticsOptions(t),this.setModeConfiguration(i)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get modeConfiguration(){return this._modeConfiguration}get diagnosticsOptions(){return this._diagnosticsOptions}setDiagnosticsOptions(e){this._diagnosticsOptions=e||Object.create(null),this._onDidChange.fire(this)}setModeConfiguration(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)}},h3e={validate:!0,allowComments:!0,schemas:[],enableSchemaRequest:!1,schemaRequest:"warning",schemaValidation:"warning",comments:"error",trailingCommas:"error"},f3e={documentFormattingEdits:!0,documentRangeFormattingEdits:!0,completionItems:!0,hovers:!0,documentSymbols:!0,tokens:!0,colors:!0,foldingRanges:!0,diagnostics:!0,selectionRanges:!0},Qre=new u3e("json",h3e,f3e),g3e=()=>Xre().then(o=>o.getWorker());sw.json={jsonDefaults:Qre,getWorker:g3e};function Xre(){return rt(()=>import("./jsonMode-JSlsB1ZR.js"),[],import.meta.url)}sw.register({id:"json",extensions:[".json",".bowerrc",".jshintrc",".jscsrc",".eslintrc",".babelrc",".har"],aliases:["JSON","json"],mimetypes:["application/json"]});sw.onLanguage("json",()=>{Xre().then(o=>o.setupMode(Qre))});/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.48.0(0037b13fb5d186fdf1e7df51a9416a2de2b8c670)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var p3e=Object.defineProperty,m3e=Object.getOwnPropertyDescriptor,_3e=Object.getOwnPropertyNames,v3e=Object.prototype.hasOwnProperty,b3e=(o,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of _3e(e))!v3e.call(o,n)&&n!==t&&p3e(o,n,{get:()=>e[n],enumerable:!(i=m3e(e,n))||i.enumerable});return o},C3e=(o,e,t)=>(b3e(o,e,"default"),t),w3e="5.0.2",R1={};C3e(R1,IP);var Jre=(o=>(o[o.None=0]="None",o[o.CommonJS=1]="CommonJS",o[o.AMD=2]="AMD",o[o.UMD=3]="UMD",o[o.System=4]="System",o[o.ES2015=5]="ES2015",o[o.ESNext=99]="ESNext",o))(Jre||{}),eae=(o=>(o[o.None=0]="None",o[o.Preserve=1]="Preserve",o[o.React=2]="React",o[o.ReactNative=3]="ReactNative",o[o.ReactJSX=4]="ReactJSX",o[o.ReactJSXDev=5]="ReactJSXDev",o))(eae||{}),tae=(o=>(o[o.CarriageReturnLineFeed=0]="CarriageReturnLineFeed",o[o.LineFeed=1]="LineFeed",o))(tae||{}),iae=(o=>(o[o.ES3=0]="ES3",o[o.ES5=1]="ES5",o[o.ES2015=2]="ES2015",o[o.ES2016=3]="ES2016",o[o.ES2017=4]="ES2017",o[o.ES2018=5]="ES2018",o[o.ES2019=6]="ES2019",o[o.ES2020=7]="ES2020",o[o.ESNext=99]="ESNext",o[o.JSON=100]="JSON",o[o.Latest=99]="Latest",o))(iae||{}),nae=(o=>(o[o.Classic=1]="Classic",o[o.NodeJs=2]="NodeJs",o))(nae||{}),sae=class{constructor(o,e,t,i,n){this._onDidChange=new R1.Emitter,this._onDidExtraLibsChange=new R1.Emitter,this._extraLibs=Object.create(null),this._removedExtraLibs=Object.create(null),this._eagerModelSync=!1,this.setCompilerOptions(o),this.setDiagnosticsOptions(e),this.setWorkerOptions(t),this.setInlayHintsOptions(i),this.setModeConfiguration(n),this._onDidExtraLibsChangeTimeout=-1}get onDidChange(){return this._onDidChange.event}get onDidExtraLibsChange(){return this._onDidExtraLibsChange.event}get modeConfiguration(){return this._modeConfiguration}get workerOptions(){return this._workerOptions}get inlayHintsOptions(){return this._inlayHintsOptions}getExtraLibs(){return this._extraLibs}addExtraLib(o,e){let t;if(typeof e>"u"?t=`ts:extralib-${Math.random().toString(36).substring(2,15)}`:t=e,this._extraLibs[t]&&this._extraLibs[t].content===o)return{dispose:()=>{}};let i=1;return this._removedExtraLibs[t]&&(i=this._removedExtraLibs[t]+1),this._extraLibs[t]&&(i=this._extraLibs[t].version+1),this._extraLibs[t]={content:o,version:i},this._fireOnDidExtraLibsChangeSoon(),{dispose:()=>{let n=this._extraLibs[t];n&&n.version===i&&(delete this._extraLibs[t],this._removedExtraLibs[t]=i,this._fireOnDidExtraLibsChangeSoon())}}}setExtraLibs(o){for(const e in this._extraLibs)this._removedExtraLibs[e]=this._extraLibs[e].version;if(this._extraLibs=Object.create(null),o&&o.length>0)for(const e of o){const t=e.filePath||`ts:extralib-${Math.random().toString(36).substring(2,15)}`,i=e.content;let n=1;this._removedExtraLibs[t]&&(n=this._removedExtraLibs[t]+1),this._extraLibs[t]={content:i,version:n}}this._fireOnDidExtraLibsChangeSoon()}_fireOnDidExtraLibsChangeSoon(){this._onDidExtraLibsChangeTimeout===-1&&(this._onDidExtraLibsChangeTimeout=window.setTimeout(()=>{this._onDidExtraLibsChangeTimeout=-1,this._onDidExtraLibsChange.fire(void 0)},0))}getCompilerOptions(){return this._compilerOptions}setCompilerOptions(o){this._compilerOptions=o||Object.create(null),this._onDidChange.fire(void 0)}getDiagnosticsOptions(){return this._diagnosticsOptions}setDiagnosticsOptions(o){this._diagnosticsOptions=o||Object.create(null),this._onDidChange.fire(void 0)}setWorkerOptions(o){this._workerOptions=o||Object.create(null),this._onDidChange.fire(void 0)}setInlayHintsOptions(o){this._inlayHintsOptions=o||Object.create(null),this._onDidChange.fire(void 0)}setMaximumWorkerIdleTime(o){}setEagerModelSync(o){this._eagerModelSync=o}getEagerModelSync(){return this._eagerModelSync}setModeConfiguration(o){this._modeConfiguration=o||Object.create(null),this._onDidChange.fire(void 0)}},y3e=w3e,oae={completionItems:!0,hovers:!0,documentSymbols:!0,definitions:!0,references:!0,documentHighlights:!0,rename:!0,diagnostics:!0,documentRangeFormattingEdits:!0,signatureHelp:!0,onTypeFormattingEdits:!0,codeActions:!0,inlayHints:!0},rae=new sae({allowNonTsExtensions:!0,target:99},{noSemanticValidation:!1,noSyntaxValidation:!1,onlyVisible:!1},{},{},oae),aae=new sae({allowNonTsExtensions:!0,allowJs:!0,target:99},{noSemanticValidation:!0,noSyntaxValidation:!1,onlyVisible:!1},{},{},oae),S3e=()=>AP().then(o=>o.getTypeScriptWorker()),L3e=()=>AP().then(o=>o.getJavaScriptWorker());R1.languages.typescript={ModuleKind:Jre,JsxEmit:eae,NewLineKind:tae,ScriptTarget:iae,ModuleResolutionKind:nae,typescriptVersion:y3e,typescriptDefaults:rae,javascriptDefaults:aae,getTypeScriptWorker:S3e,getJavaScriptWorker:L3e};function AP(){return rt(()=>import("./tsMode-C7aig2_d.js"),[],import.meta.url)}R1.languages.onLanguage("typescript",()=>AP().then(o=>o.setupTypeScript(rae)));R1.languages.onLanguage("javascript",()=>AP().then(o=>o.setupJavaScript(aae)));class x3e extends Gr{constructor(){super({id:"diffEditor.toggleCollapseUnchangedRegions",title:di("toggleCollapseUnchangedRegions","Toggle Collapse Unchanged Regions"),icon:Ee.map,toggled:ue.has("config.diffEditor.hideUnchangedRegions.enabled"),precondition:ue.has("isInDiffEditor"),menu:{when:ue.has("isInDiffEditor"),id:P.EditorTitle,order:22,group:"navigation"}})}run(e,...t){const i=e.get($t),n=!i.getValue("diffEditor.hideUnchangedRegions.enabled");i.updateValue("diffEditor.hideUnchangedRegions.enabled",n)}}class lae extends Gr{constructor(){super({id:"diffEditor.toggleShowMovedCodeBlocks",title:di("toggleShowMovedCodeBlocks","Toggle Show Moved Code Blocks"),precondition:ue.has("isInDiffEditor")})}run(e,...t){const i=e.get($t),n=!i.getValue("diffEditor.experimental.showMoves");i.updateValue("diffEditor.experimental.showMoves",n)}}class cae extends Gr{constructor(){super({id:"diffEditor.toggleUseInlineViewWhenSpaceIsLimited",title:di("toggleUseInlineViewWhenSpaceIsLimited","Toggle Use Inline View When Space Is Limited"),precondition:ue.has("isInDiffEditor")})}run(e,...t){const i=e.get($t),n=!i.getValue("diffEditor.useInlineViewWhenSpaceIsLimited");i.updateValue("diffEditor.useInlineViewWhenSpaceIsLimited",n)}}const uk=di("diffEditor","Diff Editor");class D3e extends iu{constructor(){super({id:"diffEditor.switchSide",title:di("switchSide","Switch Side"),icon:Ee.arrowSwap,precondition:ue.has("isInDiffEditor"),f1:!0,category:uk})}runEditorCommand(e,t,i){const n=aw(e);if(n instanceof rg){if(i&&i.dryRun)return{destinationSelection:n.mapToOtherSide().destinationSelection};n.switchSide()}}}class k3e extends iu{constructor(){super({id:"diffEditor.exitCompareMove",title:di("exitCompareMove","Exit Compare Move"),icon:Ee.close,precondition:W.comparingMovedCode,f1:!1,category:uk,keybinding:{weight:1e4,primary:9}})}runEditorCommand(e,t,...i){const n=aw(e);n instanceof rg&&n.exitCompareMove()}}class E3e extends iu{constructor(){super({id:"diffEditor.collapseAllUnchangedRegions",title:di("collapseAllUnchangedRegions","Collapse All Unchanged Regions"),icon:Ee.fold,precondition:ue.has("isInDiffEditor"),f1:!0,category:uk})}runEditorCommand(e,t,...i){const n=aw(e);n instanceof rg&&n.collapseAllUnchangedRegions()}}class I3e extends iu{constructor(){super({id:"diffEditor.showAllUnchangedRegions",title:di("showAllUnchangedRegions","Show All Unchanged Regions"),icon:Ee.unfold,precondition:ue.has("isInDiffEditor"),f1:!0,category:uk})}runEditorCommand(e,t,...i){const n=aw(e);n instanceof rg&&n.showAllUnchangedRegions()}}class TW extends Gr{constructor(){super({id:"diffEditor.revert",title:di("revert","Revert"),f1:!1,category:uk})}run(e,t){var i;const n=T3e(e,t.originalUri,t.modifiedUri);n instanceof rg&&n.revertRangeMappings((i=t.mapping.innerChanges)!==null&&i!==void 0?i:[])}}const dae=di("accessibleDiffViewer","Accessible Diff Viewer");class rw extends Gr{constructor(){super({id:rw.id,title:di("editor.action.accessibleDiffViewer.next","Go to Next Difference"),category:dae,precondition:ue.has("isInDiffEditor"),keybinding:{primary:65,weight:100},f1:!0})}run(e){const t=aw(e);t==null||t.accessibleDiffViewerNext()}}rw.id="editor.action.accessibleDiffViewer.next";class hk extends Gr{constructor(){super({id:hk.id,title:di("editor.action.accessibleDiffViewer.prev","Go to Previous Difference"),category:dae,precondition:ue.has("isInDiffEditor"),keybinding:{primary:1089,weight:100},f1:!0})}run(e){const t=aw(e);t==null||t.accessibleDiffViewerPrev()}}hk.id="editor.action.accessibleDiffViewer.prev";function T3e(o,e,t){return o.get(gi).listDiffEditors().find(s=>{var r,a;const l=s.getModifiedEditor(),c=s.getOriginalEditor();return l&&((r=l.getModel())===null||r===void 0?void 0:r.uri.toString())===t.toString()&&c&&((a=c.getModel())===null||a===void 0?void 0:a.uri.toString())===e.toString()})||null}function aw(o){const t=o.get(gi).listDiffEditors(),i=No();if(i)for(const n of t){const s=n.getContainerDomNode();if(N3e(s,i))return n}return null}function N3e(o,e){let t=e;for(;t;){if(t===o)return!0;t=t.parentElement}return!1}en(x3e);en(lae);en(cae);Ys.appendMenuItem(P.EditorTitle,{command:{id:new cae().desc.id,title:v("useInlineViewWhenSpaceIsLimited","Use Inline View When Space Is Limited"),toggled:ue.has("config.diffEditor.useInlineViewWhenSpaceIsLimited"),precondition:ue.has("isInDiffEditor")},order:11,group:"1_diff",when:ue.and(W.diffEditorRenderSideBySideInlineBreakpointReached,ue.has("isInDiffEditor"))});Ys.appendMenuItem(P.EditorTitle,{command:{id:new lae().desc.id,title:v("showMoves","Show Moved Code Blocks"),icon:Ee.move,toggled:q1.create("config.diffEditor.experimental.showMoves",!0),precondition:ue.has("isInDiffEditor")},order:10,group:"1_diff",when:ue.has("isInDiffEditor")});en(TW);for(const o of[{icon:Ee.arrowRight,key:W.diffEditorInlineMode.toNegated()},{icon:Ee.discard,key:W.diffEditorInlineMode}])Ys.appendMenuItem(P.DiffEditorHunkToolbar,{command:{id:new TW().desc.id,title:v("revertHunk","Revert Block"),icon:o.icon},when:ue.and(W.diffEditorModifiedWritable,o.key),order:5,group:"primary"}),Ys.appendMenuItem(P.DiffEditorSelectionToolbar,{command:{id:new TW().desc.id,title:v("revertSelection","Revert Selection"),icon:o.icon},when:ue.and(W.diffEditorModifiedWritable,o.key),order:5,group:"primary"});en(D3e);en(k3e);en(E3e);en(I3e);Ys.appendMenuItem(P.EditorTitle,{command:{id:rw.id,title:v("Open Accessible Diff Viewer","Open Accessible Diff Viewer"),precondition:ue.has("isInDiffEditor")},order:10,group:"2_diff",when:ue.and(W.accessibleDiffViewerVisible.negate(),ue.has("isInDiffEditor"))});si.registerCommandAlias("editor.action.diffReview.next",rw.id);en(rw);si.registerCommandAlias("editor.action.diffReview.prev",hk.id);en(hk);var R3e=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},M3e=function(o,e){return function(t,i){e(t,i,o)}},NW;const PP=new Be("selectionAnchorSet",!1);let ag=NW=class{static get(e){return e.getContribution(NW.ID)}constructor(e,t){this.editor=e,this.selectionAnchorSetContextKey=PP.bindTo(t),this.modelChangeListener=e.onDidChangeModel(()=>this.selectionAnchorSetContextKey.reset())}setSelectionAnchor(){if(this.editor.hasModel()){const e=this.editor.getPosition();this.editor.changeDecorations(t=>{this.decorationId&&t.removeDecoration(this.decorationId),this.decorationId=t.addDecoration(Xe.fromPositions(e,e),{description:"selection-anchor",stickiness:1,hoverMessage:new qo().appendText(v("selectionAnchor","Selection Anchor")),className:"selection-anchor"})}),this.selectionAnchorSetContextKey.set(!!this.decorationId),_a(v("anchorSet","Anchor set at {0}:{1}",e.lineNumber,e.column))}}goToSelectionAnchor(){if(this.editor.hasModel()&&this.decorationId){const e=this.editor.getModel().getDecorationRange(this.decorationId);e&&this.editor.setPosition(e.getStartPosition())}}selectFromAnchorToCursor(){if(this.editor.hasModel()&&this.decorationId){const e=this.editor.getModel().getDecorationRange(this.decorationId);if(e){const t=this.editor.getPosition();this.editor.setSelection(Xe.fromPositions(e.getStartPosition(),t)),this.cancelSelectionAnchor()}}}cancelSelectionAnchor(){if(this.decorationId){const e=this.decorationId;this.editor.changeDecorations(t=>{t.removeDecoration(e),this.decorationId=void 0}),this.selectionAnchorSetContextKey.set(!1)}}dispose(){this.cancelSelectionAnchor(),this.modelChangeListener.dispose()}};ag.ID="editor.contrib.selectionAnchorController";ag=NW=R3e([M3e(1,bt)],ag);class A3e extends Ke{constructor(){super({id:"editor.action.setSelectionAnchor",label:v("setSelectionAnchor","Set Selection Anchor"),alias:"Set Selection Anchor",precondition:void 0,kbOpts:{kbExpr:W.editorTextFocus,primary:Fs(2089,2080),weight:100}})}async run(e,t){var i;(i=ag.get(t))===null||i===void 0||i.setSelectionAnchor()}}class P3e extends Ke{constructor(){super({id:"editor.action.goToSelectionAnchor",label:v("goToSelectionAnchor","Go to Selection Anchor"),alias:"Go to Selection Anchor",precondition:PP})}async run(e,t){var i;(i=ag.get(t))===null||i===void 0||i.goToSelectionAnchor()}}class O3e extends Ke{constructor(){super({id:"editor.action.selectFromAnchorToCursor",label:v("selectFromAnchorToCursor","Select from Anchor to Cursor"),alias:"Select from Anchor to Cursor",precondition:PP,kbOpts:{kbExpr:W.editorTextFocus,primary:Fs(2089,2089),weight:100}})}async run(e,t){var i;(i=ag.get(t))===null||i===void 0||i.selectFromAnchorToCursor()}}class F3e extends Ke{constructor(){super({id:"editor.action.cancelSelectionAnchor",label:v("cancelSelectionAnchor","Cancel Selection Anchor"),alias:"Cancel Selection Anchor",precondition:PP,kbOpts:{kbExpr:W.editorTextFocus,primary:9,weight:100}})}async run(e,t){var i;(i=ag.get(t))===null||i===void 0||i.cancelSelectionAnchor()}}pi(ag.ID,ag,4);Ce(A3e);Ce(P3e);Ce(O3e);Ce(F3e);const B3e=V("editorOverviewRuler.bracketMatchForeground",{dark:"#A0A0A0",light:"#A0A0A0",hcDark:"#A0A0A0",hcLight:"#A0A0A0"},v("overviewRulerBracketMatchForeground","Overview ruler marker color for matching brackets."));class W3e extends Ke{constructor(){super({id:"editor.action.jumpToBracket",label:v("smartSelect.jumpBracket","Go to Bracket"),alias:"Go to Bracket",precondition:void 0,kbOpts:{kbExpr:W.editorTextFocus,primary:3165,weight:100}})}run(e,t){var i;(i=jc.get(t))===null||i===void 0||i.jumpToBracket()}}class V3e extends Ke{constructor(){super({id:"editor.action.selectToBracket",label:v("smartSelect.selectToBracket","Select to Bracket"),alias:"Select to Bracket",precondition:void 0,metadata:{description:di("smartSelect.selectToBracketDescription","Select the text inside and including the brackets or curly braces"),args:[{name:"args",schema:{type:"object",properties:{selectBrackets:{type:"boolean",default:!0}}}}]}})}run(e,t,i){var n;let s=!0;i&&i.selectBrackets===!1&&(s=!1),(n=jc.get(t))===null||n===void 0||n.selectToBracket(s)}}class H3e extends Ke{constructor(){super({id:"editor.action.removeBrackets",label:v("smartSelect.removeBrackets","Remove Brackets"),alias:"Remove Brackets",precondition:void 0,kbOpts:{kbExpr:W.editorTextFocus,primary:2561,weight:100}})}run(e,t){var i;(i=jc.get(t))===null||i===void 0||i.removeBrackets(this.id)}}class z3e{constructor(e,t,i){this.position=e,this.brackets=t,this.options=i}}class jc extends J{static get(e){return e.getContribution(jc.ID)}constructor(e){super(),this._editor=e,this._lastBracketsData=[],this._lastVersionId=0,this._decorations=this._editor.createDecorationsCollection(),this._updateBracketsSoon=this._register(new Ui(()=>this._updateBrackets(),50)),this._matchBrackets=this._editor.getOption(72),this._updateBracketsSoon.schedule(),this._register(e.onDidChangeCursorPosition(t=>{this._matchBrackets!=="never"&&this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModelContent(t=>{this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModel(t=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModelLanguageConfiguration(t=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeConfiguration(t=>{t.hasChanged(72)&&(this._matchBrackets=this._editor.getOption(72),this._decorations.clear(),this._lastBracketsData=[],this._lastVersionId=0,this._updateBracketsSoon.schedule())})),this._register(e.onDidBlurEditorWidget(()=>{this._updateBracketsSoon.schedule()})),this._register(e.onDidFocusEditorWidget(()=>{this._updateBracketsSoon.schedule()}))}jumpToBracket(){if(!this._editor.hasModel())return;const e=this._editor.getModel(),t=this._editor.getSelections().map(i=>{const n=i.getStartPosition(),s=e.bracketPairs.matchBracket(n);let r=null;if(s)s[0].containsPosition(n)&&!s[1].containsPosition(n)?r=s[1].getStartPosition():s[1].containsPosition(n)&&(r=s[0].getStartPosition());else{const a=e.bracketPairs.findEnclosingBrackets(n);if(a)r=a[1].getStartPosition();else{const l=e.bracketPairs.findNextBracket(n);l&&l.range&&(r=l.range.getStartPosition())}}return r?new Xe(r.lineNumber,r.column,r.lineNumber,r.column):new Xe(n.lineNumber,n.column,n.lineNumber,n.column)});this._editor.setSelections(t),this._editor.revealRange(t[0])}selectToBracket(e){if(!this._editor.hasModel())return;const t=this._editor.getModel(),i=[];this._editor.getSelections().forEach(n=>{const s=n.getStartPosition();let r=t.bracketPairs.matchBracket(s);if(!r&&(r=t.bracketPairs.findEnclosingBrackets(s),!r)){const c=t.bracketPairs.findNextBracket(s);c&&c.range&&(r=t.bracketPairs.matchBracket(c.range.getStartPosition()))}let a=null,l=null;if(r){r.sort(A.compareRangesUsingStarts);const[c,u]=r;if(a=e?c.getStartPosition():c.getEndPosition(),l=e?u.getEndPosition():u.getStartPosition(),u.containsPosition(s)){const f=a;a=l,l=f}}a&&l&&i.push(new Xe(a.lineNumber,a.column,l.lineNumber,l.column))}),i.length>0&&(this._editor.setSelections(i),this._editor.revealRange(i[0]))}removeBrackets(e){if(!this._editor.hasModel())return;const t=this._editor.getModel();this._editor.getSelections().forEach(i=>{const n=i.getPosition();let s=t.bracketPairs.matchBracket(n);s||(s=t.bracketPairs.findEnclosingBrackets(n)),s&&(this._editor.pushUndoStop(),this._editor.executeEdits(e,[{range:s[0],text:""},{range:s[1],text:""}]),this._editor.pushUndoStop())})}_updateBrackets(){if(this._matchBrackets==="never")return;this._recomputeBrackets();const e=[];let t=0;for(const i of this._lastBracketsData){const n=i.brackets;n&&(e[t++]={range:n[0],options:i.options},e[t++]={range:n[1],options:i.options})}this._decorations.set(e)}_recomputeBrackets(){if(!this._editor.hasModel()||!this._editor.hasWidgetFocus()){this._lastBracketsData=[],this._lastVersionId=0;return}const e=this._editor.getSelections();if(e.length>100){this._lastBracketsData=[],this._lastVersionId=0;return}const t=this._editor.getModel(),i=t.getVersionId();let n=[];this._lastVersionId===i&&(n=this._lastBracketsData);const s=[];let r=0;for(let f=0,g=e.length;f<g;f++){const p=e[f];p.isEmpty()&&(s[r++]=p.getStartPosition())}s.length>1&&s.sort(Z.compare);const a=[];let l=0,c=0;const u=n.length;for(let f=0,g=s.length;f<g;f++){const p=s[f];for(;c<u&&n[c].position.isBefore(p);)c++;if(c<u&&n[c].position.equals(p))a[l++]=n[c];else{let _=t.bracketPairs.matchBracket(p,20),b=jc._DECORATION_OPTIONS_WITH_OVERVIEW_RULER;!_&&this._matchBrackets==="always"&&(_=t.bracketPairs.findEnclosingBrackets(p,20),b=jc._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER),a[l++]=new z3e(p,_,b)}}this._lastBracketsData=a,this._lastVersionId=i}}jc.ID="editor.contrib.bracketMatchingController";jc._DECORATION_OPTIONS_WITH_OVERVIEW_RULER=Rt.register({description:"bracket-match-overview",stickiness:1,className:"bracket-match",overviewRuler:{color:Xn(B3e),position:kl.Center}});jc._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER=Rt.register({description:"bracket-match-no-overview",stickiness:1,className:"bracket-match"});pi(jc.ID,jc,1);Ce(V3e);Ce(W3e);Ce(H3e);Ys.appendMenuItem(P.MenubarGoMenu,{group:"5_infile_nav",command:{id:"editor.action.jumpToBracket",title:v({key:"miGoToBracket",comment:["&& denotes a mnemonic"]},"Go to &&Bracket")},order:2});class U3e{constructor(e,t){this._selection=e,this._isMovingLeft=t}getEditOperations(e,t){if(this._selection.startLineNumber!==this._selection.endLineNumber||this._selection.isEmpty())return;const i=this._selection.startLineNumber,n=this._selection.startColumn,s=this._selection.endColumn;if(!(this._isMovingLeft&&n===1)&&!(!this._isMovingLeft&&s===e.getLineMaxColumn(i)))if(this._isMovingLeft){const r=new A(i,n-1,i,n),a=e.getValueInRange(r);t.addEditOperation(r,null),t.addEditOperation(new A(i,s,i,s),a)}else{const r=new A(i,s,i,s+1),a=e.getValueInRange(r);t.addEditOperation(r,null),t.addEditOperation(new A(i,n,i,n),a)}}computeCursorState(e,t){return this._isMovingLeft?new Xe(this._selection.startLineNumber,this._selection.startColumn-1,this._selection.endLineNumber,this._selection.endColumn-1):new Xe(this._selection.startLineNumber,this._selection.startColumn+1,this._selection.endLineNumber,this._selection.endColumn+1)}}class uae extends Ke{constructor(e,t){super(t),this.left=e}run(e,t){if(!t.hasModel())return;const i=[],n=t.getSelections();for(const s of n)i.push(new U3e(s,this.left));t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop()}}class $3e extends uae{constructor(){super(!0,{id:"editor.action.moveCarretLeftAction",label:v("caret.moveLeft","Move Selected Text Left"),alias:"Move Selected Text Left",precondition:W.writable})}}class j3e extends uae{constructor(){super(!1,{id:"editor.action.moveCarretRightAction",label:v("caret.moveRight","Move Selected Text Right"),alias:"Move Selected Text Right",precondition:W.writable})}}Ce($3e);Ce(j3e);class K3e extends Ke{constructor(){super({id:"editor.action.transposeLetters",label:v("transposeLetters.label","Transpose Letters"),alias:"Transpose Letters",precondition:W.writable,kbOpts:{kbExpr:W.textInputFocus,primary:0,mac:{primary:306},weight:100}})}run(e,t){if(!t.hasModel())return;const i=t.getModel(),n=[],s=t.getSelections();for(const r of s){if(!r.isEmpty())continue;const a=r.startLineNumber,l=r.startColumn,c=i.getLineMaxColumn(a);if(a===1&&(l===1||l===2&&c===2))continue;const u=l===c?r.getPosition():Ni.rightPosition(i,r.getPosition().lineNumber,r.getPosition().column),f=Ni.leftPosition(i,u),g=Ni.leftPosition(i,f),p=i.getValueInRange(A.fromPositions(g,f)),_=i.getValueInRange(A.fromPositions(f,u)),b=A.fromPositions(g,u);n.push(new Do(b,_+p))}n.length>0&&(t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop())}}Ce(K3e);const OP=function(){if(typeof crypto=="object"&&typeof crypto.randomUUID=="function")return crypto.randomUUID.bind(crypto);let o;typeof crypto=="object"&&typeof crypto.getRandomValues=="function"?o=crypto.getRandomValues.bind(crypto):o=function(i){for(let n=0;n<i.length;n++)i[n]=Math.floor(Math.random()*256);return i};const e=new Uint8Array(16),t=[];for(let i=0;i<256;i++)t.push(i.toString(16).padStart(2,"0"));return function(){o(e),e[6]=e[6]&15|64,e[8]=e[8]&63|128;let n=0,s="";return s+=t[e[n++]],s+=t[e[n++]],s+=t[e[n++]],s+=t[e[n++]],s+="-",s+=t[e[n++]],s+=t[e[n++]],s+="-",s+=t[e[n++]],s+=t[e[n++]],s+="-",s+=t[e[n++]],s+=t[e[n++]],s+="-",s+=t[e[n++]],s+=t[e[n++]],s+=t[e[n++]],s+=t[e[n++]],s+=t[e[n++]],s+=t[e[n++]],s}}();function Xz(o){return{asString:async()=>o,asFile:()=>{},value:typeof o=="string"?o:void 0}}function q3e(o,e,t){const i={id:OP(),name:o,uri:e,data:t};return{asString:async()=>"",asFile:()=>i,value:void 0}}class hae{constructor(){this._entries=new Map}get size(){let e=0;for(const t of this._entries)e++;return e}has(e){return this._entries.has(this.toKey(e))}matches(e){const t=[...this._entries.keys()];return ii.some(this,([i,n])=>n.asFile())&&t.push("files"),gae(AM(e),t)}get(e){var t;return(t=this._entries.get(this.toKey(e)))===null||t===void 0?void 0:t[0]}append(e,t){const i=this._entries.get(e);i?i.push(t):this._entries.set(this.toKey(e),[t])}replace(e,t){this._entries.set(this.toKey(e),[t])}delete(e){this._entries.delete(this.toKey(e))}*[Symbol.iterator](){for(const[e,t]of this._entries)for(const i of t)yield[e,i]}toKey(e){return AM(e)}}function AM(o){return o.toLowerCase()}function fae(o,e){return gae(AM(o),e.map(AM))}function gae(o,e){if(o==="*/*")return e.length>0;if(e.includes(o))return!0;const t=o.match(/^([a-z]+)\/([a-z]+|\*)$/i);if(!t)return!1;const[i,n,s]=t;return s==="*"?e.some(r=>r.startsWith(n+"/")):!1}const FP=Object.freeze({create:o=>eg(o.map(e=>e.toString())).join(`\r
`),split:o=>o.split(`\r
`),parse:o=>FP.split(o).filter(e=>!e.startsWith("#"))});class zi{constructor(e){this.value=e}equals(e){return this.value===e.value}contains(e){return this.equals(e)||this.value===""||e.value.startsWith(this.value+zi.sep)}intersects(e){return this.contains(e)||e.contains(this)}append(...e){return new zi((this.value?[this.value,...e]:e).join(zi.sep))}}zi.sep=".";zi.None=new zi("@@none@@");zi.Empty=new zi("");const UJ={EDITORS:"CodeEditors",FILES:"CodeFiles"};class G3e{}const Y3e={DragAndDropContribution:"workbench.contributions.dragAndDrop"};$n.add(Y3e.DragAndDropContribution,new G3e);class iD{constructor(){}static getInstance(){return iD.INSTANCE}hasData(e){return e&&e===this.proto}getData(e){if(this.hasData(e))return this.data}}iD.INSTANCE=new iD;function pae(o){const e=new hae;for(const t of o.items){const i=t.type;if(t.kind==="string"){const n=new Promise(s=>t.getAsString(s));e.append(i,Xz(n))}else if(t.kind==="file"){const n=t.getAsFile();n&&e.append(i,Z3e(n))}}return e}function Z3e(o){const e=o.path?gt.parse(o.path):void 0;return q3e(o.name,e,async()=>new Uint8Array(await o.arrayBuffer()))}const Q3e=Object.freeze([UJ.EDITORS,UJ.FILES,Ox.RESOURCES,Ox.INTERNAL_URI_LIST]);function mae(o,e=!1){const t=pae(o),i=t.get(Ox.INTERNAL_URI_LIST);if(i)t.replace(ns.uriList,i);else if(e||!t.has(ns.uriList)){const n=[];for(const s of o.items){const r=s.getAsFile();if(r){const a=r.path;try{a?n.push(gt.file(a).toString()):n.push(gt.parse(r.name,!0).toString())}catch{}}}n.length&&t.replace(ns.uriList,Xz(FP.create(n)))}for(const n of Q3e)t.delete(n);return t}var Jz=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},nD=function(o,e){return function(t,i){e(t,i,o)}};class eU{async provideDocumentPasteEdits(e,t,i,n,s){const r=await this.getEdit(i,s);if(r)return{dispose(){},edits:[{insertText:r.insertText,title:r.title,kind:r.kind,handledMimeType:r.handledMimeType,yieldTo:r.yieldTo}]}}async provideDocumentOnDropEdits(e,t,i,n){const s=await this.getEdit(i,n);return s?[{insertText:s.insertText,title:s.title,kind:s.kind,handledMimeType:s.handledMimeType,yieldTo:s.yieldTo}]:void 0}}class lg extends eU{constructor(){super(...arguments),this.kind=lg.kind,this.dropMimeTypes=[ns.text],this.pasteMimeTypes=[ns.text]}async getEdit(e,t){const i=e.get(ns.text);if(!i||e.has(ns.uriList))return;const n=await i.asString();return{handledMimeType:ns.text,title:v("text.label","Insert Plain Text"),insertText:n,kind:this.kind}}}lg.id="text";lg.kind=new zi("text.plain");class _ae extends eU{constructor(){super(...arguments),this.kind=new zi("uri.absolute"),this.dropMimeTypes=[ns.uriList],this.pasteMimeTypes=[ns.uriList]}async getEdit(e,t){const i=await vae(e);if(!i.length||t.isCancellationRequested)return;let n=0;const s=i.map(({uri:a,originalText:l})=>a.scheme===Pt.file?a.fsPath:(n++,l)).join(" ");let r;return n>0?r=i.length>1?v("defaultDropProvider.uriList.uris","Insert Uris"):v("defaultDropProvider.uriList.uri","Insert Uri"):r=i.length>1?v("defaultDropProvider.uriList.paths","Insert Paths"):v("defaultDropProvider.uriList.path","Insert Path"),{handledMimeType:ns.uriList,insertText:s,title:r,kind:this.kind}}}let PM=class extends eU{constructor(e){super(),this._workspaceContextService=e,this.kind=new zi("uri.relative"),this.dropMimeTypes=[ns.uriList],this.pasteMimeTypes=[ns.uriList]}async getEdit(e,t){const i=await vae(e);if(!i.length||t.isCancellationRequested)return;const n=Ud(i.map(({uri:s})=>{const r=this._workspaceContextService.getWorkspaceFolder(s);return r?wIe(r.uri,s):void 0}));if(n.length)return{handledMimeType:ns.uriList,insertText:n.join(" "),title:i.length>1?v("defaultDropProvider.uriList.relativePaths","Insert Relative Paths"):v("defaultDropProvider.uriList.relativePath","Insert Relative Path"),kind:this.kind}}};PM=Jz([nD(0,Fv)],PM);class X3e{constructor(){this.kind=new zi("html"),this.pasteMimeTypes=["text/html"],this._yieldTo=[{mimeType:ns.text}]}async provideDocumentPasteEdits(e,t,i,n,s){var r;if(n.triggerKind!==XL.PasteAs&&!(!((r=n.only)===null||r===void 0)&&r.contains(this.kind)))return;const a=i.get("text/html"),l=await(a==null?void 0:a.asString());if(!(!l||s.isCancellationRequested))return{dispose(){},edits:[{insertText:l,yieldTo:this._yieldTo,title:v("pasteHtmlLabel","Insert HTML"),kind:this.kind}]}}}async function vae(o){const e=o.get(ns.uriList);if(!e)return[];const t=await e.asString(),i=[];for(const n of FP.parse(t))try{i.push({uri:gt.parse(n),originalText:n})}catch{}return i}let RW=class extends J{constructor(e,t){super(),this._register(e.documentOnDropEditProvider.register("*",new lg)),this._register(e.documentOnDropEditProvider.register("*",new _ae)),this._register(e.documentOnDropEditProvider.register("*",new PM(t)))}};RW=Jz([nD(0,Ze),nD(1,Fv)],RW);let MW=class extends J{constructor(e,t){super(),this._register(e.documentPasteEditProvider.register("*",new lg)),this._register(e.documentPasteEditProvider.register("*",new _ae)),this._register(e.documentPasteEditProvider.register("*",new PM(t))),this._register(e.documentPasteEditProvider.register("*",new X3e))}};MW=Jz([nD(0,Ze),nD(1,Fv)],MW);class Pc{constructor(){this.value="",this.pos=0}static isDigitCharacter(e){return e>=48&&e<=57}static isVariableCharacter(e){return e===95||e>=97&&e<=122||e>=65&&e<=90}text(e){this.value=e,this.pos=0}tokenText(e){return this.value.substr(e.pos,e.len)}next(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};const e=this.pos;let t=0,i=this.value.charCodeAt(e),n;if(n=Pc._table[i],typeof n=="number")return this.pos+=1,{type:n,pos:e,len:1};if(Pc.isDigitCharacter(i)){n=8;do t+=1,i=this.value.charCodeAt(e+t);while(Pc.isDigitCharacter(i));return this.pos+=t,{type:n,pos:e,len:t}}if(Pc.isVariableCharacter(i)){n=9;do i=this.value.charCodeAt(e+ ++t);while(Pc.isVariableCharacter(i)||Pc.isDigitCharacter(i));return this.pos+=t,{type:n,pos:e,len:t}}n=10;do t+=1,i=this.value.charCodeAt(e+t);while(!isNaN(i)&&typeof Pc._table[i]>"u"&&!Pc.isDigitCharacter(i)&&!Pc.isVariableCharacter(i));return this.pos+=t,{type:n,pos:e,len:t}}}Pc._table={36:0,58:1,44:2,123:3,125:4,92:5,47:6,124:7,43:11,45:12,63:13};class lw{constructor(){this._children=[]}appendChild(e){return e instanceof Ar&&this._children[this._children.length-1]instanceof Ar?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this}replace(e,t){const{parent:i}=e,n=i.children.indexOf(e),s=i.children.slice(0);s.splice(n,1,...t),i._children=s,function r(a,l){for(const c of a)c.parent=l,r(c.children,c)}(t,i)}get children(){return this._children}get rightMostDescendant(){return this._children.length>0?this._children[this._children.length-1].rightMostDescendant:this}get snippet(){let e=this;for(;;){if(!e)return;if(e instanceof fk)return e;e=e.parent}}toString(){return this.children.reduce((e,t)=>e+t.toString(),"")}len(){return 0}}class Ar extends lw{constructor(e){super(),this.value=e}toString(){return this.value}len(){return this.value.length}clone(){return new Ar(this.value)}}class bae extends lw{}class Ql extends bae{static compareByIndex(e,t){return e.index===t.index?0:e.isFinalTabstop?1:t.isFinalTabstop||e.index<t.index?-1:e.index>t.index?1:0}constructor(e){super(),this.index=e}get isFinalTabstop(){return this.index===0}get choice(){return this._children.length===1&&this._children[0]instanceof cw?this._children[0]:void 0}clone(){const e=new Ql(this.index);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(t=>t.clone()),e}}class cw extends lw{constructor(){super(...arguments),this.options=[]}appendChild(e){return e instanceof Ar&&(e.parent=this,this.options.push(e)),this}toString(){return this.options[0].value}len(){return this.options[0].len()}clone(){const e=new cw;return this.options.forEach(e.appendChild,e),e}}class tU extends lw{constructor(){super(...arguments),this.regexp=new RegExp("")}resolve(e){const t=this;let i=!1,n=e.replace(this.regexp,function(){return i=!0,t._replace(Array.prototype.slice.call(arguments,0,-2))});return!i&&this._children.some(s=>s instanceof Sd&&!!s.elseValue)&&(n=this._replace([])),n}_replace(e){let t="";for(const i of this._children)if(i instanceof Sd){let n=e[i.index]||"";n=i.resolve(n),t+=n}else t+=i.toString();return t}toString(){return""}clone(){const e=new tU;return e.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),e._children=this.children.map(t=>t.clone()),e}}class Sd extends lw{constructor(e,t,i,n){super(),this.index=e,this.shorthandName=t,this.ifValue=i,this.elseValue=n}resolve(e){return this.shorthandName==="upcase"?e?e.toLocaleUpperCase():"":this.shorthandName==="downcase"?e?e.toLocaleLowerCase():"":this.shorthandName==="capitalize"?e?e[0].toLocaleUpperCase()+e.substr(1):"":this.shorthandName==="pascalcase"?e?this._toPascalCase(e):"":this.shorthandName==="camelcase"?e?this._toCamelCase(e):"":e&&typeof this.ifValue=="string"?this.ifValue:!e&&typeof this.elseValue=="string"?this.elseValue:e||""}_toPascalCase(e){const t=e.match(/[a-z0-9]+/gi);return t?t.map(i=>i.charAt(0).toUpperCase()+i.substr(1)).join(""):e}_toCamelCase(e){const t=e.match(/[a-z0-9]+/gi);return t?t.map((i,n)=>n===0?i.charAt(0).toLowerCase()+i.substr(1):i.charAt(0).toUpperCase()+i.substr(1)).join(""):e}clone(){return new Sd(this.index,this.shorthandName,this.ifValue,this.elseValue)}}class sD extends bae{constructor(e){super(),this.name=e}resolve(e){let t=e.resolve(this);return this.transform&&(t=this.transform.resolve(t||"")),t!==void 0?(this._children=[new Ar(t)],!0):!1}clone(){const e=new sD(this.name);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(t=>t.clone()),e}}function $J(o,e){const t=[...o];for(;t.length>0;){const i=t.shift();if(!e(i))break;t.unshift(...i.children)}}class fk extends lw{get placeholderInfo(){if(!this._placeholders){const e=[];let t;this.walk(function(i){return i instanceof Ql&&(e.push(i),t=!t||t.index<i.index?i:t),!0}),this._placeholders={all:e,last:t}}return this._placeholders}get placeholders(){const{all:e}=this.placeholderInfo;return e}offset(e){let t=0,i=!1;return this.walk(n=>n===e?(i=!0,!1):(t+=n.len(),!0)),i?t:-1}fullLen(e){let t=0;return $J([e],i=>(t+=i.len(),!0)),t}enclosingPlaceholders(e){const t=[];let{parent:i}=e;for(;i;)i instanceof Ql&&t.push(i),i=i.parent;return t}resolveVariables(e){return this.walk(t=>(t instanceof sD&&t.resolve(e)&&(this._placeholders=void 0),!0)),this}appendChild(e){return this._placeholders=void 0,super.appendChild(e)}replace(e,t){return this._placeholders=void 0,super.replace(e,t)}clone(){const e=new fk;return this._children=this.children.map(t=>t.clone()),e}walk(e){$J(this.children,e)}}class Uv{constructor(){this._scanner=new Pc,this._token={type:14,pos:0,len:0}}static escape(e){return e.replace(/\$|}|\\/g,"\\$&")}static guessNeedsClipboard(e){return/\${?CLIPBOARD/.test(e)}parse(e,t,i){const n=new fk;return this.parseFragment(e,n),this.ensureFinalTabstop(n,i??!1,t??!1),n}parseFragment(e,t){const i=t.children.length;for(this._scanner.text(e),this._token=this._scanner.next();this._parse(t););const n=new Map,s=[];t.walk(l=>(l instanceof Ql&&(l.isFinalTabstop?n.set(0,void 0):!n.has(l.index)&&l.children.length>0?n.set(l.index,l.children):s.push(l)),!0));const r=(l,c)=>{const u=n.get(l.index);if(!u)return;const f=new Ql(l.index);f.transform=l.transform;for(const g of u){const p=g.clone();f.appendChild(p),p instanceof Ql&&n.has(p.index)&&!c.has(p.index)&&(c.add(p.index),r(p,c),c.delete(p.index))}t.replace(l,[f])},a=new Set;for(const l of s)r(l,a);return t.children.slice(i)}ensureFinalTabstop(e,t,i){(t||i&&e.placeholders.length>0)&&(e.placeholders.find(s=>s.index===0)||e.appendChild(new Ql(0)))}_accept(e,t){if(e===void 0||this._token.type===e){const i=t?this._scanner.tokenText(this._token):!0;return this._token=this._scanner.next(),i}return!1}_backTo(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1}_until(e){const t=this._token;for(;this._token.type!==e;){if(this._token.type===14)return!1;if(this._token.type===5){const n=this._scanner.next();if(n.type!==0&&n.type!==4&&n.type!==5)return!1}this._token=this._scanner.next()}const i=this._scanner.value.substring(t.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),i}_parse(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)}_parseEscaped(e){let t;return(t=this._accept(5,!0))?(t=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||t,e.appendChild(new Ar(t)),!0):!1}_parseTabstopOrVariableName(e){let t;const i=this._token;return this._accept(0)&&(t=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(t)?new Ql(Number(t)):new sD(t)),!0):this._backTo(i)}_parseComplexPlaceholder(e){let t;const i=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(8,!0))))return this._backTo(i);const s=new Ql(Number(t));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(s),!0;if(!this._parse(s))return e.appendChild(new Ar("${"+t+":")),s.children.forEach(e.appendChild,e),!0}else if(s.index>0&&this._accept(7)){const r=new cw;for(;;){if(this._parseChoiceElement(r)){if(this._accept(2))continue;if(this._accept(7)&&(s.appendChild(r),this._accept(4)))return e.appendChild(s),!0}return this._backTo(i),!1}}else return this._accept(6)?this._parseTransform(s)?(e.appendChild(s),!0):(this._backTo(i),!1):this._accept(4)?(e.appendChild(s),!0):this._backTo(i)}_parseChoiceElement(e){const t=this._token,i=[];for(;!(this._token.type===2||this._token.type===7);){let n;if((n=this._accept(5,!0))?n=this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||n:n=this._accept(void 0,!0),!n)return this._backTo(t),!1;i.push(n)}return i.length===0?(this._backTo(t),!1):(e.appendChild(new Ar(i.join(""))),!0)}_parseComplexVariable(e){let t;const i=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(9,!0))))return this._backTo(i);const s=new sD(t);if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(s),!0;if(!this._parse(s))return e.appendChild(new Ar("${"+t+":")),s.children.forEach(e.appendChild,e),!0}else return this._accept(6)?this._parseTransform(s)?(e.appendChild(s),!0):(this._backTo(i),!1):this._accept(4)?(e.appendChild(s),!0):this._backTo(i)}_parseTransform(e){const t=new tU;let i="",n="";for(;!this._accept(6);){let s;if(s=this._accept(5,!0)){s=this._accept(6,!0)||s,i+=s;continue}if(this._token.type!==14){i+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){let s;if(s=this._accept(5,!0)){s=this._accept(5,!0)||this._accept(6,!0)||s,t.appendChild(new Ar(s));continue}if(!(this._parseFormatString(t)||this._parseAnything(t)))return!1}for(;!this._accept(4);){if(this._token.type!==14){n+=this._accept(void 0,!0);continue}return!1}try{t.regexp=new RegExp(i,n)}catch{return!1}return e.transform=t,!0}_parseFormatString(e){const t=this._token;if(!this._accept(0))return!1;let i=!1;this._accept(3)&&(i=!0);const n=this._accept(8,!0);if(n)if(i){if(this._accept(4))return e.appendChild(new Sd(Number(n))),!0;if(!this._accept(1))return this._backTo(t),!1}else return e.appendChild(new Sd(Number(n))),!0;else return this._backTo(t),!1;if(this._accept(6)){const s=this._accept(9,!0);return!s||!this._accept(4)?(this._backTo(t),!1):(e.appendChild(new Sd(Number(n),s)),!0)}else if(this._accept(11)){const s=this._until(4);if(s)return e.appendChild(new Sd(Number(n),void 0,s,void 0)),!0}else if(this._accept(12)){const s=this._until(4);if(s)return e.appendChild(new Sd(Number(n),void 0,void 0,s)),!0}else if(this._accept(13)){const s=this._until(1);if(s){const r=this._until(4);if(r)return e.appendChild(new Sd(Number(n),void 0,s,r)),!0}}else{const s=this._until(4);if(s)return e.appendChild(new Sd(Number(n),void 0,void 0,s)),!0}return this._backTo(t),!1}_parseAnything(e){return this._token.type!==14?(e.appendChild(new Ar(this._scanner.tokenText(this._token))),this._accept(void 0),!0):!1}}function Cae(o,e,t){var i,n,s,r;return(typeof t.insertText=="string"?t.insertText==="":t.insertText.snippet==="")?{edits:(n=(i=t.additionalEdit)===null||i===void 0?void 0:i.edits)!==null&&n!==void 0?n:[]}:{edits:[...e.map(a=>new Zp(o,{range:a,text:typeof t.insertText=="string"?Uv.escape(t.insertText)+"$0":t.insertText.snippet,insertAsSnippet:!0})),...(r=(s=t.additionalEdit)===null||s===void 0?void 0:s.edits)!==null&&r!==void 0?r:[]]}}function wae(o){var e;function t(a,l){return"mimeType"in a?a.mimeType===l.handledMimeType:!!l.kind&&a.kind.contains(l.kind)}const i=new Map;for(const a of o)for(const l of(e=a.yieldTo)!==null&&e!==void 0?e:[])for(const c of o)if(c!==a&&t(l,c)){let u=i.get(a);u||(u=[],i.set(a,u)),u.push(c)}if(!i.size)return Array.from(o);const n=new Set,s=[];function r(a){if(!a.length)return[];const l=a[0];if(s.includes(l))return console.warn("Yield to cycle detected",l),a;if(n.has(l))return r(a.slice(1));let c=[];const u=i.get(l);return u&&(s.push(l),c=r(u),s.pop()),n.add(l),[...c,l,...r(a.slice(1))]}return r(Array.from(o))}var J3e=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},eBe=function(o,e){return function(t,i){e(t,i,o)}};const tBe=Rt.register({description:"inline-progress-widget",stickiness:1,showIfCollapsed:!0,after:{content:_ie,inlineClassName:"inline-editor-progress-decoration",inlineClassNameAffectsLetterSpacing:!0}});class BP extends J{constructor(e,t,i,n,s){super(),this.typeId=e,this.editor=t,this.range=i,this.delegate=s,this.allowEditorOverflow=!1,this.suppressMouseDown=!0,this.create(n),this.editor.addContentWidget(this),this.editor.layoutContentWidget(this)}create(e){this.domNode=ye(".inline-progress-widget"),this.domNode.role="button",this.domNode.title=e;const t=ye("span.icon");this.domNode.append(t),t.classList.add(...pt.asClassNameArray(Ee.loading),"codicon-modifier-spin");const i=()=>{const n=this.editor.getOption(67);this.domNode.style.height=`${n}px`,this.domNode.style.width=`${Math.ceil(.8*n)}px`};i(),this._register(this.editor.onDidChangeConfiguration(n=>{(n.hasChanged(52)||n.hasChanged(67))&&i()})),this._register(oe(this.domNode,ke.CLICK,n=>{this.delegate.cancel()}))}getId(){return BP.baseId+"."+this.typeId}getDomNode(){return this.domNode}getPosition(){return{position:{lineNumber:this.range.startLineNumber,column:this.range.startColumn},preference:[0]}}dispose(){super.dispose(),this.editor.removeContentWidget(this)}}BP.baseId="editor.widget.inlineProgressWidget";let OM=class extends J{constructor(e,t,i){super(),this.id=e,this._editor=t,this._instantiationService=i,this._showDelay=500,this._showPromise=this._register(new Xs),this._currentWidget=new Xs,this._operationIdPool=0,this._currentDecorations=t.createDecorationsCollection()}async showWhile(e,t,i){const n=this._operationIdPool++;this._currentOperation=n,this.clear(),this._showPromise.value=dm(()=>{const s=A.fromPositions(e);this._currentDecorations.set([{range:s,options:tBe}]).length>0&&(this._currentWidget.value=this._instantiationService.createInstance(BP,this.id,this._editor,s,t,i))},this._showDelay);try{return await i}finally{this._currentOperation===n&&(this.clear(),this._currentOperation=void 0)}}clear(){this._showPromise.clear(),this._currentDecorations.clear(),this._currentWidget.clear()}};OM=J3e([eBe(2,ct)],OM);var iBe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},jJ=function(o,e){return function(t,i){e(t,i,o)}},HN;let $r=HN=class{static get(e){return e.getContribution(HN.ID)}constructor(e,t,i){this._openerService=i,this._messageWidget=new Xs,this._messageListeners=new he,this._mouseOverMessage=!1,this._editor=e,this._visible=HN.MESSAGE_VISIBLE.bindTo(t)}dispose(){var e;(e=this._message)===null||e===void 0||e.dispose(),this._messageListeners.dispose(),this._messageWidget.dispose(),this._visible.reset()}showMessage(e,t){_a(zd(e)?e.value:e),this._visible.set(!0),this._messageWidget.clear(),this._messageListeners.clear(),this._message=zd(e)?tP(e,{actionHandler:{callback:n=>{this.closeMessage(),cz(this._openerService,n,zd(e)?e.isTrusted:void 0)},disposables:this._messageListeners}}):void 0,this._messageWidget.value=new KJ(this._editor,t,typeof e=="string"?e:this._message.element),this._messageListeners.add(Ie.debounce(this._editor.onDidBlurEditorText,(n,s)=>s,0)(()=>{this._mouseOverMessage||this._messageWidget.value&&ao(No(),this._messageWidget.value.getDomNode())||this.closeMessage()})),this._messageListeners.add(this._editor.onDidChangeCursorPosition(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidDispose(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidChangeModel(()=>this.closeMessage())),this._messageListeners.add(oe(this._messageWidget.value.getDomNode(),ke.MOUSE_ENTER,()=>this._mouseOverMessage=!0,!0)),this._messageListeners.add(oe(this._messageWidget.value.getDomNode(),ke.MOUSE_LEAVE,()=>this._mouseOverMessage=!1,!0));let i;this._messageListeners.add(this._editor.onMouseMove(n=>{n.target.position&&(i?i.containsPosition(n.target.position)||this.closeMessage():i=new A(t.lineNumber-3,1,n.target.position.lineNumber+3,1))}))}closeMessage(){this._visible.reset(),this._messageListeners.clear(),this._messageWidget.value&&this._messageListeners.add(KJ.fadeOut(this._messageWidget.value))}};$r.ID="editor.contrib.messageController";$r.MESSAGE_VISIBLE=new Be("messageVisible",!1,v("messageVisible","Whether the editor is currently showing an inline message"));$r=HN=iBe([jJ(1,bt),jJ(2,wa)],$r);const nBe=zs.bindToContribution($r.get);Me(new nBe({id:"leaveEditorMessage",precondition:$r.MESSAGE_VISIBLE,handler:o=>o.closeMessage(),kbOpts:{weight:130,primary:9}}));let KJ=class{static fadeOut(e){const t=()=>{e.dispose(),clearTimeout(i),e.getDomNode().removeEventListener("animationend",t)},i=setTimeout(t,110);return e.getDomNode().addEventListener("animationend",t),e.getDomNode().classList.add("fadeOut"),{dispose:t}}constructor(e,{lineNumber:t,column:i},n){this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._editor=e,this._editor.revealLinesInCenterIfOutsideViewport(t,t,0),this._position={lineNumber:t,column:i},this._domNode=document.createElement("div"),this._domNode.classList.add("monaco-editor-overlaymessage"),this._domNode.style.marginLeft="-6px";const s=document.createElement("div");s.classList.add("anchor","top"),this._domNode.appendChild(s);const r=document.createElement("div");typeof n=="string"?(r.classList.add("message"),r.textContent=n):(n.classList.add("message"),r.appendChild(n)),this._domNode.appendChild(r);const a=document.createElement("div");a.classList.add("anchor","below"),this._domNode.appendChild(a),this._editor.addContentWidget(this),this._domNode.classList.add("fadeIn")}dispose(){this._editor.removeContentWidget(this)}getId(){return"messageoverlay"}getDomNode(){return this._domNode}getPosition(){return{position:this._position,preference:[1,2],positionAffinity:1}}afterRender(e){this._domNode.classList.toggle("below",e===2)}};pi($r.ID,$r,4);var yae=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},OL=function(o,e){return function(t,i){e(t,i,o)}},AW;let FM=AW=class extends J{constructor(e,t,i,n,s,r,a,l,c,u){super(),this.typeId=e,this.editor=t,this.showCommand=n,this.range=s,this.edits=r,this.onSelectNewEdit=a,this._contextMenuService=l,this._keybindingService=u,this.allowEditorOverflow=!0,this.suppressMouseDown=!0,this.create(),this.visibleContext=i.bindTo(c),this.visibleContext.set(!0),this._register(lt(()=>this.visibleContext.reset())),this.editor.addContentWidget(this),this.editor.layoutContentWidget(this),this._register(lt(()=>this.editor.removeContentWidget(this))),this._register(this.editor.onDidChangeCursorPosition(f=>{s.containsPosition(f.position)||this.dispose()})),this._register(Ie.runAndSubscribe(u.onDidUpdateKeybindings,()=>{this._updateButtonTitle()}))}_updateButtonTitle(){var e;const t=(e=this._keybindingService.lookupKeybinding(this.showCommand.id))===null||e===void 0?void 0:e.getLabel();this.button.element.title=this.showCommand.label+(t?` (${t})`:"")}create(){this.domNode=ye(".post-edit-widget"),this.button=this._register(new wM(this.domNode,{supportIcons:!0})),this.button.label="$(insert)",this._register(oe(this.domNode,ke.CLICK,()=>this.showSelector()))}getId(){return AW.baseId+"."+this.typeId}getDomNode(){return this.domNode}getPosition(){return{position:this.range.getEndPosition(),preference:[2]}}showSelector(){this._contextMenuService.showContextMenu({getAnchor:()=>{const e=ws(this.button.element);return{x:e.left+e.width,y:e.top+e.height}},getActions:()=>this.edits.allEdits.map((e,t)=>SC({id:"",label:e.title,checked:t===this.edits.activeEditIndex,run:()=>{if(t!==this.edits.activeEditIndex)return this.onSelectNewEdit(t)}}))})}};FM.baseId="editor.widget.postEditWidget";FM=AW=yae([OL(7,Ya),OL(8,bt),OL(9,Bi)],FM);let BM=class extends J{constructor(e,t,i,n,s,r){super(),this._id=e,this._editor=t,this._visibleContext=i,this._showCommand=n,this._instantiationService=s,this._bulkEditService=r,this._currentWidget=this._register(new Xs),this._register(Ie.any(t.onDidChangeModel,t.onDidChangeModelContent)(()=>this.clear()))}async applyEditAndShowIfNeeded(e,t,i,n,s){const r=this._editor.getModel();if(!r||!e.length)return;const a=t.allEdits.at(t.activeEditIndex);if(!a)return;const l=await n(a,s),c=Cae(r.uri,e,l),u=e[0],f=r.deltaDecorations([],[{range:u,options:{description:"paste-line-suffix",stickiness:0}}]);let g,p;try{g=await this._bulkEditService.apply(c,{editor:this._editor,token:s}),p=r.getDecorationRange(f[0])}finally{r.deltaDecorations(f,[])}i&&g.isApplied&&t.allEdits.length>1&&this.show(p??u,t,async _=>{const b=this._editor.getModel();b&&(await b.undo(),this.applyEditAndShowIfNeeded(e,{activeEditIndex:_,allEdits:t.allEdits},i,n,s))})}show(e,t,i){this.clear(),this._editor.hasModel()&&(this._currentWidget.value=this._instantiationService.createInstance(FM,this._id,this._editor,this._visibleContext,this._showCommand,e,t,i))}clear(){this._currentWidget.clear()}tryShowSelector(){var e;(e=this._currentWidget.value)===null||e===void 0||e.showSelector()}};BM=yae([OL(4,ct),OL(5,ek)],BM);var sBe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},N0=function(o,e){return function(t,i){e(t,i,o)}},U_;const Sae="editor.changePasteType",iU=new Be("pasteWidgetVisible",!1,v("pasteWidgetVisible","Whether the paste widget is showing")),uB="application/vnd.code.copyMetadata";let wh=U_=class extends J{static get(e){return e.getContribution(U_.ID)}constructor(e,t,i,n,s,r,a){super(),this._bulkEditService=i,this._clipboardService=n,this._languageFeaturesService=s,this._quickInputService=r,this._progressService=a,this._editor=e;const l=e.getContainerDomNode();this._register(oe(l,"copy",c=>this.handleCopy(c))),this._register(oe(l,"cut",c=>this.handleCopy(c))),this._register(oe(l,"paste",c=>this.handlePaste(c),!0)),this._pasteProgressManager=this._register(new OM("pasteIntoEditor",e,t)),this._postPasteWidgetManager=this._register(t.createInstance(BM,"pasteIntoEditor",e,iU,{id:Sae,label:v("postPasteWidgetTitle","Show paste options...")}))}changePasteType(){this._postPasteWidgetManager.tryShowSelector()}pasteAs(e){this._editor.focus();try{this._pasteAsActionContext={preferred:e},K1().execCommand("paste")}finally{this._pasteAsActionContext=void 0}}clearWidgets(){this._postPasteWidgetManager.clear()}isPasteAsEnabled(){return this._editor.getOption(85).enabled&&!this._editor.getOption(91)}async finishedPaste(){await this._currentPasteOperation}handleCopy(e){var t,i;if(!this._editor.hasTextFocus()||(Mm&&this._clipboardService.writeResources([]),!e.clipboardData||!this.isPasteAsEnabled()))return;const n=this._editor.getModel(),s=this._editor.getSelections();if(!n||!(s!=null&&s.length))return;const r=this._editor.getOption(37);let a=s;const l=s.length===1&&s[0].isEmpty();if(l){if(!r)return;a=[new A(a[0].startLineNumber,1,a[0].startLineNumber,1+n.getLineLength(a[0].startLineNumber))]}const c=(t=this._editor._getViewModel())===null||t===void 0?void 0:t.getPlainTextToCopy(s,r,Mo),f={multicursorText:Array.isArray(c)?c:null,pasteOnNewLine:l,mode:null},g=this._languageFeaturesService.documentPasteEditProvider.ordered(n).filter(S=>!!S.prepareDocumentPaste);if(!g.length){this.setCopyMetadata(e.clipboardData,{defaultPastePayload:f});return}const p=pae(e.clipboardData),_=g.flatMap(S=>{var L;return(L=S.copyMimeTypes)!==null&&L!==void 0?L:[]}),b=OP();this.setCopyMetadata(e.clipboardData,{id:b,providerCopyMimeTypes:_,defaultPastePayload:f});const y=Qs(async S=>{const L=Ud(await Promise.all(g.map(async x=>{try{return await x.prepareDocumentPaste(n,a,p,S)}catch(D){console.error(D);return}})));L.reverse();for(const x of L)for(const[D,E]of x)p.replace(D,E);return p});(i=U_._currentCopyOperation)===null||i===void 0||i.dataTransferPromise.cancel(),U_._currentCopyOperation={handle:b,dataTransferPromise:y}}async handlePaste(e){var t,i,n,s;if(!e.clipboardData||!this._editor.hasTextFocus())return;(t=$r.get(this._editor))===null||t===void 0||t.closeMessage(),(i=this._currentPasteOperation)===null||i===void 0||i.cancel(),this._currentPasteOperation=void 0;const r=this._editor.getModel(),a=this._editor.getSelections();if(!(a!=null&&a.length)||!r||!this.isPasteAsEnabled()&&!this._pasteAsActionContext)return;const l=this.fetchCopyMetadata(e),c=mae(e.clipboardData);c.delete(uB);const u=[...e.clipboardData.types,...(n=l==null?void 0:l.providerCopyMimeTypes)!==null&&n!==void 0?n:[],ns.uriList],f=this._languageFeaturesService.documentPasteEditProvider.ordered(r).filter(g=>{var p,_;const b=(p=this._pasteAsActionContext)===null||p===void 0?void 0:p.preferred;return b&&g.providedPasteEditKinds&&!this.providerMatchesPreference(g,b)?!1:(_=g.pasteMimeTypes)===null||_===void 0?void 0:_.some(y=>fae(y,u))});if(!f.length){!((s=this._pasteAsActionContext)===null||s===void 0)&&s.preferred&&this.showPasteAsNoEditMessage(a,this._pasteAsActionContext.preferred);return}e.preventDefault(),e.stopImmediatePropagation(),this._pasteAsActionContext?this.showPasteAsPick(this._pasteAsActionContext.preferred,f,a,c,l):this.doPasteInline(f,a,c,l,e)}showPasteAsNoEditMessage(e,t){var i;(i=$r.get(this._editor))===null||i===void 0||i.showMessage(v("pasteAsError","No paste edits for '{0}' found",t instanceof zi?t.value:t.providerId),e[0].getStartPosition())}doPasteInline(e,t,i,n,s){const r=Qs(async a=>{const l=this._editor;if(!l.hasModel())return;const c=l.getModel(),u=new Cm(l,3,void 0,a);try{if(await this.mergeInDataFromCopy(i,n,u.token),u.token.isCancellationRequested)return;const f=e.filter(_=>this.isSupportedPasteProvider(_,i));if(!f.length||f.length===1&&f[0]instanceof lg)return this.applyDefaultPasteHandler(i,n,u.token,s);const g={triggerKind:XL.Automatic},p=await this.getPasteEdits(f,i,c,t,g,u.token);if(u.token.isCancellationRequested)return;if(p.length===1&&p[0].provider instanceof lg)return this.applyDefaultPasteHandler(i,n,u.token,s);if(p.length){const _=l.getOption(85).showPasteSelector==="afterPaste";return this._postPasteWidgetManager.applyEditAndShowIfNeeded(t,{activeEditIndex:0,allEdits:p},_,async(b,y)=>{var S,L;const x=await((L=(S=b.provider).resolveDocumentPasteEdit)===null||L===void 0?void 0:L.call(S,b,y));return x&&(b.additionalEdit=x.additionalEdit),b},u.token)}await this.applyDefaultPasteHandler(i,n,u.token,s)}finally{u.dispose(),this._currentPasteOperation===r&&(this._currentPasteOperation=void 0)}});this._pasteProgressManager.showWhile(t[0].getEndPosition(),v("pasteIntoEditorProgress","Running paste handlers. Click to cancel"),r),this._currentPasteOperation=r}showPasteAsPick(e,t,i,n,s){const r=Qs(async a=>{const l=this._editor;if(!l.hasModel())return;const c=l.getModel(),u=new Cm(l,3,void 0,a);try{if(await this.mergeInDataFromCopy(n,s,u.token),u.token.isCancellationRequested)return;let f=t.filter(y=>this.isSupportedPasteProvider(y,n,e));e&&(f=f.filter(y=>this.providerMatchesPreference(y,e)));const g={triggerKind:XL.PasteAs,only:e&&e instanceof zi?e:void 0};let p=await this.getPasteEdits(f,n,c,i,g,u.token);if(u.token.isCancellationRequested)return;if(e&&(p=p.filter(y=>e instanceof zi?e.contains(y.kind):e.providerId===y.provider.id)),!p.length){g.only&&this.showPasteAsNoEditMessage(i,g.only);return}let _;if(e)_=p.at(0);else{const y=await this._quickInputService.pick(p.map(S=>{var L;return{label:S.title,description:(L=S.kind)===null||L===void 0?void 0:L.value,edit:S}}),{placeHolder:v("pasteAsPickerPlaceholder","Select Paste Action")});_=y==null?void 0:y.edit}if(!_)return;const b=Cae(c.uri,i,_);await this._bulkEditService.apply(b,{editor:this._editor})}finally{u.dispose(),this._currentPasteOperation===r&&(this._currentPasteOperation=void 0)}});this._progressService.withProgress({location:10,title:v("pasteAsProgress","Running paste handlers")},()=>r)}setCopyMetadata(e,t){e.setData(uB,JSON.stringify(t))}fetchCopyMetadata(e){var t;if(!e.clipboardData)return;const i=e.clipboardData.getData(uB);if(i)try{return JSON.parse(i)}catch{return}const[n,s]=E9.getTextData(e.clipboardData);if(s)return{defaultPastePayload:{mode:s.mode,multicursorText:(t=s.multicursorText)!==null&&t!==void 0?t:null,pasteOnNewLine:!!s.isFromEmptySelection}}}async mergeInDataFromCopy(e,t,i){var n;if(t!=null&&t.id&&((n=U_._currentCopyOperation)===null||n===void 0?void 0:n.handle)===t.id){const s=await U_._currentCopyOperation.dataTransferPromise;if(i.isCancellationRequested)return;for(const[r,a]of s)e.replace(r,a)}if(!e.has(ns.uriList)){const s=await this._clipboardService.readResources();if(i.isCancellationRequested)return;s.length&&e.append(ns.uriList,Xz(FP.create(s)))}}async getPasteEdits(e,t,i,n,s,r){const a=await FD(Promise.all(e.map(async c=>{var u,f;try{const g=await((u=c.provideDocumentPasteEdits)===null||u===void 0?void 0:u.call(c,i,n,t,s,r));return(f=g==null?void 0:g.edits)===null||f===void 0?void 0:f.map(p=>({...p,provider:c}))}catch(g){console.error(g)}})),r),l=Ud(a??[]).flat().filter(c=>!s.only||s.only.contains(c.kind));return wae(l)}async applyDefaultPasteHandler(e,t,i,n){var s,r,a,l;const c=(s=e.get(ns.text))!==null&&s!==void 0?s:e.get("text"),u=(r=await(c==null?void 0:c.asString()))!==null&&r!==void 0?r:"";if(i.isCancellationRequested)return;const f={clipboardEvent:n,text:u,pasteOnNewLine:(a=t==null?void 0:t.defaultPastePayload.pasteOnNewLine)!==null&&a!==void 0?a:!1,multicursorText:(l=t==null?void 0:t.defaultPastePayload.multicursorText)!==null&&l!==void 0?l:null,mode:null};this._editor.trigger("keyboard","paste",f)}isSupportedPasteProvider(e,t,i){var n;return!((n=e.pasteMimeTypes)===null||n===void 0)&&n.some(s=>t.matches(s))?!i||this.providerMatchesPreference(e,i):!1}providerMatchesPreference(e,t){return t instanceof zi?e.providedPasteEditKinds?e.providedPasteEditKinds.some(i=>t.contains(i)):!0:e.id===t.providerId}};wh.ID="editor.contrib.copyPasteActionController";wh=U_=sBe([N0(1,ct),N0(2,ek),N0(3,_g),N0(4,Ze),N0(5,ou),N0(6,goe)],wh);const $v="9_cutcopypaste",oBe=Od||document.queryCommandSupported("cut"),Lae=Od||document.queryCommandSupported("copy"),rBe=typeof navigator.clipboard>"u"||uc?document.queryCommandSupported("paste"):!0;function nU(o){return o.register(),o}const aBe=oBe?nU(new G1({id:"editor.action.clipboardCutAction",precondition:void 0,kbOpts:Od?{primary:2102,win:{primary:2102,secondary:[1044]},weight:100}:void 0,menuOpts:[{menuId:P.MenubarEditMenu,group:"2_ccp",title:v({key:"miCut",comment:["&& denotes a mnemonic"]},"Cu&&t"),order:1},{menuId:P.EditorContext,group:$v,title:v("actions.clipboard.cutLabel","Cut"),when:W.writable,order:1},{menuId:P.CommandPalette,group:"",title:v("actions.clipboard.cutLabel","Cut"),order:1},{menuId:P.SimpleEditorContext,group:$v,title:v("actions.clipboard.cutLabel","Cut"),when:W.writable,order:1}]})):void 0,lBe=Lae?nU(new G1({id:"editor.action.clipboardCopyAction",precondition:void 0,kbOpts:Od?{primary:2081,win:{primary:2081,secondary:[2067]},weight:100}:void 0,menuOpts:[{menuId:P.MenubarEditMenu,group:"2_ccp",title:v({key:"miCopy",comment:["&& denotes a mnemonic"]},"&&Copy"),order:2},{menuId:P.EditorContext,group:$v,title:v("actions.clipboard.copyLabel","Copy"),order:2},{menuId:P.CommandPalette,group:"",title:v("actions.clipboard.copyLabel","Copy"),order:1},{menuId:P.SimpleEditorContext,group:$v,title:v("actions.clipboard.copyLabel","Copy"),order:2}]})):void 0;Ys.appendMenuItem(P.MenubarEditMenu,{submenu:P.MenubarCopy,title:di("copy as","Copy As"),group:"2_ccp",order:3});Ys.appendMenuItem(P.EditorContext,{submenu:P.EditorContextCopy,title:di("copy as","Copy As"),group:$v,order:3});Ys.appendMenuItem(P.EditorContext,{submenu:P.EditorContextShare,title:di("share","Share"),group:"11_share",order:-1,when:ue.and(ue.notEquals("resourceScheme","output"),W.editorTextFocus)});Ys.appendMenuItem(P.EditorTitleContext,{submenu:P.EditorTitleContextShare,title:di("share","Share"),group:"11_share",order:-1});Ys.appendMenuItem(P.ExplorerContext,{submenu:P.ExplorerContextShare,title:di("share","Share"),group:"11_share",order:-1});const hB=rBe?nU(new G1({id:"editor.action.clipboardPasteAction",precondition:void 0,kbOpts:Od?{primary:2100,win:{primary:2100,secondary:[1043]},linux:{primary:2100,secondary:[1043]},weight:100}:void 0,menuOpts:[{menuId:P.MenubarEditMenu,group:"2_ccp",title:v({key:"miPaste",comment:["&& denotes a mnemonic"]},"&&Paste"),order:4},{menuId:P.EditorContext,group:$v,title:v("actions.clipboard.pasteLabel","Paste"),when:W.writable,order:4},{menuId:P.CommandPalette,group:"",title:v("actions.clipboard.pasteLabel","Paste"),order:1},{menuId:P.SimpleEditorContext,group:$v,title:v("actions.clipboard.pasteLabel","Paste"),when:W.writable,order:4}]})):void 0;class cBe extends Ke{constructor(){super({id:"editor.action.clipboardCopyWithSyntaxHighlightingAction",label:v("actions.clipboard.copyWithSyntaxHighlightingLabel","Copy With Syntax Highlighting"),alias:"Copy With Syntax Highlighting",precondition:void 0,kbOpts:{kbExpr:W.textInputFocus,primary:0,weight:100}})}run(e,t){!t.hasModel()||!t.getOption(37)&&t.getSelection().isEmpty()||(D9.forceCopyWithSyntaxHighlighting=!0,t.focus(),t.getContainerDomNode().ownerDocument.execCommand("copy"),D9.forceCopyWithSyntaxHighlighting=!1)}}function xae(o,e){o&&(o.addImplementation(1e4,"code-editor",(t,i)=>{const n=t.get(gi).getFocusedCodeEditor();if(n&&n.hasTextFocus()){const s=n.getOption(37),r=n.getSelection();return r&&r.isEmpty()&&!s||n.getContainerDomNode().ownerDocument.execCommand(e),!0}return!1}),o.addImplementation(0,"generic-dom",(t,i)=>(K1().execCommand(e),!0)))}xae(aBe,"cut");xae(lBe,"copy");hB&&(hB.addImplementation(1e4,"code-editor",(o,e)=>{var t,i;const n=o.get(gi),s=o.get(_g),r=n.getFocusedCodeEditor();return r&&r.hasTextFocus()?r.getContainerDomNode().ownerDocument.execCommand("paste")?(i=(t=wh.get(r))===null||t===void 0?void 0:t.finishedPaste())!==null&&i!==void 0?i:Promise.resolve():Mm?(async()=>{const l=await s.readText();if(l!==""){const c=Cx.INSTANCE.get(l);let u=!1,f=null,g=null;c&&(u=r.getOption(37)&&!!c.isFromEmptySelection,f=typeof c.multicursorText<"u"?c.multicursorText:null,g=c.mode),r.trigger("keyboard","paste",{text:l,pasteOnNewLine:u,multicursorText:f,mode:g})}})():!0:!1}),hB.addImplementation(0,"generic-dom",(o,e)=>(K1().execCommand("paste"),!0)));Lae&&Ce(cBe);const Pn=new class{constructor(){this.QuickFix=new zi("quickfix"),this.Refactor=new zi("refactor"),this.RefactorExtract=this.Refactor.append("extract"),this.RefactorInline=this.Refactor.append("inline"),this.RefactorMove=this.Refactor.append("move"),this.RefactorRewrite=this.Refactor.append("rewrite"),this.Notebook=new zi("notebook"),this.Source=new zi("source"),this.SourceOrganizeImports=this.Source.append("organizeImports"),this.SourceFixAll=this.Source.append("fixAll"),this.SurroundWith=this.Refactor.append("surround")}};var Ka;(function(o){o.Refactor="refactor",o.RefactorPreview="refactor preview",o.Lightbulb="lightbulb",o.Default="other (default)",o.SourceAction="source action",o.QuickFix="quick fix action",o.FixAll="fix all",o.OrganizeImports="organize imports",o.AutoFix="auto fix",o.QuickFixHover="quick fix hover window",o.OnSave="save participants",o.ProblemsView="problems view"})(Ka||(Ka={}));function dBe(o,e){return!(o.include&&!o.include.intersects(e)||o.excludes&&o.excludes.some(t=>Dae(e,t,o.include))||!o.includeSourceActions&&Pn.Source.contains(e))}function uBe(o,e){const t=e.kind?new zi(e.kind):void 0;return!(o.include&&(!t||!o.include.contains(t))||o.excludes&&t&&o.excludes.some(i=>Dae(t,i,o.include))||!o.includeSourceActions&&t&&Pn.Source.contains(t)||o.onlyIncludePreferredActions&&!e.isPreferred)}function Dae(o,e,t){return!(!e.contains(o)||t&&e.contains(t))}class Yu{static fromUser(e,t){return!e||typeof e!="object"?new Yu(t.kind,t.apply,!1):new Yu(Yu.getKindFromUser(e,t.kind),Yu.getApplyFromUser(e,t.apply),Yu.getPreferredUser(e))}static getApplyFromUser(e,t){switch(typeof e.apply=="string"?e.apply.toLowerCase():""){case"first":return"first";case"never":return"never";case"ifsingle":return"ifSingle";default:return t}}static getKindFromUser(e,t){return typeof e.kind=="string"?new zi(e.kind):t}static getPreferredUser(e){return typeof e.preferred=="boolean"?e.preferred:!1}constructor(e,t,i){this.kind=e,this.apply=t,this.preferred=i}}class hBe{constructor(e,t,i){this.action=e,this.provider=t,this.highlightRange=i}async resolve(e){var t;if(!((t=this.provider)===null||t===void 0)&&t.resolveCodeAction&&!this.action.edit){let i;try{i=await this.provider.resolveCodeAction(this.action,e)}catch(n){hs(n)}i&&(this.action.edit=i.edit)}return this}}const kae="editor.action.codeAction",sU="editor.action.quickFix",Eae="editor.action.autoFix",Iae="editor.action.refactor",Tae="editor.action.sourceAction",oU="editor.action.organizeImports",rU="editor.action.fixAll";class FL extends J{static codeActionsPreferredComparator(e,t){return e.isPreferred&&!t.isPreferred?-1:!e.isPreferred&&t.isPreferred?1:0}static codeActionsComparator({action:e},{action:t}){return e.isAI&&!t.isAI?1:!e.isAI&&t.isAI?-1:Yo(e.diagnostics)?Yo(t.diagnostics)?FL.codeActionsPreferredComparator(e,t):-1:Yo(t.diagnostics)?1:FL.codeActionsPreferredComparator(e,t)}constructor(e,t,i){super(),this.documentation=t,this._register(i),this.allActions=[...e].sort(FL.codeActionsComparator),this.validActions=this.allActions.filter(({action:n})=>!n.disabled)}get hasAutoFix(){return this.validActions.some(({action:e})=>!!e.kind&&Pn.QuickFix.contains(new zi(e.kind))&&!!e.isPreferred)}get hasAIFix(){return this.validActions.some(({action:e})=>!!e.isAI)}get allAIFixes(){return this.validActions.every(({action:e})=>!!e.isAI)}}const qJ={actions:[],documentation:void 0};async function BL(o,e,t,i,n,s){var r;const a=i.filter||{},l={...a,excludes:[...a.excludes||[],Pn.Notebook]},c={only:(r=a.include)===null||r===void 0?void 0:r.value,trigger:i.type},u=new Kz(e,s),f=i.type===2,g=fBe(o,e,f?l:a),p=new he,_=g.map(async y=>{try{n.report(y);const S=await y.provideCodeActions(e,t,c,u.token);if(S&&p.add(S),u.token.isCancellationRequested)return qJ;const L=((S==null?void 0:S.actions)||[]).filter(D=>D&&uBe(a,D)),x=pBe(y,L,a.include);return{actions:L.map(D=>new hBe(D,y)),documentation:x}}catch(S){if(eu(S))throw S;return hs(S),qJ}}),b=o.onDidChange(()=>{const y=o.all(e);zn(y,g)||u.cancel()});try{const y=await Promise.all(_),S=y.map(x=>x.actions).flat(),L=[...Ud(y.map(x=>x.documentation)),...gBe(o,e,i,S)];return new FL(S,L,p)}finally{b.dispose(),u.dispose()}}function fBe(o,e,t){return o.all(e).filter(i=>i.providedCodeActionKinds?i.providedCodeActionKinds.some(n=>dBe(t,new zi(n))):!0)}function*gBe(o,e,t,i){var n,s,r;if(e&&i.length)for(const a of o.all(e))a._getAdditionalMenuItems&&(yield*(n=a._getAdditionalMenuItems)===null||n===void 0?void 0:n.call(a,{trigger:t.type,only:(r=(s=t.filter)===null||s===void 0?void 0:s.include)===null||r===void 0?void 0:r.value},i.map(l=>l.action)))}function pBe(o,e,t){if(!o.documentation)return;const i=o.documentation.map(n=>({kind:new zi(n.kind),command:n.command}));if(t){let n;for(const s of i)s.kind.contains(t)&&(n?n.kind.contains(s.kind)&&(n=s):n=s);if(n)return n==null?void 0:n.command}for(const n of e)if(n.kind){for(const s of i)if(s.kind.contains(new zi(n.kind)))return s.command}}var jC;(function(o){o.OnSave="onSave",o.FromProblemsView="fromProblemsView",o.FromCodeActions="fromCodeActions",o.FromAILightbulb="fromAILightbulb"})(jC||(jC={}));async function mBe(o,e,t,i,n=Yt.None){var s;const r=o.get(ek),a=o.get(Un),l=o.get(pr),c=o.get(ys);if(l.publicLog2("codeAction.applyCodeAction",{codeActionTitle:e.action.title,codeActionKind:e.action.kind,codeActionIsPreferred:!!e.action.isPreferred,reason:t}),await e.resolve(n),!n.isCancellationRequested&&!(!((s=e.action.edit)===null||s===void 0)&&s.edits.length&&!(await r.apply(e.action.edit,{editor:i==null?void 0:i.editor,label:e.action.title,quotableLabel:e.action.title,code:"undoredo.codeAction",respectAutoSaveConfig:t!==jC.OnSave,showPreview:i==null?void 0:i.preview})).isApplied)&&e.action.command)try{await a.executeCommand(e.action.command.id,...e.action.command.arguments||[])}catch(u){const f=_Be(u);c.error(typeof f=="string"?f:v("applyCodeActionFailed","An unknown error occurred while applying the code action"))}}function _Be(o){return typeof o=="string"?o:o instanceof Error&&typeof o.message=="string"?o.message:void 0}si.registerCommand("_executeCodeActionProvider",async function(o,e,t,i,n){if(!(e instanceof gt))throw lc();const{codeActionProvider:s}=o.get(Ze),r=o.get(Fn).getModel(e);if(!r)throw lc();const a=Xe.isISelection(t)?Xe.liftSelection(t):A.isIRange(t)?r.validateRange(t):void 0;if(!a)throw lc();const l=typeof i=="string"?new zi(i):void 0,c=await BL(s,r,a,{type:1,triggerAction:Ka.Default,filter:{includeSourceActions:!0,include:l}},Yf.None,Yt.None),u=[],f=Math.min(c.validActions.length,typeof n=="number"?n:0);for(let g=0;g<f;g++)u.push(c.validActions[g].resolve(Yt.None));try{return await Promise.all(u),c.validActions.map(g=>g.action)}finally{setTimeout(()=>c.dispose(),100)}});var vBe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},bBe=function(o,e){return function(t,i){e(t,i,o)}},PW;let WM=PW=class{constructor(e){this.keybindingService=e}getResolver(){const e=new tu(()=>this.keybindingService.getKeybindings().filter(t=>PW.codeActionCommands.indexOf(t.command)>=0).filter(t=>t.resolvedKeybinding).map(t=>{let i=t.commandArgs;return t.command===oU?i={kind:Pn.SourceOrganizeImports.value}:t.command===rU&&(i={kind:Pn.SourceFixAll.value}),{resolvedKeybinding:t.resolvedKeybinding,...Yu.fromUser(i,{kind:zi.None,apply:"never"})}}));return t=>{if(t.kind){const i=this.bestKeybindingForCodeAction(t,e.value);return i==null?void 0:i.resolvedKeybinding}}}bestKeybindingForCodeAction(e,t){if(!e.kind)return;const i=new zi(e.kind);return t.filter(n=>n.kind.contains(i)).filter(n=>n.preferred?e.isPreferred:!0).reduceRight((n,s)=>n?n.kind.contains(s.kind)?s:n:s,void 0)}};WM.codeActionCommands=[Iae,kae,Tae,oU,rU];WM=PW=vBe([bBe(0,Bi)],WM);V("symbolIcon.arrayForeground",{dark:Te,light:Te,hcDark:Te,hcLight:Te},v("symbolIcon.arrayForeground","The foreground color for array symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));V("symbolIcon.booleanForeground",{dark:Te,light:Te,hcDark:Te,hcLight:Te},v("symbolIcon.booleanForeground","The foreground color for boolean symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));V("symbolIcon.classForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},v("symbolIcon.classForeground","The foreground color for class symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));V("symbolIcon.colorForeground",{dark:Te,light:Te,hcDark:Te,hcLight:Te},v("symbolIcon.colorForeground","The foreground color for color symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));V("symbolIcon.constantForeground",{dark:Te,light:Te,hcDark:Te,hcLight:Te},v("symbolIcon.constantForeground","The foreground color for constant symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));V("symbolIcon.constructorForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},v("symbolIcon.constructorForeground","The foreground color for constructor symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));V("symbolIcon.enumeratorForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},v("symbolIcon.enumeratorForeground","The foreground color for enumerator symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));V("symbolIcon.enumeratorMemberForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},v("symbolIcon.enumeratorMemberForeground","The foreground color for enumerator member symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));V("symbolIcon.eventForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},v("symbolIcon.eventForeground","The foreground color for event symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));V("symbolIcon.fieldForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},v("symbolIcon.fieldForeground","The foreground color for field symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));V("symbolIcon.fileForeground",{dark:Te,light:Te,hcDark:Te,hcLight:Te},v("symbolIcon.fileForeground","The foreground color for file symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));V("symbolIcon.folderForeground",{dark:Te,light:Te,hcDark:Te,hcLight:Te},v("symbolIcon.folderForeground","The foreground color for folder symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));V("symbolIcon.functionForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},v("symbolIcon.functionForeground","The foreground color for function symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));V("symbolIcon.interfaceForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},v("symbolIcon.interfaceForeground","The foreground color for interface symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));V("symbolIcon.keyForeground",{dark:Te,light:Te,hcDark:Te,hcLight:Te},v("symbolIcon.keyForeground","The foreground color for key symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));V("symbolIcon.keywordForeground",{dark:Te,light:Te,hcDark:Te,hcLight:Te},v("symbolIcon.keywordForeground","The foreground color for keyword symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));V("symbolIcon.methodForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},v("symbolIcon.methodForeground","The foreground color for method symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));V("symbolIcon.moduleForeground",{dark:Te,light:Te,hcDark:Te,hcLight:Te},v("symbolIcon.moduleForeground","The foreground color for module symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));V("symbolIcon.namespaceForeground",{dark:Te,light:Te,hcDark:Te,hcLight:Te},v("symbolIcon.namespaceForeground","The foreground color for namespace symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));V("symbolIcon.nullForeground",{dark:Te,light:Te,hcDark:Te,hcLight:Te},v("symbolIcon.nullForeground","The foreground color for null symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));V("symbolIcon.numberForeground",{dark:Te,light:Te,hcDark:Te,hcLight:Te},v("symbolIcon.numberForeground","The foreground color for number symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));V("symbolIcon.objectForeground",{dark:Te,light:Te,hcDark:Te,hcLight:Te},v("symbolIcon.objectForeground","The foreground color for object symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));V("symbolIcon.operatorForeground",{dark:Te,light:Te,hcDark:Te,hcLight:Te},v("symbolIcon.operatorForeground","The foreground color for operator symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));V("symbolIcon.packageForeground",{dark:Te,light:Te,hcDark:Te,hcLight:Te},v("symbolIcon.packageForeground","The foreground color for package symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));V("symbolIcon.propertyForeground",{dark:Te,light:Te,hcDark:Te,hcLight:Te},v("symbolIcon.propertyForeground","The foreground color for property symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));V("symbolIcon.referenceForeground",{dark:Te,light:Te,hcDark:Te,hcLight:Te},v("symbolIcon.referenceForeground","The foreground color for reference symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));V("symbolIcon.snippetForeground",{dark:Te,light:Te,hcDark:Te,hcLight:Te},v("symbolIcon.snippetForeground","The foreground color for snippet symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));V("symbolIcon.stringForeground",{dark:Te,light:Te,hcDark:Te,hcLight:Te},v("symbolIcon.stringForeground","The foreground color for string symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));V("symbolIcon.structForeground",{dark:Te,light:Te,hcDark:Te,hcLight:Te},v("symbolIcon.structForeground","The foreground color for struct symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));V("symbolIcon.textForeground",{dark:Te,light:Te,hcDark:Te,hcLight:Te},v("symbolIcon.textForeground","The foreground color for text symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));V("symbolIcon.typeParameterForeground",{dark:Te,light:Te,hcDark:Te,hcLight:Te},v("symbolIcon.typeParameterForeground","The foreground color for type parameter symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));V("symbolIcon.unitForeground",{dark:Te,light:Te,hcDark:Te,hcLight:Te},v("symbolIcon.unitForeground","The foreground color for unit symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));V("symbolIcon.variableForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},v("symbolIcon.variableForeground","The foreground color for variable symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));const Nae=Object.freeze({kind:zi.Empty,title:v("codeAction.widget.id.more","More Actions...")}),CBe=Object.freeze([{kind:Pn.QuickFix,title:v("codeAction.widget.id.quickfix","Quick Fix")},{kind:Pn.RefactorExtract,title:v("codeAction.widget.id.extract","Extract"),icon:Ee.wrench},{kind:Pn.RefactorInline,title:v("codeAction.widget.id.inline","Inline"),icon:Ee.wrench},{kind:Pn.RefactorRewrite,title:v("codeAction.widget.id.convert","Rewrite"),icon:Ee.wrench},{kind:Pn.RefactorMove,title:v("codeAction.widget.id.move","Move"),icon:Ee.wrench},{kind:Pn.SurroundWith,title:v("codeAction.widget.id.surround","Surround With"),icon:Ee.surroundWith},{kind:Pn.Source,title:v("codeAction.widget.id.source","Source Action"),icon:Ee.symbolFile},Nae]);function wBe(o,e,t){if(!e)return o.map(s=>{var r;return{kind:"action",item:s,group:Nae,disabled:!!s.action.disabled,label:s.action.disabled||s.action.title,canPreview:!!(!((r=s.action.edit)===null||r===void 0)&&r.edits.length)}});const i=CBe.map(s=>({group:s,actions:[]}));for(const s of o){const r=s.action.kind?new zi(s.action.kind):zi.None;for(const a of i)if(a.group.kind.contains(r)){a.actions.push(s);break}}const n=[];for(const s of i)if(s.actions.length){n.push({kind:"header",group:s.group});for(const r of s.actions){const a=s.group;n.push({kind:"action",item:r,group:r.action.isAI?{title:a.title,kind:a.kind,icon:Ee.sparkle}:a,label:r.action.title,disabled:!!r.action.disabled,keybinding:t(r.action)})}}return n}var yBe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},GJ=function(o,e){return function(t,i){e(t,i,o)}},OW,mC;(function(o){o.Hidden={type:0};class e{constructor(i,n,s,r){this.actions=i,this.trigger=n,this.editorPosition=s,this.widgetPosition=r,this.type=1}}o.Showing=e})(mC||(mC={}));let jv=OW=class extends J{constructor(e,t,i){super(),this._editor=e,this._keybindingService=t,this._onClick=this._register(new Y),this.onClick=this._onClick.event,this._state=mC.Hidden,this._iconClasses=[],this._domNode=ye("div.lightBulbWidget"),this._register(rn.ignoreTarget(this._domNode)),this._editor.addContentWidget(this),this._register(this._editor.onDidChangeModelContent(n=>{const s=this._editor.getModel();(this.state.type!==1||!s||this.state.editorPosition.lineNumber>=s.getLineCount())&&this.hide()})),this._register(F1e(this._domNode,n=>{if(this.state.type!==1)return;this._editor.focus(),n.preventDefault();const{top:s,height:r}=ws(this._domNode),a=this._editor.getOption(67);let l=Math.floor(a/3);this.state.widgetPosition.position!==null&&this.state.widgetPosition.position.lineNumber<this.state.editorPosition.lineNumber&&(l+=a),this._onClick.fire({x:n.posx,y:s+r+l,actions:this.state.actions,trigger:this.state.trigger})})),this._register(oe(this._domNode,"mouseenter",n=>{(n.buttons&1)===1&&this.hide()})),this._register(Ie.runAndSubscribe(this._keybindingService.onDidUpdateKeybindings,()=>{var n,s,r,a;this._preferredKbLabel=(s=(n=this._keybindingService.lookupKeybinding(Eae))===null||n===void 0?void 0:n.getLabel())!==null&&s!==void 0?s:void 0,this._quickFixKbLabel=(a=(r=this._keybindingService.lookupKeybinding(sU))===null||r===void 0?void 0:r.getLabel())!==null&&a!==void 0?a:void 0,this._updateLightBulbTitleAndIcon()}))}dispose(){super.dispose(),this._editor.removeContentWidget(this)}getId(){return"LightBulbWidget"}getDomNode(){return this._domNode}getPosition(){return this._state.type===1?this._state.widgetPosition:null}update(e,t,i){if(e.validActions.length<=0)return this.hide();if(!this._editor.getOptions().get(65).enabled)return this.hide();const s=this._editor.getModel();if(!s)return this.hide();const{lineNumber:r,column:a}=s.validatePosition(i),l=s.getOptions().tabSize,c=this._editor.getOptions().get(50),u=s.getLineContent(r),f=KA(u,l),g=c.spaceWidth*f>22,p=y=>y>2&&this._editor.getTopForLineNumber(y)===this._editor.getTopForLineNumber(y-1);let _=r,b=1;if(!g){if(r>1&&!p(r-1))_-=1;else if(r<s.getLineCount()&&!p(r+1))_+=1;else if(a*c.spaceWidth<22)return this.hide();b=/^\S\s*$/.test(s.getLineContent(_))?2:1}this.state=new mC.Showing(e,t,i,{position:{lineNumber:_,column:b},preference:OW._posPref}),this._editor.layoutContentWidget(this)}hide(){this.state!==mC.Hidden&&(this.state=mC.Hidden,this._editor.layoutContentWidget(this))}get state(){return this._state}set state(e){this._state=e,this._updateLightBulbTitleAndIcon()}_updateLightBulbTitleAndIcon(){if(this._domNode.classList.remove(...this._iconClasses),this._iconClasses=[],this.state.type!==1)return;let e,t=!1;this.state.actions.allAIFixes?(e=Ee.sparkleFilled,this.state.actions.validActions.length===1&&(t=!0)):this.state.actions.hasAutoFix?this.state.actions.hasAIFix?e=Ee.lightbulbSparkleAutofix:e=Ee.lightbulbAutofix:this.state.actions.hasAIFix?e=Ee.lightbulbSparkle:e=Ee.lightBulb,this._updateLightbulbTitle(this.state.actions.hasAutoFix,t),this._iconClasses=pt.asClassNameArray(e),this._domNode.classList.add(...this._iconClasses)}_updateLightbulbTitle(e,t){this.state.type===1&&(t?this.title=v("codeActionAutoRun","Run: {0}",this.state.actions.validActions[0].action.title):e&&this._preferredKbLabel?this.title=v("preferredcodeActionWithKb","Show Code Actions. Preferred Quick Fix Available ({0})",this._preferredKbLabel):!e&&this._quickFixKbLabel?this.title=v("codeActionWithKb","Show Code Actions ({0})",this._quickFixKbLabel):e||(this.title=v("codeAction","Show Code Actions")))}set title(e){this._domNode.title=e}};jv.ID="editor.contrib.lightbulbWidget";jv._posPref=[0];jv=OW=yBe([GJ(1,Bi),GJ(2,Un)],jv);var Rae=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},FW=function(o,e){return function(t,i){e(t,i,o)}};const Mae="acceptSelectedCodeAction",Aae="previewSelectedCodeAction";class SBe{get templateId(){return"header"}renderTemplate(e){e.classList.add("group-header");const t=document.createElement("span");return e.append(t),{container:e,text:t}}renderElement(e,t,i){var n,s;i.text.textContent=(s=(n=e.group)===null||n===void 0?void 0:n.title)!==null&&s!==void 0?s:""}disposeTemplate(e){}}let BW=class{get templateId(){return"action"}constructor(e,t){this._supportsPreview=e,this._keybindingService=t}renderTemplate(e){e.classList.add(this.templateId);const t=document.createElement("div");t.className="icon",e.append(t);const i=document.createElement("span");i.className="title",e.append(i);const n=new nw(e,Va);return{container:e,icon:t,text:i,keybinding:n}}renderElement(e,t,i){var n,s,r;if(!((n=e.group)===null||n===void 0)&&n.icon?(i.icon.className=pt.asClassName(e.group.icon),e.group.icon.color&&(i.icon.style.color=je(e.group.icon.color.id))):(i.icon.className=pt.asClassName(Ee.lightBulb),i.icon.style.color="var(--vscode-editorLightBulb-foreground)"),!e.item||!e.label)return;i.text.textContent=Pae(e.label),i.keybinding.set(e.keybinding),X1e(!!e.keybinding,i.keybinding.element);const a=(s=this._keybindingService.lookupKeybinding(Mae))===null||s===void 0?void 0:s.getLabel(),l=(r=this._keybindingService.lookupKeybinding(Aae))===null||r===void 0?void 0:r.getLabel();i.container.classList.toggle("option-disabled",e.disabled),e.disabled?i.container.title=e.label:a&&l?this._supportsPreview&&e.canPreview?i.container.title=v({key:"label-preview",comment:['placeholders are keybindings, e.g "F2 to Apply, Shift+F2 to Preview"']},"{0} to Apply, {1} to Preview",a,l):i.container.title=v({key:"label",comment:['placeholder is a keybinding, e.g "F2 to Apply"']},"{0} to Apply",a):i.container.title=""}disposeTemplate(e){e.keybinding.dispose()}};BW=Rae([FW(1,Bi)],BW);class LBe extends UIEvent{constructor(){super("acceptSelectedAction")}}class YJ extends UIEvent{constructor(){super("previewSelectedAction")}}function xBe(o){if(o.kind==="action")return o.label}let WW=class extends J{constructor(e,t,i,n,s,r){super(),this._delegate=n,this._contextViewService=s,this._keybindingService=r,this._actionLineHeight=24,this._headerLineHeight=26,this.cts=this._register(new os),this.domNode=document.createElement("div"),this.domNode.classList.add("actionList");const a={getHeight:l=>l.kind==="header"?this._headerLineHeight:this._actionLineHeight,getTemplateId:l=>l.kind};this._list=this._register(new Ml(e,this.domNode,a,[new BW(t,this._keybindingService),new SBe],{keyboardSupport:!1,typeNavigationEnabled:!0,keyboardNavigationLabelProvider:{getKeyboardNavigationLabel:xBe},accessibilityProvider:{getAriaLabel:l=>{if(l.kind==="action"){let c=l.label?Pae(l==null?void 0:l.label):"";return l.disabled&&(c=v({key:"customQuickFixWidget.labels",comment:["Action widget labels for accessibility."]},"{0}, Disabled Reason: {1}",c,l.disabled)),c}return null},getWidgetAriaLabel:()=>v({key:"customQuickFixWidget",comment:["An action widget option"]},"Action Widget"),getRole:l=>l.kind==="action"?"option":"separator",getWidgetRole:()=>"listbox"}})),this._list.style(ub),this._register(this._list.onMouseClick(l=>this.onListClick(l))),this._register(this._list.onMouseOver(l=>this.onListHover(l))),this._register(this._list.onDidChangeFocus(()=>this.onFocus())),this._register(this._list.onDidChangeSelection(l=>this.onListSelection(l))),this._allMenuItems=i,this._list.splice(0,this._list.length,this._allMenuItems),this._list.length&&this.focusNext()}focusCondition(e){return!e.disabled&&e.kind==="action"}hide(e){this._delegate.onHide(e),this.cts.cancel(),this._contextViewService.hideContextView()}layout(e){const t=this._allMenuItems.filter(l=>l.kind==="header").length,n=this._allMenuItems.length*this._actionLineHeight+t*this._headerLineHeight-t*this._actionLineHeight;this._list.layout(n);let s=e;if(this._allMenuItems.length>=50)s=380;else{const l=this._allMenuItems.map((c,u)=>{const f=this.domNode.ownerDocument.getElementById(this._list.getElementID(u));if(f){f.style.width="auto";const g=f.getBoundingClientRect().width;return f.style.width="",g}return 0});s=Math.max(...l,e)}const a=Math.min(n,this.domNode.ownerDocument.body.clientHeight*.7);return this._list.layout(a,s),this.domNode.style.height=`${a}px`,this._list.domFocus(),s}focusPrevious(){this._list.focusPrevious(1,!0,void 0,this.focusCondition)}focusNext(){this._list.focusNext(1,!0,void 0,this.focusCondition)}acceptSelected(e){const t=this._list.getFocus();if(t.length===0)return;const i=t[0],n=this._list.element(i);if(!this.focusCondition(n))return;const s=e?new YJ:new LBe;this._list.setSelection([i],s)}onListSelection(e){if(!e.elements.length)return;const t=e.elements[0];t.item&&this.focusCondition(t)?this._delegate.onSelect(t.item,e.browserEvent instanceof YJ):this._list.setSelection([])}onFocus(){var e,t;const i=this._list.getFocus();if(i.length===0)return;const n=i[0],s=this._list.element(n);(t=(e=this._delegate).onFocus)===null||t===void 0||t.call(e,s.item)}async onListHover(e){const t=e.element;if(t&&t.item&&this.focusCondition(t)){if(this._delegate.onHover&&!t.disabled&&t.kind==="action"){const i=await this._delegate.onHover(t.item,this.cts.token);t.canPreview=i?i.canPreview:void 0}e.index&&this._list.splice(e.index,1,[t])}this._list.setFocus(typeof e.index=="number"?[e.index]:[])}onListClick(e){e.element&&this.focusCondition(e.element)&&this._list.setFocus([])}};WW=Rae([FW(4,gg),FW(5,Bi)],WW);function Pae(o){return o.replace(/\r\n|\r|\n/g," ")}var DBe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},fB=function(o,e){return function(t,i){e(t,i,o)}};V("actionBar.toggledBackground",{dark:nv,light:nv,hcDark:nv,hcLight:nv},v("actionBar.toggledBackground","Background color for toggled action items in action bar."));const Kv={Visible:new Be("codeActionMenuVisible",!1,v("codeActionMenuVisible","Whether the action widget list is visible"))},mb=Zt("actionWidgetService");let qv=class extends J{get isVisible(){return Kv.Visible.getValue(this._contextKeyService)||!1}constructor(e,t,i){super(),this._contextViewService=e,this._contextKeyService=t,this._instantiationService=i,this._list=this._register(new Xs)}show(e,t,i,n,s,r,a){const l=Kv.Visible.bindTo(this._contextKeyService),c=this._instantiationService.createInstance(WW,e,t,i,n);this._contextViewService.showContextView({getAnchor:()=>s,render:u=>(l.set(!0),this._renderWidget(u,c,a??[])),onHide:u=>{l.reset(),this._onWidgetClosed(u)}},r,!1)}acceptSelected(e){var t;(t=this._list.value)===null||t===void 0||t.acceptSelected(e)}focusPrevious(){var e,t;(t=(e=this._list)===null||e===void 0?void 0:e.value)===null||t===void 0||t.focusPrevious()}focusNext(){var e,t;(t=(e=this._list)===null||e===void 0?void 0:e.value)===null||t===void 0||t.focusNext()}hide(){var e;(e=this._list.value)===null||e===void 0||e.hide(),this._list.clear()}_renderWidget(e,t,i){var n;const s=document.createElement("div");if(s.classList.add("action-widget"),e.appendChild(s),this._list.value=t,this._list.value)s.appendChild(this._list.value.domNode);else throw new Error("List has no value");const r=new he,a=document.createElement("div"),l=e.appendChild(a);l.classList.add("context-view-block"),r.add(oe(l,ke.MOUSE_DOWN,_=>_.stopPropagation()));const c=document.createElement("div"),u=e.appendChild(c);u.classList.add("context-view-pointerBlock"),r.add(oe(u,ke.POINTER_MOVE,()=>u.remove())),r.add(oe(u,ke.MOUSE_DOWN,()=>u.remove()));let f=0;if(i.length){const _=this._createActionBar(".action-widget-action-bar",i);_&&(s.appendChild(_.getContainer().parentElement),r.add(_),f=_.getContainer().offsetWidth)}const g=(n=this._list.value)===null||n===void 0?void 0:n.layout(f);s.style.width=`${g}px`;const p=r.add(Kd(e));return r.add(p.onDidBlur(()=>this.hide())),r}_createActionBar(e,t){if(!t.length)return;const i=ye(e),n=new pc(i);return n.push(t,{icon:!1,label:!0}),n}_onWidgetClosed(e){var t;(t=this._list.value)===null||t===void 0||t.hide(e)}};qv=DBe([fB(0,gg),fB(1,bt),fB(2,ct)],qv);oi(mb,qv,1);const gk=1100;en(class extends Gr{constructor(){super({id:"hideCodeActionWidget",title:di("hideCodeActionWidget.title","Hide action widget"),precondition:Kv.Visible,keybinding:{weight:gk,primary:9,secondary:[1033]}})}run(o){o.get(mb).hide()}});en(class extends Gr{constructor(){super({id:"selectPrevCodeAction",title:di("selectPrevCodeAction.title","Select previous action"),precondition:Kv.Visible,keybinding:{weight:gk,primary:16,secondary:[2064],mac:{primary:16,secondary:[2064,302]}}})}run(o){const e=o.get(mb);e instanceof qv&&e.focusPrevious()}});en(class extends Gr{constructor(){super({id:"selectNextCodeAction",title:di("selectNextCodeAction.title","Select next action"),precondition:Kv.Visible,keybinding:{weight:gk,primary:18,secondary:[2066],mac:{primary:18,secondary:[2066,300]}}})}run(o){const e=o.get(mb);e instanceof qv&&e.focusNext()}});en(class extends Gr{constructor(){super({id:Mae,title:di("acceptSelected.title","Accept selected action"),precondition:Kv.Visible,keybinding:{weight:gk,primary:3,secondary:[2137]}})}run(o){const e=o.get(mb);e instanceof qv&&e.acceptSelected()}});en(class extends Gr{constructor(){super({id:Aae,title:di("previewSelected.title","Preview selected action"),precondition:Kv.Visible,keybinding:{weight:gk,primary:2051}})}run(o){const e=o.get(mb);e instanceof qv&&e.acceptSelected(!0)}});const Oae=new Be("supportedCodeAction",""),ZJ="_typescript.applyFixAllCodeAction";class kBe extends J{constructor(e,t,i,n=250){super(),this._editor=e,this._markerService=t,this._signalChange=i,this._delay=n,this._autoTriggerTimer=this._register(new Yc),this._register(this._markerService.onMarkerChanged(s=>this._onMarkerChanges(s))),this._register(this._editor.onDidChangeCursorPosition(()=>this._tryAutoTrigger()))}trigger(e){const t=this._getRangeOfSelectionUnlessWhitespaceEnclosed(e);this._signalChange(t?{trigger:e,selection:t}:void 0)}_onMarkerChanges(e){const t=this._editor.getModel();t&&e.some(i=>AH(i,t.uri))&&this._tryAutoTrigger()}_tryAutoTrigger(){this._autoTriggerTimer.cancelAndSet(()=>{this.trigger({type:2,triggerAction:Ka.Default})},this._delay)}_getRangeOfSelectionUnlessWhitespaceEnclosed(e){if(!this._editor.hasModel())return;const t=this._editor.getSelection();if(e.type===1)return t;const i=this._editor.getOption(65).enabled;if(i!==Fc.Off){{if(i===Fc.On)return t;if(i===Fc.OnCode){if(!t.isEmpty())return t;const s=this._editor.getModel(),{lineNumber:r,column:a}=t.getPosition(),l=s.getLineContent(r);if(l.length===0)return;if(a===1){if(/\s/.test(l[0]))return}else if(a===s.getLineMaxColumn(r)){if(/\s/.test(l[l.length-1]))return}else if(/\s/.test(l[a-2])&&/\s/.test(l[a-1]))return}}return t}}}var tv;(function(o){o.Empty={type:0};class e{constructor(i,n,s){this.trigger=i,this.position=n,this._cancellablePromise=s,this.type=1,this.actions=s.catch(r=>{if(eu(r))return Fae;throw r})}cancel(){this._cancellablePromise.cancel()}}o.Triggered=e})(tv||(tv={}));const Fae=Object.freeze({allActions:[],validActions:[],dispose:()=>{},documentation:[],hasAutoFix:!1,hasAIFix:!1,allAIFixes:!1});class EBe extends J{constructor(e,t,i,n,s,r){super(),this._editor=e,this._registry=t,this._markerService=i,this._progressService=s,this._configurationService=r,this._codeActionOracle=this._register(new Xs),this._state=tv.Empty,this._onDidChangeState=this._register(new Y),this.onDidChangeState=this._onDidChangeState.event,this._disposed=!1,this._supportedCodeActions=Oae.bindTo(n),this._register(this._editor.onDidChangeModel(()=>this._update())),this._register(this._editor.onDidChangeModelLanguage(()=>this._update())),this._register(this._registry.onDidChange(()=>this._update())),this._register(this._editor.onDidChangeConfiguration(a=>{a.hasChanged(65)&&this._update()})),this._update()}dispose(){this._disposed||(this._disposed=!0,super.dispose(),this.setState(tv.Empty,!0))}_settingEnabledNearbyQuickfixes(){var e;const t=(e=this._editor)===null||e===void 0?void 0:e.getModel();return this._configurationService?this._configurationService.getValue("editor.codeActionWidget.includeNearbyQuickFixes",{resource:t==null?void 0:t.uri}):!1}_update(){if(this._disposed)return;this._codeActionOracle.value=void 0,this.setState(tv.Empty);const e=this._editor.getModel();if(e&&this._registry.has(e)&&!this._editor.getOption(91)){const t=this._registry.all(e).flatMap(i=>{var n;return(n=i.providedCodeActionKinds)!==null&&n!==void 0?n:[]});this._supportedCodeActions.set(t.join(" ")),this._codeActionOracle.value=new kBe(this._editor,this._markerService,i=>{var n;if(!i){this.setState(tv.Empty);return}const s=i.selection.getStartPosition(),r=Qs(async c=>{var u,f,g,p,_,b,y,S,L,x;if(this._settingEnabledNearbyQuickfixes()&&i.trigger.type===1&&(i.trigger.triggerAction===Ka.QuickFix||!((f=(u=i.trigger.filter)===null||u===void 0?void 0:u.include)===null||f===void 0)&&f.contains(Pn.QuickFix))){const D=await BL(this._registry,e,i.selection,i.trigger,Yf.None,c),E=[...D.allActions];if(c.isCancellationRequested)return Fae;const N=(g=D.validActions)===null||g===void 0?void 0:g.some(F=>F.action.kind?Pn.QuickFix.contains(new zi(F.action.kind)):!1),M=this._markerService.read({resource:e.uri});if(N){for(const F of D.validActions)!((_=(p=F.action.command)===null||p===void 0?void 0:p.arguments)===null||_===void 0)&&_.some(H=>typeof H=="string"&&H.includes(ZJ))&&(F.action.diagnostics=[...M.filter(H=>H.relatedInformation)]);return{validActions:D.validActions,allActions:E,documentation:D.documentation,hasAutoFix:D.hasAutoFix,hasAIFix:D.hasAIFix,allAIFixes:D.allAIFixes,dispose:()=>{D.dispose()}}}else if(!N&&M.length>0){const F=i.selection.getPosition();let H=F,Q=Number.MAX_VALUE;const K=[...D.validActions];for(const q of M){const se=q.endColumn,fe=q.endLineNumber,Ae=q.startLineNumber;if(fe===F.lineNumber||Ae===F.lineNumber){H=new Z(fe,se);const Ne={type:i.trigger.type,triggerAction:i.trigger.triggerAction,filter:{include:!((b=i.trigger.filter)===null||b===void 0)&&b.include?(y=i.trigger.filter)===null||y===void 0?void 0:y.include:Pn.QuickFix},autoApply:i.trigger.autoApply,context:{notAvailableMessage:((S=i.trigger.context)===null||S===void 0?void 0:S.notAvailableMessage)||"",position:H}},Le=new Xe(H.lineNumber,H.column,H.lineNumber,H.column),be=await BL(this._registry,e,Le,Ne,Yf.None,c);if(be.validActions.length!==0){for(const ze of be.validActions)!((x=(L=ze.action.command)===null||L===void 0?void 0:L.arguments)===null||x===void 0)&&x.some(it=>typeof it=="string"&&it.includes(ZJ))&&(ze.action.diagnostics=[...M.filter(it=>it.relatedInformation)]);D.allActions.length===0&&E.push(...be.allActions),Math.abs(F.column-se)<Q?K.unshift(...be.validActions):K.push(...be.validActions)}Q=Math.abs(F.column-se)}}const j=K.filter((q,se,fe)=>fe.findIndex(Ae=>Ae.action.title===q.action.title)===se);return j.sort((q,se)=>q.action.isPreferred&&!se.action.isPreferred?-1:!q.action.isPreferred&&se.action.isPreferred||q.action.isAI&&!se.action.isAI?1:!q.action.isAI&&se.action.isAI?-1:0),{validActions:j,allActions:E,documentation:D.documentation,hasAutoFix:D.hasAutoFix,hasAIFix:D.hasAIFix,allAIFixes:D.allAIFixes,dispose:()=>{D.dispose()}}}}return BL(this._registry,e,i.selection,i.trigger,Yf.None,c)});i.trigger.type===1&&((n=this._progressService)===null||n===void 0||n.showWhile(r,250));const a=new tv.Triggered(i.trigger,s,r);let l=!1;this._state.type===1&&(l=this._state.trigger.type===1&&a.type===1&&a.trigger.type===2&&this._state.position!==a.position),l||this.setState(a)},void 0),this._codeActionOracle.value.trigger({type:2,triggerAction:Ka.Default})}else this._supportedCodeActions.reset()}trigger(e){var t;(t=this._codeActionOracle.value)===null||t===void 0||t.trigger(e)}setState(e,t){e!==this._state&&(this._state.type===1&&this._state.cancel(),this._state=e,!t&&!this._disposed&&this._onDidChangeState.fire(e))}}var IBe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},nf=function(o,e){return function(t,i){e(t,i,o)}},U0;const TBe="quickfix-edit-highlight";let wm=U0=class extends J{static get(e){return e.getContribution(U0.ID)}constructor(e,t,i,n,s,r,a,l,c,u){super(),this._commandService=a,this._configurationService=l,this._actionWidgetService=c,this._instantiationService=u,this._activeCodeActions=this._register(new Xs),this._showDisabled=!1,this._disposed=!1,this._editor=e,this._model=this._register(new EBe(this._editor,s.codeActionProvider,t,i,r,l)),this._register(this._model.onDidChangeState(f=>this.update(f))),this._lightBulbWidget=new tu(()=>{const f=this._editor.getContribution(jv.ID);return f&&this._register(f.onClick(g=>this.showCodeActionsFromLightbulb(g.actions,g))),f}),this._resolver=n.createInstance(WM),this._register(this._editor.onDidLayoutChange(()=>this._actionWidgetService.hide()))}dispose(){this._disposed=!0,super.dispose()}async showCodeActionsFromLightbulb(e,t){if(e.allAIFixes&&e.validActions.length===1){const i=e.validActions[0],n=i.action.command;n&&n.id==="inlineChat.start"&&n.arguments&&n.arguments.length>=1&&(n.arguments[0]={...n.arguments[0],autoSend:!1}),await this._applyCodeAction(i,!1,!1,jC.FromAILightbulb);return}await this.showCodeActionList(e,t,{includeDisabledActions:!1,fromLightbulb:!0})}showCodeActions(e,t,i){return this.showCodeActionList(t,i,{includeDisabledActions:!1,fromLightbulb:!1})}manualTriggerAtCurrentPosition(e,t,i,n){var s;if(!this._editor.hasModel())return;(s=$r.get(this._editor))===null||s===void 0||s.closeMessage();const r=this._editor.getPosition();this._trigger({type:1,triggerAction:t,filter:i,autoApply:n,context:{notAvailableMessage:e,position:r}})}_trigger(e){return this._model.trigger(e)}async _applyCodeAction(e,t,i,n){try{await this._instantiationService.invokeFunction(mBe,e,n,{preview:i,editor:this._editor})}finally{t&&this._trigger({type:2,triggerAction:Ka.QuickFix,filter:{}})}}async update(e){var t,i,n,s,r,a,l;if(e.type!==1){(t=this._lightBulbWidget.rawValue)===null||t===void 0||t.hide();return}let c;try{c=await e.actions}catch(u){Nt(u);return}if(!this._disposed)if((i=this._lightBulbWidget.value)===null||i===void 0||i.update(c,e.trigger,e.position),e.trigger.type===1){if(!((n=e.trigger.filter)===null||n===void 0)&&n.include){const f=this.tryGetValidActionToApply(e.trigger,c);if(f){try{(s=this._lightBulbWidget.value)===null||s===void 0||s.hide(),await this._applyCodeAction(f,!1,!1,jC.FromCodeActions)}finally{c.dispose()}return}if(e.trigger.context){const g=this.getInvalidActionThatWouldHaveBeenApplied(e.trigger,c);if(g&&g.action.disabled){(r=$r.get(this._editor))===null||r===void 0||r.showMessage(g.action.disabled,e.trigger.context.position),c.dispose();return}}}const u=!!(!((a=e.trigger.filter)===null||a===void 0)&&a.include);if(e.trigger.context&&(!c.allActions.length||!u&&!c.validActions.length)){(l=$r.get(this._editor))===null||l===void 0||l.showMessage(e.trigger.context.notAvailableMessage,e.trigger.context.position),this._activeCodeActions.value=c,c.dispose();return}this._activeCodeActions.value=c,this.showCodeActionList(c,this.toCoords(e.position),{includeDisabledActions:u,fromLightbulb:!1})}else this._actionWidgetService.isVisible?c.dispose():this._activeCodeActions.value=c}getInvalidActionThatWouldHaveBeenApplied(e,t){if(t.allActions.length&&(e.autoApply==="first"&&t.validActions.length===0||e.autoApply==="ifSingle"&&t.allActions.length===1))return t.allActions.find(({action:i})=>i.disabled)}tryGetValidActionToApply(e,t){if(t.validActions.length&&(e.autoApply==="first"&&t.validActions.length>0||e.autoApply==="ifSingle"&&t.validActions.length===1))return t.validActions[0]}async showCodeActionList(e,t,i){const n=this._editor.createDecorationsCollection(),s=this._editor.getDomNode();if(!s)return;const r=i.includeDisabledActions&&(this._showDisabled||e.validActions.length===0)?e.allActions:e.validActions;if(!r.length)return;const a=Z.isIPosition(t)?this.toCoords(t):t,l={onSelect:async(c,u)=>{this._applyCodeAction(c,!0,!!u,jC.FromCodeActions),this._actionWidgetService.hide(),n.clear()},onHide:()=>{var c;(c=this._editor)===null||c===void 0||c.focus(),n.clear()},onHover:async(c,u)=>{var f;if(u.isCancellationRequested)return;let g=!1;const p=c.action.kind;if(p){const _=new zi(p);g=[Pn.RefactorExtract,Pn.RefactorInline,Pn.RefactorRewrite].some(y=>y.contains(_))}return{canPreview:g||!!(!((f=c.action.edit)===null||f===void 0)&&f.edits.length)}},onFocus:c=>{var u,f;if(c&&c.action){const g=c.action.ranges,p=c.action.diagnostics;if(n.clear(),g&&g.length>0){const _=p&&(p==null?void 0:p.length)>1?p.map(b=>({range:b,options:U0.DECORATION})):g.map(b=>({range:b,options:U0.DECORATION}));n.set(_)}else if(p&&p.length>0){const _=p.map(y=>({range:y,options:U0.DECORATION}));n.set(_);const b=p[0];if(b.startLineNumber&&b.startColumn){const y=(f=(u=this._editor.getModel())===null||u===void 0?void 0:u.getWordAtPosition({lineNumber:b.startLineNumber,column:b.startColumn}))===null||f===void 0?void 0:f.word;fh(v("editingNewSelection","Context: {0} at line {1} and column {2}.",y,b.startLineNumber,b.startColumn))}}}else n.clear()}};this._actionWidgetService.show("codeActionWidget",!0,wBe(r,this._shouldShowHeaders(),this._resolver.getResolver()),l,a,s,this._getActionBarActions(e,t,i))}toCoords(e){if(!this._editor.hasModel())return{x:0,y:0};this._editor.revealPosition(e,1),this._editor.render();const t=this._editor.getScrolledVisiblePosition(e),i=ws(this._editor.getDomNode()),n=i.left+t.left,s=i.top+t.top+t.height;return{x:n,y:s}}_shouldShowHeaders(){var e;const t=(e=this._editor)===null||e===void 0?void 0:e.getModel();return this._configurationService.getValue("editor.codeActionWidget.showHeaders",{resource:t==null?void 0:t.uri})}_getActionBarActions(e,t,i){if(i.fromLightbulb)return[];const n=e.documentation.map(s=>{var r;return{id:s.id,label:s.title,tooltip:(r=s.tooltip)!==null&&r!==void 0?r:"",class:void 0,enabled:!0,run:()=>{var a;return this._commandService.executeCommand(s.id,...(a=s.arguments)!==null&&a!==void 0?a:[])}}});return i.includeDisabledActions&&e.validActions.length>0&&e.allActions.length!==e.validActions.length&&n.push(this._showDisabled?{id:"hideMoreActions",label:v("hideMoreActions","Hide Disabled"),enabled:!0,tooltip:"",class:void 0,run:()=>(this._showDisabled=!1,this.showCodeActionList(e,t,i))}:{id:"showMoreActions",label:v("showMoreActions","Show Disabled"),enabled:!0,tooltip:"",class:void 0,run:()=>(this._showDisabled=!0,this.showCodeActionList(e,t,i))}),n}};wm.ID="editor.contrib.codeActionController";wm.DECORATION=Rt.register({description:"quickfix-highlight",className:TBe});wm=U0=IBe([nf(1,kh),nf(2,bt),nf(3,ct),nf(4,Ze),nf(5,Bm),nf(6,Un),nf(7,$t),nf(8,mb),nf(9,ct)],wm);_c((o,e)=>{((n,s)=>{s&&e.addRule(`.monaco-editor ${n} { background-color: ${s}; }`)})(".quickfix-edit-highlight",o.getColor(Rf));const i=o.getColor(Np);i&&e.addRule(`.monaco-editor .quickfix-edit-highlight { border: 1px ${Vd(o.type)?"dotted":"solid"} ${i}; box-sizing: border-box; }`)});function pk(o){return ue.regex(Oae.keys()[0],new RegExp("(\\s|^)"+Ll(o.value)+"\\b"))}const aU={type:"object",defaultSnippets:[{body:{kind:""}}],properties:{kind:{type:"string",description:v("args.schema.kind","Kind of the code action to run.")},apply:{type:"string",description:v("args.schema.apply","Controls when the returned actions are applied."),default:"ifSingle",enum:["first","ifSingle","never"],enumDescriptions:[v("args.schema.apply.first","Always apply the first returned code action."),v("args.schema.apply.ifSingle","Apply the first returned code action if it is the only one."),v("args.schema.apply.never","Do not apply the returned code actions.")]},preferred:{type:"boolean",default:!1,description:v("args.schema.preferred","Controls if only preferred code actions should be returned.")}}};function _b(o,e,t,i,n=Ka.Default){if(o.hasModel()){const s=wm.get(o);s==null||s.manualTriggerAtCurrentPosition(e,n,t,i)}}class NBe extends Ke{constructor(){super({id:sU,label:v("quickfix.trigger.label","Quick Fix..."),alias:"Quick Fix...",precondition:ue.and(W.writable,W.hasCodeActionsProvider),kbOpts:{kbExpr:W.textInputFocus,primary:2137,weight:100}})}run(e,t){return _b(t,v("editor.action.quickFix.noneMessage","No code actions available"),void 0,void 0,Ka.QuickFix)}}class RBe extends zs{constructor(){super({id:kae,precondition:ue.and(W.writable,W.hasCodeActionsProvider),metadata:{description:"Trigger a code action",args:[{name:"args",schema:aU}]}})}runEditorCommand(e,t,i){const n=Yu.fromUser(i,{kind:zi.Empty,apply:"ifSingle"});return _b(t,typeof(i==null?void 0:i.kind)=="string"?n.preferred?v("editor.action.codeAction.noneMessage.preferred.kind","No preferred code actions for '{0}' available",i.kind):v("editor.action.codeAction.noneMessage.kind","No code actions for '{0}' available",i.kind):n.preferred?v("editor.action.codeAction.noneMessage.preferred","No preferred code actions available"):v("editor.action.codeAction.noneMessage","No code actions available"),{include:n.kind,includeSourceActions:!0,onlyIncludePreferredActions:n.preferred},n.apply)}}class MBe extends Ke{constructor(){super({id:Iae,label:v("refactor.label","Refactor..."),alias:"Refactor...",precondition:ue.and(W.writable,W.hasCodeActionsProvider),kbOpts:{kbExpr:W.textInputFocus,primary:3120,mac:{primary:1328},weight:100},contextMenuOpts:{group:"1_modification",order:2,when:ue.and(W.writable,pk(Pn.Refactor))},metadata:{description:"Refactor...",args:[{name:"args",schema:aU}]}})}run(e,t,i){const n=Yu.fromUser(i,{kind:Pn.Refactor,apply:"never"});return _b(t,typeof(i==null?void 0:i.kind)=="string"?n.preferred?v("editor.action.refactor.noneMessage.preferred.kind","No preferred refactorings for '{0}' available",i.kind):v("editor.action.refactor.noneMessage.kind","No refactorings for '{0}' available",i.kind):n.preferred?v("editor.action.refactor.noneMessage.preferred","No preferred refactorings available"):v("editor.action.refactor.noneMessage","No refactorings available"),{include:Pn.Refactor.contains(n.kind)?n.kind:zi.None,onlyIncludePreferredActions:n.preferred},n.apply,Ka.Refactor)}}class ABe extends Ke{constructor(){super({id:Tae,label:v("source.label","Source Action..."),alias:"Source Action...",precondition:ue.and(W.writable,W.hasCodeActionsProvider),contextMenuOpts:{group:"1_modification",order:2.1,when:ue.and(W.writable,pk(Pn.Source))},metadata:{description:"Source Action...",args:[{name:"args",schema:aU}]}})}run(e,t,i){const n=Yu.fromUser(i,{kind:Pn.Source,apply:"never"});return _b(t,typeof(i==null?void 0:i.kind)=="string"?n.preferred?v("editor.action.source.noneMessage.preferred.kind","No preferred source actions for '{0}' available",i.kind):v("editor.action.source.noneMessage.kind","No source actions for '{0}' available",i.kind):n.preferred?v("editor.action.source.noneMessage.preferred","No preferred source actions available"):v("editor.action.source.noneMessage","No source actions available"),{include:Pn.Source.contains(n.kind)?n.kind:zi.None,includeSourceActions:!0,onlyIncludePreferredActions:n.preferred},n.apply,Ka.SourceAction)}}class PBe extends Ke{constructor(){super({id:oU,label:v("organizeImports.label","Organize Imports"),alias:"Organize Imports",precondition:ue.and(W.writable,pk(Pn.SourceOrganizeImports)),kbOpts:{kbExpr:W.textInputFocus,primary:1581,weight:100}})}run(e,t){return _b(t,v("editor.action.organize.noneMessage","No organize imports action available"),{include:Pn.SourceOrganizeImports,includeSourceActions:!0},"ifSingle",Ka.OrganizeImports)}}class OBe extends Ke{constructor(){super({id:rU,label:v("fixAll.label","Fix All"),alias:"Fix All",precondition:ue.and(W.writable,pk(Pn.SourceFixAll))})}run(e,t){return _b(t,v("fixAll.noneMessage","No fix all action available"),{include:Pn.SourceFixAll,includeSourceActions:!0},"ifSingle",Ka.FixAll)}}class FBe extends Ke{constructor(){super({id:Eae,label:v("autoFix.label","Auto Fix..."),alias:"Auto Fix...",precondition:ue.and(W.writable,pk(Pn.QuickFix)),kbOpts:{kbExpr:W.textInputFocus,primary:1625,mac:{primary:2649},weight:100}})}run(e,t){return _b(t,v("editor.action.autoFix.noneMessage","No auto fixes available"),{include:Pn.QuickFix,onlyIncludePreferredActions:!0},"ifSingle",Ka.AutoFix)}}pi(wm.ID,wm,3);pi(jv.ID,jv,4);Ce(NBe);Ce(MBe);Ce(ABe);Ce(PBe);Ce(FBe);Ce(OBe);Me(new RBe);$n.as(nu.Configuration).registerConfiguration({...iP,properties:{"editor.codeActionWidget.showHeaders":{type:"boolean",scope:5,description:v("showCodeActionHeaders","Enable/disable showing group headers in the Code Action menu."),default:!0}}});$n.as(nu.Configuration).registerConfiguration({...iP,properties:{"editor.codeActionWidget.includeNearbyQuickFixes":{type:"boolean",scope:5,description:v("includeNearbyQuickFixes","Enable/disable showing nearest Quick Fix within a line when not currently on a diagnostic."),default:!0}}});class VW{constructor(){this.lenses=[],this._disposables=new he}dispose(){this._disposables.dispose()}get isDisposed(){return this._disposables.isDisposed}add(e,t){this._disposables.add(e);for(const i of e.lenses)this.lenses.push({symbol:i,provider:t})}}async function Bae(o,e,t){const i=o.ordered(e),n=new Map,s=new VW,r=i.map(async(a,l)=>{n.set(a,l);try{const c=await Promise.resolve(a.provideCodeLenses(e,t));c&&s.add(c,a)}catch(c){hs(c)}});return await Promise.all(r),s.lenses=s.lenses.sort((a,l)=>a.symbol.range.startLineNumber<l.symbol.range.startLineNumber?-1:a.symbol.range.startLineNumber>l.symbol.range.startLineNumber?1:n.get(a.provider)<n.get(l.provider)?-1:n.get(a.provider)>n.get(l.provider)?1:a.symbol.range.startColumn<l.symbol.range.startColumn?-1:a.symbol.range.startColumn>l.symbol.range.startColumn?1:0),s}si.registerCommand("_executeCodeLensProvider",function(o,...e){let[t,i]=e;wi(gt.isUri(t)),wi(typeof i=="number"||!i);const{codeLensProvider:n}=o.get(Ze),s=o.get(Fn).getModel(t);if(!s)throw lc();const r=[],a=new he;return Bae(n,s,Yt.None).then(l=>{a.add(l);const c=[];for(const u of l.lenses)i==null||u.symbol.command?r.push(u.symbol):i-- >0&&u.provider.resolveCodeLens&&c.push(Promise.resolve(u.provider.resolveCodeLens(s,u.symbol,Yt.None)).then(f=>r.push(f||u.symbol)));return Promise.all(c)}).then(()=>r).finally(()=>{setTimeout(()=>a.dispose(),100)})});var BBe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},WBe=function(o,e){return function(t,i){e(t,i,o)}};const Wae=Zt("ICodeLensCache");class QJ{constructor(e,t){this.lineCount=e,this.data=t}}let HW=class{constructor(e){this._fakeProvider=new class{provideCodeLenses(){throw new Error("not supported")}},this._cache=new Dh(20,.75);const t="codelens/cache";WS(Hi,()=>e.remove(t,1));const i="codelens/cache2",n=e.get(i,1,"{}");this._deserialize(n),Ie.once(e.onWillSaveState)(s=>{s.reason===Vx.SHUTDOWN&&e.store(i,this._serialize(),1,1)})}put(e,t){const i=t.lenses.map(r=>{var a;return{range:r.symbol.range,command:r.symbol.command&&{id:"",title:(a=r.symbol.command)===null||a===void 0?void 0:a.title}}}),n=new VW;n.add({lenses:i,dispose:()=>{}},this._fakeProvider);const s=new QJ(e.getLineCount(),n);this._cache.set(e.uri.toString(),s)}get(e){const t=this._cache.get(e.uri.toString());return t&&t.lineCount===e.getLineCount()?t.data:void 0}delete(e){this._cache.delete(e.uri.toString())}_serialize(){const e=Object.create(null);for(const[t,i]of this._cache){const n=new Set;for(const s of i.data.lenses)n.add(s.symbol.range.startLineNumber);e[t]={lineCount:i.lineCount,lines:[...n.values()]}}return JSON.stringify(e)}_deserialize(e){try{const t=JSON.parse(e);for(const i in t){const n=t[i],s=[];for(const a of n.lines)s.push({range:new A(a,1,a,11)});const r=new VW;r.add({lenses:s,dispose(){}},this._fakeProvider),this._cache.set(i,new QJ(n.lineCount,r))}}catch{}}};HW=BBe([WBe(0,Qc)],HW);oi(Wae,HW,1);class VBe{constructor(e,t,i){this.afterColumn=1073741824,this.afterLineNumber=e,this.heightInPx=t,this._onHeight=i,this.suppressMouseDown=!0,this.domNode=document.createElement("div")}onComputedHeight(e){this._lastHeight===void 0?this._lastHeight=e:this._lastHeight!==e&&(this._lastHeight=e,this._onHeight())}isVisible(){return this._lastHeight!==0&&this.domNode.hasAttribute("monaco-visible-view-zone")}}class oD{constructor(e,t){this.allowEditorOverflow=!1,this.suppressMouseDown=!0,this._commands=new Map,this._isEmpty=!0,this._editor=e,this._id=`codelens.widget-${oD._idPool++}`,this.updatePosition(t),this._domNode=document.createElement("span"),this._domNode.className="codelens-decoration"}withCommands(e,t){this._commands.clear();const i=[];let n=!1;for(let s=0;s<e.length;s++){const r=e[s];if(r&&(n=!0,r.command)){const a=Yp(r.command.title.trim());if(r.command.id){const l=`c${oD._idPool++}`;i.push(ye("a",{id:l,title:r.command.tooltip,role:"button"},...a)),this._commands.set(l,r.command)}else i.push(ye("span",{title:r.command.tooltip},...a));s+1<e.length&&i.push(ye("span",void 0,"|"))}}n?(_o(this._domNode,...i),this._isEmpty&&t&&this._domNode.classList.add("fadein"),this._isEmpty=!1):_o(this._domNode,ye("span",void 0,"no commands"))}getCommand(e){return e.parentElement===this._domNode?this._commands.get(e.id):void 0}getId(){return this._id}getDomNode(){return this._domNode}updatePosition(e){const t=this._editor.getModel().getLineFirstNonWhitespaceColumn(e);this._widgetPosition={position:{lineNumber:e,column:t},preference:[1]}}getPosition(){return this._widgetPosition||null}}oD._idPool=0;class gB{constructor(){this._removeDecorations=[],this._addDecorations=[],this._addDecorationsCallbacks=[]}addDecoration(e,t){this._addDecorations.push(e),this._addDecorationsCallbacks.push(t)}removeDecoration(e){this._removeDecorations.push(e)}commit(e){const t=e.deltaDecorations(this._removeDecorations,this._addDecorations);for(let i=0,n=t.length;i<n;i++)this._addDecorationsCallbacks[i](t[i])}}const XJ=Rt.register({collapseOnReplaceEdit:!0,description:"codelens"});class JJ{constructor(e,t,i,n,s,r){this._isDisposed=!1,this._editor=t,this._data=e,this._decorationIds=[];let a;const l=[];this._data.forEach((c,u)=>{c.symbol.command&&l.push(c.symbol),i.addDecoration({range:c.symbol.range,options:XJ},f=>this._decorationIds[u]=f),a?a=A.plusRange(a,c.symbol.range):a=A.lift(c.symbol.range)}),this._viewZone=new VBe(a.startLineNumber-1,s,r),this._viewZoneId=n.addZone(this._viewZone),l.length>0&&(this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(l,!1))}_createContentWidgetIfNecessary(){this._contentWidget?this._editor.layoutContentWidget(this._contentWidget):(this._contentWidget=new oD(this._editor,this._viewZone.afterLineNumber+1),this._editor.addContentWidget(this._contentWidget))}dispose(e,t){this._decorationIds.forEach(e.removeDecoration,e),this._decorationIds=[],t==null||t.removeZone(this._viewZoneId),this._contentWidget&&(this._editor.removeContentWidget(this._contentWidget),this._contentWidget=void 0),this._isDisposed=!0}isDisposed(){return this._isDisposed}isValid(){return this._decorationIds.some((e,t)=>{const i=this._editor.getModel().getDecorationRange(e),n=this._data[t].symbol;return!!(i&&A.isEmpty(n.range)===i.isEmpty())})}updateCodeLensSymbols(e,t){this._decorationIds.forEach(t.removeDecoration,t),this._decorationIds=[],this._data=e,this._data.forEach((i,n)=>{t.addDecoration({range:i.symbol.range,options:XJ},s=>this._decorationIds[n]=s)})}updateHeight(e,t){this._viewZone.heightInPx=e,t.layoutZone(this._viewZoneId),this._contentWidget&&this._editor.layoutContentWidget(this._contentWidget)}computeIfNecessary(e){if(!this._viewZone.isVisible())return null;for(let t=0;t<this._decorationIds.length;t++){const i=e.getDecorationRange(this._decorationIds[t]);i&&(this._data[t].symbol.range=i)}return this._data}updateCommands(e){this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(e,!0);for(let t=0;t<this._data.length;t++){const i=e[t];if(i){const{symbol:n}=this._data[t];n.command=i.command||n.command}}}getCommand(e){var t;return(t=this._contentWidget)===null||t===void 0?void 0:t.getCommand(e)}getLineNumber(){const e=this._editor.getModel().getDecorationRange(this._decorationIds[0]);return e?e.startLineNumber:-1}update(e){if(this.isValid()){const t=this._editor.getModel().getDecorationRange(this._decorationIds[0]);t&&(this._viewZone.afterLineNumber=t.startLineNumber-1,e.layoutZone(this._viewZoneId),this._contentWidget&&(this._contentWidget.updatePosition(t.startLineNumber),this._editor.layoutContentWidget(this._contentWidget)))}}}var HBe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},IS=function(o,e){return function(t,i){e(t,i,o)}};let M1=class{constructor(e,t,i,n,s,r){this._editor=e,this._languageFeaturesService=t,this._commandService=n,this._notificationService=s,this._codeLensCache=r,this._disposables=new he,this._localToDispose=new he,this._lenses=[],this._oldCodeLensModels=new he,this._provideCodeLensDebounce=i.for(t.codeLensProvider,"CodeLensProvide",{min:250}),this._resolveCodeLensesDebounce=i.for(t.codeLensProvider,"CodeLensResolve",{min:250,salt:"resolve"}),this._resolveCodeLensesScheduler=new Ui(()=>this._resolveCodeLensesInViewport(),this._resolveCodeLensesDebounce.default()),this._disposables.add(this._editor.onDidChangeModel(()=>this._onModelChange())),this._disposables.add(this._editor.onDidChangeModelLanguage(()=>this._onModelChange())),this._disposables.add(this._editor.onDidChangeConfiguration(a=>{(a.hasChanged(50)||a.hasChanged(19)||a.hasChanged(18))&&this._updateLensStyle(),a.hasChanged(17)&&this._onModelChange()})),this._disposables.add(t.codeLensProvider.onDidChange(this._onModelChange,this)),this._onModelChange(),this._updateLensStyle()}dispose(){var e;this._localDispose(),this._disposables.dispose(),this._oldCodeLensModels.dispose(),(e=this._currentCodeLensModel)===null||e===void 0||e.dispose()}_getLayoutInfo(){const e=Math.max(1.3,this._editor.getOption(67)/this._editor.getOption(52));let t=this._editor.getOption(19);return(!t||t<5)&&(t=this._editor.getOption(52)*.9|0),{fontSize:t,codeLensHeight:t*e|0}}_updateLensStyle(){const{codeLensHeight:e,fontSize:t}=this._getLayoutInfo(),i=this._editor.getOption(18),n=this._editor.getOption(50),{style:s}=this._editor.getContainerDomNode();s.setProperty("--vscode-editorCodeLens-lineHeight",`${e}px`),s.setProperty("--vscode-editorCodeLens-fontSize",`${t}px`),s.setProperty("--vscode-editorCodeLens-fontFeatureSettings",n.fontFeatureSettings),i&&(s.setProperty("--vscode-editorCodeLens-fontFamily",i),s.setProperty("--vscode-editorCodeLens-fontFamilyDefault",ga.fontFamily)),this._editor.changeViewZones(r=>{for(const a of this._lenses)a.updateHeight(e,r)})}_localDispose(){var e,t,i;(e=this._getCodeLensModelPromise)===null||e===void 0||e.cancel(),this._getCodeLensModelPromise=void 0,(t=this._resolveCodeLensesPromise)===null||t===void 0||t.cancel(),this._resolveCodeLensesPromise=void 0,this._localToDispose.clear(),this._oldCodeLensModels.clear(),(i=this._currentCodeLensModel)===null||i===void 0||i.dispose()}_onModelChange(){this._localDispose();const e=this._editor.getModel();if(!e||!this._editor.getOption(17)||e.isTooLargeForTokenization())return;const t=this._codeLensCache.get(e);if(t&&this._renderCodeLensSymbols(t),!this._languageFeaturesService.codeLensProvider.has(e)){t&&dm(()=>{const n=this._codeLensCache.get(e);t===n&&(this._codeLensCache.delete(e),this._onModelChange())},30*1e3,this._localToDispose);return}for(const n of this._languageFeaturesService.codeLensProvider.all(e))if(typeof n.onDidChange=="function"){const s=n.onDidChange(()=>i.schedule());this._localToDispose.add(s)}const i=new Ui(()=>{var n;const s=Date.now();(n=this._getCodeLensModelPromise)===null||n===void 0||n.cancel(),this._getCodeLensModelPromise=Qs(r=>Bae(this._languageFeaturesService.codeLensProvider,e,r)),this._getCodeLensModelPromise.then(r=>{this._currentCodeLensModel&&this._oldCodeLensModels.add(this._currentCodeLensModel),this._currentCodeLensModel=r,this._codeLensCache.put(e,r);const a=this._provideCodeLensDebounce.update(e,Date.now()-s);i.delay=a,this._renderCodeLensSymbols(r),this._resolveCodeLensesInViewportSoon()},Nt)},this._provideCodeLensDebounce.get(e));this._localToDispose.add(i),this._localToDispose.add(lt(()=>this._resolveCodeLensesScheduler.cancel())),this._localToDispose.add(this._editor.onDidChangeModelContent(()=>{var n;this._editor.changeDecorations(s=>{this._editor.changeViewZones(r=>{const a=[];let l=-1;this._lenses.forEach(u=>{!u.isValid()||l===u.getLineNumber()?a.push(u):(u.update(r),l=u.getLineNumber())});const c=new gB;a.forEach(u=>{u.dispose(c,r),this._lenses.splice(this._lenses.indexOf(u),1)}),c.commit(s)})}),i.schedule(),this._resolveCodeLensesScheduler.cancel(),(n=this._resolveCodeLensesPromise)===null||n===void 0||n.cancel(),this._resolveCodeLensesPromise=void 0})),this._localToDispose.add(this._editor.onDidFocusEditorWidget(()=>{i.schedule()})),this._localToDispose.add(this._editor.onDidBlurEditorText(()=>{i.cancel()})),this._localToDispose.add(this._editor.onDidScrollChange(n=>{n.scrollTopChanged&&this._lenses.length>0&&this._resolveCodeLensesInViewportSoon()})),this._localToDispose.add(this._editor.onDidLayoutChange(()=>{this._resolveCodeLensesInViewportSoon()})),this._localToDispose.add(lt(()=>{if(this._editor.getModel()){const n=Xd.capture(this._editor);this._editor.changeDecorations(s=>{this._editor.changeViewZones(r=>{this._disposeAllLenses(s,r)})}),n.restore(this._editor)}else this._disposeAllLenses(void 0,void 0)})),this._localToDispose.add(this._editor.onMouseDown(n=>{if(n.target.type!==9)return;let s=n.target.element;if((s==null?void 0:s.tagName)==="SPAN"&&(s=s.parentElement),(s==null?void 0:s.tagName)==="A")for(const r of this._lenses){const a=r.getCommand(s);if(a){this._commandService.executeCommand(a.id,...a.arguments||[]).catch(l=>this._notificationService.error(l));break}}})),i.schedule()}_disposeAllLenses(e,t){const i=new gB;for(const n of this._lenses)n.dispose(i,t);e&&i.commit(e),this._lenses.length=0}_renderCodeLensSymbols(e){if(!this._editor.hasModel())return;const t=this._editor.getModel().getLineCount(),i=[];let n;for(const a of e.lenses){const l=a.symbol.range.startLineNumber;l<1||l>t||(n&&n[n.length-1].symbol.range.startLineNumber===l?n.push(a):(n=[a],i.push(n)))}if(!i.length&&!this._lenses.length)return;const s=Xd.capture(this._editor),r=this._getLayoutInfo();this._editor.changeDecorations(a=>{this._editor.changeViewZones(l=>{const c=new gB;let u=0,f=0;for(;f<i.length&&u<this._lenses.length;){const g=i[f][0].symbol.range.startLineNumber,p=this._lenses[u].getLineNumber();p<g?(this._lenses[u].dispose(c,l),this._lenses.splice(u,1)):p===g?(this._lenses[u].updateCodeLensSymbols(i[f],c),f++,u++):(this._lenses.splice(u,0,new JJ(i[f],this._editor,c,l,r.codeLensHeight,()=>this._resolveCodeLensesInViewportSoon())),u++,f++)}for(;u<this._lenses.length;)this._lenses[u].dispose(c,l),this._lenses.splice(u,1);for(;f<i.length;)this._lenses.push(new JJ(i[f],this._editor,c,l,r.codeLensHeight,()=>this._resolveCodeLensesInViewportSoon())),f++;c.commit(a)})}),s.restore(this._editor)}_resolveCodeLensesInViewportSoon(){this._editor.getModel()&&this._resolveCodeLensesScheduler.schedule()}_resolveCodeLensesInViewport(){var e;(e=this._resolveCodeLensesPromise)===null||e===void 0||e.cancel(),this._resolveCodeLensesPromise=void 0;const t=this._editor.getModel();if(!t)return;const i=[],n=[];if(this._lenses.forEach(a=>{const l=a.computeIfNecessary(t);l&&(i.push(l),n.push(a))}),i.length===0)return;const s=Date.now(),r=Qs(a=>{const l=i.map((c,u)=>{const f=new Array(c.length),g=c.map((p,_)=>!p.symbol.command&&typeof p.provider.resolveCodeLens=="function"?Promise.resolve(p.provider.resolveCodeLens(t,p.symbol,a)).then(b=>{f[_]=b},hs):(f[_]=p.symbol,Promise.resolve(void 0)));return Promise.all(g).then(()=>{!a.isCancellationRequested&&!n[u].isDisposed()&&n[u].updateCommands(f)})});return Promise.all(l)});this._resolveCodeLensesPromise=r,this._resolveCodeLensesPromise.then(()=>{const a=this._resolveCodeLensesDebounce.update(t,Date.now()-s);this._resolveCodeLensesScheduler.delay=a,this._currentCodeLensModel&&this._codeLensCache.put(t,this._currentCodeLensModel),this._oldCodeLensModels.clear(),r===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)},a=>{Nt(a),r===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)})}async getModel(){var e;return await this._getCodeLensModelPromise,await this._resolveCodeLensesPromise,!((e=this._currentCodeLensModel)===null||e===void 0)&&e.isDisposed?void 0:this._currentCodeLensModel}};M1.ID="css.editor.codeLens";M1=HBe([IS(1,Ze),IS(2,vc),IS(3,Un),IS(4,ys),IS(5,Wae)],M1);pi(M1.ID,M1,1);Ce(class extends Ke{constructor(){super({id:"codelens.showLensesInCurrentLine",precondition:W.hasCodeLensProvider,label:v("showLensOnLine","Show CodeLens Commands For Current Line"),alias:"Show CodeLens Commands For Current Line"})}async run(e,t){if(!t.hasModel())return;const i=e.get(ou),n=e.get(Un),s=e.get(ys),r=t.getSelection().positionLineNumber,a=t.getContribution(M1.ID);if(!a)return;const l=await a.getModel();if(!l)return;const c=[];for(const g of l.lenses)g.symbol.command&&g.symbol.range.startLineNumber===r&&c.push({label:g.symbol.command.title,command:g.symbol.command});if(c.length===0)return;const u=await i.pick(c,{canPickMany:!1,placeHolder:v("placeHolder","Select a command")});if(!u)return;let f=u.command;if(l.isDisposed){const g=await a.getModel(),p=g==null?void 0:g.lenses.find(_=>{var b;return _.symbol.range.startLineNumber===r&&((b=_.symbol.command)===null||b===void 0?void 0:b.title)===f.title});if(!p||!p.symbol.command)return;f=p.symbol.command}try{await n.executeCommand(f.id,...f.arguments||[])}catch(g){s.error(g)}}});var zBe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},pB=function(o,e){return function(t,i){e(t,i,o)}};class lU{constructor(e,t){this._editorWorkerClient=new dH(e,!1,"editorWorkerService",t)}async provideDocumentColors(e,t){return this._editorWorkerClient.computeDefaultDocumentColors(e.uri)}provideColorPresentations(e,t,i){const n=t.range,s=t.color,r=s.alpha,a=new ne(new ai(Math.round(255*s.red),Math.round(255*s.green),Math.round(255*s.blue),r)),l=r?ne.Format.CSS.formatRGB(a):ne.Format.CSS.formatRGBA(a),c=r?ne.Format.CSS.formatHSL(a):ne.Format.CSS.formatHSLA(a),u=r?ne.Format.CSS.formatHex(a):ne.Format.CSS.formatHexA(a),f=[];return f.push({label:l,textEdit:{range:n,text:l}}),f.push({label:c,textEdit:{range:n,text:c}}),f.push({label:u,textEdit:{range:n,text:u}}),f}}let zW=class extends J{constructor(e,t,i){super(),this._register(i.colorProvider.register("*",new lU(e,t)))}};zW=zBe([pB(0,Fn),pB(1,dn),pB(2,Ze)],zW);dk(zW);async function Vae(o,e,t,i=!0){return cU(new UBe,o,e,t,i)}function Hae(o,e,t,i){return Promise.resolve(t.provideColorPresentations(o,e,i))}class UBe{constructor(){}async compute(e,t,i,n){const s=await e.provideDocumentColors(t,i);if(Array.isArray(s))for(const r of s)n.push({colorInfo:r,provider:e});return Array.isArray(s)}}class $Be{constructor(){}async compute(e,t,i,n){const s=await e.provideDocumentColors(t,i);if(Array.isArray(s))for(const r of s)n.push({range:r.range,color:[r.color.red,r.color.green,r.color.blue,r.color.alpha]});return Array.isArray(s)}}class jBe{constructor(e){this.colorInfo=e}async compute(e,t,i,n){const s=await e.provideColorPresentations(t,this.colorInfo,Yt.None);return Array.isArray(s)&&n.push(...s),Array.isArray(s)}}async function cU(o,e,t,i,n){let s=!1,r;const a=[],l=e.ordered(t);for(let c=l.length-1;c>=0;c--){const u=l[c];if(u instanceof lU)r=u;else try{await o.compute(u,t,i,a)&&(s=!0)}catch(f){hs(f)}}return s?a:r&&n?(await o.compute(r,t,i,a),a):[]}function zae(o,e){const{colorProvider:t}=o.get(Ze),i=o.get(Fn).getModel(e);if(!i)throw lc();const n=o.get($t).getValue("editor.defaultColorDecorators",{resource:e});return{model:i,colorProviderRegistry:t,isDefaultColorDecoratorsEnabled:n}}si.registerCommand("_executeDocumentColorProvider",function(o,...e){const[t]=e;if(!(t instanceof gt))throw lc();const{model:i,colorProviderRegistry:n,isDefaultColorDecoratorsEnabled:s}=zae(o,t);return cU(new $Be,n,i,Yt.None,s)});si.registerCommand("_executeColorPresentationProvider",function(o,...e){const[t,i]=e,{uri:n,range:s}=i;if(!(n instanceof gt)||!Array.isArray(t)||t.length!==4||!A.isIRange(s))throw lc();const{model:r,colorProviderRegistry:a,isDefaultColorDecoratorsEnabled:l}=zae(o,n),[c,u,f,g]=t;return cU(new jBe({range:s,color:{red:c,green:u,blue:f,alpha:g}}),a,r,Yt.None,l)});var KBe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},mB=function(o,e){return function(t,i){e(t,i,o)}},UW;const Uae=Object.create({});let ym=UW=class extends J{constructor(e,t,i,n){super(),this._editor=e,this._configurationService=t,this._languageFeaturesService=i,this._localToDispose=this._register(new he),this._decorationsIds=[],this._colorDatas=new Map,this._colorDecoratorIds=this._editor.createDecorationsCollection(),this._ruleFactory=new $D(this._editor),this._decoratorLimitReporter=new qBe,this._colorDecorationClassRefs=this._register(new he),this._debounceInformation=n.for(i.colorProvider,"Document Colors",{min:UW.RECOMPUTE_TIME}),this._register(e.onDidChangeModel(()=>{this._isColorDecoratorsEnabled=this.isEnabled(),this.updateColors()})),this._register(e.onDidChangeModelLanguage(()=>this.updateColors())),this._register(i.colorProvider.onDidChange(()=>this.updateColors())),this._register(e.onDidChangeConfiguration(s=>{const r=this._isColorDecoratorsEnabled;this._isColorDecoratorsEnabled=this.isEnabled(),this._isDefaultColorDecoratorsEnabled=this._editor.getOption(147);const a=r!==this._isColorDecoratorsEnabled||s.hasChanged(21),l=s.hasChanged(147);(a||l)&&(this._isColorDecoratorsEnabled?this.updateColors():this.removeAllDecorations())})),this._timeoutTimer=null,this._computePromise=null,this._isColorDecoratorsEnabled=this.isEnabled(),this._isDefaultColorDecoratorsEnabled=this._editor.getOption(147),this.updateColors()}isEnabled(){const e=this._editor.getModel();if(!e)return!1;const t=e.getLanguageId(),i=this._configurationService.getValue(t);if(i&&typeof i=="object"){const n=i.colorDecorators;if(n&&n.enable!==void 0&&!n.enable)return n.enable}return this._editor.getOption(20)}static get(e){return e.getContribution(this.ID)}dispose(){this.stop(),this.removeAllDecorations(),super.dispose()}updateColors(){if(this.stop(),!this._isColorDecoratorsEnabled)return;const e=this._editor.getModel();!e||!this._languageFeaturesService.colorProvider.has(e)||(this._localToDispose.add(this._editor.onDidChangeModelContent(()=>{this._timeoutTimer||(this._timeoutTimer=new Yc,this._timeoutTimer.cancelAndSet(()=>{this._timeoutTimer=null,this.beginCompute()},this._debounceInformation.get(e)))})),this.beginCompute())}async beginCompute(){this._computePromise=Qs(async e=>{const t=this._editor.getModel();if(!t)return[];const i=new Ao(!1),n=await Vae(this._languageFeaturesService.colorProvider,t,e,this._isDefaultColorDecoratorsEnabled);return this._debounceInformation.update(t,i.elapsed()),n});try{const e=await this._computePromise;this.updateDecorations(e),this.updateColorDecorators(e),this._computePromise=null}catch(e){Nt(e)}}stop(){this._timeoutTimer&&(this._timeoutTimer.cancel(),this._timeoutTimer=null),this._computePromise&&(this._computePromise.cancel(),this._computePromise=null),this._localToDispose.clear()}updateDecorations(e){const t=e.map(i=>({range:{startLineNumber:i.colorInfo.range.startLineNumber,startColumn:i.colorInfo.range.startColumn,endLineNumber:i.colorInfo.range.endLineNumber,endColumn:i.colorInfo.range.endColumn},options:Rt.EMPTY}));this._editor.changeDecorations(i=>{this._decorationsIds=i.deltaDecorations(this._decorationsIds,t),this._colorDatas=new Map,this._decorationsIds.forEach((n,s)=>this._colorDatas.set(n,e[s]))})}updateColorDecorators(e){this._colorDecorationClassRefs.clear();const t=[],i=this._editor.getOption(21);for(let s=0;s<e.length&&t.length<i;s++){const{red:r,green:a,blue:l,alpha:c}=e[s].colorInfo.color,u=new ai(Math.round(r*255),Math.round(a*255),Math.round(l*255),c),f=`rgba(${u.r}, ${u.g}, ${u.b}, ${u.a})`,g=this._colorDecorationClassRefs.add(this._ruleFactory.createClassNameRef({backgroundColor:f}));t.push({range:{startLineNumber:e[s].colorInfo.range.startLineNumber,startColumn:e[s].colorInfo.range.startColumn,endLineNumber:e[s].colorInfo.range.endLineNumber,endColumn:e[s].colorInfo.range.endColumn},options:{description:"colorDetector",before:{content:_ie,inlineClassName:`${g.className} colorpicker-color-decoration`,inlineClassNameAffectsLetterSpacing:!0,attachedData:Uae}}})}const n=i<e.length?i:!1;this._decoratorLimitReporter.update(e.length,n),this._colorDecoratorIds.set(t)}removeAllDecorations(){this._editor.removeDecorations(this._decorationsIds),this._decorationsIds=[],this._colorDecoratorIds.clear(),this._colorDecorationClassRefs.clear()}getColorData(e){const t=this._editor.getModel();if(!t)return null;const i=t.getDecorationsInRange(A.fromPositions(e,e)).filter(n=>this._colorDatas.has(n.id));return i.length===0?null:this._colorDatas.get(i[0].id)}isColorDecoration(e){return this._colorDecoratorIds.has(e)}};ym.ID="editor.contrib.colorDetector";ym.RECOMPUTE_TIME=1e3;ym=UW=KBe([mB(1,$t),mB(2,Ze),mB(3,vc)],ym);class qBe{constructor(){this._onDidChange=new Y,this._computed=0,this._limited=!1}update(e,t){(e!==this._computed||t!==this._limited)&&(this._computed=e,this._limited=t,this._onDidChange.fire())}}pi(ym.ID,ym,1);class GBe{get color(){return this._color}set color(e){this._color.equals(e)||(this._color=e,this._onDidChangeColor.fire(e))}get presentation(){return this.colorPresentations[this.presentationIndex]}get colorPresentations(){return this._colorPresentations}set colorPresentations(e){this._colorPresentations=e,this.presentationIndex>e.length-1&&(this.presentationIndex=0),this._onDidChangePresentation.fire(this.presentation)}constructor(e,t,i){this.presentationIndex=i,this._onColorFlushed=new Y,this.onColorFlushed=this._onColorFlushed.event,this._onDidChangeColor=new Y,this.onDidChangeColor=this._onDidChangeColor.event,this._onDidChangePresentation=new Y,this.onDidChangePresentation=this._onDidChangePresentation.event,this.originalColor=e,this._color=e,this._colorPresentations=t}selectNextColorPresentation(){this.presentationIndex=(this.presentationIndex+1)%this.colorPresentations.length,this.flushColor(),this._onDidChangePresentation.fire(this.presentation)}guessColorPresentation(e,t){let i=-1;for(let n=0;n<this.colorPresentations.length;n++)if(t.toLowerCase()===this.colorPresentations[n].label){i=n;break}if(i===-1){const n=t.split("(")[0].toLowerCase();for(let s=0;s<this.colorPresentations.length;s++)if(this.colorPresentations[s].label.toLowerCase().startsWith(n)){i=s;break}}i!==-1&&i!==this.presentationIndex&&(this.presentationIndex=i,this._onDidChangePresentation.fire(this.presentation))}flushColor(){this._onColorFlushed.fire(this._color)}}const vl=ye;class YBe extends J{constructor(e,t,i,n=!1){super(),this.model=t,this.showingStandaloneColorPicker=n,this._closeButton=null,this._domNode=vl(".colorpicker-header"),ge(e,this._domNode),this._pickedColorNode=ge(this._domNode,vl(".picked-color")),ge(this._pickedColorNode,vl("span.codicon.codicon-color-mode")),this._pickedColorPresentation=ge(this._pickedColorNode,document.createElement("span")),this._pickedColorPresentation.classList.add("picked-color-presentation");const s=v("clickToToggleColorOptions","Click to toggle color options (rgb/hsl/hex)");this._pickedColorNode.setAttribute("title",s),this._originalColorNode=ge(this._domNode,vl(".original-color")),this._originalColorNode.style.backgroundColor=ne.Format.CSS.format(this.model.originalColor)||"",this.backgroundColor=i.getColorTheme().getColor(TR)||ne.white,this._register(i.onDidColorThemeChange(r=>{this.backgroundColor=r.getColor(TR)||ne.white})),this._register(oe(this._pickedColorNode,ke.CLICK,()=>this.model.selectNextColorPresentation())),this._register(oe(this._originalColorNode,ke.CLICK,()=>{this.model.color=this.model.originalColor,this.model.flushColor()})),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this._register(t.onDidChangePresentation(this.onDidChangePresentation,this)),this._pickedColorNode.style.backgroundColor=ne.Format.CSS.format(t.color)||"",this._pickedColorNode.classList.toggle("light",t.color.rgba.a<.5?this.backgroundColor.isLighter():t.color.isLighter()),this.onDidChangeColor(this.model.color),this.showingStandaloneColorPicker&&(this._domNode.classList.add("standalone-colorpicker"),this._closeButton=this._register(new ZBe(this._domNode)))}get closeButton(){return this._closeButton}get pickedColorNode(){return this._pickedColorNode}get originalColorNode(){return this._originalColorNode}onDidChangeColor(e){this._pickedColorNode.style.backgroundColor=ne.Format.CSS.format(e)||"",this._pickedColorNode.classList.toggle("light",e.rgba.a<.5?this.backgroundColor.isLighter():e.isLighter()),this.onDidChangePresentation()}onDidChangePresentation(){this._pickedColorPresentation.textContent=this.model.presentation?this.model.presentation.label:""}}class ZBe extends J{constructor(e){super(),this._onClicked=this._register(new Y),this.onClicked=this._onClicked.event,this._button=document.createElement("div"),this._button.classList.add("close-button"),ge(e,this._button);const t=document.createElement("div");t.classList.add("close-button-inner-div"),ge(this._button,t),ge(t,vl(".button"+pt.asCSSSelector(gs("color-picker-close",Ee.close,v("closeIcon","Icon to close the color picker"))))).classList.add("close-icon"),this._register(oe(this._button,ke.CLICK,()=>{this._onClicked.fire()}))}}class QBe extends J{constructor(e,t,i,n=!1){super(),this.model=t,this.pixelRatio=i,this._insertButton=null,this._domNode=vl(".colorpicker-body"),ge(e,this._domNode),this._saturationBox=new XBe(this._domNode,this.model,this.pixelRatio),this._register(this._saturationBox),this._register(this._saturationBox.onDidChange(this.onDidSaturationValueChange,this)),this._register(this._saturationBox.onColorFlushed(this.flushColor,this)),this._opacityStrip=new JBe(this._domNode,this.model,n),this._register(this._opacityStrip),this._register(this._opacityStrip.onDidChange(this.onDidOpacityChange,this)),this._register(this._opacityStrip.onColorFlushed(this.flushColor,this)),this._hueStrip=new e7e(this._domNode,this.model,n),this._register(this._hueStrip),this._register(this._hueStrip.onDidChange(this.onDidHueChange,this)),this._register(this._hueStrip.onColorFlushed(this.flushColor,this)),n&&(this._insertButton=this._register(new t7e(this._domNode)),this._domNode.classList.add("standalone-colorpicker"))}flushColor(){this.model.flushColor()}onDidSaturationValueChange({s:e,v:t}){const i=this.model.color.hsva;this.model.color=new ne(new Zu(i.h,e,t,i.a))}onDidOpacityChange(e){const t=this.model.color.hsva;this.model.color=new ne(new Zu(t.h,t.s,t.v,e))}onDidHueChange(e){const t=this.model.color.hsva,i=(1-e)*360;this.model.color=new ne(new Zu(i===360?0:i,t.s,t.v,t.a))}get domNode(){return this._domNode}get saturationBox(){return this._saturationBox}get enterButton(){return this._insertButton}layout(){this._saturationBox.layout(),this._opacityStrip.layout(),this._hueStrip.layout()}}class XBe extends J{constructor(e,t,i){super(),this.model=t,this.pixelRatio=i,this._onDidChange=new Y,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new Y,this.onColorFlushed=this._onColorFlushed.event,this._domNode=vl(".saturation-wrap"),ge(e,this._domNode),this._canvas=document.createElement("canvas"),this._canvas.className="saturation-box",ge(this._domNode,this._canvas),this.selection=vl(".saturation-selection"),ge(this._domNode,this.selection),this.layout(),this._register(oe(this._domNode,ke.POINTER_DOWN,n=>this.onPointerDown(n))),this._register(this.model.onDidChangeColor(this.onDidChangeColor,this)),this.monitor=null}get domNode(){return this._domNode}onPointerDown(e){if(!e.target||!(e.target instanceof Element))return;this.monitor=this._register(new Q1);const t=ws(this._domNode);e.target!==this.selection&&this.onDidChangePosition(e.offsetX,e.offsetY),this.monitor.startMonitoring(e.target,e.pointerId,e.buttons,n=>this.onDidChangePosition(n.pageX-t.left,n.pageY-t.top),()=>null);const i=oe(e.target.ownerDocument,ke.POINTER_UP,()=>{this._onColorFlushed.fire(),i.dispose(),this.monitor&&(this.monitor.stopMonitoring(!0),this.monitor=null)},!0)}onDidChangePosition(e,t){const i=Math.max(0,Math.min(1,e/this.width)),n=Math.max(0,Math.min(1,1-t/this.height));this.paintSelection(i,n),this._onDidChange.fire({s:i,v:n})}layout(){this.width=this._domNode.offsetWidth,this.height=this._domNode.offsetHeight,this._canvas.width=this.width*this.pixelRatio,this._canvas.height=this.height*this.pixelRatio,this.paint();const e=this.model.color.hsva;this.paintSelection(e.s,e.v)}paint(){const e=this.model.color.hsva,t=new ne(new Zu(e.h,1,1,1)),i=this._canvas.getContext("2d"),n=i.createLinearGradient(0,0,this._canvas.width,0);n.addColorStop(0,"rgba(255, 255, 255, 1)"),n.addColorStop(.5,"rgba(255, 255, 255, 0.5)"),n.addColorStop(1,"rgba(255, 255, 255, 0)");const s=i.createLinearGradient(0,0,0,this._canvas.height);s.addColorStop(0,"rgba(0, 0, 0, 0)"),s.addColorStop(1,"rgba(0, 0, 0, 1)"),i.rect(0,0,this._canvas.width,this._canvas.height),i.fillStyle=ne.Format.CSS.format(t),i.fill(),i.fillStyle=n,i.fill(),i.fillStyle=s,i.fill()}paintSelection(e,t){this.selection.style.left=`${e*this.width}px`,this.selection.style.top=`${this.height-t*this.height}px`}onDidChangeColor(e){if(this.monitor&&this.monitor.isMonitoring())return;this.paint();const t=e.hsva;this.paintSelection(t.s,t.v)}}class $ae extends J{constructor(e,t,i=!1){super(),this.model=t,this._onDidChange=new Y,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new Y,this.onColorFlushed=this._onColorFlushed.event,i?(this.domNode=ge(e,vl(".standalone-strip")),this.overlay=ge(this.domNode,vl(".standalone-overlay"))):(this.domNode=ge(e,vl(".strip")),this.overlay=ge(this.domNode,vl(".overlay"))),this.slider=ge(this.domNode,vl(".slider")),this.slider.style.top="0px",this._register(oe(this.domNode,ke.POINTER_DOWN,n=>this.onPointerDown(n))),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this.layout()}layout(){this.height=this.domNode.offsetHeight-this.slider.offsetHeight;const e=this.getValue(this.model.color);this.updateSliderPosition(e)}onDidChangeColor(e){const t=this.getValue(e);this.updateSliderPosition(t)}onPointerDown(e){if(!e.target||!(e.target instanceof Element))return;const t=this._register(new Q1),i=ws(this.domNode);this.domNode.classList.add("grabbing"),e.target!==this.slider&&this.onDidChangeTop(e.offsetY),t.startMonitoring(e.target,e.pointerId,e.buttons,s=>this.onDidChangeTop(s.pageY-i.top),()=>null);const n=oe(e.target.ownerDocument,ke.POINTER_UP,()=>{this._onColorFlushed.fire(),n.dispose(),t.stopMonitoring(!0),this.domNode.classList.remove("grabbing")},!0)}onDidChangeTop(e){const t=Math.max(0,Math.min(1,1-e/this.height));this.updateSliderPosition(t),this._onDidChange.fire(t)}updateSliderPosition(e){this.slider.style.top=`${(1-e)*this.height}px`}}class JBe extends $ae{constructor(e,t,i=!1){super(e,t,i),this.domNode.classList.add("opacity-strip"),this.onDidChangeColor(this.model.color)}onDidChangeColor(e){super.onDidChangeColor(e);const{r:t,g:i,b:n}=e.rgba,s=new ne(new ai(t,i,n,1)),r=new ne(new ai(t,i,n,0));this.overlay.style.background=`linear-gradient(to bottom, ${s} 0%, ${r} 100%)`}getValue(e){return e.hsva.a}}class e7e extends $ae{constructor(e,t,i=!1){super(e,t,i),this.domNode.classList.add("hue-strip")}getValue(e){return 1-e.hsva.h/360}}class t7e extends J{constructor(e){super(),this._onClicked=this._register(new Y),this.onClicked=this._onClicked.event,this._button=ge(e,document.createElement("button")),this._button.classList.add("insert-button"),this._button.textContent="Insert",this._register(oe(this._button,ke.CLICK,()=>{this._onClicked.fire()}))}get button(){return this._button}}class i7e extends Rl{constructor(e,t,i,n,s=!1){super(),this.model=t,this.pixelRatio=i,this._register(nx.getInstance(ft(e)).onDidChange(()=>this.layout()));const r=vl(".colorpicker-widget");e.appendChild(r),this.header=this._register(new YBe(r,this.model,n,s)),this.body=this._register(new QBe(r,this.model,this.pixelRatio,s))}layout(){this.body.layout()}}var jae=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Kae=function(o,e){return function(t,i){e(t,i,o)}};class n7e{constructor(e,t,i,n){this.owner=e,this.range=t,this.model=i,this.provider=n,this.forceShowAtRange=!0}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}let VM=class{constructor(e,t){this._editor=e,this._themeService=t,this.hoverOrdinal=2}computeSync(e,t){return[]}computeAsync(e,t,i){return ks.fromPromise(this._computeAsync(e,t,i))}async _computeAsync(e,t,i){if(!this._editor.hasModel())return[];const n=ym.get(this._editor);if(!n)return[];for(const s of t){if(!n.isColorDecoration(s))continue;const r=n.getColorData(s.range.getStartPosition());if(r)return[await qae(this,this._editor.getModel(),r.colorInfo,r.provider)]}return[]}renderHoverParts(e,t){return Gae(this,this._editor,this._themeService,t,e)}};VM=jae([Kae(1,Us)],VM);class s7e{constructor(e,t,i,n){this.owner=e,this.range=t,this.model=i,this.provider=n}}let rD=class{constructor(e,t){this._editor=e,this._themeService=t,this._color=null}async createColorHover(e,t,i){if(!this._editor.hasModel()||!ym.get(this._editor))return null;const s=await Vae(i,this._editor.getModel(),Yt.None);let r=null,a=null;for(const f of s){const g=f.colorInfo;A.containsRange(g.range,e.range)&&(r=g,a=f.provider)}const l=r??e,c=a??t,u=!!r;return{colorHover:await qae(this,this._editor.getModel(),l,c),foundInEditor:u}}async updateEditorModel(e){if(!this._editor.hasModel())return;const t=e.model;let i=new A(e.range.startLineNumber,e.range.startColumn,e.range.endLineNumber,e.range.endColumn);this._color&&(await zN(this._editor.getModel(),t,this._color,i,e),i=Yae(this._editor,i,t))}renderHoverParts(e,t){return Gae(this,this._editor,this._themeService,t,e)}set color(e){this._color=e}get color(){return this._color}};rD=jae([Kae(1,Us)],rD);async function qae(o,e,t,i){const n=e.getValueInRange(t.range),{red:s,green:r,blue:a,alpha:l}=t.color,c=new ai(Math.round(s*255),Math.round(r*255),Math.round(a*255),l),u=new ne(c),f=await Hae(e,t,i,Yt.None),g=new GBe(u,[],0);return g.colorPresentations=f||[],g.guessColorPresentation(u,n),o instanceof VM?new n7e(o,A.lift(t.range),g,i):new s7e(o,A.lift(t.range),g,i)}function Gae(o,e,t,i,n){if(i.length===0||!e.hasModel())return J.None;if(n.setMinimumDimensions){const g=e.getOption(67)+8;n.setMinimumDimensions(new yi(302,g))}const s=new he,r=i[0],a=e.getModel(),l=r.model,c=s.add(new i7e(n.fragment,l,e.getOption(143),t,o instanceof rD));n.setColorPicker(c);let u=!1,f=new A(r.range.startLineNumber,r.range.startColumn,r.range.endLineNumber,r.range.endColumn);if(o instanceof rD){const g=i[0].model.color;o.color=g,zN(a,l,g,f,r),s.add(l.onColorFlushed(p=>{o.color=p}))}else s.add(l.onColorFlushed(async g=>{await zN(a,l,g,f,r),u=!0,f=Yae(e,f,l)}));return s.add(l.onDidChangeColor(g=>{zN(a,l,g,f,r)})),s.add(e.onDidChangeModelContent(g=>{u?u=!1:(n.hide(),e.focus())})),s}function Yae(o,e,t){var i,n;const s=[],r=(i=t.presentation.textEdit)!==null&&i!==void 0?i:{range:e,text:t.presentation.label,forceMoveMarkers:!1};s.push(r),t.presentation.additionalTextEdits&&s.push(...t.presentation.additionalTextEdits);const a=A.lift(r.range),l=o.getModel()._setTrackedRange(null,a,3);return o.executeEdits("colorpicker",s),o.pushUndoStop(),(n=o.getModel()._getTrackedRange(l))!==null&&n!==void 0?n:a}async function zN(o,e,t,i,n){const s=await Hae(o,{range:i,color:{red:t.rgba.r/255,green:t.rgba.g/255,blue:t.rgba.b/255,alpha:t.rgba.a}},n.provider,Yt.None);e.colorPresentations=s||[]}function $W(o,e){return!!o[e]}class _B{constructor(e,t){this.target=e.target,this.isLeftClick=e.event.leftButton,this.isMiddleClick=e.event.middleButton,this.isRightClick=e.event.rightButton,this.hasTriggerModifier=$W(e.event,t.triggerModifier),this.hasSideBySideModifier=$W(e.event,t.triggerSideBySideModifier),this.isNoneOrSingleMouseDown=e.event.detail<=1}}class eee{constructor(e,t){this.keyCodeIsTriggerKey=e.keyCode===t.triggerKey,this.keyCodeIsSideBySideKey=e.keyCode===t.triggerSideBySideKey,this.hasTriggerModifier=$W(e,t.triggerModifier)}}class OT{constructor(e,t,i,n){this.triggerKey=e,this.triggerModifier=t,this.triggerSideBySideKey=i,this.triggerSideBySideModifier=n}equals(e){return this.triggerKey===e.triggerKey&&this.triggerModifier===e.triggerModifier&&this.triggerSideBySideKey===e.triggerSideBySideKey&&this.triggerSideBySideModifier===e.triggerSideBySideModifier}}function tee(o){return o==="altKey"?Kt?new OT(57,"metaKey",6,"altKey"):new OT(5,"ctrlKey",6,"altKey"):Kt?new OT(6,"altKey",57,"metaKey"):new OT(6,"altKey",5,"ctrlKey")}class WP extends J{constructor(e,t){var i;super(),this._onMouseMoveOrRelevantKeyDown=this._register(new Y),this.onMouseMoveOrRelevantKeyDown=this._onMouseMoveOrRelevantKeyDown.event,this._onExecute=this._register(new Y),this.onExecute=this._onExecute.event,this._onCancel=this._register(new Y),this.onCancel=this._onCancel.event,this._editor=e,this._extractLineNumberFromMouseEvent=(i=t==null?void 0:t.extractLineNumberFromMouseEvent)!==null&&i!==void 0?i:n=>n.target.position?n.target.position.lineNumber:0,this._opts=tee(this._editor.getOption(78)),this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._register(this._editor.onDidChangeConfiguration(n=>{if(n.hasChanged(78)){const s=tee(this._editor.getOption(78));if(this._opts.equals(s))return;this._opts=s,this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._onCancel.fire()}})),this._register(this._editor.onMouseMove(n=>this._onEditorMouseMove(new _B(n,this._opts)))),this._register(this._editor.onMouseDown(n=>this._onEditorMouseDown(new _B(n,this._opts)))),this._register(this._editor.onMouseUp(n=>this._onEditorMouseUp(new _B(n,this._opts)))),this._register(this._editor.onKeyDown(n=>this._onEditorKeyDown(new eee(n,this._opts)))),this._register(this._editor.onKeyUp(n=>this._onEditorKeyUp(new eee(n,this._opts)))),this._register(this._editor.onMouseDrag(()=>this._resetHandler())),this._register(this._editor.onDidChangeCursorSelection(n=>this._onDidChangeCursorSelection(n))),this._register(this._editor.onDidChangeModel(n=>this._resetHandler())),this._register(this._editor.onDidChangeModelContent(()=>this._resetHandler())),this._register(this._editor.onDidScrollChange(n=>{(n.scrollTopChanged||n.scrollLeftChanged)&&this._resetHandler()}))}_onDidChangeCursorSelection(e){e.selection&&e.selection.startColumn!==e.selection.endColumn&&this._resetHandler()}_onEditorMouseMove(e){this._lastMouseMoveEvent=e,this._onMouseMoveOrRelevantKeyDown.fire([e,null])}_onEditorMouseDown(e){this._hasTriggerKeyOnMouseDown=e.hasTriggerModifier,this._lineNumberOnMouseDown=this._extractLineNumberFromMouseEvent(e)}_onEditorMouseUp(e){const t=this._extractLineNumberFromMouseEvent(e);this._hasTriggerKeyOnMouseDown&&this._lineNumberOnMouseDown&&this._lineNumberOnMouseDown===t&&this._onExecute.fire(e)}_onEditorKeyDown(e){this._lastMouseMoveEvent&&(e.keyCodeIsTriggerKey||e.keyCodeIsSideBySideKey&&e.hasTriggerModifier)?this._onMouseMoveOrRelevantKeyDown.fire([this._lastMouseMoveEvent,e]):e.hasTriggerModifier&&this._onCancel.fire()}_onEditorKeyUp(e){e.keyCodeIsTriggerKey&&this._onCancel.fire()}_resetHandler(){this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._onCancel.fire()}}var o7e=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},sf=function(o,e){return function(t,i){e(t,i,o)}};let Sm=class extends _1{constructor(e,t,i,n,s,r,a,l,c,u,f,g,p){super(e,{...n.getRawOptions(),overflowWidgetsDomNode:n.getOverflowWidgetsDomNode()},i,s,r,a,l,c,u,f,g,p),this._parentEditor=n,this._overwriteOptions=t,super.updateOptions(this._overwriteOptions),this._register(n.onDidChangeConfiguration(_=>this._onParentConfigurationChanged(_)))}getParentEditor(){return this._parentEditor}_onParentConfigurationChanged(e){super.updateOptions(this._parentEditor.getRawOptions()),super.updateOptions(this._overwriteOptions)}updateOptions(e){cA(this._overwriteOptions,e,!0),super.updateOptions(this._overwriteOptions)}};Sm=o7e([sf(4,ct),sf(5,gi),sf(6,Un),sf(7,bt),sf(8,Us),sf(9,ys),sf(10,mc),sf(11,dn),sf(12,Ze)],Sm);const iee=new ne(new ai(0,122,204)),r7e={showArrow:!0,showFrame:!0,className:"",frameColor:iee,arrowColor:iee,keepEditorSelection:!1},a7e="vs.editor.contrib.zoneWidget";class l7e{constructor(e,t,i,n,s,r,a,l){this.id="",this.domNode=e,this.afterLineNumber=t,this.afterColumn=i,this.heightInLines=n,this.showInHiddenAreas=a,this.ordinal=l,this._onDomNodeTop=s,this._onComputedHeight=r}onDomNodeTop(e){this._onDomNodeTop(e)}onComputedHeight(e){this._onComputedHeight(e)}}class c7e{constructor(e,t){this._id=e,this._domNode=t}getId(){return this._id}getDomNode(){return this._domNode}getPosition(){return null}}class VP{constructor(e){this._editor=e,this._ruleName=VP._IdGenerator.nextId(),this._decorations=this._editor.createDecorationsCollection(),this._color=null,this._height=-1}dispose(){this.hide(),i9(this._ruleName)}set color(e){this._color!==e&&(this._color=e,this._updateStyle())}set height(e){this._height!==e&&(this._height=e,this._updateStyle())}_updateStyle(){i9(this._ruleName),bR(`.monaco-editor ${this._ruleName}`,`border-style: solid; border-color: transparent; border-bottom-color: ${this._color}; border-width: ${this._height}px; bottom: -${this._height}px !important; margin-left: -${this._height}px; `)}show(e){e.column===1&&(e={lineNumber:e.lineNumber,column:2}),this._decorations.set([{range:A.fromPositions(e),options:{description:"zone-widget-arrow",className:this._ruleName,stickiness:1}}])}hide(){this._decorations.clear()}}VP._IdGenerator=new az(".arrow-decoration-");class d7e{constructor(e,t={}){this._arrow=null,this._overlayWidget=null,this._resizeSash=null,this._viewZone=null,this._disposables=new he,this.container=null,this._isShowing=!1,this.editor=e,this._positionMarkerId=this.editor.createDecorationsCollection(),this.options=gf(t),cA(this.options,r7e,!1),this.domNode=document.createElement("div"),this.options.isAccessible||(this.domNode.setAttribute("aria-hidden","true"),this.domNode.setAttribute("role","presentation")),this._disposables.add(this.editor.onDidLayoutChange(i=>{const n=this._getWidth(i);this.domNode.style.width=n+"px",this.domNode.style.left=this._getLeft(i)+"px",this._onWidth(n)}))}dispose(){this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this._viewZone&&this.editor.changeViewZones(e=>{this._viewZone&&e.removeZone(this._viewZone.id),this._viewZone=null}),this._positionMarkerId.clear(),this._disposables.dispose()}create(){this.domNode.classList.add("zone-widget"),this.options.className&&this.domNode.classList.add(this.options.className),this.container=document.createElement("div"),this.container.classList.add("zone-widget-container"),this.domNode.appendChild(this.container),this.options.showArrow&&(this._arrow=new VP(this.editor),this._disposables.add(this._arrow)),this._fillContainer(this.container),this._initSash(),this._applyStyles()}style(e){e.frameColor&&(this.options.frameColor=e.frameColor),e.arrowColor&&(this.options.arrowColor=e.arrowColor),this._applyStyles()}_applyStyles(){if(this.container&&this.options.frameColor){const e=this.options.frameColor.toString();this.container.style.borderTopColor=e,this.container.style.borderBottomColor=e}if(this._arrow&&this.options.arrowColor){const e=this.options.arrowColor.toString();this._arrow.color=e}}_getWidth(e){return e.width-e.minimap.minimapWidth-e.verticalScrollbarWidth}_getLeft(e){return e.minimap.minimapWidth>0&&e.minimap.minimapLeft===0?e.minimap.minimapWidth:0}_onViewZoneTop(e){this.domNode.style.top=e+"px"}_onViewZoneHeight(e){var t;if(this.domNode.style.height=`${e}px`,this.container){const i=e-this._decoratingElementsHeight();this.container.style.height=`${i}px`;const n=this.editor.getLayoutInfo();this._doLayout(i,this._getWidth(n))}(t=this._resizeSash)===null||t===void 0||t.layout()}get position(){const e=this._positionMarkerId.getRange(0);if(e)return e.getStartPosition()}show(e,t){const i=A.isIRange(e)?A.lift(e):A.fromPositions(e);this._isShowing=!0,this._showImpl(i,t),this._isShowing=!1,this._positionMarkerId.set([{range:i,options:Rt.EMPTY}])}hide(){var e;this._viewZone&&(this.editor.changeViewZones(t=>{this._viewZone&&t.removeZone(this._viewZone.id)}),this._viewZone=null),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),(e=this._arrow)===null||e===void 0||e.hide(),this._positionMarkerId.clear()}_decoratingElementsHeight(){const e=this.editor.getOption(67);let t=0;if(this.options.showArrow){const i=Math.round(e/3);t+=2*i}if(this.options.showFrame){const i=Math.round(e/9);t+=2*i}return t}_showImpl(e,t){const i=e.getStartPosition(),n=this.editor.getLayoutInfo(),s=this._getWidth(n);this.domNode.style.width=`${s}px`,this.domNode.style.left=this._getLeft(n)+"px";const r=document.createElement("div");r.style.overflow="hidden";const a=this.editor.getOption(67);if(!this.options.allowUnlimitedHeight){const g=Math.max(12,this.editor.getLayoutInfo().height/a*.8);t=Math.min(t,g)}let l=0,c=0;if(this._arrow&&this.options.showArrow&&(l=Math.round(a/3),this._arrow.height=l,this._arrow.show(i)),this.options.showFrame&&(c=Math.round(a/9)),this.editor.changeViewZones(g=>{this._viewZone&&g.removeZone(this._viewZone.id),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this.domNode.style.top="-1000px",this._viewZone=new l7e(r,i.lineNumber,i.column,t,p=>this._onViewZoneTop(p),p=>this._onViewZoneHeight(p),this.options.showInHiddenAreas,this.options.ordinal),this._viewZone.id=g.addZone(this._viewZone),this._overlayWidget=new c7e(a7e+this._viewZone.id,this.domNode),this.editor.addOverlayWidget(this._overlayWidget)}),this.container&&this.options.showFrame){const g=this.options.frameWidth?this.options.frameWidth:c;this.container.style.borderTopWidth=g+"px",this.container.style.borderBottomWidth=g+"px"}const u=t*a-this._decoratingElementsHeight();this.container&&(this.container.style.top=l+"px",this.container.style.height=u+"px",this.container.style.overflow="hidden"),this._doLayout(u,s),this.options.keepEditorSelection||this.editor.setSelection(e);const f=this.editor.getModel();if(f){const g=f.validateRange(new A(e.startLineNumber,1,e.endLineNumber+1,1));this.revealRange(g,g.startLineNumber===f.getLineCount())}}revealRange(e,t){t?this.editor.revealLineNearTop(e.endLineNumber,0):this.editor.revealRange(e,0)}setCssClass(e,t){this.container&&(t&&this.container.classList.remove(t),this.container.classList.add(e))}_onWidth(e){}_doLayout(e,t){}_relayout(e){this._viewZone&&this._viewZone.heightInLines!==e&&this.editor.changeViewZones(t=>{this._viewZone&&(this._viewZone.heightInLines=e,t.layoutZone(this._viewZone.id))})}_initSash(){if(this._resizeSash)return;this._resizeSash=this._disposables.add(new jo(this.domNode,this,{orientation:1})),this.options.isResizeable||(this._resizeSash.state=0);let e;this._disposables.add(this._resizeSash.onDidStart(t=>{this._viewZone&&(e={startY:t.startY,heightInLines:this._viewZone.heightInLines})})),this._disposables.add(this._resizeSash.onDidEnd(()=>{e=void 0})),this._disposables.add(this._resizeSash.onDidChange(t=>{if(e){const i=(t.currentY-e.startY)/this.editor.getOption(67),n=i<0?Math.ceil(i):Math.floor(i),s=e.heightInLines+n;s>5&&s<35&&this._relayout(s)}}))}getHorizontalSashLeft(){return 0}getHorizontalSashTop(){return(this.domNode.style.height===null?0:parseInt(this.domNode.style.height))-this._decoratingElementsHeight()/2}getHorizontalSashWidth(){const e=this.editor.getLayoutInfo();return e.width-e.minimap.minimapWidth}}var Zae=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Qae=function(o,e){return function(t,i){e(t,i,o)}};const Xae=Zt("IPeekViewService");oi(Xae,class{constructor(){this._widgets=new Map}addExclusiveWidget(o,e){const t=this._widgets.get(o);t&&(t.listener.dispose(),t.widget.dispose());const i=()=>{const n=this._widgets.get(o);n&&n.widget===e&&(n.listener.dispose(),this._widgets.delete(o))};this._widgets.set(o,{widget:e,listener:e.onDidClose(i)})}},1);var va;(function(o){o.inPeekEditor=new Be("inReferenceSearchEditor",!0,v("inReferenceSearchEditor","Whether the current code editor is embedded inside peek")),o.notInPeekEditor=o.inPeekEditor.toNegated()})(va||(va={}));let aD=class{constructor(e,t){e instanceof Sm&&va.inPeekEditor.bindTo(t)}dispose(){}};aD.ID="editor.contrib.referenceController";aD=Zae([Qae(1,bt)],aD);pi(aD.ID,aD,0);function u7e(o){const e=o.get(gi).getFocusedCodeEditor();return e instanceof Sm?e.getParentEditor():e}const h7e={headerBackgroundColor:ne.white,primaryHeadingColor:ne.fromHex("#333333"),secondaryHeadingColor:ne.fromHex("#6c6c6cb3")};let HM=class extends d7e{constructor(e,t,i){super(e,t),this.instantiationService=i,this._onDidClose=new Y,this.onDidClose=this._onDidClose.event,cA(this.options,h7e,!1)}dispose(){this.disposed||(this.disposed=!0,super.dispose(),this._onDidClose.fire(this))}style(e){const t=this.options;e.headerBackgroundColor&&(t.headerBackgroundColor=e.headerBackgroundColor),e.primaryHeadingColor&&(t.primaryHeadingColor=e.primaryHeadingColor),e.secondaryHeadingColor&&(t.secondaryHeadingColor=e.secondaryHeadingColor),super.style(e)}_applyStyles(){super._applyStyles();const e=this.options;this._headElement&&e.headerBackgroundColor&&(this._headElement.style.backgroundColor=e.headerBackgroundColor.toString()),this._primaryHeading&&e.primaryHeadingColor&&(this._primaryHeading.style.color=e.primaryHeadingColor.toString()),this._secondaryHeading&&e.secondaryHeadingColor&&(this._secondaryHeading.style.color=e.secondaryHeadingColor.toString()),this._bodyElement&&e.frameColor&&(this._bodyElement.style.borderColor=e.frameColor.toString())}_fillContainer(e){this.setCssClass("peekview-widget"),this._headElement=ye(".head"),this._bodyElement=ye(".body"),this._fillHead(this._headElement),this._fillBody(this._bodyElement),e.appendChild(this._headElement),e.appendChild(this._bodyElement)}_fillHead(e,t){this._titleElement=ye(".peekview-title"),this.options.supportOnTitleClick&&(this._titleElement.classList.add("clickable"),ss(this._titleElement,"click",s=>this._onTitleClick(s))),ge(this._headElement,this._titleElement),this._fillTitleIcon(this._titleElement),this._primaryHeading=ye("span.filename"),this._secondaryHeading=ye("span.dirname"),this._metaHeading=ye("span.meta"),ge(this._titleElement,this._primaryHeading,this._secondaryHeading,this._metaHeading);const i=ye(".peekview-actions");ge(this._headElement,i);const n=this._getActionBarOptions();this._actionbarWidget=new pc(i,n),this._disposables.add(this._actionbarWidget),t||this._actionbarWidget.push(new za("peekview.close",v("label.close","Close"),pt.asClassName(Ee.close),!0,()=>(this.dispose(),Promise.resolve())),{label:!1,icon:!0})}_fillTitleIcon(e){}_getActionBarOptions(){return{actionViewItemProvider:Toe.bind(void 0,this.instantiationService),orientation:0}}_onTitleClick(e){}setTitle(e,t){this._primaryHeading&&this._secondaryHeading&&(this._primaryHeading.innerText=e,this._primaryHeading.setAttribute("title",e),t?this._secondaryHeading.innerText=t:Zo(this._secondaryHeading))}setMetaTitle(e){this._metaHeading&&(e?(this._metaHeading.innerText=e,Ba(this._metaHeading)):Rr(this._metaHeading))}_doLayout(e,t){if(!this._isShowing&&e<0){this.dispose();return}const i=Math.ceil(this.editor.getOption(67)*1.2),n=Math.round(e-(i+2));this._doLayoutHead(i,t),this._doLayoutBody(n,t)}_doLayoutHead(e,t){this._headElement&&(this._headElement.style.height=`${e}px`,this._headElement.style.lineHeight=this._headElement.style.height)}_doLayoutBody(e,t){this._bodyElement&&(this._bodyElement.style.height=`${e}px`)}};HM=Zae([Qae(2,ct)],HM);const f7e=V("peekViewTitle.background",{dark:"#252526",light:"#F3F3F3",hcDark:ne.black,hcLight:ne.white},v("peekViewTitleBackground","Background color of the peek view title area.")),Jae=V("peekViewTitleLabel.foreground",{dark:ne.white,light:ne.black,hcDark:ne.white,hcLight:oc},v("peekViewTitleForeground","Color of the peek view title.")),ele=V("peekViewTitleDescription.foreground",{dark:"#ccccccb3",light:"#616161",hcDark:"#FFFFFF99",hcLight:"#292929"},v("peekViewTitleInfoForeground","Color of the peek view title info.")),g7e=V("peekView.border",{dark:fa,light:fa,hcDark:Jt,hcLight:Jt},v("peekViewBorder","Color of the peek view borders and arrow.")),p7e=V("peekViewResult.background",{dark:"#252526",light:"#F3F3F3",hcDark:ne.black,hcLight:ne.white},v("peekViewResultsBackground","Background color of the peek view result list."));V("peekViewResult.lineForeground",{dark:"#bbbbbb",light:"#646465",hcDark:ne.white,hcLight:oc},v("peekViewResultsMatchForeground","Foreground color for line nodes in the peek view result list."));V("peekViewResult.fileForeground",{dark:ne.white,light:"#1E1E1E",hcDark:ne.white,hcLight:oc},v("peekViewResultsFileForeground","Foreground color for file nodes in the peek view result list."));V("peekViewResult.selectionBackground",{dark:"#3399ff33",light:"#3399ff33",hcDark:null,hcLight:null},v("peekViewResultsSelectionBackground","Background color of the selected entry in the peek view result list."));V("peekViewResult.selectionForeground",{dark:ne.white,light:"#6C6C6C",hcDark:ne.white,hcLight:oc},v("peekViewResultsSelectionForeground","Foreground color of the selected entry in the peek view result list."));const Vp=V("peekViewEditor.background",{dark:"#001F33",light:"#F2F8FC",hcDark:ne.black,hcLight:ne.white},v("peekViewEditorBackground","Background color of the peek view editor."));V("peekViewEditorGutter.background",{dark:Vp,light:Vp,hcDark:Vp,hcLight:Vp},v("peekViewEditorGutterBackground","Background color of the gutter in the peek view editor."));V("peekViewEditorStickyScroll.background",{dark:Vp,light:Vp,hcDark:Vp,hcLight:Vp},v("peekViewEditorStickScrollBackground","Background color of sticky scroll in the peek view editor."));V("peekViewResult.matchHighlightBackground",{dark:"#ea5c004d",light:"#ea5c004d",hcDark:null,hcLight:null},v("peekViewResultsMatchHighlight","Match highlight color in the peek view result list."));V("peekViewEditor.matchHighlightBackground",{dark:"#ff8f0099",light:"#f5d802de",hcDark:null,hcLight:null},v("peekViewEditorMatchHighlight","Match highlight color in the peek view editor."));V("peekViewEditor.matchHighlightBorder",{dark:null,light:null,hcDark:Sn,hcLight:Sn},v("peekViewEditorMatchHighlightBorder","Match highlight border in the peek view editor."));class Lm{constructor(e,t,i,n){this.isProviderFirst=e,this.parent=t,this.link=i,this._rangeCallback=n,this.id=a8.nextId()}get uri(){return this.link.uri}get range(){var e,t;return(t=(e=this._range)!==null&&e!==void 0?e:this.link.targetSelectionRange)!==null&&t!==void 0?t:this.link.range}set range(e){this._range=e,this._rangeCallback(this)}get ariaMessage(){var e;const t=(e=this.parent.getPreview(this))===null||e===void 0?void 0:e.preview(this.range);return t?v({key:"aria.oneReference.preview",comment:["Placeholders are: 0: filename, 1:line number, 2: column number, 3: preview snippet of source code"]},"{0} in {1} on line {2} at column {3}",t.value,fc(this.uri),this.range.startLineNumber,this.range.startColumn):v("aria.oneReference","in {0} on line {1} at column {2}",fc(this.uri),this.range.startLineNumber,this.range.startColumn)}}class m7e{constructor(e){this._modelReference=e}dispose(){this._modelReference.dispose()}preview(e,t=8){const i=this._modelReference.object.textEditorModel;if(!i)return;const{startLineNumber:n,startColumn:s,endLineNumber:r,endColumn:a}=e,l=i.getWordUntilPosition({lineNumber:n,column:s-t}),c=new A(n,l.startColumn,n,s),u=new A(r,a,r,1073741824),f=i.getValueInRange(c).replace(/^\s+/,""),g=i.getValueInRange(e),p=i.getValueInRange(u).replace(/\s+$/,"");return{value:f+g+p,highlight:{start:f.length,end:f.length+g.length}}}}class lD{constructor(e,t){this.parent=e,this.uri=t,this.children=[],this._previews=new ds}dispose(){cn(this._previews.values()),this._previews.clear()}getPreview(e){return this._previews.get(e.uri)}get ariaMessage(){const e=this.children.length;return e===1?v("aria.fileReferences.1","1 symbol in {0}, full path {1}",fc(this.uri),this.uri.fsPath):v("aria.fileReferences.N","{0} symbols in {1}, full path {2}",e,fc(this.uri),this.uri.fsPath)}async resolve(e){if(this._previews.size!==0)return this;for(const t of this.children)if(!this._previews.has(t.uri))try{const i=await e.createModelReference(t.uri);this._previews.set(t.uri,new m7e(i))}catch(i){Nt(i)}return this}}class Ua{constructor(e,t){this.groups=[],this.references=[],this._onDidChangeReferenceRange=new Y,this.onDidChangeReferenceRange=this._onDidChangeReferenceRange.event,this._links=e,this._title=t;const[i]=e;e.sort(Ua._compareReferences);let n;for(const s of e)if((!n||!Ln.isEqual(n.uri,s.uri,!0))&&(n=new lD(this,s.uri),this.groups.push(n)),n.children.length===0||Ua._compareReferences(s,n.children[n.children.length-1])!==0){const r=new Lm(i===s,n,s,a=>this._onDidChangeReferenceRange.fire(a));this.references.push(r),n.children.push(r)}}dispose(){cn(this.groups),this._onDidChangeReferenceRange.dispose(),this.groups.length=0}clone(){return new Ua(this._links,this._title)}get title(){return this._title}get isEmpty(){return this.groups.length===0}get ariaMessage(){return this.isEmpty?v("aria.result.0","No results found"):this.references.length===1?v("aria.result.1","Found 1 symbol in {0}",this.references[0].uri.fsPath):this.groups.length===1?v("aria.result.n1","Found {0} symbols in {1}",this.references.length,this.groups[0].uri.fsPath):v("aria.result.nm","Found {0} symbols in {1} files",this.references.length,this.groups.length)}nextOrPreviousReference(e,t){const{parent:i}=e;let n=i.children.indexOf(e);const s=i.children.length,r=i.parent.groups.length;return r===1||t&&n+1<s||!t&&n>0?(t?n=(n+1)%s:n=(n+s-1)%s,i.children[n]):(n=i.parent.groups.indexOf(i),t?(n=(n+1)%r,i.parent.groups[n].children[0]):(n=(n+r-1)%r,i.parent.groups[n].children[i.parent.groups[n].children.length-1]))}nearestReference(e,t){const i=this.references.map((n,s)=>({idx:s,prefixLen:am(n.uri.toString(),e.toString()),offsetDist:Math.abs(n.range.startLineNumber-t.lineNumber)*100+Math.abs(n.range.startColumn-t.column)})).sort((n,s)=>n.prefixLen>s.prefixLen?-1:n.prefixLen<s.prefixLen?1:n.offsetDist<s.offsetDist?-1:n.offsetDist>s.offsetDist?1:0)[0];if(i)return this.references[i.idx]}referenceAt(e,t){for(const i of this.references)if(i.uri.toString()===e.toString()&&A.containsPosition(i.range,t))return i}firstReference(){for(const e of this.references)if(e.isProviderFirst)return e;return this.references[0]}static _compareReferences(e,t){return Ln.compare(e.uri,t.uri)||A.compareRangesUsingStarts(e.range,t.range)}}var HP=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},zP=function(o,e){return function(t,i){e(t,i,o)}},jW;let KW=class{constructor(e){this._resolverService=e}hasChildren(e){return e instanceof Ua||e instanceof lD}getChildren(e){if(e instanceof Ua)return e.groups;if(e instanceof lD)return e.resolve(this._resolverService).then(t=>t.children);throw new Error("bad tree")}};KW=HP([zP(0,Ca)],KW);class _7e{getHeight(){return 23}getTemplateId(e){return e instanceof lD?cD.id:mk.id}}let qW=class{constructor(e){this._keybindingService=e}getKeyboardNavigationLabel(e){var t;if(e instanceof Lm){const i=(t=e.parent.getPreview(e))===null||t===void 0?void 0:t.preview(e.range);if(i)return i.value}return fc(e.uri)}};qW=HP([zP(0,Bi)],qW);class v7e{getId(e){return e instanceof Lm?e.id:e.uri}}let GW=class extends J{constructor(e,t){super(),this._labelService=t;const i=document.createElement("div");i.classList.add("reference-file"),this.file=this._register(new CM(i,{supportHighlights:!0})),this.badge=new K8(ge(i,ye(".count")),{},Eoe),e.appendChild(i)}set(e,t){const i=GA(e.uri);this.file.setLabel(this._labelService.getUriBasenameLabel(e.uri),this._labelService.getUriLabel(i,{relative:!0}),{title:this._labelService.getUriLabel(e.uri),matches:t});const n=e.children.length;this.badge.setCount(n),n>1?this.badge.setTitleFormat(v("referencesCount","{0} references",n)):this.badge.setTitleFormat(v("referenceCount","{0} reference",n))}};GW=HP([zP(1,C1)],GW);let cD=jW=class{constructor(e){this._instantiationService=e,this.templateId=jW.id}renderTemplate(e){return this._instantiationService.createInstance(GW,e)}renderElement(e,t,i){i.set(e.element,JD(e.filterData))}disposeTemplate(e){e.dispose()}};cD.id="FileReferencesRenderer";cD=jW=HP([zP(0,ct)],cD);class b7e extends J{constructor(e){super(),this.label=this._register(new Xp(e))}set(e,t){var i;const n=(i=e.parent.getPreview(e))===null||i===void 0?void 0:i.preview(e.range);if(!n||!n.value)this.label.set(`${fc(e.uri)}:${e.range.startLineNumber+1}:${e.range.startColumn+1}`);else{const{value:s,highlight:r}=n;t&&!Hd.isDefault(t)?(this.label.element.classList.toggle("referenceMatch",!1),this.label.set(s,JD(t))):(this.label.element.classList.toggle("referenceMatch",!0),this.label.set(s,[r]))}}}class mk{constructor(){this.templateId=mk.id}renderTemplate(e){return new b7e(e)}renderElement(e,t,i){i.set(e.element,e.filterData)}disposeTemplate(e){e.dispose()}}mk.id="OneReferenceRenderer";class C7e{getWidgetAriaLabel(){return v("treeAriaLabel","References")}getAriaLabel(e){return e.ariaMessage}}var w7e=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},of=function(o,e){return function(t,i){e(t,i,o)}};class UP{constructor(e,t){this._editor=e,this._model=t,this._decorations=new Map,this._decorationIgnoreSet=new Set,this._callOnDispose=new he,this._callOnModelChange=new he,this._callOnDispose.add(this._editor.onDidChangeModel(()=>this._onModelChanged())),this._onModelChanged()}dispose(){this._callOnModelChange.dispose(),this._callOnDispose.dispose(),this.removeDecorations()}_onModelChanged(){this._callOnModelChange.clear();const e=this._editor.getModel();if(e){for(const t of this._model.references)if(t.uri.toString()===e.uri.toString()){this._addDecorations(t.parent);return}}}_addDecorations(e){if(!this._editor.hasModel())return;this._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations(()=>this._onDecorationChanged()));const t=[],i=[];for(let n=0,s=e.children.length;n<s;n++){const r=e.children[n];this._decorationIgnoreSet.has(r.id)||r.uri.toString()===this._editor.getModel().uri.toString()&&(t.push({range:r.range,options:UP.DecorationOptions}),i.push(n))}this._editor.changeDecorations(n=>{const s=n.deltaDecorations([],t);for(let r=0;r<s.length;r++)this._decorations.set(s[r],e.children[i[r]])})}_onDecorationChanged(){const e=[],t=this._editor.getModel();if(t){for(const[i,n]of this._decorations){const s=t.getDecorationRange(i);if(!s)continue;let r=!1;if(!A.equalsRange(s,n.range)){if(A.spansMultipleLines(s))r=!0;else{const a=n.range.endColumn-n.range.startColumn,l=s.endColumn-s.startColumn;a!==l&&(r=!0)}r?(this._decorationIgnoreSet.add(n.id),e.push(i)):n.range=s}}for(let i=0,n=e.length;i<n;i++)this._decorations.delete(e[i]);this._editor.removeDecorations(e)}}removeDecorations(){this._editor.removeDecorations([...this._decorations.keys()]),this._decorations.clear()}}UP.DecorationOptions=Rt.register({description:"reference-decoration",stickiness:1,className:"reference-decoration"});class y7e{constructor(){this.ratio=.7,this.heightInLines=18}static fromJSON(e){let t,i;try{const n=JSON.parse(e);t=n.ratio,i=n.heightInLines}catch{}return{ratio:t||.7,heightInLines:i||18}}}class S7e extends z8{}let YW=class extends HM{constructor(e,t,i,n,s,r,a,l,c,u,f,g){super(e,{showFrame:!1,showArrow:!0,isResizeable:!0,isAccessible:!0,supportOnTitleClick:!0},r),this._defaultTreeKeyboardSupport=t,this.layoutData=i,this._textModelResolverService=s,this._instantiationService=r,this._peekViewService=a,this._uriLabel=l,this._undoRedoService=c,this._keybindingService=u,this._languageService=f,this._languageConfigurationService=g,this._disposeOnNewModel=new he,this._callOnDispose=new he,this._onDidSelectReference=new Y,this.onDidSelectReference=this._onDidSelectReference.event,this._dim=new yi(0,0),this._applyTheme(n.getColorTheme()),this._callOnDispose.add(n.onDidColorThemeChange(this._applyTheme.bind(this))),this._peekViewService.addExclusiveWidget(e,this),this.create()}dispose(){this.setModel(void 0),this._callOnDispose.dispose(),this._disposeOnNewModel.dispose(),cn(this._preview),cn(this._previewNotAvailableMessage),cn(this._tree),cn(this._previewModelReference),this._splitView.dispose(),super.dispose()}_applyTheme(e){const t=e.getColor(g7e)||ne.transparent;this.style({arrowColor:t,frameColor:t,headerBackgroundColor:e.getColor(f7e)||ne.transparent,primaryHeadingColor:e.getColor(Jae),secondaryHeadingColor:e.getColor(ele)})}show(e){super.show(e,this.layoutData.heightInLines||18)}focusOnReferenceTree(){this._tree.domFocus()}focusOnPreviewEditor(){this._preview.focus()}isPreviewEditorFocused(){return this._preview.hasTextFocus()}_onTitleClick(e){this._preview&&this._preview.getModel()&&this._onDidSelectReference.fire({element:this._getFocusedReference(),kind:e.ctrlKey||e.metaKey||e.altKey?"side":"open",source:"title"})}_fillBody(e){this.setCssClass("reference-zone-widget"),this._messageContainer=ge(e,ye("div.messages")),Rr(this._messageContainer),this._splitView=new Aoe(e,{orientation:1}),this._previewContainer=ge(e,ye("div.preview.inline"));const t={scrollBeyondLastLine:!1,scrollbar:{verticalScrollbarSize:14,horizontal:"auto",useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,alwaysConsumeMouseWheel:!0},overviewRulerLanes:2,fixedOverflowWidgets:!0,minimap:{enabled:!1}};this._preview=this._instantiationService.createInstance(Sm,this._previewContainer,t,{},this.editor),Rr(this._previewContainer),this._previewNotAvailableMessage=new ph(v("missingPreviewMessage","no preview available"),yl,ph.DEFAULT_CREATION_OPTIONS,null,this._undoRedoService,this._languageService,this._languageConfigurationService),this._treeContainer=ge(e,ye("div.ref-tree.inline"));const i={keyboardSupport:this._defaultTreeKeyboardSupport,accessibilityProvider:new C7e,keyboardNavigationLabelProvider:this._instantiationService.createInstance(qW),identityProvider:new v7e,openOnSingleClick:!0,selectionNavigation:!0,overrideStyles:{listBackground:p7e}};this._defaultTreeKeyboardSupport&&this._callOnDispose.add(ss(this._treeContainer,"keydown",s=>{s.equals(9)&&(this._keybindingService.dispatchEvent(s,s.target),s.stopPropagation())},!0)),this._tree=this._instantiationService.createInstance(S7e,"ReferencesWidget",this._treeContainer,new _7e,[this._instantiationService.createInstance(cD),this._instantiationService.createInstance(mk)],this._instantiationService.createInstance(KW),i),this._splitView.addView({onDidChange:Ie.None,element:this._previewContainer,minimumSize:200,maximumSize:Number.MAX_VALUE,layout:s=>{this._preview.layout({height:this._dim.height,width:s})}},gM.Distribute),this._splitView.addView({onDidChange:Ie.None,element:this._treeContainer,minimumSize:100,maximumSize:Number.MAX_VALUE,layout:s=>{this._treeContainer.style.height=`${this._dim.height}px`,this._treeContainer.style.width=`${s}px`,this._tree.layout(this._dim.height,s)}},gM.Distribute),this._disposables.add(this._splitView.onDidSashChange(()=>{this._dim.width&&(this.layoutData.ratio=this._splitView.getViewSize(0)/this._dim.width)},void 0));const n=(s,r)=>{s instanceof Lm&&(r==="show"&&this._revealReference(s,!1),this._onDidSelectReference.fire({element:s,kind:r,source:"tree"}))};this._tree.onDidOpen(s=>{s.sideBySide?n(s.element,"side"):s.editorOptions.pinned?n(s.element,"goto"):n(s.element,"show")}),Rr(this._treeContainer)}_onWidth(e){this._dim&&this._doLayoutBody(this._dim.height,e)}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._dim=new yi(t,e),this.layoutData.heightInLines=this._viewZone?this._viewZone.heightInLines:this.layoutData.heightInLines,this._splitView.layout(t),this._splitView.resizeView(0,t*this.layoutData.ratio)}setSelection(e){return this._revealReference(e,!0).then(()=>{this._model&&(this._tree.setSelection([e]),this._tree.setFocus([e]))})}setModel(e){return this._disposeOnNewModel.clear(),this._model=e,this._model?this._onNewModel():Promise.resolve()}_onNewModel(){return this._model?this._model.isEmpty?(this.setTitle(""),this._messageContainer.innerText=v("noResults","No results"),Ba(this._messageContainer),Promise.resolve(void 0)):(Rr(this._messageContainer),this._decorationsManager=new UP(this._preview,this._model),this._disposeOnNewModel.add(this._decorationsManager),this._disposeOnNewModel.add(this._model.onDidChangeReferenceRange(e=>this._tree.rerender(e))),this._disposeOnNewModel.add(this._preview.onMouseDown(e=>{const{event:t,target:i}=e;if(t.detail!==2)return;const n=this._getFocusedReference();n&&this._onDidSelectReference.fire({element:{uri:n.uri,range:i.range},kind:t.ctrlKey||t.metaKey||t.altKey?"side":"open",source:"editor"})})),this.container.classList.add("results-loaded"),Ba(this._treeContainer),Ba(this._previewContainer),this._splitView.layout(this._dim.width),this.focusOnReferenceTree(),this._tree.setInput(this._model.groups.length===1?this._model.groups[0]:this._model)):Promise.resolve(void 0)}_getFocusedReference(){const[e]=this._tree.getFocus();if(e instanceof Lm)return e;if(e instanceof lD&&e.children.length>0)return e.children[0]}async revealReference(e){await this._revealReference(e,!1),this._onDidSelectReference.fire({element:e,kind:"goto",source:"tree"})}async _revealReference(e,t){if(this._revealedReference===e)return;this._revealedReference=e,e.uri.scheme!==Pt.inMemory?this.setTitle(_Ie(e.uri),this._uriLabel.getUriLabel(GA(e.uri))):this.setTitle(v("peekView.alternateTitle","References"));const i=this._textModelResolverService.createModelReference(e.uri);this._tree.getInput()===e.parent?this._tree.reveal(e):(t&&this._tree.reveal(e.parent),await this._tree.expand(e.parent),this._tree.reveal(e));const n=await i;if(!this._model){n.dispose();return}cn(this._previewModelReference);const s=n.object;if(s){const r=this._preview.getModel()===s.textEditorModel?0:1,a=A.lift(e.range).collapseToStart();this._previewModelReference=n,this._preview.setModel(s.textEditorModel),this._preview.setSelection(a),this._preview.revealRangeInCenter(a,r)}else this._preview.setModel(this._previewNotAvailableMessage),n.dispose()}};YW=w7e([of(3,Us),of(4,Ca),of(5,ct),of(6,Xae),of(7,C1),of(8,YA),of(9,Bi),of(10,xn),of(11,dn)],YW);var L7e=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},R0=function(o,e){return function(t,i){e(t,i,o)}},UN;const vb=new Be("referenceSearchVisible",!1,v("referenceSearchVisible","Whether reference peek is visible, like 'Peek References' or 'Peek Definition'"));let xm=UN=class{static get(e){return e.getContribution(UN.ID)}constructor(e,t,i,n,s,r,a,l){this._defaultTreeKeyboardSupport=e,this._editor=t,this._editorService=n,this._notificationService=s,this._instantiationService=r,this._storageService=a,this._configurationService=l,this._disposables=new he,this._requestIdPool=0,this._ignoreModelChangeEvent=!1,this._referenceSearchVisible=vb.bindTo(i)}dispose(){var e,t;this._referenceSearchVisible.reset(),this._disposables.dispose(),(e=this._widget)===null||e===void 0||e.dispose(),(t=this._model)===null||t===void 0||t.dispose(),this._widget=void 0,this._model=void 0}toggleWidget(e,t,i){let n;if(this._widget&&(n=this._widget.position),this.closeWidget(),n&&e.containsPosition(n))return;this._peekMode=i,this._referenceSearchVisible.set(!0),this._disposables.add(this._editor.onDidChangeModelLanguage(()=>{this.closeWidget()})),this._disposables.add(this._editor.onDidChangeModel(()=>{this._ignoreModelChangeEvent||this.closeWidget()}));const s="peekViewLayout",r=y7e.fromJSON(this._storageService.get(s,0,"{}"));this._widget=this._instantiationService.createInstance(YW,this._editor,this._defaultTreeKeyboardSupport,r),this._widget.setTitle(v("labelLoading","Loading...")),this._widget.show(e),this._disposables.add(this._widget.onDidClose(()=>{t.cancel(),this._widget&&(this._storageService.store(s,JSON.stringify(this._widget.layoutData),0,1),this._widget=void 0),this.closeWidget()})),this._disposables.add(this._widget.onDidSelectReference(l=>{const{element:c,kind:u}=l;if(c)switch(u){case"open":(l.source!=="editor"||!this._configurationService.getValue("editor.stablePeek"))&&this.openReference(c,!1,!1);break;case"side":this.openReference(c,!0,!1);break;case"goto":i?this._gotoReference(c,!0):this.openReference(c,!1,!0);break}}));const a=++this._requestIdPool;t.then(l=>{var c;if(a!==this._requestIdPool||!this._widget){l.dispose();return}return(c=this._model)===null||c===void 0||c.dispose(),this._model=l,this._widget.setModel(this._model).then(()=>{if(this._widget&&this._model&&this._editor.hasModel()){this._model.isEmpty?this._widget.setMetaTitle(""):this._widget.setMetaTitle(v("metaTitle.N","{0} ({1})",this._model.title,this._model.references.length));const u=this._editor.getModel().uri,f=new Z(e.startLineNumber,e.startColumn),g=this._model.nearestReference(u,f);if(g)return this._widget.setSelection(g).then(()=>{this._widget&&this._editor.getOption(87)==="editor"&&this._widget.focusOnPreviewEditor()})}})},l=>{this._notificationService.error(l)})}changeFocusBetweenPreviewAndReferences(){this._widget&&(this._widget.isPreviewEditorFocused()?this._widget.focusOnReferenceTree():this._widget.focusOnPreviewEditor())}async goToNextOrPreviousReference(e){if(!this._editor.hasModel()||!this._model||!this._widget)return;const t=this._widget.position;if(!t)return;const i=this._model.nearestReference(this._editor.getModel().uri,t);if(!i)return;const n=this._model.nextOrPreviousReference(i,e),s=this._editor.hasTextFocus(),r=this._widget.isPreviewEditorFocused();await this._widget.setSelection(n),await this._gotoReference(n,!1),s?this._editor.focus():this._widget&&r&&this._widget.focusOnPreviewEditor()}async revealReference(e){!this._editor.hasModel()||!this._model||!this._widget||await this._widget.revealReference(e)}closeWidget(e=!0){var t,i;(t=this._widget)===null||t===void 0||t.dispose(),(i=this._model)===null||i===void 0||i.dispose(),this._referenceSearchVisible.reset(),this._disposables.clear(),this._widget=void 0,this._model=void 0,e&&this._editor.focus(),this._requestIdPool+=1}_gotoReference(e,t){var i;(i=this._widget)===null||i===void 0||i.hide(),this._ignoreModelChangeEvent=!0;const n=A.lift(e.range).collapseToStart();return this._editorService.openCodeEditor({resource:e.uri,options:{selection:n,selectionSource:"code.jump",pinned:t}},this._editor).then(s=>{var r;if(this._ignoreModelChangeEvent=!1,!s||!this._widget){this.closeWidget();return}if(this._editor===s)this._widget.show(n),this._widget.focusOnReferenceTree();else{const a=UN.get(s),l=this._model.clone();this.closeWidget(),s.focus(),a==null||a.toggleWidget(n,Qs(c=>Promise.resolve(l)),(r=this._peekMode)!==null&&r!==void 0?r:!1)}},s=>{this._ignoreModelChangeEvent=!1,Nt(s)})}openReference(e,t,i){t||this.closeWidget();const{uri:n,range:s}=e;this._editorService.openCodeEditor({resource:n,options:{selection:s,selectionSource:"code.jump",pinned:i}},this._editor,t)}};xm.ID="editor.contrib.referencesController";xm=UN=L7e([R0(2,bt),R0(3,gi),R0(4,ys),R0(5,ct),R0(6,Qc),R0(7,$t)],xm);function bb(o,e){const t=u7e(o);if(!t)return;const i=xm.get(t);i&&e(i)}ma.registerCommandAndKeybindingRule({id:"togglePeekWidgetFocus",weight:100,primary:Fs(2089,60),when:ue.or(vb,va.inPeekEditor),handler(o){bb(o,e=>{e.changeFocusBetweenPreviewAndReferences()})}});ma.registerCommandAndKeybindingRule({id:"goToNextReference",weight:90,primary:62,secondary:[70],when:ue.or(vb,va.inPeekEditor),handler(o){bb(o,e=>{e.goToNextOrPreviousReference(!0)})}});ma.registerCommandAndKeybindingRule({id:"goToPreviousReference",weight:90,primary:1086,secondary:[1094],when:ue.or(vb,va.inPeekEditor),handler(o){bb(o,e=>{e.goToNextOrPreviousReference(!1)})}});si.registerCommandAlias("goToNextReferenceFromEmbeddedEditor","goToNextReference");si.registerCommandAlias("goToPreviousReferenceFromEmbeddedEditor","goToPreviousReference");si.registerCommandAlias("closeReferenceSearchEditor","closeReferenceSearch");si.registerCommand("closeReferenceSearch",o=>bb(o,e=>e.closeWidget()));ma.registerKeybindingRule({id:"closeReferenceSearch",weight:-1,primary:9,secondary:[1033],when:ue.and(va.inPeekEditor,ue.not("config.editor.stablePeek"))});ma.registerKeybindingRule({id:"closeReferenceSearch",weight:250,primary:9,secondary:[1033],when:ue.and(vb,ue.not("config.editor.stablePeek"),ue.or(W.editorTextFocus,bOe.negate()))});ma.registerCommandAndKeybindingRule({id:"revealReference",weight:200,primary:3,mac:{primary:3,secondary:[2066]},when:ue.and(vb,Qoe,kz.negate(),Ez.negate()),handler(o){var e;const i=(e=o.get(wc).lastFocusedList)===null||e===void 0?void 0:e.getFocus();Array.isArray(i)&&i[0]instanceof Lm&&bb(o,n=>n.revealReference(i[0]))}});ma.registerCommandAndKeybindingRule({id:"openReferenceToSide",weight:100,primary:2051,mac:{primary:259},when:ue.and(vb,Qoe,kz.negate(),Ez.negate()),handler(o){var e;const i=(e=o.get(wc).lastFocusedList)===null||e===void 0?void 0:e.getFocus();Array.isArray(i)&&i[0]instanceof Lm&&bb(o,n=>n.openReference(i[0],!0,!0))}});si.registerCommand("openReference",o=>{var e;const i=(e=o.get(wc).lastFocusedList)===null||e===void 0?void 0:e.getFocus();Array.isArray(i)&&i[0]instanceof Lm&&bb(o,n=>n.openReference(i[0],!1,!0))});var tle=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},sL=function(o,e){return function(t,i){e(t,i,o)}};const dU=new Be("hasSymbols",!1,v("hasSymbols","Whether there are symbol locations that can be navigated via keyboard-only.")),$P=Zt("ISymbolNavigationService");let ZW=class{constructor(e,t,i,n){this._editorService=t,this._notificationService=i,this._keybindingService=n,this._currentModel=void 0,this._currentIdx=-1,this._ignoreEditorChange=!1,this._ctxHasSymbols=dU.bindTo(e)}reset(){var e,t;this._ctxHasSymbols.reset(),(e=this._currentState)===null||e===void 0||e.dispose(),(t=this._currentMessage)===null||t===void 0||t.dispose(),this._currentModel=void 0,this._currentIdx=-1}put(e){const t=e.parent.parent;if(t.references.length<=1){this.reset();return}this._currentModel=t,this._currentIdx=t.references.indexOf(e),this._ctxHasSymbols.set(!0),this._showMessage();const i=new QW(this._editorService),n=i.onDidChange(s=>{if(this._ignoreEditorChange)return;const r=this._editorService.getActiveCodeEditor();if(!r)return;const a=r.getModel(),l=r.getPosition();if(!a||!l)return;let c=!1,u=!1;for(const f of t.references)if(AH(f.uri,a.uri))c=!0,u=u||A.containsPosition(f.range,l);else if(c)break;(!c||!u)&&this.reset()});this._currentState=$c(i,n)}revealNext(e){if(!this._currentModel)return Promise.resolve();this._currentIdx+=1,this._currentIdx%=this._currentModel.references.length;const t=this._currentModel.references[this._currentIdx];return this._showMessage(),this._ignoreEditorChange=!0,this._editorService.openCodeEditor({resource:t.uri,options:{selection:A.collapseToStart(t.range),selectionRevealType:3}},e).finally(()=>{this._ignoreEditorChange=!1})}_showMessage(){var e;(e=this._currentMessage)===null||e===void 0||e.dispose();const t=this._keybindingService.lookupKeybinding("editor.gotoNextSymbolFromResult"),i=t?v("location.kb","Symbol {0} of {1}, {2} for next",this._currentIdx+1,this._currentModel.references.length,t.getLabel()):v("location","Symbol {0} of {1}",this._currentIdx+1,this._currentModel.references.length);this._currentMessage=this._notificationService.status(i)}};ZW=tle([sL(0,bt),sL(1,gi),sL(2,ys),sL(3,Bi)],ZW);oi($P,ZW,1);Me(new class extends zs{constructor(){super({id:"editor.gotoNextSymbolFromResult",precondition:dU,kbOpts:{weight:100,primary:70}})}runEditorCommand(o,e){return o.get($P).revealNext(e)}});ma.registerCommandAndKeybindingRule({id:"editor.gotoNextSymbolFromResult.cancel",weight:100,when:dU,primary:9,handler(o){o.get($P).reset()}});let QW=class{constructor(e){this._listener=new Map,this._disposables=new he,this._onDidChange=new Y,this.onDidChange=this._onDidChange.event,this._disposables.add(e.onCodeEditorRemove(this._onDidRemoveEditor,this)),this._disposables.add(e.onCodeEditorAdd(this._onDidAddEditor,this)),e.listCodeEditors().forEach(this._onDidAddEditor,this)}dispose(){this._disposables.dispose(),this._onDidChange.dispose(),cn(this._listener.values())}_onDidAddEditor(e){this._listener.set(e,$c(e.onDidChangeCursorPosition(t=>this._onDidChange.fire({editor:e})),e.onDidChangeModelContent(t=>this._onDidChange.fire({editor:e}))))}_onDidRemoveEditor(e){var t;(t=this._listener.get(e))===null||t===void 0||t.dispose(),this._listener.delete(e)}};QW=tle([sL(0,gi)],QW);async function _k(o,e,t,i){const s=t.ordered(o).map(a=>Promise.resolve(i(a,o,e)).then(void 0,l=>{hs(l)})),r=await Promise.all(s);return Ud(r.flat())}function jP(o,e,t,i){return _k(e,t,o,(n,s,r)=>n.provideDefinition(s,r,i))}function ile(o,e,t,i){return _k(e,t,o,(n,s,r)=>n.provideDeclaration(s,r,i))}function nle(o,e,t,i){return _k(e,t,o,(n,s,r)=>n.provideImplementation(s,r,i))}function sle(o,e,t,i){return _k(e,t,o,(n,s,r)=>n.provideTypeDefinition(s,r,i))}function KP(o,e,t,i,n){return _k(e,t,o,async(s,r,a)=>{const l=await s.provideReferences(r,a,{includeDeclaration:!0},n);if(!i||!l||l.length!==2)return l;const c=await s.provideReferences(r,a,{includeDeclaration:!1},n);return c&&c.length===1?c:l})}async function vk(o){const e=await o(),t=new Ua(e,""),i=t.references.map(n=>n.link);return t.dispose(),i}xh("_executeDefinitionProvider",(o,e,t)=>{const i=o.get(Ze),n=jP(i.definitionProvider,e,t,Yt.None);return vk(()=>n)});xh("_executeTypeDefinitionProvider",(o,e,t)=>{const i=o.get(Ze),n=sle(i.typeDefinitionProvider,e,t,Yt.None);return vk(()=>n)});xh("_executeDeclarationProvider",(o,e,t)=>{const i=o.get(Ze),n=ile(i.declarationProvider,e,t,Yt.None);return vk(()=>n)});xh("_executeReferenceProvider",(o,e,t)=>{const i=o.get(Ze),n=KP(i.referenceProvider,e,t,!1,Yt.None);return vk(()=>n)});xh("_executeImplementationProvider",(o,e,t)=>{const i=o.get(Ze),n=nle(i.implementationProvider,e,t,Yt.None);return vk(()=>n)});var TS,NS,RS,FT,BT,WT,VT,HT;Ys.appendMenuItem(P.EditorContext,{submenu:P.EditorContextPeek,title:v("peek.submenu","Peek"),group:"navigation",order:100});class A1{static is(e){return!e||typeof e!="object"?!1:!!(e instanceof A1||Z.isIPosition(e.position)&&e.model)}constructor(e,t){this.model=e,this.position=t}}class hr extends iu{static all(){return hr._allSymbolNavigationCommands.values()}static _patchConfig(e){const t={...e,f1:!0};if(t.menu)for(const i of ii.wrap(t.menu))(i.id===P.EditorContext||i.id===P.EditorContextPeek)&&(i.when=ue.and(e.precondition,i.when));return t}constructor(e,t){super(hr._patchConfig(t)),this.configuration=e,hr._allSymbolNavigationCommands.set(t.id,this)}runEditorCommand(e,t,i,n){if(!t.hasModel())return Promise.resolve(void 0);const s=e.get(ys),r=e.get(gi),a=e.get(Bm),l=e.get($P),c=e.get(Ze),u=e.get(ct),f=t.getModel(),g=t.getPosition(),p=A1.is(i)?i:new A1(f,g),_=new Cm(t,5),b=FD(this._getLocationModel(c,p.model,p.position,_.token),_.token).then(async y=>{var S;if(!y||_.token.isCancellationRequested)return;_a(y.ariaMessage);let L;if(y.referenceAt(f.uri,g)){const D=this._getAlternativeCommand(t);!hr._activeAlternativeCommands.has(D)&&hr._allSymbolNavigationCommands.has(D)&&(L=hr._allSymbolNavigationCommands.get(D))}const x=y.references.length;if(x===0){if(!this.configuration.muteMessage){const D=f.getWordAtPosition(g);(S=$r.get(t))===null||S===void 0||S.showMessage(this._getNoResultFoundMessage(D),g)}}else if(x===1&&L)hr._activeAlternativeCommands.add(this.desc.id),u.invokeFunction(D=>L.runEditorCommand(D,t,i,n).finally(()=>{hr._activeAlternativeCommands.delete(this.desc.id)}));else return this._onResult(r,l,t,y,n)},y=>{s.error(y)}).finally(()=>{_.dispose()});return a.showWhile(b,250),b}async _onResult(e,t,i,n,s){const r=this._getGoToPreference(i);if(!(i instanceof Sm)&&(this.configuration.openInPeek||r==="peek"&&n.references.length>1))this._openInPeek(i,n,s);else{const a=n.firstReference(),l=n.references.length>1&&r==="gotoAndPeek",c=await this._openReference(i,e,a,this.configuration.openToSide,!l);l&&c?this._openInPeek(c,n,s):n.dispose(),r==="goto"&&t.put(a)}}async _openReference(e,t,i,n,s){let r;if(bCe(i)&&(r=i.targetSelectionRange),r||(r=i.range),!r)return;const a=await t.openCodeEditor({resource:i.uri,options:{selection:A.collapseToStart(r),selectionRevealType:3,selectionSource:"code.jump"}},e,n);if(a){if(s){const l=a.getModel(),c=a.createDecorationsCollection([{range:r,options:{description:"symbol-navigate-action-highlight",className:"symbolHighlight"}}]);setTimeout(()=>{a.getModel()===l&&c.clear()},350)}return a}}_openInPeek(e,t,i){const n=xm.get(e);n&&e.hasModel()?n.toggleWidget(i??e.getSelection(),Qs(s=>Promise.resolve(t)),this.configuration.openInPeek):t.dispose()}}hr._allSymbolNavigationCommands=new Map;hr._activeAlternativeCommands=new Set;class bk extends hr{async _getLocationModel(e,t,i,n){return new Ua(await jP(e.definitionProvider,t,i,n),v("def.title","Definitions"))}_getNoResultFoundMessage(e){return e&&e.word?v("noResultWord","No definition found for '{0}'",e.word):v("generic.noResults","No definition found")}_getAlternativeCommand(e){return e.getOption(58).alternativeDefinitionCommand}_getGoToPreference(e){return e.getOption(58).multipleDefinitions}}en((TS=class extends bk{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:TS.id,title:{...di("actions.goToDecl.label","Go to Definition"),mnemonicTitle:v({key:"miGotoDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Definition")},precondition:W.hasDefinitionProvider,keybinding:[{when:W.editorTextFocus,primary:70,weight:100},{when:ue.and(W.editorTextFocus,qoe),primary:2118,weight:100}],menu:[{id:P.EditorContext,group:"navigation",order:1.1},{id:P.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:2}]}),si.registerCommandAlias("editor.action.goToDeclaration",TS.id)}},TS.id="editor.action.revealDefinition",TS));en((NS=class extends bk{constructor(){super({openToSide:!0,openInPeek:!1,muteMessage:!1},{id:NS.id,title:di("actions.goToDeclToSide.label","Open Definition to the Side"),precondition:ue.and(W.hasDefinitionProvider,W.isInEmbeddedEditor.toNegated()),keybinding:[{when:W.editorTextFocus,primary:Fs(2089,70),weight:100},{when:ue.and(W.editorTextFocus,qoe),primary:Fs(2089,2118),weight:100}]}),si.registerCommandAlias("editor.action.openDeclarationToTheSide",NS.id)}},NS.id="editor.action.revealDefinitionAside",NS));en((RS=class extends bk{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:RS.id,title:di("actions.previewDecl.label","Peek Definition"),precondition:ue.and(W.hasDefinitionProvider,va.notInPeekEditor,W.isInEmbeddedEditor.toNegated()),keybinding:{when:W.editorTextFocus,primary:582,linux:{primary:3140},weight:100},menu:{id:P.EditorContextPeek,group:"peek",order:2}}),si.registerCommandAlias("editor.action.previewDeclaration",RS.id)}},RS.id="editor.action.peekDefinition",RS));class ole extends hr{async _getLocationModel(e,t,i,n){return new Ua(await ile(e.declarationProvider,t,i,n),v("decl.title","Declarations"))}_getNoResultFoundMessage(e){return e&&e.word?v("decl.noResultWord","No declaration found for '{0}'",e.word):v("decl.generic.noResults","No declaration found")}_getAlternativeCommand(e){return e.getOption(58).alternativeDeclarationCommand}_getGoToPreference(e){return e.getOption(58).multipleDeclarations}}en((FT=class extends ole{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:FT.id,title:{...di("actions.goToDeclaration.label","Go to Declaration"),mnemonicTitle:v({key:"miGotoDeclaration",comment:["&& denotes a mnemonic"]},"Go to &&Declaration")},precondition:ue.and(W.hasDeclarationProvider,W.isInEmbeddedEditor.toNegated()),menu:[{id:P.EditorContext,group:"navigation",order:1.3},{id:P.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:3}]})}_getNoResultFoundMessage(e){return e&&e.word?v("decl.noResultWord","No declaration found for '{0}'",e.word):v("decl.generic.noResults","No declaration found")}},FT.id="editor.action.revealDeclaration",FT));en(class extends ole{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.peekDeclaration",title:di("actions.peekDecl.label","Peek Declaration"),precondition:ue.and(W.hasDeclarationProvider,va.notInPeekEditor,W.isInEmbeddedEditor.toNegated()),menu:{id:P.EditorContextPeek,group:"peek",order:3}})}});class rle extends hr{async _getLocationModel(e,t,i,n){return new Ua(await sle(e.typeDefinitionProvider,t,i,n),v("typedef.title","Type Definitions"))}_getNoResultFoundMessage(e){return e&&e.word?v("goToTypeDefinition.noResultWord","No type definition found for '{0}'",e.word):v("goToTypeDefinition.generic.noResults","No type definition found")}_getAlternativeCommand(e){return e.getOption(58).alternativeTypeDefinitionCommand}_getGoToPreference(e){return e.getOption(58).multipleTypeDefinitions}}en((BT=class extends rle{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:BT.ID,title:{...di("actions.goToTypeDefinition.label","Go to Type Definition"),mnemonicTitle:v({key:"miGotoTypeDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Type Definition")},precondition:W.hasTypeDefinitionProvider,keybinding:{when:W.editorTextFocus,primary:0,weight:100},menu:[{id:P.EditorContext,group:"navigation",order:1.4},{id:P.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:3}]})}},BT.ID="editor.action.goToTypeDefinition",BT));en((WT=class extends rle{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:WT.ID,title:di("actions.peekTypeDefinition.label","Peek Type Definition"),precondition:ue.and(W.hasTypeDefinitionProvider,va.notInPeekEditor,W.isInEmbeddedEditor.toNegated()),menu:{id:P.EditorContextPeek,group:"peek",order:4}})}},WT.ID="editor.action.peekTypeDefinition",WT));class ale extends hr{async _getLocationModel(e,t,i,n){return new Ua(await nle(e.implementationProvider,t,i,n),v("impl.title","Implementations"))}_getNoResultFoundMessage(e){return e&&e.word?v("goToImplementation.noResultWord","No implementation found for '{0}'",e.word):v("goToImplementation.generic.noResults","No implementation found")}_getAlternativeCommand(e){return e.getOption(58).alternativeImplementationCommand}_getGoToPreference(e){return e.getOption(58).multipleImplementations}}en((VT=class extends ale{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:VT.ID,title:{...di("actions.goToImplementation.label","Go to Implementations"),mnemonicTitle:v({key:"miGotoImplementation",comment:["&& denotes a mnemonic"]},"Go to &&Implementations")},precondition:W.hasImplementationProvider,keybinding:{when:W.editorTextFocus,primary:2118,weight:100},menu:[{id:P.EditorContext,group:"navigation",order:1.45},{id:P.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:4}]})}},VT.ID="editor.action.goToImplementation",VT));en((HT=class extends ale{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:HT.ID,title:di("actions.peekImplementation.label","Peek Implementations"),precondition:ue.and(W.hasImplementationProvider,va.notInPeekEditor,W.isInEmbeddedEditor.toNegated()),keybinding:{when:W.editorTextFocus,primary:3142,weight:100},menu:{id:P.EditorContextPeek,group:"peek",order:5}})}},HT.ID="editor.action.peekImplementation",HT));class lle extends hr{_getNoResultFoundMessage(e){return e?v("references.no","No references found for '{0}'",e.word):v("references.noGeneric","No references found")}_getAlternativeCommand(e){return e.getOption(58).alternativeReferenceCommand}_getGoToPreference(e){return e.getOption(58).multipleReferences}}en(class extends lle{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:"editor.action.goToReferences",title:{...di("goToReferences.label","Go to References"),mnemonicTitle:v({key:"miGotoReference",comment:["&& denotes a mnemonic"]},"Go to &&References")},precondition:ue.and(W.hasReferenceProvider,va.notInPeekEditor,W.isInEmbeddedEditor.toNegated()),keybinding:{when:W.editorTextFocus,primary:1094,weight:100},menu:[{id:P.EditorContext,group:"navigation",order:1.45},{id:P.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:5}]})}async _getLocationModel(e,t,i,n){return new Ua(await KP(e.referenceProvider,t,i,!0,n),v("ref.title","References"))}});en(class extends lle{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.referenceSearch.trigger",title:di("references.action.label","Peek References"),precondition:ue.and(W.hasReferenceProvider,va.notInPeekEditor,W.isInEmbeddedEditor.toNegated()),menu:{id:P.EditorContextPeek,group:"peek",order:6}})}async _getLocationModel(e,t,i,n){return new Ua(await KP(e.referenceProvider,t,i,!1,n),v("ref.title","References"))}});class x7e extends hr{constructor(e,t,i){super(e,{id:"editor.action.goToLocation",title:di("label.generic","Go to Any Symbol"),precondition:ue.and(va.notInPeekEditor,W.isInEmbeddedEditor.toNegated())}),this._references=t,this._gotoMultipleBehaviour=i}async _getLocationModel(e,t,i,n){return new Ua(this._references,v("generic.title","Locations"))}_getNoResultFoundMessage(e){return e&&v("generic.noResult","No results for '{0}'",e.word)||""}_getGoToPreference(e){var t;return(t=this._gotoMultipleBehaviour)!==null&&t!==void 0?t:e.getOption(58).multipleReferences}_getAlternativeCommand(){return""}}si.registerCommand({id:"editor.action.goToLocations",metadata:{description:"Go to locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:gt},{name:"position",description:"The position at which to start",constraint:Z.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto`"},{name:"noResultsMessage",description:"Human readable message that shows when locations is empty."}]},handler:async(o,e,t,i,n,s,r)=>{wi(gt.isUri(e)),wi(Z.isIPosition(t)),wi(Array.isArray(i)),wi(typeof n>"u"||typeof n=="string"),wi(typeof r>"u"||typeof r=="boolean");const a=o.get(gi),l=await a.openCodeEditor({resource:e},a.getFocusedCodeEditor());if(Ch(l))return l.setPosition(t),l.revealPositionInCenterIfOutsideViewport(t,0),l.invokeWithinContext(c=>{const u=new class extends x7e{_getNoResultFoundMessage(f){return s||super._getNoResultFoundMessage(f)}}({muteMessage:!s,openInPeek:!!r,openToSide:!1},i,n);c.get(ct).invokeFunction(u.run.bind(u),l)})}});si.registerCommand({id:"editor.action.peekLocations",metadata:{description:"Peek locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:gt},{name:"position",description:"The position at which to start",constraint:Z.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto`"}]},handler:async(o,e,t,i,n)=>{o.get(Un).executeCommand("editor.action.goToLocations",e,t,i,n,void 0,!0)}});si.registerCommand({id:"editor.action.findReferences",handler:(o,e,t)=>{wi(gt.isUri(e)),wi(Z.isIPosition(t));const i=o.get(Ze),n=o.get(gi);return n.openCodeEditor({resource:e},n.getFocusedCodeEditor()).then(s=>{if(!Ch(s)||!s.hasModel())return;const r=xm.get(s);if(!r)return;const a=Qs(c=>KP(i.referenceProvider,s.getModel(),Z.lift(t),!1,c).then(u=>new Ua(u,v("ref.title","References")))),l=new A(t.lineNumber,t.column,t.lineNumber,t.column);return Promise.resolve(r.toggleWidget(l,a,!1))})}});si.registerCommandAlias("editor.action.showReferences","editor.action.peekLocations");var D7e=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},vB=function(o,e){return function(t,i){e(t,i,o)}},oL;let Gv=oL=class{constructor(e,t,i,n){this.textModelResolverService=t,this.languageService=i,this.languageFeaturesService=n,this.toUnhook=new he,this.toUnhookForKeyboard=new he,this.currentWordAtPosition=null,this.previousPromise=null,this.editor=e,this.linkDecorations=this.editor.createDecorationsCollection();const s=new WP(e);this.toUnhook.add(s),this.toUnhook.add(s.onMouseMoveOrRelevantKeyDown(([r,a])=>{this.startFindDefinitionFromMouse(r,a??void 0)})),this.toUnhook.add(s.onExecute(r=>{this.isEnabled(r)&&this.gotoDefinition(r.target.position,r.hasSideBySideModifier).catch(a=>{Nt(a)}).finally(()=>{this.removeLinkDecorations()})})),this.toUnhook.add(s.onCancel(()=>{this.removeLinkDecorations(),this.currentWordAtPosition=null}))}static get(e){return e.getContribution(oL.ID)}async startFindDefinitionFromCursor(e){await this.startFindDefinition(e),this.toUnhookForKeyboard.add(this.editor.onDidChangeCursorPosition(()=>{this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear()})),this.toUnhookForKeyboard.add(this.editor.onKeyDown(t=>{t&&(this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear())}))}startFindDefinitionFromMouse(e,t){if(e.target.type===9&&this.linkDecorations.length>0)return;if(!this.editor.hasModel()||!this.isEnabled(e,t)){this.currentWordAtPosition=null,this.removeLinkDecorations();return}const i=e.target.position;this.startFindDefinition(i)}async startFindDefinition(e){var t;this.toUnhookForKeyboard.clear();const i=e?(t=this.editor.getModel())===null||t===void 0?void 0:t.getWordAtPosition(e):null;if(!i){this.currentWordAtPosition=null,this.removeLinkDecorations();return}if(this.currentWordAtPosition&&this.currentWordAtPosition.startColumn===i.startColumn&&this.currentWordAtPosition.endColumn===i.endColumn&&this.currentWordAtPosition.word===i.word)return;this.currentWordAtPosition=i;const n=new Ore(this.editor,15);this.previousPromise&&(this.previousPromise.cancel(),this.previousPromise=null),this.previousPromise=Qs(a=>this.findDefinition(e,a));let s;try{s=await this.previousPromise}catch(a){Nt(a);return}if(!s||!s.length||!n.validate(this.editor)){this.removeLinkDecorations();return}const r=s[0].originSelectionRange?A.lift(s[0].originSelectionRange):new A(e.lineNumber,i.startColumn,e.lineNumber,i.endColumn);if(s.length>1){let a=r;for(const{originSelectionRange:l}of s)l&&(a=A.plusRange(a,l));this.addDecoration(a,new qo().appendText(v("multipleResults","Click to show {0} definitions.",s.length)))}else{const a=s[0];if(!a.uri)return;this.textModelResolverService.createModelReference(a.uri).then(l=>{if(!l.object||!l.object.textEditorModel){l.dispose();return}const{object:{textEditorModel:c}}=l,{startLineNumber:u}=a.range;if(u<1||u>c.getLineCount()){l.dispose();return}const f=this.getPreviewValue(c,u,a),g=this.languageService.guessLanguageIdByFilepathOrFirstLine(c.uri);this.addDecoration(r,f?new qo().appendCodeblock(g||"",f):void 0),l.dispose()})}}getPreviewValue(e,t,i){let n=i.range;return n.endLineNumber-n.startLineNumber>=oL.MAX_SOURCE_PREVIEW_LINES&&(n=this.getPreviewRangeBasedOnIndentation(e,t)),this.stripIndentationFromPreviewRange(e,t,n)}stripIndentationFromPreviewRange(e,t,i){let s=e.getLineFirstNonWhitespaceColumn(t);for(let a=t+1;a<i.endLineNumber;a++){const l=e.getLineFirstNonWhitespaceColumn(a);s=Math.min(s,l)}return e.getValueInRange(i).replace(new RegExp(`^\\s{${s-1}}`,"gm"),"").trim()}getPreviewRangeBasedOnIndentation(e,t){const i=e.getLineFirstNonWhitespaceColumn(t),n=Math.min(e.getLineCount(),t+oL.MAX_SOURCE_PREVIEW_LINES);let s=t+1;for(;s<n;s++){const r=e.getLineFirstNonWhitespaceColumn(s);if(i===r)break}return new A(t,1,s+1,1)}addDecoration(e,t){const i={range:e,options:{description:"goto-definition-link",inlineClassName:"goto-definition-link",hoverMessage:t}};this.linkDecorations.set([i])}removeLinkDecorations(){this.linkDecorations.clear()}isEnabled(e,t){var i;return this.editor.hasModel()&&e.isLeftClick&&e.isNoneOrSingleMouseDown&&e.target.type===6&&!(((i=e.target.detail.injectedText)===null||i===void 0?void 0:i.options)instanceof vm)&&(e.hasTriggerModifier||(t?t.keyCodeIsTriggerKey:!1))&&this.languageFeaturesService.definitionProvider.has(this.editor.getModel())}findDefinition(e,t){const i=this.editor.getModel();return i?jP(this.languageFeaturesService.definitionProvider,i,e,t):Promise.resolve(null)}gotoDefinition(e,t){return this.editor.setPosition(e),this.editor.invokeWithinContext(i=>{const n=!t&&this.editor.getOption(88)&&!this.isInPeekEditor(i);return new bk({openToSide:t,openInPeek:n,muteMessage:!0},{title:{value:"",original:""},id:"",precondition:void 0}).run(i)})}isInPeekEditor(e){const t=e.get(bt);return va.inPeekEditor.getValue(t)}dispose(){this.toUnhook.dispose(),this.toUnhookForKeyboard.dispose()}};Gv.ID="editor.contrib.gotodefinitionatposition";Gv.MAX_SOURCE_PREVIEW_LINES=8;Gv=oL=D7e([vB(1,Ca),vB(2,xn),vB(3,Ze)],Gv);pi(Gv.ID,Gv,2);let k7e=class{constructor(e,t,i){this.value=e,this.isComplete=t,this.hasLoadingMessage=i}};class cle extends J{constructor(e,t){super(),this._editor=e,this._computer=t,this._onResult=this._register(new Y),this.onResult=this._onResult.event,this._firstWaitScheduler=this._register(new Ui(()=>this._triggerAsyncComputation(),0)),this._secondWaitScheduler=this._register(new Ui(()=>this._triggerSyncComputation(),0)),this._loadingMessageScheduler=this._register(new Ui(()=>this._triggerLoadingMessage(),0)),this._state=0,this._asyncIterable=null,this._asyncIterableDone=!1,this._result=[]}dispose(){this._asyncIterable&&(this._asyncIterable.cancel(),this._asyncIterable=null),super.dispose()}get _hoverTime(){return this._editor.getOption(60).delay}get _firstWaitTime(){return this._hoverTime/2}get _secondWaitTime(){return this._hoverTime-this._firstWaitTime}get _loadingMessageTime(){return 3*this._hoverTime}_setState(e,t=!0){this._state=e,t&&this._fireResult()}_triggerAsyncComputation(){this._setState(2),this._secondWaitScheduler.schedule(this._secondWaitTime),this._computer.computeAsync?(this._asyncIterableDone=!1,this._asyncIterable=s1e(e=>this._computer.computeAsync(e)),(async()=>{try{for await(const e of this._asyncIterable)e&&(this._result.push(e),this._fireResult());this._asyncIterableDone=!0,(this._state===3||this._state===4)&&this._setState(0)}catch(e){Nt(e)}})()):this._asyncIterableDone=!0}_triggerSyncComputation(){this._computer.computeSync&&(this._result=this._result.concat(this._computer.computeSync())),this._setState(this._asyncIterableDone?0:3)}_triggerLoadingMessage(){this._state===3&&this._setState(4)}_fireResult(){if(this._state===1||this._state===2)return;const e=this._state===0,t=this._state===4;this._onResult.fire(new k7e(this._result.slice(0),e,t))}start(e){if(e===0)this._state===0&&(this._setState(1),this._firstWaitScheduler.schedule(this._firstWaitTime),this._loadingMessageScheduler.schedule(this._loadingMessageTime));else switch(this._state){case 0:this._triggerAsyncComputation(),this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break;case 2:this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break}}cancel(){this._firstWaitScheduler.cancel(),this._secondWaitScheduler.cancel(),this._loadingMessageScheduler.cancel(),this._asyncIterable&&(this._asyncIterable.cancel(),this._asyncIterable=null),this._result=[],this._setState(0,!1)}}class bB{constructor(e,t,i,n){this.priority=e,this.range=t,this.initialMousePosX=i,this.initialMousePosY=n,this.type=1}equals(e){return e.type===1&&this.range.equalsRange(e.range)}canAdoptVisibleHover(e,t){return e.type===1&&t.lineNumber===this.range.startLineNumber}}class wv{constructor(e,t,i,n,s,r){this.priority=e,this.owner=t,this.range=i,this.initialMousePosX=n,this.initialMousePosY=s,this.supportsMarkerHover=r,this.type=2}equals(e){return e.type===2&&this.owner===e.owner}canAdoptVisibleHover(e,t){return e.type===2&&this.owner===e.owner}}const zm=new class{constructor(){this._participants=[]}register(e){this._participants.push(e)}getAll(){return this._participants}};class uU{constructor(){this._onDidWillResize=new Y,this.onDidWillResize=this._onDidWillResize.event,this._onDidResize=new Y,this.onDidResize=this._onDidResize.event,this._sashListener=new he,this._size=new yi(0,0),this._minSize=new yi(0,0),this._maxSize=new yi(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),this.domNode=document.createElement("div"),this._eastSash=new jo(this.domNode,{getVerticalSashLeft:()=>this._size.width},{orientation:0}),this._westSash=new jo(this.domNode,{getVerticalSashLeft:()=>0},{orientation:0}),this._northSash=new jo(this.domNode,{getHorizontalSashTop:()=>0},{orientation:1,orthogonalEdge:hM.North}),this._southSash=new jo(this.domNode,{getHorizontalSashTop:()=>this._size.height},{orientation:1,orthogonalEdge:hM.South}),this._northSash.orthogonalStartSash=this._westSash,this._northSash.orthogonalEndSash=this._eastSash,this._southSash.orthogonalStartSash=this._westSash,this._southSash.orthogonalEndSash=this._eastSash;let e,t=0,i=0;this._sashListener.add(Ie.any(this._northSash.onDidStart,this._eastSash.onDidStart,this._southSash.onDidStart,this._westSash.onDidStart)(()=>{e===void 0&&(this._onDidWillResize.fire(),e=this._size,t=0,i=0)})),this._sashListener.add(Ie.any(this._northSash.onDidEnd,this._eastSash.onDidEnd,this._southSash.onDidEnd,this._westSash.onDidEnd)(()=>{e!==void 0&&(e=void 0,t=0,i=0,this._onDidResize.fire({dimension:this._size,done:!0}))})),this._sashListener.add(this._eastSash.onDidChange(n=>{e&&(i=n.currentX-n.startX,this.layout(e.height+t,e.width+i),this._onDidResize.fire({dimension:this._size,done:!1,east:!0}))})),this._sashListener.add(this._westSash.onDidChange(n=>{e&&(i=-(n.currentX-n.startX),this.layout(e.height+t,e.width+i),this._onDidResize.fire({dimension:this._size,done:!1,west:!0}))})),this._sashListener.add(this._northSash.onDidChange(n=>{e&&(t=-(n.currentY-n.startY),this.layout(e.height+t,e.width+i),this._onDidResize.fire({dimension:this._size,done:!1,north:!0}))})),this._sashListener.add(this._southSash.onDidChange(n=>{e&&(t=n.currentY-n.startY,this.layout(e.height+t,e.width+i),this._onDidResize.fire({dimension:this._size,done:!1,south:!0}))})),this._sashListener.add(Ie.any(this._eastSash.onDidReset,this._westSash.onDidReset)(n=>{this._preferredSize&&(this.layout(this._size.height,this._preferredSize.width),this._onDidResize.fire({dimension:this._size,done:!0}))})),this._sashListener.add(Ie.any(this._northSash.onDidReset,this._southSash.onDidReset)(n=>{this._preferredSize&&(this.layout(this._preferredSize.height,this._size.width),this._onDidResize.fire({dimension:this._size,done:!0}))}))}dispose(){this._northSash.dispose(),this._southSash.dispose(),this._eastSash.dispose(),this._westSash.dispose(),this._sashListener.dispose(),this._onDidResize.dispose(),this._onDidWillResize.dispose(),this.domNode.remove()}enableSashes(e,t,i,n){this._northSash.state=e?3:0,this._eastSash.state=t?3:0,this._southSash.state=i?3:0,this._westSash.state=n?3:0}layout(e=this.size.height,t=this.size.width){const{height:i,width:n}=this._minSize,{height:s,width:r}=this._maxSize;e=Math.max(i,Math.min(s,e)),t=Math.max(n,Math.min(r,t));const a=new yi(t,e);yi.equals(a,this._size)||(this.domNode.style.height=e+"px",this.domNode.style.width=t+"px",this._size=a,this._northSash.layout(),this._eastSash.layout(),this._southSash.layout(),this._westSash.layout())}clearSashHoverState(){this._eastSash.clearSashHoverState(),this._westSash.clearSashHoverState(),this._northSash.clearSashHoverState(),this._southSash.clearSashHoverState()}get size(){return this._size}set maxSize(e){this._maxSize=e}get maxSize(){return this._maxSize}set minSize(e){this._minSize=e}get minSize(){return this._minSize}set preferredSize(e){this._preferredSize=e}get preferredSize(){return this._preferredSize}}const E7e=30,I7e=24;class T7e extends J{constructor(e,t=new yi(10,10)){super(),this._editor=e,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._resizableNode=this._register(new uU),this._contentPosition=null,this._isResizing=!1,this._resizableNode.domNode.style.position="absolute",this._resizableNode.minSize=yi.lift(t),this._resizableNode.layout(t.height,t.width),this._resizableNode.enableSashes(!0,!0,!0,!0),this._register(this._resizableNode.onDidResize(i=>{this._resize(new yi(i.dimension.width,i.dimension.height)),i.done&&(this._isResizing=!1)})),this._register(this._resizableNode.onDidWillResize(()=>{this._isResizing=!0}))}get isResizing(){return this._isResizing}getDomNode(){return this._resizableNode.domNode}getPosition(){return this._contentPosition}get position(){var e;return!((e=this._contentPosition)===null||e===void 0)&&e.position?Z.lift(this._contentPosition.position):void 0}_availableVerticalSpaceAbove(e){const t=this._editor.getDomNode(),i=this._editor.getScrolledVisiblePosition(e);return!t||!i?void 0:ws(t).top+i.top-E7e}_availableVerticalSpaceBelow(e){const t=this._editor.getDomNode(),i=this._editor.getScrolledVisiblePosition(e);if(!t||!i)return;const n=ws(t),s=um(t.ownerDocument.body),r=n.top+i.top+i.height;return s.height-r-I7e}_findPositionPreference(e,t){var i,n;const s=Math.min((i=this._availableVerticalSpaceBelow(t))!==null&&i!==void 0?i:1/0,e),r=Math.min((n=this._availableVerticalSpaceAbove(t))!==null&&n!==void 0?n:1/0,e),a=Math.min(Math.max(r,s),e),l=Math.min(e,a);let c;return this._editor.getOption(60).above?c=l<=r?1:2:c=l<=s?2:1,c===1?this._resizableNode.enableSashes(!0,!0,!1,!1):this._resizableNode.enableSashes(!1,!0,!0,!1),c}_resize(e){this._resizableNode.layout(e.height,e.width)}}var hU=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},cv=function(o,e){return function(t,i){e(t,i,o)}},$N,Ru;const nee=ye;let zM=$N=class extends J{constructor(e,t,i){super(),this._editor=e,this._instantiationService=t,this._keybindingService=i,this._currentResult=null,this._widget=this._register(this._instantiationService.createInstance(em,this._editor)),this._participants=[];for(const n of zm.getAll())this._participants.push(this._instantiationService.createInstance(n,this._editor));this._participants.sort((n,s)=>n.hoverOrdinal-s.hoverOrdinal),this._computer=new $M(this._editor,this._participants),this._hoverOperation=this._register(new cle(this._editor,this._computer)),this._register(this._hoverOperation.onResult(n=>{if(!this._computer.anchor)return;const s=n.hasLoadingMessage?this._addLoadingMessage(n.value):n.value;this._withResult(new dle(this._computer.anchor,s,n.isComplete))})),this._register(ss(this._widget.getDomNode(),"keydown",n=>{n.equals(9)&&this.hide()})),this._register(Qn.onDidChange(()=>{this._widget.position&&this._currentResult&&this._setCurrentResult(this._currentResult)}))}_startShowingOrUpdateHover(e,t,i,n,s){return!this._widget.position||!this._currentResult?e?(this._startHoverOperationIfNecessary(e,t,i,n,!1),!0):!1:this._editor.getOption(60).sticky&&s&&this._widget.isMouseGettingCloser(s.event.posx,s.event.posy)?(e&&this._startHoverOperationIfNecessary(e,t,i,n,!0),!0):e?e&&this._currentResult.anchor.equals(e)?!0:e.canAdoptVisibleHover(this._currentResult.anchor,this._widget.position)?(this._setCurrentResult(this._currentResult.filter(e)),this._startHoverOperationIfNecessary(e,t,i,n,!1),!0):(this._setCurrentResult(null),this._startHoverOperationIfNecessary(e,t,i,n,!1),!0):(this._setCurrentResult(null),!1)}_startHoverOperationIfNecessary(e,t,i,n,s){this._computer.anchor&&this._computer.anchor.equals(e)||(this._hoverOperation.cancel(),this._computer.anchor=e,this._computer.shouldFocus=n,this._computer.source=i,this._computer.insistOnKeepingHoverVisible=s,this._hoverOperation.start(t))}_setCurrentResult(e){this._currentResult!==e&&(e&&e.messages.length===0&&(e=null),this._currentResult=e,this._currentResult?this._renderMessages(this._currentResult.anchor,this._currentResult.messages):this._widget.hide())}_addLoadingMessage(e){if(this._computer.anchor){for(const t of this._participants)if(t.createLoadingMessage){const i=t.createLoadingMessage(this._computer.anchor);if(i)return e.slice(0).concat([i])}}return e}_withResult(e){this._widget.position&&this._currentResult&&this._currentResult.isComplete&&(!e.isComplete||this._computer.insistOnKeepingHoverVisible&&e.messages.length===0)||this._setCurrentResult(e)}_renderMessages(e,t){const{showAtPosition:i,showAtSecondaryPosition:n,highlightRange:s}=$N.computeHoverRanges(this._editor,e.range,t),r=new he,a=r.add(new UM(this._keybindingService)),l=document.createDocumentFragment();let c=null;const u={fragment:l,statusBar:a,setColorPicker:g=>c=g,onContentsChanged:()=>this._widget.onContentsChanged(),setMinimumDimensions:g=>this._widget.setMinimumDimensions(g),hide:()=>this.hide()};for(const g of this._participants){const p=t.filter(_=>_.owner===g);p.length>0&&r.add(g.renderHoverParts(u,p))}const f=t.some(g=>g.isBeforeContent);if(a.hasContent&&l.appendChild(a.hoverElement),l.hasChildNodes()){if(s){const g=this._editor.createDecorationsCollection();g.set([{range:s,options:$N._DECORATION_OPTIONS}]),r.add(lt(()=>{g.clear()}))}this._widget.showAt(l,new R7e(e.initialMousePosX,e.initialMousePosY,c,i,n,this._editor.getOption(60).above,this._computer.shouldFocus,this._computer.source,f,r))}else r.dispose()}static computeHoverRanges(e,t,i){let n=1;if(e.hasModel()){const f=e._getViewModel(),g=f.coordinatesConverter,p=g.convertModelRangeToViewRange(t),_=new Z(p.startLineNumber,f.getLineMinColumn(p.startLineNumber));n=g.convertViewPositionToModelPosition(_).column}const s=t.startLineNumber;let r=t.startColumn,a=i[0].range,l=null;for(const f of i)a=A.plusRange(a,f.range),f.range.startLineNumber===s&&f.range.endLineNumber===s&&(r=Math.max(Math.min(r,f.range.startColumn),n)),f.forceShowAtRange&&(l=f.range);const c=l?l.getStartPosition():new Z(s,t.startColumn),u=l?l.getStartPosition():new Z(s,r);return{showAtPosition:c,showAtSecondaryPosition:u,highlightRange:a}}showsOrWillShow(e){if(this._widget.isResizing)return!0;const t=[];for(const n of this._participants)if(n.suggestHoverAnchor){const s=n.suggestHoverAnchor(e);s&&t.push(s)}const i=e.target;if(i.type===6&&t.push(new bB(0,i.range,e.event.posx,e.event.posy)),i.type===7){const n=this._editor.getOption(50).typicalHalfwidthCharacterWidth/2;!i.detail.isAfterLines&&typeof i.detail.horizontalDistanceToText=="number"&&i.detail.horizontalDistanceToText<n&&t.push(new bB(0,i.range,e.event.posx,e.event.posy))}return t.length===0?this._startShowingOrUpdateHover(null,0,0,!1,e):(t.sort((n,s)=>s.priority-n.priority),this._startShowingOrUpdateHover(t[0],0,0,!1,e))}startShowingAtRange(e,t,i,n){this._startShowingOrUpdateHover(new bB(0,e,void 0,void 0),t,i,n,null)}containsNode(e){return e?this._widget.getDomNode().contains(e):!1}focus(){this._widget.focus()}scrollUp(){this._widget.scrollUp()}scrollDown(){this._widget.scrollDown()}scrollLeft(){this._widget.scrollLeft()}scrollRight(){this._widget.scrollRight()}pageUp(){this._widget.pageUp()}pageDown(){this._widget.pageDown()}goToTop(){this._widget.goToTop()}goToBottom(){this._widget.goToBottom()}hide(){this._computer.anchor=null,this._hoverOperation.cancel(),this._setCurrentResult(null)}get isColorPickerVisible(){return this._widget.isColorPickerVisible}get isVisibleFromKeyboard(){return this._widget.isVisibleFromKeyboard}get isVisible(){return this._widget.isVisible}get isFocused(){return this._widget.isFocused}get isResizing(){return this._widget.isResizing}get widget(){return this._widget}};zM._DECORATION_OPTIONS=Rt.register({description:"content-hover-highlight",className:"hoverHighlight"});zM=$N=hU([cv(1,ct),cv(2,Bi)],zM);class dle{constructor(e,t,i){this.anchor=e,this.messages=t,this.isComplete=i}filter(e){const t=this.messages.filter(i=>i.isValidForHoverAnchor(e));return t.length===this.messages.length?this:new N7e(this,this.anchor,t,this.isComplete)}}class N7e extends dle{constructor(e,t,i,n){super(t,i,n),this.original=e}filter(e){return this.original.filter(e)}}class R7e{constructor(e,t,i,n,s,r,a,l,c,u){this.initialMousePosX=e,this.initialMousePosY=t,this.colorPicker=i,this.showAtPosition=n,this.showAtSecondaryPosition=s,this.preferAbove=r,this.stoleFocus=a,this.source=l,this.isBeforeContent=c,this.disposables=u,this.closestMouseDistance=void 0}}const see=30,CB=10,M7e=6;let em=Ru=class extends T7e{get isColorPickerVisible(){var e;return!!(!((e=this._visibleData)===null||e===void 0)&&e.colorPicker)}get isVisibleFromKeyboard(){var e;return((e=this._visibleData)===null||e===void 0?void 0:e.source)===1}get isVisible(){var e;return(e=this._hoverVisibleKey.get())!==null&&e!==void 0?e:!1}get isFocused(){var e;return(e=this._hoverFocusedKey.get())!==null&&e!==void 0?e:!1}constructor(e,t,i,n,s){const r=e.getOption(67)+8,a=150,l=new yi(a,r);super(e,l),this._configurationService=i,this._accessibilityService=n,this._keybindingService=s,this._hover=this._register(new XH),this._minimumSize=l,this._hoverVisibleKey=W.hoverVisible.bindTo(t),this._hoverFocusedKey=W.hoverFocused.bindTo(t),ge(this._resizableNode.domNode,this._hover.containerDomNode),this._resizableNode.domNode.style.zIndex="50",this._register(this._editor.onDidLayoutChange(()=>{this.isVisible&&this._updateMaxDimensions()})),this._register(this._editor.onDidChangeConfiguration(u=>{u.hasChanged(50)&&this._updateFont()}));const c=this._register(Kd(this._resizableNode.domNode));this._register(c.onDidFocus(()=>{this._hoverFocusedKey.set(!0)})),this._register(c.onDidBlur(()=>{this._hoverFocusedKey.set(!1)})),this._setHoverData(void 0),this._editor.addContentWidget(this)}dispose(){var e;super.dispose(),(e=this._visibleData)===null||e===void 0||e.disposables.dispose(),this._editor.removeContentWidget(this)}getId(){return Ru.ID}static _applyDimensions(e,t,i){const n=typeof t=="number"?`${t}px`:t,s=typeof i=="number"?`${i}px`:i;e.style.width=n,e.style.height=s}_setContentsDomNodeDimensions(e,t){const i=this._hover.contentsDomNode;return Ru._applyDimensions(i,e,t)}_setContainerDomNodeDimensions(e,t){const i=this._hover.containerDomNode;return Ru._applyDimensions(i,e,t)}_setHoverWidgetDimensions(e,t){this._setContentsDomNodeDimensions(e,t),this._setContainerDomNodeDimensions(e,t),this._layoutContentWidget()}static _applyMaxDimensions(e,t,i){const n=typeof t=="number"?`${t}px`:t,s=typeof i=="number"?`${i}px`:i;e.style.maxWidth=n,e.style.maxHeight=s}_setHoverWidgetMaxDimensions(e,t){Ru._applyMaxDimensions(this._hover.contentsDomNode,e,t),Ru._applyMaxDimensions(this._hover.containerDomNode,e,t),this._hover.containerDomNode.style.setProperty("--vscode-hover-maxWidth",typeof e=="number"?`${e}px`:e),this._layoutContentWidget()}_hasHorizontalScrollbar(){const e=this._hover.scrollbar.getScrollDimensions();return e.scrollWidth>e.width}_adjustContentsBottomPadding(){const e=this._hover.contentsDomNode,t=`${this._hover.scrollbar.options.horizontalScrollbarSize}px`;e.style.paddingBottom!==t&&(e.style.paddingBottom=t)}_setAdjustedHoverWidgetDimensions(e){this._setHoverWidgetMaxDimensions("none","none");const t=e.width,i=e.height;this._setHoverWidgetDimensions(t,i),this._hasHorizontalScrollbar()&&(this._adjustContentsBottomPadding(),this._setContentsDomNodeDimensions(t,i-CB))}_updateResizableNodeMaxDimensions(){var e,t;const i=(e=this._findMaximumRenderingWidth())!==null&&e!==void 0?e:1/0,n=(t=this._findMaximumRenderingHeight())!==null&&t!==void 0?t:1/0;this._resizableNode.maxSize=new yi(i,n),this._setHoverWidgetMaxDimensions(i,n)}_resize(e){var t,i;Ru._lastDimensions=new yi(e.width,e.height),this._setAdjustedHoverWidgetDimensions(e),this._resizableNode.layout(e.height,e.width),this._updateResizableNodeMaxDimensions(),this._hover.scrollbar.scanDomNode(),this._editor.layoutContentWidget(this),(i=(t=this._visibleData)===null||t===void 0?void 0:t.colorPicker)===null||i===void 0||i.layout()}_findAvailableSpaceVertically(){var e;const t=(e=this._visibleData)===null||e===void 0?void 0:e.showAtPosition;if(t)return this._positionPreference===1?this._availableVerticalSpaceAbove(t):this._availableVerticalSpaceBelow(t)}_findMaximumRenderingHeight(){const e=this._findAvailableSpaceVertically();if(!e)return;let t=M7e;return Array.from(this._hover.contentsDomNode.children).forEach(i=>{t+=i.clientHeight}),this._hasHorizontalScrollbar()&&(t+=CB),Math.min(e,t)}_isHoverTextOverflowing(){this._hover.containerDomNode.style.setProperty("--vscode-hover-whiteSpace","nowrap"),this._hover.containerDomNode.style.setProperty("--vscode-hover-sourceWhiteSpace","nowrap");const e=Array.from(this._hover.contentsDomNode.children).some(t=>t.scrollWidth>t.clientWidth);return this._hover.containerDomNode.style.removeProperty("--vscode-hover-whiteSpace"),this._hover.containerDomNode.style.removeProperty("--vscode-hover-sourceWhiteSpace"),e}_findMaximumRenderingWidth(){if(!this._editor||!this._editor.hasModel())return;const e=this._isHoverTextOverflowing(),t=typeof this._contentWidth>"u"?0:this._contentWidth-2;return e||this._hover.containerDomNode.clientWidth<t?um(this._hover.containerDomNode.ownerDocument.body).width-14:this._hover.containerDomNode.clientWidth+2}isMouseGettingCloser(e,t){if(!this._visibleData)return!1;if(typeof this._visibleData.initialMousePosX>"u"||typeof this._visibleData.initialMousePosY>"u")return this._visibleData.initialMousePosX=e,this._visibleData.initialMousePosY=t,!1;const i=ws(this.getDomNode());typeof this._visibleData.closestMouseDistance>"u"&&(this._visibleData.closestMouseDistance=oee(this._visibleData.initialMousePosX,this._visibleData.initialMousePosY,i.left,i.top,i.width,i.height));const n=oee(e,t,i.left,i.top,i.width,i.height);return n>this._visibleData.closestMouseDistance+4?!1:(this._visibleData.closestMouseDistance=Math.min(this._visibleData.closestMouseDistance,n),!0)}_setHoverData(e){var t;(t=this._visibleData)===null||t===void 0||t.disposables.dispose(),this._visibleData=e,this._hoverVisibleKey.set(!!e),this._hover.containerDomNode.classList.toggle("hidden",!e)}_updateFont(){const{fontSize:e,lineHeight:t}=this._editor.getOption(50),i=this._hover.contentsDomNode;i.style.fontSize=`${e}px`,i.style.lineHeight=`${t/e}`,Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach(s=>this._editor.applyFontInfo(s))}_updateContent(e){const t=this._hover.contentsDomNode;t.style.paddingBottom="",t.textContent="",t.appendChild(e)}_layoutContentWidget(){this._editor.layoutContentWidget(this),this._hover.onContentsChanged()}_updateMaxDimensions(){const e=Math.max(this._editor.getLayoutInfo().height/4,250,Ru._lastDimensions.height),t=Math.max(this._editor.getLayoutInfo().width*.66,500,Ru._lastDimensions.width);this._setHoverWidgetMaxDimensions(t,e)}_render(e,t){this._setHoverData(t),this._updateFont(),this._updateContent(e),this._updateMaxDimensions(),this.onContentsChanged(),this._editor.render()}getPosition(){var e;return this._visibleData?{position:this._visibleData.showAtPosition,secondaryPosition:this._visibleData.showAtSecondaryPosition,positionAffinity:this._visibleData.isBeforeContent?3:void 0,preference:[(e=this._positionPreference)!==null&&e!==void 0?e:1]}:null}showAt(e,t){var i,n,s,r;if(!this._editor||!this._editor.hasModel())return;this._render(e,t);const a=Ef(this._hover.containerDomNode),l=t.showAtPosition;this._positionPreference=(i=this._findPositionPreference(a,l))!==null&&i!==void 0?i:1,this.onContentsChanged(),t.stoleFocus&&this._hover.containerDomNode.focus(),(n=t.colorPicker)===null||n===void 0||n.layout();const u=this._hover.containerDomNode.ownerDocument.activeElement===this._hover.containerDomNode&&eoe(this._configurationService.getValue("accessibility.verbosity.hover")===!0&&this._accessibilityService.isScreenReaderOptimized(),(r=(s=this._keybindingService.lookupKeybinding("editor.action.accessibleView"))===null||s===void 0?void 0:s.getAriaLabel())!==null&&r!==void 0?r:"");u&&(this._hover.contentsDomNode.ariaLabel=this._hover.contentsDomNode.textContent+", "+u)}hide(){if(!this._visibleData)return;const e=this._visibleData.stoleFocus||this._hoverFocusedKey.get();this._setHoverData(void 0),this._resizableNode.maxSize=new yi(1/0,1/0),this._resizableNode.clearSashHoverState(),this._hoverFocusedKey.set(!1),this._editor.layoutContentWidget(this),e&&this._editor.focus()}_removeConstraintsRenderNormally(){const e=this._editor.getLayoutInfo();this._resizableNode.layout(e.height,e.width),this._setHoverWidgetDimensions("auto","auto")}_adjustHoverHeightForScrollbar(e){var t;const i=this._hover.containerDomNode,n=this._hover.contentsDomNode,s=(t=this._findMaximumRenderingHeight())!==null&&t!==void 0?t:1/0;this._setContainerDomNodeDimensions(Ir(i),Math.min(s,e)),this._setContentsDomNodeDimensions(Ir(n),Math.min(s,e-CB))}setMinimumDimensions(e){this._minimumSize=new yi(Math.max(this._minimumSize.width,e.width),Math.max(this._minimumSize.height,e.height)),this._updateMinimumWidth()}_updateMinimumWidth(){const e=typeof this._contentWidth>"u"?this._minimumSize.width:Math.min(this._contentWidth,this._minimumSize.width);this._resizableNode.minSize=new yi(e,this._minimumSize.height)}onContentsChanged(){var e;this._removeConstraintsRenderNormally();const t=this._hover.containerDomNode;let i=Ef(t),n=Ir(t);if(this._resizableNode.layout(i,n),this._setHoverWidgetDimensions(n,i),i=Ef(t),n=Ir(t),this._contentWidth=n,this._updateMinimumWidth(),this._resizableNode.layout(i,n),this._hasHorizontalScrollbar()&&(this._adjustContentsBottomPadding(),this._adjustHoverHeightForScrollbar(i)),!((e=this._visibleData)===null||e===void 0)&&e.showAtPosition){const s=Ef(this._hover.containerDomNode);this._positionPreference=this._findPositionPreference(s,this._visibleData.showAtPosition)}this._layoutContentWidget()}focus(){this._hover.containerDomNode.focus()}scrollUp(){const e=this._hover.scrollbar.getScrollPosition().scrollTop,t=this._editor.getOption(50);this._hover.scrollbar.setScrollPosition({scrollTop:e-t.lineHeight})}scrollDown(){const e=this._hover.scrollbar.getScrollPosition().scrollTop,t=this._editor.getOption(50);this._hover.scrollbar.setScrollPosition({scrollTop:e+t.lineHeight})}scrollLeft(){const e=this._hover.scrollbar.getScrollPosition().scrollLeft;this._hover.scrollbar.setScrollPosition({scrollLeft:e-see})}scrollRight(){const e=this._hover.scrollbar.getScrollPosition().scrollLeft;this._hover.scrollbar.setScrollPosition({scrollLeft:e+see})}pageUp(){const e=this._hover.scrollbar.getScrollPosition().scrollTop,t=this._hover.scrollbar.getScrollDimensions().height;this._hover.scrollbar.setScrollPosition({scrollTop:e-t})}pageDown(){const e=this._hover.scrollbar.getScrollPosition().scrollTop,t=this._hover.scrollbar.getScrollDimensions().height;this._hover.scrollbar.setScrollPosition({scrollTop:e+t})}goToTop(){this._hover.scrollbar.setScrollPosition({scrollTop:0})}goToBottom(){this._hover.scrollbar.setScrollPosition({scrollTop:this._hover.scrollbar.getScrollDimensions().scrollHeight})}};em.ID="editor.contrib.resizableContentHoverWidget";em._lastDimensions=new yi(0,0);em=Ru=hU([cv(1,bt),cv(2,$t),cv(3,mc),cv(4,Bi)],em);let UM=class extends J{get hasContent(){return this._hasContent}constructor(e){super(),this._keybindingService=e,this._hasContent=!1,this.hoverElement=nee("div.hover-row.status-bar"),this.actionsElement=ge(this.hoverElement,nee("div.actions"))}addAction(e){const t=this._keybindingService.lookupKeybinding(e.commandId),i=t?t.getLabel():null;return this._hasContent=!0,this._register(XA.render(this.actionsElement,e,i))}append(e){const t=ge(this.actionsElement,e);return this._hasContent=!0,t}};UM=hU([cv(0,Bi)],UM);class $M{get anchor(){return this._anchor}set anchor(e){this._anchor=e}get shouldFocus(){return this._shouldFocus}set shouldFocus(e){this._shouldFocus=e}get source(){return this._source}set source(e){this._source=e}get insistOnKeepingHoverVisible(){return this._insistOnKeepingHoverVisible}set insistOnKeepingHoverVisible(e){this._insistOnKeepingHoverVisible=e}constructor(e,t){this._editor=e,this._participants=t,this._anchor=null,this._shouldFocus=!1,this._source=0,this._insistOnKeepingHoverVisible=!1}static _getLineDecorations(e,t){if(t.type!==1&&!t.supportsMarkerHover)return[];const i=e.getModel(),n=t.range.startLineNumber;if(n>i.getLineCount())return[];const s=i.getLineMaxColumn(n);return e.getLineDecorations(n).filter(r=>{if(r.options.isWholeLine)return!0;const a=r.range.startLineNumber===n?r.range.startColumn:1,l=r.range.endLineNumber===n?r.range.endColumn:s;if(r.options.showIfCollapsed){if(a>t.range.startColumn+1||t.range.endColumn-1>l)return!1}else if(a>t.range.startColumn||t.range.endColumn>l)return!1;return!0})}computeAsync(e){const t=this._anchor;if(!this._editor.hasModel()||!t)return ks.EMPTY;const i=$M._getLineDecorations(this._editor,t);return ks.merge(this._participants.map(n=>n.computeAsync?n.computeAsync(t,i,e):ks.EMPTY))}computeSync(){if(!this._editor.hasModel()||!this._anchor)return[];const e=$M._getLineDecorations(this._editor,this._anchor);let t=[];for(const i of this._participants)t=t.concat(i.computeSync(this._anchor,e));return Ud(t)}}function oee(o,e,t,i,n,s){const r=t+n/2,a=i+s/2,l=Math.max(Math.abs(o-r)-n/2,0),c=Math.max(Math.abs(e-a)-s/2,0);return Math.sqrt(l*l+c*c)}const ree=ye;class KC extends J{constructor(e,t,i){super(),this._renderDisposeables=this._register(new he),this._editor=e,this._isVisible=!1,this._messages=[],this._hover=this._register(new XH),this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._markdownRenderer=this._register(new mh({editor:this._editor},t,i)),this._computer=new A7e(this._editor),this._hoverOperation=this._register(new cle(this._editor,this._computer)),this._register(this._hoverOperation.onResult(n=>{this._withResult(n.value)})),this._register(this._editor.onDidChangeModelDecorations(()=>this._onModelDecorationsChanged())),this._register(this._editor.onDidChangeConfiguration(n=>{n.hasChanged(50)&&this._updateFont()})),this._editor.addOverlayWidget(this)}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return KC.ID}getDomNode(){return this._hover.containerDomNode}getPosition(){return null}_updateFont(){Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach(t=>this._editor.applyFontInfo(t))}_onModelDecorationsChanged(){this._isVisible&&(this._hoverOperation.cancel(),this._hoverOperation.start(0))}startShowingAt(e,t){this._computer.lineNumber===e&&this._computer.lane===t||(this._hoverOperation.cancel(),this.hide(),this._computer.lineNumber=e,this._computer.lane=t,this._hoverOperation.start(0))}hide(){this._computer.lineNumber=-1,this._hoverOperation.cancel(),this._isVisible&&(this._isVisible=!1,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible))}_withResult(e){this._messages=e,this._messages.length>0?this._renderMessages(this._computer.lineNumber,this._messages):this.hide()}_renderMessages(e,t){this._renderDisposeables.clear();const i=document.createDocumentFragment();for(const n of t){const s=ree("div.hover-row.markdown-hover"),r=ge(s,ree("div.hover-contents")),a=this._renderDisposeables.add(this._markdownRenderer.render(n.value));r.appendChild(a.element),i.appendChild(s)}this._updateContents(i),this._showAt(e)}_updateContents(e){this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(e),this._updateFont()}_showAt(e){this._isVisible||(this._isVisible=!0,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible));const t=this._editor.getLayoutInfo(),i=this._editor.getTopForLineNumber(e),n=this._editor.getScrollTop(),s=this._editor.getOption(67),r=this._hover.containerDomNode.clientHeight,a=i-n-(r-s)/2,l=t.glyphMarginLeft+t.glyphMarginWidth+(this._computer.lane==="lineNo"?t.lineNumbersWidth:0);this._hover.containerDomNode.style.left=`${l}px`,this._hover.containerDomNode.style.top=`${Math.max(Math.round(a),0)}px`}}KC.ID="editor.contrib.modesGlyphHoverWidget";class A7e{get lineNumber(){return this._lineNumber}set lineNumber(e){this._lineNumber=e}get lane(){return this._laneOrLine}set lane(e){this._laneOrLine=e}constructor(e){this._editor=e,this._lineNumber=-1,this._laneOrLine=hh.Center}computeSync(){var e,t;const i=a=>({value:a}),n=this._editor.getLineDecorations(this._lineNumber),s=[],r=this._laneOrLine==="lineNo";if(!n)return s;for(const a of n){const l=(t=(e=a.options.glyphMargin)===null||e===void 0?void 0:e.position)!==null&&t!==void 0?t:hh.Center;if(!r&&l!==this._laneOrLine)continue;const c=r?a.options.lineNumberHoverMessage:a.options.glyphMarginHoverMessage;!c||v1(c)||s.push(...yV(c).map(i))}return s}}class P7e{constructor(e,t,i){this.provider=e,this.hover=t,this.ordinal=i}}async function O7e(o,e,t,i,n){try{const s=await Promise.resolve(o.provideHover(t,i,n));if(s&&B7e(s))return new P7e(o,s,e)}catch(s){hs(s)}}function fU(o,e,t,i){const s=o.ordered(e).map((r,a)=>O7e(r,a,e,t,i));return ks.fromPromises(s).coalesce()}function F7e(o,e,t,i){return fU(o,e,t,i).map(n=>n.hover).toPromise()}xh("_executeHoverProvider",(o,e,t)=>{const i=o.get(Ze);return F7e(i.hoverProvider,e,t,Yt.None)});function B7e(o){const e=typeof o.range<"u",t=typeof o.contents<"u"&&o.contents&&o.contents.length>0;return e&&t}var W7e=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},zT=function(o,e){return function(t,i){e(t,i,o)}};const aee=ye;class Nd{constructor(e,t,i,n,s){this.owner=e,this.range=t,this.contents=i,this.isBeforeContent=n,this.ordinal=s}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}let jM=class{constructor(e,t,i,n,s){this._editor=e,this._languageService=t,this._openerService=i,this._configurationService=n,this._languageFeaturesService=s,this.hoverOrdinal=3}createLoadingMessage(e){return new Nd(this,e.range,[new qo().appendText(v("modesContentHover.loading","Loading..."))],!1,2e3)}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1)return[];const i=this._editor.getModel(),n=e.range.startLineNumber,s=i.getLineMaxColumn(n),r=[];let a=1e3;const l=i.getLineLength(n),c=i.getLanguageIdAtPosition(e.range.startLineNumber,e.range.startColumn),u=this._editor.getOption(117),f=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:c});let g=!1;u>=0&&l>u&&e.range.startColumn>=u&&(g=!0,r.push(new Nd(this,e.range,[{value:v("stopped rendering","Rendering paused for long line for performance reasons. This can be configured via `editor.stopRenderingLineAfter`.")}],!1,a++))),!g&&typeof f=="number"&&l>=f&&r.push(new Nd(this,e.range,[{value:v("too many characters","Tokenization is skipped for long lines for performance reasons. This can be configured via `editor.maxTokenizationLineLength`.")}],!1,a++));let p=!1;for(const _ of t){const b=_.range.startLineNumber===n?_.range.startColumn:1,y=_.range.endLineNumber===n?_.range.endColumn:s,S=_.options.hoverMessage;if(!S||v1(S))continue;_.options.beforeContentClassName&&(p=!0);const L=new A(e.range.startLineNumber,b,e.range.startLineNumber,y);r.push(new Nd(this,L,yV(S),p,a++))}return r}computeAsync(e,t,i){if(!this._editor.hasModel()||e.type!==1)return ks.EMPTY;const n=this._editor.getModel();if(!this._languageFeaturesService.hoverProvider.has(n))return ks.EMPTY;const s=new Z(e.range.startLineNumber,e.range.startColumn);return fU(this._languageFeaturesService.hoverProvider,n,s,i).filter(r=>!v1(r.hover.contents)).map(r=>{const a=r.hover.range?A.lift(r.hover.range):e.range;return new Nd(this,a,r.hover.contents,!1,r.ordinal)})}renderHoverParts(e,t){return ule(e,t,this._editor,this._languageService,this._openerService)}};jM=W7e([zT(1,xn),zT(2,wa),zT(3,$t),zT(4,Ze)],jM);function ule(o,e,t,i,n){e.sort((r,a)=>r.ordinal-a.ordinal);const s=new he;for(const r of e)for(const a of r.contents){if(v1(a))continue;const l=aee("div.hover-row.markdown-hover"),c=ge(l,aee("div.hover-contents")),u=s.add(new mh({editor:t},i,n));s.add(u.onDidRenderAsync(()=>{c.className="hover-contents code-hover-contents",o.onContentsChanged()}));const f=s.add(u.render(a));c.appendChild(f.element),o.fragment.appendChild(l)}return s}var hle=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},KM=function(o,e){return function(t,i){e(t,i,o)}};class lee{constructor(e,t,i){this.marker=e,this.index=t,this.total=i}}let XW=class{constructor(e,t,i){this._markerService=t,this._configService=i,this._onDidChange=new Y,this.onDidChange=this._onDidChange.event,this._dispoables=new he,this._markers=[],this._nextIdx=-1,gt.isUri(e)?this._resourceFilter=a=>a.toString()===e.toString():e&&(this._resourceFilter=e);const n=this._configService.getValue("problems.sortOrder"),s=(a,l)=>{let c=ex(a.resource.toString(),l.resource.toString());return c===0&&(n==="position"?c=A.compareRangesUsingStarts(a,l)||es.compare(a.severity,l.severity):c=es.compare(a.severity,l.severity)||A.compareRangesUsingStarts(a,l)),c},r=()=>{this._markers=this._markerService.read({resource:gt.isUri(e)?e:void 0,severities:es.Error|es.Warning|es.Info}),typeof e=="function"&&(this._markers=this._markers.filter(a=>this._resourceFilter(a.resource))),this._markers.sort(s)};r(),this._dispoables.add(t.onMarkerChanged(a=>{(!this._resourceFilter||a.some(l=>this._resourceFilter(l)))&&(r(),this._nextIdx=-1,this._onDidChange.fire())}))}dispose(){this._dispoables.dispose(),this._onDidChange.dispose()}matches(e){return!this._resourceFilter&&!e?!0:!this._resourceFilter||!e?!1:this._resourceFilter(e)}get selected(){const e=this._markers[this._nextIdx];return e&&new lee(e,this._nextIdx+1,this._markers.length)}_initIdx(e,t,i){let n=!1,s=this._markers.findIndex(r=>r.resource.toString()===e.uri.toString());s<0&&(s=KL(this._markers,{resource:e.uri},(r,a)=>ex(r.resource.toString(),a.resource.toString())),s<0&&(s=~s));for(let r=s;r<this._markers.length;r++){let a=A.lift(this._markers[r]);if(a.isEmpty()){const l=e.getWordAtPosition(a.getStartPosition());l&&(a=new A(a.startLineNumber,l.startColumn,a.startLineNumber,l.endColumn))}if(t&&(a.containsPosition(t)||t.isBeforeOrEqual(a.getStartPosition()))){this._nextIdx=r,n=!0;break}if(this._markers[r].resource.toString()!==e.uri.toString())break}n||(this._nextIdx=i?0:this._markers.length-1),this._nextIdx<0&&(this._nextIdx=this._markers.length-1)}resetIndex(){this._nextIdx=-1}move(e,t,i){if(this._markers.length===0)return!1;const n=this._nextIdx;return this._nextIdx===-1?this._initIdx(t,i,e):e?this._nextIdx=(this._nextIdx+1)%this._markers.length:e||(this._nextIdx=(this._nextIdx-1+this._markers.length)%this._markers.length),n!==this._nextIdx}find(e,t){let i=this._markers.findIndex(n=>n.resource.toString()===e.toString());if(!(i<0)){for(;i<this._markers.length;i++)if(A.containsPosition(this._markers[i],t))return new lee(this._markers[i],i+1,this._markers.length)}}};XW=hle([KM(1,kh),KM(2,$t)],XW);const fle=Zt("IMarkerNavigationService");let JW=class{constructor(e,t){this._markerService=e,this._configService=t,this._provider=new Wr}getMarkerList(e){for(const t of this._provider){const i=t.getMarkerList(e);if(i)return i}return new XW(e,this._markerService,this._configService)}};JW=hle([KM(0,kh),KM(1,$t)],JW);oi(fle,JW,1);var e6;(function(o){function e(t){switch(t){case cs.Ignore:return"severity-ignore "+pt.asClassName(Ee.info);case cs.Info:return pt.asClassName(Ee.info);case cs.Warning:return pt.asClassName(Ee.warning);case cs.Error:return pt.asClassName(Ee.error);default:return""}}o.className=e})(e6||(e6={}));var V7e=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},M0=function(o,e){return function(t,i){e(t,i,o)}},t6;class H7e{constructor(e,t,i,n,s){this._openerService=n,this._labelService=s,this._lines=0,this._longestLineLength=0,this._relatedDiagnostics=new WeakMap,this._disposables=new he,this._editor=t;const r=document.createElement("div");r.className="descriptioncontainer",this._messageBlock=document.createElement("div"),this._messageBlock.classList.add("message"),this._messageBlock.setAttribute("aria-live","assertive"),this._messageBlock.setAttribute("role","alert"),r.appendChild(this._messageBlock),this._relatedBlock=document.createElement("div"),r.appendChild(this._relatedBlock),this._disposables.add(ss(this._relatedBlock,"click",a=>{a.preventDefault();const l=this._relatedDiagnostics.get(a.target);l&&i(l)})),this._scrollable=new qne(r,{horizontal:1,vertical:1,useShadows:!1,horizontalScrollbarSize:6,verticalScrollbarSize:6}),e.appendChild(this._scrollable.getDomNode()),this._disposables.add(this._scrollable.onScroll(a=>{r.style.left=`-${a.scrollLeft}px`,r.style.top=`-${a.scrollTop}px`})),this._disposables.add(this._scrollable)}dispose(){cn(this._disposables)}update(e){const{source:t,message:i,relatedInformation:n,code:s}=e;let r=((t==null?void 0:t.length)||0)+2;s&&(typeof s=="string"?r+=s.length:r+=s.value.length);const a=Sh(i);this._lines=a.length,this._longestLineLength=0;for(const g of a)this._longestLineLength=Math.max(g.length+r,this._longestLineLength);Zo(this._messageBlock),this._messageBlock.setAttribute("aria-label",this.getAriaLabel(e)),this._editor.applyFontInfo(this._messageBlock);let l=this._messageBlock;for(const g of a)l=document.createElement("div"),l.innerText=g,g===""&&(l.style.height=this._messageBlock.style.lineHeight),this._messageBlock.appendChild(l);if(t||s){const g=document.createElement("span");if(g.classList.add("details"),l.appendChild(g),t){const p=document.createElement("span");p.innerText=t,p.classList.add("source"),g.appendChild(p)}if(s)if(typeof s=="string"){const p=document.createElement("span");p.innerText=`(${s})`,p.classList.add("code"),g.appendChild(p)}else{this._codeLink=ye("a.code-link"),this._codeLink.setAttribute("href",`${s.target.toString()}`),this._codeLink.onclick=_=>{this._openerService.open(s.target,{allowCommands:!0}),_.preventDefault(),_.stopPropagation()};const p=ge(this._codeLink,ye("span"));p.innerText=s.value,g.appendChild(this._codeLink)}}if(Zo(this._relatedBlock),this._editor.applyFontInfo(this._relatedBlock),Yo(n)){const g=this._relatedBlock.appendChild(document.createElement("div"));g.style.paddingTop=`${Math.floor(this._editor.getOption(67)*.66)}px`,this._lines+=1;for(const p of n){const _=document.createElement("div"),b=document.createElement("a");b.classList.add("filename"),b.innerText=`${this._labelService.getUriBasenameLabel(p.resource)}(${p.startLineNumber}, ${p.startColumn}): `,b.title=this._labelService.getUriLabel(p.resource),this._relatedDiagnostics.set(b,p);const y=document.createElement("span");y.innerText=p.message,_.appendChild(b),_.appendChild(y),this._lines+=1,g.appendChild(_)}}const c=this._editor.getOption(50),u=Math.ceil(c.typicalFullwidthCharacterWidth*this._longestLineLength*.75),f=c.lineHeight*this._lines;this._scrollable.setScrollDimensions({scrollWidth:u,scrollHeight:f})}layout(e,t){this._scrollable.getDomNode().style.height=`${e}px`,this._scrollable.getDomNode().style.width=`${t}px`,this._scrollable.setScrollDimensions({width:t,height:e})}getHeightInLines(){return Math.min(17,this._lines)}getAriaLabel(e){let t="";switch(e.severity){case es.Error:t=v("Error","Error");break;case es.Warning:t=v("Warning","Warning");break;case es.Info:t=v("Info","Info");break;case es.Hint:t=v("Hint","Hint");break}let i=v("marker aria","{0} at {1}. ",t,e.startLineNumber+":"+e.startColumn);const n=this._editor.getModel();return n&&e.startLineNumber<=n.getLineCount()&&e.startLineNumber>=1&&(i=`${n.getLineContent(e.startLineNumber)}, ${i}`),i}}let P1=t6=class extends HM{constructor(e,t,i,n,s,r,a){super(e,{showArrow:!0,showFrame:!0,isAccessible:!0,frameWidth:1},s),this._themeService=t,this._openerService=i,this._menuService=n,this._contextKeyService=r,this._labelService=a,this._callOnDispose=new he,this._onDidSelectRelatedInformation=new Y,this.onDidSelectRelatedInformation=this._onDidSelectRelatedInformation.event,this._severity=es.Warning,this._backgroundColor=ne.white,this._applyTheme(t.getColorTheme()),this._callOnDispose.add(t.onDidColorThemeChange(this._applyTheme.bind(this))),this.create()}_applyTheme(e){this._backgroundColor=e.getColor(j7e);let t=i6,i=z7e;this._severity===es.Warning?(t=jN,i=U7e):this._severity===es.Info&&(t=n6,i=$7e);const n=e.getColor(t),s=e.getColor(i);this.style({arrowColor:n,frameColor:n,headerBackgroundColor:s,primaryHeadingColor:e.getColor(Jae),secondaryHeadingColor:e.getColor(ele)})}_applyStyles(){this._parentContainer&&(this._parentContainer.style.backgroundColor=this._backgroundColor?this._backgroundColor.toString():""),super._applyStyles()}dispose(){this._callOnDispose.dispose(),super.dispose()}_fillHead(e){super._fillHead(e),this._disposables.add(this._actionbarWidget.actionRunner.onWillRun(n=>this.editor.focus()));const t=[],i=this._menuService.createMenu(t6.TitleMenu,this._contextKeyService);fP(i,void 0,t),this._actionbarWidget.push(t,{label:!1,icon:!0,index:0}),i.dispose()}_fillTitleIcon(e){this._icon=ge(e,ye(""))}_fillBody(e){this._parentContainer=e,e.classList.add("marker-widget"),this._parentContainer.tabIndex=0,this._parentContainer.setAttribute("role","tooltip"),this._container=document.createElement("div"),e.appendChild(this._container),this._message=new H7e(this._container,this.editor,t=>this._onDidSelectRelatedInformation.fire(t),this._openerService,this._labelService),this._disposables.add(this._message)}show(){throw new Error("call showAtMarker")}showAtMarker(e,t,i){this._container.classList.remove("stale"),this._message.update(e),this._severity=e.severity,this._applyTheme(this._themeService.getColorTheme());const n=A.lift(e),s=this.editor.getPosition(),r=s&&n.containsPosition(s)?s:n.getStartPosition();super.show(r,this.computeRequiredHeight());const a=this.editor.getModel();if(a){const l=i>1?v("problems","{0} of {1} problems",t,i):v("change","{0} of {1} problem",t,i);this.setTitle(fc(a.uri),l)}this._icon.className=`codicon ${e6.className(es.toSeverity(this._severity))}`,this.editor.revealPositionNearTop(r,0),this.editor.focus()}updateMarker(e){this._container.classList.remove("stale"),this._message.update(e)}showStale(){this._container.classList.add("stale"),this._relayout()}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._heightInPixel=e,this._message.layout(e,t),this._container.style.height=`${e}px`}_onWidth(e){this._message.layout(this._heightInPixel,e)}_relayout(){super._relayout(this.computeRequiredHeight())}computeRequiredHeight(){return 3+this._message.getHeightInLines()}};P1.TitleMenu=new P("gotoErrorTitleMenu");P1=t6=V7e([M0(1,Us),M0(2,wa),M0(3,Nl),M0(4,ct),M0(5,bt),M0(6,C1)],P1);const cee=px(Xu,RLe),dee=px(fr,mx),uee=px(fa,_x),i6=V("editorMarkerNavigationError.background",{dark:cee,light:cee,hcDark:Jt,hcLight:Jt},v("editorMarkerNavigationError","Editor marker navigation widget error color.")),z7e=V("editorMarkerNavigationError.headerBackground",{dark:at(i6,.1),light:at(i6,.1),hcDark:null,hcLight:null},v("editorMarkerNavigationErrorHeaderBackground","Editor marker navigation widget error heading background.")),jN=V("editorMarkerNavigationWarning.background",{dark:dee,light:dee,hcDark:Jt,hcLight:Jt},v("editorMarkerNavigationWarning","Editor marker navigation widget warning color.")),U7e=V("editorMarkerNavigationWarning.headerBackground",{dark:at(jN,.1),light:at(jN,.1),hcDark:"#0C141F",hcLight:at(jN,.2)},v("editorMarkerNavigationWarningBackground","Editor marker navigation widget warning heading background.")),n6=V("editorMarkerNavigationInfo.background",{dark:uee,light:uee,hcDark:Jt,hcLight:Jt},v("editorMarkerNavigationInfo","Editor marker navigation widget info color.")),$7e=V("editorMarkerNavigationInfo.headerBackground",{dark:at(n6,.1),light:at(n6,.1),hcDark:null,hcLight:null},v("editorMarkerNavigationInfoHeaderBackground","Editor marker navigation widget info heading background.")),j7e=V("editorMarkerNavigation.background",{dark:Zs,light:Zs,hcDark:Zs,hcLight:Zs},v("editorMarkerNavigationBackground","Editor marker navigation widget background."));var K7e=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},UT=function(o,e){return function(t,i){e(t,i,o)}},rL;let Dm=rL=class{static get(e){return e.getContribution(rL.ID)}constructor(e,t,i,n,s){this._markerNavigationService=t,this._contextKeyService=i,this._editorService=n,this._instantiationService=s,this._sessionDispoables=new he,this._editor=e,this._widgetVisible=gle.bindTo(this._contextKeyService)}dispose(){this._cleanUp(),this._sessionDispoables.dispose()}_cleanUp(){this._widgetVisible.reset(),this._sessionDispoables.clear(),this._widget=void 0,this._model=void 0}_getOrCreateModel(e){if(this._model&&this._model.matches(e))return this._model;let t=!1;return this._model&&(t=!0,this._cleanUp()),this._model=this._markerNavigationService.getMarkerList(e),t&&this._model.move(!0,this._editor.getModel(),this._editor.getPosition()),this._widget=this._instantiationService.createInstance(P1,this._editor),this._widget.onDidClose(()=>this.close(),this,this._sessionDispoables),this._widgetVisible.set(!0),this._sessionDispoables.add(this._model),this._sessionDispoables.add(this._widget),this._sessionDispoables.add(this._editor.onDidChangeCursorPosition(i=>{var n,s,r;(!(!((n=this._model)===null||n===void 0)&&n.selected)||!A.containsPosition((s=this._model)===null||s===void 0?void 0:s.selected.marker,i.position))&&((r=this._model)===null||r===void 0||r.resetIndex())})),this._sessionDispoables.add(this._model.onDidChange(()=>{if(!this._widget||!this._widget.position||!this._model)return;const i=this._model.find(this._editor.getModel().uri,this._widget.position);i?this._widget.updateMarker(i.marker):this._widget.showStale()})),this._sessionDispoables.add(this._widget.onDidSelectRelatedInformation(i=>{this._editorService.openCodeEditor({resource:i.resource,options:{pinned:!0,revealIfOpened:!0,selection:A.lift(i).collapseToStart()}},this._editor),this.close(!1)})),this._sessionDispoables.add(this._editor.onDidChangeModel(()=>this._cleanUp())),this._model}close(e=!0){this._cleanUp(),e&&this._editor.focus()}showAtMarker(e){if(this._editor.hasModel()){const t=this._getOrCreateModel(this._editor.getModel().uri);t.resetIndex(),t.move(!0,this._editor.getModel(),new Z(e.startLineNumber,e.startColumn)),t.selected&&this._widget.showAtMarker(t.selected.marker,t.selected.index,t.selected.total)}}async nagivate(e,t){var i,n;if(this._editor.hasModel()){const s=this._getOrCreateModel(t?void 0:this._editor.getModel().uri);if(s.move(e,this._editor.getModel(),this._editor.getPosition()),!s.selected)return;if(s.selected.marker.resource.toString()!==this._editor.getModel().uri.toString()){this._cleanUp();const r=await this._editorService.openCodeEditor({resource:s.selected.marker.resource,options:{pinned:!1,revealIfOpened:!0,selectionRevealType:2,selection:s.selected.marker}},this._editor);r&&((i=rL.get(r))===null||i===void 0||i.close(),(n=rL.get(r))===null||n===void 0||n.nagivate(e,t))}else this._widget.showAtMarker(s.selected.marker,s.selected.index,s.selected.total)}}};Dm.ID="editor.contrib.markerController";Dm=rL=K7e([UT(1,fle),UT(2,bt),UT(3,gi),UT(4,ct)],Dm);class qP extends Ke{constructor(e,t,i){super(i),this._next=e,this._multiFile=t}async run(e,t){var i;t.hasModel()&&((i=Dm.get(t))===null||i===void 0||i.nagivate(this._next,this._multiFile))}}class tm extends qP{constructor(){super(!0,!1,{id:tm.ID,label:tm.LABEL,alias:"Go to Next Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:W.focus,primary:578,weight:100},menuOpts:{menuId:P1.TitleMenu,title:tm.LABEL,icon:gs("marker-navigation-next",Ee.arrowDown,v("nextMarkerIcon","Icon for goto next marker.")),group:"navigation",order:1}})}}tm.ID="editor.action.marker.next";tm.LABEL=v("markerAction.next.label","Go to Next Problem (Error, Warning, Info)");class yv extends qP{constructor(){super(!1,!1,{id:yv.ID,label:yv.LABEL,alias:"Go to Previous Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:W.focus,primary:1602,weight:100},menuOpts:{menuId:P1.TitleMenu,title:yv.LABEL,icon:gs("marker-navigation-previous",Ee.arrowUp,v("previousMarkerIcon","Icon for goto previous marker.")),group:"navigation",order:2}})}}yv.ID="editor.action.marker.prev";yv.LABEL=v("markerAction.previous.label","Go to Previous Problem (Error, Warning, Info)");class q7e extends qP{constructor(){super(!0,!0,{id:"editor.action.marker.nextInFiles",label:v("markerAction.nextInFiles.label","Go to Next Problem in Files (Error, Warning, Info)"),alias:"Go to Next Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:W.focus,primary:66,weight:100},menuOpts:{menuId:P.MenubarGoMenu,title:v({key:"miGotoNextProblem",comment:["&& denotes a mnemonic"]},"Next &&Problem"),group:"6_problem_nav",order:1}})}}class G7e extends qP{constructor(){super(!1,!0,{id:"editor.action.marker.prevInFiles",label:v("markerAction.previousInFiles.label","Go to Previous Problem in Files (Error, Warning, Info)"),alias:"Go to Previous Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:W.focus,primary:1090,weight:100},menuOpts:{menuId:P.MenubarGoMenu,title:v({key:"miGotoPreviousProblem",comment:["&& denotes a mnemonic"]},"Previous &&Problem"),group:"6_problem_nav",order:2}})}}pi(Dm.ID,Dm,4);Ce(tm);Ce(yv);Ce(q7e);Ce(G7e);const gle=new Be("markersNavigationVisible",!1),Y7e=zs.bindToContribution(Dm.get);Me(new Y7e({id:"closeMarkersNavigation",precondition:gle,handler:o=>o.close(),kbOpts:{weight:150,kbExpr:W.focus,primary:9,secondary:[1033]}}));var Z7e=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},wB=function(o,e){return function(t,i){e(t,i,o)}};const Nc=ye;class Q7e{constructor(e,t,i){this.owner=e,this.range=t,this.marker=i}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}const hee={type:1,filter:{include:Pn.QuickFix},triggerAction:Ka.QuickFixHover};let s6=class{constructor(e,t,i,n){this._editor=e,this._markerDecorationsService=t,this._openerService=i,this._languageFeaturesService=n,this.hoverOrdinal=1,this.recentMarkerCodeActionsInfo=void 0}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1&&!e.supportsMarkerHover)return[];const i=this._editor.getModel(),n=e.range.startLineNumber,s=i.getLineMaxColumn(n),r=[];for(const a of t){const l=a.range.startLineNumber===n?a.range.startColumn:1,c=a.range.endLineNumber===n?a.range.endColumn:s,u=this._markerDecorationsService.getMarker(i.uri,a);if(!u)continue;const f=new A(e.range.startLineNumber,l,e.range.startLineNumber,c);r.push(new Q7e(this,f,u))}return r}renderHoverParts(e,t){if(!t.length)return J.None;const i=new he;t.forEach(s=>e.fragment.appendChild(this.renderMarkerHover(s,i)));const n=t.length===1?t[0]:t.sort((s,r)=>es.compare(s.marker.severity,r.marker.severity))[0];return this.renderMarkerStatusbar(e,n,i),i}renderMarkerHover(e,t){const i=Nc("div.hover-row"),n=ge(i,Nc("div.marker.hover-contents")),{source:s,message:r,code:a,relatedInformation:l}=e.marker;this._editor.applyFontInfo(n);const c=ge(n,Nc("span"));if(c.style.whiteSpace="pre-wrap",c.innerText=r,s||a)if(a&&typeof a!="string"){const u=Nc("span");if(s){const _=ge(u,Nc("span"));_.innerText=s}const f=ge(u,Nc("a.code-link"));f.setAttribute("href",a.target.toString()),t.add(oe(f,"click",_=>{this._openerService.open(a.target,{allowCommands:!0}),_.preventDefault(),_.stopPropagation()}));const g=ge(f,Nc("span"));g.innerText=a.value;const p=ge(n,u);p.style.opacity="0.6",p.style.paddingLeft="6px"}else{const u=ge(n,Nc("span"));u.style.opacity="0.6",u.style.paddingLeft="6px",u.innerText=s&&a?`${s}(${a})`:s||`(${a})`}if(Yo(l))for(const{message:u,resource:f,startLineNumber:g,startColumn:p}of l){const _=ge(n,Nc("div"));_.style.marginTop="8px";const b=ge(_,Nc("a"));b.innerText=`${fc(f)}(${g}, ${p}): `,b.style.cursor="pointer",t.add(oe(b,"click",S=>{S.stopPropagation(),S.preventDefault(),this._openerService&&this._openerService.open(f,{fromUserGesture:!0,editorOptions:{selection:{startLineNumber:g,startColumn:p}}}).catch(Nt)}));const y=ge(_,Nc("span"));y.innerText=u,this._editor.applyFontInfo(y)}return i}renderMarkerStatusbar(e,t,i){if(t.marker.severity===es.Error||t.marker.severity===es.Warning||t.marker.severity===es.Info){const n=Dm.get(this._editor);n&&e.statusBar.addAction({label:v("view problem","View Problem"),commandId:tm.ID,run:()=>{e.hide(),n.showAtMarker(t.marker),this._editor.focus()}})}if(!this._editor.getOption(91)){const n=e.statusBar.append(Nc("div"));this.recentMarkerCodeActionsInfo&&(cM.makeKey(this.recentMarkerCodeActionsInfo.marker)===cM.makeKey(t.marker)?this.recentMarkerCodeActionsInfo.hasCodeActions||(n.textContent=v("noQuickFixes","No quick fixes available")):this.recentMarkerCodeActionsInfo=void 0);const s=this.recentMarkerCodeActionsInfo&&!this.recentMarkerCodeActionsInfo.hasCodeActions?J.None:dm(()=>n.textContent=v("checkingForQuickFixes","Checking for quick fixes..."),200,i);n.textContent||(n.textContent="");const r=this.getCodeActions(t.marker);i.add(lt(()=>r.cancel())),r.then(a=>{if(s.dispose(),this.recentMarkerCodeActionsInfo={marker:t.marker,hasCodeActions:a.validActions.length>0},!this.recentMarkerCodeActionsInfo.hasCodeActions){a.dispose(),n.textContent=v("noQuickFixes","No quick fixes available");return}n.style.display="none";let l=!1;i.add(lt(()=>{l||a.dispose()})),e.statusBar.addAction({label:v("quick fixes","Quick Fix..."),commandId:sU,run:c=>{l=!0;const u=wm.get(this._editor),f=ws(c);e.hide(),u==null||u.showCodeActions(hee,a,{x:f.left,y:f.top,width:f.width,height:f.height})}})},Nt)}}getCodeActions(e){return Qs(t=>BL(this._languageFeaturesService.codeActionProvider,this._editor.getModel(),new A(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),hee,Yf.None,t))}};s6=Z7e([wB(1,pH),wB(2,wa),wB(3,Ze)],s6);const ple="editor.action.inlineSuggest.commit",mle="editor.action.inlineSuggest.showPrevious",_le="editor.action.inlineSuggest.showNext";var gU=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Rd=function(o,e){return function(t,i){e(t,i,o)}},KN;let o6=class extends J{constructor(e,t,i){super(),this.editor=e,this.model=t,this.instantiationService=i,this.alwaysShowToolbar=Gi(this.editor.onDidChangeConfiguration,()=>this.editor.getOption(62).showToolbar==="always"),this.sessionPosition=void 0,this.position=Dt(this,n=>{var s,r,a;const l=(s=this.model.read(n))===null||s===void 0?void 0:s.primaryGhostText.read(n);if(!this.alwaysShowToolbar.read(n)||!l||l.parts.length===0)return this.sessionPosition=void 0,null;const c=l.parts[0].column;this.sessionPosition&&this.sessionPosition.lineNumber!==l.lineNumber&&(this.sessionPosition=void 0);const u=new Z(l.lineNumber,Math.min(c,(a=(r=this.sessionPosition)===null||r===void 0?void 0:r.column)!==null&&a!==void 0?a:Number.MAX_SAFE_INTEGER));return this.sessionPosition=u,u}),this._register(gc((n,s)=>{const r=this.model.read(n);if(!r||!this.alwaysShowToolbar.read(n))return;const a=s.add(this.instantiationService.createInstance(km,this.editor,!0,this.position,r.selectedInlineCompletionIndex,r.inlineCompletionsCount,r.selectedInlineCompletion.map(l=>{var c;return(c=l==null?void 0:l.inlineCompletion.source.inlineCompletions.commands)!==null&&c!==void 0?c:[]})));e.addContentWidget(a),s.add(lt(()=>e.removeContentWidget(a))),s.add(zt(l=>{this.position.read(l)&&r.lastTriggerKind.read(l)!==jf.Explicit&&r.triggerExplicitly()}))}))}};o6=gU([Rd(2,ct)],o6);const X7e=gs("inline-suggestion-hints-next",Ee.chevronRight,v("parameterHintsNextIcon","Icon for show next parameter hint.")),J7e=gs("inline-suggestion-hints-previous",Ee.chevronLeft,v("parameterHintsPreviousIcon","Icon for show previous parameter hint."));let km=KN=class extends J{static get dropDownVisible(){return this._dropDownVisible}createCommandAction(e,t,i){const n=new za(e,t,i,!0,()=>this._commandService.executeCommand(e)),s=this.keybindingService.lookupKeybinding(e,this._contextKeyService);let r=t;return s&&(r=v({key:"content",comment:["A label","A keybinding"]},"{0} ({1})",t,s.getLabel())),n.tooltip=r,n}constructor(e,t,i,n,s,r,a,l,c,u,f){super(),this.editor=e,this.withBorder=t,this._position=i,this._currentSuggestionIdx=n,this._suggestionCount=s,this._extraCommands=r,this._commandService=a,this.keybindingService=c,this._contextKeyService=u,this._menuService=f,this.id=`InlineSuggestionHintsContentWidget${KN.id++}`,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this.nodes=Ii("div.inlineSuggestionsHints",{className:this.withBorder?".withBorder":""},[Ii("div@toolBar")]),this.previousAction=this.createCommandAction(mle,v("previous","Previous"),pt.asClassName(J7e)),this.availableSuggestionCountAction=new za("inlineSuggestionHints.availableSuggestionCount","",void 0,!1),this.nextAction=this.createCommandAction(_le,v("next","Next"),pt.asClassName(X7e)),this.inlineCompletionsActionsMenus=this._register(this._menuService.createMenu(P.InlineCompletionsActions,this._contextKeyService)),this.clearAvailableSuggestionCountLabelDebounced=this._register(new Ui(()=>{this.availableSuggestionCountAction.label=""},100)),this.disableButtonsDebounced=this._register(new Ui(()=>{this.previousAction.enabled=this.nextAction.enabled=!1},100)),this.lastCommands=[],this.toolBar=this._register(l.createInstance(r6,this.nodes.toolBar,P.InlineSuggestionToolbar,{menuOptions:{renderShortTitle:!0},toolbarOptions:{primaryGroup:g=>g.startsWith("primary")},actionViewItemProvider:(g,p)=>{if(g instanceof Dl)return l.createInstance(t9e,g,void 0);if(g===this.availableSuggestionCountAction){const _=new e9e(void 0,g,{label:!0,icon:!1});return _.setClass("availableSuggestionCount"),_}},telemetrySource:"InlineSuggestionToolbar"})),this.toolBar.setPrependedPrimaryActions([this.previousAction,this.availableSuggestionCountAction,this.nextAction]),this._register(this.toolBar.onDidChangeDropdownVisibility(g=>{KN._dropDownVisible=g})),this._register(zt(g=>{this._position.read(g),this.editor.layoutContentWidget(this)})),this._register(zt(g=>{const p=this._suggestionCount.read(g),_=this._currentSuggestionIdx.read(g);p!==void 0?(this.clearAvailableSuggestionCountLabelDebounced.cancel(),this.availableSuggestionCountAction.label=`${_+1}/${p}`):this.clearAvailableSuggestionCountLabelDebounced.schedule(),p!==void 0&&p>1?(this.disableButtonsDebounced.cancel(),this.previousAction.enabled=this.nextAction.enabled=!0):this.disableButtonsDebounced.schedule()})),this._register(zt(g=>{const p=this._extraCommands.read(g);if(zn(this.lastCommands,p))return;this.lastCommands=p;const _=p.map(b=>({class:void 0,id:b.id,enabled:!0,tooltip:b.tooltip||"",label:b.title,run:y=>this._commandService.executeCommand(b.id)}));for(const[b,y]of this.inlineCompletionsActionsMenus.getActions())for(const S of y)S instanceof Dl&&_.push(S);_.length>0&&_.unshift(new Os),this.toolBar.setAdditionalSecondaryActions(_)}))}getId(){return this.id}getDomNode(){return this.nodes.root}getPosition(){return{position:this._position.get(),preference:[1,2],positionAffinity:3}}};km._dropDownVisible=!1;km.id=0;km=KN=gU([Rd(6,Un),Rd(7,ct),Rd(8,Bi),Rd(9,bt),Rd(10,Nl)],km);class e9e extends x1{constructor(){super(...arguments),this._className=void 0}setClass(e){this._className=e}render(e){super.render(e),this._className&&e.classList.add(this._className)}updateTooltip(){}}let t9e=class extends bm{updateLabel(){const e=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!e)return super.updateLabel();if(this.label){const t=Ii("div.keybinding").root;this._register(new nw(t,Va,{disableTitle:!0,...nre})).set(e),this.label.textContent=this._action.label,this.label.appendChild(t),this.label.classList.add("inlineSuggestionStatusBarItemLabel")}}updateTooltip(){}},r6=class extends eD{constructor(e,t,i,n,s,r,a,l){super(e,{resetMenu:t,...i},n,s,r,a,l),this.menuId=t,this.options2=i,this.menuService=n,this.contextKeyService=s,this.menu=this._store.add(this.menuService.createMenu(this.menuId,this.contextKeyService,{emitEventsForSubmenuChanges:!0})),this.additionalActions=[],this.prependedPrimaryActions=[],this._store.add(this.menu.onDidChange(()=>this.updateToolbar())),this.updateToolbar()}updateToolbar(){var e,t,i,n,s,r,a;const l=[],c=[];fP(this.menu,(e=this.options2)===null||e===void 0?void 0:e.menuOptions,{primary:l,secondary:c},(i=(t=this.options2)===null||t===void 0?void 0:t.toolbarOptions)===null||i===void 0?void 0:i.primaryGroup,(s=(n=this.options2)===null||n===void 0?void 0:n.toolbarOptions)===null||s===void 0?void 0:s.shouldInlineSubmenu,(a=(r=this.options2)===null||r===void 0?void 0:r.toolbarOptions)===null||a===void 0?void 0:a.useSeparatorsInPrimaryActions),c.push(...this.additionalActions),l.unshift(...this.prependedPrimaryActions),this.setActions(l,c)}setPrependedPrimaryActions(e){zn(this.prependedPrimaryActions,e,(t,i)=>t===i)||(this.prependedPrimaryActions=e,this.updateToolbar())}setAdditionalSecondaryActions(e){zn(this.additionalActions,e,(t,i)=>t===i)||(this.additionalActions=e,this.updateToolbar())}};r6=gU([Rd(3,Nl),Rd(4,bt),Rd(5,Ya),Rd(6,Bi),Rd(7,pr)],r6);var i9e=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},$T=function(o,e){return function(t,i){e(t,i,o)}},a6;const n9e=!1;let ba=a6=class extends J{constructor(e,t,i,n,s){super(),this._editor=e,this._instantiationService=t,this._openerService=i,this._languageService=n,this._keybindingService=s,this._listenersStore=new he,this._hoverState={mouseDown:!1,contentHoverFocused:!1,activatedByDecoratorClick:!1},this._reactToEditorMouseMoveRunner=this._register(new Ui(()=>this._reactToEditorMouseMove(this._mouseMoveEvent),0)),this._hookListeners(),this._register(this._editor.onDidChangeConfiguration(r=>{r.hasChanged(60)&&(this._unhookListeners(),this._hookListeners())}))}static get(e){return e.getContribution(a6.ID)}_hookListeners(){const e=this._editor.getOption(60);this._hoverSettings={enabled:e.enabled,sticky:e.sticky,hidingDelay:e.delay},e.enabled?(this._listenersStore.add(this._editor.onMouseDown(t=>this._onEditorMouseDown(t))),this._listenersStore.add(this._editor.onMouseUp(()=>this._onEditorMouseUp())),this._listenersStore.add(this._editor.onMouseMove(t=>this._onEditorMouseMove(t))),this._listenersStore.add(this._editor.onKeyDown(t=>this._onKeyDown(t)))):(this._listenersStore.add(this._editor.onMouseMove(t=>this._onEditorMouseMove(t))),this._listenersStore.add(this._editor.onKeyDown(t=>this._onKeyDown(t)))),this._listenersStore.add(this._editor.onMouseLeave(t=>this._onEditorMouseLeave(t))),this._listenersStore.add(this._editor.onDidChangeModel(()=>{this._cancelScheduler(),this._hideWidgets()})),this._listenersStore.add(this._editor.onDidChangeModelContent(()=>this._cancelScheduler())),this._listenersStore.add(this._editor.onDidScrollChange(t=>this._onEditorScrollChanged(t)))}_unhookListeners(){this._listenersStore.clear()}_cancelScheduler(){this._mouseMoveEvent=void 0,this._reactToEditorMouseMoveRunner.cancel()}_onEditorScrollChanged(e){(e.scrollTopChanged||e.scrollLeftChanged)&&this._hideWidgets()}_onEditorMouseDown(e){var t;this._hoverState.mouseDown=!0;const i=e.target;if(i.type===9&&i.detail===em.ID){this._hoverState.contentHoverFocused=!0;return}i.type===12&&i.detail===KC.ID||(i.type!==12&&(this._hoverState.contentHoverFocused=!1),!(!((t=this._contentWidget)===null||t===void 0)&&t.widget.isResizing)&&this._hideWidgets())}_onEditorMouseUp(){this._hoverState.mouseDown=!1}_onEditorMouseLeave(e){var t,i;this._cancelScheduler();const n=e.event.browserEvent.relatedTarget;!((t=this._contentWidget)===null||t===void 0)&&t.widget.isResizing||!((i=this._contentWidget)===null||i===void 0)&&i.containsNode(n)||this._hideWidgets()}_isMouseOverWidget(e){var t,i,n,s,r;const a=e.target,l=this._hoverSettings.sticky;return!!(l&&a.type===9&&a.detail===em.ID||l&&(!((t=this._contentWidget)===null||t===void 0)&&t.containsNode((i=e.event.browserEvent.view)===null||i===void 0?void 0:i.document.activeElement))&&!(!((s=(n=e.event.browserEvent.view)===null||n===void 0?void 0:n.getSelection())===null||s===void 0)&&s.isCollapsed)||!l&&a.type===9&&a.detail===em.ID&&(!((r=this._contentWidget)===null||r===void 0)&&r.isColorPickerVisible)||l&&a.type===12&&a.detail===KC.ID)}_onEditorMouseMove(e){var t,i,n,s;if(this._mouseMoveEvent=e,!((t=this._contentWidget)===null||t===void 0)&&t.isFocused||!((i=this._contentWidget)===null||i===void 0)&&i.isResizing||this._hoverState.mouseDown&&this._hoverState.contentHoverFocused)return;const r=this._hoverSettings.sticky;if(r&&(!((n=this._contentWidget)===null||n===void 0)&&n.isVisibleFromKeyboard))return;if(this._isMouseOverWidget(e)){this._reactToEditorMouseMoveRunner.cancel();return}const l=this._hoverSettings.hidingDelay;if(!((s=this._contentWidget)===null||s===void 0)&&s.isVisible&&r&&l>0){this._reactToEditorMouseMoveRunner.isScheduled()||this._reactToEditorMouseMoveRunner.schedule(l);return}this._reactToEditorMouseMove(e)}_reactToEditorMouseMove(e){var t,i,n,s;if(!e)return;const r=e.target,a=(t=r.element)===null||t===void 0?void 0:t.classList.contains("colorpicker-color-decoration"),l=this._editor.getOption(148),c=this._hoverSettings.enabled,u=this._hoverState.activatedByDecoratorClick;if(a&&(l==="click"&&!u||l==="hover"&&!c&&!n9e||l==="clickAndHover"&&!c&&!u)||!a&&!c&&!u){this._hideWidgets();return}if(this._getOrCreateContentWidget().showsOrWillShow(e)){(i=this._glyphWidget)===null||i===void 0||i.hide();return}if(r.type===2&&r.position&&r.detail.glyphMarginLane){(n=this._contentWidget)===null||n===void 0||n.hide(),this._getOrCreateGlyphWidget().startShowingAt(r.position.lineNumber,r.detail.glyphMarginLane);return}if(r.type===3&&r.position){(s=this._contentWidget)===null||s===void 0||s.hide(),this._getOrCreateGlyphWidget().startShowingAt(r.position.lineNumber,"lineNo");return}this._hideWidgets()}_onKeyDown(e){var t;if(!this._editor.hasModel())return;const i=this._keybindingService.softDispatch(e,this._editor.getDomNode()),n=i.kind===1||i.kind===2&&i.commandId==="editor.action.showHover"&&((t=this._contentWidget)===null||t===void 0?void 0:t.isVisible);e.keyCode===5||e.keyCode===6||e.keyCode===57||e.keyCode===4||n||this._hideWidgets()}_hideWidgets(){var e,t,i;this._hoverState.mouseDown&&this._hoverState.contentHoverFocused&&(!((e=this._contentWidget)===null||e===void 0)&&e.isColorPickerVisible)||km.dropDownVisible||(this._hoverState.activatedByDecoratorClick=!1,this._hoverState.contentHoverFocused=!1,(t=this._glyphWidget)===null||t===void 0||t.hide(),(i=this._contentWidget)===null||i===void 0||i.hide())}_getOrCreateContentWidget(){return this._contentWidget||(this._contentWidget=this._instantiationService.createInstance(zM,this._editor)),this._contentWidget}_getOrCreateGlyphWidget(){return this._glyphWidget||(this._glyphWidget=new KC(this._editor,this._languageService,this._openerService)),this._glyphWidget}showContentHover(e,t,i,n,s=!1){this._hoverState.activatedByDecoratorClick=s,this._getOrCreateContentWidget().startShowingAtRange(e,t,i,n)}focus(){var e;(e=this._contentWidget)===null||e===void 0||e.focus()}scrollUp(){var e;(e=this._contentWidget)===null||e===void 0||e.scrollUp()}scrollDown(){var e;(e=this._contentWidget)===null||e===void 0||e.scrollDown()}scrollLeft(){var e;(e=this._contentWidget)===null||e===void 0||e.scrollLeft()}scrollRight(){var e;(e=this._contentWidget)===null||e===void 0||e.scrollRight()}pageUp(){var e;(e=this._contentWidget)===null||e===void 0||e.pageUp()}pageDown(){var e;(e=this._contentWidget)===null||e===void 0||e.pageDown()}goToTop(){var e;(e=this._contentWidget)===null||e===void 0||e.goToTop()}goToBottom(){var e;(e=this._contentWidget)===null||e===void 0||e.goToBottom()}get isColorPickerVisible(){var e;return(e=this._contentWidget)===null||e===void 0?void 0:e.isColorPickerVisible}get isHoverVisible(){var e;return(e=this._contentWidget)===null||e===void 0?void 0:e.isVisible}dispose(){var e,t;super.dispose(),this._unhookListeners(),this._listenersStore.dispose(),(e=this._glyphWidget)===null||e===void 0||e.dispose(),(t=this._contentWidget)===null||t===void 0||t.dispose()}};ba.ID="editor.contrib.hover";ba=a6=i9e([$T(1,ct),$T(2,wa),$T(3,xn),$T(4,Bi)],ba);var bd;(function(o){o.NoAutoFocus="noAutoFocus",o.FocusIfVisible="focusIfVisible",o.AutoFocusImmediately="autoFocusImmediately"})(bd||(bd={}));class s9e extends Ke{constructor(){super({id:"editor.action.showHover",label:v({key:"showOrFocusHover",comment:["Label for action that will trigger the showing/focusing of a hover in the editor.","If the hover is not visible, it will show the hover.","This allows for users to show the hover without using the mouse."]},"Show or Focus Hover"),metadata:{description:"Show or Focus Hover",args:[{name:"args",schema:{type:"object",properties:{focus:{description:"Controls if and when the hover should take focus upon being triggered by this action.",enum:[bd.NoAutoFocus,bd.FocusIfVisible,bd.AutoFocusImmediately],enumDescriptions:[v("showOrFocusHover.focus.noAutoFocus","The hover will not automatically take focus."),v("showOrFocusHover.focus.focusIfVisible","The hover will take focus only if it is already visible."),v("showOrFocusHover.focus.autoFocusImmediately","The hover will automatically take focus when it appears.")],default:bd.FocusIfVisible}}}}]},alias:"Show or Focus Hover",precondition:void 0,kbOpts:{kbExpr:W.editorTextFocus,primary:Fs(2089,2087),weight:100}})}run(e,t,i){if(!t.hasModel())return;const n=ba.get(t);if(!n)return;const s=i==null?void 0:i.focus;let r=bd.FocusIfVisible;Object.values(bd).includes(s)?r=s:typeof s=="boolean"&&s&&(r=bd.AutoFocusImmediately);const a=c=>{const u=t.getPosition(),f=new A(u.lineNumber,u.column,u.lineNumber,u.column);n.showContentHover(f,1,1,c)},l=t.getOption(2)===2;n.isHoverVisible?r!==bd.NoAutoFocus?n.focus():a(l):a(l||r===bd.AutoFocusImmediately)}}class o9e extends Ke{constructor(){super({id:"editor.action.showDefinitionPreviewHover",label:v({key:"showDefinitionPreviewHover",comment:["Label for action that will trigger the showing of definition preview hover in the editor.","This allows for users to show the definition preview hover without using the mouse."]},"Show Definition Preview Hover"),alias:"Show Definition Preview Hover",precondition:void 0})}run(e,t){const i=ba.get(t);if(!i)return;const n=t.getPosition();if(!n)return;const s=new A(n.lineNumber,n.column,n.lineNumber,n.column),r=Gv.get(t);if(!r)return;r.startFindDefinitionFromCursor(n).then(()=>{i.showContentHover(s,1,1,!0)})}}class r9e extends Ke{constructor(){super({id:"editor.action.scrollUpHover",label:v({key:"scrollUpHover",comment:["Action that allows to scroll up in the hover widget with the up arrow when the hover widget is focused."]},"Scroll Up Hover"),alias:"Scroll Up Hover",precondition:W.hoverFocused,kbOpts:{kbExpr:W.hoverFocused,primary:16,weight:100}})}run(e,t){const i=ba.get(t);i&&i.scrollUp()}}class a9e extends Ke{constructor(){super({id:"editor.action.scrollDownHover",label:v({key:"scrollDownHover",comment:["Action that allows to scroll down in the hover widget with the up arrow when the hover widget is focused."]},"Scroll Down Hover"),alias:"Scroll Down Hover",precondition:W.hoverFocused,kbOpts:{kbExpr:W.hoverFocused,primary:18,weight:100}})}run(e,t){const i=ba.get(t);i&&i.scrollDown()}}class l9e extends Ke{constructor(){super({id:"editor.action.scrollLeftHover",label:v({key:"scrollLeftHover",comment:["Action that allows to scroll left in the hover widget with the left arrow when the hover widget is focused."]},"Scroll Left Hover"),alias:"Scroll Left Hover",precondition:W.hoverFocused,kbOpts:{kbExpr:W.hoverFocused,primary:15,weight:100}})}run(e,t){const i=ba.get(t);i&&i.scrollLeft()}}class c9e extends Ke{constructor(){super({id:"editor.action.scrollRightHover",label:v({key:"scrollRightHover",comment:["Action that allows to scroll right in the hover widget with the right arrow when the hover widget is focused."]},"Scroll Right Hover"),alias:"Scroll Right Hover",precondition:W.hoverFocused,kbOpts:{kbExpr:W.hoverFocused,primary:17,weight:100}})}run(e,t){const i=ba.get(t);i&&i.scrollRight()}}class d9e extends Ke{constructor(){super({id:"editor.action.pageUpHover",label:v({key:"pageUpHover",comment:["Action that allows to page up in the hover widget with the page up command when the hover widget is focused."]},"Page Up Hover"),alias:"Page Up Hover",precondition:W.hoverFocused,kbOpts:{kbExpr:W.hoverFocused,primary:11,secondary:[528],weight:100}})}run(e,t){const i=ba.get(t);i&&i.pageUp()}}class u9e extends Ke{constructor(){super({id:"editor.action.pageDownHover",label:v({key:"pageDownHover",comment:["Action that allows to page down in the hover widget with the page down command when the hover widget is focused."]},"Page Down Hover"),alias:"Page Down Hover",precondition:W.hoverFocused,kbOpts:{kbExpr:W.hoverFocused,primary:12,secondary:[530],weight:100}})}run(e,t){const i=ba.get(t);i&&i.pageDown()}}class h9e extends Ke{constructor(){super({id:"editor.action.goToTopHover",label:v({key:"goToTopHover",comment:["Action that allows to go to the top of the hover widget with the home command when the hover widget is focused."]},"Go To Top Hover"),alias:"Go To Bottom Hover",precondition:W.hoverFocused,kbOpts:{kbExpr:W.hoverFocused,primary:14,secondary:[2064],weight:100}})}run(e,t){const i=ba.get(t);i&&i.goToTop()}}class f9e extends Ke{constructor(){super({id:"editor.action.goToBottomHover",label:v({key:"goToBottomHover",comment:["Action that allows to go to the bottom in the hover widget with the end command when the hover widget is focused."]},"Go To Bottom Hover"),alias:"Go To Bottom Hover",precondition:W.hoverFocused,kbOpts:{kbExpr:W.hoverFocused,primary:13,secondary:[2066],weight:100}})}run(e,t){const i=ba.get(t);i&&i.goToBottom()}}pi(ba.ID,ba,2);Ce(s9e);Ce(o9e);Ce(r9e);Ce(a9e);Ce(l9e);Ce(c9e);Ce(d9e);Ce(u9e);Ce(h9e);Ce(f9e);zm.register(jM);zm.register(s6);_c((o,e)=>{const t=o.getColor(Mne);t&&(e.addRule(`.monaco-editor .monaco-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${t.transparent(.5)}; }`),e.addRule(`.monaco-editor .monaco-hover hr { border-top: 1px solid ${t.transparent(.5)}; }`),e.addRule(`.monaco-editor .monaco-hover hr { border-bottom: 0px solid ${t.transparent(.5)}; }`))});class l6 extends J{constructor(e){super(),this._editor=e,this._register(e.onMouseDown(t=>this.onMouseDown(t)))}dispose(){super.dispose()}onMouseDown(e){const t=this._editor.getOption(148);if(t!=="click"&&t!=="clickAndHover")return;const i=e.target;if(i.type!==6||!i.detail.injectedText||i.detail.injectedText.options.attachedData!==Uae||!i.range)return;const n=this._editor.getContribution(ba.ID);if(n&&!n.isColorPickerVisible){const s=new A(i.range.startLineNumber,i.range.startColumn+1,i.range.endLineNumber,i.range.endColumn+1);n.showContentHover(s,1,0,!1,!0)}}}l6.ID="editor.contrib.colorContribution";pi(l6.ID,l6,2);zm.register(VM);var vle=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Ed=function(o,e){return function(t,i){e(t,i,o)}},c6,d6;let Em=c6=class extends J{constructor(e,t,i,n,s,r,a){super(),this._editor=e,this._modelService=i,this._keybindingService=n,this._instantiationService=s,this._languageFeatureService=r,this._languageConfigurationService=a,this._standaloneColorPickerWidget=null,this._standaloneColorPickerVisible=W.standaloneColorPickerVisible.bindTo(t),this._standaloneColorPickerFocused=W.standaloneColorPickerFocused.bindTo(t)}showOrFocus(){var e;this._editor.hasModel()&&(this._standaloneColorPickerVisible.get()?this._standaloneColorPickerFocused.get()||(e=this._standaloneColorPickerWidget)===null||e===void 0||e.focus():this._standaloneColorPickerWidget=new qM(this._editor,this._standaloneColorPickerVisible,this._standaloneColorPickerFocused,this._instantiationService,this._modelService,this._keybindingService,this._languageFeatureService,this._languageConfigurationService))}hide(){var e;this._standaloneColorPickerFocused.set(!1),this._standaloneColorPickerVisible.set(!1),(e=this._standaloneColorPickerWidget)===null||e===void 0||e.hide(),this._editor.focus()}insertColor(){var e;(e=this._standaloneColorPickerWidget)===null||e===void 0||e.updateEditor(),this.hide()}static get(e){return e.getContribution(c6.ID)}};Em.ID="editor.contrib.standaloneColorPickerController";Em=c6=vle([Ed(1,bt),Ed(2,Fn),Ed(3,Bi),Ed(4,ct),Ed(5,Ze),Ed(6,dn)],Em);pi(Em.ID,Em,1);const fee=8,g9e=22;let qM=d6=class extends J{constructor(e,t,i,n,s,r,a,l){var c;super(),this._editor=e,this._standaloneColorPickerVisible=t,this._standaloneColorPickerFocused=i,this._modelService=s,this._keybindingService=r,this._languageFeaturesService=a,this._languageConfigurationService=l,this.allowEditorOverflow=!0,this._position=void 0,this._body=document.createElement("div"),this._colorHover=null,this._selectionSetInEditor=!1,this._onResult=this._register(new Y),this.onResult=this._onResult.event,this._standaloneColorPickerVisible.set(!0),this._standaloneColorPickerParticipant=n.createInstance(rD,this._editor),this._position=(c=this._editor._getViewModel())===null||c===void 0?void 0:c.getPrimaryCursorState().modelState.position;const u=this._editor.getSelection(),f=u?{startLineNumber:u.startLineNumber,startColumn:u.startColumn,endLineNumber:u.endLineNumber,endColumn:u.endColumn}:{startLineNumber:0,endLineNumber:0,endColumn:0,startColumn:0},g=this._register(Kd(this._body));this._register(g.onDidBlur(p=>{this.hide()})),this._register(g.onDidFocus(p=>{this.focus()})),this._register(this._editor.onDidChangeCursorPosition(()=>{this._selectionSetInEditor?this._selectionSetInEditor=!1:this.hide()})),this._register(this._editor.onMouseMove(p=>{var _;const b=(_=p.target.element)===null||_===void 0?void 0:_.classList;b&&b.contains("colorpicker-color-decoration")&&this.hide()})),this._register(this.onResult(p=>{this._render(p.value,p.foundInEditor)})),this._start(f),this._body.style.zIndex="50",this._editor.addContentWidget(this)}updateEditor(){this._colorHover&&this._standaloneColorPickerParticipant.updateEditorModel(this._colorHover)}getId(){return d6.ID}getDomNode(){return this._body}getPosition(){if(!this._position)return null;const e=this._editor.getOption(60).above;return{position:this._position,secondaryPosition:this._position,preference:e?[1,2]:[2,1],positionAffinity:2}}hide(){this.dispose(),this._standaloneColorPickerVisible.set(!1),this._standaloneColorPickerFocused.set(!1),this._editor.removeContentWidget(this),this._editor.focus()}focus(){this._standaloneColorPickerFocused.set(!0),this._body.focus()}async _start(e){const t=await this._computeAsync(e);t&&this._onResult.fire(new p9e(t.result,t.foundInEditor))}async _computeAsync(e){if(!this._editor.hasModel())return null;const t={range:e,color:{red:0,green:0,blue:0,alpha:1}},i=await this._standaloneColorPickerParticipant.createColorHover(t,new lU(this._modelService,this._languageConfigurationService),this._languageFeaturesService.colorProvider);return i?{result:i.colorHover,foundInEditor:i.foundInEditor}:null}_render(e,t){const i=document.createDocumentFragment(),n=this._register(new UM(this._keybindingService));let s;const r={fragment:i,statusBar:n,setColorPicker:b=>s=b,onContentsChanged:()=>{},hide:()=>this.hide()};if(this._colorHover=e,this._register(this._standaloneColorPickerParticipant.renderHoverParts(r,[e])),s===void 0)return;this._body.classList.add("standalone-colorpicker-body"),this._body.style.maxHeight=Math.max(this._editor.getLayoutInfo().height/4,250)+"px",this._body.style.maxWidth=Math.max(this._editor.getLayoutInfo().width*.66,500)+"px",this._body.tabIndex=0,this._body.appendChild(i),s.layout();const a=s.body,l=a.saturationBox.domNode.clientWidth,c=a.domNode.clientWidth-l-g9e-fee,u=s.body.enterButton;u==null||u.onClicked(()=>{this.updateEditor(),this.hide()});const f=s.header,g=f.pickedColorNode;g.style.width=l+fee+"px";const p=f.originalColorNode;p.style.width=c+"px";const _=s.header.closeButton;_==null||_.onClicked(()=>{this.hide()}),t&&(u&&(u.button.textContent="Replace"),this._selectionSetInEditor=!0,this._editor.setSelection(e.range)),this._editor.layoutContentWidget(this)}};qM.ID="editor.contrib.standaloneColorPickerWidget";qM=d6=vle([Ed(3,ct),Ed(4,Fn),Ed(5,Bi),Ed(6,Ze),Ed(7,dn)],qM);class p9e{constructor(e,t){this.value=e,this.foundInEditor=t}}class m9e extends iu{constructor(){super({id:"editor.action.showOrFocusStandaloneColorPicker",title:{...di("showOrFocusStandaloneColorPicker","Show or Focus Standalone Color Picker"),mnemonicTitle:v({key:"mishowOrFocusStandaloneColorPicker",comment:["&& denotes a mnemonic"]},"&&Show or Focus Standalone Color Picker")},precondition:void 0,menu:[{id:P.CommandPalette}]})}runEditorCommand(e,t){var i;(i=Em.get(t))===null||i===void 0||i.showOrFocus()}}class _9e extends Ke{constructor(){super({id:"editor.action.hideColorPicker",label:v({key:"hideColorPicker",comment:["Action that hides the color picker"]},"Hide the Color Picker"),alias:"Hide the Color Picker",precondition:W.standaloneColorPickerVisible.isEqualTo(!0),kbOpts:{primary:9,weight:100}})}run(e,t){var i;(i=Em.get(t))===null||i===void 0||i.hide()}}class v9e extends Ke{constructor(){super({id:"editor.action.insertColorWithStandaloneColorPicker",label:v({key:"insertColorWithStandaloneColorPicker",comment:["Action that inserts color with standalone color picker"]},"Insert Color with Standalone Color Picker"),alias:"Insert Color with Standalone Color Picker",precondition:W.standaloneColorPickerFocused.isEqualTo(!0),kbOpts:{primary:3,weight:100}})}run(e,t){var i;(i=Em.get(t))===null||i===void 0||i.insertColor()}}Ce(_9e);Ce(v9e);en(m9e);class Hp{constructor(e,t,i){this.languageConfigurationService=i,this._selection=e,this._insertSpace=t,this._usedEndToken=null}static _haystackHasNeedleAtOffset(e,t,i){if(i<0)return!1;const n=t.length,s=e.length;if(i+n>s)return!1;for(let r=0;r<n;r++){const a=e.charCodeAt(i+r),l=t.charCodeAt(r);if(a!==l&&!(a>=65&&a<=90&&a+32===l)&&!(l>=65&&l<=90&&l+32===a))return!1}return!0}_createOperationsForBlockComment(e,t,i,n,s,r){const a=e.startLineNumber,l=e.startColumn,c=e.endLineNumber,u=e.endColumn,f=s.getLineContent(a),g=s.getLineContent(c);let p=f.lastIndexOf(t,l-1+t.length),_=g.indexOf(i,u-1-i.length);if(p!==-1&&_!==-1)if(a===c)f.substring(p+t.length,_).indexOf(i)>=0&&(p=-1,_=-1);else{const y=f.substring(p+t.length),S=g.substring(0,_);(y.indexOf(i)>=0||S.indexOf(i)>=0)&&(p=-1,_=-1)}let b;p!==-1&&_!==-1?(n&&p+t.length<f.length&&f.charCodeAt(p+t.length)===32&&(t=t+" "),n&&_>0&&g.charCodeAt(_-1)===32&&(i=" "+i,_-=1),b=Hp._createRemoveBlockCommentOperations(new A(a,p+t.length+1,c,_+1),t,i)):(b=Hp._createAddBlockCommentOperations(e,t,i,this._insertSpace),this._usedEndToken=b.length===1?i:null);for(const y of b)r.addTrackedEditOperation(y.range,y.text)}static _createRemoveBlockCommentOperations(e,t,i){const n=[];return A.isEmpty(e)?n.push(On.delete(new A(e.startLineNumber,e.startColumn-t.length,e.endLineNumber,e.endColumn+i.length))):(n.push(On.delete(new A(e.startLineNumber,e.startColumn-t.length,e.startLineNumber,e.startColumn))),n.push(On.delete(new A(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn+i.length)))),n}static _createAddBlockCommentOperations(e,t,i,n){const s=[];return A.isEmpty(e)?s.push(On.replace(new A(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),t+"  "+i)):(s.push(On.insert(new Z(e.startLineNumber,e.startColumn),t+(n?" ":""))),s.push(On.insert(new Z(e.endLineNumber,e.endColumn),(n?" ":"")+i))),s}getEditOperations(e,t){const i=this._selection.startLineNumber,n=this._selection.startColumn;e.tokenization.tokenizeIfCheap(i);const s=e.getLanguageIdAtPosition(i,n),r=this.languageConfigurationService.getLanguageConfiguration(s).comments;!r||!r.blockCommentStartToken||!r.blockCommentEndToken||this._createOperationsForBlockComment(this._selection,r.blockCommentStartToken,r.blockCommentEndToken,this._insertSpace,e,t)}computeCursorState(e,t){const i=t.getInverseEditOperations();if(i.length===2){const n=i[0],s=i[1];return new Xe(n.range.endLineNumber,n.range.endColumn,s.range.startLineNumber,s.range.startColumn)}else{const n=i[0].range,s=this._usedEndToken?-this._usedEndToken.length-1:0;return new Xe(n.endLineNumber,n.endColumn+s,n.endLineNumber,n.endColumn+s)}}}class ff{constructor(e,t,i,n,s,r,a){this.languageConfigurationService=e,this._selection=t,this._indentSize=i,this._type=n,this._insertSpace=s,this._selectionId=null,this._deltaColumn=0,this._moveEndPositionDown=!1,this._ignoreEmptyLines=r,this._ignoreFirstLine=a||!1}static _gatherPreflightCommentStrings(e,t,i,n){e.tokenization.tokenizeIfCheap(t);const s=e.getLanguageIdAtPosition(t,1),r=n.getLanguageConfiguration(s).comments,a=r?r.lineCommentToken:null;if(!a)return null;const l=[];for(let c=0,u=i-t+1;c<u;c++)l[c]={ignore:!1,commentStr:a,commentStrOffset:0,commentStrLength:a.length};return l}static _analyzeLines(e,t,i,n,s,r,a,l){let c=!0,u;e===0?u=!0:e===1?u=!1:u=!0;for(let f=0,g=n.length;f<g;f++){const p=n[f],_=s+f;if(_===s&&a){p.ignore=!0;continue}const b=i.getLineContent(_),y=gr(b);if(y===-1){p.ignore=r,p.commentStrOffset=b.length;continue}if(c=!1,p.ignore=!1,p.commentStrOffset=y,u&&!Hp._haystackHasNeedleAtOffset(b,p.commentStr,y)&&(e===0?u=!1:e===1||(p.ignore=!0)),u&&t){const S=y+p.commentStrLength;S<b.length&&b.charCodeAt(S)===32&&(p.commentStrLength+=1)}}if(e===0&&c){u=!1;for(let f=0,g=n.length;f<g;f++)n[f].ignore=!1}return{supported:!0,shouldRemoveComments:u,lines:n}}static _gatherPreflightData(e,t,i,n,s,r,a,l){const c=ff._gatherPreflightCommentStrings(i,n,s,l);return c===null?{supported:!1}:ff._analyzeLines(e,t,i,c,n,r,a,l)}_executeLineComments(e,t,i,n){let s;i.shouldRemoveComments?s=ff._createRemoveLineCommentsOperations(i.lines,n.startLineNumber):(ff._normalizeInsertionPoint(e,i.lines,n.startLineNumber,this._indentSize),s=this._createAddLineCommentsOperations(i.lines,n.startLineNumber));const r=new Z(n.positionLineNumber,n.positionColumn);for(let a=0,l=s.length;a<l;a++)t.addEditOperation(s[a].range,s[a].text),A.isEmpty(s[a].range)&&A.getStartPosition(s[a].range).equals(r)&&e.getLineContent(r.lineNumber).length+1===r.column&&(this._deltaColumn=(s[a].text||"").length);this._selectionId=t.trackSelection(n)}_attemptRemoveBlockComment(e,t,i,n){let s=t.startLineNumber,r=t.endLineNumber;const a=n.length+Math.max(e.getLineFirstNonWhitespaceColumn(t.startLineNumber),t.startColumn);let l=e.getLineContent(s).lastIndexOf(i,a-1),c=e.getLineContent(r).indexOf(n,t.endColumn-1-i.length);return l!==-1&&c===-1&&(c=e.getLineContent(s).indexOf(n,l+i.length),r=s),l===-1&&c!==-1&&(l=e.getLineContent(r).lastIndexOf(i,c),s=r),t.isEmpty()&&(l===-1||c===-1)&&(l=e.getLineContent(s).indexOf(i),l!==-1&&(c=e.getLineContent(s).indexOf(n,l+i.length))),l!==-1&&e.getLineContent(s).charCodeAt(l+i.length)===32&&(i+=" "),c!==-1&&e.getLineContent(r).charCodeAt(c-1)===32&&(n=" "+n,c-=1),l!==-1&&c!==-1?Hp._createRemoveBlockCommentOperations(new A(s,l+i.length+1,r,c+1),i,n):null}_executeBlockComment(e,t,i){e.tokenization.tokenizeIfCheap(i.startLineNumber);const n=e.getLanguageIdAtPosition(i.startLineNumber,1),s=this.languageConfigurationService.getLanguageConfiguration(n).comments;if(!s||!s.blockCommentStartToken||!s.blockCommentEndToken)return;const r=s.blockCommentStartToken,a=s.blockCommentEndToken;let l=this._attemptRemoveBlockComment(e,i,r,a);if(!l){if(i.isEmpty()){const c=e.getLineContent(i.startLineNumber);let u=gr(c);u===-1&&(u=c.length),l=Hp._createAddBlockCommentOperations(new A(i.startLineNumber,u+1,i.startLineNumber,c.length+1),r,a,this._insertSpace)}else l=Hp._createAddBlockCommentOperations(new A(i.startLineNumber,e.getLineFirstNonWhitespaceColumn(i.startLineNumber),i.endLineNumber,e.getLineMaxColumn(i.endLineNumber)),r,a,this._insertSpace);l.length===1&&(this._deltaColumn=r.length+1)}this._selectionId=t.trackSelection(i);for(const c of l)t.addEditOperation(c.range,c.text)}getEditOperations(e,t){let i=this._selection;if(this._moveEndPositionDown=!1,i.startLineNumber===i.endLineNumber&&this._ignoreFirstLine){t.addEditOperation(new A(i.startLineNumber,e.getLineMaxColumn(i.startLineNumber),i.startLineNumber+1,1),i.startLineNumber===e.getLineCount()?"":`
`),this._selectionId=t.trackSelection(i);return}i.startLineNumber<i.endLineNumber&&i.endColumn===1&&(this._moveEndPositionDown=!0,i=i.setEndPosition(i.endLineNumber-1,e.getLineMaxColumn(i.endLineNumber-1)));const n=ff._gatherPreflightData(this._type,this._insertSpace,e,i.startLineNumber,i.endLineNumber,this._ignoreEmptyLines,this._ignoreFirstLine,this.languageConfigurationService);return n.supported?this._executeLineComments(e,t,n,i):this._executeBlockComment(e,t,i)}computeCursorState(e,t){let i=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(i=i.setEndPosition(i.endLineNumber+1,1)),new Xe(i.selectionStartLineNumber,i.selectionStartColumn+this._deltaColumn,i.positionLineNumber,i.positionColumn+this._deltaColumn)}static _createRemoveLineCommentsOperations(e,t){const i=[];for(let n=0,s=e.length;n<s;n++){const r=e[n];r.ignore||i.push(On.delete(new A(t+n,r.commentStrOffset+1,t+n,r.commentStrOffset+r.commentStrLength+1)))}return i}_createAddLineCommentsOperations(e,t){const i=[],n=this._insertSpace?" ":"";for(let s=0,r=e.length;s<r;s++){const a=e[s];a.ignore||i.push(On.insert(new Z(t+s,a.commentStrOffset+1),a.commentStr+n))}return i}static nextVisibleColumn(e,t,i,n){return i?e+(t-e%t):e+n}static _normalizeInsertionPoint(e,t,i,n){let s=1073741824,r,a;for(let l=0,c=t.length;l<c;l++){if(t[l].ignore)continue;const u=e.getLineContent(i+l);let f=0;for(let g=0,p=t[l].commentStrOffset;f<s&&g<p;g++)f=ff.nextVisibleColumn(f,n,u.charCodeAt(g)===9,1);f<s&&(s=f)}s=Math.floor(s/n)*n;for(let l=0,c=t.length;l<c;l++){if(t[l].ignore)continue;const u=e.getLineContent(i+l);let f=0;for(r=0,a=t[l].commentStrOffset;f<s&&r<a;r++)f=ff.nextVisibleColumn(f,n,u.charCodeAt(r)===9,1);f>s?t[l].commentStrOffset=r-1:t[l].commentStrOffset=r}}}class pU extends Ke{constructor(e,t){super(t),this._type=e}run(e,t){const i=e.get(dn);if(!t.hasModel())return;const n=t.getModel(),s=[],r=n.getOptions(),a=t.getOption(23),l=t.getSelections().map((u,f)=>({selection:u,index:f,ignoreFirstLine:!1}));l.sort((u,f)=>A.compareRangesUsingStarts(u.selection,f.selection));let c=l[0];for(let u=1;u<l.length;u++){const f=l[u];c.selection.endLineNumber===f.selection.startLineNumber&&(c.index<f.index?f.ignoreFirstLine=!0:(c.ignoreFirstLine=!0,c=f))}for(const u of l)s.push(new ff(i,u.selection,r.indentSize,this._type,a.insertSpace,a.ignoreEmptyLines,u.ignoreFirstLine));t.pushUndoStop(),t.executeCommands(this.id,s),t.pushUndoStop()}}class b9e extends pU{constructor(){super(0,{id:"editor.action.commentLine",label:v("comment.line","Toggle Line Comment"),alias:"Toggle Line Comment",precondition:W.writable,kbOpts:{kbExpr:W.editorTextFocus,primary:2138,weight:100},menuOpts:{menuId:P.MenubarEditMenu,group:"5_insert",title:v({key:"miToggleLineComment",comment:["&& denotes a mnemonic"]},"&&Toggle Line Comment"),order:1}})}}class C9e extends pU{constructor(){super(1,{id:"editor.action.addCommentLine",label:v("comment.line.add","Add Line Comment"),alias:"Add Line Comment",precondition:W.writable,kbOpts:{kbExpr:W.editorTextFocus,primary:Fs(2089,2081),weight:100}})}}class w9e extends pU{constructor(){super(2,{id:"editor.action.removeCommentLine",label:v("comment.line.remove","Remove Line Comment"),alias:"Remove Line Comment",precondition:W.writable,kbOpts:{kbExpr:W.editorTextFocus,primary:Fs(2089,2099),weight:100}})}}class y9e extends Ke{constructor(){super({id:"editor.action.blockComment",label:v("comment.block","Toggle Block Comment"),alias:"Toggle Block Comment",precondition:W.writable,kbOpts:{kbExpr:W.editorTextFocus,primary:1567,linux:{primary:3103},weight:100},menuOpts:{menuId:P.MenubarEditMenu,group:"5_insert",title:v({key:"miToggleBlockComment",comment:["&& denotes a mnemonic"]},"Toggle &&Block Comment"),order:2}})}run(e,t){const i=e.get(dn);if(!t.hasModel())return;const n=t.getOption(23),s=[],r=t.getSelections();for(const a of r)s.push(new Hp(a,n.insertSpace,i));t.pushUndoStop(),t.executeCommands(this.id,s),t.pushUndoStop()}}Ce(b9e);Ce(C9e);Ce(w9e);Ce(y9e);var S9e=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},P_=function(o,e){return function(t,i){e(t,i,o)}},u6;let O1=u6=class{static get(e){return e.getContribution(u6.ID)}constructor(e,t,i,n,s,r,a,l){this._contextMenuService=t,this._contextViewService=i,this._contextKeyService=n,this._keybindingService=s,this._menuService=r,this._configurationService=a,this._workspaceContextService=l,this._toDispose=new he,this._contextMenuIsBeingShownCount=0,this._editor=e,this._toDispose.add(this._editor.onContextMenu(c=>this._onContextMenu(c))),this._toDispose.add(this._editor.onMouseWheel(c=>{if(this._contextMenuIsBeingShownCount>0){const u=this._contextViewService.getContextViewElement(),f=c.srcElement;f.shadowRoot&&Nv(u)===f.shadowRoot||this._contextViewService.hideContextView()}})),this._toDispose.add(this._editor.onKeyDown(c=>{this._editor.getOption(24)&&c.keyCode===58&&(c.preventDefault(),c.stopPropagation(),this.showContextMenu())}))}_onContextMenu(e){if(!this._editor.hasModel())return;if(!this._editor.getOption(24)){this._editor.focus(),e.target.position&&!this._editor.getSelection().containsPosition(e.target.position)&&this._editor.setPosition(e.target.position);return}if(e.target.type===12||e.target.type===6&&e.target.detail.injectedText)return;if(e.event.preventDefault(),e.event.stopPropagation(),e.target.type===11)return this._showScrollbarContextMenu(e.event);if(e.target.type!==6&&e.target.type!==7&&e.target.type!==1)return;if(this._editor.focus(),e.target.position){let i=!1;for(const n of this._editor.getSelections())if(n.containsPosition(e.target.position)){i=!0;break}i||this._editor.setPosition(e.target.position)}let t=null;e.target.type!==1&&(t=e.event),this.showContextMenu(t)}showContextMenu(e){if(!this._editor.getOption(24)||!this._editor.hasModel())return;const t=this._getMenuActions(this._editor.getModel(),this._editor.isSimpleWidget?P.SimpleEditorContext:P.EditorContext);t.length>0&&this._doShowContextMenu(t,e)}_getMenuActions(e,t){const i=[],n=this._menuService.createMenu(t,this._contextKeyService),s=n.getActions({arg:e.uri});n.dispose();for(const r of s){const[,a]=r;let l=0;for(const c of a)if(c instanceof ox){const u=this._getMenuActions(e,c.item.submenu);u.length>0&&(i.push(new n1(c.id,c.label,u)),l++)}else i.push(c),l++;l&&i.push(new Os)}return i.length&&i.pop(),i}_doShowContextMenu(e,t=null){if(!this._editor.hasModel())return;const i=this._editor.getOption(60);this._editor.updateOptions({hover:{enabled:!1}});let n=t;if(!n){this._editor.revealPosition(this._editor.getPosition(),1),this._editor.render();const r=this._editor.getScrolledVisiblePosition(this._editor.getPosition()),a=ws(this._editor.getDomNode()),l=a.left+r.left,c=a.top+r.top+r.height;n={x:l,y:c}}const s=this._editor.getOption(127)&&!$d;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:s?this._editor.getDomNode():void 0,getAnchor:()=>n,getActions:()=>e,getActionViewItem:r=>{const a=this._keybindingFor(r);if(a)return new x1(r,r,{label:!0,keybinding:a.getLabel(),isMenu:!0});const l=r;return typeof l.getActionViewItem=="function"?l.getActionViewItem():new x1(r,r,{icon:!0,label:!0,isMenu:!0})},getKeyBinding:r=>this._keybindingFor(r),onHide:r=>{this._contextMenuIsBeingShownCount--,this._editor.updateOptions({hover:i})}})}_showScrollbarContextMenu(e){if(!this._editor.hasModel()||AMe(this._workspaceContextService.getWorkspace()))return;const t=this._editor.getOption(73);let i=0;const n=c=>({id:`menu-action-${++i}`,label:c.label,tooltip:"",class:void 0,enabled:typeof c.enabled>"u"?!0:c.enabled,checked:c.checked,run:c.run}),s=(c,u)=>new n1(`menu-action-${++i}`,c,u,void 0),r=(c,u,f,g,p)=>{if(!u)return n({label:c,enabled:u,run:()=>{}});const _=y=>()=>{this._configurationService.updateValue(f,y)},b=[];for(const y of p)b.push(n({label:y.label,checked:g===y.value,run:_(y.value)}));return s(c,b)},a=[];a.push(n({label:v("context.minimap.minimap","Minimap"),checked:t.enabled,run:()=>{this._configurationService.updateValue("editor.minimap.enabled",!t.enabled)}})),a.push(new Os),a.push(n({label:v("context.minimap.renderCharacters","Render Characters"),enabled:t.enabled,checked:t.renderCharacters,run:()=>{this._configurationService.updateValue("editor.minimap.renderCharacters",!t.renderCharacters)}})),a.push(r(v("context.minimap.size","Vertical size"),t.enabled,"editor.minimap.size",t.size,[{label:v("context.minimap.size.proportional","Proportional"),value:"proportional"},{label:v("context.minimap.size.fill","Fill"),value:"fill"},{label:v("context.minimap.size.fit","Fit"),value:"fit"}])),a.push(r(v("context.minimap.slider","Slider"),t.enabled,"editor.minimap.showSlider",t.showSlider,[{label:v("context.minimap.slider.mouseover","Mouse Over"),value:"mouseover"},{label:v("context.minimap.slider.always","Always"),value:"always"}]));const l=this._editor.getOption(127)&&!$d;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:l?this._editor.getDomNode():void 0,getAnchor:()=>e,getActions:()=>a,onHide:c=>{this._contextMenuIsBeingShownCount--,this._editor.focus()}})}_keybindingFor(e){return this._keybindingService.lookupKeybinding(e.id)}dispose(){this._contextMenuIsBeingShownCount>0&&this._contextViewService.hideContextView(),this._toDispose.dispose()}};O1.ID="editor.contrib.contextmenu";O1=u6=S9e([P_(1,Ya),P_(2,gg),P_(3,bt),P_(4,Bi),P_(5,Nl),P_(6,$t),P_(7,Fv)],O1);class L9e extends Ke{constructor(){super({id:"editor.action.showContextMenu",label:v("action.showContextMenu.label","Show Editor Context Menu"),alias:"Show Editor Context Menu",precondition:void 0,kbOpts:{kbExpr:W.textInputFocus,primary:1092,weight:100}})}run(e,t){var i;(i=O1.get(t))===null||i===void 0||i.showContextMenu()}}pi(O1.ID,O1,2);Ce(L9e);class yB{constructor(e){this.selections=e}equals(e){const t=this.selections.length,i=e.selections.length;if(t!==i)return!1;for(let n=0;n<t;n++)if(!this.selections[n].equalsSelection(e.selections[n]))return!1;return!0}}class SB{constructor(e,t,i){this.cursorState=e,this.scrollTop=t,this.scrollLeft=i}}class Yv extends J{static get(e){return e.getContribution(Yv.ID)}constructor(e){super(),this._editor=e,this._isCursorUndoRedo=!1,this._undoStack=[],this._redoStack=[],this._register(e.onDidChangeModel(t=>{this._undoStack=[],this._redoStack=[]})),this._register(e.onDidChangeModelContent(t=>{this._undoStack=[],this._redoStack=[]})),this._register(e.onDidChangeCursorSelection(t=>{if(this._isCursorUndoRedo||!t.oldSelections||t.oldModelVersionId!==t.modelVersionId)return;const i=new yB(t.oldSelections);this._undoStack.length>0&&this._undoStack[this._undoStack.length-1].cursorState.equals(i)||(this._undoStack.push(new SB(i,e.getScrollTop(),e.getScrollLeft())),this._redoStack=[],this._undoStack.length>50&&this._undoStack.shift())}))}cursorUndo(){!this._editor.hasModel()||this._undoStack.length===0||(this._redoStack.push(new SB(new yB(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._undoStack.pop()))}cursorRedo(){!this._editor.hasModel()||this._redoStack.length===0||(this._undoStack.push(new SB(new yB(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._redoStack.pop()))}_applyState(e){this._isCursorUndoRedo=!0,this._editor.setSelections(e.cursorState.selections),this._editor.setScrollPosition({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft}),this._isCursorUndoRedo=!1}}Yv.ID="editor.contrib.cursorUndoRedoController";class x9e extends Ke{constructor(){super({id:"cursorUndo",label:v("cursor.undo","Cursor Undo"),alias:"Cursor Undo",precondition:void 0,kbOpts:{kbExpr:W.textInputFocus,primary:2099,weight:100}})}run(e,t,i){var n;(n=Yv.get(t))===null||n===void 0||n.cursorUndo()}}class D9e extends Ke{constructor(){super({id:"cursorRedo",label:v("cursor.redo","Cursor Redo"),alias:"Cursor Redo",precondition:void 0})}run(e,t,i){var n;(n=Yv.get(t))===null||n===void 0||n.cursorRedo()}}pi(Yv.ID,Yv,0);Ce(x9e);Ce(D9e);class k9e{constructor(e,t,i){this.selection=e,this.targetPosition=t,this.copy=i,this.targetSelection=null}getEditOperations(e,t){const i=e.getValueInRange(this.selection);if(this.copy||t.addEditOperation(this.selection,null),t.addEditOperation(new A(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column),i),this.selection.containsPosition(this.targetPosition)&&!(this.copy&&(this.selection.getEndPosition().equals(this.targetPosition)||this.selection.getStartPosition().equals(this.targetPosition)))){this.targetSelection=this.selection;return}if(this.copy){this.targetSelection=new Xe(this.targetPosition.lineNumber,this.targetPosition.column,this.selection.endLineNumber-this.selection.startLineNumber+this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}if(this.targetPosition.lineNumber>this.selection.endLineNumber){this.targetSelection=new Xe(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}if(this.targetPosition.lineNumber<this.selection.endLineNumber){this.targetSelection=new Xe(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber+this.selection.endLineNumber-this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}this.selection.endColumn<=this.targetPosition.column?this.targetSelection=new Xe(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column-this.selection.endColumn+this.selection.startColumn:this.targetPosition.column-this.selection.endColumn+this.selection.startColumn,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column:this.selection.endColumn):this.targetSelection=new Xe(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column+this.selection.endColumn-this.selection.startColumn)}computeCursorState(e,t){return this.targetSelection}}function A0(o){return Kt?o.altKey:o.ctrlKey}class Qf extends J{constructor(e){super(),this._editor=e,this._dndDecorationIds=this._editor.createDecorationsCollection(),this._register(this._editor.onMouseDown(t=>this._onEditorMouseDown(t))),this._register(this._editor.onMouseUp(t=>this._onEditorMouseUp(t))),this._register(this._editor.onMouseDrag(t=>this._onEditorMouseDrag(t))),this._register(this._editor.onMouseDrop(t=>this._onEditorMouseDrop(t))),this._register(this._editor.onMouseDropCanceled(()=>this._onEditorMouseDropCanceled())),this._register(this._editor.onKeyDown(t=>this.onEditorKeyDown(t))),this._register(this._editor.onKeyUp(t=>this.onEditorKeyUp(t))),this._register(this._editor.onDidBlurEditorWidget(()=>this.onEditorBlur())),this._register(this._editor.onDidBlurEditorText(()=>this.onEditorBlur())),this._mouseDown=!1,this._modifierPressed=!1,this._dragSelection=null}onEditorBlur(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1}onEditorKeyDown(e){!this._editor.getOption(35)||this._editor.getOption(22)||(A0(e)&&(this._modifierPressed=!0),this._mouseDown&&A0(e)&&this._editor.updateOptions({mouseStyle:"copy"}))}onEditorKeyUp(e){!this._editor.getOption(35)||this._editor.getOption(22)||(A0(e)&&(this._modifierPressed=!1),this._mouseDown&&e.keyCode===Qf.TRIGGER_KEY_VALUE&&this._editor.updateOptions({mouseStyle:"default"}))}_onEditorMouseDown(e){this._mouseDown=!0}_onEditorMouseUp(e){this._mouseDown=!1,this._editor.updateOptions({mouseStyle:"text"})}_onEditorMouseDrag(e){const t=e.target;if(this._dragSelection===null){const n=(this._editor.getSelections()||[]).filter(s=>t.position&&s.containsPosition(t.position));if(n.length===1)this._dragSelection=n[0];else return}A0(e.event)?this._editor.updateOptions({mouseStyle:"copy"}):this._editor.updateOptions({mouseStyle:"default"}),t.position&&(this._dragSelection.containsPosition(t.position)?this._removeDecoration():this.showAt(t.position))}_onEditorMouseDropCanceled(){this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}_onEditorMouseDrop(e){if(e.target&&(this._hitContent(e.target)||this._hitMargin(e.target))&&e.target.position){const t=new Z(e.target.position.lineNumber,e.target.position.column);if(this._dragSelection===null){let i=null;if(e.event.shiftKey){const n=this._editor.getSelection();if(n){const{selectionStartLineNumber:s,selectionStartColumn:r}=n;i=[new Xe(s,r,t.lineNumber,t.column)]}}else i=(this._editor.getSelections()||[]).map(n=>n.containsPosition(t)?new Xe(t.lineNumber,t.column,t.lineNumber,t.column):n);this._editor.setSelections(i||[],"mouse",3)}else(!this._dragSelection.containsPosition(t)||(A0(e.event)||this._modifierPressed)&&(this._dragSelection.getEndPosition().equals(t)||this._dragSelection.getStartPosition().equals(t)))&&(this._editor.pushUndoStop(),this._editor.executeCommand(Qf.ID,new k9e(this._dragSelection,t,A0(e.event)||this._modifierPressed)),this._editor.pushUndoStop())}this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}showAt(e){this._dndDecorationIds.set([{range:new A(e.lineNumber,e.column,e.lineNumber,e.column),options:Qf._DECORATION_OPTIONS}]),this._editor.revealPosition(e,1)}_removeDecoration(){this._dndDecorationIds.clear()}_hitContent(e){return e.type===6||e.type===7}_hitMargin(e){return e.type===2||e.type===3||e.type===4}dispose(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1,super.dispose()}}Qf.ID="editor.contrib.dragAndDrop";Qf.TRIGGER_KEY_VALUE=Kt?6:5;Qf._DECORATION_OPTIONS=Rt.register({description:"dnd-target",className:"dnd-target"});pi(Qf.ID,Qf,2);var jT;pi(wh.ID,wh,0);dk(MW);Me(new class extends zs{constructor(){super({id:Sae,precondition:iU,kbOpts:{weight:100,primary:2137}})}runEditorCommand(o,e){var t;return(t=wh.get(e))===null||t===void 0?void 0:t.changePasteType()}});Me(new class extends zs{constructor(){super({id:"editor.hidePasteWidget",precondition:iU,kbOpts:{weight:100,primary:9}})}runEditorCommand(o,e){var t;(t=wh.get(e))===null||t===void 0||t.clearWidgets()}});Ce((jT=class extends Ke{constructor(){super({id:"editor.action.pasteAs",label:v("pasteAs","Paste As..."),alias:"Paste As...",precondition:W.writable,metadata:{description:"Paste as",args:[{name:"args",schema:jT.argsSchema}]}})}run(e,t,i){var n;let s=typeof(i==null?void 0:i.kind)=="string"?i.kind:void 0;return!s&&i&&(s=typeof i.id=="string"?i.id:void 0),(n=wh.get(t))===null||n===void 0?void 0:n.pasteAs(s?new zi(s):void 0)}},jT.argsSchema={type:"object",properties:{kind:{type:"string",description:v("pasteAs.kind","The kind of the paste edit to try applying. If not provided or there are multiple edits for this kind, the editor will show a picker.")}}},jT));Ce(class extends Ke{constructor(){super({id:"editor.action.pasteAsText",label:v("pasteAsText","Paste as Text"),alias:"Paste as Text",precondition:W.writable})}run(o,e){var t;return(t=wh.get(e))===null||t===void 0?void 0:t.pasteAs({providerId:lg.id})}});class E9e{constructor(){this._dragOperations=new Map}removeDragOperationTransfer(e){if(e&&this._dragOperations.has(e)){const t=this._dragOperations.get(e);return this._dragOperations.delete(e),t}}}class gee{constructor(e){this.identifier=e}}const ble=Zt("treeViewsDndService");oi(ble,E9e,1);var I9e=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},KT=function(o,e){return function(t,i){e(t,i,o)}},h6;const Cle="editor.experimental.dropIntoEditor.defaultProvider",wle="editor.changeDropType",mU=new Be("dropWidgetVisible",!1,v("dropWidgetVisible","Whether the drop widget is showing"));let Zv=h6=class extends J{static get(e){return e.getContribution(h6.ID)}constructor(e,t,i,n,s){super(),this._configService=i,this._languageFeaturesService=n,this._treeViewsDragAndDropService=s,this.treeItemsTransfer=iD.getInstance(),this._dropProgressManager=this._register(t.createInstance(OM,"dropIntoEditor",e)),this._postDropWidgetManager=this._register(t.createInstance(BM,"dropIntoEditor",e,mU,{id:wle,label:v("postDropWidgetTitle","Show drop options...")})),this._register(e.onDropIntoEditor(r=>this.onDropIntoEditor(e,r.position,r.event)))}clearWidgets(){this._postDropWidgetManager.clear()}changeDropType(){this._postDropWidgetManager.tryShowSelector()}async onDropIntoEditor(e,t,i){var n;if(!i.dataTransfer||!e.hasModel())return;(n=this._currentOperation)===null||n===void 0||n.cancel(),e.focus(),e.setPosition(t);const s=Qs(async r=>{const a=new Cm(e,1,void 0,r);try{const l=await this.extractDataTransferData(i);if(l.size===0||a.token.isCancellationRequested)return;const c=e.getModel();if(!c)return;const u=this._languageFeaturesService.documentOnDropEditProvider.ordered(c).filter(g=>g.dropMimeTypes?g.dropMimeTypes.some(p=>l.matches(p)):!0),f=await this.getDropEdits(u,c,t,l,a);if(a.token.isCancellationRequested)return;if(f.length){const g=this.getInitialActiveEditIndex(c,f),p=e.getOption(36).showDropSelector==="afterDrop";await this._postDropWidgetManager.applyEditAndShowIfNeeded([A.fromPositions(t)],{activeEditIndex:g,allEdits:f},p,async _=>_,r)}}finally{a.dispose(),this._currentOperation===s&&(this._currentOperation=void 0)}});this._dropProgressManager.showWhile(t,v("dropIntoEditorProgress","Running drop handlers. Click to cancel"),s),this._currentOperation=s}async getDropEdits(e,t,i,n,s){const r=await FD(Promise.all(e.map(async l=>{try{const c=await l.provideDocumentOnDropEdits(t,i,n,s.token);return c==null?void 0:c.map(u=>({...u,providerId:l.id}))}catch(c){console.error(c)}})),s.token),a=Ud(r??[]).flat();return wae(a)}getInitialActiveEditIndex(e,t){const i=this._configService.getValue(Cle,{resource:e.uri});for(const[n,s]of Object.entries(i)){const r=new zi(s),a=t.findIndex(l=>r.value===l.providerId&&l.handledMimeType&&fae(n,[l.handledMimeType]));if(a>=0)return a}return 0}async extractDataTransferData(e){if(!e.dataTransfer)return new hae;const t=mae(e.dataTransfer);if(this.treeItemsTransfer.hasData(gee.prototype)){const i=this.treeItemsTransfer.getData(gee.prototype);if(Array.isArray(i))for(const n of i){const s=await this._treeViewsDragAndDropService.removeDragOperationTransfer(n.identifier);if(s)for(const[r,a]of s)t.replace(r,a)}}return t}};Zv.ID="editor.contrib.dropIntoEditorController";Zv=h6=I9e([KT(1,ct),KT(2,$t),KT(3,Ze),KT(4,ble)],Zv);pi(Zv.ID,Zv,2);dk(RW);Me(new class extends zs{constructor(){super({id:wle,precondition:mU,kbOpts:{weight:100,primary:2137}})}runEditorCommand(o,e,t){var i;(i=Zv.get(e))===null||i===void 0||i.changeDropType()}});Me(new class extends zs{constructor(){super({id:"editor.hideDropWidget",precondition:mU,kbOpts:{weight:100,primary:9}})}runEditorCommand(o,e,t){var i;(i=Zv.get(e))===null||i===void 0||i.clearWidgets()}});$n.as(nu.Configuration).registerConfiguration({...iP,properties:{[Cle]:{type:"object",scope:5,description:v("defaultProviderDescription","Configures the default drop provider to use for content of a given mime type."),default:{},additionalProperties:{type:"string"}}}});class dr{constructor(e){this._editor=e,this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null,this._startPosition=this._editor.getPosition()}dispose(){this._editor.removeDecorations(this._allDecorations()),this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}reset(){this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}getCount(){return this._decorations.length}getFindScope(){return this._findScopeDecorationIds[0]?this._editor.getModel().getDecorationRange(this._findScopeDecorationIds[0]):null}getFindScopes(){if(this._findScopeDecorationIds.length){const e=this._findScopeDecorationIds.map(t=>this._editor.getModel().getDecorationRange(t)).filter(t=>!!t);if(e.length)return e}return null}getStartPosition(){return this._startPosition}setStartPosition(e){this._startPosition=e,this.setCurrentFindMatch(null)}_getDecorationIndex(e){const t=this._decorations.indexOf(e);return t>=0?t+1:1}getDecorationRangeAt(e){const t=e<this._decorations.length?this._decorations[e]:null;return t?this._editor.getModel().getDecorationRange(t):null}getCurrentMatchesPosition(e){const t=this._editor.getModel().getDecorationsInRange(e);for(const i of t){const n=i.options;if(n===dr._FIND_MATCH_DECORATION||n===dr._CURRENT_FIND_MATCH_DECORATION)return this._getDecorationIndex(i.id)}return 0}setCurrentFindMatch(e){let t=null,i=0;if(e)for(let n=0,s=this._decorations.length;n<s;n++){const r=this._editor.getModel().getDecorationRange(this._decorations[n]);if(e.equalsRange(r)){t=this._decorations[n],i=n+1;break}}return(this._highlightedDecorationId!==null||t!==null)&&this._editor.changeDecorations(n=>{if(this._highlightedDecorationId!==null&&(n.changeDecorationOptions(this._highlightedDecorationId,dr._FIND_MATCH_DECORATION),this._highlightedDecorationId=null),t!==null&&(this._highlightedDecorationId=t,n.changeDecorationOptions(this._highlightedDecorationId,dr._CURRENT_FIND_MATCH_DECORATION)),this._rangeHighlightDecorationId!==null&&(n.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),t!==null){let s=this._editor.getModel().getDecorationRange(t);if(s.startLineNumber!==s.endLineNumber&&s.endColumn===1){const r=s.endLineNumber-1,a=this._editor.getModel().getLineMaxColumn(r);s=new A(s.startLineNumber,s.startColumn,r,a)}this._rangeHighlightDecorationId=n.addDecoration(s,dr._RANGE_HIGHLIGHT_DECORATION)}}),i}set(e,t){this._editor.changeDecorations(i=>{let n=dr._FIND_MATCH_DECORATION;const s=[];if(e.length>1e3){n=dr._FIND_MATCH_NO_OVERVIEW_DECORATION;const a=this._editor.getModel().getLineCount(),c=this._editor.getLayoutInfo().height/a,u=Math.max(2,Math.ceil(3/c));let f=e[0].range.startLineNumber,g=e[0].range.endLineNumber;for(let p=1,_=e.length;p<_;p++){const b=e[p].range;g+u>=b.startLineNumber?b.endLineNumber>g&&(g=b.endLineNumber):(s.push({range:new A(f,1,g,1),options:dr._FIND_MATCH_ONLY_OVERVIEW_DECORATION}),f=b.startLineNumber,g=b.endLineNumber)}s.push({range:new A(f,1,g,1),options:dr._FIND_MATCH_ONLY_OVERVIEW_DECORATION})}const r=new Array(e.length);for(let a=0,l=e.length;a<l;a++)r[a]={range:e[a].range,options:n};this._decorations=i.deltaDecorations(this._decorations,r),this._overviewRulerApproximateDecorations=i.deltaDecorations(this._overviewRulerApproximateDecorations,s),this._rangeHighlightDecorationId&&(i.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),this._findScopeDecorationIds.length&&(this._findScopeDecorationIds.forEach(a=>i.removeDecoration(a)),this._findScopeDecorationIds=[]),t!=null&&t.length&&(this._findScopeDecorationIds=t.map(a=>i.addDecoration(a,dr._FIND_SCOPE_DECORATION)))})}matchBeforePosition(e){if(this._decorations.length===0)return null;for(let t=this._decorations.length-1;t>=0;t--){const i=this._decorations[t],n=this._editor.getModel().getDecorationRange(i);if(!(!n||n.endLineNumber>e.lineNumber)){if(n.endLineNumber<e.lineNumber)return n;if(!(n.endColumn>e.column))return n}}return this._editor.getModel().getDecorationRange(this._decorations[this._decorations.length-1])}matchAfterPosition(e){if(this._decorations.length===0)return null;for(let t=0,i=this._decorations.length;t<i;t++){const n=this._decorations[t],s=this._editor.getModel().getDecorationRange(n);if(!(!s||s.startLineNumber<e.lineNumber)){if(s.startLineNumber>e.lineNumber)return s;if(!(s.startColumn<e.column))return s}}return this._editor.getModel().getDecorationRange(this._decorations[0])}_allDecorations(){let e=[];return e=e.concat(this._decorations),e=e.concat(this._overviewRulerApproximateDecorations),this._findScopeDecorationIds.length&&e.push(...this._findScopeDecorationIds),this._rangeHighlightDecorationId&&e.push(this._rangeHighlightDecorationId),e}}dr._CURRENT_FIND_MATCH_DECORATION=Rt.register({description:"current-find-match",stickiness:1,zIndex:13,className:"currentFindMatch",showIfCollapsed:!0,overviewRuler:{color:Xn(vH),position:kl.Center},minimap:{color:Xn(oC),position:1}});dr._FIND_MATCH_DECORATION=Rt.register({description:"find-match",stickiness:1,zIndex:10,className:"findMatch",showIfCollapsed:!0,overviewRuler:{color:Xn(vH),position:kl.Center},minimap:{color:Xn(oC),position:1}});dr._FIND_MATCH_NO_OVERVIEW_DECORATION=Rt.register({description:"find-match-no-overview",stickiness:1,className:"findMatch",showIfCollapsed:!0});dr._FIND_MATCH_ONLY_OVERVIEW_DECORATION=Rt.register({description:"find-match-only-overview",stickiness:1,overviewRuler:{color:Xn(vH),position:kl.Center}});dr._RANGE_HIGHLIGHT_DECORATION=Rt.register({description:"find-range-highlight",stickiness:1,className:"rangeHighlight",isWholeLine:!0});dr._FIND_SCOPE_DECORATION=Rt.register({description:"find-scope",className:"findScope",isWholeLine:!0});class T9e{constructor(e,t,i){this._editorSelection=e,this._ranges=t,this._replaceStrings=i,this._trackedEditorSelectionId=null}getEditOperations(e,t){if(this._ranges.length>0){const i=[];for(let r=0;r<this._ranges.length;r++)i.push({range:this._ranges[r],text:this._replaceStrings[r]});i.sort((r,a)=>A.compareRangesUsingStarts(r.range,a.range));const n=[];let s=i[0];for(let r=1;r<i.length;r++)s.range.endLineNumber===i[r].range.startLineNumber&&s.range.endColumn===i[r].range.startColumn?(s.range=s.range.plusRange(i[r].range),s.text=s.text+i[r].text):(n.push(s),s=i[r]);n.push(s);for(const r of n)t.addEditOperation(r.range,r.text)}this._trackedEditorSelectionId=t.trackSelection(this._editorSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._trackedEditorSelectionId)}}function yle(o,e){if(o&&o[0]!==""){const t=pee(o,e,"-"),i=pee(o,e,"_");return t&&!i?mee(o,e,"-"):!t&&i?mee(o,e,"_"):o[0].toUpperCase()===o[0]?e.toUpperCase():o[0].toLowerCase()===o[0]?e.toLowerCase():FCe(o[0][0])&&e.length>0?e[0].toUpperCase()+e.substr(1):o[0][0].toUpperCase()!==o[0][0]&&e.length>0?e[0].toLowerCase()+e.substr(1):e}else return e}function pee(o,e,t){return o[0].indexOf(t)!==-1&&e.indexOf(t)!==-1&&o[0].split(t).length===e.split(t).length}function mee(o,e,t){const i=e.split(t),n=o[0].split(t);let s="";return i.forEach((r,a)=>{s+=yle([n[a]],r)+t}),s.slice(0,-1)}class _ee{constructor(e){this.staticValue=e,this.kind=0}}class N9e{constructor(e){this.pieces=e,this.kind=1}}class F1{static fromStaticValue(e){return new F1([Sv.staticValue(e)])}get hasReplacementPatterns(){return this._state.kind===1}constructor(e){!e||e.length===0?this._state=new _ee(""):e.length===1&&e[0].staticValue!==null?this._state=new _ee(e[0].staticValue):this._state=new N9e(e)}buildReplaceString(e,t){if(this._state.kind===0)return t?yle(e,this._state.staticValue):this._state.staticValue;let i="";for(let n=0,s=this._state.pieces.length;n<s;n++){const r=this._state.pieces[n];if(r.staticValue!==null){i+=r.staticValue;continue}let a=F1._substitute(r.matchIndex,e);if(r.caseOps!==null&&r.caseOps.length>0){const l=[],c=r.caseOps.length;let u=0;for(let f=0,g=a.length;f<g;f++){if(u>=c){l.push(a.slice(f));break}switch(r.caseOps[u]){case"U":l.push(a[f].toUpperCase());break;case"u":l.push(a[f].toUpperCase()),u++;break;case"L":l.push(a[f].toLowerCase());break;case"l":l.push(a[f].toLowerCase()),u++;break;default:l.push(a[f])}}a=l.join("")}i+=a}return i}static _substitute(e,t){if(t===null)return"";if(e===0)return t[0];let i="";for(;e>0;){if(e<t.length)return(t[e]||"")+i;i=String(e%10)+i,e=Math.floor(e/10)}return"$"+i}}class Sv{static staticValue(e){return new Sv(e,-1,null)}static caseOps(e,t){return new Sv(null,e,t)}constructor(e,t,i){this.staticValue=e,this.matchIndex=t,!i||i.length===0?this.caseOps=null:this.caseOps=i.slice(0)}}class R9e{constructor(e){this._source=e,this._lastCharIndex=0,this._result=[],this._resultLen=0,this._currentStaticPiece=""}emitUnchanged(e){this._emitStatic(this._source.substring(this._lastCharIndex,e)),this._lastCharIndex=e}emitStatic(e,t){this._emitStatic(e),this._lastCharIndex=t}_emitStatic(e){e.length!==0&&(this._currentStaticPiece+=e)}emitMatchIndex(e,t,i){this._currentStaticPiece.length!==0&&(this._result[this._resultLen++]=Sv.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),this._result[this._resultLen++]=Sv.caseOps(e,i),this._lastCharIndex=t}finalize(){return this.emitUnchanged(this._source.length),this._currentStaticPiece.length!==0&&(this._result[this._resultLen++]=Sv.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),new F1(this._result)}}function M9e(o){if(!o||o.length===0)return new F1(null);const e=[],t=new R9e(o);for(let i=0,n=o.length;i<n;i++){const s=o.charCodeAt(i);if(s===92){if(i++,i>=n)break;const r=o.charCodeAt(i);switch(r){case 92:t.emitUnchanged(i-1),t.emitStatic("\\",i+1);break;case 110:t.emitUnchanged(i-1),t.emitStatic(`
`,i+1);break;case 116:t.emitUnchanged(i-1),t.emitStatic("	",i+1);break;case 117:case 85:case 108:case 76:t.emitUnchanged(i-1),t.emitStatic("",i+1),e.push(String.fromCharCode(r));break}continue}if(s===36){if(i++,i>=n)break;const r=o.charCodeAt(i);if(r===36){t.emitUnchanged(i-1),t.emitStatic("$",i+1);continue}if(r===48||r===38){t.emitUnchanged(i-1),t.emitMatchIndex(0,i+1,e),e.length=0;continue}if(49<=r&&r<=57){let a=r-48;if(i+1<n){const l=o.charCodeAt(i+1);if(48<=l&&l<=57){i++,a=a*10+(l-48),t.emitUnchanged(i-2),t.emitMatchIndex(a,i+1,e),e.length=0;continue}}t.emitUnchanged(i-1),t.emitMatchIndex(a,i+1,e),e.length=0;continue}}}return t.finalize()}const vg=new Be("findWidgetVisible",!1);vg.toNegated();const GP=new Be("findInputFocussed",!1),_U=new Be("replaceInputFocussed",!1),qT={primary:545,mac:{primary:2593}},GT={primary:565,mac:{primary:2613}},YT={primary:560,mac:{primary:2608}},ZT={primary:554,mac:{primary:2602}},QT={primary:558,mac:{primary:2606}},gn={StartFindAction:"actions.find",StartFindWithSelection:"actions.findWithSelection",StartFindWithArgs:"editor.actions.findWithArgs",NextMatchFindAction:"editor.action.nextMatchFindAction",PreviousMatchFindAction:"editor.action.previousMatchFindAction",GoToMatchFindAction:"editor.action.goToMatchFindAction",NextSelectionMatchFindAction:"editor.action.nextSelectionMatchFindAction",PreviousSelectionMatchFindAction:"editor.action.previousSelectionMatchFindAction",StartFindReplaceAction:"editor.action.startFindReplaceAction",CloseFindWidgetCommand:"closeFindWidget",ToggleCaseSensitiveCommand:"toggleFindCaseSensitive",ToggleWholeWordCommand:"toggleFindWholeWord",ToggleRegexCommand:"toggleFindRegex",ToggleSearchScopeCommand:"toggleFindInSelection",TogglePreserveCaseCommand:"togglePreserveCase",ReplaceOneAction:"editor.action.replaceOne",ReplaceAllAction:"editor.action.replaceAll",SelectAllMatchesAction:"editor.action.selectAllMatches"},zp=19999,A9e=240;class WL{constructor(e,t){this._toDispose=new he,this._editor=e,this._state=t,this._isDisposed=!1,this._startSearchingTimer=new Yc,this._decorations=new dr(e),this._toDispose.add(this._decorations),this._updateDecorationsScheduler=new Ui(()=>this.research(!1),100),this._toDispose.add(this._updateDecorationsScheduler),this._toDispose.add(this._editor.onDidChangeCursorPosition(i=>{(i.reason===3||i.reason===5||i.reason===6)&&this._decorations.setStartPosition(this._editor.getPosition())})),this._ignoreModelContentChanged=!1,this._toDispose.add(this._editor.onDidChangeModelContent(i=>{this._ignoreModelContentChanged||(i.isFlush&&this._decorations.reset(),this._decorations.setStartPosition(this._editor.getPosition()),this._updateDecorationsScheduler.schedule())})),this._toDispose.add(this._state.onFindReplaceStateChange(i=>this._onStateChanged(i))),this.research(!1,this._state.searchScope)}dispose(){this._isDisposed=!0,cn(this._startSearchingTimer),this._toDispose.dispose()}_onStateChanged(e){this._isDisposed||this._editor.hasModel()&&(e.searchString||e.isReplaceRevealed||e.isRegex||e.wholeWord||e.matchCase||e.searchScope)&&(this._editor.getModel().isTooLargeForSyncing()?(this._startSearchingTimer.cancel(),this._startSearchingTimer.setIfNotSet(()=>{e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor)},A9e)):e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor))}static _getSearchRange(e,t){return t||e.getFullModelRange()}research(e,t){let i=null;typeof t<"u"?t!==null&&(Array.isArray(t)?i=t:i=[t]):i=this._decorations.getFindScopes(),i!==null&&(i=i.map(a=>{if(a.startLineNumber!==a.endLineNumber){let l=a.endLineNumber;return a.endColumn===1&&(l=l-1),new A(a.startLineNumber,1,l,this._editor.getModel().getLineMaxColumn(l))}return a}));const n=this._findMatches(i,!1,zp);this._decorations.set(n,i);const s=this._editor.getSelection();let r=this._decorations.getCurrentMatchesPosition(s);if(r===0&&n.length>0){const a=cx(n.map(l=>l.range),l=>A.compareRangesUsingStarts(l,s)>=0);r=a>0?a-1+1:r}this._state.changeMatchInfo(r,this._decorations.getCount(),void 0),e&&this._editor.getOption(41).cursorMoveOnType&&this._moveToNextMatch(this._decorations.getStartPosition())}_hasMatches(){return this._state.matchesCount>0}_cannotFind(){if(!this._hasMatches()){const e=this._decorations.getFindScope();return e&&this._editor.revealRangeInCenterIfOutsideViewport(e,0),!0}return!1}_setCurrentFindMatch(e){const t=this._decorations.setCurrentFindMatch(e);this._state.changeMatchInfo(t,this._decorations.getCount(),e),this._editor.setSelection(e),this._editor.revealRangeInCenterIfOutsideViewport(e,0)}_prevSearchPosition(e){const t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0);let{lineNumber:i,column:n}=e;const s=this._editor.getModel();return t||n===1?(i===1?i=s.getLineCount():i--,n=s.getLineMaxColumn(i)):n--,new Z(i,n)}_moveToPrevMatch(e,t=!1){if(!this._state.canNavigateBack()){const u=this._decorations.matchAfterPosition(e);u&&this._setCurrentFindMatch(u);return}if(this._decorations.getCount()<zp){let u=this._decorations.matchBeforePosition(e);u&&u.isEmpty()&&u.getStartPosition().equals(e)&&(e=this._prevSearchPosition(e),u=this._decorations.matchBeforePosition(e)),u&&this._setCurrentFindMatch(u);return}if(this._cannotFind())return;const i=this._decorations.getFindScope(),n=WL._getSearchRange(this._editor.getModel(),i);n.getEndPosition().isBefore(e)&&(e=n.getEndPosition()),e.isBefore(n.getStartPosition())&&(e=n.getEndPosition());const{lineNumber:s,column:r}=e,a=this._editor.getModel();let l=new Z(s,r),c=a.findPreviousMatch(this._state.searchString,l,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(131):null,!1);if(c&&c.range.isEmpty()&&c.range.getStartPosition().equals(l)&&(l=this._prevSearchPosition(l),c=a.findPreviousMatch(this._state.searchString,l,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(131):null,!1)),!!c){if(!t&&!n.containsRange(c.range))return this._moveToPrevMatch(c.range.getStartPosition(),!0);this._setCurrentFindMatch(c.range)}}moveToPrevMatch(){this._moveToPrevMatch(this._editor.getSelection().getStartPosition())}_nextSearchPosition(e){const t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0);let{lineNumber:i,column:n}=e;const s=this._editor.getModel();return t||n===s.getLineMaxColumn(i)?(i===s.getLineCount()?i=1:i++,n=1):n++,new Z(i,n)}_moveToNextMatch(e){if(!this._state.canNavigateForward()){const i=this._decorations.matchBeforePosition(e);i&&this._setCurrentFindMatch(i);return}if(this._decorations.getCount()<zp){let i=this._decorations.matchAfterPosition(e);i&&i.isEmpty()&&i.getStartPosition().equals(e)&&(e=this._nextSearchPosition(e),i=this._decorations.matchAfterPosition(e)),i&&this._setCurrentFindMatch(i);return}const t=this._getNextMatch(e,!1,!0);t&&this._setCurrentFindMatch(t.range)}_getNextMatch(e,t,i,n=!1){if(this._cannotFind())return null;const s=this._decorations.getFindScope(),r=WL._getSearchRange(this._editor.getModel(),s);r.getEndPosition().isBefore(e)&&(e=r.getStartPosition()),e.isBefore(r.getStartPosition())&&(e=r.getStartPosition());const{lineNumber:a,column:l}=e,c=this._editor.getModel();let u=new Z(a,l),f=c.findNextMatch(this._state.searchString,u,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(131):null,t);return i&&f&&f.range.isEmpty()&&f.range.getStartPosition().equals(u)&&(u=this._nextSearchPosition(u),f=c.findNextMatch(this._state.searchString,u,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(131):null,t)),f?!n&&!r.containsRange(f.range)?this._getNextMatch(f.range.getEndPosition(),t,i,!0):f:null}moveToNextMatch(){this._moveToNextMatch(this._editor.getSelection().getEndPosition())}_moveToMatch(e){const t=this._decorations.getDecorationRangeAt(e);t&&this._setCurrentFindMatch(t)}moveToMatch(e){this._moveToMatch(e)}_getReplacePattern(){return this._state.isRegex?M9e(this._state.replaceString):F1.fromStaticValue(this._state.replaceString)}replace(){if(!this._hasMatches())return;const e=this._getReplacePattern(),t=this._editor.getSelection(),i=this._getNextMatch(t.getStartPosition(),!0,!1);if(i)if(t.equalsRange(i.range)){const n=e.buildReplaceString(i.matches,this._state.preserveCase),s=new Do(t,n);this._executeEditorCommand("replace",s),this._decorations.setStartPosition(new Z(t.startLineNumber,t.startColumn+n.length)),this.research(!0)}else this._decorations.setStartPosition(this._editor.getPosition()),this._setCurrentFindMatch(i.range)}_findMatches(e,t,i){const n=(e||[null]).map(s=>WL._getSearchRange(this._editor.getModel(),s));return this._editor.getModel().findMatches(this._state.searchString,n,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(131):null,t,i)}replaceAll(){if(!this._hasMatches())return;const e=this._decorations.getFindScopes();e===null&&this._state.matchesCount>=zp?this._largeReplaceAll():this._regularReplaceAll(e),this.research(!1)}_largeReplaceAll(){const t=new W_(this._state.searchString,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(131):null).parseSearchRequest();if(!t)return;let i=t.regex;if(!i.multiline){let f="mu";i.ignoreCase&&(f+="i"),i.global&&(f+="g"),i=new RegExp(i.source,f)}const n=this._editor.getModel(),s=n.getValue(1),r=n.getFullModelRange(),a=this._getReplacePattern();let l;const c=this._state.preserveCase;a.hasReplacementPatterns||c?l=s.replace(i,function(){return a.buildReplaceString(arguments,c)}):l=s.replace(i,a.buildReplaceString(null,c));const u=new kH(r,l,this._editor.getSelection());this._executeEditorCommand("replaceAll",u)}_regularReplaceAll(e){const t=this._getReplacePattern(),i=this._findMatches(e,t.hasReplacementPatterns||this._state.preserveCase,1073741824),n=[];for(let r=0,a=i.length;r<a;r++)n[r]=t.buildReplaceString(i[r].matches,this._state.preserveCase);const s=new T9e(this._editor.getSelection(),i.map(r=>r.range),n);this._executeEditorCommand("replaceAll",s)}selectAllMatches(){if(!this._hasMatches())return;const e=this._decorations.getFindScopes();let i=this._findMatches(e,!1,1073741824).map(s=>new Xe(s.range.startLineNumber,s.range.startColumn,s.range.endLineNumber,s.range.endColumn));const n=this._editor.getSelection();for(let s=0,r=i.length;s<r;s++)if(i[s].equalsRange(n)){i=[n].concat(i.slice(0,s)).concat(i.slice(s+1));break}this._editor.setSelections(i)}_executeEditorCommand(e,t){try{this._ignoreModelContentChanged=!0,this._editor.pushUndoStop(),this._editor.executeCommand(e,t),this._editor.pushUndoStop()}finally{this._ignoreModelContentChanged=!1}}}class YP extends Rl{constructor(e,t,i){super(),this._hideSoon=this._register(new Ui(()=>this._hide(),2e3)),this._isVisible=!1,this._editor=e,this._state=t,this._keybindingService=i,this._domNode=document.createElement("div"),this._domNode.className="findOptionsWidget",this._domNode.style.display="none",this._domNode.style.top="10px",this._domNode.style.zIndex="12",this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true");const n={inputActiveOptionBorder:je(bH),inputActiveOptionForeground:je(CH),inputActiveOptionBackground:je(nv)},s=this._register(y1());this.caseSensitive=this._register(new Poe({appendTitle:this._keybindingLabelFor(gn.ToggleCaseSensitiveCommand),isChecked:this._state.matchCase,hoverDelegate:s,...n})),this._domNode.appendChild(this.caseSensitive.domNode),this._register(this.caseSensitive.onChange(()=>{this._state.change({matchCase:this.caseSensitive.checked},!1)})),this.wholeWords=this._register(new Ooe({appendTitle:this._keybindingLabelFor(gn.ToggleWholeWordCommand),isChecked:this._state.wholeWord,hoverDelegate:s,...n})),this._domNode.appendChild(this.wholeWords.domNode),this._register(this.wholeWords.onChange(()=>{this._state.change({wholeWord:this.wholeWords.checked},!1)})),this.regex=this._register(new Foe({appendTitle:this._keybindingLabelFor(gn.ToggleRegexCommand),isChecked:this._state.isRegex,hoverDelegate:s,...n})),this._domNode.appendChild(this.regex.domNode),this._register(this.regex.onChange(()=>{this._state.change({isRegex:this.regex.checked},!1)})),this._editor.addOverlayWidget(this),this._register(this._state.onFindReplaceStateChange(r=>{let a=!1;r.isRegex&&(this.regex.checked=this._state.isRegex,a=!0),r.wholeWord&&(this.wholeWords.checked=this._state.wholeWord,a=!0),r.matchCase&&(this.caseSensitive.checked=this._state.matchCase,a=!0),!this._state.isRevealed&&a&&this._revealTemporarily()})),this._register(oe(this._domNode,ke.MOUSE_LEAVE,r=>this._onMouseLeave())),this._register(oe(this._domNode,"mouseover",r=>this._onMouseOver()))}_keybindingLabelFor(e){const t=this._keybindingService.lookupKeybinding(e);return t?` (${t.getLabel()})`:""}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return YP.ID}getDomNode(){return this._domNode}getPosition(){return{preference:0}}highlightFindOptions(){this._revealTemporarily()}_revealTemporarily(){this._show(),this._hideSoon.schedule()}_onMouseLeave(){this._hideSoon.schedule()}_onMouseOver(){this._hideSoon.cancel()}_show(){this._isVisible||(this._isVisible=!0,this._domNode.style.display="block")}_hide(){this._isVisible&&(this._isVisible=!1,this._domNode.style.display="none")}}YP.ID="editor.contrib.findOptionsWidget";function XT(o,e){return o===1?!0:o===2?!1:e}class P9e extends J{get searchString(){return this._searchString}get replaceString(){return this._replaceString}get isRevealed(){return this._isRevealed}get isReplaceRevealed(){return this._isReplaceRevealed}get isRegex(){return XT(this._isRegexOverride,this._isRegex)}get wholeWord(){return XT(this._wholeWordOverride,this._wholeWord)}get matchCase(){return XT(this._matchCaseOverride,this._matchCase)}get preserveCase(){return XT(this._preserveCaseOverride,this._preserveCase)}get actualIsRegex(){return this._isRegex}get actualWholeWord(){return this._wholeWord}get actualMatchCase(){return this._matchCase}get actualPreserveCase(){return this._preserveCase}get searchScope(){return this._searchScope}get matchesPosition(){return this._matchesPosition}get matchesCount(){return this._matchesCount}get currentMatch(){return this._currentMatch}constructor(){super(),this._onFindReplaceStateChange=this._register(new Y),this.onFindReplaceStateChange=this._onFindReplaceStateChange.event,this._searchString="",this._replaceString="",this._isRevealed=!1,this._isReplaceRevealed=!1,this._isRegex=!1,this._isRegexOverride=0,this._wholeWord=!1,this._wholeWordOverride=0,this._matchCase=!1,this._matchCaseOverride=0,this._preserveCase=!1,this._preserveCaseOverride=0,this._searchScope=null,this._matchesPosition=0,this._matchesCount=0,this._currentMatch=null,this._loop=!0,this._isSearching=!1,this._filters=null}changeMatchInfo(e,t,i){const n={moveCursor:!1,updateHistory:!1,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1,isSearching:!1,filters:!1};let s=!1;t===0&&(e=0),e>t&&(e=t),this._matchesPosition!==e&&(this._matchesPosition=e,n.matchesPosition=!0,s=!0),this._matchesCount!==t&&(this._matchesCount=t,n.matchesCount=!0,s=!0),typeof i<"u"&&(A.equalsRange(this._currentMatch,i)||(this._currentMatch=i,n.currentMatch=!0,s=!0)),s&&this._onFindReplaceStateChange.fire(n)}change(e,t,i=!0){var n;const s={moveCursor:t,updateHistory:i,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1,isSearching:!1,filters:!1};let r=!1;const a=this.isRegex,l=this.wholeWord,c=this.matchCase,u=this.preserveCase;typeof e.searchString<"u"&&this._searchString!==e.searchString&&(this._searchString=e.searchString,s.searchString=!0,r=!0),typeof e.replaceString<"u"&&this._replaceString!==e.replaceString&&(this._replaceString=e.replaceString,s.replaceString=!0,r=!0),typeof e.isRevealed<"u"&&this._isRevealed!==e.isRevealed&&(this._isRevealed=e.isRevealed,s.isRevealed=!0,r=!0),typeof e.isReplaceRevealed<"u"&&this._isReplaceRevealed!==e.isReplaceRevealed&&(this._isReplaceRevealed=e.isReplaceRevealed,s.isReplaceRevealed=!0,r=!0),typeof e.isRegex<"u"&&(this._isRegex=e.isRegex),typeof e.wholeWord<"u"&&(this._wholeWord=e.wholeWord),typeof e.matchCase<"u"&&(this._matchCase=e.matchCase),typeof e.preserveCase<"u"&&(this._preserveCase=e.preserveCase),typeof e.searchScope<"u"&&(!((n=e.searchScope)===null||n===void 0)&&n.every(f=>{var g;return(g=this._searchScope)===null||g===void 0?void 0:g.some(p=>!A.equalsRange(p,f))})||(this._searchScope=e.searchScope,s.searchScope=!0,r=!0)),typeof e.loop<"u"&&this._loop!==e.loop&&(this._loop=e.loop,s.loop=!0,r=!0),typeof e.isSearching<"u"&&this._isSearching!==e.isSearching&&(this._isSearching=e.isSearching,s.isSearching=!0,r=!0),typeof e.filters<"u"&&(this._filters?this._filters.update(e.filters):this._filters=e.filters,s.filters=!0,r=!0),this._isRegexOverride=typeof e.isRegexOverride<"u"?e.isRegexOverride:0,this._wholeWordOverride=typeof e.wholeWordOverride<"u"?e.wholeWordOverride:0,this._matchCaseOverride=typeof e.matchCaseOverride<"u"?e.matchCaseOverride:0,this._preserveCaseOverride=typeof e.preserveCaseOverride<"u"?e.preserveCaseOverride:0,a!==this.isRegex&&(r=!0,s.isRegex=!0),l!==this.wholeWord&&(r=!0,s.wholeWord=!0),c!==this.matchCase&&(r=!0,s.matchCase=!0),u!==this.preserveCase&&(r=!0,s.preserveCase=!0),r&&this._onFindReplaceStateChange.fire(s)}canNavigateBack(){return this.canNavigateInLoop()||this.matchesPosition!==1}canNavigateForward(){return this.canNavigateInLoop()||this.matchesPosition<this.matchesCount}canNavigateInLoop(){return this._loop||this.matchesCount>=zp}}const O9e=v("defaultLabel","input"),F9e=v("label.preserveCaseToggle","Preserve Case");class B9e extends tw{constructor(e){var t;super({icon:Ee.preserveCase,title:F9e+e.appendTitle,isChecked:e.isChecked,hoverDelegate:(t=e.hoverDelegate)!==null&&t!==void 0?t:ya("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class W9e extends Rl{constructor(e,t,i,n){super(),this._showOptionButtons=i,this.fixFocusOnOptionClickEnabled=!0,this.cachedOptionsWidth=0,this._onDidOptionChange=this._register(new Y),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new Y),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new Y),this._onInput=this._register(new Y),this._onKeyUp=this._register(new Y),this._onPreserveCaseKeyDown=this._register(new Y),this.onPreserveCaseKeyDown=this._onPreserveCaseKeyDown.event,this.contextViewProvider=t,this.placeholder=n.placeholder||"",this.validation=n.validation,this.label=n.label||O9e;const s=n.appendPreserveCaseLabel||"",r=n.history||[],a=!!n.flexibleHeight,l=!!n.flexibleWidth,c=n.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new Boe(this.domNode,this.contextViewProvider,{ariaLabel:this.label||"",placeholder:this.placeholder||"",validationOptions:{validation:this.validation},history:r,showHistoryHint:n.showHistoryHint,flexibleHeight:a,flexibleWidth:l,flexibleMaxHeight:c,inputBoxStyles:n.inputBoxStyles})),this.preserveCase=this._register(new B9e({appendTitle:s,isChecked:!1,...n.toggleStyles})),this._register(this.preserveCase.onChange(g=>{this._onDidOptionChange.fire(g),!g&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.preserveCase.onKeyDown(g=>{this._onPreserveCaseKeyDown.fire(g)})),this._showOptionButtons?this.cachedOptionsWidth=this.preserveCase.width():this.cachedOptionsWidth=0;const u=[this.preserveCase.domNode];this.onkeydown(this.domNode,g=>{if(g.equals(15)||g.equals(17)||g.equals(9)){const p=u.indexOf(this.domNode.ownerDocument.activeElement);if(p>=0){let _=-1;g.equals(17)?_=(p+1)%u.length:g.equals(15)&&(p===0?_=u.length-1:_=p-1),g.equals(9)?(u[p].blur(),this.inputBox.focus()):_>=0&&u[_].focus(),Ut.stop(g,!0)}}});const f=document.createElement("div");f.className="controls",f.style.display=this._showOptionButtons?"block":"none",f.appendChild(this.preserveCase.domNode),this.domNode.appendChild(f),e==null||e.appendChild(this.domNode),this.onkeydown(this.inputBox.inputElement,g=>this._onKeyDown.fire(g)),this.onkeyup(this.inputBox.inputElement,g=>this._onKeyUp.fire(g)),this.oninput(this.inputBox.inputElement,g=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,g=>this._onMouseDown.fire(g))}enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.preserveCase.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.preserveCase.disable()}setEnabled(e){e?this.enable():this.disable()}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getPreserveCase(){return this.preserveCase.checked}setPreserveCase(e){this.preserveCase.checked=e}focusOnPreserve(){this.preserveCase.focus()}validate(){var e;(e=this.inputBox)===null||e===void 0||e.validate()}set width(e){this.inputBox.paddingRight=this.cachedOptionsWidth,this.domNode.style.width=e+"px"}dispose(){super.dispose()}}var Sle=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Lle=function(o,e){return function(t,i){e(t,i,o)}};const vU=new Be("suggestWidgetVisible",!1,v("suggestWidgetVisible","Whether suggestion are visible")),bU="historyNavigationWidgetFocus",xle="historyNavigationForwardsEnabled",Dle="historyNavigationBackwardsEnabled";let Xf;const JT=[];function kle(o,e){if(JT.includes(e))throw new Error("Cannot register the same widget multiple times");JT.push(e);const t=new he,i=new Be(bU,!1).bindTo(o),n=new Be(xle,!0).bindTo(o),s=new Be(Dle,!0).bindTo(o),r=()=>{i.set(!0),Xf=e},a=()=>{i.set(!1),Xf===e&&(Xf=void 0)};return _A(e.element)&&r(),t.add(e.onDidFocus(()=>r())),t.add(e.onDidBlur(()=>a())),t.add(lt(()=>{JT.splice(JT.indexOf(e),1),a()})),{historyNavigationForwardsEnablement:n,historyNavigationBackwardsEnablement:s,dispose(){t.dispose()}}}let f6=class extends Woe{constructor(e,t,i,n){super(e,t,i);const s=this._register(n.createScoped(this.inputBox.element));this._register(kle(s,this.inputBox))}};f6=Sle([Lle(3,bt)],f6);let g6=class extends W9e{constructor(e,t,i,n,s=!1){super(e,t,s,i);const r=this._register(n.createScoped(this.inputBox.element));this._register(kle(r,this.inputBox))}};g6=Sle([Lle(3,bt)],g6);ma.registerCommandAndKeybindingRule({id:"history.showPrevious",weight:200,when:ue.and(ue.has(bU),ue.equals(Dle,!0),ue.not("isComposing"),vU.isEqualTo(!1)),primary:16,secondary:[528],handler:o=>{Xf==null||Xf.showPreviousValue()}});ma.registerCommandAndKeybindingRule({id:"history.showNext",weight:200,when:ue.and(ue.has(bU),ue.equals(xle,!0),ue.not("isComposing"),vU.isEqualTo(!1)),primary:18,secondary:[530],handler:o=>{Xf==null||Xf.showNextValue()}});function vee(o){var e,t;return((e=o.lookupKeybinding("history.showPrevious"))===null||e===void 0?void 0:e.getElectronAccelerator())==="Up"&&((t=o.lookupKeybinding("history.showNext"))===null||t===void 0?void 0:t.getElectronAccelerator())==="Down"}const V9e=gs("find-selection",Ee.selection,v("findSelectionIcon","Icon for 'Find in Selection' in the editor find widget.")),bee=gs("find-collapsed",Ee.chevronRight,v("findCollapsedIcon","Icon to indicate that the editor find widget is collapsed.")),Cee=gs("find-expanded",Ee.chevronDown,v("findExpandedIcon","Icon to indicate that the editor find widget is expanded.")),H9e=gs("find-replace",Ee.replace,v("findReplaceIcon","Icon for 'Replace' in the editor find widget.")),z9e=gs("find-replace-all",Ee.replaceAll,v("findReplaceAllIcon","Icon for 'Replace All' in the editor find widget.")),U9e=gs("find-previous-match",Ee.arrowUp,v("findPreviousMatchIcon","Icon for 'Find Previous' in the editor find widget.")),$9e=gs("find-next-match",Ee.arrowDown,v("findNextMatchIcon","Icon for 'Find Next' in the editor find widget.")),j9e=v("label.findDialog","Find / Replace"),K9e=v("label.find","Find"),q9e=v("placeholder.find","Find"),G9e=v("label.previousMatchButton","Previous Match"),Y9e=v("label.nextMatchButton","Next Match"),Z9e=v("label.toggleSelectionFind","Find in Selection"),Q9e=v("label.closeButton","Close"),X9e=v("label.replace","Replace"),J9e=v("placeholder.replace","Replace"),e8e=v("label.replaceButton","Replace"),t8e=v("label.replaceAllButton","Replace All"),i8e=v("label.toggleReplaceButton","Toggle Replace"),n8e=v("title.matchesCountLimit","Only the first {0} results are highlighted, but all find operations work on the entire text.",zp),s8e=v("label.matchesLocation","{0} of {1}"),wee=v("label.noResults","No results"),ku=419,o8e=275,r8e=o8e-54;let MS=69;const a8e=33,yee="ctrlEnterReplaceAll.windows.donotask",See=Kt?256:2048;class LB{constructor(e){this.afterLineNumber=e,this.heightInPx=a8e,this.suppressMouseDown=!1,this.domNode=document.createElement("div"),this.domNode.className="dock-find-viewzone"}}function Lee(o,e,t){const i=!!e.match(/\n/);if(t&&i&&t.selectionStart>0){o.stopPropagation();return}}function xee(o,e,t){const i=!!e.match(/\n/);if(t&&i&&t.selectionEnd<t.value.length){o.stopPropagation();return}}class ZP extends Rl{constructor(e,t,i,n,s,r,a,l,c){super(),this._cachedHeight=null,this._revealTimeouts=[],this._codeEditor=e,this._controller=t,this._state=i,this._contextViewProvider=n,this._keybindingService=s,this._contextKeyService=r,this._storageService=l,this._notificationService=c,this._ctrlEnterReplaceAllWarningPrompted=!!l.getBoolean(yee,0),this._isVisible=!1,this._isReplaceVisible=!1,this._ignoreChangeEvent=!1,this._updateHistoryDelayer=new Kc(500),this._register(lt(()=>this._updateHistoryDelayer.cancel())),this._register(this._state.onFindReplaceStateChange(u=>this._onStateChanged(u))),this._buildDomNode(),this._updateButtons(),this._tryUpdateWidgetWidth(),this._findInput.inputBox.layout(),this._register(this._codeEditor.onDidChangeConfiguration(u=>{if(u.hasChanged(91)&&(this._codeEditor.getOption(91)&&this._state.change({isReplaceRevealed:!1},!1),this._updateButtons()),u.hasChanged(145)&&this._tryUpdateWidgetWidth(),u.hasChanged(2)&&this.updateAccessibilitySupport(),u.hasChanged(41)){const f=this._codeEditor.getOption(41).loop;this._state.change({loop:f},!1);const g=this._codeEditor.getOption(41).addExtraSpaceOnTop;g&&!this._viewZone&&(this._viewZone=new LB(0),this._showViewZone()),!g&&this._viewZone&&this._removeViewZone()}})),this.updateAccessibilitySupport(),this._register(this._codeEditor.onDidChangeCursorSelection(()=>{this._isVisible&&this._updateToggleSelectionFindButton()})),this._register(this._codeEditor.onDidFocusEditorWidget(async()=>{if(this._isVisible){const u=await this._controller.getGlobalBufferTerm();u&&u!==this._state.searchString&&(this._state.change({searchString:u},!1),this._findInput.select())}})),this._findInputFocused=GP.bindTo(r),this._findFocusTracker=this._register(Kd(this._findInput.inputBox.inputElement)),this._register(this._findFocusTracker.onDidFocus(()=>{this._findInputFocused.set(!0),this._updateSearchScope()})),this._register(this._findFocusTracker.onDidBlur(()=>{this._findInputFocused.set(!1)})),this._replaceInputFocused=_U.bindTo(r),this._replaceFocusTracker=this._register(Kd(this._replaceInput.inputBox.inputElement)),this._register(this._replaceFocusTracker.onDidFocus(()=>{this._replaceInputFocused.set(!0),this._updateSearchScope()})),this._register(this._replaceFocusTracker.onDidBlur(()=>{this._replaceInputFocused.set(!1)})),this._codeEditor.addOverlayWidget(this),this._codeEditor.getOption(41).addExtraSpaceOnTop&&(this._viewZone=new LB(0)),this._register(this._codeEditor.onDidChangeModel(()=>{this._isVisible&&(this._viewZoneId=void 0)})),this._register(this._codeEditor.onDidScrollChange(u=>{if(u.scrollTopChanged){this._layoutViewZone();return}setTimeout(()=>{this._layoutViewZone()},0)}))}getId(){return ZP.ID}getDomNode(){return this._domNode}getPosition(){return this._isVisible?{preference:0}:null}_onStateChanged(e){if(e.searchString){try{this._ignoreChangeEvent=!0,this._findInput.setValue(this._state.searchString)}finally{this._ignoreChangeEvent=!1}this._updateButtons()}if(e.replaceString&&(this._replaceInput.inputBox.value=this._state.replaceString),e.isRevealed&&(this._state.isRevealed?this._reveal():this._hide(!0)),e.isReplaceRevealed&&(this._state.isReplaceRevealed?!this._codeEditor.getOption(91)&&!this._isReplaceVisible&&(this._isReplaceVisible=!0,this._replaceInput.width=Ir(this._findInput.domNode),this._updateButtons(),this._replaceInput.inputBox.layout()):this._isReplaceVisible&&(this._isReplaceVisible=!1,this._updateButtons())),(e.isRevealed||e.isReplaceRevealed)&&(this._state.isRevealed||this._state.isReplaceRevealed)&&this._tryUpdateHeight()&&this._showViewZone(),e.isRegex&&this._findInput.setRegex(this._state.isRegex),e.wholeWord&&this._findInput.setWholeWords(this._state.wholeWord),e.matchCase&&this._findInput.setCaseSensitive(this._state.matchCase),e.preserveCase&&this._replaceInput.setPreserveCase(this._state.preserveCase),e.searchScope&&(this._state.searchScope?this._toggleSelectionFind.checked=!0:this._toggleSelectionFind.checked=!1,this._updateToggleSelectionFindButton()),e.searchString||e.matchesCount||e.matchesPosition){const t=this._state.searchString.length>0&&this._state.matchesCount===0;this._domNode.classList.toggle("no-results",t),this._updateMatchesCount(),this._updateButtons()}(e.searchString||e.currentMatch)&&this._layoutViewZone(),e.updateHistory&&this._delayedUpdateHistory(),e.loop&&this._updateButtons()}_delayedUpdateHistory(){this._updateHistoryDelayer.trigger(this._updateHistory.bind(this)).then(void 0,Nt)}_updateHistory(){this._state.searchString&&this._findInput.inputBox.addToHistory(),this._state.replaceString&&this._replaceInput.inputBox.addToHistory()}_updateMatchesCount(){this._matchesCount.style.minWidth=MS+"px",this._state.matchesCount>=zp?this._matchesCount.title=n8e:this._matchesCount.title="",this._matchesCount.firstChild&&this._matchesCount.removeChild(this._matchesCount.firstChild);let e;if(this._state.matchesCount>0){let t=String(this._state.matchesCount);this._state.matchesCount>=zp&&(t+="+");let i=String(this._state.matchesPosition);i==="0"&&(i="?"),e=kv(s8e,i,t)}else e=wee;this._matchesCount.appendChild(document.createTextNode(e)),_a(this._getAriaLabel(e,this._state.currentMatch,this._state.searchString)),MS=Math.max(MS,this._matchesCount.clientWidth)}_getAriaLabel(e,t,i){if(e===wee)return i===""?v("ariaSearchNoResultEmpty","{0} found",e):v("ariaSearchNoResult","{0} found for '{1}'",e,i);if(t){const n=v("ariaSearchNoResultWithLineNum","{0} found for '{1}', at {2}",e,i,t.startLineNumber+":"+t.startColumn),s=this._codeEditor.getModel();return s&&t.startLineNumber<=s.getLineCount()&&t.startLineNumber>=1?`${s.getLineContent(t.startLineNumber)}, ${n}`:n}return v("ariaSearchNoResultWithLineNumNoCurrentMatch","{0} found for '{1}'",e,i)}_updateToggleSelectionFindButton(){const e=this._codeEditor.getSelection(),t=e?e.startLineNumber!==e.endLineNumber||e.startColumn!==e.endColumn:!1,i=this._toggleSelectionFind.checked;this._isVisible&&(i||t)?this._toggleSelectionFind.enable():this._toggleSelectionFind.disable()}_updateButtons(){this._findInput.setEnabled(this._isVisible),this._replaceInput.setEnabled(this._isVisible&&this._isReplaceVisible),this._updateToggleSelectionFindButton(),this._closeBtn.setEnabled(this._isVisible);const e=this._state.searchString.length>0,t=!!this._state.matchesCount;this._prevBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateBack()),this._nextBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateForward()),this._replaceBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._replaceAllBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._domNode.classList.toggle("replaceToggled",this._isReplaceVisible),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);const i=!this._codeEditor.getOption(91);this._toggleReplaceBtn.setEnabled(this._isVisible&&i)}_reveal(){if(this._revealTimeouts.forEach(e=>{clearTimeout(e)}),this._revealTimeouts=[],!this._isVisible){this._isVisible=!0;const e=this._codeEditor.getSelection();switch(this._codeEditor.getOption(41).autoFindInSelection){case"always":this._toggleSelectionFind.checked=!0;break;case"never":this._toggleSelectionFind.checked=!1;break;case"multiline":{const i=!!e&&e.startLineNumber!==e.endLineNumber;this._toggleSelectionFind.checked=i;break}}this._tryUpdateWidgetWidth(),this._updateButtons(),this._revealTimeouts.push(setTimeout(()=>{this._domNode.classList.add("visible"),this._domNode.setAttribute("aria-hidden","false")},0)),this._revealTimeouts.push(setTimeout(()=>{this._findInput.validate()},200)),this._codeEditor.layoutOverlayWidget(this);let t=!0;if(this._codeEditor.getOption(41).seedSearchStringFromSelection&&e){const i=this._codeEditor.getDomNode();if(i){const n=ws(i),s=this._codeEditor.getScrolledVisiblePosition(e.getStartPosition()),r=n.left+(s?s.left:0),a=s?s.top:0;if(this._viewZone&&a<this._viewZone.heightInPx){e.endLineNumber>e.startLineNumber&&(t=!1);const l=Aie(this._domNode).left;r>l&&(t=!1);const c=this._codeEditor.getScrolledVisiblePosition(e.getEndPosition());n.left+(c?c.left:0)>l&&(t=!1)}}}this._showViewZone(t)}}_hide(e){this._revealTimeouts.forEach(t=>{clearTimeout(t)}),this._revealTimeouts=[],this._isVisible&&(this._isVisible=!1,this._updateButtons(),this._domNode.classList.remove("visible"),this._domNode.setAttribute("aria-hidden","true"),this._findInput.clearMessage(),e&&this._codeEditor.focus(),this._codeEditor.layoutOverlayWidget(this),this._removeViewZone())}_layoutViewZone(e){if(!this._codeEditor.getOption(41).addExtraSpaceOnTop){this._removeViewZone();return}if(!this._isVisible)return;const i=this._viewZone;this._viewZoneId!==void 0||!i||this._codeEditor.changeViewZones(n=>{i.heightInPx=this._getHeight(),this._viewZoneId=n.addZone(i),this._codeEditor.setScrollTop(e||this._codeEditor.getScrollTop()+i.heightInPx)})}_showViewZone(e=!0){if(!this._isVisible||!this._codeEditor.getOption(41).addExtraSpaceOnTop)return;this._viewZone===void 0&&(this._viewZone=new LB(0));const i=this._viewZone;this._codeEditor.changeViewZones(n=>{if(this._viewZoneId!==void 0){const s=this._getHeight();if(s===i.heightInPx)return;const r=s-i.heightInPx;i.heightInPx=s,n.layoutZone(this._viewZoneId),e&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+r);return}else{let s=this._getHeight();if(s-=this._codeEditor.getOption(84).top,s<=0)return;i.heightInPx=s,this._viewZoneId=n.addZone(i),e&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+s)}})}_removeViewZone(){this._codeEditor.changeViewZones(e=>{this._viewZoneId!==void 0&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0,this._viewZone&&(this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()-this._viewZone.heightInPx),this._viewZone=void 0))})}_tryUpdateWidgetWidth(){if(!this._isVisible||!this._domNode.isConnected)return;const e=this._codeEditor.getLayoutInfo();if(e.contentWidth<=0){this._domNode.classList.add("hiddenEditor");return}else this._domNode.classList.contains("hiddenEditor")&&this._domNode.classList.remove("hiddenEditor");const i=e.width,n=e.minimap.minimapWidth;let s=!1,r=!1,a=!1;if(this._resized&&Ir(this._domNode)>ku){this._domNode.style.maxWidth=`${i-28-n-15}px`,this._replaceInput.width=Ir(this._findInput.domNode);return}if(ku+28+n>=i&&(r=!0),ku+28+n-MS>=i&&(a=!0),ku+28+n-MS>=i+50&&(s=!0),this._domNode.classList.toggle("collapsed-find-widget",s),this._domNode.classList.toggle("narrow-find-widget",a),this._domNode.classList.toggle("reduced-find-widget",r),!a&&!s&&(this._domNode.style.maxWidth=`${i-28-n-15}px`),this._findInput.layout({collapsedFindWidget:s,narrowFindWidget:a,reducedFindWidget:r}),this._resized){const l=this._findInput.inputBox.element.clientWidth;l>0&&(this._replaceInput.width=l)}else this._isReplaceVisible&&(this._replaceInput.width=Ir(this._findInput.domNode))}_getHeight(){let e=0;return e+=4,e+=this._findInput.inputBox.height+2,this._isReplaceVisible&&(e+=4,e+=this._replaceInput.inputBox.height+2),e+=4,e}_tryUpdateHeight(){const e=this._getHeight();return this._cachedHeight!==null&&this._cachedHeight===e?!1:(this._cachedHeight=e,this._domNode.style.height=`${e}px`,!0)}focusFindInput(){this._findInput.select(),this._findInput.focus()}focusReplaceInput(){this._replaceInput.select(),this._replaceInput.focus()}highlightFindOptions(){this._findInput.highlightFindOptions()}_updateSearchScope(){if(this._codeEditor.hasModel()&&this._toggleSelectionFind.checked){const e=this._codeEditor.getSelections();e.map(t=>{t.endColumn===1&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(t.endLineNumber-1)));const i=this._state.currentMatch;return t.startLineNumber!==t.endLineNumber&&!A.equalsRange(t,i)?t:null}).filter(t=>!!t),e.length&&this._state.change({searchScope:e},!0)}}_onFindInputMouseDown(e){e.middleButton&&e.stopPropagation()}_onFindInputKeyDown(e){if(e.equals(See|3))if(this._keybindingService.dispatchEvent(e,e.target)){e.preventDefault();return}else{this._findInput.inputBox.insertAtCursor(`
`),e.preventDefault();return}if(e.equals(2)){this._isReplaceVisible?this._replaceInput.focus():this._findInput.focusOnCaseSensitive(),e.preventDefault();return}if(e.equals(2066)){this._codeEditor.focus(),e.preventDefault();return}if(e.equals(16))return Lee(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea"));if(e.equals(18))return xee(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea"))}_onReplaceInputKeyDown(e){if(e.equals(See|3))if(this._keybindingService.dispatchEvent(e,e.target)){e.preventDefault();return}else{Mo&&Od&&!this._ctrlEnterReplaceAllWarningPrompted&&(this._notificationService.info(v("ctrlEnter.keybindingChanged","Ctrl+Enter now inserts line break instead of replacing all. You can modify the keybinding for editor.action.replaceAll to override this behavior.")),this._ctrlEnterReplaceAllWarningPrompted=!0,this._storageService.store(yee,!0,0,0)),this._replaceInput.inputBox.insertAtCursor(`
`),e.preventDefault();return}if(e.equals(2)){this._findInput.focusOnCaseSensitive(),e.preventDefault();return}if(e.equals(1026)){this._findInput.focus(),e.preventDefault();return}if(e.equals(2066)){this._codeEditor.focus(),e.preventDefault();return}if(e.equals(16))return Lee(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea"));if(e.equals(18))return xee(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea"))}getVerticalSashLeft(e){return 0}_keybindingLabelFor(e){const t=this._keybindingService.lookupKeybinding(e);return t?` (${t.getLabel()})`:""}_buildDomNode(){this._findInput=this._register(new f6(null,this._contextViewProvider,{width:r8e,label:K9e,placeholder:q9e,appendCaseSensitiveLabel:this._keybindingLabelFor(gn.ToggleCaseSensitiveCommand),appendWholeWordsLabel:this._keybindingLabelFor(gn.ToggleWholeWordCommand),appendRegexLabel:this._keybindingLabelFor(gn.ToggleRegexCommand),validation:u=>{if(u.length===0||!this._findInput.getRegex())return null;try{return new RegExp(u,"gu"),null}catch(f){return{content:f.message}}},flexibleHeight:!0,flexibleWidth:!0,flexibleMaxHeight:118,showCommonFindToggles:!0,showHistoryHint:()=>vee(this._keybindingService),inputBoxStyles:oM,toggleStyles:sM},this._contextKeyService)),this._findInput.setRegex(!!this._state.isRegex),this._findInput.setCaseSensitive(!!this._state.matchCase),this._findInput.setWholeWords(!!this._state.wholeWord),this._register(this._findInput.onKeyDown(u=>this._onFindInputKeyDown(u))),this._register(this._findInput.inputBox.onDidChange(()=>{this._ignoreChangeEvent||this._state.change({searchString:this._findInput.getValue()},!0)})),this._register(this._findInput.onDidOptionChange(()=>{this._state.change({isRegex:this._findInput.getRegex(),wholeWord:this._findInput.getWholeWords(),matchCase:this._findInput.getCaseSensitive()},!0)})),this._register(this._findInput.onCaseSensitiveKeyDown(u=>{u.equals(1026)&&this._isReplaceVisible&&(this._replaceInput.focus(),u.preventDefault())})),this._register(this._findInput.onRegexKeyDown(u=>{u.equals(2)&&this._isReplaceVisible&&(this._replaceInput.focusOnPreserve(),u.preventDefault())})),this._register(this._findInput.inputBox.onDidHeightChange(u=>{this._tryUpdateHeight()&&this._showViewZone()})),jr&&this._register(this._findInput.onMouseDown(u=>this._onFindInputMouseDown(u))),this._matchesCount=document.createElement("div"),this._matchesCount.className="matchesCount",this._updateMatchesCount();const i=this._register(y1());this._prevBtn=this._register(new P0({label:G9e+this._keybindingLabelFor(gn.PreviousMatchFindAction),icon:U9e,hoverDelegate:i,onTrigger:()=>{Dp(this._codeEditor.getAction(gn.PreviousMatchFindAction)).run().then(void 0,Nt)}})),this._nextBtn=this._register(new P0({label:Y9e+this._keybindingLabelFor(gn.NextMatchFindAction),icon:$9e,hoverDelegate:i,onTrigger:()=>{Dp(this._codeEditor.getAction(gn.NextMatchFindAction)).run().then(void 0,Nt)}}));const n=document.createElement("div");n.className="find-part",n.appendChild(this._findInput.domNode);const s=document.createElement("div");s.className="find-actions",n.appendChild(s),s.appendChild(this._matchesCount),s.appendChild(this._prevBtn.domNode),s.appendChild(this._nextBtn.domNode),this._toggleSelectionFind=this._register(new tw({icon:V9e,title:Z9e+this._keybindingLabelFor(gn.ToggleSearchScopeCommand),isChecked:!1,hoverDelegate:i,inputActiveOptionBackground:je(nv),inputActiveOptionBorder:je(bH),inputActiveOptionForeground:je(CH)})),this._register(this._toggleSelectionFind.onChange(()=>{if(this._toggleSelectionFind.checked){if(this._codeEditor.hasModel()){let u=this._codeEditor.getSelections();u=u.map(f=>(f.endColumn===1&&f.endLineNumber>f.startLineNumber&&(f=f.setEndPosition(f.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(f.endLineNumber-1))),f.isEmpty()?null:f)).filter(f=>!!f),u.length&&this._state.change({searchScope:u},!0)}}else this._state.change({searchScope:null},!0)})),s.appendChild(this._toggleSelectionFind.domNode),this._closeBtn=this._register(new P0({label:Q9e+this._keybindingLabelFor(gn.CloseFindWidgetCommand),icon:hre,hoverDelegate:i,onTrigger:()=>{this._state.change({isRevealed:!1,searchScope:null},!1)},onKeyDown:u=>{u.equals(2)&&this._isReplaceVisible&&(this._replaceBtn.isEnabled()?this._replaceBtn.focus():this._codeEditor.focus(),u.preventDefault())}})),this._replaceInput=this._register(new g6(null,void 0,{label:X9e,placeholder:J9e,appendPreserveCaseLabel:this._keybindingLabelFor(gn.TogglePreserveCaseCommand),history:[],flexibleHeight:!0,flexibleWidth:!0,flexibleMaxHeight:118,showHistoryHint:()=>vee(this._keybindingService),inputBoxStyles:oM,toggleStyles:sM},this._contextKeyService,!0)),this._replaceInput.setPreserveCase(!!this._state.preserveCase),this._register(this._replaceInput.onKeyDown(u=>this._onReplaceInputKeyDown(u))),this._register(this._replaceInput.inputBox.onDidChange(()=>{this._state.change({replaceString:this._replaceInput.inputBox.value},!1)})),this._register(this._replaceInput.inputBox.onDidHeightChange(u=>{this._isReplaceVisible&&this._tryUpdateHeight()&&this._showViewZone()})),this._register(this._replaceInput.onDidOptionChange(()=>{this._state.change({preserveCase:this._replaceInput.getPreserveCase()},!0)})),this._register(this._replaceInput.onPreserveCaseKeyDown(u=>{u.equals(2)&&(this._prevBtn.isEnabled()?this._prevBtn.focus():this._nextBtn.isEnabled()?this._nextBtn.focus():this._toggleSelectionFind.enabled?this._toggleSelectionFind.focus():this._closeBtn.isEnabled()&&this._closeBtn.focus(),u.preventDefault())}));const r=this._register(y1());this._replaceBtn=this._register(new P0({label:e8e+this._keybindingLabelFor(gn.ReplaceOneAction),icon:H9e,hoverDelegate:r,onTrigger:()=>{this._controller.replace()},onKeyDown:u=>{u.equals(1026)&&(this._closeBtn.focus(),u.preventDefault())}})),this._replaceAllBtn=this._register(new P0({label:t8e+this._keybindingLabelFor(gn.ReplaceAllAction),icon:z9e,hoverDelegate:r,onTrigger:()=>{this._controller.replaceAll()}}));const a=document.createElement("div");a.className="replace-part",a.appendChild(this._replaceInput.domNode);const l=document.createElement("div");l.className="replace-actions",a.appendChild(l),l.appendChild(this._replaceBtn.domNode),l.appendChild(this._replaceAllBtn.domNode),this._toggleReplaceBtn=this._register(new P0({label:i8e,className:"codicon toggle left",onTrigger:()=>{this._state.change({isReplaceRevealed:!this._isReplaceVisible},!1),this._isReplaceVisible&&(this._replaceInput.width=Ir(this._findInput.domNode),this._replaceInput.inputBox.layout()),this._showViewZone()}})),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible),this._domNode=document.createElement("div"),this._domNode.className="editor-widget find-widget",this._domNode.setAttribute("aria-hidden","true"),this._domNode.ariaLabel=j9e,this._domNode.role="dialog",this._domNode.style.width=`${ku}px`,this._domNode.appendChild(this._toggleReplaceBtn.domNode),this._domNode.appendChild(n),this._domNode.appendChild(this._closeBtn.domNode),this._domNode.appendChild(a),this._resizeSash=this._register(new jo(this._domNode,this,{orientation:0,size:2})),this._resized=!1;let c=ku;this._register(this._resizeSash.onDidStart(()=>{c=Ir(this._domNode)})),this._register(this._resizeSash.onDidChange(u=>{this._resized=!0;const f=c+u.startX-u.currentX;if(f<ku)return;const g=parseFloat(mA(this._domNode).maxWidth)||0;f>g||(this._domNode.style.width=`${f}px`,this._isReplaceVisible&&(this._replaceInput.width=Ir(this._findInput.domNode)),this._findInput.inputBox.layout(),this._tryUpdateHeight())})),this._register(this._resizeSash.onDidReset(()=>{const u=Ir(this._domNode);if(u<ku)return;let f=ku;if(!this._resized||u===ku){const g=this._codeEditor.getLayoutInfo();f=g.width-28-g.minimap.minimapWidth-15,this._resized=!0}this._domNode.style.width=`${f}px`,this._isReplaceVisible&&(this._replaceInput.width=Ir(this._findInput.domNode)),this._findInput.inputBox.layout()}))}updateAccessibilitySupport(){const e=this._codeEditor.getOption(2);this._findInput.setFocusInputOnOptionClick(e!==2)}}ZP.ID="editor.contrib.findWidget";class P0 extends Rl{constructor(e){var t;super(),this._opts=e;let i="button";this._opts.className&&(i=i+" "+this._opts.className),this._opts.icon&&(i=i+" "+pt.asClassName(this._opts.icon)),this._domNode=document.createElement("div"),this._domNode.tabIndex=0,this._domNode.className=i,this._domNode.setAttribute("role","button"),this._domNode.setAttribute("aria-label",this._opts.label),this._register(Zc((t=e.hoverDelegate)!==null&&t!==void 0?t:ya("element"),this._domNode,this._opts.label)),this.onclick(this._domNode,n=>{this._opts.onTrigger(),n.preventDefault()}),this.onkeydown(this._domNode,n=>{var s,r;if(n.equals(10)||n.equals(3)){this._opts.onTrigger(),n.preventDefault();return}(r=(s=this._opts).onKeyDown)===null||r===void 0||r.call(s,n)})}get domNode(){return this._domNode}isEnabled(){return this._domNode.tabIndex>=0}focus(){this._domNode.focus()}setEnabled(e){this._domNode.classList.toggle("disabled",!e),this._domNode.setAttribute("aria-disabled",String(!e)),this._domNode.tabIndex=e?0:-1}setExpanded(e){this._domNode.setAttribute("aria-expanded",String(!!e)),e?(this._domNode.classList.remove(...pt.asClassNameArray(bee)),this._domNode.classList.add(...pt.asClassNameArray(Cee))):(this._domNode.classList.remove(...pt.asClassNameArray(Cee)),this._domNode.classList.add(...pt.asClassNameArray(bee)))}}_c((o,e)=>{const t=o.getColor(Np);t&&e.addRule(`.monaco-editor .findMatch { border: 1px ${Vd(o.type)?"dotted":"solid"} ${t}; box-sizing: border-box; }`);const i=o.getColor(OLe);i&&e.addRule(`.monaco-editor .findScope { border: 1px ${Vd(o.type)?"dashed":"solid"} ${i}; }`);const n=o.getColor(Jt);n&&e.addRule(`.monaco-editor .find-widget { border: 1px solid ${n}; }`)});var Ele=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Ld=function(o,e){return function(t,i){e(t,i,o)}},p6;const l8e=524288;function m6(o,e="single",t=!1){if(!o.hasModel())return null;const i=o.getSelection();if(e==="single"&&i.startLineNumber===i.endLineNumber||e==="multiple"){if(i.isEmpty()){const n=o.getConfiguredWordAtPosition(i.getStartPosition());if(n&&t===!1)return n.word}else if(o.getModel().getValueLengthInRange(i)<l8e)return o.getModel().getValueInRange(i)}return null}let qr=p6=class extends J{get editor(){return this._editor}static get(e){return e.getContribution(p6.ID)}constructor(e,t,i,n,s){super(),this._editor=e,this._findWidgetVisible=vg.bindTo(t),this._contextKeyService=t,this._storageService=i,this._clipboardService=n,this._notificationService=s,this._updateHistoryDelayer=new Kc(500),this._state=this._register(new P9e),this.loadQueryState(),this._register(this._state.onFindReplaceStateChange(r=>this._onStateChanged(r))),this._model=null,this._register(this._editor.onDidChangeModel(()=>{const r=this._editor.getModel()&&this._state.isRevealed;this.disposeModel(),this._state.change({searchScope:null,matchCase:this._storageService.getBoolean("editor.matchCase",1,!1),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,!1),isRegex:this._storageService.getBoolean("editor.isRegex",1,!1),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,!1)},!1),r&&this._start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!1,updateSearchScope:!1,loop:this._editor.getOption(41).loop})}))}dispose(){this.disposeModel(),super.dispose()}disposeModel(){this._model&&(this._model.dispose(),this._model=null)}_onStateChanged(e){this.saveQueryState(e),e.isRevealed&&(this._state.isRevealed?this._findWidgetVisible.set(!0):(this._findWidgetVisible.reset(),this.disposeModel())),e.searchString&&this.setGlobalBufferTerm(this._state.searchString)}saveQueryState(e){e.isRegex&&this._storageService.store("editor.isRegex",this._state.actualIsRegex,1,1),e.wholeWord&&this._storageService.store("editor.wholeWord",this._state.actualWholeWord,1,1),e.matchCase&&this._storageService.store("editor.matchCase",this._state.actualMatchCase,1,1),e.preserveCase&&this._storageService.store("editor.preserveCase",this._state.actualPreserveCase,1,1)}loadQueryState(){this._state.change({matchCase:this._storageService.getBoolean("editor.matchCase",1,this._state.matchCase),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,this._state.wholeWord),isRegex:this._storageService.getBoolean("editor.isRegex",1,this._state.isRegex),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,this._state.preserveCase)},!1)}isFindInputFocused(){return!!GP.getValue(this._contextKeyService)}getState(){return this._state}closeFindWidget(){this._state.change({isRevealed:!1,searchScope:null},!1),this._editor.focus()}toggleCaseSensitive(){this._state.change({matchCase:!this._state.matchCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleWholeWords(){this._state.change({wholeWord:!this._state.wholeWord},!1),this._state.isRevealed||this.highlightFindOptions()}toggleRegex(){this._state.change({isRegex:!this._state.isRegex},!1),this._state.isRevealed||this.highlightFindOptions()}togglePreserveCase(){this._state.change({preserveCase:!this._state.preserveCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleSearchScope(){if(this._state.searchScope)this._state.change({searchScope:null},!0);else if(this._editor.hasModel()){let e=this._editor.getSelections();e=e.map(t=>(t.endColumn===1&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,this._editor.getModel().getLineMaxColumn(t.endLineNumber-1))),t.isEmpty()?null:t)).filter(t=>!!t),e.length&&this._state.change({searchScope:e},!0)}}setSearchString(e){this._state.isRegex&&(e=Ll(e)),this._state.change({searchString:e},!1)}highlightFindOptions(e=!1){}async _start(e,t){if(this.disposeModel(),!this._editor.hasModel())return;const i={...t,isRevealed:!0};if(e.seedSearchStringFromSelection==="single"){const n=m6(this._editor,e.seedSearchStringFromSelection,e.seedSearchStringFromNonEmptySelection);n&&(this._state.isRegex?i.searchString=Ll(n):i.searchString=n)}else if(e.seedSearchStringFromSelection==="multiple"&&!e.updateSearchScope){const n=m6(this._editor,e.seedSearchStringFromSelection);n&&(i.searchString=n)}if(!i.searchString&&e.seedSearchStringFromGlobalClipboard){const n=await this.getGlobalBufferTerm();if(!this._editor.hasModel())return;n&&(i.searchString=n)}if(e.forceRevealReplace||i.isReplaceRevealed?i.isReplaceRevealed=!0:this._findWidgetVisible.get()||(i.isReplaceRevealed=!1),e.updateSearchScope){const n=this._editor.getSelections();n.some(s=>!s.isEmpty())&&(i.searchScope=n)}i.loop=e.loop,this._state.change(i,!1),this._model||(this._model=new WL(this._editor,this._state))}start(e,t){return this._start(e,t)}moveToNextMatch(){return this._model?(this._model.moveToNextMatch(),!0):!1}moveToPrevMatch(){return this._model?(this._model.moveToPrevMatch(),!0):!1}goToMatch(e){return this._model?(this._model.moveToMatch(e),!0):!1}replace(){return this._model?(this._model.replace(),!0):!1}replaceAll(){var e;return this._model?!((e=this._editor.getModel())===null||e===void 0)&&e.isTooLargeForHeapOperation()?(this._notificationService.warn(v("too.large.for.replaceall","The file is too large to perform a replace all operation.")),!1):(this._model.replaceAll(),!0):!1}selectAllMatches(){return this._model?(this._model.selectAllMatches(),this._editor.focus(),!0):!1}async getGlobalBufferTerm(){return this._editor.getOption(41).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()?this._clipboardService.readFindText():""}setGlobalBufferTerm(e){this._editor.getOption(41).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()&&this._clipboardService.writeFindText(e)}};qr.ID="editor.contrib.findController";qr=p6=Ele([Ld(1,bt),Ld(2,Qc),Ld(3,_g),Ld(4,ys)],qr);let _6=class extends qr{constructor(e,t,i,n,s,r,a,l){super(e,i,a,l,r),this._contextViewService=t,this._keybindingService=n,this._themeService=s,this._widget=null,this._findOptionsWidget=null}async _start(e,t){this._widget||this._createFindWidget();const i=this._editor.getSelection();let n=!1;switch(this._editor.getOption(41).autoFindInSelection){case"always":n=!0;break;case"never":n=!1;break;case"multiline":{n=!!i&&i.startLineNumber!==i.endLineNumber;break}}e.updateSearchScope=e.updateSearchScope||n,await super._start(e,t),this._widget&&(e.shouldFocus===2?this._widget.focusReplaceInput():e.shouldFocus===1&&this._widget.focusFindInput())}highlightFindOptions(e=!1){this._widget||this._createFindWidget(),this._state.isRevealed&&!e?this._widget.highlightFindOptions():this._findOptionsWidget.highlightFindOptions()}_createFindWidget(){this._widget=this._register(new ZP(this._editor,this,this._state,this._contextViewService,this._keybindingService,this._contextKeyService,this._themeService,this._storageService,this._notificationService)),this._findOptionsWidget=this._register(new YP(this._editor,this._state,this._keybindingService))}};_6=Ele([Ld(1,gg),Ld(2,bt),Ld(3,Bi),Ld(4,Us),Ld(5,ys),Ld(6,Qc),Ld(7,_g)],_6);const c8e=Qie(new Zie({id:gn.StartFindAction,label:v("startFindAction","Find"),alias:"Find",precondition:ue.or(W.focus,ue.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2084,weight:100},menuOpts:{menuId:P.MenubarEditMenu,group:"3_find",title:v({key:"miFind",comment:["&& denotes a mnemonic"]},"&&Find"),order:1}}));c8e.addImplementation(0,(o,e,t)=>{const i=qr.get(e);return i?i.start({forceRevealReplace:!1,seedSearchStringFromSelection:e.getOption(41).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:e.getOption(41).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:e.getOption(41).globalFindClipboard,shouldFocus:1,shouldAnimate:!0,updateSearchScope:!1,loop:e.getOption(41).loop}):!1});const d8e={description:"Open a new In-Editor Find Widget.",args:[{name:"Open a new In-Editor Find Widget args",schema:{properties:{searchString:{type:"string"},replaceString:{type:"string"},isRegex:{type:"boolean"},matchWholeWord:{type:"boolean"},isCaseSensitive:{type:"boolean"},preserveCase:{type:"boolean"},findInSelection:{type:"boolean"}}}}]};class u8e extends Ke{constructor(){super({id:gn.StartFindWithArgs,label:v("startFindWithArgsAction","Find With Arguments"),alias:"Find With Arguments",precondition:void 0,kbOpts:{kbExpr:null,primary:0,weight:100},metadata:d8e})}async run(e,t,i){const n=qr.get(t);if(n){const s=i?{searchString:i.searchString,replaceString:i.replaceString,isReplaceRevealed:i.replaceString!==void 0,isRegex:i.isRegex,wholeWord:i.matchWholeWord,matchCase:i.isCaseSensitive,preserveCase:i.preserveCase}:{};await n.start({forceRevealReplace:!1,seedSearchStringFromSelection:n.getState().searchString.length===0&&t.getOption(41).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:t.getOption(41).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:!0,shouldFocus:1,shouldAnimate:!0,updateSearchScope:(i==null?void 0:i.findInSelection)||!1,loop:t.getOption(41).loop},s),n.setGlobalBufferTerm(n.getState().searchString)}}}class h8e extends Ke{constructor(){super({id:gn.StartFindWithSelection,label:v("startFindWithSelectionAction","Find With Selection"),alias:"Find With Selection",precondition:void 0,kbOpts:{kbExpr:null,primary:0,mac:{primary:2083},weight:100}})}async run(e,t){const i=qr.get(t);i&&(await i.start({forceRevealReplace:!1,seedSearchStringFromSelection:"multiple",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(41).loop}),i.setGlobalBufferTerm(i.getState().searchString))}}class Ile extends Ke{async run(e,t){const i=qr.get(t);i&&!this._run(i)&&(await i.start({forceRevealReplace:!1,seedSearchStringFromSelection:i.getState().searchString.length===0&&t.getOption(41).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:t.getOption(41).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:!0,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(41).loop}),this._run(i))}}class f8e extends Ile{constructor(){super({id:gn.NextMatchFindAction,label:v("findNextMatchAction","Find Next"),alias:"Find Next",precondition:void 0,kbOpts:[{kbExpr:W.focus,primary:61,mac:{primary:2085,secondary:[61]},weight:100},{kbExpr:ue.and(W.focus,GP),primary:3,weight:100}]})}_run(e){return e.moveToNextMatch()?(e.editor.pushUndoStop(),!0):!1}}class g8e extends Ile{constructor(){super({id:gn.PreviousMatchFindAction,label:v("findPreviousMatchAction","Find Previous"),alias:"Find Previous",precondition:void 0,kbOpts:[{kbExpr:W.focus,primary:1085,mac:{primary:3109,secondary:[1085]},weight:100},{kbExpr:ue.and(W.focus,GP),primary:1027,weight:100}]})}_run(e){return e.moveToPrevMatch()}}class p8e extends Ke{constructor(){super({id:gn.GoToMatchFindAction,label:v("findMatchAction.goToMatch","Go to Match..."),alias:"Go to Match...",precondition:vg}),this._highlightDecorations=[]}run(e,t,i){const n=qr.get(t);if(!n)return;const s=n.getState().matchesCount;if(s<1){e.get(ys).notify({severity:ZA.Warning,message:v("findMatchAction.noResults","No matches. Try searching for something else.")});return}const a=e.get(ou).createInputBox();a.placeholder=v("findMatchAction.inputPlaceHolder","Type a number to go to a specific match (between 1 and {0})",s);const l=u=>{const f=parseInt(u);if(isNaN(f))return;const g=n.getState().matchesCount;if(f>0&&f<=g)return f-1;if(f<0&&f>=-g)return g+f},c=u=>{const f=l(u);if(typeof f=="number"){a.validationMessage=void 0,n.goToMatch(f);const g=n.getState().currentMatch;g&&this.addDecorations(t,g)}else a.validationMessage=v("findMatchAction.inputValidationMessage","Please type a number between 1 and {0}",n.getState().matchesCount),this.clearDecorations(t)};a.onDidChangeValue(u=>{c(u)}),a.onDidAccept(()=>{const u=l(a.value);typeof u=="number"?(n.goToMatch(u),a.hide()):a.validationMessage=v("findMatchAction.inputValidationMessage","Please type a number between 1 and {0}",n.getState().matchesCount)}),a.onDidHide(()=>{this.clearDecorations(t),a.dispose()}),a.show()}clearDecorations(e){e.changeDecorations(t=>{this._highlightDecorations=t.deltaDecorations(this._highlightDecorations,[])})}addDecorations(e,t){e.changeDecorations(i=>{this._highlightDecorations=i.deltaDecorations(this._highlightDecorations,[{range:t,options:{description:"find-match-quick-access-range-highlight",className:"rangeHighlight",isWholeLine:!0}},{range:t,options:{description:"find-match-quick-access-range-highlight-overview",overviewRuler:{color:Xn(Jne),position:kl.Full}}}])})}}class Tle extends Ke{async run(e,t){const i=qr.get(t);if(!i)return;const n=m6(t,"single",!1);n&&i.setSearchString(n),this._run(i)||(await i.start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(41).loop}),this._run(i))}}class m8e extends Tle{constructor(){super({id:gn.NextSelectionMatchFindAction,label:v("nextSelectionMatchFindAction","Find Next Selection"),alias:"Find Next Selection",precondition:void 0,kbOpts:{kbExpr:W.focus,primary:2109,weight:100}})}_run(e){return e.moveToNextMatch()}}class _8e extends Tle{constructor(){super({id:gn.PreviousSelectionMatchFindAction,label:v("previousSelectionMatchFindAction","Find Previous Selection"),alias:"Find Previous Selection",precondition:void 0,kbOpts:{kbExpr:W.focus,primary:3133,weight:100}})}_run(e){return e.moveToPrevMatch()}}const v8e=Qie(new Zie({id:gn.StartFindReplaceAction,label:v("startReplace","Replace"),alias:"Replace",precondition:ue.or(W.focus,ue.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2086,mac:{primary:2596},weight:100},menuOpts:{menuId:P.MenubarEditMenu,group:"3_find",title:v({key:"miReplace",comment:["&& denotes a mnemonic"]},"&&Replace"),order:2}}));v8e.addImplementation(0,(o,e,t)=>{if(!e.hasModel()||e.getOption(91))return!1;const i=qr.get(e);if(!i)return!1;const n=e.getSelection(),s=i.isFindInputFocused(),r=!n.isEmpty()&&n.startLineNumber===n.endLineNumber&&e.getOption(41).seedSearchStringFromSelection!=="never"&&!s,a=s||r?2:1;return i.start({forceRevealReplace:!0,seedSearchStringFromSelection:r?"single":"none",seedSearchStringFromNonEmptySelection:e.getOption(41).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:e.getOption(41).seedSearchStringFromSelection!=="never",shouldFocus:a,shouldAnimate:!0,updateSearchScope:!1,loop:e.getOption(41).loop})});pi(qr.ID,_6,0);Ce(u8e);Ce(h8e);Ce(f8e);Ce(g8e);Ce(p8e);Ce(m8e);Ce(_8e);const ru=zs.bindToContribution(qr.get);Me(new ru({id:gn.CloseFindWidgetCommand,precondition:vg,handler:o=>o.closeFindWidget(),kbOpts:{weight:105,kbExpr:ue.and(W.focus,ue.not("isComposing")),primary:9,secondary:[1033]}}));Me(new ru({id:gn.ToggleCaseSensitiveCommand,precondition:void 0,handler:o=>o.toggleCaseSensitive(),kbOpts:{weight:105,kbExpr:W.focus,primary:qT.primary,mac:qT.mac,win:qT.win,linux:qT.linux}}));Me(new ru({id:gn.ToggleWholeWordCommand,precondition:void 0,handler:o=>o.toggleWholeWords(),kbOpts:{weight:105,kbExpr:W.focus,primary:GT.primary,mac:GT.mac,win:GT.win,linux:GT.linux}}));Me(new ru({id:gn.ToggleRegexCommand,precondition:void 0,handler:o=>o.toggleRegex(),kbOpts:{weight:105,kbExpr:W.focus,primary:YT.primary,mac:YT.mac,win:YT.win,linux:YT.linux}}));Me(new ru({id:gn.ToggleSearchScopeCommand,precondition:void 0,handler:o=>o.toggleSearchScope(),kbOpts:{weight:105,kbExpr:W.focus,primary:ZT.primary,mac:ZT.mac,win:ZT.win,linux:ZT.linux}}));Me(new ru({id:gn.TogglePreserveCaseCommand,precondition:void 0,handler:o=>o.togglePreserveCase(),kbOpts:{weight:105,kbExpr:W.focus,primary:QT.primary,mac:QT.mac,win:QT.win,linux:QT.linux}}));Me(new ru({id:gn.ReplaceOneAction,precondition:vg,handler:o=>o.replace(),kbOpts:{weight:105,kbExpr:W.focus,primary:3094}}));Me(new ru({id:gn.ReplaceOneAction,precondition:vg,handler:o=>o.replace(),kbOpts:{weight:105,kbExpr:ue.and(W.focus,_U),primary:3}}));Me(new ru({id:gn.ReplaceAllAction,precondition:vg,handler:o=>o.replaceAll(),kbOpts:{weight:105,kbExpr:W.focus,primary:2563}}));Me(new ru({id:gn.ReplaceAllAction,precondition:vg,handler:o=>o.replaceAll(),kbOpts:{weight:105,kbExpr:ue.and(W.focus,_U),primary:void 0,mac:{primary:2051}}}));Me(new ru({id:gn.SelectAllMatchesAction,precondition:vg,handler:o=>o.selectAllMatches(),kbOpts:{weight:105,kbExpr:W.focus,primary:515}}));const b8e={0:" ",1:"u",2:"r"},Dee=65535,xd=16777215,kee=4278190080;class xB{constructor(e){const t=Math.ceil(e/32);this._states=new Uint32Array(t)}get(e){const t=e/32|0,i=e%32;return(this._states[t]&1<<i)!==0}set(e,t){const i=e/32|0,n=e%32,s=this._states[i];t?this._states[i]=s|1<<n:this._states[i]=s&~(1<<n)}}class gl{constructor(e,t,i){if(e.length!==t.length||e.length>Dee)throw new Error("invalid startIndexes or endIndexes size");this._startIndexes=e,this._endIndexes=t,this._collapseStates=new xB(e.length),this._userDefinedStates=new xB(e.length),this._recoveredStates=new xB(e.length),this._types=i,this._parentsComputed=!1}ensureParentIndices(){if(!this._parentsComputed){this._parentsComputed=!0;const e=[],t=(i,n)=>{const s=e[e.length-1];return this.getStartLineNumber(s)<=i&&this.getEndLineNumber(s)>=n};for(let i=0,n=this._startIndexes.length;i<n;i++){const s=this._startIndexes[i],r=this._endIndexes[i];if(s>xd||r>xd)throw new Error("startLineNumber or endLineNumber must not exceed "+xd);for(;e.length>0&&!t(s,r);)e.pop();const a=e.length>0?e[e.length-1]:-1;e.push(i),this._startIndexes[i]=s+((a&255)<<24),this._endIndexes[i]=r+((a&65280)<<16)}}}get length(){return this._startIndexes.length}getStartLineNumber(e){return this._startIndexes[e]&xd}getEndLineNumber(e){return this._endIndexes[e]&xd}getType(e){return this._types?this._types[e]:void 0}hasTypes(){return!!this._types}isCollapsed(e){return this._collapseStates.get(e)}setCollapsed(e,t){this._collapseStates.set(e,t)}isUserDefined(e){return this._userDefinedStates.get(e)}setUserDefined(e,t){return this._userDefinedStates.set(e,t)}isRecovered(e){return this._recoveredStates.get(e)}setRecovered(e,t){return this._recoveredStates.set(e,t)}getSource(e){return this.isUserDefined(e)?1:this.isRecovered(e)?2:0}setSource(e,t){t===1?(this.setUserDefined(e,!0),this.setRecovered(e,!1)):t===2?(this.setUserDefined(e,!1),this.setRecovered(e,!0)):(this.setUserDefined(e,!1),this.setRecovered(e,!1))}setCollapsedAllOfType(e,t){let i=!1;if(this._types)for(let n=0;n<this._types.length;n++)this._types[n]===e&&(this.setCollapsed(n,t),i=!0);return i}toRegion(e){return new C8e(this,e)}getParentIndex(e){this.ensureParentIndices();const t=((this._startIndexes[e]&kee)>>>24)+((this._endIndexes[e]&kee)>>>16);return t===Dee?-1:t}contains(e,t){return this.getStartLineNumber(e)<=t&&this.getEndLineNumber(e)>=t}findIndex(e){let t=0,i=this._startIndexes.length;if(i===0)return-1;for(;t<i;){const n=Math.floor((t+i)/2);e<this.getStartLineNumber(n)?i=n:t=n+1}return t-1}findRange(e){let t=this.findIndex(e);if(t>=0){if(this.getEndLineNumber(t)>=e)return t;for(t=this.getParentIndex(t);t!==-1;){if(this.contains(t,e))return t;t=this.getParentIndex(t)}}return-1}toString(){const e=[];for(let t=0;t<this.length;t++)e[t]=`[${b8e[this.getSource(t)]}${this.isCollapsed(t)?"+":"-"}] ${this.getStartLineNumber(t)}/${this.getEndLineNumber(t)}`;return e.join(", ")}toFoldRange(e){return{startLineNumber:this._startIndexes[e]&xd,endLineNumber:this._endIndexes[e]&xd,type:this._types?this._types[e]:void 0,isCollapsed:this.isCollapsed(e),source:this.getSource(e)}}static fromFoldRanges(e){const t=e.length,i=new Uint32Array(t),n=new Uint32Array(t);let s=[],r=!1;for(let l=0;l<t;l++){const c=e[l];i[l]=c.startLineNumber,n[l]=c.endLineNumber,s.push(c.type),c.type&&(r=!0)}r||(s=void 0);const a=new gl(i,n,s);for(let l=0;l<t;l++)e[l].isCollapsed&&a.setCollapsed(l,!0),a.setSource(l,e[l].source);return a}static sanitizeAndMerge(e,t,i){i=i??Number.MAX_VALUE;const n=(b,y)=>Array.isArray(b)?S=>S<y?b[S]:void 0:S=>S<y?b.toFoldRange(S):void 0,s=n(e,e.length),r=n(t,t.length);let a=0,l=0,c=s(0),u=r(0);const f=[];let g,p=0;const _=[];for(;c||u;){let b;if(u&&(!c||c.startLineNumber>=u.startLineNumber))c&&c.startLineNumber===u.startLineNumber?(u.source===1?b=u:(b=c,b.isCollapsed=u.isCollapsed&&c.endLineNumber===u.endLineNumber,b.source=0),c=s(++a)):(b=u,u.isCollapsed&&u.source===0&&(b.source=2)),u=r(++l);else{let y=l,S=u;for(;;){if(!S||S.startLineNumber>c.endLineNumber){b=c;break}if(S.source===1&&S.endLineNumber>c.endLineNumber)break;S=r(++y)}c=s(++a)}if(b){for(;g&&g.endLineNumber<b.startLineNumber;)g=f.pop();b.endLineNumber>b.startLineNumber&&b.startLineNumber>p&&b.endLineNumber<=i&&(!g||g.endLineNumber>=b.endLineNumber)&&(_.push(b),p=b.startLineNumber,g&&f.push(g),g=b)}}return _}}class C8e{constructor(e,t){this.ranges=e,this.index=t}get startLineNumber(){return this.ranges.getStartLineNumber(this.index)}get endLineNumber(){return this.ranges.getEndLineNumber(this.index)}get regionIndex(){return this.index}get parentIndex(){return this.ranges.getParentIndex(this.index)}get isCollapsed(){return this.ranges.isCollapsed(this.index)}containedBy(e){return e.startLineNumber<=this.startLineNumber&&e.endLineNumber>=this.endLineNumber}containsLine(e){return this.startLineNumber<=e&&e<=this.endLineNumber}}class w8e{get regions(){return this._regions}get textModel(){return this._textModel}constructor(e,t){this._updateEventEmitter=new Y,this.onDidChange=this._updateEventEmitter.event,this._textModel=e,this._decorationProvider=t,this._regions=new gl(new Uint32Array(0),new Uint32Array(0)),this._editorDecorationIds=[]}toggleCollapseState(e){if(!e.length)return;e=e.sort((i,n)=>i.regionIndex-n.regionIndex);const t={};this._decorationProvider.changeDecorations(i=>{let n=0,s=-1,r=-1;const a=l=>{for(;n<l;){const c=this._regions.getEndLineNumber(n),u=this._regions.isCollapsed(n);if(c<=s){const f=this.regions.getSource(n)!==0;i.changeDecorationOptions(this._editorDecorationIds[n],this._decorationProvider.getDecorationOption(u,c<=r,f))}u&&c>r&&(r=c),n++}};for(const l of e){const c=l.regionIndex,u=this._editorDecorationIds[c];if(u&&!t[u]){t[u]=!0,a(c);const f=!this._regions.isCollapsed(c);this._regions.setCollapsed(c,f),s=Math.max(s,this._regions.getEndLineNumber(c))}}a(this._regions.length)}),this._updateEventEmitter.fire({model:this,collapseStateChanged:e})}removeManualRanges(e){const t=new Array,i=n=>{for(const s of e)if(!(s.startLineNumber>n.endLineNumber||n.startLineNumber>s.endLineNumber))return!0;return!1};for(let n=0;n<this._regions.length;n++){const s=this._regions.toFoldRange(n);(s.source===0||!i(s))&&t.push(s)}this.updatePost(gl.fromFoldRanges(t))}update(e,t=[]){const i=this._currentFoldedOrManualRanges(t),n=gl.sanitizeAndMerge(e,i,this._textModel.getLineCount());this.updatePost(gl.fromFoldRanges(n))}updatePost(e){const t=[];let i=-1;for(let n=0,s=e.length;n<s;n++){const r=e.getStartLineNumber(n),a=e.getEndLineNumber(n),l=e.isCollapsed(n),c=e.getSource(n)!==0,u={startLineNumber:r,startColumn:this._textModel.getLineMaxColumn(r),endLineNumber:a,endColumn:this._textModel.getLineMaxColumn(a)+1};t.push({range:u,options:this._decorationProvider.getDecorationOption(l,a<=i,c)}),l&&a>i&&(i=a)}this._decorationProvider.changeDecorations(n=>this._editorDecorationIds=n.deltaDecorations(this._editorDecorationIds,t)),this._regions=e,this._updateEventEmitter.fire({model:this})}_currentFoldedOrManualRanges(e=[]){const t=(n,s)=>{for(const r of e)if(n<r&&r<=s)return!0;return!1},i=[];for(let n=0,s=this._regions.length;n<s;n++){let r=this.regions.isCollapsed(n);const a=this.regions.getSource(n);if(r||a!==0){const l=this._regions.toFoldRange(n),c=this._textModel.getDecorationRange(this._editorDecorationIds[n]);c&&(r&&t(c.startLineNumber,c.endLineNumber)&&(r=!1),i.push({startLineNumber:c.startLineNumber,endLineNumber:c.endLineNumber,type:l.type,isCollapsed:r,source:a}))}}return i}getMemento(){const e=this._currentFoldedOrManualRanges(),t=[],i=this._textModel.getLineCount();for(let n=0,s=e.length;n<s;n++){const r=e[n];if(r.startLineNumber>=r.endLineNumber||r.startLineNumber<1||r.endLineNumber>i)continue;const a=this._getLinesChecksum(r.startLineNumber+1,r.endLineNumber);t.push({startLineNumber:r.startLineNumber,endLineNumber:r.endLineNumber,isCollapsed:r.isCollapsed,source:r.source,checksum:a})}return t.length>0?t:void 0}applyMemento(e){var t,i;if(!Array.isArray(e))return;const n=[],s=this._textModel.getLineCount();for(const a of e){if(a.startLineNumber>=a.endLineNumber||a.startLineNumber<1||a.endLineNumber>s)continue;const l=this._getLinesChecksum(a.startLineNumber+1,a.endLineNumber);(!a.checksum||l===a.checksum)&&n.push({startLineNumber:a.startLineNumber,endLineNumber:a.endLineNumber,type:void 0,isCollapsed:(t=a.isCollapsed)!==null&&t!==void 0?t:!0,source:(i=a.source)!==null&&i!==void 0?i:0})}const r=gl.sanitizeAndMerge(this._regions,n,s);this.updatePost(gl.fromFoldRanges(r))}_getLinesChecksum(e,t){return hA(this._textModel.getLineContent(e)+this._textModel.getLineContent(t))%1e6}dispose(){this._decorationProvider.removeDecorations(this._editorDecorationIds)}getAllRegionsAtLine(e,t){const i=[];if(this._regions){let n=this._regions.findRange(e),s=1;for(;n>=0;){const r=this._regions.toRegion(n);(!t||t(r,s))&&i.push(r),s++,n=r.parentIndex}}return i}getRegionAtLine(e){if(this._regions){const t=this._regions.findRange(e);if(t>=0)return this._regions.toRegion(t)}return null}getRegionsInside(e,t){const i=[],n=e?e.regionIndex+1:0,s=e?e.endLineNumber:Number.MAX_VALUE;if(t&&t.length===2){const r=[];for(let a=n,l=this._regions.length;a<l;a++){const c=this._regions.toRegion(a);if(this._regions.getStartLineNumber(a)<s){for(;r.length>0&&!c.containedBy(r[r.length-1]);)r.pop();r.push(c),t(c,r.length)&&i.push(c)}else break}}else for(let r=n,a=this._regions.length;r<a;r++){const l=this._regions.toRegion(r);if(this._regions.getStartLineNumber(r)<s)(!t||t(l))&&i.push(l);else break}return i}}function Nle(o,e,t){const i=[];for(const n of t){const s=o.getRegionAtLine(n);if(s){const r=!s.isCollapsed;if(i.push(s),e>1){const a=o.getRegionsInside(s,(l,c)=>l.isCollapsed!==r&&c<e);i.push(...a)}}}o.toggleCollapseState(i)}function dw(o,e,t=Number.MAX_VALUE,i){const n=[];if(i&&i.length>0)for(const s of i){const r=o.getRegionAtLine(s);if(r&&(r.isCollapsed!==e&&n.push(r),t>1)){const a=o.getRegionsInside(r,(l,c)=>l.isCollapsed!==e&&c<t);n.push(...a)}}else{const s=o.getRegionsInside(null,(r,a)=>r.isCollapsed!==e&&a<t);n.push(...s)}o.toggleCollapseState(n)}function Rle(o,e,t,i){const n=[];for(const s of i){const r=o.getAllRegionsAtLine(s,(a,l)=>a.isCollapsed!==e&&l<=t);n.push(...r)}o.toggleCollapseState(n)}function y8e(o,e,t){const i=[];for(const n of t){const s=o.getAllRegionsAtLine(n,r=>r.isCollapsed!==e);s.length>0&&i.push(s[0])}o.toggleCollapseState(i)}function S8e(o,e,t,i){const n=(r,a)=>a===e&&r.isCollapsed!==t&&!i.some(l=>r.containsLine(l)),s=o.getRegionsInside(null,n);o.toggleCollapseState(s)}function Mle(o,e,t){const i=[];for(const r of t){const a=o.getAllRegionsAtLine(r,void 0);a.length>0&&i.push(a[0])}const n=r=>i.every(a=>!a.containedBy(r)&&!r.containedBy(a))&&r.isCollapsed!==e,s=o.getRegionsInside(null,n);o.toggleCollapseState(s)}function CU(o,e,t){const i=o.textModel,n=o.regions,s=[];for(let r=n.length-1;r>=0;r--)if(t!==n.isCollapsed(r)){const a=n.getStartLineNumber(r);e.test(i.getLineContent(a))&&s.push(n.toRegion(r))}o.toggleCollapseState(s)}function wU(o,e,t){const i=o.regions,n=[];for(let s=i.length-1;s>=0;s--)t!==i.isCollapsed(s)&&e===i.getType(s)&&n.push(i.toRegion(s));o.toggleCollapseState(n)}function L8e(o,e){let t=null;const i=e.getRegionAtLine(o);if(i!==null&&(t=i.startLineNumber,o===t)){const n=i.parentIndex;n!==-1?t=e.regions.getStartLineNumber(n):t=null}return t}function x8e(o,e){let t=e.getRegionAtLine(o);if(t!==null&&t.startLineNumber===o){if(o!==t.startLineNumber)return t.startLineNumber;{const i=t.parentIndex;let n=0;for(i!==-1&&(n=e.regions.getStartLineNumber(t.parentIndex));t!==null;)if(t.regionIndex>0){if(t=e.regions.toRegion(t.regionIndex-1),t.startLineNumber<=n)return null;if(t.parentIndex===i)return t.startLineNumber}else return null}}else if(e.regions.length>0)for(t=e.regions.toRegion(e.regions.length-1);t!==null;){if(t.startLineNumber<o)return t.startLineNumber;t.regionIndex>0?t=e.regions.toRegion(t.regionIndex-1):t=null}return null}function D8e(o,e){let t=e.getRegionAtLine(o);if(t!==null&&t.startLineNumber===o){const i=t.parentIndex;let n=0;if(i!==-1)n=e.regions.getEndLineNumber(t.parentIndex);else{if(e.regions.length===0)return null;n=e.regions.getEndLineNumber(e.regions.length-1)}for(;t!==null;)if(t.regionIndex<e.regions.length){if(t=e.regions.toRegion(t.regionIndex+1),t.startLineNumber>=n)return null;if(t.parentIndex===i)return t.startLineNumber}else return null}else if(e.regions.length>0)for(t=e.regions.toRegion(0);t!==null;){if(t.startLineNumber>o)return t.startLineNumber;t.regionIndex<e.regions.length?t=e.regions.toRegion(t.regionIndex+1):t=null}return null}class k8e{get onDidChange(){return this._updateEventEmitter.event}get hiddenRanges(){return this._hiddenRanges}constructor(e){this._updateEventEmitter=new Y,this._hasLineChanges=!1,this._foldingModel=e,this._foldingModelListener=e.onDidChange(t=>this.updateHiddenRanges()),this._hiddenRanges=[],e.regions.length&&this.updateHiddenRanges()}notifyChangeModelContent(e){this._hiddenRanges.length&&!this._hasLineChanges&&(this._hasLineChanges=e.changes.some(t=>t.range.endLineNumber!==t.range.startLineNumber||pm(t.text)[0]!==0))}updateHiddenRanges(){let e=!1;const t=[];let i=0,n=0,s=Number.MAX_VALUE,r=-1;const a=this._foldingModel.regions;for(;i<a.length;i++){if(!a.isCollapsed(i))continue;const l=a.getStartLineNumber(i)+1,c=a.getEndLineNumber(i);s<=l&&c<=r||(!e&&n<this._hiddenRanges.length&&this._hiddenRanges[n].startLineNumber===l&&this._hiddenRanges[n].endLineNumber===c?(t.push(this._hiddenRanges[n]),n++):(e=!0,t.push(new A(l,1,c,1))),s=l,r=c)}(this._hasLineChanges||e||n<this._hiddenRanges.length)&&this.applyHiddenRanges(t)}applyHiddenRanges(e){this._hiddenRanges=e,this._hasLineChanges=!1,this._updateEventEmitter.fire(e)}hasRanges(){return this._hiddenRanges.length>0}isHidden(e){return Eee(this._hiddenRanges,e)!==null}adjustSelections(e){let t=!1;const i=this._foldingModel.textModel;let n=null;const s=r=>((!n||!E8e(r,n))&&(n=Eee(this._hiddenRanges,r)),n?n.startLineNumber-1:null);for(let r=0,a=e.length;r<a;r++){let l=e[r];const c=s(l.startLineNumber);c&&(l=l.setStartPosition(c,i.getLineMaxColumn(c)),t=!0);const u=s(l.endLineNumber);u&&(l=l.setEndPosition(u,i.getLineMaxColumn(u)),t=!0),e[r]=l}return t}dispose(){this.hiddenRanges.length>0&&(this._hiddenRanges=[],this._updateEventEmitter.fire(this._hiddenRanges)),this._foldingModelListener&&(this._foldingModelListener.dispose(),this._foldingModelListener=null)}}function E8e(o,e){return o>=e.startLineNumber&&o<=e.endLineNumber}function Eee(o,e){const t=cx(o,i=>e<i.startLineNumber)-1;return t>=0&&o[t].endLineNumber>=e?o[t]:null}const I8e=5e3,T8e="indent";class yU{constructor(e,t,i){this.editorModel=e,this.languageConfigurationService=t,this.foldingRangesLimit=i,this.id=T8e}dispose(){}compute(e){const t=this.languageConfigurationService.getLanguageConfiguration(this.editorModel.getLanguageId()).foldingRules,i=t&&!!t.offSide,n=t&&t.markers;return Promise.resolve(M8e(this.editorModel,i,n,this.foldingRangesLimit))}}let N8e=class{constructor(e){this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0,this._foldingRangesLimit=e}insertFirst(e,t,i){if(e>xd||t>xd)return;const n=this._length;this._startIndexes[n]=e,this._endIndexes[n]=t,this._length++,i<1e3&&(this._indentOccurrences[i]=(this._indentOccurrences[i]||0)+1)}toIndentRanges(e){const t=this._foldingRangesLimit.limit;if(this._length<=t){this._foldingRangesLimit.update(this._length,!1);const i=new Uint32Array(this._length),n=new Uint32Array(this._length);for(let s=this._length-1,r=0;s>=0;s--,r++)i[r]=this._startIndexes[s],n[r]=this._endIndexes[s];return new gl(i,n)}else{this._foldingRangesLimit.update(this._length,t);let i=0,n=this._indentOccurrences.length;for(let l=0;l<this._indentOccurrences.length;l++){const c=this._indentOccurrences[l];if(c){if(c+i>t){n=l;break}i+=c}}const s=e.getOptions().tabSize,r=new Uint32Array(t),a=new Uint32Array(t);for(let l=this._length-1,c=0;l>=0;l--){const u=this._startIndexes[l],f=e.getLineContent(u),g=KA(f,s);(g<n||g===n&&i++<t)&&(r[c]=u,a[c]=this._endIndexes[l],c++)}return new gl(r,a)}}};const R8e={limit:I8e,update:()=>{}};function M8e(o,e,t,i=R8e){const n=o.getOptions().tabSize,s=new N8e(i);let r;t&&(r=new RegExp(`(${t.start.source})|(?:${t.end.source})`));const a=[],l=o.getLineCount()+1;a.push({indent:-1,endAbove:l,line:l});for(let c=o.getLineCount();c>0;c--){const u=o.getLineContent(c),f=KA(u,n);let g=a[a.length-1];if(f===-1){e&&(g.endAbove=c);continue}let p;if(r&&(p=u.match(r)))if(p[1]){let _=a.length-1;for(;_>0&&a[_].indent!==-2;)_--;if(_>0){a.length=_+1,g=a[_],s.insertFirst(c,g.line,f),g.line=c,g.indent=f,g.endAbove=c;continue}}else{a.push({indent:-2,endAbove:c,line:c});continue}if(g.indent>f){do a.pop(),g=a[a.length-1];while(g.indent>f);const _=g.endAbove-1;_-c>=1&&s.insertFirst(c,_,f)}g.indent===f?g.endAbove=c:a.push({indent:f,endAbove:c,line:c})}return s.toIndentRanges(o)}const A8e=V("editor.foldBackground",{light:at(Tp,.3),dark:at(Tp,.3),hcDark:null,hcLight:null},v("foldBackgroundBackground","Background color behind folded ranges. The color must not be opaque so as not to hide underlying decorations."),!0);V("editorGutter.foldingControlForeground",{dark:Qu,light:Qu,hcDark:Qu,hcLight:Qu},v("editorGutter.foldingControlForeground","Color of the folding control in the editor gutter."));const QP=gs("folding-expanded",Ee.chevronDown,v("foldingExpandedIcon","Icon for expanded ranges in the editor glyph margin.")),XP=gs("folding-collapsed",Ee.chevronRight,v("foldingCollapsedIcon","Icon for collapsed ranges in the editor glyph margin.")),Ale=gs("folding-manual-collapsed",XP,v("foldingManualCollapedIcon","Icon for manually collapsed ranges in the editor glyph margin.")),Ple=gs("folding-manual-expanded",QP,v("foldingManualExpandedIcon","Icon for manually expanded ranges in the editor glyph margin.")),SU={color:Xn(A8e),position:1},uw=v("linesCollapsed","Click to expand the range."),JP=v("linesExpanded","Click to collapse the range.");class Ds{constructor(e){this.editor=e,this.showFoldingControls="mouseover",this.showFoldingHighlights=!0}getDecorationOption(e,t,i){return t?Ds.HIDDEN_RANGE_DECORATION:this.showFoldingControls==="never"?e?this.showFoldingHighlights?Ds.NO_CONTROLS_COLLAPSED_HIGHLIGHTED_RANGE_DECORATION:Ds.NO_CONTROLS_COLLAPSED_RANGE_DECORATION:Ds.NO_CONTROLS_EXPANDED_RANGE_DECORATION:e?i?this.showFoldingHighlights?Ds.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:Ds.MANUALLY_COLLAPSED_VISUAL_DECORATION:this.showFoldingHighlights?Ds.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:Ds.COLLAPSED_VISUAL_DECORATION:this.showFoldingControls==="mouseover"?i?Ds.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION:Ds.EXPANDED_AUTO_HIDE_VISUAL_DECORATION:i?Ds.MANUALLY_EXPANDED_VISUAL_DECORATION:Ds.EXPANDED_VISUAL_DECORATION}changeDecorations(e){return this.editor.changeDecorations(e)}removeDecorations(e){this.editor.removeDecorations(e)}}Ds.COLLAPSED_VISUAL_DECORATION=Rt.register({description:"folding-collapsed-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,linesDecorationsTooltip:uw,firstLineDecorationClassName:pt.asClassName(XP)});Ds.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=Rt.register({description:"folding-collapsed-highlighted-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",minimap:SU,isWholeLine:!0,linesDecorationsTooltip:uw,firstLineDecorationClassName:pt.asClassName(XP)});Ds.MANUALLY_COLLAPSED_VISUAL_DECORATION=Rt.register({description:"folding-manually-collapsed-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,linesDecorationsTooltip:uw,firstLineDecorationClassName:pt.asClassName(Ale)});Ds.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=Rt.register({description:"folding-manually-collapsed-highlighted-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",minimap:SU,isWholeLine:!0,linesDecorationsTooltip:uw,firstLineDecorationClassName:pt.asClassName(Ale)});Ds.NO_CONTROLS_COLLAPSED_RANGE_DECORATION=Rt.register({description:"folding-no-controls-range-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,linesDecorationsTooltip:uw});Ds.NO_CONTROLS_COLLAPSED_HIGHLIGHTED_RANGE_DECORATION=Rt.register({description:"folding-no-controls-range-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",minimap:SU,isWholeLine:!0,linesDecorationsTooltip:uw});Ds.EXPANDED_VISUAL_DECORATION=Rt.register({description:"folding-expanded-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+pt.asClassName(QP),linesDecorationsTooltip:JP});Ds.EXPANDED_AUTO_HIDE_VISUAL_DECORATION=Rt.register({description:"folding-expanded-auto-hide-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:pt.asClassName(QP),linesDecorationsTooltip:JP});Ds.MANUALLY_EXPANDED_VISUAL_DECORATION=Rt.register({description:"folding-manually-expanded-visual-decoration",stickiness:0,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+pt.asClassName(Ple),linesDecorationsTooltip:JP});Ds.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION=Rt.register({description:"folding-manually-expanded-auto-hide-visual-decoration",stickiness:0,isWholeLine:!0,firstLineDecorationClassName:pt.asClassName(Ple),linesDecorationsTooltip:JP});Ds.NO_CONTROLS_EXPANDED_RANGE_DECORATION=Rt.register({description:"folding-no-controls-range-decoration",stickiness:0,isWholeLine:!0});Ds.HIDDEN_RANGE_DECORATION=Rt.register({description:"folding-hidden-range-decoration",stickiness:1});const P8e={},O8e="syntax";class LU{constructor(e,t,i,n,s){this.editorModel=e,this.providers=t,this.handleFoldingRangesChange=i,this.foldingRangesLimit=n,this.fallbackRangeProvider=s,this.id=O8e,this.disposables=new he,s&&this.disposables.add(s);for(const r of t)typeof r.onDidChange=="function"&&this.disposables.add(r.onDidChange(i))}compute(e){return F8e(this.providers,this.editorModel,e).then(t=>{var i,n;return t?W8e(t,this.foldingRangesLimit):(n=(i=this.fallbackRangeProvider)===null||i===void 0?void 0:i.compute(e))!==null&&n!==void 0?n:null})}dispose(){this.disposables.dispose()}}function F8e(o,e,t){let i=null;const n=o.map((s,r)=>Promise.resolve(s.provideFoldingRanges(e,P8e,t)).then(a=>{if(!t.isCancellationRequested&&Array.isArray(a)){Array.isArray(i)||(i=[]);const l=e.getLineCount();for(const c of a)c.start>0&&c.end>c.start&&c.end<=l&&i.push({start:c.start,end:c.end,rank:r,kind:c.kind})}},hs));return Promise.all(n).then(s=>i)}class B8e{constructor(e){this._startIndexes=[],this._endIndexes=[],this._nestingLevels=[],this._nestingLevelCounts=[],this._types=[],this._length=0,this._foldingRangesLimit=e}add(e,t,i,n){if(e>xd||t>xd)return;const s=this._length;this._startIndexes[s]=e,this._endIndexes[s]=t,this._nestingLevels[s]=n,this._types[s]=i,this._length++,n<30&&(this._nestingLevelCounts[n]=(this._nestingLevelCounts[n]||0)+1)}toIndentRanges(){const e=this._foldingRangesLimit.limit;if(this._length<=e){this._foldingRangesLimit.update(this._length,!1);const t=new Uint32Array(this._length),i=new Uint32Array(this._length);for(let n=0;n<this._length;n++)t[n]=this._startIndexes[n],i[n]=this._endIndexes[n];return new gl(t,i,this._types)}else{this._foldingRangesLimit.update(this._length,e);let t=0,i=this._nestingLevelCounts.length;for(let a=0;a<this._nestingLevelCounts.length;a++){const l=this._nestingLevelCounts[a];if(l){if(l+t>e){i=a;break}t+=l}}const n=new Uint32Array(e),s=new Uint32Array(e),r=[];for(let a=0,l=0;a<this._length;a++){const c=this._nestingLevels[a];(c<i||c===i&&t++<e)&&(n[l]=this._startIndexes[a],s[l]=this._endIndexes[a],r[l]=this._types[a],l++)}return new gl(n,s,r)}}}function W8e(o,e){const t=o.sort((r,a)=>{let l=r.start-a.start;return l===0&&(l=r.rank-a.rank),l}),i=new B8e(e);let n;const s=[];for(const r of t)if(!n)n=r,i.add(r.start,r.end,r.kind&&r.kind.value,s.length);else if(r.start>n.start)if(r.end<=n.end)s.push(n),n=r,i.add(r.start,r.end,r.kind&&r.kind.value,s.length);else{if(r.start>n.end){do n=s.pop();while(n&&r.start>n.end);n&&s.push(n),n=r}i.add(r.start,r.end,r.kind&&r.kind.value,s.length)}return i.toIndentRanges()}var V8e=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},AS=function(o,e){return function(t,i){e(t,i,o)}},$0;const Xo=new Be("foldingEnabled",!1);let cg=$0=class extends J{static get(e){return e.getContribution($0.ID)}static getFoldingRangeProviders(e,t){var i,n;const s=e.foldingRangeProvider.ordered(t);return(n=(i=$0._foldingRangeSelector)===null||i===void 0?void 0:i.call($0,s,t))!==null&&n!==void 0?n:s}constructor(e,t,i,n,s,r){super(),this.contextKeyService=t,this.languageConfigurationService=i,this.languageFeaturesService=r,this.localToDispose=this._register(new he),this.editor=e,this._foldingLimitReporter=new Ole(e);const a=this.editor.getOptions();this._isEnabled=a.get(43),this._useFoldingProviders=a.get(44)!=="indentation",this._unfoldOnClickAfterEndOfLine=a.get(48),this._restoringViewState=!1,this._currentModelHasFoldedImports=!1,this._foldingImportsByDefault=a.get(46),this.updateDebounceInfo=s.for(r.foldingRangeProvider,"Folding",{min:200}),this.foldingModel=null,this.hiddenRangeModel=null,this.rangeProvider=null,this.foldingRegionPromise=null,this.foldingModelPromise=null,this.updateScheduler=null,this.cursorChangedScheduler=null,this.mouseDownInfo=null,this.foldingDecorationProvider=new Ds(e),this.foldingDecorationProvider.showFoldingControls=a.get(110),this.foldingDecorationProvider.showFoldingHighlights=a.get(45),this.foldingEnabled=Xo.bindTo(this.contextKeyService),this.foldingEnabled.set(this._isEnabled),this._register(this.editor.onDidChangeModel(()=>this.onModelChanged())),this._register(this.editor.onDidChangeConfiguration(l=>{if(l.hasChanged(43)&&(this._isEnabled=this.editor.getOptions().get(43),this.foldingEnabled.set(this._isEnabled),this.onModelChanged()),l.hasChanged(47)&&this.onModelChanged(),l.hasChanged(110)||l.hasChanged(45)){const c=this.editor.getOptions();this.foldingDecorationProvider.showFoldingControls=c.get(110),this.foldingDecorationProvider.showFoldingHighlights=c.get(45),this.triggerFoldingModelChanged()}l.hasChanged(44)&&(this._useFoldingProviders=this.editor.getOptions().get(44)!=="indentation",this.onFoldingStrategyChanged()),l.hasChanged(48)&&(this._unfoldOnClickAfterEndOfLine=this.editor.getOptions().get(48)),l.hasChanged(46)&&(this._foldingImportsByDefault=this.editor.getOptions().get(46))})),this.onModelChanged()}saveViewState(){const e=this.editor.getModel();if(!e||!this._isEnabled||e.isTooLargeForTokenization())return{};if(this.foldingModel){const t=this.foldingModel.getMemento(),i=this.rangeProvider?this.rangeProvider.id:void 0;return{collapsedRegions:t,lineCount:e.getLineCount(),provider:i,foldedImports:this._currentModelHasFoldedImports}}}restoreViewState(e){const t=this.editor.getModel();if(!(!t||!this._isEnabled||t.isTooLargeForTokenization()||!this.hiddenRangeModel)&&e&&(this._currentModelHasFoldedImports=!!e.foldedImports,e.collapsedRegions&&e.collapsedRegions.length>0&&this.foldingModel)){this._restoringViewState=!0;try{this.foldingModel.applyMemento(e.collapsedRegions)}finally{this._restoringViewState=!1}}}onModelChanged(){this.localToDispose.clear();const e=this.editor.getModel();!this._isEnabled||!e||e.isTooLargeForTokenization()||(this._currentModelHasFoldedImports=!1,this.foldingModel=new w8e(e,this.foldingDecorationProvider),this.localToDispose.add(this.foldingModel),this.hiddenRangeModel=new k8e(this.foldingModel),this.localToDispose.add(this.hiddenRangeModel),this.localToDispose.add(this.hiddenRangeModel.onDidChange(t=>this.onHiddenRangesChanges(t))),this.updateScheduler=new Kc(this.updateDebounceInfo.get(e)),this.cursorChangedScheduler=new Ui(()=>this.revealCursor(),200),this.localToDispose.add(this.cursorChangedScheduler),this.localToDispose.add(this.languageFeaturesService.foldingRangeProvider.onDidChange(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelLanguageConfiguration(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelContent(t=>this.onDidChangeModelContent(t))),this.localToDispose.add(this.editor.onDidChangeCursorPosition(()=>this.onCursorPositionChanged())),this.localToDispose.add(this.editor.onMouseDown(t=>this.onEditorMouseDown(t))),this.localToDispose.add(this.editor.onMouseUp(t=>this.onEditorMouseUp(t))),this.localToDispose.add({dispose:()=>{var t,i;this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),(t=this.updateScheduler)===null||t===void 0||t.cancel(),this.updateScheduler=null,this.foldingModel=null,this.foldingModelPromise=null,this.hiddenRangeModel=null,this.cursorChangedScheduler=null,(i=this.rangeProvider)===null||i===void 0||i.dispose(),this.rangeProvider=null}}),this.triggerFoldingModelChanged())}onFoldingStrategyChanged(){var e;(e=this.rangeProvider)===null||e===void 0||e.dispose(),this.rangeProvider=null,this.triggerFoldingModelChanged()}getRangeProvider(e){if(this.rangeProvider)return this.rangeProvider;const t=new yU(e,this.languageConfigurationService,this._foldingLimitReporter);if(this.rangeProvider=t,this._useFoldingProviders&&this.foldingModel){const i=$0.getFoldingRangeProviders(this.languageFeaturesService,e);i.length>0&&(this.rangeProvider=new LU(e,i,()=>this.triggerFoldingModelChanged(),this._foldingLimitReporter,t))}return this.rangeProvider}getFoldingModel(){return this.foldingModelPromise}onDidChangeModelContent(e){var t;(t=this.hiddenRangeModel)===null||t===void 0||t.notifyChangeModelContent(e),this.triggerFoldingModelChanged()}triggerFoldingModelChanged(){this.updateScheduler&&(this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.foldingModelPromise=this.updateScheduler.trigger(()=>{const e=this.foldingModel;if(!e)return null;const t=new Ao,i=this.getRangeProvider(e.textModel),n=this.foldingRegionPromise=Qs(s=>i.compute(s));return n.then(s=>{if(s&&n===this.foldingRegionPromise){let r;if(this._foldingImportsByDefault&&!this._currentModelHasFoldedImports){const u=s.setCollapsedAllOfType(Vr.Imports.value,!0);u&&(r=Xd.capture(this.editor),this._currentModelHasFoldedImports=u)}const a=this.editor.getSelections(),l=a?a.map(u=>u.startLineNumber):[];e.update(s,l),r==null||r.restore(this.editor);const c=this.updateDebounceInfo.update(e.textModel,t.elapsed());this.updateScheduler&&(this.updateScheduler.defaultDelay=c)}return e})}).then(void 0,e=>(Nt(e),null)))}onHiddenRangesChanges(e){if(this.hiddenRangeModel&&e.length&&!this._restoringViewState){const t=this.editor.getSelections();t&&this.hiddenRangeModel.adjustSelections(t)&&this.editor.setSelections(t)}this.editor.setHiddenAreas(e,this)}onCursorPositionChanged(){this.hiddenRangeModel&&this.hiddenRangeModel.hasRanges()&&this.cursorChangedScheduler.schedule()}revealCursor(){const e=this.getFoldingModel();e&&e.then(t=>{if(t){const i=this.editor.getSelections();if(i&&i.length>0){const n=[];for(const s of i){const r=s.selectionStartLineNumber;this.hiddenRangeModel&&this.hiddenRangeModel.isHidden(r)&&n.push(...t.getAllRegionsAtLine(r,a=>a.isCollapsed&&r>a.startLineNumber))}n.length&&(t.toggleCollapseState(n),this.reveal(i[0].getPosition()))}}}).then(void 0,Nt)}onEditorMouseDown(e){if(this.mouseDownInfo=null,!this.hiddenRangeModel||!e.target||!e.target.range||!e.event.leftButton&&!e.event.middleButton)return;const t=e.target.range;let i=!1;switch(e.target.type){case 4:{const n=e.target.detail,s=e.target.element.offsetLeft;if(n.offsetX-s<4)return;i=!0;break}case 7:{if(this._unfoldOnClickAfterEndOfLine&&this.hiddenRangeModel.hasRanges()&&!e.target.detail.isAfterLines)break;return}case 6:{if(this.hiddenRangeModel.hasRanges()){const n=this.editor.getModel();if(n&&t.startColumn===n.getLineMaxColumn(t.startLineNumber))break}return}default:return}this.mouseDownInfo={lineNumber:t.startLineNumber,iconClicked:i}}onEditorMouseUp(e){const t=this.foldingModel;if(!t||!this.mouseDownInfo||!e.target)return;const i=this.mouseDownInfo.lineNumber,n=this.mouseDownInfo.iconClicked,s=e.target.range;if(!s||s.startLineNumber!==i)return;if(n){if(e.target.type!==4)return}else{const a=this.editor.getModel();if(!a||s.startColumn!==a.getLineMaxColumn(i))return}const r=t.getRegionAtLine(i);if(r&&r.startLineNumber===i){const a=r.isCollapsed;if(n||a){const l=e.event.altKey;let c=[];if(l){const u=g=>!g.containedBy(r)&&!r.containedBy(g),f=t.getRegionsInside(null,u);for(const g of f)g.isCollapsed&&c.push(g);c.length===0&&(c=f)}else{const u=e.event.middleButton||e.event.shiftKey;if(u)for(const f of t.getRegionsInside(r))f.isCollapsed===a&&c.push(f);(a||!u||c.length===0)&&c.push(r)}t.toggleCollapseState(c),this.reveal({lineNumber:i,column:1})}}}reveal(e){this.editor.revealPositionInCenterIfOutsideViewport(e,0)}};cg.ID="editor.contrib.folding";cg=$0=V8e([AS(1,bt),AS(2,dn),AS(3,ys),AS(4,vc),AS(5,Ze)],cg);class Ole{constructor(e){this.editor=e,this._onDidChange=new Y,this._computed=0,this._limited=!1}get limit(){return this.editor.getOptions().get(47)}update(e,t){(e!==this._computed||t!==this._limited)&&(this._computed=e,this._limited=t,this._onDidChange.fire())}}class _r extends Ke{runEditorCommand(e,t,i){const n=e.get(dn),s=cg.get(t);if(!s)return;const r=s.getFoldingModel();if(r)return this.reportTelemetry(e,t),r.then(a=>{if(a){this.invoke(s,a,t,i,n);const l=t.getSelection();l&&s.reveal(l.getStartPosition())}})}getSelectedLines(e){const t=e.getSelections();return t?t.map(i=>i.startLineNumber):[]}getLineNumbers(e,t){return e&&e.selectionLines?e.selectionLines.map(i=>i+1):this.getSelectedLines(t)}run(e,t){}}function Fle(o){if(!Wa(o)){if(!Br(o))return!1;const e=o;if(!Wa(e.levels)&&!om(e.levels)||!Wa(e.direction)&&!Ur(e.direction)||!Wa(e.selectionLines)&&(!Array.isArray(e.selectionLines)||!e.selectionLines.every(om)))return!1}return!0}class H8e extends _r{constructor(){super({id:"editor.unfold",label:v("unfoldAction.label","Unfold"),alias:"Unfold",precondition:Xo,kbOpts:{kbExpr:W.editorTextFocus,primary:3166,mac:{primary:2654},weight:100},metadata:{description:"Unfold the content in the editor",args:[{name:"Unfold editor argument",description:`Property-value pairs that can be passed through this argument:
						* 'levels': Number of levels to unfold. If not set, defaults to 1.
						* 'direction': If 'up', unfold given number of levels up otherwise unfolds down.
						* 'selectionLines': Array of the start lines (0-based) of the editor selections to apply the unfold action to. If not set, the active selection(s) will be used.
						`,constraint:Fle,schema:{type:"object",properties:{levels:{type:"number",default:1},direction:{type:"string",enum:["up","down"],default:"down"},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,i,n){const s=n&&n.levels||1,r=this.getLineNumbers(n,i);n&&n.direction==="up"?Rle(t,!1,s,r):dw(t,!1,s,r)}}class z8e extends _r{constructor(){super({id:"editor.unfoldRecursively",label:v("unFoldRecursivelyAction.label","Unfold Recursively"),alias:"Unfold Recursively",precondition:Xo,kbOpts:{kbExpr:W.editorTextFocus,primary:Fs(2089,2142),weight:100}})}invoke(e,t,i,n){dw(t,!1,Number.MAX_VALUE,this.getSelectedLines(i))}}class U8e extends _r{constructor(){super({id:"editor.fold",label:v("foldAction.label","Fold"),alias:"Fold",precondition:Xo,kbOpts:{kbExpr:W.editorTextFocus,primary:3164,mac:{primary:2652},weight:100},metadata:{description:"Fold the content in the editor",args:[{name:"Fold editor argument",description:`Property-value pairs that can be passed through this argument:
							* 'levels': Number of levels to fold.
							* 'direction': If 'up', folds given number of levels up otherwise folds down.
							* 'selectionLines': Array of the start lines (0-based) of the editor selections to apply the fold action to. If not set, the active selection(s) will be used.
							If no levels or direction is set, folds the region at the locations or if already collapsed, the first uncollapsed parent instead.
						`,constraint:Fle,schema:{type:"object",properties:{levels:{type:"number"},direction:{type:"string",enum:["up","down"]},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,i,n){const s=this.getLineNumbers(n,i),r=n&&n.levels,a=n&&n.direction;typeof r!="number"&&typeof a!="string"?y8e(t,!0,s):a==="up"?Rle(t,!0,r||1,s):dw(t,!0,r||1,s)}}class $8e extends _r{constructor(){super({id:"editor.toggleFold",label:v("toggleFoldAction.label","Toggle Fold"),alias:"Toggle Fold",precondition:Xo,kbOpts:{kbExpr:W.editorTextFocus,primary:Fs(2089,2090),weight:100}})}invoke(e,t,i){const n=this.getSelectedLines(i);Nle(t,1,n)}}class j8e extends _r{constructor(){super({id:"editor.foldRecursively",label:v("foldRecursivelyAction.label","Fold Recursively"),alias:"Fold Recursively",precondition:Xo,kbOpts:{kbExpr:W.editorTextFocus,primary:Fs(2089,2140),weight:100}})}invoke(e,t,i){const n=this.getSelectedLines(i);dw(t,!0,Number.MAX_VALUE,n)}}class K8e extends _r{constructor(){super({id:"editor.foldAllBlockComments",label:v("foldAllBlockComments.label","Fold All Block Comments"),alias:"Fold All Block Comments",precondition:Xo,kbOpts:{kbExpr:W.editorTextFocus,primary:Fs(2089,2138),weight:100}})}invoke(e,t,i,n,s){if(t.regions.hasTypes())wU(t,Vr.Comment.value,!0);else{const r=i.getModel();if(!r)return;const a=s.getLanguageConfiguration(r.getLanguageId()).comments;if(a&&a.blockCommentStartToken){const l=new RegExp("^\\s*"+Ll(a.blockCommentStartToken));CU(t,l,!0)}}}}class q8e extends _r{constructor(){super({id:"editor.foldAllMarkerRegions",label:v("foldAllMarkerRegions.label","Fold All Regions"),alias:"Fold All Regions",precondition:Xo,kbOpts:{kbExpr:W.editorTextFocus,primary:Fs(2089,2077),weight:100}})}invoke(e,t,i,n,s){if(t.regions.hasTypes())wU(t,Vr.Region.value,!0);else{const r=i.getModel();if(!r)return;const a=s.getLanguageConfiguration(r.getLanguageId()).foldingRules;if(a&&a.markers&&a.markers.start){const l=new RegExp(a.markers.start);CU(t,l,!0)}}}}class G8e extends _r{constructor(){super({id:"editor.unfoldAllMarkerRegions",label:v("unfoldAllMarkerRegions.label","Unfold All Regions"),alias:"Unfold All Regions",precondition:Xo,kbOpts:{kbExpr:W.editorTextFocus,primary:Fs(2089,2078),weight:100}})}invoke(e,t,i,n,s){if(t.regions.hasTypes())wU(t,Vr.Region.value,!1);else{const r=i.getModel();if(!r)return;const a=s.getLanguageConfiguration(r.getLanguageId()).foldingRules;if(a&&a.markers&&a.markers.start){const l=new RegExp(a.markers.start);CU(t,l,!1)}}}}class Y8e extends _r{constructor(){super({id:"editor.foldAllExcept",label:v("foldAllExcept.label","Fold All Except Selected"),alias:"Fold All Except Selected",precondition:Xo,kbOpts:{kbExpr:W.editorTextFocus,primary:Fs(2089,2136),weight:100}})}invoke(e,t,i){const n=this.getSelectedLines(i);Mle(t,!0,n)}}class Z8e extends _r{constructor(){super({id:"editor.unfoldAllExcept",label:v("unfoldAllExcept.label","Unfold All Except Selected"),alias:"Unfold All Except Selected",precondition:Xo,kbOpts:{kbExpr:W.editorTextFocus,primary:Fs(2089,2134),weight:100}})}invoke(e,t,i){const n=this.getSelectedLines(i);Mle(t,!1,n)}}class Q8e extends _r{constructor(){super({id:"editor.foldAll",label:v("foldAllAction.label","Fold All"),alias:"Fold All",precondition:Xo,kbOpts:{kbExpr:W.editorTextFocus,primary:Fs(2089,2069),weight:100}})}invoke(e,t,i){dw(t,!0)}}class X8e extends _r{constructor(){super({id:"editor.unfoldAll",label:v("unfoldAllAction.label","Unfold All"),alias:"Unfold All",precondition:Xo,kbOpts:{kbExpr:W.editorTextFocus,primary:Fs(2089,2088),weight:100}})}invoke(e,t,i){dw(t,!1)}}class Qv extends _r{getFoldingLevel(){return parseInt(this.id.substr(Qv.ID_PREFIX.length))}invoke(e,t,i){S8e(t,this.getFoldingLevel(),!0,this.getSelectedLines(i))}}Qv.ID_PREFIX="editor.foldLevel";Qv.ID=o=>Qv.ID_PREFIX+o;class J8e extends _r{constructor(){super({id:"editor.gotoParentFold",label:v("gotoParentFold.label","Go to Parent Fold"),alias:"Go to Parent Fold",precondition:Xo,kbOpts:{kbExpr:W.editorTextFocus,weight:100}})}invoke(e,t,i){const n=this.getSelectedLines(i);if(n.length>0){const s=L8e(n[0],t);s!==null&&i.setSelection({startLineNumber:s,startColumn:1,endLineNumber:s,endColumn:1})}}}class eWe extends _r{constructor(){super({id:"editor.gotoPreviousFold",label:v("gotoPreviousFold.label","Go to Previous Folding Range"),alias:"Go to Previous Folding Range",precondition:Xo,kbOpts:{kbExpr:W.editorTextFocus,weight:100}})}invoke(e,t,i){const n=this.getSelectedLines(i);if(n.length>0){const s=x8e(n[0],t);s!==null&&i.setSelection({startLineNumber:s,startColumn:1,endLineNumber:s,endColumn:1})}}}class tWe extends _r{constructor(){super({id:"editor.gotoNextFold",label:v("gotoNextFold.label","Go to Next Folding Range"),alias:"Go to Next Folding Range",precondition:Xo,kbOpts:{kbExpr:W.editorTextFocus,weight:100}})}invoke(e,t,i){const n=this.getSelectedLines(i);if(n.length>0){const s=D8e(n[0],t);s!==null&&i.setSelection({startLineNumber:s,startColumn:1,endLineNumber:s,endColumn:1})}}}class iWe extends _r{constructor(){super({id:"editor.createFoldingRangeFromSelection",label:v("createManualFoldRange.label","Create Folding Range from Selection"),alias:"Create Folding Range from Selection",precondition:Xo,kbOpts:{kbExpr:W.editorTextFocus,primary:Fs(2089,2135),weight:100}})}invoke(e,t,i){var n;const s=[],r=i.getSelections();if(r){for(const a of r){let l=a.endLineNumber;a.endColumn===1&&--l,l>a.startLineNumber&&(s.push({startLineNumber:a.startLineNumber,endLineNumber:l,type:void 0,isCollapsed:!0,source:1}),i.setSelection({startLineNumber:a.startLineNumber,startColumn:1,endLineNumber:a.startLineNumber,endColumn:1}))}if(s.length>0){s.sort((l,c)=>l.startLineNumber-c.startLineNumber);const a=gl.sanitizeAndMerge(t.regions,s,(n=i.getModel())===null||n===void 0?void 0:n.getLineCount());t.updatePost(gl.fromFoldRanges(a))}}}}class nWe extends _r{constructor(){super({id:"editor.removeManualFoldingRanges",label:v("removeManualFoldingRanges.label","Remove Manual Folding Ranges"),alias:"Remove Manual Folding Ranges",precondition:Xo,kbOpts:{kbExpr:W.editorTextFocus,primary:Fs(2089,2137),weight:100}})}invoke(e,t,i){const n=i.getSelections();if(n){const s=[];for(const r of n){const{startLineNumber:a,endLineNumber:l}=r;s.push(l>=a?{startLineNumber:a,endLineNumber:l}:{endLineNumber:l,startLineNumber:a})}t.removeManualRanges(s),e.triggerFoldingModelChanged()}}}pi(cg.ID,cg,0);Ce(H8e);Ce(z8e);Ce(U8e);Ce(j8e);Ce(Q8e);Ce(X8e);Ce(K8e);Ce(q8e);Ce(G8e);Ce(Y8e);Ce(Z8e);Ce($8e);Ce(J8e);Ce(eWe);Ce(tWe);Ce(iWe);Ce(nWe);for(let o=1;o<=7;o++)Awe(new Qv({id:Qv.ID(o),label:v("foldLevelAction.label","Fold Level {0}",o),alias:`Fold Level ${o}`,precondition:Xo,kbOpts:{kbExpr:W.editorTextFocus,primary:Fs(2089,2048|21+o),weight:100}}));si.registerCommand("_executeFoldingRangeProvider",async function(o,...e){const[t]=e;if(!(t instanceof gt))throw lc();const i=o.get(Ze),n=o.get(Fn).getModel(t);if(!n)throw lc();const s=o.get($t);if(!s.getValue("editor.folding",{resource:t}))return[];const r=o.get(dn),a=s.getValue("editor.foldingStrategy",{resource:t}),l={get limit(){return s.getValue("editor.foldingMaximumRegions",{resource:t})},update:(p,_)=>{}},c=new yU(n,r,l);let u=c;if(a!=="indentation"){const p=cg.getFoldingRangeProviders(i,n);p.length&&(u=new LU(n,p,()=>{},l,c))}const f=await u.compute(Yt.None),g=[];try{if(f)for(let p=0;p<f.length;p++){const _=f.getType(p);g.push({start:f.getStartLineNumber(p),end:f.getEndLineNumber(p),kind:_?Vr.fromValue(_):void 0})}return g}finally{u.dispose()}});class sWe extends Ke{constructor(){super({id:"editor.action.fontZoomIn",label:v("EditorFontZoomIn.label","Increase Editor Font Size"),alias:"Increase Editor Font Size",precondition:void 0})}run(e,t){Xl.setZoomLevel(Xl.getZoomLevel()+1)}}class oWe extends Ke{constructor(){super({id:"editor.action.fontZoomOut",label:v("EditorFontZoomOut.label","Decrease Editor Font Size"),alias:"Decrease Editor Font Size",precondition:void 0})}run(e,t){Xl.setZoomLevel(Xl.getZoomLevel()-1)}}class rWe extends Ke{constructor(){super({id:"editor.action.fontZoomReset",label:v("EditorFontZoomReset.label","Reset Editor Font Size"),alias:"Reset Editor Font Size",precondition:void 0})}run(e,t){Xl.setZoomLevel(0)}}Ce(sWe);Ce(oWe);Ce(rWe);var Ble=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},VL=function(o,e){return function(t,i){e(t,i,o)}};let dD=class{constructor(e,t,i,n){this._editor=e,this._languageFeaturesService=t,this._workerService=i,this._accessibilitySignalService=n,this._disposables=new he,this._sessionDisposables=new he,this._disposables.add(t.onTypeFormattingEditProvider.onDidChange(this._update,this)),this._disposables.add(e.onDidChangeModel(()=>this._update())),this._disposables.add(e.onDidChangeModelLanguage(()=>this._update())),this._disposables.add(e.onDidChangeConfiguration(s=>{s.hasChanged(56)&&this._update()})),this._update()}dispose(){this._disposables.dispose(),this._sessionDisposables.dispose()}_update(){if(this._sessionDisposables.clear(),!this._editor.getOption(56)||!this._editor.hasModel())return;const e=this._editor.getModel(),[t]=this._languageFeaturesService.onTypeFormattingEditProvider.ordered(e);if(!t||!t.autoFormatTriggerCharacters)return;const i=new LR;for(const n of t.autoFormatTriggerCharacters)i.add(n.charCodeAt(0));this._sessionDisposables.add(this._editor.onDidType(n=>{const s=n.charCodeAt(n.length-1);i.has(s)&&this._trigger(String.fromCharCode(s))}))}_trigger(e){if(!this._editor.hasModel()||this._editor.getSelections().length>1||!this._editor.getSelection().isEmpty())return;const t=this._editor.getModel(),i=this._editor.getPosition(),n=new os,s=this._editor.onDidChangeModelContent(r=>{if(r.isFlush){n.cancel(),s.dispose();return}for(let a=0,l=r.changes.length;a<l;a++)if(r.changes[a].range.endLineNumber<=i.lineNumber){n.cancel(),s.dispose();return}});Vre(this._workerService,this._languageFeaturesService,t,i,e,t.getFormattingOptions(),n.token).then(r=>{n.token.isCancellationRequested||Yo(r)&&(this._accessibilitySignalService.playSignal(Ot.format,{userGesture:!1}),N1.execute(this._editor,r,!0))}).finally(()=>{s.dispose()})}};dD.ID="editor.contrib.autoFormat";dD=Ble([VL(1,Ze),VL(2,Cc),VL(3,Vm)],dD);let uD=class{constructor(e,t,i){this.editor=e,this._languageFeaturesService=t,this._instantiationService=i,this._callOnDispose=new he,this._callOnModel=new he,this._callOnDispose.add(e.onDidChangeConfiguration(()=>this._update())),this._callOnDispose.add(e.onDidChangeModel(()=>this._update())),this._callOnDispose.add(e.onDidChangeModelLanguage(()=>this._update())),this._callOnDispose.add(t.documentRangeFormattingEditProvider.onDidChange(this._update,this))}dispose(){this._callOnDispose.dispose(),this._callOnModel.dispose()}_update(){this._callOnModel.clear(),this.editor.getOption(55)&&this.editor.hasModel()&&this._languageFeaturesService.documentRangeFormattingEditProvider.has(this.editor.getModel())&&this._callOnModel.add(this.editor.onDidPaste(({range:e})=>this._trigger(e)))}_trigger(e){this.editor.hasModel()&&(this.editor.getSelections().length>1||this._instantiationService.invokeFunction(Wre,this.editor,e,2,Yf.None,Yt.None,!1).catch(Nt))}};uD.ID="editor.contrib.formatOnPaste";uD=Ble([VL(1,Ze),VL(2,ct)],uD);class aWe extends Ke{constructor(){super({id:"editor.action.formatDocument",label:v("formatDocument.label","Format Document"),alias:"Format Document",precondition:ue.and(W.notInCompositeEditor,W.writable,W.hasDocumentFormattingProvider),kbOpts:{kbExpr:W.editorTextFocus,primary:1572,linux:{primary:3111},weight:100},contextMenuOpts:{group:"1_modification",order:1.3}})}async run(e,t){if(t.hasModel()){const i=e.get(ct);await e.get(Bm).showWhile(i.invokeFunction(S5e,t,1,Yf.None,Yt.None,!0),250)}}}class lWe extends Ke{constructor(){super({id:"editor.action.formatSelection",label:v("formatSelection.label","Format Selection"),alias:"Format Selection",precondition:ue.and(W.writable,W.hasDocumentSelectionFormattingProvider),kbOpts:{kbExpr:W.editorTextFocus,primary:Fs(2089,2084),weight:100},contextMenuOpts:{when:W.hasNonEmptySelection,group:"1_modification",order:1.31}})}async run(e,t){if(!t.hasModel())return;const i=e.get(ct),n=t.getModel(),s=t.getSelections().map(a=>a.isEmpty()?new A(a.startLineNumber,1,a.startLineNumber,n.getLineMaxColumn(a.startLineNumber)):a);await e.get(Bm).showWhile(i.invokeFunction(Wre,t,s,1,Yf.None,Yt.None,!0),250)}}pi(dD.ID,dD,2);pi(uD.ID,uD,2);Ce(aWe);Ce(lWe);si.registerCommand("editor.action.format",async o=>{const e=o.get(gi).getFocusedCodeEditor();if(!e||!e.hasModel())return;const t=o.get(Un);e.getSelection().isEmpty()?await t.executeCommand("editor.action.formatDocument"):await t.executeCommand("editor.action.formatSelection")});var cWe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},DB=function(o,e){return function(t,i){e(t,i,o)}};class _C{remove(){var e;(e=this.parent)===null||e===void 0||e.children.delete(this.id)}static findId(e,t){let i;typeof e=="string"?i=`${t.id}/${e}`:(i=`${t.id}/${e.name}`,t.children.get(i)!==void 0&&(i=`${t.id}/${e.name}_${e.range.startLineNumber}_${e.range.startColumn}`));let n=i;for(let s=0;t.children.get(n)!==void 0;s++)n=`${i}_${s}`;return n}static empty(e){return e.children.size===0}}class v6 extends _C{constructor(e,t,i){super(),this.id=e,this.parent=t,this.symbol=i,this.children=new Map}}class Wle extends _C{constructor(e,t,i,n){super(),this.id=e,this.parent=t,this.label=i,this.order=n,this.children=new Map}}class vf extends _C{static create(e,t,i){const n=new os(i),s=new vf(t.uri),r=e.ordered(t),a=r.map((c,u)=>{var f;const g=_C.findId(`provider_${u}`,s),p=new Wle(g,s,(f=c.displayName)!==null&&f!==void 0?f:"Unknown Outline Provider",u);return Promise.resolve(c.provideDocumentSymbols(t,n.token)).then(_=>{for(const b of _||[])vf._makeOutlineElement(b,p);return p},_=>(hs(_),p)).then(_=>{_C.empty(_)?_.remove():s._groups.set(g,_)})}),l=e.onDidChange(()=>{const c=e.ordered(t);zn(c,r)||n.cancel()});return Promise.all(a).then(()=>n.token.isCancellationRequested&&!i.isCancellationRequested?vf.create(e,t,i):s._compact()).finally(()=>{n.dispose(),l.dispose(),n.dispose()})}static _makeOutlineElement(e,t){const i=_C.findId(e,t),n=new v6(i,t,e);if(e.children)for(const s of e.children)vf._makeOutlineElement(s,n);t.children.set(n.id,n)}constructor(e){super(),this.uri=e,this.id="root",this.parent=void 0,this._groups=new Map,this.children=new Map,this.id="root",this.parent=void 0}_compact(){let e=0;for(const[t,i]of this._groups)i.children.size===0?this._groups.delete(t):e+=1;if(e!==1)this.children=this._groups;else{const t=ii.first(this._groups.values());for(const[,i]of t.children)i.parent=this,this.children.set(i.id,i)}return this}getTopLevelSymbols(){const e=[];for(const t of this.children.values())t instanceof v6?e.push(t.symbol):e.push(...ii.map(t.children.values(),i=>i.symbol));return e.sort((t,i)=>A.compareRangesUsingStarts(t.range,i.range))}asListOfDocumentSymbols(){const e=this.getTopLevelSymbols(),t=[];return vf._flattenDocumentSymbols(t,e,""),t.sort((i,n)=>Z.compare(A.getStartPosition(i.range),A.getStartPosition(n.range))||Z.compare(A.getEndPosition(n.range),A.getEndPosition(i.range)))}static _flattenDocumentSymbols(e,t,i){for(const n of t)e.push({kind:n.kind,tags:n.tags,name:n.name,detail:n.detail,containerName:n.containerName||i,range:n.range,selectionRange:n.selectionRange,children:void 0}),n.children&&vf._flattenDocumentSymbols(e,n.children,n.name)}}const Ck=Zt("IOutlineModelService");let b6=class{constructor(e,t,i){this._languageFeaturesService=e,this._disposables=new he,this._cache=new Dh(10,.7),this._debounceInformation=t.for(e.documentSymbolProvider,"DocumentSymbols",{min:350}),this._disposables.add(i.onModelRemoved(n=>{this._cache.delete(n.id)}))}dispose(){this._disposables.dispose()}async getOrCreate(e,t){const i=this._languageFeaturesService.documentSymbolProvider,n=i.ordered(e);let s=this._cache.get(e.id);if(!s||s.versionId!==e.getVersionId()||!zn(s.provider,n)){const a=new os;s={versionId:e.getVersionId(),provider:n,promiseCnt:0,source:a,promise:vf.create(i,e,a.token),model:void 0},this._cache.set(e.id,s);const l=Date.now();s.promise.then(c=>{s.model=c,this._debounceInformation.update(e,Date.now()-l)}).catch(c=>{this._cache.delete(e.id)})}if(s.model)return s.model;s.promiseCnt+=1;const r=t.onCancellationRequested(()=>{--s.promiseCnt===0&&(s.source.cancel(),this._cache.delete(e.id))});try{return await s.promise}finally{r.dispose()}}};b6=cWe([DB(0,Ze),DB(1,vc),DB(2,Fn)],b6);oi(Ck,b6,1);si.registerCommand("_executeDocumentSymbolProvider",async function(o,...e){const[t]=e;wi(gt.isUri(t));const i=o.get(Ck),s=await o.get(Ca).createModelReference(t);try{return(await i.getOrCreate(s.object.textEditorModel,Yt.None)).getTopLevelSymbols()}finally{s.dispose()}});class lo extends J{constructor(e,t){super(),this.contextKeyService=e,this.model=t,this.inlineCompletionVisible=lo.inlineSuggestionVisible.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentation=lo.inlineSuggestionHasIndentation.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentationLessThanTabSize=lo.inlineSuggestionHasIndentationLessThanTabSize.bindTo(this.contextKeyService),this.suppressSuggestions=lo.suppressSuggestions.bindTo(this.contextKeyService),this._register(zt(i=>{const n=this.model.read(i),s=n==null?void 0:n.state.read(i),r=!!(s!=null&&s.inlineCompletion)&&(s==null?void 0:s.primaryGhostText)!==void 0&&!(s!=null&&s.primaryGhostText.isEmpty());this.inlineCompletionVisible.set(r),s!=null&&s.primaryGhostText&&(s!=null&&s.inlineCompletion)&&this.suppressSuggestions.set(s.inlineCompletion.inlineCompletion.source.inlineCompletions.suppressSuggestions)})),this._register(zt(i=>{const n=this.model.read(i);let s=!1,r=!0;const a=n==null?void 0:n.primaryGhostText.read(i);if(n!=null&&n.selectedSuggestItem&&a&&a.parts.length>0){const{column:l,lines:c}=a.parts[0],u=c[0],f=n.textModel.getLineIndentColumn(a.lineNumber);if(l<=f){let p=gr(u);p===-1&&(p=u.length-1),s=p>0;const _=n.textModel.getOptions().tabSize;r=Vs.visibleColumnFromColumn(u,p+1,_)<_}}this.inlineCompletionSuggestsIndentation.set(s),this.inlineCompletionSuggestsIndentationLessThanTabSize.set(r)}))}}lo.inlineSuggestionVisible=new Be("inlineSuggestionVisible",!1,v("inlineSuggestionVisible","Whether an inline suggestion is visible"));lo.inlineSuggestionHasIndentation=new Be("inlineSuggestionHasIndentation",!1,v("inlineSuggestionHasIndentation","Whether the inline suggestion starts with whitespace"));lo.inlineSuggestionHasIndentationLessThanTabSize=new Be("inlineSuggestionHasIndentationLessThanTabSize",!0,v("inlineSuggestionHasIndentationLessThanTabSize","Whether the inline suggestion starts with whitespace that is less than what would be inserted by tab"));lo.suppressSuggestions=new Be("inlineSuggestionSuppressSuggestions",void 0,v("suppressSuggestions","Whether suggestions should be suppressed for the current suggestion"));class hD{constructor(e,t){this.lineNumber=e,this.parts=t}equals(e){return this.lineNumber===e.lineNumber&&this.parts.length===e.parts.length&&this.parts.every((t,i)=>t.equals(e.parts[i]))}renderForScreenReader(e){if(this.parts.length===0)return"";const t=this.parts[this.parts.length-1],i=e.substr(0,t.column-1);return new zz([...this.parts.map(s=>new og(A.fromPositions(new Z(1,s.column)),s.lines.join(`
`)))]).applyToString(i).substring(this.parts[0].column-1)}isEmpty(){return this.parts.every(e=>e.lines.length===0)}get lineCount(){return 1+this.parts.reduce((e,t)=>e+t.lines.length-1,0)}}class GM{constructor(e,t,i){this.column=e,this.text=t,this.preview=i,this.lines=Sh(this.text)}equals(e){return this.column===e.column&&this.lines.length===e.lines.length&&this.lines.every((t,i)=>t===e.lines[i])}}class C6{constructor(e,t,i,n=0){this.lineNumber=e,this.columnRange=t,this.text=i,this.additionalReservedLineCount=n,this.parts=[new GM(this.columnRange.endColumnExclusive,this.text,!1)],this.newLines=Sh(this.text)}renderForScreenReader(e){return this.newLines.join(`
`)}get lineCount(){return this.newLines.length}isEmpty(){return this.parts.every(e=>e.lines.length===0)}equals(e){return this.lineNumber===e.lineNumber&&this.columnRange.equals(e.columnRange)&&this.newLines.length===e.newLines.length&&this.newLines.every((t,i)=>t===e.newLines[i])&&this.additionalReservedLineCount===e.additionalReservedLineCount}}function Iee(o,e){return zn(o,e,Vle)}function Vle(o,e){return o===e?!0:!o||!e?!1:o instanceof hD&&e instanceof hD||o instanceof C6&&e instanceof C6?o.equals(e):!1}const dWe=[];function uWe(){return dWe}class Hle{constructor(e,t){if(this.startColumn=e,this.endColumnExclusive=t,e>t)throw new pn(`startColumn ${e} cannot be after endColumnExclusive ${t}`)}toRange(e){return new A(e,this.startColumn,e,this.endColumnExclusive)}equals(e){return this.startColumn===e.startColumn&&this.endColumnExclusive===e.endColumnExclusive}}function zle(o,e){const t=new he,i=o.createDecorationsCollection();return t.add(lP({debugName:()=>`Apply decorations from ${e.debugName}`},n=>{const s=e.read(n);i.set(s)})),t.add({dispose:()=>{i.clear()}}),t}function hWe(o,e){return new Z(o.lineNumber+e.lineNumber-1,e.lineNumber===1?o.column+e.column-1:e.column)}function Tee(o,e){return new Z(o.lineNumber-e.lineNumber+1,o.lineNumber-e.lineNumber===0?o.column-e.column+1:o.column)}var fWe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},gWe=function(o,e){return function(t,i){e(t,i,o)}};const Nee="ghost-text";let w6=class extends J{constructor(e,t,i){super(),this.editor=e,this.model=t,this.languageService=i,this.isDisposed=ni(this,!1),this.currentTextModel=Gi(this.editor.onDidChangeModel,()=>this.editor.getModel()),this.uiState=Dt(this,n=>{if(this.isDisposed.read(n))return;const s=this.currentTextModel.read(n);if(s!==this.model.targetTextModel.read(n))return;const r=this.model.ghostText.read(n);if(!r)return;const a=r instanceof C6?r.columnRange:void 0,l=[],c=[];function u(b,y){if(c.length>0){const S=c[c.length-1];y&&S.decorations.push(new Hr(S.content.length+1,S.content.length+1+b[0].length,y,0)),S.content+=b[0],b=b.slice(1)}for(const S of b)c.push({content:S,decorations:y?[new Hr(1,S.length+1,y,0)]:[]})}const f=s.getLineContent(r.lineNumber);let g,p=0;for(const b of r.parts){let y=b.lines;g===void 0?(l.push({column:b.column,text:y[0],preview:b.preview}),y=y.slice(1)):u([f.substring(p,b.column-1)],void 0),y.length>0&&(u(y,Nee),g===void 0&&b.column<=f.length&&(g=b.column)),p=b.column-1}g!==void 0&&u([f.substring(p)],void 0);const _=g!==void 0?new Hle(g,f.length+1):void 0;return{replacedRange:a,inlineTexts:l,additionalLines:c,hiddenRange:_,lineNumber:r.lineNumber,additionalReservedLineCount:this.model.minReservedLineCount.read(n),targetTextModel:s}}),this.decorations=Dt(this,n=>{const s=this.uiState.read(n);if(!s)return[];const r=[];s.replacedRange&&r.push({range:s.replacedRange.toRange(s.lineNumber),options:{inlineClassName:"inline-completion-text-to-replace",description:"GhostTextReplacement"}}),s.hiddenRange&&r.push({range:s.hiddenRange.toRange(s.lineNumber),options:{inlineClassName:"ghost-text-hidden",description:"ghost-text-hidden"}});for(const a of s.inlineTexts)r.push({range:A.fromPositions(new Z(s.lineNumber,a.column)),options:{description:Nee,after:{content:a.text,inlineClassName:a.preview?"ghost-text-decoration-preview":"ghost-text-decoration",cursorStops:Vc.Left},showIfCollapsed:!0}});return r}),this.additionalLinesWidget=this._register(new Ule(this.editor,this.languageService.languageIdCodec,Dt(n=>{const s=this.uiState.read(n);return s?{lineNumber:s.lineNumber,additionalLines:s.additionalLines,minReservedLineCount:s.additionalReservedLineCount,targetTextModel:s.targetTextModel}:void 0}))),this._register(lt(()=>{this.isDisposed.set(!0,void 0)})),this._register(zle(this.editor,this.decorations))}ownsViewZone(e){return this.additionalLinesWidget.viewZoneId===e}};w6=fWe([gWe(2,xn)],w6);class Ule extends J{get viewZoneId(){return this._viewZoneId}constructor(e,t,i){super(),this.editor=e,this.languageIdCodec=t,this.lines=i,this._viewZoneId=void 0,this.editorOptionsChanged=Go("editorOptionChanged",Ie.filter(this.editor.onDidChangeConfiguration,n=>n.hasChanged(33)||n.hasChanged(117)||n.hasChanged(99)||n.hasChanged(94)||n.hasChanged(51)||n.hasChanged(50)||n.hasChanged(67))),this._register(zt(n=>{const s=this.lines.read(n);this.editorOptionsChanged.read(n),s?this.updateLines(s.lineNumber,s.additionalLines,s.minReservedLineCount):this.clear()}))}dispose(){super.dispose(),this.clear()}clear(){this.editor.changeViewZones(e=>{this._viewZoneId&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0)})}updateLines(e,t,i){const n=this.editor.getModel();if(!n)return;const{tabSize:s}=n.getOptions();this.editor.changeViewZones(r=>{this._viewZoneId&&(r.removeZone(this._viewZoneId),this._viewZoneId=void 0);const a=Math.max(t.length,i);if(a>0){const l=document.createElement("div");pWe(l,s,t,this.editor.getOptions(),this.languageIdCodec),this._viewZoneId=r.addZone({afterLineNumber:e,heightInLines:a,domNode:l,afterColumnAffinity:1})}})}}function pWe(o,e,t,i,n){const s=i.get(33),r=i.get(117),a="none",l=i.get(94),c=i.get(51),u=i.get(50),f=i.get(67),g=new Y1(1e4);g.appendString('<div class="suggest-preview-text">');for(let b=0,y=t.length;b<y;b++){const S=t[b],L=S.content;g.appendString('<div class="view-line'),g.appendString('" style="top:'),g.appendString(String(b*f)),g.appendString('px;width:1000000px;">');const x=PD(L),D=i1(L),E=Gs.createEmpty(L,n);zD(new Pm(u.isMonospace&&!s,u.canUseHalfwidthRightwardsArrow,L,!1,x,D,0,E,S.decorations,e,0,u.spaceWidth,u.middotWidth,u.wsmiddotWidth,r,a,l,c!==ml.OFF,null),g),g.appendString("</div>")}g.appendString("</div>"),vo(o,u);const p=g.build(),_=Ree?Ree.createHTML(p):p;o.innerHTML=_}const Ree=fg("editorGhostText",{createHTML:o=>o});function mWe(o,e){const t=new Cse,i=new yse(t,c=>e.getLanguageConfiguration(c)),n=new wse(new _We([o]),i),s=O9(n,[],void 0,!0);let r="";const a=o.getLineContent();function l(c,u){if(c.kind===2)if(l(c.openingBracket,u),u=Jn(u,c.openingBracket.length),c.child&&(l(c.child,u),u=Jn(u,c.child.length)),c.closingBracket)l(c.closingBracket,u),u=Jn(u,c.closingBracket.length);else{const g=i.getSingleLanguageBracketTokens(c.openingBracket.languageId).findClosingTokenText(c.openingBracket.bracketIds);r+=g}else if(c.kind!==3){if(c.kind===0||c.kind===1)r+=a.substring(u,Jn(u,c.length));else if(c.kind===4)for(const f of c.children)l(f,u),u=Jn(u,f.length)}}return l(s,zr),r}class _We{constructor(e){this.lines=e,this.tokenization={getLineTokens:t=>this.lines[t-1]}}getLineCount(){return this.lines.length}getLineLength(e){return this.lines[e-1].getLineContent().length}}async function vWe(o,e,t,i,n=Yt.None,s){const r=wWe(e,t),a=o.all(t),l=new nH;for(const S of a)S.groupId&&l.add(S.groupId,S);function c(S){if(!S.yieldsToGroupIds)return[];const L=[];for(const x of S.yieldsToGroupIds||[]){const D=l.get(x);for(const E of D)L.push(E)}return L}const u=new Map,f=new Set;function g(S,L){if(L=[...L,S],f.has(S))return L;f.add(S);try{const x=c(S);for(const D of x){const E=g(D,L);if(E)return E}}finally{f.delete(S)}}function p(S){const L=u.get(S);if(L)return L;const x=g(S,[]);x&&hs(new Error(`Inline completions: cyclic yield-to dependency detected. Path: ${x.map(E=>E.toString?E.toString():""+E).join(" -> ")}`));const D=new BD;return u.set(S,D.p),(async()=>{if(!x){const E=c(S);for(const N of E){const M=await p(N);if(M&&M.items.length>0)return}}try{return await S.provideInlineCompletions(t,e,i,n)}catch(E){hs(E);return}})().then(E=>D.complete(E),E=>D.error(E)),D.p}const _=await Promise.all(a.map(async S=>({provider:S,completions:await p(S)}))),b=new Map,y=[];for(const S of _){const L=S.completions;if(!L)continue;const x=new CWe(L,S.provider);y.push(x);for(const D of L.items){const E=YM.from(D,x,r,t,s);b.set(E.hash(),E)}}return new bWe(Array.from(b.values()),new Set(b.keys()),y)}class bWe{constructor(e,t,i){this.completions=e,this.hashs=t,this.providerResults=i}has(e){return this.hashs.has(e.hash())}dispose(){for(const e of this.providerResults)e.removeRef()}}class CWe{constructor(e,t){this.inlineCompletions=e,this.provider=t,this.refCount=1}addRef(){this.refCount++}removeRef(){this.refCount--,this.refCount===0&&this.provider.freeInlineCompletions(this.inlineCompletions)}}class YM{static from(e,t,i,n,s){let r,a,l=e.range?A.lift(e.range):i;if(typeof e.insertText=="string"){if(r=e.insertText,s&&e.completeBracketPairs){r=Mee(r,l.getStartPosition(),n,s);const c=r.length-e.insertText.length;c!==0&&(l=new A(l.startLineNumber,l.startColumn,l.endLineNumber,l.endColumn+c))}a=void 0}else if("snippet"in e.insertText){const c=e.insertText.snippet.length;if(s&&e.completeBracketPairs){e.insertText.snippet=Mee(e.insertText.snippet,l.getStartPosition(),n,s);const f=e.insertText.snippet.length-c;f!==0&&(l=new A(l.startLineNumber,l.startColumn,l.endLineNumber,l.endColumn+f))}const u=new Uv().parse(e.insertText.snippet);u.children.length===1&&u.children[0]instanceof Ar?(r=u.children[0].value,a=void 0):(r=u.toString(),a={snippet:e.insertText.snippet,range:l})}else kA(e.insertText);return new YM(r,e.command,l,r,a,e.additionalTextEdits||uWe(),e,t)}constructor(e,t,i,n,s,r,a,l){this.filterText=e,this.command=t,this.range=i,this.insertText=n,this.snippetInfo=s,this.additionalTextEdits=r,this.sourceInlineCompletion=a,this.source=l,e=e.replace(/\r\n|\r/g,`
`),n=e.replace(/\r\n|\r/g,`
`)}withRange(e){return new YM(this.filterText,this.command,e,this.insertText,this.snippetInfo,this.additionalTextEdits,this.sourceInlineCompletion,this.source)}hash(){return JSON.stringify({insertText:this.insertText,range:this.range.toString()})}}function wWe(o,e){const t=e.getWordAtPosition(o),i=e.getLineMaxColumn(o.lineNumber);return t?new A(o.lineNumber,t.startColumn,o.lineNumber,i):A.fromPositions(o,o.with(void 0,i))}function Mee(o,e,t,i){const s=t.getLineContent(e.lineNumber).substring(0,e.column-1)+o,r=t.tokenization.tokenizeLineWithEdit(e,s.length-(e.column-1),o),a=r==null?void 0:r.sliceAndInflate(e.column-1,s.length,0);return a?mWe(a,i):o}function Lv(o,e,t){const i=t?o.range.intersectRanges(t):o.range;if(!i)return o;const n=e.getValueInRange(i,1),s=am(n,o.text),r=Gc.ofText(n.substring(0,s)).addToPosition(o.range.getStartPosition()),a=o.text.substring(s),l=A.fromPositions(r,o.range.getEndPosition());return new og(l,a)}function $le(o,e){return o.text.startsWith(e.text)&&yWe(o.range,e.range)}function Aee(o,e,t,i,n=0){let s=Lv(o,e);if(s.range.endLineNumber!==s.range.startLineNumber)return;const r=e.getLineContent(s.range.startLineNumber),a=an(r).length;if(s.range.startColumn-1<=a){const _=an(s.text).length,b=r.substring(s.range.startColumn-1,a),[y,S]=[s.range.getStartPosition(),s.range.getEndPosition()],L=y.column+b.length<=S.column?y.delta(0,b.length):S,x=A.fromPositions(L,S),D=s.text.startsWith(b)?s.text.substring(b.length):s.text.substring(_);s=new og(x,D)}const c=e.getValueInRange(s.range),u=SWe(c,s.text);if(!u)return;const f=s.range.startLineNumber,g=new Array;if(t==="prefix"){const _=u.filter(b=>b.originalLength===0);if(_.length>1||_.length===1&&_[0].originalStart!==c.length)return}const p=s.text.length-n;for(const _ of u){const b=s.range.startColumn+_.originalStart+_.originalLength;if(t==="subwordSmart"&&i&&i.lineNumber===s.range.startLineNumber&&b<i.column||_.originalLength>0)return;if(_.modifiedLength===0)continue;const y=_.modifiedStart+_.modifiedLength,S=Math.max(_.modifiedStart,Math.min(y,p)),L=s.text.substring(_.modifiedStart,S),x=s.text.substring(S,Math.max(_.modifiedStart,y));L.length>0&&g.push(new GM(b,L,!1)),x.length>0&&g.push(new GM(b,x,!0))}return new hD(f,g)}function yWe(o,e){return e.getStartPosition().equals(o.getStartPosition())&&e.getEndPosition().isBeforeOrEqual(o.getEndPosition())}let Eu;function SWe(o,e){if((Eu==null?void 0:Eu.originalValue)===o&&(Eu==null?void 0:Eu.newValue)===e)return Eu==null?void 0:Eu.changes;{let t=Oee(o,e,!0);if(t){const i=Pee(t);if(i>0){const n=Oee(o,e,!1);n&&Pee(n)<i&&(t=n)}}return Eu={originalValue:o,newValue:e,changes:t},t}}function Pee(o){let e=0;for(const t of o)e+=t.originalLength;return e}function Oee(o,e,t){if(o.length>5e3||e.length>5e3)return;function i(c){let u=0;for(let f=0,g=c.length;f<g;f++){const p=c.charCodeAt(f);p>u&&(u=p)}return u}const n=Math.max(i(o),i(e));function s(c){if(c<0)throw new Error("unexpected");return n+c+1}function r(c){let u=0,f=0;const g=new Int32Array(c.length);for(let p=0,_=c.length;p<_;p++)if(t&&c[p]==="("){const b=f*100+u;g[p]=s(2*b),u++}else if(t&&c[p]===")"){u=Math.max(u-1,0);const b=f*100+u;g[p]=s(2*b+1),u===0&&f++}else g[p]=c.charCodeAt(p);return g}const a=r(o),l=r(e);return new zu({getElements:()=>a},{getElements:()=>l}).ComputeDiff(!1).changes}var LWe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Fee=function(o,e){return function(t,i){e(t,i,o)}};let y6=class extends J{constructor(e,t,i,n,s){super(),this.textModel=e,this.versionId=t,this._debounceValue=i,this.languageFeaturesService=n,this.languageConfigurationService=s,this._updateOperation=this._register(new Xs),this.inlineCompletions=Bx("inlineCompletions",void 0),this.suggestWidgetInlineCompletions=Bx("suggestWidgetInlineCompletions",void 0),this._register(this.textModel.onDidChangeContent(()=>{this._updateOperation.clear()}))}fetch(e,t,i){var n,s;const r=new DWe(e,t,this.textModel.getVersionId()),a=t.selectedSuggestionInfo?this.suggestWidgetInlineCompletions:this.inlineCompletions;if(!((n=this._updateOperation.value)===null||n===void 0)&&n.request.satisfies(r))return this._updateOperation.value.promise;if(!((s=a.get())===null||s===void 0)&&s.request.satisfies(r))return Promise.resolve(!0);const l=!!this._updateOperation.value;this._updateOperation.clear();const c=new os,u=(async()=>{if((l||t.triggerKind===jf.Automatic)&&await xWe(this._debounceValue.get(this.textModel),c.token),c.token.isCancellationRequested||this.textModel.getVersionId()!==r.versionId)return!1;const p=new Date,_=await vWe(this.languageFeaturesService.inlineCompletionsProvider,e,this.textModel,t,c.token,this.languageConfigurationService);if(c.token.isCancellationRequested||this.textModel.getVersionId()!==r.versionId)return!1;const b=new Date;this._debounceValue.update(this.textModel,b.getTime()-p.getTime());const y=new IWe(_,r,this.textModel,this.versionId);if(i){const S=i.toInlineCompletion(void 0);i.canBeReused(this.textModel,e)&&!_.has(S)&&y.prepend(i.inlineCompletion,S.range,!0)}return this._updateOperation.clear(),qi(S=>{a.set(y,S)}),!0})(),f=new EWe(r,c,u);return this._updateOperation.value=f,u}clear(e){this._updateOperation.clear(),this.inlineCompletions.set(void 0,e),this.suggestWidgetInlineCompletions.set(void 0,e)}clearSuggestWidgetInlineCompletions(e){var t;!((t=this._updateOperation.value)===null||t===void 0)&&t.request.context.selectedSuggestionInfo&&this._updateOperation.clear(),this.suggestWidgetInlineCompletions.set(void 0,e)}cancelUpdate(){this._updateOperation.clear()}};y6=LWe([Fee(3,Ze),Fee(4,dn)],y6);function xWe(o,e){return new Promise(t=>{let i;const n=setTimeout(()=>{i&&i.dispose(),t()},o);e&&(i=e.onCancellationRequested(()=>{clearTimeout(n),i&&i.dispose(),t()}))})}class DWe{constructor(e,t,i){this.position=e,this.context=t,this.versionId=i}satisfies(e){return this.position.equals(e.position)&&kWe(this.context.selectedSuggestionInfo,e.context.selectedSuggestionInfo,(t,i)=>t.equals(i))&&(e.context.triggerKind===jf.Automatic||this.context.triggerKind===jf.Explicit)&&this.versionId===e.versionId}}function kWe(o,e,t){return!o||!e?o===e:t(o,e)}class EWe{constructor(e,t,i){this.request=e,this.cancellationTokenSource=t,this.promise=i}dispose(){this.cancellationTokenSource.cancel()}}class IWe{get inlineCompletions(){return this._inlineCompletions}constructor(e,t,i,n){this.inlineCompletionProviderResult=e,this.request=t,this.textModel=i,this.versionId=n,this._refCount=1,this._prependedInlineCompletionItems=[],this._rangeVersionIdValue=0,this._rangeVersionId=Dt(this,r=>{this.versionId.read(r);let a=!1;for(const l of this._inlineCompletions)a=a||l._updateRange(this.textModel);return a&&this._rangeVersionIdValue++,this._rangeVersionIdValue});const s=i.deltaDecorations([],e.completions.map(r=>({range:r.range,options:{description:"inline-completion-tracking-range"}})));this._inlineCompletions=e.completions.map((r,a)=>new Bee(r,s[a],this._rangeVersionId))}clone(){return this._refCount++,this}dispose(){if(this._refCount--,this._refCount===0){setTimeout(()=>{this.textModel.isDisposed()||this.textModel.deltaDecorations(this._inlineCompletions.map(e=>e.decorationId),[])},0),this.inlineCompletionProviderResult.dispose();for(const e of this._prependedInlineCompletionItems)e.source.removeRef()}}prepend(e,t,i){i&&e.source.addRef();const n=this.textModel.deltaDecorations([],[{range:t,options:{description:"inline-completion-tracking-range"}}])[0];this._inlineCompletions.unshift(new Bee(e,n,this._rangeVersionId,t)),this._prependedInlineCompletionItems.push(e)}}class Bee{get forwardStable(){var e;return(e=this.inlineCompletion.source.inlineCompletions.enableForwardStability)!==null&&e!==void 0?e:!1}constructor(e,t,i,n){this.inlineCompletion=e,this.decorationId=t,this.rangeVersion=i,this.semanticId=JSON.stringify([this.inlineCompletion.filterText,this.inlineCompletion.insertText,this.inlineCompletion.range.getStartPosition().toString()]),this._isValid=!0,this._updatedRange=n??e.range}toInlineCompletion(e){return this.inlineCompletion.withRange(this._getUpdatedRange(e))}toSingleTextEdit(e){return new og(this._getUpdatedRange(e),this.inlineCompletion.insertText)}isVisible(e,t,i){const n=Lv(this._toFilterTextReplacement(i),e);if(!this._isValid||!this.inlineCompletion.range.getStartPosition().equals(this._getUpdatedRange(i).getStartPosition())||t.lineNumber!==n.range.startLineNumber)return!1;const s=e.getValueInRange(n.range,1),r=n.text,a=Math.max(0,t.column-n.range.startColumn);let l=r.substring(0,a),c=r.substring(a),u=s.substring(0,a),f=s.substring(a);const g=e.getLineIndentColumn(n.range.startLineNumber);return n.range.startColumn<=g&&(u=u.trimStart(),u.length===0&&(f=f.trimStart()),l=l.trimStart(),l.length===0&&(c=c.trimStart())),l.startsWith(u)&&!!soe(f,c)}canBeReused(e,t){return this._isValid&&this._getUpdatedRange(void 0).containsPosition(t)&&this.isVisible(e,t,void 0)&&!this._isSmallerThanOriginal(void 0)}_toFilterTextReplacement(e){return new og(this._getUpdatedRange(e),this.inlineCompletion.filterText)}_isSmallerThanOriginal(e){return Wee(this._getUpdatedRange(e)).isBefore(Wee(this.inlineCompletion.range))}_getUpdatedRange(e){return this.rangeVersion.read(e),this._updatedRange}_updateRange(e){const t=e.getDecorationRange(this.decorationId);return t?this._updatedRange.equalsRange(t)?!1:(this._updatedRange=t,!0):(this._isValid=!1,!0)}}function Wee(o){return o.startLineNumber===o.endLineNumber?new Z(1,1+o.endColumn-o.startColumn):new Z(1+o.endLineNumber-o.startLineNumber,o.endColumn)}const Vt={Visible:vU,HasFocusedSuggestion:new Be("suggestWidgetHasFocusedSuggestion",!1,v("suggestWidgetHasSelection","Whether any suggestion is focused")),DetailsVisible:new Be("suggestWidgetDetailsVisible",!1,v("suggestWidgetDetailsVisible","Whether suggestion details are visible")),MultipleSuggestions:new Be("suggestWidgetMultipleSuggestions",!1,v("suggestWidgetMultipleSuggestions","Whether there are multiple suggestions to pick from")),MakesTextEdit:new Be("suggestionMakesTextEdit",!0,v("suggestionMakesTextEdit","Whether inserting the current suggestion yields in a change or has everything already been typed")),AcceptSuggestionsOnEnter:new Be("acceptSuggestionOnEnter",!0,v("acceptSuggestionOnEnter","Whether suggestions are inserted when pressing Enter")),HasInsertAndReplaceRange:new Be("suggestionHasInsertAndReplaceRange",!1,v("suggestionHasInsertAndReplaceRange","Whether the current suggestion has insert and replace behaviour")),InsertMode:new Be("suggestionInsertMode",void 0,{type:"string",description:v("suggestionInsertMode","Whether the default behaviour is to insert or replace")}),CanResolve:new Be("suggestionCanResolve",!1,v("suggestionCanResolve","Whether the current suggestion supports to resolve further details"))},im=new P("suggestWidgetStatusBar");class TWe{constructor(e,t,i,n){var s;this.position=e,this.completion=t,this.container=i,this.provider=n,this.isInvalid=!1,this.score=Hd.Default,this.distance=0,this.textLabel=typeof t.label=="string"?t.label:(s=t.label)===null||s===void 0?void 0:s.label,this.labelLow=this.textLabel.toLowerCase(),this.isInvalid=!this.textLabel,this.sortTextLow=t.sortText&&t.sortText.toLowerCase(),this.filterTextLow=t.filterText&&t.filterText.toLowerCase(),this.extensionId=t.extensionId,A.isIRange(t.range)?(this.editStart=new Z(t.range.startLineNumber,t.range.startColumn),this.editInsertEnd=new Z(t.range.endLineNumber,t.range.endColumn),this.editReplaceEnd=new Z(t.range.endLineNumber,t.range.endColumn),this.isInvalid=this.isInvalid||A.spansMultipleLines(t.range)||t.range.startLineNumber!==e.lineNumber):(this.editStart=new Z(t.range.insert.startLineNumber,t.range.insert.startColumn),this.editInsertEnd=new Z(t.range.insert.endLineNumber,t.range.insert.endColumn),this.editReplaceEnd=new Z(t.range.replace.endLineNumber,t.range.replace.endColumn),this.isInvalid=this.isInvalid||A.spansMultipleLines(t.range.insert)||A.spansMultipleLines(t.range.replace)||t.range.insert.startLineNumber!==e.lineNumber||t.range.replace.startLineNumber!==e.lineNumber||t.range.insert.startColumn!==t.range.replace.startColumn),typeof n.resolveCompletionItem!="function"&&(this._resolveCache=Promise.resolve(),this._resolveDuration=0)}get isResolved(){return this._resolveDuration!==void 0}get resolveDuration(){return this._resolveDuration!==void 0?this._resolveDuration:-1}async resolve(e){if(!this._resolveCache){const t=e.onCancellationRequested(()=>{this._resolveCache=void 0,this._resolveDuration=void 0}),i=new Ao(!0);this._resolveCache=Promise.resolve(this.provider.resolveCompletionItem(this.completion,e)).then(n=>{Object.assign(this.completion,n),this._resolveDuration=i.elapsed()},n=>{eu(n)&&(this._resolveCache=void 0,this._resolveDuration=void 0)}).finally(()=>{t.dispose()})}return this._resolveCache}}class fD{constructor(e=2,t=new Set,i=new Set,n=new Map,s=!0){this.snippetSortOrder=e,this.kindFilter=t,this.providerFilter=i,this.providerItemsToReuse=n,this.showDeprecated=s}}fD.default=new fD;let NWe;function RWe(){return NWe}class MWe{constructor(e,t,i,n){this.items=e,this.needsClipboard=t,this.durations=i,this.disposable=n}}async function xU(o,e,t,i=fD.default,n={triggerKind:0},s=Yt.None){const r=new Ao;t=t.clone();const a=e.getWordAtPosition(t),l=a?new A(t.lineNumber,a.startColumn,t.lineNumber,a.endColumn):A.fromPositions(t),c={replace:l,insert:l.setEndPosition(t.lineNumber,t.column)},u=[],f=new he,g=[];let p=!1;const _=(y,S,L)=>{var x,D,E;let N=!1;if(!S)return N;for(const M of S.suggestions)if(!i.kindFilter.has(M.kind)){if(!i.showDeprecated&&(!((x=M==null?void 0:M.tags)===null||x===void 0)&&x.includes(1)))continue;M.range||(M.range=c),M.sortText||(M.sortText=typeof M.label=="string"?M.label:M.label.label),!p&&M.insertTextRules&&M.insertTextRules&4&&(p=Uv.guessNeedsClipboard(M.insertText)),u.push(new TWe(t,M,S,y)),N=!0}return IV(S)&&f.add(S),g.push({providerName:(D=y._debugDisplayName)!==null&&D!==void 0?D:"unknown_provider",elapsedProvider:(E=S.duration)!==null&&E!==void 0?E:-1,elapsedOverall:L.elapsed()}),N},b=(async()=>{})();for(const y of o.orderedGroups(e)){let S=!1;if(await Promise.all(y.map(async L=>{if(i.providerItemsToReuse.has(L)){const x=i.providerItemsToReuse.get(L);x.forEach(D=>u.push(D)),S=S||x.length>0;return}if(!(i.providerFilter.size>0&&!i.providerFilter.has(L)))try{const x=new Ao,D=await L.provideCompletionItems(e,t,n,s);S=_(L,D,x)||S}catch(x){hs(x)}})),S||s.isCancellationRequested)break}return await b,s.isCancellationRequested?(f.dispose(),Promise.reject(new hg)):new MWe(u.sort(OWe(i.snippetSortOrder)),p,{entries:g,elapsed:r.elapsed()},f)}function DU(o,e){if(o.sortTextLow&&e.sortTextLow){if(o.sortTextLow<e.sortTextLow)return-1;if(o.sortTextLow>e.sortTextLow)return 1}return o.textLabel<e.textLabel?-1:o.textLabel>e.textLabel?1:o.completion.kind-e.completion.kind}function AWe(o,e){if(o.completion.kind!==e.completion.kind){if(o.completion.kind===27)return-1;if(e.completion.kind===27)return 1}return DU(o,e)}function PWe(o,e){if(o.completion.kind!==e.completion.kind){if(o.completion.kind===27)return 1;if(e.completion.kind===27)return-1}return DU(o,e)}const eO=new Map;eO.set(0,AWe);eO.set(2,PWe);eO.set(1,DU);function OWe(o){return eO.get(o)}si.registerCommand("_executeCompletionItemProvider",async(o,...e)=>{const[t,i,n,s]=e;wi(gt.isUri(t)),wi(Z.isIPosition(i)),wi(typeof n=="string"||!n),wi(typeof s=="number"||!s);const{completionProvider:r}=o.get(Ze),a=await o.get(Ca).createModelReference(t);try{const l={incomplete:!1,suggestions:[]},c=[],u=a.object.textEditorModel.validatePosition(i),f=await xU(r,a.object.textEditorModel,u,void 0,{triggerCharacter:n??void 0,triggerKind:n?1:0});for(const g of f.items)c.length<(s??0)&&c.push(g.resolve(Yt.None)),l.incomplete=l.incomplete||g.container.incomplete,l.suggestions.push(g.completion);try{return await Promise.all(c),l}finally{setTimeout(()=>f.disposable.dispose(),100)}}finally{a.dispose()}});function FWe(o,e){var t;(t=o.getContribution("editor.contrib.suggestController"))===null||t===void 0||t.triggerSuggest(new Set().add(e),void 0,!0)}class vC{static isAllOff(e){return e.other==="off"&&e.comments==="off"&&e.strings==="off"}static isAllOn(e){return e.other==="on"&&e.comments==="on"&&e.strings==="on"}static valueFor(e,t){switch(t){case 1:return e.comments;case 2:return e.strings;default:return e.other}}}function Vee(o,e=Mo){return pIe(o,e)?o.charAt(0).toUpperCase()+o.slice(1):o}var BWe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},WWe=function(o,e){return function(t,i){e(t,i,o)}};class Hee{constructor(e){this._delegates=e}resolve(e){for(const t of this._delegates){const i=t.resolve(e);if(i!==void 0)return i}}}class zee{constructor(e,t,i,n){this._model=e,this._selection=t,this._selectionIdx=i,this._overtypingCapturer=n}resolve(e){const{name:t}=e;if(t==="SELECTION"||t==="TM_SELECTED_TEXT"){let i=this._model.getValueInRange(this._selection)||void 0,n=this._selection.startLineNumber!==this._selection.endLineNumber;if(!i&&this._overtypingCapturer){const s=this._overtypingCapturer.getLastOvertypedInfo(this._selectionIdx);s&&(i=s.value,n=s.multiline)}if(i&&n&&e.snippet){const s=this._model.getLineContent(this._selection.startLineNumber),r=an(s,0,this._selection.startColumn-1);let a=r;e.snippet.walk(c=>c===e?!1:(c instanceof Ar&&(a=an(Sh(c.value).pop())),!0));const l=am(a,r);i=i.replace(/(\r\n|\r|\n)(.*)/g,(c,u,f)=>`${u}${a.substr(l)}${f}`)}return i}else{if(t==="TM_CURRENT_LINE")return this._model.getLineContent(this._selection.positionLineNumber);if(t==="TM_CURRENT_WORD"){const i=this._model.getWordAtPosition({lineNumber:this._selection.positionLineNumber,column:this._selection.positionColumn});return i&&i.word||void 0}else{if(t==="TM_LINE_INDEX")return String(this._selection.positionLineNumber-1);if(t==="TM_LINE_NUMBER")return String(this._selection.positionLineNumber);if(t==="CURSOR_INDEX")return String(this._selectionIdx);if(t==="CURSOR_NUMBER")return String(this._selectionIdx+1)}}}}class Uee{constructor(e,t){this._labelService=e,this._model=t}resolve(e){const{name:t}=e;if(t==="TM_FILENAME")return jp(this._model.uri.fsPath);if(t==="TM_FILENAME_BASE"){const i=jp(this._model.uri.fsPath),n=i.lastIndexOf(".");return n<=0?i:i.slice(0,n)}else{if(t==="TM_DIRECTORY")return nie(this._model.uri.fsPath)==="."?"":this._labelService.getUriLabel(GA(this._model.uri));if(t==="TM_FILEPATH")return this._labelService.getUriLabel(this._model.uri);if(t==="RELATIVE_FILEPATH")return this._labelService.getUriLabel(this._model.uri,{relative:!0,noPrefix:!0})}}}class $ee{constructor(e,t,i,n){this._readClipboardText=e,this._selectionIdx=t,this._selectionCount=i,this._spread=n}resolve(e){if(e.name!=="CLIPBOARD")return;const t=this._readClipboardText();if(t){if(this._spread){const i=t.split(/\r\n|\n|\r/).filter(n=>!die(n));if(i.length===this._selectionCount)return i[this._selectionIdx]}return t}}}let ZM=class{constructor(e,t,i){this._model=e,this._selection=t,this._languageConfigurationService=i}resolve(e){const{name:t}=e,i=this._model.getLanguageIdAtPosition(this._selection.selectionStartLineNumber,this._selection.selectionStartColumn),n=this._languageConfigurationService.getLanguageConfiguration(i).comments;if(n){if(t==="LINE_COMMENT")return n.lineCommentToken||void 0;if(t==="BLOCK_COMMENT_START")return n.blockCommentStartToken||void 0;if(t==="BLOCK_COMMENT_END")return n.blockCommentEndToken||void 0}}};ZM=BWe([WWe(2,dn)],ZM);class Pd{constructor(){this._date=new Date}resolve(e){const{name:t}=e;if(t==="CURRENT_YEAR")return String(this._date.getFullYear());if(t==="CURRENT_YEAR_SHORT")return String(this._date.getFullYear()).slice(-2);if(t==="CURRENT_MONTH")return String(this._date.getMonth().valueOf()+1).padStart(2,"0");if(t==="CURRENT_DATE")return String(this._date.getDate().valueOf()).padStart(2,"0");if(t==="CURRENT_HOUR")return String(this._date.getHours().valueOf()).padStart(2,"0");if(t==="CURRENT_MINUTE")return String(this._date.getMinutes().valueOf()).padStart(2,"0");if(t==="CURRENT_SECOND")return String(this._date.getSeconds().valueOf()).padStart(2,"0");if(t==="CURRENT_DAY_NAME")return Pd.dayNames[this._date.getDay()];if(t==="CURRENT_DAY_NAME_SHORT")return Pd.dayNamesShort[this._date.getDay()];if(t==="CURRENT_MONTH_NAME")return Pd.monthNames[this._date.getMonth()];if(t==="CURRENT_MONTH_NAME_SHORT")return Pd.monthNamesShort[this._date.getMonth()];if(t==="CURRENT_SECONDS_UNIX")return String(Math.floor(this._date.getTime()/1e3));if(t==="CURRENT_TIMEZONE_OFFSET"){const i=this._date.getTimezoneOffset(),n=i>0?"-":"+",s=Math.trunc(Math.abs(i/60)),r=s<10?"0"+s:s,a=Math.abs(i)-s*60,l=a<10?"0"+a:a;return n+r+":"+l}}}Pd.dayNames=[v("Sunday","Sunday"),v("Monday","Monday"),v("Tuesday","Tuesday"),v("Wednesday","Wednesday"),v("Thursday","Thursday"),v("Friday","Friday"),v("Saturday","Saturday")];Pd.dayNamesShort=[v("SundayShort","Sun"),v("MondayShort","Mon"),v("TuesdayShort","Tue"),v("WednesdayShort","Wed"),v("ThursdayShort","Thu"),v("FridayShort","Fri"),v("SaturdayShort","Sat")];Pd.monthNames=[v("January","January"),v("February","February"),v("March","March"),v("April","April"),v("May","May"),v("June","June"),v("July","July"),v("August","August"),v("September","September"),v("October","October"),v("November","November"),v("December","December")];Pd.monthNamesShort=[v("JanuaryShort","Jan"),v("FebruaryShort","Feb"),v("MarchShort","Mar"),v("AprilShort","Apr"),v("MayShort","May"),v("JuneShort","Jun"),v("JulyShort","Jul"),v("AugustShort","Aug"),v("SeptemberShort","Sep"),v("OctoberShort","Oct"),v("NovemberShort","Nov"),v("DecemberShort","Dec")];class jee{constructor(e){this._workspaceService=e}resolve(e){if(!this._workspaceService)return;const t=NMe(this._workspaceService.getWorkspace());if(!IMe(t)){if(e.name==="WORKSPACE_NAME")return this._resolveWorkspaceName(t);if(e.name==="WORKSPACE_FOLDER")return this._resoveWorkspacePath(t)}}_resolveWorkspaceName(e){if(p8(e))return jp(e.uri.path);let t=jp(e.configPath.path);return t.endsWith(m8)&&(t=t.substr(0,t.length-m8.length-1)),t}_resoveWorkspacePath(e){if(p8(e))return Vee(e.uri.fsPath);const t=jp(e.configPath.path);let i=e.configPath.fsPath;return i.endsWith(t)&&(i=i.substr(0,i.length-t.length-1)),i?Vee(i):"/"}}class Kee{resolve(e){const{name:t}=e;if(t==="RANDOM")return Math.random().toString().slice(-6);if(t==="RANDOM_HEX")return Math.random().toString(16).slice(-6);if(t==="UUID")return OP()}}var VWe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},HWe=function(o,e){return function(t,i){e(t,i,o)}},vd;class Zl{constructor(e,t,i){this._editor=e,this._snippet=t,this._snippetLineLeadingWhitespace=i,this._offset=-1,this._nestingLevel=1,this._placeholderGroups=sY(t.placeholders,Ql.compareByIndex),this._placeholderGroupsIdx=-1}initialize(e){this._offset=e.newPosition}dispose(){this._placeholderDecorations&&this._editor.removeDecorations([...this._placeholderDecorations.values()]),this._placeholderGroups.length=0}_initDecorations(){if(this._offset===-1)throw new Error("Snippet not initialized!");if(this._placeholderDecorations)return;this._placeholderDecorations=new Map;const e=this._editor.getModel();this._editor.changeDecorations(t=>{for(const i of this._snippet.placeholders){const n=this._snippet.offset(i),s=this._snippet.fullLen(i),r=A.fromPositions(e.getPositionAt(this._offset+n),e.getPositionAt(this._offset+n+s)),a=i.isFinalTabstop?Zl._decor.inactiveFinal:Zl._decor.inactive,l=t.addDecoration(r,a);this._placeholderDecorations.set(i,l)}})}move(e){if(!this._editor.hasModel())return[];if(this._initDecorations(),this._placeholderGroupsIdx>=0){const n=[];for(const s of this._placeholderGroups[this._placeholderGroupsIdx])if(s.transform){const r=this._placeholderDecorations.get(s),a=this._editor.getModel().getDecorationRange(r),l=this._editor.getModel().getValueInRange(a),c=s.transform.resolve(l).split(/\r\n|\r|\n/);for(let u=1;u<c.length;u++)c[u]=this._editor.getModel().normalizeIndentation(this._snippetLineLeadingWhitespace+c[u]);n.push(On.replace(a,c.join(this._editor.getModel().getEOL())))}n.length>0&&this._editor.executeEdits("snippet.placeholderTransform",n)}let t=!1;e===!0&&this._placeholderGroupsIdx<this._placeholderGroups.length-1?(this._placeholderGroupsIdx+=1,t=!0):e===!1&&this._placeholderGroupsIdx>0&&(this._placeholderGroupsIdx-=1,t=!0);const i=this._editor.getModel().changeDecorations(n=>{const s=new Set,r=[];for(const a of this._placeholderGroups[this._placeholderGroupsIdx]){const l=this._placeholderDecorations.get(a),c=this._editor.getModel().getDecorationRange(l);r.push(new Xe(c.startLineNumber,c.startColumn,c.endLineNumber,c.endColumn)),t=t&&this._hasPlaceholderBeenCollapsed(a),n.changeDecorationOptions(l,a.isFinalTabstop?Zl._decor.activeFinal:Zl._decor.active),s.add(a);for(const u of this._snippet.enclosingPlaceholders(a)){const f=this._placeholderDecorations.get(u);n.changeDecorationOptions(f,u.isFinalTabstop?Zl._decor.activeFinal:Zl._decor.active),s.add(u)}}for(const[a,l]of this._placeholderDecorations)s.has(a)||n.changeDecorationOptions(l,a.isFinalTabstop?Zl._decor.inactiveFinal:Zl._decor.inactive);return r});return t?this.move(e):i??[]}_hasPlaceholderBeenCollapsed(e){let t=e;for(;t;){if(t instanceof Ql){const i=this._placeholderDecorations.get(t);if(this._editor.getModel().getDecorationRange(i).isEmpty()&&t.toString().length>0)return!0}t=t.parent}return!1}get isAtFirstPlaceholder(){return this._placeholderGroupsIdx<=0||this._placeholderGroups.length===0}get isAtLastPlaceholder(){return this._placeholderGroupsIdx===this._placeholderGroups.length-1}get hasPlaceholder(){return this._snippet.placeholders.length>0}get isTrivialSnippet(){if(this._snippet.placeholders.length===0)return!0;if(this._snippet.placeholders.length===1){const[e]=this._snippet.placeholders;if(e.isFinalTabstop&&this._snippet.rightMostDescendant===e)return!0}return!1}computePossibleSelections(){const e=new Map;for(const t of this._placeholderGroups){let i;for(const n of t){if(n.isFinalTabstop)break;i||(i=[],e.set(n.index,i));const s=this._placeholderDecorations.get(n),r=this._editor.getModel().getDecorationRange(s);if(!r){e.delete(n.index);break}i.push(r)}}return e}get activeChoice(){if(!this._placeholderDecorations)return;const e=this._placeholderGroups[this._placeholderGroupsIdx][0];if(!(e!=null&&e.choice))return;const t=this._placeholderDecorations.get(e);if(!t)return;const i=this._editor.getModel().getDecorationRange(t);if(i)return{range:i,choice:e.choice}}get hasChoice(){let e=!1;return this._snippet.walk(t=>(e=t instanceof cw,!e)),e}merge(e){const t=this._editor.getModel();this._nestingLevel*=10,this._editor.changeDecorations(i=>{for(const n of this._placeholderGroups[this._placeholderGroupsIdx]){const s=e.shift();console.assert(s._offset!==-1),console.assert(!s._placeholderDecorations);const r=s._snippet.placeholderInfo.last.index;for(const l of s._snippet.placeholderInfo.all)l.isFinalTabstop?l.index=n.index+(r+1)/this._nestingLevel:l.index=n.index+l.index/this._nestingLevel;this._snippet.replace(n,s._snippet.children);const a=this._placeholderDecorations.get(n);i.removeDecoration(a),this._placeholderDecorations.delete(n);for(const l of s._snippet.placeholders){const c=s._snippet.offset(l),u=s._snippet.fullLen(l),f=A.fromPositions(t.getPositionAt(s._offset+c),t.getPositionAt(s._offset+c+u)),g=i.addDecoration(f,Zl._decor.inactive);this._placeholderDecorations.set(l,g)}}this._placeholderGroups=sY(this._snippet.placeholders,Ql.compareByIndex)})}}Zl._decor={active:Rt.register({description:"snippet-placeholder-1",stickiness:0,className:"snippet-placeholder"}),inactive:Rt.register({description:"snippet-placeholder-2",stickiness:1,className:"snippet-placeholder"}),activeFinal:Rt.register({description:"snippet-placeholder-3",stickiness:1,className:"finish-snippet-placeholder"}),inactiveFinal:Rt.register({description:"snippet-placeholder-4",stickiness:1,className:"finish-snippet-placeholder"})};const qee={overwriteBefore:0,overwriteAfter:0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0};let QM=vd=class{static adjustWhitespace(e,t,i,n,s){const r=e.getLineContent(t.lineNumber),a=an(r,0,t.column-1);let l;return n.walk(c=>{if(!(c instanceof Ar)||c.parent instanceof cw||s&&!s.has(c))return!0;const u=c.value.split(/\r\n|\r|\n/);if(i){const g=n.offset(c);if(g===0)u[0]=e.normalizeIndentation(u[0]);else{l=l??n.toString();const p=l.charCodeAt(g-1);(p===10||p===13)&&(u[0]=e.normalizeIndentation(a+u[0]))}for(let p=1;p<u.length;p++)u[p]=e.normalizeIndentation(a+u[p])}const f=u.join(e.getEOL());return f!==c.value&&(c.parent.replace(c,[new Ar(f)]),l=void 0),!0}),a}static adjustSelection(e,t,i,n){if(i!==0||n!==0){const{positionLineNumber:s,positionColumn:r}=t,a=r-i,l=r+n,c=e.validateRange({startLineNumber:s,startColumn:a,endLineNumber:s,endColumn:l});t=Xe.createWithDirection(c.startLineNumber,c.startColumn,c.endLineNumber,c.endColumn,t.getDirection())}return t}static createEditsAndSnippetsFromSelections(e,t,i,n,s,r,a,l,c){const u=[],f=[];if(!e.hasModel())return{edits:u,snippets:f};const g=e.getModel(),p=e.invokeWithinContext(D=>D.get(Fv)),_=e.invokeWithinContext(D=>new Uee(D.get(C1),g)),b=()=>a,y=g.getValueInRange(vd.adjustSelection(g,e.getSelection(),i,0)),S=g.getValueInRange(vd.adjustSelection(g,e.getSelection(),0,n)),L=g.getLineFirstNonWhitespaceColumn(e.getSelection().positionLineNumber),x=e.getSelections().map((D,E)=>({selection:D,idx:E})).sort((D,E)=>A.compareRangesUsingStarts(D.selection,E.selection));for(const{selection:D,idx:E}of x){let N=vd.adjustSelection(g,D,i,0),M=vd.adjustSelection(g,D,0,n);y!==g.getValueInRange(N)&&(N=D),S!==g.getValueInRange(M)&&(M=D);const F=D.setStartPosition(N.startLineNumber,N.startColumn).setEndPosition(M.endLineNumber,M.endColumn),H=new Uv().parse(t,!0,s),Q=F.getStartPosition(),K=vd.adjustWhitespace(g,Q,r||E>0&&L!==g.getLineFirstNonWhitespaceColumn(D.positionLineNumber),H);H.resolveVariables(new Hee([_,new $ee(b,E,x.length,e.getOption(79)==="spread"),new zee(g,D,E,l),new ZM(g,D,c),new Pd,new jee(p),new Kee])),u[E]=On.replace(F,H.toString()),u[E].identifier={major:E,minor:0},u[E]._isTracked=!0,f[E]=new Zl(e,H,K)}return{edits:u,snippets:f}}static createEditsAndSnippetsFromEdits(e,t,i,n,s,r,a){if(!e.hasModel()||t.length===0)return{edits:[],snippets:[]};const l=[],c=e.getModel(),u=new Uv,f=new fk,g=new Hee([e.invokeWithinContext(_=>new Uee(_.get(C1),c)),new $ee(()=>s,0,e.getSelections().length,e.getOption(79)==="spread"),new zee(c,e.getSelection(),0,r),new ZM(c,e.getSelection(),a),new Pd,new jee(e.invokeWithinContext(_=>_.get(Fv))),new Kee]);t=t.sort((_,b)=>A.compareRangesUsingStarts(_.range,b.range));let p=0;for(let _=0;_<t.length;_++){const{range:b,template:y}=t[_];if(_>0){const E=t[_-1].range,N=A.fromPositions(E.getEndPosition(),b.getStartPosition()),M=new Ar(c.getValueInRange(N));f.appendChild(M),p+=M.value.length}const S=u.parseFragment(y,f);vd.adjustWhitespace(c,b.getStartPosition(),!0,f,new Set(S)),f.resolveVariables(g);const L=f.toString(),x=L.slice(p);p=L.length;const D=On.replace(b,x);D.identifier={major:_,minor:0},D._isTracked=!0,l.push(D)}return u.ensureFinalTabstop(f,i,!0),{edits:l,snippets:[new Zl(e,f,"")]}}constructor(e,t,i=qee,n){this._editor=e,this._template=t,this._options=i,this._languageConfigurationService=n,this._templateMerges=[],this._snippets=[]}dispose(){cn(this._snippets)}_logInfo(){return`template="${this._template}", merged_templates="${this._templateMerges.join(" -> ")}"`}insert(){if(!this._editor.hasModel())return;const{edits:e,snippets:t}=typeof this._template=="string"?vd.createEditsAndSnippetsFromSelections(this._editor,this._template,this._options.overwriteBefore,this._options.overwriteAfter,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer,this._languageConfigurationService):vd.createEditsAndSnippetsFromEdits(this._editor,this._template,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer,this._languageConfigurationService);this._snippets=t,this._editor.executeEdits("snippet",e,i=>{const n=i.filter(s=>!!s.identifier);for(let s=0;s<t.length;s++)t[s].initialize(n[s].textChange);return this._snippets[0].hasPlaceholder?this._move(!0):n.map(s=>Xe.fromPositions(s.range.getEndPosition()))}),this._editor.revealRange(this._editor.getSelections()[0])}merge(e,t=qee){if(!this._editor.hasModel())return;this._templateMerges.push([this._snippets[0]._nestingLevel,this._snippets[0]._placeholderGroupsIdx,e]);const{edits:i,snippets:n}=vd.createEditsAndSnippetsFromSelections(this._editor,e,t.overwriteBefore,t.overwriteAfter,!0,t.adjustWhitespace,t.clipboardText,t.overtypingCapturer,this._languageConfigurationService);this._editor.executeEdits("snippet",i,s=>{const r=s.filter(l=>!!l.identifier);for(let l=0;l<n.length;l++)n[l].initialize(r[l].textChange);const a=n[0].isTrivialSnippet;if(!a){for(const l of this._snippets)l.merge(n);console.assert(n.length===0)}return this._snippets[0].hasPlaceholder&&!a?this._move(void 0):r.map(l=>Xe.fromPositions(l.range.getEndPosition()))})}next(){const e=this._move(!0);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}prev(){const e=this._move(!1);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}_move(e){const t=[];for(const i of this._snippets){const n=i.move(e);t.push(...n)}return t}get isAtFirstPlaceholder(){return this._snippets[0].isAtFirstPlaceholder}get isAtLastPlaceholder(){return this._snippets[0].isAtLastPlaceholder}get hasPlaceholder(){return this._snippets[0].hasPlaceholder}get hasChoice(){return this._snippets[0].hasChoice}get activeChoice(){return this._snippets[0].activeChoice}isSelectionWithinPlaceholders(){if(!this.hasPlaceholder)return!1;const e=this._editor.getSelections();if(e.length<this._snippets.length)return!1;const t=new Map;for(const i of this._snippets){const n=i.computePossibleSelections();if(t.size===0)for(const[s,r]of n){r.sort(A.compareRangesUsingStarts);for(const a of e)if(r[0].containsRange(a)){t.set(s,[]);break}}if(t.size===0)return!1;t.forEach((s,r)=>{s.push(...n.get(r))})}e.sort(A.compareRangesUsingStarts);for(const[i,n]of t){if(n.length!==e.length){t.delete(i);continue}n.sort(A.compareRangesUsingStarts);for(let s=0;s<n.length;s++)if(!n[s].containsRange(e[s])){t.delete(i);continue}}return t.size>0}};QM=vd=VWe([HWe(3,dn)],QM);var zWe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},eN=function(o,e){return function(t,i){e(t,i,o)}},j0;const Gee={overwriteBefore:0,overwriteAfter:0,undoStopBefore:!0,undoStopAfter:!0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0};let bo=j0=class{static get(e){return e.getContribution(j0.ID)}constructor(e,t,i,n,s){this._editor=e,this._logService=t,this._languageFeaturesService=i,this._languageConfigurationService=s,this._snippetListener=new he,this._modelVersionId=-1,this._inSnippet=j0.InSnippetMode.bindTo(n),this._hasNextTabstop=j0.HasNextTabstop.bindTo(n),this._hasPrevTabstop=j0.HasPrevTabstop.bindTo(n)}dispose(){var e;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),(e=this._session)===null||e===void 0||e.dispose(),this._snippetListener.dispose()}insert(e,t){try{this._doInsert(e,typeof t>"u"?Gee:{...Gee,...t})}catch(i){this.cancel(),this._logService.error(i),this._logService.error("snippet_error"),this._logService.error("insert_template=",e),this._logService.error("existing_template=",this._session?this._session._logInfo():"<no_session>")}}_doInsert(e,t){var i;if(this._editor.hasModel()){if(this._snippetListener.clear(),t.undoStopBefore&&this._editor.getModel().pushStackElement(),this._session&&typeof e!="string"&&this.cancel(),this._session?(wi(typeof e=="string"),this._session.merge(e,t)):(this._modelVersionId=this._editor.getModel().getAlternativeVersionId(),this._session=new QM(this._editor,e,t,this._languageConfigurationService),this._session.insert()),t.undoStopAfter&&this._editor.getModel().pushStackElement(),!((i=this._session)===null||i===void 0)&&i.hasChoice){const n={_debugDisplayName:"snippetChoiceCompletions",provideCompletionItems:(u,f)=>{if(!this._session||u!==this._editor.getModel()||!Z.equals(this._editor.getPosition(),f))return;const{activeChoice:g}=this._session;if(!g||g.choice.options.length===0)return;const p=u.getValueInRange(g.range),_=!!g.choice.options.find(y=>y.value===p),b=[];for(let y=0;y<g.choice.options.length;y++){const S=g.choice.options[y];b.push({kind:13,label:S.value,insertText:S.value,sortText:"a".repeat(y+1),range:g.range,filterText:_?`${p}_${S.value}`:void 0,command:{id:"jumpToNextSnippetPlaceholder",title:v("next","Go to next placeholder...")}})}return{suggestions:b}}},s=this._editor.getModel();let r,a=!1;const l=()=>{r==null||r.dispose(),a=!1},c=()=>{a||(r=this._languageFeaturesService.completionProvider.register({language:s.getLanguageId(),pattern:s.uri.fsPath,scheme:s.uri.scheme,exclusive:!0},n),this._snippetListener.add(r),a=!0)};this._choiceCompletions={provider:n,enable:c,disable:l}}this._updateState(),this._snippetListener.add(this._editor.onDidChangeModelContent(n=>n.isFlush&&this.cancel())),this._snippetListener.add(this._editor.onDidChangeModel(()=>this.cancel())),this._snippetListener.add(this._editor.onDidChangeCursorSelection(()=>this._updateState()))}}_updateState(){if(!(!this._session||!this._editor.hasModel())){if(this._modelVersionId===this._editor.getModel().getAlternativeVersionId())return this.cancel();if(!this._session.hasPlaceholder)return this.cancel();if(this._session.isAtLastPlaceholder||!this._session.isSelectionWithinPlaceholders())return this._editor.getModel().pushStackElement(),this.cancel();this._inSnippet.set(!0),this._hasPrevTabstop.set(!this._session.isAtFirstPlaceholder),this._hasNextTabstop.set(!this._session.isAtLastPlaceholder),this._handleChoice()}}_handleChoice(){var e;if(!this._session||!this._editor.hasModel()){this._currentChoice=void 0;return}const{activeChoice:t}=this._session;if(!t||!this._choiceCompletions){(e=this._choiceCompletions)===null||e===void 0||e.disable(),this._currentChoice=void 0;return}this._currentChoice!==t.choice&&(this._currentChoice=t.choice,this._choiceCompletions.enable(),queueMicrotask(()=>{FWe(this._editor,this._choiceCompletions.provider)}))}finish(){for(;this._inSnippet.get();)this.next()}cancel(e=!1){var t;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),this._snippetListener.clear(),this._currentChoice=void 0,(t=this._session)===null||t===void 0||t.dispose(),this._session=void 0,this._modelVersionId=-1,e&&this._editor.setSelections([this._editor.getSelection()])}prev(){var e;(e=this._session)===null||e===void 0||e.prev(),this._updateState()}next(){var e;(e=this._session)===null||e===void 0||e.next(),this._updateState()}isInSnippet(){return!!this._inSnippet.get()}};bo.ID="snippetController2";bo.InSnippetMode=new Be("inSnippetMode",!1,v("inSnippetMode","Whether the editor in current in snippet mode"));bo.HasNextTabstop=new Be("hasNextTabstop",!1,v("hasNextTabstop","Whether there is a next tab stop when in snippet mode"));bo.HasPrevTabstop=new Be("hasPrevTabstop",!1,v("hasPrevTabstop","Whether there is a previous tab stop when in snippet mode"));bo=j0=zWe([eN(1,mr),eN(2,Ze),eN(3,bt),eN(4,dn)],bo);pi(bo.ID,bo,4);const tO=zs.bindToContribution(bo.get);Me(new tO({id:"jumpToNextSnippetPlaceholder",precondition:ue.and(bo.InSnippetMode,bo.HasNextTabstop),handler:o=>o.next(),kbOpts:{weight:130,kbExpr:W.editorTextFocus,primary:2}}));Me(new tO({id:"jumpToPrevSnippetPlaceholder",precondition:ue.and(bo.InSnippetMode,bo.HasPrevTabstop),handler:o=>o.prev(),kbOpts:{weight:130,kbExpr:W.editorTextFocus,primary:1026}}));Me(new tO({id:"leaveSnippet",precondition:bo.InSnippetMode,handler:o=>o.cancel(!0),kbOpts:{weight:130,kbExpr:W.editorTextFocus,primary:9,secondary:[1033]}}));Me(new tO({id:"acceptSnippet",precondition:bo.InSnippetMode,handler:o=>o.finish()}));var UWe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},kB=function(o,e){return function(t,i){e(t,i,o)}},ul;(function(o){o[o.Undo=0]="Undo",o[o.Redo=1]="Redo",o[o.AcceptWord=2]="AcceptWord",o[o.Other=3]="Other"})(ul||(ul={}));let S6=class extends J{get isAcceptingPartially(){return this._isAcceptingPartially}constructor(e,t,i,n,s,r,a,l,c,u,f,g){super(),this.textModel=e,this.selectedSuggestItem=t,this.textModelVersionId=i,this._positions=n,this._debounceValue=s,this._suggestPreviewEnabled=r,this._suggestPreviewMode=a,this._inlineSuggestMode=l,this._enabled=c,this._instantiationService=u,this._commandService=f,this._languageConfigurationService=g,this._source=this._register(this._instantiationService.createInstance(y6,this.textModel,this.textModelVersionId,this._debounceValue)),this._isActive=ni(this,!1),this._forceUpdateSignal=dP("forceUpdate"),this._selectedInlineCompletionId=ni(this,void 0),this._primaryPosition=Dt(this,_=>{var b;return(b=this._positions.read(_)[0])!==null&&b!==void 0?b:new Z(1,1)}),this._isAcceptingPartially=!1,this._preserveCurrentCompletionReasons=new Set([ul.Redo,ul.Undo,ul.AcceptWord]),this._fetchInlineCompletions=fAe({owner:this,createEmptyChangeSummary:()=>({preserveCurrentCompletion:!1,inlineCompletionTriggerKind:jf.Automatic}),handleChange:(_,b)=>(_.didChange(this.textModelVersionId)&&this._preserveCurrentCompletionReasons.has(_.change)?b.preserveCurrentCompletion=!0:_.didChange(this._forceUpdateSignal)&&(b.inlineCompletionTriggerKind=_.change),!0)},(_,b)=>{if(this._forceUpdateSignal.read(_),!(this._enabled.read(_)&&this.selectedSuggestItem.read(_)||this._isActive.read(_))){this._source.cancelUpdate();return}this.textModelVersionId.read(_);const S=this.selectedInlineCompletion.get(),L=b.preserveCurrentCompletion||S!=null&&S.forwardStable?S:void 0,x=this._source.suggestWidgetInlineCompletions.get(),D=this.selectedSuggestItem.read(_);if(x&&!D){const M=this._source.inlineCompletions.get();qi(F=>{(!M||x.request.versionId>M.request.versionId)&&this._source.inlineCompletions.set(x.clone(),F),this._source.clearSuggestWidgetInlineCompletions(F)})}const E=this._primaryPosition.read(_),N={triggerKind:b.inlineCompletionTriggerKind,selectedSuggestionInfo:D==null?void 0:D.toSelectedSuggestionInfo()};return this._source.fetch(E,N,L)}),this._filteredInlineCompletionItems=Dt(this,_=>{const b=this._source.inlineCompletions.read(_);if(!b)return[];const y=this._primaryPosition.read(_);return b.inlineCompletions.filter(L=>L.isVisible(this.textModel,y,_))}),this.selectedInlineCompletionIndex=Dt(this,_=>{const b=this._selectedInlineCompletionId.read(_),y=this._filteredInlineCompletionItems.read(_),S=this._selectedInlineCompletionId===void 0?-1:y.findIndex(L=>L.semanticId===b);return S===-1?(this._selectedInlineCompletionId.set(void 0,void 0),0):S}),this.selectedInlineCompletion=Dt(this,_=>{const b=this._filteredInlineCompletionItems.read(_),y=this.selectedInlineCompletionIndex.read(_);return b[y]}),this.lastTriggerKind=this._source.inlineCompletions.map(this,_=>_==null?void 0:_.request.context.triggerKind),this.inlineCompletionsCount=Dt(this,_=>{if(this.lastTriggerKind.read(_)===jf.Explicit)return this._filteredInlineCompletionItems.read(_).length}),this.state=VC({owner:this,equalityComparer:(_,b)=>!_||!b?_===b:Iee(_.ghostTexts,b.ghostTexts)&&_.inlineCompletion===b.inlineCompletion&&_.suggestItem===b.suggestItem},_=>{var b,y;const S=this.textModel,L=this.selectedSuggestItem.read(_);if(L){const x=Lv(L.toSingleTextEdit(),S),D=this._computeAugmentation(x,_);if(!this._suggestPreviewEnabled.read(_)&&!D)return;const N=(b=D==null?void 0:D.edit)!==null&&b!==void 0?b:x,M=D?D.edit.text.length-x.text.length:0,F=this._suggestPreviewMode.read(_),H=this._positions.read(_),Q=[N,...EB(this.textModel,H,N)],K=Q.map((q,se)=>Aee(q,S,F,H[se],M)).filter(sh),j=(y=K[0])!==null&&y!==void 0?y:new hD(N.range.endLineNumber,[]);return{edits:Q,primaryGhostText:j,ghostTexts:K,inlineCompletion:D==null?void 0:D.completion,suggestItem:L}}else{if(!this._isActive.read(_))return;const x=this.selectedInlineCompletion.read(_);if(!x)return;const D=x.toSingleTextEdit(_),E=this._inlineSuggestMode.read(_),N=this._positions.read(_),M=[D,...EB(this.textModel,N,D)],F=M.map((H,Q)=>Aee(H,S,E,N[Q],0)).filter(sh);return F[0]?{edits:M,primaryGhostText:F[0],ghostTexts:F,inlineCompletion:x,suggestItem:void 0}:void 0}}),this.ghostTexts=VC({owner:this,equalityComparer:Iee},_=>{const b=this.state.read(_);if(b)return b.ghostTexts}),this.primaryGhostText=VC({owner:this,equalityComparer:Vle},_=>{const b=this.state.read(_);if(b)return b==null?void 0:b.primaryGhostText}),this._register(sk(this._fetchInlineCompletions));let p;this._register(zt(_=>{var b,y;const S=this.state.read(_),L=S==null?void 0:S.inlineCompletion;if((L==null?void 0:L.semanticId)!==(p==null?void 0:p.semanticId)&&(p=L,L)){const x=L.inlineCompletion,D=x.source;(y=(b=D.provider).handleItemDidShow)===null||y===void 0||y.call(b,D.inlineCompletions,x.sourceInlineCompletion,x.insertText)}}))}async trigger(e){this._isActive.set(!0,e),await this._fetchInlineCompletions.get()}async triggerExplicitly(e){Fx(e,t=>{this._isActive.set(!0,t),this._forceUpdateSignal.trigger(t,jf.Explicit)}),await this._fetchInlineCompletions.get()}stop(e){Fx(e,t=>{this._isActive.set(!1,t),this._source.clear(t)})}_computeAugmentation(e,t){const i=this.textModel,n=this._source.suggestWidgetInlineCompletions.read(t),s=n?n.inlineCompletions:[this.selectedInlineCompletion.read(t)].filter(sh);return nSe(s,a=>{let l=a.toSingleTextEdit(t);return l=Lv(l,i,A.fromPositions(l.range.getStartPosition(),e.range.getEndPosition())),$le(l,e)?{completion:a,edit:l}:void 0})}async _deltaSelectedInlineCompletionIndex(e){await this.triggerExplicitly();const t=this._filteredInlineCompletionItems.get()||[];if(t.length>0){const i=(this.selectedInlineCompletionIndex.get()+e+t.length)%t.length;this._selectedInlineCompletionId.set(t[i].semanticId,void 0)}else this._selectedInlineCompletionId.set(void 0,void 0)}async next(){await this._deltaSelectedInlineCompletionIndex(1)}async previous(){await this._deltaSelectedInlineCompletionIndex(-1)}async accept(e){var t;if(e.getModel()!==this.textModel)throw new pn;const i=this.state.get();if(!i||i.primaryGhostText.isEmpty()||!i.inlineCompletion)return;const n=i.inlineCompletion.toInlineCompletion(void 0);if(e.pushUndoStop(),n.snippetInfo)e.executeEdits("inlineSuggestion.accept",[On.replaceMove(n.range,""),...n.additionalTextEdits]),e.setPosition(n.snippetInfo.range.getStartPosition(),"inlineCompletionAccept"),(t=bo.get(e))===null||t===void 0||t.insert(n.snippetInfo.snippet,{undoStopBefore:!1});else{const s=i.edits,r=Yee(s).map(a=>Xe.fromPositions(a));e.executeEdits("inlineSuggestion.accept",[...s.map(a=>On.replaceMove(a.range,a.text)),...n.additionalTextEdits]),e.setSelections(r,"inlineCompletionAccept")}n.command&&n.source.addRef(),qi(s=>{this._source.clear(s),this._isActive.set(!1,s)}),n.command&&(await this._commandService.executeCommand(n.command.id,...n.command.arguments||[]).then(void 0,hs),n.source.removeRef())}async acceptNextWord(e){await this._acceptNext(e,(t,i)=>{const n=this.textModel.getLanguageIdAtPosition(t.lineNumber,t.column),s=this._languageConfigurationService.getLanguageConfiguration(n),r=new RegExp(s.wordDefinition.source,s.wordDefinition.flags.replace("g","")),a=i.match(r);let l=0;a&&a.index!==void 0?a.index===0?l=a[0].length:l=a.index:l=i.length;const u=/\s+/g.exec(i);return u&&u.index!==void 0&&u.index+u[0].length<l&&(l=u.index+u[0].length),l},0)}async acceptNextLine(e){await this._acceptNext(e,(t,i)=>{const n=i.match(/\n/);return n&&n.index!==void 0?n.index+1:i.length},1)}async _acceptNext(e,t,i){if(e.getModel()!==this.textModel)throw new pn;const n=this.state.get();if(!n||n.primaryGhostText.isEmpty()||!n.inlineCompletion)return;const s=n.primaryGhostText,r=n.inlineCompletion.toInlineCompletion(void 0);if(r.snippetInfo||r.filterText!==r.insertText){await this.accept(e);return}const a=s.parts[0],l=new Z(s.lineNumber,a.column),c=a.text,u=t(l,c);if(u===c.length&&s.parts.length===1){this.accept(e);return}const f=c.substring(0,u),g=this._positions.get(),p=g[0];r.source.addRef();try{this._isAcceptingPartially=!0;try{e.pushUndoStop();const _=A.fromPositions(p,l),b=e.getModel().getValueInRange(_)+f,y=new og(_,b),S=[y,...EB(this.textModel,g,y)],L=Yee(S).map(x=>Xe.fromPositions(x));e.executeEdits("inlineSuggestion.accept",S.map(x=>On.replaceMove(x.range,x.text))),e.setSelections(L,"inlineCompletionPartialAccept")}finally{this._isAcceptingPartially=!1}if(r.source.provider.handlePartialAccept){const _=A.fromPositions(r.range.getStartPosition(),Gc.ofText(f).addToPosition(l)),b=e.getModel().getValueInRange(_,1);r.source.provider.handlePartialAccept(r.source.inlineCompletions,r.sourceInlineCompletion,b.length,{kind:i})}}finally{r.source.removeRef()}}handleSuggestAccepted(e){var t,i;const n=Lv(e.toSingleTextEdit(),this.textModel),s=this._computeAugmentation(n,void 0);if(!s)return;const r=s.completion.inlineCompletion;(i=(t=r.source.provider).handlePartialAccept)===null||i===void 0||i.call(t,r.source.inlineCompletions,r.sourceInlineCompletion,n.text.length,{kind:2})}};S6=UWe([kB(9,ct),kB(10,Un),kB(11,dn)],S6);function EB(o,e,t){if(e.length===1)return[];const i=e[0],n=e.slice(1),s=t.range.getStartPosition(),r=t.range.getEndPosition(),a=o.getValueInRange(A.fromPositions(i,r)),l=Tee(i,s);if(l.lineNumber<1)return Nt(new pn(`positionWithinTextEdit line number should be bigger than 0.
			Invalid subtraction between ${i.toString()} and ${s.toString()}`)),[];const c=$We(t.text,l);return n.map(u=>{const f=hWe(Tee(u,s),r),g=o.getValueInRange(A.fromPositions(u,f)),p=am(a,g),_=A.fromPositions(u,u.delta(0,p));return new og(_,c)})}function $We(o,e){let t="";const i=NCe(o);for(let n=e.lineNumber-1;n<i.length;n++)t+=i[n].substring(n===e.lineNumber-1?e.column-1:0);return t}function Yee(o){const e=tR.createSortPermutation(o,(s,r)=>A.compareRangesUsingStarts(s.range,r.range)),i=new zz(e.apply(o)).getNewRanges();return e.inverse().apply(i).map(s=>s.getEndPosition())}var jWe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Zee=function(o,e){return function(t,i){e(t,i,o)}},aL;class kU{constructor(e){this.name=e}select(e,t,i){if(i.length===0)return 0;const n=i[0].score[0];for(let s=0;s<i.length;s++){const{score:r,completion:a}=i[s];if(r[0]!==n)break;if(a.preselect)return s}return 0}}class jle extends kU{constructor(){super("first")}memorize(e,t,i){}toJSON(){}fromJSON(){}}class KWe extends kU{constructor(){super("recentlyUsed"),this._cache=new Dh(300,.66),this._seq=0}memorize(e,t,i){const n=`${e.getLanguageId()}/${i.textLabel}`;this._cache.set(n,{touch:this._seq++,type:i.completion.kind,insertText:i.completion.insertText})}select(e,t,i){if(i.length===0)return 0;const n=e.getLineContent(t.lineNumber).substr(t.column-10,t.column-1);if(/\s$/.test(n))return super.select(e,t,i);const s=i[0].score[0];let r=-1,a=-1,l=-1;for(let c=0;c<i.length&&i[c].score[0]===s;c++){const u=`${e.getLanguageId()}/${i[c].textLabel}`,f=this._cache.peek(u);if(f&&f.touch>l&&f.type===i[c].completion.kind&&f.insertText===i[c].completion.insertText&&(l=f.touch,a=c),i[c].completion.preselect&&r===-1)return r=c}return a!==-1?a:r!==-1?r:0}toJSON(){return this._cache.toJSON()}fromJSON(e){this._cache.clear();const t=0;for(const[i,n]of e)n.touch=t,n.type=typeof n.type=="number"?n.type:QL.fromString(n.type),this._cache.set(i,n);this._seq=this._cache.size}}class qWe extends kU{constructor(){super("recentlyUsedByPrefix"),this._trie=WC.forStrings(),this._seq=0}memorize(e,t,i){const{word:n}=e.getWordUntilPosition(t),s=`${e.getLanguageId()}/${n}`;this._trie.set(s,{type:i.completion.kind,insertText:i.completion.insertText,touch:this._seq++})}select(e,t,i){const{word:n}=e.getWordUntilPosition(t);if(!n)return super.select(e,t,i);const s=`${e.getLanguageId()}/${n}`;let r=this._trie.get(s);if(r||(r=this._trie.findSubstr(s)),r)for(let a=0;a<i.length;a++){const{kind:l,insertText:c}=i[a].completion;if(l===r.type&&c===r.insertText)return a}return super.select(e,t,i)}toJSON(){const e=[];return this._trie.forEach((t,i)=>e.push([i,t])),e.sort((t,i)=>-(t[1].touch-i[1].touch)).forEach((t,i)=>t[1].touch=i),e.slice(0,200)}fromJSON(e){if(this._trie.clear(),e.length>0){this._seq=e[0][1].touch+1;for(const[t,i]of e)i.type=typeof i.type=="number"?i.type:QL.fromString(i.type),this._trie.set(t,i)}}}let gD=aL=class{constructor(e,t){this._storageService=e,this._configService=t,this._disposables=new he,this._persistSoon=new Ui(()=>this._saveState(),500),this._disposables.add(e.onWillSaveState(i=>{i.reason===Vx.SHUTDOWN&&this._saveState()}))}dispose(){this._disposables.dispose(),this._persistSoon.dispose()}memorize(e,t,i){this._withStrategy(e,t).memorize(e,t,i),this._persistSoon.schedule()}select(e,t,i){return this._withStrategy(e,t).select(e,t,i)}_withStrategy(e,t){var i;const n=this._configService.getValue("editor.suggestSelection",{overrideIdentifier:e.getLanguageIdAtPosition(t.lineNumber,t.column),resource:e.uri});if(((i=this._strategy)===null||i===void 0?void 0:i.name)!==n){this._saveState();const s=aL._strategyCtors.get(n)||jle;this._strategy=new s;try{const a=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,l=this._storageService.get(`${aL._storagePrefix}/${n}`,a);l&&this._strategy.fromJSON(JSON.parse(l))}catch{}}return this._strategy}_saveState(){if(this._strategy){const t=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,i=JSON.stringify(this._strategy);this._storageService.store(`${aL._storagePrefix}/${this._strategy.name}`,i,t,1)}}};gD._strategyCtors=new Map([["recentlyUsedByPrefix",qWe],["recentlyUsed",KWe],["first",jle]]);gD._storagePrefix="suggest/memories";gD=aL=jWe([Zee(0,Qc),Zee(1,$t)],gD);const iO=Zt("ISuggestMemories");oi(iO,gD,1);var GWe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},YWe=function(o,e){return function(t,i){e(t,i,o)}},L6;let pD=L6=class{constructor(e,t){this._editor=e,this._enabled=!1,this._ckAtEnd=L6.AtEnd.bindTo(t),this._configListener=this._editor.onDidChangeConfiguration(i=>i.hasChanged(123)&&this._update()),this._update()}dispose(){var e;this._configListener.dispose(),(e=this._selectionListener)===null||e===void 0||e.dispose(),this._ckAtEnd.reset()}_update(){const e=this._editor.getOption(123)==="on";if(this._enabled!==e)if(this._enabled=e,this._enabled){const t=()=>{if(!this._editor.hasModel()){this._ckAtEnd.set(!1);return}const i=this._editor.getModel(),n=this._editor.getSelection(),s=i.getWordAtPosition(n.getStartPosition());if(!s){this._ckAtEnd.set(!1);return}this._ckAtEnd.set(s.endColumn===n.getStartPosition().column)};this._selectionListener=this._editor.onDidChangeCursorSelection(t),t()}else this._selectionListener&&(this._ckAtEnd.reset(),this._selectionListener.dispose(),this._selectionListener=void 0)}};pD.AtEnd=new Be("atEndOfWord",!1);pD=L6=GWe([YWe(1,bt)],pD);var ZWe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},QWe=function(o,e){return function(t,i){e(t,i,o)}},lL;let Xv=lL=class{constructor(e,t){this._editor=e,this._index=0,this._ckOtherSuggestions=lL.OtherSuggestions.bindTo(t)}dispose(){this.reset()}reset(){var e;this._ckOtherSuggestions.reset(),(e=this._listener)===null||e===void 0||e.dispose(),this._model=void 0,this._acceptNext=void 0,this._ignore=!1}set({model:e,index:t},i){if(e.items.length===0){this.reset();return}if(lL._moveIndex(!0,e,t)===t){this.reset();return}this._acceptNext=i,this._model=e,this._index=t,this._listener=this._editor.onDidChangeCursorPosition(()=>{this._ignore||this.reset()}),this._ckOtherSuggestions.set(!0)}static _moveIndex(e,t,i){let n=i;for(let s=t.items.length;s>0&&(n=(n+t.items.length+(e?1:-1))%t.items.length,!(n===i||!t.items[n].completion.additionalTextEdits));s--);return n}next(){this._move(!0)}prev(){this._move(!1)}_move(e){if(this._model)try{this._ignore=!0,this._index=lL._moveIndex(e,this._model,this._index),this._acceptNext({index:this._index,item:this._model.items[this._index],model:this._model})}finally{this._ignore=!1}}};Xv.OtherSuggestions=new Be("hasOtherSuggestions",!1);Xv=lL=ZWe([QWe(1,bt)],Xv);class XWe{constructor(e,t,i,n){this._disposables=new he,this._disposables.add(i.onDidSuggest(s=>{s.completionModel.items.length===0&&this.reset()})),this._disposables.add(i.onDidCancel(s=>{this.reset()})),this._disposables.add(t.onDidShow(()=>this._onItem(t.getFocusedItem()))),this._disposables.add(t.onDidFocus(this._onItem,this)),this._disposables.add(t.onDidHide(this.reset,this)),this._disposables.add(e.onWillType(s=>{if(this._active&&!t.isFrozen()&&i.state!==0){const r=s.charCodeAt(s.length-1);this._active.acceptCharacters.has(r)&&e.getOption(0)&&n(this._active.item)}}))}_onItem(e){if(!e||!Yo(e.item.completion.commitCharacters)){this.reset();return}if(this._active&&this._active.item.item===e.item)return;const t=new LR;for(const i of e.item.completion.commitCharacters)i.length>0&&t.add(i.charCodeAt(0));this._active={acceptCharacters:t,item:e}}reset(){this._active=void 0}dispose(){this._disposables.dispose()}}class hl{async provideSelectionRanges(e,t){const i=[];for(const n of t){const s=[];i.push(s);const r=new Map;await new Promise(a=>hl._bracketsRightYield(a,0,e,n,r)),await new Promise(a=>hl._bracketsLeftYield(a,0,e,n,r,s))}return i}static _bracketsRightYield(e,t,i,n,s){const r=new Map,a=Date.now();for(;;){if(t>=hl._maxRounds){e();break}if(!n){e();break}const l=i.bracketPairs.findNextBracket(n);if(!l){e();break}if(Date.now()-a>hl._maxDuration){setTimeout(()=>hl._bracketsRightYield(e,t+1,i,n,s));break}if(l.bracketInfo.isOpeningBracket){const u=l.bracketInfo.bracketText,f=r.has(u)?r.get(u):0;r.set(u,f+1)}else{const u=l.bracketInfo.getOpeningBrackets()[0].bracketText;let f=r.has(u)?r.get(u):0;if(f-=1,r.set(u,Math.max(0,f)),f<0){let g=s.get(u);g||(g=new Wr,s.set(u,g)),g.push(l.range)}}n=l.range.getEndPosition()}}static _bracketsLeftYield(e,t,i,n,s,r){const a=new Map,l=Date.now();for(;;){if(t>=hl._maxRounds&&s.size===0){e();break}if(!n){e();break}const c=i.bracketPairs.findPrevBracket(n);if(!c){e();break}if(Date.now()-l>hl._maxDuration){setTimeout(()=>hl._bracketsLeftYield(e,t+1,i,n,s,r));break}if(c.bracketInfo.isOpeningBracket){const f=c.bracketInfo.bracketText;let g=a.has(f)?a.get(f):0;if(g-=1,a.set(f,Math.max(0,g)),g<0){const p=s.get(f);if(p){const _=p.shift();p.size===0&&s.delete(f);const b=A.fromPositions(c.range.getEndPosition(),_.getStartPosition()),y=A.fromPositions(c.range.getStartPosition(),_.getEndPosition());r.push({range:b}),r.push({range:y}),hl._addBracketLeading(i,y,r)}}}else{const f=c.bracketInfo.getOpeningBrackets()[0].bracketText,g=a.has(f)?a.get(f):0;a.set(f,g+1)}n=c.range.getStartPosition()}}static _addBracketLeading(e,t,i){if(t.startLineNumber===t.endLineNumber)return;const n=t.startLineNumber,s=e.getLineFirstNonWhitespaceColumn(n);s!==0&&s!==t.startColumn&&(i.push({range:A.fromPositions(new Z(n,s),t.getEndPosition())}),i.push({range:A.fromPositions(new Z(n,1),t.getEndPosition())}));const r=n-1;if(r>0){const a=e.getLineFirstNonWhitespaceColumn(r);a===t.startColumn&&a!==e.getLineLastNonWhitespaceColumn(r)&&(i.push({range:A.fromPositions(new Z(r,a),t.getEndPosition())}),i.push({range:A.fromPositions(new Z(r,1),t.getEndPosition())}))}}}hl._maxDuration=30;hl._maxRounds=2;class Id{static async create(e,t){if(!t.getOption(118).localityBonus||!t.hasModel())return Id.None;const i=t.getModel(),n=t.getPosition();if(!e.canComputeWordRanges(i.uri))return Id.None;const[s]=await new hl().provideSelectionRanges(i,[n]);if(s.length===0)return Id.None;const r=await e.computeWordRanges(i.uri,s[0].range);if(!r)return Id.None;const a=i.getWordUntilPosition(n);return delete r[a.word],new class extends Id{distance(l,c){if(!n.equals(t.getPosition()))return 0;if(c.kind===17)return 2<<20;const u=typeof c.label=="string"?c.label:c.label.label,f=r[u];if(Rte(f))return 2<<20;const g=KL(f,A.fromPositions(l),A.compareRangesUsingStarts),p=g>=0?f[g]:f[Math.max(0,~g-1)];let _=s.length;for(const b of s){if(!A.containsRange(b.range,p))break;_-=1}return _}}}}Id.None=new class extends Id{distance(){return 0}};let Qee=class{constructor(e,t){this.leadingLineContent=e,this.characterCountDelta=t}};class wp{constructor(e,t,i,n,s,r,a=eP.default,l=void 0){this.clipboardText=l,this._snippetCompareFn=wp._compareCompletionItems,this._items=e,this._column=t,this._wordDistance=n,this._options=s,this._refilterKind=1,this._lineContext=i,this._fuzzyScoreOptions=a,r==="top"?this._snippetCompareFn=wp._compareCompletionItemsSnippetsUp:r==="bottom"&&(this._snippetCompareFn=wp._compareCompletionItemsSnippetsDown)}get lineContext(){return this._lineContext}set lineContext(e){(this._lineContext.leadingLineContent!==e.leadingLineContent||this._lineContext.characterCountDelta!==e.characterCountDelta)&&(this._refilterKind=this._lineContext.characterCountDelta<e.characterCountDelta&&this._filteredItems?2:1,this._lineContext=e)}get items(){return this._ensureCachedState(),this._filteredItems}getItemsByProvider(){return this._ensureCachedState(),this._itemsByProvider}getIncompleteProvider(){this._ensureCachedState();const e=new Set;for(const[t,i]of this.getItemsByProvider())i.length>0&&i[0].container.incomplete&&e.add(t);return e}get stats(){return this._ensureCachedState(),this._stats}_ensureCachedState(){this._refilterKind!==0&&this._createCachedState()}_createCachedState(){this._itemsByProvider=new Map;const e=[],{leadingLineContent:t,characterCountDelta:i}=this._lineContext;let n="",s="";const r=this._refilterKind===1?this._items:this._filteredItems,a=[],l=!this._options.filterGraceful||r.length>2e3?Ov:bRe;for(let c=0;c<r.length;c++){const u=r[c];if(u.isInvalid)continue;const f=this._itemsByProvider.get(u.provider);f?f.push(u):this._itemsByProvider.set(u.provider,[u]);const g=u.position.column-u.editStart.column,p=g+i-(u.position.column-this._column);if(n.length!==p&&(n=p===0?"":t.slice(-p),s=n.toLowerCase()),u.word=n,p===0)u.score=Hd.Default;else{let _=0;for(;_<g;){const b=n.charCodeAt(_);if(b===32||b===9)_+=1;else break}if(_>=p)u.score=Hd.Default;else if(typeof u.completion.filterText=="string"){const b=l(n,s,_,u.completion.filterText,u.filterTextLow,0,this._fuzzyScoreOptions);if(!b)continue;G7(u.completion.filterText,u.textLabel)===0?u.score=b:(u.score=pRe(n,s,_,u.textLabel,u.labelLow,0),u.score[0]=b[0])}else{const b=l(n,s,_,u.textLabel,u.labelLow,0,this._fuzzyScoreOptions);if(!b)continue;u.score=b}}u.idx=c,u.distance=this._wordDistance.distance(u.position,u.completion),a.push(u),e.push(u.textLabel.length)}this._filteredItems=a.sort(this._snippetCompareFn),this._refilterKind=0,this._stats={pLabelLen:e.length?KB(e.length-.85,e,(c,u)=>c-u):0}}static _compareCompletionItems(e,t){return e.score[0]>t.score[0]?-1:e.score[0]<t.score[0]?1:e.distance<t.distance?-1:e.distance>t.distance?1:e.idx<t.idx?-1:e.idx>t.idx?1:0}static _compareCompletionItemsSnippetsDown(e,t){if(e.completion.kind!==t.completion.kind){if(e.completion.kind===27)return 1;if(t.completion.kind===27)return-1}return wp._compareCompletionItems(e,t)}static _compareCompletionItemsSnippetsUp(e,t){if(e.completion.kind!==t.completion.kind){if(e.completion.kind===27)return-1;if(t.completion.kind===27)return 1}return wp._compareCompletionItems(e,t)}}var JWe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},ip=function(o,e){return function(t,i){e(t,i,o)}},x6;class O_{static shouldAutoTrigger(e){if(!e.hasModel())return!1;const t=e.getModel(),i=e.getPosition();t.tokenization.tokenizeIfCheap(i.lineNumber);const n=t.getWordAtPosition(i);return!(!n||n.endColumn!==i.column&&n.startColumn+1!==i.column||!isNaN(Number(n.word)))}constructor(e,t,i){this.leadingLineContent=e.getLineContent(t.lineNumber).substr(0,t.column-1),this.leadingWord=e.getWordUntilPosition(t),this.lineNumber=t.lineNumber,this.column=t.column,this.triggerOptions=i}}function e6e(o,e,t){if(!e.getContextKeyValue(lo.inlineSuggestionVisible.key))return!0;const i=e.getContextKeyValue(lo.suppressSuggestions.key);return i!==void 0?!i:!o.getOption(62).suppressSuggestions}function t6e(o,e,t){if(!e.getContextKeyValue("inlineSuggestionVisible"))return!0;const i=e.getContextKeyValue(lo.suppressSuggestions.key);return i!==void 0?!i:!o.getOption(62).suppressSuggestions}let XM=x6=class{constructor(e,t,i,n,s,r,a,l,c){this._editor=e,this._editorWorkerService=t,this._clipboardService=i,this._telemetryService=n,this._logService=s,this._contextKeyService=r,this._configurationService=a,this._languageFeaturesService=l,this._envService=c,this._toDispose=new he,this._triggerCharacterListener=new he,this._triggerQuickSuggest=new Yc,this._triggerState=void 0,this._completionDisposables=new he,this._onDidCancel=new Y,this._onDidTrigger=new Y,this._onDidSuggest=new Y,this.onDidCancel=this._onDidCancel.event,this.onDidTrigger=this._onDidTrigger.event,this.onDidSuggest=this._onDidSuggest.event,this._telemetryGate=0,this._currentSelection=this._editor.getSelection()||new Xe(1,1,1,1),this._toDispose.add(this._editor.onDidChangeModel(()=>{this._updateTriggerCharacters(),this.cancel()})),this._toDispose.add(this._editor.onDidChangeModelLanguage(()=>{this._updateTriggerCharacters(),this.cancel()})),this._toDispose.add(this._editor.onDidChangeConfiguration(()=>{this._updateTriggerCharacters()})),this._toDispose.add(this._languageFeaturesService.completionProvider.onDidChange(()=>{this._updateTriggerCharacters(),this._updateActiveSuggestSession()}));let u=!1;this._toDispose.add(this._editor.onDidCompositionStart(()=>{u=!0})),this._toDispose.add(this._editor.onDidCompositionEnd(()=>{u=!1,this._onCompositionEnd()})),this._toDispose.add(this._editor.onDidChangeCursorSelection(f=>{u||this._onCursorChange(f)})),this._toDispose.add(this._editor.onDidChangeModelContent(()=>{!u&&this._triggerState!==void 0&&this._refilterCompletionItems()})),this._updateTriggerCharacters()}dispose(){cn(this._triggerCharacterListener),cn([this._onDidCancel,this._onDidSuggest,this._onDidTrigger,this._triggerQuickSuggest]),this._toDispose.dispose(),this._completionDisposables.dispose(),this.cancel()}_updateTriggerCharacters(){if(this._triggerCharacterListener.clear(),this._editor.getOption(91)||!this._editor.hasModel()||!this._editor.getOption(121))return;const e=new Map;for(const i of this._languageFeaturesService.completionProvider.all(this._editor.getModel()))for(const n of i.triggerCharacters||[]){let s=e.get(n);s||(s=new Set,s.add(RWe()),e.set(n,s)),s.add(i)}const t=i=>{var n;if(!t6e(this._editor,this._contextKeyService,this._configurationService)||O_.shouldAutoTrigger(this._editor))return;if(!i){const a=this._editor.getPosition();i=this._editor.getModel().getLineContent(a.lineNumber).substr(0,a.column-1)}let s="";Ev(i.charCodeAt(i.length-1))?qs(i.charCodeAt(i.length-2))&&(s=i.substr(i.length-2)):s=i.charAt(i.length-1);const r=e.get(s);if(r){const a=new Map;if(this._completionModel)for(const[l,c]of this._completionModel.getItemsByProvider())r.has(l)||a.set(l,c);this.trigger({auto:!0,triggerKind:1,triggerCharacter:s,retrigger:!!this._completionModel,clipboardText:(n=this._completionModel)===null||n===void 0?void 0:n.clipboardText,completionOptions:{providerFilter:r,providerItemsToReuse:a}})}};this._triggerCharacterListener.add(this._editor.onDidType(t)),this._triggerCharacterListener.add(this._editor.onDidCompositionEnd(()=>t()))}get state(){return this._triggerState?this._triggerState.auto?2:1:0}cancel(e=!1){var t;this._triggerState!==void 0&&(this._triggerQuickSuggest.cancel(),(t=this._requestToken)===null||t===void 0||t.cancel(),this._requestToken=void 0,this._triggerState=void 0,this._completionModel=void 0,this._context=void 0,this._onDidCancel.fire({retrigger:e}))}clear(){this._completionDisposables.clear()}_updateActiveSuggestSession(){this._triggerState!==void 0&&(!this._editor.hasModel()||!this._languageFeaturesService.completionProvider.has(this._editor.getModel())?this.cancel():this.trigger({auto:this._triggerState.auto,retrigger:!0}))}_onCursorChange(e){if(!this._editor.hasModel())return;const t=this._currentSelection;if(this._currentSelection=this._editor.getSelection(),!e.selection.isEmpty()||e.reason!==0&&e.reason!==3||e.source!=="keyboard"&&e.source!=="deleteLeft"){this.cancel();return}this._triggerState===void 0&&e.reason===0?(t.containsRange(this._currentSelection)||t.getEndPosition().isBeforeOrEqual(this._currentSelection.getPosition()))&&this._doTriggerQuickSuggest():this._triggerState!==void 0&&e.reason===3&&this._refilterCompletionItems()}_onCompositionEnd(){this._triggerState===void 0?this._doTriggerQuickSuggest():this._refilterCompletionItems()}_doTriggerQuickSuggest(){var e;vC.isAllOff(this._editor.getOption(89))||this._editor.getOption(118).snippetsPreventQuickSuggestions&&(!((e=bo.get(this._editor))===null||e===void 0)&&e.isInSnippet())||(this.cancel(),this._triggerQuickSuggest.cancelAndSet(()=>{if(this._triggerState!==void 0||!O_.shouldAutoTrigger(this._editor)||!this._editor.hasModel()||!this._editor.hasWidgetFocus())return;const t=this._editor.getModel(),i=this._editor.getPosition(),n=this._editor.getOption(89);if(!vC.isAllOff(n)){if(!vC.isAllOn(n)){t.tokenization.tokenizeIfCheap(i.lineNumber);const s=t.tokenization.getLineTokens(i.lineNumber),r=s.getStandardTokenType(s.findTokenIndexAtOffset(Math.max(i.column-1-1,0)));if(vC.valueFor(n,r)!=="on")return}e6e(this._editor,this._contextKeyService,this._configurationService)&&this._languageFeaturesService.completionProvider.has(t)&&this.trigger({auto:!0})}},this._editor.getOption(90)))}_refilterCompletionItems(){wi(this._editor.hasModel()),wi(this._triggerState!==void 0);const e=this._editor.getModel(),t=this._editor.getPosition(),i=new O_(e,t,{...this._triggerState,refilter:!0});this._onNewContext(i)}trigger(e){var t,i,n,s,r,a;if(!this._editor.hasModel())return;const l=this._editor.getModel(),c=new O_(l,this._editor.getPosition(),e);this.cancel(e.retrigger),this._triggerState=e,this._onDidTrigger.fire({auto:e.auto,shy:(t=e.shy)!==null&&t!==void 0?t:!1,position:this._editor.getPosition()}),this._context=c;let u={triggerKind:(i=e.triggerKind)!==null&&i!==void 0?i:0};e.triggerCharacter&&(u={triggerKind:1,triggerCharacter:e.triggerCharacter}),this._requestToken=new os;const f=this._editor.getOption(112);let g=1;switch(f){case"top":g=0;break;case"bottom":g=2;break}const{itemKind:p,showDeprecated:_}=x6.createSuggestFilter(this._editor),b=new fD(g,(s=(n=e.completionOptions)===null||n===void 0?void 0:n.kindFilter)!==null&&s!==void 0?s:p,(r=e.completionOptions)===null||r===void 0?void 0:r.providerFilter,(a=e.completionOptions)===null||a===void 0?void 0:a.providerItemsToReuse,_),y=Id.create(this._editorWorkerService,this._editor),S=xU(this._languageFeaturesService.completionProvider,l,this._editor.getPosition(),b,u,this._requestToken.token);Promise.all([S,y]).then(async([L,x])=>{var D;if((D=this._requestToken)===null||D===void 0||D.dispose(),!this._editor.hasModel())return;let E=e==null?void 0:e.clipboardText;if(!E&&L.needsClipboard&&(E=await this._clipboardService.readText()),this._triggerState===void 0)return;const N=this._editor.getModel(),M=new O_(N,this._editor.getPosition(),e),F={...eP.default,firstMatchCanBeWeak:!this._editor.getOption(118).matchOnWordStartOnly};if(this._completionModel=new wp(L.items,this._context.column,{leadingLineContent:M.leadingLineContent,characterCountDelta:M.column-this._context.column},x,this._editor.getOption(118),this._editor.getOption(112),F,E),this._completionDisposables.add(L.disposable),this._onNewContext(M),this._reportDurationsTelemetry(L.durations),!this._envService.isBuilt||this._envService.isExtensionDevelopment)for(const H of L.items)H.isInvalid&&this._logService.warn(`[suggest] did IGNORE invalid completion item from ${H.provider._debugDisplayName}`,H.completion)}).catch(Nt)}_reportDurationsTelemetry(e){this._telemetryGate++%230===0&&setTimeout(()=>{this._telemetryService.publicLog2("suggest.durations.json",{data:JSON.stringify(e)}),this._logService.debug("suggest.durations.json",e)})}static createSuggestFilter(e){const t=new Set;e.getOption(112)==="none"&&t.add(27);const n=e.getOption(118);return n.showMethods||t.add(0),n.showFunctions||t.add(1),n.showConstructors||t.add(2),n.showFields||t.add(3),n.showVariables||t.add(4),n.showClasses||t.add(5),n.showStructs||t.add(6),n.showInterfaces||t.add(7),n.showModules||t.add(8),n.showProperties||t.add(9),n.showEvents||t.add(10),n.showOperators||t.add(11),n.showUnits||t.add(12),n.showValues||t.add(13),n.showConstants||t.add(14),n.showEnums||t.add(15),n.showEnumMembers||t.add(16),n.showKeywords||t.add(17),n.showWords||t.add(18),n.showColors||t.add(19),n.showFiles||t.add(20),n.showReferences||t.add(21),n.showColors||t.add(22),n.showFolders||t.add(23),n.showTypeParameters||t.add(24),n.showSnippets||t.add(27),n.showUsers||t.add(25),n.showIssues||t.add(26),{itemKind:t,showDeprecated:n.showDeprecated}}_onNewContext(e){if(this._context){if(e.lineNumber!==this._context.lineNumber){this.cancel();return}if(an(e.leadingLineContent)!==an(this._context.leadingLineContent)){this.cancel();return}if(e.column<this._context.column){e.leadingWord.word?this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0}):this.cancel();return}if(this._completionModel){if(e.leadingWord.word.length!==0&&e.leadingWord.startColumn>this._context.leadingWord.startColumn){if(O_.shouldAutoTrigger(this._editor)&&this._context){const i=this._completionModel.getItemsByProvider();this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0,clipboardText:this._completionModel.clipboardText,completionOptions:{providerItemsToReuse:i}})}return}if(e.column>this._context.column&&this._completionModel.getIncompleteProvider().size>0&&e.leadingWord.word.length!==0){const t=new Map,i=new Set;for(const[n,s]of this._completionModel.getItemsByProvider())s.length>0&&s[0].container.incomplete?i.add(n):t.set(n,s);this.trigger({auto:this._context.triggerOptions.auto,triggerKind:2,retrigger:!0,clipboardText:this._completionModel.clipboardText,completionOptions:{providerFilter:i,providerItemsToReuse:t}})}else{const t=this._completionModel.lineContext;let i=!1;if(this._completionModel.lineContext={leadingLineContent:e.leadingLineContent,characterCountDelta:e.column-this._context.column},this._completionModel.items.length===0){const n=O_.shouldAutoTrigger(this._editor);if(!this._context){this.cancel();return}if(n&&this._context.leadingWord.endColumn<e.leadingWord.startColumn){this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0});return}if(this._context.triggerOptions.auto){this.cancel();return}else if(this._completionModel.lineContext=t,i=this._completionModel.items.length>0,i&&e.leadingWord.word.length===0){this.cancel();return}}this._onDidSuggest.fire({completionModel:this._completionModel,triggerOptions:e.triggerOptions,isFrozen:i})}}}}};XM=x6=JWe([ip(1,Cc),ip(2,_g),ip(3,pr),ip(4,mr),ip(5,bt),ip(6,$t),ip(7,Ze),ip(8,GH)],XM);class nO{constructor(e,t){this._disposables=new he,this._lastOvertyped=[],this._locked=!1,this._disposables.add(e.onWillType(()=>{if(this._locked||!e.hasModel())return;const i=e.getSelections(),n=i.length;let s=!1;for(let a=0;a<n;a++)if(!i[a].isEmpty()){s=!0;break}if(!s){this._lastOvertyped.length!==0&&(this._lastOvertyped.length=0);return}this._lastOvertyped=[];const r=e.getModel();for(let a=0;a<n;a++){const l=i[a];if(r.getValueLengthInRange(l)>nO._maxSelectionLength)return;this._lastOvertyped[a]={value:r.getValueInRange(l),multiline:l.startLineNumber!==l.endLineNumber}}})),this._disposables.add(t.onDidTrigger(i=>{this._locked=!0})),this._disposables.add(t.onDidCancel(i=>{this._locked=!1}))}getLastOvertypedInfo(e){if(e>=0&&e<this._lastOvertyped.length)return this._lastOvertyped[e]}dispose(){this._disposables.dispose()}}nO._maxSelectionLength=51200;var i6e=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},IB=function(o,e){return function(t,i){e(t,i,o)}};let n6e=class Kle extends bm{updateLabel(){const e=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!e)return super.updateLabel();this.label&&(this.label.textContent=v({key:"content",comment:["A label","A keybinding"]},"{0} ({1})",this._action.label,Kle.symbolPrintEnter(e)))}static symbolPrintEnter(e){var t;return(t=e.getLabel())===null||t===void 0?void 0:t.replace(/\benter\b/gi,"")}},D6=class{constructor(e,t,i,n,s){this._menuId=t,this._menuService=n,this._contextKeyService=s,this._menuDisposables=new he,this.element=ge(e,ye(".suggest-status-bar"));const r=a=>a instanceof Dl?i.createInstance(n6e,a,void 0):void 0;this._leftActions=new pc(this.element,{actionViewItemProvider:r}),this._rightActions=new pc(this.element,{actionViewItemProvider:r}),this._leftActions.domNode.classList.add("left"),this._rightActions.domNode.classList.add("right")}dispose(){this._menuDisposables.dispose(),this._leftActions.dispose(),this._rightActions.dispose(),this.element.remove()}show(){const e=this._menuService.createMenu(this._menuId,this._contextKeyService),t=()=>{const i=[],n=[];for(const[s,r]of e.getActions())s==="left"?i.push(...r):n.push(...r);this._leftActions.clear(),this._leftActions.push(i),this._rightActions.clear(),this._rightActions.push(n)};this._menuDisposables.add(e.onDidChange(()=>t())),this._menuDisposables.add(e)}hide(){this._menuDisposables.clear()}};D6=i6e([IB(2,ct),IB(3,Nl),IB(4,bt)],D6);var s6e=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},o6e=function(o,e){return function(t,i){e(t,i,o)}};function EU(o){return!!o&&!!(o.completion.documentation||o.completion.detail&&o.completion.detail!==o.completion.label)}let k6=class{constructor(e,t){this._editor=e,this._onDidClose=new Y,this.onDidClose=this._onDidClose.event,this._onDidChangeContents=new Y,this.onDidChangeContents=this._onDidChangeContents.event,this._disposables=new he,this._renderDisposeable=new he,this._borderWidth=1,this._size=new yi(330,0),this.domNode=ye(".suggest-details"),this.domNode.classList.add("no-docs"),this._markdownRenderer=t.createInstance(mh,{editor:e}),this._body=ye(".body"),this._scrollbar=new KD(this._body,{alwaysConsumeMouseWheel:!0}),ge(this.domNode,this._scrollbar.getDomNode()),this._disposables.add(this._scrollbar),this._header=ge(this._body,ye(".header")),this._close=ge(this._header,ye("span"+pt.asCSSSelector(Ee.close))),this._close.title=v("details.close","Close"),this._type=ge(this._header,ye("p.type")),this._docs=ge(this._body,ye("p.docs")),this._configureFont(),this._disposables.add(this._editor.onDidChangeConfiguration(i=>{i.hasChanged(50)&&this._configureFont()}))}dispose(){this._disposables.dispose(),this._renderDisposeable.dispose()}_configureFont(){const e=this._editor.getOptions(),t=e.get(50),i=t.getMassagedFontFamily(),n=e.get(119)||t.fontSize,s=e.get(120)||t.lineHeight,r=t.fontWeight,a=`${n}px`,l=`${s}px`;this.domNode.style.fontSize=a,this.domNode.style.lineHeight=`${s/n}`,this.domNode.style.fontWeight=r,this.domNode.style.fontFeatureSettings=t.fontFeatureSettings,this._type.style.fontFamily=i,this._close.style.height=l,this._close.style.width=l}getLayoutInfo(){const e=this._editor.getOption(120)||this._editor.getOption(50).lineHeight,t=this._borderWidth,i=t*2;return{lineHeight:e,borderWidth:t,borderHeight:i,verticalPadding:22,horizontalPadding:14}}renderLoading(){this._type.textContent=v("loading","Loading..."),this._docs.textContent="",this.domNode.classList.remove("no-docs","no-type"),this.layout(this.size.width,this.getLayoutInfo().lineHeight*2),this._onDidChangeContents.fire(this)}renderItem(e,t){var i,n;this._renderDisposeable.clear();let{detail:s,documentation:r}=e.completion;if(t){let a="";a+=`score: ${e.score[0]}
`,a+=`prefix: ${(i=e.word)!==null&&i!==void 0?i:"(no prefix)"}
`,a+=`word: ${e.completion.filterText?e.completion.filterText+" (filterText)":e.textLabel}
`,a+=`distance: ${e.distance} (localityBonus-setting)
`,a+=`index: ${e.idx}, based on ${e.completion.sortText&&`sortText: "${e.completion.sortText}"`||"label"}
`,a+=`commit_chars: ${(n=e.completion.commitCharacters)===null||n===void 0?void 0:n.join("")}
`,r=new qo().appendCodeblock("empty",a),s=`Provider: ${e.provider._debugDisplayName}`}if(!t&&!EU(e)){this.clearContents();return}if(this.domNode.classList.remove("no-docs","no-type"),s){const a=s.length>1e5?`${s.substr(0,1e5)}`:s;this._type.textContent=a,this._type.title=a,Ba(this._type),this._type.classList.toggle("auto-wrap",!/\r?\n^\s+/gmi.test(a))}else Zo(this._type),this._type.title="",Rr(this._type),this.domNode.classList.add("no-type");if(Zo(this._docs),typeof r=="string")this._docs.classList.remove("markdown-docs"),this._docs.textContent=r;else if(r){this._docs.classList.add("markdown-docs"),Zo(this._docs);const a=this._markdownRenderer.render(r);this._docs.appendChild(a.element),this._renderDisposeable.add(a),this._renderDisposeable.add(this._markdownRenderer.onDidRenderAsync(()=>{this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}))}this.domNode.style.userSelect="text",this.domNode.tabIndex=-1,this._close.onmousedown=a=>{a.preventDefault(),a.stopPropagation()},this._close.onclick=a=>{a.preventDefault(),a.stopPropagation(),this._onDidClose.fire()},this._body.scrollTop=0,this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}clearContents(){this.domNode.classList.add("no-docs"),this._type.textContent="",this._docs.textContent=""}get isEmpty(){return this.domNode.classList.contains("no-docs")}get size(){return this._size}layout(e,t){const i=new yi(e,t);yi.equals(i,this._size)||(this._size=i,W1e(this.domNode,e,t)),this._scrollbar.scanDomNode()}scrollDown(e=8){this._body.scrollTop+=e}scrollUp(e=8){this._body.scrollTop-=e}scrollTop(){this._body.scrollTop=0}scrollBottom(){this._body.scrollTop=this._body.scrollHeight}pageDown(){this.scrollDown(80)}pageUp(){this.scrollUp(80)}set borderWidth(e){this._borderWidth=e}get borderWidth(){return this._borderWidth}};k6=s6e([o6e(1,ct)],k6);class r6e{constructor(e,t){this.widget=e,this._editor=t,this.allowEditorOverflow=!0,this._disposables=new he,this._added=!1,this._preferAlignAtTop=!0,this._resizable=new uU,this._resizable.domNode.classList.add("suggest-details-container"),this._resizable.domNode.appendChild(e.domNode),this._resizable.enableSashes(!1,!0,!0,!1);let i,n,s=0,r=0;this._disposables.add(this._resizable.onDidWillResize(()=>{i=this._topLeft,n=this._resizable.size})),this._disposables.add(this._resizable.onDidResize(a=>{if(i&&n){this.widget.layout(a.dimension.width,a.dimension.height);let l=!1;a.west&&(r=n.width-a.dimension.width,l=!0),a.north&&(s=n.height-a.dimension.height,l=!0),l&&this._applyTopLeft({top:i.top+s,left:i.left+r})}a.done&&(i=void 0,n=void 0,s=0,r=0,this._userSize=a.dimension)})),this._disposables.add(this.widget.onDidChangeContents(()=>{var a;this._anchorBox&&this._placeAtAnchor(this._anchorBox,(a=this._userSize)!==null&&a!==void 0?a:this.widget.size,this._preferAlignAtTop)}))}dispose(){this._resizable.dispose(),this._disposables.dispose(),this.hide()}getId(){return"suggest.details"}getDomNode(){return this._resizable.domNode}getPosition(){return this._topLeft?{preference:this._topLeft}:null}show(){this._added||(this._editor.addOverlayWidget(this),this._added=!0)}hide(e=!1){this._resizable.clearSashHoverState(),this._added&&(this._editor.removeOverlayWidget(this),this._added=!1,this._anchorBox=void 0,this._topLeft=void 0),e&&(this._userSize=void 0,this.widget.clearContents())}placeAtAnchor(e,t){var i;const n=e.getBoundingClientRect();this._anchorBox=n,this._preferAlignAtTop=t,this._placeAtAnchor(this._anchorBox,(i=this._userSize)!==null&&i!==void 0?i:this.widget.size,t)}_placeAtAnchor(e,t,i){var n;const s=um(this.getDomNode().ownerDocument.body),r=this.widget.getLayoutInfo(),a=new yi(220,2*r.lineHeight),l=e.top,c=function(){const N=s.width-(e.left+e.width+r.borderWidth+r.horizontalPadding),M=-r.borderWidth+e.left+e.width,F=new yi(N,s.height-e.top-r.borderHeight-r.verticalPadding),H=F.with(void 0,e.top+e.height-r.borderHeight-r.verticalPadding);return{top:l,left:M,fit:N-t.width,maxSizeTop:F,maxSizeBottom:H,minSize:a.with(Math.min(N,a.width))}}(),u=function(){const N=e.left-r.borderWidth-r.horizontalPadding,M=Math.max(r.horizontalPadding,e.left-t.width-r.borderWidth),F=new yi(N,s.height-e.top-r.borderHeight-r.verticalPadding),H=F.with(void 0,e.top+e.height-r.borderHeight-r.verticalPadding);return{top:l,left:M,fit:N-t.width,maxSizeTop:F,maxSizeBottom:H,minSize:a.with(Math.min(N,a.width))}}(),f=function(){const N=e.left,M=-r.borderWidth+e.top+e.height,F=new yi(e.width-r.borderHeight,s.height-e.top-e.height-r.verticalPadding);return{top:M,left:N,fit:F.height-t.height,maxSizeBottom:F,maxSizeTop:F,minSize:a.with(F.width)}}(),g=[c,u,f],p=(n=g.find(N=>N.fit>=0))!==null&&n!==void 0?n:g.sort((N,M)=>M.fit-N.fit)[0],_=e.top+e.height-r.borderHeight;let b,y=t.height;const S=Math.max(p.maxSizeTop.height,p.maxSizeBottom.height);y>S&&(y=S);let L;i?y<=p.maxSizeTop.height?(b=!0,L=p.maxSizeTop):(b=!1,L=p.maxSizeBottom):y<=p.maxSizeBottom.height?(b=!1,L=p.maxSizeBottom):(b=!0,L=p.maxSizeTop);let{top:x,left:D}=p;!b&&y>e.height&&(x=_-y);const E=this._editor.getDomNode();if(E){const N=E.getBoundingClientRect();x-=N.top,D-=N.left}this._applyTopLeft({left:D,top:x}),this._resizable.enableSashes(!b,p===c,b,p!==c),this._resizable.minSize=p.minSize,this._resizable.maxSize=L,this._resizable.layout(y,Math.min(L.width,t.width)),this.widget.layout(this._resizable.size.width,this._resizable.size.height)}_applyTopLeft(e){this._topLeft=e,this._editor.layoutOverlayWidget(this)}}var ih;(function(o){o[o.FILE=0]="FILE",o[o.FOLDER=1]="FOLDER",o[o.ROOT_FOLDER=2]="ROOT_FOLDER"})(ih||(ih={}));const a6e=/(?:\/|^)(?:([^\/]+)\/)?([^\/]+)$/;function tN(o,e,t,i,n){const s=i===ih.ROOT_FOLDER?["rootfolder-icon"]:i===ih.FOLDER?["folder-icon"]:["file-icon"];if(t){let r;if(t.scheme===Pt.data)r=mm.parseMetaData(t).get(mm.META_DATA_LABEL);else{const a=t.path.match(a6e);a?(r=iN(a[2].toLowerCase()),a[1]&&s.push(`${iN(a[1].toLowerCase())}-name-dir-icon`)):r=iN(t.authority.toLowerCase())}if(i===ih.ROOT_FOLDER)s.push(`${r}-root-name-folder-icon`);else if(i===ih.FOLDER)s.push(`${r}-name-folder-icon`);else{if(r){if(s.push(`${r}-name-file-icon`),s.push("name-file-icon"),r.length<=255){const l=r.split(".");for(let c=1;c<l.length;c++)s.push(`${l.slice(c).join(".")}-ext-file-icon`)}s.push("ext-file-icon")}const a=l6e(o,e,t);a&&s.push(`${iN(a)}-lang-file-icon`)}}return s}function l6e(o,e,t){if(!t)return null;let i=null;if(t.scheme===Pt.data){const s=mm.parseMetaData(t).get(mm.META_DATA_MIME);s&&(i=e.getLanguageIdByMimeType(s))}else{const n=o.getModel(t);n&&(i=n.getLanguageId())}return i&&i!==yl?i:e.guessLanguageIdByFilepathOrFirstLine(t)}function iN(o){return o.replace(/[\11\12\14\15\40]/g,"/")}var c6e=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},TB=function(o,e){return function(t,i){e(t,i,o)}},np;function qle(o){return`suggest-aria-id:${o}`}const d6e=gs("suggest-more-info",Ee.chevronRight,v("suggestMoreInfoIcon","Icon for more information in the suggest widget.")),u6e=new(np=class{extract(e,t){if(e.textLabel.match(np._regexStrict))return t[0]=e.textLabel,!0;if(e.completion.detail&&e.completion.detail.match(np._regexStrict))return t[0]=e.completion.detail,!0;if(e.completion.documentation){const i=typeof e.completion.documentation=="string"?e.completion.documentation:e.completion.documentation.value,n=np._regexRelaxed.exec(i);if(n&&(n.index===0||n.index+n[0].length===i.length))return t[0]=n[0],!0}return!1}},np._regexRelaxed=/(#([\da-fA-F]{3}){1,2}|(rgb|hsl)a\(\s*(\d{1,3}%?\s*,\s*){3}(1|0?\.\d+)\)|(rgb|hsl)\(\s*\d{1,3}%?(\s*,\s*\d{1,3}%?){2}\s*\))/,np._regexStrict=new RegExp(`^${np._regexRelaxed.source}$`,"i"),np);let E6=class{constructor(e,t,i,n){this._editor=e,this._modelService=t,this._languageService=i,this._themeService=n,this._onDidToggleDetails=new Y,this.onDidToggleDetails=this._onDidToggleDetails.event,this.templateId="suggestion"}dispose(){this._onDidToggleDetails.dispose()}renderTemplate(e){const t=new he,i=e;i.classList.add("show-file-icons");const n=ge(e,ye(".icon")),s=ge(n,ye("span.colorspan")),r=ge(e,ye(".contents")),a=ge(r,ye(".main")),l=ge(a,ye(".icon-label.codicon")),c=ge(a,ye("span.left")),u=ge(a,ye("span.right")),f=new CM(c,{supportHighlights:!0,supportIcons:!0});t.add(f);const g=ge(c,ye("span.signature-label")),p=ge(c,ye("span.qualifier-label")),_=ge(u,ye("span.details-label")),b=ge(u,ye("span.readMore"+pt.asCSSSelector(d6e)));return b.title=v("readMore","Read More"),{root:i,left:c,right:u,icon:n,colorspan:s,iconLabel:f,iconContainer:l,parametersLabel:g,qualifierLabel:p,detailsLabel:_,readMore:b,disposables:t,configureFont:()=>{const S=this._editor.getOptions(),L=S.get(50),x=L.getMassagedFontFamily(),D=L.fontFeatureSettings,E=S.get(119)||L.fontSize,N=S.get(120)||L.lineHeight,M=L.fontWeight,F=L.letterSpacing,H=`${E}px`,Q=`${N}px`,K=`${F}px`;i.style.fontSize=H,i.style.fontWeight=M,i.style.letterSpacing=K,a.style.fontFamily=x,a.style.fontFeatureSettings=D,a.style.lineHeight=Q,n.style.height=Q,n.style.width=Q,b.style.height=Q,b.style.width=Q}}}renderElement(e,t,i){i.configureFont();const{completion:n}=e;i.root.id=qle(t),i.colorspan.style.backgroundColor="";const s={labelEscapeNewLines:!0,matches:JD(e.score)},r=[];if(n.kind===19&&u6e.extract(e,r))i.icon.className="icon customcolor",i.iconContainer.className="icon hide",i.colorspan.style.backgroundColor=r[0];else if(n.kind===20&&this._themeService.getFileIconTheme().hasFileIcons){i.icon.className="icon hide",i.iconContainer.className="icon hide";const a=tN(this._modelService,this._languageService,gt.from({scheme:"fake",path:e.textLabel}),ih.FILE),l=tN(this._modelService,this._languageService,gt.from({scheme:"fake",path:n.detail}),ih.FILE);s.extraClasses=a.length>l.length?a:l}else n.kind===23&&this._themeService.getFileIconTheme().hasFolderIcons?(i.icon.className="icon hide",i.iconContainer.className="icon hide",s.extraClasses=[tN(this._modelService,this._languageService,gt.from({scheme:"fake",path:e.textLabel}),ih.FOLDER),tN(this._modelService,this._languageService,gt.from({scheme:"fake",path:n.detail}),ih.FOLDER)].flat()):(i.icon.className="icon hide",i.iconContainer.className="",i.iconContainer.classList.add("suggest-icon",...pt.asClassNameArray(QL.toIcon(n.kind))));n.tags&&n.tags.indexOf(1)>=0&&(s.extraClasses=(s.extraClasses||[]).concat(["deprecated"]),s.matches=[]),i.iconLabel.setLabel(e.textLabel,void 0,s),typeof n.label=="string"?(i.parametersLabel.textContent="",i.detailsLabel.textContent=NB(n.detail||""),i.root.classList.add("string-label")):(i.parametersLabel.textContent=NB(n.label.detail||""),i.detailsLabel.textContent=NB(n.label.description||""),i.root.classList.remove("string-label")),this._editor.getOption(118).showInlineDetails?Ba(i.detailsLabel):Rr(i.detailsLabel),EU(e)?(i.right.classList.add("can-expand-details"),Ba(i.readMore),i.readMore.onmousedown=a=>{a.stopPropagation(),a.preventDefault()},i.readMore.onclick=a=>{a.stopPropagation(),a.preventDefault(),this._onDidToggleDetails.fire()}):(i.right.classList.remove("can-expand-details"),Rr(i.readMore),i.readMore.onmousedown=null,i.readMore.onclick=null)}disposeTemplate(e){e.disposables.dispose()}};E6=c6e([TB(1,Fn),TB(2,xn),TB(3,Us)],E6);function NB(o){return o.replace(/\r\n|\r|\n/g,"")}var h6e=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},nN=function(o,e){return function(t,i){e(t,i,o)}},K0;V("editorSuggestWidget.background",{dark:us,light:us,hcDark:us,hcLight:us},v("editorSuggestWidgetBackground","Background color of the suggest widget."));V("editorSuggestWidget.border",{dark:Nf,light:Nf,hcDark:Nf,hcLight:Nf},v("editorSuggestWidgetBorder","Border color of the suggest widget."));const sN=V("editorSuggestWidget.foreground",{dark:oc,light:oc,hcDark:oc,hcLight:oc},v("editorSuggestWidgetForeground","Foreground color of the suggest widget."));V("editorSuggestWidget.selectedForeground",{dark:Rp,light:Rp,hcDark:Rp,hcLight:Rp},v("editorSuggestWidgetSelectedForeground","Foreground color of the selected entry in the suggest widget."));V("editorSuggestWidget.selectedIconForeground",{dark:aC,light:aC,hcDark:aC,hcLight:aC},v("editorSuggestWidgetSelectedIconForeground","Icon foreground color of the selected entry in the suggest widget."));const f6e=V("editorSuggestWidget.selectedBackground",{dark:Mp,light:Mp,hcDark:Mp,hcLight:Mp},v("editorSuggestWidgetSelectedBackground","Background color of the selected entry in the suggest widget."));V("editorSuggestWidget.highlightForeground",{dark:zc,light:zc,hcDark:zc,hcLight:zc},v("editorSuggestWidgetHighlightForeground","Color of the match highlights in the suggest widget."));V("editorSuggestWidget.focusHighlightForeground",{dark:eT,light:eT,hcDark:eT,hcLight:eT},v("editorSuggestWidgetFocusHighlightForeground","Color of the match highlights in the suggest widget when an item is focused."));V("editorSuggestWidgetStatus.foreground",{dark:at(sN,.5),light:at(sN,.5),hcDark:at(sN,.5),hcLight:at(sN,.5)},v("editorSuggestWidgetStatusForeground","Foreground color of the suggest widget status."));class g6e{constructor(e,t){this._service=e,this._key=`suggestWidget.size/${t.getEditorType()}/${t instanceof Sm}`}restore(){var e;const t=(e=this._service.get(this._key,0))!==null&&e!==void 0?e:"";try{const i=JSON.parse(t);if(yi.is(i))return yi.lift(i)}catch{}}store(e){this._service.store(this._key,JSON.stringify(e),0,1)}reset(){this._service.remove(this._key,0)}}let mD=K0=class{constructor(e,t,i,n,s){this.editor=e,this._storageService=t,this._state=0,this._isAuto=!1,this._pendingLayout=new Xs,this._pendingShowDetails=new Xs,this._ignoreFocusEvents=!1,this._forceRenderingAbove=!1,this._explainMode=!1,this._showTimeout=new Yc,this._disposables=new he,this._onDidSelect=new Dv,this._onDidFocus=new Dv,this._onDidHide=new Y,this._onDidShow=new Y,this.onDidSelect=this._onDidSelect.event,this.onDidFocus=this._onDidFocus.event,this.onDidHide=this._onDidHide.event,this.onDidShow=this._onDidShow.event,this._onDetailsKeydown=new Y,this.onDetailsKeyDown=this._onDetailsKeydown.event,this.element=new uU,this.element.domNode.classList.add("editor-widget","suggest-widget"),this._contentWidget=new p6e(this,e),this._persistedSize=new g6e(t,e);class r{constructor(p,_,b=!1,y=!1){this.persistedSize=p,this.currentSize=_,this.persistHeight=b,this.persistWidth=y}}let a;this._disposables.add(this.element.onDidWillResize(()=>{this._contentWidget.lockPreference(),a=new r(this._persistedSize.restore(),this.element.size)})),this._disposables.add(this.element.onDidResize(g=>{var p,_,b,y;if(this._resize(g.dimension.width,g.dimension.height),a&&(a.persistHeight=a.persistHeight||!!g.north||!!g.south,a.persistWidth=a.persistWidth||!!g.east||!!g.west),!!g.done){if(a){const{itemHeight:S,defaultSize:L}=this.getLayoutInfo(),x=Math.round(S/2);let{width:D,height:E}=this.element.size;(!a.persistHeight||Math.abs(a.currentSize.height-E)<=x)&&(E=(_=(p=a.persistedSize)===null||p===void 0?void 0:p.height)!==null&&_!==void 0?_:L.height),(!a.persistWidth||Math.abs(a.currentSize.width-D)<=x)&&(D=(y=(b=a.persistedSize)===null||b===void 0?void 0:b.width)!==null&&y!==void 0?y:L.width),this._persistedSize.store(new yi(D,E))}this._contentWidget.unlockPreference(),a=void 0}})),this._messageElement=ge(this.element.domNode,ye(".message")),this._listElement=ge(this.element.domNode,ye(".tree"));const l=this._disposables.add(s.createInstance(k6,this.editor));l.onDidClose(this.toggleDetails,this,this._disposables),this._details=new r6e(l,this.editor);const c=()=>this.element.domNode.classList.toggle("no-icons",!this.editor.getOption(118).showIcons);c();const u=s.createInstance(E6,this.editor);this._disposables.add(u),this._disposables.add(u.onDidToggleDetails(()=>this.toggleDetails())),this._list=new Ml("SuggestWidget",this._listElement,{getHeight:g=>this.getLayoutInfo().itemHeight,getTemplateId:g=>"suggestion"},[u],{alwaysConsumeMouseWheel:!0,useShadows:!1,mouseSupport:!1,multipleSelectionSupport:!1,accessibilityProvider:{getRole:()=>"option",getWidgetAriaLabel:()=>v("suggest","Suggest"),getWidgetRole:()=>"listbox",getAriaLabel:g=>{let p=g.textLabel;if(typeof g.completion.label!="string"){const{detail:S,description:L}=g.completion.label;S&&L?p=v("label.full","{0} {1}, {2}",p,S,L):S?p=v("label.detail","{0} {1}",p,S):L&&(p=v("label.desc","{0}, {1}",p,L))}if(!g.isResolved||!this._isDetailsVisible())return p;const{documentation:_,detail:b}=g.completion,y=kv("{0}{1}",b||"",_?typeof _=="string"?_:_.value:"");return v("ariaCurrenttSuggestionReadDetails","{0}, docs: {1}",p,y)}}}),this._list.style(hb({listInactiveFocusBackground:f6e,listInactiveFocusOutline:Sn})),this._status=s.createInstance(D6,this.element.domNode,im);const f=()=>this.element.domNode.classList.toggle("with-status-bar",this.editor.getOption(118).showStatusBar);f(),this._disposables.add(n.onDidColorThemeChange(g=>this._onThemeChange(g))),this._onThemeChange(n.getColorTheme()),this._disposables.add(this._list.onMouseDown(g=>this._onListMouseDownOrTap(g))),this._disposables.add(this._list.onTap(g=>this._onListMouseDownOrTap(g))),this._disposables.add(this._list.onDidChangeSelection(g=>this._onListSelection(g))),this._disposables.add(this._list.onDidChangeFocus(g=>this._onListFocus(g))),this._disposables.add(this.editor.onDidChangeCursorSelection(()=>this._onCursorSelectionChanged())),this._disposables.add(this.editor.onDidChangeConfiguration(g=>{g.hasChanged(118)&&(f(),c()),this._completionModel&&(g.hasChanged(50)||g.hasChanged(119)||g.hasChanged(120))&&this._list.splice(0,this._list.length,this._completionModel.items)})),this._ctxSuggestWidgetVisible=Vt.Visible.bindTo(i),this._ctxSuggestWidgetDetailsVisible=Vt.DetailsVisible.bindTo(i),this._ctxSuggestWidgetMultipleSuggestions=Vt.MultipleSuggestions.bindTo(i),this._ctxSuggestWidgetHasFocusedSuggestion=Vt.HasFocusedSuggestion.bindTo(i),this._disposables.add(ss(this._details.widget.domNode,"keydown",g=>{this._onDetailsKeydown.fire(g)})),this._disposables.add(this.editor.onMouseDown(g=>this._onEditorMouseDown(g)))}dispose(){var e;this._details.widget.dispose(),this._details.dispose(),this._list.dispose(),this._status.dispose(),this._disposables.dispose(),(e=this._loadingTimeout)===null||e===void 0||e.dispose(),this._pendingLayout.dispose(),this._pendingShowDetails.dispose(),this._showTimeout.dispose(),this._contentWidget.dispose(),this.element.dispose()}_onEditorMouseDown(e){this._details.widget.domNode.contains(e.target.element)?this._details.widget.domNode.focus():this.element.domNode.contains(e.target.element)&&this.editor.focus()}_onCursorSelectionChanged(){this._state!==0&&this._contentWidget.layout()}_onListMouseDownOrTap(e){typeof e.element>"u"||typeof e.index>"u"||(e.browserEvent.preventDefault(),e.browserEvent.stopPropagation(),this._select(e.element,e.index))}_onListSelection(e){e.elements.length&&this._select(e.elements[0],e.indexes[0])}_select(e,t){const i=this._completionModel;i&&(this._onDidSelect.fire({item:e,index:t,model:i}),this.editor.focus())}_onThemeChange(e){this._details.widget.borderWidth=Vd(e.type)?2:1}_onListFocus(e){var t;if(this._ignoreFocusEvents)return;if(!e.elements.length){this._currentSuggestionDetails&&(this._currentSuggestionDetails.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=void 0),this.editor.setAriaOptions({activeDescendant:void 0}),this._ctxSuggestWidgetHasFocusedSuggestion.set(!1);return}if(!this._completionModel)return;this._ctxSuggestWidgetHasFocusedSuggestion.set(!0);const i=e.elements[0],n=e.indexes[0];i!==this._focusedItem&&((t=this._currentSuggestionDetails)===null||t===void 0||t.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=i,this._list.reveal(n),this._currentSuggestionDetails=Qs(async s=>{const r=dm(()=>{this._isDetailsVisible()&&this.showDetails(!0)},250),a=s.onCancellationRequested(()=>r.dispose());try{return await i.resolve(s)}finally{r.dispose(),a.dispose()}}),this._currentSuggestionDetails.then(()=>{n>=this._list.length||i!==this._list.element(n)||(this._ignoreFocusEvents=!0,this._list.splice(n,1,[i]),this._list.setFocus([n]),this._ignoreFocusEvents=!1,this._isDetailsVisible()?this.showDetails(!1):this.element.domNode.classList.remove("docs-side"),this.editor.setAriaOptions({activeDescendant:qle(n)}))}).catch(Nt)),this._onDidFocus.fire({item:i,index:n,model:this._completionModel})}_setState(e){if(this._state!==e)switch(this._state=e,this.element.domNode.classList.toggle("frozen",e===4),this.element.domNode.classList.remove("message"),e){case 0:Rr(this._messageElement,this._listElement,this._status.element),this._details.hide(!0),this._status.hide(),this._contentWidget.hide(),this._ctxSuggestWidgetVisible.reset(),this._ctxSuggestWidgetMultipleSuggestions.reset(),this._ctxSuggestWidgetHasFocusedSuggestion.reset(),this._showTimeout.cancel(),this.element.domNode.classList.remove("visible"),this._list.splice(0,this._list.length),this._focusedItem=void 0,this._cappedHeight=void 0,this._explainMode=!1;break;case 1:this.element.domNode.classList.add("message"),this._messageElement.textContent=K0.LOADING_MESSAGE,Rr(this._listElement,this._status.element),Ba(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0,fh(K0.LOADING_MESSAGE);break;case 2:this.element.domNode.classList.add("message"),this._messageElement.textContent=K0.NO_SUGGESTIONS_MESSAGE,Rr(this._listElement,this._status.element),Ba(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0,fh(K0.NO_SUGGESTIONS_MESSAGE);break;case 3:Rr(this._messageElement),Ba(this._listElement,this._status.element),this._show();break;case 4:Rr(this._messageElement),Ba(this._listElement,this._status.element),this._show();break;case 5:Rr(this._messageElement),Ba(this._listElement,this._status.element),this._details.show(),this._show();break}}_show(){this._status.show(),this._contentWidget.show(),this._layout(this._persistedSize.restore()),this._ctxSuggestWidgetVisible.set(!0),this._showTimeout.cancelAndSet(()=>{this.element.domNode.classList.add("visible"),this._onDidShow.fire(this)},100)}showTriggered(e,t){this._state===0&&(this._contentWidget.setPosition(this.editor.getPosition()),this._isAuto=!!e,this._isAuto||(this._loadingTimeout=dm(()=>this._setState(1),t)))}showSuggestions(e,t,i,n,s){var r,a;if(this._contentWidget.setPosition(this.editor.getPosition()),(r=this._loadingTimeout)===null||r===void 0||r.dispose(),(a=this._currentSuggestionDetails)===null||a===void 0||a.cancel(),this._currentSuggestionDetails=void 0,this._completionModel!==e&&(this._completionModel=e),i&&this._state!==2&&this._state!==0){this._setState(4);return}const l=this._completionModel.items.length,c=l===0;if(this._ctxSuggestWidgetMultipleSuggestions.set(l>1),c){this._setState(n?0:2),this._completionModel=void 0;return}this._focusedItem=void 0,this._onDidFocus.pause(),this._onDidSelect.pause();try{this._list.splice(0,this._list.length,this._completionModel.items),this._setState(i?4:3),this._list.reveal(t,0),this._list.setFocus(s?[]:[t])}finally{this._onDidFocus.resume(),this._onDidSelect.resume()}this._pendingLayout.value=_R(ft(this.element.domNode),()=>{this._pendingLayout.clear(),this._layout(this.element.size),this._details.widget.domNode.classList.remove("focused")})}focusSelected(){this._list.length>0&&this._list.setFocus([0])}selectNextPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageDown(),!0;case 1:return!this._isAuto;default:return this._list.focusNextPage(),!0}}selectNext(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusNext(1,!0),!0}}selectLast(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollBottom(),!0;case 1:return!this._isAuto;default:return this._list.focusLast(),!0}}selectPreviousPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageUp(),!0;case 1:return!this._isAuto;default:return this._list.focusPreviousPage(),!0}}selectPrevious(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusPrevious(1,!0),!1}}selectFirst(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollTop(),!0;case 1:return!this._isAuto;default:return this._list.focusFirst(),!0}}getFocusedItem(){if(this._state!==0&&this._state!==2&&this._state!==1&&this._completionModel&&this._list.getFocus().length>0)return{item:this._list.getFocusedElements()[0],index:this._list.getFocus()[0],model:this._completionModel}}toggleDetailsFocus(){this._state===5?(this._setState(3),this._details.widget.domNode.classList.remove("focused")):this._state===3&&this._isDetailsVisible()&&(this._setState(5),this._details.widget.domNode.classList.add("focused"))}toggleDetails(){this._isDetailsVisible()?(this._pendingShowDetails.clear(),this._ctxSuggestWidgetDetailsVisible.set(!1),this._setDetailsVisible(!1),this._details.hide(),this.element.domNode.classList.remove("shows-details")):(EU(this._list.getFocusedElements()[0])||this._explainMode)&&(this._state===3||this._state===5||this._state===4)&&(this._ctxSuggestWidgetDetailsVisible.set(!0),this._setDetailsVisible(!0),this.showDetails(!1))}showDetails(e){this._pendingShowDetails.value=_R(ft(this.element.domNode),()=>{this._pendingShowDetails.clear(),this._details.show(),e?this._details.widget.renderLoading():this._details.widget.renderItem(this._list.getFocusedElements()[0],this._explainMode),this._details.widget.isEmpty?this._details.hide():(this._positionDetails(),this.element.domNode.classList.add("shows-details")),this.editor.focus()})}toggleExplainMode(){this._list.getFocusedElements()[0]&&(this._explainMode=!this._explainMode,this._isDetailsVisible()?this.showDetails(!1):this.toggleDetails())}resetPersistedSize(){this._persistedSize.reset()}hideWidget(){var e;this._pendingLayout.clear(),this._pendingShowDetails.clear(),(e=this._loadingTimeout)===null||e===void 0||e.dispose(),this._setState(0),this._onDidHide.fire(this),this.element.clearSashHoverState();const t=this._persistedSize.restore(),i=Math.ceil(this.getLayoutInfo().itemHeight*4.3);t&&t.height<i&&this._persistedSize.store(t.with(void 0,i))}isFrozen(){return this._state===4}_afterRender(e){if(e===null){this._isDetailsVisible()&&this._details.hide();return}this._state===2||this._state===1||(this._isDetailsVisible()&&!this._details.widget.isEmpty&&this._details.show(),this._positionDetails())}_layout(e){var t,i,n;if(!this.editor.hasModel()||!this.editor.getDomNode())return;const s=um(this.element.domNode.ownerDocument.body),r=this.getLayoutInfo();e||(e=r.defaultSize);let a=e.height,l=e.width;if(this._status.element.style.height=`${r.itemHeight}px`,this._state===2||this._state===1)a=r.itemHeight+r.borderHeight,l=r.defaultSize.width/2,this.element.enableSashes(!1,!1,!1,!1),this.element.minSize=this.element.maxSize=new yi(l,a),this._contentWidget.setPreference(2);else{const c=s.width-r.borderHeight-2*r.horizontalPadding;l>c&&(l=c);const u=this._completionModel?this._completionModel.stats.pLabelLen*r.typicalHalfwidthCharacterWidth:l,f=r.statusBarHeight+this._list.contentHeight+r.borderHeight,g=r.itemHeight+r.statusBarHeight,p=ws(this.editor.getDomNode()),_=this.editor.getScrolledVisiblePosition(this.editor.getPosition()),b=p.top+_.top+_.height,y=Math.min(s.height-b-r.verticalPadding,f),S=p.top+_.top-r.verticalPadding,L=Math.min(S,f);let x=Math.min(Math.max(L,y)+r.borderHeight,f);a===((t=this._cappedHeight)===null||t===void 0?void 0:t.capped)&&(a=this._cappedHeight.wanted),a<g&&(a=g),a>x&&(a=x),a>y||this._forceRenderingAbove&&S>150?(this._contentWidget.setPreference(1),this.element.enableSashes(!0,!0,!1,!1),x=L):(this._contentWidget.setPreference(2),this.element.enableSashes(!1,!0,!0,!1),x=y),this.element.preferredSize=new yi(u,r.defaultSize.height),this.element.maxSize=new yi(c,x),this.element.minSize=new yi(220,g),this._cappedHeight=a===f?{wanted:(n=(i=this._cappedHeight)===null||i===void 0?void 0:i.wanted)!==null&&n!==void 0?n:e.height,capped:a}:void 0}this._resize(l,a)}_resize(e,t){const{width:i,height:n}=this.element.maxSize;e=Math.min(i,e),t=Math.min(n,t);const{statusBarHeight:s}=this.getLayoutInfo();this._list.layout(t-s,e),this._listElement.style.height=`${t-s}px`,this.element.layout(t,e),this._contentWidget.layout(),this._positionDetails()}_positionDetails(){var e;this._isDetailsVisible()&&this._details.placeAtAnchor(this.element.domNode,((e=this._contentWidget.getPosition())===null||e===void 0?void 0:e.preference[0])===2)}getLayoutInfo(){const e=this.editor.getOption(50),t=Tr(this.editor.getOption(120)||e.lineHeight,8,1e3),i=!this.editor.getOption(118).showStatusBar||this._state===2||this._state===1?0:t,n=this._details.widget.borderWidth,s=2*n;return{itemHeight:t,statusBarHeight:i,borderWidth:n,borderHeight:s,typicalHalfwidthCharacterWidth:e.typicalHalfwidthCharacterWidth,verticalPadding:22,horizontalPadding:14,defaultSize:new yi(430,i+12*t+s)}}_isDetailsVisible(){return this._storageService.getBoolean("expandSuggestionDocs",0,!1)}_setDetailsVisible(e){this._storageService.store("expandSuggestionDocs",e,0,0)}forceRenderingAbove(){this._forceRenderingAbove||(this._forceRenderingAbove=!0,this._layout(this._persistedSize.restore()))}stopForceRenderingAbove(){this._forceRenderingAbove=!1}};mD.LOADING_MESSAGE=v("suggestWidget.loading","Loading...");mD.NO_SUGGESTIONS_MESSAGE=v("suggestWidget.noSuggestions","No suggestions.");mD=K0=h6e([nN(1,Qc),nN(2,bt),nN(3,Us),nN(4,ct)],mD);class p6e{constructor(e,t){this._widget=e,this._editor=t,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._preferenceLocked=!1,this._added=!1,this._hidden=!1}dispose(){this._added&&(this._added=!1,this._editor.removeContentWidget(this))}getId(){return"editor.widget.suggestWidget"}getDomNode(){return this._widget.element.domNode}show(){this._hidden=!1,this._added||(this._added=!0,this._editor.addContentWidget(this))}hide(){this._hidden||(this._hidden=!0,this.layout())}layout(){this._editor.layoutContentWidget(this)}getPosition(){return this._hidden||!this._position||!this._preference?null:{position:this._position,preference:[this._preference]}}beforeRender(){const{height:e,width:t}=this._widget.element.size,{borderWidth:i,horizontalPadding:n}=this._widget.getLayoutInfo();return new yi(t+2*i+n,e+2*i)}afterRender(e){this._widget._afterRender(e)}setPreference(e){this._preferenceLocked||(this._preference=e)}lockPreference(){this._preferenceLocked=!0}unlockPreference(){this._preferenceLocked=!1}setPosition(e){this._position=e}}var m6e=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},O0=function(o,e){return function(t,i){e(t,i,o)}},I6;class _6e{constructor(e,t){if(this._model=e,this._position=t,this._decorationOptions=Rt.register({description:"suggest-line-suffix",stickiness:1}),e.getLineMaxColumn(t.lineNumber)!==t.column){const n=e.getOffsetAt(t),s=e.getPositionAt(n+1);e.changeDecorations(r=>{this._marker&&r.removeDecoration(this._marker),this._marker=r.addDecoration(A.fromPositions(t,s),this._decorationOptions)})}}dispose(){this._marker&&!this._model.isDisposed()&&this._model.changeDecorations(e=>{e.removeDecoration(this._marker),this._marker=void 0})}delta(e){if(this._model.isDisposed()||this._position.lineNumber!==e.lineNumber)return 0;if(this._marker){const t=this._model.getDecorationRange(this._marker);return this._model.getOffsetAt(t.getStartPosition())-this._model.getOffsetAt(e)}else return this._model.getLineMaxColumn(e.lineNumber)-e.column}}let Uc=I6=class{static get(e){return e.getContribution(I6.ID)}constructor(e,t,i,n,s,r,a){this._memoryService=t,this._commandService=i,this._contextKeyService=n,this._instantiationService=s,this._logService=r,this._telemetryService=a,this._lineSuffix=new Xs,this._toDispose=new he,this._selectors=new v6e(f=>f.priority),this._onWillInsertSuggestItem=new Y,this.onWillInsertSuggestItem=this._onWillInsertSuggestItem.event,this.editor=e,this.model=s.createInstance(XM,this.editor),this._selectors.register({priority:0,select:(f,g,p)=>this._memoryService.select(f,g,p)});const l=Vt.InsertMode.bindTo(n);l.set(e.getOption(118).insertMode),this._toDispose.add(this.model.onDidTrigger(()=>l.set(e.getOption(118).insertMode))),this.widget=this._toDispose.add(new G5(ft(e.getDomNode()),()=>{const f=this._instantiationService.createInstance(mD,this.editor);this._toDispose.add(f),this._toDispose.add(f.onDidSelect(y=>this._insertSuggestion(y,0),this));const g=new XWe(this.editor,f,this.model,y=>this._insertSuggestion(y,2));this._toDispose.add(g);const p=Vt.MakesTextEdit.bindTo(this._contextKeyService),_=Vt.HasInsertAndReplaceRange.bindTo(this._contextKeyService),b=Vt.CanResolve.bindTo(this._contextKeyService);return this._toDispose.add(lt(()=>{p.reset(),_.reset(),b.reset()})),this._toDispose.add(f.onDidFocus(({item:y})=>{const S=this.editor.getPosition(),L=y.editStart.column,x=S.column;let D=!0;this.editor.getOption(1)==="smart"&&this.model.state===2&&!y.completion.additionalTextEdits&&!(y.completion.insertTextRules&4)&&x-L===y.completion.insertText.length&&(D=this.editor.getModel().getValueInRange({startLineNumber:S.lineNumber,startColumn:L,endLineNumber:S.lineNumber,endColumn:x})!==y.completion.insertText),p.set(D),_.set(!Z.equals(y.editInsertEnd,y.editReplaceEnd)),b.set(!!y.provider.resolveCompletionItem||!!y.completion.documentation||y.completion.detail!==y.completion.label)})),this._toDispose.add(f.onDetailsKeyDown(y=>{if(y.toKeyCodeChord().equals(new ng(!0,!1,!1,!1,33))||Kt&&y.toKeyCodeChord().equals(new ng(!1,!1,!1,!0,33))){y.stopPropagation();return}y.toKeyCodeChord().isModifierKey()||this.editor.focus()})),f})),this._overtypingCapturer=this._toDispose.add(new G5(ft(e.getDomNode()),()=>this._toDispose.add(new nO(this.editor,this.model)))),this._alternatives=this._toDispose.add(new G5(ft(e.getDomNode()),()=>this._toDispose.add(new Xv(this.editor,this._contextKeyService)))),this._toDispose.add(s.createInstance(pD,e)),this._toDispose.add(this.model.onDidTrigger(f=>{this.widget.value.showTriggered(f.auto,f.shy?250:50),this._lineSuffix.value=new _6e(this.editor.getModel(),f.position)})),this._toDispose.add(this.model.onDidSuggest(f=>{if(f.triggerOptions.shy)return;let g=-1;for(const _ of this._selectors.itemsOrderedByPriorityDesc)if(g=_.select(this.editor.getModel(),this.editor.getPosition(),f.completionModel.items),g!==-1)break;if(g===-1&&(g=0),this.model.state===0)return;let p=!1;if(f.triggerOptions.auto){const _=this.editor.getOption(118);_.selectionMode==="never"||_.selectionMode==="always"?p=_.selectionMode==="never":_.selectionMode==="whenTriggerCharacter"?p=f.triggerOptions.triggerKind!==1:_.selectionMode==="whenQuickSuggestion"&&(p=f.triggerOptions.triggerKind===1&&!f.triggerOptions.refilter)}this.widget.value.showSuggestions(f.completionModel,g,f.isFrozen,f.triggerOptions.auto,p)})),this._toDispose.add(this.model.onDidCancel(f=>{f.retrigger||this.widget.value.hideWidget()})),this._toDispose.add(this.editor.onDidBlurEditorWidget(()=>{this.model.cancel(),this.model.clear()}));const c=Vt.AcceptSuggestionsOnEnter.bindTo(n),u=()=>{const f=this.editor.getOption(1);c.set(f==="on"||f==="smart")};this._toDispose.add(this.editor.onDidChangeConfiguration(()=>u())),u()}dispose(){this._alternatives.dispose(),this._toDispose.dispose(),this.widget.dispose(),this.model.dispose(),this._lineSuffix.dispose(),this._onWillInsertSuggestItem.dispose()}_insertSuggestion(e,t){if(!e||!e.item){this._alternatives.value.reset(),this.model.cancel(),this.model.clear();return}if(!this.editor.hasModel())return;const i=bo.get(this.editor);if(!i)return;this._onWillInsertSuggestItem.fire({item:e.item});const n=this.editor.getModel(),s=n.getAlternativeVersionId(),{item:r}=e,a=[],l=new os;t&1||this.editor.pushUndoStop();const c=this.getOverwriteInfo(r,!!(t&8));this._memoryService.memorize(n,this.editor.getPosition(),r);const u=r.isResolved;let f=-1,g=-1;if(Array.isArray(r.completion.additionalTextEdits)){this.model.cancel();const _=Xd.capture(this.editor);this.editor.executeEdits("suggestController.additionalTextEdits.sync",r.completion.additionalTextEdits.map(b=>{let y=A.lift(b.range);if(y.startLineNumber===r.position.lineNumber&&y.startColumn>r.position.column){const S=this.editor.getPosition().column-r.position.column,L=S,x=A.spansMultipleLines(y)?0:S;y=new A(y.startLineNumber,y.startColumn+L,y.endLineNumber,y.endColumn+x)}return On.replaceMove(y,b.text)})),_.restoreRelativeVerticalPositionOfCursor(this.editor)}else if(!u){const _=new Ao;let b;const y=n.onDidChangeContent(D=>{if(D.isFlush){l.cancel(),y.dispose();return}for(const E of D.changes){const N=A.getEndPosition(E.range);(!b||Z.isBefore(N,b))&&(b=N)}}),S=t;t|=2;let L=!1;const x=this.editor.onWillType(()=>{x.dispose(),L=!0,S&2||this.editor.pushUndoStop()});a.push(r.resolve(l.token).then(()=>{if(!r.completion.additionalTextEdits||l.token.isCancellationRequested)return;if(b&&r.completion.additionalTextEdits.some(E=>Z.isBefore(b,A.getStartPosition(E.range))))return!1;L&&this.editor.pushUndoStop();const D=Xd.capture(this.editor);return this.editor.executeEdits("suggestController.additionalTextEdits.async",r.completion.additionalTextEdits.map(E=>On.replaceMove(A.lift(E.range),E.text))),D.restoreRelativeVerticalPositionOfCursor(this.editor),(L||!(S&2))&&this.editor.pushUndoStop(),!0}).then(D=>{this._logService.trace("[suggest] async resolving of edits DONE (ms, applied?)",_.elapsed(),D),g=D===!0?1:D===!1?0:-2}).finally(()=>{y.dispose(),x.dispose()}))}let{insertText:p}=r.completion;if(r.completion.insertTextRules&4||(p=Uv.escape(p)),this.model.cancel(),i.insert(p,{overwriteBefore:c.overwriteBefore,overwriteAfter:c.overwriteAfter,undoStopBefore:!1,undoStopAfter:!1,adjustWhitespace:!(r.completion.insertTextRules&1),clipboardText:e.model.clipboardText,overtypingCapturer:this._overtypingCapturer.value}),t&2||this.editor.pushUndoStop(),r.completion.command)if(r.completion.command.id===wk.id)this.model.trigger({auto:!0,retrigger:!0});else{const _=new Ao;a.push(this._commandService.executeCommand(r.completion.command.id,...r.completion.command.arguments?[...r.completion.command.arguments]:[]).catch(b=>{r.completion.extensionId?hs(b):Nt(b)}).finally(()=>{f=_.elapsed()}))}t&4&&this._alternatives.value.set(e,_=>{for(l.cancel();n.canUndo();){s!==n.getAlternativeVersionId()&&n.undo(),this._insertSuggestion(_,3|(t&8?8:0));break}}),this._alertCompletionItem(r),Promise.all(a).finally(()=>{this._reportSuggestionAcceptedTelemetry(r,n,u,f,g),this.model.clear(),l.dispose()})}_reportSuggestionAcceptedTelemetry(e,t,i,n,s){var r,a,l;Math.floor(Math.random()*100)!==0&&this._telemetryService.publicLog2("suggest.acceptedSuggestion",{extensionId:(a=(r=e.extensionId)===null||r===void 0?void 0:r.value)!==null&&a!==void 0?a:"unknown",providerId:(l=e.provider._debugDisplayName)!==null&&l!==void 0?l:"unknown",kind:e.completion.kind,basenameHash:hA(fc(t.uri)).toString(16),languageId:t.getLanguageId(),fileExtension:vIe(t.uri),resolveInfo:e.provider.resolveCompletionItem?i?1:0:-1,resolveDuration:e.resolveDuration,commandDuration:n,additionalEditsAsync:s})}getOverwriteInfo(e,t){wi(this.editor.hasModel());let i=this.editor.getOption(118).insertMode==="replace";t&&(i=!i);const n=e.position.column-e.editStart.column,s=(i?e.editReplaceEnd.column:e.editInsertEnd.column)-e.position.column,r=this.editor.getPosition().column-e.position.column,a=this._lineSuffix.value?this._lineSuffix.value.delta(this.editor.getPosition()):0;return{overwriteBefore:n+r,overwriteAfter:s+a}}_alertCompletionItem(e){if(Yo(e.completion.additionalTextEdits)){const t=v("aria.alert.snippet","Accepting '{0}' made {1} additional edits",e.textLabel,e.completion.additionalTextEdits.length);_a(t)}}triggerSuggest(e,t,i){this.editor.hasModel()&&(this.model.trigger({auto:t??!1,completionOptions:{providerFilter:e,kindFilter:i?new Set:void 0}}),this.editor.revealPosition(this.editor.getPosition(),0),this.editor.focus())}triggerSuggestAndAcceptBest(e){if(!this.editor.hasModel())return;const t=this.editor.getPosition(),i=()=>{t.equals(this.editor.getPosition())&&this._commandService.executeCommand(e.fallback)},n=s=>{if(s.completion.insertTextRules&4||s.completion.additionalTextEdits)return!0;const r=this.editor.getPosition(),a=s.editStart.column,l=r.column;return l-a!==s.completion.insertText.length?!0:this.editor.getModel().getValueInRange({startLineNumber:r.lineNumber,startColumn:a,endLineNumber:r.lineNumber,endColumn:l})!==s.completion.insertText};Ie.once(this.model.onDidTrigger)(s=>{const r=[];Ie.any(this.model.onDidTrigger,this.model.onDidCancel)(()=>{cn(r),i()},void 0,r),this.model.onDidSuggest(({completionModel:a})=>{if(cn(r),a.items.length===0){i();return}const l=this._memoryService.select(this.editor.getModel(),this.editor.getPosition(),a.items),c=a.items[l];if(!n(c)){i();return}this.editor.pushUndoStop(),this._insertSuggestion({index:l,item:c,model:a},7)},void 0,r)}),this.model.trigger({auto:!1,shy:!0}),this.editor.revealPosition(t,0),this.editor.focus()}acceptSelectedSuggestion(e,t){const i=this.widget.value.getFocusedItem();let n=0;e&&(n|=4),t&&(n|=8),this._insertSuggestion(i,n)}acceptNextSuggestion(){this._alternatives.value.next()}acceptPrevSuggestion(){this._alternatives.value.prev()}cancelSuggestWidget(){this.model.cancel(),this.model.clear(),this.widget.value.hideWidget()}focusSuggestion(){this.widget.value.focusSelected()}selectNextSuggestion(){this.widget.value.selectNext()}selectNextPageSuggestion(){this.widget.value.selectNextPage()}selectLastSuggestion(){this.widget.value.selectLast()}selectPrevSuggestion(){this.widget.value.selectPrevious()}selectPrevPageSuggestion(){this.widget.value.selectPreviousPage()}selectFirstSuggestion(){this.widget.value.selectFirst()}toggleSuggestionDetails(){this.widget.value.toggleDetails()}toggleExplainMode(){this.widget.value.toggleExplainMode()}toggleSuggestionFocus(){this.widget.value.toggleDetailsFocus()}resetWidgetSize(){this.widget.value.resetPersistedSize()}forceRenderingAbove(){this.widget.value.forceRenderingAbove()}stopForceRenderingAbove(){this.widget.isInitialized&&this.widget.value.stopForceRenderingAbove()}registerSelector(e){return this._selectors.register(e)}};Uc.ID="editor.contrib.suggestController";Uc=I6=m6e([O0(1,iO),O0(2,Un),O0(3,bt),O0(4,ct),O0(5,mr),O0(6,pr)],Uc);class v6e{constructor(e){this.prioritySelector=e,this._items=new Array}register(e){if(this._items.indexOf(e)!==-1)throw new Error("Value is already registered");return this._items.push(e),this._items.sort((t,i)=>this.prioritySelector(i)-this.prioritySelector(t)),{dispose:()=>{const t=this._items.indexOf(e);t>=0&&this._items.splice(t,1)}}}get itemsOrderedByPriorityDesc(){return this._items}}class wk extends Ke{constructor(){super({id:wk.id,label:v("suggest.trigger.label","Trigger Suggest"),alias:"Trigger Suggest",precondition:ue.and(W.writable,W.hasCompletionItemProvider,Vt.Visible.toNegated()),kbOpts:{kbExpr:W.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[521,2087]},weight:100}})}run(e,t,i){const n=Uc.get(t);if(!n)return;let s;i&&typeof i=="object"&&i.auto===!0&&(s=!0),n.triggerSuggest(void 0,s,void 0)}}wk.id="editor.action.triggerSuggest";pi(Uc.ID,Uc,2);Ce(wk);const Il=190,Qr=zs.bindToContribution(Uc.get);Me(new Qr({id:"acceptSelectedSuggestion",precondition:ue.and(Vt.Visible,Vt.HasFocusedSuggestion),handler(o){o.acceptSelectedSuggestion(!0,!1)},kbOpts:[{primary:2,kbExpr:ue.and(Vt.Visible,W.textInputFocus),weight:Il},{primary:3,kbExpr:ue.and(Vt.Visible,W.textInputFocus,Vt.AcceptSuggestionsOnEnter,Vt.MakesTextEdit),weight:Il}],menuOpts:[{menuId:im,title:v("accept.insert","Insert"),group:"left",order:1,when:Vt.HasInsertAndReplaceRange.toNegated()},{menuId:im,title:v("accept.insert","Insert"),group:"left",order:1,when:ue.and(Vt.HasInsertAndReplaceRange,Vt.InsertMode.isEqualTo("insert"))},{menuId:im,title:v("accept.replace","Replace"),group:"left",order:1,when:ue.and(Vt.HasInsertAndReplaceRange,Vt.InsertMode.isEqualTo("replace"))}]}));Me(new Qr({id:"acceptAlternativeSelectedSuggestion",precondition:ue.and(Vt.Visible,W.textInputFocus,Vt.HasFocusedSuggestion),kbOpts:{weight:Il,kbExpr:W.textInputFocus,primary:1027,secondary:[1026]},handler(o){o.acceptSelectedSuggestion(!1,!0)},menuOpts:[{menuId:im,group:"left",order:2,when:ue.and(Vt.HasInsertAndReplaceRange,Vt.InsertMode.isEqualTo("insert")),title:v("accept.replace","Replace")},{menuId:im,group:"left",order:2,when:ue.and(Vt.HasInsertAndReplaceRange,Vt.InsertMode.isEqualTo("replace")),title:v("accept.insert","Insert")}]}));si.registerCommandAlias("acceptSelectedSuggestionOnEnter","acceptSelectedSuggestion");Me(new Qr({id:"hideSuggestWidget",precondition:Vt.Visible,handler:o=>o.cancelSuggestWidget(),kbOpts:{weight:Il,kbExpr:W.textInputFocus,primary:9,secondary:[1033]}}));Me(new Qr({id:"selectNextSuggestion",precondition:ue.and(Vt.Visible,ue.or(Vt.MultipleSuggestions,Vt.HasFocusedSuggestion.negate())),handler:o=>o.selectNextSuggestion(),kbOpts:{weight:Il,kbExpr:W.textInputFocus,primary:18,secondary:[2066],mac:{primary:18,secondary:[2066,300]}}}));Me(new Qr({id:"selectNextPageSuggestion",precondition:ue.and(Vt.Visible,ue.or(Vt.MultipleSuggestions,Vt.HasFocusedSuggestion.negate())),handler:o=>o.selectNextPageSuggestion(),kbOpts:{weight:Il,kbExpr:W.textInputFocus,primary:12,secondary:[2060]}}));Me(new Qr({id:"selectLastSuggestion",precondition:ue.and(Vt.Visible,ue.or(Vt.MultipleSuggestions,Vt.HasFocusedSuggestion.negate())),handler:o=>o.selectLastSuggestion()}));Me(new Qr({id:"selectPrevSuggestion",precondition:ue.and(Vt.Visible,ue.or(Vt.MultipleSuggestions,Vt.HasFocusedSuggestion.negate())),handler:o=>o.selectPrevSuggestion(),kbOpts:{weight:Il,kbExpr:W.textInputFocus,primary:16,secondary:[2064],mac:{primary:16,secondary:[2064,302]}}}));Me(new Qr({id:"selectPrevPageSuggestion",precondition:ue.and(Vt.Visible,ue.or(Vt.MultipleSuggestions,Vt.HasFocusedSuggestion.negate())),handler:o=>o.selectPrevPageSuggestion(),kbOpts:{weight:Il,kbExpr:W.textInputFocus,primary:11,secondary:[2059]}}));Me(new Qr({id:"selectFirstSuggestion",precondition:ue.and(Vt.Visible,ue.or(Vt.MultipleSuggestions,Vt.HasFocusedSuggestion.negate())),handler:o=>o.selectFirstSuggestion()}));Me(new Qr({id:"focusSuggestion",precondition:ue.and(Vt.Visible,Vt.HasFocusedSuggestion.negate()),handler:o=>o.focusSuggestion(),kbOpts:{weight:Il,kbExpr:W.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[2087]}}}));Me(new Qr({id:"focusAndAcceptSuggestion",precondition:ue.and(Vt.Visible,Vt.HasFocusedSuggestion.negate()),handler:o=>{o.focusSuggestion(),o.acceptSelectedSuggestion(!0,!1)}}));Me(new Qr({id:"toggleSuggestionDetails",precondition:ue.and(Vt.Visible,Vt.HasFocusedSuggestion),handler:o=>o.toggleSuggestionDetails(),kbOpts:{weight:Il,kbExpr:W.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[2087]}},menuOpts:[{menuId:im,group:"right",order:1,when:ue.and(Vt.DetailsVisible,Vt.CanResolve),title:v("detail.more","show less")},{menuId:im,group:"right",order:1,when:ue.and(Vt.DetailsVisible.toNegated(),Vt.CanResolve),title:v("detail.less","show more")}]}));Me(new Qr({id:"toggleExplainMode",precondition:Vt.Visible,handler:o=>o.toggleExplainMode(),kbOpts:{weight:100,primary:2138}}));Me(new Qr({id:"toggleSuggestionFocus",precondition:Vt.Visible,handler:o=>o.toggleSuggestionFocus(),kbOpts:{weight:Il,kbExpr:W.textInputFocus,primary:2570,mac:{primary:778}}}));Me(new Qr({id:"insertBestCompletion",precondition:ue.and(W.textInputFocus,ue.equals("config.editor.tabCompletion","on"),pD.AtEnd,Vt.Visible.toNegated(),Xv.OtherSuggestions.toNegated(),bo.InSnippetMode.toNegated()),handler:(o,e)=>{o.triggerSuggestAndAcceptBest(Br(e)?{fallback:"tab",...e}:{fallback:"tab"})},kbOpts:{weight:Il,primary:2}}));Me(new Qr({id:"insertNextSuggestion",precondition:ue.and(W.textInputFocus,ue.equals("config.editor.tabCompletion","on"),Xv.OtherSuggestions,Vt.Visible.toNegated(),bo.InSnippetMode.toNegated()),handler:o=>o.acceptNextSuggestion(),kbOpts:{weight:Il,kbExpr:W.textInputFocus,primary:2}}));Me(new Qr({id:"insertPrevSuggestion",precondition:ue.and(W.textInputFocus,ue.equals("config.editor.tabCompletion","on"),Xv.OtherSuggestions,Vt.Visible.toNegated(),bo.InSnippetMode.toNegated()),handler:o=>o.acceptPrevSuggestion(),kbOpts:{weight:Il,kbExpr:W.textInputFocus,primary:1026}}));Ce(class extends Ke{constructor(){super({id:"editor.action.resetSuggestSize",label:v("suggest.reset.label","Reset Suggest Widget Size"),alias:"Reset Suggest Widget Size",precondition:void 0})}run(o,e){var t;(t=Uc.get(e))===null||t===void 0||t.resetWidgetSize()}});class b6e extends J{get selectedItem(){return this._selectedItem}constructor(e,t,i,n){super(),this.editor=e,this.suggestControllerPreselector=t,this.checkModelVersion=i,this.onWillAccept=n,this.isSuggestWidgetVisible=!1,this.isShiftKeyPressed=!1,this._isActive=!1,this._currentSuggestItemInfo=void 0,this._selectedItem=ni(this,void 0),this._register(e.onKeyDown(r=>{r.shiftKey&&!this.isShiftKeyPressed&&(this.isShiftKeyPressed=!0,this.update(this._isActive))})),this._register(e.onKeyUp(r=>{r.shiftKey&&this.isShiftKeyPressed&&(this.isShiftKeyPressed=!1,this.update(this._isActive))}));const s=Uc.get(this.editor);if(s){this._register(s.registerSelector({priority:100,select:(l,c,u)=>{qi(S=>this.checkModelVersion(S));const f=this.editor.getModel();if(!f)return-1;const g=this.suggestControllerPreselector(),p=g?Lv(g,f):void 0;if(!p)return-1;const _=Z.lift(c),b=u.map((S,L)=>{const x=HL.fromSuggestion(s,f,_,S,this.isShiftKeyPressed),D=Lv(x.toSingleTextEdit(),f),E=$le(p,D);return{index:L,valid:E,prefixLength:D.text.length,suggestItem:S}}).filter(S=>S&&S.valid&&S.prefixLength>0),y=aH(b,ac(S=>S.prefixLength,Uf));return y?y.index:-1}}));let r=!1;const a=()=>{r||(r=!0,this._register(s.widget.value.onDidShow(()=>{this.isSuggestWidgetVisible=!0,this.update(!0)})),this._register(s.widget.value.onDidHide(()=>{this.isSuggestWidgetVisible=!1,this.update(!1)})),this._register(s.widget.value.onDidFocus(()=>{this.isSuggestWidgetVisible=!0,this.update(!0)})))};this._register(Ie.once(s.model.onDidTrigger)(l=>{a()})),this._register(s.onWillInsertSuggestItem(l=>{const c=this.editor.getPosition(),u=this.editor.getModel();if(!c||!u)return;const f=HL.fromSuggestion(s,u,c,l.item,this.isShiftKeyPressed);this.onWillAccept(f)}))}this.update(this._isActive)}update(e){const t=this.getSuggestItemInfo();(this._isActive!==e||!C6e(this._currentSuggestItemInfo,t))&&(this._isActive=e,this._currentSuggestItemInfo=t,qi(i=>{this.checkModelVersion(i),this._selectedItem.set(this._isActive?this._currentSuggestItemInfo:void 0,i)}))}getSuggestItemInfo(){const e=Uc.get(this.editor);if(!e||!this.isSuggestWidgetVisible)return;const t=e.widget.value.getFocusedItem(),i=this.editor.getPosition(),n=this.editor.getModel();if(!(!t||!i||!n))return HL.fromSuggestion(e,n,i,t.item,this.isShiftKeyPressed)}stopForceRenderingAbove(){const e=Uc.get(this.editor);e==null||e.stopForceRenderingAbove()}forceRenderingAbove(){const e=Uc.get(this.editor);e==null||e.forceRenderingAbove()}}class HL{static fromSuggestion(e,t,i,n,s){let{insertText:r}=n.completion,a=!1;if(n.completion.insertTextRules&4){const c=new Uv().parse(r);c.children.length<100&&QM.adjustWhitespace(t,i,!0,c),r=c.toString(),a=!0}const l=e.getOverwriteInfo(n,s);return new HL(A.fromPositions(i.delta(0,-l.overwriteBefore),i.delta(0,Math.max(l.overwriteAfter,0))),r,n.completion.kind,a)}constructor(e,t,i,n){this.range=e,this.insertText=t,this.completionItemKind=i,this.isSnippetText=n}equals(e){return this.range.equalsRange(e.range)&&this.insertText===e.insertText&&this.completionItemKind===e.completionItemKind&&this.isSnippetText===e.isSnippetText}toSelectedSuggestionInfo(){return new lie(this.range,this.insertText,this.completionItemKind,this.isSnippetText)}toSingleTextEdit(){return new og(this.range,this.insertText)}}function C6e(o,e){return o===e?!0:!o||!e?!1:o.equals(e)}var w6e=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},sp=function(o,e){return function(t,i){e(t,i,o)}},T6;let Tl=T6=class extends J{static get(e){return e.getContribution(T6.ID)}constructor(e,t,i,n,s,r,a,l,c){super(),this.editor=e,this._instantiationService=t,this._contextKeyService=i,this._configurationService=n,this._commandService=s,this._debounceService=r,this._languageFeaturesService=a,this._accessibilitySignalService=l,this._keybindingService=c,this.model=this._register(Bx("inlineCompletionModel",void 0)),this._textModelVersionId=ni(this,-1),this._positions=ni(this,[new Z(1,1)]),this._suggestWidgetAdaptor=this._register(new b6e(this.editor,()=>{var p,_;return(_=(p=this.model.get())===null||p===void 0?void 0:p.selectedInlineCompletion.get())===null||_===void 0?void 0:_.toSingleTextEdit(void 0)},p=>this.updateObservables(p,ul.Other),p=>{qi(_=>{var b;this.updateObservables(_,ul.Other),(b=this.model.get())===null||b===void 0||b.handleSuggestAccepted(p)})})),this._enabled=Gi(this.editor.onDidChangeConfiguration,()=>this.editor.getOption(62).enabled),this._fontFamily=Gi(this.editor.onDidChangeConfiguration,()=>this.editor.getOption(62).fontFamily),this._ghostTexts=Dt(this,p=>{var _;const b=this.model.read(p);return(_=b==null?void 0:b.ghostTexts.read(p))!==null&&_!==void 0?_:[]}),this._stablizedGhostTexts=y6e(this._ghostTexts,this._store),this._ghostTextWidgets=vAe(this,this._stablizedGhostTexts,(p,_)=>_.add(this._instantiationService.createInstance(w6,this.editor,{ghostText:p,minReservedLineCount:Ad(0),targetTextModel:this.model.map(b=>b==null?void 0:b.textModel)}))).recomputeInitiallyAndOnChange(this._store),this._debounceValue=this._debounceService.for(this._languageFeaturesService.inlineCompletionsProvider,"InlineCompletionsDebounce",{min:50,max:50}),this._playAccessibilitySignal=dP(this),this._isReadonly=Gi(this.editor.onDidChangeConfiguration,()=>this.editor.getOption(91)),this._textModel=Gi(this.editor.onDidChangeModel,()=>this.editor.getModel()),this._textModelIfWritable=Dt(p=>this._isReadonly.read(p)?void 0:this._textModel.read(p)),this._register(new lo(this._contextKeyService,this.model)),this._register(zt(p=>{const _=this._textModelIfWritable.read(p);qi(b=>{if(this.model.set(void 0,b),this.updateObservables(b,ul.Other),_){const y=t.createInstance(S6,_,this._suggestWidgetAdaptor.selectedItem,this._textModelVersionId,this._positions,this._debounceValue,Gi(e.onDidChangeConfiguration,()=>e.getOption(118).preview),Gi(e.onDidChangeConfiguration,()=>e.getOption(118).previewMode),Gi(e.onDidChangeConfiguration,()=>e.getOption(62).mode),this._enabled);this.model.set(y,b)}})}));const u=this._register(Bie());this._register(zt(p=>{const _=this._fontFamily.read(p);u.setStyle(_===""||_==="default"?"":`
.monaco-editor .ghost-text-decoration,
.monaco-editor .ghost-text-decoration-preview,
.monaco-editor .ghost-text {
	font-family: ${_};
}`)}));const f=p=>{var _;return p.isUndoing?ul.Undo:p.isRedoing?ul.Redo:!((_=this.model.get())===null||_===void 0)&&_.isAcceptingPartially?ul.AcceptWord:ul.Other};this._register(e.onDidChangeModelContent(p=>qi(_=>this.updateObservables(_,f(p))))),this._register(e.onDidChangeCursorPosition(p=>qi(_=>{var b;this.updateObservables(_,ul.Other),(p.reason===3||p.source==="api")&&((b=this.model.get())===null||b===void 0||b.stop(_))}))),this._register(e.onDidType(()=>qi(p=>{var _;this.updateObservables(p,ul.Other),this._enabled.get()&&((_=this.model.get())===null||_===void 0||_.trigger(p))}))),this._register(this._commandService.onDidExecuteCommand(p=>{new Set([RC.Tab.id,RC.DeleteLeft.id,RC.DeleteRight.id,ple,"acceptSelectedSuggestion"]).has(p.commandId)&&e.hasTextFocus()&&this._enabled.get()&&qi(b=>{var y;(y=this.model.get())===null||y===void 0||y.trigger(b)})})),this._register(this.editor.onDidBlurEditorWidget(()=>{this._contextKeyService.getContextKeyValue("accessibleViewIsShown")||this._configurationService.getValue("editor.inlineSuggest.keepOnBlur")||e.getOption(62).keepOnBlur||km.dropDownVisible||qi(p=>{var _;(_=this.model.get())===null||_===void 0||_.stop(p)})})),this._register(zt(p=>{var _;const b=(_=this.model.read(p))===null||_===void 0?void 0:_.state.read(p);b!=null&&b.suggestItem?b.primaryGhostText.lineCount>=2&&this._suggestWidgetAdaptor.forceRenderingAbove():this._suggestWidgetAdaptor.stopForceRenderingAbove()})),this._register(lt(()=>{this._suggestWidgetAdaptor.stopForceRenderingAbove()}));let g;this._register(nk({handleChange:(p,_)=>(p.didChange(this._playAccessibilitySignal)&&(g=void 0),!0)},async p=>{this._playAccessibilitySignal.read(p);const _=this.model.read(p),b=_==null?void 0:_.state.read(p);if(!_||!b||!b.inlineCompletion){g=void 0;return}if(b.inlineCompletion.semanticId!==g){g=b.inlineCompletion.semanticId;const y=_.textModel.getLineContent(b.primaryGhostText.lineNumber);this._accessibilitySignalService.playSignal(Ot.inlineSuggestion).then(()=>{this.editor.getOption(8)&&this.provideScreenReaderUpdate(b.primaryGhostText.renderForScreenReader(y))})}})),this._register(new o6(this.editor,this.model,this._instantiationService)),this._register(this._configurationService.onDidChangeConfiguration(p=>{p.affectsConfiguration("accessibility.verbosity.inlineCompletions")&&this.editor.updateOptions({inlineCompletionsAccessibilityVerbose:this._configurationService.getValue("accessibility.verbosity.inlineCompletions")})})),this.editor.updateOptions({inlineCompletionsAccessibilityVerbose:this._configurationService.getValue("accessibility.verbosity.inlineCompletions")})}playAccessibilitySignal(e){this._playAccessibilitySignal.trigger(e)}provideScreenReaderUpdate(e){const t=this._contextKeyService.getContextKeyValue("accessibleViewIsShown"),i=this._keybindingService.lookupKeybinding("editor.action.accessibleView");let n;!t&&i&&this.editor.getOption(149)&&(n=v("showAccessibleViewHint","Inspect this in the accessible view ({0})",i.getAriaLabel())),_a(n?e+", "+n:e)}updateObservables(e,t){var i,n,s;const r=this.editor.getModel();this._textModelVersionId.set((i=r==null?void 0:r.getVersionId())!==null&&i!==void 0?i:-1,e,t),this._positions.set((s=(n=this.editor.getSelections())===null||n===void 0?void 0:n.map(a=>a.getPosition()))!==null&&s!==void 0?s:[new Z(1,1)],e)}shouldShowHoverAt(e){var t;const i=(t=this.model.get())===null||t===void 0?void 0:t.primaryGhostText.get();return i?i.parts.some(n=>e.containsPosition(new Z(i.lineNumber,n.column))):!1}shouldShowHoverAtViewZone(e){var t,i;return(i=(t=this._ghostTextWidgets.get()[0])===null||t===void 0?void 0:t.ownsViewZone(e))!==null&&i!==void 0?i:!1}};Tl.ID="editor.contrib.inlineCompletionsController";Tl=T6=w6e([sp(1,ct),sp(2,bt),sp(3,$t),sp(4,Un),sp(5,vc),sp(6,Ze),sp(7,Vm),sp(8,Bi)],Tl);function y6e(o,e){const t=ni("result",[]),i=[];return e.add(zt(n=>{const s=o.read(n);qi(r=>{if(s.length!==i.length){i.length=s.length;for(let a=0;a<i.length;a++)i[a]||(i[a]=ni("item",s[a]));t.set([...i],r)}i.forEach((a,l)=>a.set(s[l],r))})})),t}class sO extends Ke{constructor(){super({id:sO.ID,label:v("action.inlineSuggest.showNext","Show Next Inline Suggestion"),alias:"Show Next Inline Suggestion",precondition:ue.and(W.writable,lo.inlineSuggestionVisible),kbOpts:{weight:100,primary:606}})}async run(e,t){var i;const n=Tl.get(t);(i=n==null?void 0:n.model.get())===null||i===void 0||i.next()}}sO.ID=_le;class oO extends Ke{constructor(){super({id:oO.ID,label:v("action.inlineSuggest.showPrevious","Show Previous Inline Suggestion"),alias:"Show Previous Inline Suggestion",precondition:ue.and(W.writable,lo.inlineSuggestionVisible),kbOpts:{weight:100,primary:604}})}async run(e,t){var i;const n=Tl.get(t);(i=n==null?void 0:n.model.get())===null||i===void 0||i.previous()}}oO.ID=mle;class S6e extends Ke{constructor(){super({id:"editor.action.inlineSuggest.trigger",label:v("action.inlineSuggest.trigger","Trigger Inline Suggestion"),alias:"Trigger Inline Suggestion",precondition:W.writable})}async run(e,t){const i=Tl.get(t);await hAe(async n=>{var s;await((s=i==null?void 0:i.model.get())===null||s===void 0?void 0:s.triggerExplicitly(n)),i==null||i.playAccessibilitySignal(n)})}}class L6e extends Ke{constructor(){super({id:"editor.action.inlineSuggest.acceptNextWord",label:v("action.inlineSuggest.acceptNextWord","Accept Next Word Of Inline Suggestion"),alias:"Accept Next Word Of Inline Suggestion",precondition:ue.and(W.writable,lo.inlineSuggestionVisible),kbOpts:{weight:101,primary:2065,kbExpr:ue.and(W.writable,lo.inlineSuggestionVisible)},menuOpts:[{menuId:P.InlineSuggestionToolbar,title:v("acceptWord","Accept Word"),group:"primary",order:2}]})}async run(e,t){var i;const n=Tl.get(t);await((i=n==null?void 0:n.model.get())===null||i===void 0?void 0:i.acceptNextWord(n.editor))}}class x6e extends Ke{constructor(){super({id:"editor.action.inlineSuggest.acceptNextLine",label:v("action.inlineSuggest.acceptNextLine","Accept Next Line Of Inline Suggestion"),alias:"Accept Next Line Of Inline Suggestion",precondition:ue.and(W.writable,lo.inlineSuggestionVisible),kbOpts:{weight:101},menuOpts:[{menuId:P.InlineSuggestionToolbar,title:v("acceptLine","Accept Line"),group:"secondary",order:2}]})}async run(e,t){var i;const n=Tl.get(t);await((i=n==null?void 0:n.model.get())===null||i===void 0?void 0:i.acceptNextLine(n.editor))}}class D6e extends Ke{constructor(){super({id:ple,label:v("action.inlineSuggest.accept","Accept Inline Suggestion"),alias:"Accept Inline Suggestion",precondition:lo.inlineSuggestionVisible,menuOpts:[{menuId:P.InlineSuggestionToolbar,title:v("accept","Accept"),group:"primary",order:1}],kbOpts:{primary:2,weight:200,kbExpr:ue.and(lo.inlineSuggestionVisible,W.tabMovesFocus.toNegated(),lo.inlineSuggestionHasIndentationLessThanTabSize,Vt.Visible.toNegated(),W.hoverFocused.toNegated())}})}async run(e,t){var i;const n=Tl.get(t);n&&((i=n.model.get())===null||i===void 0||i.accept(n.editor),n.editor.focus())}}class rO extends Ke{constructor(){super({id:rO.ID,label:v("action.inlineSuggest.hide","Hide Inline Suggestion"),alias:"Hide Inline Suggestion",precondition:lo.inlineSuggestionVisible,kbOpts:{weight:100,primary:9}})}async run(e,t){const i=Tl.get(t);qi(n=>{var s;(s=i==null?void 0:i.model.get())===null||s===void 0||s.stop(n)})}}rO.ID="editor.action.inlineSuggest.hide";class aO extends Gr{constructor(){super({id:aO.ID,title:v("action.inlineSuggest.alwaysShowToolbar","Always Show Toolbar"),f1:!1,precondition:void 0,menu:[{id:P.InlineSuggestionToolbar,group:"secondary",order:10}],toggled:ue.equals("config.editor.inlineSuggest.showToolbar","always")})}async run(e,t){const i=e.get($t),s=i.getValue("editor.inlineSuggest.showToolbar")==="always"?"onHover":"always";i.updateValue("editor.inlineSuggest.showToolbar",s)}}aO.ID="editor.action.inlineSuggest.toggleAlwaysShowToolbar";var k6e=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},PS=function(o,e){return function(t,i){e(t,i,o)}};class E6e{constructor(e,t,i){this.owner=e,this.range=t,this.controller=i}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}let N6=class{constructor(e,t,i,n,s,r){this._editor=e,this._languageService=t,this._openerService=i,this.accessibilityService=n,this._instantiationService=s,this._telemetryService=r,this.hoverOrdinal=4}suggestHoverAnchor(e){const t=Tl.get(this._editor);if(!t)return null;const i=e.target;if(i.type===8){const n=i.detail;if(t.shouldShowHoverAtViewZone(n.viewZoneId))return new wv(1e3,this,A.fromPositions(this._editor.getModel().validatePosition(n.positionBefore||n.position)),e.event.posx,e.event.posy,!1)}return i.type===7&&t.shouldShowHoverAt(i.range)?new wv(1e3,this,i.range,e.event.posx,e.event.posy,!1):i.type===6&&i.detail.mightBeForeignElement&&t.shouldShowHoverAt(i.range)?new wv(1e3,this,i.range,e.event.posx,e.event.posy,!1):null}computeSync(e,t){if(this._editor.getOption(62).showToolbar!=="onHover")return[];const i=Tl.get(this._editor);return i&&i.shouldShowHoverAt(e.range)?[new E6e(this,e.range,i)]:[]}renderHoverParts(e,t){const i=new he,n=t[0];this._telemetryService.publicLog2("inlineCompletionHover.shown"),this.accessibilityService.isScreenReaderOptimized()&&!this._editor.getOption(8)&&this.renderScreenReaderText(e,n,i);const s=n.controller.model.get(),r=this._instantiationService.createInstance(km,this._editor,!1,Ad(null),s.selectedInlineCompletionIndex,s.inlineCompletionsCount,s.selectedInlineCompletion.map(a=>{var l;return(l=a==null?void 0:a.inlineCompletion.source.inlineCompletions.commands)!==null&&l!==void 0?l:[]}));return e.fragment.appendChild(r.getDomNode()),s.triggerExplicitly(),i.add(r),i}renderScreenReaderText(e,t,i){const n=ye,s=n("div.hover-row.markdown-hover"),r=ge(s,n("div.hover-contents",{"aria-live":"assertive"})),a=i.add(new mh({editor:this._editor},this._languageService,this._openerService)),l=c=>{i.add(a.onDidRenderAsync(()=>{r.className="hover-contents code-hover-contents",e.onContentsChanged()}));const u=v("inlineSuggestionFollows","Suggestion:"),f=i.add(a.render(new qo().appendText(u).appendCodeblock("text",c)));r.replaceChildren(f.element)};i.add(zt(c=>{var u;const f=(u=t.controller.model.read(c))===null||u===void 0?void 0:u.primaryGhostText.read(c);if(f){const g=this._editor.getModel().getLineContent(f.lineNumber);l(f.renderForScreenReader(g))}else _o(r)})),e.fragment.appendChild(s)}};N6=k6e([PS(1,xn),PS(2,wa),PS(3,mc),PS(4,ct),PS(5,pr)],N6);pi(Tl.ID,Tl,3);Ce(S6e);Ce(sO);Ce(oO);Ce(L6e);Ce(x6e);Ce(D6e);Ce(rO);en(aO);zm.register(N6);function Fa(o,e){let t=0;for(let i=0;i<o.length;i++)o.charAt(i)==="	"?t+=e:t++;return t}function zL(o,e,t){o=o<0?0:o;let i="";if(!t){const n=Math.floor(o/e);o=o%e;for(let s=0;s<n;s++)i+="	"}for(let n=0;n<o;n++)i+=" ";return i}function Gle(o,e,t,i,n){if(o.getLineCount()===1&&o.getLineMaxColumn(1)===1)return[];const s=e.getLanguageConfiguration(o.getLanguageId()).indentationRules;if(!s)return[];for(i=Math.min(i,o.getLineCount());t<=i&&s.unIndentedLinePattern;){const y=o.getLineContent(t);if(!s.unIndentedLinePattern.test(y))break;t++}if(t>i-1)return[];const{tabSize:r,indentSize:a,insertSpaces:l}=o.getOptions(),c=(y,S)=>(S=S||1,tc.shiftIndent(y,y.length+S,r,a,l)),u=(y,S)=>(S=S||1,tc.unshiftIndent(y,y.length+S,r,a,l)),f=[];let g;const p=o.getLineContent(t);let _=p;g=an(p);let b=g;s.increaseIndentPattern&&s.increaseIndentPattern.test(_)?(b=c(b),g=c(g)):s.indentNextLinePattern&&s.indentNextLinePattern.test(_)&&(b=c(b)),t++;for(let y=t;y<=i;y++){const S=o.getLineContent(y),L=an(S),x=b+S.substring(L.length);s.decreaseIndentPattern&&s.decreaseIndentPattern.test(x)&&(b=u(b),g=u(g)),L!==b&&f.push(On.replaceMove(new Xe(y,1,y,L.length+1),DH(b,a,l))),!(s.unIndentedLinePattern&&s.unIndentedLinePattern.test(S))&&(s.increaseIndentPattern&&s.increaseIndentPattern.test(x)?(g=c(g),b=g):s.indentNextLinePattern&&s.indentNextLinePattern.test(x)?b=c(b):b=g)}return f}var I6e=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},T6e=function(o,e){return function(t,i){e(t,i,o)}};class lO extends Ke{constructor(){super({id:lO.ID,label:v("indentationToSpaces","Convert Indentation to Spaces"),alias:"Convert Indentation to Spaces",precondition:W.writable})}run(e,t){const i=t.getModel();if(!i)return;const n=i.getOptions(),s=t.getSelection();if(!s)return;const r=new A6e(s,n.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[r]),t.pushUndoStop(),i.updateOptions({insertSpaces:!0})}}lO.ID="editor.action.indentationToSpaces";class cO extends Ke{constructor(){super({id:cO.ID,label:v("indentationToTabs","Convert Indentation to Tabs"),alias:"Convert Indentation to Tabs",precondition:W.writable})}run(e,t){const i=t.getModel();if(!i)return;const n=i.getOptions(),s=t.getSelection();if(!s)return;const r=new P6e(s,n.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[r]),t.pushUndoStop(),i.updateOptions({insertSpaces:!1})}}cO.ID="editor.action.indentationToTabs";class IU extends Ke{constructor(e,t,i){super(i),this.insertSpaces=e,this.displaySizeOnly=t}run(e,t){const i=e.get(ou),n=e.get(Fn),s=t.getModel();if(!s)return;const r=n.getCreationOptions(s.getLanguageId(),s.uri,s.isForSimpleWidget),a=s.getOptions(),l=[1,2,3,4,5,6,7,8].map(u=>({id:u.toString(),label:u.toString(),description:u===r.tabSize&&u===a.tabSize?v("configuredTabSize","Configured Tab Size"):u===r.tabSize?v("defaultTabSize","Default Tab Size"):u===a.tabSize?v("currentTabSize","Current Tab Size"):void 0})),c=Math.min(s.getOptions().tabSize-1,7);setTimeout(()=>{i.pick(l,{placeHolder:v({key:"selectTabWidth",comment:["Tab corresponds to the tab key"]},"Select Tab Size for Current File"),activeItem:l[c]}).then(u=>{if(u&&s&&!s.isDisposed()){const f=parseInt(u.label,10);this.displaySizeOnly?s.updateOptions({tabSize:f}):s.updateOptions({tabSize:f,indentSize:f,insertSpaces:this.insertSpaces})}})},50)}}class dO extends IU{constructor(){super(!1,!1,{id:dO.ID,label:v("indentUsingTabs","Indent Using Tabs"),alias:"Indent Using Tabs",precondition:void 0})}}dO.ID="editor.action.indentUsingTabs";class uO extends IU{constructor(){super(!0,!1,{id:uO.ID,label:v("indentUsingSpaces","Indent Using Spaces"),alias:"Indent Using Spaces",precondition:void 0})}}uO.ID="editor.action.indentUsingSpaces";class hO extends IU{constructor(){super(!0,!0,{id:hO.ID,label:v("changeTabDisplaySize","Change Tab Display Size"),alias:"Change Tab Display Size",precondition:void 0})}}hO.ID="editor.action.changeTabDisplaySize";class fO extends Ke{constructor(){super({id:fO.ID,label:v("detectIndentation","Detect Indentation from Content"),alias:"Detect Indentation from Content",precondition:void 0})}run(e,t){const i=e.get(Fn),n=t.getModel();if(!n)return;const s=i.getCreationOptions(n.getLanguageId(),n.uri,n.isForSimpleWidget);n.detectIndentation(s.insertSpaces,s.tabSize)}}fO.ID="editor.action.detectIndentation";class N6e extends Ke{constructor(){super({id:"editor.action.reindentlines",label:v("editor.reindentlines","Reindent Lines"),alias:"Reindent Lines",precondition:W.writable})}run(e,t){const i=e.get(dn),n=t.getModel();if(!n)return;const s=Gle(n,i,1,n.getLineCount());s.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,s),t.pushUndoStop())}}class R6e extends Ke{constructor(){super({id:"editor.action.reindentselectedlines",label:v("editor.reindentselectedlines","Reindent Selected Lines"),alias:"Reindent Selected Lines",precondition:W.writable})}run(e,t){const i=e.get(dn),n=t.getModel();if(!n)return;const s=t.getSelections();if(s===null)return;const r=[];for(const a of s){let l=a.startLineNumber,c=a.endLineNumber;if(l!==c&&a.endColumn===1&&c--,l===1){if(l===c)continue}else l--;const u=Gle(n,i,l,c);r.push(...u)}r.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,r),t.pushUndoStop())}}class M6e{constructor(e,t){this._initialSelection=t,this._edits=[],this._selectionId=null;for(const i of e)i.range&&typeof i.text=="string"&&this._edits.push(i)}getEditOperations(e,t){for(const n of this._edits)t.addEditOperation(A.lift(n.range),n.text);let i=!1;Array.isArray(this._edits)&&this._edits.length===1&&this._initialSelection.isEmpty()&&(this._edits[0].range.startColumn===this._initialSelection.endColumn&&this._edits[0].range.startLineNumber===this._initialSelection.endLineNumber?(i=!0,this._selectionId=t.trackSelection(this._initialSelection,!0)):this._edits[0].range.endColumn===this._initialSelection.startColumn&&this._edits[0].range.endLineNumber===this._initialSelection.startLineNumber&&(i=!0,this._selectionId=t.trackSelection(this._initialSelection,!1))),i||(this._selectionId=t.trackSelection(this._initialSelection))}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}let _D=class{constructor(e,t){this.editor=e,this._languageConfigurationService=t,this.callOnDispose=new he,this.callOnModel=new he,this.callOnDispose.add(e.onDidChangeConfiguration(()=>this.update())),this.callOnDispose.add(e.onDidChangeModel(()=>this.update())),this.callOnDispose.add(e.onDidChangeModelLanguage(()=>this.update()))}update(){this.callOnModel.clear(),!(this.editor.getOption(12)<4||this.editor.getOption(55))&&this.editor.hasModel()&&this.callOnModel.add(this.editor.onDidPaste(({range:e})=>{this.trigger(e)}))}trigger(e){const t=this.editor.getSelections();if(t===null||t.length>1)return;const i=this.editor.getModel();if(!i||!i.tokenization.isCheapToTokenize(e.getStartPosition().lineNumber))return;const n=this.editor.getOption(12),{tabSize:s,indentSize:r,insertSpaces:a}=i.getOptions(),l=[],c={shiftIndent:p=>tc.shiftIndent(p,p.length+1,s,r,a),unshiftIndent:p=>tc.unshiftIndent(p,p.length+1,s,r,a)};let u=e.startLineNumber;for(;u<=e.endLineNumber;){if(this.shouldIgnoreLine(i,u)){u++;continue}break}if(u>e.endLineNumber)return;let f=i.getLineContent(u);if(!/\S/.test(f.substring(0,e.startColumn-1))){const p=vL(n,i,i.getLanguageId(),u,c,this._languageConfigurationService);if(p!==null){const _=an(f),b=Fa(p,s),y=Fa(_,s);if(b!==y){const S=zL(b,s,a);l.push({range:new A(u,1,u,_.length+1),text:S}),f=S+f.substr(_.length)}else{const S=ase(i,u,this._languageConfigurationService);if(S===0||S===8)return}}}const g=u;for(;u<e.endLineNumber;){if(!/\S/.test(i.getLineContent(u+1))){u++;continue}break}if(u!==e.endLineNumber){const _=vL(n,{tokenization:{getLineTokens:b=>i.tokenization.getLineTokens(b),getLanguageId:()=>i.getLanguageId(),getLanguageIdAtPosition:(b,y)=>i.getLanguageIdAtPosition(b,y)},getLineContent:b=>b===g?f:i.getLineContent(b)},i.getLanguageId(),u+1,c,this._languageConfigurationService);if(_!==null){const b=Fa(_,s),y=Fa(an(i.getLineContent(u+1)),s);if(b!==y){const S=b-y;for(let L=u+1;L<=e.endLineNumber;L++){const x=i.getLineContent(L),D=an(x),N=Fa(D,s)+S,M=zL(N,s,a);M!==D&&l.push({range:new A(L,1,L,D.length+1),text:M})}}}}if(l.length>0){this.editor.pushUndoStop();const p=new M6e(l,this.editor.getSelection());this.editor.executeCommand("autoIndentOnPaste",p),this.editor.pushUndoStop()}}shouldIgnoreLine(e,t){e.tokenization.forceTokenization(t);const i=e.getLineFirstNonWhitespaceColumn(t);if(i===0)return!0;const n=e.tokenization.getLineTokens(t);if(n.getCount()>0){const s=n.findTokenIndexAtOffset(i);if(s>=0&&n.getStandardTokenType(s)===1)return!0}return!1}dispose(){this.callOnDispose.dispose(),this.callOnModel.dispose()}};_D.ID="editor.contrib.autoIndentOnPaste";_D=I6e([T6e(1,dn)],_D);function Yle(o,e,t,i){if(o.getLineCount()===1&&o.getLineMaxColumn(1)===1)return;let n="";for(let r=0;r<t;r++)n+=" ";const s=new RegExp(n,"gi");for(let r=1,a=o.getLineCount();r<=a;r++){let l=o.getLineFirstNonWhitespaceColumn(r);if(l===0&&(l=o.getLineMaxColumn(r)),l===1)continue;const c=new A(r,1,r,l),u=o.getValueInRange(c),f=i?u.replace(/\t/ig,n):u.replace(s,"	");e.addEditOperation(c,f)}}class A6e{constructor(e,t){this.selection=e,this.tabSize=t,this.selectionId=null}getEditOperations(e,t){this.selectionId=t.trackSelection(this.selection),Yle(e,t,this.tabSize,!0)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}}class P6e{constructor(e,t){this.selection=e,this.tabSize=t,this.selectionId=null}getEditOperations(e,t){this.selectionId=t.trackSelection(this.selection),Yle(e,t,this.tabSize,!1)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}}pi(_D.ID,_D,2);Ce(lO);Ce(cO);Ce(dO);Ce(uO);Ce(hO);Ce(fO);Ce(N6e);Ce(R6e);class Zle{constructor(e,t){this.range=e,this.direction=t}}class TU{constructor(e,t,i){this.hint=e,this.anchor=t,this.provider=i,this._isResolved=!1}with(e){const t=new TU(this.hint,e.anchor,this.provider);return t._isResolved=this._isResolved,t._currentResolve=this._currentResolve,t}async resolve(e){if(typeof this.provider.resolveInlayHint=="function"){if(this._currentResolve)return await this._currentResolve,e.isCancellationRequested?void 0:this.resolve(e);this._isResolved||(this._currentResolve=this._doResolve(e).finally(()=>this._currentResolve=void 0)),await this._currentResolve}}async _doResolve(e){var t,i,n;try{const s=await Promise.resolve(this.provider.resolveInlayHint(this.hint,e));this.hint.tooltip=(t=s==null?void 0:s.tooltip)!==null&&t!==void 0?t:this.hint.tooltip,this.hint.label=(i=s==null?void 0:s.label)!==null&&i!==void 0?i:this.hint.label,this.hint.textEdits=(n=s==null?void 0:s.textEdits)!==null&&n!==void 0?n:this.hint.textEdits,this._isResolved=!0}catch(s){hs(s),this._isResolved=!1}}}class xv{static async create(e,t,i,n){const s=[],r=e.ordered(t).reverse().map(a=>i.map(async l=>{try{const c=await a.provideInlayHints(t,l,n);(c!=null&&c.hints.length||a.onDidChangeInlayHints)&&s.push([c??xv._emptyInlayHintList,a])}catch(c){hs(c)}}));if(await Promise.all(r.flat()),n.isCancellationRequested||t.isDisposed())throw new hg;return new xv(i,s,t)}constructor(e,t,i){this._disposables=new he,this.ranges=e,this.provider=new Set;const n=[];for(const[s,r]of t){this._disposables.add(s),this.provider.add(r);for(const a of s.hints){const l=i.validatePosition(a.position);let c="before";const u=xv._getRangeAtPosition(i,l);let f;u.getStartPosition().isBefore(l)?(f=A.fromPositions(u.getStartPosition(),l),c="after"):(f=A.fromPositions(l,u.getEndPosition()),c="before"),n.push(new TU(a,new Zle(f,c),r))}}this.items=n.sort((s,r)=>Z.compare(s.hint.position,r.hint.position))}dispose(){this._disposables.dispose()}static _getRangeAtPosition(e,t){const i=t.lineNumber,n=e.getWordAtPosition(t);if(n)return new A(i,n.startColumn,i,n.endColumn);e.tokenization.tokenizeIfCheap(i);const s=e.tokenization.getLineTokens(i),r=t.column-1,a=s.findTokenIndexAtOffset(r);let l=s.getStartOffset(a),c=s.getEndOffset(a);return c-l===1&&(l===r&&a>1?(l=s.getStartOffset(a-1),c=s.getEndOffset(a-1)):c===r&&a<s.getCount()-1&&(l=s.getStartOffset(a+1),c=s.getEndOffset(a+1))),new A(i,l+1,i,c+1)}}xv._emptyInlayHintList=Object.freeze({dispose(){},hints:[]});function O6e(o){return gt.from({scheme:Pt.command,path:o.id,query:o.arguments&&encodeURIComponent(JSON.stringify(o.arguments))}).toString()}async function F6e(o,e,t,i){var n;const s=o.get(Ca),r=o.get(Ya),a=o.get(Un),l=o.get(ct),c=o.get(ys);if(await i.item.resolve(Yt.None),!i.part.location)return;const u=i.part.location,f=[],g=new Set(Ys.getMenuItems(P.EditorContext).map(_=>X0(_)?_.command.id:OP()));for(const _ of hr.all())g.has(_.desc.id)&&f.push(new za(_.desc.id,Dl.label(_.desc,{renderShortTitle:!0}),void 0,!0,async()=>{const b=await s.createModelReference(u.uri);try{const y=new A1(b.object.textEditorModel,A.getStartPosition(u.range)),S=i.item.anchor.range;await l.invokeFunction(_.runEditorCommand.bind(_),e,y,S)}finally{b.dispose()}}));if(i.part.command){const{command:_}=i.part;f.push(new Os),f.push(new za(_.id,_.title,void 0,!0,async()=>{var b;try{await a.executeCommand(_.id,...(b=_.arguments)!==null&&b!==void 0?b:[])}catch(y){c.notify({severity:ZA.Error,source:i.item.provider.displayName,message:y})}}))}const p=e.getOption(127);r.showContextMenu({domForShadowRoot:p&&(n=e.getDomNode())!==null&&n!==void 0?n:void 0,getAnchor:()=>{const _=ws(t);return{x:_.left,y:_.top+_.height+8}},getActions:()=>f,onHide:()=>{e.focus()},autoSelectFirstItem:!0})}async function Qle(o,e,t,i){const s=await o.get(Ca).createModelReference(i.uri);await t.invokeWithinContext(async r=>{const a=e.hasSideBySideModifier,l=r.get(bt),c=va.inPeekEditor.getValue(l),u=!a&&t.getOption(88)&&!c;return new bk({openToSide:a,openInPeek:u,muteMessage:!0},{title:{value:"",original:""},id:"",precondition:void 0}).run(r,new A1(s.object.textEditorModel,A.getStartPosition(i.range)),A.lift(i.range))}),s.dispose()}var B6e=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},F0=function(o,e){return function(t,i){e(t,i,o)}},q0;class JM{constructor(){this._entries=new Dh(50)}get(e){const t=JM._key(e);return this._entries.get(t)}set(e,t){const i=JM._key(e);this._entries.set(i,t)}static _key(e){return`${e.uri.toString()}/${e.getVersionId()}`}}const Xle=Zt("IInlayHintsCache");oi(Xle,JM,1);class R6{constructor(e,t){this.item=e,this.index=t}get part(){const e=this.item.hint.label;return typeof e=="string"?{label:e}:e[this.index]}}class W6e{constructor(e,t){this.part=e,this.hasTriggerModifier=t}}let Im=q0=class{static get(e){var t;return(t=e.getContribution(q0.ID))!==null&&t!==void 0?t:void 0}constructor(e,t,i,n,s,r,a){this._editor=e,this._languageFeaturesService=t,this._inlayHintsCache=n,this._commandService=s,this._notificationService=r,this._instaService=a,this._disposables=new he,this._sessionDisposables=new he,this._decorationsMetadata=new Map,this._ruleFactory=new $D(this._editor),this._activeRenderMode=0,this._debounceInfo=i.for(t.inlayHintsProvider,"InlayHint",{min:25}),this._disposables.add(t.inlayHintsProvider.onDidChange(()=>this._update())),this._disposables.add(e.onDidChangeModel(()=>this._update())),this._disposables.add(e.onDidChangeModelLanguage(()=>this._update())),this._disposables.add(e.onDidChangeConfiguration(l=>{l.hasChanged(141)&&this._update()})),this._update()}dispose(){this._sessionDisposables.dispose(),this._removeAllDecorations(),this._disposables.dispose()}_update(){this._sessionDisposables.clear(),this._removeAllDecorations();const e=this._editor.getOption(141);if(e.enabled==="off")return;const t=this._editor.getModel();if(!t||!this._languageFeaturesService.inlayHintsProvider.has(t))return;if(e.enabled==="on")this._activeRenderMode=0;else{let a,l;e.enabled==="onUnlessPressed"?(a=0,l=1):(a=1,l=0),this._activeRenderMode=a,this._sessionDisposables.add(If.getInstance().event(c=>{if(!this._editor.hasModel())return;const u=c.altKey&&c.ctrlKey&&!(c.shiftKey||c.metaKey)?l:a;if(u!==this._activeRenderMode){this._activeRenderMode=u;const f=this._editor.getModel(),g=this._copyInlayHintsWithCurrentAnchor(f);this._updateHintsDecorators([f.getFullModelRange()],g),r.schedule(0)}}))}const i=this._inlayHintsCache.get(t);i&&this._updateHintsDecorators([t.getFullModelRange()],i),this._sessionDisposables.add(lt(()=>{t.isDisposed()||this._cacheHintsForFastRestore(t)}));let n;const s=new Set,r=new Ui(async()=>{const a=Date.now();n==null||n.dispose(!0),n=new os;const l=t.onWillDispose(()=>n==null?void 0:n.cancel());try{const c=n.token,u=await xv.create(this._languageFeaturesService.inlayHintsProvider,t,this._getHintsRanges(),c);if(r.delay=this._debounceInfo.update(t,Date.now()-a),c.isCancellationRequested){u.dispose();return}for(const f of u.provider)typeof f.onDidChangeInlayHints=="function"&&!s.has(f)&&(s.add(f),this._sessionDisposables.add(f.onDidChangeInlayHints(()=>{r.isScheduled()||r.schedule()})));this._sessionDisposables.add(u),this._updateHintsDecorators(u.ranges,u.items),this._cacheHintsForFastRestore(t)}catch(c){Nt(c)}finally{n.dispose(),l.dispose()}},this._debounceInfo.get(t));this._sessionDisposables.add(r),this._sessionDisposables.add(lt(()=>n==null?void 0:n.dispose(!0))),r.schedule(0),this._sessionDisposables.add(this._editor.onDidScrollChange(a=>{(a.scrollTopChanged||!r.isScheduled())&&r.schedule()})),this._sessionDisposables.add(this._editor.onDidChangeModelContent(a=>{n==null||n.cancel();const l=Math.max(r.delay,1250);r.schedule(l)})),this._sessionDisposables.add(this._installDblClickGesture(()=>r.schedule(0))),this._sessionDisposables.add(this._installLinkGesture()),this._sessionDisposables.add(this._installContextMenu())}_installLinkGesture(){const e=new he,t=e.add(new WP(this._editor)),i=new he;return e.add(i),e.add(t.onMouseMoveOrRelevantKeyDown(n=>{const[s]=n,r=this._getInlayHintLabelPart(s),a=this._editor.getModel();if(!r||!a){i.clear();return}const l=new os;i.add(lt(()=>l.dispose(!0))),r.item.resolve(l.token),this._activeInlayHintPart=r.part.command||r.part.location?new W6e(r,s.hasTriggerModifier):void 0;const c=a.validatePosition(r.item.hint.position).lineNumber,u=new A(c,1,c,a.getLineMaxColumn(c)),f=this._getInlineHintsForRange(u);this._updateHintsDecorators([u],f),i.add(lt(()=>{this._activeInlayHintPart=void 0,this._updateHintsDecorators([u],f)}))})),e.add(t.onCancel(()=>i.clear())),e.add(t.onExecute(async n=>{const s=this._getInlayHintLabelPart(n);if(s){const r=s.part;r.location?this._instaService.invokeFunction(Qle,n,this._editor,r.location):n7.is(r.command)&&await this._invokeCommand(r.command,s.item)}})),e}_getInlineHintsForRange(e){const t=new Set;for(const i of this._decorationsMetadata.values())e.containsRange(i.item.anchor.range)&&t.add(i.item);return Array.from(t)}_installDblClickGesture(e){return this._editor.onMouseUp(async t=>{if(t.event.detail!==2)return;const i=this._getInlayHintLabelPart(t);if(i&&(t.event.preventDefault(),await i.item.resolve(Yt.None),Yo(i.item.hint.textEdits))){const n=i.item.hint.textEdits.map(s=>On.replace(A.lift(s.range),s.text));this._editor.executeEdits("inlayHint.default",n),e()}})}_installContextMenu(){return this._editor.onContextMenu(async e=>{if(!(e.event.target instanceof HTMLElement))return;const t=this._getInlayHintLabelPart(e);t&&await this._instaService.invokeFunction(F6e,this._editor,e.event.target,t)})}_getInlayHintLabelPart(e){var t;if(e.target.type!==6)return;const i=(t=e.target.detail.injectedText)===null||t===void 0?void 0:t.options;if(i instanceof vm&&(i==null?void 0:i.attachedData)instanceof R6)return i.attachedData}async _invokeCommand(e,t){var i;try{await this._commandService.executeCommand(e.id,...(i=e.arguments)!==null&&i!==void 0?i:[])}catch(n){this._notificationService.notify({severity:ZA.Error,source:t.provider.displayName,message:n})}}_cacheHintsForFastRestore(e){const t=this._copyInlayHintsWithCurrentAnchor(e);this._inlayHintsCache.set(e,t)}_copyInlayHintsWithCurrentAnchor(e){const t=new Map;for(const[i,n]of this._decorationsMetadata){if(t.has(n.item))continue;const s=e.getDecorationRange(i);if(s){const r=new Zle(s,n.item.anchor.direction),a=n.item.with({anchor:r});t.set(n.item,a)}}return Array.from(t.values())}_getHintsRanges(){const t=this._editor.getModel(),i=this._editor.getVisibleRangesPlusViewportAboveBelow(),n=[];for(const s of i.sort(A.compareRangesUsingStarts)){const r=t.validateRange(new A(s.startLineNumber-30,s.startColumn,s.endLineNumber+30,s.endColumn));n.length===0||!A.areIntersectingOrTouching(n[n.length-1],r)?n.push(r):n[n.length-1]=A.plusRange(n[n.length-1],r)}return n}_updateHintsDecorators(e,t){var i,n;const s=[],r=(y,S,L,x,D)=>{const E={content:L,inlineClassNameAffectsLetterSpacing:!0,inlineClassName:S.className,cursorStops:x,attachedData:D};s.push({item:y,classNameRef:S,decoration:{range:y.anchor.range,options:{description:"InlayHint",showIfCollapsed:y.anchor.range.isEmpty(),collapseOnReplaceEdit:!y.anchor.range.isEmpty(),stickiness:0,[y.anchor.direction]:this._activeRenderMode===0?E:void 0}}})},a=(y,S)=>{const L=this._ruleFactory.createClassNameRef({width:`${l/3|0}px`,display:"inline-block"});r(y,L,"",S?Vc.Right:Vc.None)},{fontSize:l,fontFamily:c,padding:u,isUniform:f}=this._getLayoutInfo(),g="--code-editorInlayHintsFontFamily";this._editor.getContainerDomNode().style.setProperty(g,c);let p={line:0,totalLen:0};for(const y of t){if(p.line!==y.anchor.range.startLineNumber&&(p={line:y.anchor.range.startLineNumber,totalLen:0}),p.totalLen>q0._MAX_LABEL_LEN)continue;y.hint.paddingLeft&&a(y,!1);const S=typeof y.hint.label=="string"?[{label:y.hint.label}]:y.hint.label;for(let L=0;L<S.length;L++){const x=S[L],D=L===0,E=L===S.length-1,N={fontSize:`${l}px`,fontFamily:`var(${g}), ${ga.fontFamily}`,verticalAlign:f?"baseline":"middle",unicodeBidi:"isolate"};Yo(y.hint.textEdits)&&(N.cursor="default"),this._fillInColors(N,y.hint),(x.command||x.location)&&((i=this._activeInlayHintPart)===null||i===void 0?void 0:i.part.item)===y&&this._activeInlayHintPart.part.index===L&&(N.textDecoration="underline",this._activeInlayHintPart.hasTriggerModifier&&(N.color=Xn(ALe),N.cursor="pointer")),u&&(D&&E?(N.padding=`1px ${Math.max(1,l/4)|0}px`,N.borderRadius=`${l/4|0}px`):D?(N.padding=`1px 0 1px ${Math.max(1,l/4)|0}px`,N.borderRadius=`${l/4|0}px 0 0 ${l/4|0}px`):E?(N.padding=`1px ${Math.max(1,l/4)|0}px 1px 0`,N.borderRadius=`0 ${l/4|0}px ${l/4|0}px 0`):N.padding="1px 0 1px 0");let M=x.label;p.totalLen+=M.length;let F=!1;const H=p.totalLen-q0._MAX_LABEL_LEN;if(H>0&&(M=M.slice(0,-H)+"",F=!0),r(y,this._ruleFactory.createClassNameRef(N),V6e(M),E&&!y.hint.paddingRight?Vc.Right:Vc.None,new R6(y,L)),F)break}if(y.hint.paddingRight&&a(y,!0),s.length>q0._MAX_DECORATORS)break}const _=[];for(const[y,S]of this._decorationsMetadata){const L=(n=this._editor.getModel())===null||n===void 0?void 0:n.getDecorationRange(y);L&&e.some(x=>x.containsRange(L))&&(_.push(y),S.classNameRef.dispose(),this._decorationsMetadata.delete(y))}const b=Xd.capture(this._editor);this._editor.changeDecorations(y=>{const S=y.deltaDecorations(_,s.map(L=>L.decoration));for(let L=0;L<S.length;L++){const x=s[L];this._decorationsMetadata.set(S[L],x)}}),b.restore(this._editor)}_fillInColors(e,t){t.kind===dR.Parameter?(e.backgroundColor=Xn(VLe),e.color=Xn(WLe)):t.kind===dR.Type?(e.backgroundColor=Xn(BLe),e.color=Xn(FLe)):(e.backgroundColor=Xn(Af),e.color=Xn(Mf))}_getLayoutInfo(){const e=this._editor.getOption(141),t=e.padding,i=this._editor.getOption(52),n=this._editor.getOption(49);let s=e.fontSize;(!s||s<5||s>i)&&(s=i);const r=e.fontFamily||n;return{fontSize:s,fontFamily:r,padding:t,isUniform:!t&&r===n&&s===i}}_removeAllDecorations(){this._editor.removeDecorations(Array.from(this._decorationsMetadata.keys()));for(const e of this._decorationsMetadata.values())e.classNameRef.dispose();this._decorationsMetadata.clear()}};Im.ID="editor.contrib.InlayHints";Im._MAX_DECORATORS=1500;Im._MAX_LABEL_LEN=43;Im=q0=B6e([F0(1,Ze),F0(2,vc),F0(3,Xle),F0(4,Un),F0(5,ys),F0(6,ct)],Im);function V6e(o){return o.replace(/[ \t]/g,"")}si.registerCommand("_executeInlayHintProvider",async(o,...e)=>{const[t,i]=e;wi(gt.isUri(t)),wi(A.isIRange(i));const{inlayHintsProvider:n}=o.get(Ze),s=await o.get(Ca).createModelReference(t);try{const r=await xv.create(n,s.object.textEditorModel,[A.lift(i)],Yt.None),a=r.items.map(l=>l.hint);return setTimeout(()=>r.dispose(),0),a}finally{s.dispose()}});var H6e=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},OS=function(o,e){return function(t,i){e(t,i,o)}};class Xee extends wv{constructor(e,t,i,n){super(10,t,e.item.anchor.range,i,n,!0),this.part=e}}let M6=class extends jM{constructor(e,t,i,n,s,r){super(e,t,i,n,r),this._resolverService=s,this.hoverOrdinal=6}suggestHoverAnchor(e){var t;if(!Im.get(this._editor)||e.target.type!==6)return null;const n=(t=e.target.detail.injectedText)===null||t===void 0?void 0:t.options;return n instanceof vm&&n.attachedData instanceof R6?new Xee(n.attachedData,this,e.event.posx,e.event.posy):null}computeSync(){return[]}computeAsync(e,t,i){return e instanceof Xee?new ks(async n=>{const{part:s}=e;if(await s.item.resolve(i),i.isCancellationRequested)return;let r;typeof s.item.hint.tooltip=="string"?r=new qo().appendText(s.item.hint.tooltip):s.item.hint.tooltip&&(r=s.item.hint.tooltip),r&&n.emitOne(new Nd(this,e.range,[r],!1,0)),Yo(s.item.hint.textEdits)&&n.emitOne(new Nd(this,e.range,[new qo().appendText(v("hint.dbl","Double-click to insert"))],!1,10001));let a;if(typeof s.part.tooltip=="string"?a=new qo().appendText(s.part.tooltip):s.part.tooltip&&(a=s.part.tooltip),a&&n.emitOne(new Nd(this,e.range,[a],!1,1)),s.part.location||s.part.command){let c;const f=this._editor.getOption(78)==="altKey"?Kt?v("links.navigate.kb.meta.mac","cmd + click"):v("links.navigate.kb.meta","ctrl + click"):Kt?v("links.navigate.kb.alt.mac","option + click"):v("links.navigate.kb.alt","alt + click");s.part.location&&s.part.command?c=new qo().appendText(v("hint.defAndCommand","Go to Definition ({0}), right click for more",f)):s.part.location?c=new qo().appendText(v("hint.def","Go to Definition ({0})",f)):s.part.command&&(c=new qo(`[${v("hint.cmd","Execute Command")}](${O6e(s.part.command)} "${s.part.command.title}") (${f})`,{isTrusted:!0})),c&&n.emitOne(new Nd(this,e.range,[c],!1,1e4))}const l=await this._resolveInlayHintLabelPartHover(s,i);for await(const c of l)n.emitOne(c)}):ks.EMPTY}async _resolveInlayHintLabelPartHover(e,t){if(!e.part.location)return ks.EMPTY;const{uri:i,range:n}=e.part.location,s=await this._resolverService.createModelReference(i);try{const r=s.object.textEditorModel;return this._languageFeaturesService.hoverProvider.has(r)?fU(this._languageFeaturesService.hoverProvider,r,new Z(n.startLineNumber,n.startColumn),t).filter(a=>!v1(a.hover.contents)).map(a=>new Nd(this,e.item.anchor.range,a.hover.contents,!1,2+a.ordinal)):ks.EMPTY}finally{s.dispose()}}};M6=H6e([OS(1,xn),OS(2,wa),OS(3,$t),OS(4,Ca),OS(5,Ze)],M6);pi(Im.ID,Im,1);zm.register(M6);class z6e{constructor(e,t,i){this._editRange=e,this._originalSelection=t,this._text=i}getEditOperations(e,t){t.addTrackedEditOperation(this._editRange,this._text)}computeCursorState(e,t){const n=t.getInverseEditOperations()[0].range;return this._originalSelection.isEmpty()?new Xe(n.endLineNumber,Math.min(this._originalSelection.positionColumn,n.endColumn),n.endLineNumber,Math.min(this._originalSelection.positionColumn,n.endColumn)):new Xe(n.endLineNumber,n.endColumn-this._text.length,n.endLineNumber,n.endColumn)}}var U6e=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},$6e=function(o,e){return function(t,i){e(t,i,o)}},qN;let Tm=qN=class{static get(e){return e.getContribution(qN.ID)}constructor(e,t){this.editor=e,this.editorWorkerService=t,this.decorations=this.editor.createDecorationsCollection()}dispose(){}run(e,t){var i;(i=this.currentRequest)===null||i===void 0||i.cancel();const n=this.editor.getSelection(),s=this.editor.getModel();if(!s||!n)return;let r=n;if(r.startLineNumber!==r.endLineNumber)return;const a=new Ore(this.editor,5),l=s.uri;return this.editorWorkerService.canNavigateValueSet(l)?(this.currentRequest=Qs(c=>this.editorWorkerService.navigateValueSet(l,r,t)),this.currentRequest.then(c=>{var u;if(!c||!c.range||!c.value||!a.validate(this.editor))return;const f=A.lift(c.range);let g=c.range;const p=c.value.length-(r.endColumn-r.startColumn);g={startLineNumber:g.startLineNumber,startColumn:g.startColumn,endLineNumber:g.endLineNumber,endColumn:g.startColumn+c.value.length},p>1&&(r=new Xe(r.startLineNumber,r.startColumn,r.endLineNumber,r.endColumn+p-1));const _=new z6e(f,r,c.value);this.editor.pushUndoStop(),this.editor.executeCommand(e,_),this.editor.pushUndoStop(),this.decorations.set([{range:g,options:qN.DECORATION}]),(u=this.decorationRemover)===null||u===void 0||u.cancel(),this.decorationRemover=cm(350),this.decorationRemover.then(()=>this.decorations.clear()).catch(Nt)}).catch(Nt)):Promise.resolve(void 0)}};Tm.ID="editor.contrib.inPlaceReplaceController";Tm.DECORATION=Rt.register({description:"in-place-replace",className:"valueSetReplacement"});Tm=qN=U6e([$6e(1,Cc)],Tm);class j6e extends Ke{constructor(){super({id:"editor.action.inPlaceReplace.up",label:v("InPlaceReplaceAction.previous.label","Replace with Previous Value"),alias:"Replace with Previous Value",precondition:W.writable,kbOpts:{kbExpr:W.editorTextFocus,primary:3159,weight:100}})}run(e,t){const i=Tm.get(t);return i?i.run(this.id,!1):Promise.resolve(void 0)}}class K6e extends Ke{constructor(){super({id:"editor.action.inPlaceReplace.down",label:v("InPlaceReplaceAction.next.label","Replace with Next Value"),alias:"Replace with Next Value",precondition:W.writable,kbOpts:{kbExpr:W.editorTextFocus,primary:3161,weight:100}})}run(e,t){const i=Tm.get(t);return i?i.run(this.id,!0):Promise.resolve(void 0)}}pi(Tm.ID,Tm,4);Ce(j6e);Ce(K6e);class q6e extends Ke{constructor(){super({id:"expandLineSelection",label:v("expandLineSelection","Expand Line Selection"),alias:"Expand Line Selection",precondition:void 0,kbOpts:{weight:0,kbExpr:W.textInputFocus,primary:2090}})}run(e,t,i){if(i=i||{},!t.hasModel())return;const n=t._getViewModel();n.model.pushStackElement(),n.setCursorStates(i.source,3,ho.expandLineSelection(n,n.getCursorStates())),n.revealAllCursors(i.source,!0)}}Ce(q6e);class G6e{constructor(e,t,i){this._selection=e,this._cursors=t,this._selectionId=null,this._trimInRegexesAndStrings=i}getEditOperations(e,t){const i=Y6e(e,this._cursors,this._trimInRegexesAndStrings);for(let n=0,s=i.length;n<s;n++){const r=i[n];t.addEditOperation(r.range,r.text)}this._selectionId=t.trackSelection(this._selection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}function Y6e(o,e,t){e.sort((a,l)=>a.lineNumber===l.lineNumber?a.column-l.column:a.lineNumber-l.lineNumber);for(let a=e.length-2;a>=0;a--)e[a].lineNumber===e[a+1].lineNumber&&e.splice(a,1);const i=[];let n=0,s=0;const r=e.length;for(let a=1,l=o.getLineCount();a<=l;a++){const c=o.getLineContent(a),u=c.length+1;let f=0;if(s<r&&e[s].lineNumber===a&&(f=e[s].column,s++,f===u)||c.length===0)continue;const g=Bd(c);let p=0;if(g===-1)p=1;else if(g!==c.length-1)p=g+2;else continue;if(!t){if(!o.tokenization.hasAccurateTokensForLine(a))continue;const _=o.tokenization.getLineTokens(a),b=_.getStandardTokenType(_.findTokenIndexAtOffset(p));if(b===2||b===3)continue}p=Math.max(f,p),i[n++]=On.delete(new A(a,p,a,u))}return i}class Jle{constructor(e,t,i){this._selection=e,this._isCopyingDown=t,this._noop=i||!1,this._selectionDirection=0,this._selectionId=null,this._startLineNumberDelta=0,this._endLineNumberDelta=0}getEditOperations(e,t){let i=this._selection;this._startLineNumberDelta=0,this._endLineNumberDelta=0,i.startLineNumber<i.endLineNumber&&i.endColumn===1&&(this._endLineNumberDelta=1,i=i.setEndPosition(i.endLineNumber-1,e.getLineMaxColumn(i.endLineNumber-1)));const n=[];for(let r=i.startLineNumber;r<=i.endLineNumber;r++)n.push(e.getLineContent(r));const s=n.join(`
`);s===""&&this._isCopyingDown&&(this._startLineNumberDelta++,this._endLineNumberDelta++),this._noop?t.addEditOperation(new A(i.endLineNumber,e.getLineMaxColumn(i.endLineNumber),i.endLineNumber+1,1),i.endLineNumber===e.getLineCount()?"":`
`):this._isCopyingDown?t.addEditOperation(new A(i.startLineNumber,1,i.startLineNumber,1),s+`
`):t.addEditOperation(new A(i.endLineNumber,e.getLineMaxColumn(i.endLineNumber),i.endLineNumber,e.getLineMaxColumn(i.endLineNumber)),`
`+s),this._selectionId=t.trackSelection(i),this._selectionDirection=this._selection.getDirection()}computeCursorState(e,t){let i=t.getTrackedSelection(this._selectionId);if(this._startLineNumberDelta!==0||this._endLineNumberDelta!==0){let n=i.startLineNumber,s=i.startColumn,r=i.endLineNumber,a=i.endColumn;this._startLineNumberDelta!==0&&(n=n+this._startLineNumberDelta,s=1),this._endLineNumberDelta!==0&&(r=r+this._endLineNumberDelta,a=1),i=Xe.createWithDirection(n,s,r,a,this._selectionDirection)}return i}}var Z6e=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Q6e=function(o,e){return function(t,i){e(t,i,o)}};let A6=class{constructor(e,t,i,n){this._languageConfigurationService=n,this._selection=e,this._isMovingDown=t,this._autoIndent=i,this._selectionId=null,this._moveEndLineSelectionShrink=!1}getEditOperations(e,t){const i=e.getLineCount();if(this._isMovingDown&&this._selection.endLineNumber===i){this._selectionId=t.trackSelection(this._selection);return}if(!this._isMovingDown&&this._selection.startLineNumber===1){this._selectionId=t.trackSelection(this._selection);return}this._moveEndPositionDown=!1;let n=this._selection;n.startLineNumber<n.endLineNumber&&n.endColumn===1&&(this._moveEndPositionDown=!0,n=n.setEndPosition(n.endLineNumber-1,e.getLineMaxColumn(n.endLineNumber-1)));const{tabSize:s,indentSize:r,insertSpaces:a}=e.getOptions(),l=this.buildIndentConverter(s,r,a),c={tokenization:{getLineTokens:u=>e.tokenization.getLineTokens(u),getLanguageId:()=>e.getLanguageId(),getLanguageIdAtPosition:(u,f)=>e.getLanguageIdAtPosition(u,f)},getLineContent:null};if(n.startLineNumber===n.endLineNumber&&e.getLineMaxColumn(n.startLineNumber)===1){const u=n.startLineNumber,f=this._isMovingDown?u+1:u-1;e.getLineMaxColumn(f)===1?t.addEditOperation(new A(1,1,1,1),null):(t.addEditOperation(new A(u,1,u,1),e.getLineContent(f)),t.addEditOperation(new A(f,1,f,e.getLineMaxColumn(f)),null)),n=new Xe(f,1,f,1)}else{let u,f;if(this._isMovingDown){u=n.endLineNumber+1,f=e.getLineContent(u),t.addEditOperation(new A(u-1,e.getLineMaxColumn(u-1),u,e.getLineMaxColumn(u)),null);let g=f;if(this.shouldAutoIndent(e,n)){const p=this.matchEnterRule(e,l,s,u,n.startLineNumber-1);if(p!==null){const b=an(e.getLineContent(u)),y=p+Fa(b,s);g=zL(y,s,a)+this.trimStart(f)}else{c.getLineContent=y=>y===n.startLineNumber?e.getLineContent(u):e.getLineContent(y);const b=vL(this._autoIndent,c,e.getLanguageIdAtPosition(u,1),n.startLineNumber,l,this._languageConfigurationService);if(b!==null){const y=an(e.getLineContent(u)),S=Fa(b,s),L=Fa(y,s);S!==L&&(g=zL(S,s,a)+this.trimStart(f))}}t.addEditOperation(new A(n.startLineNumber,1,n.startLineNumber,1),g+`
`);const _=this.matchEnterRuleMovingDown(e,l,s,n.startLineNumber,u,g);if(_!==null)_!==0&&this.getIndentEditsOfMovingBlock(e,t,n,s,a,_);else{c.getLineContent=y=>y===n.startLineNumber?g:y>=n.startLineNumber+1&&y<=n.endLineNumber+1?e.getLineContent(y-1):e.getLineContent(y);const b=vL(this._autoIndent,c,e.getLanguageIdAtPosition(u,1),n.startLineNumber+1,l,this._languageConfigurationService);if(b!==null){const y=an(e.getLineContent(n.startLineNumber)),S=Fa(b,s),L=Fa(y,s);if(S!==L){const x=S-L;this.getIndentEditsOfMovingBlock(e,t,n,s,a,x)}}}}else t.addEditOperation(new A(n.startLineNumber,1,n.startLineNumber,1),g+`
`)}else if(u=n.startLineNumber-1,f=e.getLineContent(u),t.addEditOperation(new A(u,1,u+1,1),null),t.addEditOperation(new A(n.endLineNumber,e.getLineMaxColumn(n.endLineNumber),n.endLineNumber,e.getLineMaxColumn(n.endLineNumber)),`
`+f),this.shouldAutoIndent(e,n)){c.getLineContent=p=>p===u?e.getLineContent(n.startLineNumber):e.getLineContent(p);const g=this.matchEnterRule(e,l,s,n.startLineNumber,n.startLineNumber-2);if(g!==null)g!==0&&this.getIndentEditsOfMovingBlock(e,t,n,s,a,g);else{const p=vL(this._autoIndent,c,e.getLanguageIdAtPosition(n.startLineNumber,1),u,l,this._languageConfigurationService);if(p!==null){const _=an(e.getLineContent(n.startLineNumber)),b=Fa(p,s),y=Fa(_,s);if(b!==y){const S=b-y;this.getIndentEditsOfMovingBlock(e,t,n,s,a,S)}}}}}this._selectionId=t.trackSelection(n)}buildIndentConverter(e,t,i){return{shiftIndent:n=>tc.shiftIndent(n,n.length+1,e,t,i),unshiftIndent:n=>tc.unshiftIndent(n,n.length+1,e,t,i)}}parseEnterResult(e,t,i,n,s){if(s){let r=s.indentation;s.indentAction===Is.None||s.indentAction===Is.Indent?r=s.indentation+s.appendText:s.indentAction===Is.IndentOutdent?r=s.indentation:s.indentAction===Is.Outdent&&(r=t.unshiftIndent(s.indentation)+s.appendText);const a=e.getLineContent(n);if(this.trimStart(a).indexOf(this.trimStart(r))>=0){const l=an(e.getLineContent(n));let c=an(r);const u=ase(e,n,this._languageConfigurationService);u!==null&&u&2&&(c=t.unshiftIndent(c));const f=Fa(c,i),g=Fa(l,i);return f-g}}return null}matchEnterRuleMovingDown(e,t,i,n,s,r){if(Bd(r)>=0){const a=e.getLineMaxColumn(s),l=NC(this._autoIndent,e,new A(s,a,s,a),this._languageConfigurationService);return this.parseEnterResult(e,t,i,n,l)}else{let a=n-1;for(;a>=1;){const u=e.getLineContent(a);if(Bd(u)>=0)break;a--}if(a<1||n>e.getLineCount())return null;const l=e.getLineMaxColumn(a),c=NC(this._autoIndent,e,new A(a,l,a,l),this._languageConfigurationService);return this.parseEnterResult(e,t,i,n,c)}}matchEnterRule(e,t,i,n,s,r){let a=s;for(;a>=1;){let u;if(a===s&&r!==void 0?u=r:u=e.getLineContent(a),Bd(u)>=0)break;a--}if(a<1||n>e.getLineCount())return null;const l=e.getLineMaxColumn(a),c=NC(this._autoIndent,e,new A(a,l,a,l),this._languageConfigurationService);return this.parseEnterResult(e,t,i,n,c)}trimStart(e){return e.replace(/^\s+/,"")}shouldAutoIndent(e,t){if(this._autoIndent<4||!e.tokenization.isCheapToTokenize(t.startLineNumber))return!1;const i=e.getLanguageIdAtPosition(t.startLineNumber,1),n=e.getLanguageIdAtPosition(t.endLineNumber,1);return!(i!==n||this._languageConfigurationService.getLanguageConfiguration(i).indentRulesSupport===null)}getIndentEditsOfMovingBlock(e,t,i,n,s,r){for(let a=i.startLineNumber;a<=i.endLineNumber;a++){const l=e.getLineContent(a),c=an(l),f=Fa(c,n)+r,g=zL(f,n,s);g!==c&&(t.addEditOperation(new A(a,1,a,c.length+1),g),a===i.endLineNumber&&i.endColumn<=c.length+1&&g===""&&(this._moveEndLineSelectionShrink=!0))}}computeCursorState(e,t){let i=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(i=i.setEndPosition(i.endLineNumber+1,1)),this._moveEndLineSelectionShrink&&i.startLineNumber<i.endLineNumber&&(i=i.setEndPosition(i.endLineNumber,2)),i}};A6=Z6e([Q6e(3,dn)],A6);class nm{static getCollator(){return nm._COLLATOR||(nm._COLLATOR=new Intl.Collator),nm._COLLATOR}constructor(e,t){this.selection=e,this.descending=t,this.selectionId=null}getEditOperations(e,t){const i=X6e(e,this.selection,this.descending);i&&t.addEditOperation(i.range,i.text),this.selectionId=t.trackSelection(this.selection)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}static canRun(e,t,i){if(e===null)return!1;const n=ece(e,t,i);if(!n)return!1;for(let s=0,r=n.before.length;s<r;s++)if(n.before[s]!==n.after[s])return!0;return!1}}nm._COLLATOR=null;function ece(o,e,t){const i=e.startLineNumber;let n=e.endLineNumber;if(e.endColumn===1&&n--,i>=n)return null;const s=[];for(let a=i;a<=n;a++)s.push(o.getLineContent(a));let r=s.slice(0);return r.sort(nm.getCollator().compare),t===!0&&(r=r.reverse()),{startLineNumber:i,endLineNumber:n,before:s,after:r}}function X6e(o,e,t){const i=ece(o,e,t);return i?On.replace(new A(i.startLineNumber,1,i.endLineNumber,o.getLineMaxColumn(i.endLineNumber)),i.after.join(`
`)):null}class tce extends Ke{constructor(e,t){super(t),this.down=e}run(e,t){if(!t.hasModel())return;const i=t.getSelections().map((r,a)=>({selection:r,index:a,ignore:!1}));i.sort((r,a)=>A.compareRangesUsingStarts(r.selection,a.selection));let n=i[0];for(let r=1;r<i.length;r++){const a=i[r];n.selection.endLineNumber===a.selection.startLineNumber&&(n.index<a.index?a.ignore=!0:(n.ignore=!0,n=a))}const s=[];for(const r of i)s.push(new Jle(r.selection,this.down,r.ignore));t.pushUndoStop(),t.executeCommands(this.id,s),t.pushUndoStop()}}class J6e extends tce{constructor(){super(!1,{id:"editor.action.copyLinesUpAction",label:v("lines.copyUp","Copy Line Up"),alias:"Copy Line Up",precondition:W.writable,kbOpts:{kbExpr:W.editorTextFocus,primary:1552,linux:{primary:3600},weight:100},menuOpts:{menuId:P.MenubarSelectionMenu,group:"2_line",title:v({key:"miCopyLinesUp",comment:["&& denotes a mnemonic"]},"&&Copy Line Up"),order:1}})}}class eVe extends tce{constructor(){super(!0,{id:"editor.action.copyLinesDownAction",label:v("lines.copyDown","Copy Line Down"),alias:"Copy Line Down",precondition:W.writable,kbOpts:{kbExpr:W.editorTextFocus,primary:1554,linux:{primary:3602},weight:100},menuOpts:{menuId:P.MenubarSelectionMenu,group:"2_line",title:v({key:"miCopyLinesDown",comment:["&& denotes a mnemonic"]},"Co&&py Line Down"),order:2}})}}class tVe extends Ke{constructor(){super({id:"editor.action.duplicateSelection",label:v("duplicateSelection","Duplicate Selection"),alias:"Duplicate Selection",precondition:W.writable,menuOpts:{menuId:P.MenubarSelectionMenu,group:"2_line",title:v({key:"miDuplicateSelection",comment:["&& denotes a mnemonic"]},"&&Duplicate Selection"),order:5}})}run(e,t,i){if(!t.hasModel())return;const n=[],s=t.getSelections(),r=t.getModel();for(const a of s)if(a.isEmpty())n.push(new Jle(a,!0));else{const l=new Xe(a.endLineNumber,a.endColumn,a.endLineNumber,a.endColumn);n.push(new Tke(l,r.getValueInRange(a)))}t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()}}class ice extends Ke{constructor(e,t){super(t),this.down=e}run(e,t){const i=e.get(dn),n=[],s=t.getSelections()||[],r=t.getOption(12);for(const a of s)n.push(new A6(a,this.down,r,i));t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()}}class iVe extends ice{constructor(){super(!1,{id:"editor.action.moveLinesUpAction",label:v("lines.moveUp","Move Line Up"),alias:"Move Line Up",precondition:W.writable,kbOpts:{kbExpr:W.editorTextFocus,primary:528,linux:{primary:528},weight:100},menuOpts:{menuId:P.MenubarSelectionMenu,group:"2_line",title:v({key:"miMoveLinesUp",comment:["&& denotes a mnemonic"]},"Mo&&ve Line Up"),order:3}})}}class nVe extends ice{constructor(){super(!0,{id:"editor.action.moveLinesDownAction",label:v("lines.moveDown","Move Line Down"),alias:"Move Line Down",precondition:W.writable,kbOpts:{kbExpr:W.editorTextFocus,primary:530,linux:{primary:530},weight:100},menuOpts:{menuId:P.MenubarSelectionMenu,group:"2_line",title:v({key:"miMoveLinesDown",comment:["&& denotes a mnemonic"]},"Move &&Line Down"),order:4}})}}class nce extends Ke{constructor(e,t){super(t),this.descending=e}run(e,t){if(!t.hasModel())return;const i=t.getModel();let n=t.getSelections();n.length===1&&n[0].isEmpty()&&(n=[new Xe(1,1,i.getLineCount(),i.getLineMaxColumn(i.getLineCount()))]);for(const r of n)if(!nm.canRun(t.getModel(),r,this.descending))return;const s=[];for(let r=0,a=n.length;r<a;r++)s[r]=new nm(n[r],this.descending);t.pushUndoStop(),t.executeCommands(this.id,s),t.pushUndoStop()}}class sVe extends nce{constructor(){super(!1,{id:"editor.action.sortLinesAscending",label:v("lines.sortAscending","Sort Lines Ascending"),alias:"Sort Lines Ascending",precondition:W.writable})}}class oVe extends nce{constructor(){super(!0,{id:"editor.action.sortLinesDescending",label:v("lines.sortDescending","Sort Lines Descending"),alias:"Sort Lines Descending",precondition:W.writable})}}class rVe extends Ke{constructor(){super({id:"editor.action.removeDuplicateLines",label:v("lines.deleteDuplicates","Delete Duplicate Lines"),alias:"Delete Duplicate Lines",precondition:W.writable})}run(e,t){if(!t.hasModel())return;const i=t.getModel();if(i.getLineCount()===1&&i.getLineMaxColumn(1)===1)return;const n=[],s=[];let r=0,a=!0,l=t.getSelections();l.length===1&&l[0].isEmpty()&&(l=[new Xe(1,1,i.getLineCount(),i.getLineMaxColumn(i.getLineCount()))],a=!1);for(const c of l){const u=new Set,f=[];for(let b=c.startLineNumber;b<=c.endLineNumber;b++){const y=i.getLineContent(b);u.has(y)||(f.push(y),u.add(y))}const g=new Xe(c.startLineNumber,1,c.endLineNumber,i.getLineMaxColumn(c.endLineNumber)),p=c.startLineNumber-r,_=new Xe(p,1,p+f.length-1,f[f.length-1].length);n.push(On.replace(g,f.join(`
`))),s.push(_),r+=c.endLineNumber-c.startLineNumber+1-f.length}t.pushUndoStop(),t.executeEdits(this.id,n,a?s:void 0),t.pushUndoStop()}}class gO extends Ke{constructor(){super({id:gO.ID,label:v("lines.trimTrailingWhitespace","Trim Trailing Whitespace"),alias:"Trim Trailing Whitespace",precondition:W.writable,kbOpts:{kbExpr:W.editorTextFocus,primary:Fs(2089,2102),weight:100}})}run(e,t,i){let n=[];i.reason==="auto-save"&&(n=(t.getSelections()||[]).map(u=>new Z(u.positionLineNumber,u.positionColumn)));const s=t.getSelection();if(s===null)return;const r=e.get($t),a=t.getModel(),l=r.getValue("files.trimTrailingWhitespaceInRegexAndStrings",{overrideIdentifier:a==null?void 0:a.getLanguageId(),resource:a==null?void 0:a.uri}),c=new G6e(s,n,l);t.pushUndoStop(),t.executeCommands(this.id,[c]),t.pushUndoStop()}}gO.ID="editor.action.trimTrailingWhitespace";class aVe extends Ke{constructor(){super({id:"editor.action.deleteLines",label:v("lines.delete","Delete Line"),alias:"Delete Line",precondition:W.writable,kbOpts:{kbExpr:W.textInputFocus,primary:3113,weight:100}})}run(e,t){if(!t.hasModel())return;const i=this._getLinesToRemove(t),n=t.getModel();if(n.getLineCount()===1&&n.getLineMaxColumn(1)===1)return;let s=0;const r=[],a=[];for(let l=0,c=i.length;l<c;l++){const u=i[l];let f=u.startLineNumber,g=u.endLineNumber,p=1,_=n.getLineMaxColumn(g);g<n.getLineCount()?(g+=1,_=1):f>1&&(f-=1,p=n.getLineMaxColumn(f)),r.push(On.replace(new Xe(f,p,g,_),"")),a.push(new Xe(f-s,u.positionColumn,f-s,u.positionColumn)),s+=u.endLineNumber-u.startLineNumber+1}t.pushUndoStop(),t.executeEdits(this.id,r,a),t.pushUndoStop()}_getLinesToRemove(e){const t=e.getSelections().map(s=>{let r=s.endLineNumber;return s.startLineNumber<s.endLineNumber&&s.endColumn===1&&(r-=1),{startLineNumber:s.startLineNumber,selectionStartColumn:s.selectionStartColumn,endLineNumber:r,positionColumn:s.positionColumn}});t.sort((s,r)=>s.startLineNumber===r.startLineNumber?s.endLineNumber-r.endLineNumber:s.startLineNumber-r.startLineNumber);const i=[];let n=t[0];for(let s=1;s<t.length;s++)n.endLineNumber+1>=t[s].startLineNumber?n.endLineNumber=t[s].endLineNumber:(i.push(n),n=t[s]);return i.push(n),i}}class lVe extends Ke{constructor(){super({id:"editor.action.indentLines",label:v("lines.indent","Indent Line"),alias:"Indent Line",precondition:W.writable,kbOpts:{kbExpr:W.editorTextFocus,primary:2142,weight:100}})}run(e,t){const i=t._getViewModel();i&&(t.pushUndoStop(),t.executeCommands(this.id,Hn.indent(i.cursorConfig,t.getModel(),t.getSelections())),t.pushUndoStop())}}class cVe extends Ke{constructor(){super({id:"editor.action.outdentLines",label:v("lines.outdent","Outdent Line"),alias:"Outdent Line",precondition:W.writable,kbOpts:{kbExpr:W.editorTextFocus,primary:2140,weight:100}})}run(e,t){RC.Outdent.runEditorCommand(e,t,null)}}class dVe extends Ke{constructor(){super({id:"editor.action.insertLineBefore",label:v("lines.insertBefore","Insert Line Above"),alias:"Insert Line Above",precondition:W.writable,kbOpts:{kbExpr:W.editorTextFocus,primary:3075,weight:100}})}run(e,t){const i=t._getViewModel();i&&(t.pushUndoStop(),t.executeCommands(this.id,Hn.lineInsertBefore(i.cursorConfig,t.getModel(),t.getSelections())))}}class uVe extends Ke{constructor(){super({id:"editor.action.insertLineAfter",label:v("lines.insertAfter","Insert Line Below"),alias:"Insert Line Below",precondition:W.writable,kbOpts:{kbExpr:W.editorTextFocus,primary:2051,weight:100}})}run(e,t){const i=t._getViewModel();i&&(t.pushUndoStop(),t.executeCommands(this.id,Hn.lineInsertAfter(i.cursorConfig,t.getModel(),t.getSelections())))}}class sce extends Ke{run(e,t){if(!t.hasModel())return;const i=t.getSelection(),n=this._getRangesToDelete(t),s=[];for(let l=0,c=n.length-1;l<c;l++){const u=n[l],f=n[l+1];A.intersectRanges(u,f)===null?s.push(u):n[l+1]=A.plusRange(u,f)}s.push(n[n.length-1]);const r=this._getEndCursorState(i,s),a=s.map(l=>On.replace(l,""));t.pushUndoStop(),t.executeEdits(this.id,a,r),t.pushUndoStop()}}class hVe extends sce{constructor(){super({id:"deleteAllLeft",label:v("lines.deleteAllLeft","Delete All Left"),alias:"Delete All Left",precondition:W.writable,kbOpts:{kbExpr:W.textInputFocus,primary:0,mac:{primary:2049},weight:100}})}_getEndCursorState(e,t){let i=null;const n=[];let s=0;return t.forEach(r=>{let a;if(r.endColumn===1&&s>0){const l=r.startLineNumber-s;a=new Xe(l,r.startColumn,l,r.startColumn)}else a=new Xe(r.startLineNumber,r.startColumn,r.startLineNumber,r.startColumn);s+=r.endLineNumber-r.startLineNumber,r.intersectRanges(e)?i=a:n.push(a)}),i&&n.unshift(i),n}_getRangesToDelete(e){const t=e.getSelections();if(t===null)return[];let i=t;const n=e.getModel();return n===null?[]:(i.sort(A.compareRangesUsingStarts),i=i.map(s=>{if(s.isEmpty())if(s.startColumn===1){const r=Math.max(1,s.startLineNumber-1),a=s.startLineNumber===1?1:n.getLineLength(r)+1;return new A(r,a,s.startLineNumber,1)}else return new A(s.startLineNumber,1,s.startLineNumber,s.startColumn);else return new A(s.startLineNumber,1,s.endLineNumber,s.endColumn)}),i)}}class fVe extends sce{constructor(){super({id:"deleteAllRight",label:v("lines.deleteAllRight","Delete All Right"),alias:"Delete All Right",precondition:W.writable,kbOpts:{kbExpr:W.textInputFocus,primary:0,mac:{primary:297,secondary:[2068]},weight:100}})}_getEndCursorState(e,t){let i=null;const n=[];for(let s=0,r=t.length,a=0;s<r;s++){const l=t[s],c=new Xe(l.startLineNumber-a,l.startColumn,l.startLineNumber-a,l.startColumn);l.intersectRanges(e)?i=c:n.push(c)}return i&&n.unshift(i),n}_getRangesToDelete(e){const t=e.getModel();if(t===null)return[];const i=e.getSelections();if(i===null)return[];const n=i.map(s=>{if(s.isEmpty()){const r=t.getLineMaxColumn(s.startLineNumber);return s.startColumn===r?new A(s.startLineNumber,s.startColumn,s.startLineNumber+1,1):new A(s.startLineNumber,s.startColumn,s.startLineNumber,r)}return s});return n.sort(A.compareRangesUsingStarts),n}}class gVe extends Ke{constructor(){super({id:"editor.action.joinLines",label:v("lines.joinLines","Join Lines"),alias:"Join Lines",precondition:W.writable,kbOpts:{kbExpr:W.editorTextFocus,primary:0,mac:{primary:296},weight:100}})}run(e,t){const i=t.getSelections();if(i===null)return;let n=t.getSelection();if(n===null)return;i.sort(A.compareRangesUsingStarts);const s=[],r=i.reduce((g,p)=>g.isEmpty()?g.endLineNumber===p.startLineNumber?(n.equalsSelection(g)&&(n=p),p):p.startLineNumber>g.endLineNumber+1?(s.push(g),p):new Xe(g.startLineNumber,g.startColumn,p.endLineNumber,p.endColumn):p.startLineNumber>g.endLineNumber?(s.push(g),p):new Xe(g.startLineNumber,g.startColumn,p.endLineNumber,p.endColumn));s.push(r);const a=t.getModel();if(a===null)return;const l=[],c=[];let u=n,f=0;for(let g=0,p=s.length;g<p;g++){const _=s[g],b=_.startLineNumber,y=1;let S=0,L,x;const D=a.getLineLength(_.endLineNumber)-_.endColumn;if(_.isEmpty()||_.startLineNumber===_.endLineNumber){const M=_.getStartPosition();M.lineNumber<a.getLineCount()?(L=b+1,x=a.getLineMaxColumn(L)):(L=M.lineNumber,x=a.getLineMaxColumn(M.lineNumber))}else L=_.endLineNumber,x=a.getLineMaxColumn(L);let E=a.getLineContent(b);for(let M=b+1;M<=L;M++){const F=a.getLineContent(M),H=a.getLineFirstNonWhitespaceColumn(M);if(H>=1){let Q=!0;E===""&&(Q=!1),Q&&(E.charAt(E.length-1)===" "||E.charAt(E.length-1)==="	")&&(Q=!1,E=E.replace(/[\s\uFEFF\xA0]+$/g," "));const K=F.substr(H-1);E+=(Q?" ":"")+K,Q?S=K.length+1:S=K.length}else S=0}const N=new A(b,y,L,x);if(!N.isEmpty()){let M;_.isEmpty()?(l.push(On.replace(N,E)),M=new Xe(N.startLineNumber-f,E.length-S+1,b-f,E.length-S+1)):_.startLineNumber===_.endLineNumber?(l.push(On.replace(N,E)),M=new Xe(_.startLineNumber-f,_.startColumn,_.endLineNumber-f,_.endColumn)):(l.push(On.replace(N,E)),M=new Xe(_.startLineNumber-f,_.startColumn,_.startLineNumber-f,E.length-D)),A.intersectRanges(N,n)!==null?u=M:c.push(M)}f+=N.endLineNumber-N.startLineNumber}c.unshift(u),t.pushUndoStop(),t.executeEdits(this.id,l,c),t.pushUndoStop()}}class pVe extends Ke{constructor(){super({id:"editor.action.transpose",label:v("editor.transpose","Transpose Characters around the Cursor"),alias:"Transpose Characters around the Cursor",precondition:W.writable})}run(e,t){const i=t.getSelections();if(i===null)return;const n=t.getModel();if(n===null)return;const s=[];for(let r=0,a=i.length;r<a;r++){const l=i[r];if(!l.isEmpty())continue;const c=l.getStartPosition(),u=n.getLineMaxColumn(c.lineNumber);if(c.column>=u){if(c.lineNumber===n.getLineCount())continue;const f=new A(c.lineNumber,Math.max(1,c.column-1),c.lineNumber+1,1),g=n.getValueInRange(f).split("").reverse().join("");s.push(new Do(new Xe(c.lineNumber,Math.max(1,c.column-1),c.lineNumber+1,1),g))}else{const f=new A(c.lineNumber,Math.max(1,c.column-1),c.lineNumber,c.column+1),g=n.getValueInRange(f).split("").reverse().join("");s.push(new kH(f,g,new Xe(c.lineNumber,c.column+1,c.lineNumber,c.column+1)))}}t.pushUndoStop(),t.executeCommands(this.id,s),t.pushUndoStop()}}class Cb extends Ke{run(e,t){const i=t.getSelections();if(i===null)return;const n=t.getModel();if(n===null)return;const s=t.getOption(131),r=[];for(const a of i)if(a.isEmpty()){const l=a.getStartPosition(),c=t.getConfiguredWordAtPosition(l);if(!c)continue;const u=new A(l.lineNumber,c.startColumn,l.lineNumber,c.endColumn),f=n.getValueInRange(u);r.push(On.replace(u,this._modifyText(f,s)))}else{const l=n.getValueInRange(a);r.push(On.replace(a,this._modifyText(l,s)))}t.pushUndoStop(),t.executeEdits(this.id,r),t.pushUndoStop()}}class mVe extends Cb{constructor(){super({id:"editor.action.transformToUppercase",label:v("editor.transformToUppercase","Transform to Uppercase"),alias:"Transform to Uppercase",precondition:W.writable})}_modifyText(e,t){return e.toLocaleUpperCase()}}class _Ve extends Cb{constructor(){super({id:"editor.action.transformToLowercase",label:v("editor.transformToLowercase","Transform to Lowercase"),alias:"Transform to Lowercase",precondition:W.writable})}_modifyText(e,t){return e.toLocaleLowerCase()}}class bg{constructor(e,t){this._pattern=e,this._flags=t,this._actual=null,this._evaluated=!1}get(){if(!this._evaluated){this._evaluated=!0;try{this._actual=new RegExp(this._pattern,this._flags)}catch{}}return this._actual}isSupported(){return this.get()!==null}}class vD extends Cb{constructor(){super({id:"editor.action.transformToTitlecase",label:v("editor.transformToTitlecase","Transform to Title Case"),alias:"Transform to Title Case",precondition:W.writable})}_modifyText(e,t){const i=vD.titleBoundary.get();return i?e.toLocaleLowerCase().replace(i,n=>n.toLocaleUpperCase()):e}}vD.titleBoundary=new bg("(^|[^\\p{L}\\p{N}']|((^|\\P{L})'))\\p{L}","gmu");class sm extends Cb{constructor(){super({id:"editor.action.transformToSnakecase",label:v("editor.transformToSnakecase","Transform to Snake Case"),alias:"Transform to Snake Case",precondition:W.writable})}_modifyText(e,t){const i=sm.caseBoundary.get(),n=sm.singleLetters.get();return!i||!n?e:e.replace(i,"$1_$2").replace(n,"$1_$2$3").toLocaleLowerCase()}}sm.caseBoundary=new bg("(\\p{Ll})(\\p{Lu})","gmu");sm.singleLetters=new bg("(\\p{Lu}|\\p{N})(\\p{Lu})(\\p{Ll})","gmu");class bD extends Cb{constructor(){super({id:"editor.action.transformToCamelcase",label:v("editor.transformToCamelcase","Transform to Camel Case"),alias:"Transform to Camel Case",precondition:W.writable})}_modifyText(e,t){const i=bD.wordBoundary.get();if(!i)return e;const n=e.split(i);return n.shift()+n.map(r=>r.substring(0,1).toLocaleUpperCase()+r.substring(1)).join("")}}bD.wordBoundary=new bg("[_\\s-]","gm");class Jv extends Cb{constructor(){super({id:"editor.action.transformToPascalcase",label:v("editor.transformToPascalcase","Transform to Pascal Case"),alias:"Transform to Pascal Case",precondition:W.writable})}_modifyText(e,t){const i=Jv.wordBoundary.get(),n=Jv.wordBoundaryToMaintain.get();return!i||!n?e:e.split(n).map(a=>a.split(i)).flat().map(a=>a.substring(0,1).toLocaleUpperCase()+a.substring(1)).join("")}}Jv.wordBoundary=new bg("[_\\s-]","gm");Jv.wordBoundaryToMaintain=new bg("(?<=\\.)","gm");class Jf extends Cb{static isSupported(){return[this.caseBoundary,this.singleLetters,this.underscoreBoundary].every(t=>t.isSupported())}constructor(){super({id:"editor.action.transformToKebabcase",label:v("editor.transformToKebabcase","Transform to Kebab Case"),alias:"Transform to Kebab Case",precondition:W.writable})}_modifyText(e,t){const i=Jf.caseBoundary.get(),n=Jf.singleLetters.get(),s=Jf.underscoreBoundary.get();return!i||!n||!s?e:e.replace(s,"$1-$3").replace(i,"$1-$2").replace(n,"$1-$2").toLocaleLowerCase()}}Jf.caseBoundary=new bg("(\\p{Ll})(\\p{Lu})","gmu");Jf.singleLetters=new bg("(\\p{Lu}|\\p{N})(\\p{Lu}\\p{Ll})","gmu");Jf.underscoreBoundary=new bg("(\\S)(_)(\\S)","gm");Ce(J6e);Ce(eVe);Ce(tVe);Ce(iVe);Ce(nVe);Ce(sVe);Ce(oVe);Ce(rVe);Ce(gO);Ce(aVe);Ce(lVe);Ce(cVe);Ce(dVe);Ce(uVe);Ce(hVe);Ce(fVe);Ce(gVe);Ce(pVe);Ce(mVe);Ce(_Ve);sm.caseBoundary.isSupported()&&sm.singleLetters.isSupported()&&Ce(sm);bD.wordBoundary.isSupported()&&Ce(bD);Jv.wordBoundary.isSupported()&&Ce(Jv);vD.titleBoundary.isSupported()&&Ce(vD);Jf.isSupported()&&Ce(Jf);var vVe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},oN=function(o,e){return function(t,i){e(t,i,o)}},GN;const oce=new Be("LinkedEditingInputVisible",!1),bVe="linked-editing-decoration";let Nm=GN=class extends J{static get(e){return e.getContribution(GN.ID)}constructor(e,t,i,n,s){super(),this.languageConfigurationService=n,this._syncRangesToken=0,this._localToDispose=this._register(new he),this._editor=e,this._providers=i.linkedEditingRangeProvider,this._enabled=!1,this._visibleContextKey=oce.bindTo(t),this._debounceInformation=s.for(this._providers,"Linked Editing",{max:200}),this._currentDecorations=this._editor.createDecorationsCollection(),this._languageWordPattern=null,this._currentWordPattern=null,this._ignoreChangeEvent=!1,this._localToDispose=this._register(new he),this._rangeUpdateTriggerPromise=null,this._rangeSyncTriggerPromise=null,this._currentRequestCts=null,this._currentRequestPosition=null,this._currentRequestModelVersion=null,this._register(this._editor.onDidChangeModel(()=>this.reinitialize(!0))),this._register(this._editor.onDidChangeConfiguration(r=>{(r.hasChanged(70)||r.hasChanged(93))&&this.reinitialize(!1)})),this._register(this._providers.onDidChange(()=>this.reinitialize(!1))),this._register(this._editor.onDidChangeModelLanguage(()=>this.reinitialize(!0))),this.reinitialize(!0)}reinitialize(e){const t=this._editor.getModel(),i=t!==null&&(this._editor.getOption(70)||this._editor.getOption(93))&&this._providers.has(t);if(i===this._enabled&&!e||(this._enabled=i,this.clearRanges(),this._localToDispose.clear(),!i||t===null))return;this._localToDispose.add(Ie.runAndSubscribe(t.onDidChangeLanguageConfiguration,()=>{this._languageWordPattern=this.languageConfigurationService.getLanguageConfiguration(t.getLanguageId()).getWordDefinition()}));const n=new Kc(this._debounceInformation.get(t)),s=()=>{var l;this._rangeUpdateTriggerPromise=n.trigger(()=>this.updateRanges(),(l=this._debounceDuration)!==null&&l!==void 0?l:this._debounceInformation.get(t))},r=new Kc(0),a=l=>{this._rangeSyncTriggerPromise=r.trigger(()=>this._syncRanges(l))};this._localToDispose.add(this._editor.onDidChangeCursorPosition(()=>{s()})),this._localToDispose.add(this._editor.onDidChangeModelContent(l=>{if(!this._ignoreChangeEvent&&this._currentDecorations.length>0){const c=this._currentDecorations.getRange(0);if(c&&l.changes.every(u=>c.intersectRanges(u.range))){a(this._syncRangesToken);return}}s()})),this._localToDispose.add({dispose:()=>{n.dispose(),r.dispose()}}),this.updateRanges()}_syncRanges(e){if(!this._editor.hasModel()||e!==this._syncRangesToken||this._currentDecorations.length===0)return;const t=this._editor.getModel(),i=this._currentDecorations.getRange(0);if(!i||i.startLineNumber!==i.endLineNumber)return this.clearRanges();const n=t.getValueInRange(i);if(this._currentWordPattern){const r=n.match(this._currentWordPattern);if((r?r[0].length:0)!==n.length)return this.clearRanges()}const s=[];for(let r=1,a=this._currentDecorations.length;r<a;r++){const l=this._currentDecorations.getRange(r);if(l)if(l.startLineNumber!==l.endLineNumber)s.push({range:l,text:n});else{let c=t.getValueInRange(l),u=n,f=l.startColumn,g=l.endColumn;const p=am(c,u);f+=p,c=c.substr(p),u=u.substr(p);const _=fR(c,u);g-=_,c=c.substr(0,c.length-_),u=u.substr(0,u.length-_),(f!==g||u.length!==0)&&s.push({range:new A(l.startLineNumber,f,l.endLineNumber,g),text:u})}}if(s.length!==0)try{this._editor.popUndoStop(),this._ignoreChangeEvent=!0;const r=this._editor._getViewModel().getPrevEditOperationType();this._editor.executeEdits("linkedEditing",s),this._editor._getViewModel().setPrevEditOperationType(r)}finally{this._ignoreChangeEvent=!1}}dispose(){this.clearRanges(),super.dispose()}clearRanges(){this._visibleContextKey.set(!1),this._currentDecorations.clear(),this._currentRequestCts&&(this._currentRequestCts.cancel(),this._currentRequestCts=null,this._currentRequestPosition=null)}async updateRanges(e=!1){if(!this._editor.hasModel()){this.clearRanges();return}const t=this._editor.getPosition();if(!this._enabled&&!e||this._editor.getSelections().length>1){this.clearRanges();return}const i=this._editor.getModel(),n=i.getVersionId();if(this._currentRequestPosition&&this._currentRequestModelVersion===n){if(t.equals(this._currentRequestPosition))return;if(this._currentDecorations.length>0){const r=this._currentDecorations.getRange(0);if(r&&r.containsPosition(t))return}}this.clearRanges(),this._currentRequestPosition=t,this._currentRequestModelVersion=n;const s=this._currentRequestCts=new os;try{const r=new Ao(!1),a=await rce(this._providers,i,t,s.token);if(this._debounceInformation.update(i,r.elapsed()),s!==this._currentRequestCts||(this._currentRequestCts=null,n!==i.getVersionId()))return;let l=[];a!=null&&a.ranges&&(l=a.ranges),this._currentWordPattern=(a==null?void 0:a.wordPattern)||this._languageWordPattern;let c=!1;for(let f=0,g=l.length;f<g;f++)if(A.containsPosition(l[f],t)){if(c=!0,f!==0){const p=l[f];l.splice(f,1),l.unshift(p)}break}if(!c){this.clearRanges();return}const u=l.map(f=>({range:f,options:GN.DECORATION}));this._visibleContextKey.set(!0),this._currentDecorations.set(u),this._syncRangesToken++}catch(r){eu(r)||Nt(r),(this._currentRequestCts===s||!this._currentRequestCts)&&this.clearRanges()}}};Nm.ID="editor.contrib.linkedEditing";Nm.DECORATION=Rt.register({description:"linked-editing",stickiness:0,className:bVe});Nm=GN=vVe([oN(1,bt),oN(2,Ze),oN(3,dn),oN(4,vc)],Nm);class CVe extends Ke{constructor(){super({id:"editor.action.linkedEditing",label:v("linkedEditing.label","Start Linked Editing"),alias:"Start Linked Editing",precondition:ue.and(W.writable,W.hasRenameProvider),kbOpts:{kbExpr:W.editorTextFocus,primary:3132,weight:100}})}runCommand(e,t){const i=e.get(gi),[n,s]=Array.isArray(t)&&t||[void 0,void 0];return gt.isUri(n)&&Z.isIPosition(s)?i.openCodeEditor({resource:n},i.getActiveCodeEditor()).then(r=>{r&&(r.setPosition(s),r.invokeWithinContext(a=>(this.reportTelemetry(a,r),this.run(a,r))))},Nt):super.runCommand(e,t)}run(e,t){const i=Nm.get(t);return i?Promise.resolve(i.updateRanges(!0)):Promise.resolve()}}const wVe=zs.bindToContribution(Nm.get);Me(new wVe({id:"cancelLinkedEditingInput",precondition:oce,handler:o=>o.clearRanges(),kbOpts:{kbExpr:W.editorTextFocus,weight:199,primary:9,secondary:[1033]}}));function rce(o,e,t,i){const n=o.ordered(e);return $V(n.map(s=>async()=>{try{return await s.provideLinkedEditingRanges(e,t,i)}catch(r){hs(r);return}}),s=>!!s&&Yo(s==null?void 0:s.ranges))}V("editor.linkedEditingBackground",{dark:ne.fromHex("#f00").transparent(.3),light:ne.fromHex("#f00").transparent(.3),hcDark:ne.fromHex("#f00").transparent(.3),hcLight:ne.white},v("editorLinkedEditingBackground","Background color when the editor auto renames on type."));xh("_executeLinkedEditingProvider",(o,e,t)=>{const{linkedEditingRangeProvider:i}=o.get(Ze);return rce(i,e,t,Yt.None)});pi(Nm.ID,Nm,1);Ce(CVe);let yVe=class{constructor(e,t){this._link=e,this._provider=t}toJSON(){return{range:this.range,url:this.url,tooltip:this.tooltip}}get range(){return this._link.range}get url(){return this._link.url}get tooltip(){return this._link.tooltip}async resolve(e){return this._link.url?this._link.url:typeof this._provider.resolveLink=="function"?Promise.resolve(this._provider.resolveLink(this._link,e)).then(t=>(this._link=t||this._link,this._link.url?this.resolve(e):Promise.reject(new Error("missing")))):Promise.reject(new Error("missing"))}};class eA{constructor(e){this._disposables=new he;let t=[];for(const[i,n]of e){const s=i.links.map(r=>new yVe(r,n));t=eA._union(t,s),IV(i)&&this._disposables.add(i)}this.links=t}dispose(){this._disposables.dispose(),this.links.length=0}static _union(e,t){const i=[];let n,s,r,a;for(n=0,r=0,s=e.length,a=t.length;n<s&&r<a;){const l=e[n],c=t[r];if(A.areIntersectingOrTouching(l.range,c.range)){n++;continue}A.compareRangesUsingStarts(l.range,c.range)<0?(i.push(l),n++):(i.push(c),r++)}for(;n<s;n++)i.push(e[n]);for(;r<a;r++)i.push(t[r]);return i}}function ace(o,e,t){const i=[],n=o.ordered(e).reverse().map((s,r)=>Promise.resolve(s.provideLinks(e,t)).then(a=>{a&&(i[r]=[a,s])},hs));return Promise.all(n).then(()=>{const s=new eA(Ud(i));return t.isCancellationRequested?(s.dispose(),new eA([])):s})}si.registerCommand("_executeLinkProvider",async(o,...e)=>{let[t,i]=e;wi(t instanceof gt),typeof i!="number"&&(i=0);const{linkProvider:n}=o.get(Ze),s=o.get(Fn).getModel(t);if(!s)return[];const r=await ace(n,s,Yt.None);if(!r)return[];for(let l=0;l<Math.min(i,r.links.length);l++)await r.links[l].resolve(Yt.None);const a=r.links.slice(0);return r.dispose(),a});var SVe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},rN=function(o,e){return function(t,i){e(t,i,o)}},P6;let B1=P6=class extends J{static get(e){return e.getContribution(P6.ID)}constructor(e,t,i,n,s){super(),this.editor=e,this.openerService=t,this.notificationService=i,this.languageFeaturesService=n,this.providers=this.languageFeaturesService.linkProvider,this.debounceInformation=s.for(this.providers,"Links",{min:1e3,max:4e3}),this.computeLinks=this._register(new Ui(()=>this.computeLinksNow(),1e3)),this.computePromise=null,this.activeLinksList=null,this.currentOccurrences={},this.activeLinkDecorationId=null;const r=this._register(new WP(e));this._register(r.onMouseMoveOrRelevantKeyDown(([a,l])=>{this._onEditorMouseMove(a,l)})),this._register(r.onExecute(a=>{this.onEditorMouseUp(a)})),this._register(r.onCancel(a=>{this.cleanUpActiveLinkDecoration()})),this._register(e.onDidChangeConfiguration(a=>{a.hasChanged(71)&&(this.updateDecorations([]),this.stop(),this.computeLinks.schedule(0))})),this._register(e.onDidChangeModelContent(a=>{this.editor.hasModel()&&this.computeLinks.schedule(this.debounceInformation.get(this.editor.getModel()))})),this._register(e.onDidChangeModel(a=>{this.currentOccurrences={},this.activeLinkDecorationId=null,this.stop(),this.computeLinks.schedule(0)})),this._register(e.onDidChangeModelLanguage(a=>{this.stop(),this.computeLinks.schedule(0)})),this._register(this.providers.onDidChange(a=>{this.stop(),this.computeLinks.schedule(0)})),this.computeLinks.schedule(0)}async computeLinksNow(){if(!this.editor.hasModel()||!this.editor.getOption(71))return;const e=this.editor.getModel();if(!e.isTooLargeForSyncing()&&this.providers.has(e)){this.activeLinksList&&(this.activeLinksList.dispose(),this.activeLinksList=null),this.computePromise=Qs(t=>ace(this.providers,e,t));try{const t=new Ao(!1);if(this.activeLinksList=await this.computePromise,this.debounceInformation.update(e,t.elapsed()),e.isDisposed())return;this.updateDecorations(this.activeLinksList.links)}catch(t){Nt(t)}finally{this.computePromise=null}}}updateDecorations(e){const t=this.editor.getOption(78)==="altKey",i=[],n=Object.keys(this.currentOccurrences);for(const r of n){const a=this.currentOccurrences[r];i.push(a.decorationId)}const s=[];if(e)for(const r of e)s.push(qC.decoration(r,t));this.editor.changeDecorations(r=>{const a=r.deltaDecorations(i,s);this.currentOccurrences={},this.activeLinkDecorationId=null;for(let l=0,c=a.length;l<c;l++){const u=new qC(e[l],a[l]);this.currentOccurrences[u.decorationId]=u}})}_onEditorMouseMove(e,t){const i=this.editor.getOption(78)==="altKey";if(this.isEnabled(e,t)){this.cleanUpActiveLinkDecoration();const n=this.getLinkOccurrence(e.target.position);n&&this.editor.changeDecorations(s=>{n.activate(s,i),this.activeLinkDecorationId=n.decorationId})}else this.cleanUpActiveLinkDecoration()}cleanUpActiveLinkDecoration(){const e=this.editor.getOption(78)==="altKey";if(this.activeLinkDecorationId){const t=this.currentOccurrences[this.activeLinkDecorationId];t&&this.editor.changeDecorations(i=>{t.deactivate(i,e)}),this.activeLinkDecorationId=null}}onEditorMouseUp(e){if(!this.isEnabled(e))return;const t=this.getLinkOccurrence(e.target.position);t&&this.openLinkOccurrence(t,e.hasSideBySideModifier,!0)}openLinkOccurrence(e,t,i=!1){if(!this.openerService)return;const{link:n}=e;n.resolve(Yt.None).then(s=>{if(typeof s=="string"&&this.editor.hasModel()){const r=this.editor.getModel().uri;if(r.scheme===Pt.file&&s.startsWith(`${Pt.file}:`)){const a=gt.parse(s);if(a.scheme===Pt.file){const l=Nu(a);let c=null;l.startsWith("/./")||l.startsWith("\\.\\")?c=`.${l.substr(1)}`:(l.startsWith("//./")||l.startsWith("\\\\.\\"))&&(c=`.${l.substr(2)}`),c&&(s=bIe(r,c))}}}return this.openerService.open(s,{openToSide:t,fromUserGesture:i,allowContributedOpeners:!0,allowCommands:!0,fromWorkspace:!0})},s=>{const r=s instanceof Error?s.message:s;r==="invalid"?this.notificationService.warn(v("invalid.url","Failed to open this link because it is not well-formed: {0}",n.url.toString())):r==="missing"?this.notificationService.warn(v("missing.url","Failed to open this link because its target is missing.")):Nt(s)})}getLinkOccurrence(e){if(!this.editor.hasModel()||!e)return null;const t=this.editor.getModel().getDecorationsInRange({startLineNumber:e.lineNumber,startColumn:e.column,endLineNumber:e.lineNumber,endColumn:e.column},0,!0);for(const i of t){const n=this.currentOccurrences[i.id];if(n)return n}return null}isEnabled(e,t){return!!(e.target.type===6&&(e.hasTriggerModifier||t&&t.keyCodeIsTriggerKey))}stop(){var e;this.computeLinks.cancel(),this.activeLinksList&&((e=this.activeLinksList)===null||e===void 0||e.dispose(),this.activeLinksList=null),this.computePromise&&(this.computePromise.cancel(),this.computePromise=null)}dispose(){super.dispose(),this.stop()}};B1.ID="editor.linkDetector";B1=P6=SVe([rN(1,wa),rN(2,ys),rN(3,Ze),rN(4,vc)],B1);const Jee={general:Rt.register({description:"detected-link",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link"}),active:Rt.register({description:"detected-link-active",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link-active"})};class qC{static decoration(e,t){return{range:e.range,options:qC._getOptions(e,t,!1)}}static _getOptions(e,t,i){const n={...i?Jee.active:Jee.general};return n.hoverMessage=LVe(e,t),n}constructor(e,t){this.link=e,this.decorationId=t}activate(e,t){e.changeDecorationOptions(this.decorationId,qC._getOptions(this.link,t,!0))}deactivate(e,t){e.changeDecorationOptions(this.decorationId,qC._getOptions(this.link,t,!1))}}function LVe(o,e){const t=o.url&&/^command:/i.test(o.url.toString()),i=o.tooltip?o.tooltip:t?v("links.navigate.executeCmd","Execute command"):v("links.navigate.follow","Follow link"),n=e?Kt?v("links.navigate.kb.meta.mac","cmd + click"):v("links.navigate.kb.meta","ctrl + click"):Kt?v("links.navigate.kb.alt.mac","option + click"):v("links.navigate.kb.alt","alt + click");if(o.url){let s="";if(/^command:/i.test(o.url.toString())){const a=o.url.toString().match(/^command:([^?#]+)/);if(a){const l=a[1];s=v("tooltip.explanation","Execute command {0}",l)}}return new qo("",!0).appendLink(o.url.toString(!0).replace(/ /g,"%20"),i,s).appendMarkdown(` (${n})`)}else return new qo().appendText(`${i} (${n})`)}class xVe extends Ke{constructor(){super({id:"editor.action.openLink",label:v("label","Open Link"),alias:"Open Link",precondition:void 0})}run(e,t){const i=B1.get(t);if(!i||!t.hasModel())return;const n=t.getSelections();for(const s of n){const r=i.getLinkOccurrence(s.getEndPosition());r&&i.openLinkOccurrence(r,!1)}}}pi(B1.ID,B1,1);Ce(xVe);class O6 extends J{constructor(e){super(),this._editor=e,this._register(this._editor.onMouseDown(t=>{const i=this._editor.getOption(117);i>=0&&t.target.type===6&&t.target.position.column>=i&&this._editor.updateOptions({stopRenderingLineAfter:-1})}))}}O6.ID="editor.contrib.longLinesHelper";pi(O6.ID,O6,2);const aN=V("editor.wordHighlightBackground",{dark:"#575757B8",light:"#57575740",hcDark:null,hcLight:null},v("wordHighlight","Background color of a symbol during read-access, like reading a variable. The color must not be opaque so as not to hide underlying decorations."),!0);V("editor.wordHighlightStrongBackground",{dark:"#004972B8",light:"#0e639c40",hcDark:null,hcLight:null},v("wordHighlightStrong","Background color of a symbol during write-access, like writing to a variable. The color must not be opaque so as not to hide underlying decorations."),!0);V("editor.wordHighlightTextBackground",{light:aN,dark:aN,hcDark:aN,hcLight:aN},v("wordHighlightText","Background color of a textual occurrence for a symbol. The color must not be opaque so as not to hide underlying decorations."),!0);const lN=V("editor.wordHighlightBorder",{light:null,dark:null,hcDark:Sn,hcLight:Sn},v("wordHighlightBorder","Border color of a symbol during read-access, like reading a variable."));V("editor.wordHighlightStrongBorder",{light:null,dark:null,hcDark:Sn,hcLight:Sn},v("wordHighlightStrongBorder","Border color of a symbol during write-access, like writing to a variable."));V("editor.wordHighlightTextBorder",{light:lN,dark:lN,hcDark:lN,hcLight:lN},v("wordHighlightTextBorder","Border color of a textual occurrence for a symbol."));const DVe=V("editorOverviewRuler.wordHighlightForeground",{dark:"#A0A0A0CC",light:"#A0A0A0CC",hcDark:"#A0A0A0CC",hcLight:"#A0A0A0CC"},v("overviewRulerWordHighlightForeground","Overview ruler marker color for symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),kVe=V("editorOverviewRuler.wordHighlightStrongForeground",{dark:"#C0A0C0CC",light:"#C0A0C0CC",hcDark:"#C0A0C0CC",hcLight:"#C0A0C0CC"},v("overviewRulerWordHighlightStrongForeground","Overview ruler marker color for write-access symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),EVe=V("editorOverviewRuler.wordHighlightTextForeground",{dark:jS,light:jS,hcDark:jS,hcLight:jS},v("overviewRulerWordHighlightTextForeground","Overview ruler marker color of a textual occurrence for a symbol. The color must not be opaque so as not to hide underlying decorations."),!0),IVe=Rt.register({description:"word-highlight-strong",stickiness:1,className:"wordHighlightStrong",overviewRuler:{color:Xn(kVe),position:kl.Center},minimap:{color:Xn(BA),position:1}}),TVe=Rt.register({description:"word-highlight-text",stickiness:1,className:"wordHighlightText",overviewRuler:{color:Xn(EVe),position:kl.Center},minimap:{color:Xn(BA),position:1}}),NVe=Rt.register({description:"selection-highlight-overview",stickiness:1,className:"selectionHighlight",overviewRuler:{color:Xn(jS),position:kl.Center},minimap:{color:Xn(BA),position:1}}),RVe=Rt.register({description:"selection-highlight",stickiness:1,className:"selectionHighlight"}),MVe=Rt.register({description:"word-highlight",stickiness:1,className:"wordHighlight",overviewRuler:{color:Xn(DVe),position:kl.Center},minimap:{color:Xn(BA),position:1}});function AVe(o){return o===JL.Write?IVe:o===JL.Text?TVe:MVe}function PVe(o){return o?RVe:NVe}_c((o,e)=>{const t=o.getColor(_H);t&&e.addRule(`.monaco-editor .selectionHighlight { background-color: ${t.transparent(.5)}; }`)});var OVe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},FVe=function(o,e){return function(t,i){e(t,i,o)}},F6;function Um(o,e){const t=e.filter(i=>!o.find(n=>n.equals(i)));if(t.length>=1){const i=t.map(s=>`line ${s.viewState.position.lineNumber} column ${s.viewState.position.column}`).join(", "),n=t.length===1?v("cursorAdded","Cursor added: {0}",i):v("cursorsAdded","Cursors added: {0}",i);fh(n)}}class BVe extends Ke{constructor(){super({id:"editor.action.insertCursorAbove",label:v("mutlicursor.insertAbove","Add Cursor Above"),alias:"Add Cursor Above",precondition:void 0,kbOpts:{kbExpr:W.editorTextFocus,primary:2576,linux:{primary:1552,secondary:[3088]},weight:100},menuOpts:{menuId:P.MenubarSelectionMenu,group:"3_multi",title:v({key:"miInsertCursorAbove",comment:["&& denotes a mnemonic"]},"&&Add Cursor Above"),order:2}})}run(e,t,i){if(!t.hasModel())return;let n=!0;i&&i.logicalLine===!1&&(n=!1);const s=t._getViewModel();if(s.cursorConfig.readOnly)return;s.model.pushStackElement();const r=s.getCursorStates();s.setCursorStates(i.source,3,ho.addCursorUp(s,r,n)),s.revealTopMostCursor(i.source),Um(r,s.getCursorStates())}}class WVe extends Ke{constructor(){super({id:"editor.action.insertCursorBelow",label:v("mutlicursor.insertBelow","Add Cursor Below"),alias:"Add Cursor Below",precondition:void 0,kbOpts:{kbExpr:W.editorTextFocus,primary:2578,linux:{primary:1554,secondary:[3090]},weight:100},menuOpts:{menuId:P.MenubarSelectionMenu,group:"3_multi",title:v({key:"miInsertCursorBelow",comment:["&& denotes a mnemonic"]},"A&&dd Cursor Below"),order:3}})}run(e,t,i){if(!t.hasModel())return;let n=!0;i&&i.logicalLine===!1&&(n=!1);const s=t._getViewModel();if(s.cursorConfig.readOnly)return;s.model.pushStackElement();const r=s.getCursorStates();s.setCursorStates(i.source,3,ho.addCursorDown(s,r,n)),s.revealBottomMostCursor(i.source),Um(r,s.getCursorStates())}}class VVe extends Ke{constructor(){super({id:"editor.action.insertCursorAtEndOfEachLineSelected",label:v("mutlicursor.insertAtEndOfEachLineSelected","Add Cursors to Line Ends"),alias:"Add Cursors to Line Ends",precondition:void 0,kbOpts:{kbExpr:W.editorTextFocus,primary:1575,weight:100},menuOpts:{menuId:P.MenubarSelectionMenu,group:"3_multi",title:v({key:"miInsertCursorAtEndOfEachLineSelected",comment:["&& denotes a mnemonic"]},"Add C&&ursors to Line Ends"),order:4}})}getCursorsForSelection(e,t,i){if(!e.isEmpty()){for(let n=e.startLineNumber;n<e.endLineNumber;n++){const s=t.getLineMaxColumn(n);i.push(new Xe(n,s,n,s))}e.endColumn>1&&i.push(new Xe(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn))}}run(e,t){if(!t.hasModel())return;const i=t.getModel(),n=t.getSelections(),s=t._getViewModel(),r=s.getCursorStates(),a=[];n.forEach(l=>this.getCursorsForSelection(l,i,a)),a.length>0&&t.setSelections(a),Um(r,s.getCursorStates())}}class HVe extends Ke{constructor(){super({id:"editor.action.addCursorsToBottom",label:v("mutlicursor.addCursorsToBottom","Add Cursors To Bottom"),alias:"Add Cursors To Bottom",precondition:void 0})}run(e,t){if(!t.hasModel())return;const i=t.getSelections(),n=t.getModel().getLineCount(),s=[];for(let l=i[0].startLineNumber;l<=n;l++)s.push(new Xe(l,i[0].startColumn,l,i[0].endColumn));const r=t._getViewModel(),a=r.getCursorStates();s.length>0&&t.setSelections(s),Um(a,r.getCursorStates())}}class zVe extends Ke{constructor(){super({id:"editor.action.addCursorsToTop",label:v("mutlicursor.addCursorsToTop","Add Cursors To Top"),alias:"Add Cursors To Top",precondition:void 0})}run(e,t){if(!t.hasModel())return;const i=t.getSelections(),n=[];for(let a=i[0].startLineNumber;a>=1;a--)n.push(new Xe(a,i[0].startColumn,a,i[0].endColumn));const s=t._getViewModel(),r=s.getCursorStates();n.length>0&&t.setSelections(n),Um(r,s.getCursorStates())}}class cN{constructor(e,t,i){this.selections=e,this.revealRange=t,this.revealScrollType=i}}class CD{static create(e,t){if(!e.hasModel())return null;const i=t.getState();if(!e.hasTextFocus()&&i.isRevealed&&i.searchString.length>0)return new CD(e,t,!1,i.searchString,i.wholeWord,i.matchCase,null);let n=!1,s,r;const a=e.getSelections();a.length===1&&a[0].isEmpty()?(n=!0,s=!0,r=!0):(s=i.wholeWord,r=i.matchCase);const l=e.getSelection();let c,u=null;if(l.isEmpty()){const f=e.getConfiguredWordAtPosition(l.getStartPosition());if(!f)return null;c=f.word,u=new Xe(l.startLineNumber,f.startColumn,l.startLineNumber,f.endColumn)}else c=e.getModel().getValueInRange(l).replace(/\r\n/g,`
`);return new CD(e,t,n,c,s,r,u)}constructor(e,t,i,n,s,r,a){this._editor=e,this.findController=t,this.isDisconnectedFromFindController=i,this.searchText=n,this.wholeWord=s,this.matchCase=r,this.currentMatch=a}addSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const e=this._getNextMatch();if(!e)return null;const t=this._editor.getSelections();return new cN(t.concat(e),e,0)}moveSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const e=this._getNextMatch();if(!e)return null;const t=this._editor.getSelections();return new cN(t.slice(0,t.length-1).concat(e),e,0)}_getNextMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const n=this.currentMatch;return this.currentMatch=null,n}this.findController.highlightFindOptions();const e=this._editor.getSelections(),t=e[e.length-1],i=this._editor.getModel().findNextMatch(this.searchText,t.getEndPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(131):null,!1);return i?new Xe(i.range.startLineNumber,i.range.startColumn,i.range.endLineNumber,i.range.endColumn):null}addSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const e=this._getPreviousMatch();if(!e)return null;const t=this._editor.getSelections();return new cN(t.concat(e),e,0)}moveSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const e=this._getPreviousMatch();if(!e)return null;const t=this._editor.getSelections();return new cN(t.slice(0,t.length-1).concat(e),e,0)}_getPreviousMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const n=this.currentMatch;return this.currentMatch=null,n}this.findController.highlightFindOptions();const e=this._editor.getSelections(),t=e[e.length-1],i=this._editor.getModel().findPreviousMatch(this.searchText,t.getStartPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(131):null,!1);return i?new Xe(i.range.startLineNumber,i.range.startColumn,i.range.endLineNumber,i.range.endColumn):null}selectAll(e){if(!this._editor.hasModel())return[];this.findController.highlightFindOptions();const t=this._editor.getModel();return e?t.findMatches(this.searchText,e,!1,this.matchCase,this.wholeWord?this._editor.getOption(131):null,!1,1073741824):t.findMatches(this.searchText,!0,!1,this.matchCase,this.wholeWord?this._editor.getOption(131):null,!1,1073741824)}}class eb extends J{static get(e){return e.getContribution(eb.ID)}constructor(e){super(),this._sessionDispose=this._register(new he),this._editor=e,this._ignoreSelectionChange=!1,this._session=null}dispose(){this._endSession(),super.dispose()}_beginSessionIfNeeded(e){if(!this._session){const t=CD.create(this._editor,e);if(!t)return;this._session=t;const i={searchString:this._session.searchText};this._session.isDisconnectedFromFindController&&(i.wholeWordOverride=1,i.matchCaseOverride=1,i.isRegexOverride=2),e.getState().change(i,!1),this._sessionDispose.add(this._editor.onDidChangeCursorSelection(n=>{this._ignoreSelectionChange||this._endSession()})),this._sessionDispose.add(this._editor.onDidBlurEditorText(()=>{this._endSession()})),this._sessionDispose.add(e.getState().onFindReplaceStateChange(n=>{(n.matchCase||n.wholeWord)&&this._endSession()}))}}_endSession(){if(this._sessionDispose.clear(),this._session&&this._session.isDisconnectedFromFindController){const e={wholeWordOverride:0,matchCaseOverride:0,isRegexOverride:0};this._session.findController.getState().change(e,!1)}this._session=null}_setSelections(e){this._ignoreSelectionChange=!0,this._editor.setSelections(e),this._ignoreSelectionChange=!1}_expandEmptyToWord(e,t){if(!t.isEmpty())return t;const i=this._editor.getConfiguredWordAtPosition(t.getStartPosition());return i?new Xe(t.startLineNumber,i.startColumn,t.startLineNumber,i.endColumn):t}_applySessionResult(e){e&&(this._setSelections(e.selections),e.revealRange&&this._editor.revealRangeInCenterIfOutsideViewport(e.revealRange,e.revealScrollType))}getSession(e){return this._session}addSelectionToNextFindMatch(e){if(this._editor.hasModel()){if(!this._session){const t=this._editor.getSelections();if(t.length>1){const n=e.getState().matchCase;if(!lce(this._editor.getModel(),t,n)){const r=this._editor.getModel(),a=[];for(let l=0,c=t.length;l<c;l++)a[l]=this._expandEmptyToWord(r,t[l]);this._editor.setSelections(a);return}}}this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToNextFindMatch())}}addSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToPreviousFindMatch())}moveSelectionToNextFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToNextFindMatch())}moveSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToPreviousFindMatch())}selectAll(e){if(!this._editor.hasModel())return;let t=null;const i=e.getState();if(i.isRevealed&&i.searchString.length>0&&i.isRegex){const n=this._editor.getModel();i.searchScope?t=n.findMatches(i.searchString,i.searchScope,i.isRegex,i.matchCase,i.wholeWord?this._editor.getOption(131):null,!1,1073741824):t=n.findMatches(i.searchString,!0,i.isRegex,i.matchCase,i.wholeWord?this._editor.getOption(131):null,!1,1073741824)}else{if(this._beginSessionIfNeeded(e),!this._session)return;t=this._session.selectAll(i.searchScope)}if(t.length>0){const n=this._editor.getSelection();for(let s=0,r=t.length;s<r;s++){const a=t[s];if(a.range.intersectRanges(n)){t[s]=t[0],t[0]=a;break}}this._setSelections(t.map(s=>new Xe(s.range.startLineNumber,s.range.startColumn,s.range.endLineNumber,s.range.endColumn)))}}}eb.ID="editor.contrib.multiCursorController";class hw extends Ke{run(e,t){const i=eb.get(t);if(!i)return;const n=t._getViewModel();if(n){const s=n.getCursorStates(),r=qr.get(t);if(r)this._run(i,r);else{const a=e.get(ct).createInstance(qr,t);this._run(i,a),a.dispose()}Um(s,n.getCursorStates())}}}class UVe extends hw{constructor(){super({id:"editor.action.addSelectionToNextFindMatch",label:v("addSelectionToNextFindMatch","Add Selection To Next Find Match"),alias:"Add Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:W.focus,primary:2082,weight:100},menuOpts:{menuId:P.MenubarSelectionMenu,group:"3_multi",title:v({key:"miAddSelectionToNextFindMatch",comment:["&& denotes a mnemonic"]},"Add &&Next Occurrence"),order:5}})}_run(e,t){e.addSelectionToNextFindMatch(t)}}class $Ve extends hw{constructor(){super({id:"editor.action.addSelectionToPreviousFindMatch",label:v("addSelectionToPreviousFindMatch","Add Selection To Previous Find Match"),alias:"Add Selection To Previous Find Match",precondition:void 0,menuOpts:{menuId:P.MenubarSelectionMenu,group:"3_multi",title:v({key:"miAddSelectionToPreviousFindMatch",comment:["&& denotes a mnemonic"]},"Add P&&revious Occurrence"),order:6}})}_run(e,t){e.addSelectionToPreviousFindMatch(t)}}class jVe extends hw{constructor(){super({id:"editor.action.moveSelectionToNextFindMatch",label:v("moveSelectionToNextFindMatch","Move Last Selection To Next Find Match"),alias:"Move Last Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:W.focus,primary:Fs(2089,2082),weight:100}})}_run(e,t){e.moveSelectionToNextFindMatch(t)}}class KVe extends hw{constructor(){super({id:"editor.action.moveSelectionToPreviousFindMatch",label:v("moveSelectionToPreviousFindMatch","Move Last Selection To Previous Find Match"),alias:"Move Last Selection To Previous Find Match",precondition:void 0})}_run(e,t){e.moveSelectionToPreviousFindMatch(t)}}class qVe extends hw{constructor(){super({id:"editor.action.selectHighlights",label:v("selectAllOccurrencesOfFindMatch","Select All Occurrences of Find Match"),alias:"Select All Occurrences of Find Match",precondition:void 0,kbOpts:{kbExpr:W.focus,primary:3114,weight:100},menuOpts:{menuId:P.MenubarSelectionMenu,group:"3_multi",title:v({key:"miSelectHighlights",comment:["&& denotes a mnemonic"]},"Select All &&Occurrences"),order:7}})}_run(e,t){e.selectAll(t)}}class GVe extends hw{constructor(){super({id:"editor.action.changeAll",label:v("changeAll.label","Change All Occurrences"),alias:"Change All Occurrences",precondition:ue.and(W.writable,W.editorTextFocus),kbOpts:{kbExpr:W.editorTextFocus,primary:2108,weight:100},contextMenuOpts:{group:"1_modification",order:1.2}})}_run(e,t){e.selectAll(t)}}class YVe{constructor(e,t,i,n,s){this._model=e,this._searchText=t,this._matchCase=i,this._wordSeparators=n,this._modelVersionId=this._model.getVersionId(),this._cachedFindMatches=null,s&&this._model===s._model&&this._searchText===s._searchText&&this._matchCase===s._matchCase&&this._wordSeparators===s._wordSeparators&&this._modelVersionId===s._modelVersionId&&(this._cachedFindMatches=s._cachedFindMatches)}findMatches(){return this._cachedFindMatches===null&&(this._cachedFindMatches=this._model.findMatches(this._searchText,!0,!1,this._matchCase,this._wordSeparators,!1).map(e=>e.range),this._cachedFindMatches.sort(A.compareRangesUsingStarts)),this._cachedFindMatches}}let wD=F6=class extends J{constructor(e,t){super(),this._languageFeaturesService=t,this.editor=e,this._isEnabled=e.getOption(108),this._decorations=e.createDecorationsCollection(),this.updateSoon=this._register(new Ui(()=>this._update(),300)),this.state=null,this._register(e.onDidChangeConfiguration(n=>{this._isEnabled=e.getOption(108)})),this._register(e.onDidChangeCursorSelection(n=>{this._isEnabled&&(n.selection.isEmpty()?n.reason===3?(this.state&&this._setState(null),this.updateSoon.schedule()):this._setState(null):this._update())})),this._register(e.onDidChangeModel(n=>{this._setState(null)})),this._register(e.onDidChangeModelContent(n=>{this._isEnabled&&this.updateSoon.schedule()}));const i=qr.get(e);i&&this._register(i.getState().onFindReplaceStateChange(n=>{this._update()})),this.updateSoon.schedule()}_update(){this._setState(F6._createState(this.state,this._isEnabled,this.editor))}static _createState(e,t,i){if(!t||!i.hasModel())return null;const n=i.getSelection();if(n.startLineNumber!==n.endLineNumber)return null;const s=eb.get(i);if(!s)return null;const r=qr.get(i);if(!r)return null;let a=s.getSession(r);if(!a){const u=i.getSelections();if(u.length>1){const g=r.getState().matchCase;if(!lce(i.getModel(),u,g))return null}a=CD.create(i,r)}if(!a||a.currentMatch||/^[ \t]+$/.test(a.searchText)||a.searchText.length>200)return null;const l=r.getState(),c=l.matchCase;if(l.isRevealed){let u=l.searchString;c||(u=u.toLowerCase());let f=a.searchText;if(c||(f=f.toLowerCase()),u===f&&a.matchCase===l.matchCase&&a.wholeWord===l.wholeWord&&!l.isRegex)return null}return new YVe(i.getModel(),a.searchText,a.matchCase,a.wholeWord?i.getOption(131):null,e)}_setState(e){if(this.state=e,!this.state){this._decorations.clear();return}if(!this.editor.hasModel())return;const t=this.editor.getModel();if(t.isTooLargeForTokenization())return;const i=this.state.findMatches(),n=this.editor.getSelections();n.sort(A.compareRangesUsingStarts);const s=[];for(let c=0,u=0,f=i.length,g=n.length;c<f;){const p=i[c];if(u>=g)s.push(p),c++;else{const _=A.compareRangesUsingStarts(p,n[u]);_<0?((n[u].isEmpty()||!A.areIntersecting(p,n[u]))&&s.push(p),c++):(_>0||c++,u++)}}const r=this.editor.getOption(81)!=="off",a=this._languageFeaturesService.documentHighlightProvider.has(t)&&r,l=s.map(c=>({range:c,options:PVe(a)}));this._decorations.set(l)}dispose(){this._setState(null),super.dispose()}};wD.ID="editor.contrib.selectionHighlighter";wD=F6=OVe([FVe(1,Ze)],wD);function lce(o,e,t){const i=ete(o,e[0],!t);for(let n=1,s=e.length;n<s;n++){const r=e[n];if(r.isEmpty())return!1;const a=ete(o,r,!t);if(i!==a)return!1}return!0}function ete(o,e,t){const i=o.getValueInRange(e);return t?i.toLowerCase():i}class ZVe extends Ke{constructor(){super({id:"editor.action.focusNextCursor",label:v("mutlicursor.focusNextCursor","Focus Next Cursor"),metadata:{description:v("mutlicursor.focusNextCursor.description","Focuses the next cursor"),args:[]},alias:"Focus Next Cursor",precondition:void 0})}run(e,t,i){if(!t.hasModel())return;const n=t._getViewModel();if(n.cursorConfig.readOnly)return;n.model.pushStackElement();const s=Array.from(n.getCursorStates()),r=s.shift();r&&(s.push(r),n.setCursorStates(i.source,3,s),n.revealPrimaryCursor(i.source,!0),Um(s,n.getCursorStates()))}}class QVe extends Ke{constructor(){super({id:"editor.action.focusPreviousCursor",label:v("mutlicursor.focusPreviousCursor","Focus Previous Cursor"),metadata:{description:v("mutlicursor.focusPreviousCursor.description","Focuses the previous cursor"),args:[]},alias:"Focus Previous Cursor",precondition:void 0})}run(e,t,i){if(!t.hasModel())return;const n=t._getViewModel();if(n.cursorConfig.readOnly)return;n.model.pushStackElement();const s=Array.from(n.getCursorStates()),r=s.pop();r&&(s.unshift(r),n.setCursorStates(i.source,3,s),n.revealPrimaryCursor(i.source,!0),Um(s,n.getCursorStates()))}}pi(eb.ID,eb,4);pi(wD.ID,wD,1);Ce(BVe);Ce(WVe);Ce(VVe);Ce(UVe);Ce($Ve);Ce(jVe);Ce(KVe);Ce(qVe);Ce(GVe);Ce(HVe);Ce(zVe);Ce(ZVe);Ce(QVe);const XVe="editor.action.inlineEdit.accept",JVe="editor.action.inlineEdit.reject",eHe="editor.action.inlineEdit.jumpTo",tHe="editor.action.inlineEdit.jumpBack";var iHe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},nHe=function(o,e){return function(t,i){e(t,i,o)}};const RB="inline-edit";let B6=class extends J{constructor(e,t,i){super(),this.editor=e,this.model=t,this.languageService=i,this.isDisposed=ni(this,!1),this.currentTextModel=Gi(this.editor.onDidChangeModel,()=>this.editor.getModel()),this.uiState=Dt(this,n=>{var s;if(this.isDisposed.read(n))return;const r=this.currentTextModel.read(n);if(r!==this.model.targetTextModel.read(n))return;const a=this.model.ghostText.read(n);if(!a)return;let l=(s=this.model.range)===null||s===void 0?void 0:s.read(n);l&&l.startLineNumber===l.endLineNumber&&l.startColumn===l.endColumn&&(l=void 0);const c=(l?l.startLineNumber===l.endLineNumber:!0)&&a.parts.length===1&&a.parts[0].lines.length===1,u=a.parts.length===1&&a.parts[0].lines.every(x=>x.length===0),f=[],g=[];function p(x,D){if(g.length>0){const E=g[g.length-1];D&&E.decorations.push(new Hr(E.content.length+1,E.content.length+1+x[0].length,D,0)),E.content+=x[0],x=x.slice(1)}for(const E of x)g.push({content:E,decorations:D?[new Hr(1,E.length+1,D,0)]:[]})}const _=r.getLineContent(a.lineNumber);let b,y=0;if(!u){for(const x of a.parts){let D=x.lines;l&&!c&&(p(D,RB),D=[]),b===void 0?(f.push({column:x.column,text:D[0],preview:x.preview}),D=D.slice(1)):p([_.substring(y,x.column-1)],void 0),D.length>0&&(p(D,RB),b===void 0&&x.column<=_.length&&(b=x.column)),y=x.column-1}b!==void 0&&p([_.substring(y)],void 0)}const S=b!==void 0?new Hle(b,_.length+1):void 0,L=c||!l?a.lineNumber:l.endLineNumber-1;return{inlineTexts:f,additionalLines:g,hiddenRange:S,lineNumber:L,additionalReservedLineCount:this.model.minReservedLineCount.read(n),targetTextModel:r,range:l,isSingleLine:c,isPureRemove:u,backgroundColoring:this.model.backgroundColoring.read(n)}}),this.decorations=Dt(this,n=>{const s=this.uiState.read(n);if(!s)return[];const r=[];if(s.hiddenRange&&r.push({range:s.hiddenRange.toRange(s.lineNumber),options:{inlineClassName:"inline-edit-hidden",description:"inline-edit-hidden"}}),s.range){const a=[];if(s.isSingleLine)a.push(s.range);else if(s.isPureRemove){const c=s.range.endLineNumber-s.range.startLineNumber;for(let u=0;u<c;u++){const f=s.range.startLineNumber+u,g=s.targetTextModel.getLineFirstNonWhitespaceColumn(f),p=s.targetTextModel.getLineLastNonWhitespaceColumn(f),_=new A(f,g,f,p);a.push(_)}}else{const c=s.range.endLineNumber-s.range.startLineNumber;for(let u=0;u<c;u++){const f=s.range.startLineNumber+u,g=s.targetTextModel.getLineFirstNonWhitespaceColumn(f),p=s.targetTextModel.getLineLastNonWhitespaceColumn(f),_=new A(f,g,f,p);a.push(_)}}const l=s.backgroundColoring?"inline-edit-remove backgroundColoring":"inline-edit-remove";for(const c of a)r.push({range:c,options:{inlineClassName:l,description:"inline-edit-remove"}})}for(const a of s.inlineTexts)r.push({range:A.fromPositions(new Z(s.lineNumber,a.column)),options:{description:RB,after:{content:a.text,inlineClassName:a.preview?"inline-edit-decoration-preview":"inline-edit-decoration",cursorStops:Vc.Left},showIfCollapsed:!0}});return r}),this.additionalLinesWidget=this._register(new Ule(this.editor,this.languageService.languageIdCodec,Dt(n=>{const s=this.uiState.read(n);return s&&!s.isPureRemove?{lineNumber:s.lineNumber,additionalLines:s.additionalLines,minReservedLineCount:s.additionalReservedLineCount,targetTextModel:s.targetTextModel}:void 0}))),this._register(lt(()=>{this.isDisposed.set(!0,void 0)})),this._register(zle(this.editor,this.decorations))}ownsViewZone(e){return this.additionalLinesWidget.viewZoneId===e}};B6=iHe([nHe(2,xn)],B6);var NU=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Df=function(o,e){return function(t,i){e(t,i,o)}},YN;let W6=class extends J{constructor(e,t,i){super(),this.editor=e,this.model=t,this.instantiationService=i,this.alwaysShowToolbar=Gi(this.editor.onDidChangeConfiguration,()=>this.editor.getOption(63).showToolbar==="always"),this.sessionPosition=void 0,this.position=Dt(this,n=>{var s,r,a;const l=(s=this.model.read(n))===null||s===void 0?void 0:s.widget.model.ghostText.read(n);if(!this.alwaysShowToolbar.read(n)||!l||l.parts.length===0)return this.sessionPosition=void 0,null;const c=l.parts[0].column;this.sessionPosition&&this.sessionPosition.lineNumber!==l.lineNumber&&(this.sessionPosition=void 0);const u=new Z(l.lineNumber,Math.min(c,(a=(r=this.sessionPosition)===null||r===void 0?void 0:r.column)!==null&&a!==void 0?a:Number.MAX_SAFE_INTEGER));return this.sessionPosition=u,u}),this._register(gc((n,s)=>{if(!this.model.read(n)||!this.alwaysShowToolbar.read(n))return;const a=s.add(this.instantiationService.createInstance(W1,this.editor,!0,this.position));e.addContentWidget(a),s.add(lt(()=>e.removeContentWidget(a)))}))}};W6=NU([Df(2,ct)],W6);let W1=YN=class extends J{constructor(e,t,i,n,s,r){super(),this.editor=e,this.withBorder=t,this._position=i,this._contextKeyService=s,this._menuService=r,this.id=`InlineEditHintsContentWidget${YN.id++}`,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this.nodes=Ii("div.inlineEditHints",{className:this.withBorder?".withBorder":""},[Ii("div@toolBar")]),this.inlineCompletionsActionsMenus=this._register(this._menuService.createMenu(P.InlineEditActions,this._contextKeyService)),this.toolBar=this._register(n.createInstance(V6,this.nodes.toolBar,this.editor,P.InlineEditToolbar,{menuOptions:{renderShortTitle:!0},toolbarOptions:{primaryGroup:a=>a.startsWith("primary")},actionViewItemProvider:(a,l)=>{if(a instanceof Dl)return n.createInstance(sHe,a,void 0)},telemetrySource:"InlineEditToolbar"})),this._register(this.toolBar.onDidChangeDropdownVisibility(a=>{YN._dropDownVisible=a})),this._register(zt(a=>{this._position.read(a),this.editor.layoutContentWidget(this)})),this._register(zt(a=>{const l=[];for(const[c,u]of this.inlineCompletionsActionsMenus.getActions())for(const f of u)f instanceof Dl&&l.push(f);l.length>0&&l.unshift(new Os),this.toolBar.setAdditionalSecondaryActions(l)}))}getId(){return this.id}getDomNode(){return this.nodes.root}getPosition(){return{position:this._position.get(),preference:[1,2],positionAffinity:3}}};W1._dropDownVisible=!1;W1.id=0;W1=YN=NU([Df(3,ct),Df(4,bt),Df(5,Nl)],W1);class sHe extends bm{updateLabel(){const e=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!e)return super.updateLabel();if(this.label){const t=Ii("div.keybinding").root;this._register(new nw(t,Va,{disableTitle:!0,...nre})).set(e),this.label.textContent=this._action.label,this.label.appendChild(t),this.label.classList.add("inlineEditStatusBarItemLabel")}}updateTooltip(){}}let V6=class extends eD{constructor(e,t,i,n,s,r,a,l,c){super(e,{resetMenu:i,...n},s,r,a,l,c),this.editor=t,this.menuId=i,this.options2=n,this.menuService=s,this.contextKeyService=r,this.menu=this._store.add(this.menuService.createMenu(this.menuId,this.contextKeyService,{emitEventsForSubmenuChanges:!0})),this.additionalActions=[],this.prependedPrimaryActions=[],this._store.add(this.menu.onDidChange(()=>this.updateToolbar())),this._store.add(this.editor.onDidChangeCursorPosition(()=>this.updateToolbar())),this.updateToolbar()}updateToolbar(){var e,t,i,n,s,r,a;const l=[],c=[];fP(this.menu,(e=this.options2)===null||e===void 0?void 0:e.menuOptions,{primary:l,secondary:c},(i=(t=this.options2)===null||t===void 0?void 0:t.toolbarOptions)===null||i===void 0?void 0:i.primaryGroup,(s=(n=this.options2)===null||n===void 0?void 0:n.toolbarOptions)===null||s===void 0?void 0:s.shouldInlineSubmenu,(a=(r=this.options2)===null||r===void 0?void 0:r.toolbarOptions)===null||a===void 0?void 0:a.useSeparatorsInPrimaryActions),c.push(...this.additionalActions),l.unshift(...this.prependedPrimaryActions),this.setActions(l,c)}setAdditionalSecondaryActions(e){zn(this.additionalActions,e,(t,i)=>t===i)||(this.additionalActions=e,this.updateToolbar())}};V6=NU([Df(4,Nl),Df(5,bt),Df(6,Ya),Df(7,Bi),Df(8,pr)],V6);var oHe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},FS=function(o,e){return function(t,i){e(t,i,o)}},dv;class rHe{constructor(e,t){this.widget=e,this.edit=t}dispose(){this.widget.dispose()}}let Hs=dv=class extends J{static get(e){return e.getContribution(dv.ID)}constructor(e,t,i,n,s,r){super(),this.editor=e,this.instantiationService=t,this.contextKeyService=i,this.languageFeaturesService=n,this._commandService=s,this._configurationService=r,this._isVisibleContext=dv.inlineEditVisibleContext.bindTo(this.contextKeyService),this._isCursorAtInlineEditContext=dv.cursorAtInlineEditContext.bindTo(this.contextKeyService),this._currentEdit=this._register(Bx(this,void 0)),this._isAccepting=ni(this,!1),this._enabled=Gi(this.editor.onDidChangeConfiguration,()=>this.editor.getOption(63).enabled),this._fontFamily=Gi(this.editor.onDidChangeConfiguration,()=>this.editor.getOption(63).fontFamily),this._backgroundColoring=Gi(this.editor.onDidChangeConfiguration,()=>this.editor.getOption(63).backgroundColoring);const a=Go("InlineEditController.modelContentChangedSignal",e.onDidChangeModelContent);this._register(zt(g=>{this._enabled.read(g)&&(a.read(g),!this._isAccepting.read(g)&&this.getInlineEdit(e,!0))}));const l=Gi(e.onDidChangeCursorPosition,()=>e.getPosition());this._register(zt(g=>{if(!this._enabled.read(g))return;const p=l.read(g);p&&this.checkCursorPosition(p)})),this._register(zt(g=>{const p=this._currentEdit.read(g);if(this._isCursorAtInlineEditContext.set(!1),!p){this._isVisibleContext.set(!1);return}this._isVisibleContext.set(!0);const _=e.getPosition();_&&this.checkCursorPosition(_)}));const c=Go("InlineEditController.editorBlurSignal",e.onDidBlurEditorWidget);this._register(zt(async g=>{var p;this._enabled.read(g)&&(c.read(g),!(this._configurationService.getValue("editor.experimentalInlineEdit.keepOnBlur")||e.getOption(63).keepOnBlur)&&((p=this._currentRequestCts)===null||p===void 0||p.dispose(!0),this._currentRequestCts=void 0,await this.clear(!1)))}));const u=Go("InlineEditController.editorFocusSignal",e.onDidFocusEditorText);this._register(zt(g=>{this._enabled.read(g)&&(u.read(g),this.getInlineEdit(e,!0))}));const f=this._register(Bie());this._register(zt(g=>{const p=this._fontFamily.read(g);f.setStyle(p===""||p==="default"?"":`
.monaco-editor .inline-edit-decoration,
.monaco-editor .inline-edit-decoration-preview,
.monaco-editor .inline-edit {
	font-family: ${p};
}`)})),this._register(new W6(this.editor,this._currentEdit,this.instantiationService))}checkCursorPosition(e){var t;if(!this._currentEdit){this._isCursorAtInlineEditContext.set(!1);return}const i=(t=this._currentEdit.get())===null||t===void 0?void 0:t.edit;if(!i){this._isCursorAtInlineEditContext.set(!1);return}this._isCursorAtInlineEditContext.set(A.containsPosition(i.range,e))}validateInlineEdit(e,t){var i,n;if(t.text.includes(`
`)&&t.range.startLineNumber!==t.range.endLineNumber&&t.range.startColumn!==t.range.endColumn){if(t.range.startColumn!==1)return!1;const r=t.range.endLineNumber,a=t.range.endColumn,l=(n=(i=e.getModel())===null||i===void 0?void 0:i.getLineLength(r))!==null&&n!==void 0?n:0;if(a!==l+1)return!1}return!0}async fetchInlineEdit(e,t){this._currentRequestCts&&this._currentRequestCts.dispose(!0);const i=e.getModel();if(!i)return;const n=i.getVersionId(),s=this.languageFeaturesService.inlineEditProvider.all(i);if(s.length===0)return;const r=s[0];this._currentRequestCts=new os;const a=this._currentRequestCts.token,l=t?uR.Automatic:uR.Invoke;if(t&&await aHe(50,a),a.isCancellationRequested||i.isDisposed()||i.getVersionId()!==n)return;const u=await r.provideInlineEdit(i,{triggerKind:l},a);if(u&&!(a.isCancellationRequested||i.isDisposed()||i.getVersionId()!==n)&&this.validateInlineEdit(e,u))return u}async getInlineEdit(e,t){var i;this._isCursorAtInlineEditContext.set(!1),await this.clear();const n=await this.fetchInlineEdit(e,t);if(!n)return;const s=n.range.endLineNumber,r=n.range.endColumn,a=new hD(s,[new GM(r,n.text,!1)]),l=this.instantiationService.createInstance(B6,this.editor,{ghostText:Ad(a),minReservedLineCount:Ad(0),targetTextModel:Ad((i=this.editor.getModel())!==null&&i!==void 0?i:void 0),range:Ad(n.range),backgroundColoring:this._backgroundColoring});this._currentEdit.set(new rHe(l,n),void 0)}async trigger(){await this.getInlineEdit(this.editor,!1)}async jumpBack(){this._jumpBackPosition&&(this.editor.setPosition(this._jumpBackPosition),this.editor.revealPositionInCenterIfOutsideViewport(this._jumpBackPosition))}async accept(){var e;this._isAccepting.set(!0,void 0);const t=(e=this._currentEdit.get())===null||e===void 0?void 0:e.edit;if(!t)return;let i=t.text;t.text.startsWith(`
`)&&(i=t.text.substring(1)),this.editor.pushUndoStop(),this.editor.executeEdits("acceptCurrent",[On.replace(A.lift(t.range),i)]),t.accepted&&await this._commandService.executeCommand(t.accepted.id,...t.accepted.arguments||[]).then(void 0,hs),this.freeEdit(t),qi(n=>{this._currentEdit.set(void 0,n),this._isAccepting.set(!1,n)})}jumpToCurrent(){var e,t;this._jumpBackPosition=(e=this.editor.getSelection())===null||e===void 0?void 0:e.getStartPosition();const i=(t=this._currentEdit.get())===null||t===void 0?void 0:t.edit;if(!i)return;const n=Z.lift({lineNumber:i.range.startLineNumber,column:i.range.startColumn});this.editor.setPosition(n),this.editor.revealPositionInCenterIfOutsideViewport(n)}async clear(e=!0){var t;const i=(t=this._currentEdit.get())===null||t===void 0?void 0:t.edit;i&&(i!=null&&i.rejected)&&e&&await this._commandService.executeCommand(i.rejected.id,...i.rejected.arguments||[]).then(void 0,hs),i&&this.freeEdit(i),this._currentEdit.set(void 0,void 0)}freeEdit(e){const t=this.editor.getModel();if(!t)return;const i=this.languageFeaturesService.inlineEditProvider.all(t);i.length!==0&&i[0].freeInlineEdit(e)}shouldShowHoverAt(e){const t=this._currentEdit.get();if(!t)return!1;const i=t.edit,n=t.widget.model;if(A.containsPosition(i.range,e.getStartPosition())||A.containsPosition(i.range,e.getEndPosition()))return!0;const r=n.ghostText.get();return r?r.parts.some(a=>e.containsPosition(new Z(r.lineNumber,a.column))):!1}shouldShowHoverAtViewZone(e){var t,i;return(i=(t=this._currentEdit.get())===null||t===void 0?void 0:t.widget.ownsViewZone(e))!==null&&i!==void 0?i:!1}};Hs.ID="editor.contrib.inlineEditController";Hs.inlineEditVisibleKey="inlineEditVisible";Hs.inlineEditVisibleContext=new Be(dv.inlineEditVisibleKey,!1);Hs.cursorAtInlineEditKey="cursorAtInlineEdit";Hs.cursorAtInlineEditContext=new Be(dv.cursorAtInlineEditKey,!1);Hs=dv=oHe([FS(1,ct),FS(2,bt),FS(3,Ze),FS(4,Un),FS(5,$t)],Hs);function aHe(o,e){return new Promise(t=>{let i;const n=setTimeout(()=>{i&&i.dispose(),t()},o);e&&(i=e.onCancellationRequested(()=>{clearTimeout(n),i&&i.dispose(),t()}))})}class lHe extends Ke{constructor(){super({id:XVe,label:"Accept Inline Edit",alias:"Accept Inline Edit",precondition:ue.and(W.writable,Hs.inlineEditVisibleContext),kbOpts:[{weight:101,primary:2,kbExpr:ue.and(W.writable,Hs.inlineEditVisibleContext,Hs.cursorAtInlineEditContext)}],menuOpts:[{menuId:P.InlineEditToolbar,title:"Accept",group:"primary",order:1}]})}async run(e,t){const i=Hs.get(t);await(i==null?void 0:i.accept())}}class cHe extends Ke{constructor(){const e=ue.and(W.writable,ue.not(Hs.inlineEditVisibleKey));super({id:"editor.action.inlineEdit.trigger",label:"Trigger Inline Edit",alias:"Trigger Inline Edit",precondition:e,kbOpts:{weight:101,primary:2646,kbExpr:e}})}async run(e,t){const i=Hs.get(t);i==null||i.trigger()}}class dHe extends Ke{constructor(){const e=ue.and(W.writable,Hs.inlineEditVisibleContext,ue.not(Hs.cursorAtInlineEditKey));super({id:eHe,label:"Jump to Inline Edit",alias:"Jump to Inline Edit",precondition:e,kbOpts:{weight:101,primary:2646,kbExpr:e},menuOpts:[{menuId:P.InlineEditToolbar,title:"Jump To Edit",group:"primary",order:3,when:e}]})}async run(e,t){const i=Hs.get(t);i==null||i.jumpToCurrent()}}class uHe extends Ke{constructor(){const e=ue.and(W.writable,Hs.cursorAtInlineEditContext);super({id:tHe,label:"Jump Back from Inline Edit",alias:"Jump Back from Inline Edit",precondition:e,kbOpts:{weight:110,primary:2646,kbExpr:e},menuOpts:[{menuId:P.InlineEditToolbar,title:"Jump Back",group:"primary",order:3,when:e}]})}async run(e,t){const i=Hs.get(t);i==null||i.jumpBack()}}class hHe extends Ke{constructor(){const e=ue.and(W.writable,Hs.inlineEditVisibleContext);super({id:JVe,label:"Reject Inline Edit",alias:"Reject Inline Edit",precondition:e,kbOpts:{weight:100,primary:9,kbExpr:e},menuOpts:[{menuId:P.InlineEditToolbar,title:"Reject",group:"secondary",order:2}]})}async run(e,t){const i=Hs.get(t);await(i==null?void 0:i.clear())}}var fHe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},tte=function(o,e){return function(t,i){e(t,i,o)}};class gHe{constructor(e,t,i){this.owner=e,this.range=t,this.controller=i}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}let H6=class{constructor(e,t,i){this._editor=e,this._instantiationService=t,this._telemetryService=i,this.hoverOrdinal=5}suggestHoverAnchor(e){const t=Hs.get(this._editor);if(!t)return null;const i=e.target;if(i.type===8){const n=i.detail;if(t.shouldShowHoverAtViewZone(n.viewZoneId)){const s=i.range;return new wv(1e3,this,s,e.event.posx,e.event.posy,!1)}}return i.type===7&&t.shouldShowHoverAt(i.range)?new wv(1e3,this,i.range,e.event.posx,e.event.posy,!1):i.type===6&&i.detail.mightBeForeignElement&&t.shouldShowHoverAt(i.range)?new wv(1e3,this,i.range,e.event.posx,e.event.posy,!1):null}computeSync(e,t){if(this._editor.getOption(63).showToolbar!=="onHover")return[];const i=Hs.get(this._editor);return i&&i.shouldShowHoverAt(e.range)?[new gHe(this,e.range,i)]:[]}renderHoverParts(e,t){const i=new he;this._telemetryService.publicLog2("inlineEditHover.shown");const n=this._instantiationService.createInstance(W1,this._editor,!1,Ad(null));return e.fragment.appendChild(n.getDomNode()),i.add(n),i}};H6=fHe([tte(1,ct),tte(2,pr)],H6);Ce(lHe);Ce(hHe);Ce(dHe);Ce(uHe);Ce(cHe);pi(Hs.ID,Hs,3);zm.register(H6);const tb={Visible:new Be("parameterHintsVisible",!1),MultipleSignatures:new Be("parameterHintsMultipleSignatures",!1)};async function cce(o,e,t,i,n){const s=o.ordered(e);for(const r of s)try{const a=await r.provideSignatureHelp(e,t,n,i);if(a)return a}catch(a){hs(a)}}si.registerCommand("_executeSignatureHelpProvider",async(o,...e)=>{const[t,i,n]=e;wi(gt.isUri(t)),wi(Z.isIPosition(i)),wi(typeof n=="string"||!n);const s=o.get(Ze),r=await o.get(Ca).createModelReference(t);try{const a=await cce(s.signatureHelpProvider,r.object.textEditorModel,Z.lift(i),{triggerKind:oh.Invoke,isRetrigger:!1,triggerCharacter:n},Yt.None);return a?(setTimeout(()=>a.dispose(),0),a.value):void 0}finally{r.dispose()}});var gp;(function(o){o.Default={type:0};class e{constructor(n,s){this.request=n,this.previouslyActiveHints=s,this.type=2}}o.Pending=e;class t{constructor(n){this.hints=n,this.type=1}}o.Active=t})(gp||(gp={}));class pO extends J{constructor(e,t,i=pO.DEFAULT_DELAY){super(),this._onChangedHints=this._register(new Y),this.onChangedHints=this._onChangedHints.event,this.triggerOnType=!1,this._state=gp.Default,this._pendingTriggers=[],this._lastSignatureHelpResult=this._register(new Xs),this.triggerChars=new LR,this.retriggerChars=new LR,this.triggerId=0,this.editor=e,this.providers=t,this.throttledDelayer=new Kc(i),this._register(this.editor.onDidBlurEditorWidget(()=>this.cancel())),this._register(this.editor.onDidChangeConfiguration(()=>this.onEditorConfigurationChange())),this._register(this.editor.onDidChangeModel(n=>this.onModelChanged())),this._register(this.editor.onDidChangeModelLanguage(n=>this.onModelChanged())),this._register(this.editor.onDidChangeCursorSelection(n=>this.onCursorChange(n))),this._register(this.editor.onDidChangeModelContent(n=>this.onModelContentChange())),this._register(this.providers.onDidChange(this.onModelChanged,this)),this._register(this.editor.onDidType(n=>this.onDidType(n))),this.onEditorConfigurationChange(),this.onModelChanged()}get state(){return this._state}set state(e){this._state.type===2&&this._state.request.cancel(),this._state=e}cancel(e=!1){this.state=gp.Default,this.throttledDelayer.cancel(),e||this._onChangedHints.fire(void 0)}trigger(e,t){const i=this.editor.getModel();if(!i||!this.providers.has(i))return;const n=++this.triggerId;this._pendingTriggers.push(e),this.throttledDelayer.trigger(()=>this.doTrigger(n),t).catch(Nt)}next(){if(this.state.type!==1)return;const e=this.state.hints.signatures.length,t=this.state.hints.activeSignature,i=t%e===e-1,n=this.editor.getOption(86).cycle;if((e<2||i)&&!n){this.cancel();return}this.updateActiveSignature(i&&n?0:t+1)}previous(){if(this.state.type!==1)return;const e=this.state.hints.signatures.length,t=this.state.hints.activeSignature,i=t===0,n=this.editor.getOption(86).cycle;if((e<2||i)&&!n){this.cancel();return}this.updateActiveSignature(i&&n?e-1:t-1)}updateActiveSignature(e){this.state.type===1&&(this.state=new gp.Active({...this.state.hints,activeSignature:e}),this._onChangedHints.fire(this.state.hints))}async doTrigger(e){const t=this.state.type===1||this.state.type===2,i=this.getLastActiveHints();if(this.cancel(!0),this._pendingTriggers.length===0)return!1;const n=this._pendingTriggers.reduce(pHe);this._pendingTriggers=[];const s={triggerKind:n.triggerKind,triggerCharacter:n.triggerCharacter,isRetrigger:t,activeSignatureHelp:i};if(!this.editor.hasModel())return!1;const r=this.editor.getModel(),a=this.editor.getPosition();this.state=new gp.Pending(Qs(l=>cce(this.providers,r,a,s,l)),i);try{const l=await this.state.request;return e!==this.triggerId?(l==null||l.dispose(),!1):!l||!l.value.signatures||l.value.signatures.length===0?(l==null||l.dispose(),this._lastSignatureHelpResult.clear(),this.cancel(),!1):(this.state=new gp.Active(l.value),this._lastSignatureHelpResult.value=l,this._onChangedHints.fire(this.state.hints),!0)}catch(l){return e===this.triggerId&&(this.state=gp.Default),Nt(l),!1}}getLastActiveHints(){switch(this.state.type){case 1:return this.state.hints;case 2:return this.state.previouslyActiveHints;default:return}}get isTriggered(){return this.state.type===1||this.state.type===2||this.throttledDelayer.isTriggered()}onModelChanged(){this.cancel(),this.triggerChars.clear(),this.retriggerChars.clear();const e=this.editor.getModel();if(e)for(const t of this.providers.ordered(e)){for(const i of t.signatureHelpTriggerCharacters||[])if(i.length){const n=i.charCodeAt(0);this.triggerChars.add(n),this.retriggerChars.add(n)}for(const i of t.signatureHelpRetriggerCharacters||[])i.length&&this.retriggerChars.add(i.charCodeAt(0))}}onDidType(e){if(!this.triggerOnType)return;const t=e.length-1,i=e.charCodeAt(t);(this.triggerChars.has(i)||this.isTriggered&&this.retriggerChars.has(i))&&this.trigger({triggerKind:oh.TriggerCharacter,triggerCharacter:e.charAt(t)})}onCursorChange(e){e.source==="mouse"?this.cancel():this.isTriggered&&this.trigger({triggerKind:oh.ContentChange})}onModelContentChange(){this.isTriggered&&this.trigger({triggerKind:oh.ContentChange})}onEditorConfigurationChange(){this.triggerOnType=this.editor.getOption(86).enabled,this.triggerOnType||this.cancel()}dispose(){this.cancel(!0),super.dispose()}}pO.DEFAULT_DELAY=120;function pHe(o,e){switch(e.triggerKind){case oh.Invoke:return e;case oh.ContentChange:return o;case oh.TriggerCharacter:default:return e}}var mHe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},MB=function(o,e){return function(t,i){e(t,i,o)}},z6;const ol=ye,_He=gs("parameter-hints-next",Ee.chevronDown,v("parameterHintsNextIcon","Icon for show next parameter hint.")),vHe=gs("parameter-hints-previous",Ee.chevronUp,v("parameterHintsPreviousIcon","Icon for show previous parameter hint."));let tA=z6=class extends J{constructor(e,t,i,n,s){super(),this.editor=e,this.model=t,this.renderDisposeables=this._register(new he),this.visible=!1,this.announcedLabel=null,this.allowEditorOverflow=!0,this.markdownRenderer=this._register(new mh({editor:e},s,n)),this.keyVisible=tb.Visible.bindTo(i),this.keyMultipleSignatures=tb.MultipleSignatures.bindTo(i)}createParameterHintDOMNodes(){const e=ol(".editor-widget.parameter-hints-widget"),t=ge(e,ol(".phwrapper"));t.tabIndex=-1;const i=ge(t,ol(".controls")),n=ge(i,ol(".button"+pt.asCSSSelector(vHe))),s=ge(i,ol(".overloads")),r=ge(i,ol(".button"+pt.asCSSSelector(_He)));this._register(oe(n,"click",g=>{Ut.stop(g),this.previous()})),this._register(oe(r,"click",g=>{Ut.stop(g),this.next()}));const a=ol(".body"),l=new KD(a,{alwaysConsumeMouseWheel:!0});this._register(l),t.appendChild(l.getDomNode());const c=ge(a,ol(".signature")),u=ge(a,ol(".docs"));e.style.userSelect="text",this.domNodes={element:e,signature:c,overloads:s,docs:u,scrollbar:l},this.editor.addContentWidget(this),this.hide(),this._register(this.editor.onDidChangeCursorSelection(g=>{this.visible&&this.editor.layoutContentWidget(this)}));const f=()=>{if(!this.domNodes)return;const g=this.editor.getOption(50);this.domNodes.element.style.fontSize=`${g.fontSize}px`,this.domNodes.element.style.lineHeight=`${g.lineHeight/g.fontSize}`};f(),this._register(Ie.chain(this.editor.onDidChangeConfiguration.bind(this.editor),g=>g.filter(p=>p.hasChanged(50)))(f)),this._register(this.editor.onDidLayoutChange(g=>this.updateMaxHeight())),this.updateMaxHeight()}show(){this.visible||(this.domNodes||this.createParameterHintDOMNodes(),this.keyVisible.set(!0),this.visible=!0,setTimeout(()=>{var e;(e=this.domNodes)===null||e===void 0||e.element.classList.add("visible")},100),this.editor.layoutContentWidget(this))}hide(){var e;this.renderDisposeables.clear(),this.visible&&(this.keyVisible.reset(),this.visible=!1,this.announcedLabel=null,(e=this.domNodes)===null||e===void 0||e.element.classList.remove("visible"),this.editor.layoutContentWidget(this))}getPosition(){return this.visible?{position:this.editor.getPosition(),preference:[1,2]}:null}render(e){var t;if(this.renderDisposeables.clear(),!this.domNodes)return;const i=e.signatures.length>1;this.domNodes.element.classList.toggle("multiple",i),this.keyMultipleSignatures.set(i),this.domNodes.signature.innerText="",this.domNodes.docs.innerText="";const n=e.signatures[e.activeSignature];if(!n)return;const s=ge(this.domNodes.signature,ol(".code")),r=this.editor.getOption(50);s.style.fontSize=`${r.fontSize}px`,s.style.fontFamily=r.fontFamily;const a=n.parameters.length>0,l=(t=n.activeParameter)!==null&&t!==void 0?t:e.activeParameter;if(a)this.renderParameters(s,n,l);else{const f=ge(s,ol("span"));f.textContent=n.label}const c=n.parameters[l];if(c!=null&&c.documentation){const f=ol("span.documentation");if(typeof c.documentation=="string")f.textContent=c.documentation;else{const g=this.renderMarkdownDocs(c.documentation);f.appendChild(g.element)}ge(this.domNodes.docs,ol("p",{},f))}if(n.documentation!==void 0)if(typeof n.documentation=="string")ge(this.domNodes.docs,ol("p",{},n.documentation));else{const f=this.renderMarkdownDocs(n.documentation);ge(this.domNodes.docs,f.element)}const u=this.hasDocs(n,c);if(this.domNodes.signature.classList.toggle("has-docs",u),this.domNodes.docs.classList.toggle("empty",!u),this.domNodes.overloads.textContent=String(e.activeSignature+1).padStart(e.signatures.length.toString().length,"0")+"/"+e.signatures.length,c){let f="";const g=n.parameters[l];Array.isArray(g.label)?f=n.label.substring(g.label[0],g.label[1]):f=g.label,g.documentation&&(f+=typeof g.documentation=="string"?`, ${g.documentation}`:`, ${g.documentation.value}`),n.documentation&&(f+=typeof n.documentation=="string"?`, ${n.documentation}`:`, ${n.documentation.value}`),this.announcedLabel!==f&&(_a(v("hint","{0}, hint",f)),this.announcedLabel=f)}this.editor.layoutContentWidget(this),this.domNodes.scrollbar.scanDomNode()}renderMarkdownDocs(e){const t=this.renderDisposeables.add(this.markdownRenderer.render(e,{asyncRenderCallback:()=>{var i;(i=this.domNodes)===null||i===void 0||i.scrollbar.scanDomNode()}}));return t.element.classList.add("markdown-docs"),t}hasDocs(e,t){return!!(t&&typeof t.documentation=="string"&&Dp(t.documentation).length>0||t&&typeof t.documentation=="object"&&Dp(t.documentation).value.length>0||e.documentation&&typeof e.documentation=="string"&&Dp(e.documentation).length>0||e.documentation&&typeof e.documentation=="object"&&Dp(e.documentation.value).length>0)}renderParameters(e,t,i){const[n,s]=this.getParameterLabelOffsets(t,i),r=document.createElement("span");r.textContent=t.label.substring(0,n);const a=document.createElement("span");a.textContent=t.label.substring(n,s),a.className="parameter active";const l=document.createElement("span");l.textContent=t.label.substring(s),ge(e,r,a,l)}getParameterLabelOffsets(e,t){const i=e.parameters[t];if(i){if(Array.isArray(i.label))return i.label;if(i.label.length){const n=new RegExp(`(\\W|^)${Ll(i.label)}(?=\\W|$)`,"g");n.test(e.label);const s=n.lastIndex-i.label.length;return s>=0?[s,n.lastIndex]:[0,0]}else return[0,0]}else return[0,0]}next(){this.editor.focus(),this.model.next()}previous(){this.editor.focus(),this.model.previous()}getDomNode(){return this.domNodes||this.createParameterHintDOMNodes(),this.domNodes.element}getId(){return z6.ID}updateMaxHeight(){if(!this.domNodes)return;const t=`${Math.max(this.editor.getLayoutInfo().height/4,250)}px`;this.domNodes.element.style.maxHeight=t;const i=this.domNodes.element.getElementsByClassName("phwrapper");i.length&&(i[0].style.maxHeight=t)}};tA.ID="editor.widget.parameterHintsWidget";tA=z6=mHe([MB(2,bt),MB(3,wa),MB(4,xn)],tA);V("editorHoverWidget.highlightForeground",{dark:zc,light:zc,hcDark:zc,hcLight:zc},v("editorHoverWidgetHighlightForeground","Foreground color of the active item in the parameter hint."));var bHe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},ite=function(o,e){return function(t,i){e(t,i,o)}},U6;let ib=U6=class extends J{static get(e){return e.getContribution(U6.ID)}constructor(e,t,i){super(),this.editor=e,this.model=this._register(new pO(e,i.signatureHelpProvider)),this._register(this.model.onChangedHints(n=>{var s;n?(this.widget.value.show(),this.widget.value.render(n)):(s=this.widget.rawValue)===null||s===void 0||s.hide()})),this.widget=new tu(()=>this._register(t.createInstance(tA,this.editor,this.model)))}cancel(){this.model.cancel()}previous(){var e;(e=this.widget.rawValue)===null||e===void 0||e.previous()}next(){var e;(e=this.widget.rawValue)===null||e===void 0||e.next()}trigger(e){this.model.trigger(e,0)}};ib.ID="editor.controller.parameterHints";ib=U6=bHe([ite(1,ct),ite(2,Ze)],ib);class CHe extends Ke{constructor(){super({id:"editor.action.triggerParameterHints",label:v("parameterHints.trigger.label","Trigger Parameter Hints"),alias:"Trigger Parameter Hints",precondition:W.hasSignatureHelpProvider,kbOpts:{kbExpr:W.editorTextFocus,primary:3082,weight:100}})}run(e,t){const i=ib.get(t);i==null||i.trigger({triggerKind:oh.Invoke})}}pi(ib.ID,ib,2);Ce(CHe);const RU=175,MU=zs.bindToContribution(ib.get);Me(new MU({id:"closeParameterHints",precondition:tb.Visible,handler:o=>o.cancel(),kbOpts:{weight:RU,kbExpr:W.focus,primary:9,secondary:[1033]}}));Me(new MU({id:"showPrevParameterHint",precondition:ue.and(tb.Visible,tb.MultipleSignatures),handler:o=>o.previous(),kbOpts:{weight:RU,kbExpr:W.focus,primary:16,secondary:[528],mac:{primary:16,secondary:[528,302]}}}));Me(new MU({id:"showNextParameterHint",precondition:ue.and(tb.Visible,tb.MultipleSignatures),handler:o=>o.next(),kbOpts:{weight:RU,kbExpr:W.focus,primary:18,secondary:[530],mac:{primary:18,secondary:[530,300]}}}));var wHe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},dN=function(o,e){return function(t,i){e(t,i,o)}};const fw=new Be("renameInputVisible",!1,v("renameInputVisible","Whether the rename input widget is visible"));new Be("renameInputFocused",!1,v("renameInputFocused","Whether the rename input widget is focused"));let $6=class{constructor(e,t,i,n,s,r){this._editor=e,this._acceptKeybindings=t,this._themeService=i,this._keybindingService=n,this._logService=r,this.allowEditorOverflow=!0,this._disposables=new he,this._visibleContextKey=fw.bindTo(s),this._isEditingRenameCandidate=!1,this._beforeFirstInputFieldEditSW=new Ao,this._input=new yHe,this._disposables.add(this._input),this._editor.addContentWidget(this),this._disposables.add(this._editor.onDidChangeConfiguration(a=>{a.hasChanged(50)&&this._updateFont()})),this._disposables.add(i.onDidColorThemeChange(this._updateStyles,this))}dispose(){this._disposables.dispose(),this._editor.removeContentWidget(this)}getId(){return"__renameInputWidget"}getDomNode(){return this._domNode||(this._domNode=document.createElement("div"),this._domNode.className="monaco-editor rename-box",this._domNode.appendChild(this._input.domNode),this._renameCandidateListView=this._disposables.add(new AU(this._domNode,{fontInfo:this._editor.getOption(50),onFocusChange:e=>{this._input.domNode.value=e,this._isEditingRenameCandidate=!1},onSelectionChange:()=>{this._isEditingRenameCandidate=!1,this.acceptInput(!1)}})),this._disposables.add(this._input.onDidChange(()=>{var e,t,i,n;((e=this._renameCandidateListView)===null||e===void 0?void 0:e.focusedCandidate)!==void 0&&(this._isEditingRenameCandidate=!0),(t=this._timeBeforeFirstInputFieldEdit)!==null&&t!==void 0||(this._timeBeforeFirstInputFieldEdit=this._beforeFirstInputFieldEditSW.elapsed()),((i=this._renameCandidateProvidersCts)===null||i===void 0?void 0:i.token.isCancellationRequested)===!1&&this._renameCandidateProvidersCts.cancel(),(n=this._renameCandidateListView)===null||n===void 0||n.clearFocus()})),this._label=document.createElement("div"),this._label.className="rename-label",this._domNode.appendChild(this._label),this._updateFont(),this._updateStyles(this._themeService.getColorTheme())),this._domNode}_updateStyles(e){var t,i,n,s;if(!this._domNode)return;const r=e.getColor(Pf),a=e.getColor(Ane);this._domNode.style.backgroundColor=String((t=e.getColor(us))!==null&&t!==void 0?t:""),this._domNode.style.boxShadow=r?` 0 0 8px 2px ${r}`:"",this._domNode.style.border=a?`1px solid ${a}`:"",this._domNode.style.color=String((i=e.getColor(Fne))!==null&&i!==void 0?i:""),this._input.domNode.style.backgroundColor=String((n=e.getColor(One))!==null&&n!==void 0?n:"");const l=e.getColor(Bne);this._input.domNode.style.borderWidth=l?"1px":"0px",this._input.domNode.style.borderStyle=l?"solid":"none",this._input.domNode.style.borderColor=(s=l==null?void 0:l.toString())!==null&&s!==void 0?s:"none"}_updateFont(){if(this._domNode===void 0)return;wi(this._label!==void 0,"RenameWidget#_updateFont: _label must not be undefined given _domNode is defined"),this._editor.applyFontInfo(this._input.domNode);const e=this._editor.getOption(50);this._label.style.fontSize=`${this._computeLabelFontSize(e.fontSize)}px`}_computeLabelFontSize(e){return e*.8}getPosition(){if(!this._visible||!this._editor.hasModel()||!this._editor.getDomNode())return null;const e=um(this.getDomNode().ownerDocument.body),t=ws(this._editor.getDomNode()),i=this._getTopForPosition();this._nPxAvailableAbove=i+t.top,this._nPxAvailableBelow=e.height-this._nPxAvailableAbove;const n=this._editor.getOption(67),{totalHeight:s}=nb.getLayoutInfo({lineHeight:n}),r=this._nPxAvailableBelow>s*6?[2,1]:[1,2];return{position:this._position,preference:r}}beforeRender(){var e,t;const[i,n]=this._acceptKeybindings;return this._label.innerText=v({key:"label",comment:['placeholders are keybindings, e.g "F2 to Rename, Shift+F2 to Preview"']},"{0} to Rename, {1} to Preview",(e=this._keybindingService.lookupKeybinding(i))===null||e===void 0?void 0:e.getLabel(),(t=this._keybindingService.lookupKeybinding(n))===null||t===void 0?void 0:t.getLabel()),this._domNode.style.minWidth="200px",null}afterRender(e){if(this._trace("invoking afterRender, position: ",e?"not null":"null"),e===null){this.cancelInput(!0,"afterRender (because position is null)");return}if(!this._editor.hasModel()||!this._editor.getDomNode())return;wi(this._renameCandidateListView),wi(this._nPxAvailableAbove!==void 0),wi(this._nPxAvailableBelow!==void 0);const t=Ef(this._input.domNode),i=Ef(this._label);let n;e===2?n=this._nPxAvailableBelow:n=this._nPxAvailableAbove,this._renameCandidateListView.layout({height:n-i-t,width:Ir(this._input.domNode)})}acceptInput(e){var t;this._trace("invoking acceptInput"),(t=this._currentAcceptInput)===null||t===void 0||t.call(this,e)}cancelInput(e,t){var i;this._trace(`invoking cancelInput, caller: ${t}, _currentCancelInput: ${this._currentAcceptInput?"not undefined":"undefined"}`),(i=this._currentCancelInput)===null||i===void 0||i.call(this,e)}focusNextRenameSuggestion(){var e;!((e=this._renameCandidateListView)===null||e===void 0)&&e.focusNext()||(this._input.domNode.value=this._currentName)}focusPreviousRenameSuggestion(){var e;!((e=this._renameCandidateListView)===null||e===void 0)&&e.focusPrevious()||(this._input.domNode.value=this._currentName)}getInput(e,t,i,n,s){const{start:r,end:a}=this._getSelection(e,t);this._renameCandidateProvidersCts=new os;const l=n(this._renameCandidateProvidersCts.token);this._updateRenameCandidates(l,t,s.token),this._isEditingRenameCandidate=!1,this._domNode.classList.toggle("preview",i),this._position=new Z(e.startLineNumber,e.startColumn),this._currentName=t,this._input.domNode.value=t,this._input.domNode.setAttribute("selectionStart",r.toString()),this._input.domNode.setAttribute("selectionEnd",a.toString()),this._input.domNode.size=Math.max((e.endColumn-e.startColumn)*1.1,20),this._beforeFirstInputFieldEditSW.reset();const c=new he;c.add(lt(()=>s.dispose(!0))),c.add(lt(()=>{this._renameCandidateProvidersCts!==void 0&&(this._renameCandidateProvidersCts.dispose(!0),this._renameCandidateProvidersCts=void 0)}));const u=new BD;return u.p.finally(()=>{c.dispose(),this._hide()}),this._currentCancelInput=f=>{var g;return this._trace("invoking _currentCancelInput"),this._currentAcceptInput=void 0,this._currentCancelInput=void 0,(g=this._renameCandidateListView)===null||g===void 0||g.clearCandidates(),u.complete(f),!0},this._currentAcceptInput=f=>{this._trace("invoking _currentAcceptInput"),wi(this._renameCandidateListView!==void 0);const g=this._renameCandidateListView.nCandidates;let p,_;const b=this._renameCandidateListView.focusedCandidate;if(b!==void 0?(this._trace("using new name from renameSuggestion"),p=b,_={k:"renameSuggestion"}):(this._trace("using new name from inputField"),p=this._input.domNode.value,_=this._isEditingRenameCandidate?{k:"userEditedRenameSuggestion"}:{k:"inputField"}),p===t||p.trim().length===0){this.cancelInput(!0,"_currentAcceptInput (because newName === value || newName.trim().length === 0)");return}this._currentAcceptInput=void 0,this._currentCancelInput=void 0,this._renameCandidateListView.clearCandidates(),u.complete({newName:p,wantsPreview:i&&f,stats:{source:_,nRenameSuggestions:g,timeBeforeFirstInputFieldEdit:this._timeBeforeFirstInputFieldEdit}})},c.add(s.token.onCancellationRequested(()=>this.cancelInput(!0,"cts.token.onCancellationRequested"))),c.add(this._editor.onDidBlurEditorWidget(()=>{var f;return this.cancelInput(!(!((f=this._domNode)===null||f===void 0)&&f.ownerDocument.hasFocus()),"editor.onDidBlurEditorWidget")})),this._show(),u.p}_getSelection(e,t){wi(this._editor.hasModel());const i=this._editor.getSelection();let n=0,s=t.length;return!A.isEmpty(i)&&!A.spansMultipleLines(i)&&A.containsRange(e,i)&&(n=Math.max(0,i.startColumn-e.startColumn),s=Math.min(e.endColumn,i.endColumn)-e.startColumn),{start:n,end:s}}_show(){this._trace("invoking _show"),this._editor.revealLineInCenterIfOutsideViewport(this._position.lineNumber,0),this._visible=!0,this._visibleContextKey.set(!0),this._editor.layoutContentWidget(this),setTimeout(()=>{this._input.domNode.focus(),this._input.domNode.setSelectionRange(parseInt(this._input.domNode.getAttribute("selectionStart")),parseInt(this._input.domNode.getAttribute("selectionEnd")))},100)}async _updateRenameCandidates(e,t,i){const n=(...c)=>this._trace("_updateRenameCandidates",...c);n("start");const s=await FD(Promise.allSettled(e),i);if(s===void 0){n("returning early - received updateRenameCandidates results - undefined");return}const r=s.flatMap(c=>c.status==="fulfilled"&&sh(c.value)?c.value:[]);n(`received updateRenameCandidates results - total (unfiltered) ${r.length} candidates.`);const a=eg(r,c=>c.newSymbolName);n(`distinct candidates - ${a.length} candidates.`);const l=a.filter(({newSymbolName:c})=>c.trim().length>0&&c!==this._input.domNode.value&&c!==t);if(n(`valid distinct candidates - ${r.length} candidates.`),l.length<1){n("returning early - no valid distinct candidates");return}n("setting candidates"),this._renameCandidateListView.setCandidates(l),n("asking editor to re-layout"),this._editor.layoutContentWidget(this)}_hide(){this._trace("invoked _hide"),this._visible=!1,this._visibleContextKey.reset(),this._editor.layoutContentWidget(this)}_getTopForPosition(){const e=this._editor.getVisibleRanges();let t;return e.length>0?t=e[0].startLineNumber:(this._logService.warn("RenameWidget#_getTopForPosition: this should not happen - visibleRanges is empty"),t=Math.max(1,this._position.lineNumber-5)),this._editor.getTopForLineNumber(this._position.lineNumber)-this._editor.getTopForLineNumber(t)}_trace(...e){this._logService.trace("RenameWidget",...e)}};$6=wHe([dN(2,Us),dN(3,Bi),dN(4,bt),dN(5,mr)],$6);class AU{constructor(e,t){this._disposables=new he,this._availableHeight=0,this._minimumWidth=0,this._lineHeight=t.fontInfo.lineHeight,this._typicalHalfwidthCharacterWidth=t.fontInfo.typicalHalfwidthCharacterWidth,this._listContainer=document.createElement("div"),e.appendChild(this._listContainer),this._listWidget=AU._createListWidget(this._listContainer,this._candidateViewHeight,t.fontInfo),this._listWidget.onDidChangeFocus(i=>{i.elements.length===1&&t.onFocusChange(i.elements[0].newSymbolName)},this._disposables),this._listWidget.onDidChangeSelection(i=>{i.elements.length===1&&t.onSelectionChange()},this._disposables),this._disposables.add(this._listWidget.onDidBlur(i=>{this._listWidget.setFocus([])})),this._listWidget.style(hb({listInactiveFocusForeground:Rp,listInactiveFocusBackground:Mp}))}dispose(){this._listWidget.dispose(),this._disposables.dispose()}layout({height:e,width:t}){this._availableHeight=e,this._minimumWidth=t}setCandidates(e){this._listWidget.splice(0,0,e);const t=this._pickListHeight(e.length),i=this._pickListWidth(e);this._listWidget.layout(t,i),this._listContainer.style.height=`${t}px`,this._listContainer.style.width=`${i}px`,fh(v("renameSuggestionsReceivedAria","Received {0} rename suggestions",e.length))}clearCandidates(){this._listContainer.style.height="0px",this._listContainer.style.width="0px",this._listWidget.splice(0,this._listWidget.length,[])}get nCandidates(){return this._listWidget.length}get focusedCandidate(){if(this._listWidget.length===0)return;const e=this._listWidget.getSelectedElements()[0];if(e!==void 0)return e.newSymbolName;const t=this._listWidget.getFocusedElements()[0];if(t!==void 0)return t.newSymbolName}focusNext(){if(this._listWidget.length===0)return!1;const e=this._listWidget.getFocus();return e.length===0?(this._listWidget.focusFirst(),!0):e[0]===this._listWidget.length-1?(this._listWidget.setFocus([]),!1):(this._listWidget.focusNext(),!0)}focusPrevious(){if(this._listWidget.length===0)return!1;const e=this._listWidget.getFocus();return e.length===0?(this._listWidget.focusLast(),!0):e[0]===0?(this._listWidget.setFocus([]),!1):(this._listWidget.focusPrevious(),!0)}clearFocus(){this._listWidget.setFocus([])}get _candidateViewHeight(){const{totalHeight:e}=nb.getLayoutInfo({lineHeight:this._lineHeight});return e}_pickListHeight(e){const t=this._candidateViewHeight*e;return Math.min(t,this._availableHeight,this._candidateViewHeight*7)}_pickListWidth(e){const t=Math.ceil(Math.max(...e.map(n=>n.newSymbolName.length))*this._typicalHalfwidthCharacterWidth);return Math.max(this._minimumWidth,25+t+10)}static _createListWidget(e,t,i){const n=new class{getTemplateId(r){return"candidate"}getHeight(r){return t}},s=new class{constructor(){this.templateId="candidate"}renderTemplate(r){return new nb(r,i)}renderElement(r,a,l){l.populate(r)}disposeTemplate(r){r.dispose()}};return new Ml("NewSymbolNameCandidates",e,n,[s],{keyboardSupport:!1,mouseSupport:!0,multipleSelectionSupport:!1})}}class yHe{constructor(){this._onDidChange=new Y,this.onDidChange=this._onDidChange.event,this._disposables=new he}get domNode(){return this._domNode||(this._domNode=document.createElement("input"),this._domNode.className="rename-input",this._domNode.type="text",this._domNode.setAttribute("aria-label",v("renameAriaLabel","Rename input. Type new name and press Enter to commit.")),this._disposables.add(oe(this._domNode,"input",()=>this._onDidChange.fire()))),this._domNode}dispose(){this._onDidChange.dispose(),this._disposables.dispose()}}class nb{constructor(e,t){this._domNode=document.createElement("div"),this._domNode.style.display="flex",this._domNode.style.columnGap="5px",this._domNode.style.alignItems="center",this._domNode.style.height=`${t.lineHeight}px`,this._domNode.style.padding=`${nb._PADDING}px`;const i=document.createElement("div");i.style.display="flex",i.style.alignItems="center",i.style.width=i.style.height=`${t.lineHeight*.8}px`,this._domNode.appendChild(i),this._icon=Tx(Ee.sparkle),this._icon.style.display="none",i.appendChild(this._icon),this._label=document.createElement("div"),vo(this._label,t),this._domNode.appendChild(this._label),e.appendChild(this._domNode)}populate(e){this._updateIcon(e),this._updateLabel(e)}_updateIcon(e){var t;const i=!!(!((t=e.tags)===null||t===void 0)&&t.includes(i7.AIGenerated));this._icon.style.display=i?"inherit":"none"}_updateLabel(e){this._label.innerText=e.newSymbolName}static getLayoutInfo({lineHeight:e}){return{totalHeight:e+nb._PADDING*2}}dispose(){}}nb._PADDING=2;var SHe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},op=function(o,e){return function(t,i){e(t,i,o)}},j6;class PU{constructor(e,t,i){this.model=e,this.position=t,this._providerRenameIdx=0,this._providers=i.ordered(e)}hasProvider(){return this._providers.length>0}async resolveRenameLocation(e){const t=[];for(this._providerRenameIdx=0;this._providerRenameIdx<this._providers.length;this._providerRenameIdx++){const n=this._providers[this._providerRenameIdx];if(!n.resolveRenameLocation)break;const s=await n.resolveRenameLocation(this.model,this.position,e);if(s){if(s.rejectReason){t.push(s.rejectReason);continue}return s}}this._providerRenameIdx=0;const i=this.model.getWordAtPosition(this.position);return i?{range:new A(this.position.lineNumber,i.startColumn,this.position.lineNumber,i.endColumn),text:i.word,rejectReason:t.length>0?t.join(`
`):void 0}:{range:A.fromPositions(this.position),text:"",rejectReason:t.length>0?t.join(`
`):void 0}}async provideRenameEdits(e,t){return this._provideRenameEdits(e,this._providerRenameIdx,[],t)}async _provideRenameEdits(e,t,i,n){const s=this._providers[t];if(!s)return{edits:[],rejectReason:i.join(`
`)};const r=await s.provideRenameEdits(this.model,this.position,e,n);if(r){if(r.rejectReason)return this._provideRenameEdits(e,t+1,i.concat(r.rejectReason),n)}else return this._provideRenameEdits(e,t+1,i.concat(v("no result","No result.")),n);return r}}async function LHe(o,e,t,i){const n=new PU(e,t,o),s=await n.resolveRenameLocation(Yt.None);return s!=null&&s.rejectReason?{edits:[],rejectReason:s.rejectReason}:n.provideRenameEdits(i,Yt.None)}let dg=j6=class{static get(e){return e.getContribution(j6.ID)}constructor(e,t,i,n,s,r,a,l,c){this.editor=e,this._instaService=t,this._notificationService=i,this._bulkEditService=n,this._progressService=s,this._logService=r,this._configService=a,this._languageFeaturesService=l,this._telemetryService=c,this._disposableStore=new he,this._cts=new os,this._renameWidget=this._disposableStore.add(this._instaService.createInstance($6,this.editor,["acceptRenameInput","acceptRenameInputWithPreview"]))}dispose(){this._disposableStore.dispose(),this._cts.dispose(!0)}async run(){var e,t;const i=this._logService.trace.bind(this._logService,"[rename]");if(this._cts.dispose(!0),this._cts=new os,!this.editor.hasModel()){i("editor has no model");return}const n=this.editor.getPosition(),s=new PU(this.editor.getModel(),n,this._languageFeaturesService.renameProvider);if(!s.hasProvider()){i("skeleton has no provider");return}const r=new Cm(this.editor,5,void 0,this._cts.token);let a;try{i("resolving rename location");const b=s.resolveRenameLocation(r.token);this._progressService.showWhile(b,250),a=await b,i("resolved rename location")}catch(b){b instanceof hg?i("resolve rename location cancelled",JSON.stringify(b,null,"	")):(i("resolve rename location failed",b instanceof Error?b:JSON.stringify(b,null,"	")),(typeof b=="string"||zd(b))&&((e=$r.get(this.editor))===null||e===void 0||e.showMessage(b||v("resolveRenameLocationFailed","An unknown error occurred while resolving rename location"),n)));return}finally{r.dispose()}if(!a){i("returning early - no loc");return}if(a.rejectReason){i(`returning early - rejected with reason: ${a.rejectReason}`,a.rejectReason),(t=$r.get(this.editor))===null||t===void 0||t.showMessage(a.rejectReason,n);return}if(r.token.isCancellationRequested){i("returning early - cts1 cancelled");return}const l=new Cm(this.editor,5,a.range,this._cts.token),c=this.editor.getModel(),u=this._languageFeaturesService.newSymbolNamesProvider.all(c),f=b=>u.map(y=>y.provideNewSymbolNames(c,a.range,b));i("creating rename input field and awaiting its result");const g=this._bulkEditService.hasPreviewHandler()&&this._configService.getValue(this.editor.getModel().uri,"editor.rename.enablePreview"),p=await this._renameWidget.getInput(a.range,a.text,g,f,l);if(i("received response from rename input field"),u.length>0&&this._reportTelemetry(u.length,c.getLanguageId(),p),typeof p=="boolean"){i(`returning early - rename input field response - ${p}`),p&&this.editor.focus(),l.dispose();return}this.editor.focus(),i("requesting rename edits");const _=FD(s.provideRenameEdits(p.newName,l.token),l.token).then(async b=>{if(!b){i("returning early - no rename edits result");return}if(!this.editor.hasModel()){i("returning early - no model after rename edits are provided");return}if(b.rejectReason){i(`returning early - rejected with reason: ${b.rejectReason}`),this._notificationService.info(b.rejectReason);return}this.editor.setSelection(A.fromPositions(this.editor.getSelection().getPosition())),i("applying edits"),this._bulkEditService.apply(b,{editor:this.editor,showPreview:p.wantsPreview,label:v("label","Renaming '{0}' to '{1}'",a==null?void 0:a.text,p.newName),code:"undoredo.rename",quotableLabel:v("quotableLabel","Renaming {0} to {1}",a==null?void 0:a.text,p.newName),respectAutoSaveConfig:!0}).then(y=>{i("edits applied"),y.ariaSummary&&_a(v("aria","Successfully renamed '{0}' to '{1}'. Summary: {2}",a.text,p.newName,y.ariaSummary))}).catch(y=>{i(`error when applying edits ${JSON.stringify(y,null,"	")}`),this._notificationService.error(v("rename.failedApply","Rename failed to apply edits")),this._logService.error(y)})},b=>{i("error when providing rename edits",JSON.stringify(b,null,"	")),this._notificationService.error(v("rename.failed","Rename failed to compute edits")),this._logService.error(b)}).finally(()=>{l.dispose()});return i("returning rename operation"),this._progressService.showWhile(_,250),_}acceptRenameInput(e){this._renameWidget.acceptInput(e)}cancelRenameInput(){this._renameWidget.cancelInput(!0,"cancelRenameInput command")}focusNextRenameSuggestion(){this._renameWidget.focusNextRenameSuggestion()}focusPreviousRenameSuggestion(){this._renameWidget.focusPreviousRenameSuggestion()}_reportTelemetry(e,t,i){const n=typeof i=="boolean"?{kind:"cancelled",languageId:t,nRenameSuggestionProviders:e}:{kind:"accepted",languageId:t,nRenameSuggestionProviders:e,source:i.stats.source.k,nRenameSuggestions:i.stats.nRenameSuggestions,timeBeforeFirstInputFieldEdit:i.stats.timeBeforeFirstInputFieldEdit,wantsPreview:i.wantsPreview};this._telemetryService.publicLog2("renameInvokedEvent",n)}};dg.ID="editor.contrib.renameController";dg=j6=SHe([op(1,ct),op(2,ys),op(3,ek),op(4,Bm),op(5,mr),op(6,cH),op(7,Ze),op(8,pr)],dg);class xHe extends Ke{constructor(){super({id:"editor.action.rename",label:v("rename.label","Rename Symbol"),alias:"Rename Symbol",precondition:ue.and(W.writable,W.hasRenameProvider),kbOpts:{kbExpr:W.editorTextFocus,primary:60,weight:100},contextMenuOpts:{group:"1_modification",order:1.1}})}runCommand(e,t){const i=e.get(gi),[n,s]=Array.isArray(t)&&t||[void 0,void 0];return gt.isUri(n)&&Z.isIPosition(s)?i.openCodeEditor({resource:n},i.getActiveCodeEditor()).then(r=>{r&&(r.setPosition(s),r.invokeWithinContext(a=>(this.reportTelemetry(a,r),this.run(a,r))))},Nt):super.runCommand(e,t)}run(e,t){const i=e.get(mr),n=dg.get(t);return n?(i.trace("[RenameAction] got controller, running..."),n.run()):(i.trace("[RenameAction] returning early - controller missing"),Promise.resolve())}}pi(dg.ID,dg,4);Ce(xHe);const OU=zs.bindToContribution(dg.get);Me(new OU({id:"acceptRenameInput",precondition:fw,handler:o=>o.acceptRenameInput(!1),kbOpts:{weight:199,kbExpr:ue.and(W.focus,ue.not("isComposing")),primary:3}}));Me(new OU({id:"acceptRenameInputWithPreview",precondition:ue.and(fw,ue.has("config.editor.rename.enablePreview")),handler:o=>o.acceptRenameInput(!0),kbOpts:{weight:199,kbExpr:ue.and(W.focus,ue.not("isComposing")),primary:2051}}));Me(new OU({id:"cancelRenameInput",precondition:fw,handler:o=>o.cancelRenameInput(),kbOpts:{weight:199,kbExpr:W.focus,primary:9,secondary:[1033]}}));en(class extends Gr{constructor(){super({id:"focusNextRenameSuggestion",title:{...di("focusNextRenameSuggestion","Focus Next Rename Suggestion")},precondition:fw,keybinding:[{primary:2,secondary:[18],weight:199}]})}run(e){const t=e.get(gi).getFocusedCodeEditor();if(!t)return;const i=dg.get(t);i&&i.focusNextRenameSuggestion()}});en(class extends Gr{constructor(){super({id:"focusPreviousRenameSuggestion",title:{...di("focusPreviousRenameSuggestion","Focus Previous Rename Suggestion")},precondition:fw,keybinding:[{primary:1026,secondary:[16],weight:199}]})}run(e){const t=e.get(gi).getFocusedCodeEditor();if(!t)return;const i=dg.get(t);i&&i.focusPreviousRenameSuggestion()}});xh("_executeDocumentRenameProvider",function(o,e,t,...i){const[n]=i;wi(typeof n=="string");const{renameProvider:s}=o.get(Ze);return LHe(s,e,t,n)});xh("_executePrepareRename",async function(o,e,t){const{renameProvider:i}=o.get(Ze),s=await new PU(e,t,i).resolveRenameLocation(Yt.None);if(s!=null&&s.rejectReason)throw new Error(s.rejectReason);return s});$n.as(nu.Configuration).registerConfiguration({id:"editor",properties:{"editor.rename.enablePreview":{scope:5,description:v("enablePreview","Enable/disable the ability to preview changes before renaming"),default:!0,type:"boolean"}}});var DHe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},nte=function(o,e){return function(t,i){e(t,i,o)}};let yD=class extends J{constructor(e,t,i){super(),this.editor=e,this.languageConfigurationService=t,this.editorWorkerService=i,this.decorations=this.editor.createDecorationsCollection(),this.options=this.createOptions(e.getOption(73)),this.computePromise=null,this.currentOccurrences={},this._register(e.onDidChangeModel(n=>{this.currentOccurrences={},this.options=this.createOptions(e.getOption(73)),this.stop(),this.computeSectionHeaders.schedule(0)})),this._register(e.onDidChangeModelLanguage(n=>{this.currentOccurrences={},this.options=this.createOptions(e.getOption(73)),this.stop(),this.computeSectionHeaders.schedule(0)})),this._register(t.onDidChange(n=>{var s;const r=(s=this.editor.getModel())===null||s===void 0?void 0:s.getLanguageId();r&&n.affects(r)&&(this.currentOccurrences={},this.options=this.createOptions(e.getOption(73)),this.stop(),this.computeSectionHeaders.schedule(0))})),this._register(e.onDidChangeConfiguration(n=>{this.options&&!n.hasChanged(73)||(this.options=this.createOptions(e.getOption(73)),this.updateDecorations([]),this.stop(),this.computeSectionHeaders.schedule(0))})),this._register(this.editor.onDidChangeModelContent(n=>{this.computeSectionHeaders.schedule()})),this.computeSectionHeaders=this._register(new Ui(()=>{this.findSectionHeaders()},250)),this.computeSectionHeaders.schedule(0)}createOptions(e){if(!e||!this.editor.hasModel())return;const t=this.editor.getModel().getLanguageId();if(!t)return;const i=this.languageConfigurationService.getLanguageConfiguration(t).comments,n=this.languageConfigurationService.getLanguageConfiguration(t).foldingRules;if(!(!i&&!(n!=null&&n.markers)))return{foldingRules:n,findMarkSectionHeaders:e.showMarkSectionHeaders,findRegionSectionHeaders:e.showRegionSectionHeaders}}findSectionHeaders(){var e,t;if(!this.editor.hasModel()||!(!((e=this.options)===null||e===void 0)&&e.findMarkSectionHeaders)&&!(!((t=this.options)===null||t===void 0)&&t.findRegionSectionHeaders))return;const i=this.editor.getModel();if(i.isDisposed()||i.isTooLargeForSyncing())return;const n=i.getVersionId();this.editorWorkerService.findSectionHeaders(i.uri,this.options).then(s=>{i.isDisposed()||i.getVersionId()!==n||this.updateDecorations(s)})}updateDecorations(e){const t=this.editor.getModel();t&&(e=e.filter(s=>{if(!s.shouldBeInComments)return!0;const r=t.validateRange(s.range),a=t.tokenization.getLineTokens(r.startLineNumber),l=a.findTokenIndexAtOffset(r.startColumn-1),c=a.getStandardTokenType(l);return a.getLanguageId(l)===t.getLanguageId()&&c===1}));const i=Object.values(this.currentOccurrences).map(s=>s.decorationId),n=e.map(s=>kHe(s));this.editor.changeDecorations(s=>{const r=s.deltaDecorations(i,n);this.currentOccurrences={};for(let a=0,l=r.length;a<l;a++){const c={sectionHeader:e[a],decorationId:r[a]};this.currentOccurrences[c.decorationId]=c}})}stop(){this.computeSectionHeaders.cancel(),this.computePromise&&(this.computePromise.cancel(),this.computePromise=null)}dispose(){super.dispose(),this.stop(),this.decorations.clear()}};yD.ID="editor.sectionHeaderDetector";yD=DHe([nte(1,dn),nte(2,Cc)],yD);function kHe(o){return{range:o.range,options:Rt.createDynamic({description:"section-header",stickiness:3,collapseOnReplaceEdit:!0,minimap:{color:void 0,position:1,sectionHeaderStyle:o.hasSeparatorLine?2:1,sectionHeaderText:o.text}})}}pi(yD.ID,yD,1);function EHe(o){for(let e=0,t=o.length;e<t;e+=4){const i=o[e+0],n=o[e+1],s=o[e+2],r=o[e+3];o[e+0]=r,o[e+1]=s,o[e+2]=n,o[e+3]=i}}function IHe(o){const e=new Uint8Array(o.buffer,o.byteOffset,o.length*4);return Ute()||EHe(e),NA.wrap(e)}function dce(o){const e=new Uint32Array(THe(o));let t=0;if(e[t++]=o.id,o.type==="full")e[t++]=1,e[t++]=o.data.length,e.set(o.data,t),t+=o.data.length;else{e[t++]=2,e[t++]=o.deltas.length;for(const i of o.deltas)e[t++]=i.start,e[t++]=i.deleteCount,i.data?(e[t++]=i.data.length,e.set(i.data,t),t+=i.data.length):e[t++]=0}return IHe(e)}function THe(o){let e=0;if(e+=2,o.type==="full")e+=1+o.data.length;else{e+=1,e+=3*o.deltas.length;for(const t of o.deltas)t.data&&(e+=t.data.length)}return e}function mO(o){return o&&!!o.data}function uce(o){return o&&Array.isArray(o.edits)}class NHe{constructor(e,t,i){this.provider=e,this.tokens=t,this.error=i}}function hce(o,e){return o.has(e)}function RHe(o,e){const t=o.orderedGroups(e);return t.length>0?t[0]:[]}async function fce(o,e,t,i,n){const s=RHe(o,e),r=await Promise.all(s.map(async a=>{let l,c=null;try{l=await a.provideDocumentSemanticTokens(e,a===t?i:null,n)}catch(u){c=u,l=null}return(!l||!mO(l)&&!uce(l))&&(l=null),new NHe(a,l,c)}));for(const a of r){if(a.error)throw a.error;if(a.tokens)return a}return r.length>0?r[0]:null}function MHe(o,e){const t=o.orderedGroups(e);return t.length>0?t[0]:null}class AHe{constructor(e,t){this.provider=e,this.tokens=t}}function PHe(o,e){return o.has(e)}function gce(o,e){const t=o.orderedGroups(e);return t.length>0?t[0]:[]}async function FU(o,e,t,i){const n=gce(o,e),s=await Promise.all(n.map(async r=>{let a;try{a=await r.provideDocumentRangeSemanticTokens(e,t,i)}catch(l){hs(l),a=null}return(!a||!mO(a))&&(a=null),new AHe(r,a)}));for(const r of s)if(r.tokens)return r;return s.length>0?s[0]:null}si.registerCommand("_provideDocumentSemanticTokensLegend",async(o,...e)=>{const[t]=e;wi(t instanceof gt);const i=o.get(Fn).getModel(t);if(!i)return;const{documentSemanticTokensProvider:n}=o.get(Ze),s=MHe(n,i);return s?s[0].getLegend():o.get(Un).executeCommand("_provideDocumentRangeSemanticTokensLegend",t)});si.registerCommand("_provideDocumentSemanticTokens",async(o,...e)=>{const[t]=e;wi(t instanceof gt);const i=o.get(Fn).getModel(t);if(!i)return;const{documentSemanticTokensProvider:n}=o.get(Ze);if(!hce(n,i))return o.get(Un).executeCommand("_provideDocumentRangeSemanticTokens",t,i.getFullModelRange());const s=await fce(n,i,null,null,Yt.None);if(!s)return;const{provider:r,tokens:a}=s;if(!a||!mO(a))return;const l=dce({id:0,type:"full",data:a.data});return a.resultId&&r.releaseDocumentSemanticTokens(a.resultId),l});si.registerCommand("_provideDocumentRangeSemanticTokensLegend",async(o,...e)=>{const[t,i]=e;wi(t instanceof gt);const n=o.get(Fn).getModel(t);if(!n)return;const{documentRangeSemanticTokensProvider:s}=o.get(Ze),r=gce(s,n);if(r.length===0)return;if(r.length===1)return r[0].getLegend();if(!i||!A.isIRange(i))return console.warn("provideDocumentRangeSemanticTokensLegend might be out-of-sync with provideDocumentRangeSemanticTokens unless a range argument is passed in"),r[0].getLegend();const a=await FU(s,n,A.lift(i),Yt.None);if(a)return a.provider.getLegend()});si.registerCommand("_provideDocumentRangeSemanticTokens",async(o,...e)=>{const[t,i]=e;wi(t instanceof gt),wi(A.isIRange(i));const n=o.get(Fn).getModel(t);if(!n)return;const{documentRangeSemanticTokensProvider:s}=o.get(Ze),r=await FU(s,n,A.lift(i),Yt.None);if(!(!r||!r.tokens))return dce({id:0,type:"full",data:r.tokens.data})});const BU="editor.semanticHighlighting";function ZN(o,e,t){var i;const n=(i=t.getValue(BU,{overrideIdentifier:o.getLanguageId(),resource:o.uri}))===null||i===void 0?void 0:i.enabled;return typeof n=="boolean"?n:e.getColorTheme().semanticHighlighting}var pce=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Vu=function(o,e){return function(t,i){e(t,i,o)}},hp;let K6=class extends J{constructor(e,t,i,n,s,r){super(),this._watchers=Object.create(null);const a=u=>{this._watchers[u.uri.toString()]=new SD(u,e,i,s,r)},l=(u,f)=>{f.dispose(),delete this._watchers[u.uri.toString()]},c=()=>{for(const u of t.getModels()){const f=this._watchers[u.uri.toString()];ZN(u,i,n)?f||a(u):f&&l(u,f)}};t.getModels().forEach(u=>{ZN(u,i,n)&&a(u)}),this._register(t.onModelAdded(u=>{ZN(u,i,n)&&a(u)})),this._register(t.onModelRemoved(u=>{const f=this._watchers[u.uri.toString()];f&&l(u,f)})),this._register(n.onDidChangeConfiguration(u=>{u.affectsConfiguration(BU)&&c()})),this._register(i.onDidColorThemeChange(c))}dispose(){for(const e of Object.values(this._watchers))e.dispose();super.dispose()}};K6=pce([Vu(0,QA),Vu(1,Fn),Vu(2,Us),Vu(3,$t),Vu(4,vc),Vu(5,Ze)],K6);let SD=hp=class extends J{constructor(e,t,i,n,s){super(),this._semanticTokensStylingService=t,this._isDisposed=!1,this._model=e,this._provider=s.documentSemanticTokensProvider,this._debounceInformation=n.for(this._provider,"DocumentSemanticTokens",{min:hp.REQUEST_MIN_DELAY,max:hp.REQUEST_MAX_DELAY}),this._fetchDocumentSemanticTokens=this._register(new Ui(()=>this._fetchDocumentSemanticTokensNow(),hp.REQUEST_MIN_DELAY)),this._currentDocumentResponse=null,this._currentDocumentRequestCancellationTokenSource=null,this._documentProvidersChangeListeners=[],this._providersChangedDuringRequest=!1,this._register(this._model.onDidChangeContent(()=>{this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._register(this._model.onDidChangeAttached(()=>{this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._register(this._model.onDidChangeLanguage(()=>{this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule(0)}));const r=()=>{cn(this._documentProvidersChangeListeners),this._documentProvidersChangeListeners=[];for(const a of this._provider.all(e))typeof a.onDidChange=="function"&&this._documentProvidersChangeListeners.push(a.onDidChange(()=>{if(this._currentDocumentRequestCancellationTokenSource){this._providersChangedDuringRequest=!0;return}this._fetchDocumentSemanticTokens.schedule(0)}))};r(),this._register(this._provider.onDidChange(()=>{r(),this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._register(i.onDidColorThemeChange(a=>{this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._fetchDocumentSemanticTokens.schedule(0)}dispose(){this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),cn(this._documentProvidersChangeListeners),this._documentProvidersChangeListeners=[],this._setDocumentSemanticTokens(null,null,null,[]),this._isDisposed=!0,super.dispose()}_fetchDocumentSemanticTokensNow(){if(this._currentDocumentRequestCancellationTokenSource)return;if(!hce(this._provider,this._model)){this._currentDocumentResponse&&this._model.tokenization.setSemanticTokens(null,!1);return}if(!this._model.isAttachedToEditor())return;const e=new os,t=this._currentDocumentResponse?this._currentDocumentResponse.provider:null,i=this._currentDocumentResponse&&this._currentDocumentResponse.resultId||null,n=fce(this._provider,this._model,t,i,e.token);this._currentDocumentRequestCancellationTokenSource=e,this._providersChangedDuringRequest=!1;const s=[],r=this._model.onDidChangeContent(l=>{s.push(l)}),a=new Ao(!1);n.then(l=>{if(this._debounceInformation.update(this._model,a.elapsed()),this._currentDocumentRequestCancellationTokenSource=null,r.dispose(),!l)this._setDocumentSemanticTokens(null,null,null,s);else{const{provider:c,tokens:u}=l,f=this._semanticTokensStylingService.getStyling(c);this._setDocumentSemanticTokens(c,u||null,f,s)}},l=>{l&&(eu(l)||typeof l.message=="string"&&l.message.indexOf("busy")!==-1)||Nt(l),this._currentDocumentRequestCancellationTokenSource=null,r.dispose(),(s.length>0||this._providersChangedDuringRequest)&&(this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model)))})}static _copy(e,t,i,n,s){s=Math.min(s,i.length-n,e.length-t);for(let r=0;r<s;r++)i[n+r]=e[t+r]}_setDocumentSemanticTokens(e,t,i,n){const s=this._currentDocumentResponse,r=()=>{(n.length>0||this._providersChangedDuringRequest)&&!this._fetchDocumentSemanticTokens.isScheduled()&&this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))};if(this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._isDisposed){e&&t&&e.releaseDocumentSemanticTokens(t.resultId);return}if(!e||!i){this._model.tokenization.setSemanticTokens(null,!1);return}if(!t){this._model.tokenization.setSemanticTokens(null,!0),r();return}if(uce(t)){if(!s){this._model.tokenization.setSemanticTokens(null,!0);return}if(t.edits.length===0)t={resultId:t.resultId,data:s.data};else{let a=0;for(const g of t.edits)a+=(g.data?g.data.length:0)-g.deleteCount;const l=s.data,c=new Uint32Array(l.length+a);let u=l.length,f=c.length;for(let g=t.edits.length-1;g>=0;g--){const p=t.edits[g];if(p.start>l.length){i.warnInvalidEditStart(s.resultId,t.resultId,g,p.start,l.length),this._model.tokenization.setSemanticTokens(null,!0);return}const _=u-(p.start+p.deleteCount);_>0&&(hp._copy(l,u-_,c,f-_,_),f-=_),p.data&&(hp._copy(p.data,0,c,f-p.data.length,p.data.length),f-=p.data.length),u=p.start}u>0&&hp._copy(l,0,c,0,u),t={resultId:t.resultId,data:c}}}if(mO(t)){this._currentDocumentResponse=new OHe(e,t.resultId,t.data);const a=Yse(t,i,this._model.getLanguageId());if(n.length>0)for(const l of n)for(const c of a)for(const u of l.changes)c.applyEdit(u.range,u.text);this._model.tokenization.setSemanticTokens(a,!0)}else this._model.tokenization.setSemanticTokens(null,!0);r()}};SD.REQUEST_MIN_DELAY=300;SD.REQUEST_MAX_DELAY=2e3;SD=hp=pce([Vu(1,QA),Vu(2,Us),Vu(3,vc),Vu(4,Ze)],SD);class OHe{constructor(e,t,i){this.provider=e,this.resultId=t,this.data=i}dispose(){this.provider.releaseDocumentSemanticTokens(this.resultId)}}dk(K6);var FHe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},BS=function(o,e){return function(t,i){e(t,i,o)}};let LD=class extends J{constructor(e,t,i,n,s,r){super(),this._semanticTokensStylingService=t,this._themeService=i,this._configurationService=n,this._editor=e,this._provider=r.documentRangeSemanticTokensProvider,this._debounceInformation=s.for(this._provider,"DocumentRangeSemanticTokens",{min:100,max:500}),this._tokenizeViewport=this._register(new Ui(()=>this._tokenizeViewportNow(),100)),this._outstandingRequests=[];const a=()=>{this._editor.hasModel()&&this._tokenizeViewport.schedule(this._debounceInformation.get(this._editor.getModel()))};this._register(this._editor.onDidScrollChange(()=>{a()})),this._register(this._editor.onDidChangeModel(()=>{this._cancelAll(),a()})),this._register(this._editor.onDidChangeModelContent(l=>{this._cancelAll(),a()})),this._register(this._provider.onDidChange(()=>{this._cancelAll(),a()})),this._register(this._configurationService.onDidChangeConfiguration(l=>{l.affectsConfiguration(BU)&&(this._cancelAll(),a())})),this._register(this._themeService.onDidColorThemeChange(()=>{this._cancelAll(),a()})),a()}_cancelAll(){for(const e of this._outstandingRequests)e.cancel();this._outstandingRequests=[]}_removeOutstandingRequest(e){for(let t=0,i=this._outstandingRequests.length;t<i;t++)if(this._outstandingRequests[t]===e){this._outstandingRequests.splice(t,1);return}}_tokenizeViewportNow(){if(!this._editor.hasModel())return;const e=this._editor.getModel();if(e.tokenization.hasCompleteSemanticTokens())return;if(!ZN(e,this._themeService,this._configurationService)){e.tokenization.hasSomeSemanticTokens()&&e.tokenization.setSemanticTokens(null,!1);return}if(!PHe(this._provider,e)){e.tokenization.hasSomeSemanticTokens()&&e.tokenization.setSemanticTokens(null,!1);return}const t=this._editor.getVisibleRangesPlusViewportAboveBelow();this._outstandingRequests=this._outstandingRequests.concat(t.map(i=>this._requestRange(e,i)))}_requestRange(e,t){const i=e.getVersionId(),n=Qs(r=>Promise.resolve(FU(this._provider,e,t,r))),s=new Ao(!1);return n.then(r=>{if(this._debounceInformation.update(e,s.elapsed()),!r||!r.tokens||e.isDisposed()||e.getVersionId()!==i)return;const{provider:a,tokens:l}=r,c=this._semanticTokensStylingService.getStyling(a);e.tokenization.setPartialSemanticTokens(t,Yse(l,c,e.getLanguageId()))}).then(()=>this._removeOutstandingRequest(n),()=>this._removeOutstandingRequest(n)),n}};LD.ID="editor.contrib.viewportSemanticTokens";LD=FHe([BS(1,QA),BS(2,Us),BS(3,$t),BS(4,vc),BS(5,Ze)],LD);pi(LD.ID,LD,1);class BHe{constructor(e=!0){this.selectSubwords=e}provideSelectionRanges(e,t){const i=[];for(const n of t){const s=[];i.push(s),this.selectSubwords&&this._addInWordRanges(s,e,n),this._addWordRanges(s,e,n),this._addWhitespaceLine(s,e,n),s.push({range:e.getFullModelRange()})}return i}_addInWordRanges(e,t,i){const n=t.getWordAtPosition(i);if(!n)return;const{word:s,startColumn:r}=n,a=i.column-r;let l=a,c=a,u=0;for(;l>=0;l--){const f=s.charCodeAt(l);if(l!==a&&(f===95||f===45))break;if(kp(f)&&Fu(u))break;u=f}for(l+=1;c<s.length;c++){const f=s.charCodeAt(c);if(Fu(f)&&kp(u))break;if(f===95||f===45)break;u=f}l<c&&e.push({range:new A(i.lineNumber,r+l,i.lineNumber,r+c)})}_addWordRanges(e,t,i){const n=t.getWordAtPosition(i);n&&e.push({range:new A(i.lineNumber,n.startColumn,i.lineNumber,n.endColumn)})}_addWhitespaceLine(e,t,i){t.getLineLength(i.lineNumber)>0&&t.getLineFirstNonWhitespaceColumn(i.lineNumber)===0&&t.getLineLastNonWhitespaceColumn(i.lineNumber)===0&&e.push({range:new A(i.lineNumber,1,i.lineNumber,t.getLineMaxColumn(i.lineNumber))})}}var WHe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},VHe=function(o,e){return function(t,i){e(t,i,o)}},q6;class WU{constructor(e,t){this.index=e,this.ranges=t}mov(e){const t=this.index+(e?1:-1);if(t<0||t>=this.ranges.length)return this;const i=new WU(t,this.ranges);return i.ranges[t].equalsRange(this.ranges[this.index])?i.mov(e):i}}let V1=q6=class{static get(e){return e.getContribution(q6.ID)}constructor(e,t){this._editor=e,this._languageFeaturesService=t,this._ignoreSelection=!1}dispose(){var e;(e=this._selectionListener)===null||e===void 0||e.dispose()}async run(e){if(!this._editor.hasModel())return;const t=this._editor.getSelections(),i=this._editor.getModel();if(this._state||await _ce(this._languageFeaturesService.selectionRangeProvider,i,t.map(s=>s.getPosition()),this._editor.getOption(113),Yt.None).then(s=>{var r;if(!(!Yo(s)||s.length!==t.length)&&!(!this._editor.hasModel()||!zn(this._editor.getSelections(),t,(a,l)=>a.equalsSelection(l)))){for(let a=0;a<s.length;a++)s[a]=s[a].filter(l=>l.containsPosition(t[a].getStartPosition())&&l.containsPosition(t[a].getEndPosition())),s[a].unshift(t[a]);this._state=s.map(a=>new WU(0,a)),(r=this._selectionListener)===null||r===void 0||r.dispose(),this._selectionListener=this._editor.onDidChangeCursorPosition(()=>{var a;this._ignoreSelection||((a=this._selectionListener)===null||a===void 0||a.dispose(),this._state=void 0)})}}),!this._state)return;this._state=this._state.map(s=>s.mov(e));const n=this._state.map(s=>Xe.fromPositions(s.ranges[s.index].getStartPosition(),s.ranges[s.index].getEndPosition()));this._ignoreSelection=!0;try{this._editor.setSelections(n)}finally{this._ignoreSelection=!1}}};V1.ID="editor.contrib.smartSelectController";V1=q6=WHe([VHe(1,Ze)],V1);class mce extends Ke{constructor(e,t){super(t),this._forward=e}async run(e,t){const i=V1.get(t);i&&await i.run(this._forward)}}class HHe extends mce{constructor(){super(!0,{id:"editor.action.smartSelect.expand",label:v("smartSelect.expand","Expand Selection"),alias:"Expand Selection",precondition:void 0,kbOpts:{kbExpr:W.editorTextFocus,primary:1553,mac:{primary:3345,secondary:[1297]},weight:100},menuOpts:{menuId:P.MenubarSelectionMenu,group:"1_basic",title:v({key:"miSmartSelectGrow",comment:["&& denotes a mnemonic"]},"&&Expand Selection"),order:2}})}}si.registerCommandAlias("editor.action.smartSelect.grow","editor.action.smartSelect.expand");class zHe extends mce{constructor(){super(!1,{id:"editor.action.smartSelect.shrink",label:v("smartSelect.shrink","Shrink Selection"),alias:"Shrink Selection",precondition:void 0,kbOpts:{kbExpr:W.editorTextFocus,primary:1551,mac:{primary:3343,secondary:[1295]},weight:100},menuOpts:{menuId:P.MenubarSelectionMenu,group:"1_basic",title:v({key:"miSmartSelectShrink",comment:["&& denotes a mnemonic"]},"&&Shrink Selection"),order:3}})}}pi(V1.ID,V1,4);Ce(HHe);Ce(zHe);async function _ce(o,e,t,i,n){const s=o.all(e).concat(new BHe(i.selectSubwords));s.length===1&&s.unshift(new hl);const r=[],a=[];for(const l of s)r.push(Promise.resolve(l.provideSelectionRanges(e,t,n)).then(c=>{if(Yo(c)&&c.length===t.length)for(let u=0;u<t.length;u++){a[u]||(a[u]=[]);for(const f of c[u])A.isIRange(f.range)&&A.containsPosition(f.range,t[u])&&a[u].push(A.lift(f.range))}},hs));return await Promise.all(r),a.map(l=>{if(l.length===0)return[];l.sort((g,p)=>Z.isBefore(g.getStartPosition(),p.getStartPosition())?1:Z.isBefore(p.getStartPosition(),g.getStartPosition())||Z.isBefore(g.getEndPosition(),p.getEndPosition())?-1:Z.isBefore(p.getEndPosition(),g.getEndPosition())?1:0);const c=[];let u;for(const g of l)(!u||A.containsRange(g,u)&&!A.equalsRange(g,u))&&(c.push(g),u=g);if(!i.selectLeadingAndTrailingWhitespace)return c;const f=[c[0]];for(let g=1;g<c.length;g++){const p=c[g-1],_=c[g];if(_.startLineNumber!==p.startLineNumber||_.endLineNumber!==p.endLineNumber){const b=new A(p.startLineNumber,e.getLineFirstNonWhitespaceColumn(p.startLineNumber),p.endLineNumber,e.getLineLastNonWhitespaceColumn(p.endLineNumber));b.containsRange(p)&&!b.equalsRange(p)&&_.containsRange(b)&&!_.equalsRange(b)&&f.push(b);const y=new A(p.startLineNumber,1,p.endLineNumber,e.getLineMaxColumn(p.endLineNumber));y.containsRange(p)&&!y.equalsRange(b)&&_.containsRange(y)&&!_.equalsRange(y)&&f.push(y)}f.push(_)}return f})}si.registerCommand("_executeSelectionRangeProvider",async function(o,...e){const[t,i]=e;wi(gt.isUri(t));const n=o.get(Ze).selectionRangeProvider,s=await o.get(Ca).createModelReference(t);try{return _ce(n,s.object.textEditorModel,i,{selectLeadingAndTrailingWhitespace:!0,selectSubwords:!0},Yt.None)}finally{s.dispose()}});const UHe=Object.freeze({View:di("view","View"),Help:di("help","Help"),Test:di("test","Test"),File:di("file","File"),Preferences:di("preferences","Preferences"),Developer:di({key:"developer",comment:["A developer on Code itself or someone diagnosing issues in Code"]},"Developer")});class ste{constructor(e,t,i,n=null){this.startLineNumbers=e,this.endLineNumbers=t,this.lastLineRelativePosition=i,this.showEndForLine=n}equals(e){return!!e&&this.lastLineRelativePosition===e.lastLineRelativePosition&&this.showEndForLine===e.showEndForLine&&zn(this.startLineNumbers,e.startLineNumbers)&&zn(this.endLineNumbers,e.endLineNumbers)}}const ote=fg("stickyScrollViewLayer",{createHTML:o=>o}),AB="data-sticky-line-index",rte="data-sticky-is-line",$He="data-sticky-is-line-number",ate="data-sticky-is-folding-icon";class jHe extends J{constructor(e){super(),this._editor=e,this._foldingIconStore=new he,this._rootDomNode=document.createElement("div"),this._lineNumbersDomNode=document.createElement("div"),this._linesDomNodeScrollable=document.createElement("div"),this._linesDomNode=document.createElement("div"),this._lineHeight=this._editor.getOption(67),this._renderedStickyLines=[],this._lineNumbers=[],this._lastLineRelativePosition=0,this._minContentWidthInPx=0,this._isOnGlyphMargin=!1,this._lineNumbersDomNode.className="sticky-widget-line-numbers",this._lineNumbersDomNode.setAttribute("role","none"),this._linesDomNode.className="sticky-widget-lines",this._linesDomNode.setAttribute("role","list"),this._linesDomNodeScrollable.className="sticky-widget-lines-scrollable",this._linesDomNodeScrollable.appendChild(this._linesDomNode),this._rootDomNode.className="sticky-widget",this._rootDomNode.classList.toggle("peek",e instanceof Sm),this._rootDomNode.appendChild(this._lineNumbersDomNode),this._rootDomNode.appendChild(this._linesDomNodeScrollable);const t=()=>{this._linesDomNode.style.left=this._editor.getOption(115).scrollWithEditor?`-${this._editor.getScrollLeft()}px`:"0px"};this._register(this._editor.onDidChangeConfiguration(i=>{i.hasChanged(115)&&t(),i.hasChanged(67)&&(this._lineHeight=this._editor.getOption(67))})),this._register(this._editor.onDidScrollChange(i=>{i.scrollLeftChanged&&t(),i.scrollWidthChanged&&this._updateWidgetWidth()})),this._register(this._editor.onDidChangeModel(()=>{t(),this._updateWidgetWidth()})),this._register(this._foldingIconStore),t(),this._register(this._editor.onDidLayoutChange(i=>{this._updateWidgetWidth()})),this._updateWidgetWidth()}get lineNumbers(){return this._lineNumbers}get lineNumberCount(){return this._lineNumbers.length}getRenderedStickyLine(e){return this._renderedStickyLines.find(t=>t.lineNumber===e)}getCurrentLines(){return this._lineNumbers}setState(e,t,i){if(i===void 0&&(!this._previousState&&!e||this._previousState&&this._previousState.equals(e)))return;const n=this._isWidgetHeightZero(e),s=n?void 0:e,r=n?0:this._findLineToRebuildWidgetFrom(e,i);this._renderRootNode(s,t,r),this._previousState=e}_isWidgetHeightZero(e){if(!e)return!0;const t=e.startLineNumbers.length*this._lineHeight+e.lastLineRelativePosition;if(t>0){this._lastLineRelativePosition=e.lastLineRelativePosition;const i=[...e.startLineNumbers];e.showEndForLine!==null&&(i[e.showEndForLine]=e.endLineNumbers[e.showEndForLine]),this._lineNumbers=i}else this._lastLineRelativePosition=0,this._lineNumbers=[];return t===0}_findLineToRebuildWidgetFrom(e,t){if(!e||!this._previousState)return 0;if(t!==void 0)return t;const i=this._previousState,n=e.startLineNumbers.findIndex(s=>!i.startLineNumbers.includes(s));return n===-1?0:n}_updateWidgetWidth(){const e=this._editor.getLayoutInfo(),t=e.contentLeft;this._lineNumbersDomNode.style.width=`${t}px`,this._linesDomNodeScrollable.style.setProperty("--vscode-editorStickyScroll-scrollableWidth",`${this._editor.getScrollWidth()-e.verticalScrollbarWidth}px`),this._rootDomNode.style.width=`${e.width-e.verticalScrollbarWidth}px`}_clearStickyLinesFromLine(e){this._foldingIconStore.clear();for(let t=e;t<this._renderedStickyLines.length;t++){const i=this._renderedStickyLines[t];i.lineNumberDomNode.remove(),i.lineDomNode.remove()}this._renderedStickyLines=this._renderedStickyLines.slice(0,e),this._rootDomNode.style.display="none"}_useFoldingOpacityTransition(e){this._lineNumbersDomNode.style.setProperty("--vscode-editorStickyScroll-foldingOpacityTransition",`opacity ${e?.5:0}s`)}_setFoldingIconsVisibility(e){for(const t of this._renderedStickyLines){const i=t.foldingIcon;i&&i.setVisible(e?!0:i.isCollapsed)}}async _renderRootNode(e,t,i){if(this._clearStickyLinesFromLine(i),!e)return;for(const a of this._renderedStickyLines)this._updateTopAndZIndexOfStickyLine(a);const n=this._editor.getLayoutInfo(),s=this._lineNumbers.slice(i);for(const[a,l]of s.entries()){const c=this._renderChildNode(a+i,l,t,n);c&&(this._linesDomNode.appendChild(c.lineDomNode),this._lineNumbersDomNode.appendChild(c.lineNumberDomNode),this._renderedStickyLines.push(c))}t&&(this._setFoldingHoverListeners(),this._useFoldingOpacityTransition(!this._isOnGlyphMargin));const r=this._lineNumbers.length*this._lineHeight+this._lastLineRelativePosition;this._rootDomNode.style.display="block",this._lineNumbersDomNode.style.height=`${r}px`,this._linesDomNodeScrollable.style.height=`${r}px`,this._rootDomNode.style.height=`${r}px`,this._rootDomNode.style.marginLeft="0px",this._minContentWidthInPx=Math.max(...this._renderedStickyLines.map(a=>a.scrollWidth))+n.verticalScrollbarWidth,this._editor.layoutOverlayWidget(this)}_setFoldingHoverListeners(){this._editor.getOption(110)==="mouseover"&&(this._foldingIconStore.add(oe(this._lineNumbersDomNode,ke.MOUSE_ENTER,()=>{this._isOnGlyphMargin=!0,this._setFoldingIconsVisibility(!0)})),this._foldingIconStore.add(oe(this._lineNumbersDomNode,ke.MOUSE_LEAVE,()=>{this._isOnGlyphMargin=!1,this._useFoldingOpacityTransition(!0),this._setFoldingIconsVisibility(!1)})))}_renderChildNode(e,t,i,n){const s=this._editor._getViewModel();if(!s)return;const r=s.coordinatesConverter.convertModelPositionToViewPosition(new Z(t,1)).lineNumber,a=s.getViewLineRenderingData(r),l=this._editor.getOption(68);let c;try{c=Hr.filter(a.inlineDecorations,r,a.minColumn,a.maxColumn)}catch{c=[]}const u=new Pm(!0,!0,a.content,a.continuesWithWrappedLine,a.isBasicASCII,a.containsRTL,0,a.tokens,c,a.tabSize,a.startVisibleColumn,1,1,1,500,"none",!0,!0,null),f=new Y1(2e3),g=zD(u,f);let p;ote?p=ote.createHTML(f.build()):p=f.build();const _=document.createElement("span");_.setAttribute(AB,String(e)),_.setAttribute(rte,""),_.setAttribute("role","listitem"),_.tabIndex=0,_.className="sticky-line-content",_.classList.add(`stickyLine${t}`),_.style.lineHeight=`${this._lineHeight}px`,_.innerHTML=p;const b=document.createElement("span");b.setAttribute(AB,String(e)),b.setAttribute($He,""),b.className="sticky-line-number",b.style.lineHeight=`${this._lineHeight}px`;const y=n.contentLeft;b.style.width=`${y}px`;const S=document.createElement("span");l.renderType===1||l.renderType===3&&t%10===0?S.innerText=t.toString():l.renderType===2&&(S.innerText=Math.abs(t-this._editor.getPosition().lineNumber).toString()),S.className="sticky-line-number-inner",S.style.lineHeight=`${this._lineHeight}px`,S.style.width=`${n.lineNumbersWidth}px`,S.style.paddingLeft=`${n.lineNumbersLeft}px`,b.appendChild(S);const L=this._renderFoldingIconForLine(i,t);L&&b.appendChild(L.domNode),this._editor.applyFontInfo(_),this._editor.applyFontInfo(S),b.style.lineHeight=`${this._lineHeight}px`,_.style.lineHeight=`${this._lineHeight}px`,b.style.height=`${this._lineHeight}px`,_.style.height=`${this._lineHeight}px`;const x=new KHe(e,t,_,b,L,g.characterMapping,_.scrollWidth);return this._updateTopAndZIndexOfStickyLine(x)}_updateTopAndZIndexOfStickyLine(e){var t;const i=e.index,n=e.lineDomNode,s=e.lineNumberDomNode,r=i===this._lineNumbers.length-1,a="0",l="1";n.style.zIndex=r?a:l,s.style.zIndex=r?a:l;const c=`${i*this._lineHeight+this._lastLineRelativePosition+(!((t=e.foldingIcon)===null||t===void 0)&&t.isCollapsed?1:0)}px`,u=`${i*this._lineHeight}px`;return n.style.top=r?c:u,s.style.top=r?c:u,e}_renderFoldingIconForLine(e,t){const i=this._editor.getOption(110);if(!e||i==="never")return;const n=e.regions,s=n.findRange(t),r=n.getStartLineNumber(s);if(!(t===r))return;const l=n.isCollapsed(s),c=new qHe(l,r,n.getEndLineNumber(s),this._lineHeight);return c.setVisible(this._isOnGlyphMargin?!0:l||i==="always"),c.domNode.setAttribute(ate,""),c}getId(){return"editor.contrib.stickyScrollWidget"}getDomNode(){return this._rootDomNode}getPosition(){return{preference:null}}getMinContentWidthInPx(){return this._minContentWidthInPx}focusLineWithIndex(e){0<=e&&e<this._renderedStickyLines.length&&this._renderedStickyLines[e].lineDomNode.focus()}getEditorPositionFromNode(e){if(!e||e.children.length>0)return null;const t=this._getRenderedStickyLineFromChildDomNode(e);if(!t)return null;const i=SH(t.characterMapping,e,0);return new Z(t.lineNumber,i)}getLineNumberFromChildDomNode(e){var t,i;return(i=(t=this._getRenderedStickyLineFromChildDomNode(e))===null||t===void 0?void 0:t.lineNumber)!==null&&i!==void 0?i:null}_getRenderedStickyLineFromChildDomNode(e){const t=this.getLineIndexFromChildDomNode(e);return t===null||t<0||t>=this._renderedStickyLines.length?null:this._renderedStickyLines[t]}getLineIndexFromChildDomNode(e){const t=this._getAttributeValue(e,AB);return t?parseInt(t,10):null}isInStickyLine(e){return this._getAttributeValue(e,rte)!==void 0}isInFoldingIconDomNode(e){return this._getAttributeValue(e,ate)!==void 0}_getAttributeValue(e,t){for(;e&&e!==this._rootDomNode;){const i=e.getAttribute(t);if(i!==null)return i;e=e.parentElement}}}class KHe{constructor(e,t,i,n,s,r,a){this.index=e,this.lineNumber=t,this.lineDomNode=i,this.lineNumberDomNode=n,this.foldingIcon=s,this.characterMapping=r,this.scrollWidth=a}}class qHe{constructor(e,t,i,n){this.isCollapsed=e,this.foldingStartLine=t,this.foldingEndLine=i,this.dimension=n,this.domNode=document.createElement("div"),this.domNode.style.width=`${n}px`,this.domNode.style.height=`${n}px`,this.domNode.className=pt.asClassName(e?XP:QP)}setVisible(e){this.domNode.style.cursor=e?"pointer":"default",this.domNode.style.opacity=e?"1":"0"}}class UL{constructor(e,t){this.startLineNumber=e,this.endLineNumber=t}}class iA{constructor(e,t,i){this.range=e,this.children=t,this.parent=i}}class vce{constructor(e,t,i,n){this.uri=e,this.version=t,this.element=i,this.outlineProviderId=n}}var _O=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},xD=function(o,e){return function(t,i){e(t,i,o)}},$L;(function(o){o.OUTLINE_MODEL="outlineModel",o.FOLDING_PROVIDER_MODEL="foldingProviderModel",o.INDENTATION_MODEL="indentationModel"})($L||($L={}));var Up;(function(o){o[o.VALID=0]="VALID",o[o.INVALID=1]="INVALID",o[o.CANCELED=2]="CANCELED"})(Up||(Up={}));let G6=class extends J{constructor(e,t,i,n){switch(super(),this._editor=e,this._languageConfigurationService=i,this._languageFeaturesService=n,this._modelProviders=[],this._modelPromise=null,this._updateScheduler=this._register(new Kc(300)),this._updateOperation=this._register(new he),this._editor.getOption(115).defaultModel){case $L.OUTLINE_MODEL:this._modelProviders.push(new Y6(this._editor,n));case $L.FOLDING_PROVIDER_MODEL:this._modelProviders.push(new Q6(this._editor,t,n));case $L.INDENTATION_MODEL:this._modelProviders.push(new Z6(this._editor,i));break}}dispose(){this._modelProviders.forEach(e=>e.dispose()),this._updateOperation.clear(),this._cancelModelPromise(),super.dispose()}_cancelModelPromise(){this._modelPromise&&(this._modelPromise.cancel(),this._modelPromise=null)}async update(e){return this._updateOperation.clear(),this._updateOperation.add({dispose:()=>{this._cancelModelPromise(),this._updateScheduler.cancel()}}),this._cancelModelPromise(),await this._updateScheduler.trigger(async()=>{for(const t of this._modelProviders){const{statusPromise:i,modelPromise:n}=t.computeStickyModel(e);this._modelPromise=n;const s=await i;if(this._modelPromise!==n)return null;switch(s){case Up.CANCELED:return this._updateOperation.clear(),null;case Up.VALID:return t.stickyModel}}return null}).catch(t=>(Nt(t),null))}};G6=_O([xD(2,ct),xD(3,Ze)],G6);class bce extends J{constructor(e){super(),this._editor=e,this._stickyModel=null}get stickyModel(){return this._stickyModel}_invalid(){return this._stickyModel=null,Up.INVALID}computeStickyModel(e){if(e.isCancellationRequested||!this.isProviderValid())return{statusPromise:this._invalid(),modelPromise:null};const t=Qs(i=>this.createModelFromProvider(i));return{statusPromise:t.then(i=>this.isModelValid(i)?e.isCancellationRequested?Up.CANCELED:(this._stickyModel=this.createStickyModel(e,i),Up.VALID):this._invalid()).then(void 0,i=>(Nt(i),Up.CANCELED)),modelPromise:t}}isModelValid(e){return!0}isProviderValid(){return!0}}let Y6=class extends bce{constructor(e,t){super(e),this._languageFeaturesService=t}createModelFromProvider(e){return vf.create(this._languageFeaturesService.documentSymbolProvider,this._editor.getModel(),e)}createStickyModel(e,t){var i;const{stickyOutlineElement:n,providerID:s}=this._stickyModelFromOutlineModel(t,(i=this._stickyModel)===null||i===void 0?void 0:i.outlineProviderId),r=this._editor.getModel();return new vce(r.uri,r.getVersionId(),n,s)}isModelValid(e){return e&&e.children.size>0}_stickyModelFromOutlineModel(e,t){let i;if(ii.first(e.children.values())instanceof Wle){const a=ii.find(e.children.values(),l=>l.id===t);if(a)i=a.children;else{let l="",c=-1,u;for(const[f,g]of e.children.entries()){const p=this._findSumOfRangesOfGroup(g);p>c&&(u=g,c=p,l=g.id)}t=l,i=u.children}}else i=e.children;const n=[],s=Array.from(i.values()).sort((a,l)=>{const c=new UL(a.symbol.range.startLineNumber,a.symbol.range.endLineNumber),u=new UL(l.symbol.range.startLineNumber,l.symbol.range.endLineNumber);return this._comparator(c,u)});for(const a of s)n.push(this._stickyModelFromOutlineElement(a,a.symbol.selectionRange.startLineNumber));return{stickyOutlineElement:new iA(void 0,n,void 0),providerID:t}}_stickyModelFromOutlineElement(e,t){const i=[];for(const s of e.children.values())if(s.symbol.selectionRange.startLineNumber!==s.symbol.range.endLineNumber)if(s.symbol.selectionRange.startLineNumber!==t)i.push(this._stickyModelFromOutlineElement(s,s.symbol.selectionRange.startLineNumber));else for(const r of s.children.values())i.push(this._stickyModelFromOutlineElement(r,s.symbol.selectionRange.startLineNumber));i.sort((s,r)=>this._comparator(s.range,r.range));const n=new UL(e.symbol.selectionRange.startLineNumber,e.symbol.range.endLineNumber);return new iA(n,i,void 0)}_comparator(e,t){return e.startLineNumber!==t.startLineNumber?e.startLineNumber-t.startLineNumber:t.endLineNumber-e.endLineNumber}_findSumOfRangesOfGroup(e){let t=0;for(const i of e.children.values())t+=this._findSumOfRangesOfGroup(i);return e instanceof v6?t+e.symbol.range.endLineNumber-e.symbol.selectionRange.startLineNumber:t}};Y6=_O([xD(1,Ze)],Y6);class Cce extends bce{constructor(e){super(e),this._foldingLimitReporter=new Ole(e)}createStickyModel(e,t){const i=this._fromFoldingRegions(t),n=this._editor.getModel();return new vce(n.uri,n.getVersionId(),i,void 0)}isModelValid(e){return e!==null}_fromFoldingRegions(e){const t=e.length,i=[],n=new iA(void 0,[],void 0);for(let s=0;s<t;s++){const r=e.getParentIndex(s);let a;r!==-1?a=i[r]:a=n;const l=new iA(new UL(e.getStartLineNumber(s),e.getEndLineNumber(s)+1),[],a);a.children.push(l),i.push(l)}return n}}let Z6=class extends Cce{constructor(e,t){super(e),this._languageConfigurationService=t,this.provider=this._register(new yU(e.getModel(),this._languageConfigurationService,this._foldingLimitReporter))}async createModelFromProvider(e){return this.provider.compute(e)}};Z6=_O([xD(1,dn)],Z6);let Q6=class extends Cce{constructor(e,t,i){super(e),this._languageFeaturesService=i;const n=cg.getFoldingRangeProviders(this._languageFeaturesService,e.getModel());n.length>0&&(this.provider=this._register(new LU(e.getModel(),n,t,this._foldingLimitReporter,void 0)))}isProviderValid(){return this.provider!==void 0}async createModelFromProvider(e){var t,i;return(i=(t=this.provider)===null||t===void 0?void 0:t.compute(e))!==null&&i!==void 0?i:null}};Q6=_O([xD(2,Ze)],Q6);var GHe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},lte=function(o,e){return function(t,i){e(t,i,o)}};class YHe{constructor(e,t,i){this.startLineNumber=e,this.endLineNumber=t,this.nestingDepth=i}}let X6=class extends J{constructor(e,t,i){super(),this._languageFeaturesService=t,this._languageConfigurationService=i,this._onDidChangeStickyScroll=this._register(new Y),this.onDidChangeStickyScroll=this._onDidChangeStickyScroll.event,this._model=null,this._cts=null,this._stickyModelProvider=null,this._editor=e,this._sessionStore=this._register(new he),this._updateSoon=this._register(new Ui(()=>this.update(),50)),this._register(this._editor.onDidChangeConfiguration(n=>{n.hasChanged(115)&&this.readConfiguration()})),this.readConfiguration()}readConfiguration(){this._sessionStore.clear(),this._editor.getOption(115).enabled&&(this._sessionStore.add(this._editor.onDidChangeModel(()=>{this._model=null,this.updateStickyModelProvider(),this._onDidChangeStickyScroll.fire(),this.update()})),this._sessionStore.add(this._editor.onDidChangeHiddenAreas(()=>this.update())),this._sessionStore.add(this._editor.onDidChangeModelContent(()=>this._updateSoon.schedule())),this._sessionStore.add(this._languageFeaturesService.documentSymbolProvider.onDidChange(()=>this.update())),this._sessionStore.add(lt(()=>{var t;(t=this._stickyModelProvider)===null||t===void 0||t.dispose(),this._stickyModelProvider=null})),this.updateStickyModelProvider(),this.update())}getVersionId(){var e;return(e=this._model)===null||e===void 0?void 0:e.version}updateStickyModelProvider(){var e;(e=this._stickyModelProvider)===null||e===void 0||e.dispose(),this._stickyModelProvider=null;const t=this._editor;t.hasModel()&&(this._stickyModelProvider=new G6(t,()=>this._updateSoon.schedule(),this._languageConfigurationService,this._languageFeaturesService))}async update(){var e;(e=this._cts)===null||e===void 0||e.dispose(!0),this._cts=new os,await this.updateStickyModel(this._cts.token),this._onDidChangeStickyScroll.fire()}async updateStickyModel(e){if(!this._editor.hasModel()||!this._stickyModelProvider||this._editor.getModel().isTooLargeForTokenization()){this._model=null;return}const t=await this._stickyModelProvider.update(e);e.isCancellationRequested||(this._model=t)}updateIndex(e){return e===-1?e=0:e<0&&(e=-e-2),e}getCandidateStickyLinesIntersectingFromStickyModel(e,t,i,n,s){if(t.children.length===0)return;let r=s;const a=[];for(let u=0;u<t.children.length;u++){const f=t.children[u];f.range&&a.push(f.range.startLineNumber)}const l=this.updateIndex(KL(a,e.startLineNumber,(u,f)=>u-f)),c=this.updateIndex(KL(a,e.startLineNumber+n,(u,f)=>u-f));for(let u=l;u<=c;u++){const f=t.children[u];if(!f)return;if(f.range){const g=f.range.startLineNumber,p=f.range.endLineNumber;e.startLineNumber<=p+1&&g-1<=e.endLineNumber&&g!==r&&(r=g,i.push(new YHe(g,p-1,n+1)),this.getCandidateStickyLinesIntersectingFromStickyModel(e,f,i,n+1,g))}else this.getCandidateStickyLinesIntersectingFromStickyModel(e,f,i,n,s)}}getCandidateStickyLinesIntersecting(e){var t,i;if(!(!((t=this._model)===null||t===void 0)&&t.element))return[];let n=[];this.getCandidateStickyLinesIntersectingFromStickyModel(e,this._model.element,n,0,-1);const s=(i=this._editor._getViewModel())===null||i===void 0?void 0:i.getHiddenAreas();if(s)for(const r of s)n=n.filter(a=>!(a.startLineNumber>=r.startLineNumber&&a.endLineNumber<=r.endLineNumber+1));return n}};X6=GHe([lte(1,Ze),lte(2,dn)],X6);var ZHe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},B0=function(o,e){return function(t,i){e(t,i,o)}},J6;let yh=J6=class extends J{constructor(e,t,i,n,s,r,a){super(),this._editor=e,this._contextMenuService=t,this._languageFeaturesService=i,this._instaService=n,this._contextKeyService=a,this._sessionStore=new he,this._foldingModel=null,this._maxStickyLines=Number.MAX_SAFE_INTEGER,this._candidateDefinitionsLength=-1,this._focusedStickyElementIndex=-1,this._enabled=!1,this._focused=!1,this._positionRevealed=!1,this._onMouseDown=!1,this._endLineNumbers=[],this._showEndForLine=null,this._stickyScrollWidget=new jHe(this._editor),this._stickyLineCandidateProvider=new X6(this._editor,i,s),this._register(this._stickyScrollWidget),this._register(this._stickyLineCandidateProvider),this._widgetState=new ste([],[],0),this._onDidResize(),this._readConfiguration();const l=this._stickyScrollWidget.getDomNode();this._register(this._editor.onDidChangeConfiguration(u=>{(u.hasChanged(115)||u.hasChanged(73)||u.hasChanged(67)||u.hasChanged(110))&&this._readConfiguration()})),this._register(oe(l,ke.CONTEXT_MENU,async u=>{this._onContextMenu(ft(l),u)})),this._stickyScrollFocusedContextKey=W.stickyScrollFocused.bindTo(this._contextKeyService),this._stickyScrollVisibleContextKey=W.stickyScrollVisible.bindTo(this._contextKeyService);const c=this._register(Kd(l));this._register(c.onDidBlur(u=>{this._positionRevealed===!1&&l.clientHeight===0?(this._focusedStickyElementIndex=-1,this.focus()):this._disposeFocusStickyScrollStore()})),this._register(c.onDidFocus(u=>{this.focus()})),this._registerMouseListeners(),this._register(oe(l,ke.MOUSE_DOWN,u=>{this._onMouseDown=!0}))}static get(e){return e.getContribution(J6.ID)}_disposeFocusStickyScrollStore(){var e;this._stickyScrollFocusedContextKey.set(!1),(e=this._focusDisposableStore)===null||e===void 0||e.dispose(),this._focused=!1,this._positionRevealed=!1,this._onMouseDown=!1}focus(){if(this._onMouseDown){this._onMouseDown=!1,this._editor.focus();return}this._stickyScrollFocusedContextKey.get()!==!0&&(this._focused=!0,this._focusDisposableStore=new he,this._stickyScrollFocusedContextKey.set(!0),this._focusedStickyElementIndex=this._stickyScrollWidget.lineNumbers.length-1,this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex))}focusNext(){this._focusedStickyElementIndex<this._stickyScrollWidget.lineNumberCount-1&&this._focusNav(!0)}focusPrevious(){this._focusedStickyElementIndex>0&&this._focusNav(!1)}selectEditor(){this._editor.focus()}_focusNav(e){this._focusedStickyElementIndex=e?this._focusedStickyElementIndex+1:this._focusedStickyElementIndex-1,this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex)}goToFocused(){const e=this._stickyScrollWidget.lineNumbers;this._disposeFocusStickyScrollStore(),this._revealPosition({lineNumber:e[this._focusedStickyElementIndex],column:1})}_revealPosition(e){this._reveaInEditor(e,()=>this._editor.revealPosition(e))}_revealLineInCenterIfOutsideViewport(e){this._reveaInEditor(e,()=>this._editor.revealLineInCenterIfOutsideViewport(e.lineNumber,0))}_reveaInEditor(e,t){this._focused&&this._disposeFocusStickyScrollStore(),this._positionRevealed=!0,t(),this._editor.setSelection(A.fromPositions(e)),this._editor.focus()}_registerMouseListeners(){const e=this._register(new he),t=this._register(new WP(this._editor,{extractLineNumberFromMouseEvent:s=>{const r=this._stickyScrollWidget.getEditorPositionFromNode(s.target.element);return r?r.lineNumber:0}})),i=s=>{if(!this._editor.hasModel()||s.target.type!==12||s.target.detail!==this._stickyScrollWidget.getId())return null;const r=s.target.element;if(!r||r.innerText!==r.innerHTML)return null;const a=this._stickyScrollWidget.getEditorPositionFromNode(r);return a?{range:new A(a.lineNumber,a.column,a.lineNumber,a.column+r.innerText.length),textElement:r}:null},n=this._stickyScrollWidget.getDomNode();this._register(ss(n,ke.CLICK,s=>{if(s.ctrlKey||s.altKey||s.metaKey||!s.leftButton)return;if(s.shiftKey){const c=this._stickyScrollWidget.getLineIndexFromChildDomNode(s.target);if(c===null)return;const u=new Z(this._endLineNumbers[c],1);this._revealLineInCenterIfOutsideViewport(u);return}if(this._stickyScrollWidget.isInFoldingIconDomNode(s.target)){const c=this._stickyScrollWidget.getLineNumberFromChildDomNode(s.target);this._toggleFoldingRegionForLine(c);return}if(!this._stickyScrollWidget.isInStickyLine(s.target))return;let l=this._stickyScrollWidget.getEditorPositionFromNode(s.target);if(!l){const c=this._stickyScrollWidget.getLineNumberFromChildDomNode(s.target);if(c===null)return;l=new Z(c,1)}this._revealPosition(l)})),this._register(ss(n,ke.MOUSE_MOVE,s=>{if(s.shiftKey){const r=this._stickyScrollWidget.getLineIndexFromChildDomNode(s.target);if(r===null||this._showEndForLine!==null&&this._showEndForLine===r)return;this._showEndForLine=r,this._renderStickyScroll();return}this._showEndForLine!==null&&(this._showEndForLine=null,this._renderStickyScroll())})),this._register(oe(n,ke.MOUSE_LEAVE,s=>{this._showEndForLine!==null&&(this._showEndForLine=null,this._renderStickyScroll())})),this._register(t.onMouseMoveOrRelevantKeyDown(([s,r])=>{const a=i(s);if(!a||!s.hasTriggerModifier||!this._editor.hasModel()){e.clear();return}const{range:l,textElement:c}=a;if(!l.equalsRange(this._stickyRangeProjectedOnEditor))this._stickyRangeProjectedOnEditor=l,e.clear();else if(c.style.textDecoration==="underline")return;const u=new os;e.add(lt(()=>u.dispose(!0)));let f;jP(this._languageFeaturesService.definitionProvider,this._editor.getModel(),new Z(l.startLineNumber,l.startColumn+1),u.token).then(g=>{if(!u.token.isCancellationRequested)if(g.length!==0){this._candidateDefinitionsLength=g.length;const p=c;f!==p?(e.clear(),f=p,f.style.textDecoration="underline",e.add(lt(()=>{f.style.textDecoration="none"}))):f||(f=p,f.style.textDecoration="underline",e.add(lt(()=>{f.style.textDecoration="none"})))}else e.clear()})})),this._register(t.onCancel(()=>{e.clear()})),this._register(t.onExecute(async s=>{if(s.target.type!==12||s.target.detail!==this._stickyScrollWidget.getId())return;const r=this._stickyScrollWidget.getEditorPositionFromNode(s.target.element);r&&(!this._editor.hasModel()||!this._stickyRangeProjectedOnEditor||(this._candidateDefinitionsLength>1&&(this._focused&&this._disposeFocusStickyScrollStore(),this._revealPosition({lineNumber:r.lineNumber,column:1})),this._instaService.invokeFunction(Qle,s,this._editor,{uri:this._editor.getModel().uri,range:this._stickyRangeProjectedOnEditor})))}))}_onContextMenu(e,t){const i=new Wc(e,t);this._contextMenuService.showContextMenu({menuId:P.StickyScrollContext,getAnchor:()=>i})}_toggleFoldingRegionForLine(e){if(!this._foldingModel||e===null)return;const t=this._stickyScrollWidget.getRenderedStickyLine(e),i=t==null?void 0:t.foldingIcon;if(!i)return;Nle(this._foldingModel,Number.MAX_VALUE,[e]),i.isCollapsed=!i.isCollapsed;const n=(i.isCollapsed?this._editor.getTopForLineNumber(i.foldingEndLine):this._editor.getTopForLineNumber(i.foldingStartLine))-this._editor.getOption(67)*t.index+1;this._editor.setScrollTop(n),this._renderStickyScroll(e)}_readConfiguration(){const e=this._editor.getOption(115);if(e.enabled===!1){this._editor.removeOverlayWidget(this._stickyScrollWidget),this._sessionStore.clear(),this._enabled=!1;return}else e.enabled&&!this._enabled&&(this._editor.addOverlayWidget(this._stickyScrollWidget),this._sessionStore.add(this._editor.onDidScrollChange(i=>{i.scrollTopChanged&&(this._showEndForLine=null,this._renderStickyScroll())})),this._sessionStore.add(this._editor.onDidLayoutChange(()=>this._onDidResize())),this._sessionStore.add(this._editor.onDidChangeModelTokens(i=>this._onTokensChange(i))),this._sessionStore.add(this._stickyLineCandidateProvider.onDidChangeStickyScroll(()=>{this._showEndForLine=null,this._renderStickyScroll()})),this._enabled=!0);this._editor.getOption(68).renderType===2&&this._sessionStore.add(this._editor.onDidChangeCursorPosition(()=>{this._showEndForLine=null,this._renderStickyScroll(0)}))}_needsUpdate(e){const t=this._stickyScrollWidget.getCurrentLines();for(const i of t)for(const n of e.ranges)if(i>=n.fromLineNumber&&i<=n.toLineNumber)return!0;return!1}_onTokensChange(e){this._needsUpdate(e)&&this._renderStickyScroll(0)}_onDidResize(){const t=this._editor.getLayoutInfo().height/this._editor.getOption(67);this._maxStickyLines=Math.round(t*.25)}async _renderStickyScroll(e){var t,i;const n=this._editor.getModel();if(!n||n.isTooLargeForTokenization()){this._foldingModel=null,this._stickyScrollWidget.setState(void 0,null);return}const s=this._stickyLineCandidateProvider.getVersionId();if(s===void 0||s===n.getVersionId())if(this._foldingModel=(i=await((t=cg.get(this._editor))===null||t===void 0?void 0:t.getFoldingModel()))!==null&&i!==void 0?i:null,this._widgetState=this.findScrollWidgetState(),this._stickyScrollVisibleContextKey.set(this._widgetState.startLineNumbers.length!==0),!this._focused)this._stickyScrollWidget.setState(this._widgetState,this._foldingModel,e);else if(this._focusedStickyElementIndex===-1)this._stickyScrollWidget.setState(this._widgetState,this._foldingModel,e),this._focusedStickyElementIndex=this._stickyScrollWidget.lineNumberCount-1,this._focusedStickyElementIndex!==-1&&this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex);else{const r=this._stickyScrollWidget.lineNumbers[this._focusedStickyElementIndex];this._stickyScrollWidget.setState(this._widgetState,this._foldingModel,e),this._stickyScrollWidget.lineNumberCount===0?this._focusedStickyElementIndex=-1:(this._stickyScrollWidget.lineNumbers.includes(r)||(this._focusedStickyElementIndex=this._stickyScrollWidget.lineNumberCount-1),this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex))}}findScrollWidgetState(){const e=this._editor.getOption(67),t=Math.min(this._maxStickyLines,this._editor.getOption(115).maxLineCount),i=this._editor.getScrollTop();let n=0;const s=[],r=[],a=this._editor.getVisibleRanges();if(a.length!==0){const l=new UL(a[0].startLineNumber,a[a.length-1].endLineNumber),c=this._stickyLineCandidateProvider.getCandidateStickyLinesIntersecting(l);for(const u of c){const f=u.startLineNumber,g=u.endLineNumber,p=u.nestingDepth;if(g-f>0){const _=(p-1)*e,b=p*e,y=this._editor.getBottomForLineNumber(f)-i,S=this._editor.getTopForLineNumber(g)-i,L=this._editor.getBottomForLineNumber(g)-i;if(_>S&&_<=L){s.push(f),r.push(g+1),n=L-b;break}else b>y&&b<=L&&(s.push(f),r.push(g+1));if(s.length===t)break}}}return this._endLineNumbers=r,new ste(s,r,n,this._showEndForLine)}dispose(){super.dispose(),this._sessionStore.dispose()}};yh.ID="store.contrib.stickyScrollController";yh=J6=ZHe([B0(1,Ya),B0(2,Ze),B0(3,ct),B0(4,dn),B0(5,vc),B0(6,bt)],yh);class QHe extends Gr{constructor(){super({id:"editor.action.toggleStickyScroll",title:{...di("toggleEditorStickyScroll","Toggle Editor Sticky Scroll"),mnemonicTitle:v({key:"mitoggleStickyScroll",comment:["&& denotes a mnemonic"]},"&&Toggle Editor Sticky Scroll")},category:UHe.View,toggled:{condition:ue.equals("config.editor.stickyScroll.enabled",!0),title:v("stickyScroll","Sticky Scroll"),mnemonicTitle:v({key:"miStickyScroll",comment:["&& denotes a mnemonic"]},"&&Sticky Scroll")},menu:[{id:P.CommandPalette},{id:P.MenubarAppearanceMenu,group:"4_editor",order:3},{id:P.StickyScrollContext}]})}async run(e){const t=e.get($t),i=!t.getValue("editor.stickyScroll.enabled");return t.updateValue("editor.stickyScroll.enabled",i)}}const vO=100;class XHe extends iu{constructor(){super({id:"editor.action.focusStickyScroll",title:{...di("focusStickyScroll","Focus Sticky Scroll"),mnemonicTitle:v({key:"mifocusStickyScroll",comment:["&& denotes a mnemonic"]},"&&Focus Sticky Scroll")},precondition:ue.and(ue.has("config.editor.stickyScroll.enabled"),W.stickyScrollVisible),menu:[{id:P.CommandPalette}]})}runEditorCommand(e,t){var i;(i=yh.get(t))===null||i===void 0||i.focus()}}class JHe extends iu{constructor(){super({id:"editor.action.selectNextStickyScrollLine",title:di("selectNextStickyScrollLine.title","Select next sticky scroll line"),precondition:W.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:vO,primary:18}})}runEditorCommand(e,t){var i;(i=yh.get(t))===null||i===void 0||i.focusNext()}}class eze extends iu{constructor(){super({id:"editor.action.selectPreviousStickyScrollLine",title:di("selectPreviousStickyScrollLine.title","Select previous sticky scroll line"),precondition:W.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:vO,primary:16}})}runEditorCommand(e,t){var i;(i=yh.get(t))===null||i===void 0||i.focusPrevious()}}class tze extends iu{constructor(){super({id:"editor.action.goToFocusedStickyScrollLine",title:di("goToFocusedStickyScrollLine.title","Go to focused sticky scroll line"),precondition:W.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:vO,primary:3}})}runEditorCommand(e,t){var i;(i=yh.get(t))===null||i===void 0||i.goToFocused()}}class ize extends iu{constructor(){super({id:"editor.action.selectEditor",title:di("selectEditor.title","Select Editor"),precondition:W.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:vO,primary:9}})}runEditorCommand(e,t){var i;(i=yh.get(t))===null||i===void 0||i.selectEditor()}}pi(yh.ID,yh,1);en(QHe);en(XHe);en(eze);en(JHe);en(tze);en(ize);var wce=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},cL=function(o,e){return function(t,i){e(t,i,o)}};class nze{constructor(e,t,i,n,s,r){this.range=e,this.insertText=t,this.filterText=i,this.additionalTextEdits=n,this.command=s,this.completion=r}}let eV=class extends W0e{constructor(e,t,i,n,s,r){super(s.disposable),this.model=e,this.line=t,this.word=i,this.completionModel=n,this._suggestMemoryService=r}canBeReused(e,t,i){return this.model===e&&this.line===t&&this.word.word.length>0&&this.word.startColumn===i.startColumn&&this.word.endColumn<i.endColumn&&this.completionModel.getIncompleteProvider().size===0}get items(){var e;const t=[],{items:i}=this.completionModel,n=this._suggestMemoryService.select(this.model,{lineNumber:this.line,column:this.word.endColumn+this.completionModel.lineContext.characterCountDelta},i),s=ii.slice(i,n),r=ii.slice(i,0,n);let a=5;for(const l of ii.concat(s,r)){if(l.score===Hd.Default)continue;const c=new A(l.editStart.lineNumber,l.editStart.column,l.editInsertEnd.lineNumber,l.editInsertEnd.column+this.completionModel.lineContext.characterCountDelta),u=l.completion.insertTextRules&&l.completion.insertTextRules&4?{snippet:l.completion.insertText}:l.completion.insertText;t.push(new nze(c,u,(e=l.filterTextLow)!==null&&e!==void 0?e:l.labelLow,l.completion.additionalTextEdits,l.completion.command,l)),a-->=0&&l.resolve(Yt.None)}return t}};eV=wce([cL(5,iO)],eV);let tV=class extends J{constructor(e,t,i,n){super(),this._languageFeatureService=e,this._clipboardService=t,this._suggestMemoryService=i,this._editorService=n,this._store.add(e.inlineCompletionsProvider.register("*",this))}async provideInlineCompletions(e,t,i,n){var s;if(i.selectedSuggestionInfo)return;let r;for(const _ of this._editorService.listCodeEditors())if(_.getModel()===e){r=_;break}if(!r)return;const a=r.getOption(89);if(vC.isAllOff(a))return;e.tokenization.tokenizeIfCheap(t.lineNumber);const l=e.tokenization.getLineTokens(t.lineNumber),c=l.getStandardTokenType(l.findTokenIndexAtOffset(Math.max(t.column-1-1,0)));if(vC.valueFor(a,c)!=="inline")return;let u=e.getWordAtPosition(t),f;if(u!=null&&u.word||(f=this._getTriggerCharacterInfo(e,t)),!(u!=null&&u.word)&&!f||(u||(u=e.getWordUntilPosition(t)),u.endColumn!==t.column))return;let g;const p=e.getValueInRange(new A(t.lineNumber,1,t.lineNumber,t.column));if(!f&&(!((s=this._lastResult)===null||s===void 0)&&s.canBeReused(e,t.lineNumber,u))){const _=new Qee(p,t.column-this._lastResult.word.endColumn);this._lastResult.completionModel.lineContext=_,this._lastResult.acquire(),g=this._lastResult}else{const _=await xU(this._languageFeatureService.completionProvider,e,t,new fD(void 0,XM.createSuggestFilter(r).itemKind,f==null?void 0:f.providers),f&&{triggerKind:1,triggerCharacter:f.ch},n);let b;_.needsClipboard&&(b=await this._clipboardService.readText());const y=new wp(_.items,t.column,new Qee(p,0),Id.None,r.getOption(118),r.getOption(112),{boostFullMatch:!1,firstMatchCanBeWeak:!1},b);g=new eV(e,t.lineNumber,u,y,_,this._suggestMemoryService)}return this._lastResult=g,g}handleItemDidShow(e,t){t.completion.resolve(Yt.None)}freeInlineCompletions(e){e.release()}_getTriggerCharacterInfo(e,t){var i;const n=e.getValueInRange(A.fromPositions({lineNumber:t.lineNumber,column:t.column-1},t)),s=new Set;for(const r of this._languageFeatureService.completionProvider.all(e))!((i=r.triggerCharacters)===null||i===void 0)&&i.includes(n)&&s.add(r);if(s.size!==0)return{providers:s,ch:n}}};tV=wce([cL(0,Ze),cL(1,_g),cL(2,iO),cL(3,gi)],tV);dk(tV);class sze extends Ke{constructor(){super({id:"editor.action.forceRetokenize",label:v("forceRetokenize","Developer: Force Retokenize"),alias:"Developer: Force Retokenize",precondition:void 0})}run(e,t){if(!t.hasModel())return;const i=t.getModel();i.tokenization.resetTokenization();const n=new Ao;i.tokenization.forceTokenization(i.getLineCount()),n.stop(),console.log(`tokenization took ${n.elapsed()}`)}}Ce(sze);class bO extends Gr{constructor(){super({id:bO.ID,title:di({key:"toggle.tabMovesFocus",comment:["Turn on/off use of tab key for moving focus around VS Code"]},"Toggle Tab Key Moves Focus"),precondition:void 0,keybinding:{primary:2091,mac:{primary:1323},weight:100},f1:!0})}run(){const t=!c1.getTabFocusMode();c1.setTabFocusMode(t),_a(t?v("toggle.tabMovesFocus.on","Pressing Tab will now move focus to the next focusable element"):v("toggle.tabMovesFocus.off","Pressing Tab will now insert the tab character"))}}bO.ID="editor.action.toggleTabFocusMode";en(bO);var oze=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},rze=function(o,e){return function(t,i){e(t,i,o)}};let iV=class extends J{get enabled(){return this._enabled}set enabled(e){e?(this.el.setAttribute("aria-disabled","false"),this.el.tabIndex=0,this.el.style.pointerEvents="auto",this.el.style.opacity="1",this.el.style.cursor="pointer",this._enabled=!1):(this.el.setAttribute("aria-disabled","true"),this.el.tabIndex=-1,this.el.style.pointerEvents="none",this.el.style.opacity="0.4",this.el.style.cursor="default",this._enabled=!0),this._enabled=e}constructor(e,t,i={},n){var s,r;super(),this._link=t,this._enabled=!0,this.el=ge(e,ye("a.monaco-link",{tabIndex:(s=t.tabIndex)!==null&&s!==void 0?s:0,href:t.href},t.label)),this.hoverDelegate=(r=i.hoverDelegate)!==null&&r!==void 0?r:ya("mouse"),this.setTooltip(t.title),this.el.setAttribute("role","button");const a=this._register(new Xt(this.el,"click")),l=this._register(new Xt(this.el,"keypress")),c=Ie.chain(l.event,g=>g.map(p=>new _n(p)).filter(p=>p.keyCode===3)),u=this._register(new Xt(this.el,ln.Tap)).event;this._register(rn.addTarget(this.el));const f=Ie.any(a.event,c,u);this._register(f(g=>{this.enabled&&(Ut.stop(g,!0),i!=null&&i.opener?i.opener(this._link.href):n.open(this._link.href,{allowCommands:!0}))})),this.enabled=!0}setTooltip(e){this.hoverDelegate.showNativeHover?this.el.title=e??"":!this.hover&&e?this.hover=this._register(Zc(this.hoverDelegate,this.el,e)):this.hover&&this.hover.update(e)}};iV=oze([rze(3,wa)],iV);var yce=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Sce=function(o,e){return function(t,i){e(t,i,o)}};const aze=26;let nV=class extends J{constructor(e,t){super(),this._editor=e,this.instantiationService=t,this.banner=this._register(this.instantiationService.createInstance(sV))}hide(){this._editor.setBanner(null,0),this.banner.clear()}show(e){this.banner.show({...e,onClose:()=>{var t;this.hide(),(t=e.onClose)===null||t===void 0||t.call(e)}}),this._editor.setBanner(this.banner.element,aze)}};nV=yce([Sce(1,ct)],nV);let sV=class extends J{constructor(e){super(),this.instantiationService=e,this.markdownRenderer=this.instantiationService.createInstance(mh,{}),this.element=ye("div.editor-banner"),this.element.tabIndex=0}getAriaLabel(e){if(e.ariaLabel)return e.ariaLabel;if(typeof e.message=="string")return e.message}getBannerMessage(e){if(typeof e=="string"){const t=ye("span");return t.innerText=e,t}return this.markdownRenderer.render(e).element}clear(){Zo(this.element)}show(e){Zo(this.element);const t=this.getAriaLabel(e);t&&this.element.setAttribute("aria-label",t);const i=ge(this.element,ye("div.icon-container"));i.setAttribute("aria-hidden","true"),e.icon&&i.appendChild(ye(`div${pt.asCSSSelector(e.icon)}`));const n=ge(this.element,ye("div.message-container"));if(n.setAttribute("aria-hidden","true"),n.appendChild(this.getBannerMessage(e.message)),this.messageActionsContainer=ge(this.element,ye("div.message-actions-container")),e.actions)for(const r of e.actions)this._register(this.instantiationService.createInstance(iV,this.messageActionsContainer,{...r,tabIndex:-1},{}));const s=ge(this.element,ye("div.action-container"));this.actionBar=this._register(new pc(s)),this.actionBar.push(this._register(new za("banner.close","Close Banner",pt.asClassName(hre),!0,()=>{typeof e.onClose=="function"&&e.onClose()})),{icon:!0,label:!1}),this.actionBar.setFocusable(!1)}};sV=yce([Sce(0,ct)],sV);var VU=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},GC=function(o,e){return function(t,i){e(t,i,o)}};const lze=gs("extensions-warning-message",Ee.warning,v("warningIcon","Icon shown with a warning message in the extensions editor."));let H1=class extends J{constructor(e,t,i,n){super(),this._editor=e,this._editorWorkerService=t,this._workspaceTrustService=i,this._highlighter=null,this._bannerClosed=!1,this._updateState=s=>{if(s&&s.hasMore){if(this._bannerClosed)return;const r=Math.max(s.ambiguousCharacterCount,s.nonBasicAsciiCharacterCount,s.invisibleCharacterCount);let a;if(s.nonBasicAsciiCharacterCount>=r)a={message:v("unicodeHighlighting.thisDocumentHasManyNonBasicAsciiUnicodeCharacters","This document contains many non-basic ASCII unicode characters"),command:new pw};else if(s.ambiguousCharacterCount>=r)a={message:v("unicodeHighlighting.thisDocumentHasManyAmbiguousUnicodeCharacters","This document contains many ambiguous unicode characters"),command:new $m};else if(s.invisibleCharacterCount>=r)a={message:v("unicodeHighlighting.thisDocumentHasManyInvisibleUnicodeCharacters","This document contains many invisible unicode characters"),command:new gw};else throw new Error("Unreachable");this._bannerController.show({id:"unicodeHighlightBanner",message:a.message,icon:lze,actions:[{label:a.command.shortLabel,href:`command:${a.command.id}`}],onClose:()=>{this._bannerClosed=!0}})}else this._bannerController.hide()},this._bannerController=this._register(n.createInstance(nV,e)),this._register(this._editor.onDidChangeModel(()=>{this._bannerClosed=!1,this._updateHighlighter()})),this._options=e.getOption(125),this._register(i.onDidChangeTrust(s=>{this._updateHighlighter()})),this._register(e.onDidChangeConfiguration(s=>{s.hasChanged(125)&&(this._options=e.getOption(125),this._updateHighlighter())})),this._updateHighlighter()}dispose(){this._highlighter&&(this._highlighter.dispose(),this._highlighter=null),super.dispose()}_updateHighlighter(){if(this._updateState(null),this._highlighter&&(this._highlighter.dispose(),this._highlighter=null),!this._editor.hasModel())return;const e=cze(this._workspaceTrustService.isWorkspaceTrusted(),this._options);if([e.nonBasicASCII,e.ambiguousCharacters,e.invisibleCharacters].every(i=>i===!1))return;const t={nonBasicASCII:e.nonBasicASCII,ambiguousCharacters:e.ambiguousCharacters,invisibleCharacters:e.invisibleCharacters,includeComments:e.includeComments,includeStrings:e.includeStrings,allowedCodePoints:Object.keys(e.allowedCharacters).map(i=>i.codePointAt(0)),allowedLocales:Object.keys(e.allowedLocales).map(i=>i==="_os"?new Intl.NumberFormat().resolvedOptions().locale:i==="_vscode"?Bbe:i)};this._editorWorkerService.canComputeUnicodeHighlights(this._editor.getModel().uri)?this._highlighter=new oV(this._editor,t,this._updateState,this._editorWorkerService):this._highlighter=new dze(this._editor,t,this._updateState)}getDecorationInfo(e){return this._highlighter?this._highlighter.getDecorationInfo(e):null}};H1.ID="editor.contrib.unicodeHighlighter";H1=VU([GC(1,Cc),GC(2,moe),GC(3,ct)],H1);function cze(o,e){return{nonBasicASCII:e.nonBasicASCII===cl?!o:e.nonBasicASCII,ambiguousCharacters:e.ambiguousCharacters,invisibleCharacters:e.invisibleCharacters,includeComments:e.includeComments===cl?!o:e.includeComments,includeStrings:e.includeStrings===cl?!o:e.includeStrings,allowedCharacters:e.allowedCharacters,allowedLocales:e.allowedLocales}}let oV=class extends J{constructor(e,t,i,n){super(),this._editor=e,this._options=t,this._updateState=i,this._editorWorkerService=n,this._model=this._editor.getModel(),this._decorations=this._editor.createDecorationsCollection(),this._updateSoon=this._register(new Ui(()=>this._update(),250)),this._register(this._editor.onDidChangeModelContent(()=>{this._updateSoon.schedule()})),this._updateSoon.schedule()}dispose(){this._decorations.clear(),super.dispose()}_update(){if(this._model.isDisposed())return;if(!this._model.mightContainNonBasicASCII()){this._decorations.clear();return}const e=this._model.getVersionId();this._editorWorkerService.computedUnicodeHighlights(this._model.uri,this._options).then(t=>{if(this._model.isDisposed()||this._model.getVersionId()!==e)return;this._updateState(t);const i=[];if(!t.hasMore)for(const n of t.ranges)i.push({range:n,options:nA.instance.getDecorationFromOptions(this._options)});this._decorations.set(i)})}getDecorationInfo(e){if(!this._decorations.has(e))return null;const t=this._editor.getModel();if(!$H(t,e))return null;const i=t.getValueInRange(e.range);return{reason:xce(i,this._options),inComment:jH(t,e),inString:KH(t,e)}}};oV=VU([GC(3,Cc)],oV);class dze extends J{constructor(e,t,i){super(),this._editor=e,this._options=t,this._updateState=i,this._model=this._editor.getModel(),this._decorations=this._editor.createDecorationsCollection(),this._updateSoon=this._register(new Ui(()=>this._update(),250)),this._register(this._editor.onDidLayoutChange(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidScrollChange(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidChangeHiddenAreas(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidChangeModelContent(()=>{this._updateSoon.schedule()})),this._updateSoon.schedule()}dispose(){this._decorations.clear(),super.dispose()}_update(){if(this._model.isDisposed())return;if(!this._model.mightContainNonBasicASCII()){this._decorations.clear();return}const e=this._editor.getVisibleRanges(),t=[],i={ranges:[],ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0,hasMore:!1};for(const n of e){const s=oH.computeUnicodeHighlights(this._model,this._options,n);for(const r of s.ranges)i.ranges.push(r);i.ambiguousCharacterCount+=i.ambiguousCharacterCount,i.invisibleCharacterCount+=i.invisibleCharacterCount,i.nonBasicAsciiCharacterCount+=i.nonBasicAsciiCharacterCount,i.hasMore=i.hasMore||s.hasMore}if(!i.hasMore)for(const n of i.ranges)t.push({range:n,options:nA.instance.getDecorationFromOptions(this._options)});this._updateState(i),this._decorations.set(t)}getDecorationInfo(e){if(!this._decorations.has(e))return null;const t=this._editor.getModel(),i=t.getValueInRange(e.range);return $H(t,e)?{reason:xce(i,this._options),inComment:jH(t,e),inString:KH(t,e)}:null}}const Lce=v("unicodeHighlight.configureUnicodeHighlightOptions","Configure Unicode Highlight Options");let rV=class{constructor(e,t,i){this._editor=e,this._languageService=t,this._openerService=i,this.hoverOrdinal=5}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1)return[];const i=this._editor.getModel(),n=this._editor.getContribution(H1.ID);if(!n)return[];const s=[],r=new Set;let a=300;for(const l of t){const c=n.getDecorationInfo(l);if(!c)continue;const f=i.getValueInRange(l.range).codePointAt(0),g=PB(f);let p;switch(c.reason.kind){case 0:{PD(c.reason.confusableWith)?p=v("unicodeHighlight.characterIsAmbiguousASCII","The character {0} could be confused with the ASCII character {1}, which is more common in source code.",g,PB(c.reason.confusableWith.codePointAt(0))):p=v("unicodeHighlight.characterIsAmbiguous","The character {0} could be confused with the character {1}, which is more common in source code.",g,PB(c.reason.confusableWith.codePointAt(0)));break}case 1:p=v("unicodeHighlight.characterIsInvisible","The character {0} is invisible.",g);break;case 2:p=v("unicodeHighlight.characterIsNonBasicAscii","The character {0} is not a basic ASCII character.",g);break}if(r.has(p))continue;r.add(p);const _={codePoint:f,reason:c.reason,inComment:c.inComment,inString:c.inString},b=v("unicodeHighlight.adjustSettings","Adjust settings"),y=`command:${yk.ID}?${encodeURIComponent(JSON.stringify(_))}`,S=new qo("",!0).appendMarkdown(p).appendText(" ").appendLink(y,b,Lce);s.push(new Nd(this,l.range,[S],!1,a++))}return s}renderHoverParts(e,t){return ule(e,t,this._editor,this._languageService,this._openerService)}};rV=VU([GC(1,xn),GC(2,wa)],rV);function aV(o){return`U+${o.toString(16).padStart(4,"0")}`}function PB(o){let e=`\`${aV(o)}\``;return rh.isInvisibleCharacter(o)||(e+=` "${`${uze(o)}`}"`),e}function uze(o){return o===96?"`` ` ``":"`"+String.fromCodePoint(o)+"`"}function xce(o,e){return oH.computeUnicodeHighlightReason(o,e)}class nA{constructor(){this.map=new Map}getDecorationFromOptions(e){return this.getDecoration(!e.includeComments,!e.includeStrings)}getDecoration(e,t){const i=`${e}${t}`;let n=this.map.get(i);return n||(n=Rt.createDynamic({description:"unicode-highlight",stickiness:1,className:"unicode-highlight",showIfCollapsed:!0,overviewRuler:null,minimap:null,hideInCommentTokens:e,hideInStringTokens:t}),this.map.set(i,n)),n}}nA.instance=new nA;class hze extends Ke{constructor(){super({id:$m.ID,label:v("action.unicodeHighlight.disableHighlightingInComments","Disable highlighting of characters in comments"),alias:"Disable highlighting of characters in comments",precondition:void 0}),this.shortLabel=v("unicodeHighlight.disableHighlightingInComments.shortLabel","Disable Highlight In Comments")}async run(e,t,i){const n=e==null?void 0:e.get($t);n&&this.runAction(n)}async runAction(e){await e.updateValue(ua.includeComments,!1,2)}}class fze extends Ke{constructor(){super({id:$m.ID,label:v("action.unicodeHighlight.disableHighlightingInStrings","Disable highlighting of characters in strings"),alias:"Disable highlighting of characters in strings",precondition:void 0}),this.shortLabel=v("unicodeHighlight.disableHighlightingInStrings.shortLabel","Disable Highlight In Strings")}async run(e,t,i){const n=e==null?void 0:e.get($t);n&&this.runAction(n)}async runAction(e){await e.updateValue(ua.includeStrings,!1,2)}}class $m extends Ke{constructor(){super({id:$m.ID,label:v("action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters","Disable highlighting of ambiguous characters"),alias:"Disable highlighting of ambiguous characters",precondition:void 0}),this.shortLabel=v("unicodeHighlight.disableHighlightingOfAmbiguousCharacters.shortLabel","Disable Ambiguous Highlight")}async run(e,t,i){const n=e==null?void 0:e.get($t);n&&this.runAction(n)}async runAction(e){await e.updateValue(ua.ambiguousCharacters,!1,2)}}$m.ID="editor.action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters";class gw extends Ke{constructor(){super({id:gw.ID,label:v("action.unicodeHighlight.disableHighlightingOfInvisibleCharacters","Disable highlighting of invisible characters"),alias:"Disable highlighting of invisible characters",precondition:void 0}),this.shortLabel=v("unicodeHighlight.disableHighlightingOfInvisibleCharacters.shortLabel","Disable Invisible Highlight")}async run(e,t,i){const n=e==null?void 0:e.get($t);n&&this.runAction(n)}async runAction(e){await e.updateValue(ua.invisibleCharacters,!1,2)}}gw.ID="editor.action.unicodeHighlight.disableHighlightingOfInvisibleCharacters";class pw extends Ke{constructor(){super({id:pw.ID,label:v("action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters","Disable highlighting of non basic ASCII characters"),alias:"Disable highlighting of non basic ASCII characters",precondition:void 0}),this.shortLabel=v("unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters.shortLabel","Disable Non ASCII Highlight")}async run(e,t,i){const n=e==null?void 0:e.get($t);n&&this.runAction(n)}async runAction(e){await e.updateValue(ua.nonBasicASCII,!1,2)}}pw.ID="editor.action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters";class yk extends Ke{constructor(){super({id:yk.ID,label:v("action.unicodeHighlight.showExcludeOptions","Show Exclude Options"),alias:"Show Exclude Options",precondition:void 0})}async run(e,t,i){const{codePoint:n,reason:s,inString:r,inComment:a}=i,l=String.fromCodePoint(n),c=e.get(ou),u=e.get($t);function f(_){return rh.isInvisibleCharacter(_)?v("unicodeHighlight.excludeInvisibleCharFromBeingHighlighted","Exclude {0} (invisible character) from being highlighted",aV(_)):v("unicodeHighlight.excludeCharFromBeingHighlighted","Exclude {0} from being highlighted",`${aV(_)} "${l}"`)}const g=[];if(s.kind===0)for(const _ of s.notAmbiguousInLocales)g.push({label:v("unicodeHighlight.allowCommonCharactersInLanguage",'Allow unicode characters that are more common in the language "{0}".',_),run:async()=>{pze(u,[_])}});if(g.push({label:f(n),run:()=>gze(u,[n])}),a){const _=new hze;g.push({label:_.label,run:async()=>_.runAction(u)})}else if(r){const _=new fze;g.push({label:_.label,run:async()=>_.runAction(u)})}if(s.kind===0){const _=new $m;g.push({label:_.label,run:async()=>_.runAction(u)})}else if(s.kind===1){const _=new gw;g.push({label:_.label,run:async()=>_.runAction(u)})}else if(s.kind===2){const _=new pw;g.push({label:_.label,run:async()=>_.runAction(u)})}else mze(s);const p=await c.pick(g,{title:Lce});p&&await p.run()}}yk.ID="editor.action.unicodeHighlight.showExcludeOptions";async function gze(o,e){const t=o.getValue(ua.allowedCharacters);let i;typeof t=="object"&&t?i=t:i={};for(const n of e)i[String.fromCodePoint(n)]=!0;await o.updateValue(ua.allowedCharacters,i,2)}async function pze(o,e){var t;const i=(t=o.inspect(ua.allowedLocales).user)===null||t===void 0?void 0:t.value;let n;typeof i=="object"&&i?n=Object.assign({},i):n={};for(const s of e)n[s]=!0;await o.updateValue(ua.allowedLocales,n,2)}function mze(o){throw new Error(`Unexpected value: ${o}`)}Ce($m);Ce(gw);Ce(pw);Ce(yk);pi(H1.ID,H1,1);zm.register(rV);var _ze=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},cte=function(o,e){return function(t,i){e(t,i,o)}};const Dce="ignoreUnusualLineTerminators";function vze(o,e,t){o.setModelProperty(e.uri,Dce,t)}function bze(o,e){return o.getModelProperty(e.uri,Dce)}let DD=class extends J{constructor(e,t,i){super(),this._editor=e,this._dialogService=t,this._codeEditorService=i,this._isPresentingDialog=!1,this._config=this._editor.getOption(126),this._register(this._editor.onDidChangeConfiguration(n=>{n.hasChanged(126)&&(this._config=this._editor.getOption(126),this._checkForUnusualLineTerminators())})),this._register(this._editor.onDidChangeModel(()=>{this._checkForUnusualLineTerminators()})),this._register(this._editor.onDidChangeModelContent(n=>{n.isUndoing||this._checkForUnusualLineTerminators()})),this._checkForUnusualLineTerminators()}async _checkForUnusualLineTerminators(){if(this._config==="off"||!this._editor.hasModel())return;const e=this._editor.getModel();if(!e.mightContainUnusualLineTerminators()||bze(this._codeEditorService,e)===!0||this._editor.getOption(91))return;if(this._config==="auto"){e.removeUnusualLineTerminators(this._editor.getSelections());return}if(this._isPresentingDialog)return;let i;try{this._isPresentingDialog=!0,i=await this._dialogService.confirm({title:v("unusualLineTerminators.title","Unusual Line Terminators"),message:v("unusualLineTerminators.message","Detected unusual line terminators"),detail:v("unusualLineTerminators.detail","The file '{0}' contains one or more unusual line terminator characters, like Line Separator (LS) or Paragraph Separator (PS).\n\nIt is recommended to remove them from the file. This can be configured via `editor.unusualLineTerminators`.",fc(e.uri)),primaryButton:v({key:"unusualLineTerminators.fix",comment:["&& denotes a mnemonic"]},"&&Remove Unusual Line Terminators"),cancelButton:v("unusualLineTerminators.ignore","Ignore")})}finally{this._isPresentingDialog=!1}if(!i.confirmed){vze(this._codeEditorService,e,!0);return}e.removeUnusualLineTerminators(this._editor.getSelections())}};DD.ID="editor.contrib.unusualLineTerminatorsDetector";DD=_ze([cte(1,XD),cte(2,gi)],DD);pi(DD.ID,DD,1);var kce=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},QN=function(o,e){return function(t,i){e(t,i,o)}},Ws,lV;const CO=new Be("hasWordHighlights",!1);function Ece(o,e,t,i){const n=o.ordered(e);return $V(n.map(s=>()=>Promise.resolve(s.provideDocumentHighlights(e,t,i)).then(void 0,hs)),Yo).then(s=>{if(s){const r=new ds;return r.set(e.uri,s),r}return new ds})}function Cze(o,e,t,i,n,s){const r=o.ordered(e);return $V(r.map(a=>()=>{const l=s.filter(c=>gne(c)).filter(c=>ZH(a.selector,c.uri,c.getLanguageId(),!0,void 0,void 0)>0);return Promise.resolve(a.provideMultiDocumentHighlights(e,t,l,n)).then(void 0,hs)}),a=>a instanceof ds&&a.size>0)}class HU{constructor(e,t,i){this._model=e,this._selection=t,this._wordSeparators=i,this._wordRange=this._getCurrentWordRange(e,t),this._result=null}get result(){return this._result||(this._result=Qs(e=>this._compute(this._model,this._selection,this._wordSeparators,e))),this._result}_getCurrentWordRange(e,t){const i=e.getWordAtPosition(t.getPosition());return i?new A(t.startLineNumber,i.startColumn,t.startLineNumber,i.endColumn):null}isValid(e,t,i){const n=t.startLineNumber,s=t.startColumn,r=t.endColumn,a=this._getCurrentWordRange(e,t);let l=!!(this._wordRange&&this._wordRange.equalsRange(a));for(let c=0,u=i.length;!l&&c<u;c++){const f=i.getRange(c);f&&f.startLineNumber===n&&f.startColumn<=s&&f.endColumn>=r&&(l=!0)}return l}cancel(){this.result.cancel()}}class wze extends HU{constructor(e,t,i,n){super(e,t,i),this._providers=n}_compute(e,t,i,n){return Ece(this._providers,e,t.getPosition(),n).then(s=>s||new ds)}}class yze extends HU{constructor(e,t,i,n,s){super(e,t,i),this._providers=n,this._otherModels=s}_compute(e,t,i,n){return Cze(this._providers,e,t.getPosition(),i,n,this._otherModels).then(s=>s||new ds)}}class Ice extends HU{constructor(e,t,i,n,s){super(e,t,n),this._otherModels=s,this._selectionIsEmpty=t.isEmpty(),this._word=i}_compute(e,t,i,n){return cm(250,n).then(()=>{const s=new ds;let r;if(this._word?r=this._word:r=e.getWordAtPosition(t.getPosition()),!r)return new ds;const a=[e,...this._otherModels];for(const l of a){if(l.isDisposed())continue;const u=l.findMatches(r.word,!0,!1,!0,i,!1).map(f=>({range:f.range,kind:JL.Text}));u&&s.set(l.uri,u)}return s})}isValid(e,t,i){const n=t.isEmpty();return this._selectionIsEmpty!==n?!1:super.isValid(e,t,i)}}function Sze(o,e,t,i,n){return o.has(e)?new wze(e,t,n,o):new Ice(e,t,i,n,[])}function Lze(o,e,t,i,n,s){return o.has(e)?new yze(e,t,n,o,s):new Ice(e,t,i,n,s)}xh("_executeDocumentHighlights",async(o,e,t)=>{const i=o.get(Ze),n=await Ece(i.documentHighlightProvider,e,t,Yt.None);return n==null?void 0:n.get(e.uri)});let kD=Ws=class{constructor(e,t,i,n,s){this.toUnhook=new he,this.workerRequestTokenId=0,this.workerRequestCompleted=!1,this.workerRequestValue=new ds,this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1,this.editor=e,this.providers=t,this.multiDocumentProviders=i,this.codeEditorService=s,this._hasWordHighlights=CO.bindTo(n),this._ignorePositionChangeEvent=!1,this.occurrencesHighlight=this.editor.getOption(81),this.model=this.editor.getModel(),this.toUnhook.add(e.onDidChangeCursorPosition(r=>{this._ignorePositionChangeEvent||this.occurrencesHighlight!=="off"&&this._onPositionChanged(r)})),this.toUnhook.add(e.onDidFocusEditorText(r=>{this.occurrencesHighlight!=="off"&&(this.workerRequest||this._run())})),this.toUnhook.add(e.onDidChangeModelContent(r=>{this._stopAll()})),this.toUnhook.add(e.onDidChangeModel(r=>{!r.newModelUrl&&r.oldModelUrl?this._stopSingular():Ws.query&&this._run()})),this.toUnhook.add(e.onDidChangeConfiguration(r=>{const a=this.editor.getOption(81);this.occurrencesHighlight!==a&&(this.occurrencesHighlight=a,this._stopAll())})),this.decorations=this.editor.createDecorationsCollection(),this.workerRequestTokenId=0,this.workerRequest=null,this.workerRequestCompleted=!1,this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1,Ws.query&&this._run()}hasDecorations(){return this.decorations.length>0}restore(){this.occurrencesHighlight!=="off"&&this._run()}_getSortedHighlights(){return this.decorations.getRanges().sort(A.compareRangesUsingStarts)}moveNext(){const e=this._getSortedHighlights(),i=(e.findIndex(s=>s.containsPosition(this.editor.getPosition()))+1)%e.length,n=e[i];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(n.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(n);const s=this._getWord();if(s){const r=this.editor.getModel().getLineContent(n.startLineNumber);_a(`${r}, ${i+1} of ${e.length} for '${s.word}'`)}}finally{this._ignorePositionChangeEvent=!1}}moveBack(){const e=this._getSortedHighlights(),i=(e.findIndex(s=>s.containsPosition(this.editor.getPosition()))-1+e.length)%e.length,n=e[i];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(n.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(n);const s=this._getWord();if(s){const r=this.editor.getModel().getLineContent(n.startLineNumber);_a(`${r}, ${i+1} of ${e.length} for '${s.word}'`)}}finally{this._ignorePositionChangeEvent=!1}}_removeSingleDecorations(){if(!this.editor.hasModel())return;const e=Ws.storedDecorations.get(this.editor.getModel().uri);e&&(this.editor.removeDecorations(e),Ws.storedDecorations.delete(this.editor.getModel().uri),this.decorations.length>0&&(this.decorations.clear(),this._hasWordHighlights.set(!1)))}_removeAllDecorations(){const e=this.codeEditorService.listCodeEditors(),t=[];for(const i of e){if(!i.hasModel())continue;const n=Ws.storedDecorations.get(i.getModel().uri);if(!n)continue;i.removeDecorations(n),t.push(i.getModel().uri);const s=ug.get(i);s!=null&&s.wordHighlighter&&s.wordHighlighter.decorations.length>0&&(s.wordHighlighter.decorations.clear(),s.wordHighlighter.workerRequest=null,s.wordHighlighter._hasWordHighlights.set(!1))}for(const i of t)Ws.storedDecorations.delete(i)}_stopSingular(){var e,t,i,n;this._removeSingleDecorations(),this.editor.hasTextFocus()&&(((e=this.editor.getModel())===null||e===void 0?void 0:e.uri.scheme)!==Pt.vscodeNotebookCell&&((i=(t=Ws.query)===null||t===void 0?void 0:t.modelInfo)===null||i===void 0?void 0:i.model.uri.scheme)!==Pt.vscodeNotebookCell?(Ws.query=null,this._run()):!((n=Ws.query)===null||n===void 0)&&n.modelInfo&&(Ws.query.modelInfo=null)),this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1),this.workerRequest!==null&&(this.workerRequest.cancel(),this.workerRequest=null),this.workerRequestCompleted||(this.workerRequestTokenId++,this.workerRequestCompleted=!0)}_stopAll(){this._removeAllDecorations(),this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1),this.workerRequest!==null&&(this.workerRequest.cancel(),this.workerRequest=null),this.workerRequestCompleted||(this.workerRequestTokenId++,this.workerRequestCompleted=!0)}_onPositionChanged(e){var t;if(this.occurrencesHighlight==="off"){this._stopAll();return}if(e.reason!==3&&((t=this.editor.getModel())===null||t===void 0?void 0:t.uri.scheme)!==Pt.vscodeNotebookCell){this._stopAll();return}this._run()}_getWord(){const e=this.editor.getSelection(),t=e.startLineNumber,i=e.startColumn;return this.model.isDisposed()?null:this.model.getWordAtPosition({lineNumber:t,column:i})}getOtherModelsToHighlight(e){if(!e)return[];if(e.uri.scheme===Pt.vscodeNotebookCell){const s=[],r=this.codeEditorService.listCodeEditors();for(const a of r){const l=a.getModel();l&&l!==e&&l.uri.scheme===Pt.vscodeNotebookCell&&s.push(l)}return s}const i=[],n=this.codeEditorService.listCodeEditors();for(const s of n){if(!qz(s))continue;const r=s.getModel();r&&e===r.modified&&i.push(r.modified)}if(i.length)return i;if(this.occurrencesHighlight==="singleFile")return[];for(const s of n){const r=s.getModel();r&&r!==e&&i.push(r)}return i}_run(){var e;let t;if(this.editor.hasTextFocus()){const n=this.editor.getSelection();if(!n||n.startLineNumber!==n.endLineNumber){Ws.query=null,this._stopAll();return}const s=n.startColumn,r=n.endColumn,a=this._getWord();if(!a||a.startColumn>s||a.endColumn<r){Ws.query=null,this._stopAll();return}t=this.workerRequest&&this.workerRequest.isValid(this.model,n,this.decorations),Ws.query={modelInfo:{model:this.model,selection:n},word:a}}else if(!Ws.query)return;if(this.lastCursorPositionChangeTime=new Date().getTime(),t)this.workerRequestCompleted&&this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1,this._beginRenderDecorations());else{this._stopAll();const n=++this.workerRequestTokenId;this.workerRequestCompleted=!1;const s=this.getOtherModelsToHighlight(this.editor.getModel());if(!Ws.query.modelInfo||Ws.query.modelInfo.model.isDisposed())return;this.workerRequest=this.computeWithModel(Ws.query.modelInfo.model,Ws.query.modelInfo.selection,Ws.query.word,s),(e=this.workerRequest)===null||e===void 0||e.result.then(r=>{n===this.workerRequestTokenId&&(this.workerRequestCompleted=!0,this.workerRequestValue=r||[],this._beginRenderDecorations())},Nt)}}computeWithModel(e,t,i,n){return n.length?Lze(this.multiDocumentProviders,e,t,i,this.editor.getOption(131),n):Sze(this.providers,e,t,i,this.editor.getOption(131))}_beginRenderDecorations(){const e=new Date().getTime(),t=this.lastCursorPositionChangeTime+250;e>=t?(this.renderDecorationsTimer=-1,this.renderDecorations()):this.renderDecorationsTimer=setTimeout(()=>{this.renderDecorations()},t-e)}renderDecorations(){var e,t,i;this.renderDecorationsTimer=-1;const n=this.codeEditorService.listCodeEditors();for(const s of n){const r=ug.get(s);if(!r)continue;const a=[],l=(e=s.getModel())===null||e===void 0?void 0:e.uri;if(l&&this.workerRequestValue.has(l)){const c=Ws.storedDecorations.get(l),u=this.workerRequestValue.get(l);if(u)for(const g of u)g.range&&a.push({range:g.range,options:AVe(g.kind)});let f=[];s.changeDecorations(g=>{f=g.deltaDecorations(c??[],a)}),Ws.storedDecorations=Ws.storedDecorations.set(l,f),a.length>0&&((t=r.wordHighlighter)===null||t===void 0||t.decorations.set(a),(i=r.wordHighlighter)===null||i===void 0||i._hasWordHighlights.set(!0))}}}dispose(){this._stopSingular(),this.toUnhook.dispose()}};kD.storedDecorations=new ds;kD.query=null;kD=Ws=kce([QN(4,gi)],kD);let ug=lV=class extends J{static get(e){return e.getContribution(lV.ID)}constructor(e,t,i,n){super(),this._wordHighlighter=null;const s=()=>{e.hasModel()&&!e.getModel().isTooLargeForTokenization()&&(this._wordHighlighter=new kD(e,i.documentHighlightProvider,i.multiDocumentHighlightProvider,t,n))};this._register(e.onDidChangeModel(r=>{this._wordHighlighter&&(this._wordHighlighter.dispose(),this._wordHighlighter=null),s()})),s()}get wordHighlighter(){return this._wordHighlighter}saveViewState(){return!!(this._wordHighlighter&&this._wordHighlighter.hasDecorations())}moveNext(){var e;(e=this._wordHighlighter)===null||e===void 0||e.moveNext()}moveBack(){var e;(e=this._wordHighlighter)===null||e===void 0||e.moveBack()}restoreViewState(e){this._wordHighlighter&&e&&this._wordHighlighter.restore()}dispose(){this._wordHighlighter&&(this._wordHighlighter.dispose(),this._wordHighlighter=null),super.dispose()}};ug.ID="editor.contrib.wordHighlighter";ug=lV=kce([QN(1,bt),QN(2,Ze),QN(3,gi)],ug);class Tce extends Ke{constructor(e,t){super(t),this._isNext=e}run(e,t){const i=ug.get(t);i&&(this._isNext?i.moveNext():i.moveBack())}}class xze extends Tce{constructor(){super(!0,{id:"editor.action.wordHighlight.next",label:v("wordHighlight.next.label","Go to Next Symbol Highlight"),alias:"Go to Next Symbol Highlight",precondition:CO,kbOpts:{kbExpr:W.editorTextFocus,primary:65,weight:100}})}}class Dze extends Tce{constructor(){super(!1,{id:"editor.action.wordHighlight.prev",label:v("wordHighlight.previous.label","Go to Previous Symbol Highlight"),alias:"Go to Previous Symbol Highlight",precondition:CO,kbOpts:{kbExpr:W.editorTextFocus,primary:1089,weight:100}})}}class kze extends Ke{constructor(){super({id:"editor.action.wordHighlight.trigger",label:v("wordHighlight.trigger.label","Trigger Symbol Highlight"),alias:"Trigger Symbol Highlight",precondition:CO.toNegated(),kbOpts:{kbExpr:W.editorTextFocus,primary:0,weight:100}})}run(e,t,i){const n=ug.get(t);n&&n.restoreViewState(!0)}}pi(ug.ID,ug,0);Ce(xze);Ce(Dze);Ce(kze);class wO extends zs{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode,this._wordNavigationType=e.wordNavigationType}runEditorCommand(e,t,i){if(!t.hasModel())return;const n=hc(t.getOption(131),t.getOption(130)),s=t.getModel(),a=t.getSelections().map(l=>{const c=new Z(l.positionLineNumber,l.positionColumn),u=this._move(n,s,c,this._wordNavigationType);return this._moveTo(l,u,this._inSelectionMode)});if(s.pushStackElement(),t._getViewModel().setCursorStates("moveWordCommand",3,a.map(l=>fi.fromModelSelection(l))),a.length===1){const l=new Z(a[0].positionLineNumber,a[0].positionColumn);t.revealPosition(l,0)}}_moveTo(e,t,i){return i?new Xe(e.selectionStartLineNumber,e.selectionStartColumn,t.lineNumber,t.column):new Xe(t.lineNumber,t.column,t.lineNumber,t.column)}}class jm extends wO{_move(e,t,i,n){return Di.moveWordLeft(e,t,i,n)}}class Km extends wO{_move(e,t,i,n){return Di.moveWordRight(e,t,i,n)}}class Eze extends jm{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartLeft",precondition:void 0})}}class Ize extends jm{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndLeft",precondition:void 0})}}class Tze extends jm{constructor(){var e;super({inSelectionMode:!1,wordNavigationType:1,id:"cursorWordLeft",precondition:void 0,kbOpts:{kbExpr:ue.and(W.textInputFocus,(e=ue.and(UD,mP))===null||e===void 0?void 0:e.negate()),primary:2063,mac:{primary:527},weight:100}})}}class Nze extends jm{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartLeftSelect",precondition:void 0})}}class Rze extends jm{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndLeftSelect",precondition:void 0})}}class Mze extends jm{constructor(){var e;super({inSelectionMode:!0,wordNavigationType:1,id:"cursorWordLeftSelect",precondition:void 0,kbOpts:{kbExpr:ue.and(W.textInputFocus,(e=ue.and(UD,mP))===null||e===void 0?void 0:e.negate()),primary:3087,mac:{primary:1551},weight:100}})}}class Aze extends jm{constructor(){super({inSelectionMode:!1,wordNavigationType:3,id:"cursorWordAccessibilityLeft",precondition:void 0})}_move(e,t,i,n){return super._move(hc(Jd.wordSeparators.defaultValue,e.intlSegmenterLocales),t,i,n)}}class Pze extends jm{constructor(){super({inSelectionMode:!0,wordNavigationType:3,id:"cursorWordAccessibilityLeftSelect",precondition:void 0})}_move(e,t,i,n){return super._move(hc(Jd.wordSeparators.defaultValue,e.intlSegmenterLocales),t,i,n)}}class Oze extends Km{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartRight",precondition:void 0})}}class Fze extends Km{constructor(){var e;super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndRight",precondition:void 0,kbOpts:{kbExpr:ue.and(W.textInputFocus,(e=ue.and(UD,mP))===null||e===void 0?void 0:e.negate()),primary:2065,mac:{primary:529},weight:100}})}}class Bze extends Km{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordRight",precondition:void 0})}}class Wze extends Km{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartRightSelect",precondition:void 0})}}class Vze extends Km{constructor(){var e;super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndRightSelect",precondition:void 0,kbOpts:{kbExpr:ue.and(W.textInputFocus,(e=ue.and(UD,mP))===null||e===void 0?void 0:e.negate()),primary:3089,mac:{primary:1553},weight:100}})}}class Hze extends Km{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordRightSelect",precondition:void 0})}}class zze extends Km{constructor(){super({inSelectionMode:!1,wordNavigationType:3,id:"cursorWordAccessibilityRight",precondition:void 0})}_move(e,t,i,n){return super._move(hc(Jd.wordSeparators.defaultValue,e.intlSegmenterLocales),t,i,n)}}class Uze extends Km{constructor(){super({inSelectionMode:!0,wordNavigationType:3,id:"cursorWordAccessibilityRightSelect",precondition:void 0})}_move(e,t,i,n){return super._move(hc(Jd.wordSeparators.defaultValue,e.intlSegmenterLocales),t,i,n)}}class yO extends zs{constructor(e){super(e),this._whitespaceHeuristics=e.whitespaceHeuristics,this._wordNavigationType=e.wordNavigationType}runEditorCommand(e,t,i){const n=e.get(dn);if(!t.hasModel())return;const s=hc(t.getOption(131),t.getOption(130)),r=t.getModel(),a=t.getSelections(),l=t.getOption(6),c=t.getOption(11),u=n.getLanguageConfiguration(r.getLanguageId()).getAutoClosingPairs(),f=t._getViewModel(),g=a.map(p=>{const _=this._delete({wordSeparators:s,model:r,selection:p,whitespaceHeuristics:this._whitespaceHeuristics,autoClosingDelete:t.getOption(9),autoClosingBrackets:l,autoClosingQuotes:c,autoClosingPairs:u,autoClosedCharacters:f.getCursorAutoClosedCharacters()},this._wordNavigationType);return new Do(_,"")});t.pushUndoStop(),t.executeCommands(this.id,g),t.pushUndoStop()}}class zU extends yO{_delete(e,t){const i=Di.deleteWordLeft(e,t);return i||new A(1,1,1,1)}}class UU extends yO{_delete(e,t){const i=Di.deleteWordRight(e,t);if(i)return i;const n=e.model.getLineCount(),s=e.model.getLineMaxColumn(n);return new A(n,s,n,s)}}class $ze extends zU{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartLeft",precondition:W.writable})}}class jze extends zU{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndLeft",precondition:W.writable})}}class Kze extends zU{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordLeft",precondition:W.writable,kbOpts:{kbExpr:W.textInputFocus,primary:2049,mac:{primary:513},weight:100}})}}class qze extends UU{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartRight",precondition:W.writable})}}class Gze extends UU{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndRight",precondition:W.writable})}}class Yze extends UU{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordRight",precondition:W.writable,kbOpts:{kbExpr:W.textInputFocus,primary:2068,mac:{primary:532},weight:100}})}}class Zze extends Ke{constructor(){super({id:"deleteInsideWord",precondition:W.writable,label:v("deleteInsideWord","Delete Word"),alias:"Delete Word"})}run(e,t,i){if(!t.hasModel())return;const n=hc(t.getOption(131),t.getOption(130)),s=t.getModel(),a=t.getSelections().map(l=>{const c=Di.deleteInsideWord(n,s,l);return new Do(c,"")});t.pushUndoStop(),t.executeCommands(this.id,a),t.pushUndoStop()}}Me(new Eze);Me(new Ize);Me(new Tze);Me(new Nze);Me(new Rze);Me(new Mze);Me(new Oze);Me(new Fze);Me(new Bze);Me(new Wze);Me(new Vze);Me(new Hze);Me(new Aze);Me(new Pze);Me(new zze);Me(new Uze);Me(new $ze);Me(new jze);Me(new Kze);Me(new qze);Me(new Gze);Me(new Yze);Ce(Zze);class Qze extends yO{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordPartLeft",precondition:W.writable,kbOpts:{kbExpr:W.textInputFocus,primary:0,mac:{primary:769},weight:100}})}_delete(e,t){const i=UA.deleteWordPartLeft(e);return i||new A(1,1,1,1)}}class Xze extends yO{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordPartRight",precondition:W.writable,kbOpts:{kbExpr:W.textInputFocus,primary:0,mac:{primary:788},weight:100}})}_delete(e,t){const i=UA.deleteWordPartRight(e);if(i)return i;const n=e.model.getLineCount(),s=e.model.getLineMaxColumn(n);return new A(n,s,n,s)}}class Nce extends wO{_move(e,t,i,n){return UA.moveWordPartLeft(e,t,i)}}class Jze extends Nce{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordPartLeft",precondition:void 0,kbOpts:{kbExpr:W.textInputFocus,primary:0,mac:{primary:783},weight:100}})}}si.registerCommandAlias("cursorWordPartStartLeft","cursorWordPartLeft");class eUe extends Nce{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordPartLeftSelect",precondition:void 0,kbOpts:{kbExpr:W.textInputFocus,primary:0,mac:{primary:1807},weight:100}})}}si.registerCommandAlias("cursorWordPartStartLeftSelect","cursorWordPartLeftSelect");class Rce extends wO{_move(e,t,i,n){return UA.moveWordPartRight(e,t,i)}}class tUe extends Rce{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordPartRight",precondition:void 0,kbOpts:{kbExpr:W.textInputFocus,primary:0,mac:{primary:785},weight:100}})}}class iUe extends Rce{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordPartRightSelect",precondition:void 0,kbOpts:{kbExpr:W.textInputFocus,primary:0,mac:{primary:1809},weight:100}})}}Me(new Qze);Me(new Xze);Me(new Jze);Me(new eUe);Me(new tUe);Me(new iUe);class cV extends J{constructor(e){super(),this.editor=e,this._register(this.editor.onDidAttemptReadOnlyEdit(()=>this._onDidAttemptReadOnlyEdit()))}_onDidAttemptReadOnlyEdit(){const e=$r.get(this.editor);if(e&&this.editor.hasModel()){let t=this.editor.getOptions().get(92);t||(this.editor.isSimpleWidget?t=new qo(v("editor.simple.readonly","Cannot edit in read-only input")):t=new qo(v("editor.readonly","Cannot edit in read-only editor"))),e.showMessage(t,this.editor.getPosition())}}}cV.ID="editor.contrib.readOnlyMessageController";pi(cV.ID,cV,2);var nUe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},dte=function(o,e){return function(t,i){e(t,i,o)}};let dV=class extends J{constructor(e,t,i){super(),this._textModel=e,this._languageFeaturesService=t,this._outlineModelService=i,this._currentModel=ni(this,void 0);const n=Go("documentSymbolProvider.onDidChange",this._languageFeaturesService.documentSymbolProvider.onDidChange),s=Go("_textModel.onDidChangeContent",Ie.debounce(r=>this._textModel.onDidChangeContent(r),()=>{},100));this._register(gc(async(r,a)=>{n.read(r),s.read(r);const l=a.add(new G2e),c=await this._outlineModelService.getOrCreate(this._textModel,l.token);a.isDisposed||this._currentModel.set(c,void 0)}))}getBreadcrumbItems(e,t){const i=this._currentModel.read(t);if(!i)return[];const n=i.asListOfDocumentSymbols().filter(s=>e.contains(s.range.startLineNumber)&&!e.contains(s.range.endLineNumber));return n.sort(Ate(ac(s=>s.range.endLineNumber-s.range.startLineNumber,Uf))),n.map(s=>({name:s.name,kind:s.kind,startLineNumber:s.range.startLineNumber}))}};dV=nUe([dte(1,Ze),dte(2,Ck)],dV);Qx.setBreadcrumbsSourceFactory((o,e)=>e.createInstance(dV,o));class uV extends J{constructor(e){super(),this.editor=e,this.widget=null,$d&&(this._register(e.onDidChangeConfiguration(()=>this.update())),this.update())}update(){const e=!this.editor.getOption(91);!this.widget&&e?this.widget=new SO(this.editor):this.widget&&!e&&(this.widget.dispose(),this.widget=null)}dispose(){super.dispose(),this.widget&&(this.widget.dispose(),this.widget=null)}}uV.ID="editor.contrib.iPadShowKeyboard";class SO extends J{constructor(e){super(),this.editor=e,this._domNode=document.createElement("textarea"),this._domNode.className="iPadShowKeyboard",this._register(oe(this._domNode,"touchstart",t=>{this.editor.focus()})),this._register(oe(this._domNode,"focus",t=>{this.editor.focus()})),this.editor.addOverlayWidget(this)}dispose(){this.editor.removeOverlayWidget(this),super.dispose()}getId(){return SO.ID}getDomNode(){return this._domNode}getPosition(){return{preference:1}}}SO.ID="editor.contrib.ShowKeyboardWidget";pi(uV.ID,uV,3);var sUe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},ute=function(o,e){return function(t,i){e(t,i,o)}},hV;let z1=hV=class extends J{static get(e){return e.getContribution(hV.ID)}constructor(e,t,i){super(),this._editor=e,this._languageService=i,this._widget=null,this._register(this._editor.onDidChangeModel(n=>this.stop())),this._register(this._editor.onDidChangeModelLanguage(n=>this.stop())),this._register(Qn.onDidChange(n=>this.stop())),this._register(this._editor.onKeyUp(n=>n.keyCode===9&&this.stop()))}dispose(){this.stop(),super.dispose()}launch(){this._widget||this._editor.hasModel()&&(this._widget=new LO(this._editor,this._languageService))}stop(){this._widget&&(this._widget.dispose(),this._widget=null)}};z1.ID="editor.contrib.inspectTokens";z1=hV=sUe([ute(1,Al),ute(2,xn)],z1);class oUe extends Ke{constructor(){super({id:"editor.action.inspectTokens",label:_8.inspectTokensAction,alias:"Developer: Inspect Tokens",precondition:void 0})}run(e,t){const i=z1.get(t);i==null||i.launch()}}function rUe(o){let e="";for(let t=0,i=o.length;t<i;t++){const n=o.charCodeAt(t);switch(n){case 9:e+="";break;case 32:e+="";break;default:e+=String.fromCharCode(n)}}return e}function aUe(o,e){const t=Qn.get(e);if(t)return t;const i=o.encodeLanguageId(e);return{getInitialState:()=>l1,tokenize:(n,s,r)=>uH(e,r),tokenizeEncoded:(n,s,r)=>PA(i,r)}}class LO extends J{constructor(e,t){super(),this.allowEditorOverflow=!0,this._editor=e,this._languageService=t,this._model=this._editor.getModel(),this._domNode=document.createElement("div"),this._domNode.className="tokens-inspect-widget",this._tokenizationSupport=aUe(this._languageService.languageIdCodec,this._model.getLanguageId()),this._compute(this._editor.getPosition()),this._register(this._editor.onDidChangeCursorPosition(i=>this._compute(this._editor.getPosition()))),this._editor.addContentWidget(this)}dispose(){this._editor.removeContentWidget(this),super.dispose()}getId(){return LO._ID}_compute(e){const t=this._getTokensAtLine(e.lineNumber);let i=0;for(let l=t.tokens1.length-1;l>=0;l--){const c=t.tokens1[l];if(e.column-1>=c.offset){i=l;break}}let n=0;for(let l=t.tokens2.length>>>1;l>=0;l--)if(e.column-1>=t.tokens2[l<<1]){n=l;break}const s=this._model.getLineContent(e.lineNumber);let r="";if(i<t.tokens1.length){const l=t.tokens1[i].offset,c=i+1<t.tokens1.length?t.tokens1[i+1].offset:s.length;r=s.substring(l,c)}_o(this._domNode,ye("h2.tm-token",void 0,rUe(r),ye("span.tm-token-length",void 0,`${r.length} ${r.length===1?"char":"chars"}`))),ge(this._domNode,ye("hr.tokens-inspect-separator",{style:"clear:both"}));const a=(n<<1)+1<t.tokens2.length?this._decodeMetadata(t.tokens2[(n<<1)+1]):null;ge(this._domNode,ye("table.tm-metadata-table",void 0,ye("tbody",void 0,ye("tr",void 0,ye("td.tm-metadata-key",void 0,"language"),ye("td.tm-metadata-value",void 0,`${a?a.languageId:"-?-"}`)),ye("tr",void 0,ye("td.tm-metadata-key",void 0,"token type"),ye("td.tm-metadata-value",void 0,`${a?this._tokenTypeToString(a.tokenType):"-?-"}`)),ye("tr",void 0,ye("td.tm-metadata-key",void 0,"font style"),ye("td.tm-metadata-value",void 0,`${a?this._fontStyleToString(a.fontStyle):"-?-"}`)),ye("tr",void 0,ye("td.tm-metadata-key",void 0,"foreground"),ye("td.tm-metadata-value",void 0,`${a?ne.Format.CSS.formatHex(a.foreground):"-?-"}`)),ye("tr",void 0,ye("td.tm-metadata-key",void 0,"background"),ye("td.tm-metadata-value",void 0,`${a?ne.Format.CSS.formatHex(a.background):"-?-"}`))))),ge(this._domNode,ye("hr.tokens-inspect-separator")),i<t.tokens1.length&&ge(this._domNode,ye("span.tm-token-type",void 0,t.tokens1[i].type)),this._editor.layoutContentWidget(this)}_decodeMetadata(e){const t=Qn.getColorMap(),i=To.getLanguageId(e),n=To.getTokenType(e),s=To.getFontStyle(e),r=To.getForeground(e),a=To.getBackground(e);return{languageId:this._languageService.languageIdCodec.decodeLanguageId(i),tokenType:n,fontStyle:s,foreground:t[r],background:t[a]}}_tokenTypeToString(e){switch(e){case 0:return"Other";case 1:return"Comment";case 2:return"String";case 3:return"RegEx";default:return"??"}}_fontStyleToString(e){let t="";return e&1&&(t+="italic "),e&2&&(t+="bold "),e&4&&(t+="underline "),e&8&&(t+="strikethrough "),t.length===0&&(t="---"),t}_getTokensAtLine(e){const t=this._getStateBeforeLine(e),i=this._tokenizationSupport.tokenize(this._model.getLineContent(e),!0,t),n=this._tokenizationSupport.tokenizeEncoded(this._model.getLineContent(e),!0,t);return{startState:t,tokens1:i.tokens,tokens2:n.tokens,endState:i.endState}}_getStateBeforeLine(e){let t=this._tokenizationSupport.getInitialState();for(let i=1;i<e;i++)t=this._tokenizationSupport.tokenize(this._model.getLineContent(i),!0,t).endState;return t}getDomNode(){return this._domNode}getPosition(){return{position:this._editor.getPosition(),preference:[2,1]}}}LO._ID="editor.contrib.inspectTokensWidget";pi(z1.ID,z1,4);Ce(oUe);var lUe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},hte=function(o,e){return function(t,i){e(t,i,o)}},dL;let sA=dL=class{constructor(e,t){this.quickInputService=e,this.keybindingService=t,this.registry=$n.as(fb.Quickaccess)}provide(e){const t=new he;return t.add(e.onDidAccept(()=>{const[i]=e.selectedItems;i&&this.quickInputService.quickAccess.show(i.prefix,{preserveValue:!0})})),t.add(e.onDidChangeValue(i=>{const n=this.registry.getQuickAccessProvider(i.substr(dL.PREFIX.length));n&&n.prefix&&n.prefix!==dL.PREFIX&&this.quickInputService.quickAccess.show(n.prefix,{preserveValue:!0})})),e.items=this.getQuickAccessProviders().filter(i=>i.prefix!==dL.PREFIX),t}getQuickAccessProviders(){return this.registry.getQuickAccessProviders().sort((t,i)=>t.prefix.localeCompare(i.prefix)).flatMap(t=>this.createPicks(t))}createPicks(e){return e.helpEntries.map(t=>{const i=t.prefix||e.prefix,n=i||"";return{prefix:i,label:n,keybinding:t.commandId?this.keybindingService.lookupKeybinding(t.commandId):void 0,ariaLabel:v("helpPickAriaLabel","{0}, {1}",n,t.description),description:t.description}})}};sA.PREFIX="?";sA=dL=lUe([hte(0,ou),hte(1,Bi)],sA);$n.as(fb.Quickaccess).registerQuickAccessProvider({ctor:sA,prefix:"",helpEntries:[{description:v8.helpQuickAccessActionLabel}]});class Mce{constructor(e){this.options=e,this.rangeHighlightDecorationId=void 0}provide(e,t){var i;const n=new he;e.canAcceptInBackground=!!(!((i=this.options)===null||i===void 0)&&i.canAcceptInBackground),e.matchOnLabel=e.matchOnDescription=e.matchOnDetail=e.sortByLabel=!1;const s=n.add(new Xs);return s.value=this.doProvide(e,t),n.add(this.onDidActiveTextEditorControlChange(()=>{s.value=void 0,s.value=this.doProvide(e,t)})),n}doProvide(e,t){var i;const n=new he,s=this.activeTextEditorControl;if(s&&this.canProvideWithTextEditor(s)){const r={editor:s},a=Fre(s);if(a){let l=(i=s.saveViewState())!==null&&i!==void 0?i:void 0;n.add(a.onDidChangeCursorPosition(()=>{var c;l=(c=s.saveViewState())!==null&&c!==void 0?c:void 0})),r.restoreViewState=()=>{l&&s===this.activeTextEditorControl&&s.restoreViewState(l)},n.add(rm(t.onCancellationRequested)(()=>{var c;return(c=r.restoreViewState)===null||c===void 0?void 0:c.call(r)}))}n.add(lt(()=>this.clearDecorations(s))),n.add(this.provideWithTextEditor(r,e,t))}else n.add(this.provideWithoutTextEditor(e,t));return n}canProvideWithTextEditor(e){return!0}gotoLocation({editor:e},t){e.setSelection(t.range,"code.jump"),e.revealRangeInCenter(t.range,0),t.preserveFocus||e.focus();const i=e.getModel();i&&"getLineContent"in i&&fh(`${i.getLineContent(t.range.startLineNumber)}`)}getModel(e){var t;return qz(e)?(t=e.getModel())===null||t===void 0?void 0:t.modified:e.getModel()}addDecorations(e,t){e.changeDecorations(i=>{const n=[];this.rangeHighlightDecorationId&&(n.push(this.rangeHighlightDecorationId.overviewRulerDecorationId),n.push(this.rangeHighlightDecorationId.rangeHighlightId),this.rangeHighlightDecorationId=void 0);const s=[{range:t,options:{description:"quick-access-range-highlight",className:"rangeHighlight",isWholeLine:!0}},{range:t,options:{description:"quick-access-range-highlight-overview",overviewRuler:{color:Xn(Jne),position:kl.Full}}}],[r,a]=i.deltaDecorations(n,s);this.rangeHighlightDecorationId={rangeHighlightId:r,overviewRulerDecorationId:a}})}clearDecorations(e){const t=this.rangeHighlightDecorationId;t&&(e.changeDecorations(i=>{i.deltaDecorations([t.overviewRulerDecorationId,t.rangeHighlightId],[])}),this.rangeHighlightDecorationId=void 0)}}class xO extends Mce{constructor(){super({canAcceptInBackground:!0})}provideWithoutTextEditor(e){const t=v("cannotRunGotoLine","Open a text editor first to go to a line.");return e.items=[{label:t}],e.ariaLabel=t,J.None}provideWithTextEditor(e,t,i){const n=e.editor,s=new he;s.add(t.onDidAccept(l=>{const[c]=t.selectedItems;if(c){if(!this.isValidLineNumber(n,c.lineNumber))return;this.gotoLocation(e,{range:this.toRange(c.lineNumber,c.column),keyMods:t.keyMods,preserveFocus:l.inBackground}),l.inBackground||t.hide()}}));const r=()=>{const l=this.parsePosition(n,t.value.trim().substr(xO.PREFIX.length)),c=this.getPickLabel(n,l.lineNumber,l.column);if(t.items=[{lineNumber:l.lineNumber,column:l.column,label:c}],t.ariaLabel=c,!this.isValidLineNumber(n,l.lineNumber)){this.clearDecorations(n);return}const u=this.toRange(l.lineNumber,l.column);n.revealRangeInCenter(u,0),this.addDecorations(n,u)};r(),s.add(t.onDidChangeValue(()=>r()));const a=Fre(n);return a&&a.getOptions().get(68).renderType===2&&(a.updateOptions({lineNumbers:"on"}),s.add(lt(()=>a.updateOptions({lineNumbers:"relative"})))),s}toRange(e=1,t=1){return{startLineNumber:e,startColumn:t,endLineNumber:e,endColumn:t}}parsePosition(e,t){const i=t.split(/,|:|#/).map(s=>parseInt(s,10)).filter(s=>!isNaN(s)),n=this.lineCount(e)+1;return{lineNumber:i[0]>0?i[0]:n+i[0],column:i[1]}}getPickLabel(e,t,i){if(this.isValidLineNumber(e,t))return this.isValidColumn(e,t,i)?v("gotoLineColumnLabel","Go to line {0} and character {1}.",t,i):v("gotoLineLabel","Go to line {0}.",t);const n=e.getPosition()||{lineNumber:1,column:1},s=this.lineCount(e);return s>1?v("gotoLineLabelEmptyWithLimit","Current Line: {0}, Character: {1}. Type a line number between 1 and {2} to navigate to.",n.lineNumber,n.column,s):v("gotoLineLabelEmpty","Current Line: {0}, Character: {1}. Type a line number to navigate to.",n.lineNumber,n.column)}isValidLineNumber(e,t){return!t||typeof t!="number"?!1:t>0&&t<=this.lineCount(e)}isValidColumn(e,t,i){if(!i||typeof i!="number")return!1;const n=this.getModel(e);if(!n)return!1;const s={lineNumber:t,column:i};return n.validatePosition(s).equals(s)}lineCount(e){var t,i;return(i=(t=this.getModel(e))===null||t===void 0?void 0:t.getLineCount())!==null&&i!==void 0?i:0}}xO.PREFIX=":";var cUe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},dUe=function(o,e){return function(t,i){e(t,i,o)}};let ED=class extends xO{constructor(e){super(),this.editorService=e,this.onDidActiveTextEditorControlChange=Ie.None}get activeTextEditorControl(){var e;return(e=this.editorService.getFocusedCodeEditor())!==null&&e!==void 0?e:void 0}};ED=cUe([dUe(0,gi)],ED);let $U=class Ace extends Ke{constructor(){super({id:Ace.ID,label:JR.gotoLineActionLabel,alias:"Go to Line/Column...",precondition:void 0,kbOpts:{kbExpr:W.focus,primary:2085,mac:{primary:293},weight:100}})}run(e){e.get(ou).quickAccess.show(ED.PREFIX)}};$U.ID="editor.action.gotoLine";Ce($U);$n.as(fb.Quickaccess).registerQuickAccessProvider({ctor:ED,prefix:ED.PREFIX,helpEntries:[{description:JR.gotoLineActionLabel,commandId:$U.ID}]});const Pce=[void 0,[]];function OB(o,e,t=0,i=0){const n=e;return n.values&&n.values.length>1?uUe(o,n.values,t,i):Oce(o,e,t,i)}function uUe(o,e,t,i){let n=0;const s=[];for(const r of e){const[a,l]=Oce(o,r,t,i);if(typeof a!="number")return Pce;n+=a,s.push(...l)}return[n,hUe(s)]}function Oce(o,e,t,i){const n=Ov(e.original,e.originalLowercase,t,o,o.toLowerCase(),i,{firstMatchCanBeWeak:!0,boostFullMatch:!0});return n?[n[0],JD(n)]:Pce}function hUe(o){const e=o.sort((n,s)=>n.start-s.start),t=[];let i;for(const n of e)!i||!fUe(i,n)?(i=n,t.push(n)):(i.start=Math.min(i.start,n.start),i.end=Math.max(i.end,n.end));return t}function fUe(o,e){return!(o.end<e.start||e.end<o.start)}function fte(o){return o.startsWith('"')&&o.endsWith('"')}const Fce=" ";function fV(o){typeof o!="string"&&(o="");const e=o.toLowerCase(),{pathNormalized:t,normalized:i,normalizedLowercase:n}=gte(o),s=t.indexOf(Fd)>=0,r=fte(o);let a;const l=o.split(Fce);if(l.length>1)for(const c of l){const u=fte(c),{pathNormalized:f,normalized:g,normalizedLowercase:p}=gte(c);g&&(a||(a=[]),a.push({original:c,originalLowercase:c.toLowerCase(),pathNormalized:f,normalized:g,normalizedLowercase:p,expectContiguousMatch:u}))}return{original:o,originalLowercase:e,pathNormalized:t,normalized:i,normalizedLowercase:n,values:a,containsPathSeparator:s,expectContiguousMatch:r}}function gte(o){let e;Mo?e=o.replace(/\//g,Fd):e=o.replace(/\\/g,Fd);const t=ICe(e).replace(/\s|"/g,"");return{pathNormalized:e,normalized:t,normalizedLowercase:t.toLowerCase()}}function pte(o){return Array.isArray(o)?fV(o.map(e=>e.original).join(Fce)):fV(o.original)}var gUe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},mte=function(o,e){return function(t,i){e(t,i,o)}},YC;let ch=YC=class extends Mce{constructor(e,t,i=Object.create(null)){super(i),this._languageFeaturesService=e,this._outlineModelService=t,this.options=i,this.options.canAcceptInBackground=!0}provideWithoutTextEditor(e){return this.provideLabelPick(e,v("cannotRunGotoSymbolWithoutEditor","To go to a symbol, first open a text editor with symbol information.")),J.None}provideWithTextEditor(e,t,i){const n=e.editor,s=this.getModel(n);return s?this._languageFeaturesService.documentSymbolProvider.has(s)?this.doProvideWithEditorSymbols(e,s,t,i):this.doProvideWithoutEditorSymbols(e,s,t,i):J.None}doProvideWithoutEditorSymbols(e,t,i,n){const s=new he;return this.provideLabelPick(i,v("cannotRunGotoSymbolWithoutSymbolProvider","The active text editor does not provide symbol information.")),(async()=>!await this.waitForLanguageSymbolRegistry(t,s)||n.isCancellationRequested||s.add(this.doProvideWithEditorSymbols(e,t,i,n)))(),s}provideLabelPick(e,t){e.items=[{label:t,index:0,kind:14}],e.ariaLabel=t}async waitForLanguageSymbolRegistry(e,t){if(this._languageFeaturesService.documentSymbolProvider.has(e))return!0;const i=new BD,n=t.add(this._languageFeaturesService.documentSymbolProvider.onDidChange(()=>{this._languageFeaturesService.documentSymbolProvider.has(e)&&(n.dispose(),i.complete(!0))}));return t.add(lt(()=>i.complete(!1))),i.p}doProvideWithEditorSymbols(e,t,i,n){var s;const r=e.editor,a=new he;a.add(i.onDidAccept(f=>{const[g]=i.selectedItems;g&&g.range&&(this.gotoLocation(e,{range:g.range.selection,keyMods:i.keyMods,preserveFocus:f.inBackground}),f.inBackground||i.hide())})),a.add(i.onDidTriggerItemButton(({item:f})=>{f&&f.range&&(this.gotoLocation(e,{range:f.range.selection,keyMods:i.keyMods,forceSideBySide:!0}),i.hide())}));const l=this.getDocumentSymbols(t,n);let c;const u=async f=>{c==null||c.dispose(!0),i.busy=!1,c=new os(n),i.busy=!0;try{const g=fV(i.value.substr(YC.PREFIX.length).trim()),p=await this.doGetSymbolPicks(l,g,void 0,c.token);if(n.isCancellationRequested)return;if(p.length>0){if(i.items=p,f&&g.original.length===0){const _=ax(p,b=>!!(b.type!=="separator"&&b.range&&A.containsPosition(b.range.decoration,f)));_&&(i.activeItems=[_])}}else g.original.length>0?this.provideLabelPick(i,v("noMatchingSymbolResults","No matching editor symbols")):this.provideLabelPick(i,v("noSymbolResults","No editor symbols"))}finally{n.isCancellationRequested||(i.busy=!1)}};return a.add(i.onDidChangeValue(()=>u(void 0))),u((s=r.getSelection())===null||s===void 0?void 0:s.getPosition()),a.add(i.onDidChangeActive(()=>{const[f]=i.activeItems;f&&f.range&&(r.revealRangeInCenter(f.range.selection,0),this.addDecorations(r,f.range.decoration))})),a}async doGetSymbolPicks(e,t,i,n){var s,r;const a=await e;if(n.isCancellationRequested)return[];const l=t.original.indexOf(YC.SCOPE_PREFIX)===0,c=l?1:0;let u,f;t.values&&t.values.length>1?(u=pte(t.values[0]),f=pte(t.values.slice(1))):u=t;let g;const p=(r=(s=this.options)===null||s===void 0?void 0:s.openSideBySideDirection)===null||r===void 0?void 0:r.call(s);p&&(g=[{iconClass:p==="right"?pt.asClassName(Ee.splitHorizontal):pt.asClassName(Ee.splitVertical),tooltip:p==="right"?v("openToSide","Open to the Side"):v("openToBottom","Open to the Bottom")}]);const _=[];for(let S=0;S<a.length;S++){const L=a[S],x=kCe(L.name),D=`$(${cR.toIcon(L.kind).id}) ${x}`,E=D.length-x.length;let N=L.containerName;i!=null&&i.extraContainerLabel&&(N?N=`${i.extraContainerLabel}  ${N}`:N=i.extraContainerLabel);let M,F,H,Q;if(t.original.length>c){let j=!1;if(u!==t&&([M,F]=OB(D,{...t,values:void 0},c,E),typeof M=="number"&&(j=!0)),typeof M!="number"&&([M,F]=OB(D,u,c,E),typeof M!="number"))continue;if(!j&&f){if(N&&f.original.length>0&&([H,Q]=OB(N,f)),typeof H!="number")continue;typeof M=="number"&&(M+=H)}}const K=L.tags&&L.tags.indexOf(1)>=0;_.push({index:S,kind:L.kind,score:M,label:D,ariaLabel:wCe(L.name,L.kind),description:N,highlights:K?void 0:{label:F,description:Q},range:{selection:A.collapseToStart(L.selectionRange),decoration:L.range},strikethrough:K,buttons:g})}const b=_.sort((S,L)=>l?this.compareByKindAndScore(S,L):this.compareByScore(S,L));let y=[];if(l){let D=function(){L&&typeof S=="number"&&x>0&&(L.label=kv(BB[S]||FB,x))},S,L,x=0;for(const E of b)S!==E.kind?(D(),S=E.kind,x=1,L={type:"separator"},y.push(L)):x++,y.push(E);D()}else b.length>0&&(y=[{label:v("symbols","symbols ({0})",_.length),type:"separator"},...b]);return y}compareByScore(e,t){if(typeof e.score!="number"&&typeof t.score=="number")return 1;if(typeof e.score=="number"&&typeof t.score!="number")return-1;if(typeof e.score=="number"&&typeof t.score=="number"){if(e.score>t.score)return-1;if(e.score<t.score)return 1}return e.index<t.index?-1:e.index>t.index?1:0}compareByKindAndScore(e,t){const i=BB[e.kind]||FB,n=BB[t.kind]||FB,s=i.localeCompare(n);return s===0?this.compareByScore(e,t):s}async getDocumentSymbols(e,t){const i=await this._outlineModelService.getOrCreate(e,t);return t.isCancellationRequested?[]:i.asListOfDocumentSymbols()}};ch.PREFIX="@";ch.SCOPE_PREFIX=":";ch.PREFIX_BY_CATEGORY=`${YC.PREFIX}${YC.SCOPE_PREFIX}`;ch=YC=gUe([mte(0,Ze),mte(1,Ck)],ch);const FB=v("property","properties ({0})"),BB={5:v("method","methods ({0})"),11:v("function","functions ({0})"),8:v("_constructor","constructors ({0})"),12:v("variable","variables ({0})"),4:v("class","classes ({0})"),22:v("struct","structs ({0})"),23:v("event","events ({0})"),24:v("operator","operators ({0})"),10:v("interface","interfaces ({0})"),2:v("namespace","namespaces ({0})"),3:v("package","packages ({0})"),25:v("typeParameter","type parameters ({0})"),1:v("modules","modules ({0})"),6:v("property","properties ({0})"),9:v("enum","enumerations ({0})"),21:v("enumMember","enumeration members ({0})"),14:v("string","strings ({0})"),0:v("file","files ({0})"),17:v("array","arrays ({0})"),15:v("number","numbers ({0})"),16:v("boolean","booleans ({0})"),18:v("object","objects ({0})"),19:v("key","keys ({0})"),7:v("field","fields ({0})"),13:v("constant","constants ({0})")};var pUe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},WB=function(o,e){return function(t,i){e(t,i,o)}};let gV=class extends ch{constructor(e,t,i){super(t,i),this.editorService=e,this.onDidActiveTextEditorControlChange=Ie.None}get activeTextEditorControl(){var e;return(e=this.editorService.getFocusedCodeEditor())!==null&&e!==void 0?e:void 0}};gV=pUe([WB(0,gi),WB(1,Ze),WB(2,Ck)],gV);class Sk extends Ke{constructor(){super({id:Sk.ID,label:Mx.quickOutlineActionLabel,alias:"Go to Symbol...",precondition:W.hasDocumentSymbolProvider,kbOpts:{kbExpr:W.focus,primary:3117,weight:100},contextMenuOpts:{group:"navigation",order:3}})}run(e){e.get(ou).quickAccess.show(ch.PREFIX,{itemActivation:yd.NONE})}}Sk.ID="editor.action.quickOutline";Ce(Sk);$n.as(fb.Quickaccess).registerQuickAccessProvider({ctor:gV,prefix:ch.PREFIX,helpEntries:[{description:Mx.quickOutlineActionLabel,prefix:ch.PREFIX,commandId:Sk.ID},{description:Mx.quickOutlineByCategoryActionLabel,prefix:ch.PREFIX_BY_CATEGORY}]});function VB(o,e){return e&&(o.stack||o.stacktrace)?v("stackTrace.format","{0}: {1}",vte(o),_te(o.stack)||_te(o.stacktrace)):vte(o)}function _te(o){return Array.isArray(o)?o.join(`
`):o}function vte(o){return o.code==="ERR_UNC_HOST_NOT_ALLOWED"?`${o.message}. Please update the 'security.allowedUNCHosts' setting if you want to allow this host.`:typeof o.code=="string"&&typeof o.errno=="number"&&typeof o.syscall=="string"?v("nodeExceptionMessage","A system error occurred ({0})",o.message):o.message||v("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}function Bce(o=null,e=!1){if(!o)return v("error.defaultMessage","An unknown error occurred. Please consult the log for more details.");if(Array.isArray(o)){const t=Ud(o),i=Bce(t[0],e);return t.length>1?v("error.moreErrors","{0} ({1} errors in total)",i,t.length):i}if(Ur(o))return o;if(o.detail){const t=o.detail;if(t.error)return VB(t.error,e);if(t.exception)return VB(t.exception,e)}return o.stack?VB(o,e):o.message?o.message:v("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}function mUe(o){var e;const t=new Map;for(const i of o)t.set(i,((e=t.get(i))!==null&&e!==void 0?e:0)+1);return t}class jL{constructor(){this.chunkCount=0,this.chunkOccurrences=new Map,this.documents=new Map}calculateScores(e,t){const i=this.computeEmbedding(e),n=new Map,s=[];for(const[r,a]of this.documents){if(t.isCancellationRequested)return[];for(const l of a.chunks){const c=this.computeSimilarityScore(l,i,n);c>0&&s.push({key:r,score:c})}}return s}static termFrequencies(e){return mUe(jL.splitTerms(e))}static*splitTerms(e){const t=i=>i.toLowerCase();for(const[i]of e.matchAll(new RegExp("\\b\\p{Letter}[\\p{Letter}\\d]{2,}\\b","gu"))){yield t(i);const n=i.replace(/([a-z])([A-Z])/g,"$1 $2").split(/\s+/g);if(n.length>1)for(const s of n)s.length>2&&new RegExp("\\p{Letter}{3,}","gu").test(s)&&(yield t(s))}}updateDocuments(e){var t;for(const{key:i}of e)this.deleteDocument(i);for(const i of e){const n=[];for(const s of i.textChunks){const r=jL.termFrequencies(s);for(const a of r.keys())this.chunkOccurrences.set(a,((t=this.chunkOccurrences.get(a))!==null&&t!==void 0?t:0)+1);n.push({text:s,tf:r})}this.chunkCount+=n.length,this.documents.set(i.key,{chunks:n})}return this}deleteDocument(e){const t=this.documents.get(e);if(t){this.documents.delete(e),this.chunkCount-=t.chunks.length;for(const i of t.chunks)for(const n of i.tf.keys()){const s=this.chunkOccurrences.get(n);if(typeof s=="number"){const r=s-1;r<=0?this.chunkOccurrences.delete(n):this.chunkOccurrences.set(n,r)}}}}computeSimilarityScore(e,t,i){let n=0;for(const[s,r]of Object.entries(t)){const a=e.tf.get(s);if(!a)continue;let l=i.get(s);typeof l!="number"&&(l=this.computeIdf(s),i.set(s,l));const c=a*l;n+=c*r}return n}computeEmbedding(e){const t=jL.termFrequencies(e);return this.computeTfidf(t)}computeIdf(e){var t;const i=(t=this.chunkOccurrences.get(e))!==null&&t!==void 0?t:0;return i>0?Math.log((this.chunkCount+1)/i):0}computeTfidf(e){const t=Object.create(null);for(const[i,n]of e){const s=this.computeIdf(i);s>0&&(t[i]=n*s)}return t}}function _Ue(o){var e,t;const i=o.slice(0);i.sort((s,r)=>r.score-s.score);const n=(t=(e=i[0])===null||e===void 0?void 0:e.score)!==null&&t!==void 0?t:0;if(n>0)for(const s of i)s.score/=n;return i}var bC;(function(o){o[o.NO_ACTION=0]="NO_ACTION",o[o.CLOSE_PICKER=1]="CLOSE_PICKER",o[o.REFRESH_PICKER=2]="REFRESH_PICKER",o[o.REMOVE_ITEM=3]="REMOVE_ITEM"})(bC||(bC={}));function HB(o){const e=o;return Array.isArray(e.items)}function bte(o){const e=o;return!!e.picks&&e.additionalPicks instanceof Promise}class vUe extends J{constructor(e,t){super(),this.prefix=e,this.options=t}provide(e,t,i){var n;const s=new he;e.canAcceptInBackground=!!(!((n=this.options)===null||n===void 0)&&n.canAcceptInBackground),e.matchOnLabel=e.matchOnDescription=e.matchOnDetail=e.sortByLabel=!1;let r;const a=s.add(new Xs),l=async()=>{var u;const f=a.value=new he;r==null||r.dispose(!0),e.busy=!1,r=new os(t);const g=r.token;let p=e.value.substring(this.prefix.length);!((u=this.options)===null||u===void 0)&&u.shouldSkipTrimPickFilter||(p=p.trim());const _=this._getPicks(p,f,g,i),b=(S,L)=>{var x;let D,E;if(HB(S)?(D=S.items,E=S.active):D=S,D.length===0){if(L)return!1;(p.length>0||e.hideInput)&&(!((x=this.options)===null||x===void 0)&&x.noResultsPick)&&(GL(this.options.noResultsPick)?D=[this.options.noResultsPick(p)]:D=[this.options.noResultsPick])}return e.items=D,E&&(e.activeItems=[E]),!0},y=async S=>{let L=!1,x=!1;await Promise.all([(async()=>{typeof S.mergeDelay=="number"&&(await cm(S.mergeDelay),g.isCancellationRequested)||x||(L=b(S.picks,!0))})(),(async()=>{e.busy=!0;try{const D=await S.additionalPicks;if(g.isCancellationRequested)return;let E,N;HB(S.picks)?(E=S.picks.items,N=S.picks.active):E=S.picks;let M,F;if(HB(D)?(M=D.items,F=D.active):M=D,M.length>0||!L){let H;if(!N&&!F){const Q=e.activeItems[0];Q&&E.indexOf(Q)!==-1&&(H=Q)}b({items:[...E,...M],active:N||F||H})}}finally{g.isCancellationRequested||(e.busy=!1),x=!0}})()])};if(_!==null)if(bte(_))await y(_);else if(!(_ instanceof Promise))b(_);else{e.busy=!0;try{const S=await _;if(g.isCancellationRequested)return;bte(S)?await y(S):b(S)}finally{g.isCancellationRequested||(e.busy=!1)}}};s.add(e.onDidChangeValue(()=>l())),l(),s.add(e.onDidAccept(u=>{const[f]=e.selectedItems;typeof(f==null?void 0:f.accept)=="function"&&(u.inBackground||e.hide(),f.accept(e.keyMods,u))}));const c=async(u,f)=>{var g,p;if(typeof f.trigger!="function")return;const _=(p=(g=f.buttons)===null||g===void 0?void 0:g.indexOf(u))!==null&&p!==void 0?p:-1;if(_>=0){const b=f.trigger(_,e.keyMods),y=typeof b=="number"?b:await b;if(t.isCancellationRequested)return;switch(y){case bC.NO_ACTION:break;case bC.CLOSE_PICKER:e.hide();break;case bC.REFRESH_PICKER:l();break;case bC.REMOVE_ITEM:{const S=e.items.indexOf(f);if(S!==-1){const L=e.items.slice(),x=L.splice(S,1),D=e.activeItems.filter(N=>N!==x[0]),E=e.keepScrollPosition;e.keepScrollPosition=!0,e.items=L,D&&(e.activeItems=D),e.keepScrollPosition=E}break}}}};return s.add(e.onDidTriggerItemButton(({button:u,item:f})=>c(u,f))),s.add(e.onDidTriggerSeparatorButton(({button:u,separator:f})=>c(u,f))),s}}var Wce=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},yp=function(o,e){return function(t,i){e(t,i,o)}},$_,Rs;let sb=$_=class extends vUe{constructor(e,t,i,n,s,r){super($_.PREFIX,e),this.instantiationService=t,this.keybindingService=i,this.commandService=n,this.telemetryService=s,this.dialogService=r,this.commandsHistory=this._register(this.instantiationService.createInstance(Rm)),this.options=e}async _getPicks(e,t,i,n){var s,r,a,l;const c=await this.getCommandPicks(i);if(i.isCancellationRequested)return[];const u=rm(()=>{const S=new jL;S.updateDocuments(c.map(x=>({key:x.commandId,textChunks:[this.getTfIdfChunk(x)]})));const L=S.calculateScores(e,i);return _Ue(L).filter(x=>x.score>$_.TFIDF_THRESHOLD).slice(0,$_.TFIDF_MAX_RESULTS)}),f=[];for(const S of c){const L=(s=$_.WORD_FILTER(e,S.label))!==null&&s!==void 0?s:void 0,x=S.commandAlias&&(r=$_.WORD_FILTER(e,S.commandAlias))!==null&&r!==void 0?r:void 0;if(L||x)S.highlights={label:L,detail:this.options.showAlias?x:void 0},f.push(S);else if(e===S.commandId)f.push(S);else if(e.length>=3){const D=u();if(i.isCancellationRequested)return[];const E=D.find(N=>N.key===S.commandId);E&&(S.tfIdfScore=E.score,f.push(S))}}const g=new Map;for(const S of f){const L=g.get(S.label);L?(S.description=S.commandId,L.description=L.commandId):g.set(S.label,S)}f.sort((S,L)=>{if(S.tfIdfScore&&L.tfIdfScore)return S.tfIdfScore===L.tfIdfScore?S.label.localeCompare(L.label):L.tfIdfScore-S.tfIdfScore;if(S.tfIdfScore)return 1;if(L.tfIdfScore)return-1;const x=this.commandsHistory.peek(S.commandId),D=this.commandsHistory.peek(L.commandId);if(x&&D)return x>D?-1:1;if(x)return-1;if(D)return 1;if(this.options.suggestedCommandIds){const E=this.options.suggestedCommandIds.has(S.commandId),N=this.options.suggestedCommandIds.has(L.commandId);if(E&&N)return 0;if(E)return-1;if(N)return 1}return S.label.localeCompare(L.label)});const p=[];let _=!1,b=!0,y=!!this.options.suggestedCommandIds;for(let S=0;S<f.length;S++){const L=f[S];S===0&&this.commandsHistory.peek(L.commandId)&&(p.push({type:"separator",label:v("recentlyUsed","recently used")}),_=!0),b&&L.tfIdfScore!==void 0&&(p.push({type:"separator",label:v("suggested","similar commands")}),b=!1),y&&L.tfIdfScore===void 0&&!this.commandsHistory.peek(L.commandId)&&(!((a=this.options.suggestedCommandIds)===null||a===void 0)&&a.has(L.commandId))&&(p.push({type:"separator",label:v("commonlyUsed","commonly used")}),_=!0,y=!1),_&&L.tfIdfScore===void 0&&!this.commandsHistory.peek(L.commandId)&&!(!((l=this.options.suggestedCommandIds)===null||l===void 0)&&l.has(L.commandId))&&(p.push({type:"separator",label:v("morecCommands","other commands")}),_=!1),p.push(this.toCommandPick(L,n))}return this.hasAdditionalCommandPicks(e,i)?{picks:p,additionalPicks:(async()=>{var S;const L=await this.getAdditionalCommandPicks(c,f,e,i);if(i.isCancellationRequested)return[];const x=L.map(D=>this.toCommandPick(D,n));return b&&((S=x[0])===null||S===void 0?void 0:S.type)!=="separator"&&x.unshift({type:"separator",label:v("suggested","similar commands")}),x})()}:p}toCommandPick(e,t){if(e.type==="separator")return e;const i=this.keybindingService.lookupKeybinding(e.commandId),n=i?v("commandPickAriaLabelWithKeybinding","{0}, {1}",e.label,i.getAriaLabel()):e.label;return{...e,ariaLabel:n,detail:this.options.showAlias&&e.commandAlias!==e.label?e.commandAlias:void 0,keybinding:i,accept:async()=>{var s,r;this.commandsHistory.push(e.commandId),this.telemetryService.publicLog2("workbenchActionExecuted",{id:e.commandId,from:(s=t==null?void 0:t.from)!==null&&s!==void 0?s:"quick open"});try{!((r=e.args)===null||r===void 0)&&r.length?await this.commandService.executeCommand(e.commandId,...e.args):await this.commandService.executeCommand(e.commandId)}catch(a){eu(a)||this.dialogService.error(v("canNotRun","Command '{0}' resulted in an error",e.label),Bce(a))}}}}getTfIdfChunk({label:e,commandAlias:t,commandDescription:i}){let n=e;return t&&t!==e&&(n+=` - ${t}`),i&&i.value!==e&&(n+=` - ${i.value===i.original?i.value:`${i.value} (${i.original})`}`),n}};sb.PREFIX=">";sb.TFIDF_THRESHOLD=.5;sb.TFIDF_MAX_RESULTS=5;sb.WORD_FILTER=ez(Nx,uRe,noe);sb=$_=Wce([yp(1,ct),yp(2,Bi),yp(3,Un),yp(4,pr),yp(5,XD)],sb);let Rm=Rs=class extends J{constructor(e,t,i){super(),this.storageService=e,this.configurationService=t,this.logService=i,this.configuredCommandsHistoryLength=0,this.updateConfiguration(),this.load(),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(e=>this.updateConfiguration(e))),this._register(this.storageService.onWillSaveState(e=>{e.reason===Vx.SHUTDOWN&&this.saveState()}))}updateConfiguration(e){e&&!e.affectsConfiguration("workbench.commandPalette.history")||(this.configuredCommandsHistoryLength=Rs.getConfiguredCommandHistoryLength(this.configurationService),Rs.cache&&Rs.cache.limit!==this.configuredCommandsHistoryLength&&(Rs.cache.limit=this.configuredCommandsHistoryLength,Rs.hasChanges=!0))}load(){const e=this.storageService.get(Rs.PREF_KEY_CACHE,0);let t;if(e)try{t=JSON.parse(e)}catch(n){this.logService.error(`[CommandsHistory] invalid data: ${n}`)}const i=Rs.cache=new Dh(this.configuredCommandsHistoryLength,1);if(t){let n;t.usesLRU?n=t.entries:n=t.entries.sort((s,r)=>s.value-r.value),n.forEach(s=>i.set(s.key,s.value))}Rs.counter=this.storageService.getNumber(Rs.PREF_KEY_COUNTER,0,Rs.counter)}push(e){Rs.cache&&(Rs.cache.set(e,Rs.counter++),Rs.hasChanges=!0)}peek(e){var t;return(t=Rs.cache)===null||t===void 0?void 0:t.peek(e)}saveState(){if(!Rs.cache||!Rs.hasChanges)return;const e={usesLRU:!0,entries:[]};Rs.cache.forEach((t,i)=>e.entries.push({key:i,value:t})),this.storageService.store(Rs.PREF_KEY_CACHE,JSON.stringify(e),0,0),this.storageService.store(Rs.PREF_KEY_COUNTER,Rs.counter,0,0),Rs.hasChanges=!1}static getConfiguredCommandHistoryLength(e){var t,i;const s=(i=(t=e.getValue().workbench)===null||t===void 0?void 0:t.commandPalette)===null||i===void 0?void 0:i.history;return typeof s=="number"?s:Rs.DEFAULT_COMMANDS_HISTORY_LENGTH}};Rm.DEFAULT_COMMANDS_HISTORY_LENGTH=50;Rm.PREF_KEY_CACHE="commandPalette.mru.cache";Rm.PREF_KEY_COUNTER="commandPalette.mru.counter";Rm.counter=1;Rm.hasChanges=!1;Rm=Rs=Wce([yp(0,Qc),yp(1,$t),yp(2,mr)],Rm);class bUe extends sb{constructor(e,t,i,n,s,r){super(e,t,i,n,s,r)}getCodeEditorCommandPicks(){const e=this.activeTextEditorControl;if(!e)return[];const t=[];for(const i of e.getSupportedActions())t.push({commandId:i.id,commandAlias:i.alias,label:rz(i.label)||i.id});return t}}var CUe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},W0=function(o,e){return function(t,i){e(t,i,o)}};let ID=class extends bUe{get activeTextEditorControl(){var e;return(e=this.codeEditorService.getFocusedCodeEditor())!==null&&e!==void 0?e:void 0}constructor(e,t,i,n,s,r){super({showAlias:!1},e,i,n,s,r),this.codeEditorService=t}async getCommandPicks(){return this.getCodeEditorCommandPicks()}hasAdditionalCommandPicks(){return!1}async getAdditionalCommandPicks(){return[]}};ID=CUe([W0(0,ct),W0(1,gi),W0(2,Bi),W0(3,Un),W0(4,pr),W0(5,XD)],ID);class Lk extends Ke{constructor(){super({id:Lk.ID,label:eM.quickCommandActionLabel,alias:"Command Palette",precondition:void 0,kbOpts:{kbExpr:W.focus,primary:59,weight:100},contextMenuOpts:{group:"z_commands",order:1}})}run(e){e.get(ou).quickAccess.show(ID.PREFIX)}}Lk.ID="editor.action.quickCommand";Ce(Lk);$n.as(fb.Quickaccess).registerQuickAccessProvider({ctor:ID,prefix:ID.PREFIX,helpEntries:[{description:eM.quickCommandHelp,commandId:Lk.ID}]});var wUe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},V0=function(o,e){return function(t,i){e(t,i,o)}};let pV=class extends xm{constructor(e,t,i,n,s,r,a){super(!0,e,t,i,n,s,r,a)}};pV=wUe([V0(1,bt),V0(2,gi),V0(3,ys),V0(4,ct),V0(5,Qc),V0(6,$t)],pV);pi(xm.ID,pV,4);class yUe extends Ke{constructor(){super({id:"editor.action.toggleHighContrast",label:b8.toggleHighContrast,alias:"Toggle High Contrast Theme",precondition:void 0}),this._originalThemeName=null}run(e,t){const i=e.get(Al),n=i.getColorTheme();Vd(n.type)?(i.setTheme(this._originalThemeName||(h1(n.type)?$C:xf)),this._originalThemeName=null):(i.setTheme(h1(n.type)?bv:Cv),this._originalThemeName=n.themeName)}}Ce(yUe);self.MonacoEnvironment={getWorker:function(o,e){return e==="json"?new pbe:e==="javascript"||e==="typescript"?new mbe:new gbe}};sw.typescript.javascriptDefaults.addExtraLib(_be,"varhubModules.d.ts");sw.typescript.javascriptDefaults.addExtraLib(vbe,"modules.d.ts");const Cte=Fi.memo(({language:o,value:e,disabled:t=!1,defaultValue:i,onChange:n})=>{const s=Fi.useRef(null),r=Fi.useRef(void 0);return Fi.useEffect(()=>{r.current&&e!==r.current.getValue()&&r.current.setValue(String(e))},[e]),Fi.useEffect(()=>{r.current&&r.current.updateOptions({readOnly:t})},[t]),Fi.useEffect(()=>{if(!s.current)return;const a=zre.create(s.current,{automaticLayout:!0,language:o,value:e??i??"",useShadowDOM:!0,readOnly:t,theme:"vs-light"});r.current=a;const l=()=>{n==null||n(a.getValue())},c=a.onDidChangeModelContent(l);return()=>{c.dispose(),a.dispose()}},[o]),fn.jsxDEV("div",{className:`code-editor ${t?"_disabled":""}`,style:{height:500},ref:s},void 0,!1,{fileName:"/home/runner/work/varhub-source/varhub-source/src/components/code/Editor.tsx",lineNumber:64,columnNumber:9},void 0)});var Sp,dh,XN,JN;class Vce{constructor(e){Aa(this,dh);Aa(this,Sp);jl(this,Sp,new URL(e))}get url(){return Pi(this,Sp).href}async createRoom(e,t){return D_(this,dh,XN).call(this,"POST",`room/${encodeURIComponent(e)}`,JSON.stringify(t))}createRoomSocket(e={}){return D_(this,dh,JN).call(this,"room/ws",e)}async findRooms(e){return D_(this,dh,XN).call(this,"GET",`rooms/${encodeURIComponent(e)}`)}async getRoomMessage(e,t){return D_(this,dh,XN).call(this,"GET",`room/${encodeURIComponent(e)}`)}join(e,t={}){return D_(this,dh,JN).call(this,`room/${encodeURIComponent(e)}`,t,["params"])}createLogger(e){return D_(this,dh,JN).call(this,`log/${encodeURIComponent(String(e))}`)}}Sp=new WeakMap,dh=new WeakSet,XN=async function(e,t,i){const n=new URL(t,Pi(this,Sp)),s=await fetch(n,{method:e,headers:{"Content-Type":"application/json"},body:i});if(!s.ok)throw new Error(await s.text());return s.json()},JN=function(e,t,i){const n=new URL(Pi(this,Sp));n.protocol=Pi(this,Sp).protocol.replace("http","ws");const s=new URL(e,n);if(t)for(let[a,l]of Object.entries(t))l!==void 0&&(i!=null&&i.includes(a)&&(l=JSON.stringify(l)),s.searchParams.set(a,l));const r=new WebSocket(s);return r.binaryType="arraybuffer",r};class SUe{constructor(e){C0(this,"index",0);C0(this,"dataView");this.dataView=e instanceof DataView?e:e instanceof ArrayBuffer?new DataView(e):new DataView(e.buffer,e.byteOffset,e.byteLength)}assertSize(e){if(this.dataView.byteLength<this.index+e)throw new Error("wrong binary state-data format")}getNextUint8(){return this.dataView.getUint8(this.index++)}getNextInt32(){const e=this.dataView.getInt32(this.index,!0);return this.index+=4,e}getNextFloat64(){const e=this.dataView.getFloat64(this.index,!0);return this.index+=8,e}skipBytes(e=1){this.assertSize(e),this.index+=e}getNextUint8Array(e){this.assertSize(e);const t=this.dataView.buffer.slice(this.dataView.byteOffset+this.index,this.dataView.byteOffset+this.index+e),i=new Uint8Array(t);return this.index+=e,i}getNextUintSizeAndUint8Array(e=1){const i=this.getNextInt32()*e;return this.getNextUint8Array(i)}readUintSizeAndArrayBuf(e=1){const{buffer:t,byteLength:i,byteOffset:n}=this.getNextUintSizeAndUint8Array(e);return t.slice(n,n+i)}hasBytes(){return this.index<this.dataView.byteLength}}const mV=new TextEncoder,uN=new TextDecoder;function LUe(...o){const e=o.flatMap(s=>cf(s)),t=e.reduce((s,r)=>s+(typeof r=="number"?1:r.byteLength),0),i=new Uint8Array(t);let n=0;for(let s of e)if(typeof s=="number")i[n++]=s;else{const r=new Uint8Array(s.buffer,s.byteOffset,s.byteLength);i.set(r,n),n+=s.byteLength}return i}function cf(o,e){if(e!=null&&e.has(o))throw new Error("wrong xj format: recursive");if(o===null)return[0];if(o===void 0)return[21];if(typeof o=="boolean")return[o?2:1];if(typeof o=="number")return Number.isInteger(o)&&o>=0&&o<=15?[240+o]:[3,Float64Array.of(o)];if(typeof o=="bigint"){const[t,...i]=cf(o.toString(10));return[4,...i]}if(typeof o=="string"){mV.encode(o);const t=mV.encode(o);return[5,Uint32Array.of(t.byteLength),t]}if(o instanceof ArrayBuffer)return[6,Uint32Array.of(o.byteLength),new Uint8Array(o)];if(o instanceof Int8Array)return[7,Uint32Array.of(o.length),o];if(o instanceof Int16Array)return[8,Uint32Array.of(o.length),o];if(o instanceof Int32Array)return[9,Uint32Array.of(o.length),o];if(o instanceof Uint8Array)return[10,Uint32Array.of(o.length),o];if(o instanceof Uint16Array)return[11,Uint32Array.of(o.length),o];if(o instanceof Uint32Array)return[12,Uint32Array.of(o.length),o];if(o instanceof Uint8ClampedArray)return[13,Uint32Array.of(o.length),o];if(o instanceof Float32Array)return[14,Uint32Array.of(o.length),o];if(o instanceof Float64Array)return[15,Uint32Array.of(o.length),o];if(o instanceof BigInt64Array)return[16,Uint32Array.of(o.length),o];if(o instanceof BigUint64Array)return[17,Uint32Array.of(o.length),o];if(Array.isArray(o))return[18,Uint32Array.of(o.length),...o.flatMap(t=>cf(t,new Set(e).add(o)))];if(o instanceof Error){const[,...t]=cf(String(o.name)),[,...i]=cf(String(o.message)),[,...n]=cf(String(o.stack));let s=[0];if(o.cause!==void 0)try{s=[1,...cf(o.cause)]}catch{}return[20,...t,...i,...n,...s]}if(typeof o=="object"){const t=Object.getOwnPropertyNames(o).sort(),i=o;return[19,Uint32Array.of(t.length),...t.flatMap(n=>{const[s,...r]=cf(n);return[...r,...cf(i[n],new Set(e).add(o))]})]}throw new Error("wrong xj format: wrong type")}function xUe(o,e=1/0){typeof o=="string"&&(o=mV.encode(o));const t=[],i=new SUe(o);for(;e-- >0&&i.hasBytes();)t.push(G0(i));return t}function G0(o,e){if(e==null&&(e=o.getNextUint8()),e===0)return null;if(e===1)return!1;if(e===2)return!0;if(e===3)return o.getNextFloat64();if(e===4)return BigInt(G0(o,5));if(e===5)return uN.decode(o.getNextUintSizeAndUint8Array());if(e===6)return o.readUintSizeAndArrayBuf();if(e===7)return new Int8Array(o.readUintSizeAndArrayBuf());if(e===8)return new Int16Array(o.readUintSizeAndArrayBuf(2));if(e===9)return new Int32Array(o.readUintSizeAndArrayBuf(4));if(e===10)return new Uint8Array(o.readUintSizeAndArrayBuf());if(e===11)return new Uint16Array(o.readUintSizeAndArrayBuf(2));if(e===12)return new Uint32Array(o.readUintSizeAndArrayBuf(4));if(e===13)return new Uint8ClampedArray(o.readUintSizeAndArrayBuf());if(e===14)return new Float32Array(o.readUintSizeAndArrayBuf(4));if(e===15)return new Float64Array(o.readUintSizeAndArrayBuf(8));if(e===16)return new BigInt64Array(o.readUintSizeAndArrayBuf(8));if(e===17)return new BigUint64Array(o.readUintSizeAndArrayBuf(8));if(e===18)return Array.from({length:o.getNextInt32()}).map(()=>G0(o));if(e===19){const t=Object.create(null);let i=o.getNextInt32();for(;i-- >0;)Object.defineProperty(t,G0(o,5),{value:G0(o),enumerable:!0,writable:!0});return t}if(e===20){const t=uN.decode(o.getNextUintSizeAndUint8Array()),i=uN.decode(o.getNextUintSizeAndUint8Array()),n=uN.decode(o.getNextUintSizeAndUint8Array()),s=o.getNextUint8();let r;if(!s)r=new Error(i);else{const a=G0(o);r=new Error(i,{cause:a})}return r.name=t,r.stack=n,r}if(e!==21){if(e>=240&&e<=255)return e-240;throw new Error("wrong binary state-data format")}}var uv,Lp,ZC;class wte{constructor(e){Aa(this,uv,new EventTarget);Aa(this,Lp,new WeakMap);Aa(this,ZC);C0(this,"subscriber",{on:(e,t)=>{let i=Pi(this,Lp).get(t);i||(i=n=>{t.apply(Pi(this,ZC),n.detail)},Pi(this,Lp).set(t,i)),Pi(this,uv).addEventListener(e,i)},once:(e,t)=>{let i=Pi(this,Lp).get(t);i||(i=n=>{t.apply(Pi(this,ZC),n.detail)},Pi(this,Lp).set(t,i)),Pi(this,uv).addEventListener(e,i,{once:!0})},off:(e,t)=>{let i=Pi(this,Lp).get(t);i&&Pi(this,uv).removeEventListener(e,i)}});jl(this,ZC,e)}dispatch(e,t){Pi(this,uv).dispatchEvent(new CustomEvent(e,{detail:t}))}}uv=new WeakMap,Lp=new WeakMap,ZC=new WeakMap;var Yl,QC,TD,bf,rA,xp,XC,hv,aA;class DUe{constructor(e){Aa(this,Yl);Aa(this,QC,new EventTarget);Aa(this,TD,new wte(this));Aa(this,bf,new wte(this));C0(this,"messages",Pi(this,TD).subscriber);C0(this,"methods",new Proxy(Object.freeze(Object.create(null)),{get:(e,t)=>(...i)=>this.call(t,...i)}));Aa(this,rA);Aa(this,xp,!1);Aa(this,XC,!1);Aa(this,hv);Aa(this,aA,0);if(e.readyState===WebSocket.CLOSING||e.readyState===WebSocket.CLOSED)throw new Error("websocket is closed");e.binaryType="arraybuffer",jl(this,Yl,e),e.readyState===WebSocket.CONNECTING?(jl(this,hv,new Promise((t,i)=>{this.once("ready",()=>t(this)),this.once("close",n=>i(n))})),e.addEventListener("open",()=>{jl(this,xp,!0),Pi(this,bf).dispatch("ready",[])})):(jl(this,xp,!0),jl(this,hv,Promise.resolve(this))),Pi(this,hv).catch(()=>{}),e.binaryType="arraybuffer",e.addEventListener("close",t=>{jl(this,XC,!0),jl(this,xp,!1),Pi(this,bf).dispatch("close",[t.reason])}),e.addEventListener("message",t=>{const i=new Uint8Array(t.data),[n=void 0,...s]=xUe(i);if(n==="$rpcEvent"){if(Pi(this,bf).dispatch("message",s),s.length>=1){const[r,...a]=s;typeof r=="string"&&Pi(this,TD).dispatch(r,a)}}else if(n==="$rpcResult"){const[r=void 0,a=void 0,l=void 0]=s;if(typeof r!="number"&&typeof r!="string")return;Pi(this,QC).dispatchEvent(new CustomEvent(r,{detail:[a,l]}))}})}get waitForReady(){return Pi(this,hv)}get error(){return Pi(this,rA)}get ready(){return Pi(this,xp)}get closed(){return Pi(this,XC)}get online(){return Pi(this,Yl).readyState===WebSocket.OPEN}async call(e,...t){if(Pi(this,Yl).readyState!==WebSocket.OPEN)throw new Error("connection status");return new Promise((i,n)=>{const s=nY(this,aA)._++,r=LUe("$rpc",s,e,...t),a=u=>{if(!(u instanceof CustomEvent))return;const f=u.detail;if(!Array.isArray(f))return;const[g,p]=f;c(g===0?i:n,p)},l=u=>{c(n,new Error(u??"connection closed"))},c=(u,...f)=>{Pi(this,QC).removeEventListener(s,a),this.off("close",l),u(...f)};Pi(this,QC).addEventListener(s,a,{once:!0}),this.once("close",l),Pi(this,Yl).send(r)})}close(e){jl(this,XC,!0),jl(this,xp,!1),Pi(this,Yl).close(4e3,e)}on(e,t){return Pi(this,bf).subscriber.on(e,t),this}once(e,t){return Pi(this,bf).subscriber.once(e,t),this}off(e,t){return Pi(this,bf).subscriber.off(e,t),this}[Symbol.dispose](){Pi(this,Yl).readyState!==WebSocket.CLOSED&&Pi(this,Yl).close()}[Symbol.asyncDispose](){return Pi(this,Yl).readyState===WebSocket.CLOSED?Promise.resolve():new Promise(e=>{Pi(this,Yl).close(),Pi(this,Yl).addEventListener("close",()=>e())})}}Yl=new WeakMap,QC=new WeakMap,TD=new WeakMap,bf=new WeakMap,rA=new WeakMap,xp=new WeakMap,XC=new WeakMap,hv=new WeakMap,aA=new WeakMap;const kUe=`import room from "varhub:room";
import RAPIER from 'https://cdn.skypack.dev/@dimforge/rapier2d-compat';
// import network from "varhub:api/network";

room.on("join", () => {
	room.broadcast("updatePlayers", room.getPlayers());
});

export function sendMessage(msg){
	room.broadcast("message", this.player, msg);
	return true;
}

export function getRapier(){
	return RAPIER;
}
`,zB=(o,e)=>{const[t,i]=Fi.useState(()=>{let n;try{n=JSON.parse(localStorage.getItem(o)??"")}catch{n=e}return n});return Fi.useEffect(()=>{localStorage.setItem(o,JSON.stringify(t))},[t,o]),[t,i]},EUe=()=>{const[o,e]=zB("code",kUe),[t,i]=zB("jsonCode","{}"),[n,s]=Fi.useState(Math.random().toString(36).substring(2)),[r,a]=zB("url","https://varhub.dpohvar.ru/"),[l,c]=Fi.useState(""),[u,f]=Fi.useState(!1),g=Fi.useMemo(()=>{try{return n?`devtools://devtools/bundled/inspector.html?experiments=true&v8only=true&ws=${new URL(r).host}/log/${n}`:void 0}catch{}},[r,n]),p=Fi.useMemo(()=>{if(!r||!l)return null;const S=new URL(location.href);return S.searchParams.set("url",r),S.searchParams.set("room",l),S.href},[l,r]),_=async()=>{if(!u)try{f(!0);const L=await new Vce(r).createRoom("ivm",{module:{main:"index.js",source:{"index.js":o}},integrity:!1,config:t?JSON.parse(t):void 0,inspect:n??void 0});c(L.id)}finally{f(!1)}},[b,y]=Fi.useState("index.js");return fn.jsxDEV("div",{children:[fn.jsxDEV("div",{className:"form-line _no-grow",children:[fn.jsxDEV("button",{onClick:()=>y("index.js"),className:b==="index.js"?"_tab-active":void 0,children:fn.jsxDEV("code",{children:"index.js"},void 0,!1,{fileName:"/home/runner/work/varhub-source/varhub-source/src/components/CreateRoom.tsx",lineNumber:58,columnNumber:6},void 0)},void 0,!1,{fileName:"/home/runner/work/varhub-source/varhub-source/src/components/CreateRoom.tsx",lineNumber:57,columnNumber:5},void 0),fn.jsxDEV("button",{onClick:()=>y("varhub:config"),className:b==="varhub:config"?"_tab-active":void 0,children:fn.jsxDEV("code",{children:"varhub:config"},void 0,!1,{fileName:"/home/runner/work/varhub-source/varhub-source/src/components/CreateRoom.tsx",lineNumber:61,columnNumber:6},void 0)},void 0,!1,{fileName:"/home/runner/work/varhub-source/varhub-source/src/components/CreateRoom.tsx",lineNumber:60,columnNumber:5},void 0)]},void 0,!0,{fileName:"/home/runner/work/varhub-source/varhub-source/src/components/CreateRoom.tsx",lineNumber:56,columnNumber:4},void 0),b==="index.js"&&fn.jsxDEV(Cte,{language:"javascript",defaultValue:o,onChange:e,disabled:!!(u||l)},b,!1,{fileName:"/home/runner/work/varhub-source/varhub-source/src/components/CreateRoom.tsx",lineNumber:65,columnNumber:5},void 0),b==="varhub:config"&&fn.jsxDEV(Cte,{language:"json",defaultValue:t,onChange:i,disabled:!!(u||l)},b,!1,{fileName:"/home/runner/work/varhub-source/varhub-source/src/components/CreateRoom.tsx",lineNumber:68,columnNumber:5},void 0),fn.jsxDEV("div",{className:"form-line",children:[fn.jsxDEV("input",{disabled:!!(u||l),placeholder:"varhub url",value:r,onChange:S=>a(S.target.value)},void 0,!1,{fileName:"/home/runner/work/varhub-source/varhub-source/src/components/CreateRoom.tsx",lineNumber:72,columnNumber:5},void 0),fn.jsxDEV("input",{disabled:!!(u||l),placeholder:"logger id",value:n,onChange:S=>s(S.target.value)},void 0,!1,{fileName:"/home/runner/work/varhub-source/varhub-source/src/components/CreateRoom.tsx",lineNumber:73,columnNumber:5},void 0),fn.jsxDEV("button",{disabled:!!(u||l),onClick:_,children:"Create room"},void 0,!1,{fileName:"/home/runner/work/varhub-source/varhub-source/src/components/CreateRoom.tsx",lineNumber:74,columnNumber:5},void 0)]},void 0,!0,{fileName:"/home/runner/work/varhub-source/varhub-source/src/components/CreateRoom.tsx",lineNumber:71,columnNumber:4},void 0),g&&fn.jsxDEV("div",{children:["create logger by opening url:",fn.jsxDEV("p",{children:fn.jsxDEV("code",{children:g},void 0,!1,{fileName:"/home/runner/work/varhub-source/varhub-source/src/components/CreateRoom.tsx",lineNumber:79,columnNumber:8},void 0)},void 0,!1,{fileName:"/home/runner/work/varhub-source/varhub-source/src/components/CreateRoom.tsx",lineNumber:79,columnNumber:5},void 0)]},void 0,!0,{fileName:"/home/runner/work/varhub-source/varhub-source/src/components/CreateRoom.tsx",lineNumber:77,columnNumber:30},void 0),l&&fn.jsxDEV("div",{children:[fn.jsxDEV("p",{children:["Room ",fn.jsxDEV("code",{children:l},void 0,!1,{fileName:"/home/runner/work/varhub-source/varhub-source/src/components/CreateRoom.tsx",lineNumber:84,columnNumber:14},void 0)," created at ",fn.jsxDEV("code",{children:r},void 0,!1,{fileName:"/home/runner/work/varhub-source/varhub-source/src/components/CreateRoom.tsx",lineNumber:84,columnNumber:47},void 0)]},void 0,!0,{fileName:"/home/runner/work/varhub-source/varhub-source/src/components/CreateRoom.tsx",lineNumber:84,columnNumber:6},void 0),fn.jsxDEV("p",{children:fn.jsxDEV("a",{href:p??"",target:"_blank",rel:"noopener noreferrer",children:p},void 0,!1,{fileName:"/home/runner/work/varhub-source/varhub-source/src/components/CreateRoom.tsx",lineNumber:86,columnNumber:7},void 0)},void 0,!1,{fileName:"/home/runner/work/varhub-source/varhub-source/src/components/CreateRoom.tsx",lineNumber:85,columnNumber:6},void 0)]},void 0,!0,{fileName:"/home/runner/work/varhub-source/varhub-source/src/components/CreateRoom.tsx",lineNumber:83,columnNumber:5},void 0)]},void 0,!0,{fileName:"/home/runner/work/varhub-source/varhub-source/src/components/CreateRoom.tsx",lineNumber:55,columnNumber:3},void 0)};function _V(){return Hce=_V=Object.assign||function(o){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(o[i]=t[i])}return o},_V.apply(this,arguments)}var Hce=_V;const Pr=U1(Hce);function IUe(o,e){if(o==null)return{};var t={},i=Object.keys(o),n,s;for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&(t[n]=o[n]);return t}var TUe=IUe,NUe=TUe;function RUe(o,e){if(o==null)return{};var t=NUe(o,e),i,n;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(o);for(n=0;n<s.length;n++)i=s[n],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(o,i)&&(t[i]=o[i])}return t}var MUe=RUe;const Cg=U1(MUe);function vV(o){var e,t,i="";if(o)if(typeof o=="object")if(Array.isArray(o))for(e=0;e<o.length;e++)o[e]&&(t=vV(o[e]))&&(i&&(i+=" "),i+=t);else for(e in o)o[e]&&(t=vV(e))&&(i&&(i+=" "),i+=t);else typeof o!="boolean"&&!o.call&&(i&&(i+=" "),i+=o);return i}function Fr(){for(var o=0,e,t="";o<arguments.length;)(e=vV(arguments[o++]))&&(t&&(t+=" "),t+=e);return t}const DO={small:"12px",medium:"16px",large:"20px","x-large":"24px"},kO={inline:"Icon-inline-929ed31"},AUe=["className","fill","size","inline"],PUe=o=>{const{className:e,fill:t,size:i,inline:n}=o,s=Cg(o,AUe),r=i?DO[i]:void 0;return Ge.createElement("svg",Pr({"aria-hidden":!0,focusable:"false",viewBox:"0 0 17 30",className:Fr(e,{[kO.inline]:n}),width:r,height:r,fill:t||"currentColor"},s),Ge.createElement("path",{d:"M2.021 0l14.491 13.923c.326.336.488.695.488 1.077s-.162.741-.488 1.077L2.022 30 .14 27.846 13.448 15 0 2.154 2.021 0z"}))},OUe=["className","fill","size","inline"],FUe=o=>{const{className:e,fill:t,size:i,inline:n}=o,s=Cg(o,OUe),r=i?DO[i]:void 0;return Ge.createElement("svg",Pr({"aria-hidden":!0,focusable:"false",viewBox:"0 0 45 45",className:Fr(e,{[kO.inline]:n}),width:r,height:r,fill:t||"currentColor"},s),Ge.createElement("path",{d:"M6.59 6.59c8.787-8.787 23.033-8.787 31.82 0 8.787 8.787 8.787 23.033 0 31.82-8.787 8.787-23.033 8.787-31.82 0-8.787-8.787-8.787-23.033 0-31.82zm25.102 3.182L22.5 18.965l-9.192-9.193-3.536 3.536 9.193 9.192-9.193 9.192 3.536 3.536 9.192-9.193 9.192 9.193 3.536-3.536-9.193-9.192 9.193-9.192-3.536-3.536z"}))},BUe=["className","fill","size","inline"],WUe=o=>{const{className:e,fill:t,size:i,inline:n}=o,s=Cg(o,BUe),r=i?DO[i]:void 0;return Ge.createElement("svg",Pr({"aria-hidden":!0,focusable:"false",viewBox:"0 0 20 30",className:Fr(e,{[kO.inline]:n}),width:r,height:r,fill:t||"currentColor"},s),Ge.createElement("path",{d:"M15.104 30L.492 16.077C.163 15.741 0 15.382 0 15.002c0-.384.163-.743.492-1.079L15.104 0 17 2.154 3.583 15.002 17 27.846 15.104 30z"}),Ge.createElement("circle",{cx:"17",cy:"15",r:"3"}))},VUe=["className","fill","size","inline"],HUe=o=>{const{className:e,fill:t,size:i,inline:n}=o,s=Cg(o,VUe),r=i?DO[i]:void 0;return Ge.createElement("svg",Pr({"aria-hidden":!0,focusable:"false",viewBox:"2 2 20 20",className:Fr(e,{[kO.inline]:n}),width:r,height:r,fill:t||"currentColor"},s),Ge.createElement("path",{d:"M13.232 3.645l.08.125 8.484 14.915c.134.235.204.501.204.773 0 .801-.601 1.46-1.37 1.535l-.145.007H3.515c-.266 0-.528-.072-.759-.208a1.557 1.557 0 01-.619-1.975l.067-.132L10.69 3.77a1.53 1.53 0 01.552-.562 1.499 1.499 0 011.991.437zM12 16a1 1 0 100 2 1 1 0 000-2zm0-6a1 1 0 00-1 1v3l.007.117A1 1 0 0013 14v-3l-.007-.117A1 1 0 0012 10z"}))};function zUe(o,e,t){return e in o?Object.defineProperty(o,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):o[e]=t,o}var UUe=zUe,$Ue=UUe;function yte(o,e){var t=Object.keys(o);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(o);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(o,n).enumerable})),t.push.apply(t,i)}return t}function jUe(o){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?yte(t,!0).forEach(function(i){$Ue(o,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(t)):yte(t).forEach(function(i){Object.defineProperty(o,i,Object.getOwnPropertyDescriptor(t,i))})}return o}var KUe=jUe;const Ste=U1(KUe);function qUe(o,e){if(o==null)return{};var t={},i=Object.keys(o),n,s;for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&(t[n]=o[n]);return t}var GUe=qUe,YUe=GUe;function ZUe(o,e){if(o==null)return{};var t=YUe(o,e),i,n;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(o);for(n=0;n<s.length;n++)i=s[n],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(o,i)&&(t[i]=o[i])}return t}var QUe=ZUe;const XUe=U1(QUe),JUe=["children"],bV=Ge.createContext({theme:"chrome",colorScheme:"light"}),e$e=o=>{let{children:e}=o,t=XUe(o,JUe);const i=Ge.useContext(bV);return Ge.createElement(bV.Provider,{value:Ste(Ste({},i),t)},e)},xk=(o,e={})=>{const t=Ge.useContext(bV),i=o.theme||t.theme||"chrome",n=o.colorScheme||t.colorScheme||"light",s=Fr(e[i],e[n]);return{currentColorScheme:n,currentTheme:i,themeClass:s}},jU=o=>Array.isArray(o)||ArrayBuffer.isView(o)&&!(o instanceof DataView),zce=o=>o!==null&&typeof o=="object"&&!jU(o)&&!(o instanceof Date)&&!(o instanceof RegExp)&&!(o instanceof Error)&&!(o instanceof WeakMap)&&!(o instanceof WeakSet),t$e=o=>zce(o)||jU(o)||typeof o=="function"||o instanceof Promise,Uce=o=>{const e=/unique/;return Promise.race([o,e]).then(t=>t===e?["pending"]:["fulfilled",t],t=>["rejected",t])},Mu=async(o,e,t,i,n,s)=>{const r={key:o,depth:t,value:e,type:"value",parent:void 0};if(e&&t$e(e)&&t<100){const a=[];let l="object";if(jU(e)){for(let c=0;c<e.length;c++)a.push(async()=>{const u=await Mu(c.toString(),e[c],t+1,i);return u.parent=r,u});l="array"}else{const c=Object.getOwnPropertyNames(e);i&&c.sort();for(let u=0;u<c.length;u++){let f;try{f=e[c[u]]}catch{}a.push(async()=>{const g=await Mu(c[u],f,t+1,i);return g.parent=r,g})}if(typeof e=="function"&&(l="function"),e instanceof Promise){const[u,f]=await Uce(e);a.push(async()=>{const g=await Mu("<state>",u,t+1,i);return g.parent=r,g}),u!=="pending"&&a.push(async()=>{const g=await Mu("<value>",f,t+1,i);return g.parent=r,g}),l="promise"}if(e instanceof Map){const f=Array.from(e.entries()).map(g=>{const[p,_]=g;return{"<key>":p,"<value>":_}});a.push(async()=>{const g=await Mu("<entries>",f,t+1,i);return g.parent=r,g}),a.push(async()=>{const g=await Mu("size",e.size,t+1,i);return g.parent=r,g}),l="map"}if(e instanceof Set){const f=Array.from(e.entries()).map(g=>g[1]);a.push(async()=>{const g=await Mu("<entries>",f,t+1,i);return g.parent=r,g}),a.push(async()=>{const g=await Mu("size",e.size,t+1,i);return g.parent=r,g}),l="set"}}e!==Object.prototype&&s&&a.push(async()=>{const c=await Mu("<prototype>",Object.getPrototypeOf(e),t+1,i,!0);return c.parent=r,c}),r.type=l,r.children=a,r.isPrototype=n}return r},i$e=(o,e,t)=>Mu("root",o,0,e===!1?e:!0,void 0,t===!1?t:!0);function n$e(o,e,t){return e in o?Object.defineProperty(o,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):o[e]=t,o}var s$e=n$e,o$e=s$e;function Lte(o,e){var t=Object.keys(o);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(o);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(o,n).enumerable})),t.push.apply(t,i)}return t}function r$e(o){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Lte(t,!0).forEach(function(i){o$e(o,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(t)):Lte(t).forEach(function(i){Object.defineProperty(o,i,Object.getOwnPropertyDescriptor(t,i))})}return o}var a$e=r$e;const xte=U1(a$e),UB=Ge.createContext({isChild:!1,depth:0,hasHover:!0}),rl={tree:"Tree-tree-fbbbe38",item:"Tree-item-353d6f3",group:"Tree-group-d3c3d8a",label:"Tree-label-d819155",focusWhite:"Tree-focusWhite-f1e00c2",arrow:"Tree-arrow-03ab2e7",hover:"Tree-hover-3cc4e5d",open:"Tree-open-3f1a336",dark:"Tree-dark-1b4aa00",chrome:"Tree-chrome-bcbcac6",light:"Tree-light-09174ee"},l$e=["theme","hover","colorScheme","children","label","className","onUpdate","onSelect","open"],oA=o=>{const{theme:e,hover:t,colorScheme:i,children:n,label:s,className:r,onUpdate:a,onSelect:l,open:c}=o,u=Cg(o,l$e),{themeClass:f,currentTheme:g}=xk({theme:e,colorScheme:i},rl),[p,_]=Fi.useState(c);Fi.useEffect(()=>{_(c)},[c]);const b=Le=>{_(Le),a&&a(Le)},y=Ge.Children.count(n)>0,S=(Le,be)=>{if(Le.isSameNode(be||null))return;const ze=Le.querySelector('[tabindex="-1"]');ze==null||ze.focus(),Le.setAttribute("aria-selected","true"),be==null||be.removeAttribute("aria-selected")},L=(Le,be)=>{let ze=Le;for(;ze&&ze.parentElement;){if(ze.getAttribute("role")===be)return ze;ze=ze.parentElement}return null},x=Le=>{const be=L(Le,"tree");return be?Array.from(be.querySelectorAll("li")):[]},D=Le=>{const be=L(Le,"group"),ze=be==null?void 0:be.previousElementSibling;if(ze&&ze.getAttribute("tabindex")==="-1"){const it=ze.parentElement,qe=Le.parentElement;S(it,qe)}},E=(Le,be)=>{const ze=x(Le);ze.forEach(it=>{it.removeAttribute("aria-selected")}),be==="start"&&ze[0]&&S(ze[0]),be==="end"&&ze[ze.length-1]&&S(ze[ze.length-1])},N=(Le,be)=>{const ze=x(Le)||[];for(let it=0;it<ze.length;it++){const qe=ze[it];if(qe.getAttribute("aria-selected")==="true"){be==="up"&&ze[it-1]?S(ze[it-1],qe):be==="down"&&ze[it+1]&&S(ze[it+1],qe);return}}S(ze[0])},M=(Le,be)=>{const ze=Le.target;(Le.key==="Enter"||Le.key===" ")&&b(!p),Le.key==="ArrowRight"&&p&&!be?N(ze,"down"):Le.key==="ArrowRight"&&b(!0),Le.key==="ArrowLeft"&&(!p||be)?D(ze):Le.key==="ArrowLeft"&&b(!1),Le.key==="ArrowDown"&&N(ze,"down"),Le.key==="ArrowUp"&&N(ze,"up"),Le.key==="Home"&&E(ze,"start"),Le.key==="End"&&E(ze,"end")},F=(Le,be)=>{const ze=Le.target,it=L(ze,"treeitem"),qe=x(ze)||[];let Fe=!1;for(let Li=0;Li<qe.length;Li++){const Bn=qe[Li];if(Bn.getAttribute("aria-selected")==="true"){it&&(Fe=!0,S(it,Bn));break}}!Fe&&it&&S(it),be||b(!p)},H=Le=>{const be=Le.currentTarget;!be.contains(document.activeElement)&&be.getAttribute("role")==="tree"&&be.setAttribute("tabindex","0")},Q=Le=>{const be=Le.target;if(be.getAttribute("role")==="tree"){const ze=be.querySelector('[aria-selected="true"]');ze?S(ze):N(be,"down"),be.setAttribute("tabindex","-1")}},K=()=>{l==null||l()},j=Le=>{const be=Le*.9+.3;return{paddingLeft:`${be}em`,width:`calc(100% - ${be}em)`}},{isChild:q,depth:se,hasHover:fe}=Ge.useContext(UB),Ae=fe?t:!1;if(!q)return Ge.createElement("ul",Pr({role:"tree",tabIndex:0,className:Fr(rl.tree,rl.group,f,r),onFocus:Q,onBlur:H},u),Ge.createElement(UB.Provider,{value:{isChild:!0,depth:0,hasHover:Ae}},Ge.createElement(oA,o)));if(!y)return Ge.createElement("li",Pr({role:"treeitem",className:rl.item},u),Ge.createElement("div",{role:"button",className:Fr(rl.label,{[rl.hover]:Ae,[rl.focusWhite]:g==="firefox"}),tabIndex:-1,style:j(se),onKeyDown:Le=>{M(Le,q)},onClick:Le=>F(Le,!0),onFocus:K},Ge.createElement("span",null,s)));const Ne=Fr(rl.arrow,{[rl.open]:p});return Ge.createElement("li",{role:"treeitem","aria-expanded":p,className:rl.item},Ge.createElement("div",{role:"button",tabIndex:-1,className:Fr(rl.label,{[rl.hover]:Ae,[rl.focusWhite]:g==="firefox"}),style:j(se),onClick:Le=>F(Le),onKeyDown:Le=>M(Le),onFocus:K},Ge.createElement("span",null,Ge.createElement("span",{"aria-hidden":!0,className:Ne}),Ge.createElement("span",null,s))),Ge.createElement("ul",Pr({role:"group",className:Fr(r,rl.group)},u),p&&Ge.Children.map(n,Le=>Ge.createElement(UB.Provider,{value:{isChild:!0,depth:se+1,hasHover:Ae}},Le))))};oA.defaultProps={open:!1,hover:!0};const xs={"object-inspector":"ObjectInspector-object-inspector-0c33e82",objectInspector:"ObjectInspector-object-inspector-0c33e82","object-label":"ObjectInspector-object-label-b81482b",objectLabel:"ObjectInspector-object-label-b81482b",text:"ObjectInspector-text-25f57f3",key:"ObjectInspector-key-4f712bb",value:"ObjectInspector-value-f7ec2e5",string:"ObjectInspector-string-c496000",regex:"ObjectInspector-regex-59d45a3",error:"ObjectInspector-error-b818698",boolean:"ObjectInspector-boolean-2dd1642",number:"ObjectInspector-number-a6daabb",undefined:"ObjectInspector-undefined-3a68263",null:"ObjectInspector-null-74acb50",function:"ObjectInspector-function-07bbdcd","function-decorator":"ObjectInspector-function-decorator-3d22c24",functionDecorator:"ObjectInspector-function-decorator-3d22c24",prototype:"ObjectInspector-prototype-f2449ee",dark:"ObjectInspector-dark-0c96c97",chrome:"ObjectInspector-chrome-2f3ca98",light:"ObjectInspector-light-78bef54"},c$e=["ast","theme","showKey","colorScheme","className"],al=(o,e,t,i,n)=>{const s=o.includes("-")?`"${o}"`:o,r=n<=0;return Ge.createElement("span",{className:xs.text},!r&&i&&Ge.createElement(Ge.Fragment,null,Ge.createElement("span",{className:xs.key},s),Ge.createElement("span",null,":")),Ge.createElement("span",{className:t},e))},KU=o=>{const{ast:e,theme:t,showKey:i,colorScheme:n,className:s}=o,r=Cg(o,c$e),{themeClass:a}=xk({theme:t,colorScheme:n},xs),[l,c]=Fi.useState(Ge.createElement("span",null));let u=Ge.createElement("span",null);return Fi.useEffect(()=>{e.value instanceof Promise&&(async g=>{c(al(e.key,`Promise { "${await Uce(g)}" }`,xs.key,i,e.depth))})(e.value)},[e,i]),typeof e.value=="number"||typeof e.value=="bigint"?u=al(e.key,String(e.value),xs.number,i,e.depth):typeof e.value=="boolean"?u=al(e.key,String(e.value),xs.boolean,i,e.depth):typeof e.value=="string"?u=al(e.key,`"${e.value}"`,xs.string,i,e.depth):typeof e.value>"u"?u=al(e.key,"undefined",xs.undefined,i,e.depth):typeof e.value=="symbol"?u=al(e.key,e.value.toString(),xs.string,i,e.depth):typeof e.value=="function"?u=al(e.key,`${e.value.name}()`,xs.key,i,e.depth):typeof e.value=="object"&&(e.value===null?u=al(e.key,"null",xs.null,i,e.depth):Array.isArray(e.value)?u=al(e.key,`Array(${e.value.length})`,xs.key,i,e.depth):e.value instanceof Date?u=al(e.key,`Date ${e.value.toString()}`,xs.value,i,e.depth):e.value instanceof RegExp?u=al(e.key,e.value.toString(),xs.regex,i,e.depth):e.value instanceof Error?u=al(e.key,e.value.toString(),xs.error,i,e.depth):zce(e.value)?u=al(e.key,"{}",xs.key,i,e.depth):u=al(e.key,e.value.constructor.name,xs.key,i,e.depth)),Ge.createElement("span",Pr({className:Fr(a,s)},r),l,u)};KU.defaultProps={showKey:!0};const d$e=["ast","theme","previewMax","open","colorScheme","className"],Dk=(o,e,t)=>{const i=[];for(let n=0;n<o.length;n++){const s=o[n];if(s.isPrototype||(i.push(Ge.createElement(KU,{key:s.key,ast:s,showKey:t})),n<o.length-1?i.push(", "):i.push(" ")),s.isPrototype&&n===o.length-1&&(i.pop(),i.push(" ")),n===e-1&&o.length>e){i.push(" ");break}}return i},u$e=(o,e,t,i)=>{const n=o.value.length;return e?Ge.createElement("span",null,"Array(",n,")"):Ge.createElement(Ge.Fragment,null,Ge.createElement("span",null,`${i==="firefox"?"Array":""}(${n}) [ `),Dk(o.children,t,!1),Ge.createElement("span",null,"]"))},h$e=(o,e,t,i)=>o.isPrototype?Ge.createElement("span",null,`Object ${i==="firefox"?"{  }":""}`):e?Ge.createElement("span",null,"{}"):Ge.createElement(Ge.Fragment,null,Ge.createElement("span",null,`${i==="firefox"?"Object ":""}{ `),Dk(o.children,t,!0),Ge.createElement("span",null,"}")),f$e=(o,e,t)=>e?Ge.createElement("span",null,`Promise { "${String(o.children[0].value)}" }`):Ge.createElement(Ge.Fragment,null,Ge.createElement("span",null,"Promise { "),Dk(o.children,t,!0),Ge.createElement("span",null,"}")),g$e=(o,e,t,i)=>{const{size:n}=o.value;return e?Ge.createElement("span",null,`Map(${n})`):Ge.createElement(Ge.Fragment,null,Ge.createElement("span",null,`Map${i==="chrome"?`(${n})`:""} { `),Dk(o.children,t,!0),Ge.createElement("span",null,"}"))},p$e=(o,e,t)=>{const{size:i}=o.value;return e?Ge.createElement("span",null,"Set(",i,")"):Ge.createElement(Ge.Fragment,null,Ge.createElement("span",null,`Set(${o.value.size}) {`),Dk(o.children,t,!0),Ge.createElement("span",null,"}"))},$ce=o=>{const{ast:e,theme:t,previewMax:i,open:n,colorScheme:s,className:r}=o,a=Cg(o,d$e),{themeClass:l,currentTheme:c}=xk({theme:t,colorScheme:s},xs),u=e.isPrototype||!1,f=Fr(xs.objectLabel,l,r,{[xs.prototype]:u}),g=e.depth<=0,p=()=>Ge.createElement("span",{className:u?xs.prototype:xs.key},g?"":`${e.key}: `);return e.type==="array"?Ge.createElement("span",Pr({className:f},a),Ge.createElement(p,null),u$e(e,n,i,c)):e.type==="function"?Ge.createElement("span",Pr({className:f},a),Ge.createElement(p,null),c==="chrome"&&Ge.createElement("span",{className:xs.functionDecorator}," "),Ge.createElement("span",{className:Fr({[xs.function]:!u})},`${e.value.name}()`)):e.type==="promise"?Ge.createElement("span",Pr({className:f},a),Ge.createElement(p,null),f$e(e,n,i)):e.type==="map"?Ge.createElement("span",Pr({className:f},a),Ge.createElement(p,null),g$e(e,n,i,c)):e.type==="set"?Ge.createElement("span",Pr({className:f},a),Ge.createElement(p,null),p$e(e,n,i)):Ge.createElement("span",Pr({className:f},a),Ge.createElement(p,null),h$e(e,n,i,c))};$ce.defaultProps={previewMax:8,open:!1};const qU=o=>{const{ast:e,expandLevel:t,depth:i}=o,[n,s]=Fi.useState(),[r,a]=Fi.useState(i<t);return Fi.useEffect(()=>{(async()=>{if(e.type!=="value"){const c=e.children.map(g=>g()),u=await Promise.all(c),f=xte(xte({},e),{},{children:u});s(f)}})()},[e]),n?Ge.createElement(oA,{hover:!1,open:r,label:Ge.createElement($ce,{open:r,ast:n}),onSelect:()=>{var l;(l=o.onSelect)===null||l===void 0||l.call(o,e)},onUpdate:l=>{a(l)}},n.children.map(l=>Ge.createElement(qU,{key:l.key,ast:l,depth:i+1,expandLevel:t,onSelect:o.onSelect}))):Ge.createElement(oA,{hover:!1,label:Ge.createElement(KU,{ast:e}),onSelect:()=>{var l;(l=o.onSelect)===null||l===void 0||l.call(o,e)}})};qU.defaultProps={expandLevel:0,depth:0};const m$e=["data","expandLevel","sortKeys","includePrototypes","className","theme","colorScheme","onSelect"],jce=o=>{const{data:e,expandLevel:t,sortKeys:i,includePrototypes:n,className:s,theme:r,colorScheme:a,onSelect:l}=o,c=Cg(o,m$e),[u,f]=Fi.useState(void 0),{themeClass:g,currentTheme:p,currentColorScheme:_}=xk({theme:r,colorScheme:a},xs);return Fi.useEffect(()=>{(async()=>{f(await i$e(e,i,n))})()},[e,i,n]),Ge.createElement("div",Pr({className:Fr(xs.objectInspector,s,g)},c),u&&Ge.createElement(e$e,{theme:p,colorScheme:_},Ge.createElement(qU,{ast:u,expandLevel:t,onSelect:l})))};jce.defaultProps={expandLevel:0,sortKeys:!0,includePrototypes:!0};const da={console:"Console-console-8f70aaf",input:"Console-input-f574b6b",error:"Console-error-989a8e1",icon:"Console-icon-92529e7",resultText:"Console-resultText-1077e07",warning:"Console-warning-142bf8d",inputWrapper:"Console-inputWrapper-89ed196","icon-focus":"Console-icon-focus-91067bf",iconFocus:"Console-icon-focus-91067bf",resultWrapper:"Console-resultWrapper-8362c1d",resultLine:"Console-resultLine-915a13e",expressionText:"Console-expressionText-5121d9f",resultsScrollWrapper:"Console-resultsScrollWrapper-e7512a9",results:"Console-results-375fc62",dark:"Console-dark-4ae3210",chrome:"Console-chrome-f2e559f",light:"Console-light-1998f9b"},_$e=["execute","history","resultComponent","theme","colorScheme","className"],v$e=({result:o})=>Ge.createElement("div",null,JSON.stringify(o)),b$e=({result:o})=>Ge.createElement(jce,{includePrototypes:!1,data:o}),C$e=o=>{const e=o.resultComponent,t=o.result instanceof Error||o.severity==="error",i=!t&&o.severity==="warning";let n=WUe;return t&&(n=FUe),i&&(n=HUe),Ge.createElement("li",{className:da.resultWrapper},Ge.createElement("div",{className:da.resultLine},Ge.createElement(GU,null),Ge.createElement("div",{className:da.expressionText},o.expression)),Ge.createElement("div",{className:Fr(da.resultLine,{[da.error]:t,[da.warning]:i})},Ge.createElement(n,{inline:!0,className:da.icon}),Ge.createElement("div",{className:da.resultText},Ge.createElement(e,{result:o.result}))))},GU=o=>{const{focused:e}=o;return Ge.createElement(PUe,{inline:!0,className:Fr(da.icon,{[da.iconFocus]:e})})};GU.defaultProps={focused:!1};const w$e=o=>{const{history:e,onSubmit:t}=o,[i,n]=Ge.useState(0),[s,r]=Ge.useState(!1),[a,l]=Ge.useState(""),c=f=>{if(f.key==="ArrowUp"||f.key==="ArrowDown"){var g;f.preventDefault();const p=f.key==="ArrowUp"?i+1:Math.max(0,i-1);if(p===0){n(p),l("");return}const _=p>e.length||(g=e[e.length-p])===null||g===void 0?void 0:g.expression;if(!_)return;l(_),n(p);return}f.key==="Enter"&&a&&(t(a),l(""))},u=f=>{l(f.target.value)};return Ge.createElement("div",{className:da.inputWrapper},Ge.createElement(GU,{focused:s}),Ge.createElement("input",{value:a,className:da.input,"aria-label":"Enter an expression",onFocus:()=>{r(!0)},onBlur:()=>{r(!1)},onKeyDown:c,onChange:u}))},y$e=o=>{const[e,t]=Ge.useState([]);return o?[o,()=>{}]:[e,t]},Kce=o=>{const{execute:e,history:t,resultComponent:i,theme:n,colorScheme:s,className:r}=o,a=Cg(o,_$e),[l,c]=y$e(t),{themeClass:u}=xk({theme:n,colorScheme:s},da),f=Ge.useRef(null);return Ge.useEffect(()=>{f.current&&(f.current.scrollTop=f.current.scrollHeight)},[l.length]),Ge.createElement("div",Pr({},a,{className:Fr(da.console,u,r)}),Ge.createElement("div",{ref:f,className:da.resultsScrollWrapper},Ge.createElement("ul",{className:da.results},l.map(g=>Ge.createElement(C$e,Pr({key:g.id,resultComponent:i},g))))),Ge.createElement(w$e,{history:l,onSubmit:g=>{const p=e(g);c([...l,{id:`item-${l.length}`,expression:g,result:p}])}}))};Kce.defaultProps={execute:o=>o,resultComponent:v$e};const S$e=(async function(){}).constructor,L$e=({client:o})=>{const[e,t]=Fi.useState([]);console.log("RENDER CLIENT",o.ready);const[i,n]=Fi.useState(!1),s=Fi.useCallback(c=>{t(u=>[...u,{...c,id:String(u.length)}])},[]);Fi.useEffect(()=>{const c=(...u)=>{s({expression:void 0,severity:"warning",result:u})};return o.on("message",c),console.log("SUBSCRIBE-ON-CLIENT"),()=>void o.off("message",c)},[o]);const r=Fi.useMemo(()=>Object.create(null),[]),a=Fi.useMemo(()=>new Proxy(r,{has:()=>!0,get:(c,u)=>u in c?c[u]:o.call.bind(o,u)}),[o]),l=Fi.useCallback(async c=>{try{if(i)throw new Error("Processing failed");n(!0);let u=!1,f;try{try{f=new Function("p",`with(p) return ${c}`)}catch{f=new S$e("p",`with(p) return ${c}`),u=!0}}catch(g){s({result:g,severity:"error",expression:c});return}if(u)try{const g=await f.call(r,a);r.$_=g,s({result:g,expression:c})}catch(g){s({result:g,severity:"error",expression:c})}else try{const g=f.call(r,a);r.$_=g,s({result:g,expression:c})}catch(g){s({result:g,severity:"error",expression:c})}}finally{n(!1)}},[]);return fn.jsxDEV("div",{className:"console-box",children:fn.jsxDEV(Kce,{theme:"chrome",execute:l,resultComponent:b$e,history:e},void 0,!1,{fileName:"/home/runner/work/varhub-source/varhub-source/src/components/RoomActions.tsx",lineNumber:78,columnNumber:4},void 0)},void 0,!1,{fileName:"/home/runner/work/varhub-source/varhub-source/src/components/RoomActions.tsx",lineNumber:77,columnNumber:3},void 0)},x$e=({url:o,roomId:e})=>{const[t,i]=Fi.useState(!1),[n,s]=Fi.useState(""),[r,a]=Fi.useState(null),l=Fi.useMemo(()=>new Vce(o),["url"]),[c,u]=Fi.useState(null);Fi.useEffect(()=>{let g=!0;return l.getRoomMessage(e).then(p=>g&&u(p)).finally(()=>g&&i(!1)),()=>{g=!1,u(null),i(!1)}},[l]);const f=()=>{if(!t)try{i(!0);const g=l.join(e,{params:[n]}),p=new DUe(g);a(p)}finally{i(!1)}};return Fi.useEffect(()=>{if(!r)return;const g=()=>a(null);return r.on("close",g),r.on("ready",()=>console.log("CLIENT-READY")),r.on("message",(...p)=>console.log("CLIENT-MESSAGE",p)),()=>void r.off("close",g)},[r]),r?fn.jsxDEV(L$e,{client:r},void 0,!1,{fileName:"/home/runner/work/varhub-source/varhub-source/src/components/EnterRoom.tsx",lineNumber:71,columnNumber:9},void 0):fn.jsxDEV(fn.Fragment,{children:[fn.jsxDEV("div",{className:"form-line",children:[fn.jsxDEV("input",{value:n,placeholder:"name",autoFocus:!0,disabled:!!t,onKeyDown:g=>g.key==="Enter"&&f(),onChange:g=>s(g.target.value)},void 0,!1,{fileName:"/home/runner/work/varhub-source/varhub-source/src/components/EnterRoom.tsx",lineNumber:55,columnNumber:5},void 0),fn.jsxDEV("button",{disabled:!!t,onClick:f,children:"Join"},void 0,!1,{fileName:"/home/runner/work/varhub-source/varhub-source/src/components/EnterRoom.tsx",lineNumber:63,columnNumber:5},void 0)]},void 0,!0,{fileName:"/home/runner/work/varhub-source/varhub-source/src/components/EnterRoom.tsx",lineNumber:54,columnNumber:4},void 0),c!==null&&fn.jsxDEV("div",{children:fn.jsxDEV("code",{children:c},void 0,!1,{fileName:"/home/runner/work/varhub-source/varhub-source/src/components/EnterRoom.tsx",lineNumber:66,columnNumber:5},void 0)},void 0,!1,{fileName:"/home/runner/work/varhub-source/varhub-source/src/components/EnterRoom.tsx",lineNumber:65,columnNumber:27},void 0)]},void 0,!0,{fileName:"/home/runner/work/varhub-source/varhub-source/src/components/EnterRoom.tsx",lineNumber:53,columnNumber:3},void 0)},D$e=()=>{const o=Fi.useMemo(()=>{const e=new URLSearchParams(location.search),t=e.get("url"),i=e.get("room");if(!(!t||!i))return{url:t,roomId:i}},[]);return o?fn.jsxDEV(x$e,{...o},void 0,!1,{fileName:"/home/runner/work/varhub-source/varhub-source/src/components/App.tsx",lineNumber:18,columnNumber:9},void 0):fn.jsxDEV(EUe,{},void 0,!1,{fileName:"/home/runner/work/varhub-source/varhub-source/src/components/App.tsx",lineNumber:16,columnNumber:3},void 0)},k$e=jB.createRoot(document.getElementById("root"));k$e.render(fn.jsxDEV(D$e,{},void 0,!1,{fileName:"/home/runner/work/varhub-source/varhub-source/src/index.tsx",lineNumber:6,columnNumber:13},void 0));export{IP as m,rae as t};
