const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./javascript-CANBgRCY.js","./typescript-dI1oFzg_.js"])))=>i.map(i=>d[i]);
var gLe=Object.defineProperty;var Lte=o=>{throw TypeError(o)};var pLe=(o,e,t)=>e in o?gLe(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var Qt=(o,e,t)=>pLe(o,typeof e!="symbol"?e+"":e,t),TH=(o,e,t)=>e.has(o)||Lte("Cannot "+t);var et=(o,e,t)=>(TH(o,e,"read from private field"),t?t.call(o):e.get(o)),xs=(o,e,t)=>e.has(o)?Lte("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(o):e.set(o,t),ls=(o,e,t,i)=>(TH(o,e,"write to private field"),i?i.call(o,t):e.set(o,t),t),U_=(o,e,t)=>(TH(o,e,"access private method"),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function t(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=t(n);fetch(n.href,s)}})();function WS(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var rle={exports:{}},z9={},ale={exports:{}},eA={exports:{}};eA.exports;(function(o,e){/**
 * @license React
 * react.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var t="18.3.1",i=Symbol.for("react.element"),n=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),b=Symbol.for("react.offscreen"),y=Symbol.iterator,S="@@iterator";function L(F){if(F===null||typeof F!="object")return null;var ne=y&&F[y]||F[S];return typeof ne=="function"?ne:null}var x={current:null},k={transition:null},E={current:null,isBatchingLegacy:!1,didScheduleLegacyUpdate:!1},N={current:null},A={},P=null;function H(F){P=F}A.setExtraStackFrame=function(F){P=F},A.getCurrentStack=null,A.getStackAddendum=function(){var F="";P&&(F+=P);var ne=A.getCurrentStack;return ne&&(F+=ne()||""),F};var ee=!1,Q=!1,te=!1,J=!1,Z=!1,he={ReactCurrentDispatcher:x,ReactCurrentBatchConfig:k,ReactCurrentOwner:N};he.ReactDebugCurrentFrame=A,he.ReactCurrentActQueue=E;function Ce(F){{for(var ne=arguments.length,Ie=new Array(ne>1?ne-1:0),Ae=1;Ae<ne;Ae++)Ie[Ae-1]=arguments[Ae];me("warn",F,Ie)}}function we(F){{for(var ne=arguments.length,Ie=new Array(ne>1?ne-1:0),Ae=1;Ae<ne;Ae++)Ie[Ae-1]=arguments[Ae];me("error",F,Ie)}}function me(F,ne,Ie){{var Ae=he.ReactDebugCurrentFrame,ct=Ae.getStackAddendum();ct!==""&&(ne+="%s",Ie=Ie.concat([ct]));var ri=Ie.map(function(Rt){return String(Rt)});ri.unshift("Warning: "+ne),Function.prototype.apply.call(console[F],console,ri)}}var pe={};function Fe(F,ne){{var Ie=F.constructor,Ae=Ie&&(Ie.displayName||Ie.name)||"ReactClass",ct=Ae+"."+ne;if(pe[ct])return;we("Can't call %s on a component that is not yet mounted. This is a no-op, but it might indicate a bug in your application. Instead, assign to `this.state` directly or define a `state = {};` class property with the desired state in the %s component.",ne,Ae),pe[ct]=!0}}var Ye={isMounted:function(F){return!1},enqueueForceUpdate:function(F,ne,Ie){Fe(F,"forceUpdate")},enqueueReplaceState:function(F,ne,Ie,Ae){Fe(F,"replaceState")},enqueueSetState:function(F,ne,Ie,Ae){Fe(F,"setState")}},Ut=Object.assign,dt={};Object.freeze(dt);function Ot(F,ne,Ie){this.props=F,this.context=ne,this.refs=dt,this.updater=Ie||Ye}Ot.prototype.isReactComponent={},Ot.prototype.setState=function(F,ne){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw new Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,ne,"setState")},Ot.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};{var Bi={isMounted:["isMounted","Instead, make sure to clean up subscriptions and pending requests in componentWillUnmount to prevent memory leaks."],replaceState:["replaceState","Refactor your code to use setState instead (see https://github.com/facebook/react/issues/3236)."]},Qi=function(F,ne){Object.defineProperty(Ot.prototype,F,{get:function(){Ce("%s(...) is deprecated in plain JavaScript React classes. %s",ne[0],ne[1])}})};for(var Xn in Bi)Bi.hasOwnProperty(Xn)&&Qi(Xn,Bi[Xn])}function Qn(){}Qn.prototype=Ot.prototype;function Jn(F,ne,Ie){this.props=F,this.context=ne,this.refs=dt,this.updater=Ie||Ye}var yn=Jn.prototype=new Qn;yn.constructor=Jn,Ut(yn,Ot.prototype),yn.isPureReactComponent=!0;function ws(){var F={current:null};return Object.seal(F),F}var sn=Array.isArray;function wn(F){return sn(F)}function Ts(F){{var ne=typeof Symbol=="function"&&Symbol.toStringTag,Ie=ne&&F[Symbol.toStringTag]||F.constructor.name||"Object";return Ie}}function Ns(F){try{return Ss(F),!1}catch{return!0}}function Ss(F){return""+F}function Os(F){if(Ns(F))return we("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",Ts(F)),Ss(F)}function sr(F,ne,Ie){var Ae=F.displayName;if(Ae)return Ae;var ct=ne.displayName||ne.name||"";return ct!==""?Ie+"("+ct+")":Ie}function aa(F){return F.displayName||"Context"}function Hs(F){if(F==null)return null;if(typeof F.tag=="number"&&we("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof F=="function")return F.displayName||F.name||null;if(typeof F=="string")return F;switch(F){case s:return"Fragment";case n:return"Portal";case a:return"Profiler";case r:return"StrictMode";case f:return"Suspense";case g:return"SuspenseList"}if(typeof F=="object")switch(F.$$typeof){case c:var ne=F;return aa(ne)+".Consumer";case l:var Ie=F;return aa(Ie._context)+".Provider";case u:return sr(F,F.render,"ForwardRef");case p:var Ae=F.displayName||null;return Ae!==null?Ae:Hs(F.type)||"Memo";case _:{var ct=F,ri=ct._payload,Rt=ct._init;try{return Hs(Rt(ri))}catch{return null}}}return null}var Bo=Object.prototype.hasOwnProperty,Qs={key:!0,ref:!0,__self:!0,__source:!0},Rs,xr,Vs;Vs={};function or(F){if(Bo.call(F,"ref")){var ne=Object.getOwnPropertyDescriptor(F,"ref").get;if(ne&&ne.isReactWarning)return!1}return F.ref!==void 0}function es(F){if(Bo.call(F,"key")){var ne=Object.getOwnPropertyDescriptor(F,"key").get;if(ne&&ne.isReactWarning)return!1}return F.key!==void 0}function kr(F,ne){var Ie=function(){Rs||(Rs=!0,we("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",ne))};Ie.isReactWarning=!0,Object.defineProperty(F,"key",{get:Ie,configurable:!0})}function Wo(F,ne){var Ie=function(){xr||(xr=!0,we("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",ne))};Ie.isReactWarning=!0,Object.defineProperty(F,"ref",{get:Ie,configurable:!0})}function wo(F){if(typeof F.ref=="string"&&N.current&&F.__self&&N.current.stateNode!==F.__self){var ne=Hs(N.current.type);Vs[ne]||(we('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',ne,F.ref),Vs[ne]=!0)}}var Ze=function(F,ne,Ie,Ae,ct,ri,Rt){var _i={$$typeof:i,type:F,key:ne,ref:Ie,props:Rt,_owner:ri};return _i._store={},Object.defineProperty(_i._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(_i,"_self",{configurable:!1,enumerable:!1,writable:!1,value:Ae}),Object.defineProperty(_i,"_source",{configurable:!1,enumerable:!1,writable:!1,value:ct}),Object.freeze&&(Object.freeze(_i.props),Object.freeze(_i)),_i};function xt(F,ne,Ie){var Ae,ct={},ri=null,Rt=null,_i=null,ji=null;if(ne!=null){or(ne)&&(Rt=ne.ref,wo(ne)),es(ne)&&(Os(ne.key),ri=""+ne.key),_i=ne.__self===void 0?null:ne.__self,ji=ne.__source===void 0?null:ne.__source;for(Ae in ne)Bo.call(ne,Ae)&&!Qs.hasOwnProperty(Ae)&&(ct[Ae]=ne[Ae])}var Vn=arguments.length-2;if(Vn===1)ct.children=Ie;else if(Vn>1){for(var ps=Array(Vn),ms=0;ms<Vn;ms++)ps[ms]=arguments[ms+2];Object.freeze&&Object.freeze(ps),ct.children=ps}if(F&&F.defaultProps){var Ms=F.defaultProps;for(Ae in Ms)ct[Ae]===void 0&&(ct[Ae]=Ms[Ae])}if(ri||Rt){var eo=typeof F=="function"?F.displayName||F.name||"Unknown":F;ri&&kr(ct,eo),Rt&&Wo(ct,eo)}return Ze(F,ri,Rt,_i,ji,N.current,ct)}function fi(F,ne){var Ie=Ze(F.type,ne,F.ref,F._self,F._source,F._owner,F.props);return Ie}function Si(F,ne,Ie){if(F==null)throw new Error("React.cloneElement(...): The argument must be a React element, but you passed "+F+".");var Ae,ct=Ut({},F.props),ri=F.key,Rt=F.ref,_i=F._self,ji=F._source,Vn=F._owner;if(ne!=null){or(ne)&&(Rt=ne.ref,Vn=N.current),es(ne)&&(Os(ne.key),ri=""+ne.key);var ps;F.type&&F.type.defaultProps&&(ps=F.type.defaultProps);for(Ae in ne)Bo.call(ne,Ae)&&!Qs.hasOwnProperty(Ae)&&(ne[Ae]===void 0&&ps!==void 0?ct[Ae]=ps[Ae]:ct[Ae]=ne[Ae])}var ms=arguments.length-2;if(ms===1)ct.children=Ie;else if(ms>1){for(var Ms=Array(ms),eo=0;eo<ms;eo++)Ms[eo]=arguments[eo+2];ct.children=Ms}return Ze(F.type,ri,Rt,_i,ji,Vn,ct)}function Wi(F){return typeof F=="object"&&F!==null&&F.$$typeof===i}var Wn=".",Fn=":";function Ci(F){var ne=/[=:]/g,Ie={"=":"=0",":":"=2"},Ae=F.replace(ne,function(ct){return Ie[ct]});return"$"+Ae}var pi=!1,Js=/\/+/g;function ts(F){return F.replace(Js,"$&/")}function Hn(F,ne){return typeof F=="object"&&F!==null&&F.key!=null?(Os(F.key),Ci(""+F.key)):ne.toString(36)}function la(F,ne,Ie,Ae,ct){var ri=typeof F;(ri==="undefined"||ri==="boolean")&&(F=null);var Rt=!1;if(F===null)Rt=!0;else switch(ri){case"string":case"number":Rt=!0;break;case"object":switch(F.$$typeof){case i:case n:Rt=!0}}if(Rt){var _i=F,ji=ct(_i),Vn=Ae===""?Wn+Hn(_i,0):Ae;if(wn(ji)){var ps="";Vn!=null&&(ps=ts(Vn)+"/"),la(ji,ne,ps,"",function(I5){return I5})}else ji!=null&&(Wi(ji)&&(ji.key&&(!_i||_i.key!==ji.key)&&Os(ji.key),ji=fi(ji,Ie+(ji.key&&(!_i||_i.key!==ji.key)?ts(""+ji.key)+"/":"")+Vn)),ne.push(ji));return 1}var ms,Ms,eo=0,Ln=Ae===""?Wn:Ae+Fn;if(wn(F))for(var Yg=0;Yg<F.length;Yg++)ms=F[Yg],Ms=Ln+Hn(ms,Yg),eo+=la(ms,ne,Ie,Ms,ct);else{var ey=L(F);if(typeof ey=="function"){var D0=F;ey===D0.entries&&(pi||Ce("Using Maps as children is not supported. Use an array of keyed ReactElements instead."),pi=!0);for(var E5=ey.call(D0),Xh,E0=0;!(Xh=E5.next()).done;)ms=Xh.value,Ms=Ln+Hn(ms,E0++),eo+=la(ms,ne,Ie,Ms,ct)}else if(ri==="object"){var I0=String(F);throw new Error("Objects are not valid as a React child (found: "+(I0==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":I0)+"). If you meant to render a collection of children, use an array instead.")}}return eo}function ca(F,ne,Ie){if(F==null)return F;var Ae=[],ct=0;return la(F,Ae,"","",function(ri){return ne.call(Ie,ri,ct++)}),Ae}function Ac(F){var ne=0;return ca(F,function(){ne++}),ne}function ku(F,ne,Ie){ca(F,function(){ne.apply(this,arguments)},Ie)}function $t(F){return ca(F,function(ne){return ne})||[]}function z(F){if(!Wi(F))throw new Error("React.Children.only expected to receive a single React element child.");return F}function $(F){var ne={$$typeof:c,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null};ne.Provider={$$typeof:l,_context:ne};var Ie=!1,Ae=!1,ct=!1;{var ri={$$typeof:c,_context:ne};Object.defineProperties(ri,{Provider:{get:function(){return Ae||(Ae=!0,we("Rendering <Context.Consumer.Provider> is not supported and will be removed in a future major release. Did you mean to render <Context.Provider> instead?")),ne.Provider},set:function(Rt){ne.Provider=Rt}},_currentValue:{get:function(){return ne._currentValue},set:function(Rt){ne._currentValue=Rt}},_currentValue2:{get:function(){return ne._currentValue2},set:function(Rt){ne._currentValue2=Rt}},_threadCount:{get:function(){return ne._threadCount},set:function(Rt){ne._threadCount=Rt}},Consumer:{get:function(){return Ie||(Ie=!0,we("Rendering <Context.Consumer.Consumer> is not supported and will be removed in a future major release. Did you mean to render <Context.Consumer> instead?")),ne.Consumer}},displayName:{get:function(){return ne.displayName},set:function(Rt){ct||(Ce("Setting `displayName` on Context.Consumer has no effect. You should set it directly on the context with Context.displayName = '%s'.",Rt),ct=!0)}}}),ne.Consumer=ri}return ne._currentRenderer=null,ne._currentRenderer2=null,ne}var K=-1,ie=0,re=1,ye=2;function Ne(F){if(F._status===K){var ne=F._result,Ie=ne();if(Ie.then(function(ri){if(F._status===ie||F._status===K){var Rt=F;Rt._status=re,Rt._result=ri}},function(ri){if(F._status===ie||F._status===K){var Rt=F;Rt._status=ye,Rt._result=ri}}),F._status===K){var Ae=F;Ae._status=ie,Ae._result=Ie}}if(F._status===re){var ct=F._result;return ct===void 0&&we(`lazy: Expected the result of a dynamic import() call. Instead received: %s

Your code should look like: 
  const MyComponent = lazy(() => import('./MyComponent'))

Did you accidentally put curly braces around the import?`,ct),"default"in ct||we(`lazy: Expected the result of a dynamic import() call. Instead received: %s

Your code should look like: 
  const MyComponent = lazy(() => import('./MyComponent'))`,ct),ct.default}else throw F._result}function j(F){var ne={_status:K,_result:F},Ie={$$typeof:_,_payload:ne,_init:Ne};{var Ae,ct;Object.defineProperties(Ie,{defaultProps:{configurable:!0,get:function(){return Ae},set:function(ri){we("React.lazy(...): It is not supported to assign `defaultProps` to a lazy component import. Either specify them where the component is defined, or create a wrapping component around it."),Ae=ri,Object.defineProperty(Ie,"defaultProps",{enumerable:!0})}},propTypes:{configurable:!0,get:function(){return ct},set:function(ri){we("React.lazy(...): It is not supported to assign `propTypes` to a lazy component import. Either specify them where the component is defined, or create a wrapping component around it."),ct=ri,Object.defineProperty(Ie,"propTypes",{enumerable:!0})}}})}return Ie}function fe(F){F!=null&&F.$$typeof===p?we("forwardRef requires a render function but received a `memo` component. Instead of forwardRef(memo(...)), use memo(forwardRef(...))."):typeof F!="function"?we("forwardRef requires a render function but was given %s.",F===null?"null":typeof F):F.length!==0&&F.length!==2&&we("forwardRef render functions accept exactly two parameters: props and ref. %s",F.length===1?"Did you forget to use the ref parameter?":"Any additional parameter will be undefined."),F!=null&&(F.defaultProps!=null||F.propTypes!=null)&&we("forwardRef render functions do not support propTypes or defaultProps. Did you accidentally pass a React component?");var ne={$$typeof:u,render:F};{var Ie;Object.defineProperty(ne,"displayName",{enumerable:!1,configurable:!0,get:function(){return Ie},set:function(Ae){Ie=Ae,!F.name&&!F.displayName&&(F.displayName=Ae)}})}return ne}var Oe;Oe=Symbol.for("react.module.reference");function rt(F){return!!(typeof F=="string"||typeof F=="function"||F===s||F===a||Z||F===r||F===f||F===g||J||F===b||ee||Q||te||typeof F=="object"&&F!==null&&(F.$$typeof===_||F.$$typeof===p||F.$$typeof===l||F.$$typeof===c||F.$$typeof===u||F.$$typeof===Oe||F.getModuleId!==void 0))}function Et(F,ne){rt(F)||we("memo: The first argument must be a component. Instead received: %s",F===null?"null":typeof F);var Ie={$$typeof:p,type:F,compare:ne===void 0?null:ne};{var Ae;Object.defineProperty(Ie,"displayName",{enumerable:!1,configurable:!0,get:function(){return Ae},set:function(ct){Ae=ct,!F.name&&!F.displayName&&(F.displayName=ct)}})}return Ie}function gt(){var F=x.current;return F===null&&we(`Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:
1. You might have mismatching versions of React and the renderer (such as React DOM)
2. You might be breaking the Rules of Hooks
3. You might have more than one copy of React in the same app
See https://reactjs.org/link/invalid-hook-call for tips about how to debug and fix this problem.`),F}function kt(F){var ne=gt();if(F._context!==void 0){var Ie=F._context;Ie.Consumer===F?we("Calling useContext(Context.Consumer) is not supported, may cause bugs, and will be removed in a future major release. Did you mean to call useContext(Context) instead?"):Ie.Provider===F&&we("Calling useContext(Context.Provider) is not supported. Did you mean to call useContext(Context) instead?")}return ne.useContext(F)}function je(F){var ne=gt();return ne.useState(F)}function oe(F,ne,Ie){var Ae=gt();return Ae.useReducer(F,ne,Ie)}function Me(F){var ne=gt();return ne.useRef(F)}function Xe(F,ne){var Ie=gt();return Ie.useEffect(F,ne)}function mi(F,ne){var Ie=gt();return Ie.useInsertionEffect(F,ne)}function Sn(F,ne){var Ie=gt();return Ie.useLayoutEffect(F,ne)}function as(F,ne){var Ie=gt();return Ie.useCallback(F,ne)}function Mi(F,ne){var Ie=gt();return Ie.useMemo(F,ne)}function rr(F,ne,Ie){var Ae=gt();return Ae.useImperativeHandle(F,ne,Ie)}function Du(F,ne){{var Ie=gt();return Ie.useDebugValue(F,ne)}}function Vg(){var F=gt();return F.useTransition()}function Eu(F){var ne=gt();return ne.useDeferredValue(F)}function zi(){var F=gt();return F.useId()}function d_(F,ne,Ie){var Ae=gt();return Ae.useSyncExternalStore(F,ne,Ie)}var zg=0,g0,p0,m0,_0,v0,b0,C0;function PI(){}PI.__reactDisabledLog=!0;function x5(){{if(zg===0){g0=console.log,p0=console.info,m0=console.warn,_0=console.error,v0=console.group,b0=console.groupCollapsed,C0=console.groupEnd;var F={configurable:!0,enumerable:!0,value:PI,writable:!0};Object.defineProperties(console,{info:F,log:F,warn:F,error:F,group:F,groupCollapsed:F,groupEnd:F})}zg++}}function y0(){{if(zg--,zg===0){var F={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:Ut({},F,{value:g0}),info:Ut({},F,{value:p0}),warn:Ut({},F,{value:m0}),error:Ut({},F,{value:_0}),group:Ut({},F,{value:v0}),groupCollapsed:Ut({},F,{value:b0}),groupEnd:Ut({},F,{value:C0})})}zg<0&&we("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var u_=he.ReactCurrentDispatcher,Pc;function Ug(F,ne,Ie){{if(Pc===void 0)try{throw Error()}catch(ct){var Ae=ct.stack.trim().match(/\n( *(at )?)/);Pc=Ae&&Ae[1]||""}return`
`+Pc+F}}var $g=!1,YC;{var w0=typeof WeakMap=="function"?WeakMap:Map;YC=new w0}function OI(F,ne){if(!F||$g)return"";{var Ie=YC.get(F);if(Ie!==void 0)return Ie}var Ae;$g=!0;var ct=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var ri;ri=u_.current,u_.current=null,x5();try{if(ne){var Rt=function(){throw Error()};if(Object.defineProperty(Rt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Rt,[])}catch(Ln){Ae=Ln}Reflect.construct(F,[],Rt)}else{try{Rt.call()}catch(Ln){Ae=Ln}F.call(Rt.prototype)}}else{try{throw Error()}catch(Ln){Ae=Ln}F()}}catch(Ln){if(Ln&&Ae&&typeof Ln.stack=="string"){for(var _i=Ln.stack.split(`
`),ji=Ae.stack.split(`
`),Vn=_i.length-1,ps=ji.length-1;Vn>=1&&ps>=0&&_i[Vn]!==ji[ps];)ps--;for(;Vn>=1&&ps>=0;Vn--,ps--)if(_i[Vn]!==ji[ps]){if(Vn!==1||ps!==1)do if(Vn--,ps--,ps<0||_i[Vn]!==ji[ps]){var ms=`
`+_i[Vn].replace(" at new "," at ");return F.displayName&&ms.includes("<anonymous>")&&(ms=ms.replace("<anonymous>",F.displayName)),typeof F=="function"&&YC.set(F,ms),ms}while(Vn>=1&&ps>=0);break}}}finally{$g=!1,u_.current=ri,y0(),Error.prepareStackTrace=ct}var Ms=F?F.displayName||F.name:"",eo=Ms?Ug(Ms):"";return typeof F=="function"&&YC.set(F,eo),eo}function S0(F,ne,Ie){return OI(F,!1)}function k5(F){var ne=F.prototype;return!!(ne&&ne.isReactComponent)}function jg(F,ne,Ie){if(F==null)return"";if(typeof F=="function")return OI(F,k5(F));if(typeof F=="string")return Ug(F);switch(F){case f:return Ug("Suspense");case g:return Ug("SuspenseList")}if(typeof F=="object")switch(F.$$typeof){case u:return S0(F.render);case p:return jg(F.type,ne,Ie);case _:{var Ae=F,ct=Ae._payload,ri=Ae._init;try{return jg(ri(ct),ne,Ie)}catch{}}}return""}var FI={},L0=he.ReactDebugCurrentFrame;function ZC(F){if(F){var ne=F._owner,Ie=jg(F.type,F._source,ne?ne.type:null);L0.setExtraStackFrame(Ie)}else L0.setExtraStackFrame(null)}function BI(F,ne,Ie,Ae,ct){{var ri=Function.call.bind(Bo);for(var Rt in F)if(ri(F,Rt)){var _i=void 0;try{if(typeof F[Rt]!="function"){var ji=Error((Ae||"React class")+": "+Ie+" type `"+Rt+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof F[Rt]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw ji.name="Invariant Violation",ji}_i=F[Rt](ne,Rt,Ae,Ie,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(Vn){_i=Vn}_i&&!(_i instanceof Error)&&(ZC(ct),we("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",Ae||"React class",Ie,Rt,typeof _i),ZC(null)),_i instanceof Error&&!(_i.message in FI)&&(FI[_i.message]=!0,ZC(ct),we("Failed %s type: %s",Ie,_i.message),ZC(null))}}}function on(F){if(F){var ne=F._owner,Ie=jg(F.type,F._source,ne?ne.type:null);H(Ie)}else H(null)}var x0;x0=!1;function k0(){if(N.current){var F=Hs(N.current.type);if(F)return`

Check the render method of \``+F+"`."}return""}function Ei(F){if(F!==void 0){var ne=F.fileName.replace(/^.*[\\\/]/,""),Ie=F.lineNumber;return`

Check your code at `+ne+":"+Ie+"."}return""}function WI(F){return F!=null?Ei(F.__source):""}var da={};function h_(F){var ne=k0();if(!ne){var Ie=typeof F=="string"?F:F.displayName||F.name;Ie&&(ne=`

Check the top-level render call using <`+Ie+">.")}return ne}function qg(F,ne){if(!(!F._store||F._store.validated||F.key!=null)){F._store.validated=!0;var Ie=h_(ne);if(!da[Ie]){da[Ie]=!0;var Ae="";F&&F._owner&&F._owner!==N.current&&(Ae=" It was passed a child from "+Hs(F._owner.type)+"."),on(F),we('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',Ie,Ae),on(null)}}}function HI(F,ne){if(typeof F=="object"){if(wn(F))for(var Ie=0;Ie<F.length;Ie++){var Ae=F[Ie];Wi(Ae)&&qg(Ae,ne)}else if(Wi(F))F._store&&(F._store.validated=!0);else if(F){var ct=L(F);if(typeof ct=="function"&&ct!==F.entries)for(var ri=ct.call(F),Rt;!(Rt=ri.next()).done;)Wi(Rt.value)&&qg(Rt.value,ne)}}}function ar(F){{var ne=F.type;if(ne==null||typeof ne=="string")return;var Ie;if(typeof ne=="function")Ie=ne.propTypes;else if(typeof ne=="object"&&(ne.$$typeof===u||ne.$$typeof===p))Ie=ne.propTypes;else return;if(Ie){var Ae=Hs(ne);BI(Ie,F.props,"prop",Ae,F)}else if(ne.PropTypes!==void 0&&!x0){x0=!0;var ct=Hs(ne);we("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",ct||"Unknown")}typeof ne.getDefaultProps=="function"&&!ne.getDefaultProps.isReactClassApproved&&we("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function zs(F){{for(var ne=Object.keys(F.props),Ie=0;Ie<ne.length;Ie++){var Ae=ne[Ie];if(Ae!=="children"&&Ae!=="key"){on(F),we("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",Ae),on(null);break}}F.ref!==null&&(on(F),we("Invalid attribute `ref` supplied to `React.Fragment`."),on(null))}}function VI(F,ne,Ie){var Ae=rt(F);if(!Ae){var ct="";(F===void 0||typeof F=="object"&&F!==null&&Object.keys(F).length===0)&&(ct+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var ri=WI(ne);ri?ct+=ri:ct+=k0();var Rt;F===null?Rt="null":wn(F)?Rt="array":F!==void 0&&F.$$typeof===i?(Rt="<"+(Hs(F.type)||"Unknown")+" />",ct=" Did you accidentally export a JSX literal instead of a component?"):Rt=typeof F,we("React.createElement: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",Rt,ct)}var _i=xt.apply(this,arguments);if(_i==null)return _i;if(Ae)for(var ji=2;ji<arguments.length;ji++)HI(arguments[ji],F);return F===s?zs(_i):ar(_i),_i}var Jl=!1;function fl(F){var ne=VI.bind(null,F);return ne.type=F,Jl||(Jl=!0,Ce("React.createFactory() is deprecated and will be removed in a future major release. Consider using JSX or use React.createElement() directly instead.")),Object.defineProperty(ne,"type",{enumerable:!1,get:function(){return Ce("Factory.type is deprecated. Access the class directly before passing it to createFactory."),Object.defineProperty(this,"type",{value:F}),F}}),ne}function Iu(F,ne,Ie){for(var Ae=Si.apply(this,arguments),ct=2;ct<arguments.length;ct++)HI(arguments[ct],Ae.type);return ar(Ae),Ae}function D5(F,ne){var Ie=k.transition;k.transition={};var Ae=k.transition;k.transition._updatedFibers=new Set;try{F()}finally{if(k.transition=Ie,Ie===null&&Ae._updatedFibers){var ct=Ae._updatedFibers.size;ct>10&&Ce("Detected a large number of updates inside startTransition. If this is due to a subscription please re-write it to use React provided hooks. Otherwise concurrent mode guarantees are off the table."),Ae._updatedFibers.clear()}}}var XC=!1,f_=null;function zI(F){if(f_===null)try{var ne=("require"+Math.random()).slice(0,7),Ie=o&&o[ne];f_=Ie.call(o,"timers").setImmediate}catch{f_=function(ct){XC===!1&&(XC=!0,typeof MessageChannel>"u"&&we("This browser does not have a MessageChannel implementation, so enqueuing tasks via await act(async () => ...) will fail. Please file an issue at https://github.com/facebook/react/issues if you encounter this warning."));var ri=new MessageChannel;ri.port1.onmessage=ct,ri.port2.postMessage(void 0)}}return f_(F)}var Kg=0,UI=!1;function $I(F){{var ne=Kg;Kg++,E.current===null&&(E.current=[]);var Ie=E.isBatchingLegacy,Ae;try{if(E.isBatchingLegacy=!0,Ae=F(),!Ie&&E.didScheduleLegacyUpdate){var ct=E.current;ct!==null&&(E.didScheduleLegacyUpdate=!1,JC(ct))}}catch(Ms){throw Zh(ne),Ms}finally{E.isBatchingLegacy=Ie}if(Ae!==null&&typeof Ae=="object"&&typeof Ae.then=="function"){var ri=Ae,Rt=!1,_i={then:function(Ms,eo){Rt=!0,ri.then(function(Ln){Zh(ne),Kg===0?QC(Ln,Ms,eo):Ms(Ln)},function(Ln){Zh(ne),eo(Ln)})}};return!UI&&typeof Promise<"u"&&Promise.resolve().then(function(){}).then(function(){Rt||(UI=!0,we("You called act(async () => ...) without await. This could lead to unexpected testing behaviour, interleaving multiple act calls and mixing their scopes. You should - await act(async () => ...);"))}),_i}else{var ji=Ae;if(Zh(ne),Kg===0){var Vn=E.current;Vn!==null&&(JC(Vn),E.current=null);var ps={then:function(Ms,eo){E.current===null?(E.current=[],QC(ji,Ms,eo)):Ms(ji)}};return ps}else{var ms={then:function(Ms,eo){Ms(ji)}};return ms}}}}function Zh(F){F!==Kg-1&&we("You seem to have overlapping act() calls, this is not supported. Be sure to await previous act() calls before making a new one. "),Kg=F}function QC(F,ne,Ie){{var Ae=E.current;if(Ae!==null)try{JC(Ae),zI(function(){Ae.length===0?(E.current=null,ne(F)):QC(F,ne,Ie)})}catch(ct){Ie(ct)}else ne(F)}}var Gg=!1;function JC(F){if(!Gg){Gg=!0;var ne=0;try{for(;ne<F.length;ne++){var Ie=F[ne];do Ie=Ie(!0);while(Ie!==null)}F.length=0}catch(Ae){throw F=F.slice(ne+1),Ae}finally{Gg=!1}}}var jI=VI,qI=Iu,KI=fl,GI={map:ca,forEach:ku,count:Ac,toArray:$t,only:z};e.Children=GI,e.Component=Ot,e.Fragment=s,e.Profiler=a,e.PureComponent=Jn,e.StrictMode=r,e.Suspense=f,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=he,e.act=$I,e.cloneElement=qI,e.createContext=$,e.createElement=jI,e.createFactory=KI,e.createRef=ws,e.forwardRef=fe,e.isValidElement=Wi,e.lazy=j,e.memo=Et,e.startTransition=D5,e.unstable_act=$I,e.useCallback=as,e.useContext=kt,e.useDebugValue=Du,e.useDeferredValue=Eu,e.useEffect=Xe,e.useId=zi,e.useImperativeHandle=rr,e.useInsertionEffect=mi,e.useLayoutEffect=Sn,e.useMemo=Mi,e.useReducer=oe,e.useRef=Me,e.useState=je,e.useSyncExternalStore=d_,e.useTransition=Vg,e.version=t,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)})()})(eA,eA.exports);var mLe=eA.exports;ale.exports=mLe;var Ii=ale.exports;const $e=WS(Ii);/**
 * @license React
 * react-jsx-dev-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){var o=Ii,e=Symbol.for("react.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),r=Symbol.for("react.provider"),a=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),p=Symbol.for("react.offscreen"),_=Symbol.iterator,b="@@iterator";function y(j){if(j===null||typeof j!="object")return null;var fe=_&&j[_]||j[b];return typeof fe=="function"?fe:null}var S=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function L(j){{for(var fe=arguments.length,Oe=new Array(fe>1?fe-1:0),rt=1;rt<fe;rt++)Oe[rt-1]=arguments[rt];x("error",j,Oe)}}function x(j,fe,Oe){{var rt=S.ReactDebugCurrentFrame,Et=rt.getStackAddendum();Et!==""&&(fe+="%s",Oe=Oe.concat([Et]));var gt=Oe.map(function(kt){return String(kt)});gt.unshift("Warning: "+fe),Function.prototype.apply.call(console[j],console,gt)}}var k=!1,E=!1,N=!1,A=!1,P=!1,H;H=Symbol.for("react.module.reference");function ee(j){return!!(typeof j=="string"||typeof j=="function"||j===i||j===s||P||j===n||j===c||j===u||A||j===p||k||E||N||typeof j=="object"&&j!==null&&(j.$$typeof===g||j.$$typeof===f||j.$$typeof===r||j.$$typeof===a||j.$$typeof===l||j.$$typeof===H||j.getModuleId!==void 0))}function Q(j,fe,Oe){var rt=j.displayName;if(rt)return rt;var Et=fe.displayName||fe.name||"";return Et!==""?Oe+"("+Et+")":Oe}function te(j){return j.displayName||"Context"}function J(j){if(j==null)return null;if(typeof j.tag=="number"&&L("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof j=="function")return j.displayName||j.name||null;if(typeof j=="string")return j;switch(j){case i:return"Fragment";case t:return"Portal";case s:return"Profiler";case n:return"StrictMode";case c:return"Suspense";case u:return"SuspenseList"}if(typeof j=="object")switch(j.$$typeof){case a:var fe=j;return te(fe)+".Consumer";case r:var Oe=j;return te(Oe._context)+".Provider";case l:return Q(j,j.render,"ForwardRef");case f:var rt=j.displayName||null;return rt!==null?rt:J(j.type)||"Memo";case g:{var Et=j,gt=Et._payload,kt=Et._init;try{return J(kt(gt))}catch{return null}}}return null}var Z=Object.assign,he=0,Ce,we,me,pe,Fe,Ye,Ut;function dt(){}dt.__reactDisabledLog=!0;function Ot(){{if(he===0){Ce=console.log,we=console.info,me=console.warn,pe=console.error,Fe=console.group,Ye=console.groupCollapsed,Ut=console.groupEnd;var j={configurable:!0,enumerable:!0,value:dt,writable:!0};Object.defineProperties(console,{info:j,log:j,warn:j,error:j,group:j,groupCollapsed:j,groupEnd:j})}he++}}function Bi(){{if(he--,he===0){var j={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:Z({},j,{value:Ce}),info:Z({},j,{value:we}),warn:Z({},j,{value:me}),error:Z({},j,{value:pe}),group:Z({},j,{value:Fe}),groupCollapsed:Z({},j,{value:Ye}),groupEnd:Z({},j,{value:Ut})})}he<0&&L("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var Qi=S.ReactCurrentDispatcher,Xn;function Qn(j,fe,Oe){{if(Xn===void 0)try{throw Error()}catch(Et){var rt=Et.stack.trim().match(/\n( *(at )?)/);Xn=rt&&rt[1]||""}return`
`+Xn+j}}var Jn=!1,yn;{var ws=typeof WeakMap=="function"?WeakMap:Map;yn=new ws}function sn(j,fe){if(!j||Jn)return"";{var Oe=yn.get(j);if(Oe!==void 0)return Oe}var rt;Jn=!0;var Et=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var gt;gt=Qi.current,Qi.current=null,Ot();try{if(fe){var kt=function(){throw Error()};if(Object.defineProperty(kt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(kt,[])}catch(Mi){rt=Mi}Reflect.construct(j,[],kt)}else{try{kt.call()}catch(Mi){rt=Mi}j.call(kt.prototype)}}else{try{throw Error()}catch(Mi){rt=Mi}j()}}catch(Mi){if(Mi&&rt&&typeof Mi.stack=="string"){for(var je=Mi.stack.split(`
`),oe=rt.stack.split(`
`),Me=je.length-1,Xe=oe.length-1;Me>=1&&Xe>=0&&je[Me]!==oe[Xe];)Xe--;for(;Me>=1&&Xe>=0;Me--,Xe--)if(je[Me]!==oe[Xe]){if(Me!==1||Xe!==1)do if(Me--,Xe--,Xe<0||je[Me]!==oe[Xe]){var mi=`
`+je[Me].replace(" at new "," at ");return j.displayName&&mi.includes("<anonymous>")&&(mi=mi.replace("<anonymous>",j.displayName)),typeof j=="function"&&yn.set(j,mi),mi}while(Me>=1&&Xe>=0);break}}}finally{Jn=!1,Qi.current=gt,Bi(),Error.prepareStackTrace=Et}var Sn=j?j.displayName||j.name:"",as=Sn?Qn(Sn):"";return typeof j=="function"&&yn.set(j,as),as}function wn(j,fe,Oe){return sn(j,!1)}function Ts(j){var fe=j.prototype;return!!(fe&&fe.isReactComponent)}function Ns(j,fe,Oe){if(j==null)return"";if(typeof j=="function")return sn(j,Ts(j));if(typeof j=="string")return Qn(j);switch(j){case c:return Qn("Suspense");case u:return Qn("SuspenseList")}if(typeof j=="object")switch(j.$$typeof){case l:return wn(j.render);case f:return Ns(j.type,fe,Oe);case g:{var rt=j,Et=rt._payload,gt=rt._init;try{return Ns(gt(Et),fe,Oe)}catch{}}}return""}var Ss=Object.prototype.hasOwnProperty,Os={},sr=S.ReactDebugCurrentFrame;function aa(j){if(j){var fe=j._owner,Oe=Ns(j.type,j._source,fe?fe.type:null);sr.setExtraStackFrame(Oe)}else sr.setExtraStackFrame(null)}function Hs(j,fe,Oe,rt,Et){{var gt=Function.call.bind(Ss);for(var kt in j)if(gt(j,kt)){var je=void 0;try{if(typeof j[kt]!="function"){var oe=Error((rt||"React class")+": "+Oe+" type `"+kt+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof j[kt]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw oe.name="Invariant Violation",oe}je=j[kt](fe,kt,rt,Oe,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(Me){je=Me}je&&!(je instanceof Error)&&(aa(Et),L("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",rt||"React class",Oe,kt,typeof je),aa(null)),je instanceof Error&&!(je.message in Os)&&(Os[je.message]=!0,aa(Et),L("Failed %s type: %s",Oe,je.message),aa(null))}}}var Bo=Array.isArray;function Qs(j){return Bo(j)}function Rs(j){{var fe=typeof Symbol=="function"&&Symbol.toStringTag,Oe=fe&&j[Symbol.toStringTag]||j.constructor.name||"Object";return Oe}}function xr(j){try{return Vs(j),!1}catch{return!0}}function Vs(j){return""+j}function or(j){if(xr(j))return L("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",Rs(j)),Vs(j)}var es=S.ReactCurrentOwner,kr={key:!0,ref:!0,__self:!0,__source:!0},Wo,wo,Ze;Ze={};function xt(j){if(Ss.call(j,"ref")){var fe=Object.getOwnPropertyDescriptor(j,"ref").get;if(fe&&fe.isReactWarning)return!1}return j.ref!==void 0}function fi(j){if(Ss.call(j,"key")){var fe=Object.getOwnPropertyDescriptor(j,"key").get;if(fe&&fe.isReactWarning)return!1}return j.key!==void 0}function Si(j,fe){if(typeof j.ref=="string"&&es.current&&fe&&es.current.stateNode!==fe){var Oe=J(es.current.type);Ze[Oe]||(L('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',J(es.current.type),j.ref),Ze[Oe]=!0)}}function Wi(j,fe){{var Oe=function(){Wo||(Wo=!0,L("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",fe))};Oe.isReactWarning=!0,Object.defineProperty(j,"key",{get:Oe,configurable:!0})}}function Wn(j,fe){{var Oe=function(){wo||(wo=!0,L("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",fe))};Oe.isReactWarning=!0,Object.defineProperty(j,"ref",{get:Oe,configurable:!0})}}var Fn=function(j,fe,Oe,rt,Et,gt,kt){var je={$$typeof:e,type:j,key:fe,ref:Oe,props:kt,_owner:gt};return je._store={},Object.defineProperty(je._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(je,"_self",{configurable:!1,enumerable:!1,writable:!1,value:rt}),Object.defineProperty(je,"_source",{configurable:!1,enumerable:!1,writable:!1,value:Et}),Object.freeze&&(Object.freeze(je.props),Object.freeze(je)),je};function Ci(j,fe,Oe,rt,Et){{var gt,kt={},je=null,oe=null;Oe!==void 0&&(or(Oe),je=""+Oe),fi(fe)&&(or(fe.key),je=""+fe.key),xt(fe)&&(oe=fe.ref,Si(fe,Et));for(gt in fe)Ss.call(fe,gt)&&!kr.hasOwnProperty(gt)&&(kt[gt]=fe[gt]);if(j&&j.defaultProps){var Me=j.defaultProps;for(gt in Me)kt[gt]===void 0&&(kt[gt]=Me[gt])}if(je||oe){var Xe=typeof j=="function"?j.displayName||j.name||"Unknown":j;je&&Wi(kt,Xe),oe&&Wn(kt,Xe)}return Fn(j,je,oe,Et,rt,es.current,kt)}}var pi=S.ReactCurrentOwner,Js=S.ReactDebugCurrentFrame;function ts(j){if(j){var fe=j._owner,Oe=Ns(j.type,j._source,fe?fe.type:null);Js.setExtraStackFrame(Oe)}else Js.setExtraStackFrame(null)}var Hn;Hn=!1;function la(j){return typeof j=="object"&&j!==null&&j.$$typeof===e}function ca(){{if(pi.current){var j=J(pi.current.type);if(j)return`

Check the render method of \``+j+"`."}return""}}function Ac(j){{if(j!==void 0){var fe=j.fileName.replace(/^.*[\\\/]/,""),Oe=j.lineNumber;return`

Check your code at `+fe+":"+Oe+"."}return""}}var ku={};function $t(j){{var fe=ca();if(!fe){var Oe=typeof j=="string"?j:j.displayName||j.name;Oe&&(fe=`

Check the top-level render call using <`+Oe+">.")}return fe}}function z(j,fe){{if(!j._store||j._store.validated||j.key!=null)return;j._store.validated=!0;var Oe=$t(fe);if(ku[Oe])return;ku[Oe]=!0;var rt="";j&&j._owner&&j._owner!==pi.current&&(rt=" It was passed a child from "+J(j._owner.type)+"."),ts(j),L('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',Oe,rt),ts(null)}}function $(j,fe){{if(typeof j!="object")return;if(Qs(j))for(var Oe=0;Oe<j.length;Oe++){var rt=j[Oe];la(rt)&&z(rt,fe)}else if(la(j))j._store&&(j._store.validated=!0);else if(j){var Et=y(j);if(typeof Et=="function"&&Et!==j.entries)for(var gt=Et.call(j),kt;!(kt=gt.next()).done;)la(kt.value)&&z(kt.value,fe)}}}function K(j){{var fe=j.type;if(fe==null||typeof fe=="string")return;var Oe;if(typeof fe=="function")Oe=fe.propTypes;else if(typeof fe=="object"&&(fe.$$typeof===l||fe.$$typeof===f))Oe=fe.propTypes;else return;if(Oe){var rt=J(fe);Hs(Oe,j.props,"prop",rt,j)}else if(fe.PropTypes!==void 0&&!Hn){Hn=!0;var Et=J(fe);L("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",Et||"Unknown")}typeof fe.getDefaultProps=="function"&&!fe.getDefaultProps.isReactClassApproved&&L("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function ie(j){{for(var fe=Object.keys(j.props),Oe=0;Oe<fe.length;Oe++){var rt=fe[Oe];if(rt!=="children"&&rt!=="key"){ts(j),L("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",rt),ts(null);break}}j.ref!==null&&(ts(j),L("Invalid attribute `ref` supplied to `React.Fragment`."),ts(null))}}var re={};function ye(j,fe,Oe,rt,Et,gt){{var kt=ee(j);if(!kt){var je="";(j===void 0||typeof j=="object"&&j!==null&&Object.keys(j).length===0)&&(je+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var oe=Ac(Et);oe?je+=oe:je+=ca();var Me;j===null?Me="null":Qs(j)?Me="array":j!==void 0&&j.$$typeof===e?(Me="<"+(J(j.type)||"Unknown")+" />",je=" Did you accidentally export a JSX literal instead of a component?"):Me=typeof j,L("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",Me,je)}var Xe=Ci(j,fe,Oe,Et,gt);if(Xe==null)return Xe;if(kt){var mi=fe.children;if(mi!==void 0)if(rt)if(Qs(mi)){for(var Sn=0;Sn<mi.length;Sn++)$(mi[Sn],j);Object.freeze&&Object.freeze(mi)}else L("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else $(mi,j)}if(Ss.call(fe,"key")){var as=J(j),Mi=Object.keys(fe).filter(function(Vg){return Vg!=="key"}),rr=Mi.length>0?"{key: someKey, "+Mi.join(": ..., ")+": ...}":"{key: someKey}";if(!re[as+rr]){var Du=Mi.length>0?"{"+Mi.join(": ..., ")+": ...}":"{}";L(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,rr,as,Du,as),re[as+rr]=!0}}return j===i?ie(Xe):K(Xe),Xe}}var Ne=ye;z9.Fragment=i,z9.jsxDEV=Ne})();rle.exports=z9;var en=rle.exports,U9={},lle={exports:{}},dc={},cle={exports:{}},dle={};(function(o){/**
 * @license React
 * scheduler.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var e=!1,t=!1,i=5;function n(Ze,xt){var fi=Ze.length;Ze.push(xt),a(Ze,xt,fi)}function s(Ze){return Ze.length===0?null:Ze[0]}function r(Ze){if(Ze.length===0)return null;var xt=Ze[0],fi=Ze.pop();return fi!==xt&&(Ze[0]=fi,l(Ze,fi,0)),xt}function a(Ze,xt,fi){for(var Si=fi;Si>0;){var Wi=Si-1>>>1,Wn=Ze[Wi];if(c(Wn,xt)>0)Ze[Wi]=xt,Ze[Si]=Wn,Si=Wi;else return}}function l(Ze,xt,fi){for(var Si=fi,Wi=Ze.length,Wn=Wi>>>1;Si<Wn;){var Fn=(Si+1)*2-1,Ci=Ze[Fn],pi=Fn+1,Js=Ze[pi];if(c(Ci,xt)<0)pi<Wi&&c(Js,Ci)<0?(Ze[Si]=Js,Ze[pi]=xt,Si=pi):(Ze[Si]=Ci,Ze[Fn]=xt,Si=Fn);else if(pi<Wi&&c(Js,xt)<0)Ze[Si]=Js,Ze[pi]=xt,Si=pi;else return}}function c(Ze,xt){var fi=Ze.sortIndex-xt.sortIndex;return fi!==0?fi:Ze.id-xt.id}var u=1,f=2,g=3,p=4,_=5;function b(Ze,xt){}var y=typeof performance=="object"&&typeof performance.now=="function";if(y){var S=performance;o.unstable_now=function(){return S.now()}}else{var L=Date,x=L.now();o.unstable_now=function(){return L.now()-x}}var k=1073741823,E=-1,N=250,A=5e3,P=1e4,H=k,ee=[],Q=[],te=1,J=null,Z=g,he=!1,Ce=!1,we=!1,me=typeof setTimeout=="function"?setTimeout:null,pe=typeof clearTimeout=="function"?clearTimeout:null,Fe=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Ye(Ze){for(var xt=s(Q);xt!==null;){if(xt.callback===null)r(Q);else if(xt.startTime<=Ze)r(Q),xt.sortIndex=xt.expirationTime,n(ee,xt);else return;xt=s(Q)}}function Ut(Ze){if(we=!1,Ye(Ze),!Ce)if(s(ee)!==null)Ce=!0,or(dt);else{var xt=s(Q);xt!==null&&es(Ut,xt.startTime-Ze)}}function dt(Ze,xt){Ce=!1,we&&(we=!1,kr()),he=!0;var fi=Z;try{var Si;if(!t)return Ot(Ze,xt)}finally{J=null,Z=fi,he=!1}}function Ot(Ze,xt){var fi=xt;for(Ye(fi),J=s(ee);J!==null&&!e&&!(J.expirationTime>fi&&(!Ze||aa()));){var Si=J.callback;if(typeof Si=="function"){J.callback=null,Z=J.priorityLevel;var Wi=J.expirationTime<=fi,Wn=Si(Wi);fi=o.unstable_now(),typeof Wn=="function"?J.callback=Wn:J===s(ee)&&r(ee),Ye(fi)}else r(ee);J=s(ee)}if(J!==null)return!0;var Fn=s(Q);return Fn!==null&&es(Ut,Fn.startTime-fi),!1}function Bi(Ze,xt){switch(Ze){case u:case f:case g:case p:case _:break;default:Ze=g}var fi=Z;Z=Ze;try{return xt()}finally{Z=fi}}function Qi(Ze){var xt;switch(Z){case u:case f:case g:xt=g;break;default:xt=Z;break}var fi=Z;Z=xt;try{return Ze()}finally{Z=fi}}function Xn(Ze){var xt=Z;return function(){var fi=Z;Z=xt;try{return Ze.apply(this,arguments)}finally{Z=fi}}}function Qn(Ze,xt,fi){var Si=o.unstable_now(),Wi;if(typeof fi=="object"&&fi!==null){var Wn=fi.delay;typeof Wn=="number"&&Wn>0?Wi=Si+Wn:Wi=Si}else Wi=Si;var Fn;switch(Ze){case u:Fn=E;break;case f:Fn=N;break;case _:Fn=H;break;case p:Fn=P;break;case g:default:Fn=A;break}var Ci=Wi+Fn,pi={id:te++,callback:xt,priorityLevel:Ze,startTime:Wi,expirationTime:Ci,sortIndex:-1};return Wi>Si?(pi.sortIndex=Wi,n(Q,pi),s(ee)===null&&pi===s(Q)&&(we?kr():we=!0,es(Ut,Wi-Si))):(pi.sortIndex=Ci,n(ee,pi),!Ce&&!he&&(Ce=!0,or(dt))),pi}function Jn(){}function yn(){!Ce&&!he&&(Ce=!0,or(dt))}function ws(){return s(ee)}function sn(Ze){Ze.callback=null}function wn(){return Z}var Ts=!1,Ns=null,Ss=-1,Os=i,sr=-1;function aa(){var Ze=o.unstable_now()-sr;return!(Ze<Os)}function Hs(){}function Bo(Ze){if(Ze<0||Ze>125){console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported");return}Ze>0?Os=Math.floor(1e3/Ze):Os=i}var Qs=function(){if(Ns!==null){var Ze=o.unstable_now();sr=Ze;var xt=!0,fi=!0;try{fi=Ns(xt,Ze)}finally{fi?Rs():(Ts=!1,Ns=null)}}else Ts=!1},Rs;if(typeof Fe=="function")Rs=function(){Fe(Qs)};else if(typeof MessageChannel<"u"){var xr=new MessageChannel,Vs=xr.port2;xr.port1.onmessage=Qs,Rs=function(){Vs.postMessage(null)}}else Rs=function(){me(Qs,0)};function or(Ze){Ns=Ze,Ts||(Ts=!0,Rs())}function es(Ze,xt){Ss=me(function(){Ze(o.unstable_now())},xt)}function kr(){pe(Ss),Ss=-1}var Wo=Hs,wo=null;o.unstable_IdlePriority=_,o.unstable_ImmediatePriority=u,o.unstable_LowPriority=p,o.unstable_NormalPriority=g,o.unstable_Profiling=wo,o.unstable_UserBlockingPriority=f,o.unstable_cancelCallback=sn,o.unstable_continueExecution=yn,o.unstable_forceFrameRate=Bo,o.unstable_getCurrentPriorityLevel=wn,o.unstable_getFirstCallbackNode=ws,o.unstable_next=Qi,o.unstable_pauseExecution=Jn,o.unstable_requestPaint=Wo,o.unstable_runWithPriority=Bi,o.unstable_scheduleCallback=Qn,o.unstable_shouldYield=aa,o.unstable_wrapCallback=Xn,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)})()})(dle);cle.exports=dle;var _Le=cle.exports;/**
 * @license React
 * react-dom.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var o=Ii,e=_Le,t=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,i=!1;function n(d){i=d}function s(d){if(!i){for(var h=arguments.length,m=new Array(h>1?h-1:0),C=1;C<h;C++)m[C-1]=arguments[C];a("warn",d,m)}}function r(d){if(!i){for(var h=arguments.length,m=new Array(h>1?h-1:0),C=1;C<h;C++)m[C-1]=arguments[C];a("error",d,m)}}function a(d,h,m){{var C=t.ReactDebugCurrentFrame,w=C.getStackAddendum();w!==""&&(h+="%s",m=m.concat([w]));var D=m.map(function(I){return String(I)});D.unshift("Warning: "+h),Function.prototype.apply.call(console[d],console,D)}}var l=0,c=1,u=2,f=3,g=4,p=5,_=6,b=7,y=8,S=9,L=10,x=11,k=12,E=13,N=14,A=15,P=16,H=17,ee=18,Q=19,te=21,J=22,Z=23,he=24,Ce=25,we=!0,me=!1,pe=!1,Fe=!1,Ye=!1,Ut=!0,dt=!1,Ot=!0,Bi=!0,Qi=!0,Xn=!0,Qn=new Set,Jn={},yn={};function ws(d,h){sn(d,h),sn(d+"Capture",h)}function sn(d,h){Jn[d]&&r("EventRegistry: More than one plugin attempted to publish the same registration name, `%s`.",d),Jn[d]=h;{var m=d.toLowerCase();yn[m]=d,d==="onDoubleClick"&&(yn.ondblclick=d)}for(var C=0;C<h.length;C++)Qn.add(h[C])}var wn=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Ts=Object.prototype.hasOwnProperty;function Ns(d){{var h=typeof Symbol=="function"&&Symbol.toStringTag,m=h&&d[Symbol.toStringTag]||d.constructor.name||"Object";return m}}function Ss(d){try{return Os(d),!1}catch{return!0}}function Os(d){return""+d}function sr(d,h){if(Ss(d))return r("The provided `%s` attribute is an unsupported type %s. This value must be coerced to a string before before using it here.",h,Ns(d)),Os(d)}function aa(d){if(Ss(d))return r("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",Ns(d)),Os(d)}function Hs(d,h){if(Ss(d))return r("The provided `%s` prop is an unsupported type %s. This value must be coerced to a string before before using it here.",h,Ns(d)),Os(d)}function Bo(d,h){if(Ss(d))return r("The provided `%s` CSS property is an unsupported type %s. This value must be coerced to a string before before using it here.",h,Ns(d)),Os(d)}function Qs(d){if(Ss(d))return r("The provided HTML markup uses a value of unsupported type %s. This value must be coerced to a string before before using it here.",Ns(d)),Os(d)}function Rs(d){if(Ss(d))return r("Form field values (value, checked, defaultValue, or defaultChecked props) must be strings, not %s. This value must be coerced to a string before before using it here.",Ns(d)),Os(d)}var xr=0,Vs=1,or=2,es=3,kr=4,Wo=5,wo=6,Ze=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",xt=Ze+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",fi=new RegExp("^["+Ze+"]["+xt+"]*$"),Si={},Wi={};function Wn(d){return Ts.call(Wi,d)?!0:Ts.call(Si,d)?!1:fi.test(d)?(Wi[d]=!0,!0):(Si[d]=!0,r("Invalid attribute name: `%s`",d),!1)}function Fn(d,h,m){return h!==null?h.type===xr:m?!1:d.length>2&&(d[0]==="o"||d[0]==="O")&&(d[1]==="n"||d[1]==="N")}function Ci(d,h,m,C){if(m!==null&&m.type===xr)return!1;switch(typeof h){case"function":case"symbol":return!0;case"boolean":{if(C)return!1;if(m!==null)return!m.acceptsBooleans;var w=d.toLowerCase().slice(0,5);return w!=="data-"&&w!=="aria-"}default:return!1}}function pi(d,h,m,C){if(h===null||typeof h>"u"||Ci(d,h,m,C))return!0;if(C)return!1;if(m!==null)switch(m.type){case es:return!h;case kr:return h===!1;case Wo:return isNaN(h);case wo:return isNaN(h)||h<1}return!1}function Js(d){return Hn.hasOwnProperty(d)?Hn[d]:null}function ts(d,h,m,C,w,D,I){this.acceptsBooleans=h===or||h===es||h===kr,this.attributeName=C,this.attributeNamespace=w,this.mustUseProperty=m,this.propertyName=d,this.type=h,this.sanitizeURL=D,this.removeEmptyString=I}var Hn={},la=["children","dangerouslySetInnerHTML","defaultValue","defaultChecked","innerHTML","suppressContentEditableWarning","suppressHydrationWarning","style"];la.forEach(function(d){Hn[d]=new ts(d,xr,!1,d,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(d){var h=d[0],m=d[1];Hn[h]=new ts(h,Vs,!1,m,null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(d){Hn[d]=new ts(d,or,!1,d.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(d){Hn[d]=new ts(d,or,!1,d,null,!1,!1)}),["allowFullScreen","async","autoFocus","autoPlay","controls","default","defer","disabled","disablePictureInPicture","disableRemotePlayback","formNoValidate","hidden","loop","noModule","noValidate","open","playsInline","readOnly","required","reversed","scoped","seamless","itemScope"].forEach(function(d){Hn[d]=new ts(d,es,!1,d.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(d){Hn[d]=new ts(d,es,!0,d,null,!1,!1)}),["capture","download"].forEach(function(d){Hn[d]=new ts(d,kr,!1,d,null,!1,!1)}),["cols","rows","size","span"].forEach(function(d){Hn[d]=new ts(d,wo,!1,d,null,!1,!1)}),["rowSpan","start"].forEach(function(d){Hn[d]=new ts(d,Wo,!1,d.toLowerCase(),null,!1,!1)});var ca=/[\-\:]([a-z])/g,Ac=function(d){return d[1].toUpperCase()};["accent-height","alignment-baseline","arabic-form","baseline-shift","cap-height","clip-path","clip-rule","color-interpolation","color-interpolation-filters","color-profile","color-rendering","dominant-baseline","enable-background","fill-opacity","fill-rule","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","glyph-name","glyph-orientation-horizontal","glyph-orientation-vertical","horiz-adv-x","horiz-origin-x","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","overline-position","overline-thickness","paint-order","panose-1","pointer-events","rendering-intent","shape-rendering","stop-color","stop-opacity","strikethrough-position","strikethrough-thickness","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-rendering","underline-position","underline-thickness","unicode-bidi","unicode-range","units-per-em","v-alphabetic","v-hanging","v-ideographic","v-mathematical","vector-effect","vert-adv-y","vert-origin-x","vert-origin-y","word-spacing","writing-mode","xmlns:xlink","x-height"].forEach(function(d){var h=d.replace(ca,Ac);Hn[h]=new ts(h,Vs,!1,d,null,!1,!1)}),["xlink:actuate","xlink:arcrole","xlink:role","xlink:show","xlink:title","xlink:type"].forEach(function(d){var h=d.replace(ca,Ac);Hn[h]=new ts(h,Vs,!1,d,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(d){var h=d.replace(ca,Ac);Hn[h]=new ts(h,Vs,!1,d,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(d){Hn[d]=new ts(d,Vs,!1,d.toLowerCase(),null,!1,!1)});var ku="xlinkHref";Hn[ku]=new ts("xlinkHref",Vs,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(d){Hn[d]=new ts(d,Vs,!1,d.toLowerCase(),null,!0,!0)});var $t=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*\:/i,z=!1;function $(d){!z&&$t.test(d)&&(z=!0,r("A future version of React will block javascript: URLs as a security precaution. Use event handlers instead if you can. If you need to generate unsafe HTML try using dangerouslySetInnerHTML instead. React was passed %s.",JSON.stringify(d)))}function K(d,h,m,C){if(C.mustUseProperty){var w=C.propertyName;return d[w]}else{sr(m,h),C.sanitizeURL&&$(""+m);var D=C.attributeName,I=null;if(C.type===kr){if(d.hasAttribute(D)){var R=d.getAttribute(D);return R===""?!0:pi(h,m,C,!1)?R:R===""+m?m:R}}else if(d.hasAttribute(D)){if(pi(h,m,C,!1))return d.getAttribute(D);if(C.type===es)return m;I=d.getAttribute(D)}return pi(h,m,C,!1)?I===null?m:I:I===""+m?m:I}}function ie(d,h,m,C){{if(!Wn(h))return;if(!d.hasAttribute(h))return m===void 0?void 0:null;var w=d.getAttribute(h);return sr(m,h),w===""+m?m:w}}function re(d,h,m,C){var w=Js(h);if(!Fn(h,w,C)){if(pi(h,m,w,C)&&(m=null),C||w===null){if(Wn(h)){var D=h;m===null?d.removeAttribute(D):(sr(m,h),d.setAttribute(D,""+m))}return}var I=w.mustUseProperty;if(I){var R=w.propertyName;if(m===null){var O=w.type;d[R]=O===es?!1:""}else d[R]=m;return}var U=w.attributeName,q=w.attributeNamespace;if(m===null)d.removeAttribute(U);else{var ce=w.type,ae;ce===es||ce===kr&&m===!0?ae="":(sr(m,U),ae=""+m,w.sanitizeURL&&$(ae.toString())),q?d.setAttributeNS(q,U,ae):d.setAttribute(U,ae)}}}var ye=Symbol.for("react.element"),Ne=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),fe=Symbol.for("react.strict_mode"),Oe=Symbol.for("react.profiler"),rt=Symbol.for("react.provider"),Et=Symbol.for("react.context"),gt=Symbol.for("react.forward_ref"),kt=Symbol.for("react.suspense"),je=Symbol.for("react.suspense_list"),oe=Symbol.for("react.memo"),Me=Symbol.for("react.lazy"),Xe=Symbol.for("react.scope"),mi=Symbol.for("react.debug_trace_mode"),Sn=Symbol.for("react.offscreen"),as=Symbol.for("react.legacy_hidden"),Mi=Symbol.for("react.cache"),rr=Symbol.for("react.tracing_marker"),Du=Symbol.iterator,Vg="@@iterator";function Eu(d){if(d===null||typeof d!="object")return null;var h=Du&&d[Du]||d[Vg];return typeof h=="function"?h:null}var zi=Object.assign,d_=0,zg,g0,p0,m0,_0,v0,b0;function C0(){}C0.__reactDisabledLog=!0;function PI(){{if(d_===0){zg=console.log,g0=console.info,p0=console.warn,m0=console.error,_0=console.group,v0=console.groupCollapsed,b0=console.groupEnd;var d={configurable:!0,enumerable:!0,value:C0,writable:!0};Object.defineProperties(console,{info:d,log:d,warn:d,error:d,group:d,groupCollapsed:d,groupEnd:d})}d_++}}function x5(){{if(d_--,d_===0){var d={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:zi({},d,{value:zg}),info:zi({},d,{value:g0}),warn:zi({},d,{value:p0}),error:zi({},d,{value:m0}),group:zi({},d,{value:_0}),groupCollapsed:zi({},d,{value:v0}),groupEnd:zi({},d,{value:b0})})}d_<0&&r("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var y0=t.ReactCurrentDispatcher,u_;function Pc(d,h,m){{if(u_===void 0)try{throw Error()}catch(w){var C=w.stack.trim().match(/\n( *(at )?)/);u_=C&&C[1]||""}return`
`+u_+d}}var Ug=!1,$g;{var YC=typeof WeakMap=="function"?WeakMap:Map;$g=new YC}function w0(d,h){if(!d||Ug)return"";{var m=$g.get(d);if(m!==void 0)return m}var C;Ug=!0;var w=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var D;D=y0.current,y0.current=null,PI();try{if(h){var I=function(){throw Error()};if(Object.defineProperty(I.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(I,[])}catch(Te){C=Te}Reflect.construct(d,[],I)}else{try{I.call()}catch(Te){C=Te}d.call(I.prototype)}}else{try{throw Error()}catch(Te){C=Te}d()}}catch(Te){if(Te&&C&&typeof Te.stack=="string"){for(var R=Te.stack.split(`
`),O=C.stack.split(`
`),U=R.length-1,q=O.length-1;U>=1&&q>=0&&R[U]!==O[q];)q--;for(;U>=1&&q>=0;U--,q--)if(R[U]!==O[q]){if(U!==1||q!==1)do if(U--,q--,q<0||R[U]!==O[q]){var ce=`
`+R[U].replace(" at new "," at ");return d.displayName&&ce.includes("<anonymous>")&&(ce=ce.replace("<anonymous>",d.displayName)),typeof d=="function"&&$g.set(d,ce),ce}while(U>=1&&q>=0);break}}}finally{Ug=!1,y0.current=D,x5(),Error.prepareStackTrace=w}var ae=d?d.displayName||d.name:"",ke=ae?Pc(ae):"";return typeof d=="function"&&$g.set(d,ke),ke}function OI(d,h,m){return w0(d,!0)}function S0(d,h,m){return w0(d,!1)}function k5(d){var h=d.prototype;return!!(h&&h.isReactComponent)}function jg(d,h,m){if(d==null)return"";if(typeof d=="function")return w0(d,k5(d));if(typeof d=="string")return Pc(d);switch(d){case kt:return Pc("Suspense");case je:return Pc("SuspenseList")}if(typeof d=="object")switch(d.$$typeof){case gt:return S0(d.render);case oe:return jg(d.type,h,m);case Me:{var C=d,w=C._payload,D=C._init;try{return jg(D(w),h,m)}catch{}}}return""}function FI(d){switch(d._debugOwner&&d._debugOwner.type,d._debugSource,d.tag){case p:return Pc(d.type);case P:return Pc("Lazy");case E:return Pc("Suspense");case Q:return Pc("SuspenseList");case l:case u:case A:return S0(d.type);case x:return S0(d.type.render);case c:return OI(d.type);default:return""}}function L0(d){try{var h="",m=d;do h+=FI(m),m=m.return;while(m);return h}catch(C){return`
Error generating stack: `+C.message+`
`+C.stack}}function ZC(d,h,m){var C=d.displayName;if(C)return C;var w=h.displayName||h.name||"";return w!==""?m+"("+w+")":m}function BI(d){return d.displayName||"Context"}function on(d){if(d==null)return null;if(typeof d.tag=="number"&&r("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case j:return"Fragment";case Ne:return"Portal";case Oe:return"Profiler";case fe:return"StrictMode";case kt:return"Suspense";case je:return"SuspenseList"}if(typeof d=="object")switch(d.$$typeof){case Et:var h=d;return BI(h)+".Consumer";case rt:var m=d;return BI(m._context)+".Provider";case gt:return ZC(d,d.render,"ForwardRef");case oe:var C=d.displayName||null;return C!==null?C:on(d.type)||"Memo";case Me:{var w=d,D=w._payload,I=w._init;try{return on(I(D))}catch{return null}}}return null}function x0(d,h,m){var C=h.displayName||h.name||"";return d.displayName||(C!==""?m+"("+C+")":m)}function k0(d){return d.displayName||"Context"}function Ei(d){var h=d.tag,m=d.type;switch(h){case he:return"Cache";case S:var C=m;return k0(C)+".Consumer";case L:var w=m;return k0(w._context)+".Provider";case ee:return"DehydratedFragment";case x:return x0(m,m.render,"ForwardRef");case b:return"Fragment";case p:return m;case g:return"Portal";case f:return"Root";case _:return"Text";case P:return on(m);case y:return m===fe?"StrictMode":"Mode";case J:return"Offscreen";case k:return"Profiler";case te:return"Scope";case E:return"Suspense";case Q:return"SuspenseList";case Ce:return"TracingMarker";case c:case l:case H:case u:case N:case A:if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m;break}return null}var WI=t.ReactDebugCurrentFrame,da=null,h_=!1;function qg(){{if(da===null)return null;var d=da._debugOwner;if(d!==null&&typeof d<"u")return Ei(d)}return null}function HI(){return da===null?"":L0(da)}function ar(){WI.getCurrentStack=null,da=null,h_=!1}function zs(d){WI.getCurrentStack=d===null?null:HI,da=d,h_=!1}function VI(){return da}function Jl(d){h_=d}function fl(d){return""+d}function Iu(d){switch(typeof d){case"boolean":case"number":case"string":case"undefined":return d;case"object":return Rs(d),d;default:return""}}var D5={button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0};function XC(d,h){D5[h.type]||h.onChange||h.onInput||h.readOnly||h.disabled||h.value==null||r("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`."),h.onChange||h.readOnly||h.disabled||h.checked==null||r("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")}function f_(d){var h=d.type,m=d.nodeName;return m&&m.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function zI(d){return d._valueTracker}function Kg(d){d._valueTracker=null}function UI(d){var h="";return d&&(f_(d)?h=d.checked?"true":"false":h=d.value),h}function $I(d){var h=f_(d)?"checked":"value",m=Object.getOwnPropertyDescriptor(d.constructor.prototype,h);Rs(d[h]);var C=""+d[h];if(!(d.hasOwnProperty(h)||typeof m>"u"||typeof m.get!="function"||typeof m.set!="function")){var w=m.get,D=m.set;Object.defineProperty(d,h,{configurable:!0,get:function(){return w.call(this)},set:function(R){Rs(R),C=""+R,D.call(this,R)}}),Object.defineProperty(d,h,{enumerable:m.enumerable});var I={getValue:function(){return C},setValue:function(R){Rs(R),C=""+R},stopTracking:function(){Kg(d),delete d[h]}};return I}}function Zh(d){zI(d)||(d._valueTracker=$I(d))}function QC(d){if(!d)return!1;var h=zI(d);if(!h)return!0;var m=h.getValue(),C=UI(d);return C!==m?(h.setValue(C),!0):!1}function Gg(d){if(d=d||(typeof document<"u"?document:void 0),typeof d>"u")return null;try{return d.activeElement||d.body}catch{return d.body}}var JC=!1,jI=!1,qI=!1,KI=!1;function GI(d){var h=d.type==="checkbox"||d.type==="radio";return h?d.checked!=null:d.value!=null}function F(d,h){var m=d,C=h.checked,w=zi({},h,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:C??m._wrapperState.initialChecked});return w}function ne(d,h){XC("input",h),h.checked!==void 0&&h.defaultChecked!==void 0&&!jI&&(r("%s contains an input of type %s with both checked and defaultChecked props. Input elements must be either controlled or uncontrolled (specify either the checked prop, or the defaultChecked prop, but not both). Decide between using a controlled or uncontrolled input element and remove one of these props. More info: https://reactjs.org/link/controlled-components",qg()||"A component",h.type),jI=!0),h.value!==void 0&&h.defaultValue!==void 0&&!JC&&(r("%s contains an input of type %s with both value and defaultValue props. Input elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled input element and remove one of these props. More info: https://reactjs.org/link/controlled-components",qg()||"A component",h.type),JC=!0);var m=d,C=h.defaultValue==null?"":h.defaultValue;m._wrapperState={initialChecked:h.checked!=null?h.checked:h.defaultChecked,initialValue:Iu(h.value!=null?h.value:C),controlled:GI(h)}}function Ie(d,h){var m=d,C=h.checked;C!=null&&re(m,"checked",C,!1)}function Ae(d,h){var m=d;{var C=GI(h);!m._wrapperState.controlled&&C&&!KI&&(r("A component is changing an uncontrolled input to be controlled. This is likely caused by the value changing from undefined to a defined value, which should not happen. Decide between using a controlled or uncontrolled input element for the lifetime of the component. More info: https://reactjs.org/link/controlled-components"),KI=!0),m._wrapperState.controlled&&!C&&!qI&&(r("A component is changing a controlled input to be uncontrolled. This is likely caused by the value changing from a defined to undefined, which should not happen. Decide between using a controlled or uncontrolled input element for the lifetime of the component. More info: https://reactjs.org/link/controlled-components"),qI=!0)}Ie(d,h);var w=Iu(h.value),D=h.type;if(w!=null)D==="number"?(w===0&&m.value===""||m.value!=w)&&(m.value=fl(w)):m.value!==fl(w)&&(m.value=fl(w));else if(D==="submit"||D==="reset"){m.removeAttribute("value");return}h.hasOwnProperty("value")?_i(m,h.type,w):h.hasOwnProperty("defaultValue")&&_i(m,h.type,Iu(h.defaultValue)),h.checked==null&&h.defaultChecked!=null&&(m.defaultChecked=!!h.defaultChecked)}function ct(d,h,m){var C=d;if(h.hasOwnProperty("value")||h.hasOwnProperty("defaultValue")){var w=h.type,D=w==="submit"||w==="reset";if(D&&(h.value===void 0||h.value===null))return;var I=fl(C._wrapperState.initialValue);m||I!==C.value&&(C.value=I),C.defaultValue=I}var R=C.name;R!==""&&(C.name=""),C.defaultChecked=!C.defaultChecked,C.defaultChecked=!!C._wrapperState.initialChecked,R!==""&&(C.name=R)}function ri(d,h){var m=d;Ae(m,h),Rt(m,h)}function Rt(d,h){var m=h.name;if(h.type==="radio"&&m!=null){for(var C=d;C.parentNode;)C=C.parentNode;sr(m,"name");for(var w=C.querySelectorAll("input[name="+JSON.stringify(""+m)+'][type="radio"]'),D=0;D<w.length;D++){var I=w[D];if(!(I===d||I.form!==d.form)){var R=AT(I);if(!R)throw new Error("ReactDOMInput: Mixing React and non-React radio inputs with the same `name` is not supported.");QC(I),Ae(I,R)}}}}function _i(d,h,m){(h!=="number"||Gg(d.ownerDocument)!==d)&&(m==null?d.defaultValue=fl(d._wrapperState.initialValue):d.defaultValue!==fl(m)&&(d.defaultValue=fl(m)))}var ji=!1,Vn=!1,ps=!1;function ms(d,h){h.value==null&&(typeof h.children=="object"&&h.children!==null?o.Children.forEach(h.children,function(m){m!=null&&(typeof m=="string"||typeof m=="number"||Vn||(Vn=!0,r("Cannot infer the option value of complex children. Pass a `value` prop or use a plain string as children to <option>.")))}):h.dangerouslySetInnerHTML!=null&&(ps||(ps=!0,r("Pass a `value` prop if you set dangerouslyInnerHTML so React knows which value should be selected.")))),h.selected!=null&&!ji&&(r("Use the `defaultValue` or `value` props on <select> instead of setting `selected` on <option>."),ji=!0)}function Ms(d,h){h.value!=null&&d.setAttribute("value",fl(Iu(h.value)))}var eo=Array.isArray;function Ln(d){return eo(d)}var Yg;Yg=!1;function ey(){var d=qg();return d?`

Check the render method of \``+d+"`.":""}var D0=["value","defaultValue"];function E5(d){{XC("select",d);for(var h=0;h<D0.length;h++){var m=D0[h];if(d[m]!=null){var C=Ln(d[m]);d.multiple&&!C?r("The `%s` prop supplied to <select> must be an array if `multiple` is true.%s",m,ey()):!d.multiple&&C&&r("The `%s` prop supplied to <select> must be a scalar value if `multiple` is false.%s",m,ey())}}}}function Xh(d,h,m,C){var w=d.options;if(h){for(var D=m,I={},R=0;R<D.length;R++)I["$"+D[R]]=!0;for(var O=0;O<w.length;O++){var U=I.hasOwnProperty("$"+w[O].value);w[O].selected!==U&&(w[O].selected=U),U&&C&&(w[O].defaultSelected=!0)}}else{for(var q=fl(Iu(m)),ce=null,ae=0;ae<w.length;ae++){if(w[ae].value===q){w[ae].selected=!0,C&&(w[ae].defaultSelected=!0);return}ce===null&&!w[ae].disabled&&(ce=w[ae])}ce!==null&&(ce.selected=!0)}}function E0(d,h){return zi({},h,{value:void 0})}function I0(d,h){var m=d;E5(h),m._wrapperState={wasMultiple:!!h.multiple},h.value!==void 0&&h.defaultValue!==void 0&&!Yg&&(r("Select elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled select element and remove one of these props. More info: https://reactjs.org/link/controlled-components"),Yg=!0)}function I5(d,h){var m=d;m.multiple=!!h.multiple;var C=h.value;C!=null?Xh(m,!!h.multiple,C,!1):h.defaultValue!=null&&Xh(m,!!h.multiple,h.defaultValue,!0)}function Qme(d,h){var m=d,C=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!h.multiple;var w=h.value;w!=null?Xh(m,!!h.multiple,w,!1):C!==!!h.multiple&&(h.defaultValue!=null?Xh(m,!!h.multiple,h.defaultValue,!0):Xh(m,!!h.multiple,h.multiple?[]:"",!1))}function Jme(d,h){var m=d,C=h.value;C!=null&&Xh(m,!!h.multiple,C,!1)}var _Z=!1;function T5(d,h){var m=d;if(h.dangerouslySetInnerHTML!=null)throw new Error("`dangerouslySetInnerHTML` does not make sense on <textarea>.");var C=zi({},h,{value:void 0,defaultValue:void 0,children:fl(m._wrapperState.initialValue)});return C}function vZ(d,h){var m=d;XC("textarea",h),h.value!==void 0&&h.defaultValue!==void 0&&!_Z&&(r("%s contains a textarea with both value and defaultValue props. Textarea elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled textarea and remove one of these props. More info: https://reactjs.org/link/controlled-components",qg()||"A component"),_Z=!0);var C=h.value;if(C==null){var w=h.children,D=h.defaultValue;if(w!=null){r("Use the `defaultValue` or `value` props instead of setting children on <textarea>.");{if(D!=null)throw new Error("If you supply `defaultValue` on a <textarea>, do not pass children.");if(Ln(w)){if(w.length>1)throw new Error("<textarea> can only have at most one child.");w=w[0]}D=w}}D==null&&(D=""),C=D}m._wrapperState={initialValue:Iu(C)}}function bZ(d,h){var m=d,C=Iu(h.value),w=Iu(h.defaultValue);if(C!=null){var D=fl(C);D!==m.value&&(m.value=D),h.defaultValue==null&&m.defaultValue!==D&&(m.defaultValue=D)}w!=null&&(m.defaultValue=fl(w))}function CZ(d,h){var m=d,C=m.textContent;C===m._wrapperState.initialValue&&C!==""&&C!==null&&(m.value=C)}function e_e(d,h){bZ(d,h)}var Qh="http://www.w3.org/1999/xhtml",t_e="http://www.w3.org/1998/Math/MathML",N5="http://www.w3.org/2000/svg";function R5(d){switch(d){case"svg":return N5;case"math":return t_e;default:return Qh}}function M5(d,h){return d==null||d===Qh?R5(h):d===N5&&h==="foreignObject"?Qh:d}var i_e=function(d){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(h,m,C,w){MSApp.execUnsafeLocalFunction(function(){return d(h,m,C,w)})}:d},YI,yZ=i_e(function(d,h){if(d.namespaceURI===N5&&!("innerHTML"in d)){YI=YI||document.createElement("div"),YI.innerHTML="<svg>"+h.valueOf().toString()+"</svg>";for(var m=YI.firstChild;d.firstChild;)d.removeChild(d.firstChild);for(;m.firstChild;)d.appendChild(m.firstChild);return}d.innerHTML=h}),gl=1,Jh=3,So=8,ef=9,A5=11,ZI=function(d,h){if(h){var m=d.firstChild;if(m&&m===d.lastChild&&m.nodeType===Jh){m.nodeValue=h;return}}d.textContent=h},n_e={animation:["animationDelay","animationDirection","animationDuration","animationFillMode","animationIterationCount","animationName","animationPlayState","animationTimingFunction"],background:["backgroundAttachment","backgroundClip","backgroundColor","backgroundImage","backgroundOrigin","backgroundPositionX","backgroundPositionY","backgroundRepeat","backgroundSize"],backgroundPosition:["backgroundPositionX","backgroundPositionY"],border:["borderBottomColor","borderBottomStyle","borderBottomWidth","borderImageOutset","borderImageRepeat","borderImageSlice","borderImageSource","borderImageWidth","borderLeftColor","borderLeftStyle","borderLeftWidth","borderRightColor","borderRightStyle","borderRightWidth","borderTopColor","borderTopStyle","borderTopWidth"],borderBlockEnd:["borderBlockEndColor","borderBlockEndStyle","borderBlockEndWidth"],borderBlockStart:["borderBlockStartColor","borderBlockStartStyle","borderBlockStartWidth"],borderBottom:["borderBottomColor","borderBottomStyle","borderBottomWidth"],borderColor:["borderBottomColor","borderLeftColor","borderRightColor","borderTopColor"],borderImage:["borderImageOutset","borderImageRepeat","borderImageSlice","borderImageSource","borderImageWidth"],borderInlineEnd:["borderInlineEndColor","borderInlineEndStyle","borderInlineEndWidth"],borderInlineStart:["borderInlineStartColor","borderInlineStartStyle","borderInlineStartWidth"],borderLeft:["borderLeftColor","borderLeftStyle","borderLeftWidth"],borderRadius:["borderBottomLeftRadius","borderBottomRightRadius","borderTopLeftRadius","borderTopRightRadius"],borderRight:["borderRightColor","borderRightStyle","borderRightWidth"],borderStyle:["borderBottomStyle","borderLeftStyle","borderRightStyle","borderTopStyle"],borderTop:["borderTopColor","borderTopStyle","borderTopWidth"],borderWidth:["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth"],columnRule:["columnRuleColor","columnRuleStyle","columnRuleWidth"],columns:["columnCount","columnWidth"],flex:["flexBasis","flexGrow","flexShrink"],flexFlow:["flexDirection","flexWrap"],font:["fontFamily","fontFeatureSettings","fontKerning","fontLanguageOverride","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontVariantAlternates","fontVariantCaps","fontVariantEastAsian","fontVariantLigatures","fontVariantNumeric","fontVariantPosition","fontWeight","lineHeight"],fontVariant:["fontVariantAlternates","fontVariantCaps","fontVariantEastAsian","fontVariantLigatures","fontVariantNumeric","fontVariantPosition"],gap:["columnGap","rowGap"],grid:["gridAutoColumns","gridAutoFlow","gridAutoRows","gridTemplateAreas","gridTemplateColumns","gridTemplateRows"],gridArea:["gridColumnEnd","gridColumnStart","gridRowEnd","gridRowStart"],gridColumn:["gridColumnEnd","gridColumnStart"],gridColumnGap:["columnGap"],gridGap:["columnGap","rowGap"],gridRow:["gridRowEnd","gridRowStart"],gridRowGap:["rowGap"],gridTemplate:["gridTemplateAreas","gridTemplateColumns","gridTemplateRows"],listStyle:["listStyleImage","listStylePosition","listStyleType"],margin:["marginBottom","marginLeft","marginRight","marginTop"],marker:["markerEnd","markerMid","markerStart"],mask:["maskClip","maskComposite","maskImage","maskMode","maskOrigin","maskPositionX","maskPositionY","maskRepeat","maskSize"],maskPosition:["maskPositionX","maskPositionY"],outline:["outlineColor","outlineStyle","outlineWidth"],overflow:["overflowX","overflowY"],padding:["paddingBottom","paddingLeft","paddingRight","paddingTop"],placeContent:["alignContent","justifyContent"],placeItems:["alignItems","justifyItems"],placeSelf:["alignSelf","justifySelf"],textDecoration:["textDecorationColor","textDecorationLine","textDecorationStyle"],textEmphasis:["textEmphasisColor","textEmphasisStyle"],transition:["transitionDelay","transitionDuration","transitionProperty","transitionTimingFunction"],wordWrap:["overflowWrap"]},T0={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};function s_e(d,h){return d+h.charAt(0).toUpperCase()+h.substring(1)}var o_e=["Webkit","ms","Moz","O"];Object.keys(T0).forEach(function(d){o_e.forEach(function(h){T0[s_e(h,d)]=T0[d]})});function P5(d,h,m){var C=h==null||typeof h=="boolean"||h==="";return C?"":!m&&typeof h=="number"&&h!==0&&!(T0.hasOwnProperty(d)&&T0[d])?h+"px":(Bo(h,d),(""+h).trim())}var r_e=/([A-Z])/g,a_e=/^ms-/;function l_e(d){return d.replace(r_e,"-$1").toLowerCase().replace(a_e,"-ms-")}var wZ=function(){};{var c_e=/^(?:webkit|moz|o)[A-Z]/,d_e=/^-ms-/,u_e=/-(.)/g,SZ=/;\s*$/,ty={},O5={},LZ=!1,xZ=!1,h_e=function(d){return d.replace(u_e,function(h,m){return m.toUpperCase()})},f_e=function(d){ty.hasOwnProperty(d)&&ty[d]||(ty[d]=!0,r("Unsupported style property %s. Did you mean %s?",d,h_e(d.replace(d_e,"ms-"))))},g_e=function(d){ty.hasOwnProperty(d)&&ty[d]||(ty[d]=!0,r("Unsupported vendor-prefixed style property %s. Did you mean %s?",d,d.charAt(0).toUpperCase()+d.slice(1)))},p_e=function(d,h){O5.hasOwnProperty(h)&&O5[h]||(O5[h]=!0,r(`Style property values shouldn't contain a semicolon. Try "%s: %s" instead.`,d,h.replace(SZ,"")))},m_e=function(d,h){LZ||(LZ=!0,r("`NaN` is an invalid value for the `%s` css style property.",d))},__e=function(d,h){xZ||(xZ=!0,r("`Infinity` is an invalid value for the `%s` css style property.",d))};wZ=function(d,h){d.indexOf("-")>-1?f_e(d):c_e.test(d)?g_e(d):SZ.test(h)&&p_e(d,h),typeof h=="number"&&(isNaN(h)?m_e(d,h):isFinite(h)||__e(d,h))}}var v_e=wZ;function b_e(d){{var h="",m="";for(var C in d)if(d.hasOwnProperty(C)){var w=d[C];if(w!=null){var D=C.indexOf("--")===0;h+=m+(D?C:l_e(C))+":",h+=P5(C,w,D),m=";"}}return h||null}}function kZ(d,h){var m=d.style;for(var C in h)if(h.hasOwnProperty(C)){var w=C.indexOf("--")===0;w||v_e(C,h[C]);var D=P5(C,h[C],w);C==="float"&&(C="cssFloat"),w?m.setProperty(C,D):m[C]=D}}function C_e(d){return d==null||typeof d=="boolean"||d===""}function DZ(d){var h={};for(var m in d)for(var C=n_e[m]||[m],w=0;w<C.length;w++)h[C[w]]=m;return h}function y_e(d,h){{if(!h)return;var m=DZ(d),C=DZ(h),w={};for(var D in m){var I=m[D],R=C[D];if(R&&I!==R){var O=I+","+R;if(w[O])continue;w[O]=!0,r("%s a style property during rerender (%s) when a conflicting property is set (%s) can lead to styling bugs. To avoid this, don't mix shorthand and non-shorthand properties for the same value; instead, replace the shorthand with separate values.",C_e(d[I])?"Removing":"Updating",I,R)}}}}var w_e={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},S_e=zi({menuitem:!0},w_e),L_e="__html";function F5(d,h){if(h){if(S_e[d]&&(h.children!=null||h.dangerouslySetInnerHTML!=null))throw new Error(d+" is a void element tag and must neither have `children` nor use `dangerouslySetInnerHTML`.");if(h.dangerouslySetInnerHTML!=null){if(h.children!=null)throw new Error("Can only set one of `children` or `props.dangerouslySetInnerHTML`.");if(typeof h.dangerouslySetInnerHTML!="object"||!(L_e in h.dangerouslySetInnerHTML))throw new Error("`props.dangerouslySetInnerHTML` must be in the form `{__html: ...}`. Please visit https://reactjs.org/link/dangerously-set-inner-html for more information.")}if(!h.suppressContentEditableWarning&&h.contentEditable&&h.children!=null&&r("A component is `contentEditable` and contains `children` managed by React. It is now your responsibility to guarantee that none of those nodes are unexpectedly modified or duplicated. This is probably not intentional."),h.style!=null&&typeof h.style!="object")throw new Error("The `style` prop expects a mapping from style properties to values, not a string. For example, style={{marginRight: spacing + 'em'}} when using JSX.")}}function g_(d,h){if(d.indexOf("-")===-1)return typeof h.is=="string";switch(d){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var XI={accept:"accept",acceptcharset:"acceptCharset","accept-charset":"acceptCharset",accesskey:"accessKey",action:"action",allowfullscreen:"allowFullScreen",alt:"alt",as:"as",async:"async",autocapitalize:"autoCapitalize",autocomplete:"autoComplete",autocorrect:"autoCorrect",autofocus:"autoFocus",autoplay:"autoPlay",autosave:"autoSave",capture:"capture",cellpadding:"cellPadding",cellspacing:"cellSpacing",challenge:"challenge",charset:"charSet",checked:"checked",children:"children",cite:"cite",class:"className",classid:"classID",classname:"className",cols:"cols",colspan:"colSpan",content:"content",contenteditable:"contentEditable",contextmenu:"contextMenu",controls:"controls",controlslist:"controlsList",coords:"coords",crossorigin:"crossOrigin",dangerouslysetinnerhtml:"dangerouslySetInnerHTML",data:"data",datetime:"dateTime",default:"default",defaultchecked:"defaultChecked",defaultvalue:"defaultValue",defer:"defer",dir:"dir",disabled:"disabled",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback",download:"download",draggable:"draggable",enctype:"encType",enterkeyhint:"enterKeyHint",for:"htmlFor",form:"form",formmethod:"formMethod",formaction:"formAction",formenctype:"formEncType",formnovalidate:"formNoValidate",formtarget:"formTarget",frameborder:"frameBorder",headers:"headers",height:"height",hidden:"hidden",high:"high",href:"href",hreflang:"hrefLang",htmlfor:"htmlFor",httpequiv:"httpEquiv","http-equiv":"httpEquiv",icon:"icon",id:"id",imagesizes:"imageSizes",imagesrcset:"imageSrcSet",innerhtml:"innerHTML",inputmode:"inputMode",integrity:"integrity",is:"is",itemid:"itemID",itemprop:"itemProp",itemref:"itemRef",itemscope:"itemScope",itemtype:"itemType",keyparams:"keyParams",keytype:"keyType",kind:"kind",label:"label",lang:"lang",list:"list",loop:"loop",low:"low",manifest:"manifest",marginwidth:"marginWidth",marginheight:"marginHeight",max:"max",maxlength:"maxLength",media:"media",mediagroup:"mediaGroup",method:"method",min:"min",minlength:"minLength",multiple:"multiple",muted:"muted",name:"name",nomodule:"noModule",nonce:"nonce",novalidate:"noValidate",open:"open",optimum:"optimum",pattern:"pattern",placeholder:"placeholder",playsinline:"playsInline",poster:"poster",preload:"preload",profile:"profile",radiogroup:"radioGroup",readonly:"readOnly",referrerpolicy:"referrerPolicy",rel:"rel",required:"required",reversed:"reversed",role:"role",rows:"rows",rowspan:"rowSpan",sandbox:"sandbox",scope:"scope",scoped:"scoped",scrolling:"scrolling",seamless:"seamless",selected:"selected",shape:"shape",size:"size",sizes:"sizes",span:"span",spellcheck:"spellCheck",src:"src",srcdoc:"srcDoc",srclang:"srcLang",srcset:"srcSet",start:"start",step:"step",style:"style",summary:"summary",tabindex:"tabIndex",target:"target",title:"title",type:"type",usemap:"useMap",value:"value",width:"width",wmode:"wmode",wrap:"wrap",about:"about",accentheight:"accentHeight","accent-height":"accentHeight",accumulate:"accumulate",additive:"additive",alignmentbaseline:"alignmentBaseline","alignment-baseline":"alignmentBaseline",allowreorder:"allowReorder",alphabetic:"alphabetic",amplitude:"amplitude",arabicform:"arabicForm","arabic-form":"arabicForm",ascent:"ascent",attributename:"attributeName",attributetype:"attributeType",autoreverse:"autoReverse",azimuth:"azimuth",basefrequency:"baseFrequency",baselineshift:"baselineShift","baseline-shift":"baselineShift",baseprofile:"baseProfile",bbox:"bbox",begin:"begin",bias:"bias",by:"by",calcmode:"calcMode",capheight:"capHeight","cap-height":"capHeight",clip:"clip",clippath:"clipPath","clip-path":"clipPath",clippathunits:"clipPathUnits",cliprule:"clipRule","clip-rule":"clipRule",color:"color",colorinterpolation:"colorInterpolation","color-interpolation":"colorInterpolation",colorinterpolationfilters:"colorInterpolationFilters","color-interpolation-filters":"colorInterpolationFilters",colorprofile:"colorProfile","color-profile":"colorProfile",colorrendering:"colorRendering","color-rendering":"colorRendering",contentscripttype:"contentScriptType",contentstyletype:"contentStyleType",cursor:"cursor",cx:"cx",cy:"cy",d:"d",datatype:"datatype",decelerate:"decelerate",descent:"descent",diffuseconstant:"diffuseConstant",direction:"direction",display:"display",divisor:"divisor",dominantbaseline:"dominantBaseline","dominant-baseline":"dominantBaseline",dur:"dur",dx:"dx",dy:"dy",edgemode:"edgeMode",elevation:"elevation",enablebackground:"enableBackground","enable-background":"enableBackground",end:"end",exponent:"exponent",externalresourcesrequired:"externalResourcesRequired",fill:"fill",fillopacity:"fillOpacity","fill-opacity":"fillOpacity",fillrule:"fillRule","fill-rule":"fillRule",filter:"filter",filterres:"filterRes",filterunits:"filterUnits",floodopacity:"floodOpacity","flood-opacity":"floodOpacity",floodcolor:"floodColor","flood-color":"floodColor",focusable:"focusable",fontfamily:"fontFamily","font-family":"fontFamily",fontsize:"fontSize","font-size":"fontSize",fontsizeadjust:"fontSizeAdjust","font-size-adjust":"fontSizeAdjust",fontstretch:"fontStretch","font-stretch":"fontStretch",fontstyle:"fontStyle","font-style":"fontStyle",fontvariant:"fontVariant","font-variant":"fontVariant",fontweight:"fontWeight","font-weight":"fontWeight",format:"format",from:"from",fx:"fx",fy:"fy",g1:"g1",g2:"g2",glyphname:"glyphName","glyph-name":"glyphName",glyphorientationhorizontal:"glyphOrientationHorizontal","glyph-orientation-horizontal":"glyphOrientationHorizontal",glyphorientationvertical:"glyphOrientationVertical","glyph-orientation-vertical":"glyphOrientationVertical",glyphref:"glyphRef",gradienttransform:"gradientTransform",gradientunits:"gradientUnits",hanging:"hanging",horizadvx:"horizAdvX","horiz-adv-x":"horizAdvX",horizoriginx:"horizOriginX","horiz-origin-x":"horizOriginX",ideographic:"ideographic",imagerendering:"imageRendering","image-rendering":"imageRendering",in2:"in2",in:"in",inlist:"inlist",intercept:"intercept",k1:"k1",k2:"k2",k3:"k3",k4:"k4",k:"k",kernelmatrix:"kernelMatrix",kernelunitlength:"kernelUnitLength",kerning:"kerning",keypoints:"keyPoints",keysplines:"keySplines",keytimes:"keyTimes",lengthadjust:"lengthAdjust",letterspacing:"letterSpacing","letter-spacing":"letterSpacing",lightingcolor:"lightingColor","lighting-color":"lightingColor",limitingconeangle:"limitingConeAngle",local:"local",markerend:"markerEnd","marker-end":"markerEnd",markerheight:"markerHeight",markermid:"markerMid","marker-mid":"markerMid",markerstart:"markerStart","marker-start":"markerStart",markerunits:"markerUnits",markerwidth:"markerWidth",mask:"mask",maskcontentunits:"maskContentUnits",maskunits:"maskUnits",mathematical:"mathematical",mode:"mode",numoctaves:"numOctaves",offset:"offset",opacity:"opacity",operator:"operator",order:"order",orient:"orient",orientation:"orientation",origin:"origin",overflow:"overflow",overlineposition:"overlinePosition","overline-position":"overlinePosition",overlinethickness:"overlineThickness","overline-thickness":"overlineThickness",paintorder:"paintOrder","paint-order":"paintOrder",panose1:"panose1","panose-1":"panose1",pathlength:"pathLength",patterncontentunits:"patternContentUnits",patterntransform:"patternTransform",patternunits:"patternUnits",pointerevents:"pointerEvents","pointer-events":"pointerEvents",points:"points",pointsatx:"pointsAtX",pointsaty:"pointsAtY",pointsatz:"pointsAtZ",prefix:"prefix",preservealpha:"preserveAlpha",preserveaspectratio:"preserveAspectRatio",primitiveunits:"primitiveUnits",property:"property",r:"r",radius:"radius",refx:"refX",refy:"refY",renderingintent:"renderingIntent","rendering-intent":"renderingIntent",repeatcount:"repeatCount",repeatdur:"repeatDur",requiredextensions:"requiredExtensions",requiredfeatures:"requiredFeatures",resource:"resource",restart:"restart",result:"result",results:"results",rotate:"rotate",rx:"rx",ry:"ry",scale:"scale",security:"security",seed:"seed",shaperendering:"shapeRendering","shape-rendering":"shapeRendering",slope:"slope",spacing:"spacing",specularconstant:"specularConstant",specularexponent:"specularExponent",speed:"speed",spreadmethod:"spreadMethod",startoffset:"startOffset",stddeviation:"stdDeviation",stemh:"stemh",stemv:"stemv",stitchtiles:"stitchTiles",stopcolor:"stopColor","stop-color":"stopColor",stopopacity:"stopOpacity","stop-opacity":"stopOpacity",strikethroughposition:"strikethroughPosition","strikethrough-position":"strikethroughPosition",strikethroughthickness:"strikethroughThickness","strikethrough-thickness":"strikethroughThickness",string:"string",stroke:"stroke",strokedasharray:"strokeDasharray","stroke-dasharray":"strokeDasharray",strokedashoffset:"strokeDashoffset","stroke-dashoffset":"strokeDashoffset",strokelinecap:"strokeLinecap","stroke-linecap":"strokeLinecap",strokelinejoin:"strokeLinejoin","stroke-linejoin":"strokeLinejoin",strokemiterlimit:"strokeMiterlimit","stroke-miterlimit":"strokeMiterlimit",strokewidth:"strokeWidth","stroke-width":"strokeWidth",strokeopacity:"strokeOpacity","stroke-opacity":"strokeOpacity",suppresscontenteditablewarning:"suppressContentEditableWarning",suppresshydrationwarning:"suppressHydrationWarning",surfacescale:"surfaceScale",systemlanguage:"systemLanguage",tablevalues:"tableValues",targetx:"targetX",targety:"targetY",textanchor:"textAnchor","text-anchor":"textAnchor",textdecoration:"textDecoration","text-decoration":"textDecoration",textlength:"textLength",textrendering:"textRendering","text-rendering":"textRendering",to:"to",transform:"transform",typeof:"typeof",u1:"u1",u2:"u2",underlineposition:"underlinePosition","underline-position":"underlinePosition",underlinethickness:"underlineThickness","underline-thickness":"underlineThickness",unicode:"unicode",unicodebidi:"unicodeBidi","unicode-bidi":"unicodeBidi",unicoderange:"unicodeRange","unicode-range":"unicodeRange",unitsperem:"unitsPerEm","units-per-em":"unitsPerEm",unselectable:"unselectable",valphabetic:"vAlphabetic","v-alphabetic":"vAlphabetic",values:"values",vectoreffect:"vectorEffect","vector-effect":"vectorEffect",version:"version",vertadvy:"vertAdvY","vert-adv-y":"vertAdvY",vertoriginx:"vertOriginX","vert-origin-x":"vertOriginX",vertoriginy:"vertOriginY","vert-origin-y":"vertOriginY",vhanging:"vHanging","v-hanging":"vHanging",videographic:"vIdeographic","v-ideographic":"vIdeographic",viewbox:"viewBox",viewtarget:"viewTarget",visibility:"visibility",vmathematical:"vMathematical","v-mathematical":"vMathematical",vocab:"vocab",widths:"widths",wordspacing:"wordSpacing","word-spacing":"wordSpacing",writingmode:"writingMode","writing-mode":"writingMode",x1:"x1",x2:"x2",x:"x",xchannelselector:"xChannelSelector",xheight:"xHeight","x-height":"xHeight",xlinkactuate:"xlinkActuate","xlink:actuate":"xlinkActuate",xlinkarcrole:"xlinkArcrole","xlink:arcrole":"xlinkArcrole",xlinkhref:"xlinkHref","xlink:href":"xlinkHref",xlinkrole:"xlinkRole","xlink:role":"xlinkRole",xlinkshow:"xlinkShow","xlink:show":"xlinkShow",xlinktitle:"xlinkTitle","xlink:title":"xlinkTitle",xlinktype:"xlinkType","xlink:type":"xlinkType",xmlbase:"xmlBase","xml:base":"xmlBase",xmllang:"xmlLang","xml:lang":"xmlLang",xmlns:"xmlns","xml:space":"xmlSpace",xmlnsxlink:"xmlnsXlink","xmlns:xlink":"xmlnsXlink",xmlspace:"xmlSpace",y1:"y1",y2:"y2",y:"y",ychannelselector:"yChannelSelector",z:"z",zoomandpan:"zoomAndPan"},EZ={"aria-current":0,"aria-description":0,"aria-details":0,"aria-disabled":0,"aria-hidden":0,"aria-invalid":0,"aria-keyshortcuts":0,"aria-label":0,"aria-roledescription":0,"aria-autocomplete":0,"aria-checked":0,"aria-expanded":0,"aria-haspopup":0,"aria-level":0,"aria-modal":0,"aria-multiline":0,"aria-multiselectable":0,"aria-orientation":0,"aria-placeholder":0,"aria-pressed":0,"aria-readonly":0,"aria-required":0,"aria-selected":0,"aria-sort":0,"aria-valuemax":0,"aria-valuemin":0,"aria-valuenow":0,"aria-valuetext":0,"aria-atomic":0,"aria-busy":0,"aria-live":0,"aria-relevant":0,"aria-dropeffect":0,"aria-grabbed":0,"aria-activedescendant":0,"aria-colcount":0,"aria-colindex":0,"aria-colspan":0,"aria-controls":0,"aria-describedby":0,"aria-errormessage":0,"aria-flowto":0,"aria-labelledby":0,"aria-owns":0,"aria-posinset":0,"aria-rowcount":0,"aria-rowindex":0,"aria-rowspan":0,"aria-setsize":0},iy={},x_e=new RegExp("^(aria)-["+xt+"]*$"),k_e=new RegExp("^(aria)[A-Z]["+xt+"]*$");function D_e(d,h){{if(Ts.call(iy,h)&&iy[h])return!0;if(k_e.test(h)){var m="aria-"+h.slice(4).toLowerCase(),C=EZ.hasOwnProperty(m)?m:null;if(C==null)return r("Invalid ARIA attribute `%s`. ARIA attributes follow the pattern aria-* and must be lowercase.",h),iy[h]=!0,!0;if(h!==C)return r("Invalid ARIA attribute `%s`. Did you mean `%s`?",h,C),iy[h]=!0,!0}if(x_e.test(h)){var w=h.toLowerCase(),D=EZ.hasOwnProperty(w)?w:null;if(D==null)return iy[h]=!0,!1;if(h!==D)return r("Unknown ARIA attribute `%s`. Did you mean `%s`?",h,D),iy[h]=!0,!0}}return!0}function E_e(d,h){{var m=[];for(var C in h){var w=D_e(d,C);w||m.push(C)}var D=m.map(function(I){return"`"+I+"`"}).join(", ");m.length===1?r("Invalid aria prop %s on <%s> tag. For details, see https://reactjs.org/link/invalid-aria-props",D,d):m.length>1&&r("Invalid aria props %s on <%s> tag. For details, see https://reactjs.org/link/invalid-aria-props",D,d)}}function I_e(d,h){g_(d,h)||E_e(d,h)}var IZ=!1;function T_e(d,h){{if(d!=="input"&&d!=="textarea"&&d!=="select")return;h!=null&&h.value===null&&!IZ&&(IZ=!0,d==="select"&&h.multiple?r("`value` prop on `%s` should not be null. Consider using an empty array when `multiple` is set to `true` to clear the component or `undefined` for uncontrolled components.",d):r("`value` prop on `%s` should not be null. Consider using an empty string to clear the component or `undefined` for uncontrolled components.",d))}}var TZ=function(){};{var Pa={},NZ=/^on./,N_e=/^on[^A-Z]/,R_e=new RegExp("^(aria)-["+xt+"]*$"),M_e=new RegExp("^(aria)[A-Z]["+xt+"]*$");TZ=function(d,h,m,C){if(Ts.call(Pa,h)&&Pa[h])return!0;var w=h.toLowerCase();if(w==="onfocusin"||w==="onfocusout")return r("React uses onFocus and onBlur instead of onFocusIn and onFocusOut. All React events are normalized to bubble, so onFocusIn and onFocusOut are not needed/supported by React."),Pa[h]=!0,!0;if(C!=null){var D=C.registrationNameDependencies,I=C.possibleRegistrationNames;if(D.hasOwnProperty(h))return!0;var R=I.hasOwnProperty(w)?I[w]:null;if(R!=null)return r("Invalid event handler property `%s`. Did you mean `%s`?",h,R),Pa[h]=!0,!0;if(NZ.test(h))return r("Unknown event handler property `%s`. It will be ignored.",h),Pa[h]=!0,!0}else if(NZ.test(h))return N_e.test(h)&&r("Invalid event handler property `%s`. React events use the camelCase naming convention, for example `onClick`.",h),Pa[h]=!0,!0;if(R_e.test(h)||M_e.test(h))return!0;if(w==="innerhtml")return r("Directly setting property `innerHTML` is not permitted. For more information, lookup documentation on `dangerouslySetInnerHTML`."),Pa[h]=!0,!0;if(w==="aria")return r("The `aria` attribute is reserved for future use in React. Pass individual `aria-` attributes instead."),Pa[h]=!0,!0;if(w==="is"&&m!==null&&m!==void 0&&typeof m!="string")return r("Received a `%s` for a string attribute `is`. If this is expected, cast the value to a string.",typeof m),Pa[h]=!0,!0;if(typeof m=="number"&&isNaN(m))return r("Received NaN for the `%s` attribute. If this is expected, cast the value to a string.",h),Pa[h]=!0,!0;var O=Js(h),U=O!==null&&O.type===xr;if(XI.hasOwnProperty(w)){var q=XI[w];if(q!==h)return r("Invalid DOM property `%s`. Did you mean `%s`?",h,q),Pa[h]=!0,!0}else if(!U&&h!==w)return r("React does not recognize the `%s` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `%s` instead. If you accidentally passed it from a parent component, remove it from the DOM element.",h,w),Pa[h]=!0,!0;return typeof m=="boolean"&&Ci(h,m,O,!1)?(m?r('Received `%s` for a non-boolean attribute `%s`.\n\nIf you want to write it to the DOM, pass a string instead: %s="%s" or %s={value.toString()}.',m,h,h,m,h):r('Received `%s` for a non-boolean attribute `%s`.\n\nIf you want to write it to the DOM, pass a string instead: %s="%s" or %s={value.toString()}.\n\nIf you used to conditionally omit it with %s={condition && value}, pass %s={condition ? value : undefined} instead.',m,h,h,m,h,h,h),Pa[h]=!0,!0):U?!0:Ci(h,m,O,!1)?(Pa[h]=!0,!1):((m==="false"||m==="true")&&O!==null&&O.type===es&&(r("Received the string `%s` for the boolean attribute `%s`. %s Did you mean %s={%s}?",m,h,m==="false"?"The browser will interpret it as a truthy value.":'Although this works, it will not work as expected if you pass the string "false".',h,m),Pa[h]=!0),!0)}}var A_e=function(d,h,m){{var C=[];for(var w in h){var D=TZ(d,w,h[w],m);D||C.push(w)}var I=C.map(function(R){return"`"+R+"`"}).join(", ");C.length===1?r("Invalid value for prop %s on <%s> tag. Either remove it from the element, or pass a string or number value to keep it in the DOM. For details, see https://reactjs.org/link/attribute-behavior ",I,d):C.length>1&&r("Invalid values for props %s on <%s> tag. Either remove them from the element, or pass a string or number value to keep them in the DOM. For details, see https://reactjs.org/link/attribute-behavior ",I,d)}};function P_e(d,h,m){g_(d,h)||A_e(d,h,m)}var RZ=1,B5=2,N0=4,O_e=RZ|B5|N0,R0=null;function F_e(d){R0!==null&&r("Expected currently replaying event to be null. This error is likely caused by a bug in React. Please file an issue."),R0=d}function B_e(){R0===null&&r("Expected currently replaying event to not be null. This error is likely caused by a bug in React. Please file an issue."),R0=null}function W_e(d){return d===R0}function W5(d){var h=d.target||d.srcElement||window;return h.correspondingUseElement&&(h=h.correspondingUseElement),h.nodeType===Jh?h.parentNode:h}var H5=null,ny=null,sy=null;function MZ(d){var h=np(d);if(h){if(typeof H5!="function")throw new Error("setRestoreImplementation() needs to be called to handle a target for controlled events. This error is likely caused by a bug in React. Please file an issue.");var m=h.stateNode;if(m){var C=AT(m);H5(h.stateNode,h.type,C)}}}function H_e(d){H5=d}function AZ(d){ny?sy?sy.push(d):sy=[d]:ny=d}function V_e(){return ny!==null||sy!==null}function PZ(){if(ny){var d=ny,h=sy;if(ny=null,sy=null,MZ(d),h)for(var m=0;m<h.length;m++)MZ(h[m])}}var OZ=function(d,h){return d(h)},FZ=function(){},V5=!1;function z_e(){var d=V_e();d&&(FZ(),PZ())}function BZ(d,h,m){if(V5)return d(h,m);V5=!0;try{return OZ(d,h,m)}finally{V5=!1,z_e()}}function U_e(d,h,m){OZ=d,FZ=m}function $_e(d){return d==="button"||d==="input"||d==="select"||d==="textarea"}function j_e(d,h,m){switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":return!!(m.disabled&&$_e(h));default:return!1}}function M0(d,h){var m=d.stateNode;if(m===null)return null;var C=AT(m);if(C===null)return null;var w=C[h];if(j_e(h,d.type,C))return null;if(w&&typeof w!="function")throw new Error("Expected `"+h+"` listener to be a function, instead got a value of `"+typeof w+"` type.");return w}var z5=!1;if(wn)try{var A0={};Object.defineProperty(A0,"passive",{get:function(){z5=!0}}),window.addEventListener("test",A0,A0),window.removeEventListener("test",A0,A0)}catch{z5=!1}function WZ(d,h,m,C,w,D,I,R,O){var U=Array.prototype.slice.call(arguments,3);try{h.apply(m,U)}catch(q){this.onError(q)}}var HZ=WZ;if(typeof window<"u"&&typeof window.dispatchEvent=="function"&&typeof document<"u"&&typeof document.createEvent=="function"){var U5=document.createElement("react");HZ=function(h,m,C,w,D,I,R,O,U){if(typeof document>"u"||document===null)throw new Error("The `document` global was defined when React was initialized, but is not defined anymore. This can happen in a test environment if a component schedules an update from an asynchronous callback, but the test has already finished running. To solve this, you can either unmount the component at the end of your test (and ensure that any asynchronous operations get canceled in `componentWillUnmount`), or you can change the test itself to be asynchronous.");var q=document.createEvent("Event"),ce=!1,ae=!0,ke=window.event,Te=Object.getOwnPropertyDescriptor(window,"event");function Be(){U5.removeEventListener(We,Yt,!1),typeof window.event<"u"&&window.hasOwnProperty("event")&&(window.event=ke)}var _t=Array.prototype.slice.call(arguments,3);function Yt(){ce=!0,Be(),m.apply(C,_t),ae=!1}var Ft,Gi=!1,Hi=!1;function _e(ve){if(Ft=ve.error,Gi=!0,Ft===null&&ve.colno===0&&ve.lineno===0&&(Hi=!0),ve.defaultPrevented&&Ft!=null&&typeof Ft=="object")try{Ft._suppressLogging=!0}catch{}}var We="react-"+(h||"invokeguardedcallback");if(window.addEventListener("error",_e),U5.addEventListener(We,Yt,!1),q.initEvent(We,!1,!1),U5.dispatchEvent(q),Te&&Object.defineProperty(window,"event",Te),ce&&ae&&(Gi?Hi&&(Ft=new Error("A cross-origin error was thrown. React doesn't have access to the actual error object in development. See https://reactjs.org/link/crossorigin-error for more information.")):Ft=new Error(`An error was thrown inside one of your components, but React doesn't know what it was. This is likely due to browser flakiness. React does its best to preserve the "Pause on exceptions" behavior of the DevTools, which requires some DEV-mode only tricks. It's possible that these don't work in your browser. Try triggering the error in production mode, or switching to a modern browser. If you suspect that this is actually an issue with React, please file an issue.`),this.onError(Ft)),window.removeEventListener("error",_e),!ce)return Be(),WZ.apply(this,arguments)}}var q_e=HZ,oy=!1,QI=null,JI=!1,$5=null,K_e={onError:function(d){oy=!0,QI=d}};function j5(d,h,m,C,w,D,I,R,O){oy=!1,QI=null,q_e.apply(K_e,arguments)}function G_e(d,h,m,C,w,D,I,R,O){if(j5.apply(this,arguments),oy){var U=q5();JI||(JI=!0,$5=U)}}function Y_e(){if(JI){var d=$5;throw JI=!1,$5=null,d}}function Z_e(){return oy}function q5(){if(oy){var d=QI;return oy=!1,QI=null,d}else throw new Error("clearCaughtError was called but no error was captured. This error is likely caused by a bug in React. Please file an issue.")}function ry(d){return d._reactInternals}function X_e(d){return d._reactInternals!==void 0}function Q_e(d,h){d._reactInternals=h}var ni=0,ay=1,Lo=2,Ji=4,p_=16,P0=32,K5=64,xn=128,tf=256,Zg=512,m_=1024,_d=2048,nf=4096,__=8192,eT=16384,J_e=_d|Ji|K5|Zg|m_|eT,eve=32767,O0=32768,Oa=65536,G5=131072,VZ=1048576,Y5=2097152,v_=4194304,Z5=8388608,sf=16777216,tT=33554432,X5=Ji|m_|0,Q5=Lo|Ji|p_|P0|Zg|nf|__,F0=Ji|K5|Zg|__,ly=_d|p_,of=v_|Z5|Y5,tve=t.ReactCurrentOwner;function b_(d){var h=d,m=d;if(d.alternate)for(;h.return;)h=h.return;else{var C=h;do h=C,(h.flags&(Lo|nf))!==ni&&(m=h.return),C=h.return;while(C)}return h.tag===f?m:null}function zZ(d){if(d.tag===E){var h=d.memoizedState;if(h===null){var m=d.alternate;m!==null&&(h=m.memoizedState)}if(h!==null)return h.dehydrated}return null}function UZ(d){return d.tag===f?d.stateNode.containerInfo:null}function ive(d){return b_(d)===d}function nve(d){{var h=tve.current;if(h!==null&&h.tag===c){var m=h,C=m.stateNode;C._warnedAboutRefsInRender||r("%s is accessing isMounted inside its render() function. render() should be a pure function of props and state. It should never access something that requires stale data from the previous render, such as refs. Move this logic to componentDidMount and componentDidUpdate instead.",Ei(m)||"A component"),C._warnedAboutRefsInRender=!0}}var w=ry(d);return w?b_(w)===w:!1}function $Z(d){if(b_(d)!==d)throw new Error("Unable to find node on an unmounted component.")}function jZ(d){var h=d.alternate;if(!h){var m=b_(d);if(m===null)throw new Error("Unable to find node on an unmounted component.");return m!==d?null:d}for(var C=d,w=h;;){var D=C.return;if(D===null)break;var I=D.alternate;if(I===null){var R=D.return;if(R!==null){C=w=R;continue}break}if(D.child===I.child){for(var O=D.child;O;){if(O===C)return $Z(D),d;if(O===w)return $Z(D),h;O=O.sibling}throw new Error("Unable to find node on an unmounted component.")}if(C.return!==w.return)C=D,w=I;else{for(var U=!1,q=D.child;q;){if(q===C){U=!0,C=D,w=I;break}if(q===w){U=!0,w=D,C=I;break}q=q.sibling}if(!U){for(q=I.child;q;){if(q===C){U=!0,C=I,w=D;break}if(q===w){U=!0,w=I,C=D;break}q=q.sibling}if(!U)throw new Error("Child was not found in either parent set. This indicates a bug in React related to the return pointer. Please file an issue.")}}if(C.alternate!==w)throw new Error("Return fibers should always be each others' alternates. This error is likely caused by a bug in React. Please file an issue.")}if(C.tag!==f)throw new Error("Unable to find node on an unmounted component.");return C.stateNode.current===C?d:h}function qZ(d){var h=jZ(d);return h!==null?KZ(h):null}function KZ(d){if(d.tag===p||d.tag===_)return d;for(var h=d.child;h!==null;){var m=KZ(h);if(m!==null)return m;h=h.sibling}return null}function sve(d){var h=jZ(d);return h!==null?GZ(h):null}function GZ(d){if(d.tag===p||d.tag===_)return d;for(var h=d.child;h!==null;){if(h.tag!==g){var m=GZ(h);if(m!==null)return m}h=h.sibling}return null}var YZ=e.unstable_scheduleCallback,ove=e.unstable_cancelCallback,rve=e.unstable_shouldYield,ave=e.unstable_requestPaint,lr=e.unstable_now,lve=e.unstable_getCurrentPriorityLevel,iT=e.unstable_ImmediatePriority,J5=e.unstable_UserBlockingPriority,C_=e.unstable_NormalPriority,cve=e.unstable_LowPriority,e3=e.unstable_IdlePriority,dve=e.unstable_yieldValue,uve=e.unstable_setDisableYieldValue,cy=null,ua=null,Ct=null,Tu=!1,vd=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u";function hve(d){if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")return!1;var h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(h.isDisabled)return!0;if(!h.supportsFiber)return r("The installed version of React DevTools is too old and will not work with the current version of React. Please update React DevTools. https://reactjs.org/link/react-devtools"),!0;try{Bi&&(d=zi({},d,{getLaneLabelMap:vve,injectProfilingHooks:_ve})),cy=h.inject(d),ua=h}catch(m){r("React instrumentation encountered an error: %s.",m)}return!!h.checkDCE}function fve(d,h){if(ua&&typeof ua.onScheduleFiberRoot=="function")try{ua.onScheduleFiberRoot(cy,d,h)}catch(m){Tu||(Tu=!0,r("React instrumentation encountered an error: %s",m))}}function gve(d,h){if(ua&&typeof ua.onCommitFiberRoot=="function")try{var m=(d.current.flags&xn)===xn;if(Qi){var C;switch(h){case ic:C=iT;break;case af:C=J5;break;case lf:C=C_;break;case cT:C=e3;break;default:C=C_;break}ua.onCommitFiberRoot(cy,d,C,m)}}catch(w){Tu||(Tu=!0,r("React instrumentation encountered an error: %s",w))}}function pve(d){if(ua&&typeof ua.onPostCommitFiberRoot=="function")try{ua.onPostCommitFiberRoot(cy,d)}catch(h){Tu||(Tu=!0,r("React instrumentation encountered an error: %s",h))}}function mve(d){if(ua&&typeof ua.onCommitFiberUnmount=="function")try{ua.onCommitFiberUnmount(cy,d)}catch(h){Tu||(Tu=!0,r("React instrumentation encountered an error: %s",h))}}function cr(d){if(typeof dve=="function"&&(uve(d),n(d)),ua&&typeof ua.setStrictMode=="function")try{ua.setStrictMode(cy,d)}catch(h){Tu||(Tu=!0,r("React instrumentation encountered an error: %s",h))}}function _ve(d){Ct=d}function vve(){{for(var d=new Map,h=1,m=0;m<i3;m++){var C=Bve(h);d.set(h,C),h*=2}return d}}function bve(d){Ct!==null&&typeof Ct.markCommitStarted=="function"&&Ct.markCommitStarted(d)}function ZZ(){Ct!==null&&typeof Ct.markCommitStopped=="function"&&Ct.markCommitStopped()}function B0(d){Ct!==null&&typeof Ct.markComponentRenderStarted=="function"&&Ct.markComponentRenderStarted(d)}function dy(){Ct!==null&&typeof Ct.markComponentRenderStopped=="function"&&Ct.markComponentRenderStopped()}function Cve(d){Ct!==null&&typeof Ct.markComponentPassiveEffectMountStarted=="function"&&Ct.markComponentPassiveEffectMountStarted(d)}function yve(){Ct!==null&&typeof Ct.markComponentPassiveEffectMountStopped=="function"&&Ct.markComponentPassiveEffectMountStopped()}function wve(d){Ct!==null&&typeof Ct.markComponentPassiveEffectUnmountStarted=="function"&&Ct.markComponentPassiveEffectUnmountStarted(d)}function Sve(){Ct!==null&&typeof Ct.markComponentPassiveEffectUnmountStopped=="function"&&Ct.markComponentPassiveEffectUnmountStopped()}function Lve(d){Ct!==null&&typeof Ct.markComponentLayoutEffectMountStarted=="function"&&Ct.markComponentLayoutEffectMountStarted(d)}function xve(){Ct!==null&&typeof Ct.markComponentLayoutEffectMountStopped=="function"&&Ct.markComponentLayoutEffectMountStopped()}function XZ(d){Ct!==null&&typeof Ct.markComponentLayoutEffectUnmountStarted=="function"&&Ct.markComponentLayoutEffectUnmountStarted(d)}function QZ(){Ct!==null&&typeof Ct.markComponentLayoutEffectUnmountStopped=="function"&&Ct.markComponentLayoutEffectUnmountStopped()}function kve(d,h,m){Ct!==null&&typeof Ct.markComponentErrored=="function"&&Ct.markComponentErrored(d,h,m)}function Dve(d,h,m){Ct!==null&&typeof Ct.markComponentSuspended=="function"&&Ct.markComponentSuspended(d,h,m)}function Eve(d){Ct!==null&&typeof Ct.markLayoutEffectsStarted=="function"&&Ct.markLayoutEffectsStarted(d)}function Ive(){Ct!==null&&typeof Ct.markLayoutEffectsStopped=="function"&&Ct.markLayoutEffectsStopped()}function Tve(d){Ct!==null&&typeof Ct.markPassiveEffectsStarted=="function"&&Ct.markPassiveEffectsStarted(d)}function Nve(){Ct!==null&&typeof Ct.markPassiveEffectsStopped=="function"&&Ct.markPassiveEffectsStopped()}function JZ(d){Ct!==null&&typeof Ct.markRenderStarted=="function"&&Ct.markRenderStarted(d)}function Rve(){Ct!==null&&typeof Ct.markRenderYielded=="function"&&Ct.markRenderYielded()}function eX(){Ct!==null&&typeof Ct.markRenderStopped=="function"&&Ct.markRenderStopped()}function Mve(d){Ct!==null&&typeof Ct.markRenderScheduled=="function"&&Ct.markRenderScheduled(d)}function Ave(d,h){Ct!==null&&typeof Ct.markForceUpdateScheduled=="function"&&Ct.markForceUpdateScheduled(d,h)}function t3(d,h){Ct!==null&&typeof Ct.markStateUpdateScheduled=="function"&&Ct.markStateUpdateScheduled(d,h)}var Xt=0,qi=1,zn=2,to=8,Nu=16,tX=Math.clz32?Math.clz32:Fve,Pve=Math.log,Ove=Math.LN2;function Fve(d){var h=d>>>0;return h===0?32:31-(Pve(h)/Ove|0)|0}var i3=31,Ge=0,dr=0,vi=1,uy=2,rf=4,y_=8,Ru=16,W0=32,hy=4194240,H0=64,n3=128,s3=256,o3=512,r3=1024,a3=2048,l3=4096,c3=8192,d3=16384,u3=32768,h3=65536,f3=131072,g3=262144,p3=524288,m3=1048576,_3=2097152,nT=130023424,fy=4194304,v3=8388608,b3=16777216,C3=33554432,y3=67108864,iX=fy,V0=134217728,nX=268435455,z0=268435456,w_=536870912,ec=1073741824;function Bve(d){{if(d&vi)return"Sync";if(d&uy)return"InputContinuousHydration";if(d&rf)return"InputContinuous";if(d&y_)return"DefaultHydration";if(d&Ru)return"Default";if(d&W0)return"TransitionHydration";if(d&hy)return"Transition";if(d&nT)return"Retry";if(d&V0)return"SelectiveHydration";if(d&z0)return"IdleHydration";if(d&w_)return"Idle";if(d&ec)return"Offscreen"}}var Ls=-1,sT=H0,oT=fy;function U0(d){switch(S_(d)){case vi:return vi;case uy:return uy;case rf:return rf;case y_:return y_;case Ru:return Ru;case W0:return W0;case H0:case n3:case s3:case o3:case r3:case a3:case l3:case c3:case d3:case u3:case h3:case f3:case g3:case p3:case m3:case _3:return d&hy;case fy:case v3:case b3:case C3:case y3:return d&nT;case V0:return V0;case z0:return z0;case w_:return w_;case ec:return ec;default:return r("Should have found matching lanes. This is a bug in React."),d}}function rT(d,h){var m=d.pendingLanes;if(m===Ge)return Ge;var C=Ge,w=d.suspendedLanes,D=d.pingedLanes,I=m&nX;if(I!==Ge){var R=I&~w;if(R!==Ge)C=U0(R);else{var O=I&D;O!==Ge&&(C=U0(O))}}else{var U=m&~w;U!==Ge?C=U0(U):D!==Ge&&(C=U0(D))}if(C===Ge)return Ge;if(h!==Ge&&h!==C&&(h&w)===Ge){var q=S_(C),ce=S_(h);if(q>=ce||q===Ru&&(ce&hy)!==Ge)return h}(C&rf)!==Ge&&(C|=m&Ru);var ae=d.entangledLanes;if(ae!==Ge)for(var ke=d.entanglements,Te=C&ae;Te>0;){var Be=L_(Te),_t=1<<Be;C|=ke[Be],Te&=~_t}return C}function Wve(d,h){for(var m=d.eventTimes,C=Ls;h>0;){var w=L_(h),D=1<<w,I=m[w];I>C&&(C=I),h&=~D}return C}function Hve(d,h){switch(d){case vi:case uy:case rf:return h+250;case y_:case Ru:case W0:case H0:case n3:case s3:case o3:case r3:case a3:case l3:case c3:case d3:case u3:case h3:case f3:case g3:case p3:case m3:case _3:return h+5e3;case fy:case v3:case b3:case C3:case y3:return Ls;case V0:case z0:case w_:case ec:return Ls;default:return r("Should have found matching lanes. This is a bug in React."),Ls}}function Vve(d,h){for(var m=d.pendingLanes,C=d.suspendedLanes,w=d.pingedLanes,D=d.expirationTimes,I=m;I>0;){var R=L_(I),O=1<<R,U=D[R];U===Ls?((O&C)===Ge||(O&w)!==Ge)&&(D[R]=Hve(O,h)):U<=h&&(d.expiredLanes|=O),I&=~O}}function zve(d){return U0(d.pendingLanes)}function w3(d){var h=d.pendingLanes&~ec;return h!==Ge?h:h&ec?ec:Ge}function Uve(d){return(d&vi)!==Ge}function S3(d){return(d&nX)!==Ge}function sX(d){return(d&nT)===d}function $ve(d){var h=vi|rf|Ru;return(d&h)===Ge}function jve(d){return(d&hy)===d}function aT(d,h){var m=uy|rf|y_|Ru;return(h&m)!==Ge}function qve(d,h){return(h&d.expiredLanes)!==Ge}function oX(d){return(d&hy)!==Ge}function rX(){var d=sT;return sT<<=1,(sT&hy)===Ge&&(sT=H0),d}function Kve(){var d=oT;return oT<<=1,(oT&nT)===Ge&&(oT=fy),d}function S_(d){return d&-d}function $0(d){return S_(d)}function L_(d){return 31-tX(d)}function L3(d){return L_(d)}function tc(d,h){return(d&h)!==Ge}function gy(d,h){return(d&h)===h}function Ai(d,h){return d|h}function lT(d,h){return d&~h}function aX(d,h){return d&h}function GJe(d){return d}function Gve(d,h){return d!==dr&&d<h?d:h}function x3(d){for(var h=[],m=0;m<i3;m++)h.push(d);return h}function j0(d,h,m){d.pendingLanes|=h,h!==w_&&(d.suspendedLanes=Ge,d.pingedLanes=Ge);var C=d.eventTimes,w=L3(h);C[w]=m}function Yve(d,h){d.suspendedLanes|=h,d.pingedLanes&=~h;for(var m=d.expirationTimes,C=h;C>0;){var w=L_(C),D=1<<w;m[w]=Ls,C&=~D}}function lX(d,h,m){d.pingedLanes|=d.suspendedLanes&h}function Zve(d,h){var m=d.pendingLanes&~h;d.pendingLanes=h,d.suspendedLanes=Ge,d.pingedLanes=Ge,d.expiredLanes&=h,d.mutableReadLanes&=h,d.entangledLanes&=h;for(var C=d.entanglements,w=d.eventTimes,D=d.expirationTimes,I=m;I>0;){var R=L_(I),O=1<<R;C[R]=Ge,w[R]=Ls,D[R]=Ls,I&=~O}}function k3(d,h){for(var m=d.entangledLanes|=h,C=d.entanglements,w=m;w;){var D=L_(w),I=1<<D;I&h|C[D]&h&&(C[D]|=h),w&=~I}}function Xve(d,h){var m=S_(h),C;switch(m){case rf:C=uy;break;case Ru:C=y_;break;case H0:case n3:case s3:case o3:case r3:case a3:case l3:case c3:case d3:case u3:case h3:case f3:case g3:case p3:case m3:case _3:case fy:case v3:case b3:case C3:case y3:C=W0;break;case w_:C=z0;break;default:C=dr;break}return(C&(d.suspendedLanes|h))!==dr?dr:C}function cX(d,h,m){if(vd)for(var C=d.pendingUpdatersLaneMap;m>0;){var w=L3(m),D=1<<w,I=C[w];I.add(h),m&=~D}}function dX(d,h){if(vd)for(var m=d.pendingUpdatersLaneMap,C=d.memoizedUpdaters;h>0;){var w=L3(h),D=1<<w,I=m[w];I.size>0&&(I.forEach(function(R){var O=R.alternate;(O===null||!C.has(O))&&C.add(R)}),I.clear()),h&=~D}}function uX(d,h){return null}var ic=vi,af=rf,lf=Ru,cT=w_,q0=dr;function bd(){return q0}function ur(d){q0=d}function Qve(d,h){var m=q0;try{return q0=d,h()}finally{q0=m}}function Jve(d,h){return d!==0&&d<h?d:h}function ebe(d,h){return d>h?d:h}function D3(d,h){return d!==0&&d<h}function hX(d){var h=S_(d);return D3(ic,h)?D3(af,h)?S3(h)?lf:cT:af:ic}function dT(d){var h=d.current.memoizedState;return h.isDehydrated}var fX;function tbe(d){fX=d}function ibe(d){fX(d)}var E3;function nbe(d){E3=d}var gX;function sbe(d){gX=d}var pX;function obe(d){pX=d}var mX;function rbe(d){mX=d}var I3=!1,uT=[],Xg=null,Qg=null,Jg=null,K0=new Map,G0=new Map,ep=[],abe=["mousedown","mouseup","touchcancel","touchend","touchstart","auxclick","dblclick","pointercancel","pointerdown","pointerup","dragend","dragstart","drop","compositionend","compositionstart","keydown","keypress","keyup","input","textInput","copy","cut","paste","click","change","contextmenu","reset","submit"];function lbe(d){return abe.indexOf(d)>-1}function cbe(d,h,m,C,w){return{blockedOn:d,domEventName:h,eventSystemFlags:m,nativeEvent:w,targetContainers:[C]}}function _X(d,h){switch(d){case"focusin":case"focusout":Xg=null;break;case"dragenter":case"dragleave":Qg=null;break;case"mouseover":case"mouseout":Jg=null;break;case"pointerover":case"pointerout":{var m=h.pointerId;K0.delete(m);break}case"gotpointercapture":case"lostpointercapture":{var C=h.pointerId;G0.delete(C);break}}}function Y0(d,h,m,C,w,D){if(d===null||d.nativeEvent!==D){var I=cbe(h,m,C,w,D);if(h!==null){var R=np(h);R!==null&&E3(R)}return I}d.eventSystemFlags|=C;var O=d.targetContainers;return w!==null&&O.indexOf(w)===-1&&O.push(w),d}function dbe(d,h,m,C,w){switch(h){case"focusin":{var D=w;return Xg=Y0(Xg,d,h,m,C,D),!0}case"dragenter":{var I=w;return Qg=Y0(Qg,d,h,m,C,I),!0}case"mouseover":{var R=w;return Jg=Y0(Jg,d,h,m,C,R),!0}case"pointerover":{var O=w,U=O.pointerId;return K0.set(U,Y0(K0.get(U)||null,d,h,m,C,O)),!0}case"gotpointercapture":{var q=w,ce=q.pointerId;return G0.set(ce,Y0(G0.get(ce)||null,d,h,m,C,q)),!0}}return!1}function vX(d){var h=D_(d.target);if(h!==null){var m=b_(h);if(m!==null){var C=m.tag;if(C===E){var w=zZ(m);if(w!==null){d.blockedOn=w,mX(d.priority,function(){gX(m)});return}}else if(C===f){var D=m.stateNode;if(dT(D)){d.blockedOn=UZ(m);return}}}}d.blockedOn=null}function ube(d){for(var h=pX(),m={blockedOn:null,target:d,priority:h},C=0;C<ep.length&&D3(h,ep[C].priority);C++);ep.splice(C,0,m),C===0&&vX(m)}function hT(d){if(d.blockedOn!==null)return!1;for(var h=d.targetContainers;h.length>0;){var m=h[0],C=R3(d.domEventName,d.eventSystemFlags,m,d.nativeEvent);if(C===null){var w=d.nativeEvent,D=new w.constructor(w.type,w);F_e(D),w.target.dispatchEvent(D),B_e()}else{var I=np(C);return I!==null&&E3(I),d.blockedOn=C,!1}h.shift()}return!0}function bX(d,h,m){hT(d)&&m.delete(h)}function hbe(){I3=!1,Xg!==null&&hT(Xg)&&(Xg=null),Qg!==null&&hT(Qg)&&(Qg=null),Jg!==null&&hT(Jg)&&(Jg=null),K0.forEach(bX),G0.forEach(bX)}function Z0(d,h){d.blockedOn===h&&(d.blockedOn=null,I3||(I3=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,hbe)))}function X0(d){if(uT.length>0){Z0(uT[0],d);for(var h=1;h<uT.length;h++){var m=uT[h];m.blockedOn===d&&(m.blockedOn=null)}}Xg!==null&&Z0(Xg,d),Qg!==null&&Z0(Qg,d),Jg!==null&&Z0(Jg,d);var C=function(R){return Z0(R,d)};K0.forEach(C),G0.forEach(C);for(var w=0;w<ep.length;w++){var D=ep[w];D.blockedOn===d&&(D.blockedOn=null)}for(;ep.length>0;){var I=ep[0];if(I.blockedOn!==null)break;vX(I),I.blockedOn===null&&ep.shift()}}var py=t.ReactCurrentBatchConfig,T3=!0;function CX(d){T3=!!d}function fbe(){return T3}function gbe(d,h,m){var C=yX(h),w;switch(C){case ic:w=pbe;break;case af:w=mbe;break;case lf:default:w=N3;break}return w.bind(null,h,m,d)}function pbe(d,h,m,C){var w=bd(),D=py.transition;py.transition=null;try{ur(ic),N3(d,h,m,C)}finally{ur(w),py.transition=D}}function mbe(d,h,m,C){var w=bd(),D=py.transition;py.transition=null;try{ur(af),N3(d,h,m,C)}finally{ur(w),py.transition=D}}function N3(d,h,m,C){T3&&_be(d,h,m,C)}function _be(d,h,m,C){var w=R3(d,h,m,C);if(w===null){q3(d,h,C,fT,m),_X(d,C);return}if(dbe(w,d,h,m,C)){C.stopPropagation();return}if(_X(d,C),h&N0&&lbe(d)){for(;w!==null;){var D=np(w);D!==null&&ibe(D);var I=R3(d,h,m,C);if(I===null&&q3(d,h,C,fT,m),I===w)break;w=I}w!==null&&C.stopPropagation();return}q3(d,h,C,null,m)}var fT=null;function R3(d,h,m,C){fT=null;var w=W5(C),D=D_(w);if(D!==null){var I=b_(D);if(I===null)D=null;else{var R=I.tag;if(R===E){var O=zZ(I);if(O!==null)return O;D=null}else if(R===f){var U=I.stateNode;if(dT(U))return UZ(I);D=null}else I!==D&&(D=null)}}return fT=D,null}function yX(d){switch(d){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return ic;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return af;case"message":{var h=lve();switch(h){case iT:return ic;case J5:return af;case C_:case cve:return lf;case e3:return cT;default:return lf}}default:return lf}}function vbe(d,h,m){return d.addEventListener(h,m,!1),m}function bbe(d,h,m){return d.addEventListener(h,m,!0),m}function Cbe(d,h,m,C){return d.addEventListener(h,m,{capture:!0,passive:C}),m}function ybe(d,h,m,C){return d.addEventListener(h,m,{passive:C}),m}var Q0=null,M3=null,J0=null;function wbe(d){return Q0=d,M3=SX(),!0}function Sbe(){Q0=null,M3=null,J0=null}function wX(){if(J0)return J0;var d,h=M3,m=h.length,C,w=SX(),D=w.length;for(d=0;d<m&&h[d]===w[d];d++);var I=m-d;for(C=1;C<=I&&h[m-C]===w[D-C];C++);var R=C>1?1-C:void 0;return J0=w.slice(d,R),J0}function SX(){return"value"in Q0?Q0.value:Q0.textContent}function gT(d){var h,m=d.keyCode;return"charCode"in d?(h=d.charCode,h===0&&m===13&&(h=13)):h=m,h===10&&(h=13),h>=32||h===13?h:0}function pT(){return!0}function LX(){return!1}function nc(d){function h(m,C,w,D,I){this._reactName=m,this._targetInst=w,this.type=C,this.nativeEvent=D,this.target=I,this.currentTarget=null;for(var R in d)if(d.hasOwnProperty(R)){var O=d[R];O?this[R]=O(D):this[R]=D[R]}var U=D.defaultPrevented!=null?D.defaultPrevented:D.returnValue===!1;return U?this.isDefaultPrevented=pT:this.isDefaultPrevented=LX,this.isPropagationStopped=LX,this}return zi(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=pT)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=pT)},persist:function(){},isPersistent:pT}),h}var my={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(d){return d.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},A3=nc(my),eL=zi({},my,{view:0,detail:0}),Lbe=nc(eL),P3,O3,tL;function xbe(d){d!==tL&&(tL&&d.type==="mousemove"?(P3=d.screenX-tL.screenX,O3=d.screenY-tL.screenY):(P3=0,O3=0),tL=d)}var mT=zi({},eL,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:B3,button:0,buttons:0,relatedTarget:function(d){return d.relatedTarget===void 0?d.fromElement===d.srcElement?d.toElement:d.fromElement:d.relatedTarget},movementX:function(d){return"movementX"in d?d.movementX:(xbe(d),P3)},movementY:function(d){return"movementY"in d?d.movementY:O3}}),xX=nc(mT),kbe=zi({},mT,{dataTransfer:0}),Dbe=nc(kbe),Ebe=zi({},eL,{relatedTarget:0}),F3=nc(Ebe),Ibe=zi({},my,{animationName:0,elapsedTime:0,pseudoElement:0}),Tbe=nc(Ibe),Nbe=zi({},my,{clipboardData:function(d){return"clipboardData"in d?d.clipboardData:window.clipboardData}}),Rbe=nc(Nbe),Mbe=zi({},my,{data:0}),kX=nc(Mbe),Abe=kX,Pbe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Obe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};function Fbe(d){if(d.key){var h=Pbe[d.key]||d.key;if(h!=="Unidentified")return h}if(d.type==="keypress"){var m=gT(d);return m===13?"Enter":String.fromCharCode(m)}return d.type==="keydown"||d.type==="keyup"?Obe[d.keyCode]||"Unidentified":""}var Bbe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wbe(d){var h=this,m=h.nativeEvent;if(m.getModifierState)return m.getModifierState(d);var C=Bbe[d];return C?!!m[C]:!1}function B3(d){return Wbe}var Hbe=zi({},eL,{key:Fbe,code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:B3,charCode:function(d){return d.type==="keypress"?gT(d):0},keyCode:function(d){return d.type==="keydown"||d.type==="keyup"?d.keyCode:0},which:function(d){return d.type==="keypress"?gT(d):d.type==="keydown"||d.type==="keyup"?d.keyCode:0}}),Vbe=nc(Hbe),zbe=zi({},mT,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),DX=nc(zbe),Ube=zi({},eL,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:B3}),$be=nc(Ube),jbe=zi({},my,{propertyName:0,elapsedTime:0,pseudoElement:0}),qbe=nc(jbe),Kbe=zi({},mT,{deltaX:function(d){return"deltaX"in d?d.deltaX:"wheelDeltaX"in d?-d.wheelDeltaX:0},deltaY:function(d){return"deltaY"in d?d.deltaY:"wheelDeltaY"in d?-d.wheelDeltaY:"wheelDelta"in d?-d.wheelDelta:0},deltaZ:0,deltaMode:0}),Gbe=nc(Kbe),Ybe=[9,13,27,32],EX=229,W3=wn&&"CompositionEvent"in window,iL=null;wn&&"documentMode"in document&&(iL=document.documentMode);var Zbe=wn&&"TextEvent"in window&&!iL,IX=wn&&(!W3||iL&&iL>8&&iL<=11),TX=32,NX=String.fromCharCode(TX);function Xbe(){ws("onBeforeInput",["compositionend","keypress","textInput","paste"]),ws("onCompositionEnd",["compositionend","focusout","keydown","keypress","keyup","mousedown"]),ws("onCompositionStart",["compositionstart","focusout","keydown","keypress","keyup","mousedown"]),ws("onCompositionUpdate",["compositionupdate","focusout","keydown","keypress","keyup","mousedown"])}var RX=!1;function Qbe(d){return(d.ctrlKey||d.altKey||d.metaKey)&&!(d.ctrlKey&&d.altKey)}function Jbe(d){switch(d){case"compositionstart":return"onCompositionStart";case"compositionend":return"onCompositionEnd";case"compositionupdate":return"onCompositionUpdate"}}function eCe(d,h){return d==="keydown"&&h.keyCode===EX}function MX(d,h){switch(d){case"keyup":return Ybe.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==EX;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function AX(d){var h=d.detail;return typeof h=="object"&&"data"in h?h.data:null}function PX(d){return d.locale==="ko"}var _y=!1;function tCe(d,h,m,C,w){var D,I;if(W3?D=Jbe(h):_y?MX(h,C)&&(D="onCompositionEnd"):eCe(h,C)&&(D="onCompositionStart"),!D)return null;IX&&!PX(C)&&(!_y&&D==="onCompositionStart"?_y=wbe(w):D==="onCompositionEnd"&&_y&&(I=wX()));var R=yT(m,D);if(R.length>0){var O=new kX(D,h,null,C,w);if(d.push({event:O,listeners:R}),I)O.data=I;else{var U=AX(C);U!==null&&(O.data=U)}}}function iCe(d,h){switch(d){case"compositionend":return AX(h);case"keypress":var m=h.which;return m!==TX?null:(RX=!0,NX);case"textInput":var C=h.data;return C===NX&&RX?null:C;default:return null}}function nCe(d,h){if(_y){if(d==="compositionend"||!W3&&MX(d,h)){var m=wX();return Sbe(),_y=!1,m}return null}switch(d){case"paste":return null;case"keypress":if(!Qbe(h)){if(h.char&&h.char.length>1)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return IX&&!PX(h)?null:h.data;default:return null}}function sCe(d,h,m,C,w){var D;if(Zbe?D=iCe(h,C):D=nCe(h,C),!D)return null;var I=yT(m,"onBeforeInput");if(I.length>0){var R=new Abe("onBeforeInput","beforeinput",null,C,w);d.push({event:R,listeners:I}),R.data=D}}function oCe(d,h,m,C,w,D,I){tCe(d,h,m,C,w),sCe(d,h,m,C,w)}var rCe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function OX(d){var h=d&&d.nodeName&&d.nodeName.toLowerCase();return h==="input"?!!rCe[d.type]:h==="textarea"}/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function aCe(d){if(!wn)return!1;var h="on"+d,m=h in document;if(!m){var C=document.createElement("div");C.setAttribute(h,"return;"),m=typeof C[h]=="function"}return m}function lCe(){ws("onChange",["change","click","focusin","focusout","input","keydown","keyup","selectionchange"])}function FX(d,h,m,C){AZ(C);var w=yT(h,"onChange");if(w.length>0){var D=new A3("onChange","change",null,m,C);d.push({event:D,listeners:w})}}var nL=null,sL=null;function cCe(d){var h=d.nodeName&&d.nodeName.toLowerCase();return h==="select"||h==="input"&&d.type==="file"}function dCe(d){var h=[];FX(h,sL,d,W5(d)),BZ(uCe,h)}function uCe(d){tQ(d,0)}function _T(d){var h=Sy(d);if(QC(h))return d}function hCe(d,h){if(d==="change")return h}var BX=!1;wn&&(BX=aCe("input")&&(!document.documentMode||document.documentMode>9));function fCe(d,h){nL=d,sL=h,nL.attachEvent("onpropertychange",HX)}function WX(){nL&&(nL.detachEvent("onpropertychange",HX),nL=null,sL=null)}function HX(d){d.propertyName==="value"&&_T(sL)&&dCe(d)}function gCe(d,h,m){d==="focusin"?(WX(),fCe(h,m)):d==="focusout"&&WX()}function pCe(d,h){if(d==="selectionchange"||d==="keyup"||d==="keydown")return _T(sL)}function mCe(d){var h=d.nodeName;return h&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")}function _Ce(d,h){if(d==="click")return _T(h)}function vCe(d,h){if(d==="input"||d==="change")return _T(h)}function bCe(d){var h=d._wrapperState;!h||!h.controlled||d.type!=="number"||_i(d,"number",d.value)}function CCe(d,h,m,C,w,D,I){var R=m?Sy(m):window,O,U;if(cCe(R)?O=hCe:OX(R)?BX?O=vCe:(O=pCe,U=gCe):mCe(R)&&(O=_Ce),O){var q=O(h,m);if(q){FX(d,q,C,w);return}}U&&U(h,R,m),h==="focusout"&&bCe(R)}function yCe(){sn("onMouseEnter",["mouseout","mouseover"]),sn("onMouseLeave",["mouseout","mouseover"]),sn("onPointerEnter",["pointerout","pointerover"]),sn("onPointerLeave",["pointerout","pointerover"])}function wCe(d,h,m,C,w,D,I){var R=h==="mouseover"||h==="pointerover",O=h==="mouseout"||h==="pointerout";if(R&&!W_e(C)){var U=C.relatedTarget||C.fromElement;if(U&&(D_(U)||bL(U)))return}if(!(!O&&!R)){var q;if(w.window===w)q=w;else{var ce=w.ownerDocument;ce?q=ce.defaultView||ce.parentWindow:q=window}var ae,ke;if(O){var Te=C.relatedTarget||C.toElement;if(ae=m,ke=Te?D_(Te):null,ke!==null){var Be=b_(ke);(ke!==Be||ke.tag!==p&&ke.tag!==_)&&(ke=null)}}else ae=null,ke=m;if(ae!==ke){var _t=xX,Yt="onMouseLeave",Ft="onMouseEnter",Gi="mouse";(h==="pointerout"||h==="pointerover")&&(_t=DX,Yt="onPointerLeave",Ft="onPointerEnter",Gi="pointer");var Hi=ae==null?q:Sy(ae),_e=ke==null?q:Sy(ke),We=new _t(Yt,Gi+"leave",ae,C,w);We.target=Hi,We.relatedTarget=_e;var ve=null,Je=D_(w);if(Je===m){var St=new _t(Ft,Gi+"enter",ke,C,w);St.target=_e,St.relatedTarget=Hi,ve=St}qCe(d,We,ve,ae,ke)}}}function SCe(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var sc=typeof Object.is=="function"?Object.is:SCe;function oL(d,h){if(sc(d,h))return!0;if(typeof d!="object"||d===null||typeof h!="object"||h===null)return!1;var m=Object.keys(d),C=Object.keys(h);if(m.length!==C.length)return!1;for(var w=0;w<m.length;w++){var D=m[w];if(!Ts.call(h,D)||!sc(d[D],h[D]))return!1}return!0}function VX(d){for(;d&&d.firstChild;)d=d.firstChild;return d}function LCe(d){for(;d;){if(d.nextSibling)return d.nextSibling;d=d.parentNode}}function zX(d,h){for(var m=VX(d),C=0,w=0;m;){if(m.nodeType===Jh){if(w=C+m.textContent.length,C<=h&&w>=h)return{node:m,offset:h-C};C=w}m=VX(LCe(m))}}function xCe(d){var h=d.ownerDocument,m=h&&h.defaultView||window,C=m.getSelection&&m.getSelection();if(!C||C.rangeCount===0)return null;var w=C.anchorNode,D=C.anchorOffset,I=C.focusNode,R=C.focusOffset;try{w.nodeType,I.nodeType}catch{return null}return kCe(d,w,D,I,R)}function kCe(d,h,m,C,w){var D=0,I=-1,R=-1,O=0,U=0,q=d,ce=null;e:for(;;){for(var ae=null;q===h&&(m===0||q.nodeType===Jh)&&(I=D+m),q===C&&(w===0||q.nodeType===Jh)&&(R=D+w),q.nodeType===Jh&&(D+=q.nodeValue.length),(ae=q.firstChild)!==null;)ce=q,q=ae;for(;;){if(q===d)break e;if(ce===h&&++O===m&&(I=D),ce===C&&++U===w&&(R=D),(ae=q.nextSibling)!==null)break;q=ce,ce=q.parentNode}q=ae}return I===-1||R===-1?null:{start:I,end:R}}function DCe(d,h){var m=d.ownerDocument||document,C=m&&m.defaultView||window;if(C.getSelection){var w=C.getSelection(),D=d.textContent.length,I=Math.min(h.start,D),R=h.end===void 0?I:Math.min(h.end,D);if(!w.extend&&I>R){var O=R;R=I,I=O}var U=zX(d,I),q=zX(d,R);if(U&&q){if(w.rangeCount===1&&w.anchorNode===U.node&&w.anchorOffset===U.offset&&w.focusNode===q.node&&w.focusOffset===q.offset)return;var ce=m.createRange();ce.setStart(U.node,U.offset),w.removeAllRanges(),I>R?(w.addRange(ce),w.extend(q.node,q.offset)):(ce.setEnd(q.node,q.offset),w.addRange(ce))}}}function UX(d){return d&&d.nodeType===Jh}function $X(d,h){return!d||!h?!1:d===h?!0:UX(d)?!1:UX(h)?$X(d,h.parentNode):"contains"in d?d.contains(h):d.compareDocumentPosition?!!(d.compareDocumentPosition(h)&16):!1}function ECe(d){return d&&d.ownerDocument&&$X(d.ownerDocument.documentElement,d)}function ICe(d){try{return typeof d.contentWindow.location.href=="string"}catch{return!1}}function jX(){for(var d=window,h=Gg();h instanceof d.HTMLIFrameElement;){if(ICe(h))d=h.contentWindow;else return h;h=Gg(d.document)}return h}function H3(d){var h=d&&d.nodeName&&d.nodeName.toLowerCase();return h&&(h==="input"&&(d.type==="text"||d.type==="search"||d.type==="tel"||d.type==="url"||d.type==="password")||h==="textarea"||d.contentEditable==="true")}function TCe(){var d=jX();return{focusedElem:d,selectionRange:H3(d)?RCe(d):null}}function NCe(d){var h=jX(),m=d.focusedElem,C=d.selectionRange;if(h!==m&&ECe(m)){C!==null&&H3(m)&&MCe(m,C);for(var w=[],D=m;D=D.parentNode;)D.nodeType===gl&&w.push({element:D,left:D.scrollLeft,top:D.scrollTop});typeof m.focus=="function"&&m.focus();for(var I=0;I<w.length;I++){var R=w[I];R.element.scrollLeft=R.left,R.element.scrollTop=R.top}}}function RCe(d){var h;return"selectionStart"in d?h={start:d.selectionStart,end:d.selectionEnd}:h=xCe(d),h||{start:0,end:0}}function MCe(d,h){var m=h.start,C=h.end;C===void 0&&(C=m),"selectionStart"in d?(d.selectionStart=m,d.selectionEnd=Math.min(C,d.value.length)):DCe(d,h)}var ACe=wn&&"documentMode"in document&&document.documentMode<=11;function PCe(){ws("onSelect",["focusout","contextmenu","dragend","focusin","keydown","keyup","mousedown","mouseup","selectionchange"])}var vy=null,V3=null,rL=null,z3=!1;function OCe(d){if("selectionStart"in d&&H3(d))return{start:d.selectionStart,end:d.selectionEnd};var h=d.ownerDocument&&d.ownerDocument.defaultView||window,m=h.getSelection();return{anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}}function FCe(d){return d.window===d?d.document:d.nodeType===ef?d:d.ownerDocument}function qX(d,h,m){var C=FCe(m);if(!(z3||vy==null||vy!==Gg(C))){var w=OCe(vy);if(!rL||!oL(rL,w)){rL=w;var D=yT(V3,"onSelect");if(D.length>0){var I=new A3("onSelect","select",null,h,m);d.push({event:I,listeners:D}),I.target=vy}}}}function BCe(d,h,m,C,w,D,I){var R=m?Sy(m):window;switch(h){case"focusin":(OX(R)||R.contentEditable==="true")&&(vy=R,V3=m,rL=null);break;case"focusout":vy=null,V3=null,rL=null;break;case"mousedown":z3=!0;break;case"contextmenu":case"mouseup":case"dragend":z3=!1,qX(d,C,w);break;case"selectionchange":if(ACe)break;case"keydown":case"keyup":qX(d,C,w)}}function vT(d,h){var m={};return m[d.toLowerCase()]=h.toLowerCase(),m["Webkit"+d]="webkit"+h,m["Moz"+d]="moz"+h,m}var by={animationend:vT("Animation","AnimationEnd"),animationiteration:vT("Animation","AnimationIteration"),animationstart:vT("Animation","AnimationStart"),transitionend:vT("Transition","TransitionEnd")},U3={},KX={};wn&&(KX=document.createElement("div").style,"AnimationEvent"in window||(delete by.animationend.animation,delete by.animationiteration.animation,delete by.animationstart.animation),"TransitionEvent"in window||delete by.transitionend.transition);function bT(d){if(U3[d])return U3[d];if(!by[d])return d;var h=by[d];for(var m in h)if(h.hasOwnProperty(m)&&m in KX)return U3[d]=h[m];return d}var GX=bT("animationend"),YX=bT("animationiteration"),ZX=bT("animationstart"),XX=bT("transitionend"),QX=new Map,JX=["abort","auxClick","cancel","canPlay","canPlayThrough","click","close","contextMenu","copy","cut","drag","dragEnd","dragEnter","dragExit","dragLeave","dragOver","dragStart","drop","durationChange","emptied","encrypted","ended","error","gotPointerCapture","input","invalid","keyDown","keyPress","keyUp","load","loadedData","loadedMetadata","loadStart","lostPointerCapture","mouseDown","mouseMove","mouseOut","mouseOver","mouseUp","paste","pause","play","playing","pointerCancel","pointerDown","pointerMove","pointerOut","pointerOver","pointerUp","progress","rateChange","reset","resize","seeked","seeking","stalled","submit","suspend","timeUpdate","touchCancel","touchEnd","touchStart","volumeChange","scroll","toggle","touchMove","waiting","wheel"];function tp(d,h){QX.set(d,h),ws(h,[d])}function WCe(){for(var d=0;d<JX.length;d++){var h=JX[d],m=h.toLowerCase(),C=h[0].toUpperCase()+h.slice(1);tp(m,"on"+C)}tp(GX,"onAnimationEnd"),tp(YX,"onAnimationIteration"),tp(ZX,"onAnimationStart"),tp("dblclick","onDoubleClick"),tp("focusin","onFocus"),tp("focusout","onBlur"),tp(XX,"onTransitionEnd")}function HCe(d,h,m,C,w,D,I){var R=QX.get(h);if(R!==void 0){var O=A3,U=h;switch(h){case"keypress":if(gT(C)===0)return;case"keydown":case"keyup":O=Vbe;break;case"focusin":U="focus",O=F3;break;case"focusout":U="blur",O=F3;break;case"beforeblur":case"afterblur":O=F3;break;case"click":if(C.button===2)return;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":O=xX;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":O=Dbe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":O=$be;break;case GX:case YX:case ZX:O=Tbe;break;case XX:O=qbe;break;case"scroll":O=Lbe;break;case"wheel":O=Gbe;break;case"copy":case"cut":case"paste":O=Rbe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":O=DX;break}var q=(D&N0)!==0;{var ce=!q&&h==="scroll",ae=$Ce(m,R,C.type,q,ce);if(ae.length>0){var ke=new O(R,U,null,C,w);d.push({event:ke,listeners:ae})}}}}WCe(),yCe(),lCe(),PCe(),Xbe();function VCe(d,h,m,C,w,D,I){HCe(d,h,m,C,w,D);var R=(D&O_e)===0;R&&(wCe(d,h,m,C,w),CCe(d,h,m,C,w),BCe(d,h,m,C,w),oCe(d,h,m,C,w))}var aL=["abort","canplay","canplaythrough","durationchange","emptied","encrypted","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","resize","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"],$3=new Set(["cancel","close","invalid","load","scroll","toggle"].concat(aL));function eQ(d,h,m){var C=d.type||"unknown-event";d.currentTarget=m,G_e(C,h,void 0,d),d.currentTarget=null}function zCe(d,h,m){var C;if(m)for(var w=h.length-1;w>=0;w--){var D=h[w],I=D.instance,R=D.currentTarget,O=D.listener;if(I!==C&&d.isPropagationStopped())return;eQ(d,O,R),C=I}else for(var U=0;U<h.length;U++){var q=h[U],ce=q.instance,ae=q.currentTarget,ke=q.listener;if(ce!==C&&d.isPropagationStopped())return;eQ(d,ke,ae),C=ce}}function tQ(d,h){for(var m=(h&N0)!==0,C=0;C<d.length;C++){var w=d[C],D=w.event,I=w.listeners;zCe(D,I,m)}Y_e()}function UCe(d,h,m,C,w){var D=W5(m),I=[];VCe(I,d,C,m,D,h),tQ(I,h)}function As(d,h){$3.has(d)||r('Did not expect a listenToNonDelegatedEvent() call for "%s". This is a bug in React. Please file an issue.',d);var m=!1,C=bwe(h),w=KCe(d);C.has(w)||(iQ(h,d,B5,m),C.add(w))}function j3(d,h,m){$3.has(d)&&!h&&r('Did not expect a listenToNativeEvent() call for "%s" in the bubble phase. This is a bug in React. Please file an issue.',d);var C=0;h&&(C|=N0),iQ(m,d,C,h)}var CT="_reactListening"+Math.random().toString(36).slice(2);function lL(d){if(!d[CT]){d[CT]=!0,Qn.forEach(function(m){m!=="selectionchange"&&($3.has(m)||j3(m,!1,d),j3(m,!0,d))});var h=d.nodeType===ef?d:d.ownerDocument;h!==null&&(h[CT]||(h[CT]=!0,j3("selectionchange",!1,h)))}}function iQ(d,h,m,C,w){var D=gbe(d,h,m),I=void 0;z5&&(h==="touchstart"||h==="touchmove"||h==="wheel")&&(I=!0),d=d,C?I!==void 0?Cbe(d,h,D,I):bbe(d,h,D):I!==void 0?ybe(d,h,D,I):vbe(d,h,D)}function nQ(d,h){return d===h||d.nodeType===So&&d.parentNode===h}function q3(d,h,m,C,w){var D=C;if(!(h&RZ)&&!(h&B5)){var I=w;if(C!==null){var R=C;e:for(;;){if(R===null)return;var O=R.tag;if(O===f||O===g){var U=R.stateNode.containerInfo;if(nQ(U,I))break;if(O===g)for(var q=R.return;q!==null;){var ce=q.tag;if(ce===f||ce===g){var ae=q.stateNode.containerInfo;if(nQ(ae,I))return}q=q.return}for(;U!==null;){var ke=D_(U);if(ke===null)return;var Te=ke.tag;if(Te===p||Te===_){R=D=ke;continue e}U=U.parentNode}}R=R.return}}}BZ(function(){return UCe(d,h,m,D)})}function cL(d,h,m){return{instance:d,listener:h,currentTarget:m}}function $Ce(d,h,m,C,w,D){for(var I=h!==null?h+"Capture":null,R=C?I:h,O=[],U=d,q=null;U!==null;){var ce=U,ae=ce.stateNode,ke=ce.tag;if(ke===p&&ae!==null&&(q=ae,R!==null)){var Te=M0(U,R);Te!=null&&O.push(cL(U,Te,q))}if(w)break;U=U.return}return O}function yT(d,h){for(var m=h+"Capture",C=[],w=d;w!==null;){var D=w,I=D.stateNode,R=D.tag;if(R===p&&I!==null){var O=I,U=M0(w,m);U!=null&&C.unshift(cL(w,U,O));var q=M0(w,h);q!=null&&C.push(cL(w,q,O))}w=w.return}return C}function Cy(d){if(d===null)return null;do d=d.return;while(d&&d.tag!==p);return d||null}function jCe(d,h){for(var m=d,C=h,w=0,D=m;D;D=Cy(D))w++;for(var I=0,R=C;R;R=Cy(R))I++;for(;w-I>0;)m=Cy(m),w--;for(;I-w>0;)C=Cy(C),I--;for(var O=w;O--;){if(m===C||C!==null&&m===C.alternate)return m;m=Cy(m),C=Cy(C)}return null}function sQ(d,h,m,C,w){for(var D=h._reactName,I=[],R=m;R!==null&&R!==C;){var O=R,U=O.alternate,q=O.stateNode,ce=O.tag;if(U!==null&&U===C)break;if(ce===p&&q!==null){var ae=q;if(w){var ke=M0(R,D);ke!=null&&I.unshift(cL(R,ke,ae))}else if(!w){var Te=M0(R,D);Te!=null&&I.push(cL(R,Te,ae))}}R=R.return}I.length!==0&&d.push({event:h,listeners:I})}function qCe(d,h,m,C,w){var D=C&&w?jCe(C,w):null;C!==null&&sQ(d,h,C,D,!1),w!==null&&m!==null&&sQ(d,m,w,D,!0)}function KCe(d,h){return d+"__bubble"}var pl=!1,dL="dangerouslySetInnerHTML",wT="suppressContentEditableWarning",ip="suppressHydrationWarning",oQ="autoFocus",x_="children",k_="style",ST="__html",K3,LT,uL,rQ,xT,aQ,lQ;K3={dialog:!0,webview:!0},LT=function(d,h){I_e(d,h),T_e(d,h),P_e(d,h,{registrationNameDependencies:Jn,possibleRegistrationNames:yn})},aQ=wn&&!document.documentMode,uL=function(d,h,m){if(!pl){var C=kT(m),w=kT(h);w!==C&&(pl=!0,r("Prop `%s` did not match. Server: %s Client: %s",d,JSON.stringify(w),JSON.stringify(C)))}},rQ=function(d){if(!pl){pl=!0;var h=[];d.forEach(function(m){h.push(m)}),r("Extra attributes from the server: %s",h)}},xT=function(d,h){h===!1?r("Expected `%s` listener to be a function, instead got `false`.\n\nIf you used to conditionally omit it with %s={condition && value}, pass %s={condition ? value : undefined} instead.",d,d,d):r("Expected `%s` listener to be a function, instead got a value of `%s` type.",d,typeof h)},lQ=function(d,h){var m=d.namespaceURI===Qh?d.ownerDocument.createElement(d.tagName):d.ownerDocument.createElementNS(d.namespaceURI,d.tagName);return m.innerHTML=h,m.innerHTML};var GCe=/\r\n?/g,YCe=/\u0000|\uFFFD/g;function kT(d){Qs(d);var h=typeof d=="string"?d:""+d;return h.replace(GCe,`
`).replace(YCe,"")}function DT(d,h,m,C){var w=kT(h),D=kT(d);if(D!==w&&(C&&(pl||(pl=!0,r('Text content did not match. Server: "%s" Client: "%s"',D,w))),m&&we))throw new Error("Text content does not match server-rendered HTML.")}function cQ(d){return d.nodeType===ef?d:d.ownerDocument}function ZCe(){}function ET(d){d.onclick=ZCe}function XCe(d,h,m,C,w){for(var D in C)if(C.hasOwnProperty(D)){var I=C[D];if(D===k_)I&&Object.freeze(I),kZ(h,I);else if(D===dL){var R=I?I[ST]:void 0;R!=null&&yZ(h,R)}else if(D===x_)if(typeof I=="string"){var O=d!=="textarea"||I!=="";O&&ZI(h,I)}else typeof I=="number"&&ZI(h,""+I);else D===wT||D===ip||D===oQ||(Jn.hasOwnProperty(D)?I!=null&&(typeof I!="function"&&xT(D,I),D==="onScroll"&&As("scroll",h)):I!=null&&re(h,D,I,w))}}function QCe(d,h,m,C){for(var w=0;w<h.length;w+=2){var D=h[w],I=h[w+1];D===k_?kZ(d,I):D===dL?yZ(d,I):D===x_?ZI(d,I):re(d,D,I,C)}}function JCe(d,h,m,C){var w,D=cQ(m),I,R=C;if(R===Qh&&(R=R5(d)),R===Qh){if(w=g_(d,h),!w&&d!==d.toLowerCase()&&r("<%s /> is using incorrect casing. Use PascalCase for React components, or lowercase for HTML elements.",d),d==="script"){var O=D.createElement("div");O.innerHTML="<script><\/script>";var U=O.firstChild;I=O.removeChild(U)}else if(typeof h.is=="string")I=D.createElement(d,{is:h.is});else if(I=D.createElement(d),d==="select"){var q=I;h.multiple?q.multiple=!0:h.size&&(q.size=h.size)}}else I=D.createElementNS(R,d);return R===Qh&&!w&&Object.prototype.toString.call(I)==="[object HTMLUnknownElement]"&&!Ts.call(K3,d)&&(K3[d]=!0,r("The tag <%s> is unrecognized in this browser. If you meant to render a React component, start its name with an uppercase letter.",d)),I}function eye(d,h){return cQ(h).createTextNode(d)}function tye(d,h,m,C){var w=g_(h,m);LT(h,m);var D;switch(h){case"dialog":As("cancel",d),As("close",d),D=m;break;case"iframe":case"object":case"embed":As("load",d),D=m;break;case"video":case"audio":for(var I=0;I<aL.length;I++)As(aL[I],d);D=m;break;case"source":As("error",d),D=m;break;case"img":case"image":case"link":As("error",d),As("load",d),D=m;break;case"details":As("toggle",d),D=m;break;case"input":ne(d,m),D=F(d,m),As("invalid",d);break;case"option":ms(d,m),D=m;break;case"select":I0(d,m),D=E0(d,m),As("invalid",d);break;case"textarea":vZ(d,m),D=T5(d,m),As("invalid",d);break;default:D=m}switch(F5(h,D),XCe(h,d,C,D,w),h){case"input":Zh(d),ct(d,m,!1);break;case"textarea":Zh(d),CZ(d);break;case"option":Ms(d,m);break;case"select":I5(d,m);break;default:typeof D.onClick=="function"&&ET(d);break}}function iye(d,h,m,C,w){LT(h,C);var D=null,I,R;switch(h){case"input":I=F(d,m),R=F(d,C),D=[];break;case"select":I=E0(d,m),R=E0(d,C),D=[];break;case"textarea":I=T5(d,m),R=T5(d,C),D=[];break;default:I=m,R=C,typeof I.onClick!="function"&&typeof R.onClick=="function"&&ET(d);break}F5(h,R);var O,U,q=null;for(O in I)if(!(R.hasOwnProperty(O)||!I.hasOwnProperty(O)||I[O]==null))if(O===k_){var ce=I[O];for(U in ce)ce.hasOwnProperty(U)&&(q||(q={}),q[U]="")}else O===dL||O===x_||O===wT||O===ip||O===oQ||(Jn.hasOwnProperty(O)?D||(D=[]):(D=D||[]).push(O,null));for(O in R){var ae=R[O],ke=I!=null?I[O]:void 0;if(!(!R.hasOwnProperty(O)||ae===ke||ae==null&&ke==null))if(O===k_)if(ae&&Object.freeze(ae),ke){for(U in ke)ke.hasOwnProperty(U)&&(!ae||!ae.hasOwnProperty(U))&&(q||(q={}),q[U]="");for(U in ae)ae.hasOwnProperty(U)&&ke[U]!==ae[U]&&(q||(q={}),q[U]=ae[U])}else q||(D||(D=[]),D.push(O,q)),q=ae;else if(O===dL){var Te=ae?ae[ST]:void 0,Be=ke?ke[ST]:void 0;Te!=null&&Be!==Te&&(D=D||[]).push(O,Te)}else O===x_?(typeof ae=="string"||typeof ae=="number")&&(D=D||[]).push(O,""+ae):O===wT||O===ip||(Jn.hasOwnProperty(O)?(ae!=null&&(typeof ae!="function"&&xT(O,ae),O==="onScroll"&&As("scroll",d)),!D&&ke!==ae&&(D=[])):(D=D||[]).push(O,ae))}return q&&(y_e(q,R[k_]),(D=D||[]).push(k_,q)),D}function nye(d,h,m,C,w){m==="input"&&w.type==="radio"&&w.name!=null&&Ie(d,w);var D=g_(m,C),I=g_(m,w);switch(QCe(d,h,D,I),m){case"input":Ae(d,w);break;case"textarea":bZ(d,w);break;case"select":Qme(d,w);break}}function sye(d){{var h=d.toLowerCase();return XI.hasOwnProperty(h)&&XI[h]||null}}function oye(d,h,m,C,w,D,I){var R,O;switch(R=g_(h,m),LT(h,m),h){case"dialog":As("cancel",d),As("close",d);break;case"iframe":case"object":case"embed":As("load",d);break;case"video":case"audio":for(var U=0;U<aL.length;U++)As(aL[U],d);break;case"source":As("error",d);break;case"img":case"image":case"link":As("error",d),As("load",d);break;case"details":As("toggle",d);break;case"input":ne(d,m),As("invalid",d);break;case"option":ms(d,m);break;case"select":I0(d,m),As("invalid",d);break;case"textarea":vZ(d,m),As("invalid",d);break}F5(h,m);{O=new Set;for(var q=d.attributes,ce=0;ce<q.length;ce++){var ae=q[ce].name.toLowerCase();switch(ae){case"value":break;case"checked":break;case"selected":break;default:O.add(q[ce].name)}}}var ke=null;for(var Te in m)if(m.hasOwnProperty(Te)){var Be=m[Te];if(Te===x_)typeof Be=="string"?d.textContent!==Be&&(m[ip]!==!0&&DT(d.textContent,Be,D,I),ke=[x_,Be]):typeof Be=="number"&&d.textContent!==""+Be&&(m[ip]!==!0&&DT(d.textContent,Be,D,I),ke=[x_,""+Be]);else if(Jn.hasOwnProperty(Te))Be!=null&&(typeof Be!="function"&&xT(Te,Be),Te==="onScroll"&&As("scroll",d));else if(I&&typeof R=="boolean"){var _t=void 0,Yt=R&&dt?null:Js(Te);if(m[ip]!==!0){if(!(Te===wT||Te===ip||Te==="value"||Te==="checked"||Te==="selected")){if(Te===dL){var Ft=d.innerHTML,Gi=Be?Be[ST]:void 0;if(Gi!=null){var Hi=lQ(d,Gi);Hi!==Ft&&uL(Te,Ft,Hi)}}else if(Te===k_){if(O.delete(Te),aQ){var _e=b_e(Be);_t=d.getAttribute("style"),_e!==_t&&uL(Te,_t,_e)}}else if(R&&!dt)O.delete(Te.toLowerCase()),_t=ie(d,Te,Be),Be!==_t&&uL(Te,_t,Be);else if(!Fn(Te,Yt,R)&&!pi(Te,Be,Yt,R)){var We=!1;if(Yt!==null)O.delete(Yt.attributeName),_t=K(d,Te,Be,Yt);else{var ve=C;if(ve===Qh&&(ve=R5(h)),ve===Qh)O.delete(Te.toLowerCase());else{var Je=sye(Te);Je!==null&&Je!==Te&&(We=!0,O.delete(Je)),O.delete(Te)}_t=ie(d,Te,Be)}var St=dt;!St&&Be!==_t&&!We&&uL(Te,_t,Be)}}}}}switch(I&&O.size>0&&m[ip]!==!0&&rQ(O),h){case"input":Zh(d),ct(d,m,!0);break;case"textarea":Zh(d),CZ(d);break;case"select":case"option":break;default:typeof m.onClick=="function"&&ET(d);break}return ke}function rye(d,h,m){var C=d.nodeValue!==h;return C}function G3(d,h){{if(pl)return;pl=!0,r("Did not expect server HTML to contain a <%s> in <%s>.",h.nodeName.toLowerCase(),d.nodeName.toLowerCase())}}function Y3(d,h){{if(pl)return;pl=!0,r('Did not expect server HTML to contain the text node "%s" in <%s>.',h.nodeValue,d.nodeName.toLowerCase())}}function Z3(d,h,m){{if(pl)return;pl=!0,r("Expected server HTML to contain a matching <%s> in <%s>.",h,d.nodeName.toLowerCase())}}function X3(d,h){{if(h===""||pl)return;pl=!0,r('Expected server HTML to contain a matching text node for "%s" in <%s>.',h,d.nodeName.toLowerCase())}}function aye(d,h,m){switch(h){case"input":ri(d,m);return;case"textarea":e_e(d,m);return;case"select":Jme(d,m);return}}var hL=function(){},fL=function(){};{var lye=["address","applet","area","article","aside","base","basefont","bgsound","blockquote","body","br","button","caption","center","col","colgroup","dd","details","dir","div","dl","dt","embed","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","iframe","img","input","isindex","li","link","listing","main","marquee","menu","menuitem","meta","nav","noembed","noframes","noscript","object","ol","p","param","plaintext","pre","script","section","select","source","style","summary","table","tbody","td","template","textarea","tfoot","th","thead","title","tr","track","ul","wbr","xmp"],dQ=["applet","caption","html","table","td","th","marquee","object","template","foreignObject","desc","title"],cye=dQ.concat(["button"]),dye=["dd","dt","li","option","optgroup","p","rp","rt"],uQ={current:null,formTag:null,aTagInScope:null,buttonTagInScope:null,nobrTagInScope:null,pTagInButtonScope:null,listItemTagAutoclosing:null,dlItemTagAutoclosing:null};fL=function(d,h){var m=zi({},d||uQ),C={tag:h};return dQ.indexOf(h)!==-1&&(m.aTagInScope=null,m.buttonTagInScope=null,m.nobrTagInScope=null),cye.indexOf(h)!==-1&&(m.pTagInButtonScope=null),lye.indexOf(h)!==-1&&h!=="address"&&h!=="div"&&h!=="p"&&(m.listItemTagAutoclosing=null,m.dlItemTagAutoclosing=null),m.current=C,h==="form"&&(m.formTag=C),h==="a"&&(m.aTagInScope=C),h==="button"&&(m.buttonTagInScope=C),h==="nobr"&&(m.nobrTagInScope=C),h==="p"&&(m.pTagInButtonScope=C),h==="li"&&(m.listItemTagAutoclosing=C),(h==="dd"||h==="dt")&&(m.dlItemTagAutoclosing=C),m};var uye=function(d,h){switch(h){case"select":return d==="option"||d==="optgroup"||d==="#text";case"optgroup":return d==="option"||d==="#text";case"option":return d==="#text";case"tr":return d==="th"||d==="td"||d==="style"||d==="script"||d==="template";case"tbody":case"thead":case"tfoot":return d==="tr"||d==="style"||d==="script"||d==="template";case"colgroup":return d==="col"||d==="template";case"table":return d==="caption"||d==="colgroup"||d==="tbody"||d==="tfoot"||d==="thead"||d==="style"||d==="script"||d==="template";case"head":return d==="base"||d==="basefont"||d==="bgsound"||d==="link"||d==="meta"||d==="title"||d==="noscript"||d==="noframes"||d==="style"||d==="script"||d==="template";case"html":return d==="head"||d==="body"||d==="frameset";case"frameset":return d==="frame";case"#document":return d==="html"}switch(d){case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return h!=="h1"&&h!=="h2"&&h!=="h3"&&h!=="h4"&&h!=="h5"&&h!=="h6";case"rp":case"rt":return dye.indexOf(h)===-1;case"body":case"caption":case"col":case"colgroup":case"frameset":case"frame":case"head":case"html":case"tbody":case"td":case"tfoot":case"th":case"thead":case"tr":return h==null}return!0},hye=function(d,h){switch(d){case"address":case"article":case"aside":case"blockquote":case"center":case"details":case"dialog":case"dir":case"div":case"dl":case"fieldset":case"figcaption":case"figure":case"footer":case"header":case"hgroup":case"main":case"menu":case"nav":case"ol":case"p":case"section":case"summary":case"ul":case"pre":case"listing":case"table":case"hr":case"xmp":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return h.pTagInButtonScope;case"form":return h.formTag||h.pTagInButtonScope;case"li":return h.listItemTagAutoclosing;case"dd":case"dt":return h.dlItemTagAutoclosing;case"button":return h.buttonTagInScope;case"a":return h.aTagInScope;case"nobr":return h.nobrTagInScope}return null},hQ={};hL=function(d,h,m){m=m||uQ;var C=m.current,w=C&&C.tag;h!=null&&(d!=null&&r("validateDOMNesting: when childText is passed, childTag should be null"),d="#text");var D=uye(d,w)?null:C,I=D?null:hye(d,m),R=D||I;if(R){var O=R.tag,U=!!D+"|"+d+"|"+O;if(!hQ[U]){hQ[U]=!0;var q=d,ce="";if(d==="#text"?/\S/.test(h)?q="Text nodes":(q="Whitespace text nodes",ce=" Make sure you don't have any extra whitespace between tags on each line of your source code."):q="<"+d+">",D){var ae="";O==="table"&&d==="tr"&&(ae+=" Add a <tbody>, <thead> or <tfoot> to your code to match the DOM tree generated by the browser."),r("validateDOMNesting(...): %s cannot appear as a child of <%s>.%s%s",q,O,ce,ae)}else r("validateDOMNesting(...): %s cannot appear as a descendant of <%s>.",q,O)}}}}var IT="suppressHydrationWarning",TT="$",NT="/$",gL="$?",pL="$!",fye="style",Q3=null,J3=null;function gye(d){var h,m,C=d.nodeType;switch(C){case ef:case A5:{h=C===ef?"#document":"#fragment";var w=d.documentElement;m=w?w.namespaceURI:M5(null,"");break}default:{var D=C===So?d.parentNode:d,I=D.namespaceURI||null;h=D.tagName,m=M5(I,h);break}}{var R=h.toLowerCase(),O=fL(null,R);return{namespace:m,ancestorInfo:O}}}function pye(d,h,m){{var C=d,w=M5(C.namespace,h),D=fL(C.ancestorInfo,h);return{namespace:w,ancestorInfo:D}}}function YJe(d){return d}function mye(d){Q3=fbe(),J3=TCe();var h=null;return CX(!1),h}function _ye(d){NCe(J3),CX(Q3),Q3=null,J3=null}function vye(d,h,m,C,w){var D;{var I=C;if(hL(d,null,I.ancestorInfo),typeof h.children=="string"||typeof h.children=="number"){var R=""+h.children,O=fL(I.ancestorInfo,d);hL(null,R,O)}D=I.namespace}var U=JCe(d,h,m,D);return vL(w,U),aB(U,h),U}function bye(d,h){d.appendChild(h)}function Cye(d,h,m,C,w){switch(tye(d,h,m,C),h){case"button":case"input":case"select":case"textarea":return!!m.autoFocus;case"img":return!0;default:return!1}}function yye(d,h,m,C,w,D){{var I=D;if(typeof C.children!=typeof m.children&&(typeof C.children=="string"||typeof C.children=="number")){var R=""+C.children,O=fL(I.ancestorInfo,h);hL(null,R,O)}}return iye(d,h,m,C)}function eB(d,h){return d==="textarea"||d==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}function wye(d,h,m,C){{var w=m;hL(null,d,w.ancestorInfo)}var D=eye(d,h);return vL(C,D),D}function Sye(){var d=window.event;return d===void 0?lf:yX(d.type)}var tB=typeof setTimeout=="function"?setTimeout:void 0,Lye=typeof clearTimeout=="function"?clearTimeout:void 0,iB=-1,fQ=typeof Promise=="function"?Promise:void 0,xye=typeof queueMicrotask=="function"?queueMicrotask:typeof fQ<"u"?function(d){return fQ.resolve(null).then(d).catch(kye)}:tB;function kye(d){setTimeout(function(){throw d})}function Dye(d,h,m,C){switch(h){case"button":case"input":case"select":case"textarea":m.autoFocus&&d.focus();return;case"img":{m.src&&(d.src=m.src);return}}}function Eye(d,h,m,C,w,D){nye(d,h,m,C,w),aB(d,w)}function gQ(d){ZI(d,"")}function Iye(d,h,m){d.nodeValue=m}function Tye(d,h){d.appendChild(h)}function Nye(d,h){var m;d.nodeType===So?(m=d.parentNode,m.insertBefore(h,d)):(m=d,m.appendChild(h));var C=d._reactRootContainer;C==null&&m.onclick===null&&ET(m)}function Rye(d,h,m){d.insertBefore(h,m)}function Mye(d,h,m){d.nodeType===So?d.parentNode.insertBefore(h,m):d.insertBefore(h,m)}function Aye(d,h){d.removeChild(h)}function Pye(d,h){d.nodeType===So?d.parentNode.removeChild(h):d.removeChild(h)}function nB(d,h){var m=h,C=0;do{var w=m.nextSibling;if(d.removeChild(m),w&&w.nodeType===So){var D=w.data;if(D===NT)if(C===0){d.removeChild(w),X0(h);return}else C--;else(D===TT||D===gL||D===pL)&&C++}m=w}while(m);X0(h)}function Oye(d,h){d.nodeType===So?nB(d.parentNode,h):d.nodeType===gl&&nB(d,h),X0(d)}function Fye(d){d=d;var h=d.style;typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none"}function Bye(d){d.nodeValue=""}function Wye(d,h){d=d;var m=h[fye],C=m!=null&&m.hasOwnProperty("display")?m.display:null;d.style.display=P5("display",C)}function Hye(d,h){d.nodeValue=h}function Vye(d){d.nodeType===gl?d.textContent="":d.nodeType===ef&&d.documentElement&&d.removeChild(d.documentElement)}function zye(d,h,m){return d.nodeType!==gl||h.toLowerCase()!==d.nodeName.toLowerCase()?null:d}function Uye(d,h){return h===""||d.nodeType!==Jh?null:d}function $ye(d){return d.nodeType!==So?null:d}function pQ(d){return d.data===gL}function sB(d){return d.data===pL}function jye(d){var h=d.nextSibling&&d.nextSibling.dataset,m,C,w;return h&&(m=h.dgst,C=h.msg,w=h.stck),{message:C,digest:m,stack:w}}function qye(d,h){d._reactRetry=h}function RT(d){for(;d!=null;d=d.nextSibling){var h=d.nodeType;if(h===gl||h===Jh)break;if(h===So){var m=d.data;if(m===TT||m===pL||m===gL)break;if(m===NT)return null}}return d}function mL(d){return RT(d.nextSibling)}function Kye(d){return RT(d.firstChild)}function Gye(d){return RT(d.firstChild)}function Yye(d){return RT(d.nextSibling)}function Zye(d,h,m,C,w,D,I){vL(D,d),aB(d,m);var R;{var O=w;R=O.namespace}var U=(D.mode&qi)!==Xt;return oye(d,h,m,R,C,U,I)}function Xye(d,h,m,C){return vL(m,d),m.mode&qi,rye(d,h)}function Qye(d,h){vL(h,d)}function Jye(d){for(var h=d.nextSibling,m=0;h;){if(h.nodeType===So){var C=h.data;if(C===NT){if(m===0)return mL(h);m--}else(C===TT||C===pL||C===gL)&&m++}h=h.nextSibling}return null}function mQ(d){for(var h=d.previousSibling,m=0;h;){if(h.nodeType===So){var C=h.data;if(C===TT||C===pL||C===gL){if(m===0)return h;m--}else C===NT&&m++}h=h.previousSibling}return null}function ewe(d){X0(d)}function twe(d){X0(d)}function iwe(d){return d!=="head"&&d!=="body"}function nwe(d,h,m,C){var w=!0;DT(h.nodeValue,m,C,w)}function swe(d,h,m,C,w,D){if(h[IT]!==!0){var I=!0;DT(C.nodeValue,w,D,I)}}function owe(d,h){h.nodeType===gl?G3(d,h):h.nodeType===So||Y3(d,h)}function rwe(d,h){{var m=d.parentNode;m!==null&&(h.nodeType===gl?G3(m,h):h.nodeType===So||Y3(m,h))}}function awe(d,h,m,C,w){(w||h[IT]!==!0)&&(C.nodeType===gl?G3(m,C):C.nodeType===So||Y3(m,C))}function lwe(d,h,m){Z3(d,h)}function cwe(d,h){X3(d,h)}function dwe(d,h,m){{var C=d.parentNode;C!==null&&Z3(C,h)}}function uwe(d,h){{var m=d.parentNode;m!==null&&X3(m,h)}}function hwe(d,h,m,C,w,D){(D||h[IT]!==!0)&&Z3(m,C)}function fwe(d,h,m,C,w){(w||h[IT]!==!0)&&X3(m,C)}function gwe(d){r("An error occurred during hydration. The server HTML was replaced with client content in <%s>.",d.nodeName.toLowerCase())}function pwe(d){lL(d)}var yy=Math.random().toString(36).slice(2),wy="__reactFiber$"+yy,oB="__reactProps$"+yy,_L="__reactContainer$"+yy,rB="__reactEvents$"+yy,mwe="__reactListeners$"+yy,_we="__reactHandles$"+yy;function vwe(d){delete d[wy],delete d[oB],delete d[rB],delete d[mwe],delete d[_we]}function vL(d,h){h[wy]=d}function MT(d,h){h[_L]=d}function _Q(d){d[_L]=null}function bL(d){return!!d[_L]}function D_(d){var h=d[wy];if(h)return h;for(var m=d.parentNode;m;){if(h=m[_L]||m[wy],h){var C=h.alternate;if(h.child!==null||C!==null&&C.child!==null)for(var w=mQ(d);w!==null;){var D=w[wy];if(D)return D;w=mQ(w)}return h}d=m,m=d.parentNode}return null}function np(d){var h=d[wy]||d[_L];return h&&(h.tag===p||h.tag===_||h.tag===E||h.tag===f)?h:null}function Sy(d){if(d.tag===p||d.tag===_)return d.stateNode;throw new Error("getNodeFromInstance: Invalid argument.")}function AT(d){return d[oB]||null}function aB(d,h){d[oB]=h}function bwe(d){var h=d[rB];return h===void 0&&(h=d[rB]=new Set),h}var vQ={},bQ=t.ReactDebugCurrentFrame;function PT(d){if(d){var h=d._owner,m=jg(d.type,d._source,h?h.type:null);bQ.setExtraStackFrame(m)}else bQ.setExtraStackFrame(null)}function Cd(d,h,m,C,w){{var D=Function.call.bind(Ts);for(var I in d)if(D(d,I)){var R=void 0;try{if(typeof d[I]!="function"){var O=Error((C||"React class")+": "+m+" type `"+I+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof d[I]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw O.name="Invariant Violation",O}R=d[I](h,I,C,m,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(U){R=U}R&&!(R instanceof Error)&&(PT(w),r("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",C||"React class",m,I,typeof R),PT(null)),R instanceof Error&&!(R.message in vQ)&&(vQ[R.message]=!0,PT(w),r("Failed %s type: %s",m,R.message),PT(null))}}}var lB=[],OT;OT=[];var cf=-1;function sp(d){return{current:d}}function ha(d,h){if(cf<0){r("Unexpected pop.");return}h!==OT[cf]&&r("Unexpected Fiber popped."),d.current=lB[cf],lB[cf]=null,OT[cf]=null,cf--}function fa(d,h,m){cf++,lB[cf]=d.current,OT[cf]=m,d.current=h}var cB;cB={};var oc={};Object.freeze(oc);var df=sp(oc),Mu=sp(!1),dB=oc;function Ly(d,h,m){return m&&Au(h)?dB:df.current}function CQ(d,h,m){{var C=d.stateNode;C.__reactInternalMemoizedUnmaskedChildContext=h,C.__reactInternalMemoizedMaskedChildContext=m}}function xy(d,h){{var m=d.type,C=m.contextTypes;if(!C)return oc;var w=d.stateNode;if(w&&w.__reactInternalMemoizedUnmaskedChildContext===h)return w.__reactInternalMemoizedMaskedChildContext;var D={};for(var I in C)D[I]=h[I];{var R=Ei(d)||"Unknown";Cd(C,D,"context",R)}return w&&CQ(d,h,D),D}}function FT(){return Mu.current}function Au(d){{var h=d.childContextTypes;return h!=null}}function BT(d){ha(Mu,d),ha(df,d)}function uB(d){ha(Mu,d),ha(df,d)}function yQ(d,h,m){{if(df.current!==oc)throw new Error("Unexpected context found on stack. This error is likely caused by a bug in React. Please file an issue.");fa(df,h,d),fa(Mu,m,d)}}function wQ(d,h,m){{var C=d.stateNode,w=h.childContextTypes;if(typeof C.getChildContext!="function"){{var D=Ei(d)||"Unknown";cB[D]||(cB[D]=!0,r("%s.childContextTypes is specified but there is no getChildContext() method on the instance. You can either define getChildContext() on %s or remove childContextTypes from it.",D,D))}return m}var I=C.getChildContext();for(var R in I)if(!(R in w))throw new Error((Ei(d)||"Unknown")+'.getChildContext(): key "'+R+'" is not defined in childContextTypes.');{var O=Ei(d)||"Unknown";Cd(w,I,"child context",O)}return zi({},m,I)}}function WT(d){{var h=d.stateNode,m=h&&h.__reactInternalMemoizedMergedChildContext||oc;return dB=df.current,fa(df,m,d),fa(Mu,Mu.current,d),!0}}function SQ(d,h,m){{var C=d.stateNode;if(!C)throw new Error("Expected to have an instance by this point. This error is likely caused by a bug in React. Please file an issue.");if(m){var w=wQ(d,h,dB);C.__reactInternalMemoizedMergedChildContext=w,ha(Mu,d),ha(df,d),fa(df,w,d),fa(Mu,m,d)}else ha(Mu,d),fa(Mu,m,d)}}function Cwe(d){{if(!ive(d)||d.tag!==c)throw new Error("Expected subtree parent to be a mounted class component. This error is likely caused by a bug in React. Please file an issue.");var h=d;do{switch(h.tag){case f:return h.stateNode.context;case c:{var m=h.type;if(Au(m))return h.stateNode.__reactInternalMemoizedMergedChildContext;break}}h=h.return}while(h!==null);throw new Error("Found unexpected detached subtree parent. This error is likely caused by a bug in React. Please file an issue.")}}var op=0,HT=1,uf=null,hB=!1,fB=!1;function LQ(d){uf===null?uf=[d]:uf.push(d)}function ywe(d){hB=!0,LQ(d)}function xQ(){hB&&rp()}function rp(){if(!fB&&uf!==null){fB=!0;var d=0,h=bd();try{var m=!0,C=uf;for(ur(ic);d<C.length;d++){var w=C[d];do w=w(m);while(w!==null)}uf=null,hB=!1}catch(D){throw uf!==null&&(uf=uf.slice(d+1)),YZ(iT,rp),D}finally{ur(h),fB=!1}}return null}var ky=[],Dy=0,VT=null,zT=0,Oc=[],Fc=0,E_=null,hf=1,ff="";function wwe(d){return T_(),(d.flags&VZ)!==ni}function Swe(d){return T_(),zT}function Lwe(){var d=ff,h=hf,m=h&~xwe(h);return m.toString(32)+d}function I_(d,h){T_(),ky[Dy++]=zT,ky[Dy++]=VT,VT=d,zT=h}function kQ(d,h,m){T_(),Oc[Fc++]=hf,Oc[Fc++]=ff,Oc[Fc++]=E_,E_=d;var C=hf,w=ff,D=UT(C)-1,I=C&~(1<<D),R=m+1,O=UT(h)+D;if(O>30){var U=D-D%5,q=(1<<U)-1,ce=(I&q).toString(32),ae=I>>U,ke=D-U,Te=UT(h)+ke,Be=R<<ke,_t=Be|ae,Yt=ce+w;hf=1<<Te|_t,ff=Yt}else{var Ft=R<<D,Gi=Ft|I,Hi=w;hf=1<<O|Gi,ff=Hi}}function gB(d){T_();var h=d.return;if(h!==null){var m=1,C=0;I_(d,m),kQ(d,m,C)}}function UT(d){return 32-tX(d)}function xwe(d){return 1<<UT(d)-1}function pB(d){for(;d===VT;)VT=ky[--Dy],ky[Dy]=null,zT=ky[--Dy],ky[Dy]=null;for(;d===E_;)E_=Oc[--Fc],Oc[Fc]=null,ff=Oc[--Fc],Oc[Fc]=null,hf=Oc[--Fc],Oc[Fc]=null}function kwe(){return T_(),E_!==null?{id:hf,overflow:ff}:null}function Dwe(d,h){T_(),Oc[Fc++]=hf,Oc[Fc++]=ff,Oc[Fc++]=E_,hf=h.id,ff=h.overflow,E_=d}function T_(){Er()||r("Expected to be hydrating. This is a bug in React. Please file an issue.")}var Dr=null,Bc=null,yd=!1,N_=!1,ap=null;function Ewe(){yd&&r("We should not be hydrating here. This is a bug in React. Please file a bug.")}function DQ(){N_=!0}function Iwe(){return N_}function Twe(d){var h=d.stateNode.containerInfo;return Bc=Gye(h),Dr=d,yd=!0,ap=null,N_=!1,!0}function Nwe(d,h,m){return Bc=Yye(h),Dr=d,yd=!0,ap=null,N_=!1,m!==null&&Dwe(d,m),!0}function EQ(d,h){switch(d.tag){case f:{owe(d.stateNode.containerInfo,h);break}case p:{var m=(d.mode&qi)!==Xt;awe(d.type,d.memoizedProps,d.stateNode,h,m);break}case E:{var C=d.memoizedState;C.dehydrated!==null&&rwe(C.dehydrated,h);break}}}function IQ(d,h){EQ(d,h);var m=P0e();m.stateNode=h,m.return=d;var C=d.deletions;C===null?(d.deletions=[m],d.flags|=p_):C.push(m)}function mB(d,h){{if(N_)return;switch(d.tag){case f:{var m=d.stateNode.containerInfo;switch(h.tag){case p:var C=h.type;h.pendingProps,lwe(m,C);break;case _:var w=h.pendingProps;cwe(m,w);break}break}case p:{var D=d.type,I=d.memoizedProps,R=d.stateNode;switch(h.tag){case p:{var O=h.type,U=h.pendingProps,q=(d.mode&qi)!==Xt;hwe(D,I,R,O,U,q);break}case _:{var ce=h.pendingProps,ae=(d.mode&qi)!==Xt;fwe(D,I,R,ce,ae);break}}break}case E:{var ke=d.memoizedState,Te=ke.dehydrated;if(Te!==null)switch(h.tag){case p:var Be=h.type;h.pendingProps,dwe(Te,Be);break;case _:var _t=h.pendingProps;uwe(Te,_t);break}break}default:return}}}function TQ(d,h){h.flags=h.flags&~nf|Lo,mB(d,h)}function NQ(d,h){switch(d.tag){case p:{var m=d.type;d.pendingProps;var C=zye(h,m);return C!==null?(d.stateNode=C,Dr=d,Bc=Kye(C),!0):!1}case _:{var w=d.pendingProps,D=Uye(h,w);return D!==null?(d.stateNode=D,Dr=d,Bc=null,!0):!1}case E:{var I=$ye(h);if(I!==null){var R={dehydrated:I,treeContext:kwe(),retryLane:ec};d.memoizedState=R;var O=O0e(I);return O.return=d,d.child=O,Dr=d,Bc=null,!0}return!1}default:return!1}}function _B(d){return(d.mode&qi)!==Xt&&(d.flags&xn)===ni}function vB(d){throw new Error("Hydration failed because the initial UI does not match what was rendered on the server.")}function bB(d){if(yd){var h=Bc;if(!h){_B(d)&&(mB(Dr,d),vB()),TQ(Dr,d),yd=!1,Dr=d;return}var m=h;if(!NQ(d,h)){_B(d)&&(mB(Dr,d),vB()),h=mL(m);var C=Dr;if(!h||!NQ(d,h)){TQ(Dr,d),yd=!1,Dr=d;return}IQ(C,m)}}}function Rwe(d,h,m){var C=d.stateNode,w=!N_,D=Zye(C,d.type,d.memoizedProps,h,m,d,w);return d.updateQueue=D,D!==null}function Mwe(d){var h=d.stateNode,m=d.memoizedProps,C=Xye(h,m,d);if(C){var w=Dr;if(w!==null)switch(w.tag){case f:{var D=w.stateNode.containerInfo,I=(w.mode&qi)!==Xt;nwe(D,h,m,I);break}case p:{var R=w.type,O=w.memoizedProps,U=w.stateNode,q=(w.mode&qi)!==Xt;swe(R,O,U,h,m,q);break}}}return C}function Awe(d){var h=d.memoizedState,m=h!==null?h.dehydrated:null;if(!m)throw new Error("Expected to have a hydrated suspense instance. This error is likely caused by a bug in React. Please file an issue.");Qye(m,d)}function Pwe(d){var h=d.memoizedState,m=h!==null?h.dehydrated:null;if(!m)throw new Error("Expected to have a hydrated suspense instance. This error is likely caused by a bug in React. Please file an issue.");return Jye(m)}function RQ(d){for(var h=d.return;h!==null&&h.tag!==p&&h.tag!==f&&h.tag!==E;)h=h.return;Dr=h}function $T(d){if(d!==Dr)return!1;if(!yd)return RQ(d),yd=!0,!1;if(d.tag!==f&&(d.tag!==p||iwe(d.type)&&!eB(d.type,d.memoizedProps))){var h=Bc;if(h)if(_B(d))MQ(d),vB();else for(;h;)IQ(d,h),h=mL(h)}return RQ(d),d.tag===E?Bc=Pwe(d):Bc=Dr?mL(d.stateNode):null,!0}function Owe(){return yd&&Bc!==null}function MQ(d){for(var h=Bc;h;)EQ(d,h),h=mL(h)}function Ey(){Dr=null,Bc=null,yd=!1,N_=!1}function AQ(){ap!==null&&(Dee(ap),ap=null)}function Er(){return yd}function CB(d){ap===null?ap=[d]:ap.push(d)}var Fwe=t.ReactCurrentBatchConfig,Bwe=null;function Wwe(){return Fwe.transition}var wd={recordUnsafeLifecycleWarnings:function(d,h){},flushPendingUnsafeLifecycleWarnings:function(){},recordLegacyContextWarning:function(d,h){},flushLegacyContextWarning:function(){},discardPendingWarnings:function(){}};{var Hwe=function(d){for(var h=null,m=d;m!==null;)m.mode&to&&(h=m),m=m.return;return h},R_=function(d){var h=[];return d.forEach(function(m){h.push(m)}),h.sort().join(", ")},CL=[],yL=[],wL=[],SL=[],LL=[],xL=[],M_=new Set;wd.recordUnsafeLifecycleWarnings=function(d,h){M_.has(d.type)||(typeof h.componentWillMount=="function"&&h.componentWillMount.__suppressDeprecationWarning!==!0&&CL.push(d),d.mode&to&&typeof h.UNSAFE_componentWillMount=="function"&&yL.push(d),typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps.__suppressDeprecationWarning!==!0&&wL.push(d),d.mode&to&&typeof h.UNSAFE_componentWillReceiveProps=="function"&&SL.push(d),typeof h.componentWillUpdate=="function"&&h.componentWillUpdate.__suppressDeprecationWarning!==!0&&LL.push(d),d.mode&to&&typeof h.UNSAFE_componentWillUpdate=="function"&&xL.push(d))},wd.flushPendingUnsafeLifecycleWarnings=function(){var d=new Set;CL.length>0&&(CL.forEach(function(ae){d.add(Ei(ae)||"Component"),M_.add(ae.type)}),CL=[]);var h=new Set;yL.length>0&&(yL.forEach(function(ae){h.add(Ei(ae)||"Component"),M_.add(ae.type)}),yL=[]);var m=new Set;wL.length>0&&(wL.forEach(function(ae){m.add(Ei(ae)||"Component"),M_.add(ae.type)}),wL=[]);var C=new Set;SL.length>0&&(SL.forEach(function(ae){C.add(Ei(ae)||"Component"),M_.add(ae.type)}),SL=[]);var w=new Set;LL.length>0&&(LL.forEach(function(ae){w.add(Ei(ae)||"Component"),M_.add(ae.type)}),LL=[]);var D=new Set;if(xL.length>0&&(xL.forEach(function(ae){D.add(Ei(ae)||"Component"),M_.add(ae.type)}),xL=[]),h.size>0){var I=R_(h);r(`Using UNSAFE_componentWillMount in strict mode is not recommended and may indicate bugs in your code. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move code with side effects to componentDidMount, and set initial state in the constructor.

Please update the following components: %s`,I)}if(C.size>0){var R=R_(C);r(`Using UNSAFE_componentWillReceiveProps in strict mode is not recommended and may indicate bugs in your code. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move data fetching code or side effects to componentDidUpdate.
* If you're updating state whenever props change, refactor your code to use memoization techniques or move it to static getDerivedStateFromProps. Learn more at: https://reactjs.org/link/derived-state

Please update the following components: %s`,R)}if(D.size>0){var O=R_(D);r(`Using UNSAFE_componentWillUpdate in strict mode is not recommended and may indicate bugs in your code. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move data fetching code or side effects to componentDidUpdate.

Please update the following components: %s`,O)}if(d.size>0){var U=R_(d);s(`componentWillMount has been renamed, and is not recommended for use. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move code with side effects to componentDidMount, and set initial state in the constructor.
* Rename componentWillMount to UNSAFE_componentWillMount to suppress this warning in non-strict mode. In React 18.x, only the UNSAFE_ name will work. To rename all deprecated lifecycles to their new names, you can run \`npx react-codemod rename-unsafe-lifecycles\` in your project source folder.

Please update the following components: %s`,U)}if(m.size>0){var q=R_(m);s(`componentWillReceiveProps has been renamed, and is not recommended for use. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move data fetching code or side effects to componentDidUpdate.
* If you're updating state whenever props change, refactor your code to use memoization techniques or move it to static getDerivedStateFromProps. Learn more at: https://reactjs.org/link/derived-state
* Rename componentWillReceiveProps to UNSAFE_componentWillReceiveProps to suppress this warning in non-strict mode. In React 18.x, only the UNSAFE_ name will work. To rename all deprecated lifecycles to their new names, you can run \`npx react-codemod rename-unsafe-lifecycles\` in your project source folder.

Please update the following components: %s`,q)}if(w.size>0){var ce=R_(w);s(`componentWillUpdate has been renamed, and is not recommended for use. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move data fetching code or side effects to componentDidUpdate.
* Rename componentWillUpdate to UNSAFE_componentWillUpdate to suppress this warning in non-strict mode. In React 18.x, only the UNSAFE_ name will work. To rename all deprecated lifecycles to their new names, you can run \`npx react-codemod rename-unsafe-lifecycles\` in your project source folder.

Please update the following components: %s`,ce)}};var jT=new Map,PQ=new Set;wd.recordLegacyContextWarning=function(d,h){var m=Hwe(d);if(m===null){r("Expected to find a StrictMode component in a strict mode tree. This error is likely caused by a bug in React. Please file an issue.");return}if(!PQ.has(d.type)){var C=jT.get(m);(d.type.contextTypes!=null||d.type.childContextTypes!=null||h!==null&&typeof h.getChildContext=="function")&&(C===void 0&&(C=[],jT.set(m,C)),C.push(d))}},wd.flushLegacyContextWarning=function(){jT.forEach(function(d,h){if(d.length!==0){var m=d[0],C=new Set;d.forEach(function(D){C.add(Ei(D)||"Component"),PQ.add(D.type)});var w=R_(C);try{zs(m),r(`Legacy context API has been detected within a strict-mode tree.

The old API will be supported in all 16.x releases, but applications using it should migrate to the new version.

Please update the following components: %s

Learn more about this warning here: https://reactjs.org/link/legacy-context`,w)}finally{ar()}}})},wd.discardPendingWarnings=function(){CL=[],yL=[],wL=[],SL=[],LL=[],xL=[],jT=new Map}}var yB,wB,SB,LB,xB,OQ=function(d,h){};yB=!1,wB=!1,SB={},LB={},xB={},OQ=function(d,h){if(!(d===null||typeof d!="object")&&!(!d._store||d._store.validated||d.key!=null)){if(typeof d._store!="object")throw new Error("React Component in warnForMissingKey should have a _store. This error is likely caused by a bug in React. Please file an issue.");d._store.validated=!0;var m=Ei(h)||"Component";LB[m]||(LB[m]=!0,r('Each child in a list should have a unique "key" prop. See https://reactjs.org/link/warning-keys for more information.'))}};function Vwe(d){return d.prototype&&d.prototype.isReactComponent}function kL(d,h,m){var C=m.ref;if(C!==null&&typeof C!="function"&&typeof C!="object"){if((d.mode&to||Ot)&&!(m._owner&&m._self&&m._owner.stateNode!==m._self)&&!(m._owner&&m._owner.tag!==c)&&!(typeof m.type=="function"&&!Vwe(m.type))&&m._owner){var w=Ei(d)||"Component";SB[w]||(r('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. We recommend using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',w,C),SB[w]=!0)}if(m._owner){var D=m._owner,I;if(D){var R=D;if(R.tag!==c)throw new Error("Function components cannot have string refs. We recommend using useRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref");I=R.stateNode}if(!I)throw new Error("Missing owner for string ref "+C+". This error is likely caused by a bug in React. Please file an issue.");var O=I;Hs(C,"ref");var U=""+C;if(h!==null&&h.ref!==null&&typeof h.ref=="function"&&h.ref._stringRef===U)return h.ref;var q=function(ce){var ae=O.refs;ce===null?delete ae[U]:ae[U]=ce};return q._stringRef=U,q}else{if(typeof C!="string")throw new Error("Expected ref to be a function, a string, an object returned by React.createRef(), or null.");if(!m._owner)throw new Error("Element ref was specified as a string ("+C+`) but no owner was set. This could happen for one of the following reasons:
1. You may be adding a ref to a function component
2. You may be adding a ref to a component that was not created inside a component's render method
3. You have multiple copies of React loaded
See https://reactjs.org/link/refs-must-have-owner for more information.`)}}return C}function qT(d,h){var m=Object.prototype.toString.call(h);throw new Error("Objects are not valid as a React child (found: "+(m==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":m)+"). If you meant to render a collection of children, use an array instead.")}function KT(d){{var h=Ei(d)||"Component";if(xB[h])return;xB[h]=!0,r("Functions are not valid as a React child. This may happen if you return a Component instead of <Component /> from render. Or maybe you meant to call this function rather than return it.")}}function FQ(d){var h=d._payload,m=d._init;return m(h)}function BQ(d){function h(_e,We){if(d){var ve=_e.deletions;ve===null?(_e.deletions=[We],_e.flags|=p_):ve.push(We)}}function m(_e,We){if(!d)return null;for(var ve=We;ve!==null;)h(_e,ve),ve=ve.sibling;return null}function C(_e,We){for(var ve=new Map,Je=We;Je!==null;)Je.key!==null?ve.set(Je.key,Je):ve.set(Je.index,Je),Je=Je.sibling;return ve}function w(_e,We){var ve=z_(_e,We);return ve.index=0,ve.sibling=null,ve}function D(_e,We,ve){if(_e.index=ve,!d)return _e.flags|=VZ,We;var Je=_e.alternate;if(Je!==null){var St=Je.index;return St<We?(_e.flags|=Lo,We):St}else return _e.flags|=Lo,We}function I(_e){return d&&_e.alternate===null&&(_e.flags|=Lo),_e}function R(_e,We,ve,Je){if(We===null||We.tag!==_){var St=CH(ve,_e.mode,Je);return St.return=_e,St}else{var vt=w(We,ve);return vt.return=_e,vt}}function O(_e,We,ve,Je){var St=ve.type;if(St===j)return q(_e,We,ve.props.children,Je,ve.key);if(We!==null&&(We.elementType===St||Uee(We,ve)||typeof St=="object"&&St!==null&&St.$$typeof===Me&&FQ(St)===We.type)){var vt=w(We,ve.props);return vt.ref=kL(_e,We,ve),vt.return=_e,vt._debugSource=ve._source,vt._debugOwner=ve._owner,vt}var ai=bH(ve,_e.mode,Je);return ai.ref=kL(_e,We,ve),ai.return=_e,ai}function U(_e,We,ve,Je){if(We===null||We.tag!==g||We.stateNode.containerInfo!==ve.containerInfo||We.stateNode.implementation!==ve.implementation){var St=yH(ve,_e.mode,Je);return St.return=_e,St}else{var vt=w(We,ve.children||[]);return vt.return=_e,vt}}function q(_e,We,ve,Je,St){if(We===null||We.tag!==b){var vt=vp(ve,_e.mode,Je,St);return vt.return=_e,vt}else{var ai=w(We,ve);return ai.return=_e,ai}}function ce(_e,We,ve){if(typeof We=="string"&&We!==""||typeof We=="number"){var Je=CH(""+We,_e.mode,ve);return Je.return=_e,Je}if(typeof We=="object"&&We!==null){switch(We.$$typeof){case ye:{var St=bH(We,_e.mode,ve);return St.ref=kL(_e,null,We),St.return=_e,St}case Ne:{var vt=yH(We,_e.mode,ve);return vt.return=_e,vt}case Me:{var ai=We._payload,yi=We._init;return ce(_e,yi(ai),ve)}}if(Ln(We)||Eu(We)){var $n=vp(We,_e.mode,ve,null);return $n.return=_e,$n}qT(_e,We)}return typeof We=="function"&&KT(_e),null}function ae(_e,We,ve,Je){var St=We!==null?We.key:null;if(typeof ve=="string"&&ve!==""||typeof ve=="number")return St!==null?null:R(_e,We,""+ve,Je);if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case ye:return ve.key===St?O(_e,We,ve,Je):null;case Ne:return ve.key===St?U(_e,We,ve,Je):null;case Me:{var vt=ve._payload,ai=ve._init;return ae(_e,We,ai(vt),Je)}}if(Ln(ve)||Eu(ve))return St!==null?null:q(_e,We,ve,Je,null);qT(_e,ve)}return typeof ve=="function"&&KT(_e),null}function ke(_e,We,ve,Je,St){if(typeof Je=="string"&&Je!==""||typeof Je=="number"){var vt=_e.get(ve)||null;return R(We,vt,""+Je,St)}if(typeof Je=="object"&&Je!==null){switch(Je.$$typeof){case ye:{var ai=_e.get(Je.key===null?ve:Je.key)||null;return O(We,ai,Je,St)}case Ne:{var yi=_e.get(Je.key===null?ve:Je.key)||null;return U(We,yi,Je,St)}case Me:var $n=Je._payload,fn=Je._init;return ke(_e,We,ve,fn($n),St)}if(Ln(Je)||Eu(Je)){var fo=_e.get(ve)||null;return q(We,fo,Je,St,null)}qT(We,Je)}return typeof Je=="function"&&KT(We),null}function Te(_e,We,ve){{if(typeof _e!="object"||_e===null)return We;switch(_e.$$typeof){case ye:case Ne:OQ(_e,ve);var Je=_e.key;if(typeof Je!="string")break;if(We===null){We=new Set,We.add(Je);break}if(!We.has(Je)){We.add(Je);break}r("Encountered two children with the same key, `%s`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted  the behavior is unsupported and could change in a future version.",Je);break;case Me:var St=_e._payload,vt=_e._init;Te(vt(St),We,ve);break}}return We}function Be(_e,We,ve,Je){for(var St=null,vt=0;vt<ve.length;vt++){var ai=ve[vt];St=Te(ai,St,_e)}for(var yi=null,$n=null,fn=We,fo=0,gn=0,io=null;fn!==null&&gn<ve.length;gn++){fn.index>gn?(io=fn,fn=null):io=fn.sibling;var pa=ae(_e,fn,ve[gn],Je);if(pa===null){fn===null&&(fn=io);break}d&&fn&&pa.alternate===null&&h(_e,fn),fo=D(pa,fo,gn),$n===null?yi=pa:$n.sibling=pa,$n=pa,fn=io}if(gn===ve.length){if(m(_e,fn),Er()){var Pr=gn;I_(_e,Pr)}return yi}if(fn===null){for(;gn<ve.length;gn++){var ac=ce(_e,ve[gn],Je);ac!==null&&(fo=D(ac,fo,gn),$n===null?yi=ac:$n.sibling=ac,$n=ac)}if(Er()){var Ha=gn;I_(_e,Ha)}return yi}for(var Va=C(_e,fn);gn<ve.length;gn++){var ma=ke(Va,_e,gn,ve[gn],Je);ma!==null&&(d&&ma.alternate!==null&&Va.delete(ma.key===null?gn:ma.key),fo=D(ma,fo,gn),$n===null?yi=ma:$n.sibling=ma,$n=ma)}if(d&&Va.forEach(function(Ky){return h(_e,Ky)}),Er()){var Cf=gn;I_(_e,Cf)}return yi}function _t(_e,We,ve,Je){var St=Eu(ve);if(typeof St!="function")throw new Error("An object is not an iterable. This error is likely caused by a bug in React. Please file an issue.");{typeof Symbol=="function"&&ve[Symbol.toStringTag]==="Generator"&&(wB||r("Using Generators as children is unsupported and will likely yield unexpected results because enumerating a generator mutates it. You may convert it to an array with `Array.from()` or the `[...spread]` operator before rendering. Keep in mind you might need to polyfill these features for older browsers."),wB=!0),ve.entries===St&&(yB||r("Using Maps as children is not supported. Use an array of keyed ReactElements instead."),yB=!0);var vt=St.call(ve);if(vt)for(var ai=null,yi=vt.next();!yi.done;yi=vt.next()){var $n=yi.value;ai=Te($n,ai,_e)}}var fn=St.call(ve);if(fn==null)throw new Error("An iterable object provided no iterator.");for(var fo=null,gn=null,io=We,pa=0,Pr=0,ac=null,Ha=fn.next();io!==null&&!Ha.done;Pr++,Ha=fn.next()){io.index>Pr?(ac=io,io=null):ac=io.sibling;var Va=ae(_e,io,Ha.value,Je);if(Va===null){io===null&&(io=ac);break}d&&io&&Va.alternate===null&&h(_e,io),pa=D(Va,pa,Pr),gn===null?fo=Va:gn.sibling=Va,gn=Va,io=ac}if(Ha.done){if(m(_e,io),Er()){var ma=Pr;I_(_e,ma)}return fo}if(io===null){for(;!Ha.done;Pr++,Ha=fn.next()){var Cf=ce(_e,Ha.value,Je);Cf!==null&&(pa=D(Cf,pa,Pr),gn===null?fo=Cf:gn.sibling=Cf,gn=Cf)}if(Er()){var Ky=Pr;I_(_e,Ky)}return fo}for(var sx=C(_e,io);!Ha.done;Pr++,Ha=fn.next()){var zu=ke(sx,_e,Pr,Ha.value,Je);zu!==null&&(d&&zu.alternate!==null&&sx.delete(zu.key===null?Pr:zu.key),pa=D(zu,pa,Pr),gn===null?fo=zu:gn.sibling=zu,gn=zu)}if(d&&sx.forEach(function(fLe){return h(_e,fLe)}),Er()){var hLe=Pr;I_(_e,hLe)}return fo}function Yt(_e,We,ve,Je){if(We!==null&&We.tag===_){m(_e,We.sibling);var St=w(We,ve);return St.return=_e,St}m(_e,We);var vt=CH(ve,_e.mode,Je);return vt.return=_e,vt}function Ft(_e,We,ve,Je){for(var St=ve.key,vt=We;vt!==null;){if(vt.key===St){var ai=ve.type;if(ai===j){if(vt.tag===b){m(_e,vt.sibling);var yi=w(vt,ve.props.children);return yi.return=_e,yi._debugSource=ve._source,yi._debugOwner=ve._owner,yi}}else if(vt.elementType===ai||Uee(vt,ve)||typeof ai=="object"&&ai!==null&&ai.$$typeof===Me&&FQ(ai)===vt.type){m(_e,vt.sibling);var $n=w(vt,ve.props);return $n.ref=kL(_e,vt,ve),$n.return=_e,$n._debugSource=ve._source,$n._debugOwner=ve._owner,$n}m(_e,vt);break}else h(_e,vt);vt=vt.sibling}if(ve.type===j){var fn=vp(ve.props.children,_e.mode,Je,ve.key);return fn.return=_e,fn}else{var fo=bH(ve,_e.mode,Je);return fo.ref=kL(_e,We,ve),fo.return=_e,fo}}function Gi(_e,We,ve,Je){for(var St=ve.key,vt=We;vt!==null;){if(vt.key===St)if(vt.tag===g&&vt.stateNode.containerInfo===ve.containerInfo&&vt.stateNode.implementation===ve.implementation){m(_e,vt.sibling);var ai=w(vt,ve.children||[]);return ai.return=_e,ai}else{m(_e,vt);break}else h(_e,vt);vt=vt.sibling}var yi=yH(ve,_e.mode,Je);return yi.return=_e,yi}function Hi(_e,We,ve,Je){var St=typeof ve=="object"&&ve!==null&&ve.type===j&&ve.key===null;if(St&&(ve=ve.props.children),typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case ye:return I(Ft(_e,We,ve,Je));case Ne:return I(Gi(_e,We,ve,Je));case Me:var vt=ve._payload,ai=ve._init;return Hi(_e,We,ai(vt),Je)}if(Ln(ve))return Be(_e,We,ve,Je);if(Eu(ve))return _t(_e,We,ve,Je);qT(_e,ve)}return typeof ve=="string"&&ve!==""||typeof ve=="number"?I(Yt(_e,We,""+ve,Je)):(typeof ve=="function"&&KT(_e),m(_e,We))}return Hi}var Iy=BQ(!0),WQ=BQ(!1);function zwe(d,h){if(d!==null&&h.child!==d.child)throw new Error("Resuming work not yet implemented.");if(h.child!==null){var m=h.child,C=z_(m,m.pendingProps);for(h.child=C,C.return=h;m.sibling!==null;)m=m.sibling,C=C.sibling=z_(m,m.pendingProps),C.return=h;C.sibling=null}}function Uwe(d,h){for(var m=d.child;m!==null;)T0e(m,h),m=m.sibling}var kB=sp(null),DB;DB={};var GT=null,Ty=null,EB=null,YT=!1;function ZT(){GT=null,Ty=null,EB=null,YT=!1}function HQ(){YT=!0}function VQ(){YT=!1}function zQ(d,h,m){fa(kB,h._currentValue,d),h._currentValue=m,h._currentRenderer!==void 0&&h._currentRenderer!==null&&h._currentRenderer!==DB&&r("Detected multiple renderers concurrently rendering the same context provider. This is currently unsupported."),h._currentRenderer=DB}function IB(d,h){var m=kB.current;ha(kB,h),d._currentValue=m}function TB(d,h,m){for(var C=d;C!==null;){var w=C.alternate;if(gy(C.childLanes,h)?w!==null&&!gy(w.childLanes,h)&&(w.childLanes=Ai(w.childLanes,h)):(C.childLanes=Ai(C.childLanes,h),w!==null&&(w.childLanes=Ai(w.childLanes,h))),C===m)break;C=C.return}C!==m&&r("Expected to find the propagation root when scheduling context work. This error is likely caused by a bug in React. Please file an issue.")}function $we(d,h,m){jwe(d,h,m)}function jwe(d,h,m){var C=d.child;for(C!==null&&(C.return=d);C!==null;){var w=void 0,D=C.dependencies;if(D!==null){w=C.child;for(var I=D.firstContext;I!==null;){if(I.context===h){if(C.tag===c){var R=$0(m),O=gf(Ls,R);O.tag=QT;var U=C.updateQueue;if(U!==null){var q=U.shared,ce=q.pending;ce===null?O.next=O:(O.next=ce.next,ce.next=O),q.pending=O}}C.lanes=Ai(C.lanes,m);var ae=C.alternate;ae!==null&&(ae.lanes=Ai(ae.lanes,m)),TB(C.return,m,d),D.lanes=Ai(D.lanes,m);break}I=I.next}}else if(C.tag===L)w=C.type===d.type?null:C.child;else if(C.tag===ee){var ke=C.return;if(ke===null)throw new Error("We just came from a parent so we must have had a parent. This is a bug in React.");ke.lanes=Ai(ke.lanes,m);var Te=ke.alternate;Te!==null&&(Te.lanes=Ai(Te.lanes,m)),TB(ke,m,d),w=C.sibling}else w=C.child;if(w!==null)w.return=C;else for(w=C;w!==null;){if(w===d){w=null;break}var Be=w.sibling;if(Be!==null){Be.return=w.return,w=Be;break}w=w.return}C=w}}function Ny(d,h){GT=d,Ty=null,EB=null;var m=d.dependencies;if(m!==null){var C=m.firstContext;C!==null&&(tc(m.lanes,h)&&VL(),m.firstContext=null)}}function xo(d){YT&&r("Context can only be read while React is rendering. In classes, you can read it in the render method or getDerivedStateFromProps. In function components, you can read it directly in the function body, but not inside Hooks like useReducer() or useMemo().");var h=d._currentValue;if(EB!==d){var m={context:d,memoizedValue:h,next:null};if(Ty===null){if(GT===null)throw new Error("Context can only be read while React is rendering. In classes, you can read it in the render method or getDerivedStateFromProps. In function components, you can read it directly in the function body, but not inside Hooks like useReducer() or useMemo().");Ty=m,GT.dependencies={lanes:Ge,firstContext:m}}else Ty=Ty.next=m}return h}var A_=null;function NB(d){A_===null?A_=[d]:A_.push(d)}function qwe(){if(A_!==null){for(var d=0;d<A_.length;d++){var h=A_[d],m=h.interleaved;if(m!==null){h.interleaved=null;var C=m.next,w=h.pending;if(w!==null){var D=w.next;w.next=C,m.next=D}h.pending=m}}A_=null}}function UQ(d,h,m,C){var w=h.interleaved;return w===null?(m.next=m,NB(h)):(m.next=w.next,w.next=m),h.interleaved=m,XT(d,C)}function Kwe(d,h,m,C){var w=h.interleaved;w===null?(m.next=m,NB(h)):(m.next=w.next,w.next=m),h.interleaved=m}function Gwe(d,h,m,C){var w=h.interleaved;return w===null?(m.next=m,NB(h)):(m.next=w.next,w.next=m),h.interleaved=m,XT(d,C)}function ml(d,h){return XT(d,h)}var Ywe=XT;function XT(d,h){d.lanes=Ai(d.lanes,h);var m=d.alternate;m!==null&&(m.lanes=Ai(m.lanes,h)),m===null&&(d.flags&(Lo|nf))!==ni&&Wee(d);for(var C=d,w=d.return;w!==null;)w.childLanes=Ai(w.childLanes,h),m=w.alternate,m!==null?m.childLanes=Ai(m.childLanes,h):(w.flags&(Lo|nf))!==ni&&Wee(d),C=w,w=w.return;if(C.tag===f){var D=C.stateNode;return D}else return null}var $Q=0,jQ=1,QT=2,RB=3,JT=!1,MB,eN;MB=!1,eN=null;function AB(d){var h={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:Ge},effects:null};d.updateQueue=h}function qQ(d,h){var m=h.updateQueue,C=d.updateQueue;if(m===C){var w={baseState:C.baseState,firstBaseUpdate:C.firstBaseUpdate,lastBaseUpdate:C.lastBaseUpdate,shared:C.shared,effects:C.effects};h.updateQueue=w}}function gf(d,h){var m={eventTime:d,lane:h,tag:$Q,payload:null,callback:null,next:null};return m}function lp(d,h,m){var C=d.updateQueue;if(C===null)return null;var w=C.shared;if(eN===w&&!MB&&(r("An update (setState, replaceState, or forceUpdate) was scheduled from inside an update function. Update functions should be pure, with zero side-effects. Consider using componentDidUpdate or a callback."),MB=!0),KSe()){var D=w.pending;return D===null?h.next=h:(h.next=D.next,D.next=h),w.pending=h,Ywe(d,m)}else return Gwe(d,w,h,m)}function tN(d,h,m){var C=h.updateQueue;if(C!==null){var w=C.shared;if(oX(m)){var D=w.lanes;D=aX(D,d.pendingLanes);var I=Ai(D,m);w.lanes=I,k3(d,I)}}}function PB(d,h){var m=d.updateQueue,C=d.alternate;if(C!==null){var w=C.updateQueue;if(m===w){var D=null,I=null,R=m.firstBaseUpdate;if(R!==null){var O=R;do{var U={eventTime:O.eventTime,lane:O.lane,tag:O.tag,payload:O.payload,callback:O.callback,next:null};I===null?D=I=U:(I.next=U,I=U),O=O.next}while(O!==null);I===null?D=I=h:(I.next=h,I=h)}else D=I=h;m={baseState:w.baseState,firstBaseUpdate:D,lastBaseUpdate:I,shared:w.shared,effects:w.effects},d.updateQueue=m;return}}var q=m.lastBaseUpdate;q===null?m.firstBaseUpdate=h:q.next=h,m.lastBaseUpdate=h}function Zwe(d,h,m,C,w,D){switch(m.tag){case jQ:{var I=m.payload;if(typeof I=="function"){HQ();var R=I.call(D,C,w);{if(d.mode&to){cr(!0);try{I.call(D,C,w)}finally{cr(!1)}}VQ()}return R}return I}case RB:d.flags=d.flags&~Oa|xn;case $Q:{var O=m.payload,U;if(typeof O=="function"){HQ(),U=O.call(D,C,w);{if(d.mode&to){cr(!0);try{O.call(D,C,w)}finally{cr(!1)}}VQ()}}else U=O;return U==null?C:zi({},C,U)}case QT:return JT=!0,C}return C}function iN(d,h,m,C){var w=d.updateQueue;JT=!1,eN=w.shared;var D=w.firstBaseUpdate,I=w.lastBaseUpdate,R=w.shared.pending;if(R!==null){w.shared.pending=null;var O=R,U=O.next;O.next=null,I===null?D=U:I.next=U,I=O;var q=d.alternate;if(q!==null){var ce=q.updateQueue,ae=ce.lastBaseUpdate;ae!==I&&(ae===null?ce.firstBaseUpdate=U:ae.next=U,ce.lastBaseUpdate=O)}}if(D!==null){var ke=w.baseState,Te=Ge,Be=null,_t=null,Yt=null,Ft=D;do{var Gi=Ft.lane,Hi=Ft.eventTime;if(gy(C,Gi)){if(Yt!==null){var We={eventTime:Hi,lane:dr,tag:Ft.tag,payload:Ft.payload,callback:Ft.callback,next:null};Yt=Yt.next=We}ke=Zwe(d,w,Ft,ke,h,m);var ve=Ft.callback;if(ve!==null&&Ft.lane!==dr){d.flags|=K5;var Je=w.effects;Je===null?w.effects=[Ft]:Je.push(Ft)}}else{var _e={eventTime:Hi,lane:Gi,tag:Ft.tag,payload:Ft.payload,callback:Ft.callback,next:null};Yt===null?(_t=Yt=_e,Be=ke):Yt=Yt.next=_e,Te=Ai(Te,Gi)}if(Ft=Ft.next,Ft===null){if(R=w.shared.pending,R===null)break;var St=R,vt=St.next;St.next=null,Ft=vt,w.lastBaseUpdate=St,w.shared.pending=null}}while(!0);Yt===null&&(Be=ke),w.baseState=Be,w.firstBaseUpdate=_t,w.lastBaseUpdate=Yt;var ai=w.shared.interleaved;if(ai!==null){var yi=ai;do Te=Ai(Te,yi.lane),yi=yi.next;while(yi!==ai)}else D===null&&(w.shared.lanes=Ge);JL(Te),d.lanes=Te,d.memoizedState=ke}eN=null}function Xwe(d,h){if(typeof d!="function")throw new Error("Invalid argument passed as callback. Expected a function. Instead "+("received: "+d));d.call(h)}function KQ(){JT=!1}function nN(){return JT}function GQ(d,h,m){var C=h.effects;if(h.effects=null,C!==null)for(var w=0;w<C.length;w++){var D=C[w],I=D.callback;I!==null&&(D.callback=null,Xwe(I,m))}}var DL={},cp=sp(DL),EL=sp(DL),sN=sp(DL);function oN(d){if(d===DL)throw new Error("Expected host context to exist. This error is likely caused by a bug in React. Please file an issue.");return d}function YQ(){var d=oN(sN.current);return d}function OB(d,h){fa(sN,h,d),fa(EL,d,d),fa(cp,DL,d);var m=gye(h);ha(cp,d),fa(cp,m,d)}function Ry(d){ha(cp,d),ha(EL,d),ha(sN,d)}function FB(){var d=oN(cp.current);return d}function ZQ(d){oN(sN.current);var h=oN(cp.current),m=pye(h,d.type);h!==m&&(fa(EL,d,d),fa(cp,m,d))}function BB(d){EL.current===d&&(ha(cp,d),ha(EL,d))}var Qwe=0,XQ=1,QQ=1,IL=2,Sd=sp(Qwe);function WB(d,h){return(d&h)!==0}function My(d){return d&XQ}function HB(d,h){return d&XQ|h}function Jwe(d,h){return d|h}function dp(d,h){fa(Sd,h,d)}function Ay(d){ha(Sd,d)}function e1e(d,h){var m=d.memoizedState;return m!==null?m.dehydrated!==null:(d.memoizedProps,!0)}function rN(d){for(var h=d;h!==null;){if(h.tag===E){var m=h.memoizedState;if(m!==null){var C=m.dehydrated;if(C===null||pQ(C)||sB(C))return h}}else if(h.tag===Q&&h.memoizedProps.revealOrder!==void 0){var w=(h.flags&xn)!==ni;if(w)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===d)return null;for(;h.sibling===null;){if(h.return===null||h.return===d)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var _l=0,Ho=1,Pu=2,Vo=4,Ir=8,VB=[];function zB(){for(var d=0;d<VB.length;d++){var h=VB[d];h._workInProgressVersionPrimary=null}VB.length=0}function t1e(d,h){var m=h._getVersion,C=m(h._source);d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[h,C]:d.mutableSourceEagerHydrationData.push(h,C)}var yt=t.ReactCurrentDispatcher,TL=t.ReactCurrentBatchConfig,UB,Py;UB=new Set;var P_=Ge,Un=null,zo=null,Uo=null,aN=!1,NL=!1,RL=0,i1e=0,n1e=25,ze=null,Wc=null,up=-1,$B=!1;function Tn(){{var d=ze;Wc===null?Wc=[d]:Wc.push(d)}}function ft(){{var d=ze;Wc!==null&&(up++,Wc[up]!==d&&s1e(d))}}function Oy(d){d!=null&&!Ln(d)&&r("%s received a final argument that is not an array (instead, received `%s`). When specified, the final argument must be an array.",ze,typeof d)}function s1e(d){{var h=Ei(Un);if(!UB.has(h)&&(UB.add(h),Wc!==null)){for(var m="",C=30,w=0;w<=up;w++){for(var D=Wc[w],I=w===up?d:D,R=w+1+". "+D;R.length<C;)R+=" ";R+=I+`
`,m+=R}r(`React has detected a change in the order of Hooks called by %s. This will lead to bugs and errors if not fixed. For more information, read the Rules of Hooks: https://reactjs.org/link/rules-of-hooks

   Previous render            Next render
   ------------------------------------------------------
%s   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
`,h,m)}}}function ga(){throw new Error(`Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:
1. You might have mismatching versions of React and the renderer (such as React DOM)
2. You might be breaking the Rules of Hooks
3. You might have more than one copy of React in the same app
See https://reactjs.org/link/invalid-hook-call for tips about how to debug and fix this problem.`)}function jB(d,h){if($B)return!1;if(h===null)return r("%s received a final argument during this render, but not during the previous render. Even though the final argument is optional, its type cannot change between renders.",ze),!1;d.length!==h.length&&r(`The final argument passed to %s changed size between renders. The order and size of this array must remain constant.

Previous: %s
Incoming: %s`,ze,"["+h.join(", ")+"]","["+d.join(", ")+"]");for(var m=0;m<h.length&&m<d.length;m++)if(!sc(d[m],h[m]))return!1;return!0}function Fy(d,h,m,C,w,D){P_=D,Un=h,Wc=d!==null?d._debugHookTypes:null,up=-1,$B=d!==null&&d.type!==h.type,h.memoizedState=null,h.updateQueue=null,h.lanes=Ge,d!==null&&d.memoizedState!==null?yt.current=CJ:Wc!==null?yt.current=bJ:yt.current=vJ;var I=m(C,w);if(NL){var R=0;do{if(NL=!1,RL=0,R>=n1e)throw new Error("Too many re-renders. React limits the number of renders to prevent an infinite loop.");R+=1,$B=!1,zo=null,Uo=null,h.updateQueue=null,up=-1,yt.current=yJ,I=m(C,w)}while(NL)}yt.current=CN,h._debugHookTypes=Wc;var O=zo!==null&&zo.next!==null;if(P_=Ge,Un=null,zo=null,Uo=null,ze=null,Wc=null,up=-1,d!==null&&(d.flags&of)!==(h.flags&of)&&(d.mode&qi)!==Xt&&r("Internal React error: Expected static flag was missing. Please notify the React team."),aN=!1,O)throw new Error("Rendered fewer hooks than expected. This may be caused by an accidental early return statement.");return I}function By(){var d=RL!==0;return RL=0,d}function JQ(d,h,m){h.updateQueue=d.updateQueue,(h.mode&Nu)!==Xt?h.flags&=~(tT|sf|_d|Ji):h.flags&=~(_d|Ji),d.lanes=lT(d.lanes,m)}function eJ(){if(yt.current=CN,aN){for(var d=Un.memoizedState;d!==null;){var h=d.queue;h!==null&&(h.pending=null),d=d.next}aN=!1}P_=Ge,Un=null,zo=null,Uo=null,Wc=null,up=-1,ze=null,fJ=!1,NL=!1,RL=0}function Ou(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Uo===null?Un.memoizedState=Uo=d:Uo=Uo.next=d,Uo}function Hc(){var d;if(zo===null){var h=Un.alternate;h!==null?d=h.memoizedState:d=null}else d=zo.next;var m;if(Uo===null?m=Un.memoizedState:m=Uo.next,m!==null)Uo=m,m=Uo.next,zo=d;else{if(d===null)throw new Error("Rendered more hooks than during the previous render.");zo=d;var C={memoizedState:zo.memoizedState,baseState:zo.baseState,baseQueue:zo.baseQueue,queue:zo.queue,next:null};Uo===null?Un.memoizedState=Uo=C:Uo=Uo.next=C}return Uo}function tJ(){return{lastEffect:null,stores:null}}function qB(d,h){return typeof h=="function"?h(d):h}function KB(d,h,m){var C=Ou(),w;m!==void 0?w=m(h):w=h,C.memoizedState=C.baseState=w;var D={pending:null,interleaved:null,lanes:Ge,dispatch:null,lastRenderedReducer:d,lastRenderedState:w};C.queue=D;var I=D.dispatch=l1e.bind(null,Un,D);return[C.memoizedState,I]}function GB(d,h,m){var C=Hc(),w=C.queue;if(w===null)throw new Error("Should have a queue. This is likely a bug in React. Please file an issue.");w.lastRenderedReducer=d;var D=zo,I=D.baseQueue,R=w.pending;if(R!==null){if(I!==null){var O=I.next,U=R.next;I.next=U,R.next=O}D.baseQueue!==I&&r("Internal error: Expected work-in-progress queue to be a clone. This is a bug in React."),D.baseQueue=I=R,w.pending=null}if(I!==null){var q=I.next,ce=D.baseState,ae=null,ke=null,Te=null,Be=q;do{var _t=Be.lane;if(gy(P_,_t)){if(Te!==null){var Ft={lane:dr,action:Be.action,hasEagerState:Be.hasEagerState,eagerState:Be.eagerState,next:null};Te=Te.next=Ft}if(Be.hasEagerState)ce=Be.eagerState;else{var Gi=Be.action;ce=d(ce,Gi)}}else{var Yt={lane:_t,action:Be.action,hasEagerState:Be.hasEagerState,eagerState:Be.eagerState,next:null};Te===null?(ke=Te=Yt,ae=ce):Te=Te.next=Yt,Un.lanes=Ai(Un.lanes,_t),JL(_t)}Be=Be.next}while(Be!==null&&Be!==q);Te===null?ae=ce:Te.next=ke,sc(ce,C.memoizedState)||VL(),C.memoizedState=ce,C.baseState=ae,C.baseQueue=Te,w.lastRenderedState=ce}var Hi=w.interleaved;if(Hi!==null){var _e=Hi;do{var We=_e.lane;Un.lanes=Ai(Un.lanes,We),JL(We),_e=_e.next}while(_e!==Hi)}else I===null&&(w.lanes=Ge);var ve=w.dispatch;return[C.memoizedState,ve]}function YB(d,h,m){var C=Hc(),w=C.queue;if(w===null)throw new Error("Should have a queue. This is likely a bug in React. Please file an issue.");w.lastRenderedReducer=d;var D=w.dispatch,I=w.pending,R=C.memoizedState;if(I!==null){w.pending=null;var O=I.next,U=O;do{var q=U.action;R=d(R,q),U=U.next}while(U!==O);sc(R,C.memoizedState)||VL(),C.memoizedState=R,C.baseQueue===null&&(C.baseState=R),w.lastRenderedState=R}return[R,D]}function ZJe(d,h,m){}function XJe(d,h,m){}function ZB(d,h,m){var C=Un,w=Ou(),D,I=Er();if(I){if(m===void 0)throw new Error("Missing getServerSnapshot, which is required for server-rendered content. Will revert to client rendering.");D=m(),Py||D!==m()&&(r("The result of getServerSnapshot should be cached to avoid an infinite loop"),Py=!0)}else{if(D=h(),!Py){var R=h();sc(D,R)||(r("The result of getSnapshot should be cached to avoid an infinite loop"),Py=!0)}var O=WN();if(O===null)throw new Error("Expected a work-in-progress root. This is a bug in React. Please file an issue.");aT(O,P_)||iJ(C,h,D)}w.memoizedState=D;var U={value:D,getSnapshot:h};return w.queue=U,hN(sJ.bind(null,C,U,d),[d]),C.flags|=_d,ML(Ho|Ir,nJ.bind(null,C,U,D,h),void 0,null),D}function lN(d,h,m){var C=Un,w=Hc(),D=h();if(!Py){var I=h();sc(D,I)||(r("The result of getSnapshot should be cached to avoid an infinite loop"),Py=!0)}var R=w.memoizedState,O=!sc(R,D);O&&(w.memoizedState=D,VL());var U=w.queue;if(PL(sJ.bind(null,C,U,d),[d]),U.getSnapshot!==h||O||Uo!==null&&Uo.memoizedState.tag&Ho){C.flags|=_d,ML(Ho|Ir,nJ.bind(null,C,U,D,h),void 0,null);var q=WN();if(q===null)throw new Error("Expected a work-in-progress root. This is a bug in React. Please file an issue.");aT(q,P_)||iJ(C,h,D)}return D}function iJ(d,h,m){d.flags|=eT;var C={getSnapshot:h,value:m},w=Un.updateQueue;if(w===null)w=tJ(),Un.updateQueue=w,w.stores=[C];else{var D=w.stores;D===null?w.stores=[C]:D.push(C)}}function nJ(d,h,m,C){h.value=m,h.getSnapshot=C,oJ(h)&&rJ(d)}function sJ(d,h,m){var C=function(){oJ(h)&&rJ(d)};return m(C)}function oJ(d){var h=d.getSnapshot,m=d.value;try{var C=h();return!sc(m,C)}catch{return!0}}function rJ(d){var h=ml(d,vi);h!==null&&Ko(h,d,vi,Ls)}function cN(d){var h=Ou();typeof d=="function"&&(d=d()),h.memoizedState=h.baseState=d;var m={pending:null,interleaved:null,lanes:Ge,dispatch:null,lastRenderedReducer:qB,lastRenderedState:d};h.queue=m;var C=m.dispatch=c1e.bind(null,Un,m);return[h.memoizedState,C]}function XB(d){return GB(qB)}function QB(d){return YB(qB)}function ML(d,h,m,C){var w={tag:d,create:h,destroy:m,deps:C,next:null},D=Un.updateQueue;if(D===null)D=tJ(),Un.updateQueue=D,D.lastEffect=w.next=w;else{var I=D.lastEffect;if(I===null)D.lastEffect=w.next=w;else{var R=I.next;I.next=w,w.next=R,D.lastEffect=w}}return w}function JB(d){var h=Ou();{var m={current:d};return h.memoizedState=m,m}}function dN(d){var h=Hc();return h.memoizedState}function AL(d,h,m,C){var w=Ou(),D=C===void 0?null:C;Un.flags|=d,w.memoizedState=ML(Ho|h,m,void 0,D)}function uN(d,h,m,C){var w=Hc(),D=C===void 0?null:C,I=void 0;if(zo!==null){var R=zo.memoizedState;if(I=R.destroy,D!==null){var O=R.deps;if(jB(D,O)){w.memoizedState=ML(h,m,I,D);return}}}Un.flags|=d,w.memoizedState=ML(Ho|h,m,I,D)}function hN(d,h){return(Un.mode&Nu)!==Xt?AL(tT|_d|Z5,Ir,d,h):AL(_d|Z5,Ir,d,h)}function PL(d,h){return uN(_d,Ir,d,h)}function eW(d,h){return AL(Ji,Pu,d,h)}function fN(d,h){return uN(Ji,Pu,d,h)}function tW(d,h){var m=Ji;return m|=v_,(Un.mode&Nu)!==Xt&&(m|=sf),AL(m,Vo,d,h)}function gN(d,h){return uN(Ji,Vo,d,h)}function aJ(d,h){if(typeof h=="function"){var m=h,C=d();return m(C),function(){m(null)}}else if(h!=null){var w=h;w.hasOwnProperty("current")||r("Expected useImperativeHandle() first argument to either be a ref callback or React.createRef() object. Instead received: %s.","an object with keys {"+Object.keys(w).join(", ")+"}");var D=d();return w.current=D,function(){w.current=null}}}function iW(d,h,m){typeof h!="function"&&r("Expected useImperativeHandle() second argument to be a function that creates a handle. Instead received: %s.",h!==null?typeof h:"null");var C=m!=null?m.concat([d]):null,w=Ji;return w|=v_,(Un.mode&Nu)!==Xt&&(w|=sf),AL(w,Vo,aJ.bind(null,h,d),C)}function pN(d,h,m){typeof h!="function"&&r("Expected useImperativeHandle() second argument to be a function that creates a handle. Instead received: %s.",h!==null?typeof h:"null");var C=m!=null?m.concat([d]):null;return uN(Ji,Vo,aJ.bind(null,h,d),C)}function o1e(d,h){}var mN=o1e;function nW(d,h){var m=Ou(),C=h===void 0?null:h;return m.memoizedState=[d,C],d}function _N(d,h){var m=Hc(),C=h===void 0?null:h,w=m.memoizedState;if(w!==null&&C!==null){var D=w[1];if(jB(C,D))return w[0]}return m.memoizedState=[d,C],d}function sW(d,h){var m=Ou(),C=h===void 0?null:h,w=d();return m.memoizedState=[w,C],w}function vN(d,h){var m=Hc(),C=h===void 0?null:h,w=m.memoizedState;if(w!==null&&C!==null){var D=w[1];if(jB(C,D))return w[0]}var I=d();return m.memoizedState=[I,C],I}function oW(d){var h=Ou();return h.memoizedState=d,d}function lJ(d){var h=Hc(),m=zo,C=m.memoizedState;return dJ(h,C,d)}function cJ(d){var h=Hc();if(zo===null)return h.memoizedState=d,d;var m=zo.memoizedState;return dJ(h,m,d)}function dJ(d,h,m){var C=!$ve(P_);if(C){if(!sc(m,h)){var w=rX();Un.lanes=Ai(Un.lanes,w),JL(w),d.baseState=!0}return h}else return d.baseState&&(d.baseState=!1,VL()),d.memoizedState=m,m}function r1e(d,h,m){var C=bd();ur(Jve(C,af)),d(!0);var w=TL.transition;TL.transition={};var D=TL.transition;TL.transition._updatedFibers=new Set;try{d(!1),h()}finally{if(ur(C),TL.transition=w,w===null&&D._updatedFibers){var I=D._updatedFibers.size;I>10&&s("Detected a large number of updates inside startTransition. If this is due to a subscription please re-write it to use React provided hooks. Otherwise concurrent mode guarantees are off the table."),D._updatedFibers.clear()}}}function rW(){var d=cN(!1),h=d[0],m=d[1],C=r1e.bind(null,m),w=Ou();return w.memoizedState=C,[h,C]}function uJ(){var d=XB(),h=d[0],m=Hc(),C=m.memoizedState;return[h,C]}function hJ(){var d=QB(),h=d[0],m=Hc(),C=m.memoizedState;return[h,C]}var fJ=!1;function a1e(){return fJ}function aW(){var d=Ou(),h=WN(),m=h.identifierPrefix,C;if(Er()){var w=Lwe();C=":"+m+"R"+w;var D=RL++;D>0&&(C+="H"+D.toString(32)),C+=":"}else{var I=i1e++;C=":"+m+"r"+I.toString(32)+":"}return d.memoizedState=C,C}function bN(){var d=Hc(),h=d.memoizedState;return h}function l1e(d,h,m){typeof arguments[3]=="function"&&r("State updates from the useState() and useReducer() Hooks don't support the second callback argument. To execute a side effect after rendering, declare it in the component body with useEffect().");var C=mp(d),w={lane:C,action:m,hasEagerState:!1,eagerState:null,next:null};if(gJ(d))pJ(h,w);else{var D=UQ(d,h,w,C);if(D!==null){var I=Wa();Ko(D,d,C,I),mJ(D,h,C)}}_J(d,C)}function c1e(d,h,m){typeof arguments[3]=="function"&&r("State updates from the useState() and useReducer() Hooks don't support the second callback argument. To execute a side effect after rendering, declare it in the component body with useEffect().");var C=mp(d),w={lane:C,action:m,hasEagerState:!1,eagerState:null,next:null};if(gJ(d))pJ(h,w);else{var D=d.alternate;if(d.lanes===Ge&&(D===null||D.lanes===Ge)){var I=h.lastRenderedReducer;if(I!==null){var R;R=yt.current,yt.current=Ld;try{var O=h.lastRenderedState,U=I(O,m);if(w.hasEagerState=!0,w.eagerState=U,sc(U,O)){Kwe(d,h,w,C);return}}catch{}finally{yt.current=R}}}var q=UQ(d,h,w,C);if(q!==null){var ce=Wa();Ko(q,d,C,ce),mJ(q,h,C)}}_J(d,C)}function gJ(d){var h=d.alternate;return d===Un||h!==null&&h===Un}function pJ(d,h){NL=aN=!0;var m=d.pending;m===null?h.next=h:(h.next=m.next,m.next=h),d.pending=h}function mJ(d,h,m){if(oX(m)){var C=h.lanes;C=aX(C,d.pendingLanes);var w=Ai(C,m);h.lanes=w,k3(d,w)}}function _J(d,h,m){t3(d,h)}var CN={readContext:xo,useCallback:ga,useContext:ga,useEffect:ga,useImperativeHandle:ga,useInsertionEffect:ga,useLayoutEffect:ga,useMemo:ga,useReducer:ga,useRef:ga,useState:ga,useDebugValue:ga,useDeferredValue:ga,useTransition:ga,useMutableSource:ga,useSyncExternalStore:ga,useId:ga,unstable_isNewReconciler:me},vJ=null,bJ=null,CJ=null,yJ=null,Fu=null,Ld=null,yN=null;{var lW=function(){r("Context can only be read while React is rendering. In classes, you can read it in the render method or getDerivedStateFromProps. In function components, you can read it directly in the function body, but not inside Hooks like useReducer() or useMemo().")},bi=function(){r("Do not call Hooks inside useEffect(...), useMemo(...), or other built-in Hooks. You can only call Hooks at the top level of your React function. For more information, see https://reactjs.org/link/rules-of-hooks")};vJ={readContext:function(d){return xo(d)},useCallback:function(d,h){return ze="useCallback",Tn(),Oy(h),nW(d,h)},useContext:function(d){return ze="useContext",Tn(),xo(d)},useEffect:function(d,h){return ze="useEffect",Tn(),Oy(h),hN(d,h)},useImperativeHandle:function(d,h,m){return ze="useImperativeHandle",Tn(),Oy(m),iW(d,h,m)},useInsertionEffect:function(d,h){return ze="useInsertionEffect",Tn(),Oy(h),eW(d,h)},useLayoutEffect:function(d,h){return ze="useLayoutEffect",Tn(),Oy(h),tW(d,h)},useMemo:function(d,h){ze="useMemo",Tn(),Oy(h);var m=yt.current;yt.current=Fu;try{return sW(d,h)}finally{yt.current=m}},useReducer:function(d,h,m){ze="useReducer",Tn();var C=yt.current;yt.current=Fu;try{return KB(d,h,m)}finally{yt.current=C}},useRef:function(d){return ze="useRef",Tn(),JB(d)},useState:function(d){ze="useState",Tn();var h=yt.current;yt.current=Fu;try{return cN(d)}finally{yt.current=h}},useDebugValue:function(d,h){return ze="useDebugValue",Tn(),void 0},useDeferredValue:function(d){return ze="useDeferredValue",Tn(),oW(d)},useTransition:function(){return ze="useTransition",Tn(),rW()},useMutableSource:function(d,h,m){return ze="useMutableSource",Tn(),void 0},useSyncExternalStore:function(d,h,m){return ze="useSyncExternalStore",Tn(),ZB(d,h,m)},useId:function(){return ze="useId",Tn(),aW()},unstable_isNewReconciler:me},bJ={readContext:function(d){return xo(d)},useCallback:function(d,h){return ze="useCallback",ft(),nW(d,h)},useContext:function(d){return ze="useContext",ft(),xo(d)},useEffect:function(d,h){return ze="useEffect",ft(),hN(d,h)},useImperativeHandle:function(d,h,m){return ze="useImperativeHandle",ft(),iW(d,h,m)},useInsertionEffect:function(d,h){return ze="useInsertionEffect",ft(),eW(d,h)},useLayoutEffect:function(d,h){return ze="useLayoutEffect",ft(),tW(d,h)},useMemo:function(d,h){ze="useMemo",ft();var m=yt.current;yt.current=Fu;try{return sW(d,h)}finally{yt.current=m}},useReducer:function(d,h,m){ze="useReducer",ft();var C=yt.current;yt.current=Fu;try{return KB(d,h,m)}finally{yt.current=C}},useRef:function(d){return ze="useRef",ft(),JB(d)},useState:function(d){ze="useState",ft();var h=yt.current;yt.current=Fu;try{return cN(d)}finally{yt.current=h}},useDebugValue:function(d,h){return ze="useDebugValue",ft(),void 0},useDeferredValue:function(d){return ze="useDeferredValue",ft(),oW(d)},useTransition:function(){return ze="useTransition",ft(),rW()},useMutableSource:function(d,h,m){return ze="useMutableSource",ft(),void 0},useSyncExternalStore:function(d,h,m){return ze="useSyncExternalStore",ft(),ZB(d,h,m)},useId:function(){return ze="useId",ft(),aW()},unstable_isNewReconciler:me},CJ={readContext:function(d){return xo(d)},useCallback:function(d,h){return ze="useCallback",ft(),_N(d,h)},useContext:function(d){return ze="useContext",ft(),xo(d)},useEffect:function(d,h){return ze="useEffect",ft(),PL(d,h)},useImperativeHandle:function(d,h,m){return ze="useImperativeHandle",ft(),pN(d,h,m)},useInsertionEffect:function(d,h){return ze="useInsertionEffect",ft(),fN(d,h)},useLayoutEffect:function(d,h){return ze="useLayoutEffect",ft(),gN(d,h)},useMemo:function(d,h){ze="useMemo",ft();var m=yt.current;yt.current=Ld;try{return vN(d,h)}finally{yt.current=m}},useReducer:function(d,h,m){ze="useReducer",ft();var C=yt.current;yt.current=Ld;try{return GB(d,h,m)}finally{yt.current=C}},useRef:function(d){return ze="useRef",ft(),dN()},useState:function(d){ze="useState",ft();var h=yt.current;yt.current=Ld;try{return XB(d)}finally{yt.current=h}},useDebugValue:function(d,h){return ze="useDebugValue",ft(),mN()},useDeferredValue:function(d){return ze="useDeferredValue",ft(),lJ(d)},useTransition:function(){return ze="useTransition",ft(),uJ()},useMutableSource:function(d,h,m){return ze="useMutableSource",ft(),void 0},useSyncExternalStore:function(d,h,m){return ze="useSyncExternalStore",ft(),lN(d,h)},useId:function(){return ze="useId",ft(),bN()},unstable_isNewReconciler:me},yJ={readContext:function(d){return xo(d)},useCallback:function(d,h){return ze="useCallback",ft(),_N(d,h)},useContext:function(d){return ze="useContext",ft(),xo(d)},useEffect:function(d,h){return ze="useEffect",ft(),PL(d,h)},useImperativeHandle:function(d,h,m){return ze="useImperativeHandle",ft(),pN(d,h,m)},useInsertionEffect:function(d,h){return ze="useInsertionEffect",ft(),fN(d,h)},useLayoutEffect:function(d,h){return ze="useLayoutEffect",ft(),gN(d,h)},useMemo:function(d,h){ze="useMemo",ft();var m=yt.current;yt.current=yN;try{return vN(d,h)}finally{yt.current=m}},useReducer:function(d,h,m){ze="useReducer",ft();var C=yt.current;yt.current=yN;try{return YB(d,h,m)}finally{yt.current=C}},useRef:function(d){return ze="useRef",ft(),dN()},useState:function(d){ze="useState",ft();var h=yt.current;yt.current=yN;try{return QB(d)}finally{yt.current=h}},useDebugValue:function(d,h){return ze="useDebugValue",ft(),mN()},useDeferredValue:function(d){return ze="useDeferredValue",ft(),cJ(d)},useTransition:function(){return ze="useTransition",ft(),hJ()},useMutableSource:function(d,h,m){return ze="useMutableSource",ft(),void 0},useSyncExternalStore:function(d,h,m){return ze="useSyncExternalStore",ft(),lN(d,h)},useId:function(){return ze="useId",ft(),bN()},unstable_isNewReconciler:me},Fu={readContext:function(d){return lW(),xo(d)},useCallback:function(d,h){return ze="useCallback",bi(),Tn(),nW(d,h)},useContext:function(d){return ze="useContext",bi(),Tn(),xo(d)},useEffect:function(d,h){return ze="useEffect",bi(),Tn(),hN(d,h)},useImperativeHandle:function(d,h,m){return ze="useImperativeHandle",bi(),Tn(),iW(d,h,m)},useInsertionEffect:function(d,h){return ze="useInsertionEffect",bi(),Tn(),eW(d,h)},useLayoutEffect:function(d,h){return ze="useLayoutEffect",bi(),Tn(),tW(d,h)},useMemo:function(d,h){ze="useMemo",bi(),Tn();var m=yt.current;yt.current=Fu;try{return sW(d,h)}finally{yt.current=m}},useReducer:function(d,h,m){ze="useReducer",bi(),Tn();var C=yt.current;yt.current=Fu;try{return KB(d,h,m)}finally{yt.current=C}},useRef:function(d){return ze="useRef",bi(),Tn(),JB(d)},useState:function(d){ze="useState",bi(),Tn();var h=yt.current;yt.current=Fu;try{return cN(d)}finally{yt.current=h}},useDebugValue:function(d,h){return ze="useDebugValue",bi(),Tn(),void 0},useDeferredValue:function(d){return ze="useDeferredValue",bi(),Tn(),oW(d)},useTransition:function(){return ze="useTransition",bi(),Tn(),rW()},useMutableSource:function(d,h,m){return ze="useMutableSource",bi(),Tn(),void 0},useSyncExternalStore:function(d,h,m){return ze="useSyncExternalStore",bi(),Tn(),ZB(d,h,m)},useId:function(){return ze="useId",bi(),Tn(),aW()},unstable_isNewReconciler:me},Ld={readContext:function(d){return lW(),xo(d)},useCallback:function(d,h){return ze="useCallback",bi(),ft(),_N(d,h)},useContext:function(d){return ze="useContext",bi(),ft(),xo(d)},useEffect:function(d,h){return ze="useEffect",bi(),ft(),PL(d,h)},useImperativeHandle:function(d,h,m){return ze="useImperativeHandle",bi(),ft(),pN(d,h,m)},useInsertionEffect:function(d,h){return ze="useInsertionEffect",bi(),ft(),fN(d,h)},useLayoutEffect:function(d,h){return ze="useLayoutEffect",bi(),ft(),gN(d,h)},useMemo:function(d,h){ze="useMemo",bi(),ft();var m=yt.current;yt.current=Ld;try{return vN(d,h)}finally{yt.current=m}},useReducer:function(d,h,m){ze="useReducer",bi(),ft();var C=yt.current;yt.current=Ld;try{return GB(d,h,m)}finally{yt.current=C}},useRef:function(d){return ze="useRef",bi(),ft(),dN()},useState:function(d){ze="useState",bi(),ft();var h=yt.current;yt.current=Ld;try{return XB(d)}finally{yt.current=h}},useDebugValue:function(d,h){return ze="useDebugValue",bi(),ft(),mN()},useDeferredValue:function(d){return ze="useDeferredValue",bi(),ft(),lJ(d)},useTransition:function(){return ze="useTransition",bi(),ft(),uJ()},useMutableSource:function(d,h,m){return ze="useMutableSource",bi(),ft(),void 0},useSyncExternalStore:function(d,h,m){return ze="useSyncExternalStore",bi(),ft(),lN(d,h)},useId:function(){return ze="useId",bi(),ft(),bN()},unstable_isNewReconciler:me},yN={readContext:function(d){return lW(),xo(d)},useCallback:function(d,h){return ze="useCallback",bi(),ft(),_N(d,h)},useContext:function(d){return ze="useContext",bi(),ft(),xo(d)},useEffect:function(d,h){return ze="useEffect",bi(),ft(),PL(d,h)},useImperativeHandle:function(d,h,m){return ze="useImperativeHandle",bi(),ft(),pN(d,h,m)},useInsertionEffect:function(d,h){return ze="useInsertionEffect",bi(),ft(),fN(d,h)},useLayoutEffect:function(d,h){return ze="useLayoutEffect",bi(),ft(),gN(d,h)},useMemo:function(d,h){ze="useMemo",bi(),ft();var m=yt.current;yt.current=Ld;try{return vN(d,h)}finally{yt.current=m}},useReducer:function(d,h,m){ze="useReducer",bi(),ft();var C=yt.current;yt.current=Ld;try{return YB(d,h,m)}finally{yt.current=C}},useRef:function(d){return ze="useRef",bi(),ft(),dN()},useState:function(d){ze="useState",bi(),ft();var h=yt.current;yt.current=Ld;try{return QB(d)}finally{yt.current=h}},useDebugValue:function(d,h){return ze="useDebugValue",bi(),ft(),mN()},useDeferredValue:function(d){return ze="useDeferredValue",bi(),ft(),cJ(d)},useTransition:function(){return ze="useTransition",bi(),ft(),hJ()},useMutableSource:function(d,h,m){return ze="useMutableSource",bi(),ft(),void 0},useSyncExternalStore:function(d,h,m){return ze="useSyncExternalStore",bi(),ft(),lN(d,h)},useId:function(){return ze="useId",bi(),ft(),bN()},unstable_isNewReconciler:me}}var hp=e.unstable_now,wJ=0,wN=-1,OL=-1,SN=-1,cW=!1,LN=!1;function SJ(){return cW}function d1e(){LN=!0}function u1e(){cW=!1,LN=!1}function h1e(){cW=LN,LN=!1}function LJ(){return wJ}function xJ(){wJ=hp()}function dW(d){OL=hp(),d.actualStartTime<0&&(d.actualStartTime=hp())}function kJ(d){OL=-1}function xN(d,h){if(OL>=0){var m=hp()-OL;d.actualDuration+=m,h&&(d.selfBaseDuration=m),OL=-1}}function Bu(d){if(wN>=0){var h=hp()-wN;wN=-1;for(var m=d.return;m!==null;){switch(m.tag){case f:var C=m.stateNode;C.effectDuration+=h;return;case k:var w=m.stateNode;w.effectDuration+=h;return}m=m.return}}}function uW(d){if(SN>=0){var h=hp()-SN;SN=-1;for(var m=d.return;m!==null;){switch(m.tag){case f:var C=m.stateNode;C!==null&&(C.passiveEffectDuration+=h);return;case k:var w=m.stateNode;w!==null&&(w.passiveEffectDuration+=h);return}m=m.return}}}function Wu(){wN=hp()}function hW(){SN=hp()}function fW(d){for(var h=d.child;h;)d.actualDuration+=h.actualDuration,h=h.sibling}function xd(d,h){if(d&&d.defaultProps){var m=zi({},h),C=d.defaultProps;for(var w in C)m[w]===void 0&&(m[w]=C[w]);return m}return h}var gW={},pW,mW,_W,vW,bW,DJ,kN,CW,yW,wW,FL;{pW=new Set,mW=new Set,_W=new Set,vW=new Set,CW=new Set,bW=new Set,yW=new Set,wW=new Set,FL=new Set;var EJ=new Set;kN=function(d,h){if(!(d===null||typeof d=="function")){var m=h+"_"+d;EJ.has(m)||(EJ.add(m),r("%s(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",h,d))}},DJ=function(d,h){if(h===void 0){var m=on(d)||"Component";bW.has(m)||(bW.add(m),r("%s.getDerivedStateFromProps(): A valid state object (or null) must be returned. You have returned undefined.",m))}},Object.defineProperty(gW,"_processChildContext",{enumerable:!1,value:function(){throw new Error("_processChildContext is not available in React 16+. This likely means you have multiple copies of React and are attempting to nest a React 15 tree inside a React 16 tree using unstable_renderSubtreeIntoContainer, which isn't supported. Try to make sure you have only one copy of React (and ideally, switch to ReactDOM.createPortal).")}}),Object.freeze(gW)}function SW(d,h,m,C){var w=d.memoizedState,D=m(C,w);{if(d.mode&to){cr(!0);try{D=m(C,w)}finally{cr(!1)}}DJ(h,D)}var I=D==null?w:zi({},w,D);if(d.memoizedState=I,d.lanes===Ge){var R=d.updateQueue;R.baseState=I}}var LW={isMounted:nve,enqueueSetState:function(d,h,m){var C=ry(d),w=Wa(),D=mp(C),I=gf(w,D);I.payload=h,m!=null&&(kN(m,"setState"),I.callback=m);var R=lp(C,I,D);R!==null&&(Ko(R,C,D,w),tN(R,C,D)),t3(C,D)},enqueueReplaceState:function(d,h,m){var C=ry(d),w=Wa(),D=mp(C),I=gf(w,D);I.tag=jQ,I.payload=h,m!=null&&(kN(m,"replaceState"),I.callback=m);var R=lp(C,I,D);R!==null&&(Ko(R,C,D,w),tN(R,C,D)),t3(C,D)},enqueueForceUpdate:function(d,h){var m=ry(d),C=Wa(),w=mp(m),D=gf(C,w);D.tag=QT,h!=null&&(kN(h,"forceUpdate"),D.callback=h);var I=lp(m,D,w);I!==null&&(Ko(I,m,w,C),tN(I,m,w)),Ave(m,w)}};function IJ(d,h,m,C,w,D,I){var R=d.stateNode;if(typeof R.shouldComponentUpdate=="function"){var O=R.shouldComponentUpdate(C,D,I);{if(d.mode&to){cr(!0);try{O=R.shouldComponentUpdate(C,D,I)}finally{cr(!1)}}O===void 0&&r("%s.shouldComponentUpdate(): Returned undefined instead of a boolean value. Make sure to return true or false.",on(h)||"Component")}return O}return h.prototype&&h.prototype.isPureReactComponent?!oL(m,C)||!oL(w,D):!0}function f1e(d,h,m){var C=d.stateNode;{var w=on(h)||"Component",D=C.render;D||(h.prototype&&typeof h.prototype.render=="function"?r("%s(...): No `render` method found on the returned component instance: did you accidentally return an object from the constructor?",w):r("%s(...): No `render` method found on the returned component instance: you may have forgotten to define `render`.",w)),C.getInitialState&&!C.getInitialState.isReactClassApproved&&!C.state&&r("getInitialState was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Did you mean to define a state property instead?",w),C.getDefaultProps&&!C.getDefaultProps.isReactClassApproved&&r("getDefaultProps was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Use a static property to define defaultProps instead.",w),C.propTypes&&r("propTypes was defined as an instance property on %s. Use a static property to define propTypes instead.",w),C.contextType&&r("contextType was defined as an instance property on %s. Use a static property to define contextType instead.",w),h.childContextTypes&&!FL.has(h)&&(d.mode&to)===Xt&&(FL.add(h),r(`%s uses the legacy childContextTypes API which is no longer supported and will be removed in the next major release. Use React.createContext() instead

.Learn more about this warning here: https://reactjs.org/link/legacy-context`,w)),h.contextTypes&&!FL.has(h)&&(d.mode&to)===Xt&&(FL.add(h),r(`%s uses the legacy contextTypes API which is no longer supported and will be removed in the next major release. Use React.createContext() with static contextType instead.

Learn more about this warning here: https://reactjs.org/link/legacy-context`,w)),C.contextTypes&&r("contextTypes was defined as an instance property on %s. Use a static property to define contextTypes instead.",w),h.contextType&&h.contextTypes&&!yW.has(h)&&(yW.add(h),r("%s declares both contextTypes and contextType static properties. The legacy contextTypes property will be ignored.",w)),typeof C.componentShouldUpdate=="function"&&r("%s has a method called componentShouldUpdate(). Did you mean shouldComponentUpdate()? The name is phrased as a question because the function is expected to return a value.",w),h.prototype&&h.prototype.isPureReactComponent&&typeof C.shouldComponentUpdate<"u"&&r("%s has a method called shouldComponentUpdate(). shouldComponentUpdate should not be used when extending React.PureComponent. Please extend React.Component if shouldComponentUpdate is used.",on(h)||"A pure component"),typeof C.componentDidUnmount=="function"&&r("%s has a method called componentDidUnmount(). But there is no such lifecycle method. Did you mean componentWillUnmount()?",w),typeof C.componentDidReceiveProps=="function"&&r("%s has a method called componentDidReceiveProps(). But there is no such lifecycle method. If you meant to update the state in response to changing props, use componentWillReceiveProps(). If you meant to fetch data or run side-effects or mutations after React has updated the UI, use componentDidUpdate().",w),typeof C.componentWillRecieveProps=="function"&&r("%s has a method called componentWillRecieveProps(). Did you mean componentWillReceiveProps()?",w),typeof C.UNSAFE_componentWillRecieveProps=="function"&&r("%s has a method called UNSAFE_componentWillRecieveProps(). Did you mean UNSAFE_componentWillReceiveProps()?",w);var I=C.props!==m;C.props!==void 0&&I&&r("%s(...): When calling super() in `%s`, make sure to pass up the same props that your component's constructor was passed.",w,w),C.defaultProps&&r("Setting defaultProps as an instance property on %s is not supported and will be ignored. Instead, define defaultProps as a static property on %s.",w,w),typeof C.getSnapshotBeforeUpdate=="function"&&typeof C.componentDidUpdate!="function"&&!_W.has(h)&&(_W.add(h),r("%s: getSnapshotBeforeUpdate() should be used with componentDidUpdate(). This component defines getSnapshotBeforeUpdate() only.",on(h))),typeof C.getDerivedStateFromProps=="function"&&r("%s: getDerivedStateFromProps() is defined as an instance method and will be ignored. Instead, declare it as a static method.",w),typeof C.getDerivedStateFromError=="function"&&r("%s: getDerivedStateFromError() is defined as an instance method and will be ignored. Instead, declare it as a static method.",w),typeof h.getSnapshotBeforeUpdate=="function"&&r("%s: getSnapshotBeforeUpdate() is defined as a static method and will be ignored. Instead, declare it as an instance method.",w);var R=C.state;R&&(typeof R!="object"||Ln(R))&&r("%s.state: must be set to an object or null",w),typeof C.getChildContext=="function"&&typeof h.childContextTypes!="object"&&r("%s.getChildContext(): childContextTypes must be defined in order to use getChildContext().",w)}}function TJ(d,h){h.updater=LW,d.stateNode=h,Q_e(h,d),h._reactInternalInstance=gW}function NJ(d,h,m){var C=!1,w=oc,D=oc,I=h.contextType;if("contextType"in h){var R=I===null||I!==void 0&&I.$$typeof===Et&&I._context===void 0;if(!R&&!wW.has(h)){wW.add(h);var O="";I===void 0?O=" However, it is set to undefined. This can be caused by a typo or by mixing up named and default imports. This can also happen due to a circular dependency, so try moving the createContext() call to a separate file.":typeof I!="object"?O=" However, it is set to a "+typeof I+".":I.$$typeof===rt?O=" Did you accidentally pass the Context.Provider instead?":I._context!==void 0?O=" Did you accidentally pass the Context.Consumer instead?":O=" However, it is set to an object with keys {"+Object.keys(I).join(", ")+"}.",r("%s defines an invalid contextType. contextType should point to the Context object returned by React.createContext().%s",on(h)||"Component",O)}}if(typeof I=="object"&&I!==null)D=xo(I);else{w=Ly(d,h,!0);var U=h.contextTypes;C=U!=null,D=C?xy(d,w):oc}var q=new h(m,D);if(d.mode&to){cr(!0);try{q=new h(m,D)}finally{cr(!1)}}var ce=d.memoizedState=q.state!==null&&q.state!==void 0?q.state:null;TJ(d,q);{if(typeof h.getDerivedStateFromProps=="function"&&ce===null){var ae=on(h)||"Component";mW.has(ae)||(mW.add(ae),r("`%s` uses `getDerivedStateFromProps` but its initial state is %s. This is not recommended. Instead, define the initial state by assigning an object to `this.state` in the constructor of `%s`. This ensures that `getDerivedStateFromProps` arguments have a consistent shape.",ae,q.state===null?"null":"undefined",ae))}if(typeof h.getDerivedStateFromProps=="function"||typeof q.getSnapshotBeforeUpdate=="function"){var ke=null,Te=null,Be=null;if(typeof q.componentWillMount=="function"&&q.componentWillMount.__suppressDeprecationWarning!==!0?ke="componentWillMount":typeof q.UNSAFE_componentWillMount=="function"&&(ke="UNSAFE_componentWillMount"),typeof q.componentWillReceiveProps=="function"&&q.componentWillReceiveProps.__suppressDeprecationWarning!==!0?Te="componentWillReceiveProps":typeof q.UNSAFE_componentWillReceiveProps=="function"&&(Te="UNSAFE_componentWillReceiveProps"),typeof q.componentWillUpdate=="function"&&q.componentWillUpdate.__suppressDeprecationWarning!==!0?Be="componentWillUpdate":typeof q.UNSAFE_componentWillUpdate=="function"&&(Be="UNSAFE_componentWillUpdate"),ke!==null||Te!==null||Be!==null){var _t=on(h)||"Component",Yt=typeof h.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";vW.has(_t)||(vW.add(_t),r(`Unsafe legacy lifecycles will not be called for components using new component APIs.

%s uses %s but also contains the following legacy lifecycles:%s%s%s

The above lifecycles should be removed. Learn more about this warning here:
https://reactjs.org/link/unsafe-component-lifecycles`,_t,Yt,ke!==null?`
  `+ke:"",Te!==null?`
  `+Te:"",Be!==null?`
  `+Be:""))}}}return C&&CQ(d,w,D),q}function g1e(d,h){var m=h.state;typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),m!==h.state&&(r("%s.componentWillMount(): Assigning directly to this.state is deprecated (except inside a component's constructor). Use setState instead.",Ei(d)||"Component"),LW.enqueueReplaceState(h,h.state,null))}function RJ(d,h,m,C){var w=h.state;if(typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(m,C),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(m,C),h.state!==w){{var D=Ei(d)||"Component";pW.has(D)||(pW.add(D),r("%s.componentWillReceiveProps(): Assigning directly to this.state is deprecated (except inside a component's constructor). Use setState instead.",D))}LW.enqueueReplaceState(h,h.state,null)}}function xW(d,h,m,C){f1e(d,h,m);var w=d.stateNode;w.props=m,w.state=d.memoizedState,w.refs={},AB(d);var D=h.contextType;if(typeof D=="object"&&D!==null)w.context=xo(D);else{var I=Ly(d,h,!0);w.context=xy(d,I)}{if(w.state===m){var R=on(h)||"Component";CW.has(R)||(CW.add(R),r("%s: It is not recommended to assign props directly to state because updates to props won't be reflected in state. In most cases, it is better to use props directly.",R))}d.mode&to&&wd.recordLegacyContextWarning(d,w),wd.recordUnsafeLifecycleWarnings(d,w)}w.state=d.memoizedState;var O=h.getDerivedStateFromProps;if(typeof O=="function"&&(SW(d,h,O,m),w.state=d.memoizedState),typeof h.getDerivedStateFromProps!="function"&&typeof w.getSnapshotBeforeUpdate!="function"&&(typeof w.UNSAFE_componentWillMount=="function"||typeof w.componentWillMount=="function")&&(g1e(d,w),iN(d,m,w,C),w.state=d.memoizedState),typeof w.componentDidMount=="function"){var U=Ji;U|=v_,(d.mode&Nu)!==Xt&&(U|=sf),d.flags|=U}}function p1e(d,h,m,C){var w=d.stateNode,D=d.memoizedProps;w.props=D;var I=w.context,R=h.contextType,O=oc;if(typeof R=="object"&&R!==null)O=xo(R);else{var U=Ly(d,h,!0);O=xy(d,U)}var q=h.getDerivedStateFromProps,ce=typeof q=="function"||typeof w.getSnapshotBeforeUpdate=="function";!ce&&(typeof w.UNSAFE_componentWillReceiveProps=="function"||typeof w.componentWillReceiveProps=="function")&&(D!==m||I!==O)&&RJ(d,w,m,O),KQ();var ae=d.memoizedState,ke=w.state=ae;if(iN(d,m,w,C),ke=d.memoizedState,D===m&&ae===ke&&!FT()&&!nN()){if(typeof w.componentDidMount=="function"){var Te=Ji;Te|=v_,(d.mode&Nu)!==Xt&&(Te|=sf),d.flags|=Te}return!1}typeof q=="function"&&(SW(d,h,q,m),ke=d.memoizedState);var Be=nN()||IJ(d,h,D,m,ae,ke,O);if(Be){if(!ce&&(typeof w.UNSAFE_componentWillMount=="function"||typeof w.componentWillMount=="function")&&(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"){var _t=Ji;_t|=v_,(d.mode&Nu)!==Xt&&(_t|=sf),d.flags|=_t}}else{if(typeof w.componentDidMount=="function"){var Yt=Ji;Yt|=v_,(d.mode&Nu)!==Xt&&(Yt|=sf),d.flags|=Yt}d.memoizedProps=m,d.memoizedState=ke}return w.props=m,w.state=ke,w.context=O,Be}function m1e(d,h,m,C,w){var D=h.stateNode;qQ(d,h);var I=h.memoizedProps,R=h.type===h.elementType?I:xd(h.type,I);D.props=R;var O=h.pendingProps,U=D.context,q=m.contextType,ce=oc;if(typeof q=="object"&&q!==null)ce=xo(q);else{var ae=Ly(h,m,!0);ce=xy(h,ae)}var ke=m.getDerivedStateFromProps,Te=typeof ke=="function"||typeof D.getSnapshotBeforeUpdate=="function";!Te&&(typeof D.UNSAFE_componentWillReceiveProps=="function"||typeof D.componentWillReceiveProps=="function")&&(I!==O||U!==ce)&&RJ(h,D,C,ce),KQ();var Be=h.memoizedState,_t=D.state=Be;if(iN(h,C,D,w),_t=h.memoizedState,I===O&&Be===_t&&!FT()&&!nN()&&!pe)return typeof D.componentDidUpdate=="function"&&(I!==d.memoizedProps||Be!==d.memoizedState)&&(h.flags|=Ji),typeof D.getSnapshotBeforeUpdate=="function"&&(I!==d.memoizedProps||Be!==d.memoizedState)&&(h.flags|=m_),!1;typeof ke=="function"&&(SW(h,m,ke,C),_t=h.memoizedState);var Yt=nN()||IJ(h,m,R,C,Be,_t,ce)||pe;return Yt?(!Te&&(typeof D.UNSAFE_componentWillUpdate=="function"||typeof D.componentWillUpdate=="function")&&(typeof D.componentWillUpdate=="function"&&D.componentWillUpdate(C,_t,ce),typeof D.UNSAFE_componentWillUpdate=="function"&&D.UNSAFE_componentWillUpdate(C,_t,ce)),typeof D.componentDidUpdate=="function"&&(h.flags|=Ji),typeof D.getSnapshotBeforeUpdate=="function"&&(h.flags|=m_)):(typeof D.componentDidUpdate=="function"&&(I!==d.memoizedProps||Be!==d.memoizedState)&&(h.flags|=Ji),typeof D.getSnapshotBeforeUpdate=="function"&&(I!==d.memoizedProps||Be!==d.memoizedState)&&(h.flags|=m_),h.memoizedProps=C,h.memoizedState=_t),D.props=C,D.state=_t,D.context=ce,Yt}function O_(d,h){return{value:d,source:h,stack:L0(h),digest:null}}function kW(d,h,m){return{value:d,source:null,stack:m??null,digest:h??null}}function _1e(d,h){return!0}function DW(d,h){try{var m=_1e(d,h);if(m===!1)return;var C=h.value,w=h.source,D=h.stack,I=D!==null?D:"";if(C!=null&&C._suppressLogging){if(d.tag===c)return;console.error(C)}var R=w?Ei(w):null,O=R?"The above error occurred in the <"+R+"> component:":"The above error occurred in one of your React components:",U;if(d.tag===f)U=`Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.`;else{var q=Ei(d)||"Anonymous";U="React will try to recreate this component tree from scratch "+("using the error boundary you provided, "+q+".")}var ce=O+`
`+I+`

`+(""+U);console.error(ce)}catch(ae){setTimeout(function(){throw ae})}}var v1e=typeof WeakMap=="function"?WeakMap:Map;function MJ(d,h,m){var C=gf(Ls,m);C.tag=RB,C.payload={element:null};var w=h.value;return C.callback=function(){d0e(w),DW(d,h)},C}function EW(d,h,m){var C=gf(Ls,m);C.tag=RB;var w=d.type.getDerivedStateFromError;if(typeof w=="function"){var D=h.value;C.payload=function(){return w(D)},C.callback=function(){$ee(d),DW(d,h)}}var I=d.stateNode;return I!==null&&typeof I.componentDidCatch=="function"&&(C.callback=function(){$ee(d),DW(d,h),typeof w!="function"&&l0e(this);var O=h.value,U=h.stack;this.componentDidCatch(O,{componentStack:U!==null?U:""}),typeof w!="function"&&(tc(d.lanes,vi)||r("%s: Error boundaries should implement getDerivedStateFromError(). In that method, return a state update to display an error message or fallback UI.",Ei(d)||"Unknown"))}),C}function AJ(d,h,m){var C=d.pingCache,w;if(C===null?(C=d.pingCache=new v1e,w=new Set,C.set(h,w)):(w=C.get(h),w===void 0&&(w=new Set,C.set(h,w))),!w.has(m)){w.add(m);var D=u0e.bind(null,d,h,m);vd&&ex(d,m),h.then(D,D)}}function b1e(d,h,m,C){var w=d.updateQueue;if(w===null){var D=new Set;D.add(m),d.updateQueue=D}else w.add(m)}function C1e(d,h){var m=d.tag;if((d.mode&qi)===Xt&&(m===l||m===x||m===A)){var C=d.alternate;C?(d.updateQueue=C.updateQueue,d.memoizedState=C.memoizedState,d.lanes=C.lanes):(d.updateQueue=null,d.memoizedState=null)}}function PJ(d){var h=d;do{if(h.tag===E&&e1e(h))return h;h=h.return}while(h!==null);return null}function OJ(d,h,m,C,w){if((d.mode&qi)===Xt){if(d===h)d.flags|=Oa;else{if(d.flags|=xn,m.flags|=G5,m.flags&=~(J_e|O0),m.tag===c){var D=m.alternate;if(D===null)m.tag=H;else{var I=gf(Ls,vi);I.tag=QT,lp(m,I,vi)}}m.lanes=Ai(m.lanes,vi)}return d}return d.flags|=Oa,d.lanes=w,d}function y1e(d,h,m,C,w){if(m.flags|=O0,vd&&ex(d,w),C!==null&&typeof C=="object"&&typeof C.then=="function"){var D=C;C1e(m),Er()&&m.mode&qi&&DQ();var I=PJ(h);if(I!==null){I.flags&=~tf,OJ(I,h,m,d,w),I.mode&qi&&AJ(d,D,w),b1e(I,d,D);return}else{if(!Uve(w)){AJ(d,D,w),aH();return}var R=new Error("A component suspended while responding to synchronous input. This will cause the UI to be replaced with a loading indicator. To fix, updates that suspend should be wrapped with startTransition.");C=R}}else if(Er()&&m.mode&qi){DQ();var O=PJ(h);if(O!==null){(O.flags&Oa)===ni&&(O.flags|=tf),OJ(O,h,m,d,w),CB(O_(C,m));return}}C=O_(C,m),e0e(C);var U=h;do{switch(U.tag){case f:{var q=C;U.flags|=Oa;var ce=$0(w);U.lanes=Ai(U.lanes,ce);var ae=MJ(U,q,ce);PB(U,ae);return}case c:var ke=C,Te=U.type,Be=U.stateNode;if((U.flags&xn)===ni&&(typeof Te.getDerivedStateFromError=="function"||Be!==null&&typeof Be.componentDidCatch=="function"&&!Pee(Be))){U.flags|=Oa;var _t=$0(w);U.lanes=Ai(U.lanes,_t);var Yt=EW(U,ke,_t);PB(U,Yt);return}break}U=U.return}while(U!==null)}function w1e(){return null}var BL=t.ReactCurrentOwner,kd=!1,IW,WL,TW,NW,RW,F_,MW,DN,HL;IW={},WL={},TW={},NW={},RW={},F_=!1,MW={},DN={},HL={};function Fa(d,h,m,C){d===null?h.child=WQ(h,null,m,C):h.child=Iy(h,d.child,m,C)}function S1e(d,h,m,C){h.child=Iy(h,d.child,null,C),h.child=Iy(h,null,m,C)}function FJ(d,h,m,C,w){if(h.type!==h.elementType){var D=m.propTypes;D&&Cd(D,C,"prop",on(m))}var I=m.render,R=h.ref,O,U;Ny(h,w),B0(h);{if(BL.current=h,Jl(!0),O=Fy(d,h,I,C,R,w),U=By(),h.mode&to){cr(!0);try{O=Fy(d,h,I,C,R,w),U=By()}finally{cr(!1)}}Jl(!1)}return dy(),d!==null&&!kd?(JQ(d,h,w),pf(d,h,w)):(Er()&&U&&gB(h),h.flags|=ay,Fa(d,h,O,w),h.child)}function BJ(d,h,m,C,w){if(d===null){var D=m.type;if(E0e(D)&&m.compare===null&&m.defaultProps===void 0){var I=D;return I=qy(D),h.tag=A,h.type=I,OW(h,D),WJ(d,h,I,C,w)}{var R=D.propTypes;if(R&&Cd(R,C,"prop",on(D)),m.defaultProps!==void 0){var O=on(D)||"Unknown";HL[O]||(r("%s: Support for defaultProps will be removed from memo components in a future major release. Use JavaScript default parameters instead.",O),HL[O]=!0)}}var U=vH(m.type,null,C,h,h.mode,w);return U.ref=h.ref,U.return=h,h.child=U,U}{var q=m.type,ce=q.propTypes;ce&&Cd(ce,C,"prop",on(q))}var ae=d.child,ke=zW(d,w);if(!ke){var Te=ae.memoizedProps,Be=m.compare;if(Be=Be!==null?Be:oL,Be(Te,C)&&d.ref===h.ref)return pf(d,h,w)}h.flags|=ay;var _t=z_(ae,C);return _t.ref=h.ref,_t.return=h,h.child=_t,_t}function WJ(d,h,m,C,w){if(h.type!==h.elementType){var D=h.elementType;if(D.$$typeof===Me){var I=D,R=I._payload,O=I._init;try{D=O(R)}catch{D=null}var U=D&&D.propTypes;U&&Cd(U,C,"prop",on(D))}}if(d!==null){var q=d.memoizedProps;if(oL(q,C)&&d.ref===h.ref&&h.type===d.type)if(kd=!1,h.pendingProps=C=q,zW(d,w))(d.flags&G5)!==ni&&(kd=!0);else return h.lanes=d.lanes,pf(d,h,w)}return AW(d,h,m,C,w)}function HJ(d,h,m){var C=h.pendingProps,w=C.children,D=d!==null?d.memoizedState:null;if(C.mode==="hidden"||Fe)if((h.mode&qi)===Xt){var I={baseLanes:Ge,cachePool:null,transitions:null};h.memoizedState=I,HN(h,m)}else if(tc(m,ec)){var ce={baseLanes:Ge,cachePool:null,transitions:null};h.memoizedState=ce;var ae=D!==null?D.baseLanes:m;HN(h,ae)}else{var R=null,O;if(D!==null){var U=D.baseLanes;O=Ai(U,m)}else O=m;h.lanes=h.childLanes=ec;var q={baseLanes:O,cachePool:R,transitions:null};return h.memoizedState=q,h.updateQueue=null,HN(h,O),null}else{var ke;D!==null?(ke=Ai(D.baseLanes,m),h.memoizedState=null):ke=m,HN(h,ke)}return Fa(d,h,w,m),h.child}function L1e(d,h,m){var C=h.pendingProps;return Fa(d,h,C,m),h.child}function x1e(d,h,m){var C=h.pendingProps.children;return Fa(d,h,C,m),h.child}function k1e(d,h,m){{h.flags|=Ji;{var C=h.stateNode;C.effectDuration=0,C.passiveEffectDuration=0}}var w=h.pendingProps,D=w.children;return Fa(d,h,D,m),h.child}function VJ(d,h){var m=h.ref;(d===null&&m!==null||d!==null&&d.ref!==m)&&(h.flags|=Zg,h.flags|=Y5)}function AW(d,h,m,C,w){if(h.type!==h.elementType){var D=m.propTypes;D&&Cd(D,C,"prop",on(m))}var I;{var R=Ly(h,m,!0);I=xy(h,R)}var O,U;Ny(h,w),B0(h);{if(BL.current=h,Jl(!0),O=Fy(d,h,m,C,I,w),U=By(),h.mode&to){cr(!0);try{O=Fy(d,h,m,C,I,w),U=By()}finally{cr(!1)}}Jl(!1)}return dy(),d!==null&&!kd?(JQ(d,h,w),pf(d,h,w)):(Er()&&U&&gB(h),h.flags|=ay,Fa(d,h,O,w),h.child)}function zJ(d,h,m,C,w){{switch(U0e(h)){case!1:{var D=h.stateNode,I=h.type,R=new I(h.memoizedProps,D.context),O=R.state;D.updater.enqueueSetState(D,O,null);break}case!0:{h.flags|=xn,h.flags|=Oa;var U=new Error("Simulated error coming from DevTools"),q=$0(w);h.lanes=Ai(h.lanes,q);var ce=EW(h,O_(U,h),q);PB(h,ce);break}}if(h.type!==h.elementType){var ae=m.propTypes;ae&&Cd(ae,C,"prop",on(m))}}var ke;Au(m)?(ke=!0,WT(h)):ke=!1,Ny(h,w);var Te=h.stateNode,Be;Te===null?(IN(d,h),NJ(h,m,C),xW(h,m,C,w),Be=!0):d===null?Be=p1e(h,m,C,w):Be=m1e(d,h,m,C,w);var _t=PW(d,h,m,Be,ke,w);{var Yt=h.stateNode;Be&&Yt.props!==C&&(F_||r("It looks like %s is reassigning its own `this.props` while rendering. This is not supported and can lead to confusing bugs.",Ei(h)||"a component"),F_=!0)}return _t}function PW(d,h,m,C,w,D){VJ(d,h);var I=(h.flags&xn)!==ni;if(!C&&!I)return w&&SQ(h,m,!1),pf(d,h,D);var R=h.stateNode;BL.current=h;var O;if(I&&typeof m.getDerivedStateFromError!="function")O=null,kJ();else{B0(h);{if(Jl(!0),O=R.render(),h.mode&to){cr(!0);try{R.render()}finally{cr(!1)}}Jl(!1)}dy()}return h.flags|=ay,d!==null&&I?S1e(d,h,O,D):Fa(d,h,O,D),h.memoizedState=R.state,w&&SQ(h,m,!0),h.child}function UJ(d){var h=d.stateNode;h.pendingContext?yQ(d,h.pendingContext,h.pendingContext!==h.context):h.context&&yQ(d,h.context,!1),OB(d,h.containerInfo)}function D1e(d,h,m){if(UJ(h),d===null)throw new Error("Should have a current fiber. This is a bug in React.");var C=h.pendingProps,w=h.memoizedState,D=w.element;qQ(d,h),iN(h,C,null,m);var I=h.memoizedState;h.stateNode;var R=I.element;if(w.isDehydrated){var O={element:R,isDehydrated:!1,cache:I.cache,pendingSuspenseBoundaries:I.pendingSuspenseBoundaries,transitions:I.transitions},U=h.updateQueue;if(U.baseState=O,h.memoizedState=O,h.flags&tf){var q=O_(new Error("There was an error while hydrating. Because the error happened outside of a Suspense boundary, the entire root will switch to client rendering."),h);return $J(d,h,R,m,q)}else if(R!==D){var ce=O_(new Error("This root received an early update, before anything was able hydrate. Switched the entire root to client rendering."),h);return $J(d,h,R,m,ce)}else{Twe(h);var ae=WQ(h,null,R,m);h.child=ae;for(var ke=ae;ke;)ke.flags=ke.flags&~Lo|nf,ke=ke.sibling}}else{if(Ey(),R===D)return pf(d,h,m);Fa(d,h,R,m)}return h.child}function $J(d,h,m,C,w){return Ey(),CB(w),h.flags|=tf,Fa(d,h,m,C),h.child}function E1e(d,h,m){ZQ(h),d===null&&bB(h);var C=h.type,w=h.pendingProps,D=d!==null?d.memoizedProps:null,I=w.children,R=eB(C,w);return R?I=null:D!==null&&eB(C,D)&&(h.flags|=P0),VJ(d,h),Fa(d,h,I,m),h.child}function I1e(d,h){return d===null&&bB(h),null}function T1e(d,h,m,C){IN(d,h);var w=h.pendingProps,D=m,I=D._payload,R=D._init,O=R(I);h.type=O;var U=h.tag=I0e(O),q=xd(O,w),ce;switch(U){case l:return OW(h,O),h.type=O=qy(O),ce=AW(null,h,O,q,C),ce;case c:return h.type=O=hH(O),ce=zJ(null,h,O,q,C),ce;case x:return h.type=O=fH(O),ce=FJ(null,h,O,q,C),ce;case N:{if(h.type!==h.elementType){var ae=O.propTypes;ae&&Cd(ae,q,"prop",on(O))}return ce=BJ(null,h,O,xd(O.type,q),C),ce}}var ke="";throw O!==null&&typeof O=="object"&&O.$$typeof===Me&&(ke=" Did you wrap a component in React.lazy() more than once?"),new Error("Element type is invalid. Received a promise that resolves to: "+O+". "+("Lazy element type must resolve to a class or function."+ke))}function N1e(d,h,m,C,w){IN(d,h),h.tag=c;var D;return Au(m)?(D=!0,WT(h)):D=!1,Ny(h,w),NJ(h,m,C),xW(h,m,C,w),PW(null,h,m,!0,D,w)}function R1e(d,h,m,C){IN(d,h);var w=h.pendingProps,D;{var I=Ly(h,m,!1);D=xy(h,I)}Ny(h,C);var R,O;B0(h);{if(m.prototype&&typeof m.prototype.render=="function"){var U=on(m)||"Unknown";IW[U]||(r("The <%s /> component appears to have a render method, but doesn't extend React.Component. This is likely to cause errors. Change %s to extend React.Component instead.",U,U),IW[U]=!0)}h.mode&to&&wd.recordLegacyContextWarning(h,null),Jl(!0),BL.current=h,R=Fy(null,h,m,w,D,C),O=By(),Jl(!1)}if(dy(),h.flags|=ay,typeof R=="object"&&R!==null&&typeof R.render=="function"&&R.$$typeof===void 0){var q=on(m)||"Unknown";WL[q]||(r("The <%s /> component appears to be a function component that returns a class instance. Change %s to a class that extends React.Component instead. If you can't use a class try assigning the prototype on the function as a workaround. `%s.prototype = React.Component.prototype`. Don't use an arrow function since it cannot be called with `new` by React.",q,q,q),WL[q]=!0)}if(typeof R=="object"&&R!==null&&typeof R.render=="function"&&R.$$typeof===void 0){{var ce=on(m)||"Unknown";WL[ce]||(r("The <%s /> component appears to be a function component that returns a class instance. Change %s to a class that extends React.Component instead. If you can't use a class try assigning the prototype on the function as a workaround. `%s.prototype = React.Component.prototype`. Don't use an arrow function since it cannot be called with `new` by React.",ce,ce,ce),WL[ce]=!0)}h.tag=c,h.memoizedState=null,h.updateQueue=null;var ae=!1;return Au(m)?(ae=!0,WT(h)):ae=!1,h.memoizedState=R.state!==null&&R.state!==void 0?R.state:null,AB(h),TJ(h,R),xW(h,m,w,C),PW(null,h,m,!0,ae,C)}else{if(h.tag=l,h.mode&to){cr(!0);try{R=Fy(null,h,m,w,D,C),O=By()}finally{cr(!1)}}return Er()&&O&&gB(h),Fa(null,h,R,C),OW(h,m),h.child}}function OW(d,h){{if(h&&h.childContextTypes&&r("%s(...): childContextTypes cannot be defined on a function component.",h.displayName||h.name||"Component"),d.ref!==null){var m="",C=qg();C&&(m+=`

Check the render method of \``+C+"`.");var w=C||"",D=d._debugSource;D&&(w=D.fileName+":"+D.lineNumber),RW[w]||(RW[w]=!0,r("Function components cannot be given refs. Attempts to access this ref will fail. Did you mean to use React.forwardRef()?%s",m))}if(h.defaultProps!==void 0){var I=on(h)||"Unknown";HL[I]||(r("%s: Support for defaultProps will be removed from function components in a future major release. Use JavaScript default parameters instead.",I),HL[I]=!0)}if(typeof h.getDerivedStateFromProps=="function"){var R=on(h)||"Unknown";NW[R]||(r("%s: Function components do not support getDerivedStateFromProps.",R),NW[R]=!0)}if(typeof h.contextType=="object"&&h.contextType!==null){var O=on(h)||"Unknown";TW[O]||(r("%s: Function components do not support contextType.",O),TW[O]=!0)}}}var FW={dehydrated:null,treeContext:null,retryLane:dr};function BW(d){return{baseLanes:d,cachePool:w1e(),transitions:null}}function M1e(d,h){var m=null;return{baseLanes:Ai(d.baseLanes,h),cachePool:m,transitions:d.transitions}}function A1e(d,h,m,C){if(h!==null){var w=h.memoizedState;if(w===null)return!1}return WB(d,IL)}function P1e(d,h){return lT(d.childLanes,h)}function jJ(d,h,m){var C=h.pendingProps;$0e(h)&&(h.flags|=xn);var w=Sd.current,D=!1,I=(h.flags&xn)!==ni;if(I||A1e(w,d)?(D=!0,h.flags&=~xn):(d===null||d.memoizedState!==null)&&(w=Jwe(w,QQ)),w=My(w),dp(h,w),d===null){bB(h);var R=h.memoizedState;if(R!==null){var O=R.dehydrated;if(O!==null)return H1e(h,O)}var U=C.children,q=C.fallback;if(D){var ce=O1e(h,U,q,m),ae=h.child;return ae.memoizedState=BW(m),h.memoizedState=FW,ce}else return WW(h,U)}else{var ke=d.memoizedState;if(ke!==null){var Te=ke.dehydrated;if(Te!==null)return V1e(d,h,I,C,Te,ke,m)}if(D){var Be=C.fallback,_t=C.children,Yt=B1e(d,h,_t,Be,m),Ft=h.child,Gi=d.child.memoizedState;return Ft.memoizedState=Gi===null?BW(m):M1e(Gi,m),Ft.childLanes=P1e(d,m),h.memoizedState=FW,Yt}else{var Hi=C.children,_e=F1e(d,h,Hi,m);return h.memoizedState=null,_e}}}function WW(d,h,m){var C=d.mode,w={mode:"visible",children:h},D=HW(w,C);return D.return=d,d.child=D,D}function O1e(d,h,m,C){var w=d.mode,D=d.child,I={mode:"hidden",children:h},R,O;return(w&qi)===Xt&&D!==null?(R=D,R.childLanes=Ge,R.pendingProps=I,d.mode&zn&&(R.actualDuration=0,R.actualStartTime=-1,R.selfBaseDuration=0,R.treeBaseDuration=0),O=vp(m,w,C,null)):(R=HW(I,w),O=vp(m,w,C,null)),R.return=d,O.return=d,R.sibling=O,d.child=R,O}function HW(d,h,m){return qee(d,h,Ge,null)}function qJ(d,h){return z_(d,h)}function F1e(d,h,m,C){var w=d.child,D=w.sibling,I=qJ(w,{mode:"visible",children:m});if((h.mode&qi)===Xt&&(I.lanes=C),I.return=h,I.sibling=null,D!==null){var R=h.deletions;R===null?(h.deletions=[D],h.flags|=p_):R.push(D)}return h.child=I,I}function B1e(d,h,m,C,w){var D=h.mode,I=d.child,R=I.sibling,O={mode:"hidden",children:m},U;if((D&qi)===Xt&&h.child!==I){var q=h.child;U=q,U.childLanes=Ge,U.pendingProps=O,h.mode&zn&&(U.actualDuration=0,U.actualStartTime=-1,U.selfBaseDuration=I.selfBaseDuration,U.treeBaseDuration=I.treeBaseDuration),h.deletions=null}else U=qJ(I,O),U.subtreeFlags=I.subtreeFlags&of;var ce;return R!==null?ce=z_(R,C):(ce=vp(C,D,w,null),ce.flags|=Lo),ce.return=h,U.return=h,U.sibling=ce,h.child=U,ce}function EN(d,h,m,C){C!==null&&CB(C),Iy(h,d.child,null,m);var w=h.pendingProps,D=w.children,I=WW(h,D);return I.flags|=Lo,h.memoizedState=null,I}function W1e(d,h,m,C,w){var D=h.mode,I={mode:"visible",children:m},R=HW(I,D),O=vp(C,D,w,null);return O.flags|=Lo,R.return=h,O.return=h,R.sibling=O,h.child=R,(h.mode&qi)!==Xt&&Iy(h,d.child,null,w),O}function H1e(d,h,m){return(d.mode&qi)===Xt?(r("Cannot hydrate Suspense in legacy mode. Switch from ReactDOM.hydrate(element, container) to ReactDOMClient.hydrateRoot(container, <App />).render(element) or remove the Suspense components from the server rendered components."),d.lanes=vi):sB(h)?d.lanes=y_:d.lanes=ec,null}function V1e(d,h,m,C,w,D,I){if(m)if(h.flags&tf){h.flags&=~tf;var _e=kW(new Error("There was an error while hydrating this Suspense boundary. Switched to client rendering."));return EN(d,h,I,_e)}else{if(h.memoizedState!==null)return h.child=d.child,h.flags|=xn,null;var We=C.children,ve=C.fallback,Je=W1e(d,h,We,ve,I),St=h.child;return St.memoizedState=BW(I),h.memoizedState=FW,Je}else{if(Ewe(),(h.mode&qi)===Xt)return EN(d,h,I,null);if(sB(w)){var R,O,U;{var q=jye(w);R=q.digest,O=q.message,U=q.stack}var ce;O?ce=new Error(O):ce=new Error("The server could not finish this Suspense boundary, likely due to an error during server rendering. Switched to client rendering.");var ae=kW(ce,R,U);return EN(d,h,I,ae)}var ke=tc(I,d.childLanes);if(kd||ke){var Te=WN();if(Te!==null){var Be=Xve(Te,I);if(Be!==dr&&Be!==D.retryLane){D.retryLane=Be;var _t=Ls;ml(d,Be),Ko(Te,d,Be,_t)}}aH();var Yt=kW(new Error("This Suspense boundary received an update before it finished hydrating. This caused the boundary to switch to client rendering. The usual way to fix this is to wrap the original update in startTransition."));return EN(d,h,I,Yt)}else if(pQ(w)){h.flags|=xn,h.child=d.child;var Ft=h0e.bind(null,d);return qye(w,Ft),null}else{Nwe(h,w,D.treeContext);var Gi=C.children,Hi=WW(h,Gi);return Hi.flags|=nf,Hi}}}function KJ(d,h,m){d.lanes=Ai(d.lanes,h);var C=d.alternate;C!==null&&(C.lanes=Ai(C.lanes,h)),TB(d.return,h,m)}function z1e(d,h,m){for(var C=h;C!==null;){if(C.tag===E){var w=C.memoizedState;w!==null&&KJ(C,m,d)}else if(C.tag===Q)KJ(C,m,d);else if(C.child!==null){C.child.return=C,C=C.child;continue}if(C===d)return;for(;C.sibling===null;){if(C.return===null||C.return===d)return;C=C.return}C.sibling.return=C.return,C=C.sibling}}function U1e(d){for(var h=d,m=null;h!==null;){var C=h.alternate;C!==null&&rN(C)===null&&(m=h),h=h.sibling}return m}function $1e(d){if(d!==void 0&&d!=="forwards"&&d!=="backwards"&&d!=="together"&&!MW[d])if(MW[d]=!0,typeof d=="string")switch(d.toLowerCase()){case"together":case"forwards":case"backwards":{r('"%s" is not a valid value for revealOrder on <SuspenseList />. Use lowercase "%s" instead.',d,d.toLowerCase());break}case"forward":case"backward":{r('"%s" is not a valid value for revealOrder on <SuspenseList />. React uses the -s suffix in the spelling. Use "%ss" instead.',d,d.toLowerCase());break}default:r('"%s" is not a supported revealOrder on <SuspenseList />. Did you mean "together", "forwards" or "backwards"?',d);break}else r('%s is not a supported value for revealOrder on <SuspenseList />. Did you mean "together", "forwards" or "backwards"?',d)}function j1e(d,h){d!==void 0&&!DN[d]&&(d!=="collapsed"&&d!=="hidden"?(DN[d]=!0,r('"%s" is not a supported value for tail on <SuspenseList />. Did you mean "collapsed" or "hidden"?',d)):h!=="forwards"&&h!=="backwards"&&(DN[d]=!0,r('<SuspenseList tail="%s" /> is only valid if revealOrder is "forwards" or "backwards". Did you mean to specify revealOrder="forwards"?',d)))}function GJ(d,h){{var m=Ln(d),C=!m&&typeof Eu(d)=="function";if(m||C){var w=m?"array":"iterable";return r("A nested %s was passed to row #%s in <SuspenseList />. Wrap it in an additional SuspenseList to configure its revealOrder: <SuspenseList revealOrder=...> ... <SuspenseList revealOrder=...>{%s}</SuspenseList> ... </SuspenseList>",w,h,w),!1}}return!0}function q1e(d,h){if((h==="forwards"||h==="backwards")&&d!==void 0&&d!==null&&d!==!1)if(Ln(d)){for(var m=0;m<d.length;m++)if(!GJ(d[m],m))return}else{var C=Eu(d);if(typeof C=="function"){var w=C.call(d);if(w)for(var D=w.next(),I=0;!D.done;D=w.next()){if(!GJ(D.value,I))return;I++}}else r('A single row was passed to a <SuspenseList revealOrder="%s" />. This is not useful since it needs multiple rows. Did you mean to pass multiple children or an array?',h)}}function VW(d,h,m,C,w){var D=d.memoizedState;D===null?d.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:C,tail:m,tailMode:w}:(D.isBackwards=h,D.rendering=null,D.renderingStartTime=0,D.last=C,D.tail=m,D.tailMode=w)}function YJ(d,h,m){var C=h.pendingProps,w=C.revealOrder,D=C.tail,I=C.children;$1e(w),j1e(D,w),q1e(I,w),Fa(d,h,I,m);var R=Sd.current,O=WB(R,IL);if(O)R=HB(R,IL),h.flags|=xn;else{var U=d!==null&&(d.flags&xn)!==ni;U&&z1e(h,h.child,m),R=My(R)}if(dp(h,R),(h.mode&qi)===Xt)h.memoizedState=null;else switch(w){case"forwards":{var q=U1e(h.child),ce;q===null?(ce=h.child,h.child=null):(ce=q.sibling,q.sibling=null),VW(h,!1,ce,q,D);break}case"backwards":{var ae=null,ke=h.child;for(h.child=null;ke!==null;){var Te=ke.alternate;if(Te!==null&&rN(Te)===null){h.child=ke;break}var Be=ke.sibling;ke.sibling=ae,ae=ke,ke=Be}VW(h,!0,ae,null,D);break}case"together":{VW(h,!1,null,null,void 0);break}default:h.memoizedState=null}return h.child}function K1e(d,h,m){OB(h,h.stateNode.containerInfo);var C=h.pendingProps;return d===null?h.child=Iy(h,null,C,m):Fa(d,h,C,m),h.child}var ZJ=!1;function G1e(d,h,m){var C=h.type,w=C._context,D=h.pendingProps,I=h.memoizedProps,R=D.value;{"value"in D||ZJ||(ZJ=!0,r("The `value` prop is required for the `<Context.Provider>`. Did you misspell it or forget to pass it?"));var O=h.type.propTypes;O&&Cd(O,D,"prop","Context.Provider")}if(zQ(h,w,R),I!==null){var U=I.value;if(sc(U,R)){if(I.children===D.children&&!FT())return pf(d,h,m)}else $we(h,w,m)}var q=D.children;return Fa(d,h,q,m),h.child}var XJ=!1;function Y1e(d,h,m){var C=h.type;C._context===void 0?C!==C.Consumer&&(XJ||(XJ=!0,r("Rendering <Context> directly is not supported and will be removed in a future major release. Did you mean to render <Context.Consumer> instead?"))):C=C._context;var w=h.pendingProps,D=w.children;typeof D!="function"&&r("A context consumer was rendered with multiple children, or a child that isn't a function. A context consumer expects a single child that is a function. If you did pass a function, make sure there is no trailing or leading whitespace around it."),Ny(h,m);var I=xo(C);B0(h);var R;return BL.current=h,Jl(!0),R=D(I),Jl(!1),dy(),h.flags|=ay,Fa(d,h,R,m),h.child}function VL(){kd=!0}function IN(d,h){(h.mode&qi)===Xt&&d!==null&&(d.alternate=null,h.alternate=null,h.flags|=Lo)}function pf(d,h,m){return d!==null&&(h.dependencies=d.dependencies),kJ(),JL(h.lanes),tc(m,h.childLanes)?(zwe(d,h),h.child):null}function Z1e(d,h,m){{var C=h.return;if(C===null)throw new Error("Cannot swap the root fiber.");if(d.alternate=null,h.alternate=null,m.index=h.index,m.sibling=h.sibling,m.return=h.return,m.ref=h.ref,h===C.child)C.child=m;else{var w=C.child;if(w===null)throw new Error("Expected parent to have a child.");for(;w.sibling!==h;)if(w=w.sibling,w===null)throw new Error("Expected to find the previous sibling.");w.sibling=m}var D=C.deletions;return D===null?(C.deletions=[d],C.flags|=p_):D.push(d),m.flags|=Lo,m}}function zW(d,h){var m=d.lanes;return!!tc(m,h)}function X1e(d,h,m){switch(h.tag){case f:UJ(h),h.stateNode,Ey();break;case p:ZQ(h);break;case c:{var C=h.type;Au(C)&&WT(h);break}case g:OB(h,h.stateNode.containerInfo);break;case L:{var w=h.memoizedProps.value,D=h.type._context;zQ(h,D,w);break}case k:{var I=tc(m,h.childLanes);I&&(h.flags|=Ji);{var R=h.stateNode;R.effectDuration=0,R.passiveEffectDuration=0}}break;case E:{var O=h.memoizedState;if(O!==null){if(O.dehydrated!==null)return dp(h,My(Sd.current)),h.flags|=xn,null;var U=h.child,q=U.childLanes;if(tc(m,q))return jJ(d,h,m);dp(h,My(Sd.current));var ce=pf(d,h,m);return ce!==null?ce.sibling:null}else dp(h,My(Sd.current));break}case Q:{var ae=(d.flags&xn)!==ni,ke=tc(m,h.childLanes);if(ae){if(ke)return YJ(d,h,m);h.flags|=xn}var Te=h.memoizedState;if(Te!==null&&(Te.rendering=null,Te.tail=null,Te.lastEffect=null),dp(h,Sd.current),ke)break;return null}case J:case Z:return h.lanes=Ge,HJ(d,h,m)}return pf(d,h,m)}function QJ(d,h,m){if(h._debugNeedsRemount&&d!==null)return Z1e(d,h,vH(h.type,h.key,h.pendingProps,h._debugOwner||null,h.mode,h.lanes));if(d!==null){var C=d.memoizedProps,w=h.pendingProps;if(C!==w||FT()||h.type!==d.type)kd=!0;else{var D=zW(d,m);if(!D&&(h.flags&xn)===ni)return kd=!1,X1e(d,h,m);(d.flags&G5)!==ni?kd=!0:kd=!1}}else if(kd=!1,Er()&&wwe(h)){var I=h.index,R=Swe();kQ(h,R,I)}switch(h.lanes=Ge,h.tag){case u:return R1e(d,h,h.type,m);case P:{var O=h.elementType;return T1e(d,h,O,m)}case l:{var U=h.type,q=h.pendingProps,ce=h.elementType===U?q:xd(U,q);return AW(d,h,U,ce,m)}case c:{var ae=h.type,ke=h.pendingProps,Te=h.elementType===ae?ke:xd(ae,ke);return zJ(d,h,ae,Te,m)}case f:return D1e(d,h,m);case p:return E1e(d,h,m);case _:return I1e(d,h);case E:return jJ(d,h,m);case g:return K1e(d,h,m);case x:{var Be=h.type,_t=h.pendingProps,Yt=h.elementType===Be?_t:xd(Be,_t);return FJ(d,h,Be,Yt,m)}case b:return L1e(d,h,m);case y:return x1e(d,h,m);case k:return k1e(d,h,m);case L:return G1e(d,h,m);case S:return Y1e(d,h,m);case N:{var Ft=h.type,Gi=h.pendingProps,Hi=xd(Ft,Gi);if(h.type!==h.elementType){var _e=Ft.propTypes;_e&&Cd(_e,Hi,"prop",on(Ft))}return Hi=xd(Ft.type,Hi),BJ(d,h,Ft,Hi,m)}case A:return WJ(d,h,h.type,h.pendingProps,m);case H:{var We=h.type,ve=h.pendingProps,Je=h.elementType===We?ve:xd(We,ve);return N1e(d,h,We,Je,m)}case Q:return YJ(d,h,m);case te:break;case J:return HJ(d,h,m)}throw new Error("Unknown unit of work tag ("+h.tag+"). This error is likely caused by a bug in React. Please file an issue.")}function Wy(d){d.flags|=Ji}function JJ(d){d.flags|=Zg,d.flags|=Y5}var eee,UW,tee,iee;eee=function(d,h,m,C){for(var w=h.child;w!==null;){if(w.tag===p||w.tag===_)bye(d,w.stateNode);else if(w.tag!==g){if(w.child!==null){w.child.return=w,w=w.child;continue}}if(w===h)return;for(;w.sibling===null;){if(w.return===null||w.return===h)return;w=w.return}w.sibling.return=w.return,w=w.sibling}},UW=function(d,h){},tee=function(d,h,m,C,w){var D=d.memoizedProps;if(D!==C){var I=h.stateNode,R=FB(),O=yye(I,m,D,C,w,R);h.updateQueue=O,O&&Wy(h)}},iee=function(d,h,m,C){m!==C&&Wy(h)};function zL(d,h){if(!Er())switch(d.tailMode){case"hidden":{for(var m=d.tail,C=null;m!==null;)m.alternate!==null&&(C=m),m=m.sibling;C===null?d.tail=null:C.sibling=null;break}case"collapsed":{for(var w=d.tail,D=null;w!==null;)w.alternate!==null&&(D=w),w=w.sibling;D===null?!h&&d.tail!==null?d.tail.sibling=null:d.tail=null:D.sibling=null;break}}}function Tr(d){var h=d.alternate!==null&&d.alternate.child===d.child,m=Ge,C=ni;if(h){if((d.mode&zn)!==Xt){for(var O=d.selfBaseDuration,U=d.child;U!==null;)m=Ai(m,Ai(U.lanes,U.childLanes)),C|=U.subtreeFlags&of,C|=U.flags&of,O+=U.treeBaseDuration,U=U.sibling;d.treeBaseDuration=O}else for(var q=d.child;q!==null;)m=Ai(m,Ai(q.lanes,q.childLanes)),C|=q.subtreeFlags&of,C|=q.flags&of,q.return=d,q=q.sibling;d.subtreeFlags|=C}else{if((d.mode&zn)!==Xt){for(var w=d.actualDuration,D=d.selfBaseDuration,I=d.child;I!==null;)m=Ai(m,Ai(I.lanes,I.childLanes)),C|=I.subtreeFlags,C|=I.flags,w+=I.actualDuration,D+=I.treeBaseDuration,I=I.sibling;d.actualDuration=w,d.treeBaseDuration=D}else for(var R=d.child;R!==null;)m=Ai(m,Ai(R.lanes,R.childLanes)),C|=R.subtreeFlags,C|=R.flags,R.return=d,R=R.sibling;d.subtreeFlags|=C}return d.childLanes=m,h}function Q1e(d,h,m){if(Owe()&&(h.mode&qi)!==Xt&&(h.flags&xn)===ni)return MQ(h),Ey(),h.flags|=tf|O0|Oa,!1;var C=$T(h);if(m!==null&&m.dehydrated!==null)if(d===null){if(!C)throw new Error("A dehydrated suspense component was completed without a hydrated node. This is probably a bug in React.");if(Awe(h),Tr(h),(h.mode&zn)!==Xt){var w=m!==null;if(w){var D=h.child;D!==null&&(h.treeBaseDuration-=D.treeBaseDuration)}}return!1}else{if(Ey(),(h.flags&xn)===ni&&(h.memoizedState=null),h.flags|=Ji,Tr(h),(h.mode&zn)!==Xt){var I=m!==null;if(I){var R=h.child;R!==null&&(h.treeBaseDuration-=R.treeBaseDuration)}}return!1}else return AQ(),!0}function nee(d,h,m){var C=h.pendingProps;switch(pB(h),h.tag){case u:case P:case A:case l:case x:case b:case y:case k:case S:case N:return Tr(h),null;case c:{var w=h.type;return Au(w)&&BT(h),Tr(h),null}case f:{var D=h.stateNode;if(Ry(h),uB(h),zB(),D.pendingContext&&(D.context=D.pendingContext,D.pendingContext=null),d===null||d.child===null){var I=$T(h);if(I)Wy(h);else if(d!==null){var R=d.memoizedState;(!R.isDehydrated||(h.flags&tf)!==ni)&&(h.flags|=m_,AQ())}}return UW(d,h),Tr(h),null}case p:{BB(h);var O=YQ(),U=h.type;if(d!==null&&h.stateNode!=null)tee(d,h,U,C,O),d.ref!==h.ref&&JJ(h);else{if(!C){if(h.stateNode===null)throw new Error("We must have new props for new mounts. This error is likely caused by a bug in React. Please file an issue.");return Tr(h),null}var q=FB(),ce=$T(h);if(ce)Rwe(h,O,q)&&Wy(h);else{var ae=vye(U,C,O,q,h);eee(ae,h,!1,!1),h.stateNode=ae,Cye(ae,U,C,O)&&Wy(h)}h.ref!==null&&JJ(h)}return Tr(h),null}case _:{var ke=C;if(d&&h.stateNode!=null){var Te=d.memoizedProps;iee(d,h,Te,ke)}else{if(typeof ke!="string"&&h.stateNode===null)throw new Error("We must have new props for new mounts. This error is likely caused by a bug in React. Please file an issue.");var Be=YQ(),_t=FB(),Yt=$T(h);Yt?Mwe(h)&&Wy(h):h.stateNode=wye(ke,Be,_t,h)}return Tr(h),null}case E:{Ay(h);var Ft=h.memoizedState;if(d===null||d.memoizedState!==null&&d.memoizedState.dehydrated!==null){var Gi=Q1e(d,h,Ft);if(!Gi)return h.flags&Oa?h:null}if((h.flags&xn)!==ni)return h.lanes=m,(h.mode&zn)!==Xt&&fW(h),h;var Hi=Ft!==null,_e=d!==null&&d.memoizedState!==null;if(Hi!==_e&&Hi){var We=h.child;if(We.flags|=__,(h.mode&qi)!==Xt){var ve=d===null&&(h.memoizedProps.unstable_avoidThisFallback!==!0||!Ye);ve||WB(Sd.current,QQ)?JSe():aH()}}var Je=h.updateQueue;if(Je!==null&&(h.flags|=Ji),Tr(h),(h.mode&zn)!==Xt&&Hi){var St=h.child;St!==null&&(h.treeBaseDuration-=St.treeBaseDuration)}return null}case g:return Ry(h),UW(d,h),d===null&&pwe(h.stateNode.containerInfo),Tr(h),null;case L:var vt=h.type._context;return IB(vt,h),Tr(h),null;case H:{var ai=h.type;return Au(ai)&&BT(h),Tr(h),null}case Q:{Ay(h);var yi=h.memoizedState;if(yi===null)return Tr(h),null;var $n=(h.flags&xn)!==ni,fn=yi.rendering;if(fn===null)if($n)zL(yi,!1);else{var fo=t0e()&&(d===null||(d.flags&xn)===ni);if(!fo)for(var gn=h.child;gn!==null;){var io=rN(gn);if(io!==null){$n=!0,h.flags|=xn,zL(yi,!1);var pa=io.updateQueue;return pa!==null&&(h.updateQueue=pa,h.flags|=Ji),h.subtreeFlags=ni,Uwe(h,m),dp(h,HB(Sd.current,IL)),h.child}gn=gn.sibling}yi.tail!==null&&lr()>Lee()&&(h.flags|=xn,$n=!0,zL(yi,!1),h.lanes=iX)}else{if(!$n){var Pr=rN(fn);if(Pr!==null){h.flags|=xn,$n=!0;var ac=Pr.updateQueue;if(ac!==null&&(h.updateQueue=ac,h.flags|=Ji),zL(yi,!0),yi.tail===null&&yi.tailMode==="hidden"&&!fn.alternate&&!Er())return Tr(h),null}else lr()*2-yi.renderingStartTime>Lee()&&m!==ec&&(h.flags|=xn,$n=!0,zL(yi,!1),h.lanes=iX)}if(yi.isBackwards)fn.sibling=h.child,h.child=fn;else{var Ha=yi.last;Ha!==null?Ha.sibling=fn:h.child=fn,yi.last=fn}}if(yi.tail!==null){var Va=yi.tail;yi.rendering=Va,yi.tail=Va.sibling,yi.renderingStartTime=lr(),Va.sibling=null;var ma=Sd.current;return $n?ma=HB(ma,IL):ma=My(ma),dp(h,ma),Va}return Tr(h),null}case te:break;case J:case Z:{rH(h);var Cf=h.memoizedState,Ky=Cf!==null;if(d!==null){var sx=d.memoizedState,zu=sx!==null;zu!==Ky&&!Fe&&(h.flags|=__)}return!Ky||(h.mode&qi)===Xt?Tr(h):tc(Vu,ec)&&(Tr(h),h.subtreeFlags&(Lo|Ji)&&(h.flags|=__)),null}case he:return null;case Ce:return null}throw new Error("Unknown unit of work tag ("+h.tag+"). This error is likely caused by a bug in React. Please file an issue.")}function J1e(d,h,m){switch(pB(h),h.tag){case c:{var C=h.type;Au(C)&&BT(h);var w=h.flags;return w&Oa?(h.flags=w&~Oa|xn,(h.mode&zn)!==Xt&&fW(h),h):null}case f:{h.stateNode,Ry(h),uB(h),zB();var D=h.flags;return(D&Oa)!==ni&&(D&xn)===ni?(h.flags=D&~Oa|xn,h):null}case p:return BB(h),null;case E:{Ay(h);var I=h.memoizedState;if(I!==null&&I.dehydrated!==null){if(h.alternate===null)throw new Error("Threw in newly mounted dehydrated component. This is likely a bug in React. Please file an issue.");Ey()}var R=h.flags;return R&Oa?(h.flags=R&~Oa|xn,(h.mode&zn)!==Xt&&fW(h),h):null}case Q:return Ay(h),null;case g:return Ry(h),null;case L:var O=h.type._context;return IB(O,h),null;case J:case Z:return rH(h),null;case he:return null;default:return null}}function see(d,h,m){switch(pB(h),h.tag){case c:{var C=h.type.childContextTypes;C!=null&&BT(h);break}case f:{h.stateNode,Ry(h),uB(h),zB();break}case p:{BB(h);break}case g:Ry(h);break;case E:Ay(h);break;case Q:Ay(h);break;case L:var w=h.type._context;IB(w,h);break;case J:case Z:rH(h);break}}var oee=null;oee=new Set;var TN=!1,Nr=!1,eSe=typeof WeakSet=="function"?WeakSet:Set,Tt=null,Hy=null,Vy=null;function tSe(d){j5(null,function(){throw d}),q5()}var iSe=function(d,h){if(h.props=d.memoizedProps,h.state=d.memoizedState,d.mode&zn)try{Wu(),h.componentWillUnmount()}finally{Bu(d)}else h.componentWillUnmount()};function ree(d,h){try{fp(Vo,d)}catch(m){_s(d,h,m)}}function $W(d,h,m){try{iSe(d,m)}catch(C){_s(d,h,C)}}function nSe(d,h,m){try{m.componentDidMount()}catch(C){_s(d,h,C)}}function aee(d,h){try{cee(d)}catch(m){_s(d,h,m)}}function zy(d,h){var m=d.ref;if(m!==null)if(typeof m=="function"){var C;try{if(Qi&&Xn&&d.mode&zn)try{Wu(),C=m(null)}finally{Bu(d)}else C=m(null)}catch(w){_s(d,h,w)}typeof C=="function"&&r("Unexpected return value from a callback ref in %s. A callback ref should not return a function.",Ei(d))}else m.current=null}function NN(d,h,m){try{m()}catch(C){_s(d,h,C)}}var lee=!1;function sSe(d,h){mye(d.containerInfo),Tt=h,oSe();var m=lee;return lee=!1,m}function oSe(){for(;Tt!==null;){var d=Tt,h=d.child;(d.subtreeFlags&X5)!==ni&&h!==null?(h.return=d,Tt=h):rSe()}}function rSe(){for(;Tt!==null;){var d=Tt;zs(d);try{aSe(d)}catch(m){_s(d,d.return,m)}ar();var h=d.sibling;if(h!==null){h.return=d.return,Tt=h;return}Tt=d.return}}function aSe(d){var h=d.alternate,m=d.flags;if((m&m_)!==ni){switch(zs(d),d.tag){case l:case x:case A:break;case c:{if(h!==null){var C=h.memoizedProps,w=h.memoizedState,D=d.stateNode;d.type===d.elementType&&!F_&&(D.props!==d.memoizedProps&&r("Expected %s props to match memoized props before getSnapshotBeforeUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",Ei(d)||"instance"),D.state!==d.memoizedState&&r("Expected %s state to match memoized state before getSnapshotBeforeUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",Ei(d)||"instance"));var I=D.getSnapshotBeforeUpdate(d.elementType===d.type?C:xd(d.type,C),w);{var R=oee;I===void 0&&!R.has(d.type)&&(R.add(d.type),r("%s.getSnapshotBeforeUpdate(): A snapshot value (or null) must be returned. You have returned undefined.",Ei(d)))}D.__reactInternalSnapshotBeforeUpdate=I}break}case f:{{var O=d.stateNode;Vye(O.containerInfo)}break}case p:case _:case g:case H:break;default:throw new Error("This unit of work tag should not have side-effects. This error is likely caused by a bug in React. Please file an issue.")}ar()}}function Dd(d,h,m){var C=h.updateQueue,w=C!==null?C.lastEffect:null;if(w!==null){var D=w.next,I=D;do{if((I.tag&d)===d){var R=I.destroy;I.destroy=void 0,R!==void 0&&((d&Ir)!==_l?wve(h):(d&Vo)!==_l&&XZ(h),(d&Pu)!==_l&&tx(!0),NN(h,m,R),(d&Pu)!==_l&&tx(!1),(d&Ir)!==_l?Sve():(d&Vo)!==_l&&QZ())}I=I.next}while(I!==D)}}function fp(d,h){var m=h.updateQueue,C=m!==null?m.lastEffect:null;if(C!==null){var w=C.next,D=w;do{if((D.tag&d)===d){(d&Ir)!==_l?Cve(h):(d&Vo)!==_l&&Lve(h);var I=D.create;(d&Pu)!==_l&&tx(!0),D.destroy=I(),(d&Pu)!==_l&&tx(!1),(d&Ir)!==_l?yve():(d&Vo)!==_l&&xve();{var R=D.destroy;if(R!==void 0&&typeof R!="function"){var O=void 0;(D.tag&Vo)!==ni?O="useLayoutEffect":(D.tag&Pu)!==ni?O="useInsertionEffect":O="useEffect";var U=void 0;R===null?U=" You returned null. If your effect does not require clean up, return undefined (or nothing).":typeof R.then=="function"?U=`

It looks like you wrote `+O+`(async () => ...) or returned a Promise. Instead, write the async function inside your effect and call it immediately:

`+O+`(() => {
  async function fetchData() {
    // You can await here
    const response = await MyAPI.getData(someId);
    // ...
  }
  fetchData();
}, [someId]); // Or [] if effect doesn't need props or state

Learn more about data fetching with Hooks: https://reactjs.org/link/hooks-data-fetching`:U=" You returned: "+R,r("%s must not return anything besides a function, which is used for clean-up.%s",O,U)}}}D=D.next}while(D!==w)}}function lSe(d,h){if((h.flags&Ji)!==ni)switch(h.tag){case k:{var m=h.stateNode.passiveEffectDuration,C=h.memoizedProps,w=C.id,D=C.onPostCommit,I=LJ(),R=h.alternate===null?"mount":"update";SJ()&&(R="nested-update"),typeof D=="function"&&D(w,R,m,I);var O=h.return;e:for(;O!==null;){switch(O.tag){case f:var U=O.stateNode;U.passiveEffectDuration+=m;break e;case k:var q=O.stateNode;q.passiveEffectDuration+=m;break e}O=O.return}break}}}function cSe(d,h,m,C){if((m.flags&F0)!==ni)switch(m.tag){case l:case x:case A:{if(!Nr)if(m.mode&zn)try{Wu(),fp(Vo|Ho,m)}finally{Bu(m)}else fp(Vo|Ho,m);break}case c:{var w=m.stateNode;if(m.flags&Ji&&!Nr)if(h===null)if(m.type===m.elementType&&!F_&&(w.props!==m.memoizedProps&&r("Expected %s props to match memoized props before componentDidMount. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",Ei(m)||"instance"),w.state!==m.memoizedState&&r("Expected %s state to match memoized state before componentDidMount. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",Ei(m)||"instance")),m.mode&zn)try{Wu(),w.componentDidMount()}finally{Bu(m)}else w.componentDidMount();else{var D=m.elementType===m.type?h.memoizedProps:xd(m.type,h.memoizedProps),I=h.memoizedState;if(m.type===m.elementType&&!F_&&(w.props!==m.memoizedProps&&r("Expected %s props to match memoized props before componentDidUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",Ei(m)||"instance"),w.state!==m.memoizedState&&r("Expected %s state to match memoized state before componentDidUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",Ei(m)||"instance")),m.mode&zn)try{Wu(),w.componentDidUpdate(D,I,w.__reactInternalSnapshotBeforeUpdate)}finally{Bu(m)}else w.componentDidUpdate(D,I,w.__reactInternalSnapshotBeforeUpdate)}var R=m.updateQueue;R!==null&&(m.type===m.elementType&&!F_&&(w.props!==m.memoizedProps&&r("Expected %s props to match memoized props before processing the update queue. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",Ei(m)||"instance"),w.state!==m.memoizedState&&r("Expected %s state to match memoized state before processing the update queue. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",Ei(m)||"instance")),GQ(m,R,w));break}case f:{var O=m.updateQueue;if(O!==null){var U=null;if(m.child!==null)switch(m.child.tag){case p:U=m.child.stateNode;break;case c:U=m.child.stateNode;break}GQ(m,O,U)}break}case p:{var q=m.stateNode;if(h===null&&m.flags&Ji){var ce=m.type,ae=m.memoizedProps;Dye(q,ce,ae)}break}case _:break;case g:break;case k:{{var ke=m.memoizedProps,Te=ke.onCommit,Be=ke.onRender,_t=m.stateNode.effectDuration,Yt=LJ(),Ft=h===null?"mount":"update";SJ()&&(Ft="nested-update"),typeof Be=="function"&&Be(m.memoizedProps.id,Ft,m.actualDuration,m.treeBaseDuration,m.actualStartTime,Yt);{typeof Te=="function"&&Te(m.memoizedProps.id,Ft,_t,Yt),r0e(m);var Gi=m.return;e:for(;Gi!==null;){switch(Gi.tag){case f:var Hi=Gi.stateNode;Hi.effectDuration+=_t;break e;case k:var _e=Gi.stateNode;_e.effectDuration+=_t;break e}Gi=Gi.return}}}break}case E:{_Se(d,m);break}case Q:case H:case te:case J:case Z:case Ce:break;default:throw new Error("This unit of work tag should not have side-effects. This error is likely caused by a bug in React. Please file an issue.")}Nr||m.flags&Zg&&cee(m)}function dSe(d){switch(d.tag){case l:case x:case A:{if(d.mode&zn)try{Wu(),ree(d,d.return)}finally{Bu(d)}else ree(d,d.return);break}case c:{var h=d.stateNode;typeof h.componentDidMount=="function"&&nSe(d,d.return,h),aee(d,d.return);break}case p:{aee(d,d.return);break}}}function uSe(d,h){for(var m=null,C=d;;){if(C.tag===p){if(m===null){m=C;try{var w=C.stateNode;h?Fye(w):Wye(C.stateNode,C.memoizedProps)}catch(I){_s(d,d.return,I)}}}else if(C.tag===_){if(m===null)try{var D=C.stateNode;h?Bye(D):Hye(D,C.memoizedProps)}catch(I){_s(d,d.return,I)}}else if(!((C.tag===J||C.tag===Z)&&C.memoizedState!==null&&C!==d)){if(C.child!==null){C.child.return=C,C=C.child;continue}}if(C===d)return;for(;C.sibling===null;){if(C.return===null||C.return===d)return;m===C&&(m=null),C=C.return}m===C&&(m=null),C.sibling.return=C.return,C=C.sibling}}function cee(d){var h=d.ref;if(h!==null){var m=d.stateNode,C;switch(d.tag){case p:C=m;break;default:C=m}if(typeof h=="function"){var w;if(d.mode&zn)try{Wu(),w=h(C)}finally{Bu(d)}else w=h(C);typeof w=="function"&&r("Unexpected return value from a callback ref in %s. A callback ref should not return a function.",Ei(d))}else h.hasOwnProperty("current")||r("Unexpected ref object provided for %s. Use either a ref-setter function or React.createRef().",Ei(d)),h.current=C}}function hSe(d){var h=d.alternate;h!==null&&(h.return=null),d.return=null}function dee(d){var h=d.alternate;h!==null&&(d.alternate=null,dee(h));{if(d.child=null,d.deletions=null,d.sibling=null,d.tag===p){var m=d.stateNode;m!==null&&vwe(m)}d.stateNode=null,d._debugOwner=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}}function fSe(d){for(var h=d.return;h!==null;){if(uee(h))return h;h=h.return}throw new Error("Expected to find a host parent. This error is likely caused by a bug in React. Please file an issue.")}function uee(d){return d.tag===p||d.tag===f||d.tag===g}function hee(d){var h=d;e:for(;;){for(;h.sibling===null;){if(h.return===null||uee(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==p&&h.tag!==_&&h.tag!==ee;){if(h.flags&Lo||h.child===null||h.tag===g)continue e;h.child.return=h,h=h.child}if(!(h.flags&Lo))return h.stateNode}}function gSe(d){var h=fSe(d);switch(h.tag){case p:{var m=h.stateNode;h.flags&P0&&(gQ(m),h.flags&=~P0);var C=hee(d);qW(d,C,m);break}case f:case g:{var w=h.stateNode.containerInfo,D=hee(d);jW(d,D,w);break}default:throw new Error("Invalid host parent fiber. This error is likely caused by a bug in React. Please file an issue.")}}function jW(d,h,m){var C=d.tag,w=C===p||C===_;if(w){var D=d.stateNode;h?Mye(m,D,h):Nye(m,D)}else if(C!==g){var I=d.child;if(I!==null){jW(I,h,m);for(var R=I.sibling;R!==null;)jW(R,h,m),R=R.sibling}}}function qW(d,h,m){var C=d.tag,w=C===p||C===_;if(w){var D=d.stateNode;h?Rye(m,D,h):Tye(m,D)}else if(C!==g){var I=d.child;if(I!==null){qW(I,h,m);for(var R=I.sibling;R!==null;)qW(R,h,m),R=R.sibling}}}var Rr=null,Ed=!1;function pSe(d,h,m){{var C=h;e:for(;C!==null;){switch(C.tag){case p:{Rr=C.stateNode,Ed=!1;break e}case f:{Rr=C.stateNode.containerInfo,Ed=!0;break e}case g:{Rr=C.stateNode.containerInfo,Ed=!0;break e}}C=C.return}if(Rr===null)throw new Error("Expected to find a host parent. This error is likely caused by a bug in React. Please file an issue.");fee(d,h,m),Rr=null,Ed=!1}hSe(m)}function gp(d,h,m){for(var C=m.child;C!==null;)fee(d,h,C),C=C.sibling}function fee(d,h,m){switch(mve(m),m.tag){case p:Nr||zy(m,h);case _:{{var C=Rr,w=Ed;Rr=null,gp(d,h,m),Rr=C,Ed=w,Rr!==null&&(Ed?Pye(Rr,m.stateNode):Aye(Rr,m.stateNode))}return}case ee:{Rr!==null&&(Ed?Oye(Rr,m.stateNode):nB(Rr,m.stateNode));return}case g:{{var D=Rr,I=Ed;Rr=m.stateNode.containerInfo,Ed=!0,gp(d,h,m),Rr=D,Ed=I}return}case l:case x:case N:case A:{if(!Nr){var R=m.updateQueue;if(R!==null){var O=R.lastEffect;if(O!==null){var U=O.next,q=U;do{var ce=q,ae=ce.destroy,ke=ce.tag;ae!==void 0&&((ke&Pu)!==_l?NN(m,h,ae):(ke&Vo)!==_l&&(XZ(m),m.mode&zn?(Wu(),NN(m,h,ae),Bu(m)):NN(m,h,ae),QZ())),q=q.next}while(q!==U)}}}gp(d,h,m);return}case c:{if(!Nr){zy(m,h);var Te=m.stateNode;typeof Te.componentWillUnmount=="function"&&$W(m,h,Te)}gp(d,h,m);return}case te:{gp(d,h,m);return}case J:{if(m.mode&qi){var Be=Nr;Nr=Be||m.memoizedState!==null,gp(d,h,m),Nr=Be}else gp(d,h,m);break}default:{gp(d,h,m);return}}}function mSe(d){d.memoizedState}function _Se(d,h){var m=h.memoizedState;if(m===null){var C=h.alternate;if(C!==null){var w=C.memoizedState;if(w!==null){var D=w.dehydrated;D!==null&&twe(D)}}}}function gee(d){var h=d.updateQueue;if(h!==null){d.updateQueue=null;var m=d.stateNode;m===null&&(m=d.stateNode=new eSe),h.forEach(function(C){var w=f0e.bind(null,d,C);if(!m.has(C)){if(m.add(C),vd)if(Hy!==null&&Vy!==null)ex(Vy,Hy);else throw Error("Expected finished root and lanes to be set. This is a bug in React.");C.then(w,w)}})}}function vSe(d,h,m){Hy=m,Vy=d,zs(h),pee(h,d),zs(h),Hy=null,Vy=null}function Id(d,h,m){var C=h.deletions;if(C!==null)for(var w=0;w<C.length;w++){var D=C[w];try{pSe(d,h,D)}catch(O){_s(D,h,O)}}var I=VI();if(h.subtreeFlags&Q5)for(var R=h.child;R!==null;)zs(R),pee(R,d),R=R.sibling;zs(I)}function pee(d,h,m){var C=d.alternate,w=d.flags;switch(d.tag){case l:case x:case N:case A:{if(Id(h,d),Hu(d),w&Ji){try{Dd(Pu|Ho,d,d.return),fp(Pu|Ho,d)}catch(ai){_s(d,d.return,ai)}if(d.mode&zn){try{Wu(),Dd(Vo|Ho,d,d.return)}catch(ai){_s(d,d.return,ai)}Bu(d)}else try{Dd(Vo|Ho,d,d.return)}catch(ai){_s(d,d.return,ai)}}return}case c:{Id(h,d),Hu(d),w&Zg&&C!==null&&zy(C,C.return);return}case p:{Id(h,d),Hu(d),w&Zg&&C!==null&&zy(C,C.return);{if(d.flags&P0){var D=d.stateNode;try{gQ(D)}catch(ai){_s(d,d.return,ai)}}if(w&Ji){var I=d.stateNode;if(I!=null){var R=d.memoizedProps,O=C!==null?C.memoizedProps:R,U=d.type,q=d.updateQueue;if(d.updateQueue=null,q!==null)try{Eye(I,q,U,O,R,d)}catch(ai){_s(d,d.return,ai)}}}}return}case _:{if(Id(h,d),Hu(d),w&Ji){if(d.stateNode===null)throw new Error("This should have a text node initialized. This error is likely caused by a bug in React. Please file an issue.");var ce=d.stateNode,ae=d.memoizedProps,ke=C!==null?C.memoizedProps:ae;try{Iye(ce,ke,ae)}catch(ai){_s(d,d.return,ai)}}return}case f:{if(Id(h,d),Hu(d),w&Ji&&C!==null){var Te=C.memoizedState;if(Te.isDehydrated)try{ewe(h.containerInfo)}catch(ai){_s(d,d.return,ai)}}return}case g:{Id(h,d),Hu(d);return}case E:{Id(h,d),Hu(d);var Be=d.child;if(Be.flags&__){var _t=Be.stateNode,Yt=Be.memoizedState,Ft=Yt!==null;if(_t.isHidden=Ft,Ft){var Gi=Be.alternate!==null&&Be.alternate.memoizedState!==null;Gi||QSe()}}if(w&Ji){try{mSe(d)}catch(ai){_s(d,d.return,ai)}gee(d)}return}case J:{var Hi=C!==null&&C.memoizedState!==null;if(d.mode&qi){var _e=Nr;Nr=_e||Hi,Id(h,d),Nr=_e}else Id(h,d);if(Hu(d),w&__){var We=d.stateNode,ve=d.memoizedState,Je=ve!==null,St=d;if(We.isHidden=Je,Je&&!Hi&&(St.mode&qi)!==Xt){Tt=St;for(var vt=St.child;vt!==null;)Tt=vt,CSe(vt),vt=vt.sibling}uSe(St,Je)}return}case Q:{Id(h,d),Hu(d),w&Ji&&gee(d);return}case te:return;default:{Id(h,d),Hu(d);return}}}function Hu(d){var h=d.flags;if(h&Lo){try{gSe(d)}catch(m){_s(d,d.return,m)}d.flags&=~Lo}h&nf&&(d.flags&=~nf)}function bSe(d,h,m){Hy=m,Vy=h,Tt=d,mee(d,h,m),Hy=null,Vy=null}function mee(d,h,m){for(var C=(d.mode&qi)!==Xt;Tt!==null;){var w=Tt,D=w.child;if(w.tag===J&&C){var I=w.memoizedState!==null,R=I||TN;if(R){KW(d,h,m);continue}else{var O=w.alternate,U=O!==null&&O.memoizedState!==null,q=U||Nr,ce=TN,ae=Nr;TN=R,Nr=q,Nr&&!ae&&(Tt=w,ySe(w));for(var ke=D;ke!==null;)Tt=ke,mee(ke,h,m),ke=ke.sibling;Tt=w,TN=ce,Nr=ae,KW(d,h,m);continue}}(w.subtreeFlags&F0)!==ni&&D!==null?(D.return=w,Tt=D):KW(d,h,m)}}function KW(d,h,m){for(;Tt!==null;){var C=Tt;if((C.flags&F0)!==ni){var w=C.alternate;zs(C);try{cSe(h,w,C,m)}catch(I){_s(C,C.return,I)}ar()}if(C===d){Tt=null;return}var D=C.sibling;if(D!==null){D.return=C.return,Tt=D;return}Tt=C.return}}function CSe(d){for(;Tt!==null;){var h=Tt,m=h.child;switch(h.tag){case l:case x:case N:case A:{if(h.mode&zn)try{Wu(),Dd(Vo,h,h.return)}finally{Bu(h)}else Dd(Vo,h,h.return);break}case c:{zy(h,h.return);var C=h.stateNode;typeof C.componentWillUnmount=="function"&&$W(h,h.return,C);break}case p:{zy(h,h.return);break}case J:{var w=h.memoizedState!==null;if(w){_ee(d);continue}break}}m!==null?(m.return=h,Tt=m):_ee(d)}}function _ee(d){for(;Tt!==null;){var h=Tt;if(h===d){Tt=null;return}var m=h.sibling;if(m!==null){m.return=h.return,Tt=m;return}Tt=h.return}}function ySe(d){for(;Tt!==null;){var h=Tt,m=h.child;if(h.tag===J){var C=h.memoizedState!==null;if(C){vee(d);continue}}m!==null?(m.return=h,Tt=m):vee(d)}}function vee(d){for(;Tt!==null;){var h=Tt;zs(h);try{dSe(h)}catch(C){_s(h,h.return,C)}if(ar(),h===d){Tt=null;return}var m=h.sibling;if(m!==null){m.return=h.return,Tt=m;return}Tt=h.return}}function wSe(d,h,m,C){Tt=h,SSe(h,d,m,C)}function SSe(d,h,m,C){for(;Tt!==null;){var w=Tt,D=w.child;(w.subtreeFlags&ly)!==ni&&D!==null?(D.return=w,Tt=D):LSe(d,h,m,C)}}function LSe(d,h,m,C){for(;Tt!==null;){var w=Tt;if((w.flags&_d)!==ni){zs(w);try{xSe(h,w,m,C)}catch(I){_s(w,w.return,I)}ar()}if(w===d){Tt=null;return}var D=w.sibling;if(D!==null){D.return=w.return,Tt=D;return}Tt=w.return}}function xSe(d,h,m,C){switch(h.tag){case l:case x:case A:{if(h.mode&zn){hW();try{fp(Ir|Ho,h)}finally{uW(h)}}else fp(Ir|Ho,h);break}}}function kSe(d){Tt=d,DSe()}function DSe(){for(;Tt!==null;){var d=Tt,h=d.child;if((Tt.flags&p_)!==ni){var m=d.deletions;if(m!==null){for(var C=0;C<m.length;C++){var w=m[C];Tt=w,TSe(w,d)}{var D=d.alternate;if(D!==null){var I=D.child;if(I!==null){D.child=null;do{var R=I.sibling;I.sibling=null,I=R}while(I!==null)}}}Tt=d}}(d.subtreeFlags&ly)!==ni&&h!==null?(h.return=d,Tt=h):ESe()}}function ESe(){for(;Tt!==null;){var d=Tt;(d.flags&_d)!==ni&&(zs(d),ISe(d),ar());var h=d.sibling;if(h!==null){h.return=d.return,Tt=h;return}Tt=d.return}}function ISe(d){switch(d.tag){case l:case x:case A:{d.mode&zn?(hW(),Dd(Ir|Ho,d,d.return),uW(d)):Dd(Ir|Ho,d,d.return);break}}}function TSe(d,h){for(;Tt!==null;){var m=Tt;zs(m),RSe(m,h),ar();var C=m.child;C!==null?(C.return=m,Tt=C):NSe(d)}}function NSe(d){for(;Tt!==null;){var h=Tt,m=h.sibling,C=h.return;if(dee(h),h===d){Tt=null;return}if(m!==null){m.return=C,Tt=m;return}Tt=C}}function RSe(d,h){switch(d.tag){case l:case x:case A:{d.mode&zn?(hW(),Dd(Ir,d,h),uW(d)):Dd(Ir,d,h);break}}}function MSe(d){switch(d.tag){case l:case x:case A:{try{fp(Vo|Ho,d)}catch(m){_s(d,d.return,m)}break}case c:{var h=d.stateNode;try{h.componentDidMount()}catch(m){_s(d,d.return,m)}break}}}function ASe(d){switch(d.tag){case l:case x:case A:{try{fp(Ir|Ho,d)}catch(h){_s(d,d.return,h)}break}}}function PSe(d){switch(d.tag){case l:case x:case A:{try{Dd(Vo|Ho,d,d.return)}catch(m){_s(d,d.return,m)}break}case c:{var h=d.stateNode;typeof h.componentWillUnmount=="function"&&$W(d,d.return,h);break}}}function OSe(d){switch(d.tag){case l:case x:case A:try{Dd(Ir|Ho,d,d.return)}catch(h){_s(d,d.return,h)}}}if(typeof Symbol=="function"&&Symbol.for){var UL=Symbol.for;UL("selector.component"),UL("selector.has_pseudo_class"),UL("selector.role"),UL("selector.test_id"),UL("selector.text")}var FSe=[];function BSe(){FSe.forEach(function(d){return d()})}var WSe=t.ReactCurrentActQueue;function HSe(d){{var h=typeof IS_REACT_ACT_ENVIRONMENT<"u"?IS_REACT_ACT_ENVIRONMENT:void 0,m=typeof jest<"u";return m&&h!==!1}}function bee(){{var d=typeof IS_REACT_ACT_ENVIRONMENT<"u"?IS_REACT_ACT_ENVIRONMENT:void 0;return!d&&WSe.current!==null&&r("The current testing environment is not configured to support act(...)"),d}}var VSe=Math.ceil,GW=t.ReactCurrentDispatcher,YW=t.ReactCurrentOwner,Mr=t.ReactCurrentBatchConfig,Td=t.ReactCurrentActQueue,$o=0,Cee=1,Ar=2,Vc=4,mf=0,$L=1,B_=2,RN=3,jL=4,yee=5,ZW=6,Ki=$o,Ba=null,Us=null,jo=Ge,Vu=Ge,XW=sp(Ge),qo=mf,qL=null,MN=Ge,KL=Ge,AN=Ge,GL=null,vl=null,QW=0,wee=500,See=1/0,zSe=500,_f=null;function YL(){See=lr()+zSe}function Lee(){return See}var PN=!1,JW=null,Uy=null,W_=!1,pp=null,ZL=Ge,eH=[],tH=null,USe=50,XL=0,iH=null,nH=!1,ON=!1,$Se=50,$y=0,FN=null,QL=Ls,BN=Ge,xee=!1;function WN(){return Ba}function Wa(){return(Ki&(Ar|Vc))!==$o?lr():(QL!==Ls||(QL=lr()),QL)}function mp(d){var h=d.mode;if((h&qi)===Xt)return vi;if((Ki&Ar)!==$o&&jo!==Ge)return $0(jo);var m=Wwe()!==Bwe;if(m){if(Mr.transition!==null){var C=Mr.transition;C._updatedFibers||(C._updatedFibers=new Set),C._updatedFibers.add(d)}return BN===dr&&(BN=rX()),BN}var w=bd();if(w!==dr)return w;var D=Sye();return D}function jSe(d){var h=d.mode;return(h&qi)===Xt?vi:Kve()}function Ko(d,h,m,C){p0e(),xee&&r("useInsertionEffect must not schedule updates."),nH&&(ON=!0),j0(d,m,C),(Ki&Ar)!==Ge&&d===Ba?v0e(h):(vd&&cX(d,h,m),b0e(h),d===Ba&&((Ki&Ar)===$o&&(KL=Ai(KL,m)),qo===jL&&_p(d,jo)),bl(d,C),m===vi&&Ki===$o&&(h.mode&qi)===Xt&&!Td.isBatchingLegacy&&(YL(),xQ()))}function qSe(d,h,m){var C=d.current;C.lanes=h,j0(d,h,m),bl(d,m)}function KSe(d){return(Ki&Ar)!==$o}function bl(d,h){var m=d.callbackNode;Vve(d,h);var C=rT(d,d===Ba?jo:Ge);if(C===Ge){m!==null&&Vee(m),d.callbackNode=null,d.callbackPriority=dr;return}var w=S_(C),D=d.callbackPriority;if(D===w&&!(Td.current!==null&&m!==dH)){m==null&&D!==vi&&r("Expected scheduled callback to exist. This error is likely caused by a bug in React. Please file an issue.");return}m!=null&&Vee(m);var I;if(w===vi)d.tag===op?(Td.isBatchingLegacy!==null&&(Td.didScheduleLegacyUpdate=!0),ywe(Eee.bind(null,d))):LQ(Eee.bind(null,d)),Td.current!==null?Td.current.push(rp):xye(function(){(Ki&(Ar|Vc))===$o&&rp()}),I=null;else{var R;switch(hX(C)){case ic:R=iT;break;case af:R=J5;break;case lf:R=C_;break;case cT:R=e3;break;default:R=C_;break}I=uH(R,kee.bind(null,d))}d.callbackPriority=w,d.callbackNode=I}function kee(d,h){if(u1e(),QL=Ls,BN=Ge,(Ki&(Ar|Vc))!==$o)throw new Error("Should not already be working.");var m=d.callbackNode,C=bf();if(C&&d.callbackNode!==m)return null;var w=rT(d,d===Ba?jo:Ge);if(w===Ge)return null;var D=!aT(d,w)&&!qve(d,w)&&!h,I=D?n0e(d,w):VN(d,w);if(I!==mf){if(I===B_){var R=w3(d);R!==Ge&&(w=R,I=sH(d,R))}if(I===$L){var O=qL;throw H_(d,Ge),_p(d,w),bl(d,lr()),O}if(I===ZW)_p(d,w);else{var U=!aT(d,w),q=d.current.alternate;if(U&&!YSe(q)){if(I=VN(d,w),I===B_){var ce=w3(d);ce!==Ge&&(w=ce,I=sH(d,ce))}if(I===$L){var ae=qL;throw H_(d,Ge),_p(d,w),bl(d,lr()),ae}}d.finishedWork=q,d.finishedLanes=w,GSe(d,I,w)}}return bl(d,lr()),d.callbackNode===m?kee.bind(null,d):null}function sH(d,h){var m=GL;if(dT(d)){var C=H_(d,h);C.flags|=tf,gwe(d.containerInfo)}var w=VN(d,h);if(w!==B_){var D=vl;vl=m,D!==null&&Dee(D)}return w}function Dee(d){vl===null?vl=d:vl.push.apply(vl,d)}function GSe(d,h,m){switch(h){case mf:case $L:throw new Error("Root did not complete. This is a bug in React.");case B_:{V_(d,vl,_f);break}case RN:{if(_p(d,m),sX(m)&&!zee()){var C=QW+wee-lr();if(C>10){var w=rT(d,Ge);if(w!==Ge)break;var D=d.suspendedLanes;if(!gy(D,m)){Wa(),lX(d,D);break}d.timeoutHandle=tB(V_.bind(null,d,vl,_f),C);break}}V_(d,vl,_f);break}case jL:{if(_p(d,m),jve(m))break;if(!zee()){var I=Wve(d,m),R=I,O=lr()-R,U=g0e(O)-O;if(U>10){d.timeoutHandle=tB(V_.bind(null,d,vl,_f),U);break}}V_(d,vl,_f);break}case yee:{V_(d,vl,_f);break}default:throw new Error("Unknown root exit status.")}}function YSe(d){for(var h=d;;){if(h.flags&eT){var m=h.updateQueue;if(m!==null){var C=m.stores;if(C!==null)for(var w=0;w<C.length;w++){var D=C[w],I=D.getSnapshot,R=D.value;try{if(!sc(I(),R))return!1}catch{return!1}}}}var O=h.child;if(h.subtreeFlags&eT&&O!==null){O.return=h,h=O;continue}if(h===d)return!0;for(;h.sibling===null;){if(h.return===null||h.return===d)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}return!0}function _p(d,h){h=lT(h,AN),h=lT(h,KL),Yve(d,h)}function Eee(d){if(h1e(),(Ki&(Ar|Vc))!==$o)throw new Error("Should not already be working.");bf();var h=rT(d,Ge);if(!tc(h,vi))return bl(d,lr()),null;var m=VN(d,h);if(d.tag!==op&&m===B_){var C=w3(d);C!==Ge&&(h=C,m=sH(d,C))}if(m===$L){var w=qL;throw H_(d,Ge),_p(d,h),bl(d,lr()),w}if(m===ZW)throw new Error("Root did not complete. This is a bug in React.");var D=d.current.alternate;return d.finishedWork=D,d.finishedLanes=h,V_(d,vl,_f),bl(d,lr()),null}function ZSe(d,h){h!==Ge&&(k3(d,Ai(h,vi)),bl(d,lr()),(Ki&(Ar|Vc))===$o&&(YL(),rp()))}function oH(d,h){var m=Ki;Ki|=Cee;try{return d(h)}finally{Ki=m,Ki===$o&&!Td.isBatchingLegacy&&(YL(),xQ())}}function XSe(d,h,m,C,w){var D=bd(),I=Mr.transition;try{return Mr.transition=null,ur(ic),d(h,m,C,w)}finally{ur(D),Mr.transition=I,Ki===$o&&YL()}}function vf(d){pp!==null&&pp.tag===op&&(Ki&(Ar|Vc))===$o&&bf();var h=Ki;Ki|=Cee;var m=Mr.transition,C=bd();try{return Mr.transition=null,ur(ic),d?d():void 0}finally{ur(C),Mr.transition=m,Ki=h,(Ki&(Ar|Vc))===$o&&rp()}}function Iee(){return(Ki&(Ar|Vc))!==$o}function HN(d,h){fa(XW,Vu,d),Vu=Ai(Vu,h)}function rH(d){Vu=XW.current,ha(XW,d)}function H_(d,h){d.finishedWork=null,d.finishedLanes=Ge;var m=d.timeoutHandle;if(m!==iB&&(d.timeoutHandle=iB,Lye(m)),Us!==null)for(var C=Us.return;C!==null;){var w=C.alternate;see(w,C),C=C.return}Ba=d;var D=z_(d.current,null);return Us=D,jo=Vu=h,qo=mf,qL=null,MN=Ge,KL=Ge,AN=Ge,GL=null,vl=null,qwe(),wd.discardPendingWarnings(),D}function Tee(d,h){do{var m=Us;try{if(ZT(),eJ(),ar(),YW.current=null,m===null||m.return===null){qo=$L,qL=h,Us=null;return}if(Qi&&m.mode&zn&&xN(m,!0),Bi)if(dy(),h!==null&&typeof h=="object"&&typeof h.then=="function"){var C=h;Dve(m,C,jo)}else kve(m,h,jo);y1e(d,m.return,m,h,jo),Aee(m)}catch(w){h=w,Us===m&&m!==null?(m=m.return,Us=m):m=Us;continue}return}while(!0)}function Nee(){var d=GW.current;return GW.current=CN,d===null?CN:d}function Ree(d){GW.current=d}function QSe(){QW=lr()}function JL(d){MN=Ai(d,MN)}function JSe(){qo===mf&&(qo=RN)}function aH(){(qo===mf||qo===RN||qo===B_)&&(qo=jL),Ba!==null&&(S3(MN)||S3(KL))&&_p(Ba,jo)}function e0e(d){qo!==jL&&(qo=B_),GL===null?GL=[d]:GL.push(d)}function t0e(){return qo===mf}function VN(d,h){var m=Ki;Ki|=Ar;var C=Nee();if(Ba!==d||jo!==h){if(vd){var w=d.memoizedUpdaters;w.size>0&&(ex(d,jo),w.clear()),dX(d,h)}_f=uX(),H_(d,h)}JZ(h);do try{i0e();break}catch(D){Tee(d,D)}while(!0);if(ZT(),Ki=m,Ree(C),Us!==null)throw new Error("Cannot commit an incomplete root. This error is likely caused by a bug in React. Please file an issue.");return eX(),Ba=null,jo=Ge,qo}function i0e(){for(;Us!==null;)Mee(Us)}function n0e(d,h){var m=Ki;Ki|=Ar;var C=Nee();if(Ba!==d||jo!==h){if(vd){var w=d.memoizedUpdaters;w.size>0&&(ex(d,jo),w.clear()),dX(d,h)}_f=uX(),YL(),H_(d,h)}JZ(h);do try{s0e();break}catch(D){Tee(d,D)}while(!0);return ZT(),Ree(C),Ki=m,Us!==null?(Rve(),mf):(eX(),Ba=null,jo=Ge,qo)}function s0e(){for(;Us!==null&&!rve();)Mee(Us)}function Mee(d){var h=d.alternate;zs(d);var m;(d.mode&zn)!==Xt?(dW(d),m=lH(h,d,Vu),xN(d,!0)):m=lH(h,d,Vu),ar(),d.memoizedProps=d.pendingProps,m===null?Aee(d):Us=m,YW.current=null}function Aee(d){var h=d;do{var m=h.alternate,C=h.return;if((h.flags&O0)===ni){zs(h);var w=void 0;if((h.mode&zn)===Xt?w=nee(m,h,Vu):(dW(h),w=nee(m,h,Vu),xN(h,!1)),ar(),w!==null){Us=w;return}}else{var D=J1e(m,h);if(D!==null){D.flags&=eve,Us=D;return}if((h.mode&zn)!==Xt){xN(h,!1);for(var I=h.actualDuration,R=h.child;R!==null;)I+=R.actualDuration,R=R.sibling;h.actualDuration=I}if(C!==null)C.flags|=O0,C.subtreeFlags=ni,C.deletions=null;else{qo=ZW,Us=null;return}}var O=h.sibling;if(O!==null){Us=O;return}h=C,Us=h}while(h!==null);qo===mf&&(qo=yee)}function V_(d,h,m){var C=bd(),w=Mr.transition;try{Mr.transition=null,ur(ic),o0e(d,h,m,C)}finally{Mr.transition=w,ur(C)}return null}function o0e(d,h,m,C){do bf();while(pp!==null);if(m0e(),(Ki&(Ar|Vc))!==$o)throw new Error("Should not already be working.");var w=d.finishedWork,D=d.finishedLanes;if(bve(D),w===null)return ZZ(),null;if(D===Ge&&r("root.finishedLanes should not be empty during a commit. This is a bug in React."),d.finishedWork=null,d.finishedLanes=Ge,w===d.current)throw new Error("Cannot commit the same tree as before. This error is likely caused by a bug in React. Please file an issue.");d.callbackNode=null,d.callbackPriority=dr;var I=Ai(w.lanes,w.childLanes);Zve(d,I),d===Ba&&(Ba=null,Us=null,jo=Ge),((w.subtreeFlags&ly)!==ni||(w.flags&ly)!==ni)&&(W_||(W_=!0,tH=m,uH(C_,function(){return bf(),null})));var R=(w.subtreeFlags&(X5|Q5|F0|ly))!==ni,O=(w.flags&(X5|Q5|F0|ly))!==ni;if(R||O){var U=Mr.transition;Mr.transition=null;var q=bd();ur(ic);var ce=Ki;Ki|=Vc,YW.current=null,sSe(d,w),xJ(),vSe(d,w,D),_ye(d.containerInfo),d.current=w,Eve(D),bSe(w,d,D),Ive(),ave(),Ki=ce,ur(q),Mr.transition=U}else d.current=w,xJ();var ae=W_;if(W_?(W_=!1,pp=d,ZL=D):($y=0,FN=null),I=d.pendingLanes,I===Ge&&(Uy=null),ae||Bee(d.current,!1),gve(w.stateNode,C),vd&&d.memoizedUpdaters.clear(),BSe(),bl(d,lr()),h!==null)for(var ke=d.onRecoverableError,Te=0;Te<h.length;Te++){var Be=h[Te],_t=Be.stack,Yt=Be.digest;ke(Be.value,{componentStack:_t,digest:Yt})}if(PN){PN=!1;var Ft=JW;throw JW=null,Ft}return tc(ZL,vi)&&d.tag!==op&&bf(),I=d.pendingLanes,tc(I,vi)?(d1e(),d===iH?XL++:(XL=0,iH=d)):XL=0,rp(),ZZ(),null}function bf(){if(pp!==null){var d=hX(ZL),h=ebe(lf,d),m=Mr.transition,C=bd();try{return Mr.transition=null,ur(h),a0e()}finally{ur(C),Mr.transition=m}}return!1}function r0e(d){eH.push(d),W_||(W_=!0,uH(C_,function(){return bf(),null}))}function a0e(){if(pp===null)return!1;var d=tH;tH=null;var h=pp,m=ZL;if(pp=null,ZL=Ge,(Ki&(Ar|Vc))!==$o)throw new Error("Cannot flush passive effects while already rendering.");nH=!0,ON=!1,Tve(m);var C=Ki;Ki|=Vc,kSe(h.current),wSe(h,h.current,m,d);{var w=eH;eH=[];for(var D=0;D<w.length;D++){var I=w[D];lSe(h,I)}}Nve(),Bee(h.current,!0),Ki=C,rp(),ON?h===FN?$y++:($y=0,FN=h):$y=0,nH=!1,ON=!1,pve(h);{var R=h.current.stateNode;R.effectDuration=0,R.passiveEffectDuration=0}return!0}function Pee(d){return Uy!==null&&Uy.has(d)}function l0e(d){Uy===null?Uy=new Set([d]):Uy.add(d)}function c0e(d){PN||(PN=!0,JW=d)}var d0e=c0e;function Oee(d,h,m){var C=O_(m,h),w=MJ(d,C,vi),D=lp(d,w,vi),I=Wa();D!==null&&(j0(D,vi,I),bl(D,I))}function _s(d,h,m){if(tSe(m),tx(!1),d.tag===f){Oee(d,d,m);return}var C=null;for(C=h;C!==null;){if(C.tag===f){Oee(C,d,m);return}else if(C.tag===c){var w=C.type,D=C.stateNode;if(typeof w.getDerivedStateFromError=="function"||typeof D.componentDidCatch=="function"&&!Pee(D)){var I=O_(m,d),R=EW(C,I,vi),O=lp(C,R,vi),U=Wa();O!==null&&(j0(O,vi,U),bl(O,U));return}}C=C.return}r(`Internal React error: Attempted to capture a commit phase error inside a detached tree. This indicates a bug in React. Likely causes include deleting the same fiber more than once, committing an already-finished tree, or an inconsistent return pointer.

Error message:

%s`,m)}function u0e(d,h,m){var C=d.pingCache;C!==null&&C.delete(h);var w=Wa();lX(d,m),C0e(d),Ba===d&&gy(jo,m)&&(qo===jL||qo===RN&&sX(jo)&&lr()-QW<wee?H_(d,Ge):AN=Ai(AN,m)),bl(d,w)}function Fee(d,h){h===dr&&(h=jSe(d));var m=Wa(),C=ml(d,h);C!==null&&(j0(C,h,m),bl(C,m))}function h0e(d){var h=d.memoizedState,m=dr;h!==null&&(m=h.retryLane),Fee(d,m)}function f0e(d,h){var m=dr,C;switch(d.tag){case E:C=d.stateNode;var w=d.memoizedState;w!==null&&(m=w.retryLane);break;case Q:C=d.stateNode;break;default:throw new Error("Pinged unknown suspense boundary type. This is probably a bug in React.")}C!==null&&C.delete(h),Fee(d,m)}function g0e(d){return d<120?120:d<480?480:d<1080?1080:d<1920?1920:d<3e3?3e3:d<4320?4320:VSe(d/1960)*1960}function p0e(){if(XL>USe)throw XL=0,iH=null,new Error("Maximum update depth exceeded. This can happen when a component repeatedly calls setState inside componentWillUpdate or componentDidUpdate. React limits the number of nested updates to prevent infinite loops.");$y>$Se&&($y=0,FN=null,r("Maximum update depth exceeded. This can happen when a component calls setState inside useEffect, but useEffect either doesn't have a dependency array, or one of the dependencies changes on every render."))}function m0e(){wd.flushLegacyContextWarning(),wd.flushPendingUnsafeLifecycleWarnings()}function Bee(d,h){zs(d),zN(d,sf,PSe),h&&zN(d,tT,OSe),zN(d,sf,MSe),h&&zN(d,tT,ASe),ar()}function zN(d,h,m){for(var C=d,w=null;C!==null;){var D=C.subtreeFlags&h;C!==w&&C.child!==null&&D!==ni?C=C.child:((C.flags&h)!==ni&&m(C),C.sibling!==null?C=C.sibling:C=w=C.return)}}var UN=null;function Wee(d){{if((Ki&Ar)!==$o||!(d.mode&qi))return;var h=d.tag;if(h!==u&&h!==f&&h!==c&&h!==l&&h!==x&&h!==N&&h!==A)return;var m=Ei(d)||"ReactComponent";if(UN!==null){if(UN.has(m))return;UN.add(m)}else UN=new Set([m]);var C=da;try{zs(d),r("Can't perform a React state update on a component that hasn't mounted yet. This indicates that you have a side-effect in your render function that asynchronously later calls tries to update the component. Move this work to useEffect instead.")}finally{C?zs(d):ar()}}}var lH;{var _0e=null;lH=function(d,h,m){var C=Kee(_0e,h);try{return QJ(d,h,m)}catch(D){if(Iwe()||D!==null&&typeof D=="object"&&typeof D.then=="function")throw D;if(ZT(),eJ(),see(d,h),Kee(h,C),h.mode&zn&&dW(h),j5(null,QJ,null,d,h,m),Z_e()){var w=q5();typeof w=="object"&&w!==null&&w._suppressLogging&&typeof D=="object"&&D!==null&&!D._suppressLogging&&(D._suppressLogging=!0)}throw D}}}var Hee=!1,cH;cH=new Set;function v0e(d){if(h_&&!a1e())switch(d.tag){case l:case x:case A:{var h=Us&&Ei(Us)||"Unknown",m=h;if(!cH.has(m)){cH.add(m);var C=Ei(d)||"Unknown";r("Cannot update a component (`%s`) while rendering a different component (`%s`). To locate the bad setState() call inside `%s`, follow the stack trace as described in https://reactjs.org/link/setstate-in-render",C,h,h)}break}case c:{Hee||(r("Cannot update during an existing state transition (such as within `render`). Render methods should be a pure function of props and state."),Hee=!0);break}}}function ex(d,h){if(vd){var m=d.memoizedUpdaters;m.forEach(function(C){cX(d,C,h)})}}var dH={};function uH(d,h){{var m=Td.current;return m!==null?(m.push(h),dH):YZ(d,h)}}function Vee(d){if(d!==dH)return ove(d)}function zee(){return Td.current!==null}function b0e(d){{if(d.mode&qi){if(!bee())return}else if(!HSe()||Ki!==$o||d.tag!==l&&d.tag!==x&&d.tag!==A)return;if(Td.current===null){var h=da;try{zs(d),r(`An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act`,Ei(d))}finally{h?zs(d):ar()}}}}function C0e(d){d.tag!==op&&bee()&&Td.current===null&&r(`A suspended resource finished loading inside a test, but the event was not wrapped in act(...).

When testing, code that resolves suspended data should be wrapped into act(...):

act(() => {
  /* finish loading suspended data */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act`)}function tx(d){xee=d}var zc=null,jy=null,y0e=function(d){zc=d};function qy(d){{if(zc===null)return d;var h=zc(d);return h===void 0?d:h.current}}function hH(d){return qy(d)}function fH(d){{if(zc===null)return d;var h=zc(d);if(h===void 0){if(d!=null&&typeof d.render=="function"){var m=qy(d.render);if(d.render!==m){var C={$$typeof:gt,render:m};return d.displayName!==void 0&&(C.displayName=d.displayName),C}}return d}return h.current}}function Uee(d,h){{if(zc===null)return!1;var m=d.elementType,C=h.type,w=!1,D=typeof C=="object"&&C!==null?C.$$typeof:null;switch(d.tag){case c:{typeof C=="function"&&(w=!0);break}case l:{(typeof C=="function"||D===Me)&&(w=!0);break}case x:{(D===gt||D===Me)&&(w=!0);break}case N:case A:{(D===oe||D===Me)&&(w=!0);break}default:return!1}if(w){var I=zc(m);if(I!==void 0&&I===zc(C))return!0}return!1}}function $ee(d){{if(zc===null||typeof WeakSet!="function")return;jy===null&&(jy=new WeakSet),jy.add(d)}}var w0e=function(d,h){{if(zc===null)return;var m=h.staleFamilies,C=h.updatedFamilies;bf(),vf(function(){gH(d.current,C,m)})}},S0e=function(d,h){{if(d.context!==oc)return;bf(),vf(function(){ix(h,d,null,null)})}};function gH(d,h,m){{var C=d.alternate,w=d.child,D=d.sibling,I=d.tag,R=d.type,O=null;switch(I){case l:case A:case c:O=R;break;case x:O=R.render;break}if(zc===null)throw new Error("Expected resolveFamily to be set during hot reload.");var U=!1,q=!1;if(O!==null){var ce=zc(O);ce!==void 0&&(m.has(ce)?q=!0:h.has(ce)&&(I===c?q=!0:U=!0))}if(jy!==null&&(jy.has(d)||C!==null&&jy.has(C))&&(q=!0),q&&(d._debugNeedsRemount=!0),q||U){var ae=ml(d,vi);ae!==null&&Ko(ae,d,vi,Ls)}w!==null&&!q&&gH(w,h,m),D!==null&&gH(D,h,m)}}var L0e=function(d,h){{var m=new Set,C=new Set(h.map(function(w){return w.current}));return pH(d.current,C,m),m}};function pH(d,h,m){{var C=d.child,w=d.sibling,D=d.tag,I=d.type,R=null;switch(D){case l:case A:case c:R=I;break;case x:R=I.render;break}var O=!1;R!==null&&h.has(R)&&(O=!0),O?x0e(d,m):C!==null&&pH(C,h,m),w!==null&&pH(w,h,m)}}function x0e(d,h){{var m=k0e(d,h);if(m)return;for(var C=d;;){switch(C.tag){case p:h.add(C.stateNode);return;case g:h.add(C.stateNode.containerInfo);return;case f:h.add(C.stateNode.containerInfo);return}if(C.return===null)throw new Error("Expected to reach root first.");C=C.return}}}function k0e(d,h){for(var m=d,C=!1;;){if(m.tag===p)C=!0,h.add(m.stateNode);else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===d)return C;for(;m.sibling===null;){if(m.return===null||m.return===d)return C;m=m.return}m.sibling.return=m.return,m=m.sibling}return!1}var mH;{mH=!1;try{var jee=Object.preventExtensions({})}catch{mH=!0}}function D0e(d,h,m,C){this.tag=d,this.key=m,this.elementType=null,this.type=null,this.stateNode=null,this.return=null,this.child=null,this.sibling=null,this.index=0,this.ref=null,this.pendingProps=h,this.memoizedProps=null,this.updateQueue=null,this.memoizedState=null,this.dependencies=null,this.mode=C,this.flags=ni,this.subtreeFlags=ni,this.deletions=null,this.lanes=Ge,this.childLanes=Ge,this.alternate=null,this.actualDuration=Number.NaN,this.actualStartTime=Number.NaN,this.selfBaseDuration=Number.NaN,this.treeBaseDuration=Number.NaN,this.actualDuration=0,this.actualStartTime=-1,this.selfBaseDuration=0,this.treeBaseDuration=0,this._debugSource=null,this._debugOwner=null,this._debugNeedsRemount=!1,this._debugHookTypes=null,!mH&&typeof Object.preventExtensions=="function"&&Object.preventExtensions(this)}var rc=function(d,h,m,C){return new D0e(d,h,m,C)};function _H(d){var h=d.prototype;return!!(h&&h.isReactComponent)}function E0e(d){return typeof d=="function"&&!_H(d)&&d.defaultProps===void 0}function I0e(d){if(typeof d=="function")return _H(d)?c:l;if(d!=null){var h=d.$$typeof;if(h===gt)return x;if(h===oe)return N}return u}function z_(d,h){var m=d.alternate;m===null?(m=rc(d.tag,h,d.key,d.mode),m.elementType=d.elementType,m.type=d.type,m.stateNode=d.stateNode,m._debugSource=d._debugSource,m._debugOwner=d._debugOwner,m._debugHookTypes=d._debugHookTypes,m.alternate=d,d.alternate=m):(m.pendingProps=h,m.type=d.type,m.flags=ni,m.subtreeFlags=ni,m.deletions=null,m.actualDuration=0,m.actualStartTime=-1),m.flags=d.flags&of,m.childLanes=d.childLanes,m.lanes=d.lanes,m.child=d.child,m.memoizedProps=d.memoizedProps,m.memoizedState=d.memoizedState,m.updateQueue=d.updateQueue;var C=d.dependencies;switch(m.dependencies=C===null?null:{lanes:C.lanes,firstContext:C.firstContext},m.sibling=d.sibling,m.index=d.index,m.ref=d.ref,m.selfBaseDuration=d.selfBaseDuration,m.treeBaseDuration=d.treeBaseDuration,m._debugNeedsRemount=d._debugNeedsRemount,m.tag){case u:case l:case A:m.type=qy(d.type);break;case c:m.type=hH(d.type);break;case x:m.type=fH(d.type);break}return m}function T0e(d,h){d.flags&=of|Lo;var m=d.alternate;if(m===null)d.childLanes=Ge,d.lanes=h,d.child=null,d.subtreeFlags=ni,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null,d.selfBaseDuration=0,d.treeBaseDuration=0;else{d.childLanes=m.childLanes,d.lanes=m.lanes,d.child=m.child,d.subtreeFlags=ni,d.deletions=null,d.memoizedProps=m.memoizedProps,d.memoizedState=m.memoizedState,d.updateQueue=m.updateQueue,d.type=m.type;var C=m.dependencies;d.dependencies=C===null?null:{lanes:C.lanes,firstContext:C.firstContext},d.selfBaseDuration=m.selfBaseDuration,d.treeBaseDuration=m.treeBaseDuration}return d}function N0e(d,h,m){var C;return d===HT?(C=qi,h===!0&&(C|=to,C|=Nu)):C=Xt,vd&&(C|=zn),rc(f,null,null,C)}function vH(d,h,m,C,w,D){var I=u,R=d;if(typeof d=="function")_H(d)?(I=c,R=hH(R)):R=qy(R);else if(typeof d=="string")I=p;else e:switch(d){case j:return vp(m.children,w,D,h);case fe:I=y,w|=to,(w&qi)!==Xt&&(w|=Nu);break;case Oe:return R0e(m,w,D,h);case kt:return M0e(m,w,D,h);case je:return A0e(m,w,D,h);case Sn:return qee(m,w,D,h);case as:case Xe:case Mi:case rr:case mi:default:{if(typeof d=="object"&&d!==null)switch(d.$$typeof){case rt:I=L;break e;case Et:I=S;break e;case gt:I=x,R=fH(R);break e;case oe:I=N;break e;case Me:I=P,R=null;break e}var O="";{(d===void 0||typeof d=="object"&&d!==null&&Object.keys(d).length===0)&&(O+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var U=C?Ei(C):null;U&&(O+=`

Check the render method of \``+U+"`.")}throw new Error("Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) "+("but got: "+(d==null?d:typeof d)+"."+O))}}var q=rc(I,m,h,w);return q.elementType=d,q.type=R,q.lanes=D,q._debugOwner=C,q}function bH(d,h,m){var C=null;C=d._owner;var w=d.type,D=d.key,I=d.props,R=vH(w,D,I,C,h,m);return R._debugSource=d._source,R._debugOwner=d._owner,R}function vp(d,h,m,C){var w=rc(b,d,C,h);return w.lanes=m,w}function R0e(d,h,m,C){typeof d.id!="string"&&r('Profiler must specify an "id" of type `string` as a prop. Received the type `%s` instead.',typeof d.id);var w=rc(k,d,C,h|zn);return w.elementType=Oe,w.lanes=m,w.stateNode={effectDuration:0,passiveEffectDuration:0},w}function M0e(d,h,m,C){var w=rc(E,d,C,h);return w.elementType=kt,w.lanes=m,w}function A0e(d,h,m,C){var w=rc(Q,d,C,h);return w.elementType=je,w.lanes=m,w}function qee(d,h,m,C){var w=rc(J,d,C,h);w.elementType=Sn,w.lanes=m;var D={isHidden:!1};return w.stateNode=D,w}function CH(d,h,m){var C=rc(_,d,null,h);return C.lanes=m,C}function P0e(){var d=rc(p,null,null,Xt);return d.elementType="DELETED",d}function O0e(d){var h=rc(ee,null,null,Xt);return h.stateNode=d,h}function yH(d,h,m){var C=d.children!==null?d.children:[],w=rc(g,C,d.key,h);return w.lanes=m,w.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},w}function Kee(d,h){return d===null&&(d=rc(u,null,null,Xt)),d.tag=h.tag,d.key=h.key,d.elementType=h.elementType,d.type=h.type,d.stateNode=h.stateNode,d.return=h.return,d.child=h.child,d.sibling=h.sibling,d.index=h.index,d.ref=h.ref,d.pendingProps=h.pendingProps,d.memoizedProps=h.memoizedProps,d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.dependencies=h.dependencies,d.mode=h.mode,d.flags=h.flags,d.subtreeFlags=h.subtreeFlags,d.deletions=h.deletions,d.lanes=h.lanes,d.childLanes=h.childLanes,d.alternate=h.alternate,d.actualDuration=h.actualDuration,d.actualStartTime=h.actualStartTime,d.selfBaseDuration=h.selfBaseDuration,d.treeBaseDuration=h.treeBaseDuration,d._debugSource=h._debugSource,d._debugOwner=h._debugOwner,d._debugNeedsRemount=h._debugNeedsRemount,d._debugHookTypes=h._debugHookTypes,d}function F0e(d,h,m,C,w){this.tag=h,this.containerInfo=d,this.pendingChildren=null,this.current=null,this.pingCache=null,this.finishedWork=null,this.timeoutHandle=iB,this.context=null,this.pendingContext=null,this.callbackNode=null,this.callbackPriority=dr,this.eventTimes=x3(Ge),this.expirationTimes=x3(Ls),this.pendingLanes=Ge,this.suspendedLanes=Ge,this.pingedLanes=Ge,this.expiredLanes=Ge,this.mutableReadLanes=Ge,this.finishedLanes=Ge,this.entangledLanes=Ge,this.entanglements=x3(Ge),this.identifierPrefix=C,this.onRecoverableError=w,this.mutableSourceEagerHydrationData=null,this.effectDuration=0,this.passiveEffectDuration=0;{this.memoizedUpdaters=new Set;for(var D=this.pendingUpdatersLaneMap=[],I=0;I<i3;I++)D.push(new Set)}switch(h){case HT:this._debugRootType=m?"hydrateRoot()":"createRoot()";break;case op:this._debugRootType=m?"hydrate()":"render()";break}}function Gee(d,h,m,C,w,D,I,R,O,U){var q=new F0e(d,h,m,R,O),ce=N0e(h,D);q.current=ce,ce.stateNode=q;{var ae={element:C,isDehydrated:m,cache:null,transitions:null,pendingSuspenseBoundaries:null};ce.memoizedState=ae}return AB(ce),q}var wH="18.3.1";function B0e(d,h,m){var C=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;return aa(C),{$$typeof:Ne,key:C==null?null:""+C,children:d,containerInfo:h,implementation:m}}var SH,LH;SH=!1,LH={};function Yee(d){if(!d)return oc;var h=ry(d),m=Cwe(h);if(h.tag===c){var C=h.type;if(Au(C))return wQ(h,C,m)}return m}function W0e(d,h){{var m=ry(d);if(m===void 0){if(typeof d.render=="function")throw new Error("Unable to find node on an unmounted component.");var C=Object.keys(d).join(",");throw new Error("Argument appears to not be a ReactComponent. Keys: "+C)}var w=qZ(m);if(w===null)return null;if(w.mode&to){var D=Ei(m)||"Component";if(!LH[D]){LH[D]=!0;var I=da;try{zs(w),m.mode&to?r("%s is deprecated in StrictMode. %s was passed an instance of %s which is inside StrictMode. Instead, add a ref directly to the element you want to reference. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-find-node",h,h,D):r("%s is deprecated in StrictMode. %s was passed an instance of %s which renders StrictMode children. Instead, add a ref directly to the element you want to reference. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-find-node",h,h,D)}finally{I?zs(I):ar()}}}return w.stateNode}}function Zee(d,h,m,C,w,D,I,R){var O=!1,U=null;return Gee(d,h,O,U,m,C,w,D,I)}function Xee(d,h,m,C,w,D,I,R,O,U){var q=!0,ce=Gee(m,C,q,d,w,D,I,R,O);ce.context=Yee(null);var ae=ce.current,ke=Wa(),Te=mp(ae),Be=gf(ke,Te);return Be.callback=h??null,lp(ae,Be,Te),qSe(ce,Te,ke),ce}function ix(d,h,m,C){fve(h,d);var w=h.current,D=Wa(),I=mp(w);Mve(I);var R=Yee(m);h.context===null?h.context=R:h.pendingContext=R,h_&&da!==null&&!SH&&(SH=!0,r(`Render methods should be a pure function of props and state; triggering nested component updates from render is not allowed. If necessary, trigger nested updates in componentDidUpdate.

Check the render method of %s.`,Ei(da)||"Unknown"));var O=gf(D,I);O.payload={element:d},C=C===void 0?null:C,C!==null&&(typeof C!="function"&&r("render(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",C),O.callback=C);var U=lp(w,O,I);return U!==null&&(Ko(U,w,I,D),tN(U,w,I)),I}function $N(d){var h=d.current;if(!h.child)return null;switch(h.child.tag){case p:return h.child.stateNode;default:return h.child.stateNode}}function H0e(d){switch(d.tag){case f:{var h=d.stateNode;if(dT(h)){var m=zve(h);ZSe(h,m)}break}case E:{vf(function(){var w=ml(d,vi);if(w!==null){var D=Wa();Ko(w,d,vi,D)}});var C=vi;xH(d,C);break}}}function Qee(d,h){var m=d.memoizedState;m!==null&&m.dehydrated!==null&&(m.retryLane=Gve(m.retryLane,h))}function xH(d,h){Qee(d,h);var m=d.alternate;m&&Qee(m,h)}function V0e(d){if(d.tag===E){var h=V0,m=ml(d,h);if(m!==null){var C=Wa();Ko(m,d,h,C)}xH(d,h)}}function z0e(d){if(d.tag===E){var h=mp(d),m=ml(d,h);if(m!==null){var C=Wa();Ko(m,d,h,C)}xH(d,h)}}function Jee(d){var h=sve(d);return h===null?null:h.stateNode}var ete=function(d){return null};function U0e(d){return ete(d)}var tte=function(d){return!1};function $0e(d){return tte(d)}var ite=null,nte=null,ste=null,ote=null,rte=null,ate=null,lte=null,cte=null,dte=null;{var ute=function(d,h,m){var C=h[m],w=Ln(d)?d.slice():zi({},d);return m+1===h.length?(Ln(w)?w.splice(C,1):delete w[C],w):(w[C]=ute(d[C],h,m+1),w)},hte=function(d,h){return ute(d,h,0)},fte=function(d,h,m,C){var w=h[C],D=Ln(d)?d.slice():zi({},d);if(C+1===h.length){var I=m[C];D[I]=D[w],Ln(D)?D.splice(w,1):delete D[w]}else D[w]=fte(d[w],h,m,C+1);return D},gte=function(d,h,m){if(h.length!==m.length){s("copyWithRename() expects paths of the same length");return}else for(var C=0;C<m.length-1;C++)if(h[C]!==m[C]){s("copyWithRename() expects paths to be the same except for the deepest key");return}return fte(d,h,m,0)},pte=function(d,h,m,C){if(m>=h.length)return C;var w=h[m],D=Ln(d)?d.slice():zi({},d);return D[w]=pte(d[w],h,m+1,C),D},mte=function(d,h,m){return pte(d,h,0,m)},kH=function(d,h){for(var m=d.memoizedState;m!==null&&h>0;)m=m.next,h--;return m};ite=function(d,h,m,C){var w=kH(d,h);if(w!==null){var D=mte(w.memoizedState,m,C);w.memoizedState=D,w.baseState=D,d.memoizedProps=zi({},d.memoizedProps);var I=ml(d,vi);I!==null&&Ko(I,d,vi,Ls)}},nte=function(d,h,m){var C=kH(d,h);if(C!==null){var w=hte(C.memoizedState,m);C.memoizedState=w,C.baseState=w,d.memoizedProps=zi({},d.memoizedProps);var D=ml(d,vi);D!==null&&Ko(D,d,vi,Ls)}},ste=function(d,h,m,C){var w=kH(d,h);if(w!==null){var D=gte(w.memoizedState,m,C);w.memoizedState=D,w.baseState=D,d.memoizedProps=zi({},d.memoizedProps);var I=ml(d,vi);I!==null&&Ko(I,d,vi,Ls)}},ote=function(d,h,m){d.pendingProps=mte(d.memoizedProps,h,m),d.alternate&&(d.alternate.pendingProps=d.pendingProps);var C=ml(d,vi);C!==null&&Ko(C,d,vi,Ls)},rte=function(d,h){d.pendingProps=hte(d.memoizedProps,h),d.alternate&&(d.alternate.pendingProps=d.pendingProps);var m=ml(d,vi);m!==null&&Ko(m,d,vi,Ls)},ate=function(d,h,m){d.pendingProps=gte(d.memoizedProps,h,m),d.alternate&&(d.alternate.pendingProps=d.pendingProps);var C=ml(d,vi);C!==null&&Ko(C,d,vi,Ls)},lte=function(d){var h=ml(d,vi);h!==null&&Ko(h,d,vi,Ls)},cte=function(d){ete=d},dte=function(d){tte=d}}function j0e(d){var h=qZ(d);return h===null?null:h.stateNode}function q0e(d){return null}function K0e(){return da}function G0e(d){var h=d.findFiberByHostInstance,m=t.ReactCurrentDispatcher;return hve({bundleType:d.bundleType,version:d.version,rendererPackageName:d.rendererPackageName,rendererConfig:d.rendererConfig,overrideHookState:ite,overrideHookStateDeletePath:nte,overrideHookStateRenamePath:ste,overrideProps:ote,overridePropsDeletePath:rte,overridePropsRenamePath:ate,setErrorHandler:cte,setSuspenseHandler:dte,scheduleUpdate:lte,currentDispatcherRef:m,findHostInstanceByFiber:j0e,findFiberByHostInstance:h||q0e,findHostInstancesForRefresh:L0e,scheduleRefresh:w0e,scheduleRoot:S0e,setRefreshHandler:y0e,getCurrentFiber:K0e,reconcilerVersion:wH})}var _te=typeof reportError=="function"?reportError:function(d){console.error(d)};function DH(d){this._internalRoot=d}jN.prototype.render=DH.prototype.render=function(d){var h=this._internalRoot;if(h===null)throw new Error("Cannot update an unmounted root.");{typeof arguments[1]=="function"?r("render(...): does not support the second callback argument. To execute a side effect after rendering, declare it in a component body with useEffect()."):qN(arguments[1])?r("You passed a container to the second argument of root.render(...). You don't need to pass it again since you already passed it to create the root."):typeof arguments[1]<"u"&&r("You passed a second argument to root.render(...) but it only accepts one argument.");var m=h.containerInfo;if(m.nodeType!==So){var C=Jee(h.current);C&&C.parentNode!==m&&r("render(...): It looks like the React-rendered content of the root container was removed without using React. This is not supported and will cause errors. Instead, call root.unmount() to empty a root's container.")}}ix(d,h,null,null)},jN.prototype.unmount=DH.prototype.unmount=function(){typeof arguments[0]=="function"&&r("unmount(...): does not support a callback argument. To execute a side effect after rendering, declare it in a component body with useEffect().");var d=this._internalRoot;if(d!==null){this._internalRoot=null;var h=d.containerInfo;Iee()&&r("Attempted to synchronously unmount a root while React was already rendering. React cannot finish unmounting the root until the current render has completed, which may lead to a race condition."),vf(function(){ix(null,d,null,null)}),_Q(h)}};function Y0e(d,h){if(!qN(d))throw new Error("createRoot(...): Target container is not a DOM element.");vte(d);var m=!1,C=!1,w="",D=_te;h!=null&&(h.hydrate?s("hydrate through createRoot is deprecated. Use ReactDOMClient.hydrateRoot(container, <App />) instead."):typeof h=="object"&&h!==null&&h.$$typeof===ye&&r(`You passed a JSX element to createRoot. You probably meant to call root.render instead. Example usage:

  let root = createRoot(domContainer);
  root.render(<App />);`),h.unstable_strictMode===!0&&(m=!0),h.identifierPrefix!==void 0&&(w=h.identifierPrefix),h.onRecoverableError!==void 0&&(D=h.onRecoverableError),h.transitionCallbacks!==void 0&&h.transitionCallbacks);var I=Zee(d,HT,null,m,C,w,D);MT(I.current,d);var R=d.nodeType===So?d.parentNode:d;return lL(R),new DH(I)}function jN(d){this._internalRoot=d}function Z0e(d){d&&ube(d)}jN.prototype.unstable_scheduleHydration=Z0e;function X0e(d,h,m){if(!qN(d))throw new Error("hydrateRoot(...): Target container is not a DOM element.");vte(d),h===void 0&&r("Must provide initial children as second argument to hydrateRoot. Example usage: hydrateRoot(domContainer, <App />)");var C=m??null,w=m!=null&&m.hydratedSources||null,D=!1,I=!1,R="",O=_te;m!=null&&(m.unstable_strictMode===!0&&(D=!0),m.identifierPrefix!==void 0&&(R=m.identifierPrefix),m.onRecoverableError!==void 0&&(O=m.onRecoverableError));var U=Xee(h,null,d,HT,C,D,I,R,O);if(MT(U.current,d),lL(d),w)for(var q=0;q<w.length;q++){var ce=w[q];t1e(U,ce)}return new jN(U)}function qN(d){return!!(d&&(d.nodeType===gl||d.nodeType===ef||d.nodeType===A5||!Ut))}function nx(d){return!!(d&&(d.nodeType===gl||d.nodeType===ef||d.nodeType===A5||d.nodeType===So&&d.nodeValue===" react-mount-point-unstable "))}function vte(d){d.nodeType===gl&&d.tagName&&d.tagName.toUpperCase()==="BODY"&&r("createRoot(): Creating roots directly with document.body is discouraged, since its children are often manipulated by third-party scripts and browser extensions. This may lead to subtle reconciliation issues. Try using a container element created for your app."),bL(d)&&(d._reactRootContainer?r("You are calling ReactDOMClient.createRoot() on a container that was previously passed to ReactDOM.render(). This is not supported."):r("You are calling ReactDOMClient.createRoot() on a container that has already been passed to createRoot() before. Instead, call root.render() on the existing root instead if you want to update it."))}var Q0e=t.ReactCurrentOwner,bte;bte=function(d){if(d._reactRootContainer&&d.nodeType!==So){var h=Jee(d._reactRootContainer.current);h&&h.parentNode!==d&&r("render(...): It looks like the React-rendered content of this container was removed without using React. This is not supported and will cause errors. Instead, call ReactDOM.unmountComponentAtNode to empty a container.")}var m=!!d._reactRootContainer,C=EH(d),w=!!(C&&np(C));w&&!m&&r("render(...): Replacing React-rendered children with a new root component. If you intended to update the children of this node, you should instead have the existing children update their state and render the new components instead of calling ReactDOM.render."),d.nodeType===gl&&d.tagName&&d.tagName.toUpperCase()==="BODY"&&r("render(): Rendering components directly into document.body is discouraged, since its children are often manipulated by third-party scripts and browser extensions. This may lead to subtle reconciliation issues. Try rendering into a container element created for your app.")};function EH(d){return d?d.nodeType===ef?d.documentElement:d.firstChild:null}function Cte(){}function J0e(d,h,m,C,w){if(w){if(typeof C=="function"){var D=C;C=function(){var ae=$N(I);D.call(ae)}}var I=Xee(h,C,d,op,null,!1,!1,"",Cte);d._reactRootContainer=I,MT(I.current,d);var R=d.nodeType===So?d.parentNode:d;return lL(R),vf(),I}else{for(var O;O=d.lastChild;)d.removeChild(O);if(typeof C=="function"){var U=C;C=function(){var ae=$N(q);U.call(ae)}}var q=Zee(d,op,null,!1,!1,"",Cte);d._reactRootContainer=q,MT(q.current,d);var ce=d.nodeType===So?d.parentNode:d;return lL(ce),vf(function(){ix(h,q,m,C)}),q}}function eLe(d,h){d!==null&&typeof d!="function"&&r("%s(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",h,d)}function KN(d,h,m,C,w){bte(m),eLe(w===void 0?null:w,"render");var D=m._reactRootContainer,I;if(!D)I=J0e(m,h,d,w,C);else{if(I=D,typeof w=="function"){var R=w;w=function(){var O=$N(I);R.call(O)}}ix(h,I,d,w)}return $N(I)}var yte=!1;function tLe(d){{yte||(yte=!0,r("findDOMNode is deprecated and will be removed in the next major release. Instead, add a ref directly to the element you want to reference. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-find-node"));var h=Q0e.current;if(h!==null&&h.stateNode!==null){var m=h.stateNode._warnedAboutRefsInRender;m||r("%s is accessing findDOMNode inside its render(). render() should be a pure function of props and state. It should never access something that requires stale data from the previous render, such as refs. Move this logic to componentDidMount and componentDidUpdate instead.",on(h.type)||"A component"),h.stateNode._warnedAboutRefsInRender=!0}}return d==null?null:d.nodeType===gl?d:W0e(d,"findDOMNode")}function iLe(d,h,m){if(r("ReactDOM.hydrate is no longer supported in React 18. Use hydrateRoot instead. Until you switch to the new API, your app will behave as if it's running React 17. Learn more: https://reactjs.org/link/switch-to-createroot"),!nx(h))throw new Error("Target container is not a DOM element.");{var C=bL(h)&&h._reactRootContainer===void 0;C&&r("You are calling ReactDOM.hydrate() on a container that was previously passed to ReactDOMClient.createRoot(). This is not supported. Did you mean to call hydrateRoot(container, element)?")}return KN(null,d,h,!0,m)}function nLe(d,h,m){if(r("ReactDOM.render is no longer supported in React 18. Use createRoot instead. Until you switch to the new API, your app will behave as if it's running React 17. Learn more: https://reactjs.org/link/switch-to-createroot"),!nx(h))throw new Error("Target container is not a DOM element.");{var C=bL(h)&&h._reactRootContainer===void 0;C&&r("You are calling ReactDOM.render() on a container that was previously passed to ReactDOMClient.createRoot(). This is not supported. Did you mean to call root.render(element)?")}return KN(null,d,h,!1,m)}function sLe(d,h,m,C){if(r("ReactDOM.unstable_renderSubtreeIntoContainer() is no longer supported in React 18. Consider using a portal instead. Until you switch to the createRoot API, your app will behave as if it's running React 17. Learn more: https://reactjs.org/link/switch-to-createroot"),!nx(m))throw new Error("Target container is not a DOM element.");if(d==null||!X_e(d))throw new Error("parentComponent must be a valid React Component");return KN(d,h,m,!1,C)}var wte=!1;function oLe(d){if(wte||(wte=!0,r("unmountComponentAtNode is deprecated and will be removed in the next major release. Switch to the createRoot API. Learn more: https://reactjs.org/link/switch-to-createroot")),!nx(d))throw new Error("unmountComponentAtNode(...): Target container is not a DOM element.");{var h=bL(d)&&d._reactRootContainer===void 0;h&&r("You are calling ReactDOM.unmountComponentAtNode() on a container that was previously passed to ReactDOMClient.createRoot(). This is not supported. Did you mean to call root.unmount()?")}if(d._reactRootContainer){{var m=EH(d),C=m&&!np(m);C&&r("unmountComponentAtNode(): The node you're attempting to unmount was rendered by another copy of React.")}return vf(function(){KN(null,null,d,!1,function(){d._reactRootContainer=null,_Q(d)})}),!0}else{{var w=EH(d),D=!!(w&&np(w)),I=d.nodeType===gl&&nx(d.parentNode)&&!!d.parentNode._reactRootContainer;D&&r("unmountComponentAtNode(): The node you're attempting to unmount was rendered by React and is not a top-level container. %s",I?"You may have accidentally passed in a React root node instead of its container.":"Instead, have the parent component update its state and rerender in order to remove this component.")}return!1}}tbe(H0e),nbe(V0e),sbe(z0e),obe(bd),rbe(Qve),(typeof Map!="function"||Map.prototype==null||typeof Map.prototype.forEach!="function"||typeof Set!="function"||Set.prototype==null||typeof Set.prototype.clear!="function"||typeof Set.prototype.forEach!="function")&&r("React depends on Map and Set built-in types. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),H_e(aye),U_e(oH,XSe,vf);function rLe(d,h){var m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!qN(h))throw new Error("Target container is not a DOM element.");return B0e(d,h,null,m)}function aLe(d,h,m,C){return sLe(d,h,m,C)}var IH={usingClientEntryPoint:!1,Events:[np,Sy,AT,AZ,PZ,oH]};function lLe(d,h){return IH.usingClientEntryPoint||r('You are importing createRoot from "react-dom" which is not supported. You should instead import it from "react-dom/client".'),Y0e(d,h)}function cLe(d,h,m){return IH.usingClientEntryPoint||r('You are importing hydrateRoot from "react-dom" which is not supported. You should instead import it from "react-dom/client".'),X0e(d,h,m)}function dLe(d){return Iee()&&r("flushSync was called from inside a lifecycle method. React cannot flush when React is already rendering. Consider moving this call to a scheduler task or micro task."),vf(d)}var uLe=G0e({findFiberByHostInstance:D_,bundleType:1,version:wH,rendererPackageName:"react-dom"});if(!uLe&&wn&&window.top===window.self&&(navigator.userAgent.indexOf("Chrome")>-1&&navigator.userAgent.indexOf("Edge")===-1||navigator.userAgent.indexOf("Firefox")>-1)){var Ste=window.location.protocol;/^(https?|file):$/.test(Ste)&&console.info("%cDownload the React DevTools for a better development experience: https://reactjs.org/link/react-devtools"+(Ste==="file:"?`
You might need to use a local HTTP server (instead of file://): https://reactjs.org/link/react-devtools-faq`:""),"font-weight:bold")}dc.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=IH,dc.createPortal=rLe,dc.createRoot=lLe,dc.findDOMNode=tLe,dc.flushSync=dLe,dc.hydrate=iLe,dc.hydrateRoot=cLe,dc.render=nLe,dc.unmountComponentAtNode=oLe,dc.unstable_batchedUpdates=oH,dc.unstable_renderSubtreeIntoContainer=aLe,dc.version=wH,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)})();lle.exports=dc;var vLe=lle.exports,NH=vLe;{var GN=NH.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;U9.createRoot=function(o,e){GN.usingClientEntryPoint=!0;try{return NH.createRoot(o,e)}finally{GN.usingClientEntryPoint=!1}},U9.hydrateRoot=function(o,e,t){GN.usingClientEntryPoint=!0;try{return NH.hydrateRoot(o,e,t)}finally{GN.usingClientEntryPoint=!1}}}function bLe(o){return new Worker(""+new URL("editor.worker-oRlJJsnX.js",import.meta.url).href,{name:o==null?void 0:o.name})}function CLe(o){return new Worker(""+new URL("json.worker-CJ89eVXr.js",import.meta.url).href,{name:o==null?void 0:o.name})}function yLe(o){return new Worker(""+new URL("ts.worker-Brk6wN3W.js",import.meta.url).href,{name:o==null?void 0:o.name})}const ule=`/**
 * API for Varhub VM
 * @example
 * \`\`\`typescript
 * import room from "varhub:room";
 *
 * room.on("connectionOpen", (con) => {
 *     room.broadcast("user joined", com.parameters[0]);
 *     con.send("welcome!");
 * })
 *
 * room.on("connectionClose", (con) => {
 *     room.broadcast("user left", com.parameters[0]);
 * })
 *
 * room.on("connectionMessage", (con, ...args) => {
 *     room.broadcast("user said", com.parameters[0], ...args);
 * })
 * \`\`\`
 * @module VM API
 */

/**
 * This module allows you to get a controller of current {@link Room}.
 * @example
 * \`\`\`javascript
 * import room from "varhub:room"
 * // room is a singleton object
 * \`\`\`
 * @module
 */
declare module "varhub:room" {
	
	/** @event */
	export type ConnectionEvents = {
		/**
		 * connection successfully opened
		 * @example
		 * \`\`\`typescript
		 * connection.on("open", () => {
		 *   console.log("connection opened!");
		 *   console.assert(connection.ready);
		 * });
		 * connection.open();
		 * \`\`\`
		 */
		open: [];
		/**
		 * connection closed
		 * @example
		 * \`\`\`typescript
		 * connection.on("close", (reason: string|null, wasOpen: boolean) => {
		 *   console.log("connection closed by reason:", reason);
		 *   console.assert(connection.closed);
		 * })
		 * \`\`\`
		 */
		close: [reason: string|null, wasOnline: boolean];
		/**
		 * received message from connection
		 * @example
		 * \`\`\`typescript
		 * connection.on("message", (...data) => {
		 *   console.log("received from connection:", data);
		 *   console.assert(connection.ready);
		 * })
		 * \`\`\`
		 */
		message: any[];
	}
	
	interface Connection {
		/**
		 * Promise like for events "open", "error"
		 * ### Using in async context
		 * @example
		 * \`\`\`typescript
		 * try {
		 *   await connection;
		 *   console.log("client connected");
		 * } catch (error) {
		 *   console.log("connection error");
		 * }
		 * \`\`\`
		 * ### Using in sync context
		 * @example
		 * \`\`\`
		 * connection.then(([connection]) => {
		 *   console.log("client connected");
		 * });
		 * \`\`\`
		 * @param onfulfilled
		 * @param onrejected
		 */
		then<R1 = [this], R2 = never>(
			onfulfilled?: ((value: [this]) => R1 | PromiseLike<R1>) | undefined | null,
			onrejected?: ((reason: any) => R2 | PromiseLike<R2>) | undefined | null
		): Promise<R1 | R2>;
		/**
		 * connection open
		 */
		get ready(): boolean;
		/**
		 * connection closed
		 */
		get closed(): boolean;
		/**
		 * send data to connection
		 * @param data any serializable arguments
		 */
		send(...data: any[]): this;
		/**
		 * @event
		 * @template {keyof ConnectionEvents} T
		 * subscribe on event
		 * @param {keyof ConnectionEvents} eventName "message", "open" or "close"
		 * @param {(...args: ConnectionEvents[T]) => void} handler event handler
		 */
		on<T extends keyof ConnectionEvents>(eventName: T, handler: (...args: ConnectionEvents[T]) => void): this;
		/**
		 * @event
		 * @template {keyof ConnectionEvents} T
		 * subscribe on event once
		 * @param {keyof ConnectionEvents} eventName "message", "open" or "close"
		 * @param {(...args: ConnectionEvents[T]) => void} handler event handler
		 */
		once<T extends keyof ConnectionEvents>(eventName: T, handler: (...args: ConnectionEvents[T]) => void): this;
		/**
		 * @event
		 * @template {keyof ConnectionEvents} T
		 * unsubscribe from event
		 * @param {keyof ConnectionEvents} eventName "message", "open" or "close"
		 * @param {(...args: ConnectionEvents[T]) => void} handler event handler
		 */
		off<T extends keyof ConnectionEvents>(eventName: T, handler: (...args: ConnectionEvents[T]) => void): this;
		/**
		 * close client's connection
		 * @param reason
		 */
		close(reason?: string|null): void;
		
		/**
		 * defer connection establishment.
		 * Use this method if you need to perform an asynchronous check to get permission to connect.
		 * @example
		 * \`\`\`typescript
		 * room.on("connection", (connection, ...args) => {
		 *   void connection.defer(checkConnection, ...args);
		 *   console.assert(connection.deferred);
		 *   console.assert(!connection.ready);
		 *   console.assert(!connection.closed);
		 * })
		 * async function checkConnection(connection, ...args) {
		 *   const permitted: boolean = await checkConnectionPermits(connection, args);
		 *   if (!permitted) connection.close("not permitted"); // or throw error
		 * }
		 * \`\`\`
		 * @param handler
		 * - If the handler completes or resolves successfully, the connection will be opened.
		 * - If the handler throws or rejects an error, the connection will be closed with this error.
		 * - You can close the connection earlier by calling \`connection.close(reason)\`.
		 * - You can open the connection earlier by calling \`connection.open()\`.
		 * @param args additional arguments for handler
		 * @returns the result of handler or throws error
		 */
		defer<T, A extends any[]>(handler: (this: this, connection: this, ...args: A) => T, ...args: A): T;
		/**
		 * connection is deferred
		 */
		get deferred(): boolean;
		/**
		 * Allow the connection to connect
		 *
		 * The connection is connected automatically if it has not been deferred.
		 */
		open(): this;
		/**
		 * get the parameters with which the connection was initialized
		 */
		get parameters(): any[];
		toString(): string;
		valueOf(): number;
	}
	export type { Connection };
	
	/**
	 * @event
	 * Define all events dispatched by room controller
	 */
	export type RoomEvents = {
		/**
		 * new connection initialized
		 * @example
		 * \`\`\`ts
		 * room.on("connection", (con, ...params) => {
		 *   con.open();
		 *   console.log("someone connected with params", params);
		 *   con.send("Welcome!");
		 * })
		 * \`\`\`
		 * */
		connection: [connection: Connection, ...params: any[]];
		/**
		 * connection successfully opened
		 * @example
		 * \`\`\`ts
		 * room.on("connectionOpen", (con) => {
		 *   con.send("Welcome!");
		 * })
		 * \`\`\`
		 * */
		connectionOpen: [connection: Connection];
		/**
		 * connection closed
		 * @example
		 * \`\`\`ts
		 * room.on("connectionClose", (con, reason, wasOpen) => {
		 *   console.log("connection closed by reason:", reason);
		 * })
		 * \`\`\`
		 * */
		connectionClose: [connection: Connection, reason: string | null, wasOpen: boolean];
		/**
		 * received a message from connection
		 * @example
		 * \`\`\`ts
		 * room.on("connectionMessage", (con, ...data) => {
		 *   console.log("got message:", data);
		 * })
		 * \`\`\`
		 * */
		connectionMessage: [connection: Connection, ...data: any[]];
	}
	
	
	interface Room {
		#private
		/** @hidden */
		then<R1 = [this]>(
			onfulfilled?: ((value: [this]) => R1 | PromiseLike<R1>) | undefined | null,
			onrejected?: ((reason: any) => any) | undefined | null
		): Promise<R1>;
		/** @hidden */
		get ready(): true;
		/** @hidden */
		get closed(): false;
		/** @hidden */
		get id(): "unknown";
		/** @hidden */
		get integrity(): "unknown";
		
		/**
		 * public message of the room.
		 */
		get message(): string | null;
		/**
		 * change public message of the room. Set null to make room private.
		 * @param value
		 */
		set message(value: string | null);
		
		/**
		 * destroy this room.
		 */
		destroy(): void;
		
		/**
		 * send message to all ready connections.
		 */
		broadcast(...msg: any[]): this;
		
		/**
		 * get all connections
		 * @param [filter] filter connections, optional.
		 * @param {boolean} [filter.ready] get only ready (or not ready) connections.
		 * @param {boolean} [filter.deferred] get only deferred (or not deferred) connections.
		 * @param {boolean} [filter.closed] get only closed (or not closed) connections.
		 * @return connections found
		 */
		getConnections(filter?: {ready?: boolean, deferred?: boolean, closed?: boolean}): Set<Connection>;
		
		/**
		 * @event
		 * @template {keyof RoomEvents} T
		 * subscribe on event
		 * @param {keyof RoomEvents} event "connection", "connectionOpen", "connectionClose" or "connectionMessage"
		 * @param {(...args: RoomEvents[T]) => void} handler event handler
		 * @see RoomEvents
		 */
		on<T extends keyof RoomEvents>(event: T, handler: (...args: RoomEvents[T]) => void): this;
		/**
		 * @event
		 * @template {keyof RoomEvents} T
		 * subscribe on event once
		 * @param {keyof RoomEvents} event "connection", "connectionOpen", "connectionClose" or "connectionMessage"
		 * @param {(...args: RoomEvents[T]) => void} handler event handler
		 * @see RoomEvents
		 */
		once<T extends keyof RoomEvents>(event: T, handler: (...args: RoomEvents[T]) => void): this;
		/**
		 * @event
		 * @template {keyof RoomEvents} T
		 * unsubscribe from event
		 * @param {keyof RoomEvents} event "connection", "connectionOpen", "connectionClose" or "connectionMessage"
		 * @param {(...args: RoomEvents[T]) => void} handler event handler
		 * @see RoomEvents
		 */
		off<T extends keyof RoomEvents>(event: T, handler: (...args: RoomEvents[T]) => void): this;
		
		[Symbol.dispose](): void;
		[Symbol.asyncDispose](): Promise<void>;
	}
	export type { Room };
	const room: Room;
	/**
	 * Controller of this room.
	 * Singleton instance of type {@link Room }
	 * @see Room
	 */
	export default room;
}

/**
 * provides class {@link EventEmitter}
 * @module
 */
declare module "varhub:events" {
	/**
	 * @example
	 * \`\`\`javascript
	 * import EventEmitter from "varhub:event";
	 * const events = new EventEmitter();
	 * events.on("message", (...args) => console.log(...args));
	 * events.emit("message", 1, 2, 3);
	 * \`\`\`
	 */
	export default class EventEmitter<M extends Record<any, any[]>> {
		on<T extends keyof M>(event: T, handler: (...args: M[T]) => void): this;
		once<T extends keyof M>(event: T, handler: (...args: M[T]) => void): this;
		off<T extends keyof M>(event: T, handler: (...args: M[T]) => void): this;
		emit<T extends keyof M>(event: T, ...args: M[T]): boolean;
		/**
		 * like {@link EventEmitter#emit}, but ignore handler errors
		 */
		emitWithTry<T extends keyof M>(event: T, ...args: M[T]): boolean;
	}
}

/**
 * provides class {@link Players} to combine connections by name
 * @module
 */
declare module "varhub:players" {
	import type { Connection, Room } from "varhub:room"
	/**
	 * @event
	 */
	export type PlayerEvents = {
		/**
		 * player leaves the game
		 * @example
		 * \`\`\`typescript
		 * player.on("leave", () => {
		 *   console.log("player leaves:", player.name);
		 * })
		 * \`\`\`
		 *
		 * Attention!
		 *
		 * If the player's last connection is closed, he does not leave the game, but goes offline.
		 *
		 * You can kick player when he goes offline
		 * @example
		 * \`\`\`typescript
		 * const players = new Players((con, name) => String(name));
		 * players.on("offline", player => player.kick("disconnected"));
		 * \`\`\`
		 */
		leave: []
		/**
		 * player goes online
		 * @example
		 * \`\`\`typescript
		 * player.on("online", () => {
		 *   console.log("player online now!", player.name);
		 *   console.assert(player.online);
		 * })
		 * \`\`\`
		 */
		online: []
		/**
		 * player goes offline
		 * @example
		 * \`\`\`typescript
		 * player.on("offline", () => {
		 *   console.log("player offline now!", player.name);
		 *   console.assert(!player.online);
		 * })
		 * \`\`\`
		 */
		offline: []
	}
	
	/**
	 * Player represents a list of {@link Connection}s with same name.
	 */
	export interface Player {
		/**
		 * player's name
		 */
		get name(): string;
		/**
		 * get all player's connections
		 */
		get connections(): Set<Connection>;
		
		/**
		 * player is online (has at least one opened connection)
		 */
		get online(): boolean;
		/**
		 * player is registered in list of players
		 */
		get registered(): boolean;
		/**
		 * get player's group
		 */
		get group(): string|undefined;
		/**
		 * set player's group
		 */
		setGroup(value: string|undefined);
		/**
		 * @event
		 * @template {keyof PlayerEvents} T
		 * subscribe on event
		 * @param {keyof PlayerEvents} eventName "leave", "online" or "offline"
		 * @param {(...args: PlayerEvents[T]) => void} handler event handler
		 */
		on<T extends keyof PlayerEvents>(eventName: T, handler: (...args: PlayerEvents[T]) => void): this;
		/**
		 * @event
		 * @template {keyof PlayerEvents} T
		 * subscribe on event once
		 * @param {keyof PlayerEvents} eventName "leave", "online" or "offline"
		 * @param {(...args: PlayerEvents[T]) => void} handler event handler
		 */
		once<T extends keyof PlayerEvents>(eventName: T, handler: (...args: PlayerEvents[T]) => void): this;
		/**
		 * @event
		 * @template {keyof PlayerEvents} T
		 * subscribe on event once
		 * @param {keyof PlayerEvents} eventName "leave", "online" or "offline"
		 * @param {(...args: PlayerEvents[T]) => void} handler event handler
		 */
		off<T extends keyof PlayerEvents>(eventName: T, handler: (...args: PlayerEvents[T]) => void): this;
		/**
		 * kick player and close all player's connections
		 * @param reason
		 */
		kick(reason?: string|null): void;
		toString(): string;
		valueOf(): string;
		
		/**
		 * iterate on all player's connections
		 */
		[Symbol.iterator](): SetIterator<Connection>;
	}
	
	/** @group Events */
	export type PlayersEvents = {
		/**
		 * new player joined
		 * @example
		 * \`\`\`typescript
		 * const players = new Players((con, name) => String(name));
		 * players.on("join", (player) => {
		 *   console.log("player joined:", player.name);
		 * })
		 * \`\`\`
		 */
		join: [Player]
		/**
		 * player leaves the game
		 * @example
		 * \`\`\`typescript
		 * const players = new Players((con, name) => String(name));
		 * players.on("leave", (player) => {
		 *   console.log("player leaves:", player.name);
		 * })
		 * \`\`\`
		 *
		 * Attention!
		 *
		 * If the player's last connection is closed, he does not leave the game, but goes offline.
		 *
		 * You can kick player when he goes offline
		 * @example
		 * \`\`\`typescript
		 * const players = new Players((con, name) => String(name));
		 * players.on("offline", player => player.kick("disconnected"))
		 * \`\`\`
		 */
		leave: [Player]
		/**
		 * player goes online
		 * @example
		 * \`\`\`typescript
		 * const players = new Players((con, name) => String(name));
		 * players.on("online", (player) => {
		 *   console.log("player online now!", player.name);
		 *   console.assert(player.online);
		 * })
		 * \`\`\`
		 */
		online: [Player]
		/**
		 * player goes offline, last player's connection is closed.
		 * @example
		 * \`\`\`typescript
		 * const players = new Players((con, name) => String(name));
		 * players.on("offline", (player) => {
		 *   console.log("player offline now!", player.name);
		 *   console.assert(!player.online);
		 * })
		 * \`\`\`
		 */
		offline: [Player]
	}
	export default class Players {
		/**
		 * Create a player list based on connections.
		 * @example
		 * \`\`\`typescript
		 * const players = new Players(room, (connection, ...args) => String(args[0]));
		 * \`\`\`
		 * @example
		 * \`\`\`typescript
		 * const players = new Players(room, async (connection, name, password) => {
		 *   const permitted: boolean = await checkUser(name, password);
		 *   if (!permitted) throw "wrong password";
		 *   return name;
		 * });
		 * \`\`\`
		 * @param room room
		 * @param registerPlayerHandler
		 * handler to get the player's name.
		 * - if handler returns or resolves a string - it will be the player's name
		 * - if handler returns or resolves a null or undefined - the connection will be opened without a player
		 * - if handler throws or rejects - the connection will be closed
		 * - async handler will defer the connection
		 */
		constructor(room: Room, registerPlayerHandler: (connection: Connection, ...args: any) => string|void|null|undefined|Promise<string|void|null|undefined>);
		/**
		 * get player by name or connection
		 * @param nameOrConnection name or connection
		 */
		get(nameOrConnection: Connection|string): Player|undefined;
		
		/**
		 * get number of players
		 */
		get count(): number;
		/**
		 * get all players with specified group. If group is undefined - get all players without group.
		 * @param group
		 */
		getGroup(group: string|undefined): Set<Player>;
		/**
		 * get all players
		 */
		all(): Set<Player>;
		/**
		 * @event
		 * @template {keyof PlayersEvents} T
		 * subscribe on event
		 * @param {keyof PlayersEvents} eventName "join", "leave", "online" or "offline"
		 * @param {(...args: PlayersEvents[T]) => void} handler event handler
		 */
		on<T extends keyof PlayersEvents>(eventName: T, handler: (...args: PlayersEvents[T]) => void): this;
		/**
		 * @event
		 * @template {keyof PlayersEvents} T
		 * subscribe on event once
		 * @param {keyof PlayersEvents} eventName "join", "leave", "online" or "offline"
		 * @param {(...args: PlayersEvents[T]) => void} handler event handler
		 */
		once<T extends keyof PlayersEvents>(eventName: T, handler: (...args: PlayersEvents[T]) => void): this;
		/**
		 * @event
		 * @template {keyof PlayersEvents} T
		 * unsubscribe from event
		 * @param {keyof PlayersEvents} eventName "join", "leave", "online" or "offline"
		 * @param {(...args: PlayersEvents[T]) => void} handler event handler
		 */
		off<T extends keyof PlayersEvents>(eventName: T, handler: (...args: PlayersEvents[T]) => void): this;
		/**
		 * iterate on all players
		 */
		[Symbol.iterator](): MapIterator<Player>;
	}
}

/**
 * provides class {@link RPCSource} that allows you to handle remote procedure calls
 * @example
 * \`\`\`javascript
 * import room from "varhub:room";
 * import RPCSource from "varhub:rpc";
 *
 * const mathSource = new RPCSource({
 *   sum: (x, y) => x + y,
 *   mul: (x, y) => x * y,
 * })
 * RPCSource.start(mathSource, room);
 * \`\`\`
 * @module
 */
declare module "varhub:rpc" {
	import type { Connection, Room } from "varhub:room";
	export type RPCHandler = ((connection: Connection, path: string[], args: any[], openChannel: boolean) => any);
	type EventPath<T, K extends keyof T = keyof T> = (K extends string ? (T[K] extends any[] ? (K | [K]) : [K, ...(EventPath<T[K]> extends infer NEXT extends (string | string[]) ? (NEXT extends any[] ? NEXT : [NEXT]) : never)]) : never);
	type EventPathArgs<PATH, FORM> = (PATH extends keyof FORM ? (FORM[PATH] extends any[] ? FORM[PATH] : never) : PATH extends [] ? (FORM extends any[] ? FORM : never) : PATH extends [infer STEP extends string, ...infer TAIL extends string[]] ? (STEP extends keyof FORM ? EventPathArgs<TAIL, FORM[STEP]> : never) : never);
	
	/**
	 * Remote procedure call handler
	 */
	export default class RPCSource<METHODS extends Record<string, any> = {}, STATE = undefined, EVENTS = {}> implements Disposable {
		#private;
		/** @hidden */
		[Symbol.unscopables]: {
			__rpc_methods: METHODS;
			__rpc_events: EVENTS;
			__rpc_state: STATE;
		};
		
		/**
		 * get current state
		 */
		get state(): STATE;
		/**
		 * Create new instance of RPC
		 * @example
		 * \`\`\`typescript
		 * // remote code
		 * const rpcSource = new RPCSource((connection: Connection, path: string[], args: any[], openChannel: boolean) => {
		 *   console.log("connection:", this);
		 *   if (path.length === 0 && path[0] === "sum") return args[0] + args[1];
		 *   throw new Error("method not found");
		 * });
		 * RPCSource.start(rpcSource, room);
		 * \`\`\`
		 * \`\`\`typescript
		 * // client code
		 * const rpc = new RPCChannel(client);
		 * const result = await rpc.test(5, 3);
		 * console.assert(result === 8);
		 * \`\`\`
		 * @example
		 * \`\`\`typescript
		 * // remote code
		 * const rpcSource = new RPCSource({
		 *   sum(x, y){
		 *     console.log("connection:", this);
		 *     return x + y;
		 *   }
		 * });
		 * RPCSource.start(rpcSource, room);
		 * \`\`\`
		 * \`\`\`typescript
		 * // client code
		 * const rpc = new RPCChannel(client);
		 * const result = await rpc.test(5, 3);
		 * console.assert(result === 8);
		 * \`\`\`
		 * @param {RPCHandler|METHODS} handler
		 * handler can be:
		 * - function of type {@link RPCHandler};
		 * - object with methods for remote call.
		 * @param initialState
		 */
		constructor(handler?: RPCHandler | METHODS, initialState?: STATE);
		/** apply generic types for events */
		withEventTypes<E = EVENTS>(): RPCSource<METHODS, STATE, E>;
		/** @hidden */
		setState(state: (oldState: STATE) => STATE): this;
		/**
		 * set new state
		 * @param state
		 * - new state value, if state is not a function.
		 * - function takes the current state and returns a new one
		 */
		setState(state: STATE extends (...args: any) => any ? never : STATE): this;
		/** apply generic types for state. */
		withState<S>(): RPCSource<METHODS, S, EVENTS>;
		/** apply generic types for state and set new state. */
		withState<S>(state: S): RPCSource<METHODS, S, EVENTS>;
		get disposed(): boolean;
		/**
		 * Emit event for all connected clients.
		 * Reserved event names: \`close\`, \`init\`, \`error\`, \`state\`
		 * @param event path for event. String or array of strings.
		 * @param args event values
		 */
		emit<P extends EventPath<EVENTS>>(event: P, ...args: EventPathArgs<P, EVENTS>): this;
		/**
		 * dispose this source and disconnect all channels
		 * @param reason
		 */
		dispose(reason?: any): void;
		/**
		 * dispose this source and disconnect all channels
		 */
		[Symbol.dispose](): void;
		
		/**
		 * start listening for messages and processing procedure calls
		 * @param rpcSource message handler
		 * @param room room
		 * @param options
		 * @param options.maxChannelsPerClient set a limit on the number of opened channels
		 * @param options.key Special key for listening events. Default value: \`"$rpc"\`
		 */
		static start(rpcSource: RPCSource<any, undefined, any>, room: Room, options?: {
			maxChannelsPerClient?: number;
			key?: string
		}): () => void;
		
		/**
		 * create {@link RPCHandler} based on object with methods
		 * @param parameters
		 * @param parameters.form object with methods.
		 * @returns - {@link RPCHandler}
		 */
		static readonly createDefaultHandler(parameters: {form: any}): RPCHandler;
		
		/**
		 * get the current rpc source, based on exports of main module.
		 * value is undefined while main module is executing
		 */
		static get default(): RPCSource<any, any, any>;
	}
}

/**
 * source of room config
 * @example
 * \`\`\`javascript
 * import config from "varhub:config";
 * console.log("Room config", config);
 * \`\`\`
 * @module
 */
declare module "varhub:config" {
	/**
	 * config of this room. Config is created with room.
	 */
	const config: unknown;
	export default config;
}

/**
 * \`performance.now()\`
 * @example
 * \`\`\`javascript
 * import * as performance from "varhub:performance";
 * console.log(performance.now());
 * \`\`\`
 * @example
 * \`\`\`javascript
 * import {now} from "varhub:performance";
 * console.log(now());
 * \`\`\`
 * @module
 */
declare module "varhub:performance" {
	/**
	 * performance.now()
	 * @returns { number } - time in milliseconds since room initialized
	 * */
	export const now: () => number;
}

/**
 * network module
 * @example
 * \`\`\`javascript
 * import network from "varhub:api/network";
 * const response = await network.fetch("https://example.com");
 * console.log(response.body);
 * \`\`\`
 * @module
 */
declare module "varhub:api/network" {
	export interface NetworkApi {
		fetch<T extends keyof BodyType>(url: string, params?: FetchParams<T>): Promise<FetchResult<T>>
	}
	type BodyType = {
		json: unknown;
		text: string;
		arrayBuffer: ArrayBuffer;
		formData: Array<[string, string | FileJson]>
	}
	
	interface FileJson {
		type: string,
		size: number,
		name: string,
		lastModified: number,
		data: ArrayBuffer
	}
	
	export type FetchParams<T extends keyof BodyType = keyof BodyType> = {
		type?: T
		method?: RequestInit["method"],
		headers?: Record<string, string>,
		body?: string | ArrayBuffer | Array<[string, string] | [string, FileJson] | [string, ArrayBuffer, string]>
		redirect?: RequestInit["redirect"],
		credentials?: RequestInit["credentials"]
		mode?: RequestInit["mode"]
		referrer?: RequestInit["referrer"]
		referrerPolicy?: RequestInit["referrerPolicy"]
	};
	
	export interface FetchResult<T extends keyof BodyType = keyof BodyType> {
		url: string,
		ok: boolean,
		type: string,
		statusText: string,
		redirected: boolean,
		status: number,
		headers: Record<string, string>,
		body: BodyType[T],
	}
	
	const api: NetworkApi
	export default api;
}
`,hle=`declare module "varhub:api/network" {
	export interface NetworkApi {
		fetch<T extends keyof BodyType>(url: string, params?: FetchParams<T>): Promise<FetchResult<T>>
	}
	type BodyType = {
		json: unknown;
		text: string;
		arrayBuffer: ArrayBuffer;
		formData: Array<[string, string | FileJson]>
	}

	interface FileJson {
		type: string,
		size: number,
		name: string,
		lastModified: number,
		data: ArrayBuffer
	}

	export type FetchParams<T extends keyof BodyType = keyof BodyType> = {
		type?: T
		method?: RequestInit["method"],
		headers?: Record<string, string>,
		body?: string | ArrayBuffer | Array<[string, string] | [string, FileJson] | [string, ArrayBuffer, string]>
		redirect?: RequestInit["redirect"],
		credentials?: RequestInit["credentials"]
		mode?: RequestInit["mode"]
		referrer?: RequestInit["referrer"]
		referrerPolicy?: RequestInit["referrerPolicy"]
	};

	export interface FetchResult<T extends keyof BodyType = keyof BodyType> {
		url: string,
		ok: boolean,
		type: string,
		statusText: string,
		redirected: boolean,
		status: number,
		headers: Record<string, string>,
		body: BodyType[T],
	}

	const api: NetworkApi
	export default api;
}

`;function lc(o,e=0){return o[o.length-(1+e)]}function wLe(o){if(o.length===0)throw new Error("Invalid tail call");return[o.slice(0,o.length-1),o[o.length-1]]}function En(o,e,t=(i,n)=>i===n){if(o===e)return!0;if(!o||!e||o.length!==e.length)return!1;for(let i=0,n=o.length;i<n;i++)if(!t(o[i],e[i]))return!1;return!0}function SLe(o,e){const t=o.length-1;e<t&&(o[e]=o[t]),o.pop()}function oD(o,e,t){return LLe(o.length,i=>t(o[i],e))}function LLe(o,e){let t=0,i=o-1;for(;t<=i;){const n=(t+i)/2|0,s=e(n);if(s<0)t=n+1;else if(s>0)i=n-1;else return n}return-(t+1)}function $9(o,e,t){if(o=o|0,o>=e.length)throw new TypeError("invalid index");const i=e[Math.floor(e.length*Math.random())],n=[],s=[],r=[];for(const a of e){const l=t(a,i);l<0?n.push(a):l>0?s.push(a):r.push(a)}return o<n.length?$9(o,n,t):o<n.length+r.length?r[0]:$9(o-(n.length+r.length),s,t)}function xte(o,e){const t=[];let i;for(const n of o.slice(0).sort(e))!i||e(i[0],n)!==0?(i=[n],t.push(i)):i.push(n);return t}function*vq(o,e){let t,i;for(const n of o)i!==void 0&&e(i,n)?t.push(n):(t&&(yield t),t=[n]),i=n;t&&(yield t)}function fle(o,e){for(let t=0;t<=o.length;t++)e(t===0?void 0:o[t-1],t===o.length?void 0:o[t])}function xLe(o,e){for(let t=0;t<o.length;t++)e(t===0?void 0:o[t-1],o[t],t+1===o.length?void 0:o[t+1])}function rd(o){return o.filter(e=>!!e)}function kte(o){let e=0;for(let t=0;t<o.length;t++)o[t]&&(o[e]=o[t],e+=1);o.length=e}function gle(o){return!Array.isArray(o)||o.length===0}function wr(o){return Array.isArray(o)&&o.length>0}function bg(o,e=t=>t){const t=new Set;return o.filter(i=>{const n=e(i);return t.has(n)?!1:(t.add(n),!0)})}function bq(o,e){return o.length>0?o[0]:e}function va(o,e){let t=typeof e=="number"?o:0;typeof e=="number"?t=o:(t=0,e=o);const i=[];if(t<=e)for(let n=t;n<e;n++)i.push(n);else for(let n=t;n>e;n--)i.push(n);return i}function BF(o,e,t){const i=o.slice(0,e),n=o.slice(e);return i.concat(t,n)}function RH(o,e){const t=o.indexOf(e);t>-1&&(o.splice(t,1),o.unshift(e))}function YN(o,e){const t=o.indexOf(e);t>-1&&(o.splice(t,1),o.push(e))}function j9(o,e){for(const t of e)o.push(t)}function Cq(o){return Array.isArray(o)?o:[o]}function kLe(o,e,t){const i=ple(o,e),n=o.length,s=t.length;o.length=n+s;for(let r=n-1;r>=i;r--)o[r+s]=o[r];for(let r=0;r<s;r++)o[r+i]=t[r]}function Dte(o,e,t,i){const n=ple(o,e);let s=o.splice(n,t);return s===void 0&&(s=[]),kLe(o,n,i),s}function ple(o,e){return e<0?Math.max(e+o.length,0):Math.min(e,o.length)}var rD;(function(o){function e(s){return s<0}o.isLessThan=e;function t(s){return s<=0}o.isLessThanOrEqual=t;function i(s){return s>0}o.isGreaterThan=i;function n(s){return s===0}o.isNeitherLessOrGreaterThan=n,o.greaterThan=1,o.lessThan=-1,o.neitherLessOrGreaterThan=0})(rD||(rD={}));function Yr(o,e){return(t,i)=>e(o(t),o(i))}function DLe(...o){return(e,t)=>{for(const i of o){const n=i(e,t);if(!rD.isNeitherLessOrGreaterThan(n))return n}return rD.neitherLessOrGreaterThan}}const sd=(o,e)=>o-e,ELe=(o,e)=>sd(o?1:0,e?1:0);function mle(o){return(e,t)=>-o(e,t)}class Cg{constructor(e){this.items=e,this.firstIdx=0,this.lastIdx=this.items.length-1}get length(){return this.lastIdx-this.firstIdx+1}takeWhile(e){let t=this.firstIdx;for(;t<this.items.length&&e(this.items[t]);)t++;const i=t===this.firstIdx?null:this.items.slice(this.firstIdx,t);return this.firstIdx=t,i}takeFromEndWhile(e){let t=this.lastIdx;for(;t>=0&&e(this.items[t]);)t--;const i=t===this.lastIdx?null:this.items.slice(t+1,this.lastIdx+1);return this.lastIdx=t,i}peek(){if(this.length!==0)return this.items[this.firstIdx]}dequeue(){const e=this.items[this.firstIdx];return this.firstIdx++,e}takeCount(e){const t=this.items.slice(this.firstIdx,this.firstIdx+e);return this.firstIdx+=e,t}}const Xw=class Xw{constructor(e){this.iterate=e}toArray(){const e=[];return this.iterate(t=>(e.push(t),!0)),e}filter(e){return new Xw(t=>this.iterate(i=>e(i)?t(i):!0))}map(e){return new Xw(t=>this.iterate(i=>t(e(i))))}findLast(e){let t;return this.iterate(i=>(e(i)&&(t=i),!0)),t}findLastMaxBy(e){let t,i=!0;return this.iterate(n=>((i||rD.isGreaterThan(e(n,t)))&&(i=!1,t=n),!0)),t}};Xw.empty=new Xw(e=>{});let qv=Xw;class tA{constructor(e){this._indexMap=e}static createSortPermutation(e,t){const i=Array.from(e.keys()).sort((n,s)=>t(e[n],e[s]));return new tA(i)}apply(e){return e.map((t,i)=>e[this._indexMap[i]])}inverse(){const e=this._indexMap.slice();for(let t=0;t<this._indexMap.length;t++)e[this._indexMap[t]]=t;return new tA(e)}}function xa(o){return typeof o=="string"}function ao(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)&&!(o instanceof RegExp)&&!(o instanceof Date)}function ILe(o){const e=Object.getPrototypeOf(Uint8Array);return typeof o=="object"&&o instanceof e}function Rm(o){return typeof o=="number"&&!isNaN(o)}function Ete(o){return!!o&&typeof o[Symbol.iterator]=="function"}function _le(o){return o===!0||o===!1}function yr(o){return typeof o>"u"}function Dh(o){return!Rl(o)}function Rl(o){return yr(o)||o===null}function ui(o,e){if(!o)throw new Error(e?`Unexpected type, expected '${e}'`:"Unexpected type")}function Kp(o){if(Rl(o))throw new Error("Assertion Failed: argument is undefined or null");return o}function aD(o){return typeof o=="function"}function TLe(o,e){const t=Math.min(o.length,e.length);for(let i=0;i<t;i++)NLe(o[i],e[i])}function NLe(o,e){if(xa(e)){if(typeof o!==e)throw new Error(`argument does not match constraint: typeof ${e}`)}else if(aD(e)){try{if(o instanceof e)return}catch{}if(!Rl(o)&&o.constructor===e||e.length===1&&e.call(void 0,o)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}function Wf(o){if(!o||typeof o!="object"||o instanceof RegExp)return o;const e=Array.isArray(o)?[]:{};return Object.entries(o).forEach(([t,i])=>{e[t]=i&&typeof i=="object"?Wf(i):i}),e}function RLe(o){if(!o||typeof o!="object")return o;const e=[o];for(;e.length>0;){const t=e.shift();Object.freeze(t);for(const i in t)if(vle.call(t,i)){const n=t[i];typeof n=="object"&&!Object.isFrozen(n)&&!ILe(n)&&e.push(n)}}return o}const vle=Object.prototype.hasOwnProperty;function ble(o,e){return q9(o,e,new Set)}function q9(o,e,t){if(Rl(o))return o;const i=e(o);if(typeof i<"u")return i;if(Array.isArray(o)){const n=[];for(const s of o)n.push(q9(s,e,t));return n}if(ao(o)){if(t.has(o))throw new Error("Cannot clone recursive data-structure");t.add(o);const n={};for(const s in o)vle.call(o,s)&&(n[s]=q9(o[s],e,t));return t.delete(o),n}return o}function WF(o,e,t=!0){return ao(o)?(ao(e)&&Object.keys(e).forEach(i=>{i in o?t&&(ao(o[i])&&ao(e[i])?WF(o[i],e[i],t):o[i]=e[i]):o[i]=e[i]}),o):e}function el(o,e){if(o===e)return!0;if(o==null||e===null||e===void 0||typeof o!=typeof e||typeof o!="object"||Array.isArray(o)!==Array.isArray(e))return!1;let t,i;if(Array.isArray(o)){if(o.length!==e.length)return!1;for(t=0;t<o.length;t++)if(!el(o[t],e[t]))return!1}else{const n=[];for(i in o)n.push(i);n.sort();const s=[];for(i in e)s.push(i);if(s.sort(),!el(n,s))return!1;for(t=0;t<n.length;t++)if(!el(o[n[t]],e[n[t]]))return!1}return!0}function MLe(o){let e=[];for(;Object.prototype!==o;)e=e.concat(Object.getOwnPropertyNames(o)),o=Object.getPrototypeOf(o);return e}function K9(o){const e=[];for(const t of MLe(o))typeof o[t]=="function"&&e.push(t);return e}function ALe(o,e){const t=n=>function(){const s=Array.prototype.slice.call(arguments,0);return e(n,s)},i={};for(const n of o)i[n]=t(n);return i}function Cle(){return globalThis._VSCODE_NLS_MESSAGES}function yq(){return globalThis._VSCODE_NLS_LANGUAGE}const PLe=yq()==="pseudo"||typeof document<"u"&&document.location&&document.location.hash.indexOf("pseudo=true")>=0;function iA(o,e){let t;return e.length===0?t=o:t=o.replace(/\{(\d+)\}/g,(i,n)=>{const s=n[0],r=e[s];let a=i;return typeof r=="string"?a=r:(typeof r=="number"||typeof r=="boolean"||r===void 0||r===null)&&(a=String(r)),a}),PLe&&(t=""+t.replace(/[aouei]/g,"$&$&")+""),t}function v(o,e,...t){return iA(typeof o=="number"?yle(o,e):e,t)}function yle(o,e){var i;const t=(i=Cle())==null?void 0:i[o];if(typeof t!="string"){if(typeof e=="string")return e;throw new Error(`!!! NLS MISSING: ${o} !!!`)}return t}function pt(o,e,...t){let i;typeof o=="number"?i=yle(o,e):i=e;const n=iA(i,t);return{value:n,original:e===i?n:iA(e,t)}}const kw="en";let nA=!1,sA=!1,lM=!1,wle=!1,wq=!1,Sq=!1,Sle=!1,ZN,cM=kw,Ite=kw,OLe,Md;const hg=globalThis;let Br;var tle;typeof hg.vscode<"u"&&typeof hg.vscode.process<"u"?Br=hg.vscode.process:typeof process<"u"&&typeof((tle=process==null?void 0:process.versions)==null?void 0:tle.node)=="string"&&(Br=process);var ile;const FLe=typeof((ile=Br==null?void 0:Br.versions)==null?void 0:ile.electron)=="string",BLe=FLe&&(Br==null?void 0:Br.type)==="renderer";var nle;if(typeof Br=="object"){nA=Br.platform==="win32",sA=Br.platform==="darwin",lM=Br.platform==="linux",lM&&Br.env.SNAP&&Br.env.SNAP_REVISION,Br.env.CI||Br.env.BUILD_ARTIFACTSTAGINGDIRECTORY,ZN=kw,cM=kw;const o=Br.env.VSCODE_NLS_CONFIG;if(o)try{const e=JSON.parse(o);ZN=e.userLocale,Ite=e.osLocale,cM=e.resolvedLanguage||kw,OLe=(nle=e.languagePack)==null?void 0:nle.translationsConfigFile}catch{}wle=!0}else typeof navigator=="object"&&!BLe?(Md=navigator.userAgent,nA=Md.indexOf("Windows")>=0,sA=Md.indexOf("Macintosh")>=0,Sq=(Md.indexOf("Macintosh")>=0||Md.indexOf("iPad")>=0||Md.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,lM=Md.indexOf("Linux")>=0,Sle=(Md==null?void 0:Md.indexOf("Mobi"))>=0,wq=!0,cM=yq()||kw,ZN=navigator.language.toLowerCase(),Ite=ZN):console.error("Unable to resolve platform.");const Po=nA,Kt=sA,Qr=lM,su=wle,NC=wq,WLe=wq&&typeof hg.importScripts=="function",HLe=WLe?hg.origin:void 0,hu=Sq,Lle=Sle,Rh=Md,VLe=cM,zLe=typeof hg.postMessage=="function"&&!hg.importScripts,xle=(()=>{if(zLe){const o=[];hg.addEventListener("message",t=>{if(t.data&&t.data.vscodeScheduleAsyncWork)for(let i=0,n=o.length;i<n;i++){const s=o[i];if(s.id===t.data.vscodeScheduleAsyncWork){o.splice(i,1),s.callback();return}}});let e=0;return t=>{const i=++e;o.push({id:i,callback:t}),hg.postMessage({vscodeScheduleAsyncWork:i},"*")}}return o=>setTimeout(o)})(),Ja=sA||Sq?2:nA?1:3;let Tte=!0,Nte=!1;function kle(){if(!Nte){Nte=!0;const o=new Uint8Array(2);o[0]=1,o[1]=2,Tte=new Uint16Array(o.buffer)[0]===513}return Tte}const Dle=!!(Rh&&Rh.indexOf("Chrome")>=0),ULe=!!(Rh&&Rh.indexOf("Firefox")>=0),$Le=!!(!Dle&&Rh&&Rh.indexOf("Safari")>=0),jLe=!!(Rh&&Rh.indexOf("Edg/")>=0),qLe=!!(Rh&&Rh.indexOf("Android")>=0),Zo={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!0,independentColorPoolPerBracketType:!1}};var ti;(function(o){function e(k){return k&&typeof k=="object"&&typeof k[Symbol.iterator]=="function"}o.is=e;const t=Object.freeze([]);function i(){return t}o.empty=i;function*n(k){yield k}o.single=n;function s(k){return e(k)?k:n(k)}o.wrap=s;function r(k){return k||t}o.from=r;function*a(k){for(let E=k.length-1;E>=0;E--)yield k[E]}o.reverse=a;function l(k){return!k||k[Symbol.iterator]().next().done===!0}o.isEmpty=l;function c(k){return k[Symbol.iterator]().next().value}o.first=c;function u(k,E){let N=0;for(const A of k)if(E(A,N++))return!0;return!1}o.some=u;function f(k,E){for(const N of k)if(E(N))return N}o.find=f;function*g(k,E){for(const N of k)E(N)&&(yield N)}o.filter=g;function*p(k,E){let N=0;for(const A of k)yield E(A,N++)}o.map=p;function*_(k,E){let N=0;for(const A of k)yield*E(A,N++)}o.flatMap=_;function*b(...k){for(const E of k)yield*E}o.concat=b;function y(k,E,N){let A=N;for(const P of k)A=E(A,P);return A}o.reduce=y;function*S(k,E,N=k.length){for(E<0&&(E+=k.length),N<0?N+=k.length:N>k.length&&(N=k.length);E<N;E++)yield k[E]}o.slice=S;function L(k,E=Number.POSITIVE_INFINITY){const N=[];if(E===0)return[N,k];const A=k[Symbol.iterator]();for(let P=0;P<E;P++){const H=A.next();if(H.done)return[N,o.empty()];N.push(H.value)}return[N,{[Symbol.iterator](){return A}}]}o.consume=L;async function x(k){const E=[];for await(const N of k)E.push(N);return Promise.resolve(E)}o.asyncToArray=x})(ti||(ti={}));var rg;let $s=(rg=class{constructor(e){this.element=e,this.next=rg.Undefined,this.prev=rg.Undefined}},rg.Undefined=new rg(void 0),rg);class jr{constructor(){this._first=$s.Undefined,this._last=$s.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===$s.Undefined}clear(){let e=this._first;for(;e!==$s.Undefined;){const t=e.next;e.prev=$s.Undefined,e.next=$s.Undefined,e=t}this._first=$s.Undefined,this._last=$s.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){const i=new $s(e);if(this._first===$s.Undefined)this._first=i,this._last=i;else if(t){const s=this._last;this._last=i,i.prev=s,s.next=i}else{const s=this._first;this._first=i,i.next=s,s.prev=i}this._size+=1;let n=!1;return()=>{n||(n=!0,this._remove(i))}}shift(){if(this._first!==$s.Undefined){const e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==$s.Undefined){const e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==$s.Undefined&&e.next!==$s.Undefined){const t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===$s.Undefined&&e.next===$s.Undefined?(this._first=$s.Undefined,this._last=$s.Undefined):e.next===$s.Undefined?(this._last=this._last.prev,this._last.next=$s.Undefined):e.prev===$s.Undefined&&(this._first=this._first.next,this._first.prev=$s.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==$s.Undefined;)yield e.element,e=e.next}}const oA="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";function KLe(o=""){let e="(-?\\d*\\.\\d\\w*)|([^";for(const t of oA)o.indexOf(t)>=0||(e+="\\"+t);return e+="\\s]+)",new RegExp(e,"g")}const Lq=KLe();function xq(o){let e=Lq;if(o&&o instanceof RegExp)if(o.global)e=o;else{let t="g";o.ignoreCase&&(t+="i"),o.multiline&&(t+="m"),o.unicode&&(t+="u"),e=new RegExp(o.source,t)}return e.lastIndex=0,e}const Ele=new jr;Ele.unshift({maxLen:1e3,windowSize:15,timeBudget:150});function lD(o,e,t,i,n){if(e=xq(e),n||(n=ti.first(Ele)),t.length>n.maxLen){let c=o-n.maxLen/2;return c<0?c=0:i+=c,t=t.substring(c,o+n.maxLen/2),lD(o,e,t,i,n)}const s=Date.now(),r=o-1-i;let a=-1,l=null;for(let c=1;!(Date.now()-s>=n.timeBudget);c++){const u=r-n.windowSize*c;e.lastIndex=Math.max(0,u);const f=GLe(e,t,r,a);if(!f&&l||(l=f,u<=0))break;a=u}if(l){const c={word:l[0],startColumn:i+1+l.index,endColumn:i+1+l.index+l[0].length};return e.lastIndex=0,c}return null}function GLe(o,e,t,i){let n;for(;n=o.exec(e);){const s=n.index||0;if(s<=t&&o.lastIndex>=t)return n;if(i>0&&s>i)return null}return null}const Zu=8;class Ile{constructor(e){this._values=e}hasChanged(e){return this._values[e]}}class Tle{constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}}class Cn{constructor(e,t,i,n){this.id=e,this.name=t,this.defaultValue=i,this.schema=n}applyUpdate(e,t){return HF(e,t)}compute(e,t,i){return i}}class tk{constructor(e,t){this.newValue=e,this.didChange=t}}function HF(o,e){if(typeof o!="object"||typeof e!="object"||!o||!e)return new tk(e,o!==e);if(Array.isArray(o)||Array.isArray(e)){const i=Array.isArray(o)&&Array.isArray(e)&&En(o,e);return new tk(e,!i)}let t=!1;for(const i in e)if(e.hasOwnProperty(i)){const n=HF(o[i],e[i]);n.didChange&&(o[i]=n.newValue,t=!0)}return new tk(o,t)}class qE{constructor(e){this.schema=void 0,this.id=e,this.name="_never_",this.defaultValue=void 0}applyUpdate(e,t){return HF(e,t)}validate(e){return this.defaultValue}}class HS{constructor(e,t,i,n){this.id=e,this.name=t,this.defaultValue=i,this.schema=n}applyUpdate(e,t){return HF(e,t)}validate(e){return typeof e>"u"?this.defaultValue:e}compute(e,t,i){return i}}function tt(o,e){return typeof o>"u"?e:o==="false"?!1:!!o}class ci extends HS{constructor(e,t,i,n=void 0){typeof n<"u"&&(n.type="boolean",n.default=i),super(e,t,i,n)}validate(e){return tt(e,this.defaultValue)}}function iv(o,e,t,i){if(typeof o>"u")return e;let n=parseInt(o,10);return isNaN(n)?e:(n=Math.max(t,n),n=Math.min(i,n),n|0)}class Yi extends HS{static clampedInt(e,t,i,n){return iv(e,t,i,n)}constructor(e,t,i,n,s,r=void 0){typeof r<"u"&&(r.type="integer",r.default=i,r.minimum=n,r.maximum=s),super(e,t,i,r),this.minimum=n,this.maximum=s}validate(e){return Yi.clampedInt(e,this.defaultValue,this.minimum,this.maximum)}}function YLe(o,e,t,i){if(typeof o>"u")return e;const n=Ol.float(o,e);return Ol.clamp(n,t,i)}class Ol extends HS{static clamp(e,t,i){return e<t?t:e>i?i:e}static float(e,t){if(typeof e=="number")return e;if(typeof e>"u")return t;const i=parseFloat(e);return isNaN(i)?t:i}constructor(e,t,i,n,s){typeof s<"u"&&(s.type="number",s.default=i),super(e,t,i,s),this.validationFn=n}validate(e){return this.validationFn(Ol.float(e,this.defaultValue))}}class br extends HS{static string(e,t){return typeof e!="string"?t:e}constructor(e,t,i,n=void 0){typeof n<"u"&&(n.type="string",n.default=i),super(e,t,i,n)}validate(e){return br.string(e,this.defaultValue)}}function qn(o,e,t,i){return typeof o!="string"?e:i&&o in i?i[o]:t.indexOf(o)===-1?e:o}class jn extends HS{constructor(e,t,i,n,s=void 0){typeof s<"u"&&(s.type="string",s.enum=n,s.default=i),super(e,t,i,s),this._allowedValues=n}validate(e){return qn(e,this.defaultValue,this._allowedValues)}}class XN extends Cn{constructor(e,t,i,n,s,r,a=void 0){typeof a<"u"&&(a.type="string",a.enum=s,a.default=n),super(e,t,i,a),this._allowedValues=s,this._convert=r}validate(e){return typeof e!="string"?this.defaultValue:this._allowedValues.indexOf(e)===-1?this.defaultValue:this._convert(e)}}function ZLe(o){switch(o){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}}class XLe extends Cn{constructor(){super(2,"accessibilitySupport",0,{type:"string",enum:["auto","on","off"],enumDescriptions:[v("accessibilitySupport.auto","Use platform APIs to detect when a Screen Reader is attached."),v("accessibilitySupport.on","Optimize for usage with a Screen Reader."),v("accessibilitySupport.off","Assume a screen reader is not attached.")],default:"auto",tags:["accessibility"],description:v("accessibilitySupport","Controls if the UI should run in a mode where it is optimized for screen readers.")})}validate(e){switch(e){case"auto":return 0;case"off":return 1;case"on":return 2}return this.defaultValue}compute(e,t,i){return i===0?e.accessibilitySupport:i}}class QLe extends Cn{constructor(){const e={insertSpace:!0,ignoreEmptyLines:!0};super(23,"comments",e,{"editor.comments.insertSpace":{type:"boolean",default:e.insertSpace,description:v("comments.insertSpace","Controls whether a space character is inserted when commenting.")},"editor.comments.ignoreEmptyLines":{type:"boolean",default:e.ignoreEmptyLines,description:v("comments.ignoreEmptyLines","Controls if empty lines should be ignored with toggle, add or remove actions for line comments.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertSpace:tt(t.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:tt(t.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}}function JLe(o){switch(o){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}}var _o;(function(o){o[o.Line=1]="Line",o[o.Block=2]="Block",o[o.Underline=3]="Underline",o[o.LineThin=4]="LineThin",o[o.BlockOutline=5]="BlockOutline",o[o.UnderlineThin=6]="UnderlineThin"})(_o||(_o={}));function exe(o){switch(o){case"line":return _o.Line;case"block":return _o.Block;case"underline":return _o.Underline;case"line-thin":return _o.LineThin;case"block-outline":return _o.BlockOutline;case"underline-thin":return _o.UnderlineThin}}class txe extends qE{constructor(){super(143)}compute(e,t,i){const n=["monaco-editor"];return t.get(39)&&n.push(t.get(39)),e.extraEditorClassName&&n.push(e.extraEditorClassName),t.get(74)==="default"?n.push("mouse-default"):t.get(74)==="copy"&&n.push("mouse-copy"),t.get(112)&&n.push("showUnused"),t.get(141)&&n.push("showDeprecated"),n.join(" ")}}class ixe extends ci{constructor(){super(37,"emptySelectionClipboard",!0,{description:v("emptySelectionClipboard","Controls whether copying without a selection copies the current line.")})}compute(e,t,i){return i&&e.emptySelectionClipboard}}class nxe extends Cn{constructor(){const e={cursorMoveOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0};super(41,"find",e,{"editor.find.cursorMoveOnType":{type:"boolean",default:e.cursorMoveOnType,description:v("find.cursorMoveOnType","Controls whether the cursor should jump to find matches while typing.")},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:e.seedSearchStringFromSelection,enumDescriptions:[v("editor.find.seedSearchStringFromSelection.never","Never seed search string from the editor selection."),v("editor.find.seedSearchStringFromSelection.always","Always seed search string from the editor selection, including word at cursor position."),v("editor.find.seedSearchStringFromSelection.selection","Only seed search string from the editor selection.")],description:v("find.seedSearchStringFromSelection","Controls whether the search string in the Find Widget is seeded from the editor selection.")},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:e.autoFindInSelection,enumDescriptions:[v("editor.find.autoFindInSelection.never","Never turn on Find in Selection automatically (default)."),v("editor.find.autoFindInSelection.always","Always turn on Find in Selection automatically."),v("editor.find.autoFindInSelection.multiline","Turn on Find in Selection automatically when multiple lines of content are selected.")],description:v("find.autoFindInSelection","Controls the condition for turning on Find in Selection automatically.")},"editor.find.globalFindClipboard":{type:"boolean",default:e.globalFindClipboard,description:v("find.globalFindClipboard","Controls whether the Find Widget should read or modify the shared find clipboard on macOS."),included:Kt},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:e.addExtraSpaceOnTop,description:v("find.addExtraSpaceOnTop","Controls whether the Find Widget should add extra lines on top of the editor. When true, you can scroll beyond the first line when the Find Widget is visible.")},"editor.find.loop":{type:"boolean",default:e.loop,description:v("find.loop","Controls whether the search automatically restarts from the beginning (or the end) when no further matches can be found.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{cursorMoveOnType:tt(t.cursorMoveOnType,this.defaultValue.cursorMoveOnType),seedSearchStringFromSelection:typeof e.seedSearchStringFromSelection=="boolean"?e.seedSearchStringFromSelection?"always":"never":qn(t.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:typeof e.autoFindInSelection=="boolean"?e.autoFindInSelection?"always":"never":qn(t.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:tt(t.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:tt(t.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:tt(t.loop,this.defaultValue.loop)}}}const Af=class Af extends Cn{constructor(){super(51,"fontLigatures",Af.OFF,{anyOf:[{type:"boolean",description:v("fontLigatures","Enables/Disables font ligatures ('calt' and 'liga' font features). Change this to a string for fine-grained control of the 'font-feature-settings' CSS property.")},{type:"string",description:v("fontFeatureSettings","Explicit 'font-feature-settings' CSS property. A boolean can be passed instead if one only needs to turn on/off ligatures.")}],description:v("fontLigaturesGeneral","Configures font ligatures or font features. Can be either a boolean to enable/disable ligatures or a string for the value of the CSS 'font-feature-settings' property."),default:!1})}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e==="false"||e.length===0?Af.OFF:e==="true"?Af.ON:e:e?Af.ON:Af.OFF}};Af.OFF='"liga" off, "calt" off',Af.ON='"liga" on, "calt" on';let Mm=Af;const Pf=class Pf extends Cn{constructor(){super(54,"fontVariations",Pf.OFF,{anyOf:[{type:"boolean",description:v("fontVariations","Enables/Disables the translation from font-weight to font-variation-settings. Change this to a string for fine-grained control of the 'font-variation-settings' CSS property.")},{type:"string",description:v("fontVariationSettings","Explicit 'font-variation-settings' CSS property. A boolean can be passed instead if one only needs to translate font-weight to font-variation-settings.")}],description:v("fontVariationsGeneral","Configures font variations. Can be either a boolean to enable/disable the translation from font-weight to font-variation-settings or a string for the value of the CSS 'font-variation-settings' property."),default:!1})}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e==="false"?Pf.OFF:e==="true"?Pf.TRANSLATE:e:e?Pf.TRANSLATE:Pf.OFF}compute(e,t,i){return e.fontInfo.fontVariationSettings}};Pf.OFF="normal",Pf.TRANSLATE="translate";let cD=Pf;class sxe extends qE{constructor(){super(50)}compute(e,t,i){return e.fontInfo}}class oxe extends HS{constructor(){super(52,"fontSize",Zr.fontSize,{type:"number",minimum:6,maximum:100,default:Zr.fontSize,description:v("fontSize","Controls the font size in pixels.")})}validate(e){const t=Ol.float(e,this.defaultValue);return t===0?Zr.fontSize:Ol.clamp(t,6,100)}compute(e,t,i){return e.fontInfo.fontSize}}const ih=class ih extends Cn{constructor(){super(53,"fontWeight",Zr.fontWeight,{anyOf:[{type:"number",minimum:ih.MINIMUM_VALUE,maximum:ih.MAXIMUM_VALUE,errorMessage:v("fontWeightErrorMessage",'Only "normal" and "bold" keywords or numbers between 1 and 1000 are allowed.')},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:ih.SUGGESTION_VALUES}],default:Zr.fontWeight,description:v("fontWeight",'Controls the font weight. Accepts "normal" and "bold" keywords or numbers between 1 and 1000.')})}validate(e){return e==="normal"||e==="bold"?e:String(Yi.clampedInt(e,Zr.fontWeight,ih.MINIMUM_VALUE,ih.MAXIMUM_VALUE))}};ih.SUGGESTION_VALUES=["normal","bold","100","200","300","400","500","600","700","800","900"],ih.MINIMUM_VALUE=1,ih.MAXIMUM_VALUE=1e3;let G9=ih;class rxe extends Cn{constructor(){const e={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",multipleTests:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:"",alternativeTestsCommand:""},t={type:"string",enum:["peek","gotoAndPeek","goto"],default:e.multiple,enumDescriptions:[v("editor.gotoLocation.multiple.peek","Show Peek view of the results (default)"),v("editor.gotoLocation.multiple.gotoAndPeek","Go to the primary result and show a Peek view"),v("editor.gotoLocation.multiple.goto","Go to the primary result and enable Peek-less navigation to others")]},i=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(58,"gotoLocation",e,{"editor.gotoLocation.multiple":{deprecationMessage:v("editor.gotoLocation.multiple.deprecated","This setting is deprecated, please use separate settings like 'editor.editor.gotoLocation.multipleDefinitions' or 'editor.editor.gotoLocation.multipleImplementations' instead.")},"editor.gotoLocation.multipleDefinitions":{description:v("editor.editor.gotoLocation.multipleDefinitions","Controls the behavior the 'Go to Definition'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleTypeDefinitions":{description:v("editor.editor.gotoLocation.multipleTypeDefinitions","Controls the behavior the 'Go to Type Definition'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleDeclarations":{description:v("editor.editor.gotoLocation.multipleDeclarations","Controls the behavior the 'Go to Declaration'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleImplementations":{description:v("editor.editor.gotoLocation.multipleImplemenattions","Controls the behavior the 'Go to Implementations'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleReferences":{description:v("editor.editor.gotoLocation.multipleReferences","Controls the behavior the 'Go to References'-command when multiple target locations exist."),...t},"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:e.alternativeDefinitionCommand,enum:i,description:v("alternativeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Definition' is the current location.")},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:e.alternativeTypeDefinitionCommand,enum:i,description:v("alternativeTypeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Type Definition' is the current location.")},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:e.alternativeDeclarationCommand,enum:i,description:v("alternativeDeclarationCommand","Alternative command id that is being executed when the result of 'Go to Declaration' is the current location.")},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:e.alternativeImplementationCommand,enum:i,description:v("alternativeImplementationCommand","Alternative command id that is being executed when the result of 'Go to Implementation' is the current location.")},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:e.alternativeReferenceCommand,enum:i,description:v("alternativeReferenceCommand","Alternative command id that is being executed when the result of 'Go to Reference' is the current location.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{multiple:qn(t.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:t.multipleDefinitions??qn(t.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:t.multipleTypeDefinitions??qn(t.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:t.multipleDeclarations??qn(t.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:t.multipleImplementations??qn(t.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:t.multipleReferences??qn(t.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),multipleTests:t.multipleTests??qn(t.multipleTests,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:br.string(t.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:br.string(t.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:br.string(t.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:br.string(t.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:br.string(t.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand),alternativeTestsCommand:br.string(t.alternativeTestsCommand,this.defaultValue.alternativeTestsCommand)}}}class axe extends Cn{constructor(){const e={enabled:!0,delay:300,hidingDelay:300,sticky:!0,above:!0};super(60,"hover",e,{"editor.hover.enabled":{type:"boolean",default:e.enabled,description:v("hover.enabled","Controls whether the hover is shown.")},"editor.hover.delay":{type:"number",default:e.delay,minimum:0,maximum:1e4,description:v("hover.delay","Controls the delay in milliseconds after which the hover is shown.")},"editor.hover.sticky":{type:"boolean",default:e.sticky,description:v("hover.sticky","Controls whether the hover should remain visible when mouse is moved over it.")},"editor.hover.hidingDelay":{type:"integer",minimum:0,default:e.hidingDelay,description:v("hover.hidingDelay","Controls the delay in milliseconds after which the hover is hidden. Requires `editor.hover.sticky` to be enabled.")},"editor.hover.above":{type:"boolean",default:e.above,description:v("hover.above","Prefer showing hovers above the line, if there's space.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:tt(t.enabled,this.defaultValue.enabled),delay:Yi.clampedInt(t.delay,this.defaultValue.delay,0,1e4),sticky:tt(t.sticky,this.defaultValue.sticky),hidingDelay:Yi.clampedInt(t.hidingDelay,this.defaultValue.hidingDelay,0,6e5),above:tt(t.above,this.defaultValue.above)}}}class f1 extends qE{constructor(){super(146)}compute(e,t,i){return f1.computeLayout(t,{memory:e.memory,outerWidth:e.outerWidth,outerHeight:e.outerHeight,isDominatedByLongLines:e.isDominatedByLongLines,lineHeight:e.fontInfo.lineHeight,viewLineCount:e.viewLineCount,lineNumbersDigitCount:e.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:e.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:e.fontInfo.maxDigitWidth,pixelRatio:e.pixelRatio,glyphMarginDecorationLaneCount:e.glyphMarginDecorationLaneCount})}static computeContainedMinimapLineCount(e){const t=e.height/e.lineHeight,i=Math.floor(e.paddingTop/e.lineHeight);let n=Math.floor(e.paddingBottom/e.lineHeight);e.scrollBeyondLastLine&&(n=Math.max(n,t-1));const s=(i+e.viewLineCount+n)/(e.pixelRatio*e.height),r=Math.floor(e.viewLineCount/s);return{typicalViewportLineCount:t,extraLinesBeforeFirstLine:i,extraLinesBeyondLastLine:n,desiredRatio:s,minimapLineCount:r}}static _computeMinimapLayout(e,t){const i=e.outerWidth,n=e.outerHeight,s=e.pixelRatio;if(!e.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(s*n),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:n};const r=t.stableMinimapLayoutInput,a=r&&e.outerHeight===r.outerHeight&&e.lineHeight===r.lineHeight&&e.typicalHalfwidthCharacterWidth===r.typicalHalfwidthCharacterWidth&&e.pixelRatio===r.pixelRatio&&e.scrollBeyondLastLine===r.scrollBeyondLastLine&&e.paddingTop===r.paddingTop&&e.paddingBottom===r.paddingBottom&&e.minimap.enabled===r.minimap.enabled&&e.minimap.side===r.minimap.side&&e.minimap.size===r.minimap.size&&e.minimap.showSlider===r.minimap.showSlider&&e.minimap.renderCharacters===r.minimap.renderCharacters&&e.minimap.maxColumn===r.minimap.maxColumn&&e.minimap.scale===r.minimap.scale&&e.verticalScrollbarWidth===r.verticalScrollbarWidth&&e.isViewportWrapping===r.isViewportWrapping,l=e.lineHeight,c=e.typicalHalfwidthCharacterWidth,u=e.scrollBeyondLastLine,f=e.minimap.renderCharacters;let g=s>=2?Math.round(e.minimap.scale*2):e.minimap.scale;const p=e.minimap.maxColumn,_=e.minimap.size,b=e.minimap.side,y=e.verticalScrollbarWidth,S=e.viewLineCount,L=e.remainingWidth,x=e.isViewportWrapping,k=f?2:3;let E=Math.floor(s*n);const N=E/s;let A=!1,P=!1,H=k*g,ee=g/s,Q=1;if(_==="fill"||_==="fit"){const{typicalViewportLineCount:me,extraLinesBeforeFirstLine:pe,extraLinesBeyondLastLine:Fe,desiredRatio:Ye,minimapLineCount:Ut}=f1.computeContainedMinimapLineCount({viewLineCount:S,scrollBeyondLastLine:u,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,height:n,lineHeight:l,pixelRatio:s});if(S/Ut>1)A=!0,P=!0,g=1,H=1,ee=g/s;else{let Ot=!1,Bi=g+1;if(_==="fit"){const Qi=Math.ceil((pe+S+Fe)*H);x&&a&&L<=t.stableFitRemainingWidth?(Ot=!0,Bi=t.stableFitMaxMinimapScale):Ot=Qi>E}if(_==="fill"||Ot){A=!0;const Qi=g;H=Math.min(l*s,Math.max(1,Math.floor(1/Ye))),x&&a&&L<=t.stableFitRemainingWidth&&(Bi=t.stableFitMaxMinimapScale),g=Math.min(Bi,Math.max(1,Math.floor(H/k))),g>Qi&&(Q=Math.min(2,g/Qi)),ee=g/s/Q,E=Math.ceil(Math.max(me,pe+S+Fe)*H),x?(t.stableMinimapLayoutInput=e,t.stableFitRemainingWidth=L,t.stableFitMaxMinimapScale=g):(t.stableMinimapLayoutInput=null,t.stableFitRemainingWidth=0)}}}const te=Math.floor(p*ee),J=Math.min(te,Math.max(0,Math.floor((L-y-2)*ee/(c+ee)))+Zu);let Z=Math.floor(s*J);const he=Z/s;Z=Math.floor(Z*Q);const Ce=f?1:2,we=b==="left"?0:i-J-y;return{renderMinimap:Ce,minimapLeft:we,minimapWidth:J,minimapHeightIsEditorHeight:A,minimapIsSampling:P,minimapScale:g,minimapLineHeight:H,minimapCanvasInnerWidth:Z,minimapCanvasInnerHeight:E,minimapCanvasOuterWidth:he,minimapCanvasOuterHeight:N}}static computeLayout(e,t){const i=t.outerWidth|0,n=t.outerHeight|0,s=t.lineHeight|0,r=t.lineNumbersDigitCount|0,a=t.typicalHalfwidthCharacterWidth,l=t.maxDigitWidth,c=t.pixelRatio,u=t.viewLineCount,f=e.get(138),g=f==="inherit"?e.get(137):f,p=g==="inherit"?e.get(133):g,_=e.get(136),b=t.isDominatedByLongLines,y=e.get(57),S=e.get(68).renderType!==0,L=e.get(69),x=e.get(106),k=e.get(84),E=e.get(73),N=e.get(104),A=N.verticalScrollbarSize,P=N.verticalHasArrows,H=N.arrowSize,ee=N.horizontalScrollbarSize,Q=e.get(43),te=e.get(111)!=="never";let J=e.get(66);Q&&te&&(J+=16);let Z=0;if(S){const Qn=Math.max(r,L);Z=Math.round(Qn*l)}let he=0;y&&(he=s*t.glyphMarginDecorationLaneCount);let Ce=0,we=Ce+he,me=we+Z,pe=me+J;const Fe=i-he-Z-J;let Ye=!1,Ut=!1,dt=-1;g==="inherit"&&b?(Ye=!0,Ut=!0):p==="on"||p==="bounded"?Ut=!0:p==="wordWrapColumn"&&(dt=_);const Ot=f1._computeMinimapLayout({outerWidth:i,outerHeight:n,lineHeight:s,typicalHalfwidthCharacterWidth:a,pixelRatio:c,scrollBeyondLastLine:x,paddingTop:k.top,paddingBottom:k.bottom,minimap:E,verticalScrollbarWidth:A,viewLineCount:u,remainingWidth:Fe,isViewportWrapping:Ut},t.memory||new Tle);Ot.renderMinimap!==0&&Ot.minimapLeft===0&&(Ce+=Ot.minimapWidth,we+=Ot.minimapWidth,me+=Ot.minimapWidth,pe+=Ot.minimapWidth);const Bi=Fe-Ot.minimapWidth,Qi=Math.max(1,Math.floor((Bi-A-2)/a)),Xn=P?H:0;return Ut&&(dt=Math.max(1,Qi),p==="bounded"&&(dt=Math.min(dt,_))),{width:i,height:n,glyphMarginLeft:Ce,glyphMarginWidth:he,glyphMarginDecorationLaneCount:t.glyphMarginDecorationLaneCount,lineNumbersLeft:we,lineNumbersWidth:Z,decorationsLeft:me,decorationsWidth:J,contentLeft:pe,contentWidth:Bi,minimap:Ot,viewportColumn:Qi,isWordWrapMinified:Ye,isViewportWrapping:Ut,wrappingColumn:dt,verticalScrollbarWidth:A,horizontalScrollbarHeight:ee,overviewRuler:{top:Xn,width:A,height:n-2*Xn,right:0}}}}class lxe extends Cn{constructor(){super(140,"wrappingStrategy","simple",{"editor.wrappingStrategy":{enumDescriptions:[v("wrappingStrategy.simple","Assumes that all characters are of the same width. This is a fast algorithm that works correctly for monospace fonts and certain scripts (like Latin characters) where glyphs are of equal width."),v("wrappingStrategy.advanced","Delegates wrapping points computation to the browser. This is a slow algorithm, that might cause freezes for large files, but it works correctly in all cases.")],type:"string",enum:["simple","advanced"],default:"simple",description:v("wrappingStrategy","Controls the algorithm that computes wrapping points. Note that when in accessibility mode, advanced will be used for the best experience.")}})}validate(e){return qn(e,"simple",["simple","advanced"])}compute(e,t,i){return t.get(2)===2?"advanced":i}}var Zc;(function(o){o.Off="off",o.OnCode="onCode",o.On="on"})(Zc||(Zc={}));class cxe extends Cn{constructor(){const e={enabled:Zc.OnCode};super(65,"lightbulb",e,{"editor.lightbulb.enabled":{type:"string",tags:["experimental"],enum:[Zc.Off,Zc.OnCode,Zc.On],default:e.enabled,enumDescriptions:[v("editor.lightbulb.enabled.off","Disable the code action menu."),v("editor.lightbulb.enabled.onCode","Show the code action menu when the cursor is on lines with code."),v("editor.lightbulb.enabled.on","Show the code action menu when the cursor is on lines with code or on empty lines.")],description:v("enabled","Enables the Code Action lightbulb in the editor.")}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:qn(e.enabled,this.defaultValue.enabled,[Zc.Off,Zc.OnCode,Zc.On])}}}class dxe extends Cn{constructor(){const e={enabled:!0,maxLineCount:5,defaultModel:"outlineModel",scrollWithEditor:!0};super(116,"stickyScroll",e,{"editor.stickyScroll.enabled":{type:"boolean",default:e.enabled,description:v("editor.stickyScroll.enabled","Shows the nested current scopes during the scroll at the top of the editor."),tags:["experimental"]},"editor.stickyScroll.maxLineCount":{type:"number",default:e.maxLineCount,minimum:1,maximum:20,description:v("editor.stickyScroll.maxLineCount","Defines the maximum number of sticky lines to show.")},"editor.stickyScroll.defaultModel":{type:"string",enum:["outlineModel","foldingProviderModel","indentationModel"],default:e.defaultModel,description:v("editor.stickyScroll.defaultModel","Defines the model to use for determining which lines to stick. If the outline model does not exist, it will fall back on the folding provider model which falls back on the indentation model. This order is respected in all three cases.")},"editor.stickyScroll.scrollWithEditor":{type:"boolean",default:e.scrollWithEditor,description:v("editor.stickyScroll.scrollWithEditor","Enable scrolling of Sticky Scroll with the editor's horizontal scrollbar.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:tt(t.enabled,this.defaultValue.enabled),maxLineCount:Yi.clampedInt(t.maxLineCount,this.defaultValue.maxLineCount,1,20),defaultModel:qn(t.defaultModel,this.defaultValue.defaultModel,["outlineModel","foldingProviderModel","indentationModel"]),scrollWithEditor:tt(t.scrollWithEditor,this.defaultValue.scrollWithEditor)}}}class uxe extends Cn{constructor(){const e={enabled:"on",fontSize:0,fontFamily:"",padding:!1};super(142,"inlayHints",e,{"editor.inlayHints.enabled":{type:"string",default:e.enabled,description:v("inlayHints.enable","Enables the inlay hints in the editor."),enum:["on","onUnlessPressed","offUnlessPressed","off"],markdownEnumDescriptions:[v("editor.inlayHints.on","Inlay hints are enabled"),v("editor.inlayHints.onUnlessPressed","Inlay hints are showing by default and hide when holding {0}",Kt?"Ctrl+Option":"Ctrl+Alt"),v("editor.inlayHints.offUnlessPressed","Inlay hints are hidden by default and show when holding {0}",Kt?"Ctrl+Option":"Ctrl+Alt"),v("editor.inlayHints.off","Inlay hints are disabled")]},"editor.inlayHints.fontSize":{type:"number",default:e.fontSize,markdownDescription:v("inlayHints.fontSize","Controls font size of inlay hints in the editor. As default the {0} is used when the configured value is less than {1} or greater than the editor font size.","`#editor.fontSize#`","`5`")},"editor.inlayHints.fontFamily":{type:"string",default:e.fontFamily,markdownDescription:v("inlayHints.fontFamily","Controls font family of inlay hints in the editor. When set to empty, the {0} is used.","`#editor.fontFamily#`")},"editor.inlayHints.padding":{type:"boolean",default:e.padding,description:v("inlayHints.padding","Enables the padding around the inlay hints in the editor.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return typeof t.enabled=="boolean"&&(t.enabled=t.enabled?"on":"off"),{enabled:qn(t.enabled,this.defaultValue.enabled,["on","off","offUnlessPressed","onUnlessPressed"]),fontSize:Yi.clampedInt(t.fontSize,this.defaultValue.fontSize,0,100),fontFamily:br.string(t.fontFamily,this.defaultValue.fontFamily),padding:tt(t.padding,this.defaultValue.padding)}}}class hxe extends Cn{constructor(){super(66,"lineDecorationsWidth",10)}validate(e){return typeof e=="string"&&/^\d+(\.\d+)?ch$/.test(e)?-parseFloat(e.substring(0,e.length-2)):Yi.clampedInt(e,this.defaultValue,0,1e3)}compute(e,t,i){return i<0?Yi.clampedInt(-i*e.fontInfo.typicalHalfwidthCharacterWidth,this.defaultValue,0,1e3):i}}class fxe extends Ol{constructor(){super(67,"lineHeight",Zr.lineHeight,e=>Ol.clamp(e,0,150),{markdownDescription:v("lineHeight",`Controls the line height. 
 - Use 0 to automatically compute the line height from the font size.
 - Values between 0 and 8 will be used as a multiplier with the font size.
 - Values greater than or equal to 8 will be used as effective values.`)})}compute(e,t,i){return e.fontInfo.lineHeight}}class gxe extends Cn{constructor(){const e={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",autohide:!1,renderCharacters:!0,maxColumn:120,scale:1,showRegionSectionHeaders:!0,showMarkSectionHeaders:!0,sectionHeaderFontSize:9,sectionHeaderLetterSpacing:1};super(73,"minimap",e,{"editor.minimap.enabled":{type:"boolean",default:e.enabled,description:v("minimap.enabled","Controls whether the minimap is shown.")},"editor.minimap.autohide":{type:"boolean",default:e.autohide,description:v("minimap.autohide","Controls whether the minimap is hidden automatically.")},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[v("minimap.size.proportional","The minimap has the same size as the editor contents (and might scroll)."),v("minimap.size.fill","The minimap will stretch or shrink as necessary to fill the height of the editor (no scrolling)."),v("minimap.size.fit","The minimap will shrink as necessary to never be larger than the editor (no scrolling).")],default:e.size,description:v("minimap.size","Controls the size of the minimap.")},"editor.minimap.side":{type:"string",enum:["left","right"],default:e.side,description:v("minimap.side","Controls the side where to render the minimap.")},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:e.showSlider,description:v("minimap.showSlider","Controls when the minimap slider is shown.")},"editor.minimap.scale":{type:"number",default:e.scale,minimum:1,maximum:3,enum:[1,2,3],description:v("minimap.scale","Scale of content drawn in the minimap: 1, 2 or 3.")},"editor.minimap.renderCharacters":{type:"boolean",default:e.renderCharacters,description:v("minimap.renderCharacters","Render the actual characters on a line as opposed to color blocks.")},"editor.minimap.maxColumn":{type:"number",default:e.maxColumn,description:v("minimap.maxColumn","Limit the width of the minimap to render at most a certain number of columns.")},"editor.minimap.showRegionSectionHeaders":{type:"boolean",default:e.showRegionSectionHeaders,description:v("minimap.showRegionSectionHeaders","Controls whether named regions are shown as section headers in the minimap.")},"editor.minimap.showMarkSectionHeaders":{type:"boolean",default:e.showMarkSectionHeaders,description:v("minimap.showMarkSectionHeaders","Controls whether MARK: comments are shown as section headers in the minimap.")},"editor.minimap.sectionHeaderFontSize":{type:"number",default:e.sectionHeaderFontSize,description:v("minimap.sectionHeaderFontSize","Controls the font size of section headers in the minimap.")},"editor.minimap.sectionHeaderLetterSpacing":{type:"number",default:e.sectionHeaderLetterSpacing,description:v("minimap.sectionHeaderLetterSpacing","Controls the amount of space (in pixels) between characters of section header. This helps the readability of the header in small font sizes.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:tt(t.enabled,this.defaultValue.enabled),autohide:tt(t.autohide,this.defaultValue.autohide),size:qn(t.size,this.defaultValue.size,["proportional","fill","fit"]),side:qn(t.side,this.defaultValue.side,["right","left"]),showSlider:qn(t.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:tt(t.renderCharacters,this.defaultValue.renderCharacters),scale:Yi.clampedInt(t.scale,1,1,3),maxColumn:Yi.clampedInt(t.maxColumn,this.defaultValue.maxColumn,1,1e4),showRegionSectionHeaders:tt(t.showRegionSectionHeaders,this.defaultValue.showRegionSectionHeaders),showMarkSectionHeaders:tt(t.showMarkSectionHeaders,this.defaultValue.showMarkSectionHeaders),sectionHeaderFontSize:Ol.clamp(t.sectionHeaderFontSize??this.defaultValue.sectionHeaderFontSize,4,32),sectionHeaderLetterSpacing:Ol.clamp(t.sectionHeaderLetterSpacing??this.defaultValue.sectionHeaderLetterSpacing,0,5)}}}function pxe(o){return o==="ctrlCmd"?Kt?"metaKey":"ctrlKey":"altKey"}class mxe extends Cn{constructor(){super(84,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:v("padding.top","Controls the amount of space between the top edge of the editor and the first line.")},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:v("padding.bottom","Controls the amount of space between the bottom edge of the editor and the last line.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{top:Yi.clampedInt(t.top,0,0,1e3),bottom:Yi.clampedInt(t.bottom,0,0,1e3)}}}class _xe extends Cn{constructor(){const e={enabled:!0,cycle:!0};super(86,"parameterHints",e,{"editor.parameterHints.enabled":{type:"boolean",default:e.enabled,description:v("parameterHints.enabled","Enables a pop-up that shows parameter documentation and type information as you type.")},"editor.parameterHints.cycle":{type:"boolean",default:e.cycle,description:v("parameterHints.cycle","Controls whether the parameter hints menu cycles or closes when reaching the end of the list.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:tt(t.enabled,this.defaultValue.enabled),cycle:tt(t.cycle,this.defaultValue.cycle)}}}class vxe extends qE{constructor(){super(144)}compute(e,t,i){return e.pixelRatio}}class bxe extends Cn{constructor(){super(88,"placeholder",void 0)}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e:this.defaultValue}}class Cxe extends Cn{constructor(){const e={other:"on",comments:"off",strings:"off"},t=[{type:"boolean"},{type:"string",enum:["on","inline","off"],enumDescriptions:[v("on","Quick suggestions show inside the suggest widget"),v("inline","Quick suggestions show as ghost text"),v("off","Quick suggestions are disabled")]}];super(90,"quickSuggestions",e,{type:"object",additionalProperties:!1,properties:{strings:{anyOf:t,default:e.strings,description:v("quickSuggestions.strings","Enable quick suggestions inside strings.")},comments:{anyOf:t,default:e.comments,description:v("quickSuggestions.comments","Enable quick suggestions inside comments.")},other:{anyOf:t,default:e.other,description:v("quickSuggestions.other","Enable quick suggestions outside of strings and comments.")}},default:e,markdownDescription:v("quickSuggestions","Controls whether suggestions should automatically show up while typing. This can be controlled for typing in comments, strings, and other code. Quick suggestion can be configured to show as ghost text or with the suggest widget. Also be aware of the {0}-setting which controls if suggestions are triggered by special characters.","`#editor.suggestOnTriggerCharacters#`")}),this.defaultValue=e}validate(e){if(typeof e=="boolean"){const c=e?"on":"off";return{comments:c,strings:c,other:c}}if(!e||typeof e!="object")return this.defaultValue;const{other:t,comments:i,strings:n}=e,s=["on","inline","off"];let r,a,l;return typeof t=="boolean"?r=t?"on":"off":r=qn(t,this.defaultValue.other,s),typeof i=="boolean"?a=i?"on":"off":a=qn(i,this.defaultValue.comments,s),typeof n=="boolean"?l=n?"on":"off":l=qn(n,this.defaultValue.strings,s),{other:r,comments:a,strings:l}}}class yxe extends Cn{constructor(){super(68,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[v("lineNumbers.off","Line numbers are not rendered."),v("lineNumbers.on","Line numbers are rendered as absolute number."),v("lineNumbers.relative","Line numbers are rendered as distance in lines to cursor position."),v("lineNumbers.interval","Line numbers are rendered every 10 lines.")],default:"on",description:v("lineNumbers","Controls the display of line numbers.")})}validate(e){let t=this.defaultValue.renderType,i=this.defaultValue.renderFn;return typeof e<"u"&&(typeof e=="function"?(t=4,i=e):e==="interval"?t=3:e==="relative"?t=2:e==="on"?t=1:t=0),{renderType:t,renderFn:i}}}function rA(o){const e=o.get(99);return e==="editable"?o.get(92):e!=="on"}class wxe extends Cn{constructor(){const e=[],t={type:"number",description:v("rulers.size","Number of monospace characters at which this editor ruler will render.")};super(103,"rulers",e,{type:"array",items:{anyOf:[t,{type:["object"],properties:{column:t,color:{type:"string",description:v("rulers.color","Color of this editor ruler."),format:"color-hex"}}}]},default:e,description:v("rulers","Render vertical rulers after a certain number of monospace characters. Use multiple values for multiple rulers. No rulers are drawn if array is empty.")})}validate(e){if(Array.isArray(e)){const t=[];for(const i of e)if(typeof i=="number")t.push({column:Yi.clampedInt(i,0,0,1e4),color:null});else if(i&&typeof i=="object"){const n=i;t.push({column:Yi.clampedInt(n.column,0,0,1e4),color:n.color})}return t.sort((i,n)=>i.column-n.column),t}return this.defaultValue}}class Sxe extends Cn{constructor(){super(93,"readOnlyMessage",void 0)}validate(e){return!e||typeof e!="object"?this.defaultValue:e}}function Rte(o,e){if(typeof o!="string")return e;switch(o){case"hidden":return 2;case"visible":return 3;default:return 1}}let Lxe=class extends Cn{constructor(){const e={vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1,ignoreHorizontalScrollbarInContentHeight:!1};super(104,"scrollbar",e,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[v("scrollbar.vertical.auto","The vertical scrollbar will be visible only when necessary."),v("scrollbar.vertical.visible","The vertical scrollbar will always be visible."),v("scrollbar.vertical.fit","The vertical scrollbar will always be hidden.")],default:"auto",description:v("scrollbar.vertical","Controls the visibility of the vertical scrollbar.")},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[v("scrollbar.horizontal.auto","The horizontal scrollbar will be visible only when necessary."),v("scrollbar.horizontal.visible","The horizontal scrollbar will always be visible."),v("scrollbar.horizontal.fit","The horizontal scrollbar will always be hidden.")],default:"auto",description:v("scrollbar.horizontal","Controls the visibility of the horizontal scrollbar.")},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:e.verticalScrollbarSize,description:v("scrollbar.verticalScrollbarSize","The width of the vertical scrollbar.")},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:e.horizontalScrollbarSize,description:v("scrollbar.horizontalScrollbarSize","The height of the horizontal scrollbar.")},"editor.scrollbar.scrollByPage":{type:"boolean",default:e.scrollByPage,description:v("scrollbar.scrollByPage","Controls whether clicks scroll by page or jump to click position.")},"editor.scrollbar.ignoreHorizontalScrollbarInContentHeight":{type:"boolean",default:e.ignoreHorizontalScrollbarInContentHeight,description:v("scrollbar.ignoreHorizontalScrollbarInContentHeight","When set, the horizontal scrollbar will not increase the size of the editor's content.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e,i=Yi.clampedInt(t.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),n=Yi.clampedInt(t.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:Yi.clampedInt(t.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:Rte(t.vertical,this.defaultValue.vertical),horizontal:Rte(t.horizontal,this.defaultValue.horizontal),useShadows:tt(t.useShadows,this.defaultValue.useShadows),verticalHasArrows:tt(t.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:tt(t.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:tt(t.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:tt(t.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:i,horizontalSliderSize:Yi.clampedInt(t.horizontalSliderSize,i,0,1e3),verticalScrollbarSize:n,verticalSliderSize:Yi.clampedInt(t.verticalSliderSize,n,0,1e3),scrollByPage:tt(t.scrollByPage,this.defaultValue.scrollByPage),ignoreHorizontalScrollbarInContentHeight:tt(t.ignoreHorizontalScrollbarInContentHeight,this.defaultValue.ignoreHorizontalScrollbarInContentHeight)}}};const xl="inUntrustedWorkspace",Ca={allowedCharacters:"editor.unicodeHighlight.allowedCharacters",invisibleCharacters:"editor.unicodeHighlight.invisibleCharacters",nonBasicASCII:"editor.unicodeHighlight.nonBasicASCII",ambiguousCharacters:"editor.unicodeHighlight.ambiguousCharacters",includeComments:"editor.unicodeHighlight.includeComments",includeStrings:"editor.unicodeHighlight.includeStrings",allowedLocales:"editor.unicodeHighlight.allowedLocales"};class xxe extends Cn{constructor(){const e={nonBasicASCII:xl,invisibleCharacters:!0,ambiguousCharacters:!0,includeComments:xl,includeStrings:!0,allowedCharacters:{},allowedLocales:{_os:!0,_vscode:!0}};super(126,"unicodeHighlight",e,{[Ca.nonBasicASCII]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,xl],default:e.nonBasicASCII,description:v("unicodeHighlight.nonBasicASCII","Controls whether all non-basic ASCII characters are highlighted. Only characters between U+0020 and U+007E, tab, line-feed and carriage-return are considered basic ASCII.")},[Ca.invisibleCharacters]:{restricted:!0,type:"boolean",default:e.invisibleCharacters,description:v("unicodeHighlight.invisibleCharacters","Controls whether characters that just reserve space or have no width at all are highlighted.")},[Ca.ambiguousCharacters]:{restricted:!0,type:"boolean",default:e.ambiguousCharacters,description:v("unicodeHighlight.ambiguousCharacters","Controls whether characters are highlighted that can be confused with basic ASCII characters, except those that are common in the current user locale.")},[Ca.includeComments]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,xl],default:e.includeComments,description:v("unicodeHighlight.includeComments","Controls whether characters in comments should also be subject to Unicode highlighting.")},[Ca.includeStrings]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,xl],default:e.includeStrings,description:v("unicodeHighlight.includeStrings","Controls whether characters in strings should also be subject to Unicode highlighting.")},[Ca.allowedCharacters]:{restricted:!0,type:"object",default:e.allowedCharacters,description:v("unicodeHighlight.allowedCharacters","Defines allowed characters that are not being highlighted."),additionalProperties:{type:"boolean"}},[Ca.allowedLocales]:{restricted:!0,type:"object",additionalProperties:{type:"boolean"},default:e.allowedLocales,description:v("unicodeHighlight.allowedLocales","Unicode characters that are common in allowed locales are not being highlighted.")}})}applyUpdate(e,t){let i=!1;t.allowedCharacters&&e&&(el(e.allowedCharacters,t.allowedCharacters)||(e={...e,allowedCharacters:t.allowedCharacters},i=!0)),t.allowedLocales&&e&&(el(e.allowedLocales,t.allowedLocales)||(e={...e,allowedLocales:t.allowedLocales},i=!0));const n=super.applyUpdate(e,t);return i?new tk(n.newValue,!0):n}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{nonBasicASCII:g1(t.nonBasicASCII,xl,[!0,!1,xl]),invisibleCharacters:tt(t.invisibleCharacters,this.defaultValue.invisibleCharacters),ambiguousCharacters:tt(t.ambiguousCharacters,this.defaultValue.ambiguousCharacters),includeComments:g1(t.includeComments,xl,[!0,!1,xl]),includeStrings:g1(t.includeStrings,xl,[!0,!1,xl]),allowedCharacters:this.validateBooleanMap(e.allowedCharacters,this.defaultValue.allowedCharacters),allowedLocales:this.validateBooleanMap(e.allowedLocales,this.defaultValue.allowedLocales)}}validateBooleanMap(e,t){if(typeof e!="object"||!e)return t;const i={};for(const[n,s]of Object.entries(e))s===!0&&(i[n]=!0);return i}}class kxe extends Cn{constructor(){const e={enabled:!0,mode:"subwordSmart",showToolbar:"onHover",suppressSuggestions:!1,keepOnBlur:!1,fontFamily:"default"};super(62,"inlineSuggest",e,{"editor.inlineSuggest.enabled":{type:"boolean",default:e.enabled,description:v("inlineSuggest.enabled","Controls whether to automatically show inline suggestions in the editor.")},"editor.inlineSuggest.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover","never"],enumDescriptions:[v("inlineSuggest.showToolbar.always","Show the inline suggestion toolbar whenever an inline suggestion is shown."),v("inlineSuggest.showToolbar.onHover","Show the inline suggestion toolbar when hovering over an inline suggestion."),v("inlineSuggest.showToolbar.never","Never show the inline suggestion toolbar.")],description:v("inlineSuggest.showToolbar","Controls when to show the inline suggestion toolbar.")},"editor.inlineSuggest.suppressSuggestions":{type:"boolean",default:e.suppressSuggestions,description:v("inlineSuggest.suppressSuggestions","Controls how inline suggestions interact with the suggest widget. If enabled, the suggest widget is not shown automatically when inline suggestions are available.")},"editor.inlineSuggest.fontFamily":{type:"string",default:e.fontFamily,description:v("inlineSuggest.fontFamily","Controls the font family of the inline suggestions.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:tt(t.enabled,this.defaultValue.enabled),mode:qn(t.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"]),showToolbar:qn(t.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),suppressSuggestions:tt(t.suppressSuggestions,this.defaultValue.suppressSuggestions),keepOnBlur:tt(t.keepOnBlur,this.defaultValue.keepOnBlur),fontFamily:br.string(t.fontFamily,this.defaultValue.fontFamily)}}}class Dxe extends Cn{constructor(){const e={enabled:!1,showToolbar:"onHover",fontFamily:"default",keepOnBlur:!1};super(63,"experimentalInlineEdit",e,{"editor.experimentalInlineEdit.enabled":{type:"boolean",default:e.enabled,description:v("inlineEdit.enabled","Controls whether to show inline edits in the editor.")},"editor.experimentalInlineEdit.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover","never"],enumDescriptions:[v("inlineEdit.showToolbar.always","Show the inline edit toolbar whenever an inline suggestion is shown."),v("inlineEdit.showToolbar.onHover","Show the inline edit toolbar when hovering over an inline suggestion."),v("inlineEdit.showToolbar.never","Never show the inline edit toolbar.")],description:v("inlineEdit.showToolbar","Controls when to show the inline edit toolbar.")},"editor.experimentalInlineEdit.fontFamily":{type:"string",default:e.fontFamily,description:v("inlineEdit.fontFamily","Controls the font family of the inline edit.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:tt(t.enabled,this.defaultValue.enabled),showToolbar:qn(t.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),fontFamily:br.string(t.fontFamily,this.defaultValue.fontFamily),keepOnBlur:tt(t.keepOnBlur,this.defaultValue.keepOnBlur)}}}class Exe extends Cn{constructor(){const e={enabled:Zo.bracketPairColorizationOptions.enabled,independentColorPoolPerBracketType:Zo.bracketPairColorizationOptions.independentColorPoolPerBracketType};super(15,"bracketPairColorization",e,{"editor.bracketPairColorization.enabled":{type:"boolean",default:e.enabled,markdownDescription:v("bracketPairColorization.enabled","Controls whether bracket pair colorization is enabled or not. Use {0} to override the bracket highlight colors.","`#workbench.colorCustomizations#`")},"editor.bracketPairColorization.independentColorPoolPerBracketType":{type:"boolean",default:e.independentColorPoolPerBracketType,description:v("bracketPairColorization.independentColorPoolPerBracketType","Controls whether each bracket type has its own independent color pool.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:tt(t.enabled,this.defaultValue.enabled),independentColorPoolPerBracketType:tt(t.independentColorPoolPerBracketType,this.defaultValue.independentColorPoolPerBracketType)}}}class Ixe extends Cn{constructor(){const e={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(16,"guides",e,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[v("editor.guides.bracketPairs.true","Enables bracket pair guides."),v("editor.guides.bracketPairs.active","Enables bracket pair guides only for the active bracket pair."),v("editor.guides.bracketPairs.false","Disables bracket pair guides.")],default:e.bracketPairs,description:v("editor.guides.bracketPairs","Controls whether bracket pair guides are enabled or not.")},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[v("editor.guides.bracketPairsHorizontal.true","Enables horizontal guides as addition to vertical bracket pair guides."),v("editor.guides.bracketPairsHorizontal.active","Enables horizontal guides only for the active bracket pair."),v("editor.guides.bracketPairsHorizontal.false","Disables horizontal bracket pair guides.")],default:e.bracketPairsHorizontal,description:v("editor.guides.bracketPairsHorizontal","Controls whether horizontal bracket pair guides are enabled or not.")},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:e.highlightActiveBracketPair,description:v("editor.guides.highlightActiveBracketPair","Controls whether the editor should highlight the active bracket pair.")},"editor.guides.indentation":{type:"boolean",default:e.indentation,description:v("editor.guides.indentation","Controls whether the editor should render indent guides.")},"editor.guides.highlightActiveIndentation":{type:["boolean","string"],enum:[!0,"always",!1],enumDescriptions:[v("editor.guides.highlightActiveIndentation.true","Highlights the active indent guide."),v("editor.guides.highlightActiveIndentation.always","Highlights the active indent guide even if bracket guides are highlighted."),v("editor.guides.highlightActiveIndentation.false","Do not highlight the active indent guide.")],default:e.highlightActiveIndentation,description:v("editor.guides.highlightActiveIndentation","Controls whether the editor should highlight the active indent guide.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{bracketPairs:g1(t.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:g1(t.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:tt(t.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:tt(t.indentation,this.defaultValue.indentation),highlightActiveIndentation:g1(t.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation,[!0,!1,"always"])}}}function g1(o,e,t){const i=t.indexOf(o);return i===-1?e:t[i]}class Txe extends Cn{constructor(){const e={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!1,localityBonus:!1,shareSuggestSelections:!1,selectionMode:"always",showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,matchOnWordStartOnly:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(119,"suggest",e,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[v("suggest.insertMode.insert","Insert suggestion without overwriting text right of the cursor."),v("suggest.insertMode.replace","Insert suggestion and overwrite text right of the cursor.")],default:e.insertMode,description:v("suggest.insertMode","Controls whether words are overwritten when accepting completions. Note that this depends on extensions opting into this feature.")},"editor.suggest.filterGraceful":{type:"boolean",default:e.filterGraceful,description:v("suggest.filterGraceful","Controls whether filtering and sorting suggestions accounts for small typos.")},"editor.suggest.localityBonus":{type:"boolean",default:e.localityBonus,description:v("suggest.localityBonus","Controls whether sorting favors words that appear close to the cursor.")},"editor.suggest.shareSuggestSelections":{type:"boolean",default:e.shareSuggestSelections,markdownDescription:v("suggest.shareSuggestSelections","Controls whether remembered suggestion selections are shared between multiple workspaces and windows (needs `#editor.suggestSelection#`).")},"editor.suggest.selectionMode":{type:"string",enum:["always","never","whenTriggerCharacter","whenQuickSuggestion"],enumDescriptions:[v("suggest.insertMode.always","Always select a suggestion when automatically triggering IntelliSense."),v("suggest.insertMode.never","Never select a suggestion when automatically triggering IntelliSense."),v("suggest.insertMode.whenTriggerCharacter","Select a suggestion only when triggering IntelliSense from a trigger character."),v("suggest.insertMode.whenQuickSuggestion","Select a suggestion only when triggering IntelliSense as you type.")],default:e.selectionMode,markdownDescription:v("suggest.selectionMode","Controls whether a suggestion is selected when the widget shows. Note that this only applies to automatically triggered suggestions ({0} and {1}) and that a suggestion is always selected when explicitly invoked, e.g via `Ctrl+Space`.","`#editor.quickSuggestions#`","`#editor.suggestOnTriggerCharacters#`")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:e.snippetsPreventQuickSuggestions,description:v("suggest.snippetsPreventQuickSuggestions","Controls whether an active snippet prevents quick suggestions.")},"editor.suggest.showIcons":{type:"boolean",default:e.showIcons,description:v("suggest.showIcons","Controls whether to show or hide icons in suggestions.")},"editor.suggest.showStatusBar":{type:"boolean",default:e.showStatusBar,description:v("suggest.showStatusBar","Controls the visibility of the status bar at the bottom of the suggest widget.")},"editor.suggest.preview":{type:"boolean",default:e.preview,description:v("suggest.preview","Controls whether to preview the suggestion outcome in the editor.")},"editor.suggest.showInlineDetails":{type:"boolean",default:e.showInlineDetails,description:v("suggest.showInlineDetails","Controls whether suggest details show inline with the label or only in the details widget.")},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:v("suggest.maxVisibleSuggestions.dep","This setting is deprecated. The suggest widget can now be resized.")},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:v("deprecated","This setting is deprecated, please use separate settings like 'editor.suggest.showKeywords' or 'editor.suggest.showSnippets' instead.")},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showMethods","When enabled IntelliSense shows `method`-suggestions.")},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showFunctions","When enabled IntelliSense shows `function`-suggestions.")},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showConstructors","When enabled IntelliSense shows `constructor`-suggestions.")},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showDeprecated","When enabled IntelliSense shows `deprecated`-suggestions.")},"editor.suggest.matchOnWordStartOnly":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.matchOnWordStartOnly","When enabled IntelliSense filtering requires that the first character matches on a word start. For example, `c` on `Console` or `WebContext` but _not_ on `description`. When disabled IntelliSense will show more results but still sorts them by match quality.")},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showFields","When enabled IntelliSense shows `field`-suggestions.")},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showVariables","When enabled IntelliSense shows `variable`-suggestions.")},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showClasss","When enabled IntelliSense shows `class`-suggestions.")},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showStructs","When enabled IntelliSense shows `struct`-suggestions.")},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showInterfaces","When enabled IntelliSense shows `interface`-suggestions.")},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showModules","When enabled IntelliSense shows `module`-suggestions.")},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showPropertys","When enabled IntelliSense shows `property`-suggestions.")},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showEvents","When enabled IntelliSense shows `event`-suggestions.")},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showOperators","When enabled IntelliSense shows `operator`-suggestions.")},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showUnits","When enabled IntelliSense shows `unit`-suggestions.")},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showValues","When enabled IntelliSense shows `value`-suggestions.")},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showConstants","When enabled IntelliSense shows `constant`-suggestions.")},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showEnums","When enabled IntelliSense shows `enum`-suggestions.")},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showEnumMembers","When enabled IntelliSense shows `enumMember`-suggestions.")},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showKeywords","When enabled IntelliSense shows `keyword`-suggestions.")},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showTexts","When enabled IntelliSense shows `text`-suggestions.")},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showColors","When enabled IntelliSense shows `color`-suggestions.")},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showFiles","When enabled IntelliSense shows `file`-suggestions.")},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showReferences","When enabled IntelliSense shows `reference`-suggestions.")},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showCustomcolors","When enabled IntelliSense shows `customcolor`-suggestions.")},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showFolders","When enabled IntelliSense shows `folder`-suggestions.")},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showTypeParameters","When enabled IntelliSense shows `typeParameter`-suggestions.")},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showSnippets","When enabled IntelliSense shows `snippet`-suggestions.")},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showUsers","When enabled IntelliSense shows `user`-suggestions.")},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showIssues","When enabled IntelliSense shows `issues`-suggestions.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertMode:qn(t.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:tt(t.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:tt(t.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:tt(t.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:tt(t.shareSuggestSelections,this.defaultValue.shareSuggestSelections),selectionMode:qn(t.selectionMode,this.defaultValue.selectionMode,["always","never","whenQuickSuggestion","whenTriggerCharacter"]),showIcons:tt(t.showIcons,this.defaultValue.showIcons),showStatusBar:tt(t.showStatusBar,this.defaultValue.showStatusBar),preview:tt(t.preview,this.defaultValue.preview),previewMode:qn(t.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:tt(t.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:tt(t.showMethods,this.defaultValue.showMethods),showFunctions:tt(t.showFunctions,this.defaultValue.showFunctions),showConstructors:tt(t.showConstructors,this.defaultValue.showConstructors),showDeprecated:tt(t.showDeprecated,this.defaultValue.showDeprecated),matchOnWordStartOnly:tt(t.matchOnWordStartOnly,this.defaultValue.matchOnWordStartOnly),showFields:tt(t.showFields,this.defaultValue.showFields),showVariables:tt(t.showVariables,this.defaultValue.showVariables),showClasses:tt(t.showClasses,this.defaultValue.showClasses),showStructs:tt(t.showStructs,this.defaultValue.showStructs),showInterfaces:tt(t.showInterfaces,this.defaultValue.showInterfaces),showModules:tt(t.showModules,this.defaultValue.showModules),showProperties:tt(t.showProperties,this.defaultValue.showProperties),showEvents:tt(t.showEvents,this.defaultValue.showEvents),showOperators:tt(t.showOperators,this.defaultValue.showOperators),showUnits:tt(t.showUnits,this.defaultValue.showUnits),showValues:tt(t.showValues,this.defaultValue.showValues),showConstants:tt(t.showConstants,this.defaultValue.showConstants),showEnums:tt(t.showEnums,this.defaultValue.showEnums),showEnumMembers:tt(t.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:tt(t.showKeywords,this.defaultValue.showKeywords),showWords:tt(t.showWords,this.defaultValue.showWords),showColors:tt(t.showColors,this.defaultValue.showColors),showFiles:tt(t.showFiles,this.defaultValue.showFiles),showReferences:tt(t.showReferences,this.defaultValue.showReferences),showFolders:tt(t.showFolders,this.defaultValue.showFolders),showTypeParameters:tt(t.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:tt(t.showSnippets,this.defaultValue.showSnippets),showUsers:tt(t.showUsers,this.defaultValue.showUsers),showIssues:tt(t.showIssues,this.defaultValue.showIssues)}}}class Nxe extends Cn{constructor(){super(114,"smartSelect",{selectLeadingAndTrailingWhitespace:!0,selectSubwords:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:v("selectLeadingAndTrailingWhitespace","Whether leading and trailing whitespace should always be selected."),default:!0,type:"boolean"},"editor.smartSelect.selectSubwords":{description:v("selectSubwords","Whether subwords (like 'foo' in 'fooBar' or 'foo_bar') should be selected."),default:!0,type:"boolean"}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{selectLeadingAndTrailingWhitespace:tt(e.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace),selectSubwords:tt(e.selectSubwords,this.defaultValue.selectSubwords)}}}class Rxe extends Cn{constructor(){const e=[];super(131,"wordSegmenterLocales",e,{anyOf:[{description:v("wordSegmenterLocales","Locales to be used for word segmentation when doing word related navigations or operations. Specify the BCP 47 language tag of the word you wish to recognize (e.g., ja, zh-CN, zh-Hant-TW, etc.)."),type:"string"},{description:v("wordSegmenterLocales","Locales to be used for word segmentation when doing word related navigations or operations. Specify the BCP 47 language tag of the word you wish to recognize (e.g., ja, zh-CN, zh-Hant-TW, etc.)."),type:"array",items:{type:"string"}}]})}validate(e){if(typeof e=="string"&&(e=[e]),Array.isArray(e)){const t=[];for(const i of e)if(typeof i=="string")try{Intl.Segmenter.supportedLocalesOf(i).length>0&&t.push(i)}catch{}return t}return this.defaultValue}}class Mxe extends Cn{constructor(){super(139,"wrappingIndent",1,{"editor.wrappingIndent":{type:"string",enum:["none","same","indent","deepIndent"],enumDescriptions:[v("wrappingIndent.none","No indentation. Wrapped lines begin at column 1."),v("wrappingIndent.same","Wrapped lines get the same indentation as the parent."),v("wrappingIndent.indent","Wrapped lines get +1 indentation toward the parent."),v("wrappingIndent.deepIndent","Wrapped lines get +2 indentation toward the parent.")],description:v("wrappingIndent","Controls the indentation of wrapped lines."),default:"same"}})}validate(e){switch(e){case"none":return 0;case"same":return 1;case"indent":return 2;case"deepIndent":return 3}return 1}compute(e,t,i){return t.get(2)===2?0:i}}class Axe extends qE{constructor(){super(147)}compute(e,t,i){const n=t.get(146);return{isDominatedByLongLines:e.isDominatedByLongLines,isWordWrapMinified:n.isWordWrapMinified,isViewportWrapping:n.isViewportWrapping,wrappingColumn:n.wrappingColumn}}}class Pxe extends Cn{constructor(){const e={enabled:!0,showDropSelector:"afterDrop"};super(36,"dropIntoEditor",e,{"editor.dropIntoEditor.enabled":{type:"boolean",default:e.enabled,markdownDescription:v("dropIntoEditor.enabled","Controls whether you can drag and drop a file into a text editor by holding down the `Shift` key (instead of opening the file in an editor).")},"editor.dropIntoEditor.showDropSelector":{type:"string",markdownDescription:v("dropIntoEditor.showDropSelector","Controls if a widget is shown when dropping files into the editor. This widget lets you control how the file is dropped."),enum:["afterDrop","never"],enumDescriptions:[v("dropIntoEditor.showDropSelector.afterDrop","Show the drop selector widget after a file is dropped into the editor."),v("dropIntoEditor.showDropSelector.never","Never show the drop selector widget. Instead the default drop provider is always used.")],default:"afterDrop"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:tt(t.enabled,this.defaultValue.enabled),showDropSelector:qn(t.showDropSelector,this.defaultValue.showDropSelector,["afterDrop","never"])}}}class Oxe extends Cn{constructor(){const e={enabled:!0,showPasteSelector:"afterPaste"};super(85,"pasteAs",e,{"editor.pasteAs.enabled":{type:"boolean",default:e.enabled,markdownDescription:v("pasteAs.enabled","Controls whether you can paste content in different ways.")},"editor.pasteAs.showPasteSelector":{type:"string",markdownDescription:v("pasteAs.showPasteSelector","Controls if a widget is shown when pasting content in to the editor. This widget lets you control how the file is pasted."),enum:["afterPaste","never"],enumDescriptions:[v("pasteAs.showPasteSelector.afterPaste","Show the paste selector widget after content is pasted into the editor."),v("pasteAs.showPasteSelector.never","Never show the paste selector widget. Instead the default pasting behavior is always used.")],default:"afterPaste"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:tt(t.enabled,this.defaultValue.enabled),showPasteSelector:qn(t.showPasteSelector,this.defaultValue.showPasteSelector,["afterPaste","never"])}}}const Fxe="Consolas, 'Courier New', monospace",Bxe="Menlo, Monaco, 'Courier New', monospace",Wxe="'Droid Sans Mono', 'monospace', monospace",Zr={fontFamily:Kt?Bxe:Qr?Wxe:Fxe,fontWeight:"normal",fontSize:Kt?12:14,lineHeight:0,letterSpacing:0},Dw=[];function De(o){return Dw[o.id]=o,o}const yu={acceptSuggestionOnCommitCharacter:De(new ci(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:v("acceptSuggestionOnCommitCharacter","Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (`;`) can be a commit character that accepts a suggestion and types that character.")})),acceptSuggestionOnEnter:De(new jn(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",v("acceptSuggestionOnEnterSmart","Only accept a suggestion with `Enter` when it makes a textual change."),""],markdownDescription:v("acceptSuggestionOnEnter","Controls whether suggestions should be accepted on `Enter`, in addition to `Tab`. Helps to avoid ambiguity between inserting new lines or accepting suggestions.")})),accessibilitySupport:De(new XLe),accessibilityPageSize:De(new Yi(3,"accessibilityPageSize",10,1,1073741824,{description:v("accessibilityPageSize","Controls the number of lines in the editor that can be read out by a screen reader at once. When we detect a screen reader we automatically set the default to be 500. Warning: this has a performance implication for numbers larger than the default."),tags:["accessibility"]})),ariaLabel:De(new br(4,"ariaLabel",v("editorViewAccessibleLabel","Editor content"))),ariaRequired:De(new ci(5,"ariaRequired",!1,void 0)),screenReaderAnnounceInlineSuggestion:De(new ci(8,"screenReaderAnnounceInlineSuggestion",!0,{description:v("screenReaderAnnounceInlineSuggestion","Control whether inline suggestions are announced by a screen reader."),tags:["accessibility"]})),autoClosingBrackets:De(new jn(6,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",v("editor.autoClosingBrackets.languageDefined","Use language configurations to determine when to autoclose brackets."),v("editor.autoClosingBrackets.beforeWhitespace","Autoclose brackets only when the cursor is to the left of whitespace."),""],description:v("autoClosingBrackets","Controls whether the editor should automatically close brackets after the user adds an opening bracket.")})),autoClosingComments:De(new jn(7,"autoClosingComments","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",v("editor.autoClosingComments.languageDefined","Use language configurations to determine when to autoclose comments."),v("editor.autoClosingComments.beforeWhitespace","Autoclose comments only when the cursor is to the left of whitespace."),""],description:v("autoClosingComments","Controls whether the editor should automatically close comments after the user adds an opening comment.")})),autoClosingDelete:De(new jn(9,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",v("editor.autoClosingDelete.auto","Remove adjacent closing quotes or brackets only if they were automatically inserted."),""],description:v("autoClosingDelete","Controls whether the editor should remove adjacent closing quotes or brackets when deleting.")})),autoClosingOvertype:De(new jn(10,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",v("editor.autoClosingOvertype.auto","Type over closing quotes or brackets only if they were automatically inserted."),""],description:v("autoClosingOvertype","Controls whether the editor should type over closing quotes or brackets.")})),autoClosingQuotes:De(new jn(11,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",v("editor.autoClosingQuotes.languageDefined","Use language configurations to determine when to autoclose quotes."),v("editor.autoClosingQuotes.beforeWhitespace","Autoclose quotes only when the cursor is to the left of whitespace."),""],description:v("autoClosingQuotes","Controls whether the editor should automatically close quotes after the user adds an opening quote.")})),autoIndent:De(new XN(12,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],ZLe,{enumDescriptions:[v("editor.autoIndent.none","The editor will not insert indentation automatically."),v("editor.autoIndent.keep","The editor will keep the current line's indentation."),v("editor.autoIndent.brackets","The editor will keep the current line's indentation and honor language defined brackets."),v("editor.autoIndent.advanced","The editor will keep the current line's indentation, honor language defined brackets and invoke special onEnterRules defined by languages."),v("editor.autoIndent.full","The editor will keep the current line's indentation, honor language defined brackets, invoke special onEnterRules defined by languages, and honor indentationRules defined by languages.")],description:v("autoIndent","Controls whether the editor should automatically adjust the indentation when users type, paste, move or indent lines.")})),automaticLayout:De(new ci(13,"automaticLayout",!1)),autoSurround:De(new jn(14,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[v("editor.autoSurround.languageDefined","Use language configurations to determine when to automatically surround selections."),v("editor.autoSurround.quotes","Surround with quotes but not brackets."),v("editor.autoSurround.brackets","Surround with brackets but not quotes."),""],description:v("autoSurround","Controls whether the editor should automatically surround selections when typing quotes or brackets.")})),bracketPairColorization:De(new Exe),bracketPairGuides:De(new Ixe),stickyTabStops:De(new ci(117,"stickyTabStops",!1,{description:v("stickyTabStops","Emulate selection behavior of tab characters when using spaces for indentation. Selection will stick to tab stops.")})),codeLens:De(new ci(17,"codeLens",!0,{description:v("codeLens","Controls whether the editor shows CodeLens.")})),codeLensFontFamily:De(new br(18,"codeLensFontFamily","",{description:v("codeLensFontFamily","Controls the font family for CodeLens.")})),codeLensFontSize:De(new Yi(19,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:v("codeLensFontSize","Controls the font size in pixels for CodeLens. When set to 0, 90% of `#editor.fontSize#` is used.")})),colorDecorators:De(new ci(20,"colorDecorators",!0,{description:v("colorDecorators","Controls whether the editor should render the inline color decorators and color picker.")})),colorDecoratorActivatedOn:De(new jn(149,"colorDecoratorsActivatedOn","clickAndHover",["clickAndHover","hover","click"],{enumDescriptions:[v("editor.colorDecoratorActivatedOn.clickAndHover","Make the color picker appear both on click and hover of the color decorator"),v("editor.colorDecoratorActivatedOn.hover","Make the color picker appear on hover of the color decorator"),v("editor.colorDecoratorActivatedOn.click","Make the color picker appear on click of the color decorator")],description:v("colorDecoratorActivatedOn","Controls the condition to make a color picker appear from a color decorator")})),colorDecoratorsLimit:De(new Yi(21,"colorDecoratorsLimit",500,1,1e6,{markdownDescription:v("colorDecoratorsLimit","Controls the max number of color decorators that can be rendered in an editor at once.")})),columnSelection:De(new ci(22,"columnSelection",!1,{description:v("columnSelection","Enable that the selection with the mouse and keys is doing column selection.")})),comments:De(new QLe),contextmenu:De(new ci(24,"contextmenu",!0)),copyWithSyntaxHighlighting:De(new ci(25,"copyWithSyntaxHighlighting",!0,{description:v("copyWithSyntaxHighlighting","Controls whether syntax highlighting should be copied into the clipboard.")})),cursorBlinking:De(new XN(26,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],JLe,{description:v("cursorBlinking","Control the cursor animation style.")})),cursorSmoothCaretAnimation:De(new jn(27,"cursorSmoothCaretAnimation","off",["off","explicit","on"],{enumDescriptions:[v("cursorSmoothCaretAnimation.off","Smooth caret animation is disabled."),v("cursorSmoothCaretAnimation.explicit","Smooth caret animation is enabled only when the user moves the cursor with an explicit gesture."),v("cursorSmoothCaretAnimation.on","Smooth caret animation is always enabled.")],description:v("cursorSmoothCaretAnimation","Controls whether the smooth caret animation should be enabled.")})),cursorStyle:De(new XN(28,"cursorStyle",_o.Line,"line",["line","block","underline","line-thin","block-outline","underline-thin"],exe,{description:v("cursorStyle","Controls the cursor style.")})),cursorSurroundingLines:De(new Yi(29,"cursorSurroundingLines",0,0,1073741824,{description:v("cursorSurroundingLines","Controls the minimal number of visible leading lines (minimum 0) and trailing lines (minimum 1) surrounding the cursor. Known as 'scrollOff' or 'scrollOffset' in some other editors.")})),cursorSurroundingLinesStyle:De(new jn(30,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[v("cursorSurroundingLinesStyle.default","`cursorSurroundingLines` is enforced only when triggered via the keyboard or API."),v("cursorSurroundingLinesStyle.all","`cursorSurroundingLines` is enforced always.")],markdownDescription:v("cursorSurroundingLinesStyle","Controls when `#editor.cursorSurroundingLines#` should be enforced.")})),cursorWidth:De(new Yi(31,"cursorWidth",0,0,1073741824,{markdownDescription:v("cursorWidth","Controls the width of the cursor when `#editor.cursorStyle#` is set to `line`.")})),disableLayerHinting:De(new ci(32,"disableLayerHinting",!1)),disableMonospaceOptimizations:De(new ci(33,"disableMonospaceOptimizations",!1)),domReadOnly:De(new ci(34,"domReadOnly",!1)),dragAndDrop:De(new ci(35,"dragAndDrop",!0,{description:v("dragAndDrop","Controls whether the editor should allow moving selections via drag and drop.")})),emptySelectionClipboard:De(new ixe),dropIntoEditor:De(new Pxe),stickyScroll:De(new dxe),experimentalWhitespaceRendering:De(new jn(38,"experimentalWhitespaceRendering","svg",["svg","font","off"],{enumDescriptions:[v("experimentalWhitespaceRendering.svg","Use a new rendering method with svgs."),v("experimentalWhitespaceRendering.font","Use a new rendering method with font characters."),v("experimentalWhitespaceRendering.off","Use the stable rendering method.")],description:v("experimentalWhitespaceRendering","Controls whether whitespace is rendered with a new, experimental method.")})),extraEditorClassName:De(new br(39,"extraEditorClassName","")),fastScrollSensitivity:De(new Ol(40,"fastScrollSensitivity",5,o=>o<=0?5:o,{markdownDescription:v("fastScrollSensitivity","Scrolling speed multiplier when pressing `Alt`.")})),find:De(new nxe),fixedOverflowWidgets:De(new ci(42,"fixedOverflowWidgets",!1)),folding:De(new ci(43,"folding",!0,{description:v("folding","Controls whether the editor has code folding enabled.")})),foldingStrategy:De(new jn(44,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[v("foldingStrategy.auto","Use a language-specific folding strategy if available, else the indentation-based one."),v("foldingStrategy.indentation","Use the indentation-based folding strategy.")],description:v("foldingStrategy","Controls the strategy for computing folding ranges.")})),foldingHighlight:De(new ci(45,"foldingHighlight",!0,{description:v("foldingHighlight","Controls whether the editor should highlight folded ranges.")})),foldingImportsByDefault:De(new ci(46,"foldingImportsByDefault",!1,{description:v("foldingImportsByDefault","Controls whether the editor automatically collapses import ranges.")})),foldingMaximumRegions:De(new Yi(47,"foldingMaximumRegions",5e3,10,65e3,{description:v("foldingMaximumRegions","The maximum number of foldable regions. Increasing this value may result in the editor becoming less responsive when the current source has a large number of foldable regions.")})),unfoldOnClickAfterEndOfLine:De(new ci(48,"unfoldOnClickAfterEndOfLine",!1,{description:v("unfoldOnClickAfterEndOfLine","Controls whether clicking on the empty content after a folded line will unfold the line.")})),fontFamily:De(new br(49,"fontFamily",Zr.fontFamily,{description:v("fontFamily","Controls the font family.")})),fontInfo:De(new sxe),fontLigatures2:De(new Mm),fontSize:De(new oxe),fontWeight:De(new G9),fontVariations:De(new cD),formatOnPaste:De(new ci(55,"formatOnPaste",!1,{description:v("formatOnPaste","Controls whether the editor should automatically format the pasted content. A formatter must be available and the formatter should be able to format a range in a document.")})),formatOnType:De(new ci(56,"formatOnType",!1,{description:v("formatOnType","Controls whether the editor should automatically format the line after typing.")})),glyphMargin:De(new ci(57,"glyphMargin",!0,{description:v("glyphMargin","Controls whether the editor should render the vertical glyph margin. Glyph margin is mostly used for debugging.")})),gotoLocation:De(new rxe),hideCursorInOverviewRuler:De(new ci(59,"hideCursorInOverviewRuler",!1,{description:v("hideCursorInOverviewRuler","Controls whether the cursor should be hidden in the overview ruler.")})),hover:De(new axe),inDiffEditor:De(new ci(61,"inDiffEditor",!1)),letterSpacing:De(new Ol(64,"letterSpacing",Zr.letterSpacing,o=>Ol.clamp(o,-5,20),{description:v("letterSpacing","Controls the letter spacing in pixels.")})),lightbulb:De(new cxe),lineDecorationsWidth:De(new hxe),lineHeight:De(new fxe),lineNumbers:De(new yxe),lineNumbersMinChars:De(new Yi(69,"lineNumbersMinChars",5,1,300)),linkedEditing:De(new ci(70,"linkedEditing",!1,{description:v("linkedEditing","Controls whether the editor has linked editing enabled. Depending on the language, related symbols such as HTML tags, are updated while editing.")})),links:De(new ci(71,"links",!0,{description:v("links","Controls whether the editor should detect links and make them clickable.")})),matchBrackets:De(new jn(72,"matchBrackets","always",["always","near","never"],{description:v("matchBrackets","Highlight matching brackets.")})),minimap:De(new gxe),mouseStyle:De(new jn(74,"mouseStyle","text",["text","default","copy"])),mouseWheelScrollSensitivity:De(new Ol(75,"mouseWheelScrollSensitivity",1,o=>o===0?1:o,{markdownDescription:v("mouseWheelScrollSensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")})),mouseWheelZoom:De(new ci(76,"mouseWheelZoom",!1,{markdownDescription:Kt?v("mouseWheelZoom.mac","Zoom the font of the editor when using mouse wheel and holding `Cmd`."):v("mouseWheelZoom","Zoom the font of the editor when using mouse wheel and holding `Ctrl`.")})),multiCursorMergeOverlapping:De(new ci(77,"multiCursorMergeOverlapping",!0,{description:v("multiCursorMergeOverlapping","Merge multiple cursors when they are overlapping.")})),multiCursorModifier:De(new XN(78,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],pxe,{markdownEnumDescriptions:[v("multiCursorModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),v("multiCursorModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],markdownDescription:v({key:"multiCursorModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add multiple cursors with the mouse. The Go to Definition and Open Link mouse gestures will adapt such that they do not conflict with the [multicursor modifier](https://code.visualstudio.com/docs/editor/codebasics#_multicursor-modifier).")})),multiCursorPaste:De(new jn(79,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[v("multiCursorPaste.spread","Each cursor pastes a single line of the text."),v("multiCursorPaste.full","Each cursor pastes the full text.")],markdownDescription:v("multiCursorPaste","Controls pasting when the line count of the pasted text matches the cursor count.")})),multiCursorLimit:De(new Yi(80,"multiCursorLimit",1e4,1,1e5,{markdownDescription:v("multiCursorLimit","Controls the max number of cursors that can be in an active editor at once.")})),occurrencesHighlight:De(new jn(81,"occurrencesHighlight","singleFile",["off","singleFile","multiFile"],{markdownEnumDescriptions:[v("occurrencesHighlight.off","Does not highlight occurrences."),v("occurrencesHighlight.singleFile","Highlights occurrences only in the current file."),v("occurrencesHighlight.multiFile","Experimental: Highlights occurrences across all valid open files.")],markdownDescription:v("occurrencesHighlight","Controls whether occurrences should be highlighted across open files.")})),overviewRulerBorder:De(new ci(82,"overviewRulerBorder",!0,{description:v("overviewRulerBorder","Controls whether a border should be drawn around the overview ruler.")})),overviewRulerLanes:De(new Yi(83,"overviewRulerLanes",3,0,3)),padding:De(new mxe),pasteAs:De(new Oxe),parameterHints:De(new _xe),peekWidgetDefaultFocus:De(new jn(87,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[v("peekWidgetDefaultFocus.tree","Focus the tree when opening peek"),v("peekWidgetDefaultFocus.editor","Focus the editor when opening peek")],description:v("peekWidgetDefaultFocus","Controls whether to focus the inline editor or the tree in the peek widget.")})),placeholder:De(new bxe),definitionLinkOpensInPeek:De(new ci(89,"definitionLinkOpensInPeek",!1,{description:v("definitionLinkOpensInPeek","Controls whether the Go to Definition mouse gesture always opens the peek widget.")})),quickSuggestions:De(new Cxe),quickSuggestionsDelay:De(new Yi(91,"quickSuggestionsDelay",10,0,1073741824,{description:v("quickSuggestionsDelay","Controls the delay in milliseconds after which quick suggestions will show up.")})),readOnly:De(new ci(92,"readOnly",!1)),readOnlyMessage:De(new Sxe),renameOnType:De(new ci(94,"renameOnType",!1,{description:v("renameOnType","Controls whether the editor auto renames on type."),markdownDeprecationMessage:v("renameOnTypeDeprecate","Deprecated, use `editor.linkedEditing` instead.")})),renderControlCharacters:De(new ci(95,"renderControlCharacters",!0,{description:v("renderControlCharacters","Controls whether the editor should render control characters."),restricted:!0})),renderFinalNewline:De(new jn(96,"renderFinalNewline",Qr?"dimmed":"on",["off","on","dimmed"],{description:v("renderFinalNewline","Render last line number when the file ends with a newline.")})),renderLineHighlight:De(new jn(97,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",v("renderLineHighlight.all","Highlights both the gutter and the current line.")],description:v("renderLineHighlight","Controls how the editor should render the current line highlight.")})),renderLineHighlightOnlyWhenFocus:De(new ci(98,"renderLineHighlightOnlyWhenFocus",!1,{description:v("renderLineHighlightOnlyWhenFocus","Controls if the editor should render the current line highlight only when the editor is focused.")})),renderValidationDecorations:De(new jn(99,"renderValidationDecorations","editable",["editable","on","off"])),renderWhitespace:De(new jn(100,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",v("renderWhitespace.boundary","Render whitespace characters except for single spaces between words."),v("renderWhitespace.selection","Render whitespace characters only on selected text."),v("renderWhitespace.trailing","Render only trailing whitespace characters."),""],description:v("renderWhitespace","Controls how the editor should render whitespace characters.")})),revealHorizontalRightPadding:De(new Yi(101,"revealHorizontalRightPadding",15,0,1e3)),roundedSelection:De(new ci(102,"roundedSelection",!0,{description:v("roundedSelection","Controls whether selections should have rounded corners.")})),rulers:De(new wxe),scrollbar:De(new Lxe),scrollBeyondLastColumn:De(new Yi(105,"scrollBeyondLastColumn",4,0,1073741824,{description:v("scrollBeyondLastColumn","Controls the number of extra characters beyond which the editor will scroll horizontally.")})),scrollBeyondLastLine:De(new ci(106,"scrollBeyondLastLine",!0,{description:v("scrollBeyondLastLine","Controls whether the editor will scroll beyond the last line.")})),scrollPredominantAxis:De(new ci(107,"scrollPredominantAxis",!0,{description:v("scrollPredominantAxis","Scroll only along the predominant axis when scrolling both vertically and horizontally at the same time. Prevents horizontal drift when scrolling vertically on a trackpad.")})),selectionClipboard:De(new ci(108,"selectionClipboard",!0,{description:v("selectionClipboard","Controls whether the Linux primary clipboard should be supported."),included:Qr})),selectionHighlight:De(new ci(109,"selectionHighlight",!0,{description:v("selectionHighlight","Controls whether the editor should highlight matches similar to the selection.")})),selectOnLineNumbers:De(new ci(110,"selectOnLineNumbers",!0)),showFoldingControls:De(new jn(111,"showFoldingControls","mouseover",["always","never","mouseover"],{enumDescriptions:[v("showFoldingControls.always","Always show the folding controls."),v("showFoldingControls.never","Never show the folding controls and reduce the gutter size."),v("showFoldingControls.mouseover","Only show the folding controls when the mouse is over the gutter.")],description:v("showFoldingControls","Controls when the folding controls on the gutter are shown.")})),showUnused:De(new ci(112,"showUnused",!0,{description:v("showUnused","Controls fading out of unused code.")})),showDeprecated:De(new ci(141,"showDeprecated",!0,{description:v("showDeprecated","Controls strikethrough deprecated variables.")})),inlayHints:De(new uxe),snippetSuggestions:De(new jn(113,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[v("snippetSuggestions.top","Show snippet suggestions on top of other suggestions."),v("snippetSuggestions.bottom","Show snippet suggestions below other suggestions."),v("snippetSuggestions.inline","Show snippets suggestions with other suggestions."),v("snippetSuggestions.none","Do not show snippet suggestions.")],description:v("snippetSuggestions","Controls whether snippets are shown with other suggestions and how they are sorted.")})),smartSelect:De(new Nxe),smoothScrolling:De(new ci(115,"smoothScrolling",!1,{description:v("smoothScrolling","Controls whether the editor will scroll using an animation.")})),stopRenderingLineAfter:De(new Yi(118,"stopRenderingLineAfter",1e4,-1,1073741824)),suggest:De(new Txe),inlineSuggest:De(new kxe),inlineEdit:De(new Dxe),inlineCompletionsAccessibilityVerbose:De(new ci(150,"inlineCompletionsAccessibilityVerbose",!1,{description:v("inlineCompletionsAccessibilityVerbose","Controls whether the accessibility hint should be provided to screen reader users when an inline completion is shown.")})),suggestFontSize:De(new Yi(120,"suggestFontSize",0,0,1e3,{markdownDescription:v("suggestFontSize","Font size for the suggest widget. When set to {0}, the value of {1} is used.","`0`","`#editor.fontSize#`")})),suggestLineHeight:De(new Yi(121,"suggestLineHeight",0,0,1e3,{markdownDescription:v("suggestLineHeight","Line height for the suggest widget. When set to {0}, the value of {1} is used. The minimum value is 8.","`0`","`#editor.lineHeight#`")})),suggestOnTriggerCharacters:De(new ci(122,"suggestOnTriggerCharacters",!0,{description:v("suggestOnTriggerCharacters","Controls whether suggestions should automatically show up when typing trigger characters.")})),suggestSelection:De(new jn(123,"suggestSelection","first",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[v("suggestSelection.first","Always select the first suggestion."),v("suggestSelection.recentlyUsed","Select recent suggestions unless further typing selects one, e.g. `console.| -> console.log` because `log` has been completed recently."),v("suggestSelection.recentlyUsedByPrefix","Select suggestions based on previous prefixes that have completed those suggestions, e.g. `co -> console` and `con -> const`.")],description:v("suggestSelection","Controls how suggestions are pre-selected when showing the suggest list.")})),tabCompletion:De(new jn(124,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[v("tabCompletion.on","Tab complete will insert the best matching suggestion when pressing tab."),v("tabCompletion.off","Disable tab completions."),v("tabCompletion.onlySnippets","Tab complete snippets when their prefix match. Works best when 'quickSuggestions' aren't enabled.")],description:v("tabCompletion","Enables tab completions.")})),tabIndex:De(new Yi(125,"tabIndex",0,-1,1073741824)),unicodeHighlight:De(new xxe),unusualLineTerminators:De(new jn(127,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[v("unusualLineTerminators.auto","Unusual line terminators are automatically removed."),v("unusualLineTerminators.off","Unusual line terminators are ignored."),v("unusualLineTerminators.prompt","Unusual line terminators prompt to be removed.")],description:v("unusualLineTerminators","Remove unusual line terminators that might cause problems.")})),useShadowDOM:De(new ci(128,"useShadowDOM",!0)),useTabStops:De(new ci(129,"useTabStops",!0,{description:v("useTabStops","Spaces and tabs are inserted and deleted in alignment with tab stops.")})),wordBreak:De(new jn(130,"wordBreak","normal",["normal","keepAll"],{markdownEnumDescriptions:[v("wordBreak.normal","Use the default line break rule."),v("wordBreak.keepAll","Word breaks should not be used for Chinese/Japanese/Korean (CJK) text. Non-CJK text behavior is the same as for normal.")],description:v("wordBreak","Controls the word break rules used for Chinese/Japanese/Korean (CJK) text.")})),wordSegmenterLocales:De(new Rxe),wordSeparators:De(new br(132,"wordSeparators",oA,{description:v("wordSeparators","Characters that will be used as word separators when doing word related navigations or operations.")})),wordWrap:De(new jn(133,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[v("wordWrap.off","Lines will never wrap."),v("wordWrap.on","Lines will wrap at the viewport width."),v({key:"wordWrap.wordWrapColumn",comment:["- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at `#editor.wordWrapColumn#`."),v({key:"wordWrap.bounded",comment:["- viewport means the edge of the visible window size.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at the minimum of viewport and `#editor.wordWrapColumn#`.")],description:v({key:"wordWrap",comment:["- 'off', 'on', 'wordWrapColumn' and 'bounded' refer to values the setting can take and should not be localized.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Controls how lines should wrap.")})),wordWrapBreakAfterCharacters:De(new br(134,"wordWrapBreakAfterCharacters"," 	})]?|/&.,;")),wordWrapBreakBeforeCharacters:De(new br(135,"wordWrapBreakBeforeCharacters","([{+")),wordWrapColumn:De(new Yi(136,"wordWrapColumn",80,1,1073741824,{markdownDescription:v({key:"wordWrapColumn",comment:["- `editor.wordWrap` refers to a different setting and should not be localized.","- 'wordWrapColumn' and 'bounded' refer to values the different setting can take and should not be localized."]},"Controls the wrapping column of the editor when `#editor.wordWrap#` is `wordWrapColumn` or `bounded`.")})),wordWrapOverride1:De(new jn(137,"wordWrapOverride1","inherit",["off","on","inherit"])),wordWrapOverride2:De(new jn(138,"wordWrapOverride2","inherit",["off","on","inherit"])),editorClassName:De(new txe),defaultColorDecorators:De(new ci(148,"defaultColorDecorators",!1,{markdownDescription:v("defaultColorDecorators","Controls whether inline color decorations should be shown using the default document color provider")})),pixelRatio:De(new vxe),tabFocusMode:De(new ci(145,"tabFocusMode",!1,{markdownDescription:v("tabFocusMode","Controls whether the editor receives tabs or defers them to the workbench for navigation.")})),layoutInfo:De(new f1),wrappingInfo:De(new Axe),wrappingIndent:De(new Mxe),wrappingStrategy:De(new lxe)};class Hxe{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?Q1.isErrorNoTelemetry(e)?new Q1(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}emit(e){this.listeners.forEach(t=>{t(e)})}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}}const Nle=new Hxe;function wt(o){Tc(o)||Nle.onUnexpectedError(o)}function rs(o){Tc(o)||Nle.onUnexpectedExternalError(o)}function Mte(o){if(o instanceof Error){const{name:e,message:t}=o,i=o.stacktrace||o.stack;return{$isError:!0,name:e,message:t,stack:i,noTelemetry:Q1.isErrorNoTelemetry(o)}}return o}const aA="Canceled";function Tc(o){return o instanceof ad?!0:o instanceof Error&&o.name===aA&&o.message===aA}class ad extends Error{constructor(){super(aA),this.name=this.message}}function Vxe(){const o=new Error(aA);return o.name=o.message,o}function yc(o){return o?new Error(`Illegal argument: ${o}`):new Error("Illegal argument")}function kq(o){return o?new Error(`Illegal state: ${o}`):new Error("Illegal state")}class zxe extends Error{constructor(e){super("NotSupported"),e&&(this.message=e)}}class Q1 extends Error{constructor(e){super(e),this.name="CodeExpectedError"}static fromError(e){if(e instanceof Q1)return e;const t=new Q1;return t.message=e.message,t.stack=e.stack,t}static isErrorNoTelemetry(e){return e.name==="CodeExpectedError"}}class wi extends Error{constructor(e){super(e||"An unexpected bug occurred."),Object.setPrototypeOf(this,wi.prototype)}}function Am(o,e){const t=this;let i=!1,n;return function(){return i||(i=!0,n=o.apply(t,arguments)),n}}function VF(o){return typeof o=="object"&&o!==null&&typeof o.dispose=="function"&&o.dispose.length===0}function $i(o){if(ti.is(o)){const e=[];for(const t of o)if(t)try{t.dispose()}catch(i){e.push(i)}if(e.length===1)throw e[0];if(e.length>1)throw new AggregateError(e,"Encountered errors while disposing of store");return Array.isArray(o)?[]:o}else if(o)return o.dispose(),o}function od(...o){return it(()=>$i(o))}function it(o){return{dispose:Am(()=>{o()})}}const n2=class n2{constructor(){this._toDispose=new Set,this._isDisposed=!1}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{$i(this._toDispose)}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?n2.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}deleteAndLeak(e){e&&this._toDispose.has(e)&&this._toDispose.delete(e)}};n2.DISABLE_DISPOSED_WARNING=!1;let le=n2;const lZ=class lZ{constructor(){this._store=new le,this._store}dispose(){this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}};lZ.None=Object.freeze({dispose(){}});let X=lZ;class Xs{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(e){var t;this._isDisposed||e===this._value||((t=this._value)==null||t.dispose(),this._value=e)}clear(){this.value=void 0}dispose(){var e;this._isDisposed=!0,(e=this._value)==null||e.dispose(),this._value=void 0}}class Uxe{constructor(e){this._disposable=e,this._counter=1}acquire(){return this._counter++,this}release(){return--this._counter===0&&this._disposable.dispose(),this}}class $xe{constructor(e){this.object=e}dispose(){}}class Dq{constructor(){this._store=new Map,this._isDisposed=!1}dispose(){this._isDisposed=!0,this.clearAndDisposeAll()}clearAndDisposeAll(){if(this._store.size)try{$i(this._store.values())}finally{this._store.clear()}}get(e){return this._store.get(e)}set(e,t,i=!1){var n;this._isDisposed&&console.warn(new Error("Trying to add a disposable to a DisposableMap that has already been disposed of. The added object will be leaked!").stack),i||(n=this._store.get(e))==null||n.dispose(),this._store.set(e,t)}deleteAndDispose(e){var t;(t=this._store.get(e))==null||t.dispose(),this._store.delete(e)}[Symbol.iterator](){return this._store[Symbol.iterator]()}}const jxe=globalThis.performance&&typeof globalThis.performance.now=="function";class uo{static create(e){return new uo(e)}constructor(e){this._now=jxe&&e===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}}var Ee;(function(o){o.None=()=>X.None;function e(J,Z){return g(J,()=>{},0,void 0,!0,void 0,Z)}o.defer=e;function t(J){return(Z,he=null,Ce)=>{let we=!1,me;return me=J(pe=>{if(!we)return me?me.dispose():we=!0,Z.call(he,pe)},null,Ce),we&&me.dispose(),me}}o.once=t;function i(J,Z){return o.once(o.filter(J,Z))}o.onceIf=i;function n(J,Z,he){return u((Ce,we=null,me)=>J(pe=>Ce.call(we,Z(pe)),null,me),he)}o.map=n;function s(J,Z,he){return u((Ce,we=null,me)=>J(pe=>{Z(pe),Ce.call(we,pe)},null,me),he)}o.forEach=s;function r(J,Z,he){return u((Ce,we=null,me)=>J(pe=>Z(pe)&&Ce.call(we,pe),null,me),he)}o.filter=r;function a(J){return J}o.signal=a;function l(...J){return(Z,he=null,Ce)=>{const we=od(...J.map(me=>me(pe=>Z.call(he,pe))));return f(we,Ce)}}o.any=l;function c(J,Z,he,Ce){let we=he;return n(J,me=>(we=Z(we,me),we),Ce)}o.reduce=c;function u(J,Z){let he;const Ce={onWillAddFirstListener(){he=J(we.fire,we)},onDidRemoveLastListener(){he==null||he.dispose()}},we=new Y(Ce);return Z==null||Z.add(we),we.event}function f(J,Z){return Z instanceof Array?Z.push(J):Z&&Z.add(J),J}function g(J,Z,he=100,Ce=!1,we=!1,me,pe){let Fe,Ye,Ut,dt=0,Ot;const Bi={leakWarningThreshold:me,onWillAddFirstListener(){Fe=J(Xn=>{dt++,Ye=Z(Ye,Xn),Ce&&!Ut&&(Qi.fire(Ye),Ye=void 0),Ot=()=>{const Qn=Ye;Ye=void 0,Ut=void 0,(!Ce||dt>1)&&Qi.fire(Qn),dt=0},typeof he=="number"?(clearTimeout(Ut),Ut=setTimeout(Ot,he)):Ut===void 0&&(Ut=0,queueMicrotask(Ot))})},onWillRemoveListener(){we&&dt>0&&(Ot==null||Ot())},onDidRemoveLastListener(){Ot=void 0,Fe.dispose()}},Qi=new Y(Bi);return pe==null||pe.add(Qi),Qi.event}o.debounce=g;function p(J,Z=0,he){return o.debounce(J,(Ce,we)=>Ce?(Ce.push(we),Ce):[we],Z,void 0,!0,void 0,he)}o.accumulate=p;function _(J,Z=(Ce,we)=>Ce===we,he){let Ce=!0,we;return r(J,me=>{const pe=Ce||!Z(me,we);return Ce=!1,we=me,pe},he)}o.latch=_;function b(J,Z,he){return[o.filter(J,Z,he),o.filter(J,Ce=>!Z(Ce),he)]}o.split=b;function y(J,Z=!1,he=[],Ce){let we=he.slice(),me=J(Ye=>{we?we.push(Ye):Fe.fire(Ye)});Ce&&Ce.add(me);const pe=()=>{we==null||we.forEach(Ye=>Fe.fire(Ye)),we=null},Fe=new Y({onWillAddFirstListener(){me||(me=J(Ye=>Fe.fire(Ye)),Ce&&Ce.add(me))},onDidAddFirstListener(){we&&(Z?setTimeout(pe):pe())},onDidRemoveLastListener(){me&&me.dispose(),me=null}});return Ce&&Ce.add(Fe),Fe.event}o.buffer=y;function S(J,Z){return(Ce,we,me)=>{const pe=Z(new x);return J(function(Fe){const Ye=pe.evaluate(Fe);Ye!==L&&Ce.call(we,Ye)},void 0,me)}}o.chain=S;const L=Symbol("HaltChainable");class x{constructor(){this.steps=[]}map(Z){return this.steps.push(Z),this}forEach(Z){return this.steps.push(he=>(Z(he),he)),this}filter(Z){return this.steps.push(he=>Z(he)?he:L),this}reduce(Z,he){let Ce=he;return this.steps.push(we=>(Ce=Z(Ce,we),Ce)),this}latch(Z=(he,Ce)=>he===Ce){let he=!0,Ce;return this.steps.push(we=>{const me=he||!Z(we,Ce);return he=!1,Ce=we,me?we:L}),this}evaluate(Z){for(const he of this.steps)if(Z=he(Z),Z===L)break;return Z}}function k(J,Z,he=Ce=>Ce){const Ce=(...Fe)=>pe.fire(he(...Fe)),we=()=>J.on(Z,Ce),me=()=>J.removeListener(Z,Ce),pe=new Y({onWillAddFirstListener:we,onDidRemoveLastListener:me});return pe.event}o.fromNodeEventEmitter=k;function E(J,Z,he=Ce=>Ce){const Ce=(...Fe)=>pe.fire(he(...Fe)),we=()=>J.addEventListener(Z,Ce),me=()=>J.removeEventListener(Z,Ce),pe=new Y({onWillAddFirstListener:we,onDidRemoveLastListener:me});return pe.event}o.fromDOMEventEmitter=E;function N(J){return new Promise(Z=>t(J)(Z))}o.toPromise=N;function A(J){const Z=new Y;return J.then(he=>{Z.fire(he)},()=>{Z.fire(void 0)}).finally(()=>{Z.dispose()}),Z.event}o.fromPromise=A;function P(J,Z){return J(he=>Z.fire(he))}o.forward=P;function H(J,Z,he){return Z(he),J(Ce=>Z(Ce))}o.runAndSubscribe=H;class ee{constructor(Z,he){this._observable=Z,this._counter=0,this._hasChanged=!1;const Ce={onWillAddFirstListener:()=>{Z.addObserver(this),this._observable.reportChanges()},onDidRemoveLastListener:()=>{Z.removeObserver(this)}};this.emitter=new Y(Ce),he&&he.add(this.emitter)}beginUpdate(Z){this._counter++}handlePossibleChange(Z){}handleChange(Z,he){this._hasChanged=!0}endUpdate(Z){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function Q(J,Z){return new ee(J,Z).emitter.event}o.fromObservable=Q;function te(J){return(Z,he,Ce)=>{let we=0,me=!1;const pe={beginUpdate(){we++},endUpdate(){we--,we===0&&(J.reportChanges(),me&&(me=!1,Z.call(he)))},handlePossibleChange(){},handleChange(){me=!0}};J.addObserver(pe),J.reportChanges();const Fe={dispose(){J.removeObserver(pe)}};return Ce instanceof le?Ce.add(Fe):Array.isArray(Ce)&&Ce.push(Fe),Fe}}o.fromObservableLight=te})(Ee||(Ee={}));const Qw=class Qw{constructor(e){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${e}_${Qw._idPool++}`,Qw.all.add(this)}start(e){this._stopWatch=new uo,this.listenerCount=e}stop(){if(this._stopWatch){const e=this._stopWatch.elapsed();this.durations.push(e),this.elapsedOverall+=e,this.invocationCount+=1,this._stopWatch=void 0}}};Qw.all=new Set,Qw._idPool=0;let Y9=Qw,qxe=-1;const s2=class s2{constructor(e,t,i=(s2._idPool++).toString(16).padStart(3,"0")){this._errorHandler=e,this.threshold=t,this.name=i,this._warnCountdown=0}dispose(){var e;(e=this._stacks)==null||e.clear()}check(e,t){const i=this.threshold;if(i<=0||t<i)return;this._stacks||(this._stacks=new Map);const n=this._stacks.get(e.value)||0;if(this._stacks.set(e.value,n+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=i*.5;const[s,r]=this.getMostFrequentStack(),a=`[${this.name}] potential listener LEAK detected, having ${t} listeners already. MOST frequent listener (${r}):`;console.warn(a),console.warn(s);const l=new Kxe(a,s);this._errorHandler(l)}return()=>{const s=this._stacks.get(e.value)||0;this._stacks.set(e.value,s-1)}}getMostFrequentStack(){if(!this._stacks)return;let e,t=0;for(const[i,n]of this._stacks)(!e||t<n)&&(e=[i,n],t=n);return e}};s2._idPool=1;let Z9=s2;class Eq{static create(){const e=new Error;return new Eq(e.stack??"")}constructor(e){this.value=e}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}}class Kxe extends Error{constructor(e,t){super(e),this.name="ListenerLeakError",this.stack=t}}class Gxe extends Error{constructor(e,t){super(e),this.name="ListenerRefusalError",this.stack=t}}class MH{constructor(e){this.value=e}}const Yxe=2;let Y=class{constructor(e){var t,i,n,s;this._size=0,this._options=e,this._leakageMon=(t=this._options)!=null&&t.leakWarningThreshold?new Z9((e==null?void 0:e.onListenerError)??wt,((i=this._options)==null?void 0:i.leakWarningThreshold)??qxe):void 0,this._perfMon=(n=this._options)!=null&&n._profName?new Y9(this._options._profName):void 0,this._deliveryQueue=(s=this._options)==null?void 0:s.deliveryQueue}dispose(){var e,t,i,n;this._disposed||(this._disposed=!0,((e=this._deliveryQueue)==null?void 0:e.current)===this&&this._deliveryQueue.reset(),this._listeners&&(this._listeners=void 0,this._size=0),(i=(t=this._options)==null?void 0:t.onDidRemoveLastListener)==null||i.call(t),(n=this._leakageMon)==null||n.dispose())}get event(){return this._event??(this._event=(e,t,i)=>{var a,l,c,u,f;if(this._leakageMon&&this._size>this._leakageMon.threshold**2){const g=`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`;console.warn(g);const p=this._leakageMon.getMostFrequentStack()??["UNKNOWN stack",-1],_=new Gxe(`${g}. HINT: Stack shows most frequent listener (${p[1]}-times)`,p[0]);return(((a=this._options)==null?void 0:a.onListenerError)||wt)(_),X.None}if(this._disposed)return X.None;t&&(e=e.bind(t));const n=new MH(e);let s;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(n.stack=Eq.create(),s=this._leakageMon.check(n.stack,this._size+1)),this._listeners?this._listeners instanceof MH?(this._deliveryQueue??(this._deliveryQueue=new Rle),this._listeners=[this._listeners,n]):this._listeners.push(n):((c=(l=this._options)==null?void 0:l.onWillAddFirstListener)==null||c.call(l,this),this._listeners=n,(f=(u=this._options)==null?void 0:u.onDidAddFirstListener)==null||f.call(u,this)),this._size++;const r=it(()=>{s==null||s(),this._removeListener(n)});return i instanceof le?i.add(r):Array.isArray(i)&&i.push(r),r}),this._event}_removeListener(e){var s,r,a,l;if((r=(s=this._options)==null?void 0:s.onWillRemoveListener)==null||r.call(s,this),!this._listeners)return;if(this._size===1){this._listeners=void 0,(l=(a=this._options)==null?void 0:a.onDidRemoveLastListener)==null||l.call(a,this),this._size=0;return}const t=this._listeners,i=t.indexOf(e);if(i===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,t[i]=void 0;const n=this._deliveryQueue.current===this;if(this._size*Yxe<=t.length){let c=0;for(let u=0;u<t.length;u++)t[u]?t[c++]=t[u]:n&&(this._deliveryQueue.end--,c<this._deliveryQueue.i&&this._deliveryQueue.i--);t.length=c}}_deliver(e,t){var n;if(!e)return;const i=((n=this._options)==null?void 0:n.onListenerError)||wt;if(!i){e.value(t);return}try{e.value(t)}catch(s){i(s)}}_deliverQueue(e){const t=e.current._listeners;for(;e.i<e.end;)this._deliver(t[e.i++],e.value);e.reset()}fire(e){var t,i,n,s;if((t=this._deliveryQueue)!=null&&t.current&&(this._deliverQueue(this._deliveryQueue),(i=this._perfMon)==null||i.stop()),(n=this._perfMon)==null||n.start(this._size),this._listeners)if(this._listeners instanceof MH)this._deliver(this._listeners,e);else{const r=this._deliveryQueue;r.enqueue(this,e,this._listeners.length),this._deliverQueue(r)}(s=this._perfMon)==null||s.stop()}hasListeners(){return this._size>0}};const Zxe=()=>new Rle;class Rle{constructor(){this.i=-1,this.end=0}enqueue(e,t,i){this.i=0,this.end=i,this.current=e,this.value=t}reset(){this.i=this.end,this.current=void 0,this.value=void 0}}class nC extends Y{constructor(e){super(e),this._isPaused=0,this._eventQueue=new jr,this._mergeFn=e==null?void 0:e.merge}pause(){this._isPaused++}resume(){if(this._isPaused!==0&&--this._isPaused===0)if(this._mergeFn){if(this._eventQueue.size>0){const e=Array.from(this._eventQueue);this._eventQueue.clear(),super.fire(this._mergeFn(e))}}else for(;!this._isPaused&&this._eventQueue.size!==0;)super.fire(this._eventQueue.shift())}fire(e){this._size&&(this._isPaused!==0?this._eventQueue.push(e):super.fire(e))}}class Mle extends nC{constructor(e){super(e),this._delay=e.delay??100}fire(e){this._handle||(this.pause(),this._handle=setTimeout(()=>{this._handle=void 0,this.resume()},this._delay)),super.fire(e)}}class Xxe extends Y{constructor(e){super(e),this._queuedEvents=[],this._mergeFn=e==null?void 0:e.merge}fire(e){this.hasListeners()&&(this._queuedEvents.push(e),this._queuedEvents.length===1&&queueMicrotask(()=>{this._mergeFn?super.fire(this._mergeFn(this._queuedEvents)):this._queuedEvents.forEach(t=>super.fire(t)),this._queuedEvents=[]}))}}class Qxe{constructor(){this.hasListeners=!1,this.events=[],this.emitter=new Y({onWillAddFirstListener:()=>this.onFirstListenerAdd(),onDidRemoveLastListener:()=>this.onLastListenerRemove()})}get event(){return this.emitter.event}add(e){const t={event:e,listener:null};return this.events.push(t),this.hasListeners&&this.hook(t),it(Am(()=>{this.hasListeners&&this.unhook(t);const n=this.events.indexOf(t);this.events.splice(n,1)}))}onFirstListenerAdd(){this.hasListeners=!0,this.events.forEach(e=>this.hook(e))}onLastListenerRemove(){this.hasListeners=!1,this.events.forEach(e=>this.unhook(e))}hook(e){e.listener=e.event(t=>this.emitter.fire(t))}unhook(e){var t;(t=e.listener)==null||t.dispose(),e.listener=null}dispose(){var e;this.emitter.dispose();for(const t of this.events)(e=t.listener)==null||e.dispose();this.events=[]}}class KE{constructor(){this.data=[]}wrapEvent(e,t,i){return(n,s,r)=>e(a=>{const l=this.data[this.data.length-1];if(!t){l?l.buffers.push(()=>n.call(s,a)):n.call(s,a);return}const c=l;if(!c){n.call(s,t(i,a));return}c.items??(c.items=[]),c.items.push(a),c.buffers.length===0&&l.buffers.push(()=>{c.reducedResult??(c.reducedResult=i?c.items.reduce(t,i):c.items.reduce(t)),n.call(s,c.reducedResult)})},void 0,r)}bufferEvents(e){const t={buffers:new Array};this.data.push(t);const i=e();return this.data.pop(),t.buffers.forEach(n=>n()),i}}class Ate{constructor(){this.listening=!1,this.inputEvent=Ee.None,this.inputEventListener=X.None,this.emitter=new Y({onDidAddFirstListener:()=>{this.listening=!0,this.inputEventListener=this.inputEvent(this.emitter.fire,this.emitter)},onDidRemoveLastListener:()=>{this.listening=!1,this.inputEventListener.dispose()}}),this.event=this.emitter.event}set input(e){this.inputEvent=e,this.listening&&(this.inputEventListener.dispose(),this.inputEventListener=e(this.emitter.fire,this.emitter))}dispose(){this.inputEventListener.dispose(),this.emitter.dispose()}}const Ale=Object.freeze(function(o,e){const t=setTimeout(o.bind(e),0);return{dispose(){clearTimeout(t)}}});var Mt;(function(o){function e(t){return t===o.None||t===o.Cancelled||t instanceof dM?!0:!t||typeof t!="object"?!1:typeof t.isCancellationRequested=="boolean"&&typeof t.onCancellationRequested=="function"}o.isCancellationToken=e,o.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Ee.None}),o.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Ale})})(Mt||(Mt={}));class dM{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?Ale:(this._emitter||(this._emitter=new Y),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}}let An=class{constructor(e){this._token=void 0,this._parentListener=void 0,this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new dM),this._token}cancel(){this._token?this._token instanceof dM&&this._token.cancel():this._token=Mt.Cancelled}dispose(e=!1){var t;e&&this.cancel(),(t=this._parentListener)==null||t.dispose(),this._token?this._token instanceof dM&&this._token.dispose():this._token=Mt.None}};function X9(o){const e=new An;return o.add({dispose(){e.cancel()}}),e.token}class Iq{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}}const uM=new Iq,Q9=new Iq,J9=new Iq,Ple=new Array(230),Jxe=Object.create(null),eke=Object.create(null),Tq=[];for(let o=0;o<=193;o++)Tq[o]=-1;(function(){const o="",e=[[1,0,"None",0,"unknown",0,"VK_UNKNOWN",o,o],[1,1,"Hyper",0,o,0,o,o,o],[1,2,"Super",0,o,0,o,o,o],[1,3,"Fn",0,o,0,o,o,o],[1,4,"FnLock",0,o,0,o,o,o],[1,5,"Suspend",0,o,0,o,o,o],[1,6,"Resume",0,o,0,o,o,o],[1,7,"Turbo",0,o,0,o,o,o],[1,8,"Sleep",0,o,0,"VK_SLEEP",o,o],[1,9,"WakeUp",0,o,0,o,o,o],[0,10,"KeyA",31,"A",65,"VK_A",o,o],[0,11,"KeyB",32,"B",66,"VK_B",o,o],[0,12,"KeyC",33,"C",67,"VK_C",o,o],[0,13,"KeyD",34,"D",68,"VK_D",o,o],[0,14,"KeyE",35,"E",69,"VK_E",o,o],[0,15,"KeyF",36,"F",70,"VK_F",o,o],[0,16,"KeyG",37,"G",71,"VK_G",o,o],[0,17,"KeyH",38,"H",72,"VK_H",o,o],[0,18,"KeyI",39,"I",73,"VK_I",o,o],[0,19,"KeyJ",40,"J",74,"VK_J",o,o],[0,20,"KeyK",41,"K",75,"VK_K",o,o],[0,21,"KeyL",42,"L",76,"VK_L",o,o],[0,22,"KeyM",43,"M",77,"VK_M",o,o],[0,23,"KeyN",44,"N",78,"VK_N",o,o],[0,24,"KeyO",45,"O",79,"VK_O",o,o],[0,25,"KeyP",46,"P",80,"VK_P",o,o],[0,26,"KeyQ",47,"Q",81,"VK_Q",o,o],[0,27,"KeyR",48,"R",82,"VK_R",o,o],[0,28,"KeyS",49,"S",83,"VK_S",o,o],[0,29,"KeyT",50,"T",84,"VK_T",o,o],[0,30,"KeyU",51,"U",85,"VK_U",o,o],[0,31,"KeyV",52,"V",86,"VK_V",o,o],[0,32,"KeyW",53,"W",87,"VK_W",o,o],[0,33,"KeyX",54,"X",88,"VK_X",o,o],[0,34,"KeyY",55,"Y",89,"VK_Y",o,o],[0,35,"KeyZ",56,"Z",90,"VK_Z",o,o],[0,36,"Digit1",22,"1",49,"VK_1",o,o],[0,37,"Digit2",23,"2",50,"VK_2",o,o],[0,38,"Digit3",24,"3",51,"VK_3",o,o],[0,39,"Digit4",25,"4",52,"VK_4",o,o],[0,40,"Digit5",26,"5",53,"VK_5",o,o],[0,41,"Digit6",27,"6",54,"VK_6",o,o],[0,42,"Digit7",28,"7",55,"VK_7",o,o],[0,43,"Digit8",29,"8",56,"VK_8",o,o],[0,44,"Digit9",30,"9",57,"VK_9",o,o],[0,45,"Digit0",21,"0",48,"VK_0",o,o],[1,46,"Enter",3,"Enter",13,"VK_RETURN",o,o],[1,47,"Escape",9,"Escape",27,"VK_ESCAPE",o,o],[1,48,"Backspace",1,"Backspace",8,"VK_BACK",o,o],[1,49,"Tab",2,"Tab",9,"VK_TAB",o,o],[1,50,"Space",10,"Space",32,"VK_SPACE",o,o],[0,51,"Minus",88,"-",189,"VK_OEM_MINUS","-","OEM_MINUS"],[0,52,"Equal",86,"=",187,"VK_OEM_PLUS","=","OEM_PLUS"],[0,53,"BracketLeft",92,"[",219,"VK_OEM_4","[","OEM_4"],[0,54,"BracketRight",94,"]",221,"VK_OEM_6","]","OEM_6"],[0,55,"Backslash",93,"\\",220,"VK_OEM_5","\\","OEM_5"],[0,56,"IntlHash",0,o,0,o,o,o],[0,57,"Semicolon",85,";",186,"VK_OEM_1",";","OEM_1"],[0,58,"Quote",95,"'",222,"VK_OEM_7","'","OEM_7"],[0,59,"Backquote",91,"`",192,"VK_OEM_3","`","OEM_3"],[0,60,"Comma",87,",",188,"VK_OEM_COMMA",",","OEM_COMMA"],[0,61,"Period",89,".",190,"VK_OEM_PERIOD",".","OEM_PERIOD"],[0,62,"Slash",90,"/",191,"VK_OEM_2","/","OEM_2"],[1,63,"CapsLock",8,"CapsLock",20,"VK_CAPITAL",o,o],[1,64,"F1",59,"F1",112,"VK_F1",o,o],[1,65,"F2",60,"F2",113,"VK_F2",o,o],[1,66,"F3",61,"F3",114,"VK_F3",o,o],[1,67,"F4",62,"F4",115,"VK_F4",o,o],[1,68,"F5",63,"F5",116,"VK_F5",o,o],[1,69,"F6",64,"F6",117,"VK_F6",o,o],[1,70,"F7",65,"F7",118,"VK_F7",o,o],[1,71,"F8",66,"F8",119,"VK_F8",o,o],[1,72,"F9",67,"F9",120,"VK_F9",o,o],[1,73,"F10",68,"F10",121,"VK_F10",o,o],[1,74,"F11",69,"F11",122,"VK_F11",o,o],[1,75,"F12",70,"F12",123,"VK_F12",o,o],[1,76,"PrintScreen",0,o,0,o,o,o],[1,77,"ScrollLock",84,"ScrollLock",145,"VK_SCROLL",o,o],[1,78,"Pause",7,"PauseBreak",19,"VK_PAUSE",o,o],[1,79,"Insert",19,"Insert",45,"VK_INSERT",o,o],[1,80,"Home",14,"Home",36,"VK_HOME",o,o],[1,81,"PageUp",11,"PageUp",33,"VK_PRIOR",o,o],[1,82,"Delete",20,"Delete",46,"VK_DELETE",o,o],[1,83,"End",13,"End",35,"VK_END",o,o],[1,84,"PageDown",12,"PageDown",34,"VK_NEXT",o,o],[1,85,"ArrowRight",17,"RightArrow",39,"VK_RIGHT","Right",o],[1,86,"ArrowLeft",15,"LeftArrow",37,"VK_LEFT","Left",o],[1,87,"ArrowDown",18,"DownArrow",40,"VK_DOWN","Down",o],[1,88,"ArrowUp",16,"UpArrow",38,"VK_UP","Up",o],[1,89,"NumLock",83,"NumLock",144,"VK_NUMLOCK",o,o],[1,90,"NumpadDivide",113,"NumPad_Divide",111,"VK_DIVIDE",o,o],[1,91,"NumpadMultiply",108,"NumPad_Multiply",106,"VK_MULTIPLY",o,o],[1,92,"NumpadSubtract",111,"NumPad_Subtract",109,"VK_SUBTRACT",o,o],[1,93,"NumpadAdd",109,"NumPad_Add",107,"VK_ADD",o,o],[1,94,"NumpadEnter",3,o,0,o,o,o],[1,95,"Numpad1",99,"NumPad1",97,"VK_NUMPAD1",o,o],[1,96,"Numpad2",100,"NumPad2",98,"VK_NUMPAD2",o,o],[1,97,"Numpad3",101,"NumPad3",99,"VK_NUMPAD3",o,o],[1,98,"Numpad4",102,"NumPad4",100,"VK_NUMPAD4",o,o],[1,99,"Numpad5",103,"NumPad5",101,"VK_NUMPAD5",o,o],[1,100,"Numpad6",104,"NumPad6",102,"VK_NUMPAD6",o,o],[1,101,"Numpad7",105,"NumPad7",103,"VK_NUMPAD7",o,o],[1,102,"Numpad8",106,"NumPad8",104,"VK_NUMPAD8",o,o],[1,103,"Numpad9",107,"NumPad9",105,"VK_NUMPAD9",o,o],[1,104,"Numpad0",98,"NumPad0",96,"VK_NUMPAD0",o,o],[1,105,"NumpadDecimal",112,"NumPad_Decimal",110,"VK_DECIMAL",o,o],[0,106,"IntlBackslash",97,"OEM_102",226,"VK_OEM_102",o,o],[1,107,"ContextMenu",58,"ContextMenu",93,o,o,o],[1,108,"Power",0,o,0,o,o,o],[1,109,"NumpadEqual",0,o,0,o,o,o],[1,110,"F13",71,"F13",124,"VK_F13",o,o],[1,111,"F14",72,"F14",125,"VK_F14",o,o],[1,112,"F15",73,"F15",126,"VK_F15",o,o],[1,113,"F16",74,"F16",127,"VK_F16",o,o],[1,114,"F17",75,"F17",128,"VK_F17",o,o],[1,115,"F18",76,"F18",129,"VK_F18",o,o],[1,116,"F19",77,"F19",130,"VK_F19",o,o],[1,117,"F20",78,"F20",131,"VK_F20",o,o],[1,118,"F21",79,"F21",132,"VK_F21",o,o],[1,119,"F22",80,"F22",133,"VK_F22",o,o],[1,120,"F23",81,"F23",134,"VK_F23",o,o],[1,121,"F24",82,"F24",135,"VK_F24",o,o],[1,122,"Open",0,o,0,o,o,o],[1,123,"Help",0,o,0,o,o,o],[1,124,"Select",0,o,0,o,o,o],[1,125,"Again",0,o,0,o,o,o],[1,126,"Undo",0,o,0,o,o,o],[1,127,"Cut",0,o,0,o,o,o],[1,128,"Copy",0,o,0,o,o,o],[1,129,"Paste",0,o,0,o,o,o],[1,130,"Find",0,o,0,o,o,o],[1,131,"AudioVolumeMute",117,"AudioVolumeMute",173,"VK_VOLUME_MUTE",o,o],[1,132,"AudioVolumeUp",118,"AudioVolumeUp",175,"VK_VOLUME_UP",o,o],[1,133,"AudioVolumeDown",119,"AudioVolumeDown",174,"VK_VOLUME_DOWN",o,o],[1,134,"NumpadComma",110,"NumPad_Separator",108,"VK_SEPARATOR",o,o],[0,135,"IntlRo",115,"ABNT_C1",193,"VK_ABNT_C1",o,o],[1,136,"KanaMode",0,o,0,o,o,o],[0,137,"IntlYen",0,o,0,o,o,o],[1,138,"Convert",0,o,0,o,o,o],[1,139,"NonConvert",0,o,0,o,o,o],[1,140,"Lang1",0,o,0,o,o,o],[1,141,"Lang2",0,o,0,o,o,o],[1,142,"Lang3",0,o,0,o,o,o],[1,143,"Lang4",0,o,0,o,o,o],[1,144,"Lang5",0,o,0,o,o,o],[1,145,"Abort",0,o,0,o,o,o],[1,146,"Props",0,o,0,o,o,o],[1,147,"NumpadParenLeft",0,o,0,o,o,o],[1,148,"NumpadParenRight",0,o,0,o,o,o],[1,149,"NumpadBackspace",0,o,0,o,o,o],[1,150,"NumpadMemoryStore",0,o,0,o,o,o],[1,151,"NumpadMemoryRecall",0,o,0,o,o,o],[1,152,"NumpadMemoryClear",0,o,0,o,o,o],[1,153,"NumpadMemoryAdd",0,o,0,o,o,o],[1,154,"NumpadMemorySubtract",0,o,0,o,o,o],[1,155,"NumpadClear",131,"Clear",12,"VK_CLEAR",o,o],[1,156,"NumpadClearEntry",0,o,0,o,o,o],[1,0,o,5,"Ctrl",17,"VK_CONTROL",o,o],[1,0,o,4,"Shift",16,"VK_SHIFT",o,o],[1,0,o,6,"Alt",18,"VK_MENU",o,o],[1,0,o,57,"Meta",91,"VK_COMMAND",o,o],[1,157,"ControlLeft",5,o,0,"VK_LCONTROL",o,o],[1,158,"ShiftLeft",4,o,0,"VK_LSHIFT",o,o],[1,159,"AltLeft",6,o,0,"VK_LMENU",o,o],[1,160,"MetaLeft",57,o,0,"VK_LWIN",o,o],[1,161,"ControlRight",5,o,0,"VK_RCONTROL",o,o],[1,162,"ShiftRight",4,o,0,"VK_RSHIFT",o,o],[1,163,"AltRight",6,o,0,"VK_RMENU",o,o],[1,164,"MetaRight",57,o,0,"VK_RWIN",o,o],[1,165,"BrightnessUp",0,o,0,o,o,o],[1,166,"BrightnessDown",0,o,0,o,o,o],[1,167,"MediaPlay",0,o,0,o,o,o],[1,168,"MediaRecord",0,o,0,o,o,o],[1,169,"MediaFastForward",0,o,0,o,o,o],[1,170,"MediaRewind",0,o,0,o,o,o],[1,171,"MediaTrackNext",124,"MediaTrackNext",176,"VK_MEDIA_NEXT_TRACK",o,o],[1,172,"MediaTrackPrevious",125,"MediaTrackPrevious",177,"VK_MEDIA_PREV_TRACK",o,o],[1,173,"MediaStop",126,"MediaStop",178,"VK_MEDIA_STOP",o,o],[1,174,"Eject",0,o,0,o,o,o],[1,175,"MediaPlayPause",127,"MediaPlayPause",179,"VK_MEDIA_PLAY_PAUSE",o,o],[1,176,"MediaSelect",128,"LaunchMediaPlayer",181,"VK_MEDIA_LAUNCH_MEDIA_SELECT",o,o],[1,177,"LaunchMail",129,"LaunchMail",180,"VK_MEDIA_LAUNCH_MAIL",o,o],[1,178,"LaunchApp2",130,"LaunchApp2",183,"VK_MEDIA_LAUNCH_APP2",o,o],[1,179,"LaunchApp1",0,o,0,"VK_MEDIA_LAUNCH_APP1",o,o],[1,180,"SelectTask",0,o,0,o,o,o],[1,181,"LaunchScreenSaver",0,o,0,o,o,o],[1,182,"BrowserSearch",120,"BrowserSearch",170,"VK_BROWSER_SEARCH",o,o],[1,183,"BrowserHome",121,"BrowserHome",172,"VK_BROWSER_HOME",o,o],[1,184,"BrowserBack",122,"BrowserBack",166,"VK_BROWSER_BACK",o,o],[1,185,"BrowserForward",123,"BrowserForward",167,"VK_BROWSER_FORWARD",o,o],[1,186,"BrowserStop",0,o,0,"VK_BROWSER_STOP",o,o],[1,187,"BrowserRefresh",0,o,0,"VK_BROWSER_REFRESH",o,o],[1,188,"BrowserFavorites",0,o,0,"VK_BROWSER_FAVORITES",o,o],[1,189,"ZoomToggle",0,o,0,o,o,o],[1,190,"MailReply",0,o,0,o,o,o],[1,191,"MailForward",0,o,0,o,o,o],[1,192,"MailSend",0,o,0,o,o,o],[1,0,o,114,"KeyInComposition",229,o,o,o],[1,0,o,116,"ABNT_C2",194,"VK_ABNT_C2",o,o],[1,0,o,96,"OEM_8",223,"VK_OEM_8",o,o],[1,0,o,0,o,0,"VK_KANA",o,o],[1,0,o,0,o,0,"VK_HANGUL",o,o],[1,0,o,0,o,0,"VK_JUNJA",o,o],[1,0,o,0,o,0,"VK_FINAL",o,o],[1,0,o,0,o,0,"VK_HANJA",o,o],[1,0,o,0,o,0,"VK_KANJI",o,o],[1,0,o,0,o,0,"VK_CONVERT",o,o],[1,0,o,0,o,0,"VK_NONCONVERT",o,o],[1,0,o,0,o,0,"VK_ACCEPT",o,o],[1,0,o,0,o,0,"VK_MODECHANGE",o,o],[1,0,o,0,o,0,"VK_SELECT",o,o],[1,0,o,0,o,0,"VK_PRINT",o,o],[1,0,o,0,o,0,"VK_EXECUTE",o,o],[1,0,o,0,o,0,"VK_SNAPSHOT",o,o],[1,0,o,0,o,0,"VK_HELP",o,o],[1,0,o,0,o,0,"VK_APPS",o,o],[1,0,o,0,o,0,"VK_PROCESSKEY",o,o],[1,0,o,0,o,0,"VK_PACKET",o,o],[1,0,o,0,o,0,"VK_DBE_SBCSCHAR",o,o],[1,0,o,0,o,0,"VK_DBE_DBCSCHAR",o,o],[1,0,o,0,o,0,"VK_ATTN",o,o],[1,0,o,0,o,0,"VK_CRSEL",o,o],[1,0,o,0,o,0,"VK_EXSEL",o,o],[1,0,o,0,o,0,"VK_EREOF",o,o],[1,0,o,0,o,0,"VK_PLAY",o,o],[1,0,o,0,o,0,"VK_ZOOM",o,o],[1,0,o,0,o,0,"VK_NONAME",o,o],[1,0,o,0,o,0,"VK_PA1",o,o],[1,0,o,0,o,0,"VK_OEM_CLEAR",o,o]],t=[],i=[];for(const n of e){const[s,r,a,l,c,u,f,g,p]=n;if(i[r]||(i[r]=!0,Jxe[a]=r,eke[a.toLowerCase()]=r,s&&(Tq[r]=l)),!t[l]){if(t[l]=!0,!c)throw new Error(`String representation missing for key code ${l} around scan code ${a}`);uM.define(l,c),Q9.define(l,g||c),J9.define(l,p||g||c)}u&&(Ple[u]=l)}})();var Kf;(function(o){function e(a){return uM.keyCodeToStr(a)}o.toString=e;function t(a){return uM.strToKeyCode(a)}o.fromString=t;function i(a){return Q9.keyCodeToStr(a)}o.toUserSettingsUS=i;function n(a){return J9.keyCodeToStr(a)}o.toUserSettingsGeneral=n;function s(a){return Q9.strToKeyCode(a)||J9.strToKeyCode(a)}o.fromUserSettings=s;function r(a){if(a>=98&&a<=113)return null;switch(a){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return uM.keyCodeToStr(a)}o.toElectronAccelerator=r})(Kf||(Kf={}));function Is(o,e){const t=(e&65535)<<16>>>0;return(o|t)>>>0}var Pte={};let p1;const AH=globalThis.vscode;var sle;if(typeof AH<"u"&&typeof AH.process<"u"){const o=AH.process;p1={get platform(){return o.platform},get arch(){return o.arch},get env(){return o.env},cwd(){return o.cwd()}}}else typeof process<"u"&&typeof((sle=process==null?void 0:process.versions)==null?void 0:sle.node)=="string"?p1={get platform(){return process.platform},get arch(){return process.arch},get env(){return Pte},cwd(){return Pte.VSCODE_CWD||process.cwd()}}:p1={get platform(){return Po?"win32":Kt?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};const lA=p1.cwd,e8=p1.env,tke=p1.platform,ike=65,nke=97,ske=90,oke=122,am=46,gr=47,Sl=92,bp=58,rke=63;class Ole extends Error{constructor(e,t,i){let n;typeof t=="string"&&t.indexOf("not ")===0?(n="must not be",t=t.replace(/^not /,"")):n="must be";const s=e.indexOf(".")!==-1?"property":"argument";let r=`The "${e}" ${s} ${n} of type ${t}`;r+=`. Received type ${typeof i}`,super(r),this.code="ERR_INVALID_ARG_TYPE"}}function ake(o,e){if(o===null||typeof o!="object")throw new Ole(e,"Object",o)}function oo(o,e){if(typeof o!="string")throw new Ole(e,"string",o)}const Mg=tke==="win32";function Pi(o){return o===gr||o===Sl}function t8(o){return o===gr}function Cp(o){return o>=ike&&o<=ske||o>=nke&&o<=oke}function cA(o,e,t,i){let n="",s=0,r=-1,a=0,l=0;for(let c=0;c<=o.length;++c){if(c<o.length)l=o.charCodeAt(c);else{if(i(l))break;l=gr}if(i(l)){if(!(r===c-1||a===1))if(a===2){if(n.length<2||s!==2||n.charCodeAt(n.length-1)!==am||n.charCodeAt(n.length-2)!==am){if(n.length>2){const u=n.lastIndexOf(t);u===-1?(n="",s=0):(n=n.slice(0,u),s=n.length-1-n.lastIndexOf(t)),r=c,a=0;continue}else if(n.length!==0){n="",s=0,r=c,a=0;continue}}e&&(n+=n.length>0?`${t}..`:"..",s=2)}else n.length>0?n+=`${t}${o.slice(r+1,c)}`:n=o.slice(r+1,c),s=c-r-1;r=c,a=0}else l===am&&a!==-1?++a:a=-1}return n}function lke(o){return o?`${o[0]==="."?"":"."}${o}`:""}function Fle(o,e){ake(e,"pathObject");const t=e.dir||e.root,i=e.base||`${e.name||""}${lke(e.ext)}`;return t?t===e.root?`${t}${i}`:`${t}${o}${i}`:i}const La={resolve(...o){let e="",t="",i=!1;for(let n=o.length-1;n>=-1;n--){let s;if(n>=0){if(s=o[n],oo(s,`paths[${n}]`),s.length===0)continue}else e.length===0?s=lA():(s=e8[`=${e}`]||lA(),(s===void 0||s.slice(0,2).toLowerCase()!==e.toLowerCase()&&s.charCodeAt(2)===Sl)&&(s=`${e}\\`));const r=s.length;let a=0,l="",c=!1;const u=s.charCodeAt(0);if(r===1)Pi(u)&&(a=1,c=!0);else if(Pi(u))if(c=!0,Pi(s.charCodeAt(1))){let f=2,g=f;for(;f<r&&!Pi(s.charCodeAt(f));)f++;if(f<r&&f!==g){const p=s.slice(g,f);for(g=f;f<r&&Pi(s.charCodeAt(f));)f++;if(f<r&&f!==g){for(g=f;f<r&&!Pi(s.charCodeAt(f));)f++;(f===r||f!==g)&&(l=`\\\\${p}\\${s.slice(g,f)}`,a=f)}}}else a=1;else Cp(u)&&s.charCodeAt(1)===bp&&(l=s.slice(0,2),a=2,r>2&&Pi(s.charCodeAt(2))&&(c=!0,a=3));if(l.length>0)if(e.length>0){if(l.toLowerCase()!==e.toLowerCase())continue}else e=l;if(i){if(e.length>0)break}else if(t=`${s.slice(a)}\\${t}`,i=c,c&&e.length>0)break}return t=cA(t,!i,"\\",Pi),i?`${e}\\${t}`:`${e}${t}`||"."},normalize(o){oo(o,"path");const e=o.length;if(e===0)return".";let t=0,i,n=!1;const s=o.charCodeAt(0);if(e===1)return t8(s)?"\\":o;if(Pi(s))if(n=!0,Pi(o.charCodeAt(1))){let a=2,l=a;for(;a<e&&!Pi(o.charCodeAt(a));)a++;if(a<e&&a!==l){const c=o.slice(l,a);for(l=a;a<e&&Pi(o.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!Pi(o.charCodeAt(a));)a++;if(a===e)return`\\\\${c}\\${o.slice(l)}\\`;a!==l&&(i=`\\\\${c}\\${o.slice(l,a)}`,t=a)}}}else t=1;else Cp(s)&&o.charCodeAt(1)===bp&&(i=o.slice(0,2),t=2,e>2&&Pi(o.charCodeAt(2))&&(n=!0,t=3));let r=t<e?cA(o.slice(t),!n,"\\",Pi):"";return r.length===0&&!n&&(r="."),r.length>0&&Pi(o.charCodeAt(e-1))&&(r+="\\"),i===void 0?n?`\\${r}`:r:n?`${i}\\${r}`:`${i}${r}`},isAbsolute(o){oo(o,"path");const e=o.length;if(e===0)return!1;const t=o.charCodeAt(0);return Pi(t)||e>2&&Cp(t)&&o.charCodeAt(1)===bp&&Pi(o.charCodeAt(2))},join(...o){if(o.length===0)return".";let e,t;for(let s=0;s<o.length;++s){const r=o[s];oo(r,"path"),r.length>0&&(e===void 0?e=t=r:e+=`\\${r}`)}if(e===void 0)return".";let i=!0,n=0;if(typeof t=="string"&&Pi(t.charCodeAt(0))){++n;const s=t.length;s>1&&Pi(t.charCodeAt(1))&&(++n,s>2&&(Pi(t.charCodeAt(2))?++n:i=!1))}if(i){for(;n<e.length&&Pi(e.charCodeAt(n));)n++;n>=2&&(e=`\\${e.slice(n)}`)}return La.normalize(e)},relative(o,e){if(oo(o,"from"),oo(e,"to"),o===e)return"";const t=La.resolve(o),i=La.resolve(e);if(t===i||(o=t.toLowerCase(),e=i.toLowerCase(),o===e))return"";let n=0;for(;n<o.length&&o.charCodeAt(n)===Sl;)n++;let s=o.length;for(;s-1>n&&o.charCodeAt(s-1)===Sl;)s--;const r=s-n;let a=0;for(;a<e.length&&e.charCodeAt(a)===Sl;)a++;let l=e.length;for(;l-1>a&&e.charCodeAt(l-1)===Sl;)l--;const c=l-a,u=r<c?r:c;let f=-1,g=0;for(;g<u;g++){const _=o.charCodeAt(n+g);if(_!==e.charCodeAt(a+g))break;_===Sl&&(f=g)}if(g!==u){if(f===-1)return i}else{if(c>u){if(e.charCodeAt(a+g)===Sl)return i.slice(a+g+1);if(g===2)return i.slice(a+g)}r>u&&(o.charCodeAt(n+g)===Sl?f=g:g===2&&(f=3)),f===-1&&(f=0)}let p="";for(g=n+f+1;g<=s;++g)(g===s||o.charCodeAt(g)===Sl)&&(p+=p.length===0?"..":"\\..");return a+=f,p.length>0?`${p}${i.slice(a,l)}`:(i.charCodeAt(a)===Sl&&++a,i.slice(a,l))},toNamespacedPath(o){if(typeof o!="string"||o.length===0)return o;const e=La.resolve(o);if(e.length<=2)return o;if(e.charCodeAt(0)===Sl){if(e.charCodeAt(1)===Sl){const t=e.charCodeAt(2);if(t!==rke&&t!==am)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(Cp(e.charCodeAt(0))&&e.charCodeAt(1)===bp&&e.charCodeAt(2)===Sl)return`\\\\?\\${e}`;return o},dirname(o){oo(o,"path");const e=o.length;if(e===0)return".";let t=-1,i=0;const n=o.charCodeAt(0);if(e===1)return Pi(n)?o:".";if(Pi(n)){if(t=i=1,Pi(o.charCodeAt(1))){let a=2,l=a;for(;a<e&&!Pi(o.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&Pi(o.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!Pi(o.charCodeAt(a));)a++;if(a===e)return o;a!==l&&(t=i=a+1)}}}}else Cp(n)&&o.charCodeAt(1)===bp&&(t=e>2&&Pi(o.charCodeAt(2))?3:2,i=t);let s=-1,r=!0;for(let a=e-1;a>=i;--a)if(Pi(o.charCodeAt(a))){if(!r){s=a;break}}else r=!1;if(s===-1){if(t===-1)return".";s=t}return o.slice(0,s)},basename(o,e){e!==void 0&&oo(e,"suffix"),oo(o,"path");let t=0,i=-1,n=!0,s;if(o.length>=2&&Cp(o.charCodeAt(0))&&o.charCodeAt(1)===bp&&(t=2),e!==void 0&&e.length>0&&e.length<=o.length){if(e===o)return"";let r=e.length-1,a=-1;for(s=o.length-1;s>=t;--s){const l=o.charCodeAt(s);if(Pi(l)){if(!n){t=s+1;break}}else a===-1&&(n=!1,a=s+1),r>=0&&(l===e.charCodeAt(r)?--r===-1&&(i=s):(r=-1,i=a))}return t===i?i=a:i===-1&&(i=o.length),o.slice(t,i)}for(s=o.length-1;s>=t;--s)if(Pi(o.charCodeAt(s))){if(!n){t=s+1;break}}else i===-1&&(n=!1,i=s+1);return i===-1?"":o.slice(t,i)},extname(o){oo(o,"path");let e=0,t=-1,i=0,n=-1,s=!0,r=0;o.length>=2&&o.charCodeAt(1)===bp&&Cp(o.charCodeAt(0))&&(e=i=2);for(let a=o.length-1;a>=e;--a){const l=o.charCodeAt(a);if(Pi(l)){if(!s){i=a+1;break}continue}n===-1&&(s=!1,n=a+1),l===am?t===-1?t=a:r!==1&&(r=1):t!==-1&&(r=-1)}return t===-1||n===-1||r===0||r===1&&t===n-1&&t===i+1?"":o.slice(t,n)},format:Fle.bind(null,"\\"),parse(o){oo(o,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(o.length===0)return e;const t=o.length;let i=0,n=o.charCodeAt(0);if(t===1)return Pi(n)?(e.root=e.dir=o,e):(e.base=e.name=o,e);if(Pi(n)){if(i=1,Pi(o.charCodeAt(1))){let f=2,g=f;for(;f<t&&!Pi(o.charCodeAt(f));)f++;if(f<t&&f!==g){for(g=f;f<t&&Pi(o.charCodeAt(f));)f++;if(f<t&&f!==g){for(g=f;f<t&&!Pi(o.charCodeAt(f));)f++;f===t?i=f:f!==g&&(i=f+1)}}}}else if(Cp(n)&&o.charCodeAt(1)===bp){if(t<=2)return e.root=e.dir=o,e;if(i=2,Pi(o.charCodeAt(2))){if(t===3)return e.root=e.dir=o,e;i=3}}i>0&&(e.root=o.slice(0,i));let s=-1,r=i,a=-1,l=!0,c=o.length-1,u=0;for(;c>=i;--c){if(n=o.charCodeAt(c),Pi(n)){if(!l){r=c+1;break}continue}a===-1&&(l=!1,a=c+1),n===am?s===-1?s=c:u!==1&&(u=1):s!==-1&&(u=-1)}return a!==-1&&(s===-1||u===0||u===1&&s===a-1&&s===r+1?e.base=e.name=o.slice(r,a):(e.name=o.slice(r,s),e.base=o.slice(r,a),e.ext=o.slice(s,a))),r>0&&r!==i?e.dir=o.slice(0,r-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null},cke=(()=>{if(Mg){const o=/\\/g;return()=>{const e=lA().replace(o,"/");return e.slice(e.indexOf("/"))}}return()=>lA()})(),Cs={resolve(...o){let e="",t=!1;for(let i=o.length-1;i>=-1&&!t;i--){const n=i>=0?o[i]:cke();oo(n,`paths[${i}]`),n.length!==0&&(e=`${n}/${e}`,t=n.charCodeAt(0)===gr)}return e=cA(e,!t,"/",t8),t?`/${e}`:e.length>0?e:"."},normalize(o){if(oo(o,"path"),o.length===0)return".";const e=o.charCodeAt(0)===gr,t=o.charCodeAt(o.length-1)===gr;return o=cA(o,!e,"/",t8),o.length===0?e?"/":t?"./":".":(t&&(o+="/"),e?`/${o}`:o)},isAbsolute(o){return oo(o,"path"),o.length>0&&o.charCodeAt(0)===gr},join(...o){if(o.length===0)return".";let e;for(let t=0;t<o.length;++t){const i=o[t];oo(i,"path"),i.length>0&&(e===void 0?e=i:e+=`/${i}`)}return e===void 0?".":Cs.normalize(e)},relative(o,e){if(oo(o,"from"),oo(e,"to"),o===e||(o=Cs.resolve(o),e=Cs.resolve(e),o===e))return"";const t=1,i=o.length,n=i-t,s=1,r=e.length-s,a=n<r?n:r;let l=-1,c=0;for(;c<a;c++){const f=o.charCodeAt(t+c);if(f!==e.charCodeAt(s+c))break;f===gr&&(l=c)}if(c===a)if(r>a){if(e.charCodeAt(s+c)===gr)return e.slice(s+c+1);if(c===0)return e.slice(s+c)}else n>a&&(o.charCodeAt(t+c)===gr?l=c:c===0&&(l=0));let u="";for(c=t+l+1;c<=i;++c)(c===i||o.charCodeAt(c)===gr)&&(u+=u.length===0?"..":"/..");return`${u}${e.slice(s+l)}`},toNamespacedPath(o){return o},dirname(o){if(oo(o,"path"),o.length===0)return".";const e=o.charCodeAt(0)===gr;let t=-1,i=!0;for(let n=o.length-1;n>=1;--n)if(o.charCodeAt(n)===gr){if(!i){t=n;break}}else i=!1;return t===-1?e?"/":".":e&&t===1?"//":o.slice(0,t)},basename(o,e){e!==void 0&&oo(e,"ext"),oo(o,"path");let t=0,i=-1,n=!0,s;if(e!==void 0&&e.length>0&&e.length<=o.length){if(e===o)return"";let r=e.length-1,a=-1;for(s=o.length-1;s>=0;--s){const l=o.charCodeAt(s);if(l===gr){if(!n){t=s+1;break}}else a===-1&&(n=!1,a=s+1),r>=0&&(l===e.charCodeAt(r)?--r===-1&&(i=s):(r=-1,i=a))}return t===i?i=a:i===-1&&(i=o.length),o.slice(t,i)}for(s=o.length-1;s>=0;--s)if(o.charCodeAt(s)===gr){if(!n){t=s+1;break}}else i===-1&&(n=!1,i=s+1);return i===-1?"":o.slice(t,i)},extname(o){oo(o,"path");let e=-1,t=0,i=-1,n=!0,s=0;for(let r=o.length-1;r>=0;--r){const a=o.charCodeAt(r);if(a===gr){if(!n){t=r+1;break}continue}i===-1&&(n=!1,i=r+1),a===am?e===-1?e=r:s!==1&&(s=1):e!==-1&&(s=-1)}return e===-1||i===-1||s===0||s===1&&e===i-1&&e===t+1?"":o.slice(e,i)},format:Fle.bind(null,"/"),parse(o){oo(o,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(o.length===0)return e;const t=o.charCodeAt(0)===gr;let i;t?(e.root="/",i=1):i=0;let n=-1,s=0,r=-1,a=!0,l=o.length-1,c=0;for(;l>=i;--l){const u=o.charCodeAt(l);if(u===gr){if(!a){s=l+1;break}continue}r===-1&&(a=!1,r=l+1),u===am?n===-1?n=l:c!==1&&(c=1):n!==-1&&(c=-1)}if(r!==-1){const u=s===0&&t?1:s;n===-1||c===0||c===1&&n===r-1&&n===s+1?e.base=e.name=o.slice(u,r):(e.name=o.slice(u,n),e.base=o.slice(u,r),e.ext=o.slice(n,r))}return s>0?e.dir=o.slice(0,s-1):t&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};Cs.win32=La.win32=La;Cs.posix=La.posix=Cs;const Ble=Mg?La.normalize:Cs.normalize,dke=Mg?La.join:Cs.join,uke=Mg?La.resolve:Cs.resolve,hke=Mg?La.relative:Cs.relative,Wle=Mg?La.dirname:Cs.dirname,lm=Mg?La.basename:Cs.basename,fke=Mg?La.extname:Cs.extname,ou=Mg?La.sep:Cs.sep,gke=/^\w[\w\d+.-]*$/,pke=/^\//,mke=/^\/\//;function _ke(o,e){if(!o.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${o.authority}", path: "${o.path}", query: "${o.query}", fragment: "${o.fragment}"}`);if(o.scheme&&!gke.test(o.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(o.path){if(o.authority){if(!pke.test(o.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(mke.test(o.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function vke(o,e){return!o&&!e?"file":o}function bke(o,e){switch(o){case"https":case"http":case"file":e?e[0]!==Yd&&(e=Yd+e):e=Yd;break}return e}const vs="",Yd="/",Cke=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class st{static isUri(e){return e instanceof st?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}constructor(e,t,i,n,s,r=!1){typeof e=="object"?(this.scheme=e.scheme||vs,this.authority=e.authority||vs,this.path=e.path||vs,this.query=e.query||vs,this.fragment=e.fragment||vs):(this.scheme=vke(e,r),this.authority=t||vs,this.path=bke(this.scheme,i||vs),this.query=n||vs,this.fragment=s||vs,_ke(this,r))}get fsPath(){return dA(this,!1)}with(e){if(!e)return this;let{scheme:t,authority:i,path:n,query:s,fragment:r}=e;return t===void 0?t=this.scheme:t===null&&(t=vs),i===void 0?i=this.authority:i===null&&(i=vs),n===void 0?n=this.path:n===null&&(n=vs),s===void 0?s=this.query:s===null&&(s=vs),r===void 0?r=this.fragment:r===null&&(r=vs),t===this.scheme&&i===this.authority&&n===this.path&&s===this.query&&r===this.fragment?this:new Gy(t,i,n,s,r)}static parse(e,t=!1){const i=Cke.exec(e);return i?new Gy(i[2]||vs,QN(i[4]||vs),QN(i[5]||vs),QN(i[7]||vs),QN(i[9]||vs),t):new Gy(vs,vs,vs,vs,vs)}static file(e){let t=vs;if(Po&&(e=e.replace(/\\/g,Yd)),e[0]===Yd&&e[1]===Yd){const i=e.indexOf(Yd,2);i===-1?(t=e.substring(2),e=Yd):(t=e.substring(2,i),e=e.substring(i)||Yd)}return new Gy("file",t,e,vs,vs)}static from(e,t){return new Gy(e.scheme,e.authority,e.path,e.query,e.fragment,t)}static joinPath(e,...t){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let i;return Po&&e.scheme==="file"?i=st.file(La.join(dA(e,!0),...t)).path:i=Cs.join(e.path,...t),e.with({path:i})}toString(e=!1){return i8(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof st)return e;{const t=new Gy(e);return t._formatted=e.external??null,t._fsPath=e._sep===Hle?e.fsPath??null:null,t}}else return e}}const Hle=Po?1:void 0;let Gy=class extends st{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=dA(this,!1)),this._fsPath}toString(e=!1){return e?i8(this,!0):(this._formatted||(this._formatted=i8(this,!1)),this._formatted)}toJSON(){const e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=Hle),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}};const Vle={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function Ote(o,e,t){let i,n=-1;for(let s=0;s<o.length;s++){const r=o.charCodeAt(s);if(r>=97&&r<=122||r>=65&&r<=90||r>=48&&r<=57||r===45||r===46||r===95||r===126||e&&r===47||t&&r===91||t&&r===93||t&&r===58)n!==-1&&(i+=encodeURIComponent(o.substring(n,s)),n=-1),i!==void 0&&(i+=o.charAt(s));else{i===void 0&&(i=o.substr(0,s));const a=Vle[r];a!==void 0?(n!==-1&&(i+=encodeURIComponent(o.substring(n,s)),n=-1),i+=a):n===-1&&(n=s)}}return n!==-1&&(i+=encodeURIComponent(o.substring(n))),i!==void 0?i:o}function yke(o){let e;for(let t=0;t<o.length;t++){const i=o.charCodeAt(t);i===35||i===63?(e===void 0&&(e=o.substr(0,t)),e+=Vle[i]):e!==void 0&&(e+=o[t])}return e!==void 0?e:o}function dA(o,e){let t;return o.authority&&o.path.length>1&&o.scheme==="file"?t=`//${o.authority}${o.path}`:o.path.charCodeAt(0)===47&&(o.path.charCodeAt(1)>=65&&o.path.charCodeAt(1)<=90||o.path.charCodeAt(1)>=97&&o.path.charCodeAt(1)<=122)&&o.path.charCodeAt(2)===58?e?t=o.path.substr(1):t=o.path[1].toLowerCase()+o.path.substr(2):t=o.path,Po&&(t=t.replace(/\//g,"\\")),t}function i8(o,e){const t=e?yke:Ote;let i="",{scheme:n,authority:s,path:r,query:a,fragment:l}=o;if(n&&(i+=n,i+=":"),(s||n==="file")&&(i+=Yd,i+=Yd),s){let c=s.indexOf("@");if(c!==-1){const u=s.substr(0,c);s=s.substr(c+1),c=u.lastIndexOf(":"),c===-1?i+=t(u,!1,!1):(i+=t(u.substr(0,c),!1,!1),i+=":",i+=t(u.substr(c+1),!1,!0)),i+="@"}s=s.toLowerCase(),c=s.lastIndexOf(":"),c===-1?i+=t(s,!1,!0):(i+=t(s.substr(0,c),!1,!0),i+=s.substr(c))}if(r){if(r.length>=3&&r.charCodeAt(0)===47&&r.charCodeAt(2)===58){const c=r.charCodeAt(1);c>=65&&c<=90&&(r=`/${String.fromCharCode(c+32)}:${r.substr(3)}`)}else if(r.length>=2&&r.charCodeAt(1)===58){const c=r.charCodeAt(0);c>=65&&c<=90&&(r=`${String.fromCharCode(c+32)}:${r.substr(2)}`)}i+=t(r,!0,!1)}return a&&(i+="?",i+=t(a,!1,!1)),l&&(i+="#",i+=e?l:Ote(l,!1,!1)),i}function zle(o){try{return decodeURIComponent(o)}catch{return o.length>3?o.substr(0,3)+zle(o.substr(3)):o}}const Fte=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function QN(o){return o.match(Fte)?o.replace(Fte,e=>zle(e)):o}let G=class nv{constructor(e,t){this.lineNumber=e,this.column=t}with(e=this.lineNumber,t=this.column){return e===this.lineNumber&&t===this.column?this:new nv(e,t)}delta(e=0,t=0){return this.with(this.lineNumber+e,this.column+t)}equals(e){return nv.equals(this,e)}static equals(e,t){return!e&&!t?!0:!!e&&!!t&&e.lineNumber===t.lineNumber&&e.column===t.column}isBefore(e){return nv.isBefore(this,e)}static isBefore(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<t.column}isBeforeOrEqual(e){return nv.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<=t.column}static compare(e,t){const i=e.lineNumber|0,n=t.lineNumber|0;if(i===n){const s=e.column|0,r=t.column|0;return s-r}return i-n}clone(){return new nv(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new nv(e.lineNumber,e.column)}static isIPosition(e){return e&&typeof e.lineNumber=="number"&&typeof e.column=="number"}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}},M=class go{constructor(e,t,i,n){e>i||e===i&&t>n?(this.startLineNumber=i,this.startColumn=n,this.endLineNumber=e,this.endColumn=t):(this.startLineNumber=e,this.startColumn=t,this.endLineNumber=i,this.endColumn=n)}isEmpty(){return go.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return go.containsPosition(this,e)}static containsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<e.startColumn||t.lineNumber===e.endLineNumber&&t.column>e.endColumn)}static strictContainsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<=e.startColumn||t.lineNumber===e.endLineNumber&&t.column>=e.endColumn)}containsRange(e){return go.containsRange(this,e)}static containsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>e.endColumn)}strictContainsRange(e){return go.strictContainsRange(this,e)}static strictContainsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<=e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>=e.endColumn)}plusRange(e){return go.plusRange(this,e)}static plusRange(e,t){let i,n,s,r;return t.startLineNumber<e.startLineNumber?(i=t.startLineNumber,n=t.startColumn):t.startLineNumber===e.startLineNumber?(i=t.startLineNumber,n=Math.min(t.startColumn,e.startColumn)):(i=e.startLineNumber,n=e.startColumn),t.endLineNumber>e.endLineNumber?(s=t.endLineNumber,r=t.endColumn):t.endLineNumber===e.endLineNumber?(s=t.endLineNumber,r=Math.max(t.endColumn,e.endColumn)):(s=e.endLineNumber,r=e.endColumn),new go(i,n,s,r)}intersectRanges(e){return go.intersectRanges(this,e)}static intersectRanges(e,t){let i=e.startLineNumber,n=e.startColumn,s=e.endLineNumber,r=e.endColumn;const a=t.startLineNumber,l=t.startColumn,c=t.endLineNumber,u=t.endColumn;return i<a?(i=a,n=l):i===a&&(n=Math.max(n,l)),s>c?(s=c,r=u):s===c&&(r=Math.min(r,u)),i>s||i===s&&n>r?null:new go(i,n,s,r)}equalsRange(e){return go.equalsRange(this,e)}static equalsRange(e,t){return!e&&!t?!0:!!e&&!!t&&e.startLineNumber===t.startLineNumber&&e.startColumn===t.startColumn&&e.endLineNumber===t.endLineNumber&&e.endColumn===t.endColumn}getEndPosition(){return go.getEndPosition(this)}static getEndPosition(e){return new G(e.endLineNumber,e.endColumn)}getStartPosition(){return go.getStartPosition(this)}static getStartPosition(e){return new G(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,t){return new go(this.startLineNumber,this.startColumn,e,t)}setStartPosition(e,t){return new go(e,t,this.endLineNumber,this.endColumn)}collapseToStart(){return go.collapseToStart(this)}static collapseToStart(e){return new go(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}collapseToEnd(){return go.collapseToEnd(this)}static collapseToEnd(e){return new go(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn)}delta(e){return new go(this.startLineNumber+e,this.startColumn,this.endLineNumber+e,this.endColumn)}static fromPositions(e,t=e){return new go(e.lineNumber,e.column,t.lineNumber,t.column)}static lift(e){return e?new go(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&typeof e.startLineNumber=="number"&&typeof e.startColumn=="number"&&typeof e.endLineNumber=="number"&&typeof e.endColumn=="number"}static areIntersectingOrTouching(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<e.startColumn)}static areIntersecting(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<=t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,t){if(e&&t){const s=e.startLineNumber|0,r=t.startLineNumber|0;if(s===r){const a=e.startColumn|0,l=t.startColumn|0;if(a===l){const c=e.endLineNumber|0,u=t.endLineNumber|0;if(c===u){const f=e.endColumn|0,g=t.endColumn|0;return f-g}return c-u}return a-l}return s-r}return(e?1:0)-(t?1:0)}static compareRangesUsingEnds(e,t){return e.endLineNumber===t.endLineNumber?e.endColumn===t.endColumn?e.startLineNumber===t.startLineNumber?e.startColumn-t.startColumn:e.startLineNumber-t.startLineNumber:e.endColumn-t.endColumn:e.endLineNumber-t.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}toJSON(){return this}},Ke=class $c extends M{constructor(e,t,i,n){super(e,t,i,n),this.selectionStartLineNumber=e,this.selectionStartColumn=t,this.positionLineNumber=i,this.positionColumn=n}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(e){return $c.selectionsEqual(this,e)}static selectionsEqual(e,t){return e.selectionStartLineNumber===t.selectionStartLineNumber&&e.selectionStartColumn===t.selectionStartColumn&&e.positionLineNumber===t.positionLineNumber&&e.positionColumn===t.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(e,t){return this.getDirection()===0?new $c(this.startLineNumber,this.startColumn,e,t):new $c(e,t,this.startLineNumber,this.startColumn)}getPosition(){return new G(this.positionLineNumber,this.positionColumn)}getSelectionStart(){return new G(this.selectionStartLineNumber,this.selectionStartColumn)}setStartPosition(e,t){return this.getDirection()===0?new $c(e,t,this.endLineNumber,this.endColumn):new $c(this.endLineNumber,this.endColumn,e,t)}static fromPositions(e,t=e){return new $c(e.lineNumber,e.column,t.lineNumber,t.column)}static fromRange(e,t){return t===0?new $c(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):new $c(e.endLineNumber,e.endColumn,e.startLineNumber,e.startColumn)}static liftSelection(e){return new $c(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn)}static selectionsArrEqual(e,t){if(e&&!t||!e&&t)return!1;if(!e&&!t)return!0;if(e.length!==t.length)return!1;for(let i=0,n=e.length;i<n;i++)if(!this.selectionsEqual(e[i],t[i]))return!1;return!0}static isISelection(e){return e&&typeof e.selectionStartLineNumber=="number"&&typeof e.selectionStartColumn=="number"&&typeof e.positionLineNumber=="number"&&typeof e.positionColumn=="number"}static createWithDirection(e,t,i,n,s){return s===0?new $c(e,t,i,n):new $c(i,n,e,t)}};const n8=Object.create(null);function T(o,e){if(xa(e)){const t=n8[e];if(t===void 0)throw new Error(`${o} references an unknown codicon: ${e}`);e=t}return n8[o]=e,{id:o}}function Ule(){return n8}const wke={add:T("add",6e4),plus:T("plus",6e4),gistNew:T("gist-new",6e4),repoCreate:T("repo-create",6e4),lightbulb:T("lightbulb",60001),lightBulb:T("light-bulb",60001),repo:T("repo",60002),repoDelete:T("repo-delete",60002),gistFork:T("gist-fork",60003),repoForked:T("repo-forked",60003),gitPullRequest:T("git-pull-request",60004),gitPullRequestAbandoned:T("git-pull-request-abandoned",60004),recordKeys:T("record-keys",60005),keyboard:T("keyboard",60005),tag:T("tag",60006),gitPullRequestLabel:T("git-pull-request-label",60006),tagAdd:T("tag-add",60006),tagRemove:T("tag-remove",60006),person:T("person",60007),personFollow:T("person-follow",60007),personOutline:T("person-outline",60007),personFilled:T("person-filled",60007),gitBranch:T("git-branch",60008),gitBranchCreate:T("git-branch-create",60008),gitBranchDelete:T("git-branch-delete",60008),sourceControl:T("source-control",60008),mirror:T("mirror",60009),mirrorPublic:T("mirror-public",60009),star:T("star",60010),starAdd:T("star-add",60010),starDelete:T("star-delete",60010),starEmpty:T("star-empty",60010),comment:T("comment",60011),commentAdd:T("comment-add",60011),alert:T("alert",60012),warning:T("warning",60012),search:T("search",60013),searchSave:T("search-save",60013),logOut:T("log-out",60014),signOut:T("sign-out",60014),logIn:T("log-in",60015),signIn:T("sign-in",60015),eye:T("eye",60016),eyeUnwatch:T("eye-unwatch",60016),eyeWatch:T("eye-watch",60016),circleFilled:T("circle-filled",60017),primitiveDot:T("primitive-dot",60017),closeDirty:T("close-dirty",60017),debugBreakpoint:T("debug-breakpoint",60017),debugBreakpointDisabled:T("debug-breakpoint-disabled",60017),debugHint:T("debug-hint",60017),terminalDecorationSuccess:T("terminal-decoration-success",60017),primitiveSquare:T("primitive-square",60018),edit:T("edit",60019),pencil:T("pencil",60019),info:T("info",60020),issueOpened:T("issue-opened",60020),gistPrivate:T("gist-private",60021),gitForkPrivate:T("git-fork-private",60021),lock:T("lock",60021),mirrorPrivate:T("mirror-private",60021),close:T("close",60022),removeClose:T("remove-close",60022),x:T("x",60022),repoSync:T("repo-sync",60023),sync:T("sync",60023),clone:T("clone",60024),desktopDownload:T("desktop-download",60024),beaker:T("beaker",60025),microscope:T("microscope",60025),vm:T("vm",60026),deviceDesktop:T("device-desktop",60026),file:T("file",60027),fileText:T("file-text",60027),more:T("more",60028),ellipsis:T("ellipsis",60028),kebabHorizontal:T("kebab-horizontal",60028),mailReply:T("mail-reply",60029),reply:T("reply",60029),organization:T("organization",60030),organizationFilled:T("organization-filled",60030),organizationOutline:T("organization-outline",60030),newFile:T("new-file",60031),fileAdd:T("file-add",60031),newFolder:T("new-folder",60032),fileDirectoryCreate:T("file-directory-create",60032),trash:T("trash",60033),trashcan:T("trashcan",60033),history:T("history",60034),clock:T("clock",60034),folder:T("folder",60035),fileDirectory:T("file-directory",60035),symbolFolder:T("symbol-folder",60035),logoGithub:T("logo-github",60036),markGithub:T("mark-github",60036),github:T("github",60036),terminal:T("terminal",60037),console:T("console",60037),repl:T("repl",60037),zap:T("zap",60038),symbolEvent:T("symbol-event",60038),error:T("error",60039),stop:T("stop",60039),variable:T("variable",60040),symbolVariable:T("symbol-variable",60040),array:T("array",60042),symbolArray:T("symbol-array",60042),symbolModule:T("symbol-module",60043),symbolPackage:T("symbol-package",60043),symbolNamespace:T("symbol-namespace",60043),symbolObject:T("symbol-object",60043),symbolMethod:T("symbol-method",60044),symbolFunction:T("symbol-function",60044),symbolConstructor:T("symbol-constructor",60044),symbolBoolean:T("symbol-boolean",60047),symbolNull:T("symbol-null",60047),symbolNumeric:T("symbol-numeric",60048),symbolNumber:T("symbol-number",60048),symbolStructure:T("symbol-structure",60049),symbolStruct:T("symbol-struct",60049),symbolParameter:T("symbol-parameter",60050),symbolTypeParameter:T("symbol-type-parameter",60050),symbolKey:T("symbol-key",60051),symbolText:T("symbol-text",60051),symbolReference:T("symbol-reference",60052),goToFile:T("go-to-file",60052),symbolEnum:T("symbol-enum",60053),symbolValue:T("symbol-value",60053),symbolRuler:T("symbol-ruler",60054),symbolUnit:T("symbol-unit",60054),activateBreakpoints:T("activate-breakpoints",60055),archive:T("archive",60056),arrowBoth:T("arrow-both",60057),arrowDown:T("arrow-down",60058),arrowLeft:T("arrow-left",60059),arrowRight:T("arrow-right",60060),arrowSmallDown:T("arrow-small-down",60061),arrowSmallLeft:T("arrow-small-left",60062),arrowSmallRight:T("arrow-small-right",60063),arrowSmallUp:T("arrow-small-up",60064),arrowUp:T("arrow-up",60065),bell:T("bell",60066),bold:T("bold",60067),book:T("book",60068),bookmark:T("bookmark",60069),debugBreakpointConditionalUnverified:T("debug-breakpoint-conditional-unverified",60070),debugBreakpointConditional:T("debug-breakpoint-conditional",60071),debugBreakpointConditionalDisabled:T("debug-breakpoint-conditional-disabled",60071),debugBreakpointDataUnverified:T("debug-breakpoint-data-unverified",60072),debugBreakpointData:T("debug-breakpoint-data",60073),debugBreakpointDataDisabled:T("debug-breakpoint-data-disabled",60073),debugBreakpointLogUnverified:T("debug-breakpoint-log-unverified",60074),debugBreakpointLog:T("debug-breakpoint-log",60075),debugBreakpointLogDisabled:T("debug-breakpoint-log-disabled",60075),briefcase:T("briefcase",60076),broadcast:T("broadcast",60077),browser:T("browser",60078),bug:T("bug",60079),calendar:T("calendar",60080),caseSensitive:T("case-sensitive",60081),check:T("check",60082),checklist:T("checklist",60083),chevronDown:T("chevron-down",60084),chevronLeft:T("chevron-left",60085),chevronRight:T("chevron-right",60086),chevronUp:T("chevron-up",60087),chromeClose:T("chrome-close",60088),chromeMaximize:T("chrome-maximize",60089),chromeMinimize:T("chrome-minimize",60090),chromeRestore:T("chrome-restore",60091),circleOutline:T("circle-outline",60092),circle:T("circle",60092),debugBreakpointUnverified:T("debug-breakpoint-unverified",60092),terminalDecorationIncomplete:T("terminal-decoration-incomplete",60092),circleSlash:T("circle-slash",60093),circuitBoard:T("circuit-board",60094),clearAll:T("clear-all",60095),clippy:T("clippy",60096),closeAll:T("close-all",60097),cloudDownload:T("cloud-download",60098),cloudUpload:T("cloud-upload",60099),code:T("code",60100),collapseAll:T("collapse-all",60101),colorMode:T("color-mode",60102),commentDiscussion:T("comment-discussion",60103),creditCard:T("credit-card",60105),dash:T("dash",60108),dashboard:T("dashboard",60109),database:T("database",60110),debugContinue:T("debug-continue",60111),debugDisconnect:T("debug-disconnect",60112),debugPause:T("debug-pause",60113),debugRestart:T("debug-restart",60114),debugStart:T("debug-start",60115),debugStepInto:T("debug-step-into",60116),debugStepOut:T("debug-step-out",60117),debugStepOver:T("debug-step-over",60118),debugStop:T("debug-stop",60119),debug:T("debug",60120),deviceCameraVideo:T("device-camera-video",60121),deviceCamera:T("device-camera",60122),deviceMobile:T("device-mobile",60123),diffAdded:T("diff-added",60124),diffIgnored:T("diff-ignored",60125),diffModified:T("diff-modified",60126),diffRemoved:T("diff-removed",60127),diffRenamed:T("diff-renamed",60128),diff:T("diff",60129),diffSidebyside:T("diff-sidebyside",60129),discard:T("discard",60130),editorLayout:T("editor-layout",60131),emptyWindow:T("empty-window",60132),exclude:T("exclude",60133),extensions:T("extensions",60134),eyeClosed:T("eye-closed",60135),fileBinary:T("file-binary",60136),fileCode:T("file-code",60137),fileMedia:T("file-media",60138),filePdf:T("file-pdf",60139),fileSubmodule:T("file-submodule",60140),fileSymlinkDirectory:T("file-symlink-directory",60141),fileSymlinkFile:T("file-symlink-file",60142),fileZip:T("file-zip",60143),files:T("files",60144),filter:T("filter",60145),flame:T("flame",60146),foldDown:T("fold-down",60147),foldUp:T("fold-up",60148),fold:T("fold",60149),folderActive:T("folder-active",60150),folderOpened:T("folder-opened",60151),gear:T("gear",60152),gift:T("gift",60153),gistSecret:T("gist-secret",60154),gist:T("gist",60155),gitCommit:T("git-commit",60156),gitCompare:T("git-compare",60157),compareChanges:T("compare-changes",60157),gitMerge:T("git-merge",60158),githubAction:T("github-action",60159),githubAlt:T("github-alt",60160),globe:T("globe",60161),grabber:T("grabber",60162),graph:T("graph",60163),gripper:T("gripper",60164),heart:T("heart",60165),home:T("home",60166),horizontalRule:T("horizontal-rule",60167),hubot:T("hubot",60168),inbox:T("inbox",60169),issueReopened:T("issue-reopened",60171),issues:T("issues",60172),italic:T("italic",60173),jersey:T("jersey",60174),json:T("json",60175),kebabVertical:T("kebab-vertical",60176),key:T("key",60177),law:T("law",60178),lightbulbAutofix:T("lightbulb-autofix",60179),linkExternal:T("link-external",60180),link:T("link",60181),listOrdered:T("list-ordered",60182),listUnordered:T("list-unordered",60183),liveShare:T("live-share",60184),loading:T("loading",60185),location:T("location",60186),mailRead:T("mail-read",60187),mail:T("mail",60188),markdown:T("markdown",60189),megaphone:T("megaphone",60190),mention:T("mention",60191),milestone:T("milestone",60192),gitPullRequestMilestone:T("git-pull-request-milestone",60192),mortarBoard:T("mortar-board",60193),move:T("move",60194),multipleWindows:T("multiple-windows",60195),mute:T("mute",60196),noNewline:T("no-newline",60197),note:T("note",60198),octoface:T("octoface",60199),openPreview:T("open-preview",60200),package:T("package",60201),paintcan:T("paintcan",60202),pin:T("pin",60203),play:T("play",60204),run:T("run",60204),plug:T("plug",60205),preserveCase:T("preserve-case",60206),preview:T("preview",60207),project:T("project",60208),pulse:T("pulse",60209),question:T("question",60210),quote:T("quote",60211),radioTower:T("radio-tower",60212),reactions:T("reactions",60213),references:T("references",60214),refresh:T("refresh",60215),regex:T("regex",60216),remoteExplorer:T("remote-explorer",60217),remote:T("remote",60218),remove:T("remove",60219),replaceAll:T("replace-all",60220),replace:T("replace",60221),repoClone:T("repo-clone",60222),repoForcePush:T("repo-force-push",60223),repoPull:T("repo-pull",60224),repoPush:T("repo-push",60225),report:T("report",60226),requestChanges:T("request-changes",60227),rocket:T("rocket",60228),rootFolderOpened:T("root-folder-opened",60229),rootFolder:T("root-folder",60230),rss:T("rss",60231),ruby:T("ruby",60232),saveAll:T("save-all",60233),saveAs:T("save-as",60234),save:T("save",60235),screenFull:T("screen-full",60236),screenNormal:T("screen-normal",60237),searchStop:T("search-stop",60238),server:T("server",60240),settingsGear:T("settings-gear",60241),settings:T("settings",60242),shield:T("shield",60243),smiley:T("smiley",60244),sortPrecedence:T("sort-precedence",60245),splitHorizontal:T("split-horizontal",60246),splitVertical:T("split-vertical",60247),squirrel:T("squirrel",60248),starFull:T("star-full",60249),starHalf:T("star-half",60250),symbolClass:T("symbol-class",60251),symbolColor:T("symbol-color",60252),symbolConstant:T("symbol-constant",60253),symbolEnumMember:T("symbol-enum-member",60254),symbolField:T("symbol-field",60255),symbolFile:T("symbol-file",60256),symbolInterface:T("symbol-interface",60257),symbolKeyword:T("symbol-keyword",60258),symbolMisc:T("symbol-misc",60259),symbolOperator:T("symbol-operator",60260),symbolProperty:T("symbol-property",60261),wrench:T("wrench",60261),wrenchSubaction:T("wrench-subaction",60261),symbolSnippet:T("symbol-snippet",60262),tasklist:T("tasklist",60263),telescope:T("telescope",60264),textSize:T("text-size",60265),threeBars:T("three-bars",60266),thumbsdown:T("thumbsdown",60267),thumbsup:T("thumbsup",60268),tools:T("tools",60269),triangleDown:T("triangle-down",60270),triangleLeft:T("triangle-left",60271),triangleRight:T("triangle-right",60272),triangleUp:T("triangle-up",60273),twitter:T("twitter",60274),unfold:T("unfold",60275),unlock:T("unlock",60276),unmute:T("unmute",60277),unverified:T("unverified",60278),verified:T("verified",60279),versions:T("versions",60280),vmActive:T("vm-active",60281),vmOutline:T("vm-outline",60282),vmRunning:T("vm-running",60283),watch:T("watch",60284),whitespace:T("whitespace",60285),wholeWord:T("whole-word",60286),window:T("window",60287),wordWrap:T("word-wrap",60288),zoomIn:T("zoom-in",60289),zoomOut:T("zoom-out",60290),listFilter:T("list-filter",60291),listFlat:T("list-flat",60292),listSelection:T("list-selection",60293),selection:T("selection",60293),listTree:T("list-tree",60294),debugBreakpointFunctionUnverified:T("debug-breakpoint-function-unverified",60295),debugBreakpointFunction:T("debug-breakpoint-function",60296),debugBreakpointFunctionDisabled:T("debug-breakpoint-function-disabled",60296),debugStackframeActive:T("debug-stackframe-active",60297),circleSmallFilled:T("circle-small-filled",60298),debugStackframeDot:T("debug-stackframe-dot",60298),terminalDecorationMark:T("terminal-decoration-mark",60298),debugStackframe:T("debug-stackframe",60299),debugStackframeFocused:T("debug-stackframe-focused",60299),debugBreakpointUnsupported:T("debug-breakpoint-unsupported",60300),symbolString:T("symbol-string",60301),debugReverseContinue:T("debug-reverse-continue",60302),debugStepBack:T("debug-step-back",60303),debugRestartFrame:T("debug-restart-frame",60304),debugAlt:T("debug-alt",60305),callIncoming:T("call-incoming",60306),callOutgoing:T("call-outgoing",60307),menu:T("menu",60308),expandAll:T("expand-all",60309),feedback:T("feedback",60310),gitPullRequestReviewer:T("git-pull-request-reviewer",60310),groupByRefType:T("group-by-ref-type",60311),ungroupByRefType:T("ungroup-by-ref-type",60312),account:T("account",60313),gitPullRequestAssignee:T("git-pull-request-assignee",60313),bellDot:T("bell-dot",60314),debugConsole:T("debug-console",60315),library:T("library",60316),output:T("output",60317),runAll:T("run-all",60318),syncIgnored:T("sync-ignored",60319),pinned:T("pinned",60320),githubInverted:T("github-inverted",60321),serverProcess:T("server-process",60322),serverEnvironment:T("server-environment",60323),pass:T("pass",60324),issueClosed:T("issue-closed",60324),stopCircle:T("stop-circle",60325),playCircle:T("play-circle",60326),record:T("record",60327),debugAltSmall:T("debug-alt-small",60328),vmConnect:T("vm-connect",60329),cloud:T("cloud",60330),merge:T("merge",60331),export:T("export",60332),graphLeft:T("graph-left",60333),magnet:T("magnet",60334),notebook:T("notebook",60335),redo:T("redo",60336),checkAll:T("check-all",60337),pinnedDirty:T("pinned-dirty",60338),passFilled:T("pass-filled",60339),circleLargeFilled:T("circle-large-filled",60340),circleLarge:T("circle-large",60341),circleLargeOutline:T("circle-large-outline",60341),combine:T("combine",60342),gather:T("gather",60342),table:T("table",60343),variableGroup:T("variable-group",60344),typeHierarchy:T("type-hierarchy",60345),typeHierarchySub:T("type-hierarchy-sub",60346),typeHierarchySuper:T("type-hierarchy-super",60347),gitPullRequestCreate:T("git-pull-request-create",60348),runAbove:T("run-above",60349),runBelow:T("run-below",60350),notebookTemplate:T("notebook-template",60351),debugRerun:T("debug-rerun",60352),workspaceTrusted:T("workspace-trusted",60353),workspaceUntrusted:T("workspace-untrusted",60354),workspaceUnknown:T("workspace-unknown",60355),terminalCmd:T("terminal-cmd",60356),terminalDebian:T("terminal-debian",60357),terminalLinux:T("terminal-linux",60358),terminalPowershell:T("terminal-powershell",60359),terminalTmux:T("terminal-tmux",60360),terminalUbuntu:T("terminal-ubuntu",60361),terminalBash:T("terminal-bash",60362),arrowSwap:T("arrow-swap",60363),copy:T("copy",60364),personAdd:T("person-add",60365),filterFilled:T("filter-filled",60366),wand:T("wand",60367),debugLineByLine:T("debug-line-by-line",60368),inspect:T("inspect",60369),layers:T("layers",60370),layersDot:T("layers-dot",60371),layersActive:T("layers-active",60372),compass:T("compass",60373),compassDot:T("compass-dot",60374),compassActive:T("compass-active",60375),azure:T("azure",60376),issueDraft:T("issue-draft",60377),gitPullRequestClosed:T("git-pull-request-closed",60378),gitPullRequestDraft:T("git-pull-request-draft",60379),debugAll:T("debug-all",60380),debugCoverage:T("debug-coverage",60381),runErrors:T("run-errors",60382),folderLibrary:T("folder-library",60383),debugContinueSmall:T("debug-continue-small",60384),beakerStop:T("beaker-stop",60385),graphLine:T("graph-line",60386),graphScatter:T("graph-scatter",60387),pieChart:T("pie-chart",60388),bracket:T("bracket",60175),bracketDot:T("bracket-dot",60389),bracketError:T("bracket-error",60390),lockSmall:T("lock-small",60391),azureDevops:T("azure-devops",60392),verifiedFilled:T("verified-filled",60393),newline:T("newline",60394),layout:T("layout",60395),layoutActivitybarLeft:T("layout-activitybar-left",60396),layoutActivitybarRight:T("layout-activitybar-right",60397),layoutPanelLeft:T("layout-panel-left",60398),layoutPanelCenter:T("layout-panel-center",60399),layoutPanelJustify:T("layout-panel-justify",60400),layoutPanelRight:T("layout-panel-right",60401),layoutPanel:T("layout-panel",60402),layoutSidebarLeft:T("layout-sidebar-left",60403),layoutSidebarRight:T("layout-sidebar-right",60404),layoutStatusbar:T("layout-statusbar",60405),layoutMenubar:T("layout-menubar",60406),layoutCentered:T("layout-centered",60407),target:T("target",60408),indent:T("indent",60409),recordSmall:T("record-small",60410),errorSmall:T("error-small",60411),terminalDecorationError:T("terminal-decoration-error",60411),arrowCircleDown:T("arrow-circle-down",60412),arrowCircleLeft:T("arrow-circle-left",60413),arrowCircleRight:T("arrow-circle-right",60414),arrowCircleUp:T("arrow-circle-up",60415),layoutSidebarRightOff:T("layout-sidebar-right-off",60416),layoutPanelOff:T("layout-panel-off",60417),layoutSidebarLeftOff:T("layout-sidebar-left-off",60418),blank:T("blank",60419),heartFilled:T("heart-filled",60420),map:T("map",60421),mapHorizontal:T("map-horizontal",60421),foldHorizontal:T("fold-horizontal",60421),mapFilled:T("map-filled",60422),mapHorizontalFilled:T("map-horizontal-filled",60422),foldHorizontalFilled:T("fold-horizontal-filled",60422),circleSmall:T("circle-small",60423),bellSlash:T("bell-slash",60424),bellSlashDot:T("bell-slash-dot",60425),commentUnresolved:T("comment-unresolved",60426),gitPullRequestGoToChanges:T("git-pull-request-go-to-changes",60427),gitPullRequestNewChanges:T("git-pull-request-new-changes",60428),searchFuzzy:T("search-fuzzy",60429),commentDraft:T("comment-draft",60430),send:T("send",60431),sparkle:T("sparkle",60432),insert:T("insert",60433),mic:T("mic",60434),thumbsdownFilled:T("thumbsdown-filled",60435),thumbsupFilled:T("thumbsup-filled",60436),coffee:T("coffee",60437),snake:T("snake",60438),game:T("game",60439),vr:T("vr",60440),chip:T("chip",60441),piano:T("piano",60442),music:T("music",60443),micFilled:T("mic-filled",60444),repoFetch:T("repo-fetch",60445),copilot:T("copilot",60446),lightbulbSparkle:T("lightbulb-sparkle",60447),robot:T("robot",60448),sparkleFilled:T("sparkle-filled",60449),diffSingle:T("diff-single",60450),diffMultiple:T("diff-multiple",60451),surroundWith:T("surround-with",60452),share:T("share",60453),gitStash:T("git-stash",60454),gitStashApply:T("git-stash-apply",60455),gitStashPop:T("git-stash-pop",60456),vscode:T("vscode",60457),vscodeInsiders:T("vscode-insiders",60458),codeOss:T("code-oss",60459),runCoverage:T("run-coverage",60460),runAllCoverage:T("run-all-coverage",60461),coverage:T("coverage",60462),githubProject:T("github-project",60463),mapVertical:T("map-vertical",60464),foldVertical:T("fold-vertical",60464),mapVerticalFilled:T("map-vertical-filled",60465),foldVerticalFilled:T("fold-vertical-filled",60465),goToSearch:T("go-to-search",60466),percentage:T("percentage",60467),sortPercentage:T("sort-percentage",60467),attach:T("attach",60468)},Ske={dialogError:T("dialog-error","error"),dialogWarning:T("dialog-warning","warning"),dialogInfo:T("dialog-info","info"),dialogClose:T("dialog-close","close"),treeItemExpanded:T("tree-item-expanded","chevron-down"),treeFilterOnTypeOn:T("tree-filter-on-type-on","list-filter"),treeFilterOnTypeOff:T("tree-filter-on-type-off","list-selection"),treeFilterClear:T("tree-filter-clear","close"),treeItemLoading:T("tree-item-loading","loading"),menuSelection:T("menu-selection","check"),menuSubmenu:T("menu-submenu","chevron-right"),menuBarMore:T("menubar-more","more"),scrollbarButtonLeft:T("scrollbar-button-left","triangle-left"),scrollbarButtonRight:T("scrollbar-button-right","triangle-right"),scrollbarButtonUp:T("scrollbar-button-up","triangle-up"),scrollbarButtonDown:T("scrollbar-button-down","triangle-down"),toolBarMore:T("toolbar-more","more"),quickInputBack:T("quick-input-back","arrow-left"),dropDownButton:T("drop-down-button",60084),symbolCustomColor:T("symbol-customcolor",60252),exportIcon:T("export",60332),workspaceUnspecified:T("workspace-unspecified",60355),newLine:T("newline",60394),thumbsDownFilled:T("thumbsdown-filled",60435),thumbsUpFilled:T("thumbsup-filled",60436),gitFetch:T("git-fetch",60445),lightbulbSparkleAutofix:T("lightbulb-sparkle-autofix",60447),debugBreakpointPending:T("debug-breakpoint-pending",60377)},Se={...wke,...Ske};let $le=class{constructor(){this._tokenizationSupports=new Map,this._factories=new Map,this._onDidChange=new Y,this.onDidChange=this._onDidChange.event,this._colorMap=null}handleChange(e){this._onDidChange.fire({changedLanguages:e,changedColorMap:!1})}register(e,t){return this._tokenizationSupports.set(e,t),this.handleChange([e]),it(()=>{this._tokenizationSupports.get(e)===t&&(this._tokenizationSupports.delete(e),this.handleChange([e]))})}get(e){return this._tokenizationSupports.get(e)||null}registerFactory(e,t){var n;(n=this._factories.get(e))==null||n.dispose();const i=new Lke(this,e,t);return this._factories.set(e,i),it(()=>{const s=this._factories.get(e);!s||s!==i||(this._factories.delete(e),s.dispose())})}async getOrCreate(e){const t=this.get(e);if(t)return t;const i=this._factories.get(e);return!i||i.isResolved?null:(await i.resolve(),this.get(e))}isResolved(e){if(this.get(e))return!0;const i=this._factories.get(e);return!!(!i||i.isResolved)}setColorMap(e){this._colorMap=e,this._onDidChange.fire({changedLanguages:Array.from(this._tokenizationSupports.keys()),changedColorMap:!0})}getColorMap(){return this._colorMap}getDefaultBackground(){return this._colorMap&&this._colorMap.length>2?this._colorMap[2]:null}};class Lke extends X{get isResolved(){return this._isResolved}constructor(e,t,i){super(),this._registry=e,this._languageId=t,this._factory=i,this._isDisposed=!1,this._resolvePromise=null,this._isResolved=!1}dispose(){this._isDisposed=!0,super.dispose()}async resolve(){return this._resolvePromise||(this._resolvePromise=this._create()),this._resolvePromise}async _create(){const e=await this._factory.tokenizationSupport;this._isResolved=!0,e&&!this._isDisposed&&this._register(this._registry.register(this._languageId,e))}}let dD=class{constructor(e,t,i){this.offset=e,this.type=t,this.language=i,this._tokenBrand=void 0}toString(){return"("+this.offset+", "+this.type+")"}};class Nq{constructor(e,t){this.tokens=e,this.endState=t,this._tokenizationResultBrand=void 0}}class zF{constructor(e,t){this.tokens=e,this.endState=t,this._encodedTokenizationResultBrand=void 0}}var Ya;(function(o){o[o.Increase=0]="Increase",o[o.Decrease=1]="Decrease"})(Ya||(Ya={}));var uD;(function(o){const e=new Map;e.set(0,Se.symbolMethod),e.set(1,Se.symbolFunction),e.set(2,Se.symbolConstructor),e.set(3,Se.symbolField),e.set(4,Se.symbolVariable),e.set(5,Se.symbolClass),e.set(6,Se.symbolStruct),e.set(7,Se.symbolInterface),e.set(8,Se.symbolModule),e.set(9,Se.symbolProperty),e.set(10,Se.symbolEvent),e.set(11,Se.symbolOperator),e.set(12,Se.symbolUnit),e.set(13,Se.symbolValue),e.set(15,Se.symbolEnum),e.set(14,Se.symbolConstant),e.set(15,Se.symbolEnum),e.set(16,Se.symbolEnumMember),e.set(17,Se.symbolKeyword),e.set(27,Se.symbolSnippet),e.set(18,Se.symbolText),e.set(19,Se.symbolColor),e.set(20,Se.symbolFile),e.set(21,Se.symbolReference),e.set(22,Se.symbolCustomColor),e.set(23,Se.symbolFolder),e.set(24,Se.symbolTypeParameter),e.set(25,Se.account),e.set(26,Se.issues);function t(s){let r=e.get(s);return r||(console.info("No codicon found for CompletionItemKind "+s),r=Se.symbolProperty),r}o.toIcon=t;const i=new Map;i.set("method",0),i.set("function",1),i.set("constructor",2),i.set("field",3),i.set("variable",4),i.set("class",5),i.set("struct",6),i.set("interface",7),i.set("module",8),i.set("property",9),i.set("event",10),i.set("operator",11),i.set("unit",12),i.set("value",13),i.set("constant",14),i.set("enum",15),i.set("enum-member",16),i.set("enumMember",16),i.set("keyword",17),i.set("snippet",27),i.set("text",18),i.set("color",19),i.set("file",20),i.set("reference",21),i.set("customcolor",22),i.set("folder",23),i.set("type-parameter",24),i.set("typeParameter",24),i.set("account",25),i.set("issue",26);function n(s,r){let a=i.get(s);return typeof a>"u"&&!r&&(a=9),a}o.fromString=n})(uD||(uD={}));var ru;(function(o){o[o.Automatic=0]="Automatic",o[o.Explicit=1]="Explicit"})(ru||(ru={}));class jle{constructor(e,t,i,n){this.range=e,this.text=t,this.completionKind=i,this.isSnippetText=n}equals(e){return M.lift(this.range).equalsRange(e.range)&&this.text===e.text&&this.completionKind===e.completionKind&&this.isSnippetText===e.isSnippetText}}var hD;(function(o){o[o.Automatic=0]="Automatic",o[o.PasteAs=1]="PasteAs"})(hD||(hD={}));var Eh;(function(o){o[o.Invoke=1]="Invoke",o[o.TriggerCharacter=2]="TriggerCharacter",o[o.ContentChange=3]="ContentChange"})(Eh||(Eh={}));var J1;(function(o){o[o.Text=0]="Text",o[o.Read=1]="Read",o[o.Write=2]="Write"})(J1||(J1={}));function xke(o){return o&&st.isUri(o.uri)&&M.isIRange(o.range)&&(M.isIRange(o.originSelectionRange)||M.isIRange(o.targetSelectionRange))}const kke={17:v("Array","array"),16:v("Boolean","boolean"),4:v("Class","class"),13:v("Constant","constant"),8:v("Constructor","constructor"),9:v("Enum","enumeration"),21:v("EnumMember","enumeration member"),23:v("Event","event"),7:v("Field","field"),0:v("File","file"),11:v("Function","function"),10:v("Interface","interface"),19:v("Key","key"),5:v("Method","method"),1:v("Module","module"),2:v("Namespace","namespace"),20:v("Null","null"),15:v("Number","number"),18:v("Object","object"),24:v("Operator","operator"),3:v("Package","package"),6:v("Property","property"),14:v("String","string"),22:v("Struct","struct"),25:v("TypeParameter","type parameter"),12:v("Variable","variable")};function Dke(o,e){return v("symbolAriaLabel","{0} ({1})",o,kke[e])}var uA;(function(o){const e=new Map;e.set(0,Se.symbolFile),e.set(1,Se.symbolModule),e.set(2,Se.symbolNamespace),e.set(3,Se.symbolPackage),e.set(4,Se.symbolClass),e.set(5,Se.symbolMethod),e.set(6,Se.symbolProperty),e.set(7,Se.symbolField),e.set(8,Se.symbolConstructor),e.set(9,Se.symbolEnum),e.set(10,Se.symbolInterface),e.set(11,Se.symbolFunction),e.set(12,Se.symbolVariable),e.set(13,Se.symbolConstant),e.set(14,Se.symbolString),e.set(15,Se.symbolNumber),e.set(16,Se.symbolBoolean),e.set(17,Se.symbolArray),e.set(18,Se.symbolObject),e.set(19,Se.symbolKey),e.set(20,Se.symbolNull),e.set(21,Se.symbolEnumMember),e.set(22,Se.symbolStruct),e.set(23,Se.symbolEvent),e.set(24,Se.symbolOperator),e.set(25,Se.symbolTypeParameter);function t(i){let n=e.get(i);return n||(console.info("No codicon found for SymbolKind "+i),n=Se.symbolProperty),n}o.toIcon=t})(uA||(uA={}));const qc=class qc{static fromValue(e){switch(e){case"comment":return qc.Comment;case"imports":return qc.Imports;case"region":return qc.Region}return new qc(e)}constructor(e){this.value=e}};qc.Comment=new qc("comment"),qc.Imports=new qc("imports"),qc.Region=new qc("region");let Pm=qc;var s8;(function(o){o[o.AIGenerated=1]="AIGenerated"})(s8||(s8={}));var fD;(function(o){o[o.Invoke=0]="Invoke",o[o.Automatic=1]="Automatic"})(fD||(fD={}));var o8;(function(o){function e(t){return!t||typeof t!="object"?!1:typeof t.id=="string"&&typeof t.title=="string"}o.is=e})(o8||(o8={}));var hA;(function(o){o[o.Type=1]="Type",o[o.Parameter=2]="Parameter"})(hA||(hA={}));class Eke{constructor(e){this.createSupport=e,this._tokenizationSupport=null}dispose(){this._tokenizationSupport&&this._tokenizationSupport.then(e=>{e&&e.dispose()})}get tokenizationSupport(){return this._tokenizationSupport||(this._tokenizationSupport=this.createSupport()),this._tokenizationSupport}}const Kn=new $le,r8=new $le;var fA;(function(o){o[o.Invoke=0]="Invoke",o[o.Automatic=1]="Automatic"})(fA||(fA={}));var a8;(function(o){o[o.Unknown=0]="Unknown",o[o.Disabled=1]="Disabled",o[o.Enabled=2]="Enabled"})(a8||(a8={}));var l8;(function(o){o[o.Invoke=1]="Invoke",o[o.Auto=2]="Auto"})(l8||(l8={}));var c8;(function(o){o[o.None=0]="None",o[o.KeepWhitespace=1]="KeepWhitespace",o[o.InsertAsSnippet=4]="InsertAsSnippet"})(c8||(c8={}));var d8;(function(o){o[o.Method=0]="Method",o[o.Function=1]="Function",o[o.Constructor=2]="Constructor",o[o.Field=3]="Field",o[o.Variable=4]="Variable",o[o.Class=5]="Class",o[o.Struct=6]="Struct",o[o.Interface=7]="Interface",o[o.Module=8]="Module",o[o.Property=9]="Property",o[o.Event=10]="Event",o[o.Operator=11]="Operator",o[o.Unit=12]="Unit",o[o.Value=13]="Value",o[o.Constant=14]="Constant",o[o.Enum=15]="Enum",o[o.EnumMember=16]="EnumMember",o[o.Keyword=17]="Keyword",o[o.Text=18]="Text",o[o.Color=19]="Color",o[o.File=20]="File",o[o.Reference=21]="Reference",o[o.Customcolor=22]="Customcolor",o[o.Folder=23]="Folder",o[o.TypeParameter=24]="TypeParameter",o[o.User=25]="User",o[o.Issue=26]="Issue",o[o.Snippet=27]="Snippet"})(d8||(d8={}));var u8;(function(o){o[o.Deprecated=1]="Deprecated"})(u8||(u8={}));var h8;(function(o){o[o.Invoke=0]="Invoke",o[o.TriggerCharacter=1]="TriggerCharacter",o[o.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(h8||(h8={}));var f8;(function(o){o[o.EXACT=0]="EXACT",o[o.ABOVE=1]="ABOVE",o[o.BELOW=2]="BELOW"})(f8||(f8={}));var g8;(function(o){o[o.NotSet=0]="NotSet",o[o.ContentFlush=1]="ContentFlush",o[o.RecoverFromMarkers=2]="RecoverFromMarkers",o[o.Explicit=3]="Explicit",o[o.Paste=4]="Paste",o[o.Undo=5]="Undo",o[o.Redo=6]="Redo"})(g8||(g8={}));var p8;(function(o){o[o.LF=1]="LF",o[o.CRLF=2]="CRLF"})(p8||(p8={}));var m8;(function(o){o[o.Text=0]="Text",o[o.Read=1]="Read",o[o.Write=2]="Write"})(m8||(m8={}));var _8;(function(o){o[o.None=0]="None",o[o.Keep=1]="Keep",o[o.Brackets=2]="Brackets",o[o.Advanced=3]="Advanced",o[o.Full=4]="Full"})(_8||(_8={}));var v8;(function(o){o[o.acceptSuggestionOnCommitCharacter=0]="acceptSuggestionOnCommitCharacter",o[o.acceptSuggestionOnEnter=1]="acceptSuggestionOnEnter",o[o.accessibilitySupport=2]="accessibilitySupport",o[o.accessibilityPageSize=3]="accessibilityPageSize",o[o.ariaLabel=4]="ariaLabel",o[o.ariaRequired=5]="ariaRequired",o[o.autoClosingBrackets=6]="autoClosingBrackets",o[o.autoClosingComments=7]="autoClosingComments",o[o.screenReaderAnnounceInlineSuggestion=8]="screenReaderAnnounceInlineSuggestion",o[o.autoClosingDelete=9]="autoClosingDelete",o[o.autoClosingOvertype=10]="autoClosingOvertype",o[o.autoClosingQuotes=11]="autoClosingQuotes",o[o.autoIndent=12]="autoIndent",o[o.automaticLayout=13]="automaticLayout",o[o.autoSurround=14]="autoSurround",o[o.bracketPairColorization=15]="bracketPairColorization",o[o.guides=16]="guides",o[o.codeLens=17]="codeLens",o[o.codeLensFontFamily=18]="codeLensFontFamily",o[o.codeLensFontSize=19]="codeLensFontSize",o[o.colorDecorators=20]="colorDecorators",o[o.colorDecoratorsLimit=21]="colorDecoratorsLimit",o[o.columnSelection=22]="columnSelection",o[o.comments=23]="comments",o[o.contextmenu=24]="contextmenu",o[o.copyWithSyntaxHighlighting=25]="copyWithSyntaxHighlighting",o[o.cursorBlinking=26]="cursorBlinking",o[o.cursorSmoothCaretAnimation=27]="cursorSmoothCaretAnimation",o[o.cursorStyle=28]="cursorStyle",o[o.cursorSurroundingLines=29]="cursorSurroundingLines",o[o.cursorSurroundingLinesStyle=30]="cursorSurroundingLinesStyle",o[o.cursorWidth=31]="cursorWidth",o[o.disableLayerHinting=32]="disableLayerHinting",o[o.disableMonospaceOptimizations=33]="disableMonospaceOptimizations",o[o.domReadOnly=34]="domReadOnly",o[o.dragAndDrop=35]="dragAndDrop",o[o.dropIntoEditor=36]="dropIntoEditor",o[o.emptySelectionClipboard=37]="emptySelectionClipboard",o[o.experimentalWhitespaceRendering=38]="experimentalWhitespaceRendering",o[o.extraEditorClassName=39]="extraEditorClassName",o[o.fastScrollSensitivity=40]="fastScrollSensitivity",o[o.find=41]="find",o[o.fixedOverflowWidgets=42]="fixedOverflowWidgets",o[o.folding=43]="folding",o[o.foldingStrategy=44]="foldingStrategy",o[o.foldingHighlight=45]="foldingHighlight",o[o.foldingImportsByDefault=46]="foldingImportsByDefault",o[o.foldingMaximumRegions=47]="foldingMaximumRegions",o[o.unfoldOnClickAfterEndOfLine=48]="unfoldOnClickAfterEndOfLine",o[o.fontFamily=49]="fontFamily",o[o.fontInfo=50]="fontInfo",o[o.fontLigatures=51]="fontLigatures",o[o.fontSize=52]="fontSize",o[o.fontWeight=53]="fontWeight",o[o.fontVariations=54]="fontVariations",o[o.formatOnPaste=55]="formatOnPaste",o[o.formatOnType=56]="formatOnType",o[o.glyphMargin=57]="glyphMargin",o[o.gotoLocation=58]="gotoLocation",o[o.hideCursorInOverviewRuler=59]="hideCursorInOverviewRuler",o[o.hover=60]="hover",o[o.inDiffEditor=61]="inDiffEditor",o[o.inlineSuggest=62]="inlineSuggest",o[o.inlineEdit=63]="inlineEdit",o[o.letterSpacing=64]="letterSpacing",o[o.lightbulb=65]="lightbulb",o[o.lineDecorationsWidth=66]="lineDecorationsWidth",o[o.lineHeight=67]="lineHeight",o[o.lineNumbers=68]="lineNumbers",o[o.lineNumbersMinChars=69]="lineNumbersMinChars",o[o.linkedEditing=70]="linkedEditing",o[o.links=71]="links",o[o.matchBrackets=72]="matchBrackets",o[o.minimap=73]="minimap",o[o.mouseStyle=74]="mouseStyle",o[o.mouseWheelScrollSensitivity=75]="mouseWheelScrollSensitivity",o[o.mouseWheelZoom=76]="mouseWheelZoom",o[o.multiCursorMergeOverlapping=77]="multiCursorMergeOverlapping",o[o.multiCursorModifier=78]="multiCursorModifier",o[o.multiCursorPaste=79]="multiCursorPaste",o[o.multiCursorLimit=80]="multiCursorLimit",o[o.occurrencesHighlight=81]="occurrencesHighlight",o[o.overviewRulerBorder=82]="overviewRulerBorder",o[o.overviewRulerLanes=83]="overviewRulerLanes",o[o.padding=84]="padding",o[o.pasteAs=85]="pasteAs",o[o.parameterHints=86]="parameterHints",o[o.peekWidgetDefaultFocus=87]="peekWidgetDefaultFocus",o[o.placeholder=88]="placeholder",o[o.definitionLinkOpensInPeek=89]="definitionLinkOpensInPeek",o[o.quickSuggestions=90]="quickSuggestions",o[o.quickSuggestionsDelay=91]="quickSuggestionsDelay",o[o.readOnly=92]="readOnly",o[o.readOnlyMessage=93]="readOnlyMessage",o[o.renameOnType=94]="renameOnType",o[o.renderControlCharacters=95]="renderControlCharacters",o[o.renderFinalNewline=96]="renderFinalNewline",o[o.renderLineHighlight=97]="renderLineHighlight",o[o.renderLineHighlightOnlyWhenFocus=98]="renderLineHighlightOnlyWhenFocus",o[o.renderValidationDecorations=99]="renderValidationDecorations",o[o.renderWhitespace=100]="renderWhitespace",o[o.revealHorizontalRightPadding=101]="revealHorizontalRightPadding",o[o.roundedSelection=102]="roundedSelection",o[o.rulers=103]="rulers",o[o.scrollbar=104]="scrollbar",o[o.scrollBeyondLastColumn=105]="scrollBeyondLastColumn",o[o.scrollBeyondLastLine=106]="scrollBeyondLastLine",o[o.scrollPredominantAxis=107]="scrollPredominantAxis",o[o.selectionClipboard=108]="selectionClipboard",o[o.selectionHighlight=109]="selectionHighlight",o[o.selectOnLineNumbers=110]="selectOnLineNumbers",o[o.showFoldingControls=111]="showFoldingControls",o[o.showUnused=112]="showUnused",o[o.snippetSuggestions=113]="snippetSuggestions",o[o.smartSelect=114]="smartSelect",o[o.smoothScrolling=115]="smoothScrolling",o[o.stickyScroll=116]="stickyScroll",o[o.stickyTabStops=117]="stickyTabStops",o[o.stopRenderingLineAfter=118]="stopRenderingLineAfter",o[o.suggest=119]="suggest",o[o.suggestFontSize=120]="suggestFontSize",o[o.suggestLineHeight=121]="suggestLineHeight",o[o.suggestOnTriggerCharacters=122]="suggestOnTriggerCharacters",o[o.suggestSelection=123]="suggestSelection",o[o.tabCompletion=124]="tabCompletion",o[o.tabIndex=125]="tabIndex",o[o.unicodeHighlighting=126]="unicodeHighlighting",o[o.unusualLineTerminators=127]="unusualLineTerminators",o[o.useShadowDOM=128]="useShadowDOM",o[o.useTabStops=129]="useTabStops",o[o.wordBreak=130]="wordBreak",o[o.wordSegmenterLocales=131]="wordSegmenterLocales",o[o.wordSeparators=132]="wordSeparators",o[o.wordWrap=133]="wordWrap",o[o.wordWrapBreakAfterCharacters=134]="wordWrapBreakAfterCharacters",o[o.wordWrapBreakBeforeCharacters=135]="wordWrapBreakBeforeCharacters",o[o.wordWrapColumn=136]="wordWrapColumn",o[o.wordWrapOverride1=137]="wordWrapOverride1",o[o.wordWrapOverride2=138]="wordWrapOverride2",o[o.wrappingIndent=139]="wrappingIndent",o[o.wrappingStrategy=140]="wrappingStrategy",o[o.showDeprecated=141]="showDeprecated",o[o.inlayHints=142]="inlayHints",o[o.editorClassName=143]="editorClassName",o[o.pixelRatio=144]="pixelRatio",o[o.tabFocusMode=145]="tabFocusMode",o[o.layoutInfo=146]="layoutInfo",o[o.wrappingInfo=147]="wrappingInfo",o[o.defaultColorDecorators=148]="defaultColorDecorators",o[o.colorDecoratorsActivatedOn=149]="colorDecoratorsActivatedOn",o[o.inlineCompletionsAccessibilityVerbose=150]="inlineCompletionsAccessibilityVerbose"})(v8||(v8={}));var b8;(function(o){o[o.TextDefined=0]="TextDefined",o[o.LF=1]="LF",o[o.CRLF=2]="CRLF"})(b8||(b8={}));var C8;(function(o){o[o.LF=0]="LF",o[o.CRLF=1]="CRLF"})(C8||(C8={}));var y8;(function(o){o[o.Left=1]="Left",o[o.Center=2]="Center",o[o.Right=3]="Right"})(y8||(y8={}));var w8;(function(o){o[o.Increase=0]="Increase",o[o.Decrease=1]="Decrease"})(w8||(w8={}));var S8;(function(o){o[o.None=0]="None",o[o.Indent=1]="Indent",o[o.IndentOutdent=2]="IndentOutdent",o[o.Outdent=3]="Outdent"})(S8||(S8={}));var L8;(function(o){o[o.Both=0]="Both",o[o.Right=1]="Right",o[o.Left=2]="Left",o[o.None=3]="None"})(L8||(L8={}));var x8;(function(o){o[o.Type=1]="Type",o[o.Parameter=2]="Parameter"})(x8||(x8={}));var k8;(function(o){o[o.Automatic=0]="Automatic",o[o.Explicit=1]="Explicit"})(k8||(k8={}));var D8;(function(o){o[o.Invoke=0]="Invoke",o[o.Automatic=1]="Automatic"})(D8||(D8={}));var E8;(function(o){o[o.DependsOnKbLayout=-1]="DependsOnKbLayout",o[o.Unknown=0]="Unknown",o[o.Backspace=1]="Backspace",o[o.Tab=2]="Tab",o[o.Enter=3]="Enter",o[o.Shift=4]="Shift",o[o.Ctrl=5]="Ctrl",o[o.Alt=6]="Alt",o[o.PauseBreak=7]="PauseBreak",o[o.CapsLock=8]="CapsLock",o[o.Escape=9]="Escape",o[o.Space=10]="Space",o[o.PageUp=11]="PageUp",o[o.PageDown=12]="PageDown",o[o.End=13]="End",o[o.Home=14]="Home",o[o.LeftArrow=15]="LeftArrow",o[o.UpArrow=16]="UpArrow",o[o.RightArrow=17]="RightArrow",o[o.DownArrow=18]="DownArrow",o[o.Insert=19]="Insert",o[o.Delete=20]="Delete",o[o.Digit0=21]="Digit0",o[o.Digit1=22]="Digit1",o[o.Digit2=23]="Digit2",o[o.Digit3=24]="Digit3",o[o.Digit4=25]="Digit4",o[o.Digit5=26]="Digit5",o[o.Digit6=27]="Digit6",o[o.Digit7=28]="Digit7",o[o.Digit8=29]="Digit8",o[o.Digit9=30]="Digit9",o[o.KeyA=31]="KeyA",o[o.KeyB=32]="KeyB",o[o.KeyC=33]="KeyC",o[o.KeyD=34]="KeyD",o[o.KeyE=35]="KeyE",o[o.KeyF=36]="KeyF",o[o.KeyG=37]="KeyG",o[o.KeyH=38]="KeyH",o[o.KeyI=39]="KeyI",o[o.KeyJ=40]="KeyJ",o[o.KeyK=41]="KeyK",o[o.KeyL=42]="KeyL",o[o.KeyM=43]="KeyM",o[o.KeyN=44]="KeyN",o[o.KeyO=45]="KeyO",o[o.KeyP=46]="KeyP",o[o.KeyQ=47]="KeyQ",o[o.KeyR=48]="KeyR",o[o.KeyS=49]="KeyS",o[o.KeyT=50]="KeyT",o[o.KeyU=51]="KeyU",o[o.KeyV=52]="KeyV",o[o.KeyW=53]="KeyW",o[o.KeyX=54]="KeyX",o[o.KeyY=55]="KeyY",o[o.KeyZ=56]="KeyZ",o[o.Meta=57]="Meta",o[o.ContextMenu=58]="ContextMenu",o[o.F1=59]="F1",o[o.F2=60]="F2",o[o.F3=61]="F3",o[o.F4=62]="F4",o[o.F5=63]="F5",o[o.F6=64]="F6",o[o.F7=65]="F7",o[o.F8=66]="F8",o[o.F9=67]="F9",o[o.F10=68]="F10",o[o.F11=69]="F11",o[o.F12=70]="F12",o[o.F13=71]="F13",o[o.F14=72]="F14",o[o.F15=73]="F15",o[o.F16=74]="F16",o[o.F17=75]="F17",o[o.F18=76]="F18",o[o.F19=77]="F19",o[o.F20=78]="F20",o[o.F21=79]="F21",o[o.F22=80]="F22",o[o.F23=81]="F23",o[o.F24=82]="F24",o[o.NumLock=83]="NumLock",o[o.ScrollLock=84]="ScrollLock",o[o.Semicolon=85]="Semicolon",o[o.Equal=86]="Equal",o[o.Comma=87]="Comma",o[o.Minus=88]="Minus",o[o.Period=89]="Period",o[o.Slash=90]="Slash",o[o.Backquote=91]="Backquote",o[o.BracketLeft=92]="BracketLeft",o[o.Backslash=93]="Backslash",o[o.BracketRight=94]="BracketRight",o[o.Quote=95]="Quote",o[o.OEM_8=96]="OEM_8",o[o.IntlBackslash=97]="IntlBackslash",o[o.Numpad0=98]="Numpad0",o[o.Numpad1=99]="Numpad1",o[o.Numpad2=100]="Numpad2",o[o.Numpad3=101]="Numpad3",o[o.Numpad4=102]="Numpad4",o[o.Numpad5=103]="Numpad5",o[o.Numpad6=104]="Numpad6",o[o.Numpad7=105]="Numpad7",o[o.Numpad8=106]="Numpad8",o[o.Numpad9=107]="Numpad9",o[o.NumpadMultiply=108]="NumpadMultiply",o[o.NumpadAdd=109]="NumpadAdd",o[o.NUMPAD_SEPARATOR=110]="NUMPAD_SEPARATOR",o[o.NumpadSubtract=111]="NumpadSubtract",o[o.NumpadDecimal=112]="NumpadDecimal",o[o.NumpadDivide=113]="NumpadDivide",o[o.KEY_IN_COMPOSITION=114]="KEY_IN_COMPOSITION",o[o.ABNT_C1=115]="ABNT_C1",o[o.ABNT_C2=116]="ABNT_C2",o[o.AudioVolumeMute=117]="AudioVolumeMute",o[o.AudioVolumeUp=118]="AudioVolumeUp",o[o.AudioVolumeDown=119]="AudioVolumeDown",o[o.BrowserSearch=120]="BrowserSearch",o[o.BrowserHome=121]="BrowserHome",o[o.BrowserBack=122]="BrowserBack",o[o.BrowserForward=123]="BrowserForward",o[o.MediaTrackNext=124]="MediaTrackNext",o[o.MediaTrackPrevious=125]="MediaTrackPrevious",o[o.MediaStop=126]="MediaStop",o[o.MediaPlayPause=127]="MediaPlayPause",o[o.LaunchMediaPlayer=128]="LaunchMediaPlayer",o[o.LaunchMail=129]="LaunchMail",o[o.LaunchApp2=130]="LaunchApp2",o[o.Clear=131]="Clear",o[o.MAX_VALUE=132]="MAX_VALUE"})(E8||(E8={}));var I8;(function(o){o[o.Hint=1]="Hint",o[o.Info=2]="Info",o[o.Warning=4]="Warning",o[o.Error=8]="Error"})(I8||(I8={}));var T8;(function(o){o[o.Unnecessary=1]="Unnecessary",o[o.Deprecated=2]="Deprecated"})(T8||(T8={}));var N8;(function(o){o[o.Inline=1]="Inline",o[o.Gutter=2]="Gutter"})(N8||(N8={}));var R8;(function(o){o[o.Normal=1]="Normal",o[o.Underlined=2]="Underlined"})(R8||(R8={}));var M8;(function(o){o[o.UNKNOWN=0]="UNKNOWN",o[o.TEXTAREA=1]="TEXTAREA",o[o.GUTTER_GLYPH_MARGIN=2]="GUTTER_GLYPH_MARGIN",o[o.GUTTER_LINE_NUMBERS=3]="GUTTER_LINE_NUMBERS",o[o.GUTTER_LINE_DECORATIONS=4]="GUTTER_LINE_DECORATIONS",o[o.GUTTER_VIEW_ZONE=5]="GUTTER_VIEW_ZONE",o[o.CONTENT_TEXT=6]="CONTENT_TEXT",o[o.CONTENT_EMPTY=7]="CONTENT_EMPTY",o[o.CONTENT_VIEW_ZONE=8]="CONTENT_VIEW_ZONE",o[o.CONTENT_WIDGET=9]="CONTENT_WIDGET",o[o.OVERVIEW_RULER=10]="OVERVIEW_RULER",o[o.SCROLLBAR=11]="SCROLLBAR",o[o.OVERLAY_WIDGET=12]="OVERLAY_WIDGET",o[o.OUTSIDE_EDITOR=13]="OUTSIDE_EDITOR"})(M8||(M8={}));var A8;(function(o){o[o.AIGenerated=1]="AIGenerated"})(A8||(A8={}));var P8;(function(o){o[o.Invoke=0]="Invoke",o[o.Automatic=1]="Automatic"})(P8||(P8={}));var O8;(function(o){o[o.TOP_RIGHT_CORNER=0]="TOP_RIGHT_CORNER",o[o.BOTTOM_RIGHT_CORNER=1]="BOTTOM_RIGHT_CORNER",o[o.TOP_CENTER=2]="TOP_CENTER"})(O8||(O8={}));var F8;(function(o){o[o.Left=1]="Left",o[o.Center=2]="Center",o[o.Right=4]="Right",o[o.Full=7]="Full"})(F8||(F8={}));var B8;(function(o){o[o.Word=0]="Word",o[o.Line=1]="Line",o[o.Suggest=2]="Suggest"})(B8||(B8={}));var W8;(function(o){o[o.Left=0]="Left",o[o.Right=1]="Right",o[o.None=2]="None",o[o.LeftOfInjectedText=3]="LeftOfInjectedText",o[o.RightOfInjectedText=4]="RightOfInjectedText"})(W8||(W8={}));var H8;(function(o){o[o.Off=0]="Off",o[o.On=1]="On",o[o.Relative=2]="Relative",o[o.Interval=3]="Interval",o[o.Custom=4]="Custom"})(H8||(H8={}));var V8;(function(o){o[o.None=0]="None",o[o.Text=1]="Text",o[o.Blocks=2]="Blocks"})(V8||(V8={}));var z8;(function(o){o[o.Smooth=0]="Smooth",o[o.Immediate=1]="Immediate"})(z8||(z8={}));var U8;(function(o){o[o.Auto=1]="Auto",o[o.Hidden=2]="Hidden",o[o.Visible=3]="Visible"})(U8||(U8={}));var $8;(function(o){o[o.LTR=0]="LTR",o[o.RTL=1]="RTL"})($8||($8={}));var j8;(function(o){o.Off="off",o.OnCode="onCode",o.On="on"})(j8||(j8={}));var q8;(function(o){o[o.Invoke=1]="Invoke",o[o.TriggerCharacter=2]="TriggerCharacter",o[o.ContentChange=3]="ContentChange"})(q8||(q8={}));var K8;(function(o){o[o.File=0]="File",o[o.Module=1]="Module",o[o.Namespace=2]="Namespace",o[o.Package=3]="Package",o[o.Class=4]="Class",o[o.Method=5]="Method",o[o.Property=6]="Property",o[o.Field=7]="Field",o[o.Constructor=8]="Constructor",o[o.Enum=9]="Enum",o[o.Interface=10]="Interface",o[o.Function=11]="Function",o[o.Variable=12]="Variable",o[o.Constant=13]="Constant",o[o.String=14]="String",o[o.Number=15]="Number",o[o.Boolean=16]="Boolean",o[o.Array=17]="Array",o[o.Object=18]="Object",o[o.Key=19]="Key",o[o.Null=20]="Null",o[o.EnumMember=21]="EnumMember",o[o.Struct=22]="Struct",o[o.Event=23]="Event",o[o.Operator=24]="Operator",o[o.TypeParameter=25]="TypeParameter"})(K8||(K8={}));var G8;(function(o){o[o.Deprecated=1]="Deprecated"})(G8||(G8={}));var Y8;(function(o){o[o.Hidden=0]="Hidden",o[o.Blink=1]="Blink",o[o.Smooth=2]="Smooth",o[o.Phase=3]="Phase",o[o.Expand=4]="Expand",o[o.Solid=5]="Solid"})(Y8||(Y8={}));var Z8;(function(o){o[o.Line=1]="Line",o[o.Block=2]="Block",o[o.Underline=3]="Underline",o[o.LineThin=4]="LineThin",o[o.BlockOutline=5]="BlockOutline",o[o.UnderlineThin=6]="UnderlineThin"})(Z8||(Z8={}));var X8;(function(o){o[o.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",o[o.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",o[o.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",o[o.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter"})(X8||(X8={}));var Q8;(function(o){o[o.None=0]="None",o[o.Same=1]="Same",o[o.Indent=2]="Indent",o[o.DeepIndent=3]="DeepIndent"})(Q8||(Q8={}));var ag;let Ike=(ag=class{static chord(e,t){return Is(e,t)}},ag.CtrlCmd=2048,ag.Shift=1024,ag.Alt=512,ag.WinCtrl=256,ag);function qle(){return{editor:void 0,languages:void 0,CancellationTokenSource:An,Emitter:Y,KeyCode:E8,KeyMod:Ike,Position:G,Range:M,Selection:Ke,SelectionDirection:$8,MarkerSeverity:I8,MarkerTag:T8,Uri:st,Token:dD}}function Tke(o,e){const t=o;typeof t.vscodeWindowId!="number"&&Object.defineProperty(t,"vscodeWindowId",{get:()=>e})}const Vi=window;function Kle(o){return o}class Nke{constructor(e,t){this.lastCache=void 0,this.lastArgKey=void 0,typeof e=="function"?(this._fn=e,this._computeKey=Kle):(this._fn=t,this._computeKey=e.getCacheKey)}get(e){const t=this._computeKey(e);return this.lastArgKey!==t&&(this.lastArgKey=t,this.lastCache=this._fn(e)),this.lastCache}}class Bte{get cachedValues(){return this._map}constructor(e,t){this._map=new Map,this._map2=new Map,typeof e=="function"?(this._fn=e,this._computeKey=Kle):(this._fn=t,this._computeKey=e.getCacheKey)}get(e){const t=this._computeKey(e);if(this._map2.has(t))return this._map2.get(t);const i=this._fn(e);return this._map.set(e,i),this._map2.set(t,i),i}}class fu{constructor(e){this.executor=e,this._didRun=!1}get value(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}}function Gle(o){return!o||typeof o!="string"?!0:o.trim().length===0}const Rke=/{(\d+)}/g;function sC(o,...e){return e.length===0?o:o.replace(Rke,function(t,i){const n=parseInt(i,10);return isNaN(n)||n<0||n>=e.length?t:e[n]})}function Mke(o){return o.replace(/[<>"'&]/g,e=>{switch(e){case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"'":return"&apos;";case"&":return"&amp;"}return e})}function ik(o){return o.replace(/[<>&]/g,function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return e}})}function Ul(o){return o.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function Ake(o,e=" "){const t=GE(o,e);return Yle(t,e)}function GE(o,e){if(!o||!e)return o;const t=e.length;if(t===0||o.length===0)return o;let i=0;for(;o.indexOf(e,i)===i;)i=i+t;return o.substring(i)}function Yle(o,e){if(!o||!e)return o;const t=e.length,i=o.length;if(t===0||i===0)return o;let n=i,s=-1;for(;s=o.lastIndexOf(e,n-1),!(s===-1||s+t!==n);){if(s===0)return"";n=s}return o.substring(0,n)}function Pke(o){return o.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")}function Oke(o){return o.replace(/\*/g,"")}function Zle(o,e,t={}){if(!o)throw new Error("Cannot create regex from empty string");e||(o=Ul(o)),t.wholeWord&&(/\B/.test(o.charAt(0))||(o="\\b"+o),/\B/.test(o.charAt(o.length-1))||(o=o+"\\b"));let i="";return t.global&&(i+="g"),t.matchCase||(i+="i"),t.multiline&&(i+="m"),t.unicode&&(i+="u"),new RegExp(o,i)}function Fke(o){return o.source==="^"||o.source==="^$"||o.source==="$"||o.source==="^\\s*$"?!1:!!(o.exec("")&&o.lastIndex===0)}function zh(o){return o.split(/\r\n|\r|\n/)}function Bke(o){const e=[],t=o.split(/(\r\n|\r|\n)/);for(let i=0;i<Math.ceil(t.length/2);i++)e.push(t[2*i]+(t[2*i+1]??""));return e}function Sr(o){for(let e=0,t=o.length;e<t;e++){const i=o.charCodeAt(e);if(i!==32&&i!==9)return e}return-1}function Ui(o,e=0,t=o.length){for(let i=e;i<t;i++){const n=o.charCodeAt(i);if(n!==32&&n!==9)return o.substring(e,i)}return o.substring(e,t)}function au(o,e=o.length-1){for(let t=e;t>=0;t--){const i=o.charCodeAt(t);if(i!==32&&i!==9)return t}return-1}function gD(o,e){return o<e?-1:o>e?1:0}function Rq(o,e,t=0,i=o.length,n=0,s=e.length){for(;t<i&&n<s;t++,n++){const l=o.charCodeAt(t),c=e.charCodeAt(n);if(l<c)return-1;if(l>c)return 1}const r=i-t,a=s-n;return r<a?-1:r>a?1:0}function J8(o,e){return YE(o,e,0,o.length,0,e.length)}function YE(o,e,t=0,i=o.length,n=0,s=e.length){for(;t<i&&n<s;t++,n++){let l=o.charCodeAt(t),c=e.charCodeAt(n);if(l===c)continue;if(l>=128||c>=128)return Rq(o.toLowerCase(),e.toLowerCase(),t,i,n,s);Gp(l)&&(l-=32),Gp(c)&&(c-=32);const u=l-c;if(u!==0)return u}const r=i-t,a=s-n;return r<a?-1:r>a?1:0}function JN(o){return o>=48&&o<=57}function Gp(o){return o>=97&&o<=122}function gh(o){return o>=65&&o<=90}function Ew(o,e){return o.length===e.length&&YE(o,e)===0}function Mq(o,e){const t=e.length;return e.length>o.length?!1:YE(o,e,0,t)===0}function Om(o,e){const t=Math.min(o.length,e.length);let i;for(i=0;i<t;i++)if(o.charCodeAt(i)!==e.charCodeAt(i))return i;return t}function gA(o,e){const t=Math.min(o.length,e.length);let i;const n=o.length-1,s=e.length-1;for(i=0;i<t;i++)if(o.charCodeAt(n-i)!==e.charCodeAt(s-i))return i;return t}function qs(o){return 55296<=o&&o<=56319}function oC(o){return 56320<=o&&o<=57343}function Aq(o,e){return(o-55296<<10)+(e-56320)+65536}function pA(o,e,t){const i=o.charCodeAt(t);if(qs(i)&&t+1<e){const n=o.charCodeAt(t+1);if(oC(n))return Aq(i,n)}return i}function Wke(o,e){const t=o.charCodeAt(e-1);if(oC(t)&&e>1){const i=o.charCodeAt(e-2);if(qs(i))return Aq(i,t)}return t}class Pq{get offset(){return this._offset}constructor(e,t=0){this._str=e,this._len=e.length,this._offset=t}setOffset(e){this._offset=e}prevCodePoint(){const e=Wke(this._str,this._offset);return this._offset-=e>=65536?2:1,e}nextCodePoint(){const e=pA(this._str,this._len,this._offset);return this._offset+=e>=65536?2:1,e}eol(){return this._offset>=this._len}}class mA{get offset(){return this._iterator.offset}constructor(e,t=0){this._iterator=new Pq(e,t)}nextGraphemeLength(){const e=_A.getInstance(),t=this._iterator,i=t.offset;let n=e.getGraphemeBreakType(t.nextCodePoint());for(;!t.eol();){const s=t.offset,r=e.getGraphemeBreakType(t.nextCodePoint());if(Wte(n,r)){t.setOffset(s);break}n=r}return t.offset-i}prevGraphemeLength(){const e=_A.getInstance(),t=this._iterator,i=t.offset;let n=e.getGraphemeBreakType(t.prevCodePoint());for(;t.offset>0;){const s=t.offset,r=e.getGraphemeBreakType(t.prevCodePoint());if(Wte(r,n)){t.setOffset(s);break}n=r}return i-t.offset}eol(){return this._iterator.eol()}}function Oq(o,e){return new mA(o,e).nextGraphemeLength()}function Xle(o,e){return new mA(o,e).prevGraphemeLength()}function Hke(o,e){e>0&&oC(o.charCodeAt(e))&&e--;const t=e+Oq(o,e);return[t-Xle(o,t),t]}let PH;function Vke(){return/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/}function eS(o){return PH||(PH=Vke()),PH.test(o)}const zke=/^[\t\n\r\x20-\x7E]*$/;function ZE(o){return zke.test(o)}const Qle=/[\u2028\u2029]/;function Jle(o){return Qle.test(o)}function Fm(o){return o>=11904&&o<=55215||o>=63744&&o<=64255||o>=65281&&o<=65374}function Fq(o){return o>=127462&&o<=127487||o===8986||o===8987||o===9200||o===9203||o>=9728&&o<=10175||o===11088||o===11093||o>=127744&&o<=128591||o>=128640&&o<=128764||o>=128992&&o<=129008||o>=129280&&o<=129535||o>=129648&&o<=129782}const Uke="\uFEFF";function Bq(o){return!!(o&&o.length>0&&o.charCodeAt(0)===65279)}function $ke(o,e=!1){return o?(e&&(o=o.replace(/\\./g,"")),o.toLowerCase()!==o):!1}function ece(o){return o=o%(2*26),o<26?String.fromCharCode(97+o):String.fromCharCode(65+o-26)}function Wte(o,e){return o===0?e!==5&&e!==7:o===2&&e===3?!1:o===4||o===2||o===3||e===4||e===2||e===3?!0:!(o===8&&(e===8||e===9||e===11||e===12)||(o===11||o===9)&&(e===9||e===10)||(o===12||o===10)&&e===10||e===5||e===13||e===7||o===1||o===13&&e===14||o===6&&e===6)}const kv=class kv{static getInstance(){return kv._INSTANCE||(kv._INSTANCE=new kv),kv._INSTANCE}constructor(){this._data=jke()}getGraphemeBreakType(e){if(e<32)return e===10?3:e===13?2:4;if(e<127)return 0;const t=this._data,i=t.length/3;let n=1;for(;n<=i;)if(e<t[3*n])n=2*n;else if(e>t[3*n+1])n=2*n+1;else return t[3*n+2];return 0}};kv._INSTANCE=null;let _A=kv;function jke(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}function qke(o,e){if(o===0)return 0;const t=Kke(o,e);if(t!==void 0)return t;const i=new Pq(e,o);return i.prevCodePoint(),i.offset}function Kke(o,e){const t=new Pq(e,o);let i=t.prevCodePoint();for(;Gke(i)||i===65039||i===8419;){if(t.offset===0)return;i=t.prevCodePoint()}if(!Fq(i))return;let n=t.offset;return n>0&&t.prevCodePoint()===8205&&(n=t.offset),n}function Gke(o){return 127995<=o&&o<=127999}const tce="",nh=class nh{static getInstance(e){return nh.cache.get(Array.from(e))}static getLocales(){return nh._locales.value}constructor(e){this.confusableDictionary=e}isAmbiguous(e){return this.confusableDictionary.has(e)}getPrimaryConfusable(e){return this.confusableDictionary.get(e)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}};nh.ambiguousCharacterData=new fu(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}')),nh.cache=new Nke({getCacheKey:JSON.stringify},e=>{function t(u){const f=new Map;for(let g=0;g<u.length;g+=2)f.set(u[g],u[g+1]);return f}function i(u,f){const g=new Map(u);for(const[p,_]of f)g.set(p,_);return g}function n(u,f){if(!u)return f;const g=new Map;for(const[p,_]of u)f.has(p)&&g.set(p,_);return g}const s=nh.ambiguousCharacterData.value;let r=e.filter(u=>!u.startsWith("_")&&u in s);r.length===0&&(r=["_default"]);let a;for(const u of r){const f=t(s[u]);a=n(a,f)}const l=t(s._common),c=i(l,a);return new nh(c)}),nh._locales=new fu(()=>Object.keys(nh.ambiguousCharacterData.value).filter(e=>!e.startsWith("_")));let pD=nh;const Jw=class Jw{static getRawData(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static getData(){return this._data||(this._data=new Set(Jw.getRawData())),this._data}static isInvisibleCharacter(e){return Jw.getData().has(e)}static get codePoints(){return Jw.getData()}};Jw._data=void 0;let Kv=Jw;const o2=class o2{constructor(){this.mapWindowIdToZoomFactor=new Map}getZoomFactor(e){return this.mapWindowIdToZoomFactor.get(this.getWindowId(e))??1}getWindowId(e){return e.vscodeWindowId}};o2.INSTANCE=new o2;let eV=o2;function ice(o,e,t){typeof e=="string"&&(e=o.matchMedia(e)),e.addEventListener("change",t)}function Yke(o){return eV.INSTANCE.getZoomFactor(o)}const VS=navigator.userAgent,Lc=VS.indexOf("Firefox")>=0,Gv=VS.indexOf("AppleWebKit")>=0,XE=VS.indexOf("Chrome")>=0,yg=!XE&&VS.indexOf("Safari")>=0,nce=!XE&&!yg&&Gv;VS.indexOf("Electron/")>=0;const Hte=VS.indexOf("Android")>=0;let hM=!1;if(typeof Vi.matchMedia=="function"){const o=Vi.matchMedia("(display-mode: standalone) or (display-mode: window-controls-overlay)"),e=Vi.matchMedia("(display-mode: fullscreen)");hM=o.matches,ice(Vi,o,({matches:t})=>{hM&&e.matches||(hM=t)})}function Zke(){return hM}const Wq={clipboard:{writeText:su||document.queryCommandSupported&&document.queryCommandSupported("copy")||!!(navigator&&navigator.clipboard&&navigator.clipboard.writeText),readText:su||!!(navigator&&navigator.clipboard&&navigator.clipboard.readText)},keyboard:su||Zke()?0:navigator.keyboard||yg?1:2,touch:"ontouchstart"in Vi||navigator.maxTouchPoints>0,pointerEvents:Vi.PointerEvent&&("ontouchstart"in Vi||navigator.maxTouchPoints>0)};function tV(o,e){if(typeof o=="number"){if(o===0)return null;const t=(o&65535)>>>0,i=(o&4294901760)>>>16;return i!==0?new OH([eR(t,e),eR(i,e)]):new OH([eR(t,e)])}else{const t=[];for(let i=0;i<o.length;i++)t.push(eR(o[i],e));return new OH(t)}}function eR(o,e){const t=!!(o&2048),i=!!(o&256),n=e===2?i:t,s=!!(o&1024),r=!!(o&512),a=e===2?t:i,l=o&255;return new wg(n,s,r,a,l)}class wg{constructor(e,t,i,n,s){this.ctrlKey=e,this.shiftKey=t,this.altKey=i,this.metaKey=n,this.keyCode=s}equals(e){return e instanceof wg&&this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.keyCode===e.keyCode}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}}class OH{constructor(e){if(e.length===0)throw yc("chords");this.chords=e}}class Xke{constructor(e,t,i,n,s,r){this.ctrlKey=e,this.shiftKey=t,this.altKey=i,this.metaKey=n,this.keyLabel=s,this.keyAriaLabel=r}}class Qke{}function Jke(o){if(o.charCode){const t=String.fromCharCode(o.charCode).toUpperCase();return Kf.fromString(t)}const e=o.keyCode;if(e===3)return 7;if(Lc)switch(e){case 59:return 85;case 60:if(Qr)return 97;break;case 61:return 86;case 107:return 109;case 109:return 111;case 173:return 88;case 224:if(Kt)return 57;break}else if(Gv){if(Kt&&e===93)return 57;if(!Kt&&e===92)return 57}return Ple[e]||0}const eDe=Kt?256:2048,tDe=512,iDe=1024,nDe=Kt?2048:256;class Zi{constructor(e){var i;this._standardKeyboardEventBrand=!0;const t=e;this.browserEvent=t,this.target=t.target,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.altGraphKey=(i=t.getModifierState)==null?void 0:i.call(t,"AltGraph"),this.keyCode=Jke(t),this.code=t.code,this.ctrlKey=this.ctrlKey||this.keyCode===5,this.altKey=this.altKey||this.keyCode===6,this.shiftKey=this.shiftKey||this.keyCode===4,this.metaKey=this.metaKey||this.keyCode===57,this._asKeybinding=this._computeKeybinding(),this._asKeyCodeChord=this._computeKeyCodeChord()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeyCodeChord(){return this._asKeyCodeChord}equals(e){return this._asKeybinding===e}_computeKeybinding(){let e=0;this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode);let t=0;return this.ctrlKey&&(t|=eDe),this.altKey&&(t|=tDe),this.shiftKey&&(t|=iDe),this.metaKey&&(t|=nDe),t|=e,t}_computeKeyCodeChord(){let e=0;return this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode),new wg(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,e)}}const Vte=new WeakMap;function sDe(o){if(!o.parent||o.parent===o)return null;try{const e=o.location,t=o.parent.location;if(e.origin!=="null"&&t.origin!=="null"&&e.origin!==t.origin)return null}catch{return null}return o.parent}class oDe{static getSameOriginWindowChain(e){let t=Vte.get(e);if(!t){t=[],Vte.set(e,t);let i=e,n;do n=sDe(i),n?t.push({window:new WeakRef(i),iframeElement:i.frameElement||null}):t.push({window:new WeakRef(i),iframeElement:null}),i=n;while(i)}return t.slice(0)}static getPositionOfChildWindowRelativeToAncestorWindow(e,t){if(!t||e===t)return{top:0,left:0};let i=0,n=0;const s=this.getSameOriginWindowChain(e);for(const r of s){const a=r.window.deref();if(i+=(a==null?void 0:a.scrollY)??0,n+=(a==null?void 0:a.scrollX)??0,a===t||!r.iframeElement)break;const l=r.iframeElement.getBoundingClientRect();i+=l.top,n+=l.left}return{top:i,left:n}}}class td{constructor(e,t){this.timestamp=Date.now(),this.browserEvent=t,this.leftButton=t.button===0,this.middleButton=t.button===1,this.rightButton=t.button===2,this.buttons=t.buttons,this.target=t.target,this.detail=t.detail||1,t.type==="dblclick"&&(this.detail=2),this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,typeof t.pageX=="number"?(this.posx=t.pageX,this.posy=t.pageY):(this.posx=t.clientX+this.target.ownerDocument.body.scrollLeft+this.target.ownerDocument.documentElement.scrollLeft,this.posy=t.clientY+this.target.ownerDocument.body.scrollTop+this.target.ownerDocument.documentElement.scrollTop);const i=oDe.getPositionOfChildWindowRelativeToAncestorWindow(e,t.view);this.posx-=i.left,this.posy-=i.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}}class rC{constructor(e,t=0,i=0){var s;this.browserEvent=e||null,this.target=e?e.target||e.targetNode||e.srcElement:null,this.deltaY=i,this.deltaX=t;let n=!1;if(XE){const r=navigator.userAgent.match(/Chrome\/(\d+)/);n=(r?parseInt(r[1]):123)<=122}if(e){const r=e,a=e,l=((s=e.view)==null?void 0:s.devicePixelRatio)||1;if(typeof r.wheelDeltaY<"u")n?this.deltaY=r.wheelDeltaY/(120*l):this.deltaY=r.wheelDeltaY/120;else if(typeof a.VERTICAL_AXIS<"u"&&a.axis===a.VERTICAL_AXIS)this.deltaY=-a.detail/3;else if(e.type==="wheel"){const c=e;c.deltaMode===c.DOM_DELTA_LINE?Lc&&!Kt?this.deltaY=-e.deltaY/3:this.deltaY=-e.deltaY:this.deltaY=-e.deltaY/40}if(typeof r.wheelDeltaX<"u")yg&&Po?this.deltaX=-(r.wheelDeltaX/120):n?this.deltaX=r.wheelDeltaX/(120*l):this.deltaX=r.wheelDeltaX/120;else if(typeof a.HORIZONTAL_AXIS<"u"&&a.axis===a.HORIZONTAL_AXIS)this.deltaX=-e.detail/3;else if(e.type==="wheel"){const c=e;c.deltaMode===c.DOM_DELTA_LINE?Lc&&!Kt?this.deltaX=-e.deltaX/3:this.deltaX=-e.deltaX:this.deltaX=-e.deltaX/40}this.deltaY===0&&this.deltaX===0&&e.wheelDelta&&(n?this.deltaY=e.wheelDelta/(120*l):this.deltaY=e.wheelDelta/120)}}preventDefault(){var e;(e=this.browserEvent)==null||e.preventDefault()}stopPropagation(){var e;(e=this.browserEvent)==null||e.stopPropagation()}}const sce=Symbol("MicrotaskDelay");function iV(o){return!!o&&typeof o.then=="function"}function Gs(o){const e=new An,t=o(e.token),i=new Promise((n,s)=>{const r=e.token.onCancellationRequested(()=>{r.dispose(),s(new ad)});Promise.resolve(t).then(a=>{r.dispose(),e.dispose(),n(a)},a=>{r.dispose(),e.dispose(),s(a)})});return new class{cancel(){e.cancel(),e.dispose()}then(n,s){return i.then(n,s)}catch(n){return this.then(void 0,n)}finally(n){return i.finally(n)}}}function QE(o,e,t){return new Promise((i,n)=>{const s=e.onCancellationRequested(()=>{s.dispose(),i(t)});o.then(i,n).finally(()=>s.dispose())})}class rDe{constructor(){this.isDisposed=!1,this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(e){if(this.isDisposed)return Promise.reject(new Error("Throttler is disposed"));if(this.activePromise){if(this.queuedPromiseFactory=e,!this.queuedPromise){const t=()=>{if(this.queuedPromise=null,this.isDisposed)return;const i=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,i};this.queuedPromise=new Promise(i=>{this.activePromise.then(t,t).then(i)})}return new Promise((t,i)=>{this.queuedPromise.then(t,i)})}return this.activePromise=e(),new Promise((t,i)=>{this.activePromise.then(n=>{this.activePromise=null,t(n)},n=>{this.activePromise=null,i(n)})})}dispose(){this.isDisposed=!0}}const aDe=(o,e)=>{let t=!0;const i=setTimeout(()=>{t=!1,e()},o);return{isTriggered:()=>t,dispose:()=>{clearTimeout(i),t=!1}}},lDe=o=>{let e=!0;return queueMicrotask(()=>{e&&(e=!1,o())}),{isTriggered:()=>e,dispose:()=>{e=!1}}};class xc{constructor(e){this.defaultDelay=e,this.deferred=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(e,t=this.defaultDelay){this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((n,s)=>{this.doResolve=n,this.doReject=s}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const n=this.task;return this.task=null,n()}}));const i=()=>{var n;this.deferred=null,(n=this.doResolve)==null||n.call(this,null)};return this.deferred=t===sce?lDe(i):aDe(t,i),this.completionPromise}isTriggered(){var e;return!!((e=this.deferred)!=null&&e.isTriggered())}cancel(){var e;this.cancelTimeout(),this.completionPromise&&((e=this.doReject)==null||e.call(this,new ad),this.completionPromise=null)}cancelTimeout(){var e;(e=this.deferred)==null||e.dispose(),this.deferred=null}dispose(){this.cancel()}}class oce{constructor(e){this.delayer=new xc(e),this.throttler=new rDe}trigger(e,t){return this.delayer.trigger(()=>this.throttler.queue(e),t)}cancel(){this.delayer.cancel()}dispose(){this.delayer.dispose(),this.throttler.dispose()}}function Sg(o,e){return e?new Promise((t,i)=>{const n=setTimeout(()=>{s.dispose(),t()},o),s=e.onCancellationRequested(()=>{clearTimeout(n),s.dispose(),i(new ad)})}):Gs(t=>Sg(o,t))}function Bm(o,e=0,t){const i=setTimeout(()=>{o(),t&&n.dispose()},e),n=it(()=>{clearTimeout(i),t==null||t.deleteAndLeak(n)});return t==null||t.add(n),n}function Hq(o,e=i=>!!i,t=null){let i=0;const n=o.length,s=()=>{if(i>=n)return Promise.resolve(t);const r=o[i++];return Promise.resolve(r()).then(l=>e(l)?Promise.resolve(l):s())};return s()}class gd{constructor(e,t){this._isDisposed=!1,this._token=-1,typeof e=="function"&&typeof t=="number"&&this.setIfNotSet(e,t)}dispose(){this.cancel(),this._isDisposed=!0}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,t){if(this._isDisposed)throw new wi("Calling 'cancelAndSet' on a disposed TimeoutTimer");this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},t)}setIfNotSet(e,t){if(this._isDisposed)throw new wi("Calling 'setIfNotSet' on a disposed TimeoutTimer");this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},t))}}class Vq{constructor(){this.disposable=void 0,this.isDisposed=!1}cancel(){var e;(e=this.disposable)==null||e.dispose(),this.disposable=void 0}cancelAndSet(e,t,i=globalThis){if(this.isDisposed)throw new wi("Calling 'cancelAndSet' on a disposed IntervalTimer");this.cancel();const n=i.setInterval(()=>{e()},t);this.disposable=it(()=>{i.clearInterval(n),this.disposable=void 0})}dispose(){this.cancel(),this.isDisposed=!0}}class Oi{constructor(e,t){this.timeoutToken=-1,this.runner=e,this.timeout=t,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(e=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,e)}get delay(){return this.timeout}set delay(e){this.timeout=e}isScheduled(){return this.timeoutToken!==-1}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){var e;(e=this.runner)==null||e.call(this)}}let rce,nk;(function(){typeof globalThis.requestIdleCallback!="function"||typeof globalThis.cancelIdleCallback!="function"?nk=(o,e)=>{xle(()=>{if(t)return;const i=Date.now()+15;e(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,i-Date.now())}}))});let t=!1;return{dispose(){t||(t=!0)}}}:nk=(o,e,t)=>{const i=o.requestIdleCallback(e,typeof t=="number"?{timeout:t}:void 0);let n=!1;return{dispose(){n||(n=!0,o.cancelIdleCallback(i))}}},rce=o=>nk(globalThis,o)})();class ace{constructor(e,t){this._didRun=!1,this._executor=()=>{try{this._value=t()}catch(i){this._error=i}finally{this._didRun=!0}},this._handle=nk(e,()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}}class cDe extends ace{constructor(e){super(globalThis,e)}}class zS{get isRejected(){var e;return((e=this.outcome)==null?void 0:e.outcome)===1}get isSettled(){return!!this.outcome}constructor(){this.p=new Promise((e,t)=>{this.completeCallback=e,this.errorCallback=t})}complete(e){return new Promise(t=>{this.completeCallback(e),this.outcome={outcome:0,value:e},t()})}error(e){return new Promise(t=>{this.errorCallback(e),this.outcome={outcome:1,value:e},t()})}cancel(){return this.error(new ad)}}var nV;(function(o){async function e(i){let n;const s=await Promise.all(i.map(r=>r.then(a=>a,a=>{n||(n=a)})));if(typeof n<"u")throw n;return s}o.settled=e;function t(i){return new Promise(async(n,s)=>{try{await i(n,s)}catch(r){s(r)}})}o.withAsyncBody=t})(nV||(nV={}));const $a=class $a{static fromArray(e){return new $a(t=>{t.emitMany(e)})}static fromPromise(e){return new $a(async t=>{t.emitMany(await e)})}static fromPromises(e){return new $a(async t=>{await Promise.all(e.map(async i=>t.emitOne(await i)))})}static merge(e){return new $a(async t=>{await Promise.all(e.map(async i=>{for await(const n of i)t.emitOne(n)}))})}constructor(e,t){this._state=0,this._results=[],this._error=null,this._onReturn=t,this._onStateChanged=new Y,queueMicrotask(async()=>{const i={emitOne:n=>this.emitOne(n),emitMany:n=>this.emitMany(n),reject:n=>this.reject(n)};try{await Promise.resolve(e(i)),this.resolve()}catch(n){this.reject(n)}finally{i.emitOne=void 0,i.emitMany=void 0,i.reject=void 0}})}[Symbol.asyncIterator](){let e=0;return{next:async()=>{do{if(this._state===2)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(this._state===1)return{done:!0,value:void 0};await Ee.toPromise(this._onStateChanged.event)}while(!0)},return:async()=>{var t;return(t=this._onReturn)==null||t.call(this),{done:!0,value:void 0}}}}static map(e,t){return new $a(async i=>{for await(const n of e)i.emitOne(t(n))})}map(e){return $a.map(this,e)}static filter(e,t){return new $a(async i=>{for await(const n of e)t(n)&&i.emitOne(n)})}filter(e){return $a.filter(this,e)}static coalesce(e){return $a.filter(e,t=>!!t)}coalesce(){return $a.coalesce(this)}static async toPromise(e){const t=[];for await(const i of e)t.push(i);return t}toPromise(){return $a.toPromise(this)}emitOne(e){this._state===0&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){this._state===0&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(e){this._state===0&&(this._state=2,this._error=e,this._onStateChanged.fire())}};$a.EMPTY=$a.fromArray([]);let Fl=$a;class dDe extends Fl{constructor(e,t){super(t),this._source=e}cancel(){this._source.cancel()}}function uDe(o){const e=new An,t=o(e.token);return new dDe(e,async i=>{const n=e.token.onCancellationRequested(()=>{n.dispose(),e.dispose(),i.reject(new ad)});try{for await(const s of t){if(e.token.isCancellationRequested)return;i.emitOne(s)}n.dispose(),e.dispose()}catch(s){n.dispose(),e.dispose(),i.reject(s)}})}/*! @license DOMPurify 3.0.5 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.0.5/LICENSE */const{entries:lce,setPrototypeOf:zte,isFrozen:hDe,getPrototypeOf:fDe,getOwnPropertyDescriptor:gDe}=Object;let{freeze:rl,seal:gu,create:pDe}=Object,{apply:sV,construct:oV}=typeof Reflect<"u"&&Reflect;sV||(sV=function(e,t,i){return e.apply(t,i)});rl||(rl=function(e){return e});gu||(gu=function(e){return e});oV||(oV=function(e,t){return new e(...t)});const mDe=ld(Array.prototype.forEach),Ute=ld(Array.prototype.pop),ox=ld(Array.prototype.push),fM=ld(String.prototype.toLowerCase),FH=ld(String.prototype.toString),_De=ld(String.prototype.match),Nd=ld(String.prototype.replace),vDe=ld(String.prototype.indexOf),bDe=ld(String.prototype.trim),cc=ld(RegExp.prototype.test),rx=CDe(TypeError);function ld(o){return function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return sV(o,e,i)}}function CDe(o){return function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return oV(o,t)}}function Fi(o,e,t){var i;t=(i=t)!==null&&i!==void 0?i:fM,zte&&zte(o,null);let n=e.length;for(;n--;){let s=e[n];if(typeof s=="string"){const r=t(s);r!==s&&(hDe(e)||(e[n]=r),s=r)}o[s]=!0}return o}function Yy(o){const e=pDe(null);for(const[t,i]of lce(o))e[t]=i;return e}function tR(o,e){for(;o!==null;){const i=gDe(o,e);if(i){if(i.get)return ld(i.get);if(typeof i.value=="function")return ld(i.value)}o=fDe(o)}function t(i){return console.warn("fallback value for",i),null}return t}const $te=rl(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),BH=rl(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),WH=rl(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),yDe=rl(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),HH=rl(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),wDe=rl(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),jte=rl(["#text"]),qte=rl(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),VH=rl(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Kte=rl(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),iR=rl(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),SDe=gu(/\{\{[\w\W]*|[\w\W]*\}\}/gm),LDe=gu(/<%[\w\W]*|[\w\W]*%>/gm),xDe=gu(/\${[\w\W]*}/gm),kDe=gu(/^data-[\-\w.\u00B7-\uFFFF]/),DDe=gu(/^aria-[\-\w]+$/),cce=gu(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),EDe=gu(/^(?:\w+script|data):/i),IDe=gu(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),dce=gu(/^html$/i);var Gte=Object.freeze({__proto__:null,MUSTACHE_EXPR:SDe,ERB_EXPR:LDe,TMPLIT_EXPR:xDe,DATA_ATTR:kDe,ARIA_ATTR:DDe,IS_ALLOWED_URI:cce,IS_SCRIPT_OR_DATA:EDe,ATTR_WHITESPACE:IDe,DOCTYPE_NAME:dce});const TDe=()=>typeof window>"u"?null:window,NDe=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let i=null;const n="data-tt-policy-suffix";t&&t.hasAttribute(n)&&(i=t.getAttribute(n));const s="dompurify"+(i?"#"+i:"");try{return e.createPolicy(s,{createHTML(r){return r},createScriptURL(r){return r}})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}};function uce(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:TDe();const e=je=>uce(je);if(e.version="3.0.5",e.removed=[],!o||!o.document||o.document.nodeType!==9)return e.isSupported=!1,e;const t=o.document,i=t.currentScript;let{document:n}=o;const{DocumentFragment:s,HTMLTemplateElement:r,Node:a,Element:l,NodeFilter:c,NamedNodeMap:u=o.NamedNodeMap||o.MozNamedAttrMap,HTMLFormElement:f,DOMParser:g,trustedTypes:p}=o,_=l.prototype,b=tR(_,"cloneNode"),y=tR(_,"nextSibling"),S=tR(_,"childNodes"),L=tR(_,"parentNode");if(typeof r=="function"){const je=n.createElement("template");je.content&&je.content.ownerDocument&&(n=je.content.ownerDocument)}let x,k="";const{implementation:E,createNodeIterator:N,createDocumentFragment:A,getElementsByTagName:P}=n,{importNode:H}=t;let ee={};e.isSupported=typeof lce=="function"&&typeof L=="function"&&E&&E.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Q,ERB_EXPR:te,TMPLIT_EXPR:J,DATA_ATTR:Z,ARIA_ATTR:he,IS_SCRIPT_OR_DATA:Ce,ATTR_WHITESPACE:we}=Gte;let{IS_ALLOWED_URI:me}=Gte,pe=null;const Fe=Fi({},[...$te,...BH,...WH,...HH,...jte]);let Ye=null;const Ut=Fi({},[...qte,...VH,...Kte,...iR]);let dt=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ot=null,Bi=null,Qi=!0,Xn=!0,Qn=!1,Jn=!0,yn=!1,ws=!1,sn=!1,wn=!1,Ts=!1,Ns=!1,Ss=!1,Os=!0,sr=!1;const aa="user-content-";let Hs=!0,Bo=!1,Qs={},Rs=null;const xr=Fi({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Vs=null;const or=Fi({},["audio","video","img","source","image","track"]);let es=null;const kr=Fi({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Wo="http://www.w3.org/1998/Math/MathML",wo="http://www.w3.org/2000/svg",Ze="http://www.w3.org/1999/xhtml";let xt=Ze,fi=!1,Si=null;const Wi=Fi({},[Wo,wo,Ze],FH);let Wn;const Fn=["application/xhtml+xml","text/html"],Ci="text/html";let pi,Js=null;const ts=n.createElement("form"),Hn=function(oe){return oe instanceof RegExp||oe instanceof Function},la=function(oe){if(!(Js&&Js===oe)){if((!oe||typeof oe!="object")&&(oe={}),oe=Yy(oe),Wn=Fn.indexOf(oe.PARSER_MEDIA_TYPE)===-1?Wn=Ci:Wn=oe.PARSER_MEDIA_TYPE,pi=Wn==="application/xhtml+xml"?FH:fM,pe="ALLOWED_TAGS"in oe?Fi({},oe.ALLOWED_TAGS,pi):Fe,Ye="ALLOWED_ATTR"in oe?Fi({},oe.ALLOWED_ATTR,pi):Ut,Si="ALLOWED_NAMESPACES"in oe?Fi({},oe.ALLOWED_NAMESPACES,FH):Wi,es="ADD_URI_SAFE_ATTR"in oe?Fi(Yy(kr),oe.ADD_URI_SAFE_ATTR,pi):kr,Vs="ADD_DATA_URI_TAGS"in oe?Fi(Yy(or),oe.ADD_DATA_URI_TAGS,pi):or,Rs="FORBID_CONTENTS"in oe?Fi({},oe.FORBID_CONTENTS,pi):xr,Ot="FORBID_TAGS"in oe?Fi({},oe.FORBID_TAGS,pi):{},Bi="FORBID_ATTR"in oe?Fi({},oe.FORBID_ATTR,pi):{},Qs="USE_PROFILES"in oe?oe.USE_PROFILES:!1,Qi=oe.ALLOW_ARIA_ATTR!==!1,Xn=oe.ALLOW_DATA_ATTR!==!1,Qn=oe.ALLOW_UNKNOWN_PROTOCOLS||!1,Jn=oe.ALLOW_SELF_CLOSE_IN_ATTR!==!1,yn=oe.SAFE_FOR_TEMPLATES||!1,ws=oe.WHOLE_DOCUMENT||!1,Ts=oe.RETURN_DOM||!1,Ns=oe.RETURN_DOM_FRAGMENT||!1,Ss=oe.RETURN_TRUSTED_TYPE||!1,wn=oe.FORCE_BODY||!1,Os=oe.SANITIZE_DOM!==!1,sr=oe.SANITIZE_NAMED_PROPS||!1,Hs=oe.KEEP_CONTENT!==!1,Bo=oe.IN_PLACE||!1,me=oe.ALLOWED_URI_REGEXP||cce,xt=oe.NAMESPACE||Ze,dt=oe.CUSTOM_ELEMENT_HANDLING||{},oe.CUSTOM_ELEMENT_HANDLING&&Hn(oe.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(dt.tagNameCheck=oe.CUSTOM_ELEMENT_HANDLING.tagNameCheck),oe.CUSTOM_ELEMENT_HANDLING&&Hn(oe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(dt.attributeNameCheck=oe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),oe.CUSTOM_ELEMENT_HANDLING&&typeof oe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(dt.allowCustomizedBuiltInElements=oe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),yn&&(Xn=!1),Ns&&(Ts=!0),Qs&&(pe=Fi({},[...jte]),Ye=[],Qs.html===!0&&(Fi(pe,$te),Fi(Ye,qte)),Qs.svg===!0&&(Fi(pe,BH),Fi(Ye,VH),Fi(Ye,iR)),Qs.svgFilters===!0&&(Fi(pe,WH),Fi(Ye,VH),Fi(Ye,iR)),Qs.mathMl===!0&&(Fi(pe,HH),Fi(Ye,Kte),Fi(Ye,iR))),oe.ADD_TAGS&&(pe===Fe&&(pe=Yy(pe)),Fi(pe,oe.ADD_TAGS,pi)),oe.ADD_ATTR&&(Ye===Ut&&(Ye=Yy(Ye)),Fi(Ye,oe.ADD_ATTR,pi)),oe.ADD_URI_SAFE_ATTR&&Fi(es,oe.ADD_URI_SAFE_ATTR,pi),oe.FORBID_CONTENTS&&(Rs===xr&&(Rs=Yy(Rs)),Fi(Rs,oe.FORBID_CONTENTS,pi)),Hs&&(pe["#text"]=!0),ws&&Fi(pe,["html","head","body"]),pe.table&&(Fi(pe,["tbody"]),delete Ot.tbody),oe.TRUSTED_TYPES_POLICY){if(typeof oe.TRUSTED_TYPES_POLICY.createHTML!="function")throw rx('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof oe.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw rx('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');x=oe.TRUSTED_TYPES_POLICY,k=x.createHTML("")}else x===void 0&&(x=NDe(p,i)),x!==null&&typeof k=="string"&&(k=x.createHTML(""));rl&&rl(oe),Js=oe}},ca=Fi({},["mi","mo","mn","ms","mtext"]),Ac=Fi({},["foreignobject","desc","title","annotation-xml"]),ku=Fi({},["title","style","font","a","script"]),$t=Fi({},BH);Fi($t,WH),Fi($t,yDe);const z=Fi({},HH);Fi(z,wDe);const $=function(oe){let Me=L(oe);(!Me||!Me.tagName)&&(Me={namespaceURI:xt,tagName:"template"});const Xe=fM(oe.tagName),mi=fM(Me.tagName);return Si[oe.namespaceURI]?oe.namespaceURI===wo?Me.namespaceURI===Ze?Xe==="svg":Me.namespaceURI===Wo?Xe==="svg"&&(mi==="annotation-xml"||ca[mi]):!!$t[Xe]:oe.namespaceURI===Wo?Me.namespaceURI===Ze?Xe==="math":Me.namespaceURI===wo?Xe==="math"&&Ac[mi]:!!z[Xe]:oe.namespaceURI===Ze?Me.namespaceURI===wo&&!Ac[mi]||Me.namespaceURI===Wo&&!ca[mi]?!1:!z[Xe]&&(ku[Xe]||!$t[Xe]):!!(Wn==="application/xhtml+xml"&&Si[oe.namespaceURI]):!1},K=function(oe){ox(e.removed,{element:oe});try{oe.parentNode.removeChild(oe)}catch{oe.remove()}},ie=function(oe,Me){try{ox(e.removed,{attribute:Me.getAttributeNode(oe),from:Me})}catch{ox(e.removed,{attribute:null,from:Me})}if(Me.removeAttribute(oe),oe==="is"&&!Ye[oe])if(Ts||Ns)try{K(Me)}catch{}else try{Me.setAttribute(oe,"")}catch{}},re=function(oe){let Me,Xe;if(wn)oe="<remove></remove>"+oe;else{const as=_De(oe,/^[\r\n\t ]+/);Xe=as&&as[0]}Wn==="application/xhtml+xml"&&xt===Ze&&(oe='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+oe+"</body></html>");const mi=x?x.createHTML(oe):oe;if(xt===Ze)try{Me=new g().parseFromString(mi,Wn)}catch{}if(!Me||!Me.documentElement){Me=E.createDocument(xt,"template",null);try{Me.documentElement.innerHTML=fi?k:mi}catch{}}const Sn=Me.body||Me.documentElement;return oe&&Xe&&Sn.insertBefore(n.createTextNode(Xe),Sn.childNodes[0]||null),xt===Ze?P.call(Me,ws?"html":"body")[0]:ws?Me.documentElement:Sn},ye=function(oe){return N.call(oe.ownerDocument||oe,oe,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT,null,!1)},Ne=function(oe){return oe instanceof f&&(typeof oe.nodeName!="string"||typeof oe.textContent!="string"||typeof oe.removeChild!="function"||!(oe.attributes instanceof u)||typeof oe.removeAttribute!="function"||typeof oe.setAttribute!="function"||typeof oe.namespaceURI!="string"||typeof oe.insertBefore!="function"||typeof oe.hasChildNodes!="function")},j=function(oe){return typeof a=="object"?oe instanceof a:oe&&typeof oe=="object"&&typeof oe.nodeType=="number"&&typeof oe.nodeName=="string"},fe=function(oe,Me,Xe){ee[oe]&&mDe(ee[oe],mi=>{mi.call(e,Me,Xe,Js)})},Oe=function(oe){let Me;if(fe("beforeSanitizeElements",oe,null),Ne(oe))return K(oe),!0;const Xe=pi(oe.nodeName);if(fe("uponSanitizeElement",oe,{tagName:Xe,allowedTags:pe}),oe.hasChildNodes()&&!j(oe.firstElementChild)&&(!j(oe.content)||!j(oe.content.firstElementChild))&&cc(/<[/\w]/g,oe.innerHTML)&&cc(/<[/\w]/g,oe.textContent))return K(oe),!0;if(!pe[Xe]||Ot[Xe]){if(!Ot[Xe]&&Et(Xe)&&(dt.tagNameCheck instanceof RegExp&&cc(dt.tagNameCheck,Xe)||dt.tagNameCheck instanceof Function&&dt.tagNameCheck(Xe)))return!1;if(Hs&&!Rs[Xe]){const mi=L(oe)||oe.parentNode,Sn=S(oe)||oe.childNodes;if(Sn&&mi){const as=Sn.length;for(let Mi=as-1;Mi>=0;--Mi)mi.insertBefore(b(Sn[Mi],!0),y(oe))}}return K(oe),!0}return oe instanceof l&&!$(oe)||(Xe==="noscript"||Xe==="noembed"||Xe==="noframes")&&cc(/<\/no(script|embed|frames)/i,oe.innerHTML)?(K(oe),!0):(yn&&oe.nodeType===3&&(Me=oe.textContent,Me=Nd(Me,Q," "),Me=Nd(Me,te," "),Me=Nd(Me,J," "),oe.textContent!==Me&&(ox(e.removed,{element:oe.cloneNode()}),oe.textContent=Me)),fe("afterSanitizeElements",oe,null),!1)},rt=function(oe,Me,Xe){if(Os&&(Me==="id"||Me==="name")&&(Xe in n||Xe in ts))return!1;if(!(Xn&&!Bi[Me]&&cc(Z,Me))){if(!(Qi&&cc(he,Me))){if(!Ye[Me]||Bi[Me]){if(!(Et(oe)&&(dt.tagNameCheck instanceof RegExp&&cc(dt.tagNameCheck,oe)||dt.tagNameCheck instanceof Function&&dt.tagNameCheck(oe))&&(dt.attributeNameCheck instanceof RegExp&&cc(dt.attributeNameCheck,Me)||dt.attributeNameCheck instanceof Function&&dt.attributeNameCheck(Me))||Me==="is"&&dt.allowCustomizedBuiltInElements&&(dt.tagNameCheck instanceof RegExp&&cc(dt.tagNameCheck,Xe)||dt.tagNameCheck instanceof Function&&dt.tagNameCheck(Xe))))return!1}else if(!es[Me]){if(!cc(me,Nd(Xe,we,""))){if(!((Me==="src"||Me==="xlink:href"||Me==="href")&&oe!=="script"&&vDe(Xe,"data:")===0&&Vs[oe])){if(!(Qn&&!cc(Ce,Nd(Xe,we,"")))){if(Xe)return!1}}}}}}return!0},Et=function(oe){return oe.indexOf("-")>0},gt=function(oe){let Me,Xe,mi,Sn;fe("beforeSanitizeAttributes",oe,null);const{attributes:as}=oe;if(!as)return;const Mi={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Ye};for(Sn=as.length;Sn--;){Me=as[Sn];const{name:rr,namespaceURI:Du}=Me;if(Xe=rr==="value"?Me.value:bDe(Me.value),mi=pi(rr),Mi.attrName=mi,Mi.attrValue=Xe,Mi.keepAttr=!0,Mi.forceKeepAttr=void 0,fe("uponSanitizeAttribute",oe,Mi),Xe=Mi.attrValue,Mi.forceKeepAttr||(ie(rr,oe),!Mi.keepAttr))continue;if(!Jn&&cc(/\/>/i,Xe)){ie(rr,oe);continue}yn&&(Xe=Nd(Xe,Q," "),Xe=Nd(Xe,te," "),Xe=Nd(Xe,J," "));const Vg=pi(oe.nodeName);if(rt(Vg,mi,Xe)){if(sr&&(mi==="id"||mi==="name")&&(ie(rr,oe),Xe=aa+Xe),x&&typeof p=="object"&&typeof p.getAttributeType=="function"&&!Du)switch(p.getAttributeType(Vg,mi)){case"TrustedHTML":{Xe=x.createHTML(Xe);break}case"TrustedScriptURL":{Xe=x.createScriptURL(Xe);break}}try{Du?oe.setAttributeNS(Du,rr,Xe):oe.setAttribute(rr,Xe),Ute(e.removed)}catch{}}}fe("afterSanitizeAttributes",oe,null)},kt=function je(oe){let Me;const Xe=ye(oe);for(fe("beforeSanitizeShadowDOM",oe,null);Me=Xe.nextNode();)fe("uponSanitizeShadowNode",Me,null),!Oe(Me)&&(Me.content instanceof s&&je(Me.content),gt(Me));fe("afterSanitizeShadowDOM",oe,null)};return e.sanitize=function(je){let oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Me,Xe,mi,Sn;if(fi=!je,fi&&(je="<!-->"),typeof je!="string"&&!j(je))if(typeof je.toString=="function"){if(je=je.toString(),typeof je!="string")throw rx("dirty is not a string, aborting")}else throw rx("toString is not a function");if(!e.isSupported)return je;if(sn||la(oe),e.removed=[],typeof je=="string"&&(Bo=!1),Bo){if(je.nodeName){const rr=pi(je.nodeName);if(!pe[rr]||Ot[rr])throw rx("root node is forbidden and cannot be sanitized in-place")}}else if(je instanceof a)Me=re("<!---->"),Xe=Me.ownerDocument.importNode(je,!0),Xe.nodeType===1&&Xe.nodeName==="BODY"||Xe.nodeName==="HTML"?Me=Xe:Me.appendChild(Xe);else{if(!Ts&&!yn&&!ws&&je.indexOf("<")===-1)return x&&Ss?x.createHTML(je):je;if(Me=re(je),!Me)return Ts?null:Ss?k:""}Me&&wn&&K(Me.firstChild);const as=ye(Bo?je:Me);for(;mi=as.nextNode();)Oe(mi)||(mi.content instanceof s&&kt(mi.content),gt(mi));if(Bo)return je;if(Ts){if(Ns)for(Sn=A.call(Me.ownerDocument);Me.firstChild;)Sn.appendChild(Me.firstChild);else Sn=Me;return(Ye.shadowroot||Ye.shadowrootmode)&&(Sn=H.call(t,Sn,!0)),Sn}let Mi=ws?Me.outerHTML:Me.innerHTML;return ws&&pe["!doctype"]&&Me.ownerDocument&&Me.ownerDocument.doctype&&Me.ownerDocument.doctype.name&&cc(dce,Me.ownerDocument.doctype.name)&&(Mi="<!DOCTYPE "+Me.ownerDocument.doctype.name+`>
`+Mi),yn&&(Mi=Nd(Mi,Q," "),Mi=Nd(Mi,te," "),Mi=Nd(Mi,J," ")),x&&Ss?x.createHTML(Mi):Mi},e.setConfig=function(je){la(je),sn=!0},e.clearConfig=function(){Js=null,sn=!1},e.isValidAttribute=function(je,oe,Me){Js||la({});const Xe=pi(je),mi=pi(oe);return rt(Xe,mi,Me)},e.addHook=function(je,oe){typeof oe=="function"&&(ee[je]=ee[je]||[],ox(ee[je],oe))},e.removeHook=function(je){if(ee[je])return Ute(ee[je])},e.removeHooks=function(je){ee[je]&&(ee[je]=[])},e.removeAllHooks=function(){ee={}},e}var Uh=uce();Uh.version;Uh.isSupported;const hce=Uh.sanitize;Uh.setConfig;Uh.clearConfig;Uh.isValidAttribute;const fce=Uh.addHook,gce=Uh.removeHook;Uh.removeHooks;Uh.removeAllHooks;var Lt;(function(o){o.inMemory="inmemory",o.vscode="vscode",o.internal="private",o.walkThrough="walkThrough",o.walkThroughSnippet="walkThroughSnippet",o.http="http",o.https="https",o.file="file",o.mailto="mailto",o.untitled="untitled",o.data="data",o.command="command",o.vscodeRemote="vscode-remote",o.vscodeRemoteResource="vscode-remote-resource",o.vscodeManagedRemoteResource="vscode-managed-remote-resource",o.vscodeUserData="vscode-userdata",o.vscodeCustomEditor="vscode-custom-editor",o.vscodeNotebookCell="vscode-notebook-cell",o.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",o.vscodeNotebookCellMetadataDiff="vscode-notebook-cell-metadata-diff",o.vscodeNotebookCellOutput="vscode-notebook-cell-output",o.vscodeNotebookCellOutputDiff="vscode-notebook-cell-output-diff",o.vscodeNotebookMetadata="vscode-notebook-metadata",o.vscodeInteractiveInput="vscode-interactive-input",o.vscodeSettings="vscode-settings",o.vscodeWorkspaceTrust="vscode-workspace-trust",o.vscodeTerminal="vscode-terminal",o.vscodeChatCodeBlock="vscode-chat-code-block",o.vscodeChatCodeCompareBlock="vscode-chat-code-compare-block",o.vscodeChatSesssion="vscode-chat-editor",o.webviewPanel="webview-panel",o.vscodeWebview="vscode-webview",o.extension="extension",o.vscodeFileResource="vscode-file",o.tmp="tmp",o.vsls="vsls",o.vscodeSourceControl="vscode-scm",o.commentsInput="comment",o.codeSetting="code-setting",o.outputChannel="output"})(Lt||(Lt={}));function UF(o,e){return st.isUri(o)?Ew(o.scheme,e):Mq(o,e+":")}function rV(o,...e){return e.some(t=>UF(o,t))}const RDe="tkn";class MDe{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null,this._serverRootPath="/"}setPreferredWebSchema(e){this._preferredWebSchema=e}get _remoteResourcesPath(){return Cs.join(this._serverRootPath,Lt.vscodeRemoteResource)}rewrite(e){if(this._delegate)try{return this._delegate(e)}catch(a){return wt(a),e}const t=e.authority;let i=this._hosts[t];i&&i.indexOf(":")!==-1&&i.indexOf("[")===-1&&(i=`[${i}]`);const n=this._ports[t],s=this._connectionTokens[t];let r=`path=${encodeURIComponent(e.path)}`;return typeof s=="string"&&(r+=`&${RDe}=${encodeURIComponent(s)}`),st.from({scheme:NC?this._preferredWebSchema:Lt.vscodeRemoteResource,authority:`${i}:${n}`,path:this._remoteResourcesPath,query:r})}}const pce=new MDe,ADe="vscode-app",Vk=class Vk{asBrowserUri(e){const t=this.toUri(e);return this.uriToBrowserUri(t)}uriToBrowserUri(e){return e.scheme===Lt.vscodeRemote?pce.rewrite(e):e.scheme===Lt.file&&(su||HLe===`${Lt.vscodeFileResource}://${Vk.FALLBACK_AUTHORITY}`)?e.with({scheme:Lt.vscodeFileResource,authority:e.authority||Vk.FALLBACK_AUTHORITY,query:null,fragment:null}):e}toUri(e,t){if(st.isUri(e))return e;if(globalThis._VSCODE_FILE_ROOT){const i=globalThis._VSCODE_FILE_ROOT;if(/^\w[\w\d+.-]*:\/\//.test(i))return st.joinPath(st.parse(i,!0),e);const n=dke(i,e);return st.file(n)}return st.parse(t.toUrl(e))}};Vk.FALLBACK_AUTHORITY=ADe;let aV=Vk;const $F=new aV;var lV;(function(o){const e=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);o.CoopAndCoep=Object.freeze(e.get("3"));const t="vscode-coi";function i(s){let r;typeof s=="string"?r=new URL(s).searchParams:s instanceof URL?r=s.searchParams:st.isUri(s)&&(r=new URL(s.toString(!0)).searchParams);const a=r==null?void 0:r.get(t);if(a)return e.get(a)}o.getHeadersFromQuery=i;function n(s,r,a){if(!globalThis.crossOriginIsolated)return;const l=r&&a?"3":a?"2":"1";s instanceof URLSearchParams?s.set(t,l):s[t]=l}o.addSearchParam=n})(lV||(lV={}));function jF(o){return qF(o,0)}function qF(o,e){switch(typeof o){case"object":return o===null?Qf(349,e):Array.isArray(o)?ODe(o,e):FDe(o,e);case"string":return zq(o,e);case"boolean":return PDe(o,e);case"number":return Qf(o,e);case"undefined":return Qf(937,e);default:return Qf(617,e)}}function Qf(o,e){return(e<<5)-e+o|0}function PDe(o,e){return Qf(o?433:863,e)}function zq(o,e){e=Qf(149417,e);for(let t=0,i=o.length;t<i;t++)e=Qf(o.charCodeAt(t),e);return e}function ODe(o,e){return e=Qf(104579,e),o.reduce((t,i)=>qF(i,t),e)}function FDe(o,e){return e=Qf(181387,e),Object.keys(o).sort().reduce((t,i)=>(t=zq(i,t),qF(o[i],t)),e)}function zH(o,e,t=32){const i=t-e,n=~((1<<i)-1);return(o<<e|(n&o)>>>i)>>>0}function Yte(o,e=0,t=o.byteLength,i=0){for(let n=0;n<t;n++)o[e+n]=i}function BDe(o,e,t="0"){for(;o.length<e;)o=t+o;return o}function ax(o,e=32){return o instanceof ArrayBuffer?Array.from(new Uint8Array(o)).map(t=>t.toString(16).padStart(2,"0")).join(""):BDe((o>>>0).toString(16),e/4)}const r2=class r2{constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(67),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._leftoverHighSurrogate=0,this._finished=!1}update(e){const t=e.length;if(t===0)return;const i=this._buff;let n=this._buffLen,s=this._leftoverHighSurrogate,r,a;for(s!==0?(r=s,a=-1,s=0):(r=e.charCodeAt(0),a=0);;){let l=r;if(qs(r))if(a+1<t){const c=e.charCodeAt(a+1);oC(c)?(a++,l=Aq(r,c)):l=65533}else{s=r;break}else oC(r)&&(l=65533);if(n=this._push(i,n,l),a++,a<t)r=e.charCodeAt(a);else break}this._buffLen=n,this._leftoverHighSurrogate=s}_push(e,t,i){return i<128?e[t++]=i:i<2048?(e[t++]=192|(i&1984)>>>6,e[t++]=128|(i&63)>>>0):i<65536?(e[t++]=224|(i&61440)>>>12,e[t++]=128|(i&4032)>>>6,e[t++]=128|(i&63)>>>0):(e[t++]=240|(i&1835008)>>>18,e[t++]=128|(i&258048)>>>12,e[t++]=128|(i&4032)>>>6,e[t++]=128|(i&63)>>>0),t>=64&&(this._step(),t-=64,this._totalLen+=64,e[0]=e[64],e[1]=e[65],e[2]=e[66]),t}digest(){return this._finished||(this._finished=!0,this._leftoverHighSurrogate&&(this._leftoverHighSurrogate=0,this._buffLen=this._push(this._buff,this._buffLen,65533)),this._totalLen+=this._buffLen,this._wrapUp()),ax(this._h0)+ax(this._h1)+ax(this._h2)+ax(this._h3)+ax(this._h4)}_wrapUp(){this._buff[this._buffLen++]=128,Yte(this._buff,this._buffLen),this._buffLen>56&&(this._step(),Yte(this._buff));const e=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(e/4294967296),!1),this._buffDV.setUint32(60,e%4294967296,!1),this._step()}_step(){const e=r2._bigBlock32,t=this._buffDV;for(let f=0;f<64;f+=4)e.setUint32(f,t.getUint32(f,!1),!1);for(let f=64;f<320;f+=4)e.setUint32(f,zH(e.getUint32(f-12,!1)^e.getUint32(f-32,!1)^e.getUint32(f-56,!1)^e.getUint32(f-64,!1),1),!1);let i=this._h0,n=this._h1,s=this._h2,r=this._h3,a=this._h4,l,c,u;for(let f=0;f<80;f++)f<20?(l=n&s|~n&r,c=1518500249):f<40?(l=n^s^r,c=1859775393):f<60?(l=n&s|n&r|s&r,c=2400959708):(l=n^s^r,c=3395469782),u=zH(i,5)+l+a+c+e.getUint32(f*4,!1)&4294967295,a=r,r=s,s=zH(n,30),n=i,i=u;this._h0=this._h0+i&4294967295,this._h1=this._h1+n&4294967295,this._h2=this._h2+s&4294967295,this._h3=this._h3+r&4294967295,this._h4=this._h4+a&4294967295}};r2._bigBlock32=new DataView(new ArrayBuffer(320));let cV=r2;const{registerWindow:oet,getWindow:at,getDocument:ret,getWindows:mce,getWindowsCount:WDe,getWindowId:vA,getWindowById:Zte,hasWindow:aet,onDidRegisterWindow:KF,onWillUnregisterWindow:HDe,onDidUnregisterWindow:VDe}=function(){const o=new Map;Tke(Vi,1);const e={window:Vi,disposables:new le};o.set(Vi.vscodeWindowId,e);const t=new Y,i=new Y,n=new Y;function s(r,a){return(typeof r=="number"?o.get(r):void 0)??(a?e:void 0)}return{onDidRegisterWindow:t.event,onWillUnregisterWindow:n.event,onDidUnregisterWindow:i.event,registerWindow(r){if(o.has(r.vscodeWindowId))return X.None;const a=new le,l={window:r,disposables:a.add(new le)};return o.set(r.vscodeWindowId,l),a.add(it(()=>{o.delete(r.vscodeWindowId),i.fire(r)})),a.add(se(r,Le.BEFORE_UNLOAD,()=>{n.fire(r)})),t.fire(l),a},getWindows(){return o.values()},getWindowsCount(){return o.size},getWindowId(r){return r.vscodeWindowId},hasWindow(r){return o.has(r)},getWindowById:s,getWindow(r){var c;const a=r;if((c=a==null?void 0:a.ownerDocument)!=null&&c.defaultView)return a.ownerDocument.defaultView.window;const l=r;return l!=null&&l.view?l.view.window:Vi},getDocument(r){return at(r).document}}}();function bo(o){for(;o.firstChild;)o.firstChild.remove()}class zDe{constructor(e,t,i,n){this._node=e,this._type=t,this._handler=i,this._options=n||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}}function se(o,e,t,i){return new zDe(o,e,t,i)}function _ce(o,e){return function(t){return e(new td(o,t))}}function UDe(o){return function(e){return o(new Zi(e))}}const Bn=function(e,t,i,n){let s=i;return t==="click"||t==="mousedown"||t==="contextmenu"?s=_ce(at(e),i):(t==="keydown"||t==="keypress"||t==="keyup")&&(s=UDe(i)),se(e,t,s,n)},$De=function(e,t,i){const n=_ce(at(e),t);return jDe(e,n,i)};function jDe(o,e,t){return se(o,hu&&Wq.pointerEvents?Le.POINTER_DOWN:Le.MOUSE_DOWN,e,t)}function Rx(o,e,t){return nk(o,e,t)}class UH extends ace{constructor(e,t){super(e,t)}}let bA,al;class Uq extends Vq{constructor(e){super(),this.defaultTarget=e&&at(e)}cancelAndSet(e,t,i){return super.cancelAndSet(e,t,i??this.defaultTarget)}}class $H{constructor(e,t=0){this._runner=e,this.priority=t,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(e){wt(e)}}static sort(e,t){return t.priority-e.priority}}(function(){const o=new Map,e=new Map,t=new Map,i=new Map,n=s=>{t.set(s,!1);const r=o.get(s)??[];for(e.set(s,r),o.set(s,[]),i.set(s,!0);r.length>0;)r.sort($H.sort),r.shift().execute();i.set(s,!1)};al=(s,r,a=0)=>{const l=vA(s),c=new $H(r,a);let u=o.get(l);return u||(u=[],o.set(l,u)),u.push(c),t.get(l)||(t.set(l,!0),s.requestAnimationFrame(()=>n(l))),c},bA=(s,r,a)=>{const l=vA(s);if(i.get(l)){const c=new $H(r,a);let u=e.get(l);return u||(u=[],e.set(l,u)),u.push(c),c}else return al(s,r,a)}})();function GF(o){return at(o).getComputedStyle(o,null)}function Wm(o,e){const t=at(o),i=t.document;if(o!==i.body)return new Ri(o.clientWidth,o.clientHeight);if(hu&&(t!=null&&t.visualViewport))return new Ri(t.visualViewport.width,t.visualViewport.height);if(t!=null&&t.innerWidth&&t.innerHeight)return new Ri(t.innerWidth,t.innerHeight);if(i.body&&i.body.clientWidth&&i.body.clientHeight)return new Ri(i.body.clientWidth,i.body.clientHeight);if(i.documentElement&&i.documentElement.clientWidth&&i.documentElement.clientHeight)return new Ri(i.documentElement.clientWidth,i.documentElement.clientHeight);throw new Error("Unable to figure out browser width and height")}class us{static convertToPixels(e,t){return parseFloat(t)||0}static getDimension(e,t,i){const n=GF(e),s=n?n.getPropertyValue(t):"0";return us.convertToPixels(e,s)}static getBorderLeftWidth(e){return us.getDimension(e,"border-left-width","borderLeftWidth")}static getBorderRightWidth(e){return us.getDimension(e,"border-right-width","borderRightWidth")}static getBorderTopWidth(e){return us.getDimension(e,"border-top-width","borderTopWidth")}static getBorderBottomWidth(e){return us.getDimension(e,"border-bottom-width","borderBottomWidth")}static getPaddingLeft(e){return us.getDimension(e,"padding-left","paddingLeft")}static getPaddingRight(e){return us.getDimension(e,"padding-right","paddingRight")}static getPaddingTop(e){return us.getDimension(e,"padding-top","paddingTop")}static getPaddingBottom(e){return us.getDimension(e,"padding-bottom","paddingBottom")}static getMarginLeft(e){return us.getDimension(e,"margin-left","marginLeft")}static getMarginTop(e){return us.getDimension(e,"margin-top","marginTop")}static getMarginRight(e){return us.getDimension(e,"margin-right","marginRight")}static getMarginBottom(e){return us.getDimension(e,"margin-bottom","marginBottom")}}const Dv=class Dv{constructor(e,t){this.width=e,this.height=t}with(e=this.width,t=this.height){return e!==this.width||t!==this.height?new Dv(e,t):this}static is(e){return typeof e=="object"&&typeof e.height=="number"&&typeof e.width=="number"}static lift(e){return e instanceof Dv?e:new Dv(e.width,e.height)}static equals(e,t){return e===t?!0:!e||!t?!1:e.width===t.width&&e.height===t.height}};Dv.None=new Dv(0,0);let Ri=Dv;function vce(o){let e=o.offsetParent,t=o.offsetTop,i=o.offsetLeft;for(;(o=o.parentNode)!==null&&o!==o.ownerDocument.body&&o!==o.ownerDocument.documentElement;){t-=o.scrollTop;const n=Cce(o)?null:GF(o);n&&(i-=n.direction!=="rtl"?o.scrollLeft:-o.scrollLeft),o===e&&(i+=us.getBorderLeftWidth(o),t+=us.getBorderTopWidth(o),t+=o.offsetTop,i+=o.offsetLeft,e=o.offsetParent)}return{left:i,top:t}}function qDe(o,e,t){typeof e=="number"&&(o.style.width=`${e}px`),typeof t=="number"&&(o.style.height=`${t}px`)}function os(o){const e=o.getBoundingClientRect(),t=at(o);return{left:e.left+t.scrollX,top:e.top+t.scrollY,width:e.width,height:e.height}}function bce(o){let e=o,t=1;do{const i=GF(e).zoom;i!=null&&i!=="1"&&(t*=i),e=e.parentElement}while(e!==null&&e!==e.ownerDocument.documentElement);return t}function qa(o){const e=us.getMarginLeft(o)+us.getMarginRight(o);return o.offsetWidth+e}function jH(o){const e=us.getBorderLeftWidth(o)+us.getBorderRightWidth(o),t=us.getPaddingLeft(o)+us.getPaddingRight(o);return o.offsetWidth-e-t}function KDe(o){const e=us.getBorderTopWidth(o)+us.getBorderBottomWidth(o),t=us.getPaddingTop(o)+us.getPaddingBottom(o);return o.offsetHeight-e-t}function Jf(o){const e=us.getMarginTop(o)+us.getMarginBottom(o);return o.offsetHeight+e}function Ks(o,e){return!!(e!=null&&e.contains(o))}function GDe(o,e,t){for(;o&&o.nodeType===o.ELEMENT_NODE;){if(o.classList.contains(e))return o;if(t){if(typeof t=="string"){if(o.classList.contains(t))return null}else if(o===t)return null}o=o.parentNode}return null}function qH(o,e,t){return!!GDe(o,e,t)}function Cce(o){return o&&!!o.host&&!!o.mode}function CA(o){return!!aC(o)}function aC(o){var e;for(;o.parentNode;){if(o===((e=o.ownerDocument)==null?void 0:e.body))return null;o=o.parentNode}return Cce(o)?o:null}function Mo(){let o=US().activeElement;for(;o!=null&&o.shadowRoot;)o=o.shadowRoot.activeElement;return o}function YF(o){return Mo()===o}function yce(o){return Ks(Mo(),o)}function US(){return WDe()<=1?Vi.document:Array.from(mce()).map(({window:e})=>e.document).find(e=>e.hasFocus())??Vi.document}function Mx(){var e;return((e=US().defaultView)==null?void 0:e.window)??Vi}const $q=new Map;function wce(){return new YDe}class YDe{constructor(){this._currentCssStyle="",this._styleSheet=void 0}setStyle(e){e!==this._currentCssStyle&&(this._currentCssStyle=e,this._styleSheet?this._styleSheet.innerText=e:this._styleSheet=$l(Vi.document.head,t=>t.innerText=e))}dispose(){this._styleSheet&&(this._styleSheet.remove(),this._styleSheet=void 0)}}function $l(o=Vi.document.head,e,t){const i=document.createElement("style");if(i.type="text/css",i.media="screen",e==null||e(i),o.appendChild(i),t&&t.add(it(()=>i.remove())),o===Vi.document.head){const n=new Set;$q.set(i,n);for(const{window:s,disposables:r}of mce()){if(s===Vi)continue;const a=r.add(ZDe(i,n,s));t==null||t.add(a)}}return i}function ZDe(o,e,t){var s,r;const i=new le,n=o.cloneNode(!0);t.document.head.appendChild(n),i.add(it(()=>n.remove()));for(const a of Lce(o))(r=n.sheet)==null||r.insertRule(a.cssText,(s=n.sheet)==null?void 0:s.cssRules.length);return i.add(XDe.observe(o,i,{childList:!0})(()=>{n.textContent=o.textContent})),e.add(n),i.add(it(()=>e.delete(n))),i}const XDe=new class{constructor(){this.mutationObservers=new Map}observe(o,e,t){let i=this.mutationObservers.get(o);i||(i=new Map,this.mutationObservers.set(o,i));const n=jF(t);let s=i.get(n);if(s)s.users+=1;else{const r=new Y,a=new MutationObserver(c=>r.fire(c));a.observe(o,t);const l=s={users:1,observer:a,onDidMutate:r.event};e.add(it(()=>{l.users-=1,l.users===0&&(r.dispose(),a.disconnect(),i==null||i.delete(n),(i==null?void 0:i.size)===0&&this.mutationObservers.delete(o))})),i.set(n,s)}return s.onDidMutate}};let KH=null;function Sce(){return KH||(KH=$l()),KH}function Lce(o){var e,t;return(e=o==null?void 0:o.sheet)!=null&&e.rules?o.sheet.rules:(t=o==null?void 0:o.sheet)!=null&&t.cssRules?o.sheet.cssRules:[]}function yA(o,e,t=Sce()){var i;if(!(!t||!e)){(i=t.sheet)==null||i.insertRule(`${o} {${e}}`,0);for(const n of $q.get(t)??[])yA(o,e,n)}}function dV(o,e=Sce()){var n;if(!e)return;const t=Lce(e),i=[];for(let s=0;s<t.length;s++){const r=t[s];QDe(r)&&r.selectorText.indexOf(o)!==-1&&i.push(s)}for(let s=i.length-1;s>=0;s--)(n=e.sheet)==null||n.deleteRule(i[s]);for(const s of $q.get(e)??[])dV(o,s)}function QDe(o){return typeof o.selectorText=="string"}function Ys(o){return o instanceof HTMLElement||o instanceof at(o).HTMLElement}function Xte(o){return o instanceof HTMLAnchorElement||o instanceof at(o).HTMLAnchorElement}function JDe(o){return o instanceof SVGElement||o instanceof at(o).SVGElement}function jq(o){return o instanceof MouseEvent||o instanceof at(o).MouseEvent}function Hf(o){return o instanceof KeyboardEvent||o instanceof at(o).KeyboardEvent}const Le={CLICK:"click",AUXCLICK:"auxclick",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",POINTER_LEAVE:"pointerleave",CONTEXT_MENU:"contextmenu",WHEEL:"wheel",KEY_DOWN:"keydown",KEY_PRESS:"keypress",KEY_UP:"keyup",LOAD:"load",BEFORE_UNLOAD:"beforeunload",UNLOAD:"unload",PAGE_SHOW:"pageshow",PAGE_HIDE:"pagehide",PASTE:"paste",ABORT:"abort",ERROR:"error",RESIZE:"resize",SCROLL:"scroll",FULLSCREEN_CHANGE:"fullscreenchange",WK_FULLSCREEN_CHANGE:"webkitfullscreenchange",SELECT:"select",CHANGE:"change",SUBMIT:"submit",RESET:"reset",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",BLUR:"blur",INPUT:"input",STORAGE:"storage",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend",ANIMATION_START:Gv?"webkitAnimationStart":"animationstart",ANIMATION_END:Gv?"webkitAnimationEnd":"animationend",ANIMATION_ITERATION:Gv?"webkitAnimationIteration":"animationiteration"};function eEe(o){const e=o;return!!(e&&typeof e.preventDefault=="function"&&typeof e.stopPropagation=="function")}const Jt={stop:(o,e)=>(o.preventDefault(),e&&o.stopPropagation(),o)};function tEe(o){const e=[];for(let t=0;o&&o.nodeType===o.ELEMENT_NODE;t++)e[t]=o.scrollTop,o=o.parentNode;return e}function iEe(o,e){for(let t=0;o&&o.nodeType===o.ELEMENT_NODE;t++)o.scrollTop!==e[t]&&(o.scrollTop=e[t]),o=o.parentNode}class wA extends X{static hasFocusWithin(e){if(Ys(e)){const t=aC(e),i=t?t.activeElement:e.ownerDocument.activeElement;return Ks(i,e)}else{const t=e;return Ks(t.document.activeElement,t.document)}}constructor(e){super(),this._onDidFocus=this._register(new Y),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new Y),this.onDidBlur=this._onDidBlur.event;let t=wA.hasFocusWithin(e),i=!1;const n=()=>{i=!1,t||(t=!0,this._onDidFocus.fire())},s=()=>{t&&(i=!0,(Ys(e)?at(e):e).setTimeout(()=>{i&&(i=!1,t=!1,this._onDidBlur.fire())},0))};this._refreshStateHandler=()=>{wA.hasFocusWithin(e)!==t&&(t?s():n())},this._register(se(e,Le.FOCUS,n,!0)),this._register(se(e,Le.BLUR,s,!0)),Ys(e)&&(this._register(se(e,Le.FOCUS_IN,()=>this._refreshStateHandler())),this._register(se(e,Le.FOCUS_OUT,()=>this._refreshStateHandler())))}}function pu(o){return new wA(o)}function nEe(o,e){return o.after(e),e}function ge(o,...e){if(o.append(...e),e.length===1&&typeof e[0]!="string")return e[0]}function qq(o,e){return o.insertBefore(e,o.firstChild),e}function Co(o,...e){o.innerText="",ge(o,...e)}const sEe=/([\w\-]+)?(#([\w\-]+))?((\.([\w\-]+))*)/;var mD;(function(o){o.HTML="http://www.w3.org/1999/xhtml",o.SVG="http://www.w3.org/2000/svg"})(mD||(mD={}));function xce(o,e,t,...i){const n=sEe.exec(e);if(!n)throw new Error("Bad use of emmet");const s=n[1]||"div";let r;return o!==mD.HTML?r=document.createElementNS(o,s):r=document.createElement(s),n[3]&&(r.id=n[3]),n[4]&&(r.className=n[4].replace(/\./g," ").trim()),t&&Object.entries(t).forEach(([a,l])=>{typeof l>"u"||(/^on\w+$/.test(a)?r[a]=l:a==="selected"?l&&r.setAttribute(a,"true"):r.setAttribute(a,l))}),r.append(...i),r}function xe(o,e,...t){return xce(mD.HTML,o,e,...t)}xe.SVG=function(o,e,...t){return xce(mD.SVG,o,e,...t)};function oEe(o,...e){o?Za(...e):Hr(...e)}function Za(...o){for(const e of o)e.style.display="",e.removeAttribute("aria-hidden")}function Hr(...o){for(const e of o)e.style.display="none",e.setAttribute("aria-hidden","true")}function Qte(o,e){const t=o.devicePixelRatio*e;return Math.max(1,Math.floor(t))/o.devicePixelRatio}function kce(o){Vi.open(o,"_blank","noopener")}function rEe(o,e){const t=()=>{e(),i=al(o,t)};let i=al(o,t);return it(()=>i.dispose())}pce.setPreferredWebSchema(/^https:/.test(Vi.location.href)?"https":"http");function Lg(o){return o?`url('${$F.uriToBrowserUri(o).toString(!0).replace(/'/g,"%27")}')`:"url('')"}function GH(o){return`'${o.replace(/'/g,"%27")}'`}function fg(o,e){if(o!==void 0){const t=o.match(/^\s*var\((.+)\)$/);if(t){const i=t[1].split(",",2);return i.length===2&&(e=fg(i[1].trim(),e)),`var(${i[0]}, ${e})`}return o}return e}function aEe(o,e=!1){const t=document.createElement("a");return fce("afterSanitizeAttributes",i=>{for(const n of["href","src"])if(i.hasAttribute(n)){const s=i.getAttribute(n);if(n==="href"&&s.startsWith("#"))continue;if(t.href=s,!o.includes(t.protocol.replace(/:$/,""))){if(e&&n==="src"&&t.href.startsWith("data:"))continue;i.removeAttribute(n)}}}),it(()=>{gce("afterSanitizeAttributes")})}const lEe=Object.freeze(["a","abbr","b","bdo","blockquote","br","caption","cite","code","col","colgroup","dd","del","details","dfn","div","dl","dt","em","figcaption","figure","h1","h2","h3","h4","h5","h6","hr","i","img","input","ins","kbd","label","li","mark","ol","p","pre","q","rp","rt","ruby","samp","small","small","source","span","strike","strong","sub","summary","sup","table","tbody","td","tfoot","th","thead","time","tr","tt","u","ul","var","video","wbr"]);class eg extends Y{constructor(){super(),this._subscriptions=new le,this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1},this._subscriptions.add(Ee.runAndSubscribe(KF,({window:e,disposables:t})=>this.registerListeners(e,t),{window:Vi,disposables:this._subscriptions}))}registerListeners(e,t){t.add(se(e,"keydown",i=>{if(i.defaultPrevented)return;const n=new Zi(i);if(!(n.keyCode===6&&i.repeat)){if(i.altKey&&!this._keyStatus.altKey)this._keyStatus.lastKeyPressed="alt";else if(i.ctrlKey&&!this._keyStatus.ctrlKey)this._keyStatus.lastKeyPressed="ctrl";else if(i.metaKey&&!this._keyStatus.metaKey)this._keyStatus.lastKeyPressed="meta";else if(i.shiftKey&&!this._keyStatus.shiftKey)this._keyStatus.lastKeyPressed="shift";else if(n.keyCode!==6)this._keyStatus.lastKeyPressed=void 0;else return;this._keyStatus.altKey=i.altKey,this._keyStatus.ctrlKey=i.ctrlKey,this._keyStatus.metaKey=i.metaKey,this._keyStatus.shiftKey=i.shiftKey,this._keyStatus.lastKeyPressed&&(this._keyStatus.event=i,this.fire(this._keyStatus))}},!0)),t.add(se(e,"keyup",i=>{i.defaultPrevented||(!i.altKey&&this._keyStatus.altKey?this._keyStatus.lastKeyReleased="alt":!i.ctrlKey&&this._keyStatus.ctrlKey?this._keyStatus.lastKeyReleased="ctrl":!i.metaKey&&this._keyStatus.metaKey?this._keyStatus.lastKeyReleased="meta":!i.shiftKey&&this._keyStatus.shiftKey?this._keyStatus.lastKeyReleased="shift":this._keyStatus.lastKeyReleased=void 0,this._keyStatus.lastKeyPressed!==this._keyStatus.lastKeyReleased&&(this._keyStatus.lastKeyPressed=void 0),this._keyStatus.altKey=i.altKey,this._keyStatus.ctrlKey=i.ctrlKey,this._keyStatus.metaKey=i.metaKey,this._keyStatus.shiftKey=i.shiftKey,this._keyStatus.lastKeyReleased&&(this._keyStatus.event=i,this.fire(this._keyStatus)))},!0)),t.add(se(e.document.body,"mousedown",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),t.add(se(e.document.body,"mouseup",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),t.add(se(e.document.body,"mousemove",i=>{i.buttons&&(this._keyStatus.lastKeyPressed=void 0)},!0)),t.add(se(e,"blur",()=>{this.resetKeyStatus()}))}get keyStatus(){return this._keyStatus}resetKeyStatus(){this.doResetKeyStatus(),this.fire(this._keyStatus)}doResetKeyStatus(){this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1}}static getInstance(){return eg.instance||(eg.instance=new eg),eg.instance}dispose(){super.dispose(),this._subscriptions.dispose()}}class cEe extends X{constructor(e,t){super(),this.element=e,this.callbacks=t,this.counter=0,this.dragStartTime=0,this.registerListeners()}registerListeners(){this.callbacks.onDragStart&&this._register(se(this.element,Le.DRAG_START,e=>{var t,i;(i=(t=this.callbacks).onDragStart)==null||i.call(t,e)})),this.callbacks.onDrag&&this._register(se(this.element,Le.DRAG,e=>{var t,i;(i=(t=this.callbacks).onDrag)==null||i.call(t,e)})),this._register(se(this.element,Le.DRAG_ENTER,e=>{var t,i;this.counter++,this.dragStartTime=e.timeStamp,(i=(t=this.callbacks).onDragEnter)==null||i.call(t,e)})),this._register(se(this.element,Le.DRAG_OVER,e=>{var t,i;e.preventDefault(),(i=(t=this.callbacks).onDragOver)==null||i.call(t,e,e.timeStamp-this.dragStartTime)})),this._register(se(this.element,Le.DRAG_LEAVE,e=>{var t,i;this.counter--,this.counter===0&&(this.dragStartTime=0,(i=(t=this.callbacks).onDragLeave)==null||i.call(t,e))})),this._register(se(this.element,Le.DRAG_END,e=>{var t,i;this.counter=0,this.dragStartTime=0,(i=(t=this.callbacks).onDragEnd)==null||i.call(t,e)})),this._register(se(this.element,Le.DROP,e=>{var t,i;this.counter=0,this.dragStartTime=0,(i=(t=this.callbacks).onDrop)==null||i.call(t,e)}))}}const Dce=/(?<tag>[\w\-]+)?(?:#(?<id>[\w\-]+))?(?<class>(?:\.(?:[\w\-]+))*)(?:@(?<name>(?:[\w\_])+))?/;function jt(o,...e){let t,i;Array.isArray(e[0])?(t={},i=e[0]):(t=e[0]||{},i=e[1]);const n=Dce.exec(o);if(!n||!n.groups)throw new Error("Bad use of h");const s=n.groups.tag||"div",r=document.createElement(s);n.groups.id&&(r.id=n.groups.id);const a=[];if(n.groups.class)for(const c of n.groups.class.split("."))c!==""&&a.push(c);if(t.className!==void 0)for(const c of t.className.split("."))c!==""&&a.push(c);a.length>0&&(r.className=a.join(" "));const l={};if(n.groups.name&&(l[n.groups.name]=r),i)for(const c of i)Ys(c)?r.appendChild(c):typeof c=="string"?r.append(c):"root"in c&&(Object.assign(l,c),r.appendChild(c.root));for(const[c,u]of Object.entries(t))if(c!=="className")if(c==="style")for(const[f,g]of Object.entries(u))r.style.setProperty(SA(f),typeof g=="number"?g+"px":""+g);else c==="tabIndex"?r.tabIndex=u:r.setAttribute(SA(c),u.toString());return l.root=r,l}function Zy(o,...e){let t,i;Array.isArray(e[0])?(t={},i=e[0]):(t=e[0]||{},i=e[1]);const n=Dce.exec(o);if(!n||!n.groups)throw new Error("Bad use of h");const s=n.groups.tag||"div",r=document.createElementNS("http://www.w3.org/2000/svg",s);n.groups.id&&(r.id=n.groups.id);const a=[];if(n.groups.class)for(const c of n.groups.class.split("."))c!==""&&a.push(c);if(t.className!==void 0)for(const c of t.className.split("."))c!==""&&a.push(c);a.length>0&&(r.className=a.join(" "));const l={};if(n.groups.name&&(l[n.groups.name]=r),i)for(const c of i)Ys(c)?r.appendChild(c):typeof c=="string"?r.append(c):"root"in c&&(Object.assign(l,c),r.appendChild(c.root));for(const[c,u]of Object.entries(t))if(c!=="className")if(c==="style")for(const[f,g]of Object.entries(u))r.style.setProperty(SA(f),typeof g=="number"?g+"px":""+g);else c==="tabIndex"?r.tabIndex=u:r.setAttribute(SA(c),u.toString());return l.root=r,l}function SA(o){return o.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}class dEe extends X{constructor(e){super(),this._onDidChange=this._register(new Y),this.onDidChange=this._onDidChange.event,this._listener=()=>this._handleChange(e,!0),this._mediaQueryList=null,this._handleChange(e,!1)}_handleChange(e,t){var i;(i=this._mediaQueryList)==null||i.removeEventListener("change",this._listener),this._mediaQueryList=e.matchMedia(`(resolution: ${e.devicePixelRatio}dppx)`),this._mediaQueryList.addEventListener("change",this._listener),t&&this._onDidChange.fire()}}class uEe extends X{get value(){return this._value}constructor(e){super(),this._onDidChange=this._register(new Y),this.onDidChange=this._onDidChange.event,this._value=this._getPixelRatio(e);const t=this._register(new dEe(e));this._register(t.onDidChange(()=>{this._value=this._getPixelRatio(e),this._onDidChange.fire(this._value)}))}_getPixelRatio(e){const t=document.createElement("canvas").getContext("2d"),i=e.devicePixelRatio||1,n=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return i/n}}class hEe{constructor(){this.mapWindowIdToPixelRatioMonitor=new Map}_getOrCreatePixelRatioMonitor(e){const t=vA(e);let i=this.mapWindowIdToPixelRatioMonitor.get(t);return i||(i=new uEe(e),this.mapWindowIdToPixelRatioMonitor.set(t,i),Ee.once(VDe)(({vscodeWindowId:n})=>{n===t&&(i==null||i.dispose(),this.mapWindowIdToPixelRatioMonitor.delete(t))})),i}getInstance(e){return this._getOrCreatePixelRatioMonitor(e)}}const _D=new hEe;class Ece{constructor(e){this.domNode=e,this._maxWidth="",this._width="",this._height="",this._top="",this._left="",this._bottom="",this._right="",this._paddingLeft="",this._fontFamily="",this._fontWeight="",this._fontSize="",this._fontStyle="",this._fontFeatureSettings="",this._fontVariationSettings="",this._textDecoration="",this._lineHeight="",this._letterSpacing="",this._className="",this._display="",this._position="",this._visibility="",this._color="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}setMaxWidth(e){const t=Rd(e);this._maxWidth!==t&&(this._maxWidth=t,this.domNode.style.maxWidth=this._maxWidth)}setWidth(e){const t=Rd(e);this._width!==t&&(this._width=t,this.domNode.style.width=this._width)}setHeight(e){const t=Rd(e);this._height!==t&&(this._height=t,this.domNode.style.height=this._height)}setTop(e){const t=Rd(e);this._top!==t&&(this._top=t,this.domNode.style.top=this._top)}setLeft(e){const t=Rd(e);this._left!==t&&(this._left=t,this.domNode.style.left=this._left)}setBottom(e){const t=Rd(e);this._bottom!==t&&(this._bottom=t,this.domNode.style.bottom=this._bottom)}setRight(e){const t=Rd(e);this._right!==t&&(this._right=t,this.domNode.style.right=this._right)}setPaddingLeft(e){const t=Rd(e);this._paddingLeft!==t&&(this._paddingLeft=t,this.domNode.style.paddingLeft=this._paddingLeft)}setFontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(e){const t=Rd(e);this._fontSize!==t&&(this._fontSize=t,this.domNode.style.fontSize=this._fontSize)}setFontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.domNode.style.fontStyle=this._fontStyle)}setFontFeatureSettings(e){this._fontFeatureSettings!==e&&(this._fontFeatureSettings=e,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setFontVariationSettings(e){this._fontVariationSettings!==e&&(this._fontVariationSettings=e,this.domNode.style.fontVariationSettings=this._fontVariationSettings)}setTextDecoration(e){this._textDecoration!==e&&(this._textDecoration=e,this.domNode.style.textDecoration=this._textDecoration)}setLineHeight(e){const t=Rd(e);this._lineHeight!==t&&(this._lineHeight=t,this.domNode.style.lineHeight=this._lineHeight)}setLetterSpacing(e){const t=Rd(e);this._letterSpacing!==t&&(this._letterSpacing=t,this.domNode.style.letterSpacing=this._letterSpacing)}setClassName(e){this._className!==e&&(this._className=e,this.domNode.className=this._className)}toggleClassName(e,t){this.domNode.classList.toggle(e,t),this._className=this.domNode.className}setDisplay(e){this._display!==e&&(this._display=e,this.domNode.style.display=this._display)}setPosition(e){this._position!==e&&(this._position=e,this.domNode.style.position=this._position)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this.domNode.style.visibility=this._visibility)}setColor(e){this._color!==e&&(this._color=e,this.domNode.style.color=this._color)}setBackgroundColor(e){this._backgroundColor!==e&&(this._backgroundColor=e,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(e){this._layerHint!==e&&(this._layerHint=e,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(e){this._boxShadow!==e&&(this._boxShadow=e,this.domNode.style.boxShadow=e)}setContain(e){this._contain!==e&&(this._contain=e,this.domNode.style.contain=this._contain)}setAttribute(e,t){this.domNode.setAttribute(e,t)}removeAttribute(e){this.domNode.removeAttribute(e)}appendChild(e){this.domNode.appendChild(e.domNode)}removeChild(e){this.domNode.removeChild(e.domNode)}}function Rd(o){return typeof o=="number"?`${o}px`:o}function ki(o){return new Ece(o)}function yo(o,e){o instanceof Ece?(o.setFontFamily(e.getMassagedFontFamily()),o.setFontWeight(e.fontWeight),o.setFontSize(e.fontSize),o.setFontFeatureSettings(e.fontFeatureSettings),o.setFontVariationSettings(e.fontVariationSettings),o.setLineHeight(e.lineHeight),o.setLetterSpacing(e.letterSpacing)):(o.style.fontFamily=e.getMassagedFontFamily(),o.style.fontWeight=e.fontWeight,o.style.fontSize=e.fontSize+"px",o.style.fontFeatureSettings=e.fontFeatureSettings,o.style.fontVariationSettings=e.fontVariationSettings,o.style.lineHeight=e.lineHeight+"px",o.style.letterSpacing=e.letterSpacing+"px")}class fEe{constructor(e,t){this.chr=e,this.type=t,this.width=0}fulfill(e){this.width=e}}class Kq{constructor(e,t){this._bareFontInfo=e,this._requests=t,this._container=null,this._testElements=null}read(e){var t;this._createDomElements(),e.document.body.appendChild(this._container),this._readFromDomElements(),(t=this._container)==null||t.remove(),this._container=null,this._testElements=null}_createDomElements(){const e=document.createElement("div");e.style.position="absolute",e.style.top="-50000px",e.style.width="50000px";const t=document.createElement("div");yo(t,this._bareFontInfo),e.appendChild(t);const i=document.createElement("div");yo(i,this._bareFontInfo),i.style.fontWeight="bold",e.appendChild(i);const n=document.createElement("div");yo(n,this._bareFontInfo),n.style.fontStyle="italic",e.appendChild(n);const s=[];for(const r of this._requests){let a;r.type===0&&(a=t),r.type===2&&(a=i),r.type===1&&(a=n),a.appendChild(document.createElement("br"));const l=document.createElement("span");Kq._render(l,r),a.appendChild(l),s.push(l)}this._container=e,this._testElements=s}static _render(e,t){if(t.chr===" "){let i="";for(let n=0;n<8;n++)i+=i;e.innerText=i}else{let i=t.chr;for(let n=0;n<8;n++)i+=i;e.textContent=i}}_readFromDomElements(){for(let e=0,t=this._requests.length;e<t;e++){const i=this._requests[e],n=this._testElements[e];i.fulfill(n.offsetWidth/256)}}}function gEe(o,e,t){new Kq(e,t).read(o)}const mc=new class{constructor(){this._zoomLevel=0,this._onDidChangeZoomLevel=new Y,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event}getZoomLevel(){return this._zoomLevel}setZoomLevel(o){o=Math.min(Math.max(-5,o),20),this._zoomLevel!==o&&(this._zoomLevel=o,this._onDidChangeZoomLevel.fire(this._zoomLevel))}},pEe=Kt?1.5:1.35,YH=8;class Yv{static createFromValidatedSettings(e,t,i){const n=e.get(49),s=e.get(53),r=e.get(52),a=e.get(51),l=e.get(54),c=e.get(67),u=e.get(64);return Yv._create(n,s,r,a,l,c,u,t,i)}static _create(e,t,i,n,s,r,a,l,c){r===0?r=pEe*i:r<YH&&(r=r*i),r=Math.round(r),r<YH&&(r=YH);const u=1+(c?0:mc.getZoomLevel()*.1);return i*=u,r*=u,s===cD.TRANSLATE&&(t==="normal"||t==="bold"?s=cD.OFF:(s=`'wght' ${parseInt(t,10)}`,t="normal")),new Yv({pixelRatio:l,fontFamily:e,fontWeight:t,fontSize:i,fontFeatureSettings:n,fontVariationSettings:s,lineHeight:r,letterSpacing:a})}constructor(e){this._bareFontInfoBrand=void 0,this.pixelRatio=e.pixelRatio,this.fontFamily=String(e.fontFamily),this.fontWeight=String(e.fontWeight),this.fontSize=e.fontSize,this.fontFeatureSettings=e.fontFeatureSettings,this.fontVariationSettings=e.fontVariationSettings,this.lineHeight=e.lineHeight|0,this.letterSpacing=e.letterSpacing}getId(){return`${this.pixelRatio}-${this.fontFamily}-${this.fontWeight}-${this.fontSize}-${this.fontFeatureSettings}-${this.fontVariationSettings}-${this.lineHeight}-${this.letterSpacing}`}getMassagedFontFamily(){const e=Zr.fontFamily,t=Yv._wrapInQuotes(this.fontFamily);return e&&this.fontFamily!==e?`${t}, ${e}`:t}static _wrapInQuotes(e){return/[,"']/.test(e)?e:/[+ ]/.test(e)?`"${e}"`:e}}const mEe=2;class uV extends Yv{constructor(e,t){super(e),this._editorStylingBrand=void 0,this.version=mEe,this.isTrusted=t,this.isMonospace=e.isMonospace,this.typicalHalfwidthCharacterWidth=e.typicalHalfwidthCharacterWidth,this.typicalFullwidthCharacterWidth=e.typicalFullwidthCharacterWidth,this.canUseHalfwidthRightwardsArrow=e.canUseHalfwidthRightwardsArrow,this.spaceWidth=e.spaceWidth,this.middotWidth=e.middotWidth,this.wsmiddotWidth=e.wsmiddotWidth,this.maxDigitWidth=e.maxDigitWidth}equals(e){return this.fontFamily===e.fontFamily&&this.fontWeight===e.fontWeight&&this.fontSize===e.fontSize&&this.fontFeatureSettings===e.fontFeatureSettings&&this.fontVariationSettings===e.fontVariationSettings&&this.lineHeight===e.lineHeight&&this.letterSpacing===e.letterSpacing&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.typicalFullwidthCharacterWidth===e.typicalFullwidthCharacterWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.maxDigitWidth===e.maxDigitWidth}}class _Ee extends X{constructor(){super(...arguments),this._cache=new Map,this._evictUntrustedReadingsTimeout=-1,this._onDidChange=this._register(new Y),this.onDidChange=this._onDidChange.event}dispose(){this._evictUntrustedReadingsTimeout!==-1&&(clearTimeout(this._evictUntrustedReadingsTimeout),this._evictUntrustedReadingsTimeout=-1),super.dispose()}clearAllFontInfos(){this._cache.clear(),this._onDidChange.fire()}_ensureCache(e){const t=vA(e);let i=this._cache.get(t);return i||(i=new vEe,this._cache.set(t,i)),i}_writeToCache(e,t,i){this._ensureCache(e).put(t,i),!i.isTrusted&&this._evictUntrustedReadingsTimeout===-1&&(this._evictUntrustedReadingsTimeout=e.setTimeout(()=>{this._evictUntrustedReadingsTimeout=-1,this._evictUntrustedReadings(e)},5e3))}_evictUntrustedReadings(e){const t=this._ensureCache(e),i=t.getValues();let n=!1;for(const s of i)s.isTrusted||(n=!0,t.remove(s));n&&this._onDidChange.fire()}readFontInfo(e,t){const i=this._ensureCache(e);if(!i.has(t)){let n=this._actualReadFontInfo(e,t);(n.typicalHalfwidthCharacterWidth<=2||n.typicalFullwidthCharacterWidth<=2||n.spaceWidth<=2||n.maxDigitWidth<=2)&&(n=new uV({pixelRatio:_D.getInstance(e).value,fontFamily:n.fontFamily,fontWeight:n.fontWeight,fontSize:n.fontSize,fontFeatureSettings:n.fontFeatureSettings,fontVariationSettings:n.fontVariationSettings,lineHeight:n.lineHeight,letterSpacing:n.letterSpacing,isMonospace:n.isMonospace,typicalHalfwidthCharacterWidth:Math.max(n.typicalHalfwidthCharacterWidth,5),typicalFullwidthCharacterWidth:Math.max(n.typicalFullwidthCharacterWidth,5),canUseHalfwidthRightwardsArrow:n.canUseHalfwidthRightwardsArrow,spaceWidth:Math.max(n.spaceWidth,5),middotWidth:Math.max(n.middotWidth,5),wsmiddotWidth:Math.max(n.wsmiddotWidth,5),maxDigitWidth:Math.max(n.maxDigitWidth,5)},!1)),this._writeToCache(e,t,n)}return i.get(t)}_createRequest(e,t,i,n){const s=new fEe(e,t);return i.push(s),n==null||n.push(s),s}_actualReadFontInfo(e,t){const i=[],n=[],s=this._createRequest("n",0,i,n),r=this._createRequest("",0,i,null),a=this._createRequest(" ",0,i,n),l=this._createRequest("0",0,i,n),c=this._createRequest("1",0,i,n),u=this._createRequest("2",0,i,n),f=this._createRequest("3",0,i,n),g=this._createRequest("4",0,i,n),p=this._createRequest("5",0,i,n),_=this._createRequest("6",0,i,n),b=this._createRequest("7",0,i,n),y=this._createRequest("8",0,i,n),S=this._createRequest("9",0,i,n),L=this._createRequest("",0,i,n),x=this._createRequest("",0,i,null),k=this._createRequest("",0,i,n),E=this._createRequest("",0,i,null),N="|/-_ilm%";for(let Q=0,te=N.length;Q<te;Q++)this._createRequest(N.charAt(Q),0,i,n),this._createRequest(N.charAt(Q),1,i,n),this._createRequest(N.charAt(Q),2,i,n);gEe(e,t,i);const A=Math.max(l.width,c.width,u.width,f.width,g.width,p.width,_.width,b.width,y.width,S.width);let P=t.fontFeatureSettings===Mm.OFF;const H=n[0].width;for(let Q=1,te=n.length;P&&Q<te;Q++){const J=H-n[Q].width;if(J<-.001||J>.001){P=!1;break}}let ee=!0;return P&&x.width!==H&&(ee=!1),x.width>L.width&&(ee=!1),new uV({pixelRatio:_D.getInstance(e).value,fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontSize:t.fontSize,fontFeatureSettings:t.fontFeatureSettings,fontVariationSettings:t.fontVariationSettings,lineHeight:t.lineHeight,letterSpacing:t.letterSpacing,isMonospace:P,typicalHalfwidthCharacterWidth:s.width,typicalFullwidthCharacterWidth:r.width,canUseHalfwidthRightwardsArrow:ee,spaceWidth:a.width,middotWidth:k.width,wsmiddotWidth:E.width,maxDigitWidth:A},!0)}}class vEe{constructor(){this._keys=Object.create(null),this._values=Object.create(null)}has(e){const t=e.getId();return!!this._values[t]}get(e){const t=e.getId();return this._values[t]}put(e,t){const i=e.getId();this._keys[i]=e,this._values[i]=t}remove(e){const t=e.getId();delete this._keys[t],delete this._values[t]}getValues(){return Object.keys(this._keys).map(e=>this._values[e])}}const hV=new _Ee;var tu;(function(o){o.serviceIds=new Map,o.DI_TARGET="$di$target",o.DI_DEPENDENCIES="$di$dependencies";function e(t){return t[o.DI_DEPENDENCIES]||[]}o.getServiceDependencies=e})(tu||(tu={}));const nt=Gt("instantiationService");function bEe(o,e,t){e[tu.DI_TARGET]===e?e[tu.DI_DEPENDENCIES].push({id:o,index:t}):(e[tu.DI_DEPENDENCIES]=[{id:o,index:t}],e[tu.DI_TARGET]=e)}function Gt(o){if(tu.serviceIds.has(o))return tu.serviceIds.get(o);const e=function(t,i,n){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");bEe(e,t,n)};return e.toString=()=>o,tu.serviceIds.set(o,e),e}const hi=Gt("codeEditorService"),un=Gt("modelService"),Na=Gt("textModelService");class tl extends X{constructor(e,t="",i="",n=!0,s){super(),this._onDidChange=this._register(new Y),this.onDidChange=this._onDidChange.event,this._enabled=!0,this._id=e,this._label=t,this._cssClass=i,this._enabled=n,this._actionCallback=s}get id(){return this._id}get label(){return this._label}set label(e){this._setLabel(e)}_setLabel(e){this._label!==e&&(this._label=e,this._onDidChange.fire({label:e}))}get tooltip(){return this._tooltip||""}set tooltip(e){this._setTooltip(e)}_setTooltip(e){this._tooltip!==e&&(this._tooltip=e,this._onDidChange.fire({tooltip:e}))}get class(){return this._cssClass}set class(e){this._setClass(e)}_setClass(e){this._cssClass!==e&&(this._cssClass=e,this._onDidChange.fire({class:e}))}get enabled(){return this._enabled}set enabled(e){this._setEnabled(e)}_setEnabled(e){this._enabled!==e&&(this._enabled=e,this._onDidChange.fire({enabled:e}))}get checked(){return this._checked}set checked(e){this._setChecked(e)}_setChecked(e){this._checked!==e&&(this._checked=e,this._onDidChange.fire({checked:e}))}async run(e,t){this._actionCallback&&await this._actionCallback(e)}}class lC extends X{constructor(){super(...arguments),this._onWillRun=this._register(new Y),this.onWillRun=this._onWillRun.event,this._onDidRun=this._register(new Y),this.onDidRun=this._onDidRun.event}async run(e,t){if(!e.enabled)return;this._onWillRun.fire({action:e});let i;try{await this.runAction(e,t)}catch(n){i=n}this._onDidRun.fire({action:e,error:i})}async runAction(e,t){await e.run(t)}}const zk=class zk{constructor(){this.id=zk.ID,this.label="",this.tooltip="",this.class="separator",this.enabled=!1,this.checked=!1}static join(...e){let t=[];for(const i of e)i.length&&(t.length?t=[...t,new zk,...i]:t=i);return t}async run(){}};zk.ID="vs.actions.separator";let Zs=zk;class tS{get actions(){return this._actions}constructor(e,t,i,n){this.tooltip="",this.enabled=!0,this.checked=void 0,this.id=e,this.label=t,this.class=n,this._actions=i}async run(){}}const a2=class a2 extends tl{constructor(){super(a2.ID,v("submenu.empty","(empty)"),void 0,!1)}};a2.ID="vs.actions.empty";let fV=a2;function Zv(o){return{id:o.id,label:o.label,tooltip:o.tooltip??o.label,class:o.class,enabled:o.enabled??!0,checked:o.checked,run:async(...e)=>o.run(...e)}}var gV;(function(o){function e(t){return t&&typeof t=="object"&&typeof t.id=="string"}o.isThemeColor=e})(gV||(gV={}));var ut;(function(o){o.iconNameSegment="[A-Za-z0-9]+",o.iconNameExpression="[A-Za-z0-9-]+",o.iconModifierExpression="~[A-Za-z]+",o.iconNameCharacter="[A-Za-z0-9~-]";const e=new RegExp(`^(${o.iconNameExpression})(${o.iconModifierExpression})?$`);function t(g){const p=e.exec(g.id);if(!p)return t(Se.error);const[,_,b]=p,y=["codicon","codicon-"+_];return b&&y.push("codicon-modifier-"+b.substring(1)),y}o.asClassNameArray=t;function i(g){return t(g).join(" ")}o.asClassName=i;function n(g){return"."+t(g).join(".")}o.asCSSSelector=n;function s(g){return g&&typeof g=="object"&&typeof g.id=="string"&&(typeof g.color>"u"||gV.isThemeColor(g.color))}o.isThemeIcon=s;const r=new RegExp(`^\\$\\((${o.iconNameExpression}(?:${o.iconModifierExpression})?)\\)$`);function a(g){const p=r.exec(g);if(!p)return;const[,_]=p;return{id:_}}o.fromString=a;function l(g){return{id:g}}o.fromId=l;function c(g,p){let _=g.id;const b=_.lastIndexOf("~");return b!==-1&&(_=_.substring(0,b)),p&&(_=`${_}~${p}`),{id:_}}o.modify=c;function u(g){const p=g.id.lastIndexOf("~");if(p!==-1)return g.id.substring(p+1)}o.getModifier=u;function f(g,p){var _,b;return g.id===p.id&&((_=g.color)==null?void 0:_.id)===((b=p.color)==null?void 0:b.id)}o.isEqual=f})(ut||(ut={}));const nn=Gt("commandService"),ii=new class{constructor(){this._commands=new Map,this._onDidRegisterCommand=new Y,this.onDidRegisterCommand=this._onDidRegisterCommand.event}registerCommand(o,e){if(!o)throw new Error("invalid command");if(typeof o=="string"){if(!e)throw new Error("invalid command");return this.registerCommand({id:o,handler:e})}if(o.metadata&&Array.isArray(o.metadata.args)){const r=[];for(const l of o.metadata.args)r.push(l.constraint);const a=o.handler;o.handler=function(l,...c){return TLe(c,r),a(l,...c)}}const{id:t}=o;let i=this._commands.get(t);i||(i=new jr,this._commands.set(t,i));const n=i.unshift(o),s=it(()=>{n();const r=this._commands.get(t);r!=null&&r.isEmpty()&&this._commands.delete(t)});return this._onDidRegisterCommand.fire(t),s}registerCommandAlias(o,e){return ii.registerCommand(o,(t,...i)=>t.get(nn).executeCommand(e,...i))}getCommand(o){const e=this._commands.get(o);if(!(!e||e.isEmpty()))return ti.first(e)}getCommands(){const o=new Map;for(const e of this._commands.keys()){const t=this.getCommand(e);t&&o.set(e,t)}return o}};ii.registerCommand("noop",()=>{});function ZH(...o){switch(o.length){case 1:return v("contextkey.scanner.hint.didYouMean1","Did you mean {0}?",o[0]);case 2:return v("contextkey.scanner.hint.didYouMean2","Did you mean {0} or {1}?",o[0],o[1]);case 3:return v("contextkey.scanner.hint.didYouMean3","Did you mean {0}, {1} or {2}?",o[0],o[1],o[2]);default:return}}const CEe=v("contextkey.scanner.hint.didYouForgetToOpenOrCloseQuote","Did you forget to open or close the quote?"),yEe=v("contextkey.scanner.hint.didYouForgetToEscapeSlash","Did you forget to escape the '/' (slash) character? Put two backslashes before it to escape, e.g., '\\\\/'.");var lg;let lx=(lg=class{constructor(){this._input="",this._start=0,this._current=0,this._tokens=[],this._errors=[],this.stringRe=/[a-zA-Z0-9_<>\-\./\\:\*\?\+\[\]\^,#@;"%\$\p{L}-]+/uy}static getLexeme(e){switch(e.type){case 0:return"(";case 1:return")";case 2:return"!";case 3:return e.isTripleEq?"===":"==";case 4:return e.isTripleEq?"!==":"!=";case 5:return"<";case 6:return"<=";case 7:return">=";case 8:return">=";case 9:return"=~";case 10:return e.lexeme;case 11:return"true";case 12:return"false";case 13:return"in";case 14:return"not";case 15:return"&&";case 16:return"||";case 17:return e.lexeme;case 18:return e.lexeme;case 19:return e.lexeme;case 20:return"EOF";default:throw kq(`unhandled token type: ${JSON.stringify(e)}; have you forgotten to add a case?`)}}reset(e){return this._input=e,this._start=0,this._current=0,this._tokens=[],this._errors=[],this}scan(){for(;!this._isAtEnd();)switch(this._start=this._current,this._advance()){case 40:this._addToken(0);break;case 41:this._addToken(1);break;case 33:if(this._match(61)){const t=this._match(61);this._tokens.push({type:4,offset:this._start,isTripleEq:t})}else this._addToken(2);break;case 39:this._quotedString();break;case 47:this._regex();break;case 61:if(this._match(61)){const t=this._match(61);this._tokens.push({type:3,offset:this._start,isTripleEq:t})}else this._match(126)?this._addToken(9):this._error(ZH("==","=~"));break;case 60:this._addToken(this._match(61)?6:5);break;case 62:this._addToken(this._match(61)?8:7);break;case 38:this._match(38)?this._addToken(15):this._error(ZH("&&"));break;case 124:this._match(124)?this._addToken(16):this._error(ZH("||"));break;case 32:case 13:case 9:case 10:case 160:break;default:this._string()}return this._start=this._current,this._addToken(20),Array.from(this._tokens)}_match(e){return this._isAtEnd()||this._input.charCodeAt(this._current)!==e?!1:(this._current++,!0)}_advance(){return this._input.charCodeAt(this._current++)}_peek(){return this._isAtEnd()?0:this._input.charCodeAt(this._current)}_addToken(e){this._tokens.push({type:e,offset:this._start})}_error(e){const t=this._start,i=this._input.substring(this._start,this._current),n={type:19,offset:this._start,lexeme:i};this._errors.push({offset:t,lexeme:i,additionalInfo:e}),this._tokens.push(n)}_string(){this.stringRe.lastIndex=this._start;const e=this.stringRe.exec(this._input);if(e){this._current=this._start+e[0].length;const t=this._input.substring(this._start,this._current),i=lg._keywords.get(t);i?this._addToken(i):this._tokens.push({type:17,lexeme:t,offset:this._start})}}_quotedString(){for(;this._peek()!==39&&!this._isAtEnd();)this._advance();if(this._isAtEnd()){this._error(CEe);return}this._advance(),this._tokens.push({type:18,lexeme:this._input.substring(this._start+1,this._current-1),offset:this._start+1})}_regex(){let e=this._current,t=!1,i=!1;for(;;){if(e>=this._input.length){this._current=e,this._error(yEe);return}const s=this._input.charCodeAt(e);if(t)t=!1;else if(s===47&&!i){e++;break}else s===91?i=!0:s===92?t=!0:s===93&&(i=!1);e++}for(;e<this._input.length&&lg._regexFlags.has(this._input.charCodeAt(e));)e++;this._current=e;const n=this._input.substring(this._start,this._current);this._tokens.push({type:10,lexeme:n,offset:this._start})}_isAtEnd(){return this._current>=this._input.length}},lg._regexFlags=new Set(["i","g","s","m","y","u"].map(e=>e.charCodeAt(0))),lg._keywords=new Map([["not",14],["in",13],["false",12],["true",11]]),lg);const Qo=new Map;Qo.set("false",!1);Qo.set("true",!0);Qo.set("isMac",Kt);Qo.set("isLinux",Qr);Qo.set("isWindows",Po);Qo.set("isWeb",NC);Qo.set("isMacNative",Kt&&!NC);Qo.set("isEdge",jLe);Qo.set("isFirefox",ULe);Qo.set("isChrome",Dle);Qo.set("isSafari",$Le);const wEe=Object.prototype.hasOwnProperty,SEe={regexParsingWithErrorRecovery:!0},LEe=v("contextkey.parser.error.emptyString","Empty context key expression"),xEe=v("contextkey.parser.error.emptyString.hint","Did you forget to write an expression? You can also put 'false' or 'true' to always evaluate to false or true, respectively."),kEe=v("contextkey.parser.error.noInAfterNot","'in' after 'not'."),Jte=v("contextkey.parser.error.closingParenthesis","closing parenthesis ')'"),DEe=v("contextkey.parser.error.unexpectedToken","Unexpected token"),EEe=v("contextkey.parser.error.unexpectedToken.hint","Did you forget to put && or || before the token?"),IEe=v("contextkey.parser.error.unexpectedEOF","Unexpected end of expression"),TEe=v("contextkey.parser.error.unexpectedEOF.hint","Did you forget to put a context key?");var wh;let NEe=(wh=class{constructor(e=SEe){this._config=e,this._scanner=new lx,this._tokens=[],this._current=0,this._parsingErrors=[],this._flagsGYRe=/g|y/g}parse(e){if(e===""){this._parsingErrors.push({message:LEe,offset:0,lexeme:"",additionalInfo:xEe});return}this._tokens=this._scanner.reset(e).scan(),this._current=0,this._parsingErrors=[];try{const t=this._expr();if(!this._isAtEnd()){const i=this._peek(),n=i.type===17?EEe:void 0;throw this._parsingErrors.push({message:DEe,offset:i.offset,lexeme:lx.getLexeme(i),additionalInfo:n}),wh._parseError}return t}catch(t){if(t!==wh._parseError)throw t;return}}_expr(){return this._or()}_or(){const e=[this._and()];for(;this._matchOne(16);){const t=this._and();e.push(t)}return e.length===1?e[0]:de.or(...e)}_and(){const e=[this._term()];for(;this._matchOne(15);){const t=this._term();e.push(t)}return e.length===1?e[0]:de.and(...e)}_term(){if(this._matchOne(2)){const e=this._peek();switch(e.type){case 11:return this._advance(),Jr.INSTANCE;case 12:return this._advance(),Da.INSTANCE;case 0:{this._advance();const t=this._expr();return this._consume(1,Jte),t==null?void 0:t.negate()}case 17:return this._advance(),MC.create(e.lexeme);default:throw this._errExpectedButGot("KEY | true | false | '(' expression ')'",e)}}return this._primary()}_primary(){const e=this._peek();switch(e.type){case 11:return this._advance(),de.true();case 12:return this._advance(),de.false();case 0:{this._advance();const t=this._expr();return this._consume(1,Jte),t}case 17:{const t=e.lexeme;if(this._advance(),this._matchOne(9)){const n=this._peek();if(!this._config.regexParsingWithErrorRecovery){if(this._advance(),n.type!==10)throw this._errExpectedButGot("REGEX",n);const s=n.lexeme,r=s.lastIndexOf("/"),a=r===s.length-1?void 0:this._removeFlagsGY(s.substring(r+1));let l;try{l=new RegExp(s.substring(1,r),a)}catch{throw this._errExpectedButGot("REGEX",n)}return vD.create(t,l)}switch(n.type){case 10:case 19:{const s=[n.lexeme];this._advance();let r=this._peek(),a=0;for(let g=0;g<n.lexeme.length;g++)n.lexeme.charCodeAt(g)===40?a++:n.lexeme.charCodeAt(g)===41&&a--;for(;!this._isAtEnd()&&r.type!==15&&r.type!==16;){switch(r.type){case 0:a++;break;case 1:a--;break;case 10:case 18:for(let g=0;g<r.lexeme.length;g++)r.lexeme.charCodeAt(g)===40?a++:n.lexeme.charCodeAt(g)===41&&a--}if(a<0)break;s.push(lx.getLexeme(r)),this._advance(),r=this._peek()}const l=s.join(""),c=l.lastIndexOf("/"),u=c===l.length-1?void 0:this._removeFlagsGY(l.substring(c+1));let f;try{f=new RegExp(l.substring(1,c),u)}catch{throw this._errExpectedButGot("REGEX",n)}return de.regex(t,f)}case 18:{const s=n.lexeme;this._advance();let r=null;if(!Gle(s)){const a=s.indexOf("/"),l=s.lastIndexOf("/");if(a!==l&&a>=0){const c=s.slice(a+1,l),u=s[l+1]==="i"?"i":"";try{r=new RegExp(c,u)}catch{throw this._errExpectedButGot("REGEX",n)}}}if(r===null)throw this._errExpectedButGot("REGEX",n);return vD.create(t,r)}default:throw this._errExpectedButGot("REGEX",this._peek())}}if(this._matchOne(14)){this._consume(13,kEe);const n=this._value();return de.notIn(t,n)}switch(this._peek().type){case 3:{this._advance();const n=this._value();if(this._previous().type===18)return de.equals(t,n);switch(n){case"true":return de.has(t);case"false":return de.not(t);default:return de.equals(t,n)}}case 4:{this._advance();const n=this._value();if(this._previous().type===18)return de.notEquals(t,n);switch(n){case"true":return de.not(t);case"false":return de.has(t);default:return de.notEquals(t,n)}}case 5:return this._advance(),i4.create(t,this._value());case 6:return this._advance(),n4.create(t,this._value());case 7:return this._advance(),e4.create(t,this._value());case 8:return this._advance(),t4.create(t,this._value());case 13:return this._advance(),de.in(t,this._value());default:return de.has(t)}}case 20:throw this._parsingErrors.push({message:IEe,offset:e.offset,lexeme:"",additionalInfo:TEe}),wh._parseError;default:throw this._errExpectedButGot(`true | false | KEY 
	| KEY '=~' REGEX 
	| KEY ('==' | '!=' | '<' | '<=' | '>' | '>=' | 'in' | 'not' 'in') value`,this._peek())}}_value(){const e=this._peek();switch(e.type){case 17:case 18:return this._advance(),e.lexeme;case 11:return this._advance(),"true";case 12:return this._advance(),"false";case 13:return this._advance(),"in";default:return""}}_removeFlagsGY(e){return e.replaceAll(this._flagsGYRe,"")}_previous(){return this._tokens[this._current-1]}_matchOne(e){return this._check(e)?(this._advance(),!0):!1}_advance(){return this._isAtEnd()||this._current++,this._previous()}_consume(e,t){if(this._check(e))return this._advance();throw this._errExpectedButGot(t,this._peek())}_errExpectedButGot(e,t,i){const n=v("contextkey.parser.error.expectedButGot",`Expected: {0}
Received: '{1}'.`,e,lx.getLexeme(t)),s=t.offset,r=lx.getLexeme(t);return this._parsingErrors.push({message:n,offset:s,lexeme:r,additionalInfo:i}),wh._parseError}_check(e){return this._peek().type===e}_peek(){return this._tokens[this._current]}_isAtEnd(){return this._peek().type===20}},wh._parseError=new Error,wh);const cZ=class cZ{static false(){return Jr.INSTANCE}static true(){return Da.INSTANCE}static has(e){return RC.create(e)}static equals(e,t){return $S.create(e,t)}static notEquals(e,t){return QF.create(e,t)}static regex(e,t){return vD.create(e,t)}static in(e,t){return ZF.create(e,t)}static notIn(e,t){return XF.create(e,t)}static not(e){return MC.create(e)}static and(...e){return Mv.create(e,null,!0)}static or(...e){return Gf.create(e,null,!0)}static deserialize(e){return e==null?void 0:this._parser.parse(e)}};cZ._parser=new NEe({regexParsingWithErrorRecovery:!1});let de=cZ;function REe(o,e){const t=o?o.substituteConstants():void 0,i=e?e.substituteConstants():void 0;return!t&&!i?!0:!t||!i?!1:t.equals(i)}function sk(o,e){return o.cmp(e)}const l2=class l2{constructor(){this.type=0}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!1}serialize(){return"false"}keys(){return[]}negate(){return Da.INSTANCE}};l2.INSTANCE=new l2;let Jr=l2;const c2=class c2{constructor(){this.type=1}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!0}serialize(){return"true"}keys(){return[]}negate(){return Jr.INSTANCE}};c2.INSTANCE=new c2;let Da=c2;class RC{static create(e,t=null){const i=Qo.get(e);return typeof i=="boolean"?i?Da.INSTANCE:Jr.INSTANCE:new RC(e,t)}constructor(e,t){this.key=e,this.negated=t,this.type=2}cmp(e){return e.type!==this.type?this.type-e.type:Tce(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=Qo.get(this.key);return typeof e=="boolean"?e?Da.INSTANCE:Jr.INSTANCE:this}evaluate(e){return!!e.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}negate(){return this.negated||(this.negated=MC.create(this.key,this)),this.negated}}class $S{static create(e,t,i=null){if(typeof t=="boolean")return t?RC.create(e,i):MC.create(e,i);const n=Qo.get(e);return typeof n=="boolean"?t===(n?"true":"false")?Da.INSTANCE:Jr.INSTANCE:new $S(e,t,i)}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=4}cmp(e){return e.type!==this.type?this.type-e.type:AC(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=Qo.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?Da.INSTANCE:Jr.INSTANCE}return this}evaluate(e){return e.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=QF.create(this.key,this.value,this)),this.negated}}class ZF{static create(e,t){return new ZF(e,t)}constructor(e,t){this.key=e,this.valueKey=t,this.type=10,this.negated=null}cmp(e){return e.type!==this.type?this.type-e.type:AC(this.key,this.valueKey,e.key,e.valueKey)}equals(e){return e.type===this.type?this.key===e.key&&this.valueKey===e.valueKey:!1}substituteConstants(){return this}evaluate(e){const t=e.getValue(this.valueKey),i=e.getValue(this.key);return Array.isArray(t)?t.includes(i):typeof i=="string"&&typeof t=="object"&&t!==null?wEe.call(t,i):!1}serialize(){return`${this.key} in '${this.valueKey}'`}keys(){return[this.key,this.valueKey]}negate(){return this.negated||(this.negated=XF.create(this.key,this.valueKey)),this.negated}}class XF{static create(e,t){return new XF(e,t)}constructor(e,t){this.key=e,this.valueKey=t,this.type=11,this._negated=ZF.create(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:this._negated.cmp(e._negated)}equals(e){return e.type===this.type?this._negated.equals(e._negated):!1}substituteConstants(){return this}evaluate(e){return!this._negated.evaluate(e)}serialize(){return`${this.key} not in '${this.valueKey}'`}keys(){return this._negated.keys()}negate(){return this._negated}}class QF{static create(e,t,i=null){if(typeof t=="boolean")return t?MC.create(e,i):RC.create(e,i);const n=Qo.get(e);return typeof n=="boolean"?t===(n?"true":"false")?Jr.INSTANCE:Da.INSTANCE:new QF(e,t,i)}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=5}cmp(e){return e.type!==this.type?this.type-e.type:AC(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=Qo.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?Jr.INSTANCE:Da.INSTANCE}return this}evaluate(e){return e.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=$S.create(this.key,this.value,this)),this.negated}}class MC{static create(e,t=null){const i=Qo.get(e);return typeof i=="boolean"?i?Jr.INSTANCE:Da.INSTANCE:new MC(e,t)}constructor(e,t){this.key=e,this.negated=t,this.type=3}cmp(e){return e.type!==this.type?this.type-e.type:Tce(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=Qo.get(this.key);return typeof e=="boolean"?e?Jr.INSTANCE:Da.INSTANCE:this}evaluate(e){return!e.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=RC.create(this.key,this)),this.negated}}function JF(o,e){if(typeof o=="string"){const t=parseFloat(o);isNaN(t)||(o=t)}return typeof o=="string"||typeof o=="number"?e(o):Jr.INSTANCE}class e4{static create(e,t,i=null){return JF(t,n=>new e4(e,n,i))}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=12}cmp(e){return e.type!==this.type?this.type-e.type:AC(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>this.value}serialize(){return`${this.key} > ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=n4.create(this.key,this.value,this)),this.negated}}class t4{static create(e,t,i=null){return JF(t,n=>new t4(e,n,i))}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=13}cmp(e){return e.type!==this.type?this.type-e.type:AC(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>=this.value}serialize(){return`${this.key} >= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=i4.create(this.key,this.value,this)),this.negated}}class i4{static create(e,t,i=null){return JF(t,n=>new i4(e,n,i))}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=14}cmp(e){return e.type!==this.type?this.type-e.type:AC(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<this.value}serialize(){return`${this.key} < ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=t4.create(this.key,this.value,this)),this.negated}}class n4{static create(e,t,i=null){return JF(t,n=>new n4(e,n,i))}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=15}cmp(e){return e.type!==this.type?this.type-e.type:AC(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<=this.value}serialize(){return`${this.key} <= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=e4.create(this.key,this.value,this)),this.negated}}class vD{static create(e,t){return new vD(e,t)}constructor(e,t){this.key=e,this.regexp=t,this.type=7,this.negated=null}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.key<e.key)return-1;if(this.key>e.key)return 1;const t=this.regexp?this.regexp.source:"",i=e.regexp?e.regexp.source:"";return t<i?-1:t>i?1:0}equals(e){if(e.type===this.type){const t=this.regexp?this.regexp.source:"",i=e.regexp?e.regexp.source:"";return this.key===e.key&&t===i}return!1}substituteConstants(){return this}evaluate(e){const t=e.getValue(this.key);return this.regexp?this.regexp.test(t):!1}serialize(){const e=this.regexp?`/${this.regexp.source}/${this.regexp.flags}`:"/invalid/";return`${this.key} =~ ${e}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=Gq.create(this)),this.negated}}class Gq{static create(e){return new Gq(e)}constructor(e){this._actual=e,this.type=8}cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type?this._actual.equals(e._actual):!1}substituteConstants(){return this}evaluate(e){return!this._actual.evaluate(e)}serialize(){return`!(${this._actual.serialize()})`}keys(){return this._actual.keys()}negate(){return this._actual}}function Ice(o){let e=null;for(let t=0,i=o.length;t<i;t++){const n=o[t].substituteConstants();if(o[t]!==n&&e===null){e=[];for(let s=0;s<t;s++)e[s]=o[s]}e!==null&&(e[t]=n)}return e===null?o:e}class Mv{static create(e,t,i){return Mv._normalizeArr(e,t,i)}constructor(e,t){this.expr=e,this.negated=t,this.type=6}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,i=this.expr.length;t<i;t++){const n=sk(this.expr[t],e.expr[t]);if(n!==0)return n}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,i=this.expr.length;t<i;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=Ice(this.expr);return e===this.expr?this:Mv.create(e,this.negated,!1)}evaluate(e){for(let t=0,i=this.expr.length;t<i;t++)if(!this.expr[t].evaluate(e))return!1;return!0}static _normalizeArr(e,t,i){const n=[];let s=!1;for(const r of e)if(r){if(r.type===1){s=!0;continue}if(r.type===0)return Jr.INSTANCE;if(r.type===6){n.push(...r.expr);continue}n.push(r)}if(n.length===0&&s)return Da.INSTANCE;if(n.length!==0){if(n.length===1)return n[0];n.sort(sk);for(let r=1;r<n.length;r++)n[r-1].equals(n[r])&&(n.splice(r,1),r--);if(n.length===1)return n[0];for(;n.length>1;){const r=n[n.length-1];if(r.type!==9)break;n.pop();const a=n.pop(),l=n.length===0,c=Gf.create(r.expr.map(u=>Mv.create([u,a],null,i)),null,l);c&&(n.push(c),n.sort(sk))}if(n.length===1)return n[0];if(i){for(let r=0;r<n.length;r++)for(let a=r+1;a<n.length;a++)if(n[r].negate().equals(n[a]))return Jr.INSTANCE;if(n.length===1)return n[0]}return new Mv(n,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" && ")}keys(){const e=[];for(const t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){const e=[];for(const t of this.expr)e.push(t.negate());this.negated=Gf.create(e,this,!0)}return this.negated}}class Gf{static create(e,t,i){return Gf._normalizeArr(e,t,i)}constructor(e,t){this.expr=e,this.negated=t,this.type=9}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,i=this.expr.length;t<i;t++){const n=sk(this.expr[t],e.expr[t]);if(n!==0)return n}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,i=this.expr.length;t<i;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=Ice(this.expr);return e===this.expr?this:Gf.create(e,this.negated,!1)}evaluate(e){for(let t=0,i=this.expr.length;t<i;t++)if(this.expr[t].evaluate(e))return!0;return!1}static _normalizeArr(e,t,i){let n=[],s=!1;if(e){for(let r=0,a=e.length;r<a;r++){const l=e[r];if(l){if(l.type===0){s=!0;continue}if(l.type===1)return Da.INSTANCE;if(l.type===9){n=n.concat(l.expr);continue}n.push(l)}}if(n.length===0&&s)return Jr.INSTANCE;n.sort(sk)}if(n.length!==0){if(n.length===1)return n[0];for(let r=1;r<n.length;r++)n[r-1].equals(n[r])&&(n.splice(r,1),r--);if(n.length===1)return n[0];if(i){for(let r=0;r<n.length;r++)for(let a=r+1;a<n.length;a++)if(n[r].negate().equals(n[a]))return Da.INSTANCE;if(n.length===1)return n[0]}return new Gf(n,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" || ")}keys(){const e=[];for(const t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){const e=[];for(const t of this.expr)e.push(t.negate());for(;e.length>1;){const t=e.shift(),i=e.shift(),n=[];for(const s of tie(t))for(const r of tie(i))n.push(Mv.create([s,r],null,!1));e.unshift(Gf.create(n,null,!1))}this.negated=Gf.create(e,this,!0)}return this.negated}}const e1=class e1 extends RC{static all(){return e1._info.values()}constructor(e,t,i){super(e,null),this._defaultValue=t,typeof i=="object"?e1._info.push({...i,key:e}):i!==!0&&e1._info.push({key:e,description:i,type:t!=null?typeof t:void 0})}bindTo(e){return e.createKey(this.key,this._defaultValue)}getValue(e){return e.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(e){return $S.create(this.key,e)}};e1._info=[];let Pe=e1;const ht=Gt("contextKeyService");function Tce(o,e){return o<e?-1:o>e?1:0}function AC(o,e,t,i){return o<t?-1:o>t?1:e<i?-1:e>i?1:0}function pV(o,e){if(o.type===0||e.type===1)return!0;if(o.type===9)return e.type===9?eie(o.expr,e.expr):!1;if(e.type===9){for(const t of e.expr)if(pV(o,t))return!0;return!1}if(o.type===6){if(e.type===6)return eie(e.expr,o.expr);for(const t of o.expr)if(pV(t,e))return!0;return!1}return o.equals(e)}function eie(o,e){let t=0,i=0;for(;t<o.length&&i<e.length;){const n=o[t].cmp(e[i]);if(n<0)return!1;n===0&&t++,i++}return t===o.length}function tie(o){return o.type===9?o.expr:[o]}function XH(o,e){if(!o)throw new Error(e?`Assertion failed (${e})`:"Assertion Failed")}function s4(o,e="Unreachable"){throw new Error(e)}function iie(o){o||wt(new wi("Soft Assertion Failed"))}function cC(o){if(!o()){debugger;o(),wt(new wi("Assertion Failed"))}}function Yq(o,e){let t=0;for(;t<o.length-1;){const i=o[t],n=o[t+1];if(!e(i,n))return!1;t++}return!0}class MEe{constructor(){this.data=new Map}add(e,t){XH(xa(e)),XH(ao(t)),XH(!this.data.has(e),"There is already an extension with this id"),this.data.set(e,t)}as(e){return this.data.get(e)||null}}const Pn=new MEe;class Zq{constructor(){this._coreKeybindings=new jr,this._extensionKeybindings=[],this._cachedMergedKeybindings=null}static bindToCurrentPlatform(e){if(Ja===1){if(e&&e.win)return e.win}else if(Ja===2){if(e&&e.mac)return e.mac}else if(e&&e.linux)return e.linux;return e}registerKeybindingRule(e){const t=Zq.bindToCurrentPlatform(e),i=new le;if(t&&t.primary){const n=tV(t.primary,Ja);n&&i.add(this._registerDefaultKeybinding(n,e.id,e.args,e.weight,0,e.when))}if(t&&Array.isArray(t.secondary))for(let n=0,s=t.secondary.length;n<s;n++){const r=t.secondary[n],a=tV(r,Ja);a&&i.add(this._registerDefaultKeybinding(a,e.id,e.args,e.weight,-n-1,e.when))}return i}registerCommandAndKeybindingRule(e){return od(this.registerKeybindingRule(e),ii.registerCommand(e))}_registerDefaultKeybinding(e,t,i,n,s,r){const a=this._coreKeybindings.push({keybinding:e,command:t,commandArgs:i,when:r,weight1:n,weight2:s,extensionId:null,isBuiltinExtension:!1});return this._cachedMergedKeybindings=null,it(()=>{a(),this._cachedMergedKeybindings=null})}getDefaultKeybindings(){return this._cachedMergedKeybindings||(this._cachedMergedKeybindings=Array.from(this._coreKeybindings).concat(this._extensionKeybindings),this._cachedMergedKeybindings.sort(PEe)),this._cachedMergedKeybindings.slice(0)}}const ea=new Zq,AEe={EditorModes:"platform.keybindingsRegistry"};Pn.add(AEe.EditorModes,ea);function PEe(o,e){if(o.weight1!==e.weight1)return o.weight1-e.weight1;if(o.command&&e.command){if(o.command<e.command)return-1;if(o.command>e.command)return 1}return o.weight2-e.weight2}var OEe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},nie=function(o,e){return function(t,i){e(t,i,o)}},gM;function m1(o){return o.command!==void 0}function FEe(o){return o.submenu!==void 0}const V=class V{constructor(e){if(V._instances.has(e))throw new TypeError(`MenuId with identifier '${e}' already exists. Use MenuId.for(ident) or a unique identifier`);V._instances.set(e,this),this.id=e}};V._instances=new Map,V.CommandPalette=new V("CommandPalette"),V.DebugBreakpointsContext=new V("DebugBreakpointsContext"),V.DebugCallStackContext=new V("DebugCallStackContext"),V.DebugConsoleContext=new V("DebugConsoleContext"),V.DebugVariablesContext=new V("DebugVariablesContext"),V.NotebookVariablesContext=new V("NotebookVariablesContext"),V.DebugHoverContext=new V("DebugHoverContext"),V.DebugWatchContext=new V("DebugWatchContext"),V.DebugToolBar=new V("DebugToolBar"),V.DebugToolBarStop=new V("DebugToolBarStop"),V.DebugCallStackToolbar=new V("DebugCallStackToolbar"),V.DebugCreateConfiguration=new V("DebugCreateConfiguration"),V.EditorContext=new V("EditorContext"),V.SimpleEditorContext=new V("SimpleEditorContext"),V.EditorContent=new V("EditorContent"),V.EditorLineNumberContext=new V("EditorLineNumberContext"),V.EditorContextCopy=new V("EditorContextCopy"),V.EditorContextPeek=new V("EditorContextPeek"),V.EditorContextShare=new V("EditorContextShare"),V.EditorTitle=new V("EditorTitle"),V.EditorTitleRun=new V("EditorTitleRun"),V.EditorTitleContext=new V("EditorTitleContext"),V.EditorTitleContextShare=new V("EditorTitleContextShare"),V.EmptyEditorGroup=new V("EmptyEditorGroup"),V.EmptyEditorGroupContext=new V("EmptyEditorGroupContext"),V.EditorTabsBarContext=new V("EditorTabsBarContext"),V.EditorTabsBarShowTabsSubmenu=new V("EditorTabsBarShowTabsSubmenu"),V.EditorTabsBarShowTabsZenModeSubmenu=new V("EditorTabsBarShowTabsZenModeSubmenu"),V.EditorActionsPositionSubmenu=new V("EditorActionsPositionSubmenu"),V.ExplorerContext=new V("ExplorerContext"),V.ExplorerContextShare=new V("ExplorerContextShare"),V.ExtensionContext=new V("ExtensionContext"),V.GlobalActivity=new V("GlobalActivity"),V.CommandCenter=new V("CommandCenter"),V.CommandCenterCenter=new V("CommandCenterCenter"),V.LayoutControlMenuSubmenu=new V("LayoutControlMenuSubmenu"),V.LayoutControlMenu=new V("LayoutControlMenu"),V.MenubarMainMenu=new V("MenubarMainMenu"),V.MenubarAppearanceMenu=new V("MenubarAppearanceMenu"),V.MenubarDebugMenu=new V("MenubarDebugMenu"),V.MenubarEditMenu=new V("MenubarEditMenu"),V.MenubarCopy=new V("MenubarCopy"),V.MenubarFileMenu=new V("MenubarFileMenu"),V.MenubarGoMenu=new V("MenubarGoMenu"),V.MenubarHelpMenu=new V("MenubarHelpMenu"),V.MenubarLayoutMenu=new V("MenubarLayoutMenu"),V.MenubarNewBreakpointMenu=new V("MenubarNewBreakpointMenu"),V.PanelAlignmentMenu=new V("PanelAlignmentMenu"),V.PanelPositionMenu=new V("PanelPositionMenu"),V.ActivityBarPositionMenu=new V("ActivityBarPositionMenu"),V.MenubarPreferencesMenu=new V("MenubarPreferencesMenu"),V.MenubarRecentMenu=new V("MenubarRecentMenu"),V.MenubarSelectionMenu=new V("MenubarSelectionMenu"),V.MenubarShare=new V("MenubarShare"),V.MenubarSwitchEditorMenu=new V("MenubarSwitchEditorMenu"),V.MenubarSwitchGroupMenu=new V("MenubarSwitchGroupMenu"),V.MenubarTerminalMenu=new V("MenubarTerminalMenu"),V.MenubarViewMenu=new V("MenubarViewMenu"),V.MenubarHomeMenu=new V("MenubarHomeMenu"),V.OpenEditorsContext=new V("OpenEditorsContext"),V.OpenEditorsContextShare=new V("OpenEditorsContextShare"),V.ProblemsPanelContext=new V("ProblemsPanelContext"),V.SCMInputBox=new V("SCMInputBox"),V.SCMChangesSeparator=new V("SCMChangesSeparator"),V.SCMChangesContext=new V("SCMChangesContext"),V.SCMIncomingChanges=new V("SCMIncomingChanges"),V.SCMIncomingChangesContext=new V("SCMIncomingChangesContext"),V.SCMIncomingChangesSetting=new V("SCMIncomingChangesSetting"),V.SCMOutgoingChanges=new V("SCMOutgoingChanges"),V.SCMOutgoingChangesContext=new V("SCMOutgoingChangesContext"),V.SCMOutgoingChangesSetting=new V("SCMOutgoingChangesSetting"),V.SCMIncomingChangesAllChangesContext=new V("SCMIncomingChangesAllChangesContext"),V.SCMIncomingChangesHistoryItemContext=new V("SCMIncomingChangesHistoryItemContext"),V.SCMOutgoingChangesAllChangesContext=new V("SCMOutgoingChangesAllChangesContext"),V.SCMOutgoingChangesHistoryItemContext=new V("SCMOutgoingChangesHistoryItemContext"),V.SCMChangeContext=new V("SCMChangeContext"),V.SCMResourceContext=new V("SCMResourceContext"),V.SCMResourceContextShare=new V("SCMResourceContextShare"),V.SCMResourceFolderContext=new V("SCMResourceFolderContext"),V.SCMResourceGroupContext=new V("SCMResourceGroupContext"),V.SCMSourceControl=new V("SCMSourceControl"),V.SCMSourceControlInline=new V("SCMSourceControlInline"),V.SCMSourceControlTitle=new V("SCMSourceControlTitle"),V.SCMHistoryTitle=new V("SCMHistoryTitle"),V.SCMTitle=new V("SCMTitle"),V.SearchContext=new V("SearchContext"),V.SearchActionMenu=new V("SearchActionContext"),V.StatusBarWindowIndicatorMenu=new V("StatusBarWindowIndicatorMenu"),V.StatusBarRemoteIndicatorMenu=new V("StatusBarRemoteIndicatorMenu"),V.StickyScrollContext=new V("StickyScrollContext"),V.TestItem=new V("TestItem"),V.TestItemGutter=new V("TestItemGutter"),V.TestProfilesContext=new V("TestProfilesContext"),V.TestMessageContext=new V("TestMessageContext"),V.TestMessageContent=new V("TestMessageContent"),V.TestPeekElement=new V("TestPeekElement"),V.TestPeekTitle=new V("TestPeekTitle"),V.TestCallStack=new V("TestCallStack"),V.TouchBarContext=new V("TouchBarContext"),V.TitleBarContext=new V("TitleBarContext"),V.TitleBarTitleContext=new V("TitleBarTitleContext"),V.TunnelContext=new V("TunnelContext"),V.TunnelPrivacy=new V("TunnelPrivacy"),V.TunnelProtocol=new V("TunnelProtocol"),V.TunnelPortInline=new V("TunnelInline"),V.TunnelTitle=new V("TunnelTitle"),V.TunnelLocalAddressInline=new V("TunnelLocalAddressInline"),V.TunnelOriginInline=new V("TunnelOriginInline"),V.ViewItemContext=new V("ViewItemContext"),V.ViewContainerTitle=new V("ViewContainerTitle"),V.ViewContainerTitleContext=new V("ViewContainerTitleContext"),V.ViewTitle=new V("ViewTitle"),V.ViewTitleContext=new V("ViewTitleContext"),V.CommentEditorActions=new V("CommentEditorActions"),V.CommentThreadTitle=new V("CommentThreadTitle"),V.CommentThreadActions=new V("CommentThreadActions"),V.CommentThreadAdditionalActions=new V("CommentThreadAdditionalActions"),V.CommentThreadTitleContext=new V("CommentThreadTitleContext"),V.CommentThreadCommentContext=new V("CommentThreadCommentContext"),V.CommentTitle=new V("CommentTitle"),V.CommentActions=new V("CommentActions"),V.CommentsViewThreadActions=new V("CommentsViewThreadActions"),V.InteractiveToolbar=new V("InteractiveToolbar"),V.InteractiveCellTitle=new V("InteractiveCellTitle"),V.InteractiveCellDelete=new V("InteractiveCellDelete"),V.InteractiveCellExecute=new V("InteractiveCellExecute"),V.InteractiveInputExecute=new V("InteractiveInputExecute"),V.InteractiveInputConfig=new V("InteractiveInputConfig"),V.ReplInputExecute=new V("ReplInputExecute"),V.IssueReporter=new V("IssueReporter"),V.NotebookToolbar=new V("NotebookToolbar"),V.NotebookStickyScrollContext=new V("NotebookStickyScrollContext"),V.NotebookCellTitle=new V("NotebookCellTitle"),V.NotebookCellDelete=new V("NotebookCellDelete"),V.NotebookCellInsert=new V("NotebookCellInsert"),V.NotebookCellBetween=new V("NotebookCellBetween"),V.NotebookCellListTop=new V("NotebookCellTop"),V.NotebookCellExecute=new V("NotebookCellExecute"),V.NotebookCellExecuteGoTo=new V("NotebookCellExecuteGoTo"),V.NotebookCellExecutePrimary=new V("NotebookCellExecutePrimary"),V.NotebookDiffCellInputTitle=new V("NotebookDiffCellInputTitle"),V.NotebookDiffCellMetadataTitle=new V("NotebookDiffCellMetadataTitle"),V.NotebookDiffCellOutputsTitle=new V("NotebookDiffCellOutputsTitle"),V.NotebookOutputToolbar=new V("NotebookOutputToolbar"),V.NotebookOutlineFilter=new V("NotebookOutlineFilter"),V.NotebookOutlineActionMenu=new V("NotebookOutlineActionMenu"),V.NotebookEditorLayoutConfigure=new V("NotebookEditorLayoutConfigure"),V.NotebookKernelSource=new V("NotebookKernelSource"),V.BulkEditTitle=new V("BulkEditTitle"),V.BulkEditContext=new V("BulkEditContext"),V.TimelineItemContext=new V("TimelineItemContext"),V.TimelineTitle=new V("TimelineTitle"),V.TimelineTitleContext=new V("TimelineTitleContext"),V.TimelineFilterSubMenu=new V("TimelineFilterSubMenu"),V.AccountsContext=new V("AccountsContext"),V.SidebarTitle=new V("SidebarTitle"),V.PanelTitle=new V("PanelTitle"),V.AuxiliaryBarTitle=new V("AuxiliaryBarTitle"),V.AuxiliaryBarHeader=new V("AuxiliaryBarHeader"),V.TerminalInstanceContext=new V("TerminalInstanceContext"),V.TerminalEditorInstanceContext=new V("TerminalEditorInstanceContext"),V.TerminalNewDropdownContext=new V("TerminalNewDropdownContext"),V.TerminalTabContext=new V("TerminalTabContext"),V.TerminalTabEmptyAreaContext=new V("TerminalTabEmptyAreaContext"),V.TerminalStickyScrollContext=new V("TerminalStickyScrollContext"),V.WebviewContext=new V("WebviewContext"),V.InlineCompletionsActions=new V("InlineCompletionsActions"),V.InlineEditsActions=new V("InlineEditsActions"),V.InlineEditActions=new V("InlineEditActions"),V.NewFile=new V("NewFile"),V.MergeInput1Toolbar=new V("MergeToolbar1Toolbar"),V.MergeInput2Toolbar=new V("MergeToolbar2Toolbar"),V.MergeBaseToolbar=new V("MergeBaseToolbar"),V.MergeInputResultToolbar=new V("MergeToolbarResultToolbar"),V.InlineSuggestionToolbar=new V("InlineSuggestionToolbar"),V.InlineEditToolbar=new V("InlineEditToolbar"),V.ChatContext=new V("ChatContext"),V.ChatCodeBlock=new V("ChatCodeblock"),V.ChatCompareBlock=new V("ChatCompareBlock"),V.ChatMessageTitle=new V("ChatMessageTitle"),V.ChatExecute=new V("ChatExecute"),V.ChatExecuteSecondary=new V("ChatExecuteSecondary"),V.ChatInputSide=new V("ChatInputSide"),V.AccessibleView=new V("AccessibleView"),V.MultiDiffEditorFileToolbar=new V("MultiDiffEditorFileToolbar"),V.DiffEditorHunkToolbar=new V("DiffEditorHunkToolbar"),V.DiffEditorSelectionToolbar=new V("DiffEditorSelectionToolbar");let qe=V;const Gl=Gt("menuService"),Uk=class Uk{static for(e){let t=this._all.get(e);return t||(t=new Uk(e),this._all.set(e,t)),t}static merge(e){const t=new Set;for(const i of e)i instanceof Uk&&t.add(i.id);return t}constructor(e){this.id=e,this.has=t=>t===e}};Uk._all=new Map;let fv=Uk;const lo=new class{constructor(){this._commands=new Map,this._menuItems=new Map,this._onDidChangeMenu=new Xxe({merge:fv.merge}),this.onDidChangeMenu=this._onDidChangeMenu.event}addCommand(o){return this._commands.set(o.id,o),this._onDidChangeMenu.fire(fv.for(qe.CommandPalette)),it(()=>{this._commands.delete(o.id)&&this._onDidChangeMenu.fire(fv.for(qe.CommandPalette))})}getCommand(o){return this._commands.get(o)}getCommands(){const o=new Map;return this._commands.forEach((e,t)=>o.set(t,e)),o}appendMenuItem(o,e){let t=this._menuItems.get(o);t||(t=new jr,this._menuItems.set(o,t));const i=t.push(e);return this._onDidChangeMenu.fire(fv.for(o)),it(()=>{i(),this._onDidChangeMenu.fire(fv.for(o))})}appendMenuItems(o){const e=new le;for(const{id:t,item:i}of o)e.add(this.appendMenuItem(t,i));return e}getMenuItems(o){let e;return this._menuItems.has(o)?e=[...this._menuItems.get(o)]:e=[],o===qe.CommandPalette&&this._appendImplicitItems(e),e}_appendImplicitItems(o){const e=new Set;for(const t of o)m1(t)&&(e.add(t.command.id),t.alt&&e.add(t.alt.id));this._commands.forEach((t,i)=>{e.has(i)||o.push({command:t})})}};class _1 extends tS{constructor(e,t,i){super(`submenuitem.${e.submenu.id}`,typeof e.title=="string"?e.title:e.title.value,i,"submenu"),this.item=e,this.hideActions=t}}let il=gM=class{static label(e,t){return t!=null&&t.renderShortTitle&&e.shortTitle?typeof e.shortTitle=="string"?e.shortTitle:e.shortTitle.value:typeof e.title=="string"?e.title:e.title.value}constructor(e,t,i,n,s,r,a){var c;this.hideActions=n,this.menuKeybinding=s,this._commandService=a,this.id=e.id,this.label=gM.label(e,i),this.tooltip=(typeof e.tooltip=="string"?e.tooltip:(c=e.tooltip)==null?void 0:c.value)??"",this.enabled=!e.precondition||r.contextMatchesRules(e.precondition),this.checked=void 0;let l;if(e.toggled){const u=e.toggled.condition?e.toggled:{condition:e.toggled};this.checked=r.contextMatchesRules(u.condition),this.checked&&u.tooltip&&(this.tooltip=typeof u.tooltip=="string"?u.tooltip:u.tooltip.value),this.checked&&ut.isThemeIcon(u.icon)&&(l=u.icon),this.checked&&u.title&&(this.label=typeof u.title=="string"?u.title:u.title.value)}l||(l=ut.isThemeIcon(e.icon)?e.icon:void 0),this.item=e,this.alt=t?new gM(t,void 0,i,n,void 0,r,a):void 0,this._options=i,this.class=l&&ut.asClassName(l)}run(...e){var i,n;let t=[];return(i=this._options)!=null&&i.arg&&(t=[...t,this._options.arg]),(n=this._options)!=null&&n.shouldForwardArgs&&(t=[...t,...e]),this._commandService.executeCommand(this.id,...t)}};il=gM=OEe([nie(5,ht),nie(6,nn)],il);class na{constructor(e){this.desc=e}}function Xi(o){const e=[],t=new o,{f1:i,menu:n,keybinding:s,...r}=t.desc;if(ii.getCommand(r.id))throw new Error(`Cannot register two commands with the same id: ${r.id}`);if(e.push(ii.registerCommand({id:r.id,handler:(a,...l)=>t.run(a,...l),metadata:r.metadata})),Array.isArray(n))for(const a of n)e.push(lo.appendMenuItem(a.id,{command:{...r,precondition:a.precondition===null?void 0:r.precondition},...a}));else n&&e.push(lo.appendMenuItem(n.id,{command:{...r,precondition:n.precondition===null?void 0:r.precondition},...n}));if(i&&(e.push(lo.appendMenuItem(qe.CommandPalette,{command:r,when:r.precondition})),e.push(lo.addCommand(r))),Array.isArray(s))for(const a of s)e.push(ea.registerKeybindingRule({...a,id:r.id,when:r.precondition?de.and(r.precondition,a.when):a.when}));else s&&e.push(ea.registerKeybindingRule({...s,id:r.id,when:r.precondition?de.and(r.precondition,s.when):s.when}));return{dispose(){$i(e)}}}const tr=Gt("telemetryService"),Oo=Gt("logService");var ya;(function(o){o[o.Off=0]="Off",o[o.Trace=1]="Trace",o[o.Debug=2]="Debug",o[o.Info=3]="Info",o[o.Warning=4]="Warning",o[o.Error=5]="Error"})(ya||(ya={}));const Nce=ya.Info;class Rce extends X{constructor(){super(...arguments),this.level=Nce,this._onDidChangeLogLevel=this._register(new Y),this.onDidChangeLogLevel=this._onDidChangeLogLevel.event}setLevel(e){this.level!==e&&(this.level=e,this._onDidChangeLogLevel.fire(this.level))}getLevel(){return this.level}checkLogLevel(e){return this.level!==ya.Off&&this.level<=e}}class BEe extends Rce{constructor(e=Nce,t=!0){super(),this.useColors=t,this.setLevel(e)}trace(e,...t){this.checkLogLevel(ya.Trace)&&(this.useColors?console.log("%cTRACE","color: #888",e,...t):console.log(e,...t))}debug(e,...t){this.checkLogLevel(ya.Debug)&&(this.useColors?console.log("%cDEBUG","background: #eee; color: #888",e,...t):console.log(e,...t))}info(e,...t){this.checkLogLevel(ya.Info)&&(this.useColors?console.log("%c INFO","color: #33f",e,...t):console.log(e,...t))}warn(e,...t){this.checkLogLevel(ya.Warning)&&(this.useColors?console.log("%c WARN","color: #993",e,...t):console.log(e,...t))}error(e,...t){this.checkLogLevel(ya.Error)&&(this.useColors?console.log("%c  ERR","color: #f33",e,...t):console.error(e,...t))}}class WEe extends Rce{constructor(e){super(),this.loggers=e,e.length&&this.setLevel(e[0].getLevel())}setLevel(e){for(const t of this.loggers)t.setLevel(e);super.setLevel(e)}trace(e,...t){for(const i of this.loggers)i.trace(e,...t)}debug(e,...t){for(const i of this.loggers)i.debug(e,...t)}info(e,...t){for(const i of this.loggers)i.info(e,...t)}warn(e,...t){for(const i of this.loggers)i.warn(e,...t)}error(e,...t){for(const i of this.loggers)i.error(e,...t)}dispose(){for(const e of this.loggers)e.dispose();super.dispose()}}function HEe(o){switch(o){case ya.Trace:return"trace";case ya.Debug:return"debug";case ya.Info:return"info";case ya.Warning:return"warn";case ya.Error:return"error";case ya.Off:return"off"}}new Pe("logLevel",HEe(ya.Info));class o4{constructor(e){this.id=e.id,this.precondition=e.precondition,this._kbOpts=e.kbOpts,this._menuOpts=e.menuOpts,this.metadata=e.metadata}register(){if(Array.isArray(this._menuOpts)?this._menuOpts.forEach(this._registerMenuItem,this):this._menuOpts&&this._registerMenuItem(this._menuOpts),this._kbOpts){const e=Array.isArray(this._kbOpts)?this._kbOpts:[this._kbOpts];for(const t of e){let i=t.kbExpr;this.precondition&&(i?i=de.and(i,this.precondition):i=this.precondition);const n={id:this.id,weight:t.weight,args:t.args,when:i,primary:t.primary,secondary:t.secondary,win:t.win,linux:t.linux,mac:t.mac};ea.registerKeybindingRule(n)}}ii.registerCommand({id:this.id,handler:(e,t)=>this.runCommand(e,t),metadata:this.metadata})}_registerMenuItem(e){lo.appendMenuItem(e.menuId,{group:e.group,command:{id:this.id,title:e.title,icon:e.icon,precondition:this.precondition},when:e.when,order:e.order})}}class jS extends o4{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t,i,n){return this._implementations.push({priority:e,name:t,implementation:i,when:n}),this._implementations.sort((s,r)=>r.priority-s.priority),{dispose:()=>{for(let s=0;s<this._implementations.length;s++)if(this._implementations[s].implementation===i){this._implementations.splice(s,1);return}}}}runCommand(e,t){const i=e.get(Oo),n=e.get(ht);i.trace(`Executing Command '${this.id}' which has ${this._implementations.length} bound.`);for(const s of this._implementations){if(s.when){const a=n.getContext(Mo());if(!s.when.evaluate(a))continue}const r=s.implementation(e,t);if(r)return i.trace(`Command '${this.id}' was handled by '${s.name}'.`),typeof r=="boolean"?void 0:r}i.trace(`The Command '${this.id}' was not handled by any implementation.`)}}class Mce extends o4{constructor(e,t){super(t),this.command=e}runCommand(e,t){return this.command.runCommand(e,t)}}class Bs extends o4{static bindToContribution(e){return class extends Bs{constructor(i){super(i),this._callback=i.handler}runEditorCommand(i,n,s){const r=e(n);r&&this._callback(r,s)}}}static runEditorCommand(e,t,i,n){const s=e.get(hi),r=s.getFocusedCodeEditor()||s.getActiveCodeEditor();if(r)return r.invokeWithinContext(a=>{if(a.get(ht).contextMatchesRules(i??void 0))return n(a,r,t)})}runCommand(e,t){return Bs.runEditorCommand(e,t,this.precondition,(i,n,s)=>this.runEditorCommand(i,n,s))}}class Ve extends Bs{static convertOptions(e){let t;Array.isArray(e.menuOpts)?t=e.menuOpts:e.menuOpts?t=[e.menuOpts]:t=[];function i(n){return n.menuId||(n.menuId=qe.EditorContext),n.title||(n.title=e.label),n.when=de.and(e.precondition,n.when),n}return Array.isArray(e.contextMenuOpts)?t.push(...e.contextMenuOpts.map(i)):e.contextMenuOpts&&t.push(i(e.contextMenuOpts)),e.menuOpts=t,e}constructor(e){super(Ve.convertOptions(e)),this.label=e.label,this.alias=e.alias}runEditorCommand(e,t,i){return this.reportTelemetry(e,t),this.run(e,t,i||{})}reportTelemetry(e,t){e.get(tr).publicLog2("editorActionInvoked",{name:this.label,id:this.id})}}class Ace extends Ve{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t){return this._implementations.push([e,t]),this._implementations.sort((i,n)=>n[0]-i[0]),{dispose:()=>{for(let i=0;i<this._implementations.length;i++)if(this._implementations[i][1]===t){this._implementations.splice(i,1);return}}}}run(e,t,i){for(const n of this._implementations){const s=n[1](e,t,i);if(s)return typeof s=="boolean"?void 0:s}}}class wu extends na{run(e,...t){const i=e.get(hi),n=i.getFocusedCodeEditor()||i.getActiveCodeEditor();if(n)return n.invokeWithinContext(s=>{var c;const r=s.get(ht),a=s.get(Oo);if(!r.contextMatchesRules(this.desc.precondition??void 0)){a.debug("[EditorAction2] NOT running command because its precondition is FALSE",this.desc.id,(c=this.desc.precondition)==null?void 0:c.serialize());return}return this.runEditorCommand(s,n,...t)})}}function Ra(o,e){ii.registerCommand(o,function(t,...i){const n=t.get(nt),[s,r]=i;ui(st.isUri(s)),ui(G.isIPosition(r));const a=t.get(un).getModel(s);if(a){const l=G.lift(r);return n.invokeFunction(e,a,l,...i.slice(2))}return t.get(Na).createModelReference(s).then(l=>new Promise((c,u)=>{try{const f=n.invokeFunction(e,l.object.textEditorModel,G.lift(r),i.slice(2));c(f)}catch(f){u(f)}}).finally(()=>{l.dispose()}))})}function Re(o){return _c.INSTANCE.registerEditorCommand(o),o}function be(o){const e=new o;return _c.INSTANCE.registerEditorAction(e),e}function Pce(o){return _c.INSTANCE.registerEditorAction(o),o}function VEe(o){_c.INSTANCE.registerEditorAction(o)}function oi(o,e,t){_c.INSTANCE.registerEditorContribution(o,e,t)}var Xv;(function(o){function e(r){return _c.INSTANCE.getEditorCommand(r)}o.getEditorCommand=e;function t(){return _c.INSTANCE.getEditorActions()}o.getEditorActions=t;function i(){return _c.INSTANCE.getEditorContributions()}o.getEditorContributions=i;function n(r){return _c.INSTANCE.getEditorContributions().filter(a=>r.indexOf(a.id)>=0)}o.getSomeEditorContributions=n;function s(){return _c.INSTANCE.getDiffEditorContributions()}o.getDiffEditorContributions=s})(Xv||(Xv={}));const zEe={EditorCommonContributions:"editor.contributions"},d2=class d2{constructor(){this.editorContributions=[],this.diffEditorContributions=[],this.editorActions=[],this.editorCommands=Object.create(null)}registerEditorContribution(e,t,i){this.editorContributions.push({id:e,ctor:t,instantiation:i})}getEditorContributions(){return this.editorContributions.slice(0)}getDiffEditorContributions(){return this.diffEditorContributions.slice(0)}registerEditorAction(e){e.register(),this.editorActions.push(e)}getEditorActions(){return this.editorActions}registerEditorCommand(e){e.register(),this.editorCommands[e.id]=e}getEditorCommand(e){return this.editorCommands[e]||null}};d2.INSTANCE=new d2;let _c=d2;Pn.add(zEe.EditorCommonContributions,_c.INSTANCE);function JE(o){return o.register(),o}const Oce=JE(new jS({id:"undo",precondition:void 0,kbOpts:{weight:0,primary:2104},menuOpts:[{menuId:qe.MenubarEditMenu,group:"1_do",title:v({key:"miUndo",comment:["&& denotes a mnemonic"]},"&&Undo"),order:1},{menuId:qe.CommandPalette,group:"",title:v("undo","Undo"),order:1}]}));JE(new Mce(Oce,{id:"default:undo",precondition:void 0}));const Fce=JE(new jS({id:"redo",precondition:void 0,kbOpts:{weight:0,primary:2103,secondary:[3128],mac:{primary:3128}},menuOpts:[{menuId:qe.MenubarEditMenu,group:"1_do",title:v({key:"miRedo",comment:["&& denotes a mnemonic"]},"&&Redo"),order:2},{menuId:qe.CommandPalette,group:"",title:v("redo","Redo"),order:1}]}));JE(new Mce(Fce,{id:"default:redo",precondition:void 0}));const UEe=JE(new jS({id:"editor.action.selectAll",precondition:void 0,kbOpts:{weight:0,kbExpr:null,primary:2079},menuOpts:[{menuId:qe.MenubarSelectionMenu,group:"1_basic",title:v({key:"miSelectAll",comment:["&& denotes a mnemonic"]},"&&Select All"),order:1},{menuId:qe.CommandPalette,group:"",title:v("selectAll","Select All"),order:1}]})),$Ee="modulepreload",jEe=function(o,e){return new URL(o,e).href},sie={},ot=function(e,t,i){let n=Promise.resolve();if(t&&t.length>0){const r=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));n=Promise.allSettled(t.map(c=>{if(c=jEe(c,i),c in sie)return;sie[c]=!0;const u=c.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(!!i)for(let _=r.length-1;_>=0;_--){const b=r[_];if(b.href===c&&(!u||b.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${f}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":$Ee,u||(p.as="script"),p.crossOrigin="",p.href=c,l&&p.setAttribute("nonce",l),document.head.appendChild(p),u)return new Promise((_,b)=>{p.addEventListener("load",_),p.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(r){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=r,window.dispatchEvent(a),!a.defaultPrevented)throw r}return n.then(r=>{for(const a of r||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},oie="default",qEe="$initialize";let rie=!1;function mV(o){NC&&(rie||(rie=!0,console.warn("Could not create web worker(s). Falling back to loading web worker code in main thread, which might cause UI freezes. Please see https://github.com/microsoft/monaco-editor#faq")),console.warn(o.message))}class KEe{constructor(e,t,i,n,s){this.vsWorker=e,this.req=t,this.channel=i,this.method=n,this.args=s,this.type=0}}class aie{constructor(e,t,i,n){this.vsWorker=e,this.seq=t,this.res=i,this.err=n,this.type=1}}class GEe{constructor(e,t,i,n,s){this.vsWorker=e,this.req=t,this.channel=i,this.eventName=n,this.arg=s,this.type=2}}class YEe{constructor(e,t,i){this.vsWorker=e,this.req=t,this.event=i,this.type=3}}class ZEe{constructor(e,t){this.vsWorker=e,this.req=t,this.type=4}}class XEe{constructor(e){this._workerId=-1,this._handler=e,this._lastSentReq=0,this._pendingReplies=Object.create(null),this._pendingEmitters=new Map,this._pendingEvents=new Map}setWorkerId(e){this._workerId=e}sendMessage(e,t,i){const n=String(++this._lastSentReq);return new Promise((s,r)=>{this._pendingReplies[n]={resolve:s,reject:r},this._send(new KEe(this._workerId,n,e,t,i))})}listen(e,t,i){let n=null;const s=new Y({onWillAddFirstListener:()=>{n=String(++this._lastSentReq),this._pendingEmitters.set(n,s),this._send(new GEe(this._workerId,n,e,t,i))},onDidRemoveLastListener:()=>{this._pendingEmitters.delete(n),this._send(new ZEe(this._workerId,n)),n=null}});return s.event}handleMessage(e){!e||!e.vsWorker||this._workerId!==-1&&e.vsWorker!==this._workerId||this._handleMessage(e)}createProxyToRemoteChannel(e,t){const i={get:(n,s)=>(typeof s=="string"&&!n[s]&&(Wce(s)?n[s]=r=>this.listen(e,s,r):Bce(s)?n[s]=this.listen(e,s,void 0):s.charCodeAt(0)===36&&(n[s]=async(...r)=>(await(t==null?void 0:t()),this.sendMessage(e,s,r)))),n[s])};return new Proxy(Object.create(null),i)}_handleMessage(e){switch(e.type){case 1:return this._handleReplyMessage(e);case 0:return this._handleRequestMessage(e);case 2:return this._handleSubscribeEventMessage(e);case 3:return this._handleEventMessage(e);case 4:return this._handleUnsubscribeEventMessage(e)}}_handleReplyMessage(e){if(!this._pendingReplies[e.seq]){console.warn("Got reply to unknown seq");return}const t=this._pendingReplies[e.seq];if(delete this._pendingReplies[e.seq],e.err){let i=e.err;e.err.$isError&&(i=new Error,i.name=e.err.name,i.message=e.err.message,i.stack=e.err.stack),t.reject(i);return}t.resolve(e.res)}_handleRequestMessage(e){const t=e.req;this._handler.handleMessage(e.channel,e.method,e.args).then(n=>{this._send(new aie(this._workerId,t,n,void 0))},n=>{n.detail instanceof Error&&(n.detail=Mte(n.detail)),this._send(new aie(this._workerId,t,void 0,Mte(n)))})}_handleSubscribeEventMessage(e){const t=e.req,i=this._handler.handleEvent(e.channel,e.eventName,e.arg)(n=>{this._send(new YEe(this._workerId,t,n))});this._pendingEvents.set(t,i)}_handleEventMessage(e){if(!this._pendingEmitters.has(e.req)){console.warn("Got event for unknown req");return}this._pendingEmitters.get(e.req).fire(e.event)}_handleUnsubscribeEventMessage(e){if(!this._pendingEvents.has(e.req)){console.warn("Got unsubscribe for unknown req");return}this._pendingEvents.get(e.req).dispose(),this._pendingEvents.delete(e.req)}_send(e){const t=[];if(e.type===0)for(let i=0;i<e.args.length;i++)e.args[i]instanceof ArrayBuffer&&t.push(e.args[i]);else e.type===1&&e.res instanceof ArrayBuffer&&t.push(e.res);this._handler.sendMessage(e,t)}}class QEe extends X{constructor(e,t){super(),this._localChannels=new Map,this._worker=this._register(e.create({amdModuleId:"vs/base/common/worker/simpleWorker",esmModuleLocation:t.esmModuleLocation,label:t.label},s=>{this._protocol.handleMessage(s)},s=>{wt(s)})),this._protocol=new XEe({sendMessage:(s,r)=>{this._worker.postMessage(s,r)},handleMessage:(s,r,a)=>this._handleMessage(s,r,a),handleEvent:(s,r,a)=>this._handleEvent(s,r,a)}),this._protocol.setWorkerId(this._worker.getId());let i=null;const n=globalThis.require;typeof n<"u"&&typeof n.getConfig=="function"?i=n.getConfig():typeof globalThis.requirejs<"u"&&(i=globalThis.requirejs.s.contexts._.config),this._onModuleLoaded=this._protocol.sendMessage(oie,qEe,[this._worker.getId(),JSON.parse(JSON.stringify(i)),t.amdModuleId]),this.proxy=this._protocol.createProxyToRemoteChannel(oie,async()=>{await this._onModuleLoaded}),this._onModuleLoaded.catch(s=>{this._onError("Worker failed to load "+t.amdModuleId,s)})}_handleMessage(e,t,i){const n=this._localChannels.get(e);if(!n)return Promise.reject(new Error(`Missing channel ${e} on main thread`));if(typeof n[t]!="function")return Promise.reject(new Error(`Missing method ${t} on main thread channel ${e}`));try{return Promise.resolve(n[t].apply(n,i))}catch(s){return Promise.reject(s)}}_handleEvent(e,t,i){const n=this._localChannels.get(e);if(!n)throw new Error(`Missing channel ${e} on main thread`);if(Wce(t)){const s=n[t].call(n,i);if(typeof s!="function")throw new Error(`Missing dynamic event ${t} on main thread channel ${e}.`);return s}if(Bce(t)){const s=n[t];if(typeof s!="function")throw new Error(`Missing event ${t} on main thread channel ${e}.`);return s}throw new Error(`Malformed event name ${t}`)}setChannel(e,t){this._localChannels.set(e,t)}_onError(e,t){console.error(e),console.info(t)}}function Bce(o){return o[0]==="o"&&o[1]==="n"&&gh(o.charCodeAt(2))}function Wce(o){return/^onDynamic/.test(o)&&gh(o.charCodeAt(9))}function Ag(o,e){var i;const t=globalThis.MonacoEnvironment;if(t!=null&&t.createTrustedTypesPolicy)try{return t.createTrustedTypesPolicy(o,e)}catch(n){wt(n);return}try{return(i=globalThis.trustedTypes)==null?void 0:i.createPolicy(o,e)}catch(n){wt(n);return}}let Iw;typeof self=="object"&&self.constructor&&self.constructor.name==="DedicatedWorkerGlobalScope"&&globalThis.workerttPolicy!==void 0?Iw=globalThis.workerttPolicy:Iw=Ag("defaultWorkerFactory",{createScriptURL:o=>o});function JEe(o,e){const t=globalThis.MonacoEnvironment;if(t){if(typeof t.getWorker=="function")return t.getWorker("workerMain.js",e);if(typeof t.getWorkerUrl=="function"){const i=t.getWorkerUrl("workerMain.js",e);return new Worker(Iw?Iw.createScriptURL(i):i,{name:e,type:"module"})}}if(o){const i=eIe(e,o.toString(!0)),n=new Worker(Iw?Iw.createScriptURL(i):i,{name:e,type:"module"});return tIe(n)}throw new Error("You must define a function MonacoEnvironment.getWorkerUrl or MonacoEnvironment.getWorker")}function eIe(o,e,t){if(!(/^((http:)|(https:)|(file:)|(vscode-file:))/.test(e)&&e.substring(0,globalThis.origin.length)!==globalThis.origin)){const s=e.lastIndexOf("?"),r=e.lastIndexOf("#",s),a=s>0?new URLSearchParams(e.substring(s+1,~r?r:void 0)):new URLSearchParams;lV.addSearchParam(a,!0,!0),a.toString()?e=`${e}?${a.toString()}#${o}`:e=`${e}#${o}`}const n=new Blob([rd([`/*${o}*/`,void 0,`globalThis._VSCODE_NLS_MESSAGES = ${JSON.stringify(Cle())};`,`globalThis._VSCODE_NLS_LANGUAGE = ${JSON.stringify(yq())};`,`globalThis._VSCODE_FILE_ROOT = '${globalThis._VSCODE_FILE_ROOT}';`,"const ttPolicy = globalThis.trustedTypes?.createPolicy('defaultWorkerFactory', { createScriptURL: value => value });","globalThis.workerttPolicy = ttPolicy;",`await import(ttPolicy?.createScriptURL('${e}') ?? '${e}');`,"globalThis.postMessage({ type: 'vscode-worker-ready' });",`/*${o}*/`]).join("")],{type:"application/javascript"});return URL.createObjectURL(n)}function tIe(o){return new Promise((e,t)=>{o.onmessage=function(i){i.data.type==="vscode-worker-ready"&&(o.onmessage=null,e(o))},o.onerror=t})}function iIe(o){return typeof o.then=="function"}class nIe extends X{constructor(e,t,i,n,s,r){super(),this.id=i,this.label=n;const a=JEe(e,n);iIe(a)?this.worker=a:this.worker=Promise.resolve(a),this.postMessage(t,[]),this.worker.then(l=>{l.onmessage=function(c){s(c.data)},l.onmessageerror=r,typeof l.addEventListener=="function"&&l.addEventListener("error",r)}),this._register(it(()=>{var l;(l=this.worker)==null||l.then(c=>{c.onmessage=null,c.onmessageerror=null,c.removeEventListener("error",r),c.terminate()}),this.worker=null}))}getId(){return this.id}postMessage(e,t){var i;(i=this.worker)==null||i.then(n=>{try{n.postMessage(e,t)}catch(s){wt(s),wt(new Error(`FAILED to post message to '${this.label}'-worker`,{cause:s}))}})}}class sIe{constructor(e,t){this.amdModuleId=e,this.label=t,this.esmModuleLocation=$F.asBrowserUri(`${e}.esm.js`)}}const u2=class u2{constructor(){this._webWorkerFailedBeforeError=!1}create(e,t,i){const n=++u2.LAST_WORKER_ID;if(this._webWorkerFailedBeforeError)throw this._webWorkerFailedBeforeError;return new nIe(e.esmModuleLocation,e.amdModuleId,n,e.label||"anonymous"+n,t,s=>{mV(s),this._webWorkerFailedBeforeError=s,i(s)})}};u2.LAST_WORKER_ID=0;let _V=u2;function oIe(o,e){const t=typeof o=="string"?new sIe(o,e):o;return new QEe(new _V,t)}var Es;(function(o){o[o.None=0]="None",o[o.Indent=1]="Indent",o[o.IndentOutdent=2]="IndentOutdent",o[o.Outdent=3]="Outdent"})(Es||(Es={}));class QH{constructor(e){if(this._neutralCharacter=null,this._neutralCharacterSearched=!1,this.open=e.open,this.close=e.close,this._inString=!0,this._inComment=!0,this._inRegEx=!0,Array.isArray(e.notIn))for(let t=0,i=e.notIn.length;t<i;t++)switch(e.notIn[t]){case"string":this._inString=!1;break;case"comment":this._inComment=!1;break;case"regex":this._inRegEx=!1;break}}isOK(e){switch(e){case 0:return!0;case 1:return this._inComment;case 2:return this._inString;case 3:return this._inRegEx}}shouldAutoClose(e,t){if(e.getTokenCount()===0)return!0;const i=e.findTokenIndexAtOffset(t-2),n=e.getStandardTokenType(i);return this.isOK(n)}_findNeutralCharacterInRange(e,t){for(let i=e;i<=t;i++){const n=String.fromCharCode(i);if(!this.open.includes(n)&&!this.close.includes(n))return n}return null}findNeutralCharacter(){return this._neutralCharacterSearched||(this._neutralCharacterSearched=!0,this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(48,57)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(97,122)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(65,90))),this._neutralCharacter}}class rIe{constructor(e){this.autoClosingPairsOpenByStart=new Map,this.autoClosingPairsOpenByEnd=new Map,this.autoClosingPairsCloseByStart=new Map,this.autoClosingPairsCloseByEnd=new Map,this.autoClosingPairsCloseSingleChar=new Map;for(const t of e)cx(this.autoClosingPairsOpenByStart,t.open.charAt(0),t),cx(this.autoClosingPairsOpenByEnd,t.open.charAt(t.open.length-1),t),cx(this.autoClosingPairsCloseByStart,t.close.charAt(0),t),cx(this.autoClosingPairsCloseByEnd,t.close.charAt(t.close.length-1),t),t.close.length===1&&t.open.length===1&&cx(this.autoClosingPairsCloseSingleChar,t.close,t)}}function cx(o,e,t){o.has(e)?o.get(e).push(t):o.set(e,[t])}const t1=class t1{constructor(e){if(e.autoClosingPairs?this._autoClosingPairs=e.autoClosingPairs.map(t=>new QH(t)):e.brackets?this._autoClosingPairs=e.brackets.map(t=>new QH({open:t[0],close:t[1]})):this._autoClosingPairs=[],e.__electricCharacterSupport&&e.__electricCharacterSupport.docComment){const t=e.__electricCharacterSupport.docComment;this._autoClosingPairs.push(new QH({open:t.open,close:t.close||""}))}this._autoCloseBeforeForQuotes=typeof e.autoCloseBefore=="string"?e.autoCloseBefore:t1.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_QUOTES,this._autoCloseBeforeForBrackets=typeof e.autoCloseBefore=="string"?e.autoCloseBefore:t1.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_BRACKETS,this._surroundingPairs=e.surroundingPairs||this._autoClosingPairs}getAutoClosingPairs(){return this._autoClosingPairs}getAutoCloseBeforeSet(e){return e?this._autoCloseBeforeForQuotes:this._autoCloseBeforeForBrackets}getSurroundingPairs(){return this._surroundingPairs}};t1.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_QUOTES=`;:.,=}])> 
	`,t1.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_BRACKETS=`'"\`;:.,=}])> 
	`;let vV=t1;function Av(o,e){const t=o.getCount(),i=o.findTokenIndexAtOffset(e),n=o.getLanguageId(i);let s=i;for(;s+1<t&&o.getLanguageId(s+1)===n;)s++;let r=i;for(;r>0&&o.getLanguageId(r-1)===n;)r--;return new aIe(o,n,r,s+1,o.getStartOffset(r),o.getEndOffset(s))}class aIe{constructor(e,t,i,n,s,r){this._scopedLineTokensBrand=void 0,this._actual=e,this.languageId=t,this._firstTokenIndex=i,this._lastTokenIndex=n,this.firstCharOffset=s,this._lastCharOffset=r,this.languageIdCodec=e.languageIdCodec}getLineContent(){return this._actual.getLineContent().substring(this.firstCharOffset,this._lastCharOffset)}getLineLength(){return this._lastCharOffset-this.firstCharOffset}getActualLineContentBefore(e){return this._actual.getLineContent().substring(0,this.firstCharOffset+e)}getTokenCount(){return this._lastTokenIndex-this._firstTokenIndex}findTokenIndexAtOffset(e){return this._actual.findTokenIndexAtOffset(e+this.firstCharOffset)-this._firstTokenIndex}getStandardTokenType(e){return this._actual.getStandardTokenType(e+this._firstTokenIndex)}toIViewLineTokens(){return this._actual.sliceAndInflate(this.firstCharOffset,this._lastCharOffset,0)}}function Xu(o){return(o&3)!==0}const lie=typeof Buffer<"u";let JH;class r4{static wrap(e){return lie&&!Buffer.isBuffer(e)&&(e=Buffer.from(e.buffer,e.byteOffset,e.byteLength)),new r4(e)}constructor(e){this.buffer=e,this.byteLength=this.buffer.byteLength}toString(){return lie?this.buffer.toString():(JH||(JH=new TextDecoder),JH.decode(this.buffer))}}function lIe(o,e){return o[e+0]<<0>>>0|o[e+1]<<8>>>0}function cIe(o,e,t){o[t+0]=e&255,e=e>>>8,o[t+1]=e&255}function Vd(o,e){return o[e]*2**24+o[e+1]*2**16+o[e+2]*2**8+o[e+3]}function zd(o,e,t){o[t+3]=e,e=e>>>8,o[t+2]=e,e=e>>>8,o[t+1]=e,e=e>>>8,o[t]=e}function cie(o,e){return o[e]}function die(o,e,t){o[t]=e}let e7;function Hce(){return e7||(e7=new TextDecoder("UTF-16LE")),e7}let t7;function dIe(){return t7||(t7=new TextDecoder("UTF-16BE")),t7}let i7;function Vce(){return i7||(i7=kle()?Hce():dIe()),i7}function uIe(o,e,t){const i=new Uint16Array(o.buffer,e,t);return t>0&&(i[0]===65279||i[0]===65534)?hIe(o,e,t):Hce().decode(i)}function hIe(o,e,t){const i=[];let n=0;for(let s=0;s<t;s++){const r=lIe(o,e);e+=2,i[n++]=String.fromCharCode(r)}return i.join("")}class qS{constructor(e){this._capacity=e|0,this._buffer=new Uint16Array(this._capacity),this._completedStrings=null,this._bufferLength=0}reset(){this._completedStrings=null,this._bufferLength=0}build(){return this._completedStrings!==null?(this._flushBuffer(),this._completedStrings.join("")):this._buildBuffer()}_buildBuffer(){if(this._bufferLength===0)return"";const e=new Uint16Array(this._buffer.buffer,0,this._bufferLength);return Vce().decode(e)}_flushBuffer(){const e=this._buildBuffer();this._bufferLength=0,this._completedStrings===null?this._completedStrings=[e]:this._completedStrings[this._completedStrings.length]=e}appendCharCode(e){const t=this._capacity-this._bufferLength;t<=1&&(t===0||qs(e))&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendASCIICharCode(e){this._bufferLength===this._capacity&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendString(e){const t=e.length;if(this._bufferLength+t>=this._capacity){this._flushBuffer(),this._completedStrings[this._completedStrings.length]=e;return}for(let i=0;i<t;i++)this._buffer[this._bufferLength++]=e.charCodeAt(i)}}class LA{constructor(e,t,i,n,s,r){this._richEditBracketBrand=void 0,this.languageId=e,this.index=t,this.open=i,this.close=n,this.forwardRegex=s,this.reversedRegex=r,this._openSet=LA._toSet(this.open),this._closeSet=LA._toSet(this.close)}isOpen(e){return this._openSet.has(e)}isClose(e){return this._closeSet.has(e)}static _toSet(e){const t=new Set;for(const i of e)t.add(i);return t}}function fIe(o){const e=o.length;o=o.map(r=>[r[0].toLowerCase(),r[1].toLowerCase()]);const t=[];for(let r=0;r<e;r++)t[r]=r;const i=(r,a)=>{const[l,c]=r,[u,f]=a;return l===u||l===f||c===u||c===f},n=(r,a)=>{const l=Math.min(r,a),c=Math.max(r,a);for(let u=0;u<e;u++)t[u]===c&&(t[u]=l)};for(let r=0;r<e;r++){const a=o[r];for(let l=r+1;l<e;l++){const c=o[l];i(a,c)&&n(t[r],t[l])}}const s=[];for(let r=0;r<e;r++){const a=[],l=[];for(let c=0;c<e;c++)if(t[c]===r){const[u,f]=o[c];a.push(u),l.push(f)}a.length>0&&s.push({open:a,close:l})}return s}class gIe{constructor(e,t){this._richEditBracketsBrand=void 0;const i=fIe(t);this.brackets=i.map((n,s)=>new LA(e,s,n.open,n.close,pIe(n.open,n.close,i,s),mIe(n.open,n.close,i,s))),this.forwardRegex=_Ie(this.brackets),this.reversedRegex=vIe(this.brackets),this.textIsBracket={},this.textIsOpenBracket={},this.maxBracketLength=0;for(const n of this.brackets){for(const s of n.open)this.textIsBracket[s]=n,this.textIsOpenBracket[s]=!0,this.maxBracketLength=Math.max(this.maxBracketLength,s.length);for(const s of n.close)this.textIsBracket[s]=n,this.textIsOpenBracket[s]=!1,this.maxBracketLength=Math.max(this.maxBracketLength,s.length)}}}function zce(o,e,t,i){for(let n=0,s=e.length;n<s;n++){if(n===t)continue;const r=e[n];for(const a of r.open)a.indexOf(o)>=0&&i.push(a);for(const a of r.close)a.indexOf(o)>=0&&i.push(a)}}function Uce(o,e){return o.length-e.length}function a4(o){if(o.length<=1)return o;const e=[],t=new Set;for(const i of o)t.has(i)||(e.push(i),t.add(i));return e}function pIe(o,e,t,i){let n=[];n=n.concat(o),n=n.concat(e);for(let s=0,r=n.length;s<r;s++)zce(n[s],t,i,n);return n=a4(n),n.sort(Uce),n.reverse(),eI(n)}function mIe(o,e,t,i){let n=[];n=n.concat(o),n=n.concat(e);for(let s=0,r=n.length;s<r;s++)zce(n[s],t,i,n);return n=a4(n),n.sort(Uce),n.reverse(),eI(n.map(Xq))}function _Ie(o){let e=[];for(const t of o){for(const i of t.open)e.push(i);for(const i of t.close)e.push(i)}return e=a4(e),eI(e)}function vIe(o){let e=[];for(const t of o){for(const i of t.open)e.push(i);for(const i of t.close)e.push(i)}return e=a4(e),eI(e.map(Xq))}function bIe(o){const e=/^[\w ]+$/.test(o);return o=Ul(o),e?`\\b${o}\\b`:o}function eI(o,e){const t=`(${o.map(bIe).join(")|(")})`;return Zle(t,!0,e)}const Xq=function(){function o(i){const n=new Uint16Array(i.length);let s=0;for(let r=i.length-1;r>=0;r--)n[s++]=i.charCodeAt(r);return Vce().decode(n)}let e=null,t=null;return function(n){return e!==n&&(e=n,t=o(e)),t}}();class jc{static _findPrevBracketInText(e,t,i,n){const s=i.match(e);if(!s)return null;const r=i.length-(s.index||0),a=s[0].length,l=n+r;return new M(t,l-a+1,t,l+1)}static findPrevBracketInRange(e,t,i,n,s){const a=Xq(i).substring(i.length-s,i.length-n);return this._findPrevBracketInText(e,t,a,n)}static findNextBracketInText(e,t,i,n){const s=i.match(e);if(!s)return null;const r=s.index||0,a=s[0].length;if(a===0)return null;const l=n+r;return new M(t,l+1,t,l+1+a)}static findNextBracketInRange(e,t,i,n,s){const r=i.substring(n,s);return this.findNextBracketInText(e,t,r,n)}}class CIe{constructor(e){this._richEditBrackets=e}getElectricCharacters(){const e=[];if(this._richEditBrackets)for(const t of this._richEditBrackets.brackets)for(const i of t.close){const n=i.charAt(i.length-1);e.push(n)}return bg(e)}onElectricCharacter(e,t,i){if(!this._richEditBrackets||this._richEditBrackets.brackets.length===0)return null;const n=t.findTokenIndexAtOffset(i-1);if(Xu(t.getStandardTokenType(n)))return null;const s=this._richEditBrackets.reversedRegex,r=t.getLineContent().substring(0,i-1)+e,a=jc.findPrevBracketInRange(s,1,r,0,r.length);if(!a)return null;const l=r.substring(a.startColumn-1,a.endColumn-1).toLowerCase();if(this._richEditBrackets.textIsOpenBracket[l])return null;const u=t.getActualLineContentBefore(a.startColumn-1);return/^\s*$/.test(u)?{matchOpenBracket:l}:null}}function nR(o){return o.global&&(o.lastIndex=0),!0}class yIe{constructor(e){this._indentationRules=e}shouldIncrease(e){return!!(this._indentationRules&&this._indentationRules.increaseIndentPattern&&nR(this._indentationRules.increaseIndentPattern)&&this._indentationRules.increaseIndentPattern.test(e))}shouldDecrease(e){return!!(this._indentationRules&&this._indentationRules.decreaseIndentPattern&&nR(this._indentationRules.decreaseIndentPattern)&&this._indentationRules.decreaseIndentPattern.test(e))}shouldIndentNextLine(e){return!!(this._indentationRules&&this._indentationRules.indentNextLinePattern&&nR(this._indentationRules.indentNextLinePattern)&&this._indentationRules.indentNextLinePattern.test(e))}shouldIgnore(e){return!!(this._indentationRules&&this._indentationRules.unIndentedLinePattern&&nR(this._indentationRules.unIndentedLinePattern)&&this._indentationRules.unIndentedLinePattern.test(e))}getIndentMetadata(e){let t=0;return this.shouldIncrease(e)&&(t+=1),this.shouldDecrease(e)&&(t+=2),this.shouldIndentNextLine(e)&&(t+=4),this.shouldIgnore(e)&&(t+=8),t}}class Tw{constructor(e){e=e||{},e.brackets=e.brackets||[["(",")"],["{","}"],["[","]"]],this._brackets=[],e.brackets.forEach(t=>{const i=Tw._createOpenBracketRegExp(t[0]),n=Tw._createCloseBracketRegExp(t[1]);i&&n&&this._brackets.push({open:t[0],openRegExp:i,close:t[1],closeRegExp:n})}),this._regExpRules=e.onEnterRules||[]}onEnter(e,t,i,n){if(e>=3)for(let s=0,r=this._regExpRules.length;s<r;s++){const a=this._regExpRules[s];if([{reg:a.beforeText,text:i},{reg:a.afterText,text:n},{reg:a.previousLineText,text:t}].every(c=>c.reg?(c.reg.lastIndex=0,c.reg.test(c.text)):!0))return a.action}if(e>=2&&i.length>0&&n.length>0)for(let s=0,r=this._brackets.length;s<r;s++){const a=this._brackets[s];if(a.openRegExp.test(i)&&a.closeRegExp.test(n))return{indentAction:Es.IndentOutdent}}if(e>=2&&i.length>0){for(let s=0,r=this._brackets.length;s<r;s++)if(this._brackets[s].openRegExp.test(i))return{indentAction:Es.Indent}}return null}static _createOpenBracketRegExp(e){let t=Ul(e);return/\B/.test(t.charAt(0))||(t="\\b"+t),t+="\\s*$",Tw._safeRegExp(t)}static _createCloseBracketRegExp(e){let t=Ul(e);return/\B/.test(t.charAt(t.length-1))||(t=t+"\\b"),t="^\\s*"+t,Tw._safeRegExp(t)}static _safeRegExp(e){try{return new RegExp(e)}catch(t){return wt(t),null}}}const Ht=Gt("configurationService");function bV(o,e){const t=Object.create(null);for(const i in o)$ce(t,i,o[i],e);return t}function $ce(o,e,t,i){const n=e.split("."),s=n.pop();let r=o;for(let a=0;a<n.length;a++){const l=n[a];let c=r[l];switch(typeof c){case"undefined":c=r[l]=Object.create(null);break;case"object":if(c===null){i(`Ignoring ${e} as ${n.slice(0,a+1).join(".")} is null`);return}break;default:i(`Ignoring ${e} as ${n.slice(0,a+1).join(".")} is ${JSON.stringify(c)}`);return}r=c}if(typeof r=="object"&&r!==null)try{r[s]=t}catch{i(`Ignoring ${e} as ${n.join(".")} is ${JSON.stringify(r)}`)}else i(`Ignoring ${e} as ${n.join(".")} is ${JSON.stringify(r)}`)}function wIe(o,e){const t=e.split(".");jce(o,t)}function jce(o,e){const t=e.shift();if(e.length===0){delete o[t];return}if(Object.keys(o).indexOf(t)!==-1){const i=o[t];typeof i=="object"&&!Array.isArray(i)&&(jce(i,e),Object.keys(i).length===0&&delete o[t])}}function uie(o,e,t){function i(r,a){let l=r;for(const c of a){if(typeof l!="object"||l===null)return;l=l[c]}return l}const n=e.split("."),s=i(o,n);return typeof s>"u"?t:s}function SIe(o){return o.replace(/[\[\]]/g,"")}const In=Gt("languageService");class ph{constructor(e,t=[],i=!1){this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=i}}const qce=[];function ei(o,e,t){e instanceof ph||(e=new ph(e,[],!!t)),qce.push([o,e])}function hie(){return qce}const ss=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list"}),l4={JSONContribution:"base.contributions.json"};function LIe(o){return o.length>0&&o.charAt(o.length-1)==="#"?o.substring(0,o.length-1):o}class xIe{constructor(){this._onDidChangeSchema=new Y,this.schemasById={}}registerSchema(e,t){this.schemasById[LIe(e)]=t,this._onDidChangeSchema.fire(e)}notifySchemaChanged(e){this._onDidChangeSchema.fire(e)}}const kIe=new xIe;Pn.add(l4.JSONContribution,kIe);const pd={Configuration:"base.contributions.configuration"},dx="vscode://schemas/settings/resourceLanguage",fie=Pn.as(l4.JSONContribution);class DIe{constructor(){this.registeredConfigurationDefaults=[],this.overrideIdentifiers=new Set,this._onDidSchemaChange=new Y,this._onDidUpdateConfiguration=new Y,this.configurationDefaultsOverrides=new Map,this.defaultLanguageConfigurationOverridesNode={id:"defaultOverrides",title:v("defaultLanguageConfigurationOverrides.title","Default Language Configuration Overrides"),properties:{}},this.configurationContributors=[this.defaultLanguageConfigurationOverridesNode],this.resourceLanguageSettingsSchema={properties:{},patternProperties:{},additionalProperties:!0,allowTrailingCommas:!0,allowComments:!0},this.configurationProperties={},this.policyConfigurations=new Map,this.excludedConfigurationProperties={},fie.registerSchema(dx,this.resourceLanguageSettingsSchema),this.registerOverridePropertyPatternKey()}registerConfiguration(e,t=!0){this.registerConfigurations([e],t)}registerConfigurations(e,t=!0){const i=new Set;this.doRegisterConfigurations(e,t,i),fie.registerSchema(dx,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:i})}registerDefaultConfigurations(e){const t=new Set;this.doRegisterDefaultConfigurations(e,t),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:t,defaultsOverrides:!0})}doRegisterDefaultConfigurations(e,t){this.registeredConfigurationDefaults.push(...e);const i=[];for(const{overrides:n,source:s}of e)for(const r in n){t.add(r);const a=this.configurationDefaultsOverrides.get(r)??this.configurationDefaultsOverrides.set(r,{configurationDefaultOverrides:[]}).get(r),l=n[r];if(a.configurationDefaultOverrides.push({value:l,source:s}),Hm.test(r)){const c=this.mergeDefaultConfigurationsForOverrideIdentifier(r,l,s,a.configurationDefaultOverrideValue);if(!c)continue;a.configurationDefaultOverrideValue=c,this.updateDefaultOverrideProperty(r,c,s),i.push(...xA(r))}else{const c=this.mergeDefaultConfigurationsForConfigurationProperty(r,l,s,a.configurationDefaultOverrideValue);if(!c)continue;a.configurationDefaultOverrideValue=c;const u=this.configurationProperties[r];u&&(this.updatePropertyDefaultValue(r,u),this.updateSchema(r,u))}}this.doRegisterOverrideIdentifiers(i)}updateDefaultOverrideProperty(e,t,i){const n={type:"object",default:t.value,description:v("defaultLanguageConfiguration.description","Configure settings to be overridden for the {0} language.",SIe(e)),$ref:dx,defaultDefaultValue:t.value,source:i,defaultValueSource:i};this.configurationProperties[e]=n,this.defaultLanguageConfigurationOverridesNode.properties[e]=n}mergeDefaultConfigurationsForOverrideIdentifier(e,t,i,n){const s=(n==null?void 0:n.value)||{},r=(n==null?void 0:n.source)??new Map;if(!(r instanceof Map)){console.error("objectConfigurationSources is not a Map");return}for(const a of Object.keys(t)){const l=t[a];if(ao(l)&&(yr(s[a])||ao(s[a]))){if(s[a]={...s[a]??{},...l},i)for(const u in l)r.set(`${a}.${u}`,i)}else s[a]=l,i?r.set(a,i):r.delete(a)}return{value:s,source:r}}mergeDefaultConfigurationsForConfigurationProperty(e,t,i,n){const s=this.configurationProperties[e],r=(n==null?void 0:n.value)??(s==null?void 0:s.defaultDefaultValue);let a=i;if(ao(t)&&(s!==void 0&&s.type==="object"||s===void 0&&(yr(r)||ao(r)))){if(a=(n==null?void 0:n.source)??new Map,!(a instanceof Map)){console.error("defaultValueSource is not a Map");return}for(const c in t)i&&a.set(`${e}.${c}`,i);t={...ao(r)?r:{},...t}}return{value:t,source:a}}registerOverrideIdentifiers(e){this.doRegisterOverrideIdentifiers(e),this._onDidSchemaChange.fire()}doRegisterOverrideIdentifiers(e){for(const t of e)this.overrideIdentifiers.add(t);this.updateOverridePropertyPatternKey()}doRegisterConfigurations(e,t,i){e.forEach(n=>{this.validateAndRegisterProperties(n,t,n.extensionInfo,n.restrictedProperties,void 0,i),this.configurationContributors.push(n),this.registerJSONConfiguration(n)})}validateAndRegisterProperties(e,t=!0,i,n,s=3,r){var c;s=Rl(e.scope)?s:e.scope;const a=e.properties;if(a)for(const u in a){const f=a[u];if(t&&TIe(u,f)){delete a[u];continue}if(f.source=i,f.defaultDefaultValue=a[u].default,this.updatePropertyDefaultValue(u,f),Hm.test(u)?f.scope=void 0:(f.scope=Rl(f.scope)?s:f.scope,f.restricted=Rl(f.restricted)?!!(n!=null&&n.includes(u)):f.restricted),a[u].hasOwnProperty("included")&&!a[u].included){this.excludedConfigurationProperties[u]=a[u],delete a[u];continue}else this.configurationProperties[u]=a[u],(c=a[u].policy)!=null&&c.name&&this.policyConfigurations.set(a[u].policy.name,u);!a[u].deprecationMessage&&a[u].markdownDeprecationMessage&&(a[u].deprecationMessage=a[u].markdownDeprecationMessage),r.add(u)}const l=e.allOf;if(l)for(const u of l)this.validateAndRegisterProperties(u,t,i,n,s,r)}getConfigurationProperties(){return this.configurationProperties}getPolicyConfigurations(){return this.policyConfigurations}registerJSONConfiguration(e){const t=i=>{const n=i.properties;if(n)for(const r in n)this.updateSchema(r,n[r]);const s=i.allOf;s==null||s.forEach(t)};t(e)}updateSchema(e,t){switch(t.scope){case 1:break;case 2:break;case 6:break;case 3:break;case 4:break;case 5:this.resourceLanguageSettingsSchema.properties[e]=t;break}}updateOverridePropertyPatternKey(){for(const e of this.overrideIdentifiers.values()){const t=`[${e}]`,i={type:"object",description:v("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),errorMessage:v("overrideSettings.errorMessage","This setting does not support per-language configuration."),$ref:dx};this.updatePropertyDefaultValue(t,i)}}registerOverridePropertyPatternKey(){v("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),v("overrideSettings.errorMessage","This setting does not support per-language configuration."),this._onDidSchemaChange.fire()}updatePropertyDefaultValue(e,t){var r;const i=(r=this.configurationDefaultsOverrides.get(e))==null?void 0:r.configurationDefaultOverrideValue;let n,s;i&&(!t.disallowConfigurationDefault||!i.source)&&(n=i.value,s=i.source),yr(n)&&(n=t.defaultDefaultValue,s=void 0),yr(n)&&(n=IIe(t.type)),t.default=n,t.defaultValueSource=s}}const Kce="\\[([^\\]]+)\\]",gie=new RegExp(Kce,"g"),EIe=`^(${Kce})+$`,Hm=new RegExp(EIe);function xA(o){const e=[];if(Hm.test(o)){let t=gie.exec(o);for(;t!=null&&t.length;){const i=t[1].trim();i&&e.push(i),t=gie.exec(o)}}return bg(e)}function IIe(o){switch(Array.isArray(o)?o[0]:o){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}const pM=new DIe;Pn.add(pd.Configuration,pM);function TIe(o,e){var t,i,n,s;return o.trim()?Hm.test(o)?v("config.property.languageDefault","Cannot register '{0}'. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.",o):pM.getConfigurationProperties()[o]!==void 0?v("config.property.duplicate","Cannot register '{0}'. This property is already registered.",o):(t=e.policy)!=null&&t.name&&pM.getPolicyConfigurations().get((i=e.policy)==null?void 0:i.name)!==void 0?v("config.policy.duplicate","Cannot register '{0}'. The associated policy {1} is already registered with {2}.",o,(n=e.policy)==null?void 0:n.name,pM.getPolicyConfigurations().get((s=e.policy)==null?void 0:s.name)):null:v("config.property.empty","Cannot register an empty property")}const NIe={ModesRegistry:"editor.modesRegistry"};class RIe{constructor(){this._onDidChangeLanguages=new Y,this.onDidChangeLanguages=this._onDidChangeLanguages.event,this._languages=[]}registerLanguage(e){return this._languages.push(e),this._onDidChangeLanguages.fire(void 0),{dispose:()=>{for(let t=0,i=this._languages.length;t<i;t++)if(this._languages[t]===e){this._languages.splice(t,1);return}}}}getLanguages(){return this._languages}}const iS=new RIe;Pn.add(NIe.ModesRegistry,iS);const Xr="plaintext",MIe=".txt";iS.registerLanguage({id:Xr,extensions:[MIe],aliases:[v("plainText.alias","Plain Text"),"text"],mimetypes:[ss.text]});Pn.as(pd.Configuration).registerDefaultConfigurations([{overrides:{"[plaintext]":{"editor.unicodeHighlight.ambiguousCharacters":!1,"editor.unicodeHighlight.invisibleCharacters":!1}}}]);class AIe{constructor(e,t){this.languageId=e;const i=t.brackets?pie(t.brackets):[],n=new Bte(a=>{const l=new Set;return{info:new PIe(this,a,l),closing:l}}),s=new Bte(a=>{const l=new Set,c=new Set;return{info:new OIe(this,a,l,c),opening:l,openingColorized:c}});for(const[a,l]of i){const c=n.get(a),u=s.get(l);c.closing.add(u.info),u.opening.add(c.info)}const r=t.colorizedBracketPairs?pie(t.colorizedBracketPairs):i.filter(a=>!(a[0]==="<"&&a[1]===">"));for(const[a,l]of r){const c=n.get(a),u=s.get(l);c.closing.add(u.info),u.openingColorized.add(c.info),u.opening.add(c.info)}this._openingBrackets=new Map([...n.cachedValues].map(([a,l])=>[a,l.info])),this._closingBrackets=new Map([...s.cachedValues].map(([a,l])=>[a,l.info]))}get openingBrackets(){return[...this._openingBrackets.values()]}get closingBrackets(){return[...this._closingBrackets.values()]}getOpeningBracketInfo(e){return this._openingBrackets.get(e)}getClosingBracketInfo(e){return this._closingBrackets.get(e)}getBracketInfo(e){return this.getOpeningBracketInfo(e)||this.getClosingBracketInfo(e)}getBracketRegExp(e){const t=Array.from([...this._openingBrackets.keys(),...this._closingBrackets.keys()]);return eI(t,e)}}function pie(o){return o.filter(([e,t])=>e!==""&&t!=="")}class Gce{constructor(e,t){this.config=e,this.bracketText=t}get languageId(){return this.config.languageId}}class PIe extends Gce{constructor(e,t,i){super(e,t),this.openedBrackets=i,this.isOpeningBracket=!0}}class OIe extends Gce{constructor(e,t,i,n){super(e,t),this.openingBrackets=i,this.openingColorizedBrackets=n,this.isOpeningBracket=!1}closes(e){return e.config!==this.config?!1:this.openingBrackets.has(e)}closesColorized(e){return e.config!==this.config?!1:this.openingColorizedBrackets.has(e)}getOpeningBrackets(){return[...this.openingBrackets]}}var FIe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},mie=function(o,e){return function(t,i){e(t,i,o)}};class n7{constructor(e){this.languageId=e}affects(e){return this.languageId?this.languageId===e:!0}}const On=Gt("languageConfigurationService");let CV=class extends X{constructor(e,t){super(),this.configurationService=e,this.languageService=t,this._registry=this._register(new VIe),this.onDidChangeEmitter=this._register(new Y),this.onDidChange=this.onDidChangeEmitter.event,this.configurations=new Map;const i=new Set(Object.values(yV));this._register(this.configurationService.onDidChangeConfiguration(n=>{const s=n.change.keys.some(a=>i.has(a)),r=n.change.overrides.filter(([a,l])=>l.some(c=>i.has(c))).map(([a])=>a);if(s)this.configurations.clear(),this.onDidChangeEmitter.fire(new n7(void 0));else for(const a of r)this.languageService.isRegisteredLanguageId(a)&&(this.configurations.delete(a),this.onDidChangeEmitter.fire(new n7(a)))})),this._register(this._registry.onDidChange(n=>{this.configurations.delete(n.languageId),this.onDidChangeEmitter.fire(new n7(n.languageId))}))}register(e,t,i){return this._registry.register(e,t,i)}getLanguageConfiguration(e){let t=this.configurations.get(e);return t||(t=BIe(e,this._registry,this.configurationService,this.languageService),this.configurations.set(e,t)),t}};CV=FIe([mie(0,Ht),mie(1,In)],CV);function BIe(o,e,t,i){let n=e.getLanguageConfiguration(o);if(!n){if(!i.isRegisteredLanguageId(o))return new v1(o,{});n=new v1(o,{})}const s=WIe(n.languageId,t),r=Zce([n.underlyingConfig,s]);return new v1(n.languageId,r)}const yV={brackets:"editor.language.brackets",colorizedBracketPairs:"editor.language.colorizedBracketPairs"};function WIe(o,e){const t=e.getValue(yV.brackets,{overrideIdentifier:o}),i=e.getValue(yV.colorizedBracketPairs,{overrideIdentifier:o});return{brackets:_ie(t),colorizedBracketPairs:_ie(i)}}function _ie(o){if(Array.isArray(o))return o.map(e=>{if(!(!Array.isArray(e)||e.length!==2))return[e[0],e[1]]}).filter(e=>!!e)}function Yce(o,e,t){const i=o.getLineContent(e);let n=Ui(i);return n.length>t-1&&(n=n.substring(0,t-1)),n}class HIe{constructor(e){this.languageId=e,this._resolved=null,this._entries=[],this._order=0,this._resolved=null}register(e,t){const i=new vie(e,t,++this._order);return this._entries.push(i),this._resolved=null,it(()=>{for(let n=0;n<this._entries.length;n++)if(this._entries[n]===i){this._entries.splice(n,1),this._resolved=null;break}})}getResolvedConfiguration(){if(!this._resolved){const e=this._resolve();e&&(this._resolved=new v1(this.languageId,e))}return this._resolved}_resolve(){return this._entries.length===0?null:(this._entries.sort(vie.cmp),Zce(this._entries.map(e=>e.configuration)))}}function Zce(o){let e={comments:void 0,brackets:void 0,wordPattern:void 0,indentationRules:void 0,onEnterRules:void 0,autoClosingPairs:void 0,surroundingPairs:void 0,autoCloseBefore:void 0,folding:void 0,colorizedBracketPairs:void 0,__electricCharacterSupport:void 0};for(const t of o)e={comments:t.comments||e.comments,brackets:t.brackets||e.brackets,wordPattern:t.wordPattern||e.wordPattern,indentationRules:t.indentationRules||e.indentationRules,onEnterRules:t.onEnterRules||e.onEnterRules,autoClosingPairs:t.autoClosingPairs||e.autoClosingPairs,surroundingPairs:t.surroundingPairs||e.surroundingPairs,autoCloseBefore:t.autoCloseBefore||e.autoCloseBefore,folding:t.folding||e.folding,colorizedBracketPairs:t.colorizedBracketPairs||e.colorizedBracketPairs,__electricCharacterSupport:t.__electricCharacterSupport||e.__electricCharacterSupport};return e}class vie{constructor(e,t,i){this.configuration=e,this.priority=t,this.order=i}static cmp(e,t){return e.priority===t.priority?e.order-t.order:e.priority-t.priority}}class bie{constructor(e){this.languageId=e}}class VIe extends X{constructor(){super(),this._entries=new Map,this._onDidChange=this._register(new Y),this.onDidChange=this._onDidChange.event,this._register(this.register(Xr,{brackets:[["(",")"],["[","]"],["{","}"]],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:"<",close:">"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}],colorizedBracketPairs:[],folding:{offSide:!0}},0))}register(e,t,i=0){let n=this._entries.get(e);n||(n=new HIe(e),this._entries.set(e,n));const s=n.register(t,i);return this._onDidChange.fire(new bie(e)),it(()=>{s.dispose(),this._onDidChange.fire(new bie(e))})}getLanguageConfiguration(e){const t=this._entries.get(e);return(t==null?void 0:t.getResolvedConfiguration())||null}}class v1{constructor(e,t){this.languageId=e,this.underlyingConfig=t,this._brackets=null,this._electricCharacter=null,this._onEnterSupport=this.underlyingConfig.brackets||this.underlyingConfig.indentationRules||this.underlyingConfig.onEnterRules?new Tw(this.underlyingConfig):null,this.comments=v1._handleComments(this.underlyingConfig),this.characterPair=new vV(this.underlyingConfig),this.wordDefinition=this.underlyingConfig.wordPattern||Lq,this.indentationRules=this.underlyingConfig.indentationRules,this.underlyingConfig.indentationRules?this.indentRulesSupport=new yIe(this.underlyingConfig.indentationRules):this.indentRulesSupport=null,this.foldingRules=this.underlyingConfig.folding||{},this.bracketsNew=new AIe(e,this.underlyingConfig)}getWordDefinition(){return xq(this.wordDefinition)}get brackets(){return!this._brackets&&this.underlyingConfig.brackets&&(this._brackets=new gIe(this.languageId,this.underlyingConfig.brackets)),this._brackets}get electricCharacter(){return this._electricCharacter||(this._electricCharacter=new CIe(this.brackets)),this._electricCharacter}onEnter(e,t,i,n){return this._onEnterSupport?this._onEnterSupport.onEnter(e,t,i,n):null}getAutoClosingPairs(){return new rIe(this.characterPair.getAutoClosingPairs())}getAutoCloseBeforeSet(e){return this.characterPair.getAutoCloseBeforeSet(e)}getSurroundingPairs(){return this.characterPair.getSurroundingPairs()}static _handleComments(e){const t=e.comments;if(!t)return null;const i={};if(t.lineComment&&(i.lineCommentToken=t.lineComment),t.blockComment){const[n,s]=t.blockComment;i.blockCommentStartToken=n,i.blockCommentEndToken=s}return i}}ei(On,CV,1);class xp{constructor(e,t,i,n){this.originalStart=e,this.originalLength=t,this.modifiedStart=i,this.modifiedLength=n}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}}class Cie{constructor(e){this.source=e}getElements(){const e=this.source,t=new Int32Array(e.length);for(let i=0,n=e.length;i<n;i++)t[i]=e.charCodeAt(i);return t}}function zIe(o,e,t){return new bh(new Cie(o),new Cie(e)).ComputeDiff(t).changes}class Xy{static Assert(e,t){if(!e)throw new Error(t)}}class Qy{static Copy(e,t,i,n,s){for(let r=0;r<s;r++)i[n+r]=e[t+r]}static Copy2(e,t,i,n,s){for(let r=0;r<s;r++)i[n+r]=e[t+r]}}class yie{constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new xp(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_originalCount++}AddModifiedElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}}class bh{constructor(e,t,i=null){this.ContinueProcessingPredicate=i,this._originalSequence=e,this._modifiedSequence=t;const[n,s,r]=bh._getElements(e),[a,l,c]=bh._getElements(t);this._hasStrings=r&&c,this._originalStringElements=n,this._originalElementsOrHash=s,this._modifiedStringElements=a,this._modifiedElementsOrHash=l,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _isStringArray(e){return e.length>0&&typeof e[0]=="string"}static _getElements(e){const t=e.getElements();if(bh._isStringArray(t)){const i=new Int32Array(t.length);for(let n=0,s=t.length;n<s;n++)i[n]=zq(t[n],0);return[t,i,!0]}return t instanceof Int32Array?[[],t,!1]:[[],new Int32Array(t),!1]}ElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._modifiedStringElements[t]:!0}ElementsAreStrictEqual(e,t){if(!this.ElementsAreEqual(e,t))return!1;const i=bh._getStrictElement(this._originalSequence,e),n=bh._getStrictElement(this._modifiedSequence,t);return i===n}static _getStrictElement(e,t){return typeof e.getStrictElement=="function"?e.getStrictElement(t):null}OriginalElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._originalElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._originalStringElements[t]:!0}ModifiedElementsAreEqual(e,t){return this._modifiedElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._modifiedStringElements[e]===this._modifiedStringElements[t]:!0}ComputeDiff(e){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,e)}_ComputeDiff(e,t,i,n,s){const r=[!1];let a=this.ComputeDiffRecursive(e,t,i,n,r);return s&&(a=this.PrettifyChanges(a)),{quitEarly:r[0],changes:a}}ComputeDiffRecursive(e,t,i,n,s){for(s[0]=!1;e<=t&&i<=n&&this.ElementsAreEqual(e,i);)e++,i++;for(;t>=e&&n>=i&&this.ElementsAreEqual(t,n);)t--,n--;if(e>t||i>n){let f;return i<=n?(Xy.Assert(e===t+1,"originalStart should only be one more than originalEnd"),f=[new xp(e,0,i,n-i+1)]):e<=t?(Xy.Assert(i===n+1,"modifiedStart should only be one more than modifiedEnd"),f=[new xp(e,t-e+1,i,0)]):(Xy.Assert(e===t+1,"originalStart should only be one more than originalEnd"),Xy.Assert(i===n+1,"modifiedStart should only be one more than modifiedEnd"),f=[]),f}const r=[0],a=[0],l=this.ComputeRecursionPoint(e,t,i,n,r,a,s),c=r[0],u=a[0];if(l!==null)return l;if(!s[0]){const f=this.ComputeDiffRecursive(e,c,i,u,s);let g=[];return s[0]?g=[new xp(c+1,t-(c+1)+1,u+1,n-(u+1)+1)]:g=this.ComputeDiffRecursive(c+1,t,u+1,n,s),this.ConcatenateChanges(f,g)}return[new xp(e,t-e+1,i,n-i+1)]}WALKTRACE(e,t,i,n,s,r,a,l,c,u,f,g,p,_,b,y,S,L){let x=null,k=null,E=new yie,N=t,A=i,P=p[0]-y[0]-n,H=-1073741824,ee=this.m_forwardHistory.length-1;do{const Q=P+e;Q===N||Q<A&&c[Q-1]<c[Q+1]?(f=c[Q+1],_=f-P-n,f<H&&E.MarkNextChange(),H=f,E.AddModifiedElement(f+1,_),P=Q+1-e):(f=c[Q-1]+1,_=f-P-n,f<H&&E.MarkNextChange(),H=f-1,E.AddOriginalElement(f,_+1),P=Q-1-e),ee>=0&&(c=this.m_forwardHistory[ee],e=c[0],N=1,A=c.length-1)}while(--ee>=-1);if(x=E.getReverseChanges(),L[0]){let Q=p[0]+1,te=y[0]+1;if(x!==null&&x.length>0){const J=x[x.length-1];Q=Math.max(Q,J.getOriginalEnd()),te=Math.max(te,J.getModifiedEnd())}k=[new xp(Q,g-Q+1,te,b-te+1)]}else{E=new yie,N=r,A=a,P=p[0]-y[0]-l,H=1073741824,ee=S?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{const Q=P+s;Q===N||Q<A&&u[Q-1]>=u[Q+1]?(f=u[Q+1]-1,_=f-P-l,f>H&&E.MarkNextChange(),H=f+1,E.AddOriginalElement(f+1,_+1),P=Q+1-s):(f=u[Q-1],_=f-P-l,f>H&&E.MarkNextChange(),H=f,E.AddModifiedElement(f+1,_+1),P=Q-1-s),ee>=0&&(u=this.m_reverseHistory[ee],s=u[0],N=1,A=u.length-1)}while(--ee>=-1);k=E.getChanges()}return this.ConcatenateChanges(x,k)}ComputeRecursionPoint(e,t,i,n,s,r,a){let l=0,c=0,u=0,f=0,g=0,p=0;e--,i--,s[0]=0,r[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];const _=t-e+(n-i),b=_+1,y=new Int32Array(b),S=new Int32Array(b),L=n-i,x=t-e,k=e-i,E=t-n,A=(x-L)%2===0;y[L]=e,S[x]=t,a[0]=!1;for(let P=1;P<=_/2+1;P++){let H=0,ee=0;u=this.ClipDiagonalBound(L-P,P,L,b),f=this.ClipDiagonalBound(L+P,P,L,b);for(let te=u;te<=f;te+=2){te===u||te<f&&y[te-1]<y[te+1]?l=y[te+1]:l=y[te-1]+1,c=l-(te-L)-k;const J=l;for(;l<t&&c<n&&this.ElementsAreEqual(l+1,c+1);)l++,c++;if(y[te]=l,l+c>H+ee&&(H=l,ee=c),!A&&Math.abs(te-x)<=P-1&&l>=S[te])return s[0]=l,r[0]=c,J<=S[te]&&P<=1448?this.WALKTRACE(L,u,f,k,x,g,p,E,y,S,l,t,s,c,n,r,A,a):null}const Q=(H-e+(ee-i)-P)/2;if(this.ContinueProcessingPredicate!==null&&!this.ContinueProcessingPredicate(H,Q))return a[0]=!0,s[0]=H,r[0]=ee,Q>0&&P<=1448?this.WALKTRACE(L,u,f,k,x,g,p,E,y,S,l,t,s,c,n,r,A,a):(e++,i++,[new xp(e,t-e+1,i,n-i+1)]);g=this.ClipDiagonalBound(x-P,P,x,b),p=this.ClipDiagonalBound(x+P,P,x,b);for(let te=g;te<=p;te+=2){te===g||te<p&&S[te-1]>=S[te+1]?l=S[te+1]-1:l=S[te-1],c=l-(te-x)-E;const J=l;for(;l>e&&c>i&&this.ElementsAreEqual(l,c);)l--,c--;if(S[te]=l,A&&Math.abs(te-L)<=P&&l<=y[te])return s[0]=l,r[0]=c,J>=y[te]&&P<=1448?this.WALKTRACE(L,u,f,k,x,g,p,E,y,S,l,t,s,c,n,r,A,a):null}if(P<=1447){let te=new Int32Array(f-u+2);te[0]=L-u+1,Qy.Copy2(y,u,te,1,f-u+1),this.m_forwardHistory.push(te),te=new Int32Array(p-g+2),te[0]=x-g+1,Qy.Copy2(S,g,te,1,p-g+1),this.m_reverseHistory.push(te)}}return this.WALKTRACE(L,u,f,k,x,g,p,E,y,S,l,t,s,c,n,r,A,a)}PrettifyChanges(e){for(let t=0;t<e.length;t++){const i=e[t],n=t<e.length-1?e[t+1].originalStart:this._originalElementsOrHash.length,s=t<e.length-1?e[t+1].modifiedStart:this._modifiedElementsOrHash.length,r=i.originalLength>0,a=i.modifiedLength>0;for(;i.originalStart+i.originalLength<n&&i.modifiedStart+i.modifiedLength<s&&(!r||this.OriginalElementsAreEqual(i.originalStart,i.originalStart+i.originalLength))&&(!a||this.ModifiedElementsAreEqual(i.modifiedStart,i.modifiedStart+i.modifiedLength));){const c=this.ElementsAreStrictEqual(i.originalStart,i.modifiedStart);if(this.ElementsAreStrictEqual(i.originalStart+i.originalLength,i.modifiedStart+i.modifiedLength)&&!c)break;i.originalStart++,i.modifiedStart++}const l=[null];if(t<e.length-1&&this.ChangesOverlap(e[t],e[t+1],l)){e[t]=l[0],e.splice(t+1,1),t--;continue}}for(let t=e.length-1;t>=0;t--){const i=e[t];let n=0,s=0;if(t>0){const f=e[t-1];n=f.originalStart+f.originalLength,s=f.modifiedStart+f.modifiedLength}const r=i.originalLength>0,a=i.modifiedLength>0;let l=0,c=this._boundaryScore(i.originalStart,i.originalLength,i.modifiedStart,i.modifiedLength);for(let f=1;;f++){const g=i.originalStart-f,p=i.modifiedStart-f;if(g<n||p<s||r&&!this.OriginalElementsAreEqual(g,g+i.originalLength)||a&&!this.ModifiedElementsAreEqual(p,p+i.modifiedLength))break;const b=(g===n&&p===s?5:0)+this._boundaryScore(g,i.originalLength,p,i.modifiedLength);b>c&&(c=b,l=f)}i.originalStart-=l,i.modifiedStart-=l;const u=[null];if(t>0&&this.ChangesOverlap(e[t-1],e[t],u)){e[t-1]=u[0],e.splice(t,1),t++;continue}}if(this._hasStrings)for(let t=1,i=e.length;t<i;t++){const n=e[t-1],s=e[t],r=s.originalStart-n.originalStart-n.originalLength,a=n.originalStart,l=s.originalStart+s.originalLength,c=l-a,u=n.modifiedStart,f=s.modifiedStart+s.modifiedLength,g=f-u;if(r<5&&c<20&&g<20){const p=this._findBetterContiguousSequence(a,c,u,g,r);if(p){const[_,b]=p;(_!==n.originalStart+n.originalLength||b!==n.modifiedStart+n.modifiedLength)&&(n.originalLength=_-n.originalStart,n.modifiedLength=b-n.modifiedStart,s.originalStart=_+r,s.modifiedStart=b+r,s.originalLength=l-s.originalStart,s.modifiedLength=f-s.modifiedStart)}}}return e}_findBetterContiguousSequence(e,t,i,n,s){if(t<s||n<s)return null;const r=e+t-s+1,a=i+n-s+1;let l=0,c=0,u=0;for(let f=e;f<r;f++)for(let g=i;g<a;g++){const p=this._contiguousSequenceScore(f,g,s);p>0&&p>l&&(l=p,c=f,u=g)}return l>0?[c,u]:null}_contiguousSequenceScore(e,t,i){let n=0;for(let s=0;s<i;s++){if(!this.ElementsAreEqual(e+s,t+s))return 0;n+=this._originalStringElements[e+s].length}return n}_OriginalIsBoundary(e){return e<=0||e>=this._originalElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._originalStringElements[e])}_OriginalRegionIsBoundary(e,t){if(this._OriginalIsBoundary(e)||this._OriginalIsBoundary(e-1))return!0;if(t>0){const i=e+t;if(this._OriginalIsBoundary(i-1)||this._OriginalIsBoundary(i))return!0}return!1}_ModifiedIsBoundary(e){return e<=0||e>=this._modifiedElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[e])}_ModifiedRegionIsBoundary(e,t){if(this._ModifiedIsBoundary(e)||this._ModifiedIsBoundary(e-1))return!0;if(t>0){const i=e+t;if(this._ModifiedIsBoundary(i-1)||this._ModifiedIsBoundary(i))return!0}return!1}_boundaryScore(e,t,i,n){const s=this._OriginalRegionIsBoundary(e,t)?1:0,r=this._ModifiedRegionIsBoundary(i,n)?1:0;return s+r}ConcatenateChanges(e,t){const i=[];if(e.length===0||t.length===0)return t.length>0?t:e;if(this.ChangesOverlap(e[e.length-1],t[0],i)){const n=new Array(e.length+t.length-1);return Qy.Copy(e,0,n,0,e.length-1),n[e.length-1]=i[0],Qy.Copy(t,1,n,e.length,t.length-1),n}else{const n=new Array(e.length+t.length);return Qy.Copy(e,0,n,0,e.length),Qy.Copy(t,0,n,e.length,t.length),n}}ChangesOverlap(e,t,i){if(Xy.Assert(e.originalStart<=t.originalStart,"Left change is not less than or equal to right change"),Xy.Assert(e.modifiedStart<=t.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=t.originalStart||e.modifiedStart+e.modifiedLength>=t.modifiedStart){const n=e.originalStart;let s=e.originalLength;const r=e.modifiedStart;let a=e.modifiedLength;return e.originalStart+e.originalLength>=t.originalStart&&(s=t.originalStart+t.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=t.modifiedStart&&(a=t.modifiedStart+t.modifiedLength-e.modifiedStart),i[0]=new xp(n,s,r,a),!0}else return i[0]=null,!1}ClipDiagonalBound(e,t,i,n){if(e>=0&&e<n)return e;const s=i,r=n-i-1,a=t%2===0;if(e<0){const l=s%2===0;return a===l?0:1}else{const l=r%2===0;return a===l?n-1:n-2}}}function kA(o){return o<0?0:o>255?255:o|0}function Jy(o){return o<0?0:o>4294967295?4294967295:o|0}class KS{constructor(e){const t=kA(e);this._defaultValue=t,this._asciiMap=KS._createAsciiMap(t),this._map=new Map}static _createAsciiMap(e){const t=new Uint8Array(256);return t.fill(e),t}set(e,t){const i=kA(t);e>=0&&e<256?this._asciiMap[e]=i:this._map.set(e,i)}get(e){return e>=0&&e<256?this._asciiMap[e]:this._map.get(e)||this._defaultValue}clear(){this._asciiMap.fill(this._defaultValue),this._map.clear()}}class DA{constructor(){this._actual=new KS(0)}add(e){this._actual.set(e,1)}has(e){return this._actual.get(e)===1}clear(){return this._actual.clear()}}class UIe{constructor(e,t,i){const n=new Uint8Array(e*t);for(let s=0,r=e*t;s<r;s++)n[s]=i;this._data=n,this.rows=e,this.cols=t}get(e,t){return this._data[e*this.cols+t]}set(e,t,i){this._data[e*this.cols+t]=i}}class $Ie{constructor(e){let t=0,i=0;for(let s=0,r=e.length;s<r;s++){const[a,l,c]=e[s];l>t&&(t=l),a>i&&(i=a),c>i&&(i=c)}t++,i++;const n=new UIe(i,t,0);for(let s=0,r=e.length;s<r;s++){const[a,l,c]=e[s];n.set(a,l,c)}this._states=n,this._maxCharCode=t}nextState(e,t){return t<0||t>=this._maxCharCode?0:this._states.get(e,t)}}let s7=null;function jIe(){return s7===null&&(s7=new $Ie([[1,104,2],[1,72,2],[1,102,6],[1,70,6],[2,116,3],[2,84,3],[3,116,4],[3,84,4],[4,112,5],[4,80,5],[5,115,9],[5,83,9],[5,58,10],[6,105,7],[6,73,7],[7,108,8],[7,76,8],[8,101,9],[8,69,9],[9,58,10],[10,47,11],[11,47,12]])),s7}let ux=null;function qIe(){if(ux===null){ux=new KS(0);const o=` 	<>'"`;for(let t=0;t<o.length;t++)ux.set(o.charCodeAt(t),1);const e=".,;:";for(let t=0;t<e.length;t++)ux.set(e.charCodeAt(t),2)}return ux}class EA{static _createLink(e,t,i,n,s){let r=s-1;do{const a=t.charCodeAt(r);if(e.get(a)!==2)break;r--}while(r>n);if(n>0){const a=t.charCodeAt(n-1),l=t.charCodeAt(r);(a===40&&l===41||a===91&&l===93||a===123&&l===125)&&r--}return{range:{startLineNumber:i,startColumn:n+1,endLineNumber:i,endColumn:r+2},url:t.substring(n,r+1)}}static computeLinks(e,t=jIe()){const i=qIe(),n=[];for(let s=1,r=e.getLineCount();s<=r;s++){const a=e.getLineContent(s),l=a.length;let c=0,u=0,f=0,g=1,p=!1,_=!1,b=!1,y=!1;for(;c<l;){let S=!1;const L=a.charCodeAt(c);if(g===13){let x;switch(L){case 40:p=!0,x=0;break;case 41:x=p?0:1;break;case 91:b=!0,_=!0,x=0;break;case 93:b=!1,x=_?0:1;break;case 123:y=!0,x=0;break;case 125:x=y?0:1;break;case 39:case 34:case 96:f===L?x=1:f===39||f===34||f===96?x=0:x=1;break;case 42:x=f===42?1:0;break;case 124:x=f===124?1:0;break;case 32:x=b?0:1;break;default:x=i.get(L)}x===1&&(n.push(EA._createLink(i,a,s,u,c)),S=!0)}else if(g===12){let x;L===91?(_=!0,x=0):x=i.get(L),x===1?S=!0:g=13}else g=t.nextState(g,L),g===0&&(S=!0);S&&(g=1,p=!1,_=!1,y=!1,u=c+1,f=L),c++}g===13&&n.push(EA._createLink(i,a,s,u,l))}return n}}function KIe(o){return!o||typeof o.getLineCount!="function"||typeof o.getLineContent!="function"?[]:EA.computeLinks(o)}const h2=class h2{constructor(){this._defaultValueSet=[["true","false"],["True","False"],["Private","Public","Friend","ReadOnly","Partial","Protected","WriteOnly"],["public","protected","private"]]}navigateValueSet(e,t,i,n,s){if(e&&t){const r=this.doNavigateValueSet(t,s);if(r)return{range:e,value:r}}if(i&&n){const r=this.doNavigateValueSet(n,s);if(r)return{range:i,value:r}}return null}doNavigateValueSet(e,t){const i=this.numberReplace(e,t);return i!==null?i:this.textReplace(e,t)}numberReplace(e,t){const i=Math.pow(10,e.length-(e.lastIndexOf(".")+1));let n=Number(e);const s=parseFloat(e);return!isNaN(n)&&!isNaN(s)&&n===s?n===0&&!t?null:(n=Math.floor(n*i),n+=t?i:-i,String(n/i)):null}textReplace(e,t){return this.valueSetsReplace(this._defaultValueSet,e,t)}valueSetsReplace(e,t,i){let n=null;for(let s=0,r=e.length;n===null&&s<r;s++)n=this.valueSetReplace(e[s],t,i);return n}valueSetReplace(e,t,i){let n=e.indexOf(t);return n>=0?(n+=i?1:-1,n<0?n=e.length-1:n%=e.length,e[n]):null}};h2.INSTANCE=new h2;let wV=h2;const $k=class $k{static getChannel(e){return e.getChannel($k.CHANNEL_NAME)}static setChannel(e,t){e.setChannel($k.CHANNEL_NAME,t)}};$k.CHANNEL_NAME="editorWorkerHost";let SV=$k;var wie,Sie;class GIe{constructor(e,t){this.uri=e,this.value=t}}function YIe(o){return Array.isArray(o)}const Ev=class Ev{constructor(e,t){if(this[wie]="ResourceMap",e instanceof Ev)this.map=new Map(e.map),this.toKey=t??Ev.defaultToKey;else if(YIe(e)){this.map=new Map,this.toKey=t??Ev.defaultToKey;for(const[i,n]of e)this.set(i,n)}else this.map=new Map,this.toKey=e??Ev.defaultToKey}set(e,t){return this.map.set(this.toKey(e),new GIe(e,t)),this}get(e){var t;return(t=this.map.get(this.toKey(e)))==null?void 0:t.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,t){typeof t<"u"&&(e=e.bind(t));for(const[i,n]of this.map)e(n.value,n.uri,this)}*values(){for(const e of this.map.values())yield e.value}*keys(){for(const e of this.map.values())yield e.uri}*entries(){for(const e of this.map.values())yield[e.uri,e.value]}*[(wie=Symbol.toStringTag,Symbol.iterator)](){for(const[,e]of this.map)yield[e.uri,e.value]}};Ev.defaultToKey=e=>e.toString();let co=Ev;class ZIe{constructor(){this[Sie]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return(e=this._head)==null?void 0:e.value}get last(){var e;return(e=this._tail)==null?void 0:e.value}has(e){return this._map.has(e)}get(e,t=0){const i=this._map.get(e);if(i)return t!==0&&this.touch(i,t),i.value}set(e,t,i=0){let n=this._map.get(e);if(n)n.value=t,i!==0&&this.touch(n,i);else{switch(n={key:e,value:t,next:void 0,previous:void 0},i){case 0:this.addItemLast(n);break;case 1:this.addItemFirst(n);break;case 2:this.addItemLast(n);break;default:this.addItemLast(n);break}this._map.set(e,n),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){const i=this._state;let n=this._head;for(;n;){if(t?e.bind(t)(n.value,n.key,this):e(n.value,n.key,this),this._state!==i)throw new Error("LinkedMap got modified during iteration.");n=n.next}}keys(){const e=this,t=this._state;let i=this._head;const n={[Symbol.iterator](){return n},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const s={value:i.key,done:!1};return i=i.next,s}else return{value:void 0,done:!0}}};return n}values(){const e=this,t=this._state;let i=this._head;const n={[Symbol.iterator](){return n},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const s={value:i.value,done:!1};return i=i.next,s}else return{value:void 0,done:!0}}};return n}entries(){const e=this,t=this._state;let i=this._head;const n={[Symbol.iterator](){return n},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const s={value:[i.key,i.value],done:!1};return i=i.next,s}else return{value:void 0,done:!0}}};return n}[(Sie=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._head,i=this.size;for(;t&&i>e;)this._map.delete(t.key),t=t.next,i--;this._head=t,this._size=i,t&&(t.previous=void 0),this._state++}trimNew(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._tail,i=this.size;for(;t&&i>e;)this._map.delete(t.key),t=t.previous,i--;this._tail=t,this._size=i,t&&(t.next=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const t=e.next,i=e.previous;if(!t||!i)throw new Error("Invalid list");t.previous=i,i.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(t!==1&&t!==2)){if(t===1){if(e===this._head)return;const i=e.next,n=e.previous;e===this._tail?(n.next=void 0,this._tail=n):(i.previous=n,n.next=i),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===2){if(e===this._tail)return;const i=e.next,n=e.previous;e===this._head?(i.previous=void 0,this._head=i):(i.previous=n,n.next=i),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){const e=[];return this.forEach((t,i)=>{e.push([i,t])}),e}fromJSON(e){this.clear();for(const[t,i]of e)this.set(t,i)}}class XIe extends ZIe{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get(e,t=2){return super.get(e,t)}peek(e){return super.get(e,0)}set(e,t){return super.set(e,t,2),this}checkTrim(){this.size>this._limit&&this.trim(Math.round(this._limit*this._ratio))}}class $h extends XIe{constructor(e,t=1){super(e,t)}trim(e){this.trimOld(e)}set(e,t){return super.set(e,t),this.checkTrim(),this}}class QIe{constructor(e){if(this._m1=new Map,this._m2=new Map,e)for(const[t,i]of e)this.set(t,i)}clear(){this._m1.clear(),this._m2.clear()}set(e,t){this._m1.set(e,t),this._m2.set(t,e)}get(e){return this._m1.get(e)}getKey(e){return this._m2.get(e)}delete(e){const t=this._m1.get(e);return t===void 0?!1:(this._m1.delete(e),this._m2.delete(t),!0)}keys(){return this._m1.keys()}values(){return this._m1.values()}}class Qq{constructor(){this.map=new Map}add(e,t){let i=this.map.get(e);i||(i=new Set,this.map.set(e,i)),i.add(t)}delete(e,t){const i=this.map.get(e);i&&(i.delete(t),i.size===0&&this.map.delete(e))}forEach(e,t){const i=this.map.get(e);i&&i.forEach(t)}get(e){const t=this.map.get(e);return t||new Set}}class JIe extends KS{constructor(e,t){super(0),this._segmenter=null,this._cachedLine=null,this._cachedSegments=[],this.intlSegmenterLocales=t,this.intlSegmenterLocales.length>0?this._segmenter=new Intl.Segmenter(this.intlSegmenterLocales,{granularity:"word"}):this._segmenter=null;for(let i=0,n=e.length;i<n;i++)this.set(e.charCodeAt(i),2);this.set(32,1),this.set(9,1)}findPrevIntlWordBeforeOrAtOffset(e,t){let i=null;for(const n of this._getIntlSegmenterWordsOnLine(e)){if(n.index>t)break;i=n}return i}findNextIntlWordAtOrAfterOffset(e,t){for(const i of this._getIntlSegmenterWordsOnLine(e))if(!(i.index<t))return i;return null}_getIntlSegmenterWordsOnLine(e){return this._segmenter?this._cachedLine===e?this._cachedSegments:(this._cachedLine=e,this._cachedSegments=this._filterWordSegments(this._segmenter.segment(e)),this._cachedSegments):[]}_filterWordSegments(e){const t=[];for(const i of e)this._isWordLike(i)&&t.push(i);return t}_isWordLike(e){return!!e.isWordLike}}const Lie=new $h(10);function kc(o,e){const t=`${o}/${e.join(",")}`;let i=Lie.get(t);return i||(i=new JIe(o,e),Lie.set(t,i)),i}var Hl;(function(o){o[o.Left=1]="Left",o[o.Center=2]="Center",o[o.Right=4]="Right",o[o.Full=7]="Full"})(Hl||(Hl={}));var cd;(function(o){o[o.Left=1]="Left",o[o.Center=2]="Center",o[o.Right=3]="Right"})(cd||(cd={}));var id;(function(o){o[o.Both=0]="Both",o[o.Right=1]="Right",o[o.Left=2]="Left",o[o.None=3]="None"})(id||(id={}));class mM{get originalIndentSize(){return this._indentSizeIsTabSize?"tabSize":this.indentSize}constructor(e){this._textModelResolvedOptionsBrand=void 0,this.tabSize=Math.max(1,e.tabSize|0),e.indentSize==="tabSize"?(this.indentSize=this.tabSize,this._indentSizeIsTabSize=!0):(this.indentSize=Math.max(1,e.indentSize|0),this._indentSizeIsTabSize=!1),this.insertSpaces=!!e.insertSpaces,this.defaultEOL=e.defaultEOL|0,this.trimAutoWhitespace=!!e.trimAutoWhitespace,this.bracketPairColorizationOptions=e.bracketPairColorizationOptions}equals(e){return this.tabSize===e.tabSize&&this._indentSizeIsTabSize===e._indentSizeIsTabSize&&this.indentSize===e.indentSize&&this.insertSpaces===e.insertSpaces&&this.defaultEOL===e.defaultEOL&&this.trimAutoWhitespace===e.trimAutoWhitespace&&el(this.bracketPairColorizationOptions,e.bracketPairColorizationOptions)}createChangeEvent(e){return{tabSize:this.tabSize!==e.tabSize,indentSize:this.indentSize!==e.indentSize,insertSpaces:this.insertSpaces!==e.insertSpaces,trimAutoWhitespace:this.trimAutoWhitespace!==e.trimAutoWhitespace}}}class bD{constructor(e,t){this._findMatchBrand=void 0,this.range=e,this.matches=t}}function eTe(o){return o&&typeof o.read=="function"}class o7{constructor(e,t,i,n,s,r){this.identifier=e,this.range=t,this.text=i,this.forceMoveMarkers=n,this.isAutoWhitespaceEdit=s,this._isTracked=r}}class tTe{constructor(e,t,i){this.regex=e,this.wordSeparators=t,this.simpleSearch=i}}class iTe{constructor(e,t,i){this.reverseEdits=e,this.changes=t,this.trimAutoWhitespaceLineNumbers=i}}function Xce(o){return!o.isTooLargeForSyncing()&&!o.isForSimpleWidget}const nTe=999;class sv{constructor(e,t,i,n){this.searchString=e,this.isRegex=t,this.matchCase=i,this.wordSeparators=n}parseSearchRequest(){if(this.searchString==="")return null;let e;this.isRegex?e=sTe(this.searchString):e=this.searchString.indexOf(`
`)>=0;let t=null;try{t=Zle(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch{return null}if(!t)return null;let i=!this.isRegex&&!e;return i&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(i=this.matchCase),new tTe(t,this.wordSeparators?kc(this.wordSeparators,[]):null,i?this.searchString:null)}}function sTe(o){if(!o||o.length===0)return!1;for(let e=0,t=o.length;e<t;e++){const i=o.charCodeAt(e);if(i===10)return!0;if(i===92){if(e++,e>=t)break;const n=o.charCodeAt(e);if(n===110||n===114||n===87)return!0}}return!1}function gv(o,e,t){if(!t)return new bD(o,null);const i=[];for(let n=0,s=e.length;n<s;n++)i[n]=e[n];return new bD(o,i)}class xie{constructor(e){const t=[];let i=0;for(let n=0,s=e.length;n<s;n++)e.charCodeAt(n)===10&&(t[i++]=n);this._lineFeedsOffsets=t}findLineFeedCountBeforeOffset(e){const t=this._lineFeedsOffsets;let i=0,n=t.length-1;if(n===-1||e<=t[0])return 0;for(;i<n;){const s=i+((n-i)/2>>0);t[s]>=e?n=s-1:t[s+1]>=e?(i=s,n=s):i=s+1}return i+1}}class sR{static findMatches(e,t,i,n,s){const r=t.parseSearchRequest();return r?r.regex.multiline?this._doFindMatchesMultiline(e,i,new Nw(r.wordSeparators,r.regex),n,s):this._doFindMatchesLineByLine(e,i,r,n,s):[]}static _getMultilineMatchRange(e,t,i,n,s,r){let a,l=0;n?(l=n.findLineFeedCountBeforeOffset(s),a=t+s+l):a=t+s;let c;if(n){const p=n.findLineFeedCountBeforeOffset(s+r.length)-l;c=a+r.length+p}else c=a+r.length;const u=e.getPositionAt(a),f=e.getPositionAt(c);return new M(u.lineNumber,u.column,f.lineNumber,f.column)}static _doFindMatchesMultiline(e,t,i,n,s){const r=e.getOffsetAt(t.getStartPosition()),a=e.getValueInRange(t,1),l=e.getEOL()===`\r
`?new xie(a):null,c=[];let u=0,f;for(i.reset(0);f=i.next(a);)if(c[u++]=gv(this._getMultilineMatchRange(e,r,a,l,f.index,f[0]),f,n),u>=s)return c;return c}static _doFindMatchesLineByLine(e,t,i,n,s){const r=[];let a=0;if(t.startLineNumber===t.endLineNumber){const c=e.getLineContent(t.startLineNumber).substring(t.startColumn-1,t.endColumn-1);return a=this._findMatchesInLine(i,c,t.startLineNumber,t.startColumn-1,a,r,n,s),r}const l=e.getLineContent(t.startLineNumber).substring(t.startColumn-1);a=this._findMatchesInLine(i,l,t.startLineNumber,t.startColumn-1,a,r,n,s);for(let c=t.startLineNumber+1;c<t.endLineNumber&&a<s;c++)a=this._findMatchesInLine(i,e.getLineContent(c),c,0,a,r,n,s);if(a<s){const c=e.getLineContent(t.endLineNumber).substring(0,t.endColumn-1);a=this._findMatchesInLine(i,c,t.endLineNumber,0,a,r,n,s)}return r}static _findMatchesInLine(e,t,i,n,s,r,a,l){const c=e.wordSeparators;if(!a&&e.simpleSearch){const g=e.simpleSearch,p=g.length,_=t.length;let b=-p;for(;(b=t.indexOf(g,b+p))!==-1;)if((!c||Jq(c,t,_,b,p))&&(r[s++]=new bD(new M(i,b+1+n,i,b+1+p+n),null),s>=l))return s;return s}const u=new Nw(e.wordSeparators,e.regex);let f;u.reset(0);do if(f=u.next(t),f&&(r[s++]=gv(new M(i,f.index+1+n,i,f.index+1+f[0].length+n),f,a),s>=l))return s;while(f);return s}static findNextMatch(e,t,i,n){const s=t.parseSearchRequest();if(!s)return null;const r=new Nw(s.wordSeparators,s.regex);return s.regex.multiline?this._doFindNextMatchMultiline(e,i,r,n):this._doFindNextMatchLineByLine(e,i,r,n)}static _doFindNextMatchMultiline(e,t,i,n){const s=new G(t.lineNumber,1),r=e.getOffsetAt(s),a=e.getLineCount(),l=e.getValueInRange(new M(s.lineNumber,s.column,a,e.getLineMaxColumn(a)),1),c=e.getEOL()===`\r
`?new xie(l):null;i.reset(t.column-1);const u=i.next(l);return u?gv(this._getMultilineMatchRange(e,r,l,c,u.index,u[0]),u,n):t.lineNumber!==1||t.column!==1?this._doFindNextMatchMultiline(e,new G(1,1),i,n):null}static _doFindNextMatchLineByLine(e,t,i,n){const s=e.getLineCount(),r=t.lineNumber,a=e.getLineContent(r),l=this._findFirstMatchInLine(i,a,r,t.column,n);if(l)return l;for(let c=1;c<=s;c++){const u=(r+c-1)%s,f=e.getLineContent(u+1),g=this._findFirstMatchInLine(i,f,u+1,1,n);if(g)return g}return null}static _findFirstMatchInLine(e,t,i,n,s){e.reset(n-1);const r=e.next(t);return r?gv(new M(i,r.index+1,i,r.index+1+r[0].length),r,s):null}static findPreviousMatch(e,t,i,n){const s=t.parseSearchRequest();if(!s)return null;const r=new Nw(s.wordSeparators,s.regex);return s.regex.multiline?this._doFindPreviousMatchMultiline(e,i,r,n):this._doFindPreviousMatchLineByLine(e,i,r,n)}static _doFindPreviousMatchMultiline(e,t,i,n){const s=this._doFindMatchesMultiline(e,new M(1,1,t.lineNumber,t.column),i,n,10*nTe);if(s.length>0)return s[s.length-1];const r=e.getLineCount();return t.lineNumber!==r||t.column!==e.getLineMaxColumn(r)?this._doFindPreviousMatchMultiline(e,new G(r,e.getLineMaxColumn(r)),i,n):null}static _doFindPreviousMatchLineByLine(e,t,i,n){const s=e.getLineCount(),r=t.lineNumber,a=e.getLineContent(r).substring(0,t.column-1),l=this._findLastMatchInLine(i,a,r,n);if(l)return l;for(let c=1;c<=s;c++){const u=(s+r-c-1)%s,f=e.getLineContent(u+1),g=this._findLastMatchInLine(i,f,u+1,n);if(g)return g}return null}static _findLastMatchInLine(e,t,i,n){let s=null,r;for(e.reset(0);r=e.next(t);)s=gv(new M(i,r.index+1,i,r.index+1+r[0].length),r,n);return s}}function oTe(o,e,t,i,n){if(i===0)return!0;const s=e.charCodeAt(i-1);if(o.get(s)!==0||s===13||s===10)return!0;if(n>0){const r=e.charCodeAt(i);if(o.get(r)!==0)return!0}return!1}function rTe(o,e,t,i,n){if(i+n===t)return!0;const s=e.charCodeAt(i+n);if(o.get(s)!==0||s===13||s===10)return!0;if(n>0){const r=e.charCodeAt(i+n-1);if(o.get(r)!==0)return!0}return!1}function Jq(o,e,t,i,n){return oTe(o,e,t,i,n)&&rTe(o,e,t,i,n)}class Nw{constructor(e,t){this._wordSeparators=e,this._searchRegex=t,this._prevMatchStartIndex=-1,this._prevMatchLength=0}reset(e){this._searchRegex.lastIndex=e,this._prevMatchStartIndex=-1,this._prevMatchLength=0}next(e){const t=e.length;let i;do{if(this._prevMatchStartIndex+this._prevMatchLength===t||(i=this._searchRegex.exec(e),!i))return null;const n=i.index,s=i[0].length;if(n===this._prevMatchStartIndex&&s===this._prevMatchLength){if(s===0){pA(e,t,this._searchRegex.lastIndex)>65535?this._searchRegex.lastIndex+=2:this._searchRegex.lastIndex+=1;continue}return null}if(this._prevMatchStartIndex=n,this._prevMatchLength=s,!this._wordSeparators||Jq(this._wordSeparators,e,t,n,s))return i}while(i);return null}}class eK{static computeUnicodeHighlights(e,t,i){const n=i?i.startLineNumber:1,s=i?i.endLineNumber:e.getLineCount(),r=new kie(t),a=r.getCandidateCodePoints();let l;a==="allNonBasicAscii"?l=new RegExp("[^\\t\\n\\r\\x20-\\x7E]","g"):l=new RegExp(`${aTe(Array.from(a))}`,"g");const c=new Nw(null,l),u=[];let f=!1,g,p=0,_=0,b=0;e:for(let y=n,S=s;y<=S;y++){const L=e.getLineContent(y),x=L.length;c.reset(0);do if(g=c.next(L),g){let k=g.index,E=g.index+g[0].length;if(k>0){const H=L.charCodeAt(k-1);qs(H)&&k--}if(E+1<x){const H=L.charCodeAt(E-1);qs(H)&&E++}const N=L.substring(k,E);let A=lD(k+1,Lq,L,0);A&&A.endColumn<=k+1&&(A=null);const P=r.shouldHighlightNonBasicASCII(N,A?A.word:null);if(P!==0){if(P===3?p++:P===2?_++:P===1?b++:s4(),u.length>=1e3){f=!0;break e}u.push(new M(y,k+1,y,E+1))}}while(g)}return{ranges:u,hasMore:f,ambiguousCharacterCount:p,invisibleCharacterCount:_,nonBasicAsciiCharacterCount:b}}static computeUnicodeHighlightReason(e,t){const i=new kie(t);switch(i.shouldHighlightNonBasicASCII(e,null)){case 0:return null;case 2:return{kind:1};case 3:{const s=e.codePointAt(0),r=i.ambiguousCharacters.getPrimaryConfusable(s),a=pD.getLocales().filter(l=>!pD.getInstance(new Set([...t.allowedLocales,l])).isAmbiguous(s));return{kind:0,confusableWith:String.fromCodePoint(r),notAmbiguousInLocales:a}}case 1:return{kind:2}}}}function aTe(o,e){return`[${Ul(o.map(i=>String.fromCodePoint(i)).join(""))}]`}class kie{constructor(e){this.options=e,this.allowedCodePoints=new Set(e.allowedCodePoints),this.ambiguousCharacters=pD.getInstance(new Set(e.allowedLocales))}getCandidateCodePoints(){if(this.options.nonBasicASCII)return"allNonBasicAscii";const e=new Set;if(this.options.invisibleCharacters)for(const t of Kv.codePoints)Die(String.fromCodePoint(t))||e.add(t);if(this.options.ambiguousCharacters)for(const t of this.ambiguousCharacters.getConfusableCodePoints())e.add(t);for(const t of this.allowedCodePoints)e.delete(t);return e}shouldHighlightNonBasicASCII(e,t){const i=e.codePointAt(0);if(this.allowedCodePoints.has(i))return 0;if(this.options.nonBasicASCII)return 1;let n=!1,s=!1;if(t)for(const r of t){const a=r.codePointAt(0),l=ZE(r);n=n||l,!l&&!this.ambiguousCharacters.isAmbiguous(a)&&!Kv.isInvisibleCharacter(a)&&(s=!0)}return!n&&s?0:this.options.invisibleCharacters&&!Die(e)&&Kv.isInvisibleCharacter(i)?2:this.options.ambiguousCharacters&&this.ambiguousCharacters.isAmbiguous(i)?3:0}}function Die(o){return o===" "||o===`
`||o==="	"}class _M{constructor(e,t,i){this.changes=e,this.moves=t,this.hitTimeout=i}}class Qce{constructor(e,t){this.lineRangeMapping=e,this.changes=t}}class Vt{static addRange(e,t){let i=0;for(;i<t.length&&t[i].endExclusive<e.start;)i++;let n=i;for(;n<t.length&&t[n].start<=e.endExclusive;)n++;if(i===n)t.splice(i,0,e);else{const s=Math.min(e.start,t[i].start),r=Math.max(e.endExclusive,t[n-1].endExclusive);t.splice(i,n-i,new Vt(s,r))}}static tryCreate(e,t){if(!(e>t))return new Vt(e,t)}static ofLength(e){return new Vt(0,e)}static ofStartAndLength(e,t){return new Vt(e,e+t)}constructor(e,t){if(this.start=e,this.endExclusive=t,e>t)throw new wi(`Invalid range: ${this.toString()}`)}get isEmpty(){return this.start===this.endExclusive}delta(e){return new Vt(this.start+e,this.endExclusive+e)}deltaStart(e){return new Vt(this.start+e,this.endExclusive)}deltaEnd(e){return new Vt(this.start,this.endExclusive+e)}get length(){return this.endExclusive-this.start}toString(){return`[${this.start}, ${this.endExclusive})`}contains(e){return this.start<=e&&e<this.endExclusive}join(e){return new Vt(Math.min(this.start,e.start),Math.max(this.endExclusive,e.endExclusive))}intersect(e){const t=Math.max(this.start,e.start),i=Math.min(this.endExclusive,e.endExclusive);if(t<=i)return new Vt(t,i)}intersects(e){const t=Math.max(this.start,e.start),i=Math.min(this.endExclusive,e.endExclusive);return t<i}isBefore(e){return this.endExclusive<=e.start}isAfter(e){return this.start>=e.endExclusive}slice(e){return e.slice(this.start,this.endExclusive)}substring(e){return e.substring(this.start,this.endExclusive)}clip(e){if(this.isEmpty)throw new wi(`Invalid clipping range: ${this.toString()}`);return Math.max(this.start,Math.min(this.endExclusive-1,e))}clipCyclic(e){if(this.isEmpty)throw new wi(`Invalid clipping range: ${this.toString()}`);return e<this.start?this.endExclusive-(this.start-e)%this.length:e>=this.endExclusive?this.start+(e-this.start)%this.length:e}forEach(e){for(let t=this.start;t<this.endExclusive;t++)e(t)}}class tK{constructor(){this._sortedRanges=[]}addRange(e){let t=0;for(;t<this._sortedRanges.length&&this._sortedRanges[t].endExclusive<e.start;)t++;let i=t;for(;i<this._sortedRanges.length&&this._sortedRanges[i].start<=e.endExclusive;)i++;if(t===i)this._sortedRanges.splice(t,0,e);else{const n=Math.min(e.start,this._sortedRanges[t].start),s=Math.max(e.endExclusive,this._sortedRanges[i-1].endExclusive);this._sortedRanges.splice(t,i-t,new Vt(n,s))}}toString(){return this._sortedRanges.map(e=>e.toString()).join(", ")}intersectsStrict(e){let t=0;for(;t<this._sortedRanges.length&&this._sortedRanges[t].endExclusive<=e.start;)t++;return t<this._sortedRanges.length&&this._sortedRanges[t].start<e.endExclusive}intersectWithRange(e){const t=new tK;for(const i of this._sortedRanges){const n=i.intersect(e);n&&t.addRange(n)}return t}intersectWithRangeLength(e){return this.intersectWithRange(e).length}get length(){return this._sortedRanges.reduce((e,t)=>e+t.length,0)}}function CD(o,e){const t=lTe(o,e);if(t!==-1)return o[t]}function lTe(o,e,t=o.length-1){for(let i=t;i>=0;i--){const n=o[i];if(e(n))return i}return-1}function nS(o,e){const t=yD(o,e);return t===-1?void 0:o[t]}function yD(o,e,t=0,i=o.length){let n=t,s=i;for(;n<s;){const r=Math.floor((n+s)/2);e(o[r])?n=r+1:s=r}return n-1}function cTe(o,e){const t=wD(o,e);return t===o.length?void 0:o[t]}function wD(o,e,t=0,i=o.length){let n=t,s=i;for(;n<s;){const r=Math.floor((n+s)/2);e(o[r])?s=r:n=r+1}return n}const f2=class f2{constructor(e){this._array=e,this._findLastMonotonousLastIdx=0}findLastMonotonous(e){if(f2.assertInvariants){if(this._prevFindLastPredicate){for(const i of this._array)if(this._prevFindLastPredicate(i)&&!e(i))throw new Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.")}this._prevFindLastPredicate=e}const t=yD(this._array,e,this._findLastMonotonousLastIdx);return this._findLastMonotonousLastIdx=t+1,t===-1?void 0:this._array[t]}};f2.assertInvariants=!1;let IA=f2;function iK(o,e){if(o.length===0)return;let t=o[0];for(let i=1;i<o.length;i++){const n=o[i];e(n,t)>0&&(t=n)}return t}function dTe(o,e){if(o.length===0)return;let t=o[0];for(let i=1;i<o.length;i++){const n=o[i];e(n,t)>=0&&(t=n)}return t}function uTe(o,e){return iK(o,(t,i)=>-e(t,i))}function hTe(o,e){if(o.length===0)return-1;let t=0;for(let i=1;i<o.length;i++){const n=o[i];e(n,o[t])>0&&(t=i)}return t}function fTe(o,e){for(const t of o){const i=e(t);if(i!==void 0)return i}}let It=class kf{static fromRangeInclusive(e){return new kf(e.startLineNumber,e.endLineNumber+1)}static joinMany(e){if(e.length===0)return[];let t=new vc(e[0].slice());for(let i=1;i<e.length;i++)t=t.getUnion(new vc(e[i].slice()));return t.ranges}static join(e){if(e.length===0)throw new wi("lineRanges cannot be empty");let t=e[0].startLineNumber,i=e[0].endLineNumberExclusive;for(let n=1;n<e.length;n++)t=Math.min(t,e[n].startLineNumber),i=Math.max(i,e[n].endLineNumberExclusive);return new kf(t,i)}static ofLength(e,t){return new kf(e,e+t)}static deserialize(e){return new kf(e[0],e[1])}constructor(e,t){if(e>t)throw new wi(`startLineNumber ${e} cannot be after endLineNumberExclusive ${t}`);this.startLineNumber=e,this.endLineNumberExclusive=t}contains(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}get isEmpty(){return this.startLineNumber===this.endLineNumberExclusive}delta(e){return new kf(this.startLineNumber+e,this.endLineNumberExclusive+e)}deltaLength(e){return new kf(this.startLineNumber,this.endLineNumberExclusive+e)}get length(){return this.endLineNumberExclusive-this.startLineNumber}join(e){return new kf(Math.min(this.startLineNumber,e.startLineNumber),Math.max(this.endLineNumberExclusive,e.endLineNumberExclusive))}toString(){return`[${this.startLineNumber},${this.endLineNumberExclusive})`}intersect(e){const t=Math.max(this.startLineNumber,e.startLineNumber),i=Math.min(this.endLineNumberExclusive,e.endLineNumberExclusive);if(t<=i)return new kf(t,i)}intersectsStrict(e){return this.startLineNumber<e.endLineNumberExclusive&&e.startLineNumber<this.endLineNumberExclusive}overlapOrTouch(e){return this.startLineNumber<=e.endLineNumberExclusive&&e.startLineNumber<=this.endLineNumberExclusive}equals(e){return this.startLineNumber===e.startLineNumber&&this.endLineNumberExclusive===e.endLineNumberExclusive}toInclusiveRange(){return this.isEmpty?null:new M(this.startLineNumber,1,this.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER)}toExclusiveRange(){return new M(this.startLineNumber,1,this.endLineNumberExclusive,1)}mapToLineArray(e){const t=[];for(let i=this.startLineNumber;i<this.endLineNumberExclusive;i++)t.push(e(i));return t}forEach(e){for(let t=this.startLineNumber;t<this.endLineNumberExclusive;t++)e(t)}serialize(){return[this.startLineNumber,this.endLineNumberExclusive]}includes(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}toOffsetRange(){return new Vt(this.startLineNumber-1,this.endLineNumberExclusive-1)}};class vc{constructor(e=[]){this._normalizedRanges=e}get ranges(){return this._normalizedRanges}addRange(e){if(e.length===0)return;const t=wD(this._normalizedRanges,n=>n.endLineNumberExclusive>=e.startLineNumber),i=yD(this._normalizedRanges,n=>n.startLineNumber<=e.endLineNumberExclusive)+1;if(t===i)this._normalizedRanges.splice(t,0,e);else if(t===i-1){const n=this._normalizedRanges[t];this._normalizedRanges[t]=n.join(e)}else{const n=this._normalizedRanges[t].join(this._normalizedRanges[i-1]).join(e);this._normalizedRanges.splice(t,i-t,n)}}contains(e){const t=nS(this._normalizedRanges,i=>i.startLineNumber<=e);return!!t&&t.endLineNumberExclusive>e}intersects(e){const t=nS(this._normalizedRanges,i=>i.startLineNumber<e.endLineNumberExclusive);return!!t&&t.endLineNumberExclusive>e.startLineNumber}getUnion(e){if(this._normalizedRanges.length===0)return e;if(e._normalizedRanges.length===0)return this;const t=[];let i=0,n=0,s=null;for(;i<this._normalizedRanges.length||n<e._normalizedRanges.length;){let r=null;if(i<this._normalizedRanges.length&&n<e._normalizedRanges.length){const a=this._normalizedRanges[i],l=e._normalizedRanges[n];a.startLineNumber<l.startLineNumber?(r=a,i++):(r=l,n++)}else i<this._normalizedRanges.length?(r=this._normalizedRanges[i],i++):(r=e._normalizedRanges[n],n++);s===null?s=r:s.endLineNumberExclusive>=r.startLineNumber?s=new It(s.startLineNumber,Math.max(s.endLineNumberExclusive,r.endLineNumberExclusive)):(t.push(s),s=r)}return s!==null&&t.push(s),new vc(t)}subtractFrom(e){const t=wD(this._normalizedRanges,r=>r.endLineNumberExclusive>=e.startLineNumber),i=yD(this._normalizedRanges,r=>r.startLineNumber<=e.endLineNumberExclusive)+1;if(t===i)return new vc([e]);const n=[];let s=e.startLineNumber;for(let r=t;r<i;r++){const a=this._normalizedRanges[r];a.startLineNumber>s&&n.push(new It(s,a.startLineNumber)),s=a.endLineNumberExclusive}return s<e.endLineNumberExclusive&&n.push(new It(s,e.endLineNumberExclusive)),new vc(n)}toString(){return this._normalizedRanges.map(e=>e.toString()).join(", ")}getIntersection(e){const t=[];let i=0,n=0;for(;i<this._normalizedRanges.length&&n<e._normalizedRanges.length;){const s=this._normalizedRanges[i],r=e._normalizedRanges[n],a=s.intersect(r);a&&!a.isEmpty&&t.push(a),s.endLineNumberExclusive<r.endLineNumberExclusive?i++:n++}return new vc(t)}getWithDelta(e){return new vc(this._normalizedRanges.map(t=>t.delta(e)))}}const Np=class Np{static betweenPositions(e,t){return e.lineNumber===t.lineNumber?new Np(0,t.column-e.column):new Np(t.lineNumber-e.lineNumber,t.column-1)}static ofRange(e){return Np.betweenPositions(e.getStartPosition(),e.getEndPosition())}static ofText(e){let t=0,i=0;for(const n of e)n===`
`?(t++,i=0):i++;return new Np(t,i)}constructor(e,t){this.lineCount=e,this.columnCount=t}isGreaterThanOrEqualTo(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>=e.columnCount}createRange(e){return this.lineCount===0?new M(e.lineNumber,e.column,e.lineNumber,e.column+this.columnCount):new M(e.lineNumber,e.column,e.lineNumber+this.lineCount,this.columnCount+1)}addToPosition(e){return this.lineCount===0?new G(e.lineNumber,e.column+this.columnCount):new G(e.lineNumber+this.lineCount,this.columnCount+1)}toString(){return`${this.lineCount},${this.columnCount}`}};Np.zero=new Np(0,0);let dd=Np;class gTe{constructor(e){this.text=e,this.lineStartOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let t=0;t<e.length;t++)e.charAt(t)===`
`&&this.lineStartOffsetByLineIdx.push(t+1)}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}getOffsetRange(e){return new Vt(this.getOffset(e.getStartPosition()),this.getOffset(e.getEndPosition()))}get textLength(){const e=this.lineStartOffsetByLineIdx.length-1;return new dd(e,this.text.length-this.lineStartOffsetByLineIdx[e])}}class nK{constructor(e){this.edits=e,cC(()=>Yq(e,(t,i)=>t.range.getEndPosition().isBeforeOrEqual(i.range.getStartPosition())))}apply(e){let t="",i=new G(1,1);for(const s of this.edits){const r=s.range,a=r.getStartPosition(),l=r.getEndPosition(),c=Eie(i,a);c.isEmpty()||(t+=e.getValueOfRange(c)),t+=s.text,i=l}const n=Eie(i,e.endPositionExclusive);return n.isEmpty()||(t+=e.getValueOfRange(n)),t}applyToString(e){const t=new pTe(e);return this.apply(t)}getNewRanges(){const e=[];let t=0,i=0,n=0;for(const s of this.edits){const r=dd.ofText(s.text),a=G.lift({lineNumber:s.range.startLineNumber+i,column:s.range.startColumn+(s.range.startLineNumber===t?n:0)}),l=r.createRange(a);e.push(l),i=l.endLineNumber-s.range.endLineNumber,n=l.endColumn-s.range.endColumn,t=s.range.endLineNumber}return e}}class Mh{constructor(e,t){this.range=e,this.text=t}toSingleEditOperation(){return{range:this.range,text:this.text}}}function Eie(o,e){if(o.lineNumber===e.lineNumber&&o.column===Number.MAX_SAFE_INTEGER)return M.fromPositions(e,e);if(!o.isBeforeOrEqual(e))throw new wi("start must be before end");return new M(o.lineNumber,o.column,e.lineNumber,e.column)}class Jce{get endPositionExclusive(){return this.length.addToPosition(new G(1,1))}}class pTe extends Jce{constructor(e){super(),this.value=e,this._t=new gTe(this.value)}getValueOfRange(e){return this._t.getOffsetRange(e).substring(this.value)}get length(){return this._t.textLength}}class Cr{static inverse(e,t,i){const n=[];let s=1,r=1;for(const l of e){const c=new Cr(new It(s,l.original.startLineNumber),new It(r,l.modified.startLineNumber));c.modified.isEmpty||n.push(c),s=l.original.endLineNumberExclusive,r=l.modified.endLineNumberExclusive}const a=new Cr(new It(s,t+1),new It(r,i+1));return a.modified.isEmpty||n.push(a),n}static clip(e,t,i){const n=[];for(const s of e){const r=s.original.intersect(t),a=s.modified.intersect(i);r&&!r.isEmpty&&a&&!a.isEmpty&&n.push(new Cr(r,a))}return n}constructor(e,t){this.original=e,this.modified=t}toString(){return`{${this.original.toString()}->${this.modified.toString()}}`}flip(){return new Cr(this.modified,this.original)}join(e){return new Cr(this.original.join(e.original),this.modified.join(e.modified))}toRangeMapping(){const e=this.original.toInclusiveRange(),t=this.modified.toInclusiveRange();if(e&&t)return new Il(e,t);if(this.original.startLineNumber===1||this.modified.startLineNumber===1){if(!(this.modified.startLineNumber===1&&this.original.startLineNumber===1))throw new wi("not a valid diff");return new Il(new M(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new M(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1))}else return new Il(new M(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),new M(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER))}toRangeMapping2(e,t){if(Iie(this.original.endLineNumberExclusive,e)&&Iie(this.modified.endLineNumberExclusive,t))return new Il(new M(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new M(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1));if(!this.original.isEmpty&&!this.modified.isEmpty)return new Il(M.fromPositions(new G(this.original.startLineNumber,1),ew(new G(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),e)),M.fromPositions(new G(this.modified.startLineNumber,1),ew(new G(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),t)));if(this.original.startLineNumber>1&&this.modified.startLineNumber>1)return new Il(M.fromPositions(ew(new G(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER),e),ew(new G(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),e)),M.fromPositions(ew(new G(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER),t),ew(new G(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),t)));throw new wi}}function ew(o,e){if(o.lineNumber<1)return new G(1,1);if(o.lineNumber>e.length)return new G(e.length,e[e.length-1].length+1);const t=e[o.lineNumber-1];return o.column>t.length+1?new G(o.lineNumber,t.length+1):o}function Iie(o,e){return o>=1&&o<=e.length}class Vl extends Cr{static fromRangeMappings(e){const t=It.join(e.map(n=>It.fromRangeInclusive(n.originalRange))),i=It.join(e.map(n=>It.fromRangeInclusive(n.modifiedRange)));return new Vl(t,i,e)}constructor(e,t,i){super(e,t),this.innerChanges=i}flip(){var e;return new Vl(this.modified,this.original,(e=this.innerChanges)==null?void 0:e.map(t=>t.flip()))}withInnerChangesFromLineRanges(){return new Vl(this.original,this.modified,[this.toRangeMapping()])}}class Il{static assertSorted(e){for(let t=1;t<e.length;t++){const i=e[t-1],n=e[t];if(!(i.originalRange.getEndPosition().isBeforeOrEqual(n.originalRange.getStartPosition())&&i.modifiedRange.getEndPosition().isBeforeOrEqual(n.modifiedRange.getStartPosition())))throw new wi("Range mappings must be sorted")}}constructor(e,t){this.originalRange=e,this.modifiedRange=t}toString(){return`{${this.originalRange.toString()}->${this.modifiedRange.toString()}}`}flip(){return new Il(this.modifiedRange,this.originalRange)}toTextEdit(e){const t=e.getValueOfRange(this.modifiedRange);return new Mh(this.originalRange,t)}}const mTe=3;class _Te{computeDiff(e,t,i){var l;const s=new CTe(e,t,{maxComputationTime:i.maxComputationTimeMs,shouldIgnoreTrimWhitespace:i.ignoreTrimWhitespace,shouldComputeCharChanges:!0,shouldMakePrettyDiff:!0,shouldPostProcessCharChanges:!0}).computeDiff(),r=[];let a=null;for(const c of s.changes){let u;c.originalEndLineNumber===0?u=new It(c.originalStartLineNumber+1,c.originalStartLineNumber+1):u=new It(c.originalStartLineNumber,c.originalEndLineNumber+1);let f;c.modifiedEndLineNumber===0?f=new It(c.modifiedStartLineNumber+1,c.modifiedStartLineNumber+1):f=new It(c.modifiedStartLineNumber,c.modifiedEndLineNumber+1);let g=new Vl(u,f,(l=c.charChanges)==null?void 0:l.map(p=>new Il(new M(p.originalStartLineNumber,p.originalStartColumn,p.originalEndLineNumber,p.originalEndColumn),new M(p.modifiedStartLineNumber,p.modifiedStartColumn,p.modifiedEndLineNumber,p.modifiedEndColumn))));a&&(a.modified.endLineNumberExclusive===g.modified.startLineNumber||a.original.endLineNumberExclusive===g.original.startLineNumber)&&(g=new Vl(a.original.join(g.original),a.modified.join(g.modified),a.innerChanges&&g.innerChanges?a.innerChanges.concat(g.innerChanges):void 0),r.pop()),r.push(g),a=g}return cC(()=>Yq(r,(c,u)=>u.original.startLineNumber-c.original.endLineNumberExclusive===u.modified.startLineNumber-c.modified.endLineNumberExclusive&&c.original.endLineNumberExclusive<u.original.startLineNumber&&c.modified.endLineNumberExclusive<u.modified.startLineNumber)),new _M(r,[],s.quitEarly)}}function ede(o,e,t,i){return new bh(o,e,t).ComputeDiff(i)}let Tie=class{constructor(e){const t=[],i=[];for(let n=0,s=e.length;n<s;n++)t[n]=LV(e[n],1),i[n]=xV(e[n],1);this.lines=e,this._startColumns=t,this._endColumns=i}getElements(){const e=[];for(let t=0,i=this.lines.length;t<i;t++)e[t]=this.lines[t].substring(this._startColumns[t]-1,this._endColumns[t]-1);return e}getStrictElement(e){return this.lines[e]}getStartLineNumber(e){return e+1}getEndLineNumber(e){return e+1}createCharSequence(e,t,i){const n=[],s=[],r=[];let a=0;for(let l=t;l<=i;l++){const c=this.lines[l],u=e?this._startColumns[l]:1,f=e?this._endColumns[l]:c.length+1;for(let g=u;g<f;g++)n[a]=c.charCodeAt(g-1),s[a]=l+1,r[a]=g,a++;!e&&l<i&&(n[a]=10,s[a]=l+1,r[a]=c.length+1,a++)}return new vTe(n,s,r)}};class vTe{constructor(e,t,i){this._charCodes=e,this._lineNumbers=t,this._columns=i}toString(){return"["+this._charCodes.map((e,t)=>(e===10?"\\n":String.fromCharCode(e))+`-(${this._lineNumbers[t]},${this._columns[t]})`).join(", ")+"]"}_assertIndex(e,t){if(e<0||e>=t.length)throw new Error("Illegal index")}getElements(){return this._charCodes}getStartLineNumber(e){return e>0&&e===this._lineNumbers.length?this.getEndLineNumber(e-1):(this._assertIndex(e,this._lineNumbers),this._lineNumbers[e])}getEndLineNumber(e){return e===-1?this.getStartLineNumber(e+1):(this._assertIndex(e,this._lineNumbers),this._charCodes[e]===10?this._lineNumbers[e]+1:this._lineNumbers[e])}getStartColumn(e){return e>0&&e===this._columns.length?this.getEndColumn(e-1):(this._assertIndex(e,this._columns),this._columns[e])}getEndColumn(e){return e===-1?this.getStartColumn(e+1):(this._assertIndex(e,this._columns),this._charCodes[e]===10?1:this._columns[e]+1)}}class b1{constructor(e,t,i,n,s,r,a,l){this.originalStartLineNumber=e,this.originalStartColumn=t,this.originalEndLineNumber=i,this.originalEndColumn=n,this.modifiedStartLineNumber=s,this.modifiedStartColumn=r,this.modifiedEndLineNumber=a,this.modifiedEndColumn=l}static createFromDiffChange(e,t,i){const n=t.getStartLineNumber(e.originalStart),s=t.getStartColumn(e.originalStart),r=t.getEndLineNumber(e.originalStart+e.originalLength-1),a=t.getEndColumn(e.originalStart+e.originalLength-1),l=i.getStartLineNumber(e.modifiedStart),c=i.getStartColumn(e.modifiedStart),u=i.getEndLineNumber(e.modifiedStart+e.modifiedLength-1),f=i.getEndColumn(e.modifiedStart+e.modifiedLength-1);return new b1(n,s,r,a,l,c,u,f)}}function bTe(o){if(o.length<=1)return o;const e=[o[0]];let t=e[0];for(let i=1,n=o.length;i<n;i++){const s=o[i],r=s.originalStart-(t.originalStart+t.originalLength),a=s.modifiedStart-(t.modifiedStart+t.modifiedLength);Math.min(r,a)<mTe?(t.originalLength=s.originalStart+s.originalLength-t.originalStart,t.modifiedLength=s.modifiedStart+s.modifiedLength-t.modifiedStart):(e.push(s),t=s)}return e}class ok{constructor(e,t,i,n,s){this.originalStartLineNumber=e,this.originalEndLineNumber=t,this.modifiedStartLineNumber=i,this.modifiedEndLineNumber=n,this.charChanges=s}static createFromDiffResult(e,t,i,n,s,r,a){let l,c,u,f,g;if(t.originalLength===0?(l=i.getStartLineNumber(t.originalStart)-1,c=0):(l=i.getStartLineNumber(t.originalStart),c=i.getEndLineNumber(t.originalStart+t.originalLength-1)),t.modifiedLength===0?(u=n.getStartLineNumber(t.modifiedStart)-1,f=0):(u=n.getStartLineNumber(t.modifiedStart),f=n.getEndLineNumber(t.modifiedStart+t.modifiedLength-1)),r&&t.originalLength>0&&t.originalLength<20&&t.modifiedLength>0&&t.modifiedLength<20&&s()){const p=i.createCharSequence(e,t.originalStart,t.originalStart+t.originalLength-1),_=n.createCharSequence(e,t.modifiedStart,t.modifiedStart+t.modifiedLength-1);if(p.getElements().length>0&&_.getElements().length>0){let b=ede(p,_,s,!0).changes;a&&(b=bTe(b)),g=[];for(let y=0,S=b.length;y<S;y++)g.push(b1.createFromDiffChange(b[y],p,_))}}return new ok(l,c,u,f,g)}}class CTe{constructor(e,t,i){this.shouldComputeCharChanges=i.shouldComputeCharChanges,this.shouldPostProcessCharChanges=i.shouldPostProcessCharChanges,this.shouldIgnoreTrimWhitespace=i.shouldIgnoreTrimWhitespace,this.shouldMakePrettyDiff=i.shouldMakePrettyDiff,this.originalLines=e,this.modifiedLines=t,this.original=new Tie(e),this.modified=new Tie(t),this.continueLineDiff=Nie(i.maxComputationTime),this.continueCharDiff=Nie(i.maxComputationTime===0?0:Math.min(i.maxComputationTime,5e3))}computeDiff(){if(this.original.lines.length===1&&this.original.lines[0].length===0)return this.modified.lines.length===1&&this.modified.lines[0].length===0?{quitEarly:!1,changes:[]}:{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:1,modifiedStartLineNumber:1,modifiedEndLineNumber:this.modified.lines.length,charChanges:void 0}]};if(this.modified.lines.length===1&&this.modified.lines[0].length===0)return{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:this.original.lines.length,modifiedStartLineNumber:1,modifiedEndLineNumber:1,charChanges:void 0}]};const e=ede(this.original,this.modified,this.continueLineDiff,this.shouldMakePrettyDiff),t=e.changes,i=e.quitEarly;if(this.shouldIgnoreTrimWhitespace){const a=[];for(let l=0,c=t.length;l<c;l++)a.push(ok.createFromDiffResult(this.shouldIgnoreTrimWhitespace,t[l],this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges));return{quitEarly:i,changes:a}}const n=[];let s=0,r=0;for(let a=-1,l=t.length;a<l;a++){const c=a+1<l?t[a+1]:null,u=c?c.originalStart:this.originalLines.length,f=c?c.modifiedStart:this.modifiedLines.length;for(;s<u&&r<f;){const g=this.originalLines[s],p=this.modifiedLines[r];if(g!==p){{let _=LV(g,1),b=LV(p,1);for(;_>1&&b>1;){const y=g.charCodeAt(_-2),S=p.charCodeAt(b-2);if(y!==S)break;_--,b--}(_>1||b>1)&&this._pushTrimWhitespaceCharChange(n,s+1,1,_,r+1,1,b)}{let _=xV(g,1),b=xV(p,1);const y=g.length+1,S=p.length+1;for(;_<y&&b<S;){const L=g.charCodeAt(_-1),x=g.charCodeAt(b-1);if(L!==x)break;_++,b++}(_<y||b<S)&&this._pushTrimWhitespaceCharChange(n,s+1,_,y,r+1,b,S)}}s++,r++}c&&(n.push(ok.createFromDiffResult(this.shouldIgnoreTrimWhitespace,c,this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges)),s+=c.originalLength,r+=c.modifiedLength)}return{quitEarly:i,changes:n}}_pushTrimWhitespaceCharChange(e,t,i,n,s,r,a){if(this._mergeTrimWhitespaceCharChange(e,t,i,n,s,r,a))return;let l;this.shouldComputeCharChanges&&(l=[new b1(t,i,t,n,s,r,s,a)]),e.push(new ok(t,t,s,s,l))}_mergeTrimWhitespaceCharChange(e,t,i,n,s,r,a){const l=e.length;if(l===0)return!1;const c=e[l-1];return c.originalEndLineNumber===0||c.modifiedEndLineNumber===0?!1:c.originalEndLineNumber===t&&c.modifiedEndLineNumber===s?(this.shouldComputeCharChanges&&c.charChanges&&c.charChanges.push(new b1(t,i,t,n,s,r,s,a)),!0):c.originalEndLineNumber+1===t&&c.modifiedEndLineNumber+1===s?(c.originalEndLineNumber=t,c.modifiedEndLineNumber=s,this.shouldComputeCharChanges&&c.charChanges&&c.charChanges.push(new b1(t,i,t,n,s,r,s,a)),!0):!1}}function LV(o,e){const t=Sr(o);return t===-1?e:t+1}function xV(o,e){const t=au(o);return t===-1?e:t+2}function Nie(o){if(o===0)return()=>!0;const e=Date.now();return()=>Date.now()-e<o}class gg{static trivial(e,t){return new gg([new js(Vt.ofLength(e.length),Vt.ofLength(t.length))],!1)}static trivialTimedOut(e,t){return new gg([new js(Vt.ofLength(e.length),Vt.ofLength(t.length))],!0)}constructor(e,t){this.diffs=e,this.hitTimeout=t}}class js{static invert(e,t){const i=[];return fle(e,(n,s)=>{i.push(js.fromOffsetPairs(n?n.getEndExclusives():tg.zero,s?s.getStarts():new tg(t,(n?n.seq2Range.endExclusive-n.seq1Range.endExclusive:0)+t)))}),i}static fromOffsetPairs(e,t){return new js(new Vt(e.offset1,t.offset1),new Vt(e.offset2,t.offset2))}static assertSorted(e){let t;for(const i of e){if(t&&!(t.seq1Range.endExclusive<=i.seq1Range.start&&t.seq2Range.endExclusive<=i.seq2Range.start))throw new wi("Sequence diffs must be sorted");t=i}}constructor(e,t){this.seq1Range=e,this.seq2Range=t}swap(){return new js(this.seq2Range,this.seq1Range)}toString(){return`${this.seq1Range} <-> ${this.seq2Range}`}join(e){return new js(this.seq1Range.join(e.seq1Range),this.seq2Range.join(e.seq2Range))}delta(e){return e===0?this:new js(this.seq1Range.delta(e),this.seq2Range.delta(e))}deltaStart(e){return e===0?this:new js(this.seq1Range.deltaStart(e),this.seq2Range.deltaStart(e))}deltaEnd(e){return e===0?this:new js(this.seq1Range.deltaEnd(e),this.seq2Range.deltaEnd(e))}intersect(e){const t=this.seq1Range.intersect(e.seq1Range),i=this.seq2Range.intersect(e.seq2Range);if(!(!t||!i))return new js(t,i)}getStarts(){return new tg(this.seq1Range.start,this.seq2Range.start)}getEndExclusives(){return new tg(this.seq1Range.endExclusive,this.seq2Range.endExclusive)}}const Iv=class Iv{constructor(e,t){this.offset1=e,this.offset2=t}toString(){return`${this.offset1} <-> ${this.offset2}`}delta(e){return e===0?this:new Iv(this.offset1+e,this.offset2+e)}equals(e){return this.offset1===e.offset1&&this.offset2===e.offset2}};Iv.zero=new Iv(0,0),Iv.max=new Iv(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER);let tg=Iv;const g2=class g2{isValid(){return!0}};g2.instance=new g2;let SD=g2;class yTe{constructor(e){if(this.timeout=e,this.startTime=Date.now(),this.valid=!0,e<=0)throw new wi("timeout must be positive")}isValid(){if(!(Date.now()-this.startTime<this.timeout)&&this.valid){this.valid=!1;debugger}return this.valid}}class r7{constructor(e,t){this.width=e,this.height=t,this.array=[],this.array=new Array(e*t)}get(e,t){return this.array[e+t*this.width]}set(e,t,i){this.array[e+t*this.width]=i}}function kV(o){return o===32||o===9}const jk=class jk{static getKey(e){let t=this.chrKeys.get(e);return t===void 0&&(t=this.chrKeys.size,this.chrKeys.set(e,t)),t}constructor(e,t,i){this.range=e,this.lines=t,this.source=i,this.histogram=[];let n=0;for(let s=e.startLineNumber-1;s<e.endLineNumberExclusive-1;s++){const r=t[s];for(let l=0;l<r.length;l++){n++;const c=r[l],u=jk.getKey(c);this.histogram[u]=(this.histogram[u]||0)+1}n++;const a=jk.getKey(`
`);this.histogram[a]=(this.histogram[a]||0)+1}this.totalCount=n}computeSimilarity(e){let t=0;const i=Math.max(this.histogram.length,e.histogram.length);for(let n=0;n<i;n++)t+=Math.abs((this.histogram[n]??0)-(e.histogram[n]??0));return 1-t/(this.totalCount+e.totalCount)}};jk.chrKeys=new Map;let TA=jk;class wTe{compute(e,t,i=SD.instance,n){if(e.length===0||t.length===0)return gg.trivial(e,t);const s=new r7(e.length,t.length),r=new r7(e.length,t.length),a=new r7(e.length,t.length);for(let _=0;_<e.length;_++)for(let b=0;b<t.length;b++){if(!i.isValid())return gg.trivialTimedOut(e,t);const y=_===0?0:s.get(_-1,b),S=b===0?0:s.get(_,b-1);let L;e.getElement(_)===t.getElement(b)?(_===0||b===0?L=0:L=s.get(_-1,b-1),_>0&&b>0&&r.get(_-1,b-1)===3&&(L+=a.get(_-1,b-1)),L+=n?n(_,b):1):L=-1;const x=Math.max(y,S,L);if(x===L){const k=_>0&&b>0?a.get(_-1,b-1):0;a.set(_,b,k+1),r.set(_,b,3)}else x===y?(a.set(_,b,0),r.set(_,b,1)):x===S&&(a.set(_,b,0),r.set(_,b,2));s.set(_,b,x)}const l=[];let c=e.length,u=t.length;function f(_,b){(_+1!==c||b+1!==u)&&l.push(new js(new Vt(_+1,c),new Vt(b+1,u))),c=_,u=b}let g=e.length-1,p=t.length-1;for(;g>=0&&p>=0;)r.get(g,p)===3?(f(g,p),g--,p--):r.get(g,p)===1?g--:p--;return f(-1,-1),l.reverse(),new gg(l,!1)}}class tde{compute(e,t,i=SD.instance){if(e.length===0||t.length===0)return gg.trivial(e,t);const n=e,s=t;function r(b,y){for(;b<n.length&&y<s.length&&n.getElement(b)===s.getElement(y);)b++,y++;return b}let a=0;const l=new STe;l.set(0,r(0,0));const c=new LTe;c.set(0,l.get(0)===0?null:new Rie(null,0,0,l.get(0)));let u=0;e:for(;;){if(a++,!i.isValid())return gg.trivialTimedOut(n,s);const b=-Math.min(a,s.length+a%2),y=Math.min(a,n.length+a%2);for(u=b;u<=y;u+=2){const S=u===y?-1:l.get(u+1),L=u===b?-1:l.get(u-1)+1,x=Math.min(Math.max(S,L),n.length),k=x-u;if(x>n.length||k>s.length)continue;const E=r(x,k);l.set(u,E);const N=x===S?c.get(u+1):c.get(u-1);if(c.set(u,E!==x?new Rie(N,x,k,E-x):N),l.get(u)===n.length&&l.get(u)-u===s.length)break e}}let f=c.get(u);const g=[];let p=n.length,_=s.length;for(;;){const b=f?f.x+f.length:0,y=f?f.y+f.length:0;if((b!==p||y!==_)&&g.push(new js(new Vt(b,p),new Vt(y,_))),!f)break;p=f.x,_=f.y,f=f.prev}return g.reverse(),new gg(g,!1)}}class Rie{constructor(e,t,i,n){this.prev=e,this.x=t,this.y=i,this.length=n}}class STe{constructor(){this.positiveArr=new Int32Array(10),this.negativeArr=new Int32Array(10)}get(e){return e<0?(e=-e-1,this.negativeArr[e]):this.positiveArr[e]}set(e,t){if(e<0){if(e=-e-1,e>=this.negativeArr.length){const i=this.negativeArr;this.negativeArr=new Int32Array(i.length*2),this.negativeArr.set(i)}this.negativeArr[e]=t}else{if(e>=this.positiveArr.length){const i=this.positiveArr;this.positiveArr=new Int32Array(i.length*2),this.positiveArr.set(i)}this.positiveArr[e]=t}}}class LTe{constructor(){this.positiveArr=[],this.negativeArr=[]}get(e){return e<0?(e=-e-1,this.negativeArr[e]):this.positiveArr[e]}set(e,t){e<0?(e=-e-1,this.negativeArr[e]=t):this.positiveArr[e]=t}}class NA{constructor(e,t,i){this.lines=e,this.range=t,this.considerWhitespaceChanges=i,this.elements=[],this.firstElementOffsetByLineIdx=[],this.lineStartOffsets=[],this.trimmedWsLengthsByLineIdx=[],this.firstElementOffsetByLineIdx.push(0);for(let n=this.range.startLineNumber;n<=this.range.endLineNumber;n++){let s=e[n-1],r=0;n===this.range.startLineNumber&&this.range.startColumn>1&&(r=this.range.startColumn-1,s=s.substring(r)),this.lineStartOffsets.push(r);let a=0;if(!i){const c=s.trimStart();a=s.length-c.length,s=c.trimEnd()}this.trimmedWsLengthsByLineIdx.push(a);const l=n===this.range.endLineNumber?Math.min(this.range.endColumn-1-r-a,s.length):s.length;for(let c=0;c<l;c++)this.elements.push(s.charCodeAt(c));n<this.range.endLineNumber&&(this.elements.push(10),this.firstElementOffsetByLineIdx.push(this.elements.length))}}toString(){return`Slice: "${this.text}"`}get text(){return this.getText(new Vt(0,this.length))}getText(e){return this.elements.slice(e.start,e.endExclusive).map(t=>String.fromCharCode(t)).join("")}getElement(e){return this.elements[e]}get length(){return this.elements.length}getBoundaryScore(e){const t=Aie(e>0?this.elements[e-1]:-1),i=Aie(e<this.elements.length?this.elements[e]:-1);if(t===7&&i===8)return 0;if(t===8)return 150;let n=0;return t!==i&&(n+=10,t===0&&i===1&&(n+=1)),n+=Mie(t),n+=Mie(i),n}translateOffset(e,t="right"){const i=yD(this.firstElementOffsetByLineIdx,s=>s<=e),n=e-this.firstElementOffsetByLineIdx[i];return new G(this.range.startLineNumber+i,1+this.lineStartOffsets[i]+n+(n===0&&t==="left"?0:this.trimmedWsLengthsByLineIdx[i]))}translateRange(e){const t=this.translateOffset(e.start,"right"),i=this.translateOffset(e.endExclusive,"left");return i.isBefore(t)?M.fromPositions(i,i):M.fromPositions(t,i)}findWordContaining(e){if(e<0||e>=this.elements.length||!a7(this.elements[e]))return;let t=e;for(;t>0&&a7(this.elements[t-1]);)t--;let i=e;for(;i<this.elements.length&&a7(this.elements[i]);)i++;return new Vt(t,i)}countLinesIn(e){return this.translateOffset(e.endExclusive).lineNumber-this.translateOffset(e.start).lineNumber}isStronglyEqual(e,t){return this.elements[e]===this.elements[t]}extendToFullLines(e){const t=nS(this.firstElementOffsetByLineIdx,n=>n<=e.start)??0,i=cTe(this.firstElementOffsetByLineIdx,n=>e.endExclusive<=n)??this.elements.length;return new Vt(t,i)}}function a7(o){return o>=97&&o<=122||o>=65&&o<=90||o>=48&&o<=57}const xTe={0:0,1:0,2:0,3:10,4:2,5:30,6:3,7:10,8:10};function Mie(o){return xTe[o]}function Aie(o){return o===10?8:o===13?7:kV(o)?6:o>=97&&o<=122?0:o>=65&&o<=90?1:o>=48&&o<=57?2:o===-1?3:o===44||o===59?5:4}function kTe(o,e,t,i,n,s){let{moves:r,excludedChanges:a}=ETe(o,e,t,s);if(!s.isValid())return[];const l=o.filter(u=>!a.has(u)),c=ITe(l,i,n,e,t,s);return j9(r,c),r=TTe(r),r=r.filter(u=>{const f=u.original.toOffsetRange().slice(e).map(p=>p.trim());return f.join(`
`).length>=15&&DTe(f,p=>p.length>=2)>=2}),r=NTe(o,r),r}function DTe(o,e){let t=0;for(const i of o)e(i)&&t++;return t}function ETe(o,e,t,i){const n=[],s=o.filter(l=>l.modified.isEmpty&&l.original.length>=3).map(l=>new TA(l.original,e,l)),r=new Set(o.filter(l=>l.original.isEmpty&&l.modified.length>=3).map(l=>new TA(l.modified,t,l))),a=new Set;for(const l of s){let c=-1,u;for(const f of r){const g=l.computeSimilarity(f);g>c&&(c=g,u=f)}if(c>.9&&u&&(r.delete(u),n.push(new Cr(l.range,u.range)),a.add(l.source),a.add(u.source)),!i.isValid())return{moves:n,excludedChanges:a}}return{moves:n,excludedChanges:a}}function ITe(o,e,t,i,n,s){const r=[],a=new Qq;for(const g of o)for(let p=g.original.startLineNumber;p<g.original.endLineNumberExclusive-2;p++){const _=`${e[p-1]}:${e[p+1-1]}:${e[p+2-1]}`;a.add(_,{range:new It(p,p+3)})}const l=[];o.sort(Yr(g=>g.modified.startLineNumber,sd));for(const g of o){let p=[];for(let _=g.modified.startLineNumber;_<g.modified.endLineNumberExclusive-2;_++){const b=`${t[_-1]}:${t[_+1-1]}:${t[_+2-1]}`,y=new It(_,_+3),S=[];a.forEach(b,({range:L})=>{for(const k of p)if(k.originalLineRange.endLineNumberExclusive+1===L.endLineNumberExclusive&&k.modifiedLineRange.endLineNumberExclusive+1===y.endLineNumberExclusive){k.originalLineRange=new It(k.originalLineRange.startLineNumber,L.endLineNumberExclusive),k.modifiedLineRange=new It(k.modifiedLineRange.startLineNumber,y.endLineNumberExclusive),S.push(k);return}const x={modifiedLineRange:y,originalLineRange:L};l.push(x),S.push(x)}),p=S}if(!s.isValid())return[]}l.sort(mle(Yr(g=>g.modifiedLineRange.length,sd)));const c=new vc,u=new vc;for(const g of l){const p=g.modifiedLineRange.startLineNumber-g.originalLineRange.startLineNumber,_=c.subtractFrom(g.modifiedLineRange),b=u.subtractFrom(g.originalLineRange).getWithDelta(p),y=_.getIntersection(b);for(const S of y.ranges){if(S.length<3)continue;const L=S,x=S.delta(-p);r.push(new Cr(x,L)),c.addRange(L),u.addRange(x)}}r.sort(Yr(g=>g.original.startLineNumber,sd));const f=new IA(o);for(let g=0;g<r.length;g++){const p=r[g],_=f.findLastMonotonous(N=>N.original.startLineNumber<=p.original.startLineNumber),b=nS(o,N=>N.modified.startLineNumber<=p.modified.startLineNumber),y=Math.max(p.original.startLineNumber-_.original.startLineNumber,p.modified.startLineNumber-b.modified.startLineNumber),S=f.findLastMonotonous(N=>N.original.startLineNumber<p.original.endLineNumberExclusive),L=nS(o,N=>N.modified.startLineNumber<p.modified.endLineNumberExclusive),x=Math.max(S.original.endLineNumberExclusive-p.original.endLineNumberExclusive,L.modified.endLineNumberExclusive-p.modified.endLineNumberExclusive);let k;for(k=0;k<y;k++){const N=p.original.startLineNumber-k-1,A=p.modified.startLineNumber-k-1;if(N>i.length||A>n.length||c.contains(A)||u.contains(N)||!Pie(i[N-1],n[A-1],s))break}k>0&&(u.addRange(new It(p.original.startLineNumber-k,p.original.startLineNumber)),c.addRange(new It(p.modified.startLineNumber-k,p.modified.startLineNumber)));let E;for(E=0;E<x;E++){const N=p.original.endLineNumberExclusive+E,A=p.modified.endLineNumberExclusive+E;if(N>i.length||A>n.length||c.contains(A)||u.contains(N)||!Pie(i[N-1],n[A-1],s))break}E>0&&(u.addRange(new It(p.original.endLineNumberExclusive,p.original.endLineNumberExclusive+E)),c.addRange(new It(p.modified.endLineNumberExclusive,p.modified.endLineNumberExclusive+E))),(k>0||E>0)&&(r[g]=new Cr(new It(p.original.startLineNumber-k,p.original.endLineNumberExclusive+E),new It(p.modified.startLineNumber-k,p.modified.endLineNumberExclusive+E)))}return r}function Pie(o,e,t){if(o.trim()===e.trim())return!0;if(o.length>300&&e.length>300)return!1;const n=new tde().compute(new NA([o],new M(1,1,1,o.length),!1),new NA([e],new M(1,1,1,e.length),!1),t);let s=0;const r=js.invert(n.diffs,o.length);for(const u of r)u.seq1Range.forEach(f=>{kV(o.charCodeAt(f))||s++});function a(u){let f=0;for(let g=0;g<o.length;g++)kV(u.charCodeAt(g))||f++;return f}const l=a(o.length>e.length?o:e);return s/l>.6&&l>10}function TTe(o){if(o.length===0)return o;o.sort(Yr(t=>t.original.startLineNumber,sd));const e=[o[0]];for(let t=1;t<o.length;t++){const i=e[e.length-1],n=o[t],s=n.original.startLineNumber-i.original.endLineNumberExclusive,r=n.modified.startLineNumber-i.modified.endLineNumberExclusive;if(s>=0&&r>=0&&s+r<=2){e[e.length-1]=i.join(n);continue}e.push(n)}return e}function NTe(o,e){const t=new IA(o);return e=e.filter(i=>{const n=t.findLastMonotonous(a=>a.original.startLineNumber<i.original.endLineNumberExclusive)||new Cr(new It(1,1),new It(1,1)),s=nS(o,a=>a.modified.startLineNumber<i.modified.endLineNumberExclusive);return n!==s}),e}function DV(o,e,t){let i=t;return i=Oie(o,e,i),i=Oie(o,e,i),i=RTe(o,e,i),i}function Oie(o,e,t){if(t.length===0)return t;const i=[];i.push(t[0]);for(let s=1;s<t.length;s++){const r=i[i.length-1];let a=t[s];if(a.seq1Range.isEmpty||a.seq2Range.isEmpty){const l=a.seq1Range.start-r.seq1Range.endExclusive;let c;for(c=1;c<=l&&!(o.getElement(a.seq1Range.start-c)!==o.getElement(a.seq1Range.endExclusive-c)||e.getElement(a.seq2Range.start-c)!==e.getElement(a.seq2Range.endExclusive-c));c++);if(c--,c===l){i[i.length-1]=new js(new Vt(r.seq1Range.start,a.seq1Range.endExclusive-l),new Vt(r.seq2Range.start,a.seq2Range.endExclusive-l));continue}a=a.delta(-c)}i.push(a)}const n=[];for(let s=0;s<i.length-1;s++){const r=i[s+1];let a=i[s];if(a.seq1Range.isEmpty||a.seq2Range.isEmpty){const l=r.seq1Range.start-a.seq1Range.endExclusive;let c;for(c=0;c<l&&!(!o.isStronglyEqual(a.seq1Range.start+c,a.seq1Range.endExclusive+c)||!e.isStronglyEqual(a.seq2Range.start+c,a.seq2Range.endExclusive+c));c++);if(c===l){i[s+1]=new js(new Vt(a.seq1Range.start+l,r.seq1Range.endExclusive),new Vt(a.seq2Range.start+l,r.seq2Range.endExclusive));continue}c>0&&(a=a.delta(c))}n.push(a)}return i.length>0&&n.push(i[i.length-1]),n}function RTe(o,e,t){if(!o.getBoundaryScore||!e.getBoundaryScore)return t;for(let i=0;i<t.length;i++){const n=i>0?t[i-1]:void 0,s=t[i],r=i+1<t.length?t[i+1]:void 0,a=new Vt(n?n.seq1Range.endExclusive+1:0,r?r.seq1Range.start-1:o.length),l=new Vt(n?n.seq2Range.endExclusive+1:0,r?r.seq2Range.start-1:e.length);s.seq1Range.isEmpty?t[i]=Fie(s,o,e,a,l):s.seq2Range.isEmpty&&(t[i]=Fie(s.swap(),e,o,l,a).swap())}return t}function Fie(o,e,t,i,n){let r=1;for(;o.seq1Range.start-r>=i.start&&o.seq2Range.start-r>=n.start&&t.isStronglyEqual(o.seq2Range.start-r,o.seq2Range.endExclusive-r)&&r<100;)r++;r--;let a=0;for(;o.seq1Range.start+a<i.endExclusive&&o.seq2Range.endExclusive+a<n.endExclusive&&t.isStronglyEqual(o.seq2Range.start+a,o.seq2Range.endExclusive+a)&&a<100;)a++;if(r===0&&a===0)return o;let l=0,c=-1;for(let u=-r;u<=a;u++){const f=o.seq2Range.start+u,g=o.seq2Range.endExclusive+u,p=o.seq1Range.start+u,_=e.getBoundaryScore(p)+t.getBoundaryScore(f)+t.getBoundaryScore(g);_>c&&(c=_,l=u)}return o.delta(l)}function MTe(o,e,t){const i=[];for(const n of t){const s=i[i.length-1];if(!s){i.push(n);continue}n.seq1Range.start-s.seq1Range.endExclusive<=2||n.seq2Range.start-s.seq2Range.endExclusive<=2?i[i.length-1]=new js(s.seq1Range.join(n.seq1Range),s.seq2Range.join(n.seq2Range)):i.push(n)}return i}function ATe(o,e,t){const i=js.invert(t,o.length),n=[];let s=new tg(0,0);function r(l,c){if(l.offset1<s.offset1||l.offset2<s.offset2)return;const u=o.findWordContaining(l.offset1),f=e.findWordContaining(l.offset2);if(!u||!f)return;let g=new js(u,f);const p=g.intersect(c);let _=p.seq1Range.length,b=p.seq2Range.length;for(;i.length>0;){const y=i[0];if(!(y.seq1Range.intersects(g.seq1Range)||y.seq2Range.intersects(g.seq2Range)))break;const L=o.findWordContaining(y.seq1Range.start),x=e.findWordContaining(y.seq2Range.start),k=new js(L,x),E=k.intersect(y);if(_+=E.seq1Range.length,b+=E.seq2Range.length,g=g.join(k),g.seq1Range.endExclusive>=y.seq1Range.endExclusive)i.shift();else break}_+b<(g.seq1Range.length+g.seq2Range.length)*2/3&&n.push(g),s=g.getEndExclusives()}for(;i.length>0;){const l=i.shift();l.seq1Range.isEmpty||(r(l.getStarts(),l),r(l.getEndExclusives().delta(-1),l))}return PTe(t,n)}function PTe(o,e){const t=[];for(;o.length>0||e.length>0;){const i=o[0],n=e[0];let s;i&&(!n||i.seq1Range.start<n.seq1Range.start)?s=o.shift():s=e.shift(),t.length>0&&t[t.length-1].seq1Range.endExclusive>=s.seq1Range.start?t[t.length-1]=t[t.length-1].join(s):t.push(s)}return t}function OTe(o,e,t){let i=t;if(i.length===0)return i;let n=0,s;do{s=!1;const r=[i[0]];for(let a=1;a<i.length;a++){let u=function(g,p){const _=new Vt(c.seq1Range.endExclusive,l.seq1Range.start);return o.getText(_).replace(/\s/g,"").length<=4&&(g.seq1Range.length+g.seq2Range.length>5||p.seq1Range.length+p.seq2Range.length>5)};const l=i[a],c=r[r.length-1];u(c,l)?(s=!0,r[r.length-1]=r[r.length-1].join(l)):r.push(l)}i=r}while(n++<10&&s);return i}function FTe(o,e,t){let i=t;if(i.length===0)return i;let n=0,s;do{s=!1;const a=[i[0]];for(let l=1;l<i.length;l++){let f=function(p,_){const b=new Vt(u.seq1Range.endExclusive,c.seq1Range.start);if(o.countLinesIn(b)>5||b.length>500)return!1;const S=o.getText(b).trim();if(S.length>20||S.split(/\r\n|\r|\n/).length>1)return!1;const L=o.countLinesIn(p.seq1Range),x=p.seq1Range.length,k=e.countLinesIn(p.seq2Range),E=p.seq2Range.length,N=o.countLinesIn(_.seq1Range),A=_.seq1Range.length,P=e.countLinesIn(_.seq2Range),H=_.seq2Range.length,ee=2*40+50;function Q(te){return Math.min(te,ee)}return Math.pow(Math.pow(Q(L*40+x),1.5)+Math.pow(Q(k*40+E),1.5),1.5)+Math.pow(Math.pow(Q(N*40+A),1.5)+Math.pow(Q(P*40+H),1.5),1.5)>(ee**1.5)**1.5*1.3};const c=i[l],u=a[a.length-1];f(u,c)?(s=!0,a[a.length-1]=a[a.length-1].join(c)):a.push(c)}i=a}while(n++<10&&s);const r=[];return xLe(i,(a,l,c)=>{let u=l;function f(S){return S.length>0&&S.trim().length<=3&&l.seq1Range.length+l.seq2Range.length>100}const g=o.extendToFullLines(l.seq1Range),p=o.getText(new Vt(g.start,l.seq1Range.start));f(p)&&(u=u.deltaStart(-p.length));const _=o.getText(new Vt(l.seq1Range.endExclusive,g.endExclusive));f(_)&&(u=u.deltaEnd(_.length));const b=js.fromOffsetPairs(a?a.getEndExclusives():tg.zero,c?c.getStarts():tg.max),y=u.intersect(b);r.length>0&&y.getStarts().equals(r[r.length-1].getEndExclusives())?r[r.length-1]=r[r.length-1].join(y):r.push(y)}),r}class Bie{constructor(e,t){this.trimmedHash=e,this.lines=t}getElement(e){return this.trimmedHash[e]}get length(){return this.trimmedHash.length}getBoundaryScore(e){const t=e===0?0:Wie(this.lines[e-1]),i=e===this.lines.length?0:Wie(this.lines[e]);return 1e3-(t+i)}getText(e){return this.lines.slice(e.start,e.endExclusive).join(`
`)}isStronglyEqual(e,t){return this.lines[e]===this.lines[t]}}function Wie(o){let e=0;for(;e<o.length&&(o.charCodeAt(e)===32||o.charCodeAt(e)===9);)e++;return e}class ide{constructor(){this.dynamicProgrammingDiffing=new wTe,this.myersDiffingAlgorithm=new tde}computeDiff(e,t,i){if(e.length<=1&&En(e,t,(E,N)=>E===N))return new _M([],[],!1);if(e.length===1&&e[0].length===0||t.length===1&&t[0].length===0)return new _M([new Vl(new It(1,e.length+1),new It(1,t.length+1),[new Il(new M(1,1,e.length,e[e.length-1].length+1),new M(1,1,t.length,t[t.length-1].length+1))])],[],!1);const n=i.maxComputationTimeMs===0?SD.instance:new yTe(i.maxComputationTimeMs),s=!i.ignoreTrimWhitespace,r=new Map;function a(E){let N=r.get(E);return N===void 0&&(N=r.size,r.set(E,N)),N}const l=e.map(E=>a(E.trim())),c=t.map(E=>a(E.trim())),u=new Bie(l,e),f=new Bie(c,t),g=u.length+f.length<1700?this.dynamicProgrammingDiffing.compute(u,f,n,(E,N)=>e[E]===t[N]?t[N].length===0?.1:1+Math.log(1+t[N].length):.99):this.myersDiffingAlgorithm.compute(u,f,n);let p=g.diffs,_=g.hitTimeout;p=DV(u,f,p),p=OTe(u,f,p);const b=[],y=E=>{if(s)for(let N=0;N<E;N++){const A=S+N,P=L+N;if(e[A]!==t[P]){const H=this.refineDiff(e,t,new js(new Vt(A,A+1),new Vt(P,P+1)),n,s);for(const ee of H.mappings)b.push(ee);H.hitTimeout&&(_=!0)}}};let S=0,L=0;for(const E of p){cC(()=>E.seq1Range.start-S===E.seq2Range.start-L);const N=E.seq1Range.start-S;y(N),S=E.seq1Range.endExclusive,L=E.seq2Range.endExclusive;const A=this.refineDiff(e,t,E,n,s);A.hitTimeout&&(_=!0);for(const P of A.mappings)b.push(P)}y(e.length-S);const x=Hie(b,e,t);let k=[];return i.computeMoves&&(k=this.computeMoves(x,e,t,l,c,n,s)),cC(()=>{function E(A,P){if(A.lineNumber<1||A.lineNumber>P.length)return!1;const H=P[A.lineNumber-1];return!(A.column<1||A.column>H.length+1)}function N(A,P){return!(A.startLineNumber<1||A.startLineNumber>P.length+1||A.endLineNumberExclusive<1||A.endLineNumberExclusive>P.length+1)}for(const A of x){if(!A.innerChanges)return!1;for(const P of A.innerChanges)if(!(E(P.modifiedRange.getStartPosition(),t)&&E(P.modifiedRange.getEndPosition(),t)&&E(P.originalRange.getStartPosition(),e)&&E(P.originalRange.getEndPosition(),e)))return!1;if(!N(A.modified,t)||!N(A.original,e))return!1}return!0}),new _M(x,k,_)}computeMoves(e,t,i,n,s,r,a){return kTe(e,t,i,n,s,r).map(u=>{const f=this.refineDiff(t,i,new js(u.original.toOffsetRange(),u.modified.toOffsetRange()),r,a),g=Hie(f.mappings,t,i,!0);return new Qce(u,g)})}refineDiff(e,t,i,n,s){const a=WTe(i).toRangeMapping2(e,t),l=new NA(e,a.originalRange,s),c=new NA(t,a.modifiedRange,s),u=l.length+c.length<500?this.dynamicProgrammingDiffing.compute(l,c,n):this.myersDiffingAlgorithm.compute(l,c,n);let f=u.diffs;return f=DV(l,c,f),f=ATe(l,c,f),f=MTe(l,c,f),f=FTe(l,c,f),{mappings:f.map(p=>new Il(l.translateRange(p.seq1Range),c.translateRange(p.seq2Range))),hitTimeout:u.hitTimeout}}}function Hie(o,e,t,i=!1){const n=[];for(const s of vq(o.map(r=>BTe(r,e,t)),(r,a)=>r.original.overlapOrTouch(a.original)||r.modified.overlapOrTouch(a.modified))){const r=s[0],a=s[s.length-1];n.push(new Vl(r.original.join(a.original),r.modified.join(a.modified),s.map(l=>l.innerChanges[0])))}return cC(()=>!i&&n.length>0&&(n[0].modified.startLineNumber!==n[0].original.startLineNumber||t.length-n[n.length-1].modified.endLineNumberExclusive!==e.length-n[n.length-1].original.endLineNumberExclusive)?!1:Yq(n,(s,r)=>r.original.startLineNumber-s.original.endLineNumberExclusive===r.modified.startLineNumber-s.modified.endLineNumberExclusive&&s.original.endLineNumberExclusive<r.original.startLineNumber&&s.modified.endLineNumberExclusive<r.modified.startLineNumber)),n}function BTe(o,e,t){let i=0,n=0;o.modifiedRange.endColumn===1&&o.originalRange.endColumn===1&&o.originalRange.startLineNumber+i<=o.originalRange.endLineNumber&&o.modifiedRange.startLineNumber+i<=o.modifiedRange.endLineNumber&&(n=-1),o.modifiedRange.startColumn-1>=t[o.modifiedRange.startLineNumber-1].length&&o.originalRange.startColumn-1>=e[o.originalRange.startLineNumber-1].length&&o.originalRange.startLineNumber<=o.originalRange.endLineNumber+n&&o.modifiedRange.startLineNumber<=o.modifiedRange.endLineNumber+n&&(i=1);const s=new It(o.originalRange.startLineNumber+i,o.originalRange.endLineNumber+1+n),r=new It(o.modifiedRange.startLineNumber+i,o.modifiedRange.endLineNumber+1+n);return new Vl(s,r,[o])}function WTe(o){return new Cr(new It(o.seq1Range.start+1,o.seq1Range.endExclusive+1),new It(o.seq2Range.start+1,o.seq2Range.endExclusive+1))}const Vie={getLegacy:()=>new _Te,getDefault:()=>new ide};function cm(o,e){const t=Math.pow(10,e);return Math.round(o*t)/t}class li{constructor(e,t,i,n=1){this._rgbaBrand=void 0,this.r=Math.min(255,Math.max(0,e))|0,this.g=Math.min(255,Math.max(0,t))|0,this.b=Math.min(255,Math.max(0,i))|0,this.a=cm(Math.max(Math.min(1,n),0),3)}static equals(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a}}class Xc{constructor(e,t,i,n){this._hslaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=cm(Math.max(Math.min(1,t),0),3),this.l=cm(Math.max(Math.min(1,i),0),3),this.a=cm(Math.max(Math.min(1,n),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.l===t.l&&e.a===t.a}static fromRGBA(e){const t=e.r/255,i=e.g/255,n=e.b/255,s=e.a,r=Math.max(t,i,n),a=Math.min(t,i,n);let l=0,c=0;const u=(a+r)/2,f=r-a;if(f>0){switch(c=Math.min(u<=.5?f/(2*u):f/(2-2*u),1),r){case t:l=(i-n)/f+(i<n?6:0);break;case i:l=(n-t)/f+2;break;case n:l=(t-i)/f+4;break}l*=60,l=Math.round(l)}return new Xc(l,c,u,s)}static _hue2rgb(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+(t-e)*6*i:i<1/2?t:i<2/3?e+(t-e)*(2/3-i)*6:e}static toRGBA(e){const t=e.h/360,{s:i,l:n,a:s}=e;let r,a,l;if(i===0)r=a=l=n;else{const c=n<.5?n*(1+i):n+i-n*i,u=2*n-c;r=Xc._hue2rgb(u,c,t+1/3),a=Xc._hue2rgb(u,c,t),l=Xc._hue2rgb(u,c,t-1/3)}return new li(Math.round(r*255),Math.round(a*255),Math.round(l*255),s)}}class xh{constructor(e,t,i,n){this._hsvaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=cm(Math.max(Math.min(1,t),0),3),this.v=cm(Math.max(Math.min(1,i),0),3),this.a=cm(Math.max(Math.min(1,n),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.v===t.v&&e.a===t.a}static fromRGBA(e){const t=e.r/255,i=e.g/255,n=e.b/255,s=Math.max(t,i,n),r=Math.min(t,i,n),a=s-r,l=s===0?0:a/s;let c;return a===0?c=0:s===t?c=((i-n)/a%6+6)%6:s===i?c=(n-t)/a+2:c=(t-i)/a+4,new xh(Math.round(c*60),l,s,e.a)}static toRGBA(e){const{h:t,s:i,v:n,a:s}=e,r=n*i,a=r*(1-Math.abs(t/60%2-1)),l=n-r;let[c,u,f]=[0,0,0];return t<60?(c=r,u=a):t<120?(c=a,u=r):t<180?(u=r,f=a):t<240?(u=a,f=r):t<300?(c=a,f=r):t<=360&&(c=r,f=a),c=Math.round((c+l)*255),u=Math.round((u+l)*255),f=Math.round((f+l)*255),new li(c,u,f,s)}}const ns=class ns{static fromHex(e){return ns.Format.CSS.parseHex(e)||ns.red}static equals(e,t){return!e&&!t?!0:!e||!t?!1:e.equals(t)}get hsla(){return this._hsla?this._hsla:Xc.fromRGBA(this.rgba)}get hsva(){return this._hsva?this._hsva:xh.fromRGBA(this.rgba)}constructor(e){if(e)if(e instanceof li)this.rgba=e;else if(e instanceof Xc)this._hsla=e,this.rgba=Xc.toRGBA(e);else if(e instanceof xh)this._hsva=e,this.rgba=xh.toRGBA(e);else throw new Error("Invalid color ctor argument");else throw new Error("Color needs a value")}equals(e){return!!e&&li.equals(this.rgba,e.rgba)&&Xc.equals(this.hsla,e.hsla)&&xh.equals(this.hsva,e.hsva)}getRelativeLuminance(){const e=ns._relativeLuminanceForComponent(this.rgba.r),t=ns._relativeLuminanceForComponent(this.rgba.g),i=ns._relativeLuminanceForComponent(this.rgba.b),n=.2126*e+.7152*t+.0722*i;return cm(n,4)}static _relativeLuminanceForComponent(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}isLighter(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3>=128}isLighterThan(e){const t=this.getRelativeLuminance(),i=e.getRelativeLuminance();return t>i}isDarkerThan(e){const t=this.getRelativeLuminance(),i=e.getRelativeLuminance();return t<i}lighten(e){return new ns(new Xc(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*e,this.hsla.a))}darken(e){return new ns(new Xc(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*e,this.hsla.a))}transparent(e){const{r:t,g:i,b:n,a:s}=this.rgba;return new ns(new li(t,i,n,s*e))}isTransparent(){return this.rgba.a===0}isOpaque(){return this.rgba.a===1}opposite(){return new ns(new li(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))}makeOpaque(e){if(this.isOpaque()||e.rgba.a!==1)return this;const{r:t,g:i,b:n,a:s}=this.rgba;return new ns(new li(e.rgba.r-s*(e.rgba.r-t),e.rgba.g-s*(e.rgba.g-i),e.rgba.b-s*(e.rgba.b-n),1))}toString(){return this._toString||(this._toString=ns.Format.CSS.format(this)),this._toString}static getLighterColor(e,t,i){if(e.isLighterThan(t))return e;i=i||.5;const n=e.getRelativeLuminance(),s=t.getRelativeLuminance();return i=i*(s-n)/s,e.lighten(i)}static getDarkerColor(e,t,i){if(e.isDarkerThan(t))return e;i=i||.5;const n=e.getRelativeLuminance(),s=t.getRelativeLuminance();return i=i*(n-s)/n,e.darken(i)}};ns.white=new ns(new li(255,255,255,1)),ns.black=new ns(new li(0,0,0,1)),ns.red=new ns(new li(255,0,0,1)),ns.blue=new ns(new li(0,0,255,1)),ns.green=new ns(new li(0,255,0,1)),ns.cyan=new ns(new li(0,255,255,1)),ns.lightgrey=new ns(new li(211,211,211,1)),ns.transparent=new ns(new li(0,0,0,0));let ue=ns;(function(o){(function(e){(function(t){function i(p){return p.rgba.a===1?`rgb(${p.rgba.r}, ${p.rgba.g}, ${p.rgba.b})`:o.Format.CSS.formatRGBA(p)}t.formatRGB=i;function n(p){return`rgba(${p.rgba.r}, ${p.rgba.g}, ${p.rgba.b}, ${+p.rgba.a.toFixed(2)})`}t.formatRGBA=n;function s(p){return p.hsla.a===1?`hsl(${p.hsla.h}, ${(p.hsla.s*100).toFixed(2)}%, ${(p.hsla.l*100).toFixed(2)}%)`:o.Format.CSS.formatHSLA(p)}t.formatHSL=s;function r(p){return`hsla(${p.hsla.h}, ${(p.hsla.s*100).toFixed(2)}%, ${(p.hsla.l*100).toFixed(2)}%, ${p.hsla.a.toFixed(2)})`}t.formatHSLA=r;function a(p){const _=p.toString(16);return _.length!==2?"0"+_:_}function l(p){return`#${a(p.rgba.r)}${a(p.rgba.g)}${a(p.rgba.b)}`}t.formatHex=l;function c(p,_=!1){return _&&p.rgba.a===1?o.Format.CSS.formatHex(p):`#${a(p.rgba.r)}${a(p.rgba.g)}${a(p.rgba.b)}${a(Math.round(p.rgba.a*255))}`}t.formatHexA=c;function u(p){return p.isOpaque()?o.Format.CSS.formatHex(p):o.Format.CSS.formatRGBA(p)}t.format=u;function f(p){const _=p.length;if(_===0||p.charCodeAt(0)!==35)return null;if(_===7){const b=16*g(p.charCodeAt(1))+g(p.charCodeAt(2)),y=16*g(p.charCodeAt(3))+g(p.charCodeAt(4)),S=16*g(p.charCodeAt(5))+g(p.charCodeAt(6));return new o(new li(b,y,S,1))}if(_===9){const b=16*g(p.charCodeAt(1))+g(p.charCodeAt(2)),y=16*g(p.charCodeAt(3))+g(p.charCodeAt(4)),S=16*g(p.charCodeAt(5))+g(p.charCodeAt(6)),L=16*g(p.charCodeAt(7))+g(p.charCodeAt(8));return new o(new li(b,y,S,L/255))}if(_===4){const b=g(p.charCodeAt(1)),y=g(p.charCodeAt(2)),S=g(p.charCodeAt(3));return new o(new li(16*b+b,16*y+y,16*S+S))}if(_===5){const b=g(p.charCodeAt(1)),y=g(p.charCodeAt(2)),S=g(p.charCodeAt(3)),L=g(p.charCodeAt(4));return new o(new li(16*b+b,16*y+y,16*S+S,(16*L+L)/255))}return null}t.parseHex=f;function g(p){switch(p){case 48:return 0;case 49:return 1;case 50:return 2;case 51:return 3;case 52:return 4;case 53:return 5;case 54:return 6;case 55:return 7;case 56:return 8;case 57:return 9;case 97:return 10;case 65:return 10;case 98:return 11;case 66:return 11;case 99:return 12;case 67:return 12;case 100:return 13;case 68:return 13;case 101:return 14;case 69:return 14;case 102:return 15;case 70:return 15}return 0}})(e.CSS||(e.CSS={}))})(o.Format||(o.Format={}))})(ue||(ue={}));function nde(o){const e=[];for(const t of o){const i=Number(t);(i||i===0&&t.replace(/\s/g,"")!=="")&&e.push(i)}return e}function sK(o,e,t,i){return{red:o/255,blue:t/255,green:e/255,alpha:i}}function hx(o,e){const t=e.index,i=e[0].length;if(!t)return;const n=o.positionAt(t);return{startLineNumber:n.lineNumber,startColumn:n.column,endLineNumber:n.lineNumber,endColumn:n.column+i}}function HTe(o,e){if(!o)return;const t=ue.Format.CSS.parseHex(e);if(t)return{range:o,color:sK(t.rgba.r,t.rgba.g,t.rgba.b,t.rgba.a)}}function zie(o,e,t){if(!o||e.length!==1)return;const n=e[0].values(),s=nde(n);return{range:o,color:sK(s[0],s[1],s[2],t?s[3]:1)}}function Uie(o,e,t){if(!o||e.length!==1)return;const n=e[0].values(),s=nde(n),r=new ue(new Xc(s[0],s[1]/100,s[2]/100,t?s[3]:1));return{range:o,color:sK(r.rgba.r,r.rgba.g,r.rgba.b,r.rgba.a)}}function fx(o,e){return typeof o=="string"?[...o.matchAll(e)]:o.findMatches(e)}function VTe(o){const e=[],i=fx(o,/\b(rgb|rgba|hsl|hsla)(\([0-9\s,.\%]*\))|(#)([A-Fa-f0-9]{3})\b|(#)([A-Fa-f0-9]{4})\b|(#)([A-Fa-f0-9]{6})\b|(#)([A-Fa-f0-9]{8})\b/gm);if(i.length>0)for(const n of i){const s=n.filter(c=>c!==void 0),r=s[1],a=s[2];if(!a)continue;let l;if(r==="rgb"){const c=/^\(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*\)$/gm;l=zie(hx(o,n),fx(a,c),!1)}else if(r==="rgba"){const c=/^\(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(0[.][0-9]+|[.][0-9]+|[01][.]|[01])\s*\)$/gm;l=zie(hx(o,n),fx(a,c),!0)}else if(r==="hsl"){const c=/^\(\s*(36[0]|3[0-5][0-9]|[12][0-9][0-9]|[1-9]?[0-9])\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*\)$/gm;l=Uie(hx(o,n),fx(a,c),!1)}else if(r==="hsla"){const c=/^\(\s*(36[0]|3[0-5][0-9]|[12][0-9][0-9]|[1-9]?[0-9])\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(0[.][0-9]+|[.][0-9]+|[01][.]|[01])\s*\)$/gm;l=Uie(hx(o,n),fx(a,c),!0)}else r==="#"&&(l=HTe(hx(o,n),r+a));l&&e.push(l)}return e}function zTe(o){return!o||typeof o.getValue!="function"||typeof o.positionAt!="function"?[]:VTe(o)}const $ie=new RegExp("\\bMARK:\\s*(.*)$","d"),UTe=/^-+|-+$/g;function $Te(o,e){var i;let t=[];if(e.findRegionSectionHeaders&&((i=e.foldingRules)!=null&&i.markers)){const n=jTe(o,e);t=t.concat(n)}if(e.findMarkSectionHeaders){const n=qTe(o);t=t.concat(n)}return t}function jTe(o,e){const t=[],i=o.getLineCount();for(let n=1;n<=i;n++){const s=o.getLineContent(n),r=s.match(e.foldingRules.markers.start);if(r){const a={startLineNumber:n,startColumn:r[0].length+1,endLineNumber:n,endColumn:s.length+1};if(a.endColumn>a.startColumn){const l={range:a,...sde(s.substring(r[0].length)),shouldBeInComments:!1};(l.text||l.hasSeparatorLine)&&t.push(l)}}}return t}function qTe(o){const e=[],t=o.getLineCount();for(let i=1;i<=t;i++){const n=o.getLineContent(i);KTe(n,i,e)}return e}function KTe(o,e,t){$ie.lastIndex=0;const i=$ie.exec(o);if(i){const n=i.indices[1][0]+1,s=i.indices[1][1]+1,r={startLineNumber:e,startColumn:n,endLineNumber:e,endColumn:s};if(r.endColumn>r.startColumn){const a={range:r,...sde(i[1]),shouldBeInComments:!0};(a.text||a.hasSeparatorLine)&&t.push(a)}}}function sde(o){o=o.trim();const e=o.startsWith("-");return o=o.replace(UTe,""),{text:o,hasSeparatorLine:e}}class GTe{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}insertValues(e,t){e=Jy(e);const i=this.values,n=this.prefixSum,s=t.length;return s===0?!1:(this.values=new Uint32Array(i.length+s),this.values.set(i.subarray(0,e),0),this.values.set(i.subarray(e),e+s),this.values.set(t,e),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(n.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}setValue(e,t){return e=Jy(e),t=Jy(t),this.values[e]===t?!1:(this.values[e]=t,e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),!0)}removeValues(e,t){e=Jy(e),t=Jy(t);const i=this.values,n=this.prefixSum;if(e>=i.length)return!1;const s=i.length-e;return t>=s&&(t=s),t===0?!1:(this.values=new Uint32Array(i.length-t),this.values.set(i.subarray(0,e),0),this.values.set(i.subarray(e+t),e),this.prefixSum=new Uint32Array(this.values.length),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(n.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=Jy(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let t=this.prefixSumValidIndex[0]+1;t===0&&(this.prefixSum[0]=this.values[0],t++),e>=this.values.length&&(e=this.values.length-1);for(let i=t;i<=e;i++)this.prefixSum[i]=this.prefixSum[i-1]+this.values[i];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let t=0,i=this.values.length-1,n=0,s=0,r=0;for(;t<=i;)if(n=t+(i-t)/2|0,s=this.prefixSum[n],r=s-this.values[n],e<r)i=n-1;else if(e>=s)t=n+1;else break;return new ode(n,e-r)}}class YTe{constructor(e){this._values=e,this._isValid=!1,this._validEndIndex=-1,this._prefixSum=[],this._indexBySum=[]}getTotalSum(){return this._ensureValid(),this._indexBySum.length}getPrefixSum(e){return this._ensureValid(),e===0?0:this._prefixSum[e-1]}getIndexOf(e){this._ensureValid();const t=this._indexBySum[e],i=t>0?this._prefixSum[t-1]:0;return new ode(t,e-i)}removeValues(e,t){this._values.splice(e,t),this._invalidate(e)}insertValues(e,t){this._values=BF(this._values,e,t),this._invalidate(e)}_invalidate(e){this._isValid=!1,this._validEndIndex=Math.min(this._validEndIndex,e-1)}_ensureValid(){if(!this._isValid){for(let e=this._validEndIndex+1,t=this._values.length;e<t;e++){const i=this._values[e],n=e>0?this._prefixSum[e-1]:0;this._prefixSum[e]=n+i;for(let s=0;s<i;s++)this._indexBySum[n+s]=e}this._prefixSum.length=this._values.length,this._indexBySum.length=this._prefixSum[this._prefixSum.length-1],this._isValid=!0,this._validEndIndex=this._values.length-1}}setValue(e,t){this._values[e]!==t&&(this._values[e]=t,this._invalidate(e))}}class ode{constructor(e,t){this.index=e,this.remainder=t,this._prefixSumIndexOfResultBrand=void 0,this.index=e,this.remainder=t}}class ZTe{constructor(e,t,i,n){this._uri=e,this._lines=t,this._eol=i,this._versionId=n,this._lineStarts=null,this._cachedTextValue=null}dispose(){this._lines.length=0}get version(){return this._versionId}getText(){return this._cachedTextValue===null&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue}onEvents(e){e.eol&&e.eol!==this._eol&&(this._eol=e.eol,this._lineStarts=null);const t=e.changes;for(const i of t)this._acceptDeleteRange(i.range),this._acceptInsertText(new G(i.range.startLineNumber,i.range.startColumn),i.text);this._versionId=e.versionId,this._cachedTextValue=null}_ensureLineStarts(){if(!this._lineStarts){const e=this._eol.length,t=this._lines.length,i=new Uint32Array(t);for(let n=0;n<t;n++)i[n]=this._lines[n].length+e;this._lineStarts=new GTe(i)}}_setLineText(e,t){this._lines[e]=t,this._lineStarts&&this._lineStarts.setValue(e,this._lines[e].length+this._eol.length)}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.startLineNumber-1].substring(e.endColumn-1));return}this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.endLineNumber-1].substring(e.endColumn-1)),this._lines.splice(e.startLineNumber,e.endLineNumber-e.startLineNumber),this._lineStarts&&this._lineStarts.removeValues(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t){if(t.length===0)return;const i=zh(t);if(i.length===1){this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+i[0]+this._lines[e.lineNumber-1].substring(e.column-1));return}i[i.length-1]+=this._lines[e.lineNumber-1].substring(e.column-1),this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+i[0]);const n=new Uint32Array(i.length-1);for(let s=1;s<i.length;s++)this._lines.splice(e.lineNumber+s-1,0,i[s]),n[s-1]=i[s].length+this._eol.length;this._lineStarts&&this._lineStarts.insertValues(e.lineNumber,n)}}const jie=60*1e3;class XTe extends X{constructor(e,t,i=!1){if(super(),this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),this._proxy=e,this._modelService=t,!i){const n=new Vq;n.cancelAndSet(()=>this._checkStopModelSync(),Math.round(jie/2)),this._register(n)}}dispose(){for(const e in this._syncedModels)$i(this._syncedModels[e]);this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),super.dispose()}ensureSyncedResources(e,t=!1){for(const i of e){const n=i.toString();this._syncedModels[n]||this._beginModelSync(i,t),this._syncedModels[n]&&(this._syncedModelsLastUsedTime[n]=new Date().getTime())}}_checkStopModelSync(){const e=new Date().getTime(),t=[];for(const i in this._syncedModelsLastUsedTime)e-this._syncedModelsLastUsedTime[i]>jie&&t.push(i);for(const i of t)this._stopModelSync(i)}_beginModelSync(e,t){const i=this._modelService.getModel(e);if(!i||!t&&i.isTooLargeForSyncing())return;const n=e.toString();this._proxy.$acceptNewModel({url:i.uri.toString(),lines:i.getLinesContent(),EOL:i.getEOL(),versionId:i.getVersionId()});const s=new le;s.add(i.onDidChangeContent(r=>{this._proxy.$acceptModelChanged(n.toString(),r)})),s.add(i.onWillDispose(()=>{this._stopModelSync(n)})),s.add(it(()=>{this._proxy.$acceptRemovedModel(n)})),this._syncedModels[n]=s}_stopModelSync(e){const t=this._syncedModels[e];delete this._syncedModels[e],delete this._syncedModelsLastUsedTime[e],$i(t)}}class QTe{constructor(){this._models=Object.create(null)}getModel(e){return this._models[e]}getModels(){const e=[];return Object.keys(this._models).forEach(t=>e.push(this._models[t])),e}$acceptNewModel(e){this._models[e.url]=new JTe(st.parse(e.url),e.lines,e.EOL,e.versionId)}$acceptModelChanged(e,t){if(!this._models[e])return;this._models[e].onEvents(t)}$acceptRemovedModel(e){this._models[e]&&delete this._models[e]}}class JTe extends ZTe{get uri(){return this._uri}get eol(){return this._eol}getValue(){return this.getText()}findMatches(e){const t=[];for(let i=0;i<this._lines.length;i++){const n=this._lines[i],s=this.offsetAt(new G(i+1,1)),r=n.matchAll(e);for(const a of r)(a.index||a.index===0)&&(a.index=a.index+s),t.push(a)}return t}getLinesContent(){return this._lines.slice(0)}getLineCount(){return this._lines.length}getLineContent(e){return this._lines[e-1]}getWordAtPosition(e,t){const i=lD(e.column,xq(t),this._lines[e.lineNumber-1],0);return i?new M(e.lineNumber,i.startColumn,e.lineNumber,i.endColumn):null}words(e){const t=this._lines,i=this._wordenize.bind(this);let n=0,s="",r=0,a=[];return{*[Symbol.iterator](){for(;;)if(r<a.length){const l=s.substring(a[r].start,a[r].end);r+=1,yield l}else if(n<t.length)s=t[n],a=i(s,e),r=0,n+=1;else break}}}getLineWords(e,t){const i=this._lines[e-1],n=this._wordenize(i,t),s=[];for(const r of n)s.push({word:i.substring(r.start,r.end),startColumn:r.start+1,endColumn:r.end+1});return s}_wordenize(e,t){const i=[];let n;for(t.lastIndex=0;(n=t.exec(e))&&n[0].length!==0;)i.push({start:n.index,end:n.index+n[0].length});return i}getValueInRange(e){if(e=this._validateRange(e),e.startLineNumber===e.endLineNumber)return this._lines[e.startLineNumber-1].substring(e.startColumn-1,e.endColumn-1);const t=this._eol,i=e.startLineNumber-1,n=e.endLineNumber-1,s=[];s.push(this._lines[i].substring(e.startColumn-1));for(let r=i+1;r<n;r++)s.push(this._lines[r]);return s.push(this._lines[n].substring(0,e.endColumn-1)),s.join(t)}offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.lineNumber-2)+(e.column-1)}positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();const t=this._lineStarts.getIndexOf(e),i=this._lines[t.index].length;return{lineNumber:1+t.index,column:1+Math.min(t.remainder,i)}}_validateRange(e){const t=this._validatePosition({lineNumber:e.startLineNumber,column:e.startColumn}),i=this._validatePosition({lineNumber:e.endLineNumber,column:e.endColumn});return t.lineNumber!==e.startLineNumber||t.column!==e.startColumn||i.lineNumber!==e.endLineNumber||i.column!==e.endColumn?{startLineNumber:t.lineNumber,startColumn:t.column,endLineNumber:i.lineNumber,endColumn:i.column}:e}_validatePosition(e){if(!G.isIPosition(e))throw new Error("bad position");let{lineNumber:t,column:i}=e,n=!1;if(t<1)t=1,i=1,n=!0;else if(t>this._lines.length)t=this._lines.length,i=this._lines[t-1].length+1,n=!0;else{const s=this._lines[t-1].length+1;i<1?(i=1,n=!0):i>s&&(i=s,n=!0)}return n?{lineNumber:t,column:i}:e}}const p2=class p2{constructor(){this._workerTextModelSyncServer=new QTe}dispose(){}_getModel(e){return this._workerTextModelSyncServer.getModel(e)}_getModels(){return this._workerTextModelSyncServer.getModels()}$acceptNewModel(e){this._workerTextModelSyncServer.$acceptNewModel(e)}$acceptModelChanged(e,t){this._workerTextModelSyncServer.$acceptModelChanged(e,t)}$acceptRemovedModel(e){this._workerTextModelSyncServer.$acceptRemovedModel(e)}async $computeUnicodeHighlights(e,t,i){const n=this._getModel(e);return n?eK.computeUnicodeHighlights(n,t,i):{ranges:[],hasMore:!1,ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0}}async $findSectionHeaders(e,t){const i=this._getModel(e);return i?$Te(i,t):[]}async $computeDiff(e,t,i,n){const s=this._getModel(e),r=this._getModel(t);return!s||!r?null:vM.computeDiff(s,r,i,n)}static computeDiff(e,t,i,n){const s=n==="advanced"?Vie.getDefault():Vie.getLegacy(),r=e.getLinesContent(),a=t.getLinesContent(),l=s.computeDiff(r,a,i),c=l.changes.length>0?!1:this._modelsAreIdentical(e,t);function u(f){return f.map(g=>{var p;return[g.original.startLineNumber,g.original.endLineNumberExclusive,g.modified.startLineNumber,g.modified.endLineNumberExclusive,(p=g.innerChanges)==null?void 0:p.map(_=>[_.originalRange.startLineNumber,_.originalRange.startColumn,_.originalRange.endLineNumber,_.originalRange.endColumn,_.modifiedRange.startLineNumber,_.modifiedRange.startColumn,_.modifiedRange.endLineNumber,_.modifiedRange.endColumn])]})}return{identical:c,quitEarly:l.hitTimeout,changes:u(l.changes),moves:l.moves.map(f=>[f.lineRangeMapping.original.startLineNumber,f.lineRangeMapping.original.endLineNumberExclusive,f.lineRangeMapping.modified.startLineNumber,f.lineRangeMapping.modified.endLineNumberExclusive,u(f.changes)])}}static _modelsAreIdentical(e,t){const i=e.getLineCount(),n=t.getLineCount();if(i!==n)return!1;for(let s=1;s<=i;s++){const r=e.getLineContent(s),a=t.getLineContent(s);if(r!==a)return!1}return!0}async $computeMoreMinimalEdits(e,t,i){const n=this._getModel(e);if(!n)return t;const s=[];let r;t=t.slice(0).sort((l,c)=>{if(l.range&&c.range)return M.compareRangesUsingStarts(l.range,c.range);const u=l.range?0:1,f=c.range?0:1;return u-f});let a=0;for(let l=1;l<t.length;l++)M.getEndPosition(t[a].range).equals(M.getStartPosition(t[l].range))?(t[a].range=M.fromPositions(M.getStartPosition(t[a].range),M.getEndPosition(t[l].range)),t[a].text+=t[l].text):(a++,t[a]=t[l]);t.length=a+1;for(let{range:l,text:c,eol:u}of t){if(typeof u=="number"&&(r=u),M.isEmpty(l)&&!c)continue;const f=n.getValueInRange(l);if(c=c.replace(/\r\n|\n|\r/g,n.eol),f===c)continue;if(Math.max(c.length,f.length)>vM._diffLimit){s.push({range:l,text:c});continue}const g=zIe(f,c,i),p=n.offsetAt(M.lift(l).getStartPosition());for(const _ of g){const b=n.positionAt(p+_.originalStart),y=n.positionAt(p+_.originalStart+_.originalLength),S={text:c.substr(_.modifiedStart,_.modifiedLength),range:{startLineNumber:b.lineNumber,startColumn:b.column,endLineNumber:y.lineNumber,endColumn:y.column}};n.getValueInRange(S.range)!==S.text&&s.push(S)}}return typeof r=="number"&&s.push({eol:r,text:"",range:{startLineNumber:0,startColumn:0,endLineNumber:0,endColumn:0}}),s}async $computeLinks(e){const t=this._getModel(e);return t?KIe(t):null}async $computeDefaultDocumentColors(e){const t=this._getModel(e);return t?zTe(t):null}async $textualSuggest(e,t,i,n){const s=new uo,r=new RegExp(i,n),a=new Set;e:for(const l of e){const c=this._getModel(l);if(c){for(const u of c.words(r))if(!(u===t||!isNaN(Number(u)))&&(a.add(u),a.size>vM._suggestionsLimit))break e}}return{words:Array.from(a),duration:s.elapsed()}}async $computeWordRanges(e,t,i,n){const s=this._getModel(e);if(!s)return Object.create(null);const r=new RegExp(i,n),a=Object.create(null);for(let l=t.startLineNumber;l<t.endLineNumber;l++){const c=s.getLineWords(l,r);for(const u of c){if(!isNaN(Number(u.word)))continue;let f=a[u.word];f||(f=[],a[u.word]=f),f.push({startLineNumber:l,startColumn:u.startColumn,endLineNumber:l,endColumn:u.endColumn})}}return a}async $navigateValueSet(e,t,i,n,s){const r=this._getModel(e);if(!r)return null;const a=new RegExp(n,s);t.startColumn===t.endColumn&&(t={startLineNumber:t.startLineNumber,startColumn:t.startColumn,endLineNumber:t.endLineNumber,endColumn:t.endColumn+1});const l=r.getValueInRange(t),c=r.getWordAtPosition({lineNumber:t.startLineNumber,column:t.startColumn},a);if(!c)return null;const u=r.getValueInRange(c);return wV.INSTANCE.navigateValueSet(t,l,c,u,i)}};p2._diffLimit=1e5,p2._suggestionsLimit=1e4;let EV=p2;class vM extends EV{constructor(e,t){super(),this._host=e,this._foreignModuleFactory=t,this._foreignModule=null}async $ping(){return"pong"}$loadForeignModule(e,t,i){const r={host:ALe(i,(a,l)=>this._host.$fhr(a,l)),getMirrorModels:()=>this._getModels()};return this._foreignModuleFactory?(this._foreignModule=this._foreignModuleFactory(r,t),Promise.resolve(K9(this._foreignModule))):new Promise((a,l)=>{const c=u=>{this._foreignModule=u.create(r,t),a(K9(this._foreignModule))};{const u=$F.asBrowserUri(`${e}.js`).toString(!0);ot(()=>import(`${u}`),[],import.meta.url).then(c).catch(l)}})}$fmr(e,t){if(!this._foreignModule||typeof this._foreignModule[e]!="function")return Promise.reject(new Error("Missing requestHandler or method: "+e));try{return Promise.resolve(this._foreignModule[e].apply(this._foreignModule,t))}catch(i){return Promise.reject(i)}}}typeof importScripts=="function"&&(globalThis.monaco=qle());const c4=Gt("textResourceConfigurationService"),rde=Gt("textResourcePropertiesService"),Ue=Gt("ILanguageFeaturesService");var oK=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},pv=function(o,e){return function(t,i){e(t,i,o)}};const qie=5*60*1e3;function mv(o,e){const t=o.getModel(e);return!(!t||t.isTooLargeForSyncing())}let IV=class extends X{constructor(e,t,i,n,s,r){super(),this._languageConfigurationService=s,this._modelService=t,this._workerManager=this._register(new TV(e,this._modelService)),this._logService=n,this._register(r.linkProvider.register({language:"*",hasAccessToAllModels:!0},{provideLinks:async(a,l)=>{if(!mv(this._modelService,a.uri))return Promise.resolve({links:[]});const u=await(await this._workerWithResources([a.uri])).$computeLinks(a.uri.toString());return u&&{links:u}}})),this._register(r.completionProvider.register("*",new eNe(this._workerManager,i,this._modelService,this._languageConfigurationService)))}dispose(){super.dispose()}canComputeUnicodeHighlights(e){return mv(this._modelService,e)}async computedUnicodeHighlights(e,t,i){return(await this._workerWithResources([e])).$computeUnicodeHighlights(e.toString(),t,i)}async computeDiff(e,t,i,n){const r=await(await this._workerWithResources([e,t],!0)).$computeDiff(e.toString(),t.toString(),i,n);if(!r)return null;return{identical:r.identical,quitEarly:r.quitEarly,changes:l(r.changes),moves:r.moves.map(c=>new Qce(new Cr(new It(c[0],c[1]),new It(c[2],c[3])),l(c[4])))};function l(c){return c.map(u=>{var f;return new Vl(new It(u[0],u[1]),new It(u[2],u[3]),(f=u[4])==null?void 0:f.map(g=>new Il(new M(g[0],g[1],g[2],g[3]),new M(g[4],g[5],g[6],g[7]))))})}}async computeMoreMinimalEdits(e,t,i=!1){if(wr(t)){if(!mv(this._modelService,e))return Promise.resolve(t);const n=uo.create(),s=this._workerWithResources([e]).then(r=>r.$computeMoreMinimalEdits(e.toString(),t,i));return s.finally(()=>this._logService.trace("FORMAT#computeMoreMinimalEdits",e.toString(!0),n.elapsed())),Promise.race([s,Sg(1e3).then(()=>t)])}else return Promise.resolve(void 0)}canNavigateValueSet(e){return mv(this._modelService,e)}async navigateValueSet(e,t,i){const n=this._modelService.getModel(e);if(!n)return null;const s=this._languageConfigurationService.getLanguageConfiguration(n.getLanguageId()).getWordDefinition(),r=s.source,a=s.flags;return(await this._workerWithResources([e])).$navigateValueSet(e.toString(),t,i,r,a)}canComputeWordRanges(e){return mv(this._modelService,e)}async computeWordRanges(e,t){const i=this._modelService.getModel(e);if(!i)return Promise.resolve(null);const n=this._languageConfigurationService.getLanguageConfiguration(i.getLanguageId()).getWordDefinition(),s=n.source,r=n.flags;return(await this._workerWithResources([e])).$computeWordRanges(e.toString(),t,s,r)}async findSectionHeaders(e,t){return(await this._workerWithResources([e])).$findSectionHeaders(e.toString(),t)}async computeDefaultDocumentColors(e){return(await this._workerWithResources([e])).$computeDefaultDocumentColors(e.toString())}async _workerWithResources(e,t=!1){return await(await this._workerManager.withWorker()).workerWithSyncedResources(e,t)}};IV=oK([pv(1,un),pv(2,c4),pv(3,Oo),pv(4,On),pv(5,Ue)],IV);class eNe{constructor(e,t,i,n){this.languageConfigurationService=n,this._debugDisplayName="wordbasedCompletions",this._workerManager=e,this._configurationService=t,this._modelService=i}async provideCompletionItems(e,t){const i=this._configurationService.getValue(e.uri,t,"editor");if(i.wordBasedSuggestions==="off")return;const n=[];if(i.wordBasedSuggestions==="currentDocument")mv(this._modelService,e.uri)&&n.push(e.uri);else for(const f of this._modelService.getModels())mv(this._modelService,f.uri)&&(f===e?n.unshift(f.uri):(i.wordBasedSuggestions==="allDocuments"||f.getLanguageId()===e.getLanguageId())&&n.push(f.uri));if(n.length===0)return;const s=this.languageConfigurationService.getLanguageConfiguration(e.getLanguageId()).getWordDefinition(),r=e.getWordAtPosition(t),a=r?new M(t.lineNumber,r.startColumn,t.lineNumber,r.endColumn):M.fromPositions(t),l=a.setEndPosition(t.lineNumber,t.column),u=await(await this._workerManager.withWorker()).textualSuggest(n,r==null?void 0:r.word,s);if(u)return{duration:u.duration,suggestions:u.words.map(f=>({kind:18,label:f,insertText:f,range:{insert:l,replace:a}}))}}}let TV=class extends X{constructor(e,t){super(),this._workerDescriptor=e,this._modelService=t,this._editorWorkerClient=null,this._lastWorkerUsedTime=new Date().getTime(),this._register(new Uq).cancelAndSet(()=>this._checkStopIdleWorker(),Math.round(qie/2),Vi),this._register(this._modelService.onModelRemoved(n=>this._checkStopEmptyWorker()))}dispose(){this._editorWorkerClient&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null),super.dispose()}_checkStopEmptyWorker(){if(!this._editorWorkerClient)return;this._modelService.getModels().length===0&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}_checkStopIdleWorker(){if(!this._editorWorkerClient)return;new Date().getTime()-this._lastWorkerUsedTime>qie&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}withWorker(){return this._lastWorkerUsedTime=new Date().getTime(),this._editorWorkerClient||(this._editorWorkerClient=new RA(this._workerDescriptor,!1,this._modelService)),Promise.resolve(this._editorWorkerClient)}};TV=oK([pv(1,un)],TV);class tNe{constructor(e){this._instance=e,this.proxy=this._instance}dispose(){this._instance.dispose()}setChannel(e,t){throw new Error("Not supported")}}let RA=class extends X{constructor(e,t,i){super(),this._workerDescriptor=e,this._disposed=!1,this._modelService=i,this._keepIdleModels=t,this._worker=null,this._modelManager=null}fhr(e,t){throw new Error("Not implemented!")}_getOrCreateWorker(){if(!this._worker)try{this._worker=this._register(oIe(this._workerDescriptor)),SV.setChannel(this._worker,this._createEditorWorkerHost())}catch(e){mV(e),this._worker=this._createFallbackLocalWorker()}return this._worker}async _getProxy(){try{const e=this._getOrCreateWorker().proxy;return await e.$ping(),e}catch(e){return mV(e),this._worker=this._createFallbackLocalWorker(),this._worker.proxy}}_createFallbackLocalWorker(){return new tNe(new vM(this._createEditorWorkerHost(),null))}_createEditorWorkerHost(){return{$fhr:(e,t)=>this.fhr(e,t)}}_getOrCreateModelManager(e){return this._modelManager||(this._modelManager=this._register(new XTe(e,this._modelService,this._keepIdleModels))),this._modelManager}async workerWithSyncedResources(e,t=!1){if(this._disposed)return Promise.reject(Vxe());const i=await this._getProxy();return this._getOrCreateModelManager(i).ensureSyncedResources(e,t),i}async textualSuggest(e,t,i){const n=await this.workerWithSyncedResources(e),s=i.source,r=i.flags;return n.$textualSuggest(e.map(a=>a.toString()),t,s,r)}dispose(){super.dispose(),this._disposed=!0}};RA=oK([pv(2,un)],RA);var bc;(function(o){o.DARK="dark",o.LIGHT="light",o.HIGH_CONTRAST_DARK="hcDark",o.HIGH_CONTRAST_LIGHT="hcLight"})(bc||(bc={}));function lu(o){return o===bc.HIGH_CONTRAST_DARK||o===bc.HIGH_CONTRAST_LIGHT}function sS(o){return o===bc.DARK||o===bc.HIGH_CONTRAST_DARK}const Ws=Gt("themeService");function Gn(o){return{id:o}}function NV(o){switch(o){case bc.DARK:return"vs-dark";case bc.HIGH_CONTRAST_DARK:return"hc-black";case bc.HIGH_CONTRAST_LIGHT:return"hc-light";default:return"vs"}}const ade={ThemingContribution:"base.contributions.theming"};class iNe{constructor(){this.themingParticipants=[],this.themingParticipants=[],this.onThemingParticipantAddedEmitter=new Y}onColorThemeChange(e){return this.themingParticipants.push(e),this.onThemingParticipantAddedEmitter.fire(e),it(()=>{const t=this.themingParticipants.indexOf(e);this.themingParticipants.splice(t,1)})}getThemingParticipants(){return this.themingParticipants}}const lde=new iNe;Pn.add(ade.ThemingContribution,lde);function Nc(o){return lde.onColorThemeChange(o)}class nNe extends X{constructor(e){super(),this.themeService=e,this.theme=e.getColorTheme(),this._register(this.themeService.onDidColorThemeChange(t=>this.onThemeChange(t)))}onThemeChange(e){this.theme=e,this.updateStyles()}updateStyles(){}}var sNe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},oNe=function(o,e){return function(t,i){e(t,i,o)}};let RV=class extends X{constructor(e){super(),this._themeService=e,this._onWillCreateCodeEditor=this._register(new Y),this._onCodeEditorAdd=this._register(new Y),this.onCodeEditorAdd=this._onCodeEditorAdd.event,this._onCodeEditorRemove=this._register(new Y),this.onCodeEditorRemove=this._onCodeEditorRemove.event,this._onWillCreateDiffEditor=this._register(new Y),this._onDiffEditorAdd=this._register(new Y),this.onDiffEditorAdd=this._onDiffEditorAdd.event,this._onDiffEditorRemove=this._register(new Y),this.onDiffEditorRemove=this._onDiffEditorRemove.event,this._decorationOptionProviders=new Map,this._codeEditorOpenHandlers=new jr,this._modelProperties=new Map,this._codeEditors=Object.create(null),this._diffEditors=Object.create(null),this._globalStyleSheet=null}willCreateCodeEditor(){this._onWillCreateCodeEditor.fire()}addCodeEditor(e){this._codeEditors[e.getId()]=e,this._onCodeEditorAdd.fire(e)}removeCodeEditor(e){delete this._codeEditors[e.getId()]&&this._onCodeEditorRemove.fire(e)}listCodeEditors(){return Object.keys(this._codeEditors).map(e=>this._codeEditors[e])}willCreateDiffEditor(){this._onWillCreateDiffEditor.fire()}addDiffEditor(e){this._diffEditors[e.getId()]=e,this._onDiffEditorAdd.fire(e)}listDiffEditors(){return Object.keys(this._diffEditors).map(e=>this._diffEditors[e])}getFocusedCodeEditor(){let e=null;const t=this.listCodeEditors();for(const i of t){if(i.hasTextFocus())return i;i.hasWidgetFocus()&&(e=i)}return e}removeDecorationType(e){const t=this._decorationOptionProviders.get(e);t&&(t.refCount--,t.refCount<=0&&(this._decorationOptionProviders.delete(e),t.dispose(),this.listCodeEditors().forEach(i=>i.removeDecorationsByType(e))))}setModelProperty(e,t,i){const n=e.toString();let s;this._modelProperties.has(n)?s=this._modelProperties.get(n):(s=new Map,this._modelProperties.set(n,s)),s.set(t,i)}getModelProperty(e,t){const i=e.toString();if(this._modelProperties.has(i))return this._modelProperties.get(i).get(t)}async openCodeEditor(e,t,i){for(const n of this._codeEditorOpenHandlers){const s=await n(e,t,i);if(s!==null)return s}return null}registerCodeEditorOpenHandler(e){const t=this._codeEditorOpenHandlers.unshift(e);return it(t)}};RV=sNe([oNe(0,Ws)],RV);var rNe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Kie=function(o,e){return function(t,i){e(t,i,o)}};let MA=class extends RV{constructor(e,t){super(t),this._register(this.onCodeEditorAdd(()=>this._checkContextKey())),this._register(this.onCodeEditorRemove(()=>this._checkContextKey())),this._editorIsOpen=e.createKey("editorIsOpen",!1),this._activeCodeEditor=null,this._register(this.registerCodeEditorOpenHandler(async(i,n,s)=>n?this.doOpenEditor(n,i):null))}_checkContextKey(){let e=!1;for(const t of this.listCodeEditors())if(!t.isSimpleWidget){e=!0;break}this._editorIsOpen.set(e)}setActiveCodeEditor(e){this._activeCodeEditor=e}getActiveCodeEditor(){return this._activeCodeEditor}doOpenEditor(e,t){if(!this.findModel(e,t.resource)){if(t.resource){const s=t.resource.scheme;if(s===Lt.http||s===Lt.https)return kce(t.resource.toString()),e}return null}const n=t.options?t.options.selection:null;if(n)if(typeof n.endLineNumber=="number"&&typeof n.endColumn=="number")e.setSelection(n),e.revealRangeInCenter(n,1);else{const s={lineNumber:n.startLineNumber,column:n.startColumn};e.setPosition(s),e.revealPositionInCenter(s,1)}return e}findModel(e,t){const i=e.getModel();return i&&i.uri.toString()!==t.toString()?null:i}};MA=rNe([Kie(0,ht),Kie(1,Ws)],MA);ei(hi,MA,0);const e_=Gt("layoutService");var cde=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},dde=function(o,e){return function(t,i){e(t,i,o)}};let AA=class{get mainContainer(){var e;return((e=bq(this._codeEditorService.listCodeEditors()))==null?void 0:e.getContainerDomNode())??Vi.document.body}get activeContainer(){const e=this._codeEditorService.getFocusedCodeEditor()??this._codeEditorService.getActiveCodeEditor();return(e==null?void 0:e.getContainerDomNode())??this.mainContainer}get mainContainerDimension(){return Wm(this.mainContainer)}get activeContainerDimension(){return Wm(this.activeContainer)}get containers(){return rd(this._codeEditorService.listCodeEditors().map(e=>e.getContainerDomNode()))}getContainer(){return this.activeContainer}whenContainerStylesLoaded(){}focus(){var e;(e=this._codeEditorService.getFocusedCodeEditor())==null||e.focus()}constructor(e){this._codeEditorService=e,this.onDidLayoutMainContainer=Ee.None,this.onDidLayoutActiveContainer=Ee.None,this.onDidLayoutContainer=Ee.None,this.onDidChangeActiveContainer=Ee.None,this.onDidAddContainer=Ee.None,this.mainContainerOffset={top:0,quickPickTop:0},this.activeContainerOffset={top:0,quickPickTop:0}}};AA=cde([dde(0,hi)],AA);let MV=class extends AA{get mainContainer(){return this._container}constructor(e,t){super(t),this._container=e}};MV=cde([dde(1,hi)],MV);ei(e_,AA,1);var LD;(function(o){o[o.Ignore=0]="Ignore",o[o.Info=1]="Info",o[o.Warning=2]="Warning",o[o.Error=3]="Error"})(LD||(LD={}));(function(o){const e="error",t="warning",i="warn",n="info",s="ignore";function r(l){return l?Ew(e,l)?o.Error:Ew(t,l)||Ew(i,l)?o.Warning:Ew(n,l)?o.Info:o.Ignore:o.Ignore}o.fromValue=r;function a(l){switch(l){case o.Error:return e;case o.Warning:return t;case o.Info:return n;default:return s}}o.toString=a})(LD||(LD={}));const hs=LD,tI=Gt("dialogService");var d4=hs;const fs=Gt("notificationService");class aNe{}const rK=Gt("undoRedoService");class ude{constructor(e,t){this.resource=e,this.elements=t}}const i1=class i1{constructor(){this.id=i1._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}};i1._ID=0,i1.None=new i1;let AV=i1;const n1=class n1{constructor(){this.id=n1._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}};n1._ID=0,n1.None=new n1;let _v=n1;var lNe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Gie=function(o,e){return function(t,i){e(t,i,o)}};function oR(o){return o.scheme===Lt.file?o.fsPath:o.path}let hde=0;class rR{constructor(e,t,i,n,s,r,a){this.id=++hde,this.type=0,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabel=t,this.strResource=i,this.resourceLabels=[this.resourceLabel],this.strResources=[this.strResource],this.groupId=n,this.groupOrder=s,this.sourceId=r,this.sourceOrder=a,this.isValid=!0}setValid(e){this.isValid=e}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.isValid?"  VALID":"INVALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class Yie{constructor(e,t){this.resourceLabel=e,this.reason=t}}class Zie{constructor(){this.elements=new Map}createMessage(){const e=[],t=[];for(const[,n]of this.elements)(n.reason===0?e:t).push(n.resourceLabel);const i=[];return e.length>0&&i.push(v({key:"externalRemoval",comment:["{0} is a list of filenames"]},"The following files have been closed and modified on disk: {0}.",e.join(", "))),t.length>0&&i.push(v({key:"noParallelUniverses",comment:["{0} is a list of filenames"]},"The following files have been modified in an incompatible way: {0}.",t.join(", "))),i.join(`
`)}get size(){return this.elements.size}has(e){return this.elements.has(e)}set(e,t){this.elements.set(e,t)}delete(e){return this.elements.delete(e)}}class cNe{constructor(e,t,i,n,s,r,a){this.id=++hde,this.type=1,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabels=t,this.strResources=i,this.groupId=n,this.groupOrder=s,this.sourceId=r,this.sourceOrder=a,this.removedResources=null,this.invalidatedResources=null}canSplit(){return typeof this.actual.split=="function"}removeResource(e,t,i){this.removedResources||(this.removedResources=new Zie),this.removedResources.has(t)||this.removedResources.set(t,new Yie(e,i))}setValid(e,t,i){i?this.invalidatedResources&&(this.invalidatedResources.delete(t),this.invalidatedResources.size===0&&(this.invalidatedResources=null)):(this.invalidatedResources||(this.invalidatedResources=new Zie),this.invalidatedResources.has(t)||this.invalidatedResources.set(t,new Yie(e,0)))}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.invalidatedResources?"INVALID":"  VALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class fde{constructor(e,t){this.resourceLabel=e,this.strResource=t,this._past=[],this._future=[],this.locked=!1,this.versionId=1}dispose(){for(const e of this._past)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);for(const e of this._future)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);this.versionId++}toString(){const e=[];e.push(`* ${this.strResource}:`);for(let t=0;t<this._past.length;t++)e.push(`   * [UNDO] ${this._past[t]}`);for(let t=this._future.length-1;t>=0;t--)e.push(`   * [REDO] ${this._future[t]}`);return e.join(`
`)}flushAllElements(){this._past=[],this._future=[],this.versionId++}_setElementValidFlag(e,t){e.type===1?e.setValid(this.resourceLabel,this.strResource,t):e.setValid(t)}setElementsValidFlag(e,t){for(const i of this._past)t(i.actual)&&this._setElementValidFlag(i,e);for(const i of this._future)t(i.actual)&&this._setElementValidFlag(i,e)}pushElement(e){for(const t of this._future)t.type===1&&t.removeResource(this.resourceLabel,this.strResource,1);this._future=[],this._past.push(e),this.versionId++}createSnapshot(e){const t=[];for(let i=0,n=this._past.length;i<n;i++)t.push(this._past[i].id);for(let i=this._future.length-1;i>=0;i--)t.push(this._future[i].id);return new ude(e,t)}restoreSnapshot(e){const t=e.elements.length;let i=!0,n=0,s=-1;for(let a=0,l=this._past.length;a<l;a++,n++){const c=this._past[a];i&&(n>=t||c.id!==e.elements[n])&&(i=!1,s=0),!i&&c.type===1&&c.removeResource(this.resourceLabel,this.strResource,0)}let r=-1;for(let a=this._future.length-1;a>=0;a--,n++){const l=this._future[a];i&&(n>=t||l.id!==e.elements[n])&&(i=!1,r=a),!i&&l.type===1&&l.removeResource(this.resourceLabel,this.strResource,0)}s!==-1&&(this._past=this._past.slice(0,s)),r!==-1&&(this._future=this._future.slice(r+1)),this.versionId++}getElements(){const e=[],t=[];for(const i of this._past)e.push(i.actual);for(const i of this._future)t.push(i.actual);return{past:e,future:t}}getClosestPastElement(){return this._past.length===0?null:this._past[this._past.length-1]}getSecondClosestPastElement(){return this._past.length<2?null:this._past[this._past.length-2]}getClosestFutureElement(){return this._future.length===0?null:this._future[this._future.length-1]}hasPastElements(){return this._past.length>0}hasFutureElements(){return this._future.length>0}splitPastWorkspaceElement(e,t){for(let i=this._past.length-1;i>=0;i--)if(this._past[i]===e){t.has(this.strResource)?this._past[i]=t.get(this.strResource):this._past.splice(i,1);break}this.versionId++}splitFutureWorkspaceElement(e,t){for(let i=this._future.length-1;i>=0;i--)if(this._future[i]===e){t.has(this.strResource)?this._future[i]=t.get(this.strResource):this._future.splice(i,1);break}this.versionId++}moveBackward(e){this._past.pop(),this._future.push(e),this.versionId++}moveForward(e){this._future.pop(),this._past.push(e),this.versionId++}}class l7{constructor(e){this.editStacks=e,this._versionIds=[];for(let t=0,i=this.editStacks.length;t<i;t++)this._versionIds[t]=this.editStacks[t].versionId}isValid(){for(let e=0,t=this.editStacks.length;e<t;e++)if(this._versionIds[e]!==this.editStacks[e].versionId)return!1;return!0}}const gde=new fde("","");gde.locked=!0;let PV=class{constructor(e,t){this._dialogService=e,this._notificationService=t,this._editStacks=new Map,this._uriComparisonKeyComputers=[]}getUriComparisonKey(e){for(const t of this._uriComparisonKeyComputers)if(t[0]===e.scheme)return t[1].getComparisonKey(e);return e.toString()}_print(e){console.log("------------------------------------"),console.log(`AFTER ${e}: `);const t=[];for(const i of this._editStacks)t.push(i[1].toString());console.log(t.join(`
`))}pushElement(e,t=AV.None,i=_v.None){if(e.type===0){const n=oR(e.resource),s=this.getUriComparisonKey(e.resource);this._pushElement(new rR(e,n,s,t.id,t.nextOrder(),i.id,i.nextOrder()))}else{const n=new Set,s=[],r=[];for(const a of e.resources){const l=oR(a),c=this.getUriComparisonKey(a);n.has(c)||(n.add(c),s.push(l),r.push(c))}s.length===1?this._pushElement(new rR(e,s[0],r[0],t.id,t.nextOrder(),i.id,i.nextOrder())):this._pushElement(new cNe(e,s,r,t.id,t.nextOrder(),i.id,i.nextOrder()))}}_pushElement(e){for(let t=0,i=e.strResources.length;t<i;t++){const n=e.resourceLabels[t],s=e.strResources[t];let r;this._editStacks.has(s)?r=this._editStacks.get(s):(r=new fde(n,s),this._editStacks.set(s,r)),r.pushElement(e)}}getLastElement(e){const t=this.getUriComparisonKey(e);if(this._editStacks.has(t)){const i=this._editStacks.get(t);if(i.hasFutureElements())return null;const n=i.getClosestPastElement();return n?n.actual:null}return null}_splitPastWorkspaceElement(e,t){const i=e.actual.split(),n=new Map;for(const s of i){const r=oR(s.resource),a=this.getUriComparisonKey(s.resource),l=new rR(s,r,a,0,0,0,0);n.set(l.strResource,l)}for(const s of e.strResources){if(t&&t.has(s))continue;this._editStacks.get(s).splitPastWorkspaceElement(e,n)}}_splitFutureWorkspaceElement(e,t){const i=e.actual.split(),n=new Map;for(const s of i){const r=oR(s.resource),a=this.getUriComparisonKey(s.resource),l=new rR(s,r,a,0,0,0,0);n.set(l.strResource,l)}for(const s of e.strResources){if(t&&t.has(s))continue;this._editStacks.get(s).splitFutureWorkspaceElement(e,n)}}removeElements(e){const t=typeof e=="string"?e:this.getUriComparisonKey(e);this._editStacks.has(t)&&(this._editStacks.get(t).dispose(),this._editStacks.delete(t))}setElementsValidFlag(e,t,i){const n=this.getUriComparisonKey(e);this._editStacks.has(n)&&this._editStacks.get(n).setElementsValidFlag(t,i)}createSnapshot(e){const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).createSnapshot(e):new ude(e,[])}restoreSnapshot(e){const t=this.getUriComparisonKey(e.resource);if(this._editStacks.has(t)){const i=this._editStacks.get(t);i.restoreSnapshot(e),!i.hasPastElements()&&!i.hasFutureElements()&&(i.dispose(),this._editStacks.delete(t))}}getElements(e){const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).getElements():{past:[],future:[]}}_findClosestUndoElementWithSource(e){if(!e)return[null,null];let t=null,i=null;for(const[n,s]of this._editStacks){const r=s.getClosestPastElement();r&&r.sourceId===e&&(!t||r.sourceOrder>t.sourceOrder)&&(t=r,i=n)}return[t,i]}canUndo(e){if(e instanceof _v){const[,i]=this._findClosestUndoElementWithSource(e.id);return!!i}const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasPastElements():!1}_onError(e,t){wt(e);for(const i of t.strResources)this.removeElements(i);this._notificationService.error(e)}_acquireLocks(e){for(const t of e.editStacks)if(t.locked)throw new Error("Cannot acquire edit stack lock");for(const t of e.editStacks)t.locked=!0;return()=>{for(const t of e.editStacks)t.locked=!1}}_safeInvokeWithLocks(e,t,i,n,s){const r=this._acquireLocks(i);let a;try{a=t()}catch(l){return r(),n.dispose(),this._onError(l,e)}return a?a.then(()=>(r(),n.dispose(),s()),l=>(r(),n.dispose(),this._onError(l,e))):(r(),n.dispose(),s())}async _invokeWorkspacePrepare(e){if(typeof e.actual.prepareUndoRedo>"u")return X.None;const t=e.actual.prepareUndoRedo();return typeof t>"u"?X.None:t}_invokeResourcePrepare(e,t){if(e.actual.type!==1||typeof e.actual.prepareUndoRedo>"u")return t(X.None);const i=e.actual.prepareUndoRedo();return i?VF(i)?t(i):i.then(n=>t(n)):t(X.None)}_getAffectedEditStacks(e){const t=[];for(const i of e.strResources)t.push(this._editStacks.get(i)||gde);return new l7(t)}_tryToSplitAndUndo(e,t,i,n){if(t.canSplit())return this._splitPastWorkspaceElement(t,i),this._notificationService.warn(n),new aR(this._undo(e,0,!0));for(const s of t.strResources)this.removeElements(s);return this._notificationService.warn(n),new aR}_checkWorkspaceUndo(e,t,i,n){if(t.removedResources)return this._tryToSplitAndUndo(e,t,t.removedResources,v({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(n&&t.invalidatedResources)return this._tryToSplitAndUndo(e,t,t.invalidatedResources,v({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const s=[];for(const a of i.editStacks)a.getClosestPastElement()!==t&&s.push(a.resourceLabel);if(s.length>0)return this._tryToSplitAndUndo(e,t,null,v({key:"cannotWorkspaceUndoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because changes were made to {1}",t.label,s.join(", ")));const r=[];for(const a of i.editStacks)a.locked&&r.push(a.resourceLabel);return r.length>0?this._tryToSplitAndUndo(e,t,null,v({key:"cannotWorkspaceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,r.join(", "))):i.isValid()?null:this._tryToSplitAndUndo(e,t,null,v({key:"cannotWorkspaceUndoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceUndo(e,t,i){const n=this._getAffectedEditStacks(t),s=this._checkWorkspaceUndo(e,t,n,!1);return s?s.returnValue:this._confirmAndExecuteWorkspaceUndo(e,t,n,i)}_isPartOfUndoGroup(e){if(!e.groupId)return!1;for(const[,t]of this._editStacks){const i=t.getClosestPastElement();if(i){if(i===e){const n=t.getSecondClosestPastElement();if(n&&n.groupId===e.groupId)return!0}if(i.groupId===e.groupId)return!0}}return!1}async _confirmAndExecuteWorkspaceUndo(e,t,i,n){if(t.canSplit()&&!this._isPartOfUndoGroup(t)){let a;(function(u){u[u.All=0]="All",u[u.This=1]="This",u[u.Cancel=2]="Cancel"})(a||(a={}));const{result:l}=await this._dialogService.prompt({type:hs.Info,message:v("confirmWorkspace","Would you like to undo '{0}' across all files?",t.label),buttons:[{label:v({key:"ok",comment:["{0} denotes a number that is > 1, && denotes a mnemonic"]},"&&Undo in {0} Files",i.editStacks.length),run:()=>a.All},{label:v({key:"nok",comment:["&& denotes a mnemonic"]},"Undo this &&File"),run:()=>a.This}],cancelButton:{run:()=>a.Cancel}});if(l===a.Cancel)return;if(l===a.This)return this._splitPastWorkspaceElement(t,null),this._undo(e,0,!0);const c=this._checkWorkspaceUndo(e,t,i,!1);if(c)return c.returnValue;n=!0}let s;try{s=await this._invokeWorkspacePrepare(t)}catch(a){return this._onError(a,t)}const r=this._checkWorkspaceUndo(e,t,i,!0);if(r)return s.dispose(),r.returnValue;for(const a of i.editStacks)a.moveBackward(t);return this._safeInvokeWithLocks(t,()=>t.actual.undo(),i,s,()=>this._continueUndoInGroup(t.groupId,n))}_resourceUndo(e,t,i){if(!t.isValid){e.flushAllElements();return}if(e.locked){const n=v({key:"cannotResourceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not undo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(n);return}return this._invokeResourcePrepare(t,n=>(e.moveBackward(t),this._safeInvokeWithLocks(t,()=>t.actual.undo(),new l7([e]),n,()=>this._continueUndoInGroup(t.groupId,i))))}_findClosestUndoElementInGroup(e){if(!e)return[null,null];let t=null,i=null;for(const[n,s]of this._editStacks){const r=s.getClosestPastElement();r&&r.groupId===e&&(!t||r.groupOrder>t.groupOrder)&&(t=r,i=n)}return[t,i]}_continueUndoInGroup(e,t){if(!e)return;const[,i]=this._findClosestUndoElementInGroup(e);if(i)return this._undo(i,0,t)}undo(e){if(e instanceof _v){const[,t]=this._findClosestUndoElementWithSource(e.id);return t?this._undo(t,e.id,!1):void 0}return typeof e=="string"?this._undo(e,0,!1):this._undo(this.getUriComparisonKey(e),0,!1)}_undo(e,t=0,i){if(!this._editStacks.has(e))return;const n=this._editStacks.get(e),s=n.getClosestPastElement();if(!s)return;if(s.groupId){const[a,l]=this._findClosestUndoElementInGroup(s.groupId);if(s!==a&&l)return this._undo(l,t,i)}if((s.sourceId!==t||s.confirmBeforeUndo)&&!i)return this._confirmAndContinueUndo(e,t,s);try{return s.type===1?this._workspaceUndo(e,s,i):this._resourceUndo(n,s,i)}finally{}}async _confirmAndContinueUndo(e,t,i){if((await this._dialogService.confirm({message:v("confirmDifferentSource","Would you like to undo '{0}'?",i.label),primaryButton:v({key:"confirmDifferentSource.yes",comment:["&& denotes a mnemonic"]},"&&Yes"),cancelButton:v("confirmDifferentSource.no","No")})).confirmed)return this._undo(e,t,!0)}_findClosestRedoElementWithSource(e){if(!e)return[null,null];let t=null,i=null;for(const[n,s]of this._editStacks){const r=s.getClosestFutureElement();r&&r.sourceId===e&&(!t||r.sourceOrder<t.sourceOrder)&&(t=r,i=n)}return[t,i]}canRedo(e){if(e instanceof _v){const[,i]=this._findClosestRedoElementWithSource(e.id);return!!i}const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasFutureElements():!1}_tryToSplitAndRedo(e,t,i,n){if(t.canSplit())return this._splitFutureWorkspaceElement(t,i),this._notificationService.warn(n),new aR(this._redo(e));for(const s of t.strResources)this.removeElements(s);return this._notificationService.warn(n),new aR}_checkWorkspaceRedo(e,t,i,n){if(t.removedResources)return this._tryToSplitAndRedo(e,t,t.removedResources,v({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(n&&t.invalidatedResources)return this._tryToSplitAndRedo(e,t,t.invalidatedResources,v({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const s=[];for(const a of i.editStacks)a.getClosestFutureElement()!==t&&s.push(a.resourceLabel);if(s.length>0)return this._tryToSplitAndRedo(e,t,null,v({key:"cannotWorkspaceRedoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because changes were made to {1}",t.label,s.join(", ")));const r=[];for(const a of i.editStacks)a.locked&&r.push(a.resourceLabel);return r.length>0?this._tryToSplitAndRedo(e,t,null,v({key:"cannotWorkspaceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,r.join(", "))):i.isValid()?null:this._tryToSplitAndRedo(e,t,null,v({key:"cannotWorkspaceRedoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceRedo(e,t){const i=this._getAffectedEditStacks(t),n=this._checkWorkspaceRedo(e,t,i,!1);return n?n.returnValue:this._executeWorkspaceRedo(e,t,i)}async _executeWorkspaceRedo(e,t,i){let n;try{n=await this._invokeWorkspacePrepare(t)}catch(r){return this._onError(r,t)}const s=this._checkWorkspaceRedo(e,t,i,!0);if(s)return n.dispose(),s.returnValue;for(const r of i.editStacks)r.moveForward(t);return this._safeInvokeWithLocks(t,()=>t.actual.redo(),i,n,()=>this._continueRedoInGroup(t.groupId))}_resourceRedo(e,t){if(!t.isValid){e.flushAllElements();return}if(e.locked){const i=v({key:"cannotResourceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not redo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(i);return}return this._invokeResourcePrepare(t,i=>(e.moveForward(t),this._safeInvokeWithLocks(t,()=>t.actual.redo(),new l7([e]),i,()=>this._continueRedoInGroup(t.groupId))))}_findClosestRedoElementInGroup(e){if(!e)return[null,null];let t=null,i=null;for(const[n,s]of this._editStacks){const r=s.getClosestFutureElement();r&&r.groupId===e&&(!t||r.groupOrder<t.groupOrder)&&(t=r,i=n)}return[t,i]}_continueRedoInGroup(e){if(!e)return;const[,t]=this._findClosestRedoElementInGroup(e);if(t)return this._redo(t)}redo(e){if(e instanceof _v){const[,t]=this._findClosestRedoElementWithSource(e.id);return t?this._redo(t):void 0}return typeof e=="string"?this._redo(e):this._redo(this.getUriComparisonKey(e))}_redo(e){if(!this._editStacks.has(e))return;const t=this._editStacks.get(e),i=t.getClosestFutureElement();if(i){if(i.groupId){const[n,s]=this._findClosestRedoElementInGroup(i.groupId);if(i!==n&&s)return this._redo(s)}try{return i.type===1?this._workspaceRedo(e,i):this._resourceRedo(t,i)}finally{}}}};PV=lNe([Gie(0,tI),Gie(1,fs)],PV);class aR{constructor(e){this.returnValue=e}}ei(rK,PV,1);function Wr(o,e,t){return Math.min(Math.max(o,e),t)}class pde{constructor(){this._n=1,this._val=0}update(e){return this._val=this._val+(e-this._val)/this._n,this._n+=1,this._val}get value(){return this._val}}class dNe{constructor(e){this._n=0,this._val=0,this._values=[],this._index=0,this._sum=0,this._values=new Array(e),this._values.fill(0,0,e)}update(e){const t=this._values[this._index];return this._values[this._index]=e,this._index=(this._index+1)%this._values.length,this._sum-=t,this._sum+=e,this._n<this._values.length&&(this._n+=1),this._val=this._sum/this._n,this._val}get value(){return this._val}}const aK=Gt("environmentService");var uNe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Xie=function(o,e){return function(t,i){e(t,i,o)}};const Yl=Gt("ILanguageFeatureDebounceService");var PA;(function(o){const e=new WeakMap;let t=0;function i(n){let s=e.get(n);return s===void 0&&(s=++t,e.set(n,s)),s}o.of=i})(PA||(PA={}));class hNe{constructor(e){this._default=e}get(e){return this._default}update(e,t){return this._default}default(){return this._default}}class fNe{constructor(e,t,i,n,s,r){this._logService=e,this._name=t,this._registry=i,this._default=n,this._min=s,this._max=r,this._cache=new $h(50,.7)}_key(e){return e.id+this._registry.all(e).reduce((t,i)=>qF(PA.of(i),t),0)}get(e){const t=this._key(e),i=this._cache.get(t);return i?Wr(i.value,this._min,this._max):this.default()}update(e,t){const i=this._key(e);let n=this._cache.get(i);n||(n=new dNe(6),this._cache.set(i,n));const s=Wr(n.update(t),this._min,this._max);return UF(e.uri,"output")||this._logService.trace(`[DEBOUNCE: ${this._name}] for ${e.uri.toString()} is ${s}ms`),s}_overall(){const e=new pde;for(const[,t]of this._cache)e.update(t.value);return e.value}default(){const e=this._overall()|0||this._default;return Wr(e,this._min,this._max)}}let OV=class{constructor(e,t){this._logService=e,this._data=new Map,this._isDev=t.isExtensionDevelopment||!t.isBuilt}for(e,t,i){const n=(i==null?void 0:i.min)??50,s=(i==null?void 0:i.max)??n**2,r=(i==null?void 0:i.key)??void 0,a=`${PA.of(e)},${n}${r?","+r:""}`;let l=this._data.get(a);return l||(this._isDev?(this._logService.debug(`[DEBOUNCE: ${t}] is disabled in developed mode`),l=new hNe(n*1.5)):l=new fNe(this._logService,t,e,this._overallAverage()|0||n*1.5,n,s),this._data.set(a,l)),l}_overallAverage(){const e=new pde;for(const t of this._data.values())e.update(t.default());return e.value}};OV=uNe([Xie(0,Oo),Xie(1,aK)],OV);ei(Yl,OV,1);class wa{static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&768)>>>8}static containsBalancedBrackets(e){return(e&1024)!==0}static getFontStyle(e){return(e&30720)>>>11}static getForeground(e){return(e&16744448)>>>15}static getBackground(e){return(e&4278190080)>>>24}static getClassNameFromMetadata(e){let i="mtk"+this.getForeground(e);const n=this.getFontStyle(e);return n&1&&(i+=" mtki"),n&2&&(i+=" mtkb"),n&4&&(i+=" mtku"),n&8&&(i+=" mtks"),i}static getInlineStyleFromMetadata(e,t){const i=this.getForeground(e),n=this.getFontStyle(e);let s=`color: ${t[i]};`;n&1&&(s+="font-style: italic;"),n&2&&(s+="font-weight: bold;");let r="";return n&4&&(r+=" underline"),n&8&&(r+=" line-through"),r&&(s+=`text-decoration:${r};`),s}static getPresentationFromMetadata(e){const t=this.getForeground(e),i=this.getFontStyle(e);return{foreground:t,italic:!!(i&1),bold:!!(i&2),underline:!!(i&4),strikethrough:!!(i&8)}}}function Vm(o){let e=0,t=0,i=0,n=0;for(let s=0,r=o.length;s<r;s++){const a=o.charCodeAt(s);a===13?(e===0&&(t=s),e++,s+1<r&&o.charCodeAt(s+1)===10?(n|=2,s++):n|=3,i=s+1):a===10&&(n|=1,e===0&&(t=s),e++,i=s+1)}return e===0&&(t=o.length),[e,t,o.length-i,n]}class rk{static create(e,t){return new rk(e,new OA(t))}get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._endLineNumber}constructor(e,t){this._startLineNumber=e,this._tokens=t,this._endLineNumber=this._startLineNumber+this._tokens.getMaxDeltaLine()}toString(){return this._tokens.toString(this._startLineNumber)}_updateEndLineNumber(){this._endLineNumber=this._startLineNumber+this._tokens.getMaxDeltaLine()}isEmpty(){return this._tokens.isEmpty()}getLineTokens(e){return this._startLineNumber<=e&&e<=this._endLineNumber?this._tokens.getLineTokens(e-this._startLineNumber):null}getRange(){const e=this._tokens.getRange();return e&&new M(this._startLineNumber+e.startLineNumber,e.startColumn,this._startLineNumber+e.endLineNumber,e.endColumn)}removeTokens(e){const t=e.startLineNumber-this._startLineNumber,i=e.endLineNumber-this._startLineNumber;this._startLineNumber+=this._tokens.removeTokens(t,e.startColumn-1,i,e.endColumn-1),this._updateEndLineNumber()}split(e){const t=e.startLineNumber-this._startLineNumber,i=e.endLineNumber-this._startLineNumber,[n,s,r]=this._tokens.split(t,e.startColumn-1,i,e.endColumn-1);return[new rk(this._startLineNumber,n),new rk(this._startLineNumber+r,s)]}applyEdit(e,t){const[i,n,s]=Vm(t);this.acceptEdit(e,i,n,s,t.length>0?t.charCodeAt(0):0)}acceptEdit(e,t,i,n,s){this._acceptDeleteRange(e),this._acceptInsertText(new G(e.startLineNumber,e.startColumn),t,i,n,s),this._updateEndLineNumber()}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return;const t=e.startLineNumber-this._startLineNumber,i=e.endLineNumber-this._startLineNumber;if(i<0){const s=i-t;this._startLineNumber-=s;return}const n=this._tokens.getMaxDeltaLine();if(!(t>=n+1)){if(t<0&&i>=n+1){this._startLineNumber=0,this._tokens.clear();return}if(t<0){const s=-t;this._startLineNumber-=s,this._tokens.acceptDeleteRange(e.startColumn-1,0,0,i,e.endColumn-1)}else this._tokens.acceptDeleteRange(0,t,e.startColumn-1,i,e.endColumn-1)}}_acceptInsertText(e,t,i,n,s){if(t===0&&i===0)return;const r=e.lineNumber-this._startLineNumber;if(r<0){this._startLineNumber+=t;return}const a=this._tokens.getMaxDeltaLine();r>=a+1||this._tokens.acceptInsertText(r,e.column-1,t,i,n,s)}}class OA{constructor(e){this._tokens=e,this._tokenCount=e.length/4}toString(e){const t=[];for(let i=0;i<this._tokenCount;i++)t.push(`(${this._getDeltaLine(i)+e},${this._getStartCharacter(i)}-${this._getEndCharacter(i)})`);return`[${t.join(",")}]`}getMaxDeltaLine(){const e=this._getTokenCount();return e===0?-1:this._getDeltaLine(e-1)}getRange(){const e=this._getTokenCount();if(e===0)return null;const t=this._getStartCharacter(0),i=this._getDeltaLine(e-1),n=this._getEndCharacter(e-1);return new M(0,t+1,i,n+1)}_getTokenCount(){return this._tokenCount}_getDeltaLine(e){return this._tokens[4*e]}_getStartCharacter(e){return this._tokens[4*e+1]}_getEndCharacter(e){return this._tokens[4*e+2]}isEmpty(){return this._getTokenCount()===0}getLineTokens(e){let t=0,i=this._getTokenCount()-1;for(;t<i;){const n=t+Math.floor((i-t)/2),s=this._getDeltaLine(n);if(s<e)t=n+1;else if(s>e)i=n-1;else{let r=n;for(;r>t&&this._getDeltaLine(r-1)===e;)r--;let a=n;for(;a<i&&this._getDeltaLine(a+1)===e;)a++;return new Qie(this._tokens.subarray(4*r,4*a+4))}}return this._getDeltaLine(t)===e?new Qie(this._tokens.subarray(4*t,4*t+4)):null}clear(){this._tokenCount=0}removeTokens(e,t,i,n){const s=this._tokens,r=this._tokenCount;let a=0,l=!1,c=0;for(let u=0;u<r;u++){const f=4*u,g=s[f],p=s[f+1],_=s[f+2],b=s[f+3];if((g>e||g===e&&_>=t)&&(g<i||g===i&&p<=n))l=!0;else{if(a===0&&(c=g),l){const y=4*a;s[y]=g-c,s[y+1]=p,s[y+2]=_,s[y+3]=b}a++}}return this._tokenCount=a,c}split(e,t,i,n){const s=this._tokens,r=this._tokenCount,a=[],l=[];let c=a,u=0,f=0;for(let g=0;g<r;g++){const p=4*g,_=s[p],b=s[p+1],y=s[p+2],S=s[p+3];if(_>e||_===e&&y>=t){if(_<i||_===i&&b<=n)continue;c!==l&&(c=l,u=0,f=_)}c[u++]=_-f,c[u++]=b,c[u++]=y,c[u++]=S}return[new OA(new Uint32Array(a)),new OA(new Uint32Array(l)),f]}acceptDeleteRange(e,t,i,n,s){const r=this._tokens,a=this._tokenCount,l=n-t;let c=0,u=!1;for(let f=0;f<a;f++){const g=4*f;let p=r[g],_=r[g+1],b=r[g+2];const y=r[g+3];if(p<t||p===t&&b<=i){c++;continue}else if(p===t&&_<i)p===n&&b>s?b-=s-i:b=i;else if(p===t&&_===i)if(p===n&&b>s)b-=s-i;else{u=!0;continue}else if(p<n||p===n&&_<s)if(p===n&&b>s)p=t,_=i,b=_+(b-s);else{u=!0;continue}else if(p>n){if(l===0&&!u){c=a;break}p-=l}else if(p===n&&_>=s)e&&p===0&&(_+=e,b+=e),p-=l,_-=s-i,b-=s-i;else throw new Error("Not possible!");const S=4*c;r[S]=p,r[S+1]=_,r[S+2]=b,r[S+3]=y,c++}this._tokenCount=c}acceptInsertText(e,t,i,n,s,r){const a=i===0&&n===1&&(r>=48&&r<=57||r>=65&&r<=90||r>=97&&r<=122),l=this._tokens,c=this._tokenCount;for(let u=0;u<c;u++){const f=4*u;let g=l[f],p=l[f+1],_=l[f+2];if(!(g<e||g===e&&_<t)){if(g===e&&_===t)if(a)_+=1;else continue;else if(g===e&&p<t&&t<_)i===0?_+=n:_=t;else{if(g===e&&p===t&&a)continue;if(g===e)if(g+=i,i===0)p+=n,_+=n;else{const b=_-p;p=s+(p-t),_=p+b}else g+=i}l[f]=g,l[f+1]=p,l[f+2]=_}}}}class Qie{constructor(e){this._tokens=e}getCount(){return this._tokens.length/4}getStartCharacter(e){return this._tokens[4*e+1]}getEndCharacter(e){return this._tokens[4*e+2]}getMetadata(e){return this._tokens[4*e+3]}}var gNe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},c7=function(o,e){return function(t,i){e(t,i,o)}};let FV=class{constructor(e,t,i,n){this._legend=e,this._themeService=t,this._languageService=i,this._logService=n,this._hasWarnedOverlappingTokens=!1,this._hasWarnedInvalidLengthTokens=!1,this._hasWarnedInvalidEditStart=!1,this._hashTable=new BV}getMetadata(e,t,i){const n=this._languageService.languageIdCodec.encodeLanguageId(i),s=this._hashTable.get(e,t,n);let r;if(s)r=s.metadata;else{let a=this._legend.tokenTypes[e];const l=[];if(a){let c=t;for(let f=0;c>0&&f<this._legend.tokenModifiers.length;f++)c&1&&l.push(this._legend.tokenModifiers[f]),c=c>>1;const u=this._themeService.getColorTheme().getTokenStyleMetadata(a,l,i);if(typeof u>"u")r=2147483647;else{if(r=0,typeof u.italic<"u"){const f=(u.italic?1:0)<<11;r|=f|1}if(typeof u.bold<"u"){const f=(u.bold?2:0)<<11;r|=f|2}if(typeof u.underline<"u"){const f=(u.underline?4:0)<<11;r|=f|4}if(typeof u.strikethrough<"u"){const f=(u.strikethrough?8:0)<<11;r|=f|8}if(u.foreground){const f=u.foreground<<15;r|=f|16}r===0&&(r=2147483647)}}else r=2147483647,a="not-in-legend";this._hashTable.add(e,t,n,r)}return r}warnOverlappingSemanticTokens(e,t){this._hasWarnedOverlappingTokens||(this._hasWarnedOverlappingTokens=!0,this._logService.warn(`Overlapping semantic tokens detected at lineNumber ${e}, column ${t}`))}warnInvalidLengthSemanticTokens(e,t){this._hasWarnedInvalidLengthTokens||(this._hasWarnedInvalidLengthTokens=!0,this._logService.warn(`Semantic token with invalid length detected at lineNumber ${e}, column ${t}`))}warnInvalidEditStart(e,t,i,n,s){this._hasWarnedInvalidEditStart||(this._hasWarnedInvalidEditStart=!0,this._logService.warn(`Invalid semantic tokens edit detected (previousResultId: ${e}, resultId: ${t}) at edit #${i}: The provided start offset ${n} is outside the previous data (length ${s}).`))}};FV=gNe([c7(1,Ws),c7(2,In),c7(3,Oo)],FV);function mde(o,e,t){const i=o.data,n=o.data.length/5|0,s=Math.max(Math.ceil(n/1024),400),r=[];let a=0,l=1,c=0;for(;a<n;){const u=a;let f=Math.min(u+s,n);if(f<n){let L=f;for(;L-1>u&&i[5*L]===0;)L--;if(L-1===u){let x=f;for(;x+1<n&&i[5*x]===0;)x++;f=x}else f=L}let g=new Uint32Array((f-u)*4),p=0,_=0,b=0,y=0;for(;a<f;){const L=5*a,x=i[L],k=i[L+1],E=l+x|0,N=x===0?c+k|0:k,A=i[L+2],P=N+A|0,H=i[L+3],ee=i[L+4];if(P<=N)e.warnInvalidLengthSemanticTokens(E,N+1);else if(b===E&&y>N)e.warnOverlappingSemanticTokens(E,N+1);else{const Q=e.getMetadata(H,ee,t);Q!==2147483647&&(_===0&&(_=E),g[p]=E-_,g[p+1]=N,g[p+2]=P,g[p+3]=Q,p+=4,b=E,y=P)}l=E,c=N,a++}p!==g.length&&(g=g.subarray(0,p));const S=rk.create(_,g);r.push(S)}return r}class pNe{constructor(e,t,i,n){this.tokenTypeIndex=e,this.tokenModifierSet=t,this.languageId=i,this.metadata=n,this.next=null}}const Of=class Of{constructor(){this._elementsCount=0,this._currentLengthIndex=0,this._currentLength=Of._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<Of._SIZES.length?2/3*this._currentLength:0),this._elements=[],Of._nullOutEntries(this._elements,this._currentLength)}static _nullOutEntries(e,t){for(let i=0;i<t;i++)e[i]=null}_hash2(e,t){return(e<<5)-e+t|0}_hashFunc(e,t,i){return this._hash2(this._hash2(e,t),i)%this._currentLength}get(e,t,i){const n=this._hashFunc(e,t,i);let s=this._elements[n];for(;s;){if(s.tokenTypeIndex===e&&s.tokenModifierSet===t&&s.languageId===i)return s;s=s.next}return null}add(e,t,i,n){if(this._elementsCount++,this._growCount!==0&&this._elementsCount>=this._growCount){const s=this._elements;this._currentLengthIndex++,this._currentLength=Of._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<Of._SIZES.length?2/3*this._currentLength:0),this._elements=[],Of._nullOutEntries(this._elements,this._currentLength);for(const r of s){let a=r;for(;a;){const l=a.next;a.next=null,this._add(a),a=l}}}this._add(new pNe(e,t,i,n))}_add(e){const t=this._hashFunc(e.tokenTypeIndex,e.tokenModifierSet,e.languageId);e.next=this._elements[t],this._elements[t]=e}};Of._SIZES=[3,7,13,31,61,127,251,509,1021,2039,4093,8191,16381,32749,65521,131071,262139,524287,1048573,2097143];let BV=Of;const u4=Gt("semanticTokensStylingService");var mNe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},d7=function(o,e){return function(t,i){e(t,i,o)}};let WV=class extends X{constructor(e,t,i){super(),this._themeService=e,this._logService=t,this._languageService=i,this._caches=new WeakMap,this._register(this._themeService.onDidColorThemeChange(()=>{this._caches=new WeakMap}))}getStyling(e){return this._caches.has(e)||this._caches.set(e,new FV(e.getLegend(),this._themeService,this._languageService,this._logService)),this._caches.get(e)}};WV=mNe([d7(0,Ws),d7(1,Oo),d7(2,In)],WV);ei(u4,WV,1);function yp(o){return o===47||o===92}function _de(o){return o.replace(/[\\/]/g,Cs.sep)}function _Ne(o){return o.indexOf("/")===-1&&(o=_de(o)),/^[a-zA-Z]:(\/|$)/.test(o)&&(o="/"+o),o}function Jie(o,e=Cs.sep){if(!o)return"";const t=o.length,i=o.charCodeAt(0);if(yp(i)){if(yp(o.charCodeAt(1))&&!yp(o.charCodeAt(2))){let s=3;const r=s;for(;s<t&&!yp(o.charCodeAt(s));s++);if(r!==s&&!yp(o.charCodeAt(s+1))){for(s+=1;s<t;s++)if(yp(o.charCodeAt(s)))return o.slice(0,s+1).replace(/[\\/]/g,e)}}return e}else if(vde(i)&&o.charCodeAt(1)===58)return yp(o.charCodeAt(2))?o.slice(0,2)+e:o.slice(0,2);let n=o.indexOf("://");if(n!==-1){for(n+=3;n<t;n++)if(yp(o.charCodeAt(n)))return o.slice(0,n+1)}return""}function HV(o,e,t,i=ou){if(o===e)return!0;if(!o||!e||e.length>o.length)return!1;if(t){if(!Mq(o,e))return!1;if(e.length===o.length)return!0;let s=e.length;return e.charAt(e.length-1)===i&&s--,o.charAt(s)===i}return e.charAt(e.length-1)!==i&&(e+=i),o.indexOf(e)===0}function vde(o){return o>=65&&o<=90||o>=97&&o<=122}function vNe(o,e=Po){return e?vde(o.charCodeAt(0))&&o.charCodeAt(1)===58:!1}const lR="**",ene="/",bM="[/\\\\]",CM="[^/\\\\]",bNe=/\//g;function tne(o,e){switch(o){case 0:return"";case 1:return`${CM}*?`;default:return`(?:${bM}|${CM}+${bM}${e?`|${bM}${CM}+`:""})*?`}}function ine(o,e){if(!o)return[];const t=[];let i=!1,n=!1,s="";for(const r of o){switch(r){case e:if(!i&&!n){t.push(s),s="";continue}break;case"{":i=!0;break;case"}":i=!1;break;case"[":n=!0;break;case"]":n=!1;break}s+=r}return s&&t.push(s),t}function bde(o){if(!o)return"";let e="";const t=ine(o,ene);if(t.every(i=>i===lR))e=".*";else{let i=!1;t.forEach((n,s)=>{if(n===lR){if(i)return;e+=tne(2,s===t.length-1)}else{let r=!1,a="",l=!1,c="";for(const u of n){if(u!=="}"&&r){a+=u;continue}if(l&&(u!=="]"||!c)){let f;u==="-"?f=u:(u==="^"||u==="!")&&!c?f="^":u===ene?f="":f=Ul(u),c+=f;continue}switch(u){case"{":r=!0;continue;case"[":l=!0;continue;case"}":{const g=`(?:${ine(a,",").map(p=>bde(p)).join("|")})`;e+=g,r=!1,a="";break}case"]":{e+="["+c+"]",l=!1,c="";break}case"?":e+=CM;continue;case"*":e+=tne(1);continue;default:e+=Ul(u)}}s<t.length-1&&(t[s+1]!==lR||s+2<t.length)&&(e+=bM)}i=n===lR})}return e}const CNe=/^\*\*\/\*\.[\w\.-]+$/,yNe=/^\*\*\/([\w\.-]+)\/?$/,wNe=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,SNe=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,LNe=/^\*\*((\/[\w\.-]+)+)\/?$/,xNe=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,nne=new $h(1e4),sne=function(){return!1},Ih=function(){return null};function lK(o,e){if(!o)return Ih;let t;typeof o!="string"?t=o.pattern:t=o,t=t.trim();const i=`${t}_${!!e.trimForExclusions}`;let n=nne.get(i);if(n)return one(n,o);let s;return CNe.test(t)?n=kNe(t.substr(4),t):(s=yNe.exec(u7(t,e)))?n=DNe(s[1],t):(e.trimForExclusions?SNe:wNe).test(t)?n=ENe(t,e):(s=LNe.exec(u7(t,e)))?n=rne(s[1].substr(1),t,!0):(s=xNe.exec(u7(t,e)))?n=rne(s[1],t,!1):n=INe(t),nne.set(i,n),one(n,o)}function one(o,e){if(typeof e=="string")return o;const t=function(i,n){return HV(i,e.base,!Qr)?o(GE(i.substr(e.base.length),ou),n):null};return t.allBasenames=o.allBasenames,t.allPaths=o.allPaths,t.basenames=o.basenames,t.patterns=o.patterns,t}function u7(o,e){return e.trimForExclusions&&o.endsWith("/**")?o.substr(0,o.length-2):o}function kNe(o,e){return function(t,i){return typeof t=="string"&&t.endsWith(o)?e:null}}function DNe(o,e){const t=`/${o}`,i=`\\${o}`,n=function(r,a){return typeof r!="string"?null:a?a===o?e:null:r===o||r.endsWith(t)||r.endsWith(i)?e:null},s=[o];return n.basenames=s,n.patterns=[e],n.allBasenames=s,n}function ENe(o,e){const t=yde(o.slice(1,-1).split(",").map(a=>lK(a,e)).filter(a=>a!==Ih),o),i=t.length;if(!i)return Ih;if(i===1)return t[0];const n=function(a,l){for(let c=0,u=t.length;c<u;c++)if(t[c](a,l))return o;return null},s=t.find(a=>!!a.allBasenames);s&&(n.allBasenames=s.allBasenames);const r=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return r.length&&(n.allPaths=r),n}function rne(o,e,t){const i=ou===Cs.sep,n=i?o:o.replace(bNe,ou),s=ou+n,r=Cs.sep+o;let a;return t?a=function(l,c){return typeof l=="string"&&(l===n||l.endsWith(s)||!i&&(l===o||l.endsWith(r)))?e:null}:a=function(l,c){return typeof l=="string"&&(l===n||!i&&l===o)?e:null},a.allPaths=[(t?"*/":"./")+o],a}function INe(o){try{const e=new RegExp(`^${bde(o)}$`);return function(t){return e.lastIndex=0,typeof t=="string"&&e.test(t)?o:null}}catch{return Ih}}function TNe(o,e,t){return!o||typeof e!="string"?!1:Cde(o)(e,void 0,t)}function Cde(o,e={}){if(!o)return sne;if(typeof o=="string"||NNe(o)){const t=lK(o,e);if(t===Ih)return sne;const i=function(n,s){return!!t(n,s)};return t.allBasenames&&(i.allBasenames=t.allBasenames),t.allPaths&&(i.allPaths=t.allPaths),i}return RNe(o,e)}function NNe(o){const e=o;return e?typeof e.base=="string"&&typeof e.pattern=="string":!1}function RNe(o,e){const t=yde(Object.getOwnPropertyNames(o).map(a=>MNe(a,o[a],e)).filter(a=>a!==Ih)),i=t.length;if(!i)return Ih;if(!t.some(a=>!!a.requiresSiblings)){if(i===1)return t[0];const a=function(u,f){let g;for(let p=0,_=t.length;p<_;p++){const b=t[p](u,f);if(typeof b=="string")return b;iV(b)&&(g||(g=[]),g.push(b))}return g?(async()=>{for(const p of g){const _=await p;if(typeof _=="string")return _}return null})():null},l=t.find(u=>!!u.allBasenames);l&&(a.allBasenames=l.allBasenames);const c=t.reduce((u,f)=>f.allPaths?u.concat(f.allPaths):u,[]);return c.length&&(a.allPaths=c),a}const n=function(a,l,c){let u,f;for(let g=0,p=t.length;g<p;g++){const _=t[g];_.requiresSiblings&&c&&(l||(l=lm(a)),u||(u=l.substr(0,l.length-fke(a).length)));const b=_(a,l,u,c);if(typeof b=="string")return b;iV(b)&&(f||(f=[]),f.push(b))}return f?(async()=>{for(const g of f){const p=await g;if(typeof p=="string")return p}return null})():null},s=t.find(a=>!!a.allBasenames);s&&(n.allBasenames=s.allBasenames);const r=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return r.length&&(n.allPaths=r),n}function MNe(o,e,t){if(e===!1)return Ih;const i=lK(o,t);if(i===Ih)return Ih;if(typeof e=="boolean")return i;if(e){const n=e.when;if(typeof n=="string"){const s=(r,a,l,c)=>{if(!c||!i(r,a))return null;const u=n.replace("$(basename)",()=>l),f=c(u);return iV(f)?f.then(g=>g?o:null):f?o:null};return s.requiresSiblings=!0,s}}return i}function yde(o,e){const t=o.filter(a=>!!a.basenames);if(t.length<2)return o;const i=t.reduce((a,l)=>{const c=l.basenames;return c?a.concat(c):a},[]);let n;if(e){n=[];for(let a=0,l=i.length;a<l;a++)n.push(e)}else n=t.reduce((a,l)=>{const c=l.patterns;return c?a.concat(c):a},[]);const s=function(a,l){if(typeof a!="string")return null;if(!l){let u;for(u=a.length;u>0;u--){const f=a.charCodeAt(u-1);if(f===47||f===92)break}l=a.substr(u)}const c=i.indexOf(l);return c!==-1?n[c]:null};s.basenames=i,s.patterns=n,s.allBasenames=i;const r=o.filter(a=>!a.basenames);return r.push(s),r}function cK(o,e,t,i,n,s){if(Array.isArray(o)){let r=0;for(const a of o){const l=cK(a,e,t,i,n,s);if(l===10)return l;l>r&&(r=l)}return r}else{if(typeof o=="string")return i?o==="*"?5:o===t?10:0:0;if(o){const{language:r,pattern:a,scheme:l,hasAccessToAllModels:c,notebookType:u}=o;if(!i&&!c)return 0;u&&n&&(e=n);let f=0;if(l)if(l===e.scheme)f=10;else if(l==="*")f=5;else return 0;if(r)if(r===t)f=10;else if(r==="*")f=Math.max(f,5);else return 0;if(u)if(u===s)f=10;else if(u==="*"&&s!==void 0)f=Math.max(f,5);else return 0;if(a){let g;if(typeof a=="string"?g=a:g={...a,base:Ble(a.base)},g===e.fsPath||TNe(g,e.fsPath))f=10;else return 0}return f}else return 0}}function wde(o){return typeof o=="string"?!1:Array.isArray(o)?o.every(wde):!!o.exclusive}class ane{constructor(e,t,i,n,s){this.uri=e,this.languageId=t,this.notebookUri=i,this.notebookType=n,this.recursive=s}equals(e){var t,i;return this.notebookType===e.notebookType&&this.languageId===e.languageId&&this.uri.toString()===e.uri.toString()&&((t=this.notebookUri)==null?void 0:t.toString())===((i=e.notebookUri)==null?void 0:i.toString())&&this.recursive===e.recursive}}class Nn{constructor(e){this._notebookInfoResolver=e,this._clock=0,this._entries=[],this._onDidChange=new Y,this.onDidChange=this._onDidChange.event}register(e,t){let i={selector:e,provider:t,_score:-1,_time:this._clock++};return this._entries.push(i),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),it(()=>{if(i){const n=this._entries.indexOf(i);n>=0&&(this._entries.splice(n,1),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),i=void 0)}})}has(e){return this.all(e).length>0}all(e){if(!e)return[];this._updateScores(e,!1);const t=[];for(const i of this._entries)i._score>0&&t.push(i.provider);return t}ordered(e,t=!1){const i=[];return this._orderedForEach(e,t,n=>i.push(n.provider)),i}orderedGroups(e){const t=[];let i,n;return this._orderedForEach(e,!1,s=>{i&&n===s._score?i.push(s.provider):(n=s._score,i=[s.provider],t.push(i))}),t}_orderedForEach(e,t,i){this._updateScores(e,t);for(const n of this._entries)n._score>0&&i(n)}_updateScores(e,t){var s,r;const i=(s=this._notebookInfoResolver)==null?void 0:s.call(this,e.uri),n=i?new ane(e.uri,e.getLanguageId(),i.uri,i.type,t):new ane(e.uri,e.getLanguageId(),void 0,void 0,t);if(!((r=this._lastCandidate)!=null&&r.equals(n))){this._lastCandidate=n;for(const a of this._entries)if(a._score=cK(a.selector,n.uri,n.languageId,Xce(e),n.notebookUri,n.notebookType),wde(a.selector)&&a._score>0)if(t)a._score=0;else{for(const l of this._entries)l._score=0;a._score=1e3;break}this._entries.sort(Nn._compareByScoreAndTime)}}static _compareByScoreAndTime(e,t){return e._score<t._score?1:e._score>t._score?-1:Ax(e.selector)&&!Ax(t.selector)?1:!Ax(e.selector)&&Ax(t.selector)?-1:e._time<t._time?1:e._time>t._time?-1:0}}function Ax(o){return typeof o=="string"?!1:Array.isArray(o)?o.some(Ax):!!o.isBuiltin}class ANe{constructor(){this.referenceProvider=new Nn(this._score.bind(this)),this.renameProvider=new Nn(this._score.bind(this)),this.newSymbolNamesProvider=new Nn(this._score.bind(this)),this.codeActionProvider=new Nn(this._score.bind(this)),this.definitionProvider=new Nn(this._score.bind(this)),this.typeDefinitionProvider=new Nn(this._score.bind(this)),this.declarationProvider=new Nn(this._score.bind(this)),this.implementationProvider=new Nn(this._score.bind(this)),this.documentSymbolProvider=new Nn(this._score.bind(this)),this.inlayHintsProvider=new Nn(this._score.bind(this)),this.colorProvider=new Nn(this._score.bind(this)),this.codeLensProvider=new Nn(this._score.bind(this)),this.documentFormattingEditProvider=new Nn(this._score.bind(this)),this.documentRangeFormattingEditProvider=new Nn(this._score.bind(this)),this.onTypeFormattingEditProvider=new Nn(this._score.bind(this)),this.signatureHelpProvider=new Nn(this._score.bind(this)),this.hoverProvider=new Nn(this._score.bind(this)),this.documentHighlightProvider=new Nn(this._score.bind(this)),this.multiDocumentHighlightProvider=new Nn(this._score.bind(this)),this.selectionRangeProvider=new Nn(this._score.bind(this)),this.foldingRangeProvider=new Nn(this._score.bind(this)),this.linkProvider=new Nn(this._score.bind(this)),this.inlineCompletionsProvider=new Nn(this._score.bind(this)),this.inlineEditProvider=new Nn(this._score.bind(this)),this.completionProvider=new Nn(this._score.bind(this)),this.linkedEditingRangeProvider=new Nn(this._score.bind(this)),this.documentRangeSemanticTokensProvider=new Nn(this._score.bind(this)),this.documentSemanticTokensProvider=new Nn(this._score.bind(this)),this.documentDropEditProvider=new Nn(this._score.bind(this)),this.documentPasteEditProvider=new Nn(this._score.bind(this))}_score(e){var t;return(t=this._notebookTypeResolver)==null?void 0:t.call(this,e)}}ei(Ue,ANe,1);function dK(o){return`--vscode-${o.replace(/\./g,"-")}`}function He(o){return`var(${dK(o)})`}function PNe(o,e){return`var(${dK(o)}, ${e})`}function ONe(o){return o!==null&&typeof o=="object"&&"light"in o&&"dark"in o}const Sde={ColorContribution:"base.contributions.colors"},FNe="default";class BNe{constructor(){this._onDidChangeSchema=new Y,this.onDidChangeSchema=this._onDidChangeSchema.event,this.colorSchema={type:"object",properties:{}},this.colorReferenceSchema={type:"string",enum:[],enumDescriptions:[]},this.colorsById={}}registerColor(e,t,i,n=!1,s){const r={id:e,description:i,defaults:t,needsTransparency:n,deprecationMessage:s};this.colorsById[e]=r;const a={type:"string",format:"color-hex",defaultSnippets:[{body:"${1:#ff0000}"}]};return s&&(a.deprecationMessage=s),n&&(a.pattern="^#(?:(?<rgba>[0-9a-fA-f]{3}[0-9a-eA-E])|(?:[0-9a-fA-F]{6}(?:(?![fF]{2})(?:[0-9a-fA-F]{2}))))?$",a.patternErrorMessage=v("transparecyRequired","This color must be transparent or it will obscure content")),this.colorSchema.properties[e]={description:i,oneOf:[a,{type:"string",const:FNe,description:v("useDefault","Use the default color.")}]},this.colorReferenceSchema.enum.push(e),this.colorReferenceSchema.enumDescriptions.push(i),this._onDidChangeSchema.fire(),e}getColors(){return Object.keys(this.colorsById).map(e=>this.colorsById[e])}resolveDefaultColor(e,t){const i=this.colorsById[e];if(i!=null&&i.defaults){const n=ONe(i.defaults)?i.defaults[t.type]:i.defaults;return Ad(n,t)}}getColorSchema(){return this.colorSchema}toString(){const e=(t,i)=>{const n=t.indexOf(".")===-1?0:1,s=i.indexOf(".")===-1?0:1;return n!==s?n-s:t.localeCompare(i)};return Object.keys(this.colorsById).sort(e).map(t=>`- \`${t}\`: ${this.colorsById[t].description}`).join(`
`)}}const h4=new BNe;Pn.add(Sde.ColorContribution,h4);function W(o,e,t,i,n){return h4.registerColor(o,e,t,i,n)}function WNe(o,e){var t,i,n,s;switch(o.op){case 0:return(t=Ad(o.value,e))==null?void 0:t.darken(o.factor);case 1:return(i=Ad(o.value,e))==null?void 0:i.lighten(o.factor);case 2:return(n=Ad(o.value,e))==null?void 0:n.transparent(o.factor);case 3:{const r=Ad(o.background,e);return r?(s=Ad(o.value,e))==null?void 0:s.makeOpaque(r):Ad(o.value,e)}case 4:for(const r of o.values){const a=Ad(r,e);if(a)return a}return;case 6:return Ad(e.defines(o.if)?o.then:o.else,e);case 5:{const r=Ad(o.value,e);if(!r)return;const a=Ad(o.background,e);return a?r.isDarkerThan(a)?ue.getLighterColor(r,a,o.factor).transparent(o.transparency):ue.getDarkerColor(r,a,o.factor).transparent(o.transparency):r.transparent(o.factor*o.transparency)}default:throw s4()}}function PC(o,e){return{op:0,value:o,factor:e}}function cu(o,e){return{op:1,value:o,factor:e}}function Pt(o,e){return{op:2,value:o,factor:e}}function xD(...o){return{op:4,values:o}}function HNe(o,e,t){return{op:6,if:o,then:e,else:t}}function lne(o,e,t,i){return{op:5,value:o,background:e,factor:t,transparency:i}}function Ad(o,e){if(o!==null){if(typeof o=="string")return o[0]==="#"?ue.fromHex(o):e.getColor(o);if(o instanceof ue)return o;if(typeof o=="object")return WNe(o,e)}}const Lde="vscode://schemas/workbench-colors",xde=Pn.as(l4.JSONContribution);xde.registerSchema(Lde,h4.getColorSchema());const cne=new Oi(()=>xde.notifySchemaChanged(Lde),200);h4.onDidChangeSchema(()=>{cne.isScheduled()||cne.schedule()});const zt=W("foreground",{dark:"#CCCCCC",light:"#616161",hcDark:"#FFFFFF",hcLight:"#292929"},v("foreground","Overall foreground color. This color is only used if not overridden by a component."));W("disabledForeground",{dark:"#CCCCCC80",light:"#61616180",hcDark:"#A5A5A5",hcLight:"#7F7F7F"},v("disabledForeground","Overall foreground for disabled elements. This color is only used if not overridden by a component."));W("errorForeground",{dark:"#F48771",light:"#A1260D",hcDark:"#F48771",hcLight:"#B5200D"},v("errorForeground","Overall foreground color for error messages. This color is only used if not overridden by a component."));W("descriptionForeground",{light:"#717171",dark:Pt(zt,.7),hcDark:Pt(zt,.7),hcLight:Pt(zt,.7)},v("descriptionForeground","Foreground color for description text providing additional information, for example for a label."));const FA=W("icon.foreground",{dark:"#C5C5C5",light:"#424242",hcDark:"#FFFFFF",hcLight:"#292929"},v("iconForeground","The default color for icons in the workbench.")),Ah=W("focusBorder",{dark:"#007FD4",light:"#0090F1",hcDark:"#F38518",hcLight:"#006BBD"},v("focusBorder","Overall border color for focused elements. This color is only used if not overridden by a component.")),si=W("contrastBorder",{light:null,dark:null,hcDark:"#6FC3DF",hcLight:"#0F4A85"},v("contrastBorder","An extra border around elements to separate them from others for greater contrast.")),vn=W("contrastActiveBorder",{light:null,dark:null,hcDark:Ah,hcLight:Ah},v("activeContrastBorder","An extra border around active elements to separate them from others for greater contrast."));W("selection.background",null,v("selectionBackground","The background color of text selections in the workbench (e.g. for input fields or text areas). Note that this does not apply to selections within the editor."));const VNe=W("textLink.foreground",{light:"#006AB1",dark:"#3794FF",hcDark:"#21A6FF",hcLight:"#0F4A85"},v("textLinkForeground","Foreground color for links in text."));W("textLink.activeForeground",{light:"#006AB1",dark:"#3794FF",hcDark:"#21A6FF",hcLight:"#0F4A85"},v("textLinkActiveForeground","Foreground color for links in text when clicked on and on mouse hover."));W("textSeparator.foreground",{light:"#0000002e",dark:"#ffffff2e",hcDark:ue.black,hcLight:"#292929"},v("textSeparatorForeground","Color for text separators."));W("textPreformat.foreground",{light:"#A31515",dark:"#D7BA7D",hcDark:"#000000",hcLight:"#FFFFFF"},v("textPreformatForeground","Foreground color for preformatted text segments."));W("textPreformat.background",{light:"#0000001A",dark:"#FFFFFF1A",hcDark:"#FFFFFF",hcLight:"#09345f"},v("textPreformatBackground","Background color for preformatted text segments."));W("textBlockQuote.background",{light:"#f2f2f2",dark:"#222222",hcDark:null,hcLight:"#F2F2F2"},v("textBlockQuoteBackground","Background color for block quotes in text."));W("textBlockQuote.border",{light:"#007acc80",dark:"#007acc80",hcDark:ue.white,hcLight:"#292929"},v("textBlockQuoteBorder","Border color for block quotes in text."));W("textCodeBlock.background",{light:"#dcdcdc66",dark:"#0a0a0a66",hcDark:ue.black,hcLight:"#F2F2F2"},v("textCodeBlockBackground","Background color for code blocks in text."));W("sash.hoverBorder",Ah,v("sashActiveBorder","Border color of active sashes."));const yM=W("badge.background",{dark:"#4D4D4D",light:"#C4C4C4",hcDark:ue.black,hcLight:"#0F4A85"},v("badgeBackground","Badge background color. Badges are small information labels, e.g. for search results count.")),zNe=W("badge.foreground",{dark:ue.white,light:"#333",hcDark:ue.white,hcLight:ue.white},v("badgeForeground","Badge foreground color. Badges are small information labels, e.g. for search results count.")),uK=W("scrollbar.shadow",{dark:"#000000",light:"#DDDDDD",hcDark:null,hcLight:null},v("scrollbarShadow","Scrollbar shadow to indicate that the view is scrolled.")),kde=W("scrollbarSlider.background",{dark:ue.fromHex("#797979").transparent(.4),light:ue.fromHex("#646464").transparent(.4),hcDark:Pt(si,.6),hcLight:Pt(si,.4)},v("scrollbarSliderBackground","Scrollbar slider background color.")),Dde=W("scrollbarSlider.hoverBackground",{dark:ue.fromHex("#646464").transparent(.7),light:ue.fromHex("#646464").transparent(.7),hcDark:Pt(si,.8),hcLight:Pt(si,.8)},v("scrollbarSliderHoverBackground","Scrollbar slider background color when hovering.")),Ede=W("scrollbarSlider.activeBackground",{dark:ue.fromHex("#BFBFBF").transparent(.4),light:ue.fromHex("#000000").transparent(.6),hcDark:si,hcLight:si},v("scrollbarSliderActiveBackground","Scrollbar slider background color when clicked on.")),UNe=W("progressBar.background",{dark:ue.fromHex("#0E70C0"),light:ue.fromHex("#0E70C0"),hcDark:si,hcLight:si},v("progressBarBackground","Background color of the progress bar that can show for long running operations.")),ud=W("editor.background",{light:"#ffffff",dark:"#1E1E1E",hcDark:ue.black,hcLight:ue.white},v("editorBackground","Editor background color.")),jh=W("editor.foreground",{light:"#333333",dark:"#BBBBBB",hcDark:ue.white,hcLight:zt},v("editorForeground","Editor default foreground color."));W("editorStickyScroll.background",ud,v("editorStickyScrollBackground","Background color of sticky scroll in the editor"));W("editorStickyScrollHover.background",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:null,hcLight:ue.fromHex("#0F4A85").transparent(.1)},v("editorStickyScrollHoverBackground","Background color of sticky scroll on hover in the editor"));W("editorStickyScroll.border",{dark:null,light:null,hcDark:si,hcLight:si},v("editorStickyScrollBorder","Border color of sticky scroll in the editor"));W("editorStickyScroll.shadow",uK,v("editorStickyScrollShadow"," Shadow color of sticky scroll in the editor"));const Bl=W("editorWidget.background",{dark:"#252526",light:"#F3F3F3",hcDark:"#0C141F",hcLight:ue.white},v("editorWidgetBackground","Background color of editor widgets, such as find/replace.")),f4=W("editorWidget.foreground",zt,v("editorWidgetForeground","Foreground color of editor widgets, such as find/replace.")),hK=W("editorWidget.border",{dark:"#454545",light:"#C8C8C8",hcDark:si,hcLight:si},v("editorWidgetBorder","Border color of editor widgets. The color is only used if the widget chooses to have a border and if the color is not overridden by a widget."));W("editorWidget.resizeBorder",null,v("editorWidgetResizeBorder","Border color of the resize bar of editor widgets. The color is only used if the widget chooses to have a resize border and if the color is not overridden by a widget."));W("editorError.background",null,v("editorError.background","Background color of error text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0);const g4=W("editorError.foreground",{dark:"#F14C4C",light:"#E51400",hcDark:"#F48771",hcLight:"#B5200D"},v("editorError.foreground","Foreground color of error squigglies in the editor.")),$Ne=W("editorError.border",{dark:null,light:null,hcDark:ue.fromHex("#E47777").transparent(.8),hcLight:"#B5200D"},v("errorBorder","If set, color of double underlines for errors in the editor.")),jNe=W("editorWarning.background",null,v("editorWarning.background","Background color of warning text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),xg=W("editorWarning.foreground",{dark:"#CCA700",light:"#BF8803",hcDark:"#FFD370",hcLight:"#895503"},v("editorWarning.foreground","Foreground color of warning squigglies in the editor.")),kD=W("editorWarning.border",{dark:null,light:null,hcDark:ue.fromHex("#FFCC00").transparent(.8),hcLight:ue.fromHex("#FFCC00").transparent(.8)},v("warningBorder","If set, color of double underlines for warnings in the editor."));W("editorInfo.background",null,v("editorInfo.background","Background color of info text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0);const Ph=W("editorInfo.foreground",{dark:"#3794FF",light:"#1a85ff",hcDark:"#3794FF",hcLight:"#1a85ff"},v("editorInfo.foreground","Foreground color of info squigglies in the editor.")),DD=W("editorInfo.border",{dark:null,light:null,hcDark:ue.fromHex("#3794FF").transparent(.8),hcLight:"#292929"},v("infoBorder","If set, color of double underlines for infos in the editor.")),qNe=W("editorHint.foreground",{dark:ue.fromHex("#eeeeee").transparent(.7),light:"#6c6c6c",hcDark:null,hcLight:null},v("editorHint.foreground","Foreground color of hint squigglies in the editor."));W("editorHint.border",{dark:null,light:null,hcDark:ue.fromHex("#eeeeee").transparent(.8),hcLight:"#292929"},v("hintBorder","If set, color of double underlines for hints in the editor."));const KNe=W("editorLink.activeForeground",{dark:"#4E94CE",light:ue.blue,hcDark:ue.cyan,hcLight:"#292929"},v("activeLinkForeground","Color of active links.")),Yp=W("editor.selectionBackground",{light:"#ADD6FF",dark:"#264F78",hcDark:"#f3f518",hcLight:"#0F4A85"},v("editorSelectionBackground","Color of the editor selection.")),GNe=W("editor.selectionForeground",{light:null,dark:null,hcDark:"#000000",hcLight:ue.white},v("editorSelectionForeground","Color of the selected text for high contrast.")),Ide=W("editor.inactiveSelectionBackground",{light:Pt(Yp,.5),dark:Pt(Yp,.5),hcDark:Pt(Yp,.7),hcLight:Pt(Yp,.5)},v("editorInactiveSelection","Color of the selection in an inactive editor. The color must not be opaque so as not to hide underlying decorations."),!0),fK=W("editor.selectionHighlightBackground",{light:lne(Yp,ud,.3,.6),dark:lne(Yp,ud,.3,.6),hcDark:null,hcLight:null},v("editorSelectionHighlight","Color for regions with the same content as the selection. The color must not be opaque so as not to hide underlying decorations."),!0);W("editor.selectionHighlightBorder",{light:null,dark:null,hcDark:vn,hcLight:vn},v("editorSelectionHighlightBorder","Border color for regions with the same content as the selection."));W("editor.findMatchBackground",{light:"#A8AC94",dark:"#515C6A",hcDark:null,hcLight:null},v("editorFindMatch","Color of the current search match."));const YNe=W("editor.findMatchForeground",null,v("editorFindMatchForeground","Text color of the current search match.")),ig=W("editor.findMatchHighlightBackground",{light:"#EA5C0055",dark:"#EA5C0055",hcDark:null,hcLight:null},v("findMatchHighlight","Color of the other search matches. The color must not be opaque so as not to hide underlying decorations."),!0),ZNe=W("editor.findMatchHighlightForeground",null,v("findMatchHighlightForeground","Foreground color of the other search matches."),!0);W("editor.findRangeHighlightBackground",{dark:"#3a3d4166",light:"#b4b4b44d",hcDark:null,hcLight:null},v("findRangeHighlight","Color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0);W("editor.findMatchBorder",{light:null,dark:null,hcDark:vn,hcLight:vn},v("editorFindMatchBorder","Border color of the current search match."));const Zp=W("editor.findMatchHighlightBorder",{light:null,dark:null,hcDark:vn,hcLight:vn},v("findMatchHighlightBorder","Border color of the other search matches.")),XNe=W("editor.findRangeHighlightBorder",{dark:null,light:null,hcDark:Pt(vn,.4),hcLight:Pt(vn,.4)},v("findRangeHighlightBorder","Border color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0);W("editor.hoverHighlightBackground",{light:"#ADD6FF26",dark:"#264f7840",hcDark:"#ADD6FF26",hcLight:null},v("hoverHighlight","Highlight below the word for which a hover is shown. The color must not be opaque so as not to hide underlying decorations."),!0);const BA=W("editorHoverWidget.background",Bl,v("hoverBackground","Background color of the editor hover."));W("editorHoverWidget.foreground",f4,v("hoverForeground","Foreground color of the editor hover."));const Tde=W("editorHoverWidget.border",hK,v("hoverBorder","Border color of the editor hover."));W("editorHoverWidget.statusBarBackground",{dark:cu(BA,.2),light:PC(BA,.05),hcDark:Bl,hcLight:Bl},v("statusBarBackground","Background color of the editor hover status bar."));const gK=W("editorInlayHint.foreground",{dark:"#969696",light:"#969696",hcDark:ue.white,hcLight:ue.black},v("editorInlayHintForeground","Foreground color of inline hints")),pK=W("editorInlayHint.background",{dark:Pt(yM,.1),light:Pt(yM,.1),hcDark:Pt(ue.white,.1),hcLight:Pt(yM,.1)},v("editorInlayHintBackground","Background color of inline hints")),QNe=W("editorInlayHint.typeForeground",gK,v("editorInlayHintForegroundTypes","Foreground color of inline hints for types")),JNe=W("editorInlayHint.typeBackground",pK,v("editorInlayHintBackgroundTypes","Background color of inline hints for types")),eRe=W("editorInlayHint.parameterForeground",gK,v("editorInlayHintForegroundParameter","Foreground color of inline hints for parameters")),tRe=W("editorInlayHint.parameterBackground",pK,v("editorInlayHintBackgroundParameter","Background color of inline hints for parameters")),iRe=W("editorLightBulb.foreground",{dark:"#FFCC00",light:"#DDB100",hcDark:"#FFCC00",hcLight:"#007ACC"},v("editorLightBulbForeground","The color used for the lightbulb actions icon."));W("editorLightBulbAutoFix.foreground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},v("editorLightBulbAutoFixForeground","The color used for the lightbulb auto fix actions icon."));W("editorLightBulbAi.foreground",iRe,v("editorLightBulbAiForeground","The color used for the lightbulb AI icon."));W("editor.snippetTabstopHighlightBackground",{dark:new ue(new li(124,124,124,.3)),light:new ue(new li(10,50,100,.2)),hcDark:new ue(new li(124,124,124,.3)),hcLight:new ue(new li(10,50,100,.2))},v("snippetTabstopHighlightBackground","Highlight background color of a snippet tabstop."));W("editor.snippetTabstopHighlightBorder",null,v("snippetTabstopHighlightBorder","Highlight border color of a snippet tabstop."));W("editor.snippetFinalTabstopHighlightBackground",null,v("snippetFinalTabstopHighlightBackground","Highlight background color of the final tabstop of a snippet."));W("editor.snippetFinalTabstopHighlightBorder",{dark:"#525252",light:new ue(new li(10,50,100,.5)),hcDark:"#525252",hcLight:"#292929"},v("snippetFinalTabstopHighlightBorder","Highlight border color of the final tabstop of a snippet."));const VV=new ue(new li(155,185,85,.2)),zV=new ue(new li(255,0,0,.2)),nRe=W("diffEditor.insertedTextBackground",{dark:"#9ccc2c33",light:"#9ccc2c40",hcDark:null,hcLight:null},v("diffEditorInserted","Background color for text that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),sRe=W("diffEditor.removedTextBackground",{dark:"#ff000033",light:"#ff000033",hcDark:null,hcLight:null},v("diffEditorRemoved","Background color for text that got removed. The color must not be opaque so as not to hide underlying decorations."),!0);W("diffEditor.insertedLineBackground",{dark:VV,light:VV,hcDark:null,hcLight:null},v("diffEditorInsertedLines","Background color for lines that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0);W("diffEditor.removedLineBackground",{dark:zV,light:zV,hcDark:null,hcLight:null},v("diffEditorRemovedLines","Background color for lines that got removed. The color must not be opaque so as not to hide underlying decorations."),!0);W("diffEditorGutter.insertedLineBackground",null,v("diffEditorInsertedLineGutter","Background color for the margin where lines got inserted."));W("diffEditorGutter.removedLineBackground",null,v("diffEditorRemovedLineGutter","Background color for the margin where lines got removed."));const oRe=W("diffEditorOverview.insertedForeground",null,v("diffEditorOverviewInserted","Diff overview ruler foreground for inserted content.")),rRe=W("diffEditorOverview.removedForeground",null,v("diffEditorOverviewRemoved","Diff overview ruler foreground for removed content."));W("diffEditor.insertedTextBorder",{dark:null,light:null,hcDark:"#33ff2eff",hcLight:"#374E06"},v("diffEditorInsertedOutline","Outline color for the text that got inserted."));W("diffEditor.removedTextBorder",{dark:null,light:null,hcDark:"#FF008F",hcLight:"#AD0707"},v("diffEditorRemovedOutline","Outline color for text that got removed."));W("diffEditor.border",{dark:null,light:null,hcDark:si,hcLight:si},v("diffEditorBorder","Border color between the two text editors."));W("diffEditor.diagonalFill",{dark:"#cccccc33",light:"#22222233",hcDark:null,hcLight:null},v("diffDiagonalFill","Color of the diff editor's diagonal fill. The diagonal fill is used in side-by-side diff views."));W("diffEditor.unchangedRegionBackground","sideBar.background",v("diffEditor.unchangedRegionBackground","The background color of unchanged blocks in the diff editor."));W("diffEditor.unchangedRegionForeground","foreground",v("diffEditor.unchangedRegionForeground","The foreground color of unchanged blocks in the diff editor."));W("diffEditor.unchangedCodeBackground",{dark:"#74747429",light:"#b8b8b829",hcDark:null,hcLight:null},v("diffEditor.unchangedCodeBackground","The background color of unchanged code in the diff editor."));const GS=W("widget.shadow",{dark:Pt(ue.black,.36),light:Pt(ue.black,.16),hcDark:null,hcLight:null},v("widgetShadow","Shadow color of widgets such as find/replace inside the editor.")),Nde=W("widget.border",{dark:null,light:null,hcDark:si,hcLight:si},v("widgetBorder","Border color of widgets such as find/replace inside the editor.")),dne=W("toolbar.hoverBackground",{dark:"#5a5d5e50",light:"#b8b8b850",hcDark:null,hcLight:null},v("toolbarHoverBackground","Toolbar background when hovering over actions using the mouse"));W("toolbar.hoverOutline",{dark:null,light:null,hcDark:vn,hcLight:vn},v("toolbarHoverOutline","Toolbar outline when hovering over actions using the mouse"));W("toolbar.activeBackground",{dark:cu(dne,.1),light:PC(dne,.1),hcDark:null,hcLight:null},v("toolbarActiveBackground","Toolbar background when holding the mouse over actions"));const aRe=W("breadcrumb.foreground",Pt(zt,.8),v("breadcrumbsFocusForeground","Color of focused breadcrumb items.")),lRe=W("breadcrumb.background",ud,v("breadcrumbsBackground","Background color of breadcrumb items.")),une=W("breadcrumb.focusForeground",{light:PC(zt,.2),dark:cu(zt,.1),hcDark:cu(zt,.1),hcLight:cu(zt,.1)},v("breadcrumbsFocusForeground","Color of focused breadcrumb items.")),cRe=W("breadcrumb.activeSelectionForeground",{light:PC(zt,.2),dark:cu(zt,.1),hcDark:cu(zt,.1),hcLight:cu(zt,.1)},v("breadcrumbsSelectedForeground","Color of selected breadcrumb items."));W("breadcrumbPicker.background",Bl,v("breadcrumbsSelectedBackground","Background color of breadcrumb item picker."));const Rde=.5,hne=ue.fromHex("#40C8AE").transparent(Rde),fne=ue.fromHex("#40A6FF").transparent(Rde),gne=ue.fromHex("#606060").transparent(.4),mK=.4,oS=1,UV=W("merge.currentHeaderBackground",{dark:hne,light:hne,hcDark:null,hcLight:null},v("mergeCurrentHeaderBackground","Current header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);W("merge.currentContentBackground",Pt(UV,mK),v("mergeCurrentContentBackground","Current content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const $V=W("merge.incomingHeaderBackground",{dark:fne,light:fne,hcDark:null,hcLight:null},v("mergeIncomingHeaderBackground","Incoming header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);W("merge.incomingContentBackground",Pt($V,mK),v("mergeIncomingContentBackground","Incoming content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const jV=W("merge.commonHeaderBackground",{dark:gne,light:gne,hcDark:null,hcLight:null},v("mergeCommonHeaderBackground","Common ancestor header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);W("merge.commonContentBackground",Pt(jV,mK),v("mergeCommonContentBackground","Common ancestor content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const rS=W("merge.border",{dark:null,light:null,hcDark:"#C3DF6F",hcLight:"#007ACC"},v("mergeBorder","Border color on headers and the splitter in inline merge-conflicts."));W("editorOverviewRuler.currentContentForeground",{dark:Pt(UV,oS),light:Pt(UV,oS),hcDark:rS,hcLight:rS},v("overviewRulerCurrentContentForeground","Current overview ruler foreground for inline merge-conflicts."));W("editorOverviewRuler.incomingContentForeground",{dark:Pt($V,oS),light:Pt($V,oS),hcDark:rS,hcLight:rS},v("overviewRulerIncomingContentForeground","Incoming overview ruler foreground for inline merge-conflicts."));W("editorOverviewRuler.commonContentForeground",{dark:Pt(jV,oS),light:Pt(jV,oS),hcDark:rS,hcLight:rS},v("overviewRulerCommonContentForeground","Common ancestor overview ruler foreground for inline merge-conflicts."));const h7=W("editorOverviewRuler.findMatchForeground",{dark:"#d186167e",light:"#d186167e",hcDark:"#AB5A00",hcLight:"#AB5A00"},v("overviewRulerFindMatchForeground","Overview ruler marker color for find matches. The color must not be opaque so as not to hide underlying decorations."),!0),Mde=W("editorOverviewRuler.selectionHighlightForeground","#A0A0A0CC",v("overviewRulerSelectionHighlightForeground","Overview ruler marker color for selection highlights. The color must not be opaque so as not to hide underlying decorations."),!0),dRe=W("problemsErrorIcon.foreground",g4,v("problemsErrorIconForeground","The color used for the problems error icon.")),uRe=W("problemsWarningIcon.foreground",xg,v("problemsWarningIconForeground","The color used for the problems warning icon.")),hRe=W("problemsInfoIcon.foreground",Ph,v("problemsInfoIconForeground","The color used for the problems info icon.")),qV=W("minimap.findMatchHighlight",{light:"#d18616",dark:"#d18616",hcDark:"#AB5A00",hcLight:"#0F4A85"},v("minimapFindMatchHighlight","Minimap marker color for find matches."),!0),p4=W("minimap.selectionOccurrenceHighlight",{light:"#c9c9c9",dark:"#676767",hcDark:"#ffffff",hcLight:"#0F4A85"},v("minimapSelectionOccurrenceHighlight","Minimap marker color for repeating editor selections."),!0),pne=W("minimap.selectionHighlight",{light:"#ADD6FF",dark:"#264F78",hcDark:"#ffffff",hcLight:"#0F4A85"},v("minimapSelectionHighlight","Minimap marker color for the editor selection."),!0),fRe=W("minimap.infoHighlight",{dark:Ph,light:Ph,hcDark:DD,hcLight:DD},v("minimapInfo","Minimap marker color for infos.")),gRe=W("minimap.warningHighlight",{dark:xg,light:xg,hcDark:kD,hcLight:kD},v("overviewRuleWarning","Minimap marker color for warnings.")),pRe=W("minimap.errorHighlight",{dark:new ue(new li(255,18,18,.7)),light:new ue(new li(255,18,18,.7)),hcDark:new ue(new li(255,50,50,1)),hcLight:"#B5200D"},v("minimapError","Minimap marker color for errors.")),mRe=W("minimap.background",null,v("minimapBackground","Minimap background color.")),_Re=W("minimap.foregroundOpacity",ue.fromHex("#000f"),v("minimapForegroundOpacity",'Opacity of foreground elements rendered in the minimap. For example, "#000000c0" will render the elements with 75% opacity.'));W("minimapSlider.background",Pt(kde,.5),v("minimapSliderBackground","Minimap slider background color."));W("minimapSlider.hoverBackground",Pt(Dde,.5),v("minimapSliderHoverBackground","Minimap slider background color when hovering."));W("minimapSlider.activeBackground",Pt(Ede,.5),v("minimapSliderActiveBackground","Minimap slider background color when clicked on."));W("charts.foreground",zt,v("chartsForeground","The foreground color used in charts."));W("charts.lines",Pt(zt,.5),v("chartsLines","The color used for horizontal lines in charts."));W("charts.red",g4,v("chartsRed","The red color used in chart visualizations."));W("charts.blue",Ph,v("chartsBlue","The blue color used in chart visualizations."));W("charts.yellow",xg,v("chartsYellow","The yellow color used in chart visualizations."));W("charts.orange",qV,v("chartsOrange","The orange color used in chart visualizations."));W("charts.green",{dark:"#89D185",light:"#388A34",hcDark:"#89D185",hcLight:"#374e06"},v("chartsGreen","The green color used in chart visualizations."));W("charts.purple",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},v("chartsPurple","The purple color used in chart visualizations."));const KV=W("input.background",{dark:"#3C3C3C",light:ue.white,hcDark:ue.black,hcLight:ue.white},v("inputBoxBackground","Input box background.")),Ade=W("input.foreground",zt,v("inputBoxForeground","Input box foreground.")),Pde=W("input.border",{dark:null,light:null,hcDark:si,hcLight:si},v("inputBoxBorder","Input box border.")),m4=W("inputOption.activeBorder",{dark:"#007ACC",light:"#007ACC",hcDark:si,hcLight:si},v("inputBoxActiveOptionBorder","Border color of activated options in input fields.")),vRe=W("inputOption.hoverBackground",{dark:"#5a5d5e80",light:"#b8b8b850",hcDark:null,hcLight:null},v("inputOption.hoverBackground","Background color of activated options in input fields.")),iI=W("inputOption.activeBackground",{dark:Pt(Ah,.4),light:Pt(Ah,.2),hcDark:ue.transparent,hcLight:ue.transparent},v("inputOption.activeBackground","Background hover color of options in input fields.")),_4=W("inputOption.activeForeground",{dark:ue.white,light:ue.black,hcDark:zt,hcLight:zt},v("inputOption.activeForeground","Foreground color of activated options in input fields."));W("input.placeholderForeground",{light:Pt(zt,.5),dark:Pt(zt,.5),hcDark:Pt(zt,.7),hcLight:Pt(zt,.7)},v("inputPlaceholderForeground","Input box foreground color for placeholder text."));const bRe=W("inputValidation.infoBackground",{dark:"#063B49",light:"#D6ECF2",hcDark:ue.black,hcLight:ue.white},v("inputValidationInfoBackground","Input validation background color for information severity.")),CRe=W("inputValidation.infoForeground",{dark:null,light:null,hcDark:null,hcLight:zt},v("inputValidationInfoForeground","Input validation foreground color for information severity.")),yRe=W("inputValidation.infoBorder",{dark:"#007acc",light:"#007acc",hcDark:si,hcLight:si},v("inputValidationInfoBorder","Input validation border color for information severity.")),wRe=W("inputValidation.warningBackground",{dark:"#352A05",light:"#F6F5D2",hcDark:ue.black,hcLight:ue.white},v("inputValidationWarningBackground","Input validation background color for warning severity.")),SRe=W("inputValidation.warningForeground",{dark:null,light:null,hcDark:null,hcLight:zt},v("inputValidationWarningForeground","Input validation foreground color for warning severity.")),LRe=W("inputValidation.warningBorder",{dark:"#B89500",light:"#B89500",hcDark:si,hcLight:si},v("inputValidationWarningBorder","Input validation border color for warning severity.")),xRe=W("inputValidation.errorBackground",{dark:"#5A1D1D",light:"#F2DEDE",hcDark:ue.black,hcLight:ue.white},v("inputValidationErrorBackground","Input validation background color for error severity.")),kRe=W("inputValidation.errorForeground",{dark:null,light:null,hcDark:null,hcLight:zt},v("inputValidationErrorForeground","Input validation foreground color for error severity.")),DRe=W("inputValidation.errorBorder",{dark:"#BE1100",light:"#BE1100",hcDark:si,hcLight:si},v("inputValidationErrorBorder","Input validation border color for error severity.")),v4=W("dropdown.background",{dark:"#3C3C3C",light:ue.white,hcDark:ue.black,hcLight:ue.white},v("dropdownBackground","Dropdown background.")),ERe=W("dropdown.listBackground",{dark:null,light:null,hcDark:ue.black,hcLight:ue.white},v("dropdownListBackground","Dropdown list background.")),_K=W("dropdown.foreground",{dark:"#F0F0F0",light:zt,hcDark:ue.white,hcLight:zt},v("dropdownForeground","Dropdown foreground.")),vK=W("dropdown.border",{dark:v4,light:"#CECECE",hcDark:si,hcLight:si},v("dropdownBorder","Dropdown border.")),Ode=W("button.foreground",ue.white,v("buttonForeground","Button foreground color.")),IRe=W("button.separator",Pt(Ode,.4),v("buttonSeparator","Button separator color.")),Px=W("button.background",{dark:"#0E639C",light:"#007ACC",hcDark:null,hcLight:"#0F4A85"},v("buttonBackground","Button background color.")),TRe=W("button.hoverBackground",{dark:cu(Px,.2),light:PC(Px,.2),hcDark:Px,hcLight:Px},v("buttonHoverBackground","Button background color when hovering.")),NRe=W("button.border",si,v("buttonBorder","Button border color.")),RRe=W("button.secondaryForeground",{dark:ue.white,light:ue.white,hcDark:ue.white,hcLight:zt},v("buttonSecondaryForeground","Secondary button foreground color.")),GV=W("button.secondaryBackground",{dark:"#3A3D41",light:"#5F6A79",hcDark:null,hcLight:ue.white},v("buttonSecondaryBackground","Secondary button background color.")),MRe=W("button.secondaryHoverBackground",{dark:cu(GV,.2),light:PC(GV,.2),hcDark:null,hcLight:null},v("buttonSecondaryHoverBackground","Secondary button background color when hovering.")),Ox=W("radio.activeForeground",_4,v("radioActiveForeground","Foreground color of active radio option.")),ARe=W("radio.activeBackground",iI,v("radioBackground","Background color of active radio option.")),PRe=W("radio.activeBorder",m4,v("radioActiveBorder","Border color of the active radio option.")),ORe=W("radio.inactiveForeground",null,v("radioInactiveForeground","Foreground color of inactive radio option.")),FRe=W("radio.inactiveBackground",null,v("radioInactiveBackground","Background color of inactive radio option.")),BRe=W("radio.inactiveBorder",{light:Pt(Ox,.2),dark:Pt(Ox,.2),hcDark:Pt(Ox,.4),hcLight:Pt(Ox,.2)},v("radioInactiveBorder","Border color of the inactive radio option.")),WRe=W("radio.inactiveHoverBackground",vRe,v("radioHoverBackground","Background color of inactive active radio option when hovering.")),HRe=W("checkbox.background",v4,v("checkbox.background","Background color of checkbox widget."));W("checkbox.selectBackground",Bl,v("checkbox.select.background","Background color of checkbox widget when the element it's in is selected."));const VRe=W("checkbox.foreground",_K,v("checkbox.foreground","Foreground color of checkbox widget.")),zRe=W("checkbox.border",vK,v("checkbox.border","Border color of checkbox widget."));W("checkbox.selectBorder",FA,v("checkbox.select.border","Border color of checkbox widget when the element it's in is selected."));const URe=W("keybindingLabel.background",{dark:new ue(new li(128,128,128,.17)),light:new ue(new li(221,221,221,.4)),hcDark:ue.transparent,hcLight:ue.transparent},v("keybindingLabelBackground","Keybinding label background color. The keybinding label is used to represent a keyboard shortcut.")),$Re=W("keybindingLabel.foreground",{dark:ue.fromHex("#CCCCCC"),light:ue.fromHex("#555555"),hcDark:ue.white,hcLight:zt},v("keybindingLabelForeground","Keybinding label foreground color. The keybinding label is used to represent a keyboard shortcut.")),jRe=W("keybindingLabel.border",{dark:new ue(new li(51,51,51,.6)),light:new ue(new li(204,204,204,.4)),hcDark:new ue(new li(111,195,223)),hcLight:si},v("keybindingLabelBorder","Keybinding label border color. The keybinding label is used to represent a keyboard shortcut.")),qRe=W("keybindingLabel.bottomBorder",{dark:new ue(new li(68,68,68,.6)),light:new ue(new li(187,187,187,.4)),hcDark:new ue(new li(111,195,223)),hcLight:zt},v("keybindingLabelBottomBorder","Keybinding label border bottom color. The keybinding label is used to represent a keyboard shortcut.")),KRe=W("list.focusBackground",null,v("listFocusBackground","List/Tree background color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),GRe=W("list.focusForeground",null,v("listFocusForeground","List/Tree foreground color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),YRe=W("list.focusOutline",{dark:Ah,light:Ah,hcDark:vn,hcLight:vn},v("listFocusOutline","List/Tree outline color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),ZRe=W("list.focusAndSelectionOutline",null,v("listFocusAndSelectionOutline","List/Tree outline color for the focused item when the list/tree is active and selected. An active list/tree has keyboard focus, an inactive does not.")),dC=W("list.activeSelectionBackground",{dark:"#04395E",light:"#0060C0",hcDark:null,hcLight:ue.fromHex("#0F4A85").transparent(.1)},v("listActiveSelectionBackground","List/Tree background color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),ED=W("list.activeSelectionForeground",{dark:ue.white,light:ue.white,hcDark:null,hcLight:null},v("listActiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Fde=W("list.activeSelectionIconForeground",null,v("listActiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),XRe=W("list.inactiveSelectionBackground",{dark:"#37373D",light:"#E4E6F1",hcDark:null,hcLight:ue.fromHex("#0F4A85").transparent(.1)},v("listInactiveSelectionBackground","List/Tree background color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),QRe=W("list.inactiveSelectionForeground",null,v("listInactiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),JRe=W("list.inactiveSelectionIconForeground",null,v("listInactiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),eMe=W("list.inactiveFocusBackground",null,v("listInactiveFocusBackground","List/Tree background color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),tMe=W("list.inactiveFocusOutline",null,v("listInactiveFocusOutline","List/Tree outline color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),Bde=W("list.hoverBackground",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:ue.white.transparent(.1),hcLight:ue.fromHex("#0F4A85").transparent(.1)},v("listHoverBackground","List/Tree background when hovering over items using the mouse.")),Wde=W("list.hoverForeground",null,v("listHoverForeground","List/Tree foreground when hovering over items using the mouse.")),iMe=W("list.dropBackground",{dark:"#062F4A",light:"#D6EBFF",hcDark:null,hcLight:null},v("listDropBackground","List/Tree drag and drop background when moving items over other items when using the mouse.")),nMe=W("list.dropBetweenBackground",{dark:FA,light:FA,hcDark:null,hcLight:null},v("listDropBetweenBackground","List/Tree drag and drop border color when moving items between items when using the mouse.")),Rw=W("list.highlightForeground",{dark:"#2AAAFF",light:"#0066BF",hcDark:Ah,hcLight:Ah},v("highlight","List/Tree foreground color of the match highlights when searching inside the list/tree.")),sMe=W("list.focusHighlightForeground",{dark:Rw,light:HNe(dC,Rw,"#BBE7FF"),hcDark:Rw,hcLight:Rw},v("listFocusHighlightForeground","List/Tree foreground color of the match highlights on actively focused items when searching inside the list/tree."));W("list.invalidItemForeground",{dark:"#B89500",light:"#B89500",hcDark:"#B89500",hcLight:"#B5200D"},v("invalidItemForeground","List/Tree foreground color for invalid items, for example an unresolved root in explorer."));W("list.errorForeground",{dark:"#F88070",light:"#B01011",hcDark:null,hcLight:null},v("listErrorForeground","Foreground color of list items containing errors."));W("list.warningForeground",{dark:"#CCA700",light:"#855F00",hcDark:null,hcLight:null},v("listWarningForeground","Foreground color of list items containing warnings."));const oMe=W("listFilterWidget.background",{light:PC(Bl,0),dark:cu(Bl,0),hcDark:Bl,hcLight:Bl},v("listFilterWidgetBackground","Background color of the type filter widget in lists and trees.")),rMe=W("listFilterWidget.outline",{dark:ue.transparent,light:ue.transparent,hcDark:"#f38518",hcLight:"#007ACC"},v("listFilterWidgetOutline","Outline color of the type filter widget in lists and trees.")),aMe=W("listFilterWidget.noMatchesOutline",{dark:"#BE1100",light:"#BE1100",hcDark:si,hcLight:si},v("listFilterWidgetNoMatchesOutline","Outline color of the type filter widget in lists and trees, when there are no matches.")),lMe=W("listFilterWidget.shadow",GS,v("listFilterWidgetShadow","Shadow color of the type filter widget in lists and trees."));W("list.filterMatchBackground",{dark:ig,light:ig,hcDark:null,hcLight:null},v("listFilterMatchHighlight","Background color of the filtered match."));W("list.filterMatchBorder",{dark:Zp,light:Zp,hcDark:si,hcLight:vn},v("listFilterMatchHighlightBorder","Border color of the filtered match."));W("list.deemphasizedForeground",{dark:"#8C8C8C",light:"#8E8E90",hcDark:"#A7A8A9",hcLight:"#666666"},v("listDeemphasizedForeground","List/Tree foreground color for items that are deemphasized."));const Hde=W("tree.indentGuidesStroke",{dark:"#585858",light:"#a9a9a9",hcDark:"#a9a9a9",hcLight:"#a5a5a5"},v("treeIndentGuidesStroke","Tree stroke color for the indentation guides.")),cMe=W("tree.inactiveIndentGuidesStroke",Pt(Hde,.4),v("treeInactiveIndentGuidesStroke","Tree stroke color for the indentation guides that are not active.")),dMe=W("tree.tableColumnsBorder",{dark:"#CCCCCC20",light:"#61616120",hcDark:null,hcLight:null},v("tableColumnsBorder","Table border color between columns.")),uMe=W("tree.tableOddRowsBackground",{dark:Pt(zt,.04),light:Pt(zt,.04),hcDark:null,hcLight:null},v("tableOddRowsBackgroundColor","Background color for odd table rows."));W("editorActionList.background",Bl,v("editorActionListBackground","Action List background color."));W("editorActionList.foreground",f4,v("editorActionListForeground","Action List foreground color."));W("editorActionList.focusForeground",ED,v("editorActionListFocusForeground","Action List foreground color for the focused item."));W("editorActionList.focusBackground",dC,v("editorActionListFocusBackground","Action List background color for the focused item."));const hMe=W("menu.border",{dark:null,light:null,hcDark:si,hcLight:si},v("menuBorder","Border color of menus.")),fMe=W("menu.foreground",_K,v("menuForeground","Foreground color of menu items.")),gMe=W("menu.background",v4,v("menuBackground","Background color of menu items.")),pMe=W("menu.selectionForeground",ED,v("menuSelectionForeground","Foreground color of the selected menu item in menus.")),mMe=W("menu.selectionBackground",dC,v("menuSelectionBackground","Background color of the selected menu item in menus.")),_Me=W("menu.selectionBorder",{dark:null,light:null,hcDark:vn,hcLight:vn},v("menuSelectionBorder","Border color of the selected menu item in menus.")),vMe=W("menu.separatorBackground",{dark:"#606060",light:"#D4D4D4",hcDark:si,hcLight:si},v("menuSeparatorBackground","Color of a separator menu item in menus.")),mne=W("quickInput.background",Bl,v("pickerBackground","Quick picker background color. The quick picker widget is the container for pickers like the command palette.")),bMe=W("quickInput.foreground",f4,v("pickerForeground","Quick picker foreground color. The quick picker widget is the container for pickers like the command palette.")),CMe=W("quickInputTitle.background",{dark:new ue(new li(255,255,255,.105)),light:new ue(new li(0,0,0,.06)),hcDark:"#000000",hcLight:ue.white},v("pickerTitleBackground","Quick picker title background color. The quick picker widget is the container for pickers like the command palette.")),Vde=W("pickerGroup.foreground",{dark:"#3794FF",light:"#0066BF",hcDark:ue.white,hcLight:"#0F4A85"},v("pickerGroupForeground","Quick picker color for grouping labels.")),yMe=W("pickerGroup.border",{dark:"#3F3F46",light:"#CCCEDB",hcDark:ue.white,hcLight:"#0F4A85"},v("pickerGroupBorder","Quick picker color for grouping borders.")),_ne=W("quickInput.list.focusBackground",null,"",void 0,v("quickInput.list.focusBackground deprecation","Please use quickInputList.focusBackground instead")),ID=W("quickInputList.focusForeground",ED,v("quickInput.listFocusForeground","Quick picker foreground color for the focused item.")),bK=W("quickInputList.focusIconForeground",Fde,v("quickInput.listFocusIconForeground","Quick picker icon foreground color for the focused item.")),TD=W("quickInputList.focusBackground",{dark:xD(_ne,dC),light:xD(_ne,dC),hcDark:null,hcLight:null},v("quickInput.listFocusBackground","Quick picker background color for the focused item."));W("search.resultsInfoForeground",{light:zt,dark:Pt(zt,.65),hcDark:zt,hcLight:zt},v("search.resultsInfoForeground","Color of the text in the search viewlet's completion message."));W("searchEditor.findMatchBackground",{light:Pt(ig,.66),dark:Pt(ig,.66),hcDark:ig,hcLight:ig},v("searchEditor.queryMatch","Color of the Search Editor query matches."));W("searchEditor.findMatchBorder",{light:Pt(Zp,.66),dark:Pt(Zp,.66),hcDark:Zp,hcLight:Zp},v("searchEditor.editorFindMatchBorder","Border color of the Search Editor query matches."));var wMe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},vne=function(o,e){return function(t,i){e(t,i,o)}};const qh=Gt("hoverService");let aS=class extends X{get delay(){return this.isInstantlyHovering()?0:this._delay}constructor(e,t,i={},n,s){super(),this.placement=e,this.instantHover=t,this.overrideOptions=i,this.configurationService=n,this.hoverService=s,this.lastHoverHideTime=0,this.timeLimit=200,this.hoverDisposables=this._register(new le),this._delay=this.configurationService.getValue("workbench.hover.delay"),this._register(this.configurationService.onDidChangeConfiguration(r=>{r.affectsConfiguration("workbench.hover.delay")&&(this._delay=this.configurationService.getValue("workbench.hover.delay"))}))}showHover(e,t){const i=typeof this.overrideOptions=="function"?this.overrideOptions(e,t):this.overrideOptions;this.hoverDisposables.clear();const n=Ys(e.target)?[e.target]:e.target.targetElements;for(const r of n)this.hoverDisposables.add(Bn(r,"keydown",a=>{a.equals(9)&&this.hoverService.hideHover()}));const s=Ys(e.content)?void 0:e.content.toString();return this.hoverService.showHover({...e,...i,persistence:{hideOnKeyDown:!0,...i.persistence},id:s,appearance:{...e.appearance,compact:!0,skipFadeInAnimation:this.isInstantlyHovering(),...i.appearance}},t)}isInstantlyHovering(){return this.instantHover&&Date.now()-this.lastHoverHideTime<this.timeLimit}onDidHideHover(){this.hoverDisposables.clear(),this.instantHover&&(this.lastHoverHideTime=Date.now())}};aS=wMe([vne(3,Ht),vne(4,qh)],aS);const Pg=Gt("contextViewService"),cl=Gt("contextMenuService"),Di=Gt("keybindingService");class YS{constructor(){this._hooks=new le,this._pointerMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(e,t){if(!this.isMonitoring())return;this._hooks.clear(),this._pointerMoveCallback=null;const i=this._onStopCallback;this._onStopCallback=null,e&&i&&i(t)}isMonitoring(){return!!this._pointerMoveCallback}startMonitoring(e,t,i,n,s){this.isMonitoring()&&this.stopMonitoring(!1),this._pointerMoveCallback=n,this._onStopCallback=s;let r=e;try{e.setPointerCapture(t),this._hooks.add(it(()=>{try{e.releasePointerCapture(t)}catch{}}))}catch{r=at(e)}this._hooks.add(se(r,Le.POINTER_MOVE,a=>{if(a.buttons!==i){this.stopMonitoring(!0);return}a.preventDefault(),this._pointerMoveCallback(a)})),this._hooks.add(se(r,Le.POINTER_UP,a=>this.stopMonitoring(!0)))}}function gs(o,e,t){let i=null,n=null;if(typeof t.value=="function"?(i="value",n=t.value,n.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof t.get=="function"&&(i="get",n=t.get),!n)throw new Error("not supported");const s=`$memoize$${e}`;t[i]=function(...r){return this.hasOwnProperty(s)||Object.defineProperty(this,s,{configurable:!1,enumerable:!1,writable:!1,value:n.apply(this,r)}),this[s]}}var SMe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},tn;(function(o){o.Tap="-monaco-gesturetap",o.Change="-monaco-gesturechange",o.Start="-monaco-gesturestart",o.End="-monaco-gesturesend",o.Contextmenu="-monaco-gesturecontextmenu"})(tn||(tn={}));const Io=class Io extends X{constructor(){super(),this.dispatched=!1,this.targets=new jr,this.ignoreTargets=new jr,this.activeTouches={},this.handle=null,this._lastSetTapCountTime=0,this._register(Ee.runAndSubscribe(KF,({window:e,disposables:t})=>{t.add(se(e.document,"touchstart",i=>this.onTouchStart(i),{passive:!1})),t.add(se(e.document,"touchend",i=>this.onTouchEnd(e,i))),t.add(se(e.document,"touchmove",i=>this.onTouchMove(i),{passive:!1}))},{window:Vi,disposables:this._store}))}static addTarget(e){if(!Io.isTouchDevice())return X.None;Io.INSTANCE||(Io.INSTANCE=new Io);const t=Io.INSTANCE.targets.push(e);return it(t)}static ignoreTarget(e){if(!Io.isTouchDevice())return X.None;Io.INSTANCE||(Io.INSTANCE=new Io);const t=Io.INSTANCE.ignoreTargets.push(e);return it(t)}static isTouchDevice(){return"ontouchstart"in Vi||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(e){const t=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let i=0,n=e.targetTouches.length;i<n;i++){const s=e.targetTouches.item(i);this.activeTouches[s.identifier]={id:s.identifier,initialTarget:s.target,initialTimeStamp:t,initialPageX:s.pageX,initialPageY:s.pageY,rollingTimestamps:[t],rollingPageX:[s.pageX],rollingPageY:[s.pageY]};const r=this.newGestureEvent(tn.Start,s.target);r.pageX=s.pageX,r.pageY=s.pageY,this.dispatchEvent(r)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}onTouchEnd(e,t){const i=Date.now(),n=Object.keys(this.activeTouches).length;for(let s=0,r=t.changedTouches.length;s<r;s++){const a=t.changedTouches.item(s);if(!this.activeTouches.hasOwnProperty(String(a.identifier))){console.warn("move of an UNKNOWN touch",a);continue}const l=this.activeTouches[a.identifier],c=Date.now()-l.initialTimeStamp;if(c<Io.HOLD_DELAY&&Math.abs(l.initialPageX-lc(l.rollingPageX))<30&&Math.abs(l.initialPageY-lc(l.rollingPageY))<30){const u=this.newGestureEvent(tn.Tap,l.initialTarget);u.pageX=lc(l.rollingPageX),u.pageY=lc(l.rollingPageY),this.dispatchEvent(u)}else if(c>=Io.HOLD_DELAY&&Math.abs(l.initialPageX-lc(l.rollingPageX))<30&&Math.abs(l.initialPageY-lc(l.rollingPageY))<30){const u=this.newGestureEvent(tn.Contextmenu,l.initialTarget);u.pageX=lc(l.rollingPageX),u.pageY=lc(l.rollingPageY),this.dispatchEvent(u)}else if(n===1){const u=lc(l.rollingPageX),f=lc(l.rollingPageY),g=lc(l.rollingTimestamps)-l.rollingTimestamps[0],p=u-l.rollingPageX[0],_=f-l.rollingPageY[0],b=[...this.targets].filter(y=>l.initialTarget instanceof Node&&y.contains(l.initialTarget));this.inertia(e,b,i,Math.abs(p)/g,p>0?1:-1,u,Math.abs(_)/g,_>0?1:-1,f)}this.dispatchEvent(this.newGestureEvent(tn.End,l.initialTarget)),delete this.activeTouches[a.identifier]}this.dispatched&&(t.preventDefault(),t.stopPropagation(),this.dispatched=!1)}newGestureEvent(e,t){const i=document.createEvent("CustomEvent");return i.initEvent(e,!1,!0),i.initialTarget=t,i.tapCount=0,i}dispatchEvent(e){if(e.type===tn.Tap){const t=new Date().getTime();let i=0;t-this._lastSetTapCountTime>Io.CLEAR_TAP_COUNT_TIME?i=1:i=2,this._lastSetTapCountTime=t,e.tapCount=i}else(e.type===tn.Change||e.type===tn.Contextmenu)&&(this._lastSetTapCountTime=0);if(e.initialTarget instanceof Node){for(const i of this.ignoreTargets)if(i.contains(e.initialTarget))return;const t=[];for(const i of this.targets)if(i.contains(e.initialTarget)){let n=0,s=e.initialTarget;for(;s&&s!==i;)n++,s=s.parentElement;t.push([n,i])}t.sort((i,n)=>i[0]-n[0]);for(const[i,n]of t)n.dispatchEvent(e),this.dispatched=!0}}inertia(e,t,i,n,s,r,a,l,c){this.handle=al(e,()=>{const u=Date.now(),f=u-i;let g=0,p=0,_=!0;n+=Io.SCROLL_FRICTION*f,a+=Io.SCROLL_FRICTION*f,n>0&&(_=!1,g=s*n*f),a>0&&(_=!1,p=l*a*f);const b=this.newGestureEvent(tn.Change);b.translationX=g,b.translationY=p,t.forEach(y=>y.dispatchEvent(b)),_||this.inertia(e,t,u,n,s,r+g,a,l,c+p)})}onTouchMove(e){const t=Date.now();for(let i=0,n=e.changedTouches.length;i<n;i++){const s=e.changedTouches.item(i);if(!this.activeTouches.hasOwnProperty(String(s.identifier))){console.warn("end of an UNKNOWN touch",s);continue}const r=this.activeTouches[s.identifier],a=this.newGestureEvent(tn.Change,r.initialTarget);a.translationX=s.pageX-lc(r.rollingPageX),a.translationY=s.pageY-lc(r.rollingPageY),a.pageX=s.pageX,a.pageY=s.pageY,this.dispatchEvent(a),r.rollingPageX.length>3&&(r.rollingPageX.shift(),r.rollingPageY.shift(),r.rollingTimestamps.shift()),r.rollingPageX.push(s.pageX),r.rollingPageY.push(s.pageY),r.rollingTimestamps.push(t)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}};Io.SCROLL_FRICTION=-.005,Io.HOLD_DELAY=700,Io.CLEAR_TAP_COUNT_TIME=400;let Jo=Io;SMe([gs],Jo,"isTouchDevice",null);let Zl=class extends X{onclick(e,t){this._register(se(e,Le.CLICK,i=>t(new td(at(e),i))))}onmousedown(e,t){this._register(se(e,Le.MOUSE_DOWN,i=>t(new td(at(e),i))))}onmouseover(e,t){this._register(se(e,Le.MOUSE_OVER,i=>t(new td(at(e),i))))}onmouseleave(e,t){this._register(se(e,Le.MOUSE_LEAVE,i=>t(new td(at(e),i))))}onkeydown(e,t){this._register(se(e,Le.KEY_DOWN,i=>t(new Zi(i))))}onkeyup(e,t){this._register(se(e,Le.KEY_UP,i=>t(new Zi(i))))}oninput(e,t){this._register(se(e,Le.INPUT,t))}onblur(e,t){this._register(se(e,Le.BLUR,t))}onfocus(e,t){this._register(se(e,Le.FOCUS,t))}ignoreGesture(e){return Jo.ignoreTarget(e)}};const lS=11;class LMe extends Zl{constructor(e){super(),this._onActivate=e.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=e.bgWidth+"px",this.bgDomNode.style.height=e.bgHeight+"px",typeof e.top<"u"&&(this.bgDomNode.style.top="0px"),typeof e.left<"u"&&(this.bgDomNode.style.left="0px"),typeof e.bottom<"u"&&(this.bgDomNode.style.bottom="0px"),typeof e.right<"u"&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=e.className,this.domNode.classList.add(...ut.asClassNameArray(e.icon)),this.domNode.style.position="absolute",this.domNode.style.width=lS+"px",this.domNode.style.height=lS+"px",typeof e.top<"u"&&(this.domNode.style.top=e.top+"px"),typeof e.left<"u"&&(this.domNode.style.left=e.left+"px"),typeof e.bottom<"u"&&(this.domNode.style.bottom=e.bottom+"px"),typeof e.right<"u"&&(this.domNode.style.right=e.right+"px"),this._pointerMoveMonitor=this._register(new YS),this._register(Bn(this.bgDomNode,Le.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._register(Bn(this.domNode,Le.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._pointerdownRepeatTimer=this._register(new Uq),this._pointerdownScheduleRepeatTimer=this._register(new gd)}_arrowPointerDown(e){if(!e.target||!(e.target instanceof Element))return;const t=()=>{this._pointerdownRepeatTimer.cancelAndSet(()=>this._onActivate(),1e3/24,at(e))};this._onActivate(),this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancelAndSet(t,200),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,i=>{},()=>{this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancel()}),e.preventDefault()}}class xMe extends X{constructor(e,t,i){super(),this._visibility=e,this._visibleClassName=t,this._invisibleClassName=i,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new gd)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this._updateShouldBeVisible())}setShouldBeVisible(e){this._rawShouldBeVisible=e,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility===2?!1:this._visibility===3?!0:this._rawShouldBeVisible}_updateShouldBeVisible(){const e=this._applyVisibilitySetting();this._shouldBeVisible!==e&&(this._shouldBeVisible=e,this.ensureVisibility())}setIsNeeded(e){this._isNeeded!==e&&(this._isNeeded=e,this.ensureVisibility())}setDomNode(e){this._domNode=e,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{var e;(e=this._domNode)==null||e.setClassName(this._visibleClassName)},0))}_hide(e){var t;this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,(t=this._domNode)==null||t.setClassName(this._invisibleClassName+(e?" fade":"")))}}const kMe=140;class zde extends Zl{constructor(e){super(),this._lazyRender=e.lazyRender,this._host=e.host,this._scrollable=e.scrollable,this._scrollByPage=e.scrollByPage,this._scrollbarState=e.scrollbarState,this._visibilityController=this._register(new xMe(e.visibility,"visible scrollbar "+e.extraScrollbarClassName,"invisible scrollbar "+e.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._pointerMoveMonitor=this._register(new YS),this._shouldRender=!0,this.domNode=ki(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this._register(se(this.domNode.domNode,Le.POINTER_DOWN,t=>this._domNodePointerDown(t)))}_createArrow(e){const t=this._register(new LMe(e));this.domNode.domNode.appendChild(t.bgDomNode),this.domNode.domNode.appendChild(t.domNode)}_createSlider(e,t,i,n){this.slider=ki(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(e),this.slider.setLeft(t),typeof i=="number"&&this.slider.setWidth(i),typeof n=="number"&&this.slider.setHeight(n),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this._register(se(this.slider.domNode,Le.POINTER_DOWN,s=>{s.button===0&&(s.preventDefault(),this._sliderPointerDown(s))})),this.onclick(this.slider.domNode,s=>{s.leftButton&&s.stopPropagation()})}_onElementSize(e){return this._scrollbarState.setVisibleSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(e){return this._scrollbarState.setScrollSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(e){return this._scrollbarState.setScrollPosition(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodePointerDown(e){e.target===this.domNode.domNode&&this._onPointerDown(e)}delegatePointerDown(e){const t=this.domNode.domNode.getClientRects()[0].top,i=t+this._scrollbarState.getSliderPosition(),n=t+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),s=this._sliderPointerPosition(e);i<=s&&s<=n?e.button===0&&(e.preventDefault(),this._sliderPointerDown(e)):this._onPointerDown(e)}_onPointerDown(e){let t,i;if(e.target===this.domNode.domNode&&typeof e.offsetX=="number"&&typeof e.offsetY=="number")t=e.offsetX,i=e.offsetY;else{const s=os(this.domNode.domNode);t=e.pageX-s.left,i=e.pageY-s.top}const n=this._pointerDownRelativePosition(t,i);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(n):this._scrollbarState.getDesiredScrollPositionFromOffset(n)),e.button===0&&(e.preventDefault(),this._sliderPointerDown(e))}_sliderPointerDown(e){if(!e.target||!(e.target instanceof Element))return;const t=this._sliderPointerPosition(e),i=this._sliderOrthogonalPointerPosition(e),n=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,s=>{const r=this._sliderOrthogonalPointerPosition(s),a=Math.abs(r-i);if(Po&&a>kMe){this._setDesiredScrollPositionNow(n.getScrollPosition());return}const c=this._sliderPointerPosition(s)-t;this._setDesiredScrollPositionNow(n.getDesiredScrollPositionFromDelta(c))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd()}),this._host.onDragStart()}_setDesiredScrollPositionNow(e){const t={};this.writeScrollPosition(t,e),this._scrollable.setScrollPositionNow(t)}updateScrollbarSize(e){this._updateScrollbarSize(e),this._scrollbarState.setScrollbarSize(e),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}}const DMe=20;class cS{constructor(e,t,i,n,s,r){this._scrollbarSize=Math.round(t),this._oppositeScrollbarSize=Math.round(i),this._arrowSize=Math.round(e),this._visibleSize=n,this._scrollSize=s,this._scrollPosition=r,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new cS(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(e){const t=Math.round(e);return this._visibleSize!==t?(this._visibleSize=t,this._refreshComputedValues(),!0):!1}setScrollSize(e){const t=Math.round(e);return this._scrollSize!==t?(this._scrollSize=t,this._refreshComputedValues(),!0):!1}setScrollPosition(e){const t=Math.round(e);return this._scrollPosition!==t?(this._scrollPosition=t,this._refreshComputedValues(),!0):!1}setScrollbarSize(e){this._scrollbarSize=Math.round(e)}setOppositeScrollbarSize(e){this._oppositeScrollbarSize=Math.round(e)}static _computeValues(e,t,i,n,s){const r=Math.max(0,i-e),a=Math.max(0,r-2*t),l=n>0&&n>i;if(!l)return{computedAvailableSize:Math.round(r),computedIsNeeded:l,computedSliderSize:Math.round(a),computedSliderRatio:0,computedSliderPosition:0};const c=Math.round(Math.max(DMe,Math.floor(i*a/n))),u=(a-c)/(n-i),f=s*u;return{computedAvailableSize:Math.round(r),computedIsNeeded:l,computedSliderSize:Math.round(c),computedSliderRatio:u,computedSliderPosition:Math.round(f)}}_refreshComputedValues(){const e=cS._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=e.computedAvailableSize,this._computedIsNeeded=e.computedIsNeeded,this._computedSliderSize=e.computedSliderSize,this._computedSliderRatio=e.computedSliderRatio,this._computedSliderPosition=e.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize-this._computedSliderSize/2;return Math.round(t/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize;let i=this._scrollPosition;return t<this._computedSliderPosition?i-=this._visibleSize:i+=this._visibleSize,i}getDesiredScrollPositionFromDelta(e){if(!this._computedIsNeeded)return 0;const t=this._computedSliderPosition+e;return Math.round(t/this._computedSliderRatio)}}class EMe extends zde{constructor(e,t,i){const n=e.getScrollDimensions(),s=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:i,scrollbarState:new cS(t.horizontalHasArrows?t.arrowSize:0,t.horizontal===2?0:t.horizontalScrollbarSize,t.vertical===2?0:t.verticalScrollbarSize,n.width,n.scrollWidth,s.scrollLeft),visibility:t.horizontal,extraScrollbarClassName:"horizontal",scrollable:e,scrollByPage:t.scrollByPage}),t.horizontalHasArrows){const r=(t.arrowSize-lS)/2,a=(t.horizontalScrollbarSize-lS)/2;this._createArrow({className:"scra",icon:Se.scrollbarButtonLeft,top:a,left:r,bottom:void 0,right:void 0,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new rC(null,1,0))}),this._createArrow({className:"scra",icon:Se.scrollbarButtonRight,top:a,left:void 0,bottom:void 0,right:r,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new rC(null,-1,0))})}this._createSlider(Math.floor((t.horizontalScrollbarSize-t.horizontalSliderSize)/2),0,void 0,t.horizontalSliderSize)}_updateSlider(e,t){this.slider.setWidth(e),this.slider.setLeft(t)}_renderDomNode(e,t){this.domNode.setWidth(e),this.domNode.setHeight(t),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(e.width)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return e}_sliderPointerPosition(e){return e.pageX}_sliderOrthogonalPointerPosition(e){return e.pageY}_updateScrollbarSize(e){this.slider.setHeight(e)}writeScrollPosition(e,t){e.scrollLeft=t}updateOptions(e){this.updateScrollbarSize(e.horizontal===2?0:e.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._visibilityController.setVisibility(e.horizontal),this._scrollByPage=e.scrollByPage}}class IMe extends zde{constructor(e,t,i){const n=e.getScrollDimensions(),s=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:i,scrollbarState:new cS(t.verticalHasArrows?t.arrowSize:0,t.vertical===2?0:t.verticalScrollbarSize,0,n.height,n.scrollHeight,s.scrollTop),visibility:t.vertical,extraScrollbarClassName:"vertical",scrollable:e,scrollByPage:t.scrollByPage}),t.verticalHasArrows){const r=(t.arrowSize-lS)/2,a=(t.verticalScrollbarSize-lS)/2;this._createArrow({className:"scra",icon:Se.scrollbarButtonUp,top:r,left:a,bottom:void 0,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new rC(null,0,1))}),this._createArrow({className:"scra",icon:Se.scrollbarButtonDown,top:void 0,left:a,bottom:r,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new rC(null,0,-1))})}this._createSlider(0,Math.floor((t.verticalScrollbarSize-t.verticalSliderSize)/2),t.verticalSliderSize,void 0)}_updateSlider(e,t){this.slider.setHeight(e),this.slider.setTop(t)}_renderDomNode(e,t){this.domNode.setWidth(t),this.domNode.setHeight(e),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(e.height)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return t}_sliderPointerPosition(e){return e.pageY}_sliderOrthogonalPointerPosition(e){return e.pageX}_updateScrollbarSize(e){this.slider.setWidth(e)}writeScrollPosition(e,t){e.scrollTop=t}updateOptions(e){this.updateScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(e.vertical),this._scrollByPage=e.scrollByPage}}class WA{constructor(e,t,i,n,s,r,a){this._forceIntegerValues=e,this._scrollStateBrand=void 0,this._forceIntegerValues&&(t=t|0,i=i|0,n=n|0,s=s|0,r=r|0,a=a|0),this.rawScrollLeft=n,this.rawScrollTop=a,t<0&&(t=0),n+t>i&&(n=i-t),n<0&&(n=0),s<0&&(s=0),a+s>r&&(a=r-s),a<0&&(a=0),this.width=t,this.scrollWidth=i,this.scrollLeft=n,this.height=s,this.scrollHeight=r,this.scrollTop=a}equals(e){return this.rawScrollLeft===e.rawScrollLeft&&this.rawScrollTop===e.rawScrollTop&&this.width===e.width&&this.scrollWidth===e.scrollWidth&&this.scrollLeft===e.scrollLeft&&this.height===e.height&&this.scrollHeight===e.scrollHeight&&this.scrollTop===e.scrollTop}withScrollDimensions(e,t){return new WA(this._forceIntegerValues,typeof e.width<"u"?e.width:this.width,typeof e.scrollWidth<"u"?e.scrollWidth:this.scrollWidth,t?this.rawScrollLeft:this.scrollLeft,typeof e.height<"u"?e.height:this.height,typeof e.scrollHeight<"u"?e.scrollHeight:this.scrollHeight,t?this.rawScrollTop:this.scrollTop)}withScrollPosition(e){return new WA(this._forceIntegerValues,this.width,this.scrollWidth,typeof e.scrollLeft<"u"?e.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,typeof e.scrollTop<"u"?e.scrollTop:this.rawScrollTop)}createScrollEvent(e,t){const i=this.width!==e.width,n=this.scrollWidth!==e.scrollWidth,s=this.scrollLeft!==e.scrollLeft,r=this.height!==e.height,a=this.scrollHeight!==e.scrollHeight,l=this.scrollTop!==e.scrollTop;return{inSmoothScrolling:t,oldWidth:e.width,oldScrollWidth:e.scrollWidth,oldScrollLeft:e.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:e.height,oldScrollHeight:e.scrollHeight,oldScrollTop:e.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:i,scrollWidthChanged:n,scrollLeftChanged:s,heightChanged:r,scrollHeightChanged:a,scrollTopChanged:l}}}class ZS extends X{constructor(e){super(),this._scrollableBrand=void 0,this._onScroll=this._register(new Y),this.onScroll=this._onScroll.event,this._smoothScrollDuration=e.smoothScrollDuration,this._scheduleAtNextAnimationFrame=e.scheduleAtNextAnimationFrame,this._state=new WA(e.forceIntegerValues,0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(e){this._smoothScrollDuration=e}validateScrollPosition(e){return this._state.withScrollPosition(e)}getScrollDimensions(){return this._state}setScrollDimensions(e,t){var n;const i=this._state.withScrollDimensions(e,t);this._setState(i,!!this._smoothScrolling),(n=this._smoothScrolling)==null||n.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(e){const t=this._state.withScrollPosition(e);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(t,!1)}setScrollPositionSmooth(e,t){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(e);if(this._smoothScrolling){e={scrollLeft:typeof e.scrollLeft>"u"?this._smoothScrolling.to.scrollLeft:e.scrollLeft,scrollTop:typeof e.scrollTop>"u"?this._smoothScrolling.to.scrollTop:e.scrollTop};const i=this._state.withScrollPosition(e);if(this._smoothScrolling.to.scrollLeft===i.scrollLeft&&this._smoothScrolling.to.scrollTop===i.scrollTop)return;let n;t?n=new ND(this._smoothScrolling.from,i,this._smoothScrolling.startTime,this._smoothScrolling.duration):n=this._smoothScrolling.combine(this._state,i,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=n}else{const i=this._state.withScrollPosition(e);this._smoothScrolling=ND.start(this._state,i,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}hasPendingScrollAnimation(){return!!this._smoothScrolling}_performSmoothScrolling(){if(!this._smoothScrolling)return;const e=this._smoothScrolling.tick(),t=this._state.withScrollPosition(e);if(this._setState(t,!0),!!this._smoothScrolling){if(e.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}}_setState(e,t){const i=this._state;i.equals(e)||(this._state=e,this._onScroll.fire(this._state.createScrollEvent(i,t)))}}class bne{constructor(e,t,i){this.scrollLeft=e,this.scrollTop=t,this.isDone=i}}function f7(o,e){const t=e-o;return function(i){return o+t*RMe(i)}}function TMe(o,e,t){return function(i){return i<t?o(i/t):e((i-t)/(1-t))}}class ND{constructor(e,t,i,n){this.from=e,this.to=t,this.duration=n,this.startTime=i,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(e,t,i){if(Math.abs(e-t)>2.5*i){let s,r;return e<t?(s=e+.75*i,r=t-.75*i):(s=e-.75*i,r=t+.75*i),TMe(f7(e,s),f7(r,t),.33)}return f7(e,t)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(e){this.to=e.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(e){const t=(e-this.startTime)/this.duration;if(t<1){const i=this.scrollLeft(t),n=this.scrollTop(t);return new bne(i,n,!1)}return new bne(this.to.scrollLeft,this.to.scrollTop,!0)}combine(e,t,i){return ND.start(e,t,i)}static start(e,t,i){i=i+10;const n=Date.now()-10;return new ND(e,t,n,i)}}function NMe(o){return Math.pow(o,3)}function RMe(o){return 1-NMe(1-o)}const MMe=500,Cne=50;class AMe{constructor(e,t,i){this.timestamp=e,this.deltaX=t,this.deltaY=i,this.score=0}}const m2=class m2{constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let e=1,t=0,i=1,n=this._rear;do{const s=n===this._front?e:Math.pow(2,-i);if(e-=s,t+=this._memory[n].score*s,n===this._front)break;n=(this._capacity+n-1)%this._capacity,i++}while(!0);return t<=.5}acceptStandardWheelEvent(e){if(XE){const t=at(e.browserEvent),i=Yke(t);this.accept(Date.now(),e.deltaX*i,e.deltaY*i)}else this.accept(Date.now(),e.deltaX,e.deltaY)}accept(e,t,i){let n=null;const s=new AMe(e,t,i);this._front===-1&&this._rear===-1?(this._memory[0]=s,this._front=0,this._rear=0):(n=this._memory[this._rear],this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=s),s.score=this._computeScore(s,n)}_computeScore(e,t){if(Math.abs(e.deltaX)>0&&Math.abs(e.deltaY)>0)return 1;let i=.5;if((!this._isAlmostInt(e.deltaX)||!this._isAlmostInt(e.deltaY))&&(i+=.25),t){const n=Math.abs(e.deltaX),s=Math.abs(e.deltaY),r=Math.abs(t.deltaX),a=Math.abs(t.deltaY),l=Math.max(Math.min(n,r),1),c=Math.max(Math.min(s,a),1),u=Math.max(n,r),f=Math.max(s,a);u%l===0&&f%c===0&&(i-=.5)}return Math.min(Math.max(i,0),1)}_isAlmostInt(e){return Math.abs(Math.round(e)-e)<.01}};m2.INSTANCE=new m2;let HA=m2;class CK extends Zl{get options(){return this._options}constructor(e,t,i){super(),this._onScroll=this._register(new Y),this.onScroll=this._onScroll.event,this._onWillScroll=this._register(new Y),e.style.overflow="hidden",this._options=PMe(t),this._scrollable=i,this._register(this._scrollable.onScroll(s=>{this._onWillScroll.fire(s),this._onDidScroll(s),this._onScroll.fire(s)}));const n={onMouseWheel:s=>this._onMouseWheel(s),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new IMe(this._scrollable,this._options,n)),this._horizontalScrollbar=this._register(new EMe(this._scrollable,this._options,n)),this._domNode=document.createElement("div"),this._domNode.className="monaco-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.style.overflow="hidden",this._domNode.appendChild(e),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=ki(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=ki(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=ki(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,s=>this._onMouseOver(s)),this.onmouseleave(this._listenOnDomNode,s=>this._onMouseLeave(s)),this._hideTimeout=this._register(new gd),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}dispose(){this._mouseWheelToDispose=$i(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarPointerDown(e){this._verticalScrollbar.delegatePointerDown(e)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(e){this._scrollable.setScrollDimensions(e,!1)}updateClassName(e){this._options.className=e,Kt&&(this._options.className+=" mac"),this._domNode.className="monaco-scrollable-element "+this._options.className}updateOptions(e){typeof e.handleMouseWheel<"u"&&(this._options.handleMouseWheel=e.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),typeof e.mouseWheelScrollSensitivity<"u"&&(this._options.mouseWheelScrollSensitivity=e.mouseWheelScrollSensitivity),typeof e.fastScrollSensitivity<"u"&&(this._options.fastScrollSensitivity=e.fastScrollSensitivity),typeof e.scrollPredominantAxis<"u"&&(this._options.scrollPredominantAxis=e.scrollPredominantAxis),typeof e.horizontal<"u"&&(this._options.horizontal=e.horizontal),typeof e.vertical<"u"&&(this._options.vertical=e.vertical),typeof e.horizontalScrollbarSize<"u"&&(this._options.horizontalScrollbarSize=e.horizontalScrollbarSize),typeof e.verticalScrollbarSize<"u"&&(this._options.verticalScrollbarSize=e.verticalScrollbarSize),typeof e.scrollByPage<"u"&&(this._options.scrollByPage=e.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}delegateScrollFromMouseWheelEvent(e){this._onMouseWheel(new rC(e))}_setListeningToMouseWheel(e){if(this._mouseWheelToDispose.length>0!==e&&(this._mouseWheelToDispose=$i(this._mouseWheelToDispose),e)){const i=n=>{this._onMouseWheel(new rC(n))};this._mouseWheelToDispose.push(se(this._listenOnDomNode,Le.MOUSE_WHEEL,i,{passive:!1}))}}_onMouseWheel(e){var s;if((s=e.browserEvent)!=null&&s.defaultPrevented)return;const t=HA.INSTANCE;t.acceptStandardWheelEvent(e);let i=!1;if(e.deltaY||e.deltaX){let r=e.deltaY*this._options.mouseWheelScrollSensitivity,a=e.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(this._options.scrollYToX&&a+r===0?a=r=0:Math.abs(r)>=Math.abs(a)?a=0:r=0),this._options.flipAxes&&([r,a]=[a,r]);const l=!Kt&&e.browserEvent&&e.browserEvent.shiftKey;(this._options.scrollYToX||l)&&!a&&(a=r,r=0),e.browserEvent&&e.browserEvent.altKey&&(a=a*this._options.fastScrollSensitivity,r=r*this._options.fastScrollSensitivity);const c=this._scrollable.getFutureScrollPosition();let u={};if(r){const f=Cne*r,g=c.scrollTop-(f<0?Math.floor(f):Math.ceil(f));this._verticalScrollbar.writeScrollPosition(u,g)}if(a){const f=Cne*a,g=c.scrollLeft-(f<0?Math.floor(f):Math.ceil(f));this._horizontalScrollbar.writeScrollPosition(u,g)}u=this._scrollable.validateScrollPosition(u),(c.scrollLeft!==u.scrollLeft||c.scrollTop!==u.scrollTop)&&(this._options.mouseWheelSmoothScroll&&t.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(u):this._scrollable.setScrollPositionNow(u),i=!0)}let n=i;!n&&this._options.alwaysConsumeMouseWheel&&(n=!0),!n&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(n=!0),n&&(e.preventDefault(),e.stopPropagation())}_onDidScroll(e){this._shouldRender=this._horizontalScrollbar.onDidScroll(e)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(e)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){const e=this._scrollable.getCurrentScrollPosition(),t=e.scrollTop>0,i=e.scrollLeft>0,n=i?" left":"",s=t?" top":"",r=i||t?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${n}`),this._topShadowDomNode.setClassName(`shadow${s}`),this._topLeftShadowDomNode.setClassName(`shadow${r}${s}${n}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseLeave(e){this._mouseIsOver=!1,this._hide()}_onMouseOver(e){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(()=>this._hide(),MMe)}}class Ude extends CK{constructor(e,t){t=t||{},t.mouseWheelSmoothScroll=!1;const i=new ZS({forceIntegerValues:!0,smoothScrollDuration:0,scheduleAtNextAnimationFrame:n=>al(at(e),n)});super(e,t,i),this._register(i)}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}}class b4 extends CK{constructor(e,t,i){super(e,t,i)}setScrollPosition(e){e.reuseAnimation?this._scrollable.setScrollPositionSmooth(e,e.reuseAnimation):this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}}class nI extends CK{constructor(e,t){t=t||{},t.mouseWheelSmoothScroll=!1;const i=new ZS({forceIntegerValues:!1,smoothScrollDuration:0,scheduleAtNextAnimationFrame:n=>al(at(e),n)});super(e,t,i),this._register(i),this._element=e,this._register(this.onScroll(n=>{n.scrollTopChanged&&(this._element.scrollTop=n.scrollTop),n.scrollLeftChanged&&(this._element.scrollLeft=n.scrollLeft)})),this.scanDomNode()}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}scanDomNode(){this.setScrollDimensions({width:this._element.clientWidth,scrollWidth:this._element.scrollWidth,height:this._element.clientHeight,scrollHeight:this._element.scrollHeight}),this.setScrollPosition({scrollLeft:this._element.scrollLeft,scrollTop:this._element.scrollTop})}}function PMe(o){const e={lazyRender:typeof o.lazyRender<"u"?o.lazyRender:!1,className:typeof o.className<"u"?o.className:"",useShadows:typeof o.useShadows<"u"?o.useShadows:!0,handleMouseWheel:typeof o.handleMouseWheel<"u"?o.handleMouseWheel:!0,flipAxes:typeof o.flipAxes<"u"?o.flipAxes:!1,consumeMouseWheelIfScrollbarIsNeeded:typeof o.consumeMouseWheelIfScrollbarIsNeeded<"u"?o.consumeMouseWheelIfScrollbarIsNeeded:!1,alwaysConsumeMouseWheel:typeof o.alwaysConsumeMouseWheel<"u"?o.alwaysConsumeMouseWheel:!1,scrollYToX:typeof o.scrollYToX<"u"?o.scrollYToX:!1,mouseWheelScrollSensitivity:typeof o.mouseWheelScrollSensitivity<"u"?o.mouseWheelScrollSensitivity:1,fastScrollSensitivity:typeof o.fastScrollSensitivity<"u"?o.fastScrollSensitivity:5,scrollPredominantAxis:typeof o.scrollPredominantAxis<"u"?o.scrollPredominantAxis:!0,mouseWheelSmoothScroll:typeof o.mouseWheelSmoothScroll<"u"?o.mouseWheelSmoothScroll:!0,arrowSize:typeof o.arrowSize<"u"?o.arrowSize:11,listenOnDomNode:typeof o.listenOnDomNode<"u"?o.listenOnDomNode:null,horizontal:typeof o.horizontal<"u"?o.horizontal:1,horizontalScrollbarSize:typeof o.horizontalScrollbarSize<"u"?o.horizontalScrollbarSize:10,horizontalSliderSize:typeof o.horizontalSliderSize<"u"?o.horizontalSliderSize:0,horizontalHasArrows:typeof o.horizontalHasArrows<"u"?o.horizontalHasArrows:!1,vertical:typeof o.vertical<"u"?o.vertical:1,verticalScrollbarSize:typeof o.verticalScrollbarSize<"u"?o.verticalScrollbarSize:10,verticalHasArrows:typeof o.verticalHasArrows<"u"?o.verticalHasArrows:!1,verticalSliderSize:typeof o.verticalSliderSize<"u"?o.verticalSliderSize:0,scrollByPage:typeof o.scrollByPage<"u"?o.scrollByPage:!1};return e.horizontalSliderSize=typeof o.horizontalSliderSize<"u"?o.horizontalSliderSize:e.horizontalScrollbarSize,e.verticalSliderSize=typeof o.verticalSliderSize<"u"?o.verticalSliderSize:e.verticalScrollbarSize,Kt&&(e.className+=" mac"),e}const cR=xe;let yK=class extends X{constructor(){super(),this.containerDomNode=document.createElement("div"),this.containerDomNode.className="monaco-hover",this.containerDomNode.tabIndex=0,this.containerDomNode.setAttribute("role","tooltip"),this.contentsDomNode=document.createElement("div"),this.contentsDomNode.className="monaco-hover-content",this.scrollbar=this._register(new nI(this.contentsDomNode,{consumeMouseWheelIfScrollbarIsNeeded:!0})),this.containerDomNode.appendChild(this.scrollbar.getDomNode())}onContentsChanged(){this.scrollbar.scanDomNode()}};class C4 extends X{static render(e,t,i){return new C4(e,t,i)}constructor(e,t,i){super(),this.actionLabel=t.label,this.actionKeybindingLabel=i,this.actionContainer=ge(e,cR("div.action-container")),this.actionContainer.setAttribute("tabindex","0"),this.action=ge(this.actionContainer,cR("a.action")),this.action.setAttribute("role","button"),t.iconClass&&ge(this.action,cR(`span.icon.${t.iconClass}`));const n=ge(this.action,cR("span"));n.textContent=i?`${t.label} (${i})`:t.label,this._store.add(new jde(this.actionContainer,t.run)),this._store.add(new qde(this.actionContainer,t.run,[3,10])),this.setEnabled(!0)}setEnabled(e){e?(this.actionContainer.classList.remove("disabled"),this.actionContainer.removeAttribute("aria-disabled")):(this.actionContainer.classList.add("disabled"),this.actionContainer.setAttribute("aria-disabled","true"))}}function $de(o,e){return o&&e?v("acessibleViewHint","Inspect this in the accessible view with {0}.",e):o?v("acessibleViewHintNoKbOpen","Inspect this in the accessible view via the command Open Accessible View which is currently not triggerable via keybinding."):""}class jde extends X{constructor(e,t){super(),this._register(se(e,Le.CLICK,i=>{i.stopPropagation(),i.preventDefault(),t(e)}))}}class qde extends X{constructor(e,t,i){super(),this._register(se(e,Le.KEY_DOWN,n=>{const s=new Zi(n);i.some(r=>s.equals(r))&&(n.stopPropagation(),n.preventDefault(),t(e))}))}}const Ma=Gt("openerService");function OMe(o){let e;const t=/^L?(\d+)(?:,(\d+))?(-L?(\d+)(?:,(\d+))?)?/.exec(o.fragment);return t&&(e={startLineNumber:parseInt(t[1]),startColumn:t[2]?parseInt(t[2]):1,endLineNumber:t[4]?parseInt(t[4]):void 0,endColumn:t[4]?t[5]?parseInt(t[5]):1:void 0},o=o.with({fragment:""})),{selection:e,uri:o}}class Zt{get event(){return this.emitter.event}constructor(e,t,i){const n=s=>this.emitter.fire(s);this.emitter=new Y({onWillAddFirstListener:()=>e.addEventListener(t,n,i),onDidRemoveLastListener:()=>e.removeEventListener(t,n,i)})}dispose(){this.emitter.dispose()}}function FMe(o,e={}){const t=wK(e);return t.textContent=o,t}function BMe(o,e={}){const t=wK(e);return Kde(t,HMe(o,!!e.renderCodeSegments),e.actionHandler,e.renderCodeSegments),t}function wK(o){const e=o.inline?"span":"div",t=document.createElement(e);return o.className&&(t.className=o.className),t}class WMe{constructor(e){this.source=e,this.index=0}eos(){return this.index>=this.source.length}next(){const e=this.peek();return this.advance(),e}peek(){return this.source[this.index]}advance(){this.index++}}function Kde(o,e,t,i){let n;if(e.type===2)n=document.createTextNode(e.content||"");else if(e.type===3)n=document.createElement("b");else if(e.type===4)n=document.createElement("i");else if(e.type===7&&i)n=document.createElement("code");else if(e.type===5&&t){const s=document.createElement("a");t.disposables.add(Bn(s,"click",r=>{t.callback(String(e.index),r)})),n=s}else e.type===8?n=document.createElement("br"):e.type===1&&(n=o);n&&o!==n&&o.appendChild(n),n&&Array.isArray(e.children)&&e.children.forEach(s=>{Kde(n,s,t,i)})}function HMe(o,e){const t={type:1,children:[]};let i=0,n=t;const s=[],r=new WMe(o);for(;!r.eos();){let a=r.next();const l=a==="\\"&&YV(r.peek(),e)!==0;if(l&&(a=r.next()),!l&&VMe(a,e)&&a===r.peek()){r.advance(),n.type===2&&(n=s.pop());const c=YV(a,e);if(n.type===c||n.type===5&&c===6)n=s.pop();else{const u={type:c,children:[]};c===5&&(u.index=i,i++),n.children.push(u),s.push(n),n=u}}else if(a===`
`)n.type===2&&(n=s.pop()),n.children.push({type:8});else if(n.type!==2){const c={type:2,content:a};n.children.push(c),s.push(n),n=c}else n.content+=a}return n.type===2&&(n=s.pop()),t}function VMe(o,e){return YV(o,e)!==0}function YV(o,e){switch(o){case"*":return 3;case"_":return 4;case"[":return 5;case"]":return 6;case"`":return e?7:0;default:return 0}}const zMe=new RegExp(`(\\\\)?\\$\\((${ut.iconNameExpression}(?:${ut.iconModifierExpression})?)\\)`,"g");function dm(o){const e=new Array;let t,i=0,n=0;for(;(t=zMe.exec(o))!==null;){n=t.index||0,i<n&&e.push(o.substring(i,n)),i=(t.index||0)+t[0].length;const[,s,r]=t;e.push(s?`$(${r})`:uC({id:r}))}return i<o.length&&e.push(o.substring(i)),e}function uC(o){const e=xe("span");return e.classList.add(...ut.asClassNameArray(o)),e}function UMe(o){const e=$Me(o);if(e&&e.length>0)return new Uint32Array(e)}let kl=0;const Fp=new Uint32Array(10);function $Me(o){if(kl=0,Uu(o,g7,4352),kl>0||(Uu(o,p7,4449),kl>0)||(Uu(o,m7,4520),kl>0)||(Uu(o,$_,12593),kl))return Fp.subarray(0,kl);if(o>=44032&&o<=55203){const e=o-44032,t=e%588,i=Math.floor(e/588),n=Math.floor(t/28),s=t%28-1;if(i<g7.length?Uu(i,g7,0):4352+i-12593<$_.length&&Uu(4352+i,$_,12593),n<p7.length?Uu(n,p7,0):4449+n-12593<$_.length&&Uu(4449+n-12593,$_,12593),s>=0&&(s<m7.length?Uu(s,m7,0):4520+s-12593<$_.length&&Uu(4520+s-12593,$_,12593)),kl>0)return Fp.subarray(0,kl)}}function Uu(o,e,t){o>=t&&o<t+e.length&&jMe(e[o-t])}function jMe(o){o!==0&&(Fp[kl++]=o&255,o>>8&&(Fp[kl++]=o>>8&255),o>>16&&(Fp[kl++]=o>>16&255))}const g7=new Uint8Array([114,82,115,101,69,102,97,113,81,116,84,100,119,87,99,122,120,118,103]),p7=new Uint16Array([107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]),m7=new Uint16Array([114,82,29810,115,30579,26483,101,102,29286,24934,29030,29798,30822,30310,26470,97,113,29809,116,84,100,119,99,122,120,118,103]),$_=new Uint16Array([114,82,29810,115,30579,26483,101,69,102,29286,24934,29030,29798,30822,30310,26470,97,113,81,29809,116,84,100,119,87,99,122,120,118,103,107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]);function SK(...o){return function(e,t){for(let i=0,n=o.length;i<n;i++){const s=o[i](e,t);if(s)return s}return null}}Gde.bind(void 0,!1);const RD=Gde.bind(void 0,!0);function Gde(o,e,t){if(!t||t.length<e.length)return null;let i;return o?i=Mq(t,e):i=t.indexOf(e)===0,i?e.length>0?[{start:0,end:e.length}]:[]:null}function Yde(o,e){const t=e.toLowerCase().indexOf(o.toLowerCase());return t===-1?null:[{start:t,end:t+o.length}]}function Zde(o,e){return ZV(o.toLowerCase(),e.toLowerCase(),0,0)}function ZV(o,e,t,i){if(t===o.length)return[];if(i===e.length)return null;if(o[t]===e[i]){let n=null;return(n=ZV(o,e,t+1,i+1))?kK({start:i,end:i+1},n):null}return ZV(o,e,t,i+1)}function LK(o){return 97<=o&&o<=122}function y4(o){return 65<=o&&o<=90}function xK(o){return 48<=o&&o<=57}function Xde(o){return o===32||o===9||o===10||o===13}const Qde=new Set;"()[]{}<>`'\"-/;:,.?!".split("").forEach(o=>Qde.add(o.charCodeAt(0)));function VA(o){return Xde(o)||Qde.has(o)}function yne(o,e){return o===e||VA(o)&&VA(e)}const _7=new Map;function wne(o){if(_7.has(o))return _7.get(o);let e;const t=UMe(o);return t&&(e=t),_7.set(o,e),e}function Jde(o){return LK(o)||y4(o)||xK(o)}function kK(o,e){return e.length===0?e=[o]:o.end===e[0].start?e[0].start=o.start:e.unshift(o),e}function eue(o,e){for(let t=e;t<o.length;t++){const i=o.charCodeAt(t);if(y4(i)||xK(i)||t>0&&!Jde(o.charCodeAt(t-1)))return t}return o.length}function XV(o,e,t,i){if(t===o.length)return[];if(i===e.length)return null;if(o[t]!==e[i].toLowerCase())return null;{let n=null,s=i+1;for(n=XV(o,e,t+1,i+1);!n&&(s=eue(e,s))<e.length;)n=XV(o,e,t+1,s),s++;return n===null?null:kK({start:i,end:i+1},n)}}function qMe(o){let e=0,t=0,i=0,n=0,s=0;for(let u=0;u<o.length;u++)s=o.charCodeAt(u),y4(s)&&e++,LK(s)&&t++,Jde(s)&&i++,xK(s)&&n++;const r=e/o.length,a=t/o.length,l=i/o.length,c=n/o.length;return{upperPercent:r,lowerPercent:a,alphaPercent:l,numericPercent:c}}function KMe(o){const{upperPercent:e,lowerPercent:t}=o;return t===0&&e>.6}function GMe(o){const{upperPercent:e,lowerPercent:t,alphaPercent:i,numericPercent:n}=o;return t>.2&&e<.8&&i>.6&&n<.2}function YMe(o){let e=0,t=0,i=0,n=0;for(let s=0;s<o.length;s++)i=o.charCodeAt(s),y4(i)&&e++,LK(i)&&t++,Xde(i)&&n++;return(e===0||t===0)&&n===0?o.length<=30:e<=5}function tue(o,e){if(!e||(e=e.trim(),e.length===0)||!YMe(o))return null;e.length>60&&(e=e.substring(0,60));const t=qMe(e);if(!GMe(t)){if(!KMe(t))return null;e=e.toLowerCase()}let i=null,n=0;for(o=o.toLowerCase();n<e.length&&(i=XV(o,e,0,n))===null;)n=eue(e,n+1);return i}function ZMe(o,e,t=!1){if(!e||e.length===0)return null;let i=null,n=0;for(o=o.toLowerCase(),e=e.toLowerCase();n<e.length&&(i=QV(o,e,0,n,t),i===null);)n=iue(e,n+1);return i}function QV(o,e,t,i,n){let s=0;if(t===o.length)return[];if(i===e.length)return null;if(!yne(o.charCodeAt(t),e.charCodeAt(i))){const l=wne(o.charCodeAt(t));if(!l)return null;for(let c=0;c<l.length;c++)if(!yne(l[c],e.charCodeAt(i+c)))return null;s+=l.length-1}let r=null,a=i+s+1;if(r=QV(o,e,t+1,a,n),!n)for(;!r&&(a=iue(e,a))<e.length;)r=QV(o,e,t+1,a,n),a++;if(!r)return null;if(o.charCodeAt(t)!==e.charCodeAt(i)){const l=wne(o.charCodeAt(t));if(!l)return r;for(let c=0;c<l.length;c++)if(l[c]!==e.charCodeAt(i+c))return r}return kK({start:i,end:i+s+1},r)}function iue(o,e){for(let t=e;t<o.length;t++)if(VA(o.charCodeAt(t))||t>0&&VA(o.charCodeAt(t-1)))return t;return o.length}const XMe=SK(RD,tue,Yde),QMe=SK(RD,tue,Zde),Sne=new $h(1e4);function Lne(o,e,t=!1){if(typeof o!="string"||typeof e!="string")return null;let i=Sne.get(o);i||(i=new RegExp(Pke(o),"i"),Sne.set(o,i));const n=i.exec(e);return n?[{start:n.index,end:n.index+n[0].length}]:t?QMe(o,e):XMe(o,e)}function JMe(o,e){const t=hC(o,o.toLowerCase(),0,e,e.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});return t?sI(t):null}function eAe(o,e,t,i,n,s){const r=Math.min(13,o.length);for(;t<r;t++){const a=hC(o,e,t,i,n,s,{firstMatchCanBeWeak:!0,boostFullMatch:!0});if(a)return a}return[0,s]}function sI(o){if(typeof o>"u")return[];const e=[],t=o[1];for(let i=o.length-1;i>1;i--){const n=o[i]+t,s=e[e.length-1];s&&s.end===n?s.end=n+1:e.push({start:n,end:n+1})}return e}const Xp=128;function DK(){const o=[],e=[];for(let t=0;t<=Xp;t++)e[t]=0;for(let t=0;t<=Xp;t++)o.push(e.slice(0));return o}function nue(o){const e=[];for(let t=0;t<=o;t++)e[t]=0;return e}const sue=nue(2*Xp),JV=nue(2*Xp),yf=DK(),j_=DK(),dR=DK();function uR(o,e){if(e<0||e>=o.length)return!1;const t=o.codePointAt(e);switch(t){case 95:case 45:case 46:case 32:case 47:case 92:case 39:case 34:case 58:case 36:case 60:case 62:case 40:case 41:case 91:case 93:case 123:case 125:return!0;case void 0:return!1;default:return!!Fq(t)}}function xne(o,e){if(e<0||e>=o.length)return!1;switch(o.charCodeAt(e)){case 32:case 9:return!0;default:return!1}}function wM(o,e,t){return e[o]!==t[o]}function tAe(o,e,t,i,n,s,r=!1){for(;e<t&&n<s;)o[e]===i[n]&&(r&&(sue[e]=n),e+=1),n+=1;return e===t}var du;(function(o){o.Default=[-100,0];function e(t){return!t||t.length===2&&t[0]===-100&&t[1]===0}o.isDefault=e})(du||(du={}));const dZ=class dZ{constructor(e,t){this.firstMatchCanBeWeak=e,this.boostFullMatch=t}};dZ.default={boostFullMatch:!0,firstMatchCanBeWeak:!1};let MD=dZ;function hC(o,e,t,i,n,s,r=MD.default){const a=o.length>Xp?Xp:o.length,l=i.length>Xp?Xp:i.length;if(t>=a||s>=l||a-t>l-s||!tAe(e,t,a,n,s,l,!0))return;iAe(a,l,t,s,e,n);let c=1,u=1,f=t,g=s;const p=[!1];for(c=1,f=t;f<a;c++,f++){const L=sue[f],x=JV[f],k=f+1<a?JV[f+1]:l;for(u=L-s+1,g=L;g<k;u++,g++){let E=Number.MIN_SAFE_INTEGER,N=!1;g<=x&&(E=nAe(o,e,f,t,i,n,g,l,s,yf[c-1][u-1]===0,p));let A=0;E!==Number.MAX_SAFE_INTEGER&&(N=!0,A=E+j_[c-1][u-1]);const P=g>L,H=P?j_[c][u-1]+(yf[c][u-1]>0?-5:0):0,ee=g>L+1&&yf[c][u-1]>0,Q=ee?j_[c][u-2]+(yf[c][u-2]>0?-5:0):0;if(ee&&(!P||Q>=H)&&(!N||Q>=A))j_[c][u]=Q,dR[c][u]=3,yf[c][u]=0;else if(P&&(!N||H>=A))j_[c][u]=H,dR[c][u]=2,yf[c][u]=0;else if(N)j_[c][u]=A,dR[c][u]=1,yf[c][u]=yf[c-1][u-1]+1;else throw new Error("not possible")}}if(!p[0]&&!r.firstMatchCanBeWeak)return;c--,u--;const _=[j_[c][u],s];let b=0,y=0;for(;c>=1;){let L=u;do{const x=dR[c][L];if(x===3)L=L-2;else if(x===2)L=L-1;else break}while(L>=1);b>1&&e[t+c-1]===n[s+u-1]&&!wM(L+s-1,i,n)&&b+1>yf[c][L]&&(L=u),L===u?b++:b=1,y||(y=L),c--,u=L-1,_.push(u)}l-s===a&&r.boostFullMatch&&(_[0]+=2);const S=y-a;return _[0]-=S,_}function iAe(o,e,t,i,n,s){let r=o-1,a=e-1;for(;r>=t&&a>=i;)n[r]===s[a]&&(JV[r]=a,r--),a--}function nAe(o,e,t,i,n,s,r,a,l,c,u){if(e[t]!==s[r])return Number.MIN_SAFE_INTEGER;let f=1,g=!1;return r===t-i?f=o[t]===n[r]?7:5:wM(r,n,s)&&(r===0||!wM(r-1,n,s))?(f=o[t]===n[r]?7:5,g=!0):uR(s,r)&&(r===0||!uR(s,r-1))?f=5:(uR(s,r-1)||xne(s,r-1))&&(f=5,g=!0),f>1&&t===i&&(u[0]=!0),g||(g=wM(r,n,s)||uR(s,r-1)||xne(s,r-1)),t===i?r>l&&(f-=g?3:5):c?f+=g?2:0:f+=g?0:1,r+1===a&&(f-=g?3:5),f}function sAe(o,e,t,i,n,s,r){return oAe(o,e,t,i,n,s,!0,r)}function oAe(o,e,t,i,n,s,r,a){let l=hC(o,e,t,i,n,s,a);if(l&&!r)return l;if(o.length>=3){const c=Math.min(7,o.length-1);for(let u=t+1;u<c;u++){const f=rAe(o,u);if(f){const g=hC(f,f.toLowerCase(),t,i,n,s,a);g&&(g[0]-=3,(!l||g[0]>l[0])&&(l=g))}}}return l}function rAe(o,e){if(e+1>=o.length)return;const t=o[e],i=o[e+1];if(t!==i)return o.slice(0,e)+i+t+o.slice(e+2)}const aAe="$(",EK=new RegExp(`\\$\\(${ut.iconNameExpression}(?:${ut.iconModifierExpression})?\\)`,"g"),lAe=new RegExp(`(\\\\)?${EK.source}`,"g");function cAe(o){return o.replace(lAe,(e,t)=>t?e:`\\${e}`)}const dAe=new RegExp(`\\\\${EK.source}`,"g");function uAe(o){return o.replace(dAe,e=>`\\${e}`)}const hAe=new RegExp(`(\\s)?(\\\\)?${EK.source}(\\s)?`,"g");function IK(o){return o.indexOf(aAe)===-1?o:o.replace(hAe,(e,t,i,n)=>i?e:t||n||"")}function fAe(o){return o?o.replace(/\$\((.*?)\)/g,(e,t)=>` ${t} `).trim():""}const v7=new RegExp(`\\$\\(${ut.iconNameCharacter}+\\)`,"g");function Fx(o){v7.lastIndex=0;let e="";const t=[];let i=0;for(;;){const n=v7.lastIndex,s=v7.exec(o),r=o.substring(n,s==null?void 0:s.index);if(r.length>0){e+=r;for(let a=0;a<r.length;a++)t.push(i)}if(!s)break;i+=s[0].length}return{text:e,iconOffsets:t}}function b7(o,e,t=!1){const{text:i,iconOffsets:n}=e;if(!n||n.length===0)return Lne(o,i,t);const s=GE(i," "),r=i.length-s.length,a=Lne(o,s,t);if(a)for(const l of a){const c=n[l.start+r]+r;l.start+=c,l.end+=c}return a}function Qu(o){return dA(o,!0)}class gAe{constructor(e){this._ignorePathCasing=e}compare(e,t,i=!1){return e===t?0:gD(this.getComparisonKey(e,i),this.getComparisonKey(t,i))}isEqual(e,t,i=!1){return e===t?!0:!e||!t?!1:this.getComparisonKey(e,i)===this.getComparisonKey(t,i)}getComparisonKey(e,t=!1){return e.with({path:this._ignorePathCasing(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}isEqualOrParent(e,t,i=!1){if(e.scheme===t.scheme){if(e.scheme===Lt.file)return HV(Qu(e),Qu(t),this._ignorePathCasing(e))&&e.query===t.query&&(i||e.fragment===t.fragment);if(Dne(e.authority,t.authority))return HV(e.path,t.path,this._ignorePathCasing(e),"/")&&e.query===t.query&&(i||e.fragment===t.fragment)}return!1}joinPath(e,...t){return st.joinPath(e,...t)}basenameOrAuthority(e){return Dc(e)||e.authority}basename(e){return Cs.basename(e.path)}extname(e){return Cs.extname(e.path)}dirname(e){if(e.path.length===0)return e;let t;return e.scheme===Lt.file?t=st.file(Wle(Qu(e))).path:(t=Cs.dirname(e.path),e.authority&&t.length&&t.charCodeAt(0)!==47&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return e.scheme===Lt.file?t=st.file(Ble(Qu(e))).path:t=Cs.normalize(e.path),e.with({path:t})}relativePath(e,t){if(e.scheme!==t.scheme||!Dne(e.authority,t.authority))return;if(e.scheme===Lt.file){const s=hke(Qu(e),Qu(t));return Po?_de(s):s}let i=e.path||"/";const n=t.path||"/";if(this._ignorePathCasing(e)){let s=0;for(const r=Math.min(i.length,n.length);s<r&&!(i.charCodeAt(s)!==n.charCodeAt(s)&&i.charAt(s).toLowerCase()!==n.charAt(s).toLowerCase());s++);i=n.substr(0,s)+i.substr(s)}return Cs.relative(i,n)}resolvePath(e,t){if(e.scheme===Lt.file){const i=st.file(uke(Qu(e),t));return e.with({authority:i.authority,path:i.path})}return t=_Ne(t),e.with({path:Cs.resolve(e.path,t)})}isAbsolutePath(e){return!!e.path&&e.path[0]==="/"}isEqualAuthority(e,t){return e===t||e!==void 0&&t!==void 0&&Ew(e,t)}hasTrailingPathSeparator(e,t=ou){if(e.scheme===Lt.file){const i=Qu(e);return i.length>Jie(i).length&&i[i.length-1]===t}else{const i=e.path;return i.length>1&&i.charCodeAt(i.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}}removeTrailingPathSeparator(e,t=ou){return Ene(e,t)?e.with({path:e.path.substr(0,e.path.length-1)}):e}addTrailingPathSeparator(e,t=ou){let i=!1;if(e.scheme===Lt.file){const n=Qu(e);i=n!==void 0&&n.length===Jie(n).length&&n[n.length-1]===t}else{t="/";const n=e.path;i=n.length===1&&n.charCodeAt(n.length-1)===47}return!i&&!Ene(e,t)?e.with({path:e.path+"/"}):e}}const bn=new gAe(()=>!1),AD=bn.isEqual.bind(bn);bn.isEqualOrParent.bind(bn);bn.getComparisonKey.bind(bn);const pAe=bn.basenameOrAuthority.bind(bn),Dc=bn.basename.bind(bn),mAe=bn.extname.bind(bn),w4=bn.dirname.bind(bn),_Ae=bn.joinPath.bind(bn),vAe=bn.normalizePath.bind(bn),bAe=bn.relativePath.bind(bn),kne=bn.resolvePath.bind(bn);bn.isAbsolutePath.bind(bn);const Dne=bn.isEqualAuthority.bind(bn),Ene=bn.hasTrailingPathSeparator.bind(bn);bn.removeTrailingPathSeparator.bind(bn);bn.addTrailingPathSeparator.bind(bn);var zm;(function(o){o.META_DATA_LABEL="label",o.META_DATA_DESCRIPTION="description",o.META_DATA_SIZE="size",o.META_DATA_MIME="mime";function e(t){const i=new Map;t.path.substring(t.path.indexOf(";")+1,t.path.lastIndexOf(";")).split(";").forEach(r=>{const[a,l]=r.split(":");a&&l&&i.set(a,l)});const s=t.path.substring(0,t.path.indexOf(";"));return s&&i.set(o.META_DATA_MIME,s),i}o.parseMetaData=e})(zm||(zm={}));class Xo{constructor(e="",t=!1){if(this.value=e,typeof this.value!="string")throw yc("value");typeof t=="boolean"?(this.isTrusted=t,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=t.isTrusted??void 0,this.supportThemeIcons=t.supportThemeIcons??!1,this.supportHtml=t.supportHtml??!1)}appendText(e,t=0){return this.value+=yAe(this.supportThemeIcons?cAe(e):e).replace(/([ \t]+)/g,(i,n)=>"&nbsp;".repeat(n.length)).replace(/\>/gm,"\\>").replace(/\n/g,t===1?`\\
`:`

`),this}appendMarkdown(e){return this.value+=e,this}appendCodeblock(e,t){return this.value+=`
${wAe(t,e)}
`,this}appendLink(e,t,i){return this.value+="[",this.value+=this._escape(t,"]"),this.value+="](",this.value+=this._escape(String(e),")"),i&&(this.value+=` "${this._escape(this._escape(i,'"'),")")}"`),this.value+=")",this}_escape(e,t){const i=new RegExp(Ul(t),"g");return e.replace(i,(n,s)=>e.charAt(s-1)!=="\\"?`\\${n}`:n)}}function dS(o){return uu(o)?!o.value:Array.isArray(o)?o.every(dS):!0}function uu(o){return o instanceof Xo?!0:o&&typeof o=="object"?typeof o.value=="string"&&(typeof o.isTrusted=="boolean"||typeof o.isTrusted=="object"||o.isTrusted===void 0)&&(typeof o.supportThemeIcons=="boolean"||o.supportThemeIcons===void 0):!1}function CAe(o,e){return o===e?!0:!o||!e?!1:o.value===e.value&&o.isTrusted===e.isTrusted&&o.supportThemeIcons===e.supportThemeIcons&&o.supportHtml===e.supportHtml&&(o.baseUri===e.baseUri||!!o.baseUri&&!!e.baseUri&&AD(st.from(o.baseUri),st.from(e.baseUri)))}function yAe(o){return o.replace(/[\\`*_{}[\]()#+\-!~]/g,"\\$&")}function wAe(o,e){var n;const t=((n=o.match(/^`+/gm))==null?void 0:n.reduce((s,r)=>s.length>r.length?s:r).length)??0,i=t>=3?t+1:3;return[`${"`".repeat(i)}${e}`,o,`${"`".repeat(i)}`].join(`
`)}function hR(o){return o.replace(/"/g,"&quot;")}function C7(o){return o&&o.replace(/\\([\\`*_{}[\]()#+\-.!~])/g,"$1")}function SAe(o){const e=[],t=o.split("|").map(n=>n.trim());o=t[0];const i=t[1];if(i){const n=/height=(\d+)/.exec(i),s=/width=(\d+)/.exec(i),r=n?n[1]:"",a=s?s[1]:"",l=isFinite(parseInt(a)),c=isFinite(parseInt(r));l&&e.push(`width="${a}"`),c&&e.push(`height="${r}"`)}return{href:o,dimensions:e}}class TK{constructor(e){this._prefix=e,this._lastId=0}nextId(){return this._prefix+ ++this._lastId}}const e6=new TK("id#");let ir={};(function(){function o(e,t){t(ir)}o.amd=!0,function(e,t){typeof o=="function"&&o.amd?o(["exports"],t):typeof exports=="object"&&typeof module<"u"?t(exports):(e=typeof globalThis<"u"?globalThis:e||self,t(e.marked={}))}(this,function(e){function t(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}e.defaults=t();function i($t){e.defaults=$t}const n=/[&<>"']/,s=new RegExp(n.source,"g"),r=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,a=new RegExp(r.source,"g"),l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},c=$t=>l[$t];function u($t,z){if(z){if(n.test($t))return $t.replace(s,c)}else if(r.test($t))return $t.replace(a,c);return $t}const f=/(^|[^\[])\^/g;function g($t,z){let $=typeof $t=="string"?$t:$t.source;z=z||"";const K={replace:(ie,re)=>{let ye=typeof re=="string"?re:re.source;return ye=ye.replace(f,"$1"),$=$.replace(ie,ye),K},getRegex:()=>new RegExp($,z)};return K}function p($t){try{$t=encodeURI($t).replace(/%25/g,"%")}catch{return null}return $t}const _={exec:()=>null};function b($t,z){const $=$t.replace(/\|/g,(re,ye,Ne)=>{let j=!1,fe=ye;for(;--fe>=0&&Ne[fe]==="\\";)j=!j;return j?"|":" |"}),K=$.split(/ \|/);let ie=0;if(K[0].trim()||K.shift(),K.length>0&&!K[K.length-1].trim()&&K.pop(),z)if(K.length>z)K.splice(z);else for(;K.length<z;)K.push("");for(;ie<K.length;ie++)K[ie]=K[ie].trim().replace(/\\\|/g,"|");return K}function y($t,z,$){const K=$t.length;if(K===0)return"";let ie=0;for(;ie<K;){const re=$t.charAt(K-ie-1);if(re===z&&!$)ie++;else if(re!==z&&$)ie++;else break}return $t.slice(0,K-ie)}function S($t,z){if($t.indexOf(z[1])===-1)return-1;let $=0;for(let K=0;K<$t.length;K++)if($t[K]==="\\")K++;else if($t[K]===z[0])$++;else if($t[K]===z[1]&&($--,$<0))return K;return-1}function L($t,z,$,K){const ie=z.href,re=z.title?u(z.title):null,ye=$t[1].replace(/\\([\[\]])/g,"$1");if($t[0].charAt(0)!=="!"){K.state.inLink=!0;const Ne={type:"link",raw:$,href:ie,title:re,text:ye,tokens:K.inlineTokens(ye)};return K.state.inLink=!1,Ne}return{type:"image",raw:$,href:ie,title:re,text:u(ye)}}function x($t,z){const $=$t.match(/^(\s+)(?:```)/);if($===null)return z;const K=$[1];return z.split(`
`).map(ie=>{const re=ie.match(/^\s+/);if(re===null)return ie;const[ye]=re;return ye.length>=K.length?ie.slice(K.length):ie}).join(`
`)}class k{constructor(z){Qt(this,"options");Qt(this,"rules");Qt(this,"lexer");this.options=z||e.defaults}space(z){const $=this.rules.block.newline.exec(z);if($&&$[0].length>0)return{type:"space",raw:$[0]}}code(z){const $=this.rules.block.code.exec(z);if($){const K=$[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:$[0],codeBlockStyle:"indented",text:this.options.pedantic?K:y(K,`
`)}}}fences(z){const $=this.rules.block.fences.exec(z);if($){const K=$[0],ie=x(K,$[3]||"");return{type:"code",raw:K,lang:$[2]?$[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):$[2],text:ie}}}heading(z){const $=this.rules.block.heading.exec(z);if($){let K=$[2].trim();if(/#$/.test(K)){const ie=y(K,"#");(this.options.pedantic||!ie||/ $/.test(ie))&&(K=ie.trim())}return{type:"heading",raw:$[0],depth:$[1].length,text:K,tokens:this.lexer.inline(K)}}}hr(z){const $=this.rules.block.hr.exec(z);if($)return{type:"hr",raw:y($[0],`
`)}}blockquote(z){const $=this.rules.block.blockquote.exec(z);if($){let K=y($[0],`
`).split(`
`),ie="",re="";const ye=[];for(;K.length>0;){let Ne=!1;const j=[];let fe;for(fe=0;fe<K.length;fe++)if(/^ {0,3}>/.test(K[fe]))j.push(K[fe]),Ne=!0;else if(!Ne)j.push(K[fe]);else break;K=K.slice(fe);const Oe=j.join(`
`),rt=Oe.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`).replace(/^ {0,3}>[ \t]?/gm,"");ie=ie?`${ie}
${Oe}`:Oe,re=re?`${re}
${rt}`:rt;const Et=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(rt,ye,!0),this.lexer.state.top=Et,K.length===0)break;const gt=ye[ye.length-1];if((gt==null?void 0:gt.type)==="code")break;if((gt==null?void 0:gt.type)==="blockquote"){const kt=gt,je=kt.raw+`
`+K.join(`
`),oe=this.blockquote(je);ye[ye.length-1]=oe,ie=ie.substring(0,ie.length-kt.raw.length)+oe.raw,re=re.substring(0,re.length-kt.text.length)+oe.text;break}else if((gt==null?void 0:gt.type)==="list"){const kt=gt,je=kt.raw+`
`+K.join(`
`),oe=this.list(je);ye[ye.length-1]=oe,ie=ie.substring(0,ie.length-gt.raw.length)+oe.raw,re=re.substring(0,re.length-kt.raw.length)+oe.raw,K=je.substring(ye[ye.length-1].raw.length).split(`
`);continue}}return{type:"blockquote",raw:ie,tokens:ye,text:re}}}list(z){let $=this.rules.block.list.exec(z);if($){let K=$[1].trim();const ie=K.length>1,re={type:"list",raw:"",ordered:ie,start:ie?+K.slice(0,-1):"",loose:!1,items:[]};K=ie?`\\d{1,9}\\${K.slice(-1)}`:`\\${K}`,this.options.pedantic&&(K=ie?K:"[*+-]");const ye=new RegExp(`^( {0,3}${K})((?:[	 ][^\\n]*)?(?:\\n|$))`);let Ne=!1;for(;z;){let j=!1,fe="",Oe="";if(!($=ye.exec(z))||this.rules.block.hr.test(z))break;fe=$[0],z=z.substring(fe.length);let rt=$[2].split(`
`,1)[0].replace(/^\t+/,Me=>" ".repeat(3*Me.length)),Et=z.split(`
`,1)[0],gt=!rt.trim(),kt=0;if(this.options.pedantic?(kt=2,Oe=rt.trimStart()):gt?kt=$[1].length+1:(kt=$[2].search(/[^ ]/),kt=kt>4?1:kt,Oe=rt.slice(kt),kt+=$[1].length),gt&&/^ *$/.test(Et)&&(fe+=Et+`
`,z=z.substring(Et.length+1),j=!0),!j){const Me=new RegExp(`^ {0,${Math.min(3,kt-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),Xe=new RegExp(`^ {0,${Math.min(3,kt-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),mi=new RegExp(`^ {0,${Math.min(3,kt-1)}}(?:\`\`\`|~~~)`),Sn=new RegExp(`^ {0,${Math.min(3,kt-1)}}#`);for(;z;){const as=z.split(`
`,1)[0];if(Et=as,this.options.pedantic&&(Et=Et.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),mi.test(Et)||Sn.test(Et)||Me.test(Et)||Xe.test(z))break;if(Et.search(/[^ ]/)>=kt||!Et.trim())Oe+=`
`+Et.slice(kt);else{if(gt||rt.search(/[^ ]/)>=4||mi.test(rt)||Sn.test(rt)||Xe.test(rt))break;Oe+=`
`+Et}!gt&&!Et.trim()&&(gt=!0),fe+=as+`
`,z=z.substring(as.length+1),rt=Et.slice(kt)}}re.loose||(Ne?re.loose=!0:/\n *\n *$/.test(fe)&&(Ne=!0));let je=null,oe;this.options.gfm&&(je=/^\[[ xX]\] /.exec(Oe),je&&(oe=je[0]!=="[ ] ",Oe=Oe.replace(/^\[[ xX]\] +/,""))),re.items.push({type:"list_item",raw:fe,task:!!je,checked:oe,loose:!1,text:Oe,tokens:[]}),re.raw+=fe}re.items[re.items.length-1].raw=re.items[re.items.length-1].raw.trimEnd(),re.items[re.items.length-1].text=re.items[re.items.length-1].text.trimEnd(),re.raw=re.raw.trimEnd();for(let j=0;j<re.items.length;j++)if(this.lexer.state.top=!1,re.items[j].tokens=this.lexer.blockTokens(re.items[j].text,[]),!re.loose){const fe=re.items[j].tokens.filter(rt=>rt.type==="space"),Oe=fe.length>0&&fe.some(rt=>/\n.*\n/.test(rt.raw));re.loose=Oe}if(re.loose)for(let j=0;j<re.items.length;j++)re.items[j].loose=!0;return re}}html(z){const $=this.rules.block.html.exec(z);if($)return{type:"html",block:!0,raw:$[0],pre:$[1]==="pre"||$[1]==="script"||$[1]==="style",text:$[0]}}def(z){const $=this.rules.block.def.exec(z);if($){const K=$[1].toLowerCase().replace(/\s+/g," "),ie=$[2]?$[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",re=$[3]?$[3].substring(1,$[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):$[3];return{type:"def",tag:K,raw:$[0],href:ie,title:re}}}table(z){const $=this.rules.block.table.exec(z);if(!$||!/[:|]/.test($[2]))return;const K=b($[1]),ie=$[2].replace(/^\||\| *$/g,"").split("|"),re=$[3]&&$[3].trim()?$[3].replace(/\n[ \t]*$/,"").split(`
`):[],ye={type:"table",raw:$[0],header:[],align:[],rows:[]};if(K.length===ie.length){for(const Ne of ie)/^ *-+: *$/.test(Ne)?ye.align.push("right"):/^ *:-+: *$/.test(Ne)?ye.align.push("center"):/^ *:-+ *$/.test(Ne)?ye.align.push("left"):ye.align.push(null);for(let Ne=0;Ne<K.length;Ne++)ye.header.push({text:K[Ne],tokens:this.lexer.inline(K[Ne]),header:!0,align:ye.align[Ne]});for(const Ne of re)ye.rows.push(b(Ne,ye.header.length).map((j,fe)=>({text:j,tokens:this.lexer.inline(j),header:!1,align:ye.align[fe]})));return ye}}lheading(z){const $=this.rules.block.lheading.exec(z);if($)return{type:"heading",raw:$[0],depth:$[2].charAt(0)==="="?1:2,text:$[1],tokens:this.lexer.inline($[1])}}paragraph(z){const $=this.rules.block.paragraph.exec(z);if($){const K=$[1].charAt($[1].length-1)===`
`?$[1].slice(0,-1):$[1];return{type:"paragraph",raw:$[0],text:K,tokens:this.lexer.inline(K)}}}text(z){const $=this.rules.block.text.exec(z);if($)return{type:"text",raw:$[0],text:$[0],tokens:this.lexer.inline($[0])}}escape(z){const $=this.rules.inline.escape.exec(z);if($)return{type:"escape",raw:$[0],text:u($[1])}}tag(z){const $=this.rules.inline.tag.exec(z);if($)return!this.lexer.state.inLink&&/^<a /i.test($[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test($[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test($[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test($[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:$[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:$[0]}}link(z){const $=this.rules.inline.link.exec(z);if($){const K=$[2].trim();if(!this.options.pedantic&&/^</.test(K)){if(!/>$/.test(K))return;const ye=y(K.slice(0,-1),"\\");if((K.length-ye.length)%2===0)return}else{const ye=S($[2],"()");if(ye>-1){const j=($[0].indexOf("!")===0?5:4)+$[1].length+ye;$[2]=$[2].substring(0,ye),$[0]=$[0].substring(0,j).trim(),$[3]=""}}let ie=$[2],re="";if(this.options.pedantic){const ye=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(ie);ye&&(ie=ye[1],re=ye[3])}else re=$[3]?$[3].slice(1,-1):"";return ie=ie.trim(),/^</.test(ie)&&(this.options.pedantic&&!/>$/.test(K)?ie=ie.slice(1):ie=ie.slice(1,-1)),L($,{href:ie&&ie.replace(this.rules.inline.anyPunctuation,"$1"),title:re&&re.replace(this.rules.inline.anyPunctuation,"$1")},$[0],this.lexer)}}reflink(z,$){let K;if((K=this.rules.inline.reflink.exec(z))||(K=this.rules.inline.nolink.exec(z))){const ie=(K[2]||K[1]).replace(/\s+/g," "),re=$[ie.toLowerCase()];if(!re){const ye=K[0].charAt(0);return{type:"text",raw:ye,text:ye}}return L(K,re,K[0],this.lexer)}}emStrong(z,$,K=""){let ie=this.rules.inline.emStrongLDelim.exec(z);if(!ie||ie[3]&&K.match(/[\p{L}\p{N}]/u))return;if(!(ie[1]||ie[2]||"")||!K||this.rules.inline.punctuation.exec(K)){const ye=[...ie[0]].length-1;let Ne,j,fe=ye,Oe=0;const rt=ie[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(rt.lastIndex=0,$=$.slice(-1*z.length+ye);(ie=rt.exec($))!=null;){if(Ne=ie[1]||ie[2]||ie[3]||ie[4]||ie[5]||ie[6],!Ne)continue;if(j=[...Ne].length,ie[3]||ie[4]){fe+=j;continue}else if((ie[5]||ie[6])&&ye%3&&!((ye+j)%3)){Oe+=j;continue}if(fe-=j,fe>0)continue;j=Math.min(j,j+fe+Oe);const Et=[...ie[0]][0].length,gt=z.slice(0,ye+ie.index+Et+j);if(Math.min(ye,j)%2){const je=gt.slice(1,-1);return{type:"em",raw:gt,text:je,tokens:this.lexer.inlineTokens(je)}}const kt=gt.slice(2,-2);return{type:"strong",raw:gt,text:kt,tokens:this.lexer.inlineTokens(kt)}}}}codespan(z){const $=this.rules.inline.code.exec(z);if($){let K=$[2].replace(/\n/g," ");const ie=/[^ ]/.test(K),re=/^ /.test(K)&&/ $/.test(K);return ie&&re&&(K=K.substring(1,K.length-1)),K=u(K,!0),{type:"codespan",raw:$[0],text:K}}}br(z){const $=this.rules.inline.br.exec(z);if($)return{type:"br",raw:$[0]}}del(z){const $=this.rules.inline.del.exec(z);if($)return{type:"del",raw:$[0],text:$[2],tokens:this.lexer.inlineTokens($[2])}}autolink(z){const $=this.rules.inline.autolink.exec(z);if($){let K,ie;return $[2]==="@"?(K=u($[1]),ie="mailto:"+K):(K=u($[1]),ie=K),{type:"link",raw:$[0],text:K,href:ie,tokens:[{type:"text",raw:K,text:K}]}}}url(z){var K;let $;if($=this.rules.inline.url.exec(z)){let ie,re;if($[2]==="@")ie=u($[0]),re="mailto:"+ie;else{let ye;do ye=$[0],$[0]=((K=this.rules.inline._backpedal.exec($[0]))==null?void 0:K[0])??"";while(ye!==$[0]);ie=u($[0]),$[1]==="www."?re="http://"+$[0]:re=$[0]}return{type:"link",raw:$[0],text:ie,href:re,tokens:[{type:"text",raw:ie,text:ie}]}}}inlineText(z){const $=this.rules.inline.text.exec(z);if($){let K;return this.lexer.state.inRawBlock?K=$[0]:K=u($[0]),{type:"text",raw:$[0],text:K}}}}const E=/^(?: *(?:\n|$))+/,N=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,A=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,P=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,H=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,ee=/(?:[*+-]|\d{1,9}[.)])/,Q=g(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,ee).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),te=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,J=/^[^\n]+/,Z=/(?!\s*\])(?:\\.|[^\[\]\\])+/,he=g(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",Z).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Ce=g(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,ee).getRegex(),we="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",me=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,pe=g("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",me).replace("tag",we).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Fe=g(te).replace("hr",P).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",we).getRegex(),Ut={blockquote:g(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Fe).getRegex(),code:N,def:he,fences:A,heading:H,hr:P,html:pe,lheading:Q,list:Ce,newline:E,paragraph:Fe,table:_,text:J},dt=g("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",P).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",we).getRegex(),Ot={...Ut,table:dt,paragraph:g(te).replace("hr",P).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",dt).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",we).getRegex()},Bi={...Ut,html:g(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",me).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:_,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:g(te).replace("hr",P).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Q).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Qi=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Xn=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Qn=/^( {2,}|\\)\n(?!\s*$)/,Jn=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,yn="\\p{P}\\p{S}",ws=g(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,yn).getRegex(),sn=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,wn=g(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,yn).getRegex(),Ts=g("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,yn).getRegex(),Ns=g("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,yn).getRegex(),Ss=g(/\\([punct])/,"gu").replace(/punct/g,yn).getRegex(),Os=g(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),sr=g(me).replace("(?:-->|$)","-->").getRegex(),aa=g("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",sr).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Hs=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Bo=g(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",Hs).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Qs=g(/^!?\[(label)\]\[(ref)\]/).replace("label",Hs).replace("ref",Z).getRegex(),Rs=g(/^!?\[(ref)\](?:\[\])?/).replace("ref",Z).getRegex(),xr=g("reflink|nolink(?!\\()","g").replace("reflink",Qs).replace("nolink",Rs).getRegex(),Vs={_backpedal:_,anyPunctuation:Ss,autolink:Os,blockSkip:sn,br:Qn,code:Xn,del:_,emStrongLDelim:wn,emStrongRDelimAst:Ts,emStrongRDelimUnd:Ns,escape:Qi,link:Bo,nolink:Rs,punctuation:ws,reflink:Qs,reflinkSearch:xr,tag:aa,text:Jn,url:_},or={...Vs,link:g(/^!?\[(label)\]\((.*?)\)/).replace("label",Hs).getRegex(),reflink:g(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Hs).getRegex()},es={...Vs,escape:g(Qi).replace("])","~|])").getRegex(),url:g(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},kr={...es,br:g(Qn).replace("{2,}","*").getRegex(),text:g(es.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Wo={normal:Ut,gfm:Ot,pedantic:Bi},wo={normal:Vs,gfm:es,breaks:kr,pedantic:or};class Ze{constructor(z){Qt(this,"tokens");Qt(this,"options");Qt(this,"state");Qt(this,"tokenizer");Qt(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=z||e.defaults,this.options.tokenizer=this.options.tokenizer||new k,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const $={block:Wo.normal,inline:wo.normal};this.options.pedantic?($.block=Wo.pedantic,$.inline=wo.pedantic):this.options.gfm&&($.block=Wo.gfm,this.options.breaks?$.inline=wo.breaks:$.inline=wo.gfm),this.tokenizer.rules=$}static get rules(){return{block:Wo,inline:wo}}static lex(z,$){return new Ze($).lex(z)}static lexInline(z,$){return new Ze($).inlineTokens(z)}lex(z){z=z.replace(/\r\n|\r/g,`
`),this.blockTokens(z,this.tokens);for(let $=0;$<this.inlineQueue.length;$++){const K=this.inlineQueue[$];this.inlineTokens(K.src,K.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(z,$=[],K=!1){this.options.pedantic?z=z.replace(/\t/g,"    ").replace(/^ +$/gm,""):z=z.replace(/^( *)(\t+)/gm,(Ne,j,fe)=>j+"    ".repeat(fe.length));let ie,re,ye;for(;z;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(Ne=>(ie=Ne.call({lexer:this},z,$))?(z=z.substring(ie.raw.length),$.push(ie),!0):!1))){if(ie=this.tokenizer.space(z)){z=z.substring(ie.raw.length),ie.raw.length===1&&$.length>0?$[$.length-1].raw+=`
`:$.push(ie);continue}if(ie=this.tokenizer.code(z)){z=z.substring(ie.raw.length),re=$[$.length-1],re&&(re.type==="paragraph"||re.type==="text")?(re.raw+=`
`+ie.raw,re.text+=`
`+ie.text,this.inlineQueue[this.inlineQueue.length-1].src=re.text):$.push(ie);continue}if(ie=this.tokenizer.fences(z)){z=z.substring(ie.raw.length),$.push(ie);continue}if(ie=this.tokenizer.heading(z)){z=z.substring(ie.raw.length),$.push(ie);continue}if(ie=this.tokenizer.hr(z)){z=z.substring(ie.raw.length),$.push(ie);continue}if(ie=this.tokenizer.blockquote(z)){z=z.substring(ie.raw.length),$.push(ie);continue}if(ie=this.tokenizer.list(z)){z=z.substring(ie.raw.length),$.push(ie);continue}if(ie=this.tokenizer.html(z)){z=z.substring(ie.raw.length),$.push(ie);continue}if(ie=this.tokenizer.def(z)){z=z.substring(ie.raw.length),re=$[$.length-1],re&&(re.type==="paragraph"||re.type==="text")?(re.raw+=`
`+ie.raw,re.text+=`
`+ie.raw,this.inlineQueue[this.inlineQueue.length-1].src=re.text):this.tokens.links[ie.tag]||(this.tokens.links[ie.tag]={href:ie.href,title:ie.title});continue}if(ie=this.tokenizer.table(z)){z=z.substring(ie.raw.length),$.push(ie);continue}if(ie=this.tokenizer.lheading(z)){z=z.substring(ie.raw.length),$.push(ie);continue}if(ye=z,this.options.extensions&&this.options.extensions.startBlock){let Ne=1/0;const j=z.slice(1);let fe;this.options.extensions.startBlock.forEach(Oe=>{fe=Oe.call({lexer:this},j),typeof fe=="number"&&fe>=0&&(Ne=Math.min(Ne,fe))}),Ne<1/0&&Ne>=0&&(ye=z.substring(0,Ne+1))}if(this.state.top&&(ie=this.tokenizer.paragraph(ye))){re=$[$.length-1],K&&(re==null?void 0:re.type)==="paragraph"?(re.raw+=`
`+ie.raw,re.text+=`
`+ie.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=re.text):$.push(ie),K=ye.length!==z.length,z=z.substring(ie.raw.length);continue}if(ie=this.tokenizer.text(z)){z=z.substring(ie.raw.length),re=$[$.length-1],re&&re.type==="text"?(re.raw+=`
`+ie.raw,re.text+=`
`+ie.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=re.text):$.push(ie);continue}if(z){const Ne="Infinite loop on byte: "+z.charCodeAt(0);if(this.options.silent){console.error(Ne);break}else throw new Error(Ne)}}return this.state.top=!0,$}inline(z,$=[]){return this.inlineQueue.push({src:z,tokens:$}),$}inlineTokens(z,$=[]){let K,ie,re,ye=z,Ne,j,fe;if(this.tokens.links){const Oe=Object.keys(this.tokens.links);if(Oe.length>0)for(;(Ne=this.tokenizer.rules.inline.reflinkSearch.exec(ye))!=null;)Oe.includes(Ne[0].slice(Ne[0].lastIndexOf("[")+1,-1))&&(ye=ye.slice(0,Ne.index)+"["+"a".repeat(Ne[0].length-2)+"]"+ye.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(Ne=this.tokenizer.rules.inline.blockSkip.exec(ye))!=null;)ye=ye.slice(0,Ne.index)+"["+"a".repeat(Ne[0].length-2)+"]"+ye.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(Ne=this.tokenizer.rules.inline.anyPunctuation.exec(ye))!=null;)ye=ye.slice(0,Ne.index)+"++"+ye.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;z;)if(j||(fe=""),j=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(Oe=>(K=Oe.call({lexer:this},z,$))?(z=z.substring(K.raw.length),$.push(K),!0):!1))){if(K=this.tokenizer.escape(z)){z=z.substring(K.raw.length),$.push(K);continue}if(K=this.tokenizer.tag(z)){z=z.substring(K.raw.length),ie=$[$.length-1],ie&&K.type==="text"&&ie.type==="text"?(ie.raw+=K.raw,ie.text+=K.text):$.push(K);continue}if(K=this.tokenizer.link(z)){z=z.substring(K.raw.length),$.push(K);continue}if(K=this.tokenizer.reflink(z,this.tokens.links)){z=z.substring(K.raw.length),ie=$[$.length-1],ie&&K.type==="text"&&ie.type==="text"?(ie.raw+=K.raw,ie.text+=K.text):$.push(K);continue}if(K=this.tokenizer.emStrong(z,ye,fe)){z=z.substring(K.raw.length),$.push(K);continue}if(K=this.tokenizer.codespan(z)){z=z.substring(K.raw.length),$.push(K);continue}if(K=this.tokenizer.br(z)){z=z.substring(K.raw.length),$.push(K);continue}if(K=this.tokenizer.del(z)){z=z.substring(K.raw.length),$.push(K);continue}if(K=this.tokenizer.autolink(z)){z=z.substring(K.raw.length),$.push(K);continue}if(!this.state.inLink&&(K=this.tokenizer.url(z))){z=z.substring(K.raw.length),$.push(K);continue}if(re=z,this.options.extensions&&this.options.extensions.startInline){let Oe=1/0;const rt=z.slice(1);let Et;this.options.extensions.startInline.forEach(gt=>{Et=gt.call({lexer:this},rt),typeof Et=="number"&&Et>=0&&(Oe=Math.min(Oe,Et))}),Oe<1/0&&Oe>=0&&(re=z.substring(0,Oe+1))}if(K=this.tokenizer.inlineText(re)){z=z.substring(K.raw.length),K.raw.slice(-1)!=="_"&&(fe=K.raw.slice(-1)),j=!0,ie=$[$.length-1],ie&&ie.type==="text"?(ie.raw+=K.raw,ie.text+=K.text):$.push(K);continue}if(z){const Oe="Infinite loop on byte: "+z.charCodeAt(0);if(this.options.silent){console.error(Oe);break}else throw new Error(Oe)}}return $}}class xt{constructor(z){Qt(this,"options");Qt(this,"parser");this.options=z||e.defaults}space(z){return""}code({text:z,lang:$,escaped:K}){var ye;const ie=(ye=($||"").match(/^\S*/))==null?void 0:ye[0],re=z.replace(/\n$/,"")+`
`;return ie?'<pre><code class="language-'+u(ie)+'">'+(K?re:u(re,!0))+`</code></pre>
`:"<pre><code>"+(K?re:u(re,!0))+`</code></pre>
`}blockquote({tokens:z}){return`<blockquote>
${this.parser.parse(z)}</blockquote>
`}html({text:z}){return z}heading({tokens:z,depth:$}){return`<h${$}>${this.parser.parseInline(z)}</h${$}>
`}hr(z){return`<hr>
`}list(z){const $=z.ordered,K=z.start;let ie="";for(let Ne=0;Ne<z.items.length;Ne++){const j=z.items[Ne];ie+=this.listitem(j)}const re=$?"ol":"ul",ye=$&&K!==1?' start="'+K+'"':"";return"<"+re+ye+`>
`+ie+"</"+re+`>
`}listitem(z){let $="";if(z.task){const K=this.checkbox({checked:!!z.checked});z.loose?z.tokens.length>0&&z.tokens[0].type==="paragraph"?(z.tokens[0].text=K+" "+z.tokens[0].text,z.tokens[0].tokens&&z.tokens[0].tokens.length>0&&z.tokens[0].tokens[0].type==="text"&&(z.tokens[0].tokens[0].text=K+" "+z.tokens[0].tokens[0].text)):z.tokens.unshift({type:"text",raw:K+" ",text:K+" "}):$+=K+" "}return $+=this.parser.parse(z.tokens,!!z.loose),`<li>${$}</li>
`}checkbox({checked:z}){return"<input "+(z?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:z}){return`<p>${this.parser.parseInline(z)}</p>
`}table(z){let $="",K="";for(let re=0;re<z.header.length;re++)K+=this.tablecell(z.header[re]);$+=this.tablerow({text:K});let ie="";for(let re=0;re<z.rows.length;re++){const ye=z.rows[re];K="";for(let Ne=0;Ne<ye.length;Ne++)K+=this.tablecell(ye[Ne]);ie+=this.tablerow({text:K})}return ie&&(ie=`<tbody>${ie}</tbody>`),`<table>
<thead>
`+$+`</thead>
`+ie+`</table>
`}tablerow({text:z}){return`<tr>
${z}</tr>
`}tablecell(z){const $=this.parser.parseInline(z.tokens),K=z.header?"th":"td";return(z.align?`<${K} align="${z.align}">`:`<${K}>`)+$+`</${K}>
`}strong({tokens:z}){return`<strong>${this.parser.parseInline(z)}</strong>`}em({tokens:z}){return`<em>${this.parser.parseInline(z)}</em>`}codespan({text:z}){return`<code>${z}</code>`}br(z){return"<br>"}del({tokens:z}){return`<del>${this.parser.parseInline(z)}</del>`}link({href:z,title:$,tokens:K}){const ie=this.parser.parseInline(K),re=p(z);if(re===null)return ie;z=re;let ye='<a href="'+z+'"';return $&&(ye+=' title="'+$+'"'),ye+=">"+ie+"</a>",ye}image({href:z,title:$,text:K}){const ie=p(z);if(ie===null)return K;z=ie;let re=`<img src="${z}" alt="${K}"`;return $&&(re+=` title="${$}"`),re+=">",re}text(z){return"tokens"in z&&z.tokens?this.parser.parseInline(z.tokens):z.text}}class fi{strong({text:z}){return z}em({text:z}){return z}codespan({text:z}){return z}del({text:z}){return z}html({text:z}){return z}text({text:z}){return z}link({text:z}){return""+z}image({text:z}){return""+z}br(){return""}}class Si{constructor(z){Qt(this,"options");Qt(this,"renderer");Qt(this,"textRenderer");this.options=z||e.defaults,this.options.renderer=this.options.renderer||new xt,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new fi}static parse(z,$){return new Si($).parse(z)}static parseInline(z,$){return new Si($).parseInline(z)}parse(z,$=!0){let K="";for(let ie=0;ie<z.length;ie++){const re=z[ie];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[re.type]){const Ne=re,j=this.options.extensions.renderers[Ne.type].call({parser:this},Ne);if(j!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(Ne.type)){K+=j||"";continue}}const ye=re;switch(ye.type){case"space":{K+=this.renderer.space(ye);continue}case"hr":{K+=this.renderer.hr(ye);continue}case"heading":{K+=this.renderer.heading(ye);continue}case"code":{K+=this.renderer.code(ye);continue}case"table":{K+=this.renderer.table(ye);continue}case"blockquote":{K+=this.renderer.blockquote(ye);continue}case"list":{K+=this.renderer.list(ye);continue}case"html":{K+=this.renderer.html(ye);continue}case"paragraph":{K+=this.renderer.paragraph(ye);continue}case"text":{let Ne=ye,j=this.renderer.text(Ne);for(;ie+1<z.length&&z[ie+1].type==="text";)Ne=z[++ie],j+=`
`+this.renderer.text(Ne);$?K+=this.renderer.paragraph({type:"paragraph",raw:j,text:j,tokens:[{type:"text",raw:j,text:j}]}):K+=j;continue}default:{const Ne='Token with "'+ye.type+'" type was not found.';if(this.options.silent)return console.error(Ne),"";throw new Error(Ne)}}}return K}parseInline(z,$){$=$||this.renderer;let K="";for(let ie=0;ie<z.length;ie++){const re=z[ie];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[re.type]){const Ne=this.options.extensions.renderers[re.type].call({parser:this},re);if(Ne!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(re.type)){K+=Ne||"";continue}}const ye=re;switch(ye.type){case"escape":{K+=$.text(ye);break}case"html":{K+=$.html(ye);break}case"link":{K+=$.link(ye);break}case"image":{K+=$.image(ye);break}case"strong":{K+=$.strong(ye);break}case"em":{K+=$.em(ye);break}case"codespan":{K+=$.codespan(ye);break}case"br":{K+=$.br(ye);break}case"del":{K+=$.del(ye);break}case"text":{K+=$.text(ye);break}default:{const Ne='Token with "'+ye.type+'" type was not found.';if(this.options.silent)return console.error(Ne),"";throw new Error(Ne)}}}return K}}class Wi{constructor(z){Qt(this,"options");this.options=z||e.defaults}preprocess(z){return z}postprocess(z){return z}processAllTokens(z){return z}}Qt(Wi,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));class Wn{constructor(...z){Qt(this,"defaults",t());Qt(this,"options",this.setOptions);Qt(this,"parse",this.parseMarkdown(Ze.lex,Si.parse));Qt(this,"parseInline",this.parseMarkdown(Ze.lexInline,Si.parseInline));Qt(this,"Parser",Si);Qt(this,"Renderer",xt);Qt(this,"TextRenderer",fi);Qt(this,"Lexer",Ze);Qt(this,"Tokenizer",k);Qt(this,"Hooks",Wi);this.use(...z)}walkTokens(z,$){var ie,re;let K=[];for(const ye of z)switch(K=K.concat($.call(this,ye)),ye.type){case"table":{const Ne=ye;for(const j of Ne.header)K=K.concat(this.walkTokens(j.tokens,$));for(const j of Ne.rows)for(const fe of j)K=K.concat(this.walkTokens(fe.tokens,$));break}case"list":{const Ne=ye;K=K.concat(this.walkTokens(Ne.items,$));break}default:{const Ne=ye;(re=(ie=this.defaults.extensions)==null?void 0:ie.childTokens)!=null&&re[Ne.type]?this.defaults.extensions.childTokens[Ne.type].forEach(j=>{const fe=Ne[j].flat(1/0);K=K.concat(this.walkTokens(fe,$))}):Ne.tokens&&(K=K.concat(this.walkTokens(Ne.tokens,$)))}}return K}use(...z){const $=this.defaults.extensions||{renderers:{},childTokens:{}};return z.forEach(K=>{const ie={...K};if(ie.async=this.defaults.async||ie.async||!1,K.extensions&&(K.extensions.forEach(re=>{if(!re.name)throw new Error("extension name required");if("renderer"in re){const ye=$.renderers[re.name];ye?$.renderers[re.name]=function(...Ne){let j=re.renderer.apply(this,Ne);return j===!1&&(j=ye.apply(this,Ne)),j}:$.renderers[re.name]=re.renderer}if("tokenizer"in re){if(!re.level||re.level!=="block"&&re.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const ye=$[re.level];ye?ye.unshift(re.tokenizer):$[re.level]=[re.tokenizer],re.start&&(re.level==="block"?$.startBlock?$.startBlock.push(re.start):$.startBlock=[re.start]:re.level==="inline"&&($.startInline?$.startInline.push(re.start):$.startInline=[re.start]))}"childTokens"in re&&re.childTokens&&($.childTokens[re.name]=re.childTokens)}),ie.extensions=$),K.renderer){const re=this.defaults.renderer||new xt(this.defaults);for(const ye in K.renderer){if(!(ye in re))throw new Error(`renderer '${ye}' does not exist`);if(["options","parser"].includes(ye))continue;const Ne=ye,j=K.renderer[Ne],fe=re[Ne];re[Ne]=(...Oe)=>{let rt=j.apply(re,Oe);return rt===!1&&(rt=fe.apply(re,Oe)),rt||""}}ie.renderer=re}if(K.tokenizer){const re=this.defaults.tokenizer||new k(this.defaults);for(const ye in K.tokenizer){if(!(ye in re))throw new Error(`tokenizer '${ye}' does not exist`);if(["options","rules","lexer"].includes(ye))continue;const Ne=ye,j=K.tokenizer[Ne],fe=re[Ne];re[Ne]=(...Oe)=>{let rt=j.apply(re,Oe);return rt===!1&&(rt=fe.apply(re,Oe)),rt}}ie.tokenizer=re}if(K.hooks){const re=this.defaults.hooks||new Wi;for(const ye in K.hooks){if(!(ye in re))throw new Error(`hook '${ye}' does not exist`);if(ye==="options")continue;const Ne=ye,j=K.hooks[Ne],fe=re[Ne];Wi.passThroughHooks.has(ye)?re[Ne]=Oe=>{if(this.defaults.async)return Promise.resolve(j.call(re,Oe)).then(Et=>fe.call(re,Et));const rt=j.call(re,Oe);return fe.call(re,rt)}:re[Ne]=(...Oe)=>{let rt=j.apply(re,Oe);return rt===!1&&(rt=fe.apply(re,Oe)),rt}}ie.hooks=re}if(K.walkTokens){const re=this.defaults.walkTokens,ye=K.walkTokens;ie.walkTokens=function(Ne){let j=[];return j.push(ye.call(this,Ne)),re&&(j=j.concat(re.call(this,Ne))),j}}this.defaults={...this.defaults,...ie}}),this}setOptions(z){return this.defaults={...this.defaults,...z},this}lexer(z,$){return Ze.lex(z,$??this.defaults)}parser(z,$){return Si.parse(z,$??this.defaults)}parseMarkdown(z,$){return(ie,re)=>{const ye={...re},Ne={...this.defaults,...ye},j=this.onError(!!Ne.silent,!!Ne.async);if(this.defaults.async===!0&&ye.async===!1)return j(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof ie>"u"||ie===null)return j(new Error("marked(): input parameter is undefined or null"));if(typeof ie!="string")return j(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(ie)+", string expected"));if(Ne.hooks&&(Ne.hooks.options=Ne),Ne.async)return Promise.resolve(Ne.hooks?Ne.hooks.preprocess(ie):ie).then(fe=>z(fe,Ne)).then(fe=>Ne.hooks?Ne.hooks.processAllTokens(fe):fe).then(fe=>Ne.walkTokens?Promise.all(this.walkTokens(fe,Ne.walkTokens)).then(()=>fe):fe).then(fe=>$(fe,Ne)).then(fe=>Ne.hooks?Ne.hooks.postprocess(fe):fe).catch(j);try{Ne.hooks&&(ie=Ne.hooks.preprocess(ie));let fe=z(ie,Ne);Ne.hooks&&(fe=Ne.hooks.processAllTokens(fe)),Ne.walkTokens&&this.walkTokens(fe,Ne.walkTokens);let Oe=$(fe,Ne);return Ne.hooks&&(Oe=Ne.hooks.postprocess(Oe)),Oe}catch(fe){return j(fe)}}}onError(z,$){return K=>{if(K.message+=`
Please report this to https://github.com/markedjs/marked.`,z){const ie="<p>An error occurred:</p><pre>"+u(K.message+"",!0)+"</pre>";return $?Promise.resolve(ie):ie}if($)return Promise.reject(K);throw K}}}const Fn=new Wn;function Ci($t,z){return Fn.parse($t,z)}Ci.options=Ci.setOptions=function($t){return Fn.setOptions($t),Ci.defaults=Fn.defaults,i(Ci.defaults),Ci},Ci.getDefaults=t,Ci.defaults=e.defaults,Ci.use=function(...$t){return Fn.use(...$t),Ci.defaults=Fn.defaults,i(Ci.defaults),Ci},Ci.walkTokens=function($t,z){return Fn.walkTokens($t,z)},Ci.parseInline=Fn.parseInline,Ci.Parser=Si,Ci.parser=Si.parse,Ci.Renderer=xt,Ci.TextRenderer=fi,Ci.Lexer=Ze,Ci.lexer=Ze.lex,Ci.Tokenizer=k,Ci.Hooks=Wi,Ci.parse=Ci;const pi=Ci.options,Js=Ci.setOptions,ts=Ci.use,Hn=Ci.walkTokens,la=Ci.parseInline,ca=Ci,Ac=Si.parse,ku=Ze.lex;e.Hooks=Wi,e.Lexer=Ze,e.Marked=Wn,e.Parser=Si,e.Renderer=xt,e.TextRenderer=fi,e.Tokenizer=k,e.getDefaults=t,e.lexer=ku,e.marked=Ci,e.options=pi,e.parse=ca,e.parseInline=la,e.parser=Ac,e.setOptions=Js,e.use=ts,e.walkTokens=Hn})})();ir.Hooks||exports.Hooks;ir.Lexer||exports.Lexer;ir.Marked||exports.Marked;ir.Parser||exports.Parser;var oue=ir.Renderer||exports.Renderer;ir.TextRenderer||exports.TextRenderer;ir.Tokenizer||exports.Tokenizer;var LAe=ir.defaults||exports.defaults;ir.getDefaults||exports.getDefaults;var S4=ir.lexer||exports.lexer;ir.marked||exports.marked;ir.options||exports.options;var rue=ir.parse||exports.parse;ir.parseInline||exports.parseInline;var xAe=ir.parser||exports.parser;ir.setOptions||exports.setOptions;ir.use||exports.use;ir.walkTokens||exports.walkTokens;function kAe(o){return JSON.stringify(o,DAe)}function t6(o){let e=JSON.parse(o);return e=i6(e),e}function DAe(o,e){return e instanceof RegExp?{$mid:2,source:e.source,flags:e.flags}:e}function i6(o,e=0){if(!o||e>200)return o;if(typeof o=="object"){switch(o.$mid){case 1:return st.revive(o);case 2:return new RegExp(o.source,o.flags);case 17:return new Date(o.source)}if(o instanceof r4||o instanceof Uint8Array)return o;if(Array.isArray(o))for(let t=0;t<o.length;++t)o[t]=i6(o[t],e+1);else for(const t in o)Object.hasOwnProperty.call(o,t)&&(o[t]=i6(o[t],e+1))}return o}const y7=Object.freeze({image:({href:o,title:e,text:t})=>{let i=[],n=[];return o&&({href:o,dimensions:i}=SAe(o),n.push(`src="${hR(o)}"`)),t&&n.push(`alt="${hR(t)}"`),e&&n.push(`title="${hR(e)}"`),i.length&&(n=n.concat(i)),"<img "+n.join(" ")+">"},paragraph({tokens:o}){return`<p>${this.parser.parseInline(o)}</p>`},link({href:o,title:e,tokens:t}){let i=this.parser.parseInline(t);return typeof o!="string"?"":(o===i&&(i=C7(i)),e=typeof e=="string"?hR(C7(e)):"",o=C7(o),o=o.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),`<a href="${o}" title="${e||o}" draggable="false">${i}</a>`)}});function L4(o,e={},t={}){const i=new le;let n=!1;const s=wK(e),r=function(b){let y;try{y=t6(decodeURIComponent(b))}catch{}return y?(y=ble(y,S=>{if(o.uris&&o.uris[S])return st.revive(o.uris[S])}),encodeURIComponent(JSON.stringify(y))):b},a=function(b,y){const S=o.uris&&o.uris[b];let L=st.revive(S);return y?b.startsWith(Lt.data+":")?b:(L||(L=st.parse(b)),$F.uriToBrowserUri(L).toString(!0)):!L||st.parse(b).toString()===L.toString()?b:(L.query&&(L=L.with({query:r(L.query)})),L.toString())},l=new oue;l.image=y7.image,l.link=y7.link,l.paragraph=y7.paragraph;const c=[],u=[];if(e.codeBlockRendererSync?l.code=({text:b,lang:y})=>{const S=e6.nextId(),L=e.codeBlockRendererSync(Ine(y),b);return u.push([S,L]),`<div class="code" data-code="${S}">${ik(b)}</div>`}:e.codeBlockRenderer&&(l.code=({text:b,lang:y})=>{const S=e6.nextId(),L=e.codeBlockRenderer(Ine(y),b);return c.push(L.then(x=>[S,x])),`<div class="code" data-code="${S}">${ik(b)}</div>`}),e.actionHandler){const b=function(L){let x=L.target;if(!(x.tagName!=="A"&&(x=x.parentElement,!x||x.tagName!=="A")))try{let k=x.dataset.href;k&&(o.baseUri&&(k=w7(st.from(o.baseUri),k)),e.actionHandler.callback(k,L))}catch(k){wt(k)}finally{L.preventDefault()}},y=e.actionHandler.disposables.add(new Zt(s,"click")),S=e.actionHandler.disposables.add(new Zt(s,"auxclick"));e.actionHandler.disposables.add(Ee.any(y.event,S.event)(L=>{const x=new td(at(s),L);!x.leftButton&&!x.middleButton||b(x)})),e.actionHandler.disposables.add(se(s,"keydown",L=>{const x=new Zi(L);!x.equals(10)&&!x.equals(3)||b(x)}))}o.supportHtml||(l.html=({text:b})=>{var S;return(S=e.sanitizerOptions)!=null&&S.replaceWithPlaintext?ik(b):(o.isTrusted?b.match(/^(<span[^>]+>)|(<\/\s*span>)$/):void 0)?b:""}),t.renderer=l;let f=o.value??"";f.length>1e5&&(f=`${f.substr(0,1e5)}`),o.supportThemeIcons&&(f=uAe(f));let g;if(e.fillInIncompleteTokens){const b={...LAe,...t},y=S4(f,b),S=HAe(y);g=xAe(S,b)}else g=rue(f,{...t,async:!1});o.supportThemeIcons&&(g=dm(g).map(y=>typeof y=="string"?y:y.outerHTML).join(""));const _=new DOMParser().parseFromString(n6({isTrusted:o.isTrusted,...e.sanitizerOptions},g),"text/html");if(_.body.querySelectorAll("img, audio, video, source").forEach(b=>{const y=b.getAttribute("src");if(y){let S=y;try{o.baseUri&&(S=w7(st.from(o.baseUri),S))}catch{}if(b.setAttribute("src",a(S,!0)),e.remoteImageIsAllowed){const L=st.parse(S);L.scheme!==Lt.file&&L.scheme!==Lt.data&&!e.remoteImageIsAllowed(L)&&b.replaceWith(xe("",void 0,b.outerHTML))}}}),_.body.querySelectorAll("a").forEach(b=>{const y=b.getAttribute("href");if(b.setAttribute("href",""),!y||/^data:|javascript:/i.test(y)||/^command:/i.test(y)&&!o.isTrusted||/^command:(\/\/\/)?_workbench\.downloadResource/i.test(y))b.replaceWith(...b.childNodes);else{let S=a(y,!1);o.baseUri&&(S=w7(st.from(o.baseUri),y)),b.dataset.href=S}}),s.innerHTML=n6({isTrusted:o.isTrusted,...e.sanitizerOptions},_.body.innerHTML),c.length>0)Promise.all(c).then(b=>{var L;if(n)return;const y=new Map(b),S=s.querySelectorAll("div[data-code]");for(const x of S){const k=y.get(x.dataset.code??"");k&&Co(x,k)}(L=e.asyncRenderCallback)==null||L.call(e)});else if(u.length>0){const b=new Map(u),y=s.querySelectorAll("div[data-code]");for(const S of y){const L=b.get(S.dataset.code??"");L&&Co(S,L)}}if(e.asyncRenderCallback)for(const b of s.getElementsByTagName("img")){const y=i.add(se(b,"load",()=>{y.dispose(),e.asyncRenderCallback()}))}return{element:s,dispose:()=>{n=!0,i.dispose()}}}function Ine(o){if(!o)return"";const e=o.split(/[\s+|:|,|\{|\?]/,1);return e.length?e[0]:o}function w7(o,e){return/^\w[\w\d+.-]*:/.test(e)?e:o.path.endsWith("/")?kne(o,e).toString():kne(w4(o),e).toString()}const EAe=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];function n6(o,e){const{config:t,allowedSchemes:i}=TAe(o),n=new le;n.add(Tne("uponSanitizeAttribute",(s,r)=>{var a;if(r.attrName==="style"||r.attrName==="class"){if(s.tagName==="SPAN"){if(r.attrName==="style"){r.keepAttr=/^(color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z]+)+\));)?(background-color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z]+)+\));)?(border-radius:[0-9]+px;)?$/.test(r.attrValue);return}else if(r.attrName==="class"){r.keepAttr=/^codicon codicon-[a-z\-]+( codicon-modifier-[a-z\-]+)?$/.test(r.attrValue);return}}r.keepAttr=!1;return}else if(s.tagName==="INPUT"&&((a=s.attributes.getNamedItem("type"))==null?void 0:a.value)==="checkbox"){if(r.attrName==="type"&&r.attrValue==="checkbox"||r.attrName==="disabled"||r.attrName==="checked"){r.keepAttr=!0;return}r.keepAttr=!1}})),n.add(Tne("uponSanitizeElement",(s,r)=>{var a;if(r.tagName==="input"&&(((a=s.attributes.getNamedItem("type"))==null?void 0:a.value)==="checkbox"?s.setAttribute("disabled",""):o.replaceWithPlaintext||s.remove()),o.replaceWithPlaintext&&!r.allowedTags[r.tagName]&&r.tagName!=="body"&&s.parentElement){let l,c;if(r.tagName==="#comment")l=`<!--${s.textContent}-->`;else{const p=EAe.includes(r.tagName),_=s.attributes.length?" "+Array.from(s.attributes).map(b=>`${b.name}="${b.value}"`).join(" "):"";l=`<${r.tagName}${_}>`,p||(c=`</${r.tagName}>`)}const u=document.createDocumentFragment(),f=s.parentElement.ownerDocument.createTextNode(l);u.appendChild(f);const g=c?s.parentElement.ownerDocument.createTextNode(c):void 0;for(;s.firstChild;)u.appendChild(s.firstChild);g&&u.appendChild(g),s.parentElement.replaceChild(u,s)}})),n.add(aEe(i));try{return hce(e,{...t,RETURN_TRUSTED_TYPE:!0})}finally{n.dispose()}}const IAe=["align","autoplay","alt","checked","class","colspan","controls","data-code","data-href","disabled","draggable","height","href","loop","muted","playsinline","poster","rowspan","src","style","target","title","type","width","start"];function TAe(o){const e=[Lt.http,Lt.https,Lt.mailto,Lt.data,Lt.file,Lt.vscodeFileResource,Lt.vscodeRemote,Lt.vscodeRemoteResource];return o.isTrusted&&e.push(Lt.command),{config:{ALLOWED_TAGS:o.allowedTags??[...lEe],ALLOWED_ATTR:IAe,ALLOW_UNKNOWN_PROTOCOLS:!0},allowedSchemes:e}}function NAe(o){return typeof o=="string"?o:RAe(o)}function RAe(o,e){let t=o.value??"";t.length>1e5&&(t=`${t.substr(0,1e5)}`);const i=rue(t,{async:!1,renderer:PAe.value}).replace(/&(#\d+|[a-zA-Z]+);/g,n=>MAe.get(n)??n);return n6({isTrusted:!1},i).toString()}const MAe=new Map([["&quot;",'"'],["&nbsp;"," "],["&amp;","&"],["&#39;","'"],["&lt;","<"],["&gt;",">"]]);function AAe(){const o=new oue;return o.code=({text:e})=>e,o.blockquote=({text:e})=>e+`
`,o.html=e=>"",o.heading=function({tokens:e}){return this.parser.parseInline(e)+`
`},o.hr=()=>"",o.list=function({items:e}){return e.map(t=>this.listitem(t)).join(`
`)+`
`},o.listitem=({text:e})=>e+`
`,o.paragraph=function({tokens:e}){return this.parser.parseInline(e)+`
`},o.table=function({header:e,rows:t}){return e.map(i=>this.tablecell(i)).join(" ")+`
`+t.map(i=>i.map(n=>this.tablecell(n)).join(" ")).join(`
`)+`
`},o.tablerow=({text:e})=>e,o.tablecell=function({tokens:e}){return this.parser.parseInline(e)},o.strong=({text:e})=>e,o.em=({text:e})=>e,o.codespan=({text:e})=>e,o.br=e=>`
`,o.del=({text:e})=>e,o.image=e=>"",o.text=({text:e})=>e,o.link=({text:e})=>e,o}const PAe=new fu(o=>AAe());function zA(o){let e="";return o.forEach(t=>{e+=t.raw}),e}function aue(o){var e,t;if(o.tokens)for(let i=o.tokens.length-1;i>=0;i--){const n=o.tokens[i];if(n.type==="text"){const s=n.raw.split(`
`),r=s[s.length-1];if(r.includes("`"))return zAe(o);if(r.includes("**"))return GAe(o);if(r.match(/\*\w/))return UAe(o);if(r.match(/(^|\s)__\w/))return YAe(o);if(r.match(/(^|\s)_\w/))return $Ae(o);if(OAe(r)||FAe(r)&&o.tokens.slice(0,i).some(a=>a.type==="text"&&a.raw.match(/\[[^\]]*$/))){const a=o.tokens.slice(i+1);return((e=a[0])==null?void 0:e.type)==="link"&&((t=a[1])==null?void 0:t.type)==="text"&&a[1].raw.match(/^ *"[^"]*$/)||r.match(/^[^"]* +"[^"]*$/)?qAe(o):jAe(o)}else if(r.match(/(^|\s)\[\w*/))return KAe(o)}}}function OAe(o){return!!o.match(/(^|\s)\[.*\]\(\w*/)}function FAe(o){return!!o.match(/^[^\[]*\]\([^\)]*$/)}function BAe(o){var l;const e=o.items[o.items.length-1],t=e.tokens?e.tokens[e.tokens.length-1]:void 0;let i;if((t==null?void 0:t.type)==="text"&&!("inRawBlock"in e)&&(i=aue(t)),!i||i.type!=="paragraph")return;const n=zA(o.items.slice(0,-1)),s=(l=e.raw.match(/^(\s*(-|\d+\.|\*) +)/))==null?void 0:l[0];if(!s)return;const r=s+zA(e.tokens.slice(0,-1))+i.raw,a=S4(n+r)[0];if(a.type==="list")return a}const WAe=3;function HAe(o){for(let e=0;e<WAe;e++){const t=VAe(o);if(t)o=t;else break}return o}function VAe(o){let e,t;for(e=0;e<o.length;e++){const i=o[e];if(i.type==="paragraph"&&i.raw.match(/(\n|^)\|/)){t=ZAe(o.slice(e));break}if(e===o.length-1&&i.type==="list"){const n=BAe(i);if(n){t=[n];break}}if(e===o.length-1&&i.type==="paragraph"){const n=aue(i);if(n){t=[n];break}}}if(t){const i=[...o.slice(0,e),...t];return i.links=o.links,i}return null}function zAe(o){return t_(o,"`")}function UAe(o){return t_(o,"*")}function $Ae(o){return t_(o,"_")}function jAe(o){return t_(o,")")}function qAe(o){return t_(o,'")')}function KAe(o){return t_(o,"](https://microsoft.com)")}function GAe(o){return t_(o,"**")}function YAe(o){return t_(o,"__")}function t_(o,e){const t=zA(Array.isArray(o)?o:[o]);return S4(t+e)[0]}function ZAe(o){const e=zA(o),t=e.split(`
`);let i,n=!1;for(let s=0;s<t.length;s++){const r=t[s].trim();if(typeof i>"u"&&r.match(/^\s*\|/)){const a=r.match(/(\|[^\|]+)(?=\||$)/g);a&&(i=a.length)}else if(typeof i=="number")if(r.match(/^\s*\|/)){if(s!==t.length-1)return;n=!0}else return}if(typeof i=="number"&&i>0){const s=n?t.slice(0,-1).join(`
`):e,r=!!s.match(/\|\s*$/),a=s+(r?"":"|")+`
|${" --- |".repeat(i)}`;return S4(a)}}function Tne(o,e){return fce(o,e),it(()=>gce(o))}const Ff=class Ff{static createEmpty(e,t){const i=Ff.defaultTokenMetadata,n=new Uint32Array(2);return n[0]=e.length,n[1]=i,new Ff(n,e,t)}static createFromTextAndMetadata(e,t){let i=0,n="";const s=new Array;for(const{text:r,metadata:a}of e)s.push(i+r.length,a),i+=r.length,n+=r;return new Ff(new Uint32Array(s),n,t)}constructor(e,t,i){this._lineTokensBrand=void 0,this._tokens=e,this._tokensCount=this._tokens.length>>>1,this._text=t,this.languageIdCodec=i}equals(e){return e instanceof Ff?this.slicedEquals(e,0,this._tokensCount):!1}slicedEquals(e,t,i){if(this._text!==e._text||this._tokensCount!==e._tokensCount)return!1;const n=t<<1,s=n+(i<<1);for(let r=n;r<s;r++)if(this._tokens[r]!==e._tokens[r])return!1;return!0}getLineContent(){return this._text}getCount(){return this._tokensCount}getStartOffset(e){return e>0?this._tokens[e-1<<1]:0}getMetadata(e){return this._tokens[(e<<1)+1]}getLanguageId(e){const t=this._tokens[(e<<1)+1],i=wa.getLanguageId(t);return this.languageIdCodec.decodeLanguageId(i)}getStandardTokenType(e){const t=this._tokens[(e<<1)+1];return wa.getTokenType(t)}getForeground(e){const t=this._tokens[(e<<1)+1];return wa.getForeground(t)}getClassName(e){const t=this._tokens[(e<<1)+1];return wa.getClassNameFromMetadata(t)}getInlineStyle(e,t){const i=this._tokens[(e<<1)+1];return wa.getInlineStyleFromMetadata(i,t)}getPresentation(e){const t=this._tokens[(e<<1)+1];return wa.getPresentationFromMetadata(t)}getEndOffset(e){return this._tokens[e<<1]}findTokenIndexAtOffset(e){return Ff.findIndexInTokensArray(this._tokens,e)}inflate(){return this}sliceAndInflate(e,t,i){return new NK(this,e,t,i)}static convertToEndOffset(e,t){const n=(e.length>>>1)-1;for(let s=0;s<n;s++)e[s<<1]=e[s+1<<1];e[n<<1]=t}static findIndexInTokensArray(e,t){if(e.length<=2)return 0;let i=0,n=(e.length>>>1)-1;for(;i<n;){const s=i+Math.floor((n-i)/2),r=e[s<<1];if(r===t)return s+1;r<t?i=s+1:r>t&&(n=s)}return i}withInserted(e){if(e.length===0)return this;let t=0,i=0,n="";const s=new Array;let r=0;for(;;){const a=t<this._tokensCount?this._tokens[t<<1]:-1,l=i<e.length?e[i]:null;if(a!==-1&&(l===null||a<=l.offset)){n+=this._text.substring(r,a);const c=this._tokens[(t<<1)+1];s.push(n.length,c),t++,r=a}else if(l){if(l.offset>r){n+=this._text.substring(r,l.offset);const c=this._tokens[(t<<1)+1];s.push(n.length,c),r=l.offset}n+=l.text,s.push(n.length,l.tokenMetadata),i++}else break}return new Ff(new Uint32Array(s),n,this.languageIdCodec)}getTokenText(e){const t=this.getStartOffset(e),i=this.getEndOffset(e);return this._text.substring(t,i)}forEach(e){const t=this.getCount();for(let i=0;i<t;i++)e(i)}};Ff.defaultTokenMetadata=(32768|2<<24)>>>0;let ho=Ff;class NK{constructor(e,t,i,n){this._source=e,this._startOffset=t,this._endOffset=i,this._deltaOffset=n,this._firstTokenIndex=e.findTokenIndexAtOffset(t),this.languageIdCodec=e.languageIdCodec,this._tokensCount=0;for(let s=this._firstTokenIndex,r=e.getCount();s<r&&!(e.getStartOffset(s)>=i);s++)this._tokensCount++}getMetadata(e){return this._source.getMetadata(this._firstTokenIndex+e)}getLanguageId(e){return this._source.getLanguageId(this._firstTokenIndex+e)}getLineContent(){return this._source.getLineContent().substring(this._startOffset,this._endOffset)}equals(e){return e instanceof NK?this._startOffset===e._startOffset&&this._endOffset===e._endOffset&&this._deltaOffset===e._deltaOffset&&this._source.slicedEquals(e._source,this._firstTokenIndex,this._tokensCount):!1}getCount(){return this._tokensCount}getStandardTokenType(e){return this._source.getStandardTokenType(this._firstTokenIndex+e)}getForeground(e){return this._source.getForeground(this._firstTokenIndex+e)}getEndOffset(e){const t=this._source.getEndOffset(this._firstTokenIndex+e);return Math.min(this._endOffset,t)-this._startOffset+this._deltaOffset}getClassName(e){return this._source.getClassName(this._firstTokenIndex+e)}getInlineStyle(e,t){return this._source.getInlineStyle(this._firstTokenIndex+e,t)}getPresentation(e){return this._source.getPresentation(this._firstTokenIndex+e)}findTokenIndexAtOffset(e){return this._source.findTokenIndexAtOffset(e+this._startOffset-this._deltaOffset)-this._firstTokenIndex}getTokenText(e){const t=this._firstTokenIndex+e,i=this._source.getStartOffset(t),n=this._source.getEndOffset(t);let s=this._source.getTokenText(t);return i<this._startOffset&&(s=s.substring(this._startOffset-i)),n>this._endOffset&&(s=s.substring(0,s.length-(n-this._endOffset))),s}forEach(e){for(let t=0;t<this.getCount();t++)e(t)}}function XAe(o,e){const t=e.lineNumber;if(!o.tokenization.isCheapToTokenize(t))return;o.tokenization.forceTokenization(t);const i=o.tokenization.getLineTokens(t),n=i.findTokenIndexAtOffset(e.column-1);return i.getStandardTokenType(n)}const uS=new class{clone(){return this}equals(o){return this===o}};function RK(o,e){return new Nq([new dD(0,"",o)],e)}function x4(o,e){const t=new Uint32Array(2);return t[0]=0,t[1]=(o<<0|0|0|32768|2<<24)>>>0,new zF(t,e===null?uS:e)}const Nne={getInitialState:()=>uS,tokenizeEncoded:(o,e,t)=>x4(0,t)};async function QAe(o,e,t){if(!t)return Rne(e,o.languageIdCodec,Nne);const i=await Kn.getOrCreate(t);return Rne(e,o.languageIdCodec,i||Nne)}function JAe(o,e,t,i,n,s,r){let a="<div>",l=i,c=0,u=!0;for(let f=0,g=e.getCount();f<g;f++){const p=e.getEndOffset(f);if(p<=i)continue;let _="";for(;l<p&&l<n;l++){const b=o.charCodeAt(l);switch(b){case 9:{let y=s-(l+c)%s;for(c+=y-1;y>0;)r&&u?(_+="&#160;",u=!1):(_+=" ",u=!0),y--;break}case 60:_+="&lt;",u=!1;break;case 62:_+="&gt;",u=!1;break;case 38:_+="&amp;",u=!1;break;case 0:_+="&#00;",u=!1;break;case 65279:case 8232:case 8233:case 133:_+="",u=!1;break;case 13:_+="&#8203",u=!1;break;case 32:r&&u?(_+="&#160;",u=!1):(_+=" ",u=!0);break;default:_+=String.fromCharCode(b),u=!1}}if(a+=`<span style="${e.getInlineStyle(f,t)}">${_}</span>`,p>n||l>=n)break}return a+="</div>",a}function Rne(o,e,t){let i='<div class="monaco-tokenized-source">';const n=zh(o);let s=t.getInitialState();for(let r=0,a=n.length;r<a;r++){const l=n[r];r>0&&(i+="<br/>");const c=t.tokenizeEncoded(l,!0,s);ho.convertToEndOffset(c.tokens,l.length);const f=new ho(c.tokens,l,e).inflate();let g=0;for(let p=0,_=f.getCount();p<_;p++){const b=f.getClassName(p),y=f.getEndOffset(p);i+=`<span class="${b}">${ik(l.substring(g,y))}</span>`,g=y}s=c.endState}return i+="</div>",i}var ePe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Mne=function(o,e){return function(t,i){e(t,i,o)}},s6,ab;let kg=(ab=class{constructor(e,t,i){this._options=e,this._languageService=t,this._openerService=i,this._onDidRenderAsync=new Y,this.onDidRenderAsync=this._onDidRenderAsync.event}dispose(){this._onDidRenderAsync.dispose()}render(e,t,i){if(!e)return{element:document.createElement("span"),dispose:()=>{}};const n=new le,s=n.add(L4(e,{...this._getRenderOptions(e,n),...t},i));return s.element.classList.add("rendered-markdown"),{element:s.element,dispose:()=>n.dispose()}}_getRenderOptions(e,t){return{codeBlockRenderer:async(i,n)=>{var l,c;let s;i?s=this._languageService.getLanguageIdByLanguageName(i):this._options.editor&&(s=(l=this._options.editor.getModel())==null?void 0:l.getLanguageId()),s||(s=Xr);const r=await QAe(this._languageService,n,s),a=document.createElement("span");if(a.innerHTML=((c=s6._ttpTokenizer)==null?void 0:c.createHTML(r))??r,this._options.editor){const u=this._options.editor.getOption(50);yo(a,u)}else this._options.codeBlockFontFamily&&(a.style.fontFamily=this._options.codeBlockFontFamily);return this._options.codeBlockFontSize!==void 0&&(a.style.fontSize=this._options.codeBlockFontSize),a},asyncRenderCallback:()=>this._onDidRenderAsync.fire(),actionHandler:{callback:i=>MK(this._openerService,i,e.isTrusted),disposables:t}}}},s6=ab,ab._ttpTokenizer=Ag("tokenizeToString",{createHTML(e){return e}}),ab);kg=s6=ePe([Mne(1,In),Mne(2,Ma)],kg);async function MK(o,e,t){try{return await o.open(e,{fromUserGesture:!0,allowContributedOpeners:!0,allowCommands:tPe(t)})}catch(i){return wt(i),!1}}function tPe(o){return o===!0?!0:o&&Array.isArray(o.enabledCommands)?o.enabledCommands:!1}const dl=Gt("accessibilityService"),oI=new Pe("accessibilityModeEnabled",!1),Ane=2e4;let vv,SM,o6,LM,r6;function iPe(o){vv=document.createElement("div"),vv.className="monaco-aria-container";const e=()=>{const i=document.createElement("div");return i.className="monaco-alert",i.setAttribute("role","alert"),i.setAttribute("aria-atomic","true"),vv.appendChild(i),i};SM=e(),o6=e();const t=()=>{const i=document.createElement("div");return i.className="monaco-status",i.setAttribute("aria-live","polite"),i.setAttribute("aria-atomic","true"),vv.appendChild(i),i};LM=t(),r6=t(),o.appendChild(vv)}function ta(o){vv&&(SM.textContent!==o?(bo(o6),UA(SM,o)):(bo(SM),UA(o6,o)))}function Oh(o){vv&&(LM.textContent!==o?(bo(r6),UA(LM,o)):(bo(LM),UA(r6,o)))}function UA(o,e){bo(o),e.length>Ane&&(e=e.substr(0,Ane)),o.textContent=e,o.style.visibility="hidden",o.style.visibility="visible"}var nPe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},gx=function(o,e){return function(t,i){e(t,i,o)}};const $u=xe;let a6=class extends Zl{get _targetWindow(){return at(this._target.targetElements[0])}get _targetDocumentElement(){return at(this._target.targetElements[0]).document.documentElement}get isDisposed(){return this._isDisposed}get isMouseIn(){return this._lockMouseTracker.isMouseIn}get domNode(){return this._hover.containerDomNode}get onDispose(){return this._onDispose.event}get onRequestLayout(){return this._onRequestLayout.event}get anchor(){return this._hoverPosition===2?0:1}get x(){return this._x}get y(){return this._y}get isLocked(){return this._isLocked}set isLocked(e){this._isLocked!==e&&(this._isLocked=e,this._hoverContainer.classList.toggle("locked",this._isLocked))}constructor(e,t,i,n,s,r){var g,p,_,b,y,S,L;super(),this._keybindingService=t,this._configurationService=i,this._openerService=n,this._instantiationService=s,this._accessibilityService=r,this._messageListeners=new le,this._isDisposed=!1,this._forcePosition=!1,this._x=0,this._y=0,this._isLocked=!1,this._enableFocusTraps=!1,this._addedFocusTrap=!1,this._onDispose=this._register(new Y),this._onRequestLayout=this._register(new Y),this._linkHandler=e.linkHandler||(x=>MK(this._openerService,x,uu(e.content)?e.content.isTrusted:void 0)),this._target="targetElements"in e.target?e.target:new sPe(e.target),this._hoverPointer=(g=e.appearance)!=null&&g.showPointer?$u("div.workbench-hover-pointer"):void 0,this._hover=this._register(new yK),this._hover.containerDomNode.classList.add("workbench-hover","fadeIn"),(p=e.appearance)!=null&&p.compact&&this._hover.containerDomNode.classList.add("workbench-hover","compact"),(_=e.appearance)!=null&&_.skipFadeInAnimation&&this._hover.containerDomNode.classList.add("skip-fade-in"),e.additionalClasses&&this._hover.containerDomNode.classList.add(...e.additionalClasses),(b=e.position)!=null&&b.forcePosition&&(this._forcePosition=!0),e.trapFocus&&(this._enableFocusTraps=!0),this._hoverPosition=((y=e.position)==null?void 0:y.hoverPosition)??3,this.onmousedown(this._hover.containerDomNode,x=>x.stopPropagation()),this.onkeydown(this._hover.containerDomNode,x=>{x.equals(9)&&this.dispose()}),this._register(se(this._targetWindow,"blur",()=>this.dispose()));const a=$u("div.hover-row.markdown-hover"),l=$u("div.hover-contents");if(typeof e.content=="string")l.textContent=e.content,l.style.whiteSpace="pre-wrap";else if(Ys(e.content))l.appendChild(e.content),l.classList.add("html-hover-contents");else{const x=e.content,k=this._instantiationService.createInstance(kg,{codeBlockFontFamily:this._configurationService.getValue("editor").fontFamily||Zr.fontFamily}),{element:E}=k.render(x,{actionHandler:{callback:N=>this._linkHandler(N),disposables:this._messageListeners},asyncRenderCallback:()=>{l.classList.add("code-hover-contents"),this.layout(),this._onRequestLayout.fire()}});l.appendChild(E)}if(a.appendChild(l),this._hover.contentsDomNode.appendChild(a),e.actions&&e.actions.length>0){const x=$u("div.hover-row.status-bar"),k=$u("div.actions");e.actions.forEach(E=>{const N=this._keybindingService.lookupKeybinding(E.commandId),A=N?N.getLabel():null;C4.render(k,{label:E.label,commandId:E.commandId,run:P=>{E.run(P),this.dispose()},iconClass:E.iconClass},A)}),x.appendChild(k),this._hover.containerDomNode.appendChild(x)}this._hoverContainer=$u("div.workbench-hover-container"),this._hoverPointer&&this._hoverContainer.appendChild(this._hoverPointer),this._hoverContainer.appendChild(this._hover.containerDomNode);let c;if(e.actions&&e.actions.length>0?c=!1:((S=e.persistence)==null?void 0:S.hideOnHover)===void 0?c=typeof e.content=="string"||uu(e.content)&&!e.content.value.includes("](")&&!e.content.value.includes("</a>"):c=e.persistence.hideOnHover,(L=e.appearance)!=null&&L.showHoverHint){const x=$u("div.hover-row.status-bar"),k=$u("div.info");k.textContent=v("hoverhint","Hold {0} key to mouse over",Kt?"Option":"Alt"),x.appendChild(k),this._hover.containerDomNode.appendChild(x)}const u=[...this._target.targetElements];c||u.push(this._hoverContainer);const f=this._register(new Pne(u));if(this._register(f.onMouseOut(()=>{this._isLocked||this.dispose()})),c){const x=[...this._target.targetElements,this._hoverContainer];this._lockMouseTracker=this._register(new Pne(x)),this._register(this._lockMouseTracker.onMouseOut(()=>{this._isLocked||this.dispose()}))}else this._lockMouseTracker=f}addFocusTrap(){if(!this._enableFocusTraps||this._addedFocusTrap)return;this._addedFocusTrap=!0;const e=this._hover.containerDomNode,t=this.findLastFocusableChild(this._hover.containerDomNode);if(t){const i=qq(this._hoverContainer,$u("div")),n=ge(this._hoverContainer,$u("div"));i.tabIndex=0,n.tabIndex=0,this._register(se(n,"focus",s=>{e.focus(),s.preventDefault()})),this._register(se(i,"focus",s=>{t.focus(),s.preventDefault()}))}}findLastFocusableChild(e){if(e.hasChildNodes())for(let t=0;t<e.childNodes.length;t++){const i=e.childNodes.item(e.childNodes.length-t-1);if(i.nodeType===i.ELEMENT_NODE){const s=i;if(typeof s.tabIndex=="number"&&s.tabIndex>=0)return s}const n=this.findLastFocusableChild(i);if(n)return n}}render(e){var n;e.appendChild(this._hoverContainer);const i=this._hoverContainer.contains(this._hoverContainer.ownerDocument.activeElement)&&$de(this._configurationService.getValue("accessibility.verbosity.hover")===!0&&this._accessibilityService.isScreenReaderOptimized(),(n=this._keybindingService.lookupKeybinding("editor.action.accessibleView"))==null?void 0:n.getAriaLabel());i&&Oh(i),this.layout(),this.addFocusTrap()}layout(){this._hover.containerDomNode.classList.remove("right-aligned"),this._hover.contentsDomNode.style.maxHeight="";const e=u=>{const f=bce(u),g=u.getBoundingClientRect();return{top:g.top*f,bottom:g.bottom*f,right:g.right*f,left:g.left*f}},t=this._target.targetElements.map(u=>e(u)),{top:i,right:n,bottom:s,left:r}=t[0],a=n-r,l=s-i,c={top:i,right:n,bottom:s,left:r,width:a,height:l,center:{x:r+a/2,y:i+l/2}};if(this.adjustHorizontalHoverPosition(c),this.adjustVerticalHoverPosition(c),this.adjustHoverMaxHeight(c),this._hoverContainer.style.padding="",this._hoverContainer.style.margin="",this._hoverPointer){switch(this._hoverPosition){case 1:c.left+=3,c.right+=3,this._hoverContainer.style.paddingLeft="3px",this._hoverContainer.style.marginLeft="-3px";break;case 0:c.left-=3,c.right-=3,this._hoverContainer.style.paddingRight="3px",this._hoverContainer.style.marginRight="-3px";break;case 2:c.top+=3,c.bottom+=3,this._hoverContainer.style.paddingTop="3px",this._hoverContainer.style.marginTop="-3px";break;case 3:c.top-=3,c.bottom-=3,this._hoverContainer.style.paddingBottom="3px",this._hoverContainer.style.marginBottom="-3px";break}c.center.x=c.left+a/2,c.center.y=c.top+l/2}this.computeXCordinate(c),this.computeYCordinate(c),this._hoverPointer&&(this._hoverPointer.classList.remove("top"),this._hoverPointer.classList.remove("left"),this._hoverPointer.classList.remove("right"),this._hoverPointer.classList.remove("bottom"),this.setHoverPointerPosition(c)),this._hover.onContentsChanged()}computeXCordinate(e){const t=this._hover.containerDomNode.clientWidth+2;this._target.x!==void 0?this._x=this._target.x:this._hoverPosition===1?this._x=e.right:this._hoverPosition===0?this._x=e.left-t:(this._hoverPointer?this._x=e.center.x-this._hover.containerDomNode.clientWidth/2:this._x=e.left,this._x+t>=this._targetDocumentElement.clientWidth&&(this._hover.containerDomNode.classList.add("right-aligned"),this._x=Math.max(this._targetDocumentElement.clientWidth-t-2,this._targetDocumentElement.clientLeft))),this._x<this._targetDocumentElement.clientLeft&&(this._x=e.left+2)}computeYCordinate(e){this._target.y!==void 0?this._y=this._target.y:this._hoverPosition===3?this._y=e.top:this._hoverPosition===2?this._y=e.bottom-2:this._hoverPointer?this._y=e.center.y+this._hover.containerDomNode.clientHeight/2:this._y=e.bottom,this._y>this._targetWindow.innerHeight&&(this._y=e.bottom)}adjustHorizontalHoverPosition(e){if(this._target.x!==void 0)return;const t=this._hoverPointer?3:0;if(this._forcePosition){const i=t+2;this._hoverPosition===1?this._hover.containerDomNode.style.maxWidth=`${this._targetDocumentElement.clientWidth-e.right-i}px`:this._hoverPosition===0&&(this._hover.containerDomNode.style.maxWidth=`${e.left-i}px`);return}this._hoverPosition===1?this._targetDocumentElement.clientWidth-e.right<this._hover.containerDomNode.clientWidth+t&&(e.left>=this._hover.containerDomNode.clientWidth+t?this._hoverPosition=0:this._hoverPosition=2):this._hoverPosition===0&&(e.left<this._hover.containerDomNode.clientWidth+t&&(this._targetDocumentElement.clientWidth-e.right>=this._hover.containerDomNode.clientWidth+t?this._hoverPosition=1:this._hoverPosition=2),e.left-this._hover.containerDomNode.clientWidth-t<=this._targetDocumentElement.clientLeft&&(this._hoverPosition=1))}adjustVerticalHoverPosition(e){if(this._target.y!==void 0||this._forcePosition)return;const t=this._hoverPointer?3:0;this._hoverPosition===3?e.top-this._hover.containerDomNode.clientHeight-t<0&&(this._hoverPosition=2):this._hoverPosition===2&&e.bottom+this._hover.containerDomNode.clientHeight+t>this._targetWindow.innerHeight&&(this._hoverPosition=3)}adjustHoverMaxHeight(e){let t=this._targetWindow.innerHeight/2;if(this._forcePosition){const i=(this._hoverPointer?3:0)+2;this._hoverPosition===3?t=Math.min(t,e.top-i):this._hoverPosition===2&&(t=Math.min(t,this._targetWindow.innerHeight-e.bottom-i))}if(this._hover.containerDomNode.style.maxHeight=`${t}px`,this._hover.contentsDomNode.clientHeight<this._hover.contentsDomNode.scrollHeight){const i=`${this._hover.scrollbar.options.verticalScrollbarSize}px`;this._hover.contentsDomNode.style.paddingRight!==i&&(this._hover.contentsDomNode.style.paddingRight=i)}}setHoverPointerPosition(e){if(this._hoverPointer)switch(this._hoverPosition){case 0:case 1:{this._hoverPointer.classList.add(this._hoverPosition===0?"right":"left");const t=this._hover.containerDomNode.clientHeight;t>e.height?this._hoverPointer.style.top=`${e.center.y-(this._y-t)-3}px`:this._hoverPointer.style.top=`${Math.round(t/2)-3}px`;break}case 3:case 2:{this._hoverPointer.classList.add(this._hoverPosition===3?"bottom":"top");const t=this._hover.containerDomNode.clientWidth;let i=Math.round(t/2)-3;const n=this._x+i;(n<e.left||n>e.right)&&(i=e.center.x-this._x-3),this._hoverPointer.style.left=`${i}px`;break}}}focus(){this._hover.containerDomNode.focus()}dispose(){this._isDisposed||(this._onDispose.fire(),this._hoverContainer.remove(),this._messageListeners.dispose(),this._target.dispose(),super.dispose()),this._isDisposed=!0}};a6=nPe([gx(1,Di),gx(2,Ht),gx(3,Ma),gx(4,nt),gx(5,dl)],a6);class Pne extends Zl{get onMouseOut(){return this._onMouseOut.event}get isMouseIn(){return this._isMouseIn}constructor(e){super(),this._elements=e,this._isMouseIn=!0,this._onMouseOut=this._register(new Y),this._elements.forEach(t=>this.onmouseover(t,()=>this._onTargetMouseOver(t))),this._elements.forEach(t=>this.onmouseleave(t,()=>this._onTargetMouseLeave(t)))}_onTargetMouseOver(e){this._isMouseIn=!0,this._clearEvaluateMouseStateTimeout(e)}_onTargetMouseLeave(e){this._isMouseIn=!1,this._evaluateMouseState(e)}_evaluateMouseState(e){this._clearEvaluateMouseStateTimeout(e),this._mouseTimeout=at(e).setTimeout(()=>this._fireIfMouseOutside(),0)}_clearEvaluateMouseStateTimeout(e){this._mouseTimeout&&(at(e).clearTimeout(this._mouseTimeout),this._mouseTimeout=void 0)}_fireIfMouseOutside(){this._isMouseIn||this._onMouseOut.fire()}}class sPe{constructor(e){this._element=e,this.targetElements=[this._element]}dispose(){}}var Go;(function(o){function e(s,r){if(s.start>=r.end||r.start>=s.end)return{start:0,end:0};const a=Math.max(s.start,r.start),l=Math.min(s.end,r.end);return l-a<=0?{start:0,end:0}:{start:a,end:l}}o.intersect=e;function t(s){return s.end-s.start<=0}o.isEmpty=t;function i(s,r){return!t(e(s,r))}o.intersects=i;function n(s,r){const a=[],l={start:s.start,end:Math.min(r.start,s.end)},c={start:Math.max(r.end,s.start),end:s.end};return t(l)||a.push(l),t(c)||a.push(c),a}o.relativeComplement=n})(Go||(Go={}));function oPe(o){const e=o;return!!e&&typeof e.x=="number"&&typeof e.y=="number"}var Qp;(function(o){o[o.AVOID=0]="AVOID",o[o.ALIGN=1]="ALIGN"})(Qp||(Qp={}));function Mw(o,e,t){const i=t.mode===Qp.ALIGN?t.offset:t.offset+t.size,n=t.mode===Qp.ALIGN?t.offset+t.size:t.offset;return t.position===0?e<=o-i?i:e<=n?n-e:Math.max(o-e,0):e<=n?n-e:e<=o-i?i:0}const s1=class s1 extends X{constructor(e,t){super(),this.container=null,this.useFixedPosition=!1,this.useShadowDOM=!1,this.delegate=null,this.toDisposeOnClean=X.None,this.toDisposeOnSetContainer=X.None,this.shadowRoot=null,this.shadowRootHostElement=null,this.view=xe(".context-view"),Hr(this.view),this.setContainer(e,t),this._register(it(()=>this.setContainer(null,1)))}setContainer(e,t){var n;this.useFixedPosition=t!==1;const i=this.useShadowDOM;if(this.useShadowDOM=t===3,!(e===this.container&&i===this.useShadowDOM)&&(this.container&&(this.toDisposeOnSetContainer.dispose(),this.view.remove(),this.shadowRoot&&(this.shadowRoot=null,(n=this.shadowRootHostElement)==null||n.remove(),this.shadowRootHostElement=null),this.container=null),e)){if(this.container=e,this.useShadowDOM){this.shadowRootHostElement=xe(".shadow-root-host"),this.container.appendChild(this.shadowRootHostElement),this.shadowRoot=this.shadowRootHostElement.attachShadow({mode:"open"});const r=document.createElement("style");r.textContent=rPe,this.shadowRoot.appendChild(r),this.shadowRoot.appendChild(this.view),this.shadowRoot.appendChild(xe("slot"))}else this.container.appendChild(this.view);const s=new le;s1.BUBBLE_UP_EVENTS.forEach(r=>{s.add(Bn(this.container,r,a=>{this.onDOMEvent(a,!1)}))}),s1.BUBBLE_DOWN_EVENTS.forEach(r=>{s.add(Bn(this.container,r,a=>{this.onDOMEvent(a,!0)},!0))}),this.toDisposeOnSetContainer=s}}show(e){var t,i;this.isVisible()&&this.hide(),bo(this.view),this.view.className="context-view monaco-component",this.view.style.top="0px",this.view.style.left="0px",this.view.style.zIndex=`${2575+(e.layer??0)}`,this.view.style.position=this.useFixedPosition?"fixed":"absolute",Za(this.view),this.toDisposeOnClean=e.render(this.view)||X.None,this.delegate=e,this.doLayout(),(i=(t=this.delegate).focus)==null||i.call(t)}getViewElement(){return this.view}layout(){var e,t;if(this.isVisible()){if(this.delegate.canRelayout===!1&&!(hu&&Wq.pointerEvents)){this.hide();return}(t=(e=this.delegate)==null?void 0:e.layout)==null||t.call(e),this.doLayout()}}doLayout(){if(!this.isVisible())return;const e=this.delegate.getAnchor();let t;if(Ys(e)){const g=os(e),p=bce(e);t={top:g.top*p,left:g.left*p,width:g.width*p,height:g.height*p}}else oPe(e)?t={top:e.y,left:e.x,width:e.width||1,height:e.height||2}:t={top:e.posy,left:e.posx,width:2,height:2};const i=qa(this.view),n=Jf(this.view),s=this.delegate.anchorPosition||0,r=this.delegate.anchorAlignment||0,a=this.delegate.anchorAxisAlignment||0;let l,c;const u=Mx();if(a===0){const g={offset:t.top-u.pageYOffset,size:t.height,position:s===0?0:1},p={offset:t.left,size:t.width,position:r===0?0:1,mode:Qp.ALIGN};l=Mw(u.innerHeight,n,g)+u.pageYOffset,Go.intersects({start:l,end:l+n},{start:g.offset,end:g.offset+g.size})&&(p.mode=Qp.AVOID),c=Mw(u.innerWidth,i,p)}else{const g={offset:t.left,size:t.width,position:r===0?0:1},p={offset:t.top,size:t.height,position:s===0?0:1,mode:Qp.ALIGN};c=Mw(u.innerWidth,i,g),Go.intersects({start:c,end:c+i},{start:g.offset,end:g.offset+g.size})&&(p.mode=Qp.AVOID),l=Mw(u.innerHeight,n,p)+u.pageYOffset}this.view.classList.remove("top","bottom","left","right"),this.view.classList.add(s===0?"bottom":"top"),this.view.classList.add(r===0?"left":"right"),this.view.classList.toggle("fixed",this.useFixedPosition);const f=os(this.container);this.view.style.top=`${l-(this.useFixedPosition?os(this.view).top:f.top)}px`,this.view.style.left=`${c-(this.useFixedPosition?os(this.view).left:f.left)}px`,this.view.style.width="initial"}hide(e){const t=this.delegate;this.delegate=null,t!=null&&t.onHide&&t.onHide(e),this.toDisposeOnClean.dispose(),Hr(this.view)}isVisible(){return!!this.delegate}onDOMEvent(e,t){this.delegate&&(this.delegate.onDOMEvent?this.delegate.onDOMEvent(e,at(e).document.activeElement):t&&!Ks(e.target,this.container)&&this.hide())}dispose(){this.hide(),super.dispose()}};s1.BUBBLE_UP_EVENTS=["click","keydown","focus","blur"],s1.BUBBLE_DOWN_EVENTS=["click"];let l6=s1;const rPe=`
	:host {
		all: initial; /* 1st rule so subsequent properties are reset. */
	}

	.codicon[class*='codicon-'] {
		font: normal normal normal 16px/1 codicon;
		display: inline-block;
		text-decoration: none;
		text-rendering: auto;
		text-align: center;
		-webkit-font-smoothing: antialiased;
		-moz-osx-font-smoothing: grayscale;
		user-select: none;
		-webkit-user-select: none;
		-ms-user-select: none;
	}

	:host {
		font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "HelveticaNeue-Light", system-ui, "Ubuntu", "Droid Sans", sans-serif;
	}

	:host-context(.mac) { font-family: -apple-system, BlinkMacSystemFont, sans-serif; }
	:host-context(.mac:lang(zh-Hans)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Hiragino Sans GB", sans-serif; }
	:host-context(.mac:lang(zh-Hant)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang TC", sans-serif; }
	:host-context(.mac:lang(ja)) { font-family: -apple-system, BlinkMacSystemFont, "Hiragino Kaku Gothic Pro", sans-serif; }
	:host-context(.mac:lang(ko)) { font-family: -apple-system, BlinkMacSystemFont, "Nanum Gothic", "Apple SD Gothic Neo", "AppleGothic", sans-serif; }

	:host-context(.windows) { font-family: "Segoe WPC", "Segoe UI", sans-serif; }
	:host-context(.windows:lang(zh-Hans)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft YaHei", sans-serif; }
	:host-context(.windows:lang(zh-Hant)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft Jhenghei", sans-serif; }
	:host-context(.windows:lang(ja)) { font-family: "Segoe WPC", "Segoe UI", "Yu Gothic UI", "Meiryo UI", sans-serif; }
	:host-context(.windows:lang(ko)) { font-family: "Segoe WPC", "Segoe UI", "Malgun Gothic", "Dotom", sans-serif; }

	:host-context(.linux) { font-family: system-ui, "Ubuntu", "Droid Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hans)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans SC", "Source Han Sans CN", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hant)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans TC", "Source Han Sans TW", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ja)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans J", "Source Han Sans JP", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ko)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans K", "Source Han Sans JR", "Source Han Sans", "UnDotum", "FBaekmuk Gulim", sans-serif; }
`;var aPe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},lPe=function(o,e){return function(t,i){e(t,i,o)}};let $A=class extends X{constructor(e){super(),this.layoutService=e,this.contextView=this._register(new l6(this.layoutService.mainContainer,1)),this.layout(),this._register(e.onDidLayoutContainer(()=>this.layout()))}showContextView(e,t,i){let n;t?t===this.layoutService.getContainer(at(t))?n=1:i?n=3:n=2:n=1,this.contextView.setContainer(t??this.layoutService.activeContainer,n),this.contextView.show(e);const s={close:()=>{this.openContextView===s&&this.hideContextView()}};return this.openContextView=s,s}layout(){this.contextView.layout()}hideContextView(e){this.contextView.hide(e),this.openContextView=void 0}};$A=aPe([lPe(0,e_)],$A);class cPe extends $A{getContextViewElement(){return this.contextView.getViewElement()}}class dPe{constructor(e,t,i){this.hoverDelegate=e,this.target=t,this.fadeInAnimation=i}async update(e,t,i){if(this._cancellationTokenSource&&(this._cancellationTokenSource.dispose(!0),this._cancellationTokenSource=void 0),this.isDisposed)return;let n;if(e===void 0||xa(e)||Ys(e))n=e;else if(!aD(e.markdown))n=e.markdown??e.markdownNotSupportedFallback;else{this._hoverWidget||this.show(v("iconLabel.loading","Loading..."),t,i),this._cancellationTokenSource=new An;const s=this._cancellationTokenSource.token;if(n=await e.markdown(s),n===void 0&&(n=e.markdownNotSupportedFallback),this.isDisposed||s.isCancellationRequested)return}this.show(n,t,i)}show(e,t,i){var s;const n=this._hoverWidget;if(this.hasContent(e)){const r={content:e,target:this.target,actions:i==null?void 0:i.actions,linkHandler:i==null?void 0:i.linkHandler,trapFocus:i==null?void 0:i.trapFocus,appearance:{showPointer:this.hoverDelegate.placement==="element",skipFadeInAnimation:!this.fadeInAnimation||!!n,showHoverHint:(s=i==null?void 0:i.appearance)==null?void 0:s.showHoverHint},position:{hoverPosition:2}};this._hoverWidget=this.hoverDelegate.showHover(r,t)}n==null||n.dispose()}hasContent(e){return e?uu(e)?!!e.value:!0:!1}get isDisposed(){var e;return(e=this._hoverWidget)==null?void 0:e.isDisposed}dispose(){var e,t;(e=this._hoverWidget)==null||e.dispose(),(t=this._cancellationTokenSource)==null||t.dispose(!0),this._cancellationTokenSource=void 0}}var uPe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},px=function(o,e){return function(t,i){e(t,i,o)}};let c6=class extends X{constructor(e,t,i,n,s){super(),this._instantiationService=e,this._keybindingService=i,this._layoutService=n,this._accessibilityService=s,this._managedHovers=new Map,t.onDidShowContextMenu(()=>this.hideHover()),this._contextViewHandler=this._register(new $A(this._layoutService))}showHover(e,t,i){var l,c,u,f;if(One(this._currentHoverOptions)===One(e)||this._currentHover&&((c=(l=this._currentHoverOptions)==null?void 0:l.persistence)!=null&&c.sticky))return;this._currentHoverOptions=e,this._lastHoverOptions=e;const n=e.trapFocus||this._accessibilityService.isScreenReaderOptimized(),s=Mo();i||(n&&s?s.classList.contains("monaco-hover")||(this._lastFocusedElementBeforeOpen=s):this._lastFocusedElementBeforeOpen=void 0);const r=new le,a=this._instantiationService.createInstance(a6,e);if((u=e.persistence)!=null&&u.sticky&&(a.isLocked=!0),a.onDispose(()=>{var p,_;((p=this._currentHover)==null?void 0:p.domNode)&&yce(this._currentHover.domNode)&&((_=this._lastFocusedElementBeforeOpen)==null||_.focus()),this._currentHoverOptions===e&&(this._currentHoverOptions=void 0),r.dispose()},void 0,r),!e.container){const g=Ys(e.target)?e.target:e.target.targetElements[0];e.container=this._layoutService.getContainer(at(g))}if(this._contextViewHandler.showContextView(new hPe(a,t),e.container),a.onRequestLayout(()=>this._contextViewHandler.layout(),void 0,r),(f=e.persistence)!=null&&f.sticky)r.add(se(at(e.container).document,Le.MOUSE_DOWN,g=>{Ks(g.target,a.domNode)||this.doHideHover()}));else{if("targetElements"in e.target)for(const p of e.target.targetElements)r.add(se(p,Le.CLICK,()=>this.hideHover()));else r.add(se(e.target,Le.CLICK,()=>this.hideHover()));const g=Mo();if(g){const p=at(g).document;r.add(se(g,Le.KEY_DOWN,_=>{var b;return this._keyDown(_,a,!!((b=e.persistence)!=null&&b.hideOnKeyDown))})),r.add(se(p,Le.KEY_DOWN,_=>{var b;return this._keyDown(_,a,!!((b=e.persistence)!=null&&b.hideOnKeyDown))})),r.add(se(g,Le.KEY_UP,_=>this._keyUp(_,a))),r.add(se(p,Le.KEY_UP,_=>this._keyUp(_,a)))}}if("IntersectionObserver"in Vi){const g=new IntersectionObserver(_=>this._intersectionChange(_,a),{threshold:0}),p="targetElements"in e.target?e.target.targetElements[0]:e.target;g.observe(p),r.add(it(()=>g.disconnect()))}return this._currentHover=a,a}hideHover(){var e;(e=this._currentHover)!=null&&e.isLocked||!this._currentHoverOptions||this.doHideHover()}doHideHover(){this._currentHover=void 0,this._currentHoverOptions=void 0,this._contextViewHandler.hideContextView()}_intersectionChange(e,t){e[e.length-1].isIntersecting||t.dispose()}showAndFocusLastHover(){this._lastHoverOptions&&this.showHover(this._lastHoverOptions,!0,!0)}_keyDown(e,t,i){var r,a;if(e.key==="Alt"){t.isLocked=!0;return}const n=new Zi(e);this._keybindingService.resolveKeyboardEvent(n).getSingleModifierDispatchChords().some(l=>!!l)||this._keybindingService.softDispatch(n,n.target).kind!==0||i&&(!((r=this._currentHoverOptions)!=null&&r.trapFocus)||e.key!=="Tab")&&(this.hideHover(),(a=this._lastFocusedElementBeforeOpen)==null||a.focus())}_keyUp(e,t){var i;e.key==="Alt"&&(t.isLocked=!1,t.isMouseIn||(this.hideHover(),(i=this._lastFocusedElementBeforeOpen)==null||i.focus()))}setupManagedHover(e,t,i,n){t.setAttribute("custom-hover","true"),t.title!==""&&(console.warn("HTML element already has a title attribute, which will conflict with the custom hover. Please remove the title attribute."),console.trace("Stack trace:",t.title),t.title="");let s,r;const a=(x,k)=>{var N;const E=r!==void 0;x&&(r==null||r.dispose(),r=void 0),k&&(s==null||s.dispose(),s=void 0),E&&((N=e.onDidHideHover)==null||N.call(e),r=void 0)},l=(x,k,E,N)=>new gd(async()=>{(!r||r.isDisposed)&&(r=new dPe(e,E||t,x>0),await r.update(typeof i=="function"?i():i,k,{...n,trapFocus:N}))},x);let c=!1;const u=se(t,Le.MOUSE_DOWN,()=>{c=!0,a(!0,!0)},!0),f=se(t,Le.MOUSE_UP,()=>{c=!1},!0),g=se(t,Le.MOUSE_LEAVE,x=>{c=!1,a(!1,x.fromElement===t)},!0),p=x=>{if(s)return;const k=new le,E={targetElements:[t],dispose:()=>{}};if(e.placement===void 0||e.placement==="mouse"){const N=A=>{E.x=A.x+10,Ys(A.target)&&Fne(A.target,t)!==t&&a(!0,!0)};k.add(se(t,Le.MOUSE_MOVE,N,!0))}s=k,!(Ys(x.target)&&Fne(x.target,t)!==t)&&k.add(l(e.delay,!1,E))},_=se(t,Le.MOUSE_OVER,p,!0),b=()=>{if(c||s)return;const x={targetElements:[t],dispose:()=>{}},k=new le,E=()=>a(!0,!0);k.add(se(t,Le.BLUR,E,!0)),k.add(l(e.delay,!1,x)),s=k};let y;const S=t.tagName.toLowerCase();S!=="input"&&S!=="textarea"&&(y=se(t,Le.FOCUS,b,!0));const L={show:x=>{a(!1,!0),l(0,x,void 0,x)},hide:()=>{a(!0,!0)},update:async(x,k)=>{i=x,await(r==null?void 0:r.update(i,void 0,k))},dispose:()=>{this._managedHovers.delete(t),_.dispose(),g.dispose(),u.dispose(),f.dispose(),y==null||y.dispose(),a(!0,!0)}};return this._managedHovers.set(t,L),L}showManagedHover(e){const t=this._managedHovers.get(e);t&&t.show(!0)}dispose(){this._managedHovers.forEach(e=>e.dispose()),super.dispose()}};c6=uPe([px(0,nt),px(1,cl),px(2,Di),px(3,e_),px(4,dl)],c6);function One(o){if(o!==void 0)return(o==null?void 0:o.id)??o}class hPe{get anchorPosition(){return this._hover.anchor}constructor(e,t=!1){this._hover=e,this._focus=t,this.layer=1}render(e){return this._hover.render(e),this._focus&&this._hover.focus(),this._hover}getAnchor(){return{x:this._hover.x,y:this._hover.y}}layout(){this._hover.layout()}}function Fne(o,e){for(e=e??at(o).document.body;!o.hasAttribute("custom-hover")&&o!==e;)o=o.parentElement;return o}ei(qh,c6,1);Nc((o,e)=>{const t=o.getColor(Tde);t&&(e.addRule(`.monaco-workbench .workbench-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${t.transparent(.5)}; }`),e.addRule(`.monaco-workbench .workbench-hover hr { border-top: 1px solid ${t.transparent(.5)}; }`))});const rI=Gt("IWorkspaceEditService");class AK{constructor(e){this.metadata=e}static convert(e){return e.edits.map(t=>{if(um.is(t))return um.lift(t);if(C1.is(t))return C1.lift(t);throw new Error("Unsupported edit")})}}class um extends AK{static is(e){return e instanceof um?!0:ao(e)&&st.isUri(e.resource)&&ao(e.textEdit)}static lift(e){return e instanceof um?e:new um(e.resource,e.textEdit,e.versionId,e.metadata)}constructor(e,t,i=void 0,n){super(n),this.resource=e,this.textEdit=t,this.versionId=i}}class C1 extends AK{static is(e){return e instanceof C1?!0:ao(e)&&(!!e.newResource||!!e.oldResource)}static lift(e){return e instanceof C1?e:new C1(e.oldResource,e.newResource,e.options,e.metadata)}constructor(e,t,i={},n){super(n),this.oldResource=e,this.newResource=t,this.options=i}}const ko={enableSplitViewResizing:!0,splitViewDefaultRatio:.5,renderSideBySide:!0,renderMarginRevertIcon:!0,renderGutterMenu:!0,maxComputationTime:5e3,maxFileSize:50,ignoreTrimWhitespace:!0,renderIndicators:!0,originalEditable:!1,diffCodeLens:!1,renderOverviewRuler:!0,diffWordWrap:"inherit",diffAlgorithm:"advanced",accessibilityVerbose:!1,experimental:{showMoves:!1,showEmptyDecorations:!0,useTrueInlineView:!1},hideUnchangedRegions:{enabled:!1,contextLineCount:3,minimumLineCount:3,revealLineCount:20},isInEmbeddedEditor:!1,onlyShowAccessibleDiffViewer:!1,renderSideBySideInlineBreakpoint:900,useInlineViewWhenSpaceIsLimited:!0,compactMode:!1},aI=Object.freeze({id:"editor",order:5,type:"object",title:v("editorConfigurationTitle","Editor"),scope:5}),jA={...aI,properties:{"editor.tabSize":{type:"number",default:Zo.tabSize,minimum:1,markdownDescription:v("tabSize","The number of spaces a tab is equal to. This setting is overridden based on the file contents when {0} is on.","`#editor.detectIndentation#`")},"editor.indentSize":{anyOf:[{type:"string",enum:["tabSize"]},{type:"number",minimum:1}],default:"tabSize",markdownDescription:v("indentSize",'The number of spaces used for indentation or `"tabSize"` to use the value from `#editor.tabSize#`. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.')},"editor.insertSpaces":{type:"boolean",default:Zo.insertSpaces,markdownDescription:v("insertSpaces","Insert spaces when pressing `Tab`. This setting is overridden based on the file contents when {0} is on.","`#editor.detectIndentation#`")},"editor.detectIndentation":{type:"boolean",default:Zo.detectIndentation,markdownDescription:v("detectIndentation","Controls whether {0} and {1} will be automatically detected when a file is opened based on the file contents.","`#editor.tabSize#`","`#editor.insertSpaces#`")},"editor.trimAutoWhitespace":{type:"boolean",default:Zo.trimAutoWhitespace,description:v("trimAutoWhitespace","Remove trailing auto inserted whitespace.")},"editor.largeFileOptimizations":{type:"boolean",default:Zo.largeFileOptimizations,description:v("largeFileOptimizations","Special handling for large files to disable certain memory intensive features.")},"editor.wordBasedSuggestions":{enum:["off","currentDocument","matchingDocuments","allDocuments"],default:"matchingDocuments",enumDescriptions:[v("wordBasedSuggestions.off","Turn off Word Based Suggestions."),v("wordBasedSuggestions.currentDocument","Only suggest words from the active document."),v("wordBasedSuggestions.matchingDocuments","Suggest words from all open documents of the same language."),v("wordBasedSuggestions.allDocuments","Suggest words from all open documents.")],description:v("wordBasedSuggestions","Controls whether completions should be computed based on words in the document and from which documents they are computed.")},"editor.semanticHighlighting.enabled":{enum:[!0,!1,"configuredByTheme"],enumDescriptions:[v("semanticHighlighting.true","Semantic highlighting enabled for all color themes."),v("semanticHighlighting.false","Semantic highlighting disabled for all color themes."),v("semanticHighlighting.configuredByTheme","Semantic highlighting is configured by the current color theme's `semanticHighlighting` setting.")],default:"configuredByTheme",description:v("semanticHighlighting.enabled","Controls whether the semanticHighlighting is shown for the languages that support it.")},"editor.stablePeek":{type:"boolean",default:!1,markdownDescription:v("stablePeek","Keep peek editors open even when double-clicking their content or when hitting `Escape`.")},"editor.maxTokenizationLineLength":{type:"integer",default:2e4,description:v("maxTokenizationLineLength","Lines above this length will not be tokenized for performance reasons")},"editor.experimental.asyncTokenization":{type:"boolean",default:!0,description:v("editor.experimental.asyncTokenization","Controls whether the tokenization should happen asynchronously on a web worker."),tags:["experimental"]},"editor.experimental.asyncTokenizationLogging":{type:"boolean",default:!1,description:v("editor.experimental.asyncTokenizationLogging","Controls whether async tokenization should be logged. For debugging only.")},"editor.experimental.asyncTokenizationVerification":{type:"boolean",default:!1,description:v("editor.experimental.asyncTokenizationVerification","Controls whether async tokenization should be verified against legacy background tokenization. Might slow down tokenization. For debugging only."),tags:["experimental"]},"editor.experimental.treeSitterTelemetry":{type:"boolean",default:!1,markdownDescription:v("editor.experimental.treeSitterTelemetry","Controls whether tree sitter parsing should be turned on and telemetry collected. Setting `editor.experimental.preferTreeSitter` for specific languages will take precedence."),tags:["experimental"]},"editor.language.brackets":{type:["array","null"],default:null,description:v("schema.brackets","Defines the bracket symbols that increase or decrease the indentation."),items:{type:"array",items:[{type:"string",description:v("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:v("schema.closeBracket","The closing bracket character or string sequence.")}]}},"editor.language.colorizedBracketPairs":{type:["array","null"],default:null,description:v("schema.colorizedBracketPairs","Defines the bracket pairs that are colorized by their nesting level if bracket pair colorization is enabled."),items:{type:"array",items:[{type:"string",description:v("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:v("schema.closeBracket","The closing bracket character or string sequence.")}]}},"diffEditor.maxComputationTime":{type:"number",default:ko.maxComputationTime,description:v("maxComputationTime","Timeout in milliseconds after which diff computation is cancelled. Use 0 for no timeout.")},"diffEditor.maxFileSize":{type:"number",default:ko.maxFileSize,description:v("maxFileSize","Maximum file size in MB for which to compute diffs. Use 0 for no limit.")},"diffEditor.renderSideBySide":{type:"boolean",default:ko.renderSideBySide,description:v("sideBySide","Controls whether the diff editor shows the diff side by side or inline.")},"diffEditor.renderSideBySideInlineBreakpoint":{type:"number",default:ko.renderSideBySideInlineBreakpoint,description:v("renderSideBySideInlineBreakpoint","If the diff editor width is smaller than this value, the inline view is used.")},"diffEditor.useInlineViewWhenSpaceIsLimited":{type:"boolean",default:ko.useInlineViewWhenSpaceIsLimited,description:v("useInlineViewWhenSpaceIsLimited","If enabled and the editor width is too small, the inline view is used.")},"diffEditor.renderMarginRevertIcon":{type:"boolean",default:ko.renderMarginRevertIcon,description:v("renderMarginRevertIcon","When enabled, the diff editor shows arrows in its glyph margin to revert changes.")},"diffEditor.renderGutterMenu":{type:"boolean",default:ko.renderGutterMenu,description:v("renderGutterMenu","When enabled, the diff editor shows a special gutter for revert and stage actions.")},"diffEditor.ignoreTrimWhitespace":{type:"boolean",default:ko.ignoreTrimWhitespace,description:v("ignoreTrimWhitespace","When enabled, the diff editor ignores changes in leading or trailing whitespace.")},"diffEditor.renderIndicators":{type:"boolean",default:ko.renderIndicators,description:v("renderIndicators","Controls whether the diff editor shows +/- indicators for added/removed changes.")},"diffEditor.codeLens":{type:"boolean",default:ko.diffCodeLens,description:v("codeLens","Controls whether the editor shows CodeLens.")},"diffEditor.wordWrap":{type:"string",enum:["off","on","inherit"],default:ko.diffWordWrap,markdownEnumDescriptions:[v("wordWrap.off","Lines will never wrap."),v("wordWrap.on","Lines will wrap at the viewport width."),v("wordWrap.inherit","Lines will wrap according to the {0} setting.","`#editor.wordWrap#`")]},"diffEditor.diffAlgorithm":{type:"string",enum:["legacy","advanced"],default:ko.diffAlgorithm,markdownEnumDescriptions:[v("diffAlgorithm.legacy","Uses the legacy diffing algorithm."),v("diffAlgorithm.advanced","Uses the advanced diffing algorithm.")],tags:["experimental"]},"diffEditor.hideUnchangedRegions.enabled":{type:"boolean",default:ko.hideUnchangedRegions.enabled,markdownDescription:v("hideUnchangedRegions.enabled","Controls whether the diff editor shows unchanged regions.")},"diffEditor.hideUnchangedRegions.revealLineCount":{type:"integer",default:ko.hideUnchangedRegions.revealLineCount,markdownDescription:v("hideUnchangedRegions.revealLineCount","Controls how many lines are used for unchanged regions."),minimum:1},"diffEditor.hideUnchangedRegions.minimumLineCount":{type:"integer",default:ko.hideUnchangedRegions.minimumLineCount,markdownDescription:v("hideUnchangedRegions.minimumLineCount","Controls how many lines are used as a minimum for unchanged regions."),minimum:1},"diffEditor.hideUnchangedRegions.contextLineCount":{type:"integer",default:ko.hideUnchangedRegions.contextLineCount,markdownDescription:v("hideUnchangedRegions.contextLineCount","Controls how many lines are used as context when comparing unchanged regions."),minimum:1},"diffEditor.experimental.showMoves":{type:"boolean",default:ko.experimental.showMoves,markdownDescription:v("showMoves","Controls whether the diff editor should show detected code moves.")},"diffEditor.experimental.showEmptyDecorations":{type:"boolean",default:ko.experimental.showEmptyDecorations,description:v("showEmptyDecorations","Controls whether the diff editor shows empty decorations to see where characters got inserted or deleted.")},"diffEditor.experimental.useTrueInlineView":{type:"boolean",default:ko.experimental.useTrueInlineView,description:v("useTrueInlineView","If enabled and the editor uses the inline view, word changes are rendered inline.")}}};function fPe(o){return typeof o.type<"u"||typeof o.anyOf<"u"}for(const o of Dw){const e=o.schema;if(typeof e<"u")if(fPe(e))jA.properties[`editor.${o.name}`]=e;else for(const t in e)Object.hasOwnProperty.call(e,t)&&(jA.properties[t]=e[t])}let fR=null;function lue(){return fR===null&&(fR=Object.create(null),Object.keys(jA.properties).forEach(o=>{fR[o]=!0})),fR}function gPe(o){return lue()[`editor.${o}`]||!1}function pPe(o){return lue()[`diffEditor.${o}`]||!1}const mPe=Pn.as(pd.Configuration);mPe.registerConfiguration(jA);class Rn{static insert(e,t){return{range:new M(e.lineNumber,e.column,e.lineNumber,e.column),text:t,forceMoveMarkers:!0}}static delete(e){return{range:e,text:null}}static replace(e,t){return{range:e,text:t}}static replaceMove(e,t){return{range:e,text:t,forceMoveMarkers:!0}}}function gR(o){return Object.isFrozen(o)?o:RLe(o)}class vo{static createEmptyModel(e){return new vo({},[],[],void 0,e)}constructor(e,t,i,n,s){this._contents=e,this._keys=t,this._overrides=i,this.raw=n,this.logService=s,this.overrideConfigurations=new Map}get rawConfiguration(){var e;if(!this._rawConfiguration)if((e=this.raw)!=null&&e.length){const t=this.raw.map(i=>{if(i instanceof vo)return i;const n=new _Pe("",this.logService);return n.parseRaw(i),n.configurationModel});this._rawConfiguration=t.reduce((i,n)=>n===i?n:i.merge(n),t[0])}else this._rawConfiguration=this;return this._rawConfiguration}get contents(){return this._contents}get overrides(){return this._overrides}get keys(){return this._keys}isEmpty(){return this._keys.length===0&&Object.keys(this._contents).length===0&&this._overrides.length===0}getValue(e){return e?uie(this.contents,e):this.contents}inspect(e,t){const i=this;return{get value(){return gR(i.rawConfiguration.getValue(e))},get override(){return t?gR(i.rawConfiguration.getOverrideValue(e,t)):void 0},get merged(){return gR(t?i.rawConfiguration.override(t).getValue(e):i.rawConfiguration.getValue(e))},get overrides(){const n=[];for(const{contents:s,identifiers:r,keys:a}of i.rawConfiguration.overrides){const l=new vo(s,a,[],void 0,i.logService).getValue(e);l!==void 0&&n.push({identifiers:r,value:l})}return n.length?gR(n):void 0}}}getOverrideValue(e,t){const i=this.getContentsForOverrideIdentifer(t);return i?e?uie(i,e):i:void 0}override(e){let t=this.overrideConfigurations.get(e);return t||(t=this.createOverrideConfigurationModel(e),this.overrideConfigurations.set(e,t)),t}merge(...e){var r,a;const t=Wf(this.contents),i=Wf(this.overrides),n=[...this.keys],s=(r=this.raw)!=null&&r.length?[...this.raw]:[this];for(const l of e)if(s.push(...(a=l.raw)!=null&&a.length?l.raw:[l]),!l.isEmpty()){this.mergeContents(t,l.contents);for(const c of l.overrides){const[u]=i.filter(f=>En(f.identifiers,c.identifiers));u?(this.mergeContents(u.contents,c.contents),u.keys.push(...c.keys),u.keys=bg(u.keys)):i.push(Wf(c))}for(const c of l.keys)n.indexOf(c)===-1&&n.push(c)}return new vo(t,n,i,s.every(l=>l instanceof vo)?void 0:s,this.logService)}createOverrideConfigurationModel(e){const t=this.getContentsForOverrideIdentifer(e);if(!t||typeof t!="object"||!Object.keys(t).length)return this;const i={};for(const n of bg([...Object.keys(this.contents),...Object.keys(t)])){let s=this.contents[n];const r=t[n];r&&(typeof s=="object"&&typeof r=="object"?(s=Wf(s),this.mergeContents(s,r)):s=r),i[n]=s}return new vo(i,this.keys,this.overrides,void 0,this.logService)}mergeContents(e,t){for(const i of Object.keys(t)){if(i in e&&ao(e[i])&&ao(t[i])){this.mergeContents(e[i],t[i]);continue}e[i]=Wf(t[i])}}getContentsForOverrideIdentifer(e){let t=null,i=null;const n=s=>{s&&(i?this.mergeContents(i,s):i=Wf(s))};for(const s of this.overrides)s.identifiers.length===1&&s.identifiers[0]===e?t=s.contents:s.identifiers.includes(e)&&n(s.contents);return n(t),i}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}setValue(e,t){this.updateValue(e,t,!1)}removeValue(e){const t=this.keys.indexOf(e);t!==-1&&(this.keys.splice(t,1),wIe(this.contents,e),Hm.test(e)&&this.overrides.splice(this.overrides.findIndex(i=>En(i.identifiers,xA(e))),1))}updateValue(e,t,i){if($ce(this.contents,e,t,n=>this.logService.error(n)),i=i||this.keys.indexOf(e)===-1,i&&this.keys.push(e),Hm.test(e)){const n=xA(e),s={identifiers:n,keys:Object.keys(this.contents[e]),contents:bV(this.contents[e],a=>this.logService.error(a))},r=this.overrides.findIndex(a=>En(a.identifiers,n));r!==-1?this.overrides[r]=s:this.overrides.push(s)}}}class _Pe{constructor(e,t){this._name=e,this.logService=t,this._raw=null,this._configurationModel=null,this._restrictedConfigurations=[]}get configurationModel(){return this._configurationModel||vo.createEmptyModel(this.logService)}parseRaw(e,t){this._raw=e;const{contents:i,keys:n,overrides:s,restricted:r,hasExcludedProperties:a}=this.doParseRaw(e,t);this._configurationModel=new vo(i,n,s,a?[e]:void 0,this.logService),this._restrictedConfigurations=r||[]}doParseRaw(e,t){const i=Pn.as(pd.Configuration).getConfigurationProperties(),n=this.filter(e,i,!0,t);e=n.raw;const s=bV(e,l=>this.logService.error(`Conflict in settings file ${this._name}: ${l}`)),r=Object.keys(e),a=this.toOverrides(e,l=>this.logService.error(`Conflict in settings file ${this._name}: ${l}`));return{contents:s,keys:r,overrides:a,restricted:n.restricted,hasExcludedProperties:n.hasExcludedProperties}}filter(e,t,i,n){var l,c,u;let s=!1;if(!(n!=null&&n.scopes)&&!(n!=null&&n.skipRestricted)&&!((l=n==null?void 0:n.exclude)!=null&&l.length))return{raw:e,restricted:[],hasExcludedProperties:s};const r={},a=[];for(const f in e)if(Hm.test(f)&&i){const g=this.filter(e[f],t,!1,n);r[f]=g.raw,s=s||g.hasExcludedProperties,a.push(...g.restricted)}else{const g=t[f],p=g?typeof g.scope<"u"?g.scope:3:void 0;g!=null&&g.restricted&&a.push(f),!((c=n.exclude)!=null&&c.includes(f))&&((u=n.include)!=null&&u.includes(f)||(p===void 0||n.scopes===void 0||n.scopes.includes(p))&&!(n.skipRestricted&&(g!=null&&g.restricted)))?r[f]=e[f]:s=!0}return{raw:r,restricted:a,hasExcludedProperties:s}}toOverrides(e,t){const i=[];for(const n of Object.keys(e))if(Hm.test(n)){const s={};for(const r in e[n])s[r]=e[n][r];i.push({identifiers:xA(n),keys:Object.keys(s),contents:bV(s,t)})}return i}}class vPe{constructor(e,t,i,n,s,r,a,l,c,u,f,g,p){this.key=e,this.overrides=t,this._value=i,this.overrideIdentifiers=n,this.defaultConfiguration=s,this.policyConfiguration=r,this.applicationConfiguration=a,this.userConfiguration=l,this.localUserConfiguration=c,this.remoteUserConfiguration=u,this.workspaceConfiguration=f,this.folderConfigurationModel=g,this.memoryConfigurationModel=p}toInspectValue(e){return(e==null?void 0:e.value)!==void 0||(e==null?void 0:e.override)!==void 0||(e==null?void 0:e.overrides)!==void 0?e:void 0}get userInspectValue(){return this._userInspectValue||(this._userInspectValue=this.userConfiguration.inspect(this.key,this.overrides.overrideIdentifier)),this._userInspectValue}get user(){return this.toInspectValue(this.userInspectValue)}}class k4{constructor(e,t,i,n,s,r,a,l,c,u){this._defaultConfiguration=e,this._policyConfiguration=t,this._applicationConfiguration=i,this._localUserConfiguration=n,this._remoteUserConfiguration=s,this._workspaceConfiguration=r,this._folderConfigurations=a,this._memoryConfiguration=l,this._memoryConfigurationByResource=c,this.logService=u,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations=new co,this._userConfiguration=null}getValue(e,t,i){return this.getConsolidatedConfigurationModel(e,t,i).getValue(e)}updateValue(e,t,i={}){let n;i.resource?(n=this._memoryConfigurationByResource.get(i.resource),n||(n=vo.createEmptyModel(this.logService),this._memoryConfigurationByResource.set(i.resource,n))):n=this._memoryConfiguration,t===void 0?n.removeValue(e):n.setValue(e,t),i.resource||(this._workspaceConsolidatedConfiguration=null)}inspect(e,t,i){const n=this.getConsolidatedConfigurationModel(e,t,i),s=this.getFolderConfigurationModelForResource(t.resource,i),r=t.resource?this._memoryConfigurationByResource.get(t.resource)||this._memoryConfiguration:this._memoryConfiguration,a=new Set;for(const l of n.overrides)for(const c of l.identifiers)n.getOverrideValue(e,c)!==void 0&&a.add(c);return new vPe(e,t,n.getValue(e),a.size?[...a]:void 0,this._defaultConfiguration,this._policyConfiguration.isEmpty()?void 0:this._policyConfiguration,this.applicationConfiguration.isEmpty()?void 0:this.applicationConfiguration,this.userConfiguration,this.localUserConfiguration,this.remoteUserConfiguration,i?this._workspaceConfiguration:void 0,s||void 0,r)}get applicationConfiguration(){return this._applicationConfiguration}get userConfiguration(){return this._userConfiguration||(this._userConfiguration=this._remoteUserConfiguration.isEmpty()?this._localUserConfiguration:this._localUserConfiguration.merge(this._remoteUserConfiguration)),this._userConfiguration}get localUserConfiguration(){return this._localUserConfiguration}get remoteUserConfiguration(){return this._remoteUserConfiguration}getConsolidatedConfigurationModel(e,t,i){let n=this.getConsolidatedConfigurationModelForResource(t,i);return t.overrideIdentifier&&(n=n.override(t.overrideIdentifier)),!this._policyConfiguration.isEmpty()&&this._policyConfiguration.getValue(e)!==void 0&&(n=n.merge(this._policyConfiguration)),n}getConsolidatedConfigurationModelForResource({resource:e},t){let i=this.getWorkspaceConsolidatedConfiguration();if(t&&e){const n=t.getFolder(e);n&&(i=this.getFolderConsolidatedConfiguration(n.uri)||i);const s=this._memoryConfigurationByResource.get(e);s&&(i=i.merge(s))}return i}getWorkspaceConsolidatedConfiguration(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this.applicationConfiguration,this.userConfiguration,this._workspaceConfiguration,this._memoryConfiguration)),this._workspaceConsolidatedConfiguration}getFolderConsolidatedConfiguration(e){let t=this._foldersConsolidatedConfigurations.get(e);if(!t){const i=this.getWorkspaceConsolidatedConfiguration(),n=this._folderConfigurations.get(e);n?(t=i.merge(n),this._foldersConsolidatedConfigurations.set(e,t)):t=i}return t}getFolderConfigurationModelForResource(e,t){if(t&&e){const i=t.getFolder(e);if(i)return this._folderConfigurations.get(i.uri)}}toData(){return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys},policy:{contents:this._policyConfiguration.contents,overrides:this._policyConfiguration.overrides,keys:this._policyConfiguration.keys},application:{contents:this.applicationConfiguration.contents,overrides:this.applicationConfiguration.overrides,keys:this.applicationConfiguration.keys},user:{contents:this.userConfiguration.contents,overrides:this.userConfiguration.overrides,keys:this.userConfiguration.keys},workspace:{contents:this._workspaceConfiguration.contents,overrides:this._workspaceConfiguration.overrides,keys:this._workspaceConfiguration.keys},folders:[...this._folderConfigurations.keys()].reduce((e,t)=>{const{contents:i,overrides:n,keys:s}=this._folderConfigurations.get(t);return e.push([t,{contents:i,overrides:n,keys:s}]),e},[])}}static parse(e,t){const i=this.parseConfigurationModel(e.defaults,t),n=this.parseConfigurationModel(e.policy,t),s=this.parseConfigurationModel(e.application,t),r=this.parseConfigurationModel(e.user,t),a=this.parseConfigurationModel(e.workspace,t),l=e.folders.reduce((c,u)=>(c.set(st.revive(u[0]),this.parseConfigurationModel(u[1],t)),c),new co);return new k4(i,n,s,r,vo.createEmptyModel(t),a,l,vo.createEmptyModel(t),new co,t)}static parseConfigurationModel(e,t){return new vo(e.contents,e.keys,e.overrides,void 0,t)}}class bPe{constructor(e,t,i,n,s){this.change=e,this.previous=t,this.currentConfiguraiton=i,this.currentWorkspace=n,this.logService=s,this._marker=`
`,this._markerCode1=this._marker.charCodeAt(0),this._markerCode2=46,this.affectedKeys=new Set,this._previousConfiguration=void 0;for(const r of e.keys)this.affectedKeys.add(r);for(const[,r]of e.overrides)for(const a of r)this.affectedKeys.add(a);this._affectsConfigStr=this._marker;for(const r of this.affectedKeys)this._affectsConfigStr+=r+this._marker}get previousConfiguration(){return!this._previousConfiguration&&this.previous&&(this._previousConfiguration=k4.parse(this.previous.data,this.logService)),this._previousConfiguration}affectsConfiguration(e,t){var a;const i=this._marker+e,n=this._affectsConfigStr.indexOf(i);if(n<0)return!1;const s=n+i.length;if(s>=this._affectsConfigStr.length)return!1;const r=this._affectsConfigStr.charCodeAt(s);if(r!==this._markerCode1&&r!==this._markerCode2)return!1;if(t){const l=this.previousConfiguration?this.previousConfiguration.getValue(e,t,(a=this.previous)==null?void 0:a.workspace):void 0,c=this.currentConfiguraiton.getValue(e,t,this.currentWorkspace);return!el(l,c)}return!0}}class CPe{constructor(){this._onDidChange=new Y,this.onDidChange=this._onDidChange.event,this._enabled=!0}get enabled(){return this._enabled}enable(){this._enabled=!0,this._onDidChange.fire()}disable(){this._enabled=!1,this._onDidChange.fire()}}const ak=new CPe,qA={kind:0},yPe={kind:1};function wPe(o,e,t){return{kind:2,commandId:o,commandArgs:e,isBubble:t}}class lk{constructor(e,t,i){var n;this._log=i,this._defaultKeybindings=e,this._defaultBoundCommands=new Map;for(const s of e){const r=s.command;r&&r.charAt(0)!=="-"&&this._defaultBoundCommands.set(r,!0)}this._map=new Map,this._lookupMap=new Map,this._keybindings=lk.handleRemovals([].concat(e).concat(t));for(let s=0,r=this._keybindings.length;s<r;s++){const a=this._keybindings[s];if(a.chords.length===0)continue;const l=(n=a.when)==null?void 0:n.substituteConstants();l&&l.type===0||this._addKeyPress(a.chords[0],a)}}static _isTargetedForRemoval(e,t,i){if(t){for(let n=0;n<t.length;n++)if(t[n]!==e.chords[n])return!1}return!(i&&i.type!==1&&(!e.when||!REe(i,e.when)))}static handleRemovals(e){const t=new Map;for(let n=0,s=e.length;n<s;n++){const r=e[n];if(r.command&&r.command.charAt(0)==="-"){const a=r.command.substring(1);t.has(a)?t.get(a).push(r):t.set(a,[r])}}if(t.size===0)return e;const i=[];for(let n=0,s=e.length;n<s;n++){const r=e[n];if(!r.command||r.command.length===0){i.push(r);continue}if(r.command.charAt(0)==="-")continue;const a=t.get(r.command);if(!a||!r.isDefault){i.push(r);continue}let l=!1;for(const c of a){const u=c.when;if(this._isTargetedForRemoval(r,c.chords,u)){l=!0;break}}if(!l){i.push(r);continue}}return i}_addKeyPress(e,t){const i=this._map.get(e);if(typeof i>"u"){this._map.set(e,[t]),this._addToLookupMap(t);return}for(let n=i.length-1;n>=0;n--){const s=i[n];if(s.command===t.command)continue;let r=!0;for(let a=1;a<s.chords.length&&a<t.chords.length;a++)if(s.chords[a]!==t.chords[a]){r=!1;break}r&&lk.whenIsEntirelyIncluded(s.when,t.when)&&this._removeFromLookupMap(s)}i.push(t),this._addToLookupMap(t)}_addToLookupMap(e){if(!e.command)return;let t=this._lookupMap.get(e.command);typeof t>"u"?(t=[e],this._lookupMap.set(e.command,t)):t.push(e)}_removeFromLookupMap(e){if(!e.command)return;const t=this._lookupMap.get(e.command);if(!(typeof t>"u")){for(let i=0,n=t.length;i<n;i++)if(t[i]===e){t.splice(i,1);return}}}static whenIsEntirelyIncluded(e,t){return!t||t.type===1?!0:!e||e.type===1?!1:pV(e,t)}getKeybindings(){return this._keybindings}lookupPrimaryKeybinding(e,t){const i=this._lookupMap.get(e);if(typeof i>"u"||i.length===0)return null;if(i.length===1)return i[0];for(let n=i.length-1;n>=0;n--){const s=i[n];if(t.contextMatchesRules(s.when))return s}return i[i.length-1]}resolve(e,t,i){const n=[...t,i];this._log(`| Resolving ${n}`);const s=this._map.get(n[0]);if(s===void 0)return this._log("\\ No keybinding entries."),qA;let r=null;if(n.length<2)r=s;else{r=[];for(let l=0,c=s.length;l<c;l++){const u=s[l];if(n.length>u.chords.length)continue;let f=!0;for(let g=1;g<n.length;g++)if(u.chords[g]!==n[g]){f=!1;break}f&&r.push(u)}}const a=this._findCommand(e,r);return a?n.length<a.chords.length?(this._log(`\\ From ${r.length} keybinding entries, awaiting ${a.chords.length-n.length} more chord(s), when: ${Bne(a.when)}, source: ${Wne(a)}.`),yPe):(this._log(`\\ From ${r.length} keybinding entries, matched ${a.command}, when: ${Bne(a.when)}, source: ${Wne(a)}.`),wPe(a.command,a.commandArgs,a.bubble)):(this._log(`\\ From ${r.length} keybinding entries, no when clauses matched the context.`),qA)}_findCommand(e,t){for(let i=t.length-1;i>=0;i--){const n=t[i];if(lk._contextMatchesRules(e,n.when))return n}return null}static _contextMatchesRules(e,t){return t?t.evaluate(e):!0}}function Bne(o){return o?`${o.serialize()}`:"no when condition"}function Wne(o){return o.extensionId?o.isBuiltinExtension?`built-in extension ${o.extensionId}`:`user extension ${o.extensionId}`:o.isDefault?"built-in":"user"}const SPe=/^(cursor|delete|undo|redo|tab|editor\.action\.clipboard)/;class LPe extends X{get onDidUpdateKeybindings(){return this._onDidUpdateKeybindings?this._onDidUpdateKeybindings.event:Ee.None}get inChordMode(){return this._currentChords.length>0}constructor(e,t,i,n,s){super(),this._contextKeyService=e,this._commandService=t,this._telemetryService=i,this._notificationService=n,this._logService=s,this._onDidUpdateKeybindings=this._register(new Y),this._currentChords=[],this._currentChordChecker=new Vq,this._currentChordStatusMessage=null,this._ignoreSingleModifiers=Aw.EMPTY,this._currentSingleModifier=null,this._currentSingleModifierClearTimeout=new gd,this._currentlyDispatchingCommandId=null,this._logging=!1}dispose(){super.dispose()}_log(e){this._logging&&this._logService.info(`[KeybindingService]: ${e}`)}getKeybindings(){return this._getResolver().getKeybindings()}lookupKeybinding(e,t){const i=this._getResolver().lookupPrimaryKeybinding(e,t||this._contextKeyService);if(i)return i.resolvedKeybinding}dispatchEvent(e,t){return this._dispatch(e,t)}softDispatch(e,t){this._log("/ Soft dispatching keyboard event");const i=this.resolveKeyboardEvent(e);if(i.hasMultipleChords())return console.warn("keyboard event should not be mapped to multiple chords"),qA;const[n]=i.getDispatchChords();if(n===null)return this._log("\\ Keyboard event cannot be dispatched"),qA;const s=this._contextKeyService.getContext(t),r=this._currentChords.map(({keypress:a})=>a);return this._getResolver().resolve(s,r,n)}_scheduleLeaveChordMode(){const e=Date.now();this._currentChordChecker.cancelAndSet(()=>{if(!this._documentHasFocus()){this._leaveChordMode();return}Date.now()-e>5e3&&this._leaveChordMode()},500)}_expectAnotherChord(e,t){switch(this._currentChords.push({keypress:e,label:t}),this._currentChords.length){case 0:throw kq("impossible");case 1:this._currentChordStatusMessage=this._notificationService.status(v("first.chord","({0}) was pressed. Waiting for second key of chord...",t));break;default:{const i=this._currentChords.map(({label:n})=>n).join(", ");this._currentChordStatusMessage=this._notificationService.status(v("next.chord","({0}) was pressed. Waiting for next key of chord...",i))}}this._scheduleLeaveChordMode(),ak.enabled&&ak.disable()}_leaveChordMode(){this._currentChordStatusMessage&&(this._currentChordStatusMessage.dispose(),this._currentChordStatusMessage=null),this._currentChordChecker.cancel(),this._currentChords=[],ak.enable()}_dispatch(e,t){return this._doDispatch(this.resolveKeyboardEvent(e),t,!1)}_singleModifierDispatch(e,t){const i=this.resolveKeyboardEvent(e),[n]=i.getSingleModifierDispatchChords();if(n)return this._ignoreSingleModifiers.has(n)?(this._log(`+ Ignoring single modifier ${n} due to it being pressed together with other keys.`),this._ignoreSingleModifiers=Aw.EMPTY,this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1):(this._ignoreSingleModifiers=Aw.EMPTY,this._currentSingleModifier===null?(this._log(`+ Storing single modifier for possible chord ${n}.`),this._currentSingleModifier=n,this._currentSingleModifierClearTimeout.cancelAndSet(()=>{this._log("+ Clearing single modifier due to 300ms elapsed."),this._currentSingleModifier=null},300),!1):n===this._currentSingleModifier?(this._log(`/ Dispatching single modifier chord ${n} ${n}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,this._doDispatch(i,t,!0)):(this._log(`+ Clearing single modifier due to modifier mismatch: ${this._currentSingleModifier} ${n}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1));const[s]=i.getChords();return this._ignoreSingleModifiers=new Aw(s),this._currentSingleModifier!==null&&this._log("+ Clearing single modifier due to other key up."),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1}_doDispatch(e,t,i=!1){let n=!1;if(e.hasMultipleChords())return console.warn("Unexpected keyboard event mapped to multiple chords"),!1;let s=null,r=null;if(i){const[u]=e.getSingleModifierDispatchChords();s=u,r=u?[u]:[]}else[s]=e.getDispatchChords(),r=this._currentChords.map(({keypress:u})=>u);if(s===null)return this._log("\\ Keyboard event cannot be dispatched in keydown phase."),n;const a=this._contextKeyService.getContext(t),l=e.getLabel(),c=this._getResolver().resolve(a,r,s);switch(c.kind){case 0:{if(this._logService.trace("KeybindingService#dispatch",l,"[ No matching keybinding ]"),this.inChordMode){const u=this._currentChords.map(({label:f})=>f).join(", ");this._log(`+ Leaving multi-chord mode: Nothing bound to "${u}, ${l}".`),this._notificationService.status(v("missing.chord","The key combination ({0}, {1}) is not a command.",u,l),{hideAfter:10*1e3}),this._leaveChordMode(),n=!0}return n}case 1:return this._logService.trace("KeybindingService#dispatch",l,"[ Several keybindings match - more chords needed ]"),n=!0,this._expectAnotherChord(s,l),this._log(this._currentChords.length===1?"+ Entering multi-chord mode...":"+ Continuing multi-chord mode..."),n;case 2:{if(this._logService.trace("KeybindingService#dispatch",l,`[ Will dispatch command ${c.commandId} ]`),c.commandId===null||c.commandId===""){if(this.inChordMode){const u=this._currentChords.map(({label:f})=>f).join(", ");this._log(`+ Leaving chord mode: Nothing bound to "${u}, ${l}".`),this._notificationService.status(v("missing.chord","The key combination ({0}, {1}) is not a command.",u,l),{hideAfter:10*1e3}),this._leaveChordMode(),n=!0}}else{this.inChordMode&&this._leaveChordMode(),c.isBubble||(n=!0),this._log(`+ Invoking command ${c.commandId}.`),this._currentlyDispatchingCommandId=c.commandId;try{typeof c.commandArgs>"u"?this._commandService.executeCommand(c.commandId).then(void 0,u=>this._notificationService.warn(u)):this._commandService.executeCommand(c.commandId,c.commandArgs).then(void 0,u=>this._notificationService.warn(u))}finally{this._currentlyDispatchingCommandId=null}SPe.test(c.commandId)||this._telemetryService.publicLog2("workbenchActionExecuted",{id:c.commandId,from:"keybinding",detail:e.getUserSettingsLabel()??void 0})}return n}}}mightProducePrintableCharacter(e){return e.ctrlKey||e.metaKey?!1:e.keyCode>=31&&e.keyCode<=56||e.keyCode>=21&&e.keyCode<=30}}const _2=class _2{constructor(e){this._ctrlKey=e?e.ctrlKey:!1,this._shiftKey=e?e.shiftKey:!1,this._altKey=e?e.altKey:!1,this._metaKey=e?e.metaKey:!1}has(e){switch(e){case"ctrl":return this._ctrlKey;case"shift":return this._shiftKey;case"alt":return this._altKey;case"meta":return this._metaKey}}};_2.EMPTY=new _2(null);let Aw=_2;class Hne{constructor(e,t,i,n,s,r,a){this._resolvedKeybindingItemBrand=void 0,this.resolvedKeybinding=e,this.chords=e?d6(e.getDispatchChords()):[],e&&this.chords.length===0&&(this.chords=d6(e.getSingleModifierDispatchChords())),this.bubble=t?t.charCodeAt(0)===94:!1,this.command=this.bubble?t.substr(1):t,this.commandArgs=i,this.when=n,this.isDefault=s,this.extensionId=r,this.isBuiltinExtension=a}}function d6(o){const e=[];for(let t=0,i=o.length;t<i;t++){const n=o[t];if(!n)return[];e.push(n)}return e}class D4{constructor(e,t,i=t){this.modifierLabels=[null],this.modifierLabels[2]=e,this.modifierLabels[1]=t,this.modifierLabels[3]=i}toLabel(e,t,i){if(t.length===0)return null;const n=[];for(let s=0,r=t.length;s<r;s++){const a=t[s],l=i(a);if(l===null)return null;n[s]=EPe(a,l,this.modifierLabels[e])}return n.join(" ")}}const PK=new D4({ctrlKey:"",shiftKey:"",altKey:"",metaKey:"",separator:""},{ctrlKey:v({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:v({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:v({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:v({key:"windowsKey",comment:["This is the short form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:v({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:v({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:v({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:v({key:"superKey",comment:["This is the short form for the Super key on the keyboard"]},"Super"),separator:"+"}),xPe=new D4({ctrlKey:v({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:v({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:v({key:"optKey.long",comment:["This is the long form for the Alt/Option key on the keyboard"]},"Option"),metaKey:v({key:"cmdKey.long",comment:["This is the long form for the Command key on the keyboard"]},"Command"),separator:"+"},{ctrlKey:v({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:v({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:v({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:v({key:"windowsKey.long",comment:["This is the long form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:v({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:v({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:v({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:v({key:"superKey.long",comment:["This is the long form for the Super key on the keyboard"]},"Super"),separator:"+"}),kPe=new D4({ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Cmd",separator:"+"},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Super",separator:"+"}),DPe=new D4({ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"cmd",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"win",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"meta",separator:"+"});function EPe(o,e,t){if(e===null)return"";const i=[];return o.ctrlKey&&i.push(t.ctrlKey),o.shiftKey&&i.push(t.shiftKey),o.altKey&&i.push(t.altKey),o.metaKey&&i.push(t.metaKey),e!==""&&i.push(e),i.join(t.separator)}class IPe extends Qke{constructor(e,t){if(super(),t.length===0)throw yc("chords");this._os=e,this._chords=t}getLabel(){return PK.toLabel(this._os,this._chords,e=>this._getLabel(e))}getAriaLabel(){return xPe.toLabel(this._os,this._chords,e=>this._getAriaLabel(e))}getElectronAccelerator(){return this._chords.length>1||this._chords[0].isDuplicateModifierCase()?null:kPe.toLabel(this._os,this._chords,e=>this._getElectronAccelerator(e))}getUserSettingsLabel(){return DPe.toLabel(this._os,this._chords,e=>this._getUserSettingsLabel(e))}hasMultipleChords(){return this._chords.length>1}getChords(){return this._chords.map(e=>this._getChord(e))}_getChord(e){return new Xke(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,this._getLabel(e),this._getAriaLabel(e))}getDispatchChords(){return this._chords.map(e=>this._getChordDispatch(e))}getSingleModifierDispatchChords(){return this._chords.map(e=>this._getSingleModifierChordDispatch(e))}}class PD extends IPe{constructor(e,t){super(t,e)}_keyCodeToUILabel(e){if(this._os===2)switch(e){case 15:return"";case 16:return"";case 17:return"";case 18:return""}return Kf.toString(e)}_getLabel(e){return e.isDuplicateModifierCase()?"":this._keyCodeToUILabel(e.keyCode)}_getAriaLabel(e){return e.isDuplicateModifierCase()?"":Kf.toString(e.keyCode)}_getElectronAccelerator(e){return Kf.toElectronAccelerator(e.keyCode)}_getUserSettingsLabel(e){if(e.isDuplicateModifierCase())return"";const t=Kf.toUserSettingsUS(e.keyCode);return t&&t.toLowerCase()}_getChordDispatch(e){return PD.getDispatchStr(e)}static getDispatchStr(e){if(e.isModifierKey())return null;let t="";return e.ctrlKey&&(t+="ctrl+"),e.shiftKey&&(t+="shift+"),e.altKey&&(t+="alt+"),e.metaKey&&(t+="meta+"),t+=Kf.toString(e.keyCode),t}_getSingleModifierChordDispatch(e){return e.keyCode===5&&!e.shiftKey&&!e.altKey&&!e.metaKey?"ctrl":e.keyCode===4&&!e.ctrlKey&&!e.altKey&&!e.metaKey?"shift":e.keyCode===6&&!e.ctrlKey&&!e.shiftKey&&!e.metaKey?"alt":e.keyCode===57&&!e.ctrlKey&&!e.shiftKey&&!e.altKey?"meta":null}static _scanCodeToKeyCode(e){const t=Tq[e];if(t!==-1)return t;switch(e){case 10:return 31;case 11:return 32;case 12:return 33;case 13:return 34;case 14:return 35;case 15:return 36;case 16:return 37;case 17:return 38;case 18:return 39;case 19:return 40;case 20:return 41;case 21:return 42;case 22:return 43;case 23:return 44;case 24:return 45;case 25:return 46;case 26:return 47;case 27:return 48;case 28:return 49;case 29:return 50;case 30:return 51;case 31:return 52;case 32:return 53;case 33:return 54;case 34:return 55;case 35:return 56;case 36:return 22;case 37:return 23;case 38:return 24;case 39:return 25;case 40:return 26;case 41:return 27;case 42:return 28;case 43:return 29;case 44:return 30;case 45:return 21;case 51:return 88;case 52:return 86;case 53:return 92;case 54:return 94;case 55:return 93;case 56:return 0;case 57:return 85;case 58:return 95;case 59:return 91;case 60:return 87;case 61:return 89;case 62:return 90;case 106:return 97}return 0}static _toKeyCodeChord(e){if(!e)return null;if(e instanceof wg)return e;const t=this._scanCodeToKeyCode(e.scanCode);return t===0?null:new wg(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,t)}static resolveKeybinding(e,t){const i=d6(e.chords.map(n=>this._toKeyCodeChord(n)));return i.length>0?[new PD(i,t)]:[]}}const hS=Gt("labelService"),cue=Gt("progressService"),uZ=class uZ{constructor(e){this.callback=e}report(e){this._value=e,this.callback(this._value)}};uZ.None=Object.freeze({report(){}});let iu=uZ;const i_=Gt("editorProgressService");class TPe{constructor(){this._value="",this._pos=0}reset(e){return this._value=e,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){const t=e.charCodeAt(0),i=this._value.charCodeAt(this._pos);return t-i}value(){return this._value[this._pos]}}class NPe{constructor(e=!0){this._caseSensitive=e}reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46)if(e)this._from++;else break;else e=!1;return this}cmp(e){return this._caseSensitive?Rq(e,this._value,0,e.length,this._from,this._to):YE(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class RPe{constructor(e=!0,t=!0){this._splitOnBackslash=e,this._caseSensitive=t}reset(e){this._from=0,this._to=0,this._value=e,this._valueLen=e.length;for(let t=e.length-1;t>=0;t--,this._valueLen--){const i=this._value.charCodeAt(t);if(!(i===47||this._splitOnBackslash&&i===92))break}return this.next()}hasNext(){return this._to<this._valueLen}next(){this._from=this._to;let e=!0;for(;this._to<this._valueLen;this._to++){const t=this._value.charCodeAt(this._to);if(t===47||this._splitOnBackslash&&t===92)if(e)this._from++;else break;else e=!1}return this}cmp(e){return this._caseSensitive?Rq(e,this._value,0,e.length,this._from,this._to):YE(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class MPe{constructor(e,t){this._ignorePathCasing=e,this._ignoreQueryAndFragment=t,this._states=[],this._stateIdx=0}reset(e){return this._value=e,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new RPe(!1,!this._ignorePathCasing(e)),this._pathIterator.reset(e.path),this._pathIterator.value()&&this._states.push(3)),this._ignoreQueryAndFragment(e)||(this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5)),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(e){if(this._states[this._stateIdx]===1)return J8(e,this._value.scheme);if(this._states[this._stateIdx]===2)return J8(e,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(e);if(this._states[this._stateIdx]===4)return gD(e,this._value.query);if(this._states[this._stateIdx]===5)return gD(e,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}}class pR{constructor(){this.height=1}rotateLeft(){const e=this.right;return this.right=e.left,e.left=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){const e=this.left;return this.left=e.right,e.right=this,this.updateHeight(),e.updateHeight(),e}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){var e;return((e=this.left)==null?void 0:e.height)??0}get heightRight(){var e;return((e=this.right)==null?void 0:e.height)??0}}class y1{static forUris(e=()=>!1,t=()=>!1){return new y1(new MPe(e,t))}static forStrings(){return new y1(new TPe)}static forConfigKeys(){return new y1(new NPe)}constructor(e){this._iter=e}clear(){this._root=void 0}set(e,t){const i=this._iter.reset(e);let n;this._root||(this._root=new pR,this._root.segment=i.value());const s=[];for(n=this._root;;){const a=i.cmp(n.segment);if(a>0)n.left||(n.left=new pR,n.left.segment=i.value()),s.push([-1,n]),n=n.left;else if(a<0)n.right||(n.right=new pR,n.right.segment=i.value()),s.push([1,n]),n=n.right;else if(i.hasNext())i.next(),n.mid||(n.mid=new pR,n.mid.segment=i.value()),s.push([0,n]),n=n.mid;else break}const r=n.value;n.value=t,n.key=e;for(let a=s.length-1;a>=0;a--){const l=s[a][1];l.updateHeight();const c=l.balanceFactor();if(c<-1||c>1){const u=s[a][0],f=s[a+1][0];if(u===1&&f===1)s[a][1]=l.rotateLeft();else if(u===-1&&f===-1)s[a][1]=l.rotateRight();else if(u===1&&f===-1)l.right=s[a+1][1]=s[a+1][1].rotateRight(),s[a][1]=l.rotateLeft();else if(u===-1&&f===1)l.left=s[a+1][1]=s[a+1][1].rotateLeft(),s[a][1]=l.rotateRight();else throw new Error;if(a>0)switch(s[a-1][0]){case-1:s[a-1][1].left=s[a][1];break;case 1:s[a-1][1].right=s[a][1];break;case 0:s[a-1][1].mid=s[a][1];break}else this._root=s[0][1]}}return r}get(e){var t;return(t=this._getNode(e))==null?void 0:t.value}_getNode(e){const t=this._iter.reset(e);let i=this._root;for(;i;){const n=t.cmp(i.segment);if(n>0)i=i.left;else if(n<0)i=i.right;else if(t.hasNext())t.next(),i=i.mid;else break}return i}has(e){const t=this._getNode(e);return!((t==null?void 0:t.value)===void 0&&(t==null?void 0:t.mid)===void 0)}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,t){const i=this._iter.reset(e),n=[];let s=this._root;for(;s;){const r=i.cmp(s.segment);if(r>0)n.push([-1,s]),s=s.left;else if(r<0)n.push([1,s]),s=s.right;else if(i.hasNext())i.next(),n.push([0,s]),s=s.mid;else break}if(s){if(t?(s.left=void 0,s.mid=void 0,s.right=void 0,s.height=1):(s.key=void 0,s.value=void 0),!s.mid&&!s.value)if(s.left&&s.right){const r=this._min(s.right);if(r.key){const{key:a,value:l,segment:c}=r;this._delete(r.key,!1),s.key=a,s.value=l,s.segment=c}}else{const r=s.left??s.right;if(n.length>0){const[a,l]=n[n.length-1];switch(a){case-1:l.left=r;break;case 0:l.mid=r;break;case 1:l.right=r;break}}else this._root=r}for(let r=n.length-1;r>=0;r--){const a=n[r][1];a.updateHeight();const l=a.balanceFactor();if(l>1?(a.right.balanceFactor()>=0||(a.right=a.right.rotateRight()),n[r][1]=a.rotateLeft()):l<-1&&(a.left.balanceFactor()<=0||(a.left=a.left.rotateLeft()),n[r][1]=a.rotateRight()),r>0)switch(n[r-1][0]){case-1:n[r-1][1].left=n[r][1];break;case 1:n[r-1][1].right=n[r][1];break;case 0:n[r-1][1].mid=n[r][1];break}else this._root=n[0][1]}}}_min(e){for(;e.left;)e=e.left;return e}findSubstr(e){const t=this._iter.reset(e);let i=this._root,n;for(;i;){const s=t.cmp(i.segment);if(s>0)i=i.left;else if(s<0)i=i.right;else if(t.hasNext())t.next(),n=i.value||n,i=i.mid;else break}return i&&i.value||n}findSuperstr(e){return this._findSuperstrOrElement(e,!1)}_findSuperstrOrElement(e,t){const i=this._iter.reset(e);let n=this._root;for(;n;){const s=i.cmp(n.segment);if(s>0)n=n.left;else if(s<0)n=n.right;else if(i.hasNext())i.next(),n=n.mid;else return n.mid?this._entries(n.mid):t?n.value:void 0}}forEach(e){for(const[t,i]of this)e(i,t)}*[Symbol.iterator](){yield*this._entries(this._root)}_entries(e){const t=[];return this._dfsEntries(e,t),t[Symbol.iterator]()}_dfsEntries(e,t){e&&(e.left&&this._dfsEntries(e.left,t),e.value&&t.push([e.key,e.value]),e.mid&&this._dfsEntries(e.mid,t),e.right&&this._dfsEntries(e.right,t))}}const fC=Gt("contextService");function u6(o){const e=o;return typeof(e==null?void 0:e.id)=="string"&&st.isUri(e.uri)}function APe(o){const e=o;return typeof(e==null?void 0:e.id)=="string"&&!u6(o)&&!FPe(o)}const PPe={id:"empty-window"};function OPe(o,e){if(typeof o=="string"||typeof o>"u")return typeof o=="string"?{id:lm(o)}:PPe;const t=o;return t.configuration?{id:t.id,configPath:t.configuration}:t.folders.length===1?{id:t.id,uri:t.folders[0].uri}:{id:t.id}}function FPe(o){const e=o;return typeof(e==null?void 0:e.id)=="string"&&st.isUri(e.configPath)}class BPe{constructor(e,t){this.raw=t,this.uri=e.uri,this.index=e.index,this.name=e.name}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}}const h6="code-workspace";v("codeWorkspace","Code Workspace");const due="4064f6ec-cb38-4ad0-af64-ee6467e63c82";function WPe(o){return o.id===due}var f6;(function(o){o.inspectTokensAction=v("inspectTokens","Developer: Inspect Tokens")})(f6||(f6={}));var KA;(function(o){o.gotoLineActionLabel=v("gotoLineActionLabel","Go to Line/Column...")})(KA||(KA={}));var g6;(function(o){o.helpQuickAccessActionLabel=v("helpQuickAccess","Show all Quick Access Providers")})(g6||(g6={}));var GA;(function(o){o.quickCommandActionLabel=v("quickCommandActionLabel","Command Palette"),o.quickCommandHelp=v("quickCommandActionHelp","Show And Run Commands")})(GA||(GA={}));var OD;(function(o){o.quickOutlineActionLabel=v("quickOutlineActionLabel","Go to Symbol..."),o.quickOutlineByCategoryActionLabel=v("quickOutlineByCategoryActionLabel","Go to Symbol by Category...")})(OD||(OD={}));var p6;(function(o){o.editorViewAccessibleLabel=v("editorViewAccessibleLabel","Editor content")})(p6||(p6={}));var m6;(function(o){o.toggleHighContrast=v("toggleHighContrast","Toggle High Contrast Theme")})(m6||(m6={}));var _6;(function(o){o.bulkEditServiceSummary=v("bulkEditServiceSummary","Made {0} edits in {1} files")})(_6||(_6={}));const uue=Gt("workspaceTrustManagementService");let fS=[],OK=[],hue=[];function mR(o,e=!1){HPe(o,!1,e)}function HPe(o,e,t){const i=VPe(o,e);fS.push(i),i.userConfigured?hue.push(i):OK.push(i),t&&!i.userConfigured&&fS.forEach(n=>{n.mime===i.mime||n.userConfigured||(i.extension&&n.extension===i.extension&&console.warn(`Overwriting extension <<${i.extension}>> to now point to mime <<${i.mime}>>`),i.filename&&n.filename===i.filename&&console.warn(`Overwriting filename <<${i.filename}>> to now point to mime <<${i.mime}>>`),i.filepattern&&n.filepattern===i.filepattern&&console.warn(`Overwriting filepattern <<${i.filepattern}>> to now point to mime <<${i.mime}>>`),i.firstline&&n.firstline===i.firstline&&console.warn(`Overwriting firstline <<${i.firstline}>> to now point to mime <<${i.mime}>>`))})}function VPe(o,e){return{id:o.id,mime:o.mime,filename:o.filename,extension:o.extension,filepattern:o.filepattern,firstline:o.firstline,userConfigured:e,filenameLowercase:o.filename?o.filename.toLowerCase():void 0,extensionLowercase:o.extension?o.extension.toLowerCase():void 0,filepatternLowercase:o.filepattern?Cde(o.filepattern.toLowerCase()):void 0,filepatternOnPath:o.filepattern?o.filepattern.indexOf(Cs.sep)>=0:!1}}function zPe(){fS=fS.filter(o=>o.userConfigured),OK=[]}function UPe(o,e){return $Pe(o,e).map(t=>t.id)}function $Pe(o,e){let t;if(o)switch(o.scheme){case Lt.file:t=o.fsPath;break;case Lt.data:{t=zm.parseMetaData(o).get(zm.META_DATA_LABEL);break}case Lt.vscodeNotebookCell:t=void 0;break;default:t=o.path}if(!t)return[{id:"unknown",mime:ss.unknown}];t=t.toLowerCase();const i=lm(t),n=Vne(t,i,hue);if(n)return[n,{id:Xr,mime:ss.text}];const s=Vne(t,i,OK);if(s)return[s,{id:Xr,mime:ss.text}];if(e){const r=jPe(e);if(r)return[r,{id:Xr,mime:ss.text}]}return[{id:"unknown",mime:ss.unknown}]}function Vne(o,e,t){var r;let i,n,s;for(let a=t.length-1;a>=0;a--){const l=t[a];if(e===l.filenameLowercase){i=l;break}if(l.filepattern&&(!n||l.filepattern.length>n.filepattern.length)){const c=l.filepatternOnPath?o:e;(r=l.filepatternLowercase)!=null&&r.call(l,c)&&(n=l)}l.extension&&(!s||l.extension.length>s.extension.length)&&e.endsWith(l.extensionLowercase)&&(s=l)}if(i)return i;if(n)return n;if(s)return s}function jPe(o){if(Bq(o)&&(o=o.substr(1)),o.length>0)for(let e=fS.length-1;e>=0;e--){const t=fS[e];if(!t.firstline)continue;const i=o.match(t.firstline);if(i&&i.length>0)return t}}const _R=Object.prototype.hasOwnProperty,zne="vs.editor.nullLanguage";class qPe{constructor(){this._languageIdToLanguage=[],this._languageToLanguageId=new Map,this._register(zne,0),this._register(Xr,1),this._nextLanguageId=2}_register(e,t){this._languageIdToLanguage[t]=e,this._languageToLanguageId.set(e,t)}register(e){if(this._languageToLanguageId.has(e))return;const t=this._nextLanguageId++;this._register(e,t)}encodeLanguageId(e){return this._languageToLanguageId.get(e)||0}decodeLanguageId(e){return this._languageIdToLanguage[e]||zne}}const qk=class qk extends X{constructor(e=!0,t=!1){super(),this._onDidChange=this._register(new Y),this.onDidChange=this._onDidChange.event,qk.instanceCount++,this._warnOnOverwrite=t,this.languageIdCodec=new qPe,this._dynamicLanguages=[],this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},e&&(this._initializeFromRegistry(),this._register(iS.onDidChangeLanguages(i=>{this._initializeFromRegistry()})))}dispose(){qk.instanceCount--,super.dispose()}_initializeFromRegistry(){this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},zPe();const e=[].concat(iS.getLanguages()).concat(this._dynamicLanguages);this._registerLanguages(e)}_registerLanguages(e){for(const t of e)this._registerLanguage(t);this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},Object.keys(this._languages).forEach(t=>{const i=this._languages[t];i.name&&(this._nameMap[i.name]=i.identifier),i.aliases.forEach(n=>{this._lowercaseNameMap[n.toLowerCase()]=i.identifier}),i.mimetypes.forEach(n=>{this._mimeTypesMap[n]=i.identifier})}),Pn.as(pd.Configuration).registerOverrideIdentifiers(this.getRegisteredLanguageIds()),this._onDidChange.fire()}_registerLanguage(e){const t=e.id;let i;_R.call(this._languages,t)?i=this._languages[t]:(this.languageIdCodec.register(t),i={identifier:t,name:null,mimetypes:[],aliases:[],extensions:[],filenames:[],configurationFiles:[],icons:[]},this._languages[t]=i),this._mergeLanguage(i,e)}_mergeLanguage(e,t){const i=t.id;let n=null;if(Array.isArray(t.mimetypes)&&t.mimetypes.length>0&&(e.mimetypes.push(...t.mimetypes),n=t.mimetypes[0]),n||(n=`text/x-${i}`,e.mimetypes.push(n)),Array.isArray(t.extensions)){t.configuration?e.extensions=t.extensions.concat(e.extensions):e.extensions=e.extensions.concat(t.extensions);for(const a of t.extensions)mR({id:i,mime:n,extension:a},this._warnOnOverwrite)}if(Array.isArray(t.filenames))for(const a of t.filenames)mR({id:i,mime:n,filename:a},this._warnOnOverwrite),e.filenames.push(a);if(Array.isArray(t.filenamePatterns))for(const a of t.filenamePatterns)mR({id:i,mime:n,filepattern:a},this._warnOnOverwrite);if(typeof t.firstLine=="string"&&t.firstLine.length>0){let a=t.firstLine;a.charAt(0)!=="^"&&(a="^"+a);try{const l=new RegExp(a);Fke(l)||mR({id:i,mime:n,firstline:l},this._warnOnOverwrite)}catch(l){console.warn(`[${t.id}]: Invalid regular expression \`${a}\`: `,l)}}e.aliases.push(i);let s=null;if(typeof t.aliases<"u"&&Array.isArray(t.aliases)&&(t.aliases.length===0?s=[null]:s=t.aliases),s!==null)for(const a of s)!a||a.length===0||e.aliases.push(a);const r=s!==null&&s.length>0;if(!(r&&s[0]===null)){const a=(r?s[0]:null)||i;(r||!e.name)&&(e.name=a)}t.configuration&&e.configurationFiles.push(t.configuration),t.icon&&e.icons.push(t.icon)}isRegisteredLanguageId(e){return e?_R.call(this._languages,e):!1}getRegisteredLanguageIds(){return Object.keys(this._languages)}getLanguageIdByLanguageName(e){const t=e.toLowerCase();return _R.call(this._lowercaseNameMap,t)?this._lowercaseNameMap[t]:null}getLanguageIdByMimeType(e){return e&&_R.call(this._mimeTypesMap,e)?this._mimeTypesMap[e]:null}guessLanguageIdByFilepathOrFirstLine(e,t){return!e&&!t?[]:UPe(e,t)}};qk.instanceCount=0;let v6=qk;const jl=(o,e)=>o===e;function YA(o=jl){return(e,t)=>En(e,t,o)}function KPe(){return(o,e)=>o.equals(e)}function b6(o,e,t){if(t!==void 0){const i=o;return i==null||e===void 0||e===null?e===i:t(i,e)}else{const i=o;return(n,s)=>n==null||s===void 0||s===null?s===n:i(n,s)}}function ZA(o,e){if(o===e)return!0;if(Array.isArray(o)&&Array.isArray(e)){if(o.length!==e.length)return!1;for(let t=0;t<o.length;t++)if(!ZA(o[t],e[t]))return!1;return!0}if(o&&typeof o=="object"&&e&&typeof e=="object"&&Object.getPrototypeOf(o)===Object.prototype&&Object.getPrototypeOf(e)===Object.prototype){const t=o,i=e,n=Object.keys(t),s=Object.keys(i),r=new Set(s);if(n.length!==s.length)return!1;for(const a of n)if(!r.has(a)||!ZA(t[a],i[a]))return!1;return!0}return!1}class er{constructor(e,t,i){this.owner=e,this.debugNameSource=t,this.referenceFn=i}getDebugName(e){return GPe(e,this)}}const Une=new Map,C6=new WeakMap;function GPe(o,e){const t=C6.get(o);if(t)return t;const i=YPe(o,e);if(i){let n=Une.get(i)??0;n++,Une.set(i,n);const s=n===1?i:`${i}#${n}`;return C6.set(o,s),s}}function YPe(o,e){const t=C6.get(o);if(t)return t;const i=e.owner?XPe(e.owner)+".":"";let n;const s=e.debugNameSource;if(s!==void 0)if(typeof s=="function"){if(n=s(),n!==void 0)return i+n}else return i+s;const r=e.referenceFn;if(r!==void 0&&(n=FK(r),n!==void 0))return i+n;if(e.owner!==void 0){const a=ZPe(e.owner,o);if(a!==void 0)return i+a}}function ZPe(o,e){for(const t in o)if(o[t]===e)return t}const $ne=new Map,jne=new WeakMap;function XPe(o){const e=jne.get(o);if(e)return e;const t=QPe(o);let i=$ne.get(t)??0;i++,$ne.set(t,i);const n=i===1?t:`${t}#${i}`;return jne.set(o,n),n}function QPe(o){const e=o.constructor;return e?e.name:"Object"}function FK(o){const e=o.toString(),i=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(e),n=i?i[1]:void 0;return n==null?void 0:n.trim()}let JPe;function fue(){return JPe}let gue;function eOe(o){gue=o}let pue;function tOe(o){pue=o}let y6;function iOe(o){y6=o}class mue{get TChange(){return null}reportChanges(){this.get()}read(e){return e?e.readObservable(this):this.get()}map(e,t){const i=t===void 0?void 0:e,n=t===void 0?e:t;return y6({owner:i,debugName:()=>{const s=FK(n);if(s!==void 0)return s;const a=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(n.toString());if(a)return`${this.debugName}.${a[2]}`;if(!i)return`${this.debugName} (mapped)`},debugReferenceFn:n},s=>n(this.read(s),s))}flatten(){return y6({owner:void 0,debugName:()=>`${this.debugName} (flattened)`},e=>this.read(e).read(e))}recomputeInitiallyAndOnChange(e,t){return e.add(gue(this,t)),this}keepObserved(e){return e.add(pue(this)),this}}class XS extends mue{constructor(){super(...arguments),this.observers=new Set}addObserver(e){const t=this.observers.size;this.observers.add(e),t===0&&this.onFirstObserverAdded()}removeObserver(e){this.observers.delete(e)&&this.observers.size===0&&this.onLastObserverRemoved()}onFirstObserverAdded(){}onLastObserverRemoved(){}}function Mn(o,e){const t=new QS(o,e);try{o(t)}finally{t.finish()}}let vR;function Bx(o){if(vR)o(vR);else{const e=new QS(o,void 0);vR=e;try{o(e)}finally{e.finish(),vR=void 0}}}async function _ue(o,e){const t=new QS(o,e);try{await o(t)}finally{t.finish()}}function gC(o,e,t){o?e(o):Mn(e,t)}class QS{constructor(e,t){this._fn=e,this._getDebugName=t,this.updatingObservers=[]}getDebugName(){return this._getDebugName?this._getDebugName():FK(this._fn)}updateObserver(e,t){this.updatingObservers.push({observer:e,observable:t}),e.beginUpdate(t)}finish(){const e=this.updatingObservers;for(let t=0;t<e.length;t++){const{observer:i,observable:n}=e[t];i.endUpdate(n)}this.updatingObservers=null}}function Wt(o,e){let t;return typeof o=="string"?t=new er(void 0,o,void 0):t=new er(o,void 0,void 0),new BK(t,e,jl)}class BK extends XS{get debugName(){return this._debugNameData.getDebugName(this)??"ObservableValue"}constructor(e,t,i){super(),this._debugNameData=e,this._equalityComparator=i,this._value=t}get(){return this._value}set(e,t,i){var s;if(i===void 0&&this._equalityComparator(this._value,e))return;let n;t||(t=n=new QS(()=>{},()=>`Setting ${this.debugName}`));try{const r=this._value;this._setValue(e),(s=fue())==null||s.handleObservableChanged(this,{oldValue:r,newValue:e,change:i,didChange:!0,hadValue:!0});for(const a of this.observers)t.updateObserver(a,this),a.handleChange(this,i)}finally{n&&n.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(e){this._value=e}}function FD(o,e){let t;return typeof o=="string"?t=new er(void 0,o,void 0):t=new er(o,void 0,void 0),new nOe(t,e,jl)}class nOe extends BK{_setValue(e){this._value!==e&&(this._value&&this._value.dispose(),this._value=e)}dispose(){var e;(e=this._value)==null||e.dispose()}}function Qe(o,e){return e!==void 0?new pC(new er(o,void 0,e),e,void 0,void 0,void 0,jl):new pC(new er(void 0,void 0,o),o,void 0,void 0,void 0,jl)}function lI(o,e,t){return new sOe(new er(o,void 0,e),e,void 0,void 0,void 0,jl,t)}function Ml(o,e){return new pC(new er(o.owner,o.debugName,o.debugReferenceFn),e,void 0,void 0,o.onLastObserverRemoved,o.equalsFn??jl)}iOe(Ml);function vue(o,e){return new pC(new er(o.owner,o.debugName,void 0),e,o.createEmptyChangeSummary,o.handleChange,void 0,o.equalityComparer??jl)}function n_(o,e){let t,i;e===void 0?(t=o,i=void 0):(i=o,t=e);const n=new le;return new pC(new er(i,void 0,t),s=>(n.clear(),t(s,n)),void 0,void 0,()=>n.dispose(),jl)}function vr(o,e){let t,i;e===void 0?(t=o,i=void 0):(i=o,t=e);let n;return new pC(new er(i,void 0,t),s=>{n?n.clear():n=new le;const r=t(s);return r&&n.add(r),r},void 0,void 0,()=>{n&&(n.dispose(),n=void 0)},jl)}class pC extends XS{get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}constructor(e,t,i,n,s=void 0,r){var a;super(),this._debugNameData=e,this._computeFn=t,this.createChangeSummary=i,this._handleChange=n,this._handleLastObserverRemoved=s,this._equalityComparator=r,this.state=0,this.value=void 0,this.updateCount=0,this.dependencies=new Set,this.dependenciesToBeRemoved=new Set,this.changeSummary=void 0,this.changeSummary=(a=this.createChangeSummary)==null?void 0:a.call(this)}onLastObserverRemoved(){var e;this.state=0,this.value=void 0;for(const t of this.dependencies)t.removeObserver(this);this.dependencies.clear(),(e=this._handleLastObserverRemoved)==null||e.call(this)}get(){var e;if(this.observers.size===0){const t=this._computeFn(this,(e=this.createChangeSummary)==null?void 0:e.call(this));return this.onLastObserverRemoved(),t}else{do{if(this.state===1){for(const t of this.dependencies)if(t.reportChanges(),this.state===2)break}this.state===1&&(this.state=3),this._recomputeIfNeeded()}while(this.state!==3);return this.value}}_recomputeIfNeeded(){var r;if(this.state===3)return;const e=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=e;const t=this.state!==0,i=this.value;this.state=3;const n=this.changeSummary;this.changeSummary=(r=this.createChangeSummary)==null?void 0:r.call(this);try{this.value=this._computeFn(this,n)}finally{for(const a of this.dependenciesToBeRemoved)a.removeObserver(this);this.dependenciesToBeRemoved.clear()}if(t&&!this._equalityComparator(i,this.value))for(const a of this.observers)a.handleChange(this,void 0)}toString(){return`LazyDerived<${this.debugName}>`}beginUpdate(e){this.updateCount++;const t=this.updateCount===1;if(this.state===3&&(this.state=1,!t))for(const i of this.observers)i.handlePossibleChange(this);if(t)for(const i of this.observers)i.beginUpdate(this)}endUpdate(e){if(this.updateCount--,this.updateCount===0){const t=[...this.observers];for(const i of t)i.endUpdate(this)}cC(()=>this.updateCount>=0)}handlePossibleChange(e){if(this.state===3&&this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)){this.state=1;for(const t of this.observers)t.handlePossibleChange(this)}}handleChange(e,t){if(this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)){const i=this._handleChange?this._handleChange({changedObservable:e,change:t,didChange:s=>s===e},this.changeSummary):!0,n=this.state===3;if(i&&(this.state===1||n)&&(this.state=2,n))for(const s of this.observers)s.handlePossibleChange(this)}}readObservable(e){e.addObserver(this);const t=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),t}addObserver(e){const t=!this.observers.has(e)&&this.updateCount>0;super.addObserver(e),t&&e.beginUpdate(this)}removeObserver(e){const t=this.observers.has(e)&&this.updateCount>0;super.removeObserver(e),t&&e.endUpdate(this)}}class sOe extends pC{constructor(e,t,i,n,s=void 0,r,a){super(e,t,i,n,s,r),this.set=a}}function bt(o){return new E4(new er(void 0,void 0,o),o,void 0,void 0)}function cI(o,e){return new E4(new er(o.owner,o.debugName,o.debugReferenceFn??e),e,void 0,void 0)}function dI(o,e){return new E4(new er(o.owner,o.debugName,o.debugReferenceFn??e),e,o.createEmptyChangeSummary,o.handleChange)}function oOe(o,e){const t=new le,i=dI({owner:o.owner,debugName:o.debugName,debugReferenceFn:o.debugReferenceFn??e,createEmptyChangeSummary:o.createEmptyChangeSummary,handleChange:o.handleChange},(n,s)=>{t.clear(),e(n,s,t)});return it(()=>{i.dispose(),t.dispose()})}function ka(o){const e=new le,t=cI({owner:void 0,debugName:void 0,debugReferenceFn:o},i=>{e.clear(),o(i,e)});return it(()=>{t.dispose(),e.dispose()})}class E4{get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}constructor(e,t,i,n){var s;this._debugNameData=e,this._runFn=t,this.createChangeSummary=i,this._handleChange=n,this.state=2,this.updateCount=0,this.disposed=!1,this.dependencies=new Set,this.dependenciesToBeRemoved=new Set,this.changeSummary=(s=this.createChangeSummary)==null?void 0:s.call(this),this._runIfNeeded()}dispose(){this.disposed=!0;for(const e of this.dependencies)e.removeObserver(this);this.dependencies.clear()}_runIfNeeded(){var i,n;if(this.state===3)return;const e=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=e,this.state=3;const t=this.disposed;try{if(!t){(i=fue())==null||i.handleAutorunTriggered(this);const s=this.changeSummary;this.changeSummary=(n=this.createChangeSummary)==null?void 0:n.call(this),this._runFn(this,s)}}finally{for(const s of this.dependenciesToBeRemoved)s.removeObserver(this);this.dependenciesToBeRemoved.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(){this.state===3&&(this.state=1),this.updateCount++}endUpdate(){if(this.updateCount===1)do{if(this.state===1){this.state=3;for(const e of this.dependencies)if(e.reportChanges(),this.state===2)break}this._runIfNeeded()}while(this.state!==3);this.updateCount--,cC(()=>this.updateCount>=0)}handlePossibleChange(e){this.state===3&&this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)&&(this.state=1)}handleChange(e,t){this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)&&(!this._handleChange||this._handleChange({changedObservable:e,change:t,didChange:n=>n===e},this.changeSummary))&&(this.state=2)}readObservable(e){if(this.disposed)return e.get();e.addObserver(this);const t=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),t}}(function(o){o.Observer=E4})(bt||(bt={}));function Cc(o){return new rOe(o)}class rOe extends mue{constructor(e){super(),this.value=e}get debugName(){return this.toString()}get(){return this.value}addObserver(e){}removeObserver(e){}toString(){return`Const: ${this.value}`}}function Ni(...o){let e,t,i;return o.length===3?[e,t,i]=o:[t,i]=o,new Jp(new er(e,void 0,i),t,i,()=>Jp.globalTransaction,jl)}function aOe(o,e,t){return new Jp(new er(o.owner,o.debugName,o.debugReferenceFn??t),e,t,()=>Jp.globalTransaction,o.equalsFn??jl)}class Jp extends XS{constructor(e,t,i,n,s){super(),this._debugNameData=e,this.event=t,this._getValue=i,this._getTransaction=n,this._equalityComparator=s,this.hasValue=!1,this.handleEvent=r=>{const a=this._getValue(r),l=this.value;(!this.hasValue||!this._equalityComparator(l,a))&&(this.value=a,this.hasValue&&gC(this._getTransaction(),u=>{for(const f of this.observers)u.updateObserver(f,this),f.handleChange(this,void 0)},()=>{const u=this.getDebugName();return"Event fired"+(u?`: ${u}`:"")}),this.hasValue=!0)}}getDebugName(){return this._debugNameData.getDebugName(this)}get debugName(){const e=this.getDebugName();return"From Event"+(e?`: ${e}`:"")}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0,this.hasValue=!1,this.value=void 0}get(){return this.subscription?(this.hasValue||this.handleEvent(void 0),this.value):this._getValue(void 0)}}(function(o){o.Observer=Jp;function e(t,i){let n=!1;Jp.globalTransaction===void 0&&(Jp.globalTransaction=t,n=!0);try{i()}finally{n&&(Jp.globalTransaction=void 0)}}o.batchEventsGlobally=e})(Ni||(Ni={}));function No(o,e){return new lOe(o,e)}class lOe extends XS{constructor(e,t){super(),this.debugName=e,this.event=t,this.handleEvent=()=>{Mn(i=>{for(const n of this.observers)i.updateObserver(n,this),n.handleChange(this,void 0)},()=>this.debugName)}}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0}get(){}}function JS(o){return typeof o=="string"?new qne(o):new qne(void 0,o)}class qne extends XS{get debugName(){return new er(this._owner,this._debugName,void 0).getDebugName(this)??"Observable Signal"}toString(){return this.debugName}constructor(e,t){super(),this._debugName=e,this._owner=t}trigger(e,t){if(!e){Mn(i=>{this.trigger(i,t)},()=>`Trigger signal ${this.debugName}`);return}for(const i of this.observers)e.updateObserver(i,this),i.handleChange(this,t)}get(){}}function cOe(o){const e=new bue(!1,void 0);return o.addObserver(e),it(()=>{o.removeObserver(e)})}tOe(cOe);function e0(o,e){const t=new bue(!0,e);return o.addObserver(t),e?e(o.get()):o.reportChanges(),it(()=>{o.removeObserver(t)})}eOe(e0);class bue{constructor(e,t){this._forceRecompute=e,this._handleValue=t,this._counter=0}beginUpdate(e){this._counter++}endUpdate(e){this._counter--,this._counter===0&&this._forceRecompute&&(this._handleValue?this._handleValue(e.get()):e.reportChanges())}handlePossibleChange(e){}handleChange(e,t){}}function uI(o,e){let t;return Ml({owner:o,debugReferenceFn:e},n=>(t=e(n,t),t))}function dOe(o,e,t,i){let n=new Kne(t,i);return Ml({debugReferenceFn:t,owner:o,onLastObserverRemoved:()=>{n.dispose(),n=new Kne(t)}},r=>(n.setItems(e.read(r)),n.getItems()))}class Kne{constructor(e,t){this._map=e,this._keySelector=t,this._cache=new Map,this._items=[]}dispose(){this._cache.forEach(e=>e.store.dispose()),this._cache.clear()}setItems(e){const t=[],i=new Set(this._cache.keys());for(const n of e){const s=this._keySelector?this._keySelector(n):n;let r=this._cache.get(s);if(r)i.delete(s);else{const a=new le;r={out:this._map(n,a),store:a},this._cache.set(s,r)}t.push(r.out)}for(const n of i)this._cache.get(n).store.dispose(),this._cache.delete(n);this._items=t}getItems(){return this._items}}function uOe(o,e){return uI(o,(t,i)=>i??e(t))}class I4{static fromFn(e){return new I4(e())}constructor(e){this._value=Wt(this,void 0),this.promiseResult=this._value,this.promise=e.then(t=>(Mn(i=>{this._value.set(new Gne(t,void 0),i)}),t),t=>{throw Mn(i=>{this._value.set(new Gne(void 0,t),i)}),t})}}class Gne{constructor(e,t){this.data=e,this.error=t}}function Cue(o,e,t,i){return e||(e=n=>n!=null),new Promise((n,s)=>{let r=!0,a=!1;const l=o.map(u=>({isFinished:e(u),error:t?t(u):!1,state:u})),c=bt(u=>{const{isFinished:f,error:g,state:p}=l.read(u);(f||g)&&(r?a=!0:c.dispose(),g?s(g===!0?p:g):n(p))});if(i){const u=i.onCancellationRequested(()=>{c.dispose(),u.dispose(),s(new ad)});if(i.isCancellationRequested){c.dispose(),u.dispose(),s(new ad);return}}r=!1,a&&c.dispose()})}class hOe extends XS{get debugName(){return this._debugNameData.getDebugName(this)??"LazyObservableValue"}constructor(e,t,i){super(),this._debugNameData=e,this._equalityComparator=i,this._isUpToDate=!0,this._deltas=[],this._updateCounter=0,this._value=t}get(){return this._update(),this._value}_update(){if(!this._isUpToDate)if(this._isUpToDate=!0,this._deltas.length>0){for(const e of this.observers)for(const t of this._deltas)e.handleChange(this,t);this._deltas.length=0}else for(const e of this.observers)e.handleChange(this,void 0)}_beginUpdate(){if(this._updateCounter++,this._updateCounter===1)for(const e of this.observers)e.beginUpdate(this)}_endUpdate(){if(this._updateCounter--,this._updateCounter===0){this._update();const e=[...this.observers];for(const t of e)t.endUpdate(this)}}addObserver(e){const t=!this.observers.has(e)&&this._updateCounter>0;super.addObserver(e),t&&e.beginUpdate(this)}removeObserver(e){const t=this.observers.has(e)&&this._updateCounter>0;super.removeObserver(e),t&&e.endUpdate(this)}set(e,t,i){if(i===void 0&&this._equalityComparator(this._value,e))return;let n;t||(t=n=new QS(()=>{},()=>`Setting ${this.debugName}`));try{if(this._isUpToDate=!1,this._setValue(e),i!==void 0&&this._deltas.push(i),t.updateObserver({beginUpdate:()=>this._beginUpdate(),endUpdate:()=>this._endUpdate(),handleChange:(s,r)=>{},handlePossibleChange:s=>{}},this),this._updateCounter>1)for(const s of this.observers)s.handlePossibleChange(this)}finally{n&&n.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(e){this._value=e}}function w6(o,e){return o.lazy?new hOe(new er(o.owner,o.debugName,void 0),e,o.equalsFn??jl):new BK(new er(o.owner,o.debugName,void 0),e,o.equalsFn??jl)}const Kk=class Kk extends X{constructor(e=!1){super(),this._onDidRequestBasicLanguageFeatures=this._register(new Y),this.onDidRequestBasicLanguageFeatures=this._onDidRequestBasicLanguageFeatures.event,this._onDidRequestRichLanguageFeatures=this._register(new Y),this.onDidRequestRichLanguageFeatures=this._onDidRequestRichLanguageFeatures.event,this._onDidChange=this._register(new Y({leakWarningThreshold:200})),this.onDidChange=this._onDidChange.event,this._requestedBasicLanguages=new Set,this._requestedRichLanguages=new Set,Kk.instanceCount++,this._registry=this._register(new v6(!0,e)),this.languageIdCodec=this._registry.languageIdCodec,this._register(this._registry.onDidChange(()=>this._onDidChange.fire()))}dispose(){Kk.instanceCount--,super.dispose()}isRegisteredLanguageId(e){return this._registry.isRegisteredLanguageId(e)}getLanguageIdByLanguageName(e){return this._registry.getLanguageIdByLanguageName(e)}getLanguageIdByMimeType(e){return this._registry.getLanguageIdByMimeType(e)}guessLanguageIdByFilepathOrFirstLine(e,t){const i=this._registry.guessLanguageIdByFilepathOrFirstLine(e,t);return bq(i,null)}createById(e){return new Yne(this.onDidChange,()=>this._createAndGetLanguageIdentifier(e))}createByFilepathOrFirstLine(e,t){return new Yne(this.onDidChange,()=>{const i=this.guessLanguageIdByFilepathOrFirstLine(e,t);return this._createAndGetLanguageIdentifier(i)})}_createAndGetLanguageIdentifier(e){return(!e||!this.isRegisteredLanguageId(e))&&(e=Xr),e}requestBasicLanguageFeatures(e){this._requestedBasicLanguages.has(e)||(this._requestedBasicLanguages.add(e),this._onDidRequestBasicLanguageFeatures.fire(e))}requestRichLanguageFeatures(e){this._requestedRichLanguages.has(e)||(this._requestedRichLanguages.add(e),this.requestBasicLanguageFeatures(e),Kn.getOrCreate(e),this._onDidRequestRichLanguageFeatures.fire(e))}};Kk.instanceCount=0;let S6=Kk;class Yne{constructor(e,t){this._value=Ni(this,e,()=>t()),this.onDidChange=Ee.fromObservable(this._value)}get languageId(){return this._value.get()}}const BD={RESOURCES:"ResourceURLs",DOWNLOAD_URL:"DownloadURL",FILES:"Files",TEXT:ss.text,INTERNAL_URI_LIST:"application/vnd.code.uri-list"},fOe=()=>({get delay(){return-1},dispose:()=>{},showHover:()=>{}});let T4=fOe;const gOe=new fu(()=>T4("mouse",!1)),pOe=new fu(()=>T4("element",!1));function mOe(o){T4=o}function sa(o){return o==="element"?pOe.value:gOe.value}function gS(){return T4("element",!0)}let yue={showHover:()=>{},hideHover:()=>{},showAndFocusLastHover:()=>{},setupManagedHover:()=>null,showManagedHover:()=>{}};function _Oe(o){yue=o}function Su(){return yue}class vOe{constructor(e){this.spliceables=e}splice(e,t,i){this.spliceables.forEach(n=>n.splice(e,t,i))}}class q_ extends Error{constructor(e,t){super(`ListError [${e}] ${t}`)}}function Zne(o,e){const t=[];for(const i of e){if(o.start>=i.range.end)continue;if(o.end<i.range.start)break;const n=Go.intersect(o,i.range);Go.isEmpty(n)||t.push({range:n,size:i.size})}return t}function L6({start:o,end:e},t){return{start:o+t,end:e+t}}function bOe(o){const e=[];let t=null;for(const i of o){const n=i.range.start,s=i.range.end,r=i.size;if(t&&r===t.size){t.range.end=s;continue}t={range:{start:n,end:s},size:r},e.push(t)}return e}function COe(...o){return bOe(o.reduce((e,t)=>e.concat(t),[]))}class yOe{get paddingTop(){return this._paddingTop}set paddingTop(e){this._size=this._size+e-this._paddingTop,this._paddingTop=e}constructor(e){this.groups=[],this._size=0,this._paddingTop=0,this._paddingTop=e??0,this._size=this._paddingTop}splice(e,t,i=[]){const n=i.length-t,s=Zne({start:0,end:e},this.groups),r=Zne({start:e+t,end:Number.POSITIVE_INFINITY},this.groups).map(l=>({range:L6(l.range,n),size:l.size})),a=i.map((l,c)=>({range:{start:e+c,end:e+c+1},size:l.size}));this.groups=COe(s,a,r),this._size=this._paddingTop+this.groups.reduce((l,c)=>l+c.size*(c.range.end-c.range.start),0)}get count(){const e=this.groups.length;return e?this.groups[e-1].range.end:0}get size(){return this._size}indexAt(e){if(e<0)return-1;if(e<this._paddingTop)return 0;let t=0,i=this._paddingTop;for(const n of this.groups){const s=n.range.end-n.range.start,r=i+s*n.size;if(e<r)return t+Math.floor((e-i)/n.size);t+=s,i=r}return t}indexAfter(e){return Math.min(this.indexAt(e)+1,this.count)}positionAt(e){if(e<0)return-1;let t=0,i=0;for(const n of this.groups){const s=n.range.end-n.range.start,r=i+s;if(e<r)return this._paddingTop+t+(e-i)*n.size;t+=s*n.size,i=r}return-1}}class wOe{constructor(e){this.renderers=e,this.cache=new Map,this.transactionNodesPendingRemoval=new Set,this.inTransaction=!1}alloc(e){let t=this.getTemplateCache(e).pop(),i=!1;if(t)i=this.transactionNodesPendingRemoval.has(t.domNode),i&&this.transactionNodesPendingRemoval.delete(t.domNode);else{const n=xe(".monaco-list-row"),r=this.getRenderer(e).renderTemplate(n);t={domNode:n,templateId:e,templateData:r}}return{row:t,isReusingConnectedDomNode:i}}release(e){e&&this.releaseRow(e)}transact(e){if(this.inTransaction)throw new Error("Already in transaction");this.inTransaction=!0;try{e()}finally{for(const t of this.transactionNodesPendingRemoval)this.doRemoveNode(t);this.transactionNodesPendingRemoval.clear(),this.inTransaction=!1}}releaseRow(e){const{domNode:t,templateId:i}=e;t&&(this.inTransaction?this.transactionNodesPendingRemoval.add(t):this.doRemoveNode(t)),this.getTemplateCache(i).push(e)}doRemoveNode(e){e.classList.remove("scrolling"),e.remove()}getTemplateCache(e){let t=this.cache.get(e);return t||(t=[],this.cache.set(e,t)),t}dispose(){this.cache.forEach((e,t)=>{for(const i of e)this.getRenderer(t).disposeTemplate(i.templateData),i.templateData=null}),this.cache.clear(),this.transactionNodesPendingRemoval.clear()}getRenderer(e){const t=this.renderers.get(e);if(!t)throw new Error(`No renderer found for ${e}`);return t}}var Og=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};const K_={CurrentDragAndDropData:void 0},ju={useShadows:!0,verticalScrollMode:1,setRowLineHeight:!0,setRowHeight:!0,supportDynamicHeights:!1,dnd:{getDragElements(o){return[o]},getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){},dispose(){}},horizontalScrolling:!1,transformOptimization:!0,alwaysConsumeMouseWheel:!0};class hI{constructor(e){this.elements=e}update(){}getData(){return this.elements}}class SOe{constructor(e){this.elements=e}update(){}getData(){return this.elements}}class LOe{constructor(){this.types=[],this.files=[]}update(e){if(e.types&&this.types.splice(0,this.types.length,...e.types),e.files){this.files.splice(0,this.files.length);for(let t=0;t<e.files.length;t++){const i=e.files.item(t);i&&(i.size||i.type)&&this.files.push(i)}}}getData(){return{types:this.types,files:this.files}}}function xOe(o,e){return Array.isArray(o)&&Array.isArray(e)?En(o,e):o===e}class kOe{constructor(e){e!=null&&e.getSetSize?this.getSetSize=e.getSetSize.bind(e):this.getSetSize=(t,i,n)=>n,e!=null&&e.getPosInSet?this.getPosInSet=e.getPosInSet.bind(e):this.getPosInSet=(t,i)=>i+1,e!=null&&e.getRole?this.getRole=e.getRole.bind(e):this.getRole=t=>"listitem",e!=null&&e.isChecked?this.isChecked=e.isChecked.bind(e):this.isChecked=t=>{}}}const v2=class v2{get contentHeight(){return this.rangeMap.size}get onDidScroll(){return this.scrollableElement.onScroll}get scrollableElementDomNode(){return this.scrollableElement.getDomNode()}get horizontalScrolling(){return this._horizontalScrolling}set horizontalScrolling(e){if(e!==this._horizontalScrolling){if(e&&this.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");if(this._horizontalScrolling=e,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this._horizontalScrolling){for(const t of this.items)this.measureItemWidth(t);this.updateScrollWidth(),this.scrollableElement.setScrollDimensions({width:jH(this.domNode)}),this.rowsContainer.style.width=`${Math.max(this.scrollWidth||0,this.renderWidth)}px`}else this.scrollableElementWidthDelayer.cancel(),this.scrollableElement.setScrollDimensions({width:this.renderWidth,scrollWidth:this.renderWidth}),this.rowsContainer.style.width=""}}constructor(e,t,i,n=ju){var r,a;if(this.virtualDelegate=t,this.domId=`list_id_${++v2.InstanceCount}`,this.renderers=new Map,this.renderWidth=0,this._scrollHeight=0,this.scrollableElementUpdateDisposable=null,this.scrollableElementWidthDelayer=new xc(50),this.splicing=!1,this.dragOverAnimationStopDisposable=X.None,this.dragOverMouseY=0,this.canDrop=!1,this.currentDragFeedbackDisposable=X.None,this.onDragLeaveTimeout=X.None,this.disposables=new le,this._onDidChangeContentHeight=new Y,this._onDidChangeContentWidth=new Y,this.onDidChangeContentHeight=Ee.latch(this._onDidChangeContentHeight.event,void 0,this.disposables),this._horizontalScrolling=!1,n.horizontalScrolling&&n.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");this.items=[],this.itemId=0,this.rangeMap=this.createRangeMap(n.paddingTop??0);for(const l of i)this.renderers.set(l.templateId,l);this.cache=this.disposables.add(new wOe(this.renderers)),this.lastRenderTop=0,this.lastRenderHeight=0,this.domNode=document.createElement("div"),this.domNode.className="monaco-list",this.domNode.classList.add(this.domId),this.domNode.tabIndex=0,this.domNode.classList.toggle("mouse-support",typeof n.mouseSupport=="boolean"?n.mouseSupport:!0),this._horizontalScrolling=n.horizontalScrolling??ju.horizontalScrolling,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this.paddingBottom=typeof n.paddingBottom>"u"?0:n.paddingBottom,this.accessibilityProvider=new kOe(n.accessibilityProvider),this.rowsContainer=document.createElement("div"),this.rowsContainer.className="monaco-list-rows",(n.transformOptimization??ju.transformOptimization)&&(this.rowsContainer.style.transform="translate3d(0px, 0px, 0px)",this.rowsContainer.style.overflow="hidden",this.rowsContainer.style.contain="strict"),this.disposables.add(Jo.addTarget(this.rowsContainer)),this.scrollable=this.disposables.add(new ZS({forceIntegerValues:!0,smoothScrollDuration:n.smoothScrolling??!1?125:0,scheduleAtNextAnimationFrame:l=>al(at(this.domNode),l)})),this.scrollableElement=this.disposables.add(new b4(this.rowsContainer,{alwaysConsumeMouseWheel:n.alwaysConsumeMouseWheel??ju.alwaysConsumeMouseWheel,horizontal:1,vertical:n.verticalScrollMode??ju.verticalScrollMode,useShadows:n.useShadows??ju.useShadows,mouseWheelScrollSensitivity:n.mouseWheelScrollSensitivity,fastScrollSensitivity:n.fastScrollSensitivity,scrollByPage:n.scrollByPage},this.scrollable)),this.domNode.appendChild(this.scrollableElement.getDomNode()),e.appendChild(this.domNode),this.scrollableElement.onScroll(this.onScroll,this,this.disposables),this.disposables.add(se(this.rowsContainer,tn.Change,l=>this.onTouchChange(l))),this.disposables.add(se(this.scrollableElement.getDomNode(),"scroll",l=>l.target.scrollTop=0)),this.disposables.add(se(this.domNode,"dragover",l=>this.onDragOver(this.toDragEvent(l)))),this.disposables.add(se(this.domNode,"drop",l=>this.onDrop(this.toDragEvent(l)))),this.disposables.add(se(this.domNode,"dragleave",l=>this.onDragLeave(this.toDragEvent(l)))),this.disposables.add(se(this.domNode,"dragend",l=>this.onDragEnd(l))),this.setRowLineHeight=n.setRowLineHeight??ju.setRowLineHeight,this.setRowHeight=n.setRowHeight??ju.setRowHeight,this.supportDynamicHeights=n.supportDynamicHeights??ju.supportDynamicHeights,this.dnd=n.dnd??this.disposables.add(ju.dnd),this.layout((r=n.initialSize)==null?void 0:r.height,(a=n.initialSize)==null?void 0:a.width)}updateOptions(e){e.paddingBottom!==void 0&&(this.paddingBottom=e.paddingBottom,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),e.smoothScrolling!==void 0&&this.scrollable.setSmoothScrollDuration(e.smoothScrolling?125:0),e.horizontalScrolling!==void 0&&(this.horizontalScrolling=e.horizontalScrolling);let t;if(e.scrollByPage!==void 0&&(t={...t??{},scrollByPage:e.scrollByPage}),e.mouseWheelScrollSensitivity!==void 0&&(t={...t??{},mouseWheelScrollSensitivity:e.mouseWheelScrollSensitivity}),e.fastScrollSensitivity!==void 0&&(t={...t??{},fastScrollSensitivity:e.fastScrollSensitivity}),t&&this.scrollableElement.updateOptions(t),e.paddingTop!==void 0&&e.paddingTop!==this.rangeMap.paddingTop){const i=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),n=e.paddingTop-this.rangeMap.paddingTop;this.rangeMap.paddingTop=e.paddingTop,this.render(i,Math.max(0,this.lastRenderTop+n),this.lastRenderHeight,void 0,void 0,!0),this.setScrollTop(this.lastRenderTop),this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.lastRenderTop,this.lastRenderHeight)}}createRangeMap(e){return new yOe(e)}splice(e,t,i=[]){if(this.splicing)throw new Error("Can't run recursive splices.");this.splicing=!0;try{return this._splice(e,t,i)}finally{this.splicing=!1,this._onDidChangeContentHeight.fire(this.contentHeight)}}_splice(e,t,i=[]){const n=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),s={start:e,end:e+t},r=Go.intersect(n,s),a=new Map;for(let E=r.end-1;E>=r.start;E--){const N=this.items[E];if(N.dragStartDisposable.dispose(),N.checkedDisposable.dispose(),N.row){let A=a.get(N.templateId);A||(A=[],a.set(N.templateId,A));const P=this.renderers.get(N.templateId);P&&P.disposeElement&&P.disposeElement(N.element,E,N.row.templateData,N.size),A.unshift(N.row)}N.row=null,N.stale=!0}const l={start:e+t,end:this.items.length},c=Go.intersect(l,n),u=Go.relativeComplement(l,n),f=i.map(E=>({id:String(this.itemId++),element:E,templateId:this.virtualDelegate.getTemplateId(E),size:this.virtualDelegate.getHeight(E),width:void 0,hasDynamicHeight:!!this.virtualDelegate.hasDynamicHeight&&this.virtualDelegate.hasDynamicHeight(E),lastDynamicHeightWidth:void 0,row:null,uri:void 0,dropTarget:!1,dragStartDisposable:X.None,checkedDisposable:X.None,stale:!1}));let g;e===0&&t>=this.items.length?(this.rangeMap=this.createRangeMap(this.rangeMap.paddingTop),this.rangeMap.splice(0,0,f),g=this.items,this.items=f):(this.rangeMap.splice(e,t,f),g=this.items.splice(e,t,...f));const p=i.length-t,_=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),b=L6(c,p),y=Go.intersect(_,b);for(let E=y.start;E<y.end;E++)this.updateItemInDOM(this.items[E],E);const S=Go.relativeComplement(b,_);for(const E of S)for(let N=E.start;N<E.end;N++)this.removeItemFromDOM(N);const L=u.map(E=>L6(E,p)),k=[{start:e,end:e+i.length},...L].map(E=>Go.intersect(_,E)).reverse();for(const E of k)for(let N=E.end-1;N>=E.start;N--){const A=this.items[N],P=a.get(A.templateId),H=P==null?void 0:P.pop();this.insertItemInDOM(N,H)}for(const E of a.values())for(const N of E)this.cache.release(N);return this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight),g.map(E=>E.element)}eventuallyUpdateScrollDimensions(){this._scrollHeight=this.contentHeight,this.rowsContainer.style.height=`${this._scrollHeight}px`,this.scrollableElementUpdateDisposable||(this.scrollableElementUpdateDisposable=al(at(this.domNode),()=>{this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight}),this.updateScrollWidth(),this.scrollableElementUpdateDisposable=null}))}eventuallyUpdateScrollWidth(){if(!this.horizontalScrolling){this.scrollableElementWidthDelayer.cancel();return}this.scrollableElementWidthDelayer.trigger(()=>this.updateScrollWidth())}updateScrollWidth(){if(!this.horizontalScrolling)return;let e=0;for(const t of this.items)typeof t.width<"u"&&(e=Math.max(e,t.width));this.scrollWidth=e,this.scrollableElement.setScrollDimensions({scrollWidth:e===0?0:e+10}),this._onDidChangeContentWidth.fire(this.scrollWidth)}rerender(){if(this.supportDynamicHeights){for(const e of this.items)e.lastDynamicHeightWidth=void 0;this._rerender(this.lastRenderTop,this.lastRenderHeight)}}get length(){return this.items.length}get renderHeight(){return this.scrollableElement.getScrollDimensions().height}get firstVisibleIndex(){return this.getRenderRange(this.lastRenderTop,this.lastRenderHeight).start}element(e){return this.items[e].element}indexOf(e){return this.items.findIndex(t=>t.element===e)}domElement(e){const t=this.items[e].row;return t&&t.domNode}elementHeight(e){return this.items[e].size}elementTop(e){return this.rangeMap.positionAt(e)}indexAt(e){return this.rangeMap.indexAt(e)}indexAfter(e){return this.rangeMap.indexAfter(e)}layout(e,t){const i={height:typeof e=="number"?e:KDe(this.domNode)};this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,i.scrollHeight=this.scrollHeight),this.scrollableElement.setScrollDimensions(i),typeof t<"u"&&(this.renderWidth=t,this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight)),this.horizontalScrolling&&this.scrollableElement.setScrollDimensions({width:typeof t=="number"?t:jH(this.domNode)})}render(e,t,i,n,s,r=!1){const a=this.getRenderRange(t,i),l=Go.relativeComplement(a,e).reverse(),c=Go.relativeComplement(e,a);if(r){const u=Go.intersect(e,a);for(let f=u.start;f<u.end;f++)this.updateItemInDOM(this.items[f],f)}this.cache.transact(()=>{for(const u of c)for(let f=u.start;f<u.end;f++)this.removeItemFromDOM(f);for(const u of l)for(let f=u.end-1;f>=u.start;f--)this.insertItemInDOM(f)}),n!==void 0&&(this.rowsContainer.style.left=`-${n}px`),this.rowsContainer.style.top=`-${t}px`,this.horizontalScrolling&&s!==void 0&&(this.rowsContainer.style.width=`${Math.max(s,this.renderWidth)}px`),this.lastRenderTop=t,this.lastRenderHeight=i}insertItemInDOM(e,t){var l,c;const i=this.items[e];if(!i.row)if(t)i.row=t,i.stale=!0;else{const u=this.cache.alloc(i.templateId);i.row=u.row,i.stale||(i.stale=u.isReusingConnectedDomNode)}const n=this.accessibilityProvider.getRole(i.element)||"listitem";i.row.domNode.setAttribute("role",n);const s=this.accessibilityProvider.isChecked(i.element);if(typeof s=="boolean")i.row.domNode.setAttribute("aria-checked",String(!!s));else if(s){const u=f=>i.row.domNode.setAttribute("aria-checked",String(!!f));u(s.value),i.checkedDisposable=s.onDidChange(()=>u(s.value))}if(i.stale||!i.row.domNode.parentElement){const u=((c=(l=this.items.at(e+1))==null?void 0:l.row)==null?void 0:c.domNode)??null;(i.row.domNode.parentElement!==this.rowsContainer||i.row.domNode.nextElementSibling!==u)&&this.rowsContainer.insertBefore(i.row.domNode,u),i.stale=!1}this.updateItemInDOM(i,e);const r=this.renderers.get(i.templateId);if(!r)throw new Error(`No renderer found for template id ${i.templateId}`);r==null||r.renderElement(i.element,e,i.row.templateData,i.size);const a=this.dnd.getDragURI(i.element);i.dragStartDisposable.dispose(),i.row.domNode.draggable=!!a,a&&(i.dragStartDisposable=se(i.row.domNode,"dragstart",u=>this.onDragStart(i.element,a,u))),this.horizontalScrolling&&(this.measureItemWidth(i),this.eventuallyUpdateScrollWidth())}measureItemWidth(e){if(!e.row||!e.row.domNode)return;e.row.domNode.style.width="fit-content",e.width=jH(e.row.domNode);const t=at(e.row.domNode).getComputedStyle(e.row.domNode);t.paddingLeft&&(e.width+=parseFloat(t.paddingLeft)),t.paddingRight&&(e.width+=parseFloat(t.paddingRight)),e.row.domNode.style.width=""}updateItemInDOM(e,t){e.row.domNode.style.top=`${this.elementTop(t)}px`,this.setRowHeight&&(e.row.domNode.style.height=`${e.size}px`),this.setRowLineHeight&&(e.row.domNode.style.lineHeight=`${e.size}px`),e.row.domNode.setAttribute("data-index",`${t}`),e.row.domNode.setAttribute("data-last-element",t===this.length-1?"true":"false"),e.row.domNode.setAttribute("data-parity",t%2===0?"even":"odd"),e.row.domNode.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(e.element,t,this.length))),e.row.domNode.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(e.element,t))),e.row.domNode.setAttribute("id",this.getElementDomId(t)),e.row.domNode.classList.toggle("drop-target",e.dropTarget)}removeItemFromDOM(e){const t=this.items[e];if(t.dragStartDisposable.dispose(),t.checkedDisposable.dispose(),t.row){const i=this.renderers.get(t.templateId);i&&i.disposeElement&&i.disposeElement(t.element,e,t.row.templateData,t.size),this.cache.release(t.row),t.row=null}this.horizontalScrolling&&this.eventuallyUpdateScrollWidth()}getScrollTop(){return this.scrollableElement.getScrollPosition().scrollTop}setScrollTop(e,t){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),this.scrollableElement.setScrollPosition({scrollTop:e,reuseAnimation:t})}get scrollTop(){return this.getScrollTop()}set scrollTop(e){this.setScrollTop(e)}get scrollHeight(){return this._scrollHeight+(this.horizontalScrolling?10:0)+this.paddingBottom}get onMouseClick(){return Ee.map(this.disposables.add(new Zt(this.domNode,"click")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseDblClick(){return Ee.map(this.disposables.add(new Zt(this.domNode,"dblclick")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseMiddleClick(){return Ee.filter(Ee.map(this.disposables.add(new Zt(this.domNode,"auxclick")).event,e=>this.toMouseEvent(e),this.disposables),e=>e.browserEvent.button===1,this.disposables)}get onMouseDown(){return Ee.map(this.disposables.add(new Zt(this.domNode,"mousedown")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseOver(){return Ee.map(this.disposables.add(new Zt(this.domNode,"mouseover")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseOut(){return Ee.map(this.disposables.add(new Zt(this.domNode,"mouseout")).event,e=>this.toMouseEvent(e),this.disposables)}get onContextMenu(){return Ee.any(Ee.map(this.disposables.add(new Zt(this.domNode,"contextmenu")).event,e=>this.toMouseEvent(e),this.disposables),Ee.map(this.disposables.add(new Zt(this.domNode,tn.Contextmenu)).event,e=>this.toGestureEvent(e),this.disposables))}get onTouchStart(){return Ee.map(this.disposables.add(new Zt(this.domNode,"touchstart")).event,e=>this.toTouchEvent(e),this.disposables)}get onTap(){return Ee.map(this.disposables.add(new Zt(this.rowsContainer,tn.Tap)).event,e=>this.toGestureEvent(e),this.disposables)}toMouseEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),i=typeof t>"u"?void 0:this.items[t],n=i&&i.element;return{browserEvent:e,index:t,element:n}}toTouchEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),i=typeof t>"u"?void 0:this.items[t],n=i&&i.element;return{browserEvent:e,index:t,element:n}}toGestureEvent(e){const t=this.getItemIndexFromEventTarget(e.initialTarget||null),i=typeof t>"u"?void 0:this.items[t],n=i&&i.element;return{browserEvent:e,index:t,element:n}}toDragEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),i=typeof t>"u"?void 0:this.items[t],n=i&&i.element,s=this.getTargetSector(e,t);return{browserEvent:e,index:t,element:n,sector:s}}onScroll(e){try{const t=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);this.render(t,e.scrollTop,e.height,e.scrollLeft,e.scrollWidth),this.supportDynamicHeights&&this._rerender(e.scrollTop,e.height,e.inSmoothScrolling)}catch(t){throw console.error("Got bad scroll event:",e),t}}onTouchChange(e){e.preventDefault(),e.stopPropagation(),this.scrollTop-=e.translationY}onDragStart(e,t,i){var s,r;if(!i.dataTransfer)return;const n=this.dnd.getDragElements(e);if(i.dataTransfer.effectAllowed="copyMove",i.dataTransfer.setData(BD.TEXT,t),i.dataTransfer.setDragImage){let a;this.dnd.getDragLabel&&(a=this.dnd.getDragLabel(n,i)),typeof a>"u"&&(a=String(n.length));const l=xe(".monaco-drag-image");l.textContent=a,(f=>{for(;f&&!f.classList.contains("monaco-workbench");)f=f.parentElement;return f||this.domNode.ownerDocument})(this.domNode).appendChild(l),i.dataTransfer.setDragImage(l,-10,-10),setTimeout(()=>l.remove(),0)}this.domNode.classList.add("dragging"),this.currentDragData=new hI(n),K_.CurrentDragAndDropData=new SOe(n),(r=(s=this.dnd).onDragStart)==null||r.call(s,this.currentDragData,i)}onDragOver(e){var s,r;if(e.browserEvent.preventDefault(),this.onDragLeaveTimeout.dispose(),K_.CurrentDragAndDropData&&K_.CurrentDragAndDropData.getData()==="vscode-ui"||(this.setupDragAndDropScrollTopAnimation(e.browserEvent),!e.browserEvent.dataTransfer))return!1;if(!this.currentDragData)if(K_.CurrentDragAndDropData)this.currentDragData=K_.CurrentDragAndDropData;else{if(!e.browserEvent.dataTransfer.types)return!1;this.currentDragData=new LOe}const t=this.dnd.onDragOver(this.currentDragData,e.element,e.index,e.sector,e.browserEvent);if(this.canDrop=typeof t=="boolean"?t:t.accept,!this.canDrop)return this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),!1;e.browserEvent.dataTransfer.dropEffect=typeof t!="boolean"&&((s=t.effect)==null?void 0:s.type)===0?"copy":"move";let i;typeof t!="boolean"&&t.feedback?i=t.feedback:typeof e.index>"u"?i=[-1]:i=[e.index],i=bg(i).filter(a=>a>=-1&&a<this.length).sort((a,l)=>a-l),i=i[0]===-1?[-1]:i;let n=typeof t!="boolean"&&t.effect&&t.effect.position?t.effect.position:"drop-target";if(xOe(this.currentDragFeedback,i)&&this.currentDragFeedbackPosition===n)return!0;if(this.currentDragFeedback=i,this.currentDragFeedbackPosition=n,this.currentDragFeedbackDisposable.dispose(),i[0]===-1)this.domNode.classList.add(n),this.rowsContainer.classList.add(n),this.currentDragFeedbackDisposable=it(()=>{this.domNode.classList.remove(n),this.rowsContainer.classList.remove(n)});else{if(i.length>1&&n!=="drop-target")throw new Error("Can't use multiple feedbacks with position different than 'over'");n==="drop-target-after"&&i[0]<this.length-1&&(i[0]+=1,n="drop-target-before");for(const a of i){const l=this.items[a];l.dropTarget=!0,(r=l.row)==null||r.domNode.classList.add(n)}this.currentDragFeedbackDisposable=it(()=>{var a;for(const l of i){const c=this.items[l];c.dropTarget=!1,(a=c.row)==null||a.domNode.classList.remove(n)}})}return!0}onDragLeave(e){var t,i;this.onDragLeaveTimeout.dispose(),this.onDragLeaveTimeout=Bm(()=>this.clearDragOverFeedback(),100,this.disposables),this.currentDragData&&((i=(t=this.dnd).onDragLeave)==null||i.call(t,this.currentDragData,e.element,e.index,e.browserEvent))}onDrop(e){if(!this.canDrop)return;const t=this.currentDragData;this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,K_.CurrentDragAndDropData=void 0,!(!t||!e.browserEvent.dataTransfer)&&(e.browserEvent.preventDefault(),t.update(e.browserEvent.dataTransfer),this.dnd.drop(t,e.element,e.index,e.sector,e.browserEvent))}onDragEnd(e){var t,i;this.canDrop=!1,this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,K_.CurrentDragAndDropData=void 0,(i=(t=this.dnd).onDragEnd)==null||i.call(t,e)}clearDragOverFeedback(){this.currentDragFeedback=void 0,this.currentDragFeedbackPosition=void 0,this.currentDragFeedbackDisposable.dispose(),this.currentDragFeedbackDisposable=X.None}setupDragAndDropScrollTopAnimation(e){if(!this.dragOverAnimationDisposable){const t=vce(this.domNode).top;this.dragOverAnimationDisposable=rEe(at(this.domNode),this.animateDragAndDropScrollTop.bind(this,t))}this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationStopDisposable=Bm(()=>{this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)},1e3,this.disposables),this.dragOverMouseY=e.pageY}animateDragAndDropScrollTop(e){if(this.dragOverMouseY===void 0)return;const t=this.dragOverMouseY-e,i=this.renderHeight-35;t<35?this.scrollTop+=Math.max(-14,Math.floor(.3*(t-35))):t>i&&(this.scrollTop+=Math.min(14,Math.floor(.3*(t-i))))}teardownDragAndDropScrollTopAnimation(){this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)}getTargetSector(e,t){if(t===void 0)return;const i=e.offsetY/this.items[t].size,n=Math.floor(i/.25);return Wr(n,0,3)}getItemIndexFromEventTarget(e){const t=this.scrollableElement.getDomNode();let i=e;for(;(Ys(i)||JDe(i))&&i!==this.rowsContainer&&t.contains(i);){const n=i.getAttribute("data-index");if(n){const s=Number(n);if(!isNaN(s))return s}i=i.parentElement}}getRenderRange(e,t){return{start:this.rangeMap.indexAt(e),end:this.rangeMap.indexAfter(e+t-1)}}_rerender(e,t,i){const n=this.getRenderRange(e,t);let s,r;e===this.elementTop(n.start)?(s=n.start,r=0):n.end-n.start>1&&(s=n.start+1,r=this.elementTop(s)-e);let a=0;for(;;){const l=this.getRenderRange(e,t);let c=!1;for(let u=l.start;u<l.end;u++){const f=this.probeDynamicHeight(u);f!==0&&this.rangeMap.splice(u,1,[this.items[u]]),a+=f,c=c||f!==0}if(!c){a!==0&&this.eventuallyUpdateScrollDimensions();const u=Go.relativeComplement(n,l);for(const g of u)for(let p=g.start;p<g.end;p++)this.items[p].row&&this.removeItemFromDOM(p);const f=Go.relativeComplement(l,n).reverse();for(const g of f)for(let p=g.end-1;p>=g.start;p--)this.insertItemInDOM(p);for(let g=l.start;g<l.end;g++)this.items[g].row&&this.updateItemInDOM(this.items[g],g);if(typeof s=="number"){const g=this.scrollable.getFutureScrollPosition().scrollTop-e,p=this.elementTop(s)-r+g;this.setScrollTop(p,i)}this._onDidChangeContentHeight.fire(this.contentHeight);return}}}probeDynamicHeight(e){var r,a,l;const t=this.items[e];if(this.virtualDelegate.getDynamicHeight){const c=this.virtualDelegate.getDynamicHeight(t.element);if(c!==null){const u=t.size;return t.size=c,t.lastDynamicHeightWidth=this.renderWidth,c-u}}if(!t.hasDynamicHeight||t.lastDynamicHeightWidth===this.renderWidth||this.virtualDelegate.hasDynamicHeight&&!this.virtualDelegate.hasDynamicHeight(t.element))return 0;const i=t.size;if(t.row)return t.row.domNode.style.height="",t.size=t.row.domNode.offsetHeight,t.size===0&&!Ks(t.row.domNode,at(t.row.domNode).document.body)&&console.warn("Measuring item node that is not in DOM! Add ListView to the DOM before measuring row height!",new Error().stack),t.lastDynamicHeightWidth=this.renderWidth,t.size-i;const{row:n}=this.cache.alloc(t.templateId);n.domNode.style.height="",this.rowsContainer.appendChild(n.domNode);const s=this.renderers.get(t.templateId);if(!s)throw new wi("Missing renderer for templateId: "+t.templateId);return s.renderElement(t.element,e,n.templateData,void 0),t.size=n.domNode.offsetHeight,(r=s.disposeElement)==null||r.call(s,t.element,e,n.templateData,void 0),(l=(a=this.virtualDelegate).setDynamicHeight)==null||l.call(a,t.element,t.size),t.lastDynamicHeightWidth=this.renderWidth,n.domNode.remove(),this.cache.release(n),t.size-i}getElementDomId(e){return`${this.domId}_${e}`}dispose(){var e,t,i;for(const n of this.items)if(n.dragStartDisposable.dispose(),n.checkedDisposable.dispose(),n.row){const s=this.renderers.get(n.row.templateId);s&&((e=s.disposeElement)==null||e.call(s,n.element,-1,n.row.templateData,void 0),s.disposeTemplate(n.row.templateData))}this.items=[],(t=this.domNode)==null||t.remove(),(i=this.dragOverAnimationDisposable)==null||i.dispose(),this.disposables.dispose()}};v2.InstanceCount=0;let hd=v2;Og([gs],hd.prototype,"onMouseClick",null);Og([gs],hd.prototype,"onMouseDblClick",null);Og([gs],hd.prototype,"onMouseMiddleClick",null);Og([gs],hd.prototype,"onMouseDown",null);Og([gs],hd.prototype,"onMouseOver",null);Og([gs],hd.prototype,"onMouseOut",null);Og([gs],hd.prototype,"onContextMenu",null);Og([gs],hd.prototype,"onTouchStart",null);Og([gs],hd.prototype,"onTap",null);var s_=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class DOe{constructor(e){this.trait=e,this.renderedElements=[]}get templateId(){return`template:${this.trait.name}`}renderTemplate(e){return e}renderElement(e,t,i){const n=this.renderedElements.findIndex(s=>s.templateData===i);if(n>=0){const s=this.renderedElements[n];this.trait.unrender(i),s.index=t}else{const s={index:t,templateData:i};this.renderedElements.push(s)}this.trait.renderIndex(t,i)}splice(e,t,i){const n=[];for(const s of this.renderedElements)s.index<e?n.push(s):s.index>=e+t&&n.push({index:s.index+i-t,templateData:s.templateData});this.renderedElements=n}renderIndexes(e){for(const{index:t,templateData:i}of this.renderedElements)e.indexOf(t)>-1&&this.trait.renderIndex(t,i)}disposeTemplate(e){const t=this.renderedElements.findIndex(i=>i.templateData===e);t<0||this.renderedElements.splice(t,1)}}let XA=class{get name(){return this._trait}get renderer(){return new DOe(this)}constructor(e){this._trait=e,this.indexes=[],this.sortedIndexes=[],this._onChange=new Y,this.onChange=this._onChange.event}splice(e,t,i){const n=i.length-t,s=e+t,r=[];let a=0;for(;a<this.sortedIndexes.length&&this.sortedIndexes[a]<e;)r.push(this.sortedIndexes[a++]);for(let l=0;l<i.length;l++)i[l]&&r.push(l+e);for(;a<this.sortedIndexes.length&&this.sortedIndexes[a]>=s;)r.push(this.sortedIndexes[a++]+n);this.renderer.splice(e,t,i.length),this._set(r,r)}renderIndex(e,t){t.classList.toggle(this._trait,this.contains(e))}unrender(e){e.classList.remove(this._trait)}set(e,t){return this._set(e,[...e].sort(Qne),t)}_set(e,t,i){const n=this.indexes,s=this.sortedIndexes;this.indexes=e,this.sortedIndexes=t;const r=x6(s,e);return this.renderer.renderIndexes(r),this._onChange.fire({indexes:e,browserEvent:i}),n}get(){return this.indexes}contains(e){return oD(this.sortedIndexes,e,Qne)>=0}dispose(){$i(this._onChange)}};s_([gs],XA.prototype,"renderer",null);class EOe extends XA{constructor(e){super("selected"),this.setAriaSelected=e}renderIndex(e,t){super.renderIndex(e,t),this.setAriaSelected&&(this.contains(e)?t.setAttribute("aria-selected","true"):t.setAttribute("aria-selected","false"))}}class S7{constructor(e,t,i){this.trait=e,this.view=t,this.identityProvider=i}splice(e,t,i){if(!this.identityProvider)return this.trait.splice(e,t,new Array(i.length).fill(!1));const n=this.trait.get().map(a=>this.identityProvider.getId(this.view.element(a)).toString());if(n.length===0)return this.trait.splice(e,t,new Array(i.length).fill(!1));const s=new Set(n),r=i.map(a=>s.has(this.identityProvider.getId(a).toString()));this.trait.splice(e,t,r)}}function hm(o){return o.tagName==="INPUT"||o.tagName==="TEXTAREA"}function fI(o,e){return o.classList.contains(e)?!0:o.classList.contains("monaco-list")||!o.parentElement?!1:fI(o.parentElement,e)}function Wx(o){return fI(o,"monaco-editor")}function IOe(o){return fI(o,"monaco-custom-toggle")}function TOe(o){return fI(o,"action-item")}function ck(o){return fI(o,"monaco-tree-sticky-row")}function WD(o){return o.classList.contains("monaco-tree-sticky-container")}function wue(o){return o.tagName==="A"&&o.classList.contains("monaco-button")||o.tagName==="DIV"&&o.classList.contains("monaco-button-dropdown")?!0:o.classList.contains("monaco-list")||!o.parentElement?!1:wue(o.parentElement)}class Sue{get onKeyDown(){return Ee.chain(this.disposables.add(new Zt(this.view.domNode,"keydown")).event,e=>e.filter(t=>!hm(t.target)).map(t=>new Zi(t)))}constructor(e,t,i){this.list=e,this.view=t,this.disposables=new le,this.multipleSelectionDisposables=new le,this.multipleSelectionSupport=i.multipleSelectionSupport,this.disposables.add(this.onKeyDown(n=>{switch(n.keyCode){case 3:return this.onEnter(n);case 16:return this.onUpArrow(n);case 18:return this.onDownArrow(n);case 11:return this.onPageUpArrow(n);case 12:return this.onPageDownArrow(n);case 9:return this.onEscape(n);case 31:this.multipleSelectionSupport&&(Kt?n.metaKey:n.ctrlKey)&&this.onCtrlA(n)}}))}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionSupport=e.multipleSelectionSupport)}onEnter(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(this.list.getFocus(),e.browserEvent)}onUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPrevious(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNext(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPreviousPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNextPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onCtrlA(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(va(this.list.length),e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus()}onEscape(e){this.list.getSelection().length&&(e.preventDefault(),e.stopPropagation(),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus())}dispose(){this.disposables.dispose(),this.multipleSelectionDisposables.dispose()}}s_([gs],Sue.prototype,"onKeyDown",null);var Ch;(function(o){o[o.Automatic=0]="Automatic",o[o.Trigger=1]="Trigger"})(Ch||(Ch={}));var Pw;(function(o){o[o.Idle=0]="Idle",o[o.Typing=1]="Typing"})(Pw||(Pw={}));const NOe=new class{mightProducePrintableCharacter(o){return o.ctrlKey||o.metaKey||o.altKey?!1:o.keyCode>=31&&o.keyCode<=56||o.keyCode>=21&&o.keyCode<=30||o.keyCode>=98&&o.keyCode<=107||o.keyCode>=85&&o.keyCode<=95}};class ROe{constructor(e,t,i,n,s){this.list=e,this.view=t,this.keyboardNavigationLabelProvider=i,this.keyboardNavigationEventFilter=n,this.delegate=s,this.enabled=!1,this.state=Pw.Idle,this.mode=Ch.Automatic,this.triggered=!1,this.previouslyFocused=-1,this.enabledDisposables=new le,this.disposables=new le,this.updateOptions(e.options)}updateOptions(e){e.typeNavigationEnabled??!0?this.enable():this.disable(),this.mode=e.typeNavigationMode??Ch.Automatic}enable(){if(this.enabled)return;let e=!1;const t=Ee.chain(this.enabledDisposables.add(new Zt(this.view.domNode,"keydown")).event,s=>s.filter(r=>!hm(r.target)).filter(()=>this.mode===Ch.Automatic||this.triggered).map(r=>new Zi(r)).filter(r=>e||this.keyboardNavigationEventFilter(r)).filter(r=>this.delegate.mightProducePrintableCharacter(r)).forEach(r=>Jt.stop(r,!0)).map(r=>r.browserEvent.key)),i=Ee.debounce(t,()=>null,800,void 0,void 0,void 0,this.enabledDisposables);Ee.reduce(Ee.any(t,i),(s,r)=>r===null?null:(s||"")+r,void 0,this.enabledDisposables)(this.onInput,this,this.enabledDisposables),i(this.onClear,this,this.enabledDisposables),t(()=>e=!0,void 0,this.enabledDisposables),i(()=>e=!1,void 0,this.enabledDisposables),this.enabled=!0,this.triggered=!1}disable(){this.enabled&&(this.enabledDisposables.clear(),this.enabled=!1,this.triggered=!1)}onClear(){var t;const e=this.list.getFocus();if(e.length>0&&e[0]===this.previouslyFocused){const i=(t=this.list.options.accessibilityProvider)==null?void 0:t.getAriaLabel(this.list.element(e[0]));typeof i=="string"?ta(i):i&&ta(i.get())}this.previouslyFocused=-1}onInput(e){if(!e){this.state=Pw.Idle,this.triggered=!1;return}const t=this.list.getFocus(),i=t.length>0?t[0]:0,n=this.state===Pw.Idle?1:0;this.state=Pw.Typing;for(let s=0;s<this.list.length;s++){const r=(i+s+n)%this.list.length,a=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(r)),l=a&&a.toString();if(this.list.options.typeNavigationEnabled){if(typeof l<"u"){if(RD(e,l)){this.previouslyFocused=i,this.list.setFocus([r]),this.list.reveal(r);return}const c=JMe(e,l);if(c&&c[0].end-c[0].start>1&&c.length===1){this.previouslyFocused=i,this.list.setFocus([r]),this.list.reveal(r);return}}}else if(typeof l>"u"||RD(e,l)){this.previouslyFocused=i,this.list.setFocus([r]),this.list.reveal(r);return}}}dispose(){this.disable(),this.enabledDisposables.dispose(),this.disposables.dispose()}}class MOe{constructor(e,t){this.list=e,this.view=t,this.disposables=new le;const i=Ee.chain(this.disposables.add(new Zt(t.domNode,"keydown")).event,s=>s.filter(r=>!hm(r.target)).map(r=>new Zi(r)));Ee.chain(i,s=>s.filter(r=>r.keyCode===2&&!r.ctrlKey&&!r.metaKey&&!r.shiftKey&&!r.altKey))(this.onTab,this,this.disposables)}onTab(e){if(e.target!==this.view.domNode)return;const t=this.list.getFocus();if(t.length===0)return;const i=this.view.domElement(t[0]);if(!i)return;const n=i.querySelector("[tabIndex]");if(!n||!Ys(n)||n.tabIndex===-1)return;const s=at(n).getComputedStyle(n);s.visibility==="hidden"||s.display==="none"||(e.preventDefault(),e.stopPropagation(),n.focus())}dispose(){this.disposables.dispose()}}function Lue(o){return Kt?o.browserEvent.metaKey:o.browserEvent.ctrlKey}function xue(o){return o.browserEvent.shiftKey}function AOe(o){return jq(o)&&o.button===2}const Xne={isSelectionSingleChangeEvent:Lue,isSelectionRangeChangeEvent:xue};class kue{constructor(e){this.list=e,this.disposables=new le,this._onPointer=new Y,this.onPointer=this._onPointer.event,e.options.multipleSelectionSupport!==!1&&(this.multipleSelectionController=this.list.options.multipleSelectionController||Xne),this.mouseSupport=typeof e.options.mouseSupport>"u"||!!e.options.mouseSupport,this.mouseSupport&&(e.onMouseDown(this.onMouseDown,this,this.disposables),e.onContextMenu(this.onContextMenu,this,this.disposables),e.onMouseDblClick(this.onDoubleClick,this,this.disposables),e.onTouchStart(this.onMouseDown,this,this.disposables),this.disposables.add(Jo.addTarget(e.getHTMLElement()))),Ee.any(e.onMouseClick,e.onMouseMiddleClick,e.onTap)(this.onViewPointer,this,this.disposables)}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionController=void 0,e.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||Xne))}isSelectionSingleChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionSingleChangeEvent(e):!1}isSelectionRangeChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionRangeChangeEvent(e):!1}isSelectionChangeEvent(e){return this.isSelectionSingleChangeEvent(e)||this.isSelectionRangeChangeEvent(e)}onMouseDown(e){Wx(e.browserEvent.target)||Mo()!==e.browserEvent.target&&this.list.domFocus()}onContextMenu(e){if(hm(e.browserEvent.target)||Wx(e.browserEvent.target))return;const t=typeof e.index>"u"?[]:[e.index];this.list.setFocus(t,e.browserEvent)}onViewPointer(e){if(!this.mouseSupport||hm(e.browserEvent.target)||Wx(e.browserEvent.target)||e.browserEvent.isHandledByList)return;e.browserEvent.isHandledByList=!0;const t=e.index;if(typeof t>"u"){this.list.setFocus([],e.browserEvent),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0);return}if(this.isSelectionChangeEvent(e))return this.changeSelection(e);this.list.setFocus([t],e.browserEvent),this.list.setAnchor(t),AOe(e.browserEvent)||this.list.setSelection([t],e.browserEvent),this._onPointer.fire(e)}onDoubleClick(e){if(hm(e.browserEvent.target)||Wx(e.browserEvent.target)||this.isSelectionChangeEvent(e)||e.browserEvent.isHandledByList)return;e.browserEvent.isHandledByList=!0;const t=this.list.getFocus();this.list.setSelection(t,e.browserEvent)}changeSelection(e){const t=e.index;let i=this.list.getAnchor();if(this.isSelectionRangeChangeEvent(e)){typeof i>"u"&&(i=this.list.getFocus()[0]??t,this.list.setAnchor(i));const n=Math.min(i,t),s=Math.max(i,t),r=va(n,s+1),a=this.list.getSelection(),l=FOe(x6(a,[i]),i);if(l.length===0)return;const c=x6(r,BOe(a,l));this.list.setSelection(c,e.browserEvent),this.list.setFocus([t],e.browserEvent)}else if(this.isSelectionSingleChangeEvent(e)){const n=this.list.getSelection(),s=n.filter(r=>r!==t);this.list.setFocus([t]),this.list.setAnchor(t),n.length===s.length?this.list.setSelection([...s,t],e.browserEvent):this.list.setSelection(s,e.browserEvent)}}dispose(){this.disposables.dispose()}}class Due{constructor(e,t){this.styleElement=e,this.selectorSuffix=t}style(e){const t=this.selectorSuffix&&`.${this.selectorSuffix}`,i=[];e.listBackground&&i.push(`.monaco-list${t} .monaco-list-rows { background: ${e.listBackground}; }`),e.listFocusBackground&&(i.push(`.monaco-list${t}:focus .monaco-list-row.focused { background-color: ${e.listFocusBackground}; }`),i.push(`.monaco-list${t}:focus .monaco-list-row.focused:hover { background-color: ${e.listFocusBackground}; }`)),e.listFocusForeground&&i.push(`.monaco-list${t}:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),e.listActiveSelectionBackground&&(i.push(`.monaco-list${t}:focus .monaco-list-row.selected { background-color: ${e.listActiveSelectionBackground}; }`),i.push(`.monaco-list${t}:focus .monaco-list-row.selected:hover { background-color: ${e.listActiveSelectionBackground}; }`)),e.listActiveSelectionForeground&&i.push(`.monaco-list${t}:focus .monaco-list-row.selected { color: ${e.listActiveSelectionForeground}; }`),e.listActiveSelectionIconForeground&&i.push(`.monaco-list${t}:focus .monaco-list-row.selected .codicon { color: ${e.listActiveSelectionIconForeground}; }`),e.listFocusAndSelectionBackground&&i.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.selected.focused { background-color: ${e.listFocusAndSelectionBackground}; }
			`),e.listFocusAndSelectionForeground&&i.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.selected.focused { color: ${e.listFocusAndSelectionForeground}; }
			`),e.listInactiveFocusForeground&&(i.push(`.monaco-list${t} .monaco-list-row.focused { color:  ${e.listInactiveFocusForeground}; }`),i.push(`.monaco-list${t} .monaco-list-row.focused:hover { color:  ${e.listInactiveFocusForeground}; }`)),e.listInactiveSelectionIconForeground&&i.push(`.monaco-list${t} .monaco-list-row.focused .codicon { color:  ${e.listInactiveSelectionIconForeground}; }`),e.listInactiveFocusBackground&&(i.push(`.monaco-list${t} .monaco-list-row.focused { background-color:  ${e.listInactiveFocusBackground}; }`),i.push(`.monaco-list${t} .monaco-list-row.focused:hover { background-color:  ${e.listInactiveFocusBackground}; }`)),e.listInactiveSelectionBackground&&(i.push(`.monaco-list${t} .monaco-list-row.selected { background-color:  ${e.listInactiveSelectionBackground}; }`),i.push(`.monaco-list${t} .monaco-list-row.selected:hover { background-color:  ${e.listInactiveSelectionBackground}; }`)),e.listInactiveSelectionForeground&&i.push(`.monaco-list${t} .monaco-list-row.selected { color: ${e.listInactiveSelectionForeground}; }`),e.listHoverBackground&&i.push(`.monaco-list${t}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ${e.listHoverBackground}; }`),e.listHoverForeground&&i.push(`.monaco-list${t}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { color:  ${e.listHoverForeground}; }`);const n=fg(e.listFocusAndSelectionOutline,fg(e.listSelectionOutline,e.listFocusOutline??""));n&&i.push(`.monaco-list${t}:focus .monaco-list-row.focused.selected { outline: 1px solid ${n}; outline-offset: -1px;}`),e.listFocusOutline&&i.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
				.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
			`);const s=fg(e.listSelectionOutline,e.listInactiveFocusOutline??"");s&&i.push(`.monaco-list${t} .monaco-list-row.focused.selected { outline: 1px dotted ${s}; outline-offset: -1px; }`),e.listSelectionOutline&&i.push(`.monaco-list${t} .monaco-list-row.selected { outline: 1px dotted ${e.listSelectionOutline}; outline-offset: -1px; }`),e.listInactiveFocusOutline&&i.push(`.monaco-list${t} .monaco-list-row.focused { outline: 1px dotted ${e.listInactiveFocusOutline}; outline-offset: -1px; }`),e.listHoverOutline&&i.push(`.monaco-list${t} .monaco-list-row:hover { outline: 1px dashed ${e.listHoverOutline}; outline-offset: -1px; }`),e.listDropOverBackground&&i.push(`
				.monaco-list${t}.drop-target,
				.monaco-list${t} .monaco-list-rows.drop-target,
				.monaco-list${t} .monaco-list-row.drop-target { background-color: ${e.listDropOverBackground} !important; color: inherit !important; }
			`),e.listDropBetweenBackground&&(i.push(`
			.monaco-list${t} .monaco-list-rows.drop-target-before .monaco-list-row:first-child::before,
			.monaco-list${t} .monaco-list-row.drop-target-before::before {
				content: ""; position: absolute; top: 0px; left: 0px; width: 100%; height: 1px;
				background-color: ${e.listDropBetweenBackground};
			}`),i.push(`
			.monaco-list${t} .monaco-list-rows.drop-target-after .monaco-list-row:last-child::after,
			.monaco-list${t} .monaco-list-row.drop-target-after::after {
				content: ""; position: absolute; bottom: 0px; left: 0px; width: 100%; height: 1px;
				background-color: ${e.listDropBetweenBackground};
			}`)),e.tableColumnsBorder&&i.push(`
				.monaco-table > .monaco-split-view2,
				.monaco-table > .monaco-split-view2 .monaco-sash.vertical::before,
				.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2,
				.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: ${e.tableColumnsBorder};
				}

				.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2,
				.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: transparent;
				}
			`),e.tableOddRowsBackgroundColor&&i.push(`
				.monaco-table .monaco-list-row[data-parity=odd]:not(.focused):not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(:focus) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(.focused) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr {
					background-color: ${e.tableOddRowsBackgroundColor};
				}
			`),this.styleElement.textContent=i.join(`
`)}}const POe={listFocusBackground:"#7FB0D0",listActiveSelectionBackground:"#0E639C",listActiveSelectionForeground:"#FFFFFF",listActiveSelectionIconForeground:"#FFFFFF",listFocusAndSelectionOutline:"#90C2F9",listFocusAndSelectionBackground:"#094771",listFocusAndSelectionForeground:"#FFFFFF",listInactiveSelectionBackground:"#3F3F46",listInactiveSelectionIconForeground:"#FFFFFF",listHoverBackground:"#2A2D2E",listDropOverBackground:"#383B3D",listDropBetweenBackground:"#EEEEEE",treeIndentGuidesStroke:"#a9a9a9",treeInactiveIndentGuidesStroke:ue.fromHex("#a9a9a9").transparent(.4).toString(),tableColumnsBorder:ue.fromHex("#cccccc").transparent(.2).toString(),tableOddRowsBackgroundColor:ue.fromHex("#cccccc").transparent(.04).toString(),listBackground:void 0,listFocusForeground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusForeground:void 0,listInactiveFocusBackground:void 0,listHoverForeground:void 0,listFocusOutline:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listHoverOutline:void 0,treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:void 0},OOe={keyboardSupport:!0,mouseSupport:!0,multipleSelectionSupport:!0,dnd:{getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){},dispose(){}}};function FOe(o,e){const t=o.indexOf(e);if(t===-1)return[];const i=[];let n=t-1;for(;n>=0&&o[n]===e-(t-n);)i.push(o[n--]);for(i.reverse(),n=t;n<o.length&&o[n]===e+(n-t);)i.push(o[n++]);return i}function x6(o,e){const t=[];let i=0,n=0;for(;i<o.length||n<e.length;)if(i>=o.length)t.push(e[n++]);else if(n>=e.length)t.push(o[i++]);else if(o[i]===e[n]){t.push(o[i]),i++,n++;continue}else o[i]<e[n]?t.push(o[i++]):t.push(e[n++]);return t}function BOe(o,e){const t=[];let i=0,n=0;for(;i<o.length||n<e.length;)if(i>=o.length)t.push(e[n++]);else if(n>=e.length)t.push(o[i++]);else if(o[i]===e[n]){i++,n++;continue}else o[i]<e[n]?t.push(o[i++]):n++;return t}const Qne=(o,e)=>o-e;class WOe{constructor(e,t){this._templateId=e,this.renderers=t}get templateId(){return this._templateId}renderTemplate(e){return this.renderers.map(t=>t.renderTemplate(e))}renderElement(e,t,i,n){let s=0;for(const r of this.renderers)r.renderElement(e,t,i[s++],n)}disposeElement(e,t,i,n){var r;let s=0;for(const a of this.renderers)(r=a.disposeElement)==null||r.call(a,e,t,i[s],n),s+=1}disposeTemplate(e){let t=0;for(const i of this.renderers)i.disposeTemplate(e[t++])}}class HOe{constructor(e){this.accessibilityProvider=e,this.templateId="a18n"}renderTemplate(e){return{container:e,disposables:new le}}renderElement(e,t,i){const n=this.accessibilityProvider.getAriaLabel(e),s=n&&typeof n!="string"?n:Cc(n);i.disposables.add(bt(a=>{this.setAriaLabel(a.readObservable(s),i.container)}));const r=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(e);typeof r=="number"?i.container.setAttribute("aria-level",`${r}`):i.container.removeAttribute("aria-level")}setAriaLabel(e,t){e?t.setAttribute("aria-label",e):t.removeAttribute("aria-label")}disposeElement(e,t,i,n){i.disposables.clear()}disposeTemplate(e){e.disposables.dispose()}}class VOe{constructor(e,t){this.list=e,this.dnd=t}getDragElements(e){const t=this.list.getSelectedElements();return t.indexOf(e)>-1?t:[e]}getDragURI(e){return this.dnd.getDragURI(e)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e,t)}onDragStart(e,t){var i,n;(n=(i=this.dnd).onDragStart)==null||n.call(i,e,t)}onDragOver(e,t,i,n,s){return this.dnd.onDragOver(e,t,i,n,s)}onDragLeave(e,t,i,n){var s,r;(r=(s=this.dnd).onDragLeave)==null||r.call(s,e,t,i,n)}onDragEnd(e){var t,i;(i=(t=this.dnd).onDragEnd)==null||i.call(t,e)}drop(e,t,i,n,s){this.dnd.drop(e,t,i,n,s)}dispose(){this.dnd.dispose()}}class Xl{get onDidChangeFocus(){return Ee.map(this.eventBufferer.wrapEvent(this.focus.onChange),e=>this.toListEvent(e),this.disposables)}get onDidChangeSelection(){return Ee.map(this.eventBufferer.wrapEvent(this.selection.onChange),e=>this.toListEvent(e),this.disposables)}get domId(){return this.view.domId}get onDidScroll(){return this.view.onDidScroll}get onMouseClick(){return this.view.onMouseClick}get onMouseDblClick(){return this.view.onMouseDblClick}get onMouseMiddleClick(){return this.view.onMouseMiddleClick}get onPointer(){return this.mouseController.onPointer}get onMouseDown(){return this.view.onMouseDown}get onMouseOver(){return this.view.onMouseOver}get onMouseOut(){return this.view.onMouseOut}get onTouchStart(){return this.view.onTouchStart}get onTap(){return this.view.onTap}get onContextMenu(){let e=!1;const t=Ee.chain(this.disposables.add(new Zt(this.view.domNode,"keydown")).event,s=>s.map(r=>new Zi(r)).filter(r=>e=r.keyCode===58||r.shiftKey&&r.keyCode===68).map(r=>Jt.stop(r,!0)).filter(()=>!1)),i=Ee.chain(this.disposables.add(new Zt(this.view.domNode,"keyup")).event,s=>s.forEach(()=>e=!1).map(r=>new Zi(r)).filter(r=>r.keyCode===58||r.shiftKey&&r.keyCode===68).map(r=>Jt.stop(r,!0)).map(({browserEvent:r})=>{const a=this.getFocus(),l=a.length?a[0]:void 0,c=typeof l<"u"?this.view.element(l):void 0,u=typeof l<"u"?this.view.domElement(l):this.view.domNode;return{index:l,element:c,anchor:u,browserEvent:r}})),n=Ee.chain(this.view.onContextMenu,s=>s.filter(r=>!e).map(({element:r,index:a,browserEvent:l})=>({element:r,index:a,anchor:new td(at(this.view.domNode),l),browserEvent:l})));return Ee.any(t,i,n)}get onKeyDown(){return this.disposables.add(new Zt(this.view.domNode,"keydown")).event}get onDidFocus(){return Ee.signal(this.disposables.add(new Zt(this.view.domNode,"focus",!0)).event)}get onDidBlur(){return Ee.signal(this.disposables.add(new Zt(this.view.domNode,"blur",!0)).event)}constructor(e,t,i,n,s=OOe){var c,u,f;this.user=e,this._options=s,this.focus=new XA("focused"),this.anchor=new XA("anchor"),this.eventBufferer=new KE,this._ariaLabel="",this.disposables=new le,this._onDidDispose=new Y,this.onDidDispose=this._onDidDispose.event;const r=this._options.accessibilityProvider&&this._options.accessibilityProvider.getWidgetRole?(c=this._options.accessibilityProvider)==null?void 0:c.getWidgetRole():"list";this.selection=new EOe(r!=="listbox");const a=[this.focus.renderer,this.selection.renderer];this.accessibilityProvider=s.accessibilityProvider,this.accessibilityProvider&&(a.push(new HOe(this.accessibilityProvider)),(f=(u=this.accessibilityProvider).onDidChangeActiveDescendant)==null||f.call(u,this.onDidChangeActiveDescendant,this,this.disposables)),n=n.map(g=>new WOe(g.templateId,[...a,g]));const l={...s,dnd:s.dnd&&new VOe(this,s.dnd)};if(this.view=this.createListView(t,i,n,l),this.view.domNode.setAttribute("role",r),s.styleController)this.styleController=s.styleController(this.view.domId);else{const g=$l(this.view.domNode);this.styleController=new Due(g,this.view.domId)}if(this.spliceable=new vOe([new S7(this.focus,this.view,s.identityProvider),new S7(this.selection,this.view,s.identityProvider),new S7(this.anchor,this.view,s.identityProvider),this.view]),this.disposables.add(this.focus),this.disposables.add(this.selection),this.disposables.add(this.anchor),this.disposables.add(this.view),this.disposables.add(this._onDidDispose),this.disposables.add(new MOe(this,this.view)),(typeof s.keyboardSupport!="boolean"||s.keyboardSupport)&&(this.keyboardController=new Sue(this,this.view,s),this.disposables.add(this.keyboardController)),s.keyboardNavigationLabelProvider){const g=s.keyboardNavigationDelegate||NOe;this.typeNavigationController=new ROe(this,this.view,s.keyboardNavigationLabelProvider,s.keyboardNavigationEventFilter??(()=>!0),g),this.disposables.add(this.typeNavigationController)}this.mouseController=this.createMouseController(s),this.disposables.add(this.mouseController),this.onDidChangeFocus(this._onFocusChange,this,this.disposables),this.onDidChangeSelection(this._onSelectionChange,this,this.disposables),this.accessibilityProvider&&(this.ariaLabel=this.accessibilityProvider.getWidgetAriaLabel()),this._options.multipleSelectionSupport!==!1&&this.view.domNode.setAttribute("aria-multiselectable","true")}createListView(e,t,i,n){return new hd(e,t,i,n)}createMouseController(e){return new kue(this)}updateOptions(e={}){var t,i;this._options={...this._options,...e},(t=this.typeNavigationController)==null||t.updateOptions(this._options),this._options.multipleSelectionController!==void 0&&(this._options.multipleSelectionSupport?this.view.domNode.setAttribute("aria-multiselectable","true"):this.view.domNode.removeAttribute("aria-multiselectable")),this.mouseController.updateOptions(e),(i=this.keyboardController)==null||i.updateOptions(e),this.view.updateOptions(e)}get options(){return this._options}splice(e,t,i=[]){if(e<0||e>this.view.length)throw new q_(this.user,`Invalid start index: ${e}`);if(t<0)throw new q_(this.user,`Invalid delete count: ${t}`);t===0&&i.length===0||this.eventBufferer.bufferEvents(()=>this.spliceable.splice(e,t,i))}rerender(){this.view.rerender()}element(e){return this.view.element(e)}indexOf(e){return this.view.indexOf(e)}indexAt(e){return this.view.indexAt(e)}get length(){return this.view.length}get contentHeight(){return this.view.contentHeight}get onDidChangeContentHeight(){return this.view.onDidChangeContentHeight}get scrollTop(){return this.view.getScrollTop()}set scrollTop(e){this.view.setScrollTop(e)}get scrollHeight(){return this.view.scrollHeight}get renderHeight(){return this.view.renderHeight}get firstVisibleIndex(){return this.view.firstVisibleIndex}get ariaLabel(){return this._ariaLabel}set ariaLabel(e){this._ariaLabel=e,this.view.domNode.setAttribute("aria-label",e)}domFocus(){this.view.domNode.focus({preventScroll:!0})}layout(e,t){this.view.layout(e,t)}setSelection(e,t){for(const i of e)if(i<0||i>=this.length)throw new q_(this.user,`Invalid index ${i}`);this.selection.set(e,t)}getSelection(){return this.selection.get()}getSelectedElements(){return this.getSelection().map(e=>this.view.element(e))}setAnchor(e){if(typeof e>"u"){this.anchor.set([]);return}if(e<0||e>=this.length)throw new q_(this.user,`Invalid index ${e}`);this.anchor.set([e])}getAnchor(){return bq(this.anchor.get(),void 0)}getAnchorElement(){const e=this.getAnchor();return typeof e>"u"?void 0:this.element(e)}setFocus(e,t){for(const i of e)if(i<0||i>=this.length)throw new q_(this.user,`Invalid index ${i}`);this.focus.set(e,t)}focusNext(e=1,t=!1,i,n){if(this.length===0)return;const s=this.focus.get(),r=this.findNextIndex(s.length>0?s[0]+e:0,t,n);r>-1&&this.setFocus([r],i)}focusPrevious(e=1,t=!1,i,n){if(this.length===0)return;const s=this.focus.get(),r=this.findPreviousIndex(s.length>0?s[0]-e:0,t,n);r>-1&&this.setFocus([r],i)}async focusNextPage(e,t){let i=this.view.indexAt(this.view.getScrollTop()+this.view.renderHeight);i=i===0?0:i-1;const n=this.getFocus()[0];if(n!==i&&(n===void 0||i>n)){const s=this.findPreviousIndex(i,!1,t);s>-1&&n!==s?this.setFocus([s],e):this.setFocus([i],e)}else{const s=this.view.getScrollTop();let r=s+this.view.renderHeight;i>n&&(r-=this.view.elementHeight(i)),this.view.setScrollTop(r),this.view.getScrollTop()!==s&&(this.setFocus([]),await Sg(0),await this.focusNextPage(e,t))}}async focusPreviousPage(e,t,i=()=>0){let n;const s=i(),r=this.view.getScrollTop()+s;r===0?n=this.view.indexAt(r):n=this.view.indexAfter(r-1);const a=this.getFocus()[0];if(a!==n&&(a===void 0||a>=n)){const l=this.findNextIndex(n,!1,t);l>-1&&a!==l?this.setFocus([l],e):this.setFocus([n],e)}else{const l=r;this.view.setScrollTop(r-this.view.renderHeight-s),this.view.getScrollTop()+i()!==l&&(this.setFocus([]),await Sg(0),await this.focusPreviousPage(e,t,i))}}focusLast(e,t){if(this.length===0)return;const i=this.findPreviousIndex(this.length-1,!1,t);i>-1&&this.setFocus([i],e)}focusFirst(e,t){this.focusNth(0,e,t)}focusNth(e,t,i){if(this.length===0)return;const n=this.findNextIndex(e,!1,i);n>-1&&this.setFocus([n],t)}findNextIndex(e,t=!1,i){for(let n=0;n<this.length;n++){if(e>=this.length&&!t)return-1;if(e=e%this.length,!i||i(this.element(e)))return e;e++}return-1}findPreviousIndex(e,t=!1,i){for(let n=0;n<this.length;n++){if(e<0&&!t)return-1;if(e=(this.length+e%this.length)%this.length,!i||i(this.element(e)))return e;e--}return-1}getFocus(){return this.focus.get()}getFocusedElements(){return this.getFocus().map(e=>this.view.element(e))}reveal(e,t,i=0){if(e<0||e>=this.length)throw new q_(this.user,`Invalid index ${e}`);const n=this.view.getScrollTop(),s=this.view.elementTop(e),r=this.view.elementHeight(e);if(Rm(t)){const a=r-this.view.renderHeight+i;this.view.setScrollTop(a*Wr(t,0,1)+s-i)}else{const a=s+r,l=n+this.view.renderHeight;s<n+i&&a>=l||(s<n+i||a>=l&&r>=this.view.renderHeight?this.view.setScrollTop(s-i):a>=l&&this.view.setScrollTop(a-this.view.renderHeight))}}getRelativeTop(e,t=0){if(e<0||e>=this.length)throw new q_(this.user,`Invalid index ${e}`);const i=this.view.getScrollTop(),n=this.view.elementTop(e),s=this.view.elementHeight(e);if(n<i+t||n+s>i+this.view.renderHeight)return null;const r=s-this.view.renderHeight+t;return Math.abs((i+t-n)/r)}getHTMLElement(){return this.view.domNode}getScrollableElement(){return this.view.scrollableElementDomNode}getElementID(e){return this.view.getElementDomId(e)}getElementTop(e){return this.view.elementTop(e)}style(e){this.styleController.style(e)}toListEvent({indexes:e,browserEvent:t}){return{indexes:e,elements:e.map(i=>this.view.element(i)),browserEvent:t}}_onFocusChange(){const e=this.focus.get();this.view.domNode.classList.toggle("element-focused",e.length>0),this.onDidChangeActiveDescendant()}onDidChangeActiveDescendant(){var t;const e=this.focus.get();if(e.length>0){let i;(t=this.accessibilityProvider)!=null&&t.getActiveDescendantId&&(i=this.accessibilityProvider.getActiveDescendantId(this.view.element(e[0]))),this.view.domNode.setAttribute("aria-activedescendant",i||this.view.getElementDomId(e[0]))}else this.view.domNode.removeAttribute("aria-activedescendant")}_onSelectionChange(){const e=this.selection.get();this.view.domNode.classList.toggle("selection-none",e.length===0),this.view.domNode.classList.toggle("selection-single",e.length===1),this.view.domNode.classList.toggle("selection-multiple",e.length>1)}dispose(){this._onDidDispose.fire(),this.disposables.dispose(),this._onDidDispose.dispose()}}s_([gs],Xl.prototype,"onDidChangeFocus",null);s_([gs],Xl.prototype,"onDidChangeSelection",null);s_([gs],Xl.prototype,"onContextMenu",null);s_([gs],Xl.prototype,"onKeyDown",null);s_([gs],Xl.prototype,"onDidFocus",null);s_([gs],Xl.prototype,"onDidBlur",null);const Pv=xe,Eue="selectOption.entry.template";class zOe{get templateId(){return Eue}renderTemplate(e){const t=Object.create(null);return t.root=e,t.text=ge(e,Pv(".option-text")),t.detail=ge(e,Pv(".option-detail")),t.decoratorRight=ge(e,Pv(".option-decorator-right")),t}renderElement(e,t,i){const n=i,s=e.text,r=e.detail,a=e.decoratorRight,l=e.isDisabled;n.text.textContent=s,n.detail.textContent=r||"",n.decoratorRight.innerText=a||"",l?n.root.classList.add("option-disabled"):n.root.classList.remove("option-disabled")}disposeTemplate(e){}}const sh=class sh extends X{constructor(e,t,i,n,s){super(),this.options=[],this._currentSelection=0,this._hasDetails=!1,this._skipLayout=!1,this._sticky=!1,this._isVisible=!1,this.styles=n,this.selectBoxOptions=s||Object.create(null),typeof this.selectBoxOptions.minBottomMargin!="number"?this.selectBoxOptions.minBottomMargin=sh.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN:this.selectBoxOptions.minBottomMargin<0&&(this.selectBoxOptions.minBottomMargin=0),this.selectElement=document.createElement("select"),this.selectElement.className="monaco-select-box monaco-select-box-dropdown-padding",typeof this.selectBoxOptions.ariaLabel=="string"&&this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel),typeof this.selectBoxOptions.ariaDescription=="string"&&this.selectElement.setAttribute("aria-description",this.selectBoxOptions.ariaDescription),this._onDidSelect=new Y,this._register(this._onDidSelect),this.registerListeners(),this.constructSelectDropDown(i),this.selected=t||0,e&&this.setOptions(e,t),this.initStyleSheet()}setTitle(e){!this._hover&&e?this._hover=this._register(Su().setupManagedHover(sa("mouse"),this.selectElement,e)):this._hover&&this._hover.update(e)}getHeight(){return 22}getTemplateId(){return Eue}constructSelectDropDown(e){this.contextViewProvider=e,this.selectDropDownContainer=xe(".monaco-select-box-dropdown-container"),this.selectDropDownContainer.classList.add("monaco-select-box-dropdown-padding"),this.selectionDetailsPane=ge(this.selectDropDownContainer,Pv(".select-box-details-pane"));const t=ge(this.selectDropDownContainer,Pv(".select-box-dropdown-container-width-control")),i=ge(t,Pv(".width-control-div"));this.widthControlElement=document.createElement("span"),this.widthControlElement.className="option-text-width-control",ge(i,this.widthControlElement),this._dropDownPosition=0,this.styleElement=$l(this.selectDropDownContainer),this.selectDropDownContainer.setAttribute("draggable","true"),this._register(se(this.selectDropDownContainer,Le.DRAG_START,n=>{Jt.stop(n,!0)}))}registerListeners(){this._register(Bn(this.selectElement,"change",t=>{this.selected=t.target.selectedIndex,this._onDidSelect.fire({index:t.target.selectedIndex,selected:t.target.value}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)})),this._register(se(this.selectElement,Le.CLICK,t=>{Jt.stop(t),this._isVisible?this.hideSelectDropDown(!0):this.showSelectDropDown()})),this._register(se(this.selectElement,Le.MOUSE_DOWN,t=>{Jt.stop(t)}));let e;this._register(se(this.selectElement,"touchstart",t=>{e=this._isVisible})),this._register(se(this.selectElement,"touchend",t=>{Jt.stop(t),e?this.hideSelectDropDown(!0):this.showSelectDropDown()})),this._register(se(this.selectElement,Le.KEY_DOWN,t=>{const i=new Zi(t);let n=!1;Kt?(i.keyCode===18||i.keyCode===16||i.keyCode===10||i.keyCode===3)&&(n=!0):(i.keyCode===18&&i.altKey||i.keyCode===16&&i.altKey||i.keyCode===10||i.keyCode===3)&&(n=!0),n&&(this.showSelectDropDown(),Jt.stop(t,!0))}))}get onDidSelect(){return this._onDidSelect.event}setOptions(e,t){En(this.options,e)||(this.options=e,this.selectElement.options.length=0,this._hasDetails=!1,this._cachedMaxDetailsHeight=void 0,this.options.forEach((i,n)=>{this.selectElement.add(this.createOption(i.text,n,i.isDisabled)),typeof i.description=="string"&&(this._hasDetails=!0)})),t!==void 0&&(this.select(t),this._currentSelection=this.selected)}setOptionsList(){var e;(e=this.selectList)==null||e.splice(0,this.selectList.length,this.options)}select(e){e>=0&&e<this.options.length?this.selected=e:e>this.options.length-1?this.select(this.options.length-1):this.selected<0&&(this.selected=0),this.selectElement.selectedIndex=this.selected,this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)}focus(){this.selectElement&&(this.selectElement.tabIndex=0,this.selectElement.focus())}blur(){this.selectElement&&(this.selectElement.tabIndex=-1,this.selectElement.blur())}setFocusable(e){this.selectElement.tabIndex=e?0:-1}render(e){this.container=e,e.classList.add("select-container"),e.appendChild(this.selectElement),this.styleSelectElement()}initStyleSheet(){const e=[];this.styles.listFocusBackground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { background-color: ${this.styles.listFocusBackground} !important; }`),this.styles.listFocusForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { color: ${this.styles.listFocusForeground} !important; }`),this.styles.decoratorRightForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.focused) .option-decorator-right { color: ${this.styles.decoratorRightForeground}; }`),this.styles.selectBackground&&this.styles.selectBorder&&this.styles.selectBorder!==this.styles.selectBackground?(e.push(`.monaco-select-box-dropdown-container { border: 1px solid ${this.styles.selectBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectBorder} } `)):this.styles.selectListBorder&&(e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectListBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectListBorder} } `)),this.styles.listHoverForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { color: ${this.styles.listHoverForeground} !important; }`),this.styles.listHoverBackground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { background-color: ${this.styles.listHoverBackground} !important; }`),this.styles.listFocusOutline&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { outline: 1.6px dotted ${this.styles.listFocusOutline} !important; outline-offset: -1.6px !important; }`),this.styles.listHoverOutline&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { outline: 1.6px dashed ${this.styles.listHoverOutline} !important; outline-offset: -1.6px !important; }`),e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled.focused { background-color: transparent !important; color: inherit !important; outline: none !important; }"),e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled:hover { background-color: transparent !important; color: inherit !important; outline: none !important; }"),this.styleElement.textContent=e.join(`
`)}styleSelectElement(){const e=this.styles.selectBackground??"",t=this.styles.selectForeground??"",i=this.styles.selectBorder??"";this.selectElement.style.backgroundColor=e,this.selectElement.style.color=t,this.selectElement.style.borderColor=i}styleList(){const e=this.styles.selectBackground??"",t=fg(this.styles.selectListBackground,e);this.selectDropDownListContainer.style.backgroundColor=t,this.selectionDetailsPane.style.backgroundColor=t;const i=this.styles.focusBorder??"";this.selectDropDownContainer.style.outlineColor=i,this.selectDropDownContainer.style.outlineOffset="-1px",this.selectList.style(this.styles)}createOption(e,t,i){const n=document.createElement("option");return n.value=e,n.text=e,n.disabled=!!i,n}showSelectDropDown(){this.selectionDetailsPane.innerText="",!(!this.contextViewProvider||this._isVisible)&&(this.createSelectList(this.selectDropDownContainer),this.setOptionsList(),this.contextViewProvider.showContextView({getAnchor:()=>this.selectElement,render:e=>this.renderSelectDropDown(e,!0),layout:()=>{this.layoutSelectDropDown()},onHide:()=>{this.selectDropDownContainer.classList.remove("visible"),this.selectElement.classList.remove("synthetic-focus")},anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._isVisible=!0,this.hideSelectDropDown(!1),this.contextViewProvider.showContextView({getAnchor:()=>this.selectElement,render:e=>this.renderSelectDropDown(e),layout:()=>this.layoutSelectDropDown(),onHide:()=>{this.selectDropDownContainer.classList.remove("visible"),this.selectElement.classList.remove("synthetic-focus")},anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._currentSelection=this.selected,this._isVisible=!0,this.selectElement.setAttribute("aria-expanded","true"))}hideSelectDropDown(e){!this.contextViewProvider||!this._isVisible||(this._isVisible=!1,this.selectElement.setAttribute("aria-expanded","false"),e&&this.selectElement.focus(),this.contextViewProvider.hideContextView())}renderSelectDropDown(e,t){return e.appendChild(this.selectDropDownContainer),this.layoutSelectDropDown(t),{dispose:()=>{this.selectDropDownContainer.remove()}}}measureMaxDetailsHeight(){let e=0;return this.options.forEach((t,i)=>{this.updateDetail(i),this.selectionDetailsPane.offsetHeight>e&&(e=this.selectionDetailsPane.offsetHeight)}),e}layoutSelectDropDown(e){if(this._skipLayout)return!1;if(this.selectList){this.selectDropDownContainer.classList.add("visible");const t=at(this.selectElement),i=os(this.selectElement),n=at(this.selectElement).getComputedStyle(this.selectElement),s=parseFloat(n.getPropertyValue("--dropdown-padding-top"))+parseFloat(n.getPropertyValue("--dropdown-padding-bottom")),r=t.innerHeight-i.top-i.height-(this.selectBoxOptions.minBottomMargin||0),a=i.top-sh.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN,l=this.selectElement.offsetWidth,c=this.setWidthControlElement(this.widthControlElement),u=Math.max(c,Math.round(l)).toString()+"px";this.selectDropDownContainer.style.width=u,this.selectList.getHTMLElement().style.height="",this.selectList.layout();let f=this.selectList.contentHeight;this._hasDetails&&this._cachedMaxDetailsHeight===void 0&&(this._cachedMaxDetailsHeight=this.measureMaxDetailsHeight());const g=this._hasDetails?this._cachedMaxDetailsHeight:0,p=f+s+g,_=Math.floor((r-s-g)/this.getHeight()),b=Math.floor((a-s-g)/this.getHeight());if(e)return i.top+i.height>t.innerHeight-22||i.top<sh.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||_<1&&b<1?!1:(_<sh.DEFAULT_MINIMUM_VISIBLE_OPTIONS&&b>_&&this.options.length>_?(this._dropDownPosition=1,this.selectDropDownListContainer.remove(),this.selectionDetailsPane.remove(),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectionDetailsPane.classList.remove("border-top"),this.selectionDetailsPane.classList.add("border-bottom")):(this._dropDownPosition=0,this.selectDropDownListContainer.remove(),this.selectionDetailsPane.remove(),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectionDetailsPane.classList.remove("border-bottom"),this.selectionDetailsPane.classList.add("border-top")),!0);if(i.top+i.height>t.innerHeight-22||i.top<sh.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||this._dropDownPosition===0&&_<1||this._dropDownPosition===1&&b<1)return this.hideSelectDropDown(!0),!1;if(this._dropDownPosition===0){if(this._isVisible&&_+b<1)return this.hideSelectDropDown(!0),!1;p>r&&(f=_*this.getHeight())}else p>a&&(f=b*this.getHeight());return this.selectList.layout(f),this.selectList.domFocus(),this.selectList.length>0&&(this.selectList.setFocus([this.selected||0]),this.selectList.reveal(this.selectList.getFocus()[0]||0)),this._hasDetails?(this.selectList.getHTMLElement().style.height=f+s+"px",this.selectDropDownContainer.style.height=""):this.selectDropDownContainer.style.height=f+s+"px",this.updateDetail(this.selected),this.selectDropDownContainer.style.width=u,this.selectDropDownListContainer.setAttribute("tabindex","0"),this.selectElement.classList.add("synthetic-focus"),this.selectDropDownContainer.classList.add("synthetic-focus"),!0}else return!1}setWidthControlElement(e){let t=0;if(e){let i=0,n=0;this.options.forEach((s,r)=>{const a=s.detail?s.detail.length:0,l=s.decoratorRight?s.decoratorRight.length:0,c=s.text.length+a+l;c>n&&(i=r,n=c)}),e.textContent=this.options[i].text+(this.options[i].decoratorRight?this.options[i].decoratorRight+" ":""),t=qa(e)}return t}createSelectList(e){if(this.selectList)return;this.selectDropDownListContainer=ge(e,Pv(".select-box-dropdown-list-container")),this.listRenderer=new zOe,this.selectList=this._register(new Xl("SelectBoxCustom",this.selectDropDownListContainer,this,[this.listRenderer],{useShadows:!1,verticalScrollMode:3,keyboardSupport:!1,mouseSupport:!1,accessibilityProvider:{getAriaLabel:n=>{let s=n.text;return n.detail&&(s+=`. ${n.detail}`),n.decoratorRight&&(s+=`. ${n.decoratorRight}`),n.description&&(s+=`. ${n.description}`),s},getWidgetAriaLabel:()=>v({key:"selectBox",comment:["Behave like native select dropdown element."]},"Select Box"),getRole:()=>Kt?"":"option",getWidgetRole:()=>"listbox"}})),this.selectBoxOptions.ariaLabel&&(this.selectList.ariaLabel=this.selectBoxOptions.ariaLabel);const t=this._register(new Zt(this.selectDropDownListContainer,"keydown")),i=Ee.chain(t.event,n=>n.filter(()=>this.selectList.length>0).map(s=>new Zi(s)));this._register(Ee.chain(i,n=>n.filter(s=>s.keyCode===3))(this.onEnter,this)),this._register(Ee.chain(i,n=>n.filter(s=>s.keyCode===2))(this.onEnter,this)),this._register(Ee.chain(i,n=>n.filter(s=>s.keyCode===9))(this.onEscape,this)),this._register(Ee.chain(i,n=>n.filter(s=>s.keyCode===16))(this.onUpArrow,this)),this._register(Ee.chain(i,n=>n.filter(s=>s.keyCode===18))(this.onDownArrow,this)),this._register(Ee.chain(i,n=>n.filter(s=>s.keyCode===12))(this.onPageDown,this)),this._register(Ee.chain(i,n=>n.filter(s=>s.keyCode===11))(this.onPageUp,this)),this._register(Ee.chain(i,n=>n.filter(s=>s.keyCode===14))(this.onHome,this)),this._register(Ee.chain(i,n=>n.filter(s=>s.keyCode===13))(this.onEnd,this)),this._register(Ee.chain(i,n=>n.filter(s=>s.keyCode>=21&&s.keyCode<=56||s.keyCode>=85&&s.keyCode<=113))(this.onCharacter,this)),this._register(se(this.selectList.getHTMLElement(),Le.POINTER_UP,n=>this.onPointerUp(n))),this._register(this.selectList.onMouseOver(n=>typeof n.index<"u"&&this.selectList.setFocus([n.index]))),this._register(this.selectList.onDidChangeFocus(n=>this.onListFocus(n))),this._register(se(this.selectDropDownContainer,Le.FOCUS_OUT,n=>{!this._isVisible||Ks(n.relatedTarget,this.selectDropDownContainer)||this.onListBlur()})),this.selectList.getHTMLElement().setAttribute("aria-label",this.selectBoxOptions.ariaLabel||""),this.selectList.getHTMLElement().setAttribute("aria-expanded","true"),this.styleList()}onPointerUp(e){if(!this.selectList.length)return;Jt.stop(e);const t=e.target;if(!t||t.classList.contains("slider"))return;const i=t.closest(".monaco-list-row");if(!i)return;const n=Number(i.getAttribute("data-index")),s=i.classList.contains("option-disabled");n>=0&&n<this.options.length&&!s&&(this.selected=n,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0]),this.selected!==this._currentSelection&&(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)),this.hideSelectDropDown(!0))}onListBlur(){this._sticky||(this.selected!==this._currentSelection&&this.select(this._currentSelection),this.hideSelectDropDown(!1))}renderDescriptionMarkdown(e,t){const i=s=>{for(let r=0;r<s.childNodes.length;r++){const a=s.childNodes.item(r);(a.tagName&&a.tagName.toLowerCase())==="img"?a.remove():i(a)}},n=L4({value:e,supportThemeIcons:!0},{actionHandler:t});return n.element.classList.add("select-box-description-markdown"),i(n.element),n.element}onListFocus(e){!this._isVisible||!this._hasDetails||this.updateDetail(e.indexes[0])}updateDetail(e){this.selectionDetailsPane.innerText="";const t=this.options[e],i=(t==null?void 0:t.description)??"",n=(t==null?void 0:t.descriptionIsMarkdown)??!1;if(i){if(n){const s=t.descriptionMarkdownActionHandler;this.selectionDetailsPane.appendChild(this.renderDescriptionMarkdown(i,s))}else this.selectionDetailsPane.innerText=i;this.selectionDetailsPane.style.display="block"}else this.selectionDetailsPane.style.display="none";this._skipLayout=!0,this.contextViewProvider.layout(),this._skipLayout=!1}onEscape(e){Jt.stop(e),this.select(this._currentSelection),this.hideSelectDropDown(!0)}onEnter(e){Jt.stop(e),this.selected!==this._currentSelection&&(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)),this.hideSelectDropDown(!0)}onDownArrow(e){if(this.selected<this.options.length-1){Jt.stop(e,!0);const t=this.options[this.selected+1].isDisabled;if(t&&this.options.length>this.selected+2)this.selected+=2;else{if(t)return;this.selected++}this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0])}}onUpArrow(e){this.selected>0&&(Jt.stop(e,!0),this.options[this.selected-1].isDisabled&&this.selected>1?this.selected-=2:this.selected--,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0]))}onPageUp(e){Jt.stop(e),this.selectList.focusPreviousPage(),setTimeout(()=>{this.selected=this.selectList.getFocus()[0],this.options[this.selected].isDisabled&&this.selected<this.options.length-1&&(this.selected++,this.selectList.setFocus([this.selected])),this.selectList.reveal(this.selected),this.select(this.selected)},1)}onPageDown(e){Jt.stop(e),this.selectList.focusNextPage(),setTimeout(()=>{this.selected=this.selectList.getFocus()[0],this.options[this.selected].isDisabled&&this.selected>0&&(this.selected--,this.selectList.setFocus([this.selected])),this.selectList.reveal(this.selected),this.select(this.selected)},1)}onHome(e){Jt.stop(e),!(this.options.length<2)&&(this.selected=0,this.options[this.selected].isDisabled&&this.selected>1&&this.selected++,this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected))}onEnd(e){Jt.stop(e),!(this.options.length<2)&&(this.selected=this.options.length-1,this.options[this.selected].isDisabled&&this.selected>1&&this.selected--,this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected))}onCharacter(e){const t=Kf.toString(e.keyCode);let i=-1;for(let n=0;n<this.options.length-1;n++)if(i=(n+this.selected+1)%this.options.length,this.options[i].text.charAt(0).toUpperCase()===t&&!this.options[i].isDisabled){this.select(i),this.selectList.setFocus([i]),this.selectList.reveal(this.selectList.getFocus()[0]),Jt.stop(e);break}}dispose(){this.hideSelectDropDown(!1),super.dispose()}};sh.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN=32,sh.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN=2,sh.DEFAULT_MINIMUM_VISIBLE_OPTIONS=3;let k6=sh;class UOe extends X{constructor(e,t,i,n){super(),this.selected=0,this.selectBoxOptions=n||Object.create(null),this.options=[],this.selectElement=document.createElement("select"),this.selectElement.className="monaco-select-box",typeof this.selectBoxOptions.ariaLabel=="string"&&this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel),typeof this.selectBoxOptions.ariaDescription=="string"&&this.selectElement.setAttribute("aria-description",this.selectBoxOptions.ariaDescription),this._onDidSelect=this._register(new Y),this.styles=i,this.registerListeners(),this.setOptions(e,t)}registerListeners(){this._register(Jo.addTarget(this.selectElement)),[tn.Tap].forEach(e=>{this._register(se(this.selectElement,e,t=>{this.selectElement.focus()}))}),this._register(Bn(this.selectElement,"click",e=>{Jt.stop(e,!0)})),this._register(Bn(this.selectElement,"change",e=>{this.selectElement.title=e.target.value,this._onDidSelect.fire({index:e.target.selectedIndex,selected:e.target.value})})),this._register(Bn(this.selectElement,"keydown",e=>{let t=!1;Kt?(e.keyCode===18||e.keyCode===16||e.keyCode===10)&&(t=!0):(e.keyCode===18&&e.altKey||e.keyCode===10||e.keyCode===3)&&(t=!0),t&&e.stopPropagation()}))}get onDidSelect(){return this._onDidSelect.event}setOptions(e,t){(!this.options||!En(this.options,e))&&(this.options=e,this.selectElement.options.length=0,this.options.forEach((i,n)=>{this.selectElement.add(this.createOption(i.text,n,i.isDisabled))})),t!==void 0&&this.select(t)}select(e){this.options.length===0?this.selected=0:e>=0&&e<this.options.length?this.selected=e:e>this.options.length-1?this.select(this.options.length-1):this.selected<0&&(this.selected=0),this.selectElement.selectedIndex=this.selected,this.selected<this.options.length&&typeof this.options[this.selected].text=="string"?this.selectElement.title=this.options[this.selected].text:this.selectElement.title=""}focus(){this.selectElement&&(this.selectElement.tabIndex=0,this.selectElement.focus())}blur(){this.selectElement&&(this.selectElement.tabIndex=-1,this.selectElement.blur())}setFocusable(e){this.selectElement.tabIndex=e?0:-1}render(e){e.classList.add("select-container"),e.appendChild(this.selectElement),this.setOptions(this.options,this.selected),this.applyStyles()}applyStyles(){this.selectElement&&(this.selectElement.style.backgroundColor=this.styles.selectBackground??"",this.selectElement.style.color=this.styles.selectForeground??"",this.selectElement.style.borderColor=this.styles.selectBorder??"")}createOption(e,t,i){const n=document.createElement("option");return n.value=e,n.text=e,n.disabled=!!i,n}}class $Oe extends Zl{constructor(e,t,i,n,s){super(),Kt&&!(s!=null&&s.useCustomDrawn)?this.selectBoxDelegate=new UOe(e,t,n,s):this.selectBoxDelegate=new k6(e,t,i,n,s),this._register(this.selectBoxDelegate)}get onDidSelect(){return this.selectBoxDelegate.onDidSelect}setOptions(e,t){this.selectBoxDelegate.setOptions(e,t)}select(e){this.selectBoxDelegate.select(e)}focus(){this.selectBoxDelegate.focus()}blur(){this.selectBoxDelegate.blur()}setFocusable(e){this.selectBoxDelegate.setFocusable(e)}render(e){this.selectBoxDelegate.render(e)}}class Zd extends X{get action(){return this._action}constructor(e,t,i={}){super(),this.options=i,this._context=e||this,this._action=t,t instanceof tl&&this._register(t.onDidChange(n=>{this.element&&this.handleActionChangeEvent(n)}))}handleActionChangeEvent(e){e.enabled!==void 0&&this.updateEnabled(),e.checked!==void 0&&this.updateChecked(),e.class!==void 0&&this.updateClass(),e.label!==void 0&&(this.updateLabel(),this.updateTooltip()),e.tooltip!==void 0&&this.updateTooltip()}get actionRunner(){return this._actionRunner||(this._actionRunner=this._register(new lC)),this._actionRunner}set actionRunner(e){this._actionRunner=e}isEnabled(){return this._action.enabled}setActionContext(e){this._context=e}render(e){const t=this.element=e;this._register(Jo.addTarget(e));const i=this.options&&this.options.draggable;i&&(e.draggable=!0,Lc&&this._register(se(e,Le.DRAG_START,n=>{var s;return(s=n.dataTransfer)==null?void 0:s.setData(BD.TEXT,this._action.label)}))),this._register(se(t,tn.Tap,n=>this.onClick(n,!0))),this._register(se(t,Le.MOUSE_DOWN,n=>{i||Jt.stop(n,!0),this._action.enabled&&n.button===0&&t.classList.add("active")})),Kt&&this._register(se(t,Le.CONTEXT_MENU,n=>{n.button===0&&n.ctrlKey===!0&&this.onClick(n)})),this._register(se(t,Le.CLICK,n=>{Jt.stop(n,!0),this.options&&this.options.isMenu||this.onClick(n)})),this._register(se(t,Le.DBLCLICK,n=>{Jt.stop(n,!0)})),[Le.MOUSE_UP,Le.MOUSE_OUT].forEach(n=>{this._register(se(t,n,s=>{Jt.stop(s),t.classList.remove("active")}))})}onClick(e,t=!1){var n;Jt.stop(e,!0);const i=Rl(this._context)?(n=this.options)!=null&&n.useEventAsContext?e:{preserveFocus:t}:this._context;this.actionRunner.run(this._action,i)}focus(){this.element&&(this.element.tabIndex=0,this.element.focus(),this.element.classList.add("focused"))}blur(){this.element&&(this.element.blur(),this.element.tabIndex=-1,this.element.classList.remove("focused"))}setFocusable(e){this.element&&(this.element.tabIndex=e?0:-1)}get trapsArrowNavigation(){return!1}updateEnabled(){}updateLabel(){}getClass(){return this.action.class}getTooltip(){return this.action.tooltip}updateTooltip(){var t;if(!this.element)return;const e=this.getTooltip()??"";if(this.updateAriaLabel(),(t=this.options.hoverDelegate)!=null&&t.showNativeHover)this.element.title=e;else if(!this.customHover&&e!==""){const i=this.options.hoverDelegate??sa("element");this.customHover=this._store.add(Su().setupManagedHover(i,this.element,e))}else this.customHover&&this.customHover.update(e)}updateAriaLabel(){if(this.element){const e=this.getTooltip()??"";this.element.setAttribute("aria-label",e)}}updateClass(){}updateChecked(){}dispose(){this.element&&(this.element.remove(),this.element=void 0),this._context=void 0,super.dispose()}}class pS extends Zd{constructor(e,t,i){super(e,t,i),this.options=i,this.options.icon=i.icon!==void 0?i.icon:!1,this.options.label=i.label!==void 0?i.label:!0,this.cssClass=""}render(e){super.render(e),ui(this.element);const t=document.createElement("a");if(t.classList.add("action-label"),t.setAttribute("role",this.getDefaultAriaRole()),this.label=t,this.element.appendChild(t),this.options.label&&this.options.keybinding){const i=document.createElement("span");i.classList.add("keybinding"),i.textContent=this.options.keybinding,this.element.appendChild(i)}this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked()}getDefaultAriaRole(){return this._action.id===Zs.ID?"presentation":this.options.isMenu?"menuitem":this.options.isTabList?"tab":"button"}focus(){this.label&&(this.label.tabIndex=0,this.label.focus())}blur(){this.label&&(this.label.tabIndex=-1)}setFocusable(e){this.label&&(this.label.tabIndex=e?0:-1)}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this.action.label)}getTooltip(){let e=null;return this.action.tooltip?e=this.action.tooltip:!this.options.label&&this.action.label&&this.options.icon&&(e=this.action.label,this.options.keybinding&&(e=v({key:"titleLabel",comment:["action title","action keybinding"]},"{0} ({1})",e,this.options.keybinding))),e??void 0}updateClass(){var e;this.cssClass&&this.label&&this.label.classList.remove(...this.cssClass.split(" ")),this.options.icon?(this.cssClass=this.getClass(),this.label&&(this.label.classList.add("codicon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" "))),this.updateEnabled()):(e=this.label)==null||e.classList.remove("codicon")}updateEnabled(){var e,t;this.action.enabled?(this.label&&(this.label.removeAttribute("aria-disabled"),this.label.classList.remove("disabled")),(e=this.element)==null||e.classList.remove("disabled")):(this.label&&(this.label.setAttribute("aria-disabled","true"),this.label.classList.add("disabled")),(t=this.element)==null||t.classList.add("disabled"))}updateAriaLabel(){if(this.label){const e=this.getTooltip()??"";this.label.setAttribute("aria-label",e)}}updateChecked(){this.label&&(this.action.checked!==void 0?(this.label.classList.toggle("checked",this.action.checked),this.options.isTabList?this.label.setAttribute("aria-selected",this.action.checked?"true":"false"):(this.label.setAttribute("aria-checked",this.action.checked?"true":"false"),this.label.setAttribute("role","checkbox"))):(this.label.classList.remove("checked"),this.label.removeAttribute(this.options.isTabList?"aria-selected":"aria-checked"),this.label.setAttribute("role",this.getDefaultAriaRole())))}}class jOe extends Zd{constructor(e,t,i,n,s,r,a){super(e,t),this.selectBox=new $Oe(i,n,s,r,a),this.selectBox.setFocusable(!1),this._register(this.selectBox),this.registerListeners()}select(e){this.selectBox.select(e)}registerListeners(){this._register(this.selectBox.onDidSelect(e=>this.runAction(e.selected,e.index)))}runAction(e,t){this.actionRunner.run(this._action,this.getActionContext(e,t))}getActionContext(e,t){return e}setFocusable(e){this.selectBox.setFocusable(e)}focus(){var e;(e=this.selectBox)==null||e.focus()}blur(){var e;(e=this.selectBox)==null||e.blur()}render(e){this.selectBox.render(e)}}class qOe extends lC{constructor(e,t){super(),this._onDidChangeVisibility=this._register(new Y),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this._element=ge(e,xe(".monaco-dropdown")),this._label=ge(this._element,xe(".dropdown-label"));let i=t.labelRenderer;i||(i=s=>(s.textContent=t.label||"",null));for(const s of[Le.CLICK,Le.MOUSE_DOWN,tn.Tap])this._register(se(this.element,s,r=>Jt.stop(r,!0)));for(const s of[Le.MOUSE_DOWN,tn.Tap])this._register(se(this._label,s,r=>{jq(r)&&(r.detail>1||r.button!==0)||(this.visible?this.hide():this.show())}));this._register(se(this._label,Le.KEY_UP,s=>{const r=new Zi(s);(r.equals(3)||r.equals(10))&&(Jt.stop(s,!0),this.visible?this.hide():this.show())}));const n=i(this._label);n&&this._register(n),this._register(Jo.addTarget(this._label))}get element(){return this._element}show(){this.visible||(this.visible=!0,this._onDidChangeVisibility.fire(!0))}hide(){this.visible&&(this.visible=!1,this._onDidChangeVisibility.fire(!1))}dispose(){super.dispose(),this.hide(),this.boxContainer&&(this.boxContainer.remove(),this.boxContainer=void 0),this.contents&&(this.contents.remove(),this.contents=void 0),this._label&&(this._label.remove(),this._label=void 0)}}class KOe extends qOe{constructor(e,t){super(e,t),this._options=t,this._actions=[],this.actions=t.actions||[]}set menuOptions(e){this._menuOptions=e}get menuOptions(){return this._menuOptions}get actions(){return this._options.actionProvider?this._options.actionProvider.getActions():this._actions}set actions(e){this._actions=e}show(){super.show(),this.element.classList.add("active"),this._options.contextMenuProvider.showContextMenu({getAnchor:()=>this.element,getActions:()=>this.actions,getActionsContext:()=>this.menuOptions?this.menuOptions.context:null,getActionViewItem:(e,t)=>this.menuOptions&&this.menuOptions.actionViewItemProvider?this.menuOptions.actionViewItemProvider(e,t):void 0,getKeyBinding:e=>this.menuOptions&&this.menuOptions.getKeyBinding?this.menuOptions.getKeyBinding(e):void 0,getMenuClassName:()=>this._options.menuClassName||"",onHide:()=>this.onHide(),actionRunner:this.menuOptions?this.menuOptions.actionRunner:void 0,anchorAlignment:this.menuOptions?this.menuOptions.anchorAlignment:0,domForShadowRoot:this._options.menuAsChild?this.element:void 0,skipTelemetry:this._options.skipTelemetry})}hide(){super.hide()}onHide(){this.hide(),this.element.classList.remove("active")}}class QA extends Zd{constructor(e,t,i,n=Object.create(null)){super(null,e,n),this.actionItem=null,this._onDidChangeVisibility=this._register(new Y),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this.menuActionsOrProvider=t,this.contextMenuProvider=i,this.options=n,this.options.actionRunner&&(this.actionRunner=this.options.actionRunner)}render(e){this.actionItem=e;const t=s=>{this.element=ge(s,xe("a.action-label"));let r=[];return typeof this.options.classNames=="string"?r=this.options.classNames.split(/\s+/g).filter(a=>!!a):this.options.classNames&&(r=this.options.classNames),r.find(a=>a==="icon")||r.push("codicon"),this.element.classList.add(...r),this.element.setAttribute("role","button"),this.element.setAttribute("aria-haspopup","true"),this.element.setAttribute("aria-expanded","false"),this._action.label&&this._register(Su().setupManagedHover(this.options.hoverDelegate??sa("mouse"),this.element,this._action.label)),this.element.ariaLabel=this._action.label||"",null},i=Array.isArray(this.menuActionsOrProvider),n={contextMenuProvider:this.contextMenuProvider,labelRenderer:t,menuAsChild:this.options.menuAsChild,actions:i?this.menuActionsOrProvider:void 0,actionProvider:i?void 0:this.menuActionsOrProvider,skipTelemetry:this.options.skipTelemetry};if(this.dropdownMenu=this._register(new KOe(e,n)),this._register(this.dropdownMenu.onDidChangeVisibility(s=>{var r;(r=this.element)==null||r.setAttribute("aria-expanded",`${s}`),this._onDidChangeVisibility.fire(s)})),this.dropdownMenu.menuOptions={actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,getKeyBinding:this.options.keybindingProvider,context:this._context},this.options.anchorAlignmentProvider){const s=this;this.dropdownMenu.menuOptions={...this.dropdownMenu.menuOptions,get anchorAlignment(){return s.options.anchorAlignmentProvider()}}}this.updateTooltip(),this.updateEnabled()}getTooltip(){let e=null;return this.action.tooltip?e=this.action.tooltip:this.action.label&&(e=this.action.label),e??void 0}setActionContext(e){super.setActionContext(e),this.dropdownMenu&&(this.dropdownMenu.menuOptions?this.dropdownMenu.menuOptions.context=e:this.dropdownMenu.menuOptions={context:e})}show(){var e;(e=this.dropdownMenu)==null||e.show()}updateEnabled(){var t,i;const e=!this.action.enabled;(t=this.actionItem)==null||t.classList.toggle("disabled",e),(i=this.element)==null||i.classList.toggle("disabled",e)}}function GOe(o){return o&&typeof o=="object"&&typeof o.original=="string"&&typeof o.value=="string"}function YOe(o){return o?o.condition!==void 0:!1}var w1;(function(o){o[o.STORAGE_DOES_NOT_EXIST=0]="STORAGE_DOES_NOT_EXIST",o[o.STORAGE_IN_MEMORY=1]="STORAGE_IN_MEMORY"})(w1||(w1={}));var Ow;(function(o){o[o.None=0]="None",o[o.Initialized=1]="Initialized",o[o.Closed=2]="Closed"})(Ow||(Ow={}));const b2=class b2 extends X{constructor(e,t=Object.create(null)){super(),this.database=e,this.options=t,this._onDidChangeStorage=this._register(new nC),this.onDidChangeStorage=this._onDidChangeStorage.event,this.state=Ow.None,this.cache=new Map,this.flushDelayer=this._register(new oce(b2.DEFAULT_FLUSH_DELAY)),this.pendingDeletes=new Set,this.pendingInserts=new Map,this.whenFlushedCallbacks=[],this.registerListeners()}registerListeners(){this._register(this.database.onDidChangeItemsExternal(e=>this.onDidChangeItemsExternal(e)))}onDidChangeItemsExternal(e){var t,i;this._onDidChangeStorage.pause();try{(t=e.changed)==null||t.forEach((n,s)=>this.acceptExternal(s,n)),(i=e.deleted)==null||i.forEach(n=>this.acceptExternal(n,void 0))}finally{this._onDidChangeStorage.resume()}}acceptExternal(e,t){if(this.state===Ow.Closed)return;let i=!1;Rl(t)?i=this.cache.delete(e):this.cache.get(e)!==t&&(this.cache.set(e,t),i=!0),i&&this._onDidChangeStorage.fire({key:e,external:!0})}get(e,t){const i=this.cache.get(e);return Rl(i)?t:i}getBoolean(e,t){const i=this.get(e);return Rl(i)?t:i==="true"}getNumber(e,t){const i=this.get(e);return Rl(i)?t:parseInt(i,10)}async set(e,t,i=!1){if(this.state===Ow.Closed)return;if(Rl(t))return this.delete(e,i);const n=ao(t)||Array.isArray(t)?kAe(t):String(t);if(this.cache.get(e)!==n)return this.cache.set(e,n),this.pendingInserts.set(e,n),this.pendingDeletes.delete(e),this._onDidChangeStorage.fire({key:e,external:i}),this.doFlush()}async delete(e,t=!1){if(!(this.state===Ow.Closed||!this.cache.delete(e)))return this.pendingDeletes.has(e)||this.pendingDeletes.add(e),this.pendingInserts.delete(e),this._onDidChangeStorage.fire({key:e,external:t}),this.doFlush()}get hasPending(){return this.pendingInserts.size>0||this.pendingDeletes.size>0}async flushPending(){if(!this.hasPending)return;const e={insert:this.pendingInserts,delete:this.pendingDeletes};return this.pendingDeletes=new Set,this.pendingInserts=new Map,this.database.updateItems(e).finally(()=>{var t;if(!this.hasPending)for(;this.whenFlushedCallbacks.length;)(t=this.whenFlushedCallbacks.pop())==null||t()})}async doFlush(e){return this.options.hint===w1.STORAGE_IN_MEMORY?this.flushPending():this.flushDelayer.trigger(()=>this.flushPending(),e)}};b2.DEFAULT_FLUSH_DELAY=100;let dk=b2;class L7{constructor(){this.onDidChangeItemsExternal=Ee.None,this.items=new Map}async updateItems(e){var t,i;(t=e.insert)==null||t.forEach((n,s)=>this.items.set(s,n)),(i=e.delete)==null||i.forEach(n=>this.items.delete(n))}}const xM="__$__targetStorageMarker",md=Gt("storageService");var HD;(function(o){o[o.NONE=0]="NONE",o[o.SHUTDOWN=1]="SHUTDOWN"})(HD||(HD={}));function ZOe(o){const e=o.get(xM);if(e)try{return JSON.parse(e)}catch{}return Object.create(null)}const C2=class C2 extends X{constructor(e={flushInterval:C2.DEFAULT_FLUSH_INTERVAL}){super(),this.options=e,this._onDidChangeValue=this._register(new nC),this._onDidChangeTarget=this._register(new nC),this._onWillSaveState=this._register(new Y),this.onWillSaveState=this._onWillSaveState.event,this._workspaceKeyTargets=void 0,this._profileKeyTargets=void 0,this._applicationKeyTargets=void 0}onDidChangeValue(e,t,i){return Ee.filter(this._onDidChangeValue.event,n=>n.scope===e&&(t===void 0||n.key===t),i)}emitDidChangeValue(e,t){const{key:i,external:n}=t;if(i===xM){switch(e){case-1:this._applicationKeyTargets=void 0;break;case 0:this._profileKeyTargets=void 0;break;case 1:this._workspaceKeyTargets=void 0;break}this._onDidChangeTarget.fire({scope:e})}else this._onDidChangeValue.fire({scope:e,key:i,target:this.getKeyTargets(e)[i],external:n})}get(e,t,i){var n;return(n=this.getStorage(t))==null?void 0:n.get(e,i)}getBoolean(e,t,i){var n;return(n=this.getStorage(t))==null?void 0:n.getBoolean(e,i)}getNumber(e,t,i){var n;return(n=this.getStorage(t))==null?void 0:n.getNumber(e,i)}store(e,t,i,n,s=!1){if(Rl(t)){this.remove(e,i,s);return}this.withPausedEmitters(()=>{var r;this.updateKeyTarget(e,i,n),(r=this.getStorage(i))==null||r.set(e,t,s)})}remove(e,t,i=!1){this.withPausedEmitters(()=>{var n;this.updateKeyTarget(e,t,void 0),(n=this.getStorage(t))==null||n.delete(e,i)})}withPausedEmitters(e){this._onDidChangeValue.pause(),this._onDidChangeTarget.pause();try{e()}finally{this._onDidChangeValue.resume(),this._onDidChangeTarget.resume()}}updateKeyTarget(e,t,i,n=!1){var r,a;const s=this.getKeyTargets(t);typeof i=="number"?s[e]!==i&&(s[e]=i,(r=this.getStorage(t))==null||r.set(xM,JSON.stringify(s),n)):typeof s[e]=="number"&&(delete s[e],(a=this.getStorage(t))==null||a.set(xM,JSON.stringify(s),n))}get workspaceKeyTargets(){return this._workspaceKeyTargets||(this._workspaceKeyTargets=this.loadKeyTargets(1)),this._workspaceKeyTargets}get profileKeyTargets(){return this._profileKeyTargets||(this._profileKeyTargets=this.loadKeyTargets(0)),this._profileKeyTargets}get applicationKeyTargets(){return this._applicationKeyTargets||(this._applicationKeyTargets=this.loadKeyTargets(-1)),this._applicationKeyTargets}getKeyTargets(e){switch(e){case-1:return this.applicationKeyTargets;case 0:return this.profileKeyTargets;default:return this.workspaceKeyTargets}}loadKeyTargets(e){const t=this.getStorage(e);return t?ZOe(t):Object.create(null)}};C2.DEFAULT_FLUSH_INTERVAL=60*1e3;let D6=C2;class XOe extends D6{constructor(){super(),this.applicationStorage=this._register(new dk(new L7,{hint:w1.STORAGE_IN_MEMORY})),this.profileStorage=this._register(new dk(new L7,{hint:w1.STORAGE_IN_MEMORY})),this.workspaceStorage=this._register(new dk(new L7,{hint:w1.STORAGE_IN_MEMORY})),this._register(this.workspaceStorage.onDidChangeStorage(e=>this.emitDidChangeValue(1,e))),this._register(this.profileStorage.onDidChangeStorage(e=>this.emitDidChangeValue(0,e))),this._register(this.applicationStorage.onDidChangeStorage(e=>this.emitDidChangeValue(-1,e)))}getStorage(e){switch(e){case-1:return this.applicationStorage;case 0:return this.profileStorage;default:return this.workspaceStorage}}}function QOe(o,e){const t={...e};for(const i in o){const n=o[i];t[i]=n!==void 0?He(n):void 0}return t}const JOe={keybindingLabelBackground:He(URe),keybindingLabelForeground:He($Re),keybindingLabelBorder:He(jRe),keybindingLabelBottomBorder:He(qRe),keybindingLabelShadow:He(GS)},e2e={buttonForeground:He(Ode),buttonSeparator:He(IRe),buttonBackground:He(Px),buttonHoverBackground:He(TRe),buttonSecondaryForeground:He(RRe),buttonSecondaryBackground:He(GV),buttonSecondaryHoverBackground:He(MRe),buttonBorder:He(NRe)},t2e={progressBarBackground:He(UNe)},JA={inputActiveOptionBorder:He(m4),inputActiveOptionForeground:He(_4),inputActiveOptionBackground:He(iI)};He(Ox),He(ARe),He(PRe),He(ORe),He(FRe),He(BRe),He(WRe);He(HRe),He(zRe),He(VRe);He(Bl),He(f4),He(GS),He(si),He(dRe),He(uRe),He(hRe),He(VNe);const eP={inputBackground:He(KV),inputForeground:He(Ade),inputBorder:He(Pde),inputValidationInfoBorder:He(yRe),inputValidationInfoBackground:He(bRe),inputValidationInfoForeground:He(CRe),inputValidationWarningBorder:He(LRe),inputValidationWarningBackground:He(wRe),inputValidationWarningForeground:He(SRe),inputValidationErrorBorder:He(DRe),inputValidationErrorBackground:He(xRe),inputValidationErrorForeground:He(kRe)},i2e={listFilterWidgetBackground:He(oMe),listFilterWidgetOutline:He(rMe),listFilterWidgetNoMatchesOutline:He(aMe),listFilterWidgetShadow:He(lMe),inputBoxStyles:eP,toggleStyles:JA},Iue={badgeBackground:He(yM),badgeForeground:He(zNe),badgeBorder:He(si)};He(lRe),He(aRe),He(une),He(une),He(cRe);const OC={listBackground:void 0,listInactiveFocusForeground:void 0,listFocusBackground:He(KRe),listFocusForeground:He(GRe),listFocusOutline:He(YRe),listActiveSelectionBackground:He(dC),listActiveSelectionForeground:He(ED),listActiveSelectionIconForeground:He(Fde),listFocusAndSelectionOutline:He(ZRe),listFocusAndSelectionBackground:He(dC),listFocusAndSelectionForeground:He(ED),listInactiveSelectionBackground:He(XRe),listInactiveSelectionIconForeground:He(JRe),listInactiveSelectionForeground:He(QRe),listInactiveFocusBackground:He(eMe),listInactiveFocusOutline:He(tMe),listHoverBackground:He(Bde),listHoverForeground:He(Wde),listDropOverBackground:He(iMe),listDropBetweenBackground:He(nMe),listSelectionOutline:He(vn),listHoverOutline:He(vn),treeIndentGuidesStroke:He(Hde),treeInactiveIndentGuidesStroke:He(cMe),treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:He(uK),tableColumnsBorder:He(dMe),tableOddRowsBackgroundColor:He(uMe)};function FC(o){return QOe(o,OC)}const n2e={selectBackground:He(v4),selectListBackground:He(ERe),selectForeground:He(_K),decoratorRightForeground:He(Vde),selectBorder:He(vK),focusBorder:He(Ah),listFocusBackground:He(TD),listInactiveSelectionIconForeground:He(bK),listFocusForeground:He(ID),listFocusOutline:PNe(vn,ue.transparent.toString()),listHoverBackground:He(Bde),listHoverForeground:He(Wde),listHoverOutline:He(vn),selectListBorder:He(hK),listBackground:void 0,listActiveSelectionBackground:void 0,listActiveSelectionForeground:void 0,listActiveSelectionIconForeground:void 0,listFocusAndSelectionBackground:void 0,listDropOverBackground:void 0,listDropBetweenBackground:void 0,listInactiveSelectionBackground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusBackground:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listFocusAndSelectionForeground:void 0,listFocusAndSelectionOutline:void 0,listInactiveFocusForeground:void 0,tableColumnsBorder:void 0,tableOddRowsBackgroundColor:void 0,treeIndentGuidesStroke:void 0,treeInactiveIndentGuidesStroke:void 0,treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:void 0},s2e={shadowColor:He(GS),borderColor:He(hMe),foregroundColor:He(fMe),backgroundColor:He(gMe),selectionForegroundColor:He(pMe),selectionBackgroundColor:He(mMe),selectionBorderColor:He(_Me),separatorColor:He(vMe),scrollbarShadow:He(uK),scrollbarSliderBackground:He(kde),scrollbarSliderHoverBackground:He(Dde),scrollbarSliderActiveBackground:He(Ede)};var N4=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Sa=function(o,e){return function(t,i){e(t,i,o)}};function o2e(o,e,t,i){let n,s,r;if(Array.isArray(o))r=o,n=e,s=t;else{const c=e;r=o.getActions(c),n=t,s=i}const a=eg.getInstance(),l=a.keyStatus.altKey||(Po||Qr)&&a.keyStatus.shiftKey;Tue(r,n,l,s?c=>c===s:c=>c==="navigation")}function R4(o,e,t,i,n,s){let r,a,l,c,u;if(Array.isArray(o))u=o,r=e,a=t,l=i,c=n;else{const g=e;u=o.getActions(g),r=t,a=i,l=n,c=s}Tue(u,r,!1,typeof a=="string"?g=>g===a:a,l,c)}function Tue(o,e,t,i=r=>r==="navigation",n=()=>!1,s=!1){let r,a;Array.isArray(e)?(r=e,a=e):(r=e.primary,a=e.secondary);const l=new Set;for(const[c,u]of o){let f;i(c)?(f=r,f.length>0&&s&&f.push(new Zs)):(f=a,f.length>0&&f.push(new Zs));for(let g of u){t&&(g=g instanceof il&&g.alt?g.alt:g);const p=f.push(g);g instanceof tS&&l.add({group:c,action:g,index:p-1})}}for(const{group:c,action:u,index:f}of l){const g=i(c)?r:a,p=u.actions;n(u,c,g.length)&&g.splice(f,1,...p)}}let Um=class extends pS{constructor(e,t,i,n,s,r,a,l){super(void 0,e,{icon:!!(e.class||e.item.icon),label:!e.class&&!e.item.icon,draggable:t==null?void 0:t.draggable,keybinding:t==null?void 0:t.keybinding,hoverDelegate:t==null?void 0:t.hoverDelegate}),this._options=t,this._keybindingService=i,this._notificationService=n,this._contextKeyService=s,this._themeService=r,this._contextMenuService=a,this._accessibilityService=l,this._wantsAltCommand=!1,this._itemClassDispose=this._register(new Xs),this._altKey=eg.getInstance()}get _menuItemAction(){return this._action}get _commandAction(){return this._wantsAltCommand&&this._menuItemAction.alt||this._menuItemAction}async onClick(e){e.preventDefault(),e.stopPropagation();try{await this.actionRunner.run(this._commandAction,this._context)}catch(t){this._notificationService.error(t)}}render(e){if(super.render(e),e.classList.add("menu-entry"),this.options.icon&&this._updateItemClass(this._menuItemAction.item),this._menuItemAction.alt){let t=!1;const i=()=>{var s;const n=!!((s=this._menuItemAction.alt)!=null&&s.enabled)&&(!this._accessibilityService.isMotionReduced()||t)&&(this._altKey.keyStatus.altKey||this._altKey.keyStatus.shiftKey&&t);n!==this._wantsAltCommand&&(this._wantsAltCommand=n,this.updateLabel(),this.updateTooltip(),this.updateClass())};this._register(this._altKey.event(i)),this._register(se(e,"mouseleave",n=>{t=!1,i()})),this._register(se(e,"mouseenter",n=>{t=!0,i()})),i()}}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this._commandAction.label)}getTooltip(){var s;const e=this._keybindingService.lookupKeybinding(this._commandAction.id,this._contextKeyService),t=e&&e.getLabel(),i=this._commandAction.tooltip||this._commandAction.label;let n=t?v("titleAndKb","{0} ({1})",i,t):i;if(!this._wantsAltCommand&&((s=this._menuItemAction.alt)!=null&&s.enabled)){const r=this._menuItemAction.alt.tooltip||this._menuItemAction.alt.label,a=this._keybindingService.lookupKeybinding(this._menuItemAction.alt.id,this._contextKeyService),l=a&&a.getLabel(),c=l?v("titleAndKb","{0} ({1})",r,l):r;n=v("titleAndKbAndAlt",`{0}
[{1}] {2}`,n,PK.modifierLabels[Ja].altKey,c)}return n}updateClass(){this.options.icon&&(this._commandAction!==this._menuItemAction?this._menuItemAction.alt&&this._updateItemClass(this._menuItemAction.alt.item):this._updateItemClass(this._menuItemAction.item))}_updateItemClass(e){this._itemClassDispose.value=void 0;const{element:t,label:i}=this;if(!t||!i)return;const n=this._commandAction.checked&&YOe(e.toggled)&&e.toggled.icon?e.toggled.icon:e.icon;if(n)if(ut.isThemeIcon(n)){const s=ut.asClassNameArray(n);i.classList.add(...s),this._itemClassDispose.value=it(()=>{i.classList.remove(...s)})}else i.style.backgroundImage=sS(this._themeService.getColorTheme().type)?Lg(n.dark):Lg(n.light),i.classList.add("icon"),this._itemClassDispose.value=od(it(()=>{i.style.backgroundImage="",i.classList.remove("icon")}),this._themeService.onDidColorThemeChange(()=>{this.updateClass()}))}};Um=N4([Sa(2,Di),Sa(3,fs),Sa(4,ht),Sa(5,Ws),Sa(6,cl),Sa(7,dl)],Um);class WK extends Um{render(e){var t;this.options.label=!0,this.options.icon=!1,super.render(e),e.classList.add("text-only"),e.classList.toggle("use-comma",((t=this._options)==null?void 0:t.useComma)??!1)}updateLabel(){var t;const e=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!e)return super.updateLabel();if(this.label){const i=WK._symbolPrintEnter(e);(t=this._options)!=null&&t.conversational?this.label.textContent=v({key:"content2",comment:['A label with keybindg like "ESC to dismiss"']},"{1} to {0}",this._action.label,i):this.label.textContent=v({key:"content",comment:["A label","A keybinding"]},"{0} ({1})",this._action.label,i)}}static _symbolPrintEnter(e){var t;return(t=e.getLabel())==null?void 0:t.replace(/\benter\b/gi,"").replace(/\bEscape\b/gi,"Esc")}}let E6=class extends QA{constructor(e,t,i,n,s){const r={...t,menuAsChild:(t==null?void 0:t.menuAsChild)??!1,classNames:(t==null?void 0:t.classNames)??(ut.isThemeIcon(e.item.icon)?ut.asClassName(e.item.icon):void 0),keybindingProvider:(t==null?void 0:t.keybindingProvider)??(a=>i.lookupKeybinding(a.id))};super(e,{getActions:()=>e.actions},n,r),this._keybindingService=i,this._contextMenuService=n,this._themeService=s}render(e){super.render(e),ui(this.element),e.classList.add("menu-entry");const t=this._action,{icon:i}=t.item;if(i&&!ut.isThemeIcon(i)){this.element.classList.add("icon");const n=()=>{this.element&&(this.element.style.backgroundImage=sS(this._themeService.getColorTheme().type)?Lg(i.dark):Lg(i.light))};n(),this._register(this._themeService.onDidColorThemeChange(()=>{n()}))}}};E6=N4([Sa(2,Di),Sa(3,cl),Sa(4,Ws)],E6);let I6=class extends Zd{constructor(e,t,i,n,s,r,a,l){super(null,e),this._keybindingService=i,this._notificationService=n,this._contextMenuService=s,this._menuService=r,this._instaService=a,this._storageService=l,this._container=null,this._options=t,this._storageKey=`${e.item.submenu.id}_lastActionId`;let c;const u=t!=null&&t.persistLastActionId?l.get(this._storageKey,1):void 0;u&&(c=e.actions.find(g=>u===g.id)),c||(c=e.actions[0]),this._defaultAction=this._instaService.createInstance(Um,c,{keybinding:this._getDefaultActionKeybindingLabel(c)});const f={keybindingProvider:g=>this._keybindingService.lookupKeybinding(g.id),...t,menuAsChild:(t==null?void 0:t.menuAsChild)??!0,classNames:(t==null?void 0:t.classNames)??["codicon","codicon-chevron-down"],actionRunner:(t==null?void 0:t.actionRunner)??new lC};this._dropdown=new QA(e,e.actions,this._contextMenuService,f),this._register(this._dropdown.actionRunner.onDidRun(g=>{g.action instanceof il&&this.update(g.action)}))}update(e){var t;(t=this._options)!=null&&t.persistLastActionId&&this._storageService.store(this._storageKey,e.id,1,1),this._defaultAction.dispose(),this._defaultAction=this._instaService.createInstance(Um,e,{keybinding:this._getDefaultActionKeybindingLabel(e)}),this._defaultAction.actionRunner=new class extends lC{async runAction(i,n){await i.run(void 0)}},this._container&&this._defaultAction.render(qq(this._container,xe(".action-container")))}_getDefaultActionKeybindingLabel(e){var i;let t;if((i=this._options)!=null&&i.renderKeybindingWithDefaultActionLabel){const n=this._keybindingService.lookupKeybinding(e.id);n&&(t=`(${n.getLabel()})`)}return t}setActionContext(e){super.setActionContext(e),this._defaultAction.setActionContext(e),this._dropdown.setActionContext(e)}render(e){this._container=e,super.render(this._container),this._container.classList.add("monaco-dropdown-with-default");const t=xe(".action-container");this._defaultAction.render(ge(this._container,t)),this._register(se(t,Le.KEY_DOWN,n=>{const s=new Zi(n);s.equals(17)&&(this._defaultAction.element.tabIndex=-1,this._dropdown.focus(),s.stopPropagation())}));const i=xe(".dropdown-action-container");this._dropdown.render(ge(this._container,i)),this._register(se(i,Le.KEY_DOWN,n=>{var r;const s=new Zi(n);s.equals(15)&&(this._defaultAction.element.tabIndex=0,this._dropdown.setFocusable(!1),(r=this._defaultAction.element)==null||r.focus(),s.stopPropagation())}))}focus(e){e?this._dropdown.focus():(this._defaultAction.element.tabIndex=0,this._defaultAction.element.focus())}blur(){this._defaultAction.element.tabIndex=-1,this._dropdown.blur(),this._container.blur()}setFocusable(e){e?this._defaultAction.element.tabIndex=0:(this._defaultAction.element.tabIndex=-1,this._dropdown.setFocusable(!1))}dispose(){this._defaultAction.dispose(),this._dropdown.dispose(),super.dispose()}};I6=N4([Sa(2,Di),Sa(3,fs),Sa(4,cl),Sa(5,Gl),Sa(6,nt),Sa(7,md)],I6);let T6=class extends jOe{constructor(e,t){super(null,e,e.actions.map(i=>({text:i.id===Zs.ID?"":i.label,isDisabled:!i.enabled})),0,t,n2e,{ariaLabel:e.tooltip,optionsAsChildren:!0}),this.select(Math.max(0,e.actions.findIndex(i=>i.checked)))}render(e){super.render(e),e.style.borderColor=He(vK)}runAction(e,t){const i=this.action.actions[t];i&&this.actionRunner.run(i)}};T6=N4([Sa(1,Pg)],T6);function Nue(o,e,t){return e instanceof il?o.createInstance(Um,e,t):e instanceof _1?e.item.isSelection?o.createInstance(T6,e):e.item.rememberDefaultAction?o.createInstance(I6,e,{...t,persistLastActionId:!0}):o.createInstance(E6,e,t):void 0}class zl extends X{constructor(e,t={}){var s,r;super(),this._actionRunnerDisposables=this._register(new le),this.viewItemDisposables=this._register(new Dq),this.triggerKeyDown=!1,this.focusable=!0,this._onDidBlur=this._register(new Y),this.onDidBlur=this._onDidBlur.event,this._onDidCancel=this._register(new Y({onWillAddFirstListener:()=>this.cancelHasListener=!0})),this.onDidCancel=this._onDidCancel.event,this.cancelHasListener=!1,this._onDidRun=this._register(new Y),this.onDidRun=this._onDidRun.event,this._onWillRun=this._register(new Y),this.onWillRun=this._onWillRun.event,this.options=t,this._context=t.context??null,this._orientation=this.options.orientation??0,this._triggerKeys={keyDown:((s=this.options.triggerKeys)==null?void 0:s.keyDown)??!1,keys:((r=this.options.triggerKeys)==null?void 0:r.keys)??[3,10]},this._hoverDelegate=t.hoverDelegate??this._register(gS()),this.options.actionRunner?this._actionRunner=this.options.actionRunner:(this._actionRunner=new lC,this._actionRunnerDisposables.add(this._actionRunner)),this._actionRunnerDisposables.add(this._actionRunner.onDidRun(a=>this._onDidRun.fire(a))),this._actionRunnerDisposables.add(this._actionRunner.onWillRun(a=>this._onWillRun.fire(a))),this.viewItems=[],this.focusedItem=void 0,this.domNode=document.createElement("div"),this.domNode.className="monaco-action-bar";let i,n;switch(this._orientation){case 0:i=[15],n=[17];break;case 1:i=[16],n=[18],this.domNode.className+=" vertical";break}this._register(se(this.domNode,Le.KEY_DOWN,a=>{const l=new Zi(a);let c=!0;const u=typeof this.focusedItem=="number"?this.viewItems[this.focusedItem]:void 0;i&&(l.equals(i[0])||l.equals(i[1]))?c=this.focusPrevious():n&&(l.equals(n[0])||l.equals(n[1]))?c=this.focusNext():l.equals(9)&&this.cancelHasListener?this._onDidCancel.fire():l.equals(14)?c=this.focusFirst():l.equals(13)?c=this.focusLast():l.equals(2)&&u instanceof Zd&&u.trapsArrowNavigation?c=this.focusNext(void 0,!0):this.isTriggerKeyEvent(l)?this._triggerKeys.keyDown?this.doTrigger(l):this.triggerKeyDown=!0:c=!1,c&&(l.preventDefault(),l.stopPropagation())})),this._register(se(this.domNode,Le.KEY_UP,a=>{const l=new Zi(a);this.isTriggerKeyEvent(l)?(!this._triggerKeys.keyDown&&this.triggerKeyDown&&(this.triggerKeyDown=!1,this.doTrigger(l)),l.preventDefault(),l.stopPropagation()):(l.equals(2)||l.equals(1026)||l.equals(16)||l.equals(18)||l.equals(15)||l.equals(17))&&this.updateFocusedItem()})),this.focusTracker=this._register(pu(this.domNode)),this._register(this.focusTracker.onDidBlur(()=>{(Mo()===this.domNode||!Ks(Mo(),this.domNode))&&(this._onDidBlur.fire(),this.previouslyFocusedItem=this.focusedItem,this.focusedItem=void 0,this.triggerKeyDown=!1)})),this._register(this.focusTracker.onDidFocus(()=>this.updateFocusedItem())),this.actionsList=document.createElement("ul"),this.actionsList.className="actions-container",this.options.highlightToggledItems&&this.actionsList.classList.add("highlight-toggled"),this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"),this.options.ariaLabel&&this.actionsList.setAttribute("aria-label",this.options.ariaLabel),this.domNode.appendChild(this.actionsList),e.appendChild(this.domNode)}refreshRole(){this.length()>=1?this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"):this.actionsList.setAttribute("role","presentation")}setFocusable(e){if(this.focusable=e,this.focusable){const t=this.viewItems.find(i=>i instanceof Zd&&i.isEnabled());t instanceof Zd&&t.setFocusable(!0)}else this.viewItems.forEach(t=>{t instanceof Zd&&t.setFocusable(!1)})}isTriggerKeyEvent(e){let t=!1;return this._triggerKeys.keys.forEach(i=>{t=t||e.equals(i)}),t}updateFocusedItem(){var e,t;for(let i=0;i<this.actionsList.children.length;i++){const n=this.actionsList.children[i];if(Ks(Mo(),n)){this.focusedItem=i,(t=(e=this.viewItems[this.focusedItem])==null?void 0:e.showHover)==null||t.call(e);break}}}get context(){return this._context}set context(e){this._context=e,this.viewItems.forEach(t=>t.setActionContext(e))}get actionRunner(){return this._actionRunner}set actionRunner(e){this._actionRunner=e,this._actionRunnerDisposables.clear(),this._actionRunnerDisposables.add(this._actionRunner.onDidRun(t=>this._onDidRun.fire(t))),this._actionRunnerDisposables.add(this._actionRunner.onWillRun(t=>this._onWillRun.fire(t))),this.viewItems.forEach(t=>t.actionRunner=e)}getContainer(){return this.domNode}getAction(e){var t;if(typeof e=="number")return(t=this.viewItems[e])==null?void 0:t.action;if(Ys(e)){for(;e.parentElement!==this.actionsList;){if(!e.parentElement)return;e=e.parentElement}for(let i=0;i<this.actionsList.childNodes.length;i++)if(this.actionsList.childNodes[i]===e)return this.viewItems[i].action}}push(e,t={}){const i=Array.isArray(e)?e:[e];let n=Rm(t.index)?t.index:null;i.forEach(s=>{const r=document.createElement("li");r.className="action-item",r.setAttribute("role","presentation");let a;const l={hoverDelegate:this._hoverDelegate,...t,isTabList:this.options.ariaRole==="tablist"};this.options.actionViewItemProvider&&(a=this.options.actionViewItemProvider(s,l)),a||(a=new pS(this.context,s,l)),this.options.allowContextMenu||this.viewItemDisposables.set(a,se(r,Le.CONTEXT_MENU,c=>{Jt.stop(c,!0)})),a.actionRunner=this._actionRunner,a.setActionContext(this.context),a.render(r),this.focusable&&a instanceof Zd&&this.viewItems.length===0&&a.setFocusable(!0),n===null||n<0||n>=this.actionsList.children.length?(this.actionsList.appendChild(r),this.viewItems.push(a)):(this.actionsList.insertBefore(r,this.actionsList.children[n]),this.viewItems.splice(n,0,a),n++)}),typeof this.focusedItem=="number"&&this.focus(this.focusedItem),this.refreshRole()}clear(){this.isEmpty()||(this.viewItems=$i(this.viewItems),this.viewItemDisposables.clearAndDisposeAll(),bo(this.actionsList),this.refreshRole())}length(){return this.viewItems.length}isEmpty(){return this.viewItems.length===0}focus(e){let t=!1,i;if(e===void 0?t=!0:typeof e=="number"?i=e:typeof e=="boolean"&&(t=e),t&&typeof this.focusedItem>"u"){const n=this.viewItems.findIndex(s=>s.isEnabled());this.focusedItem=n===-1?void 0:n,this.updateFocus(void 0,void 0,!0)}else i!==void 0&&(this.focusedItem=i),this.updateFocus(void 0,void 0,!0)}focusFirst(){return this.focusedItem=this.length()-1,this.focusNext(!0)}focusLast(){return this.focusedItem=0,this.focusPrevious(!0)}focusNext(e,t){if(typeof this.focusedItem>"u")this.focusedItem=this.viewItems.length-1;else if(this.viewItems.length<=1)return!1;const i=this.focusedItem;let n;do{if(!e&&this.options.preventLoopNavigation&&this.focusedItem+1>=this.viewItems.length)return this.focusedItem=i,!1;this.focusedItem=(this.focusedItem+1)%this.viewItems.length,n=this.viewItems[this.focusedItem]}while(this.focusedItem!==i&&(this.options.focusOnlyEnabledItems&&!n.isEnabled()||n.action.id===Zs.ID));return this.updateFocus(void 0,void 0,t),!0}focusPrevious(e){if(typeof this.focusedItem>"u")this.focusedItem=0;else if(this.viewItems.length<=1)return!1;const t=this.focusedItem;let i;do{if(this.focusedItem=this.focusedItem-1,this.focusedItem<0){if(!e&&this.options.preventLoopNavigation)return this.focusedItem=t,!1;this.focusedItem=this.viewItems.length-1}i=this.viewItems[this.focusedItem]}while(this.focusedItem!==t&&(this.options.focusOnlyEnabledItems&&!i.isEnabled()||i.action.id===Zs.ID));return this.updateFocus(!0),!0}updateFocus(e,t,i=!1){var s,r;typeof this.focusedItem>"u"&&this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem!==void 0&&this.previouslyFocusedItem!==this.focusedItem&&((s=this.viewItems[this.previouslyFocusedItem])==null||s.blur());const n=this.focusedItem!==void 0?this.viewItems[this.focusedItem]:void 0;if(n){let a=!0;aD(n.focus)||(a=!1),this.options.focusOnlyEnabledItems&&aD(n.isEnabled)&&!n.isEnabled()&&(a=!1),n.action.id===Zs.ID&&(a=!1),a?(i||this.previouslyFocusedItem!==this.focusedItem)&&(n.focus(e),this.previouslyFocusedItem=this.focusedItem):(this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem=void 0),a&&((r=n.showHover)==null||r.call(n))}}doTrigger(e){if(typeof this.focusedItem>"u")return;const t=this.viewItems[this.focusedItem];if(t instanceof Zd){const i=t._context===null||t._context===void 0?e:t._context;this.run(t._action,i)}}async run(e,t){await this._actionRunner.run(e,t)}dispose(){this._context=void 0,this.viewItems=$i(this.viewItems),this.getContainer().remove(),super.dispose()}}const N6=/\(&([^\s&])\)|(^|[^&])&([^\s&])/,x7=/(&amp;)?(&amp;)([^\s&])/g;var tP;(function(o){o[o.Right=0]="Right",o[o.Left=1]="Left"})(tP||(tP={}));var R6;(function(o){o[o.Above=0]="Above",o[o.Below=1]="Below"})(R6||(R6={}));class S1 extends zl{constructor(e,t,i,n){e.classList.add("monaco-menu-container"),e.setAttribute("role","presentation");const s=document.createElement("div");s.classList.add("monaco-menu"),s.setAttribute("role","presentation"),super(s,{orientation:1,actionViewItemProvider:c=>this.doGetActionViewItem(c,i,r),context:i.context,actionRunner:i.actionRunner,ariaLabel:i.ariaLabel,ariaRole:"menu",focusOnlyEnabledItems:!0,triggerKeys:{keys:[3,...Kt||Qr?[10]:[]],keyDown:!0}}),this.menuStyles=n,this.menuElement=s,this.actionsList.tabIndex=0,this.initializeOrUpdateStyleSheet(e,n),this._register(Jo.addTarget(s)),this._register(se(s,Le.KEY_DOWN,c=>{new Zi(c).equals(2)&&c.preventDefault()})),i.enableMnemonics&&this._register(se(s,Le.KEY_DOWN,c=>{const u=c.key.toLocaleLowerCase();if(this.mnemonics.has(u)){Jt.stop(c,!0);const f=this.mnemonics.get(u);if(f.length===1&&(f[0]instanceof Jne&&f[0].container&&this.focusItemByElement(f[0].container),f[0].onClick(c)),f.length>1){const g=f.shift();g&&g.container&&(this.focusItemByElement(g.container),f.push(g)),this.mnemonics.set(u,f)}}})),Qr&&this._register(se(s,Le.KEY_DOWN,c=>{const u=new Zi(c);u.equals(14)||u.equals(11)?(this.focusedItem=this.viewItems.length-1,this.focusNext(),Jt.stop(c,!0)):(u.equals(13)||u.equals(12))&&(this.focusedItem=0,this.focusPrevious(),Jt.stop(c,!0))})),this._register(se(this.domNode,Le.MOUSE_OUT,c=>{const u=c.relatedTarget;Ks(u,this.domNode)||(this.focusedItem=void 0,this.updateFocus(),c.stopPropagation())})),this._register(se(this.actionsList,Le.MOUSE_OVER,c=>{let u=c.target;if(!(!u||!Ks(u,this.actionsList)||u===this.actionsList)){for(;u.parentElement!==this.actionsList&&u.parentElement!==null;)u=u.parentElement;if(u.classList.contains("action-item")){const f=this.focusedItem;this.setFocusedItem(u),f!==this.focusedItem&&this.updateFocus()}}})),this._register(Jo.addTarget(this.actionsList)),this._register(se(this.actionsList,tn.Tap,c=>{let u=c.initialTarget;if(!(!u||!Ks(u,this.actionsList)||u===this.actionsList)){for(;u.parentElement!==this.actionsList&&u.parentElement!==null;)u=u.parentElement;if(u.classList.contains("action-item")){const f=this.focusedItem;this.setFocusedItem(u),f!==this.focusedItem&&this.updateFocus()}}}));const r={parent:this};this.mnemonics=new Map,this.scrollableElement=this._register(new nI(s,{alwaysConsumeMouseWheel:!0,horizontal:2,vertical:3,verticalScrollbarSize:7,handleMouseWheel:!0,useShadows:!0}));const a=this.scrollableElement.getDomNode();a.style.position="",this.styleScrollElement(a,n),this._register(se(s,tn.Change,c=>{Jt.stop(c,!0);const u=this.scrollableElement.getScrollPosition().scrollTop;this.scrollableElement.setScrollPosition({scrollTop:u-c.translationY})})),this._register(se(a,Le.MOUSE_UP,c=>{c.preventDefault()}));const l=at(e);s.style.maxHeight=`${Math.max(10,l.innerHeight-e.getBoundingClientRect().top-35)}px`,t=t.filter((c,u)=>{var f;return(f=i.submenuIds)!=null&&f.has(c.id)?(console.warn(`Found submenu cycle: ${c.id}`),!1):!(c instanceof Zs&&(u===t.length-1||u===0||t[u-1]instanceof Zs))}),this.push(t,{icon:!0,label:!0,isMenu:!0}),e.appendChild(this.scrollableElement.getDomNode()),this.scrollableElement.scanDomNode(),this.viewItems.filter(c=>!(c instanceof ese)).forEach((c,u,f)=>{c.updatePositionInSet(u+1,f.length)})}initializeOrUpdateStyleSheet(e,t){this.styleSheet||(CA(e)?this.styleSheet=$l(e):(S1.globalStyleSheet||(S1.globalStyleSheet=$l()),this.styleSheet=S1.globalStyleSheet)),this.styleSheet.textContent=a2e(t,CA(e))}styleScrollElement(e,t){const i=t.foregroundColor??"",n=t.backgroundColor??"",s=t.borderColor?`1px solid ${t.borderColor}`:"",r="5px",a=t.shadowColor?`0 2px 8px ${t.shadowColor}`:"";e.style.outline=s,e.style.borderRadius=r,e.style.color=i,e.style.backgroundColor=n,e.style.boxShadow=a}getContainer(){return this.scrollableElement.getDomNode()}get onScroll(){return this.scrollableElement.onScroll}focusItemByElement(e){const t=this.focusedItem;this.setFocusedItem(e),t!==this.focusedItem&&this.updateFocus()}setFocusedItem(e){for(let t=0;t<this.actionsList.children.length;t++){const i=this.actionsList.children[t];if(e===i){this.focusedItem=t;break}}}updateFocus(e){super.updateFocus(e,!0,!0),typeof this.focusedItem<"u"&&this.scrollableElement.setScrollPosition({scrollTop:Math.round(this.menuElement.scrollTop)})}doGetActionViewItem(e,t,i){if(e instanceof Zs)return new ese(t.context,e,{icon:!0},this.menuStyles);if(e instanceof tS){const n=new Jne(e,e.actions,i,{...t,submenuIds:new Set([...t.submenuIds||[],e.id])},this.menuStyles);if(t.enableMnemonics){const s=n.getMnemonic();if(s&&n.isEnabled()){let r=[];this.mnemonics.has(s)&&(r=this.mnemonics.get(s)),r.push(n),this.mnemonics.set(s,r)}}return n}else{const n={enableMnemonics:t.enableMnemonics,useEventAsContext:t.useEventAsContext};if(t.getKeyBinding){const r=t.getKeyBinding(e);if(r){const a=r.getLabel();a&&(n.keybinding=a)}}const s=new Rue(t.context,e,n,this.menuStyles);if(t.enableMnemonics){const r=s.getMnemonic();if(r&&s.isEnabled()){let a=[];this.mnemonics.has(r)&&(a=this.mnemonics.get(r)),a.push(s),this.mnemonics.set(r,a)}}return s}}}class Rue extends Zd{constructor(e,t,i,n){if(i.isMenu=!0,super(t,t,i),this.menuStyle=n,this.options=i,this.options.icon=i.icon!==void 0?i.icon:!1,this.options.label=i.label!==void 0?i.label:!0,this.cssClass="",this.options.label&&i.enableMnemonics){const s=this.action.label;if(s){const r=N6.exec(s);r&&(this.mnemonic=(r[1]?r[1]:r[3]).toLocaleLowerCase())}}this.runOnceToEnableMouseUp=new Oi(()=>{this.element&&(this._register(se(this.element,Le.MOUSE_UP,s=>{if(Jt.stop(s,!0),Lc){if(new td(at(this.element),s).rightButton)return;this.onClick(s)}else setTimeout(()=>{this.onClick(s)},0)})),this._register(se(this.element,Le.CONTEXT_MENU,s=>{Jt.stop(s,!0)})))},100),this._register(this.runOnceToEnableMouseUp)}render(e){super.render(e),this.element&&(this.container=e,this.item=ge(this.element,xe("a.action-menu-item")),this._action.id===Zs.ID?this.item.setAttribute("role","presentation"):(this.item.setAttribute("role","menuitem"),this.mnemonic&&this.item.setAttribute("aria-keyshortcuts",`${this.mnemonic}`)),this.check=ge(this.item,xe("span.menu-item-check"+ut.asCSSSelector(Se.menuSelection))),this.check.setAttribute("role","none"),this.label=ge(this.item,xe("span.action-label")),this.options.label&&this.options.keybinding&&(ge(this.item,xe("span.keybinding")).textContent=this.options.keybinding),this.runOnceToEnableMouseUp.schedule(),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked(),this.applyStyle())}blur(){super.blur(),this.applyStyle()}focus(){var e;super.focus(),(e=this.item)==null||e.focus(),this.applyStyle()}updatePositionInSet(e,t){this.item&&(this.item.setAttribute("aria-posinset",`${e}`),this.item.setAttribute("aria-setsize",`${t}`))}updateLabel(){var e;if(this.label&&this.options.label){bo(this.label);let t=IK(this.action.label);if(t){const i=r2e(t);this.options.enableMnemonics||(t=i),this.label.setAttribute("aria-label",i.replace(/&&/g,"&"));const n=N6.exec(t);if(n){t=ik(t),x7.lastIndex=0;let s=x7.exec(t);for(;s&&s[1];)s=x7.exec(t);const r=a=>a.replace(/&amp;&amp;/g,"&amp;");s?this.label.append(GE(r(t.substr(0,s.index))," "),xe("u",{"aria-hidden":"true"},s[3]),Yle(r(t.substr(s.index+s[0].length))," ")):this.label.innerText=r(t).trim(),(e=this.item)==null||e.setAttribute("aria-keyshortcuts",(n[1]?n[1]:n[3]).toLocaleLowerCase())}else this.label.innerText=t.replace(/&&/g,"&").trim()}}}updateTooltip(){}updateClass(){this.cssClass&&this.item&&this.item.classList.remove(...this.cssClass.split(" ")),this.options.icon&&this.label?(this.cssClass=this.action.class||"",this.label.classList.add("icon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" ")),this.updateEnabled()):this.label&&this.label.classList.remove("icon")}updateEnabled(){this.action.enabled?(this.element&&(this.element.classList.remove("disabled"),this.element.removeAttribute("aria-disabled")),this.item&&(this.item.classList.remove("disabled"),this.item.removeAttribute("aria-disabled"),this.item.tabIndex=0)):(this.element&&(this.element.classList.add("disabled"),this.element.setAttribute("aria-disabled","true")),this.item&&(this.item.classList.add("disabled"),this.item.setAttribute("aria-disabled","true")))}updateChecked(){if(!this.item)return;const e=this.action.checked;this.item.classList.toggle("checked",!!e),e!==void 0?(this.item.setAttribute("role","menuitemcheckbox"),this.item.setAttribute("aria-checked",e?"true":"false")):(this.item.setAttribute("role","menuitem"),this.item.setAttribute("aria-checked",""))}getMnemonic(){return this.mnemonic}applyStyle(){const e=this.element&&this.element.classList.contains("focused"),t=e&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor,i=e&&this.menuStyle.selectionBackgroundColor?this.menuStyle.selectionBackgroundColor:void 0,n=e&&this.menuStyle.selectionBorderColor?`1px solid ${this.menuStyle.selectionBorderColor}`:"",s=e&&this.menuStyle.selectionBorderColor?"-1px":"";this.item&&(this.item.style.color=t??"",this.item.style.backgroundColor=i??"",this.item.style.outline=n,this.item.style.outlineOffset=s),this.check&&(this.check.style.color=t??"")}}class Jne extends Rue{constructor(e,t,i,n,s){super(e,e,n,s),this.submenuActions=t,this.parentData=i,this.submenuOptions=n,this.mysubmenu=null,this.submenuDisposables=this._register(new le),this.mouseOver=!1,this.expandDirection=n&&n.expandDirection!==void 0?n.expandDirection:{horizontal:tP.Right,vertical:R6.Below},this.showScheduler=new Oi(()=>{this.mouseOver&&(this.cleanupExistingSubmenu(!1),this.createSubmenu(!1))},250),this.hideScheduler=new Oi(()=>{this.element&&!Ks(Mo(),this.element)&&this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))},750)}render(e){super.render(e),this.element&&(this.item&&(this.item.classList.add("monaco-submenu-item"),this.item.tabIndex=0,this.item.setAttribute("aria-haspopup","true"),this.updateAriaExpanded("false"),this.submenuIndicator=ge(this.item,xe("span.submenu-indicator"+ut.asCSSSelector(Se.menuSubmenu))),this.submenuIndicator.setAttribute("aria-hidden","true")),this._register(se(this.element,Le.KEY_UP,t=>{const i=new Zi(t);(i.equals(17)||i.equals(3))&&(Jt.stop(t,!0),this.createSubmenu(!0))})),this._register(se(this.element,Le.KEY_DOWN,t=>{const i=new Zi(t);Mo()===this.item&&(i.equals(17)||i.equals(3))&&Jt.stop(t,!0)})),this._register(se(this.element,Le.MOUSE_OVER,t=>{this.mouseOver||(this.mouseOver=!0,this.showScheduler.schedule())})),this._register(se(this.element,Le.MOUSE_LEAVE,t=>{this.mouseOver=!1})),this._register(se(this.element,Le.FOCUS_OUT,t=>{this.element&&!Ks(Mo(),this.element)&&this.hideScheduler.schedule()})),this._register(this.parentData.parent.onScroll(()=>{this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))})))}updateEnabled(){}onClick(e){Jt.stop(e,!0),this.cleanupExistingSubmenu(!1),this.createSubmenu(!0)}cleanupExistingSubmenu(e){if(this.parentData.submenu&&(e||this.parentData.submenu!==this.mysubmenu)){try{this.parentData.submenu.dispose()}catch{}this.parentData.submenu=void 0,this.updateAriaExpanded("false"),this.submenuContainer&&(this.submenuDisposables.clear(),this.submenuContainer=void 0)}}calculateSubmenuMenuLayout(e,t,i,n){const s={top:0,left:0};return s.left=Mw(e.width,t.width,{position:n.horizontal===tP.Right?0:1,offset:i.left,size:i.width}),s.left>=i.left&&s.left<i.left+i.width&&(i.left+10+t.width<=e.width&&(s.left=i.left+10),i.top+=10,i.height=0),s.top=Mw(e.height,t.height,{position:0,offset:i.top,size:0}),s.top+t.height===i.top&&s.top+i.height+t.height<=e.height&&(s.top+=i.height),s}createSubmenu(e=!0){if(this.element)if(this.parentData.submenu)this.parentData.submenu.focus(!1);else{this.updateAriaExpanded("true"),this.submenuContainer=ge(this.element,xe("div.monaco-submenu")),this.submenuContainer.classList.add("menubar-menu-items-holder","context-view");const t=at(this.parentData.parent.domNode).getComputedStyle(this.parentData.parent.domNode),i=parseFloat(t.paddingTop||"0")||0;this.submenuContainer.style.zIndex="1",this.submenuContainer.style.position="fixed",this.submenuContainer.style.top="0",this.submenuContainer.style.left="0",this.parentData.submenu=new S1(this.submenuContainer,this.submenuActions.length?this.submenuActions:[new fV],this.submenuOptions,this.menuStyle);const n=this.element.getBoundingClientRect(),s={top:n.top-i,left:n.left,height:n.height+2*i,width:n.width},r=this.submenuContainer.getBoundingClientRect(),a=at(this.element),{top:l,left:c}=this.calculateSubmenuMenuLayout(new Ri(a.innerWidth,a.innerHeight),Ri.lift(r),s,this.expandDirection);this.submenuContainer.style.left=`${c-r.left}px`,this.submenuContainer.style.top=`${l-r.top}px`,this.submenuDisposables.add(se(this.submenuContainer,Le.KEY_UP,u=>{new Zi(u).equals(15)&&(Jt.stop(u,!0),this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0))})),this.submenuDisposables.add(se(this.submenuContainer,Le.KEY_DOWN,u=>{new Zi(u).equals(15)&&Jt.stop(u,!0)})),this.submenuDisposables.add(this.parentData.submenu.onDidCancel(()=>{this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0)})),this.parentData.submenu.focus(e),this.mysubmenu=this.parentData.submenu}}updateAriaExpanded(e){var t;this.item&&((t=this.item)==null||t.setAttribute("aria-expanded",e))}applyStyle(){super.applyStyle();const t=this.element&&this.element.classList.contains("focused")&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor;this.submenuIndicator&&(this.submenuIndicator.style.color=t??"")}dispose(){super.dispose(),this.hideScheduler.dispose(),this.mysubmenu&&(this.mysubmenu.dispose(),this.mysubmenu=null),this.submenuContainer&&(this.submenuContainer=void 0)}}class ese extends pS{constructor(e,t,i,n){super(e,t,i),this.menuStyles=n}render(e){super.render(e),this.label&&(this.label.style.borderBottomColor=this.menuStyles.separatorColor?`${this.menuStyles.separatorColor}`:"")}}function r2e(o){const e=N6,t=e.exec(o);if(!t)return o;const i=!t[1];return o.replace(e,i?"$2$3":"").trim()}function tse(o){const e=Ule()[o.id];return`.codicon-${o.id}:before { content: '\\${e.toString(16)}'; }`}function a2e(o,e){let t=`
.monaco-menu {
	font-size: 13px;
	border-radius: 5px;
	min-width: 160px;
}

${tse(Se.menuSelection)}
${tse(Se.menuSubmenu)}

.monaco-menu .monaco-action-bar {
	text-align: right;
	overflow: hidden;
	white-space: nowrap;
}

.monaco-menu .monaco-action-bar .actions-container {
	display: flex;
	margin: 0 auto;
	padding: 0;
	width: 100%;
	justify-content: flex-end;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: inline-block;
}

.monaco-menu .monaco-action-bar.reverse .actions-container {
	flex-direction: row-reverse;
}

.monaco-menu .monaco-action-bar .action-item {
	cursor: pointer;
	display: inline-block;
	transition: transform 50ms ease;
	position: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */
}

.monaco-menu .monaco-action-bar .action-item.disabled {
	cursor: default;
}

.monaco-menu .monaco-action-bar .action-item .icon,
.monaco-menu .monaco-action-bar .action-item .codicon {
	display: inline-block;
}

.monaco-menu .monaco-action-bar .action-item .codicon {
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar .action-label {
	font-size: 11px;
	margin-right: 4px;
}

.monaco-menu .monaco-action-bar .action-item.disabled .action-label,
.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {
	color: var(--vscode-disabledForeground);
}

/* Vertical actions */

.monaco-menu .monaco-action-bar.vertical {
	text-align: left;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	display: block;
	border-bottom: 1px solid var(--vscode-menu-separatorBackground);
	padding-top: 1px;
	padding: 30px;
}

.monaco-menu .secondary-actions .monaco-action-bar .action-label {
	margin-left: 6px;
}

/* Action Items */
.monaco-menu .monaco-action-bar .action-item.select-container {
	overflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */
	flex: 1;
	max-width: 170px;
	min-width: 60px;
	display: flex;
	align-items: center;
	justify-content: center;
	margin-right: 10px;
}

.monaco-menu .monaco-action-bar.vertical {
	margin-left: 0;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	padding: 0;
	transform: none;
	display: flex;
}

.monaco-menu .monaco-action-bar.vertical .action-item.active {
	transform: none;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	flex: 1 1 auto;
	display: flex;
	height: 2em;
	align-items: center;
	position: relative;
	margin: 0 4px;
	border-radius: 4px;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item:hover .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-menu-item:focus .keybinding {
	opacity: unset;
}

.monaco-menu .monaco-action-bar.vertical .action-label {
	flex: 1 1 auto;
	text-decoration: none;
	padding: 0 1em;
	background: none;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .keybinding,
.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	display: inline-block;
	flex: 2 1 auto;
	padding: 0 1em;
	text-align: right;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {
	font-size: 16px !important;
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {
	margin-left: auto;
	margin-right: -20px;
}

.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {
	opacity: 0.4;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {
	display: inline-block;
	box-sizing: border-box;
	margin: 0;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	position: static;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {
	position: absolute;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	width: 100%;
	height: 0px !important;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {
	padding: 0.7em 1em 0.1em 1em;
	font-weight: bold;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label:hover {
	color: inherit;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	position: absolute;
	visibility: hidden;
	width: 1em;
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {
	visibility: visible;
	display: flex;
	align-items: center;
	justify-content: center;
}

/* Context Menu */

.context-view.monaco-menu-container {
	outline: 0;
	border: none;
	animation: fadeIn 0.083s linear;
	-webkit-app-region: no-drag;
}

.context-view.monaco-menu-container :focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {
	outline: 0;
}

.hc-black .context-view.monaco-menu-container,
.hc-light .context-view.monaco-menu-container,
:host-context(.hc-black) .context-view.monaco-menu-container,
:host-context(.hc-light) .context-view.monaco-menu-container {
	box-shadow: none;
}

.hc-black .monaco-menu .monaco-action-bar.vertical .action-item.focused,
.hc-light .monaco-menu .monaco-action-bar.vertical .action-item.focused,
:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused,
:host-context(.hc-light) .monaco-menu .monaco-action-bar.vertical .action-item.focused {
	background: none;
}

/* Vertical Action Bar Styles */

.monaco-menu .monaco-action-bar.vertical {
	padding: 4px 0;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	height: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),
.monaco-menu .monaco-action-bar.vertical .keybinding {
	font-size: inherit;
	padding: 0 2em;
	max-height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	font-size: inherit;
	width: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	font-size: inherit;
	margin: 5px 0 !important;
	padding: 0;
	border-radius: 0;
}

.linux .monaco-menu .monaco-action-bar.vertical .action-label.separator,
:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {
	margin-left: 0;
	margin-right: 0;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	font-size: 60%;
	padding: 0 1.8em;
}

.linux .monaco-menu .monaco-action-bar.vertical .submenu-indicator,
:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
	mask-size: 10px 10px;
	-webkit-mask-size: 10px 10px;
}

.monaco-menu .action-item {
	cursor: default;
}`;if(e){t+=`
			/* Arrows */
			.monaco-scrollable-element > .scrollbar > .scra {
				cursor: pointer;
				font-size: 11px !important;
			}

			.monaco-scrollable-element > .visible {
				opacity: 1;

				/* Background rule added for IE9 - to allow clicks on dom node */
				background:rgba(0,0,0,0);

				transition: opacity 100ms linear;
			}
			.monaco-scrollable-element > .invisible {
				opacity: 0;
				pointer-events: none;
			}
			.monaco-scrollable-element > .invisible.fade {
				transition: opacity 800ms linear;
			}

			/* Scrollable Content Inset Shadow */
			.monaco-scrollable-element > .shadow {
				position: absolute;
				display: none;
			}
			.monaco-scrollable-element > .shadow.top {
				display: block;
				top: 0;
				left: 3px;
				height: 3px;
				width: 100%;
			}
			.monaco-scrollable-element > .shadow.left {
				display: block;
				top: 3px;
				left: 0;
				height: 100%;
				width: 3px;
			}
			.monaco-scrollable-element > .shadow.top-left-corner {
				display: block;
				top: 0;
				left: 0;
				height: 3px;
				width: 3px;
			}
		`;const i=o.scrollbarShadow;i&&(t+=`
				.monaco-scrollable-element > .shadow.top {
					box-shadow: ${i} 0 6px 6px -6px inset;
				}

				.monaco-scrollable-element > .shadow.left {
					box-shadow: ${i} 6px 0 6px -6px inset;
				}

				.monaco-scrollable-element > .shadow.top.left {
					box-shadow: ${i} 6px 6px 6px -6px inset;
				}
			`);const n=o.scrollbarSliderBackground;n&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider {
					background: ${n};
				}
			`);const s=o.scrollbarSliderHoverBackground;s&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider:hover {
					background: ${s};
				}
			`);const r=o.scrollbarSliderActiveBackground;r&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider.active {
					background: ${r};
				}
			`)}return t}class l2e{constructor(e,t,i,n){this.contextViewService=e,this.telemetryService=t,this.notificationService=i,this.keybindingService=n,this.focusToReturn=null,this.lastContainer=null,this.block=null,this.blockDisposable=null,this.options={blockMouse:!0}}configure(e){this.options=e}showContextMenu(e){const t=e.getActions();if(!t.length)return;this.focusToReturn=Mo();let i;const n=Ys(e.domForShadowRoot)?e.domForShadowRoot:void 0;this.contextViewService.showContextView({getAnchor:()=>e.getAnchor(),canRelayout:!1,anchorAlignment:e.anchorAlignment,anchorAxisAlignment:e.anchorAxisAlignment,render:s=>{var u;this.lastContainer=s;const r=e.getMenuClassName?e.getMenuClassName():"";r&&(s.className+=" "+r),this.options.blockMouse&&(this.block=s.appendChild(xe(".context-view-block")),this.block.style.position="fixed",this.block.style.cursor="initial",this.block.style.left="0",this.block.style.top="0",this.block.style.width="100%",this.block.style.height="100%",this.block.style.zIndex="-1",(u=this.blockDisposable)==null||u.dispose(),this.blockDisposable=se(this.block,Le.MOUSE_DOWN,f=>f.stopPropagation()));const a=new le,l=e.actionRunner||new lC;l.onWillRun(f=>this.onActionRun(f,!e.skipTelemetry),this,a),l.onDidRun(this.onDidActionRun,this,a),i=new S1(s,t,{actionViewItemProvider:e.getActionViewItem,context:e.getActionsContext?e.getActionsContext():null,actionRunner:l,getKeyBinding:e.getKeyBinding?e.getKeyBinding:f=>this.keybindingService.lookupKeybinding(f.id)},s2e),i.onDidCancel(()=>this.contextViewService.hideContextView(!0),null,a),i.onDidBlur(()=>this.contextViewService.hideContextView(!0),null,a);const c=at(s);return a.add(se(c,Le.BLUR,()=>this.contextViewService.hideContextView(!0))),a.add(se(c,Le.MOUSE_DOWN,f=>{if(f.defaultPrevented)return;const g=new td(c,f);let p=g.target;if(!g.rightButton){for(;p;){if(p===s)return;p=p.parentElement}this.contextViewService.hideContextView(!0)}})),od(a,i)},focus:()=>{i==null||i.focus(!!e.autoSelectFirstItem)},onHide:s=>{var r,a,l;(r=e.onHide)==null||r.call(e,!!s),this.block&&(this.block.remove(),this.block=null),(a=this.blockDisposable)==null||a.dispose(),this.blockDisposable=null,this.lastContainer&&(Mo()===this.lastContainer||Ks(Mo(),this.lastContainer))&&((l=this.focusToReturn)==null||l.focus()),this.lastContainer=null}},n,!!n)}onActionRun(e,t){t&&this.telemetryService.publicLog2("workbenchActionExecuted",{id:e.action.id,from:"contextMenu"}),this.contextViewService.hideContextView(!1)}onDidActionRun(e){e.error&&!Tc(e.error)&&this.notificationService.error(e.error)}}var c2e=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},tw=function(o,e){return function(t,i){e(t,i,o)}};let M6=class extends X{get contextMenuHandler(){return this._contextMenuHandler||(this._contextMenuHandler=new l2e(this.contextViewService,this.telemetryService,this.notificationService,this.keybindingService)),this._contextMenuHandler}constructor(e,t,i,n,s,r){super(),this.telemetryService=e,this.notificationService=t,this.contextViewService=i,this.keybindingService=n,this.menuService=s,this.contextKeyService=r,this._contextMenuHandler=void 0,this._onDidShowContextMenu=this._store.add(new Y),this.onDidShowContextMenu=this._onDidShowContextMenu.event,this._onDidHideContextMenu=this._store.add(new Y)}configure(e){this.contextMenuHandler.configure(e)}showContextMenu(e){e=A6.transform(e,this.menuService,this.contextKeyService),this.contextMenuHandler.showContextMenu({...e,onHide:t=>{var i;(i=e.onHide)==null||i.call(e,t),this._onDidHideContextMenu.fire()}}),eg.getInstance().resetKeyStatus(),this._onDidShowContextMenu.fire()}};M6=c2e([tw(0,tr),tw(1,fs),tw(2,Pg),tw(3,Di),tw(4,Gl),tw(5,ht)],M6);var A6;(function(o){function e(i){return i&&i.menuId instanceof qe}function t(i,n,s){if(!e(i))return i;const{menuId:r,menuActionOptions:a,contextKeyService:l}=i;return{...i,getActions:()=>{const c=[];if(r){const u=n.getMenuActions(r,l??s,a);o2e(u,c)}return i.getActions?Zs.join(i.getActions(),c):c}}}o.transform=t})(A6||(A6={}));var iP;(function(o){o[o.API=0]="API",o[o.USER=1]="USER"})(iP||(iP={}));var HK=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},nP=function(o,e){return function(t,i){e(t,i,o)}};let P6=class{constructor(e){this._commandService=e}async open(e,t){if(!UF(e,Lt.command))return!1;if(!(t!=null&&t.allowCommands)||(typeof e=="string"&&(e=st.parse(e)),Array.isArray(t.allowCommands)&&!t.allowCommands.includes(e.path)))return!0;let i=[];try{i=t6(decodeURIComponent(e.query))}catch{try{i=t6(e.query)}catch{}}return Array.isArray(i)||(i=[i]),await this._commandService.executeCommand(e.path,...i),!0}};P6=HK([nP(0,nn)],P6);let O6=class{constructor(e){this._editorService=e}async open(e,t){typeof e=="string"&&(e=st.parse(e));const{selection:i,uri:n}=OMe(e);return e=n,e.scheme===Lt.file&&(e=vAe(e)),await this._editorService.openCodeEditor({resource:e,options:{selection:i,source:t!=null&&t.fromUserGesture?iP.USER:iP.API,...t==null?void 0:t.editorOptions}},this._editorService.getFocusedCodeEditor(),t==null?void 0:t.openToSide),!0}};O6=HK([nP(0,hi)],O6);let F6=class{constructor(e,t){this._openers=new jr,this._validators=new jr,this._resolvers=new jr,this._resolvedUriTargets=new co(i=>i.with({path:null,fragment:null,query:null}).toString()),this._externalOpeners=new jr,this._defaultExternalOpener={openExternal:async i=>(rV(i,Lt.http,Lt.https)?kce(i):Vi.location.href=i,!0)},this._openers.push({open:async(i,n)=>n!=null&&n.openExternal||rV(i,Lt.mailto,Lt.http,Lt.https,Lt.vsls)?(await this._doOpenExternal(i,n),!0):!1}),this._openers.push(new P6(t)),this._openers.push(new O6(e))}registerOpener(e){return{dispose:this._openers.unshift(e)}}async open(e,t){const i=typeof e=="string"?st.parse(e):e,n=this._resolvedUriTargets.get(i)??e;for(const s of this._validators)if(!await s.shouldOpen(n,t))return!1;for(const s of this._openers)if(await s.open(e,t))return!0;return!1}async resolveExternalUri(e,t){for(const i of this._resolvers)try{const n=await i.resolveExternalUri(e,t);if(n)return this._resolvedUriTargets.has(n.resolved)||this._resolvedUriTargets.set(n.resolved,e),n}catch{}throw new Error("Could not resolve external URI: "+e.toString())}async _doOpenExternal(e,t){const i=typeof e=="string"?st.parse(e):e;let n;try{n=(await this.resolveExternalUri(i,t)).resolved}catch{n=i}let s;if(typeof e=="string"&&i.toString()===n.toString()?s=e:s=encodeURI(n.toString(!0)),t!=null&&t.allowContributedOpeners){const r=typeof(t==null?void 0:t.allowContributedOpeners)=="string"?t==null?void 0:t.allowContributedOpeners:void 0;for(const a of this._externalOpeners)if(await a.openExternal(s,{sourceUri:i,preferredOpenerId:r},Mt.None))return!0}return this._defaultExternalOpener.openExternal(s,{sourceUri:i},Mt.None)}dispose(){this._validators.clear()}};F6=HK([nP(0,hi),nP(1,nn)],F6);const Aa=Gt("editorWorkerService");var Yn;(function(o){o[o.Hint=1]="Hint",o[o.Info=2]="Info",o[o.Warning=4]="Warning",o[o.Error=8]="Error"})(Yn||(Yn={}));(function(o){function e(r,a){return a-r}o.compare=e;const t=Object.create(null);t[o.Error]=v("sev.error","Error"),t[o.Warning]=v("sev.warning","Warning"),t[o.Info]=v("sev.info","Info");function i(r){return t[r]||""}o.toString=i;function n(r){switch(r){case hs.Error:return o.Error;case hs.Warning:return o.Warning;case hs.Info:return o.Info;case hs.Ignore:return o.Hint}}o.fromSeverity=n;function s(r){switch(r){case o.Error:return hs.Error;case o.Warning:return hs.Warning;case o.Info:return hs.Info;case o.Hint:return hs.Ignore}}o.toSeverity=s})(Yn||(Yn={}));var sP;(function(o){const e="";function t(n){return i(n,!0)}o.makeKey=t;function i(n,s){const r=[e];return n.source?r.push(n.source.replace("","\\")):r.push(e),n.code?typeof n.code=="string"?r.push(n.code.replace("","\\")):r.push(n.code.value.replace("","\\")):r.push(e),n.severity!==void 0&&n.severity!==null?r.push(Yn.toString(n.severity)):r.push(e),n.message&&s?r.push(n.message.replace("","\\")):r.push(e),n.startLineNumber!==void 0&&n.startLineNumber!==null?r.push(n.startLineNumber.toString()):r.push(e),n.startColumn!==void 0&&n.startColumn!==null?r.push(n.startColumn.toString()):r.push(e),n.endLineNumber!==void 0&&n.endLineNumber!==null?r.push(n.endLineNumber.toString()):r.push(e),n.endColumn!==void 0&&n.endColumn!==null?r.push(n.endColumn.toString()):r.push(e),r.push(e),r.join("")}o.makeKeyOptionalMessage=i})(sP||(sP={}));const Kh=Gt("markerService"),Mue=W("editor.lineHighlightBackground",null,v("lineHighlight","Background color for the highlight of line at the cursor position.")),ise=W("editor.lineHighlightBorder",{dark:"#282828",light:"#eeeeee",hcDark:"#f38518",hcLight:si},v("lineHighlightBorderBox","Background color for the border around the line at the cursor position."));W("editor.rangeHighlightBackground",{dark:"#ffffff0b",light:"#fdff0033",hcDark:null,hcLight:null},v("rangeHighlight","Background color of highlighted ranges, like by quick open and find features. The color must not be opaque so as not to hide underlying decorations."),!0);W("editor.rangeHighlightBorder",{dark:null,light:null,hcDark:vn,hcLight:vn},v("rangeHighlightBorder","Background color of the border around highlighted ranges."));W("editor.symbolHighlightBackground",{dark:ig,light:ig,hcDark:null,hcLight:null},v("symbolHighlight","Background color of highlighted symbol, like for go to definition or go next/previous symbol. The color must not be opaque so as not to hide underlying decorations."),!0);W("editor.symbolHighlightBorder",{dark:null,light:null,hcDark:vn,hcLight:vn},v("symbolHighlightBorder","Background color of the border around highlighted symbols."));const M4=W("editorCursor.foreground",{dark:"#AEAFAD",light:ue.black,hcDark:ue.white,hcLight:"#0F4A85"},v("caret","Color of the editor cursor.")),VK=W("editorCursor.background",null,v("editorCursorBackground","The background color of the editor cursor. Allows customizing the color of a character overlapped by a block cursor.")),Aue=W("editorMultiCursor.primary.foreground",M4,v("editorMultiCursorPrimaryForeground","Color of the primary editor cursor when multiple cursors are present.")),d2e=W("editorMultiCursor.primary.background",VK,v("editorMultiCursorPrimaryBackground","The background color of the primary editor cursor when multiple cursors are present. Allows customizing the color of a character overlapped by a block cursor.")),Pue=W("editorMultiCursor.secondary.foreground",M4,v("editorMultiCursorSecondaryForeground","Color of secondary editor cursors when multiple cursors are present.")),u2e=W("editorMultiCursor.secondary.background",VK,v("editorMultiCursorSecondaryBackground","The background color of secondary editor cursors when multiple cursors are present. Allows customizing the color of a character overlapped by a block cursor.")),zK=W("editorWhitespace.foreground",{dark:"#e3e4e229",light:"#33333333",hcDark:"#e3e4e229",hcLight:"#CCCCCC"},v("editorWhitespaces","Color of whitespace characters in the editor.")),h2e=W("editorLineNumber.foreground",{dark:"#858585",light:"#237893",hcDark:ue.white,hcLight:"#292929"},v("editorLineNumbers","Color of editor line numbers.")),f2e=W("editorIndentGuide.background",zK,v("editorIndentGuides","Color of the editor indentation guides."),!1,v("deprecatedEditorIndentGuides","'editorIndentGuide.background' is deprecated. Use 'editorIndentGuide.background1' instead.")),g2e=W("editorIndentGuide.activeBackground",zK,v("editorActiveIndentGuide","Color of the active editor indentation guides."),!1,v("deprecatedEditorActiveIndentGuide","'editorIndentGuide.activeBackground' is deprecated. Use 'editorIndentGuide.activeBackground1' instead.")),gI=W("editorIndentGuide.background1",f2e,v("editorIndentGuides1","Color of the editor indentation guides (1).")),p2e=W("editorIndentGuide.background2","#00000000",v("editorIndentGuides2","Color of the editor indentation guides (2).")),m2e=W("editorIndentGuide.background3","#00000000",v("editorIndentGuides3","Color of the editor indentation guides (3).")),_2e=W("editorIndentGuide.background4","#00000000",v("editorIndentGuides4","Color of the editor indentation guides (4).")),v2e=W("editorIndentGuide.background5","#00000000",v("editorIndentGuides5","Color of the editor indentation guides (5).")),b2e=W("editorIndentGuide.background6","#00000000",v("editorIndentGuides6","Color of the editor indentation guides (6).")),pI=W("editorIndentGuide.activeBackground1",g2e,v("editorActiveIndentGuide1","Color of the active editor indentation guides (1).")),C2e=W("editorIndentGuide.activeBackground2","#00000000",v("editorActiveIndentGuide2","Color of the active editor indentation guides (2).")),y2e=W("editorIndentGuide.activeBackground3","#00000000",v("editorActiveIndentGuide3","Color of the active editor indentation guides (3).")),w2e=W("editorIndentGuide.activeBackground4","#00000000",v("editorActiveIndentGuide4","Color of the active editor indentation guides (4).")),S2e=W("editorIndentGuide.activeBackground5","#00000000",v("editorActiveIndentGuide5","Color of the active editor indentation guides (5).")),L2e=W("editorIndentGuide.activeBackground6","#00000000",v("editorActiveIndentGuide6","Color of the active editor indentation guides (6).")),x2e=W("editorActiveLineNumber.foreground",{dark:"#c6c6c6",light:"#0B216F",hcDark:vn,hcLight:vn},v("editorActiveLineNumber","Color of editor active line number"),!1,v("deprecatedEditorActiveLineNumber","Id is deprecated. Use 'editorLineNumber.activeForeground' instead."));W("editorLineNumber.activeForeground",x2e,v("editorActiveLineNumber","Color of editor active line number"));const k2e=W("editorLineNumber.dimmedForeground",null,v("editorDimmedLineNumber","Color of the final editor line when editor.renderFinalNewline is set to dimmed."));W("editorRuler.foreground",{dark:"#5A5A5A",light:ue.lightgrey,hcDark:ue.white,hcLight:"#292929"},v("editorRuler","Color of the editor rulers."));W("editorCodeLens.foreground",{dark:"#999999",light:"#919191",hcDark:"#999999",hcLight:"#292929"},v("editorCodeLensForeground","Foreground color of editor CodeLens"));W("editorBracketMatch.background",{dark:"#0064001a",light:"#0064001a",hcDark:"#0064001a",hcLight:"#0000"},v("editorBracketMatchBackground","Background color behind matching brackets"));W("editorBracketMatch.border",{dark:"#888",light:"#B9B9B9",hcDark:si,hcLight:si},v("editorBracketMatchBorder","Color for matching brackets boxes"));const D2e=W("editorOverviewRuler.border",{dark:"#7f7f7f4d",light:"#7f7f7f4d",hcDark:"#7f7f7f4d",hcLight:"#666666"},v("editorOverviewRulerBorder","Color of the overview ruler border.")),E2e=W("editorOverviewRuler.background",null,v("editorOverviewRulerBackground","Background color of the editor overview ruler."));W("editorGutter.background",ud,v("editorGutter","Background color of the editor gutter. The gutter contains the glyph margins and the line numbers."));W("editorUnnecessaryCode.border",{dark:null,light:null,hcDark:ue.fromHex("#fff").transparent(.8),hcLight:si},v("unnecessaryCodeBorder","Border color of unnecessary (unused) source code in the editor."));const I2e=W("editorUnnecessaryCode.opacity",{dark:ue.fromHex("#000a"),light:ue.fromHex("#0007"),hcDark:null,hcLight:null},v("unnecessaryCodeOpacity",`Opacity of unnecessary (unused) source code in the editor. For example, "#000000c0" will render the code with 75% opacity. For high contrast themes, use the  'editorUnnecessaryCode.border' theme color to underline unnecessary code instead of fading it out.`));W("editorGhostText.border",{dark:null,light:null,hcDark:ue.fromHex("#fff").transparent(.8),hcLight:ue.fromHex("#292929").transparent(.8)},v("editorGhostTextBorder","Border color of ghost text in the editor."));const T2e=W("editorGhostText.foreground",{dark:ue.fromHex("#ffffff56"),light:ue.fromHex("#0007"),hcDark:null,hcLight:null},v("editorGhostTextForeground","Foreground color of the ghost text in the editor."));W("editorGhostText.background",null,v("editorGhostTextBackground","Background color of the ghost text in the editor."));const N2e=new ue(new li(0,122,204,.6)),Oue=W("editorOverviewRuler.rangeHighlightForeground",N2e,v("overviewRulerRangeHighlight","Overview ruler marker color for range highlights. The color must not be opaque so as not to hide underlying decorations."),!0),R2e=W("editorOverviewRuler.errorForeground",{dark:new ue(new li(255,18,18,.7)),light:new ue(new li(255,18,18,.7)),hcDark:new ue(new li(255,50,50,1)),hcLight:"#B5200D"},v("overviewRuleError","Overview ruler marker color for errors.")),M2e=W("editorOverviewRuler.warningForeground",{dark:xg,light:xg,hcDark:kD,hcLight:kD},v("overviewRuleWarning","Overview ruler marker color for warnings.")),A2e=W("editorOverviewRuler.infoForeground",{dark:Ph,light:Ph,hcDark:DD,hcLight:DD},v("overviewRuleInfo","Overview ruler marker color for infos.")),Fue=W("editorBracketHighlight.foreground1",{dark:"#FFD700",light:"#0431FAFF",hcDark:"#FFD700",hcLight:"#0431FAFF"},v("editorBracketHighlightForeground1","Foreground color of brackets (1). Requires enabling bracket pair colorization.")),Bue=W("editorBracketHighlight.foreground2",{dark:"#DA70D6",light:"#319331FF",hcDark:"#DA70D6",hcLight:"#319331FF"},v("editorBracketHighlightForeground2","Foreground color of brackets (2). Requires enabling bracket pair colorization.")),Wue=W("editorBracketHighlight.foreground3",{dark:"#179FFF",light:"#7B3814FF",hcDark:"#87CEFA",hcLight:"#7B3814FF"},v("editorBracketHighlightForeground3","Foreground color of brackets (3). Requires enabling bracket pair colorization.")),Hue=W("editorBracketHighlight.foreground4","#00000000",v("editorBracketHighlightForeground4","Foreground color of brackets (4). Requires enabling bracket pair colorization.")),Vue=W("editorBracketHighlight.foreground5","#00000000",v("editorBracketHighlightForeground5","Foreground color of brackets (5). Requires enabling bracket pair colorization.")),zue=W("editorBracketHighlight.foreground6","#00000000",v("editorBracketHighlightForeground6","Foreground color of brackets (6). Requires enabling bracket pair colorization.")),P2e=W("editorBracketHighlight.unexpectedBracket.foreground",{dark:new ue(new li(255,18,18,.8)),light:new ue(new li(255,18,18,.8)),hcDark:"new Color(new RGBA(255, 50, 50, 1))",hcLight:"#B5200D"},v("editorBracketHighlightUnexpectedBracketForeground","Foreground color of unexpected brackets.")),O2e=W("editorBracketPairGuide.background1","#00000000",v("editorBracketPairGuide.background1","Background color of inactive bracket pair guides (1). Requires enabling bracket pair guides.")),F2e=W("editorBracketPairGuide.background2","#00000000",v("editorBracketPairGuide.background2","Background color of inactive bracket pair guides (2). Requires enabling bracket pair guides.")),B2e=W("editorBracketPairGuide.background3","#00000000",v("editorBracketPairGuide.background3","Background color of inactive bracket pair guides (3). Requires enabling bracket pair guides.")),W2e=W("editorBracketPairGuide.background4","#00000000",v("editorBracketPairGuide.background4","Background color of inactive bracket pair guides (4). Requires enabling bracket pair guides.")),H2e=W("editorBracketPairGuide.background5","#00000000",v("editorBracketPairGuide.background5","Background color of inactive bracket pair guides (5). Requires enabling bracket pair guides.")),V2e=W("editorBracketPairGuide.background6","#00000000",v("editorBracketPairGuide.background6","Background color of inactive bracket pair guides (6). Requires enabling bracket pair guides.")),z2e=W("editorBracketPairGuide.activeBackground1","#00000000",v("editorBracketPairGuide.activeBackground1","Background color of active bracket pair guides (1). Requires enabling bracket pair guides.")),U2e=W("editorBracketPairGuide.activeBackground2","#00000000",v("editorBracketPairGuide.activeBackground2","Background color of active bracket pair guides (2). Requires enabling bracket pair guides.")),$2e=W("editorBracketPairGuide.activeBackground3","#00000000",v("editorBracketPairGuide.activeBackground3","Background color of active bracket pair guides (3). Requires enabling bracket pair guides.")),j2e=W("editorBracketPairGuide.activeBackground4","#00000000",v("editorBracketPairGuide.activeBackground4","Background color of active bracket pair guides (4). Requires enabling bracket pair guides.")),q2e=W("editorBracketPairGuide.activeBackground5","#00000000",v("editorBracketPairGuide.activeBackground5","Background color of active bracket pair guides (5). Requires enabling bracket pair guides.")),K2e=W("editorBracketPairGuide.activeBackground6","#00000000",v("editorBracketPairGuide.activeBackground6","Background color of active bracket pair guides (6). Requires enabling bracket pair guides."));W("editorUnicodeHighlight.border",xg,v("editorUnicodeHighlight.border","Border color used to highlight unicode characters."));W("editorUnicodeHighlight.background",jNe,v("editorUnicodeHighlight.background","Background color used to highlight unicode characters."));Nc((o,e)=>{const t=o.getColor(ud),i=o.getColor(Mue),n=i&&!i.isTransparent()?i:t;n&&e.addRule(`.monaco-editor .inputarea.ime-input { background-color: ${n}; }`)});function G2e(o,e){const t=[],i=[];for(const n of o)e.has(n)||t.push(n);for(const n of e)o.has(n)||i.push(n);return{removed:t,added:i}}function Y2e(o,e){const t=new Set;for(const i of e)o.has(i)&&t.add(i);return t}var Z2e=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},nse=function(o,e){return function(t,i){e(t,i,o)}};let B6=class extends X{constructor(e,t){super(),this._markerService=t,this._onDidChangeMarker=this._register(new Y),this._markerDecorations=new co,e.getModels().forEach(i=>this._onModelAdded(i)),this._register(e.onModelAdded(this._onModelAdded,this)),this._register(e.onModelRemoved(this._onModelRemoved,this)),this._register(this._markerService.onMarkerChanged(this._handleMarkerChange,this))}dispose(){super.dispose(),this._markerDecorations.forEach(e=>e.dispose()),this._markerDecorations.clear()}getMarker(e,t){const i=this._markerDecorations.get(e);return i&&i.getMarker(t)||null}_handleMarkerChange(e){e.forEach(t=>{const i=this._markerDecorations.get(t);i&&this._updateDecorations(i)})}_onModelAdded(e){const t=new X2e(e);this._markerDecorations.set(e.uri,t),this._updateDecorations(t)}_onModelRemoved(e){var i;const t=this._markerDecorations.get(e.uri);t&&(t.dispose(),this._markerDecorations.delete(e.uri)),(e.uri.scheme===Lt.inMemory||e.uri.scheme===Lt.internal||e.uri.scheme===Lt.vscode)&&((i=this._markerService)==null||i.read({resource:e.uri}).map(n=>n.owner).forEach(n=>this._markerService.remove(n,[e.uri])))}_updateDecorations(e){const t=this._markerService.read({resource:e.model.uri,take:500});e.update(t)&&this._onDidChangeMarker.fire(e.model)}};B6=Z2e([nse(0,un),nse(1,Kh)],B6);class X2e extends X{constructor(e){super(),this.model=e,this._map=new QIe,this._register(it(()=>{this.model.deltaDecorations([...this._map.values()],[]),this._map.clear()}))}update(e){const{added:t,removed:i}=G2e(new Set(this._map.keys()),new Set(e));if(t.length===0&&i.length===0)return!1;const n=i.map(a=>this._map.get(a)),s=t.map(a=>({range:this._createDecorationRange(this.model,a),options:this._createDecorationOption(a)})),r=this.model.deltaDecorations(n,s);for(const a of i)this._map.delete(a);for(let a=0;a<r.length;a++)this._map.set(t[a],r[a]);return!0}getMarker(e){return this._map.getKey(e.id)}_createDecorationRange(e,t){let i=M.lift(t);if(t.severity===Yn.Hint&&!this._hasMarkerTag(t,1)&&!this._hasMarkerTag(t,2)&&(i=i.setEndPosition(i.startLineNumber,i.startColumn+2)),i=e.validateRange(i),i.isEmpty()){const n=e.getLineLastNonWhitespaceColumn(i.startLineNumber)||e.getLineMaxColumn(i.startLineNumber);if(n===1||i.endColumn>=n)return i;const s=e.getWordAtPosition(i.getStartPosition());s&&(i=new M(i.startLineNumber,s.startColumn,i.endLineNumber,s.endColumn))}else if(t.endColumn===Number.MAX_VALUE&&t.startColumn===1&&i.startLineNumber===i.endLineNumber){const n=e.getLineFirstNonWhitespaceColumn(t.startLineNumber);n<i.endColumn&&(i=new M(i.startLineNumber,n,i.endLineNumber,i.endColumn),t.startColumn=n)}return i}_createDecorationOption(e){let t,i,n,s,r;switch(e.severity){case Yn.Hint:this._hasMarkerTag(e,2)?t=void 0:this._hasMarkerTag(e,1)?t="squiggly-unnecessary":t="squiggly-hint",n=0;break;case Yn.Info:t="squiggly-info",i=Gn(A2e),n=10,r={color:Gn(fRe),position:1};break;case Yn.Warning:t="squiggly-warning",i=Gn(M2e),n=20,r={color:Gn(gRe),position:1};break;case Yn.Error:default:t="squiggly-error",i=Gn(R2e),n=30,r={color:Gn(pRe),position:1};break}return e.tags&&(e.tags.indexOf(1)!==-1&&(s="squiggly-inline-unnecessary"),e.tags.indexOf(2)!==-1&&(s="squiggly-inline-deprecated")),{description:"marker-decoration",stickiness:1,className:t,showIfCollapsed:!0,overviewRuler:{color:i,position:Hl.Right},minimap:r,zIndex:n,inlineClassName:s}}_hasMarkerTag(e,t){return e.tags?e.tags.indexOf(t)>=0:!1}}const UK=Gt("markerDecorationsService");class Fs{static _nextVisibleColumn(e,t,i){return e===9?Fs.nextRenderTabStop(t,i):Fm(e)||Fq(e)?t+2:t+1}static visibleColumnFromColumn(e,t,i){const n=Math.min(t-1,e.length),s=e.substring(0,n),r=new mA(s);let a=0;for(;!r.eol();){const l=pA(s,n,r.offset);r.nextGraphemeLength(),a=this._nextVisibleColumn(l,a,i)}return a}static columnFromVisibleColumn(e,t,i){if(t<=0)return 1;const n=e.length,s=new mA(e);let r=0,a=1;for(;!s.eol();){const l=pA(e,n,s.offset);s.nextGraphemeLength();const c=this._nextVisibleColumn(l,r,i),u=s.offset+1;if(c>=t){const f=t-r;return c-t<f?u:a}r=c,a=u}return n+1}static nextRenderTabStop(e,t){return e+t-e%t}static nextIndentTabStop(e,t){return e+t-e%t}static prevRenderTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}static prevIndentTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}}function Q2e(o,e,t){let i=0;for(let s=0;s<o.length;s++)o.charAt(s)==="	"?i=Fs.nextIndentTabStop(i,e):i++;let n="";if(!t){const s=Math.floor(i/e);i=i%e;for(let r=0;r<s;r++)n+="	"}for(let s=0;s<i;s++)n+=" ";return n}function $K(o,e,t){let i=Sr(o);return i===-1&&(i=o.length),Q2e(o.substring(0,i),e,t)+o.substring(i)}class sse{constructor(e,t,i,n){this.range=e,this.nestingLevel=t,this.nestingLevelOfEqualBracketType=i,this.isInvalid=n}}class J2e{constructor(e,t,i,n,s,r){this.range=e,this.openingBracketRange=t,this.closingBracketRange=i,this.nestingLevel=n,this.nestingLevelOfEqualBracketType=s,this.bracketPairNode=r}get openingBracketInfo(){return this.bracketPairNode.openingBracket.bracketInfo}}class eFe extends J2e{constructor(e,t,i,n,s,r,a){super(e,t,i,n,s,r),this.minVisibleColumnIndentation=a}}function tFe(o,e,t,i){return o!==t?bs(t-o,i):bs(0,i-e)}const qr=0;function oP(o){return o===0}const Wl=2**26;function bs(o,e){return o*Wl+e}function wc(o){const e=o,t=Math.floor(e/Wl),i=e-t*Wl;return new dd(t,i)}function iFe(o){return Math.floor(o/Wl)}function Zn(o,e){let t=o+e;return e>=Wl&&(t=t-o%Wl),t}function nFe(o,e){return o.reduce((t,i)=>Zn(t,e(i)),qr)}function Uue(o,e){return o===e}function VD(o,e){const t=o,i=e;if(i-t<=0)return qr;const s=Math.floor(t/Wl),r=Math.floor(i/Wl),a=i-r*Wl;if(s===r){const l=t-s*Wl;return bs(0,a-l)}else return bs(r-s,a)}function L1(o,e){return o<e}function x1(o,e){return o<=e}function Hx(o,e){return o>=e}function Fw(o){return bs(o.lineNumber-1,o.column-1)}function Qv(o,e){const t=o,i=Math.floor(t/Wl),n=t-i*Wl,s=e,r=Math.floor(s/Wl),a=s-r*Wl;return new M(i+1,n+1,r+1,a+1)}function sFe(o){const e=zh(o);return bs(e.length-1,e[e.length-1].length)}class ng{static fromModelContentChanges(e){return e.map(i=>{const n=M.lift(i.range);return new ng(Fw(n.getStartPosition()),Fw(n.getEndPosition()),sFe(i.text))}).reverse()}constructor(e,t,i){this.startOffset=e,this.endOffset=t,this.newLength=i}toString(){return`[${wc(this.startOffset)}...${wc(this.endOffset)}) -> ${wc(this.newLength)}`}}class oFe{constructor(e){this.nextEditIdx=0,this.deltaOldToNewLineCount=0,this.deltaOldToNewColumnCount=0,this.deltaLineIdxInOld=-1,this.edits=e.map(t=>jK.from(t))}getOffsetBeforeChange(e){return this.adjustNextEdit(e),this.translateCurToOld(e)}getDistanceToNextChange(e){this.adjustNextEdit(e);const t=this.edits[this.nextEditIdx],i=t?this.translateOldToCur(t.offsetObj):null;return i===null?null:VD(e,i)}translateOldToCur(e){return e.lineCount===this.deltaLineIdxInOld?bs(e.lineCount+this.deltaOldToNewLineCount,e.columnCount+this.deltaOldToNewColumnCount):bs(e.lineCount+this.deltaOldToNewLineCount,e.columnCount)}translateCurToOld(e){const t=wc(e);return t.lineCount-this.deltaOldToNewLineCount===this.deltaLineIdxInOld?bs(t.lineCount-this.deltaOldToNewLineCount,t.columnCount-this.deltaOldToNewColumnCount):bs(t.lineCount-this.deltaOldToNewLineCount,t.columnCount)}adjustNextEdit(e){for(;this.nextEditIdx<this.edits.length;){const t=this.edits[this.nextEditIdx],i=this.translateOldToCur(t.endOffsetAfterObj);if(x1(i,e)){this.nextEditIdx++;const n=wc(i),s=wc(this.translateOldToCur(t.endOffsetBeforeObj)),r=n.lineCount-s.lineCount;this.deltaOldToNewLineCount+=r;const a=this.deltaLineIdxInOld===t.endOffsetBeforeObj.lineCount?this.deltaOldToNewColumnCount:0,l=n.columnCount-s.columnCount;this.deltaOldToNewColumnCount=a+l,this.deltaLineIdxInOld=t.endOffsetBeforeObj.lineCount}else break}}}class jK{static from(e){return new jK(e.startOffset,e.endOffset,e.newLength)}constructor(e,t,i){this.endOffsetBeforeObj=wc(t),this.endOffsetAfterObj=wc(Zn(e,i)),this.offsetObj=wc(e)}}const bR=[],uc=class uc{static create(e,t){if(e<=128&&t.length===0){let i=uc.cache[e];return i||(i=new uc(e,t),uc.cache[e]=i),i}return new uc(e,t)}static getEmpty(){return this.empty}constructor(e,t){this.items=e,this.additionalItems=t}add(e,t){const i=t.getKey(e);let n=i>>5;if(n===0){const r=1<<i|this.items;return r===this.items?this:uc.create(r,this.additionalItems)}n--;const s=this.additionalItems.slice(0);for(;s.length<n;)s.push(0);return s[n]|=1<<(i&31),uc.create(this.items,s)}merge(e){const t=this.items|e.items;if(this.additionalItems===bR&&e.additionalItems===bR)return t===this.items?this:t===e.items?e:uc.create(t,bR);const i=[];for(let n=0;n<Math.max(this.additionalItems.length,e.additionalItems.length);n++){const s=this.additionalItems[n]||0,r=e.additionalItems[n]||0;i.push(s|r)}return uc.create(t,i)}intersects(e){if(this.items&e.items)return!0;for(let t=0;t<Math.min(this.additionalItems.length,e.additionalItems.length);t++)if(this.additionalItems[t]&e.additionalItems[t])return!0;return!1}};uc.cache=new Array(129),uc.empty=uc.create(0,bR);let Xa=uc;const ose={getKey(o){return o}};class $ue{constructor(){this.items=new Map}getKey(e){let t=this.items.get(e);return t===void 0&&(t=this.items.size,this.items.set(e,t)),t}}class qK{get length(){return this._length}constructor(e){this._length=e}}class zD extends qK{static create(e,t,i){let n=e.length;return t&&(n=Zn(n,t.length)),i&&(n=Zn(n,i.length)),new zD(n,e,t,i,t?t.missingOpeningBracketIds:Xa.getEmpty())}get kind(){return 2}get listHeight(){return 0}get childrenLength(){return 3}getChild(e){switch(e){case 0:return this.openingBracket;case 1:return this.child;case 2:return this.closingBracket}throw new Error("Invalid child index")}get children(){const e=[];return e.push(this.openingBracket),this.child&&e.push(this.child),this.closingBracket&&e.push(this.closingBracket),e}constructor(e,t,i,n,s){super(e),this.openingBracket=t,this.child=i,this.closingBracket=n,this.missingOpeningBracketIds=s}canBeReused(e){return!(this.closingBracket===null||e.intersects(this.missingOpeningBracketIds))}deepClone(){return new zD(this.length,this.openingBracket.deepClone(),this.child&&this.child.deepClone(),this.closingBracket&&this.closingBracket.deepClone(),this.missingOpeningBracketIds)}computeMinIndentation(e,t){return this.child?this.child.computeMinIndentation(Zn(e,this.openingBracket.length),t):Number.MAX_SAFE_INTEGER}}class Fh extends qK{static create23(e,t,i,n=!1){let s=e.length,r=e.missingOpeningBracketIds;if(e.listHeight!==t.listHeight)throw new Error("Invalid list heights");if(s=Zn(s,t.length),r=r.merge(t.missingOpeningBracketIds),i){if(e.listHeight!==i.listHeight)throw new Error("Invalid list heights");s=Zn(s,i.length),r=r.merge(i.missingOpeningBracketIds)}return n?new rFe(s,e.listHeight+1,e,t,i,r):new UD(s,e.listHeight+1,e,t,i,r)}static getEmpty(){return new aFe(qr,0,[],Xa.getEmpty())}get kind(){return 4}get missingOpeningBracketIds(){return this._missingOpeningBracketIds}constructor(e,t,i){super(e),this.listHeight=t,this._missingOpeningBracketIds=i,this.cachedMinIndentation=-1}throwIfImmutable(){}makeLastElementMutable(){this.throwIfImmutable();const e=this.childrenLength;if(e===0)return;const t=this.getChild(e-1),i=t.kind===4?t.toMutable():t;return t!==i&&this.setChild(e-1,i),i}makeFirstElementMutable(){if(this.throwIfImmutable(),this.childrenLength===0)return;const t=this.getChild(0),i=t.kind===4?t.toMutable():t;return t!==i&&this.setChild(0,i),i}canBeReused(e){if(e.intersects(this.missingOpeningBracketIds)||this.childrenLength===0)return!1;let t=this;for(;t.kind===4;){const i=t.childrenLength;if(i===0)throw new wi;t=t.getChild(i-1)}return t.canBeReused(e)}handleChildrenChanged(){this.throwIfImmutable();const e=this.childrenLength;let t=this.getChild(0).length,i=this.getChild(0).missingOpeningBracketIds;for(let n=1;n<e;n++){const s=this.getChild(n);t=Zn(t,s.length),i=i.merge(s.missingOpeningBracketIds)}this._length=t,this._missingOpeningBracketIds=i,this.cachedMinIndentation=-1}computeMinIndentation(e,t){if(this.cachedMinIndentation!==-1)return this.cachedMinIndentation;let i=Number.MAX_SAFE_INTEGER,n=e;for(let s=0;s<this.childrenLength;s++){const r=this.getChild(s);r&&(i=Math.min(i,r.computeMinIndentation(n,t)),n=Zn(n,r.length))}return this.cachedMinIndentation=i,i}}class UD extends Fh{get childrenLength(){return this._item3!==null?3:2}getChild(e){switch(e){case 0:return this._item1;case 1:return this._item2;case 2:return this._item3}throw new Error("Invalid child index")}setChild(e,t){switch(e){case 0:this._item1=t;return;case 1:this._item2=t;return;case 2:this._item3=t;return}throw new Error("Invalid child index")}get children(){return this._item3?[this._item1,this._item2,this._item3]:[this._item1,this._item2]}get item1(){return this._item1}get item2(){return this._item2}get item3(){return this._item3}constructor(e,t,i,n,s,r){super(e,t,r),this._item1=i,this._item2=n,this._item3=s}deepClone(){return new UD(this.length,this.listHeight,this._item1.deepClone(),this._item2.deepClone(),this._item3?this._item3.deepClone():null,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){if(this._item3)throw new Error("Cannot append to a full (2,3) tree node");this.throwIfImmutable(),this._item3=e,this.handleChildrenChanged()}unappendChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item3;return this._item3=null,this.handleChildrenChanged(),e}prependChildOfSameHeight(e){if(this._item3)throw new Error("Cannot prepend to a full (2,3) tree node");this.throwIfImmutable(),this._item3=this._item2,this._item2=this._item1,this._item1=e,this.handleChildrenChanged()}unprependChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item1;return this._item1=this._item2,this._item2=this._item3,this._item3=null,this.handleChildrenChanged(),e}toMutable(){return this}}class rFe extends UD{toMutable(){return new UD(this.length,this.listHeight,this.item1,this.item2,this.item3,this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}class rP extends Fh{get childrenLength(){return this._children.length}getChild(e){return this._children[e]}setChild(e,t){this._children[e]=t}get children(){return this._children}constructor(e,t,i,n){super(e,t,n),this._children=i}deepClone(){const e=new Array(this._children.length);for(let t=0;t<this._children.length;t++)e[t]=this._children[t].deepClone();return new rP(this.length,this.listHeight,e,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){this.throwIfImmutable(),this._children.push(e),this.handleChildrenChanged()}unappendChild(){this.throwIfImmutable();const e=this._children.pop();return this.handleChildrenChanged(),e}prependChildOfSameHeight(e){this.throwIfImmutable(),this._children.unshift(e),this.handleChildrenChanged()}unprependChild(){this.throwIfImmutable();const e=this._children.shift();return this.handleChildrenChanged(),e}toMutable(){return this}}class aFe extends rP{toMutable(){return new rP(this.length,this.listHeight,[...this.children],this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}const lFe=[];class KK extends qK{get listHeight(){return 0}get childrenLength(){return 0}getChild(e){return null}get children(){return lFe}deepClone(){return this}}class bv extends KK{get kind(){return 0}get missingOpeningBracketIds(){return Xa.getEmpty()}canBeReused(e){return!0}computeMinIndentation(e,t){const i=wc(e),n=(i.columnCount===0?i.lineCount:i.lineCount+1)+1,s=iFe(Zn(e,this.length))+1;let r=Number.MAX_SAFE_INTEGER;for(let a=n;a<=s;a++){const l=t.getLineFirstNonWhitespaceColumn(a),c=t.getLineContent(a);if(l===0)continue;const u=Fs.visibleColumnFromColumn(c,l,t.getOptions().tabSize);r=Math.min(r,u)}return r}}class aP extends KK{static create(e,t,i){return new aP(e,t,i)}get kind(){return 1}get missingOpeningBracketIds(){return Xa.getEmpty()}constructor(e,t,i){super(e),this.bracketInfo=t,this.bracketIds=i}get text(){return this.bracketInfo.bracketText}get languageId(){return this.bracketInfo.languageId}canBeReused(e){return!1}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}class cFe extends KK{get kind(){return 3}constructor(e,t){super(t),this.missingOpeningBracketIds=e}canBeReused(e){return!e.intersects(this.missingOpeningBracketIds)}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}let Bp=class{constructor(e,t,i,n,s){this.length=e,this.kind=t,this.bracketId=i,this.bracketIds=n,this.astNode=s}};class jue{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.reader=new dFe(this.textModel,this.bracketTokens),this._offset=qr,this.didPeek=!1,this.peeked=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}get offset(){return this._offset}get length(){return bs(this.textBufferLineCount-1,this.textBufferLastLineLength)}skip(e){this.didPeek=!1,this._offset=Zn(this._offset,e);const t=wc(this._offset);this.reader.setPosition(t.lineCount,t.columnCount)}read(){let e;return this.peeked?(this.didPeek=!1,e=this.peeked):e=this.reader.read(),e&&(this._offset=Zn(this._offset,e.length)),e}peek(){return this.didPeek||(this.peeked=this.reader.read(),this.didPeek=!0),this.peeked}}class dFe{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.lineIdx=0,this.line=null,this.lineCharOffset=0,this.lineTokens=null,this.lineTokenOffset=0,this.peekedToken=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}setPosition(e,t){e===this.lineIdx?(this.lineCharOffset=t,this.line!==null&&(this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset))):(this.lineIdx=e,this.lineCharOffset=t,this.line=null),this.peekedToken=null}read(){if(this.peekedToken){const s=this.peekedToken;return this.peekedToken=null,this.lineCharOffset+=s.length,s}if(this.lineIdx>this.textBufferLineCount-1||this.lineIdx===this.textBufferLineCount-1&&this.lineCharOffset>=this.textBufferLastLineLength)return null;this.line===null&&(this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.line=this.lineTokens.getLineContent(),this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset));const e=this.lineIdx,t=this.lineCharOffset;let i=0;for(;;){const s=this.lineTokens,r=s.getCount();let a=null;if(this.lineTokenOffset<r){const l=s.getMetadata(this.lineTokenOffset);for(;this.lineTokenOffset+1<r&&l===s.getMetadata(this.lineTokenOffset+1);)this.lineTokenOffset++;const c=wa.getTokenType(l)===0,u=wa.containsBalancedBrackets(l),f=s.getEndOffset(this.lineTokenOffset);if(u&&c&&this.lineCharOffset<f){const g=s.getLanguageId(this.lineTokenOffset),p=this.line.substring(this.lineCharOffset,f),_=this.bracketTokens.getSingleLanguageBracketTokens(g),b=_.regExpGlobal;if(b){b.lastIndex=0;const y=b.exec(p);y&&(a=_.getToken(y[0]),a&&(this.lineCharOffset+=y.index))}}if(i+=f-this.lineCharOffset,a)if(e!==this.lineIdx||t!==this.lineCharOffset){this.peekedToken=a;break}else return this.lineCharOffset+=a.length,a;else this.lineTokenOffset++,this.lineCharOffset=f}else if(this.lineIdx===this.textBufferLineCount-1||(this.lineIdx++,this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.lineTokenOffset=0,this.line=this.lineTokens.getLineContent(),this.lineCharOffset=0,i+=33,i>1e3))break;if(i>1500)break}const n=tFe(e,t,this.lineIdx,this.lineCharOffset);return new Bp(n,0,-1,Xa.getEmpty(),new bv(n))}}class uFe{constructor(e,t){this.text=e,this._offset=qr,this.idx=0;const i=t.getRegExpStr(),n=i?new RegExp(i+`|
`,"gi"):null,s=[];let r,a=0,l=0,c=0,u=0;const f=[];for(let _=0;_<60;_++)f.push(new Bp(bs(0,_),0,-1,Xa.getEmpty(),new bv(bs(0,_))));const g=[];for(let _=0;_<60;_++)g.push(new Bp(bs(1,_),0,-1,Xa.getEmpty(),new bv(bs(1,_))));if(n)for(n.lastIndex=0;(r=n.exec(e))!==null;){const _=r.index,b=r[0];if(b===`
`)a++,l=_+1;else{if(c!==_){let y;if(u===a){const S=_-c;if(S<f.length)y=f[S];else{const L=bs(0,S);y=new Bp(L,0,-1,Xa.getEmpty(),new bv(L))}}else{const S=a-u,L=_-l;if(S===1&&L<g.length)y=g[L];else{const x=bs(S,L);y=new Bp(x,0,-1,Xa.getEmpty(),new bv(x))}}s.push(y)}s.push(t.getToken(b)),c=_+b.length,u=a}}const p=e.length;if(c!==p){const _=u===a?bs(0,p-c):bs(a-u,p-l);s.push(new Bp(_,0,-1,Xa.getEmpty(),new bv(_)))}this.length=bs(a,p-l),this.tokens=s}get offset(){return this._offset}read(){return this.tokens[this.idx++]||null}peek(){return this.tokens[this.idx]||null}skip(e){throw new zxe}}class GK{static createFromLanguage(e,t){function i(s){return t.getKey(`${s.languageId}:::${s.bracketText}`)}const n=new Map;for(const s of e.bracketsNew.openingBrackets){const r=bs(0,s.bracketText.length),a=i(s),l=Xa.getEmpty().add(a,ose);n.set(s.bracketText,new Bp(r,1,a,l,aP.create(r,s,l)))}for(const s of e.bracketsNew.closingBrackets){const r=bs(0,s.bracketText.length);let a=Xa.getEmpty();const l=s.getOpeningBrackets();for(const c of l)a=a.add(i(c),ose);n.set(s.bracketText,new Bp(r,2,i(l[0]),a,aP.create(r,s,a)))}return new GK(n)}constructor(e){this.map=e,this.hasRegExp=!1,this._regExpGlobal=null}getRegExpStr(){if(this.isEmpty)return null;{const e=[...this.map.keys()];return e.sort(),e.reverse(),e.map(t=>hFe(t)).join("|")}}get regExpGlobal(){if(!this.hasRegExp){const e=this.getRegExpStr();this._regExpGlobal=e?new RegExp(e,"gi"):null,this.hasRegExp=!0}return this._regExpGlobal}getToken(e){return this.map.get(e.toLowerCase())}findClosingTokenText(e){for(const[t,i]of this.map)if(i.kind===2&&i.bracketIds.intersects(e))return t}get isEmpty(){return this.map.size===0}}function hFe(o){let e=Ul(o);return/^[\w ]+/.test(o)&&(e=`\\b${e}`),/[\w ]+$/.test(o)&&(e=`${e}\\b`),e}class que{constructor(e,t){this.denseKeyProvider=e,this.getLanguageConfiguration=t,this.languageIdToBracketTokens=new Map}didLanguageChange(e){return this.languageIdToBracketTokens.has(e)}getSingleLanguageBracketTokens(e){let t=this.languageIdToBracketTokens.get(e);return t||(t=GK.createFromLanguage(this.getLanguageConfiguration(e),this.denseKeyProvider),this.languageIdToBracketTokens.set(e,t)),t}}function fFe(o){if(o.length===0)return null;if(o.length===1)return o[0];let e=0;function t(){if(e>=o.length)return null;const r=e,a=o[r].listHeight;for(e++;e<o.length&&o[e].listHeight===a;)e++;return e-r>=2?Kue(r===0&&e===o.length?o:o.slice(r,e),!1):o[r]}let i=t(),n=t();if(!n)return i;for(let r=t();r;r=t())rse(i,n)<=rse(n,r)?(i=k7(i,n),n=r):n=k7(n,r);return k7(i,n)}function Kue(o,e=!1){if(o.length===0)return null;if(o.length===1)return o[0];let t=o.length;for(;t>3;){const i=t>>1;for(let n=0;n<i;n++){const s=n<<1;o[n]=Fh.create23(o[s],o[s+1],s+3===t?o[s+2]:null,e)}t=i}return Fh.create23(o[0],o[1],t>=3?o[2]:null,e)}function rse(o,e){return Math.abs(o.listHeight-e.listHeight)}function k7(o,e){return o.listHeight===e.listHeight?Fh.create23(o,e,null,!1):o.listHeight>e.listHeight?gFe(o,e):pFe(e,o)}function gFe(o,e){o=o.toMutable();let t=o;const i=[];let n;for(;;){if(e.listHeight===t.listHeight){n=e;break}if(t.kind!==4)throw new Error("unexpected");i.push(t),t=t.makeLastElementMutable()}for(let s=i.length-1;s>=0;s--){const r=i[s];n?r.childrenLength>=3?n=Fh.create23(r.unappendChild(),n,null,!1):(r.appendChildOfSameHeight(n),n=void 0):r.handleChildrenChanged()}return n?Fh.create23(o,n,null,!1):o}function pFe(o,e){o=o.toMutable();let t=o;const i=[];for(;e.listHeight!==t.listHeight;){if(t.kind!==4)throw new Error("unexpected");i.push(t),t=t.makeFirstElementMutable()}let n=e;for(let s=i.length-1;s>=0;s--){const r=i[s];n?r.childrenLength>=3?n=Fh.create23(n,r.unprependChild(),null,!1):(r.prependChildOfSameHeight(n),n=void 0):r.handleChildrenChanged()}return n?Fh.create23(n,o,null,!1):o}class mFe{constructor(e){this.lastOffset=qr,this.nextNodes=[e],this.offsets=[qr],this.idxs=[]}readLongestNodeAt(e,t){if(L1(e,this.lastOffset))throw new Error("Invalid offset");for(this.lastOffset=e;;){const i=mx(this.nextNodes);if(!i)return;const n=mx(this.offsets);if(L1(e,n))return;if(L1(n,e))if(Zn(n,i.length)<=e)this.nextNodeAfterCurrent();else{const s=D7(i);s!==-1?(this.nextNodes.push(i.getChild(s)),this.offsets.push(n),this.idxs.push(s)):this.nextNodeAfterCurrent()}else{if(t(i))return this.nextNodeAfterCurrent(),i;{const s=D7(i);if(s===-1){this.nextNodeAfterCurrent();return}else this.nextNodes.push(i.getChild(s)),this.offsets.push(n),this.idxs.push(s)}}}}nextNodeAfterCurrent(){for(;;){const e=mx(this.offsets),t=mx(this.nextNodes);if(this.nextNodes.pop(),this.offsets.pop(),this.idxs.length===0)break;const i=mx(this.nextNodes),n=D7(i,this.idxs[this.idxs.length-1]);if(n!==-1){this.nextNodes.push(i.getChild(n)),this.offsets.push(Zn(e,t.length)),this.idxs[this.idxs.length-1]=n;break}else this.idxs.pop()}}}function D7(o,e=-1){for(;;){if(e++,e>=o.childrenLength)return-1;if(o.getChild(e))return e}}function mx(o){return o.length>0?o[o.length-1]:void 0}function W6(o,e,t,i){return new _Fe(o,e,t,i).parseDocument()}class _Fe{constructor(e,t,i,n){if(this.tokenizer=e,this.createImmutableLists=n,this._itemsConstructed=0,this._itemsFromCache=0,i&&n)throw new Error("Not supported");this.oldNodeReader=i?new mFe(i):void 0,this.positionMapper=new oFe(t)}parseDocument(){this._itemsConstructed=0,this._itemsFromCache=0;let e=this.parseList(Xa.getEmpty(),0);return e||(e=Fh.getEmpty()),e}parseList(e,t){const i=[];for(;;){let s=this.tryReadChildFromCache(e);if(!s){const r=this.tokenizer.peek();if(!r||r.kind===2&&r.bracketIds.intersects(e))break;s=this.parseChild(e,t+1)}s.kind===4&&s.childrenLength===0||i.push(s)}return this.oldNodeReader?fFe(i):Kue(i,this.createImmutableLists)}tryReadChildFromCache(e){if(this.oldNodeReader){const t=this.positionMapper.getDistanceToNextChange(this.tokenizer.offset);if(t===null||!oP(t)){const i=this.oldNodeReader.readLongestNodeAt(this.positionMapper.getOffsetBeforeChange(this.tokenizer.offset),n=>t!==null&&!L1(n.length,t)?!1:n.canBeReused(e));if(i)return this._itemsFromCache++,this.tokenizer.skip(i.length),i}}}parseChild(e,t){this._itemsConstructed++;const i=this.tokenizer.read();switch(i.kind){case 2:return new cFe(i.bracketIds,i.length);case 0:return i.astNode;case 1:{if(t>300)return new bv(i.length);const n=e.merge(i.bracketIds),s=this.parseList(n,t+1),r=this.tokenizer.peek();return r&&r.kind===2&&(r.bracketId===i.bracketId||r.bracketIds.intersects(i.bracketIds))?(this.tokenizer.read(),zD.create(i.astNode,s,r.astNode)):zD.create(i.astNode,s,null)}default:throw new Error("unexpected")}}}function lP(o,e){if(o.length===0)return e;if(e.length===0)return o;const t=new Cg(ase(o)),i=ase(e);i.push({modified:!1,lengthBefore:void 0,lengthAfter:void 0});let n=t.dequeue();function s(c){if(c===void 0){const f=t.takeWhile(g=>!0)||[];return n&&f.unshift(n),f}const u=[];for(;n&&!oP(c);){const[f,g]=n.splitAt(c);u.push(f),c=VD(f.lengthAfter,c),n=g??t.dequeue()}return oP(c)||u.push(new em(!1,c,c)),u}const r=[];function a(c,u,f){if(r.length>0&&Uue(r[r.length-1].endOffset,c)){const g=r[r.length-1];r[r.length-1]=new ng(g.startOffset,u,Zn(g.newLength,f))}else r.push({startOffset:c,endOffset:u,newLength:f})}let l=qr;for(const c of i){const u=s(c.lengthBefore);if(c.modified){const f=nFe(u,p=>p.lengthBefore),g=Zn(l,f);a(l,g,c.lengthAfter),l=g}else for(const f of u){const g=l;l=Zn(l,f.lengthBefore),f.modified&&a(g,l,f.lengthAfter)}}return r}class em{constructor(e,t,i){this.modified=e,this.lengthBefore=t,this.lengthAfter=i}splitAt(e){const t=VD(e,this.lengthAfter);return Uue(t,qr)?[this,void 0]:this.modified?[new em(this.modified,this.lengthBefore,e),new em(this.modified,qr,t)]:[new em(this.modified,e,e),new em(this.modified,t,t)]}toString(){return`${this.modified?"M":"U"}:${wc(this.lengthBefore)} -> ${wc(this.lengthAfter)}`}}function ase(o){const e=[];let t=qr;for(const i of o){const n=VD(t,i.startOffset);oP(n)||e.push(new em(!1,n,n));const s=VD(i.startOffset,i.endOffset);e.push(new em(!0,s,i.newLength)),t=i.endOffset}return e}class vFe extends X{didLanguageChange(e){return this.brackets.didLanguageChange(e)}constructor(e,t){if(super(),this.textModel=e,this.getLanguageConfiguration=t,this.didChangeEmitter=new Y,this.denseKeyProvider=new $ue,this.brackets=new que(this.denseKeyProvider,this.getLanguageConfiguration),this.onDidChange=this.didChangeEmitter.event,this.queuedTextEditsForInitialAstWithoutTokens=[],this.queuedTextEdits=[],e.tokenization.hasTokens)e.tokenization.backgroundTokenizationState===2?(this.initialAstWithoutTokens=void 0,this.astWithTokens=this.parseDocumentFromTextBuffer([],void 0,!1)):(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer([],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens);else{const i=this.brackets.getSingleLanguageBracketTokens(this.textModel.getLanguageId()),n=new uFe(this.textModel.getValue(),i);this.initialAstWithoutTokens=W6(n,[],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens}}handleDidChangeBackgroundTokenizationState(){if(this.textModel.tokenization.backgroundTokenizationState===2){const e=this.initialAstWithoutTokens===void 0;this.initialAstWithoutTokens=void 0,e||this.didChangeEmitter.fire()}}handleDidChangeTokens({ranges:e}){const t=e.map(i=>new ng(bs(i.fromLineNumber-1,0),bs(i.toLineNumber,0),bs(i.toLineNumber-i.fromLineNumber+1,0)));this.handleEdits(t,!0),this.initialAstWithoutTokens||this.didChangeEmitter.fire()}handleContentChanged(e){const t=ng.fromModelContentChanges(e.changes);this.handleEdits(t,!1)}handleEdits(e,t){const i=lP(this.queuedTextEdits,e);this.queuedTextEdits=i,this.initialAstWithoutTokens&&!t&&(this.queuedTextEditsForInitialAstWithoutTokens=lP(this.queuedTextEditsForInitialAstWithoutTokens,e))}flushQueue(){this.queuedTextEdits.length>0&&(this.astWithTokens=this.parseDocumentFromTextBuffer(this.queuedTextEdits,this.astWithTokens,!1),this.queuedTextEdits=[]),this.queuedTextEditsForInitialAstWithoutTokens.length>0&&(this.initialAstWithoutTokens&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer(this.queuedTextEditsForInitialAstWithoutTokens,this.initialAstWithoutTokens,!1)),this.queuedTextEditsForInitialAstWithoutTokens=[])}parseDocumentFromTextBuffer(e,t,i){const n=t,s=new jue(this.textModel,this.brackets);return W6(s,e,n,i)}getBracketsInRange(e,t){this.flushQueue();const i=bs(e.startLineNumber-1,e.startColumn-1),n=bs(e.endLineNumber-1,e.endColumn-1);return new qv(s=>{const r=this.initialAstWithoutTokens||this.astWithTokens;H6(r,qr,r.length,i,n,s,0,0,new Map,t)})}getBracketPairsInRange(e,t){this.flushQueue();const i=Fw(e.getStartPosition()),n=Fw(e.getEndPosition());return new qv(s=>{const r=this.initialAstWithoutTokens||this.astWithTokens,a=new bFe(s,t,this.textModel);V6(r,qr,r.length,i,n,a,0,new Map)})}getFirstBracketAfter(e){this.flushQueue();const t=this.initialAstWithoutTokens||this.astWithTokens;return Yue(t,qr,t.length,Fw(e))}getFirstBracketBefore(e){this.flushQueue();const t=this.initialAstWithoutTokens||this.astWithTokens;return Gue(t,qr,t.length,Fw(e))}}function Gue(o,e,t,i){if(o.kind===4||o.kind===2){const n=[];for(const s of o.children)t=Zn(e,s.length),n.push({nodeOffsetStart:e,nodeOffsetEnd:t}),e=t;for(let s=n.length-1;s>=0;s--){const{nodeOffsetStart:r,nodeOffsetEnd:a}=n[s];if(L1(r,i)){const l=Gue(o.children[s],r,a,i);if(l)return l}}return null}else{if(o.kind===3)return null;if(o.kind===1){const n=Qv(e,t);return{bracketInfo:o.bracketInfo,range:n}}}return null}function Yue(o,e,t,i){if(o.kind===4||o.kind===2){for(const n of o.children){if(t=Zn(e,n.length),L1(i,t)){const s=Yue(n,e,t,i);if(s)return s}e=t}return null}else{if(o.kind===3)return null;if(o.kind===1){const n=Qv(e,t);return{bracketInfo:o.bracketInfo,range:n}}}return null}function H6(o,e,t,i,n,s,r,a,l,c,u=!1){if(r>200)return!0;e:for(;;)switch(o.kind){case 4:{const f=o.childrenLength;for(let g=0;g<f;g++){const p=o.getChild(g);if(p){if(t=Zn(e,p.length),x1(e,n)&&Hx(t,i)){if(Hx(t,n)){o=p;continue e}if(!H6(p,e,t,i,n,s,r,0,l,c))return!1}e=t}}return!0}case 2:{const f=!c||!o.closingBracket||o.closingBracket.bracketInfo.closesColorized(o.openingBracket.bracketInfo);let g=0;if(l){let _=l.get(o.openingBracket.text);_===void 0&&(_=0),g=_,f&&(_++,l.set(o.openingBracket.text,_))}const p=o.childrenLength;for(let _=0;_<p;_++){const b=o.getChild(_);if(b){if(t=Zn(e,b.length),x1(e,n)&&Hx(t,i)){if(Hx(t,n)&&b.kind!==1){o=b,f?(r++,a=g+1):a=g;continue e}if((f||b.kind!==1||!o.closingBracket)&&!H6(b,e,t,i,n,s,f?r+1:r,f?g+1:g,l,c,!o.closingBracket))return!1}e=t}}return l==null||l.set(o.openingBracket.text,g),!0}case 3:{const f=Qv(e,t);return s(new sse(f,r-1,0,!0))}case 1:{const f=Qv(e,t);return s(new sse(f,r-1,a-1,u))}case 0:return!0}}class bFe{constructor(e,t,i){this.push=e,this.includeMinIndentation=t,this.textModel=i}}function V6(o,e,t,i,n,s,r,a){var c;if(r>200)return!0;let l=!0;if(o.kind===2){let u=0;if(a){let p=a.get(o.openingBracket.text);p===void 0&&(p=0),u=p,p++,a.set(o.openingBracket.text,p)}const f=Zn(e,o.openingBracket.length);let g=-1;if(s.includeMinIndentation&&(g=o.computeMinIndentation(e,s.textModel)),l=s.push(new eFe(Qv(e,t),Qv(e,f),o.closingBracket?Qv(Zn(f,((c=o.child)==null?void 0:c.length)||qr),t):void 0,r,u,o,g)),e=f,l&&o.child){const p=o.child;if(t=Zn(e,p.length),x1(e,n)&&Hx(t,i)&&(l=V6(p,e,t,i,n,s,r+1,a),!l))return!1}a==null||a.set(o.openingBracket.text,u)}else{let u=e;for(const f of o.children){const g=u;if(u=Zn(u,f.length),x1(g,n)&&x1(i,u)&&(l=V6(f,g,u,i,n,s,r,a),!l))return!1}}return l}class CFe extends X{get canBuildAST(){return this.textModel.getValueLength()<=5e6}constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t,this.bracketPairsTree=this._register(new Xs),this.onDidChangeEmitter=new Y,this.onDidChange=this.onDidChangeEmitter.event,this.bracketsRequested=!1}handleLanguageConfigurationServiceChange(e){var t;(!e.languageId||(t=this.bracketPairsTree.value)!=null&&t.object.didLanguageChange(e.languageId))&&(this.bracketPairsTree.clear(),this.updateBracketPairsTree())}handleDidChangeOptions(e){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeLanguage(e){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeContent(e){var t;(t=this.bracketPairsTree.value)==null||t.object.handleContentChanged(e)}handleDidChangeBackgroundTokenizationState(){var e;(e=this.bracketPairsTree.value)==null||e.object.handleDidChangeBackgroundTokenizationState()}handleDidChangeTokens(e){var t;(t=this.bracketPairsTree.value)==null||t.object.handleDidChangeTokens(e)}updateBracketPairsTree(){if(this.bracketsRequested&&this.canBuildAST){if(!this.bracketPairsTree.value){const e=new le;this.bracketPairsTree.value=yFe(e.add(new vFe(this.textModel,t=>this.languageConfigurationService.getLanguageConfiguration(t))),e),e.add(this.bracketPairsTree.value.object.onDidChange(t=>this.onDidChangeEmitter.fire(t))),this.onDidChangeEmitter.fire()}}else this.bracketPairsTree.value&&(this.bracketPairsTree.clear(),this.onDidChangeEmitter.fire())}getBracketPairsInRange(e){var t;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)==null?void 0:t.object.getBracketPairsInRange(e,!1))||qv.empty}getBracketPairsInRangeWithMinIndentation(e){var t;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)==null?void 0:t.object.getBracketPairsInRange(e,!0))||qv.empty}getBracketsInRange(e,t=!1){var i;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((i=this.bracketPairsTree.value)==null?void 0:i.object.getBracketsInRange(e,t))||qv.empty}findMatchingBracketUp(e,t,i){const n=this.textModel.validatePosition(t),s=this.textModel.getLanguageIdAtPosition(n.lineNumber,n.column);if(this.canBuildAST){const r=this.languageConfigurationService.getLanguageConfiguration(s).bracketsNew.getClosingBracketInfo(e);if(!r)return null;const a=this.getBracketPairsInRange(M.fromPositions(t,t)).findLast(l=>r.closes(l.openingBracketInfo));return a?a.openingBracketRange:null}else{const r=e.toLowerCase(),a=this.languageConfigurationService.getLanguageConfiguration(s).brackets;if(!a)return null;const l=a.textIsBracket[r];return l?CR(this._findMatchingBracketUp(l,n,E7(i))):null}}matchBracket(e,t){if(this.canBuildAST){const i=this.getBracketPairsInRange(M.fromPositions(e,e)).filter(n=>n.closingBracketRange!==void 0&&(n.openingBracketRange.containsPosition(e)||n.closingBracketRange.containsPosition(e))).findLastMaxBy(Yr(n=>n.openingBracketRange.containsPosition(e)?n.openingBracketRange:n.closingBracketRange,M.compareRangesUsingStarts));return i?[i.openingBracketRange,i.closingBracketRange]:null}else{const i=E7(t);return this._matchBracket(this.textModel.validatePosition(e),i)}}_establishBracketSearchOffsets(e,t,i,n){const s=t.getCount(),r=t.getLanguageId(n);let a=Math.max(0,e.column-1-i.maxBracketLength);for(let c=n-1;c>=0;c--){const u=t.getEndOffset(c);if(u<=a)break;if(Xu(t.getStandardTokenType(c))||t.getLanguageId(c)!==r){a=u;break}}let l=Math.min(t.getLineContent().length,e.column-1+i.maxBracketLength);for(let c=n+1;c<s;c++){const u=t.getStartOffset(c);if(u>=l)break;if(Xu(t.getStandardTokenType(c))||t.getLanguageId(c)!==r){l=u;break}}return{searchStartOffset:a,searchEndOffset:l}}_matchBracket(e,t){const i=e.lineNumber,n=this.textModel.tokenization.getLineTokens(i),s=this.textModel.getLineContent(i),r=n.findTokenIndexAtOffset(e.column-1);if(r<0)return null;const a=this.languageConfigurationService.getLanguageConfiguration(n.getLanguageId(r)).brackets;if(a&&!Xu(n.getStandardTokenType(r))){let{searchStartOffset:l,searchEndOffset:c}=this._establishBracketSearchOffsets(e,n,a,r),u=null;for(;;){const f=jc.findNextBracketInRange(a.forwardRegex,i,s,l,c);if(!f)break;if(f.startColumn<=e.column&&e.column<=f.endColumn){const g=s.substring(f.startColumn-1,f.endColumn-1).toLowerCase(),p=this._matchFoundBracket(f,a.textIsBracket[g],a.textIsOpenBracket[g],t);if(p){if(p instanceof Vf)return null;u=p}}l=f.endColumn-1}if(u)return u}if(r>0&&n.getStartOffset(r)===e.column-1){const l=r-1,c=this.languageConfigurationService.getLanguageConfiguration(n.getLanguageId(l)).brackets;if(c&&!Xu(n.getStandardTokenType(l))){const{searchStartOffset:u,searchEndOffset:f}=this._establishBracketSearchOffsets(e,n,c,l),g=jc.findPrevBracketInRange(c.reversedRegex,i,s,u,f);if(g&&g.startColumn<=e.column&&e.column<=g.endColumn){const p=s.substring(g.startColumn-1,g.endColumn-1).toLowerCase(),_=this._matchFoundBracket(g,c.textIsBracket[p],c.textIsOpenBracket[p],t);if(_)return _ instanceof Vf?null:_}}}return null}_matchFoundBracket(e,t,i,n){if(!t)return null;const s=i?this._findMatchingBracketDown(t,e.getEndPosition(),n):this._findMatchingBracketUp(t,e.getStartPosition(),n);return s?s instanceof Vf?s:[e,s]:null}_findMatchingBracketUp(e,t,i){const n=e.languageId,s=e.reversedRegex;let r=-1,a=0;const l=(c,u,f,g)=>{for(;;){if(i&&++a%100===0&&!i())return Vf.INSTANCE;const p=jc.findPrevBracketInRange(s,c,u,f,g);if(!p)break;const _=u.substring(p.startColumn-1,p.endColumn-1).toLowerCase();if(e.isOpen(_)?r++:e.isClose(_)&&r--,r===0)return p;g=p.startColumn-1}return null};for(let c=t.lineNumber;c>=1;c--){const u=this.textModel.tokenization.getLineTokens(c),f=u.getCount(),g=this.textModel.getLineContent(c);let p=f-1,_=g.length,b=g.length;c===t.lineNumber&&(p=u.findTokenIndexAtOffset(t.column-1),_=t.column-1,b=t.column-1);let y=!0;for(;p>=0;p--){const S=u.getLanguageId(p)===n&&!Xu(u.getStandardTokenType(p));if(S)y?_=u.getStartOffset(p):(_=u.getStartOffset(p),b=u.getEndOffset(p));else if(y&&_!==b){const L=l(c,g,_,b);if(L)return L}y=S}if(y&&_!==b){const S=l(c,g,_,b);if(S)return S}}return null}_findMatchingBracketDown(e,t,i){const n=e.languageId,s=e.forwardRegex;let r=1,a=0;const l=(u,f,g,p)=>{for(;;){if(i&&++a%100===0&&!i())return Vf.INSTANCE;const _=jc.findNextBracketInRange(s,u,f,g,p);if(!_)break;const b=f.substring(_.startColumn-1,_.endColumn-1).toLowerCase();if(e.isOpen(b)?r++:e.isClose(b)&&r--,r===0)return _;g=_.endColumn-1}return null},c=this.textModel.getLineCount();for(let u=t.lineNumber;u<=c;u++){const f=this.textModel.tokenization.getLineTokens(u),g=f.getCount(),p=this.textModel.getLineContent(u);let _=0,b=0,y=0;u===t.lineNumber&&(_=f.findTokenIndexAtOffset(t.column-1),b=t.column-1,y=t.column-1);let S=!0;for(;_<g;_++){const L=f.getLanguageId(_)===n&&!Xu(f.getStandardTokenType(_));if(L)S||(b=f.getStartOffset(_)),y=f.getEndOffset(_);else if(S&&b!==y){const x=l(u,p,b,y);if(x)return x}S=L}if(S&&b!==y){const L=l(u,p,b,y);if(L)return L}}return null}findPrevBracket(e){var r;const t=this.textModel.validatePosition(e);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),((r=this.bracketPairsTree.value)==null?void 0:r.object.getFirstBracketBefore(t))||null;let i=null,n=null,s=null;for(let a=t.lineNumber;a>=1;a--){const l=this.textModel.tokenization.getLineTokens(a),c=l.getCount(),u=this.textModel.getLineContent(a);let f=c-1,g=u.length,p=u.length;if(a===t.lineNumber){f=l.findTokenIndexAtOffset(t.column-1),g=t.column-1,p=t.column-1;const b=l.getLanguageId(f);i!==b&&(i=b,n=this.languageConfigurationService.getLanguageConfiguration(i).brackets,s=this.languageConfigurationService.getLanguageConfiguration(i).bracketsNew)}let _=!0;for(;f>=0;f--){const b=l.getLanguageId(f);if(i!==b){if(n&&s&&_&&g!==p){const S=jc.findPrevBracketInRange(n.reversedRegex,a,u,g,p);if(S)return this._toFoundBracket(s,S);_=!1}i=b,n=this.languageConfigurationService.getLanguageConfiguration(i).brackets,s=this.languageConfigurationService.getLanguageConfiguration(i).bracketsNew}const y=!!n&&!Xu(l.getStandardTokenType(f));if(y)_?g=l.getStartOffset(f):(g=l.getStartOffset(f),p=l.getEndOffset(f));else if(s&&n&&_&&g!==p){const S=jc.findPrevBracketInRange(n.reversedRegex,a,u,g,p);if(S)return this._toFoundBracket(s,S)}_=y}if(s&&n&&_&&g!==p){const b=jc.findPrevBracketInRange(n.reversedRegex,a,u,g,p);if(b)return this._toFoundBracket(s,b)}}return null}findNextBracket(e){var a;const t=this.textModel.validatePosition(e);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),((a=this.bracketPairsTree.value)==null?void 0:a.object.getFirstBracketAfter(t))||null;const i=this.textModel.getLineCount();let n=null,s=null,r=null;for(let l=t.lineNumber;l<=i;l++){const c=this.textModel.tokenization.getLineTokens(l),u=c.getCount(),f=this.textModel.getLineContent(l);let g=0,p=0,_=0;if(l===t.lineNumber){g=c.findTokenIndexAtOffset(t.column-1),p=t.column-1,_=t.column-1;const y=c.getLanguageId(g);n!==y&&(n=y,s=this.languageConfigurationService.getLanguageConfiguration(n).brackets,r=this.languageConfigurationService.getLanguageConfiguration(n).bracketsNew)}let b=!0;for(;g<u;g++){const y=c.getLanguageId(g);if(n!==y){if(r&&s&&b&&p!==_){const L=jc.findNextBracketInRange(s.forwardRegex,l,f,p,_);if(L)return this._toFoundBracket(r,L);b=!1}n=y,s=this.languageConfigurationService.getLanguageConfiguration(n).brackets,r=this.languageConfigurationService.getLanguageConfiguration(n).bracketsNew}const S=!!s&&!Xu(c.getStandardTokenType(g));if(S)b||(p=c.getStartOffset(g)),_=c.getEndOffset(g);else if(r&&s&&b&&p!==_){const L=jc.findNextBracketInRange(s.forwardRegex,l,f,p,_);if(L)return this._toFoundBracket(r,L)}b=S}if(r&&s&&b&&p!==_){const y=jc.findNextBracketInRange(s.forwardRegex,l,f,p,_);if(y)return this._toFoundBracket(r,y)}}return null}findEnclosingBrackets(e,t){const i=this.textModel.validatePosition(e);if(this.canBuildAST){const p=M.fromPositions(i),_=this.getBracketPairsInRange(M.fromPositions(i,i)).findLast(b=>b.closingBracketRange!==void 0&&b.range.strictContainsRange(p));return _?[_.openingBracketRange,_.closingBracketRange]:null}const n=E7(t),s=this.textModel.getLineCount(),r=new Map;let a=[];const l=(p,_)=>{if(!r.has(p)){const b=[];for(let y=0,S=_?_.brackets.length:0;y<S;y++)b[y]=0;r.set(p,b)}a=r.get(p)};let c=0;const u=(p,_,b,y,S)=>{for(;;){if(n&&++c%100===0&&!n())return Vf.INSTANCE;const L=jc.findNextBracketInRange(p.forwardRegex,_,b,y,S);if(!L)break;const x=b.substring(L.startColumn-1,L.endColumn-1).toLowerCase(),k=p.textIsBracket[x];if(k&&(k.isOpen(x)?a[k.index]++:k.isClose(x)&&a[k.index]--,a[k.index]===-1))return this._matchFoundBracket(L,k,!1,n);y=L.endColumn-1}return null};let f=null,g=null;for(let p=i.lineNumber;p<=s;p++){const _=this.textModel.tokenization.getLineTokens(p),b=_.getCount(),y=this.textModel.getLineContent(p);let S=0,L=0,x=0;if(p===i.lineNumber){S=_.findTokenIndexAtOffset(i.column-1),L=i.column-1,x=i.column-1;const E=_.getLanguageId(S);f!==E&&(f=E,g=this.languageConfigurationService.getLanguageConfiguration(f).brackets,l(f,g))}let k=!0;for(;S<b;S++){const E=_.getLanguageId(S);if(f!==E){if(g&&k&&L!==x){const A=u(g,p,y,L,x);if(A)return CR(A);k=!1}f=E,g=this.languageConfigurationService.getLanguageConfiguration(f).brackets,l(f,g)}const N=!!g&&!Xu(_.getStandardTokenType(S));if(N)k||(L=_.getStartOffset(S)),x=_.getEndOffset(S);else if(g&&k&&L!==x){const A=u(g,p,y,L,x);if(A)return CR(A)}k=N}if(g&&k&&L!==x){const E=u(g,p,y,L,x);if(E)return CR(E)}}return null}_toFoundBracket(e,t){if(!t)return null;let i=this.textModel.getValueInRange(t);i=i.toLowerCase();const n=e.getBracketInfo(i);return n?{range:t,bracketInfo:n}:null}}function yFe(o,e){return{object:o,dispose:()=>e==null?void 0:e.dispose()}}function E7(o){if(typeof o>"u")return()=>!0;{const e=Date.now();return()=>Date.now()-e<=o}}const y2=class y2{constructor(){this._searchCanceledBrand=void 0}};y2.INSTANCE=new y2;let Vf=y2;function CR(o){return o instanceof Vf?null:o}class wFe extends X{constructor(e){super(),this.textModel=e,this.colorProvider=new Zue,this.onDidChangeEmitter=new Y,this.onDidChange=this.onDidChangeEmitter.event,this.colorizationOptions=e.getOptions().bracketPairColorizationOptions,this._register(e.bracketPairs.onDidChange(t=>{this.onDidChangeEmitter.fire()}))}handleDidChangeOptions(e){this.colorizationOptions=this.textModel.getOptions().bracketPairColorizationOptions}getDecorationsInRange(e,t,i,n){return n?[]:t===void 0?[]:this.colorizationOptions.enabled?this.textModel.bracketPairs.getBracketsInRange(e,!0).map(r=>({id:`bracket${r.range.toString()}-${r.nestingLevel}`,options:{description:"BracketPairColorization",inlineClassName:this.colorProvider.getInlineClassName(r,this.colorizationOptions.independentColorPoolPerBracketType)},ownerId:0,range:r.range})).toArray():[]}getAllDecorations(e,t){return e===void 0?[]:this.colorizationOptions.enabled?this.getDecorationsInRange(new M(1,1,this.textModel.getLineCount(),1),e,t):[]}}class Zue{constructor(){this.unexpectedClosingBracketClassName="unexpected-closing-bracket"}getInlineClassName(e,t){return e.isInvalid?this.unexpectedClosingBracketClassName:this.getInlineClassNameOfLevel(t?e.nestingLevelOfEqualBracketType:e.nestingLevel)}getInlineClassNameOfLevel(e){return`bracket-highlighting-${e%30}`}}Nc((o,e)=>{const t=[Fue,Bue,Wue,Hue,Vue,zue],i=new Zue;e.addRule(`.monaco-editor .${i.unexpectedClosingBracketClassName} { color: ${o.getColor(P2e)}; }`);const n=t.map(s=>o.getColor(s)).filter(s=>!!s).filter(s=>!s.isTransparent());for(let s=0;s<30;s++){const r=n[s%n.length];e.addRule(`.monaco-editor .${i.getInlineClassNameOfLevel(s)} { color: ${r}; }`)}});function yR(o){return o.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}class To{get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}constructor(e,t,i,n){this.oldPosition=e,this.oldText=t,this.newPosition=i,this.newText=n}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${yR(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${yR(this.oldText)}")`:`(replace@${this.oldPosition} "${yR(this.oldText)}" with "${yR(this.newText)}")`}static _writeStringSize(e){return 4+2*e.length}static _writeString(e,t,i){const n=t.length;zd(e,n,i),i+=4;for(let s=0;s<n;s++)cIe(e,t.charCodeAt(s),i),i+=2;return i}static _readString(e,t){const i=Vd(e,t);return t+=4,uIe(e,t,i)}writeSize(){return 8+To._writeStringSize(this.oldText)+To._writeStringSize(this.newText)}write(e,t){return zd(e,this.oldPosition,t),t+=4,zd(e,this.newPosition,t),t+=4,t=To._writeString(e,this.oldText,t),t=To._writeString(e,this.newText,t),t}static read(e,t,i){const n=Vd(e,t);t+=4;const s=Vd(e,t);t+=4;const r=To._readString(e,t);t+=To._writeStringSize(r);const a=To._readString(e,t);return t+=To._writeStringSize(a),i.push(new To(n,r,s,a)),t}}function SFe(o,e){return o===null||o.length===0?e:new th(o,e).compress()}class th{constructor(e,t){this._prevEdits=e,this._currEdits=t,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}compress(){let e=0,t=0,i=this._getPrev(e),n=this._getCurr(t);for(;e<this._prevLen||t<this._currLen;){if(i===null){this._acceptCurr(n),n=this._getCurr(++t);continue}if(n===null){this._acceptPrev(i),i=this._getPrev(++e);continue}if(n.oldEnd<=i.newPosition){this._acceptCurr(n),n=this._getCurr(++t);continue}if(i.newEnd<=n.oldPosition){this._acceptPrev(i),i=this._getPrev(++e);continue}if(n.oldPosition<i.newPosition){const[c,u]=th._splitCurr(n,i.newPosition-n.oldPosition);this._acceptCurr(c),n=u;continue}if(i.newPosition<n.oldPosition){const[c,u]=th._splitPrev(i,n.oldPosition-i.newPosition);this._acceptPrev(c),i=u;continue}let a,l;if(n.oldEnd===i.newEnd)a=i,l=n,i=this._getPrev(++e),n=this._getCurr(++t);else if(n.oldEnd<i.newEnd){const[c,u]=th._splitPrev(i,n.oldLength);a=c,l=n,i=u,n=this._getCurr(++t)}else{const[c,u]=th._splitCurr(n,i.newLength);a=i,l=c,i=this._getPrev(++e),n=u}this._result[this._resultLen++]=new To(a.oldPosition,a.oldText,l.newPosition,l.newText),this._prevDeltaOffset+=a.newLength-a.oldLength,this._currDeltaOffset+=l.newLength-l.oldLength}const s=th._merge(this._result);return th._removeNoOps(s)}_acceptCurr(e){this._result[this._resultLen++]=th._rebaseCurr(this._prevDeltaOffset,e),this._currDeltaOffset+=e.newLength-e.oldLength}_getCurr(e){return e<this._currLen?this._currEdits[e]:null}_acceptPrev(e){this._result[this._resultLen++]=th._rebasePrev(this._currDeltaOffset,e),this._prevDeltaOffset+=e.newLength-e.oldLength}_getPrev(e){return e<this._prevLen?this._prevEdits[e]:null}static _rebaseCurr(e,t){return new To(t.oldPosition-e,t.oldText,t.newPosition,t.newText)}static _rebasePrev(e,t){return new To(t.oldPosition,t.oldText,t.newPosition+e,t.newText)}static _splitPrev(e,t){const i=e.newText.substr(0,t),n=e.newText.substr(t);return[new To(e.oldPosition,e.oldText,e.newPosition,i),new To(e.oldEnd,"",e.newPosition+t,n)]}static _splitCurr(e,t){const i=e.oldText.substr(0,t),n=e.oldText.substr(t);return[new To(e.oldPosition,i,e.newPosition,e.newText),new To(e.oldPosition+t,n,e.newEnd,"")]}static _merge(e){if(e.length===0)return e;const t=[];let i=0,n=e[0];for(let s=1;s<e.length;s++){const r=e[s];n.oldEnd===r.oldPosition?n=new To(n.oldPosition,n.oldText+r.oldText,n.newPosition,n.newText+r.newText):(t[i++]=n,n=r)}return t[i++]=n,t}static _removeNoOps(e){if(e.length===0)return e;const t=[];let i=0;for(let n=0;n<e.length;n++){const s=e[n];s.oldText!==s.newText&&(t[i++]=s)}return t}}function iw(o){return o.toString()}class so{static create(e,t){const i=e.getAlternativeVersionId(),n=z6(e);return new so(i,i,n,n,t,t,[])}constructor(e,t,i,n,s,r,a){this.beforeVersionId=e,this.afterVersionId=t,this.beforeEOL=i,this.afterEOL=n,this.beforeCursorState=s,this.afterCursorState=r,this.changes=a}append(e,t,i,n,s){t.length>0&&(this.changes=SFe(this.changes,t)),this.afterEOL=i,this.afterVersionId=n,this.afterCursorState=s}static _writeSelectionsSize(e){return 4+4*4*(e?e.length:0)}static _writeSelections(e,t,i){if(zd(e,t?t.length:0,i),i+=4,t)for(const n of t)zd(e,n.selectionStartLineNumber,i),i+=4,zd(e,n.selectionStartColumn,i),i+=4,zd(e,n.positionLineNumber,i),i+=4,zd(e,n.positionColumn,i),i+=4;return i}static _readSelections(e,t,i){const n=Vd(e,t);t+=4;for(let s=0;s<n;s++){const r=Vd(e,t);t+=4;const a=Vd(e,t);t+=4;const l=Vd(e,t);t+=4;const c=Vd(e,t);t+=4,i.push(new Ke(r,a,l,c))}return t}serialize(){let e=10+so._writeSelectionsSize(this.beforeCursorState)+so._writeSelectionsSize(this.afterCursorState)+4;for(const n of this.changes)e+=n.writeSize();const t=new Uint8Array(e);let i=0;zd(t,this.beforeVersionId,i),i+=4,zd(t,this.afterVersionId,i),i+=4,die(t,this.beforeEOL,i),i+=1,die(t,this.afterEOL,i),i+=1,i=so._writeSelections(t,this.beforeCursorState,i),i=so._writeSelections(t,this.afterCursorState,i),zd(t,this.changes.length,i),i+=4;for(const n of this.changes)i=n.write(t,i);return t.buffer}static deserialize(e){const t=new Uint8Array(e);let i=0;const n=Vd(t,i);i+=4;const s=Vd(t,i);i+=4;const r=cie(t,i);i+=1;const a=cie(t,i);i+=1;const l=[];i=so._readSelections(t,i,l);const c=[];i=so._readSelections(t,i,c);const u=Vd(t,i);i+=4;const f=[];for(let g=0;g<u;g++)i=To.read(t,i,f);return new so(n,s,r,a,l,c,f)}}class Xue{get type(){return 0}get resource(){return st.isUri(this.model)?this.model:this.model.uri}constructor(e,t,i,n){this.label=e,this.code=t,this.model=i,this._data=so.create(i,n)}toString(){return(this._data instanceof so?this._data:so.deserialize(this._data)).changes.map(t=>t.toString()).join(", ")}matchesResource(e){return(st.isUri(this.model)?this.model:this.model.uri).toString()===e.toString()}setModel(e){this.model=e}canAppend(e){return this.model===e&&this._data instanceof so}append(e,t,i,n,s){this._data instanceof so&&this._data.append(e,t,i,n,s)}close(){this._data instanceof so&&(this._data=this._data.serialize())}open(){this._data instanceof so||(this._data=so.deserialize(this._data))}undo(){if(st.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof so&&(this._data=this._data.serialize());const e=so.deserialize(this._data);this.model._applyUndo(e.changes,e.beforeEOL,e.beforeVersionId,e.beforeCursorState)}redo(){if(st.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof so&&(this._data=this._data.serialize());const e=so.deserialize(this._data);this.model._applyRedo(e.changes,e.afterEOL,e.afterVersionId,e.afterCursorState)}heapSize(){return this._data instanceof so&&(this._data=this._data.serialize()),this._data.byteLength+168}}class LFe{get resources(){return this._editStackElementsArr.map(e=>e.resource)}constructor(e,t,i){this.label=e,this.code=t,this.type=1,this._isOpen=!0,this._editStackElementsArr=i.slice(0),this._editStackElementsMap=new Map;for(const n of this._editStackElementsArr){const s=iw(n.resource);this._editStackElementsMap.set(s,n)}this._delegate=null}prepareUndoRedo(){if(this._delegate)return this._delegate.prepareUndoRedo(this)}matchesResource(e){const t=iw(e);return this._editStackElementsMap.has(t)}setModel(e){const t=iw(st.isUri(e)?e:e.uri);this._editStackElementsMap.has(t)&&this._editStackElementsMap.get(t).setModel(e)}canAppend(e){if(!this._isOpen)return!1;const t=iw(e.uri);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).canAppend(e):!1}append(e,t,i,n,s){const r=iw(e.uri);this._editStackElementsMap.get(r).append(e,t,i,n,s)}close(){this._isOpen=!1}open(){}undo(){this._isOpen=!1;for(const e of this._editStackElementsArr)e.undo()}redo(){for(const e of this._editStackElementsArr)e.redo()}heapSize(e){const t=iw(e);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).heapSize():0}split(){return this._editStackElementsArr}toString(){const e=[];for(const t of this._editStackElementsArr)e.push(`${Dc(t.resource)}: ${t}`);return`{${e.join(", ")}}`}}function z6(o){return o.getEOL()===`
`?0:1}function zf(o){return o?o instanceof Xue||o instanceof LFe:!1}class YK{constructor(e,t){this._model=e,this._undoRedoService=t}pushStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);zf(e)&&e.close()}popStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);zf(e)&&e.open()}clear(){this._undoRedoService.removeElements(this._model.uri)}_getOrCreateEditStackElement(e,t){const i=this._undoRedoService.getLastElement(this._model.uri);if(zf(i)&&i.canAppend(this._model))return i;const n=new Xue(v("edit","Typing"),"undoredo.textBufferEdit",this._model,e);return this._undoRedoService.pushElement(n,t),n}pushEOL(e){const t=this._getOrCreateEditStackElement(null,void 0);this._model.setEOL(e),t.append(this._model,[],z6(this._model),this._model.getAlternativeVersionId(),null)}pushEditOperation(e,t,i,n){const s=this._getOrCreateEditStackElement(e,n),r=this._model.applyEdits(t,!0),a=YK._computeCursorState(i,r),l=r.map((c,u)=>({index:u,textChange:c.textChange}));return l.sort((c,u)=>c.textChange.oldPosition===u.textChange.oldPosition?c.index-u.index:c.textChange.oldPosition-u.textChange.oldPosition),s.append(this._model,l.map(c=>c.textChange),z6(this._model),this._model.getAlternativeVersionId(),a),a}static _computeCursorState(e,t){try{return e?e(t):null}catch(i){return wt(i),null}}}class Que extends X{constructor(){super(...arguments),this._isDisposed=!1}dispose(){super.dispose(),this._isDisposed=!0}assertNotDisposed(){if(this._isDisposed)throw new Error("TextModelPart is disposed!")}}function A4(o,e){let t=0,i=0;const n=o.length;for(;i<n;){const s=o.charCodeAt(i);if(s===32)t++;else if(s===9)t=t-t%e+e;else break;i++}return i===n?-1:t}var Jv;(function(o){o[o.Disabled=0]="Disabled",o[o.EnabledForActive=1]="EnabledForActive",o[o.Enabled=2]="Enabled"})(Jv||(Jv={}));class Ov{constructor(e,t,i,n,s,r){if(this.visibleColumn=e,this.column=t,this.className=i,this.horizontalLine=n,this.forWrappedLinesAfterColumn=s,this.forWrappedLinesBeforeOrAtColumn=r,e!==-1==(t!==-1))throw new Error}}class uk{constructor(e,t){this.top=e,this.endColumn=t}}class xFe extends Que{constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t}getLanguageConfiguration(e){return this.languageConfigurationService.getLanguageConfiguration(e)}_computeIndentLevel(e){return A4(this.textModel.getLineContent(e+1),this.textModel.getOptions().tabSize)}getActiveIndentGuide(e,t,i){this.assertNotDisposed();const n=this.textModel.getLineCount();if(e<1||e>n)throw new wi("Illegal value for lineNumber");const s=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,r=!!(s&&s.offSide);let a=-2,l=-1,c=-2,u=-1;const f=A=>{if(a!==-1&&(a===-2||a>A-1)){a=-1,l=-1;for(let P=A-2;P>=0;P--){const H=this._computeIndentLevel(P);if(H>=0){a=P,l=H;break}}}if(c===-2){c=-1,u=-1;for(let P=A;P<n;P++){const H=this._computeIndentLevel(P);if(H>=0){c=P,u=H;break}}}};let g=-2,p=-1,_=-2,b=-1;const y=A=>{if(g===-2){g=-1,p=-1;for(let P=A-2;P>=0;P--){const H=this._computeIndentLevel(P);if(H>=0){g=P,p=H;break}}}if(_!==-1&&(_===-2||_<A-1)){_=-1,b=-1;for(let P=A;P<n;P++){const H=this._computeIndentLevel(P);if(H>=0){_=P,b=H;break}}}};let S=0,L=!0,x=0,k=!0,E=0,N=0;for(let A=0;L||k;A++){const P=e-A,H=e+A;A>1&&(P<1||P<t)&&(L=!1),A>1&&(H>n||H>i)&&(k=!1),A>5e4&&(L=!1,k=!1);let ee=-1;if(L&&P>=1){const te=this._computeIndentLevel(P-1);te>=0?(c=P-1,u=te,ee=Math.ceil(te/this.textModel.getOptions().indentSize)):(f(P),ee=this._getIndentLevelForWhitespaceLine(r,l,u))}let Q=-1;if(k&&H<=n){const te=this._computeIndentLevel(H-1);te>=0?(g=H-1,p=te,Q=Math.ceil(te/this.textModel.getOptions().indentSize)):(y(H),Q=this._getIndentLevelForWhitespaceLine(r,p,b))}if(A===0){N=ee;continue}if(A===1){if(H<=n&&Q>=0&&N+1===Q){L=!1,S=H,x=H,E=Q;continue}if(P>=1&&ee>=0&&ee-1===N){k=!1,S=P,x=P,E=ee;continue}if(S=e,x=e,E=N,E===0)return{startLineNumber:S,endLineNumber:x,indent:E}}L&&(ee>=E?S=P:L=!1),k&&(Q>=E?x=H:k=!1)}return{startLineNumber:S,endLineNumber:x,indent:E}}getLinesBracketGuides(e,t,i,n){var f;const s=[];for(let g=e;g<=t;g++)s.push([]);const r=!0,a=this.textModel.bracketPairs.getBracketPairsInRangeWithMinIndentation(new M(e,1,t,this.textModel.getLineMaxColumn(t))).toArray();let l;if(i&&a.length>0){const g=(e<=i.lineNumber&&i.lineNumber<=t?a:this.textModel.bracketPairs.getBracketPairsInRange(M.fromPositions(i)).toArray()).filter(p=>M.strictContainsPosition(p.range,i));l=(f=CD(g,p=>r))==null?void 0:f.range}const c=this.textModel.getOptions().bracketPairColorizationOptions.independentColorPoolPerBracketType,u=new Jue;for(const g of a){if(!g.closingBracketRange)continue;const p=l&&g.range.equalsRange(l);if(!p&&!n.includeInactive)continue;const _=u.getInlineClassName(g.nestingLevel,g.nestingLevelOfEqualBracketType,c)+(n.highlightActive&&p?" "+u.activeClassName:""),b=g.openingBracketRange.getStartPosition(),y=g.closingBracketRange.getStartPosition(),S=n.horizontalGuides===Jv.Enabled||n.horizontalGuides===Jv.EnabledForActive&&p;if(g.range.startLineNumber===g.range.endLineNumber){S&&s[g.range.startLineNumber-e].push(new Ov(-1,g.openingBracketRange.getEndPosition().column,_,new uk(!1,y.column),-1,-1));continue}const L=this.getVisibleColumnFromPosition(y),x=this.getVisibleColumnFromPosition(g.openingBracketRange.getStartPosition()),k=Math.min(x,L,g.minVisibleColumnIndentation+1);let E=!1;Sr(this.textModel.getLineContent(g.closingBracketRange.startLineNumber))<g.closingBracketRange.startColumn-1&&(E=!0);const P=Math.max(b.lineNumber,e),H=Math.min(y.lineNumber,t),ee=E?1:0;for(let Q=P;Q<H+ee;Q++)s[Q-e].push(new Ov(k,-1,_,null,Q===b.lineNumber?b.column:-1,Q===y.lineNumber?y.column:-1));S&&(b.lineNumber>=e&&x>k&&s[b.lineNumber-e].push(new Ov(k,-1,_,new uk(!1,b.column),-1,-1)),y.lineNumber<=t&&L>k&&s[y.lineNumber-e].push(new Ov(k,-1,_,new uk(!E,y.column),-1,-1)))}for(const g of s)g.sort((p,_)=>p.visibleColumn-_.visibleColumn);return s}getVisibleColumnFromPosition(e){return Fs.visibleColumnFromColumn(this.textModel.getLineContent(e.lineNumber),e.column,this.textModel.getOptions().tabSize)+1}getLinesIndentGuides(e,t){this.assertNotDisposed();const i=this.textModel.getLineCount();if(e<1||e>i)throw new Error("Illegal value for startLineNumber");if(t<1||t>i)throw new Error("Illegal value for endLineNumber");const n=this.textModel.getOptions(),s=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,r=!!(s&&s.offSide),a=new Array(t-e+1);let l=-2,c=-1,u=-2,f=-1;for(let g=e;g<=t;g++){const p=g-e,_=this._computeIndentLevel(g-1);if(_>=0){l=g-1,c=_,a[p]=Math.ceil(_/n.indentSize);continue}if(l===-2){l=-1,c=-1;for(let b=g-2;b>=0;b--){const y=this._computeIndentLevel(b);if(y>=0){l=b,c=y;break}}}if(u!==-1&&(u===-2||u<g-1)){u=-1,f=-1;for(let b=g;b<i;b++){const y=this._computeIndentLevel(b);if(y>=0){u=b,f=y;break}}}a[p]=this._getIndentLevelForWhitespaceLine(r,c,f)}return a}_getIndentLevelForWhitespaceLine(e,t,i){const n=this.textModel.getOptions();return t===-1||i===-1?0:t<i?1+Math.floor(t/n.indentSize):t===i||e?Math.ceil(i/n.indentSize):1+Math.floor(i/n.indentSize)}}class Jue{constructor(){this.activeClassName="indent-active"}getInlineClassName(e,t,i){return this.getInlineClassNameOfLevel(i?t:e)}getInlineClassNameOfLevel(e){return`bracket-indent-guide lvl-${e%30}`}}class kFe{constructor(){this.spacesDiff=0,this.looksLikeAlignment=!1}}function DFe(o,e,t,i,n){n.spacesDiff=0,n.looksLikeAlignment=!1;let s;for(s=0;s<e&&s<i;s++){const g=o.charCodeAt(s),p=t.charCodeAt(s);if(g!==p)break}let r=0,a=0;for(let g=s;g<e;g++)o.charCodeAt(g)===32?r++:a++;let l=0,c=0;for(let g=s;g<i;g++)t.charCodeAt(g)===32?l++:c++;if(r>0&&a>0||l>0&&c>0)return;const u=Math.abs(a-c),f=Math.abs(r-l);if(u===0){n.spacesDiff=f,f>0&&0<=l-1&&l-1<o.length&&l<t.length&&t.charCodeAt(l)!==32&&o.charCodeAt(l-1)===32&&o.charCodeAt(o.length-1)===44&&(n.looksLikeAlignment=!0);return}if(f%u===0){n.spacesDiff=f/u;return}}function lse(o,e,t){const i=Math.min(o.getLineCount(),1e4);let n=0,s=0,r="",a=0;const l=[2,4,6,8,3,5,7],c=8,u=[0,0,0,0,0,0,0,0,0],f=new kFe;for(let _=1;_<=i;_++){const b=o.getLineLength(_),y=o.getLineContent(_),S=b<=65536;let L=!1,x=0,k=0,E=0;for(let A=0,P=b;A<P;A++){const H=S?y.charCodeAt(A):o.getLineCharCode(_,A);if(H===9)E++;else if(H===32)k++;else{L=!0,x=A;break}}if(!L||(E>0?n++:k>1&&s++,DFe(r,a,y,x,f),f.looksLikeAlignment&&!(t&&e===f.spacesDiff)))continue;const N=f.spacesDiff;N<=c&&u[N]++,r=y,a=x}let g=t;n!==s&&(g=n<s);let p=e;if(g){let _=g?0:.1*i;l.forEach(b=>{const y=u[b];y>_&&(_=y,p=b)}),p===4&&u[4]>0&&u[2]>0&&u[2]>=u[4]/2&&(p=2)}return{insertSpaces:g,tabSize:p}}function _a(o){return(o.metadata&1)>>>0}function pn(o,e){o.metadata=o.metadata&254|e<<0}function Ao(o){return(o.metadata&2)>>>1===1}function cn(o,e){o.metadata=o.metadata&253|(e?1:0)<<1}function ehe(o){return(o.metadata&4)>>>2===1}function cse(o,e){o.metadata=o.metadata&251|(e?1:0)<<2}function the(o){return(o.metadata&64)>>>6===1}function dse(o,e){o.metadata=o.metadata&191|(e?1:0)<<6}function EFe(o){return(o.metadata&24)>>>3}function use(o,e){o.metadata=o.metadata&231|e<<3}function IFe(o){return(o.metadata&32)>>>5===1}function hse(o,e){o.metadata=o.metadata&223|(e?1:0)<<5}class ihe{constructor(e,t,i){this.metadata=0,this.parent=this,this.left=this,this.right=this,pn(this,1),this.start=t,this.end=i,this.delta=0,this.maxEnd=i,this.id=e,this.ownerId=0,this.options=null,cse(this,!1),dse(this,!1),use(this,1),hse(this,!1),this.cachedVersionId=0,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=i,this.range=null,cn(this,!1)}reset(e,t,i,n){this.start=t,this.end=i,this.maxEnd=i,this.cachedVersionId=e,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=i,this.range=n}setOptions(e){this.options=e;const t=this.options.className;cse(this,t==="squiggly-error"||t==="squiggly-warning"||t==="squiggly-info"),dse(this,this.options.glyphMarginClassName!==null),use(this,this.options.stickiness),hse(this,this.options.collapseOnReplaceEdit)}setCachedOffsets(e,t,i){this.cachedVersionId!==i&&(this.range=null),this.cachedVersionId=i,this.cachedAbsoluteStart=e,this.cachedAbsoluteEnd=t}detach(){this.parent=null,this.left=null,this.right=null}}const qt=new ihe(null,0,0);qt.parent=qt;qt.left=qt;qt.right=qt;pn(qt,0);class I7{constructor(){this.root=qt,this.requestNormalizeDelta=!1}intervalSearch(e,t,i,n,s,r){return this.root===qt?[]:FFe(this,e,t,i,n,s,r)}search(e,t,i,n){return this.root===qt?[]:OFe(this,e,t,i,n)}collectNodesFromOwner(e){return AFe(this,e)}collectNodesPostOrder(){return PFe(this)}insert(e){fse(this,e),this._normalizeDeltaIfNecessary()}delete(e){gse(this,e),this._normalizeDeltaIfNecessary()}resolveNode(e,t){const i=e;let n=0;for(;e!==this.root;)e===e.parent.right&&(n+=e.parent.delta),e=e.parent;const s=i.start+n,r=i.end+n;i.setCachedOffsets(s,r,t)}acceptReplace(e,t,i,n){const s=RFe(this,e,e+t);for(let r=0,a=s.length;r<a;r++){const l=s[r];gse(this,l)}this._normalizeDeltaIfNecessary(),MFe(this,e,e+t,i),this._normalizeDeltaIfNecessary();for(let r=0,a=s.length;r<a;r++){const l=s[r];l.start=l.cachedAbsoluteStart,l.end=l.cachedAbsoluteEnd,NFe(l,e,e+t,i,n),l.maxEnd=l.end,fse(this,l)}this._normalizeDeltaIfNecessary()}_normalizeDeltaIfNecessary(){this.requestNormalizeDelta&&(this.requestNormalizeDelta=!1,TFe(this))}}function TFe(o){let e=o.root,t=0;for(;e!==qt;){if(e.left!==qt&&!Ao(e.left)){e=e.left;continue}if(e.right!==qt&&!Ao(e.right)){t+=e.delta,e=e.right;continue}e.start=t+e.start,e.end=t+e.end,e.delta=0,$m(e),cn(e,!0),cn(e.left,!1),cn(e.right,!1),e===e.parent.right&&(t-=e.parent.delta),e=e.parent}cn(o.root,!1)}function nw(o,e,t,i){return o<t?!0:o>t||i===1?!1:i===2?!0:e}function NFe(o,e,t,i,n){const s=EFe(o),r=s===0||s===2,a=s===1||s===2,l=t-e,c=i,u=Math.min(l,c),f=o.start;let g=!1;const p=o.end;let _=!1;e<=f&&p<=t&&IFe(o)&&(o.start=e,g=!0,o.end=e,_=!0);{const y=n?1:l>0?2:0;!g&&nw(f,r,e,y)&&(g=!0),!_&&nw(p,a,e,y)&&(_=!0)}if(u>0&&!n){const y=l>c?2:0;!g&&nw(f,r,e+u,y)&&(g=!0),!_&&nw(p,a,e+u,y)&&(_=!0)}{const y=n?1:0;!g&&nw(f,r,t,y)&&(o.start=e+c,g=!0),!_&&nw(p,a,t,y)&&(o.end=e+c,_=!0)}const b=c-l;g||(o.start=Math.max(0,f+b)),_||(o.end=Math.max(0,p+b)),o.start>o.end&&(o.end=o.start)}function RFe(o,e,t){let i=o.root,n=0,s=0,r=0,a=0;const l=[];let c=0;for(;i!==qt;){if(Ao(i)){cn(i.left,!1),cn(i.right,!1),i===i.parent.right&&(n-=i.parent.delta),i=i.parent;continue}if(!Ao(i.left)){if(s=n+i.maxEnd,s<e){cn(i,!0);continue}if(i.left!==qt){i=i.left;continue}}if(r=n+i.start,r>t){cn(i,!0);continue}if(a=n+i.end,a>=e&&(i.setCachedOffsets(r,a,0),l[c++]=i),cn(i,!0),i.right!==qt&&!Ao(i.right)){n+=i.delta,i=i.right;continue}}return cn(o.root,!1),l}function MFe(o,e,t,i){let n=o.root,s=0,r=0,a=0;const l=i-(t-e);for(;n!==qt;){if(Ao(n)){cn(n.left,!1),cn(n.right,!1),n===n.parent.right&&(s-=n.parent.delta),$m(n),n=n.parent;continue}if(!Ao(n.left)){if(r=s+n.maxEnd,r<e){cn(n,!0);continue}if(n.left!==qt){n=n.left;continue}}if(a=s+n.start,a>t){n.start+=l,n.end+=l,n.delta+=l,(n.delta<-1073741824||n.delta>1073741824)&&(o.requestNormalizeDelta=!0),cn(n,!0);continue}if(cn(n,!0),n.right!==qt&&!Ao(n.right)){s+=n.delta,n=n.right;continue}}cn(o.root,!1)}function AFe(o,e){let t=o.root;const i=[];let n=0;for(;t!==qt;){if(Ao(t)){cn(t.left,!1),cn(t.right,!1),t=t.parent;continue}if(t.left!==qt&&!Ao(t.left)){t=t.left;continue}if(t.ownerId===e&&(i[n++]=t),cn(t,!0),t.right!==qt&&!Ao(t.right)){t=t.right;continue}}return cn(o.root,!1),i}function PFe(o){let e=o.root;const t=[];let i=0;for(;e!==qt;){if(Ao(e)){cn(e.left,!1),cn(e.right,!1),e=e.parent;continue}if(e.left!==qt&&!Ao(e.left)){e=e.left;continue}if(e.right!==qt&&!Ao(e.right)){e=e.right;continue}t[i++]=e,cn(e,!0)}return cn(o.root,!1),t}function OFe(o,e,t,i,n){let s=o.root,r=0,a=0,l=0;const c=[];let u=0;for(;s!==qt;){if(Ao(s)){cn(s.left,!1),cn(s.right,!1),s===s.parent.right&&(r-=s.parent.delta),s=s.parent;continue}if(s.left!==qt&&!Ao(s.left)){s=s.left;continue}a=r+s.start,l=r+s.end,s.setCachedOffsets(a,l,i);let f=!0;if(e&&s.ownerId&&s.ownerId!==e&&(f=!1),t&&ehe(s)&&(f=!1),n&&!the(s)&&(f=!1),f&&(c[u++]=s),cn(s,!0),s.right!==qt&&!Ao(s.right)){r+=s.delta,s=s.right;continue}}return cn(o.root,!1),c}function FFe(o,e,t,i,n,s,r){let a=o.root,l=0,c=0,u=0,f=0;const g=[];let p=0;for(;a!==qt;){if(Ao(a)){cn(a.left,!1),cn(a.right,!1),a===a.parent.right&&(l-=a.parent.delta),a=a.parent;continue}if(!Ao(a.left)){if(c=l+a.maxEnd,c<e){cn(a,!0);continue}if(a.left!==qt){a=a.left;continue}}if(u=l+a.start,u>t){cn(a,!0);continue}if(f=l+a.end,f>=e){a.setCachedOffsets(u,f,s);let _=!0;i&&a.ownerId&&a.ownerId!==i&&(_=!1),n&&ehe(a)&&(_=!1),r&&!the(a)&&(_=!1),_&&(g[p++]=a)}if(cn(a,!0),a.right!==qt&&!Ao(a.right)){l+=a.delta,a=a.right;continue}}return cn(o.root,!1),g}function fse(o,e){if(o.root===qt)return e.parent=qt,e.left=qt,e.right=qt,pn(e,0),o.root=e,o.root;BFe(o,e),kp(e.parent);let t=e;for(;t!==o.root&&_a(t.parent)===1;)if(t.parent===t.parent.parent.left){const i=t.parent.parent.right;_a(i)===1?(pn(t.parent,0),pn(i,0),pn(t.parent.parent,1),t=t.parent.parent):(t===t.parent.right&&(t=t.parent,hk(o,t)),pn(t.parent,0),pn(t.parent.parent,1),fk(o,t.parent.parent))}else{const i=t.parent.parent.left;_a(i)===1?(pn(t.parent,0),pn(i,0),pn(t.parent.parent,1),t=t.parent.parent):(t===t.parent.left&&(t=t.parent,fk(o,t)),pn(t.parent,0),pn(t.parent.parent,1),hk(o,t.parent.parent))}return pn(o.root,0),e}function BFe(o,e){let t=0,i=o.root;const n=e.start,s=e.end;for(;;)if(HFe(n,s,i.start+t,i.end+t)<0)if(i.left===qt){e.start-=t,e.end-=t,e.maxEnd-=t,i.left=e;break}else i=i.left;else if(i.right===qt){e.start-=t+i.delta,e.end-=t+i.delta,e.maxEnd-=t+i.delta,i.right=e;break}else t+=i.delta,i=i.right;e.parent=i,e.left=qt,e.right=qt,pn(e,1)}function gse(o,e){let t,i;if(e.left===qt?(t=e.right,i=e,t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(o.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta):e.right===qt?(t=e.left,i=e):(i=WFe(e.right),t=i.right,t.start+=i.delta,t.end+=i.delta,t.delta+=i.delta,(t.delta<-1073741824||t.delta>1073741824)&&(o.requestNormalizeDelta=!0),i.start+=e.delta,i.end+=e.delta,i.delta=e.delta,(i.delta<-1073741824||i.delta>1073741824)&&(o.requestNormalizeDelta=!0)),i===o.root){o.root=t,pn(t,0),e.detach(),T7(),$m(t),o.root.parent=qt;return}const n=_a(i)===1;if(i===i.parent.left?i.parent.left=t:i.parent.right=t,i===e?t.parent=i.parent:(i.parent===e?t.parent=i:t.parent=i.parent,i.left=e.left,i.right=e.right,i.parent=e.parent,pn(i,_a(e)),e===o.root?o.root=i:e===e.parent.left?e.parent.left=i:e.parent.right=i,i.left!==qt&&(i.left.parent=i),i.right!==qt&&(i.right.parent=i)),e.detach(),n){kp(t.parent),i!==e&&(kp(i),kp(i.parent)),T7();return}kp(t),kp(t.parent),i!==e&&(kp(i),kp(i.parent));let s;for(;t!==o.root&&_a(t)===0;)t===t.parent.left?(s=t.parent.right,_a(s)===1&&(pn(s,0),pn(t.parent,1),hk(o,t.parent),s=t.parent.right),_a(s.left)===0&&_a(s.right)===0?(pn(s,1),t=t.parent):(_a(s.right)===0&&(pn(s.left,0),pn(s,1),fk(o,s),s=t.parent.right),pn(s,_a(t.parent)),pn(t.parent,0),pn(s.right,0),hk(o,t.parent),t=o.root)):(s=t.parent.left,_a(s)===1&&(pn(s,0),pn(t.parent,1),fk(o,t.parent),s=t.parent.left),_a(s.left)===0&&_a(s.right)===0?(pn(s,1),t=t.parent):(_a(s.left)===0&&(pn(s.right,0),pn(s,1),hk(o,s),s=t.parent.left),pn(s,_a(t.parent)),pn(t.parent,0),pn(s.left,0),fk(o,t.parent),t=o.root));pn(t,0),T7()}function WFe(o){for(;o.left!==qt;)o=o.left;return o}function T7(){qt.parent=qt,qt.delta=0,qt.start=0,qt.end=0}function hk(o,e){const t=e.right;t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(o.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta,e.right=t.left,t.left!==qt&&(t.left.parent=e),t.parent=e.parent,e.parent===qt?o.root=t:e===e.parent.left?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t,$m(e),$m(t)}function fk(o,e){const t=e.left;e.delta-=t.delta,(e.delta<-1073741824||e.delta>1073741824)&&(o.requestNormalizeDelta=!0),e.start-=t.delta,e.end-=t.delta,e.left=t.right,t.right!==qt&&(t.right.parent=e),t.parent=e.parent,e.parent===qt?o.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t,$m(e),$m(t)}function nhe(o){let e=o.end;if(o.left!==qt){const t=o.left.maxEnd;t>e&&(e=t)}if(o.right!==qt){const t=o.right.maxEnd+o.delta;t>e&&(e=t)}return e}function $m(o){o.maxEnd=nhe(o)}function kp(o){for(;o!==qt;){const e=nhe(o);if(o.maxEnd===e)return;o.maxEnd=e,o=o.parent}}function HFe(o,e,t,i){return o===t?e-i:o-t}class U6{constructor(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==Nt)return ZK(this.right);let e=this;for(;e.parent!==Nt&&e.parent.left!==e;)e=e.parent;return e.parent===Nt?Nt:e.parent}prev(){if(this.left!==Nt)return she(this.left);let e=this;for(;e.parent!==Nt&&e.parent.right!==e;)e=e.parent;return e.parent===Nt?Nt:e.parent}detach(){this.parent=null,this.left=null,this.right=null}}const Nt=new U6(null,0);Nt.parent=Nt;Nt.left=Nt;Nt.right=Nt;Nt.color=0;function ZK(o){for(;o.left!==Nt;)o=o.left;return o}function she(o){for(;o.right!==Nt;)o=o.right;return o}function XK(o){return o===Nt?0:o.size_left+o.piece.length+XK(o.right)}function QK(o){return o===Nt?0:o.lf_left+o.piece.lineFeedCnt+QK(o.right)}function N7(){Nt.parent=Nt}function gk(o,e){const t=e.right;t.size_left+=e.size_left+(e.piece?e.piece.length:0),t.lf_left+=e.lf_left+(e.piece?e.piece.lineFeedCnt:0),e.right=t.left,t.left!==Nt&&(t.left.parent=e),t.parent=e.parent,e.parent===Nt?o.root=t:e.parent.left===e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t}function pk(o,e){const t=e.left;e.left=t.right,t.right!==Nt&&(t.right.parent=e),t.parent=e.parent,e.size_left-=t.size_left+(t.piece?t.piece.length:0),e.lf_left-=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),e.parent===Nt?o.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t}function wR(o,e){let t,i;if(e.left===Nt?(i=e,t=i.right):e.right===Nt?(i=e,t=i.left):(i=ZK(e.right),t=i.right),i===o.root){o.root=t,t.color=0,e.detach(),N7(),o.root.parent=Nt;return}const n=i.color===1;if(i===i.parent.left?i.parent.left=t:i.parent.right=t,i===e?(t.parent=i.parent,Vx(o,t)):(i.parent===e?t.parent=i:t.parent=i.parent,Vx(o,t),i.left=e.left,i.right=e.right,i.parent=e.parent,i.color=e.color,e===o.root?o.root=i:e===e.parent.left?e.parent.left=i:e.parent.right=i,i.left!==Nt&&(i.left.parent=i),i.right!==Nt&&(i.right.parent=i),i.size_left=e.size_left,i.lf_left=e.lf_left,Vx(o,i)),e.detach(),t.parent.left===t){const r=XK(t),a=QK(t);if(r!==t.parent.size_left||a!==t.parent.lf_left){const l=r-t.parent.size_left,c=a-t.parent.lf_left;t.parent.size_left=r,t.parent.lf_left=a,Df(o,t.parent,l,c)}}if(Vx(o,t.parent),n){N7();return}let s;for(;t!==o.root&&t.color===0;)t===t.parent.left?(s=t.parent.right,s.color===1&&(s.color=0,t.parent.color=1,gk(o,t.parent),s=t.parent.right),s.left.color===0&&s.right.color===0?(s.color=1,t=t.parent):(s.right.color===0&&(s.left.color=0,s.color=1,pk(o,s),s=t.parent.right),s.color=t.parent.color,t.parent.color=0,s.right.color=0,gk(o,t.parent),t=o.root)):(s=t.parent.left,s.color===1&&(s.color=0,t.parent.color=1,pk(o,t.parent),s=t.parent.left),s.left.color===0&&s.right.color===0?(s.color=1,t=t.parent):(s.left.color===0&&(s.right.color=0,s.color=1,gk(o,s),s=t.parent.left),s.color=t.parent.color,t.parent.color=0,s.left.color=0,pk(o,t.parent),t=o.root));t.color=0,N7()}function pse(o,e){for(Vx(o,e);e!==o.root&&e.parent.color===1;)if(e.parent===e.parent.parent.left){const t=e.parent.parent.right;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.right&&(e=e.parent,gk(o,e)),e.parent.color=0,e.parent.parent.color=1,pk(o,e.parent.parent))}else{const t=e.parent.parent.left;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.left&&(e=e.parent,pk(o,e)),e.parent.color=0,e.parent.parent.color=1,gk(o,e.parent.parent))}o.root.color=0}function Df(o,e,t,i){for(;e!==o.root&&e!==Nt;)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=i),e=e.parent}function Vx(o,e){let t=0,i=0;if(e!==o.root){for(;e!==o.root&&e===e.parent.right;)e=e.parent;if(e!==o.root)for(e=e.parent,t=XK(e.left)-e.size_left,i=QK(e.left)-e.lf_left,e.size_left+=t,e.lf_left+=i;e!==o.root&&(t!==0||i!==0);)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=i),e=e.parent}}const wf=65535;function ohe(o){let e;return o[o.length-1]<65536?e=new Uint16Array(o.length):e=new Uint32Array(o.length),e.set(o,0),e}class VFe{constructor(e,t,i,n,s){this.lineStarts=e,this.cr=t,this.lf=i,this.crlf=n,this.isBasicASCII=s}}function If(o,e=!0){const t=[0];let i=1;for(let n=0,s=o.length;n<s;n++){const r=o.charCodeAt(n);r===13?n+1<s&&o.charCodeAt(n+1)===10?(t[i++]=n+2,n++):t[i++]=n+1:r===10&&(t[i++]=n+1)}return e?ohe(t):t}function zFe(o,e){o.length=0,o[0]=0;let t=1,i=0,n=0,s=0,r=!0;for(let l=0,c=e.length;l<c;l++){const u=e.charCodeAt(l);u===13?l+1<c&&e.charCodeAt(l+1)===10?(s++,o[t++]=l+2,l++):(i++,o[t++]=l+1):u===10?(n++,o[t++]=l+1):r&&u!==9&&(u<32||u>126)&&(r=!1)}const a=new VFe(ohe(o),i,n,s,r);return o.length=0,a}class za{constructor(e,t,i,n,s){this.bufferIndex=e,this.start=t,this.end=i,this.lineFeedCnt=n,this.length=s}}class Cv{constructor(e,t){this.buffer=e,this.lineStarts=t}}class UFe{constructor(e,t){this._pieces=[],this._tree=e,this._BOM=t,this._index=0,e.root!==Nt&&e.iterate(e.root,i=>(i!==Nt&&this._pieces.push(i.piece),!0))}read(){return this._pieces.length===0?this._index===0?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:this._index===0?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}}class $Fe{constructor(e){this._limit=e,this._cache=[]}get(e){for(let t=this._cache.length-1;t>=0;t--){const i=this._cache[t];if(i.nodeStartOffset<=e&&i.nodeStartOffset+i.node.piece.length>=e)return i}return null}get2(e){for(let t=this._cache.length-1;t>=0;t--){const i=this._cache[t];if(i.nodeStartLineNumber&&i.nodeStartLineNumber<e&&i.nodeStartLineNumber+i.node.piece.lineFeedCnt>=e)return i}return null}set(e){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(e)}validate(e){let t=!1;const i=this._cache;for(let n=0;n<i.length;n++){const s=i[n];if(s.node.parent===null||s.nodeStartOffset>=e){i[n]=null,t=!0;continue}}if(t){const n=[];for(const s of i)s!==null&&n.push(s);this._cache=n}}}class jFe{constructor(e,t,i){this.create(e,t,i)}create(e,t,i){this._buffers=[new Cv("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=Nt,this._lineCnt=1,this._length=0,this._EOL=t,this._EOLLength=t.length,this._EOLNormalized=i;let n=null;for(let s=0,r=e.length;s<r;s++)if(e[s].buffer.length>0){e[s].lineStarts||(e[s].lineStarts=If(e[s].buffer));const a=new za(s+1,{line:0,column:0},{line:e[s].lineStarts.length-1,column:e[s].buffer.length-e[s].lineStarts[e[s].lineStarts.length-1]},e[s].lineStarts.length-1,e[s].buffer.length);this._buffers.push(e[s]),n=this.rbInsertRight(n,a)}this._searchCache=new $Fe(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()}normalizeEOL(e){const t=wf,i=t-Math.floor(t/3),n=i*2;let s="",r=0;const a=[];if(this.iterate(this.root,l=>{const c=this.getNodeContent(l),u=c.length;if(r<=i||r+u<n)return s+=c,r+=u,!0;const f=s.replace(/\r\n|\r|\n/g,e);return a.push(new Cv(f,If(f))),s=c,r=u,!0}),r>0){const l=s.replace(/\r\n|\r|\n/g,e);a.push(new Cv(l,If(l)))}this.create(a,e,!0)}getEOL(){return this._EOL}setEOL(e){this._EOL=e,this._EOLLength=this._EOL.length,this.normalizeEOL(e)}createSnapshot(e){return new UFe(this,e)}getOffsetAt(e,t){let i=0,n=this.root;for(;n!==Nt;)if(n.left!==Nt&&n.lf_left+1>=e)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt+1>=e){i+=n.size_left;const s=this.getAccumulatedValue(n,e-n.lf_left-2);return i+=s+t-1}else e-=n.lf_left+n.piece.lineFeedCnt,i+=n.size_left+n.piece.length,n=n.right;return i}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let t=this.root,i=0;const n=e;for(;t!==Nt;)if(t.size_left!==0&&t.size_left>=e)t=t.left;else if(t.size_left+t.piece.length>=e){const s=this.getIndexOf(t,e-t.size_left);if(i+=t.lf_left+s.index,s.index===0){const r=this.getOffsetAt(i+1,1),a=n-r;return new G(i+1,a+1)}return new G(i+1,s.remainder+1)}else if(e-=t.size_left+t.piece.length,i+=t.lf_left+t.piece.lineFeedCnt,t.right===Nt){const s=this.getOffsetAt(i+1,1),r=n-e-s;return new G(i+1,r+1)}else t=t.right;return new G(1,1)}getValueInRange(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";const i=this.nodeAt2(e.startLineNumber,e.startColumn),n=this.nodeAt2(e.endLineNumber,e.endColumn),s=this.getValueInRange2(i,n);return t?t!==this._EOL||!this._EOLNormalized?s.replace(/\r\n|\r|\n/g,t):t===this.getEOL()&&this._EOLNormalized?s:s.replace(/\r\n|\r|\n/g,t):s}getValueInRange2(e,t){if(e.node===t.node){const a=e.node,l=this._buffers[a.piece.bufferIndex].buffer,c=this.offsetInBuffer(a.piece.bufferIndex,a.piece.start);return l.substring(c+e.remainder,c+t.remainder)}let i=e.node;const n=this._buffers[i.piece.bufferIndex].buffer,s=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);let r=n.substring(s+e.remainder,s+i.piece.length);for(i=i.next();i!==Nt;){const a=this._buffers[i.piece.bufferIndex].buffer,l=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);if(i===t.node){r+=a.substring(l,l+t.remainder);break}else r+=a.substr(l,i.piece.length);i=i.next()}return r}getLinesContent(){const e=[];let t=0,i="",n=!1;return this.iterate(this.root,s=>{if(s===Nt)return!0;const r=s.piece;let a=r.length;if(a===0)return!0;const l=this._buffers[r.bufferIndex].buffer,c=this._buffers[r.bufferIndex].lineStarts,u=r.start.line,f=r.end.line;let g=c[u]+r.start.column;if(n&&(l.charCodeAt(g)===10&&(g++,a--),e[t++]=i,i="",n=!1,a===0))return!0;if(u===f)return!this._EOLNormalized&&l.charCodeAt(g+a-1)===13?(n=!0,i+=l.substr(g,a-1)):i+=l.substr(g,a),!0;i+=this._EOLNormalized?l.substring(g,Math.max(g,c[u+1]-this._EOLLength)):l.substring(g,c[u+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=i;for(let p=u+1;p<f;p++)i=this._EOLNormalized?l.substring(c[p],c[p+1]-this._EOLLength):l.substring(c[p],c[p+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=i;return!this._EOLNormalized&&l.charCodeAt(c[f]+r.end.column-1)===13?(n=!0,r.end.column===0?t--:i=l.substr(c[f],r.end.column-1)):i=l.substr(c[f],r.end.column),!0}),n&&(e[t++]=i,i=""),e[t++]=i,e}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(e){return this._lastVisitedLine.lineNumber===e?this._lastVisitedLine.value:(this._lastVisitedLine.lineNumber=e,e===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(e):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(e,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,""),this._lastVisitedLine.value)}_getCharCode(e){if(e.remainder===e.node.piece.length){const t=e.node.next();if(!t)return 0;const i=this._buffers[t.piece.bufferIndex],n=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start);return i.buffer.charCodeAt(n)}else{const t=this._buffers[e.node.piece.bufferIndex],n=this.offsetInBuffer(e.node.piece.bufferIndex,e.node.piece.start)+e.remainder;return t.buffer.charCodeAt(n)}}getLineCharCode(e,t){const i=this.nodeAt2(e,t+1);return this._getCharCode(i)}getLineLength(e){if(e===this.getLineCount()){const t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this._EOLLength}findMatchesInNode(e,t,i,n,s,r,a,l,c,u,f){const g=this._buffers[e.piece.bufferIndex],p=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start),_=this.offsetInBuffer(e.piece.bufferIndex,s),b=this.offsetInBuffer(e.piece.bufferIndex,r);let y;const S={line:0,column:0};let L,x;t._wordSeparators?(L=g.buffer.substring(_,b),x=k=>k+_,t.reset(0)):(L=g.buffer,x=k=>k,t.reset(_));do if(y=t.next(L),y){if(x(y.index)>=b)return u;this.positionInBuffer(e,x(y.index)-p,S);const k=this.getLineFeedCnt(e.piece.bufferIndex,s,S),E=S.line===s.line?S.column-s.column+n:S.column+1,N=E+y[0].length;if(f[u++]=gv(new M(i+k,E,i+k,N),y,l),x(y.index)+y[0].length>=b||u>=c)return u}while(y);return u}findMatchesLineByLine(e,t,i,n){const s=[];let r=0;const a=new Nw(t.wordSeparators,t.regex);let l=this.nodeAt2(e.startLineNumber,e.startColumn);if(l===null)return[];const c=this.nodeAt2(e.endLineNumber,e.endColumn);if(c===null)return[];let u=this.positionInBuffer(l.node,l.remainder);const f=this.positionInBuffer(c.node,c.remainder);if(l.node===c.node)return this.findMatchesInNode(l.node,a,e.startLineNumber,e.startColumn,u,f,t,i,n,r,s),s;let g=e.startLineNumber,p=l.node;for(;p!==c.node;){const b=this.getLineFeedCnt(p.piece.bufferIndex,u,p.piece.end);if(b>=1){const S=this._buffers[p.piece.bufferIndex].lineStarts,L=this.offsetInBuffer(p.piece.bufferIndex,p.piece.start),x=S[u.line+b],k=g===e.startLineNumber?e.startColumn:1;if(r=this.findMatchesInNode(p,a,g,k,u,this.positionInBuffer(p,x-L),t,i,n,r,s),r>=n)return s;g+=b}const y=g===e.startLineNumber?e.startColumn-1:0;if(g===e.endLineNumber){const S=this.getLineContent(g).substring(y,e.endColumn-1);return r=this._findMatchesInLine(t,a,S,e.endLineNumber,y,r,s,i,n),s}if(r=this._findMatchesInLine(t,a,this.getLineContent(g).substr(y),g,y,r,s,i,n),r>=n)return s;g++,l=this.nodeAt2(g,1),p=l.node,u=this.positionInBuffer(l.node,l.remainder)}if(g===e.endLineNumber){const b=g===e.startLineNumber?e.startColumn-1:0,y=this.getLineContent(g).substring(b,e.endColumn-1);return r=this._findMatchesInLine(t,a,y,e.endLineNumber,b,r,s,i,n),s}const _=g===e.startLineNumber?e.startColumn:1;return r=this.findMatchesInNode(c.node,a,g,_,u,f,t,i,n,r,s),s}_findMatchesInLine(e,t,i,n,s,r,a,l,c){const u=e.wordSeparators;if(!l&&e.simpleSearch){const g=e.simpleSearch,p=g.length,_=i.length;let b=-p;for(;(b=i.indexOf(g,b+p))!==-1;)if((!u||Jq(u,i,_,b,p))&&(a[r++]=new bD(new M(n,b+1+s,n,b+1+p+s),null),r>=c))return r;return r}let f;t.reset(0);do if(f=t.next(i),f&&(a[r++]=gv(new M(n,f.index+1+s,n,f.index+1+f[0].length+s),f,l),r>=c))return r;while(f);return r}insert(e,t,i=!1){if(this._EOLNormalized=this._EOLNormalized&&i,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==Nt){const{node:n,remainder:s,nodeStartOffset:r}=this.nodeAt(e),a=n.piece,l=a.bufferIndex,c=this.positionInBuffer(n,s);if(n.piece.bufferIndex===0&&a.end.line===this._lastChangeBufferPos.line&&a.end.column===this._lastChangeBufferPos.column&&r+a.length===e&&t.length<wf){this.appendToNode(n,t),this.computeBufferMetadata();return}if(r===e)this.insertContentToNodeLeft(t,n),this._searchCache.validate(e);else if(r+n.piece.length>e){const u=[];let f=new za(a.bufferIndex,c,a.end,this.getLineFeedCnt(a.bufferIndex,c,a.end),this.offsetInBuffer(l,a.end)-this.offsetInBuffer(l,c));if(this.shouldCheckCRLF()&&this.endWithCR(t)&&this.nodeCharCodeAt(n,s)===10){const b={line:f.start.line+1,column:0};f=new za(f.bufferIndex,b,f.end,this.getLineFeedCnt(f.bufferIndex,b,f.end),f.length-1),t+=`
`}if(this.shouldCheckCRLF()&&this.startWithLF(t))if(this.nodeCharCodeAt(n,s-1)===13){const b=this.positionInBuffer(n,s-1);this.deleteNodeTail(n,b),t="\r"+t,n.piece.length===0&&u.push(n)}else this.deleteNodeTail(n,c);else this.deleteNodeTail(n,c);const g=this.createNewPieces(t);f.length>0&&this.rbInsertRight(n,f);let p=n;for(let _=0;_<g.length;_++)p=this.rbInsertRight(p,g[_]);this.deleteNodes(u)}else this.insertContentToNodeRight(t,n)}else{const n=this.createNewPieces(t);let s=this.rbInsertLeft(null,n[0]);for(let r=1;r<n.length;r++)s=this.rbInsertRight(s,n[r])}this.computeBufferMetadata()}delete(e,t){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",t<=0||this.root===Nt)return;const i=this.nodeAt(e),n=this.nodeAt(e+t),s=i.node,r=n.node;if(s===r){const g=this.positionInBuffer(s,i.remainder),p=this.positionInBuffer(s,n.remainder);if(i.nodeStartOffset===e){if(t===s.piece.length){const _=s.next();wR(this,s),this.validateCRLFWithPrevNode(_),this.computeBufferMetadata();return}this.deleteNodeHead(s,p),this._searchCache.validate(e),this.validateCRLFWithPrevNode(s),this.computeBufferMetadata();return}if(i.nodeStartOffset+s.piece.length===e+t){this.deleteNodeTail(s,g),this.validateCRLFWithNextNode(s),this.computeBufferMetadata();return}this.shrinkNode(s,g,p),this.computeBufferMetadata();return}const a=[],l=this.positionInBuffer(s,i.remainder);this.deleteNodeTail(s,l),this._searchCache.validate(e),s.piece.length===0&&a.push(s);const c=this.positionInBuffer(r,n.remainder);this.deleteNodeHead(r,c),r.piece.length===0&&a.push(r);const u=s.next();for(let g=u;g!==Nt&&g!==r;g=g.next())a.push(g);const f=s.piece.length===0?s.prev():s;this.deleteNodes(a),this.validateCRLFWithNextNode(f),this.computeBufferMetadata()}insertContentToNodeLeft(e,t){const i=[];if(this.shouldCheckCRLF()&&this.endWithCR(e)&&this.startWithLF(t)){const r=t.piece,a={line:r.start.line+1,column:0},l=new za(r.bufferIndex,a,r.end,this.getLineFeedCnt(r.bufferIndex,a,r.end),r.length-1);t.piece=l,e+=`
`,Df(this,t,-1,-1),t.piece.length===0&&i.push(t)}const n=this.createNewPieces(e);let s=this.rbInsertLeft(t,n[n.length-1]);for(let r=n.length-2;r>=0;r--)s=this.rbInsertLeft(s,n[r]);this.validateCRLFWithPrevNode(s),this.deleteNodes(i)}insertContentToNodeRight(e,t){this.adjustCarriageReturnFromNext(e,t)&&(e+=`
`);const i=this.createNewPieces(e),n=this.rbInsertRight(t,i[0]);let s=n;for(let r=1;r<i.length;r++)s=this.rbInsertRight(s,i[r]);this.validateCRLFWithPrevNode(n)}positionInBuffer(e,t,i){const n=e.piece,s=e.piece.bufferIndex,r=this._buffers[s].lineStarts,l=r[n.start.line]+n.start.column+t;let c=n.start.line,u=n.end.line,f=0,g=0,p=0;for(;c<=u&&(f=c+(u-c)/2|0,p=r[f],f!==u);)if(g=r[f+1],l<p)u=f-1;else if(l>=g)c=f+1;else break;return i?(i.line=f,i.column=l-p,null):{line:f,column:l-p}}getLineFeedCnt(e,t,i){if(i.column===0)return i.line-t.line;const n=this._buffers[e].lineStarts;if(i.line===n.length-1)return i.line-t.line;const s=n[i.line+1],r=n[i.line]+i.column;if(s>r+1)return i.line-t.line;const a=r-1;return this._buffers[e].buffer.charCodeAt(a)===13?i.line-t.line+1:i.line-t.line}offsetInBuffer(e,t){return this._buffers[e].lineStarts[t.line]+t.column}deleteNodes(e){for(let t=0;t<e.length;t++)wR(this,e[t])}createNewPieces(e){if(e.length>wf){const u=[];for(;e.length>wf;){const g=e.charCodeAt(wf-1);let p;g===13||g>=55296&&g<=56319?(p=e.substring(0,wf-1),e=e.substring(wf-1)):(p=e.substring(0,wf),e=e.substring(wf));const _=If(p);u.push(new za(this._buffers.length,{line:0,column:0},{line:_.length-1,column:p.length-_[_.length-1]},_.length-1,p.length)),this._buffers.push(new Cv(p,_))}const f=If(e);return u.push(new za(this._buffers.length,{line:0,column:0},{line:f.length-1,column:e.length-f[f.length-1]},f.length-1,e.length)),this._buffers.push(new Cv(e,f)),u}let t=this._buffers[0].buffer.length;const i=If(e,!1);let n=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===t&&t!==0&&this.startWithLF(e)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},n=this._lastChangeBufferPos;for(let u=0;u<i.length;u++)i[u]+=t+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(i.slice(1)),this._buffers[0].buffer+="_"+e,t+=1}else{if(t!==0)for(let u=0;u<i.length;u++)i[u]+=t;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(i.slice(1)),this._buffers[0].buffer+=e}const s=this._buffers[0].buffer.length,r=this._buffers[0].lineStarts.length-1,a=s-this._buffers[0].lineStarts[r],l={line:r,column:a},c=new za(0,n,l,this.getLineFeedCnt(0,n,l),s-t);return this._lastChangeBufferPos=l,[c]}getLineRawContent(e,t=0){let i=this.root,n="";const s=this._searchCache.get2(e);if(s){i=s.node;const r=this.getAccumulatedValue(i,e-s.nodeStartLineNumber-1),a=this._buffers[i.piece.bufferIndex].buffer,l=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);if(s.nodeStartLineNumber+i.piece.lineFeedCnt===e)n=a.substring(l+r,l+i.piece.length);else{const c=this.getAccumulatedValue(i,e-s.nodeStartLineNumber);return a.substring(l+r,l+c-t)}}else{let r=0;const a=e;for(;i!==Nt;)if(i.left!==Nt&&i.lf_left>=e-1)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt>e-1){const l=this.getAccumulatedValue(i,e-i.lf_left-2),c=this.getAccumulatedValue(i,e-i.lf_left-1),u=this._buffers[i.piece.bufferIndex].buffer,f=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);return r+=i.size_left,this._searchCache.set({node:i,nodeStartOffset:r,nodeStartLineNumber:a-(e-1-i.lf_left)}),u.substring(f+l,f+c-t)}else if(i.lf_left+i.piece.lineFeedCnt===e-1){const l=this.getAccumulatedValue(i,e-i.lf_left-2),c=this._buffers[i.piece.bufferIndex].buffer,u=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);n=c.substring(u+l,u+i.piece.length);break}else e-=i.lf_left+i.piece.lineFeedCnt,r+=i.size_left+i.piece.length,i=i.right}for(i=i.next();i!==Nt;){const r=this._buffers[i.piece.bufferIndex].buffer;if(i.piece.lineFeedCnt>0){const a=this.getAccumulatedValue(i,0),l=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);return n+=r.substring(l,l+a-t),n}else{const a=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);n+=r.substr(a,i.piece.length)}i=i.next()}return n}computeBufferMetadata(){let e=this.root,t=1,i=0;for(;e!==Nt;)t+=e.lf_left+e.piece.lineFeedCnt,i+=e.size_left+e.piece.length,e=e.right;this._lineCnt=t,this._length=i,this._searchCache.validate(this._length)}getIndexOf(e,t){const i=e.piece,n=this.positionInBuffer(e,t),s=n.line-i.start.line;if(this.offsetInBuffer(i.bufferIndex,i.end)-this.offsetInBuffer(i.bufferIndex,i.start)===t){const r=this.getLineFeedCnt(e.piece.bufferIndex,i.start,n);if(r!==s)return{index:r,remainder:0}}return{index:s,remainder:n.column}}getAccumulatedValue(e,t){if(t<0)return 0;const i=e.piece,n=this._buffers[i.bufferIndex].lineStarts,s=i.start.line+t+1;return s>i.end.line?n[i.end.line]+i.end.column-n[i.start.line]-i.start.column:n[s]-n[i.start.line]-i.start.column}deleteNodeTail(e,t){const i=e.piece,n=i.lineFeedCnt,s=this.offsetInBuffer(i.bufferIndex,i.end),r=t,a=this.offsetInBuffer(i.bufferIndex,r),l=this.getLineFeedCnt(i.bufferIndex,i.start,r),c=l-n,u=a-s,f=i.length+u;e.piece=new za(i.bufferIndex,i.start,r,l,f),Df(this,e,u,c)}deleteNodeHead(e,t){const i=e.piece,n=i.lineFeedCnt,s=this.offsetInBuffer(i.bufferIndex,i.start),r=t,a=this.getLineFeedCnt(i.bufferIndex,r,i.end),l=this.offsetInBuffer(i.bufferIndex,r),c=a-n,u=s-l,f=i.length+u;e.piece=new za(i.bufferIndex,r,i.end,a,f),Df(this,e,u,c)}shrinkNode(e,t,i){const n=e.piece,s=n.start,r=n.end,a=n.length,l=n.lineFeedCnt,c=t,u=this.getLineFeedCnt(n.bufferIndex,n.start,c),f=this.offsetInBuffer(n.bufferIndex,t)-this.offsetInBuffer(n.bufferIndex,s);e.piece=new za(n.bufferIndex,n.start,c,u,f),Df(this,e,f-a,u-l);const g=new za(n.bufferIndex,i,r,this.getLineFeedCnt(n.bufferIndex,i,r),this.offsetInBuffer(n.bufferIndex,r)-this.offsetInBuffer(n.bufferIndex,i)),p=this.rbInsertRight(e,g);this.validateCRLFWithPrevNode(p)}appendToNode(e,t){this.adjustCarriageReturnFromNext(t,e)&&(t+=`
`);const i=this.shouldCheckCRLF()&&this.startWithLF(t)&&this.endWithCR(e),n=this._buffers[0].buffer.length;this._buffers[0].buffer+=t;const s=If(t,!1);for(let p=0;p<s.length;p++)s[p]+=n;if(i){const p=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:n-p}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(s.slice(1));const r=this._buffers[0].lineStarts.length-1,a=this._buffers[0].buffer.length-this._buffers[0].lineStarts[r],l={line:r,column:a},c=e.piece.length+t.length,u=e.piece.lineFeedCnt,f=this.getLineFeedCnt(0,e.piece.start,l),g=f-u;e.piece=new za(e.piece.bufferIndex,e.piece.start,l,f,c),this._lastChangeBufferPos=l,Df(this,e,t.length,g)}nodeAt(e){let t=this.root;const i=this._searchCache.get(e);if(i)return{node:i.node,nodeStartOffset:i.nodeStartOffset,remainder:e-i.nodeStartOffset};let n=0;for(;t!==Nt;)if(t.size_left>e)t=t.left;else if(t.size_left+t.piece.length>=e){n+=t.size_left;const s={node:t,remainder:e-t.size_left,nodeStartOffset:n};return this._searchCache.set(s),s}else e-=t.size_left+t.piece.length,n+=t.size_left+t.piece.length,t=t.right;return null}nodeAt2(e,t){let i=this.root,n=0;for(;i!==Nt;)if(i.left!==Nt&&i.lf_left>=e-1)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt>e-1){const s=this.getAccumulatedValue(i,e-i.lf_left-2),r=this.getAccumulatedValue(i,e-i.lf_left-1);return n+=i.size_left,{node:i,remainder:Math.min(s+t-1,r),nodeStartOffset:n}}else if(i.lf_left+i.piece.lineFeedCnt===e-1){const s=this.getAccumulatedValue(i,e-i.lf_left-2);if(s+t-1<=i.piece.length)return{node:i,remainder:s+t-1,nodeStartOffset:n};t-=i.piece.length-s;break}else e-=i.lf_left+i.piece.lineFeedCnt,n+=i.size_left+i.piece.length,i=i.right;for(i=i.next();i!==Nt;){if(i.piece.lineFeedCnt>0){const s=this.getAccumulatedValue(i,0),r=this.offsetOfNode(i);return{node:i,remainder:Math.min(t-1,s),nodeStartOffset:r}}else if(i.piece.length>=t-1){const s=this.offsetOfNode(i);return{node:i,remainder:t-1,nodeStartOffset:s}}else t-=i.piece.length;i=i.next()}return null}nodeCharCodeAt(e,t){if(e.piece.lineFeedCnt<1)return-1;const i=this._buffers[e.piece.bufferIndex],n=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start)+t;return i.buffer.charCodeAt(n)}offsetOfNode(e){if(!e)return 0;let t=e.size_left;for(;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}shouldCheckCRLF(){return!(this._EOLNormalized&&this._EOL===`
`)}startWithLF(e){if(typeof e=="string")return e.charCodeAt(0)===10;if(e===Nt||e.piece.lineFeedCnt===0)return!1;const t=e.piece,i=this._buffers[t.bufferIndex].lineStarts,n=t.start.line,s=i[n]+t.start.column;return n===i.length-1||i[n+1]>s+1?!1:this._buffers[t.bufferIndex].buffer.charCodeAt(s)===10}endWithCR(e){return typeof e=="string"?e.charCodeAt(e.length-1)===13:e===Nt||e.piece.lineFeedCnt===0?!1:this.nodeCharCodeAt(e,e.piece.length-1)===13}validateCRLFWithPrevNode(e){if(this.shouldCheckCRLF()&&this.startWithLF(e)){const t=e.prev();this.endWithCR(t)&&this.fixCRLF(t,e)}}validateCRLFWithNextNode(e){if(this.shouldCheckCRLF()&&this.endWithCR(e)){const t=e.next();this.startWithLF(t)&&this.fixCRLF(e,t)}}fixCRLF(e,t){const i=[],n=this._buffers[e.piece.bufferIndex].lineStarts;let s;e.piece.end.column===0?s={line:e.piece.end.line-1,column:n[e.piece.end.line]-n[e.piece.end.line-1]-1}:s={line:e.piece.end.line,column:e.piece.end.column-1};const r=e.piece.length-1,a=e.piece.lineFeedCnt-1;e.piece=new za(e.piece.bufferIndex,e.piece.start,s,a,r),Df(this,e,-1,-1),e.piece.length===0&&i.push(e);const l={line:t.piece.start.line+1,column:0},c=t.piece.length-1,u=this.getLineFeedCnt(t.piece.bufferIndex,l,t.piece.end);t.piece=new za(t.piece.bufferIndex,l,t.piece.end,u,c),Df(this,t,-1,-1),t.piece.length===0&&i.push(t);const f=this.createNewPieces(`\r
`);this.rbInsertRight(e,f[0]);for(let g=0;g<i.length;g++)wR(this,i[g])}adjustCarriageReturnFromNext(e,t){if(this.shouldCheckCRLF()&&this.endWithCR(e)){const i=t.next();if(this.startWithLF(i)){if(e+=`
`,i.piece.length===1)wR(this,i);else{const n=i.piece,s={line:n.start.line+1,column:0},r=n.length-1,a=this.getLineFeedCnt(n.bufferIndex,s,n.end);i.piece=new za(n.bufferIndex,s,n.end,a,r),Df(this,i,-1,-1)}return!0}}return!1}iterate(e,t){if(e===Nt)return t(Nt);const i=this.iterate(e.left,t);return i&&t(e)&&this.iterate(e.right,t)}getNodeContent(e){if(e===Nt)return"";const t=this._buffers[e.piece.bufferIndex],i=e.piece,n=this.offsetInBuffer(i.bufferIndex,i.start),s=this.offsetInBuffer(i.bufferIndex,i.end);return t.buffer.substring(n,s)}getPieceContent(e){const t=this._buffers[e.bufferIndex],i=this.offsetInBuffer(e.bufferIndex,e.start),n=this.offsetInBuffer(e.bufferIndex,e.end);return t.buffer.substring(i,n)}rbInsertRight(e,t){const i=new U6(t,1);if(i.left=Nt,i.right=Nt,i.parent=Nt,i.size_left=0,i.lf_left=0,this.root===Nt)this.root=i,i.color=0;else if(e.right===Nt)e.right=i,i.parent=e;else{const s=ZK(e.right);s.left=i,i.parent=s}return pse(this,i),i}rbInsertLeft(e,t){const i=new U6(t,1);if(i.left=Nt,i.right=Nt,i.parent=Nt,i.size_left=0,i.lf_left=0,this.root===Nt)this.root=i,i.color=0;else if(e.left===Nt)e.left=i,i.parent=e;else{const n=she(e.left);n.right=i,i.parent=n}return pse(this,i),i}}class k1 extends X{constructor(e,t,i,n,s,r,a){super(),this._onDidChangeContent=this._register(new Y),this._BOM=t,this._mightContainNonBasicASCII=!r,this._mightContainRTL=n,this._mightContainUnusualLineTerminators=s,this._pieceTree=new jFe(e,i,a)}mightContainRTL(){return this._mightContainRTL}mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators}resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=!1}mightContainNonBasicASCII(){return this._mightContainNonBasicASCII}getBOM(){return this._BOM}getEOL(){return this._pieceTree.getEOL()}createSnapshot(e){return this._pieceTree.createSnapshot(e?this._BOM:"")}getOffsetAt(e,t){return this._pieceTree.getOffsetAt(e,t)}getPositionAt(e){return this._pieceTree.getPositionAt(e)}getRangeAt(e,t){const i=e+t,n=this.getPositionAt(e),s=this.getPositionAt(i);return new M(n.lineNumber,n.column,s.lineNumber,s.column)}getValueInRange(e,t=0){if(e.isEmpty())return"";const i=this._getEndOfLine(t);return this._pieceTree.getValueInRange(e,i)}getValueLengthInRange(e,t=0){if(e.isEmpty())return 0;if(e.startLineNumber===e.endLineNumber)return e.endColumn-e.startColumn;const i=this.getOffsetAt(e.startLineNumber,e.startColumn),n=this.getOffsetAt(e.endLineNumber,e.endColumn);let s=0;const r=this._getEndOfLine(t),a=this.getEOL();if(r.length!==a.length){const l=r.length-a.length,c=e.endLineNumber-e.startLineNumber;s=l*c}return n-i+s}getCharacterCountInRange(e,t=0){if(this._mightContainNonBasicASCII){let i=0;const n=e.startLineNumber,s=e.endLineNumber;for(let r=n;r<=s;r++){const a=this.getLineContent(r),l=r===n?e.startColumn-1:0,c=r===s?e.endColumn-1:a.length;for(let u=l;u<c;u++)qs(a.charCodeAt(u))?(i=i+1,u=u+1):i=i+1}return i+=this._getEndOfLine(t).length*(s-n),i}return this.getValueLengthInRange(e,t)}getLength(){return this._pieceTree.getLength()}getLineCount(){return this._pieceTree.getLineCount()}getLinesContent(){return this._pieceTree.getLinesContent()}getLineContent(e){return this._pieceTree.getLineContent(e)}getLineCharCode(e,t){return this._pieceTree.getLineCharCode(e,t)}getLineLength(e){return this._pieceTree.getLineLength(e)}getLineFirstNonWhitespaceColumn(e){const t=Sr(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){const t=au(this.getLineContent(e));return t===-1?0:t+2}_getEndOfLine(e){switch(e){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(e){this._pieceTree.setEOL(e)}applyEdits(e,t,i){let n=this._mightContainRTL,s=this._mightContainUnusualLineTerminators,r=this._mightContainNonBasicASCII,a=!0,l=[];for(let b=0;b<e.length;b++){const y=e[b];a&&y._isTracked&&(a=!1);const S=y.range;if(y.text){let N=!0;r||(N=!ZE(y.text),r=N),!n&&N&&(n=eS(y.text)),!s&&N&&(s=Jle(y.text))}let L="",x=0,k=0,E=0;if(y.text){let N;[x,k,E,N]=Vm(y.text);const A=this.getEOL();N===0||N===(A===`\r
`?2:1)?L=y.text:L=y.text.replace(/\r\n|\r|\n/g,A)}l[b]={sortIndex:b,identifier:y.identifier||null,range:S,rangeOffset:this.getOffsetAt(S.startLineNumber,S.startColumn),rangeLength:this.getValueLengthInRange(S),text:L,eolCount:x,firstLineLength:k,lastLineLength:E,forceMoveMarkers:!!y.forceMoveMarkers,isAutoWhitespaceEdit:y.isAutoWhitespaceEdit||!1}}l.sort(k1._sortOpsAscending);let c=!1;for(let b=0,y=l.length-1;b<y;b++){const S=l[b].range.getEndPosition(),L=l[b+1].range.getStartPosition();if(L.isBeforeOrEqual(S)){if(L.isBefore(S))throw new Error("Overlapping ranges are not allowed!");c=!0}}a&&(l=this._reduceOperations(l));const u=i||t?k1._getInverseEditRanges(l):[],f=[];if(t)for(let b=0;b<l.length;b++){const y=l[b],S=u[b];if(y.isAutoWhitespaceEdit&&y.range.isEmpty())for(let L=S.startLineNumber;L<=S.endLineNumber;L++){let x="";L===S.startLineNumber&&(x=this.getLineContent(y.range.startLineNumber),Sr(x)!==-1)||f.push({lineNumber:L,oldContent:x})}}let g=null;if(i){let b=0;g=[];for(let y=0;y<l.length;y++){const S=l[y],L=u[y],x=this.getValueInRange(S.range),k=S.rangeOffset+b;b+=S.text.length-x.length,g[y]={sortIndex:S.sortIndex,identifier:S.identifier,range:L,text:x,textChange:new To(S.rangeOffset,x,k,S.text)}}c||g.sort((y,S)=>y.sortIndex-S.sortIndex)}this._mightContainRTL=n,this._mightContainUnusualLineTerminators=s,this._mightContainNonBasicASCII=r;const p=this._doApplyEdits(l);let _=null;if(t&&f.length>0){f.sort((b,y)=>y.lineNumber-b.lineNumber),_=[];for(let b=0,y=f.length;b<y;b++){const S=f[b].lineNumber;if(b>0&&f[b-1].lineNumber===S)continue;const L=f[b].oldContent,x=this.getLineContent(S);x.length===0||x===L||Sr(x)!==-1||_.push(S)}}return this._onDidChangeContent.fire(),new iTe(g,p,_)}_reduceOperations(e){return e.length<1e3?e:[this._toSingleEditOperation(e)]}_toSingleEditOperation(e){let t=!1;const i=e[0].range,n=e[e.length-1].range,s=new M(i.startLineNumber,i.startColumn,n.endLineNumber,n.endColumn);let r=i.startLineNumber,a=i.startColumn;const l=[];for(let p=0,_=e.length;p<_;p++){const b=e[p],y=b.range;t=t||b.forceMoveMarkers,l.push(this.getValueInRange(new M(r,a,y.startLineNumber,y.startColumn))),b.text.length>0&&l.push(b.text),r=y.endLineNumber,a=y.endColumn}const c=l.join(""),[u,f,g]=Vm(c);return{sortIndex:0,identifier:e[0].identifier,range:s,rangeOffset:this.getOffsetAt(s.startLineNumber,s.startColumn),rangeLength:this.getValueLengthInRange(s,0),text:c,eolCount:u,firstLineLength:f,lastLineLength:g,forceMoveMarkers:t,isAutoWhitespaceEdit:!1}}_doApplyEdits(e){e.sort(k1._sortOpsDescending);const t=[];for(let i=0;i<e.length;i++){const n=e[i],s=n.range.startLineNumber,r=n.range.startColumn,a=n.range.endLineNumber,l=n.range.endColumn;if(s===a&&r===l&&n.text.length===0)continue;n.text?(this._pieceTree.delete(n.rangeOffset,n.rangeLength),this._pieceTree.insert(n.rangeOffset,n.text,!0)):this._pieceTree.delete(n.rangeOffset,n.rangeLength);const c=new M(s,r,a,l);t.push({range:c,rangeLength:n.rangeLength,text:n.text,rangeOffset:n.rangeOffset,forceMoveMarkers:n.forceMoveMarkers})}return t}findMatchesLineByLine(e,t,i,n){return this._pieceTree.findMatchesLineByLine(e,t,i,n)}static _getInverseEditRanges(e){const t=[];let i=0,n=0,s=null;for(let r=0,a=e.length;r<a;r++){const l=e[r];let c,u;s?s.range.endLineNumber===l.range.startLineNumber?(c=i,u=n+(l.range.startColumn-s.range.endColumn)):(c=i+(l.range.startLineNumber-s.range.endLineNumber),u=l.range.startColumn):(c=l.range.startLineNumber,u=l.range.startColumn);let f;if(l.text.length>0){const g=l.eolCount+1;g===1?f=new M(c,u,c,u+l.firstLineLength):f=new M(c,u,c+g-1,l.lastLineLength+1)}else f=new M(c,u,c,u);i=f.endLineNumber,n=f.endColumn,t.push(f),s=l}return t}static _sortOpsAscending(e,t){const i=M.compareRangesUsingEnds(e.range,t.range);return i===0?e.sortIndex-t.sortIndex:i}static _sortOpsDescending(e,t){const i=M.compareRangesUsingEnds(e.range,t.range);return i===0?t.sortIndex-e.sortIndex:-i}}class qFe{constructor(e,t,i,n,s,r,a,l,c){this._chunks=e,this._bom=t,this._cr=i,this._lf=n,this._crlf=s,this._containsRTL=r,this._containsUnusualLineTerminators=a,this._isBasicASCII=l,this._normalizeEOL=c}_getEOL(e){const t=this._cr+this._lf+this._crlf,i=this._cr+this._crlf;return t===0?e===1?`
`:`\r
`:i>t/2?`\r
`:`
`}create(e){const t=this._getEOL(e),i=this._chunks;if(this._normalizeEOL&&(t===`\r
`&&(this._cr>0||this._lf>0)||t===`
`&&(this._cr>0||this._crlf>0)))for(let s=0,r=i.length;s<r;s++){const a=i[s].buffer.replace(/\r\n|\r|\n/g,t),l=If(a);i[s]=new Cv(a,l)}const n=new k1(i,this._bom,t,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:n,disposable:n}}}class rhe{constructor(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}acceptChunk(e){if(e.length===0)return;this.chunks.length===0&&Bq(e)&&(this.BOM=Uke,e=e.substr(1));const t=e.charCodeAt(e.length-1);t===13||t>=55296&&t<=56319?(this._acceptChunk1(e.substr(0,e.length-1),!1),this._hasPreviousChar=!0,this._previousChar=t):(this._acceptChunk1(e,!1),this._hasPreviousChar=!1,this._previousChar=t)}_acceptChunk1(e,t){!t&&e.length===0||(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+e):this._acceptChunk2(e))}_acceptChunk2(e){const t=zFe(this._tmpLineStarts,e);this.chunks.push(new Cv(e,t.lineStarts)),this.cr+=t.cr,this.lf+=t.lf,this.crlf+=t.crlf,t.isBasicASCII||(this.isBasicASCII=!1,this.containsRTL||(this.containsRTL=eS(e)),this.containsUnusualLineTerminators||(this.containsUnusualLineTerminators=Jle(e)))}finish(e=!0){return this._finish(),new qFe(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,e)}_finish(){if(this.chunks.length===0&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;const e=this.chunks[this.chunks.length-1];e.buffer+=String.fromCharCode(this._previousChar);const t=If(e.buffer);e.lineStarts=t,this._previousChar===13&&this.cr++}}}class KFe{constructor(e){this._default=e,this._store=[]}get(e){return e<this._store.length?this._store[e]:this._default}set(e,t){for(;e>=this._store.length;)this._store[this._store.length]=this._default;this._store[e]=t}replace(e,t,i){if(e>=this._store.length)return;if(t===0){this.insert(e,i);return}else if(i===0){this.delete(e,t);return}const n=this._store.slice(0,e),s=this._store.slice(e+t),r=GFe(i,this._default);this._store=n.concat(r,s)}delete(e,t){t===0||e>=this._store.length||this._store.splice(e,t)}insert(e,t){if(t===0||e>=this._store.length)return;const i=[];for(let n=0;n<t;n++)i[n]=this._default;this._store=BF(this._store,e,i)}}function GFe(o,e){const t=[];for(let i=0;i<o;i++)t[i]=e;return t}class YFe{get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._startLineNumber+this._tokens.length-1}constructor(e,t){this._startLineNumber=e,this._tokens=t}getLineTokens(e){return this._tokens[e-this._startLineNumber]}appendLineTokens(e){this._tokens.push(e)}}class $6{constructor(){this._tokens=[]}add(e,t){if(this._tokens.length>0){const i=this._tokens[this._tokens.length-1];if(i.endLineNumber+1===e){i.appendLineTokens(t);return}}this._tokens.push(new YFe(e,[t]))}finalize(){return this._tokens}}class ZFe{constructor(e,t){this.tokenizationSupport=t,this.initialState=this.tokenizationSupport.getInitialState(),this.store=new j6(e)}getStartState(e){return this.store.getStartState(e,this.initialState)}getFirstInvalidLine(){return this.store.getFirstInvalidLine(this.initialState)}}class XFe extends ZFe{constructor(e,t,i,n){super(e,t),this._textModel=i,this._languageIdCodec=n}updateTokensUntilLine(e,t){const i=this._textModel.getLanguageId();for(;;){const n=this.getFirstInvalidLine();if(!n||n.lineNumber>t)break;const s=this._textModel.getLineContent(n.lineNumber),r=_x(this._languageIdCodec,i,this.tokenizationSupport,s,!0,n.startState);e.add(n.lineNumber,r.tokens),this.store.setEndState(n.lineNumber,r.endState)}}getTokenTypeIfInsertingCharacter(e,t){const i=this.getStartState(e.lineNumber);if(!i)return 0;const n=this._textModel.getLanguageId(),s=this._textModel.getLineContent(e.lineNumber),r=s.substring(0,e.column-1)+t+s.substring(e.column-1),a=_x(this._languageIdCodec,n,this.tokenizationSupport,r,!0,i),l=new ho(a.tokens,r,this._languageIdCodec);if(l.getCount()===0)return 0;const c=l.findTokenIndexAtOffset(e.column-1);return l.getStandardTokenType(c)}tokenizeLineWithEdit(e,t,i){const n=e.lineNumber,s=e.column,r=this.getStartState(n);if(!r)return null;const a=this._textModel.getLineContent(n),l=a.substring(0,s-1)+i+a.substring(s-1+t),c=this._textModel.getLanguageIdAtPosition(n,0),u=_x(this._languageIdCodec,c,this.tokenizationSupport,l,!0,r);return new ho(u.tokens,l,this._languageIdCodec)}hasAccurateTokensForLine(e){const t=this.store.getFirstInvalidEndStateLineNumberOrMax();return e<t}isCheapToTokenize(e){const t=this.store.getFirstInvalidEndStateLineNumberOrMax();return e<t||e===t&&this._textModel.getLineLength(e)<2048}tokenizeHeuristically(e,t,i){if(i<=this.store.getFirstInvalidEndStateLineNumberOrMax())return{heuristicTokens:!1};if(t<=this.store.getFirstInvalidEndStateLineNumberOrMax())return this.updateTokensUntilLine(e,i),{heuristicTokens:!1};let n=this.guessStartState(t);const s=this._textModel.getLanguageId();for(let r=t;r<=i;r++){const a=this._textModel.getLineContent(r),l=_x(this._languageIdCodec,s,this.tokenizationSupport,a,!0,n);e.add(r,l.tokens),n=l.endState}return{heuristicTokens:!0}}guessStartState(e){let t=this._textModel.getLineFirstNonWhitespaceColumn(e);const i=[];let n=null;for(let a=e-1;t>1&&a>=1;a--){const l=this._textModel.getLineFirstNonWhitespaceColumn(a);if(l!==0&&l<t&&(i.push(this._textModel.getLineContent(a)),t=l,n=this.getStartState(a),n))break}n||(n=this.tokenizationSupport.getInitialState()),i.reverse();const s=this._textModel.getLanguageId();let r=n;for(const a of i)r=_x(this._languageIdCodec,s,this.tokenizationSupport,a,!1,r).endState;return r}}class j6{constructor(e){this.lineCount=e,this._tokenizationStateStore=new QFe,this._invalidEndStatesLineNumbers=new JFe,this._invalidEndStatesLineNumbers.addRange(new Vt(1,e+1))}getEndState(e){return this._tokenizationStateStore.getEndState(e)}setEndState(e,t){if(!t)throw new wi("Cannot set null/undefined state");this._invalidEndStatesLineNumbers.delete(e);const i=this._tokenizationStateStore.setEndState(e,t);return i&&e<this.lineCount&&this._invalidEndStatesLineNumbers.addRange(new Vt(e+1,e+2)),i}acceptChange(e,t){this.lineCount+=t-e.length,this._tokenizationStateStore.acceptChange(e,t),this._invalidEndStatesLineNumbers.addRangeAndResize(new Vt(e.startLineNumber,e.endLineNumberExclusive),t)}acceptChanges(e){for(const t of e){const[i]=Vm(t.text);this.acceptChange(new It(t.range.startLineNumber,t.range.endLineNumber+1),i+1)}}invalidateEndStateRange(e){this._invalidEndStatesLineNumbers.addRange(new Vt(e.startLineNumber,e.endLineNumberExclusive))}getFirstInvalidEndStateLineNumber(){return this._invalidEndStatesLineNumbers.min}getFirstInvalidEndStateLineNumberOrMax(){return this.getFirstInvalidEndStateLineNumber()||Number.MAX_SAFE_INTEGER}allStatesValid(){return this._invalidEndStatesLineNumbers.min===null}getStartState(e,t){return e===1?t:this.getEndState(e-1)}getFirstInvalidLine(e){const t=this.getFirstInvalidEndStateLineNumber();if(t===null)return null;const i=this.getStartState(t,e);if(!i)throw new wi("Start state must be defined");return{lineNumber:t,startState:i}}}class QFe{constructor(){this._lineEndStates=new KFe(null)}getEndState(e){return this._lineEndStates.get(e)}setEndState(e,t){const i=this._lineEndStates.get(e);return i&&i.equals(t)?!1:(this._lineEndStates.set(e,t),!0)}acceptChange(e,t){let i=e.length;t>0&&i>0&&(i--,t--),this._lineEndStates.replace(e.startLineNumber,i,t)}}class JFe{constructor(){this._ranges=[]}get min(){return this._ranges.length===0?null:this._ranges[0].start}delete(e){const t=this._ranges.findIndex(i=>i.contains(e));if(t!==-1){const i=this._ranges[t];i.start===e?i.endExclusive===e+1?this._ranges.splice(t,1):this._ranges[t]=new Vt(e+1,i.endExclusive):i.endExclusive===e+1?this._ranges[t]=new Vt(i.start,e):this._ranges.splice(t,1,new Vt(i.start,e),new Vt(e+1,i.endExclusive))}}addRange(e){Vt.addRange(e,this._ranges)}addRangeAndResize(e,t){let i=0;for(;!(i>=this._ranges.length||e.start<=this._ranges[i].endExclusive);)i++;let n=i;for(;!(n>=this._ranges.length||e.endExclusive<this._ranges[n].start);)n++;const s=t-e.length;for(let r=n;r<this._ranges.length;r++)this._ranges[r]=this._ranges[r].delta(s);if(i===n){const r=new Vt(e.start,e.start+t);r.isEmpty||this._ranges.splice(i,0,r)}else{const r=Math.min(e.start,this._ranges[i].start),a=Math.max(e.endExclusive,this._ranges[n-1].endExclusive),l=new Vt(r,a+s);l.isEmpty?this._ranges.splice(i,n-i):this._ranges.splice(i,n-i,l)}}toString(){return this._ranges.map(e=>e.toString()).join(" + ")}}function _x(o,e,t,i,n,s){let r=null;if(t)try{r=t.tokenizeEncoded(i,n,s.clone())}catch(a){wt(a)}return r||(r=x4(o.encodeLanguageId(e),s)),ho.convertToEndOffset(r.tokens,i.length),r}class e4e{constructor(e,t){this._tokenizerWithStateStore=e,this._backgroundTokenStore=t,this._isDisposed=!1,this._isScheduled=!1}dispose(){this._isDisposed=!0}handleChanges(){this._beginBackgroundTokenization()}_beginBackgroundTokenization(){this._isScheduled||!this._tokenizerWithStateStore._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._isScheduled=!0,rce(e=>{this._isScheduled=!1,this._backgroundTokenizeWithDeadline(e)}))}_backgroundTokenizeWithDeadline(e){const t=Date.now()+e.timeRemaining(),i=()=>{this._isDisposed||!this._tokenizerWithStateStore._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._backgroundTokenizeForAtLeast1ms(),Date.now()<t?xle(i):this._beginBackgroundTokenization())};i()}_backgroundTokenizeForAtLeast1ms(){const e=this._tokenizerWithStateStore._textModel.getLineCount(),t=new $6,i=uo.create(!1);do if(i.elapsed()>1||this._tokenizeOneInvalidLine(t)>=e)break;while(this._hasLinesToTokenize());this._backgroundTokenStore.setTokens(t.finalize()),this.checkFinished()}_hasLinesToTokenize(){return this._tokenizerWithStateStore?!this._tokenizerWithStateStore.store.allStatesValid():!1}_tokenizeOneInvalidLine(e){var i;const t=(i=this._tokenizerWithStateStore)==null?void 0:i.getFirstInvalidLine();return t?(this._tokenizerWithStateStore.updateTokensUntilLine(e,t.lineNumber),t.lineNumber):this._tokenizerWithStateStore._textModel.getLineCount()+1}checkFinished(){this._isDisposed||this._tokenizerWithStateStore.store.allStatesValid()&&this._backgroundTokenStore.backgroundTokenizationFinished()}requestTokens(e,t){this._tokenizerWithStateStore.store.invalidateEndStateRange(new It(e,t))}}class t4e{constructor(){this._onDidChangeVisibleRanges=new Y,this.onDidChangeVisibleRanges=this._onDidChangeVisibleRanges.event,this._views=new Set}attachView(){const e=new i4e(t=>{this._onDidChangeVisibleRanges.fire({view:e,state:t})});return this._views.add(e),e}detachView(e){this._views.delete(e),this._onDidChangeVisibleRanges.fire({view:e,state:void 0})}}class i4e{constructor(e){this.handleStateChange=e}setVisibleLines(e,t){const i=e.map(n=>new It(n.startLineNumber,n.endLineNumber+1));this.handleStateChange({visibleLineRanges:i,stabilized:t})}}class n4e extends X{get lineRanges(){return this._lineRanges}constructor(e){super(),this._refreshTokens=e,this.runner=this._register(new Oi(()=>this.update(),50)),this._computedLineRanges=[],this._lineRanges=[]}update(){En(this._computedLineRanges,this._lineRanges,(e,t)=>e.equals(t))||(this._computedLineRanges=this._lineRanges,this._refreshTokens())}handleStateChange(e){this._lineRanges=e.visibleLineRanges,e.stabilized?(this.runner.cancel(),this.update()):this.runner.schedule()}}class ahe extends X{get backgroundTokenizationState(){return this._backgroundTokenizationState}constructor(e,t,i){super(),this._languageIdCodec=e,this._textModel=t,this.getLanguageId=i,this._backgroundTokenizationState=1,this._onDidChangeBackgroundTokenizationState=this._register(new Y),this.onDidChangeBackgroundTokenizationState=this._onDidChangeBackgroundTokenizationState.event,this._onDidChangeTokens=this._register(new Y),this.onDidChangeTokens=this._onDidChangeTokens.event}tokenizeIfCheap(e){this.isCheapToTokenize(e)&&this.forceTokenization(e)}}class mse extends ahe{constructor(e,t,i,n){super(t,i,n),this._treeSitterService=e,this._tokenizationSupport=null,this._initialize()}_initialize(){const e=this.getLanguageId();(!this._tokenizationSupport||this._lastLanguageId!==e)&&(this._lastLanguageId=e,this._tokenizationSupport=r8.get(e))}getLineTokens(e){const t=this._textModel.getLineContent(e);if(this._tokenizationSupport){const i=this._tokenizationSupport.tokenizeEncoded(e,this._textModel);if(i)return new ho(i,t,this._languageIdCodec)}return ho.createEmpty(t,this._languageIdCodec)}resetTokenization(e=!0){e&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]}),this._initialize()}handleDidChangeAttached(){}handleDidChangeContent(e){e.isFlush&&this.resetTokenization(!1)}forceTokenization(e){}hasAccurateTokensForLine(e){return!0}isCheapToTokenize(e){return!0}getTokenTypeIfInsertingCharacter(e,t,i){return 0}tokenizeLineWithEdit(e,t,i){return null}get hasTokens(){return this._treeSitterService.getParseResult(this._textModel)!==void 0}}const lhe=Gt("treeSitterParserService"),Tf=new Uint32Array(0).buffer;class ch{static deleteBeginning(e,t){return e===null||e===Tf?e:ch.delete(e,0,t)}static deleteEnding(e,t){if(e===null||e===Tf)return e;const i=Yf(e),n=i[i.length-2];return ch.delete(e,t,n)}static delete(e,t,i){if(e===null||e===Tf||t===i)return e;const n=Yf(e),s=n.length>>>1;if(t===0&&n[n.length-2]===i)return Tf;const r=ho.findIndexInTokensArray(n,t),a=r>0?n[r-1<<1]:0,l=n[r<<1];if(i<l){const p=i-t;for(let _=r;_<s;_++)n[_<<1]-=p;return e}let c,u;a!==t?(n[r<<1]=t,c=r+1<<1,u=t):(c=r<<1,u=a);const f=i-t;for(let p=r+1;p<s;p++){const _=n[p<<1]-f;_>u&&(n[c++]=_,n[c++]=n[(p<<1)+1],u=_)}if(c===n.length)return e;const g=new Uint32Array(c);return g.set(n.subarray(0,c),0),g.buffer}static append(e,t){if(t===Tf)return e;if(e===Tf)return t;if(e===null)return e;if(t===null)return null;const i=Yf(e),n=Yf(t),s=n.length>>>1,r=new Uint32Array(i.length+n.length);r.set(i,0);let a=i.length;const l=i[i.length-2];for(let c=0;c<s;c++)r[a++]=n[c<<1]+l,r[a++]=n[(c<<1)+1];return r.buffer}static insert(e,t,i){if(e===null||e===Tf)return e;const n=Yf(e),s=n.length>>>1;let r=ho.findIndexInTokensArray(n,t);r>0&&n[r-1<<1]===t&&r--;for(let a=r;a<s;a++)n[a<<1]+=i;return e}}function Yf(o){return o instanceof Uint32Array?o:new Uint32Array(o)}class $D{constructor(e){this._lineTokens=[],this._len=0,this._languageIdCodec=e}flush(){this._lineTokens=[],this._len=0}get hasTokens(){return this._lineTokens.length>0}getTokens(e,t,i){let n=null;if(t<this._len&&(n=this._lineTokens[t]),n!==null&&n!==Tf)return new ho(Yf(n),i,this._languageIdCodec);const s=new Uint32Array(2);return s[0]=i.length,s[1]=_se(this._languageIdCodec.encodeLanguageId(e)),new ho(s,i,this._languageIdCodec)}static _massageTokens(e,t,i){const n=i?Yf(i):null;if(t===0){let s=!1;if(n&&n.length>1&&(s=wa.getLanguageId(n[1])!==e),!s)return Tf}if(!n||n.length===0){const s=new Uint32Array(2);return s[0]=t,s[1]=_se(e),s.buffer}return n[n.length-2]=t,n.byteOffset===0&&n.byteLength===n.buffer.byteLength?n.buffer:n}_ensureLine(e){for(;e>=this._len;)this._lineTokens[this._len]=null,this._len++}_deleteLines(e,t){t!==0&&(e+t>this._len&&(t=this._len-e),this._lineTokens.splice(e,t),this._len-=t)}_insertLines(e,t){if(t===0)return;const i=[];for(let n=0;n<t;n++)i[n]=null;this._lineTokens=BF(this._lineTokens,e,i),this._len+=t}setTokens(e,t,i,n,s){const r=$D._massageTokens(this._languageIdCodec.encodeLanguageId(e),i,n);this._ensureLine(t);const a=this._lineTokens[t];return this._lineTokens[t]=r,s?!$D._equals(a,r):!1}static _equals(e,t){if(!e||!t)return!e&&!t;const i=Yf(e),n=Yf(t);if(i.length!==n.length)return!1;for(let s=0,r=i.length;s<r;s++)if(i[s]!==n[s])return!1;return!0}acceptEdit(e,t,i){this._acceptDeleteRange(e),this._acceptInsertText(new G(e.startLineNumber,e.startColumn),t,i)}_acceptDeleteRange(e){const t=e.startLineNumber-1;if(t>=this._len)return;if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._lineTokens[t]=ch.delete(this._lineTokens[t],e.startColumn-1,e.endColumn-1);return}this._lineTokens[t]=ch.deleteEnding(this._lineTokens[t],e.startColumn-1);const i=e.endLineNumber-1;let n=null;i<this._len&&(n=ch.deleteBeginning(this._lineTokens[i],e.endColumn-1)),this._lineTokens[t]=ch.append(this._lineTokens[t],n),this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t,i){if(t===0&&i===0)return;const n=e.lineNumber-1;if(!(n>=this._len)){if(t===0){this._lineTokens[n]=ch.insert(this._lineTokens[n],e.column-1,i);return}this._lineTokens[n]=ch.deleteEnding(this._lineTokens[n],e.column-1),this._lineTokens[n]=ch.insert(this._lineTokens[n],e.column-1,i),this._insertLines(e.lineNumber,t)}}setMultilineTokens(e,t){if(e.length===0)return{changes:[]};const i=[];for(let n=0,s=e.length;n<s;n++){const r=e[n];let a=0,l=0,c=!1;for(let u=r.startLineNumber;u<=r.endLineNumber;u++)c?(this.setTokens(t.getLanguageId(),u-1,t.getLineLength(u),r.getLineTokens(u),!1),l=u):this.setTokens(t.getLanguageId(),u-1,t.getLineLength(u),r.getLineTokens(u),!0)&&(c=!0,a=u,l=u);c&&i.push({fromLineNumber:a,toLineNumber:l})}return{changes:i}}}function _se(o){return(o<<0|0|0|32768|2<<24|1024)>>>0}class JK{constructor(e){this._pieces=[],this._isComplete=!1,this._languageIdCodec=e}flush(){this._pieces=[],this._isComplete=!1}isEmpty(){return this._pieces.length===0}set(e,t){this._pieces=e||[],this._isComplete=t}setPartial(e,t){let i=e;if(t.length>0){const s=t[0].getRange(),r=t[t.length-1].getRange();if(!s||!r)return e;i=e.plusRange(s).plusRange(r)}let n=null;for(let s=0,r=this._pieces.length;s<r;s++){const a=this._pieces[s];if(a.endLineNumber<i.startLineNumber)continue;if(a.startLineNumber>i.endLineNumber){n=n||{index:s};break}if(a.removeTokens(i),a.isEmpty()){this._pieces.splice(s,1),s--,r--;continue}if(a.endLineNumber<i.startLineNumber)continue;if(a.startLineNumber>i.endLineNumber){n=n||{index:s};continue}const[l,c]=a.split(i);if(l.isEmpty()){n=n||{index:s};continue}c.isEmpty()||(this._pieces.splice(s,1,l,c),s++,r++,n=n||{index:s})}return n=n||{index:this._pieces.length},t.length>0&&(this._pieces=BF(this._pieces,n.index,t)),i}isComplete(){return this._isComplete}addSparseTokens(e,t){if(t.getLineContent().length===0)return t;const i=this._pieces;if(i.length===0)return t;const n=JK._findFirstPieceWithLine(i,e),s=i[n].getLineTokens(e);if(!s)return t;const r=t.getCount(),a=s.getCount();let l=0;const c=[];let u=0,f=0;const g=(p,_)=>{p!==f&&(f=p,c[u++]=p,c[u++]=_)};for(let p=0;p<a;p++){const _=s.getStartCharacter(p),b=s.getEndCharacter(p),y=s.getMetadata(p),S=((y&1?2048:0)|(y&2?4096:0)|(y&4?8192:0)|(y&8?16384:0)|(y&16?16744448:0)|(y&32?4278190080:0))>>>0,L=~S>>>0;for(;l<r&&t.getEndOffset(l)<=_;)g(t.getEndOffset(l),t.getMetadata(l)),l++;for(l<r&&t.getStartOffset(l)<_&&g(_,t.getMetadata(l));l<r&&t.getEndOffset(l)<b;)g(t.getEndOffset(l),t.getMetadata(l)&L|y&S),l++;if(l<r)g(b,t.getMetadata(l)&L|y&S),t.getEndOffset(l)===b&&l++;else{const x=Math.min(Math.max(0,l-1),r-1);g(b,t.getMetadata(x)&L|y&S)}}for(;l<r;)g(t.getEndOffset(l),t.getMetadata(l)),l++;return new ho(new Uint32Array(c),t.getLineContent(),this._languageIdCodec)}static _findFirstPieceWithLine(e,t){let i=0,n=e.length-1;for(;i<n;){let s=i+Math.floor((n-i)/2);if(e[s].endLineNumber<t)i=s+1;else if(e[s].startLineNumber>t)n=s-1;else{for(;s>i&&e[s-1].startLineNumber<=t&&t<=e[s-1].endLineNumber;)s--;return s}}return i}acceptEdit(e,t,i,n,s){for(const r of this._pieces)r.acceptEdit(e,t,i,n,s)}}var s4e=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},R7=function(o,e){return function(t,i){e(t,i,o)}},kM;let q6=kM=class extends Que{constructor(e,t,i,n,s,r,a){super(),this._textModel=e,this._bracketPairsTextModelPart=t,this._languageId=i,this._attachedViews=n,this._languageService=s,this._languageConfigurationService=r,this._treeSitterService=a,this._semanticTokens=new JK(this._languageService.languageIdCodec),this._onDidChangeLanguage=this._register(new Y),this.onDidChangeLanguage=this._onDidChangeLanguage.event,this._onDidChangeLanguageConfiguration=this._register(new Y),this.onDidChangeLanguageConfiguration=this._onDidChangeLanguageConfiguration.event,this._onDidChangeTokens=this._register(new Y),this.onDidChangeTokens=this._onDidChangeTokens.event,this._tokensDisposables=this._register(new le),this._register(this._languageConfigurationService.onDidChange(l=>{l.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})})),this._register(Ee.filter(r8.onDidChange,l=>l.changedLanguages.includes(this._languageId))(()=>{this.createPreferredTokenProvider()})),this.createPreferredTokenProvider()}createGrammarTokens(){return this._register(new vse(this._languageService.languageIdCodec,this._textModel,()=>this._languageId,this._attachedViews))}createTreeSitterTokens(){return this._register(new mse(this._treeSitterService,this._languageService.languageIdCodec,this._textModel,()=>this._languageId))}createTokens(e){var i;const t=this._tokens!==void 0;(i=this._tokens)==null||i.dispose(),this._tokens=e?this.createTreeSitterTokens():this.createGrammarTokens(),this._tokensDisposables.clear(),this._tokensDisposables.add(this._tokens.onDidChangeTokens(n=>{this._emitModelTokensChangedEvent(n)})),this._tokensDisposables.add(this._tokens.onDidChangeBackgroundTokenizationState(n=>{this._bracketPairsTextModelPart.handleDidChangeBackgroundTokenizationState()})),t&&this._tokens.resetTokenization()}createPreferredTokenProvider(){r8.get(this._languageId)?this._tokens instanceof mse||this.createTokens(!0):this._tokens instanceof vse||this.createTokens(!1)}handleLanguageConfigurationServiceChange(e){e.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})}handleDidChangeContent(e){if(e.isFlush)this._semanticTokens.flush();else if(!e.isEolChange)for(const t of e.changes){const[i,n,s]=Vm(t.text);this._semanticTokens.acceptEdit(t.range,i,n,s,t.text.length>0?t.text.charCodeAt(0):0)}this._tokens.handleDidChangeContent(e)}handleDidChangeAttached(){this._tokens.handleDidChangeAttached()}getLineTokens(e){this.validateLineNumber(e);const t=this._tokens.getLineTokens(e);return this._semanticTokens.addSparseTokens(e,t)}_emitModelTokensChangedEvent(e){this._textModel._isDisposing()||(this._bracketPairsTextModelPart.handleDidChangeTokens(e),this._onDidChangeTokens.fire(e))}validateLineNumber(e){if(e<1||e>this._textModel.getLineCount())throw new wi("Illegal value for lineNumber")}get hasTokens(){return this._tokens.hasTokens}resetTokenization(){this._tokens.resetTokenization()}get backgroundTokenizationState(){return this._tokens.backgroundTokenizationState}forceTokenization(e){this.validateLineNumber(e),this._tokens.forceTokenization(e)}hasAccurateTokensForLine(e){return this.validateLineNumber(e),this._tokens.hasAccurateTokensForLine(e)}isCheapToTokenize(e){return this.validateLineNumber(e),this._tokens.isCheapToTokenize(e)}tokenizeIfCheap(e){this.validateLineNumber(e),this._tokens.tokenizeIfCheap(e)}getTokenTypeIfInsertingCharacter(e,t,i){return this._tokens.getTokenTypeIfInsertingCharacter(e,t,i)}tokenizeLineWithEdit(e,t,i){return this._tokens.tokenizeLineWithEdit(e,t,i)}setSemanticTokens(e,t){this._semanticTokens.set(e,t),this._emitModelTokensChangedEvent({semanticTokensApplied:e!==null,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]})}hasCompleteSemanticTokens(){return this._semanticTokens.isComplete()}hasSomeSemanticTokens(){return!this._semanticTokens.isEmpty()}setPartialSemanticTokens(e,t){if(this.hasCompleteSemanticTokens())return;const i=this._textModel.validateRange(this._semanticTokens.setPartial(e,t));this._emitModelTokensChangedEvent({semanticTokensApplied:!0,ranges:[{fromLineNumber:i.startLineNumber,toLineNumber:i.endLineNumber}]})}getWordAtPosition(e){this.assertNotDisposed();const t=this._textModel.validatePosition(e),i=this._textModel.getLineContent(t.lineNumber),n=this.getLineTokens(t.lineNumber),s=n.findTokenIndexAtOffset(t.column-1),[r,a]=kM._findLanguageBoundaries(n,s),l=lD(t.column,this.getLanguageConfiguration(n.getLanguageId(s)).getWordDefinition(),i.substring(r,a),r);if(l&&l.startColumn<=e.column&&e.column<=l.endColumn)return l;if(s>0&&r===t.column-1){const[c,u]=kM._findLanguageBoundaries(n,s-1),f=lD(t.column,this.getLanguageConfiguration(n.getLanguageId(s-1)).getWordDefinition(),i.substring(c,u),c);if(f&&f.startColumn<=e.column&&e.column<=f.endColumn)return f}return null}getLanguageConfiguration(e){return this._languageConfigurationService.getLanguageConfiguration(e)}static _findLanguageBoundaries(e,t){const i=e.getLanguageId(t);let n=0;for(let r=t;r>=0&&e.getLanguageId(r)===i;r--)n=e.getStartOffset(r);let s=e.getLineContent().length;for(let r=t,a=e.getCount();r<a&&e.getLanguageId(r)===i;r++)s=e.getEndOffset(r);return[n,s]}getWordUntilPosition(e){const t=this.getWordAtPosition(e);return t?{word:t.word.substr(0,e.column-t.startColumn),startColumn:t.startColumn,endColumn:e.column}:{word:"",startColumn:e.column,endColumn:e.column}}getLanguageId(){return this._languageId}getLanguageIdAtPosition(e,t){const i=this._textModel.validatePosition(new G(e,t)),n=this.getLineTokens(i.lineNumber);return n.getLanguageId(n.findTokenIndexAtOffset(i.column-1))}setLanguageId(e,t="api"){if(this._languageId===e)return;const i={oldLanguage:this._languageId,newLanguage:e,source:t};this._languageId=e,this._bracketPairsTextModelPart.handleDidChangeLanguage(i),this._tokens.resetTokenization(),this.createPreferredTokenProvider(),this._onDidChangeLanguage.fire(i),this._onDidChangeLanguageConfiguration.fire({})}};q6=kM=s4e([R7(4,In),R7(5,On),R7(6,lhe)],q6);class vse extends ahe{constructor(e,t,i,n){super(e,t,i),this._tokenizer=null,this._defaultBackgroundTokenizer=null,this._backgroundTokenizer=this._register(new Xs),this._tokens=new $D(this._languageIdCodec),this._debugBackgroundTokenizer=this._register(new Xs),this._attachedViewStates=this._register(new Dq),this._register(Kn.onDidChange(s=>{const r=this.getLanguageId();s.changedLanguages.indexOf(r)!==-1&&this.resetTokenization()})),this.resetTokenization(),this._register(n.onDidChangeVisibleRanges(({view:s,state:r})=>{if(r){let a=this._attachedViewStates.get(s);a||(a=new n4e(()=>this.refreshRanges(a.lineRanges)),this._attachedViewStates.set(s,a)),a.handleStateChange(r)}else this._attachedViewStates.deleteAndDispose(s)}))}resetTokenization(e=!0){var s;this._tokens.flush(),(s=this._debugBackgroundTokens)==null||s.flush(),this._debugBackgroundStates&&(this._debugBackgroundStates=new j6(this._textModel.getLineCount())),e&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]});const t=()=>{if(this._textModel.isTooLargeForTokenization())return[null,null];const r=Kn.get(this.getLanguageId());if(!r)return[null,null];let a;try{a=r.getInitialState()}catch(l){return wt(l),[null,null]}return[r,a]},[i,n]=t();if(i&&n?this._tokenizer=new XFe(this._textModel.getLineCount(),i,this._textModel,this._languageIdCodec):this._tokenizer=null,this._backgroundTokenizer.clear(),this._defaultBackgroundTokenizer=null,this._tokenizer){const r={setTokens:a=>{this.setTokens(a)},backgroundTokenizationFinished:()=>{if(this._backgroundTokenizationState===2)return;const a=2;this._backgroundTokenizationState=a,this._onDidChangeBackgroundTokenizationState.fire()},setEndState:(a,l)=>{var u;if(!this._tokenizer)return;const c=this._tokenizer.store.getFirstInvalidEndStateLineNumber();c!==null&&a>=c&&((u=this._tokenizer)==null||u.store.setEndState(a,l))}};i&&i.createBackgroundTokenizer&&!i.backgroundTokenizerShouldOnlyVerifyTokens&&(this._backgroundTokenizer.value=i.createBackgroundTokenizer(this._textModel,r)),!this._backgroundTokenizer.value&&!this._textModel.isTooLargeForTokenization()&&(this._backgroundTokenizer.value=this._defaultBackgroundTokenizer=new e4e(this._tokenizer,r),this._defaultBackgroundTokenizer.handleChanges()),i!=null&&i.backgroundTokenizerShouldOnlyVerifyTokens&&i.createBackgroundTokenizer?(this._debugBackgroundTokens=new $D(this._languageIdCodec),this._debugBackgroundStates=new j6(this._textModel.getLineCount()),this._debugBackgroundTokenizer.clear(),this._debugBackgroundTokenizer.value=i.createBackgroundTokenizer(this._textModel,{setTokens:a=>{var l;(l=this._debugBackgroundTokens)==null||l.setMultilineTokens(a,this._textModel)},backgroundTokenizationFinished(){},setEndState:(a,l)=>{var c;(c=this._debugBackgroundStates)==null||c.setEndState(a,l)}})):(this._debugBackgroundTokens=void 0,this._debugBackgroundStates=void 0,this._debugBackgroundTokenizer.value=void 0)}this.refreshAllVisibleLineTokens()}handleDidChangeAttached(){var e;(e=this._defaultBackgroundTokenizer)==null||e.handleChanges()}handleDidChangeContent(e){var t,i,n;if(e.isFlush)this.resetTokenization(!1);else if(!e.isEolChange){for(const s of e.changes){const[r,a]=Vm(s.text);this._tokens.acceptEdit(s.range,r,a),(t=this._debugBackgroundTokens)==null||t.acceptEdit(s.range,r,a)}(i=this._debugBackgroundStates)==null||i.acceptChanges(e.changes),this._tokenizer&&this._tokenizer.store.acceptChanges(e.changes),(n=this._defaultBackgroundTokenizer)==null||n.handleChanges()}}setTokens(e){const{changes:t}=this._tokens.setMultilineTokens(e,this._textModel);return t.length>0&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:t}),{changes:t}}refreshAllVisibleLineTokens(){const e=It.joinMany([...this._attachedViewStates].map(([t,i])=>i.lineRanges));this.refreshRanges(e)}refreshRanges(e){for(const t of e)this.refreshRange(t.startLineNumber,t.endLineNumberExclusive-1)}refreshRange(e,t){var r,a;if(!this._tokenizer)return;e=Math.max(1,Math.min(this._textModel.getLineCount(),e)),t=Math.min(this._textModel.getLineCount(),t);const i=new $6,{heuristicTokens:n}=this._tokenizer.tokenizeHeuristically(i,e,t),s=this.setTokens(i.finalize());if(n)for(const l of s.changes)(r=this._backgroundTokenizer.value)==null||r.requestTokens(l.fromLineNumber,l.toLineNumber+1);(a=this._defaultBackgroundTokenizer)==null||a.checkFinished()}forceTokenization(e){var i,n;const t=new $6;(i=this._tokenizer)==null||i.updateTokensUntilLine(t,e),this.setTokens(t.finalize()),(n=this._defaultBackgroundTokenizer)==null||n.checkFinished()}hasAccurateTokensForLine(e){return this._tokenizer?this._tokenizer.hasAccurateTokensForLine(e):!0}isCheapToTokenize(e){return this._tokenizer?this._tokenizer.isCheapToTokenize(e):!0}getLineTokens(e){var n;const t=this._textModel.getLineContent(e),i=this._tokens.getTokens(this._textModel.getLanguageId(),e-1,t);if(this._debugBackgroundTokens&&this._debugBackgroundStates&&this._tokenizer&&this._debugBackgroundStates.getFirstInvalidEndStateLineNumberOrMax()>e&&this._tokenizer.store.getFirstInvalidEndStateLineNumberOrMax()>e){const s=this._debugBackgroundTokens.getTokens(this._textModel.getLanguageId(),e-1,t);!i.equals(s)&&((n=this._debugBackgroundTokenizer.value)!=null&&n.reportMismatchingTokens)&&this._debugBackgroundTokenizer.value.reportMismatchingTokens(e)}return i}getTokenTypeIfInsertingCharacter(e,t,i){if(!this._tokenizer)return 0;const n=this._textModel.validatePosition(new G(e,t));return this.forceTokenization(n.lineNumber),this._tokenizer.getTokenTypeIfInsertingCharacter(n,i)}tokenizeLineWithEdit(e,t,i){if(!this._tokenizer)return null;const n=this._textModel.validatePosition(e);return this.forceTokenization(n.lineNumber),this._tokenizer.tokenizeLineWithEdit(n,t,i)}get hasTokens(){return this._tokens.hasTokens}}class o4e{constructor(){this.changeType=1}}class mu{static applyInjectedText(e,t){if(!t||t.length===0)return e;let i="",n=0;for(const s of t)i+=e.substring(n,s.column-1),n=s.column-1,i+=s.options.content;return i+=e.substring(n),i}static fromDecorations(e){const t=[];for(const i of e)i.options.before&&i.options.before.content.length>0&&t.push(new mu(i.ownerId,i.range.startLineNumber,i.range.startColumn,i.options.before,0)),i.options.after&&i.options.after.content.length>0&&t.push(new mu(i.ownerId,i.range.endLineNumber,i.range.endColumn,i.options.after,1));return t.sort((i,n)=>i.lineNumber===n.lineNumber?i.column===n.column?i.order-n.order:i.column-n.column:i.lineNumber-n.lineNumber),t}constructor(e,t,i,n,s){this.ownerId=e,this.lineNumber=t,this.column=i,this.options=n,this.order=s}}class bse{constructor(e,t,i){this.changeType=2,this.lineNumber=e,this.detail=t,this.injectedText=i}}class r4e{constructor(e,t){this.changeType=3,this.fromLineNumber=e,this.toLineNumber=t}}class a4e{constructor(e,t,i,n){this.changeType=4,this.injectedTexts=n,this.fromLineNumber=e,this.toLineNumber=t,this.detail=i}}class l4e{constructor(){this.changeType=5}}class D1{constructor(e,t,i,n){this.changes=e,this.versionId=t,this.isUndoing=i,this.isRedoing=n,this.resultingSelection=null}containsEvent(e){for(let t=0,i=this.changes.length;t<i;t++)if(this.changes[t].changeType===e)return!0;return!1}static merge(e,t){const i=[].concat(e.changes).concat(t.changes),n=t.versionId,s=e.isUndoing||t.isUndoing,r=e.isRedoing||t.isRedoing;return new D1(i,n,s,r)}}class che{constructor(e){this.changes=e}}class eb{constructor(e,t){this.rawContentChangedEvent=e,this.contentChangedEvent=t}merge(e){const t=D1.merge(this.rawContentChangedEvent,e.rawContentChangedEvent),i=eb._mergeChangeEvents(this.contentChangedEvent,e.contentChangedEvent);return new eb(t,i)}static _mergeChangeEvents(e,t){const i=[].concat(e.changes).concat(t.changes),n=t.eol,s=t.versionId,r=e.isUndoing||t.isUndoing,a=e.isRedoing||t.isRedoing,l=e.isFlush||t.isFlush,c=e.isEolChange&&t.isEolChange;return{changes:i,eol:n,isEolChange:c,versionId:s,isUndoing:r,isRedoing:a,isFlush:l}}}var c4e=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},SR=function(o,e){return function(t,i){e(t,i,o)}},ov;function d4e(o){const e=new rhe;return e.acceptChunk(o),e.finish()}function u4e(o){const e=new rhe;let t;for(;typeof(t=o.read())=="string";)e.acceptChunk(t);return e.finish()}function Cse(o,e){let t;return typeof o=="string"?t=d4e(o):eTe(o)?t=u4e(o):t=o,t.create(e)}let LR=0;const h4e=999,f4e=1e4;class g4e{constructor(e){this._source=e,this._eos=!1}read(){if(this._eos)return null;const e=[];let t=0,i=0;do{const n=this._source.read();if(n===null)return this._eos=!0,t===0?null:e.join("");if(n.length>0&&(e[t++]=n,i+=n.length),i>=64*1024)return e.join("")}while(!0)}}const vx=()=>{throw new Error("Invalid change accessor")};var Xd;let nu=(Xd=class extends X{static resolveOptions(e,t){if(t.detectIndentation){const i=lse(e,t.tabSize,t.insertSpaces);return new mM({tabSize:i.tabSize,indentSize:"tabSize",insertSpaces:i.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL,bracketPairColorizationOptions:t.bracketPairColorizationOptions})}return new mM(t)}get onDidChangeLanguage(){return this._tokenizationTextModelPart.onDidChangeLanguage}get onDidChangeLanguageConfiguration(){return this._tokenizationTextModelPart.onDidChangeLanguageConfiguration}get onDidChangeTokens(){return this._tokenizationTextModelPart.onDidChangeTokens}onDidChangeContent(e){return this._eventEmitter.slowEvent(t=>e(t.contentChangedEvent))}onDidChangeContentOrInjectedText(e){return od(this._eventEmitter.fastEvent(t=>e(t)),this._onDidChangeInjectedText.event(t=>e(t)))}_isDisposing(){return this.__isDisposing}get tokenization(){return this._tokenizationTextModelPart}get bracketPairs(){return this._bracketPairs}get guides(){return this._guidesTextModelPart}constructor(e,t,i,n=null,s,r,a,l){super(),this._undoRedoService=s,this._languageService=r,this._languageConfigurationService=a,this.instantiationService=l,this._onWillDispose=this._register(new Y),this.onWillDispose=this._onWillDispose.event,this._onDidChangeDecorations=this._register(new C4e(_=>this.handleBeforeFireDecorationsChangedEvent(_))),this.onDidChangeDecorations=this._onDidChangeDecorations.event,this._onDidChangeOptions=this._register(new Y),this.onDidChangeOptions=this._onDidChangeOptions.event,this._onDidChangeAttached=this._register(new Y),this.onDidChangeAttached=this._onDidChangeAttached.event,this._onDidChangeInjectedText=this._register(new Y),this._eventEmitter=this._register(new y4e),this._languageSelectionListener=this._register(new Xs),this._deltaDecorationCallCnt=0,this._attachedViews=new t4e,LR++,this.id="$model"+LR,this.isForSimpleWidget=i.isForSimpleWidget,typeof n>"u"||n===null?this._associatedResource=st.parse("inmemory://model/"+LR):this._associatedResource=n,this._attachedEditorCount=0;const{textBuffer:c,disposable:u}=Cse(e,i.defaultEOL);this._buffer=c,this._bufferDisposable=u,this._options=ov.resolveOptions(this._buffer,i);const f=typeof t=="string"?t:t.languageId;typeof t!="string"&&(this._languageSelectionListener.value=t.onDidChange(()=>this._setLanguage(t.languageId))),this._bracketPairs=this._register(new CFe(this,this._languageConfigurationService)),this._guidesTextModelPart=this._register(new xFe(this,this._languageConfigurationService)),this._decorationProvider=this._register(new wFe(this)),this._tokenizationTextModelPart=this.instantiationService.createInstance(q6,this,this._bracketPairs,f,this._attachedViews);const g=this._buffer.getLineCount(),p=this._buffer.getValueLengthInRange(new M(1,1,g,this._buffer.getLineLength(g)+1),0);i.largeFileOptimizations?(this._isTooLargeForTokenization=p>ov.LARGE_FILE_SIZE_THRESHOLD||g>ov.LARGE_FILE_LINE_COUNT_THRESHOLD,this._isTooLargeForHeapOperation=p>ov.LARGE_FILE_HEAP_OPERATION_THRESHOLD):(this._isTooLargeForTokenization=!1,this._isTooLargeForHeapOperation=!1),this._isTooLargeForSyncing=p>ov._MODEL_SYNC_LIMIT,this._versionId=1,this._alternativeVersionId=1,this._initialUndoRedoSnapshot=null,this._isDisposed=!1,this.__isDisposing=!1,this._instanceId=ece(LR),this._lastDecorationId=0,this._decorations=Object.create(null),this._decorationsTree=new yse,this._commandManager=new YK(this,this._undoRedoService),this._isUndoing=!1,this._isRedoing=!1,this._trimAutoWhitespaceLines=null,this._register(this._decorationProvider.onDidChange(()=>{this._onDidChangeDecorations.beginDeferredEmit(),this._onDidChangeDecorations.fire(),this._onDidChangeDecorations.endDeferredEmit()})),this._languageService.requestRichLanguageFeatures(f),this._register(this._languageConfigurationService.onDidChange(_=>{this._bracketPairs.handleLanguageConfigurationServiceChange(_),this._tokenizationTextModelPart.handleLanguageConfigurationServiceChange(_)}))}dispose(){this.__isDisposing=!0,this._onWillDispose.fire(),this._tokenizationTextModelPart.dispose(),this._isDisposed=!0,super.dispose(),this._bufferDisposable.dispose(),this.__isDisposing=!1;const e=new k1([],"",`
`,!1,!1,!0,!0);e.dispose(),this._buffer=e,this._bufferDisposable=X.None}_assertNotDisposed(){if(this._isDisposed)throw new wi("Model is disposed!")}_emitContentChangedEvent(e,t){this.__isDisposing||(this._tokenizationTextModelPart.handleDidChangeContent(t),this._bracketPairs.handleDidChangeContent(t),this._eventEmitter.fire(new eb(e,t)))}setValue(e){if(this._assertNotDisposed(),e==null)throw yc();const{textBuffer:t,disposable:i}=Cse(e,this._options.defaultEOL);this._setValueFromTextBuffer(t,i)}_createContentChanged2(e,t,i,n,s,r,a,l){return{changes:[{range:e,rangeOffset:t,rangeLength:i,text:n}],eol:this._buffer.getEOL(),isEolChange:l,versionId:this.getVersionId(),isUndoing:s,isRedoing:r,isFlush:a}}_setValueFromTextBuffer(e,t){this._assertNotDisposed();const i=this.getFullModelRange(),n=this.getValueLengthInRange(i),s=this.getLineCount(),r=this.getLineMaxColumn(s);this._buffer=e,this._bufferDisposable.dispose(),this._bufferDisposable=t,this._increaseVersionId(),this._decorations=Object.create(null),this._decorationsTree=new yse,this._commandManager.clear(),this._trimAutoWhitespaceLines=null,this._emitContentChangedEvent(new D1([new o4e],this._versionId,!1,!1),this._createContentChanged2(new M(1,1,s,r),0,n,this.getValue(),!1,!1,!0,!1))}setEOL(e){this._assertNotDisposed();const t=e===1?`\r
`:`
`;if(this._buffer.getEOL()===t)return;const i=this.getFullModelRange(),n=this.getValueLengthInRange(i),s=this.getLineCount(),r=this.getLineMaxColumn(s);this._onBeforeEOLChange(),this._buffer.setEOL(t),this._increaseVersionId(),this._onAfterEOLChange(),this._emitContentChangedEvent(new D1([new l4e],this._versionId,!1,!1),this._createContentChanged2(new M(1,1,s,r),0,n,this.getValue(),!1,!1,!1,!0))}_onBeforeEOLChange(){this._decorationsTree.ensureAllNodesHaveRanges(this)}_onAfterEOLChange(){const e=this.getVersionId(),t=this._decorationsTree.collectNodesPostOrder();for(let i=0,n=t.length;i<n;i++){const s=t[i],r=s.range,a=s.cachedAbsoluteStart-s.start,l=this._buffer.getOffsetAt(r.startLineNumber,r.startColumn),c=this._buffer.getOffsetAt(r.endLineNumber,r.endColumn);s.cachedAbsoluteStart=l,s.cachedAbsoluteEnd=c,s.cachedVersionId=e,s.start=l-a,s.end=c-a,$m(s)}}onBeforeAttached(){return this._attachedEditorCount++,this._attachedEditorCount===1&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.attachView()}onBeforeDetached(e){this._attachedEditorCount--,this._attachedEditorCount===0&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.detachView(e)}isAttachedToEditor(){return this._attachedEditorCount>0}getAttachedEditorCount(){return this._attachedEditorCount}isTooLargeForSyncing(){return this._isTooLargeForSyncing}isTooLargeForTokenization(){return this._isTooLargeForTokenization}isTooLargeForHeapOperation(){return this._isTooLargeForHeapOperation}isDisposed(){return this._isDisposed}isDominatedByLongLines(){if(this._assertNotDisposed(),this.isTooLargeForTokenization())return!1;let e=0,t=0;const i=this._buffer.getLineCount();for(let n=1;n<=i;n++){const s=this._buffer.getLineLength(n);s>=f4e?t+=s:e+=s}return t>e}get uri(){return this._associatedResource}getOptions(){return this._assertNotDisposed(),this._options}getFormattingOptions(){return{tabSize:this._options.indentSize,insertSpaces:this._options.insertSpaces}}updateOptions(e){this._assertNotDisposed();const t=typeof e.tabSize<"u"?e.tabSize:this._options.tabSize,i=typeof e.indentSize<"u"?e.indentSize:this._options.originalIndentSize,n=typeof e.insertSpaces<"u"?e.insertSpaces:this._options.insertSpaces,s=typeof e.trimAutoWhitespace<"u"?e.trimAutoWhitespace:this._options.trimAutoWhitespace,r=typeof e.bracketColorizationOptions<"u"?e.bracketColorizationOptions:this._options.bracketPairColorizationOptions,a=new mM({tabSize:t,indentSize:i,insertSpaces:n,defaultEOL:this._options.defaultEOL,trimAutoWhitespace:s,bracketPairColorizationOptions:r});if(this._options.equals(a))return;const l=this._options.createChangeEvent(a);this._options=a,this._bracketPairs.handleDidChangeOptions(l),this._decorationProvider.handleDidChangeOptions(l),this._onDidChangeOptions.fire(l)}detectIndentation(e,t){this._assertNotDisposed();const i=lse(this._buffer,t,e);this.updateOptions({insertSpaces:i.insertSpaces,tabSize:i.tabSize,indentSize:i.tabSize})}normalizeIndentation(e){return this._assertNotDisposed(),$K(e,this._options.indentSize,this._options.insertSpaces)}getVersionId(){return this._assertNotDisposed(),this._versionId}mightContainRTL(){return this._buffer.mightContainRTL()}mightContainUnusualLineTerminators(){return this._buffer.mightContainUnusualLineTerminators()}removeUnusualLineTerminators(e=null){const t=this.findMatches(Qle.source,!1,!0,!1,null,!1,1073741824);this._buffer.resetMightContainUnusualLineTerminators(),this.pushEditOperations(e,t.map(i=>({range:i.range,text:null})),()=>null)}mightContainNonBasicASCII(){return this._buffer.mightContainNonBasicASCII()}getAlternativeVersionId(){return this._assertNotDisposed(),this._alternativeVersionId}getInitialUndoRedoSnapshot(){return this._assertNotDisposed(),this._initialUndoRedoSnapshot}getOffsetAt(e){this._assertNotDisposed();const t=this._validatePosition(e.lineNumber,e.column,0);return this._buffer.getOffsetAt(t.lineNumber,t.column)}getPositionAt(e){this._assertNotDisposed();const t=Math.min(this._buffer.getLength(),Math.max(0,e));return this._buffer.getPositionAt(t)}_increaseVersionId(){this._versionId=this._versionId+1,this._alternativeVersionId=this._versionId}_overwriteVersionId(e){this._versionId=e}_overwriteAlternativeVersionId(e){this._alternativeVersionId=e}_overwriteInitialUndoRedoSnapshot(e){this._initialUndoRedoSnapshot=e}getValue(e,t=!1){if(this._assertNotDisposed(),this.isTooLargeForHeapOperation())throw new wi("Operation would exceed heap memory limits");const i=this.getFullModelRange(),n=this.getValueInRange(i,e);return t?this._buffer.getBOM()+n:n}createSnapshot(e=!1){return new g4e(this._buffer.createSnapshot(e))}getValueLength(e,t=!1){this._assertNotDisposed();const i=this.getFullModelRange(),n=this.getValueLengthInRange(i,e);return t?this._buffer.getBOM().length+n:n}getValueInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueInRange(this.validateRange(e),t)}getValueLengthInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueLengthInRange(this.validateRange(e),t)}getCharacterCountInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getCharacterCountInRange(this.validateRange(e),t)}getLineCount(){return this._assertNotDisposed(),this._buffer.getLineCount()}getLineContent(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new wi("Illegal value for lineNumber");return this._buffer.getLineContent(e)}getLineLength(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new wi("Illegal value for lineNumber");return this._buffer.getLineLength(e)}getLinesContent(){if(this._assertNotDisposed(),this.isTooLargeForHeapOperation())throw new wi("Operation would exceed heap memory limits");return this._buffer.getLinesContent()}getEOL(){return this._assertNotDisposed(),this._buffer.getEOL()}getEndOfLineSequence(){return this._assertNotDisposed(),this._buffer.getEOL()===`
`?0:1}getLineMinColumn(e){return this._assertNotDisposed(),1}getLineMaxColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new wi("Illegal value for lineNumber");return this._buffer.getLineLength(e)+1}getLineFirstNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new wi("Illegal value for lineNumber");return this._buffer.getLineFirstNonWhitespaceColumn(e)}getLineLastNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new wi("Illegal value for lineNumber");return this._buffer.getLineLastNonWhitespaceColumn(e)}_validateRangeRelaxedNoAllocations(e){const t=this._buffer.getLineCount(),i=e.startLineNumber,n=e.startColumn;let s=Math.floor(typeof i=="number"&&!isNaN(i)?i:1),r=Math.floor(typeof n=="number"&&!isNaN(n)?n:1);if(s<1)s=1,r=1;else if(s>t)s=t,r=this.getLineMaxColumn(s);else if(r<=1)r=1;else{const f=this.getLineMaxColumn(s);r>=f&&(r=f)}const a=e.endLineNumber,l=e.endColumn;let c=Math.floor(typeof a=="number"&&!isNaN(a)?a:1),u=Math.floor(typeof l=="number"&&!isNaN(l)?l:1);if(c<1)c=1,u=1;else if(c>t)c=t,u=this.getLineMaxColumn(c);else if(u<=1)u=1;else{const f=this.getLineMaxColumn(c);u>=f&&(u=f)}return i===s&&n===r&&a===c&&l===u&&e instanceof M&&!(e instanceof Ke)?e:new M(s,r,c,u)}_isValidPosition(e,t,i){if(typeof e!="number"||typeof t!="number"||isNaN(e)||isNaN(t)||e<1||t<1||(e|0)!==e||(t|0)!==t)return!1;const n=this._buffer.getLineCount();if(e>n)return!1;if(t===1)return!0;const s=this.getLineMaxColumn(e);if(t>s)return!1;if(i===1){const r=this._buffer.getLineCharCode(e,t-2);if(qs(r))return!1}return!0}_validatePosition(e,t,i){const n=Math.floor(typeof e=="number"&&!isNaN(e)?e:1),s=Math.floor(typeof t=="number"&&!isNaN(t)?t:1),r=this._buffer.getLineCount();if(n<1)return new G(1,1);if(n>r)return new G(r,this.getLineMaxColumn(r));if(s<=1)return new G(n,1);const a=this.getLineMaxColumn(n);if(s>=a)return new G(n,a);if(i===1){const l=this._buffer.getLineCharCode(n,s-2);if(qs(l))return new G(n,s-1)}return new G(n,s)}validatePosition(e){return this._assertNotDisposed(),e instanceof G&&this._isValidPosition(e.lineNumber,e.column,1)?e:this._validatePosition(e.lineNumber,e.column,1)}_isValidRange(e,t){const i=e.startLineNumber,n=e.startColumn,s=e.endLineNumber,r=e.endColumn;if(!this._isValidPosition(i,n,0)||!this._isValidPosition(s,r,0))return!1;if(t===1){const a=n>1?this._buffer.getLineCharCode(i,n-2):0,l=r>1&&r<=this._buffer.getLineLength(s)?this._buffer.getLineCharCode(s,r-2):0,c=qs(a),u=qs(l);return!c&&!u}return!0}validateRange(e){if(this._assertNotDisposed(),e instanceof M&&!(e instanceof Ke)&&this._isValidRange(e,1))return e;const i=this._validatePosition(e.startLineNumber,e.startColumn,0),n=this._validatePosition(e.endLineNumber,e.endColumn,0),s=i.lineNumber,r=i.column,a=n.lineNumber,l=n.column;{const c=r>1?this._buffer.getLineCharCode(s,r-2):0,u=l>1&&l<=this._buffer.getLineLength(a)?this._buffer.getLineCharCode(a,l-2):0,f=qs(c),g=qs(u);return!f&&!g?new M(s,r,a,l):s===a&&r===l?new M(s,r-1,a,l-1):f&&g?new M(s,r-1,a,l+1):f?new M(s,r-1,a,l):new M(s,r,a,l+1)}}modifyPosition(e,t){this._assertNotDisposed();const i=this.getOffsetAt(e)+t;return this.getPositionAt(Math.min(this._buffer.getLength(),Math.max(0,i)))}getFullModelRange(){this._assertNotDisposed();const e=this.getLineCount();return new M(1,1,e,this.getLineMaxColumn(e))}findMatchesLineByLine(e,t,i,n){return this._buffer.findMatchesLineByLine(e,t,i,n)}findMatches(e,t,i,n,s,r,a=h4e){this._assertNotDisposed();let l=null;t!==null&&(Array.isArray(t)||(t=[t]),t.every(f=>M.isIRange(f))&&(l=t.map(f=>this.validateRange(f)))),l===null&&(l=[this.getFullModelRange()]),l=l.sort((f,g)=>f.startLineNumber-g.startLineNumber||f.startColumn-g.startColumn);const c=[];c.push(l.reduce((f,g)=>M.areIntersecting(f,g)?f.plusRange(g):(c.push(f),g)));let u;if(!i&&e.indexOf(`
`)<0){const g=new sv(e,i,n,s).parseSearchRequest();if(!g)return[];u=p=>this.findMatchesLineByLine(p,g,r,a)}else u=f=>sR.findMatches(this,new sv(e,i,n,s),f,r,a);return c.map(u).reduce((f,g)=>f.concat(g),[])}findNextMatch(e,t,i,n,s,r){this._assertNotDisposed();const a=this.validatePosition(t);if(!i&&e.indexOf(`
`)<0){const c=new sv(e,i,n,s).parseSearchRequest();if(!c)return null;const u=this.getLineCount();let f=new M(a.lineNumber,a.column,u,this.getLineMaxColumn(u)),g=this.findMatchesLineByLine(f,c,r,1);return sR.findNextMatch(this,new sv(e,i,n,s),a,r),g.length>0||(f=new M(1,1,a.lineNumber,this.getLineMaxColumn(a.lineNumber)),g=this.findMatchesLineByLine(f,c,r,1),g.length>0)?g[0]:null}return sR.findNextMatch(this,new sv(e,i,n,s),a,r)}findPreviousMatch(e,t,i,n,s,r){this._assertNotDisposed();const a=this.validatePosition(t);return sR.findPreviousMatch(this,new sv(e,i,n,s),a,r)}pushStackElement(){this._commandManager.pushStackElement()}popStackElement(){this._commandManager.popStackElement()}pushEOL(e){if((this.getEOL()===`
`?0:1)!==e)try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEOL(e)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_validateEditOperation(e){return e instanceof o7?e:new o7(e.identifier||null,this.validateRange(e.range),e.text,e.forceMoveMarkers||!1,e.isAutoWhitespaceEdit||!1,e._isTracked||!1)}_validateEditOperations(e){const t=[];for(let i=0,n=e.length;i<n;i++)t[i]=this._validateEditOperation(e[i]);return t}pushEditOperations(e,t,i,n){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._pushEditOperations(e,this._validateEditOperations(t),i,n)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_pushEditOperations(e,t,i,n){if(this._options.trimAutoWhitespace&&this._trimAutoWhitespaceLines){const s=t.map(a=>({range:this.validateRange(a.range),text:a.text}));let r=!0;if(e)for(let a=0,l=e.length;a<l;a++){const c=e[a];let u=!1;for(let f=0,g=s.length;f<g;f++){const p=s[f].range,_=p.startLineNumber>c.endLineNumber,b=c.startLineNumber>p.endLineNumber;if(!_&&!b){u=!0;break}}if(!u){r=!1;break}}if(r)for(let a=0,l=this._trimAutoWhitespaceLines.length;a<l;a++){const c=this._trimAutoWhitespaceLines[a],u=this.getLineMaxColumn(c);let f=!0;for(let g=0,p=s.length;g<p;g++){const _=s[g].range,b=s[g].text;if(!(c<_.startLineNumber||c>_.endLineNumber)&&!(c===_.startLineNumber&&_.startColumn===u&&_.isEmpty()&&b&&b.length>0&&b.charAt(0)===`
`)&&!(c===_.startLineNumber&&_.startColumn===1&&_.isEmpty()&&b&&b.length>0&&b.charAt(b.length-1)===`
`)){f=!1;break}}if(f){const g=new M(c,1,c,u);t.push(new o7(null,g,null,!1,!1,!1))}}this._trimAutoWhitespaceLines=null}return this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEditOperation(e,t,i,n)}_applyUndo(e,t,i,n){const s=e.map(r=>{const a=this.getPositionAt(r.newPosition),l=this.getPositionAt(r.newEnd);return{range:new M(a.lineNumber,a.column,l.lineNumber,l.column),text:r.oldText}});this._applyUndoRedoEdits(s,t,!0,!1,i,n)}_applyRedo(e,t,i,n){const s=e.map(r=>{const a=this.getPositionAt(r.oldPosition),l=this.getPositionAt(r.oldEnd);return{range:new M(a.lineNumber,a.column,l.lineNumber,l.column),text:r.newText}});this._applyUndoRedoEdits(s,t,!1,!0,i,n)}_applyUndoRedoEdits(e,t,i,n,s,r){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._isUndoing=i,this._isRedoing=n,this.applyEdits(e,!1),this.setEOL(t),this._overwriteAlternativeVersionId(s)}finally{this._isUndoing=!1,this._isRedoing=!1,this._eventEmitter.endDeferredEmit(r),this._onDidChangeDecorations.endDeferredEmit()}}applyEdits(e,t=!1){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit();const i=this._validateEditOperations(e);return this._doApplyEdits(i,t)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_doApplyEdits(e,t){const i=this._buffer.getLineCount(),n=this._buffer.applyEdits(e,this._options.trimAutoWhitespace,t),s=this._buffer.getLineCount(),r=n.changes;if(this._trimAutoWhitespaceLines=n.trimAutoWhitespaceLineNumbers,r.length!==0){for(let c=0,u=r.length;c<u;c++){const f=r[c];this._decorationsTree.acceptReplace(f.rangeOffset,f.rangeLength,f.text.length,f.forceMoveMarkers)}const a=[];this._increaseVersionId();let l=i;for(let c=0,u=r.length;c<u;c++){const f=r[c],[g]=Vm(f.text);this._onDidChangeDecorations.fire();const p=f.range.startLineNumber,_=f.range.endLineNumber,b=_-p,y=g,S=Math.min(b,y),L=y-b,x=s-l-L+p,k=x,E=x+y,N=this._decorationsTree.getInjectedTextInInterval(this,this.getOffsetAt(new G(k,1)),this.getOffsetAt(new G(E,this.getLineMaxColumn(E))),0),A=mu.fromDecorations(N),P=new Cg(A);for(let H=S;H>=0;H--){const ee=p+H,Q=x+H;P.takeFromEndWhile(J=>J.lineNumber>Q);const te=P.takeFromEndWhile(J=>J.lineNumber===Q);a.push(new bse(ee,this.getLineContent(Q),te))}if(S<b){const H=p+S;a.push(new r4e(H+1,_))}if(S<y){const H=new Cg(A),ee=p+S,Q=y-S,te=s-l-Q+ee+1,J=[],Z=[];for(let he=0;he<Q;he++){const Ce=te+he;Z[he]=this.getLineContent(Ce),H.takeWhile(we=>we.lineNumber<Ce),J[he]=H.takeWhile(we=>we.lineNumber===Ce)}a.push(new a4e(ee+1,p+y,Z,J))}l+=L}this._emitContentChangedEvent(new D1(a,this.getVersionId(),this._isUndoing,this._isRedoing),{changes:r,eol:this._buffer.getEOL(),isEolChange:!1,versionId:this.getVersionId(),isUndoing:this._isUndoing,isRedoing:this._isRedoing,isFlush:!1})}return n.reverseEdits===null?void 0:n.reverseEdits}undo(){return this._undoRedoService.undo(this.uri)}canUndo(){return this._undoRedoService.canUndo(this.uri)}redo(){return this._undoRedoService.redo(this.uri)}canRedo(){return this._undoRedoService.canRedo(this.uri)}handleBeforeFireDecorationsChangedEvent(e){if(e===null||e.size===0)return;const i=Array.from(e).map(n=>new bse(n,this.getLineContent(n),this._getInjectedTextInLine(n)));this._onDidChangeInjectedText.fire(new che(i))}changeDecorations(e,t=0){this._assertNotDisposed();try{return this._onDidChangeDecorations.beginDeferredEmit(),this._changeDecorations(t,e)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_changeDecorations(e,t){const i={addDecoration:(s,r)=>this._deltaDecorationsImpl(e,[],[{range:s,options:r}])[0],changeDecoration:(s,r)=>{this._changeDecorationImpl(s,r)},changeDecorationOptions:(s,r)=>{this._changeDecorationOptionsImpl(s,Sse(r))},removeDecoration:s=>{this._deltaDecorationsImpl(e,[s],[])},deltaDecorations:(s,r)=>s.length===0&&r.length===0?[]:this._deltaDecorationsImpl(e,s,r)};let n=null;try{n=t(i)}catch(s){wt(s)}return i.addDecoration=vx,i.changeDecoration=vx,i.changeDecorationOptions=vx,i.removeDecoration=vx,i.deltaDecorations=vx,n}deltaDecorations(e,t,i=0){if(this._assertNotDisposed(),e||(e=[]),e.length===0&&t.length===0)return[];try{return this._deltaDecorationCallCnt++,this._deltaDecorationCallCnt>1&&(console.warn("Invoking deltaDecorations recursively could lead to leaking decorations."),wt(new Error("Invoking deltaDecorations recursively could lead to leaking decorations."))),this._onDidChangeDecorations.beginDeferredEmit(),this._deltaDecorationsImpl(i,e,t)}finally{this._onDidChangeDecorations.endDeferredEmit(),this._deltaDecorationCallCnt--}}_getTrackedRange(e){return this.getDecorationRange(e)}_setTrackedRange(e,t,i){const n=e?this._decorations[e]:null;if(!n)return t?this._deltaDecorationsImpl(0,[],[{range:t,options:wse[i]}],!0)[0]:null;if(!t)return this._decorationsTree.delete(n),delete this._decorations[n.id],null;const s=this._validateRangeRelaxedNoAllocations(t),r=this._buffer.getOffsetAt(s.startLineNumber,s.startColumn),a=this._buffer.getOffsetAt(s.endLineNumber,s.endColumn);return this._decorationsTree.delete(n),n.reset(this.getVersionId(),r,a,s),n.setOptions(wse[i]),this._decorationsTree.insert(n),n.id}removeAllDecorationsWithOwnerId(e){if(this._isDisposed)return;const t=this._decorationsTree.collectNodesFromOwner(e);for(let i=0,n=t.length;i<n;i++){const s=t[i];this._decorationsTree.delete(s),delete this._decorations[s.id]}}getDecorationOptions(e){const t=this._decorations[e];return t?t.options:null}getDecorationRange(e){const t=this._decorations[e];return t?this._decorationsTree.getNodeRange(this,t):null}getLineDecorations(e,t=0,i=!1){return e<1||e>this.getLineCount()?[]:this.getLinesDecorations(e,e,t,i)}getLinesDecorations(e,t,i=0,n=!1,s=!1){const r=this.getLineCount(),a=Math.min(r,Math.max(1,e)),l=Math.min(r,Math.max(1,t)),c=this.getLineMaxColumn(l),u=new M(a,1,l,c),f=this._getDecorationsInRange(u,i,n,s);return j9(f,this._decorationProvider.getDecorationsInRange(u,i,n)),f}getDecorationsInRange(e,t=0,i=!1,n=!1,s=!1){const r=this.validateRange(e),a=this._getDecorationsInRange(r,t,i,s);return j9(a,this._decorationProvider.getDecorationsInRange(r,t,i,n)),a}getOverviewRulerDecorations(e=0,t=!1){return this._decorationsTree.getAll(this,e,t,!0,!1)}getInjectedTextDecorations(e=0){return this._decorationsTree.getAllInjectedText(this,e)}_getInjectedTextInLine(e){const t=this._buffer.getOffsetAt(e,1),i=t+this._buffer.getLineLength(e),n=this._decorationsTree.getInjectedTextInInterval(this,t,i,0);return mu.fromDecorations(n).filter(s=>s.lineNumber===e)}getAllDecorations(e=0,t=!1){let i=this._decorationsTree.getAll(this,e,t,!1,!1);return i=i.concat(this._decorationProvider.getAllDecorations(e,t)),i}getAllMarginDecorations(e=0){return this._decorationsTree.getAll(this,e,!1,!1,!0)}_getDecorationsInRange(e,t,i,n){const s=this._buffer.getOffsetAt(e.startLineNumber,e.startColumn),r=this._buffer.getOffsetAt(e.endLineNumber,e.endColumn);return this._decorationsTree.getAllInInterval(this,s,r,t,i,n)}getRangeAt(e,t){return this._buffer.getRangeAt(e,t-e)}_changeDecorationImpl(e,t){const i=this._decorations[e];if(!i)return;if(i.options.after){const a=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.endLineNumber)}if(i.options.before){const a=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.startLineNumber)}const n=this._validateRangeRelaxedNoAllocations(t),s=this._buffer.getOffsetAt(n.startLineNumber,n.startColumn),r=this._buffer.getOffsetAt(n.endLineNumber,n.endColumn);this._decorationsTree.delete(i),i.reset(this.getVersionId(),s,r,n),this._decorationsTree.insert(i),this._onDidChangeDecorations.checkAffectedAndFire(i.options),i.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(n.endLineNumber),i.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(n.startLineNumber)}_changeDecorationOptionsImpl(e,t){const i=this._decorations[e];if(!i)return;const n=!!(i.options.overviewRuler&&i.options.overviewRuler.color),s=!!(t.overviewRuler&&t.overviewRuler.color);if(this._onDidChangeDecorations.checkAffectedAndFire(i.options),this._onDidChangeDecorations.checkAffectedAndFire(t),i.options.after||t.after){const l=this._decorationsTree.getNodeRange(this,i);this._onDidChangeDecorations.recordLineAffectedByInjectedText(l.endLineNumber)}if(i.options.before||t.before){const l=this._decorationsTree.getNodeRange(this,i);this._onDidChangeDecorations.recordLineAffectedByInjectedText(l.startLineNumber)}const r=n!==s,a=m4e(t)!==DM(i);r||a?(this._decorationsTree.delete(i),i.setOptions(t),this._decorationsTree.insert(i)):i.setOptions(t)}_deltaDecorationsImpl(e,t,i,n=!1){const s=this.getVersionId(),r=t.length;let a=0;const l=i.length;let c=0;this._onDidChangeDecorations.beginDeferredEmit();try{const u=new Array(l);for(;a<r||c<l;){let f=null;if(a<r){do f=this._decorations[t[a++]];while(!f&&a<r);if(f){if(f.options.after){const g=this._decorationsTree.getNodeRange(this,f);this._onDidChangeDecorations.recordLineAffectedByInjectedText(g.endLineNumber)}if(f.options.before){const g=this._decorationsTree.getNodeRange(this,f);this._onDidChangeDecorations.recordLineAffectedByInjectedText(g.startLineNumber)}this._decorationsTree.delete(f),n||this._onDidChangeDecorations.checkAffectedAndFire(f.options)}}if(c<l){if(!f){const S=++this._lastDecorationId,L=`${this._instanceId};${S}`;f=new ihe(L,0,0),this._decorations[L]=f}const g=i[c],p=this._validateRangeRelaxedNoAllocations(g.range),_=Sse(g.options),b=this._buffer.getOffsetAt(p.startLineNumber,p.startColumn),y=this._buffer.getOffsetAt(p.endLineNumber,p.endColumn);f.ownerId=e,f.reset(s,b,y,p),f.setOptions(_),f.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(p.endLineNumber),f.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(p.startLineNumber),n||this._onDidChangeDecorations.checkAffectedAndFire(_),this._decorationsTree.insert(f),u[c]=f.id,c++}else f&&delete this._decorations[f.id]}return u}finally{this._onDidChangeDecorations.endDeferredEmit()}}getLanguageId(){return this.tokenization.getLanguageId()}setLanguage(e,t){typeof e=="string"?(this._languageSelectionListener.clear(),this._setLanguage(e,t)):(this._languageSelectionListener.value=e.onDidChange(()=>this._setLanguage(e.languageId,t)),this._setLanguage(e.languageId,t))}_setLanguage(e,t){this.tokenization.setLanguageId(e,t),this._languageService.requestRichLanguageFeatures(e)}getLanguageIdAtPosition(e,t){return this.tokenization.getLanguageIdAtPosition(e,t)}getWordAtPosition(e){return this._tokenizationTextModelPart.getWordAtPosition(e)}getWordUntilPosition(e){return this._tokenizationTextModelPart.getWordUntilPosition(e)}normalizePosition(e,t){return e}getLineIndentColumn(e){return p4e(this.getLineContent(e))+1}},ov=Xd,Xd._MODEL_SYNC_LIMIT=50*1024*1024,Xd.LARGE_FILE_SIZE_THRESHOLD=20*1024*1024,Xd.LARGE_FILE_LINE_COUNT_THRESHOLD=300*1e3,Xd.LARGE_FILE_HEAP_OPERATION_THRESHOLD=256*1024*1024,Xd.DEFAULT_CREATION_OPTIONS={isForSimpleWidget:!1,tabSize:Zo.tabSize,indentSize:Zo.indentSize,insertSpaces:Zo.insertSpaces,detectIndentation:!1,defaultEOL:1,trimAutoWhitespace:Zo.trimAutoWhitespace,largeFileOptimizations:Zo.largeFileOptimizations,bracketPairColorizationOptions:Zo.bracketPairColorizationOptions},Xd);nu=ov=c4e([SR(4,rK),SR(5,In),SR(6,On),SR(7,nt)],nu);function p4e(o){let e=0;for(const t of o)if(t===" "||t==="	")e++;else break;return e}function M7(o){return!!(o.options.overviewRuler&&o.options.overviewRuler.color)}function m4e(o){return!!o.after||!!o.before}function DM(o){return!!o.options.after||!!o.options.before}class yse{constructor(){this._decorationsTree0=new I7,this._decorationsTree1=new I7,this._injectedTextDecorationsTree=new I7}ensureAllNodesHaveRanges(e){this.getAll(e,0,!1,!1,!1)}_ensureNodesHaveRanges(e,t){for(const i of t)i.range===null&&(i.range=e.getRangeAt(i.cachedAbsoluteStart,i.cachedAbsoluteEnd));return t}getAllInInterval(e,t,i,n,s,r){const a=e.getVersionId(),l=this._intervalSearch(t,i,n,s,a,r);return this._ensureNodesHaveRanges(e,l)}_intervalSearch(e,t,i,n,s,r){const a=this._decorationsTree0.intervalSearch(e,t,i,n,s,r),l=this._decorationsTree1.intervalSearch(e,t,i,n,s,r),c=this._injectedTextDecorationsTree.intervalSearch(e,t,i,n,s,r);return a.concat(l).concat(c)}getInjectedTextInInterval(e,t,i,n){const s=e.getVersionId(),r=this._injectedTextDecorationsTree.intervalSearch(t,i,n,!1,s,!1);return this._ensureNodesHaveRanges(e,r).filter(a=>a.options.showIfCollapsed||!a.range.isEmpty())}getAllInjectedText(e,t){const i=e.getVersionId(),n=this._injectedTextDecorationsTree.search(t,!1,i,!1);return this._ensureNodesHaveRanges(e,n).filter(s=>s.options.showIfCollapsed||!s.range.isEmpty())}getAll(e,t,i,n,s){const r=e.getVersionId(),a=this._search(t,i,n,r,s);return this._ensureNodesHaveRanges(e,a)}_search(e,t,i,n,s){if(i)return this._decorationsTree1.search(e,t,n,s);{const r=this._decorationsTree0.search(e,t,n,s),a=this._decorationsTree1.search(e,t,n,s),l=this._injectedTextDecorationsTree.search(e,t,n,s);return r.concat(a).concat(l)}}collectNodesFromOwner(e){const t=this._decorationsTree0.collectNodesFromOwner(e),i=this._decorationsTree1.collectNodesFromOwner(e),n=this._injectedTextDecorationsTree.collectNodesFromOwner(e);return t.concat(i).concat(n)}collectNodesPostOrder(){const e=this._decorationsTree0.collectNodesPostOrder(),t=this._decorationsTree1.collectNodesPostOrder(),i=this._injectedTextDecorationsTree.collectNodesPostOrder();return e.concat(t).concat(i)}insert(e){DM(e)?this._injectedTextDecorationsTree.insert(e):M7(e)?this._decorationsTree1.insert(e):this._decorationsTree0.insert(e)}delete(e){DM(e)?this._injectedTextDecorationsTree.delete(e):M7(e)?this._decorationsTree1.delete(e):this._decorationsTree0.delete(e)}getNodeRange(e,t){const i=e.getVersionId();return t.cachedVersionId!==i&&this._resolveNode(t,i),t.range===null&&(t.range=e.getRangeAt(t.cachedAbsoluteStart,t.cachedAbsoluteEnd)),t.range}_resolveNode(e,t){DM(e)?this._injectedTextDecorationsTree.resolveNode(e,t):M7(e)?this._decorationsTree1.resolveNode(e,t):this._decorationsTree0.resolveNode(e,t)}acceptReplace(e,t,i,n){this._decorationsTree0.acceptReplace(e,t,i,n),this._decorationsTree1.acceptReplace(e,t,i,n),this._injectedTextDecorationsTree.acceptReplace(e,t,i,n)}}function qu(o){return o.replace(/[^a-z0-9\-_]/gi," ")}class dhe{constructor(e){this.color=e.color||"",this.darkColor=e.darkColor||""}}class _4e extends dhe{constructor(e){super(e),this._resolvedColor=null,this.position=typeof e.position=="number"?e.position:Hl.Center}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=null}_resolveColor(e,t){if(typeof e=="string")return e;const i=e?t.getColor(e.id):null;return i?i.toString():""}}class v4e{constructor(e){this.position=(e==null?void 0:e.position)??cd.Center,this.persistLane=e==null?void 0:e.persistLane}}class b4e extends dhe{constructor(e){super(e),this.position=e.position,this.sectionHeaderStyle=e.sectionHeaderStyle??null,this.sectionHeaderText=e.sectionHeaderText??null}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=void 0}_resolveColor(e,t){return typeof e=="string"?ue.fromHex(e):t.getColor(e.id)}}class jm{static from(e){return e instanceof jm?e:new jm(e)}constructor(e){this.content=e.content||"",this.inlineClassName=e.inlineClassName||null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.attachedData=e.attachedData||null,this.cursorStops=e.cursorStops||null}}class Dt{static register(e){return new Dt(e)}static createDynamic(e){return new Dt(e)}constructor(e){this.description=e.description,this.blockClassName=e.blockClassName?qu(e.blockClassName):null,this.blockDoesNotCollapse=e.blockDoesNotCollapse??null,this.blockIsAfterEnd=e.blockIsAfterEnd??null,this.blockPadding=e.blockPadding??null,this.stickiness=e.stickiness||0,this.zIndex=e.zIndex||0,this.className=e.className?qu(e.className):null,this.shouldFillLineOnLineBreak=e.shouldFillLineOnLineBreak??null,this.hoverMessage=e.hoverMessage||null,this.glyphMarginHoverMessage=e.glyphMarginHoverMessage||null,this.lineNumberHoverMessage=e.lineNumberHoverMessage||null,this.isWholeLine=e.isWholeLine||!1,this.showIfCollapsed=e.showIfCollapsed||!1,this.collapseOnReplaceEdit=e.collapseOnReplaceEdit||!1,this.overviewRuler=e.overviewRuler?new _4e(e.overviewRuler):null,this.minimap=e.minimap?new b4e(e.minimap):null,this.glyphMargin=e.glyphMarginClassName?new v4e(e.glyphMargin):null,this.glyphMarginClassName=e.glyphMarginClassName?qu(e.glyphMarginClassName):null,this.linesDecorationsClassName=e.linesDecorationsClassName?qu(e.linesDecorationsClassName):null,this.lineNumberClassName=e.lineNumberClassName?qu(e.lineNumberClassName):null,this.linesDecorationsTooltip=e.linesDecorationsTooltip?Mke(e.linesDecorationsTooltip):null,this.firstLineDecorationClassName=e.firstLineDecorationClassName?qu(e.firstLineDecorationClassName):null,this.marginClassName=e.marginClassName?qu(e.marginClassName):null,this.inlineClassName=e.inlineClassName?qu(e.inlineClassName):null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.beforeContentClassName=e.beforeContentClassName?qu(e.beforeContentClassName):null,this.afterContentClassName=e.afterContentClassName?qu(e.afterContentClassName):null,this.after=e.after?jm.from(e.after):null,this.before=e.before?jm.from(e.before):null,this.hideInCommentTokens=e.hideInCommentTokens??!1,this.hideInStringTokens=e.hideInStringTokens??!1}}Dt.EMPTY=Dt.register({description:"empty"});const wse=[Dt.register({description:"tracked-range-always-grows-when-typing-at-edges",stickiness:0}),Dt.register({description:"tracked-range-never-grows-when-typing-at-edges",stickiness:1}),Dt.register({description:"tracked-range-grows-only-when-typing-before",stickiness:2}),Dt.register({description:"tracked-range-grows-only-when-typing-after",stickiness:3})];function Sse(o){return o instanceof Dt?o:Dt.createDynamic(o)}class C4e extends X{constructor(e){super(),this.handleBeforeFire=e,this._actual=this._register(new Y),this.event=this._actual.event,this._affectedInjectedTextLines=null,this._deferredCnt=0,this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1,this._affectsLineNumber=!1}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(){var e;this._deferredCnt--,this._deferredCnt===0&&(this._shouldFireDeferred&&this.doFire(),(e=this._affectedInjectedTextLines)==null||e.clear(),this._affectedInjectedTextLines=null)}recordLineAffectedByInjectedText(e){this._affectedInjectedTextLines||(this._affectedInjectedTextLines=new Set),this._affectedInjectedTextLines.add(e)}checkAffectedAndFire(e){var t,i;this._affectsMinimap||(this._affectsMinimap=!!((t=e.minimap)!=null&&t.position)),this._affectsOverviewRuler||(this._affectsOverviewRuler=!!((i=e.overviewRuler)!=null&&i.color)),this._affectsGlyphMargin||(this._affectsGlyphMargin=!!e.glyphMarginClassName),this._affectsLineNumber||(this._affectsLineNumber=!!e.lineNumberClassName),this.tryFire()}fire(){this._affectsMinimap=!0,this._affectsOverviewRuler=!0,this._affectsGlyphMargin=!0,this.tryFire()}tryFire(){this._deferredCnt===0?this.doFire():this._shouldFireDeferred=!0}doFire(){this.handleBeforeFire(this._affectedInjectedTextLines);const e={affectsMinimap:this._affectsMinimap,affectsOverviewRuler:this._affectsOverviewRuler,affectsGlyphMargin:this._affectsGlyphMargin,affectsLineNumber:this._affectsLineNumber};this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1,this._actual.fire(e)}}class y4e extends X{constructor(){super(),this._fastEmitter=this._register(new Y),this.fastEvent=this._fastEmitter.event,this._slowEmitter=this._register(new Y),this.slowEvent=this._slowEmitter.event,this._deferredCnt=0,this._deferredEvent=null}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(e=null){if(this._deferredCnt--,this._deferredCnt===0&&this._deferredEvent!==null){this._deferredEvent.rawContentChangedEvent.resultingSelection=e;const t=this._deferredEvent;this._deferredEvent=null,this._fastEmitter.fire(t),this._slowEmitter.fire(t)}}fire(e){if(this._deferredCnt>0){this._deferredEvent?this._deferredEvent=this._deferredEvent.merge(e):this._deferredEvent=e;return}this._fastEmitter.fire(e),this._slowEmitter.fire(e)}}var w4e=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},xR=function(o,e){return function(t,i){e(t,i,o)}},vw;function G_(o){return o.toString()}let S4e=class{constructor(e,t,i){this.model=e,this._modelEventListeners=new le,this.model=e,this._modelEventListeners.add(e.onWillDispose(()=>t(e))),this._modelEventListeners.add(e.onDidChangeLanguage(n=>i(e,n)))}dispose(){this._modelEventListeners.dispose()}};const L4e=Qr||Kt?1:2;class x4e{constructor(e,t,i,n,s,r,a,l){this.uri=e,this.initialUndoRedoSnapshot=t,this.time=i,this.sharesUndoRedoStack=n,this.heapSize=s,this.sha1=r,this.versionId=a,this.alternativeVersionId=l}}var lb;let K6=(lb=class extends X{constructor(e,t,i,n){super(),this._configurationService=e,this._resourcePropertiesService=t,this._undoRedoService=i,this._instantiationService=n,this._onModelAdded=this._register(new Y),this.onModelAdded=this._onModelAdded.event,this._onModelRemoved=this._register(new Y),this.onModelRemoved=this._onModelRemoved.event,this._onModelModeChanged=this._register(new Y),this.onModelLanguageChanged=this._onModelModeChanged.event,this._modelCreationOptionsByLanguageAndResource=Object.create(null),this._models={},this._disposedModels=new Map,this._disposedModelsHeapSize=0,this._register(this._configurationService.onDidChangeConfiguration(s=>this._updateModelOptions(s))),this._updateModelOptions(void 0)}static _readModelOptions(e,t){var g;let i=Zo.tabSize;if(e.editor&&typeof e.editor.tabSize<"u"){const p=parseInt(e.editor.tabSize,10);isNaN(p)||(i=p),i<1&&(i=1)}let n="tabSize";if(e.editor&&typeof e.editor.indentSize<"u"&&e.editor.indentSize!=="tabSize"){const p=parseInt(e.editor.indentSize,10);isNaN(p)||(n=Math.max(p,1))}let s=Zo.insertSpaces;e.editor&&typeof e.editor.insertSpaces<"u"&&(s=e.editor.insertSpaces==="false"?!1:!!e.editor.insertSpaces);let r=L4e;const a=e.eol;a===`\r
`?r=2:a===`
`&&(r=1);let l=Zo.trimAutoWhitespace;e.editor&&typeof e.editor.trimAutoWhitespace<"u"&&(l=e.editor.trimAutoWhitespace==="false"?!1:!!e.editor.trimAutoWhitespace);let c=Zo.detectIndentation;e.editor&&typeof e.editor.detectIndentation<"u"&&(c=e.editor.detectIndentation==="false"?!1:!!e.editor.detectIndentation);let u=Zo.largeFileOptimizations;e.editor&&typeof e.editor.largeFileOptimizations<"u"&&(u=e.editor.largeFileOptimizations==="false"?!1:!!e.editor.largeFileOptimizations);let f=Zo.bracketPairColorizationOptions;return(g=e.editor)!=null&&g.bracketPairColorization&&typeof e.editor.bracketPairColorization=="object"&&(f={enabled:!!e.editor.bracketPairColorization.enabled,independentColorPoolPerBracketType:!!e.editor.bracketPairColorization.independentColorPoolPerBracketType}),{isForSimpleWidget:t,tabSize:i,indentSize:n,insertSpaces:s,detectIndentation:c,defaultEOL:r,trimAutoWhitespace:l,largeFileOptimizations:u,bracketPairColorizationOptions:f}}_getEOL(e,t){if(e)return this._resourcePropertiesService.getEOL(e,t);const i=this._configurationService.getValue("files.eol",{overrideIdentifier:t});return i&&typeof i=="string"&&i!=="auto"?i:Ja===3||Ja===2?`
`:`\r
`}_shouldRestoreUndoStack(){const e=this._configurationService.getValue("files.restoreUndoStack");return typeof e=="boolean"?e:!0}getCreationOptions(e,t,i){const n=typeof e=="string"?e:e.languageId;let s=this._modelCreationOptionsByLanguageAndResource[n+t];if(!s){const r=this._configurationService.getValue("editor",{overrideIdentifier:n,resource:t}),a=this._getEOL(t,n);s=vw._readModelOptions({editor:r,eol:a},i),this._modelCreationOptionsByLanguageAndResource[n+t]=s}return s}_updateModelOptions(e){const t=this._modelCreationOptionsByLanguageAndResource;this._modelCreationOptionsByLanguageAndResource=Object.create(null);const i=Object.keys(this._models);for(let n=0,s=i.length;n<s;n++){const r=i[n],a=this._models[r],l=a.model.getLanguageId(),c=a.model.uri;if(e&&!e.affectsConfiguration("editor",{overrideIdentifier:l,resource:c})&&!e.affectsConfiguration("files.eol",{overrideIdentifier:l,resource:c}))continue;const u=t[l+c],f=this.getCreationOptions(l,c,a.model.isForSimpleWidget);vw._setModelOptionsForModel(a.model,f,u)}}static _setModelOptionsForModel(e,t,i){i&&i.defaultEOL!==t.defaultEOL&&e.getLineCount()===1&&e.setEOL(t.defaultEOL===1?0:1),!(i&&i.detectIndentation===t.detectIndentation&&i.insertSpaces===t.insertSpaces&&i.tabSize===t.tabSize&&i.indentSize===t.indentSize&&i.trimAutoWhitespace===t.trimAutoWhitespace&&el(i.bracketPairColorizationOptions,t.bracketPairColorizationOptions))&&(t.detectIndentation?(e.detectIndentation(t.insertSpaces,t.tabSize),e.updateOptions({trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions})):e.updateOptions({insertSpaces:t.insertSpaces,tabSize:t.tabSize,indentSize:t.indentSize,trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions}))}_insertDisposedModel(e){this._disposedModels.set(G_(e.uri),e),this._disposedModelsHeapSize+=e.heapSize}_removeDisposedModel(e){const t=this._disposedModels.get(G_(e));return t&&(this._disposedModelsHeapSize-=t.heapSize),this._disposedModels.delete(G_(e)),t}_ensureDisposedModelsHeapSize(e){if(this._disposedModelsHeapSize>e){const t=[];for(this._disposedModels.forEach(i=>{i.sharesUndoRedoStack||t.push(i)}),t.sort((i,n)=>i.time-n.time);t.length>0&&this._disposedModelsHeapSize>e;){const i=t.shift();this._removeDisposedModel(i.uri),i.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(i.initialUndoRedoSnapshot)}}}_createModelData(e,t,i,n){const s=this.getCreationOptions(t,i,n),r=this._instantiationService.createInstance(nu,e,t,s,i);if(i&&this._disposedModels.has(G_(i))){const c=this._removeDisposedModel(i),u=this._undoRedoService.getElements(i),f=this._getSHA1Computer(),g=f.canComputeSHA1(r)?f.computeSHA1(r)===c.sha1:!1;if(g||c.sharesUndoRedoStack){for(const p of u.past)zf(p)&&p.matchesResource(i)&&p.setModel(r);for(const p of u.future)zf(p)&&p.matchesResource(i)&&p.setModel(r);this._undoRedoService.setElementsValidFlag(i,!0,p=>zf(p)&&p.matchesResource(i)),g&&(r._overwriteVersionId(c.versionId),r._overwriteAlternativeVersionId(c.alternativeVersionId),r._overwriteInitialUndoRedoSnapshot(c.initialUndoRedoSnapshot))}else c.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(c.initialUndoRedoSnapshot)}const a=G_(r.uri);if(this._models[a])throw new Error("ModelService: Cannot add model because it already exists!");const l=new S4e(r,c=>this._onWillDispose(c),(c,u)=>this._onDidChangeLanguage(c,u));return this._models[a]=l,l}createModel(e,t,i,n=!1){let s;return t?s=this._createModelData(e,t,i,n):s=this._createModelData(e,Xr,i,n),this._onModelAdded.fire(s.model),s.model}getModels(){const e=[],t=Object.keys(this._models);for(let i=0,n=t.length;i<n;i++){const s=t[i];e.push(this._models[s].model)}return e}getModel(e){const t=G_(e),i=this._models[t];return i?i.model:null}_schemaShouldMaintainUndoRedoElements(e){return e.scheme===Lt.file||e.scheme===Lt.vscodeRemote||e.scheme===Lt.vscodeUserData||e.scheme===Lt.vscodeNotebookCell||e.scheme==="fake-fs"}_onWillDispose(e){const t=G_(e.uri),i=this._models[t],n=this._undoRedoService.getUriComparisonKey(e.uri)!==e.uri.toString();let s=!1,r=0;if(n||this._shouldRestoreUndoStack()&&this._schemaShouldMaintainUndoRedoElements(e.uri)){const c=this._undoRedoService.getElements(e.uri);if(c.past.length>0||c.future.length>0){for(const u of c.past)zf(u)&&u.matchesResource(e.uri)&&(s=!0,r+=u.heapSize(e.uri),u.setModel(e.uri));for(const u of c.future)zf(u)&&u.matchesResource(e.uri)&&(s=!0,r+=u.heapSize(e.uri),u.setModel(e.uri))}}const a=vw.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK,l=this._getSHA1Computer();if(s)if(!n&&(r>a||!l.canComputeSHA1(e))){const c=i.model.getInitialUndoRedoSnapshot();c!==null&&this._undoRedoService.restoreSnapshot(c)}else this._ensureDisposedModelsHeapSize(a-r),this._undoRedoService.setElementsValidFlag(e.uri,!1,c=>zf(c)&&c.matchesResource(e.uri)),this._insertDisposedModel(new x4e(e.uri,i.model.getInitialUndoRedoSnapshot(),Date.now(),n,r,l.computeSHA1(e),e.getVersionId(),e.getAlternativeVersionId()));else if(!n){const c=i.model.getInitialUndoRedoSnapshot();c!==null&&this._undoRedoService.restoreSnapshot(c)}delete this._models[t],i.dispose(),delete this._modelCreationOptionsByLanguageAndResource[e.getLanguageId()+e.uri],this._onModelRemoved.fire(e)}_onDidChangeLanguage(e,t){const i=t.oldLanguage,n=e.getLanguageId(),s=this.getCreationOptions(i,e.uri,e.isForSimpleWidget),r=this.getCreationOptions(n,e.uri,e.isForSimpleWidget);vw._setModelOptionsForModel(e,r,s),this._onModelModeChanged.fire({model:e,oldLanguageId:i})}_getSHA1Computer(){return new G6}},vw=lb,lb.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK=20*1024*1024,lb);K6=vw=w4e([xR(0,Ht),xR(1,rde),xR(2,rK),xR(3,nt)],K6);const w2=class w2{canComputeSHA1(e){return e.getValueLength()<=w2.MAX_MODEL_SIZE}computeSHA1(e){const t=new cV,i=e.createSnapshot();let n;for(;n=i.read();)t.update(n);return t.digest()}};w2.MAX_MODEL_SIZE=10*1024*1024;let G6=w2;var Y6;(function(o){o[o.PRESERVE=0]="PRESERVE",o[o.LAST=1]="LAST"})(Y6||(Y6={}));const BC={Quickaccess:"workbench.contributions.quickaccess"};class k4e{constructor(){this.providers=[],this.defaultProvider=void 0}registerQuickAccessProvider(e){return e.prefix.length===0?this.defaultProvider=e:this.providers.push(e),this.providers.sort((t,i)=>i.prefix.length-t.prefix.length),it(()=>{this.providers.splice(this.providers.indexOf(e),1),this.defaultProvider===e&&(this.defaultProvider=void 0)})}getQuickAccessProviders(){return rd([this.defaultProvider,...this.providers])}getQuickAccessProvider(e){return e&&this.providers.find(i=>e.startsWith(i.prefix))||void 0||this.defaultProvider}}Pn.add(BC.Quickaccess,new k4e);const D4e={ctrlCmd:!1,alt:!1};var mS;(function(o){o[o.Blur=1]="Blur",o[o.Gesture=2]="Gesture",o[o.Other=3]="Other"})(mS||(mS={}));var qd;(function(o){o[o.NONE=0]="NONE",o[o.FIRST=1]="FIRST",o[o.SECOND=2]="SECOND",o[o.LAST=3]="LAST"})(qd||(qd={}));var an;(function(o){o[o.First=1]="First",o[o.Second=2]="Second",o[o.Last=3]="Last",o[o.Next=4]="Next",o[o.Previous=5]="Previous",o[o.NextPage=6]="NextPage",o[o.PreviousPage=7]="PreviousPage",o[o.NextSeparator=8]="NextSeparator",o[o.PreviousSeparator=9]="PreviousSeparator"})(an||(an={}));var cP;(function(o){o[o.Title=1]="Title",o[o.Inline=2]="Inline"})(cP||(cP={}));const Rc=Gt("quickInputService");var E4e=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Lse=function(o,e){return function(t,i){e(t,i,o)}};let Z6=class extends X{constructor(e,t){super(),this.quickInputService=e,this.instantiationService=t,this.registry=Pn.as(BC.Quickaccess),this.mapProviderToDescriptor=new Map,this.lastAcceptedPickerValues=new Map,this.visibleQuickAccess=void 0}show(e="",t){this.doShowOrPick(e,!1,t)}doShowOrPick(e,t,i){var _,b;const[n,s]=this.getOrInstantiateProvider(e,i==null?void 0:i.enabledProviderPrefixes),r=this.visibleQuickAccess,a=r==null?void 0:r.descriptor;if(r&&s&&a===s){e!==s.prefix&&!(i!=null&&i.preserveValue)&&(r.picker.value=e),this.adjustValueSelection(r.picker,s,i);return}if(s&&!(i!=null&&i.preserveValue)){let y;if(r&&a&&a!==s){const S=r.value.substr(a.prefix.length);S&&(y=`${s.prefix}${S}`)}if(!y){const S=n==null?void 0:n.defaultFilterValue;S===Y6.LAST?y=this.lastAcceptedPickerValues.get(s):typeof S=="string"&&(y=`${s.prefix}${S}`)}typeof y=="string"&&(e=y)}const l=(_=r==null?void 0:r.picker)==null?void 0:_.valueSelection,c=(b=r==null?void 0:r.picker)==null?void 0:b.value,u=new le,f=u.add(this.quickInputService.createQuickPick({useSeparators:!0}));f.value=e,this.adjustValueSelection(f,s,i),f.placeholder=(i==null?void 0:i.placeholder)??(s==null?void 0:s.placeholder),f.quickNavigate=i==null?void 0:i.quickNavigateConfiguration,f.hideInput=!!f.quickNavigate&&!r,(typeof(i==null?void 0:i.itemActivation)=="number"||i!=null&&i.quickNavigateConfiguration)&&(f.itemActivation=(i==null?void 0:i.itemActivation)??qd.SECOND),f.contextKey=s==null?void 0:s.contextKey,f.filterValue=y=>y.substring(s?s.prefix.length:0);let g;t&&(g=new zS,u.add(Ee.once(f.onWillAccept)(y=>{y.veto(),f.hide()}))),u.add(this.registerPickerListeners(f,n,s,e,i));const p=u.add(new An);if(n&&u.add(n.provide(f,p.token,i==null?void 0:i.providerOptions)),Ee.once(f.onDidHide)(()=>{f.selectedItems.length===0&&p.cancel(),u.dispose(),g==null||g.complete(f.selectedItems.slice(0))}),f.show(),l&&c===e&&(f.valueSelection=l),t)return g==null?void 0:g.p}adjustValueSelection(e,t,i){let n;i!=null&&i.preserveValue?n=[e.value.length,e.value.length]:n=[(t==null?void 0:t.prefix.length)??0,e.value.length],e.valueSelection=n}registerPickerListeners(e,t,i,n,s){const r=new le,a=this.visibleQuickAccess={picker:e,descriptor:i,value:n};return r.add(it(()=>{a===this.visibleQuickAccess&&(this.visibleQuickAccess=void 0)})),r.add(e.onDidChangeValue(l=>{const[c]=this.getOrInstantiateProvider(l,s==null?void 0:s.enabledProviderPrefixes);c!==t?this.show(l,{enabledProviderPrefixes:s==null?void 0:s.enabledProviderPrefixes,preserveValue:!0,providerOptions:s==null?void 0:s.providerOptions}):a.value=l})),i&&r.add(e.onDidAccept(()=>{this.lastAcceptedPickerValues.set(i,e.value)})),r}getOrInstantiateProvider(e,t){const i=this.registry.getQuickAccessProvider(e);if(!i||t&&!(t!=null&&t.includes(i.prefix)))return[void 0,void 0];let n=this.mapProviderToDescriptor.get(i);return n||(n=this.instantiationService.createInstance(i.ctor),this.mapProviderToDescriptor.set(i,n)),[n,i]}};Z6=E4e([Lse(0,Rc),Lse(1,nt)],Z6);class t0 extends Zl{constructor(e){super(),this._onChange=this._register(new Y),this.onChange=this._onChange.event,this._onKeyDown=this._register(new Y),this.onKeyDown=this._onKeyDown.event,this._opts=e,this._checked=this._opts.isChecked;const t=["monaco-custom-toggle"];this._opts.icon&&(this._icon=this._opts.icon,t.push(...ut.asClassNameArray(this._icon))),this._opts.actionClassName&&t.push(...this._opts.actionClassName.split(" ")),this._checked&&t.push("checked"),this.domNode=document.createElement("div"),this._hover=this._register(Su().setupManagedHover(e.hoverDelegate??sa("mouse"),this.domNode,this._opts.title)),this.domNode.classList.add(...t),this._opts.notFocusable||(this.domNode.tabIndex=0),this.domNode.setAttribute("role","checkbox"),this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.setAttribute("aria-label",this._opts.title),this.applyStyles(),this.onclick(this.domNode,i=>{this.enabled&&(this.checked=!this._checked,this._onChange.fire(!1),i.preventDefault())}),this._register(this.ignoreGesture(this.domNode)),this.onkeydown(this.domNode,i=>{if(i.keyCode===10||i.keyCode===3){this.checked=!this._checked,this._onChange.fire(!0),i.preventDefault(),i.stopPropagation();return}this._onKeyDown.fire(i)})}get enabled(){return this.domNode.getAttribute("aria-disabled")!=="true"}focus(){this.domNode.focus()}get checked(){return this._checked}set checked(e){this._checked=e,this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.classList.toggle("checked",this._checked),this.applyStyles()}width(){return 22}applyStyles(){this.domNode&&(this.domNode.style.borderColor=this._checked&&this._opts.inputActiveOptionBorder||"",this.domNode.style.color=this._checked&&this._opts.inputActiveOptionForeground||"inherit",this.domNode.style.backgroundColor=this._checked&&this._opts.inputActiveOptionBackground||"")}enable(){this.domNode.setAttribute("aria-disabled",String(!1))}disable(){this.domNode.setAttribute("aria-disabled",String(!0))}}var I4e=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class uhe{constructor(e){this.nodes=e}toString(){return this.nodes.map(e=>typeof e=="string"?e:e.label).join("")}}I4e([gs],uhe.prototype,"toString",null);const T4e=/\[([^\]]+)\]\(((?:https?:\/\/|command:|file:)[^\)\s]+)(?: (["'])(.+?)(\3))?\)/gi;function N4e(o){const e=[];let t=0,i;for(;i=T4e.exec(o);){i.index-t>0&&e.push(o.substring(t,i.index));const[,n,s,,r]=i;r?e.push({label:n,href:s,title:r}):e.push({label:n,href:s}),t=i.index+i[0].length}return t<o.length&&e.push(o.substring(t)),new uhe(e)}const A7={},R4e=new TK("quick-input-button-icon-");function M4e(o){if(!o)return;let e;const t=o.dark.toString();return A7[t]?e=A7[t]:(e=R4e.nextId(),yA(`.${e}, .hc-light .${e}`,`background-image: ${Lg(o.light||o.dark)}`),yA(`.vs-dark .${e}, .hc-black .${e}`,`background-image: ${Lg(o.dark)}`),A7[t]=e),e}function mk(o,e,t){let i=o.iconClass||M4e(o.iconPath);return o.alwaysVisible&&(i=i?`${i} always-visible`:"always-visible"),{id:e,label:"",tooltip:o.tooltip||"",class:i,enabled:!0,run:t}}function A4e(o,e,t){Co(e);const i=N4e(o);let n=0;for(const s of i.nodes)if(typeof s=="string")e.append(...dm(s));else{let r=s.title;!r&&s.href.startsWith("command:")?r=v("executeCommand","Click to execute command '{0}'",s.href.substring(8)):r||(r=s.href);const a=xe("a",{href:s.href,title:r,tabIndex:n++},s.label);a.style.textDecoration="underline";const l=p=>{eEe(p)&&Jt.stop(p,!0),t.callback(s.href)},c=t.disposables.add(new Zt(a,Le.CLICK)).event,u=t.disposables.add(new Zt(a,Le.KEY_DOWN)).event,f=Ee.chain(u,p=>p.filter(_=>{const b=new Zi(_);return b.equals(10)||b.equals(3)}));t.disposables.add(Jo.addTarget(a));const g=t.disposables.add(new Zt(a,tn.Tap)).event;Ee.any(c,g,f)(l,null,t.disposables),e.appendChild(a)}}var P4e=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},xse=function(o,e){return function(t,i){e(t,i,o)}};const hhe="inQuickInput",O4e=new Pe(hhe,!1,v("inQuickInput","Whether keyboard focus is inside the quick input control")),F4e=de.has(hhe),fhe="quickInputType",B4e=new Pe(fhe,void 0,v("quickInputType","The type of the currently visible quick input")),ghe="cursorAtEndOfQuickInputBox",W4e=new Pe(ghe,!1,v("cursorAtEndOfQuickInputBox","Whether the cursor in the quick input is at the end of the input box")),H4e=de.has(ghe),X6={iconClass:ut.asClassName(Se.quickInputBack),tooltip:v("quickInput.back","Back"),handle:-1},S2=class S2 extends X{constructor(e){super(),this.ui=e,this._widgetUpdated=!1,this.visible=!1,this._enabled=!0,this._busy=!1,this._ignoreFocusOut=!1,this._leftButtons=[],this._rightButtons=[],this._inlineButtons=[],this.buttonsUpdated=!1,this._toggles=[],this.togglesUpdated=!1,this.noValidationMessage=S2.noPromptMessage,this._severity=hs.Ignore,this.onDidTriggerButtonEmitter=this._register(new Y),this.onDidHideEmitter=this._register(new Y),this.onWillHideEmitter=this._register(new Y),this.onDisposeEmitter=this._register(new Y),this.visibleDisposables=this._register(new le),this.onDidHide=this.onDidHideEmitter.event}get title(){return this._title}set title(e){this._title=e,this.update()}get description(){return this._description}set description(e){this._description=e,this.update()}get step(){return this._steps}set step(e){this._steps=e,this.update()}get totalSteps(){return this._totalSteps}set totalSteps(e){this._totalSteps=e,this.update()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this.update()}get contextKey(){return this._contextKey}set contextKey(e){this._contextKey=e,this.update()}get busy(){return this._busy}set busy(e){this._busy=e,this.update()}get ignoreFocusOut(){return this._ignoreFocusOut}set ignoreFocusOut(e){const t=this._ignoreFocusOut!==e&&!hu;this._ignoreFocusOut=e&&!hu,t&&this.update()}get titleButtons(){return this._leftButtons.length?[...this._leftButtons,this._rightButtons]:this._rightButtons}get buttons(){return[...this._leftButtons,...this._rightButtons,...this._inlineButtons]}set buttons(e){this._leftButtons=e.filter(t=>t===X6),this._rightButtons=e.filter(t=>t!==X6&&t.location!==cP.Inline),this._inlineButtons=e.filter(t=>t.location===cP.Inline),this.buttonsUpdated=!0,this.update()}get toggles(){return this._toggles}set toggles(e){this._toggles=e??[],this.togglesUpdated=!0,this.update()}get validationMessage(){return this._validationMessage}set validationMessage(e){this._validationMessage=e,this.update()}get severity(){return this._severity}set severity(e){this._severity=e,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.onDidTriggerButton(e=>{this.buttons.indexOf(e)!==-1&&this.onDidTriggerButtonEmitter.fire(e)})),this.ui.show(this),this.visible=!0,this._lastValidationMessage=void 0,this._lastSeverity=void 0,this.buttons.length&&(this.buttonsUpdated=!0),this.toggles.length&&(this.togglesUpdated=!0),this.update())}hide(){this.visible&&this.ui.hide()}didHide(e=mS.Other){this.visible=!1,this.visibleDisposables.clear(),this.onDidHideEmitter.fire({reason:e})}willHide(e=mS.Other){this.onWillHideEmitter.fire({reason:e})}update(){var n;if(!this.visible)return;const e=this.getTitle();e&&this.ui.title.textContent!==e?this.ui.title.textContent=e:!e&&this.ui.title.innerHTML!=="&nbsp;"&&(this.ui.title.innerText="");const t=this.getDescription();if(this.ui.description1.textContent!==t&&(this.ui.description1.textContent=t),this.ui.description2.textContent!==t&&(this.ui.description2.textContent=t),this._widgetUpdated&&(this._widgetUpdated=!1,this._widget?Co(this.ui.widget,this._widget):Co(this.ui.widget)),this.busy&&!this.busyDelay&&(this.busyDelay=new gd,this.busyDelay.setIfNotSet(()=>{this.visible&&this.ui.progressBar.infinite()},800)),!this.busy&&this.busyDelay&&(this.ui.progressBar.stop(),this.busyDelay.cancel(),this.busyDelay=void 0),this.buttonsUpdated){this.buttonsUpdated=!1,this.ui.leftActionBar.clear();const s=this._leftButtons.map((l,c)=>mk(l,`id-${c}`,async()=>this.onDidTriggerButtonEmitter.fire(l)));this.ui.leftActionBar.push(s,{icon:!0,label:!1}),this.ui.rightActionBar.clear();const r=this._rightButtons.map((l,c)=>mk(l,`id-${c}`,async()=>this.onDidTriggerButtonEmitter.fire(l)));this.ui.rightActionBar.push(r,{icon:!0,label:!1}),this.ui.inlineActionBar.clear();const a=this._inlineButtons.map((l,c)=>mk(l,`id-${c}`,async()=>this.onDidTriggerButtonEmitter.fire(l)));this.ui.inlineActionBar.push(a,{icon:!0,label:!1})}if(this.togglesUpdated){this.togglesUpdated=!1;const s=((n=this.toggles)==null?void 0:n.filter(r=>r instanceof t0))??[];this.ui.inputBox.toggles=s}this.ui.ignoreFocusOut=this.ignoreFocusOut,this.ui.setEnabled(this.enabled),this.ui.setContextKey(this.contextKey);const i=this.validationMessage||this.noValidationMessage;this._lastValidationMessage!==i&&(this._lastValidationMessage=i,Co(this.ui.message),A4e(i,this.ui.message,{callback:s=>{this.ui.linkOpenerDelegate(s)},disposables:this.visibleDisposables})),this._lastSeverity!==this.severity&&(this._lastSeverity=this.severity,this.showMessageDecoration(this.severity))}getTitle(){return this.title&&this.step?`${this.title} (${this.getSteps()})`:this.title?this.title:this.step?this.getSteps():""}getDescription(){return this.description||""}getSteps(){return this.step&&this.totalSteps?v("quickInput.steps","{0}/{1}",this.step,this.totalSteps):this.step?String(this.step):""}showMessageDecoration(e){if(this.ui.inputBox.showDecoration(e),e!==hs.Ignore){const t=this.ui.inputBox.stylesForType(e);this.ui.message.style.color=t.foreground?`${t.foreground}`:"",this.ui.message.style.backgroundColor=t.background?`${t.background}`:"",this.ui.message.style.border=t.border?`1px solid ${t.border}`:"",this.ui.message.style.marginBottom="-2px"}else this.ui.message.style.color="",this.ui.message.style.backgroundColor="",this.ui.message.style.border="",this.ui.message.style.marginBottom=""}dispose(){this.hide(),this.onDisposeEmitter.fire(),super.dispose()}};S2.noPromptMessage=v("inputModeEntry","Press 'Enter' to confirm your input or 'Escape' to cancel");let dP=S2;const L2=class L2 extends dP{constructor(){super(...arguments),this._value="",this.onDidChangeValueEmitter=this._register(new Y),this.onWillAcceptEmitter=this._register(new Y),this.onDidAcceptEmitter=this._register(new Y),this.onDidCustomEmitter=this._register(new Y),this._items=[],this.itemsUpdated=!1,this._canSelectMany=!1,this._canAcceptInBackground=!1,this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._matchOnLabelMode="fuzzy",this._sortByLabel=!0,this._keepScrollPosition=!1,this._itemActivation=qd.FIRST,this._activeItems=[],this.activeItemsUpdated=!1,this.activeItemsToConfirm=[],this.onDidChangeActiveEmitter=this._register(new Y),this._selectedItems=[],this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=[],this.onDidChangeSelectionEmitter=this._register(new Y),this.onDidTriggerItemButtonEmitter=this._register(new Y),this.onDidTriggerSeparatorButtonEmitter=this._register(new Y),this.valueSelectionUpdated=!0,this._ok="default",this._customButton=!1,this._focusEventBufferer=new KE,this.type="quickPick",this.filterValue=e=>e,this.onDidChangeValue=this.onDidChangeValueEmitter.event,this.onWillAccept=this.onWillAcceptEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event,this.onDidChangeActive=this.onDidChangeActiveEmitter.event,this.onDidChangeSelection=this.onDidChangeSelectionEmitter.event,this.onDidTriggerItemButton=this.onDidTriggerItemButtonEmitter.event,this.onDidTriggerSeparatorButton=this.onDidTriggerSeparatorButtonEmitter.event}get quickNavigate(){return this._quickNavigate}set quickNavigate(e){this._quickNavigate=e,this.update()}get value(){return this._value}set value(e){this.doSetValue(e)}doSetValue(e,t){this._value!==e&&(this._value=e,t||this.update(),this.visible&&this.ui.list.filter(this.filterValue(this._value))&&this.trySelectFirst(),this.onDidChangeValueEmitter.fire(this._value))}set ariaLabel(e){this._ariaLabel=e,this.update()}get ariaLabel(){return this._ariaLabel}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get items(){return this._items}get scrollTop(){return this.ui.list.scrollTop}set scrollTop(e){this.ui.list.scrollTop=e}set items(e){this._items=e,this.itemsUpdated=!0,this.update()}get canSelectMany(){return this._canSelectMany}set canSelectMany(e){this._canSelectMany=e,this.update()}get canAcceptInBackground(){return this._canAcceptInBackground}set canAcceptInBackground(e){this._canAcceptInBackground=e}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(e){this._matchOnDescription=e,this.update()}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(e){this._matchOnDetail=e,this.update()}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(e){this._matchOnLabel=e,this.update()}get matchOnLabelMode(){return this._matchOnLabelMode}set matchOnLabelMode(e){this._matchOnLabelMode=e,this.update()}get sortByLabel(){return this._sortByLabel}set sortByLabel(e){this._sortByLabel=e,this.update()}get keepScrollPosition(){return this._keepScrollPosition}set keepScrollPosition(e){this._keepScrollPosition=e}get itemActivation(){return this._itemActivation}set itemActivation(e){this._itemActivation=e}get activeItems(){return this._activeItems}set activeItems(e){this._activeItems=e,this.activeItemsUpdated=!0,this.update()}get selectedItems(){return this._selectedItems}set selectedItems(e){this._selectedItems=e,this.selectedItemsUpdated=!0,this.update()}get keyMods(){return this._quickNavigate?D4e:this.ui.keyMods}get valueSelection(){const e=this.ui.inputBox.getSelection();if(e)return[e.start,e.end]}set valueSelection(e){this._valueSelection=e,this.valueSelectionUpdated=!0,this.update()}get customButton(){return this._customButton}set customButton(e){this._customButton=e,this.update()}get customLabel(){return this._customButtonLabel}set customLabel(e){this._customButtonLabel=e,this.update()}get customHover(){return this._customButtonHover}set customHover(e){this._customButtonHover=e,this.update()}get ok(){return this._ok}set ok(e){this._ok=e,this.update()}get hideInput(){return!!this._hideInput}set hideInput(e){this._hideInput=e,this.update()}trySelectFirst(){this.canSelectMany||this.ui.list.focus(an.First)}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(e=>{this.doSetValue(e,!0)})),this.visibleDisposables.add(this.ui.onDidAccept(()=>{this.canSelectMany?this.ui.list.getCheckedElements().length||(this._selectedItems=[],this.onDidChangeSelectionEmitter.fire(this.selectedItems)):this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems)),this.handleAccept(!1)})),this.visibleDisposables.add(this.ui.onDidCustom(()=>{this.onDidCustomEmitter.fire()})),this.visibleDisposables.add(this._focusEventBufferer.wrapEvent(this.ui.list.onDidChangeFocus,(e,t)=>t)(e=>{this.activeItemsUpdated||this.activeItemsToConfirm!==this._activeItems&&En(e,this._activeItems,(t,i)=>t===i)||(this._activeItems=e,this.onDidChangeActiveEmitter.fire(e))})),this.visibleDisposables.add(this.ui.list.onDidChangeSelection(({items:e,event:t})=>{if(this.canSelectMany){e.length&&this.ui.list.setSelectedElements([]);return}this.selectedItemsToConfirm!==this._selectedItems&&En(e,this._selectedItems,(i,n)=>i===n)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e),e.length&&this.handleAccept(jq(t)&&t.button===1))})),this.visibleDisposables.add(this.ui.list.onChangedCheckedElements(e=>{!this.canSelectMany||!this.visible||this.selectedItemsToConfirm!==this._selectedItems&&En(e,this._selectedItems,(t,i)=>t===i)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e))})),this.visibleDisposables.add(this.ui.list.onButtonTriggered(e=>this.onDidTriggerItemButtonEmitter.fire(e))),this.visibleDisposables.add(this.ui.list.onSeparatorButtonTriggered(e=>this.onDidTriggerSeparatorButtonEmitter.fire(e))),this.visibleDisposables.add(this.registerQuickNavigation()),this.valueSelectionUpdated=!0),super.show()}handleAccept(e){let t=!1;this.onWillAcceptEmitter.fire({veto:()=>t=!0}),t||this.onDidAcceptEmitter.fire({inBackground:e})}registerQuickNavigation(){return se(this.ui.container,Le.KEY_UP,e=>{if(this.canSelectMany||!this._quickNavigate)return;const t=new Zi(e),i=t.keyCode;this._quickNavigate.keybindings.some(r=>{const a=r.getChords();return a.length>1?!1:a[0].shiftKey&&i===4?!(t.ctrlKey||t.altKey||t.metaKey):!!(a[0].altKey&&i===6||a[0].ctrlKey&&i===5||a[0].metaKey&&i===57)})&&(this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!1)),this._quickNavigate=void 0)})}update(){if(!this.visible)return;const e=this.keepScrollPosition?this.scrollTop:0,t=!!this.description,i={title:!!this.title||!!this.step||!!this.titleButtons.length,description:t,checkAll:this.canSelectMany&&!this._hideCheckAll,checkBox:this.canSelectMany,inputBox:!this._hideInput,progressBar:!this._hideInput||t,visibleCount:!0,count:this.canSelectMany&&!this._hideCountBadge,ok:this.ok==="default"?this.canSelectMany:this.ok,list:!0,message:!!this.validationMessage,customButton:this.customButton};this.ui.setVisibilities(i),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||"");let n=this.ariaLabel;!n&&i.inputBox&&(n=this.placeholder||L2.DEFAULT_ARIA_LABEL,this.title&&(n+=` - ${this.title}`)),this.ui.list.ariaLabel!==n&&(this.ui.list.ariaLabel=n??null),this.ui.list.matchOnDescription=this.matchOnDescription,this.ui.list.matchOnDetail=this.matchOnDetail,this.ui.list.matchOnLabel=this.matchOnLabel,this.ui.list.matchOnLabelMode=this.matchOnLabelMode,this.ui.list.sortByLabel=this.sortByLabel,this.itemsUpdated&&(this.itemsUpdated=!1,this._focusEventBufferer.bufferEvents(()=>{switch(this.ui.list.setElements(this.items),this.ui.list.shouldLoop=!this.canSelectMany,this.ui.list.filter(this.filterValue(this.ui.inputBox.value)),this._itemActivation){case qd.NONE:this._itemActivation=qd.FIRST;break;case qd.SECOND:this.ui.list.focus(an.Second),this._itemActivation=qd.FIRST;break;case qd.LAST:this.ui.list.focus(an.Last),this._itemActivation=qd.FIRST;break;default:this.trySelectFirst();break}})),this.ui.container.classList.contains("show-checkboxes")!==!!this.canSelectMany&&(this.canSelectMany?this.ui.list.clearFocus():this.trySelectFirst()),this.activeItemsUpdated&&(this.activeItemsUpdated=!1,this.activeItemsToConfirm=this._activeItems,this.ui.list.setFocusedElements(this.activeItems),this.activeItemsToConfirm===this._activeItems&&(this.activeItemsToConfirm=null)),this.selectedItemsUpdated&&(this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=this._selectedItems,this.canSelectMany?this.ui.list.setCheckedElements(this.selectedItems):this.ui.list.setSelectedElements(this.selectedItems),this.selectedItemsToConfirm===this._selectedItems&&(this.selectedItemsToConfirm=null)),this.ui.customButton.label=this.customLabel||"",this.ui.customButton.element.title=this.customHover||"",i.inputBox||(this.ui.list.domFocus(),this.canSelectMany&&this.ui.list.focus(an.First)),this.keepScrollPosition&&(this.scrollTop=e)}focus(e){this.ui.list.focus(e),this.canSelectMany&&this.ui.list.domFocus()}accept(e){e&&!this._canAcceptInBackground||this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(e??!1))}};L2.DEFAULT_ARIA_LABEL=v("quickInputBox.ariaLabel","Type to narrow down results.");let uP=L2,V4e=class extends dP{constructor(){super(...arguments),this._value="",this.valueSelectionUpdated=!0,this._password=!1,this.onDidValueChangeEmitter=this._register(new Y),this.onDidAcceptEmitter=this._register(new Y),this.type="inputBox",this.onDidChangeValue=this.onDidValueChangeEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event}get value(){return this._value}set value(e){this._value=e||"",this.update()}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get password(){return this._password}set password(e){this._password=e,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(e=>{e!==this.value&&(this._value=e,this.onDidValueChangeEmitter.fire(e))})),this.visibleDisposables.add(this.ui.onDidAccept(()=>this.onDidAcceptEmitter.fire())),this.valueSelectionUpdated=!0),super.show()}update(){if(!this.visible)return;this.ui.container.classList.remove("hidden-input");const e={title:!!this.title||!!this.step||!!this.titleButtons.length,description:!!this.description||!!this.step,inputBox:!0,message:!0,progressBar:!0};this.ui.setVisibilities(e),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||""),this.ui.inputBox.password!==this.password&&(this.ui.inputBox.password=this.password)}},Q6=class extends aS{constructor(e,t){super("element",!1,i=>this.getOverrideOptions(i),e,t)}getOverrideOptions(e){const t=(Ys(e.content)?e.content.textContent??"":typeof e.content=="string"?e.content:e.content.value).includes(`
`);return{persistence:{hideOnKeyDown:!1},appearance:{showHoverHint:t,skipFadeInAnimation:!0}}}};Q6=P4e([xse(0,Ht),xse(1,qh)],Q6);ue.white.toString(),ue.white.toString();class hP extends X{get onDidClick(){return this._onDidClick.event}constructor(e,t){super(),this._label="",this._onDidClick=this._register(new Y),this._onDidEscape=this._register(new Y),this.options=t,this._element=document.createElement("a"),this._element.classList.add("monaco-button"),this._element.tabIndex=0,this._element.setAttribute("role","button"),this._element.classList.toggle("secondary",!!t.secondary);const i=t.secondary?t.buttonSecondaryBackground:t.buttonBackground,n=t.secondary?t.buttonSecondaryForeground:t.buttonForeground;this._element.style.color=n||"",this._element.style.backgroundColor=i||"",t.supportShortLabel&&(this._labelShortElement=document.createElement("div"),this._labelShortElement.classList.add("monaco-button-label-short"),this._element.appendChild(this._labelShortElement),this._labelElement=document.createElement("div"),this._labelElement.classList.add("monaco-button-label"),this._element.appendChild(this._labelElement),this._element.classList.add("monaco-text-button-with-short-label")),typeof t.title=="string"&&this.setTitle(t.title),typeof t.ariaLabel=="string"&&this._element.setAttribute("aria-label",t.ariaLabel),e.appendChild(this._element),this._register(Jo.addTarget(this._element)),[Le.CLICK,tn.Tap].forEach(s=>{this._register(se(this._element,s,r=>{if(!this.enabled){Jt.stop(r);return}this._onDidClick.fire(r)}))}),this._register(se(this._element,Le.KEY_DOWN,s=>{const r=new Zi(s);let a=!1;this.enabled&&(r.equals(3)||r.equals(10))?(this._onDidClick.fire(s),a=!0):r.equals(9)&&(this._onDidEscape.fire(s),this._element.blur(),a=!0),a&&Jt.stop(r,!0)})),this._register(se(this._element,Le.MOUSE_OVER,s=>{this._element.classList.contains("disabled")||this.updateBackground(!0)})),this._register(se(this._element,Le.MOUSE_OUT,s=>{this.updateBackground(!1)})),this.focusTracker=this._register(pu(this._element)),this._register(this.focusTracker.onDidFocus(()=>{this.enabled&&this.updateBackground(!0)})),this._register(this.focusTracker.onDidBlur(()=>{this.enabled&&this.updateBackground(!1)}))}dispose(){super.dispose(),this._element.remove()}getContentElements(e){const t=[];for(let i of dm(e))if(typeof i=="string"){if(i=i.trim(),i==="")continue;const n=document.createElement("span");n.textContent=i,t.push(n)}else t.push(i);return t}updateBackground(e){let t;this.options.secondary?t=e?this.options.buttonSecondaryHoverBackground:this.options.buttonSecondaryBackground:t=e?this.options.buttonHoverBackground:this.options.buttonBackground,t&&(this._element.style.backgroundColor=t)}get element(){return this._element}set label(e){var n;if(this._label===e||uu(this._label)&&uu(e)&&CAe(this._label,e))return;this._element.classList.add("monaco-text-button");const t=this.options.supportShortLabel?this._labelElement:this._element;if(uu(e)){const s=L4(e,{inline:!0});s.dispose();const r=(n=s.element.querySelector("p"))==null?void 0:n.innerHTML;if(r){const a=hce(r,{ADD_TAGS:["b","i","u","code","span"],ALLOWED_ATTR:["class"],RETURN_TRUSTED_TYPE:!0});t.innerHTML=a}else Co(t)}else this.options.supportIcons?Co(t,...this.getContentElements(e)):t.textContent=e;let i="";typeof this.options.title=="string"?i=this.options.title:this.options.title&&(i=NAe(e)),this.setTitle(i),typeof this.options.ariaLabel=="string"?this._element.setAttribute("aria-label",this.options.ariaLabel):this.options.ariaLabel&&this._element.setAttribute("aria-label",i),this._label=e}get label(){return this._label}set icon(e){this._element.classList.add(...ut.asClassNameArray(e))}set enabled(e){e?(this._element.classList.remove("disabled"),this._element.setAttribute("aria-disabled",String(!1)),this._element.tabIndex=0):(this._element.classList.add("disabled"),this._element.setAttribute("aria-disabled",String(!0)))}get enabled(){return!this._element.classList.contains("disabled")}setTitle(e){!this._hover&&e!==""?this._hover=this._register(Su().setupManagedHover(this.options.hoverDelegate??sa("mouse"),this._element,e)):this._hover&&this._hover.update(e)}}class J6{constructor(e,t,i){this.options=t,this.styles=i,this.count=0,this.element=ge(e,xe(".monaco-count-badge")),this.countFormat=this.options.countFormat||"{0}",this.titleFormat=this.options.titleFormat||"",this.setCount(this.options.count||0)}setCount(e){this.count=e,this.render()}setTitleFormat(e){this.titleFormat=e,this.render()}render(){this.element.textContent=sC(this.countFormat,this.count),this.element.title=sC(this.titleFormat,this.count),this.element.style.backgroundColor=this.styles.badgeBackground??"",this.element.style.color=this.styles.badgeForeground??"",this.styles.badgeBorder&&(this.element.style.border=`1px solid ${this.styles.badgeBorder}`)}}const kse="done",Dse="active",P7="infinite",O7="infinite-long-running",Ese="discrete",x2=class x2 extends X{constructor(e,t){super(),this.progressSignal=this._register(new Xs),this.workedVal=0,this.showDelayedScheduler=this._register(new Oi(()=>Za(this.element),0)),this.longRunningScheduler=this._register(new Oi(()=>this.infiniteLongRunning(),x2.LONG_RUNNING_INFINITE_THRESHOLD)),this.create(e,t)}create(e,t){this.element=document.createElement("div"),this.element.classList.add("monaco-progress-container"),this.element.setAttribute("role","progressbar"),this.element.setAttribute("aria-valuemin","0"),e.appendChild(this.element),this.bit=document.createElement("div"),this.bit.classList.add("progress-bit"),this.bit.style.backgroundColor=(t==null?void 0:t.progressBarBackground)||"#0E70C0",this.element.appendChild(this.bit)}off(){this.bit.style.width="inherit",this.bit.style.opacity="1",this.element.classList.remove(Dse,P7,O7,Ese),this.workedVal=0,this.totalWork=void 0,this.longRunningScheduler.cancel(),this.progressSignal.clear()}stop(){return this.doDone(!1)}doDone(e){return this.element.classList.add(kse),this.element.classList.contains(P7)?(this.bit.style.opacity="0",e?setTimeout(()=>this.off(),200):this.off()):(this.bit.style.width="inherit",e?setTimeout(()=>this.off(),200):this.off()),this}infinite(){return this.bit.style.width="2%",this.bit.style.opacity="1",this.element.classList.remove(Ese,kse,O7),this.element.classList.add(Dse,P7),this.longRunningScheduler.schedule(),this}infiniteLongRunning(){this.element.classList.add(O7)}getContainer(){return this.element}};x2.LONG_RUNNING_INFINITE_THRESHOLD=1e4;let ez=x2;const z4e=v("caseDescription","Match Case"),U4e=v("wordsDescription","Match Whole Word"),$4e=v("regexDescription","Use Regular Expression");class phe extends t0{constructor(e){super({icon:Se.caseSensitive,title:z4e+e.appendTitle,isChecked:e.isChecked,hoverDelegate:e.hoverDelegate??sa("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class mhe extends t0{constructor(e){super({icon:Se.wholeWord,title:U4e+e.appendTitle,isChecked:e.isChecked,hoverDelegate:e.hoverDelegate??sa("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class _he extends t0{constructor(e){super({icon:Se.regex,title:$4e+e.appendTitle,isChecked:e.isChecked,hoverDelegate:e.hoverDelegate??sa("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class j4e{constructor(e,t=0,i=e.length,n=t-1){this.items=e,this.start=t,this.end=i,this.index=n}current(){return this.index===this.start-1||this.index===this.end?null:this.items[this.index]}next(){return this.index=Math.min(this.index+1,this.end),this.current()}previous(){return this.index=Math.max(this.index-1,this.start-1),this.current()}first(){return this.index=this.start,this.current()}last(){return this.index=this.end-1,this.current()}}class q4e{constructor(e=[],t=10){this._initialize(e),this._limit=t,this._onChange()}getHistory(){return this._elements}add(e){this._history.delete(e),this._history.add(e),this._onChange()}next(){return this._navigator.next()}previous(){return this._currentPosition()!==0?this._navigator.previous():null}current(){return this._navigator.current()}first(){return this._navigator.first()}last(){return this._navigator.last()}isLast(){return this._currentPosition()>=this._elements.length-1}isNowhere(){return this._navigator.current()===null}has(e){return this._history.has(e)}_onChange(){this._reduceToLimit();const e=this._elements;this._navigator=new j4e(e,0,e.length,e.length)}_reduceToLimit(){const e=this._elements;e.length>this._limit&&this._initialize(e.slice(e.length-this._limit))}_currentPosition(){const e=this._navigator.current();return e?this._elements.indexOf(e):-1}_initialize(e){this._history=new Set;for(const t of e)this._history.add(t)}get _elements(){const e=[];return this._history.forEach(t=>e.push(t)),e}}const bx=xe;class K4e extends Zl{constructor(e,t,i){super(),this.state="idle",this.maxHeight=Number.POSITIVE_INFINITY,this._onDidChange=this._register(new Y),this.onDidChange=this._onDidChange.event,this._onDidHeightChange=this._register(new Y),this.onDidHeightChange=this._onDidHeightChange.event,this.contextViewProvider=t,this.options=i,this.message=null,this.placeholder=this.options.placeholder||"",this.tooltip=this.options.tooltip??(this.placeholder||""),this.ariaLabel=this.options.ariaLabel||"",this.options.validationOptions&&(this.validation=this.options.validationOptions.validation),this.element=ge(e,bx(".monaco-inputbox.idle"));const n=this.options.flexibleHeight?"textarea":"input",s=ge(this.element,bx(".ibwrapper"));if(this.input=ge(s,bx(n+".input.empty")),this.input.setAttribute("autocorrect","off"),this.input.setAttribute("autocapitalize","off"),this.input.setAttribute("spellcheck","false"),this.onfocus(this.input,()=>this.element.classList.add("synthetic-focus")),this.onblur(this.input,()=>this.element.classList.remove("synthetic-focus")),this.options.flexibleHeight){this.maxHeight=typeof this.options.flexibleMaxHeight=="number"?this.options.flexibleMaxHeight:Number.POSITIVE_INFINITY,this.mirror=ge(s,bx("div.mirror")),this.mirror.innerText="",this.scrollableElement=new Ude(this.element,{vertical:1}),this.options.flexibleWidth&&(this.input.setAttribute("wrap","off"),this.mirror.style.whiteSpace="pre",this.mirror.style.wordWrap="initial"),ge(e,this.scrollableElement.getDomNode()),this._register(this.scrollableElement),this._register(this.scrollableElement.onScroll(l=>this.input.scrollTop=l.scrollTop));const r=this._register(new Zt(e.ownerDocument,"selectionchange")),a=Ee.filter(r.event,()=>{const l=e.ownerDocument.getSelection();return(l==null?void 0:l.anchorNode)===s});this._register(a(this.updateScrollDimensions,this)),this._register(this.onDidHeightChange(this.updateScrollDimensions,this))}else this.input.type=this.options.type||"text",this.input.setAttribute("wrap","off");this.ariaLabel&&this.input.setAttribute("aria-label",this.ariaLabel),this.placeholder&&!this.options.showPlaceholderOnFocus&&this.setPlaceHolder(this.placeholder),this.tooltip&&this.setTooltip(this.tooltip),this.oninput(this.input,()=>this.onValueChange()),this.onblur(this.input,()=>this.onBlur()),this.onfocus(this.input,()=>this.onFocus()),this._register(this.ignoreGesture(this.input)),setTimeout(()=>this.updateMirror(),0),this.options.actions&&(this.actionbar=this._register(new zl(this.element)),this.actionbar.push(this.options.actions,{icon:!0,label:!1})),this.applyStyles()}onBlur(){this._hideMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder","")}onFocus(){this._showMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder",this.placeholder||"")}setPlaceHolder(e){this.placeholder=e,this.input.setAttribute("placeholder",e)}setTooltip(e){this.tooltip=e,this.hover?this.hover.update(e):this.hover=this._register(Su().setupManagedHover(sa("mouse"),this.input,e))}get inputElement(){return this.input}get value(){return this.input.value}set value(e){this.input.value!==e&&(this.input.value=e,this.onValueChange())}get height(){return typeof this.cachedHeight=="number"?this.cachedHeight:Jf(this.element)}focus(){this.input.focus()}blur(){this.input.blur()}hasFocus(){return YF(this.input)}select(e=null){this.input.select(),e&&(this.input.setSelectionRange(e.start,e.end),e.end===this.input.value.length&&(this.input.scrollLeft=this.input.scrollWidth))}isSelectionAtEnd(){return this.input.selectionEnd===this.input.value.length&&this.input.selectionStart===this.input.selectionEnd}getSelection(){const e=this.input.selectionStart;if(e===null)return null;const t=this.input.selectionEnd??e;return{start:e,end:t}}enable(){this.input.removeAttribute("disabled")}disable(){this.blur(),this.input.disabled=!0,this._hideMessage()}set paddingRight(e){this.input.style.width=`calc(100% - ${e}px)`,this.mirror&&(this.mirror.style.paddingRight=e+"px")}updateScrollDimensions(){if(typeof this.cachedContentHeight!="number"||typeof this.cachedHeight!="number"||!this.scrollableElement)return;const e=this.cachedContentHeight,t=this.cachedHeight,i=this.input.scrollTop;this.scrollableElement.setScrollDimensions({scrollHeight:e,height:t}),this.scrollableElement.setScrollPosition({scrollTop:i})}showMessage(e,t){if(this.state==="open"&&el(this.message,e))return;this.message=e,this.element.classList.remove("idle"),this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add(this.classForType(e.type));const i=this.stylesForType(this.message.type);this.element.style.border=`1px solid ${fg(i.border,"transparent")}`,this.message.content&&(this.hasFocus()||t)&&this._showMessage()}hideMessage(){this.message=null,this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add("idle"),this._hideMessage(),this.applyStyles()}validate(){let e=null;return this.validation&&(e=this.validation(this.value),e?(this.inputElement.setAttribute("aria-invalid","true"),this.showMessage(e)):this.inputElement.hasAttribute("aria-invalid")&&(this.inputElement.removeAttribute("aria-invalid"),this.hideMessage())),e==null?void 0:e.type}stylesForType(e){const t=this.options.inputBoxStyles;switch(e){case 1:return{border:t.inputValidationInfoBorder,background:t.inputValidationInfoBackground,foreground:t.inputValidationInfoForeground};case 2:return{border:t.inputValidationWarningBorder,background:t.inputValidationWarningBackground,foreground:t.inputValidationWarningForeground};default:return{border:t.inputValidationErrorBorder,background:t.inputValidationErrorBackground,foreground:t.inputValidationErrorForeground}}}classForType(e){switch(e){case 1:return"info";case 2:return"warning";default:return"error"}}_showMessage(){if(!this.contextViewProvider||!this.message)return;let e;const t=()=>e.style.width=qa(this.element)+"px";this.contextViewProvider.showContextView({getAnchor:()=>this.element,anchorAlignment:1,render:n=>{if(!this.message)return null;e=ge(n,bx(".monaco-inputbox-container")),t();const s={inline:!0,className:"monaco-inputbox-message"},r=this.message.formatContent?BMe(this.message.content,s):FMe(this.message.content,s);r.classList.add(this.classForType(this.message.type));const a=this.stylesForType(this.message.type);return r.style.backgroundColor=a.background??"",r.style.color=a.foreground??"",r.style.border=a.border?`1px solid ${a.border}`:"",ge(e,r),null},onHide:()=>{this.state="closed"},layout:t});let i;this.message.type===3?i=v("alertErrorMessage","Error: {0}",this.message.content):this.message.type===2?i=v("alertWarningMessage","Warning: {0}",this.message.content):i=v("alertInfoMessage","Info: {0}",this.message.content),ta(i),this.state="open"}_hideMessage(){this.contextViewProvider&&(this.state==="open"&&this.contextViewProvider.hideContextView(),this.state="idle")}onValueChange(){this._onDidChange.fire(this.value),this.validate(),this.updateMirror(),this.input.classList.toggle("empty",!this.value),this.state==="open"&&this.contextViewProvider&&this.contextViewProvider.layout()}updateMirror(){if(!this.mirror)return;const e=this.value,i=e.charCodeAt(e.length-1)===10?" ":"";(e+i).replace(/\u000c/g,"")?this.mirror.textContent=e+i:this.mirror.innerText="",this.layout()}applyStyles(){const e=this.options.inputBoxStyles,t=e.inputBackground??"",i=e.inputForeground??"",n=e.inputBorder??"";this.element.style.backgroundColor=t,this.element.style.color=i,this.input.style.backgroundColor="inherit",this.input.style.color=i,this.element.style.border=`1px solid ${fg(n,"transparent")}`}layout(){if(!this.mirror)return;const e=this.cachedContentHeight;this.cachedContentHeight=Jf(this.mirror),e!==this.cachedContentHeight&&(this.cachedHeight=Math.min(this.cachedContentHeight,this.maxHeight),this.input.style.height=this.cachedHeight+"px",this._onDidHeightChange.fire(this.cachedContentHeight))}insertAtCursor(e){const t=this.inputElement,i=t.selectionStart,n=t.selectionEnd,s=t.value;i!==null&&n!==null&&(this.value=s.substr(0,i)+e+s.substr(n),t.setSelectionRange(i+1,i+1),this.layout())}dispose(){var e;this._hideMessage(),this.message=null,(e=this.actionbar)==null||e.dispose(),super.dispose()}}class vhe extends K4e{constructor(e,t,i){const n=v({key:"history.inputbox.hint.suffix.noparens",comment:['Text is the suffix of an input field placeholder coming after the action the input field performs, this will be used when the input field ends in a closing parenthesis ")", for example "Filter (e.g. text, !exclude)". The character inserted into the final string is  to represent the up and down arrow keys.']}," or {0} for history",""),s=v({key:"history.inputbox.hint.suffix.inparens",comment:['Text is the suffix of an input field placeholder coming after the action the input field performs, this will be used when the input field does NOT end in a closing parenthesis (eg. "Find"). The character inserted into the final string is  to represent the up and down arrow keys.']}," ({0} for history)","");super(e,t,i),this._onDidFocus=this._register(new Y),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new Y),this.onDidBlur=this._onDidBlur.event,this.history=new q4e(i.history,100);const r=()=>{if(i.showHistoryHint&&i.showHistoryHint()&&!this.placeholder.endsWith(n)&&!this.placeholder.endsWith(s)&&this.history.getHistory().length){const a=this.placeholder.endsWith(")")?n:s,l=this.placeholder+a;i.showPlaceholderOnFocus&&!YF(this.input)?this.placeholder=l:this.setPlaceHolder(l)}};this.observer=new MutationObserver((a,l)=>{a.forEach(c=>{c.target.textContent||r()})}),this.observer.observe(this.input,{attributeFilter:["class"]}),this.onfocus(this.input,()=>r()),this.onblur(this.input,()=>{const a=l=>{if(this.placeholder.endsWith(l)){const c=this.placeholder.slice(0,this.placeholder.length-l.length);return i.showPlaceholderOnFocus?this.placeholder=c:this.setPlaceHolder(c),!0}else return!1};a(s)||a(n)})}dispose(){super.dispose(),this.observer&&(this.observer.disconnect(),this.observer=void 0)}addToHistory(e){this.value&&(e||this.value!==this.getCurrentValue())&&this.history.add(this.value)}isAtLastInHistory(){return this.history.isLast()}isNowhereInHistory(){return this.history.isNowhere()}showNextValue(){this.history.has(this.value)||this.addToHistory();let e=this.getNextValue();e&&(e=e===this.value?this.getNextValue():e),this.value=e??"",Oh(this.value?this.value:v("clearedInput","Cleared Input"))}showPreviousValue(){this.history.has(this.value)||this.addToHistory();let e=this.getPreviousValue();e&&(e=e===this.value?this.getPreviousValue():e),e&&(this.value=e,Oh(this.value))}setPlaceHolder(e){super.setPlaceHolder(e),this.setTooltip(e)}onBlur(){super.onBlur(),this._onDidBlur.fire()}onFocus(){super.onFocus(),this._onDidFocus.fire()}getCurrentValue(){let e=this.history.current();return e||(e=this.history.last(),this.history.next()),e}getPreviousValue(){return this.history.previous()||this.history.first()}getNextValue(){return this.history.next()}}const G4e=v("defaultLabel","input");class bhe extends Zl{constructor(e,t,i){super(),this.fixFocusOnOptionClickEnabled=!0,this.imeSessionInProgress=!1,this.additionalTogglesDisposables=this._register(new Xs),this.additionalToggles=[],this._onDidOptionChange=this._register(new Y),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new Y),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new Y),this.onMouseDown=this._onMouseDown.event,this._onInput=this._register(new Y),this._onKeyUp=this._register(new Y),this._onCaseSensitiveKeyDown=this._register(new Y),this.onCaseSensitiveKeyDown=this._onCaseSensitiveKeyDown.event,this._onRegexKeyDown=this._register(new Y),this.onRegexKeyDown=this._onRegexKeyDown.event,this._lastHighlightFindOptions=0,this.placeholder=i.placeholder||"",this.validation=i.validation,this.label=i.label||G4e,this.showCommonFindToggles=!!i.showCommonFindToggles;const n=i.appendCaseSensitiveLabel||"",s=i.appendWholeWordsLabel||"",r=i.appendRegexLabel||"",a=i.history||[],l=!!i.flexibleHeight,c=!!i.flexibleWidth,u=i.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new vhe(this.domNode,t,{placeholder:this.placeholder||"",ariaLabel:this.label||"",validationOptions:{validation:this.validation},history:a,showHistoryHint:i.showHistoryHint,flexibleHeight:l,flexibleWidth:c,flexibleMaxHeight:u,inputBoxStyles:i.inputBoxStyles}));const f=this._register(gS());if(this.showCommonFindToggles){this.regex=this._register(new _he({appendTitle:r,isChecked:!1,hoverDelegate:f,...i.toggleStyles})),this._register(this.regex.onChange(p=>{this._onDidOptionChange.fire(p),!p&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.regex.onKeyDown(p=>{this._onRegexKeyDown.fire(p)})),this.wholeWords=this._register(new mhe({appendTitle:s,isChecked:!1,hoverDelegate:f,...i.toggleStyles})),this._register(this.wholeWords.onChange(p=>{this._onDidOptionChange.fire(p),!p&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this.caseSensitive=this._register(new phe({appendTitle:n,isChecked:!1,hoverDelegate:f,...i.toggleStyles})),this._register(this.caseSensitive.onChange(p=>{this._onDidOptionChange.fire(p),!p&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.caseSensitive.onKeyDown(p=>{this._onCaseSensitiveKeyDown.fire(p)}));const g=[this.caseSensitive.domNode,this.wholeWords.domNode,this.regex.domNode];this.onkeydown(this.domNode,p=>{if(p.equals(15)||p.equals(17)||p.equals(9)){const _=g.indexOf(this.domNode.ownerDocument.activeElement);if(_>=0){let b=-1;p.equals(17)?b=(_+1)%g.length:p.equals(15)&&(_===0?b=g.length-1:b=_-1),p.equals(9)?(g[_].blur(),this.inputBox.focus()):b>=0&&g[b].focus(),Jt.stop(p,!0)}}})}this.controls=document.createElement("div"),this.controls.className="controls",this.controls.style.display=this.showCommonFindToggles?"":"none",this.caseSensitive&&this.controls.append(this.caseSensitive.domNode),this.wholeWords&&this.controls.appendChild(this.wholeWords.domNode),this.regex&&this.controls.appendChild(this.regex.domNode),this.setAdditionalToggles(i==null?void 0:i.additionalToggles),this.controls&&this.domNode.appendChild(this.controls),e==null||e.appendChild(this.domNode),this._register(se(this.inputBox.inputElement,"compositionstart",g=>{this.imeSessionInProgress=!0})),this._register(se(this.inputBox.inputElement,"compositionend",g=>{this.imeSessionInProgress=!1,this._onInput.fire()})),this.onkeydown(this.inputBox.inputElement,g=>this._onKeyDown.fire(g)),this.onkeyup(this.inputBox.inputElement,g=>this._onKeyUp.fire(g)),this.oninput(this.inputBox.inputElement,g=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,g=>this._onMouseDown.fire(g))}get onDidChange(){return this.inputBox.onDidChange}layout(e){this.inputBox.layout(),this.updateInputBoxPadding(e.collapsedFindWidget)}enable(){var e,t,i;this.domNode.classList.remove("disabled"),this.inputBox.enable(),(e=this.regex)==null||e.enable(),(t=this.wholeWords)==null||t.enable(),(i=this.caseSensitive)==null||i.enable();for(const n of this.additionalToggles)n.enable()}disable(){var e,t,i;this.domNode.classList.add("disabled"),this.inputBox.disable(),(e=this.regex)==null||e.disable(),(t=this.wholeWords)==null||t.disable(),(i=this.caseSensitive)==null||i.disable();for(const n of this.additionalToggles)n.disable()}setFocusInputOnOptionClick(e){this.fixFocusOnOptionClickEnabled=e}setEnabled(e){e?this.enable():this.disable()}setAdditionalToggles(e){for(const t of this.additionalToggles)t.domNode.remove();this.additionalToggles=[],this.additionalTogglesDisposables.value=new le;for(const t of e??[])this.additionalTogglesDisposables.value.add(t),this.controls.appendChild(t.domNode),this.additionalTogglesDisposables.value.add(t.onChange(i=>{this._onDidOptionChange.fire(i),!i&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus()})),this.additionalToggles.push(t);this.additionalToggles.length>0&&(this.controls.style.display=""),this.updateInputBoxPadding()}updateInputBoxPadding(e=!1){var t,i,n;e?this.inputBox.paddingRight=0:this.inputBox.paddingRight=(((t=this.caseSensitive)==null?void 0:t.width())??0)+(((i=this.wholeWords)==null?void 0:i.width())??0)+(((n=this.regex)==null?void 0:n.width())??0)+this.additionalToggles.reduce((s,r)=>s+r.width(),0)}getValue(){return this.inputBox.value}setValue(e){this.inputBox.value!==e&&(this.inputBox.value=e)}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getCaseSensitive(){var e;return((e=this.caseSensitive)==null?void 0:e.checked)??!1}setCaseSensitive(e){this.caseSensitive&&(this.caseSensitive.checked=e)}getWholeWords(){var e;return((e=this.wholeWords)==null?void 0:e.checked)??!1}setWholeWords(e){this.wholeWords&&(this.wholeWords.checked=e)}getRegex(){var e;return((e=this.regex)==null?void 0:e.checked)??!1}setRegex(e){this.regex&&(this.regex.checked=e,this.validate())}focusOnCaseSensitive(){var e;(e=this.caseSensitive)==null||e.focus()}highlightFindOptions(){this.domNode.classList.remove("highlight-"+this._lastHighlightFindOptions),this._lastHighlightFindOptions=1-this._lastHighlightFindOptions,this.domNode.classList.add("highlight-"+this._lastHighlightFindOptions)}validate(){this.inputBox.validate()}showMessage(e){this.inputBox.showMessage(e)}clearMessage(){this.inputBox.hideMessage()}}const Y4e=xe;class Z4e extends X{constructor(e,t,i){super(),this.parent=e,this.onKeyDown=s=>Bn(this.findInput.inputBox.inputElement,Le.KEY_DOWN,s),this.onDidChange=s=>this.findInput.onDidChange(s),this.container=ge(this.parent,Y4e(".quick-input-box")),this.findInput=this._register(new bhe(this.container,void 0,{label:"",inputBoxStyles:t,toggleStyles:i}));const n=this.findInput.inputBox.inputElement;n.role="combobox",n.ariaHasPopup="menu",n.ariaAutoComplete="list",n.ariaExpanded="true"}get value(){return this.findInput.getValue()}set value(e){this.findInput.setValue(e)}select(e=null){this.findInput.inputBox.select(e)}getSelection(){return this.findInput.inputBox.getSelection()}isSelectionAtEnd(){return this.findInput.inputBox.isSelectionAtEnd()}get placeholder(){return this.findInput.inputBox.inputElement.getAttribute("placeholder")||""}set placeholder(e){this.findInput.inputBox.setPlaceHolder(e)}get password(){return this.findInput.inputBox.inputElement.type==="password"}set password(e){this.findInput.inputBox.inputElement.type=e?"password":"text"}set enabled(e){this.findInput.inputBox.inputElement.toggleAttribute("readonly",!e)}set toggles(e){this.findInput.setAdditionalToggles(e)}setAttribute(e,t){this.findInput.inputBox.inputElement.setAttribute(e,t)}showDecoration(e){e===hs.Ignore?this.findInput.clearMessage():this.findInput.showMessage({type:e===hs.Info?1:e===hs.Warning?2:3,content:""})}stylesForType(e){return this.findInput.inputBox.stylesForType(e===hs.Info?1:e===hs.Warning?2:3)}setFocus(){this.findInput.focus()}layout(){this.findInput.inputBox.layout()}}class X4e{get templateId(){return this.renderer.templateId}constructor(e,t){this.renderer=e,this.modelProvider=t}renderTemplate(e){return{data:this.renderer.renderTemplate(e),disposable:X.None}}renderElement(e,t,i,n){var l;if((l=i.disposable)==null||l.dispose(),!i.data)return;const s=this.modelProvider();if(s.isResolved(e))return this.renderer.renderElement(s.get(e),e,i.data,n);const r=new An,a=s.resolve(e,r.token);i.disposable={dispose:()=>r.cancel()},this.renderer.renderPlaceholder(e,i.data),a.then(c=>this.renderer.renderElement(c,e,i.data,n))}disposeTemplate(e){e.disposable&&(e.disposable.dispose(),e.disposable=void 0),e.data&&(this.renderer.disposeTemplate(e.data),e.data=void 0)}}class Q4e{constructor(e,t){this.modelProvider=e,this.accessibilityProvider=t}getWidgetAriaLabel(){return this.accessibilityProvider.getWidgetAriaLabel()}getAriaLabel(e){const t=this.modelProvider();return t.isResolved(e)?this.accessibilityProvider.getAriaLabel(t.get(e)):null}}function J4e(o,e){return{...e,accessibilityProvider:e.accessibilityProvider&&new Q4e(o,e.accessibilityProvider)}}class e5e{constructor(e,t,i,n,s={}){const r=()=>this.model,a=n.map(l=>new X4e(l,r));this.list=new Xl(e,t,i,a,J4e(r,s))}updateOptions(e){this.list.updateOptions(e)}getHTMLElement(){return this.list.getHTMLElement()}get onDidFocus(){return this.list.onDidFocus}get widget(){return this.list}get onDidDispose(){return this.list.onDidDispose}get onMouseDblClick(){return Ee.map(this.list.onMouseDblClick,({element:e,index:t,browserEvent:i})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:i}))}get onPointer(){return Ee.map(this.list.onPointer,({element:e,index:t,browserEvent:i})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:i}))}get onDidChangeSelection(){return Ee.map(this.list.onDidChangeSelection,({elements:e,indexes:t,browserEvent:i})=>({elements:e.map(n=>this._model.get(n)),indexes:t,browserEvent:i}))}get model(){return this._model}set model(e){this._model=e,this.list.splice(0,this.list.length,va(e.length))}getFocus(){return this.list.getFocus()}getSelection(){return this.list.getSelection()}getSelectedElements(){return this.getSelection().map(e=>this.model.get(e))}style(e){this.list.style(e)}dispose(){this.list.dispose()}}var i0=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};const t5e=!1;var fP;(function(o){o.North="north",o.South="south",o.East="east",o.West="west"})(fP||(fP={}));let i5e=4;const n5e=new Y;let s5e=300;const o5e=new Y;class eG{constructor(e){this.el=e,this.disposables=new le}get onPointerMove(){return this.disposables.add(new Zt(at(this.el),"mousemove")).event}get onPointerUp(){return this.disposables.add(new Zt(at(this.el),"mouseup")).event}dispose(){this.disposables.dispose()}}i0([gs],eG.prototype,"onPointerMove",null);i0([gs],eG.prototype,"onPointerUp",null);class tG{get onPointerMove(){return this.disposables.add(new Zt(this.el,tn.Change)).event}get onPointerUp(){return this.disposables.add(new Zt(this.el,tn.End)).event}constructor(e){this.el=e,this.disposables=new le}dispose(){this.disposables.dispose()}}i0([gs],tG.prototype,"onPointerMove",null);i0([gs],tG.prototype,"onPointerUp",null);class gP{get onPointerMove(){return this.factory.onPointerMove}get onPointerUp(){return this.factory.onPointerUp}constructor(e){this.factory=e}dispose(){}}i0([gs],gP.prototype,"onPointerMove",null);i0([gs],gP.prototype,"onPointerUp",null);const Ise="pointer-events-disabled";class Yo extends X{get state(){return this._state}get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}set state(e){this._state!==e&&(this.el.classList.toggle("disabled",e===0),this.el.classList.toggle("minimum",e===1),this.el.classList.toggle("maximum",e===2),this._state=e,this.onDidEnablementChange.fire(e))}set orthogonalStartSash(e){if(this._orthogonalStartSash!==e){if(this.orthogonalStartDragHandleDisposables.clear(),this.orthogonalStartSashDisposables.clear(),e){const t=i=>{this.orthogonalStartDragHandleDisposables.clear(),i!==0&&(this._orthogonalStartDragHandle=ge(this.el,xe(".orthogonal-drag-handle.start")),this.orthogonalStartDragHandleDisposables.add(it(()=>this._orthogonalStartDragHandle.remove())),this.orthogonalStartDragHandleDisposables.add(new Zt(this._orthogonalStartDragHandle,"mouseenter")).event(()=>Yo.onMouseEnter(e),void 0,this.orthogonalStartDragHandleDisposables),this.orthogonalStartDragHandleDisposables.add(new Zt(this._orthogonalStartDragHandle,"mouseleave")).event(()=>Yo.onMouseLeave(e),void 0,this.orthogonalStartDragHandleDisposables))};this.orthogonalStartSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalStartSash=e}}set orthogonalEndSash(e){if(this._orthogonalEndSash!==e){if(this.orthogonalEndDragHandleDisposables.clear(),this.orthogonalEndSashDisposables.clear(),e){const t=i=>{this.orthogonalEndDragHandleDisposables.clear(),i!==0&&(this._orthogonalEndDragHandle=ge(this.el,xe(".orthogonal-drag-handle.end")),this.orthogonalEndDragHandleDisposables.add(it(()=>this._orthogonalEndDragHandle.remove())),this.orthogonalEndDragHandleDisposables.add(new Zt(this._orthogonalEndDragHandle,"mouseenter")).event(()=>Yo.onMouseEnter(e),void 0,this.orthogonalEndDragHandleDisposables),this.orthogonalEndDragHandleDisposables.add(new Zt(this._orthogonalEndDragHandle,"mouseleave")).event(()=>Yo.onMouseLeave(e),void 0,this.orthogonalEndDragHandleDisposables))};this.orthogonalEndSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalEndSash=e}}constructor(e,t,i){super(),this.hoverDelay=s5e,this.hoverDelayer=this._register(new xc(this.hoverDelay)),this._state=3,this.onDidEnablementChange=this._register(new Y),this._onDidStart=this._register(new Y),this._onDidChange=this._register(new Y),this._onDidReset=this._register(new Y),this._onDidEnd=this._register(new Y),this.orthogonalStartSashDisposables=this._register(new le),this.orthogonalStartDragHandleDisposables=this._register(new le),this.orthogonalEndSashDisposables=this._register(new le),this.orthogonalEndDragHandleDisposables=this._register(new le),this.onDidStart=this._onDidStart.event,this.onDidChange=this._onDidChange.event,this.onDidReset=this._onDidReset.event,this.onDidEnd=this._onDidEnd.event,this.linkedSash=void 0,this.el=ge(e,xe(".monaco-sash")),i.orthogonalEdge&&this.el.classList.add(`orthogonal-edge-${i.orthogonalEdge}`),Kt&&this.el.classList.add("mac");const n=this._register(new Zt(this.el,"mousedown")).event;this._register(n(f=>this.onPointerStart(f,new eG(e)),this));const s=this._register(new Zt(this.el,"dblclick")).event;this._register(s(this.onPointerDoublePress,this));const r=this._register(new Zt(this.el,"mouseenter")).event;this._register(r(()=>Yo.onMouseEnter(this)));const a=this._register(new Zt(this.el,"mouseleave")).event;this._register(a(()=>Yo.onMouseLeave(this))),this._register(Jo.addTarget(this.el));const l=this._register(new Zt(this.el,tn.Start)).event;this._register(l(f=>this.onPointerStart(f,new tG(this.el)),this));const c=this._register(new Zt(this.el,tn.Tap)).event;let u;this._register(c(f=>{if(u){clearTimeout(u),u=void 0,this.onPointerDoublePress(f);return}clearTimeout(u),u=setTimeout(()=>u=void 0,250)},this)),typeof i.size=="number"?(this.size=i.size,i.orientation===0?this.el.style.width=`${this.size}px`:this.el.style.height=`${this.size}px`):(this.size=i5e,this._register(n5e.event(f=>{this.size=f,this.layout()}))),this._register(o5e.event(f=>this.hoverDelay=f)),this.layoutProvider=t,this.orthogonalStartSash=i.orthogonalStartSash,this.orthogonalEndSash=i.orthogonalEndSash,this.orientation=i.orientation||0,this.orientation===1?(this.el.classList.add("horizontal"),this.el.classList.remove("vertical")):(this.el.classList.remove("horizontal"),this.el.classList.add("vertical")),this.el.classList.toggle("debug",t5e),this.layout()}onPointerStart(e,t){Jt.stop(e);let i=!1;if(!e.__orthogonalSashEvent){const _=this.getOrthogonalSash(e);_&&(i=!0,e.__orthogonalSashEvent=!0,_.onPointerStart(e,new gP(t)))}if(this.linkedSash&&!e.__linkedSashEvent&&(e.__linkedSashEvent=!0,this.linkedSash.onPointerStart(e,new gP(t))),!this.state)return;const n=this.el.ownerDocument.getElementsByTagName("iframe");for(const _ of n)_.classList.add(Ise);const s=e.pageX,r=e.pageY,a=e.altKey,l={startX:s,currentX:s,startY:r,currentY:r,altKey:a};this.el.classList.add("active"),this._onDidStart.fire(l);const c=$l(this.el),u=()=>{let _="";i?_="all-scroll":this.orientation===1?this.state===1?_="s-resize":this.state===2?_="n-resize":_=Kt?"row-resize":"ns-resize":this.state===1?_="e-resize":this.state===2?_="w-resize":_=Kt?"col-resize":"ew-resize",c.textContent=`* { cursor: ${_} !important; }`},f=new le;u(),i||this.onDidEnablementChange.event(u,null,f);const g=_=>{Jt.stop(_,!1);const b={startX:s,currentX:_.pageX,startY:r,currentY:_.pageY,altKey:a};this._onDidChange.fire(b)},p=_=>{Jt.stop(_,!1),c.remove(),this.el.classList.remove("active"),this._onDidEnd.fire(),f.dispose();for(const b of n)b.classList.remove(Ise)};t.onPointerMove(g,null,f),t.onPointerUp(p,null,f),f.add(t)}onPointerDoublePress(e){const t=this.getOrthogonalSash(e);t&&t._onDidReset.fire(),this.linkedSash&&this.linkedSash._onDidReset.fire(),this._onDidReset.fire()}static onMouseEnter(e,t=!1){e.el.classList.contains("active")?(e.hoverDelayer.cancel(),e.el.classList.add("hover")):e.hoverDelayer.trigger(()=>e.el.classList.add("hover"),e.hoverDelay).then(void 0,()=>{}),!t&&e.linkedSash&&Yo.onMouseEnter(e.linkedSash,!0)}static onMouseLeave(e,t=!1){e.hoverDelayer.cancel(),e.el.classList.remove("hover"),!t&&e.linkedSash&&Yo.onMouseLeave(e.linkedSash,!0)}clearSashHoverState(){Yo.onMouseLeave(this)}layout(){if(this.orientation===0){const e=this.layoutProvider;this.el.style.left=e.getVerticalSashLeft(this)-this.size/2+"px",e.getVerticalSashTop&&(this.el.style.top=e.getVerticalSashTop(this)+"px"),e.getVerticalSashHeight&&(this.el.style.height=e.getVerticalSashHeight(this)+"px")}else{const e=this.layoutProvider;this.el.style.top=e.getHorizontalSashTop(this)-this.size/2+"px",e.getHorizontalSashLeft&&(this.el.style.left=e.getHorizontalSashLeft(this)+"px"),e.getHorizontalSashWidth&&(this.el.style.width=e.getHorizontalSashWidth(this)+"px")}}getOrthogonalSash(e){const t=e.initialTarget??e.target;if(!(!t||!Ys(t))&&t.classList.contains("orthogonal-drag-handle"))return t.classList.contains("start")?this.orthogonalStartSash:this.orthogonalEndSash}dispose(){super.dispose(),this.el.remove()}}const r5e={separatorBorder:ue.transparent};class Che{set size(e){this._size=e}get size(){return this._size}get visible(){return typeof this._cachedVisibleSize>"u"}setVisible(e,t){var i,n;if(e!==this.visible){e?(this.size=Wr(this._cachedVisibleSize,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize=typeof t=="number"?t:this.size,this.size=0),this.container.classList.toggle("visible",e);try{(n=(i=this.view).setVisible)==null||n.call(i,e)}catch(s){console.error("Splitview: Failed to set visible view"),console.error(s)}}}get minimumSize(){return this.visible?this.view.minimumSize:0}get viewMinimumSize(){return this.view.minimumSize}get maximumSize(){return this.visible?this.view.maximumSize:0}get viewMaximumSize(){return this.view.maximumSize}get priority(){return this.view.priority}get proportionalLayout(){return this.view.proportionalLayout??!0}get snap(){return!!this.view.snap}set enabled(e){this.container.style.pointerEvents=e?"":"none"}constructor(e,t,i,n){this.container=e,this.view=t,this.disposable=n,this._cachedVisibleSize=void 0,typeof i=="number"?(this._size=i,this._cachedVisibleSize=void 0,e.classList.add("visible")):(this._size=0,this._cachedVisibleSize=i.cachedVisibleSize)}layout(e,t){this.layoutContainer(e);try{this.view.layout(this.size,e,t)}catch(i){console.error("Splitview: Failed to layout view"),console.error(i)}}dispose(){this.disposable.dispose()}}class a5e extends Che{layoutContainer(e){this.container.style.top=`${e}px`,this.container.style.height=`${this.size}px`}}class l5e extends Che{layoutContainer(e){this.container.style.left=`${e}px`,this.container.style.width=`${this.size}px`}}var Nf;(function(o){o[o.Idle=0]="Idle",o[o.Busy=1]="Busy"})(Nf||(Nf={}));var pP;(function(o){o.Distribute={type:"distribute"};function e(n){return{type:"split",index:n}}o.Split=e;function t(n){return{type:"auto",index:n}}o.Auto=t;function i(n){return{type:"invisible",cachedVisibleSize:n}}o.Invisible=i})(pP||(pP={}));class yhe extends X{get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}get startSnappingEnabled(){return this._startSnappingEnabled}get endSnappingEnabled(){return this._endSnappingEnabled}set orthogonalStartSash(e){for(const t of this.sashItems)t.sash.orthogonalStartSash=e;this._orthogonalStartSash=e}set orthogonalEndSash(e){for(const t of this.sashItems)t.sash.orthogonalEndSash=e;this._orthogonalEndSash=e}set startSnappingEnabled(e){this._startSnappingEnabled!==e&&(this._startSnappingEnabled=e,this.updateSashEnablement())}set endSnappingEnabled(e){this._endSnappingEnabled!==e&&(this._endSnappingEnabled=e,this.updateSashEnablement())}constructor(e,t={}){super(),this.size=0,this._contentSize=0,this.proportions=void 0,this.viewItems=[],this.sashItems=[],this.state=Nf.Idle,this._onDidSashChange=this._register(new Y),this._onDidSashReset=this._register(new Y),this._startSnappingEnabled=!0,this._endSnappingEnabled=!0,this.onDidSashChange=this._onDidSashChange.event,this.onDidSashReset=this._onDidSashReset.event,this.orientation=t.orientation??0,this.inverseAltBehavior=t.inverseAltBehavior??!1,this.proportionalLayout=t.proportionalLayout??!0,this.getSashOrthogonalSize=t.getSashOrthogonalSize,this.el=document.createElement("div"),this.el.classList.add("monaco-split-view2"),this.el.classList.add(this.orientation===0?"vertical":"horizontal"),e.appendChild(this.el),this.sashContainer=ge(this.el,xe(".sash-container")),this.viewContainer=xe(".split-view-container"),this.scrollable=this._register(new ZS({forceIntegerValues:!0,smoothScrollDuration:125,scheduleAtNextAnimationFrame:n=>al(at(this.el),n)})),this.scrollableElement=this._register(new b4(this.viewContainer,{vertical:this.orientation===0?t.scrollbarVisibility??1:2,horizontal:this.orientation===1?t.scrollbarVisibility??1:2},this.scrollable));const i=this._register(new Zt(this.viewContainer,"scroll")).event;this._register(i(n=>{const s=this.scrollableElement.getScrollPosition(),r=Math.abs(this.viewContainer.scrollLeft-s.scrollLeft)<=1?void 0:this.viewContainer.scrollLeft,a=Math.abs(this.viewContainer.scrollTop-s.scrollTop)<=1?void 0:this.viewContainer.scrollTop;(r!==void 0||a!==void 0)&&this.scrollableElement.setScrollPosition({scrollLeft:r,scrollTop:a})})),this.onDidScroll=this.scrollableElement.onScroll,this._register(this.onDidScroll(n=>{n.scrollTopChanged&&(this.viewContainer.scrollTop=n.scrollTop),n.scrollLeftChanged&&(this.viewContainer.scrollLeft=n.scrollLeft)})),ge(this.el,this.scrollableElement.getDomNode()),this.style(t.styles||r5e),t.descriptor&&(this.size=t.descriptor.size,t.descriptor.views.forEach((n,s)=>{const r=yr(n.visible)||n.visible?n.size:{type:"invisible",cachedVisibleSize:n.size},a=n.view;this.doAddView(a,r,s,!0)}),this._contentSize=this.viewItems.reduce((n,s)=>n+s.size,0),this.saveProportions())}style(e){e.separatorBorder.isTransparent()?(this.el.classList.remove("separator-border"),this.el.style.removeProperty("--separator-border")):(this.el.classList.add("separator-border"),this.el.style.setProperty("--separator-border",e.separatorBorder.toString()))}addView(e,t,i=this.viewItems.length,n){this.doAddView(e,t,i,n)}layout(e,t){const i=Math.max(this.size,this._contentSize);if(this.size=e,this.layoutContext=t,this.proportions){let n=0;for(let s=0;s<this.viewItems.length;s++){const r=this.viewItems[s],a=this.proportions[s];typeof a=="number"?n+=a:e-=r.size}for(let s=0;s<this.viewItems.length;s++){const r=this.viewItems[s],a=this.proportions[s];typeof a=="number"&&n>0&&(r.size=Wr(Math.round(a*e/n),r.minimumSize,r.maximumSize))}}else{const n=va(this.viewItems.length),s=n.filter(a=>this.viewItems[a].priority===1),r=n.filter(a=>this.viewItems[a].priority===2);this.resize(this.viewItems.length-1,e-i,void 0,s,r)}this.distributeEmptySpace(),this.layoutViews()}saveProportions(){this.proportionalLayout&&this._contentSize>0&&(this.proportions=this.viewItems.map(e=>e.proportionalLayout&&e.visible?e.size/this._contentSize:void 0))}onSashStart({sash:e,start:t,alt:i}){for(const a of this.viewItems)a.enabled=!1;const n=this.sashItems.findIndex(a=>a.sash===e),s=od(se(this.el.ownerDocument.body,"keydown",a=>r(this.sashDragState.current,a.altKey)),se(this.el.ownerDocument.body,"keyup",()=>r(this.sashDragState.current,!1))),r=(a,l)=>{const c=this.viewItems.map(_=>_.size);let u=Number.NEGATIVE_INFINITY,f=Number.POSITIVE_INFINITY;if(this.inverseAltBehavior&&(l=!l),l)if(n===this.sashItems.length-1){const b=this.viewItems[n];u=(b.minimumSize-b.size)/2,f=(b.maximumSize-b.size)/2}else{const b=this.viewItems[n+1];u=(b.size-b.maximumSize)/2,f=(b.size-b.minimumSize)/2}let g,p;if(!l){const _=va(n,-1),b=va(n+1,this.viewItems.length),y=_.reduce((P,H)=>P+(this.viewItems[H].minimumSize-c[H]),0),S=_.reduce((P,H)=>P+(this.viewItems[H].viewMaximumSize-c[H]),0),L=b.length===0?Number.POSITIVE_INFINITY:b.reduce((P,H)=>P+(c[H]-this.viewItems[H].minimumSize),0),x=b.length===0?Number.NEGATIVE_INFINITY:b.reduce((P,H)=>P+(c[H]-this.viewItems[H].viewMaximumSize),0),k=Math.max(y,x),E=Math.min(L,S),N=this.findFirstSnapIndex(_),A=this.findFirstSnapIndex(b);if(typeof N=="number"){const P=this.viewItems[N],H=Math.floor(P.viewMinimumSize/2);g={index:N,limitDelta:P.visible?k-H:k+H,size:P.size}}if(typeof A=="number"){const P=this.viewItems[A],H=Math.floor(P.viewMinimumSize/2);p={index:A,limitDelta:P.visible?E+H:E-H,size:P.size}}}this.sashDragState={start:a,current:a,index:n,sizes:c,minDelta:u,maxDelta:f,alt:l,snapBefore:g,snapAfter:p,disposable:s}};r(t,i)}onSashChange({current:e}){const{index:t,start:i,sizes:n,alt:s,minDelta:r,maxDelta:a,snapBefore:l,snapAfter:c}=this.sashDragState;this.sashDragState.current=e;const u=e-i,f=this.resize(t,u,n,void 0,void 0,r,a,l,c);if(s){const g=t===this.sashItems.length-1,p=this.viewItems.map(x=>x.size),_=g?t:t+1,b=this.viewItems[_],y=b.size-b.maximumSize,S=b.size-b.minimumSize,L=g?t-1:t+1;this.resize(L,-f,p,void 0,void 0,y,S)}this.distributeEmptySpace(),this.layoutViews()}onSashEnd(e){this._onDidSashChange.fire(e),this.sashDragState.disposable.dispose(),this.saveProportions();for(const t of this.viewItems)t.enabled=!0}onViewChange(e,t){const i=this.viewItems.indexOf(e);i<0||i>=this.viewItems.length||(t=typeof t=="number"?t:e.size,t=Wr(t,e.minimumSize,e.maximumSize),this.inverseAltBehavior&&i>0?(this.resize(i-1,Math.floor((e.size-t)/2)),this.distributeEmptySpace(),this.layoutViews()):(e.size=t,this.relayout([i],void 0)))}resizeView(e,t){if(!(e<0||e>=this.viewItems.length)){if(this.state!==Nf.Idle)throw new Error("Cant modify splitview");this.state=Nf.Busy;try{const i=va(this.viewItems.length).filter(a=>a!==e),n=[...i.filter(a=>this.viewItems[a].priority===1),e],s=i.filter(a=>this.viewItems[a].priority===2),r=this.viewItems[e];t=Math.round(t),t=Wr(t,r.minimumSize,Math.min(r.maximumSize,this.size)),r.size=t,this.relayout(n,s)}finally{this.state=Nf.Idle}}}distributeViewSizes(){const e=[];let t=0;for(const a of this.viewItems)a.maximumSize-a.minimumSize>0&&(e.push(a),t+=a.size);const i=Math.floor(t/e.length);for(const a of e)a.size=Wr(i,a.minimumSize,a.maximumSize);const n=va(this.viewItems.length),s=n.filter(a=>this.viewItems[a].priority===1),r=n.filter(a=>this.viewItems[a].priority===2);this.relayout(s,r)}getViewSize(e){return e<0||e>=this.viewItems.length?-1:this.viewItems[e].size}doAddView(e,t,i=this.viewItems.length,n){if(this.state!==Nf.Idle)throw new Error("Cant modify splitview");this.state=Nf.Busy;try{const s=xe(".split-view-view");i===this.viewItems.length?this.viewContainer.appendChild(s):this.viewContainer.insertBefore(s,this.viewContainer.children.item(i));const r=e.onDidChange(g=>this.onViewChange(u,g)),a=it(()=>s.remove()),l=od(r,a);let c;typeof t=="number"?c=t:(t.type==="auto"&&(this.areViewsDistributed()?t={type:"distribute"}:t={type:"split",index:t.index}),t.type==="split"?c=this.getViewSize(t.index)/2:t.type==="invisible"?c={cachedVisibleSize:t.cachedVisibleSize}:c=e.minimumSize);const u=this.orientation===0?new a5e(s,e,c,l):new l5e(s,e,c,l);if(this.viewItems.splice(i,0,u),this.viewItems.length>1){const g={orthogonalStartSash:this.orthogonalStartSash,orthogonalEndSash:this.orthogonalEndSash},p=this.orientation===0?new Yo(this.sashContainer,{getHorizontalSashTop:P=>this.getSashPosition(P),getHorizontalSashWidth:this.getSashOrthogonalSize},{...g,orientation:1}):new Yo(this.sashContainer,{getVerticalSashLeft:P=>this.getSashPosition(P),getVerticalSashHeight:this.getSashOrthogonalSize},{...g,orientation:0}),_=this.orientation===0?P=>({sash:p,start:P.startY,current:P.currentY,alt:P.altKey}):P=>({sash:p,start:P.startX,current:P.currentX,alt:P.altKey}),y=Ee.map(p.onDidStart,_)(this.onSashStart,this),L=Ee.map(p.onDidChange,_)(this.onSashChange,this),k=Ee.map(p.onDidEnd,()=>this.sashItems.findIndex(P=>P.sash===p))(this.onSashEnd,this),E=p.onDidReset(()=>{const P=this.sashItems.findIndex(J=>J.sash===p),H=va(P,-1),ee=va(P+1,this.viewItems.length),Q=this.findFirstSnapIndex(H),te=this.findFirstSnapIndex(ee);typeof Q=="number"&&!this.viewItems[Q].visible||typeof te=="number"&&!this.viewItems[te].visible||this._onDidSashReset.fire(P)}),N=od(y,L,k,E,p),A={sash:p,disposable:N};this.sashItems.splice(i-1,0,A)}s.appendChild(e.element);let f;typeof t!="number"&&t.type==="split"&&(f=[t.index]),n||this.relayout([i],f),!n&&typeof t!="number"&&t.type==="distribute"&&this.distributeViewSizes()}finally{this.state=Nf.Idle}}relayout(e,t){const i=this.viewItems.reduce((n,s)=>n+s.size,0);this.resize(this.viewItems.length-1,this.size-i,void 0,e,t),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}resize(e,t,i=this.viewItems.map(u=>u.size),n,s,r=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,l,c){if(e<0||e>=this.viewItems.length)return 0;const u=va(e,-1),f=va(e+1,this.viewItems.length);if(s)for(const A of s)RH(u,A),RH(f,A);if(n)for(const A of n)YN(u,A),YN(f,A);const g=u.map(A=>this.viewItems[A]),p=u.map(A=>i[A]),_=f.map(A=>this.viewItems[A]),b=f.map(A=>i[A]),y=u.reduce((A,P)=>A+(this.viewItems[P].minimumSize-i[P]),0),S=u.reduce((A,P)=>A+(this.viewItems[P].maximumSize-i[P]),0),L=f.length===0?Number.POSITIVE_INFINITY:f.reduce((A,P)=>A+(i[P]-this.viewItems[P].minimumSize),0),x=f.length===0?Number.NEGATIVE_INFINITY:f.reduce((A,P)=>A+(i[P]-this.viewItems[P].maximumSize),0),k=Math.max(y,x,r),E=Math.min(L,S,a);let N=!1;if(l){const A=this.viewItems[l.index],P=t>=l.limitDelta;N=P!==A.visible,A.setVisible(P,l.size)}if(!N&&c){const A=this.viewItems[c.index],P=t<c.limitDelta;N=P!==A.visible,A.setVisible(P,c.size)}if(N)return this.resize(e,t,i,n,s,r,a);t=Wr(t,k,E);for(let A=0,P=t;A<g.length;A++){const H=g[A],ee=Wr(p[A]+P,H.minimumSize,H.maximumSize),Q=ee-p[A];P-=Q,H.size=ee}for(let A=0,P=t;A<_.length;A++){const H=_[A],ee=Wr(b[A]-P,H.minimumSize,H.maximumSize),Q=ee-b[A];P+=Q,H.size=ee}return t}distributeEmptySpace(e){const t=this.viewItems.reduce((a,l)=>a+l.size,0);let i=this.size-t;const n=va(this.viewItems.length-1,-1),s=n.filter(a=>this.viewItems[a].priority===1),r=n.filter(a=>this.viewItems[a].priority===2);for(const a of r)RH(n,a);for(const a of s)YN(n,a);typeof e=="number"&&YN(n,e);for(let a=0;i!==0&&a<n.length;a++){const l=this.viewItems[n[a]],c=Wr(l.size+i,l.minimumSize,l.maximumSize),u=c-l.size;i-=u,l.size=c}}layoutViews(){this._contentSize=this.viewItems.reduce((t,i)=>t+i.size,0);let e=0;for(const t of this.viewItems)t.layout(e,this.layoutContext),e+=t.size;this.sashItems.forEach(t=>t.sash.layout()),this.updateSashEnablement(),this.updateScrollableElement()}updateScrollableElement(){this.orientation===0?this.scrollableElement.setScrollDimensions({height:this.size,scrollHeight:this._contentSize}):this.scrollableElement.setScrollDimensions({width:this.size,scrollWidth:this._contentSize})}updateSashEnablement(){let e=!1;const t=this.viewItems.map(l=>e=l.size-l.minimumSize>0||e);e=!1;const i=this.viewItems.map(l=>e=l.maximumSize-l.size>0||e),n=[...this.viewItems].reverse();e=!1;const s=n.map(l=>e=l.size-l.minimumSize>0||e).reverse();e=!1;const r=n.map(l=>e=l.maximumSize-l.size>0||e).reverse();let a=0;for(let l=0;l<this.sashItems.length;l++){const{sash:c}=this.sashItems[l],u=this.viewItems[l];a+=u.size;const f=!(t[l]&&r[l+1]),g=!(i[l]&&s[l+1]);if(f&&g){const p=va(l,-1),_=va(l+1,this.viewItems.length),b=this.findFirstSnapIndex(p),y=this.findFirstSnapIndex(_),S=typeof b=="number"&&!this.viewItems[b].visible,L=typeof y=="number"&&!this.viewItems[y].visible;S&&s[l]&&(a>0||this.startSnappingEnabled)?c.state=1:L&&t[l]&&(a<this._contentSize||this.endSnappingEnabled)?c.state=2:c.state=0}else f&&!g?c.state=1:!f&&g?c.state=2:c.state=3}}getSashPosition(e){let t=0;for(let i=0;i<this.sashItems.length;i++)if(t+=this.viewItems[i].size,this.sashItems[i].sash===e)return t;return 0}findFirstSnapIndex(e){for(const t of e){const i=this.viewItems[t];if(i.visible&&i.snap)return t}for(const t of e){const i=this.viewItems[t];if(i.visible&&i.maximumSize-i.minimumSize>0)return;if(!i.visible&&i.snap)return t}}areViewsDistributed(){let e,t;for(const i of this.viewItems)if(e=e===void 0?i.size:Math.min(e,i.size),t=t===void 0?i.size:Math.max(t,i.size),t-e>2)return!1;return!0}dispose(){var e;(e=this.sashDragState)==null||e.disposable.dispose(),$i(this.viewItems),this.viewItems=[],this.sashItems.forEach(t=>t.disposable.dispose()),this.sashItems=[],super.dispose()}}const k2=class k2{constructor(e,t,i){this.columns=e,this.getColumnSize=i,this.templateId=k2.TemplateId,this.renderedTemplates=new Set;const n=new Map(t.map(s=>[s.templateId,s]));this.renderers=[];for(const s of e){const r=n.get(s.templateId);if(!r)throw new Error(`Table cell renderer for template id ${s.templateId} not found.`);this.renderers.push(r)}}renderTemplate(e){const t=ge(e,xe(".monaco-table-tr")),i=[],n=[];for(let r=0;r<this.columns.length;r++){const a=this.renderers[r],l=ge(t,xe(".monaco-table-td",{"data-col-index":r}));l.style.width=`${this.getColumnSize(r)}px`,i.push(l),n.push(a.renderTemplate(l))}const s={container:e,cellContainers:i,cellTemplateData:n};return this.renderedTemplates.add(s),s}renderElement(e,t,i,n){for(let s=0;s<this.columns.length;s++){const a=this.columns[s].project(e);this.renderers[s].renderElement(a,t,i.cellTemplateData[s],n)}}disposeElement(e,t,i,n){for(let s=0;s<this.columns.length;s++){const r=this.renderers[s];if(r.disposeElement){const l=this.columns[s].project(e);r.disposeElement(l,t,i.cellTemplateData[s],n)}}}disposeTemplate(e){for(let t=0;t<this.columns.length;t++)this.renderers[t].disposeTemplate(e.cellTemplateData[t]);bo(e.container),this.renderedTemplates.delete(e)}layoutColumn(e,t){for(const{cellContainers:i}of this.renderedTemplates)i[e].style.width=`${t}px`}};k2.TemplateId="row";let mP=k2;function c5e(o){return{getHeight(e){return o.getHeight(e)},getTemplateId(){return mP.TemplateId}}}class d5e extends X{get minimumSize(){return this.column.minimumWidth??120}get maximumSize(){return this.column.maximumWidth??Number.POSITIVE_INFINITY}get onDidChange(){return this.column.onDidChangeWidthConstraints??Ee.None}constructor(e,t){super(),this.column=e,this.index=t,this._onDidLayout=new Y,this.onDidLayout=this._onDidLayout.event,this.element=xe(".monaco-table-th",{"data-col-index":t},e.label),e.tooltip&&this._register(Su().setupManagedHover(sa("mouse"),this.element,e.tooltip))}layout(e){this._onDidLayout.fire([this.index,e])}}const D2=class D2{get onDidChangeFocus(){return this.list.onDidChangeFocus}get onDidChangeSelection(){return this.list.onDidChangeSelection}get onDidScroll(){return this.list.onDidScroll}get onMouseDblClick(){return this.list.onMouseDblClick}get onPointer(){return this.list.onPointer}get onDidFocus(){return this.list.onDidFocus}get scrollTop(){return this.list.scrollTop}set scrollTop(e){this.list.scrollTop=e}get scrollHeight(){return this.list.scrollHeight}get renderHeight(){return this.list.renderHeight}get onDidDispose(){return this.list.onDidDispose}constructor(e,t,i,n,s,r){this.virtualDelegate=i,this.columns=n,this.domId=`table_id_${++D2.InstanceCount}`,this.disposables=new le,this.cachedWidth=0,this.cachedHeight=0,this.domNode=ge(t,xe(`.monaco-table.${this.domId}`));const a=n.map((u,f)=>this.disposables.add(new d5e(u,f))),l={size:a.reduce((u,f)=>u+f.column.weight,0),views:a.map(u=>({size:u.column.weight,view:u}))};this.splitview=this.disposables.add(new yhe(this.domNode,{orientation:1,scrollbarVisibility:2,getSashOrthogonalSize:()=>this.cachedHeight,descriptor:l})),this.splitview.el.style.height=`${i.headerRowHeight}px`,this.splitview.el.style.lineHeight=`${i.headerRowHeight}px`;const c=new mP(n,s,u=>this.splitview.getViewSize(u));this.list=this.disposables.add(new Xl(e,this.domNode,c5e(i),[c],r)),Ee.any(...a.map(u=>u.onDidLayout))(([u,f])=>c.layoutColumn(u,f),null,this.disposables),this.splitview.onDidSashReset(u=>{const f=n.reduce((p,_)=>p+_.weight,0),g=n[u].weight/f*this.cachedWidth;this.splitview.resizeView(u,g)},null,this.disposables),this.styleElement=$l(this.domNode),this.style(POe)}updateOptions(e){this.list.updateOptions(e)}splice(e,t,i=[]){this.list.splice(e,t,i)}getHTMLElement(){return this.domNode}style(e){const t=[];t.push(`.monaco-table.${this.domId} > .monaco-split-view2 .monaco-sash.vertical::before {
			top: ${this.virtualDelegate.headerRowHeight+1}px;
			height: calc(100% - ${this.virtualDelegate.headerRowHeight}px);
		}`),this.styleElement.textContent=t.join(`
`),this.list.style(e)}getSelectedElements(){return this.list.getSelectedElements()}getSelection(){return this.list.getSelection()}getFocus(){return this.list.getFocus()}dispose(){this.disposables.dispose()}};D2.InstanceCount=0;let tz=D2;var Dl;(function(o){o[o.Expanded=0]="Expanded",o[o.Collapsed=1]="Collapsed",o[o.PreserveOrExpanded=2]="PreserveOrExpanded",o[o.PreserveOrCollapsed=3]="PreserveOrCollapsed"})(Dl||(Dl={}));var Fv;(function(o){o[o.Unknown=0]="Unknown",o[o.Twistie=1]="Twistie",o[o.Element=2]="Element",o[o.Filter=3]="Filter"})(Fv||(Fv={}));class Al extends Error{constructor(e,t){super(`TreeError [${e}] ${t}`)}}class iG{constructor(e){this.fn=e,this._map=new WeakMap}map(e){let t=this._map.get(e);return t||(t=this.fn(e),this._map.set(e,t)),t}}function nG(o){return typeof o=="object"&&"visibility"in o&&"data"in o}function jD(o){switch(o){case!0:return 1;case!1:return 0;default:return o}}function F7(o){return typeof o.collapsible=="boolean"}class u5e{constructor(e,t,i,n={}){this.user=e,this.list=t,this.rootRef=[],this.eventBufferer=new KE,this._onDidChangeCollapseState=new Y,this.onDidChangeCollapseState=this.eventBufferer.wrapEvent(this._onDidChangeCollapseState.event),this._onDidChangeRenderNodeCount=new Y,this.onDidChangeRenderNodeCount=this.eventBufferer.wrapEvent(this._onDidChangeRenderNodeCount.event),this._onDidSplice=new Y,this.onDidSplice=this._onDidSplice.event,this.refilterDelayer=new xc(sce),this.collapseByDefault=typeof n.collapseByDefault>"u"?!1:n.collapseByDefault,this.allowNonCollapsibleParents=n.allowNonCollapsibleParents??!1,this.filter=n.filter,this.autoExpandSingleChildren=typeof n.autoExpandSingleChildren>"u"?!1:n.autoExpandSingleChildren,this.root={parent:void 0,element:i,children:[],depth:0,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:!1,collapsed:!1,renderNodeCount:0,visibility:1,visible:!0,filterData:void 0}}splice(e,t,i=ti.empty(),n={}){if(e.length===0)throw new Al(this.user,"Invalid tree location");n.diffIdentityProvider?this.spliceSmart(n.diffIdentityProvider,e,t,i,n):this.spliceSimple(e,t,i,n)}spliceSmart(e,t,i,n=ti.empty(),s,r=s.diffDepth??0){const{parentNode:a}=this.getParentNodeWithListIndex(t);if(!a.lastDiffIds)return this.spliceSimple(t,i,n,s);const l=[...n],c=t[t.length-1],u=new bh({getElements:()=>a.lastDiffIds},{getElements:()=>[...a.children.slice(0,c),...l,...a.children.slice(c+i)].map(b=>e.getId(b.element).toString())}).ComputeDiff(!1);if(u.quitEarly)return a.lastDiffIds=void 0,this.spliceSimple(t,i,l,s);const f=t.slice(0,-1),g=(b,y,S)=>{if(r>0)for(let L=0;L<S;L++)b--,y--,this.spliceSmart(e,[...f,b,0],Number.MAX_SAFE_INTEGER,l[y].children,s,r-1)};let p=Math.min(a.children.length,c+i),_=l.length;for(const b of u.changes.sort((y,S)=>S.originalStart-y.originalStart))g(p,_,p-(b.originalStart+b.originalLength)),p=b.originalStart,_=b.modifiedStart-c,this.spliceSimple([...f,p],b.originalLength,ti.slice(l,_,_+b.modifiedLength),s);g(p,_,p)}spliceSimple(e,t,i=ti.empty(),{onDidCreateNode:n,onDidDeleteNode:s,diffIdentityProvider:r}){const{parentNode:a,listIndex:l,revealed:c,visible:u}=this.getParentNodeWithListIndex(e),f=[],g=ti.map(i,E=>this.createTreeNode(E,a,a.visible?1:0,c,f,n)),p=e[e.length-1];let _=0;for(let E=p;E>=0&&E<a.children.length;E--){const N=a.children[E];if(N.visible){_=N.visibleChildIndex;break}}const b=[];let y=0,S=0;for(const E of g)b.push(E),S+=E.renderNodeCount,E.visible&&(E.visibleChildIndex=_+y++);const L=Dte(a.children,p,t,b);r?a.lastDiffIds?Dte(a.lastDiffIds,p,t,b.map(E=>r.getId(E.element).toString())):a.lastDiffIds=a.children.map(E=>r.getId(E.element).toString()):a.lastDiffIds=void 0;let x=0;for(const E of L)E.visible&&x++;if(x!==0)for(let E=p+b.length;E<a.children.length;E++){const N=a.children[E];N.visible&&(N.visibleChildIndex-=x)}if(a.visibleChildrenCount+=y-x,c&&u){const E=L.reduce((N,A)=>N+(A.visible?A.renderNodeCount:0),0);this._updateAncestorsRenderNodeCount(a,S-E),this.list.splice(l,E,f)}if(L.length>0&&s){const E=N=>{s(N),N.children.forEach(E)};L.forEach(E)}this._onDidSplice.fire({insertedNodes:b,deletedNodes:L});let k=a;for(;k;){if(k.visibility===2){this.refilterDelayer.trigger(()=>this.refilter());break}k=k.parent}}rerender(e){if(e.length===0)throw new Al(this.user,"Invalid tree location");const{node:t,listIndex:i,revealed:n}=this.getTreeNodeWithListIndex(e);t.visible&&n&&this.list.splice(i,1,[t])}has(e){return this.hasTreeNode(e)}getListIndex(e){const{listIndex:t,visible:i,revealed:n}=this.getTreeNodeWithListIndex(e);return i&&n?t:-1}getListRenderCount(e){return this.getTreeNode(e).renderNodeCount}isCollapsible(e){return this.getTreeNode(e).collapsible}setCollapsible(e,t){const i=this.getTreeNode(e);typeof t>"u"&&(t=!i.collapsible);const n={collapsible:t};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,n))}isCollapsed(e){return this.getTreeNode(e).collapsed}setCollapsed(e,t,i){const n=this.getTreeNode(e);typeof t>"u"&&(t=!n.collapsed);const s={collapsed:t,recursive:i||!1};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,s))}_setCollapseState(e,t){const{node:i,listIndex:n,revealed:s}=this.getTreeNodeWithListIndex(e),r=this._setListNodeCollapseState(i,n,s,t);if(i!==this.root&&this.autoExpandSingleChildren&&r&&!F7(t)&&i.collapsible&&!i.collapsed&&!t.recursive){let a=-1;for(let l=0;l<i.children.length;l++)if(i.children[l].visible)if(a>-1){a=-1;break}else a=l;a>-1&&this._setCollapseState([...e,a],t)}return r}_setListNodeCollapseState(e,t,i,n){const s=this._setNodeCollapseState(e,n,!1);if(!i||!e.visible||!s)return s;const r=e.renderNodeCount,a=this.updateNodeAfterCollapseChange(e),l=r-(t===-1?0:1);return this.list.splice(t+1,l,a.slice(1)),s}_setNodeCollapseState(e,t,i){let n;if(e===this.root?n=!1:(F7(t)?(n=e.collapsible!==t.collapsible,e.collapsible=t.collapsible):e.collapsible?(n=e.collapsed!==t.collapsed,e.collapsed=t.collapsed):n=!1,n&&this._onDidChangeCollapseState.fire({node:e,deep:i})),!F7(t)&&t.recursive)for(const s of e.children)n=this._setNodeCollapseState(s,t,!0)||n;return n}expandTo(e){this.eventBufferer.bufferEvents(()=>{let t=this.getTreeNode(e);for(;t.parent;)t=t.parent,e=e.slice(0,e.length-1),t.collapsed&&this._setCollapseState(e,{collapsed:!1,recursive:!1})})}refilter(){const e=this.root.renderNodeCount,t=this.updateNodeAfterFilterChange(this.root);this.list.splice(0,e,t),this.refilterDelayer.cancel()}createTreeNode(e,t,i,n,s,r){const a={parent:t,element:e.element,children:[],depth:t.depth+1,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:typeof e.collapsible=="boolean"?e.collapsible:typeof e.collapsed<"u",collapsed:typeof e.collapsed>"u"?this.collapseByDefault:e.collapsed,renderNodeCount:1,visibility:1,visible:!0,filterData:void 0},l=this._filterNode(a,i);a.visibility=l,n&&s.push(a);const c=e.children||ti.empty(),u=n&&l!==0&&!a.collapsed;let f=0,g=1;for(const p of c){const _=this.createTreeNode(p,a,l,u,s,r);a.children.push(_),g+=_.renderNodeCount,_.visible&&(_.visibleChildIndex=f++)}return this.allowNonCollapsibleParents||(a.collapsible=a.collapsible||a.children.length>0),a.visibleChildrenCount=f,a.visible=l===2?f>0:l===1,a.visible?a.collapsed||(a.renderNodeCount=g):(a.renderNodeCount=0,n&&s.pop()),r==null||r(a),a}updateNodeAfterCollapseChange(e){const t=e.renderNodeCount,i=[];return this._updateNodeAfterCollapseChange(e,i),this._updateAncestorsRenderNodeCount(e.parent,i.length-t),i}_updateNodeAfterCollapseChange(e,t){if(e.visible===!1)return 0;if(t.push(e),e.renderNodeCount=1,!e.collapsed)for(const i of e.children)e.renderNodeCount+=this._updateNodeAfterCollapseChange(i,t);return this._onDidChangeRenderNodeCount.fire(e),e.renderNodeCount}updateNodeAfterFilterChange(e){const t=e.renderNodeCount,i=[];return this._updateNodeAfterFilterChange(e,e.visible?1:0,i),this._updateAncestorsRenderNodeCount(e.parent,i.length-t),i}_updateNodeAfterFilterChange(e,t,i,n=!0){let s;if(e!==this.root){if(s=this._filterNode(e,t),s===0)return e.visible=!1,e.renderNodeCount=0,!1;n&&i.push(e)}const r=i.length;e.renderNodeCount=e===this.root?0:1;let a=!1;if(!e.collapsed||s!==0){let l=0;for(const c of e.children)a=this._updateNodeAfterFilterChange(c,s,i,n&&!e.collapsed)||a,c.visible&&(c.visibleChildIndex=l++);e.visibleChildrenCount=l}else e.visibleChildrenCount=0;return e!==this.root&&(e.visible=s===2?a:s===1,e.visibility=s),e.visible?e.collapsed||(e.renderNodeCount+=i.length-r):(e.renderNodeCount=0,n&&i.pop()),this._onDidChangeRenderNodeCount.fire(e),e.visible}_updateAncestorsRenderNodeCount(e,t){if(t!==0)for(;e;)e.renderNodeCount+=t,this._onDidChangeRenderNodeCount.fire(e),e=e.parent}_filterNode(e,t){const i=this.filter?this.filter.filter(e.element,t):1;return typeof i=="boolean"?(e.filterData=void 0,i?1:0):nG(i)?(e.filterData=i.data,jD(i.visibility)):(e.filterData=void 0,jD(i))}hasTreeNode(e,t=this.root){if(!e||e.length===0)return!0;const[i,...n]=e;return i<0||i>t.children.length?!1:this.hasTreeNode(n,t.children[i])}getTreeNode(e,t=this.root){if(!e||e.length===0)return t;const[i,...n]=e;if(i<0||i>t.children.length)throw new Al(this.user,"Invalid tree location");return this.getTreeNode(n,t.children[i])}getTreeNodeWithListIndex(e){if(e.length===0)return{node:this.root,listIndex:-1,revealed:!0,visible:!1};const{parentNode:t,listIndex:i,revealed:n,visible:s}=this.getParentNodeWithListIndex(e),r=e[e.length-1];if(r<0||r>t.children.length)throw new Al(this.user,"Invalid tree location");const a=t.children[r];return{node:a,listIndex:i,revealed:n,visible:s&&a.visible}}getParentNodeWithListIndex(e,t=this.root,i=0,n=!0,s=!0){const[r,...a]=e;if(r<0||r>t.children.length)throw new Al(this.user,"Invalid tree location");for(let l=0;l<r;l++)i+=t.children[l].renderNodeCount;return n=n&&!t.collapsed,s=s&&t.visible,a.length===0?{parentNode:t,listIndex:i,revealed:n,visible:s}:this.getParentNodeWithListIndex(a,t.children[r],i+1,n,s)}getNode(e=[]){return this.getTreeNode(e)}getNodeLocation(e){const t=[];let i=e;for(;i.parent;)t.push(i.parent.children.indexOf(i)),i=i.parent;return t.reverse()}getParentNodeLocation(e){if(e.length!==0)return e.length===1?[]:wLe(e)[0]}getFirstElementChild(e){const t=this.getTreeNode(e);if(t.children.length!==0)return t.children[0].element}}class h5e extends hI{constructor(e){super(e.elements.map(t=>t.element)),this.data=e}}function B7(o){return o instanceof hI?new h5e(o):o}class f5e{constructor(e,t){this.modelProvider=e,this.dnd=t,this.autoExpandDisposable=X.None,this.disposables=new le}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(i=>i.element),t)}onDragStart(e,t){var i,n;(n=(i=this.dnd).onDragStart)==null||n.call(i,B7(e),t)}onDragOver(e,t,i,n,s,r=!0){const a=this.dnd.onDragOver(B7(e),t&&t.element,i,n,s),l=this.autoExpandNode!==t;if(l&&(this.autoExpandDisposable.dispose(),this.autoExpandNode=t),typeof t>"u")return a;if(l&&typeof a!="boolean"&&a.autoExpand&&(this.autoExpandDisposable=Bm(()=>{const p=this.modelProvider(),_=p.getNodeLocation(t);p.isCollapsed(_)&&p.setCollapsed(_,!1),this.autoExpandNode=void 0},500,this.disposables)),typeof a=="boolean"||!a.accept||typeof a.bubble>"u"||a.feedback){if(!r){const p=typeof a=="boolean"?a:a.accept,_=typeof a=="boolean"?void 0:a.effect;return{accept:p,effect:_,feedback:[i]}}return a}if(a.bubble===1){const p=this.modelProvider(),_=p.getNodeLocation(t),b=p.getParentNodeLocation(_),y=p.getNode(b),S=b&&p.getListIndex(b);return this.onDragOver(e,y,S,n,s,!1)}const c=this.modelProvider(),u=c.getNodeLocation(t),f=c.getListIndex(u),g=c.getListRenderCount(u);return{...a,feedback:va(f,f+g)}}drop(e,t,i,n,s){this.autoExpandDisposable.dispose(),this.autoExpandNode=void 0,this.dnd.drop(B7(e),t&&t.element,i,n,s)}onDragEnd(e){var t,i;(i=(t=this.dnd).onDragEnd)==null||i.call(t,e)}dispose(){this.disposables.dispose(),this.dnd.dispose()}}function g5e(o,e){return e&&{...e,identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(t.element)}},dnd:e.dnd&&new f5e(o,e.dnd),multipleSelectionController:e.multipleSelectionController&&{isSelectionSingleChangeEvent(t){return e.multipleSelectionController.isSelectionSingleChangeEvent({...t,element:t.element})},isSelectionRangeChangeEvent(t){return e.multipleSelectionController.isSelectionRangeChangeEvent({...t,element:t.element})}},accessibilityProvider:e.accessibilityProvider&&{...e.accessibilityProvider,getSetSize(t){const i=o(),n=i.getNodeLocation(t),s=i.getParentNodeLocation(n);return i.getNode(s).visibleChildrenCount},getPosInSet(t){return t.visibleChildIndex+1},isChecked:e.accessibilityProvider&&e.accessibilityProvider.isChecked?t=>e.accessibilityProvider.isChecked(t.element):void 0,getRole:e.accessibilityProvider&&e.accessibilityProvider.getRole?t=>e.accessibilityProvider.getRole(t.element):()=>"treeitem",getAriaLabel(t){return e.accessibilityProvider.getAriaLabel(t.element)},getWidgetAriaLabel(){return e.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:e.accessibilityProvider&&e.accessibilityProvider.getWidgetRole?()=>e.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:e.accessibilityProvider&&e.accessibilityProvider.getAriaLevel?t=>e.accessibilityProvider.getAriaLevel(t.element):t=>t.depth,getActiveDescendantId:e.accessibilityProvider.getActiveDescendantId&&(t=>e.accessibilityProvider.getActiveDescendantId(t.element))},keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{...e.keyboardNavigationLabelProvider,getKeyboardNavigationLabel(t){return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t.element)}}}}class sG{constructor(e){this.delegate=e}getHeight(e){return this.delegate.getHeight(e.element)}getTemplateId(e){return this.delegate.getTemplateId(e.element)}hasDynamicHeight(e){return!!this.delegate.hasDynamicHeight&&this.delegate.hasDynamicHeight(e.element)}setDynamicHeight(e,t){var i,n;(n=(i=this.delegate).setDynamicHeight)==null||n.call(i,e.element,t)}}var _S;(function(o){o.None="none",o.OnHover="onHover",o.Always="always"})(_S||(_S={}));class p5e{get elements(){return this._elements}constructor(e,t=[]){this._elements=t,this.disposables=new le,this.onDidChange=Ee.forEach(e,i=>this._elements=i,this.disposables)}dispose(){this.disposables.dispose()}}const Gk=class Gk{constructor(e,t,i,n,s,r={}){var a;this.renderer=e,this.modelProvider=t,this.activeNodes=n,this.renderedIndentGuides=s,this.renderedElements=new Map,this.renderedNodes=new Map,this.indent=Gk.DefaultIndent,this.hideTwistiesOfChildlessElements=!1,this.shouldRenderIndentGuides=!1,this.activeIndentNodes=new Set,this.indentGuidesDisposable=X.None,this.disposables=new le,this.templateId=e.templateId,this.updateOptions(r),Ee.map(i,l=>l.node)(this.onDidChangeNodeTwistieState,this,this.disposables),(a=e.onDidChangeTwistieState)==null||a.call(e,this.onDidChangeTwistieState,this,this.disposables)}updateOptions(e={}){if(typeof e.indent<"u"){const t=Wr(e.indent,0,40);if(t!==this.indent){this.indent=t;for(const[i,n]of this.renderedNodes)this.renderTreeElement(i,n)}}if(typeof e.renderIndentGuides<"u"){const t=e.renderIndentGuides!==_S.None;if(t!==this.shouldRenderIndentGuides){this.shouldRenderIndentGuides=t;for(const[i,n]of this.renderedNodes)this._renderIndentGuides(i,n);if(this.indentGuidesDisposable.dispose(),t){const i=new le;this.activeNodes.onDidChange(this._onDidChangeActiveNodes,this,i),this.indentGuidesDisposable=i,this._onDidChangeActiveNodes(this.activeNodes.elements)}}}typeof e.hideTwistiesOfChildlessElements<"u"&&(this.hideTwistiesOfChildlessElements=e.hideTwistiesOfChildlessElements)}renderTemplate(e){const t=ge(e,xe(".monaco-tl-row")),i=ge(t,xe(".monaco-tl-indent")),n=ge(t,xe(".monaco-tl-twistie")),s=ge(t,xe(".monaco-tl-contents")),r=this.renderer.renderTemplate(s);return{container:e,indent:i,twistie:n,indentGuidesDisposable:X.None,templateData:r}}renderElement(e,t,i,n){this.renderedNodes.set(e,i),this.renderedElements.set(e.element,e),this.renderTreeElement(e,i),this.renderer.renderElement(e,t,i.templateData,n)}disposeElement(e,t,i,n){var s,r;i.indentGuidesDisposable.dispose(),(r=(s=this.renderer).disposeElement)==null||r.call(s,e,t,i.templateData,n),typeof n=="number"&&(this.renderedNodes.delete(e),this.renderedElements.delete(e.element))}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}onDidChangeTwistieState(e){const t=this.renderedElements.get(e);t&&this.onDidChangeNodeTwistieState(t)}onDidChangeNodeTwistieState(e){const t=this.renderedNodes.get(e);t&&(this._onDidChangeActiveNodes(this.activeNodes.elements),this.renderTreeElement(e,t))}renderTreeElement(e,t){const i=Gk.DefaultIndent+(e.depth-1)*this.indent;t.twistie.style.paddingLeft=`${i}px`,t.indent.style.width=`${i+this.indent-16}px`,e.collapsible?t.container.setAttribute("aria-expanded",String(!e.collapsed)):t.container.removeAttribute("aria-expanded"),t.twistie.classList.remove(...ut.asClassNameArray(Se.treeItemExpanded));let n=!1;this.renderer.renderTwistie&&(n=this.renderer.renderTwistie(e.element,t.twistie)),e.collapsible&&(!this.hideTwistiesOfChildlessElements||e.visibleChildrenCount>0)?(n||t.twistie.classList.add(...ut.asClassNameArray(Se.treeItemExpanded)),t.twistie.classList.add("collapsible"),t.twistie.classList.toggle("collapsed",e.collapsed)):t.twistie.classList.remove("collapsible","collapsed"),this._renderIndentGuides(e,t)}_renderIndentGuides(e,t){if(bo(t.indent),t.indentGuidesDisposable.dispose(),!this.shouldRenderIndentGuides)return;const i=new le,n=this.modelProvider();for(;;){const s=n.getNodeLocation(e),r=n.getParentNodeLocation(s);if(!r)break;const a=n.getNode(r),l=xe(".indent-guide",{style:`width: ${this.indent}px`});this.activeIndentNodes.has(a)&&l.classList.add("active"),t.indent.childElementCount===0?t.indent.appendChild(l):t.indent.insertBefore(l,t.indent.firstElementChild),this.renderedIndentGuides.add(a,l),i.add(it(()=>this.renderedIndentGuides.delete(a,l))),e=a}t.indentGuidesDisposable=i}_onDidChangeActiveNodes(e){if(!this.shouldRenderIndentGuides)return;const t=new Set,i=this.modelProvider();e.forEach(n=>{const s=i.getNodeLocation(n);try{const r=i.getParentNodeLocation(s);n.collapsible&&n.children.length>0&&!n.collapsed?t.add(n):r&&t.add(i.getNode(r))}catch{}}),this.activeIndentNodes.forEach(n=>{t.has(n)||this.renderedIndentGuides.forEach(n,s=>s.classList.remove("active"))}),t.forEach(n=>{this.activeIndentNodes.has(n)||this.renderedIndentGuides.forEach(n,s=>s.classList.add("active"))}),this.activeIndentNodes=t}dispose(){this.renderedNodes.clear(),this.renderedElements.clear(),this.indentGuidesDisposable.dispose(),$i(this.disposables)}};Gk.DefaultIndent=8;let iz=Gk;class m5e{get totalCount(){return this._totalCount}get matchCount(){return this._matchCount}constructor(e,t,i){this.tree=e,this.keyboardNavigationLabelProvider=t,this._filter=i,this._totalCount=0,this._matchCount=0,this._pattern="",this._lowercasePattern="",this.disposables=new le,e.onWillRefilter(this.reset,this,this.disposables)}filter(e,t){let i=1;if(this._filter){const r=this._filter.filter(e,t);if(typeof r=="boolean"?i=r?1:0:nG(r)?i=jD(r.visibility):i=r,i===0)return!1}if(this._totalCount++,!this._pattern)return this._matchCount++,{data:du.Default,visibility:i};const n=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e),s=Array.isArray(n)?n:[n];for(const r of s){const a=r&&r.toString();if(typeof a>"u")return{data:du.Default,visibility:i};let l;if(this.tree.findMatchType===mC.Contiguous){const c=a.toLowerCase().indexOf(this._lowercasePattern);if(c>-1){l=[Number.MAX_SAFE_INTEGER,0];for(let u=this._lowercasePattern.length;u>0;u--)l.push(c+u-1)}}else l=hC(this._pattern,this._lowercasePattern,0,a,a.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});if(l)return this._matchCount++,s.length===1?{data:l,visibility:i}:{data:{label:a,score:l},visibility:i}}return this.tree.findMode===sg.Filter?typeof this.tree.options.defaultFindVisibility=="number"?this.tree.options.defaultFindVisibility:this.tree.options.defaultFindVisibility?this.tree.options.defaultFindVisibility(e):2:{data:du.Default,visibility:i}}reset(){this._totalCount=0,this._matchCount=0}dispose(){$i(this.disposables)}}var sg;(function(o){o[o.Highlight=0]="Highlight",o[o.Filter=1]="Filter"})(sg||(sg={}));var mC;(function(o){o[o.Fuzzy=0]="Fuzzy",o[o.Contiguous=1]="Contiguous"})(mC||(mC={}));let _5e=class{get pattern(){return this._pattern}get mode(){return this._mode}set mode(e){e!==this._mode&&(this._mode=e,this.widget&&(this.widget.mode=this._mode),this.tree.refilter(),this.render(),this._onDidChangeMode.fire(e))}get matchType(){return this._matchType}set matchType(e){e!==this._matchType&&(this._matchType=e,this.widget&&(this.widget.matchType=this._matchType),this.tree.refilter(),this.render(),this._onDidChangeMatchType.fire(e))}constructor(e,t,i,n,s,r={}){this.tree=e,this.view=i,this.filter=n,this.contextViewProvider=s,this.options=r,this._pattern="",this.width=0,this._onDidChangeMode=new Y,this.onDidChangeMode=this._onDidChangeMode.event,this._onDidChangeMatchType=new Y,this.onDidChangeMatchType=this._onDidChangeMatchType.event,this._onDidChangePattern=new Y,this._onDidChangeOpenState=new Y,this.onDidChangeOpenState=this._onDidChangeOpenState.event,this.enabledDisposables=new le,this.disposables=new le,this._mode=e.options.defaultFindMode??sg.Highlight,this._matchType=e.options.defaultFindMatchType??mC.Fuzzy,t.onDidSplice(this.onDidSpliceModel,this,this.disposables)}updateOptions(e={}){e.defaultFindMode!==void 0&&(this.mode=e.defaultFindMode),e.defaultFindMatchType!==void 0&&(this.matchType=e.defaultFindMatchType)}onDidSpliceModel(){!this.widget||this.pattern.length===0||(this.tree.refilter(),this.render())}render(){var t,i,n;const e=this.filter.totalCount>0&&this.filter.matchCount===0;this.pattern&&e?(ta(v("replFindNoResults","No results")),this.tree.options.showNotFoundMessage??!0?(t=this.widget)==null||t.showMessage({type:2,content:v("not found","No elements found.")}):(i=this.widget)==null||i.showMessage({type:2})):((n=this.widget)==null||n.clearMessage(),this.pattern&&ta(v("replFindResults","{0} results",this.filter.matchCount)))}shouldAllowFocus(e){return!this.widget||!this.pattern||this.filter.totalCount>0&&this.filter.matchCount<=1?!0:!du.isDefault(e.filterData)}layout(e){var t;this.width=e,(t=this.widget)==null||t.layout(e)}dispose(){this._history=void 0,this._onDidChangePattern.dispose(),this.enabledDisposables.dispose(),this.disposables.dispose()}};function v5e(o,e){return o.position===e.position&&whe(o,e)}function whe(o,e){return o.node.element===e.node.element&&o.startIndex===e.startIndex&&o.height===e.height&&o.endIndex===e.endIndex}class b5e{constructor(e=[]){this.stickyNodes=e}get count(){return this.stickyNodes.length}equal(e){return En(this.stickyNodes,e.stickyNodes,v5e)}lastNodePartiallyVisible(){if(this.count===0)return!1;const e=this.stickyNodes[this.count-1];if(this.count===1)return e.position!==0;const t=this.stickyNodes[this.count-2];return t.position+t.height!==e.position}animationStateChanged(e){if(!En(this.stickyNodes,e.stickyNodes,whe)||this.count===0)return!1;const t=this.stickyNodes[this.count-1],i=e.stickyNodes[e.count-1];return t.position!==i.position}}class C5e{constrainStickyScrollNodes(e,t,i){for(let n=0;n<e.length;n++){const s=e[n];if(s.position+s.height>i||n>=t)return e.slice(0,n)}return e}}let Tse=class extends X{constructor(e,t,i,n,s,r={}){super(),this.tree=e,this.model=t,this.view=i,this.treeDelegate=s,this.maxWidgetViewRatio=.4;const a=this.validateStickySettings(r);this.stickyScrollMaxItemCount=a.stickyScrollMaxItemCount,this.stickyScrollDelegate=r.stickyScrollDelegate??new C5e,this._widget=this._register(new y5e(i.getScrollableElement(),i,e,n,s,r.accessibilityProvider)),this.onDidChangeHasFocus=this._widget.onDidChangeHasFocus,this.onContextMenu=this._widget.onContextMenu,this._register(i.onDidScroll(()=>this.update())),this._register(i.onDidChangeContentHeight(()=>this.update())),this._register(e.onDidChangeCollapseState(()=>this.update())),this.update()}get height(){return this._widget.height}getNodeAtHeight(e){let t;if(e===0?t=this.view.firstVisibleIndex:t=this.view.indexAt(e+this.view.scrollTop),!(t<0||t>=this.view.length))return this.view.element(t)}update(){const e=this.getNodeAtHeight(0);if(!e||this.tree.scrollTop===0){this._widget.setState(void 0);return}const t=this.findStickyState(e);this._widget.setState(t)}findStickyState(e){const t=[];let i=e,n=0,s=this.getNextStickyNode(i,void 0,n);for(;s&&(t.push(s),n+=s.height,!(t.length<=this.stickyScrollMaxItemCount&&(i=this.getNextVisibleNode(s),!i)));)s=this.getNextStickyNode(i,s.node,n);const r=this.constrainStickyNodes(t);return r.length?new b5e(r):void 0}getNextVisibleNode(e){return this.getNodeAtHeight(e.position+e.height)}getNextStickyNode(e,t,i){const n=this.getAncestorUnderPrevious(e,t);if(n&&!(n===e&&(!this.nodeIsUncollapsedParent(e)||this.nodeTopAlignsWithStickyNodesBottom(e,i))))return this.createStickyScrollNode(n,i)}nodeTopAlignsWithStickyNodesBottom(e,t){const i=this.getNodeIndex(e),n=this.view.getElementTop(i),s=t;return this.view.scrollTop===n-s}createStickyScrollNode(e,t){const i=this.treeDelegate.getHeight(e),{startIndex:n,endIndex:s}=this.getNodeRange(e),r=this.calculateStickyNodePosition(s,t,i);return{node:e,position:r,height:i,startIndex:n,endIndex:s}}getAncestorUnderPrevious(e,t=void 0){let i=e,n=this.getParentNode(i);for(;n;){if(n===t)return i;i=n,n=this.getParentNode(i)}if(t===void 0)return i}calculateStickyNodePosition(e,t,i){let n=this.view.getRelativeTop(e);if(n===null&&this.view.firstVisibleIndex===e&&e+1<this.view.length){const c=this.treeDelegate.getHeight(this.view.element(e)),u=this.view.getRelativeTop(e+1);n=u?u-c/this.view.renderHeight:null}if(n===null)return t;const s=this.view.element(e),r=this.treeDelegate.getHeight(s),l=n*this.view.renderHeight+r;return t+i>l&&t<=l?l-i:t}constrainStickyNodes(e){if(e.length===0)return[];const t=this.view.renderHeight*this.maxWidgetViewRatio,i=e[e.length-1];if(e.length<=this.stickyScrollMaxItemCount&&i.position+i.height<=t)return e;const n=this.stickyScrollDelegate.constrainStickyScrollNodes(e,this.stickyScrollMaxItemCount,t);if(!n.length)return[];const s=n[n.length-1];if(n.length>this.stickyScrollMaxItemCount||s.position+s.height>t)throw new Error("stickyScrollDelegate violates constraints");return n}getParentNode(e){const t=this.model.getNodeLocation(e),i=this.model.getParentNodeLocation(t);return i?this.model.getNode(i):void 0}nodeIsUncollapsedParent(e){const t=this.model.getNodeLocation(e);return this.model.getListRenderCount(t)>1}getNodeIndex(e){const t=this.model.getNodeLocation(e);return this.model.getListIndex(t)}getNodeRange(e){const t=this.model.getNodeLocation(e),i=this.model.getListIndex(t);if(i<0)throw new Error("Node not found in tree");const n=this.model.getListRenderCount(t),s=i+n-1;return{startIndex:i,endIndex:s}}nodePositionTopBelowWidget(e){const t=[];let i=this.getParentNode(e);for(;i;)t.push(i),i=this.getParentNode(i);let n=0;for(let s=0;s<t.length&&s<this.stickyScrollMaxItemCount;s++)n+=this.treeDelegate.getHeight(t[s]);return n}domFocus(){this._widget.domFocus()}focusedLast(){return this._widget.focusedLast()}updateOptions(e={}){if(!e.stickyScrollMaxItemCount)return;const t=this.validateStickySettings(e);this.stickyScrollMaxItemCount!==t.stickyScrollMaxItemCount&&(this.stickyScrollMaxItemCount=t.stickyScrollMaxItemCount,this.update())}validateStickySettings(e){let t=7;return typeof e.stickyScrollMaxItemCount=="number"&&(t=Math.max(e.stickyScrollMaxItemCount,1)),{stickyScrollMaxItemCount:t}}},y5e=class{constructor(e,t,i,n,s,r){this.view=t,this.tree=i,this.treeRenderers=n,this.treeDelegate=s,this.accessibilityProvider=r,this._previousElements=[],this._previousStateDisposables=new le,this._rootDomNode=xe(".monaco-tree-sticky-container.empty"),e.appendChild(this._rootDomNode);const a=xe(".monaco-tree-sticky-container-shadow");this._rootDomNode.appendChild(a),this.stickyScrollFocus=new w5e(this._rootDomNode,t),this.onDidChangeHasFocus=this.stickyScrollFocus.onDidChangeHasFocus,this.onContextMenu=this.stickyScrollFocus.onContextMenu}get height(){if(!this._previousState)return 0;const e=this._previousState.stickyNodes[this._previousState.count-1];return e.position+e.height}setState(e){const t=!!this._previousState&&this._previousState.count>0,i=!!e&&e.count>0;if(!t&&!i||t&&i&&this._previousState.equal(e))return;if(t!==i&&this.setVisible(i),!i){this._previousState=void 0,this._previousElements=[],this._previousStateDisposables.clear();return}const n=e.stickyNodes[e.count-1];if(this._previousState&&e.animationStateChanged(this._previousState))this._previousElements[this._previousState.count-1].style.top=`${n.position}px`;else{this._previousStateDisposables.clear();const s=Array(e.count);for(let r=e.count-1;r>=0;r--){const a=e.stickyNodes[r],{element:l,disposable:c}=this.createElement(a,r,e.count);s[r]=l,this._rootDomNode.appendChild(l),this._previousStateDisposables.add(c)}this.stickyScrollFocus.updateElements(s,e),this._previousElements=s}this._previousState=e,this._rootDomNode.style.height=`${n.position+n.height}px`}createElement(e,t,i){const n=e.startIndex,s=document.createElement("div");s.style.top=`${e.position}px`,this.tree.options.setRowHeight!==!1&&(s.style.height=`${e.height}px`),this.tree.options.setRowLineHeight!==!1&&(s.style.lineHeight=`${e.height}px`),s.classList.add("monaco-tree-sticky-row"),s.classList.add("monaco-list-row"),s.setAttribute("data-index",`${n}`),s.setAttribute("data-parity",n%2===0?"even":"odd"),s.setAttribute("id",this.view.getElementID(n));const r=this.setAccessibilityAttributes(s,e.node.element,t,i),a=this.treeDelegate.getTemplateId(e.node),l=this.treeRenderers.find(g=>g.templateId===a);if(!l)throw new Error(`No renderer found for template id ${a}`);let c=e.node;c===this.tree.getNode(this.tree.getNodeLocation(e.node))&&(c=new Proxy(e.node,{}));const u=l.renderTemplate(s);l.renderElement(c,e.startIndex,u,e.height);const f=it(()=>{r.dispose(),l.disposeElement(c,e.startIndex,u,e.height),l.disposeTemplate(u),s.remove()});return{element:s,disposable:f}}setAccessibilityAttributes(e,t,i,n){if(!this.accessibilityProvider)return X.None;this.accessibilityProvider.getSetSize&&e.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(t,i,n))),this.accessibilityProvider.getPosInSet&&e.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(t,i))),this.accessibilityProvider.getRole&&e.setAttribute("role",this.accessibilityProvider.getRole(t)??"treeitem");const s=this.accessibilityProvider.getAriaLabel(t),r=s&&typeof s!="string"?s:Cc(s),a=bt(c=>{const u=c.readObservable(r);u?e.setAttribute("aria-label",u):e.removeAttribute("aria-label")});typeof s=="string"||s&&e.setAttribute("aria-label",s.get());const l=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(t);return typeof l=="number"&&e.setAttribute("aria-level",`${l}`),e.setAttribute("aria-selected",String(!1)),a}setVisible(e){this._rootDomNode.classList.toggle("empty",!e),e||this.stickyScrollFocus.updateElements([],void 0)}domFocus(){this.stickyScrollFocus.domFocus()}focusedLast(){return this.stickyScrollFocus.focusedLast()}dispose(){this.stickyScrollFocus.dispose(),this._previousStateDisposables.dispose(),this._rootDomNode.remove()}};class w5e extends X{get domHasFocus(){return this._domHasFocus}set domHasFocus(e){e!==this._domHasFocus&&(this._onDidChangeHasFocus.fire(e),this._domHasFocus=e)}constructor(e,t){super(),this.container=e,this.view=t,this.focusedIndex=-1,this.elements=[],this._onDidChangeHasFocus=new Y,this.onDidChangeHasFocus=this._onDidChangeHasFocus.event,this._onContextMenu=new Y,this.onContextMenu=this._onContextMenu.event,this._domHasFocus=!1,this._register(se(this.container,"focus",()=>this.onFocus())),this._register(se(this.container,"blur",()=>this.onBlur())),this._register(this.view.onDidFocus(()=>this.toggleStickyScrollFocused(!1))),this._register(this.view.onKeyDown(i=>this.onKeyDown(i))),this._register(this.view.onMouseDown(i=>this.onMouseDown(i))),this._register(this.view.onContextMenu(i=>this.handleContextMenu(i)))}handleContextMenu(e){const t=e.browserEvent.target;if(!WD(t)&&!ck(t)){this.focusedLast()&&this.view.domFocus();return}if(!Hf(e.browserEvent)){if(!this.state)throw new Error("Context menu should not be triggered when state is undefined");const r=this.state.stickyNodes.findIndex(a=>{var l;return a.node.element===((l=e.element)==null?void 0:l.element)});if(r===-1)throw new Error("Context menu should not be triggered when element is not in sticky scroll widget");this.container.focus(),this.setFocus(r);return}if(!this.state||this.focusedIndex<0)throw new Error("Context menu key should not be triggered when focus is not in sticky scroll widget");const n=this.state.stickyNodes[this.focusedIndex].node.element,s=this.elements[this.focusedIndex];this._onContextMenu.fire({element:n,anchor:s,browserEvent:e.browserEvent,isStickyScroll:!0})}onKeyDown(e){if(this.domHasFocus&&this.state){if(e.key==="ArrowUp")this.setFocusedElement(Math.max(0,this.focusedIndex-1)),e.preventDefault(),e.stopPropagation();else if(e.key==="ArrowDown"||e.key==="ArrowRight"){if(this.focusedIndex>=this.state.count-1){const t=this.state.stickyNodes[this.state.count-1].startIndex+1;this.view.domFocus(),this.view.setFocus([t]),this.scrollNodeUnderWidget(t,this.state)}else this.setFocusedElement(this.focusedIndex+1);e.preventDefault(),e.stopPropagation()}}}onMouseDown(e){const t=e.browserEvent.target;!WD(t)&&!ck(t)||(e.browserEvent.preventDefault(),e.browserEvent.stopPropagation())}updateElements(e,t){if(t&&t.count===0)throw new Error("Sticky scroll state must be undefined when there are no sticky nodes");if(t&&t.count!==e.length)throw new Error("Sticky scroll focus received illigel state");const i=this.focusedIndex;if(this.removeFocus(),this.elements=e,this.state=t,t){const n=Wr(i,0,t.count-1);this.setFocus(n)}else this.domHasFocus&&this.view.domFocus();this.container.tabIndex=t?0:-1}setFocusedElement(e){const t=this.state;if(!t)throw new Error("Cannot set focus when state is undefined");if(this.setFocus(e),!(e<t.count-1)&&t.lastNodePartiallyVisible()){const i=t.stickyNodes[e];this.scrollNodeUnderWidget(i.endIndex+1,t)}}scrollNodeUnderWidget(e,t){const i=t.stickyNodes[t.count-1],n=t.count>1?t.stickyNodes[t.count-2]:void 0,s=this.view.getElementTop(e),r=n?n.position+n.height+i.height:i.height;this.view.scrollTop=s-r}domFocus(){if(!this.state)throw new Error("Cannot focus when state is undefined");this.container.focus()}focusedLast(){return this.state?this.view.getHTMLElement().classList.contains("sticky-scroll-focused"):!1}removeFocus(){this.focusedIndex!==-1&&(this.toggleElementFocus(this.elements[this.focusedIndex],!1),this.focusedIndex=-1)}setFocus(e){if(0>e)throw new Error("addFocus() can not remove focus");if(!this.state&&e>=0)throw new Error("Cannot set focus index when state is undefined");if(this.state&&e>=this.state.count)throw new Error("Cannot set focus index to an index that does not exist");const t=this.focusedIndex;t>=0&&this.toggleElementFocus(this.elements[t],!1),e>=0&&this.toggleElementFocus(this.elements[e],!0),this.focusedIndex=e}toggleElementFocus(e,t){this.toggleElementActiveFocus(e,t&&this.domHasFocus),this.toggleElementPassiveFocus(e,t)}toggleCurrentElementActiveFocus(e){this.focusedIndex!==-1&&this.toggleElementActiveFocus(this.elements[this.focusedIndex],e)}toggleElementActiveFocus(e,t){e.classList.toggle("focused",t)}toggleElementPassiveFocus(e,t){e.classList.toggle("passive-focused",t)}toggleStickyScrollFocused(e){this.view.getHTMLElement().classList.toggle("sticky-scroll-focused",e)}onFocus(){if(!this.state||this.elements.length===0)throw new Error("Cannot focus when state is undefined or elements are empty");this.domHasFocus=!0,this.toggleStickyScrollFocused(!0),this.toggleCurrentElementActiveFocus(!0),this.focusedIndex===-1&&this.setFocus(0)}onBlur(){this.domHasFocus=!1,this.toggleCurrentElementActiveFocus(!1)}dispose(){this.toggleStickyScrollFocused(!1),this._onDidChangeHasFocus.fire(!1),super.dispose()}}function kR(o){let e=Fv.Unknown;return qH(o.browserEvent.target,"monaco-tl-twistie","monaco-tl-row")?e=Fv.Twistie:qH(o.browserEvent.target,"monaco-tl-contents","monaco-tl-row")?e=Fv.Element:qH(o.browserEvent.target,"monaco-tree-type-filter","monaco-list")&&(e=Fv.Filter),{browserEvent:o.browserEvent,element:o.element?o.element.element:null,target:e}}function S5e(o){const e=WD(o.browserEvent.target);return{element:o.element?o.element.element:null,browserEvent:o.browserEvent,anchor:o.anchor,isStickyScroll:e}}function EM(o,e){e(o),o.children.forEach(t=>EM(t,e))}class W7{get nodeSet(){return this._nodeSet||(this._nodeSet=this.createNodeSet()),this._nodeSet}constructor(e,t){this.getFirstViewElementWithTrait=e,this.identityProvider=t,this.nodes=[],this._onDidChange=new Y,this.onDidChange=this._onDidChange.event}set(e,t){!(t!=null&&t.__forceEvent)&&En(this.nodes,e)||this._set(e,!1,t)}_set(e,t,i){if(this.nodes=[...e],this.elements=void 0,this._nodeSet=void 0,!t){const n=this;this._onDidChange.fire({get elements(){return n.get()},browserEvent:i})}}get(){return this.elements||(this.elements=this.nodes.map(e=>e.element)),[...this.elements]}getNodes(){return this.nodes}has(e){return this.nodeSet.has(e)}onDidModelSplice({insertedNodes:e,deletedNodes:t}){if(!this.identityProvider){const l=this.createNodeSet(),c=u=>l.delete(u);t.forEach(u=>EM(u,c)),this.set([...l.values()]);return}const i=new Set,n=l=>i.add(this.identityProvider.getId(l.element).toString());t.forEach(l=>EM(l,n));const s=new Map,r=l=>s.set(this.identityProvider.getId(l.element).toString(),l);e.forEach(l=>EM(l,r));const a=[];for(const l of this.nodes){const c=this.identityProvider.getId(l.element).toString();if(!i.has(c))a.push(l);else{const f=s.get(c);f&&f.visible&&a.push(f)}}if(this.nodes.length>0&&a.length===0){const l=this.getFirstViewElementWithTrait();l&&a.push(l)}this._set(a,!0)}createNodeSet(){const e=new Set;for(const t of this.nodes)e.add(t);return e}}class L5e extends kue{constructor(e,t,i){super(e),this.tree=t,this.stickyScrollProvider=i}onViewPointer(e){if(wue(e.browserEvent.target)||hm(e.browserEvent.target)||Wx(e.browserEvent.target)||e.browserEvent.isHandledByList)return;const t=e.element;if(!t)return super.onViewPointer(e);if(this.isSelectionRangeChangeEvent(e)||this.isSelectionSingleChangeEvent(e))return super.onViewPointer(e);const i=e.browserEvent.target,n=i.classList.contains("monaco-tl-twistie")||i.classList.contains("monaco-icon-label")&&i.classList.contains("folder-icon")&&e.browserEvent.offsetX<16,s=ck(e.browserEvent.target);let r=!1;if(s?r=!0:typeof this.tree.expandOnlyOnTwistieClick=="function"?r=this.tree.expandOnlyOnTwistieClick(t.element):r=!!this.tree.expandOnlyOnTwistieClick,s)this.handleStickyScrollMouseEvent(e,t);else{if(r&&!n&&e.browserEvent.detail!==2)return super.onViewPointer(e);if(!this.tree.expandOnDoubleClick&&e.browserEvent.detail===2)return super.onViewPointer(e)}if(t.collapsible&&(!s||n)){const a=this.tree.getNodeLocation(t),l=e.browserEvent.altKey;if(this.tree.setFocus([a]),this.tree.toggleCollapsed(a,l),n){e.browserEvent.isHandledByList=!0;return}}s||super.onViewPointer(e)}handleStickyScrollMouseEvent(e,t){if(IOe(e.browserEvent.target)||TOe(e.browserEvent.target))return;const i=this.stickyScrollProvider();if(!i)throw new Error("Sticky scroll controller not found");const n=this.list.indexOf(t),s=this.list.getElementTop(n),r=i.nodePositionTopBelowWidget(t);this.tree.scrollTop=s-r,this.list.domFocus(),this.list.setFocus([n]),this.list.setSelection([n])}onDoubleClick(e){e.browserEvent.target.classList.contains("monaco-tl-twistie")||!this.tree.expandOnDoubleClick||e.browserEvent.isHandledByList||super.onDoubleClick(e)}onMouseDown(e){const t=e.browserEvent.target;if(!WD(t)&&!ck(t)){super.onMouseDown(e);return}}onContextMenu(e){const t=e.browserEvent.target;if(!WD(t)&&!ck(t)){super.onContextMenu(e);return}}}class x5e extends Xl{constructor(e,t,i,n,s,r,a,l){super(e,t,i,n,l),this.focusTrait=s,this.selectionTrait=r,this.anchorTrait=a}createMouseController(e){return new L5e(this,e.tree,e.stickyScrollProvider)}splice(e,t,i=[]){if(super.splice(e,t,i),i.length===0)return;const n=[],s=[];let r;i.forEach((a,l)=>{this.focusTrait.has(a)&&n.push(e+l),this.selectionTrait.has(a)&&s.push(e+l),this.anchorTrait.has(a)&&(r=e+l)}),n.length>0&&super.setFocus(bg([...super.getFocus(),...n])),s.length>0&&super.setSelection(bg([...super.getSelection(),...s])),typeof r=="number"&&super.setAnchor(r)}setFocus(e,t,i=!1){super.setFocus(e,t),i||this.focusTrait.set(e.map(n=>this.element(n)),t)}setSelection(e,t,i=!1){super.setSelection(e,t),i||this.selectionTrait.set(e.map(n=>this.element(n)),t)}setAnchor(e,t=!1){super.setAnchor(e),t||(typeof e>"u"?this.anchorTrait.set([]):this.anchorTrait.set([this.element(e)]))}}class She{get onDidScroll(){return this.view.onDidScroll}get onDidChangeFocus(){return this.eventBufferer.wrapEvent(this.focus.onDidChange)}get onDidChangeSelection(){return this.eventBufferer.wrapEvent(this.selection.onDidChange)}get onMouseDblClick(){return Ee.filter(Ee.map(this.view.onMouseDblClick,kR),e=>e.target!==Fv.Filter)}get onMouseOver(){return Ee.map(this.view.onMouseOver,kR)}get onMouseOut(){return Ee.map(this.view.onMouseOut,kR)}get onContextMenu(){var e;return Ee.any(Ee.filter(Ee.map(this.view.onContextMenu,S5e),t=>!t.isStickyScroll),((e=this.stickyScrollController)==null?void 0:e.onContextMenu)??Ee.None)}get onPointer(){return Ee.map(this.view.onPointer,kR)}get onKeyDown(){return this.view.onKeyDown}get onDidFocus(){return this.view.onDidFocus}get onDidChangeModel(){return Ee.signal(this.model.onDidSplice)}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get findMode(){var e;return((e=this.findController)==null?void 0:e.mode)??sg.Highlight}set findMode(e){this.findController&&(this.findController.mode=e)}get findMatchType(){var e;return((e=this.findController)==null?void 0:e.matchType)??mC.Fuzzy}set findMatchType(e){this.findController&&(this.findController.matchType=e)}get expandOnDoubleClick(){return typeof this._options.expandOnDoubleClick>"u"?!0:this._options.expandOnDoubleClick}get expandOnlyOnTwistieClick(){return typeof this._options.expandOnlyOnTwistieClick>"u"?!0:this._options.expandOnlyOnTwistieClick}get onDidDispose(){return this.view.onDidDispose}constructor(e,t,i,n,s={}){this._user=e,this._options=s,this.eventBufferer=new KE,this.onDidChangeFindOpenState=Ee.None,this.onDidChangeStickyScrollFocused=Ee.None,this.disposables=new le,this._onWillRefilter=new Y,this.onWillRefilter=this._onWillRefilter.event,this._onDidUpdateOptions=new Y,this.treeDelegate=new sG(i);const r=new Ate,a=new Ate,l=this.disposables.add(new p5e(a.event)),c=new Qq;this.renderers=n.map(_=>new iz(_,()=>this.model,r.event,l,c,s));for(const _ of this.renderers)this.disposables.add(_);let u;s.keyboardNavigationLabelProvider&&(u=new m5e(this,s.keyboardNavigationLabelProvider,s.filter),s={...s,filter:u},this.disposables.add(u)),this.focus=new W7(()=>this.view.getFocusedElements()[0],s.identityProvider),this.selection=new W7(()=>this.view.getSelectedElements()[0],s.identityProvider),this.anchor=new W7(()=>this.view.getAnchorElement(),s.identityProvider),this.view=new x5e(e,t,this.treeDelegate,this.renderers,this.focus,this.selection,this.anchor,{...g5e(()=>this.model,s),tree:this,stickyScrollProvider:()=>this.stickyScrollController}),this.model=this.createModel(e,this.view,s),r.input=this.model.onDidChangeCollapseState;const f=Ee.forEach(this.model.onDidSplice,_=>{this.eventBufferer.bufferEvents(()=>{this.focus.onDidModelSplice(_),this.selection.onDidModelSplice(_)})},this.disposables);f(()=>null,null,this.disposables);const g=this.disposables.add(new Y),p=this.disposables.add(new xc(0));if(this.disposables.add(Ee.any(f,this.focus.onDidChange,this.selection.onDidChange)(()=>{p.trigger(()=>{const _=new Set;for(const b of this.focus.getNodes())_.add(b);for(const b of this.selection.getNodes())_.add(b);g.fire([..._.values()])})})),a.input=g.event,s.keyboardSupport!==!1){const _=Ee.chain(this.view.onKeyDown,b=>b.filter(y=>!hm(y.target)).map(y=>new Zi(y)));Ee.chain(_,b=>b.filter(y=>y.keyCode===15))(this.onLeftArrow,this,this.disposables),Ee.chain(_,b=>b.filter(y=>y.keyCode===17))(this.onRightArrow,this,this.disposables),Ee.chain(_,b=>b.filter(y=>y.keyCode===10))(this.onSpace,this,this.disposables)}if((s.findWidgetEnabled??!0)&&s.keyboardNavigationLabelProvider&&s.contextViewProvider){const _=this.options.findWidgetStyles?{styles:this.options.findWidgetStyles}:void 0;this.findController=new _5e(this,this.model,this.view,u,s.contextViewProvider,_),this.focusNavigationFilter=b=>this.findController.shouldAllowFocus(b),this.onDidChangeFindOpenState=this.findController.onDidChangeOpenState,this.disposables.add(this.findController),this.onDidChangeFindMode=this.findController.onDidChangeMode,this.onDidChangeFindMatchType=this.findController.onDidChangeMatchType}else this.onDidChangeFindMode=Ee.None,this.onDidChangeFindMatchType=Ee.None;s.enableStickyScroll&&(this.stickyScrollController=new Tse(this,this.model,this.view,this.renderers,this.treeDelegate,s),this.onDidChangeStickyScrollFocused=this.stickyScrollController.onDidChangeHasFocus),this.styleElement=$l(this.view.getHTMLElement()),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===_S.Always)}updateOptions(e={}){var t;this._options={...this._options,...e};for(const i of this.renderers)i.updateOptions(e);this.view.updateOptions(this._options),(t=this.findController)==null||t.updateOptions(e),this.updateStickyScroll(e),this._onDidUpdateOptions.fire(this._options),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===_S.Always)}get options(){return this._options}updateStickyScroll(e){var t;!this.stickyScrollController&&this._options.enableStickyScroll?(this.stickyScrollController=new Tse(this,this.model,this.view,this.renderers,this.treeDelegate,this._options),this.onDidChangeStickyScrollFocused=this.stickyScrollController.onDidChangeHasFocus):this.stickyScrollController&&!this._options.enableStickyScroll&&(this.onDidChangeStickyScrollFocused=Ee.None,this.stickyScrollController.dispose(),this.stickyScrollController=void 0),(t=this.stickyScrollController)==null||t.updateOptions(e)}getHTMLElement(){return this.view.getHTMLElement()}get scrollTop(){return this.view.scrollTop}set scrollTop(e){this.view.scrollTop=e}get scrollHeight(){return this.view.scrollHeight}get renderHeight(){return this.view.renderHeight}get ariaLabel(){return this.view.ariaLabel}set ariaLabel(e){this.view.ariaLabel=e}domFocus(){var e;(e=this.stickyScrollController)!=null&&e.focusedLast()?this.stickyScrollController.domFocus():this.view.domFocus()}layout(e,t){var i;this.view.layout(e,t),Rm(t)&&((i=this.findController)==null||i.layout(t))}style(e){const t=`.${this.view.domId}`,i=[];e.treeIndentGuidesStroke&&(i.push(`.monaco-list${t}:hover .monaco-tl-indent > .indent-guide, .monaco-list${t}.always .monaco-tl-indent > .indent-guide  { border-color: ${e.treeInactiveIndentGuidesStroke}; }`),i.push(`.monaco-list${t} .monaco-tl-indent > .indent-guide.active { border-color: ${e.treeIndentGuidesStroke}; }`));const n=e.treeStickyScrollBackground??e.listBackground;n&&(i.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container { background-color: ${n}; }`),i.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container .monaco-tree-sticky-row { background-color: ${n}; }`)),e.treeStickyScrollBorder&&i.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container { border-bottom: 1px solid ${e.treeStickyScrollBorder}; }`),e.treeStickyScrollShadow&&i.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container .monaco-tree-sticky-container-shadow { box-shadow: ${e.treeStickyScrollShadow} 0 6px 6px -6px inset; height: 3px; }`),e.listFocusForeground&&(i.push(`.monaco-list${t}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),i.push(`.monaco-list${t}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused { color: inherit; }`));const s=fg(e.listFocusAndSelectionOutline,fg(e.listSelectionOutline,e.listFocusOutline??""));s&&(i.push(`.monaco-list${t}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused.selected { outline: 1px solid ${s}; outline-offset: -1px;}`),i.push(`.monaco-list${t}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused.selected { outline: inherit;}`)),e.listFocusOutline&&(i.push(`.monaco-list${t}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }`),i.push(`.monaco-list${t}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused { outline: inherit; }`),i.push(`.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.passive-focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }`),i.push(`.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused.sticky-scroll-focused .monaco-list-rows .monaco-list-row.focused { outline: inherit; }`),i.push(`.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused:not(.sticky-scroll-focused) .monaco-tree-sticky-container .monaco-list-rows .monaco-list-row.focused { outline: inherit; }`)),this.styleElement.textContent=i.join(`
`),this.view.style(e)}getParentElement(e){const t=this.model.getParentNodeLocation(e);return this.model.getNode(t).element}getFirstElementChild(e){return this.model.getFirstElementChild(e)}getNode(e){return this.model.getNode(e)}getNodeLocation(e){return this.model.getNodeLocation(e)}collapse(e,t=!1){return this.model.setCollapsed(e,!0,t)}expand(e,t=!1){return this.model.setCollapsed(e,!1,t)}toggleCollapsed(e,t=!1){return this.model.setCollapsed(e,void 0,t)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}refilter(){this._onWillRefilter.fire(void 0),this.model.refilter()}setSelection(e,t){this.eventBufferer.bufferEvents(()=>{const i=e.map(s=>this.model.getNode(s));this.selection.set(i,t);const n=e.map(s=>this.model.getListIndex(s)).filter(s=>s>-1);this.view.setSelection(n,t,!0)})}getSelection(){return this.selection.get()}setFocus(e,t){this.eventBufferer.bufferEvents(()=>{const i=e.map(s=>this.model.getNode(s));this.focus.set(i,t);const n=e.map(s=>this.model.getListIndex(s)).filter(s=>s>-1);this.view.setFocus(n,t,!0)})}focusNext(e=1,t=!1,i,n=Hf(i)&&i.altKey?void 0:this.focusNavigationFilter){this.view.focusNext(e,t,i,n)}focusPrevious(e=1,t=!1,i,n=Hf(i)&&i.altKey?void 0:this.focusNavigationFilter){this.view.focusPrevious(e,t,i,n)}focusNextPage(e,t=Hf(e)&&e.altKey?void 0:this.focusNavigationFilter){return this.view.focusNextPage(e,t)}focusPreviousPage(e,t=Hf(e)&&e.altKey?void 0:this.focusNavigationFilter){return this.view.focusPreviousPage(e,t,()=>{var i;return((i=this.stickyScrollController)==null?void 0:i.height)??0})}focusLast(e,t=Hf(e)&&e.altKey?void 0:this.focusNavigationFilter){this.view.focusLast(e,t)}focusFirst(e,t=Hf(e)&&e.altKey?void 0:this.focusNavigationFilter){this.view.focusFirst(e,t)}getFocus(){return this.focus.get()}reveal(e,t){this.model.expandTo(e);const i=this.model.getListIndex(e);if(i!==-1)if(!this.stickyScrollController)this.view.reveal(i,t);else{const n=this.stickyScrollController.nodePositionTopBelowWidget(this.getNode(e));this.view.reveal(i,t,n)}}onLeftArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const i=t[0],n=this.model.getNodeLocation(i);if(!this.model.setCollapsed(n,!0)){const r=this.model.getParentNodeLocation(n);if(!r)return;const a=this.model.getListIndex(r);this.view.reveal(a),this.view.setFocus([a])}}onRightArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const i=t[0],n=this.model.getNodeLocation(i);if(!this.model.setCollapsed(n,!1)){if(!i.children.some(l=>l.visible))return;const[r]=this.view.getFocus(),a=r+1;this.view.reveal(a),this.view.setFocus([a])}}onSpace(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const i=t[0],n=this.model.getNodeLocation(i),s=e.browserEvent.altKey;this.model.setCollapsed(n,void 0,s)}dispose(){var e;$i(this.disposables),(e=this.stickyScrollController)==null||e.dispose(),this.view.dispose()}}class oG{constructor(e,t,i={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.nodesByIdentity=new Map,this.model=new u5e(e,t,null,i),this.onDidSplice=this.model.onDidSplice,this.onDidChangeCollapseState=this.model.onDidChangeCollapseState,this.onDidChangeRenderNodeCount=this.model.onDidChangeRenderNodeCount,i.sorter&&(this.sorter={compare(n,s){return i.sorter.compare(n.element,s.element)}}),this.identityProvider=i.identityProvider}setChildren(e,t=ti.empty(),i={}){const n=this.getElementLocation(e);this._setChildren(n,this.preserveCollapseState(t),i)}_setChildren(e,t=ti.empty(),i){const n=new Set,s=new Set,r=l=>{var u;if(l.element===null)return;const c=l;if(n.add(c.element),this.nodes.set(c.element,c),this.identityProvider){const f=this.identityProvider.getId(c.element).toString();s.add(f),this.nodesByIdentity.set(f,c)}(u=i.onDidCreateNode)==null||u.call(i,c)},a=l=>{var u;if(l.element===null)return;const c=l;if(n.has(c.element)||this.nodes.delete(c.element),this.identityProvider){const f=this.identityProvider.getId(c.element).toString();s.has(f)||this.nodesByIdentity.delete(f)}(u=i.onDidDeleteNode)==null||u.call(i,c)};this.model.splice([...e,0],Number.MAX_VALUE,t,{...i,onDidCreateNode:r,onDidDeleteNode:a})}preserveCollapseState(e=ti.empty()){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),ti.map(e,t=>{let i=this.nodes.get(t.element);if(!i&&this.identityProvider){const r=this.identityProvider.getId(t.element).toString();i=this.nodesByIdentity.get(r)}if(!i){let r;return typeof t.collapsed>"u"?r=void 0:t.collapsed===Dl.Collapsed||t.collapsed===Dl.PreserveOrCollapsed?r=!0:t.collapsed===Dl.Expanded||t.collapsed===Dl.PreserveOrExpanded?r=!1:r=!!t.collapsed,{...t,children:this.preserveCollapseState(t.children),collapsed:r}}const n=typeof t.collapsible=="boolean"?t.collapsible:i.collapsible;let s;return typeof t.collapsed>"u"||t.collapsed===Dl.PreserveOrCollapsed||t.collapsed===Dl.PreserveOrExpanded?s=i.collapsed:t.collapsed===Dl.Collapsed?s=!0:t.collapsed===Dl.Expanded?s=!1:s=!!t.collapsed,{...t,collapsible:n,collapsed:s,children:this.preserveCollapseState(t.children)}})}rerender(e){const t=this.getElementLocation(e);this.model.rerender(t)}getFirstElementChild(e=null){const t=this.getElementLocation(e);return this.model.getFirstElementChild(t)}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getElementLocation(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getElementLocation(e);return this.model.getListRenderCount(t)}isCollapsible(e){const t=this.getElementLocation(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const i=this.getElementLocation(e);return this.model.setCollapsible(i,t)}isCollapsed(e){const t=this.getElementLocation(e);return this.model.isCollapsed(t)}setCollapsed(e,t,i){const n=this.getElementLocation(e);return this.model.setCollapsed(n,t,i)}expandTo(e){const t=this.getElementLocation(e);this.model.expandTo(t)}refilter(){this.model.refilter()}getNode(e=null){if(e===null)return this.model.getNode(this.model.rootRef);const t=this.nodes.get(e);if(!t)throw new Al(this.user,`Tree element not found: ${e}`);return t}getNodeLocation(e){return e.element}getParentNodeLocation(e){if(e===null)throw new Al(this.user,"Invalid getParentNodeLocation call");const t=this.nodes.get(e);if(!t)throw new Al(this.user,`Tree element not found: ${e}`);const i=this.model.getNodeLocation(t),n=this.model.getParentNodeLocation(i);return this.model.getNode(n).element}getElementLocation(e){if(e===null)return[];const t=this.nodes.get(e);if(!t)throw new Al(this.user,`Tree element not found: ${e}`);return this.model.getNodeLocation(t)}}function IM(o){const e=[o.element],t=o.incompressible||!1;return{element:{elements:e,incompressible:t},children:ti.map(ti.from(o.children),IM),collapsible:o.collapsible,collapsed:o.collapsed}}function TM(o){const e=[o.element],t=o.incompressible||!1;let i,n;for(;[n,i]=ti.consume(ti.from(o.children),2),!(n.length!==1||n[0].incompressible);)o=n[0],e.push(o.element);return{element:{elements:e,incompressible:t},children:ti.map(ti.concat(n,i),TM),collapsible:o.collapsible,collapsed:o.collapsed}}function nz(o,e=0){let t;return e<o.element.elements.length-1?t=[nz(o,e+1)]:t=ti.map(ti.from(o.children),i=>nz(i,0)),e===0&&o.element.incompressible?{element:o.element.elements[e],children:t,incompressible:!0,collapsible:o.collapsible,collapsed:o.collapsed}:{element:o.element.elements[e],children:t,collapsible:o.collapsible,collapsed:o.collapsed}}function Nse(o){return nz(o,0)}function Lhe(o,e,t){return o.element===e?{...o,children:t}:{...o,children:ti.map(ti.from(o.children),i=>Lhe(i,e,t))}}const k5e=o=>({getId(e){return e.elements.map(t=>o.getId(t).toString()).join("\0")}});class D5e{get onDidSplice(){return this.model.onDidSplice}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get onDidChangeRenderNodeCount(){return this.model.onDidChangeRenderNodeCount}constructor(e,t,i={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.model=new oG(e,t,i),this.enabled=typeof i.compressionEnabled>"u"?!0:i.compressionEnabled,this.identityProvider=i.identityProvider}setChildren(e,t=ti.empty(),i){const n=i.diffIdentityProvider&&k5e(i.diffIdentityProvider);if(e===null){const _=ti.map(t,this.enabled?TM:IM);this._setChildren(null,_,{diffIdentityProvider:n,diffDepth:1/0});return}const s=this.nodes.get(e);if(!s)throw new Al(this.user,"Unknown compressed tree node");const r=this.model.getNode(s),a=this.model.getParentNodeLocation(s),l=this.model.getNode(a),c=Nse(r),u=Lhe(c,e,t),f=(this.enabled?TM:IM)(u),g=i.diffIdentityProvider?(_,b)=>i.diffIdentityProvider.getId(_)===i.diffIdentityProvider.getId(b):void 0;if(En(f.element.elements,r.element.elements,g)){this._setChildren(s,f.children||ti.empty(),{diffIdentityProvider:n,diffDepth:1});return}const p=l.children.map(_=>_===r?f:_);this._setChildren(l.element,p,{diffIdentityProvider:n,diffDepth:r.depth-l.depth})}isCompressionEnabled(){return this.enabled}setCompressionEnabled(e){if(e===this.enabled)return;this.enabled=e;const i=this.model.getNode().children,n=ti.map(i,Nse),s=ti.map(n,e?TM:IM);this._setChildren(null,s,{diffIdentityProvider:this.identityProvider,diffDepth:1/0})}_setChildren(e,t,i){const n=new Set,s=a=>{for(const l of a.element.elements)n.add(l),this.nodes.set(l,a.element)},r=a=>{for(const l of a.element.elements)n.has(l)||this.nodes.delete(l)};this.model.setChildren(e,t,{...i,onDidCreateNode:s,onDidDeleteNode:r})}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getCompressedNode(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getCompressedNode(e);return this.model.getListRenderCount(t)}getNode(e){if(typeof e>"u")return this.model.getNode();const t=this.getCompressedNode(e);return this.model.getNode(t)}getNodeLocation(e){const t=this.model.getNodeLocation(e);return t===null?null:t.elements[t.elements.length-1]}getParentNodeLocation(e){const t=this.getCompressedNode(e),i=this.model.getParentNodeLocation(t);return i===null?null:i.elements[i.elements.length-1]}getFirstElementChild(e){const t=this.getCompressedNode(e);return this.model.getFirstElementChild(t)}isCollapsible(e){const t=this.getCompressedNode(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const i=this.getCompressedNode(e);return this.model.setCollapsible(i,t)}isCollapsed(e){const t=this.getCompressedNode(e);return this.model.isCollapsed(t)}setCollapsed(e,t,i){const n=this.getCompressedNode(e);return this.model.setCollapsed(n,t,i)}expandTo(e){const t=this.getCompressedNode(e);this.model.expandTo(t)}rerender(e){const t=this.getCompressedNode(e);this.model.rerender(t)}refilter(){this.model.refilter()}getCompressedNode(e){if(e===null)return null;const t=this.nodes.get(e);if(!t)throw new Al(this.user,`Tree element not found: ${e}`);return t}}const E5e=o=>o[o.length-1];class rG{get element(){return this.node.element===null?null:this.unwrapper(this.node.element)}get children(){return this.node.children.map(e=>new rG(this.unwrapper,e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e,t){this.unwrapper=e,this.node=t}}function I5e(o,e){return{splice(t,i,n){e.splice(t,i,n.map(s=>o.map(s)))},updateElementHeight(t,i){e.updateElementHeight(t,i)}}}function T5e(o,e){return{...e,identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(o(t))}},sorter:e.sorter&&{compare(t,i){return e.sorter.compare(t.elements[0],i.elements[0])}},filter:e.filter&&{filter(t,i){return e.filter.filter(o(t),i)}}}}class N5e{get onDidSplice(){return Ee.map(this.model.onDidSplice,({insertedNodes:e,deletedNodes:t})=>({insertedNodes:e.map(i=>this.nodeMapper.map(i)),deletedNodes:t.map(i=>this.nodeMapper.map(i))}))}get onDidChangeCollapseState(){return Ee.map(this.model.onDidChangeCollapseState,({node:e,deep:t})=>({node:this.nodeMapper.map(e),deep:t}))}get onDidChangeRenderNodeCount(){return Ee.map(this.model.onDidChangeRenderNodeCount,e=>this.nodeMapper.map(e))}constructor(e,t,i={}){this.rootRef=null,this.elementMapper=i.elementMapper||E5e;const n=s=>this.elementMapper(s.elements);this.nodeMapper=new iG(s=>new rG(n,s)),this.model=new D5e(e,I5e(this.nodeMapper,t),T5e(n,i))}setChildren(e,t=ti.empty(),i={}){this.model.setChildren(e,t,i)}isCompressionEnabled(){return this.model.isCompressionEnabled()}setCompressionEnabled(e){this.model.setCompressionEnabled(e)}has(e){return this.model.has(e)}getListIndex(e){return this.model.getListIndex(e)}getListRenderCount(e){return this.model.getListRenderCount(e)}getNode(e){return this.nodeMapper.map(this.model.getNode(e))}getNodeLocation(e){return e.element}getParentNodeLocation(e){return this.model.getParentNodeLocation(e)}getFirstElementChild(e){const t=this.model.getFirstElementChild(e);return t===null||typeof t>"u"?t:this.elementMapper(t.elements)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}setCollapsed(e,t,i){return this.model.setCollapsed(e,t,i)}expandTo(e){return this.model.expandTo(e)}rerender(e){return this.model.rerender(e)}refilter(){return this.model.refilter()}getCompressedTreeNode(e=null){return this.model.getNode(e)}}var R5e=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class aG extends She{get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}constructor(e,t,i,n,s={}){super(e,t,i,n,s),this.user=e}setChildren(e,t=ti.empty(),i){this.model.setChildren(e,t,i)}rerender(e){if(e===void 0){this.view.rerender();return}this.model.rerender(e)}hasElement(e){return this.model.has(e)}createModel(e,t,i){return new oG(e,t,i)}}class xhe{get compressedTreeNodeProvider(){return this._compressedTreeNodeProvider()}constructor(e,t,i){this._compressedTreeNodeProvider=e,this.stickyScrollDelegate=t,this.renderer=i,this.templateId=i.templateId,i.onDidChangeTwistieState&&(this.onDidChangeTwistieState=i.onDidChangeTwistieState)}renderTemplate(e){return{compressedTreeNode:void 0,data:this.renderer.renderTemplate(e)}}renderElement(e,t,i,n){let s=this.stickyScrollDelegate.getCompressedNode(e);s||(s=this.compressedTreeNodeProvider.getCompressedTreeNode(e.element)),s.element.elements.length===1?(i.compressedTreeNode=void 0,this.renderer.renderElement(e,t,i.data,n)):(i.compressedTreeNode=s,this.renderer.renderCompressedElements(s,t,i.data,n))}disposeElement(e,t,i,n){var s,r,a,l;i.compressedTreeNode?(r=(s=this.renderer).disposeCompressedElements)==null||r.call(s,i.compressedTreeNode,t,i.data,n):(l=(a=this.renderer).disposeElement)==null||l.call(a,e,t,i.data,n)}disposeTemplate(e){this.renderer.disposeTemplate(e.data)}renderTwistie(e,t){return this.renderer.renderTwistie?this.renderer.renderTwistie(e,t):!1}}R5e([gs],xhe.prototype,"compressedTreeNodeProvider",null);class M5e{constructor(e){this.modelProvider=e,this.compressedStickyNodes=new Map}getCompressedNode(e){return this.compressedStickyNodes.get(e)}constrainStickyScrollNodes(e,t,i){if(this.compressedStickyNodes.clear(),e.length===0)return[];for(let n=0;n<e.length;n++){const s=e[n],r=s.position+s.height;if(n+1<e.length&&r+e[n+1].height>i||n>=t-1&&t<e.length){const l=e.slice(0,n),c=e.slice(n),u=this.compressStickyNodes(c);return[...l,u]}}return e}compressStickyNodes(e){if(e.length===0)throw new Error("Can't compress empty sticky nodes");const t=this.modelProvider();if(!t.isCompressionEnabled())return e[0];const i=[];for(let c=0;c<e.length;c++){const u=e[c],f=t.getCompressedTreeNode(u.node.element);if(f.element){if(c!==0&&f.element.incompressible)break;i.push(...f.element.elements)}}if(i.length<2)return e[0];const n=e[e.length-1],s={elements:i,incompressible:!1},r={...n.node,children:[],element:s},a=new Proxy(e[0].node,{}),l={node:a,startIndex:e[0].startIndex,endIndex:n.endIndex,position:e[0].position,height:e[0].height};return this.compressedStickyNodes.set(a,r),l}}function A5e(o,e){return e&&{...e,keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{getKeyboardNavigationLabel(t){let i;try{i=o().getCompressedTreeNode(t)}catch{return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t)}return i.element.elements.length===1?e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t):e.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(i.element.elements)}}}}class khe extends aG{constructor(e,t,i,n,s={}){const r=()=>this,a=new M5e(()=>this.model),l=n.map(c=>new xhe(r,a,c));super(e,t,i,l,{...A5e(r,s),stickyScrollDelegate:a})}setChildren(e,t=ti.empty(),i){this.model.setChildren(e,t,i)}createModel(e,t,i){return new N5e(e,t,i)}updateOptions(e={}){super.updateOptions(e),typeof e.compressionEnabled<"u"&&this.model.setCompressionEnabled(e.compressionEnabled)}getCompressedTreeNode(e=null){return this.model.getCompressedTreeNode(e)}}function H7(o){return{...o,children:[],refreshPromise:void 0,stale:!0,slow:!1,forceExpanded:!1}}function sz(o,e){return e.parent?e.parent===o?!0:sz(o,e.parent):!1}function P5e(o,e){return o===e||sz(o,e)||sz(e,o)}class lG{get element(){return this.node.element.element}get children(){return this.node.children.map(e=>new lG(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e){this.node=e}}class O5e{constructor(e,t,i){this.renderer=e,this.nodeMapper=t,this.onDidChangeTwistieState=i,this.renderedNodes=new Map,this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,i,n){this.renderer.renderElement(this.nodeMapper.map(e),t,i.templateData,n)}renderTwistie(e,t){return e.slow?(t.classList.add(...ut.asClassNameArray(Se.treeItemLoading)),!0):(t.classList.remove(...ut.asClassNameArray(Se.treeItemLoading)),!1)}disposeElement(e,t,i,n){var s,r;(r=(s=this.renderer).disposeElement)==null||r.call(s,this.nodeMapper.map(e),t,i.templateData,n)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear()}}function Rse(o){return{browserEvent:o.browserEvent,elements:o.elements.map(e=>e.element)}}function Mse(o){return{browserEvent:o.browserEvent,element:o.element&&o.element.element,target:o.target}}class F5e extends hI{constructor(e){super(e.elements.map(t=>t.element)),this.data=e}}function V7(o){return o instanceof hI?new F5e(o):o}class B5e{constructor(e){this.dnd=e}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(i=>i.element),t)}onDragStart(e,t){var i,n;(n=(i=this.dnd).onDragStart)==null||n.call(i,V7(e),t)}onDragOver(e,t,i,n,s,r=!0){return this.dnd.onDragOver(V7(e),t&&t.element,i,n,s)}drop(e,t,i,n,s){this.dnd.drop(V7(e),t&&t.element,i,n,s)}onDragEnd(e){var t,i;(i=(t=this.dnd).onDragEnd)==null||i.call(t,e)}dispose(){this.dnd.dispose()}}function Dhe(o){return o&&{...o,collapseByDefault:!0,identityProvider:o.identityProvider&&{getId(e){return o.identityProvider.getId(e.element)}},dnd:o.dnd&&new B5e(o.dnd),multipleSelectionController:o.multipleSelectionController&&{isSelectionSingleChangeEvent(e){return o.multipleSelectionController.isSelectionSingleChangeEvent({...e,element:e.element})},isSelectionRangeChangeEvent(e){return o.multipleSelectionController.isSelectionRangeChangeEvent({...e,element:e.element})}},accessibilityProvider:o.accessibilityProvider&&{...o.accessibilityProvider,getPosInSet:void 0,getSetSize:void 0,getRole:o.accessibilityProvider.getRole?e=>o.accessibilityProvider.getRole(e.element):()=>"treeitem",isChecked:o.accessibilityProvider.isChecked?e=>{var t;return!!((t=o.accessibilityProvider)!=null&&t.isChecked(e.element))}:void 0,getAriaLabel(e){return o.accessibilityProvider.getAriaLabel(e.element)},getWidgetAriaLabel(){return o.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:o.accessibilityProvider.getWidgetRole?()=>o.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:o.accessibilityProvider.getAriaLevel&&(e=>o.accessibilityProvider.getAriaLevel(e.element)),getActiveDescendantId:o.accessibilityProvider.getActiveDescendantId&&(e=>o.accessibilityProvider.getActiveDescendantId(e.element))},filter:o.filter&&{filter(e,t){return o.filter.filter(e.element,t)}},keyboardNavigationLabelProvider:o.keyboardNavigationLabelProvider&&{...o.keyboardNavigationLabelProvider,getKeyboardNavigationLabel(e){return o.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e.element)}},sorter:void 0,expandOnlyOnTwistieClick:typeof o.expandOnlyOnTwistieClick>"u"?void 0:typeof o.expandOnlyOnTwistieClick!="function"?o.expandOnlyOnTwistieClick:e=>o.expandOnlyOnTwistieClick(e.element),defaultFindVisibility:e=>e.hasChildren&&e.stale?1:typeof o.defaultFindVisibility=="number"?o.defaultFindVisibility:typeof o.defaultFindVisibility>"u"?2:o.defaultFindVisibility(e.element)}}function oz(o,e){e(o),o.children.forEach(t=>oz(t,e))}class Ehe{get onDidScroll(){return this.tree.onDidScroll}get onDidChangeFocus(){return Ee.map(this.tree.onDidChangeFocus,Rse)}get onDidChangeSelection(){return Ee.map(this.tree.onDidChangeSelection,Rse)}get onMouseDblClick(){return Ee.map(this.tree.onMouseDblClick,Mse)}get onPointer(){return Ee.map(this.tree.onPointer,Mse)}get onDidFocus(){return this.tree.onDidFocus}get onDidChangeModel(){return this.tree.onDidChangeModel}get onDidChangeCollapseState(){return this.tree.onDidChangeCollapseState}get onDidChangeFindOpenState(){return this.tree.onDidChangeFindOpenState}get onDidChangeStickyScrollFocused(){return this.tree.onDidChangeStickyScrollFocused}get onDidDispose(){return this.tree.onDidDispose}constructor(e,t,i,n,s,r={}){this.user=e,this.dataSource=s,this.nodes=new Map,this.subTreeRefreshPromises=new Map,this.refreshPromises=new Map,this._onDidRender=new Y,this._onDidChangeNodeSlowState=new Y,this.nodeMapper=new iG(a=>new lG(a)),this.disposables=new le,this.identityProvider=r.identityProvider,this.autoExpandSingleChildren=typeof r.autoExpandSingleChildren>"u"?!1:r.autoExpandSingleChildren,this.sorter=r.sorter,this.getDefaultCollapseState=a=>r.collapseByDefault?r.collapseByDefault(a)?Dl.PreserveOrCollapsed:Dl.PreserveOrExpanded:void 0,this.tree=this.createTree(e,t,i,n,r),this.onDidChangeFindMode=this.tree.onDidChangeFindMode,this.onDidChangeFindMatchType=this.tree.onDidChangeFindMatchType,this.root=H7({element:void 0,parent:null,hasChildren:!0,defaultCollapseState:void 0}),this.identityProvider&&(this.root={...this.root,id:null}),this.nodes.set(null,this.root),this.tree.onDidChangeCollapseState(this._onDidChangeCollapseState,this,this.disposables)}createTree(e,t,i,n,s){const r=new sG(i),a=n.map(c=>new O5e(c,this.nodeMapper,this._onDidChangeNodeSlowState.event)),l=Dhe(s)||{};return new aG(e,t,r,a,l)}updateOptions(e={}){this.tree.updateOptions(e)}getHTMLElement(){return this.tree.getHTMLElement()}get scrollTop(){return this.tree.scrollTop}set scrollTop(e){this.tree.scrollTop=e}get scrollHeight(){return this.tree.scrollHeight}get renderHeight(){return this.tree.renderHeight}domFocus(){this.tree.domFocus()}layout(e,t){this.tree.layout(e,t)}style(e){this.tree.style(e)}getInput(){return this.root.element}async setInput(e,t){this.refreshPromises.forEach(n=>n.cancel()),this.refreshPromises.clear(),this.root.element=e;const i=t&&{viewState:t,focus:[],selection:[]};await this._updateChildren(e,!0,!1,i),i&&(this.tree.setFocus(i.focus),this.tree.setSelection(i.selection)),t&&typeof t.scrollTop=="number"&&(this.scrollTop=t.scrollTop)}async _updateChildren(e=this.root.element,t=!0,i=!1,n,s){if(typeof this.root.element>"u")throw new Al(this.user,"Tree input not set");this.root.refreshPromise&&(await this.root.refreshPromise,await Ee.toPromise(this._onDidRender.event));const r=this.getDataNode(e);if(await this.refreshAndRenderNode(r,t,n,s),i)try{this.tree.rerender(r)}catch{}}rerender(e){if(e===void 0||e===this.root.element){this.tree.rerender();return}const t=this.getDataNode(e);this.tree.rerender(t)}getNode(e=this.root.element){const t=this.getDataNode(e),i=this.tree.getNode(t===this.root?null:t);return this.nodeMapper.map(i)}collapse(e,t=!1){const i=this.getDataNode(e);return this.tree.collapse(i===this.root?null:i,t)}async expand(e,t=!1){if(typeof this.root.element>"u")throw new Al(this.user,"Tree input not set");this.root.refreshPromise&&(await this.root.refreshPromise,await Ee.toPromise(this._onDidRender.event));const i=this.getDataNode(e);if(this.tree.hasElement(i)&&!this.tree.isCollapsible(i)||(i.refreshPromise&&(await this.root.refreshPromise,await Ee.toPromise(this._onDidRender.event)),i!==this.root&&!i.refreshPromise&&!this.tree.isCollapsed(i)))return!1;const n=this.tree.expand(i===this.root?null:i,t);return i.refreshPromise&&(await this.root.refreshPromise,await Ee.toPromise(this._onDidRender.event)),n}setSelection(e,t){const i=e.map(n=>this.getDataNode(n));this.tree.setSelection(i,t)}getSelection(){return this.tree.getSelection().map(t=>t.element)}setFocus(e,t){const i=e.map(n=>this.getDataNode(n));this.tree.setFocus(i,t)}getFocus(){return this.tree.getFocus().map(t=>t.element)}reveal(e,t){this.tree.reveal(this.getDataNode(e),t)}getParentElement(e){const t=this.tree.getParentElement(this.getDataNode(e));return t&&t.element}getFirstElementChild(e=this.root.element){const t=this.getDataNode(e),i=this.tree.getFirstElementChild(t===this.root?null:t);return i&&i.element}getDataNode(e){const t=this.nodes.get(e===this.root.element?null:e);if(!t)throw new Al(this.user,`Data tree node not found: ${e}`);return t}async refreshAndRenderNode(e,t,i,n){await this.refreshNode(e,t,i),!this.disposables.isDisposed&&this.render(e,i,n)}async refreshNode(e,t,i){let n;if(this.subTreeRefreshPromises.forEach((s,r)=>{!n&&P5e(r,e)&&(n=s.then(()=>this.refreshNode(e,t,i)))}),n)return n;if(e!==this.root&&this.tree.getNode(e).collapsed){e.hasChildren=!!this.dataSource.hasChildren(e.element),e.stale=!0,this.setChildren(e,[],t,i);return}return this.doRefreshSubTree(e,t,i)}async doRefreshSubTree(e,t,i){let n;e.refreshPromise=new Promise(s=>n=s),this.subTreeRefreshPromises.set(e,e.refreshPromise),e.refreshPromise.finally(()=>{e.refreshPromise=void 0,this.subTreeRefreshPromises.delete(e)});try{const s=await this.doRefreshNode(e,t,i);e.stale=!1,await nV.settled(s.map(r=>this.doRefreshSubTree(r,t,i)))}finally{n()}}async doRefreshNode(e,t,i){e.hasChildren=!!this.dataSource.hasChildren(e.element);let n;if(!e.hasChildren)n=Promise.resolve(ti.empty());else{const s=this.doGetChildren(e);if(Ete(s))n=Promise.resolve(s);else{const r=Sg(800);r.then(()=>{e.slow=!0,this._onDidChangeNodeSlowState.fire(e)},a=>null),n=s.finally(()=>r.cancel())}}try{const s=await n;return this.setChildren(e,s,t,i)}catch(s){if(e!==this.root&&this.tree.hasElement(e)&&this.tree.collapse(e),Tc(s))return[];throw s}finally{e.slow&&(e.slow=!1,this._onDidChangeNodeSlowState.fire(e))}}doGetChildren(e){let t=this.refreshPromises.get(e);if(t)return t;const i=this.dataSource.getChildren(e.element);return Ete(i)?this.processChildren(i):(t=Gs(async()=>this.processChildren(await i)),this.refreshPromises.set(e,t),t.finally(()=>{this.refreshPromises.delete(e)}))}_onDidChangeCollapseState({node:e,deep:t}){e.element!==null&&!e.collapsed&&e.element.stale&&(t?this.collapse(e.element.element):this.refreshAndRenderNode(e.element,!1).catch(wt))}setChildren(e,t,i,n){const s=[...t];if(e.children.length===0&&s.length===0)return[];const r=new Map,a=new Map;for(const u of e.children)r.set(u.element,u),this.identityProvider&&a.set(u.id,{node:u,collapsed:this.tree.hasElement(u)&&this.tree.isCollapsed(u)});const l=[],c=s.map(u=>{const f=!!this.dataSource.hasChildren(u);if(!this.identityProvider){const b=H7({element:u,parent:e,hasChildren:f,defaultCollapseState:this.getDefaultCollapseState(u)});return f&&b.defaultCollapseState===Dl.PreserveOrExpanded&&l.push(b),b}const g=this.identityProvider.getId(u).toString(),p=a.get(g);if(p){const b=p.node;return r.delete(b.element),this.nodes.delete(b.element),this.nodes.set(u,b),b.element=u,b.hasChildren=f,i?p.collapsed?(b.children.forEach(y=>oz(y,S=>this.nodes.delete(S.element))),b.children.splice(0,b.children.length),b.stale=!0):l.push(b):f&&!p.collapsed&&l.push(b),b}const _=H7({element:u,parent:e,id:g,hasChildren:f,defaultCollapseState:this.getDefaultCollapseState(u)});return n&&n.viewState.focus&&n.viewState.focus.indexOf(g)>-1&&n.focus.push(_),n&&n.viewState.selection&&n.viewState.selection.indexOf(g)>-1&&n.selection.push(_),(n&&n.viewState.expanded&&n.viewState.expanded.indexOf(g)>-1||f&&_.defaultCollapseState===Dl.PreserveOrExpanded)&&l.push(_),_});for(const u of r.values())oz(u,f=>this.nodes.delete(f.element));for(const u of c)this.nodes.set(u.element,u);return e.children.splice(0,e.children.length,...c),e!==this.root&&this.autoExpandSingleChildren&&c.length===1&&l.length===0&&(c[0].forceExpanded=!0,l.push(c[0])),l}render(e,t,i){const n=e.children.map(r=>this.asTreeElement(r,t)),s=i&&{...i,diffIdentityProvider:i.diffIdentityProvider&&{getId(r){return i.diffIdentityProvider.getId(r.element)}}};this.tree.setChildren(e===this.root?null:e,n,s),e!==this.root&&this.tree.setCollapsible(e,e.hasChildren),this._onDidRender.fire()}asTreeElement(e,t){if(e.stale)return{element:e,collapsible:e.hasChildren,collapsed:!0};let i;return t&&t.viewState.expanded&&e.id&&t.viewState.expanded.indexOf(e.id)>-1?i=!1:e.forceExpanded?(i=!1,e.forceExpanded=!1):i=e.defaultCollapseState,{element:e,children:e.hasChildren?ti.map(e.children,n=>this.asTreeElement(n,t)):[],collapsible:e.hasChildren,collapsed:i}}processChildren(e){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),e}dispose(){this.disposables.dispose(),this.tree.dispose()}}class cG{get element(){return{elements:this.node.element.elements.map(e=>e.element),incompressible:this.node.element.incompressible}}get children(){return this.node.children.map(e=>new cG(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e){this.node=e}}class W5e{constructor(e,t,i,n){this.renderer=e,this.nodeMapper=t,this.compressibleNodeMapperProvider=i,this.onDidChangeTwistieState=n,this.renderedNodes=new Map,this.disposables=[],this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,i,n){this.renderer.renderElement(this.nodeMapper.map(e),t,i.templateData,n)}renderCompressedElements(e,t,i,n){this.renderer.renderCompressedElements(this.compressibleNodeMapperProvider().map(e),t,i.templateData,n)}renderTwistie(e,t){return e.slow?(t.classList.add(...ut.asClassNameArray(Se.treeItemLoading)),!0):(t.classList.remove(...ut.asClassNameArray(Se.treeItemLoading)),!1)}disposeElement(e,t,i,n){var s,r;(r=(s=this.renderer).disposeElement)==null||r.call(s,this.nodeMapper.map(e),t,i.templateData,n)}disposeCompressedElements(e,t,i,n){var s,r;(r=(s=this.renderer).disposeCompressedElements)==null||r.call(s,this.compressibleNodeMapperProvider().map(e),t,i.templateData,n)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear(),this.disposables=$i(this.disposables)}}function H5e(o){const e=o&&Dhe(o);return e&&{...e,keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{...e.keyboardNavigationLabelProvider,getCompressedNodeKeyboardNavigationLabel(t){return o.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(t.map(i=>i.element))}}}}class V5e extends Ehe{constructor(e,t,i,n,s,r,a={}){super(e,t,i,s,r,a),this.compressionDelegate=n,this.compressibleNodeMapper=new iG(l=>new cG(l)),this.filter=a.filter}createTree(e,t,i,n,s){const r=new sG(i),a=n.map(c=>new W5e(c,this.nodeMapper,()=>this.compressibleNodeMapper,this._onDidChangeNodeSlowState.event)),l=H5e(s)||{};return new khe(e,t,r,a,l)}asTreeElement(e,t){return{incompressible:this.compressionDelegate.isIncompressible(e.element),...super.asTreeElement(e,t)}}updateOptions(e={}){this.tree.updateOptions(e)}render(e,t,i){if(!this.identityProvider)return super.render(e,t);const n=p=>this.identityProvider.getId(p).toString(),s=p=>{const _=new Set;for(const b of p){const y=this.tree.getCompressedTreeNode(b===this.root?null:b);if(y.element)for(const S of y.element.elements)_.add(n(S.element))}return _},r=s(this.tree.getSelection()),a=s(this.tree.getFocus());super.render(e,t,i);const l=this.getSelection();let c=!1;const u=this.getFocus();let f=!1;const g=p=>{const _=p.element;if(_)for(let b=0;b<_.elements.length;b++){const y=n(_.elements[b].element),S=_.elements[_.elements.length-1].element;r.has(y)&&l.indexOf(S)===-1&&(l.push(S),c=!0),a.has(y)&&u.indexOf(S)===-1&&(u.push(S),f=!0)}p.children.forEach(g)};g(this.tree.getCompressedTreeNode(e===this.root?null:e)),c&&this.setSelection(l),f&&this.setFocus(u)}processChildren(e){return this.filter&&(e=ti.filter(e,t=>{const i=this.filter.filter(t,1),n=z5e(i);if(n===2)throw new Error("Recursive tree visibility not supported in async data compressed trees");return n===1})),super.processChildren(e)}}function z5e(o){return typeof o=="boolean"?o?1:0:nG(o)?jD(o.visibility):jD(o)}class U5e extends She{constructor(e,t,i,n,s,r={}){super(e,t,i,n,r),this.user=e,this.dataSource=s,this.identityProvider=r.identityProvider}createModel(e,t,i){return new oG(e,t,i)}}new Pe("isMac",Kt,v("isMac","Whether the operating system is macOS"));new Pe("isLinux",Qr,v("isLinux","Whether the operating system is Linux"));const P4=new Pe("isWindows",Po,v("isWindows","Whether the operating system is Windows")),Ihe=new Pe("isWeb",NC,v("isWeb","Whether the platform is a web browser"));new Pe("isMacNative",Kt&&!NC,v("isMacNative","Whether the operating system is macOS on a non-browser platform"));new Pe("isIOS",hu,v("isIOS","Whether the operating system is iOS"));new Pe("isMobile",Lle,v("isMobile","Whether the platform is a mobile web browser"));new Pe("isDevelopment",!1,!0);new Pe("productQualityType","",v("productQualityType","Quality type of VS Code"));const The="inputFocus",Nhe=new Pe(The,!1,v("inputFocus","Whether keyboard focus is inside an input box"));var Fg=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},dn=function(o,e){return function(t,i){e(t,i,o)}};const Mc=Gt("listService");class $5e{get lastFocusedList(){return this._lastFocusedWidget}constructor(){this.disposables=new le,this.lists=[],this._lastFocusedWidget=void 0,this._hasCreatedStyleController=!1}setLastFocusedList(e){var t,i;e!==this._lastFocusedWidget&&((t=this._lastFocusedWidget)==null||t.getHTMLElement().classList.remove("last-focused"),this._lastFocusedWidget=e,(i=this._lastFocusedWidget)==null||i.getHTMLElement().classList.add("last-focused"))}register(e,t){if(this._hasCreatedStyleController||(this._hasCreatedStyleController=!0,new Due($l(),"").style(OC)),this.lists.some(n=>n.widget===e))throw new Error("Cannot register the same widget multiple times");const i={widget:e,extraContextKeys:t};return this.lists.push(i),YF(e.getHTMLElement())&&this.setLastFocusedList(e),od(e.onDidFocus(()=>this.setLastFocusedList(e)),it(()=>this.lists.splice(this.lists.indexOf(i),1)),e.onDidDispose(()=>{this.lists=this.lists.filter(n=>n!==i),this._lastFocusedWidget===e&&this.setLastFocusedList(void 0)}))}dispose(){this.disposables.dispose()}}const qD=new Pe("listScrollAtBoundary","none");de.or(qD.isEqualTo("top"),qD.isEqualTo("both"));de.or(qD.isEqualTo("bottom"),qD.isEqualTo("both"));const Rhe=new Pe("listFocus",!0),Mhe=new Pe("treestickyScrollFocused",!1),O4=new Pe("listSupportsMultiselect",!0),Ahe=de.and(Rhe,de.not(The),Mhe.negate()),dG=new Pe("listHasSelectionOrFocus",!1),uG=new Pe("listDoubleSelection",!1),hG=new Pe("listMultiSelection",!1),F4=new Pe("listSelectionNavigation",!1),j5e=new Pe("listSupportsFind",!0),fG=new Pe("treeElementCanCollapse",!1),q5e=new Pe("treeElementHasParent",!1),gG=new Pe("treeElementCanExpand",!1),K5e=new Pe("treeElementHasChild",!1),G5e=new Pe("treeFindOpen",!1),Phe="listTypeNavigationMode",Ohe="listAutomaticKeyboardNavigation";function B4(o,e){const t=o.createScoped(e.getHTMLElement());return Rhe.bindTo(t),t}function W4(o,e){const t=qD.bindTo(o),i=()=>{const n=e.scrollTop===0,s=e.scrollHeight-e.renderHeight-e.scrollTop<1;n&&s?t.set("both"):n?t.set("top"):s?t.set("bottom"):t.set("none")};return i(),e.onDidScroll(i)}const WC="workbench.list.multiSelectModifier",NM="workbench.list.openMode",Sc="workbench.list.horizontalScrolling",pG="workbench.list.defaultFindMode",mG="workbench.list.typeNavigationMode",_P="workbench.list.keyboardNavigation",_u="workbench.list.scrollByPage",_G="workbench.list.defaultFindMatchType",KD="workbench.tree.indent",vP="workbench.tree.renderIndentGuides",vu="workbench.list.smoothScrolling",Bh="workbench.list.mouseWheelScrollSensitivity",Wh="workbench.list.fastScrollSensitivity",bP="workbench.tree.expandMode",CP="workbench.tree.enableStickyScroll",yP="workbench.tree.stickyScrollMaxItemCount";function Hh(o){return o.getValue(WC)==="alt"}class Y5e extends X{constructor(e){super(),this.configurationService=e,this.useAltAsMultipleSelectionModifier=Hh(e),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(e=>{e.affectsConfiguration(WC)&&(this.useAltAsMultipleSelectionModifier=Hh(this.configurationService))}))}isSelectionSingleChangeEvent(e){return this.useAltAsMultipleSelectionModifier?e.browserEvent.altKey:Lue(e)}isSelectionRangeChangeEvent(e){return xue(e)}}function H4(o,e){const t=o.get(Ht),i=o.get(Di),n=new le;return[{...e,keyboardNavigationDelegate:{mightProducePrintableCharacter(r){return i.mightProducePrintableCharacter(r)}},smoothScrolling:!!t.getValue(vu),mouseWheelScrollSensitivity:t.getValue(Bh),fastScrollSensitivity:t.getValue(Wh),multipleSelectionController:e.multipleSelectionController??n.add(new Y5e(t)),keyboardNavigationEventFilter:Q5e(i),scrollByPage:!!t.getValue(_u)},n]}let Ase=class extends Xl{constructor(e,t,i,n,s,r,a,l,c){const u=typeof s.horizontalScrolling<"u"?s.horizontalScrolling:!!l.getValue(Sc),[f,g]=c.invokeFunction(H4,s);super(e,t,i,n,{keyboardSupport:!1,...f,horizontalScrolling:u}),this.disposables.add(g),this.contextKeyService=B4(r,this),this.disposables.add(W4(this.contextKeyService,this)),this.listSupportsMultiSelect=O4.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(s.multipleSelectionSupport!==!1),F4.bindTo(this.contextKeyService).set(!!s.selectionNavigation),this.listHasSelectionOrFocus=dG.bindTo(this.contextKeyService),this.listDoubleSelection=uG.bindTo(this.contextKeyService),this.listMultiSelection=hG.bindTo(this.contextKeyService),this.horizontalScrolling=s.horizontalScrolling,this._useAltAsMultipleSelectionModifier=Hh(l),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),this.updateStyles(s.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const _=this.getSelection(),b=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(_.length>0||b.length>0),this.listMultiSelection.set(_.length>1),this.listDoubleSelection.set(_.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const _=this.getSelection(),b=this.getFocus();this.listHasSelectionOrFocus.set(_.length>0||b.length>0)})),this.disposables.add(l.onDidChangeConfiguration(_=>{_.affectsConfiguration(WC)&&(this._useAltAsMultipleSelectionModifier=Hh(l));let b={};if(_.affectsConfiguration(Sc)&&this.horizontalScrolling===void 0){const y=!!l.getValue(Sc);b={...b,horizontalScrolling:y}}if(_.affectsConfiguration(_u)){const y=!!l.getValue(_u);b={...b,scrollByPage:y}}if(_.affectsConfiguration(vu)){const y=!!l.getValue(vu);b={...b,smoothScrolling:y}}if(_.affectsConfiguration(Bh)){const y=l.getValue(Bh);b={...b,mouseWheelScrollSensitivity:y}}if(_.affectsConfiguration(Wh)){const y=l.getValue(Wh);b={...b,fastScrollSensitivity:y}}Object.keys(b).length>0&&this.updateOptions(b)})),this.navigator=new Fhe(this,{configurationService:l,...s}),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles!==void 0&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?FC(e):OC)}};Ase=Fg([dn(5,ht),dn(6,Mc),dn(7,Ht),dn(8,nt)],Ase);let Pse=class extends e5e{constructor(e,t,i,n,s,r,a,l,c){const u=typeof s.horizontalScrolling<"u"?s.horizontalScrolling:!!l.getValue(Sc),[f,g]=c.invokeFunction(H4,s);super(e,t,i,n,{keyboardSupport:!1,...f,horizontalScrolling:u}),this.disposables=new le,this.disposables.add(g),this.contextKeyService=B4(r,this),this.disposables.add(W4(this.contextKeyService,this.widget)),this.horizontalScrolling=s.horizontalScrolling,this.listSupportsMultiSelect=O4.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(s.multipleSelectionSupport!==!1),F4.bindTo(this.contextKeyService).set(!!s.selectionNavigation),this._useAltAsMultipleSelectionModifier=Hh(l),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),this.updateStyles(s.overrideStyles),this.disposables.add(l.onDidChangeConfiguration(_=>{_.affectsConfiguration(WC)&&(this._useAltAsMultipleSelectionModifier=Hh(l));let b={};if(_.affectsConfiguration(Sc)&&this.horizontalScrolling===void 0){const y=!!l.getValue(Sc);b={...b,horizontalScrolling:y}}if(_.affectsConfiguration(_u)){const y=!!l.getValue(_u);b={...b,scrollByPage:y}}if(_.affectsConfiguration(vu)){const y=!!l.getValue(vu);b={...b,smoothScrolling:y}}if(_.affectsConfiguration(Bh)){const y=l.getValue(Bh);b={...b,mouseWheelScrollSensitivity:y}}if(_.affectsConfiguration(Wh)){const y=l.getValue(Wh);b={...b,fastScrollSensitivity:y}}Object.keys(b).length>0&&this.updateOptions(b)})),this.navigator=new Fhe(this,{configurationService:l,...s}),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles!==void 0&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?FC(e):OC)}dispose(){this.disposables.dispose(),super.dispose()}};Pse=Fg([dn(5,ht),dn(6,Mc),dn(7,Ht),dn(8,nt)],Pse);let Ose=class extends tz{constructor(e,t,i,n,s,r,a,l,c,u){const f=typeof r.horizontalScrolling<"u"?r.horizontalScrolling:!!c.getValue(Sc),[g,p]=u.invokeFunction(H4,r);super(e,t,i,n,s,{keyboardSupport:!1,...g,horizontalScrolling:f}),this.disposables.add(p),this.contextKeyService=B4(a,this),this.disposables.add(W4(this.contextKeyService,this)),this.listSupportsMultiSelect=O4.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(r.multipleSelectionSupport!==!1),F4.bindTo(this.contextKeyService).set(!!r.selectionNavigation),this.listHasSelectionOrFocus=dG.bindTo(this.contextKeyService),this.listDoubleSelection=uG.bindTo(this.contextKeyService),this.listMultiSelection=hG.bindTo(this.contextKeyService),this.horizontalScrolling=r.horizontalScrolling,this._useAltAsMultipleSelectionModifier=Hh(c),this.disposables.add(this.contextKeyService),this.disposables.add(l.register(this)),this.updateStyles(r.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const b=this.getSelection(),y=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(b.length>0||y.length>0),this.listMultiSelection.set(b.length>1),this.listDoubleSelection.set(b.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const b=this.getSelection(),y=this.getFocus();this.listHasSelectionOrFocus.set(b.length>0||y.length>0)})),this.disposables.add(c.onDidChangeConfiguration(b=>{b.affectsConfiguration(WC)&&(this._useAltAsMultipleSelectionModifier=Hh(c));let y={};if(b.affectsConfiguration(Sc)&&this.horizontalScrolling===void 0){const S=!!c.getValue(Sc);y={...y,horizontalScrolling:S}}if(b.affectsConfiguration(_u)){const S=!!c.getValue(_u);y={...y,scrollByPage:S}}if(b.affectsConfiguration(vu)){const S=!!c.getValue(vu);y={...y,smoothScrolling:S}}if(b.affectsConfiguration(Bh)){const S=c.getValue(Bh);y={...y,mouseWheelScrollSensitivity:S}}if(b.affectsConfiguration(Wh)){const S=c.getValue(Wh);y={...y,fastScrollSensitivity:S}}Object.keys(y).length>0&&this.updateOptions(y)})),this.navigator=new Z5e(this,{configurationService:c,...r}),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles!==void 0&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?FC(e):OC)}dispose(){this.disposables.dispose(),super.dispose()}};Ose=Fg([dn(6,ht),dn(7,Mc),dn(8,Ht),dn(9,nt)],Ose);class vG extends X{constructor(e,t){super(),this.widget=e,this._onDidOpen=this._register(new Y),this.onDidOpen=this._onDidOpen.event,this._register(Ee.filter(this.widget.onDidChangeSelection,i=>Hf(i.browserEvent))(i=>this.onSelectionFromKeyboard(i))),this._register(this.widget.onPointer(i=>this.onPointer(i.element,i.browserEvent))),this._register(this.widget.onMouseDblClick(i=>this.onMouseDblClick(i.element,i.browserEvent))),typeof(t==null?void 0:t.openOnSingleClick)!="boolean"&&(t!=null&&t.configurationService)?(this.openOnSingleClick=(t==null?void 0:t.configurationService.getValue(NM))!=="doubleClick",this._register(t==null?void 0:t.configurationService.onDidChangeConfiguration(i=>{i.affectsConfiguration(NM)&&(this.openOnSingleClick=(t==null?void 0:t.configurationService.getValue(NM))!=="doubleClick")}))):this.openOnSingleClick=(t==null?void 0:t.openOnSingleClick)??!0}onSelectionFromKeyboard(e){if(e.elements.length!==1)return;const t=e.browserEvent,i=typeof t.preserveFocus=="boolean"?t.preserveFocus:!0,n=typeof t.pinned=="boolean"?t.pinned:!i;this._open(this.getSelectedElement(),i,n,!1,e.browserEvent)}onPointer(e,t){if(!this.openOnSingleClick||t.detail===2)return;const n=t.button===1,s=!0,r=n,a=t.ctrlKey||t.metaKey||t.altKey;this._open(e,s,r,a,t)}onMouseDblClick(e,t){if(!t)return;const i=t.target;if(i.classList.contains("monaco-tl-twistie")||i.classList.contains("monaco-icon-label")&&i.classList.contains("folder-icon")&&t.offsetX<16)return;const s=!1,r=!0,a=t.ctrlKey||t.metaKey||t.altKey;this._open(e,s,r,a,t)}_open(e,t,i,n,s){e&&this._onDidOpen.fire({editorOptions:{preserveFocus:t,pinned:i,revealIfVisible:!0},sideBySide:n,element:e,browserEvent:s})}}class Fhe extends vG{constructor(e,t){super(e,t),this.widget=e}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class Z5e extends vG{constructor(e,t){super(e,t)}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class X5e extends vG{constructor(e,t){super(e,t)}getSelectedElement(){return this.widget.getSelection()[0]??void 0}}function Q5e(o){let e=!1;return t=>{if(t.toKeyCodeChord().isModifierKey())return!1;if(e)return e=!1,!1;const i=o.softDispatch(t,t.target);return i.kind===1?(e=!0,!1):(e=!1,i.kind===0)}}let rz=class extends aG{constructor(e,t,i,n,s,r,a,l,c){const{options:u,getTypeNavigationMode:f,disposable:g}=r.invokeFunction(mI,s);super(e,t,i,n,u),this.disposables.add(g),this.internals=new _C(this,s,f,s.overrideStyles,a,l,c),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};rz=Fg([dn(5,nt),dn(6,ht),dn(7,Mc),dn(8,Ht)],rz);let Fse=class extends khe{constructor(e,t,i,n,s,r,a,l,c){const{options:u,getTypeNavigationMode:f,disposable:g}=r.invokeFunction(mI,s);super(e,t,i,n,u),this.disposables.add(g),this.internals=new _C(this,s,f,s.overrideStyles,a,l,c),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};Fse=Fg([dn(5,nt),dn(6,ht),dn(7,Mc),dn(8,Ht)],Fse);let Bse=class extends U5e{constructor(e,t,i,n,s,r,a,l,c,u){const{options:f,getTypeNavigationMode:g,disposable:p}=a.invokeFunction(mI,r);super(e,t,i,n,s,f),this.disposables.add(p),this.internals=new _C(this,r,g,r.overrideStyles,l,c,u),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles!==void 0&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};Bse=Fg([dn(6,nt),dn(7,ht),dn(8,Mc),dn(9,Ht)],Bse);let az=class extends Ehe{get onDidOpen(){return this.internals.onDidOpen}constructor(e,t,i,n,s,r,a,l,c,u){const{options:f,getTypeNavigationMode:g,disposable:p}=a.invokeFunction(mI,r);super(e,t,i,n,s,f),this.disposables.add(p),this.internals=new _C(this,r,g,r.overrideStyles,l,c,u),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};az=Fg([dn(6,nt),dn(7,ht),dn(8,Mc),dn(9,Ht)],az);let Wse=class extends V5e{constructor(e,t,i,n,s,r,a,l,c,u,f){const{options:g,getTypeNavigationMode:p,disposable:_}=l.invokeFunction(mI,a);super(e,t,i,n,s,r,g),this.disposables.add(_),this.internals=new _C(this,a,p,a.overrideStyles,c,u,f),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};Wse=Fg([dn(7,nt),dn(8,ht),dn(9,Mc),dn(10,Ht)],Wse);function Bhe(o){const e=o.getValue(pG);if(e==="highlight")return sg.Highlight;if(e==="filter")return sg.Filter;const t=o.getValue(_P);if(t==="simple"||t==="highlight")return sg.Highlight;if(t==="filter")return sg.Filter}function Whe(o){const e=o.getValue(_G);if(e==="fuzzy")return mC.Fuzzy;if(e==="contiguous")return mC.Contiguous}function mI(o,e){const t=o.get(Ht),i=o.get(Pg),n=o.get(ht),s=o.get(nt),r=()=>{const g=n.getContextKeyValue(Phe);if(g==="automatic")return Ch.Automatic;if(g==="trigger"||n.getContextKeyValue(Ohe)===!1)return Ch.Trigger;const _=t.getValue(mG);if(_==="automatic")return Ch.Automatic;if(_==="trigger")return Ch.Trigger},a=e.horizontalScrolling!==void 0?e.horizontalScrolling:!!t.getValue(Sc),[l,c]=s.invokeFunction(H4,e),u=e.paddingBottom,f=e.renderIndentGuides!==void 0?e.renderIndentGuides:t.getValue(vP);return{getTypeNavigationMode:r,disposable:c,options:{keyboardSupport:!1,...l,indent:typeof t.getValue(KD)=="number"?t.getValue(KD):void 0,renderIndentGuides:f,smoothScrolling:!!t.getValue(vu),defaultFindMode:Bhe(t),defaultFindMatchType:Whe(t),horizontalScrolling:a,scrollByPage:!!t.getValue(_u),paddingBottom:u,hideTwistiesOfChildlessElements:e.hideTwistiesOfChildlessElements,expandOnlyOnTwistieClick:e.expandOnlyOnTwistieClick??t.getValue(bP)==="doubleClick",contextViewProvider:i,findWidgetStyles:i2e,enableStickyScroll:!!t.getValue(CP),stickyScrollMaxItemCount:Number(t.getValue(yP))}}}let _C=class{get onDidOpen(){return this.navigator.onDidOpen}constructor(e,t,i,n,s,r,a){this.tree=e,this.disposables=[],this.contextKeyService=B4(s,e),this.disposables.push(W4(this.contextKeyService,e)),this.listSupportsMultiSelect=O4.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(t.multipleSelectionSupport!==!1),F4.bindTo(this.contextKeyService).set(!!t.selectionNavigation),this.listSupportFindWidget=j5e.bindTo(this.contextKeyService),this.listSupportFindWidget.set(t.findWidgetEnabled??!0),this.hasSelectionOrFocus=dG.bindTo(this.contextKeyService),this.hasDoubleSelection=uG.bindTo(this.contextKeyService),this.hasMultiSelection=hG.bindTo(this.contextKeyService),this.treeElementCanCollapse=fG.bindTo(this.contextKeyService),this.treeElementHasParent=q5e.bindTo(this.contextKeyService),this.treeElementCanExpand=gG.bindTo(this.contextKeyService),this.treeElementHasChild=K5e.bindTo(this.contextKeyService),this.treeFindOpen=G5e.bindTo(this.contextKeyService),this.treeStickyScrollFocused=Mhe.bindTo(this.contextKeyService),this._useAltAsMultipleSelectionModifier=Hh(a),this.updateStyleOverrides(n);const c=()=>{const f=e.getFocus()[0];if(!f)return;const g=e.getNode(f);this.treeElementCanCollapse.set(g.collapsible&&!g.collapsed),this.treeElementHasParent.set(!!e.getParentElement(f)),this.treeElementCanExpand.set(g.collapsible&&g.collapsed),this.treeElementHasChild.set(!!e.getFirstElementChild(f))},u=new Set;u.add(Phe),u.add(Ohe),this.disposables.push(this.contextKeyService,r.register(e),e.onDidChangeSelection(()=>{const f=e.getSelection(),g=e.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.hasSelectionOrFocus.set(f.length>0||g.length>0),this.hasMultiSelection.set(f.length>1),this.hasDoubleSelection.set(f.length===2)})}),e.onDidChangeFocus(()=>{const f=e.getSelection(),g=e.getFocus();this.hasSelectionOrFocus.set(f.length>0||g.length>0),c()}),e.onDidChangeCollapseState(c),e.onDidChangeModel(c),e.onDidChangeFindOpenState(f=>this.treeFindOpen.set(f)),e.onDidChangeStickyScrollFocused(f=>this.treeStickyScrollFocused.set(f)),a.onDidChangeConfiguration(f=>{let g={};if(f.affectsConfiguration(WC)&&(this._useAltAsMultipleSelectionModifier=Hh(a)),f.affectsConfiguration(KD)){const p=a.getValue(KD);g={...g,indent:p}}if(f.affectsConfiguration(vP)&&t.renderIndentGuides===void 0){const p=a.getValue(vP);g={...g,renderIndentGuides:p}}if(f.affectsConfiguration(vu)){const p=!!a.getValue(vu);g={...g,smoothScrolling:p}}if(f.affectsConfiguration(pG)||f.affectsConfiguration(_P)){const p=Bhe(a);g={...g,defaultFindMode:p}}if(f.affectsConfiguration(mG)||f.affectsConfiguration(_P)){const p=i();g={...g,typeNavigationMode:p}}if(f.affectsConfiguration(_G)){const p=Whe(a);g={...g,defaultFindMatchType:p}}if(f.affectsConfiguration(Sc)&&t.horizontalScrolling===void 0){const p=!!a.getValue(Sc);g={...g,horizontalScrolling:p}}if(f.affectsConfiguration(_u)){const p=!!a.getValue(_u);g={...g,scrollByPage:p}}if(f.affectsConfiguration(bP)&&t.expandOnlyOnTwistieClick===void 0&&(g={...g,expandOnlyOnTwistieClick:a.getValue(bP)==="doubleClick"}),f.affectsConfiguration(CP)){const p=a.getValue(CP);g={...g,enableStickyScroll:p}}if(f.affectsConfiguration(yP)){const p=Math.max(1,a.getValue(yP));g={...g,stickyScrollMaxItemCount:p}}if(f.affectsConfiguration(Bh)){const p=a.getValue(Bh);g={...g,mouseWheelScrollSensitivity:p}}if(f.affectsConfiguration(Wh)){const p=a.getValue(Wh);g={...g,fastScrollSensitivity:p}}Object.keys(g).length>0&&e.updateOptions(g)}),this.contextKeyService.onDidChangeContext(f=>{f.affectsSome(u)&&e.updateOptions({typeNavigationMode:i()})})),this.navigator=new X5e(e,{configurationService:a,...t}),this.disposables.push(this.navigator)}updateOptions(e){e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyleOverrides(e){this.tree.style(e?FC(e):OC)}dispose(){this.disposables=$i(this.disposables)}};_C=Fg([dn(4,ht),dn(5,Mc),dn(6,Ht)],_C);const J5e=Pn.as(pd.Configuration);J5e.registerConfiguration({id:"workbench",order:7,title:v("workbenchConfigurationTitle","Workbench"),type:"object",properties:{[WC]:{type:"string",enum:["ctrlCmd","alt"],markdownEnumDescriptions:[v("multiSelectModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),v("multiSelectModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],default:"ctrlCmd",description:v({key:"multiSelectModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add an item in trees and lists to a multi-selection with the mouse (for example in the explorer, open editors and scm view). The 'Open to Side' mouse gestures - if supported - will adapt such that they do not conflict with the multiselect modifier.")},[NM]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:v({key:"openModeModifier",comment:["`singleClick` and `doubleClick` refers to a value the setting can take and should not be localized."]},"Controls how to open items in trees and lists using the mouse (if supported). Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[Sc]:{type:"boolean",default:!1,description:v("horizontalScrolling setting","Controls whether lists and trees support horizontal scrolling in the workbench. Warning: turning on this setting has a performance implication.")},[_u]:{type:"boolean",default:!1,description:v("list.scrollByPage","Controls whether clicks in the scrollbar scroll page by page.")},[KD]:{type:"number",default:8,minimum:4,maximum:40,description:v("tree indent setting","Controls tree indentation in pixels.")},[vP]:{type:"string",enum:["none","onHover","always"],default:"onHover",description:v("render tree indent guides","Controls whether the tree should render indent guides.")},[vu]:{type:"boolean",default:!1,description:v("list smoothScrolling setting","Controls whether lists and trees have smooth scrolling.")},[Bh]:{type:"number",default:1,markdownDescription:v("Mouse Wheel Scroll Sensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")},[Wh]:{type:"number",default:5,markdownDescription:v("Fast Scroll Sensitivity","Scrolling speed multiplier when pressing `Alt`.")},[pG]:{type:"string",enum:["highlight","filter"],enumDescriptions:[v("defaultFindModeSettingKey.highlight","Highlight elements when searching. Further up and down navigation will traverse only the highlighted elements."),v("defaultFindModeSettingKey.filter","Filter elements when searching.")],default:"highlight",description:v("defaultFindModeSettingKey","Controls the default find mode for lists and trees in the workbench.")},[_P]:{type:"string",enum:["simple","highlight","filter"],enumDescriptions:[v("keyboardNavigationSettingKey.simple","Simple keyboard navigation focuses elements which match the keyboard input. Matching is done only on prefixes."),v("keyboardNavigationSettingKey.highlight","Highlight keyboard navigation highlights elements which match the keyboard input. Further up and down navigation will traverse only the highlighted elements."),v("keyboardNavigationSettingKey.filter","Filter keyboard navigation will filter out and hide all the elements which do not match the keyboard input.")],default:"highlight",description:v("keyboardNavigationSettingKey","Controls the keyboard navigation style for lists and trees in the workbench. Can be simple, highlight and filter."),deprecated:!0,deprecationMessage:v("keyboardNavigationSettingKeyDeprecated","Please use 'workbench.list.defaultFindMode' and	'workbench.list.typeNavigationMode' instead.")},[_G]:{type:"string",enum:["fuzzy","contiguous"],enumDescriptions:[v("defaultFindMatchTypeSettingKey.fuzzy","Use fuzzy matching when searching."),v("defaultFindMatchTypeSettingKey.contiguous","Use contiguous matching when searching.")],default:"fuzzy",description:v("defaultFindMatchTypeSettingKey","Controls the type of matching used when searching lists and trees in the workbench.")},[bP]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:v("expand mode","Controls how tree folders are expanded when clicking the folder names. Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[CP]:{type:"boolean",default:!0,description:v("sticky scroll","Controls whether sticky scrolling is enabled in trees.")},[yP]:{type:"number",minimum:1,default:7,markdownDescription:v("sticky scroll maximum items","Controls the number of sticky elements displayed in the tree when {0} is enabled.","`#workbench.tree.enableStickyScroll#`")},[mG]:{type:"string",enum:["automatic","trigger"],default:"automatic",markdownDescription:v("typeNavigationMode2","Controls how type navigation works in lists and trees in the workbench. When set to `trigger`, type navigation begins once the `list.triggerTypeNavigation` command is run.")}}});class fm extends X{constructor(e,t){super(),this.options=t,this.text="",this.title="",this.highlights=[],this.didEverRender=!1,this.supportIcons=(t==null?void 0:t.supportIcons)??!1,this.domNode=ge(e,xe("span.monaco-highlighted-label"))}get element(){return this.domNode}set(e,t=[],i="",n){e||(e=""),n&&(e=fm.escapeNewLines(e,t)),!(this.didEverRender&&this.text===e&&this.title===i&&el(this.highlights,t))&&(this.text=e,this.title=i,this.highlights=t,this.render())}render(){var i,n,s;const e=[];let t=0;for(const r of this.highlights){if(r.end===r.start)continue;if(t<r.start){const c=this.text.substring(t,r.start);this.supportIcons?e.push(...dm(c)):e.push(c),t=r.start}const a=this.text.substring(t,r.end),l=xe("span.highlight",void 0,...this.supportIcons?dm(a):[a]);r.extraClasses&&l.classList.add(...r.extraClasses),e.push(l),t=r.end}if(t<this.text.length){const r=this.text.substring(t);this.supportIcons?e.push(...dm(r)):e.push(r)}if(Co(this.domNode,...e),(n=(i=this.options)==null?void 0:i.hoverDelegate)!=null&&n.showNativeHover)this.domNode.title=this.title;else if(!this.customHover&&this.title!==""){const r=((s=this.options)==null?void 0:s.hoverDelegate)??sa("mouse");this.customHover=this._register(Su().setupManagedHover(r,this.domNode,this.title))}else this.customHover&&this.customHover.update(this.title);this.didEverRender=!0}static escapeNewLines(e,t){let i=0,n=0;return e.replace(/\r\n|\r|\n/g,(s,r)=>{n=s===`\r
`?-1:0,r+=i;for(const a of t)a.end<=r||(a.start>=r&&(a.start+=n),a.end>=r&&(a.end+=n));return i+=n,""})}}class Cx{constructor(e){this._element=e}get element(){return this._element}set textContent(e){this.disposed||e===this._textContent||(this._textContent=e,this._element.textContent=e)}set classNames(e){this.disposed||el(e,this._classNames)||(this._classNames=e,this._element.classList.value="",this._element.classList.add(...e))}set empty(e){this.disposed||e===this._empty||(this._empty=e,this._element.style.marginLeft=e?"0":"")}dispose(){this.disposed=!0}}class wP extends X{constructor(e,t){super(),this.customHovers=new Map,this.creationOptions=t,this.domNode=this._register(new Cx(ge(e,xe(".monaco-icon-label")))),this.labelContainer=ge(this.domNode.element,xe(".monaco-icon-label-container")),this.nameContainer=ge(this.labelContainer,xe("span.monaco-icon-name-container")),t!=null&&t.supportHighlights||t!=null&&t.supportIcons?this.nameNode=this._register(new i3e(this.nameContainer,!!t.supportIcons)):this.nameNode=new e3e(this.nameContainer),this.hoverDelegate=(t==null?void 0:t.hoverDelegate)??sa("mouse")}get element(){return this.domNode.element}setLabel(e,t,i){const n=["monaco-icon-label"],s=["monaco-icon-label-container"];let r="";i&&(i.extraClasses&&n.push(...i.extraClasses),i.italic&&n.push("italic"),i.strikethrough&&n.push("strikethrough"),i.disabledCommand&&s.push("disabled"),i.title&&(typeof i.title=="string"?r+=i.title:r+=e));const a=this.domNode.element.querySelector(".monaco-icon-label-iconpath");if(i!=null&&i.iconPath){let l;!a||!Ys(a)?(l=xe(".monaco-icon-label-iconpath"),this.domNode.element.prepend(l)):l=a,l.style.backgroundImage=Lg(i==null?void 0:i.iconPath)}else a&&a.remove();if(this.domNode.classNames=n,this.domNode.element.setAttribute("aria-label",r),this.labelContainer.classList.value="",this.labelContainer.classList.add(...s),this.setupHover(i!=null&&i.descriptionTitle?this.labelContainer:this.element,i==null?void 0:i.title),this.nameNode.setLabel(e,i),t||this.descriptionNode){const l=this.getOrCreateDescriptionNode();l instanceof fm?(l.set(t||"",i?i.descriptionMatches:void 0,void 0,i==null?void 0:i.labelEscapeNewLines),this.setupHover(l.element,i==null?void 0:i.descriptionTitle)):(l.textContent=t&&(i!=null&&i.labelEscapeNewLines)?fm.escapeNewLines(t,[]):t||"",this.setupHover(l.element,(i==null?void 0:i.descriptionTitle)||""),l.empty=!t)}if(i!=null&&i.suffix||this.suffixNode){const l=this.getOrCreateSuffixNode();l.textContent=(i==null?void 0:i.suffix)??""}}setupHover(e,t){const i=this.customHovers.get(e);if(i&&(i.dispose(),this.customHovers.delete(e)),!t){e.removeAttribute("title");return}if(this.hoverDelegate.showNativeHover)(function(s,r){xa(r)?s.title=IK(r):r!=null&&r.markdownNotSupportedFallback?s.title=r.markdownNotSupportedFallback:s.removeAttribute("title")})(e,t);else{const n=Su().setupManagedHover(this.hoverDelegate,e,t);n&&this.customHovers.set(e,n)}}dispose(){super.dispose();for(const e of this.customHovers.values())e.dispose();this.customHovers.clear()}getOrCreateSuffixNode(){if(!this.suffixNode){const e=this._register(new Cx(nEe(this.nameContainer,xe("span.monaco-icon-suffix-container"))));this.suffixNode=this._register(new Cx(ge(e.element,xe("span.label-suffix"))))}return this.suffixNode}getOrCreateDescriptionNode(){var e;if(!this.descriptionNode){const t=this._register(new Cx(ge(this.labelContainer,xe("span.monaco-icon-description-container"))));(e=this.creationOptions)!=null&&e.supportDescriptionHighlights?this.descriptionNode=this._register(new fm(ge(t.element,xe("span.label-description")),{supportIcons:!!this.creationOptions.supportIcons})):this.descriptionNode=this._register(new Cx(ge(t.element,xe("span.label-description"))))}return this.descriptionNode}}class e3e{constructor(e){this.container=e,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&el(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=ge(this.container,xe("a.label-name",{id:t==null?void 0:t.domId}))),this.singleLabel.textContent=e;else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;for(let i=0;i<e.length;i++){const n=e[i],s=(t==null?void 0:t.domId)&&`${t==null?void 0:t.domId}_${i}`;ge(this.container,xe("a.label-name",{id:s,"data-icon-label-count":e.length,"data-icon-label-index":i,role:"treeitem"},n)),i<e.length-1&&ge(this.container,xe("span.label-separator",void 0,(t==null?void 0:t.separator)||"/"))}}}}function t3e(o,e,t){if(!t)return;let i=0;return o.map(n=>{const s={start:i,end:i+n.length},r=t.map(a=>Go.intersect(s,a)).filter(a=>!Go.isEmpty(a)).map(({start:a,end:l})=>({start:a-i,end:l-i}));return i=s.end+e.length,r})}class i3e extends X{constructor(e,t){super(),this.container=e,this.supportIcons=t,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&el(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=this._register(new fm(ge(this.container,xe("a.label-name",{id:t==null?void 0:t.domId})),{supportIcons:this.supportIcons}))),this.singleLabel.set(e,t==null?void 0:t.matches,void 0,t==null?void 0:t.labelEscapeNewLines);else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;const i=(t==null?void 0:t.separator)||"/",n=t3e(e,i,t==null?void 0:t.matches);for(let s=0;s<e.length;s++){const r=e[s],a=n?n[s]:void 0,l=(t==null?void 0:t.domId)&&`${t==null?void 0:t.domId}_${s}`,c=xe("a.label-name",{id:l,"data-icon-label-count":e.length,"data-icon-label-index":s,role:"treeitem"});this._register(new fm(ge(this.container,c),{supportIcons:this.supportIcons})).set(r,a,void 0,t==null?void 0:t.labelEscapeNewLines),s<e.length-1&&ge(c,xe("span.label-separator",void 0,i))}}}}const DR=xe,Hhe={keybindingLabelBackground:void 0,keybindingLabelForeground:void 0,keybindingLabelBorder:void 0,keybindingLabelBottomBorder:void 0,keybindingLabelShadow:void 0};class n0 extends X{constructor(e,t,i){super(),this.os=t,this.keyElements=new Set,this.options=i||Object.create(null);const n=this.options.keybindingLabelForeground;this.domNode=ge(e,DR(".monaco-keybinding")),n&&(this.domNode.style.color=n),this.hover=this._register(Su().setupManagedHover(sa("mouse"),this.domNode,"")),this.didEverRender=!1,e.appendChild(this.domNode)}get element(){return this.domNode}set(e,t){this.didEverRender&&this.keybinding===e&&n0.areSame(this.matches,t)||(this.keybinding=e,this.matches=t,this.render())}render(){if(this.clear(),this.keybinding){const e=this.keybinding.getChords();e[0]&&this.renderChord(this.domNode,e[0],this.matches?this.matches.firstPart:null);for(let i=1;i<e.length;i++)ge(this.domNode,DR("span.monaco-keybinding-key-chord-separator",void 0," ")),this.renderChord(this.domNode,e[i],this.matches?this.matches.chordPart:null);const t=this.options.disableTitle??!1?void 0:this.keybinding.getAriaLabel()||void 0;this.hover.update(t),this.domNode.setAttribute("aria-label",t||"")}else this.options&&this.options.renderUnboundKeybindings&&this.renderUnbound(this.domNode);this.didEverRender=!0}clear(){bo(this.domNode),this.keyElements.clear()}renderChord(e,t,i){const n=PK.modifierLabels[this.os];t.ctrlKey&&this.renderKey(e,n.ctrlKey,!!(i!=null&&i.ctrlKey),n.separator),t.shiftKey&&this.renderKey(e,n.shiftKey,!!(i!=null&&i.shiftKey),n.separator),t.altKey&&this.renderKey(e,n.altKey,!!(i!=null&&i.altKey),n.separator),t.metaKey&&this.renderKey(e,n.metaKey,!!(i!=null&&i.metaKey),n.separator);const s=t.keyLabel;s&&this.renderKey(e,s,!!(i!=null&&i.keyCode),"")}renderKey(e,t,i,n){ge(e,this.createKeyElement(t,i?".highlight":"")),n&&ge(e,DR("span.monaco-keybinding-key-separator",void 0,n))}renderUnbound(e){ge(e,this.createKeyElement(v("unbound","Unbound")))}createKeyElement(e,t=""){const i=DR("span.monaco-keybinding-key"+t,void 0,e);return this.keyElements.add(i),this.options.keybindingLabelBackground&&(i.style.backgroundColor=this.options.keybindingLabelBackground),this.options.keybindingLabelBorder&&(i.style.borderColor=this.options.keybindingLabelBorder),this.options.keybindingLabelBottomBorder&&(i.style.borderBottomColor=this.options.keybindingLabelBottomBorder),this.options.keybindingLabelShadow&&(i.style.boxShadow=`inset 0 -1px 0 ${this.options.keybindingLabelShadow}`),i}static areSame(e,t){return e===t||!e&&!t?!0:!!e&&!!t&&el(e.firstPart,t.firstPart)&&el(e.chordPart,t.chordPart)}}const Hse=new fu(()=>{const o=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return{collator:o,collatorIsNumeric:o.resolvedOptions().numeric}});function n3e(o,e,t=!1){const i=o||"",n=e||"",s=Hse.value.collator.compare(i,n);return Hse.value.collatorIsNumeric&&s===0&&i!==n?i<n?-1:1:s}function s3e(o,e,t){const i=o.toLowerCase(),n=e.toLowerCase(),s=o3e(o,e,t);if(s)return s;const r=i.endsWith(t),a=n.endsWith(t);if(r!==a)return r?-1:1;const l=n3e(i,n);return l!==0?l:i.localeCompare(n)}function o3e(o,e,t){const i=o.toLowerCase(),n=e.toLowerCase(),s=i.startsWith(t),r=n.startsWith(t);if(s!==r)return s?-1:1;if(s&&r){if(i.length<n.length)return-1;if(i.length>n.length)return 1}return 0}var V4=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},lz=function(o,e){return function(t,i){e(t,i,o)}},cz;const Pd=xe;class Vhe{constructor(e,t,i){this.index=e,this.hasCheckbox=t,this._hidden=!1,this._init=new fu(()=>{const n=i.label??"",s=Fx(n).text.trim(),r=i.ariaLabel||[n,this.saneDescription,this.saneDetail].map(a=>fAe(a)).filter(a=>!!a).join(", ");return{saneLabel:n,saneSortLabel:s,saneAriaLabel:r}}),this._saneDescription=i.description,this._saneTooltip=i.tooltip}get saneLabel(){return this._init.value.saneLabel}get saneSortLabel(){return this._init.value.saneSortLabel}get saneAriaLabel(){return this._init.value.saneAriaLabel}get element(){return this._element}set element(e){this._element=e}get hidden(){return this._hidden}set hidden(e){this._hidden=e}get saneDescription(){return this._saneDescription}set saneDescription(e){this._saneDescription=e}get saneDetail(){return this._saneDetail}set saneDetail(e){this._saneDetail=e}get saneTooltip(){return this._saneTooltip}set saneTooltip(e){this._saneTooltip=e}get labelHighlights(){return this._labelHighlights}set labelHighlights(e){this._labelHighlights=e}get descriptionHighlights(){return this._descriptionHighlights}set descriptionHighlights(e){this._descriptionHighlights=e}get detailHighlights(){return this._detailHighlights}set detailHighlights(e){this._detailHighlights=e}}class Do extends Vhe{constructor(e,t,i,n,s,r){var a,l,c;super(e,t,s),this.fireButtonTriggered=i,this._onChecked=n,this.item=s,this._separator=r,this._checked=!1,this.onChecked=t?Ee.map(Ee.filter(this._onChecked.event,u=>u.element===this),u=>u.checked):Ee.None,this._saneDetail=s.detail,this._labelHighlights=(a=s.highlights)==null?void 0:a.label,this._descriptionHighlights=(l=s.highlights)==null?void 0:l.description,this._detailHighlights=(c=s.highlights)==null?void 0:c.detail}get separator(){return this._separator}set separator(e){this._separator=e}get checked(){return this._checked}set checked(e){e!==this._checked&&(this._checked=e,this._onChecked.fire({element:this,checked:e}))}get checkboxDisabled(){return!!this.item.disabled}}var dh;(function(o){o[o.NONE=0]="NONE",o[o.MOUSE_HOVER=1]="MOUSE_HOVER",o[o.ACTIVE_ITEM=2]="ACTIVE_ITEM"})(dh||(dh={}));class rv extends Vhe{constructor(e,t,i){super(e,!1,i),this.fireSeparatorButtonTriggered=t,this.separator=i,this.children=new Array,this.focusInsideSeparator=dh.NONE}}class r3e{getHeight(e){return e instanceof rv?30:e.saneDetail?44:22}getTemplateId(e){return e instanceof Do?SP.ID:LP.ID}}class a3e{getWidgetAriaLabel(){return v("quickInput","Quick Input")}getAriaLabel(e){var t;return(t=e.separator)!=null&&t.label?`${e.saneAriaLabel}, ${e.separator.label}`:e.saneAriaLabel}getWidgetRole(){return"listbox"}getRole(e){return e.hasCheckbox?"checkbox":"option"}isChecked(e){if(!(!e.hasCheckbox||!(e instanceof Do)))return{get value(){return e.checked},onDidChange:t=>e.onChecked(()=>t())}}}class zhe{constructor(e){this.hoverDelegate=e}renderTemplate(e){const t=Object.create(null);t.toDisposeElement=new le,t.toDisposeTemplate=new le,t.entry=ge(e,Pd(".quick-input-list-entry"));const i=ge(t.entry,Pd("label.quick-input-list-label"));t.toDisposeTemplate.add(Bn(i,Le.CLICK,c=>{t.checkbox.offsetParent||c.preventDefault()})),t.checkbox=ge(i,Pd("input.quick-input-list-checkbox")),t.checkbox.type="checkbox";const n=ge(i,Pd(".quick-input-list-rows")),s=ge(n,Pd(".quick-input-list-row")),r=ge(n,Pd(".quick-input-list-row"));t.label=new wP(s,{supportHighlights:!0,supportDescriptionHighlights:!0,supportIcons:!0,hoverDelegate:this.hoverDelegate}),t.toDisposeTemplate.add(t.label),t.icon=qq(t.label.element,Pd(".quick-input-list-icon"));const a=ge(s,Pd(".quick-input-list-entry-keybinding"));t.keybinding=new n0(a,Ja),t.toDisposeTemplate.add(t.keybinding);const l=ge(r,Pd(".quick-input-list-label-meta"));return t.detail=new wP(l,{supportHighlights:!0,supportIcons:!0,hoverDelegate:this.hoverDelegate}),t.toDisposeTemplate.add(t.detail),t.separator=ge(t.entry,Pd(".quick-input-list-separator")),t.actionBar=new zl(t.entry,this.hoverDelegate?{hoverDelegate:this.hoverDelegate}:void 0),t.actionBar.domNode.classList.add("quick-input-list-entry-action-bar"),t.toDisposeTemplate.add(t.actionBar),t}disposeTemplate(e){e.toDisposeElement.dispose(),e.toDisposeTemplate.dispose()}disposeElement(e,t,i){i.toDisposeElement.clear(),i.actionBar.clear()}}var cb;let SP=(cb=class extends zhe{constructor(e,t){super(e),this.themeService=t,this._itemsWithSeparatorsFrequency=new Map}get templateId(){return cz.ID}renderTemplate(e){const t=super.renderTemplate(e);return t.toDisposeTemplate.add(Bn(t.checkbox,Le.CHANGE,i=>{t.element.checked=t.checkbox.checked})),t}renderElement(e,t,i){var g;const n=e.element;i.element=n,n.element=i.entry??void 0;const s=n.item;i.checkbox.checked=n.checked,i.toDisposeElement.add(n.onChecked(p=>i.checkbox.checked=p)),i.checkbox.disabled=n.checkboxDisabled;const{labelHighlights:r,descriptionHighlights:a,detailHighlights:l}=n;if(s.iconPath){const p=sS(this.themeService.getColorTheme().type)?s.iconPath.dark:s.iconPath.light??s.iconPath.dark,_=st.revive(p);i.icon.className="quick-input-list-icon",i.icon.style.backgroundImage=Lg(_)}else i.icon.style.backgroundImage="",i.icon.className=s.iconClass?`quick-input-list-icon ${s.iconClass}`:"";let c;!n.saneTooltip&&n.saneDescription&&(c={markdown:{value:n.saneDescription,supportThemeIcons:!0},markdownNotSupportedFallback:n.saneDescription});const u={matches:r||[],descriptionTitle:c,descriptionMatches:a||[],labelEscapeNewLines:!0};if(u.extraClasses=s.iconClasses,u.italic=s.italic,u.strikethrough=s.strikethrough,i.entry.classList.remove("quick-input-list-separator-as-item"),i.label.setLabel(n.saneLabel,n.saneDescription,u),i.keybinding.set(s.keybinding),n.saneDetail){let p;n.saneTooltip||(p={markdown:{value:n.saneDetail,supportThemeIcons:!0},markdownNotSupportedFallback:n.saneDetail}),i.detail.element.style.display="",i.detail.setLabel(n.saneDetail,void 0,{matches:l,title:p,labelEscapeNewLines:!0})}else i.detail.element.style.display="none";(g=n.separator)!=null&&g.label?(i.separator.textContent=n.separator.label,i.separator.style.display="",this.addItemWithSeparator(n)):i.separator.style.display="none",i.entry.classList.toggle("quick-input-list-separator-border",!!n.separator);const f=s.buttons;f&&f.length?(i.actionBar.push(f.map((p,_)=>mk(p,`id-${_}`,()=>n.fireButtonTriggered({button:p,item:n.item}))),{icon:!0,label:!1}),i.entry.classList.add("has-actions")):i.entry.classList.remove("has-actions")}disposeElement(e,t,i){this.removeItemWithSeparator(e.element),super.disposeElement(e,t,i)}isItemWithSeparatorVisible(e){return this._itemsWithSeparatorsFrequency.has(e)}addItemWithSeparator(e){this._itemsWithSeparatorsFrequency.set(e,(this._itemsWithSeparatorsFrequency.get(e)||0)+1)}removeItemWithSeparator(e){const t=this._itemsWithSeparatorsFrequency.get(e)||0;t>1?this._itemsWithSeparatorsFrequency.set(e,t-1):this._itemsWithSeparatorsFrequency.delete(e)}},cz=cb,cb.ID="quickpickitem",cb);SP=cz=V4([lz(1,Ws)],SP);const E2=class E2 extends zhe{constructor(){super(...arguments),this._visibleSeparatorsFrequency=new Map}get templateId(){return E2.ID}get visibleSeparators(){return[...this._visibleSeparatorsFrequency.keys()]}isSeparatorVisible(e){return this._visibleSeparatorsFrequency.has(e)}renderTemplate(e){const t=super.renderTemplate(e);return t.checkbox.style.display="none",t}renderElement(e,t,i){const n=e.element;i.element=n,n.element=i.entry??void 0,n.element.classList.toggle("focus-inside",!!n.focusInsideSeparator);const s=n.separator,{labelHighlights:r,descriptionHighlights:a,detailHighlights:l}=n;i.icon.style.backgroundImage="",i.icon.className="";let c;!n.saneTooltip&&n.saneDescription&&(c={markdown:{value:n.saneDescription,supportThemeIcons:!0},markdownNotSupportedFallback:n.saneDescription});const u={matches:r||[],descriptionTitle:c,descriptionMatches:a||[],labelEscapeNewLines:!0};if(i.entry.classList.add("quick-input-list-separator-as-item"),i.label.setLabel(n.saneLabel,n.saneDescription,u),n.saneDetail){let g;n.saneTooltip||(g={markdown:{value:n.saneDetail,supportThemeIcons:!0},markdownNotSupportedFallback:n.saneDetail}),i.detail.element.style.display="",i.detail.setLabel(n.saneDetail,void 0,{matches:l,title:g,labelEscapeNewLines:!0})}else i.detail.element.style.display="none";i.separator.style.display="none",i.entry.classList.add("quick-input-list-separator-border");const f=s.buttons;f&&f.length?(i.actionBar.push(f.map((g,p)=>mk(g,`id-${p}`,()=>n.fireSeparatorButtonTriggered({button:g,separator:n.separator}))),{icon:!0,label:!1}),i.entry.classList.add("has-actions")):i.entry.classList.remove("has-actions"),this.addSeparator(n)}disposeElement(e,t,i){var n;this.removeSeparator(e.element),this.isSeparatorVisible(e.element)||(n=e.element.element)==null||n.classList.remove("focus-inside"),super.disposeElement(e,t,i)}addSeparator(e){this._visibleSeparatorsFrequency.set(e,(this._visibleSeparatorsFrequency.get(e)||0)+1)}removeSeparator(e){const t=this._visibleSeparatorsFrequency.get(e)||0;t>1?this._visibleSeparatorsFrequency.set(e,t-1):this._visibleSeparatorsFrequency.delete(e)}};E2.ID="quickpickseparator";let LP=E2,GD=class extends X{constructor(e,t,i,n,s,r){super(),this.parent=e,this.hoverDelegate=t,this.linkOpenerDelegate=i,this.accessibilityService=r,this._onKeyDown=new Y,this._onLeave=new Y,this.onLeave=this._onLeave.event,this._visibleCountObservable=Wt("VisibleCount",0),this.onChangedVisibleCount=Ee.fromObservable(this._visibleCountObservable,this._store),this._allVisibleCheckedObservable=Wt("AllVisibleChecked",!1),this.onChangedAllVisibleChecked=Ee.fromObservable(this._allVisibleCheckedObservable,this._store),this._checkedCountObservable=Wt("CheckedCount",0),this.onChangedCheckedCount=Ee.fromObservable(this._checkedCountObservable,this._store),this._checkedElementsObservable=w6({equalsFn:En},new Array),this.onChangedCheckedElements=Ee.fromObservable(this._checkedElementsObservable,this._store),this._onButtonTriggered=new Y,this.onButtonTriggered=this._onButtonTriggered.event,this._onSeparatorButtonTriggered=new Y,this.onSeparatorButtonTriggered=this._onSeparatorButtonTriggered.event,this._elementChecked=new Y,this._elementCheckedEventBufferer=new KE,this._hasCheckboxes=!1,this._inputElements=new Array,this._elementTree=new Array,this._itemElements=new Array,this._elementDisposable=this._register(new le),this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._matchOnLabelMode="fuzzy",this._sortByLabel=!0,this._shouldLoop=!0,this._container=ge(this.parent,Pd(".quick-input-list")),this._separatorRenderer=new LP(t),this._itemRenderer=s.createInstance(SP,t),this._tree=this._register(s.createInstance(rz,"QuickInput",this._container,new r3e,[this._itemRenderer,this._separatorRenderer],{filter:{filter(a){return a.hidden?0:a instanceof rv?2:1}},sorter:{compare:(a,l)=>{if(!this.sortByLabel||!this._lastQueryString)return 0;const c=this._lastQueryString.toLowerCase();return c3e(a,l,c)}},accessibilityProvider:new a3e,setRowLineHeight:!1,multipleSelectionSupport:!1,hideTwistiesOfChildlessElements:!0,renderIndentGuides:_S.None,findWidgetEnabled:!1,indent:0,horizontalScrolling:!1,allowNonCollapsibleParents:!0,alwaysConsumeMouseWheel:!0})),this._tree.getHTMLElement().id=n,this._registerListeners()}get onDidChangeFocus(){return Ee.map(this._tree.onDidChangeFocus,e=>e.elements.filter(t=>t instanceof Do).map(t=>t.item),this._store)}get onDidChangeSelection(){return Ee.map(this._tree.onDidChangeSelection,e=>({items:e.elements.filter(t=>t instanceof Do).map(t=>t.item),event:e.browserEvent}),this._store)}get displayed(){return this._container.style.display!=="none"}set displayed(e){this._container.style.display=e?"":"none"}get scrollTop(){return this._tree.scrollTop}set scrollTop(e){this._tree.scrollTop=e}get ariaLabel(){return this._tree.ariaLabel}set ariaLabel(e){this._tree.ariaLabel=e??""}set enabled(e){this._tree.getHTMLElement().style.pointerEvents=e?"":"none"}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(e){this._matchOnDescription=e}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(e){this._matchOnDetail=e}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(e){this._matchOnLabel=e}get matchOnLabelMode(){return this._matchOnLabelMode}set matchOnLabelMode(e){this._matchOnLabelMode=e}get sortByLabel(){return this._sortByLabel}set sortByLabel(e){this._sortByLabel=e}get shouldLoop(){return this._shouldLoop}set shouldLoop(e){this._shouldLoop=e}_registerListeners(){this._registerOnKeyDown(),this._registerOnContainerClick(),this._registerOnMouseMiddleClick(),this._registerOnTreeModelChanged(),this._registerOnElementChecked(),this._registerOnContextMenu(),this._registerHoverListeners(),this._registerSelectionChangeListener(),this._registerSeparatorActionShowingListeners()}_registerOnKeyDown(){this._register(this._tree.onKeyDown(e=>{const t=new Zi(e);switch(t.keyCode){case 10:this.toggleCheckbox();break}this._onKeyDown.fire(t)}))}_registerOnContainerClick(){this._register(se(this._container,Le.CLICK,e=>{(e.x||e.y)&&this._onLeave.fire()}))}_registerOnMouseMiddleClick(){this._register(se(this._container,Le.AUXCLICK,e=>{e.button===1&&this._onLeave.fire()}))}_registerOnTreeModelChanged(){this._register(this._tree.onDidChangeModel(()=>{const e=this._itemElements.filter(t=>!t.hidden).length;this._visibleCountObservable.set(e,void 0),this._hasCheckboxes&&this._updateCheckedObservables()}))}_registerOnElementChecked(){this._register(this._elementCheckedEventBufferer.wrapEvent(this._elementChecked.event,(e,t)=>t)(e=>this._updateCheckedObservables()))}_registerOnContextMenu(){this._register(this._tree.onContextMenu(e=>{e.element&&(e.browserEvent.preventDefault(),this._tree.setSelection([e.element]))}))}_registerHoverListeners(){const e=this._register(new oce(this.hoverDelegate.delay));this._register(this._tree.onMouseOver(async t=>{var i;if(Xte(t.browserEvent.target)){e.cancel();return}if(!(!Xte(t.browserEvent.relatedTarget)&&Ks(t.browserEvent.relatedTarget,(i=t.element)==null?void 0:i.element)))try{await e.trigger(async()=>{t.element instanceof Do&&this.showHover(t.element)})}catch(n){if(!Tc(n))throw n}})),this._register(this._tree.onMouseOut(t=>{var i;Ks(t.browserEvent.relatedTarget,(i=t.element)==null?void 0:i.element)||e.cancel()}))}_registerSeparatorActionShowingListeners(){this._register(this._tree.onDidChangeFocus(e=>{const t=e.elements[0]?this._tree.getParentElement(e.elements[0]):null;for(const i of this._separatorRenderer.visibleSeparators){const n=i===t;!!(i.focusInsideSeparator&dh.ACTIVE_ITEM)!==n&&(n?i.focusInsideSeparator|=dh.ACTIVE_ITEM:i.focusInsideSeparator&=~dh.ACTIVE_ITEM,this._tree.rerender(i))}})),this._register(this._tree.onMouseOver(e=>{const t=e.element?this._tree.getParentElement(e.element):null;for(const i of this._separatorRenderer.visibleSeparators){if(i!==t)continue;!!(i.focusInsideSeparator&dh.MOUSE_HOVER)||(i.focusInsideSeparator|=dh.MOUSE_HOVER,this._tree.rerender(i))}})),this._register(this._tree.onMouseOut(e=>{const t=e.element?this._tree.getParentElement(e.element):null;for(const i of this._separatorRenderer.visibleSeparators){if(i!==t)continue;!!(i.focusInsideSeparator&dh.MOUSE_HOVER)&&(i.focusInsideSeparator&=~dh.MOUSE_HOVER,this._tree.rerender(i))}}))}_registerSelectionChangeListener(){this._register(this._tree.onDidChangeSelection(e=>{const t=e.elements.filter(i=>i instanceof Do);t.length!==e.elements.length&&(e.elements.length===1&&e.elements[0]instanceof rv&&(this._tree.setFocus([e.elements[0].children[0]]),this._tree.reveal(e.elements[0],0)),this._tree.setSelection(t))}))}setAllVisibleChecked(e){this._elementCheckedEventBufferer.bufferEvents(()=>{this._itemElements.forEach(t=>{!t.hidden&&!t.checkboxDisabled&&(t.checked=e)})})}setElements(e){this._elementDisposable.clear(),this._lastQueryString=void 0,this._inputElements=e,this._hasCheckboxes=this.parent.classList.contains("show-checkboxes");let t;this._itemElements=new Array,this._elementTree=e.reduce((i,n,s)=>{let r;if(n.type==="separator"){if(!n.buttons)return i;t=new rv(s,a=>this._onSeparatorButtonTriggered.fire(a),n),r=t}else{const a=s>0?e[s-1]:void 0;let l;a&&a.type==="separator"&&!a.buttons&&(t=void 0,l=a);const c=new Do(s,this._hasCheckboxes,u=>this._onButtonTriggered.fire(u),this._elementChecked,n,l);if(this._itemElements.push(c),t)return t.children.push(c),i;r=c}return i.push(r),i},new Array),this._setElementsToTree(this._elementTree),this.accessibilityService.isScreenReaderOptimized()&&setTimeout(()=>{const i=this._tree.getHTMLElement().querySelector(".monaco-list-row.focused"),n=i==null?void 0:i.parentNode;if(i&&n){const s=i.nextSibling;i.remove(),n.insertBefore(i,s)}},0)}setFocusedElements(e){const t=e.map(i=>this._itemElements.find(n=>n.item===i)).filter(i=>!!i).filter(i=>!i.hidden);if(this._tree.setFocus(t),e.length>0){const i=this._tree.getFocus()[0];i&&this._tree.reveal(i)}}getActiveDescendant(){return this._tree.getHTMLElement().getAttribute("aria-activedescendant")}setSelectedElements(e){const t=e.map(i=>this._itemElements.find(n=>n.item===i)).filter(i=>!!i);this._tree.setSelection(t)}getCheckedElements(){return this._itemElements.filter(e=>e.checked).map(e=>e.item)}setCheckedElements(e){this._elementCheckedEventBufferer.bufferEvents(()=>{const t=new Set;for(const i of e)t.add(i);for(const i of this._itemElements)i.checked=t.has(i.item)})}focus(e){var t;if(this._itemElements.length)switch(e===an.Second&&this._itemElements.length<2&&(e=an.First),e){case an.First:this._tree.scrollTop=0,this._tree.focusFirst(void 0,i=>i.element instanceof Do);break;case an.Second:{this._tree.scrollTop=0;let i=!1;this._tree.focusFirst(void 0,n=>n.element instanceof Do?i?!0:(i=!i,!1):!1);break}case an.Last:this._tree.scrollTop=this._tree.scrollHeight,this._tree.focusLast(void 0,i=>i.element instanceof Do);break;case an.Next:{const i=this._tree.getFocus();this._tree.focusNext(void 0,this._shouldLoop,void 0,s=>s.element instanceof Do?(this._tree.reveal(s.element),!0):!1);const n=this._tree.getFocus();i.length&&i[0]===n[0]&&i[0]===this._itemElements[this._itemElements.length-1]&&this._onLeave.fire();break}case an.Previous:{const i=this._tree.getFocus();this._tree.focusPrevious(void 0,this._shouldLoop,void 0,s=>{if(!(s.element instanceof Do))return!1;const r=this._tree.getParentElement(s.element);return r===null||r.children[0]!==s.element?this._tree.reveal(s.element):this._tree.reveal(r),!0});const n=this._tree.getFocus();i.length&&i[0]===n[0]&&i[0]===this._itemElements[0]&&this._onLeave.fire();break}case an.NextPage:this._tree.focusNextPage(void 0,i=>i.element instanceof Do?(this._tree.reveal(i.element),!0):!1);break;case an.PreviousPage:this._tree.focusPreviousPage(void 0,i=>{if(!(i.element instanceof Do))return!1;const n=this._tree.getParentElement(i.element);return n===null||n.children[0]!==i.element?this._tree.reveal(i.element):this._tree.reveal(n),!0});break;case an.NextSeparator:{let i=!1;const n=this._tree.getFocus()[0];this._tree.focusNext(void 0,!0,void 0,r=>{if(i)return!0;if(r.element instanceof rv)i=!0,this._separatorRenderer.isSeparatorVisible(r.element)?this._tree.reveal(r.element.children[0]):this._tree.reveal(r.element,0);else if(r.element instanceof Do){if(r.element.separator)return this._itemRenderer.isItemWithSeparatorVisible(r.element)?this._tree.reveal(r.element):this._tree.reveal(r.element,0),!0;if(r.element===this._elementTree[0])return this._tree.reveal(r.element,0),!0}return!1});const s=this._tree.getFocus()[0];n===s&&(this._tree.scrollTop=this._tree.scrollHeight,this._tree.focusLast(void 0,r=>r.element instanceof Do));break}case an.PreviousSeparator:{let i,n=!!((t=this._tree.getFocus()[0])!=null&&t.separator);this._tree.focusPrevious(void 0,!0,void 0,s=>{if(s.element instanceof rv)n?i||(this._separatorRenderer.isSeparatorVisible(s.element)?this._tree.reveal(s.element):this._tree.reveal(s.element,0),i=s.element.children[0]):n=!0;else if(s.element instanceof Do&&!i){if(s.element.separator)this._itemRenderer.isItemWithSeparatorVisible(s.element)?this._tree.reveal(s.element):this._tree.reveal(s.element,0),i=s.element;else if(s.element===this._elementTree[0])return this._tree.reveal(s.element,0),!0}return!1}),i&&this._tree.setFocus([i]);break}}}clearFocus(){this._tree.setFocus([])}domFocus(){this._tree.domFocus()}layout(e){this._tree.getHTMLElement().style.maxHeight=e?`${Math.floor(e/44)*44+6}px`:"",this._tree.layout()}filter(e){if(this._lastQueryString=e,!(this._sortByLabel||this._matchOnLabel||this._matchOnDescription||this._matchOnDetail))return this._tree.layout(),!1;const t=e;if(e=e.trim(),!e||!(this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))this._itemElements.forEach(i=>{i.labelHighlights=void 0,i.descriptionHighlights=void 0,i.detailHighlights=void 0,i.hidden=!1;const n=i.index&&this._inputElements[i.index-1];i.item&&(i.separator=n&&n.type==="separator"&&!n.buttons?n:void 0)});else{let i;this._itemElements.forEach(n=>{let s;this.matchOnLabelMode==="fuzzy"?s=this.matchOnLabel?b7(e,Fx(n.saneLabel))??void 0:void 0:s=this.matchOnLabel?l3e(t,Fx(n.saneLabel))??void 0:void 0;const r=this.matchOnDescription?b7(e,Fx(n.saneDescription||""))??void 0:void 0,a=this.matchOnDetail?b7(e,Fx(n.saneDetail||""))??void 0:void 0;if(s||r||a?(n.labelHighlights=s,n.descriptionHighlights=r,n.detailHighlights=a,n.hidden=!1):(n.labelHighlights=void 0,n.descriptionHighlights=void 0,n.detailHighlights=void 0,n.hidden=n.item?!n.item.alwaysShow:!0),n.item?n.separator=void 0:n.separator&&(n.hidden=!0),!this.sortByLabel){const l=n.index&&this._inputElements[n.index-1]||void 0;(l==null?void 0:l.type)==="separator"&&!l.buttons&&(i=l),i&&!n.hidden&&(n.separator=i,i=void 0)}})}return this._setElementsToTree(this._sortByLabel&&e?this._itemElements:this._elementTree),this._tree.layout(),!0}toggleCheckbox(){this._elementCheckedEventBufferer.bufferEvents(()=>{const e=this._tree.getFocus().filter(i=>i instanceof Do),t=this._allVisibleChecked(e);for(const i of e)i.checkboxDisabled||(i.checked=!t)})}style(e){this._tree.style(e)}toggleHover(){const e=this._tree.getFocus()[0];if(!(e!=null&&e.saneTooltip)||!(e instanceof Do))return;if(this._lastHover&&!this._lastHover.isDisposed){this._lastHover.dispose();return}this.showHover(e);const t=new le;t.add(this._tree.onDidChangeFocus(i=>{i.elements[0]instanceof Do&&this.showHover(i.elements[0])})),this._lastHover&&t.add(this._lastHover),this._elementDisposable.add(t)}_setElementsToTree(e){const t=new Array;for(const i of e)i instanceof rv?t.push({element:i,collapsible:!1,collapsed:!1,children:i.children.map(n=>({element:n,collapsible:!1,collapsed:!1}))}):t.push({element:i,collapsible:!1,collapsed:!1});this._tree.setChildren(null,t)}_allVisibleChecked(e,t=!0){for(let i=0,n=e.length;i<n;i++){const s=e[i];if(!s.hidden)if(s.checked)t=!0;else return!1}return t}_updateCheckedObservables(){Mn(e=>{this._allVisibleCheckedObservable.set(this._allVisibleChecked(this._itemElements,!1),e);const t=this._itemElements.filter(i=>i.checked).length;this._checkedCountObservable.set(t,e),this._checkedElementsObservable.set(this.getCheckedElements(),e)})}showHover(e){var t,i,n;this._lastHover&&!this._lastHover.isDisposed&&((i=(t=this.hoverDelegate).onDidHideHover)==null||i.call(t),(n=this._lastHover)==null||n.dispose()),!(!e.element||!e.saneTooltip)&&(this._lastHover=this.hoverDelegate.showHover({content:e.saneTooltip,target:e.element,linkHandler:s=>{this.linkOpenerDelegate(s)},appearance:{showPointer:!0},container:this._container,position:{hoverPosition:1}},!1))}};V4([gs],GD.prototype,"onDidChangeFocus",null);V4([gs],GD.prototype,"onDidChangeSelection",null);GD=V4([lz(4,nt),lz(5,dl)],GD);function l3e(o,e){const{text:t,iconOffsets:i}=e;if(!i||i.length===0)return Vse(o,t);const n=GE(t," "),s=t.length-n.length,r=Vse(o,n);if(r)for(const a of r){const l=i[a.start+s]+s;a.start+=l,a.end+=l}return r}function Vse(o,e){const t=e.toLowerCase().indexOf(o.toLowerCase());return t!==-1?[{start:t,end:t+o.length}]:null}function c3e(o,e,t){const i=o.labelHighlights||[],n=e.labelHighlights||[];return i.length&&!n.length?-1:!i.length&&n.length?1:i.length===0&&n.length===0?0:s3e(o.saneSortLabel,e.saneSortLabel,t)}const Uhe={weight:200,when:de.and(de.equals(fhe,"quickPick"),F4e),metadata:{description:v("quickPick","Used while in the context of the quick pick. If you change one keybinding for this command, you should change all of the other keybindings (modifier variants) of this command as well.")}};function Ka(o,e={}){ea.registerCommandAndKeybindingRule({...Uhe,...o,secondary:d3e(o.primary,o.secondary??[],e)})}const xP=Kt?256:2048;function d3e(o,e,t={}){return t.withAltMod&&e.push(512+o),t.withCtrlMod&&(e.push(xP+o),t.withAltMod&&e.push(512+xP+o)),t.withCmdMod&&Kt&&(e.push(2048+o),t.withCtrlMod&&e.push(2304+o),t.withAltMod&&(e.push(2560+o),t.withCtrlMod&&e.push(2816+o))),e}function El(o,e){return t=>{const i=t.get(Rc).currentQuickInput;if(i)return e&&i.quickNavigate?i.focus(e):i.focus(o)}}Ka({id:"quickInput.pageNext",primary:12,handler:El(an.NextPage)},{withAltMod:!0,withCtrlMod:!0,withCmdMod:!0});Ka({id:"quickInput.pagePrevious",primary:11,handler:El(an.PreviousPage)},{withAltMod:!0,withCtrlMod:!0,withCmdMod:!0});Ka({id:"quickInput.first",primary:xP+14,handler:El(an.First)},{withAltMod:!0,withCmdMod:!0});Ka({id:"quickInput.last",primary:xP+13,handler:El(an.Last)},{withAltMod:!0,withCmdMod:!0});Ka({id:"quickInput.next",primary:18,handler:El(an.Next)},{withCtrlMod:!0});Ka({id:"quickInput.previous",primary:16,handler:El(an.Previous)},{withCtrlMod:!0});const zse=v("quickInput.nextSeparatorWithQuickAccessFallback","If we're in quick access mode, this will navigate to the next item. If we are not in quick access mode, this will navigate to the next separator."),Use=v("quickInput.previousSeparatorWithQuickAccessFallback","If we're in quick access mode, this will navigate to the previous item. If we are not in quick access mode, this will navigate to the previous separator.");Kt?(Ka({id:"quickInput.nextSeparatorWithQuickAccessFallback",primary:2066,handler:El(an.NextSeparator,an.Next),metadata:{description:zse}}),Ka({id:"quickInput.nextSeparator",primary:2578,secondary:[2322],handler:El(an.NextSeparator)},{withCtrlMod:!0}),Ka({id:"quickInput.previousSeparatorWithQuickAccessFallback",primary:2064,handler:El(an.PreviousSeparator,an.Previous),metadata:{description:Use}}),Ka({id:"quickInput.previousSeparator",primary:2576,secondary:[2320],handler:El(an.PreviousSeparator)},{withCtrlMod:!0})):(Ka({id:"quickInput.nextSeparatorWithQuickAccessFallback",primary:530,handler:El(an.NextSeparator,an.Next),metadata:{description:zse}}),Ka({id:"quickInput.nextSeparator",primary:2578,handler:El(an.NextSeparator)}),Ka({id:"quickInput.previousSeparatorWithQuickAccessFallback",primary:528,handler:El(an.PreviousSeparator,an.Previous),metadata:{description:Use}}),Ka({id:"quickInput.previousSeparator",primary:2576,handler:El(an.PreviousSeparator)}));Ka({id:"quickInput.acceptInBackground",when:de.and(Uhe.when,de.or(Nhe.negate(),H4e)),primary:17,weight:250,handler:o=>{const e=o.get(Rc).currentQuickInput;e==null||e.accept(!0)}},{withAltMod:!0,withCtrlMod:!0,withCmdMod:!0});var u3e=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},z7=function(o,e){return function(t,i){e(t,i,o)}},dz;const Ua=xe;var db;let uz=(db=class extends X{get currentQuickInput(){return this.controller??void 0}get container(){return this._container}constructor(e,t,i,n){super(),this.options=e,this.layoutService=t,this.instantiationService=i,this.contextKeyService=n,this.enabled=!0,this.onDidAcceptEmitter=this._register(new Y),this.onDidCustomEmitter=this._register(new Y),this.onDidTriggerButtonEmitter=this._register(new Y),this.keyMods={ctrlCmd:!1,alt:!1},this.controller=null,this.onShowEmitter=this._register(new Y),this.onShow=this.onShowEmitter.event,this.onHideEmitter=this._register(new Y),this.onHide=this.onHideEmitter.event,this.inQuickInputContext=O4e.bindTo(this.contextKeyService),this.quickInputTypeContext=B4e.bindTo(this.contextKeyService),this.endOfQuickInputBoxContext=W4e.bindTo(this.contextKeyService),this.idPrefix=e.idPrefix,this._container=e.container,this.styles=e.styles,this._register(Ee.runAndSubscribe(KF,({window:s,disposables:r})=>this.registerKeyModsListeners(s,r),{window:Vi,disposables:this._store})),this._register(HDe(s=>{this.ui&&at(this.ui.container)===s&&(this.reparentUI(this.layoutService.mainContainer),this.layout(this.layoutService.mainContainerDimension,this.layoutService.mainContainerOffset.quickPickTop))}))}registerKeyModsListeners(e,t){const i=n=>{this.keyMods.ctrlCmd=n.ctrlKey||n.metaKey,this.keyMods.alt=n.altKey};for(const n of[Le.KEY_DOWN,Le.KEY_UP,Le.MOUSE_DOWN])t.add(se(e,n,i,!0))}getUI(e){if(this.ui)return e&&at(this._container)!==at(this.layoutService.activeContainer)&&(this.reparentUI(this.layoutService.activeContainer),this.layout(this.layoutService.activeContainerDimension,this.layoutService.activeContainerOffset.quickPickTop)),this.ui;const t=ge(this._container,Ua(".quick-input-widget.show-file-icons"));t.tabIndex=-1,t.style.display="none";const i=$l(t),n=ge(t,Ua(".quick-input-titlebar")),s=this._register(new zl(n,{hoverDelegate:this.options.hoverDelegate}));s.domNode.classList.add("quick-input-left-action-bar");const r=ge(n,Ua(".quick-input-title")),a=this._register(new zl(n,{hoverDelegate:this.options.hoverDelegate}));a.domNode.classList.add("quick-input-right-action-bar");const l=ge(t,Ua(".quick-input-header")),c=ge(l,Ua("input.quick-input-check-all"));c.type="checkbox",c.setAttribute("aria-label",v("quickInput.checkAll","Toggle all checkboxes")),this._register(Bn(c,Le.CHANGE,Z=>{const he=c.checked;te.setAllVisibleChecked(he)})),this._register(se(c,Le.CLICK,Z=>{(Z.x||Z.y)&&p.setFocus()}));const u=ge(l,Ua(".quick-input-description")),f=ge(l,Ua(".quick-input-and-message")),g=ge(f,Ua(".quick-input-filter")),p=this._register(new Z4e(g,this.styles.inputBox,this.styles.toggle));p.setAttribute("aria-describedby",`${this.idPrefix}message`);const _=ge(g,Ua(".quick-input-visible-count"));_.setAttribute("aria-live","polite"),_.setAttribute("aria-atomic","true");const b=new J6(_,{countFormat:v({key:"quickInput.visibleCount",comment:["This tells the user how many items are shown in a list of items to select from. The items can be anything. Currently not visible, but read by screen readers."]},"{0} Results")},this.styles.countBadge),y=ge(g,Ua(".quick-input-count"));y.setAttribute("aria-live","polite");const S=new J6(y,{countFormat:v({key:"quickInput.countSelected",comment:["This tells the user how many items are selected in a list of items to select from. The items can be anything."]},"{0} Selected")},this.styles.countBadge),L=this._register(new zl(l,{hoverDelegate:this.options.hoverDelegate}));L.domNode.classList.add("quick-input-inline-action-bar");const x=ge(l,Ua(".quick-input-action")),k=this._register(new hP(x,this.styles.button));k.label=v("ok","OK"),this._register(k.onDidClick(Z=>{this.onDidAcceptEmitter.fire()}));const E=ge(l,Ua(".quick-input-action")),N=this._register(new hP(E,{...this.styles.button,supportIcons:!0}));N.label=v("custom","Custom"),this._register(N.onDidClick(Z=>{this.onDidCustomEmitter.fire()}));const A=ge(f,Ua(`#${this.idPrefix}message.quick-input-message`)),P=this._register(new ez(t,this.styles.progressBar));P.getContainer().classList.add("quick-input-progress");const H=ge(t,Ua(".quick-input-html-widget"));H.tabIndex=-1;const ee=ge(t,Ua(".quick-input-description")),Q=this.idPrefix+"list",te=this._register(this.instantiationService.createInstance(GD,t,this.options.hoverDelegate,this.options.linkOpenerDelegate,Q));p.setAttribute("aria-controls",Q),this._register(te.onDidChangeFocus(()=>{p.setAttribute("aria-activedescendant",te.getActiveDescendant()??"")})),this._register(te.onChangedAllVisibleChecked(Z=>{c.checked=Z})),this._register(te.onChangedVisibleCount(Z=>{b.setCount(Z)})),this._register(te.onChangedCheckedCount(Z=>{S.setCount(Z)})),this._register(te.onLeave(()=>{setTimeout(()=>{this.controller&&(p.setFocus(),this.controller instanceof uP&&this.controller.canSelectMany&&te.clearFocus())},0)}));const J=pu(t);return this._register(J),this._register(se(t,Le.FOCUS,Z=>{const he=this.getUI();if(Ks(Z.relatedTarget,he.inputContainer)){const Ce=he.inputBox.isSelectionAtEnd();this.endOfQuickInputBoxContext.get()!==Ce&&this.endOfQuickInputBoxContext.set(Ce)}Ks(Z.relatedTarget,he.container)||(this.inQuickInputContext.set(!0),this.previousFocusElement=Ys(Z.relatedTarget)?Z.relatedTarget:void 0)},!0)),this._register(J.onDidBlur(()=>{!this.getUI().ignoreFocusOut&&!this.options.ignoreFocusOut()&&this.hide(mS.Blur),this.inQuickInputContext.set(!1),this.endOfQuickInputBoxContext.set(!1),this.previousFocusElement=void 0})),this._register(p.onKeyDown(Z=>{const he=this.getUI().inputBox.isSelectionAtEnd();this.endOfQuickInputBoxContext.get()!==he&&this.endOfQuickInputBoxContext.set(he)})),this._register(se(t,Le.FOCUS,Z=>{p.setFocus()})),this._register(Bn(t,Le.KEY_DOWN,Z=>{if(!Ks(Z.target,H))switch(Z.keyCode){case 3:Jt.stop(Z,!0),this.enabled&&this.onDidAcceptEmitter.fire();break;case 9:Jt.stop(Z,!0),this.hide(mS.Gesture);break;case 2:if(!Z.altKey&&!Z.ctrlKey&&!Z.metaKey){const he=[".quick-input-list .monaco-action-bar .always-visible",".quick-input-list-entry:hover .monaco-action-bar",".monaco-list-row.focused .monaco-action-bar"];if(t.classList.contains("show-checkboxes")?he.push("input"):he.push("input[type=text]"),this.getUI().list.displayed&&he.push(".monaco-list"),this.getUI().message&&he.push(".quick-input-message a"),this.getUI().widget){if(Ks(Z.target,this.getUI().widget))break;he.push(".quick-input-html-widget")}const Ce=t.querySelectorAll(he.join(", "));Z.shiftKey&&Z.target===Ce[0]?(Jt.stop(Z,!0),te.clearFocus()):!Z.shiftKey&&Ks(Z.target,Ce[Ce.length-1])&&(Jt.stop(Z,!0),Ce[0].focus())}break;case 10:Z.ctrlKey&&(Jt.stop(Z,!0),this.getUI().list.toggleHover());break}})),this.ui={container:t,styleSheet:i,leftActionBar:s,titleBar:n,title:r,description1:ee,description2:u,widget:H,rightActionBar:a,inlineActionBar:L,checkAll:c,inputContainer:f,filterContainer:g,inputBox:p,visibleCountContainer:_,visibleCount:b,countContainer:y,count:S,okContainer:x,ok:k,message:A,customButtonContainer:E,customButton:N,list:te,progressBar:P,onDidAccept:this.onDidAcceptEmitter.event,onDidCustom:this.onDidCustomEmitter.event,onDidTriggerButton:this.onDidTriggerButtonEmitter.event,ignoreFocusOut:!1,keyMods:this.keyMods,show:Z=>this.show(Z),hide:()=>this.hide(),setVisibilities:Z=>this.setVisibilities(Z),setEnabled:Z=>this.setEnabled(Z),setContextKey:Z=>this.options.setContextKey(Z),linkOpenerDelegate:Z=>this.options.linkOpenerDelegate(Z)},this.updateStyles(),this.ui}reparentUI(e){this.ui&&(this._container=e,ge(this._container,this.ui.container))}pick(e,t={},i=Mt.None){return new Promise((n,s)=>{let r=u=>{var f;r=n,(f=t.onKeyMods)==null||f.call(t,a.keyMods),n(u)};if(i.isCancellationRequested){r(void 0);return}const a=this.createQuickPick({useSeparators:!0});let l;const c=[a,a.onDidAccept(()=>{if(a.canSelectMany)r(a.selectedItems.slice()),a.hide();else{const u=a.activeItems[0];u&&(r(u),a.hide())}}),a.onDidChangeActive(u=>{const f=u[0];f&&t.onDidFocus&&t.onDidFocus(f)}),a.onDidChangeSelection(u=>{if(!a.canSelectMany){const f=u[0];f&&(r(f),a.hide())}}),a.onDidTriggerItemButton(u=>t.onDidTriggerItemButton&&t.onDidTriggerItemButton({...u,removeItem:()=>{const f=a.items.indexOf(u.item);if(f!==-1){const g=a.items.slice(),p=g.splice(f,1),_=a.activeItems.filter(y=>y!==p[0]),b=a.keepScrollPosition;a.keepScrollPosition=!0,a.items=g,_&&(a.activeItems=_),a.keepScrollPosition=b}}})),a.onDidTriggerSeparatorButton(u=>{var f;return(f=t.onDidTriggerSeparatorButton)==null?void 0:f.call(t,u)}),a.onDidChangeValue(u=>{l&&!u&&(a.activeItems.length!==1||a.activeItems[0]!==l)&&(a.activeItems=[l])}),i.onCancellationRequested(()=>{a.hide()}),a.onDidHide(()=>{$i(c),r(void 0)})];a.title=t.title,t.value&&(a.value=t.value),a.canSelectMany=!!t.canPickMany,a.placeholder=t.placeHolder,a.ignoreFocusOut=!!t.ignoreFocusLost,a.matchOnDescription=!!t.matchOnDescription,a.matchOnDetail=!!t.matchOnDetail,a.matchOnLabel=t.matchOnLabel===void 0||t.matchOnLabel,a.quickNavigate=t.quickNavigate,a.hideInput=!!t.hideInput,a.contextKey=t.contextKey,a.busy=!0,Promise.all([e,t.activeItem]).then(([u,f])=>{l=f,a.busy=!1,a.items=u,a.canSelectMany&&(a.selectedItems=u.filter(g=>g.type!=="separator"&&g.picked)),l&&(a.activeItems=[l])}),a.show(),Promise.resolve(e).then(void 0,u=>{s(u),a.hide()})})}createQuickPick(e={useSeparators:!1}){const t=this.getUI(!0);return new uP(t)}createInputBox(){const e=this.getUI(!0);return new V4e(e)}show(e){const t=this.getUI(!0);this.onShowEmitter.fire();const i=this.controller;this.controller=e,i==null||i.didHide(),this.setEnabled(!0),t.leftActionBar.clear(),t.title.textContent="",t.description1.textContent="",t.description2.textContent="",Co(t.widget),t.rightActionBar.clear(),t.inlineActionBar.clear(),t.checkAll.checked=!1,t.inputBox.placeholder="",t.inputBox.password=!1,t.inputBox.showDecoration(hs.Ignore),t.visibleCount.setCount(0),t.count.setCount(0),Co(t.message),t.progressBar.stop(),t.list.setElements([]),t.list.matchOnDescription=!1,t.list.matchOnDetail=!1,t.list.matchOnLabel=!0,t.list.sortByLabel=!0,t.ignoreFocusOut=!1,t.inputBox.toggles=void 0;const n=this.options.backKeybindingLabel();X6.tooltip=n?v("quickInput.backWithKeybinding","Back ({0})",n):v("quickInput.back","Back"),t.container.style.display="",this.updateLayout(),t.inputBox.setFocus(),this.quickInputTypeContext.set(e.type)}isVisible(){return!!this.ui&&this.ui.container.style.display!=="none"}setVisibilities(e){const t=this.getUI();t.title.style.display=e.title?"":"none",t.description1.style.display=e.description&&(e.inputBox||e.checkAll)?"":"none",t.description2.style.display=e.description&&!(e.inputBox||e.checkAll)?"":"none",t.checkAll.style.display=e.checkAll?"":"none",t.inputContainer.style.display=e.inputBox?"":"none",t.filterContainer.style.display=e.inputBox?"":"none",t.visibleCountContainer.style.display=e.visibleCount?"":"none",t.countContainer.style.display=e.count?"":"none",t.okContainer.style.display=e.ok?"":"none",t.customButtonContainer.style.display=e.customButton?"":"none",t.message.style.display=e.message?"":"none",t.progressBar.getContainer().style.display=e.progressBar?"":"none",t.list.displayed=!!e.list,t.container.classList.toggle("show-checkboxes",!!e.checkBox),t.container.classList.toggle("hidden-input",!e.inputBox&&!e.description),this.updateLayout()}setEnabled(e){if(e!==this.enabled){this.enabled=e;for(const t of this.getUI().leftActionBar.viewItems)t.action.enabled=e;for(const t of this.getUI().rightActionBar.viewItems)t.action.enabled=e;this.getUI().checkAll.disabled=!e,this.getUI().inputBox.enabled=e,this.getUI().ok.enabled=e,this.getUI().list.enabled=e}}hide(e){var s;const t=this.controller;if(!t)return;t.willHide(e);const i=(s=this.ui)==null?void 0:s.container,n=i&&!yce(i);if(this.controller=null,this.onHideEmitter.fire(),i&&(i.style.display="none"),!n){let r=this.previousFocusElement;for(;r&&!r.offsetParent;)r=r.parentElement??void 0;r!=null&&r.offsetParent?(r.focus(),this.previousFocusElement=void 0):this.options.returnFocus()}t.didHide(e)}layout(e,t){this.dimension=e,this.titleBarOffset=t,this.updateLayout()}updateLayout(){if(this.ui&&this.isVisible()){this.ui.container.style.top=`${this.titleBarOffset}px`;const e=this.ui.container.style,t=Math.min(this.dimension.width*.62,dz.MAX_WIDTH);e.width=t+"px",e.marginLeft="-"+t/2+"px",this.ui.inputBox.layout(),this.ui.list.layout(this.dimension&&this.dimension.height*.4)}}applyStyles(e){this.styles=e,this.updateStyles()}updateStyles(){if(this.ui){const{quickInputTitleBackground:e,quickInputBackground:t,quickInputForeground:i,widgetBorder:n,widgetShadow:s}=this.styles.widget;this.ui.titleBar.style.backgroundColor=e??"",this.ui.container.style.backgroundColor=t??"",this.ui.container.style.color=i??"",this.ui.container.style.border=n?`1px solid ${n}`:"",this.ui.container.style.boxShadow=s?`0 0 8px 2px ${s}`:"",this.ui.list.style(this.styles.list);const r=[];this.styles.pickerGroup.pickerGroupBorder&&r.push(`.quick-input-list .quick-input-list-entry { border-top-color:  ${this.styles.pickerGroup.pickerGroupBorder}; }`),this.styles.pickerGroup.pickerGroupForeground&&r.push(`.quick-input-list .quick-input-list-separator { color:  ${this.styles.pickerGroup.pickerGroupForeground}; }`),this.styles.pickerGroup.pickerGroupForeground&&r.push(".quick-input-list .quick-input-list-separator-as-item { color: var(--vscode-descriptionForeground); }"),(this.styles.keybindingLabel.keybindingLabelBackground||this.styles.keybindingLabel.keybindingLabelBorder||this.styles.keybindingLabel.keybindingLabelBottomBorder||this.styles.keybindingLabel.keybindingLabelShadow||this.styles.keybindingLabel.keybindingLabelForeground)&&(r.push(".quick-input-list .monaco-keybinding > .monaco-keybinding-key {"),this.styles.keybindingLabel.keybindingLabelBackground&&r.push(`background-color: ${this.styles.keybindingLabel.keybindingLabelBackground};`),this.styles.keybindingLabel.keybindingLabelBorder&&r.push(`border-color: ${this.styles.keybindingLabel.keybindingLabelBorder};`),this.styles.keybindingLabel.keybindingLabelBottomBorder&&r.push(`border-bottom-color: ${this.styles.keybindingLabel.keybindingLabelBottomBorder};`),this.styles.keybindingLabel.keybindingLabelShadow&&r.push(`box-shadow: inset 0 -1px 0 ${this.styles.keybindingLabel.keybindingLabelShadow};`),this.styles.keybindingLabel.keybindingLabelForeground&&r.push(`color: ${this.styles.keybindingLabel.keybindingLabelForeground};`),r.push("}"));const a=r.join(`
`);a!==this.ui.styleSheet.textContent&&(this.ui.styleSheet.textContent=a)}}},dz=db,db.MAX_WIDTH=600,db);uz=dz=u3e([z7(1,e_),z7(2,nt),z7(3,ht)],uz);var h3e=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},yx=function(o,e){return function(t,i){e(t,i,o)}};let hz=class extends nNe{get controller(){return this._controller||(this._controller=this._register(this.createController())),this._controller}get hasController(){return!!this._controller}get currentQuickInput(){return this.controller.currentQuickInput}get quickAccess(){return this._quickAccess||(this._quickAccess=this._register(this.instantiationService.createInstance(Z6))),this._quickAccess}constructor(e,t,i,n,s){super(i),this.instantiationService=e,this.contextKeyService=t,this.layoutService=n,this.configurationService=s,this._onShow=this._register(new Y),this._onHide=this._register(new Y),this.contexts=new Map}createController(e=this.layoutService,t){const i={idPrefix:"quickInput_",container:e.activeContainer,ignoreFocusOut:()=>!1,backKeybindingLabel:()=>{},setContextKey:s=>this.setContextKey(s),linkOpenerDelegate:s=>{this.instantiationService.invokeFunction(r=>{r.get(Ma).open(s,{allowCommands:!0,fromUserGesture:!0})})},returnFocus:()=>e.focus(),styles:this.computeStyles(),hoverDelegate:this._register(this.instantiationService.createInstance(Q6))},n=this._register(this.instantiationService.createInstance(uz,{...i,...t}));return n.layout(e.activeContainerDimension,e.activeContainerOffset.quickPickTop),this._register(e.onDidLayoutActiveContainer(s=>{at(e.activeContainer)===at(n.container)&&n.layout(s,e.activeContainerOffset.quickPickTop)})),this._register(e.onDidChangeActiveContainer(()=>{n.isVisible()||n.layout(e.activeContainerDimension,e.activeContainerOffset.quickPickTop)})),this._register(n.onShow(()=>{this.resetContextKeys(),this._onShow.fire()})),this._register(n.onHide(()=>{this.resetContextKeys(),this._onHide.fire()})),n}setContextKey(e){let t;e&&(t=this.contexts.get(e),t||(t=new Pe(e,!1).bindTo(this.contextKeyService),this.contexts.set(e,t))),!(t&&t.get())&&(this.resetContextKeys(),t==null||t.set(!0))}resetContextKeys(){this.contexts.forEach(e=>{e.get()&&e.reset()})}pick(e,t,i=Mt.None){return this.controller.pick(e,t,i)}createQuickPick(e={useSeparators:!1}){return this.controller.createQuickPick(e)}createInputBox(){return this.controller.createInputBox()}updateStyles(){this.hasController&&this.controller.applyStyles(this.computeStyles())}computeStyles(){return{widget:{quickInputBackground:He(mne),quickInputForeground:He(bMe),quickInputTitleBackground:He(CMe),widgetBorder:He(Nde),widgetShadow:He(GS)},inputBox:eP,toggle:JA,countBadge:Iue,button:e2e,progressBar:t2e,keybindingLabel:JOe,list:FC({listBackground:mne,listFocusBackground:TD,listFocusForeground:ID,listInactiveFocusForeground:ID,listInactiveSelectionIconForeground:bK,listInactiveFocusBackground:TD,listFocusOutline:vn,listInactiveFocusOutline:vn}),pickerGroup:{pickerGroupBorder:He(yMe),pickerGroupForeground:He(Vde)}}}};hz=h3e([yx(0,nt),yx(1,ht),yx(2,Ws),yx(3,e_),yx(4,Ht)],hz);var $he=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},yv=function(o,e){return function(t,i){e(t,i,o)}};let fz=class extends hz{constructor(e,t,i,n,s,r){super(t,i,n,new MV(e.getContainerDomNode(),s),r),this.host=void 0;const a=YD.get(e);if(a){const l=a.widget;this.host={_serviceBrand:void 0,get mainContainer(){return l.getDomNode()},getContainer(){return l.getDomNode()},whenContainerStylesLoaded(){},get containers(){return[l.getDomNode()]},get activeContainer(){return l.getDomNode()},get mainContainerDimension(){return e.getLayoutInfo()},get activeContainerDimension(){return e.getLayoutInfo()},get onDidLayoutMainContainer(){return e.onDidLayoutChange},get onDidLayoutActiveContainer(){return e.onDidLayoutChange},get onDidLayoutContainer(){return Ee.map(e.onDidLayoutChange,c=>({container:l.getDomNode(),dimension:c}))},get onDidChangeActiveContainer(){return Ee.None},get onDidAddContainer(){return Ee.None},get mainContainerOffset(){return{top:0,quickPickTop:0}},get activeContainerOffset(){return{top:0,quickPickTop:0}},focus:()=>e.focus()}}else this.host=void 0}createController(){return super.createController(this.host)}};fz=$he([yv(1,nt),yv(2,ht),yv(3,Ws),yv(4,hi),yv(5,Ht)],fz);let gz=class{get activeService(){const e=this.codeEditorService.getFocusedCodeEditor();if(!e)throw new Error("Quick input service needs a focused editor to work.");let t=this.mapEditorToService.get(e);if(!t){const i=t=this.instantiationService.createInstance(fz,e);this.mapEditorToService.set(e,t),Am(e.onDidDispose)(()=>{i.dispose(),this.mapEditorToService.delete(e)})}return t}get currentQuickInput(){return this.activeService.currentQuickInput}get quickAccess(){return this.activeService.quickAccess}constructor(e,t){this.instantiationService=e,this.codeEditorService=t,this.mapEditorToService=new Map}pick(e,t,i=Mt.None){return this.activeService.pick(e,t,i)}createQuickPick(e={useSeparators:!1}){return this.activeService.createQuickPick(e)}createInputBox(){return this.activeService.createInputBox()}};gz=$he([yv(0,nt),yv(1,hi)],gz);const I2=class I2{static get(e){return e.getContribution(I2.ID)}constructor(e){this.editor=e,this.widget=new pz(this.editor)}dispose(){this.widget.dispose()}};I2.ID="editor.controller.quickInput";let YD=I2;const T2=class T2{constructor(e){this.codeEditor=e,this.domNode=document.createElement("div"),this.codeEditor.addOverlayWidget(this)}getId(){return T2.ID}getDomNode(){return this.domNode}getPosition(){return{preference:2}}dispose(){this.codeEditor.removeOverlayWidget(this)}};T2.ID="editor.contrib.quickInputWidget";let pz=T2;oi(YD.ID,YD,4);class f3e{constructor(e,t,i,n,s){this._parsedThemeRuleBrand=void 0,this.token=e,this.index=t,this.fontStyle=i,this.foreground=n,this.background=s}}function g3e(o){if(!o||!Array.isArray(o))return[];const e=[];let t=0;for(let i=0,n=o.length;i<n;i++){const s=o[i];let r=-1;if(typeof s.fontStyle=="string"){r=0;const c=s.fontStyle.split(" ");for(let u=0,f=c.length;u<f;u++)switch(c[u]){case"italic":r=r|1;break;case"bold":r=r|2;break;case"underline":r=r|4;break;case"strikethrough":r=r|8;break}}let a=null;typeof s.foreground=="string"&&(a=s.foreground);let l=null;typeof s.background=="string"&&(l=s.background),e[t++]=new f3e(s.token||"",i,r,a,l)}return e}function p3e(o,e){o.sort((u,f)=>{const g=C3e(u.token,f.token);return g!==0?g:u.index-f.index});let t=0,i="000000",n="ffffff";for(;o.length>=1&&o[0].token==="";){const u=o.shift();u.fontStyle!==-1&&(t=u.fontStyle),u.foreground!==null&&(i=u.foreground),u.background!==null&&(n=u.background)}const s=new _3e;for(const u of e)s.getId(u);const r=s.getId(i),a=s.getId(n),l=new bG(t,r,a),c=new CG(l);for(let u=0,f=o.length;u<f;u++){const g=o[u];c.insert(g.token,g.fontStyle,s.getId(g.foreground),s.getId(g.background))}return new jhe(s,c)}const m3e=/^#?([0-9A-Fa-f]{6})([0-9A-Fa-f]{2})?$/;class _3e{constructor(){this._lastColorId=0,this._id2color=[],this._color2id=new Map}getId(e){if(e===null)return 0;const t=e.match(m3e);if(!t)throw new Error("Illegal value for token color: "+e);e=t[1].toUpperCase();let i=this._color2id.get(e);return i||(i=++this._lastColorId,this._color2id.set(e,i),this._id2color[i]=ue.fromHex("#"+e),i)}getColorMap(){return this._id2color.slice(0)}}class jhe{static createFromRawTokenTheme(e,t){return this.createFromParsedTokenTheme(g3e(e),t)}static createFromParsedTokenTheme(e,t){return p3e(e,t)}constructor(e,t){this._colorMap=e,this._root=t,this._cache=new Map}getColorMap(){return this._colorMap.getColorMap()}_match(e){return this._root.match(e)}match(e,t){let i=this._cache.get(t);if(typeof i>"u"){const n=this._match(t),s=b3e(t);i=(n.metadata|s<<8)>>>0,this._cache.set(t,i)}return(i|e<<0)>>>0}}const v3e=/\b(comment|string|regex|regexp)\b/;function b3e(o){const e=o.match(v3e);if(!e)return 0;switch(e[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"regexp":return 3}throw new Error("Unexpected match for standard token type!")}function C3e(o,e){return o<e?-1:o>e?1:0}class bG{constructor(e,t,i){this._themeTrieElementRuleBrand=void 0,this._fontStyle=e,this._foreground=t,this._background=i,this.metadata=(this._fontStyle<<11|this._foreground<<15|this._background<<24)>>>0}clone(){return new bG(this._fontStyle,this._foreground,this._background)}acceptOverwrite(e,t,i){e!==-1&&(this._fontStyle=e),t!==0&&(this._foreground=t),i!==0&&(this._background=i),this.metadata=(this._fontStyle<<11|this._foreground<<15|this._background<<24)>>>0}}class CG{constructor(e){this._themeTrieElementBrand=void 0,this._mainRule=e,this._children=new Map}match(e){if(e==="")return this._mainRule;const t=e.indexOf(".");let i,n;t===-1?(i=e,n=""):(i=e.substring(0,t),n=e.substring(t+1));const s=this._children.get(i);return typeof s<"u"?s.match(n):this._mainRule}insert(e,t,i,n){if(e===""){this._mainRule.acceptOverwrite(t,i,n);return}const s=e.indexOf(".");let r,a;s===-1?(r=e,a=""):(r=e.substring(0,s),a=e.substring(s+1));let l=this._children.get(r);typeof l>"u"&&(l=new CG(this._mainRule.clone()),this._children.set(r,l)),l.insert(a,t,i,n)}}function y3e(o){const e=[];for(let t=1,i=o.length;t<i;t++){const n=o[t];e[t]=`.mtk${t} { color: ${n}; }`}return e.push(".mtki { font-style: italic; }"),e.push(".mtkb { font-weight: bold; }"),e.push(".mtku { text-decoration: underline; text-underline-position: under; }"),e.push(".mtks { text-decoration: line-through; }"),e.push(".mtks.mtku { text-decoration: underline line-through; text-underline-position: under; }"),e.join(`
`)}const w3e={base:"vs",inherit:!1,rules:[{token:"",foreground:"000000",background:"fffffe"},{token:"invalid",foreground:"cd3131"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"001188"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"delimiter.xml",foreground:"0000FF"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"FF0000"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"FF0000"},{token:"attribute.value",foreground:"0451A5"},{token:"attribute.value.number",foreground:"098658"},{token:"attribute.value.unit",foreground:"098658"},{token:"attribute.value.html",foreground:"0000FF"},{token:"attribute.value.xml",foreground:"0000FF"},{token:"string",foreground:"A31515"},{token:"string.html",foreground:"0000FF"},{token:"string.sql",foreground:"FF0000"},{token:"string.yaml",foreground:"0451A5"},{token:"keyword",foreground:"0000FF"},{token:"keyword.json",foreground:"0451A5"},{token:"keyword.flow",foreground:"AF00DB"},{token:"keyword.flow.scss",foreground:"0000FF"},{token:"operator.scss",foreground:"666666"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[ud]:"#FFFFFE",[jh]:"#000000",[Ide]:"#E5EBF1",[gI]:"#D3D3D3",[pI]:"#939393",[fK]:"#ADD6FF4D"}},S3e={base:"vs-dark",inherit:!1,rules:[{token:"",foreground:"D4D4D4",background:"1E1E1E"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"74B0DF"},{token:"variable.predefined",foreground:"4864AA"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"B5CEA8"},{token:"number.hex",foreground:"5BB498"},{token:"regexp",foreground:"B46695"},{token:"annotation",foreground:"cc6666"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"DCDCDC"},{token:"delimiter.html",foreground:"808080"},{token:"delimiter.xml",foreground:"808080"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"A79873"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"DD6A6F"},{token:"metatag.content.html",foreground:"9CDCFE"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key.json",foreground:"9CDCFE"},{token:"string.value.json",foreground:"CE9178"},{token:"attribute.name",foreground:"9CDCFE"},{token:"attribute.value",foreground:"CE9178"},{token:"attribute.value.number.css",foreground:"B5CEA8"},{token:"attribute.value.unit.css",foreground:"B5CEA8"},{token:"attribute.value.hex.css",foreground:"D4D4D4"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"keyword.json",foreground:"CE9178"},{token:"keyword.flow.scss",foreground:"569CD6"},{token:"operator.scss",foreground:"909090"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[ud]:"#1E1E1E",[jh]:"#D4D4D4",[Ide]:"#3A3D41",[gI]:"#404040",[pI]:"#707070",[fK]:"#ADD6FF26"}},L3e={base:"hc-black",inherit:!1,rules:[{token:"",foreground:"FFFFFF",background:"000000"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"1AEBFF"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"FFFFFF"},{token:"regexp",foreground:"C0C0C0"},{token:"annotation",foreground:"569CD6"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"FFFF00"},{token:"delimiter.html",foreground:"FFFF00"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta",foreground:"D4D4D4"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"569CD6"},{token:"metatag.content.html",foreground:"1AEBFF"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key",foreground:"9CDCFE"},{token:"string.value",foreground:"CE9178"},{token:"attribute.name",foreground:"569CD6"},{token:"attribute.value",foreground:"3FF23F"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[ud]:"#000000",[jh]:"#FFFFFF",[gI]:"#FFFFFF",[pI]:"#FFFFFF"}},x3e={base:"hc-light",inherit:!1,rules:[{token:"",foreground:"292929",background:"FFFFFF"},{token:"invalid",foreground:"B5200D"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"264F70"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"B5200D"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"264F78"},{token:"attribute.value",foreground:"0451A5"},{token:"string",foreground:"A31515"},{token:"string.sql",foreground:"B5200D"},{token:"keyword",foreground:"0000FF"},{token:"keyword.flow",foreground:"AF00DB"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[ud]:"#FFFFFF",[jh]:"#292929",[gI]:"#292929",[pI]:"#292929"}},k3e={IconContribution:"base.contributions.icons"};var $se;(function(o){function e(t,i){let n=t.defaults;for(;ut.isThemeIcon(n);){const s=HC.getIcon(n.id);if(!s)return;n=s.defaults}return n}o.getDefinition=e})($se||($se={}));var jse;(function(o){function e(i){return{weight:i.weight,style:i.style,src:i.src.map(n=>({format:n.format,location:n.location.toString()}))}}o.toJSONObject=e;function t(i){const n=s=>xa(s)?s:void 0;if(i&&Array.isArray(i.src)&&i.src.every(s=>xa(s.format)&&xa(s.location)))return{weight:n(i.weight),style:n(i.style),src:i.src.map(s=>({format:s.format,location:st.parse(s.location)}))}}o.fromJSONObject=t})(jse||(jse={}));class D3e{constructor(){this._onDidChange=new Y,this.onDidChange=this._onDidChange.event,this.iconSchema={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:v("iconDefinition.fontId","The id of the font to use. If not set, the font that is defined first is used.")},fontCharacter:{type:"string",description:v("iconDefinition.fontCharacter","The font character associated with the icon definition.")}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}},this.iconReferenceSchema={type:"string",pattern:`^${ut.iconNameExpression}$`,enum:[],enumDescriptions:[]},this.iconsById={},this.iconFontsById={}}registerIcon(e,t,i,n){const s=this.iconsById[e];if(s){if(i&&!s.description){s.description=i,this.iconSchema.properties[e].markdownDescription=`${i} $(${e})`;const l=this.iconReferenceSchema.enum.indexOf(e);l!==-1&&(this.iconReferenceSchema.enumDescriptions[l]=i),this._onDidChange.fire()}return s}const r={id:e,description:i,defaults:t,deprecationMessage:n};this.iconsById[e]=r;const a={$ref:"#/definitions/icons"};return n&&(a.deprecationMessage=n),i&&(a.markdownDescription=`${i}: $(${e})`),this.iconSchema.properties[e]=a,this.iconReferenceSchema.enum.push(e),this.iconReferenceSchema.enumDescriptions.push(i||""),this._onDidChange.fire(),{id:e}}getIcons(){return Object.keys(this.iconsById).map(e=>this.iconsById[e])}getIcon(e){return this.iconsById[e]}getIconSchema(){return this.iconSchema}toString(){const e=(s,r)=>s.id.localeCompare(r.id),t=s=>{for(;ut.isThemeIcon(s.defaults);)s=this.iconsById[s.defaults.id];return`codicon codicon-${s?s.id:""}`},i=[];i.push("| preview     | identifier                        | default codicon ID                | description"),i.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");const n=Object.keys(this.iconsById).map(s=>this.iconsById[s]);for(const s of n.filter(r=>!!r.description).sort(e))i.push(`|<i class="${t(s)}"></i>|${s.id}|${ut.isThemeIcon(s.defaults)?s.defaults.id:s.id}|${s.description||""}|`);i.push("| preview     | identifier                        "),i.push("| ----------- | --------------------------------- |");for(const s of n.filter(r=>!ut.isThemeIcon(r.defaults)).sort(e))i.push(`|<i class="${t(s)}"></i>|${s.id}|`);return i.join(`
`)}}const HC=new D3e;Pn.add(k3e.IconContribution,HC);function hn(o,e,t,i){return HC.registerIcon(o,e,t,i)}function qhe(){return HC}function E3e(){const o=Ule();for(const e in o){const t="\\"+o[e].toString(16);HC.registerIcon(e,{fontCharacter:t})}}E3e();const Khe="vscode://schemas/icons",Ghe=Pn.as(l4.JSONContribution);Ghe.registerSchema(Khe,HC.getIconSchema());const qse=new Oi(()=>Ghe.notifySchemaChanged(Khe),200);HC.onDidChange(()=>{qse.isScheduled()||qse.schedule()});const Yhe=hn("widget-close",Se.close,v("widgetClose","Icon for the close action in widgets."));hn("goto-previous-location",Se.arrowUp,v("previousChangeIcon","Icon for goto previous editor location."));hn("goto-next-location",Se.arrowDown,v("nextChangeIcon","Icon for goto next editor location."));ut.modify(Se.sync,"spin");ut.modify(Se.loading,"spin");function I3e(o){const e=new le,t=e.add(new Y),i=qhe();return e.add(i.onDidChange(()=>t.fire())),o&&e.add(o.onDidProductIconThemeChange(()=>t.fire())),{dispose:()=>e.dispose(),onDidChange:t.event,getCSS(){const n=o?o.getProductIconTheme():new Zhe,s={},r=[],a=[];for(const l of i.getIcons()){const c=n.getIcon(l);if(!c)continue;const u=c.font,f=`--vscode-icon-${l.id}-font-family`,g=`--vscode-icon-${l.id}-content`;u?(s[u.id]=u.definition,a.push(`${f}: ${GH(u.id)};`,`${g}: '${c.fontCharacter}';`),r.push(`.codicon-${l.id}:before { content: '${c.fontCharacter}'; font-family: ${GH(u.id)}; }`)):(a.push(`${g}: '${c.fontCharacter}'; ${f}: 'codicon';`),r.push(`.codicon-${l.id}:before { content: '${c.fontCharacter}'; }`))}for(const l in s){const c=s[l],u=c.weight?`font-weight: ${c.weight};`:"",f=c.style?`font-style: ${c.style};`:"",g=c.src.map(p=>`${Lg(p.location)} format('${p.format}')`).join(", ");r.push(`@font-face { src: ${g}; font-family: ${GH(l)};${u}${f} font-display: block; }`)}return r.push(`:root { ${a.join(" ")} }`),r.join(`
`)}}}class Zhe{getIcon(e){const t=qhe();let i=e.defaults;for(;ut.isThemeIcon(i);){const n=t.getIcon(i.id);if(!n)return;i=n.defaults}return i}}const Zf="vs",E1="vs-dark",tb="hc-black",ib="hc-light",Xhe=Pn.as(Sde.ColorContribution),T3e=Pn.as(ade.ThemingContribution);class Qhe{constructor(e,t){this.semanticHighlighting=!1,this.themeData=t;const i=t.base;e.length>0?(RM(e)?this.id=e:this.id=i+" "+e,this.themeName=e):(this.id=i,this.themeName=i),this.colors=null,this.defaultColors=Object.create(null),this._tokenTheme=null}get base(){return this.themeData.base}notifyBaseUpdated(){this.themeData.inherit&&(this.colors=null,this._tokenTheme=null)}getColors(){if(!this.colors){const e=new Map;for(const t in this.themeData.colors)e.set(t,ue.fromHex(this.themeData.colors[t]));if(this.themeData.inherit){const t=mz(this.themeData.base);for(const i in t.colors)e.has(i)||e.set(i,ue.fromHex(t.colors[i]))}this.colors=e}return this.colors}getColor(e,t){const i=this.getColors().get(e);if(i)return i;if(t!==!1)return this.getDefault(e)}getDefault(e){let t=this.defaultColors[e];return t||(t=Xhe.resolveDefaultColor(e,this),this.defaultColors[e]=t,t)}defines(e){return this.getColors().has(e)}get type(){switch(this.base){case Zf:return bc.LIGHT;case tb:return bc.HIGH_CONTRAST_DARK;case ib:return bc.HIGH_CONTRAST_LIGHT;default:return bc.DARK}}get tokenTheme(){if(!this._tokenTheme){let e=[],t=[];if(this.themeData.inherit){const s=mz(this.themeData.base);e=s.rules,s.encodedTokensColors&&(t=s.encodedTokensColors)}const i=this.themeData.colors["editor.foreground"],n=this.themeData.colors["editor.background"];if(i||n){const s={token:""};i&&(s.foreground=i),n&&(s.background=n),e.push(s)}e=e.concat(this.themeData.rules),this.themeData.encodedTokensColors&&(t=this.themeData.encodedTokensColors),this._tokenTheme=jhe.createFromRawTokenTheme(e,t)}return this._tokenTheme}getTokenStyleMetadata(e,t,i){const s=this.tokenTheme._match([e].concat(t).join(".")).metadata,r=wa.getForeground(s),a=wa.getFontStyle(s);return{foreground:r,italic:!!(a&1),bold:!!(a&2),underline:!!(a&4),strikethrough:!!(a&8)}}}function RM(o){return o===Zf||o===E1||o===tb||o===ib}function mz(o){switch(o){case Zf:return w3e;case E1:return S3e;case tb:return L3e;case ib:return x3e}}function ER(o){const e=mz(o);return new Qhe(o,e)}class N3e extends X{constructor(){super(),this._onColorThemeChange=this._register(new Y),this.onDidColorThemeChange=this._onColorThemeChange.event,this._onProductIconThemeChange=this._register(new Y),this.onDidProductIconThemeChange=this._onProductIconThemeChange.event,this._environment=Object.create(null),this._builtInProductIconTheme=new Zhe,this._autoDetectHighContrast=!0,this._knownThemes=new Map,this._knownThemes.set(Zf,ER(Zf)),this._knownThemes.set(E1,ER(E1)),this._knownThemes.set(tb,ER(tb)),this._knownThemes.set(ib,ER(ib));const e=this._register(I3e(this));this._codiconCSS=e.getCSS(),this._themeCSS="",this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._globalStyleElement=null,this._styleElements=[],this._colorMapOverride=null,this.setTheme(Zf),this._onOSSchemeChanged(),this._register(e.onDidChange(()=>{this._codiconCSS=e.getCSS(),this._updateCSS()})),ice(Vi,"(forced-colors: active)",()=>{this._onOSSchemeChanged()})}registerEditorContainer(e){return CA(e)?this._registerShadowDomContainer(e):this._registerRegularEditorContainer()}_registerRegularEditorContainer(){return this._globalStyleElement||(this._globalStyleElement=$l(void 0,e=>{e.className="monaco-colors",e.textContent=this._allCSS}),this._styleElements.push(this._globalStyleElement)),X.None}_registerShadowDomContainer(e){const t=$l(e,i=>{i.className="monaco-colors",i.textContent=this._allCSS});return this._styleElements.push(t),{dispose:()=>{for(let i=0;i<this._styleElements.length;i++)if(this._styleElements[i]===t){this._styleElements.splice(i,1);return}}}}defineTheme(e,t){if(!/^[a-z0-9\-]+$/i.test(e))throw new Error("Illegal theme name!");if(!RM(t.base)&&!RM(e))throw new Error("Illegal theme base!");this._knownThemes.set(e,new Qhe(e,t)),RM(e)&&this._knownThemes.forEach(i=>{i.base===e&&i.notifyBaseUpdated()}),this._theme.themeName===e&&this.setTheme(e)}getColorTheme(){return this._theme}setColorMapOverride(e){this._colorMapOverride=e,this._updateThemeOrColorMap()}setTheme(e){let t;this._knownThemes.has(e)?t=this._knownThemes.get(e):t=this._knownThemes.get(Zf),this._updateActualTheme(t)}_updateActualTheme(e){!e||this._theme===e||(this._theme=e,this._updateThemeOrColorMap())}_onOSSchemeChanged(){if(this._autoDetectHighContrast){const e=Vi.matchMedia("(forced-colors: active)").matches;if(e!==lu(this._theme.type)){let t;sS(this._theme.type)?t=e?tb:E1:t=e?ib:Zf,this._updateActualTheme(this._knownThemes.get(t))}}}setAutoDetectHighContrast(e){this._autoDetectHighContrast=e,this._onOSSchemeChanged()}_updateThemeOrColorMap(){const e=[],t={},i={addRule:r=>{t[r]||(e.push(r),t[r]=!0)}};T3e.getThemingParticipants().forEach(r=>r(this._theme,i,this._environment));const n=[];for(const r of Xhe.getColors()){const a=this._theme.getColor(r.id,!0);a&&n.push(`${dK(r.id)}: ${a.toString()};`)}i.addRule(`.monaco-editor, .monaco-diff-editor, .monaco-component { ${n.join(`
`)} }`);const s=this._colorMapOverride||this._theme.tokenTheme.getColorMap();i.addRule(y3e(s)),this._themeCSS=e.join(`
`),this._updateCSS(),Kn.setColorMap(s),this._onColorThemeChange.fire(this._theme)}_updateCSS(){this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._styleElements.forEach(e=>e.textContent=this._allCSS)}getFileIconTheme(){return{hasFileIcons:!1,hasFolderIcons:!1,hidesExplorerArrows:!1}}getProductIconTheme(){return this._builtInProductIconTheme}}const Ql=Gt("themeService");var R3e=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},U7=function(o,e){return function(t,i){e(t,i,o)}};let _z=class extends X{constructor(e,t,i){super(),this._contextKeyService=e,this._layoutService=t,this._configurationService=i,this._accessibilitySupport=0,this._onDidChangeScreenReaderOptimized=new Y,this._onDidChangeReducedMotion=new Y,this._onDidChangeLinkUnderline=new Y,this._accessibilityModeEnabledContext=oI.bindTo(this._contextKeyService);const n=()=>this._accessibilityModeEnabledContext.set(this.isScreenReaderOptimized());this._register(this._configurationService.onDidChangeConfiguration(r=>{r.affectsConfiguration("editor.accessibilitySupport")&&(n(),this._onDidChangeScreenReaderOptimized.fire()),r.affectsConfiguration("workbench.reduceMotion")&&(this._configMotionReduced=this._configurationService.getValue("workbench.reduceMotion"),this._onDidChangeReducedMotion.fire())})),n(),this._register(this.onDidChangeScreenReaderOptimized(()=>n()));const s=Vi.matchMedia("(prefers-reduced-motion: reduce)");this._systemMotionReduced=s.matches,this._configMotionReduced=this._configurationService.getValue("workbench.reduceMotion"),this._linkUnderlinesEnabled=this._configurationService.getValue("accessibility.underlineLinks"),this.initReducedMotionListeners(s),this.initLinkUnderlineListeners()}initReducedMotionListeners(e){this._register(se(e,"change",()=>{this._systemMotionReduced=e.matches,this._configMotionReduced==="auto"&&this._onDidChangeReducedMotion.fire()}));const t=()=>{const i=this.isMotionReduced();this._layoutService.mainContainer.classList.toggle("reduce-motion",i),this._layoutService.mainContainer.classList.toggle("enable-motion",!i)};t(),this._register(this.onDidChangeReducedMotion(()=>t()))}initLinkUnderlineListeners(){this._register(this._configurationService.onDidChangeConfiguration(t=>{if(t.affectsConfiguration("accessibility.underlineLinks")){const i=this._configurationService.getValue("accessibility.underlineLinks");this._linkUnderlinesEnabled=i,this._onDidChangeLinkUnderline.fire()}}));const e=()=>{const t=this._linkUnderlinesEnabled;this._layoutService.mainContainer.classList.toggle("underline-links",t)};e(),this._register(this.onDidChangeLinkUnderlines(()=>e()))}onDidChangeLinkUnderlines(e){return this._onDidChangeLinkUnderline.event(e)}get onDidChangeScreenReaderOptimized(){return this._onDidChangeScreenReaderOptimized.event}isScreenReaderOptimized(){const e=this._configurationService.getValue("editor.accessibilitySupport");return e==="on"||e==="auto"&&this._accessibilitySupport===2}get onDidChangeReducedMotion(){return this._onDidChangeReducedMotion.event}isMotionReduced(){const e=this._configMotionReduced;return e==="on"||e==="auto"&&this._systemMotionReduced}getAccessibilitySupport(){return this._accessibilitySupport}};_z=R3e([U7(0,ht),U7(1,e_),U7(2,Ht)],_z);var z4=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Th=function(o,e){return function(t,i){e(t,i,o)}},bw,zx;let vz=class{constructor(e,t,i){this._commandService=e,this._keybindingService=t,this._hiddenStates=new bz(i)}createMenu(e,t,i){return new kP(e,this._hiddenStates,{emitEventsForSubmenuChanges:!1,eventDebounceDelay:50,...i},this._commandService,this._keybindingService,t)}getMenuActions(e,t,i){const n=new kP(e,this._hiddenStates,{emitEventsForSubmenuChanges:!1,eventDebounceDelay:50,...i},this._commandService,this._keybindingService,t),s=n.getActions(i);return n.dispose(),s}resetHiddenStates(e){this._hiddenStates.reset(e)}};vz=z4([Th(0,nn),Th(1,Di),Th(2,md)],vz);var ub;let bz=(ub=class{constructor(e){this._storageService=e,this._disposables=new le,this._onDidChange=new Y,this.onDidChange=this._onDidChange.event,this._ignoreChangeEvent=!1,this._hiddenByDefaultCache=new Map;try{const t=e.get(bw._key,0,"{}");this._data=JSON.parse(t)}catch{this._data=Object.create(null)}this._disposables.add(e.onDidChangeValue(0,bw._key,this._disposables)(()=>{if(!this._ignoreChangeEvent)try{const t=e.get(bw._key,0,"{}");this._data=JSON.parse(t)}catch(t){console.log("FAILED to read storage after UPDATE",t)}this._onDidChange.fire()}))}dispose(){this._onDidChange.dispose(),this._disposables.dispose()}_isHiddenByDefault(e,t){return this._hiddenByDefaultCache.get(`${e.id}/${t}`)??!1}setDefaultState(e,t,i){this._hiddenByDefaultCache.set(`${e.id}/${t}`,i)}isHidden(e,t){var s;const i=this._isHiddenByDefault(e,t),n=((s=this._data[e.id])==null?void 0:s.includes(t))??!1;return i?!n:n}updateHidden(e,t,i){this._isHiddenByDefault(e,t)&&(i=!i);const s=this._data[e.id];if(i)s?s.indexOf(t)<0&&s.push(t):this._data[e.id]=[t];else if(s){const r=s.indexOf(t);r>=0&&SLe(s,r),s.length===0&&delete this._data[e.id]}this._persist()}reset(e){if(e===void 0)this._data=Object.create(null),this._persist();else{for(const{id:t}of e)this._data[t]&&delete this._data[t];this._persist()}}_persist(){try{this._ignoreChangeEvent=!0;const e=JSON.stringify(this._data);this._storageService.store(bw._key,e,0,0)}finally{this._ignoreChangeEvent=!1}}},bw=ub,ub._key="menu.hiddenCommands",ub);bz=bw=z4([Th(0,md)],bz);class _k{constructor(e,t){this._id=e,this._collectContextKeysForSubmenus=t,this._menuGroups=[],this._allMenuIds=new Set,this._structureContextKeys=new Set,this._preconditionContextKeys=new Set,this._toggledContextKeys=new Set,this.refresh()}get allMenuIds(){return this._allMenuIds}get structureContextKeys(){return this._structureContextKeys}get preconditionContextKeys(){return this._preconditionContextKeys}get toggledContextKeys(){return this._toggledContextKeys}refresh(){this._menuGroups.length=0,this._allMenuIds.clear(),this._structureContextKeys.clear(),this._preconditionContextKeys.clear(),this._toggledContextKeys.clear();const e=this._sort(lo.getMenuItems(this._id));let t;for(const i of e){const n=i.group||"";(!t||t[0]!==n)&&(t=[n,[]],this._menuGroups.push(t)),t[1].push(i),this._collectContextKeysAndSubmenuIds(i)}this._allMenuIds.add(this._id)}_sort(e){return e}_collectContextKeysAndSubmenuIds(e){if(_k._fillInKbExprKeys(e.when,this._structureContextKeys),m1(e)){if(e.command.precondition&&_k._fillInKbExprKeys(e.command.precondition,this._preconditionContextKeys),e.command.toggled){const t=e.command.toggled.condition||e.command.toggled;_k._fillInKbExprKeys(t,this._toggledContextKeys)}}else this._collectContextKeysForSubmenus&&(lo.getMenuItems(e.submenu).forEach(this._collectContextKeysAndSubmenuIds,this),this._allMenuIds.add(e.submenu))}static _fillInKbExprKeys(e,t){if(e)for(const i of e.keys())t.add(i)}}let Cz=zx=class extends _k{constructor(e,t,i,n,s,r){super(e,i),this._hiddenStates=t,this._commandService=n,this._keybindingService=s,this._contextKeyService=r,this.refresh()}createActionGroups(e){const t=[];for(const i of this._menuGroups){const[n,s]=i;let r;for(const a of s)if(this._contextKeyService.contextMatchesRules(a.when)){const l=m1(a);l&&this._hiddenStates.setDefaultState(this._id,a.command.id,!!a.isHiddenByDefault);const c=M3e(this._id,l?a.command:a,this._hiddenStates);if(l){const u=Jhe(this._commandService,this._keybindingService,a.command.id,a.when);(r??(r=[])).push(new il(a.command,a.alt,e,c,u,this._contextKeyService,this._commandService))}else{const u=new zx(a.submenu,this._hiddenStates,this._collectContextKeysForSubmenus,this._commandService,this._keybindingService,this._contextKeyService).createActionGroups(e),f=Zs.join(...u.map(g=>g[1]));f.length>0&&(r??(r=[])).push(new _1(a,c,f))}}r&&r.length>0&&t.push([n,r])}return t}_sort(e){return e.sort(zx._compareMenuItems)}static _compareMenuItems(e,t){const i=e.group,n=t.group;if(i!==n){if(i){if(!n)return-1}else return 1;if(i==="navigation")return-1;if(n==="navigation")return 1;const a=i.localeCompare(n);if(a!==0)return a}const s=e.order||0,r=t.order||0;return s<r?-1:s>r?1:zx._compareTitles(m1(e)?e.command.title:e.title,m1(t)?t.command.title:t.title)}static _compareTitles(e,t){const i=typeof e=="string"?e:e.original,n=typeof t=="string"?t:t.original;return i.localeCompare(n)}};Cz=zx=z4([Th(3,nn),Th(4,Di),Th(5,ht)],Cz);let kP=class{constructor(e,t,i,n,s,r){this._disposables=new le,this._menuInfo=new Cz(e,t,i.emitEventsForSubmenuChanges,n,s,r);const a=new Oi(()=>{this._menuInfo.refresh(),this._onDidChange.fire({menu:this,isStructuralChange:!0,isEnablementChange:!0,isToggleChange:!0})},i.eventDebounceDelay);this._disposables.add(a),this._disposables.add(lo.onDidChangeMenu(f=>{for(const g of this._menuInfo.allMenuIds)if(f.has(g)){a.schedule();break}}));const l=this._disposables.add(new le),c=f=>{let g=!1,p=!1,_=!1;for(const b of f)if(g=g||b.isStructuralChange,p=p||b.isEnablementChange,_=_||b.isToggleChange,g&&p&&_)break;return{menu:this,isStructuralChange:g,isEnablementChange:p,isToggleChange:_}},u=()=>{l.add(r.onDidChangeContext(f=>{const g=f.affectsSome(this._menuInfo.structureContextKeys),p=f.affectsSome(this._menuInfo.preconditionContextKeys),_=f.affectsSome(this._menuInfo.toggledContextKeys);(g||p||_)&&this._onDidChange.fire({menu:this,isStructuralChange:g,isEnablementChange:p,isToggleChange:_})})),l.add(t.onDidChange(f=>{this._onDidChange.fire({menu:this,isStructuralChange:!0,isEnablementChange:!1,isToggleChange:!1})}))};this._onDidChange=new Mle({onWillAddFirstListener:u,onDidRemoveLastListener:l.clear.bind(l),delay:i.eventDebounceDelay,merge:c}),this.onDidChange=this._onDidChange.event}getActions(e){return this._menuInfo.createActionGroups(e)}dispose(){this._disposables.dispose(),this._onDidChange.dispose()}};kP=z4([Th(3,nn),Th(4,Di),Th(5,ht)],kP);function M3e(o,e,t){const i=FEe(e)?e.submenu.id:e.id,n=typeof e.title=="string"?e.title:e.title.value,s=Zv({id:`hide/${o.id}/${i}`,label:v("hide.label","Hide '{0}'",n),run(){t.updateHidden(o,i,!0)}}),r=Zv({id:`toggle/${o.id}/${i}`,label:n,get checked(){return!t.isHidden(o,i)},run(){t.updateHidden(o,i,!!this.checked)}});return{hide:s,toggle:r,get isHidden(){return!r.checked}}}function Jhe(o,e,t,i=void 0,n=!0){return Zv({id:`configureKeybinding/${t}`,label:v("configure keybinding","Configure Keybinding"),enabled:n,run(){const r=!!!e.lookupKeybinding(t)&&i?i.serialize():void 0;o.executeCommand("workbench.action.openGlobalKeybindings",`@command:${t}`+(r?` +when:${r}`:""))}})}var A3e=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Kse=function(o,e){return function(t,i){e(t,i,o)}},yz;const Gse="application/vnd.code.resources";var hb;let wz=(hb=class extends X{constructor(e,t){super(),this.layoutService=e,this.logService=t,this.mapTextToType=new Map,this.findText="",this.resources=[],this.resourcesStateHash=void 0,(yg||nce)&&this.installWebKitWriteTextWorkaround(),this._register(Ee.runAndSubscribe(KF,({window:i,disposables:n})=>{n.add(se(i.document,"copy",()=>this.clearResourcesState()))},{window:Vi,disposables:this._store}))}installWebKitWriteTextWorkaround(){const e=()=>{const t=new zS;this.webKitPendingClipboardWritePromise&&!this.webKitPendingClipboardWritePromise.isSettled&&this.webKitPendingClipboardWritePromise.cancel(),this.webKitPendingClipboardWritePromise=t,Mx().navigator.clipboard.write([new ClipboardItem({"text/plain":t.p})]).catch(async i=>{(!(i instanceof Error)||i.name!=="NotAllowedError"||!t.isRejected)&&this.logService.error(i)})};this._register(Ee.runAndSubscribe(this.layoutService.onDidAddContainer,({container:t,disposables:i})=>{i.add(se(t,"click",e)),i.add(se(t,"keydown",e))},{container:this.layoutService.mainContainer,disposables:this._store}))}async writeText(e,t){if(this.clearResourcesState(),t){this.mapTextToType.set(t,e);return}if(this.webKitPendingClipboardWritePromise)return this.webKitPendingClipboardWritePromise.complete(e);try{return await Mx().navigator.clipboard.writeText(e)}catch(i){console.error(i)}this.fallbackWriteText(e)}fallbackWriteText(e){const t=US(),i=t.activeElement,n=t.body.appendChild(xe("textarea",{"aria-hidden":!0}));n.style.height="1px",n.style.width="1px",n.style.position="absolute",n.value=e,n.focus(),n.select(),t.execCommand("copy"),Ys(i)&&i.focus(),n.remove()}async readText(e){if(e)return this.mapTextToType.get(e)||"";try{return await Mx().navigator.clipboard.readText()}catch(t){console.error(t)}return""}async readFindText(){return this.findText}async writeFindText(e){this.findText=e}async readResources(){try{const t=await Mx().navigator.clipboard.read();for(const i of t)if(i.types.includes(`web ${Gse}`)){const n=await i.getType(`web ${Gse}`);return JSON.parse(await n.text()).map(r=>st.from(r))}}catch{}const e=await this.computeResourcesStateHash();return this.resourcesStateHash!==e&&this.clearResourcesState(),this.resources}async computeResourcesStateHash(){if(this.resources.length===0)return;const e=await this.readText();return jF(e.substring(0,yz.MAX_RESOURCE_STATE_SOURCE_LENGTH))}clearInternalState(){this.clearResourcesState()}clearResourcesState(){this.resources=[],this.resourcesStateHash=void 0}},yz=hb,hb.MAX_RESOURCE_STATE_SOURCE_LENGTH=1e3,hb);wz=yz=A3e([Kse(0,e_),Kse(1,Oo)],wz);const Bg=Gt("clipboardService");var P3e=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},O3e=function(o,e){return function(t,i){e(t,i,o)}};const vk="data-keybinding-context";let yG=class{constructor(e,t){this._id=e,this._parent=t,this._value=Object.create(null),this._value._contextId=e}get value(){return{...this._value}}setValue(e,t){return this._value[e]!==t?(this._value[e]=t,!0):!1}removeValue(e){return e in this._value?(delete this._value[e],!0):!1}getValue(e){const t=this._value[e];return typeof t>"u"&&this._parent?this._parent.getValue(e):t}};const N2=class N2 extends yG{constructor(){super(-1,null)}setValue(e,t){return!1}removeValue(e){return!1}getValue(e){}};N2.INSTANCE=new N2;let vS=N2;const Yk=class Yk extends yG{constructor(e,t,i){super(e,null),this._configurationService=t,this._values=y1.forConfigKeys(),this._listener=this._configurationService.onDidChangeConfiguration(n=>{if(n.source===7){const s=Array.from(this._values,([r])=>r);this._values.clear(),i.fire(new Zse(s))}else{const s=[];for(const r of n.affectedKeys){const a=`config.${r}`,l=this._values.findSuperstr(a);l!==void 0&&(s.push(...ti.map(l,([c])=>c)),this._values.deleteSuperstr(a)),this._values.has(a)&&(s.push(a),this._values.delete(a))}i.fire(new Zse(s))}})}dispose(){this._listener.dispose()}getValue(e){if(e.indexOf(Yk._keyPrefix)!==0)return super.getValue(e);if(this._values.has(e))return this._values.get(e);const t=e.substr(Yk._keyPrefix.length),i=this._configurationService.getValue(t);let n;switch(typeof i){case"number":case"boolean":case"string":n=i;break;default:Array.isArray(i)?n=JSON.stringify(i):n=i}return this._values.set(e,n),n}setValue(e,t){return super.setValue(e,t)}removeValue(e){return super.removeValue(e)}};Yk._keyPrefix="config.";let Sz=Yk;class F3e{constructor(e,t,i){this._service=e,this._key=t,this._defaultValue=i,this.reset()}set(e){this._service.setContext(this._key,e)}reset(){typeof this._defaultValue>"u"?this._service.removeContext(this._key):this._service.setContext(this._key,this._defaultValue)}get(){return this._service.getContextKeyValue(this._key)}}class Yse{constructor(e){this.key=e}affectsSome(e){return e.has(this.key)}allKeysContainedIn(e){return this.affectsSome(e)}}class Zse{constructor(e){this.keys=e}affectsSome(e){for(const t of this.keys)if(e.has(t))return!0;return!1}allKeysContainedIn(e){return this.keys.every(t=>e.has(t))}}class B3e{constructor(e){this.events=e}affectsSome(e){for(const t of this.events)if(t.affectsSome(e))return!0;return!1}allKeysContainedIn(e){return this.events.every(t=>t.allKeysContainedIn(e))}}function W3e(o,e){return o.allKeysContainedIn(new Set(Object.keys(e)))}class efe extends X{constructor(e){super(),this._onDidChangeContext=this._register(new nC({merge:t=>new B3e(t)})),this.onDidChangeContext=this._onDidChangeContext.event,this._isDisposed=!1,this._myContextId=e}createKey(e,t){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new F3e(this,e,t)}bufferChangeEvents(e){this._onDidChangeContext.pause();try{e()}finally{this._onDidChangeContext.resume()}}createScoped(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new H3e(this,e)}contextMatchesRules(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");const t=this.getContextValuesContainer(this._myContextId);return e?e.evaluate(t):!0}getContextKeyValue(e){if(!this._isDisposed)return this.getContextValuesContainer(this._myContextId).getValue(e)}setContext(e,t){if(this._isDisposed)return;const i=this.getContextValuesContainer(this._myContextId);i&&i.setValue(e,t)&&this._onDidChangeContext.fire(new Yse(e))}removeContext(e){this._isDisposed||this.getContextValuesContainer(this._myContextId).removeValue(e)&&this._onDidChangeContext.fire(new Yse(e))}getContext(e){return this._isDisposed?vS.INSTANCE:this.getContextValuesContainer(V3e(e))}dispose(){super.dispose(),this._isDisposed=!0}}let Lz=class extends efe{constructor(e){super(0),this._contexts=new Map,this._lastContextId=0;const t=this._register(new Sz(this._myContextId,e,this._onDidChangeContext));this._contexts.set(this._myContextId,t)}getContextValuesContainer(e){return this._isDisposed?vS.INSTANCE:this._contexts.get(e)||vS.INSTANCE}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ContextKeyService has been disposed");const t=++this._lastContextId;return this._contexts.set(t,new yG(t,this.getContextValuesContainer(e))),t}disposeContext(e){this._isDisposed||this._contexts.delete(e)}};Lz=P3e([O3e(0,Ht)],Lz);class H3e extends efe{constructor(e,t){if(super(e.createChildContext()),this._parentChangeListener=this._register(new Xs),this._parent=e,this._updateParentChangeListener(),this._domNode=t,this._domNode.hasAttribute(vk)){let i="";this._domNode.classList&&(i=Array.from(this._domNode.classList.values()).join(", ")),console.error(`Element already has context attribute${i?": "+i:""}`)}this._domNode.setAttribute(vk,String(this._myContextId))}_updateParentChangeListener(){this._parentChangeListener.value=this._parent.onDidChangeContext(e=>{const i=this._parent.getContextValuesContainer(this._myContextId).value;W3e(e,i)||this._onDidChangeContext.fire(e)})}dispose(){this._isDisposed||(this._parent.disposeContext(this._myContextId),this._domNode.removeAttribute(vk),super.dispose())}getContextValuesContainer(e){return this._isDisposed?vS.INSTANCE:this._parent.getContextValuesContainer(e)}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ScopedContextKeyService has been disposed");return this._parent.createChildContext(e)}disposeContext(e){this._isDisposed||this._parent.disposeContext(e)}}function V3e(o){for(;o;){if(o.hasAttribute(vk)){const e=o.getAttribute(vk);return e?parseInt(e,10):NaN}o=o.parentElement}return 0}function z3e(o,e,t){o.get(ht).createKey(String(e),U3e(t))}function U3e(o){return ble(o,e=>{if(typeof e=="object"&&e.$mid===1)return st.revive(e).toString();if(e instanceof st)return e.toString()})}ii.registerCommand("_setContext",z3e);ii.registerCommand({id:"getContextKeyInfo",handler(){return[...Pe.all()].sort((o,e)=>o.key.localeCompare(e.key))},metadata:{description:v("getContextKeyInfo","A command that returns information about context keys"),args:[]}});ii.registerCommand("_generateContextKeyInfo",function(){const o=[],e=new Set;for(const t of Pe.all())e.has(t.key)||(e.add(t.key),o.push(t));o.sort((t,i)=>t.key.localeCompare(i.key)),console.log(JSON.stringify(o,void 0,2))});let $3e=class{constructor(e,t){this.key=e,this.data=t,this.incoming=new Map,this.outgoing=new Map}};class Xse{constructor(e){this._hashFn=e,this._nodes=new Map}roots(){const e=[];for(const t of this._nodes.values())t.outgoing.size===0&&e.push(t);return e}insertEdge(e,t){const i=this.lookupOrInsertNode(e),n=this.lookupOrInsertNode(t);i.outgoing.set(n.key,n),n.incoming.set(i.key,i)}removeNode(e){const t=this._hashFn(e);this._nodes.delete(t);for(const i of this._nodes.values())i.outgoing.delete(t),i.incoming.delete(t)}lookupOrInsertNode(e){const t=this._hashFn(e);let i=this._nodes.get(t);return i||(i=new $3e(t,e),this._nodes.set(t,i)),i}isEmpty(){return this._nodes.size===0}toString(){const e=[];for(const[t,i]of this._nodes)e.push(`${t}
	(-> incoming)[${[...i.incoming.keys()].join(", ")}]
	(outgoing ->)[${[...i.outgoing.keys()].join(",")}]
`);return e.join(`
`)}findCycleSlow(){for(const[e,t]of this._nodes){const i=new Set([e]),n=this._findCycle(t,i);if(n)return n}}_findCycle(e,t){for(const[i,n]of e.outgoing){if(t.has(i))return[...t,i].join(" -> ");t.add(i);const s=this._findCycle(n,t);if(s)return s;t.delete(i)}}}class s0{constructor(...e){this._entries=new Map;for(const[t,i]of e)this.set(t,i)}set(e,t){const i=this._entries.get(e);return this._entries.set(e,t),i}get(e){return this._entries.get(e)}}const j3e=!1;class Qse extends Error{constructor(e){super("cyclic dependency between services"),this.message=e.findCycleSlow()??`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}}class DP{constructor(e=new s0,t=!1,i,n=j3e){this._services=e,this._strict=t,this._parent=i,this._enableTracing=n,this._isDisposed=!1,this._servicesToMaybeDispose=new Set,this._children=new Set,this._activeInstantiations=new Set,this._services.set(nt,this),this._globalGraph=n?(i==null?void 0:i._globalGraph)??new Xse(s=>s):void 0}dispose(){if(!this._isDisposed){this._isDisposed=!0,$i(this._children),this._children.clear();for(const e of this._servicesToMaybeDispose)VF(e)&&e.dispose();this._servicesToMaybeDispose.clear()}}_throwIfDisposed(){if(this._isDisposed)throw new Error("InstantiationService has been disposed")}createChild(e,t){this._throwIfDisposed();const i=this,n=new class extends DP{dispose(){i._children.delete(n),super.dispose()}}(e,this._strict,this,this._enableTracing);return this._children.add(n),t==null||t.add(n),n}invokeFunction(e,...t){this._throwIfDisposed();const i=bk.traceInvocation(this._enableTracing,e);let n=!1;try{return e({get:r=>{if(n)throw kq("service accessor is only valid during the invocation of its target method");const a=this._getOrCreateServiceInstance(r,i);if(!a)throw new Error(`[invokeFunction] unknown service '${r}'`);return a}},...t)}finally{n=!0,i.stop()}}createInstance(e,...t){this._throwIfDisposed();let i,n;return e instanceof ph?(i=bk.traceCreation(this._enableTracing,e.ctor),n=this._createInstance(e.ctor,e.staticArguments.concat(t),i)):(i=bk.traceCreation(this._enableTracing,e),n=this._createInstance(e,t,i)),i.stop(),n}_createInstance(e,t=[],i){const n=tu.getServiceDependencies(e).sort((a,l)=>a.index-l.index),s=[];for(const a of n){const l=this._getOrCreateServiceInstance(a.id,i);l||this._throwIfStrict(`[createInstance] ${e.name} depends on UNKNOWN service ${a.id}.`,!1),s.push(l)}const r=n.length>0?n[0].index:t.length;if(t.length!==r){console.trace(`[createInstance] First service dependency of ${e.name} at position ${r+1} conflicts with ${t.length} static arguments`);const a=r-t.length;a>0?t=t.concat(new Array(a)):t=t.slice(0,r)}return Reflect.construct(e,t.concat(s))}_setCreatedServiceInstance(e,t){if(this._services.get(e)instanceof ph)this._services.set(e,t);else if(this._parent)this._parent._setCreatedServiceInstance(e,t);else throw new Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(e){const t=this._services.get(e);return!t&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):t}_getOrCreateServiceInstance(e,t){this._globalGraph&&this._globalGraphImplicitDependency&&this._globalGraph.insertEdge(this._globalGraphImplicitDependency,String(e));const i=this._getServiceInstanceOrDescriptor(e);return i instanceof ph?this._safeCreateAndCacheServiceInstance(e,i,t.branch(e,!0)):(t.branch(e,!1),i)}_safeCreateAndCacheServiceInstance(e,t,i){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,t,i)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,t,i){var l;const n=new Xse(c=>c.id.toString());let s=0;const r=[{id:e,desc:t,_trace:i}],a=new Set;for(;r.length;){const c=r.pop();if(!a.has(String(c.id))){if(a.add(String(c.id)),n.lookupOrInsertNode(c),s++>1e3)throw new Qse(n);for(const u of tu.getServiceDependencies(c.desc.ctor)){const f=this._getServiceInstanceOrDescriptor(u.id);if(f||this._throwIfStrict(`[createInstance] ${e} depends on ${u.id} which is NOT registered.`,!0),(l=this._globalGraph)==null||l.insertEdge(String(c.id),String(u.id)),f instanceof ph){const g={id:u.id,desc:f,_trace:c._trace.branch(u.id,!0)};n.insertEdge(c,g),r.push(g)}}}}for(;;){const c=n.roots();if(c.length===0){if(!n.isEmpty())throw new Qse(n);break}for(const{data:u}of c){if(this._getServiceInstanceOrDescriptor(u.id)instanceof ph){const g=this._createServiceInstanceWithOwner(u.id,u.desc.ctor,u.desc.staticArguments,u.desc.supportsDelayedInstantiation,u._trace);this._setCreatedServiceInstance(u.id,g)}n.removeNode(u)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,t,i=[],n,s){if(this._services.get(e)instanceof ph)return this._createServiceInstance(e,t,i,n,s,this._servicesToMaybeDispose);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,t,i,n,s);throw new Error(`illegalState - creating UNKNOWN service instance ${t.name}`)}_createServiceInstance(e,t,i=[],n,s,r){if(n){const a=new DP(void 0,this._strict,this,this._enableTracing);a._globalGraphImplicitDependency=String(e);const l=new Map,c=new cDe(()=>{const u=a._createInstance(t,i,s);for(const[f,g]of l){const p=u[f];if(typeof p=="function")for(const _ of g)_.disposable=p.apply(u,_.listener)}return l.clear(),r.add(u),u});return new Proxy(Object.create(null),{get(u,f){if(!c.isInitialized&&typeof f=="string"&&(f.startsWith("onDid")||f.startsWith("onWill"))){let _=l.get(f);return _||(_=new jr,l.set(f,_)),(y,S,L)=>{if(c.isInitialized)return c.value[f](y,S,L);{const x={listener:[y,S,L],disposable:void 0},k=_.push(x);return it(()=>{var N;k(),(N=x.disposable)==null||N.dispose()})}}}if(f in u)return u[f];const g=c.value;let p=g[f];return typeof p!="function"||(p=p.bind(g),u[f]=p),p},set(u,f,g){return c.value[f]=g,!0},getPrototypeOf(u){return t.prototype}})}else{const a=this._createInstance(t,i,s);return r.add(a),a}}_throwIfStrict(e,t){if(t&&console.warn(e),this._strict)throw new Error(e)}}const Ll=class Ll{static traceInvocation(e,t){return e?new Ll(2,t.name||new Error().stack.split(`
`).slice(3,4).join(`
`)):Ll._None}static traceCreation(e,t){return e?new Ll(1,t.name):Ll._None}constructor(e,t){this.type=e,this.name=t,this._start=Date.now(),this._dep=[]}branch(e,t){const i=new Ll(3,e.toString());return this._dep.push([e,t,i]),i}stop(){const e=Date.now()-this._start;Ll._totals+=e;let t=!1;function i(s,r){const a=[],l=new Array(s+1).join("	");for(const[c,u,f]of r._dep)if(u&&f){t=!0,a.push(`${l}CREATES -> ${c}`);const g=i(s+1,f);g&&a.push(g)}else a.push(`${l}uses -> ${c}`);return a.join(`
`)}const n=[`${this.type===1?"CREATE":"CALL"} ${this.name}`,`${i(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${Ll._totals.toFixed(2)}ms)`];(e>2||t)&&Ll.all.add(n.join(`
`))}};Ll.all=new Set,Ll._None=new class extends Ll{constructor(){super(0,null)}stop(){}branch(){return this}},Ll._totals=0;let bk=Ll;const q3e=new Set([Lt.inMemory,Lt.vscodeSourceControl,Lt.walkThrough,Lt.walkThroughSnippet,Lt.vscodeChatCodeBlock]);class K3e{constructor(){this._byResource=new co,this._byOwner=new Map}set(e,t,i){let n=this._byResource.get(e);n||(n=new Map,this._byResource.set(e,n)),n.set(t,i);let s=this._byOwner.get(t);s||(s=new co,this._byOwner.set(t,s)),s.set(e,i)}get(e,t){const i=this._byResource.get(e);return i==null?void 0:i.get(t)}delete(e,t){let i=!1,n=!1;const s=this._byResource.get(e);s&&(i=s.delete(t));const r=this._byOwner.get(t);if(r&&(n=r.delete(e)),i!==n)throw new Error("illegal state");return i&&n}values(e){var t,i;return typeof e=="string"?((t=this._byOwner.get(e))==null?void 0:t.values())??ti.empty():st.isUri(e)?((i=this._byResource.get(e))==null?void 0:i.values())??ti.empty():ti.map(ti.concat(...this._byOwner.values()),n=>n[1])}}class G3e{constructor(e){this.errors=0,this.infos=0,this.warnings=0,this.unknowns=0,this._data=new co,this._service=e,this._subscription=e.onMarkerChanged(this._update,this)}dispose(){this._subscription.dispose()}_update(e){for(const t of e){const i=this._data.get(t);i&&this._substract(i);const n=this._resourceStats(t);this._add(n),this._data.set(t,n)}}_resourceStats(e){const t={errors:0,warnings:0,infos:0,unknowns:0};if(q3e.has(e.scheme))return t;for(const{severity:i}of this._service.read({resource:e}))i===Yn.Error?t.errors+=1:i===Yn.Warning?t.warnings+=1:i===Yn.Info?t.infos+=1:t.unknowns+=1;return t}_substract(e){this.errors-=e.errors,this.warnings-=e.warnings,this.infos-=e.infos,this.unknowns-=e.unknowns}_add(e){this.errors+=e.errors,this.warnings+=e.warnings,this.infos+=e.infos,this.unknowns+=e.unknowns}}class Ip{constructor(){this._onMarkerChanged=new Mle({delay:0,merge:Ip._merge}),this.onMarkerChanged=this._onMarkerChanged.event,this._data=new K3e,this._stats=new G3e(this)}dispose(){this._stats.dispose(),this._onMarkerChanged.dispose()}remove(e,t){for(const i of t||[])this.changeOne(e,i,[])}changeOne(e,t,i){if(gle(i))this._data.delete(t,e)&&this._onMarkerChanged.fire([t]);else{const n=[];for(const s of i){const r=Ip._toMarker(e,t,s);r&&n.push(r)}this._data.set(t,e,n),this._onMarkerChanged.fire([t])}}static _toMarker(e,t,i){let{code:n,severity:s,message:r,source:a,startLineNumber:l,startColumn:c,endLineNumber:u,endColumn:f,relatedInformation:g,tags:p}=i;if(r)return l=l>0?l:1,c=c>0?c:1,u=u>=l?u:l,f=f>0?f:c,{resource:t,owner:e,code:n,severity:s,message:r,source:a,startLineNumber:l,startColumn:c,endLineNumber:u,endColumn:f,relatedInformation:g,tags:p}}changeAll(e,t){const i=[],n=this._data.values(e);if(n)for(const s of n){const r=ti.first(s);r&&(i.push(r.resource),this._data.delete(r.resource,e))}if(wr(t)){const s=new co;for(const{resource:r,marker:a}of t){const l=Ip._toMarker(e,r,a);if(!l)continue;const c=s.get(r);c?c.push(l):(s.set(r,[l]),i.push(r))}for(const[r,a]of s)this._data.set(r,e,a)}i.length>0&&this._onMarkerChanged.fire(i)}read(e=Object.create(null)){let{owner:t,resource:i,severities:n,take:s}=e;if((!s||s<0)&&(s=-1),t&&i){const r=this._data.get(i,t);if(r){const a=[];for(const l of r)if(Ip._accept(l,n)){const c=a.push(l);if(s>0&&c===s)break}return a}else return[]}else if(!t&&!i){const r=[];for(const a of this._data.values())for(const l of a)if(Ip._accept(l,n)){const c=r.push(l);if(s>0&&c===s)return r}return r}else{const r=this._data.values(i??t),a=[];for(const l of r)for(const c of l)if(Ip._accept(c,n)){const u=a.push(c);if(s>0&&u===s)return a}return a}}static _accept(e,t){return t===void 0||(t&e.severity)===e.severity}static _merge(e){const t=new co;for(const i of e)for(const n of i)t.set(n,!0);return Array.from(t.keys())}}class Y3e extends X{get configurationModel(){return this._configurationModel}constructor(e){super(),this.logService=e,this._configurationModel=vo.createEmptyModel(this.logService)}reload(){return this.resetConfigurationModel(),this.configurationModel}getConfigurationDefaultOverrides(){return{}}resetConfigurationModel(){this._configurationModel=vo.createEmptyModel(this.logService);const e=Pn.as(pd.Configuration).getConfigurationProperties();this.updateConfigurationModel(Object.keys(e),e)}updateConfigurationModel(e,t){const i=this.getConfigurationDefaultOverrides();for(const n of e){const s=i[n],r=t[n];s!==void 0?this._configurationModel.setValue(n,s):r?this._configurationModel.setValue(n,r.default):this._configurationModel.removeValue(n)}}}const o_=Gt("accessibilitySignalService"),gi=class gi{static register(e){return new gi(e.fileName)}constructor(e){this.fileName=e}};gi.error=gi.register({fileName:"error.mp3"}),gi.warning=gi.register({fileName:"warning.mp3"}),gi.success=gi.register({fileName:"success.mp3"}),gi.foldedArea=gi.register({fileName:"foldedAreas.mp3"}),gi.break=gi.register({fileName:"break.mp3"}),gi.quickFixes=gi.register({fileName:"quickFixes.mp3"}),gi.taskCompleted=gi.register({fileName:"taskCompleted.mp3"}),gi.taskFailed=gi.register({fileName:"taskFailed.mp3"}),gi.terminalBell=gi.register({fileName:"terminalBell.mp3"}),gi.diffLineInserted=gi.register({fileName:"diffLineInserted.mp3"}),gi.diffLineDeleted=gi.register({fileName:"diffLineDeleted.mp3"}),gi.diffLineModified=gi.register({fileName:"diffLineModified.mp3"}),gi.chatRequestSent=gi.register({fileName:"chatRequestSent.mp3"}),gi.chatResponseReceived1=gi.register({fileName:"chatResponseReceived1.mp3"}),gi.chatResponseReceived2=gi.register({fileName:"chatResponseReceived2.mp3"}),gi.chatResponseReceived3=gi.register({fileName:"chatResponseReceived3.mp3"}),gi.chatResponseReceived4=gi.register({fileName:"chatResponseReceived4.mp3"}),gi.clear=gi.register({fileName:"clear.mp3"}),gi.save=gi.register({fileName:"save.mp3"}),gi.format=gi.register({fileName:"format.mp3"}),gi.voiceRecordingStarted=gi.register({fileName:"voiceRecordingStarted.mp3"}),gi.voiceRecordingStopped=gi.register({fileName:"voiceRecordingStopped.mp3"}),gi.progress=gi.register({fileName:"progress.mp3"});let kn=gi;class Z3e{constructor(e){this.randomOneOf=e}}const Bt=class Bt{constructor(e,t,i,n,s,r){this.sound=e,this.name=t,this.legacySoundSettingsKey=i,this.settingsKey=n,this.legacyAnnouncementSettingsKey=s,this.announcementMessage=r}static register(e){const t=new Z3e("randomOneOf"in e.sound?e.sound.randomOneOf:[e.sound]),i=new Bt(t,e.name,e.legacySoundSettingsKey,e.settingsKey,e.legacyAnnouncementSettingsKey,e.announcementMessage);return Bt._signals.add(i),i}};Bt._signals=new Set,Bt.errorAtPosition=Bt.register({name:v("accessibilitySignals.positionHasError.name","Error at Position"),sound:kn.error,announcementMessage:v("accessibility.signals.positionHasError","Error"),settingsKey:"accessibility.signals.positionHasError",delaySettingsKey:"accessibility.signalOptions.delays.errorAtPosition"}),Bt.warningAtPosition=Bt.register({name:v("accessibilitySignals.positionHasWarning.name","Warning at Position"),sound:kn.warning,announcementMessage:v("accessibility.signals.positionHasWarning","Warning"),settingsKey:"accessibility.signals.positionHasWarning",delaySettingsKey:"accessibility.signalOptions.delays.warningAtPosition"}),Bt.errorOnLine=Bt.register({name:v("accessibilitySignals.lineHasError.name","Error on Line"),sound:kn.error,legacySoundSettingsKey:"audioCues.lineHasError",legacyAnnouncementSettingsKey:"accessibility.alert.error",announcementMessage:v("accessibility.signals.lineHasError","Error on Line"),settingsKey:"accessibility.signals.lineHasError"}),Bt.warningOnLine=Bt.register({name:v("accessibilitySignals.lineHasWarning.name","Warning on Line"),sound:kn.warning,legacySoundSettingsKey:"audioCues.lineHasWarning",legacyAnnouncementSettingsKey:"accessibility.alert.warning",announcementMessage:v("accessibility.signals.lineHasWarning","Warning on Line"),settingsKey:"accessibility.signals.lineHasWarning"}),Bt.foldedArea=Bt.register({name:v("accessibilitySignals.lineHasFoldedArea.name","Folded Area on Line"),sound:kn.foldedArea,legacySoundSettingsKey:"audioCues.lineHasFoldedArea",legacyAnnouncementSettingsKey:"accessibility.alert.foldedArea",announcementMessage:v("accessibility.signals.lineHasFoldedArea","Folded"),settingsKey:"accessibility.signals.lineHasFoldedArea"}),Bt.break=Bt.register({name:v("accessibilitySignals.lineHasBreakpoint.name","Breakpoint on Line"),sound:kn.break,legacySoundSettingsKey:"audioCues.lineHasBreakpoint",legacyAnnouncementSettingsKey:"accessibility.alert.breakpoint",announcementMessage:v("accessibility.signals.lineHasBreakpoint","Breakpoint"),settingsKey:"accessibility.signals.lineHasBreakpoint"}),Bt.inlineSuggestion=Bt.register({name:v("accessibilitySignals.lineHasInlineSuggestion.name","Inline Suggestion on Line"),sound:kn.quickFixes,legacySoundSettingsKey:"audioCues.lineHasInlineSuggestion",settingsKey:"accessibility.signals.lineHasInlineSuggestion"}),Bt.terminalQuickFix=Bt.register({name:v("accessibilitySignals.terminalQuickFix.name","Terminal Quick Fix"),sound:kn.quickFixes,legacySoundSettingsKey:"audioCues.terminalQuickFix",legacyAnnouncementSettingsKey:"accessibility.alert.terminalQuickFix",announcementMessage:v("accessibility.signals.terminalQuickFix","Quick Fix"),settingsKey:"accessibility.signals.terminalQuickFix"}),Bt.onDebugBreak=Bt.register({name:v("accessibilitySignals.onDebugBreak.name","Debugger Stopped on Breakpoint"),sound:kn.break,legacySoundSettingsKey:"audioCues.onDebugBreak",legacyAnnouncementSettingsKey:"accessibility.alert.onDebugBreak",announcementMessage:v("accessibility.signals.onDebugBreak","Breakpoint"),settingsKey:"accessibility.signals.onDebugBreak"}),Bt.noInlayHints=Bt.register({name:v("accessibilitySignals.noInlayHints","No Inlay Hints on Line"),sound:kn.error,legacySoundSettingsKey:"audioCues.noInlayHints",legacyAnnouncementSettingsKey:"accessibility.alert.noInlayHints",announcementMessage:v("accessibility.signals.noInlayHints","No Inlay Hints"),settingsKey:"accessibility.signals.noInlayHints"}),Bt.taskCompleted=Bt.register({name:v("accessibilitySignals.taskCompleted","Task Completed"),sound:kn.taskCompleted,legacySoundSettingsKey:"audioCues.taskCompleted",legacyAnnouncementSettingsKey:"accessibility.alert.taskCompleted",announcementMessage:v("accessibility.signals.taskCompleted","Task Completed"),settingsKey:"accessibility.signals.taskCompleted"}),Bt.taskFailed=Bt.register({name:v("accessibilitySignals.taskFailed","Task Failed"),sound:kn.taskFailed,legacySoundSettingsKey:"audioCues.taskFailed",legacyAnnouncementSettingsKey:"accessibility.alert.taskFailed",announcementMessage:v("accessibility.signals.taskFailed","Task Failed"),settingsKey:"accessibility.signals.taskFailed"}),Bt.terminalCommandFailed=Bt.register({name:v("accessibilitySignals.terminalCommandFailed","Terminal Command Failed"),sound:kn.error,legacySoundSettingsKey:"audioCues.terminalCommandFailed",legacyAnnouncementSettingsKey:"accessibility.alert.terminalCommandFailed",announcementMessage:v("accessibility.signals.terminalCommandFailed","Command Failed"),settingsKey:"accessibility.signals.terminalCommandFailed"}),Bt.terminalCommandSucceeded=Bt.register({name:v("accessibilitySignals.terminalCommandSucceeded","Terminal Command Succeeded"),sound:kn.success,announcementMessage:v("accessibility.signals.terminalCommandSucceeded","Command Succeeded"),settingsKey:"accessibility.signals.terminalCommandSucceeded"}),Bt.terminalBell=Bt.register({name:v("accessibilitySignals.terminalBell","Terminal Bell"),sound:kn.terminalBell,legacySoundSettingsKey:"audioCues.terminalBell",legacyAnnouncementSettingsKey:"accessibility.alert.terminalBell",announcementMessage:v("accessibility.signals.terminalBell","Terminal Bell"),settingsKey:"accessibility.signals.terminalBell"}),Bt.notebookCellCompleted=Bt.register({name:v("accessibilitySignals.notebookCellCompleted","Notebook Cell Completed"),sound:kn.taskCompleted,legacySoundSettingsKey:"audioCues.notebookCellCompleted",legacyAnnouncementSettingsKey:"accessibility.alert.notebookCellCompleted",announcementMessage:v("accessibility.signals.notebookCellCompleted","Notebook Cell Completed"),settingsKey:"accessibility.signals.notebookCellCompleted"}),Bt.notebookCellFailed=Bt.register({name:v("accessibilitySignals.notebookCellFailed","Notebook Cell Failed"),sound:kn.taskFailed,legacySoundSettingsKey:"audioCues.notebookCellFailed",legacyAnnouncementSettingsKey:"accessibility.alert.notebookCellFailed",announcementMessage:v("accessibility.signals.notebookCellFailed","Notebook Cell Failed"),settingsKey:"accessibility.signals.notebookCellFailed"}),Bt.diffLineInserted=Bt.register({name:v("accessibilitySignals.diffLineInserted","Diff Line Inserted"),sound:kn.diffLineInserted,legacySoundSettingsKey:"audioCues.diffLineInserted",settingsKey:"accessibility.signals.diffLineInserted"}),Bt.diffLineDeleted=Bt.register({name:v("accessibilitySignals.diffLineDeleted","Diff Line Deleted"),sound:kn.diffLineDeleted,legacySoundSettingsKey:"audioCues.diffLineDeleted",settingsKey:"accessibility.signals.diffLineDeleted"}),Bt.diffLineModified=Bt.register({name:v("accessibilitySignals.diffLineModified","Diff Line Modified"),sound:kn.diffLineModified,legacySoundSettingsKey:"audioCues.diffLineModified",settingsKey:"accessibility.signals.diffLineModified"}),Bt.chatRequestSent=Bt.register({name:v("accessibilitySignals.chatRequestSent","Chat Request Sent"),sound:kn.chatRequestSent,legacySoundSettingsKey:"audioCues.chatRequestSent",legacyAnnouncementSettingsKey:"accessibility.alert.chatRequestSent",announcementMessage:v("accessibility.signals.chatRequestSent","Chat Request Sent"),settingsKey:"accessibility.signals.chatRequestSent"}),Bt.chatResponseReceived=Bt.register({name:v("accessibilitySignals.chatResponseReceived","Chat Response Received"),legacySoundSettingsKey:"audioCues.chatResponseReceived",sound:{randomOneOf:[kn.chatResponseReceived1,kn.chatResponseReceived2,kn.chatResponseReceived3,kn.chatResponseReceived4]},settingsKey:"accessibility.signals.chatResponseReceived"}),Bt.progress=Bt.register({name:v("accessibilitySignals.progress","Progress"),sound:kn.progress,legacySoundSettingsKey:"audioCues.chatResponsePending",legacyAnnouncementSettingsKey:"accessibility.alert.progress",announcementMessage:v("accessibility.signals.progress","Progress"),settingsKey:"accessibility.signals.progress"}),Bt.clear=Bt.register({name:v("accessibilitySignals.clear","Clear"),sound:kn.clear,legacySoundSettingsKey:"audioCues.clear",legacyAnnouncementSettingsKey:"accessibility.alert.clear",announcementMessage:v("accessibility.signals.clear","Clear"),settingsKey:"accessibility.signals.clear"}),Bt.save=Bt.register({name:v("accessibilitySignals.save","Save"),sound:kn.save,legacySoundSettingsKey:"audioCues.save",legacyAnnouncementSettingsKey:"accessibility.alert.save",announcementMessage:v("accessibility.signals.save","Save"),settingsKey:"accessibility.signals.save"}),Bt.format=Bt.register({name:v("accessibilitySignals.format","Format"),sound:kn.format,legacySoundSettingsKey:"audioCues.format",legacyAnnouncementSettingsKey:"accessibility.alert.format",announcementMessage:v("accessibility.signals.format","Format"),settingsKey:"accessibility.signals.format"}),Bt.voiceRecordingStarted=Bt.register({name:v("accessibilitySignals.voiceRecordingStarted","Voice Recording Started"),sound:kn.voiceRecordingStarted,legacySoundSettingsKey:"audioCues.voiceRecordingStarted",settingsKey:"accessibility.signals.voiceRecordingStarted"}),Bt.voiceRecordingStopped=Bt.register({name:v("accessibilitySignals.voiceRecordingStopped","Voice Recording Stopped"),sound:kn.voiceRecordingStopped,legacySoundSettingsKey:"audioCues.voiceRecordingStopped",settingsKey:"accessibility.signals.voiceRecordingStopped"});let Tl=Bt;class X3e extends X{constructor(e,t=[]){super(),this.logger=new WEe([e,...t]),this._register(e.onDidChangeLogLevel(i=>this.setLevel(i)))}get onDidChangeLogLevel(){return this.logger.onDidChangeLogLevel}setLevel(e){this.logger.setLevel(e)}getLevel(){return this.logger.getLevel()}trace(e,...t){this.logger.trace(e,...t)}debug(e,...t){this.logger.debug(e,...t)}info(e,...t){this.logger.info(e,...t)}warn(e,...t){this.logger.warn(e,...t)}error(e,...t){this.logger.error(e,...t)}}const tfe=[];function o0(o){tfe.push(o)}function Q3e(){return tfe.slice(0)}class J3e{getParseResult(e){}}var Gh=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},ys=function(o,e){return function(t,i){e(t,i,o)}};class eBe{constructor(e){this.disposed=!1,this.model=e,this._onWillDispose=new Y}get textEditorModel(){return this.model}dispose(){this.disposed=!0,this._onWillDispose.fire()}}let xz=class{constructor(e){this.modelService=e}createModelReference(e){const t=this.modelService.getModel(e);return t?Promise.resolve(new $xe(new eBe(t))):Promise.reject(new Error("Model not found"))}};xz=Gh([ys(0,un)],xz);const R2=class R2{show(){return R2.NULL_PROGRESS_RUNNER}async showWhile(e,t){await e}};R2.NULL_PROGRESS_RUNNER={done:()=>{},total:()=>{},worked:()=>{}};let kz=R2;class tBe{withProgress(e,t,i){return t({report:()=>{}})}}class iBe{constructor(){this.isExtensionDevelopment=!1,this.isBuilt=!1}}class nBe{async confirm(e){return{confirmed:this.doConfirm(e.message,e.detail),checkboxChecked:!1}}doConfirm(e,t){let i=e;return t&&(i=i+`

`+t),Vi.confirm(i)}async prompt(e){var n;let t;if(this.doConfirm(e.message,e.detail)){const s=[...e.buttons??[]];e.cancelButton&&typeof e.cancelButton!="string"&&typeof e.cancelButton!="boolean"&&s.push(e.cancelButton),t=await((n=s[0])==null?void 0:n.run({checkboxChecked:!1}))}return{result:t}}async error(e,t){await this.prompt({type:hs.Error,message:e,detail:t})}}const Zk=class Zk{info(e){return this.notify({severity:hs.Info,message:e})}warn(e){return this.notify({severity:hs.Warning,message:e})}error(e){return this.notify({severity:hs.Error,message:e})}notify(e){switch(e.severity){case hs.Error:console.error(e.message);break;case hs.Warning:console.warn(e.message);break;default:console.log(e.message);break}return Zk.NO_OP}prompt(e,t,i,n){return Zk.NO_OP}status(e,t){return X.None}};Zk.NO_OP=new aNe;let Dz=Zk,Ez=class{constructor(e){this._onWillExecuteCommand=new Y,this._onDidExecuteCommand=new Y,this.onDidExecuteCommand=this._onDidExecuteCommand.event,this._instantiationService=e}executeCommand(e,...t){const i=ii.getCommand(e);if(!i)return Promise.reject(new Error(`command '${e}' not found`));try{this._onWillExecuteCommand.fire({commandId:e,args:t});const n=this._instantiationService.invokeFunction.apply(this._instantiationService,[i.handler,...t]);return this._onDidExecuteCommand.fire({commandId:e,args:t}),Promise.resolve(n)}catch(n){return Promise.reject(n)}}};Ez=Gh([ys(0,nt)],Ez);let bS=class extends LPe{constructor(e,t,i,n,s,r){super(e,t,i,n,s),this._cachedResolver=null,this._dynamicKeybindings=[],this._domNodeListeners=[];const a=p=>{const _=new le;_.add(se(p,Le.KEY_DOWN,b=>{const y=new Zi(b);this._dispatch(y,y.target)&&(y.preventDefault(),y.stopPropagation())})),_.add(se(p,Le.KEY_UP,b=>{const y=new Zi(b);this._singleModifierDispatch(y,y.target)&&y.preventDefault()})),this._domNodeListeners.push(new sBe(p,_))},l=p=>{for(let _=0;_<this._domNodeListeners.length;_++){const b=this._domNodeListeners[_];b.domNode===p&&(this._domNodeListeners.splice(_,1),b.dispose())}},c=p=>{p.getOption(61)||a(p.getContainerDomNode())},u=p=>{p.getOption(61)||l(p.getContainerDomNode())};this._register(r.onCodeEditorAdd(c)),this._register(r.onCodeEditorRemove(u)),r.listCodeEditors().forEach(c);const f=p=>{a(p.getContainerDomNode())},g=p=>{l(p.getContainerDomNode())};this._register(r.onDiffEditorAdd(f)),this._register(r.onDiffEditorRemove(g)),r.listDiffEditors().forEach(f)}addDynamicKeybinding(e,t,i,n){return od(ii.registerCommand(e,i),this.addDynamicKeybindings([{keybinding:t,command:e,when:n}]))}addDynamicKeybindings(e){const t=e.map(i=>({keybinding:tV(i.keybinding,Ja),command:i.command??null,commandArgs:i.commandArgs,when:i.when,weight1:1e3,weight2:0,extensionId:null,isBuiltinExtension:!1}));return this._dynamicKeybindings=this._dynamicKeybindings.concat(t),this.updateResolver(),it(()=>{for(let i=0;i<this._dynamicKeybindings.length;i++)if(this._dynamicKeybindings[i]===t[0]){this._dynamicKeybindings.splice(i,t.length),this.updateResolver();return}})}updateResolver(){this._cachedResolver=null,this._onDidUpdateKeybindings.fire()}_getResolver(){if(!this._cachedResolver){const e=this._toNormalizedKeybindingItems(ea.getDefaultKeybindings(),!0),t=this._toNormalizedKeybindingItems(this._dynamicKeybindings,!1);this._cachedResolver=new lk(e,t,i=>this._log(i))}return this._cachedResolver}_documentHasFocus(){return Vi.document.hasFocus()}_toNormalizedKeybindingItems(e,t){const i=[];let n=0;for(const s of e){const r=s.when||void 0,a=s.keybinding;if(!a)i[n++]=new Hne(void 0,s.command,s.commandArgs,r,t,null,!1);else{const l=PD.resolveKeybinding(a,Ja);for(const c of l)i[n++]=new Hne(c,s.command,s.commandArgs,r,t,null,!1)}}return i}resolveKeyboardEvent(e){const t=new wg(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,e.keyCode);return new PD([t],Ja)}};bS=Gh([ys(0,ht),ys(1,nn),ys(2,tr),ys(3,fs),ys(4,Oo),ys(5,hi)],bS);class sBe extends X{constructor(e,t){super(),this.domNode=e,this._register(t)}}function Jse(o){return o&&typeof o=="object"&&(!o.overrideIdentifier||typeof o.overrideIdentifier=="string")&&(!o.resource||o.resource instanceof st)}let EP=class{constructor(e){this.logService=e,this._onDidChangeConfiguration=new Y,this.onDidChangeConfiguration=this._onDidChangeConfiguration.event;const t=new Y3e(e);this._configuration=new k4(t.reload(),vo.createEmptyModel(e),vo.createEmptyModel(e),vo.createEmptyModel(e),vo.createEmptyModel(e),vo.createEmptyModel(e),new co,vo.createEmptyModel(e),new co,e),t.dispose()}getValue(e,t){const i=typeof e=="string"?e:void 0,n=Jse(e)?e:Jse(t)?t:{};return this._configuration.getValue(i,n,void 0)}updateValues(e){const t={data:this._configuration.toData()},i=[];for(const n of e){const[s,r]=n;this.getValue(s)!==r&&(this._configuration.updateValue(s,r),i.push(s))}if(i.length>0){const n=new bPe({keys:i,overrides:[]},t,this._configuration,void 0,this.logService);n.source=8,this._onDidChangeConfiguration.fire(n)}return Promise.resolve()}updateValue(e,t,i,n){return this.updateValues([[e,t]])}inspect(e,t={}){return this._configuration.inspect(e,t,void 0)}};EP=Gh([ys(0,Oo)],EP);let Iz=class{constructor(e,t,i){this.configurationService=e,this.modelService=t,this.languageService=i,this._onDidChangeConfiguration=new Y,this.configurationService.onDidChangeConfiguration(n=>{this._onDidChangeConfiguration.fire({affectedKeys:n.affectedKeys,affectsConfiguration:(s,r)=>n.affectsConfiguration(r)})})}getValue(e,t,i){const n=G.isIPosition(t)?t:null,s=n?typeof i=="string"?i:void 0:typeof t=="string"?t:void 0,r=e?this.getLanguage(e,n):void 0;return typeof s>"u"?this.configurationService.getValue({resource:e,overrideIdentifier:r}):this.configurationService.getValue(s,{resource:e,overrideIdentifier:r})}getLanguage(e,t){const i=this.modelService.getModel(e);return i?t?i.getLanguageIdAtPosition(t.lineNumber,t.column):i.getLanguageId():this.languageService.guessLanguageIdByFilepathOrFirstLine(e)}};Iz=Gh([ys(0,Ht),ys(1,un),ys(2,In)],Iz);let Tz=class{constructor(e){this.configurationService=e}getEOL(e,t){const i=this.configurationService.getValue("files.eol",{overrideIdentifier:t,resource:e});return i&&typeof i=="string"&&i!=="auto"?i:Qr||Kt?`
`:`\r
`}};Tz=Gh([ys(0,Ht)],Tz);class oBe{publicLog2(){}}const Xk=class Xk{constructor(){const e=st.from({scheme:Xk.SCHEME,authority:"model",path:"/"});this.workspace={id:due,folders:[new BPe({uri:e,name:"",index:0})]}}getWorkspace(){return this.workspace}getWorkspaceFolder(e){return e&&e.scheme===Xk.SCHEME?this.workspace.folders[0]:null}};Xk.SCHEME="inmemory";let Nz=Xk;function IP(o,e,t){if(!e||!(o instanceof EP))return;const i=[];Object.keys(e).forEach(n=>{gPe(n)&&i.push([`editor.${n}`,e[n]]),t&&pPe(n)&&i.push([`diffEditor.${n}`,e[n]])}),i.length>0&&o.updateValues(i)}let Rz=class{constructor(e){this._modelService=e}hasPreviewHandler(){return!1}async apply(e,t){const i=Array.isArray(e)?e:AK.convert(e),n=new Map;for(const a of i){if(!(a instanceof um))throw new Error("bad edit - only text edits are supported");const l=this._modelService.getModel(a.resource);if(!l)throw new Error("bad edit - model not found");if(typeof a.versionId=="number"&&l.getVersionId()!==a.versionId)throw new Error("bad state - model changed in the meantime");let c=n.get(l);c||(c=[],n.set(l,c)),c.push(Rn.replaceMove(M.lift(a.textEdit.range),a.textEdit.text))}let s=0,r=0;for(const[a,l]of n)a.pushStackElement(),a.pushEditOperations([],l,()=>[]),a.pushStackElement(),r+=1,s+=l.length;return{ariaSummary:sC(_6.bulkEditServiceSummary,s,r),isApplied:s>0}}};Rz=Gh([ys(0,un)],Rz);class rBe{getUriLabel(e,t){return e.scheme==="file"?e.fsPath:e.path}getUriBasenameLabel(e){return Dc(e)}}let Mz=class extends cPe{constructor(e,t){super(e),this._codeEditorService=t}showContextView(e,t,i){if(!t){const n=this._codeEditorService.getFocusedCodeEditor()||this._codeEditorService.getActiveCodeEditor();n&&(t=n.getContainerDomNode())}return super.showContextView(e,t,i)}};Mz=Gh([ys(0,e_),ys(1,hi)],Mz);class aBe{constructor(){this._neverEmitter=new Y,this.onDidChangeTrust=this._neverEmitter.event}isWorkspaceTrusted(){return!0}}class lBe extends S6{constructor(){super()}}class cBe extends X3e{constructor(){super(new BEe)}}let Az=class extends M6{constructor(e,t,i,n,s,r){super(e,t,i,n,s,r),this.configure({blockMouse:!1})}};Az=Gh([ys(0,tr),ys(1,fs),ys(2,Pg),ys(3,Di),ys(4,Gl),ys(5,ht)],Az);const Pz={amdModuleId:"vs/editor/common/services/editorSimpleWorker",esmModuleLocation:void 0,label:"editorWorkerService"};let Oz=class extends IV{constructor(e,t,i,n,s){super(Pz,e,t,i,n,s)}};Oz=Gh([ys(0,un),ys(1,c4),ys(2,Oo),ys(3,On),ys(4,Ue)],Oz);class dBe{async playSignal(e,t){}}ei(Oo,cBe,0);ei(Ht,EP,0);ei(c4,Iz,0);ei(rde,Tz,0);ei(fC,Nz,0);ei(hS,rBe,0);ei(tr,oBe,0);ei(tI,nBe,0);ei(aK,iBe,0);ei(fs,Dz,0);ei(Kh,Ip,0);ei(In,lBe,0);ei(Ql,N3e,0);ei(un,K6,0);ei(UK,B6,0);ei(ht,Lz,0);ei(cue,tBe,0);ei(i_,kz,0);ei(md,XOe,0);ei(Aa,Oz,0);ei(rI,Rz,0);ei(uue,aBe,0);ei(Na,xz,0);ei(dl,_z,0);ei(Mc,$5e,0);ei(nn,Ez,0);ei(Di,bS,0);ei(Rc,gz,0);ei(Pg,Mz,0);ei(Ma,F6,0);ei(Bg,wz,0);ei(cl,Az,0);ei(Gl,vz,0);ei(o_,dBe,0);ei(lhe,J3e,0);var mt;(function(o){const e=new s0;for(const[l,c]of hie())e.set(l,c);const t=new DP(e,!0);e.set(nt,t);function i(l){n||r({});const c=e.get(l);if(!c)throw new Error("Missing service "+l);return c instanceof ph?t.invokeFunction(u=>u.get(l)):c}o.get=i;let n=!1;const s=new Y;function r(l){if(n)return t;n=!0;for(const[u,f]of hie())e.get(u)||e.set(u,f);for(const u in l)if(l.hasOwnProperty(u)){const f=Gt(u);e.get(f)instanceof ph&&e.set(f,l[u])}const c=Q3e();for(const u of c)try{t.createInstance(u)}catch(f){wt(f)}return s.fire(),t}o.initialize=r;function a(l){if(n)return l();const c=new le,u=c.add(s.event(()=>{u.dispose(),c.add(l())}));return c}o.withServices=a})(mt||(mt={}));function uBe(o,e){return new hBe(o,e)}class hBe extends RA{constructor(e,t){const i={amdModuleId:Pz.amdModuleId,esmModuleLocation:Pz.esmModuleLocation,label:t.label};super(i,t.keepIdleModels||!1,e),this._foreignModuleId=t.moduleId,this._foreignModuleCreateData=t.createData||null,this._foreignModuleHost=t.host||null,this._foreignProxy=null}fhr(e,t){if(!this._foreignModuleHost||typeof this._foreignModuleHost[e]!="function")return Promise.reject(new Error("Missing method "+e+" or missing main thread foreign host."));try{return Promise.resolve(this._foreignModuleHost[e].apply(this._foreignModuleHost,t))}catch(i){return Promise.reject(i)}}_getForeignProxy(){return this._foreignProxy||(this._foreignProxy=this._getProxy().then(e=>{const t=this._foreignModuleHost?K9(this._foreignModuleHost):[];return e.$loadForeignModule(this._foreignModuleId,this._foreignModuleCreateData,t).then(i=>{this._foreignModuleCreateData=null;const n=(a,l)=>e.$fmr(a,l),s=(a,l)=>function(){const c=Array.prototype.slice.call(arguments,0);return l(a,c)},r={};for(const a of i)r[a]=s(a,n);return r})})),this._foreignProxy}getProxy(){return this._getForeignProxy()}withSyncedResources(e){return this.workerWithSyncedResources(e).then(t=>this.getProxy())}}const _I={ICodeEditor:"vs.editor.ICodeEditor",IDiffEditor:"vs.editor.IDiffEditor"};class Kr{constructor(e,t,i,n){this.startColumn=e,this.endColumn=t,this.className=i,this.type=n,this._lineDecorationBrand=void 0}static _equals(e,t){return e.startColumn===t.startColumn&&e.endColumn===t.endColumn&&e.className===t.className&&e.type===t.type}static equalsArr(e,t){const i=e.length,n=t.length;if(i!==n)return!1;for(let s=0;s<i;s++)if(!Kr._equals(e[s],t[s]))return!1;return!0}static extractWrapped(e,t,i){if(e.length===0)return e;const n=t+1,s=i+1,r=i-t,a=[];let l=0;for(const c of e)c.endColumn<=n||c.startColumn>=s||(a[l++]=new Kr(Math.max(1,c.startColumn-n+1),Math.min(r+1,c.endColumn-n+1),c.className,c.type));return a}static filter(e,t,i,n){if(e.length===0)return[];const s=[];let r=0;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.range;if(u.endLineNumber<t||u.startLineNumber>t||u.isEmpty()&&(c.type===0||c.type===3))continue;const f=u.startLineNumber===t?u.startColumn:i,g=u.endLineNumber===t?u.endColumn:n;s[r++]=new Kr(f,g,c.inlineClassName,c.type)}return s}static _typeCompare(e,t){const i=[2,0,1,3];return i[e]-i[t]}static compare(e,t){if(e.startColumn!==t.startColumn)return e.startColumn-t.startColumn;if(e.endColumn!==t.endColumn)return e.endColumn-t.endColumn;const i=Kr._typeCompare(e.type,t.type);return i!==0?i:e.className!==t.className?e.className<t.className?-1:1:0}}class eoe{constructor(e,t,i,n){this.startOffset=e,this.endOffset=t,this.className=i,this.metadata=n}}class TP{constructor(){this.stopOffsets=[],this.classNames=[],this.metadata=[],this.count=0}static _metadata(e){let t=0;for(let i=0,n=e.length;i<n;i++)t|=e[i];return t}consumeLowerThan(e,t,i){for(;this.count>0&&this.stopOffsets[0]<e;){let n=0;for(;n+1<this.count&&this.stopOffsets[n]===this.stopOffsets[n+1];)n++;i.push(new eoe(t,this.stopOffsets[n],this.classNames.join(" "),TP._metadata(this.metadata))),t=this.stopOffsets[n]+1,this.stopOffsets.splice(0,n+1),this.classNames.splice(0,n+1),this.metadata.splice(0,n+1),this.count-=n+1}return this.count>0&&t<e&&(i.push(new eoe(t,e-1,this.classNames.join(" "),TP._metadata(this.metadata))),t=e),t}insert(e,t,i){if(this.count===0||this.stopOffsets[this.count-1]<=e)this.stopOffsets.push(e),this.classNames.push(t),this.metadata.push(i);else for(let n=0;n<this.count;n++)if(this.stopOffsets[n]>=e){this.stopOffsets.splice(n,0,e),this.classNames.splice(n,0,t),this.metadata.splice(n,0,i);break}this.count++}}class fBe{static normalize(e,t){if(t.length===0)return[];const i=[],n=new TP;let s=0;for(let r=0,a=t.length;r<a;r++){const l=t[r];let c=l.startColumn,u=l.endColumn;const f=l.className,g=l.type===1?2:l.type===2?4:0;if(c>1){const b=e.charCodeAt(c-2);qs(b)&&c--}if(u>1){const b=e.charCodeAt(u-2);qs(b)&&u--}const p=c-1,_=u-2;s=n.consumeLowerThan(p,s,i),n.count===0&&(s=p),n.insert(_,f,g)}return n.consumeLowerThan(1073741824,s,i),i}}class ro{constructor(e,t,i,n){this.endIndex=e,this.type=t,this.metadata=i,this.containsRTL=n,this._linePartBrand=void 0}isWhitespace(){return!!(this.metadata&1)}isPseudoAfter(){return!!(this.metadata&4)}}class ife{constructor(e,t){this.startOffset=e,this.endOffset=t}equals(e){return this.startOffset===e.startOffset&&this.endOffset===e.endOffset}}class r_{constructor(e,t,i,n,s,r,a,l,c,u,f,g,p,_,b,y,S,L,x){this.useMonospaceOptimizations=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=i,this.continuesWithWrappedLine=n,this.isBasicASCII=s,this.containsRTL=r,this.fauxIndentLength=a,this.lineTokens=l,this.lineDecorations=c.sort(Kr.compare),this.tabSize=u,this.startVisibleColumn=f,this.spaceWidth=g,this.stopRenderingLineAfter=b,this.renderWhitespace=y==="all"?4:y==="boundary"?1:y==="selection"?2:y==="trailing"?3:0,this.renderControlCharacters=S,this.fontLigatures=L,this.selectionsOnLine=x&&x.sort((N,A)=>N.startOffset<A.startOffset?-1:1);const k=Math.abs(_-g),E=Math.abs(p-g);k<E?(this.renderSpaceWidth=_,this.renderSpaceCharCode=11825):(this.renderSpaceWidth=p,this.renderSpaceCharCode=183)}sameSelection(e){if(this.selectionsOnLine===null)return e===null;if(e===null||e.length!==this.selectionsOnLine.length)return!1;for(let t=0;t<this.selectionsOnLine.length;t++)if(!this.selectionsOnLine[t].equals(e[t]))return!1;return!0}equals(e){return this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineContent===e.lineContent&&this.continuesWithWrappedLine===e.continuesWithWrappedLine&&this.isBasicASCII===e.isBasicASCII&&this.containsRTL===e.containsRTL&&this.fauxIndentLength===e.fauxIndentLength&&this.tabSize===e.tabSize&&this.startVisibleColumn===e.startVisibleColumn&&this.spaceWidth===e.spaceWidth&&this.renderSpaceWidth===e.renderSpaceWidth&&this.renderSpaceCharCode===e.renderSpaceCharCode&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.fontLigatures===e.fontLigatures&&Kr.equalsArr(this.lineDecorations,e.lineDecorations)&&this.lineTokens.equals(e.lineTokens)&&this.sameSelection(e.selectionsOnLine)}}class nfe{constructor(e,t){this.partIndex=e,this.charIndex=t}}class mh{static getPartIndex(e){return(e&4294901760)>>>16}static getCharIndex(e){return(e&65535)>>>0}constructor(e,t){this.length=e,this._data=new Uint32Array(this.length),this._horizontalOffset=new Uint32Array(this.length)}setColumnInfo(e,t,i,n){const s=(t<<16|i<<0)>>>0;this._data[e-1]=s,this._horizontalOffset[e-1]=n}getHorizontalOffset(e){return this._horizontalOffset.length===0?0:this._horizontalOffset[e-1]}charOffsetToPartData(e){return this.length===0?0:e<0?this._data[0]:e>=this.length?this._data[this.length-1]:this._data[e]}getDomPosition(e){const t=this.charOffsetToPartData(e-1),i=mh.getPartIndex(t),n=mh.getCharIndex(t);return new nfe(i,n)}getColumn(e,t){return this.partDataToCharOffset(e.partIndex,t,e.charIndex)+1}partDataToCharOffset(e,t,i){if(this.length===0)return 0;const n=(e<<16|i<<0)>>>0;let s=0,r=this.length-1;for(;s+1<r;){const b=s+r>>>1,y=this._data[b];if(y===n)return b;y>n?r=b:s=b}if(s===r)return s;const a=this._data[s],l=this._data[r];if(a===n)return s;if(l===n)return r;const c=mh.getPartIndex(a),u=mh.getCharIndex(a),f=mh.getPartIndex(l);let g;c!==f?g=t:g=mh.getCharIndex(l);const p=i-u,_=g-i;return p<=_?s:r}}class Fz{constructor(e,t,i){this._renderLineOutputBrand=void 0,this.characterMapping=e,this.containsRTL=t,this.containsForeignElements=i}}function vI(o,e){if(o.lineContent.length===0){if(o.lineDecorations.length>0){e.appendString("<span>");let t=0,i=0,n=0;for(const r of o.lineDecorations)(r.type===1||r.type===2)&&(e.appendString('<span class="'),e.appendString(r.className),e.appendString('"></span>'),r.type===1&&(n|=1,t++),r.type===2&&(n|=2,i++));e.appendString("</span>");const s=new mh(1,t+i);return s.setColumnInfo(1,t,0,0),new Fz(s,!1,n)}return e.appendString("<span><span></span></span>"),new Fz(new mh(0,0),!1,0)}return wBe(mBe(o),e)}class gBe{constructor(e,t,i,n){this.characterMapping=e,this.html=t,this.containsRTL=i,this.containsForeignElements=n}}function U4(o){const e=new qS(1e4),t=vI(o,e);return new gBe(t.characterMapping,e.build(),t.containsRTL,t.containsForeignElements)}class pBe{constructor(e,t,i,n,s,r,a,l,c,u,f,g,p,_,b,y){this.fontIsMonospace=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=i,this.len=n,this.isOverflowing=s,this.overflowingCharCount=r,this.parts=a,this.containsForeignElements=l,this.fauxIndentLength=c,this.tabSize=u,this.startVisibleColumn=f,this.containsRTL=g,this.spaceWidth=p,this.renderSpaceCharCode=_,this.renderWhitespace=b,this.renderControlCharacters=y}}function mBe(o){const e=o.lineContent;let t,i,n;o.stopRenderingLineAfter!==-1&&o.stopRenderingLineAfter<e.length?(t=!0,i=e.length-o.stopRenderingLineAfter,n=o.stopRenderingLineAfter):(t=!1,i=0,n=e.length);let s=_Be(e,o.containsRTL,o.lineTokens,o.fauxIndentLength,n);o.renderControlCharacters&&!o.isBasicASCII&&(s=bBe(e,s)),(o.renderWhitespace===4||o.renderWhitespace===1||o.renderWhitespace===2&&o.selectionsOnLine||o.renderWhitespace===3&&!o.continuesWithWrappedLine)&&(s=CBe(o,e,n,s));let r=0;if(o.lineDecorations.length>0){for(let a=0,l=o.lineDecorations.length;a<l;a++){const c=o.lineDecorations[a];c.type===3||c.type===1?r|=1:c.type===2&&(r|=2)}s=yBe(e,n,s,o.lineDecorations)}return o.containsRTL||(s=vBe(e,s,!o.isBasicASCII||o.fontLigatures)),new pBe(o.useMonospaceOptimizations,o.canUseHalfwidthRightwardsArrow,e,n,t,i,s,r,o.fauxIndentLength,o.tabSize,o.startVisibleColumn,o.containsRTL,o.spaceWidth,o.renderSpaceCharCode,o.renderWhitespace,o.renderControlCharacters)}function _Be(o,e,t,i,n){const s=[];let r=0;i>0&&(s[r++]=new ro(i,"",0,!1));let a=i;for(let l=0,c=t.getCount();l<c;l++){const u=t.getEndOffset(l);if(u<=i)continue;const f=t.getClassName(l);if(u>=n){const p=e?eS(o.substring(a,n)):!1;s[r++]=new ro(n,f,0,p);break}const g=e?eS(o.substring(a,u)):!1;s[r++]=new ro(u,f,0,g),a=u}return s}function vBe(o,e,t){let i=0;const n=[];let s=0;if(t)for(let r=0,a=e.length;r<a;r++){const l=e[r],c=l.endIndex;if(i+50<c){const u=l.type,f=l.metadata,g=l.containsRTL;let p=-1,_=i;for(let b=i;b<c;b++)o.charCodeAt(b)===32&&(p=b),p!==-1&&b-_>=50&&(n[s++]=new ro(p+1,u,f,g),_=p+1,p=-1);_!==c&&(n[s++]=new ro(c,u,f,g))}else n[s++]=l;i=c}else for(let r=0,a=e.length;r<a;r++){const l=e[r],c=l.endIndex,u=c-i;if(u>50){const f=l.type,g=l.metadata,p=l.containsRTL,_=Math.ceil(u/50);for(let b=1;b<_;b++){const y=i+b*50;n[s++]=new ro(y,f,g,p)}n[s++]=new ro(c,f,g,p)}else n[s++]=l;i=c}return n}function sfe(o){return o<32?o!==9:o===127||o>=8234&&o<=8238||o>=8294&&o<=8297||o>=8206&&o<=8207||o===1564}function bBe(o,e){const t=[];let i=new ro(0,"",0,!1),n=0;for(const s of e){const r=s.endIndex;for(;n<r;n++){const a=o.charCodeAt(n);sfe(a)&&(n>i.endIndex&&(i=new ro(n,s.type,s.metadata,s.containsRTL),t.push(i)),i=new ro(n+1,"mtkcontrol",s.metadata,!1),t.push(i))}n>i.endIndex&&(i=new ro(r,s.type,s.metadata,s.containsRTL),t.push(i))}return t}function CBe(o,e,t,i){const n=o.continuesWithWrappedLine,s=o.fauxIndentLength,r=o.tabSize,a=o.startVisibleColumn,l=o.useMonospaceOptimizations,c=o.selectionsOnLine,u=o.renderWhitespace===1,f=o.renderWhitespace===3,g=o.renderSpaceWidth!==o.spaceWidth,p=[];let _=0,b=0,y=i[b].type,S=i[b].containsRTL,L=i[b].endIndex;const x=i.length;let k=!1,E=Sr(e),N;E===-1?(k=!0,E=t,N=t):N=au(e);let A=!1,P=0,H=c&&c[P],ee=a%r;for(let te=s;te<t;te++){const J=e.charCodeAt(te);H&&te>=H.endOffset&&(P++,H=c&&c[P]);let Z;if(te<E||te>N)Z=!0;else if(J===9)Z=!0;else if(J===32)if(u)if(A)Z=!0;else{const he=te+1<t?e.charCodeAt(te+1):0;Z=he===32||he===9}else Z=!0;else Z=!1;if(Z&&c&&(Z=!!H&&H.startOffset<=te&&H.endOffset>te),Z&&f&&(Z=k||te>N),Z&&S&&te>=E&&te<=N&&(Z=!1),A){if(!Z||!l&&ee>=r){if(g){const he=_>0?p[_-1].endIndex:s;for(let Ce=he+1;Ce<=te;Ce++)p[_++]=new ro(Ce,"mtkw",1,!1)}else p[_++]=new ro(te,"mtkw",1,!1);ee=ee%r}}else(te===L||Z&&te>s)&&(p[_++]=new ro(te,y,0,S),ee=ee%r);for(J===9?ee=r:Fm(J)?ee+=2:ee++,A=Z;te===L&&(b++,b<x);)y=i[b].type,S=i[b].containsRTL,L=i[b].endIndex}let Q=!1;if(A)if(n&&u){const te=t>0?e.charCodeAt(t-1):0,J=t>1?e.charCodeAt(t-2):0;te===32&&J!==32&&J!==9||(Q=!0)}else Q=!0;if(Q)if(g){const te=_>0?p[_-1].endIndex:s;for(let J=te+1;J<=t;J++)p[_++]=new ro(J,"mtkw",1,!1)}else p[_++]=new ro(t,"mtkw",1,!1);else p[_++]=new ro(t,y,0,S);return p}function yBe(o,e,t,i){i.sort(Kr.compare);const n=fBe.normalize(o,i),s=n.length;let r=0;const a=[];let l=0,c=0;for(let f=0,g=t.length;f<g;f++){const p=t[f],_=p.endIndex,b=p.type,y=p.metadata,S=p.containsRTL;for(;r<s&&n[r].startOffset<_;){const L=n[r];if(L.startOffset>c&&(c=L.startOffset,a[l++]=new ro(c,b,y,S)),L.endOffset+1<=_)c=L.endOffset+1,a[l++]=new ro(c,b+" "+L.className,y|L.metadata,S),r++;else{c=_,a[l++]=new ro(c,b+" "+L.className,y|L.metadata,S);break}}_>c&&(c=_,a[l++]=new ro(c,b,y,S))}const u=t[t.length-1].endIndex;if(r<s&&n[r].startOffset===u)for(;r<s&&n[r].startOffset===u;){const f=n[r];a[l++]=new ro(c,f.className,f.metadata,!1),r++}return a}function wBe(o,e){const t=o.fontIsMonospace,i=o.canUseHalfwidthRightwardsArrow,n=o.containsForeignElements,s=o.lineContent,r=o.len,a=o.isOverflowing,l=o.overflowingCharCount,c=o.parts,u=o.fauxIndentLength,f=o.tabSize,g=o.startVisibleColumn,p=o.containsRTL,_=o.spaceWidth,b=o.renderSpaceCharCode,y=o.renderWhitespace,S=o.renderControlCharacters,L=new mh(r+1,c.length);let x=!1,k=0,E=g,N=0,A=0,P=0;p?e.appendString('<span dir="ltr">'):e.appendString("<span>");for(let H=0,ee=c.length;H<ee;H++){const Q=c[H],te=Q.endIndex,J=Q.type,Z=Q.containsRTL,he=y!==0&&Q.isWhitespace(),Ce=he&&!t&&(J==="mtkw"||!n),we=k===te&&Q.isPseudoAfter();if(N=0,e.appendString("<span "),Z&&e.appendString('style="unicode-bidi:isolate" '),e.appendString('class="'),e.appendString(Ce?"mtkz":J),e.appendASCIICharCode(34),he){let me=0;{let pe=k,Fe=E;for(;pe<te;pe++){const Ut=(s.charCodeAt(pe)===9?f-Fe%f:1)|0;me+=Ut,pe>=u&&(Fe+=Ut)}}for(Ce&&(e.appendString(' style="width:'),e.appendString(String(_*me)),e.appendString('px"')),e.appendASCIICharCode(62);k<te;k++){L.setColumnInfo(k+1,H-P,N,A),P=0;const pe=s.charCodeAt(k);let Fe,Ye;if(pe===9){Fe=f-E%f|0,Ye=Fe,!i||Ye>1?e.appendCharCode(8594):e.appendCharCode(65515);for(let Ut=2;Ut<=Ye;Ut++)e.appendCharCode(160)}else Fe=2,Ye=1,e.appendCharCode(b),e.appendCharCode(8204);N+=Fe,A+=Ye,k>=u&&(E+=Ye)}}else for(e.appendASCIICharCode(62);k<te;k++){L.setColumnInfo(k+1,H-P,N,A),P=0;const me=s.charCodeAt(k);let pe=1,Fe=1;switch(me){case 9:pe=f-E%f,Fe=pe;for(let Ye=1;Ye<=pe;Ye++)e.appendCharCode(160);break;case 32:e.appendCharCode(160);break;case 60:e.appendString("&lt;");break;case 62:e.appendString("&gt;");break;case 38:e.appendString("&amp;");break;case 0:S?e.appendCharCode(9216):e.appendString("&#00;");break;case 65279:case 8232:case 8233:case 133:e.appendCharCode(65533);break;default:Fm(me)&&Fe++,S&&me<32?e.appendCharCode(9216+me):S&&me===127?e.appendCharCode(9249):S&&sfe(me)?(e.appendString("[U+"),e.appendString(SBe(me)),e.appendString("]"),pe=8,Fe=pe):e.appendCharCode(me)}N+=pe,A+=Fe,k>=u&&(E+=Fe)}we?P++:P=0,k>=r&&!x&&Q.isPseudoAfter()&&(x=!0,L.setColumnInfo(k+1,H,N,A)),e.appendString("</span>")}return x||L.setColumnInfo(r+1,c.length-1,N,A),a&&(e.appendString('<span class="mtkoverflow">'),e.appendString(v("showMore","Show more ({0})",LBe(l))),e.appendString("</span>")),e.appendString("</span>"),new Fz(L,p,n)}function SBe(o){return o.toString(16).toUpperCase().padStart(4,"0")}function LBe(o){return o<1024?v("overflow.chars","{0} chars",o):o<1024*1024?`${(o/1024).toFixed(1)} KB`:`${(o/1024/1024).toFixed(1)} MB`}class toe{constructor(e,t,i,n){this._viewportBrand=void 0,this.top=e|0,this.left=t|0,this.width=i|0,this.height=n|0}}class xBe{constructor(e,t){this.tabSize=e,this.data=t}}class wG{constructor(e,t,i,n,s,r,a){this._viewLineDataBrand=void 0,this.content=e,this.continuesWithWrappedLine=t,this.minColumn=i,this.maxColumn=n,this.startVisibleColumn=s,this.tokens=r,this.inlineDecorations=a}}class ql{constructor(e,t,i,n,s,r,a,l,c,u){this.minColumn=e,this.maxColumn=t,this.content=i,this.continuesWithWrappedLine=n,this.isBasicASCII=ql.isBasicASCII(i,r),this.containsRTL=ql.containsRTL(i,this.isBasicASCII,s),this.tokens=a,this.inlineDecorations=l,this.tabSize=c,this.startVisibleColumn=u}static isBasicASCII(e,t){return t?ZE(e):!0}static containsRTL(e,t,i){return!t&&i?eS(e):!1}}class Ck{constructor(e,t,i){this.range=e,this.inlineClassName=t,this.type=i}}class kBe{constructor(e,t,i,n){this.startOffset=e,this.endOffset=t,this.inlineClassName=i,this.inlineClassNameAffectsLetterSpacing=n}toInlineDecoration(e){return new Ck(new M(e,this.startOffset+1,e,this.endOffset+1),this.inlineClassName,this.inlineClassNameAffectsLetterSpacing?3:0)}}class ofe{constructor(e,t){this._viewModelDecorationBrand=void 0,this.range=e,this.options=t}}class ZD{constructor(e,t,i){this.color=e,this.zIndex=t,this.data=i}static compareByRenderingProps(e,t){return e.zIndex===t.zIndex?e.color<t.color?-1:e.color>t.color?1:0:e.zIndex-t.zIndex}static equals(e,t){return e.color===t.color&&e.zIndex===t.zIndex&&En(e.data,t.data)}static equalsArr(e,t){return En(e,t,ZD.equals)}}function DBe(o){return Array.isArray(o)}function EBe(o){return!DBe(o)}function rfe(o){return typeof o=="string"}function ioe(o){return!rfe(o)}function wv(o){return!o}function pg(o,e){return o.ignoreCase&&e?e.toLowerCase():e}function noe(o){return o.replace(/[&<>'"_]/g,"-")}function IBe(o,e){console.log(`${o.languageId}: ${e}`)}function mn(o,e){return new Error(`${o.languageId}: ${e}`)}function Wp(o,e,t,i,n){const s=/\$((\$)|(#)|(\d\d?)|[sS](\d\d?)|@(\w+))/g;let r=null;return e.replace(s,function(a,l,c,u,f,g,p,_,b){return wv(c)?wv(u)?!wv(f)&&f<i.length?pg(o,i[f]):!wv(p)&&o&&typeof o[p]=="string"?o[p]:(r===null&&(r=n.split("."),r.unshift(n)),!wv(g)&&g<r.length?pg(o,r[g]):""):pg(o,t):"$"})}function TBe(o,e,t){const i=/\$[sS](\d\d?)/g;let n=null;return e.replace(i,function(s,r){return n===null&&(n=t.split("."),n.unshift(t)),!wv(r)&&r<n.length?pg(o,n[r]):""})}function IR(o,e){let t=e;for(;t&&t.length>0;){const i=o.tokenizer[t];if(i)return i;const n=t.lastIndexOf(".");n<0?t=null:t=t.substr(0,n)}return null}function NBe(o,e){let t=e;for(;t&&t.length>0;){if(o.stateNames[t])return!0;const n=t.lastIndexOf(".");n<0?t=null:t=t.substr(0,n)}return!1}var RBe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},MBe=function(o,e){return function(t,i){e(t,i,o)}},Bz;const afe=5,M2=class M2{static create(e,t){return this._INSTANCE.create(e,t)}constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}create(e,t){if(e!==null&&e.depth>=this._maxCacheDepth)return new I1(e,t);let i=I1.getStackElementId(e);i.length>0&&(i+="|"),i+=t;let n=this._entries[i];return n||(n=new I1(e,t),this._entries[i]=n,n)}};M2._INSTANCE=new M2(afe);let XD=M2;class I1{constructor(e,t){this.parent=e,this.state=t,this.depth=(this.parent?this.parent.depth:0)+1}static getStackElementId(e){let t="";for(;e!==null;)t.length>0&&(t+="|"),t+=e.state,e=e.parent;return t}static _equals(e,t){for(;e!==null&&t!==null;){if(e===t)return!0;if(e.state!==t.state)return!1;e=e.parent,t=t.parent}return e===null&&t===null}equals(e){return I1._equals(this,e)}push(e){return XD.create(this,e)}pop(){return this.parent}popall(){let e=this;for(;e.parent;)e=e.parent;return e}switchTo(e){return XD.create(this.parent,e)}}class Bw{constructor(e,t){this.languageId=e,this.state=t}equals(e){return this.languageId===e.languageId&&this.state.equals(e.state)}clone(){return this.state.clone()===this.state?this:new Bw(this.languageId,this.state)}}const A2=class A2{static create(e,t){return this._INSTANCE.create(e,t)}constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}create(e,t){if(t!==null)return new yk(e,t);if(e!==null&&e.depth>=this._maxCacheDepth)return new yk(e,t);const i=I1.getStackElementId(e);let n=this._entries[i];return n||(n=new yk(e,null),this._entries[i]=n,n)}};A2._INSTANCE=new A2(afe);let Hp=A2;class yk{constructor(e,t){this.stack=e,this.embeddedLanguageData=t}clone(){return(this.embeddedLanguageData?this.embeddedLanguageData.clone():null)===this.embeddedLanguageData?this:Hp.create(this.stack,this.embeddedLanguageData)}equals(e){return!(e instanceof yk)||!this.stack.equals(e.stack)?!1:this.embeddedLanguageData===null&&e.embeddedLanguageData===null?!0:this.embeddedLanguageData===null||e.embeddedLanguageData===null?!1:this.embeddedLanguageData.equals(e.embeddedLanguageData)}}class ABe{constructor(){this._tokens=[],this._languageId=null,this._lastTokenType=null,this._lastTokenLanguage=null}enterLanguage(e){this._languageId=e}emit(e,t){this._lastTokenType===t&&this._lastTokenLanguage===this._languageId||(this._lastTokenType=t,this._lastTokenLanguage=this._languageId,this._tokens.push(new dD(e,t,this._languageId)))}nestedLanguageTokenize(e,t,i,n){const s=i.languageId,r=i.state,a=Kn.get(s);if(!a)return this.enterLanguage(s),this.emit(n,""),r;const l=a.tokenize(e,t,r);if(n!==0)for(const c of l.tokens)this._tokens.push(new dD(c.offset+n,c.type,c.language));else this._tokens=this._tokens.concat(l.tokens);return this._lastTokenType=null,this._lastTokenLanguage=null,this._languageId=null,l.endState}finalize(e){return new Nq(this._tokens,e)}}class NP{constructor(e,t){this._languageService=e,this._theme=t,this._prependTokens=null,this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0}enterLanguage(e){this._currentLanguageId=this._languageService.languageIdCodec.encodeLanguageId(e)}emit(e,t){const i=this._theme.match(this._currentLanguageId,t)|1024;this._lastTokenMetadata!==i&&(this._lastTokenMetadata=i,this._tokens.push(e),this._tokens.push(i))}static _merge(e,t,i){const n=e!==null?e.length:0,s=t.length,r=i!==null?i.length:0;if(n===0&&s===0&&r===0)return new Uint32Array(0);if(n===0&&s===0)return i;if(s===0&&r===0)return e;const a=new Uint32Array(n+s+r);e!==null&&a.set(e);for(let l=0;l<s;l++)a[n+l]=t[l];return i!==null&&a.set(i,n+s),a}nestedLanguageTokenize(e,t,i,n){const s=i.languageId,r=i.state,a=Kn.get(s);if(!a)return this.enterLanguage(s),this.emit(n,""),r;const l=a.tokenizeEncoded(e,t,r);if(n!==0)for(let c=0,u=l.tokens.length;c<u;c+=2)l.tokens[c]+=n;return this._prependTokens=NP._merge(this._prependTokens,this._tokens,l.tokens),this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0,l.endState}finalize(e){return new zF(NP._merge(this._prependTokens,this._tokens,null),e)}}let QD=Bz=class extends X{constructor(e,t,i,n,s){super(),this._configurationService=s,this._languageService=e,this._standaloneThemeService=t,this._languageId=i,this._lexer=n,this._embeddedLanguages=Object.create(null),this.embeddedLoaded=Promise.resolve(void 0);let r=!1;this._register(Kn.onDidChange(a=>{if(r)return;let l=!1;for(let c=0,u=a.changedLanguages.length;c<u;c++){const f=a.changedLanguages[c];if(this._embeddedLanguages[f]){l=!0;break}}l&&(r=!0,Kn.handleChange([this._languageId]),r=!1)})),this._maxTokenizationLineLength=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:this._languageId}),this._register(this._configurationService.onDidChangeConfiguration(a=>{a.affectsConfiguration("editor.maxTokenizationLineLength")&&(this._maxTokenizationLineLength=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:this._languageId}))}))}getLoadStatus(){const e=[];for(const t in this._embeddedLanguages){const i=Kn.get(t);if(i){if(i instanceof Bz){const n=i.getLoadStatus();n.loaded===!1&&e.push(n.promise)}continue}Kn.isResolved(t)||e.push(Kn.getOrCreate(t))}return e.length===0?{loaded:!0}:{loaded:!1,promise:Promise.all(e).then(t=>{})}}getInitialState(){const e=XD.create(null,this._lexer.start);return Hp.create(e,null)}tokenize(e,t,i){if(e.length>=this._maxTokenizationLineLength)return RK(this._languageId,i);const n=new ABe,s=this._tokenize(e,t,i,n);return n.finalize(s)}tokenizeEncoded(e,t,i){if(e.length>=this._maxTokenizationLineLength)return x4(this._languageService.languageIdCodec.encodeLanguageId(this._languageId),i);const n=new NP(this._languageService,this._standaloneThemeService.getColorTheme().tokenTheme),s=this._tokenize(e,t,i,n);return n.finalize(s)}_tokenize(e,t,i,n){return i.embeddedLanguageData?this._nestedTokenize(e,t,i,0,n):this._myTokenize(e,t,i,0,n)}_findLeavingNestedLanguageOffset(e,t){let i=this._lexer.tokenizer[t.stack.state];if(!i&&(i=IR(this._lexer,t.stack.state),!i))throw mn(this._lexer,"tokenizer state is not defined: "+t.stack.state);let n=-1,s=!1;for(const r of i){if(!ioe(r.action)||r.action.nextEmbedded!=="@pop")continue;s=!0;let a=r.resolveRegex(t.stack.state);const l=a.source;if(l.substr(0,4)==="^(?:"&&l.substr(l.length-1,1)===")"){const u=(a.ignoreCase?"i":"")+(a.unicode?"u":"");a=new RegExp(l.substr(4,l.length-5),u)}const c=e.search(a);c===-1||c!==0&&r.matchOnlyAtLineStart||(n===-1||c<n)&&(n=c)}if(!s)throw mn(this._lexer,'no rule containing nextEmbedded: "@pop" in tokenizer embedded state: '+t.stack.state);return n}_nestedTokenize(e,t,i,n,s){const r=this._findLeavingNestedLanguageOffset(e,i);if(r===-1){const c=s.nestedLanguageTokenize(e,t,i.embeddedLanguageData,n);return Hp.create(i.stack,new Bw(i.embeddedLanguageData.languageId,c))}const a=e.substring(0,r);a.length>0&&s.nestedLanguageTokenize(a,!1,i.embeddedLanguageData,n);const l=e.substring(r);return this._myTokenize(l,t,i,n+r,s)}_safeRuleName(e){return e?e.name:"(unknown)"}_myTokenize(e,t,i,n,s){s.enterLanguage(this._languageId);const r=e.length,a=t&&this._lexer.includeLF?e+`
`:e,l=a.length;let c=i.embeddedLanguageData,u=i.stack,f=0,g=null,p=!0;for(;p||f<l;){const _=f,b=u.depth,y=g?g.groups.length:0,S=u.state;let L=null,x=null,k=null,E=null,N=null;if(g){L=g.matches;const H=g.groups.shift();x=H.matched,k=H.action,E=g.rule,g.groups.length===0&&(g=null)}else{if(!p&&f>=l)break;p=!1;let H=this._lexer.tokenizer[S];if(!H&&(H=IR(this._lexer,S),!H))throw mn(this._lexer,"tokenizer state is not defined: "+S);const ee=a.substr(f);for(const Q of H)if((f===0||!Q.matchOnlyAtLineStart)&&(L=ee.match(Q.resolveRegex(S)),L)){x=L[0],k=Q.action;break}}if(L||(L=[""],x=""),k||(f<l&&(L=[a.charAt(f)],x=L[0]),k=this._lexer.defaultToken),x===null)break;for(f+=x.length;EBe(k)&&ioe(k)&&k.test;)k=k.test(x,L,S,f===l);let A=null;if(typeof k=="string"||Array.isArray(k))A=k;else if(k.group)A=k.group;else if(k.token!==null&&k.token!==void 0){if(k.tokenSubst?A=Wp(this._lexer,k.token,x,L,S):A=k.token,k.nextEmbedded)if(k.nextEmbedded==="@pop"){if(!c)throw mn(this._lexer,"cannot pop embedded language if not inside one");c=null}else{if(c)throw mn(this._lexer,"cannot enter embedded language from within an embedded language");N=Wp(this._lexer,k.nextEmbedded,x,L,S)}if(k.goBack&&(f=Math.max(0,f-k.goBack)),k.switchTo&&typeof k.switchTo=="string"){let H=Wp(this._lexer,k.switchTo,x,L,S);if(H[0]==="@"&&(H=H.substr(1)),IR(this._lexer,H))u=u.switchTo(H);else throw mn(this._lexer,"trying to switch to a state '"+H+"' that is undefined in rule: "+this._safeRuleName(E))}else{if(k.transform&&typeof k.transform=="function")throw mn(this._lexer,"action.transform not supported");if(k.next)if(k.next==="@push"){if(u.depth>=this._lexer.maxStack)throw mn(this._lexer,"maximum tokenizer stack size reached: ["+u.state+","+u.parent.state+",...]");u=u.push(S)}else if(k.next==="@pop"){if(u.depth<=1)throw mn(this._lexer,"trying to pop an empty stack in rule: "+this._safeRuleName(E));u=u.pop()}else if(k.next==="@popall")u=u.popall();else{let H=Wp(this._lexer,k.next,x,L,S);if(H[0]==="@"&&(H=H.substr(1)),IR(this._lexer,H))u=u.push(H);else throw mn(this._lexer,"trying to set a next state '"+H+"' that is undefined in rule: "+this._safeRuleName(E))}}k.log&&typeof k.log=="string"&&IBe(this._lexer,this._lexer.languageId+": "+Wp(this._lexer,k.log,x,L,S))}if(A===null)throw mn(this._lexer,"lexer rule has no well-defined action in rule: "+this._safeRuleName(E));const P=H=>{const ee=this._languageService.getLanguageIdByLanguageName(H)||this._languageService.getLanguageIdByMimeType(H)||H,Q=this._getNestedEmbeddedLanguageData(ee);if(f<l){const te=e.substr(f);return this._nestedTokenize(te,t,Hp.create(u,Q),n+f,s)}else return Hp.create(u,Q)};if(Array.isArray(A)){if(g&&g.groups.length>0)throw mn(this._lexer,"groups cannot be nested: "+this._safeRuleName(E));if(L.length!==A.length+1)throw mn(this._lexer,"matched number of groups does not match the number of actions in rule: "+this._safeRuleName(E));let H=0;for(let ee=1;ee<L.length;ee++)H+=L[ee].length;if(H!==x.length)throw mn(this._lexer,"with groups, all characters should be matched in consecutive groups in rule: "+this._safeRuleName(E));g={rule:E,matches:L,groups:[]};for(let ee=0;ee<A.length;ee++)g.groups[ee]={action:A[ee],matched:L[ee+1]};f-=x.length;continue}else{if(A==="@rematch"&&(f-=x.length,x="",L=null,A="",N!==null))return P(N);if(x.length===0){if(l===0||b!==u.depth||S!==u.state||(g?g.groups.length:0)!==y)continue;throw mn(this._lexer,"no progress in tokenizer in rule: "+this._safeRuleName(E))}let H=null;if(rfe(A)&&A.indexOf("@brackets")===0){const ee=A.substr(9),Q=PBe(this._lexer,x);if(!Q)throw mn(this._lexer,"@brackets token returned but no bracket defined as: "+x);H=noe(Q.token+ee)}else{const ee=A===""?"":A+this._lexer.tokenPostfix;H=noe(ee)}_<r&&s.emit(_+n,H)}if(N!==null)return P(N)}return Hp.create(u,c)}_getNestedEmbeddedLanguageData(e){if(!this._languageService.isRegisteredLanguageId(e))return new Bw(e,uS);e!==this._languageId&&(this._languageService.requestBasicLanguageFeatures(e),Kn.getOrCreate(e),this._embeddedLanguages[e]=!0);const t=Kn.get(e);return t?new Bw(e,t.getInitialState()):new Bw(e,uS)}};QD=Bz=RBe([MBe(4,Ht)],QD);function PBe(o,e){if(!e)return null;e=pg(o,e);const t=o.brackets;for(const i of t){if(i.open===e)return{token:i.token,bracketType:1};if(i.close===e)return{token:i.token,bracketType:-1}}return null}const $7=Ag("standaloneColorizer",{createHTML:o=>o});class SG{static colorizeElement(e,t,i,n){n=n||{};const s=n.theme||"vs",r=n.mimeType||i.getAttribute("lang")||i.getAttribute("data-lang");if(!r)return console.error("Mode not detected"),Promise.resolve();const a=t.getLanguageIdByMimeType(r)||r;e.setTheme(s);const l=i.firstChild?i.firstChild.nodeValue:"";i.className+=" "+s;const c=u=>{const f=($7==null?void 0:$7.createHTML(u))??u;i.innerHTML=f};return this.colorize(t,l||"",a,n).then(c,u=>console.error(u))}static async colorize(e,t,i,n){const s=e.languageIdCodec;let r=4;n&&typeof n.tabSize=="number"&&(r=n.tabSize),Bq(t)&&(t=t.substr(1));const a=zh(t);if(!e.isRegisteredLanguageId(i))return soe(a,r,s);const l=await Kn.getOrCreate(i);return l?OBe(a,r,l,s):soe(a,r,s)}static colorizeLine(e,t,i,n,s=4){const r=ql.isBasicASCII(e,t),a=ql.containsRTL(e,r,i);return U4(new r_(!1,!0,e,!1,r,a,0,n,[],s,0,0,0,0,-1,"none",!1,!1,null)).html}static colorizeModelLine(e,t,i=4){const n=e.getLineContent(t);e.tokenization.forceTokenization(t);const r=e.tokenization.getLineTokens(t).inflate();return this.colorizeLine(n,e.mightContainNonBasicASCII(),e.mightContainRTL(),r,i)}}function OBe(o,e,t,i){return new Promise((n,s)=>{const r=()=>{const a=FBe(o,e,t,i);if(t instanceof QD){const l=t.getLoadStatus();if(l.loaded===!1){l.promise.then(r,s);return}}n(a)};r()})}function soe(o,e,t){let i=[];const s=new Uint32Array(2);s[0]=0,s[1]=33587200;for(let r=0,a=o.length;r<a;r++){const l=o[r];s[0]=l.length;const c=new ho(s,l,t),u=ql.isBasicASCII(l,!0),f=ql.containsRTL(l,u,!0),g=U4(new r_(!1,!0,l,!1,u,f,0,c,[],e,0,0,0,0,-1,"none",!1,!1,null));i=i.concat(g.html),i.push("<br/>")}return i.join("")}function FBe(o,e,t,i){let n=[],s=t.getInitialState();for(let r=0,a=o.length;r<a;r++){const l=o[r],c=t.tokenizeEncoded(l,!0,s);ho.convertToEndOffset(c.tokens,l.length);const u=new ho(c.tokens,l,i),f=ql.isBasicASCII(l,!0),g=ql.containsRTL(l,f,!0),p=U4(new r_(!1,!0,l,!1,f,g,0,u.inflate(),[],e,0,0,0,0,-1,"none",!1,!1,null));n=n.concat(p.html),n.push("<br/>"),s=c.endState}return n.join("")}var BBe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},WBe=function(o,e){return function(t,i){e(t,i,o)}},W1;let RP=(W1=class{constructor(e,t){}dispose(){}},W1.ID="editor.contrib.markerDecorations",W1);RP=BBe([WBe(1,UK)],RP);oi(RP.ID,RP,0);class lfe extends X{constructor(e,t){super(),this._onDidChange=this._register(new Y),this.onDidChange=this._onDidChange.event,this._referenceDomElement=e,this._width=-1,this._height=-1,this._resizeObserver=null,this.measureReferenceDomElement(!1,t)}dispose(){this.stopObserving(),super.dispose()}getWidth(){return this._width}getHeight(){return this._height}startObserving(){if(!this._resizeObserver&&this._referenceDomElement){let e=null;const t=()=>{e?this.observe({width:e.width,height:e.height}):this.observe()};let i=!1,n=!1;const s=()=>{if(i&&!n)try{i=!1,n=!0,t()}finally{al(at(this._referenceDomElement),()=>{n=!1,s()})}};this._resizeObserver=new ResizeObserver(r=>{r&&r[0]&&r[0].contentRect?e={width:r[0].contentRect.width,height:r[0].contentRect.height}:e=null,i=!0,s()}),this._resizeObserver.observe(this._referenceDomElement)}}stopObserving(){this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null)}observe(e){this.measureReferenceDomElement(!0,e)}measureReferenceDomElement(e,t){let i=0,n=0;t?(i=t.width,n=t.height):this._referenceDomElement&&(i=this._referenceDomElement.clientWidth,n=this._referenceDomElement.clientHeight),i=Math.max(5,i),n=Math.max(5,n),(this._width!==i||this._height!==n)&&(this._width=i,this._height=n,e&&this._onDidChange.fire())}}const o1=class o1{constructor(e,t){this.key=e,this.migrate=t}apply(e){const t=o1._read(e,this.key),i=s=>o1._read(e,s),n=(s,r)=>o1._write(e,s,r);this.migrate(t,i,n)}static _read(e,t){if(typeof e>"u")return;const i=t.indexOf(".");if(i>=0){const n=t.substring(0,i);return this._read(e[n],t.substring(i+1))}return e[t]}static _write(e,t,i){const n=t.indexOf(".");if(n>=0){const s=t.substring(0,n);e[s]=e[s]||{},this._write(e[s],t.substring(n+1),i);return}e[t]=i}};o1.items=[];let JD=o1;function Lu(o,e){JD.items.push(new JD(o,e))}function ul(o,e){Lu(o,(t,i,n)=>{if(typeof t<"u"){for(const[s,r]of e)if(t===s){n(o,r);return}}})}function HBe(o){JD.items.forEach(e=>e.apply(o))}ul("wordWrap",[[!0,"on"],[!1,"off"]]);ul("lineNumbers",[[!0,"on"],[!1,"off"]]);ul("cursorBlinking",[["visible","solid"]]);ul("renderWhitespace",[[!0,"boundary"],[!1,"none"]]);ul("renderLineHighlight",[[!0,"line"],[!1,"none"]]);ul("acceptSuggestionOnEnter",[[!0,"on"],[!1,"off"]]);ul("tabCompletion",[[!1,"off"],[!0,"onlySnippets"]]);ul("hover",[[!0,{enabled:!0}],[!1,{enabled:!1}]]);ul("parameterHints",[[!0,{enabled:!0}],[!1,{enabled:!1}]]);ul("autoIndent",[[!1,"advanced"],[!0,"full"]]);ul("matchBrackets",[[!0,"always"],[!1,"never"]]);ul("renderFinalNewline",[[!0,"on"],[!1,"off"]]);ul("cursorSmoothCaretAnimation",[[!0,"on"],[!1,"off"]]);ul("occurrencesHighlight",[[!0,"singleFile"],[!1,"off"]]);ul("wordBasedSuggestions",[[!0,"matchingDocuments"],[!1,"off"]]);Lu("autoClosingBrackets",(o,e,t)=>{o===!1&&(t("autoClosingBrackets","never"),typeof e("autoClosingQuotes")>"u"&&t("autoClosingQuotes","never"),typeof e("autoSurround")>"u"&&t("autoSurround","never"))});Lu("renderIndentGuides",(o,e,t)=>{typeof o<"u"&&(t("renderIndentGuides",void 0),typeof e("guides.indentation")>"u"&&t("guides.indentation",!!o))});Lu("highlightActiveIndentGuide",(o,e,t)=>{typeof o<"u"&&(t("highlightActiveIndentGuide",void 0),typeof e("guides.highlightActiveIndentation")>"u"&&t("guides.highlightActiveIndentation",!!o))});const VBe={method:"showMethods",function:"showFunctions",constructor:"showConstructors",deprecated:"showDeprecated",field:"showFields",variable:"showVariables",class:"showClasses",struct:"showStructs",interface:"showInterfaces",module:"showModules",property:"showProperties",event:"showEvents",operator:"showOperators",unit:"showUnits",value:"showValues",constant:"showConstants",enum:"showEnums",enumMember:"showEnumMembers",keyword:"showKeywords",text:"showWords",color:"showColors",file:"showFiles",reference:"showReferences",folder:"showFolders",typeParameter:"showTypeParameters",snippet:"showSnippets"};Lu("suggest.filteredTypes",(o,e,t)=>{if(o&&typeof o=="object"){for(const i of Object.entries(VBe))o[i[0]]===!1&&typeof e(`suggest.${i[1]}`)>"u"&&t(`suggest.${i[1]}`,!1);t("suggest.filteredTypes",void 0)}});Lu("quickSuggestions",(o,e,t)=>{if(typeof o=="boolean"){const i=o?"on":"off";t("quickSuggestions",{comments:i,strings:i,other:i})}});Lu("experimental.stickyScroll.enabled",(o,e,t)=>{typeof o=="boolean"&&(t("experimental.stickyScroll.enabled",void 0),typeof e("stickyScroll.enabled")>"u"&&t("stickyScroll.enabled",o))});Lu("experimental.stickyScroll.maxLineCount",(o,e,t)=>{typeof o=="number"&&(t("experimental.stickyScroll.maxLineCount",void 0),typeof e("stickyScroll.maxLineCount")>"u"&&t("stickyScroll.maxLineCount",o))});Lu("codeActionsOnSave",(o,e,t)=>{if(o&&typeof o=="object"){let i=!1;const n={};for(const s of Object.entries(o))typeof s[1]=="boolean"?(i=!0,n[s[0]]=s[1]?"explicit":"never"):n[s[0]]=s[1];i&&t("codeActionsOnSave",n)}});Lu("codeActionWidget.includeNearbyQuickfixes",(o,e,t)=>{typeof o=="boolean"&&(t("codeActionWidget.includeNearbyQuickfixes",void 0),typeof e("codeActionWidget.includeNearbyQuickFixes")>"u"&&t("codeActionWidget.includeNearbyQuickFixes",o))});Lu("lightbulb.enabled",(o,e,t)=>{typeof o=="boolean"&&t("lightbulb.enabled",o?void 0:"off")});class zBe{constructor(){this._tabFocus=!1,this._onDidChangeTabFocus=new Y,this.onDidChangeTabFocus=this._onDidChangeTabFocus.event}getTabFocusMode(){return this._tabFocus}setTabFocusMode(e){this._tabFocus=e,this._onDidChangeTabFocus.fire(this._tabFocus)}}const CS=new zBe;var UBe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},$Be=function(o,e){return function(t,i){e(t,i,o)}};let Wz=class extends X{constructor(e,t,i,n,s){super(),this._accessibilityService=s,this._onDidChange=this._register(new Y),this.onDidChange=this._onDidChange.event,this._onDidChangeFast=this._register(new Y),this.onDidChangeFast=this._onDidChangeFast.event,this._isDominatedByLongLines=!1,this._viewLineCount=1,this._lineNumbersDigitCount=1,this._reservedHeight=0,this._glyphMarginDecorationLaneCount=1,this._computeOptionsMemory=new Tle,this.isSimpleWidget=e,this.contextMenuId=t,this._containerObserver=this._register(new lfe(n,i.dimension)),this._targetWindowId=at(n).vscodeWindowId,this._rawOptions=ooe(i),this._validatedOptions=Vp.validateOptions(this._rawOptions),this.options=this._computeOptions(),this.options.get(13)&&this._containerObserver.startObserving(),this._register(mc.onDidChangeZoomLevel(()=>this._recomputeOptions())),this._register(CS.onDidChangeTabFocus(()=>this._recomputeOptions())),this._register(this._containerObserver.onDidChange(()=>this._recomputeOptions())),this._register(hV.onDidChange(()=>this._recomputeOptions())),this._register(_D.getInstance(at(n)).onDidChange(()=>this._recomputeOptions())),this._register(this._accessibilityService.onDidChangeScreenReaderOptimized(()=>this._recomputeOptions()))}_recomputeOptions(){const e=this._computeOptions(),t=Vp.checkEquals(this.options,e);t!==null&&(this.options=e,this._onDidChangeFast.fire(t),this._onDidChange.fire(t))}_computeOptions(){const e=this._readEnvConfiguration(),t=Yv.createFromValidatedSettings(this._validatedOptions,e.pixelRatio,this.isSimpleWidget),i=this._readFontInfo(t),n={memory:this._computeOptionsMemory,outerWidth:e.outerWidth,outerHeight:e.outerHeight-this._reservedHeight,fontInfo:i,extraEditorClassName:e.extraEditorClassName,isDominatedByLongLines:this._isDominatedByLongLines,viewLineCount:this._viewLineCount,lineNumbersDigitCount:this._lineNumbersDigitCount,emptySelectionClipboard:e.emptySelectionClipboard,pixelRatio:e.pixelRatio,tabFocusMode:CS.getTabFocusMode(),accessibilitySupport:e.accessibilitySupport,glyphMarginDecorationLaneCount:this._glyphMarginDecorationLaneCount};return Vp.computeOptions(this._validatedOptions,n)}_readEnvConfiguration(){return{extraEditorClassName:qBe(),outerWidth:this._containerObserver.getWidth(),outerHeight:this._containerObserver.getHeight(),emptySelectionClipboard:Gv||Lc,pixelRatio:_D.getInstance(Zte(this._targetWindowId,!0).window).value,accessibilitySupport:this._accessibilityService.isScreenReaderOptimized()?2:this._accessibilityService.getAccessibilitySupport()}}_readFontInfo(e){return hV.readFontInfo(Zte(this._targetWindowId,!0).window,e)}getRawOptions(){return this._rawOptions}updateOptions(e){const t=ooe(e);Vp.applyUpdate(this._rawOptions,t)&&(this._validatedOptions=Vp.validateOptions(this._rawOptions),this._recomputeOptions())}observeContainer(e){this._containerObserver.observe(e)}setIsDominatedByLongLines(e){this._isDominatedByLongLines!==e&&(this._isDominatedByLongLines=e,this._recomputeOptions())}setModelLineCount(e){const t=jBe(e);this._lineNumbersDigitCount!==t&&(this._lineNumbersDigitCount=t,this._recomputeOptions())}setViewLineCount(e){this._viewLineCount!==e&&(this._viewLineCount=e,this._recomputeOptions())}setReservedHeight(e){this._reservedHeight!==e&&(this._reservedHeight=e,this._recomputeOptions())}setGlyphMarginDecorationLaneCount(e){this._glyphMarginDecorationLaneCount!==e&&(this._glyphMarginDecorationLaneCount=e,this._recomputeOptions())}};Wz=UBe([$Be(4,dl)],Wz);function jBe(o){let e=0;for(;o;)o=Math.floor(o/10),e++;return e||1}function qBe(){let o="";return!yg&&!nce&&(o+="no-user-select "),yg&&(o+="no-minimap-shadow ",o+="enable-user-select "),Kt&&(o+="mac "),o}class KBe{constructor(){this._values=[]}_read(e){return this._values[e]}get(e){return this._values[e]}_write(e,t){this._values[e]=t}}class GBe{constructor(){this._values=[]}_read(e){if(e>=this._values.length)throw new Error("Cannot read uninitialized value");return this._values[e]}get(e){return this._read(e)}_write(e,t){this._values[e]=t}}class Vp{static validateOptions(e){const t=new KBe;for(const i of Dw){const n=i.name==="_never_"?void 0:e[i.name];t._write(i.id,i.validate(n))}return t}static computeOptions(e,t){const i=new GBe;for(const n of Dw)i._write(n.id,n.compute(t,i,e._read(n.id)));return i}static _deepEquals(e,t){if(typeof e!="object"||typeof t!="object"||!e||!t)return e===t;if(Array.isArray(e)||Array.isArray(t))return Array.isArray(e)&&Array.isArray(t)?En(e,t):!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const i in e)if(!Vp._deepEquals(e[i],t[i]))return!1;return!0}static checkEquals(e,t){const i=[];let n=!1;for(const s of Dw){const r=!Vp._deepEquals(e._read(s.id),t._read(s.id));i[s.id]=r,r&&(n=!0)}return n?new Ile(i):null}static applyUpdate(e,t){let i=!1;for(const n of Dw)if(t.hasOwnProperty(n.name)){const s=n.applyUpdate(e[n.name],t[n.name]);e[n.name]=s.newValue,i=i||s.didChange}return i}}function ooe(o){const e=Wf(o);return HBe(e),e}var tm;(function(o){const e={total:0,min:Number.MAX_VALUE,max:0},t={...e},i={...e},n={...e};let s=0;const r={keydown:0,input:0,render:0};function a(){S(),performance.mark("inputlatency/start"),performance.mark("keydown/start"),r.keydown=1,queueMicrotask(l)}o.onKeyDown=a;function l(){r.keydown===1&&(performance.mark("keydown/end"),r.keydown=2)}function c(){performance.mark("input/start"),r.input=1,y()}o.onBeforeInput=c;function u(){r.input===0&&c(),queueMicrotask(f)}o.onInput=u;function f(){r.input===1&&(performance.mark("input/end"),r.input=2)}function g(){S()}o.onKeyUp=g;function p(){S()}o.onSelectionChange=p;function _(){r.keydown===2&&r.input===2&&r.render===0&&(performance.mark("render/start"),r.render=1,queueMicrotask(b),y())}o.onRenderStart=_;function b(){r.render===1&&(performance.mark("render/end"),r.render=2)}function y(){setTimeout(S)}function S(){r.keydown===2&&r.input===2&&r.render===2&&(performance.mark("inputlatency/end"),performance.measure("keydown","keydown/start","keydown/end"),performance.measure("input","input/start","input/end"),performance.measure("render","render/start","render/end"),performance.measure("inputlatency","inputlatency/start","inputlatency/end"),L("keydown",e),L("input",t),L("render",i),L("inputlatency",n),s++,x())}function L(A,P){const H=performance.getEntriesByName(A)[0].duration;P.total+=H,P.min=Math.min(P.min,H),P.max=Math.max(P.max,H)}function x(){performance.clearMarks("keydown/start"),performance.clearMarks("keydown/end"),performance.clearMarks("input/start"),performance.clearMarks("input/end"),performance.clearMarks("render/start"),performance.clearMarks("render/end"),performance.clearMarks("inputlatency/start"),performance.clearMarks("inputlatency/end"),performance.clearMeasures("keydown"),performance.clearMeasures("input"),performance.clearMeasures("render"),performance.clearMeasures("inputlatency"),r.keydown=0,r.input=0,r.render=0}function k(){if(s===0)return;const A={keydown:E(e),input:E(t),render:E(i),total:E(n),sampleCount:s};return N(e),N(t),N(i),N(n),s=0,A}o.getAndClearMeasurements=k;function E(A){return{average:A.total/s,max:A.max,min:A.min}}function N(A){A.total=0,A.min=Number.MAX_VALUE,A.max=0}})(tm||(tm={}));class $4{constructor(e,t){this.x=e,this.y=t,this._pageCoordinatesBrand=void 0}toClientCoordinates(e){return new cfe(this.x-e.scrollX,this.y-e.scrollY)}}class cfe{constructor(e,t){this.clientX=e,this.clientY=t,this._clientCoordinatesBrand=void 0}toPageCoordinates(e){return new $4(this.clientX+e.scrollX,this.clientY+e.scrollY)}}class YBe{constructor(e,t,i,n){this.x=e,this.y=t,this.width=i,this.height=n,this._editorPagePositionBrand=void 0}}class ZBe{constructor(e,t){this.x=e,this.y=t,this._positionRelativeToEditorBrand=void 0}}function LG(o){const e=os(o);return new YBe(e.left,e.top,e.width,e.height)}function xG(o,e,t){const i=e.width/o.offsetWidth,n=e.height/o.offsetHeight,s=(t.x-e.x)/i,r=(t.y-e.y)/n;return new ZBe(s,r)}class qm extends td{constructor(e,t,i){super(at(i),e),this._editorMouseEventBrand=void 0,this.isFromPointerCapture=t,this.pos=new $4(this.posx,this.posy),this.editorPos=LG(i),this.relativePos=xG(i,this.editorPos,this.pos)}}class XBe{constructor(e){this._editorViewDomNode=e}_create(e){return new qm(e,!1,this._editorViewDomNode)}onContextMenu(e,t){return se(e,"contextmenu",i=>{t(this._create(i))})}onMouseUp(e,t){return se(e,"mouseup",i=>{t(this._create(i))})}onMouseDown(e,t){return se(e,Le.MOUSE_DOWN,i=>{t(this._create(i))})}onPointerDown(e,t){return se(e,Le.POINTER_DOWN,i=>{t(this._create(i),i.pointerId)})}onMouseLeave(e,t){return se(e,Le.MOUSE_LEAVE,i=>{t(this._create(i))})}onMouseMove(e,t){return se(e,"mousemove",i=>t(this._create(i)))}}class QBe{constructor(e){this._editorViewDomNode=e}_create(e){return new qm(e,!1,this._editorViewDomNode)}onPointerUp(e,t){return se(e,"pointerup",i=>{t(this._create(i))})}onPointerDown(e,t){return se(e,Le.POINTER_DOWN,i=>{t(this._create(i),i.pointerId)})}onPointerLeave(e,t){return se(e,Le.POINTER_LEAVE,i=>{t(this._create(i))})}onPointerMove(e,t){return se(e,"pointermove",i=>t(this._create(i)))}}class JBe extends X{constructor(e){super(),this._editorViewDomNode=e,this._globalPointerMoveMonitor=this._register(new YS),this._keydownListener=null}startMonitoring(e,t,i,n,s){this._keydownListener=Bn(e.ownerDocument,"keydown",r=>{r.toKeyCodeChord().isModifierKey()||this._globalPointerMoveMonitor.stopMonitoring(!0,r.browserEvent)},!0),this._globalPointerMoveMonitor.startMonitoring(e,t,i,r=>{n(new qm(r,!0,this._editorViewDomNode))},r=>{this._keydownListener.dispose(),s(r)})}stopMonitoring(){this._globalPointerMoveMonitor.stopMonitoring(!0)}}const P2=class P2{constructor(e){this._editor=e,this._instanceId=++P2._idPool,this._counter=0,this._rules=new Map,this._garbageCollectionScheduler=new Oi(()=>this.garbageCollect(),1e3)}createClassNameRef(e){const t=this.getOrCreateRule(e);return t.increaseRefCount(),{className:t.className,dispose:()=>{t.decreaseRefCount(),this._garbageCollectionScheduler.schedule()}}}getOrCreateRule(e){const t=this.computeUniqueKey(e);let i=this._rules.get(t);if(!i){const n=this._counter++;i=new eWe(t,`dyn-rule-${this._instanceId}-${n}`,CA(this._editor.getContainerDomNode())?this._editor.getContainerDomNode():void 0,e),this._rules.set(t,i)}return i}computeUniqueKey(e){return JSON.stringify(e)}garbageCollect(){for(const e of this._rules.values())e.hasReferences()||(this._rules.delete(e.key),e.dispose())}};P2._idPool=0;let MP=P2;class eWe{constructor(e,t,i,n){this.key=e,this.className=t,this.properties=n,this._referenceCount=0,this._styleElementDisposables=new le,this._styleElement=$l(i,void 0,this._styleElementDisposables),this._styleElement.textContent=this.getCssText(this.className,this.properties)}getCssText(e,t){let i=`.${e} {`;for(const n in t){const s=t[n];let r;typeof s=="object"?r=He(s.id):r=s;const a=tWe(n);i+=`
	${a}: ${r};`}return i+=`
}`,i}dispose(){this._styleElementDisposables.dispose(),this._styleElement=void 0}increaseRefCount(){this._referenceCount++}decreaseRefCount(){this._referenceCount--}hasReferences(){return this._referenceCount>0}}function tWe(o){return o.replace(/(^[A-Z])/,([e])=>e.toLowerCase()).replace(/([A-Z])/g,([e])=>`-${e.toLowerCase()}`)}class bI extends X{constructor(){super(),this._shouldRender=!0}shouldRender(){return this._shouldRender}forceShouldRender(){this._shouldRender=!0}setShouldRender(){this._shouldRender=!0}onDidRender(){this._shouldRender=!1}onCompositionStart(e){return!1}onCompositionEnd(e){return!1}onConfigurationChanged(e){return!1}onCursorStateChanged(e){return!1}onDecorationsChanged(e){return!1}onFlushed(e){return!1}onFocusChanged(e){return!1}onLanguageConfigurationChanged(e){return!1}onLineMappingChanged(e){return!1}onLinesChanged(e){return!1}onLinesDeleted(e){return!1}onLinesInserted(e){return!1}onRevealRangeRequest(e){return!1}onScrollChanged(e){return!1}onThemeChanged(e){return!1}onTokensChanged(e){return!1}onTokensColorsChanged(e){return!1}onZonesChanged(e){return!1}handleEvents(e){let t=!1;for(let i=0,n=e.length;i<n;i++){const s=e[i];switch(s.type){case 0:this.onCompositionStart(s)&&(t=!0);break;case 1:this.onCompositionEnd(s)&&(t=!0);break;case 2:this.onConfigurationChanged(s)&&(t=!0);break;case 3:this.onCursorStateChanged(s)&&(t=!0);break;case 4:this.onDecorationsChanged(s)&&(t=!0);break;case 5:this.onFlushed(s)&&(t=!0);break;case 6:this.onFocusChanged(s)&&(t=!0);break;case 7:this.onLanguageConfigurationChanged(s)&&(t=!0);break;case 8:this.onLineMappingChanged(s)&&(t=!0);break;case 9:this.onLinesChanged(s)&&(t=!0);break;case 10:this.onLinesDeleted(s)&&(t=!0);break;case 11:this.onLinesInserted(s)&&(t=!0);break;case 12:this.onRevealRangeRequest(s)&&(t=!0);break;case 13:this.onScrollChanged(s)&&(t=!0);break;case 15:this.onTokensChanged(s)&&(t=!0);break;case 14:this.onThemeChanged(s)&&(t=!0);break;case 16:this.onTokensColorsChanged(s)&&(t=!0);break;case 17:this.onZonesChanged(s)&&(t=!0);break;default:console.info("View received unknown event: "),console.info(s)}}t&&(this._shouldRender=!0)}}class hl extends bI{constructor(e){super(),this._context=e,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}}class bu{static write(e,t){e.setAttribute("data-mprt",String(t))}static read(e){const t=e.getAttribute("data-mprt");return t===null?0:parseInt(t,10)}static collect(e,t){const i=[];let n=0;for(;e&&e!==e.ownerDocument.body&&e!==t;)e.nodeType===e.ELEMENT_NODE&&(i[n++]=this.read(e)),e=e.parentElement;const s=new Uint8Array(n);for(let r=0;r<n;r++)s[r]=i[n-r-1];return s}}class iWe{constructor(e,t){this._restrictedRenderingContextBrand=void 0,this._viewLayout=e,this.viewportData=t,this.scrollWidth=this._viewLayout.getScrollWidth(),this.scrollHeight=this._viewLayout.getScrollHeight(),this.visibleRange=this.viewportData.visibleRange,this.bigNumbersDelta=this.viewportData.bigNumbersDelta;const i=this._viewLayout.getCurrentViewport();this.scrollTop=i.top,this.scrollLeft=i.left,this.viewportWidth=i.width,this.viewportHeight=i.height}getScrolledTopFromAbsoluteTop(e){return e-this.scrollTop}getVerticalOffsetForLineNumber(e,t){return this._viewLayout.getVerticalOffsetForLineNumber(e,t)}getVerticalOffsetAfterLineNumber(e,t){return this._viewLayout.getVerticalOffsetAfterLineNumber(e,t)}getDecorationsInViewport(){return this.viewportData.getDecorationsInViewport()}}class nWe extends iWe{constructor(e,t,i){super(e,t),this._renderingContextBrand=void 0,this._viewLines=i}linesVisibleRangesForRange(e,t){return this._viewLines.linesVisibleRangesForRange(e,t)}visibleRangeForPosition(e){return this._viewLines.visibleRangeForPosition(e)}}class sWe{constructor(e,t,i,n){this.outsideRenderedLine=e,this.lineNumber=t,this.ranges=i,this.continuesOnNextLine=n}}class j4{static from(e){const t=new Array(e.length);for(let i=0,n=e.length;i<n;i++){const s=e[i];t[i]=new j4(s.left,s.width)}return t}constructor(e,t){this._horizontalRangeBrand=void 0,this.left=Math.round(e),this.width=Math.round(t)}toString(){return`[${this.left},${this.width}]`}}class nb{constructor(e,t){this._floatHorizontalRangeBrand=void 0,this.left=e,this.width=t}toString(){return`[${this.left},${this.width}]`}static compare(e,t){return e.left-t.left}}class oWe{constructor(e,t){this.outsideRenderedLine=e,this.originalLeft=t,this.left=Math.round(this.originalLeft)}}class roe{constructor(e,t){this.outsideRenderedLine=e,this.ranges=t}}class MM{static _createRange(){return this._handyReadyRange||(this._handyReadyRange=document.createRange()),this._handyReadyRange}static _detachRange(e,t){e.selectNodeContents(t)}static _readClientRects(e,t,i,n,s){const r=this._createRange();try{return r.setStart(e,t),r.setEnd(i,n),r.getClientRects()}catch{return null}finally{this._detachRange(r,s)}}static _mergeAdjacentRanges(e){if(e.length===1)return e;e.sort(nb.compare);const t=[];let i=0,n=e[0];for(let s=1,r=e.length;s<r;s++){const a=e[s];n.left+n.width+.9>=a.left?n.width=Math.max(n.width,a.left+a.width-n.left):(t[i++]=n,n=a)}return t[i++]=n,t}static _createHorizontalRangesFromClientRects(e,t,i){if(!e||e.length===0)return null;const n=[];for(let s=0,r=e.length;s<r;s++){const a=e[s];n[s]=new nb(Math.max(0,(a.left-t)/i),a.width/i)}return this._mergeAdjacentRanges(n)}static readHorizontalRanges(e,t,i,n,s,r){const l=e.children.length-1;if(0>l)return null;if(t=Math.min(l,Math.max(0,t)),n=Math.min(l,Math.max(0,n)),t===n&&i===s&&i===0&&!e.children[t].firstChild){const g=e.children[t].getClientRects();return r.markDidDomLayout(),this._createHorizontalRangesFromClientRects(g,r.clientRectDeltaLeft,r.clientRectScale)}t!==n&&n>0&&s===0&&(n--,s=1073741824);let c=e.children[t].firstChild,u=e.children[n].firstChild;if((!c||!u)&&(!c&&i===0&&t>0&&(c=e.children[t-1].firstChild,i=1073741824),!u&&s===0&&n>0&&(u=e.children[n-1].firstChild,s=1073741824)),!c||!u)return null;i=Math.min(c.textContent.length,Math.max(0,i)),s=Math.min(u.textContent.length,Math.max(0,s));const f=this._readClientRects(c,i,u,s,r.endNode);return r.markDidDomLayout(),this._createHorizontalRangesFromClientRects(f,r.clientRectDeltaLeft,r.clientRectScale)}}const rWe=function(){return su?!0:!(Qr||Lc||yg)}();let T1=!0;class aoe{constructor(e,t){this.themeType=t;const i=e.options,n=i.get(50);i.get(38)==="off"?this.renderWhitespace=i.get(100):this.renderWhitespace="none",this.renderControlCharacters=i.get(95),this.spaceWidth=n.spaceWidth,this.middotWidth=n.middotWidth,this.wsmiddotWidth=n.wsmiddotWidth,this.useMonospaceOptimizations=n.isMonospace&&!i.get(33),this.canUseHalfwidthRightwardsArrow=n.canUseHalfwidthRightwardsArrow,this.lineHeight=i.get(67),this.stopRenderingLineAfter=i.get(118),this.fontLigatures=i.get(51)}equals(e){return this.themeType===e.themeType&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.fontLigatures===e.fontLigatures}}const O2=class O2{constructor(e){this._options=e,this._isMaybeInvalid=!0,this._renderedViewLine=null}getDomNode(){return this._renderedViewLine&&this._renderedViewLine.domNode?this._renderedViewLine.domNode.domNode:null}setDomNode(e){if(this._renderedViewLine)this._renderedViewLine.domNode=ki(e);else throw new Error("I have no rendered view line to set the dom node to...")}onContentChanged(){this._isMaybeInvalid=!0}onTokensChanged(){this._isMaybeInvalid=!0}onDecorationsChanged(){this._isMaybeInvalid=!0}onOptionsChanged(e){this._isMaybeInvalid=!0,this._options=e}onSelectionChanged(){return lu(this._options.themeType)||this._options.renderWhitespace==="selection"?(this._isMaybeInvalid=!0,!0):!1}renderLine(e,t,i,n,s){if(this._isMaybeInvalid===!1)return!1;this._isMaybeInvalid=!1;const r=n.getViewLineRenderingData(e),a=this._options,l=Kr.filter(r.inlineDecorations,e,r.minColumn,r.maxColumn);let c=null;if(lu(a.themeType)||this._options.renderWhitespace==="selection"){const p=n.selections;for(const _ of p){if(_.endLineNumber<e||_.startLineNumber>e)continue;const b=_.startLineNumber===e?_.startColumn:r.minColumn,y=_.endLineNumber===e?_.endColumn:r.maxColumn;b<y&&(lu(a.themeType)&&l.push(new Kr(b,y,"inline-selected-text",0)),this._options.renderWhitespace==="selection"&&(c||(c=[]),c.push(new ife(b-1,y-1))))}}const u=new r_(a.useMonospaceOptimizations,a.canUseHalfwidthRightwardsArrow,r.content,r.continuesWithWrappedLine,r.isBasicASCII,r.containsRTL,r.minColumn-1,r.tokens,l,r.tabSize,r.startVisibleColumn,a.spaceWidth,a.middotWidth,a.wsmiddotWidth,a.stopRenderingLineAfter,a.renderWhitespace,a.renderControlCharacters,a.fontLigatures!==Mm.OFF,c);if(this._renderedViewLine&&this._renderedViewLine.input.equals(u))return!1;s.appendString('<div style="top:'),s.appendString(String(t)),s.appendString("px;height:"),s.appendString(String(i)),s.appendString('px;" class="'),s.appendString(O2.CLASS_NAME),s.appendString('">');const f=vI(u,s);s.appendString("</div>");let g=null;return T1&&rWe&&r.isBasicASCII&&a.useMonospaceOptimizations&&f.containsForeignElements===0&&(g=new TR(this._renderedViewLine?this._renderedViewLine.domNode:null,u,f.characterMapping)),g||(g=ufe(this._renderedViewLine?this._renderedViewLine.domNode:null,u,f.characterMapping,f.containsRTL,f.containsForeignElements)),this._renderedViewLine=g,!0}layoutLine(e,t,i){this._renderedViewLine&&this._renderedViewLine.domNode&&(this._renderedViewLine.domNode.setTop(t),this._renderedViewLine.domNode.setHeight(i))}getWidth(e){return this._renderedViewLine?this._renderedViewLine.getWidth(e):0}getWidthIsFast(){return this._renderedViewLine?this._renderedViewLine.getWidthIsFast():!0}needsMonospaceFontCheck(){return this._renderedViewLine?this._renderedViewLine instanceof TR:!1}monospaceAssumptionsAreValid(){return this._renderedViewLine&&this._renderedViewLine instanceof TR?this._renderedViewLine.monospaceAssumptionsAreValid():T1}onMonospaceAssumptionsInvalidated(){this._renderedViewLine&&this._renderedViewLine instanceof TR&&(this._renderedViewLine=this._renderedViewLine.toSlowRenderedLine())}getVisibleRangesForRange(e,t,i,n){if(!this._renderedViewLine)return null;t=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,t)),i=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,i));const s=this._renderedViewLine.input.stopRenderingLineAfter;if(s!==-1&&t>s+1&&i>s+1)return new roe(!0,[new nb(this.getWidth(n),0)]);s!==-1&&t>s+1&&(t=s+1),s!==-1&&i>s+1&&(i=s+1);const r=this._renderedViewLine.getVisibleRangesForRange(e,t,i,n);return r&&r.length>0?new roe(!1,r):null}getColumnOfNodeOffset(e,t){return this._renderedViewLine?this._renderedViewLine.getColumnOfNodeOffset(e,t):1}};O2.CLASS_NAME="view-line";let Xf=O2;class TR{constructor(e,t,i){this._cachedWidth=-1,this.domNode=e,this.input=t;const n=Math.floor(t.lineContent.length/300);if(n>0){this._keyColumnPixelOffsetCache=new Float32Array(n);for(let s=0;s<n;s++)this._keyColumnPixelOffsetCache[s]=-1}else this._keyColumnPixelOffsetCache=null;this._characterMapping=i,this._charWidth=t.spaceWidth}getWidth(e){if(!this.domNode||this.input.lineContent.length<300){const t=this._characterMapping.getHorizontalOffset(this._characterMapping.length);return Math.round(this._charWidth*t)}return this._cachedWidth===-1&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth,e==null||e.markDidDomLayout()),this._cachedWidth}getWidthIsFast(){return this.input.lineContent.length<300||this._cachedWidth!==-1}monospaceAssumptionsAreValid(){if(!this.domNode)return T1;if(this.input.lineContent.length<300){const e=this.getWidth(null),t=this.domNode.domNode.firstChild.offsetWidth;Math.abs(e-t)>=2&&(console.warn("monospace assumptions have been violated, therefore disabling monospace optimizations!"),T1=!1)}return T1}toSlowRenderedLine(){return ufe(this.domNode,this.input,this._characterMapping,!1,0)}getVisibleRangesForRange(e,t,i,n){const s=this._getColumnPixelOffset(e,t,n),r=this._getColumnPixelOffset(e,i,n);return[new nb(s,r-s)]}_getColumnPixelOffset(e,t,i){if(t<=300){const c=this._characterMapping.getHorizontalOffset(t);return this._charWidth*c}const n=Math.floor((t-1)/300)-1,s=(n+1)*300+1;let r=-1;if(this._keyColumnPixelOffsetCache&&(r=this._keyColumnPixelOffsetCache[n],r===-1&&(r=this._actualReadPixelOffset(e,s,i),this._keyColumnPixelOffsetCache[n]=r)),r===-1){const c=this._characterMapping.getHorizontalOffset(t);return this._charWidth*c}const a=this._characterMapping.getHorizontalOffset(s),l=this._characterMapping.getHorizontalOffset(t);return r+this._charWidth*(l-a)}_getReadingTarget(e){return e.domNode.firstChild}_actualReadPixelOffset(e,t,i){if(!this.domNode)return-1;const n=this._characterMapping.getDomPosition(t),s=MM.readHorizontalRanges(this._getReadingTarget(this.domNode),n.partIndex,n.charIndex,n.partIndex,n.charIndex,i);return!s||s.length===0?-1:s[0].left}getColumnOfNodeOffset(e,t){return kG(this._characterMapping,e,t)}}class dfe{constructor(e,t,i,n,s){if(this.domNode=e,this.input=t,this._characterMapping=i,this._isWhitespaceOnly=/^\s*$/.test(t.lineContent),this._containsForeignElements=s,this._cachedWidth=-1,this._pixelOffsetCache=null,!n||this._characterMapping.length===0){this._pixelOffsetCache=new Float32Array(Math.max(2,this._characterMapping.length+1));for(let r=0,a=this._characterMapping.length;r<=a;r++)this._pixelOffsetCache[r]=-1}}_getReadingTarget(e){return e.domNode.firstChild}getWidth(e){return this.domNode?(this._cachedWidth===-1&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth,e==null||e.markDidDomLayout()),this._cachedWidth):0}getWidthIsFast(){return this._cachedWidth!==-1}getVisibleRangesForRange(e,t,i,n){if(!this.domNode)return null;if(this._pixelOffsetCache!==null){const s=this._readPixelOffset(this.domNode,e,t,n);if(s===-1)return null;const r=this._readPixelOffset(this.domNode,e,i,n);return r===-1?null:[new nb(s,r-s)]}return this._readVisibleRangesForRange(this.domNode,e,t,i,n)}_readVisibleRangesForRange(e,t,i,n,s){if(i===n){const r=this._readPixelOffset(e,t,i,s);return r===-1?null:[new nb(r,0)]}else return this._readRawVisibleRangesForRange(e,i,n,s)}_readPixelOffset(e,t,i,n){if(this._characterMapping.length===0){if(this._containsForeignElements===0||this._containsForeignElements===2)return 0;if(this._containsForeignElements===1)return this.getWidth(n);const s=this._getReadingTarget(e);return s.firstChild?(n.markDidDomLayout(),s.firstChild.offsetWidth):0}if(this._pixelOffsetCache!==null){const s=this._pixelOffsetCache[i];if(s!==-1)return s;const r=this._actualReadPixelOffset(e,t,i,n);return this._pixelOffsetCache[i]=r,r}return this._actualReadPixelOffset(e,t,i,n)}_actualReadPixelOffset(e,t,i,n){if(this._characterMapping.length===0){const l=MM.readHorizontalRanges(this._getReadingTarget(e),0,0,0,0,n);return!l||l.length===0?-1:l[0].left}if(i===this._characterMapping.length&&this._isWhitespaceOnly&&this._containsForeignElements===0)return this.getWidth(n);const s=this._characterMapping.getDomPosition(i),r=MM.readHorizontalRanges(this._getReadingTarget(e),s.partIndex,s.charIndex,s.partIndex,s.charIndex,n);if(!r||r.length===0)return-1;const a=r[0].left;if(this.input.isBasicASCII){const l=this._characterMapping.getHorizontalOffset(i),c=Math.round(this.input.spaceWidth*l);if(Math.abs(c-a)<=1)return c}return a}_readRawVisibleRangesForRange(e,t,i,n){if(t===1&&i===this._characterMapping.length)return[new nb(0,this.getWidth(n))];const s=this._characterMapping.getDomPosition(t),r=this._characterMapping.getDomPosition(i);return MM.readHorizontalRanges(this._getReadingTarget(e),s.partIndex,s.charIndex,r.partIndex,r.charIndex,n)}getColumnOfNodeOffset(e,t){return kG(this._characterMapping,e,t)}}class aWe extends dfe{_readVisibleRangesForRange(e,t,i,n,s){const r=super._readVisibleRangesForRange(e,t,i,n,s);if(!r||r.length===0||i===n||i===1&&n===this._characterMapping.length)return r;if(!this.input.containsRTL){const a=this._readPixelOffset(e,t,n,s);if(a!==-1){const l=r[r.length-1];l.left<a&&(l.width=a-l.left)}}return r}}const ufe=function(){return Gv?lWe:cWe}();function lWe(o,e,t,i,n){return new aWe(o,e,t,i,n)}function cWe(o,e,t,i,n){return new dfe(o,e,t,i,n)}function kG(o,e,t){const i=e.textContent.length;let n=-1;for(;e;)e=e.previousSibling,n++;return o.getColumn(new nfe(n,t),i)}class eE{static whitespaceVisibleColumn(e,t,i){const n=e.length;let s=0,r=-1,a=-1;for(let l=0;l<n;l++){if(l===t)return[r,a,s];switch(s%i===0&&(r=l,a=s),e.charCodeAt(l)){case 32:s+=1;break;case 9:s=Fs.nextRenderTabStop(s,i);break;default:return[-1,-1,-1]}}return t===n?[r,a,s]:[-1,-1,-1]}static atomicPosition(e,t,i,n){const s=e.length,[r,a,l]=eE.whitespaceVisibleColumn(e,t,i);if(l===-1)return-1;let c;switch(n){case 0:c=!0;break;case 1:c=!1;break;case 2:if(l%i===0)return t;c=l%i<=i/2;break}if(c){if(r===-1)return-1;let g=a;for(let p=r;p<s;++p){if(g===a+i)return r;switch(e.charCodeAt(p)){case 32:g+=1;break;case 9:g=Fs.nextRenderTabStop(g,i);break;default:return-1}}return g===a+i?r:-1}const u=Fs.nextRenderTabStop(l,i);let f=l;for(let g=t;g<s;g++){if(f===u)return g;switch(e.charCodeAt(g)){case 32:f+=1;break;case 9:f=Fs.nextRenderTabStop(f,i);break;default:return-1}}return f===u?s:-1}}class Dp{constructor(e=null){this.hitTarget=e,this.type=0}}class hfe{get hitTarget(){return this.spanNode}constructor(e,t,i){this.position=e,this.spanNode=t,this.injectedText=i,this.type=1}}var Sv;(function(o){function e(t,i,n){const s=t.getPositionFromDOMInfo(i,n);return s?new hfe(s,i,null):new Dp(i)}o.createFromDOMInfo=e})(Sv||(Sv={}));class dWe{constructor(e,t){this.lastViewCursorsRenderData=e,this.lastTextareaPosition=t}}class mr{static _deduceRage(e,t=null){return!t&&e?new M(e.lineNumber,e.column,e.lineNumber,e.column):t??null}static createUnknown(e,t,i){return{type:0,element:e,mouseColumn:t,position:i,range:this._deduceRage(i)}}static createTextarea(e,t){return{type:1,element:e,mouseColumn:t,position:null,range:null}}static createMargin(e,t,i,n,s,r){return{type:e,element:t,mouseColumn:i,position:n,range:s,detail:r}}static createViewZone(e,t,i,n,s){return{type:e,element:t,mouseColumn:i,position:n,range:this._deduceRage(n),detail:s}}static createContentText(e,t,i,n,s){return{type:6,element:e,mouseColumn:t,position:i,range:this._deduceRage(i,n),detail:s}}static createContentEmpty(e,t,i,n){return{type:7,element:e,mouseColumn:t,position:i,range:this._deduceRage(i),detail:n}}static createContentWidget(e,t,i){return{type:9,element:e,mouseColumn:t,position:null,range:null,detail:i}}static createScrollbar(e,t,i){return{type:11,element:e,mouseColumn:t,position:i,range:this._deduceRage(i)}}static createOverlayWidget(e,t,i){return{type:12,element:e,mouseColumn:t,position:null,range:null,detail:i}}static createOutsideEditor(e,t,i,n){return{type:13,element:null,mouseColumn:e,position:t,range:this._deduceRage(t),outsidePosition:i,outsideDistance:n}}static _typeToString(e){return e===1?"TEXTAREA":e===2?"GUTTER_GLYPH_MARGIN":e===3?"GUTTER_LINE_NUMBERS":e===4?"GUTTER_LINE_DECORATIONS":e===5?"GUTTER_VIEW_ZONE":e===6?"CONTENT_TEXT":e===7?"CONTENT_EMPTY":e===8?"CONTENT_VIEW_ZONE":e===9?"CONTENT_WIDGET":e===10?"OVERVIEW_RULER":e===11?"SCROLLBAR":e===12?"OVERLAY_WIDGET":"UNKNOWN"}static toString(e){return this._typeToString(e.type)+": "+e.position+" - "+e.range+" - "+JSON.stringify(e.detail)}}class Or{static isTextArea(e){return e.length===2&&e[0]===3&&e[1]===7}static isChildOfViewLines(e){return e.length>=4&&e[0]===3&&e[3]===8}static isStrictChildOfViewLines(e){return e.length>4&&e[0]===3&&e[3]===8}static isChildOfScrollableElement(e){return e.length>=2&&e[0]===3&&e[1]===6}static isChildOfMinimap(e){return e.length>=2&&e[0]===3&&e[1]===9}static isChildOfContentWidgets(e){return e.length>=4&&e[0]===3&&e[3]===1}static isChildOfOverflowGuard(e){return e.length>=1&&e[0]===3}static isChildOfOverflowingContentWidgets(e){return e.length>=1&&e[0]===2}static isChildOfOverlayWidgets(e){return e.length>=2&&e[0]===3&&e[1]===4}static isChildOfOverflowingOverlayWidgets(e){return e.length>=1&&e[0]===5}}class yS{constructor(e,t,i){this.viewModel=e.viewModel;const n=e.configuration.options;this.layoutInfo=n.get(146),this.viewDomNode=t.viewDomNode,this.lineHeight=n.get(67),this.stickyTabStops=n.get(117),this.typicalHalfwidthCharacterWidth=n.get(50).typicalHalfwidthCharacterWidth,this.lastRenderData=i,this._context=e,this._viewHelper=t}getZoneAtCoord(e){return yS.getZoneAtCoord(this._context,e)}static getZoneAtCoord(e,t){const i=e.viewLayout.getWhitespaceAtVerticalOffset(t);if(i){const n=i.verticalOffset+i.height/2,s=e.viewModel.getLineCount();let r=null,a,l=null;return i.afterLineNumber!==s&&(l=new G(i.afterLineNumber+1,1)),i.afterLineNumber>0&&(r=new G(i.afterLineNumber,e.viewModel.getLineMaxColumn(i.afterLineNumber))),l===null?a=r:r===null?a=l:t<n?a=r:a=l,{viewZoneId:i.id,afterLineNumber:i.afterLineNumber,positionBefore:r,positionAfter:l,position:a}}return null}getFullLineRangeAtCoord(e){if(this._context.viewLayout.isAfterLines(e)){const n=this._context.viewModel.getLineCount(),s=this._context.viewModel.getLineMaxColumn(n);return{range:new M(n,s,n,s),isAfterLines:!0}}const t=this._context.viewLayout.getLineNumberAtVerticalOffset(e),i=this._context.viewModel.getLineMaxColumn(t);return{range:new M(t,1,t,i),isAfterLines:!1}}getLineNumberAtVerticalOffset(e){return this._context.viewLayout.getLineNumberAtVerticalOffset(e)}isAfterLines(e){return this._context.viewLayout.isAfterLines(e)}isInTopPadding(e){return this._context.viewLayout.isInTopPadding(e)}isInBottomPadding(e){return this._context.viewLayout.isInBottomPadding(e)}getVerticalOffsetForLineNumber(e){return this._context.viewLayout.getVerticalOffsetForLineNumber(e)}findAttribute(e,t){return yS._findAttribute(e,t,this._viewHelper.viewDomNode)}static _findAttribute(e,t,i){for(;e&&e!==e.ownerDocument.body;){if(e.hasAttribute&&e.hasAttribute(t))return e.getAttribute(t);if(e===i)return null;e=e.parentNode}return null}getLineWidth(e){return this._viewHelper.getLineWidth(e)}visibleRangeForPosition(e,t){return this._viewHelper.visibleRangeForPosition(e,t)}getPositionFromDOMInfo(e,t){return this._viewHelper.getPositionFromDOMInfo(e,t)}getCurrentScrollTop(){return this._context.viewLayout.getCurrentScrollTop()}getCurrentScrollLeft(){return this._context.viewLayout.getCurrentScrollLeft()}}class uWe{constructor(e,t,i,n){this.editorPos=t,this.pos=i,this.relativePos=n,this.mouseVerticalOffset=Math.max(0,e.getCurrentScrollTop()+this.relativePos.y),this.mouseContentHorizontalOffset=e.getCurrentScrollLeft()+this.relativePos.x-e.layoutInfo.contentLeft,this.isInMarginArea=this.relativePos.x<e.layoutInfo.contentLeft&&this.relativePos.x>=e.layoutInfo.glyphMarginLeft,this.isInContentArea=!this.isInMarginArea,this.mouseColumn=Math.max(0,pr._getMouseColumn(this.mouseContentHorizontalOffset,e.typicalHalfwidthCharacterWidth))}}class hWe extends uWe{get target(){return this._useHitTestTarget?this.hitTestResult.value.hitTarget:this._eventTarget}get targetPath(){return this._targetPathCacheElement!==this.target&&(this._targetPathCacheElement=this.target,this._targetPathCacheValue=bu.collect(this.target,this._ctx.viewDomNode)),this._targetPathCacheValue}constructor(e,t,i,n,s){super(e,t,i,n),this.hitTestResult=new fu(()=>pr.doHitTest(this._ctx,this)),this._targetPathCacheElement=null,this._targetPathCacheValue=new Uint8Array(0),this._ctx=e,this._eventTarget=s;const r=!!this._eventTarget;this._useHitTestTarget=!r}toString(){return`pos(${this.pos.x},${this.pos.y}), editorPos(${this.editorPos.x},${this.editorPos.y}), relativePos(${this.relativePos.x},${this.relativePos.y}), mouseVerticalOffset: ${this.mouseVerticalOffset}, mouseContentHorizontalOffset: ${this.mouseContentHorizontalOffset}
	target: ${this.target?this.target.outerHTML:null}`}get wouldBenefitFromHitTestTargetSwitch(){return!this._useHitTestTarget&&this.hitTestResult.value.hitTarget!==null&&this.target!==this.hitTestResult.value.hitTarget}switchToHitTestTarget(){this._useHitTestTarget=!0}_getMouseColumn(e=null){return e&&e.column<this._ctx.viewModel.getLineMaxColumn(e.lineNumber)?Fs.visibleColumnFromColumn(this._ctx.viewModel.getLineContent(e.lineNumber),e.column,this._ctx.viewModel.model.getOptions().tabSize)+1:this.mouseColumn}fulfillUnknown(e=null){return mr.createUnknown(this.target,this._getMouseColumn(e),e)}fulfillTextarea(){return mr.createTextarea(this.target,this._getMouseColumn())}fulfillMargin(e,t,i,n){return mr.createMargin(e,this.target,this._getMouseColumn(t),t,i,n)}fulfillViewZone(e,t,i){return mr.createViewZone(e,this.target,this._getMouseColumn(t),t,i)}fulfillContentText(e,t,i){return mr.createContentText(this.target,this._getMouseColumn(e),e,t,i)}fulfillContentEmpty(e,t){return mr.createContentEmpty(this.target,this._getMouseColumn(e),e,t)}fulfillContentWidget(e){return mr.createContentWidget(this.target,this._getMouseColumn(),e)}fulfillScrollbar(e){return mr.createScrollbar(this.target,this._getMouseColumn(e),e)}fulfillOverlayWidget(e){return mr.createOverlayWidget(this.target,this._getMouseColumn(),e)}}const loe={isAfterLines:!0};function j7(o){return{isAfterLines:!1,horizontalDistanceToText:o}}class pr{constructor(e,t){this._context=e,this._viewHelper=t}mouseTargetIsWidget(e){const t=e.target,i=bu.collect(t,this._viewHelper.viewDomNode);return!!(Or.isChildOfContentWidgets(i)||Or.isChildOfOverflowingContentWidgets(i)||Or.isChildOfOverlayWidgets(i)||Or.isChildOfOverflowingOverlayWidgets(i))}createMouseTarget(e,t,i,n,s){const r=new yS(this._context,this._viewHelper,e),a=new hWe(r,t,i,n,s);try{const l=pr._createMouseTarget(r,a);if(l.type===6&&r.stickyTabStops&&l.position!==null){const c=pr._snapToSoftTabBoundary(l.position,r.viewModel),u=M.fromPositions(c,c).plusRange(l.range);return a.fulfillContentText(c,u,l.detail)}return l}catch{return a.fulfillUnknown()}}static _createMouseTarget(e,t){if(t.target===null)return t.fulfillUnknown();const i=t;let n=null;return!Or.isChildOfOverflowGuard(t.targetPath)&&!Or.isChildOfOverflowingContentWidgets(t.targetPath)&&!Or.isChildOfOverflowingOverlayWidgets(t.targetPath)&&(n=n||t.fulfillUnknown()),n=n||pr._hitTestContentWidget(e,i),n=n||pr._hitTestOverlayWidget(e,i),n=n||pr._hitTestMinimap(e,i),n=n||pr._hitTestScrollbarSlider(e,i),n=n||pr._hitTestViewZone(e,i),n=n||pr._hitTestMargin(e,i),n=n||pr._hitTestViewCursor(e,i),n=n||pr._hitTestTextArea(e,i),n=n||pr._hitTestViewLines(e,i),n=n||pr._hitTestScrollbar(e,i),n||t.fulfillUnknown()}static _hitTestContentWidget(e,t){if(Or.isChildOfContentWidgets(t.targetPath)||Or.isChildOfOverflowingContentWidgets(t.targetPath)){const i=e.findAttribute(t.target,"widgetId");return i?t.fulfillContentWidget(i):t.fulfillUnknown()}return null}static _hitTestOverlayWidget(e,t){if(Or.isChildOfOverlayWidgets(t.targetPath)||Or.isChildOfOverflowingOverlayWidgets(t.targetPath)){const i=e.findAttribute(t.target,"widgetId");return i?t.fulfillOverlayWidget(i):t.fulfillUnknown()}return null}static _hitTestViewCursor(e,t){if(t.target){const i=e.lastRenderData.lastViewCursorsRenderData;for(const n of i)if(t.target===n.domNode)return t.fulfillContentText(n.position,null,{mightBeForeignElement:!1,injectedText:null})}if(t.isInContentArea){const i=e.lastRenderData.lastViewCursorsRenderData,n=t.mouseContentHorizontalOffset,s=t.mouseVerticalOffset;for(const r of i){if(n<r.contentLeft||n>r.contentLeft+r.width)continue;const a=e.getVerticalOffsetForLineNumber(r.position.lineNumber);if(a<=s&&s<=a+r.height)return t.fulfillContentText(r.position,null,{mightBeForeignElement:!1,injectedText:null})}}return null}static _hitTestViewZone(e,t){const i=e.getZoneAtCoord(t.mouseVerticalOffset);if(i){const n=t.isInContentArea?8:5;return t.fulfillViewZone(n,i.position,i)}return null}static _hitTestTextArea(e,t){return Or.isTextArea(t.targetPath)?e.lastRenderData.lastTextareaPosition?t.fulfillContentText(e.lastRenderData.lastTextareaPosition,null,{mightBeForeignElement:!1,injectedText:null}):t.fulfillTextarea():null}static _hitTestMargin(e,t){if(t.isInMarginArea){const i=e.getFullLineRangeAtCoord(t.mouseVerticalOffset),n=i.range.getStartPosition();let s=Math.abs(t.relativePos.x);const r={isAfterLines:i.isAfterLines,glyphMarginLeft:e.layoutInfo.glyphMarginLeft,glyphMarginWidth:e.layoutInfo.glyphMarginWidth,lineNumbersWidth:e.layoutInfo.lineNumbersWidth,offsetX:s};if(s-=e.layoutInfo.glyphMarginLeft,s<=e.layoutInfo.glyphMarginWidth){const a=e.viewModel.coordinatesConverter.convertViewPositionToModelPosition(i.range.getStartPosition()),l=e.viewModel.glyphLanes.getLanesAtLine(a.lineNumber);return r.glyphMarginLane=l[Math.floor(s/e.lineHeight)],t.fulfillMargin(2,n,i.range,r)}return s-=e.layoutInfo.glyphMarginWidth,s<=e.layoutInfo.lineNumbersWidth?t.fulfillMargin(3,n,i.range,r):(s-=e.layoutInfo.lineNumbersWidth,t.fulfillMargin(4,n,i.range,r))}return null}static _hitTestViewLines(e,t){if(!Or.isChildOfViewLines(t.targetPath))return null;if(e.isInTopPadding(t.mouseVerticalOffset))return t.fulfillContentEmpty(new G(1,1),loe);if(e.isAfterLines(t.mouseVerticalOffset)||e.isInBottomPadding(t.mouseVerticalOffset)){const n=e.viewModel.getLineCount(),s=e.viewModel.getLineMaxColumn(n);return t.fulfillContentEmpty(new G(n,s),loe)}if(Or.isStrictChildOfViewLines(t.targetPath)){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset);if(e.viewModel.getLineLength(n)===0){const r=e.getLineWidth(n),a=j7(t.mouseContentHorizontalOffset-r);return t.fulfillContentEmpty(new G(n,1),a)}const s=e.getLineWidth(n);if(t.mouseContentHorizontalOffset>=s){const r=j7(t.mouseContentHorizontalOffset-s),a=new G(n,e.viewModel.getLineMaxColumn(n));return t.fulfillContentEmpty(a,r)}}const i=t.hitTestResult.value;return i.type===1?pr.createMouseTargetFromHitTestPosition(e,t,i.spanNode,i.position,i.injectedText):t.wouldBenefitFromHitTestTargetSwitch?(t.switchToHitTestTarget(),this._createMouseTarget(e,t)):t.fulfillUnknown()}static _hitTestMinimap(e,t){if(Or.isChildOfMinimap(t.targetPath)){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),n=e.viewModel.getLineMaxColumn(i);return t.fulfillScrollbar(new G(i,n))}return null}static _hitTestScrollbarSlider(e,t){if(Or.isChildOfScrollableElement(t.targetPath)&&t.target&&t.target.nodeType===1){const i=t.target.className;if(i&&/\b(slider|scrollbar)\b/.test(i)){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),s=e.viewModel.getLineMaxColumn(n);return t.fulfillScrollbar(new G(n,s))}}return null}static _hitTestScrollbar(e,t){if(Or.isChildOfScrollableElement(t.targetPath)){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),n=e.viewModel.getLineMaxColumn(i);return t.fulfillScrollbar(new G(i,n))}return null}getMouseColumn(e){const t=this._context.configuration.options,i=t.get(146),n=this._context.viewLayout.getCurrentScrollLeft()+e.x-i.contentLeft;return pr._getMouseColumn(n,t.get(50).typicalHalfwidthCharacterWidth)}static _getMouseColumn(e,t){return e<0?1:Math.round(e/t)+1}static createMouseTargetFromHitTestPosition(e,t,i,n,s){const r=n.lineNumber,a=n.column,l=e.getLineWidth(r);if(t.mouseContentHorizontalOffset>l){const S=j7(t.mouseContentHorizontalOffset-l);return t.fulfillContentEmpty(n,S)}const c=e.visibleRangeForPosition(r,a);if(!c)return t.fulfillUnknown(n);const u=c.left;if(Math.abs(t.mouseContentHorizontalOffset-u)<1)return t.fulfillContentText(n,null,{mightBeForeignElement:!!s,injectedText:s});const f=[];if(f.push({offset:c.left,column:a}),a>1){const S=e.visibleRangeForPosition(r,a-1);S&&f.push({offset:S.left,column:a-1})}const g=e.viewModel.getLineMaxColumn(r);if(a<g){const S=e.visibleRangeForPosition(r,a+1);S&&f.push({offset:S.left,column:a+1})}f.sort((S,L)=>S.offset-L.offset);const p=t.pos.toClientCoordinates(at(e.viewDomNode)),_=i.getBoundingClientRect(),b=_.left<=p.clientX&&p.clientX<=_.right;let y=null;for(let S=1;S<f.length;S++){const L=f[S-1],x=f[S];if(L.offset<=t.mouseContentHorizontalOffset&&t.mouseContentHorizontalOffset<=x.offset){y=new M(r,L.column,r,x.column);const k=Math.abs(L.offset-t.mouseContentHorizontalOffset),E=Math.abs(x.offset-t.mouseContentHorizontalOffset);n=k<E?new G(r,L.column):new G(r,x.column);break}}return t.fulfillContentText(n,y,{mightBeForeignElement:!b||!!s,injectedText:s})}static _doHitTestWithCaretRangeFromPoint(e,t){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),n=e.getVerticalOffsetForLineNumber(i),s=n+e.lineHeight;if(!(i===e.viewModel.getLineCount()&&t.mouseVerticalOffset>s)){const a=Math.floor((n+s)/2);let l=t.pos.y+(a-t.mouseVerticalOffset);l<=t.editorPos.y&&(l=t.editorPos.y+1),l>=t.editorPos.y+t.editorPos.height&&(l=t.editorPos.y+t.editorPos.height-1);const c=new $4(t.pos.x,l),u=this._actualDoHitTestWithCaretRangeFromPoint(e,c.toClientCoordinates(at(e.viewDomNode)));if(u.type===1)return u}return this._actualDoHitTestWithCaretRangeFromPoint(e,t.pos.toClientCoordinates(at(e.viewDomNode)))}static _actualDoHitTestWithCaretRangeFromPoint(e,t){const i=aC(e.viewDomNode);let n;if(i?typeof i.caretRangeFromPoint>"u"?n=fWe(i,t.clientX,t.clientY):n=i.caretRangeFromPoint(t.clientX,t.clientY):n=e.viewDomNode.ownerDocument.caretRangeFromPoint(t.clientX,t.clientY),!n||!n.startContainer)return new Dp;const s=n.startContainer;if(s.nodeType===s.TEXT_NODE){const r=s.parentNode,a=r?r.parentNode:null,l=a?a.parentNode:null;return(l&&l.nodeType===l.ELEMENT_NODE?l.className:null)===Xf.CLASS_NAME?Sv.createFromDOMInfo(e,r,n.startOffset):new Dp(s.parentNode)}else if(s.nodeType===s.ELEMENT_NODE){const r=s.parentNode,a=r?r.parentNode:null;return(a&&a.nodeType===a.ELEMENT_NODE?a.className:null)===Xf.CLASS_NAME?Sv.createFromDOMInfo(e,s,s.textContent.length):new Dp(s)}return new Dp}static _doHitTestWithCaretPositionFromPoint(e,t){const i=e.viewDomNode.ownerDocument.caretPositionFromPoint(t.clientX,t.clientY);if(i.offsetNode.nodeType===i.offsetNode.TEXT_NODE){const n=i.offsetNode.parentNode,s=n?n.parentNode:null,r=s?s.parentNode:null;return(r&&r.nodeType===r.ELEMENT_NODE?r.className:null)===Xf.CLASS_NAME?Sv.createFromDOMInfo(e,i.offsetNode.parentNode,i.offset):new Dp(i.offsetNode.parentNode)}if(i.offsetNode.nodeType===i.offsetNode.ELEMENT_NODE){const n=i.offsetNode.parentNode,s=n&&n.nodeType===n.ELEMENT_NODE?n.className:null,r=n?n.parentNode:null,a=r&&r.nodeType===r.ELEMENT_NODE?r.className:null;if(s===Xf.CLASS_NAME){const l=i.offsetNode.childNodes[Math.min(i.offset,i.offsetNode.childNodes.length-1)];if(l)return Sv.createFromDOMInfo(e,l,0)}else if(a===Xf.CLASS_NAME)return Sv.createFromDOMInfo(e,i.offsetNode,0)}return new Dp(i.offsetNode)}static _snapToSoftTabBoundary(e,t){const i=t.getLineContent(e.lineNumber),{tabSize:n}=t.model.getOptions(),s=eE.atomicPosition(i,e.column-1,n,2);return s!==-1?new G(e.lineNumber,s+1):e}static doHitTest(e,t){let i=new Dp;if(typeof e.viewDomNode.ownerDocument.caretRangeFromPoint=="function"?i=this._doHitTestWithCaretRangeFromPoint(e,t):e.viewDomNode.ownerDocument.caretPositionFromPoint&&(i=this._doHitTestWithCaretPositionFromPoint(e,t.pos.toClientCoordinates(at(e.viewDomNode)))),i.type===1){const n=e.viewModel.getInjectedTextAt(i.position),s=e.viewModel.normalizePosition(i.position,2);(n||!s.equals(i.position))&&(i=new hfe(s,i.spanNode,n))}return i}}function fWe(o,e,t){const i=document.createRange();let n=o.elementFromPoint(e,t);if(n!==null){for(;n&&n.firstChild&&n.firstChild.nodeType!==n.firstChild.TEXT_NODE&&n.lastChild&&n.lastChild.firstChild;)n=n.lastChild;const s=n.getBoundingClientRect(),r=at(n),a=r.getComputedStyle(n,null).getPropertyValue("font-style"),l=r.getComputedStyle(n,null).getPropertyValue("font-variant"),c=r.getComputedStyle(n,null).getPropertyValue("font-weight"),u=r.getComputedStyle(n,null).getPropertyValue("font-size"),f=r.getComputedStyle(n,null).getPropertyValue("line-height"),g=r.getComputedStyle(n,null).getPropertyValue("font-family"),p=`${a} ${l} ${c} ${u}/${f} ${g}`,_=n.innerText;let b=s.left,y=0,S;if(e>s.left+s.width)y=_.length;else{const L=Hz.getInstance();for(let x=0;x<_.length+1;x++){if(S=L.getCharWidth(_.charAt(x),p)/2,b+=S,e<b){y=x;break}b+=S}}i.setStart(n.firstChild,y),i.setEnd(n.firstChild,y)}return i}const Tv=class Tv{static getInstance(){return Tv._INSTANCE||(Tv._INSTANCE=new Tv),Tv._INSTANCE}constructor(){this._cache={},this._canvas=document.createElement("canvas")}getCharWidth(e,t){const i=e+t;if(this._cache[i])return this._cache[i];const n=this._canvas.getContext("2d");n.font=t;const r=n.measureText(e).width;return this._cache[i]=r,r}};Tv._INSTANCE=null;let Hz=Tv;class DG extends bI{constructor(e,t,i){super(),this._mouseLeaveMonitor=null,this._context=e,this.viewController=t,this.viewHelper=i,this.mouseTargetFactory=new pr(this._context,i),this._mouseDownOperation=this._register(new gWe(this._context,this.viewController,this.viewHelper,this.mouseTargetFactory,(r,a)=>this._createMouseTarget(r,a),r=>this._getMouseColumn(r))),this.lastMouseLeaveTime=-1,this._height=this._context.configuration.options.get(146).height;const n=new XBe(this.viewHelper.viewDomNode);this._register(n.onContextMenu(this.viewHelper.viewDomNode,r=>this._onContextMenu(r,!0))),this._register(n.onMouseMove(this.viewHelper.viewDomNode,r=>{this._onMouseMove(r),this._mouseLeaveMonitor||(this._mouseLeaveMonitor=se(this.viewHelper.viewDomNode.ownerDocument,"mousemove",a=>{this.viewHelper.viewDomNode.contains(a.target)||this._onMouseLeave(new qm(a,!1,this.viewHelper.viewDomNode))}))})),this._register(n.onMouseUp(this.viewHelper.viewDomNode,r=>this._onMouseUp(r))),this._register(n.onMouseLeave(this.viewHelper.viewDomNode,r=>this._onMouseLeave(r)));let s=0;this._register(n.onPointerDown(this.viewHelper.viewDomNode,(r,a)=>{s=a})),this._register(se(this.viewHelper.viewDomNode,Le.POINTER_UP,r=>{this._mouseDownOperation.onPointerUp()})),this._register(n.onMouseDown(this.viewHelper.viewDomNode,r=>this._onMouseDown(r,s))),this._setupMouseWheelZoomListener(),this._context.addEventHandler(this)}_setupMouseWheelZoomListener(){const e=HA.INSTANCE;let t=0,i=mc.getZoomLevel(),n=!1,s=0;const r=l=>{if(this.viewController.emitMouseWheel(l),!this._context.configuration.options.get(76))return;const c=new rC(l);if(e.acceptStandardWheelEvent(c),e.isPhysicalMouseWheel()){if(a(l)){const u=mc.getZoomLevel(),f=c.deltaY>0?1:-1;mc.setZoomLevel(u+f),c.preventDefault(),c.stopPropagation()}}else Date.now()-t>50&&(i=mc.getZoomLevel(),n=a(l),s=0),t=Date.now(),s+=c.deltaY,n&&(mc.setZoomLevel(i+s/5),c.preventDefault(),c.stopPropagation())};this._register(se(this.viewHelper.viewDomNode,Le.MOUSE_WHEEL,r,{capture:!0,passive:!1}));function a(l){return Kt?(l.metaKey||l.ctrlKey)&&!l.shiftKey&&!l.altKey:l.ctrlKey&&!l.metaKey&&!l.shiftKey&&!l.altKey}}dispose(){this._context.removeEventHandler(this),this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),super.dispose()}onConfigurationChanged(e){if(e.hasChanged(146)){const t=this._context.configuration.options.get(146).height;this._height!==t&&(this._height=t,this._mouseDownOperation.onHeightChanged())}return!1}onCursorStateChanged(e){return this._mouseDownOperation.onCursorStateChanged(e),!1}onFocusChanged(e){return!1}getTargetAtClientPoint(e,t){const n=new cfe(e,t).toPageCoordinates(at(this.viewHelper.viewDomNode)),s=LG(this.viewHelper.viewDomNode);if(n.y<s.y||n.y>s.y+s.height||n.x<s.x||n.x>s.x+s.width)return null;const r=xG(this.viewHelper.viewDomNode,s,n);return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),s,n,r,null)}_createMouseTarget(e,t){let i=e.target;if(!this.viewHelper.viewDomNode.contains(i)){const n=aC(this.viewHelper.viewDomNode);n&&(i=n.elementsFromPoint(e.posx,e.posy).find(s=>this.viewHelper.viewDomNode.contains(s)))}return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),e.editorPos,e.pos,e.relativePos,t?i:null)}_getMouseColumn(e){return this.mouseTargetFactory.getMouseColumn(e.relativePos)}_onContextMenu(e,t){this.viewController.emitContextMenu({event:e,target:this._createMouseTarget(e,t)})}_onMouseMove(e){this.mouseTargetFactory.mouseTargetIsWidget(e)||e.preventDefault(),!(this._mouseDownOperation.isActive()||e.timestamp<this.lastMouseLeaveTime)&&this.viewController.emitMouseMove({event:e,target:this._createMouseTarget(e,!0)})}_onMouseLeave(e){this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),this.lastMouseLeaveTime=new Date().getTime(),this.viewController.emitMouseLeave({event:e,target:null})}_onMouseUp(e){this.viewController.emitMouseUp({event:e,target:this._createMouseTarget(e,!0)})}_onMouseDown(e,t){const i=this._createMouseTarget(e,!0),n=i.type===6||i.type===7,s=i.type===2||i.type===3||i.type===4,r=i.type===3,a=this._context.configuration.options.get(110),l=i.type===8||i.type===5,c=i.type===9;let u=e.leftButton||e.middleButton;Kt&&e.leftButton&&e.ctrlKey&&(u=!1);const f=()=>{e.preventDefault(),this.viewHelper.focusTextArea()};if(u&&(n||r&&a))f(),this._mouseDownOperation.start(i.type,e,t);else if(s)e.preventDefault();else if(l){const g=i.detail;u&&this.viewHelper.shouldSuppressMouseDownOnViewZone(g.viewZoneId)&&(f(),this._mouseDownOperation.start(i.type,e,t),e.preventDefault())}else c&&this.viewHelper.shouldSuppressMouseDownOnWidget(i.detail)&&(f(),e.preventDefault());this.viewController.emitMouseDown({event:e,target:i})}}class gWe extends X{constructor(e,t,i,n,s,r){super(),this._context=e,this._viewController=t,this._viewHelper=i,this._mouseTargetFactory=n,this._createMouseTarget=s,this._getMouseColumn=r,this._mouseMoveMonitor=this._register(new JBe(this._viewHelper.viewDomNode)),this._topBottomDragScrolling=this._register(new pWe(this._context,this._viewHelper,this._mouseTargetFactory,(a,l,c)=>this._dispatchMouse(a,l,c))),this._mouseState=new Vz,this._currentSelection=new Ke(1,1,1,1),this._isActive=!1,this._lastMouseEvent=null}dispose(){super.dispose()}isActive(){return this._isActive}_onMouseDownThenMove(e){this._lastMouseEvent=e,this._mouseState.setModifiers(e);const t=this._findMousePosition(e,!1);t&&(this._mouseState.isDragAndDrop?this._viewController.emitMouseDrag({event:e,target:t}):t.type===13&&(t.outsidePosition==="above"||t.outsidePosition==="below")?this._topBottomDragScrolling.start(t,e):(this._topBottomDragScrolling.stop(),this._dispatchMouse(t,!0,1)))}start(e,t,i){this._lastMouseEvent=t,this._mouseState.setStartedOnLineNumbers(e===3),this._mouseState.setStartButtons(t),this._mouseState.setModifiers(t);const n=this._findMousePosition(t,!0);if(!n||!n.position)return;this._mouseState.trySetCount(t.detail,n.position),t.detail=this._mouseState.count;const s=this._context.configuration.options;if(!s.get(92)&&s.get(35)&&!s.get(22)&&!this._mouseState.altKey&&t.detail<2&&!this._isActive&&!this._currentSelection.isEmpty()&&n.type===6&&n.position&&this._currentSelection.containsPosition(n.position)){this._mouseState.isDragAndDrop=!0,this._isActive=!0,this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,i,t.buttons,r=>this._onMouseDownThenMove(r),r=>{const a=this._findMousePosition(this._lastMouseEvent,!1);Hf(r)?this._viewController.emitMouseDropCanceled():this._viewController.emitMouseDrop({event:this._lastMouseEvent,target:a?this._createMouseTarget(this._lastMouseEvent,!0):null}),this._stop()});return}this._mouseState.isDragAndDrop=!1,this._dispatchMouse(n,t.shiftKey,1),this._isActive||(this._isActive=!0,this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,i,t.buttons,r=>this._onMouseDownThenMove(r),()=>this._stop()))}_stop(){this._isActive=!1,this._topBottomDragScrolling.stop()}onHeightChanged(){this._mouseMoveMonitor.stopMonitoring()}onPointerUp(){this._mouseMoveMonitor.stopMonitoring()}onCursorStateChanged(e){this._currentSelection=e.selections[0]}_getPositionOutsideEditor(e){const t=e.editorPos,i=this._context.viewModel,n=this._context.viewLayout,s=this._getMouseColumn(e);if(e.posy<t.y){const a=t.y-e.posy,l=Math.max(n.getCurrentScrollTop()-a,0),c=yS.getZoneAtCoord(this._context,l);if(c){const f=this._helpPositionJumpOverViewZone(c);if(f)return mr.createOutsideEditor(s,f,"above",a)}const u=n.getLineNumberAtVerticalOffset(l);return mr.createOutsideEditor(s,new G(u,1),"above",a)}if(e.posy>t.y+t.height){const a=e.posy-t.y-t.height,l=n.getCurrentScrollTop()+e.relativePos.y,c=yS.getZoneAtCoord(this._context,l);if(c){const f=this._helpPositionJumpOverViewZone(c);if(f)return mr.createOutsideEditor(s,f,"below",a)}const u=n.getLineNumberAtVerticalOffset(l);return mr.createOutsideEditor(s,new G(u,i.getLineMaxColumn(u)),"below",a)}const r=n.getLineNumberAtVerticalOffset(n.getCurrentScrollTop()+e.relativePos.y);if(e.posx<t.x){const a=t.x-e.posx;return mr.createOutsideEditor(s,new G(r,1),"left",a)}if(e.posx>t.x+t.width){const a=e.posx-t.x-t.width;return mr.createOutsideEditor(s,new G(r,i.getLineMaxColumn(r)),"right",a)}return null}_findMousePosition(e,t){const i=this._getPositionOutsideEditor(e);if(i)return i;const n=this._createMouseTarget(e,t);if(!n.position)return null;if(n.type===8||n.type===5){const r=this._helpPositionJumpOverViewZone(n.detail);if(r)return mr.createViewZone(n.type,n.element,n.mouseColumn,r,n.detail)}return n}_helpPositionJumpOverViewZone(e){const t=new G(this._currentSelection.selectionStartLineNumber,this._currentSelection.selectionStartColumn),i=e.positionBefore,n=e.positionAfter;return i&&n?i.isBefore(t)?i:n:null}_dispatchMouse(e,t,i){e.position&&this._viewController.dispatchMouse({position:e.position,mouseColumn:e.mouseColumn,startedOnLineNumbers:this._mouseState.startedOnLineNumbers,revealType:i,inSelectionMode:t,mouseDownCount:this._mouseState.count,altKey:this._mouseState.altKey,ctrlKey:this._mouseState.ctrlKey,metaKey:this._mouseState.metaKey,shiftKey:this._mouseState.shiftKey,leftButton:this._mouseState.leftButton,middleButton:this._mouseState.middleButton,onInjectedText:e.type===6&&e.detail.injectedText!==null})}}class pWe extends X{constructor(e,t,i,n){super(),this._context=e,this._viewHelper=t,this._mouseTargetFactory=i,this._dispatchMouse=n,this._operation=null}dispose(){super.dispose(),this.stop()}start(e,t){this._operation?this._operation.setPosition(e,t):this._operation=new mWe(this._context,this._viewHelper,this._mouseTargetFactory,this._dispatchMouse,e,t)}stop(){this._operation&&(this._operation.dispose(),this._operation=null)}}class mWe extends X{constructor(e,t,i,n,s,r){super(),this._context=e,this._viewHelper=t,this._mouseTargetFactory=i,this._dispatchMouse=n,this._position=s,this._mouseEvent=r,this._lastTime=Date.now(),this._animationFrameDisposable=al(at(r.browserEvent),()=>this._execute())}dispose(){this._animationFrameDisposable.dispose(),super.dispose()}setPosition(e,t){this._position=e,this._mouseEvent=t}_tick(){const e=Date.now(),t=e-this._lastTime;return this._lastTime=e,t}_getScrollSpeed(){const e=this._context.configuration.options.get(67),t=this._context.configuration.options.get(146).height/e,i=this._position.outsideDistance/e;return i<=1.5?Math.max(30,t*(1+i)):i<=3?Math.max(60,t*(2+i)):Math.max(200,t*(7+i))}_execute(){const e=this._context.configuration.options.get(67),t=this._getScrollSpeed(),i=this._tick(),n=t*(i/1e3)*e,s=this._position.outsidePosition==="above"?-n:n;this._context.viewModel.viewLayout.deltaScrollNow(0,s),this._viewHelper.renderNow();const r=this._context.viewLayout.getLinesViewportData(),a=this._position.outsidePosition==="above"?r.startLineNumber:r.endLineNumber;let l;{const c=LG(this._viewHelper.viewDomNode),u=this._context.configuration.options.get(146).horizontalScrollbarHeight,f=new $4(this._mouseEvent.pos.x,c.y+c.height-u-.1),g=xG(this._viewHelper.viewDomNode,c,f);l=this._mouseTargetFactory.createMouseTarget(this._viewHelper.getLastRenderData(),c,f,g,null)}(!l.position||l.position.lineNumber!==a)&&(this._position.outsidePosition==="above"?l=mr.createOutsideEditor(this._position.mouseColumn,new G(a,1),"above",this._position.outsideDistance):l=mr.createOutsideEditor(this._position.mouseColumn,new G(a,this._context.viewModel.getLineMaxColumn(a)),"below",this._position.outsideDistance)),this._dispatchMouse(l,!0,2),this._animationFrameDisposable=al(at(l.element),()=>this._execute())}}const F2=class F2{get altKey(){return this._altKey}get ctrlKey(){return this._ctrlKey}get metaKey(){return this._metaKey}get shiftKey(){return this._shiftKey}get leftButton(){return this._leftButton}get middleButton(){return this._middleButton}get startedOnLineNumbers(){return this._startedOnLineNumbers}constructor(){this._altKey=!1,this._ctrlKey=!1,this._metaKey=!1,this._shiftKey=!1,this._leftButton=!1,this._middleButton=!1,this._startedOnLineNumbers=!1,this._lastMouseDownPosition=null,this._lastMouseDownPositionEqualCount=0,this._lastMouseDownCount=0,this._lastSetMouseDownCountTime=0,this.isDragAndDrop=!1}get count(){return this._lastMouseDownCount}setModifiers(e){this._altKey=e.altKey,this._ctrlKey=e.ctrlKey,this._metaKey=e.metaKey,this._shiftKey=e.shiftKey}setStartButtons(e){this._leftButton=e.leftButton,this._middleButton=e.middleButton}setStartedOnLineNumbers(e){this._startedOnLineNumbers=e}trySetCount(e,t){const i=new Date().getTime();i-this._lastSetMouseDownCountTime>F2.CLEAR_MOUSE_DOWN_COUNT_TIME&&(e=1),this._lastSetMouseDownCountTime=i,e>this._lastMouseDownCount+1&&(e=this._lastMouseDownCount+1),this._lastMouseDownPosition&&this._lastMouseDownPosition.equals(t)?this._lastMouseDownPositionEqualCount++:this._lastMouseDownPositionEqualCount=1,this._lastMouseDownPosition=t,this._lastMouseDownCount=Math.min(e,this._lastMouseDownPositionEqualCount)}};F2.CLEAR_MOUSE_DOWN_COUNT_TIME=400;let Vz=F2;const r1=class r1{constructor(e,t,i,n,s){this.value=e,this.selectionStart=t,this.selectionEnd=i,this.selection=n,this.newlineCountBeforeSelection=s}toString(){return`[ <${this.value}>, selectionStart: ${this.selectionStart}, selectionEnd: ${this.selectionEnd}]`}static readFromTextArea(e,t){const i=e.getValue(),n=e.getSelectionStart(),s=e.getSelectionEnd();let r;if(t){const a=i.substring(0,n),l=t.value.substring(0,t.selectionStart);a===l&&(r=t.newlineCountBeforeSelection)}return new r1(i,n,s,null,r)}collapseSelection(){return this.selectionStart===this.value.length?this:new r1(this.value,this.value.length,this.value.length,null,void 0)}writeToTextArea(e,t,i){t.setValue(e,this.value),i&&t.setSelectionRange(e,this.selectionStart,this.selectionEnd)}deduceEditorPosition(e){var n,s,r,a;if(e<=this.selectionStart){const l=this.value.substring(e,this.selectionStart);return this._finishDeduceEditorPosition(((n=this.selection)==null?void 0:n.getStartPosition())??null,l,-1)}if(e>=this.selectionEnd){const l=this.value.substring(this.selectionEnd,e);return this._finishDeduceEditorPosition(((s=this.selection)==null?void 0:s.getEndPosition())??null,l,1)}const t=this.value.substring(this.selectionStart,e);if(t.indexOf("")===-1)return this._finishDeduceEditorPosition(((r=this.selection)==null?void 0:r.getStartPosition())??null,t,1);const i=this.value.substring(e,this.selectionEnd);return this._finishDeduceEditorPosition(((a=this.selection)==null?void 0:a.getEndPosition())??null,i,-1)}_finishDeduceEditorPosition(e,t,i){let n=0,s=-1;for(;(s=t.indexOf(`
`,s+1))!==-1;)n++;return[e,i*t.length,n]}static deduceInput(e,t,i){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};const n=Math.min(Om(e.value,t.value),e.selectionStart,t.selectionStart),s=Math.min(gA(e.value,t.value),e.value.length-e.selectionEnd,t.value.length-t.selectionEnd);e.value.substring(n,e.value.length-s);const r=t.value.substring(n,t.value.length-s),a=e.selectionStart-n,l=e.selectionEnd-n,c=t.selectionStart-n,u=t.selectionEnd-n;if(c===u){const g=e.selectionStart-n;return{text:r,replacePrevCharCnt:g,replaceNextCharCnt:0,positionDelta:0}}const f=l-a;return{text:r,replacePrevCharCnt:f,replaceNextCharCnt:0,positionDelta:0}}static deduceAndroidCompositionInput(e,t){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};if(e.value===t.value)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:t.selectionEnd-e.selectionEnd};const i=Math.min(Om(e.value,t.value),e.selectionEnd),n=Math.min(gA(e.value,t.value),e.value.length-e.selectionEnd),s=e.value.substring(i,e.value.length-n),r=t.value.substring(i,t.value.length-n);e.selectionStart-i;const a=e.selectionEnd-i;t.selectionStart-i;const l=t.selectionEnd-i;return{text:r,replacePrevCharCnt:a,replaceNextCharCnt:s.length-a,positionDelta:l-r.length}}};r1.EMPTY=new r1("",0,0,null,void 0);let _r=r1;class Ww{static _getPageOfLine(e,t){return Math.floor((e-1)/t)}static _getRangeForPage(e,t){const i=e*t,n=i+1,s=i+t;return new M(n,1,s+1,1)}static fromEditorSelection(e,t,i,n){const r=Ww._getPageOfLine(t.startLineNumber,i),a=Ww._getRangeForPage(r,i),l=Ww._getPageOfLine(t.endLineNumber,i),c=Ww._getRangeForPage(l,i);let u=a.intersectRanges(new M(1,1,t.startLineNumber,t.startColumn));if(n&&e.getValueLengthInRange(u,1)>500){const S=e.modifyPosition(u.getEndPosition(),-500);u=M.fromPositions(S,u.getEndPosition())}const f=e.getValueInRange(u,1),g=e.getLineCount(),p=e.getLineMaxColumn(g);let _=c.intersectRanges(new M(t.endLineNumber,t.endColumn,g,p));if(n&&e.getValueLengthInRange(_,1)>500){const S=e.modifyPosition(_.getStartPosition(),500);_=M.fromPositions(_.getStartPosition(),S)}const b=e.getValueInRange(_,1);let y;if(r===l||r+1===l)y=e.getValueInRange(t,1);else{const S=a.intersectRanges(t),L=c.intersectRanges(t);y=e.getValueInRange(S,1)+""+e.getValueInRange(L,1)}return n&&y.length>2*500&&(y=y.substring(0,500)+""+y.substring(y.length-500,y.length)),new _r(f+y+b,f.length,f.length+y.length,t,u.endLineNumber-u.startLineNumber)}}var _We=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},coe=function(o,e){return function(t,i){e(t,i,o)}},AP;(function(o){o.Tap="-monaco-textarea-synthetic-tap"})(AP||(AP={}));const zz={forceCopyWithSyntaxHighlighting:!1},B2=class B2{constructor(){this._lastState=null}set(e,t){this._lastState={lastCopiedValue:e,data:t}}get(e){return this._lastState&&this._lastState.lastCopiedValue===e?this._lastState.data:(this._lastState=null,null)}};B2.INSTANCE=new B2;let tE=B2;class vWe{constructor(){this._lastTypeTextLength=0}handleCompositionUpdate(e){e=e||"";const t={text:e,replacePrevCharCnt:this._lastTypeTextLength,replaceNextCharCnt:0,positionDelta:0};return this._lastTypeTextLength=e.length,t}}let Uz=class extends X{get textAreaState(){return this._textAreaState}constructor(e,t,i,n,s,r){super(),this._host=e,this._textArea=t,this._OS=i,this._browser=n,this._accessibilityService=s,this._logService=r,this._onFocus=this._register(new Y),this.onFocus=this._onFocus.event,this._onBlur=this._register(new Y),this.onBlur=this._onBlur.event,this._onKeyDown=this._register(new Y),this.onKeyDown=this._onKeyDown.event,this._onKeyUp=this._register(new Y),this.onKeyUp=this._onKeyUp.event,this._onCut=this._register(new Y),this.onCut=this._onCut.event,this._onPaste=this._register(new Y),this.onPaste=this._onPaste.event,this._onType=this._register(new Y),this.onType=this._onType.event,this._onCompositionStart=this._register(new Y),this.onCompositionStart=this._onCompositionStart.event,this._onCompositionUpdate=this._register(new Y),this.onCompositionUpdate=this._onCompositionUpdate.event,this._onCompositionEnd=this._register(new Y),this.onCompositionEnd=this._onCompositionEnd.event,this._onSelectionChangeRequest=this._register(new Y),this.onSelectionChangeRequest=this._onSelectionChangeRequest.event,this._asyncFocusGainWriteScreenReaderContent=this._register(new Xs),this._asyncTriggerCut=this._register(new Oi(()=>this._onCut.fire(),0)),this._textAreaState=_r.EMPTY,this._selectionChangeListener=null,this._accessibilityService.isScreenReaderOptimized()&&this.writeNativeTextAreaContent("ctor"),this._register(Ee.runAndSubscribe(this._accessibilityService.onDidChangeScreenReaderOptimized,()=>{this._accessibilityService.isScreenReaderOptimized()&&!this._asyncFocusGainWriteScreenReaderContent.value?this._asyncFocusGainWriteScreenReaderContent.value=this._register(new Oi(()=>this.writeNativeTextAreaContent("asyncFocusGain"),0)):this._asyncFocusGainWriteScreenReaderContent.clear()})),this._hasFocus=!1,this._currentComposition=null;let a=null;this._register(this._textArea.onKeyDown(l=>{const c=new Zi(l);(c.keyCode===114||this._currentComposition&&c.keyCode===1)&&c.stopPropagation(),c.equals(9)&&c.preventDefault(),a=c,this._onKeyDown.fire(c)})),this._register(this._textArea.onKeyUp(l=>{const c=new Zi(l);this._onKeyUp.fire(c)})),this._register(this._textArea.onCompositionStart(l=>{const c=new vWe;if(this._currentComposition){this._currentComposition=c;return}if(this._currentComposition=c,this._OS===2&&a&&a.equals(114)&&this._textAreaState.selectionStart===this._textAreaState.selectionEnd&&this._textAreaState.selectionStart>0&&this._textAreaState.value.substr(this._textAreaState.selectionStart-1,1)===l.data&&(a.code==="ArrowRight"||a.code==="ArrowLeft")){c.handleCompositionUpdate("x"),this._onCompositionStart.fire({data:l.data});return}if(this._browser.isAndroid){this._onCompositionStart.fire({data:l.data});return}this._onCompositionStart.fire({data:l.data})})),this._register(this._textArea.onCompositionUpdate(l=>{const c=this._currentComposition;if(!c)return;if(this._browser.isAndroid){const f=_r.readFromTextArea(this._textArea,this._textAreaState),g=_r.deduceAndroidCompositionInput(this._textAreaState,f);this._textAreaState=f,this._onType.fire(g),this._onCompositionUpdate.fire(l);return}const u=c.handleCompositionUpdate(l.data);this._textAreaState=_r.readFromTextArea(this._textArea,this._textAreaState),this._onType.fire(u),this._onCompositionUpdate.fire(l)})),this._register(this._textArea.onCompositionEnd(l=>{const c=this._currentComposition;if(!c)return;if(this._currentComposition=null,this._browser.isAndroid){const f=_r.readFromTextArea(this._textArea,this._textAreaState),g=_r.deduceAndroidCompositionInput(this._textAreaState,f);this._textAreaState=f,this._onType.fire(g),this._onCompositionEnd.fire();return}const u=c.handleCompositionUpdate(l.data);this._textAreaState=_r.readFromTextArea(this._textArea,this._textAreaState),this._onType.fire(u),this._onCompositionEnd.fire()})),this._register(this._textArea.onInput(l=>{if(this._textArea.setIgnoreSelectionChangeTime("received input event"),this._currentComposition)return;const c=_r.readFromTextArea(this._textArea,this._textAreaState),u=_r.deduceInput(this._textAreaState,c,this._OS===2);u.replacePrevCharCnt===0&&u.text.length===1&&(qs(u.text.charCodeAt(0))||u.text.charCodeAt(0)===127)||(this._textAreaState=c,(u.text!==""||u.replacePrevCharCnt!==0||u.replaceNextCharCnt!==0||u.positionDelta!==0)&&this._onType.fire(u))})),this._register(this._textArea.onCut(l=>{this._textArea.setIgnoreSelectionChangeTime("received cut event"),this._ensureClipboardGetsEditorSelection(l),this._asyncTriggerCut.schedule()})),this._register(this._textArea.onCopy(l=>{this._ensureClipboardGetsEditorSelection(l)})),this._register(this._textArea.onPaste(l=>{if(this._textArea.setIgnoreSelectionChangeTime("received paste event"),l.preventDefault(),!l.clipboardData)return;let[c,u]=$z.getTextData(l.clipboardData);c&&(u=u||tE.INSTANCE.get(c),this._onPaste.fire({text:c,metadata:u}))})),this._register(this._textArea.onFocus(()=>{const l=this._hasFocus;this._setHasFocus(!0),this._accessibilityService.isScreenReaderOptimized()&&this._browser.isSafari&&!l&&this._hasFocus&&(this._asyncFocusGainWriteScreenReaderContent.value||(this._asyncFocusGainWriteScreenReaderContent.value=new Oi(()=>this.writeNativeTextAreaContent("asyncFocusGain"),0)),this._asyncFocusGainWriteScreenReaderContent.value.schedule())})),this._register(this._textArea.onBlur(()=>{this._currentComposition&&(this._currentComposition=null,this.writeNativeTextAreaContent("blurWithoutCompositionEnd"),this._onCompositionEnd.fire()),this._setHasFocus(!1)})),this._register(this._textArea.onSyntheticTap(()=>{this._browser.isAndroid&&this._currentComposition&&(this._currentComposition=null,this.writeNativeTextAreaContent("tapWithoutCompositionEnd"),this._onCompositionEnd.fire())}))}_installSelectionChangeListener(){let e=0;return se(this._textArea.ownerDocument,"selectionchange",t=>{if(tm.onSelectionChange(),!this._hasFocus||this._currentComposition||!this._browser.isChrome)return;const i=Date.now(),n=i-e;if(e=i,n<5)return;const s=i-this._textArea.getIgnoreSelectionChangeTime();if(this._textArea.resetSelectionChangeTime(),s<100||!this._textAreaState.selection)return;const r=this._textArea.getValue();if(this._textAreaState.value!==r)return;const a=this._textArea.getSelectionStart(),l=this._textArea.getSelectionEnd();if(this._textAreaState.selectionStart===a&&this._textAreaState.selectionEnd===l)return;const c=this._textAreaState.deduceEditorPosition(a),u=this._host.deduceModelPosition(c[0],c[1],c[2]),f=this._textAreaState.deduceEditorPosition(l),g=this._host.deduceModelPosition(f[0],f[1],f[2]),p=new Ke(u.lineNumber,u.column,g.lineNumber,g.column);this._onSelectionChangeRequest.fire(p)})}dispose(){super.dispose(),this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null)}focusTextArea(){this._setHasFocus(!0),this.refreshFocusState()}isFocused(){return this._hasFocus}refreshFocusState(){this._setHasFocus(this._textArea.hasFocus())}_setHasFocus(e){this._hasFocus!==e&&(this._hasFocus=e,this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null),this._hasFocus&&(this._selectionChangeListener=this._installSelectionChangeListener()),this._hasFocus&&this.writeNativeTextAreaContent("focusgain"),this._hasFocus?this._onFocus.fire():this._onBlur.fire())}_setAndWriteTextAreaState(e,t){this._hasFocus||(t=t.collapseSelection()),t.writeToTextArea(e,this._textArea,this._hasFocus),this._textAreaState=t}writeNativeTextAreaContent(e){!this._accessibilityService.isScreenReaderOptimized()&&e==="render"||this._currentComposition||(this._logService.trace(`writeTextAreaState(reason: ${e})`),this._setAndWriteTextAreaState(e,this._host.getScreenReaderContent()))}_ensureClipboardGetsEditorSelection(e){const t=this._host.getDataToCopy(),i={version:1,isFromEmptySelection:t.isFromEmptySelection,multicursorText:t.multicursorText,mode:t.mode};tE.INSTANCE.set(this._browser.isFirefox?t.text.replace(/\r\n/g,`
`):t.text,i),e.preventDefault(),e.clipboardData&&$z.setTextData(e.clipboardData,t.text,t.html,i)}};Uz=_We([coe(4,dl),coe(5,Oo)],Uz);const $z={getTextData(o){const e=o.getData(ss.text);let t=null;const i=o.getData("vscode-editor-data");if(typeof i=="string")try{t=JSON.parse(i),t.version!==1&&(t=null)}catch{}return e.length===0&&t===null&&o.files.length>0?[Array.prototype.slice.call(o.files,0).map(s=>s.name).join(`
`),null]:[e,t]},setTextData(o,e,t,i){o.setData(ss.text,e),typeof t=="string"&&o.setData("text/html",t),o.setData("vscode-editor-data",JSON.stringify(i))}};class bWe extends X{get ownerDocument(){return this._actual.ownerDocument}constructor(e){super(),this._actual=e,this.onKeyDown=this._register(new Zt(this._actual,"keydown")).event,this.onKeyUp=this._register(new Zt(this._actual,"keyup")).event,this.onCompositionStart=this._register(new Zt(this._actual,"compositionstart")).event,this.onCompositionUpdate=this._register(new Zt(this._actual,"compositionupdate")).event,this.onCompositionEnd=this._register(new Zt(this._actual,"compositionend")).event,this.onBeforeInput=this._register(new Zt(this._actual,"beforeinput")).event,this.onInput=this._register(new Zt(this._actual,"input")).event,this.onCut=this._register(new Zt(this._actual,"cut")).event,this.onCopy=this._register(new Zt(this._actual,"copy")).event,this.onPaste=this._register(new Zt(this._actual,"paste")).event,this.onFocus=this._register(new Zt(this._actual,"focus")).event,this.onBlur=this._register(new Zt(this._actual,"blur")).event,this._onSyntheticTap=this._register(new Y),this.onSyntheticTap=this._onSyntheticTap.event,this._ignoreSelectionChangeTime=0,this._register(this.onKeyDown(()=>tm.onKeyDown())),this._register(this.onBeforeInput(()=>tm.onBeforeInput())),this._register(this.onInput(()=>tm.onInput())),this._register(this.onKeyUp(()=>tm.onKeyUp())),this._register(se(this._actual,AP.Tap,()=>this._onSyntheticTap.fire()))}hasFocus(){const e=aC(this._actual);return e?e.activeElement===this._actual:this._actual.isConnected?Mo()===this._actual:!1}setIgnoreSelectionChangeTime(e){this._ignoreSelectionChangeTime=Date.now()}getIgnoreSelectionChangeTime(){return this._ignoreSelectionChangeTime}resetSelectionChangeTime(){this._ignoreSelectionChangeTime=0}getValue(){return this._actual.value}setValue(e,t){const i=this._actual;i.value!==t&&(this.setIgnoreSelectionChangeTime("setValue"),i.value=t)}getSelectionStart(){return this._actual.selectionDirection==="backward"?this._actual.selectionEnd:this._actual.selectionStart}getSelectionEnd(){return this._actual.selectionDirection==="backward"?this._actual.selectionStart:this._actual.selectionEnd}setSelectionRange(e,t,i){const n=this._actual;let s=null;const r=aC(n);r?s=r.activeElement:s=Mo();const a=at(s),l=s===n,c=n.selectionStart,u=n.selectionEnd;if(l&&c===t&&u===i){Lc&&a.parent!==a&&n.focus();return}if(l){this.setIgnoreSelectionChangeTime("setSelectionRange"),n.setSelectionRange(t,i),Lc&&a.parent!==a&&n.focus();return}try{const f=tEe(n);this.setIgnoreSelectionChangeTime("setSelectionRange"),n.focus(),n.setSelectionRange(t,i),iEe(n,f)}catch{}}}class CWe extends DG{constructor(e,t,i){super(e,t,i),this._register(Jo.addTarget(this.viewHelper.linesContentDomNode)),this._register(se(this.viewHelper.linesContentDomNode,tn.Tap,s=>this.onTap(s))),this._register(se(this.viewHelper.linesContentDomNode,tn.Change,s=>this.onChange(s))),this._register(se(this.viewHelper.linesContentDomNode,tn.Contextmenu,s=>this._onContextMenu(new qm(s,!1,this.viewHelper.viewDomNode),!1))),this._lastPointerType="mouse",this._register(se(this.viewHelper.linesContentDomNode,"pointerdown",s=>{const r=s.pointerType;if(r==="mouse"){this._lastPointerType="mouse";return}else r==="touch"?this._lastPointerType="touch":this._lastPointerType="pen"}));const n=new QBe(this.viewHelper.viewDomNode);this._register(n.onPointerMove(this.viewHelper.viewDomNode,s=>this._onMouseMove(s))),this._register(n.onPointerUp(this.viewHelper.viewDomNode,s=>this._onMouseUp(s))),this._register(n.onPointerLeave(this.viewHelper.viewDomNode,s=>this._onMouseLeave(s))),this._register(n.onPointerDown(this.viewHelper.viewDomNode,(s,r)=>this._onMouseDown(s,r)))}onTap(e){!e.initialTarget||!this.viewHelper.linesContentDomNode.contains(e.initialTarget)||(e.preventDefault(),this.viewHelper.focusTextArea(),this._dispatchGesture(e,!1))}onChange(e){this._lastPointerType==="touch"&&this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX,-e.translationY),this._lastPointerType==="pen"&&this._dispatchGesture(e,!0)}_dispatchGesture(e,t){const i=this._createMouseTarget(new qm(e,!1,this.viewHelper.viewDomNode),!1);i.position&&this.viewController.dispatchMouse({position:i.position,mouseColumn:i.position.column,startedOnLineNumbers:!1,revealType:1,mouseDownCount:e.tapCount,inSelectionMode:t,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,leftButton:!1,middleButton:!1,onInjectedText:i.type===6&&i.detail.injectedText!==null})}_onMouseDown(e,t){e.browserEvent.pointerType!=="touch"&&super._onMouseDown(e,t)}}class yWe extends DG{constructor(e,t,i){super(e,t,i),this._register(Jo.addTarget(this.viewHelper.linesContentDomNode)),this._register(se(this.viewHelper.linesContentDomNode,tn.Tap,n=>this.onTap(n))),this._register(se(this.viewHelper.linesContentDomNode,tn.Change,n=>this.onChange(n))),this._register(se(this.viewHelper.linesContentDomNode,tn.Contextmenu,n=>this._onContextMenu(new qm(n,!1,this.viewHelper.viewDomNode),!1)))}onTap(e){e.preventDefault(),this.viewHelper.focusTextArea();const t=this._createMouseTarget(new qm(e,!1,this.viewHelper.viewDomNode),!1);if(t.position){const i=document.createEvent("CustomEvent");i.initEvent(AP.Tap,!1,!0),this.viewHelper.dispatchTextAreaEvent(i),this.viewController.moveTo(t.position,1)}}onChange(e){this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX,-e.translationY)}}class wWe extends X{constructor(e,t,i){super(),(hu||qLe&&Lle)&&Wq.pointerEvents?this.handler=this._register(new CWe(e,t,i)):Vi.TouchEvent?this.handler=this._register(new yWe(e,t,i)):this.handler=this._register(new DG(e,t,i))}getTargetAtClientPoint(e,t){return this.handler.getTargetAtClientPoint(e,t)}}class VC extends bI{}const W2=class W2 extends VC{constructor(e){super(),this._context=e,this._readConfig(),this._lastCursorModelPosition=new G(1,1),this._renderResult=null,this._activeLineNumber=1,this._context.addEventHandler(this)}_readConfig(){const e=this._context.configuration.options;this._lineHeight=e.get(67);const t=e.get(68);this._renderLineNumbers=t.renderType,this._renderCustomLineNumbers=t.renderFn,this._renderFinalNewline=e.get(96);const i=e.get(146);this._lineNumbersLeft=i.lineNumbersLeft,this._lineNumbersWidth=i.lineNumbersWidth}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return this._readConfig(),!0}onCursorStateChanged(e){const t=e.selections[0].getPosition();this._lastCursorModelPosition=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(t);let i=!1;return this._activeLineNumber!==t.lineNumber&&(this._activeLineNumber=t.lineNumber,i=!0),(this._renderLineNumbers===2||this._renderLineNumbers===3)&&(i=!0),i}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}onDecorationsChanged(e){return e.affectsLineNumber}_getLineRenderLineNumber(e){const t=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new G(e,1));if(t.column!==1)return"";const i=t.lineNumber;if(this._renderCustomLineNumbers)return this._renderCustomLineNumbers(i);if(this._renderLineNumbers===2){const n=Math.abs(this._lastCursorModelPosition.lineNumber-i);return n===0?'<span class="relative-current-line-number">'+i+"</span>":String(n)}if(this._renderLineNumbers===3){if(this._lastCursorModelPosition.lineNumber===i||i%10===0)return String(i);const n=this._context.viewModel.getLineCount();return i===n?String(i):""}return String(i)}prepareRender(e){if(this._renderLineNumbers===0){this._renderResult=null;return}const t=Qr?this._lineHeight%2===0?" lh-even":" lh-odd":"",i=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,s=this._context.viewModel.getDecorationsInViewport(e.visibleRange).filter(c=>!!c.options.lineNumberClassName);s.sort((c,u)=>M.compareRangesUsingEnds(c.range,u.range));let r=0;const a=this._context.viewModel.getLineCount(),l=[];for(let c=i;c<=n;c++){const u=c-i;let f=this._getLineRenderLineNumber(c),g="";for(;r<s.length&&s[r].range.endLineNumber<c;)r++;for(let p=r;p<s.length;p++){const{range:_,options:b}=s[p];_.startLineNumber<=c&&(g+=" "+b.lineNumberClassName)}if(!f&&!g){l[u]="";continue}c===a&&this._context.viewModel.getLineLength(c)===0&&(this._renderFinalNewline==="off"&&(f=""),this._renderFinalNewline==="dimmed"&&(g+=" dimmed-line-number")),c===this._activeLineNumber&&(g+=" active-line-number"),l[u]=`<div class="${W2.CLASS_NAME}${t}${g}" style="left:${this._lineNumbersLeft}px;width:${this._lineNumbersWidth}px;">${f}</div>`}this._renderResult=l}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}};W2.CLASS_NAME="line-numbers";let PP=W2;Nc((o,e)=>{const t=o.getColor(h2e),i=o.getColor(k2e);i?e.addRule(`.monaco-editor .line-numbers.dimmed-line-number { color: ${i}; }`):t&&e.addRule(`.monaco-editor .line-numbers.dimmed-line-number { color: ${t.transparent(.4)}; }`)});const a1=class a1 extends hl{constructor(e){super(e);const t=this._context.configuration.options,i=t.get(146);this._canUseLayerHinting=!t.get(32),this._contentLeft=i.contentLeft,this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,this._domNode=ki(document.createElement("div")),this._domNode.setClassName(a1.OUTER_CLASS_NAME),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._glyphMarginBackgroundDomNode=ki(document.createElement("div")),this._glyphMarginBackgroundDomNode.setClassName(a1.CLASS_NAME),this._domNode.appendChild(this._glyphMarginBackgroundDomNode)}dispose(){super.dispose()}getDomNode(){return this._domNode}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(146);return this._canUseLayerHinting=!t.get(32),this._contentLeft=i.contentLeft,this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollTopChanged}prepareRender(e){}render(e){this._domNode.setLayerHinting(this._canUseLayerHinting),this._domNode.setContain("strict");const t=e.scrollTop-e.bigNumbersDelta;this._domNode.setTop(-t);const i=Math.min(e.scrollHeight,1e6);this._domNode.setHeight(i),this._domNode.setWidth(this._contentLeft),this._glyphMarginBackgroundDomNode.setLeft(this._glyphMarginLeft),this._glyphMarginBackgroundDomNode.setWidth(this._glyphMarginWidth),this._glyphMarginBackgroundDomNode.setHeight(i)}};a1.CLASS_NAME="glyph-margin",a1.OUTER_CLASS_NAME="margin";let OP=a1;const N1="monaco-mouse-cursor-text";var SWe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},doe=function(o,e){return function(t,i){e(t,i,o)}};class LWe{constructor(e,t,i,n,s){this._context=e,this.modelLineNumber=t,this.distanceToModelLineStart=i,this.widthOfHiddenLineTextBefore=n,this.distanceToModelLineEnd=s,this._visibleTextAreaBrand=void 0,this.startPosition=null,this.endPosition=null,this.visibleTextareaStart=null,this.visibleTextareaEnd=null,this._previousPresentation=null}prepareRender(e){const t=new G(this.modelLineNumber,this.distanceToModelLineStart+1),i=new G(this.modelLineNumber,this._context.viewModel.model.getLineMaxColumn(this.modelLineNumber)-this.distanceToModelLineEnd);this.startPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(t),this.endPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(i),this.startPosition.lineNumber===this.endPosition.lineNumber?(this.visibleTextareaStart=e.visibleRangeForPosition(this.startPosition),this.visibleTextareaEnd=e.visibleRangeForPosition(this.endPosition)):(this.visibleTextareaStart=null,this.visibleTextareaEnd=null)}definePresentation(e){return this._previousPresentation||(e?this._previousPresentation=e:this._previousPresentation={foreground:1,italic:!1,bold:!1,underline:!1,strikethrough:!1}),this._previousPresentation}}const q7=Lc;let jz=class extends hl{constructor(e,t,i,n,s){super(e),this._keybindingService=n,this._instantiationService=s,this._primaryCursorPosition=new G(1,1),this._primaryCursorVisibleRange=null,this._viewController=t,this._visibleRangeProvider=i,this._scrollLeft=0,this._scrollTop=0;const r=this._context.configuration.options,a=r.get(146);this._setAccessibilityOptions(r),this._contentLeft=a.contentLeft,this._contentWidth=a.contentWidth,this._contentHeight=a.height,this._fontInfo=r.get(50),this._lineHeight=r.get(67),this._emptySelectionClipboard=r.get(37),this._copyWithSyntaxHighlighting=r.get(25),this._visibleTextArea=null,this._selections=[new Ke(1,1,1,1)],this._modelSelections=[new Ke(1,1,1,1)],this._lastRenderPosition=null,this.textArea=ki(document.createElement("textarea")),bu.write(this.textArea,7),this.textArea.setClassName(`inputarea ${N1}`),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off");const{tabSize:l}=this._context.viewModel.model.getOptions();this.textArea.domNode.style.tabSize=`${l*this._fontInfo.spaceWidth}px`,this.textArea.setAttribute("autocorrect","off"),this.textArea.setAttribute("autocapitalize","off"),this.textArea.setAttribute("autocomplete","off"),this.textArea.setAttribute("spellcheck","false"),this.textArea.setAttribute("aria-label",this._getAriaLabel(r)),this.textArea.setAttribute("aria-required",r.get(5)?"true":"false"),this.textArea.setAttribute("tabindex",String(r.get(125))),this.textArea.setAttribute("role","textbox"),this.textArea.setAttribute("aria-roledescription",v("editor","editor")),this.textArea.setAttribute("aria-multiline","true"),this.textArea.setAttribute("aria-autocomplete",r.get(92)?"none":"both"),this._ensureReadOnlyAttribute(),this.textAreaCover=ki(document.createElement("div")),this.textAreaCover.setPosition("absolute");const c={getLineCount:()=>this._context.viewModel.getLineCount(),getLineMaxColumn:g=>this._context.viewModel.getLineMaxColumn(g),getValueInRange:(g,p)=>this._context.viewModel.getValueInRange(g,p),getValueLengthInRange:(g,p)=>this._context.viewModel.getValueLengthInRange(g,p),modifyPosition:(g,p)=>this._context.viewModel.modifyPosition(g,p)},u={getDataToCopy:()=>{const g=this._context.viewModel.getPlainTextToCopy(this._modelSelections,this._emptySelectionClipboard,Po),p=this._context.viewModel.model.getEOL(),_=this._emptySelectionClipboard&&this._modelSelections.length===1&&this._modelSelections[0].isEmpty(),b=Array.isArray(g)?g:null,y=Array.isArray(g)?g.join(p):g;let S,L=null;if(zz.forceCopyWithSyntaxHighlighting||this._copyWithSyntaxHighlighting&&y.length<65536){const x=this._context.viewModel.getRichTextToCopy(this._modelSelections,this._emptySelectionClipboard);x&&(S=x.html,L=x.mode)}return{isFromEmptySelection:_,multicursorText:b,text:y,html:S,mode:L}},getScreenReaderContent:()=>{if(this._accessibilitySupport===1){const g=this._selections[0];if(Kt&&g.isEmpty()){const _=g.getStartPosition();let b=this._getWordBeforePosition(_);if(b.length===0&&(b=this._getCharacterBeforePosition(_)),b.length>0)return new _r(b,b.length,b.length,M.fromPositions(_),0)}if(Kt&&!g.isEmpty()&&c.getValueLengthInRange(g,0)<500){const _=c.getValueInRange(g,0);return new _r(_,0,_.length,g,0)}if(yg&&!g.isEmpty()){const _="vscode-placeholder";return new _r(_,0,_.length,null,void 0)}return _r.EMPTY}if(Hte){const g=this._selections[0];if(g.isEmpty()){const p=g.getStartPosition(),[_,b]=this._getAndroidWordAtPosition(p);if(_.length>0)return new _r(_,b,b,M.fromPositions(p),0)}return _r.EMPTY}return Ww.fromEditorSelection(c,this._selections[0],this._accessibilityPageSize,this._accessibilitySupport===0)},deduceModelPosition:(g,p,_)=>this._context.viewModel.deduceModelPositionRelativeToViewPosition(g,p,_)},f=this._register(new bWe(this.textArea.domNode));this._textAreaInput=this._register(this._instantiationService.createInstance(Uz,u,f,Ja,{isAndroid:Hte,isChrome:XE,isFirefox:Lc,isSafari:yg})),this._register(this._textAreaInput.onKeyDown(g=>{this._viewController.emitKeyDown(g)})),this._register(this._textAreaInput.onKeyUp(g=>{this._viewController.emitKeyUp(g)})),this._register(this._textAreaInput.onPaste(g=>{let p=!1,_=null,b=null;g.metadata&&(p=this._emptySelectionClipboard&&!!g.metadata.isFromEmptySelection,_=typeof g.metadata.multicursorText<"u"?g.metadata.multicursorText:null,b=g.metadata.mode),this._viewController.paste(g.text,p,_,b)})),this._register(this._textAreaInput.onCut(()=>{this._viewController.cut()})),this._register(this._textAreaInput.onType(g=>{g.replacePrevCharCnt||g.replaceNextCharCnt||g.positionDelta?this._viewController.compositionType(g.text,g.replacePrevCharCnt,g.replaceNextCharCnt,g.positionDelta):this._viewController.type(g.text)})),this._register(this._textAreaInput.onSelectionChangeRequest(g=>{this._viewController.setSelection(g)})),this._register(this._textAreaInput.onCompositionStart(g=>{const p=this.textArea.domNode,_=this._modelSelections[0],{distanceToModelLineStart:b,widthOfHiddenTextBefore:y}=(()=>{const L=p.value.substring(0,Math.min(p.selectionStart,p.selectionEnd)),x=L.lastIndexOf(`
`),k=L.substring(x+1),E=k.lastIndexOf("	"),N=k.length-E-1,A=_.getStartPosition(),P=Math.min(A.column-1,N),H=A.column-1-P,ee=k.substring(0,k.length-P),{tabSize:Q}=this._context.viewModel.model.getOptions(),te=xWe(this.textArea.domNode.ownerDocument,ee,this._fontInfo,Q);return{distanceToModelLineStart:H,widthOfHiddenTextBefore:te}})(),{distanceToModelLineEnd:S}=(()=>{const L=p.value.substring(Math.max(p.selectionStart,p.selectionEnd)),x=L.indexOf(`
`),k=x===-1?L:L.substring(0,x),E=k.indexOf("	"),N=E===-1?k.length:k.length-E-1,A=_.getEndPosition(),P=Math.min(this._context.viewModel.model.getLineMaxColumn(A.lineNumber)-A.column,N);return{distanceToModelLineEnd:this._context.viewModel.model.getLineMaxColumn(A.lineNumber)-A.column-P}})();this._context.viewModel.revealRange("keyboard",!0,M.fromPositions(this._selections[0].getStartPosition()),0,1),this._visibleTextArea=new LWe(this._context,_.startLineNumber,b,y,S),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off"),this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render(),this.textArea.setClassName(`inputarea ${N1} ime-input`),this._viewController.compositionStart(),this._context.viewModel.onCompositionStart()})),this._register(this._textAreaInput.onCompositionUpdate(g=>{this._visibleTextArea&&(this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render())})),this._register(this._textAreaInput.onCompositionEnd(()=>{this._visibleTextArea=null,this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off"),this._render(),this.textArea.setClassName(`inputarea ${N1}`),this._viewController.compositionEnd(),this._context.viewModel.onCompositionEnd()})),this._register(this._textAreaInput.onFocus(()=>{this._context.viewModel.setHasFocus(!0)})),this._register(this._textAreaInput.onBlur(()=>{this._context.viewModel.setHasFocus(!1)})),this._register(ak.onDidChange(()=>{this._ensureReadOnlyAttribute()}))}writeScreenReaderContent(e){this._textAreaInput.writeNativeTextAreaContent(e)}dispose(){super.dispose()}_getAndroidWordAtPosition(e){const t='`~!@#$%^&*()-=+[{]}\\|;:",.<>/?',i=this._context.viewModel.getLineContent(e.lineNumber),n=kc(t,[]);let s=!0,r=e.column,a=!0,l=e.column,c=0;for(;c<50&&(s||a);){if(s&&r<=1&&(s=!1),s){const u=i.charCodeAt(r-2);n.get(u)!==0?s=!1:r--}if(a&&l>i.length&&(a=!1),a){const u=i.charCodeAt(l-1);n.get(u)!==0?a=!1:l++}c++}return[i.substring(r-1,l-1),e.column-r]}_getWordBeforePosition(e){const t=this._context.viewModel.getLineContent(e.lineNumber),i=kc(this._context.configuration.options.get(132),[]);let n=e.column,s=0;for(;n>1;){const r=t.charCodeAt(n-2);if(i.get(r)!==0||s>50)return t.substring(n-1,e.column-1);s++,n--}return t.substring(0,e.column-1)}_getCharacterBeforePosition(e){if(e.column>1){const i=this._context.viewModel.getLineContent(e.lineNumber).charAt(e.column-2);if(!qs(i.charCodeAt(0)))return i}return""}_getAriaLabel(e){var i,n,s;if(e.get(2)===1){const r=(i=this._keybindingService.lookupKeybinding("editor.action.toggleScreenReaderAccessibilityMode"))==null?void 0:i.getAriaLabel(),a=(n=this._keybindingService.lookupKeybinding("workbench.action.showCommands"))==null?void 0:n.getAriaLabel(),l=(s=this._keybindingService.lookupKeybinding("workbench.action.openGlobalKeybindings"))==null?void 0:s.getAriaLabel(),c=v("accessibilityModeOff","The editor is not accessible at this time.");return r?v("accessibilityOffAriaLabel","{0} To enable screen reader optimized mode, use {1}",c,r):a?v("accessibilityOffAriaLabelNoKb","{0} To enable screen reader optimized mode, open the quick pick with {1} and run the command Toggle Screen Reader Accessibility Mode, which is currently not triggerable via keyboard.",c,a):l?v("accessibilityOffAriaLabelNoKbs","{0} Please assign a keybinding for the command Toggle Screen Reader Accessibility Mode by accessing the keybindings editor with {1} and run it.",c,l):c}return e.get(4)}_setAccessibilityOptions(e){this._accessibilitySupport=e.get(2);const t=e.get(3);this._accessibilitySupport===2&&t===yu.accessibilityPageSize.defaultValue?this._accessibilityPageSize=500:this._accessibilityPageSize=t;const n=e.get(146).wrappingColumn;if(n!==-1&&this._accessibilitySupport!==1){const s=e.get(50);this._textAreaWrapping=!0,this._textAreaWidth=Math.round(n*s.typicalHalfwidthCharacterWidth)}else this._textAreaWrapping=!1,this._textAreaWidth=q7?0:1}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(146);this._setAccessibilityOptions(t),this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,this._contentHeight=i.height,this._fontInfo=t.get(50),this._lineHeight=t.get(67),this._emptySelectionClipboard=t.get(37),this._copyWithSyntaxHighlighting=t.get(25),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off");const{tabSize:n}=this._context.viewModel.model.getOptions();return this.textArea.domNode.style.tabSize=`${n*this._fontInfo.spaceWidth}px`,this.textArea.setAttribute("aria-label",this._getAriaLabel(t)),this.textArea.setAttribute("aria-required",t.get(5)?"true":"false"),this.textArea.setAttribute("tabindex",String(t.get(125))),(e.hasChanged(34)||e.hasChanged(92))&&this._ensureReadOnlyAttribute(),e.hasChanged(2)&&this._textAreaInput.writeNativeTextAreaContent("strategy changed"),!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),this._modelSelections=e.modelSelections.slice(0),this._textAreaInput.writeNativeTextAreaContent("selection changed"),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return this._scrollLeft=e.scrollLeft,this._scrollTop=e.scrollTop,!0}onZonesChanged(e){return!0}isFocused(){return this._textAreaInput.isFocused()}focusTextArea(){this._textAreaInput.focusTextArea()}getLastRenderData(){return this._lastRenderPosition}setAriaOptions(e){e.activeDescendant?(this.textArea.setAttribute("aria-haspopup","true"),this.textArea.setAttribute("aria-autocomplete","list"),this.textArea.setAttribute("aria-activedescendant",e.activeDescendant)):(this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),this.textArea.removeAttribute("aria-activedescendant")),e.role&&this.textArea.setAttribute("role",e.role)}_ensureReadOnlyAttribute(){const e=this._context.configuration.options;!ak.enabled||e.get(34)&&e.get(92)?this.textArea.setAttribute("readonly","true"):this.textArea.removeAttribute("readonly")}prepareRender(e){var t;this._primaryCursorPosition=new G(this._selections[0].positionLineNumber,this._selections[0].positionColumn),this._primaryCursorVisibleRange=e.visibleRangeForPosition(this._primaryCursorPosition),(t=this._visibleTextArea)==null||t.prepareRender(e)}render(e){this._textAreaInput.writeNativeTextAreaContent("render"),this._render()}_render(){if(this._visibleTextArea){const i=this._visibleTextArea.visibleTextareaStart,n=this._visibleTextArea.visibleTextareaEnd,s=this._visibleTextArea.startPosition,r=this._visibleTextArea.endPosition;if(s&&r&&i&&n&&n.left>=this._scrollLeft&&i.left<=this._scrollLeft+this._contentWidth){const a=this._context.viewLayout.getVerticalOffsetForLineNumber(this._primaryCursorPosition.lineNumber)-this._scrollTop,l=this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));let c=this._visibleTextArea.widthOfHiddenLineTextBefore,u=this._contentLeft+i.left-this._scrollLeft,f=n.left-i.left+1;if(u<this._contentLeft){const S=this._contentLeft-u;u+=S,c+=S,f-=S}f>this._contentWidth&&(f=this._contentWidth);const g=this._context.viewModel.getViewLineData(s.lineNumber),p=g.tokens.findTokenIndexAtOffset(s.column-1),_=g.tokens.findTokenIndexAtOffset(r.column-1),b=p===_,y=this._visibleTextArea.definePresentation(b?g.tokens.getPresentation(p):null);this.textArea.domNode.scrollTop=l*this._lineHeight,this.textArea.domNode.scrollLeft=c,this._doRender({lastRenderPosition:null,top:a,left:u,width:f,height:this._lineHeight,useCover:!1,color:(Kn.getColorMap()||[])[y.foreground],italic:y.italic,bold:y.bold,underline:y.underline,strikethrough:y.strikethrough})}return}if(!this._primaryCursorVisibleRange){this._renderAtTopLeft();return}const e=this._contentLeft+this._primaryCursorVisibleRange.left-this._scrollLeft;if(e<this._contentLeft||e>this._contentLeft+this._contentWidth){this._renderAtTopLeft();return}const t=this._context.viewLayout.getVerticalOffsetForLineNumber(this._selections[0].positionLineNumber)-this._scrollTop;if(t<0||t>this._contentHeight){this._renderAtTopLeft();return}if(Kt||this._accessibilitySupport===2){this._doRender({lastRenderPosition:this._primaryCursorPosition,top:t,left:this._textAreaWrapping?this._contentLeft:e,width:this._textAreaWidth,height:this._lineHeight,useCover:!1}),this.textArea.domNode.scrollLeft=this._primaryCursorVisibleRange.left;const i=this._textAreaInput.textAreaState.newlineCountBeforeSelection??this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));this.textArea.domNode.scrollTop=i*this._lineHeight;return}this._doRender({lastRenderPosition:this._primaryCursorPosition,top:t,left:this._textAreaWrapping?this._contentLeft:e,width:this._textAreaWidth,height:q7?0:1,useCover:!1})}_newlinecount(e){let t=0,i=-1;do{if(i=e.indexOf(`
`,i+1),i===-1)break;t++}while(!0);return t}_renderAtTopLeft(){this._doRender({lastRenderPosition:null,top:0,left:0,width:this._textAreaWidth,height:q7?0:1,useCover:!0})}_doRender(e){this._lastRenderPosition=e.lastRenderPosition;const t=this.textArea,i=this.textAreaCover;yo(t,this._fontInfo),t.setTop(e.top),t.setLeft(e.left),t.setWidth(e.width),t.setHeight(e.height),t.setColor(e.color?ue.Format.CSS.formatHex(e.color):""),t.setFontStyle(e.italic?"italic":""),e.bold&&t.setFontWeight("bold"),t.setTextDecoration(`${e.underline?" underline":""}${e.strikethrough?" line-through":""}`),i.setTop(e.useCover?e.top:0),i.setLeft(e.useCover?e.left:0),i.setWidth(e.useCover?e.width:0),i.setHeight(e.useCover?e.height:0);const n=this._context.configuration.options;n.get(57)?i.setClassName("monaco-editor-background textAreaCover "+OP.OUTER_CLASS_NAME):n.get(68).renderType!==0?i.setClassName("monaco-editor-background textAreaCover "+PP.CLASS_NAME):i.setClassName("monaco-editor-background textAreaCover")}};jz=SWe([doe(3,Di),doe(4,nt)],jz);function xWe(o,e,t,i){if(e.length===0)return 0;const n=o.createElement("div");n.style.position="absolute",n.style.top="-50000px",n.style.width="50000px";const s=o.createElement("span");yo(s,t),s.style.whiteSpace="pre",s.style.tabSize=`${i*t.spaceWidth}px`,s.append(e),n.appendChild(s),o.body.appendChild(n);const r=s.offsetWidth;return n.remove(),r}const kWe=()=>!0,DWe=()=>!1,EWe=o=>o===" "||o==="	";class sw{static shouldRecreate(e){return e.hasChanged(146)||e.hasChanged(132)||e.hasChanged(37)||e.hasChanged(77)||e.hasChanged(79)||e.hasChanged(80)||e.hasChanged(6)||e.hasChanged(7)||e.hasChanged(11)||e.hasChanged(9)||e.hasChanged(10)||e.hasChanged(14)||e.hasChanged(129)||e.hasChanged(50)||e.hasChanged(92)||e.hasChanged(131)}constructor(e,t,i,n){this.languageConfigurationService=n,this._cursorMoveConfigurationBrand=void 0,this._languageId=e;const s=i.options,r=s.get(146),a=s.get(50);this.readOnly=s.get(92),this.tabSize=t.tabSize,this.indentSize=t.indentSize,this.insertSpaces=t.insertSpaces,this.stickyTabStops=s.get(117),this.lineHeight=a.lineHeight,this.typicalHalfwidthCharacterWidth=a.typicalHalfwidthCharacterWidth,this.pageSize=Math.max(1,Math.floor(r.height/this.lineHeight)-2),this.useTabStops=s.get(129),this.wordSeparators=s.get(132),this.emptySelectionClipboard=s.get(37),this.copyWithSyntaxHighlighting=s.get(25),this.multiCursorMergeOverlapping=s.get(77),this.multiCursorPaste=s.get(79),this.multiCursorLimit=s.get(80),this.autoClosingBrackets=s.get(6),this.autoClosingComments=s.get(7),this.autoClosingQuotes=s.get(11),this.autoClosingDelete=s.get(9),this.autoClosingOvertype=s.get(10),this.autoSurround=s.get(14),this.autoIndent=s.get(12),this.wordSegmenterLocales=s.get(131),this.surroundingPairs={},this._electricChars=null,this.shouldAutoCloseBefore={quote:this._getShouldAutoClose(e,this.autoClosingQuotes,!0),comment:this._getShouldAutoClose(e,this.autoClosingComments,!1),bracket:this._getShouldAutoClose(e,this.autoClosingBrackets,!1)},this.autoClosingPairs=this.languageConfigurationService.getLanguageConfiguration(e).getAutoClosingPairs();const l=this.languageConfigurationService.getLanguageConfiguration(e).getSurroundingPairs();if(l)for(const u of l)this.surroundingPairs[u.open]=u.close;const c=this.languageConfigurationService.getLanguageConfiguration(e).comments;this.blockCommentStartToken=(c==null?void 0:c.blockCommentStartToken)??null}get electricChars(){var e;if(!this._electricChars){this._electricChars={};const t=(e=this.languageConfigurationService.getLanguageConfiguration(this._languageId).electricCharacter)==null?void 0:e.getElectricCharacters();if(t)for(const i of t)this._electricChars[i]=!0}return this._electricChars}onElectricCharacter(e,t,i){const n=Av(t,i-1),s=this.languageConfigurationService.getLanguageConfiguration(n.languageId).electricCharacter;return s?s.onElectricCharacter(e,n,i-n.firstCharOffset):null}normalizeIndentation(e){return $K(e,this.indentSize,this.insertSpaces)}_getShouldAutoClose(e,t,i){switch(t){case"beforeWhitespace":return EWe;case"languageDefined":return this._getLanguageDefinedShouldAutoClose(e,i);case"always":return kWe;case"never":return DWe}}_getLanguageDefinedShouldAutoClose(e,t){const i=this.languageConfigurationService.getLanguageConfiguration(e).getAutoCloseBeforeSet(t);return n=>i.indexOf(n)!==-1}visibleColumnFromColumn(e,t){return Fs.visibleColumnFromColumn(e.getLineContent(t.lineNumber),t.column,this.tabSize)}columnFromVisibleColumn(e,t,i){const n=Fs.columnFromVisibleColumn(e.getLineContent(t),i,this.tabSize),s=e.getLineMinColumn(t);if(n<s)return s;const r=e.getLineMaxColumn(t);return n>r?r:n}}let di=class ffe{static fromModelState(e){return new IWe(e)}static fromViewState(e){return new TWe(e)}static fromModelSelection(e){const t=Ke.liftSelection(e),i=new mo(M.fromPositions(t.getSelectionStart()),0,0,t.getPosition(),0);return ffe.fromModelState(i)}static fromModelSelections(e){const t=[];for(let i=0,n=e.length;i<n;i++)t[i]=this.fromModelSelection(e[i]);return t}constructor(e,t){this._cursorStateBrand=void 0,this.modelState=e,this.viewState=t}equals(e){return this.viewState.equals(e.viewState)&&this.modelState.equals(e.modelState)}};class IWe{constructor(e){this.modelState=e,this.viewState=null}}class TWe{constructor(e){this.modelState=null,this.viewState=e}}class mo{constructor(e,t,i,n,s){this.selectionStart=e,this.selectionStartKind=t,this.selectionStartLeftoverVisibleColumns=i,this.position=n,this.leftoverVisibleColumns=s,this._singleCursorStateBrand=void 0,this.selection=mo._computeSelection(this.selectionStart,this.position)}equals(e){return this.selectionStartLeftoverVisibleColumns===e.selectionStartLeftoverVisibleColumns&&this.leftoverVisibleColumns===e.leftoverVisibleColumns&&this.selectionStartKind===e.selectionStartKind&&this.position.equals(e.position)&&this.selectionStart.equalsRange(e.selectionStart)}hasSelection(){return!this.selection.isEmpty()||!this.selectionStart.isEmpty()}move(e,t,i,n){return e?new mo(this.selectionStart,this.selectionStartKind,this.selectionStartLeftoverVisibleColumns,new G(t,i),n):new mo(new M(t,i,t,i),0,n,new G(t,i),n)}static _computeSelection(e,t){return e.isEmpty()||!t.isBeforeOrEqual(e.getStartPosition())?Ke.fromPositions(e.getStartPosition(),t):Ke.fromPositions(e.getEndPosition(),t)}}class Ea{constructor(e,t,i){this._editOperationResultBrand=void 0,this.type=e,this.commands=t,this.shouldPushStackElementBefore=i.shouldPushStackElementBefore,this.shouldPushStackElementAfter=i.shouldPushStackElementAfter}}function Km(o){return o==="'"||o==='"'||o==="`"}class Lv{static columnSelect(e,t,i,n,s,r){const a=Math.abs(s-i)+1,l=i>s,c=n>r,u=n<r,f=[];for(let g=0;g<a;g++){const p=i+(l?-g:g),_=e.columnFromVisibleColumn(t,p,n),b=e.columnFromVisibleColumn(t,p,r),y=e.visibleColumnFromColumn(t,new G(p,_)),S=e.visibleColumnFromColumn(t,new G(p,b));u&&(y>r||S<n)||c&&(S>n||y<r)||f.push(new mo(new M(p,_,p,_),0,0,new G(p,b),0))}if(f.length===0)for(let g=0;g<a;g++){const p=i+(l?-g:g),_=t.getLineMaxColumn(p);f.push(new mo(new M(p,_,p,_),0,0,new G(p,_),0))}return{viewStates:f,reversed:l,fromLineNumber:i,fromVisualColumn:n,toLineNumber:s,toVisualColumn:r}}static columnSelectLeft(e,t,i){let n=i.toViewVisualColumn;return n>0&&n--,Lv.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,i.toViewLineNumber,n)}static columnSelectRight(e,t,i){let n=0;const s=Math.min(i.fromViewLineNumber,i.toViewLineNumber),r=Math.max(i.fromViewLineNumber,i.toViewLineNumber);for(let l=s;l<=r;l++){const c=t.getLineMaxColumn(l),u=e.visibleColumnFromColumn(t,new G(l,c));n=Math.max(n,u)}let a=i.toViewVisualColumn;return a<n&&a++,this.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,i.toViewLineNumber,a)}static columnSelectUp(e,t,i,n){const s=n?e.pageSize:1,r=Math.max(1,i.toViewLineNumber-s);return this.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,r,i.toViewVisualColumn)}static columnSelectDown(e,t,i,n){const s=n?e.pageSize:1,r=Math.min(t.getLineCount(),i.toViewLineNumber+s);return this.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,r,i.toViewVisualColumn)}}class Ro{constructor(e,t,i=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=i}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const n=t.getInverseEditOperations()[0].range;return Ke.fromPositions(n.getEndPosition())}}class NWe{constructor(e,t){this._range=e,this._text=t}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const n=t.getInverseEditOperations()[0].range;return Ke.fromRange(n,0)}}class AM{constructor(e,t,i=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=i}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const n=t.getInverseEditOperations()[0].range;return Ke.fromPositions(n.getStartPosition())}}class FP{constructor(e,t,i,n,s=!1){this._range=e,this._text=t,this._columnDeltaOffset=n,this._lineNumberDeltaOffset=i,this.insertsAutoWhitespace=s}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const n=t.getInverseEditOperations()[0].range;return Ke.fromPositions(n.getEndPosition().delta(this._lineNumberDeltaOffset,this._columnDeltaOffset))}}class EG{constructor(e,t,i,n=!1){this._range=e,this._text=t,this._initialSelection=i,this._forceMoveMarkers=n,this._selectionId=null}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text,this._forceMoveMarkers),this._selectionId=t.trackSelection(this._initialSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}class K7{constructor(e,t,i){this._cursorPositionBrand=void 0,this.lineNumber=e,this.column=t,this.leftoverVisibleColumns=i}}class Ti{static leftPosition(e,t){if(t.column>e.getLineMinColumn(t.lineNumber))return t.delta(void 0,-Xle(e.getLineContent(t.lineNumber),t.column-1));if(t.lineNumber>1){const i=t.lineNumber-1;return new G(i,e.getLineMaxColumn(i))}else return t}static leftPositionAtomicSoftTabs(e,t,i){if(t.column<=e.getLineIndentColumn(t.lineNumber)){const n=e.getLineMinColumn(t.lineNumber),s=e.getLineContent(t.lineNumber),r=eE.atomicPosition(s,t.column-1,i,0);if(r!==-1&&r+1>=n)return new G(t.lineNumber,r+1)}return this.leftPosition(e,t)}static left(e,t,i){const n=e.stickyTabStops?Ti.leftPositionAtomicSoftTabs(t,i,e.tabSize):Ti.leftPosition(t,i);return new K7(n.lineNumber,n.column,0)}static moveLeft(e,t,i,n,s){let r,a;if(i.hasSelection()&&!n)r=i.selection.startLineNumber,a=i.selection.startColumn;else{const l=i.position.delta(void 0,-(s-1)),c=t.normalizePosition(Ti.clipPositionColumn(l,t),0),u=Ti.left(e,t,c);r=u.lineNumber,a=u.column}return i.move(n,r,a,0)}static clipPositionColumn(e,t){return new G(e.lineNumber,Ti.clipRange(e.column,t.getLineMinColumn(e.lineNumber),t.getLineMaxColumn(e.lineNumber)))}static clipRange(e,t,i){return e<t?t:e>i?i:e}static rightPosition(e,t,i){return i<e.getLineMaxColumn(t)?i=i+Oq(e.getLineContent(t),i-1):t<e.getLineCount()&&(t=t+1,i=e.getLineMinColumn(t)),new G(t,i)}static rightPositionAtomicSoftTabs(e,t,i,n,s){if(i<e.getLineIndentColumn(t)){const r=e.getLineContent(t),a=eE.atomicPosition(r,i-1,n,1);if(a!==-1)return new G(t,a+1)}return this.rightPosition(e,t,i)}static right(e,t,i){const n=e.stickyTabStops?Ti.rightPositionAtomicSoftTabs(t,i.lineNumber,i.column,e.tabSize,e.indentSize):Ti.rightPosition(t,i.lineNumber,i.column);return new K7(n.lineNumber,n.column,0)}static moveRight(e,t,i,n,s){let r,a;if(i.hasSelection()&&!n)r=i.selection.endLineNumber,a=i.selection.endColumn;else{const l=i.position.delta(void 0,s-1),c=t.normalizePosition(Ti.clipPositionColumn(l,t),1),u=Ti.right(e,t,c);r=u.lineNumber,a=u.column}return i.move(n,r,a,0)}static vertical(e,t,i,n,s,r,a,l){const c=Fs.visibleColumnFromColumn(t.getLineContent(i),n,e.tabSize)+s,u=t.getLineCount(),f=i===1&&n===1,g=i===u&&n===t.getLineMaxColumn(i),p=r<i?f:g;if(i=r,i<1?(i=1,a?n=t.getLineMinColumn(i):n=Math.min(t.getLineMaxColumn(i),n)):i>u?(i=u,a?n=t.getLineMaxColumn(i):n=Math.min(t.getLineMaxColumn(i),n)):n=e.columnFromVisibleColumn(t,i,c),p?s=0:s=c-Fs.visibleColumnFromColumn(t.getLineContent(i),n,e.tabSize),l!==void 0){const _=new G(i,n),b=t.normalizePosition(_,l);s=s+(n-b.column),i=b.lineNumber,n=b.column}return new K7(i,n,s)}static down(e,t,i,n,s,r,a){return this.vertical(e,t,i,n,s,i+r,a,4)}static moveDown(e,t,i,n,s){let r,a;i.hasSelection()&&!n?(r=i.selection.endLineNumber,a=i.selection.endColumn):(r=i.position.lineNumber,a=i.position.column);let l=0,c;do if(c=Ti.down(e,t,r+l,a,i.leftoverVisibleColumns,s,!0),t.normalizePosition(new G(c.lineNumber,c.column),2).lineNumber>r)break;while(l++<10&&r+l<t.getLineCount());return i.move(n,c.lineNumber,c.column,c.leftoverVisibleColumns)}static translateDown(e,t,i){const n=i.selection,s=Ti.down(e,t,n.selectionStartLineNumber,n.selectionStartColumn,i.selectionStartLeftoverVisibleColumns,1,!1),r=Ti.down(e,t,n.positionLineNumber,n.positionColumn,i.leftoverVisibleColumns,1,!1);return new mo(new M(s.lineNumber,s.column,s.lineNumber,s.column),0,s.leftoverVisibleColumns,new G(r.lineNumber,r.column),r.leftoverVisibleColumns)}static up(e,t,i,n,s,r,a){return this.vertical(e,t,i,n,s,i-r,a,3)}static moveUp(e,t,i,n,s){let r,a;i.hasSelection()&&!n?(r=i.selection.startLineNumber,a=i.selection.startColumn):(r=i.position.lineNumber,a=i.position.column);const l=Ti.up(e,t,r,a,i.leftoverVisibleColumns,s,!0);return i.move(n,l.lineNumber,l.column,l.leftoverVisibleColumns)}static translateUp(e,t,i){const n=i.selection,s=Ti.up(e,t,n.selectionStartLineNumber,n.selectionStartColumn,i.selectionStartLeftoverVisibleColumns,1,!1),r=Ti.up(e,t,n.positionLineNumber,n.positionColumn,i.leftoverVisibleColumns,1,!1);return new mo(new M(s.lineNumber,s.column,s.lineNumber,s.column),0,s.leftoverVisibleColumns,new G(r.lineNumber,r.column),r.leftoverVisibleColumns)}static _isBlankLine(e,t){return e.getLineFirstNonWhitespaceColumn(t)===0}static moveToPrevBlankLine(e,t,i,n){let s=i.position.lineNumber;for(;s>1&&this._isBlankLine(t,s);)s--;for(;s>1&&!this._isBlankLine(t,s);)s--;return i.move(n,s,t.getLineMinColumn(s),0)}static moveToNextBlankLine(e,t,i,n){const s=t.getLineCount();let r=i.position.lineNumber;for(;r<s&&this._isBlankLine(t,r);)r++;for(;r<s&&!this._isBlankLine(t,r);)r++;return i.move(n,r,t.getLineMinColumn(r),0)}static moveToBeginningOfLine(e,t,i,n){const s=i.position.lineNumber,r=t.getLineMinColumn(s),a=t.getLineFirstNonWhitespaceColumn(s)||r;let l;return i.position.column===a?l=r:l=a,i.move(n,s,l,0)}static moveToEndOfLine(e,t,i,n,s){const r=i.position.lineNumber,a=t.getLineMaxColumn(r);return i.move(n,r,a,s?1073741824-a:0)}static moveToBeginningOfBuffer(e,t,i,n){return i.move(n,1,1,0)}static moveToEndOfBuffer(e,t,i,n){const s=t.getLineCount(),r=t.getLineMaxColumn(s);return i.move(n,s,r,0)}}class vC{static deleteRight(e,t,i,n){const s=[];let r=e!==3;for(let a=0,l=n.length;a<l;a++){const c=n[a];let u=c;if(u.isEmpty()){const f=c.getPosition(),g=Ti.right(t,i,f);u=new M(g.lineNumber,g.column,f.lineNumber,f.column)}if(u.isEmpty()){s[a]=null;continue}u.startLineNumber!==u.endLineNumber&&(r=!0),s[a]=new Ro(u,"")}return[r,s]}static isAutoClosingPairDelete(e,t,i,n,s,r,a){if(t==="never"&&i==="never"||e==="never")return!1;for(let l=0,c=r.length;l<c;l++){const u=r[l],f=u.getPosition();if(!u.isEmpty())return!1;const g=s.getLineContent(f.lineNumber);if(f.column<2||f.column>=g.length+1)return!1;const p=g.charAt(f.column-2),_=n.get(p);if(!_)return!1;if(Km(p)){if(i==="never")return!1}else if(t==="never")return!1;const b=g.charAt(f.column-1);let y=!1;for(const S of _)S.open===p&&S.close===b&&(y=!0);if(!y)return!1;if(e==="auto"){let S=!1;for(let L=0,x=a.length;L<x;L++){const k=a[L];if(f.lineNumber===k.startLineNumber&&f.column===k.startColumn){S=!0;break}}if(!S)return!1}}return!0}static _runAutoClosingPairDelete(e,t,i){const n=[];for(let s=0,r=i.length;s<r;s++){const a=i[s].getPosition(),l=new M(a.lineNumber,a.column-1,a.lineNumber,a.column+1);n[s]=new Ro(l,"")}return[!0,n]}static deleteLeft(e,t,i,n,s){if(this.isAutoClosingPairDelete(t.autoClosingDelete,t.autoClosingBrackets,t.autoClosingQuotes,t.autoClosingPairs.autoClosingPairsOpenByEnd,i,n,s))return this._runAutoClosingPairDelete(t,i,n);const r=[];let a=e!==2;for(let l=0,c=n.length;l<c;l++){const u=vC.getDeleteRange(n[l],i,t);if(u.isEmpty()){r[l]=null;continue}u.startLineNumber!==u.endLineNumber&&(a=!0),r[l]=new Ro(u,"")}return[a,r]}static getDeleteRange(e,t,i){if(!e.isEmpty())return e;const n=e.getPosition();if(i.useTabStops&&n.column>1){const s=t.getLineContent(n.lineNumber),r=Sr(s),a=r===-1?s.length+1:r+1;if(n.column<=a){const l=i.visibleColumnFromColumn(t,n),c=Fs.prevIndentTabStop(l,i.indentSize),u=i.columnFromVisibleColumn(t,n.lineNumber,c);return new M(n.lineNumber,u,n.lineNumber,n.column)}}return M.fromPositions(vC.getPositionAfterDeleteLeft(n,t),n)}static getPositionAfterDeleteLeft(e,t){if(e.column>1){const i=qke(e.column-1,t.getLineContent(e.lineNumber));return e.with(void 0,i+1)}else if(e.lineNumber>1){const i=e.lineNumber-1;return new G(i,t.getLineMaxColumn(i))}else return e}static cut(e,t,i){const n=[];let s=null;i.sort((r,a)=>G.compare(r.getStartPosition(),a.getEndPosition()));for(let r=0,a=i.length;r<a;r++){const l=i[r];if(l.isEmpty())if(e.emptySelectionClipboard){const c=l.getPosition();let u,f,g,p;c.lineNumber<t.getLineCount()?(u=c.lineNumber,f=1,g=c.lineNumber+1,p=1):c.lineNumber>1&&(s==null?void 0:s.endLineNumber)!==c.lineNumber?(u=c.lineNumber-1,f=t.getLineMaxColumn(c.lineNumber-1),g=c.lineNumber,p=t.getLineMaxColumn(c.lineNumber)):(u=c.lineNumber,f=1,g=c.lineNumber,p=t.getLineMaxColumn(c.lineNumber));const _=new M(u,f,g,p);s=_,_.isEmpty()?n[r]=null:n[r]=new Ro(_,"")}else n[r]=null;else n[r]=new Ro(l,"")}return new Ea(0,n,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}}class xi{static _createWord(e,t,i,n,s){return{start:n,end:s,wordType:t,nextCharClass:i}}static _createIntlWord(e,t){return{start:e.index,end:e.index+e.segment.length,wordType:1,nextCharClass:t}}static _findPreviousWordOnLine(e,t,i){const n=t.getLineContent(i.lineNumber);return this._doFindPreviousWordOnLine(n,e,i)}static _doFindPreviousWordOnLine(e,t,i){let n=0;const s=t.findPrevIntlWordBeforeOrAtOffset(e,i.column-2);for(let r=i.column-2;r>=0;r--){const a=e.charCodeAt(r),l=t.get(a);if(s&&r===s.index)return this._createIntlWord(s,l);if(l===0){if(n===2)return this._createWord(e,n,l,r+1,this._findEndOfWord(e,t,n,r+1));n=1}else if(l===2){if(n===1)return this._createWord(e,n,l,r+1,this._findEndOfWord(e,t,n,r+1));n=2}else if(l===1&&n!==0)return this._createWord(e,n,l,r+1,this._findEndOfWord(e,t,n,r+1))}return n!==0?this._createWord(e,n,1,0,this._findEndOfWord(e,t,n,0)):null}static _findEndOfWord(e,t,i,n){const s=t.findNextIntlWordAtOrAfterOffset(e,n),r=e.length;for(let a=n;a<r;a++){const l=e.charCodeAt(a),c=t.get(l);if(s&&a===s.index+s.segment.length||c===1||i===1&&c===2||i===2&&c===0)return a}return r}static _findNextWordOnLine(e,t,i){const n=t.getLineContent(i.lineNumber);return this._doFindNextWordOnLine(n,e,i)}static _doFindNextWordOnLine(e,t,i){let n=0;const s=e.length,r=t.findNextIntlWordAtOrAfterOffset(e,i.column-1);for(let a=i.column-1;a<s;a++){const l=e.charCodeAt(a),c=t.get(l);if(r&&a===r.index)return this._createIntlWord(r,c);if(c===0){if(n===2)return this._createWord(e,n,c,this._findStartOfWord(e,t,n,a-1),a);n=1}else if(c===2){if(n===1)return this._createWord(e,n,c,this._findStartOfWord(e,t,n,a-1),a);n=2}else if(c===1&&n!==0)return this._createWord(e,n,c,this._findStartOfWord(e,t,n,a-1),a)}return n!==0?this._createWord(e,n,1,this._findStartOfWord(e,t,n,s-1),s):null}static _findStartOfWord(e,t,i,n){const s=t.findPrevIntlWordBeforeOrAtOffset(e,n);for(let r=n;r>=0;r--){const a=e.charCodeAt(r),l=t.get(a);if(s&&r===s.index)return r;if(l===1||i===1&&l===2||i===2&&l===0)return r+1}return 0}static moveWordLeft(e,t,i,n,s){let r=i.lineNumber,a=i.column;a===1&&r>1&&(r=r-1,a=t.getLineMaxColumn(r));let l=xi._findPreviousWordOnLine(e,t,new G(r,a));if(n===0)return new G(r,l?l.start+1:1);if(n===1)return!s&&l&&l.wordType===2&&l.end-l.start===1&&l.nextCharClass===0&&(l=xi._findPreviousWordOnLine(e,t,new G(r,l.start+1))),new G(r,l?l.start+1:1);if(n===3){for(;l&&l.wordType===2;)l=xi._findPreviousWordOnLine(e,t,new G(r,l.start+1));return new G(r,l?l.start+1:1)}return l&&a<=l.end+1&&(l=xi._findPreviousWordOnLine(e,t,new G(r,l.start+1))),new G(r,l?l.end+1:1)}static _moveWordPartLeft(e,t){const i=t.lineNumber,n=e.getLineMaxColumn(i);if(t.column===1)return i>1?new G(i-1,e.getLineMaxColumn(i-1)):t;const s=e.getLineContent(i);for(let r=t.column-1;r>1;r--){const a=s.charCodeAt(r-2),l=s.charCodeAt(r-1);if(a===95&&l!==95)return new G(i,r);if(a===45&&l!==45)return new G(i,r);if((Gp(a)||JN(a))&&gh(l))return new G(i,r);if(gh(a)&&gh(l)&&r+1<n){const c=s.charCodeAt(r);if(Gp(c)||JN(c))return new G(i,r)}}return new G(i,1)}static moveWordRight(e,t,i,n){let s=i.lineNumber,r=i.column,a=!1;r===t.getLineMaxColumn(s)&&s<t.getLineCount()&&(a=!0,s=s+1,r=1);let l=xi._findNextWordOnLine(e,t,new G(s,r));if(n===2)l&&l.wordType===2&&l.end-l.start===1&&l.nextCharClass===0&&(l=xi._findNextWordOnLine(e,t,new G(s,l.end+1))),l?r=l.end+1:r=t.getLineMaxColumn(s);else if(n===3){for(a&&(r=0);l&&(l.wordType===2||l.start+1<=r);)l=xi._findNextWordOnLine(e,t,new G(s,l.end+1));l?r=l.start+1:r=t.getLineMaxColumn(s)}else l&&!a&&r>=l.start+1&&(l=xi._findNextWordOnLine(e,t,new G(s,l.end+1))),l?r=l.start+1:r=t.getLineMaxColumn(s);return new G(s,r)}static _moveWordPartRight(e,t){const i=t.lineNumber,n=e.getLineMaxColumn(i);if(t.column===n)return i<e.getLineCount()?new G(i+1,1):t;const s=e.getLineContent(i);for(let r=t.column+1;r<n;r++){const a=s.charCodeAt(r-2),l=s.charCodeAt(r-1);if(a!==95&&l===95)return new G(i,r);if(a!==45&&l===45)return new G(i,r);if((Gp(a)||JN(a))&&gh(l))return new G(i,r);if(gh(a)&&gh(l)&&r+1<n){const c=s.charCodeAt(r);if(Gp(c)||JN(c))return new G(i,r)}}return new G(i,n)}static _deleteWordLeftWhitespace(e,t){const i=e.getLineContent(t.lineNumber),n=t.column-2,s=au(i,n);return s+1<n?new M(t.lineNumber,s+2,t.lineNumber,t.column):null}static deleteWordLeft(e,t){const i=e.wordSeparators,n=e.model,s=e.selection,r=e.whitespaceHeuristics;if(!s.isEmpty())return s;if(vC.isAutoClosingPairDelete(e.autoClosingDelete,e.autoClosingBrackets,e.autoClosingQuotes,e.autoClosingPairs.autoClosingPairsOpenByEnd,e.model,[e.selection],e.autoClosedCharacters)){const f=e.selection.getPosition();return new M(f.lineNumber,f.column-1,f.lineNumber,f.column+1)}const a=new G(s.positionLineNumber,s.positionColumn);let l=a.lineNumber,c=a.column;if(l===1&&c===1)return null;if(r){const f=this._deleteWordLeftWhitespace(n,a);if(f)return f}let u=xi._findPreviousWordOnLine(i,n,a);return t===0?u?c=u.start+1:c>1?c=1:(l--,c=n.getLineMaxColumn(l)):(u&&c<=u.end+1&&(u=xi._findPreviousWordOnLine(i,n,new G(l,u.start+1))),u?c=u.end+1:c>1?c=1:(l--,c=n.getLineMaxColumn(l))),new M(l,c,a.lineNumber,a.column)}static deleteInsideWord(e,t,i){if(!i.isEmpty())return i;const n=new G(i.positionLineNumber,i.positionColumn),s=this._deleteInsideWordWhitespace(t,n);return s||this._deleteInsideWordDetermineDeleteRange(e,t,n)}static _charAtIsWhitespace(e,t){const i=e.charCodeAt(t);return i===32||i===9}static _deleteInsideWordWhitespace(e,t){const i=e.getLineContent(t.lineNumber),n=i.length;if(n===0)return null;let s=Math.max(t.column-2,0);if(!this._charAtIsWhitespace(i,s))return null;let r=Math.min(t.column-1,n-1);if(!this._charAtIsWhitespace(i,r))return null;for(;s>0&&this._charAtIsWhitespace(i,s-1);)s--;for(;r+1<n&&this._charAtIsWhitespace(i,r+1);)r++;return new M(t.lineNumber,s+1,t.lineNumber,r+2)}static _deleteInsideWordDetermineDeleteRange(e,t,i){const n=t.getLineContent(i.lineNumber),s=n.length;if(s===0)return i.lineNumber>1?new M(i.lineNumber-1,t.getLineMaxColumn(i.lineNumber-1),i.lineNumber,1):i.lineNumber<t.getLineCount()?new M(i.lineNumber,1,i.lineNumber+1,1):new M(i.lineNumber,1,i.lineNumber,1);const r=f=>f.start+1<=i.column&&i.column<=f.end+1,a=(f,g)=>(f=Math.min(f,i.column),g=Math.max(g,i.column),new M(i.lineNumber,f,i.lineNumber,g)),l=f=>{let g=f.start+1,p=f.end+1,_=!1;for(;p-1<s&&this._charAtIsWhitespace(n,p-1);)_=!0,p++;if(!_)for(;g>1&&this._charAtIsWhitespace(n,g-2);)g--;return a(g,p)},c=xi._findPreviousWordOnLine(e,t,i);if(c&&r(c))return l(c);const u=xi._findNextWordOnLine(e,t,i);return u&&r(u)?l(u):c&&u?a(c.end+1,u.start+1):c?a(c.start+1,c.end+1):u?a(u.start+1,u.end+1):a(1,s+1)}static _deleteWordPartLeft(e,t){if(!t.isEmpty())return t;const i=t.getPosition(),n=xi._moveWordPartLeft(e,i);return new M(i.lineNumber,i.column,n.lineNumber,n.column)}static _findFirstNonWhitespaceChar(e,t){const i=e.length;for(let n=t;n<i;n++){const s=e.charAt(n);if(s!==" "&&s!=="	")return n}return i}static _deleteWordRightWhitespace(e,t){const i=e.getLineContent(t.lineNumber),n=t.column-1,s=this._findFirstNonWhitespaceChar(i,n);return n+1<s?new M(t.lineNumber,t.column,t.lineNumber,s+1):null}static deleteWordRight(e,t){const i=e.wordSeparators,n=e.model,s=e.selection,r=e.whitespaceHeuristics;if(!s.isEmpty())return s;const a=new G(s.positionLineNumber,s.positionColumn);let l=a.lineNumber,c=a.column;const u=n.getLineCount(),f=n.getLineMaxColumn(l);if(l===u&&c===f)return null;if(r){const p=this._deleteWordRightWhitespace(n,a);if(p)return p}let g=xi._findNextWordOnLine(i,n,a);return t===2?g?c=g.end+1:c<f||l===u?c=f:(l++,g=xi._findNextWordOnLine(i,n,new G(l,1)),g?c=g.start+1:c=n.getLineMaxColumn(l)):(g&&c>=g.start+1&&(g=xi._findNextWordOnLine(i,n,new G(l,g.end+1))),g?c=g.start+1:c<f||l===u?c=f:(l++,g=xi._findNextWordOnLine(i,n,new G(l,1)),g?c=g.start+1:c=n.getLineMaxColumn(l))),new M(l,c,a.lineNumber,a.column)}static _deleteWordPartRight(e,t){if(!t.isEmpty())return t;const i=t.getPosition(),n=xi._moveWordPartRight(e,i);return new M(i.lineNumber,i.column,n.lineNumber,n.column)}static _createWordAtPosition(e,t,i){const n=new M(t,i.start+1,t,i.end+1);return{word:e.getValueInRange(n),startColumn:n.startColumn,endColumn:n.endColumn}}static getWordAtPosition(e,t,i,n){const s=kc(t,i),r=xi._findPreviousWordOnLine(s,e,n);if(r&&r.wordType===1&&r.start<=n.column-1&&n.column-1<=r.end)return xi._createWordAtPosition(e,n.lineNumber,r);const a=xi._findNextWordOnLine(s,e,n);return a&&a.wordType===1&&a.start<=n.column-1&&n.column-1<=a.end?xi._createWordAtPosition(e,n.lineNumber,a):null}static word(e,t,i,n,s){const r=kc(e.wordSeparators,e.wordSegmenterLocales),a=xi._findPreviousWordOnLine(r,t,s),l=xi._findNextWordOnLine(r,t,s);if(!n){let p,_;return a&&a.wordType===1&&a.start<=s.column-1&&s.column-1<=a.end?(p=a.start+1,_=a.end+1):l&&l.wordType===1&&l.start<=s.column-1&&s.column-1<=l.end?(p=l.start+1,_=l.end+1):(a?p=a.end+1:p=1,l?_=l.start+1:_=t.getLineMaxColumn(s.lineNumber)),new mo(new M(s.lineNumber,p,s.lineNumber,_),1,0,new G(s.lineNumber,_),0)}let c,u;a&&a.wordType===1&&a.start<s.column-1&&s.column-1<a.end?(c=a.start+1,u=a.end+1):l&&l.wordType===1&&l.start<s.column-1&&s.column-1<l.end?(c=l.start+1,u=l.end+1):(c=s.column,u=s.column);const f=s.lineNumber;let g;if(i.selectionStart.containsPosition(s))g=i.selectionStart.endColumn;else if(s.isBeforeOrEqual(i.selectionStart.getStartPosition())){g=c;const p=new G(f,g);i.selectionStart.containsPosition(p)&&(g=i.selectionStart.endColumn)}else{g=u;const p=new G(f,g);i.selectionStart.containsPosition(p)&&(g=i.selectionStart.startColumn)}return i.move(!0,f,g,0)}}class q4 extends xi{static deleteWordPartLeft(e){const t=NR([xi.deleteWordLeft(e,0),xi.deleteWordLeft(e,2),xi._deleteWordPartLeft(e.model,e.selection)]);return t.sort(M.compareRangesUsingEnds),t[2]}static deleteWordPartRight(e){const t=NR([xi.deleteWordRight(e,0),xi.deleteWordRight(e,2),xi._deleteWordPartRight(e.model,e.selection)]);return t.sort(M.compareRangesUsingStarts),t[0]}static moveWordPartLeft(e,t,i,n){const s=NR([xi.moveWordLeft(e,t,i,0,n),xi.moveWordLeft(e,t,i,2,n),xi._moveWordPartLeft(t,i)]);return s.sort(G.compare),s[2]}static moveWordPartRight(e,t,i){const n=NR([xi.moveWordRight(e,t,i,0),xi.moveWordRight(e,t,i,2),xi._moveWordPartRight(t,i)]);return n.sort(G.compare),n[0]}}function NR(o){return o.filter(e=>!!e)}class po{static addCursorDown(e,t,i){const n=[];let s=0;for(let r=0,a=t.length;r<a;r++){const l=t[r];n[s++]=new di(l.modelState,l.viewState),i?n[s++]=di.fromModelState(Ti.translateDown(e.cursorConfig,e.model,l.modelState)):n[s++]=di.fromViewState(Ti.translateDown(e.cursorConfig,e,l.viewState))}return n}static addCursorUp(e,t,i){const n=[];let s=0;for(let r=0,a=t.length;r<a;r++){const l=t[r];n[s++]=new di(l.modelState,l.viewState),i?n[s++]=di.fromModelState(Ti.translateUp(e.cursorConfig,e.model,l.modelState)):n[s++]=di.fromViewState(Ti.translateUp(e.cursorConfig,e,l.viewState))}return n}static moveToBeginningOfLine(e,t,i){const n=[];for(let s=0,r=t.length;s<r;s++){const a=t[s];n[s]=this._moveToLineStart(e,a,i)}return n}static _moveToLineStart(e,t,i){const n=t.viewState.position.column,s=t.modelState.position.column,r=n===s,a=t.viewState.position.lineNumber,l=e.getLineFirstNonWhitespaceColumn(a);return!r&&!(n===l)?this._moveToLineStartByView(e,t,i):this._moveToLineStartByModel(e,t,i)}static _moveToLineStartByView(e,t,i){return di.fromViewState(Ti.moveToBeginningOfLine(e.cursorConfig,e,t.viewState,i))}static _moveToLineStartByModel(e,t,i){return di.fromModelState(Ti.moveToBeginningOfLine(e.cursorConfig,e.model,t.modelState,i))}static moveToEndOfLine(e,t,i,n){const s=[];for(let r=0,a=t.length;r<a;r++){const l=t[r];s[r]=this._moveToLineEnd(e,l,i,n)}return s}static _moveToLineEnd(e,t,i,n){const s=t.viewState.position,r=e.getLineMaxColumn(s.lineNumber),a=s.column===r,l=t.modelState.position,c=e.model.getLineMaxColumn(l.lineNumber),u=r-s.column===c-l.column;return a||u?this._moveToLineEndByModel(e,t,i,n):this._moveToLineEndByView(e,t,i,n)}static _moveToLineEndByView(e,t,i,n){return di.fromViewState(Ti.moveToEndOfLine(e.cursorConfig,e,t.viewState,i,n))}static _moveToLineEndByModel(e,t,i,n){return di.fromModelState(Ti.moveToEndOfLine(e.cursorConfig,e.model,t.modelState,i,n))}static expandLineSelection(e,t){const i=[];for(let n=0,s=t.length;n<s;n++){const r=t[n],a=r.modelState.selection.startLineNumber,l=e.model.getLineCount();let c=r.modelState.selection.endLineNumber,u;c===l?u=e.model.getLineMaxColumn(l):(c++,u=1),i[n]=di.fromModelState(new mo(new M(a,1,a,1),0,0,new G(c,u),0))}return i}static moveToBeginningOfBuffer(e,t,i){const n=[];for(let s=0,r=t.length;s<r;s++){const a=t[s];n[s]=di.fromModelState(Ti.moveToBeginningOfBuffer(e.cursorConfig,e.model,a.modelState,i))}return n}static moveToEndOfBuffer(e,t,i){const n=[];for(let s=0,r=t.length;s<r;s++){const a=t[s];n[s]=di.fromModelState(Ti.moveToEndOfBuffer(e.cursorConfig,e.model,a.modelState,i))}return n}static selectAll(e,t){const i=e.model.getLineCount(),n=e.model.getLineMaxColumn(i);return di.fromModelState(new mo(new M(1,1,1,1),0,0,new G(i,n),0))}static line(e,t,i,n,s){const r=e.model.validatePosition(n),a=s?e.coordinatesConverter.validateViewPosition(new G(s.lineNumber,s.column),r):e.coordinatesConverter.convertModelPositionToViewPosition(r);if(!i){const c=e.model.getLineCount();let u=r.lineNumber+1,f=1;return u>c&&(u=c,f=e.model.getLineMaxColumn(u)),di.fromModelState(new mo(new M(r.lineNumber,1,u,f),2,0,new G(u,f),0))}const l=t.modelState.selectionStart.getStartPosition().lineNumber;if(r.lineNumber<l)return di.fromViewState(t.viewState.move(!0,a.lineNumber,1,0));if(r.lineNumber>l){const c=e.getLineCount();let u=a.lineNumber+1,f=1;return u>c&&(u=c,f=e.getLineMaxColumn(u)),di.fromViewState(t.viewState.move(!0,u,f,0))}else{const c=t.modelState.selectionStart.getEndPosition();return di.fromModelState(t.modelState.move(!0,c.lineNumber,c.column,0))}}static word(e,t,i,n){const s=e.model.validatePosition(n);return di.fromModelState(xi.word(e.cursorConfig,e.model,t.modelState,i,s))}static cancelSelection(e,t){if(!t.modelState.hasSelection())return new di(t.modelState,t.viewState);const i=t.viewState.position.lineNumber,n=t.viewState.position.column;return di.fromViewState(new mo(new M(i,n,i,n),0,0,new G(i,n),0))}static moveTo(e,t,i,n,s){if(i){if(t.modelState.selectionStartKind===1)return this.word(e,t,i,n);if(t.modelState.selectionStartKind===2)return this.line(e,t,i,n,s)}const r=e.model.validatePosition(n),a=s?e.coordinatesConverter.validateViewPosition(new G(s.lineNumber,s.column),r):e.coordinatesConverter.convertModelPositionToViewPosition(r);return di.fromViewState(t.viewState.move(i,a.lineNumber,a.column,0))}static simpleMove(e,t,i,n,s,r){switch(i){case 0:return r===4?this._moveHalfLineLeft(e,t,n):this._moveLeft(e,t,n,s);case 1:return r===4?this._moveHalfLineRight(e,t,n):this._moveRight(e,t,n,s);case 2:return r===2?this._moveUpByViewLines(e,t,n,s):this._moveUpByModelLines(e,t,n,s);case 3:return r===2?this._moveDownByViewLines(e,t,n,s):this._moveDownByModelLines(e,t,n,s);case 4:return r===2?t.map(a=>di.fromViewState(Ti.moveToPrevBlankLine(e.cursorConfig,e,a.viewState,n))):t.map(a=>di.fromModelState(Ti.moveToPrevBlankLine(e.cursorConfig,e.model,a.modelState,n)));case 5:return r===2?t.map(a=>di.fromViewState(Ti.moveToNextBlankLine(e.cursorConfig,e,a.viewState,n))):t.map(a=>di.fromModelState(Ti.moveToNextBlankLine(e.cursorConfig,e.model,a.modelState,n)));case 6:return this._moveToViewMinColumn(e,t,n);case 7:return this._moveToViewFirstNonWhitespaceColumn(e,t,n);case 8:return this._moveToViewCenterColumn(e,t,n);case 9:return this._moveToViewMaxColumn(e,t,n);case 10:return this._moveToViewLastNonWhitespaceColumn(e,t,n);default:return null}}static viewportMove(e,t,i,n,s){const r=e.getCompletelyVisibleViewRange(),a=e.coordinatesConverter.convertViewRangeToModelRange(r);switch(i){case 11:{const l=this._firstLineNumberInRange(e.model,a,s),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],n,l,c)]}case 13:{const l=this._lastLineNumberInRange(e.model,a,s),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],n,l,c)]}case 12:{const l=Math.round((a.startLineNumber+a.endLineNumber)/2),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],n,l,c)]}case 14:{const l=[];for(let c=0,u=t.length;c<u;c++){const f=t[c];l[c]=this.findPositionInViewportIfOutside(e,f,r,n)}return l}default:return null}}static findPositionInViewportIfOutside(e,t,i,n){const s=t.viewState.position.lineNumber;if(i.startLineNumber<=s&&s<=i.endLineNumber-1)return new di(t.modelState,t.viewState);{let r;s>i.endLineNumber-1?r=i.endLineNumber-1:s<i.startLineNumber?r=i.startLineNumber:r=s;const a=Ti.vertical(e.cursorConfig,e,s,t.viewState.position.column,t.viewState.leftoverVisibleColumns,r,!1);return di.fromViewState(t.viewState.move(n,a.lineNumber,a.column,a.leftoverVisibleColumns))}}static _firstLineNumberInRange(e,t,i){let n=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(n)&&n++,Math.min(t.endLineNumber,n+i-1)}static _lastLineNumberInRange(e,t,i){let n=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(n)&&n++,Math.max(n,t.endLineNumber-i+1)}static _moveLeft(e,t,i,n){return t.map(s=>di.fromViewState(Ti.moveLeft(e.cursorConfig,e,s.viewState,i,n)))}static _moveHalfLineLeft(e,t,i){const n=[];for(let s=0,r=t.length;s<r;s++){const a=t[s],l=a.viewState.position.lineNumber,c=Math.round(e.getLineLength(l)/2);n[s]=di.fromViewState(Ti.moveLeft(e.cursorConfig,e,a.viewState,i,c))}return n}static _moveRight(e,t,i,n){return t.map(s=>di.fromViewState(Ti.moveRight(e.cursorConfig,e,s.viewState,i,n)))}static _moveHalfLineRight(e,t,i){const n=[];for(let s=0,r=t.length;s<r;s++){const a=t[s],l=a.viewState.position.lineNumber,c=Math.round(e.getLineLength(l)/2);n[s]=di.fromViewState(Ti.moveRight(e.cursorConfig,e,a.viewState,i,c))}return n}static _moveDownByViewLines(e,t,i,n){const s=[];for(let r=0,a=t.length;r<a;r++){const l=t[r];s[r]=di.fromViewState(Ti.moveDown(e.cursorConfig,e,l.viewState,i,n))}return s}static _moveDownByModelLines(e,t,i,n){const s=[];for(let r=0,a=t.length;r<a;r++){const l=t[r];s[r]=di.fromModelState(Ti.moveDown(e.cursorConfig,e.model,l.modelState,i,n))}return s}static _moveUpByViewLines(e,t,i,n){const s=[];for(let r=0,a=t.length;r<a;r++){const l=t[r];s[r]=di.fromViewState(Ti.moveUp(e.cursorConfig,e,l.viewState,i,n))}return s}static _moveUpByModelLines(e,t,i,n){const s=[];for(let r=0,a=t.length;r<a;r++){const l=t[r];s[r]=di.fromModelState(Ti.moveUp(e.cursorConfig,e.model,l.modelState,i,n))}return s}static _moveToViewPosition(e,t,i,n,s){return di.fromViewState(t.viewState.move(i,n,s,0))}static _moveToModelPosition(e,t,i,n,s){return di.fromModelState(t.modelState.move(i,n,s,0))}static _moveToViewMinColumn(e,t,i){const n=[];for(let s=0,r=t.length;s<r;s++){const a=t[s],l=a.viewState.position.lineNumber,c=e.getLineMinColumn(l);n[s]=this._moveToViewPosition(e,a,i,l,c)}return n}static _moveToViewFirstNonWhitespaceColumn(e,t,i){const n=[];for(let s=0,r=t.length;s<r;s++){const a=t[s],l=a.viewState.position.lineNumber,c=e.getLineFirstNonWhitespaceColumn(l);n[s]=this._moveToViewPosition(e,a,i,l,c)}return n}static _moveToViewCenterColumn(e,t,i){const n=[];for(let s=0,r=t.length;s<r;s++){const a=t[s],l=a.viewState.position.lineNumber,c=Math.round((e.getLineMaxColumn(l)+e.getLineMinColumn(l))/2);n[s]=this._moveToViewPosition(e,a,i,l,c)}return n}static _moveToViewMaxColumn(e,t,i){const n=[];for(let s=0,r=t.length;s<r;s++){const a=t[s],l=a.viewState.position.lineNumber,c=e.getLineMaxColumn(l);n[s]=this._moveToViewPosition(e,a,i,l,c)}return n}static _moveToViewLastNonWhitespaceColumn(e,t,i){const n=[];for(let s=0,r=t.length;s<r;s++){const a=t[s],l=a.viewState.position.lineNumber,c=e.getLineLastNonWhitespaceColumn(l);n[s]=this._moveToViewPosition(e,a,i,l,c)}return n}}var BP;(function(o){const e=function(i){if(!ao(i))return!1;const n=i;return!(!xa(n.to)||!yr(n.select)&&!_le(n.select)||!yr(n.by)&&!xa(n.by)||!yr(n.value)&&!Rm(n.value))};o.metadata={description:"Move cursor to a logical position in the view",args:[{name:"Cursor move argument object",description:`Property-value pairs that can be passed through this argument:
					* 'to': A mandatory logical position value providing where to move the cursor.
						\`\`\`
						'left', 'right', 'up', 'down', 'prevBlankLine', 'nextBlankLine',
						'wrappedLineStart', 'wrappedLineEnd', 'wrappedLineColumnCenter'
						'wrappedLineFirstNonWhitespaceCharacter', 'wrappedLineLastNonWhitespaceCharacter'
						'viewPortTop', 'viewPortCenter', 'viewPortBottom', 'viewPortIfOutside'
						\`\`\`
					* 'by': Unit to move. Default is computed based on 'to' value.
						\`\`\`
						'line', 'wrappedLine', 'character', 'halfLine'
						\`\`\`
					* 'value': Number of units to move. Default is '1'.
					* 'select': If 'true' makes the selection. Default is 'false'.
				`,constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["left","right","up","down","prevBlankLine","nextBlankLine","wrappedLineStart","wrappedLineEnd","wrappedLineColumnCenter","wrappedLineFirstNonWhitespaceCharacter","wrappedLineLastNonWhitespaceCharacter","viewPortTop","viewPortCenter","viewPortBottom","viewPortIfOutside"]},by:{type:"string",enum:["line","wrappedLine","character","halfLine"]},value:{type:"number",default:1},select:{type:"boolean",default:!1}}}}]},o.RawDirection={Left:"left",Right:"right",Up:"up",Down:"down",PrevBlankLine:"prevBlankLine",NextBlankLine:"nextBlankLine",WrappedLineStart:"wrappedLineStart",WrappedLineFirstNonWhitespaceCharacter:"wrappedLineFirstNonWhitespaceCharacter",WrappedLineColumnCenter:"wrappedLineColumnCenter",WrappedLineEnd:"wrappedLineEnd",WrappedLineLastNonWhitespaceCharacter:"wrappedLineLastNonWhitespaceCharacter",ViewPortTop:"viewPortTop",ViewPortCenter:"viewPortCenter",ViewPortBottom:"viewPortBottom",ViewPortIfOutside:"viewPortIfOutside"},o.RawUnit={Line:"line",WrappedLine:"wrappedLine",Character:"character",HalfLine:"halfLine"};function t(i){if(!i.to)return null;let n;switch(i.to){case o.RawDirection.Left:n=0;break;case o.RawDirection.Right:n=1;break;case o.RawDirection.Up:n=2;break;case o.RawDirection.Down:n=3;break;case o.RawDirection.PrevBlankLine:n=4;break;case o.RawDirection.NextBlankLine:n=5;break;case o.RawDirection.WrappedLineStart:n=6;break;case o.RawDirection.WrappedLineFirstNonWhitespaceCharacter:n=7;break;case o.RawDirection.WrappedLineColumnCenter:n=8;break;case o.RawDirection.WrappedLineEnd:n=9;break;case o.RawDirection.WrappedLineLastNonWhitespaceCharacter:n=10;break;case o.RawDirection.ViewPortTop:n=11;break;case o.RawDirection.ViewPortBottom:n=13;break;case o.RawDirection.ViewPortCenter:n=12;break;case o.RawDirection.ViewPortIfOutside:n=14;break;default:return null}let s=0;switch(i.by){case o.RawUnit.Line:s=1;break;case o.RawUnit.WrappedLine:s=2;break;case o.RawUnit.Character:s=3;break;case o.RawUnit.HalfLine:s=4;break}return{direction:n,unit:s,select:!!i.select,value:i.value||1}}o.parse=t})(BP||(BP={}));class IG{constructor(e,t,i){this._indentRulesSupport=t,this._indentationLineProcessor=new gfe(e,i)}shouldIncrease(e,t){const i=this._indentationLineProcessor.getProcessedLine(e,t);return this._indentRulesSupport.shouldIncrease(i)}shouldDecrease(e,t){const i=this._indentationLineProcessor.getProcessedLine(e,t);return this._indentRulesSupport.shouldDecrease(i)}shouldIgnore(e,t){const i=this._indentationLineProcessor.getProcessedLine(e,t);return this._indentRulesSupport.shouldIgnore(i)}shouldIndentNextLine(e,t){const i=this._indentationLineProcessor.getProcessedLine(e,t);return this._indentRulesSupport.shouldIndentNextLine(i)}}class TG{constructor(e,t){this.model=e,this.indentationLineProcessor=new gfe(e,t)}getProcessedTokenContextAroundRange(e){const t=this._getProcessedTokensBeforeRange(e),i=this._getProcessedTokensAfterRange(e),n=this._getProcessedPreviousLineTokens(e);return{beforeRangeProcessedTokens:t,afterRangeProcessedTokens:i,previousLineProcessedTokens:n}}_getProcessedTokensBeforeRange(e){this.model.tokenization.forceTokenization(e.startLineNumber);const t=this.model.tokenization.getLineTokens(e.startLineNumber),i=Av(t,e.startColumn-1);let n;if(NG(this.model,e.getStartPosition())){const r=e.startColumn-1-i.firstCharOffset,a=i.firstCharOffset,l=a+r;n=t.sliceAndInflate(a,l,0)}else{const r=e.startColumn-1;n=t.sliceAndInflate(0,r,0)}return this.indentationLineProcessor.getProcessedTokens(n)}_getProcessedTokensAfterRange(e){const t=e.isEmpty()?e.getStartPosition():e.getEndPosition();this.model.tokenization.forceTokenization(t.lineNumber);const i=this.model.tokenization.getLineTokens(t.lineNumber),n=Av(i,t.column-1),s=t.column-1-n.firstCharOffset,r=n.firstCharOffset+s,a=n.firstCharOffset+n.getLineLength(),l=i.sliceAndInflate(r,a,0);return this.indentationLineProcessor.getProcessedTokens(l)}_getProcessedPreviousLineTokens(e){const t=p=>{this.model.tokenization.forceTokenization(p);const _=this.model.tokenization.getLineTokens(p),b=this.model.getLineMaxColumn(p)-1;return Av(_,b)};this.model.tokenization.forceTokenization(e.startLineNumber);const i=this.model.tokenization.getLineTokens(e.startLineNumber),n=Av(i,e.startColumn-1),s=ho.createEmpty("",n.languageIdCodec),r=e.startLineNumber-1;if(r===0||!(n.firstCharOffset===0))return s;const c=t(r);if(!(n.languageId===c.languageId))return s;const f=c.toIViewLineTokens();return this.indentationLineProcessor.getProcessedTokens(f)}}class gfe{constructor(e,t){this.model=e,this.languageConfigurationService=t}getProcessedLine(e,t){var r,a;const i=(l,c)=>{const u=Ui(l);return c+l.substring(u.length)};(a=(r=this.model.tokenization).forceTokenization)==null||a.call(r,e);const n=this.model.tokenization.getLineTokens(e);let s=this.getProcessedTokens(n).getLineContent();return t!==void 0&&(s=i(s,t)),s}getProcessedTokens(e){const t=l=>l===2||l===3||l===1,i=e.getLanguageId(0),s=this.languageConfigurationService.getLanguageConfiguration(i).bracketsNew.getBracketRegExp({global:!0}),r=[];return e.forEach(l=>{const c=e.getStandardTokenType(l);let u=e.getTokenText(l);t(c)&&(u=u.replace(s,""));const f=e.getMetadata(l);r.push({text:u,metadata:f})}),ho.createFromTextAndMetadata(r,e.languageIdCodec)}}function NG(o,e){o.tokenization.forceTokenization(e.lineNumber);const t=o.tokenization.getLineTokens(e.lineNumber),i=Av(t,e.column-1),n=i.firstCharOffset===0,s=t.getLanguageId(0)===i.languageId;return!n&&!s}function R1(o,e,t,i){e.tokenization.forceTokenization(t.startLineNumber);const n=e.getLanguageIdAtPosition(t.startLineNumber,t.startColumn),s=i.getLanguageConfiguration(n);if(!s)return null;const a=new TG(e,i).getProcessedTokenContextAroundRange(t),l=a.previousLineProcessedTokens.getLineContent(),c=a.beforeRangeProcessedTokens.getLineContent(),u=a.afterRangeProcessedTokens.getLineContent(),f=s.onEnter(o,l,c,u);if(!f)return null;const g=f.indentAction;let p=f.appendText;const _=f.removeText||0;p?g===Es.Indent&&(p="	"+p):g===Es.Indent||g===Es.IndentOutdent?p="	":p="";let b=Yce(e,t.startLineNumber,t.startColumn);return _&&(b=b.substring(0,b.length-_)),{indentAction:g,appendText:p,removeText:_,indentation:b}}var RWe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},MWe=function(o,e){return function(t,i){e(t,i,o)}},PM;const G7=Object.create(null);function Y_(o,e){if(e<=0)return"";G7[o]||(G7[o]=["",o]);const t=G7[o];for(let i=t.length;i<=e;i++)t[i]=t[i-1]+o;return t[e]}let Ec=PM=class{static unshiftIndent(e,t,i,n,s){const r=Fs.visibleColumnFromColumn(e,t,i);if(s){const a=Y_(" ",n),c=Fs.prevIndentTabStop(r,n)/n;return Y_(a,c)}else{const a="	",c=Fs.prevRenderTabStop(r,i)/i;return Y_(a,c)}}static shiftIndent(e,t,i,n,s){const r=Fs.visibleColumnFromColumn(e,t,i);if(s){const a=Y_(" ",n),c=Fs.nextIndentTabStop(r,n)/n;return Y_(a,c)}else{const a="	",c=Fs.nextRenderTabStop(r,i)/i;return Y_(a,c)}}constructor(e,t,i){this._languageConfigurationService=i,this._opts=t,this._selection=e,this._selectionId=null,this._useLastEditRangeForCursorEndPosition=!1,this._selectionStartColumnStaysPut=!1}_addEditOperation(e,t,i){this._useLastEditRangeForCursorEndPosition?e.addTrackedEditOperation(t,i):e.addEditOperation(t,i)}getEditOperations(e,t){const i=this._selection.startLineNumber;let n=this._selection.endLineNumber;this._selection.endColumn===1&&i!==n&&(n=n-1);const{tabSize:s,indentSize:r,insertSpaces:a}=this._opts,l=i===n;if(this._opts.useTabStops){this._selection.isEmpty()&&/^\s*$/.test(e.getLineContent(i))&&(this._useLastEditRangeForCursorEndPosition=!0);let c=0,u=0;for(let f=i;f<=n;f++,c=u){u=0;const g=e.getLineContent(f);let p=Sr(g);if(this._opts.isUnshift&&(g.length===0||p===0)||!l&&!this._opts.isUnshift&&g.length===0)continue;if(p===-1&&(p=g.length),f>1&&Fs.visibleColumnFromColumn(g,p+1,s)%r!==0&&e.tokenization.isCheapToTokenize(f-1)){const y=R1(this._opts.autoIndent,e,new M(f-1,e.getLineMaxColumn(f-1),f-1,e.getLineMaxColumn(f-1)),this._languageConfigurationService);if(y){if(u=c,y.appendText)for(let S=0,L=y.appendText.length;S<L&&u<r&&y.appendText.charCodeAt(S)===32;S++)u++;y.removeText&&(u=Math.max(0,u-y.removeText));for(let S=0;S<u&&!(p===0||g.charCodeAt(p-1)!==32);S++)p--}}if(this._opts.isUnshift&&p===0)continue;let _;this._opts.isUnshift?_=PM.unshiftIndent(g,p+1,s,r,a):_=PM.shiftIndent(g,p+1,s,r,a),this._addEditOperation(t,new M(f,1,f,p+1),_),f===i&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn<=p+1)}}else{!this._opts.isUnshift&&this._selection.isEmpty()&&e.getLineLength(i)===0&&(this._useLastEditRangeForCursorEndPosition=!0);const c=a?Y_(" ",r):"	";for(let u=i;u<=n;u++){const f=e.getLineContent(u);let g=Sr(f);if(!(this._opts.isUnshift&&(f.length===0||g===0))&&!(!l&&!this._opts.isUnshift&&f.length===0)&&(g===-1&&(g=f.length),!(this._opts.isUnshift&&g===0)))if(this._opts.isUnshift){g=Math.min(g,r);for(let p=0;p<g;p++)if(f.charCodeAt(p)===9){g=p+1;break}this._addEditOperation(t,new M(u,1,u,g+1),"")}else this._addEditOperation(t,new M(u,1,u,1),c),u===i&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn===1)}}this._selectionId=t.trackSelection(this._selection)}computeCursorState(e,t){if(this._useLastEditRangeForCursorEndPosition){const n=t.getInverseEditOperations()[0];return new Ke(n.range.endLineNumber,n.range.endColumn,n.range.endLineNumber,n.range.endColumn)}const i=t.getTrackedSelection(this._selectionId);if(this._selectionStartColumnStaysPut){const n=this._selection.startColumn;return i.startColumn<=n?i:i.getDirection()===0?new Ke(i.startLineNumber,n,i.endLineNumber,i.endColumn):new Ke(i.endLineNumber,i.endColumn,i.startLineNumber,n)}return i}};Ec=PM=RWe([MWe(2,On)],Ec);class AWe{constructor(e,t,i){this._range=e,this._charBeforeSelection=t,this._charAfterSelection=i}getEditOperations(e,t){t.addTrackedEditOperation(new M(this._range.startLineNumber,this._range.startColumn,this._range.startLineNumber,this._range.startColumn),this._charBeforeSelection),t.addTrackedEditOperation(new M(this._range.endLineNumber,this._range.endColumn,this._range.endLineNumber,this._range.endColumn),this._charAfterSelection)}computeCursorState(e,t){const i=t.getInverseEditOperations(),n=i[0].range,s=i[1].range;return new Ke(n.endLineNumber,n.endColumn,s.endLineNumber,s.endColumn-this._charAfterSelection.length)}}class PWe{constructor(e,t,i){this._position=e,this._text=t,this._charAfter=i}getEditOperations(e,t){t.addTrackedEditOperation(new M(this._position.lineNumber,this._position.column,this._position.lineNumber,this._position.column),this._text+this._charAfter)}computeCursorState(e,t){const n=t.getInverseEditOperations()[0].range;return new Ke(n.endLineNumber,n.startColumn,n.endLineNumber,n.endColumn-this._charAfter.length)}}function OWe(o,e,t){const i=o.tokenization.getLanguageIdAtPosition(e,0);if(e>1){let n,s=-1;for(n=e-1;n>=1;n--){if(o.tokenization.getLanguageIdAtPosition(n,0)!==i)return s;const r=o.getLineContent(n);if(t.shouldIgnore(n)||/^\s+$/.test(r)||r===""){s=n;continue}return n}}return-1}function iE(o,e,t,i=!0,n){if(o<4)return null;const s=n.getLanguageConfiguration(e.tokenization.getLanguageId()).indentRulesSupport;if(!s)return null;const r=new IG(e,s,n);if(t<=1)return{indentation:"",action:null};for(let l=t-1;l>0&&e.getLineContent(l)==="";l--)if(l===1)return{indentation:"",action:null};const a=OWe(e,t,r);if(a<0)return null;if(a<1)return{indentation:"",action:null};if(r.shouldIncrease(a)||r.shouldIndentNextLine(a)){const l=e.getLineContent(a);return{indentation:Ui(l),action:Es.Indent,line:a}}else if(r.shouldDecrease(a)){const l=e.getLineContent(a);return{indentation:Ui(l),action:null,line:a}}else{if(a===1)return{indentation:Ui(e.getLineContent(a)),action:null,line:a};const l=a-1,c=s.getIndentMetadata(e.getLineContent(l));if(!(c&3)&&c&4){let u=0;for(let f=l-1;f>0;f--)if(!r.shouldIndentNextLine(f)){u=f;break}return{indentation:Ui(e.getLineContent(u+1)),action:null,line:u+1}}if(i)return{indentation:Ui(e.getLineContent(a)),action:null,line:a};for(let u=a;u>0;u--){if(r.shouldIncrease(u))return{indentation:Ui(e.getLineContent(u)),action:Es.Indent,line:u};if(r.shouldIndentNextLine(u)){let f=0;for(let g=u-1;g>0;g--)if(!r.shouldIndentNextLine(u)){f=g;break}return{indentation:Ui(e.getLineContent(f+1)),action:null,line:f+1}}else if(r.shouldDecrease(u))return{indentation:Ui(e.getLineContent(u)),action:null,line:u}}return{indentation:Ui(e.getLineContent(1)),action:null,line:1}}}function wk(o,e,t,i,n,s){if(o<4)return null;const r=s.getLanguageConfiguration(t);if(!r)return null;const a=s.getLanguageConfiguration(t).indentRulesSupport;if(!a)return null;const l=new IG(e,a,s),c=iE(o,e,i,void 0,s);if(c){const u=c.line;if(u!==void 0){let f=!0;for(let g=u;g<i-1;g++)if(!/^\s*$/.test(e.getLineContent(g))){f=!1;break}if(f){const g=r.onEnter(o,"",e.getLineContent(u),"");if(g){let p=Ui(e.getLineContent(u));return g.removeText&&(p=p.substring(0,p.length-g.removeText)),g.indentAction===Es.Indent||g.indentAction===Es.IndentOutdent?p=n.shiftIndent(p):g.indentAction===Es.Outdent&&(p=n.unshiftIndent(p)),l.shouldDecrease(i)&&(p=n.unshiftIndent(p)),g.appendText&&(p+=g.appendText),Ui(p)}}}return l.shouldDecrease(i)?c.action===Es.Indent?c.indentation:n.unshiftIndent(c.indentation):c.action===Es.Indent?n.shiftIndent(c.indentation):c.indentation}return null}function FWe(o,e,t,i,n){if(o<4)return null;const s=e.getLanguageIdAtPosition(t.startLineNumber,t.startColumn),r=n.getLanguageConfiguration(s).indentRulesSupport;if(!r)return null;e.tokenization.forceTokenization(t.startLineNumber);const l=new TG(e,n).getProcessedTokenContextAroundRange(t),c=l.afterRangeProcessedTokens,u=l.beforeRangeProcessedTokens,f=Ui(u.getLineContent()),g=WWe(e,t.startLineNumber,u),p=NG(e,t.getStartPosition()),_=e.getLineContent(t.startLineNumber),b=Ui(_),y=iE(o,g,t.startLineNumber+1,void 0,n);if(!y){const L=p?b:f;return{beforeEnter:L,afterEnter:L}}let S=p?b:y.indentation;return y.action===Es.Indent&&(S=i.shiftIndent(S)),r.shouldDecrease(c.getLineContent())&&(S=i.unshiftIndent(S)),{beforeEnter:p?b:f,afterEnter:S}}function BWe(o,e,t,i,n,s){const r=o.autoIndent;if(r<4||NG(e,t.getStartPosition()))return null;const l=e.getLanguageIdAtPosition(t.startLineNumber,t.startColumn),c=s.getLanguageConfiguration(l).indentRulesSupport;if(!c)return null;const f=new TG(e,s).getProcessedTokenContextAroundRange(t),g=f.beforeRangeProcessedTokens.getLineContent(),p=f.afterRangeProcessedTokens.getLineContent(),_=g+p,b=g+i+p;if(!c.shouldDecrease(_)&&c.shouldDecrease(b)){const S=iE(r,e,t.startLineNumber,!1,s);if(!S)return null;let L=S.indentation;return S.action!==Es.Indent&&(L=n.unshiftIndent(L)),L}const y=t.startLineNumber-1;if(y>0){const S=e.getLineContent(y);if(c.shouldIndentNextLine(S)&&c.shouldIncrease(b)){const L=iE(r,e,t.startLineNumber,!1,s),x=L==null?void 0:L.indentation;if(x!==void 0){const k=e.getLineContent(t.startLineNumber),E=Ui(k),A=n.shiftIndent(x)===E,P=/^\s*$/.test(_),H=o.autoClosingPairs.autoClosingPairsOpenByEnd.get(i),Q=H&&H.length>0&&P;if(A&&Q)return x}}}return null}function pfe(o,e,t){const i=t.getLanguageConfiguration(o.getLanguageId()).indentRulesSupport;return!i||e<1||e>o.getLineCount()?null:i.getIndentMetadata(o.getLineContent(e))}function WWe(o,e,t){return{tokenization:{getLineTokens:n=>n===e?t:o.tokenization.getLineTokens(n),getLanguageId:()=>o.getLanguageId(),getLanguageIdAtPosition:(n,s)=>o.getLanguageIdAtPosition(n,s)},getLineContent:n=>n===e?t.getLineContent():o.getLineContent(n)}}class HWe{static getEdits(e,t,i,n,s){if(!s&&this._isAutoIndentType(e,t,i)){const r=[];for(const l of i){const c=this._findActualIndentationForSelection(e,t,l,n);if(c===null)return;r.push({selection:l,indentation:c})}const a=qz.getAutoClosingPairClose(e,t,i,n,!1);return this._getIndentationAndAutoClosingPairEdits(e,t,r,n,a)}}static _isAutoIndentType(e,t,i){if(e.autoIndent<4)return!1;for(let n=0,s=i.length;n<s;n++)if(!t.tokenization.isCheapToTokenize(i[n].getEndPosition().lineNumber))return!1;return!0}static _findActualIndentationForSelection(e,t,i,n){const s=BWe(e,t,i,n,{shiftIndent:a=>AG(e,a),unshiftIndent:a=>WP(e,a)},e.languageConfigurationService);if(s===null)return null;const r=Yce(t,i.startLineNumber,i.startColumn);return s===e.normalizeIndentation(r)?null:s}static _getIndentationAndAutoClosingPairEdits(e,t,i,n,s){const r=i.map(({selection:l,indentation:c})=>{if(s!==null){const u=this._getEditFromIndentationAndSelection(e,t,c,l,n,!1);return new XWe(u,l,n,s)}else{const u=this._getEditFromIndentationAndSelection(e,t,c,l,n,!0);return av(u.range,u.text,!1)}}),a={shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1};return new Ea(4,r,a)}static _getEditFromIndentationAndSelection(e,t,i,n,s,r=!0){const a=n.startLineNumber,l=t.getLineFirstNonWhitespaceColumn(a);let c=e.normalizeIndentation(i);if(l!==0){const f=t.getLineContent(a);c+=f.substring(l-1,n.startColumn-1)}return c+=r?s:"",{range:new M(a,1,n.endLineNumber,n.endColumn),text:c}}}class VWe{static getEdits(e,t,i,n,s,r){if(mfe(t,i,n,s,r))return this._runAutoClosingOvertype(e,n,r)}static _runAutoClosingOvertype(e,t,i){const n=[];for(let s=0,r=t.length;s<r;s++){const l=t[s].getPosition(),c=new M(l.lineNumber,l.column,l.lineNumber,l.column+1);n[s]=new Ro(c,i)}return new Ea(4,n,{shouldPushStackElementBefore:G4(e,4),shouldPushStackElementAfter:!1})}}class zWe{static getEdits(e,t,i,n,s){if(mfe(e,t,i,n,s)){const r=i.map(a=>new Ro(new M(a.positionLineNumber,a.positionColumn,a.positionLineNumber,a.positionColumn+1),"",!1));return new Ea(4,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}}}class qz{static getEdits(e,t,i,n,s,r){if(!r){const a=this.getAutoClosingPairClose(e,t,i,n,s);if(a!==null)return this._runAutoClosingOpenCharType(i,n,s,a)}}static _runAutoClosingOpenCharType(e,t,i,n){const s=[];for(let r=0,a=e.length;r<a;r++){const l=e[r];s[r]=new ZWe(l,t,!i,n)}return new Ea(4,s,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}static getAutoClosingPairClose(e,t,i,n,s){for(const _ of i)if(!_.isEmpty())return null;const r=i.map(_=>{const b=_.getPosition();return s?{lineNumber:b.lineNumber,beforeColumn:b.column-n.length,afterColumn:b.column}:{lineNumber:b.lineNumber,beforeColumn:b.column,afterColumn:b.column}}),a=this._findAutoClosingPairOpen(e,t,r.map(_=>new G(_.lineNumber,_.beforeColumn)),n);if(!a)return null;let l,c;if(Km(n)?(l=e.autoClosingQuotes,c=e.shouldAutoCloseBefore.quote):(e.blockCommentStartToken?a.open.includes(e.blockCommentStartToken):!1)?(l=e.autoClosingComments,c=e.shouldAutoCloseBefore.comment):(l=e.autoClosingBrackets,c=e.shouldAutoCloseBefore.bracket),l==="never")return null;const f=this._findContainedAutoClosingPair(e,a),g=f?f.close:"";let p=!0;for(const _ of r){const{lineNumber:b,beforeColumn:y,afterColumn:S}=_,L=t.getLineContent(b),x=L.substring(0,y-1),k=L.substring(S-1);if(k.startsWith(g)||(p=!1),k.length>0){const P=k.charAt(0);if(!this._isBeforeClosingBrace(e,k)&&!c(P))return null}if(a.open.length===1&&(n==="'"||n==='"')&&l!=="always"){const P=kc(e.wordSeparators,[]);if(x.length>0){const H=x.charCodeAt(x.length-1);if(P.get(H)===0)return null}}if(!t.tokenization.isCheapToTokenize(b))return null;t.tokenization.forceTokenization(b);const E=t.tokenization.getLineTokens(b),N=Av(E,y-1);if(!a.shouldAutoClose(N,y-N.firstCharOffset))return null;const A=a.findNeutralCharacter();if(A){const P=t.tokenization.getTokenTypeIfInsertingCharacter(b,y,A);if(!a.isOK(P))return null}}return p?a.close.substring(0,a.close.length-g.length):a.close}static _findContainedAutoClosingPair(e,t){if(t.open.length<=1)return null;const i=t.close.charAt(t.close.length-1),n=e.autoClosingPairs.autoClosingPairsCloseByEnd.get(i)||[];let s=null;for(const r of n)r.open!==t.open&&t.open.includes(r.open)&&t.close.endsWith(r.close)&&(!s||r.open.length>s.open.length)&&(s=r);return s}static _findAutoClosingPairOpen(e,t,i,n){const s=e.autoClosingPairs.autoClosingPairsOpenByEnd.get(n);if(!s)return null;let r=null;for(const a of s)if(r===null||a.open.length>r.open.length){let l=!0;for(const c of i)if(t.getValueInRange(new M(c.lineNumber,c.column-a.open.length+1,c.lineNumber,c.column))+n!==a.open){l=!1;break}l&&(r=a)}return r}static _isBeforeClosingBrace(e,t){const i=t.charAt(0),n=e.autoClosingPairs.autoClosingPairsOpenByStart.get(i)||[],s=e.autoClosingPairs.autoClosingPairsCloseByStart.get(i)||[],r=n.some(l=>t.startsWith(l.open)),a=s.some(l=>t.startsWith(l.close));return!r&&a}}class UWe{static getEdits(e,t,i,n,s){if(!s&&this._isSurroundSelectionType(e,t,i,n))return this._runSurroundSelectionType(e,i,n)}static _runSurroundSelectionType(e,t,i){const n=[];for(let s=0,r=t.length;s<r;s++){const a=t[s],l=e.surroundingPairs[i];n[s]=new AWe(a,i,l)}return new Ea(0,n,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _isSurroundSelectionType(e,t,i,n){if(!_fe(e,n)||!e.surroundingPairs.hasOwnProperty(n))return!1;const s=Km(n);for(const r of i){if(r.isEmpty())return!1;let a=!0;for(let l=r.startLineNumber;l<=r.endLineNumber;l++){const c=t.getLineContent(l),u=l===r.startLineNumber?r.startColumn-1:0,f=l===r.endLineNumber?r.endColumn-1:c.length,g=c.substring(u,f);if(/[^ \t]/.test(g)){a=!1;break}}if(a)return!1;if(s&&r.startLineNumber===r.endLineNumber&&r.startColumn+1===r.endColumn){const l=t.getValueInRange(r);if(Km(l))return!1}}return!0}}class $We{static getEdits(e,t,i,n,s,r){if(!r&&this._isTypeInterceptorElectricChar(t,i,n)){const a=this._typeInterceptorElectricChar(e,t,i,n[0],s);if(a)return a}}static _isTypeInterceptorElectricChar(e,t,i){return!!(i.length===1&&t.tokenization.isCheapToTokenize(i[0].getEndPosition().lineNumber))}static _typeInterceptorElectricChar(e,t,i,n,s){if(!t.electricChars.hasOwnProperty(s)||!n.isEmpty())return null;const r=n.getPosition();i.tokenization.forceTokenization(r.lineNumber);const a=i.tokenization.getLineTokens(r.lineNumber);let l;try{l=t.onElectricCharacter(s,a,r.column)}catch(c){return wt(c),null}if(!l)return null;if(l.matchOpenBracket){const c=(a.getLineContent()+s).lastIndexOf(l.matchOpenBracket)+1,u=i.bracketPairs.findMatchingBracketUp(l.matchOpenBracket,{lineNumber:r.lineNumber,column:c},500);if(u){if(u.startLineNumber===r.lineNumber)return null;const f=i.getLineContent(u.startLineNumber),g=Ui(f),p=t.normalizeIndentation(g),_=i.getLineContent(r.lineNumber),b=i.getLineFirstNonWhitespaceColumn(r.lineNumber)||r.column,y=_.substring(b-1,r.column-1),S=p+y+s,L=new M(r.lineNumber,1,r.lineNumber,r.column),x=new Ro(L,S);return new Ea(MG(S,e),[x],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!0})}}return null}}class jWe{static getEdits(e,t,i){const n=[];for(let r=0,a=t.length;r<a;r++)n[r]=new Ro(t[r],i);const s=MG(i,e);return new Ea(s,n,{shouldPushStackElementBefore:G4(e,s),shouldPushStackElementAfter:!1})}}class K4{static getEdits(e,t,i,n,s){if(!s&&n===`
`){const r=[];for(let a=0,l=i.length;a<l;a++)r[a]=this._enter(e,t,!1,i[a]);return new Ea(4,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}}static _enter(e,t,i,n){if(e.autoIndent===0)return av(n,`
`,i);if(!t.tokenization.isCheapToTokenize(n.getStartPosition().lineNumber)||e.autoIndent===1){const l=t.getLineContent(n.startLineNumber),c=Ui(l).substring(0,n.startColumn-1);return av(n,`
`+e.normalizeIndentation(c),i)}const s=R1(e.autoIndent,t,n,e.languageConfigurationService);if(s){if(s.indentAction===Es.None)return av(n,`
`+e.normalizeIndentation(s.indentation+s.appendText),i);if(s.indentAction===Es.Indent)return av(n,`
`+e.normalizeIndentation(s.indentation+s.appendText),i);if(s.indentAction===Es.IndentOutdent){const l=e.normalizeIndentation(s.indentation),c=e.normalizeIndentation(s.indentation+s.appendText),u=`
`+c+`
`+l;return i?new AM(n,u,!0):new FP(n,u,-1,c.length-l.length,!0)}else if(s.indentAction===Es.Outdent){const l=WP(e,s.indentation);return av(n,`
`+e.normalizeIndentation(l+s.appendText),i)}}const r=t.getLineContent(n.startLineNumber),a=Ui(r).substring(0,n.startColumn-1);if(e.autoIndent>=4){const l=FWe(e.autoIndent,t,n,{unshiftIndent:c=>WP(e,c),shiftIndent:c=>AG(e,c),normalizeIndentation:c=>e.normalizeIndentation(c)},e.languageConfigurationService);if(l){let c=e.visibleColumnFromColumn(t,n.getEndPosition());const u=n.endColumn,f=t.getLineContent(n.endLineNumber),g=Sr(f);if(g>=0?n=n.setEndPosition(n.endLineNumber,Math.max(n.endColumn,g+1)):n=n.setEndPosition(n.endLineNumber,t.getLineMaxColumn(n.endLineNumber)),i)return new AM(n,`
`+e.normalizeIndentation(l.afterEnter),!0);{let p=0;return u<=g+1&&(e.insertSpaces||(c=Math.ceil(c/e.indentSize)),p=Math.min(c+1-e.normalizeIndentation(l.afterEnter).length-1,0)),new FP(n,`
`+e.normalizeIndentation(l.afterEnter),0,p,!0)}}}return av(n,`
`+e.normalizeIndentation(a),i)}static lineInsertBefore(e,t,i){if(t===null||i===null)return[];const n=[];for(let s=0,r=i.length;s<r;s++){let a=i[s].positionLineNumber;if(a===1)n[s]=new AM(new M(1,1,1,1),`
`);else{a--;const l=t.getLineMaxColumn(a);n[s]=this._enter(e,t,!1,new M(a,l,a,l))}}return n}static lineInsertAfter(e,t,i){if(t===null||i===null)return[];const n=[];for(let s=0,r=i.length;s<r;s++){const a=i[s].positionLineNumber,l=t.getLineMaxColumn(a);n[s]=this._enter(e,t,!1,new M(a,l,a,l))}return n}static lineBreakInsert(e,t,i){const n=[];for(let s=0,r=i.length;s<r;s++)n[s]=this._enter(e,t,!0,i[s]);return n}}class qWe{static getEdits(e,t,i,n,s,r){const a=this._distributePasteToCursors(e,i,n,s,r);return a?(i=i.sort(M.compareRangesUsingStarts),this._distributedPaste(e,t,i,a)):this._simplePaste(e,t,i,n,s)}static _distributePasteToCursors(e,t,i,n,s){if(n||t.length===1)return null;if(s&&s.length===t.length)return s;if(e.multiCursorPaste==="spread"){i.charCodeAt(i.length-1)===10&&(i=i.substring(0,i.length-1)),i.charCodeAt(i.length-1)===13&&(i=i.substring(0,i.length-1));const r=zh(i);if(r.length===t.length)return r}return null}static _distributedPaste(e,t,i,n){const s=[];for(let r=0,a=i.length;r<a;r++)s[r]=new Ro(i[r],n[r]);return new Ea(0,s,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _simplePaste(e,t,i,n,s){const r=[];for(let a=0,l=i.length;a<l;a++){const c=i[a],u=c.getPosition();if(s&&!c.isEmpty()&&(s=!1),s&&n.indexOf(`
`)!==n.length-1&&(s=!1),s){const f=new M(u.lineNumber,1,u.lineNumber,1);r[a]=new EG(f,n,c,!0)}else r[a]=new Ro(c,n)}return new Ea(0,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}}class KWe{static getEdits(e,t,i,n,s,r,a,l){const c=n.map(u=>this._compositionType(i,u,s,r,a,l));return new Ea(4,c,{shouldPushStackElementBefore:G4(e,4),shouldPushStackElementAfter:!1})}static _compositionType(e,t,i,n,s,r){if(!t.isEmpty())return null;const a=t.getPosition(),l=Math.max(1,a.column-n),c=Math.min(e.getLineMaxColumn(a.lineNumber),a.column+s),u=new M(a.lineNumber,l,a.lineNumber,c);return e.getValueInRange(u)===i&&r===0?null:new FP(u,i,0,r)}}class GWe{static getEdits(e,t,i){const n=[];for(let r=0,a=t.length;r<a;r++)n[r]=new Ro(t[r],i);const s=MG(i,e);return new Ea(s,n,{shouldPushStackElementBefore:G4(e,s),shouldPushStackElementAfter:!1})}}class YWe{static getCommands(e,t,i){const n=[];for(let s=0,r=i.length;s<r;s++){const a=i[s];if(a.isEmpty()){const l=t.getLineContent(a.startLineNumber);if(/^\s*$/.test(l)&&t.tokenization.isCheapToTokenize(a.startLineNumber)){let c=this._goodIndentForLine(e,t,a.startLineNumber);c=c||"	";const u=e.normalizeIndentation(c);if(!l.startsWith(u)){n[s]=new Ro(new M(a.startLineNumber,1,a.startLineNumber,l.length+1),u,!0);continue}}n[s]=this._replaceJumpToNextIndent(e,t,a,!0)}else{if(a.startLineNumber===a.endLineNumber){const l=t.getLineMaxColumn(a.startLineNumber);if(a.startColumn!==1||a.endColumn!==l){n[s]=this._replaceJumpToNextIndent(e,t,a,!1);continue}}n[s]=new Ec(a,{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService)}}return n}static _goodIndentForLine(e,t,i){let n=null,s="";const r=iE(e.autoIndent,t,i,!1,e.languageConfigurationService);if(r)n=r.action,s=r.indentation;else if(i>1){let a;for(a=i-1;a>=1;a--){const u=t.getLineContent(a);if(au(u)>=0)break}if(a<1)return null;const l=t.getLineMaxColumn(a),c=R1(e.autoIndent,t,new M(a,l,a,l),e.languageConfigurationService);c&&(s=c.indentation+c.appendText)}return n&&(n===Es.Indent&&(s=AG(e,s)),n===Es.Outdent&&(s=WP(e,s)),s=e.normalizeIndentation(s)),s||null}static _replaceJumpToNextIndent(e,t,i,n){let s="";const r=i.getStartPosition();if(e.insertSpaces){const a=e.visibleColumnFromColumn(t,r),l=e.indentSize,c=l-a%l;for(let u=0;u<c;u++)s+=" "}else s="	";return new Ro(i,s,n)}}class RG extends FP{constructor(e,t,i,n,s,r){super(e,t,i,n),this._openCharacter=s,this._closeCharacter=r,this.closeCharacterRange=null,this.enclosingRange=null}_computeCursorStateWithRange(e,t,i){return this.closeCharacterRange=new M(t.startLineNumber,t.endColumn-this._closeCharacter.length,t.endLineNumber,t.endColumn),this.enclosingRange=new M(t.startLineNumber,t.endColumn-this._openCharacter.length-this._closeCharacter.length,t.endLineNumber,t.endColumn),super.computeCursorState(e,i)}}class ZWe extends RG{constructor(e,t,i,n){const s=(i?t:"")+n,r=0,a=-n.length;super(e,s,r,a,t,n)}computeCursorState(e,t){const n=t.getInverseEditOperations()[0].range;return this._computeCursorStateWithRange(e,n,t)}}class XWe extends RG{constructor(e,t,i,n){const s=i+n,r=0,a=i.length;super(t,s,r,a,i,n),this._autoIndentationEdit=e,this._autoClosingEdit={range:t,text:s}}getEditOperations(e,t){t.addTrackedEditOperation(this._autoIndentationEdit.range,this._autoIndentationEdit.text),t.addTrackedEditOperation(this._autoClosingEdit.range,this._autoClosingEdit.text)}computeCursorState(e,t){const i=t.getInverseEditOperations();if(i.length!==2)throw new Error("There should be two inverse edit operations!");const n=i[0].range,s=i[1].range,r=n.plusRange(s);return this._computeCursorStateWithRange(e,r,t)}}function MG(o,e){return o===" "?e===5||e===6?6:5:4}function G4(o,e){return hoe(o)&&!hoe(e)?!0:o===5?!1:uoe(o)!==uoe(e)}function uoe(o){return o===6||o===5?"space":o}function hoe(o){return o===4||o===5||o===6}function mfe(o,e,t,i,n){if(o.autoClosingOvertype==="never"||!o.autoClosingPairs.autoClosingPairsCloseSingleChar.has(n))return!1;for(let s=0,r=t.length;s<r;s++){const a=t[s];if(!a.isEmpty())return!1;const l=a.getPosition(),c=e.getLineContent(l.lineNumber);if(c.charAt(l.column-1)!==n)return!1;const f=Km(n);if((l.column>2?c.charCodeAt(l.column-2):0)===92&&f)return!1;if(o.autoClosingOvertype==="auto"){let p=!1;for(let _=0,b=i.length;_<b;_++){const y=i[_];if(l.lineNumber===y.startLineNumber&&l.column===y.startColumn){p=!0;break}}if(!p)return!1}}return!0}function av(o,e,t){return t?new AM(o,e,!0):new Ro(o,e,!0)}function AG(o,e,t){return t=t||1,Ec.shiftIndent(e,e.length+t,o.tabSize,o.indentSize,o.insertSpaces)}function WP(o,e,t){return t=t||1,Ec.unshiftIndent(e,e.length+t,o.tabSize,o.indentSize,o.insertSpaces)}function _fe(o,e){return Km(e)?o.autoSurround==="quotes"||o.autoSurround==="languageDefined":o.autoSurround==="brackets"||o.autoSurround==="languageDefined"}class zp{static indent(e,t,i){if(t===null||i===null)return[];const n=[];for(let s=0,r=i.length;s<r;s++)n[s]=new Ec(i[s],{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService);return n}static outdent(e,t,i){const n=[];for(let s=0,r=i.length;s<r;s++)n[s]=new Ec(i[s],{isUnshift:!0,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService);return n}static paste(e,t,i,n,s,r){return qWe.getEdits(e,t,i,n,s,r)}static tab(e,t,i){return YWe.getCommands(e,t,i)}static compositionType(e,t,i,n,s,r,a,l){return KWe.getEdits(e,t,i,n,s,r,a,l)}static compositionEndWithInterceptors(e,t,i,n,s,r){if(!n)return null;let a=null;for(const g of n)if(a===null)a=g.insertedText;else if(a!==g.insertedText)return null;if(!a||a.length!==1)return null;const l=a;let c=!1;for(const g of n)if(g.deletedText.length!==0){c=!0;break}if(c){if(!_fe(t,l)||!t.surroundingPairs.hasOwnProperty(l))return null;const g=Km(l);for(const b of n)if(b.deletedSelectionStart!==0||b.deletedSelectionEnd!==b.deletedText.length||/^[ \t]+$/.test(b.deletedText)||g&&Km(b.deletedText))return null;const p=[];for(const b of s){if(!b.isEmpty())return null;p.push(b.getPosition())}if(p.length!==n.length)return null;const _=[];for(let b=0,y=p.length;b<y;b++)_.push(new PWe(p[b],n[b].deletedText,t.surroundingPairs[l]));return new Ea(4,_,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}const u=zWe.getEdits(t,i,s,r,l);if(u!==void 0)return u;const f=qz.getEdits(t,i,s,l,!0,!1);return f!==void 0?f:null}static typeWithInterceptors(e,t,i,n,s,r,a){const l=K4.getEdits(i,n,s,a,e);if(l!==void 0)return l;const c=HWe.getEdits(i,n,s,a,e);if(c!==void 0)return c;const u=VWe.getEdits(t,i,n,s,r,a);if(u!==void 0)return u;const f=qz.getEdits(i,n,s,a,!1,e);if(f!==void 0)return f;const g=UWe.getEdits(i,n,s,a,e);if(g!==void 0)return g;const p=$We.getEdits(t,i,n,s,a,e);return p!==void 0?p:jWe.getEdits(t,s,a)}static typeWithoutInterceptors(e,t,i,n,s){return GWe.getEdits(e,n,s)}}class QWe{constructor(e,t,i,n,s,r){this.deletedText=e,this.deletedSelectionStart=t,this.deletedSelectionEnd=i,this.insertedText=n,this.insertedSelectionStart=s,this.insertedSelectionEnd=r}}var B;(function(o){o.editorSimpleInput=new Pe("editorSimpleInput",!1,!0),o.editorTextFocus=new Pe("editorTextFocus",!1,v("editorTextFocus","Whether the editor text has focus (cursor is blinking)")),o.focus=new Pe("editorFocus",!1,v("editorFocus","Whether the editor or an editor widget has focus (e.g. focus is in the find widget)")),o.textInputFocus=new Pe("textInputFocus",!1,v("textInputFocus","Whether an editor or a rich text input has focus (cursor is blinking)")),o.readOnly=new Pe("editorReadonly",!1,v("editorReadonly","Whether the editor is read-only")),o.inDiffEditor=new Pe("inDiffEditor",!1,v("inDiffEditor","Whether the context is a diff editor")),o.isEmbeddedDiffEditor=new Pe("isEmbeddedDiffEditor",!1,v("isEmbeddedDiffEditor","Whether the context is an embedded diff editor")),o.inMultiDiffEditor=new Pe("inMultiDiffEditor",!1,v("inMultiDiffEditor","Whether the context is a multi diff editor")),o.multiDiffEditorAllCollapsed=new Pe("multiDiffEditorAllCollapsed",void 0,v("multiDiffEditorAllCollapsed","Whether all files in multi diff editor are collapsed")),o.hasChanges=new Pe("diffEditorHasChanges",!1,v("diffEditorHasChanges","Whether the diff editor has changes")),o.comparingMovedCode=new Pe("comparingMovedCode",!1,v("comparingMovedCode","Whether a moved code block is selected for comparison")),o.accessibleDiffViewerVisible=new Pe("accessibleDiffViewerVisible",!1,v("accessibleDiffViewerVisible","Whether the accessible diff viewer is visible")),o.diffEditorRenderSideBySideInlineBreakpointReached=new Pe("diffEditorRenderSideBySideInlineBreakpointReached",!1,v("diffEditorRenderSideBySideInlineBreakpointReached","Whether the diff editor render side by side inline breakpoint is reached")),o.diffEditorInlineMode=new Pe("diffEditorInlineMode",!1,v("diffEditorInlineMode","Whether inline mode is active")),o.diffEditorOriginalWritable=new Pe("diffEditorOriginalWritable",!1,v("diffEditorOriginalWritable","Whether modified is writable in the diff editor")),o.diffEditorModifiedWritable=new Pe("diffEditorModifiedWritable",!1,v("diffEditorModifiedWritable","Whether modified is writable in the diff editor")),o.diffEditorOriginalUri=new Pe("diffEditorOriginalUri","",v("diffEditorOriginalUri","The uri of the original document")),o.diffEditorModifiedUri=new Pe("diffEditorModifiedUri","",v("diffEditorModifiedUri","The uri of the modified document")),o.columnSelection=new Pe("editorColumnSelection",!1,v("editorColumnSelection","Whether `editor.columnSelection` is enabled")),o.writable=o.readOnly.toNegated(),o.hasNonEmptySelection=new Pe("editorHasSelection",!1,v("editorHasSelection","Whether the editor has text selected")),o.hasOnlyEmptySelection=o.hasNonEmptySelection.toNegated(),o.hasMultipleSelections=new Pe("editorHasMultipleSelections",!1,v("editorHasMultipleSelections","Whether the editor has multiple selections")),o.hasSingleSelection=o.hasMultipleSelections.toNegated(),o.tabMovesFocus=new Pe("editorTabMovesFocus",!1,v("editorTabMovesFocus","Whether `Tab` will move focus out of the editor")),o.tabDoesNotMoveFocus=o.tabMovesFocus.toNegated(),o.isInEmbeddedEditor=new Pe("isInEmbeddedEditor",!1,!0),o.canUndo=new Pe("canUndo",!1,!0),o.canRedo=new Pe("canRedo",!1,!0),o.hoverVisible=new Pe("editorHoverVisible",!1,v("editorHoverVisible","Whether the editor hover is visible")),o.hoverFocused=new Pe("editorHoverFocused",!1,v("editorHoverFocused","Whether the editor hover is focused")),o.stickyScrollFocused=new Pe("stickyScrollFocused",!1,v("stickyScrollFocused","Whether the sticky scroll is focused")),o.stickyScrollVisible=new Pe("stickyScrollVisible",!1,v("stickyScrollVisible","Whether the sticky scroll is visible")),o.standaloneColorPickerVisible=new Pe("standaloneColorPickerVisible",!1,v("standaloneColorPickerVisible","Whether the standalone color picker is visible")),o.standaloneColorPickerFocused=new Pe("standaloneColorPickerFocused",!1,v("standaloneColorPickerFocused","Whether the standalone color picker is focused")),o.inCompositeEditor=new Pe("inCompositeEditor",void 0,v("inCompositeEditor","Whether the editor is part of a larger editor (e.g. notebooks)")),o.notInCompositeEditor=o.inCompositeEditor.toNegated(),o.languageId=new Pe("editorLangId","",v("editorLangId","The language identifier of the editor")),o.hasCompletionItemProvider=new Pe("editorHasCompletionItemProvider",!1,v("editorHasCompletionItemProvider","Whether the editor has a completion item provider")),o.hasCodeActionsProvider=new Pe("editorHasCodeActionsProvider",!1,v("editorHasCodeActionsProvider","Whether the editor has a code actions provider")),o.hasCodeLensProvider=new Pe("editorHasCodeLensProvider",!1,v("editorHasCodeLensProvider","Whether the editor has a code lens provider")),o.hasDefinitionProvider=new Pe("editorHasDefinitionProvider",!1,v("editorHasDefinitionProvider","Whether the editor has a definition provider")),o.hasDeclarationProvider=new Pe("editorHasDeclarationProvider",!1,v("editorHasDeclarationProvider","Whether the editor has a declaration provider")),o.hasImplementationProvider=new Pe("editorHasImplementationProvider",!1,v("editorHasImplementationProvider","Whether the editor has an implementation provider")),o.hasTypeDefinitionProvider=new Pe("editorHasTypeDefinitionProvider",!1,v("editorHasTypeDefinitionProvider","Whether the editor has a type definition provider")),o.hasHoverProvider=new Pe("editorHasHoverProvider",!1,v("editorHasHoverProvider","Whether the editor has a hover provider")),o.hasDocumentHighlightProvider=new Pe("editorHasDocumentHighlightProvider",!1,v("editorHasDocumentHighlightProvider","Whether the editor has a document highlight provider")),o.hasDocumentSymbolProvider=new Pe("editorHasDocumentSymbolProvider",!1,v("editorHasDocumentSymbolProvider","Whether the editor has a document symbol provider")),o.hasReferenceProvider=new Pe("editorHasReferenceProvider",!1,v("editorHasReferenceProvider","Whether the editor has a reference provider")),o.hasRenameProvider=new Pe("editorHasRenameProvider",!1,v("editorHasRenameProvider","Whether the editor has a rename provider")),o.hasSignatureHelpProvider=new Pe("editorHasSignatureHelpProvider",!1,v("editorHasSignatureHelpProvider","Whether the editor has a signature help provider")),o.hasInlayHintsProvider=new Pe("editorHasInlayHintsProvider",!1,v("editorHasInlayHintsProvider","Whether the editor has an inline hints provider")),o.hasDocumentFormattingProvider=new Pe("editorHasDocumentFormattingProvider",!1,v("editorHasDocumentFormattingProvider","Whether the editor has a document formatting provider")),o.hasDocumentSelectionFormattingProvider=new Pe("editorHasDocumentSelectionFormattingProvider",!1,v("editorHasDocumentSelectionFormattingProvider","Whether the editor has a document selection formatting provider")),o.hasMultipleDocumentFormattingProvider=new Pe("editorHasMultipleDocumentFormattingProvider",!1,v("editorHasMultipleDocumentFormattingProvider","Whether the editor has multiple document formatting providers")),o.hasMultipleDocumentSelectionFormattingProvider=new Pe("editorHasMultipleDocumentSelectionFormattingProvider",!1,v("editorHasMultipleDocumentSelectionFormattingProvider","Whether the editor has multiple document selection formatting providers"))})(B||(B={}));const Li=0;class is extends Bs{runEditorCommand(e,t,i){const n=t._getViewModel();n&&this.runCoreEditorCommand(n,i||{})}}var Eo;(function(o){const e=function(i){if(!ao(i))return!1;const n=i;return!(!xa(n.to)||!yr(n.by)&&!xa(n.by)||!yr(n.value)&&!Rm(n.value)||!yr(n.revealCursor)&&!_le(n.revealCursor))};o.metadata={description:"Scroll editor in the given direction",args:[{name:"Editor scroll argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'to': A mandatory direction value.\n						```\n						'up', 'down'\n						```\n					* 'by': Unit to move. Default is computed based on 'to' value.\n						```\n						'line', 'wrappedLine', 'page', 'halfPage', 'editor'\n						```\n					* 'value': Number of units to move. Default is '1'.\n					* 'revealCursor': If 'true' reveals the cursor if it is outside view port.\n				",constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["up","down"]},by:{type:"string",enum:["line","wrappedLine","page","halfPage","editor"]},value:{type:"number",default:1},revealCursor:{type:"boolean"}}}}]},o.RawDirection={Up:"up",Right:"right",Down:"down",Left:"left"},o.RawUnit={Line:"line",WrappedLine:"wrappedLine",Page:"page",HalfPage:"halfPage",Editor:"editor",Column:"column"};function t(i){let n;switch(i.to){case o.RawDirection.Up:n=1;break;case o.RawDirection.Right:n=2;break;case o.RawDirection.Down:n=3;break;case o.RawDirection.Left:n=4;break;default:return null}let s;switch(i.by){case o.RawUnit.Line:s=1;break;case o.RawUnit.WrappedLine:s=2;break;case o.RawUnit.Page:s=3;break;case o.RawUnit.HalfPage:s=4;break;case o.RawUnit.Editor:s=5;break;case o.RawUnit.Column:s=6;break;default:s=2}const r=Math.floor(i.value||1),a=!!i.revealCursor;return{direction:n,unit:s,value:r,revealCursor:a,select:!!i.select}}o.parse=t})(Eo||(Eo={}));var Hw;(function(o){const e=function(t){if(!ao(t))return!1;const i=t;return!(!Rm(i.lineNumber)&&!xa(i.lineNumber)||!yr(i.at)&&!xa(i.at))};o.metadata={description:"Reveal the given line at the given logical position",args:[{name:"Reveal line argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'lineNumber': A mandatory line number value.\n					* 'at': Logical position at which line has to be revealed.\n						```\n						'top', 'center', 'bottom'\n						```\n				",constraint:e,schema:{type:"object",required:["lineNumber"],properties:{lineNumber:{type:["number","string"]},at:{type:"string",enum:["top","center","bottom"]}}}}]},o.RawAtArgument={Top:"top",Center:"center",Bottom:"bottom"}})(Hw||(Hw={}));class Kz{constructor(e){e.addImplementation(1e4,"code-editor",(t,i)=>{const n=t.get(hi).getFocusedCodeEditor();return n&&n.hasTextFocus()?this._runEditorCommand(t,n,i):!1}),e.addImplementation(1e3,"generic-dom-input-textarea",(t,i)=>{const n=Mo();return n&&["input","textarea"].indexOf(n.tagName.toLowerCase())>=0?(this.runDOMCommand(n),!0):!1}),e.addImplementation(0,"generic-dom",(t,i)=>{const n=t.get(hi).getActiveCodeEditor();return n?(n.focus(),this._runEditorCommand(t,n,i)):!1})}_runEditorCommand(e,t,i){const n=this.runEditorCommand(e,t,i);return n||!0}}var no;(function(o){class e extends is{constructor(L){super(L),this._inSelectionMode=L.inSelectionMode}runCoreEditorCommand(L,x){if(!x.position)return;L.model.pushStackElement(),L.setCursorStates(x.source,3,[po.moveTo(L,L.getPrimaryCursorState(),this._inSelectionMode,x.position,x.viewPosition)])&&x.revealType!==2&&L.revealAllCursors(x.source,!0,!0)}}o.MoveTo=Re(new e({id:"_moveTo",inSelectionMode:!1,precondition:void 0})),o.MoveToSelect=Re(new e({id:"_moveToSelect",inSelectionMode:!0,precondition:void 0}));class t extends is{runCoreEditorCommand(L,x){L.model.pushStackElement();const k=this._getColumnSelectResult(L,L.getPrimaryCursorState(),L.getCursorColumnSelectData(),x);k!==null&&(L.setCursorStates(x.source,3,k.viewStates.map(E=>di.fromViewState(E))),L.setCursorColumnSelectData({isReal:!0,fromViewLineNumber:k.fromLineNumber,fromViewVisualColumn:k.fromVisualColumn,toViewLineNumber:k.toLineNumber,toViewVisualColumn:k.toVisualColumn}),k.reversed?L.revealTopMostCursor(x.source):L.revealBottomMostCursor(x.source))}}o.ColumnSelect=Re(new class extends t{constructor(){super({id:"columnSelect",precondition:void 0})}_getColumnSelectResult(S,L,x,k){if(typeof k.position>"u"||typeof k.viewPosition>"u"||typeof k.mouseColumn>"u")return null;const E=S.model.validatePosition(k.position),N=S.coordinatesConverter.validateViewPosition(new G(k.viewPosition.lineNumber,k.viewPosition.column),E),A=k.doColumnSelect?x.fromViewLineNumber:N.lineNumber,P=k.doColumnSelect?x.fromViewVisualColumn:k.mouseColumn-1;return Lv.columnSelect(S.cursorConfig,S,A,P,N.lineNumber,k.mouseColumn-1)}}),o.CursorColumnSelectLeft=Re(new class extends t{constructor(){super({id:"cursorColumnSelectLeft",precondition:void 0,kbOpts:{weight:Li,kbExpr:B.textInputFocus,primary:3599,linux:{primary:0}}})}_getColumnSelectResult(S,L,x,k){return Lv.columnSelectLeft(S.cursorConfig,S,x)}}),o.CursorColumnSelectRight=Re(new class extends t{constructor(){super({id:"cursorColumnSelectRight",precondition:void 0,kbOpts:{weight:Li,kbExpr:B.textInputFocus,primary:3601,linux:{primary:0}}})}_getColumnSelectResult(S,L,x,k){return Lv.columnSelectRight(S.cursorConfig,S,x)}});class i extends t{constructor(L){super(L),this._isPaged=L.isPaged}_getColumnSelectResult(L,x,k,E){return Lv.columnSelectUp(L.cursorConfig,L,k,this._isPaged)}}o.CursorColumnSelectUp=Re(new i({isPaged:!1,id:"cursorColumnSelectUp",precondition:void 0,kbOpts:{weight:Li,kbExpr:B.textInputFocus,primary:3600,linux:{primary:0}}})),o.CursorColumnSelectPageUp=Re(new i({isPaged:!0,id:"cursorColumnSelectPageUp",precondition:void 0,kbOpts:{weight:Li,kbExpr:B.textInputFocus,primary:3595,linux:{primary:0}}}));class n extends t{constructor(L){super(L),this._isPaged=L.isPaged}_getColumnSelectResult(L,x,k,E){return Lv.columnSelectDown(L.cursorConfig,L,k,this._isPaged)}}o.CursorColumnSelectDown=Re(new n({isPaged:!1,id:"cursorColumnSelectDown",precondition:void 0,kbOpts:{weight:Li,kbExpr:B.textInputFocus,primary:3602,linux:{primary:0}}})),o.CursorColumnSelectPageDown=Re(new n({isPaged:!0,id:"cursorColumnSelectPageDown",precondition:void 0,kbOpts:{weight:Li,kbExpr:B.textInputFocus,primary:3596,linux:{primary:0}}}));class s extends is{constructor(){super({id:"cursorMove",precondition:void 0,metadata:BP.metadata})}runCoreEditorCommand(L,x){const k=BP.parse(x);k&&this._runCursorMove(L,x.source,k)}_runCursorMove(L,x,k){L.model.pushStackElement(),L.setCursorStates(x,3,s._move(L,L.getCursorStates(),k)),L.revealAllCursors(x,!0)}static _move(L,x,k){const E=k.select,N=k.value;switch(k.direction){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:return po.simpleMove(L,x,k.direction,E,N,k.unit);case 11:case 13:case 12:case 14:return po.viewportMove(L,x,k.direction,E,N);default:return null}}}o.CursorMoveImpl=s,o.CursorMove=Re(new s);class r extends is{constructor(L){super(L),this._staticArgs=L.args}runCoreEditorCommand(L,x){let k=this._staticArgs;this._staticArgs.value===-1&&(k={direction:this._staticArgs.direction,unit:this._staticArgs.unit,select:this._staticArgs.select,value:x.pageSize||L.cursorConfig.pageSize}),L.model.pushStackElement(),L.setCursorStates(x.source,3,po.simpleMove(L,L.getCursorStates(),k.direction,k.select,k.value,k.unit)),L.revealAllCursors(x.source,!0)}}o.CursorLeft=Re(new r({args:{direction:0,unit:0,select:!1,value:1},id:"cursorLeft",precondition:void 0,kbOpts:{weight:Li,kbExpr:B.textInputFocus,primary:15,mac:{primary:15,secondary:[288]}}})),o.CursorLeftSelect=Re(new r({args:{direction:0,unit:0,select:!0,value:1},id:"cursorLeftSelect",precondition:void 0,kbOpts:{weight:Li,kbExpr:B.textInputFocus,primary:1039}})),o.CursorRight=Re(new r({args:{direction:1,unit:0,select:!1,value:1},id:"cursorRight",precondition:void 0,kbOpts:{weight:Li,kbExpr:B.textInputFocus,primary:17,mac:{primary:17,secondary:[292]}}})),o.CursorRightSelect=Re(new r({args:{direction:1,unit:0,select:!0,value:1},id:"cursorRightSelect",precondition:void 0,kbOpts:{weight:Li,kbExpr:B.textInputFocus,primary:1041}})),o.CursorUp=Re(new r({args:{direction:2,unit:2,select:!1,value:1},id:"cursorUp",precondition:void 0,kbOpts:{weight:Li,kbExpr:B.textInputFocus,primary:16,mac:{primary:16,secondary:[302]}}})),o.CursorUpSelect=Re(new r({args:{direction:2,unit:2,select:!0,value:1},id:"cursorUpSelect",precondition:void 0,kbOpts:{weight:Li,kbExpr:B.textInputFocus,primary:1040,secondary:[3088],mac:{primary:1040},linux:{primary:1040}}})),o.CursorPageUp=Re(new r({args:{direction:2,unit:2,select:!1,value:-1},id:"cursorPageUp",precondition:void 0,kbOpts:{weight:Li,kbExpr:B.textInputFocus,primary:11}})),o.CursorPageUpSelect=Re(new r({args:{direction:2,unit:2,select:!0,value:-1},id:"cursorPageUpSelect",precondition:void 0,kbOpts:{weight:Li,kbExpr:B.textInputFocus,primary:1035}})),o.CursorDown=Re(new r({args:{direction:3,unit:2,select:!1,value:1},id:"cursorDown",precondition:void 0,kbOpts:{weight:Li,kbExpr:B.textInputFocus,primary:18,mac:{primary:18,secondary:[300]}}})),o.CursorDownSelect=Re(new r({args:{direction:3,unit:2,select:!0,value:1},id:"cursorDownSelect",precondition:void 0,kbOpts:{weight:Li,kbExpr:B.textInputFocus,primary:1042,secondary:[3090],mac:{primary:1042},linux:{primary:1042}}})),o.CursorPageDown=Re(new r({args:{direction:3,unit:2,select:!1,value:-1},id:"cursorPageDown",precondition:void 0,kbOpts:{weight:Li,kbExpr:B.textInputFocus,primary:12}})),o.CursorPageDownSelect=Re(new r({args:{direction:3,unit:2,select:!0,value:-1},id:"cursorPageDownSelect",precondition:void 0,kbOpts:{weight:Li,kbExpr:B.textInputFocus,primary:1036}})),o.CreateCursor=Re(new class extends is{constructor(){super({id:"createCursor",precondition:void 0})}runCoreEditorCommand(S,L){if(!L.position)return;let x;L.wholeLine?x=po.line(S,S.getPrimaryCursorState(),!1,L.position,L.viewPosition):x=po.moveTo(S,S.getPrimaryCursorState(),!1,L.position,L.viewPosition);const k=S.getCursorStates();if(k.length>1){const E=x.modelState?x.modelState.position:null,N=x.viewState?x.viewState.position:null;for(let A=0,P=k.length;A<P;A++){const H=k[A];if(!(E&&!H.modelState.selection.containsPosition(E))&&!(N&&!H.viewState.selection.containsPosition(N))){k.splice(A,1),S.model.pushStackElement(),S.setCursorStates(L.source,3,k);return}}}k.push(x),S.model.pushStackElement(),S.setCursorStates(L.source,3,k)}}),o.LastCursorMoveToSelect=Re(new class extends is{constructor(){super({id:"_lastCursorMoveToSelect",precondition:void 0})}runCoreEditorCommand(S,L){if(!L.position)return;const x=S.getLastAddedCursorIndex(),k=S.getCursorStates(),E=k.slice(0);E[x]=po.moveTo(S,k[x],!0,L.position,L.viewPosition),S.model.pushStackElement(),S.setCursorStates(L.source,3,E)}});class a extends is{constructor(L){super(L),this._inSelectionMode=L.inSelectionMode}runCoreEditorCommand(L,x){L.model.pushStackElement(),L.setCursorStates(x.source,3,po.moveToBeginningOfLine(L,L.getCursorStates(),this._inSelectionMode)),L.revealAllCursors(x.source,!0)}}o.CursorHome=Re(new a({inSelectionMode:!1,id:"cursorHome",precondition:void 0,kbOpts:{weight:Li,kbExpr:B.textInputFocus,primary:14,mac:{primary:14,secondary:[2063]}}})),o.CursorHomeSelect=Re(new a({inSelectionMode:!0,id:"cursorHomeSelect",precondition:void 0,kbOpts:{weight:Li,kbExpr:B.textInputFocus,primary:1038,mac:{primary:1038,secondary:[3087]}}}));class l extends is{constructor(L){super(L),this._inSelectionMode=L.inSelectionMode}runCoreEditorCommand(L,x){L.model.pushStackElement(),L.setCursorStates(x.source,3,this._exec(L.getCursorStates())),L.revealAllCursors(x.source,!0)}_exec(L){const x=[];for(let k=0,E=L.length;k<E;k++){const N=L[k],A=N.modelState.position.lineNumber;x[k]=di.fromModelState(N.modelState.move(this._inSelectionMode,A,1,0))}return x}}o.CursorLineStart=Re(new l({inSelectionMode:!1,id:"cursorLineStart",precondition:void 0,kbOpts:{weight:Li,kbExpr:B.textInputFocus,primary:0,mac:{primary:287}}})),o.CursorLineStartSelect=Re(new l({inSelectionMode:!0,id:"cursorLineStartSelect",precondition:void 0,kbOpts:{weight:Li,kbExpr:B.textInputFocus,primary:0,mac:{primary:1311}}}));class c extends is{constructor(L){super(L),this._inSelectionMode=L.inSelectionMode}runCoreEditorCommand(L,x){L.model.pushStackElement(),L.setCursorStates(x.source,3,po.moveToEndOfLine(L,L.getCursorStates(),this._inSelectionMode,x.sticky||!1)),L.revealAllCursors(x.source,!0)}}o.CursorEnd=Re(new c({inSelectionMode:!1,id:"cursorEnd",precondition:void 0,kbOpts:{args:{sticky:!1},weight:Li,kbExpr:B.textInputFocus,primary:13,mac:{primary:13,secondary:[2065]}},metadata:{description:"Go to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:v("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}})),o.CursorEndSelect=Re(new c({inSelectionMode:!0,id:"cursorEndSelect",precondition:void 0,kbOpts:{args:{sticky:!1},weight:Li,kbExpr:B.textInputFocus,primary:1037,mac:{primary:1037,secondary:[3089]}},metadata:{description:"Select to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:v("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}}));class u extends is{constructor(L){super(L),this._inSelectionMode=L.inSelectionMode}runCoreEditorCommand(L,x){L.model.pushStackElement(),L.setCursorStates(x.source,3,this._exec(L,L.getCursorStates())),L.revealAllCursors(x.source,!0)}_exec(L,x){const k=[];for(let E=0,N=x.length;E<N;E++){const A=x[E],P=A.modelState.position.lineNumber,H=L.model.getLineMaxColumn(P);k[E]=di.fromModelState(A.modelState.move(this._inSelectionMode,P,H,0))}return k}}o.CursorLineEnd=Re(new u({inSelectionMode:!1,id:"cursorLineEnd",precondition:void 0,kbOpts:{weight:Li,kbExpr:B.textInputFocus,primary:0,mac:{primary:291}}})),o.CursorLineEndSelect=Re(new u({inSelectionMode:!0,id:"cursorLineEndSelect",precondition:void 0,kbOpts:{weight:Li,kbExpr:B.textInputFocus,primary:0,mac:{primary:1315}}}));class f extends is{constructor(L){super(L),this._inSelectionMode=L.inSelectionMode}runCoreEditorCommand(L,x){L.model.pushStackElement(),L.setCursorStates(x.source,3,po.moveToBeginningOfBuffer(L,L.getCursorStates(),this._inSelectionMode)),L.revealAllCursors(x.source,!0)}}o.CursorTop=Re(new f({inSelectionMode:!1,id:"cursorTop",precondition:void 0,kbOpts:{weight:Li,kbExpr:B.textInputFocus,primary:2062,mac:{primary:2064}}})),o.CursorTopSelect=Re(new f({inSelectionMode:!0,id:"cursorTopSelect",precondition:void 0,kbOpts:{weight:Li,kbExpr:B.textInputFocus,primary:3086,mac:{primary:3088}}}));class g extends is{constructor(L){super(L),this._inSelectionMode=L.inSelectionMode}runCoreEditorCommand(L,x){L.model.pushStackElement(),L.setCursorStates(x.source,3,po.moveToEndOfBuffer(L,L.getCursorStates(),this._inSelectionMode)),L.revealAllCursors(x.source,!0)}}o.CursorBottom=Re(new g({inSelectionMode:!1,id:"cursorBottom",precondition:void 0,kbOpts:{weight:Li,kbExpr:B.textInputFocus,primary:2061,mac:{primary:2066}}})),o.CursorBottomSelect=Re(new g({inSelectionMode:!0,id:"cursorBottomSelect",precondition:void 0,kbOpts:{weight:Li,kbExpr:B.textInputFocus,primary:3085,mac:{primary:3090}}}));class p extends is{constructor(){super({id:"editorScroll",precondition:void 0,metadata:Eo.metadata})}determineScrollMethod(L){const x=[6],k=[1,2,3,4,5,6],E=[4,2],N=[1,3];return x.includes(L.unit)&&E.includes(L.direction)?this._runHorizontalEditorScroll.bind(this):k.includes(L.unit)&&N.includes(L.direction)?this._runVerticalEditorScroll.bind(this):null}runCoreEditorCommand(L,x){const k=Eo.parse(x);if(!k)return;const E=this.determineScrollMethod(k);E&&E(L,x.source,k)}_runVerticalEditorScroll(L,x,k){const E=this._computeDesiredScrollTop(L,k);if(k.revealCursor){const N=L.getCompletelyVisibleViewRangeAtScrollTop(E);L.setCursorStates(x,3,[po.findPositionInViewportIfOutside(L,L.getPrimaryCursorState(),N,k.select)])}L.viewLayout.setScrollPosition({scrollTop:E},0)}_computeDesiredScrollTop(L,x){if(x.unit===1){const N=L.viewLayout.getFutureViewport(),A=L.getCompletelyVisibleViewRangeAtScrollTop(N.top),P=L.coordinatesConverter.convertViewRangeToModelRange(A);let H;x.direction===1?H=Math.max(1,P.startLineNumber-x.value):H=Math.min(L.model.getLineCount(),P.startLineNumber+x.value);const ee=L.coordinatesConverter.convertModelPositionToViewPosition(new G(H,1));return L.viewLayout.getVerticalOffsetForLineNumber(ee.lineNumber)}if(x.unit===5){let N=0;return x.direction===3&&(N=L.model.getLineCount()-L.cursorConfig.pageSize),L.viewLayout.getVerticalOffsetForLineNumber(N)}let k;x.unit===3?k=L.cursorConfig.pageSize*x.value:x.unit===4?k=Math.round(L.cursorConfig.pageSize/2)*x.value:k=x.value;const E=(x.direction===1?-1:1)*k;return L.viewLayout.getCurrentScrollTop()+E*L.cursorConfig.lineHeight}_runHorizontalEditorScroll(L,x,k){const E=this._computeDesiredScrollLeft(L,k);L.viewLayout.setScrollPosition({scrollLeft:E},0)}_computeDesiredScrollLeft(L,x){const k=(x.direction===4?-1:1)*x.value;return L.viewLayout.getCurrentScrollLeft()+k*L.cursorConfig.typicalHalfwidthCharacterWidth}}o.EditorScrollImpl=p,o.EditorScroll=Re(new p),o.ScrollLineUp=Re(new class extends is{constructor(){super({id:"scrollLineUp",precondition:void 0,kbOpts:{weight:Li,kbExpr:B.textInputFocus,primary:2064,mac:{primary:267}}})}runCoreEditorCommand(S,L){o.EditorScroll.runCoreEditorCommand(S,{to:Eo.RawDirection.Up,by:Eo.RawUnit.WrappedLine,value:1,revealCursor:!1,select:!1,source:L.source})}}),o.ScrollPageUp=Re(new class extends is{constructor(){super({id:"scrollPageUp",precondition:void 0,kbOpts:{weight:Li,kbExpr:B.textInputFocus,primary:2059,win:{primary:523},linux:{primary:523}}})}runCoreEditorCommand(S,L){o.EditorScroll.runCoreEditorCommand(S,{to:Eo.RawDirection.Up,by:Eo.RawUnit.Page,value:1,revealCursor:!1,select:!1,source:L.source})}}),o.ScrollEditorTop=Re(new class extends is{constructor(){super({id:"scrollEditorTop",precondition:void 0,kbOpts:{weight:Li,kbExpr:B.textInputFocus}})}runCoreEditorCommand(S,L){o.EditorScroll.runCoreEditorCommand(S,{to:Eo.RawDirection.Up,by:Eo.RawUnit.Editor,value:1,revealCursor:!1,select:!1,source:L.source})}}),o.ScrollLineDown=Re(new class extends is{constructor(){super({id:"scrollLineDown",precondition:void 0,kbOpts:{weight:Li,kbExpr:B.textInputFocus,primary:2066,mac:{primary:268}}})}runCoreEditorCommand(S,L){o.EditorScroll.runCoreEditorCommand(S,{to:Eo.RawDirection.Down,by:Eo.RawUnit.WrappedLine,value:1,revealCursor:!1,select:!1,source:L.source})}}),o.ScrollPageDown=Re(new class extends is{constructor(){super({id:"scrollPageDown",precondition:void 0,kbOpts:{weight:Li,kbExpr:B.textInputFocus,primary:2060,win:{primary:524},linux:{primary:524}}})}runCoreEditorCommand(S,L){o.EditorScroll.runCoreEditorCommand(S,{to:Eo.RawDirection.Down,by:Eo.RawUnit.Page,value:1,revealCursor:!1,select:!1,source:L.source})}}),o.ScrollEditorBottom=Re(new class extends is{constructor(){super({id:"scrollEditorBottom",precondition:void 0,kbOpts:{weight:Li,kbExpr:B.textInputFocus}})}runCoreEditorCommand(S,L){o.EditorScroll.runCoreEditorCommand(S,{to:Eo.RawDirection.Down,by:Eo.RawUnit.Editor,value:1,revealCursor:!1,select:!1,source:L.source})}}),o.ScrollLeft=Re(new class extends is{constructor(){super({id:"scrollLeft",precondition:void 0,kbOpts:{weight:Li,kbExpr:B.textInputFocus}})}runCoreEditorCommand(S,L){o.EditorScroll.runCoreEditorCommand(S,{to:Eo.RawDirection.Left,by:Eo.RawUnit.Column,value:2,revealCursor:!1,select:!1,source:L.source})}}),o.ScrollRight=Re(new class extends is{constructor(){super({id:"scrollRight",precondition:void 0,kbOpts:{weight:Li,kbExpr:B.textInputFocus}})}runCoreEditorCommand(S,L){o.EditorScroll.runCoreEditorCommand(S,{to:Eo.RawDirection.Right,by:Eo.RawUnit.Column,value:2,revealCursor:!1,select:!1,source:L.source})}});class _ extends is{constructor(L){super(L),this._inSelectionMode=L.inSelectionMode}runCoreEditorCommand(L,x){x.position&&(L.model.pushStackElement(),L.setCursorStates(x.source,3,[po.word(L,L.getPrimaryCursorState(),this._inSelectionMode,x.position)]),x.revealType!==2&&L.revealAllCursors(x.source,!0,!0))}}o.WordSelect=Re(new _({inSelectionMode:!1,id:"_wordSelect",precondition:void 0})),o.WordSelectDrag=Re(new _({inSelectionMode:!0,id:"_wordSelectDrag",precondition:void 0})),o.LastCursorWordSelect=Re(new class extends is{constructor(){super({id:"lastCursorWordSelect",precondition:void 0})}runCoreEditorCommand(S,L){if(!L.position)return;const x=S.getLastAddedCursorIndex(),k=S.getCursorStates(),E=k.slice(0),N=k[x];E[x]=po.word(S,N,N.modelState.hasSelection(),L.position),S.model.pushStackElement(),S.setCursorStates(L.source,3,E)}});class b extends is{constructor(L){super(L),this._inSelectionMode=L.inSelectionMode}runCoreEditorCommand(L,x){x.position&&(L.model.pushStackElement(),L.setCursorStates(x.source,3,[po.line(L,L.getPrimaryCursorState(),this._inSelectionMode,x.position,x.viewPosition)]),x.revealType!==2&&L.revealAllCursors(x.source,!1,!0))}}o.LineSelect=Re(new b({inSelectionMode:!1,id:"_lineSelect",precondition:void 0})),o.LineSelectDrag=Re(new b({inSelectionMode:!0,id:"_lineSelectDrag",precondition:void 0}));class y extends is{constructor(L){super(L),this._inSelectionMode=L.inSelectionMode}runCoreEditorCommand(L,x){if(!x.position)return;const k=L.getLastAddedCursorIndex(),E=L.getCursorStates(),N=E.slice(0);N[k]=po.line(L,E[k],this._inSelectionMode,x.position,x.viewPosition),L.model.pushStackElement(),L.setCursorStates(x.source,3,N)}}o.LastCursorLineSelect=Re(new y({inSelectionMode:!1,id:"lastCursorLineSelect",precondition:void 0})),o.LastCursorLineSelectDrag=Re(new y({inSelectionMode:!0,id:"lastCursorLineSelectDrag",precondition:void 0})),o.CancelSelection=Re(new class extends is{constructor(){super({id:"cancelSelection",precondition:B.hasNonEmptySelection,kbOpts:{weight:Li,kbExpr:B.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(S,L){S.model.pushStackElement(),S.setCursorStates(L.source,3,[po.cancelSelection(S,S.getPrimaryCursorState())]),S.revealAllCursors(L.source,!0)}}),o.RemoveSecondaryCursors=Re(new class extends is{constructor(){super({id:"removeSecondaryCursors",precondition:B.hasMultipleSelections,kbOpts:{weight:Li+1,kbExpr:B.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(S,L){S.model.pushStackElement(),S.setCursorStates(L.source,3,[S.getPrimaryCursorState()]),S.revealAllCursors(L.source,!0),Oh(v("removedCursor","Removed secondary cursors"))}}),o.RevealLine=Re(new class extends is{constructor(){super({id:"revealLine",precondition:void 0,metadata:Hw.metadata})}runCoreEditorCommand(S,L){const x=L,k=x.lineNumber||0;let E=typeof k=="number"?k+1:parseInt(k)+1;E<1&&(E=1);const N=S.model.getLineCount();E>N&&(E=N);const A=new M(E,1,E,S.model.getLineMaxColumn(E));let P=0;if(x.at)switch(x.at){case Hw.RawAtArgument.Top:P=3;break;case Hw.RawAtArgument.Center:P=1;break;case Hw.RawAtArgument.Bottom:P=4;break}const H=S.coordinatesConverter.convertModelRangeToViewRange(A);S.revealRange(L.source,!1,H,P,0)}}),o.SelectAll=new class extends Kz{constructor(){super(UEe)}runDOMCommand(S){Lc&&(S.focus(),S.select()),S.ownerDocument.execCommand("selectAll")}runEditorCommand(S,L,x){const k=L._getViewModel();k&&this.runCoreEditorCommand(k,x)}runCoreEditorCommand(S,L){S.model.pushStackElement(),S.setCursorStates("keyboard",3,[po.selectAll(S,S.getPrimaryCursorState())])}},o.SetSelection=Re(new class extends is{constructor(){super({id:"setSelection",precondition:void 0})}runCoreEditorCommand(S,L){L.selection&&(S.model.pushStackElement(),S.setCursorStates(L.source,3,[di.fromModelSelection(L.selection)]))}})})(no||(no={}));const JWe=de.and(B.textInputFocus,B.columnSelection);function r0(o,e){ea.registerKeybindingRule({id:o,primary:e,when:JWe,weight:Li+1})}r0(no.CursorColumnSelectLeft.id,1039);r0(no.CursorColumnSelectRight.id,1041);r0(no.CursorColumnSelectUp.id,1040);r0(no.CursorColumnSelectPageUp.id,1035);r0(no.CursorColumnSelectDown.id,1042);r0(no.CursorColumnSelectPageDown.id,1036);function foe(o){return o.register(),o}var M1;(function(o){class e extends Bs{runEditorCommand(i,n,s){const r=n._getViewModel();r&&this.runCoreEditingCommand(n,r,s||{})}}o.CoreEditingCommand=e,o.LineBreakInsert=Re(new class extends e{constructor(){super({id:"lineBreakInsert",precondition:B.writable,kbOpts:{weight:Li,kbExpr:B.textInputFocus,primary:0,mac:{primary:301}}})}runCoreEditingCommand(t,i,n){t.pushUndoStop(),t.executeCommands(this.id,K4.lineBreakInsert(i.cursorConfig,i.model,i.getCursorStates().map(s=>s.modelState.selection)))}}),o.Outdent=Re(new class extends e{constructor(){super({id:"outdent",precondition:B.writable,kbOpts:{weight:Li,kbExpr:de.and(B.editorTextFocus,B.tabDoesNotMoveFocus),primary:1026}})}runCoreEditingCommand(t,i,n){t.pushUndoStop(),t.executeCommands(this.id,zp.outdent(i.cursorConfig,i.model,i.getCursorStates().map(s=>s.modelState.selection))),t.pushUndoStop()}}),o.Tab=Re(new class extends e{constructor(){super({id:"tab",precondition:B.writable,kbOpts:{weight:Li,kbExpr:de.and(B.editorTextFocus,B.tabDoesNotMoveFocus),primary:2}})}runCoreEditingCommand(t,i,n){t.pushUndoStop(),t.executeCommands(this.id,zp.tab(i.cursorConfig,i.model,i.getCursorStates().map(s=>s.modelState.selection))),t.pushUndoStop()}}),o.DeleteLeft=Re(new class extends e{constructor(){super({id:"deleteLeft",precondition:void 0,kbOpts:{weight:Li,kbExpr:B.textInputFocus,primary:1,secondary:[1025],mac:{primary:1,secondary:[1025,294,257]}}})}runCoreEditingCommand(t,i,n){const[s,r]=vC.deleteLeft(i.getPrevEditOperationType(),i.cursorConfig,i.model,i.getCursorStates().map(a=>a.modelState.selection),i.getCursorAutoClosedCharacters());s&&t.pushUndoStop(),t.executeCommands(this.id,r),i.setPrevEditOperationType(2)}}),o.DeleteRight=Re(new class extends e{constructor(){super({id:"deleteRight",precondition:void 0,kbOpts:{weight:Li,kbExpr:B.textInputFocus,primary:20,mac:{primary:20,secondary:[290,276]}}})}runCoreEditingCommand(t,i,n){const[s,r]=vC.deleteRight(i.getPrevEditOperationType(),i.cursorConfig,i.model,i.getCursorStates().map(a=>a.modelState.selection));s&&t.pushUndoStop(),t.executeCommands(this.id,r),i.setPrevEditOperationType(3)}}),o.Undo=new class extends Kz{constructor(){super(Oce)}runDOMCommand(t){t.ownerDocument.execCommand("undo")}runEditorCommand(t,i,n){if(!(!i.hasModel()||i.getOption(92)===!0))return i.getModel().undo()}},o.Redo=new class extends Kz{constructor(){super(Fce)}runDOMCommand(t){t.ownerDocument.execCommand("redo")}runEditorCommand(t,i,n){if(!(!i.hasModel()||i.getOption(92)===!0))return i.getModel().redo()}}})(M1||(M1={}));class goe extends o4{constructor(e,t,i){super({id:e,precondition:void 0,metadata:i}),this._handlerId=t}runCommand(e,t){const i=e.get(hi).getFocusedCodeEditor();i&&i.trigger("keyboard",this._handlerId,t)}}function zC(o,e){foe(new goe("default:"+o,o)),foe(new goe(o,o,e))}zC("type",{description:"Type",args:[{name:"args",schema:{type:"object",required:["text"],properties:{text:{type:"string"}}}}]});zC("replacePreviousChar");zC("compositionType");zC("compositionStart");zC("compositionEnd");zC("paste");zC("cut");class eHe{constructor(e,t,i,n){this.configuration=e,this.viewModel=t,this.userInputEvents=i,this.commandDelegate=n}paste(e,t,i,n){this.commandDelegate.paste(e,t,i,n)}type(e){this.commandDelegate.type(e)}compositionType(e,t,i,n){this.commandDelegate.compositionType(e,t,i,n)}compositionStart(){this.commandDelegate.startComposition()}compositionEnd(){this.commandDelegate.endComposition()}cut(){this.commandDelegate.cut()}setSelection(e){no.SetSelection.runCoreEditorCommand(this.viewModel,{source:"keyboard",selection:e})}_validateViewColumn(e){const t=this.viewModel.getLineMinColumn(e.lineNumber);return e.column<t?new G(e.lineNumber,t):e}_hasMulticursorModifier(e){switch(this.configuration.options.get(78)){case"altKey":return e.altKey;case"ctrlKey":return e.ctrlKey;case"metaKey":return e.metaKey;default:return!1}}_hasNonMulticursorModifier(e){switch(this.configuration.options.get(78)){case"altKey":return e.ctrlKey||e.metaKey;case"ctrlKey":return e.altKey||e.metaKey;case"metaKey":return e.ctrlKey||e.altKey;default:return!1}}dispatchMouse(e){const t=this.configuration.options,i=Qr&&t.get(108),n=t.get(22);e.middleButton&&!i?this._columnSelect(e.position,e.mouseColumn,e.inSelectionMode):e.startedOnLineNumbers?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelect(e.position,e.revealType):this._createCursor(e.position,!0):e.inSelectionMode?this._lineSelectDrag(e.position,e.revealType):this._lineSelect(e.position,e.revealType):e.mouseDownCount>=4?this._selectAll():e.mouseDownCount===3?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelectDrag(e.position,e.revealType):this._lastCursorLineSelect(e.position,e.revealType):e.inSelectionMode?this._lineSelectDrag(e.position,e.revealType):this._lineSelect(e.position,e.revealType):e.mouseDownCount===2?e.onInjectedText||(this._hasMulticursorModifier(e)?this._lastCursorWordSelect(e.position,e.revealType):e.inSelectionMode?this._wordSelectDrag(e.position,e.revealType):this._wordSelect(e.position,e.revealType)):this._hasMulticursorModifier(e)?this._hasNonMulticursorModifier(e)||(e.shiftKey?this._columnSelect(e.position,e.mouseColumn,!0):e.inSelectionMode?this._lastCursorMoveToSelect(e.position,e.revealType):this._createCursor(e.position,!1)):e.inSelectionMode?e.altKey?this._columnSelect(e.position,e.mouseColumn,!0):n?this._columnSelect(e.position,e.mouseColumn,!0):this._moveToSelect(e.position,e.revealType):this.moveTo(e.position,e.revealType)}_usualArgs(e,t){return e=this._validateViewColumn(e),{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,revealType:t}}moveTo(e,t){no.MoveTo.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_moveToSelect(e,t){no.MoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_columnSelect(e,t,i){e=this._validateViewColumn(e),no.ColumnSelect.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,mouseColumn:t,doColumnSelect:i})}_createCursor(e,t){e=this._validateViewColumn(e),no.CreateCursor.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,wholeLine:t})}_lastCursorMoveToSelect(e,t){no.LastCursorMoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_wordSelect(e,t){no.WordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_wordSelectDrag(e,t){no.WordSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorWordSelect(e,t){no.LastCursorWordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lineSelect(e,t){no.LineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lineSelectDrag(e,t){no.LineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorLineSelect(e,t){no.LastCursorLineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorLineSelectDrag(e,t){no.LastCursorLineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_selectAll(){no.SelectAll.runCoreEditorCommand(this.viewModel,{source:"mouse"})}_convertViewToModelPosition(e){return this.viewModel.coordinatesConverter.convertViewPositionToModelPosition(e)}emitKeyDown(e){this.userInputEvents.emitKeyDown(e)}emitKeyUp(e){this.userInputEvents.emitKeyUp(e)}emitContextMenu(e){this.userInputEvents.emitContextMenu(e)}emitMouseMove(e){this.userInputEvents.emitMouseMove(e)}emitMouseLeave(e){this.userInputEvents.emitMouseLeave(e)}emitMouseUp(e){this.userInputEvents.emitMouseUp(e)}emitMouseDown(e){this.userInputEvents.emitMouseDown(e)}emitMouseDrag(e){this.userInputEvents.emitMouseDrag(e)}emitMouseDrop(e){this.userInputEvents.emitMouseDrop(e)}emitMouseDropCanceled(){this.userInputEvents.emitMouseDropCanceled()}emitMouseWheel(e){this.userInputEvents.emitMouseWheel(e)}}class vfe{constructor(e){this._lineFactory=e,this._set(1,[])}flush(){this._set(1,[])}_set(e,t){this._lines=t,this._rendLineNumberStart=e}_get(){return{rendLineNumberStart:this._rendLineNumberStart,lines:this._lines}}getStartLineNumber(){return this._rendLineNumberStart}getEndLineNumber(){return this._rendLineNumberStart+this._lines.length-1}getCount(){return this._lines.length}getLine(e){const t=e-this._rendLineNumberStart;if(t<0||t>=this._lines.length)throw new wi("Illegal value for lineNumber");return this._lines[t]}onLinesDeleted(e,t){if(this.getCount()===0)return null;const i=this.getStartLineNumber(),n=this.getEndLineNumber();if(t<i){const l=t-e+1;return this._rendLineNumberStart-=l,null}if(e>n)return null;let s=0,r=0;for(let l=i;l<=n;l++){const c=l-this._rendLineNumberStart;e<=l&&l<=t&&(r===0?(s=c,r=1):r++)}if(e<i){let l=0;t<i?l=t-e+1:l=i-e,this._rendLineNumberStart-=l}return this._lines.splice(s,r)}onLinesChanged(e,t){const i=e+t-1;if(this.getCount()===0)return!1;const n=this.getStartLineNumber(),s=this.getEndLineNumber();let r=!1;for(let a=e;a<=i;a++)a>=n&&a<=s&&(this._lines[a-this._rendLineNumberStart].onContentChanged(),r=!0);return r}onLinesInserted(e,t){if(this.getCount()===0)return null;const i=t-e+1,n=this.getStartLineNumber(),s=this.getEndLineNumber();if(e<=n)return this._rendLineNumberStart+=i,null;if(e>s)return null;if(i+e>s)return this._lines.splice(e-this._rendLineNumberStart,s-e+1);const r=[];for(let f=0;f<i;f++)r[f]=this._lineFactory.createLine();const a=e-this._rendLineNumberStart,l=this._lines.slice(0,a),c=this._lines.slice(a,this._lines.length-i),u=this._lines.slice(this._lines.length-i,this._lines.length);return this._lines=l.concat(r).concat(c),u}onTokensChanged(e){if(this.getCount()===0)return!1;const t=this.getStartLineNumber(),i=this.getEndLineNumber();let n=!1;for(let s=0,r=e.length;s<r;s++){const a=e[s];if(a.toLineNumber<t||a.fromLineNumber>i)continue;const l=Math.max(t,a.fromLineNumber),c=Math.min(i,a.toLineNumber);for(let u=l;u<=c;u++){const f=u-this._rendLineNumberStart;this._lines[f].onTokensChanged(),n=!0}}return n}}class bfe{constructor(e){this._lineFactory=e,this.domNode=this._createDomNode(),this._linesCollection=new vfe(this._lineFactory)}_createDomNode(){const e=ki(document.createElement("div"));return e.setClassName("view-layer"),e.setPosition("absolute"),e.domNode.setAttribute("role","presentation"),e.domNode.setAttribute("aria-hidden","true"),e}onConfigurationChanged(e){return!!e.hasChanged(146)}onFlushed(e){return this._linesCollection.flush(),!0}onLinesChanged(e){return this._linesCollection.onLinesChanged(e.fromLineNumber,e.count)}onLinesDeleted(e){const t=this._linesCollection.onLinesDeleted(e.fromLineNumber,e.toLineNumber);if(t)for(let i=0,n=t.length;i<n;i++){const s=t[i].getDomNode();s==null||s.remove()}return!0}onLinesInserted(e){const t=this._linesCollection.onLinesInserted(e.fromLineNumber,e.toLineNumber);if(t)for(let i=0,n=t.length;i<n;i++){const s=t[i].getDomNode();s==null||s.remove()}return!0}onScrollChanged(e){return e.scrollTopChanged}onTokensChanged(e){return this._linesCollection.onTokensChanged(e.ranges)}onZonesChanged(e){return!0}getStartLineNumber(){return this._linesCollection.getStartLineNumber()}getEndLineNumber(){return this._linesCollection.getEndLineNumber()}getVisibleLine(e){return this._linesCollection.getLine(e)}renderLines(e){const t=this._linesCollection._get(),i=new Gz(this.domNode.domNode,this._lineFactory,e),n={rendLineNumberStart:t.rendLineNumberStart,lines:t.lines,linesLength:t.lines.length},s=i.render(n,e.startLineNumber,e.endLineNumber,e.relativeVerticalOffset);this._linesCollection._set(s.rendLineNumberStart,s.lines)}}const Bf=class Bf{constructor(e,t,i){this._domNode=e,this._lineFactory=t,this._viewportData=i}render(e,t,i,n){const s={rendLineNumberStart:e.rendLineNumberStart,lines:e.lines.slice(0),linesLength:e.linesLength};if(s.rendLineNumberStart+s.linesLength-1<t||i<s.rendLineNumberStart){s.rendLineNumberStart=t,s.linesLength=i-t+1,s.lines=[];for(let r=t;r<=i;r++)s.lines[r-t]=this._lineFactory.createLine();return this._finishRendering(s,!0,n),s}if(this._renderUntouchedLines(s,Math.max(t-s.rendLineNumberStart,0),Math.min(i-s.rendLineNumberStart,s.linesLength-1),n,t),s.rendLineNumberStart>t){const r=t,a=Math.min(i,s.rendLineNumberStart-1);r<=a&&(this._insertLinesBefore(s,r,a,n,t),s.linesLength+=a-r+1)}else if(s.rendLineNumberStart<t){const r=Math.min(s.linesLength,t-s.rendLineNumberStart);r>0&&(this._removeLinesBefore(s,r),s.linesLength-=r)}if(s.rendLineNumberStart=t,s.rendLineNumberStart+s.linesLength-1<i){const r=s.rendLineNumberStart+s.linesLength,a=i;r<=a&&(this._insertLinesAfter(s,r,a,n,t),s.linesLength+=a-r+1)}else if(s.rendLineNumberStart+s.linesLength-1>i){const r=Math.max(0,i-s.rendLineNumberStart+1),l=s.linesLength-1-r+1;l>0&&(this._removeLinesAfter(s,l),s.linesLength-=l)}return this._finishRendering(s,!1,n),s}_renderUntouchedLines(e,t,i,n,s){const r=e.rendLineNumberStart,a=e.lines;for(let l=t;l<=i;l++){const c=r+l;a[l].layoutLine(c,n[c-s],this._viewportData.lineHeight)}}_insertLinesBefore(e,t,i,n,s){const r=[];let a=0;for(let l=t;l<=i;l++)r[a++]=this._lineFactory.createLine();e.lines=r.concat(e.lines)}_removeLinesBefore(e,t){for(let i=0;i<t;i++){const n=e.lines[i].getDomNode();n==null||n.remove()}e.lines.splice(0,t)}_insertLinesAfter(e,t,i,n,s){const r=[];let a=0;for(let l=t;l<=i;l++)r[a++]=this._lineFactory.createLine();e.lines=e.lines.concat(r)}_removeLinesAfter(e,t){const i=e.linesLength-t;for(let n=0;n<t;n++){const s=e.lines[i+n].getDomNode();s==null||s.remove()}e.lines.splice(i,t)}_finishRenderingNewLines(e,t,i,n){Bf._ttPolicy&&(i=Bf._ttPolicy.createHTML(i));const s=this._domNode.lastChild;t||!s?this._domNode.innerHTML=i:s.insertAdjacentHTML("afterend",i);let r=this._domNode.lastChild;for(let a=e.linesLength-1;a>=0;a--){const l=e.lines[a];n[a]&&(l.setDomNode(r),r=r.previousSibling)}}_finishRenderingInvalidLines(e,t,i){const n=document.createElement("div");Bf._ttPolicy&&(t=Bf._ttPolicy.createHTML(t)),n.innerHTML=t;for(let s=0;s<e.linesLength;s++){const r=e.lines[s];if(i[s]){const a=n.firstChild,l=r.getDomNode();l.parentNode.replaceChild(a,l),r.setDomNode(a)}}}_finishRendering(e,t,i){const n=Bf._sb,s=e.linesLength,r=e.lines,a=e.rendLineNumberStart,l=[];{n.reset();let c=!1;for(let u=0;u<s;u++){const f=r[u];l[u]=!1,!(f.getDomNode()||!f.renderLine(u+a,i[u],this._viewportData.lineHeight,this._viewportData,n))&&(l[u]=!0,c=!0)}c&&this._finishRenderingNewLines(e,t,n.build(),l)}{n.reset();let c=!1;const u=[];for(let f=0;f<s;f++){const g=r[f];u[f]=!1,!(l[f]||!g.renderLine(f+a,i[f],this._viewportData.lineHeight,this._viewportData,n))&&(u[f]=!0,c=!0)}c&&this._finishRenderingInvalidLines(e,n.build(),u)}}};Bf._ttPolicy=Ag("editorViewLayer",{createHTML:e=>e}),Bf._sb=new qS(1e5);let Gz=Bf;class Cfe extends hl{constructor(e){super(e),this._dynamicOverlays=[],this._isFocused=!1,this._visibleLines=new bfe({createLine:()=>new tHe(this._dynamicOverlays)}),this.domNode=this._visibleLines.domNode;const i=this._context.configuration.options.get(50);yo(this.domNode,i),this.domNode.setClassName("view-overlays")}shouldRender(){if(super.shouldRender())return!0;for(let e=0,t=this._dynamicOverlays.length;e<t;e++)if(this._dynamicOverlays[e].shouldRender())return!0;return!1}dispose(){super.dispose();for(let e=0,t=this._dynamicOverlays.length;e<t;e++)this._dynamicOverlays[e].dispose();this._dynamicOverlays=[]}getDomNode(){return this.domNode}addDynamicOverlay(e){this._dynamicOverlays.push(e)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e);const i=this._context.configuration.options.get(50);return yo(this.domNode,i),!0}onFlushed(e){return this._visibleLines.onFlushed(e)}onFocusChanged(e){return this._isFocused=e.isFocused,!0}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onScrollChanged(e){return this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._visibleLines.onZonesChanged(e)}prepareRender(e){const t=this._dynamicOverlays.filter(i=>i.shouldRender());for(let i=0,n=t.length;i<n;i++){const s=t[i];s.prepareRender(e),s.onDidRender()}}render(e){this._viewOverlaysRender(e),this.domNode.toggleClassName("focused",this._isFocused)}_viewOverlaysRender(e){this._visibleLines.renderLines(e.viewportData)}}class tHe{constructor(e){this._dynamicOverlays=e,this._domNode=null,this._renderedContent=null}getDomNode(){return this._domNode?this._domNode.domNode:null}setDomNode(e){this._domNode=ki(e)}onContentChanged(){}onTokensChanged(){}renderLine(e,t,i,n,s){let r="";for(let a=0,l=this._dynamicOverlays.length;a<l;a++){const c=this._dynamicOverlays[a];r+=c.render(n.startLineNumber,e)}return this._renderedContent===r?!1:(this._renderedContent=r,s.appendString('<div style="top:'),s.appendString(String(t)),s.appendString("px;height:"),s.appendString(String(i)),s.appendString('px;">'),s.appendString(r),s.appendString("</div>"),!0)}layoutLine(e,t,i){this._domNode&&(this._domNode.setTop(t),this._domNode.setHeight(i))}}class iHe extends Cfe{constructor(e){super(e);const i=this._context.configuration.options.get(146);this._contentWidth=i.contentWidth,this.domNode.setHeight(0)}onConfigurationChanged(e){const i=this._context.configuration.options.get(146);return this._contentWidth=i.contentWidth,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollWidthChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e),this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth))}}class nHe extends Cfe{constructor(e){super(e);const t=this._context.configuration.options,i=t.get(146);this._contentLeft=i.contentLeft,this.domNode.setClassName("margin-view-overlays"),this.domNode.setWidth(1),yo(this.domNode,t.get(50))}onConfigurationChanged(e){const t=this._context.configuration.options;yo(this.domNode,t.get(50));const i=t.get(146);return this._contentLeft=i.contentLeft,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollHeightChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e);const t=Math.min(e.scrollHeight,1e6);this.domNode.setHeight(t),this.domNode.setWidth(this._contentLeft)}}class Y4{constructor(e){this.onKeyDown=null,this.onKeyUp=null,this.onContextMenu=null,this.onMouseMove=null,this.onMouseLeave=null,this.onMouseDown=null,this.onMouseUp=null,this.onMouseDrag=null,this.onMouseDrop=null,this.onMouseDropCanceled=null,this.onMouseWheel=null,this._coordinatesConverter=e}emitKeyDown(e){var t;(t=this.onKeyDown)==null||t.call(this,e)}emitKeyUp(e){var t;(t=this.onKeyUp)==null||t.call(this,e)}emitContextMenu(e){var t;(t=this.onContextMenu)==null||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseMove(e){var t;(t=this.onMouseMove)==null||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseLeave(e){var t;(t=this.onMouseLeave)==null||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDown(e){var t;(t=this.onMouseDown)==null||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseUp(e){var t;(t=this.onMouseUp)==null||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDrag(e){var t;(t=this.onMouseDrag)==null||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDrop(e){var t;(t=this.onMouseDrop)==null||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDropCanceled(){var e;(e=this.onMouseDropCanceled)==null||e.call(this)}emitMouseWheel(e){var t;(t=this.onMouseWheel)==null||t.call(this,e)}_convertViewToModelMouseEvent(e){return e.target?{event:e.event,target:this._convertViewToModelMouseTarget(e.target)}:e}_convertViewToModelMouseTarget(e){return Y4.convertViewToModelMouseTarget(e,this._coordinatesConverter)}static convertViewToModelMouseTarget(e,t){const i={...e};return i.position&&(i.position=t.convertViewPositionToModelPosition(i.position)),i.range&&(i.range=t.convertViewRangeToModelRange(i.range)),(i.type===5||i.type===8)&&(i.detail=this.convertViewToModelViewZoneData(i.detail,t)),i}static convertViewToModelViewZoneData(e,t){return{viewZoneId:e.viewZoneId,positionBefore:e.positionBefore?t.convertViewPositionToModelPosition(e.positionBefore):e.positionBefore,positionAfter:e.positionAfter?t.convertViewPositionToModelPosition(e.positionAfter):e.positionAfter,position:t.convertViewPositionToModelPosition(e.position),afterLineNumber:t.convertViewPositionToModelPosition(new G(e.afterLineNumber,1)).lineNumber}}}class sHe extends hl{constructor(e){super(e),this.blocks=[],this.contentWidth=-1,this.contentLeft=0,this.domNode=ki(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("blockDecorations-container"),this.update()}update(){let e=!1;const i=this._context.configuration.options.get(146),n=i.contentWidth-i.verticalScrollbarWidth;this.contentWidth!==n&&(this.contentWidth=n,e=!0);const s=i.contentLeft;return this.contentLeft!==s&&(this.contentLeft=s,e=!0),e}dispose(){super.dispose()}onConfigurationChanged(e){return this.update()}onScrollChanged(e){return e.scrollTopChanged||e.scrollLeftChanged}onDecorationsChanged(e){return!0}onZonesChanged(e){return!0}prepareRender(e){}render(e){let t=0;const i=e.getDecorationsInViewport();for(const n of i){if(!n.options.blockClassName)continue;let s=this.blocks[t];s||(s=this.blocks[t]=ki(document.createElement("div")),this.domNode.appendChild(s));let r,a;n.options.blockIsAfterEnd?(r=e.getVerticalOffsetAfterLineNumber(n.range.endLineNumber,!1),a=e.getVerticalOffsetAfterLineNumber(n.range.endLineNumber,!0)):(r=e.getVerticalOffsetForLineNumber(n.range.startLineNumber,!0),a=n.range.isEmpty()&&!n.options.blockDoesNotCollapse?e.getVerticalOffsetForLineNumber(n.range.startLineNumber,!1):e.getVerticalOffsetAfterLineNumber(n.range.endLineNumber,!0));const[l,c,u,f]=n.options.blockPadding??[0,0,0,0];s.setClassName("blockDecorations-block "+n.options.blockClassName),s.setLeft(this.contentLeft-f),s.setWidth(this.contentWidth+f+c),s.setTop(r-e.scrollTop-l),s.setHeight(a-r+l+u),t++}for(let n=t;n<this.blocks.length;n++)this.blocks[n].domNode.remove();this.blocks.length=t}}class oHe extends hl{constructor(e,t){super(e),this._viewDomNode=t,this._widgets={},this.domNode=ki(document.createElement("div")),bu.write(this.domNode,1),this.domNode.setClassName("contentWidgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this.overflowingContentWidgetsDomNode=ki(document.createElement("div")),bu.write(this.overflowingContentWidgetsDomNode,2),this.overflowingContentWidgetsDomNode.setClassName("overflowingContentWidgets")}dispose(){super.dispose(),this._widgets={}}onConfigurationChanged(e){const t=Object.keys(this._widgets);for(const i of t)this._widgets[i].onConfigurationChanged(e);return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLineMappingChanged(e){return this._updateAnchorsViewPositions(),!0}onLinesChanged(e){return this._updateAnchorsViewPositions(),!0}onLinesDeleted(e){return this._updateAnchorsViewPositions(),!0}onLinesInserted(e){return this._updateAnchorsViewPositions(),!0}onScrollChanged(e){return!0}onZonesChanged(e){return!0}_updateAnchorsViewPositions(){const e=Object.keys(this._widgets);for(const t of e)this._widgets[t].updateAnchorViewPosition()}addWidget(e){const t=new rHe(this._context,this._viewDomNode,e);this._widgets[t.id]=t,t.allowEditorOverflow?this.overflowingContentWidgetsDomNode.appendChild(t.domNode):this.domNode.appendChild(t.domNode),this.setShouldRender()}setWidgetPosition(e,t,i,n,s){this._widgets[e.getId()].setPosition(t,i,n,s),this.setShouldRender()}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const i=this._widgets[t];delete this._widgets[t];const n=i.domNode.domNode;n.remove(),n.removeAttribute("monaco-visible-content-widget"),this.setShouldRender()}}shouldSuppressMouseDownOnWidget(e){return this._widgets.hasOwnProperty(e)?this._widgets[e].suppressMouseDown:!1}onBeforeRender(e){const t=Object.keys(this._widgets);for(const i of t)this._widgets[i].onBeforeRender(e)}prepareRender(e){const t=Object.keys(this._widgets);for(const i of t)this._widgets[i].prepareRender(e)}render(e){const t=Object.keys(this._widgets);for(const i of t)this._widgets[i].render(e)}}class rHe{constructor(e,t,i){this._primaryAnchor=new wx(null,null),this._secondaryAnchor=new wx(null,null),this._context=e,this._viewDomNode=t,this._actual=i,this.domNode=ki(this._actual.getDomNode()),this.id=this._actual.getId(),this.allowEditorOverflow=this._actual.allowEditorOverflow||!1,this.suppressMouseDown=this._actual.suppressMouseDown||!1;const n=this._context.configuration.options,s=n.get(146);this._fixedOverflowWidgets=n.get(42),this._contentWidth=s.contentWidth,this._contentLeft=s.contentLeft,this._lineHeight=n.get(67),this._affinity=null,this._preference=[],this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1,this._maxWidth=this._getMaxWidth(),this._isVisible=!1,this._renderData=null,this.domNode.setPosition(this._fixedOverflowWidgets&&this.allowEditorOverflow?"fixed":"absolute"),this.domNode.setDisplay("none"),this.domNode.setVisibility("hidden"),this.domNode.setAttribute("widgetId",this.id),this.domNode.setMaxWidth(this._maxWidth)}onConfigurationChanged(e){const t=this._context.configuration.options;if(this._lineHeight=t.get(67),e.hasChanged(146)){const i=t.get(146);this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,this._maxWidth=this._getMaxWidth()}}updateAnchorViewPosition(){this._setPosition(this._affinity,this._primaryAnchor.modelPosition,this._secondaryAnchor.modelPosition)}_setPosition(e,t,i){this._affinity=e,this._primaryAnchor=n(t,this._context.viewModel,this._affinity),this._secondaryAnchor=n(i,this._context.viewModel,this._affinity);function n(s,r,a){if(!s)return new wx(null,null);const l=r.model.validatePosition(s);if(r.coordinatesConverter.modelPositionIsVisible(l)){const c=r.coordinatesConverter.convertModelPositionToViewPosition(l,a??void 0);return new wx(s,c)}return new wx(s,null)}}_getMaxWidth(){const e=this.domNode.domNode.ownerDocument,t=e.defaultView;return this.allowEditorOverflow?(t==null?void 0:t.innerWidth)||e.documentElement.offsetWidth||e.body.offsetWidth:this._contentWidth}setPosition(e,t,i,n){this._setPosition(n,e,t),this._preference=i,this._primaryAnchor.viewPosition&&this._preference&&this._preference.length>0?this.domNode.setDisplay("block"):this.domNode.setDisplay("none"),this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1}_layoutBoxInViewport(e,t,i,n){const s=e.top,r=s,a=e.top+e.height,l=n.viewportHeight-a,c=s-i,u=r>=i,f=a,g=l>=i;let p=e.left;return p+t>n.scrollLeft+n.viewportWidth&&(p=n.scrollLeft+n.viewportWidth-t),p<n.scrollLeft&&(p=n.scrollLeft),{fitsAbove:u,aboveTop:c,fitsBelow:g,belowTop:f,left:p}}_layoutHorizontalSegmentInPage(e,t,i,n){const a=Math.max(15,t.left-n),l=Math.min(t.left+t.width+n,e.width-15),u=this._viewDomNode.domNode.ownerDocument.defaultView;let f=t.left+i-((u==null?void 0:u.scrollX)??0);if(f+n>l){const g=f-(l-n);f-=g,i-=g}if(f<a){const g=f-a;f-=g,i-=g}return[i,f]}_layoutBoxInPage(e,t,i,n){const s=e.top-i,r=e.top+e.height,a=os(this._viewDomNode.domNode),l=this._viewDomNode.domNode.ownerDocument,c=l.defaultView,u=a.top+s-((c==null?void 0:c.scrollY)??0),f=a.top+r-((c==null?void 0:c.scrollY)??0),g=Wm(l.body),[p,_]=this._layoutHorizontalSegmentInPage(g,a,e.left-n.scrollLeft+this._contentLeft,t),b=22,y=22,S=u>=b,L=f+i<=g.height-y;return this._fixedOverflowWidgets?{fitsAbove:S,aboveTop:Math.max(u,b),fitsBelow:L,belowTop:f,left:_}:{fitsAbove:S,aboveTop:s,fitsBelow:L,belowTop:r,left:p}}_prepareRenderWidgetAtExactPositionOverflowing(e){return new Sx(e.top,e.left+this._contentLeft)}_getAnchorsCoordinates(e){var r,a;const t=s(this._primaryAnchor.viewPosition,this._affinity,this._lineHeight),i=((r=this._secondaryAnchor.viewPosition)==null?void 0:r.lineNumber)===((a=this._primaryAnchor.viewPosition)==null?void 0:a.lineNumber)?this._secondaryAnchor.viewPosition:null,n=s(i,this._affinity,this._lineHeight);return{primary:t,secondary:n};function s(l,c,u){if(!l)return null;const f=e.visibleRangeForPosition(l);if(!f)return null;const g=l.column===1&&c===3?0:f.left,p=e.getVerticalOffsetForLineNumber(l.lineNumber)-e.scrollTop;return new poe(p,g,u)}}_reduceAnchorCoordinates(e,t,i){if(!t)return e;const n=this._context.configuration.options.get(50);let s=t.left;return s<e.left?s=Math.max(s,e.left-i+n.typicalFullwidthCharacterWidth):s=Math.min(s,e.left+i-n.typicalFullwidthCharacterWidth),new poe(e.top,s,e.height)}_prepareRenderWidget(e){if(!this._preference||this._preference.length===0)return null;const{primary:t,secondary:i}=this._getAnchorsCoordinates(e);if(!t)return{kind:"offViewport",preserveFocus:this.domNode.domNode.contains(this.domNode.domNode.ownerDocument.activeElement)};if(this._cachedDomNodeOffsetWidth===-1||this._cachedDomNodeOffsetHeight===-1){let r=null;if(typeof this._actual.beforeRender=="function"&&(r=Y7(this._actual.beforeRender,this._actual)),r)this._cachedDomNodeOffsetWidth=r.width,this._cachedDomNodeOffsetHeight=r.height;else{const l=this.domNode.domNode.getBoundingClientRect();this._cachedDomNodeOffsetWidth=Math.round(l.width),this._cachedDomNodeOffsetHeight=Math.round(l.height)}}const n=this._reduceAnchorCoordinates(t,i,this._cachedDomNodeOffsetWidth);let s;this.allowEditorOverflow?s=this._layoutBoxInPage(n,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,e):s=this._layoutBoxInViewport(n,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,e);for(let r=1;r<=2;r++)for(const a of this._preference)if(a===1){if(!s)return null;if(r===2||s.fitsAbove)return{kind:"inViewport",coordinate:new Sx(s.aboveTop,s.left),position:1}}else if(a===2){if(!s)return null;if(r===2||s.fitsBelow)return{kind:"inViewport",coordinate:new Sx(s.belowTop,s.left),position:2}}else return this.allowEditorOverflow?{kind:"inViewport",coordinate:this._prepareRenderWidgetAtExactPositionOverflowing(new Sx(n.top,n.left)),position:0}:{kind:"inViewport",coordinate:new Sx(n.top,n.left),position:0};return null}onBeforeRender(e){!this._primaryAnchor.viewPosition||!this._preference||this._primaryAnchor.viewPosition.lineNumber<e.startLineNumber||this._primaryAnchor.viewPosition.lineNumber>e.endLineNumber||this.domNode.setMaxWidth(this._maxWidth)}prepareRender(e){this._renderData=this._prepareRenderWidget(e)}render(e){var t;if(!this._renderData||this._renderData.kind==="offViewport"){this._isVisible&&(this.domNode.removeAttribute("monaco-visible-content-widget"),this._isVisible=!1,((t=this._renderData)==null?void 0:t.kind)==="offViewport"&&this._renderData.preserveFocus?this.domNode.setTop(-1e3):this.domNode.setVisibility("hidden")),typeof this._actual.afterRender=="function"&&Y7(this._actual.afterRender,this._actual,null);return}this.allowEditorOverflow?(this.domNode.setTop(this._renderData.coordinate.top),this.domNode.setLeft(this._renderData.coordinate.left)):(this.domNode.setTop(this._renderData.coordinate.top+e.scrollTop-e.bigNumbersDelta),this.domNode.setLeft(this._renderData.coordinate.left)),this._isVisible||(this.domNode.setVisibility("inherit"),this.domNode.setAttribute("monaco-visible-content-widget","true"),this._isVisible=!0),typeof this._actual.afterRender=="function"&&Y7(this._actual.afterRender,this._actual,this._renderData.position)}}class wx{constructor(e,t){this.modelPosition=e,this.viewPosition=t}}class Sx{constructor(e,t){this.top=e,this.left=t,this._coordinateBrand=void 0}}class poe{constructor(e,t,i){this.top=e,this.left=t,this.height=i,this._anchorCoordinateBrand=void 0}}function Y7(o,e,...t){try{return o.call(e,...t)}catch{return null}}class yfe extends VC{constructor(e){super(),this._context=e;const t=this._context.configuration.options,i=t.get(146);this._renderLineHighlight=t.get(97),this._renderLineHighlightOnlyWhenFocus=t.get(98),this._wordWrap=i.isViewportWrapping,this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,this._selectionIsEmpty=!0,this._focused=!1,this._cursorLineNumbers=[1],this._selections=[new Ke(1,1,1,1)],this._renderData=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}_readFromSelections(){let e=!1;const t=new Set;for(const s of this._selections)t.add(s.positionLineNumber);const i=Array.from(t);i.sort((s,r)=>s-r),En(this._cursorLineNumbers,i)||(this._cursorLineNumbers=i,e=!0);const n=this._selections.every(s=>s.isEmpty());return this._selectionIsEmpty!==n&&(this._selectionIsEmpty=n,e=!0),e}onThemeChanged(e){return this._readFromSelections()}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(146);return this._renderLineHighlight=t.get(97),this._renderLineHighlightOnlyWhenFocus=t.get(98),this._wordWrap=i.isViewportWrapping,this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,!0}onCursorStateChanged(e){return this._selections=e.selections,this._readFromSelections()}onFlushed(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollWidthChanged||e.scrollTopChanged}onZonesChanged(e){return!0}onFocusChanged(e){return this._renderLineHighlightOnlyWhenFocus?(this._focused=e.isFocused,!0):!1}prepareRender(e){if(!this._shouldRenderThis()){this._renderData=null;return}const t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,n=[];for(let r=t;r<=i;r++){const a=r-t;n[a]=""}if(this._wordWrap){const r=this._renderOne(e,!1);for(const a of this._cursorLineNumbers){const l=this._context.viewModel.coordinatesConverter,c=l.convertViewPositionToModelPosition(new G(a,1)).lineNumber,u=l.convertModelPositionToViewPosition(new G(c,1)).lineNumber,f=l.convertModelPositionToViewPosition(new G(c,this._context.viewModel.model.getLineMaxColumn(c))).lineNumber,g=Math.max(u,t),p=Math.min(f,i);for(let _=g;_<=p;_++){const b=_-t;n[b]=r}}}const s=this._renderOne(e,!0);for(const r of this._cursorLineNumbers){if(r<t||r>i)continue;const a=r-t;n[a]=s}this._renderData=n}render(e,t){if(!this._renderData)return"";const i=t-e;return i>=this._renderData.length?"":this._renderData[i]}_shouldRenderInMargin(){return(this._renderLineHighlight==="gutter"||this._renderLineHighlight==="all")&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}_shouldRenderInContent(){return(this._renderLineHighlight==="line"||this._renderLineHighlight==="all")&&this._selectionIsEmpty&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}}class aHe extends yfe{_renderOne(e,t){return`<div class="${"current-line"+(this._shouldRenderInMargin()?" current-line-both":"")+(t?" current-line-exact":"")}" style="width:${Math.max(e.scrollWidth,this._contentWidth)}px;"></div>`}_shouldRenderThis(){return this._shouldRenderInContent()}_shouldRenderOther(){return this._shouldRenderInMargin()}}class lHe extends yfe{_renderOne(e,t){return`<div class="${"current-line"+(this._shouldRenderInMargin()?" current-line-margin":"")+(this._shouldRenderOther()?" current-line-margin-both":"")+(this._shouldRenderInMargin()&&t?" current-line-exact-margin":"")}" style="width:${this._contentLeft}px"></div>`}_shouldRenderThis(){return!0}_shouldRenderOther(){return this._shouldRenderInContent()}}Nc((o,e)=>{const t=o.getColor(Mue);if(t&&(e.addRule(`.monaco-editor .view-overlays .current-line { background-color: ${t}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { background-color: ${t}; border: none; }`)),!t||t.isTransparent()||o.defines(ise)){const i=o.getColor(ise);i&&(e.addRule(`.monaco-editor .view-overlays .current-line-exact { border: 2px solid ${i}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-exact-margin { border: 2px solid ${i}; }`),lu(o.type)&&(e.addRule(".monaco-editor .view-overlays .current-line-exact { border-width: 1px; }"),e.addRule(".monaco-editor .margin-view-overlays .current-line-exact-margin { border-width: 1px; }")))}});class cHe extends VC{constructor(e){super(),this._context=e;const t=this._context.configuration.options;this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}prepareRender(e){const t=e.getDecorationsInViewport();let i=[],n=0;for(let l=0,c=t.length;l<c;l++){const u=t[l];u.options.className&&(i[n++]=u)}i=i.sort((l,c)=>{if(l.options.zIndex<c.options.zIndex)return-1;if(l.options.zIndex>c.options.zIndex)return 1;const u=l.options.className,f=c.options.className;return u<f?-1:u>f?1:M.compareRangesUsingStarts(l.range,c.range)});const s=e.visibleRange.startLineNumber,r=e.visibleRange.endLineNumber,a=[];for(let l=s;l<=r;l++){const c=l-s;a[c]=""}this._renderWholeLineDecorations(e,i,a),this._renderNormalDecorations(e,i,a),this._renderResult=a}_renderWholeLineDecorations(e,t,i){const n=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber;for(let r=0,a=t.length;r<a;r++){const l=t[r];if(!l.options.isWholeLine)continue;const c='<div class="cdr '+l.options.className+'" style="left:0;width:100%;"></div>',u=Math.max(l.range.startLineNumber,n),f=Math.min(l.range.endLineNumber,s);for(let g=u;g<=f;g++){const p=g-n;i[p]+=c}}}_renderNormalDecorations(e,t,i){const n=e.visibleRange.startLineNumber;let s=null,r=!1,a=null,l=!1;for(let c=0,u=t.length;c<u;c++){const f=t[c];if(f.options.isWholeLine)continue;const g=f.options.className,p=!!f.options.showIfCollapsed;let _=f.range;if(p&&_.endColumn===1&&_.endLineNumber!==_.startLineNumber&&(_=new M(_.startLineNumber,_.startColumn,_.endLineNumber-1,this._context.viewModel.getLineMaxColumn(_.endLineNumber-1))),s===g&&r===p&&M.areIntersectingOrTouching(a,_)){a=M.plusRange(a,_);continue}s!==null&&this._renderNormalDecoration(e,a,s,l,r,n,i),s=g,r=p,a=_,l=f.options.shouldFillLineOnLineBreak??!1}s!==null&&this._renderNormalDecoration(e,a,s,l,r,n,i)}_renderNormalDecoration(e,t,i,n,s,r,a){const l=e.linesVisibleRangesForRange(t,i==="findMatch");if(l)for(let c=0,u=l.length;c<u;c++){const f=l[c];if(f.outsideRenderedLine)continue;const g=f.lineNumber-r;if(s&&f.ranges.length===1){const p=f.ranges[0];if(p.width<this._typicalHalfwidthCharacterWidth){const _=Math.round(p.left+p.width/2),b=Math.max(0,Math.round(_-this._typicalHalfwidthCharacterWidth/2));f.ranges[0]=new j4(b,this._typicalHalfwidthCharacterWidth)}}for(let p=0,_=f.ranges.length;p<_;p++){const b=n&&f.continuesOnNextLine&&_===1,y=f.ranges[p],S='<div class="cdr '+i+'" style="left:'+String(y.left)+"px;width:"+(b?"100%;":String(y.width)+"px;")+'"></div>';a[g]+=S}}}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}class dHe extends hl{constructor(e,t,i,n){super(e);const s=this._context.configuration.options,r=s.get(104),a=s.get(75),l=s.get(40),c=s.get(107),u={listenOnDomNode:i.domNode,className:"editor-scrollable "+NV(e.theme.type),useShadows:!1,lazyRender:!0,vertical:r.vertical,horizontal:r.horizontal,verticalHasArrows:r.verticalHasArrows,horizontalHasArrows:r.horizontalHasArrows,verticalScrollbarSize:r.verticalScrollbarSize,verticalSliderSize:r.verticalSliderSize,horizontalScrollbarSize:r.horizontalScrollbarSize,horizontalSliderSize:r.horizontalSliderSize,handleMouseWheel:r.handleMouseWheel,alwaysConsumeMouseWheel:r.alwaysConsumeMouseWheel,arrowSize:r.arrowSize,mouseWheelScrollSensitivity:a,fastScrollSensitivity:l,scrollPredominantAxis:c,scrollByPage:r.scrollByPage};this.scrollbar=this._register(new b4(t.domNode,u,this._context.viewLayout.getScrollable())),bu.write(this.scrollbar.getDomNode(),6),this.scrollbarDomNode=ki(this.scrollbar.getDomNode()),this.scrollbarDomNode.setPosition("absolute"),this._setLayout();const f=(g,p,_)=>{const b={};{const y=g.scrollTop;y&&(b.scrollTop=this._context.viewLayout.getCurrentScrollTop()+y,g.scrollTop=0)}if(_){const y=g.scrollLeft;y&&(b.scrollLeft=this._context.viewLayout.getCurrentScrollLeft()+y,g.scrollLeft=0)}this._context.viewModel.viewLayout.setScrollPosition(b,1)};this._register(se(i.domNode,"scroll",g=>f(i.domNode,!0,!0))),this._register(se(t.domNode,"scroll",g=>f(t.domNode,!0,!1))),this._register(se(n.domNode,"scroll",g=>f(n.domNode,!0,!1))),this._register(se(this.scrollbarDomNode.domNode,"scroll",g=>f(this.scrollbarDomNode.domNode,!0,!1)))}dispose(){super.dispose()}_setLayout(){const e=this._context.configuration.options,t=e.get(146);this.scrollbarDomNode.setLeft(t.contentLeft),e.get(73).side==="right"?this.scrollbarDomNode.setWidth(t.contentWidth+t.minimap.minimapWidth):this.scrollbarDomNode.setWidth(t.contentWidth),this.scrollbarDomNode.setHeight(t.height)}getOverviewRulerLayoutInfo(){return this.scrollbar.getOverviewRulerLayoutInfo()}getDomNode(){return this.scrollbarDomNode}delegateVerticalScrollbarPointerDown(e){this.scrollbar.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){this.scrollbar.delegateScrollFromMouseWheelEvent(e)}onConfigurationChanged(e){if(e.hasChanged(104)||e.hasChanged(75)||e.hasChanged(40)){const t=this._context.configuration.options,i=t.get(104),n=t.get(75),s=t.get(40),r=t.get(107),a={vertical:i.vertical,horizontal:i.horizontal,verticalScrollbarSize:i.verticalScrollbarSize,horizontalScrollbarSize:i.horizontalScrollbarSize,scrollByPage:i.scrollByPage,handleMouseWheel:i.handleMouseWheel,mouseWheelScrollSensitivity:n,fastScrollSensitivity:s,scrollPredominantAxis:r};this.scrollbar.updateOptions(a)}return e.hasChanged(146)&&this._setLayout(),!0}onScrollChanged(e){return!0}onThemeChanged(e){return this.scrollbar.updateClassName("editor-scrollable "+NV(this._context.theme.type)),!0}prepareRender(e){}render(e){this.scrollbar.renderNow()}}class Yz{constructor(e,t,i,n,s){this.startLineNumber=e,this.endLineNumber=t,this.className=i,this.tooltip=n,this._decorationToRenderBrand=void 0,this.zIndex=s??0}}class uHe{constructor(e,t,i){this.className=e,this.zIndex=t,this.tooltip=i}}class hHe{constructor(){this.decorations=[]}add(e){this.decorations.push(e)}getDecorations(){return this.decorations}}class wfe extends VC{_render(e,t,i){const n=[];for(let a=e;a<=t;a++){const l=a-e;n[l]=new hHe}if(i.length===0)return n;i.sort((a,l)=>a.className===l.className?a.startLineNumber===l.startLineNumber?a.endLineNumber-l.endLineNumber:a.startLineNumber-l.startLineNumber:a.className<l.className?-1:1);let s=null,r=0;for(let a=0,l=i.length;a<l;a++){const c=i[a],u=c.className,f=c.zIndex;let g=Math.max(c.startLineNumber,e)-e;const p=Math.min(c.endLineNumber,t)-e;s===u?(g=Math.max(r+1,g),r=Math.max(r,p)):(s=u,r=p);for(let _=g;_<=r;_++)n[_].add(new uHe(u,f,c.tooltip))}return n}}class fHe extends hl{constructor(e){super(e),this._widgets={},this._context=e;const t=this._context.configuration.options,i=t.get(146);this.domNode=ki(document.createElement("div")),this.domNode.setClassName("glyph-margin-widgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this._lineHeight=t.get(67),this._glyphMargin=t.get(57),this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,this._glyphMarginDecorationLaneCount=i.glyphMarginDecorationLaneCount,this._managedDomNodes=[],this._decorationGlyphsToRender=[]}dispose(){this._managedDomNodes=[],this._decorationGlyphsToRender=[],this._widgets={},super.dispose()}getWidgets(){return Object.values(this._widgets)}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(146);return this._lineHeight=t.get(67),this._glyphMargin=t.get(57),this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,this._glyphMarginDecorationLaneCount=i.glyphMarginDecorationLaneCount,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}addWidget(e){const t=ki(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:e.getPosition(),domNode:t,renderInfo:null},t.setPosition("absolute"),t.setDisplay("none"),t.setAttribute("widgetId",e.getId()),this.domNode.appendChild(t),this.setShouldRender()}setWidgetPosition(e,t){const i=this._widgets[e.getId()];return i.preference.lane===t.lane&&i.preference.zIndex===t.zIndex&&M.equalsRange(i.preference.range,t.range)?!1:(i.preference=t,this.setShouldRender(),!0)}removeWidget(e){const t=e.getId();if(this._widgets[t]){const n=this._widgets[t].domNode.domNode;delete this._widgets[t],n.remove(),this.setShouldRender()}}_collectDecorationBasedGlyphRenderRequest(e,t){var r;const i=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,s=e.getDecorationsInViewport();for(const a of s){const l=a.options.glyphMarginClassName;if(!l)continue;const c=Math.max(a.range.startLineNumber,i),u=Math.min(a.range.endLineNumber,n),f=((r=a.options.glyphMargin)==null?void 0:r.position)??cd.Center,g=a.options.zIndex??0;for(let p=c;p<=u;p++){const _=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new G(p,0)),b=this._context.viewModel.glyphLanes.getLanesAtLine(_.lineNumber).indexOf(f);t.push(new gHe(p,b,g,l))}}}_collectWidgetBasedGlyphRenderRequest(e,t){const i=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber;for(const s of Object.values(this._widgets)){const r=s.preference.range,{startLineNumber:a,endLineNumber:l}=this._context.viewModel.coordinatesConverter.convertModelRangeToViewRange(M.lift(r));if(!a||!l||l<i||a>n)continue;const c=Math.max(a,i),u=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new G(c,0)),f=this._context.viewModel.glyphLanes.getLanesAtLine(u.lineNumber).indexOf(s.preference.lane);t.push(new pHe(c,f,s.preference.zIndex,s))}}_collectSortedGlyphRenderRequests(e){const t=[];return this._collectDecorationBasedGlyphRenderRequest(e,t),this._collectWidgetBasedGlyphRenderRequest(e,t),t.sort((i,n)=>i.lineNumber===n.lineNumber?i.laneIndex===n.laneIndex?i.zIndex===n.zIndex?n.type===i.type?i.type===0&&n.type===0?i.className<n.className?-1:1:0:n.type-i.type:n.zIndex-i.zIndex:i.laneIndex-n.laneIndex:i.lineNumber-n.lineNumber),t}prepareRender(e){if(!this._glyphMargin){this._decorationGlyphsToRender=[];return}for(const n of Object.values(this._widgets))n.renderInfo=null;const t=new Cg(this._collectSortedGlyphRenderRequests(e)),i=[];for(;t.length>0;){const n=t.peek();if(!n)break;const s=t.takeWhile(a=>a.lineNumber===n.lineNumber&&a.laneIndex===n.laneIndex);if(!s||s.length===0)break;const r=s[0];if(r.type===0){const a=[];for(const l of s){if(l.zIndex!==r.zIndex||l.type!==r.type)break;(a.length===0||a[a.length-1]!==l.className)&&a.push(l.className)}i.push(r.accept(a.join(" ")))}else r.widget.renderInfo={lineNumber:r.lineNumber,laneIndex:r.laneIndex}}this._decorationGlyphsToRender=i}render(e){if(!this._glyphMargin){for(const i of Object.values(this._widgets))i.domNode.setDisplay("none");for(;this._managedDomNodes.length>0;){const i=this._managedDomNodes.pop();i==null||i.domNode.remove()}return}const t=Math.round(this._glyphMarginWidth/this._glyphMarginDecorationLaneCount);for(const i of Object.values(this._widgets))if(!i.renderInfo)i.domNode.setDisplay("none");else{const n=e.viewportData.relativeVerticalOffset[i.renderInfo.lineNumber-e.viewportData.startLineNumber],s=this._glyphMarginLeft+i.renderInfo.laneIndex*this._lineHeight;i.domNode.setDisplay("block"),i.domNode.setTop(n),i.domNode.setLeft(s),i.domNode.setWidth(t),i.domNode.setHeight(this._lineHeight)}for(let i=0;i<this._decorationGlyphsToRender.length;i++){const n=this._decorationGlyphsToRender[i],s=e.viewportData.relativeVerticalOffset[n.lineNumber-e.viewportData.startLineNumber],r=this._glyphMarginLeft+n.laneIndex*this._lineHeight;let a;i<this._managedDomNodes.length?a=this._managedDomNodes[i]:(a=ki(document.createElement("div")),this._managedDomNodes.push(a),this.domNode.appendChild(a)),a.setClassName("cgmr codicon "+n.combinedClassName),a.setPosition("absolute"),a.setTop(s),a.setLeft(r),a.setWidth(t),a.setHeight(this._lineHeight)}for(;this._managedDomNodes.length>this._decorationGlyphsToRender.length;){const i=this._managedDomNodes.pop();i==null||i.domNode.remove()}}}class gHe{constructor(e,t,i,n){this.lineNumber=e,this.laneIndex=t,this.zIndex=i,this.className=n,this.type=0}accept(e){return new mHe(this.lineNumber,this.laneIndex,e)}}class pHe{constructor(e,t,i,n){this.lineNumber=e,this.laneIndex=t,this.zIndex=i,this.widget=n,this.type=1}}class mHe{constructor(e,t,i){this.lineNumber=e,this.laneIndex=t,this.combinedClassName=i}}class _He extends VC{constructor(e){super(),this._context=e,this._primaryPosition=null;const t=this._context.configuration.options,i=t.get(147),n=t.get(50);this._spaceWidth=n.spaceWidth,this._maxIndentLeft=i.wrappingColumn===-1?-1:i.wrappingColumn*n.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(16),this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(147),n=t.get(50);return this._spaceWidth=n.spaceWidth,this._maxIndentLeft=i.wrappingColumn===-1?-1:i.wrappingColumn*n.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(16),!0}onCursorStateChanged(e){var n;const i=e.selections[0].getPosition();return(n=this._primaryPosition)!=null&&n.equals(i)?!1:(this._primaryPosition=i,!0)}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}onLanguageConfigurationChanged(e){return!0}prepareRender(e){var l,c;if(!this._bracketPairGuideOptions.indentation&&this._bracketPairGuideOptions.bracketPairs===!1){this._renderResult=null;return}const t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,n=e.scrollWidth,s=this._primaryPosition,r=this.getGuidesByLine(t,Math.min(i+1,this._context.viewModel.getLineCount()),s),a=[];for(let u=t;u<=i;u++){const f=u-t,g=r[f];let p="";const _=((l=e.visibleRangeForPosition(new G(u,1)))==null?void 0:l.left)??0;for(const b of g){const y=b.column===-1?_+(b.visibleColumn-1)*this._spaceWidth:e.visibleRangeForPosition(new G(u,b.column)).left;if(y>n||this._maxIndentLeft>0&&y>this._maxIndentLeft)break;const S=b.horizontalLine?b.horizontalLine.top?"horizontal-top":"horizontal-bottom":"vertical",L=b.horizontalLine?(((c=e.visibleRangeForPosition(new G(u,b.horizontalLine.endColumn)))==null?void 0:c.left)??y+this._spaceWidth)-y:this._spaceWidth;p+=`<div class="core-guide ${b.className} ${S}" style="left:${y}px;width:${L}px"></div>`}a[f]=p}this._renderResult=a}getGuidesByLine(e,t,i){const n=this._bracketPairGuideOptions.bracketPairs!==!1?this._context.viewModel.getBracketGuidesInRangeByLine(e,t,i,{highlightActive:this._bracketPairGuideOptions.highlightActiveBracketPair,horizontalGuides:this._bracketPairGuideOptions.bracketPairsHorizontal===!0?Jv.Enabled:this._bracketPairGuideOptions.bracketPairsHorizontal==="active"?Jv.EnabledForActive:Jv.Disabled,includeInactive:this._bracketPairGuideOptions.bracketPairs===!0}):null,s=this._bracketPairGuideOptions.indentation?this._context.viewModel.getLinesIndentGuides(e,t):null;let r=0,a=0,l=0;if(this._bracketPairGuideOptions.highlightActiveIndentation!==!1&&i){const f=this._context.viewModel.getActiveIndentGuide(i.lineNumber,e,t);r=f.startLineNumber,a=f.endLineNumber,l=f.indent}const{indentSize:c}=this._context.viewModel.model.getOptions(),u=[];for(let f=e;f<=t;f++){const g=new Array;u.push(g);const p=n?n[f-e]:[],_=new Cg(p),b=s?s[f-e]:0;for(let y=1;y<=b;y++){const S=(y-1)*c+1,L=(this._bracketPairGuideOptions.highlightActiveIndentation==="always"||p.length===0)&&r<=f&&f<=a&&y===l;g.push(..._.takeWhile(k=>k.visibleColumn<S)||[]);const x=_.peek();(!x||x.visibleColumn!==S||x.horizontalLine)&&g.push(new Ov(S,-1,`core-guide-indent lvl-${(y-1)%30}`+(L?" indent-active":""),null,-1,-1))}g.push(..._.takeWhile(y=>!0)||[])}return u}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}function ow(o){if(!(o&&o.isTransparent()))return o}Nc((o,e)=>{const t=[{bracketColor:Fue,guideColor:O2e,guideColorActive:z2e},{bracketColor:Bue,guideColor:F2e,guideColorActive:U2e},{bracketColor:Wue,guideColor:B2e,guideColorActive:$2e},{bracketColor:Hue,guideColor:W2e,guideColorActive:j2e},{bracketColor:Vue,guideColor:H2e,guideColorActive:q2e},{bracketColor:zue,guideColor:V2e,guideColorActive:K2e}],i=new Jue,n=[{indentColor:gI,indentColorActive:pI},{indentColor:p2e,indentColorActive:C2e},{indentColor:m2e,indentColorActive:y2e},{indentColor:_2e,indentColorActive:w2e},{indentColor:v2e,indentColorActive:S2e},{indentColor:b2e,indentColorActive:L2e}],s=t.map(a=>{const l=o.getColor(a.bracketColor),c=o.getColor(a.guideColor),u=o.getColor(a.guideColorActive),f=ow(ow(c)??(l==null?void 0:l.transparent(.3))),g=ow(ow(u)??l);if(!(!f||!g))return{guideColor:f,guideColorActive:g}}).filter(Dh),r=n.map(a=>{const l=o.getColor(a.indentColor),c=o.getColor(a.indentColorActive),u=ow(l),f=ow(c);if(!(!u||!f))return{indentColor:u,indentColorActive:f}}).filter(Dh);if(s.length>0){for(let a=0;a<30;a++){const l=s[a%s.length];e.addRule(`.monaco-editor .${i.getInlineClassNameOfLevel(a).replace(/ /g,".")} { --guide-color: ${l.guideColor}; --guide-color-active: ${l.guideColorActive}; }`)}e.addRule(".monaco-editor .vertical { box-shadow: 1px 0 0 0 var(--guide-color) inset; }"),e.addRule(".monaco-editor .horizontal-top { border-top: 1px solid var(--guide-color); }"),e.addRule(".monaco-editor .horizontal-bottom { border-bottom: 1px solid var(--guide-color); }"),e.addRule(`.monaco-editor .vertical.${i.activeClassName} { box-shadow: 1px 0 0 0 var(--guide-color-active) inset; }`),e.addRule(`.monaco-editor .horizontal-top.${i.activeClassName} { border-top: 1px solid var(--guide-color-active); }`),e.addRule(`.monaco-editor .horizontal-bottom.${i.activeClassName} { border-bottom: 1px solid var(--guide-color-active); }`)}if(r.length>0){for(let a=0;a<30;a++){const l=r[a%r.length];e.addRule(`.monaco-editor .lines-content .core-guide-indent.lvl-${a} { --indent-color: ${l.indentColor}; --indent-color-active: ${l.indentColorActive}; }`)}e.addRule(".monaco-editor .lines-content .core-guide-indent { box-shadow: 1px 0 0 0 var(--indent-color) inset; }"),e.addRule(".monaco-editor .lines-content .core-guide-indent.indent-active { box-shadow: 1px 0 0 0 var(--indent-color-active) inset; }")}});class Z7{get didDomLayout(){return this._didDomLayout}readClientRect(){if(!this._clientRectRead){this._clientRectRead=!0;const e=this._domNode.getBoundingClientRect();this.markDidDomLayout(),this._clientRectDeltaLeft=e.left,this._clientRectScale=e.width/this._domNode.offsetWidth}}get clientRectDeltaLeft(){return this._clientRectRead||this.readClientRect(),this._clientRectDeltaLeft}get clientRectScale(){return this._clientRectRead||this.readClientRect(),this._clientRectScale}constructor(e,t){this._domNode=e,this.endNode=t,this._didDomLayout=!1,this._clientRectDeltaLeft=0,this._clientRectScale=1,this._clientRectRead=!1}markDidDomLayout(){this._didDomLayout=!0}}class vHe{constructor(){this._currentVisibleRange=new M(1,1,1,1)}getCurrentVisibleRange(){return this._currentVisibleRange}setCurrentVisibleRange(e){this._currentVisibleRange=e}}class bHe{constructor(e,t,i,n,s,r,a){this.minimalReveal=e,this.lineNumber=t,this.startColumn=i,this.endColumn=n,this.startScrollTop=s,this.stopScrollTop=r,this.scrollType=a,this.type="range",this.minLineNumber=t,this.maxLineNumber=t}}class CHe{constructor(e,t,i,n,s){this.minimalReveal=e,this.selections=t,this.startScrollTop=i,this.stopScrollTop=n,this.scrollType=s,this.type="selections";let r=t[0].startLineNumber,a=t[0].endLineNumber;for(let l=1,c=t.length;l<c;l++){const u=t[l];r=Math.min(r,u.startLineNumber),a=Math.max(a,u.endLineNumber)}this.minLineNumber=r,this.maxLineNumber=a}}const H2=class H2 extends hl{constructor(e,t){super(e);const i=this._context.configuration,n=this._context.configuration.options,s=n.get(50),r=n.get(147);this._lineHeight=n.get(67),this._typicalHalfwidthCharacterWidth=s.typicalHalfwidthCharacterWidth,this._isViewportWrapping=r.isViewportWrapping,this._revealHorizontalRightPadding=n.get(101),this._cursorSurroundingLines=n.get(29),this._cursorSurroundingLinesStyle=n.get(30),this._canUseLayerHinting=!n.get(32),this._viewLineOptions=new aoe(i,this._context.theme.type),this._linesContent=t,this._textRangeRestingSpot=document.createElement("div"),this._visibleLines=new bfe({createLine:()=>new Xf(this._viewLineOptions)}),this.domNode=this._visibleLines.domNode,bu.write(this.domNode,8),this.domNode.setClassName(`view-lines ${N1}`),yo(this.domNode,s),this._maxLineWidth=0,this._asyncUpdateLineWidths=new Oi(()=>{this._updateLineWidthsSlow()},200),this._asyncCheckMonospaceFontAssumptions=new Oi(()=>{this._checkMonospaceFontAssumptions()},2e3),this._lastRenderedData=new vHe,this._horizontalRevealRequest=null,this._stickyScrollEnabled=n.get(116).enabled,this._maxNumberStickyLines=n.get(116).maxLineCount}dispose(){this._asyncUpdateLineWidths.dispose(),this._asyncCheckMonospaceFontAssumptions.dispose(),super.dispose()}getDomNode(){return this.domNode}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e),e.hasChanged(147)&&(this._maxLineWidth=0);const t=this._context.configuration.options,i=t.get(50),n=t.get(147);return this._lineHeight=t.get(67),this._typicalHalfwidthCharacterWidth=i.typicalHalfwidthCharacterWidth,this._isViewportWrapping=n.isViewportWrapping,this._revealHorizontalRightPadding=t.get(101),this._cursorSurroundingLines=t.get(29),this._cursorSurroundingLinesStyle=t.get(30),this._canUseLayerHinting=!t.get(32),this._stickyScrollEnabled=t.get(116).enabled,this._maxNumberStickyLines=t.get(116).maxLineCount,yo(this.domNode,i),this._onOptionsMaybeChanged(),e.hasChanged(146)&&(this._maxLineWidth=0),!0}_onOptionsMaybeChanged(){const e=this._context.configuration,t=new aoe(e,this._context.theme.type);if(!this._viewLineOptions.equals(t)){this._viewLineOptions=t;const i=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let s=i;s<=n;s++)this._visibleLines.getVisibleLine(s).onOptionsChanged(this._viewLineOptions);return!0}return!1}onCursorStateChanged(e){const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();let n=!1;for(let s=t;s<=i;s++)n=this._visibleLines.getVisibleLine(s).onSelectionChanged()||n;return n}onDecorationsChanged(e){{const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let n=t;n<=i;n++)this._visibleLines.getVisibleLine(n).onDecorationsChanged()}return!0}onFlushed(e){const t=this._visibleLines.onFlushed(e);return this._maxLineWidth=0,t}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onRevealRangeRequest(e){const t=this._computeScrollTopToRevealRange(this._context.viewLayout.getFutureViewport(),e.source,e.minimalReveal,e.range,e.selections,e.verticalType);if(t===-1)return!1;let i=this._context.viewLayout.validateScrollPosition({scrollTop:t});e.revealHorizontal?e.range&&e.range.startLineNumber!==e.range.endLineNumber?i={scrollTop:i.scrollTop,scrollLeft:0}:e.range?this._horizontalRevealRequest=new bHe(e.minimalReveal,e.range.startLineNumber,e.range.startColumn,e.range.endColumn,this._context.viewLayout.getCurrentScrollTop(),i.scrollTop,e.scrollType):e.selections&&e.selections.length>0&&(this._horizontalRevealRequest=new CHe(e.minimalReveal,e.selections,this._context.viewLayout.getCurrentScrollTop(),i.scrollTop,e.scrollType)):this._horizontalRevealRequest=null;const s=Math.abs(this._context.viewLayout.getCurrentScrollTop()-i.scrollTop)<=this._lineHeight?1:e.scrollType;return this._context.viewModel.viewLayout.setScrollPosition(i,s),!0}onScrollChanged(e){if(this._horizontalRevealRequest&&e.scrollLeftChanged&&(this._horizontalRevealRequest=null),this._horizontalRevealRequest&&e.scrollTopChanged){const t=Math.min(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop),i=Math.max(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop);(e.scrollTop<t||e.scrollTop>i)&&(this._horizontalRevealRequest=null)}return this.domNode.setWidth(e.scrollWidth),this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth),this._visibleLines.onZonesChanged(e)}onThemeChanged(e){return this._onOptionsMaybeChanged()}getPositionFromDOMInfo(e,t){const i=this._getViewLineDomNode(e);if(i===null)return null;const n=this._getLineNumberFor(i);if(n===-1||n<1||n>this._context.viewModel.getLineCount())return null;if(this._context.viewModel.getLineMaxColumn(n)===1)return new G(n,1);const s=this._visibleLines.getStartLineNumber(),r=this._visibleLines.getEndLineNumber();if(n<s||n>r)return null;let a=this._visibleLines.getVisibleLine(n).getColumnOfNodeOffset(e,t);const l=this._context.viewModel.getLineMinColumn(n);return a<l&&(a=l),new G(n,a)}_getViewLineDomNode(e){for(;e&&e.nodeType===1;){if(e.className===Xf.CLASS_NAME)return e;e=e.parentElement}return null}_getLineNumberFor(e){const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let n=t;n<=i;n++){const s=this._visibleLines.getVisibleLine(n);if(e===s.getDomNode())return n}return-1}getLineWidth(e){const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();if(e<t||e>i)return-1;const n=new Z7(this.domNode.domNode,this._textRangeRestingSpot),s=this._visibleLines.getVisibleLine(e).getWidth(n);return this._updateLineWidthsSlowIfDomDidLayout(n),s}linesVisibleRangesForRange(e,t){if(this.shouldRender())return null;const i=e.endLineNumber,n=M.intersectRanges(e,this._lastRenderedData.getCurrentVisibleRange());if(!n)return null;const s=[];let r=0;const a=new Z7(this.domNode.domNode,this._textRangeRestingSpot);let l=0;t&&(l=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new G(n.startLineNumber,1)).lineNumber);const c=this._visibleLines.getStartLineNumber(),u=this._visibleLines.getEndLineNumber();for(let f=n.startLineNumber;f<=n.endLineNumber;f++){if(f<c||f>u)continue;const g=f===n.startLineNumber?n.startColumn:1,p=f!==n.endLineNumber,_=p?this._context.viewModel.getLineMaxColumn(f):n.endColumn,b=this._visibleLines.getVisibleLine(f).getVisibleRangesForRange(f,g,_,a);if(b){if(t&&f<i){const y=l;l=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new G(f+1,1)).lineNumber,y!==l&&(b.ranges[b.ranges.length-1].width+=this._typicalHalfwidthCharacterWidth)}s[r++]=new sWe(b.outsideRenderedLine,f,j4.from(b.ranges),p)}}return this._updateLineWidthsSlowIfDomDidLayout(a),r===0?null:s}_visibleRangesForLineRange(e,t,i){if(this.shouldRender()||e<this._visibleLines.getStartLineNumber()||e>this._visibleLines.getEndLineNumber())return null;const n=new Z7(this.domNode.domNode,this._textRangeRestingSpot),s=this._visibleLines.getVisibleLine(e).getVisibleRangesForRange(e,t,i,n);return this._updateLineWidthsSlowIfDomDidLayout(n),s}visibleRangeForPosition(e){const t=this._visibleRangesForLineRange(e.lineNumber,e.column,e.column);return t?new oWe(t.outsideRenderedLine,t.ranges[0].left):null}_updateLineWidthsFast(){return this._updateLineWidths(!0)}_updateLineWidthsSlow(){this._updateLineWidths(!1)}_updateLineWidthsSlowIfDomDidLayout(e){e.didDomLayout&&(this._asyncUpdateLineWidths.isScheduled()||(this._asyncUpdateLineWidths.cancel(),this._updateLineWidthsSlow()))}_updateLineWidths(e){const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();let n=1,s=!0;for(let r=t;r<=i;r++){const a=this._visibleLines.getVisibleLine(r);if(e&&!a.getWidthIsFast()){s=!1;continue}n=Math.max(n,a.getWidth(null))}return s&&t===1&&i===this._context.viewModel.getLineCount()&&(this._maxLineWidth=0),this._ensureMaxLineWidth(n),s}_checkMonospaceFontAssumptions(){let e=-1,t=-1;const i=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let s=i;s<=n;s++){const r=this._visibleLines.getVisibleLine(s);if(r.needsMonospaceFontCheck()){const a=r.getWidth(null);a>t&&(t=a,e=s)}}if(e!==-1&&!this._visibleLines.getVisibleLine(e).monospaceAssumptionsAreValid())for(let s=i;s<=n;s++)this._visibleLines.getVisibleLine(s).onMonospaceAssumptionsInvalidated()}prepareRender(){throw new Error("Not supported")}render(){throw new Error("Not supported")}renderText(e){if(this._visibleLines.renderLines(e),this._lastRenderedData.setCurrentVisibleRange(e.visibleRange),this.domNode.setWidth(this._context.viewLayout.getScrollWidth()),this.domNode.setHeight(Math.min(this._context.viewLayout.getScrollHeight(),1e6)),this._horizontalRevealRequest){const i=this._horizontalRevealRequest;if(e.startLineNumber<=i.minLineNumber&&i.maxLineNumber<=e.endLineNumber){this._horizontalRevealRequest=null,this.onDidRender();const n=this._computeScrollLeftToReveal(i);n&&(this._isViewportWrapping||this._ensureMaxLineWidth(n.maxHorizontalOffset),this._context.viewModel.viewLayout.setScrollPosition({scrollLeft:n.scrollLeft},i.scrollType))}}if(this._updateLineWidthsFast()?this._asyncUpdateLineWidths.cancel():this._asyncUpdateLineWidths.schedule(),Qr&&!this._asyncCheckMonospaceFontAssumptions.isScheduled()){const i=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let s=i;s<=n;s++)if(this._visibleLines.getVisibleLine(s).needsMonospaceFontCheck()){this._asyncCheckMonospaceFontAssumptions.schedule();break}}this._linesContent.setLayerHinting(this._canUseLayerHinting),this._linesContent.setContain("strict");const t=this._context.viewLayout.getCurrentScrollTop()-e.bigNumbersDelta;this._linesContent.setTop(-t),this._linesContent.setLeft(-this._context.viewLayout.getCurrentScrollLeft())}_ensureMaxLineWidth(e){const t=Math.ceil(e);this._maxLineWidth<t&&(this._maxLineWidth=t,this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth))}_computeScrollTopToRevealRange(e,t,i,n,s,r){const a=e.top,l=e.height,c=a+l;let u,f,g;if(s&&s.length>0){let S=s[0].startLineNumber,L=s[0].endLineNumber;for(let x=1,k=s.length;x<k;x++){const E=s[x];S=Math.min(S,E.startLineNumber),L=Math.max(L,E.endLineNumber)}u=!1,f=this._context.viewLayout.getVerticalOffsetForLineNumber(S),g=this._context.viewLayout.getVerticalOffsetForLineNumber(L)+this._lineHeight}else if(n)u=!0,f=this._context.viewLayout.getVerticalOffsetForLineNumber(n.startLineNumber),g=this._context.viewLayout.getVerticalOffsetForLineNumber(n.endLineNumber)+this._lineHeight;else return-1;const p=(t==="mouse"||i)&&this._cursorSurroundingLinesStyle==="default";let _=0,b=0;if(p)i||(_=this._lineHeight);else{const S=l/this._lineHeight,L=Math.max(this._cursorSurroundingLines,this._stickyScrollEnabled?this._maxNumberStickyLines:0),x=Math.min(S/2,L);_=x*this._lineHeight,b=Math.max(0,x-1)*this._lineHeight}i||(r===0||r===4)&&(b+=this._lineHeight),f-=_,g+=b;let y;if(g-f>l){if(!u)return-1;y=f}else if(r===5||r===6)if(r===6&&a<=f&&g<=c)y=a;else{const S=Math.max(5*this._lineHeight,l*.2),L=f-S,x=g-l;y=Math.max(x,L)}else if(r===1||r===2)if(r===2&&a<=f&&g<=c)y=a;else{const S=(f+g)/2;y=Math.max(0,S-l/2)}else y=this._computeMinimumScrolling(a,c,f,g,r===3,r===4);return y}_computeScrollLeftToReveal(e){const t=this._context.viewLayout.getCurrentViewport(),i=this._context.configuration.options.get(146),n=t.left,s=n+t.width-i.verticalScrollbarWidth;let r=1073741824,a=0;if(e.type==="range"){const c=this._visibleRangesForLineRange(e.lineNumber,e.startColumn,e.endColumn);if(!c)return null;for(const u of c.ranges)r=Math.min(r,Math.round(u.left)),a=Math.max(a,Math.round(u.left+u.width))}else for(const c of e.selections){if(c.startLineNumber!==c.endLineNumber)return null;const u=this._visibleRangesForLineRange(c.startLineNumber,c.startColumn,c.endColumn);if(!u)return null;for(const f of u.ranges)r=Math.min(r,Math.round(f.left)),a=Math.max(a,Math.round(f.left+f.width))}return e.minimalReveal||(r=Math.max(0,r-H2.HORIZONTAL_EXTRA_PX),a+=this._revealHorizontalRightPadding),e.type==="selections"&&a-r>t.width?null:{scrollLeft:this._computeMinimumScrolling(n,s,r,a),maxHorizontalOffset:a}}_computeMinimumScrolling(e,t,i,n,s,r){e=e|0,t=t|0,i=i|0,n=n|0,s=!!s,r=!!r;const a=t-e;if(n-i<a){if(s)return i;if(r)return Math.max(0,n-a);if(i<e)return i;if(n>t)return Math.max(0,n-a)}else return i;return e}};H2.HORIZONTAL_EXTRA_PX=30;let Zz=H2;class yHe extends wfe{constructor(e){super(),this._context=e;const i=this._context.configuration.options.get(146);this._decorationsLeft=i.decorationsLeft,this._decorationsWidth=i.decorationsWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const i=this._context.configuration.options.get(146);return this._decorationsLeft=i.decorationsLeft,this._decorationsWidth=i.decorationsWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport(),i=[];let n=0;for(let s=0,r=t.length;s<r;s++){const a=t[s],l=a.options.linesDecorationsClassName,c=a.options.zIndex;l&&(i[n++]=new Yz(a.range.startLineNumber,a.range.endLineNumber,l,a.options.linesDecorationsTooltip??null,c));const u=a.options.firstLineDecorationClassName;u&&(i[n++]=new Yz(a.range.startLineNumber,a.range.startLineNumber,u,a.options.linesDecorationsTooltip??null,c))}return i}prepareRender(e){const t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,n=this._render(t,i,this._getDecorations(e)),s=this._decorationsLeft.toString(),r=this._decorationsWidth.toString(),a='" style="left:'+s+"px;width:"+r+'px;"></div>',l=[];for(let c=t;c<=i;c++){const u=c-t,f=n[u].getDecorations();let g="";for(const p of f){let _='<div class="cldr '+p.className;p.tooltip!==null&&(_+='" title="'+p.tooltip),_+=a,g+=_}l[u]=g}this._renderResult=l}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}class wHe extends wfe{constructor(e){super(),this._context=e,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport(),i=[];let n=0;for(let s=0,r=t.length;s<r;s++){const a=t[s],l=a.options.marginClassName,c=a.options.zIndex;l&&(i[n++]=new Yz(a.range.startLineNumber,a.range.endLineNumber,l,null,c))}return i}prepareRender(e){const t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,n=this._render(t,i,this._getDecorations(e)),s=[];for(let r=t;r<=i;r++){const a=r-t,l=n[a].getDecorations();let c="";for(const u of l)c+='<div class="cmdr '+u.className+'" style=""></div>';s[a]=c}this._renderResult=s}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}const Rp=class Rp{constructor(e,t,i,n){this._rgba8Brand=void 0,this.r=Rp._clamp(e),this.g=Rp._clamp(t),this.b=Rp._clamp(i),this.a=Rp._clamp(n)}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}static _clamp(e){return e<0?0:e>255?255:e|0}};Rp.Empty=new Rp(0,0,0,0);let mg=Rp;const V2=class V2 extends X{static getInstance(){return this._INSTANCE||(this._INSTANCE=new V2),this._INSTANCE}constructor(){super(),this._onDidChange=new Y,this.onDidChange=this._onDidChange.event,this._updateColorMap(),this._register(Kn.onDidChange(e=>{e.changedColorMap&&this._updateColorMap()}))}_updateColorMap(){const e=Kn.getColorMap();if(!e){this._colors=[mg.Empty],this._backgroundIsLight=!0;return}this._colors=[mg.Empty];for(let i=1;i<e.length;i++){const n=e[i].rgba;this._colors[i]=new mg(n.r,n.g,n.b,Math.round(n.a*255))}const t=e[2].getRelativeLuminance();this._backgroundIsLight=t>=.5,this._onDidChange.fire(void 0)}getColor(e){return(e<1||e>=this._colors.length)&&(e=2),this._colors[e]}backgroundIsLight(){return this._backgroundIsLight}};V2._INSTANCE=null;let HP=V2;const SHe=(()=>{const o=[];for(let e=32;e<=126;e++)o.push(e);return o.push(65533),o})(),LHe=(o,e)=>(o-=32,o<0||o>96?e<=2?(o+96)%96:95:o);class nE{constructor(e,t){this.scale=t,this._minimapCharRendererBrand=void 0,this.charDataNormal=nE.soften(e,12/15),this.charDataLight=nE.soften(e,50/60)}static soften(e,t){const i=new Uint8ClampedArray(e.length);for(let n=0,s=e.length;n<s;n++)i[n]=kA(e[n]*t);return i}renderChar(e,t,i,n,s,r,a,l,c,u,f){const g=1*this.scale,p=2*this.scale,_=f?1:p;if(t+g>e.width||i+_>e.height){console.warn("bad render request outside image data");return}const b=u?this.charDataLight:this.charDataNormal,y=LHe(n,c),S=e.width*4,L=a.r,x=a.g,k=a.b,E=s.r-L,N=s.g-x,A=s.b-k,P=Math.max(r,l),H=e.data;let ee=y*g*p,Q=i*S+t*4;for(let te=0;te<_;te++){let J=Q;for(let Z=0;Z<g;Z++){const he=b[ee++]/255*(r/255);H[J++]=L+E*he,H[J++]=x+N*he,H[J++]=k+A*he,H[J++]=P}Q+=S}}blockRenderChar(e,t,i,n,s,r,a,l){const c=1*this.scale,u=2*this.scale,f=l?1:u;if(t+c>e.width||i+f>e.height){console.warn("bad render request outside image data");return}const g=e.width*4,p=.5*(s/255),_=r.r,b=r.g,y=r.b,S=n.r-_,L=n.g-b,x=n.b-y,k=_+S*p,E=b+L*p,N=y+x*p,A=Math.max(s,a),P=e.data;let H=i*g+t*4;for(let ee=0;ee<f;ee++){let Q=H;for(let te=0;te<c;te++)P[Q++]=k,P[Q++]=E,P[Q++]=N,P[Q++]=A;H+=g}}}const moe={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15},_oe=o=>{const e=new Uint8ClampedArray(o.length/2);for(let t=0;t<o.length;t+=2)e[t>>1]=moe[o[t]]<<4|moe[o[t+1]]&15;return e},voe={1:Am(()=>_oe("0000511D6300CF609C709645A78432005642574171487021003C451900274D35D762755E8B629C5BA856AF57BA649530C167D1512A272A3F6038604460398526BCA2A968DB6F8957C768BE5FBE2FB467CF5D8D5B795DC7625B5DFF50DE64C466DB2FC47CD860A65E9A2EB96CB54CE06DA763AB2EA26860524D3763536601005116008177A8705E53AB738E6A982F88BAA35B5F5B626D9C636B449B737E5B7B678598869A662F6B5B8542706C704C80736A607578685B70594A49715A4522E792")),2:Am(()=>_oe("000000000000000055394F383D2800008B8B1F210002000081B1CBCBCC820000847AAF6B9AAF2119BE08B8881AD60000A44FD07DCCF107015338130C00000000385972265F390B406E2437634B4B48031B12B8A0847000001E15B29A402F0000000000004B33460B00007A752C2A0000000000004D3900000084394B82013400ABA5CFC7AD9C0302A45A3E5A98AB000089A43382D97900008BA54AA087A70A0248A6A7AE6DBE0000BF6F94987EA40A01A06DCFA7A7A9030496C32F77891D0000A99FB1A0AFA80603B29AB9CA75930D010C0948354D3900000C0948354F37460D0028BE673D8400000000AF9D7B6E00002B007AA8933400007AA642675C2700007984CFB9C3985B768772A8A6B7B20000CAAECAAFC4B700009F94A6009F840009D09F9BA4CA9C0000CC8FC76DC87F0000C991C472A2000000A894A48CA7B501079BA2C9C69BA20000B19A5D3FA89000005CA6009DA2960901B0A7F0669FB200009D009E00B7890000DAD0F5D092820000D294D4C48BD10000B5A7A4A3B1A50402CAB6CBA6A2000000B5A7A4A3B1A8044FCDADD19D9CB00000B7778F7B8AAE0803C9AB5D3F5D3F00009EA09EA0BAB006039EA0989A8C7900009B9EF4D6B7C00000A9A7816CACA80000ABAC84705D3F000096DA635CDC8C00006F486F266F263D4784006124097B00374F6D2D6D2D6D4A3A95872322000000030000000000008D8939130000000000002E22A5C9CBC70600AB25C0B5C9B400061A2DB04CA67001082AA6BEBEBFC606002321DACBC19E03087AA08B6768380000282FBAC0B8CA7A88AD25BBA5A29900004C396C5894A6000040485A6E356E9442A32CD17EADA70000B4237923628600003E2DE9C1D7B500002F25BBA5A2990000231DB6AFB4A804023025C0B5CAB588062B2CBDBEC0C706882435A75CA20000002326BD6A82A908048B4B9A5A668000002423A09CB4BB060025259C9D8A7900001C1FCAB2C7C700002A2A9387ABA200002626A4A47D6E9D14333163A0C87500004B6F9C2D643A257049364936493647358A34438355497F1A0000A24C1D590000D38DFFBDD4CD3126"))};class Sk{static create(e,t){if(this.lastCreated&&e===this.lastCreated.scale&&t===this.lastFontFamily)return this.lastCreated;let i;return voe[e]?i=new nE(voe[e](),e):i=Sk.createFromSampleData(Sk.createSampleData(t).data,e),this.lastFontFamily=t,this.lastCreated=i,i}static createSampleData(e){const t=document.createElement("canvas"),i=t.getContext("2d");t.style.height="16px",t.height=16,t.width=96*10,t.style.width=96*10+"px",i.fillStyle="#ffffff",i.font=`bold 16px ${e}`,i.textBaseline="middle";let n=0;for(const s of SHe)i.fillText(String.fromCharCode(s),n,16/2),n+=10;return i.getImageData(0,0,96*10,16)}static createFromSampleData(e,t){if(e.length!==61440)throw new Error("Unexpected source in MinimapCharRenderer");const n=Sk._downsample(e,t);return new nE(n,t)}static _downsampleChar(e,t,i,n,s){const r=1*s,a=2*s;let l=n,c=0;for(let u=0;u<a;u++){const f=u/a*16,g=(u+1)/a*16;for(let p=0;p<r;p++){const _=p/r*10,b=(p+1)/r*10;let y=0,S=0;for(let x=f;x<g;x++){const k=t+Math.floor(x)*3840,E=1-(x-Math.floor(x));for(let N=_;N<b;N++){const A=1-(N-Math.floor(N)),P=k+Math.floor(N)*4,H=A*E;S+=H,y+=e[P]*e[P+3]/255*H}}const L=y/S;c=Math.max(c,L),i[l++]=kA(L)}}return c}static _downsample(e,t){const i=2*t*1*t,n=i*96,s=new Uint8ClampedArray(n);let r=0,a=0,l=0;for(let c=0;c<96;c++)l=Math.max(l,this._downsampleChar(e,a,s,r,t)),r+=i,a+=10*4;if(l>0){const c=255/l;for(let u=0;u<n;u++)s[u]*=c}return s}}const Sfe=Po?'"Segoe WPC", "Segoe UI", sans-serif':Kt?"-apple-system, BlinkMacSystemFont, sans-serif":'system-ui, "Ubuntu", "Droid Sans", sans-serif',xHe=140,kHe=2;class A1{constructor(e,t,i){const n=e.options,s=n.get(144),r=n.get(146),a=r.minimap,l=n.get(50),c=n.get(73);this.renderMinimap=a.renderMinimap,this.size=c.size,this.minimapHeightIsEditorHeight=a.minimapHeightIsEditorHeight,this.scrollBeyondLastLine=n.get(106),this.paddingTop=n.get(84).top,this.paddingBottom=n.get(84).bottom,this.showSlider=c.showSlider,this.autohide=c.autohide,this.pixelRatio=s,this.typicalHalfwidthCharacterWidth=l.typicalHalfwidthCharacterWidth,this.lineHeight=n.get(67),this.minimapLeft=a.minimapLeft,this.minimapWidth=a.minimapWidth,this.minimapHeight=r.height,this.canvasInnerWidth=a.minimapCanvasInnerWidth,this.canvasInnerHeight=a.minimapCanvasInnerHeight,this.canvasOuterWidth=a.minimapCanvasOuterWidth,this.canvasOuterHeight=a.minimapCanvasOuterHeight,this.isSampling=a.minimapIsSampling,this.editorHeight=r.height,this.fontScale=a.minimapScale,this.minimapLineHeight=a.minimapLineHeight,this.minimapCharWidth=1*this.fontScale,this.sectionHeaderFontFamily=Sfe,this.sectionHeaderFontSize=c.sectionHeaderFontSize*s,this.sectionHeaderLetterSpacing=c.sectionHeaderLetterSpacing,this.sectionHeaderFontColor=A1._getSectionHeaderColor(t,i.getColor(1)),this.charRenderer=Am(()=>Sk.create(this.fontScale,l.fontFamily)),this.defaultBackgroundColor=i.getColor(2),this.backgroundColor=A1._getMinimapBackground(t,this.defaultBackgroundColor),this.foregroundAlpha=A1._getMinimapForegroundOpacity(t)}static _getMinimapBackground(e,t){const i=e.getColor(mRe);return i?new mg(i.rgba.r,i.rgba.g,i.rgba.b,Math.round(255*i.rgba.a)):t}static _getMinimapForegroundOpacity(e){const t=e.getColor(_Re);return t?mg._clamp(Math.round(255*t.rgba.a)):255}static _getSectionHeaderColor(e,t){const i=e.getColor(jh);return i?new mg(i.rgba.r,i.rgba.g,i.rgba.b,Math.round(255*i.rgba.a)):t}equals(e){return this.renderMinimap===e.renderMinimap&&this.size===e.size&&this.minimapHeightIsEditorHeight===e.minimapHeightIsEditorHeight&&this.scrollBeyondLastLine===e.scrollBeyondLastLine&&this.paddingTop===e.paddingTop&&this.paddingBottom===e.paddingBottom&&this.showSlider===e.showSlider&&this.autohide===e.autohide&&this.pixelRatio===e.pixelRatio&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.lineHeight===e.lineHeight&&this.minimapLeft===e.minimapLeft&&this.minimapWidth===e.minimapWidth&&this.minimapHeight===e.minimapHeight&&this.canvasInnerWidth===e.canvasInnerWidth&&this.canvasInnerHeight===e.canvasInnerHeight&&this.canvasOuterWidth===e.canvasOuterWidth&&this.canvasOuterHeight===e.canvasOuterHeight&&this.isSampling===e.isSampling&&this.editorHeight===e.editorHeight&&this.fontScale===e.fontScale&&this.minimapLineHeight===e.minimapLineHeight&&this.minimapCharWidth===e.minimapCharWidth&&this.sectionHeaderFontSize===e.sectionHeaderFontSize&&this.sectionHeaderLetterSpacing===e.sectionHeaderLetterSpacing&&this.defaultBackgroundColor&&this.defaultBackgroundColor.equals(e.defaultBackgroundColor)&&this.backgroundColor&&this.backgroundColor.equals(e.backgroundColor)&&this.foregroundAlpha===e.foregroundAlpha}}class Lk{constructor(e,t,i,n,s,r,a,l,c){this.scrollTop=e,this.scrollHeight=t,this.sliderNeeded=i,this._computedSliderRatio=n,this.sliderTop=s,this.sliderHeight=r,this.topPaddingLineCount=a,this.startLineNumber=l,this.endLineNumber=c}getDesiredScrollTopFromDelta(e){return Math.round(this.scrollTop+e/this._computedSliderRatio)}getDesiredScrollTopFromTouchLocation(e){return Math.round((e-this.sliderHeight/2)/this._computedSliderRatio)}intersectWithViewport(e){const t=Math.max(this.startLineNumber,e.startLineNumber),i=Math.min(this.endLineNumber,e.endLineNumber);return t>i?null:[t,i]}getYForLineNumber(e,t){return+(e-this.startLineNumber+this.topPaddingLineCount)*t}static create(e,t,i,n,s,r,a,l,c,u,f){const g=e.pixelRatio,p=e.minimapLineHeight,_=Math.floor(e.canvasInnerHeight/p),b=e.lineHeight;if(e.minimapHeightIsEditorHeight){let N=l*e.lineHeight+e.paddingTop+e.paddingBottom;e.scrollBeyondLastLine&&(N+=Math.max(0,s-e.lineHeight-e.paddingBottom));const A=Math.max(1,Math.floor(s*s/N)),P=Math.max(0,e.minimapHeight-A),H=P/(u-s),ee=c*H,Q=P>0,te=Math.floor(e.canvasInnerHeight/e.minimapLineHeight),J=Math.floor(e.paddingTop/e.lineHeight);return new Lk(c,u,Q,H,ee,A,J,1,Math.min(a,te))}let y;if(r&&i!==a){const N=i-t+1;y=Math.floor(N*p/g)}else{const N=s/b;y=Math.floor(N*p/g)}const S=Math.floor(e.paddingTop/b);let L=Math.floor(e.paddingBottom/b);if(e.scrollBeyondLastLine){const N=s/b;L=Math.max(L,N-1)}let x;if(L>0){const N=s/b;x=(S+a+L-N-1)*p/g}else x=Math.max(0,(S+a)*p/g-y);x=Math.min(e.minimapHeight-y,x);const k=x/(u-s),E=c*k;if(_>=S+a+L){const N=x>0;return new Lk(c,u,N,k,E,y,S,1,a)}else{let N;t>1?N=t+S:N=Math.max(1,c/b);let A,P=Math.max(1,Math.floor(N-E*g/p));P<S?(A=S-P+1,P=1):(A=0,P=Math.max(1,P-S)),f&&f.scrollHeight===u&&(f.scrollTop>c&&(P=Math.min(P,f.startLineNumber),A=Math.max(A,f.topPaddingLineCount)),f.scrollTop<c&&(P=Math.max(P,f.startLineNumber),A=Math.min(A,f.topPaddingLineCount)));const H=Math.min(a,P-A+_-1),ee=(c-n)/b;let Q;return c>=e.paddingTop?Q=(t-P+A+ee)*p/g:Q=c/e.paddingTop*(A+ee)*p/g,new Lk(c,u,!0,k,Q,y,A,P,H)}}}const z2=class z2{constructor(e){this.dy=e}onContentChanged(){this.dy=-1}onTokensChanged(){this.dy=-1}};z2.INVALID=new z2(-1);let VP=z2;class boe{constructor(e,t,i){this.renderedLayout=e,this._imageData=t,this._renderedLines=new vfe({createLine:()=>VP.INVALID}),this._renderedLines._set(e.startLineNumber,i)}linesEquals(e){if(!this.scrollEquals(e))return!1;const i=this._renderedLines._get().lines;for(let n=0,s=i.length;n<s;n++)if(i[n].dy===-1)return!1;return!0}scrollEquals(e){return this.renderedLayout.startLineNumber===e.startLineNumber&&this.renderedLayout.endLineNumber===e.endLineNumber}_get(){const e=this._renderedLines._get();return{imageData:this._imageData,rendLineNumberStart:e.rendLineNumberStart,lines:e.lines}}onLinesChanged(e,t){return this._renderedLines.onLinesChanged(e,t)}onLinesDeleted(e,t){this._renderedLines.onLinesDeleted(e,t)}onLinesInserted(e,t){this._renderedLines.onLinesInserted(e,t)}onTokensChanged(e){return this._renderedLines.onTokensChanged(e)}}class PG{constructor(e,t,i,n){this._backgroundFillData=PG._createBackgroundFillData(t,i,n),this._buffers=[e.createImageData(t,i),e.createImageData(t,i)],this._lastUsedBuffer=0}getBuffer(){this._lastUsedBuffer=1-this._lastUsedBuffer;const e=this._buffers[this._lastUsedBuffer];return e.data.set(this._backgroundFillData),e}static _createBackgroundFillData(e,t,i){const n=i.r,s=i.g,r=i.b,a=i.a,l=new Uint8ClampedArray(e*t*4);let c=0;for(let u=0;u<t;u++)for(let f=0;f<e;f++)l[c]=n,l[c+1]=s,l[c+2]=r,l[c+3]=a,c+=4;return l}}class sE{static compute(e,t,i){if(e.renderMinimap===0||!e.isSampling)return[null,[]];const{minimapLineCount:n}=f1.computeContainedMinimapLineCount({viewLineCount:t,scrollBeyondLastLine:e.scrollBeyondLastLine,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,height:e.editorHeight,lineHeight:e.lineHeight,pixelRatio:e.pixelRatio}),s=t/n,r=s/2;if(!i||i.minimapLines.length===0){const y=[];if(y[0]=1,n>1){for(let S=0,L=n-1;S<L;S++)y[S]=Math.round(S*s+r);y[n-1]=t}return[new sE(s,y),[]]}const a=i.minimapLines,l=a.length,c=[];let u=0,f=0,g=1;const p=10;let _=[],b=null;for(let y=0;y<n;y++){const S=Math.max(g,Math.round(y*s)),L=Math.max(S,Math.round((y+1)*s));for(;u<l&&a[u]<S;){if(_.length<p){const k=u+1+f;b&&b.type==="deleted"&&b._oldIndex===u-1?b.deleteToLineNumber++:(b={type:"deleted",_oldIndex:u,deleteFromLineNumber:k,deleteToLineNumber:k},_.push(b)),f--}u++}let x;if(u<l&&a[u]<=L)x=a[u],u++;else if(y===0?x=1:y+1===n?x=t:x=Math.round(y*s+r),_.length<p){const k=u+1+f;b&&b.type==="inserted"&&b._i===y-1?b.insertToLineNumber++:(b={type:"inserted",_i:y,insertFromLineNumber:k,insertToLineNumber:k},_.push(b)),f++}c[y]=x,g=x}if(_.length<p)for(;u<l;){const y=u+1+f;b&&b.type==="deleted"&&b._oldIndex===u-1?b.deleteToLineNumber++:(b={type:"deleted",_oldIndex:u,deleteFromLineNumber:y,deleteToLineNumber:y},_.push(b)),f--,u++}else _=[{type:"flush"}];return[new sE(s,c),_]}constructor(e,t){this.samplingRatio=e,this.minimapLines=t}modelLineToMinimapLine(e){return Math.min(this.minimapLines.length,Math.max(1,Math.round(e/this.samplingRatio)))}modelLineRangeToMinimapLineRange(e,t){let i=this.modelLineToMinimapLine(e)-1;for(;i>0&&this.minimapLines[i-1]>=e;)i--;let n=this.modelLineToMinimapLine(t)-1;for(;n+1<this.minimapLines.length&&this.minimapLines[n+1]<=t;)n++;if(i===n){const s=this.minimapLines[i];if(s<e||s>t)return null}return[i+1,n+1]}decorationLineRangeToMinimapLineRange(e,t){let i=this.modelLineToMinimapLine(e),n=this.modelLineToMinimapLine(t);return e!==t&&n===i&&(n===this.minimapLines.length?i>1&&i--:n++),[i,n]}onLinesDeleted(e){const t=e.toLineNumber-e.fromLineNumber+1;let i=this.minimapLines.length,n=0;for(let s=this.minimapLines.length-1;s>=0&&!(this.minimapLines[s]<e.fromLineNumber);s--)this.minimapLines[s]<=e.toLineNumber?(this.minimapLines[s]=Math.max(1,e.fromLineNumber-1),i=Math.min(i,s),n=Math.max(n,s)):this.minimapLines[s]-=t;return[i,n]}onLinesInserted(e){const t=e.toLineNumber-e.fromLineNumber+1;for(let i=this.minimapLines.length-1;i>=0&&!(this.minimapLines[i]<e.fromLineNumber);i--)this.minimapLines[i]+=t}}class DHe extends hl{constructor(e){super(e),this._sectionHeaderCache=new $h(10,1.5),this.tokensColorTracker=HP.getInstance(),this._selections=[],this._minimapSelections=null,this.options=new A1(this._context.configuration,this._context.theme,this.tokensColorTracker);const[t]=sE.compute(this.options,this._context.viewModel.getLineCount(),null);this._samplingState=t,this._shouldCheckSampling=!1,this._actual=new Vw(e.theme,this)}dispose(){this._actual.dispose(),super.dispose()}getDomNode(){return this._actual.getDomNode()}_onOptionsMaybeChanged(){const e=new A1(this._context.configuration,this._context.theme,this.tokensColorTracker);return this.options.equals(e)?!1:(this.options=e,this._recreateLineSampling(),this._actual.onDidChangeOptions(),!0)}onConfigurationChanged(e){return this._onOptionsMaybeChanged()}onCursorStateChanged(e){return this._selections=e.selections,this._minimapSelections=null,this._actual.onSelectionChanged()}onDecorationsChanged(e){return e.affectsMinimap?this._actual.onDecorationsChanged():!1}onFlushed(e){return this._samplingState&&(this._shouldCheckSampling=!0),this._actual.onFlushed()}onLinesChanged(e){if(this._samplingState){const t=this._samplingState.modelLineRangeToMinimapLineRange(e.fromLineNumber,e.fromLineNumber+e.count-1);return t?this._actual.onLinesChanged(t[0],t[1]-t[0]+1):!1}else return this._actual.onLinesChanged(e.fromLineNumber,e.count)}onLinesDeleted(e){if(this._samplingState){const[t,i]=this._samplingState.onLinesDeleted(e);return t<=i&&this._actual.onLinesChanged(t+1,i-t+1),this._shouldCheckSampling=!0,!0}else return this._actual.onLinesDeleted(e.fromLineNumber,e.toLineNumber)}onLinesInserted(e){return this._samplingState?(this._samplingState.onLinesInserted(e),this._shouldCheckSampling=!0,!0):this._actual.onLinesInserted(e.fromLineNumber,e.toLineNumber)}onScrollChanged(e){return this._actual.onScrollChanged()}onThemeChanged(e){return this._actual.onThemeChanged(),this._onOptionsMaybeChanged(),!0}onTokensChanged(e){if(this._samplingState){const t=[];for(const i of e.ranges){const n=this._samplingState.modelLineRangeToMinimapLineRange(i.fromLineNumber,i.toLineNumber);n&&t.push({fromLineNumber:n[0],toLineNumber:n[1]})}return t.length?this._actual.onTokensChanged(t):!1}else return this._actual.onTokensChanged(e.ranges)}onTokensColorsChanged(e){return this._onOptionsMaybeChanged(),this._actual.onTokensColorsChanged()}onZonesChanged(e){return this._actual.onZonesChanged()}prepareRender(e){this._shouldCheckSampling&&(this._shouldCheckSampling=!1,this._recreateLineSampling())}render(e){let t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber;this._samplingState&&(t=this._samplingState.modelLineToMinimapLine(t),i=this._samplingState.modelLineToMinimapLine(i));const n={viewportContainsWhitespaceGaps:e.viewportData.whitespaceViewportData.length>0,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,viewportStartLineNumber:t,viewportEndLineNumber:i,viewportStartLineNumberVerticalOffset:e.getVerticalOffsetForLineNumber(t),scrollTop:e.scrollTop,scrollLeft:e.scrollLeft,viewportWidth:e.viewportWidth,viewportHeight:e.viewportHeight};this._actual.render(n)}_recreateLineSampling(){this._minimapSelections=null;const e=!!this._samplingState,[t,i]=sE.compute(this.options,this._context.viewModel.getLineCount(),this._samplingState);if(this._samplingState=t,e&&this._samplingState)for(const n of i)switch(n.type){case"deleted":this._actual.onLinesDeleted(n.deleteFromLineNumber,n.deleteToLineNumber);break;case"inserted":this._actual.onLinesInserted(n.insertFromLineNumber,n.insertToLineNumber);break;case"flush":this._actual.onFlushed();break}}getLineCount(){return this._samplingState?this._samplingState.minimapLines.length:this._context.viewModel.getLineCount()}getRealLineCount(){return this._context.viewModel.getLineCount()}getLineContent(e){return this._samplingState?this._context.viewModel.getLineContent(this._samplingState.minimapLines[e-1]):this._context.viewModel.getLineContent(e)}getLineMaxColumn(e){return this._samplingState?this._context.viewModel.getLineMaxColumn(this._samplingState.minimapLines[e-1]):this._context.viewModel.getLineMaxColumn(e)}getMinimapLinesRenderingData(e,t,i){if(this._samplingState){const n=[];for(let s=0,r=t-e+1;s<r;s++)i[s]?n[s]=this._context.viewModel.getViewLineData(this._samplingState.minimapLines[e+s-1]):n[s]=null;return n}return this._context.viewModel.getMinimapLinesRenderingData(e,t,i).data}getSelections(){if(this._minimapSelections===null)if(this._samplingState){this._minimapSelections=[];for(const e of this._selections){const[t,i]=this._samplingState.decorationLineRangeToMinimapLineRange(e.startLineNumber,e.endLineNumber);this._minimapSelections.push(new Ke(t,e.startColumn,i,e.endColumn))}}else this._minimapSelections=this._selections;return this._minimapSelections}getMinimapDecorationsInViewport(e,t){const i=this._getMinimapDecorationsInViewport(e,t).filter(n=>{var s;return!((s=n.options.minimap)!=null&&s.sectionHeaderStyle)});if(this._samplingState){const n=[];for(const s of i){if(!s.options.minimap)continue;const r=s.range,a=this._samplingState.modelLineToMinimapLine(r.startLineNumber),l=this._samplingState.modelLineToMinimapLine(r.endLineNumber);n.push(new ofe(new M(a,r.startColumn,l,r.endColumn),s.options))}return n}return i}getSectionHeaderDecorationsInViewport(e,t){const i=this.options.minimapLineHeight,s=this.options.sectionHeaderFontSize/i;return e=Math.floor(Math.max(1,e-s)),this._getMinimapDecorationsInViewport(e,t).filter(r=>{var a;return!!((a=r.options.minimap)!=null&&a.sectionHeaderStyle)})}_getMinimapDecorationsInViewport(e,t){let i;if(this._samplingState){const n=this._samplingState.minimapLines[e-1],s=this._samplingState.minimapLines[t-1];i=new M(n,1,s,this._context.viewModel.getLineMaxColumn(s))}else i=new M(e,1,t,this._context.viewModel.getLineMaxColumn(t));return this._context.viewModel.getMinimapDecorationsInRange(i)}getSectionHeaderText(e,t){var r;const i=(r=e.options.minimap)==null?void 0:r.sectionHeaderText;if(!i)return null;const n=this._sectionHeaderCache.get(i);if(n)return n;const s=t(i);return this._sectionHeaderCache.set(i,s),s}getOptions(){return this._context.viewModel.model.getOptions()}revealLineNumber(e){this._samplingState&&(e=this._samplingState.minimapLines[e-1]),this._context.viewModel.revealRange("mouse",!1,new M(e,1,e,1),1,0)}setScrollTop(e){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:e},1)}}class Vw extends X{constructor(e,t){super(),this._renderDecorations=!1,this._gestureInProgress=!1,this._theme=e,this._model=t,this._lastRenderData=null,this._buffers=null,this._selectionColor=this._theme.getColor(pne),this._domNode=ki(document.createElement("div")),bu.write(this._domNode,9),this._domNode.setClassName(this._getMinimapDomNodeClassName()),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._shadow=ki(document.createElement("div")),this._shadow.setClassName("minimap-shadow-hidden"),this._domNode.appendChild(this._shadow),this._canvas=ki(document.createElement("canvas")),this._canvas.setPosition("absolute"),this._canvas.setLeft(0),this._domNode.appendChild(this._canvas),this._decorationsCanvas=ki(document.createElement("canvas")),this._decorationsCanvas.setPosition("absolute"),this._decorationsCanvas.setClassName("minimap-decorations-layer"),this._decorationsCanvas.setLeft(0),this._domNode.appendChild(this._decorationsCanvas),this._slider=ki(document.createElement("div")),this._slider.setPosition("absolute"),this._slider.setClassName("minimap-slider"),this._slider.setLayerHinting(!0),this._slider.setContain("strict"),this._domNode.appendChild(this._slider),this._sliderHorizontal=ki(document.createElement("div")),this._sliderHorizontal.setPosition("absolute"),this._sliderHorizontal.setClassName("minimap-slider-horizontal"),this._slider.appendChild(this._sliderHorizontal),this._applyLayout(),this._pointerDownListener=Bn(this._domNode.domNode,Le.POINTER_DOWN,i=>{if(i.preventDefault(),this._model.options.renderMinimap===0||!this._lastRenderData)return;if(this._model.options.size!=="proportional"){if(i.button===0&&this._lastRenderData){const c=os(this._slider.domNode),u=c.top+c.height/2;this._startSliderDragging(i,u,this._lastRenderData.renderedLayout)}return}const s=this._model.options.minimapLineHeight,r=this._model.options.canvasInnerHeight/this._model.options.canvasOuterHeight*i.offsetY;let l=Math.floor(r/s)+this._lastRenderData.renderedLayout.startLineNumber-this._lastRenderData.renderedLayout.topPaddingLineCount;l=Math.min(l,this._model.getLineCount()),this._model.revealLineNumber(l)}),this._sliderPointerMoveMonitor=new YS,this._sliderPointerDownListener=Bn(this._slider.domNode,Le.POINTER_DOWN,i=>{i.preventDefault(),i.stopPropagation(),i.button===0&&this._lastRenderData&&this._startSliderDragging(i,i.pageY,this._lastRenderData.renderedLayout)}),this._gestureDisposable=Jo.addTarget(this._domNode.domNode),this._sliderTouchStartListener=se(this._domNode.domNode,tn.Start,i=>{i.preventDefault(),i.stopPropagation(),this._lastRenderData&&(this._slider.toggleClassName("active",!0),this._gestureInProgress=!0,this.scrollDueToTouchEvent(i))},{passive:!1}),this._sliderTouchMoveListener=se(this._domNode.domNode,tn.Change,i=>{i.preventDefault(),i.stopPropagation(),this._lastRenderData&&this._gestureInProgress&&this.scrollDueToTouchEvent(i)},{passive:!1}),this._sliderTouchEndListener=Bn(this._domNode.domNode,tn.End,i=>{i.preventDefault(),i.stopPropagation(),this._gestureInProgress=!1,this._slider.toggleClassName("active",!1)})}_startSliderDragging(e,t,i){if(!e.target||!(e.target instanceof Element))return;const n=e.pageX;this._slider.toggleClassName("active",!0);const s=(r,a)=>{const l=os(this._domNode.domNode),c=Math.min(Math.abs(a-n),Math.abs(a-l.left),Math.abs(a-l.left-l.width));if(Po&&c>xHe){this._model.setScrollTop(i.scrollTop);return}const u=r-t;this._model.setScrollTop(i.getDesiredScrollTopFromDelta(u))};e.pageY!==t&&s(e.pageY,n),this._sliderPointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,r=>s(r.pageY,r.pageX),()=>{this._slider.toggleClassName("active",!1)})}scrollDueToTouchEvent(e){const t=this._domNode.domNode.getBoundingClientRect().top,i=this._lastRenderData.renderedLayout.getDesiredScrollTopFromTouchLocation(e.pageY-t);this._model.setScrollTop(i)}dispose(){this._pointerDownListener.dispose(),this._sliderPointerMoveMonitor.dispose(),this._sliderPointerDownListener.dispose(),this._gestureDisposable.dispose(),this._sliderTouchStartListener.dispose(),this._sliderTouchMoveListener.dispose(),this._sliderTouchEndListener.dispose(),super.dispose()}_getMinimapDomNodeClassName(){const e=["minimap"];return this._model.options.showSlider==="always"?e.push("slider-always"):e.push("slider-mouseover"),this._model.options.autohide&&e.push("autohide"),e.join(" ")}getDomNode(){return this._domNode}_applyLayout(){this._domNode.setLeft(this._model.options.minimapLeft),this._domNode.setWidth(this._model.options.minimapWidth),this._domNode.setHeight(this._model.options.minimapHeight),this._shadow.setHeight(this._model.options.minimapHeight),this._canvas.setWidth(this._model.options.canvasOuterWidth),this._canvas.setHeight(this._model.options.canvasOuterHeight),this._canvas.domNode.width=this._model.options.canvasInnerWidth,this._canvas.domNode.height=this._model.options.canvasInnerHeight,this._decorationsCanvas.setWidth(this._model.options.canvasOuterWidth),this._decorationsCanvas.setHeight(this._model.options.canvasOuterHeight),this._decorationsCanvas.domNode.width=this._model.options.canvasInnerWidth,this._decorationsCanvas.domNode.height=this._model.options.canvasInnerHeight,this._slider.setWidth(this._model.options.minimapWidth)}_getBuffer(){return this._buffers||this._model.options.canvasInnerWidth>0&&this._model.options.canvasInnerHeight>0&&(this._buffers=new PG(this._canvas.domNode.getContext("2d"),this._model.options.canvasInnerWidth,this._model.options.canvasInnerHeight,this._model.options.backgroundColor)),this._buffers?this._buffers.getBuffer():null}onDidChangeOptions(){this._lastRenderData=null,this._buffers=null,this._applyLayout(),this._domNode.setClassName(this._getMinimapDomNodeClassName())}onSelectionChanged(){return this._renderDecorations=!0,!0}onDecorationsChanged(){return this._renderDecorations=!0,!0}onFlushed(){return this._lastRenderData=null,!0}onLinesChanged(e,t){return this._lastRenderData?this._lastRenderData.onLinesChanged(e,t):!1}onLinesDeleted(e,t){var i;return(i=this._lastRenderData)==null||i.onLinesDeleted(e,t),!0}onLinesInserted(e,t){var i;return(i=this._lastRenderData)==null||i.onLinesInserted(e,t),!0}onScrollChanged(){return this._renderDecorations=!0,!0}onThemeChanged(){return this._selectionColor=this._theme.getColor(pne),this._renderDecorations=!0,!0}onTokensChanged(e){return this._lastRenderData?this._lastRenderData.onTokensChanged(e):!1}onTokensColorsChanged(){return this._lastRenderData=null,this._buffers=null,!0}onZonesChanged(){return this._lastRenderData=null,!0}render(e){if(this._model.options.renderMinimap===0){this._shadow.setClassName("minimap-shadow-hidden"),this._sliderHorizontal.setWidth(0),this._sliderHorizontal.setHeight(0);return}e.scrollLeft+e.viewportWidth>=e.scrollWidth?this._shadow.setClassName("minimap-shadow-hidden"):this._shadow.setClassName("minimap-shadow-visible");const i=Lk.create(this._model.options,e.viewportStartLineNumber,e.viewportEndLineNumber,e.viewportStartLineNumberVerticalOffset,e.viewportHeight,e.viewportContainsWhitespaceGaps,this._model.getLineCount(),this._model.getRealLineCount(),e.scrollTop,e.scrollHeight,this._lastRenderData?this._lastRenderData.renderedLayout:null);this._slider.setDisplay(i.sliderNeeded?"block":"none"),this._slider.setTop(i.sliderTop),this._slider.setHeight(i.sliderHeight),this._sliderHorizontal.setLeft(0),this._sliderHorizontal.setWidth(this._model.options.minimapWidth),this._sliderHorizontal.setTop(0),this._sliderHorizontal.setHeight(i.sliderHeight),this.renderDecorations(i),this._lastRenderData=this.renderLines(i)}renderDecorations(e){if(this._renderDecorations){this._renderDecorations=!1;const t=this._model.getSelections();t.sort(M.compareRangesUsingStarts);const i=this._model.getMinimapDecorationsInViewport(e.startLineNumber,e.endLineNumber);i.sort((g,p)=>(g.options.zIndex||0)-(p.options.zIndex||0));const{canvasInnerWidth:n,canvasInnerHeight:s}=this._model.options,r=this._model.options.minimapLineHeight,a=this._model.options.minimapCharWidth,l=this._model.getOptions().tabSize,c=this._decorationsCanvas.domNode.getContext("2d");c.clearRect(0,0,n,s);const u=new Coe(e.startLineNumber,e.endLineNumber,!1);this._renderSelectionLineHighlights(c,t,u,e,r),this._renderDecorationsLineHighlights(c,i,u,e,r);const f=new Coe(e.startLineNumber,e.endLineNumber,null);this._renderSelectionsHighlights(c,t,f,e,r,l,a,n),this._renderDecorationsHighlights(c,i,f,e,r,l,a,n),this._renderSectionHeaders(e)}}_renderSelectionLineHighlights(e,t,i,n,s){if(!this._selectionColor||this._selectionColor.isTransparent())return;e.fillStyle=this._selectionColor.transparent(.5).toString();let r=0,a=0;for(const l of t){const c=n.intersectWithViewport(l);if(!c)continue;const[u,f]=c;for(let _=u;_<=f;_++)i.set(_,!0);const g=n.getYForLineNumber(u,s),p=n.getYForLineNumber(f,s);a>=g||(a>r&&e.fillRect(Zu,r,e.canvas.width,a-r),r=g),a=p}a>r&&e.fillRect(Zu,r,e.canvas.width,a-r)}_renderDecorationsLineHighlights(e,t,i,n,s){const r=new Map;for(let a=t.length-1;a>=0;a--){const l=t[a],c=l.options.minimap;if(!c||c.position!==1)continue;const u=n.intersectWithViewport(l.range);if(!u)continue;const[f,g]=u,p=c.getColor(this._theme.value);if(!p||p.isTransparent())continue;let _=r.get(p.toString());_||(_=p.transparent(.5).toString(),r.set(p.toString(),_)),e.fillStyle=_;for(let b=f;b<=g;b++){if(i.has(b))continue;i.set(b,!0);const y=n.getYForLineNumber(f,s);e.fillRect(Zu,y,e.canvas.width,s)}}}_renderSelectionsHighlights(e,t,i,n,s,r,a,l){if(!(!this._selectionColor||this._selectionColor.isTransparent()))for(const c of t){const u=n.intersectWithViewport(c);if(!u)continue;const[f,g]=u;for(let p=f;p<=g;p++)this.renderDecorationOnLine(e,i,c,this._selectionColor,n,p,s,s,r,a,l)}}_renderDecorationsHighlights(e,t,i,n,s,r,a,l){for(const c of t){const u=c.options.minimap;if(!u)continue;const f=n.intersectWithViewport(c.range);if(!f)continue;const[g,p]=f,_=u.getColor(this._theme.value);if(!(!_||_.isTransparent()))for(let b=g;b<=p;b++)switch(u.position){case 1:this.renderDecorationOnLine(e,i,c.range,_,n,b,s,s,r,a,l);continue;case 2:{const y=n.getYForLineNumber(b,s);this.renderDecoration(e,_,2,y,kHe,s);continue}}}}renderDecorationOnLine(e,t,i,n,s,r,a,l,c,u,f){const g=s.getYForLineNumber(r,l);if(g+a<0||g>this._model.options.canvasInnerHeight)return;const{startLineNumber:p,endLineNumber:_}=i,b=p===r?i.startColumn:1,y=_===r?i.endColumn:this._model.getLineMaxColumn(r),S=this.getXOffsetForPosition(t,r,b,c,u,f),L=this.getXOffsetForPosition(t,r,y,c,u,f);this.renderDecoration(e,n,S,g,L-S,a)}getXOffsetForPosition(e,t,i,n,s,r){if(i===1)return Zu;if((i-1)*s>=r)return r;let l=e.get(t);if(!l){const c=this._model.getLineContent(t);l=[Zu];let u=Zu;for(let f=1;f<c.length+1;f++){const g=c.charCodeAt(f-1),p=g===9?n*s:Fm(g)?2*s:s,_=u+p;if(_>=r){l[f]=r;break}l[f]=_,u=_}e.set(t,l)}return i-1<l.length?l[i-1]:r}renderDecoration(e,t,i,n,s,r){e.fillStyle=t&&t.toString()||"",e.fillRect(i,n,s,r)}_renderSectionHeaders(e){var b;const t=this._model.options.minimapLineHeight,i=this._model.options.sectionHeaderFontSize,n=this._model.options.sectionHeaderLetterSpacing,s=i*1.5,{canvasInnerWidth:r}=this._model.options,a=this._model.options.backgroundColor,l=`rgb(${a.r} ${a.g} ${a.b} / .7)`,c=this._model.options.sectionHeaderFontColor,u=`rgb(${c.r} ${c.g} ${c.b})`,f=u,g=this._decorationsCanvas.domNode.getContext("2d");g.letterSpacing=n+"px",g.font="500 "+i+"px "+this._model.options.sectionHeaderFontFamily,g.strokeStyle=f,g.lineWidth=.2;const p=this._model.getSectionHeaderDecorationsInViewport(e.startLineNumber,e.endLineNumber);p.sort((y,S)=>y.range.startLineNumber-S.range.startLineNumber);const _=Vw._fitSectionHeader.bind(null,g,r-Zu);for(const y of p){const S=e.getYForLineNumber(y.range.startLineNumber,t)+i,L=S-i,x=L+2,k=this._model.getSectionHeaderText(y,_);Vw._renderSectionLabel(g,k,((b=y.options.minimap)==null?void 0:b.sectionHeaderStyle)===2,l,u,r,L,s,S,x)}}static _fitSectionHeader(e,t,i){if(!i)return i;const n="",s=e.measureText(i).width,r=e.measureText(n).width;if(s<=t||s<=r)return i;const a=i.length,l=s/i.length,c=Math.floor((t-r)/l)-1;let u=Math.ceil(c/2);for(;u>0&&/\s/.test(i[u-1]);)--u;return i.substring(0,u)+n+i.substring(a-(c-u))}static _renderSectionLabel(e,t,i,n,s,r,a,l,c,u){t&&(e.fillStyle=n,e.fillRect(0,a,r,l),e.fillStyle=s,e.fillText(t,Zu,c)),i&&(e.beginPath(),e.moveTo(0,u),e.lineTo(r,u),e.closePath(),e.stroke())}renderLines(e){const t=e.startLineNumber,i=e.endLineNumber,n=this._model.options.minimapLineHeight;if(this._lastRenderData&&this._lastRenderData.linesEquals(e)){const he=this._lastRenderData._get();return new boe(e,he.imageData,he.lines)}const s=this._getBuffer();if(!s)return null;const[r,a,l]=Vw._renderUntouchedLines(s,e.topPaddingLineCount,t,i,n,this._lastRenderData),c=this._model.getMinimapLinesRenderingData(t,i,l),u=this._model.getOptions().tabSize,f=this._model.options.defaultBackgroundColor,g=this._model.options.backgroundColor,p=this._model.options.foregroundAlpha,_=this._model.tokensColorTracker,b=_.backgroundIsLight(),y=this._model.options.renderMinimap,S=this._model.options.charRenderer(),L=this._model.options.fontScale,x=this._model.options.minimapCharWidth,E=(y===1?2:3)*L,N=n>E?Math.floor((n-E)/2):0,A=g.a/255,P=new mg(Math.round((g.r-f.r)*A+f.r),Math.round((g.g-f.g)*A+f.g),Math.round((g.b-f.b)*A+f.b),255);let H=e.topPaddingLineCount*n;const ee=[];for(let he=0,Ce=i-t+1;he<Ce;he++)l[he]&&Vw._renderLine(s,P,g.a,b,y,x,_,p,S,H,N,u,c[he],L,n),ee[he]=new VP(H),H+=n;const Q=r===-1?0:r,J=(a===-1?s.height:a)-Q;return this._canvas.domNode.getContext("2d").putImageData(s,0,0,0,Q,s.width,J),new boe(e,s,ee)}static _renderUntouchedLines(e,t,i,n,s,r){const a=[];if(!r){for(let H=0,ee=n-i+1;H<ee;H++)a[H]=!0;return[-1,-1,a]}const l=r._get(),c=l.imageData.data,u=l.rendLineNumberStart,f=l.lines,g=f.length,p=e.width,_=e.data,b=(n-i+1)*s*p*4;let y=-1,S=-1,L=-1,x=-1,k=-1,E=-1,N=t*s;for(let H=i;H<=n;H++){const ee=H-i,Q=H-u,te=Q>=0&&Q<g?f[Q].dy:-1;if(te===-1){a[ee]=!0,N+=s;continue}const J=te*p*4,Z=(te+s)*p*4,he=N*p*4,Ce=(N+s)*p*4;x===J&&E===he?(x=Z,E=Ce):(L!==-1&&(_.set(c.subarray(L,x),k),y===-1&&L===0&&L===k&&(y=x),S===-1&&x===b&&L===k&&(S=L)),L=J,x=Z,k=he,E=Ce),a[ee]=!1,N+=s}L!==-1&&(_.set(c.subarray(L,x),k),y===-1&&L===0&&L===k&&(y=x),S===-1&&x===b&&L===k&&(S=L));const A=y===-1?-1:y/(p*4),P=S===-1?-1:S/(p*4);return[A,P,a]}static _renderLine(e,t,i,n,s,r,a,l,c,u,f,g,p,_,b){const y=p.content,S=p.tokens,L=e.width-r,x=b===1;let k=Zu,E=0,N=0;for(let A=0,P=S.getCount();A<P;A++){const H=S.getEndOffset(A),ee=S.getForeground(A),Q=a.getColor(ee);for(;E<H;E++){if(k>L)return;const te=y.charCodeAt(E);if(te===9){const J=g-(E+N)%g;N+=J-1,k+=J*r}else if(te===32)k+=r;else{const J=Fm(te)?2:1;for(let Z=0;Z<J;Z++)if(s===2?c.blockRenderChar(e,k,u+f,Q,l,t,i,x):c.renderChar(e,k,u+f,te,Q,l,t,i,_,n,x),k+=r,k>L)return}}}}}class Coe{constructor(e,t,i){this._startLineNumber=e,this._endLineNumber=t,this._defaultValue=i,this._values=[];for(let n=0,s=this._endLineNumber-this._startLineNumber+1;n<s;n++)this._values[n]=i}has(e){return this.get(e)!==this._defaultValue}set(e,t){e<this._startLineNumber||e>this._endLineNumber||(this._values[e-this._startLineNumber]=t)}get(e){return e<this._startLineNumber||e>this._endLineNumber?this._defaultValue:this._values[e-this._startLineNumber]}}class EHe extends hl{constructor(e,t){super(e),this._viewDomNode=t;const n=this._context.configuration.options.get(146);this._widgets={},this._verticalScrollbarWidth=n.verticalScrollbarWidth,this._minimapWidth=n.minimap.minimapWidth,this._horizontalScrollbarHeight=n.horizontalScrollbarHeight,this._editorHeight=n.height,this._editorWidth=n.width,this._viewDomNodeRect={top:0,left:0,width:0,height:0},this._domNode=ki(document.createElement("div")),bu.write(this._domNode,4),this._domNode.setClassName("overlayWidgets"),this.overflowingOverlayWidgetsDomNode=ki(document.createElement("div")),bu.write(this.overflowingOverlayWidgetsDomNode,5),this.overflowingOverlayWidgetsDomNode.setClassName("overflowingOverlayWidgets")}dispose(){super.dispose(),this._widgets={}}getDomNode(){return this._domNode}onConfigurationChanged(e){const i=this._context.configuration.options.get(146);return this._verticalScrollbarWidth=i.verticalScrollbarWidth,this._minimapWidth=i.minimap.minimapWidth,this._horizontalScrollbarHeight=i.horizontalScrollbarHeight,this._editorHeight=i.height,this._editorWidth=i.width,!0}addWidget(e){const t=ki(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:null,domNode:t},t.setPosition("absolute"),t.setAttribute("widgetId",e.getId()),e.allowEditorOverflow?this.overflowingOverlayWidgetsDomNode.appendChild(t):this._domNode.appendChild(t),this.setShouldRender(),this._updateMaxMinWidth()}setWidgetPosition(e,t){const i=this._widgets[e.getId()],n=t?t.preference:null,s=t==null?void 0:t.stackOridinal;return i.preference===n&&i.stack===s?(this._updateMaxMinWidth(),!1):(i.preference=n,i.stack=s,this.setShouldRender(),this._updateMaxMinWidth(),!0)}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const n=this._widgets[t].domNode.domNode;delete this._widgets[t],n.remove(),this.setShouldRender(),this._updateMaxMinWidth()}}_updateMaxMinWidth(){var i,n;let e=0;const t=Object.keys(this._widgets);for(let s=0,r=t.length;s<r;s++){const a=t[s],c=(n=(i=this._widgets[a].widget).getMinContentWidthInPx)==null?void 0:n.call(i);typeof c<"u"&&(e=Math.max(e,c))}this._context.viewLayout.setOverlayWidgetsMinWidth(e)}_renderWidget(e,t){const i=e.domNode;if(e.preference===null){i.setTop("");return}const n=2*this._verticalScrollbarWidth+this._minimapWidth;if(e.preference===0||e.preference===1){if(e.preference===1){const s=i.domNode.clientHeight;i.setTop(this._editorHeight-s-2*this._horizontalScrollbarHeight)}else i.setTop(0);e.stack!==void 0?(i.setTop(t[e.preference]),t[e.preference]+=i.domNode.clientWidth):i.setRight(n)}else if(e.preference===2)i.domNode.style.right="50%",e.stack!==void 0?(i.setTop(t[2]),t[2]+=i.domNode.clientHeight):i.setTop(0);else{const{top:s,left:r}=e.preference;if(this._context.configuration.options.get(42)&&e.widget.allowEditorOverflow){const l=this._viewDomNodeRect;i.setTop(s+l.top),i.setLeft(r+l.left),i.setPosition("fixed")}else i.setTop(s),i.setLeft(r),i.setPosition("absolute")}}prepareRender(e){this._viewDomNodeRect=os(this._viewDomNode.domNode)}render(e){this._domNode.setWidth(this._editorWidth);const t=Object.keys(this._widgets),i=Array.from({length:3},()=>0);t.sort((n,s)=>(this._widgets[n].stack||0)-(this._widgets[s].stack||0));for(let n=0,s=t.length;n<s;n++){const r=t[n];this._renderWidget(this._widgets[r],i)}}}class IHe{constructor(e,t){const i=e.options;this.lineHeight=i.get(67),this.pixelRatio=i.get(144),this.overviewRulerLanes=i.get(83),this.renderBorder=i.get(82);const n=t.getColor(D2e);this.borderColor=n?n.toString():null,this.hideCursor=i.get(59);const s=t.getColor(M4);this.cursorColorSingle=s?s.transparent(.7).toString():null;const r=t.getColor(Aue);this.cursorColorPrimary=r?r.transparent(.7).toString():null;const a=t.getColor(Pue);this.cursorColorSecondary=a?a.transparent(.7).toString():null,this.themeType=t.type;const l=i.get(73),c=l.enabled,u=l.side,f=t.getColor(E2e),g=Kn.getDefaultBackground();f?this.backgroundColor=f:c&&u==="right"?this.backgroundColor=g:this.backgroundColor=null;const _=i.get(146).overviewRuler;this.top=_.top,this.right=_.right,this.domWidth=_.width,this.domHeight=_.height,this.overviewRulerLanes===0?(this.canvasWidth=0,this.canvasHeight=0):(this.canvasWidth=this.domWidth*this.pixelRatio|0,this.canvasHeight=this.domHeight*this.pixelRatio|0);const[b,y]=this._initLanes(1,this.canvasWidth,this.overviewRulerLanes);this.x=b,this.w=y}_initLanes(e,t,i){const n=t-e;if(i>=3){const s=Math.floor(n/3),r=Math.floor(n/3),a=n-s-r,l=e,c=l+s,u=l+s+a;return[[0,l,c,l,u,l,c,l],[0,s,a,s+a,r,s+a+r,a+r,s+a+r]]}else if(i===2){const s=Math.floor(n/2),r=n-s,a=e,l=a+s;return[[0,a,a,a,l,a,a,a],[0,s,s,s,r,s+r,s+r,s+r]]}else{const s=e,r=n;return[[0,s,s,s,s,s,s,s],[0,r,r,r,r,r,r,r]]}}equals(e){return this.lineHeight===e.lineHeight&&this.pixelRatio===e.pixelRatio&&this.overviewRulerLanes===e.overviewRulerLanes&&this.renderBorder===e.renderBorder&&this.borderColor===e.borderColor&&this.hideCursor===e.hideCursor&&this.cursorColorSingle===e.cursorColorSingle&&this.cursorColorPrimary===e.cursorColorPrimary&&this.cursorColorSecondary===e.cursorColorSecondary&&this.themeType===e.themeType&&ue.equals(this.backgroundColor,e.backgroundColor)&&this.top===e.top&&this.right===e.right&&this.domWidth===e.domWidth&&this.domHeight===e.domHeight&&this.canvasWidth===e.canvasWidth&&this.canvasHeight===e.canvasHeight}}class THe extends hl{constructor(e){super(e),this._actualShouldRender=0,this._renderedDecorations=[],this._renderedCursorPositions=[],this._domNode=ki(document.createElement("canvas")),this._domNode.setClassName("decorationsOverviewRuler"),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._domNode.setAttribute("aria-hidden","true"),this._updateSettings(!1),this._tokensColorTrackerListener=Kn.onDidChange(t=>{t.changedColorMap&&this._updateSettings(!0)}),this._cursorPositions=[{position:new G(1,1),color:this._settings.cursorColorSingle}]}dispose(){super.dispose(),this._tokensColorTrackerListener.dispose()}_updateSettings(e){const t=new IHe(this._context.configuration,this._context.theme);return this._settings&&this._settings.equals(t)?!1:(this._settings=t,this._domNode.setTop(this._settings.top),this._domNode.setRight(this._settings.right),this._domNode.setWidth(this._settings.domWidth),this._domNode.setHeight(this._settings.domHeight),this._domNode.domNode.width=this._settings.canvasWidth,this._domNode.domNode.height=this._settings.canvasHeight,e&&this._render(),!0)}_markRenderingIsNeeded(){return this._actualShouldRender=2,!0}_markRenderingIsMaybeNeeded(){return this._actualShouldRender=1,!0}onConfigurationChanged(e){return this._updateSettings(!1)?this._markRenderingIsNeeded():!1}onCursorStateChanged(e){this._cursorPositions=[];for(let t=0,i=e.selections.length;t<i;t++){let n=this._settings.cursorColorSingle;i>1&&(n=t===0?this._settings.cursorColorPrimary:this._settings.cursorColorSecondary),this._cursorPositions.push({position:e.selections[t].getPosition(),color:n})}return this._cursorPositions.sort((t,i)=>G.compare(t.position,i.position)),this._markRenderingIsMaybeNeeded()}onDecorationsChanged(e){return e.affectsOverviewRuler?this._markRenderingIsMaybeNeeded():!1}onFlushed(e){return this._markRenderingIsNeeded()}onScrollChanged(e){return e.scrollHeightChanged?this._markRenderingIsNeeded():!1}onZonesChanged(e){return this._markRenderingIsNeeded()}onThemeChanged(e){return this._updateSettings(!1)?this._markRenderingIsNeeded():!1}getDomNode(){return this._domNode.domNode}prepareRender(e){}render(e){this._render(),this._actualShouldRender=0}_render(){const e=this._settings.backgroundColor;if(this._settings.overviewRulerLanes===0){this._domNode.setBackgroundColor(e?ue.Format.CSS.formatHexA(e):""),this._domNode.setDisplay("none");return}const t=this._context.viewModel.getAllOverviewRulerDecorations(this._context.theme);if(t.sort(ZD.compareByRenderingProps),this._actualShouldRender===1&&!ZD.equalsArr(this._renderedDecorations,t)&&(this._actualShouldRender=2),this._actualShouldRender===1&&!En(this._renderedCursorPositions,this._cursorPositions,(_,b)=>_.position.lineNumber===b.position.lineNumber&&_.color===b.color)&&(this._actualShouldRender=2),this._actualShouldRender===1)return;this._renderedDecorations=t,this._renderedCursorPositions=this._cursorPositions,this._domNode.setDisplay("block");const i=this._settings.canvasWidth,n=this._settings.canvasHeight,s=this._settings.lineHeight,r=this._context.viewLayout,a=this._context.viewLayout.getScrollHeight(),l=n/a,c=6*this._settings.pixelRatio|0,u=c/2|0,f=this._domNode.domNode.getContext("2d");e?e.isOpaque()?(f.fillStyle=ue.Format.CSS.formatHexA(e),f.fillRect(0,0,i,n)):(f.clearRect(0,0,i,n),f.fillStyle=ue.Format.CSS.formatHexA(e),f.fillRect(0,0,i,n)):f.clearRect(0,0,i,n);const g=this._settings.x,p=this._settings.w;for(const _ of t){const b=_.color,y=_.data;f.fillStyle=b;let S=0,L=0,x=0;for(let k=0,E=y.length/3;k<E;k++){const N=y[3*k],A=y[3*k+1],P=y[3*k+2];let H=r.getVerticalOffsetForLineNumber(A)*l|0,ee=(r.getVerticalOffsetForLineNumber(P)+s)*l|0;if(ee-H<c){let te=(H+ee)/2|0;te<u?te=u:te+u>n&&(te=n-u),H=te-u,ee=te+u}H>x+1||N!==S?(k!==0&&f.fillRect(g[S],L,p[S],x-L),S=N,L=H,x=ee):ee>x&&(x=ee)}f.fillRect(g[S],L,p[S],x-L)}if(!this._settings.hideCursor){const _=2*this._settings.pixelRatio|0,b=_/2|0,y=this._settings.x[7],S=this._settings.w[7];let L=-100,x=-100,k=null;for(let E=0,N=this._cursorPositions.length;E<N;E++){const A=this._cursorPositions[E].color;if(!A)continue;const P=this._cursorPositions[E].position;let H=r.getVerticalOffsetForLineNumber(P.lineNumber)*l|0;H<b?H=b:H+b>n&&(H=n-b);const ee=H-b,Q=ee+_;ee>x+1||A!==k?(E!==0&&k&&f.fillRect(y,L,S,x-L),L=ee,x=Q):Q>x&&(x=Q),k=A,f.fillStyle=A}k&&f.fillRect(y,L,S,x-L)}this._settings.renderBorder&&this._settings.borderColor&&this._settings.overviewRulerLanes>0&&(f.beginPath(),f.lineWidth=1,f.strokeStyle=this._settings.borderColor,f.moveTo(0,0),f.lineTo(0,n),f.moveTo(1,0),f.lineTo(i,0),f.stroke())}}class yoe{constructor(e,t,i){this._colorZoneBrand=void 0,this.from=e|0,this.to=t|0,this.colorId=i|0}static compare(e,t){return e.colorId===t.colorId?e.from===t.from?e.to-t.to:e.from-t.from:e.colorId-t.colorId}}class Lfe{constructor(e,t,i,n){this._overviewRulerZoneBrand=void 0,this.startLineNumber=e,this.endLineNumber=t,this.heightInLines=i,this.color=n,this._colorZone=null}static compare(e,t){return e.color===t.color?e.startLineNumber===t.startLineNumber?e.heightInLines===t.heightInLines?e.endLineNumber-t.endLineNumber:e.heightInLines-t.heightInLines:e.startLineNumber-t.startLineNumber:e.color<t.color?-1:1}setColorZone(e){this._colorZone=e}getColorZones(){return this._colorZone}}class NHe{constructor(e){this._getVerticalOffsetForLine=e,this._zones=[],this._colorZonesInvalid=!1,this._lineHeight=0,this._domWidth=0,this._domHeight=0,this._outerHeight=0,this._pixelRatio=1,this._lastAssignedId=0,this._color2Id=Object.create(null),this._id2Color=[]}getId2Color(){return this._id2Color}setZones(e){this._zones=e,this._zones.sort(Lfe.compare)}setLineHeight(e){return this._lineHeight===e?!1:(this._lineHeight=e,this._colorZonesInvalid=!0,!0)}setPixelRatio(e){this._pixelRatio=e,this._colorZonesInvalid=!0}getDOMWidth(){return this._domWidth}getCanvasWidth(){return this._domWidth*this._pixelRatio}setDOMWidth(e){return this._domWidth===e?!1:(this._domWidth=e,this._colorZonesInvalid=!0,!0)}getDOMHeight(){return this._domHeight}getCanvasHeight(){return this._domHeight*this._pixelRatio}setDOMHeight(e){return this._domHeight===e?!1:(this._domHeight=e,this._colorZonesInvalid=!0,!0)}getOuterHeight(){return this._outerHeight}setOuterHeight(e){return this._outerHeight===e?!1:(this._outerHeight=e,this._colorZonesInvalid=!0,!0)}resolveColorZones(){const e=this._colorZonesInvalid,t=Math.floor(this._lineHeight),i=Math.floor(this.getCanvasHeight()),n=Math.floor(this._outerHeight),s=i/n,r=Math.floor(4*this._pixelRatio/2),a=[];for(let l=0,c=this._zones.length;l<c;l++){const u=this._zones[l];if(!e){const k=u.getColorZones();if(k){a.push(k);continue}}const f=this._getVerticalOffsetForLine(u.startLineNumber),g=u.heightInLines===0?this._getVerticalOffsetForLine(u.endLineNumber)+t:f+u.heightInLines*t,p=Math.floor(s*f),_=Math.floor(s*g);let b=Math.floor((p+_)/2),y=_-b;y<r&&(y=r),b-y<0&&(b=y),b+y>i&&(b=i-y);const S=u.color;let L=this._color2Id[S];L||(L=++this._lastAssignedId,this._color2Id[S]=L,this._id2Color[L]=S);const x=new yoe(b-y,b+y,L);u.setColorZone(x),a.push(x)}return this._colorZonesInvalid=!1,a.sort(yoe.compare),a}}class RHe extends bI{constructor(e,t){super(),this._context=e;const i=this._context.configuration.options;this._domNode=ki(document.createElement("canvas")),this._domNode.setClassName(t),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._zoneManager=new NHe(n=>this._context.viewLayout.getVerticalOffsetForLineNumber(n)),this._zoneManager.setDOMWidth(0),this._zoneManager.setDOMHeight(0),this._zoneManager.setOuterHeight(this._context.viewLayout.getScrollHeight()),this._zoneManager.setLineHeight(i.get(67)),this._zoneManager.setPixelRatio(i.get(144)),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return e.hasChanged(67)&&(this._zoneManager.setLineHeight(t.get(67)),this._render()),e.hasChanged(144)&&(this._zoneManager.setPixelRatio(t.get(144)),this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render()),!0}onFlushed(e){return this._render(),!0}onScrollChanged(e){return e.scrollHeightChanged&&(this._zoneManager.setOuterHeight(e.scrollHeight),this._render()),!0}onZonesChanged(e){return this._render(),!0}getDomNode(){return this._domNode.domNode}setLayout(e){this._domNode.setTop(e.top),this._domNode.setRight(e.right);let t=!1;t=this._zoneManager.setDOMWidth(e.width)||t,t=this._zoneManager.setDOMHeight(e.height)||t,t&&(this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render())}setZones(e){this._zoneManager.setZones(e),this._render()}_render(){if(this._zoneManager.getOuterHeight()===0)return!1;const e=this._zoneManager.getCanvasWidth(),t=this._zoneManager.getCanvasHeight(),i=this._zoneManager.resolveColorZones(),n=this._zoneManager.getId2Color(),s=this._domNode.domNode.getContext("2d");return s.clearRect(0,0,e,t),i.length>0&&this._renderOneLane(s,i,n,e),!0}_renderOneLane(e,t,i,n){let s=0,r=0,a=0;for(const l of t){const c=l.colorId,u=l.from,f=l.to;c!==s?(e.fillRect(0,r,n,a-r),s=c,e.fillStyle=i[s],r=u,a=f):a>=u?a=Math.max(a,f):(e.fillRect(0,r,n,a-r),r=u,a=f)}e.fillRect(0,r,n,a-r)}}class MHe extends hl{constructor(e){super(e),this.domNode=ki(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("view-rulers"),this._renderedRulers=[];const t=this._context.configuration.options;this._rulers=t.get(103),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth}dispose(){super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._rulers=t.get(103),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,!0}onScrollChanged(e){return e.scrollHeightChanged}prepareRender(e){}_ensureRulersCount(){const e=this._renderedRulers.length,t=this._rulers.length;if(e===t)return;if(e<t){const{tabSize:n}=this._context.viewModel.model.getOptions(),s=n;let r=t-e;for(;r>0;){const a=ki(document.createElement("div"));a.setClassName("view-ruler"),a.setWidth(s),this.domNode.appendChild(a),this._renderedRulers.push(a),r--}return}let i=e-t;for(;i>0;){const n=this._renderedRulers.pop();this.domNode.removeChild(n),i--}}render(e){this._ensureRulersCount();for(let t=0,i=this._rulers.length;t<i;t++){const n=this._renderedRulers[t],s=this._rulers[t];n.setBoxShadow(s.color?`1px 0 0 0 ${s.color} inset`:""),n.setHeight(Math.min(e.scrollHeight,1e6)),n.setLeft(s.column*this._typicalHalfwidthCharacterWidth)}}}class AHe extends hl{constructor(e){super(e),this._scrollTop=0,this._width=0,this._updateWidth(),this._shouldShow=!1;const i=this._context.configuration.options.get(104);this._useShadows=i.useShadows,this._domNode=ki(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true")}dispose(){super.dispose()}_updateShouldShow(){const e=this._useShadows&&this._scrollTop>0;return this._shouldShow!==e?(this._shouldShow=e,!0):!1}getDomNode(){return this._domNode}_updateWidth(){const t=this._context.configuration.options.get(146);t.minimap.renderMinimap===0||t.minimap.minimapWidth>0&&t.minimap.minimapLeft===0?this._width=t.width:this._width=t.width-t.verticalScrollbarWidth}onConfigurationChanged(e){const i=this._context.configuration.options.get(104);return this._useShadows=i.useShadows,this._updateWidth(),this._updateShouldShow(),!0}onScrollChanged(e){return this._scrollTop=e.scrollTop,this._updateShouldShow()}prepareRender(e){}render(e){this._domNode.setWidth(this._width),this._domNode.setClassName(this._shouldShow?"scroll-decoration":"")}}class PHe{constructor(e){this.left=e.left,this.width=e.width,this.startStyle=null,this.endStyle=null}}class OHe{constructor(e,t){this.lineNumber=e,this.ranges=t}}function FHe(o){return new PHe(o)}function BHe(o){return new OHe(o.lineNumber,o.ranges.map(FHe))}const ds=class ds extends VC{constructor(e){super(),this._previousFrameVisibleRangesWithStyle=[],this._context=e;const t=this._context.configuration.options;this._roundedSelection=t.get(102),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,this._selections=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._roundedSelection=t.get(102),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_visibleRangesHaveGaps(e){for(let t=0,i=e.length;t<i;t++)if(e[t].ranges.length>1)return!0;return!1}_enrichVisibleRangesWithStyle(e,t,i){const n=this._typicalHalfwidthCharacterWidth/4;let s=null,r=null;if(i&&i.length>0&&t.length>0){const a=t[0].lineNumber;if(a===e.startLineNumber)for(let c=0;!s&&c<i.length;c++)i[c].lineNumber===a&&(s=i[c].ranges[0]);const l=t[t.length-1].lineNumber;if(l===e.endLineNumber)for(let c=i.length-1;!r&&c>=0;c--)i[c].lineNumber===l&&(r=i[c].ranges[0]);s&&!s.startStyle&&(s=null),r&&!r.startStyle&&(r=null)}for(let a=0,l=t.length;a<l;a++){const c=t[a].ranges[0],u=c.left,f=c.left+c.width,g={top:0,bottom:0},p={top:0,bottom:0};if(a>0){const _=t[a-1].ranges[0].left,b=t[a-1].ranges[0].left+t[a-1].ranges[0].width;RR(u-_)<n?g.top=2:u>_&&(g.top=1),RR(f-b)<n?p.top=2:_<f&&f<b&&(p.top=1)}else s&&(g.top=s.startStyle.top,p.top=s.endStyle.top);if(a+1<l){const _=t[a+1].ranges[0].left,b=t[a+1].ranges[0].left+t[a+1].ranges[0].width;RR(u-_)<n?g.bottom=2:_<u&&u<b&&(g.bottom=1),RR(f-b)<n?p.bottom=2:f<b&&(p.bottom=1)}else r&&(g.bottom=r.startStyle.bottom,p.bottom=r.endStyle.bottom);c.startStyle=g,c.endStyle=p}}_getVisibleRangesWithStyle(e,t,i){const s=(t.linesVisibleRangesForRange(e,!0)||[]).map(BHe);return!this._visibleRangesHaveGaps(s)&&this._roundedSelection&&this._enrichVisibleRangesWithStyle(t.visibleRange,s,i),s}_createSelectionPiece(e,t,i,n,s){return'<div class="cslr '+i+'" style="top:'+e.toString()+"px;bottom:"+t.toString()+"px;left:"+n.toString()+"px;width:"+s.toString()+'px;"></div>'}_actualRenderOneSelection(e,t,i,n){if(n.length===0)return;const s=!!n[0].ranges[0].startStyle,r=n[0].lineNumber,a=n[n.length-1].lineNumber;for(let l=0,c=n.length;l<c;l++){const u=n[l],f=u.lineNumber,g=f-t,p=i&&f===r?1:0,_=i&&f!==r&&f===a?1:0;let b="",y="";for(let S=0,L=u.ranges.length;S<L;S++){const x=u.ranges[S];if(s){const E=x.startStyle,N=x.endStyle;if(E.top===1||E.bottom===1){b+=this._createSelectionPiece(p,_,ds.SELECTION_CLASS_NAME,x.left-ds.ROUNDED_PIECE_WIDTH,ds.ROUNDED_PIECE_WIDTH);let A=ds.EDITOR_BACKGROUND_CLASS_NAME;E.top===1&&(A+=" "+ds.SELECTION_TOP_RIGHT),E.bottom===1&&(A+=" "+ds.SELECTION_BOTTOM_RIGHT),b+=this._createSelectionPiece(p,_,A,x.left-ds.ROUNDED_PIECE_WIDTH,ds.ROUNDED_PIECE_WIDTH)}if(N.top===1||N.bottom===1){b+=this._createSelectionPiece(p,_,ds.SELECTION_CLASS_NAME,x.left+x.width,ds.ROUNDED_PIECE_WIDTH);let A=ds.EDITOR_BACKGROUND_CLASS_NAME;N.top===1&&(A+=" "+ds.SELECTION_TOP_LEFT),N.bottom===1&&(A+=" "+ds.SELECTION_BOTTOM_LEFT),b+=this._createSelectionPiece(p,_,A,x.left+x.width,ds.ROUNDED_PIECE_WIDTH)}}let k=ds.SELECTION_CLASS_NAME;if(s){const E=x.startStyle,N=x.endStyle;E.top===0&&(k+=" "+ds.SELECTION_TOP_LEFT),E.bottom===0&&(k+=" "+ds.SELECTION_BOTTOM_LEFT),N.top===0&&(k+=" "+ds.SELECTION_TOP_RIGHT),N.bottom===0&&(k+=" "+ds.SELECTION_BOTTOM_RIGHT)}y+=this._createSelectionPiece(p,_,k,x.left,x.width)}e[g][0]+=b,e[g][1]+=y}}prepareRender(e){const t=[],i=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber;for(let r=i;r<=n;r++){const a=r-i;t[a]=["",""]}const s=[];for(let r=0,a=this._selections.length;r<a;r++){const l=this._selections[r];if(l.isEmpty()){s[r]=null;continue}const c=this._getVisibleRangesWithStyle(l,e,this._previousFrameVisibleRangesWithStyle[r]);s[r]=c,this._actualRenderOneSelection(t,i,this._selections.length>1,c)}this._previousFrameVisibleRangesWithStyle=s,this._renderResult=t.map(([r,a])=>r+a)}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}};ds.SELECTION_CLASS_NAME="selected-text",ds.SELECTION_TOP_LEFT="top-left-radius",ds.SELECTION_BOTTOM_LEFT="bottom-left-radius",ds.SELECTION_TOP_RIGHT="top-right-radius",ds.SELECTION_BOTTOM_RIGHT="bottom-right-radius",ds.EDITOR_BACKGROUND_CLASS_NAME="monaco-editor-background",ds.ROUNDED_PIECE_WIDTH=10;let Xz=ds;Nc((o,e)=>{const t=o.getColor(GNe);t&&!t.isTransparent()&&e.addRule(`.monaco-editor .view-line span.inline-selected-text { color: ${t}; }`)});function RR(o){return o<0?-o:o}class woe{constructor(e,t,i,n,s,r,a){this.top=e,this.left=t,this.paddingLeft=i,this.width=n,this.height=s,this.textContent=r,this.textContentClassName=a}}var og;(function(o){o[o.Single=0]="Single",o[o.MultiPrimary=1]="MultiPrimary",o[o.MultiSecondary=2]="MultiSecondary"})(og||(og={}));class Soe{constructor(e,t){this._context=e;const i=this._context.configuration.options,n=i.get(50);this._cursorStyle=i.get(28),this._lineHeight=i.get(67),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(i.get(31),this._typicalHalfwidthCharacterWidth),this._isVisible=!0,this._domNode=ki(document.createElement("div")),this._domNode.setClassName(`cursor ${N1}`),this._domNode.setHeight(this._lineHeight),this._domNode.setTop(0),this._domNode.setLeft(0),yo(this._domNode,n),this._domNode.setDisplay("none"),this._position=new G(1,1),this._pluralityClass="",this.setPlurality(t),this._lastRenderedContent="",this._renderData=null}getDomNode(){return this._domNode}getPosition(){return this._position}setPlurality(e){switch(e){default:case og.Single:this._pluralityClass="";break;case og.MultiPrimary:this._pluralityClass="cursor-primary";break;case og.MultiSecondary:this._pluralityClass="cursor-secondary";break}}show(){this._isVisible||(this._domNode.setVisibility("inherit"),this._isVisible=!0)}hide(){this._isVisible&&(this._domNode.setVisibility("hidden"),this._isVisible=!1)}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(50);return this._cursorStyle=t.get(28),this._lineHeight=t.get(67),this._typicalHalfwidthCharacterWidth=i.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(31),this._typicalHalfwidthCharacterWidth),yo(this._domNode,i),!0}onCursorPositionChanged(e,t){return t?this._domNode.domNode.style.transitionProperty="none":this._domNode.domNode.style.transitionProperty="",this._position=e,!0}_getGraphemeAwarePosition(){const{lineNumber:e,column:t}=this._position,i=this._context.viewModel.getLineContent(e),[n,s]=Hke(i,t-1);return[new G(e,n+1),i.substring(n,s)]}_prepareRender(e){let t="",i="";const[n,s]=this._getGraphemeAwarePosition();if(this._cursorStyle===_o.Line||this._cursorStyle===_o.LineThin){const g=e.visibleRangeForPosition(n);if(!g||g.outsideRenderedLine)return null;const p=at(this._domNode.domNode);let _;this._cursorStyle===_o.Line?(_=Qte(p,this._lineCursorWidth>0?this._lineCursorWidth:2),_>2&&(t=s,i=this._getTokenClassName(n))):_=Qte(p,1);let b=g.left,y=0;_>=2&&b>=1&&(y=1,b-=y);const S=e.getVerticalOffsetForLineNumber(n.lineNumber)-e.bigNumbersDelta;return new woe(S,b,y,_,this._lineHeight,t,i)}const r=e.linesVisibleRangesForRange(new M(n.lineNumber,n.column,n.lineNumber,n.column+s.length),!1);if(!r||r.length===0)return null;const a=r[0];if(a.outsideRenderedLine||a.ranges.length===0)return null;const l=a.ranges[0],c=s==="	"?this._typicalHalfwidthCharacterWidth:l.width<1?this._typicalHalfwidthCharacterWidth:l.width;this._cursorStyle===_o.Block&&(t=s,i=this._getTokenClassName(n));let u=e.getVerticalOffsetForLineNumber(n.lineNumber)-e.bigNumbersDelta,f=this._lineHeight;return(this._cursorStyle===_o.Underline||this._cursorStyle===_o.UnderlineThin)&&(u+=this._lineHeight-2,f=2),new woe(u,l.left,0,c,f,t,i)}_getTokenClassName(e){const t=this._context.viewModel.getViewLineData(e.lineNumber),i=t.tokens.findTokenIndexAtOffset(e.column-1);return t.tokens.getClassName(i)}prepareRender(e){this._renderData=this._prepareRender(e)}render(e){return this._renderData?(this._lastRenderedContent!==this._renderData.textContent&&(this._lastRenderedContent=this._renderData.textContent,this._domNode.domNode.textContent=this._lastRenderedContent),this._domNode.setClassName(`cursor ${this._pluralityClass} ${N1} ${this._renderData.textContentClassName}`),this._domNode.setDisplay("block"),this._domNode.setTop(this._renderData.top),this._domNode.setLeft(this._renderData.left),this._domNode.setPaddingLeft(this._renderData.paddingLeft),this._domNode.setWidth(this._renderData.width),this._domNode.setLineHeight(this._renderData.height),this._domNode.setHeight(this._renderData.height),{domNode:this._domNode.domNode,position:this._position,contentLeft:this._renderData.left,height:this._renderData.height,width:2}):(this._domNode.setDisplay("none"),null)}}const Qk=class Qk extends hl{constructor(e){super(e);const t=this._context.configuration.options;this._readOnly=t.get(92),this._cursorBlinking=t.get(26),this._cursorStyle=t.get(28),this._cursorSmoothCaretAnimation=t.get(27),this._selectionIsEmpty=!0,this._isComposingInput=!1,this._isVisible=!1,this._primaryCursor=new Soe(this._context,og.Single),this._secondaryCursors=[],this._renderData=[],this._domNode=ki(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._updateDomClassName(),this._domNode.appendChild(this._primaryCursor.getDomNode()),this._startCursorBlinkAnimation=new gd,this._cursorFlatBlinkInterval=new Uq,this._blinkingEnabled=!1,this._editorHasFocus=!1,this._updateBlinking()}dispose(){super.dispose(),this._startCursorBlinkAnimation.dispose(),this._cursorFlatBlinkInterval.dispose()}getDomNode(){return this._domNode}onCompositionStart(e){return this._isComposingInput=!0,this._updateBlinking(),!0}onCompositionEnd(e){return this._isComposingInput=!1,this._updateBlinking(),!0}onConfigurationChanged(e){const t=this._context.configuration.options;this._readOnly=t.get(92),this._cursorBlinking=t.get(26),this._cursorStyle=t.get(28),this._cursorSmoothCaretAnimation=t.get(27),this._updateBlinking(),this._updateDomClassName(),this._primaryCursor.onConfigurationChanged(e);for(let i=0,n=this._secondaryCursors.length;i<n;i++)this._secondaryCursors[i].onConfigurationChanged(e);return!0}_onCursorPositionChanged(e,t,i){const n=this._secondaryCursors.length!==t.length||this._cursorSmoothCaretAnimation==="explicit"&&i!==3;if(this._primaryCursor.setPlurality(t.length?og.MultiPrimary:og.Single),this._primaryCursor.onCursorPositionChanged(e,n),this._updateBlinking(),this._secondaryCursors.length<t.length){const s=t.length-this._secondaryCursors.length;for(let r=0;r<s;r++){const a=new Soe(this._context,og.MultiSecondary);this._domNode.domNode.insertBefore(a.getDomNode().domNode,this._primaryCursor.getDomNode().domNode.nextSibling),this._secondaryCursors.push(a)}}else if(this._secondaryCursors.length>t.length){const s=this._secondaryCursors.length-t.length;for(let r=0;r<s;r++)this._domNode.removeChild(this._secondaryCursors[0].getDomNode()),this._secondaryCursors.splice(0,1)}for(let s=0;s<t.length;s++)this._secondaryCursors[s].onCursorPositionChanged(t[s],n)}onCursorStateChanged(e){const t=[];for(let n=0,s=e.selections.length;n<s;n++)t[n]=e.selections[n].getPosition();this._onCursorPositionChanged(t[0],t.slice(1),e.reason);const i=e.selections[0].isEmpty();return this._selectionIsEmpty!==i&&(this._selectionIsEmpty=i,this._updateDomClassName()),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onFocusChanged(e){return this._editorHasFocus=e.isFocused,this._updateBlinking(),!1}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return!0}onTokensChanged(e){const t=i=>{for(let n=0,s=e.ranges.length;n<s;n++)if(e.ranges[n].fromLineNumber<=i.lineNumber&&i.lineNumber<=e.ranges[n].toLineNumber)return!0;return!1};if(t(this._primaryCursor.getPosition()))return!0;for(const i of this._secondaryCursors)if(t(i.getPosition()))return!0;return!1}onZonesChanged(e){return!0}_getCursorBlinking(){return this._isComposingInput||!this._editorHasFocus?0:this._readOnly?5:this._cursorBlinking}_updateBlinking(){this._startCursorBlinkAnimation.cancel(),this._cursorFlatBlinkInterval.cancel();const e=this._getCursorBlinking(),t=e===0,i=e===5;t?this._hide():this._show(),this._blinkingEnabled=!1,this._updateDomClassName(),!t&&!i&&(e===1?this._cursorFlatBlinkInterval.cancelAndSet(()=>{this._isVisible?this._hide():this._show()},Qk.BLINK_INTERVAL,at(this._domNode.domNode)):this._startCursorBlinkAnimation.setIfNotSet(()=>{this._blinkingEnabled=!0,this._updateDomClassName()},Qk.BLINK_INTERVAL))}_updateDomClassName(){this._domNode.setClassName(this._getClassName())}_getClassName(){let e="cursors-layer";switch(this._selectionIsEmpty||(e+=" has-selection"),this._cursorStyle){case _o.Line:e+=" cursor-line-style";break;case _o.Block:e+=" cursor-block-style";break;case _o.Underline:e+=" cursor-underline-style";break;case _o.LineThin:e+=" cursor-line-thin-style";break;case _o.BlockOutline:e+=" cursor-block-outline-style";break;case _o.UnderlineThin:e+=" cursor-underline-thin-style";break;default:e+=" cursor-line-style"}if(this._blinkingEnabled)switch(this._getCursorBlinking()){case 1:e+=" cursor-blink";break;case 2:e+=" cursor-smooth";break;case 3:e+=" cursor-phase";break;case 4:e+=" cursor-expand";break;case 5:e+=" cursor-solid";break;default:e+=" cursor-solid"}else e+=" cursor-solid";return(this._cursorSmoothCaretAnimation==="on"||this._cursorSmoothCaretAnimation==="explicit")&&(e+=" cursor-smooth-caret-animation"),e}_show(){this._primaryCursor.show();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].show();this._isVisible=!0}_hide(){this._primaryCursor.hide();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].hide();this._isVisible=!1}prepareRender(e){this._primaryCursor.prepareRender(e);for(let t=0,i=this._secondaryCursors.length;t<i;t++)this._secondaryCursors[t].prepareRender(e)}render(e){const t=[];let i=0;const n=this._primaryCursor.render(e);n&&(t[i++]=n);for(let s=0,r=this._secondaryCursors.length;s<r;s++){const a=this._secondaryCursors[s].render(e);a&&(t[i++]=a)}this._renderData=t}getLastRenderData(){return this._renderData}};Qk.BLINK_INTERVAL=500;let Qz=Qk;Nc((o,e)=>{const t=[{class:".cursor",foreground:M4,background:VK},{class:".cursor-primary",foreground:Aue,background:d2e},{class:".cursor-secondary",foreground:Pue,background:u2e}];for(const i of t){const n=o.getColor(i.foreground);if(n){let s=o.getColor(i.background);s||(s=n.opposite()),e.addRule(`.monaco-editor .cursors-layer ${i.class} { background-color: ${n}; border-color: ${n}; color: ${s}; }`),lu(o.type)&&e.addRule(`.monaco-editor .cursors-layer.has-selection ${i.class} { border-left: 1px solid ${s}; border-right: 1px solid ${s}; }`)}}});const X7=()=>{throw new Error("Invalid change accessor")};class WHe extends hl{constructor(e){super(e);const t=this._context.configuration.options,i=t.get(146);this._lineHeight=t.get(67),this._contentWidth=i.contentWidth,this._contentLeft=i.contentLeft,this.domNode=ki(document.createElement("div")),this.domNode.setClassName("view-zones"),this.domNode.setPosition("absolute"),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.marginDomNode=ki(document.createElement("div")),this.marginDomNode.setClassName("margin-view-zones"),this.marginDomNode.setPosition("absolute"),this.marginDomNode.setAttribute("role","presentation"),this.marginDomNode.setAttribute("aria-hidden","true"),this._zones={}}dispose(){super.dispose(),this._zones={}}_recomputeWhitespacesProps(){const e=this._context.viewLayout.getWhitespaces(),t=new Map;for(const n of e)t.set(n.id,n);let i=!1;return this._context.viewModel.changeWhitespace(n=>{const s=Object.keys(this._zones);for(let r=0,a=s.length;r<a;r++){const l=s[r],c=this._zones[l],u=this._computeWhitespaceProps(c.delegate);c.isInHiddenArea=u.isInHiddenArea;const f=t.get(l);f&&(f.afterLineNumber!==u.afterViewLineNumber||f.height!==u.heightInPx)&&(n.changeOneWhitespace(l,u.afterViewLineNumber,u.heightInPx),this._safeCallOnComputedHeight(c.delegate,u.heightInPx),i=!0)}}),i}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(146);return this._lineHeight=t.get(67),this._contentWidth=i.contentWidth,this._contentLeft=i.contentLeft,e.hasChanged(67)&&this._recomputeWhitespacesProps(),!0}onLineMappingChanged(e){return this._recomputeWhitespacesProps()}onLinesDeleted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}onLinesInserted(e){return!0}_getZoneOrdinal(e){return e.ordinal??e.afterColumn??1e4}_computeWhitespaceProps(e){if(e.afterLineNumber===0)return{isInHiddenArea:!1,afterViewLineNumber:0,heightInPx:this._heightInPixels(e),minWidthInPx:this._minWidthInPixels(e)};let t;if(typeof e.afterColumn<"u")t=this._context.viewModel.model.validatePosition({lineNumber:e.afterLineNumber,column:e.afterColumn});else{const r=this._context.viewModel.model.validatePosition({lineNumber:e.afterLineNumber,column:1}).lineNumber;t=new G(r,this._context.viewModel.model.getLineMaxColumn(r))}let i;t.column===this._context.viewModel.model.getLineMaxColumn(t.lineNumber)?i=this._context.viewModel.model.validatePosition({lineNumber:t.lineNumber+1,column:1}):i=this._context.viewModel.model.validatePosition({lineNumber:t.lineNumber,column:t.column+1});const n=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(t,e.afterColumnAffinity,!0),s=e.showInHiddenAreas||this._context.viewModel.coordinatesConverter.modelPositionIsVisible(i);return{isInHiddenArea:!s,afterViewLineNumber:n.lineNumber,heightInPx:s?this._heightInPixels(e):0,minWidthInPx:this._minWidthInPixels(e)}}changeViewZones(e){let t=!1;return this._context.viewModel.changeWhitespace(i=>{const n={addZone:s=>(t=!0,this._addZone(i,s)),removeZone:s=>{s&&(t=this._removeZone(i,s)||t)},layoutZone:s=>{s&&(t=this._layoutZone(i,s)||t)}};HHe(e,n),n.addZone=X7,n.removeZone=X7,n.layoutZone=X7}),t}_addZone(e,t){const i=this._computeWhitespaceProps(t),s={whitespaceId:e.insertWhitespace(i.afterViewLineNumber,this._getZoneOrdinal(t),i.heightInPx,i.minWidthInPx),delegate:t,isInHiddenArea:i.isInHiddenArea,isVisible:!1,domNode:ki(t.domNode),marginDomNode:t.marginDomNode?ki(t.marginDomNode):null};return this._safeCallOnComputedHeight(s.delegate,i.heightInPx),s.domNode.setPosition("absolute"),s.domNode.domNode.style.width="100%",s.domNode.setDisplay("none"),s.domNode.setAttribute("monaco-view-zone",s.whitespaceId),this.domNode.appendChild(s.domNode),s.marginDomNode&&(s.marginDomNode.setPosition("absolute"),s.marginDomNode.domNode.style.width="100%",s.marginDomNode.setDisplay("none"),s.marginDomNode.setAttribute("monaco-view-zone",s.whitespaceId),this.marginDomNode.appendChild(s.marginDomNode)),this._zones[s.whitespaceId]=s,this.setShouldRender(),s.whitespaceId}_removeZone(e,t){if(this._zones.hasOwnProperty(t)){const i=this._zones[t];return delete this._zones[t],e.removeWhitespace(i.whitespaceId),i.domNode.removeAttribute("monaco-visible-view-zone"),i.domNode.removeAttribute("monaco-view-zone"),i.domNode.domNode.remove(),i.marginDomNode&&(i.marginDomNode.removeAttribute("monaco-visible-view-zone"),i.marginDomNode.removeAttribute("monaco-view-zone"),i.marginDomNode.domNode.remove()),this.setShouldRender(),!0}return!1}_layoutZone(e,t){if(this._zones.hasOwnProperty(t)){const i=this._zones[t],n=this._computeWhitespaceProps(i.delegate);return i.isInHiddenArea=n.isInHiddenArea,e.changeOneWhitespace(i.whitespaceId,n.afterViewLineNumber,n.heightInPx),this._safeCallOnComputedHeight(i.delegate,n.heightInPx),this.setShouldRender(),!0}return!1}shouldSuppressMouseDownOnViewZone(e){return this._zones.hasOwnProperty(e)?!!this._zones[e].delegate.suppressMouseDown:!1}_heightInPixels(e){return typeof e.heightInPx=="number"?e.heightInPx:typeof e.heightInLines=="number"?this._lineHeight*e.heightInLines:this._lineHeight}_minWidthInPixels(e){return typeof e.minWidthInPx=="number"?e.minWidthInPx:0}_safeCallOnComputedHeight(e,t){if(typeof e.onComputedHeight=="function")try{e.onComputedHeight(t)}catch(i){wt(i)}}_safeCallOnDomNodeTop(e,t){if(typeof e.onDomNodeTop=="function")try{e.onDomNodeTop(t)}catch(i){wt(i)}}prepareRender(e){}render(e){const t=e.viewportData.whitespaceViewportData,i={};let n=!1;for(const r of t)this._zones[r.id].isInHiddenArea||(i[r.id]=r,n=!0);const s=Object.keys(this._zones);for(let r=0,a=s.length;r<a;r++){const l=s[r],c=this._zones[l];let u=0,f=0,g="none";i.hasOwnProperty(l)?(u=i[l].verticalOffset-e.bigNumbersDelta,f=i[l].height,g="block",c.isVisible||(c.domNode.setAttribute("monaco-visible-view-zone","true"),c.isVisible=!0),this._safeCallOnDomNodeTop(c.delegate,e.getScrolledTopFromAbsoluteTop(i[l].verticalOffset))):(c.isVisible&&(c.domNode.removeAttribute("monaco-visible-view-zone"),c.isVisible=!1),this._safeCallOnDomNodeTop(c.delegate,e.getScrolledTopFromAbsoluteTop(-1e6))),c.domNode.setTop(u),c.domNode.setHeight(f),c.domNode.setDisplay(g),c.marginDomNode&&(c.marginDomNode.setTop(u),c.marginDomNode.setHeight(f),c.marginDomNode.setDisplay(g))}n&&(this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth)),this.marginDomNode.setWidth(this._contentLeft))}}function HHe(o,e){try{return o(e)}catch(t){wt(t)}}class VHe extends VC{constructor(e){super(),this._context=e,this._options=new Loe(this._context.configuration),this._selection=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=new Loe(this._context.configuration);return this._options.equals(t)?e.hasChanged(146):(this._options=t,!0)}onCursorStateChanged(e){return this._selection=e.selections,this._options.renderWhitespace==="selection"}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}prepareRender(e){if(this._options.renderWhitespace==="none"){this._renderResult=null;return}const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber-t+1,s=new Array(n);for(let a=0;a<n;a++)s[a]=!0;const r=this._context.viewModel.getMinimapLinesRenderingData(e.viewportData.startLineNumber,e.viewportData.endLineNumber,s);this._renderResult=[];for(let a=e.viewportData.startLineNumber;a<=e.viewportData.endLineNumber;a++){const l=a-e.viewportData.startLineNumber,c=r.data[l];let u=null;if(this._options.renderWhitespace==="selection"){const f=this._selection;for(const g of f){if(g.endLineNumber<a||g.startLineNumber>a)continue;const p=g.startLineNumber===a?g.startColumn:c.minColumn,_=g.endLineNumber===a?g.endColumn:c.maxColumn;p<_&&(u||(u=[]),u.push(new ife(p-1,_-1)))}}this._renderResult[l]=this._applyRenderWhitespace(e,a,u,c)}}_applyRenderWhitespace(e,t,i,n){if(this._options.renderWhitespace==="selection"&&!i||this._options.renderWhitespace==="trailing"&&n.continuesWithWrappedLine)return"";const s=this._context.theme.getColor(zK),r=this._options.renderWithSVG,a=n.content,l=this._options.stopRenderingLineAfter===-1?a.length:Math.min(this._options.stopRenderingLineAfter,a.length),c=n.continuesWithWrappedLine,u=n.minColumn-1,f=this._options.renderWhitespace==="boundary",g=this._options.renderWhitespace==="trailing",p=this._options.lineHeight,_=this._options.middotWidth,b=this._options.wsmiddotWidth,y=this._options.spaceWidth,S=Math.abs(b-y),L=Math.abs(_-y),x=S<L?11825:183,k=this._options.canUseHalfwidthRightwardsArrow;let E="",N=!1,A=Sr(a),P;A===-1?(N=!0,A=l,P=l):P=au(a);let H=0,ee=i&&i[H],Q=0;for(let te=u;te<l;te++){const J=a.charCodeAt(te);if(ee&&te>=ee.endOffset&&(H++,ee=i&&i[H]),J!==9&&J!==32||g&&!N&&te<=P)continue;if(f&&te>=A&&te<=P&&J===32){const he=te-1>=0?a.charCodeAt(te-1):0,Ce=te+1<l?a.charCodeAt(te+1):0;if(he!==32&&Ce!==32)continue}if(f&&c&&te===l-1){const he=te-1>=0?a.charCodeAt(te-1):0;if(J===32&&he!==32&&he!==9)continue}if(i&&(!ee||ee.startOffset>te||ee.endOffset<=te))continue;const Z=e.visibleRangeForPosition(new G(t,te+1));Z&&(r?(Q=Math.max(Q,Z.left),J===9?E+=this._renderArrow(p,y,Z.left):E+=`<circle cx="${(Z.left+y/2).toFixed(2)}" cy="${(p/2).toFixed(2)}" r="${(y/7).toFixed(2)}" />`):J===9?E+=`<div class="mwh" style="left:${Z.left}px;height:${p}px;">${k?"":""}</div>`:E+=`<div class="mwh" style="left:${Z.left}px;height:${p}px;">${String.fromCharCode(x)}</div>`)}return r?(Q=Math.round(Q+y),`<svg style="bottom:0;position:absolute;width:${Q}px;height:${p}px" viewBox="0 0 ${Q} ${p}" xmlns="http://www.w3.org/2000/svg" fill="${s}">`+E+"</svg>"):E}_renderArrow(e,t,i){const n=t/7,s=t,r=e/2,a=i,l={x:0,y:n/2},c={x:100/125*s,y:l.y},u={x:c.x-.2*c.x,y:c.y+.2*c.x},f={x:u.x+.1*c.x,y:u.y+.1*c.x},g={x:f.x+.35*c.x,y:f.y-.35*c.x},p={x:g.x,y:-g.y},_={x:f.x,y:-f.y},b={x:u.x,y:-u.y},y={x:c.x,y:-c.y},S={x:l.x,y:-l.y};return`<path d="M ${[l,c,u,f,g,p,_,b,y,S].map(k=>`${(a+k.x).toFixed(2)} ${(r+k.y).toFixed(2)}`).join(" L ")}" />`}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}class Loe{constructor(e){const t=e.options,i=t.get(50),n=t.get(38);n==="off"?(this.renderWhitespace="none",this.renderWithSVG=!1):n==="svg"?(this.renderWhitespace=t.get(100),this.renderWithSVG=!0):(this.renderWhitespace=t.get(100),this.renderWithSVG=!1),this.spaceWidth=i.spaceWidth,this.middotWidth=i.middotWidth,this.wsmiddotWidth=i.wsmiddotWidth,this.canUseHalfwidthRightwardsArrow=i.canUseHalfwidthRightwardsArrow,this.lineHeight=t.get(67),this.stopRenderingLineAfter=t.get(118)}equals(e){return this.renderWhitespace===e.renderWhitespace&&this.renderWithSVG===e.renderWithSVG&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter}}class zHe{constructor(e,t,i,n){this.selections=e,this.startLineNumber=t.startLineNumber|0,this.endLineNumber=t.endLineNumber|0,this.relativeVerticalOffset=t.relativeVerticalOffset,this.bigNumbersDelta=t.bigNumbersDelta|0,this.lineHeight=t.lineHeight|0,this.whitespaceViewportData=i,this._model=n,this.visibleRange=new M(t.startLineNumber,this._model.getLineMinColumn(t.startLineNumber),t.endLineNumber,this._model.getLineMaxColumn(t.endLineNumber))}getViewLineRenderingData(e){return this._model.getViewportViewLineRenderingData(this.visibleRange,e)}getDecorationsInViewport(){return this._model.getDecorationsInViewport(this.visibleRange)}}class UHe{get type(){return this._theme.type}get value(){return this._theme}constructor(e){this._theme=e}update(e){this._theme=e}getColor(e){return this._theme.getColor(e)}}class $He{constructor(e,t,i){this.configuration=e,this.theme=new UHe(t),this.viewModel=i,this.viewLayout=i.viewLayout}addEventHandler(e){this.viewModel.addViewEventHandler(e)}removeEventHandler(e){this.viewModel.removeViewEventHandler(e)}}var jHe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},qHe=function(o,e){return function(t,i){e(t,i,o)}};let Jz=class extends bI{constructor(e,t,i,n,s,r,a){super(),this._instantiationService=a,this._shouldRecomputeGlyphMarginLanes=!1,this._selections=[new Ke(1,1,1,1)],this._renderAnimationFrame=null;const l=new eHe(t,n,s,e);this._context=new $He(t,i,n),this._context.addEventHandler(this),this._viewParts=[],this._textAreaHandler=this._instantiationService.createInstance(jz,this._context,l,this._createTextAreaHandlerHelper()),this._viewParts.push(this._textAreaHandler),this._linesContent=ki(document.createElement("div")),this._linesContent.setClassName("lines-content monaco-editor-background"),this._linesContent.setPosition("absolute"),this.domNode=ki(document.createElement("div")),this.domNode.setClassName(this._getEditorClassName()),this.domNode.setAttribute("role","code"),this._overflowGuardContainer=ki(document.createElement("div")),bu.write(this._overflowGuardContainer,3),this._overflowGuardContainer.setClassName("overflow-guard"),this._scrollbar=new dHe(this._context,this._linesContent,this.domNode,this._overflowGuardContainer),this._viewParts.push(this._scrollbar),this._viewLines=new Zz(this._context,this._linesContent),this._viewZones=new WHe(this._context),this._viewParts.push(this._viewZones);const c=new THe(this._context);this._viewParts.push(c);const u=new AHe(this._context);this._viewParts.push(u);const f=new iHe(this._context);this._viewParts.push(f),f.addDynamicOverlay(new aHe(this._context)),f.addDynamicOverlay(new Xz(this._context)),f.addDynamicOverlay(new _He(this._context)),f.addDynamicOverlay(new cHe(this._context)),f.addDynamicOverlay(new VHe(this._context));const g=new nHe(this._context);this._viewParts.push(g),g.addDynamicOverlay(new lHe(this._context)),g.addDynamicOverlay(new wHe(this._context)),g.addDynamicOverlay(new yHe(this._context)),g.addDynamicOverlay(new PP(this._context)),this._glyphMarginWidgets=new fHe(this._context),this._viewParts.push(this._glyphMarginWidgets);const p=new OP(this._context);p.getDomNode().appendChild(this._viewZones.marginDomNode),p.getDomNode().appendChild(g.getDomNode()),p.getDomNode().appendChild(this._glyphMarginWidgets.domNode),this._viewParts.push(p),this._contentWidgets=new oHe(this._context,this.domNode),this._viewParts.push(this._contentWidgets),this._viewCursors=new Qz(this._context),this._viewParts.push(this._viewCursors),this._overlayWidgets=new EHe(this._context,this.domNode),this._viewParts.push(this._overlayWidgets);const _=new MHe(this._context);this._viewParts.push(_);const b=new sHe(this._context);this._viewParts.push(b);const y=new DHe(this._context);if(this._viewParts.push(y),c){const S=this._scrollbar.getOverviewRulerLayoutInfo();S.parent.insertBefore(c.getDomNode(),S.insertBefore)}this._linesContent.appendChild(f.getDomNode()),this._linesContent.appendChild(_.domNode),this._linesContent.appendChild(this._viewZones.domNode),this._linesContent.appendChild(this._viewLines.getDomNode()),this._linesContent.appendChild(this._contentWidgets.domNode),this._linesContent.appendChild(this._viewCursors.getDomNode()),this._overflowGuardContainer.appendChild(p.getDomNode()),this._overflowGuardContainer.appendChild(this._scrollbar.getDomNode()),this._overflowGuardContainer.appendChild(u.getDomNode()),this._overflowGuardContainer.appendChild(this._textAreaHandler.textArea),this._overflowGuardContainer.appendChild(this._textAreaHandler.textAreaCover),this._overflowGuardContainer.appendChild(this._overlayWidgets.getDomNode()),this._overflowGuardContainer.appendChild(y.getDomNode()),this._overflowGuardContainer.appendChild(b.domNode),this.domNode.appendChild(this._overflowGuardContainer),r?(r.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode.domNode),r.appendChild(this._overlayWidgets.overflowingOverlayWidgetsDomNode.domNode)):(this.domNode.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode),this.domNode.appendChild(this._overlayWidgets.overflowingOverlayWidgetsDomNode)),this._applyLayout(),this._pointerHandler=this._register(new wWe(this._context,l,this._createPointerHandlerHelper()))}_computeGlyphMarginLanes(){const e=this._context.viewModel.model,t=this._context.viewModel.glyphLanes;let i=[],n=0;i=i.concat(e.getAllMarginDecorations().map(s=>{var a,l;const r=((a=s.options.glyphMargin)==null?void 0:a.position)??cd.Center;return n=Math.max(n,s.range.endLineNumber),{range:s.range,lane:r,persist:(l=s.options.glyphMargin)==null?void 0:l.persistLane}})),i=i.concat(this._glyphMarginWidgets.getWidgets().map(s=>{const r=e.validateRange(s.preference.range);return n=Math.max(n,r.endLineNumber),{range:r,lane:s.preference.lane}})),i.sort((s,r)=>M.compareRangesUsingStarts(s.range,r.range)),t.reset(n);for(const s of i)t.push(s.lane,s.range,s.persist);return t}_createPointerHandlerHelper(){return{viewDomNode:this.domNode.domNode,linesContentDomNode:this._linesContent.domNode,viewLinesDomNode:this._viewLines.getDomNode().domNode,focusTextArea:()=>{this.focus()},dispatchTextAreaEvent:e=>{this._textAreaHandler.textArea.domNode.dispatchEvent(e)},getLastRenderData:()=>{const e=this._viewCursors.getLastRenderData()||[],t=this._textAreaHandler.getLastRenderData();return new dWe(e,t)},renderNow:()=>{this.render(!0,!1)},shouldSuppressMouseDownOnViewZone:e=>this._viewZones.shouldSuppressMouseDownOnViewZone(e),shouldSuppressMouseDownOnWidget:e=>this._contentWidgets.shouldSuppressMouseDownOnWidget(e),getPositionFromDOMInfo:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getPositionFromDOMInfo(e,t)),visibleRangeForPosition:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(new G(e,t))),getLineWidth:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getLineWidth(e))}}_createTextAreaHandlerHelper(){return{visibleRangeForPosition:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(e))}}_applyLayout(){const t=this._context.configuration.options.get(146);this.domNode.setWidth(t.width),this.domNode.setHeight(t.height),this._overflowGuardContainer.setWidth(t.width),this._overflowGuardContainer.setHeight(t.height),this._linesContent.setWidth(16777216),this._linesContent.setHeight(16777216)}_getEditorClassName(){const e=this._textAreaHandler.isFocused()?" focused":"";return this._context.configuration.options.get(143)+" "+NV(this._context.theme.type)+e}handleEvents(e){super.handleEvents(e),this._scheduleRender()}onConfigurationChanged(e){return this.domNode.setClassName(this._getEditorClassName()),this._applyLayout(),!1}onCursorStateChanged(e){return this._selections=e.selections,!1}onDecorationsChanged(e){return e.affectsGlyphMargin&&(this._shouldRecomputeGlyphMarginLanes=!0),!1}onFocusChanged(e){return this.domNode.setClassName(this._getEditorClassName()),!1}onThemeChanged(e){return this._context.theme.update(e.theme),this.domNode.setClassName(this._getEditorClassName()),!1}dispose(){this._renderAnimationFrame!==null&&(this._renderAnimationFrame.dispose(),this._renderAnimationFrame=null),this._contentWidgets.overflowingContentWidgetsDomNode.domNode.remove(),this._context.removeEventHandler(this),this._viewLines.dispose();for(const e of this._viewParts)e.dispose();super.dispose()}_scheduleRender(){var e;if(this._store.isDisposed)throw new wi;if(this._renderAnimationFrame===null){const t=this._createCoordinatedRendering();this._renderAnimationFrame=eU.INSTANCE.scheduleCoordinatedRendering({window:at((e=this.domNode)==null?void 0:e.domNode),prepareRenderText:()=>{if(this._store.isDisposed)throw new wi;try{return t.prepareRenderText()}finally{this._renderAnimationFrame=null}},renderText:()=>{if(this._store.isDisposed)throw new wi;return t.renderText()},prepareRender:(i,n)=>{if(this._store.isDisposed)throw new wi;return t.prepareRender(i,n)},render:(i,n)=>{if(this._store.isDisposed)throw new wi;return t.render(i,n)}})}}_flushAccumulatedAndRenderNow(){const e=this._createCoordinatedRendering();im(()=>e.prepareRenderText());const t=im(()=>e.renderText());if(t){const[i,n]=t;im(()=>e.prepareRender(i,n)),im(()=>e.render(i,n))}}_getViewPartsToRender(){const e=[];let t=0;for(const i of this._viewParts)i.shouldRender()&&(e[t++]=i);return e}_createCoordinatedRendering(){return{prepareRenderText:()=>{if(this._shouldRecomputeGlyphMarginLanes){this._shouldRecomputeGlyphMarginLanes=!1;const e=this._computeGlyphMarginLanes();this._context.configuration.setGlyphMarginDecorationLaneCount(e.requiredLanes)}tm.onRenderStart()},renderText:()=>{if(!this.domNode.domNode.isConnected)return null;let e=this._getViewPartsToRender();if(!this._viewLines.shouldRender()&&e.length===0)return null;const t=this._context.viewLayout.getLinesViewportData();this._context.viewModel.setViewport(t.startLineNumber,t.endLineNumber,t.centeredLineNumber);const i=new zHe(this._selections,t,this._context.viewLayout.getWhitespaceViewportData(),this._context.viewModel);return this._contentWidgets.shouldRender()&&this._contentWidgets.onBeforeRender(i),this._viewLines.shouldRender()&&(this._viewLines.renderText(i),this._viewLines.onDidRender(),e=this._getViewPartsToRender()),[e,new nWe(this._context.viewLayout,i,this._viewLines)]},prepareRender:(e,t)=>{for(const i of e)i.prepareRender(t)},render:(e,t)=>{for(const i of e)i.render(t),i.onDidRender()}}}delegateVerticalScrollbarPointerDown(e){this._scrollbar.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){this._scrollbar.delegateScrollFromMouseWheelEvent(e)}restoreState(e){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft},1),this._context.viewModel.visibleLinesStabilized()}getOffsetForColumn(e,t){const i=this._context.viewModel.model.validatePosition({lineNumber:e,column:t}),n=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(i);this._flushAccumulatedAndRenderNow();const s=this._viewLines.visibleRangeForPosition(new G(n.lineNumber,n.column));return s?s.left:-1}getTargetAtClientPoint(e,t){const i=this._pointerHandler.getTargetAtClientPoint(e,t);return i?Y4.convertViewToModelMouseTarget(i,this._context.viewModel.coordinatesConverter):null}createOverviewRuler(e){return new RHe(this._context,e)}change(e){this._viewZones.changeViewZones(e),this._scheduleRender()}render(e,t){if(t){this._viewLines.forceShouldRender();for(const i of this._viewParts)i.forceShouldRender()}e?this._flushAccumulatedAndRenderNow():this._scheduleRender()}writeScreenReaderContent(e){this._textAreaHandler.writeScreenReaderContent(e)}focus(){this._textAreaHandler.focusTextArea()}isFocused(){return this._textAreaHandler.isFocused()}setAriaOptions(e){this._textAreaHandler.setAriaOptions(e)}addContentWidget(e){this._contentWidgets.addWidget(e.widget),this.layoutContentWidget(e),this._scheduleRender()}layoutContentWidget(e){var t,i,n,s;this._contentWidgets.setWidgetPosition(e.widget,((t=e.position)==null?void 0:t.position)??null,((i=e.position)==null?void 0:i.secondaryPosition)??null,((n=e.position)==null?void 0:n.preference)??null,((s=e.position)==null?void 0:s.positionAffinity)??null),this._scheduleRender()}removeContentWidget(e){this._contentWidgets.removeWidget(e.widget),this._scheduleRender()}addOverlayWidget(e){this._overlayWidgets.addWidget(e.widget),this.layoutOverlayWidget(e),this._scheduleRender()}layoutOverlayWidget(e){this._overlayWidgets.setWidgetPosition(e.widget,e.position)&&this._scheduleRender()}removeOverlayWidget(e){this._overlayWidgets.removeWidget(e.widget),this._scheduleRender()}addGlyphMarginWidget(e){this._glyphMarginWidgets.addWidget(e.widget),this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender()}layoutGlyphMarginWidget(e){const t=e.position;this._glyphMarginWidgets.setWidgetPosition(e.widget,t)&&(this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender())}removeGlyphMarginWidget(e){this._glyphMarginWidgets.removeWidget(e.widget),this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender()}};Jz=jHe([qHe(6,nt)],Jz);function im(o){try{return o()}catch(e){return wt(e),null}}const U2=class U2{constructor(){this._coordinatedRenderings=[],this._animationFrameRunners=new Map}scheduleCoordinatedRendering(e){return this._coordinatedRenderings.push(e),this._scheduleRender(e.window),{dispose:()=>{const t=this._coordinatedRenderings.indexOf(e);if(t!==-1&&(this._coordinatedRenderings.splice(t,1),this._coordinatedRenderings.length===0)){for(const[i,n]of this._animationFrameRunners)n.dispose();this._animationFrameRunners.clear()}}}}_scheduleRender(e){if(!this._animationFrameRunners.has(e)){const t=()=>{this._animationFrameRunners.delete(e),this._onRenderScheduled()};this._animationFrameRunners.set(e,bA(e,t,100))}}_onRenderScheduled(){const e=this._coordinatedRenderings.slice(0);this._coordinatedRenderings=[];for(const i of e)im(()=>i.prepareRenderText());const t=[];for(let i=0,n=e.length;i<n;i++){const s=e[i];t[i]=im(()=>s.renderText())}for(let i=0,n=e.length;i<n;i++){const s=e[i],r=t[i];if(!r)continue;const[a,l]=r;im(()=>s.prepareRender(a,l))}for(let i=0,n=e.length;i<n;i++){const s=e[i],r=t[i];if(!r)continue;const[a,l]=r;im(()=>s.render(a,l))}}};U2.INSTANCE=new U2;let eU=U2;class xk{constructor(e,t,i,n,s){this.injectionOffsets=e,this.injectionOptions=t,this.breakOffsets=i,this.breakOffsetsVisibleColumn=n,this.wrappedTextIndentLength=s}getOutputLineCount(){return this.breakOffsets.length}getMinOutputOffset(e){return e>0?this.wrappedTextIndentLength:0}getLineLength(e){const t=e>0?this.breakOffsets[e-1]:0;let n=this.breakOffsets[e]-t;return e>0&&(n+=this.wrappedTextIndentLength),n}getMaxOutputOffset(e){return this.getLineLength(e)}translateToInputOffset(e,t){e>0&&(t=Math.max(0,t-this.wrappedTextIndentLength));let n=e===0?t:this.breakOffsets[e-1]+t;if(this.injectionOffsets!==null)for(let s=0;s<this.injectionOffsets.length&&n>this.injectionOffsets[s];s++)n<this.injectionOffsets[s]+this.injectionOptions[s].content.length?n=this.injectionOffsets[s]:n-=this.injectionOptions[s].content.length;return n}translateToOutputPosition(e,t=2){let i=e;if(this.injectionOffsets!==null)for(let n=0;n<this.injectionOffsets.length&&!(e<this.injectionOffsets[n]||t!==1&&e===this.injectionOffsets[n]);n++)i+=this.injectionOptions[n].content.length;return this.offsetInInputWithInjectionsToOutputPosition(i,t)}offsetInInputWithInjectionsToOutputPosition(e,t=2){let i=0,n=this.breakOffsets.length-1,s=0,r=0;for(;i<=n;){s=i+(n-i)/2|0;const l=this.breakOffsets[s];if(r=s>0?this.breakOffsets[s-1]:0,t===0)if(e<=r)n=s-1;else if(e>l)i=s+1;else break;else if(e<r)n=s-1;else if(e>=l)i=s+1;else break}let a=e-r;return s>0&&(a+=this.wrappedTextIndentLength),new MR(s,a)}normalizeOutputPosition(e,t,i){if(this.injectionOffsets!==null){const n=this.outputPositionToOffsetInInputWithInjections(e,t),s=this.normalizeOffsetInInputWithInjectionsAroundInjections(n,i);if(s!==n)return this.offsetInInputWithInjectionsToOutputPosition(s,i)}if(i===0){if(e>0&&t===this.getMinOutputOffset(e))return new MR(e-1,this.getMaxOutputOffset(e-1))}else if(i===1){const n=this.getOutputLineCount()-1;if(e<n&&t===this.getMaxOutputOffset(e))return new MR(e+1,this.getMinOutputOffset(e+1))}return new MR(e,t)}outputPositionToOffsetInInputWithInjections(e,t){return e>0&&(t=Math.max(0,t-this.wrappedTextIndentLength)),(e>0?this.breakOffsets[e-1]:0)+t}normalizeOffsetInInputWithInjectionsAroundInjections(e,t){const i=this.getInjectedTextAtOffset(e);if(!i)return e;if(t===2){if(e===i.offsetInInputWithInjections+i.length&&xoe(this.injectionOptions[i.injectedTextIndex].cursorStops))return i.offsetInInputWithInjections+i.length;{let n=i.offsetInInputWithInjections;if(koe(this.injectionOptions[i.injectedTextIndex].cursorStops))return n;let s=i.injectedTextIndex-1;for(;s>=0&&this.injectionOffsets[s]===this.injectionOffsets[i.injectedTextIndex]&&!(xoe(this.injectionOptions[s].cursorStops)||(n-=this.injectionOptions[s].content.length,koe(this.injectionOptions[s].cursorStops)));)s--;return n}}else if(t===1||t===4){let n=i.offsetInInputWithInjections+i.length,s=i.injectedTextIndex;for(;s+1<this.injectionOffsets.length&&this.injectionOffsets[s+1]===this.injectionOffsets[s];)n+=this.injectionOptions[s+1].content.length,s++;return n}else if(t===0||t===3){let n=i.offsetInInputWithInjections,s=i.injectedTextIndex;for(;s-1>=0&&this.injectionOffsets[s-1]===this.injectionOffsets[s];)n-=this.injectionOptions[s-1].content.length,s--;return n}s4()}getInjectedText(e,t){const i=this.outputPositionToOffsetInInputWithInjections(e,t),n=this.getInjectedTextAtOffset(i);return n?{options:this.injectionOptions[n.injectedTextIndex]}:null}getInjectedTextAtOffset(e){const t=this.injectionOffsets,i=this.injectionOptions;if(t!==null){let n=0;for(let s=0;s<t.length;s++){const r=i[s].content.length,a=t[s]+n,l=t[s]+n+r;if(a>e)break;if(e<=l)return{injectedTextIndex:s,offsetInInputWithInjections:a,length:r};n+=r}}}}function xoe(o){return o==null?!0:o===id.Right||o===id.Both}function koe(o){return o==null?!0:o===id.Left||o===id.Both}class MR{constructor(e,t){this.outputLineIndex=e,this.outputOffset=t}toString(){return`${this.outputLineIndex}:${this.outputOffset}`}toPosition(e){return new G(e+this.outputLineIndex,this.outputOffset+1)}}const Q7=Ag("domLineBreaksComputer",{createHTML:o=>o});class OG{static create(e){return new OG(new WeakRef(e))}constructor(e){this.targetWindow=e}createLineBreaksComputer(e,t,i,n,s){const r=[],a=[];return{addRequest:(l,c,u)=>{r.push(l),a.push(c)},finalize:()=>KHe(Kp(this.targetWindow.deref()),r,e,t,i,n,s,a)}}}function KHe(o,e,t,i,n,s,r,a){function l(H){const ee=a[H];if(ee){const Q=mu.applyInjectedText(e[H],ee),te=ee.map(Z=>Z.options),J=ee.map(Z=>Z.column-1);return new xk(J,te,[Q.length],[],0)}else return null}if(n===-1){const H=[];for(let ee=0,Q=e.length;ee<Q;ee++)H[ee]=l(ee);return H}const c=Math.round(n*t.typicalHalfwidthCharacterWidth),f=Math.round(i*(s===3?2:s===2?1:0)),g=Math.ceil(t.spaceWidth*f),p=document.createElement("div");yo(p,t);const _=new qS(1e4),b=[],y=[],S=[],L=[],x=[];for(let H=0;H<e.length;H++){const ee=mu.applyInjectedText(e[H],a[H]);let Q=0,te=0,J=c;if(s!==0)if(Q=Sr(ee),Q===-1)Q=0;else{for(let we=0;we<Q;we++){const me=ee.charCodeAt(we)===9?i-te%i:1;te+=me}const Ce=Math.ceil(t.spaceWidth*te);Ce+t.typicalFullwidthCharacterWidth>c?(Q=0,te=0):J=c-Ce}const Z=ee.substr(Q),he=GHe(Z,te,i,J,_,g);b[H]=Q,y[H]=te,S[H]=Z,L[H]=he[0],x[H]=he[1]}const k=_.build(),E=(Q7==null?void 0:Q7.createHTML(k))??k;p.innerHTML=E,p.style.position="absolute",p.style.top="10000",r==="keepAll"?(p.style.wordBreak="keep-all",p.style.overflowWrap="anywhere"):(p.style.wordBreak="inherit",p.style.overflowWrap="break-word"),o.document.body.appendChild(p);const N=document.createRange(),A=Array.prototype.slice.call(p.children,0),P=[];for(let H=0;H<e.length;H++){const ee=A[H],Q=YHe(N,ee,S[H],L[H]);if(Q===null){P[H]=l(H);continue}const te=b[H],J=y[H]+f,Z=x[H],he=[];for(let pe=0,Fe=Q.length;pe<Fe;pe++)he[pe]=Z[Q[pe]];if(te!==0)for(let pe=0,Fe=Q.length;pe<Fe;pe++)Q[pe]+=te;let Ce,we;const me=a[H];me?(Ce=me.map(pe=>pe.options),we=me.map(pe=>pe.column-1)):(Ce=null,we=null),P[H]=new xk(we,Ce,Q,he,J)}return p.remove(),P}function GHe(o,e,t,i,n,s){if(s!==0){const g=String(s);n.appendString('<div style="text-indent: -'),n.appendString(g),n.appendString("px; padding-left: "),n.appendString(g),n.appendString("px; box-sizing: border-box; width:")}else n.appendString('<div style="width:');n.appendString(String(i)),n.appendString('px;">');const r=o.length;let a=e,l=0;const c=[],u=[];let f=0<r?o.charCodeAt(0):0;n.appendString("<span>");for(let g=0;g<r;g++){g!==0&&g%16384===0&&n.appendString("</span><span>"),c[g]=l,u[g]=a;const p=f;f=g+1<r?o.charCodeAt(g+1):0;let _=1,b=1;switch(p){case 9:_=t-a%t,b=_;for(let y=1;y<=_;y++)y<_?n.appendCharCode(160):n.appendASCIICharCode(32);break;case 32:f===32?n.appendCharCode(160):n.appendASCIICharCode(32);break;case 60:n.appendString("&lt;");break;case 62:n.appendString("&gt;");break;case 38:n.appendString("&amp;");break;case 0:n.appendString("&#00;");break;case 65279:case 8232:case 8233:case 133:n.appendCharCode(65533);break;default:Fm(p)&&b++,p<32?n.appendCharCode(9216+p):n.appendCharCode(p)}l+=_,a+=b}return n.appendString("</span>"),c[o.length]=l,u[o.length]=a,n.appendString("</div>"),[c,u]}function YHe(o,e,t,i){if(t.length<=1)return null;const n=Array.prototype.slice.call(e.children,0),s=[];try{tU(o,n,i,0,null,t.length-1,null,s)}catch(r){return console.log(r),null}return s.length===0?null:(s.push(t.length),s)}function tU(o,e,t,i,n,s,r,a){if(i===s||(n=n||J7(o,e,t[i],t[i+1]),r=r||J7(o,e,t[s],t[s+1]),Math.abs(n[0].top-r[0].top)<=.1))return;if(i+1===s){a.push(s);return}const l=i+(s-i)/2|0,c=J7(o,e,t[l],t[l+1]);tU(o,e,t,i,n,l,c,a),tU(o,e,t,l,c,s,r,a)}function J7(o,e,t,i){return o.setStart(e[t/16384|0].firstChild,t%16384),o.setEnd(e[i/16384|0].firstChild,i%16384),o.getClientRects()}class ZHe extends X{constructor(){super(),this._editor=null,this._instantiationService=null,this._instances=this._register(new Dq),this._pending=new Map,this._finishedInstantiation=[],this._finishedInstantiation[0]=!1,this._finishedInstantiation[1]=!1,this._finishedInstantiation[2]=!1,this._finishedInstantiation[3]=!1}initialize(e,t,i){this._editor=e,this._instantiationService=i;for(const n of t){if(this._pending.has(n.id)){wt(new Error(`Cannot have two contributions with the same id ${n.id}`));continue}this._pending.set(n.id,n)}this._instantiateSome(0),this._register(Rx(at(this._editor.getDomNode()),()=>{this._instantiateSome(1)})),this._register(Rx(at(this._editor.getDomNode()),()=>{this._instantiateSome(2)})),this._register(Rx(at(this._editor.getDomNode()),()=>{this._instantiateSome(3)},5e3))}saveViewState(){const e={};for(const[t,i]of this._instances)typeof i.saveViewState=="function"&&(e[t]=i.saveViewState());return e}restoreViewState(e){for(const[t,i]of this._instances)typeof i.restoreViewState=="function"&&i.restoreViewState(e[t])}get(e){return this._instantiateById(e),this._instances.get(e)||null}onBeforeInteractionEvent(){this._instantiateSome(2)}onAfterModelAttached(){var e;return Rx(at((e=this._editor)==null?void 0:e.getDomNode()),()=>{this._instantiateSome(1)},50)}_instantiateSome(e){if(this._finishedInstantiation[e])return;this._finishedInstantiation[e]=!0;const t=this._findPendingContributionsByInstantiation(e);for(const i of t)this._instantiateById(i.id)}_findPendingContributionsByInstantiation(e){const t=[];for(const[,i]of this._pending)i.instantiation===e&&t.push(i);return t}_instantiateById(e){const t=this._pending.get(e);if(t){if(this._pending.delete(e),!this._instantiationService||!this._editor)throw new Error("Cannot instantiate contributions before being initialized!");try{const i=this._instantiationService.createInstance(t.ctor,this._editor);this._instances.set(t.id,i),typeof i.restoreViewState=="function"&&t.instantiation!==0&&console.warn(`Editor contribution '${t.id}' should be eager instantiated because it uses saveViewState / restoreViewState.`)}catch(i){wt(i)}}}}class xfe{constructor(e,t,i,n,s,r,a){this.id=e,this.label=t,this.alias=i,this.metadata=n,this._precondition=s,this._run=r,this._contextKeyService=a}isSupported(){return this._contextKeyService.contextMatchesRules(this._precondition)}run(e){return this.isSupported()?this._run(e):Promise.resolve(void 0)}}class FG{static create(e){return new FG(e.get(135),e.get(134))}constructor(e,t){this.classifier=new XHe(e,t)}createLineBreaksComputer(e,t,i,n,s){const r=[],a=[],l=[];return{addRequest:(c,u,f)=>{r.push(c),a.push(u),l.push(f)},finalize:()=>{const c=e.typicalFullwidthCharacterWidth/e.typicalHalfwidthCharacterWidth,u=[];for(let f=0,g=r.length;f<g;f++){const p=a[f],_=l[f];_&&!_.injectionOptions&&!p?u[f]=QHe(this.classifier,_,r[f],t,i,c,n,s):u[f]=JHe(this.classifier,r[f],p,t,i,c,n,s)}return iU.length=0,nU.length=0,u}}}}class XHe extends KS{constructor(e,t){super(0);for(let i=0;i<e.length;i++)this.set(e.charCodeAt(i),1);for(let i=0;i<t.length;i++)this.set(t.charCodeAt(i),2)}get(e){return e>=0&&e<256?this._asciiMap[e]:e>=12352&&e<=12543||e>=13312&&e<=19903||e>=19968&&e<=40959?3:this._map.get(e)||this._defaultValue}}let iU=[],nU=[];function QHe(o,e,t,i,n,s,r,a){if(n===-1)return null;const l=t.length;if(l<=1)return null;const c=a==="keepAll",u=e.breakOffsets,f=e.breakOffsetsVisibleColumn,g=kfe(t,i,n,s,r),p=n-g,_=iU,b=nU;let y=0,S=0,L=0,x=n;const k=u.length;let E=0;if(E>=0){let N=Math.abs(f[E]-x);for(;E+1<k;){const A=Math.abs(f[E+1]-x);if(A>=N)break;N=A,E++}}for(;E<k;){let N=E<0?0:u[E],A=E<0?0:f[E];S>N&&(N=S,A=L);let P=0,H=0,ee=0,Q=0;if(A<=x){let J=A,Z=N===0?0:t.charCodeAt(N-1),he=N===0?0:o.get(Z),Ce=!0;for(let we=N;we<l;we++){const me=we,pe=t.charCodeAt(we);let Fe,Ye;if(qs(pe)?(we++,Fe=0,Ye=2):(Fe=o.get(pe),Ye=kk(pe,J,i,s)),me>S&&sU(Z,he,pe,Fe,c)&&(P=me,H=J),J+=Ye,J>x){me>S?(ee=me,Q=J-Ye):(ee=we+1,Q=J),J-H>p&&(P=0),Ce=!1;break}Z=pe,he=Fe}if(Ce){y>0&&(_[y]=u[u.length-1],b[y]=f[u.length-1],y++);break}}if(P===0){let J=A,Z=t.charCodeAt(N),he=o.get(Z),Ce=!1;for(let we=N-1;we>=S;we--){const me=we+1,pe=t.charCodeAt(we);if(pe===9){Ce=!0;break}let Fe,Ye;if(oC(pe)?(we--,Fe=0,Ye=2):(Fe=o.get(pe),Ye=Fm(pe)?s:1),J<=x){if(ee===0&&(ee=me,Q=J),J<=x-p)break;if(sU(pe,Fe,Z,he,c)){P=me,H=J;break}}J-=Ye,Z=pe,he=Fe}if(P!==0){const we=p-(Q-H);if(we<=i){const me=t.charCodeAt(ee);let pe;qs(me)?pe=2:pe=kk(me,Q,i,s),we-pe<0&&(P=0)}}if(Ce){E--;continue}}if(P===0&&(P=ee,H=Q),P<=S){const J=t.charCodeAt(S);qs(J)?(P=S+2,H=L+2):(P=S+1,H=L+kk(J,L,i,s))}for(S=P,_[y]=P,L=H,b[y]=H,y++,x=H+p;E<0||E<k&&f[E]<H;)E++;let te=Math.abs(f[E]-x);for(;E+1<k;){const J=Math.abs(f[E+1]-x);if(J>=te)break;te=J,E++}}return y===0?null:(_.length=y,b.length=y,iU=e.breakOffsets,nU=e.breakOffsetsVisibleColumn,e.breakOffsets=_,e.breakOffsetsVisibleColumn=b,e.wrappedTextIndentLength=g,e)}function JHe(o,e,t,i,n,s,r,a){const l=mu.applyInjectedText(e,t);let c,u;if(t&&t.length>0?(c=t.map(H=>H.options),u=t.map(H=>H.column-1)):(c=null,u=null),n===-1)return c?new xk(u,c,[l.length],[],0):null;const f=l.length;if(f<=1)return c?new xk(u,c,[l.length],[],0):null;const g=a==="keepAll",p=kfe(l,i,n,s,r),_=n-p,b=[],y=[];let S=0,L=0,x=0,k=n,E=l.charCodeAt(0),N=o.get(E),A=kk(E,0,i,s),P=1;qs(E)&&(A+=1,E=l.charCodeAt(1),N=o.get(E),P++);for(let H=P;H<f;H++){const ee=H,Q=l.charCodeAt(H);let te,J;qs(Q)?(H++,te=0,J=2):(te=o.get(Q),J=kk(Q,A,i,s)),sU(E,N,Q,te,g)&&(L=ee,x=A),A+=J,A>k&&((L===0||A-x>_)&&(L=ee,x=A-J),b[S]=L,y[S]=x,S++,k=x+_,L=0),E=Q,N=te}return S===0&&(!t||t.length===0)?null:(b[S]=f,y[S]=A,new xk(u,c,b,y,p))}function kk(o,e,t,i){return o===9?t-e%t:Fm(o)||o<32?i:1}function Doe(o,e){return e-o%e}function sU(o,e,t,i,n){return t!==32&&(e===2&&i!==2||e!==1&&i===1||!n&&e===3&&i!==2||!n&&i===3&&e!==1)}function kfe(o,e,t,i,n){let s=0;if(n!==0){const r=Sr(o);if(r!==-1){for(let l=0;l<r;l++){const c=o.charCodeAt(l)===9?Doe(s,e):1;s+=c}const a=n===3?2:n===2?1:0;for(let l=0;l<a;l++){const c=Doe(s,e);s+=c}s+i>t&&(s=0)}}return s}class zP{constructor(e){this._selTrackedRange=null,this._trackSelection=!0,this._setState(e,new mo(new M(1,1,1,1),0,0,new G(1,1),0),new mo(new M(1,1,1,1),0,0,new G(1,1),0))}dispose(e){this._removeTrackedRange(e)}startTrackingSelection(e){this._trackSelection=!0,this._updateTrackedRange(e)}stopTrackingSelection(e){this._trackSelection=!1,this._removeTrackedRange(e)}_updateTrackedRange(e){this._trackSelection&&(this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,this.modelState.selection,0))}_removeTrackedRange(e){this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,null,0)}asCursorState(){return new di(this.modelState,this.viewState)}readSelectionFromMarkers(e){const t=e.model._getTrackedRange(this._selTrackedRange);return this.modelState.selection.isEmpty()&&!t.isEmpty()?Ke.fromRange(t.collapseToEnd(),this.modelState.selection.getDirection()):Ke.fromRange(t,this.modelState.selection.getDirection())}ensureValidState(e){this._setState(e,this.modelState,this.viewState)}setState(e,t,i){this._setState(e,t,i)}static _validatePositionWithCache(e,t,i,n){return t.equals(i)?n:e.normalizePosition(t,2)}static _validateViewState(e,t){const i=t.position,n=t.selectionStart.getStartPosition(),s=t.selectionStart.getEndPosition(),r=e.normalizePosition(i,2),a=this._validatePositionWithCache(e,n,i,r),l=this._validatePositionWithCache(e,s,n,a);return i.equals(r)&&n.equals(a)&&s.equals(l)?t:new mo(M.fromPositions(a,l),t.selectionStartKind,t.selectionStartLeftoverVisibleColumns+n.column-a.column,r,t.leftoverVisibleColumns+i.column-r.column)}_setState(e,t,i){if(i&&(i=zP._validateViewState(e.viewModel,i)),t){const n=e.model.validateRange(t.selectionStart),s=t.selectionStart.equalsRange(n)?t.selectionStartLeftoverVisibleColumns:0,r=e.model.validatePosition(t.position),a=t.position.equals(r)?t.leftoverVisibleColumns:0;t=new mo(n,t.selectionStartKind,s,r,a)}else{if(!i)return;const n=e.model.validateRange(e.coordinatesConverter.convertViewRangeToModelRange(i.selectionStart)),s=e.model.validatePosition(e.coordinatesConverter.convertViewPositionToModelPosition(i.position));t=new mo(n,i.selectionStartKind,i.selectionStartLeftoverVisibleColumns,s,i.leftoverVisibleColumns)}if(i){const n=e.coordinatesConverter.validateViewRange(i.selectionStart,t.selectionStart),s=e.coordinatesConverter.validateViewPosition(i.position,t.position);i=new mo(n,t.selectionStartKind,t.selectionStartLeftoverVisibleColumns,s,t.leftoverVisibleColumns)}else{const n=e.coordinatesConverter.convertModelPositionToViewPosition(new G(t.selectionStart.startLineNumber,t.selectionStart.startColumn)),s=e.coordinatesConverter.convertModelPositionToViewPosition(new G(t.selectionStart.endLineNumber,t.selectionStart.endColumn)),r=new M(n.lineNumber,n.column,s.lineNumber,s.column),a=e.coordinatesConverter.convertModelPositionToViewPosition(t.position);i=new mo(r,t.selectionStartKind,t.selectionStartLeftoverVisibleColumns,a,t.leftoverVisibleColumns)}this.modelState=t,this.viewState=i,this._updateTrackedRange(e)}}class Eoe{constructor(e){this.context=e,this.cursors=[new zP(e)],this.lastAddedCursorIndex=0}dispose(){for(const e of this.cursors)e.dispose(this.context)}startTrackingSelections(){for(const e of this.cursors)e.startTrackingSelection(this.context)}stopTrackingSelections(){for(const e of this.cursors)e.stopTrackingSelection(this.context)}updateContext(e){this.context=e}ensureValidState(){for(const e of this.cursors)e.ensureValidState(this.context)}readSelectionFromMarkers(){return this.cursors.map(e=>e.readSelectionFromMarkers(this.context))}getAll(){return this.cursors.map(e=>e.asCursorState())}getViewPositions(){return this.cursors.map(e=>e.viewState.position)}getTopMostViewPosition(){return uTe(this.cursors,Yr(e=>e.viewState.position,G.compare)).viewState.position}getBottomMostViewPosition(){return dTe(this.cursors,Yr(e=>e.viewState.position,G.compare)).viewState.position}getSelections(){return this.cursors.map(e=>e.modelState.selection)}getViewSelections(){return this.cursors.map(e=>e.viewState.selection)}setSelections(e){this.setStates(di.fromModelSelections(e))}getPrimaryCursor(){return this.cursors[0].asCursorState()}setStates(e){e!==null&&(this.cursors[0].setState(this.context,e[0].modelState,e[0].viewState),this._setSecondaryStates(e.slice(1)))}_setSecondaryStates(e){const t=this.cursors.length-1,i=e.length;if(t<i){const n=i-t;for(let s=0;s<n;s++)this._addSecondaryCursor()}else if(t>i){const n=t-i;for(let s=0;s<n;s++)this._removeSecondaryCursor(this.cursors.length-2)}for(let n=0;n<i;n++)this.cursors[n+1].setState(this.context,e[n].modelState,e[n].viewState)}killSecondaryCursors(){this._setSecondaryStates([])}_addSecondaryCursor(){this.cursors.push(new zP(this.context)),this.lastAddedCursorIndex=this.cursors.length-1}getLastAddedCursorIndex(){return this.cursors.length===1||this.lastAddedCursorIndex===0?0:this.lastAddedCursorIndex}_removeSecondaryCursor(e){this.lastAddedCursorIndex>=e+1&&this.lastAddedCursorIndex--,this.cursors[e+1].dispose(this.context),this.cursors.splice(e+1,1)}normalize(){if(this.cursors.length===1)return;const e=this.cursors.slice(0),t=[];for(let i=0,n=e.length;i<n;i++)t.push({index:i,selection:e[i].modelState.selection});t.sort(Yr(i=>i.selection,M.compareRangesUsingStarts));for(let i=0;i<t.length-1;i++){const n=t[i],s=t[i+1],r=n.selection,a=s.selection;if(!this.context.cursorConfig.multiCursorMergeOverlapping)continue;let l;if(a.isEmpty()||r.isEmpty()?l=a.getStartPosition().isBeforeOrEqual(r.getEndPosition()):l=a.getStartPosition().isBefore(r.getEndPosition()),l){const c=n.index<s.index?i:i+1,u=n.index<s.index?i+1:i,f=t[u].index,g=t[c].index,p=t[u].selection,_=t[c].selection;if(!p.equalsSelection(_)){const b=p.plusRange(_),y=p.selectionStartLineNumber===p.startLineNumber&&p.selectionStartColumn===p.startColumn,S=_.selectionStartLineNumber===_.startLineNumber&&_.selectionStartColumn===_.startColumn;let L;f===this.lastAddedCursorIndex?(L=y,this.lastAddedCursorIndex=g):L=S;let x;L?x=new Ke(b.startLineNumber,b.startColumn,b.endLineNumber,b.endColumn):x=new Ke(b.endLineNumber,b.endColumn,b.startLineNumber,b.startColumn),t[c].selection=x;const k=di.fromModelSelection(x);e[g].setState(this.context,k.modelState,k.viewState)}for(const b of t)b.index>f&&b.index--;e.splice(f,1),t.splice(u,1),this._removeSecondaryCursor(f-1),i--}}}}class Ioe{constructor(e,t,i,n){this._cursorContextBrand=void 0,this.model=e,this.viewModel=t,this.coordinatesConverter=i,this.cursorConfig=n}}class e7e{constructor(){this.type=0}}class t7e{constructor(){this.type=1}}class i7e{constructor(e){this.type=2,this._source=e}hasChanged(e){return this._source.hasChanged(e)}}class n7e{constructor(e,t,i){this.selections=e,this.modelSelections=t,this.reason=i,this.type=3}}class Z_{constructor(e){this.type=4,e?(this.affectsMinimap=e.affectsMinimap,this.affectsOverviewRuler=e.affectsOverviewRuler,this.affectsGlyphMargin=e.affectsGlyphMargin,this.affectsLineNumber=e.affectsLineNumber):(this.affectsMinimap=!0,this.affectsOverviewRuler=!0,this.affectsGlyphMargin=!0,this.affectsLineNumber=!0)}}class AR{constructor(){this.type=5}}class s7e{constructor(e){this.type=6,this.isFocused=e}}class o7e{constructor(){this.type=7}}class PR{constructor(){this.type=8}}class Dfe{constructor(e,t){this.fromLineNumber=e,this.count=t,this.type=9}}class oU{constructor(e,t){this.type=10,this.fromLineNumber=e,this.toLineNumber=t}}class rU{constructor(e,t){this.type=11,this.fromLineNumber=e,this.toLineNumber=t}}class Dk{constructor(e,t,i,n,s,r,a){this.source=e,this.minimalReveal=t,this.range=i,this.selections=n,this.verticalType=s,this.revealHorizontal=r,this.scrollType=a,this.type=12}}class r7e{constructor(e){this.type=13,this.scrollWidth=e.scrollWidth,this.scrollLeft=e.scrollLeft,this.scrollHeight=e.scrollHeight,this.scrollTop=e.scrollTop,this.scrollWidthChanged=e.scrollWidthChanged,this.scrollLeftChanged=e.scrollLeftChanged,this.scrollHeightChanged=e.scrollHeightChanged,this.scrollTopChanged=e.scrollTopChanged}}class a7e{constructor(e){this.theme=e,this.type=14}}class l7e{constructor(e){this.type=15,this.ranges=e}}class c7e{constructor(){this.type=16}}let d7e=class{constructor(){this.type=17}};class u7e extends X{constructor(){super(),this._onEvent=this._register(new Y),this.onEvent=this._onEvent.event,this._eventHandlers=[],this._viewEventQueue=null,this._isConsumingViewEventQueue=!1,this._collector=null,this._collectorCnt=0,this._outgoingEvents=[]}emitOutgoingEvent(e){this._addOutgoingEvent(e),this._emitOutgoingEvents()}_addOutgoingEvent(e){for(let t=0,i=this._outgoingEvents.length;t<i;t++){const n=this._outgoingEvents[t].kind===e.kind?this._outgoingEvents[t].attemptToMerge(e):null;if(n){this._outgoingEvents[t]=n;return}}this._outgoingEvents.push(e)}_emitOutgoingEvents(){for(;this._outgoingEvents.length>0;){if(this._collector||this._isConsumingViewEventQueue)return;const e=this._outgoingEvents.shift();e.isNoOp()||this._onEvent.fire(e)}}addViewEventHandler(e){for(let t=0,i=this._eventHandlers.length;t<i;t++)this._eventHandlers[t]===e&&console.warn("Detected duplicate listener in ViewEventDispatcher",e);this._eventHandlers.push(e)}removeViewEventHandler(e){for(let t=0;t<this._eventHandlers.length;t++)if(this._eventHandlers[t]===e){this._eventHandlers.splice(t,1);break}}beginEmitViewEvents(){return this._collectorCnt++,this._collectorCnt===1&&(this._collector=new h7e),this._collector}endEmitViewEvents(){if(this._collectorCnt--,this._collectorCnt===0){const e=this._collector.outgoingEvents,t=this._collector.viewEvents;this._collector=null;for(const i of e)this._addOutgoingEvent(i);t.length>0&&this._emitMany(t)}this._emitOutgoingEvents()}emitSingleViewEvent(e){try{this.beginEmitViewEvents().emitViewEvent(e)}finally{this.endEmitViewEvents()}}_emitMany(e){this._viewEventQueue?this._viewEventQueue=this._viewEventQueue.concat(e):this._viewEventQueue=e,this._isConsumingViewEventQueue||this._consumeViewEventQueue()}_consumeViewEventQueue(){try{this._isConsumingViewEventQueue=!0,this._doConsumeQueue()}finally{this._isConsumingViewEventQueue=!1}}_doConsumeQueue(){for(;this._viewEventQueue;){const e=this._viewEventQueue;this._viewEventQueue=null;const t=this._eventHandlers.slice(0);for(const i of t)i.handleEvents(e)}}}class h7e{constructor(){this.viewEvents=[],this.outgoingEvents=[]}emitViewEvent(e){this.viewEvents.push(e)}emitOutgoingEvent(e){this.outgoingEvents.push(e)}}class BG{constructor(e,t,i,n){this.kind=0,this._oldContentWidth=e,this._oldContentHeight=t,this.contentWidth=i,this.contentHeight=n,this.contentWidthChanged=this._oldContentWidth!==this.contentWidth,this.contentHeightChanged=this._oldContentHeight!==this.contentHeight}isNoOp(){return!this.contentWidthChanged&&!this.contentHeightChanged}attemptToMerge(e){return e.kind!==this.kind?null:new BG(this._oldContentWidth,this._oldContentHeight,e.contentWidth,e.contentHeight)}}class WG{constructor(e,t){this.kind=1,this.oldHasFocus=e,this.hasFocus=t}isNoOp(){return this.oldHasFocus===this.hasFocus}attemptToMerge(e){return e.kind!==this.kind?null:new WG(this.oldHasFocus,e.hasFocus)}}class HG{constructor(e,t,i,n,s,r,a,l){this.kind=2,this._oldScrollWidth=e,this._oldScrollLeft=t,this._oldScrollHeight=i,this._oldScrollTop=n,this.scrollWidth=s,this.scrollLeft=r,this.scrollHeight=a,this.scrollTop=l,this.scrollWidthChanged=this._oldScrollWidth!==this.scrollWidth,this.scrollLeftChanged=this._oldScrollLeft!==this.scrollLeft,this.scrollHeightChanged=this._oldScrollHeight!==this.scrollHeight,this.scrollTopChanged=this._oldScrollTop!==this.scrollTop}isNoOp(){return!this.scrollWidthChanged&&!this.scrollLeftChanged&&!this.scrollHeightChanged&&!this.scrollTopChanged}attemptToMerge(e){return e.kind!==this.kind?null:new HG(this._oldScrollWidth,this._oldScrollLeft,this._oldScrollHeight,this._oldScrollTop,e.scrollWidth,e.scrollLeft,e.scrollHeight,e.scrollTop)}}class f7e{constructor(){this.kind=3}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class g7e{constructor(){this.kind=4}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class UP{constructor(e,t,i,n,s,r,a){this.kind=6,this.oldSelections=e,this.selections=t,this.oldModelVersionId=i,this.modelVersionId=n,this.source=s,this.reason=r,this.reachedMaxCursorCount=a}static _selectionsAreEqual(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;const i=e.length,n=t.length;if(i!==n)return!1;for(let s=0;s<i;s++)if(!e[s].equalsSelection(t[s]))return!1;return!0}isNoOp(){return UP._selectionsAreEqual(this.oldSelections,this.selections)&&this.oldModelVersionId===this.modelVersionId}attemptToMerge(e){return e.kind!==this.kind?null:new UP(this.oldSelections,e.selections,this.oldModelVersionId,e.modelVersionId,e.source,e.reason,this.reachedMaxCursorCount||e.reachedMaxCursorCount)}}class p7e{constructor(){this.kind=5}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class m7e{constructor(e){this.event=e,this.kind=7}isNoOp(){return!1}attemptToMerge(e){return null}}class _7e{constructor(e){this.event=e,this.kind=8}isNoOp(){return!1}attemptToMerge(e){return null}}class v7e{constructor(e){this.event=e,this.kind=9}isNoOp(){return!1}attemptToMerge(e){return null}}class b7e{constructor(e){this.event=e,this.kind=10}isNoOp(){return!1}attemptToMerge(e){return null}}class C7e{constructor(e){this.event=e,this.kind=11}isNoOp(){return!1}attemptToMerge(e){return null}}class y7e{constructor(e){this.event=e,this.kind=12}isNoOp(){return!1}attemptToMerge(e){return null}}class w7e extends X{constructor(e,t,i,n){super(),this._model=e,this._knownModelVersionId=this._model.getVersionId(),this._viewModel=t,this._coordinatesConverter=i,this.context=new Ioe(this._model,this._viewModel,this._coordinatesConverter,n),this._cursors=new Eoe(this.context),this._hasFocus=!1,this._isHandling=!1,this._compositionState=null,this._columnSelectData=null,this._autoClosedActions=[],this._prevEditOperationType=0}dispose(){this._cursors.dispose(),this._autoClosedActions=$i(this._autoClosedActions),super.dispose()}updateConfiguration(e){this.context=new Ioe(this._model,this._viewModel,this._coordinatesConverter,e),this._cursors.updateContext(this.context)}onLineMappingChanged(e){this._knownModelVersionId===this._model.getVersionId()&&this.setStates(e,"viewModel",0,this.getCursorStates())}setHasFocus(e){this._hasFocus=e}_validateAutoClosedActions(){if(this._autoClosedActions.length>0){const e=this._cursors.getSelections();for(let t=0;t<this._autoClosedActions.length;t++){const i=this._autoClosedActions[t];i.isValid(e)||(i.dispose(),this._autoClosedActions.splice(t,1),t--)}}}getPrimaryCursorState(){return this._cursors.getPrimaryCursor()}getLastAddedCursorIndex(){return this._cursors.getLastAddedCursorIndex()}getCursorStates(){return this._cursors.getAll()}setStates(e,t,i,n){let s=!1;const r=this.context.cursorConfig.multiCursorLimit;n!==null&&n.length>r&&(n=n.slice(0,r),s=!0);const a=Ek.from(this._model,this);return this._cursors.setStates(n),this._cursors.normalize(),this._columnSelectData=null,this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,t,i,a,s)}setCursorColumnSelectData(e){this._columnSelectData=e}revealAll(e,t,i,n,s,r){const a=this._cursors.getViewPositions();let l=null,c=null;a.length>1?c=this._cursors.getViewSelections():l=M.fromPositions(a[0],a[0]),e.emitViewEvent(new Dk(t,i,l,c,n,s,r))}revealPrimary(e,t,i,n,s,r){const l=[this._cursors.getPrimaryCursor().viewState.selection];e.emitViewEvent(new Dk(t,i,null,l,n,s,r))}saveState(){const e=[],t=this._cursors.getSelections();for(let i=0,n=t.length;i<n;i++){const s=t[i];e.push({inSelectionMode:!s.isEmpty(),selectionStart:{lineNumber:s.selectionStartLineNumber,column:s.selectionStartColumn},position:{lineNumber:s.positionLineNumber,column:s.positionColumn}})}return e}restoreState(e,t){const i=[];for(let n=0,s=t.length;n<s;n++){const r=t[n];let a=1,l=1;r.position&&r.position.lineNumber&&(a=r.position.lineNumber),r.position&&r.position.column&&(l=r.position.column);let c=a,u=l;r.selectionStart&&r.selectionStart.lineNumber&&(c=r.selectionStart.lineNumber),r.selectionStart&&r.selectionStart.column&&(u=r.selectionStart.column),i.push({selectionStartLineNumber:c,selectionStartColumn:u,positionLineNumber:a,positionColumn:l})}this.setStates(e,"restoreState",0,di.fromModelSelections(i)),this.revealAll(e,"restoreState",!1,0,!0,1)}onModelContentChanged(e,t){if(t instanceof che){if(this._isHandling)return;this._isHandling=!0;try{this.setStates(e,"modelChange",0,this.getCursorStates())}finally{this._isHandling=!1}}else{const i=t.rawContentChangedEvent;if(this._knownModelVersionId=i.versionId,this._isHandling)return;const n=i.containsEvent(1);if(this._prevEditOperationType=0,n)this._cursors.dispose(),this._cursors=new Eoe(this.context),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,"model",1,null,!1);else if(this._hasFocus&&i.resultingSelection&&i.resultingSelection.length>0){const s=di.fromModelSelections(i.resultingSelection);this.setStates(e,"modelChange",i.isUndoing?5:i.isRedoing?6:2,s)&&this.revealAll(e,"modelChange",!1,0,!0,0)}else{const s=this._cursors.readSelectionFromMarkers();this.setStates(e,"modelChange",2,di.fromModelSelections(s))}}}getSelection(){return this._cursors.getPrimaryCursor().modelState.selection}getTopMostViewPosition(){return this._cursors.getTopMostViewPosition()}getBottomMostViewPosition(){return this._cursors.getBottomMostViewPosition()}getCursorColumnSelectData(){if(this._columnSelectData)return this._columnSelectData;const e=this._cursors.getPrimaryCursor(),t=e.viewState.selectionStart.getStartPosition(),i=e.viewState.position;return{isReal:!1,fromViewLineNumber:t.lineNumber,fromViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,t),toViewLineNumber:i.lineNumber,toViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,i)}}getSelections(){return this._cursors.getSelections()}setSelections(e,t,i,n){this.setStates(e,t,n,di.fromModelSelections(i))}getPrevEditOperationType(){return this._prevEditOperationType}setPrevEditOperationType(e){this._prevEditOperationType=e}_pushAutoClosedAction(e,t){const i=[],n=[];for(let a=0,l=e.length;a<l;a++)i.push({range:e[a],options:{description:"auto-closed-character",inlineClassName:"auto-closed-character",stickiness:1}}),n.push({range:t[a],options:{description:"auto-closed-enclosing",stickiness:1}});const s=this._model.deltaDecorations([],i),r=this._model.deltaDecorations([],n);this._autoClosedActions.push(new Toe(this._model,s,r))}_executeEditOperation(e){if(!e)return;e.shouldPushStackElementBefore&&this._model.pushStackElement();const t=S7e.executeCommands(this._model,this._cursors.getSelections(),e.commands);if(t){this._interpretCommandResult(t);const i=[],n=[];for(let s=0;s<e.commands.length;s++){const r=e.commands[s];r instanceof RG&&r.enclosingRange&&r.closeCharacterRange&&(i.push(r.closeCharacterRange),n.push(r.enclosingRange))}i.length>0&&this._pushAutoClosedAction(i,n),this._prevEditOperationType=e.type}e.shouldPushStackElementAfter&&this._model.pushStackElement()}_interpretCommandResult(e){(!e||e.length===0)&&(e=this._cursors.readSelectionFromMarkers()),this._columnSelectData=null,this._cursors.setSelections(e),this._cursors.normalize()}_emitStateChangedIfNecessary(e,t,i,n,s){const r=Ek.from(this._model,this);if(r.equals(n))return!1;const a=this._cursors.getSelections(),l=this._cursors.getViewSelections();if(e.emitViewEvent(new n7e(l,a,i)),!n||n.cursorState.length!==r.cursorState.length||r.cursorState.some((c,u)=>!c.modelState.equals(n.cursorState[u].modelState))){const c=n?n.cursorState.map(f=>f.modelState.selection):null,u=n?n.modelVersionId:0;e.emitOutgoingEvent(new UP(c,a,u,r.modelVersionId,t||"keyboard",i,s))}return!0}_findAutoClosingPairs(e){if(!e.length)return null;const t=[];for(let i=0,n=e.length;i<n;i++){const s=e[i];if(!s.text||s.text.indexOf(`
`)>=0)return null;const r=s.text.match(/([)\]}>'"`])([^)\]}>'"`]*)$/);if(!r)return null;const a=r[1],l=this.context.cursorConfig.autoClosingPairs.autoClosingPairsCloseSingleChar.get(a);if(!l||l.length!==1)return null;const c=l[0].open,u=s.text.length-r[2].length-1,f=s.text.lastIndexOf(c,u-1);if(f===-1)return null;t.push([f,u])}return t}executeEdits(e,t,i,n){let s=null;t==="snippet"&&(s=this._findAutoClosingPairs(i)),s&&(i[0]._isTracked=!0);const r=[],a=[],l=this._model.pushEditOperations(this.getSelections(),i,c=>{if(s)for(let f=0,g=s.length;f<g;f++){const[p,_]=s[f],b=c[f],y=b.range.startLineNumber,S=b.range.startColumn-1+p,L=b.range.startColumn-1+_;r.push(new M(y,L+1,y,L+2)),a.push(new M(y,S+1,y,L+2))}const u=n(c);return u&&(this._isHandling=!0),u});l&&(this._isHandling=!1,this.setSelections(e,t,l,0)),r.length>0&&this._pushAutoClosedAction(r,a)}_executeEdit(e,t,i,n=0){if(this.context.cursorConfig.readOnly)return;const s=Ek.from(this._model,this);this._cursors.stopTrackingSelections(),this._isHandling=!0;try{this._cursors.ensureValidState(),e()}catch(r){wt(r)}this._isHandling=!1,this._cursors.startTrackingSelections(),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(t,i,n,s,!1)&&this.revealAll(t,i,!1,0,!0,0)}getAutoClosedCharacters(){return Toe.getAllAutoClosedCharacters(this._autoClosedActions)}startComposition(e){this._compositionState=new Ik(this._model,this.getSelections())}endComposition(e,t){const i=this._compositionState?this._compositionState.deduceOutcome(this._model,this.getSelections()):null;this._compositionState=null,this._executeEdit(()=>{t==="keyboard"&&this._executeEditOperation(zp.compositionEndWithInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,i,this.getSelections(),this.getAutoClosedCharacters()))},e,t)}type(e,t,i){this._executeEdit(()=>{if(i==="keyboard"){const n=t.length;let s=0;for(;s<n;){const r=Oq(t,s),a=t.substr(s,r);this._executeEditOperation(zp.typeWithInterceptors(!!this._compositionState,this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),this.getAutoClosedCharacters(),a)),s+=r}}else this._executeEditOperation(zp.typeWithoutInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t))},e,i)}compositionType(e,t,i,n,s,r){if(t.length===0&&i===0&&n===0){if(s!==0){const a=this.getSelections().map(l=>{const c=l.getPosition();return new Ke(c.lineNumber,c.column+s,c.lineNumber,c.column+s)});this.setSelections(e,r,a,0)}return}this._executeEdit(()=>{this._executeEditOperation(zp.compositionType(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t,i,n,s))},e,r)}paste(e,t,i,n,s){this._executeEdit(()=>{this._executeEditOperation(zp.paste(this.context.cursorConfig,this._model,this.getSelections(),t,i,n||[]))},e,s,4)}cut(e,t){this._executeEdit(()=>{this._executeEditOperation(vC.cut(this.context.cursorConfig,this._model,this.getSelections()))},e,t)}executeCommand(e,t,i){this._executeEdit(()=>{this._cursors.killSecondaryCursors(),this._executeEditOperation(new Ea(0,[t],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,i)}executeCommands(e,t,i){this._executeEdit(()=>{this._executeEditOperation(new Ea(0,t,{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,i)}}class Ek{static from(e,t){return new Ek(e.getVersionId(),t.getCursorStates())}constructor(e,t){this.modelVersionId=e,this.cursorState=t}equals(e){if(!e||this.modelVersionId!==e.modelVersionId||this.cursorState.length!==e.cursorState.length)return!1;for(let t=0,i=this.cursorState.length;t<i;t++)if(!this.cursorState[t].equals(e.cursorState[t]))return!1;return!0}}class Toe{static getAllAutoClosedCharacters(e){let t=[];for(const i of e)t=t.concat(i.getAutoClosedCharactersRanges());return t}constructor(e,t,i){this._model=e,this._autoClosedCharactersDecorations=t,this._autoClosedEnclosingDecorations=i}dispose(){this._autoClosedCharactersDecorations=this._model.deltaDecorations(this._autoClosedCharactersDecorations,[]),this._autoClosedEnclosingDecorations=this._model.deltaDecorations(this._autoClosedEnclosingDecorations,[])}getAutoClosedCharactersRanges(){const e=[];for(let t=0;t<this._autoClosedCharactersDecorations.length;t++){const i=this._model.getDecorationRange(this._autoClosedCharactersDecorations[t]);i&&e.push(i)}return e}isValid(e){const t=[];for(let i=0;i<this._autoClosedEnclosingDecorations.length;i++){const n=this._model.getDecorationRange(this._autoClosedEnclosingDecorations[i]);if(n&&(t.push(n),n.startLineNumber!==n.endLineNumber))return!1}t.sort(M.compareRangesUsingStarts),e.sort(M.compareRangesUsingStarts);for(let i=0;i<e.length;i++)if(i>=t.length||!t[i].strictContainsRange(e[i]))return!1;return!0}}class S7e{static executeCommands(e,t,i){const n={model:e,selectionsBefore:t,trackedRanges:[],trackedRangesDirection:[]},s=this._innerExecuteCommands(n,i);for(let r=0,a=n.trackedRanges.length;r<a;r++)n.model._setTrackedRange(n.trackedRanges[r],null,0);return s}static _innerExecuteCommands(e,t){if(this._arrayIsEmpty(t))return null;const i=this._getEditOperations(e,t);if(i.operations.length===0)return null;const n=i.operations,s=this._getLoserCursorMap(n);if(s.hasOwnProperty("0"))return console.warn("Ignoring commands"),null;const r=[];for(let c=0,u=n.length;c<u;c++)s.hasOwnProperty(n[c].identifier.major.toString())||r.push(n[c]);i.hadTrackedEditOperation&&r.length>0&&(r[0]._isTracked=!0);let a=e.model.pushEditOperations(e.selectionsBefore,r,c=>{const u=[];for(let p=0;p<e.selectionsBefore.length;p++)u[p]=[];for(const p of c)p.identifier&&u[p.identifier.major].push(p);const f=(p,_)=>p.identifier.minor-_.identifier.minor,g=[];for(let p=0;p<e.selectionsBefore.length;p++)u[p].length>0?(u[p].sort(f),g[p]=t[p].computeCursorState(e.model,{getInverseEditOperations:()=>u[p],getTrackedSelection:_=>{const b=parseInt(_,10),y=e.model._getTrackedRange(e.trackedRanges[b]);return e.trackedRangesDirection[b]===0?new Ke(y.startLineNumber,y.startColumn,y.endLineNumber,y.endColumn):new Ke(y.endLineNumber,y.endColumn,y.startLineNumber,y.startColumn)}})):g[p]=e.selectionsBefore[p];return g});a||(a=e.selectionsBefore);const l=[];for(const c in s)s.hasOwnProperty(c)&&l.push(parseInt(c,10));l.sort((c,u)=>u-c);for(const c of l)a.splice(c,1);return a}static _arrayIsEmpty(e){for(let t=0,i=e.length;t<i;t++)if(e[t])return!1;return!0}static _getEditOperations(e,t){let i=[],n=!1;for(let s=0,r=t.length;s<r;s++){const a=t[s];if(a){const l=this._getEditOperationsFromCommand(e,s,a);i=i.concat(l.operations),n=n||l.hadTrackedEditOperation}}return{operations:i,hadTrackedEditOperation:n}}static _getEditOperationsFromCommand(e,t,i){const n=[];let s=0;const r=(f,g,p=!1)=>{M.isEmpty(f)&&g===""||n.push({identifier:{major:t,minor:s++},range:f,text:g,forceMoveMarkers:p,isAutoWhitespaceEdit:i.insertsAutoWhitespace})};let a=!1;const u={addEditOperation:r,addTrackedEditOperation:(f,g,p)=>{a=!0,r(f,g,p)},trackSelection:(f,g)=>{const p=Ke.liftSelection(f);let _;if(p.isEmpty())if(typeof g=="boolean")g?_=2:_=3;else{const S=e.model.getLineMaxColumn(p.startLineNumber);p.startColumn===S?_=2:_=3}else _=1;const b=e.trackedRanges.length,y=e.model._setTrackedRange(null,p,_);return e.trackedRanges[b]=y,e.trackedRangesDirection[b]=p.getDirection(),b.toString()}};try{i.getEditOperations(e.model,u)}catch(f){return wt(f),{operations:[],hadTrackedEditOperation:!1}}return{operations:n,hadTrackedEditOperation:a}}static _getLoserCursorMap(e){e=e.slice(0),e.sort((i,n)=>-M.compareRangesUsingEnds(i.range,n.range));const t={};for(let i=1;i<e.length;i++){const n=e[i-1],s=e[i];if(M.getStartPosition(n.range).isBefore(M.getEndPosition(s.range))){let r;n.identifier.major>s.identifier.major?r=n.identifier.major:r=s.identifier.major,t[r.toString()]=!0;for(let a=0;a<e.length;a++)e[a].identifier.major===r&&(e.splice(a,1),a<i&&i--,a--);i>0&&i--}}return t}}class L7e{constructor(e,t,i){this.text=e,this.startSelection=t,this.endSelection=i}}class Ik{static _capture(e,t){const i=[];for(const n of t){if(n.startLineNumber!==n.endLineNumber)return null;i.push(new L7e(e.getLineContent(n.startLineNumber),n.startColumn-1,n.endColumn-1))}return i}constructor(e,t){this._original=Ik._capture(e,t)}deduceOutcome(e,t){if(!this._original)return null;const i=Ik._capture(e,t);if(!i||this._original.length!==i.length)return null;const n=[];for(let s=0,r=this._original.length;s<r;s++)n.push(Ik._deduceOutcome(this._original[s],i[s]));return n}static _deduceOutcome(e,t){const i=Math.min(e.startSelection,t.startSelection,Om(e.text,t.text)),n=Math.min(e.text.length-e.endSelection,t.text.length-t.endSelection,gA(e.text,t.text)),s=e.text.substring(i,e.text.length-n),r=t.text.substring(i,t.text.length-n);return new QWe(s,e.startSelection-i,e.endSelection-i,r,t.startSelection-i,t.endSelection-i)}}class x7e{constructor(){this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[]}insert(e){this._hasPending=!0,this._inserts.push(e)}change(e){this._hasPending=!0,this._changes.push(e)}remove(e){this._hasPending=!0,this._removes.push(e)}mustCommit(){return this._hasPending}commit(e){if(!this._hasPending)return;const t=this._inserts,i=this._changes,n=this._removes;this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[],e._commitPendingChanges(t,i,n)}}class k7e{constructor(e,t,i,n,s){this.id=e,this.afterLineNumber=t,this.ordinal=i,this.height=n,this.minWidth=s,this.prefixSum=0}}var pm;let D7e=(pm=class{constructor(e,t,i,n){this._instanceId=ece(++pm.INSTANCE_COUNT),this._pendingChanges=new x7e,this._lastWhitespaceId=0,this._arr=[],this._prefixSumValidIndex=-1,this._minWidth=-1,this._lineCount=e,this._lineHeight=t,this._paddingTop=i,this._paddingBottom=n}static findInsertionIndex(e,t,i){let n=0,s=e.length;for(;n<s;){const r=n+s>>>1;t===e[r].afterLineNumber?i<e[r].ordinal?s=r:n=r+1:t<e[r].afterLineNumber?s=r:n=r+1}return n}setLineHeight(e){this._checkPendingChanges(),this._lineHeight=e}setPadding(e,t){this._paddingTop=e,this._paddingBottom=t}onFlushed(e){this._checkPendingChanges(),this._lineCount=e}changeWhitespace(e){let t=!1;try{e({insertWhitespace:(n,s,r,a)=>{t=!0,n=n|0,s=s|0,r=r|0,a=a|0;const l=this._instanceId+ ++this._lastWhitespaceId;return this._pendingChanges.insert(new k7e(l,n,s,r,a)),l},changeOneWhitespace:(n,s,r)=>{t=!0,s=s|0,r=r|0,this._pendingChanges.change({id:n,newAfterLineNumber:s,newHeight:r})},removeWhitespace:n=>{t=!0,this._pendingChanges.remove({id:n})}})}finally{this._pendingChanges.commit(this)}return t}_commitPendingChanges(e,t,i){if((e.length>0||i.length>0)&&(this._minWidth=-1),e.length+t.length+i.length<=1){for(const l of e)this._insertWhitespace(l);for(const l of t)this._changeOneWhitespace(l.id,l.newAfterLineNumber,l.newHeight);for(const l of i){const c=this._findWhitespaceIndex(l.id);c!==-1&&this._removeWhitespace(c)}return}const n=new Set;for(const l of i)n.add(l.id);const s=new Map;for(const l of t)s.set(l.id,l);const r=l=>{const c=[];for(const u of l)if(!n.has(u.id)){if(s.has(u.id)){const f=s.get(u.id);u.afterLineNumber=f.newAfterLineNumber,u.height=f.newHeight}c.push(u)}return c},a=r(this._arr).concat(r(e));a.sort((l,c)=>l.afterLineNumber===c.afterLineNumber?l.ordinal-c.ordinal:l.afterLineNumber-c.afterLineNumber),this._arr=a,this._prefixSumValidIndex=-1}_checkPendingChanges(){this._pendingChanges.mustCommit()&&this._pendingChanges.commit(this)}_insertWhitespace(e){const t=pm.findInsertionIndex(this._arr,e.afterLineNumber,e.ordinal);this._arr.splice(t,0,e),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,t-1)}_findWhitespaceIndex(e){const t=this._arr;for(let i=0,n=t.length;i<n;i++)if(t[i].id===e)return i;return-1}_changeOneWhitespace(e,t,i){const n=this._findWhitespaceIndex(e);if(n!==-1&&(this._arr[n].height!==i&&(this._arr[n].height=i,this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,n-1)),this._arr[n].afterLineNumber!==t)){const s=this._arr[n];this._removeWhitespace(n),s.afterLineNumber=t,this._insertWhitespace(s)}}_removeWhitespace(e){this._arr.splice(e,1),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,e-1)}onLinesDeleted(e,t){this._checkPendingChanges(),e=e|0,t=t|0,this._lineCount-=t-e+1;for(let i=0,n=this._arr.length;i<n;i++){const s=this._arr[i].afterLineNumber;e<=s&&s<=t?this._arr[i].afterLineNumber=e-1:s>t&&(this._arr[i].afterLineNumber-=t-e+1)}}onLinesInserted(e,t){this._checkPendingChanges(),e=e|0,t=t|0,this._lineCount+=t-e+1;for(let i=0,n=this._arr.length;i<n;i++){const s=this._arr[i].afterLineNumber;e<=s&&(this._arr[i].afterLineNumber+=t-e+1)}}getWhitespacesTotalHeight(){return this._checkPendingChanges(),this._arr.length===0?0:this.getWhitespacesAccumulatedHeight(this._arr.length-1)}getWhitespacesAccumulatedHeight(e){this._checkPendingChanges(),e=e|0;let t=Math.max(0,this._prefixSumValidIndex+1);t===0&&(this._arr[0].prefixSum=this._arr[0].height,t++);for(let i=t;i<=e;i++)this._arr[i].prefixSum=this._arr[i-1].prefixSum+this._arr[i].height;return this._prefixSumValidIndex=Math.max(this._prefixSumValidIndex,e),this._arr[e].prefixSum}getLinesTotalHeight(){this._checkPendingChanges();const e=this._lineHeight*this._lineCount,t=this.getWhitespacesTotalHeight();return e+t+this._paddingTop+this._paddingBottom}getWhitespaceAccumulatedHeightBeforeLineNumber(e){this._checkPendingChanges(),e=e|0;const t=this._findLastWhitespaceBeforeLineNumber(e);return t===-1?0:this.getWhitespacesAccumulatedHeight(t)}_findLastWhitespaceBeforeLineNumber(e){e=e|0;const t=this._arr;let i=0,n=t.length-1;for(;i<=n;){const r=(n-i|0)/2|0,a=i+r|0;if(t[a].afterLineNumber<e){if(a+1>=t.length||t[a+1].afterLineNumber>=e)return a;i=a+1|0}else n=a-1|0}return-1}_findFirstWhitespaceAfterLineNumber(e){e=e|0;const i=this._findLastWhitespaceBeforeLineNumber(e)+1;return i<this._arr.length?i:-1}getFirstWhitespaceIndexAfterLineNumber(e){return this._checkPendingChanges(),e=e|0,this._findFirstWhitespaceAfterLineNumber(e)}getVerticalOffsetForLineNumber(e,t=!1){this._checkPendingChanges(),e=e|0;let i;e>1?i=this._lineHeight*(e-1):i=0;const n=this.getWhitespaceAccumulatedHeightBeforeLineNumber(e-(t?1:0));return i+n+this._paddingTop}getVerticalOffsetAfterLineNumber(e,t=!1){this._checkPendingChanges(),e=e|0;const i=this._lineHeight*e,n=this.getWhitespaceAccumulatedHeightBeforeLineNumber(e+(t?1:0));return i+n+this._paddingTop}getWhitespaceMinWidth(){if(this._checkPendingChanges(),this._minWidth===-1){let e=0;for(let t=0,i=this._arr.length;t<i;t++)e=Math.max(e,this._arr[t].minWidth);this._minWidth=e}return this._minWidth}isAfterLines(e){this._checkPendingChanges();const t=this.getLinesTotalHeight();return e>t}isInTopPadding(e){return this._paddingTop===0?!1:(this._checkPendingChanges(),e<this._paddingTop)}isInBottomPadding(e){if(this._paddingBottom===0)return!1;this._checkPendingChanges();const t=this.getLinesTotalHeight();return e>=t-this._paddingBottom}getLineNumberAtOrAfterVerticalOffset(e){if(this._checkPendingChanges(),e=e|0,e<0)return 1;const t=this._lineCount|0,i=this._lineHeight;let n=1,s=t;for(;n<s;){const r=(n+s)/2|0,a=this.getVerticalOffsetForLineNumber(r)|0;if(e>=a+i)n=r+1;else{if(e>=a)return r;s=r}}return n>t?t:n}getLinesViewportData(e,t){this._checkPendingChanges(),e=e|0,t=t|0;const i=this._lineHeight,n=this.getLineNumberAtOrAfterVerticalOffset(e)|0,s=this.getVerticalOffsetForLineNumber(n)|0;let r=this._lineCount|0,a=this.getFirstWhitespaceIndexAfterLineNumber(n)|0;const l=this.getWhitespacesCount()|0;let c,u;a===-1?(a=l,u=r+1,c=0):(u=this.getAfterLineNumberForWhitespaceIndex(a)|0,c=this.getHeightForWhitespaceIndex(a)|0);let f=s,g=f;const p=5e5;let _=0;s>=p&&(_=Math.floor(s/p)*p,_=Math.floor(_/i)*i,g-=_);const b=[],y=e+(t-e)/2;let S=-1;for(let E=n;E<=r;E++){if(S===-1){const N=f,A=f+i;(N<=y&&y<A||N>y)&&(S=E)}for(f+=i,b[E-n]=g,g+=i;u===E;)g+=c,f+=c,a++,a>=l?u=r+1:(u=this.getAfterLineNumberForWhitespaceIndex(a)|0,c=this.getHeightForWhitespaceIndex(a)|0);if(f>=t){r=E;break}}S===-1&&(S=r);const L=this.getVerticalOffsetForLineNumber(r)|0;let x=n,k=r;return x<k&&s<e&&x++,x<k&&L+i>t&&k--,{bigNumbersDelta:_,startLineNumber:n,endLineNumber:r,relativeVerticalOffset:b,centeredLineNumber:S,completelyVisibleStartLineNumber:x,completelyVisibleEndLineNumber:k,lineHeight:this._lineHeight}}getVerticalOffsetForWhitespaceIndex(e){this._checkPendingChanges(),e=e|0;const t=this.getAfterLineNumberForWhitespaceIndex(e);let i;t>=1?i=this._lineHeight*t:i=0;let n;return e>0?n=this.getWhitespacesAccumulatedHeight(e-1):n=0,i+n+this._paddingTop}getWhitespaceIndexAtOrAfterVerticallOffset(e){this._checkPendingChanges(),e=e|0;let t=0,i=this.getWhitespacesCount()-1;if(i<0)return-1;const n=this.getVerticalOffsetForWhitespaceIndex(i),s=this.getHeightForWhitespaceIndex(i);if(e>=n+s)return-1;for(;t<i;){const r=Math.floor((t+i)/2),a=this.getVerticalOffsetForWhitespaceIndex(r),l=this.getHeightForWhitespaceIndex(r);if(e>=a+l)t=r+1;else{if(e>=a)return r;i=r}}return t}getWhitespaceAtVerticalOffset(e){this._checkPendingChanges(),e=e|0;const t=this.getWhitespaceIndexAtOrAfterVerticallOffset(e);if(t<0||t>=this.getWhitespacesCount())return null;const i=this.getVerticalOffsetForWhitespaceIndex(t);if(i>e)return null;const n=this.getHeightForWhitespaceIndex(t),s=this.getIdForWhitespaceIndex(t),r=this.getAfterLineNumberForWhitespaceIndex(t);return{id:s,afterLineNumber:r,verticalOffset:i,height:n}}getWhitespaceViewportData(e,t){this._checkPendingChanges(),e=e|0,t=t|0;const i=this.getWhitespaceIndexAtOrAfterVerticallOffset(e),n=this.getWhitespacesCount()-1;if(i<0)return[];const s=[];for(let r=i;r<=n;r++){const a=this.getVerticalOffsetForWhitespaceIndex(r),l=this.getHeightForWhitespaceIndex(r);if(a>=t)break;s.push({id:this.getIdForWhitespaceIndex(r),afterLineNumber:this.getAfterLineNumberForWhitespaceIndex(r),verticalOffset:a,height:l})}return s}getWhitespaces(){return this._checkPendingChanges(),this._arr.slice(0)}getWhitespacesCount(){return this._checkPendingChanges(),this._arr.length}getIdForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].id}getAfterLineNumberForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].afterLineNumber}getHeightForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].height}},pm.INSTANCE_COUNT=0,pm);const E7e=125;class Ux{constructor(e,t,i,n){e=e|0,t=t|0,i=i|0,n=n|0,e<0&&(e=0),t<0&&(t=0),i<0&&(i=0),n<0&&(n=0),this.width=e,this.contentWidth=t,this.scrollWidth=Math.max(e,t),this.height=i,this.contentHeight=n,this.scrollHeight=Math.max(i,n)}equals(e){return this.width===e.width&&this.contentWidth===e.contentWidth&&this.height===e.height&&this.contentHeight===e.contentHeight}}class I7e extends X{constructor(e,t){super(),this._onDidContentSizeChange=this._register(new Y),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._dimensions=new Ux(0,0,0,0),this._scrollable=this._register(new ZS({forceIntegerValues:!0,smoothScrollDuration:e,scheduleAtNextAnimationFrame:t})),this.onDidScroll=this._scrollable.onScroll}getScrollable(){return this._scrollable}setSmoothScrollDuration(e){this._scrollable.setSmoothScrollDuration(e)}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}getScrollDimensions(){return this._dimensions}setScrollDimensions(e){if(this._dimensions.equals(e))return;const t=this._dimensions;this._dimensions=e,this._scrollable.setScrollDimensions({width:e.width,scrollWidth:e.scrollWidth,height:e.height,scrollHeight:e.scrollHeight},!0);const i=t.contentWidth!==e.contentWidth,n=t.contentHeight!==e.contentHeight;(i||n)&&this._onDidContentSizeChange.fire(new BG(t.contentWidth,t.contentHeight,e.contentWidth,e.contentHeight))}getFutureScrollPosition(){return this._scrollable.getFutureScrollPosition()}getCurrentScrollPosition(){return this._scrollable.getCurrentScrollPosition()}setScrollPositionNow(e){this._scrollable.setScrollPositionNow(e)}setScrollPositionSmooth(e){this._scrollable.setScrollPositionSmooth(e)}hasPendingScrollAnimation(){return this._scrollable.hasPendingScrollAnimation()}}class T7e extends X{constructor(e,t,i){super(),this._configuration=e;const n=this._configuration.options,s=n.get(146),r=n.get(84);this._linesLayout=new D7e(t,n.get(67),r.top,r.bottom),this._maxLineWidth=0,this._overlayWidgetsMinWidth=0,this._scrollable=this._register(new I7e(0,i)),this._configureSmoothScrollDuration(),this._scrollable.setScrollDimensions(new Ux(s.contentWidth,0,s.height,0)),this.onDidScroll=this._scrollable.onDidScroll,this.onDidContentSizeChange=this._scrollable.onDidContentSizeChange,this._updateHeight()}dispose(){super.dispose()}getScrollable(){return this._scrollable.getScrollable()}onHeightMaybeChanged(){this._updateHeight()}_configureSmoothScrollDuration(){this._scrollable.setSmoothScrollDuration(this._configuration.options.get(115)?E7e:0)}onConfigurationChanged(e){const t=this._configuration.options;if(e.hasChanged(67)&&this._linesLayout.setLineHeight(t.get(67)),e.hasChanged(84)){const i=t.get(84);this._linesLayout.setPadding(i.top,i.bottom)}if(e.hasChanged(146)){const i=t.get(146),n=i.contentWidth,s=i.height,r=this._scrollable.getScrollDimensions(),a=r.contentWidth;this._scrollable.setScrollDimensions(new Ux(n,r.contentWidth,s,this._getContentHeight(n,s,a)))}else this._updateHeight();e.hasChanged(115)&&this._configureSmoothScrollDuration()}onFlushed(e){this._linesLayout.onFlushed(e)}onLinesDeleted(e,t){this._linesLayout.onLinesDeleted(e,t)}onLinesInserted(e,t){this._linesLayout.onLinesInserted(e,t)}_getHorizontalScrollbarHeight(e,t){const n=this._configuration.options.get(104);return n.horizontal===2||e>=t?0:n.horizontalScrollbarSize}_getContentHeight(e,t,i){const n=this._configuration.options;let s=this._linesLayout.getLinesTotalHeight();return n.get(106)?s+=Math.max(0,t-n.get(67)-n.get(84).bottom):n.get(104).ignoreHorizontalScrollbarInContentHeight||(s+=this._getHorizontalScrollbarHeight(e,i)),s}_updateHeight(){const e=this._scrollable.getScrollDimensions(),t=e.width,i=e.height,n=e.contentWidth;this._scrollable.setScrollDimensions(new Ux(t,e.contentWidth,i,this._getContentHeight(t,i,n)))}getCurrentViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getCurrentScrollPosition();return new toe(t.scrollTop,t.scrollLeft,e.width,e.height)}getFutureViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getFutureScrollPosition();return new toe(t.scrollTop,t.scrollLeft,e.width,e.height)}_computeContentWidth(){const e=this._configuration.options,t=this._maxLineWidth,i=e.get(147),n=e.get(50),s=e.get(146);if(i.isViewportWrapping){const r=e.get(73);return t>s.contentWidth+n.typicalHalfwidthCharacterWidth&&r.enabled&&r.side==="right"?t+s.verticalScrollbarWidth:t}else{const r=e.get(105)*n.typicalHalfwidthCharacterWidth,a=this._linesLayout.getWhitespaceMinWidth();return Math.max(t+r+s.verticalScrollbarWidth,a,this._overlayWidgetsMinWidth)}}setMaxLineWidth(e){this._maxLineWidth=e,this._updateContentWidth()}setOverlayWidgetsMinWidth(e){this._overlayWidgetsMinWidth=e,this._updateContentWidth()}_updateContentWidth(){const e=this._scrollable.getScrollDimensions();this._scrollable.setScrollDimensions(new Ux(e.width,this._computeContentWidth(),e.height,e.contentHeight)),this._updateHeight()}saveState(){const e=this._scrollable.getFutureScrollPosition(),t=e.scrollTop,i=this._linesLayout.getLineNumberAtOrAfterVerticalOffset(t),n=this._linesLayout.getWhitespaceAccumulatedHeightBeforeLineNumber(i);return{scrollTop:t,scrollTopWithoutViewZones:t-n,scrollLeft:e.scrollLeft}}changeWhitespace(e){const t=this._linesLayout.changeWhitespace(e);return t&&this.onHeightMaybeChanged(),t}getVerticalOffsetForLineNumber(e,t=!1){return this._linesLayout.getVerticalOffsetForLineNumber(e,t)}getVerticalOffsetAfterLineNumber(e,t=!1){return this._linesLayout.getVerticalOffsetAfterLineNumber(e,t)}isAfterLines(e){return this._linesLayout.isAfterLines(e)}isInTopPadding(e){return this._linesLayout.isInTopPadding(e)}isInBottomPadding(e){return this._linesLayout.isInBottomPadding(e)}getLineNumberAtVerticalOffset(e){return this._linesLayout.getLineNumberAtOrAfterVerticalOffset(e)}getWhitespaceAtVerticalOffset(e){return this._linesLayout.getWhitespaceAtVerticalOffset(e)}getLinesViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getLinesViewportData(e.top,e.top+e.height)}getLinesViewportDataAtScrollTop(e){const t=this._scrollable.getScrollDimensions();return e+t.height>t.scrollHeight&&(e=t.scrollHeight-t.height),e<0&&(e=0),this._linesLayout.getLinesViewportData(e,e+t.height)}getWhitespaceViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getWhitespaceViewportData(e.top,e.top+e.height)}getWhitespaces(){return this._linesLayout.getWhitespaces()}getContentWidth(){return this._scrollable.getScrollDimensions().contentWidth}getScrollWidth(){return this._scrollable.getScrollDimensions().scrollWidth}getContentHeight(){return this._scrollable.getScrollDimensions().contentHeight}getScrollHeight(){return this._scrollable.getScrollDimensions().scrollHeight}getCurrentScrollLeft(){return this._scrollable.getCurrentScrollPosition().scrollLeft}getCurrentScrollTop(){return this._scrollable.getCurrentScrollPosition().scrollTop}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}setScrollPosition(e,t){t===1?this._scrollable.setScrollPositionNow(e):this._scrollable.setScrollPositionSmooth(e)}hasPendingScrollAnimation(){return this._scrollable.hasPendingScrollAnimation()}deltaScrollNow(e,t){const i=this._scrollable.getCurrentScrollPosition();this._scrollable.setScrollPositionNow({scrollLeft:i.scrollLeft+e,scrollTop:i.scrollTop+t})}}class N7e{constructor(e,t,i,n,s){this.editorId=e,this.model=t,this.configuration=i,this._linesCollection=n,this._coordinatesConverter=s,this._decorationsCache=Object.create(null),this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}_clearCachedModelDecorationsResolver(){this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}dispose(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}reset(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onModelDecorationsChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onLineMappingChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}_getOrCreateViewModelDecoration(e){const t=e.id;let i=this._decorationsCache[t];if(!i){const n=e.range,s=e.options;let r;if(s.isWholeLine){const a=this._coordinatesConverter.convertModelPositionToViewPosition(new G(n.startLineNumber,1),0,!1,!0),l=this._coordinatesConverter.convertModelPositionToViewPosition(new G(n.endLineNumber,this.model.getLineMaxColumn(n.endLineNumber)),1);r=new M(a.lineNumber,a.column,l.lineNumber,l.column)}else r=this._coordinatesConverter.convertModelRangeToViewRange(n,1);i=new ofe(r,s),this._decorationsCache[t]=i}return i}getMinimapDecorationsInRange(e){return this._getDecorationsInRange(e,!0,!1).decorations}getDecorationsViewportData(e){let t=this._cachedModelDecorationsResolver!==null;return t=t&&e.equalsRange(this._cachedModelDecorationsResolverViewRange),t||(this._cachedModelDecorationsResolver=this._getDecorationsInRange(e,!1,!1),this._cachedModelDecorationsResolverViewRange=e),this._cachedModelDecorationsResolver}getInlineDecorationsOnLine(e,t=!1,i=!1){const n=new M(e,this._linesCollection.getViewLineMinColumn(e),e,this._linesCollection.getViewLineMaxColumn(e));return this._getDecorationsInRange(n,t,i).inlineDecorations[0]}_getDecorationsInRange(e,t,i){const n=this._linesCollection.getDecorationsInRange(e,this.editorId,rA(this.configuration.options),t,i),s=e.startLineNumber,r=e.endLineNumber,a=[];let l=0;const c=[];for(let u=s;u<=r;u++)c[u-s]=[];for(let u=0,f=n.length;u<f;u++){const g=n[u],p=g.options;if(!VG(this.model,g))continue;const _=this._getOrCreateViewModelDecoration(g),b=_.range;if(a[l++]=_,p.inlineClassName){const y=new Ck(b,p.inlineClassName,p.inlineClassNameAffectsLetterSpacing?3:0),S=Math.max(s,b.startLineNumber),L=Math.min(r,b.endLineNumber);for(let x=S;x<=L;x++)c[x-s].push(y)}if(p.beforeContentClassName&&s<=b.startLineNumber&&b.startLineNumber<=r){const y=new Ck(new M(b.startLineNumber,b.startColumn,b.startLineNumber,b.startColumn),p.beforeContentClassName,1);c[b.startLineNumber-s].push(y)}if(p.afterContentClassName&&s<=b.endLineNumber&&b.endLineNumber<=r){const y=new Ck(new M(b.endLineNumber,b.endColumn,b.endLineNumber,b.endColumn),p.afterContentClassName,2);c[b.endLineNumber-s].push(y)}}return{decorations:a,inlineDecorations:c}}}function VG(o,e){return!(e.options.hideInCommentTokens&&zG(o,e)||e.options.hideInStringTokens&&UG(o,e))}function zG(o,e){return Efe(o,e.range,t=>t===1)}function UG(o,e){return Efe(o,e.range,t=>t===2)}function Efe(o,e,t){for(let i=e.startLineNumber;i<=e.endLineNumber;i++){const n=o.tokenization.getLineTokens(i),s=i===e.startLineNumber,r=i===e.endLineNumber;let a=s?n.findTokenIndexAtOffset(e.startColumn-1):0;for(;a<n.getCount()&&!(r&&n.getStartOffset(a)>e.endColumn-1);){if(!t(n.getStandardTokenType(a)))return!1;a++}}return!0}function e9(o,e){return o===null?e?$P.INSTANCE:jP.INSTANCE:new R7e(o,e)}class R7e{constructor(e,t){this._projectionData=e,this._isVisible=t}isVisible(){return this._isVisible}setVisible(e){return this._isVisible=e,this}getProjectionData(){return this._projectionData}getViewLineCount(){return this._isVisible?this._projectionData.getOutputLineCount():0}getViewLineContent(e,t,i){this._assertVisible();const n=i>0?this._projectionData.breakOffsets[i-1]:0,s=this._projectionData.breakOffsets[i];let r;if(this._projectionData.injectionOffsets!==null){const a=this._projectionData.injectionOffsets.map((c,u)=>new mu(0,0,c+1,this._projectionData.injectionOptions[u],0));r=mu.applyInjectedText(e.getLineContent(t),a).substring(n,s)}else r=e.getValueInRange({startLineNumber:t,startColumn:n+1,endLineNumber:t,endColumn:s+1});return i>0&&(r=Noe(this._projectionData.wrappedTextIndentLength)+r),r}getViewLineLength(e,t,i){return this._assertVisible(),this._projectionData.getLineLength(i)}getViewLineMinColumn(e,t,i){return this._assertVisible(),this._projectionData.getMinOutputOffset(i)+1}getViewLineMaxColumn(e,t,i){return this._assertVisible(),this._projectionData.getMaxOutputOffset(i)+1}getViewLineData(e,t,i){const n=new Array;return this.getViewLinesData(e,t,i,1,0,[!0],n),n[0]}getViewLinesData(e,t,i,n,s,r,a){this._assertVisible();const l=this._projectionData,c=l.injectionOffsets,u=l.injectionOptions;let f=null;if(c){f=[];let p=0,_=0;for(let b=0;b<l.getOutputLineCount();b++){const y=new Array;f[b]=y;const S=b>0?l.breakOffsets[b-1]:0,L=l.breakOffsets[b];for(;_<c.length;){const x=u[_].content.length,k=c[_]+p,E=k+x;if(k>L)break;if(S<E){const N=u[_];if(N.inlineClassName){const A=b>0?l.wrappedTextIndentLength:0,P=A+Math.max(k-S,0),H=A+Math.min(E-S,L-S);P!==H&&y.push(new kBe(P,H,N.inlineClassName,N.inlineClassNameAffectsLetterSpacing))}}if(E<=L)p+=x,_++;else break}}}let g;c?g=e.tokenization.getLineTokens(t).withInserted(c.map((p,_)=>({offset:p,text:u[_].content,tokenMetadata:ho.defaultTokenMetadata}))):g=e.tokenization.getLineTokens(t);for(let p=i;p<i+n;p++){const _=s+p-i;if(!r[_]){a[_]=null;continue}a[_]=this._getViewLineData(g,f?f[p]:null,p)}}_getViewLineData(e,t,i){this._assertVisible();const n=this._projectionData,s=i>0?n.wrappedTextIndentLength:0,r=i>0?n.breakOffsets[i-1]:0,a=n.breakOffsets[i],l=e.sliceAndInflate(r,a,s);let c=l.getLineContent();i>0&&(c=Noe(n.wrappedTextIndentLength)+c);const u=this._projectionData.getMinOutputOffset(i)+1,f=c.length+1,g=i+1<this.getViewLineCount(),p=i===0?0:n.breakOffsetsVisibleColumn[i-1];return new wG(c,g,u,f,p,l,t)}getModelColumnOfViewPosition(e,t){return this._assertVisible(),this._projectionData.translateToInputOffset(e,t-1)+1}getViewPositionOfModelPosition(e,t,i=2){return this._assertVisible(),this._projectionData.translateToOutputPosition(t-1,i).toPosition(e)}getViewLineNumberOfModelPosition(e,t){this._assertVisible();const i=this._projectionData.translateToOutputPosition(t-1);return e+i.outputLineIndex}normalizePosition(e,t,i){const n=t.lineNumber-e;return this._projectionData.normalizeOutputPosition(e,t.column-1,i).toPosition(n)}getInjectedTextAt(e,t){return this._projectionData.getInjectedText(e,t-1)}_assertVisible(){if(!this._isVisible)throw new Error("Not supported")}}const $2=class $2{constructor(){}isVisible(){return!0}setVisible(e){return e?this:jP.INSTANCE}getProjectionData(){return null}getViewLineCount(){return 1}getViewLineContent(e,t,i){return e.getLineContent(t)}getViewLineLength(e,t,i){return e.getLineLength(t)}getViewLineMinColumn(e,t,i){return e.getLineMinColumn(t)}getViewLineMaxColumn(e,t,i){return e.getLineMaxColumn(t)}getViewLineData(e,t,i){const n=e.tokenization.getLineTokens(t),s=n.getLineContent();return new wG(s,!1,1,s.length+1,0,n.inflate(),null)}getViewLinesData(e,t,i,n,s,r,a){if(!r[s]){a[s]=null;return}a[s]=this.getViewLineData(e,t,0)}getModelColumnOfViewPosition(e,t){return t}getViewPositionOfModelPosition(e,t){return new G(e,t)}getViewLineNumberOfModelPosition(e,t){return e}normalizePosition(e,t,i){return t}getInjectedTextAt(e,t){return null}};$2.INSTANCE=new $2;let $P=$2;const j2=class j2{constructor(){}isVisible(){return!1}setVisible(e){return e?$P.INSTANCE:this}getProjectionData(){return null}getViewLineCount(){return 0}getViewLineContent(e,t,i){throw new Error("Not supported")}getViewLineLength(e,t,i){throw new Error("Not supported")}getViewLineMinColumn(e,t,i){throw new Error("Not supported")}getViewLineMaxColumn(e,t,i){throw new Error("Not supported")}getViewLineData(e,t,i){throw new Error("Not supported")}getViewLinesData(e,t,i,n,s,r,a){throw new Error("Not supported")}getModelColumnOfViewPosition(e,t){throw new Error("Not supported")}getViewPositionOfModelPosition(e,t){throw new Error("Not supported")}getViewLineNumberOfModelPosition(e,t){throw new Error("Not supported")}normalizePosition(e,t,i){throw new Error("Not supported")}getInjectedTextAt(e,t){throw new Error("Not supported")}};j2.INSTANCE=new j2;let jP=j2;const t9=[""];function Noe(o){if(o>=t9.length)for(let e=1;e<=o;e++)t9[e]=M7e(e);return t9[o]}function M7e(o){return new Array(o+1).join(" ")}class A7e{constructor(e,t,i,n,s,r,a,l,c,u){this._editorId=e,this.model=t,this._validModelVersionId=-1,this._domLineBreaksComputerFactory=i,this._monospaceLineBreaksComputerFactory=n,this.fontInfo=s,this.tabSize=r,this.wrappingStrategy=a,this.wrappingColumn=l,this.wrappingIndent=c,this.wordBreak=u,this._constructLines(!0,null)}dispose(){this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[])}createCoordinatesConverter(){return new O7e(this)}_constructLines(e,t){this.modelLineProjections=[],e&&(this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[]));const i=this.model.getLinesContent(),n=this.model.getInjectedTextDecorations(this._editorId),s=i.length,r=this.createLineBreaksComputer(),a=new Cg(mu.fromDecorations(n));for(let b=0;b<s;b++){const y=a.takeWhile(S=>S.lineNumber===b+1);r.addRequest(i[b],y,t?t[b]:null)}const l=r.finalize(),c=[],u=this.hiddenAreasDecorationIds.map(b=>this.model.getDecorationRange(b)).sort(M.compareRangesUsingStarts);let f=1,g=0,p=-1,_=p+1<u.length?g+1:s+2;for(let b=0;b<s;b++){const y=b+1;y===_&&(p++,f=u[p].startLineNumber,g=u[p].endLineNumber,_=p+1<u.length?g+1:s+2);const S=y>=f&&y<=g,L=e9(l[b],!S);c[b]=L.getViewLineCount(),this.modelLineProjections[b]=L}this._validModelVersionId=this.model.getVersionId(),this.projectedModelLineLineCounts=new YTe(c)}getHiddenAreas(){return this.hiddenAreasDecorationIds.map(e=>this.model.getDecorationRange(e))}setHiddenAreas(e){const t=e.map(g=>this.model.validateRange(g)),i=P7e(t),n=this.hiddenAreasDecorationIds.map(g=>this.model.getDecorationRange(g)).sort(M.compareRangesUsingStarts);if(i.length===n.length){let g=!1;for(let p=0;p<i.length;p++)if(!i[p].equalsRange(n[p])){g=!0;break}if(!g)return!1}const s=i.map(g=>({range:g,options:Dt.EMPTY}));this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,s);const r=i;let a=1,l=0,c=-1,u=c+1<r.length?l+1:this.modelLineProjections.length+2,f=!1;for(let g=0;g<this.modelLineProjections.length;g++){const p=g+1;p===u&&(c++,a=r[c].startLineNumber,l=r[c].endLineNumber,u=c+1<r.length?l+1:this.modelLineProjections.length+2);let _=!1;if(p>=a&&p<=l?this.modelLineProjections[g].isVisible()&&(this.modelLineProjections[g]=this.modelLineProjections[g].setVisible(!1),_=!0):(f=!0,this.modelLineProjections[g].isVisible()||(this.modelLineProjections[g]=this.modelLineProjections[g].setVisible(!0),_=!0)),_){const b=this.modelLineProjections[g].getViewLineCount();this.projectedModelLineLineCounts.setValue(g,b)}}return f||this.setHiddenAreas([]),!0}modelPositionIsVisible(e,t){return e<1||e>this.modelLineProjections.length?!1:this.modelLineProjections[e-1].isVisible()}getModelLineViewLineCount(e){return e<1||e>this.modelLineProjections.length?1:this.modelLineProjections[e-1].getViewLineCount()}setTabSize(e){return this.tabSize===e?!1:(this.tabSize=e,this._constructLines(!1,null),!0)}setWrappingSettings(e,t,i,n,s){const r=this.fontInfo.equals(e),a=this.wrappingStrategy===t,l=this.wrappingColumn===i,c=this.wrappingIndent===n,u=this.wordBreak===s;if(r&&a&&l&&c&&u)return!1;const f=r&&a&&!l&&c&&u;this.fontInfo=e,this.wrappingStrategy=t,this.wrappingColumn=i,this.wrappingIndent=n,this.wordBreak=s;let g=null;if(f){g=[];for(let p=0,_=this.modelLineProjections.length;p<_;p++)g[p]=this.modelLineProjections[p].getProjectionData()}return this._constructLines(!1,g),!0}createLineBreaksComputer(){return(this.wrappingStrategy==="advanced"?this._domLineBreaksComputerFactory:this._monospaceLineBreaksComputerFactory).createLineBreaksComputer(this.fontInfo,this.tabSize,this.wrappingColumn,this.wrappingIndent,this.wordBreak)}onModelFlushed(){this._constructLines(!0,null)}onModelLinesDeleted(e,t,i){if(!e||e<=this._validModelVersionId)return null;const n=t===1?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,s=this.projectedModelLineLineCounts.getPrefixSum(i);return this.modelLineProjections.splice(t-1,i-t+1),this.projectedModelLineLineCounts.removeValues(t-1,i-t+1),new oU(n,s)}onModelLinesInserted(e,t,i,n){if(!e||e<=this._validModelVersionId)return null;const s=t>2&&!this.modelLineProjections[t-2].isVisible(),r=t===1?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1;let a=0;const l=[],c=[];for(let u=0,f=n.length;u<f;u++){const g=e9(n[u],!s);l.push(g);const p=g.getViewLineCount();a+=p,c[u]=p}return this.modelLineProjections=this.modelLineProjections.slice(0,t-1).concat(l).concat(this.modelLineProjections.slice(t-1)),this.projectedModelLineLineCounts.insertValues(t-1,c),new rU(r,r+a-1)}onModelLineChanged(e,t,i){if(e!==null&&e<=this._validModelVersionId)return[!1,null,null,null];const n=t-1,s=this.modelLineProjections[n].getViewLineCount(),r=this.modelLineProjections[n].isVisible(),a=e9(i,r);this.modelLineProjections[n]=a;const l=this.modelLineProjections[n].getViewLineCount();let c=!1,u=0,f=-1,g=0,p=-1,_=0,b=-1;s>l?(u=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,f=u+l-1,_=f+1,b=_+(s-l)-1,c=!0):s<l?(u=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,f=u+s-1,g=f+1,p=g+(l-s)-1,c=!0):(u=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,f=u+l-1),this.projectedModelLineLineCounts.setValue(n,l);const y=u<=f?new Dfe(u,f-u+1):null,S=g<=p?new rU(g,p):null,L=_<=b?new oU(_,b):null;return[c,y,S,L]}acceptVersionId(e){this._validModelVersionId=e,this.modelLineProjections.length===1&&!this.modelLineProjections[0].isVisible()&&this.setHiddenAreas([])}getViewLineCount(){return this.projectedModelLineLineCounts.getTotalSum()}_toValidViewLineNumber(e){if(e<1)return 1;const t=this.getViewLineCount();return e>t?t:e|0}getActiveIndentGuide(e,t,i){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t),i=this._toValidViewLineNumber(i);const n=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),s=this.convertViewPositionToModelPosition(t,this.getViewLineMinColumn(t)),r=this.convertViewPositionToModelPosition(i,this.getViewLineMinColumn(i)),a=this.model.guides.getActiveIndentGuide(n.lineNumber,s.lineNumber,r.lineNumber),l=this.convertModelPositionToViewPosition(a.startLineNumber,1),c=this.convertModelPositionToViewPosition(a.endLineNumber,this.model.getLineMaxColumn(a.endLineNumber));return{startLineNumber:l.lineNumber,endLineNumber:c.lineNumber,indent:a.indent}}getViewLineInfo(e){e=this._toValidViewLineNumber(e);const t=this.projectedModelLineLineCounts.getIndexOf(e-1),i=t.index,n=t.remainder;return new Roe(i+1,n)}getMinColumnOfViewLine(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getMaxColumnOfViewLine(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getModelStartPositionOfViewLine(e){const t=this.modelLineProjections[e.modelLineNumber-1],i=t.getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),n=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,i);return new G(e.modelLineNumber,n)}getModelEndPositionOfViewLine(e){const t=this.modelLineProjections[e.modelLineNumber-1],i=t.getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),n=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,i);return new G(e.modelLineNumber,n)}getViewLineInfosGroupedByModelRanges(e,t){const i=this.getViewLineInfo(e),n=this.getViewLineInfo(t),s=new Array;let r=this.getModelStartPositionOfViewLine(i),a=new Array;for(let l=i.modelLineNumber;l<=n.modelLineNumber;l++){const c=this.modelLineProjections[l-1];if(c.isVisible()){const u=l===i.modelLineNumber?i.modelLineWrappedLineIdx:0,f=l===n.modelLineNumber?n.modelLineWrappedLineIdx+1:c.getViewLineCount();for(let g=u;g<f;g++)a.push(new Roe(l,g))}if(!c.isVisible()&&r){const u=new G(l-1,this.model.getLineMaxColumn(l-1)+1),f=M.fromPositions(r,u);s.push(new Moe(f,a)),a=[],r=null}else c.isVisible()&&!r&&(r=new G(l,1))}if(r){const l=M.fromPositions(r,this.getModelEndPositionOfViewLine(n));s.push(new Moe(l,a))}return s}getViewLinesBracketGuides(e,t,i,n){const s=i?this.convertViewPositionToModelPosition(i.lineNumber,i.column):null,r=[];for(const a of this.getViewLineInfosGroupedByModelRanges(e,t)){const l=a.modelRange.startLineNumber,c=this.model.guides.getLinesBracketGuides(l,a.modelRange.endLineNumber,s,n);for(const u of a.viewLines){const g=c[u.modelLineNumber-l].map(p=>{if(p.forWrappedLinesAfterColumn!==-1&&this.modelLineProjections[u.modelLineNumber-1].getViewPositionOfModelPosition(0,p.forWrappedLinesAfterColumn).lineNumber>=u.modelLineWrappedLineIdx||p.forWrappedLinesBeforeOrAtColumn!==-1&&this.modelLineProjections[u.modelLineNumber-1].getViewPositionOfModelPosition(0,p.forWrappedLinesBeforeOrAtColumn).lineNumber<u.modelLineWrappedLineIdx)return;if(!p.horizontalLine)return p;let _=-1;if(p.column!==-1){const S=this.modelLineProjections[u.modelLineNumber-1].getViewPositionOfModelPosition(0,p.column);if(S.lineNumber===u.modelLineWrappedLineIdx)_=S.column;else if(S.lineNumber<u.modelLineWrappedLineIdx)_=this.getMinColumnOfViewLine(u);else if(S.lineNumber>u.modelLineWrappedLineIdx)return}const b=this.convertModelPositionToViewPosition(u.modelLineNumber,p.horizontalLine.endColumn),y=this.modelLineProjections[u.modelLineNumber-1].getViewPositionOfModelPosition(0,p.horizontalLine.endColumn);return y.lineNumber===u.modelLineWrappedLineIdx?new Ov(p.visibleColumn,_,p.className,new uk(p.horizontalLine.top,b.column),-1,-1):y.lineNumber<u.modelLineWrappedLineIdx||p.visibleColumn!==-1?void 0:new Ov(p.visibleColumn,_,p.className,new uk(p.horizontalLine.top,this.getMaxColumnOfViewLine(u)),-1,-1)});r.push(g.filter(p=>!!p))}}return r}getViewLinesIndentGuides(e,t){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);const i=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),n=this.convertViewPositionToModelPosition(t,this.getViewLineMaxColumn(t));let s=[];const r=[],a=[],l=i.lineNumber-1,c=n.lineNumber-1;let u=null;for(let _=l;_<=c;_++){const b=this.modelLineProjections[_];if(b.isVisible()){const y=b.getViewLineNumberOfModelPosition(0,_===l?i.column:1),S=b.getViewLineNumberOfModelPosition(0,this.model.getLineMaxColumn(_+1)),L=S-y+1;let x=0;L>1&&b.getViewLineMinColumn(this.model,_+1,S)===1&&(x=y===0?1:2),r.push(L),a.push(x),u===null&&(u=new G(_+1,0))}else u!==null&&(s=s.concat(this.model.guides.getLinesIndentGuides(u.lineNumber,_)),u=null)}u!==null&&(s=s.concat(this.model.guides.getLinesIndentGuides(u.lineNumber,n.lineNumber)),u=null);const f=t-e+1,g=new Array(f);let p=0;for(let _=0,b=s.length;_<b;_++){let y=s[_];const S=Math.min(f-p,r[_]),L=a[_];let x;L===2?x=0:L===1?x=1:x=S;for(let k=0;k<S;k++)k===x&&(y=0),g[p++]=y}return g}getViewLineContent(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineContent(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineLength(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineLength(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineMinColumn(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMinColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineMaxColumn(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMaxColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineData(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineData(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLinesData(e,t,i){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);const n=this.projectedModelLineLineCounts.getIndexOf(e-1);let s=e;const r=n.index,a=n.remainder,l=[];for(let c=r,u=this.model.getLineCount();c<u;c++){const f=this.modelLineProjections[c];if(!f.isVisible())continue;const g=c===r?a:0;let p=f.getViewLineCount()-g,_=!1;if(s+p>t&&(_=!0,p=t-s+1),f.getViewLinesData(this.model,c+1,g,p,s-e,i,l),s+=p,_)break}return l}validateViewPosition(e,t,i){e=this._toValidViewLineNumber(e);const n=this.projectedModelLineLineCounts.getIndexOf(e-1),s=n.index,r=n.remainder,a=this.modelLineProjections[s],l=a.getViewLineMinColumn(this.model,s+1,r),c=a.getViewLineMaxColumn(this.model,s+1,r);t<l&&(t=l),t>c&&(t=c);const u=a.getModelColumnOfViewPosition(r,t);return this.model.validatePosition(new G(s+1,u)).equals(i)?new G(e,t):this.convertModelPositionToViewPosition(i.lineNumber,i.column)}validateViewRange(e,t){const i=this.validateViewPosition(e.startLineNumber,e.startColumn,t.getStartPosition()),n=this.validateViewPosition(e.endLineNumber,e.endColumn,t.getEndPosition());return new M(i.lineNumber,i.column,n.lineNumber,n.column)}convertViewPositionToModelPosition(e,t){const i=this.getViewLineInfo(e),n=this.modelLineProjections[i.modelLineNumber-1].getModelColumnOfViewPosition(i.modelLineWrappedLineIdx,t);return this.model.validatePosition(new G(i.modelLineNumber,n))}convertViewRangeToModelRange(e){const t=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),i=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);return new M(t.lineNumber,t.column,i.lineNumber,i.column)}convertModelPositionToViewPosition(e,t,i=2,n=!1,s=!1){const r=this.model.validatePosition(new G(e,t)),a=r.lineNumber,l=r.column;let c=a-1,u=!1;if(s)for(;c<this.modelLineProjections.length&&!this.modelLineProjections[c].isVisible();)c++,u=!0;else for(;c>0&&!this.modelLineProjections[c].isVisible();)c--,u=!0;if(c===0&&!this.modelLineProjections[c].isVisible())return new G(n?0:1,1);const f=1+this.projectedModelLineLineCounts.getPrefixSum(c);let g;return u?s?g=this.modelLineProjections[c].getViewPositionOfModelPosition(f,1,i):g=this.modelLineProjections[c].getViewPositionOfModelPosition(f,this.model.getLineMaxColumn(c+1),i):g=this.modelLineProjections[a-1].getViewPositionOfModelPosition(f,l,i),g}convertModelRangeToViewRange(e,t=0){if(e.isEmpty()){const i=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,t);return M.fromPositions(i)}else{const i=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,1),n=this.convertModelPositionToViewPosition(e.endLineNumber,e.endColumn,0);return new M(i.lineNumber,i.column,n.lineNumber,n.column)}}getViewLineNumberOfModelPosition(e,t){let i=e-1;if(this.modelLineProjections[i].isVisible()){const s=1+this.projectedModelLineLineCounts.getPrefixSum(i);return this.modelLineProjections[i].getViewLineNumberOfModelPosition(s,t)}for(;i>0&&!this.modelLineProjections[i].isVisible();)i--;if(i===0&&!this.modelLineProjections[i].isVisible())return 1;const n=1+this.projectedModelLineLineCounts.getPrefixSum(i);return this.modelLineProjections[i].getViewLineNumberOfModelPosition(n,this.model.getLineMaxColumn(i+1))}getDecorationsInRange(e,t,i,n,s){const r=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),a=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);if(a.lineNumber-r.lineNumber<=e.endLineNumber-e.startLineNumber)return this.model.getDecorationsInRange(new M(r.lineNumber,1,a.lineNumber,a.column),t,i,n,s);let l=[];const c=r.lineNumber-1,u=a.lineNumber-1;let f=null;for(let b=c;b<=u;b++)if(this.modelLineProjections[b].isVisible())f===null&&(f=new G(b+1,b===c?r.column:1));else if(f!==null){const S=this.model.getLineMaxColumn(b);l=l.concat(this.model.getDecorationsInRange(new M(f.lineNumber,f.column,b,S),t,i,n)),f=null}f!==null&&(l=l.concat(this.model.getDecorationsInRange(new M(f.lineNumber,f.column,a.lineNumber,a.column),t,i,n)),f=null),l.sort((b,y)=>{const S=M.compareRangesUsingStarts(b.range,y.range);return S===0?b.id<y.id?-1:b.id>y.id?1:0:S});const g=[];let p=0,_=null;for(const b of l){const y=b.id;_!==y&&(_=y,g[p++]=b)}return g}getInjectedTextAt(e){const t=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[t.modelLineNumber-1].getInjectedTextAt(t.modelLineWrappedLineIdx,e.column)}normalizePosition(e,t){const i=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[i.modelLineNumber-1].normalizePosition(i.modelLineWrappedLineIdx,e,t)}getLineIndentColumn(e){const t=this.getViewLineInfo(e);return t.modelLineWrappedLineIdx===0?this.model.getLineIndentColumn(t.modelLineNumber):0}}function P7e(o){if(o.length===0)return[];const e=o.slice();e.sort(M.compareRangesUsingStarts);const t=[];let i=e[0].startLineNumber,n=e[0].endLineNumber;for(let s=1,r=e.length;s<r;s++){const a=e[s];a.startLineNumber>n+1?(t.push(new M(i,1,n,1)),i=a.startLineNumber,n=a.endLineNumber):a.endLineNumber>n&&(n=a.endLineNumber)}return t.push(new M(i,1,n,1)),t}class Roe{constructor(e,t){this.modelLineNumber=e,this.modelLineWrappedLineIdx=t}}class Moe{constructor(e,t){this.modelRange=e,this.viewLines=t}}class O7e{constructor(e){this._lines=e}convertViewPositionToModelPosition(e){return this._lines.convertViewPositionToModelPosition(e.lineNumber,e.column)}convertViewRangeToModelRange(e){return this._lines.convertViewRangeToModelRange(e)}validateViewPosition(e,t){return this._lines.validateViewPosition(e.lineNumber,e.column,t)}validateViewRange(e,t){return this._lines.validateViewRange(e,t)}convertModelPositionToViewPosition(e,t,i,n){return this._lines.convertModelPositionToViewPosition(e.lineNumber,e.column,t,i,n)}convertModelRangeToViewRange(e,t){return this._lines.convertModelRangeToViewRange(e,t)}modelPositionIsVisible(e){return this._lines.modelPositionIsVisible(e.lineNumber,e.column)}getModelLineViewLineCount(e){return this._lines.getModelLineViewLineCount(e)}getViewLineNumberOfModelPosition(e,t){return this._lines.getViewLineNumberOfModelPosition(e,t)}}class F7e{constructor(e){this.model=e}dispose(){}createCoordinatesConverter(){return new B7e(this)}getHiddenAreas(){return[]}setHiddenAreas(e){return!1}setTabSize(e){return!1}setWrappingSettings(e,t,i,n){return!1}createLineBreaksComputer(){const e=[];return{addRequest:(t,i,n)=>{e.push(null)},finalize:()=>e}}onModelFlushed(){}onModelLinesDeleted(e,t,i){return new oU(t,i)}onModelLinesInserted(e,t,i,n){return new rU(t,i)}onModelLineChanged(e,t,i){return[!1,new Dfe(t,1),null,null]}acceptVersionId(e){}getViewLineCount(){return this.model.getLineCount()}getActiveIndentGuide(e,t,i){return{startLineNumber:e,endLineNumber:e,indent:0}}getViewLinesBracketGuides(e,t,i){return new Array(t-e+1).fill([])}getViewLinesIndentGuides(e,t){const i=t-e+1,n=new Array(i);for(let s=0;s<i;s++)n[s]=0;return n}getViewLineContent(e){return this.model.getLineContent(e)}getViewLineLength(e){return this.model.getLineLength(e)}getViewLineMinColumn(e){return this.model.getLineMinColumn(e)}getViewLineMaxColumn(e){return this.model.getLineMaxColumn(e)}getViewLineData(e){const t=this.model.tokenization.getLineTokens(e),i=t.getLineContent();return new wG(i,!1,1,i.length+1,0,t.inflate(),null)}getViewLinesData(e,t,i){const n=this.model.getLineCount();e=Math.min(Math.max(1,e),n),t=Math.min(Math.max(1,t),n);const s=[];for(let r=e;r<=t;r++){const a=r-e;s[a]=i[a]?this.getViewLineData(r):null}return s}getDecorationsInRange(e,t,i,n,s){return this.model.getDecorationsInRange(e,t,i,n,s)}normalizePosition(e,t){return this.model.normalizePosition(e,t)}getLineIndentColumn(e){return this.model.getLineIndentColumn(e)}getInjectedTextAt(e){return null}}class B7e{constructor(e){this._lines=e}_validPosition(e){return this._lines.model.validatePosition(e)}_validRange(e){return this._lines.model.validateRange(e)}convertViewPositionToModelPosition(e){return this._validPosition(e)}convertViewRangeToModelRange(e){return this._validRange(e)}validateViewPosition(e,t){return this._validPosition(t)}validateViewRange(e,t){return this._validRange(t)}convertModelPositionToViewPosition(e){return this._validPosition(e)}convertModelRangeToViewRange(e){return this._validRange(e)}modelPositionIsVisible(e){const t=this._lines.model.getLineCount();return!(e.lineNumber<1||e.lineNumber>t)}getModelLineViewLineCount(e){return 1}getViewLineNumberOfModelPosition(e,t){return e}}const X_=cd.Right;class W7e{constructor(e){this.persist=0,this._requiredLanes=1,this.lanes=new Uint8Array(Math.ceil((e+1)*X_/8))}reset(e){const t=Math.ceil((e+1)*X_/8);this.lanes.length<t?this.lanes=new Uint8Array(t):this.lanes.fill(0),this._requiredLanes=1}get requiredLanes(){return this._requiredLanes}push(e,t,i){i&&(this.persist|=1<<e-1);for(let n=t.startLineNumber;n<=t.endLineNumber;n++){const s=X_*n+(e-1);this.lanes[s>>>3]|=1<<s%8,this._requiredLanes=Math.max(this._requiredLanes,this.countAtLine(n))}}getLanesAtLine(e){const t=[];let i=X_*e;for(let n=0;n<X_;n++)(this.persist&1<<n||this.lanes[i>>>3]&1<<i%8)&&t.push(n+1),i++;return t.length?t:[cd.Center]}countAtLine(e){let t=X_*e,i=0;for(let n=0;n<X_;n++)(this.persist&1<<n||this.lanes[t>>>3]&1<<t%8)&&i++,t++;return i}}let H7e=class extends X{constructor(e,t,i,n,s,r,a,l,c,u){if(super(),this.languageConfigurationService=a,this._themeService=l,this._attachedView=c,this._transactionalTarget=u,this.hiddenAreasModel=new z7e,this.previousHiddenAreas=[],this._editorId=e,this._configuration=t,this.model=i,this._eventDispatcher=new u7e,this.onEvent=this._eventDispatcher.onEvent,this.cursorConfig=new sw(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._updateConfigurationViewLineCount=this._register(new Oi(()=>this._updateConfigurationViewLineCountNow(),0)),this._hasFocus=!1,this._viewportStart=$G.create(this.model),this.glyphLanes=new W7e(0),this.model.isTooLargeForTokenization())this._lines=new F7e(this.model);else{const f=this._configuration.options,g=f.get(50),p=f.get(140),_=f.get(147),b=f.get(139),y=f.get(130);this._lines=new A7e(this._editorId,this.model,n,s,g,this.model.getOptions().tabSize,p,_.wrappingColumn,b,y)}this.coordinatesConverter=this._lines.createCoordinatesConverter(),this._cursor=this._register(new w7e(i,this,this.coordinatesConverter,this.cursorConfig)),this.viewLayout=this._register(new T7e(this._configuration,this.getLineCount(),r)),this._register(this.viewLayout.onDidScroll(f=>{f.scrollTopChanged&&this._handleVisibleLinesChanged(),f.scrollTopChanged&&this._viewportStart.invalidate(),this._eventDispatcher.emitSingleViewEvent(new r7e(f)),this._eventDispatcher.emitOutgoingEvent(new HG(f.oldScrollWidth,f.oldScrollLeft,f.oldScrollHeight,f.oldScrollTop,f.scrollWidth,f.scrollLeft,f.scrollHeight,f.scrollTop))})),this._register(this.viewLayout.onDidContentSizeChange(f=>{this._eventDispatcher.emitOutgoingEvent(f)})),this._decorations=new N7e(this._editorId,this.model,this._configuration,this._lines,this.coordinatesConverter),this._registerModelEvents(),this._register(this._configuration.onDidChangeFast(f=>{try{const g=this._eventDispatcher.beginEmitViewEvents();this._onConfigurationChanged(g,f)}finally{this._eventDispatcher.endEmitViewEvents()}})),this._register(HP.getInstance().onDidChange(()=>{this._eventDispatcher.emitSingleViewEvent(new c7e)})),this._register(this._themeService.onDidColorThemeChange(f=>{this._invalidateDecorationsColorCache(),this._eventDispatcher.emitSingleViewEvent(new a7e(f))})),this._updateConfigurationViewLineCountNow()}dispose(){super.dispose(),this._decorations.dispose(),this._lines.dispose(),this._viewportStart.dispose(),this._eventDispatcher.dispose()}createLineBreaksComputer(){return this._lines.createLineBreaksComputer()}addViewEventHandler(e){this._eventDispatcher.addViewEventHandler(e)}removeViewEventHandler(e){this._eventDispatcher.removeViewEventHandler(e)}_updateConfigurationViewLineCountNow(){this._configuration.setViewLineCount(this._lines.getViewLineCount())}getModelVisibleRanges(){const e=this.viewLayout.getLinesViewportData(),t=new M(e.startLineNumber,this.getLineMinColumn(e.startLineNumber),e.endLineNumber,this.getLineMaxColumn(e.endLineNumber));return this._toModelVisibleRanges(t)}visibleLinesStabilized(){const e=this.getModelVisibleRanges();this._attachedView.setVisibleLines(e,!0)}_handleVisibleLinesChanged(){const e=this.getModelVisibleRanges();this._attachedView.setVisibleLines(e,!1)}setHasFocus(e){this._hasFocus=e,this._cursor.setHasFocus(e),this._eventDispatcher.emitSingleViewEvent(new s7e(e)),this._eventDispatcher.emitOutgoingEvent(new WG(!e,e))}onCompositionStart(){this._eventDispatcher.emitSingleViewEvent(new e7e)}onCompositionEnd(){this._eventDispatcher.emitSingleViewEvent(new t7e)}_captureStableViewport(){if(this._viewportStart.isValid&&this.viewLayout.getCurrentScrollTop()>0){const e=new G(this._viewportStart.viewLineNumber,this.getLineMinColumn(this._viewportStart.viewLineNumber)),t=this.coordinatesConverter.convertViewPositionToModelPosition(e);return new Poe(t,this._viewportStart.startLineDelta)}return new Poe(null,0)}_onConfigurationChanged(e,t){const i=this._captureStableViewport(),n=this._configuration.options,s=n.get(50),r=n.get(140),a=n.get(147),l=n.get(139),c=n.get(130);this._lines.setWrappingSettings(s,r,a.wrappingColumn,l,c)&&(e.emitViewEvent(new AR),e.emitViewEvent(new PR),e.emitViewEvent(new Z_(null)),this._cursor.onLineMappingChanged(e),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this._updateConfigurationViewLineCount.schedule()),t.hasChanged(92)&&(this._decorations.reset(),e.emitViewEvent(new Z_(null))),t.hasChanged(99)&&(this._decorations.reset(),e.emitViewEvent(new Z_(null))),e.emitViewEvent(new i7e(t)),this.viewLayout.onConfigurationChanged(t),i.recoverViewportStart(this.coordinatesConverter,this.viewLayout),sw.shouldRecreate(t)&&(this.cursorConfig=new sw(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig))}_registerModelEvents(){this._register(this.model.onDidChangeContentOrInjectedText(e=>{try{const i=this._eventDispatcher.beginEmitViewEvents();let n=!1,s=!1;const r=e instanceof eb?e.rawContentChangedEvent.changes:e.changes,a=e instanceof eb?e.rawContentChangedEvent.versionId:null,l=this._lines.createLineBreaksComputer();for(const f of r)switch(f.changeType){case 4:{for(let g=0;g<f.detail.length;g++){const p=f.detail[g];let _=f.injectedTexts[g];_&&(_=_.filter(b=>!b.ownerId||b.ownerId===this._editorId)),l.addRequest(p,_,null)}break}case 2:{let g=null;f.injectedText&&(g=f.injectedText.filter(p=>!p.ownerId||p.ownerId===this._editorId)),l.addRequest(f.detail,g,null);break}}const c=l.finalize(),u=new Cg(c);for(const f of r)switch(f.changeType){case 1:{this._lines.onModelFlushed(),i.emitViewEvent(new AR),this._decorations.reset(),this.viewLayout.onFlushed(this.getLineCount()),n=!0;break}case 3:{const g=this._lines.onModelLinesDeleted(a,f.fromLineNumber,f.toLineNumber);g!==null&&(i.emitViewEvent(g),this.viewLayout.onLinesDeleted(g.fromLineNumber,g.toLineNumber)),n=!0;break}case 4:{const g=u.takeCount(f.detail.length),p=this._lines.onModelLinesInserted(a,f.fromLineNumber,f.toLineNumber,g);p!==null&&(i.emitViewEvent(p),this.viewLayout.onLinesInserted(p.fromLineNumber,p.toLineNumber)),n=!0;break}case 2:{const g=u.dequeue(),[p,_,b,y]=this._lines.onModelLineChanged(a,f.lineNumber,g);s=p,_&&i.emitViewEvent(_),b&&(i.emitViewEvent(b),this.viewLayout.onLinesInserted(b.fromLineNumber,b.toLineNumber)),y&&(i.emitViewEvent(y),this.viewLayout.onLinesDeleted(y.fromLineNumber,y.toLineNumber));break}case 5:break}a!==null&&this._lines.acceptVersionId(a),this.viewLayout.onHeightMaybeChanged(),!n&&s&&(i.emitViewEvent(new PR),i.emitViewEvent(new Z_(null)),this._cursor.onLineMappingChanged(i),this._decorations.onLineMappingChanged())}finally{this._eventDispatcher.endEmitViewEvents()}const t=this._viewportStart.isValid;if(this._viewportStart.invalidate(),this._configuration.setModelLineCount(this.model.getLineCount()),this._updateConfigurationViewLineCountNow(),!this._hasFocus&&this.model.getAttachedEditorCount()>=2&&t){const i=this.model._getTrackedRange(this._viewportStart.modelTrackedRange);if(i){const n=this.coordinatesConverter.convertModelPositionToViewPosition(i.getStartPosition()),s=this.viewLayout.getVerticalOffsetForLineNumber(n.lineNumber);this.viewLayout.setScrollPosition({scrollTop:s+this._viewportStart.startLineDelta},1)}}try{const i=this._eventDispatcher.beginEmitViewEvents();e instanceof eb&&i.emitOutgoingEvent(new b7e(e.contentChangedEvent)),this._cursor.onModelContentChanged(i,e)}finally{this._eventDispatcher.endEmitViewEvents()}this._handleVisibleLinesChanged()})),this._register(this.model.onDidChangeTokens(e=>{const t=[];for(let i=0,n=e.ranges.length;i<n;i++){const s=e.ranges[i],r=this.coordinatesConverter.convertModelPositionToViewPosition(new G(s.fromLineNumber,1)).lineNumber,a=this.coordinatesConverter.convertModelPositionToViewPosition(new G(s.toLineNumber,this.model.getLineMaxColumn(s.toLineNumber))).lineNumber;t[i]={fromLineNumber:r,toLineNumber:a}}this._eventDispatcher.emitSingleViewEvent(new l7e(t)),this._eventDispatcher.emitOutgoingEvent(new y7e(e))})),this._register(this.model.onDidChangeLanguageConfiguration(e=>{this._eventDispatcher.emitSingleViewEvent(new o7e),this.cursorConfig=new sw(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new v7e(e))})),this._register(this.model.onDidChangeLanguage(e=>{this.cursorConfig=new sw(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new _7e(e))})),this._register(this.model.onDidChangeOptions(e=>{if(this._lines.setTabSize(this.model.getOptions().tabSize)){try{const t=this._eventDispatcher.beginEmitViewEvents();t.emitViewEvent(new AR),t.emitViewEvent(new PR),t.emitViewEvent(new Z_(null)),this._cursor.onLineMappingChanged(t),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule()}this.cursorConfig=new sw(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new C7e(e))})),this._register(this.model.onDidChangeDecorations(e=>{this._decorations.onModelDecorationsChanged(),this._eventDispatcher.emitSingleViewEvent(new Z_(e)),this._eventDispatcher.emitOutgoingEvent(new m7e(e))}))}setHiddenAreas(e,t){var r;this.hiddenAreasModel.setHiddenAreas(t,e);const i=this.hiddenAreasModel.getMergedRanges();if(i===this.previousHiddenAreas)return;this.previousHiddenAreas=i;const n=this._captureStableViewport();let s=!1;try{const a=this._eventDispatcher.beginEmitViewEvents();s=this._lines.setHiddenAreas(i),s&&(a.emitViewEvent(new AR),a.emitViewEvent(new PR),a.emitViewEvent(new Z_(null)),this._cursor.onLineMappingChanged(a),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.onHeightMaybeChanged());const l=(r=n.viewportStartModelPosition)==null?void 0:r.lineNumber;l&&i.some(u=>u.startLineNumber<=l&&l<=u.endLineNumber)||n.recoverViewportStart(this.coordinatesConverter,this.viewLayout)}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule(),s&&this._eventDispatcher.emitOutgoingEvent(new g7e)}getVisibleRangesPlusViewportAboveBelow(){const e=this._configuration.options.get(146),t=this._configuration.options.get(67),i=Math.max(20,Math.round(e.height/t)),n=this.viewLayout.getLinesViewportData(),s=Math.max(1,n.completelyVisibleStartLineNumber-i),r=Math.min(this.getLineCount(),n.completelyVisibleEndLineNumber+i);return this._toModelVisibleRanges(new M(s,this.getLineMinColumn(s),r,this.getLineMaxColumn(r)))}getVisibleRanges(){const e=this.getCompletelyVisibleViewRange();return this._toModelVisibleRanges(e)}getHiddenAreas(){return this._lines.getHiddenAreas()}_toModelVisibleRanges(e){const t=this.coordinatesConverter.convertViewRangeToModelRange(e),i=this._lines.getHiddenAreas();if(i.length===0)return[t];const n=[];let s=0,r=t.startLineNumber,a=t.startColumn;const l=t.endLineNumber,c=t.endColumn;for(let u=0,f=i.length;u<f;u++){const g=i[u].startLineNumber,p=i[u].endLineNumber;p<r||g>l||(r<g&&(n[s++]=new M(r,a,g-1,this.model.getLineMaxColumn(g-1))),r=p+1,a=1)}return(r<l||r===l&&a<c)&&(n[s++]=new M(r,a,l,c)),n}getCompletelyVisibleViewRange(){const e=this.viewLayout.getLinesViewportData(),t=e.completelyVisibleStartLineNumber,i=e.completelyVisibleEndLineNumber;return new M(t,this.getLineMinColumn(t),i,this.getLineMaxColumn(i))}getCompletelyVisibleViewRangeAtScrollTop(e){const t=this.viewLayout.getLinesViewportDataAtScrollTop(e),i=t.completelyVisibleStartLineNumber,n=t.completelyVisibleEndLineNumber;return new M(i,this.getLineMinColumn(i),n,this.getLineMaxColumn(n))}saveState(){const e=this.viewLayout.saveState(),t=e.scrollTop,i=this.viewLayout.getLineNumberAtVerticalOffset(t),n=this.coordinatesConverter.convertViewPositionToModelPosition(new G(i,this.getLineMinColumn(i))),s=this.viewLayout.getVerticalOffsetForLineNumber(i)-t;return{scrollLeft:e.scrollLeft,firstPosition:n,firstPositionDeltaTop:s}}reduceRestoreState(e){if(typeof e.firstPosition>"u")return this._reduceRestoreStateCompatibility(e);const t=this.model.validatePosition(e.firstPosition),i=this.coordinatesConverter.convertModelPositionToViewPosition(t),n=this.viewLayout.getVerticalOffsetForLineNumber(i.lineNumber)-e.firstPositionDeltaTop;return{scrollLeft:e.scrollLeft,scrollTop:n}}_reduceRestoreStateCompatibility(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTopWithoutViewZones}}getTabSize(){return this.model.getOptions().tabSize}getLineCount(){return this._lines.getViewLineCount()}setViewport(e,t,i){this._viewportStart.update(this,e)}getActiveIndentGuide(e,t,i){return this._lines.getActiveIndentGuide(e,t,i)}getLinesIndentGuides(e,t){return this._lines.getViewLinesIndentGuides(e,t)}getBracketGuidesInRangeByLine(e,t,i,n){return this._lines.getViewLinesBracketGuides(e,t,i,n)}getLineContent(e){return this._lines.getViewLineContent(e)}getLineLength(e){return this._lines.getViewLineLength(e)}getLineMinColumn(e){return this._lines.getViewLineMinColumn(e)}getLineMaxColumn(e){return this._lines.getViewLineMaxColumn(e)}getLineFirstNonWhitespaceColumn(e){const t=Sr(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){const t=au(this.getLineContent(e));return t===-1?0:t+2}getMinimapDecorationsInRange(e){return this._decorations.getMinimapDecorationsInRange(e)}getDecorationsInViewport(e){return this._decorations.getDecorationsViewportData(e).decorations}getInjectedTextAt(e){return this._lines.getInjectedTextAt(e)}getViewportViewLineRenderingData(e,t){const n=this._decorations.getDecorationsViewportData(e).inlineDecorations[t-e.startLineNumber];return this._getViewLineRenderingData(t,n)}getViewLineRenderingData(e){const t=this._decorations.getInlineDecorationsOnLine(e);return this._getViewLineRenderingData(e,t)}_getViewLineRenderingData(e,t){const i=this.model.mightContainRTL(),n=this.model.mightContainNonBasicASCII(),s=this.getTabSize(),r=this._lines.getViewLineData(e);return r.inlineDecorations&&(t=[...t,...r.inlineDecorations.map(a=>a.toInlineDecoration(e))]),new ql(r.minColumn,r.maxColumn,r.content,r.continuesWithWrappedLine,i,n,r.tokens,t,s,r.startVisibleColumn)}getViewLineData(e){return this._lines.getViewLineData(e)}getMinimapLinesRenderingData(e,t,i){const n=this._lines.getViewLinesData(e,t,i);return new xBe(this.getTabSize(),n)}getAllOverviewRulerDecorations(e){const t=this.model.getOverviewRulerDecorations(this._editorId,rA(this._configuration.options)),i=new V7e;for(const n of t){const s=n.options,r=s.overviewRuler;if(!r)continue;const a=r.position;if(a===0)continue;const l=r.getColor(e.value),c=this.coordinatesConverter.getViewLineNumberOfModelPosition(n.range.startLineNumber,n.range.startColumn),u=this.coordinatesConverter.getViewLineNumberOfModelPosition(n.range.endLineNumber,n.range.endColumn);i.accept(l,s.zIndex,c,u,a)}return i.asArray}_invalidateDecorationsColorCache(){const e=this.model.getOverviewRulerDecorations();for(const t of e){const i=t.options.overviewRuler;i==null||i.invalidateCachedColor();const n=t.options.minimap;n==null||n.invalidateCachedColor()}}getValueInRange(e,t){const i=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueInRange(i,t)}getValueLengthInRange(e,t){const i=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueLengthInRange(i,t)}modifyPosition(e,t){const i=this.coordinatesConverter.convertViewPositionToModelPosition(e),n=this.model.modifyPosition(i,t);return this.coordinatesConverter.convertModelPositionToViewPosition(n)}deduceModelPositionRelativeToViewPosition(e,t,i){const n=this.coordinatesConverter.convertViewPositionToModelPosition(e);this.model.getEOL().length===2&&(t<0?t-=i:t+=i);const r=this.model.getOffsetAt(n)+t;return this.model.getPositionAt(r)}getPlainTextToCopy(e,t,i){const n=i?`\r
`:this.model.getEOL();e=e.slice(0),e.sort(M.compareRangesUsingStarts);let s=!1,r=!1;for(const l of e)l.isEmpty()?s=!0:r=!0;if(!r){if(!t)return"";const l=e.map(u=>u.startLineNumber);let c="";for(let u=0;u<l.length;u++)u>0&&l[u-1]===l[u]||(c+=this.model.getLineContent(l[u])+n);return c}if(s&&t){const l=[];let c=0;for(const u of e){const f=u.startLineNumber;u.isEmpty()?f!==c&&l.push(this.model.getLineContent(f)):l.push(this.model.getValueInRange(u,i?2:0)),c=f}return l.length===1?l[0]:l}const a=[];for(const l of e)l.isEmpty()||a.push(this.model.getValueInRange(l,i?2:0));return a.length===1?a[0]:a}getRichTextToCopy(e,t){const i=this.model.getLanguageId();if(i===Xr||e.length!==1)return null;let n=e[0];if(n.isEmpty()){if(!t)return null;const u=n.startLineNumber;n=new M(u,this.model.getLineMinColumn(u),u,this.model.getLineMaxColumn(u))}const s=this._configuration.options.get(50),r=this._getColorMap(),l=/[:;\\\/<>]/.test(s.fontFamily)||s.fontFamily===Zr.fontFamily;let c;return l?c=Zr.fontFamily:(c=s.fontFamily,c=c.replace(/"/g,"'"),/[,']/.test(c)||/[+ ]/.test(c)&&(c=`'${c}'`),c=`${c}, ${Zr.fontFamily}`),{mode:i,html:`<div style="color: ${r[1]};background-color: ${r[2]};font-family: ${c};font-weight: ${s.fontWeight};font-size: ${s.fontSize}px;line-height: ${s.lineHeight}px;white-space: pre;">`+this._getHTMLToCopy(n,r)+"</div>"}}_getHTMLToCopy(e,t){const i=e.startLineNumber,n=e.startColumn,s=e.endLineNumber,r=e.endColumn,a=this.getTabSize();let l="";for(let c=i;c<=s;c++){const u=this.model.tokenization.getLineTokens(c),f=u.getLineContent(),g=c===i?n-1:0,p=c===s?r-1:f.length;f===""?l+="<br>":l+=JAe(f,u.inflate(),t,g,p,a,Po)}return l}_getColorMap(){const e=Kn.getColorMap(),t=["#000000"];if(e)for(let i=1,n=e.length;i<n;i++)t[i]=ue.Format.CSS.formatHex(e[i]);return t}getPrimaryCursorState(){return this._cursor.getPrimaryCursorState()}getLastAddedCursorIndex(){return this._cursor.getLastAddedCursorIndex()}getCursorStates(){return this._cursor.getCursorStates()}setCursorStates(e,t,i){return this._withViewEventsCollector(n=>this._cursor.setStates(n,e,t,i))}getCursorColumnSelectData(){return this._cursor.getCursorColumnSelectData()}getCursorAutoClosedCharacters(){return this._cursor.getAutoClosedCharacters()}setCursorColumnSelectData(e){this._cursor.setCursorColumnSelectData(e)}getPrevEditOperationType(){return this._cursor.getPrevEditOperationType()}setPrevEditOperationType(e){this._cursor.setPrevEditOperationType(e)}getSelection(){return this._cursor.getSelection()}getSelections(){return this._cursor.getSelections()}getPosition(){return this._cursor.getPrimaryCursorState().modelState.position}setSelections(e,t,i=0){this._withViewEventsCollector(n=>this._cursor.setSelections(n,e,t,i))}saveCursorState(){return this._cursor.saveState()}restoreCursorState(e){this._withViewEventsCollector(t=>this._cursor.restoreState(t,e))}_executeCursorEdit(e){if(this._cursor.context.cursorConfig.readOnly){this._eventDispatcher.emitOutgoingEvent(new p7e);return}this._withViewEventsCollector(e)}executeEdits(e,t,i){this._executeCursorEdit(n=>this._cursor.executeEdits(n,e,t,i))}startComposition(){this._executeCursorEdit(e=>this._cursor.startComposition(e))}endComposition(e){this._executeCursorEdit(t=>this._cursor.endComposition(t,e))}type(e,t){this._executeCursorEdit(i=>this._cursor.type(i,e,t))}compositionType(e,t,i,n,s){this._executeCursorEdit(r=>this._cursor.compositionType(r,e,t,i,n,s))}paste(e,t,i,n){this._executeCursorEdit(s=>this._cursor.paste(s,e,t,i,n))}cut(e){this._executeCursorEdit(t=>this._cursor.cut(t,e))}executeCommand(e,t){this._executeCursorEdit(i=>this._cursor.executeCommand(i,e,t))}executeCommands(e,t){this._executeCursorEdit(i=>this._cursor.executeCommands(i,e,t))}revealAllCursors(e,t,i=!1){this._withViewEventsCollector(n=>this._cursor.revealAll(n,e,i,0,t,0))}revealPrimaryCursor(e,t,i=!1){this._withViewEventsCollector(n=>this._cursor.revealPrimary(n,e,i,0,t,0))}revealTopMostCursor(e){const t=this._cursor.getTopMostViewPosition(),i=new M(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(n=>n.emitViewEvent(new Dk(e,!1,i,null,0,!0,0)))}revealBottomMostCursor(e){const t=this._cursor.getBottomMostViewPosition(),i=new M(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(n=>n.emitViewEvent(new Dk(e,!1,i,null,0,!0,0)))}revealRange(e,t,i,n,s){this._withViewEventsCollector(r=>r.emitViewEvent(new Dk(e,!1,i,null,n,t,s)))}changeWhitespace(e){this.viewLayout.changeWhitespace(e)&&(this._eventDispatcher.emitSingleViewEvent(new d7e),this._eventDispatcher.emitOutgoingEvent(new f7e))}_withViewEventsCollector(e){return this._transactionalTarget.batchChanges(()=>{try{const t=this._eventDispatcher.beginEmitViewEvents();return e(t)}finally{this._eventDispatcher.endEmitViewEvents()}})}batchEvents(e){this._withViewEventsCollector(()=>{e()})}normalizePosition(e,t){return this._lines.normalizePosition(e,t)}getLineIndentColumn(e){return this._lines.getLineIndentColumn(e)}};class $G{static create(e){const t=e._setTrackedRange(null,new M(1,1,1,1),1);return new $G(e,1,!1,t,0)}get viewLineNumber(){return this._viewLineNumber}get isValid(){return this._isValid}get modelTrackedRange(){return this._modelTrackedRange}get startLineDelta(){return this._startLineDelta}constructor(e,t,i,n,s){this._model=e,this._viewLineNumber=t,this._isValid=i,this._modelTrackedRange=n,this._startLineDelta=s}dispose(){this._model._setTrackedRange(this._modelTrackedRange,null,1)}update(e,t){const i=e.coordinatesConverter.convertViewPositionToModelPosition(new G(t,e.getLineMinColumn(t))),n=e.model._setTrackedRange(this._modelTrackedRange,new M(i.lineNumber,i.column,i.lineNumber,i.column),1),s=e.viewLayout.getVerticalOffsetForLineNumber(t),r=e.viewLayout.getCurrentScrollTop();this._viewLineNumber=t,this._isValid=!0,this._modelTrackedRange=n,this._startLineDelta=r-s}invalidate(){this._isValid=!1}}class V7e{constructor(){this._asMap=Object.create(null),this.asArray=[]}accept(e,t,i,n,s){const r=this._asMap[e];if(r){const a=r.data,l=a[a.length-3],c=a[a.length-1];if(l===s&&c+1>=i){n>c&&(a[a.length-1]=n);return}a.push(s,i,n)}else{const a=new ZD(e,t,[s,i,n]);this._asMap[e]=a,this.asArray.push(a)}}}class z7e{constructor(){this.hiddenAreas=new Map,this.shouldRecompute=!1,this.ranges=[]}setHiddenAreas(e,t){const i=this.hiddenAreas.get(e);i&&Aoe(i,t)||(this.hiddenAreas.set(e,t),this.shouldRecompute=!0)}getMergedRanges(){if(!this.shouldRecompute)return this.ranges;this.shouldRecompute=!1;const e=Array.from(this.hiddenAreas.values()).reduce((t,i)=>U7e(t,i),[]);return Aoe(this.ranges,e)?this.ranges:(this.ranges=e,this.ranges)}}function U7e(o,e){const t=[];let i=0,n=0;for(;i<o.length&&n<e.length;){const s=o[i],r=e[n];if(s.endLineNumber<r.startLineNumber-1)t.push(o[i++]);else if(r.endLineNumber<s.startLineNumber-1)t.push(e[n++]);else{const a=Math.min(s.startLineNumber,r.startLineNumber),l=Math.max(s.endLineNumber,r.endLineNumber);t.push(new M(a,1,l,1)),i++,n++}}for(;i<o.length;)t.push(o[i++]);for(;n<e.length;)t.push(e[n++]);return t}function Aoe(o,e){if(o.length!==e.length)return!1;for(let t=0;t<o.length;t++)if(!o[t].equalsRange(e[t]))return!1;return!0}class Poe{constructor(e,t){this.viewportStartModelPosition=e,this.startLineDelta=t}recoverViewportStart(e,t){if(!this.viewportStartModelPosition)return;const i=e.convertModelPositionToViewPosition(this.viewportStartModelPosition),n=t.getVerticalOffsetForLineNumber(i.lineNumber);t.setScrollPosition({scrollTop:n+this.startLineDelta},1)}}var $7e=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Sf=function(o,e){return function(t,i){e(t,i,o)}},lv,fb;let oE=(fb=class extends X{get isSimpleWidget(){return this._configuration.isSimpleWidget}get contextMenuId(){return this._configuration.contextMenuId}constructor(e,t,i,n,s,r,a,l,c,u,f,g){super(),this.languageConfigurationService=f,this._deliveryQueue=Zxe(),this._contributions=this._register(new ZHe),this._onDidDispose=this._register(new Y),this.onDidDispose=this._onDidDispose.event,this._onDidChangeModelContent=this._register(new Y({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelContent=this._onDidChangeModelContent.event,this._onDidChangeModelLanguage=this._register(new Y({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelLanguage=this._onDidChangeModelLanguage.event,this._onDidChangeModelLanguageConfiguration=this._register(new Y({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelLanguageConfiguration=this._onDidChangeModelLanguageConfiguration.event,this._onDidChangeModelOptions=this._register(new Y({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelOptions=this._onDidChangeModelOptions.event,this._onDidChangeModelDecorations=this._register(new Y({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelDecorations=this._onDidChangeModelDecorations.event,this._onDidChangeModelTokens=this._register(new Y({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelTokens=this._onDidChangeModelTokens.event,this._onDidChangeConfiguration=this._register(new Y({deliveryQueue:this._deliveryQueue})),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._onWillChangeModel=this._register(new Y({deliveryQueue:this._deliveryQueue})),this.onWillChangeModel=this._onWillChangeModel.event,this._onDidChangeModel=this._register(new Y({deliveryQueue:this._deliveryQueue})),this.onDidChangeModel=this._onDidChangeModel.event,this._onDidChangeCursorPosition=this._register(new Y({deliveryQueue:this._deliveryQueue})),this.onDidChangeCursorPosition=this._onDidChangeCursorPosition.event,this._onDidChangeCursorSelection=this._register(new Y({deliveryQueue:this._deliveryQueue})),this.onDidChangeCursorSelection=this._onDidChangeCursorSelection.event,this._onDidAttemptReadOnlyEdit=this._register(new hr(this._contributions,this._deliveryQueue)),this.onDidAttemptReadOnlyEdit=this._onDidAttemptReadOnlyEdit.event,this._onDidLayoutChange=this._register(new Y({deliveryQueue:this._deliveryQueue})),this.onDidLayoutChange=this._onDidLayoutChange.event,this._editorTextFocus=this._register(new Ooe({deliveryQueue:this._deliveryQueue})),this.onDidFocusEditorText=this._editorTextFocus.onDidChangeToTrue,this.onDidBlurEditorText=this._editorTextFocus.onDidChangeToFalse,this._editorWidgetFocus=this._register(new Ooe({deliveryQueue:this._deliveryQueue})),this.onDidFocusEditorWidget=this._editorWidgetFocus.onDidChangeToTrue,this.onDidBlurEditorWidget=this._editorWidgetFocus.onDidChangeToFalse,this._onWillType=this._register(new hr(this._contributions,this._deliveryQueue)),this.onWillType=this._onWillType.event,this._onDidType=this._register(new hr(this._contributions,this._deliveryQueue)),this.onDidType=this._onDidType.event,this._onDidCompositionStart=this._register(new hr(this._contributions,this._deliveryQueue)),this.onDidCompositionStart=this._onDidCompositionStart.event,this._onDidCompositionEnd=this._register(new hr(this._contributions,this._deliveryQueue)),this.onDidCompositionEnd=this._onDidCompositionEnd.event,this._onDidPaste=this._register(new hr(this._contributions,this._deliveryQueue)),this.onDidPaste=this._onDidPaste.event,this._onMouseUp=this._register(new hr(this._contributions,this._deliveryQueue)),this.onMouseUp=this._onMouseUp.event,this._onMouseDown=this._register(new hr(this._contributions,this._deliveryQueue)),this.onMouseDown=this._onMouseDown.event,this._onMouseDrag=this._register(new hr(this._contributions,this._deliveryQueue)),this.onMouseDrag=this._onMouseDrag.event,this._onMouseDrop=this._register(new hr(this._contributions,this._deliveryQueue)),this.onMouseDrop=this._onMouseDrop.event,this._onMouseDropCanceled=this._register(new hr(this._contributions,this._deliveryQueue)),this.onMouseDropCanceled=this._onMouseDropCanceled.event,this._onDropIntoEditor=this._register(new hr(this._contributions,this._deliveryQueue)),this.onDropIntoEditor=this._onDropIntoEditor.event,this._onContextMenu=this._register(new hr(this._contributions,this._deliveryQueue)),this.onContextMenu=this._onContextMenu.event,this._onMouseMove=this._register(new hr(this._contributions,this._deliveryQueue)),this.onMouseMove=this._onMouseMove.event,this._onMouseLeave=this._register(new hr(this._contributions,this._deliveryQueue)),this.onMouseLeave=this._onMouseLeave.event,this._onMouseWheel=this._register(new hr(this._contributions,this._deliveryQueue)),this.onMouseWheel=this._onMouseWheel.event,this._onKeyUp=this._register(new hr(this._contributions,this._deliveryQueue)),this.onKeyUp=this._onKeyUp.event,this._onKeyDown=this._register(new hr(this._contributions,this._deliveryQueue)),this.onKeyDown=this._onKeyDown.event,this._onDidContentSizeChange=this._register(new Y({deliveryQueue:this._deliveryQueue})),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._onDidScrollChange=this._register(new Y({deliveryQueue:this._deliveryQueue})),this.onDidScrollChange=this._onDidScrollChange.event,this._onDidChangeViewZones=this._register(new Y({deliveryQueue:this._deliveryQueue})),this.onDidChangeViewZones=this._onDidChangeViewZones.event,this._onDidChangeHiddenAreas=this._register(new Y({deliveryQueue:this._deliveryQueue})),this.onDidChangeHiddenAreas=this._onDidChangeHiddenAreas.event,this._updateCounter=0,this._onBeginUpdate=this._register(new Y),this.onBeginUpdate=this._onBeginUpdate.event,this._onEndUpdate=this._register(new Y),this.onEndUpdate=this._onEndUpdate.event,this._actions=new Map,this._bannerDomNode=null,this._dropIntoEditorDecorations=this.createDecorationsCollection(),s.willCreateCodeEditor();const p={...t};this._domElement=e,this._overflowWidgetsDomNode=p.overflowWidgetsDomNode,delete p.overflowWidgetsDomNode,this._id=++j7e,this._decorationTypeKeysToIds={},this._decorationTypeSubtypes={},this._telemetryData=i.telemetryData,this._configuration=this._register(this._createConfiguration(i.isSimpleWidget||!1,i.contextMenuId??(i.isSimpleWidget?qe.SimpleEditorContext:qe.EditorContext),p,u)),this._register(this._configuration.onDidChange(y=>{this._onDidChangeConfiguration.fire(y);const S=this._configuration.options;if(y.hasChanged(146)){const L=S.get(146);this._onDidLayoutChange.fire(L)}})),this._contextKeyService=this._register(a.createScoped(this._domElement)),this._notificationService=c,this._codeEditorService=s,this._commandService=r,this._themeService=l,this._register(new K7e(this,this._contextKeyService)),this._register(new G7e(this,this._contextKeyService,g)),this._instantiationService=this._register(n.createChild(new s0([ht,this._contextKeyService]))),this._modelData=null,this._focusTracker=new Y7e(e,this._overflowWidgetsDomNode),this._register(this._focusTracker.onChange(()=>{this._editorWidgetFocus.setValue(this._focusTracker.hasFocus())})),this._contentWidgets={},this._overlayWidgets={},this._glyphMarginWidgets={};let _;Array.isArray(i.contributions)?_=i.contributions:_=Xv.getEditorContributions(),this._contributions.initialize(this,_,this._instantiationService);for(const y of Xv.getEditorActions()){if(this._actions.has(y.id)){wt(new Error(`Cannot have two actions with the same id ${y.id}`));continue}const S=new xfe(y.id,y.label,y.alias,y.metadata,y.precondition??void 0,L=>this._instantiationService.invokeFunction(x=>Promise.resolve(y.runEditorCommand(x,this,L))),this._contextKeyService);this._actions.set(S.id,S)}const b=()=>!this._configuration.options.get(92)&&this._configuration.options.get(36).enabled;this._register(new cEe(this._domElement,{onDragOver:y=>{if(!b())return;const S=this.getTargetAtClientPoint(y.clientX,y.clientY);S!=null&&S.position&&this.showDropIndicatorAt(S.position)},onDrop:async y=>{if(!b()||(this.removeDropIndicator(),!y.dataTransfer))return;const S=this.getTargetAtClientPoint(y.clientX,y.clientY);S!=null&&S.position&&this._onDropIntoEditor.fire({position:S.position,event:y})},onDragLeave:()=>{this.removeDropIndicator()},onDragEnd:()=>{this.removeDropIndicator()}})),this._codeEditorService.addCodeEditor(this)}writeScreenReaderContent(e){var t;(t=this._modelData)==null||t.view.writeScreenReaderContent(e)}_createConfiguration(e,t,i,n){return new Wz(e,t,i,this._domElement,n)}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return _I.ICodeEditor}dispose(){this._codeEditorService.removeCodeEditor(this),this._focusTracker.dispose(),this._actions.clear(),this._contentWidgets={},this._overlayWidgets={},this._removeDecorationTypes(),this._postDetachModelCleanup(this._detachModel()),this._onDidDispose.fire(),super.dispose()}invokeWithinContext(e){return this._instantiationService.invokeFunction(e)}updateOptions(e){this._configuration.updateOptions(e||{})}getOptions(){return this._configuration.options}getOption(e){return this._configuration.options.get(e)}getRawOptions(){return this._configuration.getRawOptions()}getOverflowWidgetsDomNode(){return this._overflowWidgetsDomNode}getConfiguredWordAtPosition(e){return this._modelData?xi.getWordAtPosition(this._modelData.model,this._configuration.options.get(132),this._configuration.options.get(131),e):null}getValue(e=null){if(!this._modelData)return"";const t=!!(e&&e.preserveBOM);let i=0;return e&&e.lineEnding&&e.lineEnding===`
`?i=1:e&&e.lineEnding&&e.lineEnding===`\r
`&&(i=2),this._modelData.model.getValue(i,t)}setValue(e){try{if(this._beginUpdate(),!this._modelData)return;this._modelData.model.setValue(e)}finally{this._endUpdate()}}getModel(){return this._modelData?this._modelData.model:null}setModel(e=null){var t;try{this._beginUpdate();const i=e;if(this._modelData===null&&i===null||this._modelData&&this._modelData.model===i)return;const n={oldModelUrl:((t=this._modelData)==null?void 0:t.model.uri)||null,newModelUrl:(i==null?void 0:i.uri)||null};this._onWillChangeModel.fire(n);const s=this.hasTextFocus(),r=this._detachModel();this._attachModel(i),s&&this.hasModel()&&this.focus(),this._removeDecorationTypes(),this._onDidChangeModel.fire(n),this._postDetachModelCleanup(r),this._contributionsDisposable=this._contributions.onAfterModelAttached()}finally{this._endUpdate()}}_removeDecorationTypes(){if(this._decorationTypeKeysToIds={},this._decorationTypeSubtypes){for(const e in this._decorationTypeSubtypes){const t=this._decorationTypeSubtypes[e];for(const i in t)this._removeDecorationType(e+"-"+i)}this._decorationTypeSubtypes={}}}getVisibleRanges(){return this._modelData?this._modelData.viewModel.getVisibleRanges():[]}getVisibleRangesPlusViewportAboveBelow(){return this._modelData?this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow():[]}getWhitespaces(){return this._modelData?this._modelData.viewModel.viewLayout.getWhitespaces():[]}static _getVerticalOffsetAfterPosition(e,t,i,n){const s=e.model.validatePosition({lineNumber:t,column:i}),r=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(s);return e.viewModel.viewLayout.getVerticalOffsetAfterLineNumber(r.lineNumber,n)}getTopForLineNumber(e,t=!1){return this._modelData?lv._getVerticalOffsetForPosition(this._modelData,e,1,t):-1}getTopForPosition(e,t){return this._modelData?lv._getVerticalOffsetForPosition(this._modelData,e,t,!1):-1}static _getVerticalOffsetForPosition(e,t,i,n=!1){const s=e.model.validatePosition({lineNumber:t,column:i}),r=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(s);return e.viewModel.viewLayout.getVerticalOffsetForLineNumber(r.lineNumber,n)}getBottomForLineNumber(e,t=!1){if(!this._modelData)return-1;const i=this._modelData.model.getLineMaxColumn(e);return lv._getVerticalOffsetAfterPosition(this._modelData,e,i,t)}setHiddenAreas(e,t){var i;(i=this._modelData)==null||i.viewModel.setHiddenAreas(e.map(n=>M.lift(n)),t)}getVisibleColumnFromPosition(e){if(!this._modelData)return e.column;const t=this._modelData.model.validatePosition(e),i=this._modelData.model.getOptions().tabSize;return Fs.visibleColumnFromColumn(this._modelData.model.getLineContent(t.lineNumber),t.column,i)+1}getPosition(){return this._modelData?this._modelData.viewModel.getPosition():null}setPosition(e,t="api"){if(this._modelData){if(!G.isIPosition(e))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(t,[{selectionStartLineNumber:e.lineNumber,selectionStartColumn:e.column,positionLineNumber:e.lineNumber,positionColumn:e.column}])}}_sendRevealRange(e,t,i,n){if(!this._modelData)return;if(!M.isIRange(e))throw new Error("Invalid arguments");const s=this._modelData.model.validateRange(e),r=this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(s);this._modelData.viewModel.revealRange("api",i,r,t,n)}revealLine(e,t=0){this._revealLine(e,0,t)}revealLineInCenter(e,t=0){this._revealLine(e,1,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._revealLine(e,2,t)}revealLineNearTop(e,t=0){this._revealLine(e,5,t)}_revealLine(e,t,i){if(typeof e!="number")throw new Error("Invalid arguments");this._sendRevealRange(new M(e,1,e,1),t,!1,i)}revealPosition(e,t=0){this._revealPosition(e,0,!0,t)}revealPositionInCenter(e,t=0){this._revealPosition(e,1,!0,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._revealPosition(e,2,!0,t)}revealPositionNearTop(e,t=0){this._revealPosition(e,5,!0,t)}_revealPosition(e,t,i,n){if(!G.isIPosition(e))throw new Error("Invalid arguments");this._sendRevealRange(new M(e.lineNumber,e.column,e.lineNumber,e.column),t,i,n)}getSelection(){return this._modelData?this._modelData.viewModel.getSelection():null}getSelections(){return this._modelData?this._modelData.viewModel.getSelections():null}setSelection(e,t="api"){const i=Ke.isISelection(e),n=M.isIRange(e);if(!i&&!n)throw new Error("Invalid arguments");if(i)this._setSelectionImpl(e,t);else if(n){const s={selectionStartLineNumber:e.startLineNumber,selectionStartColumn:e.startColumn,positionLineNumber:e.endLineNumber,positionColumn:e.endColumn};this._setSelectionImpl(s,t)}}_setSelectionImpl(e,t){if(!this._modelData)return;const i=new Ke(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn);this._modelData.viewModel.setSelections(t,[i])}revealLines(e,t,i=0){this._revealLines(e,t,0,i)}revealLinesInCenter(e,t,i=0){this._revealLines(e,t,1,i)}revealLinesInCenterIfOutsideViewport(e,t,i=0){this._revealLines(e,t,2,i)}revealLinesNearTop(e,t,i=0){this._revealLines(e,t,5,i)}_revealLines(e,t,i,n){if(typeof e!="number"||typeof t!="number")throw new Error("Invalid arguments");this._sendRevealRange(new M(e,1,t,1),i,!1,n)}revealRange(e,t=0,i=!1,n=!0){this._revealRange(e,i?1:0,n,t)}revealRangeInCenter(e,t=0){this._revealRange(e,1,!0,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._revealRange(e,2,!0,t)}revealRangeNearTop(e,t=0){this._revealRange(e,5,!0,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._revealRange(e,6,!0,t)}revealRangeAtTop(e,t=0){this._revealRange(e,3,!0,t)}_revealRange(e,t,i,n){if(!M.isIRange(e))throw new Error("Invalid arguments");this._sendRevealRange(M.lift(e),t,i,n)}setSelections(e,t="api",i=0){if(this._modelData){if(!e||e.length===0)throw new Error("Invalid arguments");for(let n=0,s=e.length;n<s;n++)if(!Ke.isISelection(e[n]))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(t,e,i)}}getContentWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getContentWidth():-1}getScrollWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollWidth():-1}getScrollLeft(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollLeft():-1}getContentHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getContentHeight():-1}getScrollHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollHeight():-1}getScrollTop(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollTop():-1}setScrollLeft(e,t=1){if(this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollLeft:e},t)}}setScrollTop(e,t=1){if(this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollTop:e},t)}}setScrollPosition(e,t=1){this._modelData&&this._modelData.viewModel.viewLayout.setScrollPosition(e,t)}hasPendingScrollAnimation(){return this._modelData?this._modelData.viewModel.viewLayout.hasPendingScrollAnimation():!1}saveViewState(){if(!this._modelData)return null;const e=this._contributions.saveViewState(),t=this._modelData.viewModel.saveCursorState(),i=this._modelData.viewModel.saveState();return{cursorState:t,viewState:i,contributionsState:e}}restoreViewState(e){if(!this._modelData||!this._modelData.hasRealView)return;const t=e;if(t&&t.cursorState&&t.viewState){const i=t.cursorState;Array.isArray(i)?i.length>0&&this._modelData.viewModel.restoreCursorState(i):this._modelData.viewModel.restoreCursorState([i]),this._contributions.restoreViewState(t.contributionsState||{});const n=this._modelData.viewModel.reduceRestoreState(t.viewState);this._modelData.view.restoreState(n)}}handleInitialized(){var e;(e=this._getViewModel())==null||e.visibleLinesStabilized()}getContribution(e){return this._contributions.get(e)}getActions(){return Array.from(this._actions.values())}getSupportedActions(){let e=this.getActions();return e=e.filter(t=>t.isSupported()),e}getAction(e){return this._actions.get(e)||null}trigger(e,t,i){i=i||{};try{switch(this._beginUpdate(),t){case"compositionStart":this._startComposition();return;case"compositionEnd":this._endComposition(e);return;case"type":{const s=i;this._type(e,s.text||"");return}case"replacePreviousChar":{const s=i;this._compositionType(e,s.text||"",s.replaceCharCnt||0,0,0);return}case"compositionType":{const s=i;this._compositionType(e,s.text||"",s.replacePrevCharCnt||0,s.replaceNextCharCnt||0,s.positionDelta||0);return}case"paste":{const s=i;this._paste(e,s.text||"",s.pasteOnNewLine||!1,s.multicursorText||null,s.mode||null,s.clipboardEvent);return}case"cut":this._cut(e);return}const n=this.getAction(t);if(n){Promise.resolve(n.run(i)).then(void 0,wt);return}if(!this._modelData||this._triggerEditorCommand(e,t,i))return;this._triggerCommand(t,i)}finally{this._endUpdate()}}_triggerCommand(e,t){this._commandService.executeCommand(e,t)}_startComposition(){this._modelData&&(this._modelData.viewModel.startComposition(),this._onDidCompositionStart.fire())}_endComposition(e){this._modelData&&(this._modelData.viewModel.endComposition(e),this._onDidCompositionEnd.fire())}_type(e,t){!this._modelData||t.length===0||(e==="keyboard"&&this._onWillType.fire(t),this._modelData.viewModel.type(t,e),e==="keyboard"&&this._onDidType.fire(t))}_compositionType(e,t,i,n,s){this._modelData&&this._modelData.viewModel.compositionType(t,i,n,s,e)}_paste(e,t,i,n,s,r){if(!this._modelData)return;const a=this._modelData.viewModel,l=a.getSelection().getStartPosition();a.paste(t,i,n,e);const c=a.getSelection().getStartPosition();e==="keyboard"&&this._onDidPaste.fire({clipboardEvent:r,range:new M(l.lineNumber,l.column,c.lineNumber,c.column),languageId:s})}_cut(e){this._modelData&&this._modelData.viewModel.cut(e)}_triggerEditorCommand(e,t,i){const n=Xv.getEditorCommand(t);return n?(i=i||{},i.source=e,this._instantiationService.invokeFunction(s=>{Promise.resolve(n.runEditorCommand(s,this,i)).then(void 0,wt)}),!0):!1}_getViewModel(){return this._modelData?this._modelData.viewModel:null}pushUndoStop(){return!this._modelData||this._configuration.options.get(92)?!1:(this._modelData.model.pushStackElement(),!0)}popUndoStop(){return!this._modelData||this._configuration.options.get(92)?!1:(this._modelData.model.popStackElement(),!0)}executeEdits(e,t,i){if(!this._modelData||this._configuration.options.get(92))return!1;let n;return i?Array.isArray(i)?n=()=>i:n=i:n=()=>null,this._modelData.viewModel.executeEdits(e,t,n),!0}executeCommand(e,t){this._modelData&&this._modelData.viewModel.executeCommand(t,e)}executeCommands(e,t){this._modelData&&this._modelData.viewModel.executeCommands(t,e)}createDecorationsCollection(e){return new Z7e(this,e)}changeDecorations(e){return this._modelData?this._modelData.model.changeDecorations(e,this._id):null}getLineDecorations(e){return this._modelData?this._modelData.model.getLineDecorations(e,this._id,rA(this._configuration.options)):null}getDecorationsInRange(e){return this._modelData?this._modelData.model.getDecorationsInRange(e,this._id,rA(this._configuration.options)):null}deltaDecorations(e,t){return this._modelData?e.length===0&&t.length===0?e:this._modelData.model.deltaDecorations(e,t,this._id):[]}removeDecorations(e){!this._modelData||e.length===0||this._modelData.model.changeDecorations(t=>{t.deltaDecorations(e,[])})}removeDecorationsByType(e){const t=this._decorationTypeKeysToIds[e];t&&this.changeDecorations(i=>i.deltaDecorations(t,[])),this._decorationTypeKeysToIds.hasOwnProperty(e)&&delete this._decorationTypeKeysToIds[e],this._decorationTypeSubtypes.hasOwnProperty(e)&&delete this._decorationTypeSubtypes[e]}getLayoutInfo(){return this._configuration.options.get(146)}createOverviewRuler(e){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.createOverviewRuler(e)}getContainerDomNode(){return this._domElement}getDomNode(){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.domNode.domNode}delegateVerticalScrollbarPointerDown(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.delegateScrollFromMouseWheelEvent(e)}layout(e,t=!1){this._configuration.observeContainer(e),t||this.render()}focus(){!this._modelData||!this._modelData.hasRealView||this._modelData.view.focus()}hasTextFocus(){return!this._modelData||!this._modelData.hasRealView?!1:this._modelData.view.isFocused()}hasWidgetFocus(){return this._focusTracker&&this._focusTracker.hasFocus()}addContentWidget(e){const t={widget:e,position:e.getPosition()};this._contentWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a content widget with the same id:"+e.getId()),this._contentWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addContentWidget(t)}layoutContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const i=this._contentWidgets[t];i.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutContentWidget(i)}}removeContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const i=this._contentWidgets[t];delete this._contentWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeContentWidget(i)}}addOverlayWidget(e){const t={widget:e,position:e.getPosition()};this._overlayWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting an overlay widget with the same id."),this._overlayWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addOverlayWidget(t)}layoutOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const i=this._overlayWidgets[t];i.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutOverlayWidget(i)}}removeOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const i=this._overlayWidgets[t];delete this._overlayWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeOverlayWidget(i)}}addGlyphMarginWidget(e){const t={widget:e,position:e.getPosition()};this._glyphMarginWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a glyph margin widget with the same id."),this._glyphMarginWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addGlyphMarginWidget(t)}layoutGlyphMarginWidget(e){const t=e.getId();if(this._glyphMarginWidgets.hasOwnProperty(t)){const i=this._glyphMarginWidgets[t];i.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutGlyphMarginWidget(i)}}removeGlyphMarginWidget(e){const t=e.getId();if(this._glyphMarginWidgets.hasOwnProperty(t)){const i=this._glyphMarginWidgets[t];delete this._glyphMarginWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeGlyphMarginWidget(i)}}changeViewZones(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.change(e)}getTargetAtClientPoint(e,t){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.getTargetAtClientPoint(e,t)}getScrolledVisiblePosition(e){if(!this._modelData||!this._modelData.hasRealView)return null;const t=this._modelData.model.validatePosition(e),i=this._configuration.options,n=i.get(146),s=lv._getVerticalOffsetForPosition(this._modelData,t.lineNumber,t.column)-this.getScrollTop(),r=this._modelData.view.getOffsetForColumn(t.lineNumber,t.column)+n.glyphMarginWidth+n.lineNumbersWidth+n.decorationsWidth-this.getScrollLeft();return{top:s,left:r,height:i.get(67)}}getOffsetForColumn(e,t){return!this._modelData||!this._modelData.hasRealView?-1:this._modelData.view.getOffsetForColumn(e,t)}render(e=!1){!this._modelData||!this._modelData.hasRealView||this._modelData.viewModel.batchEvents(()=>{this._modelData.view.render(!0,e)})}setAriaOptions(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.setAriaOptions(e)}applyFontInfo(e){yo(e,this._configuration.options.get(50))}setBanner(e,t){this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._bannerDomNode.remove(),this._bannerDomNode=e,this._configuration.setReservedHeight(e?t:0),this._bannerDomNode&&this._domElement.prepend(this._bannerDomNode)}_attachModel(e){if(!e){this._modelData=null;return}const t=[];this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._configuration.setIsDominatedByLongLines(e.isDominatedByLongLines()),this._configuration.setModelLineCount(e.getLineCount());const i=e.onBeforeAttached(),n=new H7e(this._id,this._configuration,e,OG.create(at(this._domElement)),FG.create(this._configuration.options),a=>al(at(this._domElement),a),this.languageConfigurationService,this._themeService,i,{batchChanges:a=>{try{return this._beginUpdate(),a()}finally{this._endUpdate()}}});t.push(e.onWillDispose(()=>this.setModel(null))),t.push(n.onEvent(a=>{switch(a.kind){case 0:this._onDidContentSizeChange.fire(a);break;case 1:this._editorTextFocus.setValue(a.hasFocus);break;case 2:this._onDidScrollChange.fire(a);break;case 3:this._onDidChangeViewZones.fire();break;case 4:this._onDidChangeHiddenAreas.fire();break;case 5:this._onDidAttemptReadOnlyEdit.fire();break;case 6:{if(a.reachedMaxCursorCount){const f=this.getOption(80),g=v("cursors.maximum","The number of cursors has been limited to {0}. Consider using [find and replace](https://code.visualstudio.com/docs/editor/codebasics#_find-and-replace) for larger changes or increase the editor multi cursor limit setting.",f);this._notificationService.prompt(d4.Warning,g,[{label:"Find and Replace",run:()=>{this._commandService.executeCommand("editor.action.startFindReplaceAction")}},{label:v("goToSetting","Increase Multi Cursor Limit"),run:()=>{this._commandService.executeCommand("workbench.action.openSettings2",{query:"editor.multiCursorLimit"})}}])}const l=[];for(let f=0,g=a.selections.length;f<g;f++)l[f]=a.selections[f].getPosition();const c={position:l[0],secondaryPositions:l.slice(1),reason:a.reason,source:a.source};this._onDidChangeCursorPosition.fire(c);const u={selection:a.selections[0],secondarySelections:a.selections.slice(1),modelVersionId:a.modelVersionId,oldSelections:a.oldSelections,oldModelVersionId:a.oldModelVersionId,source:a.source,reason:a.reason};this._onDidChangeCursorSelection.fire(u);break}case 7:this._onDidChangeModelDecorations.fire(a.event);break;case 8:this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._onDidChangeModelLanguage.fire(a.event);break;case 9:this._onDidChangeModelLanguageConfiguration.fire(a.event);break;case 10:this._onDidChangeModelContent.fire(a.event);break;case 11:this._onDidChangeModelOptions.fire(a.event);break;case 12:this._onDidChangeModelTokens.fire(a.event);break}}));const[s,r]=this._createView(n);if(r){this._domElement.appendChild(s.domNode.domNode);let a=Object.keys(this._contentWidgets);for(let l=0,c=a.length;l<c;l++){const u=a[l];s.addContentWidget(this._contentWidgets[u])}a=Object.keys(this._overlayWidgets);for(let l=0,c=a.length;l<c;l++){const u=a[l];s.addOverlayWidget(this._overlayWidgets[u])}a=Object.keys(this._glyphMarginWidgets);for(let l=0,c=a.length;l<c;l++){const u=a[l];s.addGlyphMarginWidget(this._glyphMarginWidgets[u])}s.render(!1,!0),s.domNode.domNode.setAttribute("data-uri",e.uri.toString())}this._modelData=new q7e(e,n,s,r,t,i)}_createView(e){let t;this.isSimpleWidget?t={paste:(s,r,a,l)=>{this._paste("keyboard",s,r,a,l)},type:s=>{this._type("keyboard",s)},compositionType:(s,r,a,l)=>{this._compositionType("keyboard",s,r,a,l)},startComposition:()=>{this._startComposition()},endComposition:()=>{this._endComposition("keyboard")},cut:()=>{this._cut("keyboard")}}:t={paste:(s,r,a,l)=>{const c={text:s,pasteOnNewLine:r,multicursorText:a,mode:l};this._commandService.executeCommand("paste",c)},type:s=>{const r={text:s};this._commandService.executeCommand("type",r)},compositionType:(s,r,a,l)=>{if(a||l){const c={text:s,replacePrevCharCnt:r,replaceNextCharCnt:a,positionDelta:l};this._commandService.executeCommand("compositionType",c)}else{const c={text:s,replaceCharCnt:r};this._commandService.executeCommand("replacePreviousChar",c)}},startComposition:()=>{this._commandService.executeCommand("compositionStart",{})},endComposition:()=>{this._commandService.executeCommand("compositionEnd",{})},cut:()=>{this._commandService.executeCommand("cut",{})}};const i=new Y4(e.coordinatesConverter);return i.onKeyDown=s=>this._onKeyDown.fire(s),i.onKeyUp=s=>this._onKeyUp.fire(s),i.onContextMenu=s=>this._onContextMenu.fire(s),i.onMouseMove=s=>this._onMouseMove.fire(s),i.onMouseLeave=s=>this._onMouseLeave.fire(s),i.onMouseDown=s=>this._onMouseDown.fire(s),i.onMouseUp=s=>this._onMouseUp.fire(s),i.onMouseDrag=s=>this._onMouseDrag.fire(s),i.onMouseDrop=s=>this._onMouseDrop.fire(s),i.onMouseDropCanceled=s=>this._onMouseDropCanceled.fire(s),i.onMouseWheel=s=>this._onMouseWheel.fire(s),[new Jz(t,this._configuration,this._themeService.getColorTheme(),e,i,this._overflowWidgetsDomNode,this._instantiationService),!0]}_postDetachModelCleanup(e){e==null||e.removeAllDecorationsWithOwnerId(this._id)}_detachModel(){var i;if((i=this._contributionsDisposable)==null||i.dispose(),this._contributionsDisposable=void 0,!this._modelData)return null;const e=this._modelData.model,t=this._modelData.hasRealView?this._modelData.view.domNode.domNode:null;return this._modelData.dispose(),this._modelData=null,this._domElement.removeAttribute("data-mode-id"),t&&this._domElement.contains(t)&&t.remove(),this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._bannerDomNode.remove(),e}_removeDecorationType(e){this._codeEditorService.removeDecorationType(e)}hasModel(){return this._modelData!==null}showDropIndicatorAt(e){const t=[{range:new M(e.lineNumber,e.column,e.lineNumber,e.column),options:lv.dropIntoEditorDecorationOptions}];this._dropIntoEditorDecorations.set(t),this.revealPosition(e,1)}removeDropIndicator(){this._dropIntoEditorDecorations.clear()}setContextValue(e,t){this._contextKeyService.createKey(e,t)}_beginUpdate(){this._updateCounter++,this._updateCounter===1&&this._onBeginUpdate.fire()}_endUpdate(){this._updateCounter--,this._updateCounter===0&&this._onEndUpdate.fire()}},lv=fb,fb.dropIntoEditorDecorationOptions=Dt.register({description:"workbench-dnd-target",className:"dnd-target"}),fb);oE=lv=$7e([Sf(3,nt),Sf(4,hi),Sf(5,nn),Sf(6,ht),Sf(7,Ws),Sf(8,fs),Sf(9,dl),Sf(10,On),Sf(11,Ue)],oE);let j7e=0;class q7e{constructor(e,t,i,n,s,r){this.model=e,this.viewModel=t,this.view=i,this.hasRealView=n,this.listenersToRemove=s,this.attachedView=r}dispose(){$i(this.listenersToRemove),this.model.onBeforeDetached(this.attachedView),this.hasRealView&&this.view.dispose(),this.viewModel.dispose()}}class Ooe extends X{constructor(e){super(),this._emitterOptions=e,this._onDidChangeToTrue=this._register(new Y(this._emitterOptions)),this.onDidChangeToTrue=this._onDidChangeToTrue.event,this._onDidChangeToFalse=this._register(new Y(this._emitterOptions)),this.onDidChangeToFalse=this._onDidChangeToFalse.event,this._value=0}setValue(e){const t=e?2:1;this._value!==t&&(this._value=t,this._value===2?this._onDidChangeToTrue.fire():this._value===1&&this._onDidChangeToFalse.fire())}}class hr extends Y{constructor(e,t){super({deliveryQueue:t}),this._contributions=e}fire(e){this._contributions.onBeforeInteractionEvent(),super.fire(e)}}class K7e extends X{constructor(e,t){super(),this._editor=e,t.createKey("editorId",e.getId()),this._editorSimpleInput=B.editorSimpleInput.bindTo(t),this._editorFocus=B.focus.bindTo(t),this._textInputFocus=B.textInputFocus.bindTo(t),this._editorTextFocus=B.editorTextFocus.bindTo(t),this._tabMovesFocus=B.tabMovesFocus.bindTo(t),this._editorReadonly=B.readOnly.bindTo(t),this._inDiffEditor=B.inDiffEditor.bindTo(t),this._editorColumnSelection=B.columnSelection.bindTo(t),this._hasMultipleSelections=B.hasMultipleSelections.bindTo(t),this._hasNonEmptySelection=B.hasNonEmptySelection.bindTo(t),this._canUndo=B.canUndo.bindTo(t),this._canRedo=B.canRedo.bindTo(t),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromConfig())),this._register(this._editor.onDidChangeCursorSelection(()=>this._updateFromSelection())),this._register(this._editor.onDidFocusEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidFocusEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidChangeModel(()=>this._updateFromModel())),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromModel())),this._register(CS.onDidChangeTabFocus(i=>this._tabMovesFocus.set(i))),this._updateFromConfig(),this._updateFromSelection(),this._updateFromFocus(),this._updateFromModel(),this._editorSimpleInput.set(this._editor.isSimpleWidget)}_updateFromConfig(){const e=this._editor.getOptions();this._tabMovesFocus.set(CS.getTabFocusMode()),this._editorReadonly.set(e.get(92)),this._inDiffEditor.set(e.get(61)),this._editorColumnSelection.set(e.get(22))}_updateFromSelection(){const e=this._editor.getSelections();e?(this._hasMultipleSelections.set(e.length>1),this._hasNonEmptySelection.set(e.some(t=>!t.isEmpty()))):(this._hasMultipleSelections.reset(),this._hasNonEmptySelection.reset())}_updateFromFocus(){this._editorFocus.set(this._editor.hasWidgetFocus()&&!this._editor.isSimpleWidget),this._editorTextFocus.set(this._editor.hasTextFocus()&&!this._editor.isSimpleWidget),this._textInputFocus.set(this._editor.hasTextFocus())}_updateFromModel(){const e=this._editor.getModel();this._canUndo.set(!!(e&&e.canUndo())),this._canRedo.set(!!(e&&e.canRedo()))}}class G7e extends X{constructor(e,t,i){super(),this._editor=e,this._contextKeyService=t,this._languageFeaturesService=i,this._langId=B.languageId.bindTo(t),this._hasCompletionItemProvider=B.hasCompletionItemProvider.bindTo(t),this._hasCodeActionsProvider=B.hasCodeActionsProvider.bindTo(t),this._hasCodeLensProvider=B.hasCodeLensProvider.bindTo(t),this._hasDefinitionProvider=B.hasDefinitionProvider.bindTo(t),this._hasDeclarationProvider=B.hasDeclarationProvider.bindTo(t),this._hasImplementationProvider=B.hasImplementationProvider.bindTo(t),this._hasTypeDefinitionProvider=B.hasTypeDefinitionProvider.bindTo(t),this._hasHoverProvider=B.hasHoverProvider.bindTo(t),this._hasDocumentHighlightProvider=B.hasDocumentHighlightProvider.bindTo(t),this._hasDocumentSymbolProvider=B.hasDocumentSymbolProvider.bindTo(t),this._hasReferenceProvider=B.hasReferenceProvider.bindTo(t),this._hasRenameProvider=B.hasRenameProvider.bindTo(t),this._hasSignatureHelpProvider=B.hasSignatureHelpProvider.bindTo(t),this._hasInlayHintsProvider=B.hasInlayHintsProvider.bindTo(t),this._hasDocumentFormattingProvider=B.hasDocumentFormattingProvider.bindTo(t),this._hasDocumentSelectionFormattingProvider=B.hasDocumentSelectionFormattingProvider.bindTo(t),this._hasMultipleDocumentFormattingProvider=B.hasMultipleDocumentFormattingProvider.bindTo(t),this._hasMultipleDocumentSelectionFormattingProvider=B.hasMultipleDocumentSelectionFormattingProvider.bindTo(t),this._isInEmbeddedEditor=B.isInEmbeddedEditor.bindTo(t);const n=()=>this._update();this._register(e.onDidChangeModel(n)),this._register(e.onDidChangeModelLanguage(n)),this._register(i.completionProvider.onDidChange(n)),this._register(i.codeActionProvider.onDidChange(n)),this._register(i.codeLensProvider.onDidChange(n)),this._register(i.definitionProvider.onDidChange(n)),this._register(i.declarationProvider.onDidChange(n)),this._register(i.implementationProvider.onDidChange(n)),this._register(i.typeDefinitionProvider.onDidChange(n)),this._register(i.hoverProvider.onDidChange(n)),this._register(i.documentHighlightProvider.onDidChange(n)),this._register(i.documentSymbolProvider.onDidChange(n)),this._register(i.referenceProvider.onDidChange(n)),this._register(i.renameProvider.onDidChange(n)),this._register(i.documentFormattingEditProvider.onDidChange(n)),this._register(i.documentRangeFormattingEditProvider.onDidChange(n)),this._register(i.signatureHelpProvider.onDidChange(n)),this._register(i.inlayHintsProvider.onDidChange(n)),n()}dispose(){super.dispose()}reset(){this._contextKeyService.bufferChangeEvents(()=>{this._langId.reset(),this._hasCompletionItemProvider.reset(),this._hasCodeActionsProvider.reset(),this._hasCodeLensProvider.reset(),this._hasDefinitionProvider.reset(),this._hasDeclarationProvider.reset(),this._hasImplementationProvider.reset(),this._hasTypeDefinitionProvider.reset(),this._hasHoverProvider.reset(),this._hasDocumentHighlightProvider.reset(),this._hasDocumentSymbolProvider.reset(),this._hasReferenceProvider.reset(),this._hasRenameProvider.reset(),this._hasDocumentFormattingProvider.reset(),this._hasDocumentSelectionFormattingProvider.reset(),this._hasSignatureHelpProvider.reset(),this._isInEmbeddedEditor.reset()})}_update(){const e=this._editor.getModel();if(!e){this.reset();return}this._contextKeyService.bufferChangeEvents(()=>{this._langId.set(e.getLanguageId()),this._hasCompletionItemProvider.set(this._languageFeaturesService.completionProvider.has(e)),this._hasCodeActionsProvider.set(this._languageFeaturesService.codeActionProvider.has(e)),this._hasCodeLensProvider.set(this._languageFeaturesService.codeLensProvider.has(e)),this._hasDefinitionProvider.set(this._languageFeaturesService.definitionProvider.has(e)),this._hasDeclarationProvider.set(this._languageFeaturesService.declarationProvider.has(e)),this._hasImplementationProvider.set(this._languageFeaturesService.implementationProvider.has(e)),this._hasTypeDefinitionProvider.set(this._languageFeaturesService.typeDefinitionProvider.has(e)),this._hasHoverProvider.set(this._languageFeaturesService.hoverProvider.has(e)),this._hasDocumentHighlightProvider.set(this._languageFeaturesService.documentHighlightProvider.has(e)),this._hasDocumentSymbolProvider.set(this._languageFeaturesService.documentSymbolProvider.has(e)),this._hasReferenceProvider.set(this._languageFeaturesService.referenceProvider.has(e)),this._hasRenameProvider.set(this._languageFeaturesService.renameProvider.has(e)),this._hasSignatureHelpProvider.set(this._languageFeaturesService.signatureHelpProvider.has(e)),this._hasInlayHintsProvider.set(this._languageFeaturesService.inlayHintsProvider.has(e)),this._hasDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.has(e)||this._languageFeaturesService.documentRangeFormattingEditProvider.has(e)),this._hasDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.has(e)),this._hasMultipleDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.all(e).length+this._languageFeaturesService.documentRangeFormattingEditProvider.all(e).length>1),this._hasMultipleDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.all(e).length>1),this._isInEmbeddedEditor.set(e.uri.scheme===Lt.walkThroughSnippet||e.uri.scheme===Lt.vscodeChatCodeBlock)})}}class Y7e extends X{constructor(e,t){super(),this._onChange=this._register(new Y),this.onChange=this._onChange.event,this._hadFocus=void 0,this._hasDomElementFocus=!1,this._domFocusTracker=this._register(pu(e)),this._overflowWidgetsDomNodeHasFocus=!1,this._register(this._domFocusTracker.onDidFocus(()=>{this._hasDomElementFocus=!0,this._update()})),this._register(this._domFocusTracker.onDidBlur(()=>{this._hasDomElementFocus=!1,this._update()})),t&&(this._overflowWidgetsDomNode=this._register(pu(t)),this._register(this._overflowWidgetsDomNode.onDidFocus(()=>{this._overflowWidgetsDomNodeHasFocus=!0,this._update()})),this._register(this._overflowWidgetsDomNode.onDidBlur(()=>{this._overflowWidgetsDomNodeHasFocus=!1,this._update()})))}_update(){const e=this._hasDomElementFocus||this._overflowWidgetsDomNodeHasFocus;this._hadFocus!==e&&(this._hadFocus=e,this._onChange.fire(void 0))}hasFocus(){return this._hadFocus??!1}}class Z7e{get length(){return this._decorationIds.length}constructor(e,t){this._editor=e,this._decorationIds=[],this._isChangingDecorations=!1,Array.isArray(t)&&t.length>0&&this.set(t)}onDidChange(e,t,i){return this._editor.onDidChangeModelDecorations(n=>{this._isChangingDecorations||e.call(t,n)},i)}getRange(e){return!this._editor.hasModel()||e>=this._decorationIds.length?null:this._editor.getModel().getDecorationRange(this._decorationIds[e])}getRanges(){if(!this._editor.hasModel())return[];const e=this._editor.getModel(),t=[];for(const i of this._decorationIds){const n=e.getDecorationRange(i);n&&t.push(n)}return t}has(e){return this._decorationIds.includes(e.id)}clear(){this._decorationIds.length!==0&&this.set([])}set(e){try{this._isChangingDecorations=!0,this._editor.changeDecorations(t=>{this._decorationIds=t.deltaDecorations(this._decorationIds,e)})}finally{this._isChangingDecorations=!1}return this._decorationIds}append(e){let t=[];try{this._isChangingDecorations=!0,this._editor.changeDecorations(i=>{t=i.deltaDecorations([],e),this._decorationIds=this._decorationIds.concat(t)})}finally{this._isChangingDecorations=!1}return t}}const X7e=encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='"),Q7e=encodeURIComponent("'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>");function i9(o){return X7e+encodeURIComponent(o.toString())+Q7e}const J7e=encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" height="3" width="12"><g fill="'),e9e=encodeURIComponent('"><circle cx="1" cy="1" r="1"/><circle cx="5" cy="1" r="1"/><circle cx="9" cy="1" r="1"/></g></svg>');function t9e(o){return J7e+encodeURIComponent(o.toString())+e9e}Nc((o,e)=>{const t=o.getColor(g4);t&&e.addRule(`.monaco-editor .squiggly-error { background: url("data:image/svg+xml,${i9(t)}") repeat-x bottom left; }`);const i=o.getColor(xg);i&&e.addRule(`.monaco-editor .squiggly-warning { background: url("data:image/svg+xml,${i9(i)}") repeat-x bottom left; }`);const n=o.getColor(Ph);n&&e.addRule(`.monaco-editor .squiggly-info { background: url("data:image/svg+xml,${i9(n)}") repeat-x bottom left; }`);const s=o.getColor(qNe);s&&e.addRule(`.monaco-editor .squiggly-hint { background: url("data:image/svg+xml,${t9e(s)}") no-repeat bottom left; }`);const r=o.getColor(I2e);r&&e.addRule(`.monaco-editor.showUnused .squiggly-inline-unnecessary { opacity: ${r.rgba.a}; }`)});class Cu{static capture(e){if(e.getScrollTop()===0||e.hasPendingScrollAnimation())return new Cu(e.getScrollTop(),e.getContentHeight(),null,0,null);let t=null,i=0;const n=e.getVisibleRanges();if(n.length>0){t=n[0].getStartPosition();const s=e.getTopForPosition(t.lineNumber,t.column);i=e.getScrollTop()-s}return new Cu(e.getScrollTop(),e.getContentHeight(),t,i,e.getPosition())}constructor(e,t,i,n,s){this._initialScrollTop=e,this._initialContentHeight=t,this._visiblePosition=i,this._visiblePositionScrollDelta=n,this._cursorPosition=s}restore(e){if(!(this._initialContentHeight===e.getContentHeight()&&this._initialScrollTop===e.getScrollTop())&&this._visiblePosition){const t=e.getTopForPosition(this._visiblePosition.lineNumber,this._visiblePosition.column);e.setScrollTop(t+this._visiblePositionScrollDelta)}}restoreRelativeVerticalPositionOfCursor(e){if(this._initialContentHeight===e.getContentHeight()&&this._initialScrollTop===e.getScrollTop())return;const t=e.getPosition();if(!this._cursorPosition||!t)return;const i=e.getTopForLineNumber(t.lineNumber)-e.getTopForLineNumber(this._cursorPosition.lineNumber);e.setScrollTop(e.getScrollTop()+i,1)}}function i9e(o,e,t,i){if(o.length===0)return e;if(e.length===0)return o;const n=[];let s=0,r=0;for(;s<o.length&&r<e.length;){const a=o[s],l=e[r],c=t(a),u=t(l);c<u?(n.push(a),s++):c>u?(n.push(l),r++):(n.push(i(a,l)),s++,r++)}for(;s<o.length;)n.push(o[s]),s++;for(;r<e.length;)n.push(e[r]),r++;return n}function qP(o,e){const t=new le,i=o.createDecorationsCollection();return t.add(cI({debugName:()=>`Apply decorations from ${e.debugName}`},n=>{const s=e.read(n);i.set(s)})),t.add({dispose:()=>{i.clear()}}),t}function zw(o,e){return o.appendChild(e),it(()=>{e.remove()})}function n9e(o,e){return o.prepend(e),it(()=>{e.remove()})}class Ife extends X{get width(){return this._width}get height(){return this._height}get automaticLayout(){return this._automaticLayout}constructor(e,t){super(),this._automaticLayout=!1,this.elementSizeObserver=this._register(new lfe(e,t)),this._width=Wt(this,this.elementSizeObserver.getWidth()),this._height=Wt(this,this.elementSizeObserver.getHeight()),this._register(this.elementSizeObserver.onDidChange(i=>Mn(n=>{this._width.set(this.elementSizeObserver.getWidth(),n),this._height.set(this.elementSizeObserver.getHeight(),n)})))}observe(e){this.elementSizeObserver.observe(e)}setAutomaticLayout(e){this._automaticLayout=e,e?this.elementSizeObserver.startObserving():this.elementSizeObserver.stopObserving()}}function Foe(o,e,t){let i=e.get(),n=i,s=i;const r=Wt("animatedValue",i);let a=-1;const l=300;let c;t.add(dI({createEmptyChangeSummary:()=>({animate:!1}),handleChange:(f,g)=>(f.didChange(e)&&(g.animate=g.animate||f.change),!0)},(f,g)=>{c!==void 0&&(o.cancelAnimationFrame(c),c=void 0),n=s,i=e.read(f),a=Date.now()-(g.animate?0:l),u()}));function u(){const f=Date.now()-a;s=Math.floor(s9e(f,n,i-n,l)),f<l?c=o.requestAnimationFrame(u):s=i,r.set(s,void 0)}return r}function s9e(o,e,t,i){return o===i?e+t:t*(-Math.pow(2,-10*o/i)+1)+e}class jG extends X{constructor(e,t,i){super(),this._register(new aU(e,i)),this._register(Dg(i,{height:t.actualHeight,top:t.actualTop}))}}class Uw{get afterLineNumber(){return this._afterLineNumber.get()}constructor(e,t){this._afterLineNumber=e,this.heightInPx=t,this.domNode=document.createElement("div"),this._actualTop=Wt(this,void 0),this._actualHeight=Wt(this,void 0),this.actualTop=this._actualTop,this.actualHeight=this._actualHeight,this.showInHiddenAreas=!0,this.onChange=this._afterLineNumber,this.onDomNodeTop=i=>{this._actualTop.set(i,void 0)},this.onComputedHeight=i=>{this._actualHeight.set(i,void 0)}}}const q2=class q2{constructor(e,t){this._editor=e,this._domElement=t,this._overlayWidgetId=`managedOverlayWidget-${q2._counter++}`,this._overlayWidget={getId:()=>this._overlayWidgetId,getDomNode:()=>this._domElement,getPosition:()=>null},this._editor.addOverlayWidget(this._overlayWidget)}dispose(){this._editor.removeOverlayWidget(this._overlayWidget)}};q2._counter=0;let aU=q2;function Dg(o,e){return bt(t=>{for(let[i,n]of Object.entries(e))n&&typeof n=="object"&&"read"in n&&(n=n.read(t)),typeof n=="number"&&(n=`${n}px`),i=i.replace(/[A-Z]/g,s=>"-"+s.toLowerCase()),o.style[i]=n})}function KP(o,e,t,i){const n=new le,s=[];return n.add(ka((r,a)=>{const l=e.read(r),c=new Map,u=new Map;t&&t(!0),o.changeViewZones(f=>{for(const g of s)f.removeZone(g),i==null||i.delete(g);s.length=0;for(const g of l){const p=f.addZone(g);g.setZoneId&&g.setZoneId(p),s.push(p),i==null||i.add(p),c.set(g,p)}}),t&&t(!1),a.add(dI({createEmptyChangeSummary(){return{zoneIds:[]}},handleChange(f,g){const p=u.get(f.changedObservable);return p!==void 0&&g.zoneIds.push(p),!0}},(f,g)=>{for(const p of l)p.onChange&&(u.set(p.onChange,c.get(p)),p.onChange.read(f));t&&t(!0),o.changeViewZones(p=>{for(const _ of g.zoneIds)p.layoutZone(_)}),t&&t(!1)}))})),n.add({dispose(){t&&t(!0),o.changeViewZones(r=>{for(const a of s)r.removeZone(a)}),i==null||i.clear(),t&&t(!1)}}),n}class o9e extends An{dispose(){super.dispose(!0)}}function Boe(o,e){const t=CD(e,n=>n.original.startLineNumber<=o.lineNumber);if(!t)return M.fromPositions(o);if(t.original.endLineNumberExclusive<=o.lineNumber){const n=o.lineNumber-t.original.endLineNumberExclusive+t.modified.endLineNumberExclusive;return M.fromPositions(new G(n,o.column))}if(!t.innerChanges)return M.fromPositions(new G(t.modified.startLineNumber,1));const i=CD(t.innerChanges,n=>n.originalRange.getStartPosition().isBeforeOrEqual(o));if(!i){const n=o.lineNumber-t.original.startLineNumber+t.modified.startLineNumber;return M.fromPositions(new G(n,o.column))}if(i.originalRange.containsPosition(o))return i.modifiedRange;{const n=r9e(i.originalRange.getEndPosition(),o);return M.fromPositions(n.addToPosition(i.modifiedRange.getEndPosition()))}}function r9e(o,e){return o.lineNumber===e.lineNumber?new dd(0,e.column-o.column):new dd(e.lineNumber-o.lineNumber,e.column-1)}function a9e(o,e){let t;return o.filter(i=>{const n=e(i,t);return t=i,n})}class GP{static create(e,t=void 0){return new Woe(e,e,t)}static createWithDisposable(e,t,i=void 0){const n=new le;return n.add(t),n.add(e),new Woe(e,n,i)}}class Woe extends GP{constructor(e,t,i){super(),this.object=e,this._disposable=t,this._debugOwner=i,this._refCount=1,this._isDisposed=!1,this._owners=[],i&&this._addOwner(i)}_addOwner(e){e&&this._owners.push(e)}createNewRef(e){return this._refCount++,e&&this._addOwner(e),new l9e(this,e)}dispose(){this._isDisposed||(this._isDisposed=!0,this._decreaseRefCount(this._debugOwner))}_decreaseRefCount(e){if(this._refCount--,this._refCount===0&&this._disposable.dispose(),e){const t=this._owners.indexOf(e);t!==-1&&this._owners.splice(t,1)}}}class l9e extends GP{constructor(e,t){super(),this._base=e,this._debugOwner=t,this._isDisposed=!1}get object(){return this._base.object}createNewRef(e){return this._base.createNewRef(e)}dispose(){this._isDisposed||(this._isDisposed=!0,this._base._decreaseRefCount(this._debugOwner))}}var qG=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},KG=function(o,e){return function(t,i){e(t,i,o)}};const c9e=hn("diff-review-insert",Se.add,v("accessibleDiffViewerInsertIcon","Icon for 'Insert' in accessible diff viewer.")),d9e=hn("diff-review-remove",Se.remove,v("accessibleDiffViewerRemoveIcon","Icon for 'Remove' in accessible diff viewer.")),u9e=hn("diff-review-close",Se.close,v("accessibleDiffViewerCloseIcon","Icon for 'Close' in accessible diff viewer."));var H1;let Bv=(H1=class extends X{constructor(e,t,i,n,s,r,a,l,c){super(),this._parentNode=e,this._visible=t,this._setVisible=i,this._canClose=n,this._width=s,this._height=r,this._diffs=a,this._models=l,this._instantiationService=c,this._state=n_(this,(u,f)=>{const g=this._visible.read(u);if(this._parentNode.style.visibility=g?"visible":"hidden",!g)return null;const p=f.add(this._instantiationService.createInstance(lU,this._diffs,this._models,this._setVisible,this._canClose)),_=f.add(this._instantiationService.createInstance(cU,this._parentNode,p,this._width,this._height,this._models));return{model:p,view:_}}).recomputeInitiallyAndOnChange(this._store)}next(){Mn(e=>{const t=this._visible.get();this._setVisible(!0,e),t&&this._state.get().model.nextGroup(e)})}prev(){Mn(e=>{this._setVisible(!0,e),this._state.get().model.previousGroup(e)})}close(){Mn(e=>{this._setVisible(!1,e)})}},H1._ttPolicy=Ag("diffReview",{createHTML:e=>e}),H1);Bv=qG([KG(8,nt)],Bv);let lU=class extends X{constructor(e,t,i,n,s){super(),this._diffs=e,this._models=t,this._setVisible=i,this.canClose=n,this._accessibilitySignalService=s,this._groups=Wt(this,[]),this._currentGroupIdx=Wt(this,0),this._currentElementIdx=Wt(this,0),this.groups=this._groups,this.currentGroup=this._currentGroupIdx.map((r,a)=>this._groups.read(a)[r]),this.currentGroupIndex=this._currentGroupIdx,this.currentElement=this._currentElementIdx.map((r,a)=>{var l;return(l=this.currentGroup.read(a))==null?void 0:l.lines[r]}),this._register(bt(r=>{const a=this._diffs.read(r);if(!a){this._groups.set([],void 0);return}const l=h9e(a,this._models.getOriginalModel().getLineCount(),this._models.getModifiedModel().getLineCount());Mn(c=>{const u=this._models.getModifiedPosition();if(u){const f=l.findIndex(g=>(u==null?void 0:u.lineNumber)<g.range.modified.endLineNumberExclusive);f!==-1&&this._currentGroupIdx.set(f,c)}this._groups.set(l,c)})})),this._register(bt(r=>{const a=this.currentElement.read(r);(a==null?void 0:a.type)===Vr.Deleted?this._accessibilitySignalService.playSignal(Tl.diffLineDeleted,{source:"accessibleDiffViewer.currentElementChanged"}):(a==null?void 0:a.type)===Vr.Added&&this._accessibilitySignalService.playSignal(Tl.diffLineInserted,{source:"accessibleDiffViewer.currentElementChanged"})})),this._register(bt(r=>{const a=this.currentElement.read(r);if(a&&a.type!==Vr.Header){const l=a.modifiedLineNumber??a.diff.modified.startLineNumber;this._models.modifiedSetSelection(M.fromPositions(new G(l,1)))}}))}_goToGroupDelta(e,t){const i=this.groups.get();!i||i.length<=1||gC(t,n=>{this._currentGroupIdx.set(Vt.ofLength(i.length).clipCyclic(this._currentGroupIdx.get()+e),n),this._currentElementIdx.set(0,n)})}nextGroup(e){this._goToGroupDelta(1,e)}previousGroup(e){this._goToGroupDelta(-1,e)}_goToLineDelta(e){const t=this.currentGroup.get();!t||t.lines.length<=1||Mn(i=>{this._currentElementIdx.set(Vt.ofLength(t.lines.length).clip(this._currentElementIdx.get()+e),i)})}goToNextLine(){this._goToLineDelta(1)}goToPreviousLine(){this._goToLineDelta(-1)}goToLine(e){const t=this.currentGroup.get();if(!t)return;const i=t.lines.indexOf(e);i!==-1&&Mn(n=>{this._currentElementIdx.set(i,n)})}revealCurrentElementInEditor(){if(!this.canClose.get())return;this._setVisible(!1,void 0);const e=this.currentElement.get();e&&(e.type===Vr.Deleted?this._models.originalReveal(M.fromPositions(new G(e.originalLineNumber,1))):this._models.modifiedReveal(e.type!==Vr.Header?M.fromPositions(new G(e.modifiedLineNumber,1)):void 0))}close(){this.canClose.get()&&(this._setVisible(!1,void 0),this._models.modifiedFocus())}};lU=qG([KG(4,o_)],lU);const Lx=3;function h9e(o,e,t){const i=[];for(const n of vq(o,(s,r)=>r.modified.startLineNumber-s.modified.endLineNumberExclusive<2*Lx)){const s=[];s.push(new g9e);const r=new It(Math.max(1,n[0].original.startLineNumber-Lx),Math.min(n[n.length-1].original.endLineNumberExclusive+Lx,e+1)),a=new It(Math.max(1,n[0].modified.startLineNumber-Lx),Math.min(n[n.length-1].modified.endLineNumberExclusive+Lx,t+1));fle(n,(u,f)=>{const g=new It(u?u.original.endLineNumberExclusive:r.startLineNumber,f?f.original.startLineNumber:r.endLineNumberExclusive),p=new It(u?u.modified.endLineNumberExclusive:a.startLineNumber,f?f.modified.startLineNumber:a.endLineNumberExclusive);g.forEach(_=>{s.push(new _9e(_,p.startLineNumber+(_-g.startLineNumber)))}),f&&(f.original.forEach(_=>{s.push(new p9e(f,_))}),f.modified.forEach(_=>{s.push(new m9e(f,_))}))});const l=n[0].modified.join(n[n.length-1].modified),c=n[0].original.join(n[n.length-1].original);i.push(new f9e(new Cr(l,c),s))}return i}var Vr;(function(o){o[o.Header=0]="Header",o[o.Unchanged=1]="Unchanged",o[o.Deleted=2]="Deleted",o[o.Added=3]="Added"})(Vr||(Vr={}));class f9e{constructor(e,t){this.range=e,this.lines=t}}class g9e{constructor(){this.type=Vr.Header}}class p9e{constructor(e,t){this.diff=e,this.originalLineNumber=t,this.type=Vr.Deleted,this.modifiedLineNumber=void 0}}class m9e{constructor(e,t){this.diff=e,this.modifiedLineNumber=t,this.type=Vr.Added,this.originalLineNumber=void 0}}class _9e{constructor(e,t){this.originalLineNumber=e,this.modifiedLineNumber=t,this.type=Vr.Unchanged}}let cU=class extends X{constructor(e,t,i,n,s,r){super(),this._element=e,this._model=t,this._width=i,this._height=n,this._models=s,this._languageService=r,this.domNode=this._element,this.domNode.className="monaco-component diff-review monaco-editor-background";const a=document.createElement("div");a.className="diff-review-actions",this._actionBar=this._register(new zl(a)),this._register(bt(l=>{this._actionBar.clear(),this._model.canClose.read(l)&&this._actionBar.push(new tl("diffreview.close",v("label.close","Close"),"close-diff-review "+ut.asClassName(u9e),!0,async()=>t.close()),{label:!1,icon:!0})})),this._content=document.createElement("div"),this._content.className="diff-review-content",this._content.setAttribute("role","code"),this._scrollbar=this._register(new nI(this._content,{})),Co(this.domNode,this._scrollbar.getDomNode(),a),this._register(bt(l=>{this._height.read(l),this._width.read(l),this._scrollbar.scanDomNode()})),this._register(it(()=>{Co(this.domNode)})),this._register(Dg(this.domNode,{width:this._width,height:this._height})),this._register(Dg(this._content,{width:this._width,height:this._height})),this._register(ka((l,c)=>{this._model.currentGroup.read(l),this._render(c)})),this._register(Bn(this.domNode,"keydown",l=>{(l.equals(18)||l.equals(2066)||l.equals(530))&&(l.preventDefault(),this._model.goToNextLine()),(l.equals(16)||l.equals(2064)||l.equals(528))&&(l.preventDefault(),this._model.goToPreviousLine()),(l.equals(9)||l.equals(2057)||l.equals(521)||l.equals(1033))&&(l.preventDefault(),this._model.close()),(l.equals(10)||l.equals(3))&&(l.preventDefault(),this._model.revealCurrentElementInEditor())}))}_render(e){const t=this._models.getOriginalOptions(),i=this._models.getModifiedOptions(),n=document.createElement("div");n.className="diff-review-table",n.setAttribute("role","list"),n.setAttribute("aria-label",v("ariaLabel","Accessible Diff Viewer. Use arrow up and down to navigate.")),yo(n,i.get(50)),Co(this._content,n);const s=this._models.getOriginalModel(),r=this._models.getModifiedModel();if(!s||!r)return;const a=s.getOptions(),l=r.getOptions(),c=i.get(67),u=this._model.currentGroup.get();for(const f of(u==null?void 0:u.lines)||[]){if(!u)break;let g;if(f.type===Vr.Header){const _=document.createElement("div");_.className="diff-review-row",_.setAttribute("role","listitem");const b=u.range,y=this._model.currentGroupIndex.get(),S=this._model.groups.get().length,L=N=>N===0?v("no_lines_changed","no lines changed"):N===1?v("one_line_changed","1 line changed"):v("more_lines_changed","{0} lines changed",N),x=L(b.original.length),k=L(b.modified.length);_.setAttribute("aria-label",v({key:"header",comment:["This is the ARIA label for a git diff header.","A git diff header looks like this: @@ -154,12 +159,39 @@.","That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.","Variables 0 and 1 refer to the diff index out of total number of diffs.","Variables 2 and 4 will be numbers (a line number).",'Variables 3 and 5 will be "no lines changed", "1 line changed" or "X lines changed", localized separately.']},"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}",y+1,S,b.original.startLineNumber,x,b.modified.startLineNumber,k));const E=document.createElement("div");E.className="diff-review-cell diff-review-summary",E.appendChild(document.createTextNode(`${y+1}/${S}: @@ -${b.original.startLineNumber},${b.original.length} +${b.modified.startLineNumber},${b.modified.length} @@`)),_.appendChild(E),g=_}else g=this._createRow(f,c,this._width.get(),t,s,a,i,r,l);n.appendChild(g);const p=Qe(_=>this._model.currentElement.read(_)===f);e.add(bt(_=>{const b=p.read(_);g.tabIndex=b?0:-1,b&&g.focus()})),e.add(se(g,"focus",()=>{this._model.goToLine(f)}))}this._scrollbar.scanDomNode()}_createRow(e,t,i,n,s,r,a,l,c){const u=n.get(146),f=u.glyphMarginWidth+u.lineNumbersWidth,g=a.get(146),p=10+g.glyphMarginWidth+g.lineNumbersWidth;let _="diff-review-row",b="";const y="diff-review-spacer";let S=null;switch(e.type){case Vr.Added:_="diff-review-row line-insert",b=" char-insert",S=c9e;break;case Vr.Deleted:_="diff-review-row line-delete",b=" char-delete",S=d9e;break}const L=document.createElement("div");L.style.minWidth=i+"px",L.className=_,L.setAttribute("role","listitem"),L.ariaLevel="";const x=document.createElement("div");x.className="diff-review-cell",x.style.height=`${t}px`,L.appendChild(x);const k=document.createElement("span");k.style.width=f+"px",k.style.minWidth=f+"px",k.className="diff-review-line-number"+b,e.originalLineNumber!==void 0?k.appendChild(document.createTextNode(String(e.originalLineNumber))):k.innerText="",x.appendChild(k);const E=document.createElement("span");E.style.width=p+"px",E.style.minWidth=p+"px",E.style.paddingRight="10px",E.className="diff-review-line-number"+b,e.modifiedLineNumber!==void 0?E.appendChild(document.createTextNode(String(e.modifiedLineNumber))):E.innerText="",x.appendChild(E);const N=document.createElement("span");if(N.className=y,S){const H=document.createElement("span");H.className=ut.asClassName(S),H.innerText="",N.appendChild(H)}else N.innerText="";x.appendChild(N);let A;if(e.modifiedLineNumber!==void 0){let H=this._getLineHtml(l,a,c.tabSize,e.modifiedLineNumber,this._languageService.languageIdCodec);Bv._ttPolicy&&(H=Bv._ttPolicy.createHTML(H)),x.insertAdjacentHTML("beforeend",H),A=l.getLineContent(e.modifiedLineNumber)}else{let H=this._getLineHtml(s,n,r.tabSize,e.originalLineNumber,this._languageService.languageIdCodec);Bv._ttPolicy&&(H=Bv._ttPolicy.createHTML(H)),x.insertAdjacentHTML("beforeend",H),A=s.getLineContent(e.originalLineNumber)}A.length===0&&(A=v("blankLine","blank"));let P="";switch(e.type){case Vr.Unchanged:e.originalLineNumber===e.modifiedLineNumber?P=v({key:"unchangedLine",comment:["The placeholders are contents of the line and should not be translated."]},"{0} unchanged line {1}",A,e.originalLineNumber):P=v("equalLine","{0} original line {1} modified line {2}",A,e.originalLineNumber,e.modifiedLineNumber);break;case Vr.Added:P=v("insertLine","+ {0} modified line {1}",A,e.modifiedLineNumber);break;case Vr.Deleted:P=v("deleteLine","- {0} original line {1}",A,e.originalLineNumber);break}return L.setAttribute("aria-label",P),L}_getLineHtml(e,t,i,n,s){const r=e.getLineContent(n),a=t.get(50),l=ho.createEmpty(r,s),c=ql.isBasicASCII(r,e.mightContainNonBasicASCII()),u=ql.containsRTL(r,c,e.mightContainRTL());return U4(new r_(a.isMonospace&&!t.get(33),a.canUseHalfwidthRightwardsArrow,r,!1,c,u,0,l,[],i,0,a.spaceWidth,a.middotWidth,a.wsmiddotWidth,t.get(118),t.get(100),t.get(95),t.get(51)!==Mm.OFF,null)).html}};cU=qG([KG(5,In)],cU);class v9e{constructor(e){this.editors=e}getOriginalModel(){return this.editors.original.getModel()}getOriginalOptions(){return this.editors.original.getOptions()}originalReveal(e){this.editors.original.revealRange(e),this.editors.original.setSelection(e),this.editors.original.focus()}getModifiedModel(){return this.editors.modified.getModel()}getModifiedOptions(){return this.editors.modified.getOptions()}modifiedReveal(e){e&&(this.editors.modified.revealRange(e),this.editors.modified.setSelection(e)),this.editors.modified.focus()}modifiedSetSelection(e){this.editors.modified.setSelection(e)}modifiedFocus(){this.editors.modified.focus()}getModifiedPosition(){return this.editors.modified.getPosition()??void 0}}W("diffEditor.move.border","#8b8b8b9c",v("diffEditor.move.border","The border color for text that got moved in the diff editor."));W("diffEditor.moveActive.border","#FFA500",v("diffEditor.moveActive.border","The active border color for text that got moved in the diff editor."));W("diffEditor.unchangedRegionShadow",{dark:"#000000",light:"#737373BF",hcDark:"#000000",hcLight:"#737373BF"},v("diffEditor.unchangedRegionShadow","The color of the shadow around unchanged region widgets."));const b9e=hn("diff-insert",Se.add,v("diffInsertIcon","Line decoration for inserts in the diff editor.")),Tfe=hn("diff-remove",Se.remove,v("diffRemoveIcon","Line decoration for removals in the diff editor.")),YP=Dt.register({className:"line-insert",description:"line-insert",isWholeLine:!0,linesDecorationsClassName:"insert-sign "+ut.asClassName(b9e),marginClassName:"gutter-insert"}),rE=Dt.register({className:"line-delete",description:"line-delete",isWholeLine:!0,linesDecorationsClassName:"delete-sign "+ut.asClassName(Tfe),marginClassName:"gutter-delete"}),Hoe=Dt.register({className:"line-insert",description:"line-insert",isWholeLine:!0,marginClassName:"gutter-insert"}),Voe=Dt.register({className:"line-delete",description:"line-delete",isWholeLine:!0,marginClassName:"gutter-delete"}),ZP=Dt.register({className:"char-insert",description:"char-insert",shouldFillLineOnLineBreak:!0}),GG=Dt.register({className:"char-insert",description:"char-insert",isWholeLine:!0}),YG=Dt.register({className:"char-insert diff-range-empty",description:"char-insert diff-range-empty"}),wS=Dt.register({className:"char-delete",description:"char-delete",shouldFillLineOnLineBreak:!0}),ZG=Dt.register({className:"char-delete",description:"char-delete",isWholeLine:!0}),XG=Dt.register({className:"char-delete diff-range-empty",description:"char-delete diff-range-empty"});var Nfe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},dU=function(o,e){return function(t,i){e(t,i,o)}},cv;const CI=Gt("diffProviderFactoryService");let uU=class{constructor(e){this.instantiationService=e}createDiffProvider(e){return this.instantiationService.createInstance(hU,e)}};uU=Nfe([dU(0,nt)],uU);ei(CI,uU,1);var gb;let hU=(gb=class{constructor(e,t,i){this.editorWorkerService=t,this.telemetryService=i,this.onDidChangeEventEmitter=new Y,this.onDidChange=this.onDidChangeEventEmitter.event,this.diffAlgorithm="advanced",this.diffAlgorithmOnDidChangeSubscription=void 0,this.setOptions(e)}dispose(){var e;(e=this.diffAlgorithmOnDidChangeSubscription)==null||e.dispose()}async computeDiff(e,t,i,n){if(typeof this.diffAlgorithm!="string")return this.diffAlgorithm.computeDiff(e,t,i,n);if(e.isDisposed()||t.isDisposed())return{changes:[],identical:!0,quitEarly:!1,moves:[]};if(e.getLineCount()===1&&e.getLineMaxColumn(1)===1)return t.getLineCount()===1&&t.getLineMaxColumn(1)===1?{changes:[],identical:!0,quitEarly:!1,moves:[]}:{changes:[new Vl(new It(1,2),new It(1,t.getLineCount()+1),[new Il(e.getFullModelRange(),t.getFullModelRange())])],identical:!1,quitEarly:!1,moves:[]};const s=JSON.stringify([e.uri.toString(),t.uri.toString()]),r=JSON.stringify([e.id,t.id,e.getAlternativeVersionId(),t.getAlternativeVersionId(),JSON.stringify(i)]),a=cv.diffCache.get(s);if(a&&a.context===r)return a.result;const l=uo.create(),c=await this.editorWorkerService.computeDiff(e.uri,t.uri,i,this.diffAlgorithm),u=l.elapsed();if(this.telemetryService.publicLog2("diffEditor.computeDiff",{timeMs:u,timedOut:(c==null?void 0:c.quitEarly)??!0,detectedMoves:i.computeMoves?(c==null?void 0:c.moves.length)??0:-1}),n.isCancellationRequested)return{changes:[],identical:!1,quitEarly:!0,moves:[]};if(!c)throw new Error("no diff result available");return cv.diffCache.size>10&&cv.diffCache.delete(cv.diffCache.keys().next().value),cv.diffCache.set(s,{result:c,context:r}),c}setOptions(e){var i;let t=!1;e.diffAlgorithm&&this.diffAlgorithm!==e.diffAlgorithm&&((i=this.diffAlgorithmOnDidChangeSubscription)==null||i.dispose(),this.diffAlgorithmOnDidChangeSubscription=void 0,this.diffAlgorithm=e.diffAlgorithm,typeof e.diffAlgorithm!="string"&&(this.diffAlgorithmOnDidChangeSubscription=e.diffAlgorithm.onDidChange(()=>this.onDidChangeEventEmitter.fire())),t=!0),t&&this.onDidChangeEventEmitter.fire()}},cv=gb,gb.diffCache=new Map,gb);hU=cv=Nfe([dU(1,Aa),dU(2,tr)],hU);function Z4(){return e8&&!!e8.VSCODE_DEV}function Rfe(o){if(Z4()){const e=C9e();return e.add(o),{dispose(){e.delete(o)}}}else return{dispose(){}}}function C9e(){OR||(OR=new Set);const o=globalThis;return o.$hotReload_applyNewExports||(o.$hotReload_applyNewExports=e=>{const t={config:{mode:void 0},...e},i=[];for(const n of OR){const s=n(t);s&&i.push(s)}if(i.length>0)return n=>{let s=!1;for(const r of i)r(n)&&(s=!0);return s}}),OR}let OR;Z4()&&Rfe(({oldExports:o,newSrc:e,config:t})=>{if(t.mode==="patch-prototype")return i=>{var n,s;for(const r in i){const a=i[r];if(console.log(`[hot-reload] Patching prototype methods of '${r}'`,{exportedItem:a}),typeof a=="function"&&a.prototype){const l=o[r];if(l){for(const c of Object.getOwnPropertyNames(a.prototype)){const u=Object.getOwnPropertyDescriptor(a.prototype,c),f=Object.getOwnPropertyDescriptor(l.prototype,c);((n=u==null?void 0:u.value)==null?void 0:n.toString())!==((s=f==null?void 0:f.value)==null?void 0:s.toString())&&console.log(`[hot-reload] Patching prototype method '${r}.${c}'`),Object.defineProperty(l.prototype,c,u)}i[r]=l}}}return!0}});function Ga(o,e){return y9e([o],e),o}function y9e(o,e){Z4()&&No("reload",i=>Rfe(({oldExports:n})=>{if([...Object.values(n)].some(s=>o.includes(s)))return s=>(i(void 0),!0)})).read(e)}var w9e=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},S9e=function(o,e){return function(t,i){e(t,i,o)}};let fU=class extends X{setActiveMovedText(e){this._activeMovedText.set(e,void 0)}constructor(e,t,i){super(),this.model=e,this._options=t,this._diffProviderFactoryService=i,this._isDiffUpToDate=Wt(this,!1),this.isDiffUpToDate=this._isDiffUpToDate,this._diff=Wt(this,void 0),this.diff=this._diff,this._unchangedRegions=Wt(this,void 0),this.unchangedRegions=Qe(this,a=>{var l;return this._options.hideUnchangedRegions.read(a)?((l=this._unchangedRegions.read(a))==null?void 0:l.regions)??[]:(Mn(c=>{var u;for(const f of((u=this._unchangedRegions.get())==null?void 0:u.regions)||[])f.collapseAll(c)}),[])}),this.movedTextToCompare=Wt(this,void 0),this._activeMovedText=Wt(this,void 0),this._hoveredMovedText=Wt(this,void 0),this.activeMovedText=Qe(this,a=>this.movedTextToCompare.read(a)??this._hoveredMovedText.read(a)??this._activeMovedText.read(a)),this._cancellationTokenSource=new An,this._diffProvider=Qe(this,a=>{const l=this._diffProviderFactoryService.createDiffProvider({diffAlgorithm:this._options.diffAlgorithm.read(a)}),c=No("onDidChange",l.onDidChange);return{diffProvider:l,onChangeSignal:c}}),this._register(it(()=>this._cancellationTokenSource.cancel()));const n=JS("contentChangedSignal"),s=this._register(new Oi(()=>n.trigger(void 0),200));this._register(bt(a=>{const l=this._unchangedRegions.read(a);if(!l||l.regions.some(_=>_.isDragged.read(a)))return;const c=l.originalDecorationIds.map(_=>e.original.getDecorationRange(_)).map(_=>_?It.fromRangeInclusive(_):void 0),u=l.modifiedDecorationIds.map(_=>e.modified.getDecorationRange(_)).map(_=>_?It.fromRangeInclusive(_):void 0),f=l.regions.map((_,b)=>!c[b]||!u[b]?void 0:new nm(c[b].startLineNumber,u[b].startLineNumber,c[b].length,_.visibleLineCountTop.read(a),_.visibleLineCountBottom.read(a))).filter(Dh),g=[];let p=!1;for(const _ of vq(f,(b,y)=>b.getHiddenModifiedRange(a).endLineNumberExclusive===y.getHiddenModifiedRange(a).startLineNumber))if(_.length>1){p=!0;const b=_.reduce((S,L)=>S+L.lineCount,0),y=new nm(_[0].originalLineNumber,_[0].modifiedLineNumber,b,_[0].visibleLineCountTop.get(),_[_.length-1].visibleLineCountBottom.get());g.push(y)}else g.push(_[0]);if(p){const _=e.original.deltaDecorations(l.originalDecorationIds,g.map(y=>({range:y.originalUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}}))),b=e.modified.deltaDecorations(l.modifiedDecorationIds,g.map(y=>({range:y.modifiedUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}})));Mn(y=>{this._unchangedRegions.set({regions:g,originalDecorationIds:_,modifiedDecorationIds:b},y)})}}));const r=(a,l,c)=>{const u=nm.fromDiffs(a.changes,e.original.getLineCount(),e.modified.getLineCount(),this._options.hideUnchangedRegionsMinimumLineCount.read(c),this._options.hideUnchangedRegionsContextLineCount.read(c));let f;const g=this._unchangedRegions.get();if(g){const y=g.originalDecorationIds.map(k=>e.original.getDecorationRange(k)).map(k=>k?It.fromRangeInclusive(k):void 0),S=g.modifiedDecorationIds.map(k=>e.modified.getDecorationRange(k)).map(k=>k?It.fromRangeInclusive(k):void 0);let x=a9e(g.regions.map((k,E)=>{if(!y[E]||!S[E])return;const N=y[E].length;return new nm(y[E].startLineNumber,S[E].startLineNumber,N,Math.min(k.visibleLineCountTop.get(),N),Math.min(k.visibleLineCountBottom.get(),N-k.visibleLineCountTop.get()))}).filter(Dh),(k,E)=>!E||k.modifiedLineNumber>=E.modifiedLineNumber+E.lineCount&&k.originalLineNumber>=E.originalLineNumber+E.lineCount).map(k=>new Cr(k.getHiddenOriginalRange(c),k.getHiddenModifiedRange(c)));x=Cr.clip(x,It.ofLength(1,e.original.getLineCount()),It.ofLength(1,e.modified.getLineCount())),f=Cr.inverse(x,e.original.getLineCount(),e.modified.getLineCount())}const p=[];if(f)for(const y of u){const S=f.filter(L=>L.original.intersectsStrict(y.originalUnchangedRange)&&L.modified.intersectsStrict(y.modifiedUnchangedRange));p.push(...y.setVisibleRanges(S,l))}else p.push(...u);const _=e.original.deltaDecorations((g==null?void 0:g.originalDecorationIds)||[],p.map(y=>({range:y.originalUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}}))),b=e.modified.deltaDecorations((g==null?void 0:g.modifiedDecorationIds)||[],p.map(y=>({range:y.modifiedUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}})));this._unchangedRegions.set({regions:p,originalDecorationIds:_,modifiedDecorationIds:b},l)};this._register(e.modified.onDidChangeContent(a=>{if(this._diff.get()){const c=ng.fromModelContentChanges(a.changes);this._lastDiff,e.original,e.modified}this._isDiffUpToDate.set(!1,void 0),s.schedule()})),this._register(e.original.onDidChangeContent(a=>{if(this._diff.get()){const c=ng.fromModelContentChanges(a.changes);this._lastDiff,e.original,e.modified}this._isDiffUpToDate.set(!1,void 0),s.schedule()})),this._register(ka(async(a,l)=>{this._options.hideUnchangedRegionsMinimumLineCount.read(a),this._options.hideUnchangedRegionsContextLineCount.read(a),s.cancel(),n.read(a);const c=this._diffProvider.read(a);c.onChangeSignal.read(a),Ga(ide,a),Ga(DV,a),this._isDiffUpToDate.set(!1,void 0);let u=[];l.add(e.original.onDidChangeContent(p=>{const _=ng.fromModelContentChanges(p.changes);u=lP(u,_)}));let f=[];l.add(e.modified.onDidChangeContent(p=>{const _=ng.fromModelContentChanges(p.changes);f=lP(f,_)}));let g=await c.diffProvider.computeDiff(e.original,e.modified,{ignoreTrimWhitespace:this._options.ignoreTrimWhitespace.read(a),maxComputationTimeMs:this._options.maxComputationTimeMs.read(a),computeMoves:this._options.showMoves.read(a)},this._cancellationTokenSource.token);this._cancellationTokenSource.token.isCancellationRequested||e.original.isDisposed()||e.modified.isDisposed()||(g=L9e(g,e.original,e.modified),g=(e.original,e.modified,void 0)??g,g=(e.original,e.modified,void 0)??g,Mn(p=>{r(g,p),this._lastDiff=g;const _=QG.fromDiffResult(g);this._diff.set(_,p),this._isDiffUpToDate.set(!0,p);const b=this.movedTextToCompare.get();this.movedTextToCompare.set(b?this._lastDiff.moves.find(y=>y.lineRangeMapping.modified.intersect(b.lineRangeMapping.modified)):void 0,p)}))}))}ensureModifiedLineIsVisible(e,t,i){var s,r;if(((s=this.diff.get())==null?void 0:s.mappings.length)===0)return;const n=((r=this._unchangedRegions.get())==null?void 0:r.regions)||[];for(const a of n)if(a.getHiddenModifiedRange(void 0).contains(e)){a.showModifiedLine(e,t,i);return}}ensureOriginalLineIsVisible(e,t,i){var s,r;if(((s=this.diff.get())==null?void 0:s.mappings.length)===0)return;const n=((r=this._unchangedRegions.get())==null?void 0:r.regions)||[];for(const a of n)if(a.getHiddenOriginalRange(void 0).contains(e)){a.showOriginalLine(e,t,i);return}}async waitForDiff(){await Cue(this.isDiffUpToDate,e=>e)}serializeState(){const e=this._unchangedRegions.get();return{collapsedRegions:e==null?void 0:e.regions.map(t=>({range:t.getHiddenModifiedRange(void 0).serialize()}))}}restoreSerializedState(e){var n;const t=(n=e.collapsedRegions)==null?void 0:n.map(s=>It.deserialize(s.range)),i=this._unchangedRegions.get();!i||!t||Mn(s=>{for(const r of i.regions)for(const a of t)if(r.modifiedUnchangedRange.intersect(a)){r.setHiddenModifiedRange(a,s);break}})}};fU=w9e([S9e(2,CI)],fU);function L9e(o,e,t){return{changes:o.changes.map(i=>new Vl(i.original,i.modified,i.innerChanges?i.innerChanges.map(n=>x9e(n,e,t)):void 0)),moves:o.moves,identical:o.identical,quitEarly:o.quitEarly}}function x9e(o,e,t){let i=o.originalRange,n=o.modifiedRange;return i.startColumn===1&&n.startColumn===1&&(i.endColumn!==1||n.endColumn!==1)&&i.endColumn===e.getLineMaxColumn(i.endLineNumber)&&n.endColumn===t.getLineMaxColumn(n.endLineNumber)&&i.endLineNumber<e.getLineCount()&&n.endLineNumber<t.getLineCount()&&(i=i.setEndPosition(i.endLineNumber+1,1),n=n.setEndPosition(n.endLineNumber+1,1)),new Il(i,n)}class QG{static fromDiffResult(e){return new QG(e.changes.map(t=>new Mfe(t)),e.moves||[],e.identical,e.quitEarly)}constructor(e,t,i,n){this.mappings=e,this.movedTexts=t,this.identical=i,this.quitEarly=n}}class Mfe{constructor(e){this.lineRangeMapping=e}}class nm{static fromDiffs(e,t,i,n,s){const r=Vl.inverse(e,t,i),a=[];for(const l of r){let c=l.original.startLineNumber,u=l.modified.startLineNumber,f=l.original.length;const g=c===1&&u===1,p=c+f===t+1&&u+f===i+1;(g||p)&&f>=s+n?(g&&!p&&(f-=s),p&&!g&&(c+=s,u+=s,f-=s),a.push(new nm(c,u,f,0,0))):f>=s*2+n&&(c+=s,u+=s,f-=s*2,a.push(new nm(c,u,f,0,0)))}return a}get originalUnchangedRange(){return It.ofLength(this.originalLineNumber,this.lineCount)}get modifiedUnchangedRange(){return It.ofLength(this.modifiedLineNumber,this.lineCount)}constructor(e,t,i,n,s){this.originalLineNumber=e,this.modifiedLineNumber=t,this.lineCount=i,this._visibleLineCountTop=Wt(this,0),this.visibleLineCountTop=this._visibleLineCountTop,this._visibleLineCountBottom=Wt(this,0),this.visibleLineCountBottom=this._visibleLineCountBottom,this._shouldHideControls=Qe(this,l=>this.visibleLineCountTop.read(l)+this.visibleLineCountBottom.read(l)===this.lineCount&&!this.isDragged.read(l)),this.isDragged=Wt(this,void 0);const r=Math.max(Math.min(n,this.lineCount),0),a=Math.max(Math.min(s,this.lineCount-n),0);iie(n===r),iie(s===a),this._visibleLineCountTop.set(r,void 0),this._visibleLineCountBottom.set(a,void 0)}setVisibleRanges(e,t){const i=[],n=new vc(e.map(l=>l.modified)).subtractFrom(this.modifiedUnchangedRange);let s=this.originalLineNumber,r=this.modifiedLineNumber;const a=this.modifiedLineNumber+this.lineCount;if(n.ranges.length===0)this.showAll(t),i.push(this);else{let l=0;for(const c of n.ranges){const u=l===n.ranges.length-1;l++;const f=(u?a:c.endLineNumberExclusive)-r,g=new nm(s,r,f,0,0);g.setHiddenModifiedRange(c,t),i.push(g),s=g.originalUnchangedRange.endLineNumberExclusive,r=g.modifiedUnchangedRange.endLineNumberExclusive}}return i}shouldHideControls(e){return this._shouldHideControls.read(e)}getHiddenOriginalRange(e){return It.ofLength(this.originalLineNumber+this._visibleLineCountTop.read(e),this.lineCount-this._visibleLineCountTop.read(e)-this._visibleLineCountBottom.read(e))}getHiddenModifiedRange(e){return It.ofLength(this.modifiedLineNumber+this._visibleLineCountTop.read(e),this.lineCount-this._visibleLineCountTop.read(e)-this._visibleLineCountBottom.read(e))}setHiddenModifiedRange(e,t){const i=e.startLineNumber-this.modifiedLineNumber,n=this.modifiedLineNumber+this.lineCount-e.endLineNumberExclusive;this.setState(i,n,t)}getMaxVisibleLineCountTop(){return this.lineCount-this._visibleLineCountBottom.get()}getMaxVisibleLineCountBottom(){return this.lineCount-this._visibleLineCountTop.get()}showMoreAbove(e=10,t){const i=this.getMaxVisibleLineCountTop();this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get()+e,i),t)}showMoreBelow(e=10,t){const i=this.lineCount-this._visibleLineCountTop.get();this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get()+e,i),t)}showAll(e){this._visibleLineCountBottom.set(this.lineCount-this._visibleLineCountTop.get(),e)}showModifiedLine(e,t,i){const n=e+1-(this.modifiedLineNumber+this._visibleLineCountTop.get()),s=this.modifiedLineNumber-this._visibleLineCountBottom.get()+this.lineCount-e;t===0&&n<s||t===1?this._visibleLineCountTop.set(this._visibleLineCountTop.get()+n,i):this._visibleLineCountBottom.set(this._visibleLineCountBottom.get()+s,i)}showOriginalLine(e,t,i){const n=e-this.originalLineNumber,s=this.originalLineNumber+this.lineCount-e;t===0&&n<s||t===1?this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get()+s-n,this.getMaxVisibleLineCountTop()),i):this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get()+n-s,this.getMaxVisibleLineCountBottom()),i)}collapseAll(e){this._visibleLineCountTop.set(0,e),this._visibleLineCountBottom.set(0,e)}setState(e,t,i){e=Math.max(Math.min(e,this.lineCount),0),t=Math.max(Math.min(t,this.lineCount-e),0),this._visibleLineCountTop.set(e,i),this._visibleLineCountBottom.set(t,i)}}class k9e extends X{get visibility(){return this._visibility}set visibility(e){this._visibility!==e&&(this._visibility=e,this._diffActions.style.visibility=e?"visible":"hidden")}constructor(e,t,i,n,s,r,a,l,c){super(),this._getViewZoneId=e,this._marginDomNode=t,this._modifiedEditor=i,this._diff=n,this._editor=s,this._viewLineCounts=r,this._originalTextModel=a,this._contextMenuService=l,this._clipboardService=c,this._visibility=!1,this._marginDomNode.style.zIndex="10",this._diffActions=document.createElement("div"),this._diffActions.className=ut.asClassName(Se.lightBulb)+" lightbulb-glyph",this._diffActions.style.position="absolute";const u=this._modifiedEditor.getOption(67);this._diffActions.style.right="0px",this._diffActions.style.visibility="hidden",this._diffActions.style.height=`${u}px`,this._diffActions.style.lineHeight=`${u}px`,this._marginDomNode.appendChild(this._diffActions);let f=0;const g=i.getOption(128)&&!hu,p=(_,b)=>{this._contextMenuService.showContextMenu({domForShadowRoot:g?i.getDomNode()??void 0:void 0,getAnchor:()=>({x:_,y:b}),getActions:()=>{const y=[],S=n.modified.isEmpty;return y.push(new tl("diff.clipboard.copyDeletedContent",S?n.original.length>1?v("diff.clipboard.copyDeletedLinesContent.label","Copy deleted lines"):v("diff.clipboard.copyDeletedLinesContent.single.label","Copy deleted line"):n.original.length>1?v("diff.clipboard.copyChangedLinesContent.label","Copy changed lines"):v("diff.clipboard.copyChangedLinesContent.single.label","Copy changed line"),void 0,!0,async()=>{const x=this._originalTextModel.getValueInRange(n.original.toExclusiveRange());await this._clipboardService.writeText(x)})),n.original.length>1&&y.push(new tl("diff.clipboard.copyDeletedLineContent",S?v("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",n.original.startLineNumber+f):v("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",n.original.startLineNumber+f),void 0,!0,async()=>{let x=this._originalTextModel.getLineContent(n.original.startLineNumber+f);x===""&&(x=this._originalTextModel.getEndOfLineSequence()===0?`
`:`\r
`),await this._clipboardService.writeText(x)})),i.getOption(92)||y.push(new tl("diff.inline.revertChange",v("diff.inline.revertChange.label","Revert this change"),void 0,!0,async()=>{this._editor.revert(this._diff)})),y},autoSelectFirstItem:!0})};this._register(Bn(this._diffActions,"mousedown",_=>{if(!_.leftButton)return;const{top:b,height:y}=os(this._diffActions),S=Math.floor(u/3);_.preventDefault(),p(_.posx,b+y+S)})),this._register(i.onMouseMove(_=>{(_.target.type===8||_.target.type===5)&&_.target.detail.viewZoneId===this._getViewZoneId()?(f=this._updateLightBulbPosition(this._marginDomNode,_.event.browserEvent.y,u),this.visibility=!0):this.visibility=!1})),this._register(i.onMouseDown(_=>{_.event.leftButton&&(_.target.type===8||_.target.type===5)&&_.target.detail.viewZoneId===this._getViewZoneId()&&(_.event.preventDefault(),f=this._updateLightBulbPosition(this._marginDomNode,_.event.browserEvent.y,u),p(_.event.posx,_.event.posy+u))}))}_updateLightBulbPosition(e,t,i){const{top:n}=os(e),s=t-n,r=Math.floor(s/i),a=r*i;if(this._diffActions.style.top=`${a}px`,this._viewLineCounts){let l=0;for(let c=0;c<this._viewLineCounts.length;c++)if(l+=this._viewLineCounts[c],r<l)return c}return r}}const zoe=Ag("diffEditorWidget",{createHTML:o=>o});function D9e(o,e,t,i){yo(i,e.fontInfo);const n=t.length>0,s=new qS(1e4);let r=0,a=0;const l=[];for(let g=0;g<o.lineTokens.length;g++){const p=g+1,_=o.lineTokens[g],b=o.lineBreakData[g],y=Kr.filter(t,p,1,Number.MAX_SAFE_INTEGER);if(b){let S=0;for(const L of b.breakOffsets){const x=_.sliceAndInflate(S,L,0);r=Math.max(r,Uoe(a,x,Kr.extractWrapped(y,S,L),n,o.mightContainNonBasicASCII,o.mightContainRTL,e,s)),a++,S=L}l.push(b.breakOffsets.length)}else l.push(1),r=Math.max(r,Uoe(a,_,y,n,o.mightContainNonBasicASCII,o.mightContainRTL,e,s)),a++}r+=e.scrollBeyondLastColumn;const c=s.build(),u=zoe?zoe.createHTML(c):c;i.innerHTML=u;const f=r*e.typicalHalfwidthCharacterWidth;return{heightInLines:a,minWidthInPx:f,viewLineCounts:l}}class E9e{constructor(e,t,i,n){this.lineTokens=e,this.lineBreakData=t,this.mightContainNonBasicASCII=i,this.mightContainRTL=n}}class JG{static fromEditor(e){var s;const t=e.getOptions(),i=t.get(50),n=t.get(146);return new JG(((s=e.getModel())==null?void 0:s.getOptions().tabSize)||0,i,t.get(33),i.typicalHalfwidthCharacterWidth,t.get(105),t.get(67),n.decorationsWidth,t.get(118),t.get(100),t.get(95),t.get(51))}constructor(e,t,i,n,s,r,a,l,c,u,f){this.tabSize=e,this.fontInfo=t,this.disableMonospaceOptimizations=i,this.typicalHalfwidthCharacterWidth=n,this.scrollBeyondLastColumn=s,this.lineHeight=r,this.lineDecorationsWidth=a,this.stopRenderingLineAfter=l,this.renderWhitespace=c,this.renderControlCharacters=u,this.fontLigatures=f}}function Uoe(o,e,t,i,n,s,r,a){a.appendString('<div class="view-line'),i||a.appendString(" char-delete"),a.appendString('" style="top:'),a.appendString(String(o*r.lineHeight)),a.appendString('px;width:1000000px;">');const l=e.getLineContent(),c=ql.isBasicASCII(l,n),u=ql.containsRTL(l,c,s),f=vI(new r_(r.fontInfo.isMonospace&&!r.disableMonospaceOptimizations,r.fontInfo.canUseHalfwidthRightwardsArrow,l,!1,c,u,0,e,t,r.tabSize,0,r.fontInfo.spaceWidth,r.fontInfo.middotWidth,r.fontInfo.wsmiddotWidth,r.stopRenderingLineAfter,r.renderWhitespace,r.renderControlCharacters,r.fontLigatures!==Mm.OFF,null),a);return a.appendString("</div>"),f.characterMapping.getHorizontalOffset(f.characterMapping.length)}var I9e=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},$oe=function(o,e){return function(t,i){e(t,i,o)}};let gU=class extends X{constructor(e,t,i,n,s,r,a,l,c,u){super(),this._targetWindow=e,this._editors=t,this._diffModel=i,this._options=n,this._diffEditorWidget=s,this._canIgnoreViewZoneUpdateEvent=r,this._origViewZonesToIgnore=a,this._modViewZonesToIgnore=l,this._clipboardService=c,this._contextMenuService=u,this._originalTopPadding=Wt(this,0),this._originalScrollOffset=Wt(this,0),this._originalScrollOffsetAnimated=Foe(this._targetWindow,this._originalScrollOffset,this._store),this._modifiedTopPadding=Wt(this,0),this._modifiedScrollOffset=Wt(this,0),this._modifiedScrollOffsetAnimated=Foe(this._targetWindow,this._modifiedScrollOffset,this._store);const f=Wt("invalidateAlignmentsState",0),g=this._register(new Oi(()=>{f.set(f.get()+1,void 0)},0));this._register(this._editors.original.onDidChangeViewZones(x=>{this._canIgnoreViewZoneUpdateEvent()||g.schedule()})),this._register(this._editors.modified.onDidChangeViewZones(x=>{this._canIgnoreViewZoneUpdateEvent()||g.schedule()})),this._register(this._editors.original.onDidChangeConfiguration(x=>{(x.hasChanged(147)||x.hasChanged(67))&&g.schedule()})),this._register(this._editors.modified.onDidChangeConfiguration(x=>{(x.hasChanged(147)||x.hasChanged(67))&&g.schedule()}));const p=this._diffModel.map(x=>x?Ni(this,x.model.original.onDidChangeTokens,()=>x.model.original.tokenization.backgroundTokenizationState===2):void 0).map((x,k)=>x==null?void 0:x.read(k)),_=Qe(x=>{const k=this._diffModel.read(x),E=k==null?void 0:k.diff.read(x);if(!k||!E)return null;f.read(x);const A=this._options.renderSideBySide.read(x);return joe(this._editors.original,this._editors.modified,E.mappings,this._origViewZonesToIgnore,this._modViewZonesToIgnore,A)}),b=Qe(x=>{var N;const k=(N=this._diffModel.read(x))==null?void 0:N.movedTextToCompare.read(x);if(!k)return null;f.read(x);const E=k.changes.map(A=>new Mfe(A));return joe(this._editors.original,this._editors.modified,E,this._origViewZonesToIgnore,this._modViewZonesToIgnore,!0)});function y(){const x=document.createElement("div");return x.className="diagonal-fill",x}const S=this._register(new le);this.viewZones=n_(this,(x,k)=>{var pe,Fe,Ye,Ut;S.clear();const E=_.read(x)||[],N=[],A=[],P=this._modifiedTopPadding.read(x);P>0&&A.push({afterLineNumber:0,domNode:document.createElement("div"),heightInPx:P,showInHiddenAreas:!0,suppressMouseDown:!0});const H=this._originalTopPadding.read(x);H>0&&N.push({afterLineNumber:0,domNode:document.createElement("div"),heightInPx:H,showInHiddenAreas:!0,suppressMouseDown:!0});const ee=this._options.renderSideBySide.read(x),Q=ee||(pe=this._editors.modified._getViewModel())==null?void 0:pe.createLineBreaksComputer();if(Q){const dt=this._editors.original.getModel();for(const Ot of E)if(Ot.diff)for(let Bi=Ot.originalRange.startLineNumber;Bi<Ot.originalRange.endLineNumberExclusive;Bi++){if(Bi>dt.getLineCount())return{orig:N,mod:A};Q==null||Q.addRequest(dt.getLineContent(Bi),null,null)}}const te=(Q==null?void 0:Q.finalize())??[];let J=0;const Z=this._editors.modified.getOption(67),he=(Fe=this._diffModel.read(x))==null?void 0:Fe.movedTextToCompare.read(x),Ce=((Ye=this._editors.original.getModel())==null?void 0:Ye.mightContainNonBasicASCII())??!1,we=((Ut=this._editors.original.getModel())==null?void 0:Ut.mightContainRTL())??!1,me=JG.fromEditor(this._editors.modified);for(const dt of E)if(dt.diff&&!ee&&(!this._options.useTrueInlineDiffRendering.read(x)||!eY(dt.diff))){if(!dt.originalRange.isEmpty){p.read(x);const Bi=document.createElement("div");Bi.classList.add("view-lines","line-delete","monaco-mouse-cursor-text");const Qi=this._editors.original.getModel();if(dt.originalRange.endLineNumberExclusive-1>Qi.getLineCount())return{orig:N,mod:A};const Xn=new E9e(dt.originalRange.mapToLineArray(sn=>Qi.tokenization.getLineTokens(sn)),dt.originalRange.mapToLineArray(sn=>te[J++]),Ce,we),Qn=[];for(const sn of dt.diff.innerChanges||[])Qn.push(new Ck(sn.originalRange.delta(-(dt.diff.original.startLineNumber-1)),wS.className,0));const Jn=D9e(Xn,me,Qn,Bi),yn=document.createElement("div");if(yn.className="inline-deleted-margin-view-zone",yo(yn,me.fontInfo),this._options.renderIndicators.read(x))for(let sn=0;sn<Jn.heightInLines;sn++){const wn=document.createElement("div");wn.className=`delete-sign ${ut.asClassName(Tfe)}`,wn.setAttribute("style",`position:absolute;top:${sn*Z}px;width:${me.lineDecorationsWidth}px;height:${Z}px;right:0;`),yn.appendChild(wn)}let ws;S.add(new k9e(()=>Kp(ws),yn,this._editors.modified,dt.diff,this._diffEditorWidget,Jn.viewLineCounts,this._editors.original.getModel(),this._contextMenuService,this._clipboardService));for(let sn=0;sn<Jn.viewLineCounts.length;sn++){const wn=Jn.viewLineCounts[sn];wn>1&&N.push({afterLineNumber:dt.originalRange.startLineNumber+sn,domNode:y(),heightInPx:(wn-1)*Z,showInHiddenAreas:!0,suppressMouseDown:!0})}A.push({afterLineNumber:dt.modifiedRange.startLineNumber-1,domNode:Bi,heightInPx:Jn.heightInLines*Z,minWidthInPx:Jn.minWidthInPx,marginDomNode:yn,setZoneId(sn){ws=sn},showInHiddenAreas:!0,suppressMouseDown:!0})}const Ot=document.createElement("div");Ot.className="gutter-delete",N.push({afterLineNumber:dt.originalRange.endLineNumberExclusive-1,domNode:y(),heightInPx:dt.modifiedHeightInPx,marginDomNode:Ot,showInHiddenAreas:!0,suppressMouseDown:!0})}else{const Ot=dt.modifiedHeightInPx-dt.originalHeightInPx;if(Ot>0){if(he!=null&&he.lineRangeMapping.original.delta(-1).deltaLength(2).contains(dt.originalRange.endLineNumberExclusive-1))continue;N.push({afterLineNumber:dt.originalRange.endLineNumberExclusive-1,domNode:y(),heightInPx:Ot,showInHiddenAreas:!0,suppressMouseDown:!0})}else{let Bi=function(){const Xn=document.createElement("div");return Xn.className="arrow-revert-change "+ut.asClassName(Se.arrowRight),k.add(se(Xn,"mousedown",Qn=>Qn.stopPropagation())),k.add(se(Xn,"click",Qn=>{Qn.stopPropagation(),s.revert(dt.diff)})),xe("div",{},Xn)};if(he!=null&&he.lineRangeMapping.modified.delta(-1).deltaLength(2).contains(dt.modifiedRange.endLineNumberExclusive-1))continue;let Qi;dt.diff&&dt.diff.modified.isEmpty&&this._options.shouldRenderOldRevertArrows.read(x)&&(Qi=Bi()),A.push({afterLineNumber:dt.modifiedRange.endLineNumberExclusive-1,domNode:y(),heightInPx:-Ot,marginDomNode:Qi,showInHiddenAreas:!0,suppressMouseDown:!0})}}for(const dt of b.read(x)??[]){if(!(he!=null&&he.lineRangeMapping.original.intersect(dt.originalRange))||!(he!=null&&he.lineRangeMapping.modified.intersect(dt.modifiedRange)))continue;const Ot=dt.modifiedHeightInPx-dt.originalHeightInPx;Ot>0?N.push({afterLineNumber:dt.originalRange.endLineNumberExclusive-1,domNode:y(),heightInPx:Ot,showInHiddenAreas:!0,suppressMouseDown:!0}):A.push({afterLineNumber:dt.modifiedRange.endLineNumberExclusive-1,domNode:y(),heightInPx:-Ot,showInHiddenAreas:!0,suppressMouseDown:!0})}return{orig:N,mod:A}});let L=!1;this._register(this._editors.original.onDidScrollChange(x=>{x.scrollLeftChanged&&!L&&(L=!0,this._editors.modified.setScrollLeft(x.scrollLeft),L=!1)})),this._register(this._editors.modified.onDidScrollChange(x=>{x.scrollLeftChanged&&!L&&(L=!0,this._editors.original.setScrollLeft(x.scrollLeft),L=!1)})),this._originalScrollTop=Ni(this._editors.original.onDidScrollChange,()=>this._editors.original.getScrollTop()),this._modifiedScrollTop=Ni(this._editors.modified.onDidScrollChange,()=>this._editors.modified.getScrollTop()),this._register(bt(x=>{const k=this._originalScrollTop.read(x)-(this._originalScrollOffsetAnimated.get()-this._modifiedScrollOffsetAnimated.read(x))-(this._originalTopPadding.get()-this._modifiedTopPadding.read(x));k!==this._editors.modified.getScrollTop()&&this._editors.modified.setScrollTop(k,1)})),this._register(bt(x=>{const k=this._modifiedScrollTop.read(x)-(this._modifiedScrollOffsetAnimated.get()-this._originalScrollOffsetAnimated.read(x))-(this._modifiedTopPadding.get()-this._originalTopPadding.read(x));k!==this._editors.original.getScrollTop()&&this._editors.original.setScrollTop(k,1)})),this._register(bt(x=>{var N;const k=(N=this._diffModel.read(x))==null?void 0:N.movedTextToCompare.read(x);let E=0;if(k){const A=this._editors.original.getTopForLineNumber(k.lineRangeMapping.original.startLineNumber,!0)-this._originalTopPadding.get();E=this._editors.modified.getTopForLineNumber(k.lineRangeMapping.modified.startLineNumber,!0)-this._modifiedTopPadding.get()-A}E>0?(this._modifiedTopPadding.set(0,void 0),this._originalTopPadding.set(E,void 0)):E<0?(this._modifiedTopPadding.set(-E,void 0),this._originalTopPadding.set(0,void 0)):setTimeout(()=>{this._modifiedTopPadding.set(0,void 0),this._originalTopPadding.set(0,void 0)},400),this._editors.modified.hasTextFocus()?this._originalScrollOffset.set(this._modifiedScrollOffset.get()-E,void 0,!0):this._modifiedScrollOffset.set(this._originalScrollOffset.get()+E,void 0,!0)}))}};gU=I9e([$oe(8,Bg),$oe(9,cl)],gU);function joe(o,e,t,i,n,s){const r=new Cg(qoe(o,i)),a=new Cg(qoe(e,n)),l=o.getOption(67),c=e.getOption(67),u=[];let f=0,g=0;function p(_,b){for(;;){let y=r.peek(),S=a.peek();if(y&&y.lineNumber>=_&&(y=void 0),S&&S.lineNumber>=b&&(S=void 0),!y&&!S)break;const L=y?y.lineNumber-f:Number.MAX_VALUE,x=S?S.lineNumber-g:Number.MAX_VALUE;L<x?(r.dequeue(),S={lineNumber:y.lineNumber-f+g,heightInPx:0}):L>x?(a.dequeue(),y={lineNumber:S.lineNumber-g+f,heightInPx:0}):(r.dequeue(),a.dequeue()),u.push({originalRange:It.ofLength(y.lineNumber,1),modifiedRange:It.ofLength(S.lineNumber,1),originalHeightInPx:l+y.heightInPx,modifiedHeightInPx:c+S.heightInPx,diff:void 0})}}for(const _ of t){let x=function(k,E,N=!1){var Q,te;if(k<L||E<S)return;if(y)y=!1;else if(!N&&(k===L||E===S))return;const A=new It(L,k),P=new It(S,E);if(A.isEmpty&&P.isEmpty)return;const H=((Q=r.takeWhile(J=>J.lineNumber<k))==null?void 0:Q.reduce((J,Z)=>J+Z.heightInPx,0))??0,ee=((te=a.takeWhile(J=>J.lineNumber<E))==null?void 0:te.reduce((J,Z)=>J+Z.heightInPx,0))??0;u.push({originalRange:A,modifiedRange:P,originalHeightInPx:A.length*l+H,modifiedHeightInPx:P.length*c+ee,diff:_.lineRangeMapping}),L=k,S=E};const b=_.lineRangeMapping;p(b.original.startLineNumber,b.modified.startLineNumber);let y=!0,S=b.modified.startLineNumber,L=b.original.startLineNumber;if(s)for(const k of b.innerChanges||[]){k.originalRange.startColumn>1&&k.modifiedRange.startColumn>1&&x(k.originalRange.startLineNumber,k.modifiedRange.startLineNumber);const E=o.getModel(),N=k.originalRange.endLineNumber<=E.getLineCount()?E.getLineMaxColumn(k.originalRange.endLineNumber):Number.MAX_SAFE_INTEGER;k.originalRange.endColumn<N&&x(k.originalRange.endLineNumber,k.modifiedRange.endLineNumber)}x(b.original.endLineNumberExclusive,b.modified.endLineNumberExclusive,!0),f=b.original.endLineNumberExclusive,g=b.modified.endLineNumberExclusive}return p(Number.MAX_VALUE,Number.MAX_VALUE),u}function qoe(o,e){const t=[],i=[],n=o.getOption(147).wrappingColumn!==-1,s=o._getViewModel().coordinatesConverter,r=o.getOption(67);if(n)for(let l=1;l<=o.getModel().getLineCount();l++){const c=s.getModelLineViewLineCount(l);c>1&&i.push({lineNumber:l,heightInPx:r*(c-1)})}for(const l of o.getWhitespaces()){if(e.has(l.id))continue;const c=l.afterLineNumber===0?0:s.convertViewPositionToModelPosition(new G(l.afterLineNumber,1)).lineNumber;t.push({lineNumber:c,heightInPx:l.height})}return i9e(t,i,l=>l.lineNumber,(l,c)=>({lineNumber:l.lineNumber,heightInPx:l.heightInPx+c.heightInPx}))}function eY(o){return o.innerChanges?o.innerChanges.every(e=>Koe(e.modifiedRange)&&Koe(e.originalRange)||e.originalRange.equalsRange(new M(1,1,1,1))):!1}function Koe(o){return o.startLineNumber===o.endLineNumber}const Jk=class Jk extends X{constructor(e,t,i,n,s){super(),this._rootElement=e,this._diffModel=t,this._originalEditorLayoutInfo=i,this._modifiedEditorLayoutInfo=n,this._editors=s,this._originalScrollTop=Ni(this,this._editors.original.onDidScrollChange,()=>this._editors.original.getScrollTop()),this._modifiedScrollTop=Ni(this,this._editors.modified.onDidScrollChange,()=>this._editors.modified.getScrollTop()),this._viewZonesChanged=No("onDidChangeViewZones",this._editors.modified.onDidChangeViewZones),this.width=Wt(this,0),this._modifiedViewZonesChangedSignal=No("modified.onDidChangeViewZones",this._editors.modified.onDidChangeViewZones),this._originalViewZonesChangedSignal=No("original.onDidChangeViewZones",this._editors.original.onDidChangeViewZones),this._state=n_(this,(u,f)=>{var A;this._element.replaceChildren();const g=this._diffModel.read(u),p=(A=g==null?void 0:g.diff.read(u))==null?void 0:A.movedTexts;if(!p||p.length===0){this.width.set(0,void 0);return}this._viewZonesChanged.read(u);const _=this._originalEditorLayoutInfo.read(u),b=this._modifiedEditorLayoutInfo.read(u);if(!_||!b){this.width.set(0,void 0);return}this._modifiedViewZonesChangedSignal.read(u),this._originalViewZonesChangedSignal.read(u);const y=p.map(P=>{function H(me,pe){const Fe=pe.getTopForLineNumber(me.startLineNumber,!0),Ye=pe.getTopForLineNumber(me.endLineNumberExclusive,!0);return(Fe+Ye)/2}const ee=H(P.lineRangeMapping.original,this._editors.original),Q=this._originalScrollTop.read(u),te=H(P.lineRangeMapping.modified,this._editors.modified),J=this._modifiedScrollTop.read(u),Z=ee-Q,he=te-J,Ce=Math.min(ee,te),we=Math.max(ee,te);return{range:new Vt(Ce,we),from:Z,to:he,fromWithoutScroll:ee,toWithoutScroll:te,move:P}});y.sort(DLe(Yr(P=>P.fromWithoutScroll>P.toWithoutScroll,ELe),Yr(P=>P.fromWithoutScroll>P.toWithoutScroll?P.fromWithoutScroll:-P.toWithoutScroll,sd)));const S=tY.compute(y.map(P=>P.range)),L=10,x=_.verticalScrollbarWidth,k=(S.getTrackCount()-1)*10+L*2,E=x+k+(b.contentLeft-Jk.movedCodeBlockPadding);let N=0;for(const P of y){const H=S.getTrack(N),ee=x+L+H*10,Q=15,te=15,J=E,Z=b.glyphMarginWidth+b.lineNumbersWidth,he=18,Ce=document.createElementNS("http://www.w3.org/2000/svg","rect");Ce.classList.add("arrow-rectangle"),Ce.setAttribute("x",`${J-Z}`),Ce.setAttribute("y",`${P.to-he/2}`),Ce.setAttribute("width",`${Z}`),Ce.setAttribute("height",`${he}`),this._element.appendChild(Ce);const we=document.createElementNS("http://www.w3.org/2000/svg","g"),me=document.createElementNS("http://www.w3.org/2000/svg","path");me.setAttribute("d",`M 0 ${P.from} L ${ee} ${P.from} L ${ee} ${P.to} L ${J-te} ${P.to}`),me.setAttribute("fill","none"),we.appendChild(me);const pe=document.createElementNS("http://www.w3.org/2000/svg","polygon");pe.classList.add("arrow"),f.add(bt(Fe=>{me.classList.toggle("currentMove",P.move===g.activeMovedText.read(Fe)),pe.classList.toggle("currentMove",P.move===g.activeMovedText.read(Fe))})),pe.setAttribute("points",`${J-te},${P.to-Q/2} ${J},${P.to} ${J-te},${P.to+Q/2}`),we.appendChild(pe),this._element.appendChild(we),N++}this.width.set(k,void 0)}),this._element=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._element.setAttribute("class","moved-blocks-lines"),this._rootElement.appendChild(this._element),this._register(it(()=>this._element.remove())),this._register(bt(u=>{const f=this._originalEditorLayoutInfo.read(u),g=this._modifiedEditorLayoutInfo.read(u);!f||!g||(this._element.style.left=`${f.width-f.verticalScrollbarWidth}px`,this._element.style.height=`${f.height}px`,this._element.style.width=`${f.verticalScrollbarWidth+f.contentLeft-Jk.movedCodeBlockPadding+this.width.read(u)}px`)})),this._register(e0(this._state));const r=Qe(u=>{const f=this._diffModel.read(u),g=f==null?void 0:f.diff.read(u);return g?g.movedTexts.map(p=>({move:p,original:new Uw(Cc(p.lineRangeMapping.original.startLineNumber-1),18),modified:new Uw(Cc(p.lineRangeMapping.modified.startLineNumber-1),18)})):[]});this._register(KP(this._editors.original,r.map(u=>u.map(f=>f.original)))),this._register(KP(this._editors.modified,r.map(u=>u.map(f=>f.modified)))),this._register(ka((u,f)=>{const g=r.read(u);for(const p of g)f.add(new Goe(this._editors.original,p.original,p.move,"original",this._diffModel.get())),f.add(new Goe(this._editors.modified,p.modified,p.move,"modified",this._diffModel.get()))}));const a=No("original.onDidFocusEditorWidget",u=>this._editors.original.onDidFocusEditorWidget(()=>setTimeout(()=>u(void 0),0))),l=No("modified.onDidFocusEditorWidget",u=>this._editors.modified.onDidFocusEditorWidget(()=>setTimeout(()=>u(void 0),0)));let c="modified";this._register(dI({createEmptyChangeSummary:()=>{},handleChange:(u,f)=>(u.didChange(a)&&(c="original"),u.didChange(l)&&(c="modified"),!0)},u=>{a.read(u),l.read(u);const f=this._diffModel.read(u);if(!f)return;const g=f.diff.read(u);let p;if(g&&c==="original"){const _=this._editors.originalCursor.read(u);_&&(p=g.movedTexts.find(b=>b.lineRangeMapping.original.contains(_.lineNumber)))}if(g&&c==="modified"){const _=this._editors.modifiedCursor.read(u);_&&(p=g.movedTexts.find(b=>b.lineRangeMapping.modified.contains(_.lineNumber)))}p!==f.movedTextToCompare.get()&&f.movedTextToCompare.set(void 0,void 0),f.setActiveMovedText(p)}))}};Jk.movedCodeBlockPadding=4;let P1=Jk;class tY{static compute(e){const t=[],i=[];for(const n of e){let s=t.findIndex(r=>!r.intersectsStrict(n));s===-1&&(t.length>=6?s=hTe(t,Yr(a=>a.intersectWithRangeLength(n),sd)):(s=t.length,t.push(new tK))),t[s].addRange(n),i.push(s)}return new tY(t.length,i)}constructor(e,t){this._trackCount=e,this.trackPerLineIdx=t}getTrack(e){return this.trackPerLineIdx[e]}getTrackCount(){return this._trackCount}}class Goe extends jG{constructor(e,t,i,n,s){const r=jt("div.diff-hidden-lines-widget");super(e,t,r.root),this._editor=e,this._move=i,this._kind=n,this._diffModel=s,this._nodes=jt("div.diff-moved-code-block",{style:{marginRight:"4px"}},[jt("div.text-content@textContent"),jt("div.action-bar@actionBar")]),r.root.appendChild(this._nodes.root);const a=Ni(this._editor.onDidLayoutChange,()=>this._editor.getLayoutInfo());this._register(Dg(this._nodes.root,{paddingRight:a.map(g=>g.verticalScrollbarWidth)}));let l;i.changes.length>0?l=this._kind==="original"?v("codeMovedToWithChanges","Code moved with changes to line {0}-{1}",this._move.lineRangeMapping.modified.startLineNumber,this._move.lineRangeMapping.modified.endLineNumberExclusive-1):v("codeMovedFromWithChanges","Code moved with changes from line {0}-{1}",this._move.lineRangeMapping.original.startLineNumber,this._move.lineRangeMapping.original.endLineNumberExclusive-1):l=this._kind==="original"?v("codeMovedTo","Code moved to line {0}-{1}",this._move.lineRangeMapping.modified.startLineNumber,this._move.lineRangeMapping.modified.endLineNumberExclusive-1):v("codeMovedFrom","Code moved from line {0}-{1}",this._move.lineRangeMapping.original.startLineNumber,this._move.lineRangeMapping.original.endLineNumberExclusive-1);const c=this._register(new zl(this._nodes.actionBar,{highlightToggledItems:!0})),u=new tl("",l,"",!1);c.push(u,{icon:!1,label:!0});const f=new tl("","Compare",ut.asClassName(Se.compareChanges),!0,()=>{this._editor.focus(),this._diffModel.movedTextToCompare.set(this._diffModel.movedTextToCompare.get()===i?void 0:this._move,void 0)});this._register(bt(g=>{const p=this._diffModel.movedTextToCompare.read(g)===i;f.checked=p})),c.push(f,{icon:!1,label:!0})}}class T9e extends X{constructor(e,t,i,n){super(),this._editors=e,this._diffModel=t,this._options=i,this._decorations=Qe(this,s=>{const r=this._diffModel.read(s),a=r==null?void 0:r.diff.read(s);if(!a)return null;const l=this._diffModel.read(s).movedTextToCompare.read(s),c=this._options.renderIndicators.read(s),u=this._options.showEmptyDecorations.read(s),f=[],g=[];if(!l)for(const _ of a.mappings)if(_.lineRangeMapping.original.isEmpty||f.push({range:_.lineRangeMapping.original.toInclusiveRange(),options:c?rE:Voe}),_.lineRangeMapping.modified.isEmpty||g.push({range:_.lineRangeMapping.modified.toInclusiveRange(),options:c?YP:Hoe}),_.lineRangeMapping.modified.isEmpty||_.lineRangeMapping.original.isEmpty)_.lineRangeMapping.original.isEmpty||f.push({range:_.lineRangeMapping.original.toInclusiveRange(),options:ZG}),_.lineRangeMapping.modified.isEmpty||g.push({range:_.lineRangeMapping.modified.toInclusiveRange(),options:GG});else{const b=this._options.useTrueInlineDiffRendering.read(s)&&eY(_.lineRangeMapping);for(const y of _.lineRangeMapping.innerChanges||[])if(_.lineRangeMapping.original.contains(y.originalRange.startLineNumber)&&f.push({range:y.originalRange,options:y.originalRange.isEmpty()&&u?XG:wS}),_.lineRangeMapping.modified.contains(y.modifiedRange.startLineNumber)&&g.push({range:y.modifiedRange,options:y.modifiedRange.isEmpty()&&u&&!b?YG:ZP}),b){const S=r.model.original.getValueInRange(y.originalRange);g.push({range:y.modifiedRange,options:{description:"deleted-text",before:{content:S,inlineClassName:"inline-deleted-text"},zIndex:1e5,showIfCollapsed:!0}})}}if(l)for(const _ of l.changes){const b=_.original.toInclusiveRange();b&&f.push({range:b,options:c?rE:Voe});const y=_.modified.toInclusiveRange();y&&g.push({range:y,options:c?YP:Hoe});for(const S of _.innerChanges||[])f.push({range:S.originalRange,options:wS}),g.push({range:S.modifiedRange,options:ZP})}const p=this._diffModel.read(s).activeMovedText.read(s);for(const _ of a.movedTexts)f.push({range:_.lineRangeMapping.original.toInclusiveRange(),options:{description:"moved",blockClassName:"movedOriginal"+(_===p?" currentMove":""),blockPadding:[P1.movedCodeBlockPadding,0,P1.movedCodeBlockPadding,P1.movedCodeBlockPadding]}}),g.push({range:_.lineRangeMapping.modified.toInclusiveRange(),options:{description:"moved",blockClassName:"movedModified"+(_===p?" currentMove":""),blockPadding:[4,0,4,4]}});return{originalDecorations:f,modifiedDecorations:g}}),this._register(qP(this._editors.original,this._decorations.map(s=>(s==null?void 0:s.originalDecorations)||[]))),this._register(qP(this._editors.modified,this._decorations.map(s=>(s==null?void 0:s.modifiedDecorations)||[])))}}class N9e{resetSash(){this._sashRatio.set(void 0,void 0)}constructor(e,t){this._options=e,this.dimensions=t,this.sashLeft=lI(this,i=>{const n=this._sashRatio.read(i)??this._options.splitViewDefaultRatio.read(i);return this._computeSashLeft(n,i)},(i,n)=>{const s=this.dimensions.width.get();this._sashRatio.set(i/s,n)}),this._sashRatio=Wt(this,void 0)}_computeSashLeft(e,t){const i=this.dimensions.width.read(t),n=Math.floor(this._options.splitViewDefaultRatio.read(t)*i),s=this._options.enableSplitViewResizing.read(t)?Math.floor(e*i):n,r=100;return i<=r*2?n:s<r?r:s>i-r?i-r:s}}class Afe extends X{constructor(e,t,i,n,s,r){super(),this._domNode=e,this._dimensions=t,this._enabled=i,this._boundarySashes=n,this.sashLeft=s,this._resetSash=r,this._sash=this._register(new Yo(this._domNode,{getVerticalSashTop:a=>0,getVerticalSashLeft:a=>this.sashLeft.get(),getVerticalSashHeight:a=>this._dimensions.height.get()},{orientation:0})),this._startSashPosition=void 0,this._register(this._sash.onDidStart(()=>{this._startSashPosition=this.sashLeft.get()})),this._register(this._sash.onDidChange(a=>{this.sashLeft.set(this._startSashPosition+(a.currentX-a.startX),void 0)})),this._register(this._sash.onDidEnd(()=>this._sash.layout())),this._register(this._sash.onDidReset(()=>this._resetSash())),this._register(bt(a=>{const l=this._boundarySashes.read(a);l&&(this._sash.orthogonalEndSash=l.bottom)})),this._register(bt(a=>{const l=this._enabled.read(a);this._sash.state=l?3:0,this.sashLeft.read(a),this._dimensions.height.read(a),this._sash.layout()}))}}class R9e extends X{constructor(e,t,i){super(),this._editor=e,this._domNode=t,this.itemProvider=i,this.scrollTop=Ni(this,this._editor.onDidScrollChange,r=>this._editor.getScrollTop()),this.isScrollTopZero=this.scrollTop.map(r=>r===0),this.modelAttached=Ni(this,this._editor.onDidChangeModel,r=>this._editor.hasModel()),this.editorOnDidChangeViewZones=No("onDidChangeViewZones",this._editor.onDidChangeViewZones),this.editorOnDidContentSizeChange=No("onDidContentSizeChange",this._editor.onDidContentSizeChange),this.domNodeSizeChanged=JS("domNodeSizeChanged"),this.views=new Map,this._domNode.className="gutter monaco-editor";const n=this._domNode.appendChild(jt("div.scroll-decoration",{role:"presentation",ariaHidden:"true",style:{width:"100%"}}).root),s=new ResizeObserver(()=>{Mn(r=>{this.domNodeSizeChanged.trigger(r)})});s.observe(this._domNode),this._register(it(()=>s.disconnect())),this._register(bt(r=>{n.className=this.isScrollTopZero.read(r)?"":"scroll-decoration"})),this._register(bt(r=>this.render(r)))}dispose(){super.dispose(),Co(this._domNode)}render(e){if(!this.modelAttached.read(e))return;this.domNodeSizeChanged.read(e),this.editorOnDidChangeViewZones.read(e),this.editorOnDidContentSizeChange.read(e);const t=this.scrollTop.read(e),i=this._editor.getVisibleRanges(),n=new Set(this.views.keys()),s=Vt.ofStartAndLength(0,this._domNode.clientHeight);if(!s.isEmpty)for(const r of i){const a=new It(r.startLineNumber,r.endLineNumber+1),l=this.itemProvider.getIntersectingGutterItems(a,e);Mn(c=>{for(const u of l){if(!u.range.intersect(a))continue;n.delete(u.id);let f=this.views.get(u.id);if(f)f.item.set(u,c);else{const b=document.createElement("div");this._domNode.appendChild(b);const y=Wt("item",u),S=this.itemProvider.createView(y,b);f=new M9e(y,S,b),this.views.set(u.id,f)}const g=u.range.startLineNumber<=this._editor.getModel().getLineCount()?this._editor.getTopForLineNumber(u.range.startLineNumber,!0)-t:this._editor.getBottomForLineNumber(u.range.startLineNumber-1,!1)-t,_=(u.range.endLineNumberExclusive===1?Math.max(g,this._editor.getTopForLineNumber(u.range.startLineNumber,!1)-t):Math.max(g,this._editor.getBottomForLineNumber(u.range.endLineNumberExclusive-1,!0)-t))-g;f.domNode.style.top=`${g}px`,f.domNode.style.height=`${_}px`,f.gutterItemView.layout(Vt.ofStartAndLength(g,_),s)}})}for(const r of n){const a=this.views.get(r);a.gutterItemView.dispose(),a.domNode.remove(),this.views.delete(r)}}}class M9e{constructor(e,t,i){this.item=e,this.gutterItemView=t,this.domNode=i}}class Pfe extends lC{constructor(e){super(),this._getContext=e}runAction(e,t){const i=this._getContext();return super.runAction(e,i)}}class Yoe extends Jce{constructor(e){super(),this._textModel=e}getValueOfRange(e){return this._textModel.getValueInRange(e)}get length(){const e=this._textModel.getLineCount(),t=this._textModel.getLineLength(e);return new dd(e-1,t)}}class A9e extends X{constructor(e,t,i={orientation:0}){super(),this.submenuActionViewItems=[],this.hasSecondaryActions=!1,this._onDidChangeDropdownVisibility=this._register(new Qxe),this.onDidChangeDropdownVisibility=this._onDidChangeDropdownVisibility.event,this.disposables=this._register(new le),i.hoverDelegate=i.hoverDelegate??this._register(gS()),this.options=i,this.toggleMenuAction=this._register(new aE(()=>{var n;return(n=this.toggleMenuActionViewItem)==null?void 0:n.show()},i.toggleMenuTitle)),this.element=document.createElement("div"),this.element.className="monaco-toolbar",e.appendChild(this.element),this.actionBar=this._register(new zl(this.element,{orientation:i.orientation,ariaLabel:i.ariaLabel,actionRunner:i.actionRunner,allowContextMenu:i.allowContextMenu,highlightToggledItems:i.highlightToggledItems,hoverDelegate:i.hoverDelegate,actionViewItemProvider:(n,s)=>{if(n.id===aE.ID)return this.toggleMenuActionViewItem=new QA(n,n.menuActions,t,{actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,keybindingProvider:this.options.getKeyBinding,classNames:ut.asClassNameArray(i.moreIcon??Se.toolBarMore),anchorAlignmentProvider:this.options.anchorAlignmentProvider,menuAsChild:!!this.options.renderDropdownAsChildElement,skipTelemetry:this.options.skipTelemetry,isMenu:!0,hoverDelegate:this.options.hoverDelegate}),this.toggleMenuActionViewItem.setActionContext(this.actionBar.context),this.disposables.add(this._onDidChangeDropdownVisibility.add(this.toggleMenuActionViewItem.onDidChangeVisibility)),this.toggleMenuActionViewItem;if(i.actionViewItemProvider){const r=i.actionViewItemProvider(n,s);if(r)return r}if(n instanceof tS){const r=new QA(n,n.actions,t,{actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,keybindingProvider:this.options.getKeyBinding,classNames:n.class,anchorAlignmentProvider:this.options.anchorAlignmentProvider,menuAsChild:!!this.options.renderDropdownAsChildElement,skipTelemetry:this.options.skipTelemetry,hoverDelegate:this.options.hoverDelegate});return r.setActionContext(this.actionBar.context),this.submenuActionViewItems.push(r),this.disposables.add(this._onDidChangeDropdownVisibility.add(r.onDidChangeVisibility)),r}}}))}set actionRunner(e){this.actionBar.actionRunner=e}get actionRunner(){return this.actionBar.actionRunner}getElement(){return this.element}getItemAction(e){return this.actionBar.getAction(e)}setActions(e,t){this.clear();const i=e?e.slice(0):[];this.hasSecondaryActions=!!(t&&t.length>0),this.hasSecondaryActions&&t&&(this.toggleMenuAction.menuActions=t.slice(0),i.push(this.toggleMenuAction)),i.forEach(n=>{this.actionBar.push(n,{icon:this.options.icon??!0,label:this.options.label??!1,keybinding:this.getKeybindingLabel(n)})})}getKeybindingLabel(e){var i,n;const t=(n=(i=this.options).getKeyBinding)==null?void 0:n.call(i,e);return(t==null?void 0:t.getLabel())??void 0}clear(){this.submenuActionViewItems=[],this.disposables.clear(),this.actionBar.clear()}dispose(){this.clear(),this.disposables.dispose(),super.dispose()}}const K2=class K2 extends tl{constructor(e,t){t=t||v("moreActions","More Actions..."),super(K2.ID,t,void 0,!0),this._menuActions=[],this.toggleDropdownMenu=e}async run(){this.toggleDropdownMenu()}get menuActions(){return this._menuActions}set menuActions(e){this._menuActions=e}};K2.ID="toolbar.toggle.more";let aE=K2;var Ofe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Qc=function(o,e){return function(t,i){e(t,i,o)}};let lE=class extends A9e{constructor(e,t,i,n,s,r,a,l){super(e,s,{getKeyBinding:u=>r.lookupKeybinding(u.id)??void 0,...t,allowContextMenu:!0,skipTelemetry:typeof(t==null?void 0:t.telemetrySource)=="string"}),this._options=t,this._menuService=i,this._contextKeyService=n,this._contextMenuService=s,this._keybindingService=r,this._commandService=a,this._sessionDisposables=this._store.add(new le);const c=t==null?void 0:t.telemetrySource;c&&this._store.add(this.actionBar.onDidRun(u=>l.publicLog2("workbenchActionExecuted",{id:u.action.id,from:c})))}setActions(e,t=[],i){var u,f,g;this._sessionDisposables.clear();const n=e.slice(),s=t.slice(),r=[];let a=0;const l=[];let c=!1;if(((u=this._options)==null?void 0:u.hiddenItemStrategy)!==-1)for(let p=0;p<n.length;p++){const _=n[p];!(_ instanceof il)&&!(_ instanceof _1)||_.hideActions&&(r.push(_.hideActions.toggle),_.hideActions.toggle.checked&&a++,_.hideActions.isHidden&&(c=!0,n[p]=void 0,((f=this._options)==null?void 0:f.hiddenItemStrategy)!==0&&(l[p]=_)))}if(((g=this._options)==null?void 0:g.overflowBehavior)!==void 0){const p=Y2e(new Set(this._options.overflowBehavior.exempted),ti.map(n,y=>y==null?void 0:y.id)),_=this._options.overflowBehavior.maxItems-p.size;let b=0;for(let y=0;y<n.length;y++){const S=n[y];S&&(b++,!p.has(S.id)&&b>=_&&(n[y]=void 0,l[y]=S))}}kte(n),kte(l),super.setActions(n,Zs.join(l,s)),(r.length>0||n.length>0)&&this._sessionDisposables.add(se(this.getElement(),"contextmenu",p=>{var L,x,k,E,N;const _=new td(at(this.getElement()),p),b=this.getItemAction(_.target);if(!b)return;_.preventDefault(),_.stopPropagation();const y=[];if(b instanceof il&&b.menuKeybinding)y.push(b.menuKeybinding);else if(!(b instanceof _1||b instanceof aE)){const A=!!this._keybindingService.lookupKeybinding(b.id);y.push(Jhe(this._commandService,this._keybindingService,b.id,void 0,A))}if(r.length>0){let A=!1;if(a===1&&((L=this._options)==null?void 0:L.hiddenItemStrategy)===0){A=!0;for(let P=0;P<r.length;P++)if(r[P].checked){r[P]=Zv({id:b.id,label:b.label,checked:!0,enabled:!1,run(){}});break}}if(!A&&(b instanceof il||b instanceof _1)){if(!b.hideActions)return;y.push(b.hideActions.hide)}else y.push(Zv({id:"label",label:v("hide","Hide"),enabled:!1,run(){}}))}const S=Zs.join(y,r);(x=this._options)!=null&&x.resetMenu&&!i&&(i=[this._options.resetMenu]),c&&i&&(S.push(new Zs),S.push(Zv({id:"resetThisMenu",label:v("resetThisMenu","Reset Menu"),run:()=>this._menuService.resetHiddenStates(i)}))),S.length!==0&&this._contextMenuService.showContextMenu({getAnchor:()=>_,getActions:()=>S,menuId:(k=this._options)==null?void 0:k.contextMenu,menuActionOptions:{renderShortTitle:!0,...(E=this._options)==null?void 0:E.menuOptions},skipTelemetry:typeof((N=this._options)==null?void 0:N.telemetrySource)=="string",contextKeyService:this._contextKeyService})}))}};lE=Ofe([Qc(2,Gl),Qc(3,ht),Qc(4,cl),Qc(5,Di),Qc(6,nn),Qc(7,tr)],lE);let XP=class extends lE{constructor(e,t,i,n,s,r,a,l,c){super(e,{resetMenu:t,...i},n,s,r,a,l,c),this._onDidChangeMenuItems=this._store.add(new Y),this.onDidChangeMenuItems=this._onDidChangeMenuItems.event;const u=this._store.add(n.createMenu(t,s,{emitEventsForSubmenuChanges:!0})),f=()=>{var _,b,y;const g=[],p=[];R4(u,i==null?void 0:i.menuOptions,{primary:g,secondary:p},(_=i==null?void 0:i.toolbarOptions)==null?void 0:_.primaryGroup,(b=i==null?void 0:i.toolbarOptions)==null?void 0:b.shouldInlineSubmenu,(y=i==null?void 0:i.toolbarOptions)==null?void 0:y.useSeparatorsInPrimaryActions),e.classList.toggle("has-no-actions",g.length===0&&p.length===0),super.setActions(g,p)};this._store.add(u.onDidChange(()=>{f(),this._onDidChangeMenuItems.fire(this)})),f()}setActions(){throw new wi("This toolbar is populated from a menu.")}};XP=Ofe([Qc(3,Gl),Qc(4,ht),Qc(5,cl),Qc(6,Di),Qc(7,nn),Qc(8,tr)],XP);var Ffe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},OM=function(o,e){return function(t,i){e(t,i,o)}};const n9=[],FR=35;let pU=class extends X{constructor(e,t,i,n,s,r,a,l,c){super(),this._diffModel=t,this._editors=i,this._options=n,this._sashLayout=s,this._boundarySashes=r,this._instantiationService=a,this._contextKeyService=l,this._menuService=c,this._menu=this._register(this._menuService.createMenu(qe.DiffEditorHunkToolbar,this._contextKeyService)),this._actions=Ni(this,this._menu.onDidChange,()=>this._menu.getActions()),this._hasActions=this._actions.map(u=>u.length>0),this._showSash=Qe(this,u=>this._options.renderSideBySide.read(u)&&this._hasActions.read(u)),this.width=Qe(this,u=>this._hasActions.read(u)?FR:0),this.elements=jt("div.gutter@gutter",{style:{position:"absolute",height:"100%",width:FR+"px"}},[]),this._currentDiff=Qe(this,u=>{var _;const f=this._diffModel.read(u);if(!f)return;const g=(_=f.diff.read(u))==null?void 0:_.mappings,p=this._editors.modifiedCursor.read(u);if(p)return g==null?void 0:g.find(b=>b.lineRangeMapping.modified.contains(p.lineNumber))}),this._selectedDiffs=Qe(this,u=>{const f=this._diffModel.read(u),g=f==null?void 0:f.diff.read(u);if(!g)return n9;const p=this._editors.modifiedSelections.read(u);if(p.every(S=>S.isEmpty()))return n9;const _=new vc(p.map(S=>It.fromRangeInclusive(S))),y=g.mappings.filter(S=>S.lineRangeMapping.innerChanges&&_.intersects(S.lineRangeMapping.modified)).map(S=>({mapping:S,rangeMappings:S.lineRangeMapping.innerChanges.filter(L=>p.some(x=>M.areIntersecting(L.modifiedRange,x)))}));return y.length===0||y.every(S=>S.rangeMappings.length===0)?n9:y}),this._register(n9e(e,this.elements.root)),this._register(se(this.elements.root,"click",()=>{this._editors.modified.focus()})),this._register(Dg(this.elements.root,{display:this._hasActions.map(u=>u?"block":"none")})),vr(this,u=>this._showSash.read(u)?new Afe(e,this._sashLayout.dimensions,this._options.enableSplitViewResizing,this._boundarySashes,lI(this,g=>this._sashLayout.sashLeft.read(g)-FR,(g,p)=>this._sashLayout.sashLeft.set(g+FR,p)),()=>this._sashLayout.resetSash()):void 0).recomputeInitiallyAndOnChange(this._store),this._register(new R9e(this._editors.modified,this.elements.root,{getIntersectingGutterItems:(u,f)=>{const g=this._diffModel.read(f);if(!g)return[];const p=g.diff.read(f);if(!p)return[];const _=this._selectedDiffs.read(f);if(_.length>0){const y=Vl.fromRangeMappings(_.flatMap(S=>S.rangeMappings));return[new Zoe(y,!0,qe.DiffEditorSelectionToolbar,void 0,g.model.original.uri,g.model.modified.uri)]}const b=this._currentDiff.read(f);return p.mappings.map(y=>new Zoe(y.lineRangeMapping.withInnerChangesFromLineRanges(),y.lineRangeMapping===(b==null?void 0:b.lineRangeMapping),qe.DiffEditorHunkToolbar,void 0,g.model.original.uri,g.model.modified.uri))},createView:(u,f)=>this._instantiationService.createInstance(mU,u,f,this)})),this._register(se(this.elements.gutter,Le.MOUSE_WHEEL,u=>{this._editors.modified.getOption(104).handleMouseWheel&&this._editors.modified.delegateScrollFromMouseWheelEvent(u)},{passive:!1}))}computeStagedValue(e){const t=e.innerChanges??[],i=new Yoe(this._editors.modifiedModel.get()),n=new Yoe(this._editors.original.getModel());return new nK(t.map(a=>a.toTextEdit(i))).apply(n)}layout(e){this.elements.gutter.style.left=e+"px"}};pU=Ffe([OM(6,nt),OM(7,ht),OM(8,Gl)],pU);class Zoe{constructor(e,t,i,n,s,r){this.mapping=e,this.showAlways=t,this.menuId=i,this.rangeOverride=n,this.originalUri=s,this.modifiedUri=r}get id(){return this.mapping.modified.toString()}get range(){return this.rangeOverride??this.mapping.modified}}let mU=class extends X{constructor(e,t,i,n){super(),this._item=e,this._elements=jt("div.gutterItem",{style:{height:"20px",width:"34px"}},[jt("div.background@background",{},[]),jt("div.buttons@buttons",{},[])]),this._showAlways=this._item.map(this,r=>r.showAlways),this._menuId=this._item.map(this,r=>r.menuId),this._isSmall=Wt(this,!1),this._lastItemRange=void 0,this._lastViewRange=void 0;const s=this._register(n.createInstance(aS,"element",!0,{position:{hoverPosition:1}}));this._register(zw(t,this._elements.root)),this._register(bt(r=>{const a=this._showAlways.read(r);this._elements.root.classList.toggle("noTransition",!0),this._elements.root.classList.toggle("showAlways",a),setTimeout(()=>{this._elements.root.classList.toggle("noTransition",!1)},0)})),this._register(ka((r,a)=>{this._elements.buttons.replaceChildren();const l=a.add(n.createInstance(XP,this._elements.buttons,this._menuId.read(r),{orientation:1,hoverDelegate:s,toolbarOptions:{primaryGroup:c=>c.startsWith("primary")},overflowBehavior:{maxItems:this._isSmall.read(r)?1:3},hiddenItemStrategy:0,actionRunner:new Pfe(()=>{const c=this._item.get(),u=c.mapping;return{mapping:u,originalWithModifiedChanges:i.computeStagedValue(u),originalUri:c.originalUri,modifiedUri:c.modifiedUri}}),menuOptions:{shouldForwardArgs:!0}}));a.add(l.onDidChangeMenuItems(()=>{this._lastItemRange&&this.layout(this._lastItemRange,this._lastViewRange)}))}))}layout(e,t){this._lastItemRange=e,this._lastViewRange=t;let i=this._elements.buttons.clientHeight;this._isSmall.set(this._item.get().mapping.original.startLineNumber===1&&e.length<30,void 0),i=this._elements.buttons.clientHeight;const n=e.length/2-i/2,s=i;let r=e.start+n;const a=Vt.tryCreate(s,t.endExclusive-s-i),l=Vt.tryCreate(e.start+s,e.endExclusive-i-s);l&&a&&l.start<l.endExclusive&&(r=a.clip(r),r=l.clip(r)),this._elements.buttons.style.top=`${r-e.start}px`}};mU=Ffe([OM(3,nt)],mU);function Qa(o){return _U.get(o)}const Mp=class Mp extends X{static get(e){let t=Mp._map.get(e);if(!t){t=new Mp(e),Mp._map.set(e,t);const i=e.onDidDispose(()=>{const n=Mp._map.get(e);n&&(Mp._map.delete(e),n.dispose(),i.dispose())})}return t}_beginUpdate(){this._updateCounter++,this._updateCounter===1&&(this._currentTransaction=new QS(()=>{}))}_endUpdate(){if(this._updateCounter--,this._updateCounter===0){const e=this._currentTransaction;this._currentTransaction=void 0,e.finish()}}constructor(e){var t;super(),this.editor=e,this._updateCounter=0,this._currentTransaction=void 0,this._model=Wt(this,this.editor.getModel()),this.model=this._model,this.isReadonly=Ni(this,this.editor.onDidChangeConfiguration,()=>this.editor.getOption(92)),this._versionId=w6({owner:this,lazy:!0},((t=this.editor.getModel())==null?void 0:t.getVersionId())??null),this.versionId=this._versionId,this._selections=w6({owner:this,equalsFn:b6(YA(Ke.selectionsEqual)),lazy:!0},this.editor.getSelections()??null),this.selections=this._selections,this.isFocused=Ni(this,i=>{const n=this.editor.onDidFocusEditorWidget(i),s=this.editor.onDidBlurEditorWidget(i);return{dispose(){n.dispose(),s.dispose()}}},()=>this.editor.hasWidgetFocus()),this.value=lI(this,i=>{var n;return this.versionId.read(i),((n=this.model.read(i))==null?void 0:n.getValue())??""},(i,n)=>{const s=this.model.get();s!==null&&i!==s.getValue()&&s.setValue(i)}),this.valueIsEmpty=Qe(this,i=>{var n;return this.versionId.read(i),((n=this.editor.getModel())==null?void 0:n.getValueLength())===0}),this.cursorSelection=Ml({owner:this,equalsFn:b6(Ke.selectionsEqual)},i=>{var n;return((n=this.selections.read(i))==null?void 0:n[0])??null}),this.onDidType=JS(this),this.scrollTop=Ni(this.editor.onDidScrollChange,()=>this.editor.getScrollTop()),this.scrollLeft=Ni(this.editor.onDidScrollChange,()=>this.editor.getScrollLeft()),this.layoutInfo=Ni(this.editor.onDidLayoutChange,()=>this.editor.getLayoutInfo()),this.layoutInfoContentLeft=this.layoutInfo.map(i=>i.contentLeft),this.layoutInfoDecorationsLeft=this.layoutInfo.map(i=>i.decorationsLeft),this.contentWidth=Ni(this.editor.onDidContentSizeChange,()=>this.editor.getContentWidth()),this._overlayWidgetCounter=0,this._register(this.editor.onBeginUpdate(()=>this._beginUpdate())),this._register(this.editor.onEndUpdate(()=>this._endUpdate())),this._register(this.editor.onDidChangeModel(()=>{this._beginUpdate();try{this._model.set(this.editor.getModel(),this._currentTransaction),this._forceUpdate()}finally{this._endUpdate()}})),this._register(this.editor.onDidType(i=>{this._beginUpdate();try{this._forceUpdate(),this.onDidType.trigger(this._currentTransaction,i)}finally{this._endUpdate()}})),this._register(this.editor.onDidChangeModelContent(i=>{var n;this._beginUpdate();try{this._versionId.set(((n=this.editor.getModel())==null?void 0:n.getVersionId())??null,this._currentTransaction,i),this._forceUpdate()}finally{this._endUpdate()}})),this._register(this.editor.onDidChangeCursorSelection(i=>{this._beginUpdate();try{this._selections.set(this.editor.getSelections(),this._currentTransaction,i),this._forceUpdate()}finally{this._endUpdate()}}))}forceUpdate(e){this._beginUpdate();try{return this._forceUpdate(),e?e(this._currentTransaction):void 0}finally{this._endUpdate()}}_forceUpdate(){var e;this._beginUpdate();try{this._model.set(this.editor.getModel(),this._currentTransaction),this._versionId.set(((e=this.editor.getModel())==null?void 0:e.getVersionId())??null,this._currentTransaction,void 0),this._selections.set(this.editor.getSelections(),this._currentTransaction,void 0)}finally{this._endUpdate()}}getOption(e){return Ni(this,t=>this.editor.onDidChangeConfiguration(i=>{i.hasChanged(e)&&t(void 0)}),()=>this.editor.getOption(e))}setDecorations(e){const t=new le,i=this.editor.createDecorationsCollection();return t.add(cI({owner:this,debugName:()=>`Apply decorations from ${e.debugName}`},n=>{const s=e.read(n);i.set(s)})),t.add({dispose:()=>{i.clear()}}),t}createOverlayWidget(e){const t="observableOverlayWidget"+this._overlayWidgetCounter++,i={getDomNode:()=>e.domNode,getPosition:()=>e.position.get(),getId:()=>t,allowEditorOverflow:e.allowEditorOverflow,getMinContentWidthInPx:()=>e.minContentWidthInPx.get()};this.editor.addOverlayWidget(i);const n=bt(s=>{e.position.read(s),e.minContentWidthInPx.read(s),this.editor.layoutOverlayWidget(i)});return it(()=>{n.dispose(),this.editor.removeOverlayWidget(i)})}};Mp._map=new Map;let _U=Mp;function vU(o,e){return oOe({createEmptyChangeSummary:()=>({deltas:[],didChange:!1}),handleChange:(t,i)=>{if(t.didChange(o)){const n=t.change;n!==void 0&&i.deltas.push(n),i.didChange=!0}return!0}},(t,i)=>{const n=o.read(t);i.didChange&&e(n,i.deltas)})}function P9e(o,e){const t=new le,i=vU(o,(n,s)=>{t.clear(),e(n,s,t)});return{dispose(){i.dispose(),t.dispose()}}}var O9e=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},F9e=function(o,e){return function(t,i){e(t,i,o)}},FM,pb;let QP=(pb=class extends X{static setBreadcrumbsSourceFactory(e){this._breadcrumbsSourceFactory.set(e,void 0)}get isUpdatingHiddenAreas(){return this._isUpdatingHiddenAreas}constructor(e,t,i,n){super(),this._editors=e,this._diffModel=t,this._options=i,this._instantiationService=n,this._modifiedOutlineSource=vr(this,l=>{const c=this._editors.modifiedModel.read(l),u=FM._breadcrumbsSourceFactory.read(l);return!c||!u?void 0:u(c,this._instantiationService)}),this._isUpdatingHiddenAreas=!1,this._register(this._editors.original.onDidChangeCursorPosition(l=>{if(l.reason===1)return;const c=this._diffModel.get();Mn(u=>{for(const f of this._editors.original.getSelections()||[])c==null||c.ensureOriginalLineIsVisible(f.getStartPosition().lineNumber,0,u),c==null||c.ensureOriginalLineIsVisible(f.getEndPosition().lineNumber,0,u)})})),this._register(this._editors.modified.onDidChangeCursorPosition(l=>{if(l.reason===1)return;const c=this._diffModel.get();Mn(u=>{for(const f of this._editors.modified.getSelections()||[])c==null||c.ensureModifiedLineIsVisible(f.getStartPosition().lineNumber,0,u),c==null||c.ensureModifiedLineIsVisible(f.getEndPosition().lineNumber,0,u)})}));const s=this._diffModel.map((l,c)=>{var f;const u=(l==null?void 0:l.unchangedRegions.read(c))??[];return u.length===1&&u[0].modifiedLineNumber===1&&u[0].lineCount===((f=this._editors.modifiedModel.read(c))==null?void 0:f.getLineCount())?[]:u});this.viewZones=n_(this,(l,c)=>{const u=this._modifiedOutlineSource.read(l);if(!u)return{origViewZones:[],modViewZones:[]};const f=[],g=[],p=this._options.renderSideBySide.read(l),_=this._options.compactMode.read(l),b=s.read(l);for(let y=0;y<b.length;y++){const S=b[y];if(!S.shouldHideControls(l)&&!(_&&(y===0||y===b.length-1)))if(_){{const L=Qe(this,k=>S.getHiddenOriginalRange(k).startLineNumber-1),x=new Uw(L,12);f.push(x),c.add(new Xoe(this._editors.original,x,S,!p))}{const L=Qe(this,k=>S.getHiddenModifiedRange(k).startLineNumber-1),x=new Uw(L,12);g.push(x),c.add(new Xoe(this._editors.modified,x,S))}}else{{const L=Qe(this,k=>S.getHiddenOriginalRange(k).startLineNumber-1),x=new Uw(L,24);f.push(x),c.add(new Qoe(this._editors.original,x,S,S.originalUnchangedRange,!p,u,k=>this._diffModel.get().ensureModifiedLineIsVisible(k,2,void 0),this._options))}{const L=Qe(this,k=>S.getHiddenModifiedRange(k).startLineNumber-1),x=new Uw(L,24);g.push(x),c.add(new Qoe(this._editors.modified,x,S,S.modifiedUnchangedRange,!1,u,k=>this._diffModel.get().ensureModifiedLineIsVisible(k,2,void 0),this._options))}}}return{origViewZones:f,modViewZones:g}});const r={description:"unchanged lines",className:"diff-unchanged-lines",isWholeLine:!0},a={description:"Fold Unchanged",glyphMarginHoverMessage:new Xo(void 0,{isTrusted:!0,supportThemeIcons:!0}).appendMarkdown(v("foldUnchanged","Fold Unchanged Region")),glyphMarginClassName:"fold-unchanged "+ut.asClassName(Se.fold),zIndex:10001};this._register(qP(this._editors.original,Qe(this,l=>{const c=s.read(l),u=c.map(f=>({range:f.originalUnchangedRange.toInclusiveRange(),options:r}));for(const f of c)f.shouldHideControls(l)&&u.push({range:M.fromPositions(new G(f.originalLineNumber,1)),options:a});return u}))),this._register(qP(this._editors.modified,Qe(this,l=>{const c=s.read(l),u=c.map(f=>({range:f.modifiedUnchangedRange.toInclusiveRange(),options:r}));for(const f of c)f.shouldHideControls(l)&&u.push({range:It.ofLength(f.modifiedLineNumber,1).toInclusiveRange(),options:a});return u}))),this._register(bt(l=>{const c=s.read(l);this._isUpdatingHiddenAreas=!0;try{this._editors.original.setHiddenAreas(c.map(u=>u.getHiddenOriginalRange(l).toInclusiveRange()).filter(Dh)),this._editors.modified.setHiddenAreas(c.map(u=>u.getHiddenModifiedRange(l).toInclusiveRange()).filter(Dh))}finally{this._isUpdatingHiddenAreas=!1}})),this._register(this._editors.modified.onMouseUp(l=>{var c;if(!l.event.rightButton&&l.target.position&&((c=l.target.element)!=null&&c.className.includes("fold-unchanged"))){const u=l.target.position.lineNumber,f=this._diffModel.get();if(!f)return;const g=f.unchangedRegions.get().find(p=>p.modifiedUnchangedRange.includes(u));if(!g)return;g.collapseAll(void 0),l.event.stopPropagation(),l.event.preventDefault()}})),this._register(this._editors.original.onMouseUp(l=>{var c;if(!l.event.rightButton&&l.target.position&&((c=l.target.element)!=null&&c.className.includes("fold-unchanged"))){const u=l.target.position.lineNumber,f=this._diffModel.get();if(!f)return;const g=f.unchangedRegions.get().find(p=>p.originalUnchangedRange.includes(u));if(!g)return;g.collapseAll(void 0),l.event.stopPropagation(),l.event.preventDefault()}}))}},FM=pb,pb._breadcrumbsSourceFactory=Wt(FM,()=>({dispose(){},getBreadcrumbItems(e,t){return[]}})),pb);QP=FM=O9e([F9e(3,nt)],QP);class Xoe extends jG{constructor(e,t,i,n=!1){const s=jt("div.diff-hidden-lines-widget");super(e,t,s.root),this._unchangedRegion=i,this._hide=n,this._nodes=jt("div.diff-hidden-lines-compact",[jt("div.line-left",[]),jt("div.text@text",[]),jt("div.line-right",[])]),s.root.appendChild(this._nodes.root),this._hide&&this._nodes.root.replaceChildren(),this._register(bt(r=>{if(!this._hide){const a=this._unchangedRegion.getHiddenModifiedRange(r).length,l=v("hiddenLines","{0} hidden lines",a);this._nodes.text.innerText=l}}))}}class Qoe extends jG{constructor(e,t,i,n,s,r,a,l){const c=jt("div.diff-hidden-lines-widget");super(e,t,c.root),this._editor=e,this._unchangedRegion=i,this._unchangedRegionRange=n,this._hide=s,this._modifiedOutlineSource=r,this._revealModifiedHiddenLine=a,this._options=l,this._nodes=jt("div.diff-hidden-lines",[jt("div.top@top",{title:v("diff.hiddenLines.top","Click or drag to show more above")}),jt("div.center@content",{style:{display:"flex"}},[jt("div@first",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexShrink:"0"}},[xe("a",{title:v("showUnchangedRegion","Show Unchanged Region"),role:"button",onclick:()=>{this._unchangedRegion.showAll(void 0)}},...dm("$(unfold)"))]),jt("div@others",{style:{display:"flex",justifyContent:"center",alignItems:"center"}})]),jt("div.bottom@bottom",{title:v("diff.bottom","Click or drag to show more below"),role:"button"})]),c.root.appendChild(this._nodes.root),this._hide?Co(this._nodes.first):this._register(Dg(this._nodes.first,{width:Qa(this._editor).layoutInfoContentLeft})),this._register(bt(f=>{const g=this._unchangedRegion.visibleLineCountTop.read(f)+this._unchangedRegion.visibleLineCountBottom.read(f)===this._unchangedRegion.lineCount;this._nodes.bottom.classList.toggle("canMoveTop",!g),this._nodes.bottom.classList.toggle("canMoveBottom",this._unchangedRegion.visibleLineCountBottom.read(f)>0),this._nodes.top.classList.toggle("canMoveTop",this._unchangedRegion.visibleLineCountTop.read(f)>0),this._nodes.top.classList.toggle("canMoveBottom",!g);const p=this._unchangedRegion.isDragged.read(f),_=this._editor.getDomNode();_&&(_.classList.toggle("draggingUnchangedRegion",!!p),p==="top"?(_.classList.toggle("canMoveTop",this._unchangedRegion.visibleLineCountTop.read(f)>0),_.classList.toggle("canMoveBottom",!g)):p==="bottom"?(_.classList.toggle("canMoveTop",!g),_.classList.toggle("canMoveBottom",this._unchangedRegion.visibleLineCountBottom.read(f)>0)):(_.classList.toggle("canMoveTop",!1),_.classList.toggle("canMoveBottom",!1)))}));const u=this._editor;this._register(se(this._nodes.top,"mousedown",f=>{if(f.button!==0)return;this._nodes.top.classList.toggle("dragging",!0),this._nodes.root.classList.toggle("dragging",!0),f.preventDefault();const g=f.clientY;let p=!1;const _=this._unchangedRegion.visibleLineCountTop.get();this._unchangedRegion.isDragged.set("top",void 0);const b=at(this._nodes.top),y=se(b,"mousemove",L=>{const k=L.clientY-g;p=p||Math.abs(k)>2;const E=Math.round(k/u.getOption(67)),N=Math.max(0,Math.min(_+E,this._unchangedRegion.getMaxVisibleLineCountTop()));this._unchangedRegion.visibleLineCountTop.set(N,void 0)}),S=se(b,"mouseup",L=>{p||this._unchangedRegion.showMoreAbove(this._options.hideUnchangedRegionsRevealLineCount.get(),void 0),this._nodes.top.classList.toggle("dragging",!1),this._nodes.root.classList.toggle("dragging",!1),this._unchangedRegion.isDragged.set(void 0,void 0),y.dispose(),S.dispose()})})),this._register(se(this._nodes.bottom,"mousedown",f=>{if(f.button!==0)return;this._nodes.bottom.classList.toggle("dragging",!0),this._nodes.root.classList.toggle("dragging",!0),f.preventDefault();const g=f.clientY;let p=!1;const _=this._unchangedRegion.visibleLineCountBottom.get();this._unchangedRegion.isDragged.set("bottom",void 0);const b=at(this._nodes.bottom),y=se(b,"mousemove",L=>{const k=L.clientY-g;p=p||Math.abs(k)>2;const E=Math.round(k/u.getOption(67)),N=Math.max(0,Math.min(_-E,this._unchangedRegion.getMaxVisibleLineCountBottom())),A=this._unchangedRegionRange.endLineNumberExclusive>u.getModel().getLineCount()?u.getContentHeight():u.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);this._unchangedRegion.visibleLineCountBottom.set(N,void 0);const P=this._unchangedRegionRange.endLineNumberExclusive>u.getModel().getLineCount()?u.getContentHeight():u.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);u.setScrollTop(u.getScrollTop()+(P-A))}),S=se(b,"mouseup",L=>{if(this._unchangedRegion.isDragged.set(void 0,void 0),!p){const x=u.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);this._unchangedRegion.showMoreBelow(this._options.hideUnchangedRegionsRevealLineCount.get(),void 0);const k=u.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);u.setScrollTop(u.getScrollTop()+(k-x))}this._nodes.bottom.classList.toggle("dragging",!1),this._nodes.root.classList.toggle("dragging",!1),y.dispose(),S.dispose()})})),this._register(bt(f=>{const g=[];if(!this._hide){const p=i.getHiddenModifiedRange(f).length,_=v("hiddenLines","{0} hidden lines",p),b=xe("span",{title:v("diff.hiddenLines.expandAll","Double click to unfold")},_);b.addEventListener("dblclick",L=>{L.button===0&&(L.preventDefault(),this._unchangedRegion.showAll(void 0))}),g.push(b);const y=this._unchangedRegion.getHiddenModifiedRange(f),S=this._modifiedOutlineSource.getBreadcrumbItems(y,f);if(S.length>0){g.push(xe("span",void 0,"|"));for(let L=0;L<S.length;L++){const x=S[L],k=uA.toIcon(x.kind),E=jt("div.breadcrumb-item",{style:{display:"flex",alignItems:"center"}},[uC(k),"",x.name,...L===S.length-1?[]:[uC(Se.chevronRight)]]).root;g.push(E),E.onclick=()=>{this._revealModifiedHiddenLine(x.startLineNumber)}}}}Co(this._nodes.others,...g)}))}}var B9e=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},W9e=function(o,e){return function(t,i){e(t,i,o)}},Od,cg;let cE=(cg=class extends X{constructor(e,t,i,n,s,r,a){super(),this._editors=e,this._rootElement=t,this._diffModel=i,this._rootWidth=n,this._rootHeight=s,this._modifiedEditorLayoutInfo=r,this._themeService=a,this.width=Od.ENTIRE_DIFF_OVERVIEW_WIDTH;const l=Ni(this._themeService.onDidColorThemeChange,()=>this._themeService.getColorTheme()),c=Qe(g=>{const p=l.read(g),_=p.getColor(oRe)||(p.getColor(nRe)||VV).transparent(2),b=p.getColor(rRe)||(p.getColor(sRe)||zV).transparent(2);return{insertColor:_,removeColor:b}}),u=ki(document.createElement("div"));u.setClassName("diffViewport"),u.setPosition("absolute");const f=jt("div.diffOverview",{style:{position:"absolute",top:"0px",width:Od.ENTIRE_DIFF_OVERVIEW_WIDTH+"px"}}).root;this._register(zw(f,u.domNode)),this._register(Bn(f,Le.POINTER_DOWN,g=>{this._editors.modified.delegateVerticalScrollbarPointerDown(g)})),this._register(se(f,Le.MOUSE_WHEEL,g=>{this._editors.modified.delegateScrollFromMouseWheelEvent(g)},{passive:!1})),this._register(zw(this._rootElement,f)),this._register(ka((g,p)=>{const _=this._diffModel.read(g),b=this._editors.original.createOverviewRuler("original diffOverviewRuler");b&&(p.add(b),p.add(zw(f,b.getDomNode())));const y=this._editors.modified.createOverviewRuler("modified diffOverviewRuler");if(y&&(p.add(y),p.add(zw(f,y.getDomNode()))),!b||!y)return;const S=No("viewZoneChanged",this._editors.original.onDidChangeViewZones),L=No("viewZoneChanged",this._editors.modified.onDidChangeViewZones),x=No("hiddenRangesChanged",this._editors.original.onDidChangeHiddenAreas),k=No("hiddenRangesChanged",this._editors.modified.onDidChangeHiddenAreas);p.add(bt(E=>{var Q;S.read(E),L.read(E),x.read(E),k.read(E);const N=c.read(E),A=(Q=_==null?void 0:_.diff.read(E))==null?void 0:Q.mappings;function P(te,J,Z){const he=Z._getViewModel();return he?te.filter(Ce=>Ce.length>0).map(Ce=>{const we=he.coordinatesConverter.convertModelPositionToViewPosition(new G(Ce.startLineNumber,1)),me=he.coordinatesConverter.convertModelPositionToViewPosition(new G(Ce.endLineNumberExclusive,1)),pe=me.lineNumber-we.lineNumber;return new Lfe(we.lineNumber,me.lineNumber,pe,J.toString())}):[]}const H=P((A||[]).map(te=>te.lineRangeMapping.original),N.removeColor,this._editors.original),ee=P((A||[]).map(te=>te.lineRangeMapping.modified),N.insertColor,this._editors.modified);b==null||b.setZones(H),y==null||y.setZones(ee)})),p.add(bt(E=>{const N=this._rootHeight.read(E),A=this._rootWidth.read(E),P=this._modifiedEditorLayoutInfo.read(E);if(P){const H=Od.ENTIRE_DIFF_OVERVIEW_WIDTH-2*Od.ONE_OVERVIEW_WIDTH;b.setLayout({top:0,height:N,right:H+Od.ONE_OVERVIEW_WIDTH,width:Od.ONE_OVERVIEW_WIDTH}),y.setLayout({top:0,height:N,right:0,width:Od.ONE_OVERVIEW_WIDTH});const ee=this._editors.modifiedScrollTop.read(E),Q=this._editors.modifiedScrollHeight.read(E),te=this._editors.modified.getOption(104),J=new cS(te.verticalHasArrows?te.arrowSize:0,te.verticalScrollbarSize,0,P.height,Q,ee);u.setTop(J.getSliderPosition()),u.setHeight(J.getSliderSize())}else u.setTop(0),u.setHeight(0);f.style.height=N+"px",f.style.left=A-Od.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",u.setWidth(Od.ENTIRE_DIFF_OVERVIEW_WIDTH)}))}))}},Od=cg,cg.ONE_OVERVIEW_WIDTH=15,cg.ENTIRE_DIFF_OVERVIEW_WIDTH=cg.ONE_OVERVIEW_WIDTH*2,cg);cE=Od=B9e([W9e(6,Ws)],cE);const s9=[];class H9e extends X{constructor(e,t,i,n){super(),this._editors=e,this._diffModel=t,this._options=i,this._widget=n,this._selectedDiffs=Qe(this,s=>{const r=this._diffModel.read(s),a=r==null?void 0:r.diff.read(s);if(!a)return s9;const l=this._editors.modifiedSelections.read(s);if(l.every(g=>g.isEmpty()))return s9;const c=new vc(l.map(g=>It.fromRangeInclusive(g))),f=a.mappings.filter(g=>g.lineRangeMapping.innerChanges&&c.intersects(g.lineRangeMapping.modified)).map(g=>({mapping:g,rangeMappings:g.lineRangeMapping.innerChanges.filter(p=>l.some(_=>M.areIntersecting(p.modifiedRange,_)))}));return f.length===0||f.every(g=>g.rangeMappings.length===0)?s9:f}),this._register(ka((s,r)=>{if(!this._options.shouldRenderOldRevertArrows.read(s))return;const a=this._diffModel.read(s),l=a==null?void 0:a.diff.read(s);if(!a||!l||a.movedTextToCompare.read(s))return;const c=[],u=this._selectedDiffs.read(s),f=new Set(u.map(g=>g.mapping));if(u.length>0){const g=this._editors.modifiedSelections.read(s),p=r.add(new JP(g[g.length-1].positionLineNumber,this._widget,u.flatMap(_=>_.rangeMappings),!0));this._editors.modified.addGlyphMarginWidget(p),c.push(p)}for(const g of l.mappings)if(!f.has(g)&&!g.lineRangeMapping.modified.isEmpty&&g.lineRangeMapping.innerChanges){const p=r.add(new JP(g.lineRangeMapping.modified.startLineNumber,this._widget,g.lineRangeMapping,!1));this._editors.modified.addGlyphMarginWidget(p),c.push(p)}r.add(it(()=>{for(const g of c)this._editors.modified.removeGlyphMarginWidget(g)}))}))}}const G2=class G2 extends X{getId(){return this._id}constructor(e,t,i,n){super(),this._lineNumber=e,this._widget=t,this._diffs=i,this._revertSelection=n,this._id=`revertButton${G2.counter++}`,this._domNode=jt("div.revertButton",{title:this._revertSelection?v("revertSelectedChanges","Revert Selected Changes"):v("revertChange","Revert Change")},[uC(Se.arrowRight)]).root,this._register(se(this._domNode,Le.MOUSE_DOWN,s=>{s.button!==2&&(s.stopPropagation(),s.preventDefault())})),this._register(se(this._domNode,Le.MOUSE_UP,s=>{s.stopPropagation(),s.preventDefault()})),this._register(se(this._domNode,Le.CLICK,s=>{this._diffs instanceof Cr?this._widget.revert(this._diffs):this._widget.revertRangeMappings(this._diffs),s.stopPropagation(),s.preventDefault()}))}getDomNode(){return this._domNode}getPosition(){return{lane:cd.Right,range:{startColumn:1,startLineNumber:this._lineNumber,endColumn:1,endLineNumber:this._lineNumber},zIndex:10001}}};G2.counter=0;let JP=G2;function V9e(o,e,t){return aOe({debugName:()=>`Configuration Key "${o}"`},i=>t.onDidChangeConfiguration(n=>{n.affectsConfiguration(o)&&i(n)}),()=>t.getValue(o)??e)}function Bd(o,e,t){const i=o.bindTo(e);return cI({debugName:()=>`Set Context Key "${o.key}"`},n=>{i.set(t(n))})}var z9e=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Joe=function(o,e){return function(t,i){e(t,i,o)}};let bU=class extends X{get onDidContentSizeChange(){return this._onDidContentSizeChange.event}constructor(e,t,i,n,s,r,a){super(),this.originalEditorElement=e,this.modifiedEditorElement=t,this._options=i,this._argCodeEditorWidgetOptions=n,this._createInnerEditor=s,this._instantiationService=r,this._keybindingService=a,this.original=this._register(this._createLeftHandSideEditor(this._options.editorOptions.get(),this._argCodeEditorWidgetOptions.originalEditor||{})),this.modified=this._register(this._createRightHandSideEditor(this._options.editorOptions.get(),this._argCodeEditorWidgetOptions.modifiedEditor||{})),this._onDidContentSizeChange=this._register(new Y),this.modifiedScrollTop=Ni(this,this.modified.onDidScrollChange,()=>this.modified.getScrollTop()),this.modifiedScrollHeight=Ni(this,this.modified.onDidScrollChange,()=>this.modified.getScrollHeight()),this.modifiedObs=Qa(this.modified),this.originalObs=Qa(this.original),this.modifiedModel=this.modifiedObs.model,this.modifiedSelections=Ni(this,this.modified.onDidChangeCursorSelection,()=>this.modified.getSelections()??[]),this.modifiedCursor=Ml({owner:this,equalsFn:G.equals},l=>{var c;return((c=this.modifiedSelections.read(l)[0])==null?void 0:c.getPosition())??new G(1,1)}),this.originalCursor=Ni(this,this.original.onDidChangeCursorPosition,()=>this.original.getPosition()??new G(1,1)),this._argCodeEditorWidgetOptions=null,this._register(dI({createEmptyChangeSummary:()=>({}),handleChange:(l,c)=>(l.didChange(i.editorOptions)&&Object.assign(c,l.change.changedOptions),!0)},(l,c)=>{i.editorOptions.read(l),this._options.renderSideBySide.read(l),this.modified.updateOptions(this._adjustOptionsForRightHandSide(l,c)),this.original.updateOptions(this._adjustOptionsForLeftHandSide(l,c))}))}_createLeftHandSideEditor(e,t){const i=this._adjustOptionsForLeftHandSide(void 0,e),n=this._constructInnerEditor(this._instantiationService,this.originalEditorElement,i,t);return n.setContextValue("isInDiffLeftEditor",!0),n}_createRightHandSideEditor(e,t){const i=this._adjustOptionsForRightHandSide(void 0,e),n=this._constructInnerEditor(this._instantiationService,this.modifiedEditorElement,i,t);return n.setContextValue("isInDiffRightEditor",!0),n}_constructInnerEditor(e,t,i,n){const s=this._createInnerEditor(e,t,i,n);return this._register(s.onDidContentSizeChange(r=>{const a=this.original.getContentWidth()+this.modified.getContentWidth()+cE.ENTIRE_DIFF_OVERVIEW_WIDTH,l=Math.max(this.modified.getContentHeight(),this.original.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:l,contentWidth:a,contentHeightChanged:r.contentHeightChanged,contentWidthChanged:r.contentWidthChanged})})),s}_adjustOptionsForLeftHandSide(e,t){const i=this._adjustOptionsForSubEditor(t);return this._options.renderSideBySide.get()?(i.unicodeHighlight=this._options.editorOptions.get().unicodeHighlight||{},i.wordWrapOverride1=this._options.diffWordWrap.get()):(i.wordWrapOverride1="off",i.wordWrapOverride2="off",i.stickyScroll={enabled:!1},i.unicodeHighlight={nonBasicASCII:!1,ambiguousCharacters:!1,invisibleCharacters:!1}),i.glyphMargin=this._options.renderSideBySide.get(),t.originalAriaLabel&&(i.ariaLabel=t.originalAriaLabel),i.ariaLabel=this._updateAriaLabel(i.ariaLabel),i.readOnly=!this._options.originalEditable.get(),i.dropIntoEditor={enabled:!i.readOnly},i.extraEditorClassName="original-in-monaco-diff-editor",i}_adjustOptionsForRightHandSide(e,t){const i=this._adjustOptionsForSubEditor(t);return t.modifiedAriaLabel&&(i.ariaLabel=t.modifiedAriaLabel),i.ariaLabel=this._updateAriaLabel(i.ariaLabel),i.wordWrapOverride1=this._options.diffWordWrap.get(),i.revealHorizontalRightPadding=yu.revealHorizontalRightPadding.defaultValue+cE.ENTIRE_DIFF_OVERVIEW_WIDTH,i.scrollbar.verticalHasArrows=!1,i.extraEditorClassName="modified-in-monaco-diff-editor",i}_adjustOptionsForSubEditor(e){const t={...e,dimension:{height:0,width:0}};return t.inDiffEditor=!0,t.automaticLayout=!1,t.scrollbar={...t.scrollbar||{}},t.folding=!1,t.codeLens=this._options.diffCodeLens.get(),t.fixedOverflowWidgets=!0,t.minimap={...t.minimap||{}},t.minimap.enabled=!1,this._options.hideUnchangedRegions.get()?t.stickyScroll={enabled:!1}:t.stickyScroll=this._options.editorOptions.get().stickyScroll,t}_updateAriaLabel(e){var i;e||(e="");const t=v("diff-aria-navigation-tip"," use {0} to open the accessibility help.",(i=this._keybindingService.lookupKeybinding("editor.action.accessibilityHelp"))==null?void 0:i.getAriaLabel());return this._options.accessibilityVerbose.get()?e+t:e?e.replaceAll(t,""):""}};bU=z9e([Joe(5,nt),Joe(6,Di)],bU);const Y2=class Y2 extends X{constructor(){super(...arguments),this._id=++Y2.idCounter,this._onDidDispose=this._register(new Y),this.onDidDispose=this._onDidDispose.event}getId(){return this.getEditorType()+":v2:"+this._id}getVisibleColumnFromPosition(e){return this._targetEditor.getVisibleColumnFromPosition(e)}getPosition(){return this._targetEditor.getPosition()}setPosition(e,t="api"){this._targetEditor.setPosition(e,t)}revealLine(e,t=0){this._targetEditor.revealLine(e,t)}revealLineInCenter(e,t=0){this._targetEditor.revealLineInCenter(e,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._targetEditor.revealLineInCenterIfOutsideViewport(e,t)}revealLineNearTop(e,t=0){this._targetEditor.revealLineNearTop(e,t)}revealPosition(e,t=0){this._targetEditor.revealPosition(e,t)}revealPositionInCenter(e,t=0){this._targetEditor.revealPositionInCenter(e,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._targetEditor.revealPositionInCenterIfOutsideViewport(e,t)}revealPositionNearTop(e,t=0){this._targetEditor.revealPositionNearTop(e,t)}getSelection(){return this._targetEditor.getSelection()}getSelections(){return this._targetEditor.getSelections()}setSelection(e,t="api"){this._targetEditor.setSelection(e,t)}setSelections(e,t="api"){this._targetEditor.setSelections(e,t)}revealLines(e,t,i=0){this._targetEditor.revealLines(e,t,i)}revealLinesInCenter(e,t,i=0){this._targetEditor.revealLinesInCenter(e,t,i)}revealLinesInCenterIfOutsideViewport(e,t,i=0){this._targetEditor.revealLinesInCenterIfOutsideViewport(e,t,i)}revealLinesNearTop(e,t,i=0){this._targetEditor.revealLinesNearTop(e,t,i)}revealRange(e,t=0,i=!1,n=!0){this._targetEditor.revealRange(e,t,i,n)}revealRangeInCenter(e,t=0){this._targetEditor.revealRangeInCenter(e,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._targetEditor.revealRangeInCenterIfOutsideViewport(e,t)}revealRangeNearTop(e,t=0){this._targetEditor.revealRangeNearTop(e,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._targetEditor.revealRangeNearTopIfOutsideViewport(e,t)}revealRangeAtTop(e,t=0){this._targetEditor.revealRangeAtTop(e,t)}getSupportedActions(){return this._targetEditor.getSupportedActions()}focus(){this._targetEditor.focus()}trigger(e,t,i){this._targetEditor.trigger(e,t,i)}createDecorationsCollection(e){return this._targetEditor.createDecorationsCollection(e)}changeDecorations(e){return this._targetEditor.changeDecorations(e)}};Y2.idCounter=0;let CU=Y2;var U9e=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},$9e=function(o,e){return function(t,i){e(t,i,o)}};let yU=class{get editorOptions(){return this._options}constructor(e,t){this._accessibilityService=t,this._diffEditorWidth=Wt(this,0),this._screenReaderMode=Ni(this,this._accessibilityService.onDidChangeScreenReaderOptimized,()=>this._accessibilityService.isScreenReaderOptimized()),this.couldShowInlineViewBecauseOfSize=Qe(this,n=>this._options.read(n).renderSideBySide&&this._diffEditorWidth.read(n)<=this._options.read(n).renderSideBySideInlineBreakpoint),this.renderOverviewRuler=Qe(this,n=>this._options.read(n).renderOverviewRuler),this.renderSideBySide=Qe(this,n=>this.compactMode.read(n)&&this.shouldRenderInlineViewInSmartMode.read(n)?!1:this._options.read(n).renderSideBySide&&!(this._options.read(n).useInlineViewWhenSpaceIsLimited&&this.couldShowInlineViewBecauseOfSize.read(n)&&!this._screenReaderMode.read(n))),this.readOnly=Qe(this,n=>this._options.read(n).readOnly),this.shouldRenderOldRevertArrows=Qe(this,n=>!(!this._options.read(n).renderMarginRevertIcon||!this.renderSideBySide.read(n)||this.readOnly.read(n)||this.shouldRenderGutterMenu.read(n))),this.shouldRenderGutterMenu=Qe(this,n=>this._options.read(n).renderGutterMenu),this.renderIndicators=Qe(this,n=>this._options.read(n).renderIndicators),this.enableSplitViewResizing=Qe(this,n=>this._options.read(n).enableSplitViewResizing),this.splitViewDefaultRatio=Qe(this,n=>this._options.read(n).splitViewDefaultRatio),this.ignoreTrimWhitespace=Qe(this,n=>this._options.read(n).ignoreTrimWhitespace),this.maxComputationTimeMs=Qe(this,n=>this._options.read(n).maxComputationTime),this.showMoves=Qe(this,n=>this._options.read(n).experimental.showMoves&&this.renderSideBySide.read(n)),this.isInEmbeddedEditor=Qe(this,n=>this._options.read(n).isInEmbeddedEditor),this.diffWordWrap=Qe(this,n=>this._options.read(n).diffWordWrap),this.originalEditable=Qe(this,n=>this._options.read(n).originalEditable),this.diffCodeLens=Qe(this,n=>this._options.read(n).diffCodeLens),this.accessibilityVerbose=Qe(this,n=>this._options.read(n).accessibilityVerbose),this.diffAlgorithm=Qe(this,n=>this._options.read(n).diffAlgorithm),this.showEmptyDecorations=Qe(this,n=>this._options.read(n).experimental.showEmptyDecorations),this.onlyShowAccessibleDiffViewer=Qe(this,n=>this._options.read(n).onlyShowAccessibleDiffViewer),this.compactMode=Qe(this,n=>this._options.read(n).compactMode),this.trueInlineDiffRenderingEnabled=Qe(this,n=>this._options.read(n).experimental.useTrueInlineView),this.useTrueInlineDiffRendering=Qe(this,n=>!this.renderSideBySide.read(n)&&this.trueInlineDiffRenderingEnabled.read(n)),this.hideUnchangedRegions=Qe(this,n=>this._options.read(n).hideUnchangedRegions.enabled),this.hideUnchangedRegionsRevealLineCount=Qe(this,n=>this._options.read(n).hideUnchangedRegions.revealLineCount),this.hideUnchangedRegionsContextLineCount=Qe(this,n=>this._options.read(n).hideUnchangedRegions.contextLineCount),this.hideUnchangedRegionsMinimumLineCount=Qe(this,n=>this._options.read(n).hideUnchangedRegions.minimumLineCount),this._model=Wt(this,void 0),this.shouldRenderInlineViewInSmartMode=this._model.map(this,n=>uOe(this,s=>{const r=n==null?void 0:n.diff.read(s);return r?j9e(r,this.trueInlineDiffRenderingEnabled.read(s)):void 0})).flatten().map(this,n=>!!n),this.inlineViewHideOriginalLineNumbers=this.compactMode;const i={...e,...ere(e,ko)};this._options=Wt(this,i)}updateOptions(e){const t=ere(e,this._options.get()),i={...this._options.get(),...e,...t};this._options.set(i,void 0,{changedOptions:e})}setWidth(e){this._diffEditorWidth.set(e,void 0)}setModel(e){this._model.set(e,void 0)}};yU=U9e([$9e(1,dl)],yU);function j9e(o,e){return o.mappings.every(t=>q9e(t.lineRangeMapping)||K9e(t.lineRangeMapping)||e&&eY(t.lineRangeMapping))}function q9e(o){return o.original.length===0}function K9e(o){return o.modified.length===0}function ere(o,e){var t,i,n,s,r,a,l,c;return{enableSplitViewResizing:tt(o.enableSplitViewResizing,e.enableSplitViewResizing),splitViewDefaultRatio:YLe(o.splitViewDefaultRatio,.5,.1,.9),renderSideBySide:tt(o.renderSideBySide,e.renderSideBySide),renderMarginRevertIcon:tt(o.renderMarginRevertIcon,e.renderMarginRevertIcon),maxComputationTime:iv(o.maxComputationTime,e.maxComputationTime,0,1073741824),maxFileSize:iv(o.maxFileSize,e.maxFileSize,0,1073741824),ignoreTrimWhitespace:tt(o.ignoreTrimWhitespace,e.ignoreTrimWhitespace),renderIndicators:tt(o.renderIndicators,e.renderIndicators),originalEditable:tt(o.originalEditable,e.originalEditable),diffCodeLens:tt(o.diffCodeLens,e.diffCodeLens),renderOverviewRuler:tt(o.renderOverviewRuler,e.renderOverviewRuler),diffWordWrap:qn(o.diffWordWrap,e.diffWordWrap,["off","on","inherit"]),diffAlgorithm:qn(o.diffAlgorithm,e.diffAlgorithm,["legacy","advanced"],{smart:"legacy",experimental:"advanced"}),accessibilityVerbose:tt(o.accessibilityVerbose,e.accessibilityVerbose),experimental:{showMoves:tt((t=o.experimental)==null?void 0:t.showMoves,e.experimental.showMoves),showEmptyDecorations:tt((i=o.experimental)==null?void 0:i.showEmptyDecorations,e.experimental.showEmptyDecorations),useTrueInlineView:tt((n=o.experimental)==null?void 0:n.useTrueInlineView,e.experimental.useTrueInlineView)},hideUnchangedRegions:{enabled:tt(((s=o.hideUnchangedRegions)==null?void 0:s.enabled)??((r=o.experimental)==null?void 0:r.collapseUnchangedRegions),e.hideUnchangedRegions.enabled),contextLineCount:iv((a=o.hideUnchangedRegions)==null?void 0:a.contextLineCount,e.hideUnchangedRegions.contextLineCount,0,1073741824),minimumLineCount:iv((l=o.hideUnchangedRegions)==null?void 0:l.minimumLineCount,e.hideUnchangedRegions.minimumLineCount,0,1073741824),revealLineCount:iv((c=o.hideUnchangedRegions)==null?void 0:c.revealLineCount,e.hideUnchangedRegions.revealLineCount,0,1073741824)},isInEmbeddedEditor:tt(o.isInEmbeddedEditor,e.isInEmbeddedEditor),onlyShowAccessibleDiffViewer:tt(o.onlyShowAccessibleDiffViewer,e.onlyShowAccessibleDiffViewer),renderSideBySideInlineBreakpoint:iv(o.renderSideBySideInlineBreakpoint,e.renderSideBySideInlineBreakpoint,0,1073741824),useInlineViewWhenSpaceIsLimited:tt(o.useInlineViewWhenSpaceIsLimited,e.useInlineViewWhenSpaceIsLimited),renderGutterMenu:tt(o.renderGutterMenu,e.renderGutterMenu),compactMode:tt(o.compactMode,e.compactMode)}}var G9e=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},xx=function(o,e){return function(t,i){e(t,i,o)}};let Eg=class extends CU{get onDidContentSizeChange(){return this._editors.onDidContentSizeChange}constructor(e,t,i,n,s,r,a,l){super(),this._domElement=e,this._parentContextKeyService=n,this._parentInstantiationService=s,this._accessibilitySignalService=a,this._editorProgressService=l,this.elements=jt("div.monaco-diff-editor.side-by-side",{style:{position:"relative",height:"100%"}},[jt("div.editor.original@original",{style:{position:"absolute",height:"100%"}}),jt("div.editor.modified@modified",{style:{position:"absolute",height:"100%"}}),jt("div.accessibleDiffViewer@accessibleDiffViewer",{style:{position:"absolute",height:"100%"}})]),this._diffModelSrc=this._register(FD(this,void 0)),this._diffModel=Qe(this,k=>{var E;return(E=this._diffModelSrc.read(k))==null?void 0:E.object}),this.onDidChangeModel=Ee.fromObservableLight(this._diffModel),this._contextKeyService=this._register(this._parentContextKeyService.createScoped(this._domElement)),this._instantiationService=this._register(this._parentInstantiationService.createChild(new s0([ht,this._contextKeyService]))),this._boundarySashes=Wt(this,void 0),this._accessibleDiffViewerShouldBeVisible=Wt(this,!1),this._accessibleDiffViewerVisible=Qe(this,k=>this._options.onlyShowAccessibleDiffViewer.read(k)?!0:this._accessibleDiffViewerShouldBeVisible.read(k)),this._movedBlocksLinesPart=Wt(this,void 0),this._layoutInfo=Qe(this,k=>{var we,me;const E=this._rootSizeObserver.width.read(k),N=this._rootSizeObserver.height.read(k);this._rootSizeObserver.automaticLayout?this.elements.root.style.height="100%":this.elements.root.style.height=N+"px";const A=this._sash.read(k),P=this._gutter.read(k),H=(P==null?void 0:P.width.read(k))??0,ee=((we=this._overviewRulerPart.read(k))==null?void 0:we.width)??0;let Q,te,J,Z,he;if(!!A){const pe=A.sashLeft.read(k),Fe=((me=this._movedBlocksLinesPart.read(k))==null?void 0:me.width.read(k))??0;Q=0,te=pe-H-Fe,he=pe-H,J=pe,Z=E-J-ee}else{he=0;const pe=this._options.inlineViewHideOriginalLineNumbers.read(k);Q=H,pe?te=0:te=Math.max(5,this._editors.originalObs.layoutInfoDecorationsLeft.read(k)),J=H+te,Z=E-J-ee}return this.elements.original.style.left=Q+"px",this.elements.original.style.width=te+"px",this._editors.original.layout({width:te,height:N},!0),P==null||P.layout(he),this.elements.modified.style.left=J+"px",this.elements.modified.style.width=Z+"px",this._editors.modified.layout({width:Z,height:N},!0),{modifiedEditor:this._editors.modified.getLayoutInfo(),originalEditor:this._editors.original.getLayoutInfo()}}),this._diffValue=this._diffModel.map((k,E)=>k==null?void 0:k.diff.read(E)),this.onDidUpdateDiff=Ee.fromObservableLight(this._diffValue),r.willCreateDiffEditor(),this._contextKeyService.createKey("isInDiffEditor",!0),this._domElement.appendChild(this.elements.root),this._register(it(()=>this.elements.root.remove())),this._rootSizeObserver=this._register(new Ife(this.elements.root,t.dimension)),this._rootSizeObserver.setAutomaticLayout(t.automaticLayout??!1),this._options=this._instantiationService.createInstance(yU,t),this._register(bt(k=>{this._options.setWidth(this._rootSizeObserver.width.read(k))})),this._contextKeyService.createKey(B.isEmbeddedDiffEditor.key,!1),this._register(Bd(B.isEmbeddedDiffEditor,this._contextKeyService,k=>this._options.isInEmbeddedEditor.read(k))),this._register(Bd(B.comparingMovedCode,this._contextKeyService,k=>{var E;return!!((E=this._diffModel.read(k))!=null&&E.movedTextToCompare.read(k))})),this._register(Bd(B.diffEditorRenderSideBySideInlineBreakpointReached,this._contextKeyService,k=>this._options.couldShowInlineViewBecauseOfSize.read(k))),this._register(Bd(B.diffEditorInlineMode,this._contextKeyService,k=>!this._options.renderSideBySide.read(k))),this._register(Bd(B.hasChanges,this._contextKeyService,k=>{var E,N;return(((N=(E=this._diffModel.read(k))==null?void 0:E.diff.read(k))==null?void 0:N.mappings.length)??0)>0})),this._editors=this._register(this._instantiationService.createInstance(bU,this.elements.original,this.elements.modified,this._options,i,(k,E,N,A)=>this._createInnerEditor(k,E,N,A))),this._register(Bd(B.diffEditorOriginalWritable,this._contextKeyService,k=>this._options.originalEditable.read(k))),this._register(Bd(B.diffEditorModifiedWritable,this._contextKeyService,k=>!this._options.readOnly.read(k))),this._register(Bd(B.diffEditorOriginalUri,this._contextKeyService,k=>{var E;return((E=this._diffModel.read(k))==null?void 0:E.model.original.uri.toString())??""})),this._register(Bd(B.diffEditorModifiedUri,this._contextKeyService,k=>{var E;return((E=this._diffModel.read(k))==null?void 0:E.model.modified.uri.toString())??""})),this._overviewRulerPart=vr(this,k=>this._options.renderOverviewRuler.read(k)?this._instantiationService.createInstance(Ga(cE,k),this._editors,this.elements.root,this._diffModel,this._rootSizeObserver.width,this._rootSizeObserver.height,this._layoutInfo.map(E=>E.modifiedEditor)):void 0).recomputeInitiallyAndOnChange(this._store);const c={height:this._rootSizeObserver.height,width:this._rootSizeObserver.width.map((k,E)=>{var N;return k-(((N=this._overviewRulerPart.read(E))==null?void 0:N.width)??0)})};this._sashLayout=new N9e(this._options,c),this._sash=vr(this,k=>{const E=this._options.renderSideBySide.read(k);return this.elements.root.classList.toggle("side-by-side",E),E?new Afe(this.elements.root,c,this._options.enableSplitViewResizing,this._boundarySashes,this._sashLayout.sashLeft,()=>this._sashLayout.resetSash()):void 0}).recomputeInitiallyAndOnChange(this._store);const u=vr(this,k=>this._instantiationService.createInstance(Ga(QP,k),this._editors,this._diffModel,this._options)).recomputeInitiallyAndOnChange(this._store);vr(this,k=>this._instantiationService.createInstance(Ga(T9e,k),this._editors,this._diffModel,this._options,this)).recomputeInitiallyAndOnChange(this._store);const f=new Set,g=new Set;let p=!1;const _=vr(this,k=>this._instantiationService.createInstance(Ga(gU,k),at(this._domElement),this._editors,this._diffModel,this._options,this,()=>p||u.get().isUpdatingHiddenAreas,f,g)).recomputeInitiallyAndOnChange(this._store),b=Qe(this,k=>{const E=_.read(k).viewZones.read(k).orig,N=u.read(k).viewZones.read(k).origViewZones;return E.concat(N)}),y=Qe(this,k=>{const E=_.read(k).viewZones.read(k).mod,N=u.read(k).viewZones.read(k).modViewZones;return E.concat(N)});this._register(KP(this._editors.original,b,k=>{p=k},f));let S;this._register(KP(this._editors.modified,y,k=>{p=k,p?S=Cu.capture(this._editors.modified):(S==null||S.restore(this._editors.modified),S=void 0)},g)),this._accessibleDiffViewer=vr(this,k=>this._instantiationService.createInstance(Ga(Bv,k),this.elements.accessibleDiffViewer,this._accessibleDiffViewerVisible,(E,N)=>this._accessibleDiffViewerShouldBeVisible.set(E,N),this._options.onlyShowAccessibleDiffViewer.map(E=>!E),this._rootSizeObserver.width,this._rootSizeObserver.height,this._diffModel.map((E,N)=>{var A;return(A=E==null?void 0:E.diff.read(N))==null?void 0:A.mappings.map(P=>P.lineRangeMapping)}),new v9e(this._editors))).recomputeInitiallyAndOnChange(this._store);const L=this._accessibleDiffViewerVisible.map(k=>k?"hidden":"visible");this._register(Dg(this.elements.modified,{visibility:L})),this._register(Dg(this.elements.original,{visibility:L})),this._createDiffEditorContributions(),r.addDiffEditor(this),this._gutter=vr(this,k=>this._options.shouldRenderGutterMenu.read(k)?this._instantiationService.createInstance(Ga(pU,k),this.elements.root,this._diffModel,this._editors,this._options,this._sashLayout,this._boundarySashes):void 0),this._register(e0(this._layoutInfo)),vr(this,k=>new(Ga(P1,k))(this.elements.root,this._diffModel,this._layoutInfo.map(E=>E.originalEditor),this._layoutInfo.map(E=>E.modifiedEditor),this._editors)).recomputeInitiallyAndOnChange(this._store,k=>{this._movedBlocksLinesPart.set(k,void 0)}),this._register(Ee.runAndSubscribe(this._editors.modified.onDidChangeCursorPosition,k=>this._handleCursorPositionChange(k,!0))),this._register(Ee.runAndSubscribe(this._editors.original.onDidChangeCursorPosition,k=>this._handleCursorPositionChange(k,!1)));const x=this._diffModel.map(this,(k,E)=>{if(k)return k.diff.read(E)===void 0&&!k.isDiffUpToDate.read(E)});this._register(ka((k,E)=>{if(x.read(k)===!0){const N=this._editorProgressService.show(!0,1e3);E.add(it(()=>N.done()))}})),this._register(ka((k,E)=>{E.add(new(Ga(H9e,k))(this._editors,this._diffModel,this._options,this))})),this._register(ka((k,E)=>{const N=this._diffModel.read(k);if(N)for(const A of[N.model.original,N.model.modified])E.add(A.onWillDispose(P=>{wt(new wi("TextModel got disposed before DiffEditorWidget model got reset")),this.setModel(null)}))})),this._register(bt(k=>{this._options.setModel(this._diffModel.read(k))}))}_createInnerEditor(e,t,i,n){return e.createInstance(oE,t,i,n)}_createDiffEditorContributions(){const e=Xv.getDiffEditorContributions();for(const t of e)try{this._register(this._instantiationService.createInstance(t.ctor,this))}catch(i){wt(i)}}get _targetEditor(){return this._editors.modified}getEditorType(){return _I.IDiffEditor}layout(e){this._rootSizeObserver.observe(e)}hasTextFocus(){return this._editors.original.hasTextFocus()||this._editors.modified.hasTextFocus()}saveViewState(){var i;const e=this._editors.original.saveViewState(),t=this._editors.modified.saveViewState();return{original:e,modified:t,modelState:(i=this._diffModel.get())==null?void 0:i.serializeState()}}restoreViewState(e){var t;if(e&&e.original&&e.modified){const i=e;this._editors.original.restoreViewState(i.original),this._editors.modified.restoreViewState(i.modified),i.modelState&&((t=this._diffModel.get())==null||t.restoreSerializedState(i.modelState))}}handleInitialized(){this._editors.original.handleInitialized(),this._editors.modified.handleInitialized()}createViewModel(e){return this._instantiationService.createInstance(fU,e,this._options)}getModel(){var e;return((e=this._diffModel.get())==null?void 0:e.model)??null}setModel(e){const t=e?"model"in e?GP.create(e).createNewRef(this):GP.create(this.createViewModel(e),this):null;this.setDiffModel(t)}setDiffModel(e,t){const i=this._diffModel.get();!e&&i&&this._accessibleDiffViewer.get().close(),this._diffModel.get()!==(e==null?void 0:e.object)&&gC(t,n=>{var a;const s=e==null?void 0:e.object;Ni.batchEventsGlobally(n,()=>{this._editors.original.setModel(s?s.model.original:null),this._editors.modified.setModel(s?s.model.modified:null)});const r=(a=this._diffModelSrc.get())==null?void 0:a.createNewRef(this);this._diffModelSrc.set(e==null?void 0:e.createNewRef(this),n),setTimeout(()=>{r==null||r.dispose()},0)})}updateOptions(e){this._options.updateOptions(e)}getContainerDomNode(){return this._domElement}getOriginalEditor(){return this._editors.original}getModifiedEditor(){return this._editors.modified}getLineChanges(){var t;const e=(t=this._diffModel.get())==null?void 0:t.diff.get();return e?Y9e(e):null}revert(e){const t=this._diffModel.get();!t||!t.isDiffUpToDate.get()||this._editors.modified.executeEdits("diffEditor",[{range:e.modified.toExclusiveRange(),text:t.model.original.getValueInRange(e.original.toExclusiveRange())}])}revertRangeMappings(e){const t=this._diffModel.get();if(!t||!t.isDiffUpToDate.get())return;const i=e.map(n=>({range:n.modifiedRange,text:t.model.original.getValueInRange(n.originalRange)}));this._editors.modified.executeEdits("diffEditor",i)}_goTo(e){this._editors.modified.setPosition(new G(e.lineRangeMapping.modified.startLineNumber,1)),this._editors.modified.revealRangeInCenter(e.lineRangeMapping.modified.toExclusiveRange())}goToDiff(e){var s,r;const t=(r=(s=this._diffModel.get())==null?void 0:s.diff.get())==null?void 0:r.mappings;if(!t||t.length===0)return;const i=this._editors.modified.getPosition().lineNumber;let n;e==="next"?n=t.find(a=>a.lineRangeMapping.modified.startLineNumber>i)??t[0]:n=CD(t,a=>a.lineRangeMapping.modified.startLineNumber<i)??t[t.length-1],this._goTo(n),n.lineRangeMapping.modified.isEmpty?this._accessibilitySignalService.playSignal(Tl.diffLineDeleted,{source:"diffEditor.goToDiff"}):n.lineRangeMapping.original.isEmpty?this._accessibilitySignalService.playSignal(Tl.diffLineInserted,{source:"diffEditor.goToDiff"}):n&&this._accessibilitySignalService.playSignal(Tl.diffLineModified,{source:"diffEditor.goToDiff"})}revealFirstDiff(){const e=this._diffModel.get();e&&this.waitForDiff().then(()=>{var i;const t=(i=e.diff.get())==null?void 0:i.mappings;!t||t.length===0||this._goTo(t[0])})}accessibleDiffViewerNext(){this._accessibleDiffViewer.get().next()}accessibleDiffViewerPrev(){this._accessibleDiffViewer.get().prev()}async waitForDiff(){const e=this._diffModel.get();e&&await e.waitForDiff()}mapToOtherSide(){var r,a;const e=this._editors.modified.hasWidgetFocus(),t=e?this._editors.modified:this._editors.original,i=e?this._editors.original:this._editors.modified;let n;const s=t.getSelection();if(s){const l=(a=(r=this._diffModel.get())==null?void 0:r.diff.get())==null?void 0:a.mappings.map(c=>e?c.lineRangeMapping.flip():c.lineRangeMapping);if(l){const c=Boe(s.getStartPosition(),l),u=Boe(s.getEndPosition(),l);n=M.plusRange(c,u)}}return{destination:i,destinationSelection:n}}switchSide(){const{destination:e,destinationSelection:t}=this.mapToOtherSide();e.focus(),t&&e.setSelection(t)}exitCompareMove(){const e=this._diffModel.get();e&&e.movedTextToCompare.set(void 0,void 0)}collapseAllUnchangedRegions(){var t;const e=(t=this._diffModel.get())==null?void 0:t.unchangedRegions.get();e&&Mn(i=>{for(const n of e)n.collapseAll(i)})}showAllUnchangedRegions(){var t;const e=(t=this._diffModel.get())==null?void 0:t.unchangedRegions.get();e&&Mn(i=>{for(const n of e)n.showAll(i)})}_handleCursorPositionChange(e,t){var i,n;if((e==null?void 0:e.reason)===3){const s=(n=(i=this._diffModel.get())==null?void 0:i.diff.get())==null?void 0:n.mappings.find(r=>t?r.lineRangeMapping.modified.contains(e.position.lineNumber):r.lineRangeMapping.original.contains(e.position.lineNumber));s!=null&&s.lineRangeMapping.modified.isEmpty?this._accessibilitySignalService.playSignal(Tl.diffLineDeleted,{source:"diffEditor.cursorPositionChanged"}):s!=null&&s.lineRangeMapping.original.isEmpty?this._accessibilitySignalService.playSignal(Tl.diffLineInserted,{source:"diffEditor.cursorPositionChanged"}):s&&this._accessibilitySignalService.playSignal(Tl.diffLineModified,{source:"diffEditor.cursorPositionChanged"})}}};Eg=G9e([xx(3,ht),xx(4,nt),xx(5,hi),xx(6,o_),xx(7,i_)],Eg);function Y9e(o){return o.mappings.map(e=>{const t=e.lineRangeMapping;let i,n,s,r,a=t.innerChanges;return t.original.isEmpty?(i=t.original.startLineNumber-1,n=0,a=void 0):(i=t.original.startLineNumber,n=t.original.endLineNumberExclusive-1),t.modified.isEmpty?(s=t.modified.startLineNumber-1,r=0,a=void 0):(s=t.modified.startLineNumber,r=t.modified.endLineNumberExclusive-1),{originalStartLineNumber:i,originalEndLineNumber:n,modifiedStartLineNumber:s,modifiedEndLineNumber:r,charChanges:a==null?void 0:a.map(l=>({originalStartLineNumber:l.originalRange.startLineNumber,originalStartColumn:l.originalRange.startColumn,originalEndLineNumber:l.originalRange.endLineNumber,originalEndColumn:l.originalRange.endColumn,modifiedStartLineNumber:l.modifiedRange.startLineNumber,modifiedStartColumn:l.modifiedRange.startColumn,modifiedEndLineNumber:l.modifiedRange.endLineNumber,modifiedEndColumn:l.modifiedRange.endColumn}))}})}var iY=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},rn=function(o,e){return function(t,i){e(t,i,o)}};let Z9e=0,tre=!1;function X9e(o){if(!o){if(tre)return;tre=!0}iPe(o||Vi.document.body)}let eO=class extends oE{constructor(e,t,i,n,s,r,a,l,c,u,f,g,p){const _={...t};_.ariaLabel=_.ariaLabel||p6.editorViewAccessibleLabel,super(e,_,{},i,n,s,r,c,u,f,g,p),l instanceof bS?this._standaloneKeybindingService=l:this._standaloneKeybindingService=null,X9e(_.ariaContainerElement),mOe((b,y)=>i.createInstance(aS,b,y,{})),_Oe(a)}addCommand(e,t,i){if(!this._standaloneKeybindingService)return console.warn("Cannot add command because the editor is configured with an unrecognized KeybindingService"),null;const n="DYNAMIC_"+ ++Z9e,s=de.deserialize(i);return this._standaloneKeybindingService.addDynamicKeybinding(n,e,t,s),n}createContextKey(e,t){return this._contextKeyService.createKey(e,t)}addAction(e){if(typeof e.id!="string"||typeof e.label!="string"||typeof e.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");if(!this._standaloneKeybindingService)return console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),X.None;const t=e.id,i=e.label,n=de.and(de.equals("editorId",this.getId()),de.deserialize(e.precondition)),s=e.keybindings,r=de.and(n,de.deserialize(e.keybindingContext)),a=e.contextMenuGroupId||null,l=e.contextMenuOrder||0,c=(p,..._)=>Promise.resolve(e.run(this,..._)),u=new le,f=this.getId()+":"+t;if(u.add(ii.registerCommand(f,c)),a){const p={command:{id:f,title:i},when:n,group:a,order:l};u.add(lo.appendMenuItem(qe.EditorContext,p))}if(Array.isArray(s))for(const p of s)u.add(this._standaloneKeybindingService.addDynamicKeybinding(f,p,c,r));const g=new xfe(f,i,i,void 0,n,(...p)=>Promise.resolve(e.run(this,...p)),this._contextKeyService);return this._actions.set(t,g),u.add(it(()=>{this._actions.delete(t)})),u}_triggerCommand(e,t){if(this._codeEditorService instanceof MA)try{this._codeEditorService.setActiveCodeEditor(this),super._triggerCommand(e,t)}finally{this._codeEditorService.setActiveCodeEditor(null)}else super._triggerCommand(e,t)}};eO=iY([rn(2,nt),rn(3,hi),rn(4,nn),rn(5,ht),rn(6,qh),rn(7,Di),rn(8,Ws),rn(9,fs),rn(10,dl),rn(11,On),rn(12,Ue)],eO);let wU=class extends eO{constructor(e,t,i,n,s,r,a,l,c,u,f,g,p,_,b,y){const S={...t};IP(f,S,!1);const L=c.registerEditorContainer(e);typeof S.theme=="string"&&c.setTheme(S.theme),typeof S.autoDetectHighContrast<"u"&&c.setAutoDetectHighContrast(!!S.autoDetectHighContrast);const x=S.model;delete S.model,super(e,S,i,n,s,r,a,l,c,u,g,b,y),this._configurationService=f,this._standaloneThemeService=c,this._register(L);let k;if(typeof x>"u"){const E=_.getLanguageIdByMimeType(S.language)||S.language||Xr;k=Bfe(p,_,S.value||"",E,void 0),this._ownsModel=!0}else k=x,this._ownsModel=!1;if(this._attachModel(k),k){const E={oldModelUrl:null,newModelUrl:k.uri};this._onDidChangeModel.fire(E)}}dispose(){super.dispose()}updateOptions(e){IP(this._configurationService,e,!1),typeof e.theme=="string"&&this._standaloneThemeService.setTheme(e.theme),typeof e.autoDetectHighContrast<"u"&&this._standaloneThemeService.setAutoDetectHighContrast(!!e.autoDetectHighContrast),super.updateOptions(e)}_postDetachModelCleanup(e){super._postDetachModelCleanup(e),e&&this._ownsModel&&(e.dispose(),this._ownsModel=!1)}};wU=iY([rn(2,nt),rn(3,hi),rn(4,nn),rn(5,ht),rn(6,qh),rn(7,Di),rn(8,Ql),rn(9,fs),rn(10,Ht),rn(11,dl),rn(12,un),rn(13,In),rn(14,On),rn(15,Ue)],wU);let SU=class extends Eg{constructor(e,t,i,n,s,r,a,l,c,u,f,g){const p={...t};IP(l,p,!0);const _=r.registerEditorContainer(e);typeof p.theme=="string"&&r.setTheme(p.theme),typeof p.autoDetectHighContrast<"u"&&r.setAutoDetectHighContrast(!!p.autoDetectHighContrast),super(e,p,{},n,i,s,g,u),this._configurationService=l,this._standaloneThemeService=r,this._register(_)}dispose(){super.dispose()}updateOptions(e){IP(this._configurationService,e,!0),typeof e.theme=="string"&&this._standaloneThemeService.setTheme(e.theme),typeof e.autoDetectHighContrast<"u"&&this._standaloneThemeService.setAutoDetectHighContrast(!!e.autoDetectHighContrast),super.updateOptions(e)}_createInnerEditor(e,t,i){return e.createInstance(eO,t,i)}getOriginalEditor(){return super.getOriginalEditor()}getModifiedEditor(){return super.getModifiedEditor()}addCommand(e,t,i){return this.getModifiedEditor().addCommand(e,t,i)}createContextKey(e,t){return this.getModifiedEditor().createContextKey(e,t)}addAction(e){return this.getModifiedEditor().addAction(e)}};SU=iY([rn(2,nt),rn(3,ht),rn(4,hi),rn(5,Ql),rn(6,fs),rn(7,Ht),rn(8,cl),rn(9,i_),rn(10,Bg),rn(11,o_)],SU);function Bfe(o,e,t,i,n){if(t=t||"",!i){const s=t.indexOf(`
`);let r=t;return s!==-1&&(r=t.substring(0,s)),ire(o,t,e.createByFilepathOrFirstLine(n||null,r),n)}return ire(o,t,e.createById(i),n)}function ire(o,e,t,i){return o.createModel(e,t,i)}var Q9e=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},nre=function(o,e){return function(t,i){e(t,i,o)}};class J9e{constructor(e,t){this.viewModel=e,this.deltaScrollVertical=t}getId(){return this.viewModel}}let tO=class extends X{constructor(e,t,i,n,s){super(),this._container=e,this._overflowWidgetsDomNode=t,this._workbenchUIElementFactory=i,this._instantiationService=n,this._viewModel=Wt(this,void 0),this._collapsed=Qe(this,l=>{var c;return(c=this._viewModel.read(l))==null?void 0:c.collapsed.read(l)}),this._editorContentHeight=Wt(this,500),this.contentHeight=Qe(this,l=>(this._collapsed.read(l)?0:this._editorContentHeight.read(l))+this._outerEditorHeight),this._modifiedContentWidth=Wt(this,0),this._modifiedWidth=Wt(this,0),this._originalContentWidth=Wt(this,0),this._originalWidth=Wt(this,0),this.maxScroll=Qe(this,l=>{const c=this._modifiedContentWidth.read(l)-this._modifiedWidth.read(l),u=this._originalContentWidth.read(l)-this._originalWidth.read(l);return c>u?{maxScroll:c,width:this._modifiedWidth.read(l)}:{maxScroll:u,width:this._originalWidth.read(l)}}),this._elements=jt("div.multiDiffEntry",[jt("div.header@header",[jt("div.header-content",[jt("div.collapse-button@collapseButton"),jt("div.file-path",[jt("div.title.modified.show-file-icons@primaryPath",[]),jt("div.status.deleted@status",["R"]),jt("div.title.original.show-file-icons@secondaryPath",[])]),jt("div.actions@actions")])]),jt("div.editorParent",[jt("div.editorContainer@editor")])]),this.editor=this._register(this._instantiationService.createInstance(Eg,this._elements.editor,{overflowWidgetsDomNode:this._overflowWidgetsDomNode},{})),this.isModifedFocused=Qa(this.editor.getModifiedEditor()).isFocused,this.isOriginalFocused=Qa(this.editor.getOriginalEditor()).isFocused,this.isFocused=Qe(this,l=>this.isModifedFocused.read(l)||this.isOriginalFocused.read(l)),this._resourceLabel=this._workbenchUIElementFactory.createResourceLabel?this._register(this._workbenchUIElementFactory.createResourceLabel(this._elements.primaryPath)):void 0,this._resourceLabel2=this._workbenchUIElementFactory.createResourceLabel?this._register(this._workbenchUIElementFactory.createResourceLabel(this._elements.secondaryPath)):void 0,this._dataStore=this._register(new le),this._headerHeight=40,this._lastScrollTop=-1,this._isSettingScrollTop=!1;const r=new hP(this._elements.collapseButton,{});this._register(bt(l=>{r.element.className="",r.icon=this._collapsed.read(l)?Se.chevronRight:Se.chevronDown})),this._register(r.onDidClick(()=>{var l;(l=this._viewModel.get())==null||l.collapsed.set(!this._collapsed.get(),void 0)})),this._register(bt(l=>{this._elements.editor.style.display=this._collapsed.read(l)?"none":"block"})),this._register(this.editor.getModifiedEditor().onDidLayoutChange(l=>{const c=this.editor.getModifiedEditor().getLayoutInfo().contentWidth;this._modifiedWidth.set(c,void 0)})),this._register(this.editor.getOriginalEditor().onDidLayoutChange(l=>{const c=this.editor.getOriginalEditor().getLayoutInfo().contentWidth;this._originalWidth.set(c,void 0)})),this._register(this.editor.onDidContentSizeChange(l=>{Bx(c=>{this._editorContentHeight.set(l.contentHeight,c),this._modifiedContentWidth.set(this.editor.getModifiedEditor().getContentWidth(),c),this._originalContentWidth.set(this.editor.getOriginalEditor().getContentWidth(),c)})})),this._register(this.editor.getOriginalEditor().onDidScrollChange(l=>{if(this._isSettingScrollTop||!l.scrollTopChanged||!this._data)return;const c=l.scrollTop-this._lastScrollTop;this._data.deltaScrollVertical(c)})),this._register(bt(l=>{var u;const c=(u=this._viewModel.read(l))==null?void 0:u.isActive.read(l);this._elements.root.classList.toggle("active",c)})),this._container.appendChild(this._elements.root),this._outerEditorHeight=this._headerHeight,this._contextKeyService=this._register(s.createScoped(this._elements.actions));const a=this._register(this._instantiationService.createChild(new s0([ht,this._contextKeyService])));this._register(a.createInstance(XP,this._elements.actions,qe.MultiDiffEditorFileToolbar,{actionRunner:this._register(new Pfe(()=>{var l;return(l=this._viewModel.get())==null?void 0:l.modifiedUri})),menuOptions:{shouldForwardArgs:!0},toolbarOptions:{primaryGroup:l=>l.startsWith("navigation")},actionViewItemProvider:(l,c)=>Nue(a,l,c)}))}setScrollLeft(e){this._modifiedContentWidth.get()-this._modifiedWidth.get()>this._originalContentWidth.get()-this._originalWidth.get()?this.editor.getModifiedEditor().setScrollLeft(e):this.editor.getOriginalEditor().setScrollLeft(e)}setData(e){this._data=e;function t(n){return{...n,scrollBeyondLastLine:!1,hideUnchangedRegions:{enabled:!0},scrollbar:{vertical:"hidden",horizontal:"hidden",handleMouseWheel:!1,useShadows:!1},renderOverviewRuler:!1,fixedOverflowWidgets:!0,overviewRulerBorder:!1}}if(!e){Bx(n=>{this._viewModel.set(void 0,n),this.editor.setDiffModel(null,n),this._dataStore.clear()});return}const i=e.viewModel.documentDiffItem;if(Bx(n=>{var c,u;(c=this._resourceLabel)==null||c.setUri(e.viewModel.modifiedUri??e.viewModel.originalUri,{strikethrough:e.viewModel.modifiedUri===void 0});let s=!1,r=!1,a=!1,l="";e.viewModel.modifiedUri&&e.viewModel.originalUri&&e.viewModel.modifiedUri.path!==e.viewModel.originalUri.path?(l="R",s=!0):e.viewModel.modifiedUri?e.viewModel.originalUri||(l="A",a=!0):(l="D",r=!0),this._elements.status.classList.toggle("renamed",s),this._elements.status.classList.toggle("deleted",r),this._elements.status.classList.toggle("added",a),this._elements.status.innerText=l,(u=this._resourceLabel2)==null||u.setUri(s?e.viewModel.originalUri:void 0,{strikethrough:!0}),this._dataStore.clear(),this._viewModel.set(e.viewModel,n),this.editor.setDiffModel(e.viewModel.diffEditorViewModelRef,n),this.editor.updateOptions(t(i.options??{}))}),i.onOptionsDidChange&&this._dataStore.add(i.onOptionsDidChange(()=>{this.editor.updateOptions(t(i.options??{}))})),e.viewModel.isAlive.recomputeInitiallyAndOnChange(this._dataStore,n=>{n||this.setData(void 0)}),e.viewModel.documentDiffItem.contextKeys)for(const[n,s]of Object.entries(e.viewModel.documentDiffItem.contextKeys))this._contextKeyService.createKey(n,s)}render(e,t,i,n){this._elements.root.style.visibility="visible",this._elements.root.style.top=`${e.start}px`,this._elements.root.style.height=`${e.length}px`,this._elements.root.style.width=`${t}px`,this._elements.root.style.position="absolute";const s=e.length-this._headerHeight,r=Math.max(0,Math.min(n.start-e.start,s));this._elements.header.style.transform=`translateY(${r}px)`,Bx(a=>{this.editor.layout({width:t-2*8-2*1,height:e.length-this._outerEditorHeight})});try{this._isSettingScrollTop=!0,this._lastScrollTop=i,this.editor.getOriginalEditor().setScrollTop(i)}finally{this._isSettingScrollTop=!1}this._elements.header.classList.toggle("shadow",r>0||i>0),this._elements.header.classList.toggle("collapsed",r===s)}hide(){this._elements.root.style.top="-100000px",this._elements.root.style.visibility="hidden"}};tO=Q9e([nre(3,nt),nre(4,ht)],tO);class e8e{constructor(e){this._create=e,this._unused=new Set,this._used=new Set,this._itemData=new Map}getUnusedObj(e){let t;if(this._unused.size===0)t=this._create(e),this._itemData.set(t,e);else{const i=[...this._unused.values()];t=i.find(n=>this._itemData.get(n).getId()===e.getId())??i[0],this._unused.delete(t),this._itemData.set(t,e),t.setData(e)}return this._used.add(t),{object:t,dispose:()=>{this._used.delete(t),this._unused.size>5?t.dispose():this._unused.add(t)}}}dispose(){for(const e of this._used)e.dispose();for(const e of this._unused)e.dispose();this._used.clear(),this._unused.clear()}}var t8e=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},sre=function(o,e){return function(t,i){e(t,i,o)}};let LU=class extends X{constructor(e,t,i,n,s,r){super(),this._element=e,this._dimension=t,this._viewModel=i,this._workbenchUIElementFactory=n,this._parentContextKeyService=s,this._parentInstantiationService=r,this._scrollableElements=jt("div.scrollContent",[jt("div@content",{style:{overflow:"hidden"}}),jt("div.monaco-editor@overflowWidgetsDomNode",{})]),this._scrollable=this._register(new ZS({forceIntegerValues:!1,scheduleAtNextAnimationFrame:l=>al(at(this._element),l),smoothScrollDuration:100})),this._scrollableElement=this._register(new b4(this._scrollableElements.root,{vertical:1,horizontal:1,useShadows:!1},this._scrollable)),this._elements=jt("div.monaco-component.multiDiffEditor",{},[jt("div",{},[this._scrollableElement.getDomNode()]),jt("div.placeholder@placeholder",{},[jt("div",[v("noChangedFiles","No Changed Files")])])]),this._sizeObserver=this._register(new Ife(this._element,void 0)),this._objectPool=this._register(new e8e(l=>{const c=this._instantiationService.createInstance(tO,this._scrollableElements.content,this._scrollableElements.overflowWidgetsDomNode,this._workbenchUIElementFactory);return c.setData(l),c})),this.scrollTop=Ni(this,this._scrollableElement.onScroll,()=>this._scrollableElement.getScrollPosition().scrollTop),this.scrollLeft=Ni(this,this._scrollableElement.onScroll,()=>this._scrollableElement.getScrollPosition().scrollLeft),this._viewItemsInfo=n_(this,(l,c)=>{const u=this._viewModel.read(l);if(!u)return{items:[],getItem:_=>{throw new wi}};const f=u.items.read(l),g=new Map;return{items:f.map(_=>{var S;const b=c.add(new i8e(_,this._objectPool,this.scrollLeft,L=>{this._scrollableElement.setScrollPosition({scrollTop:this._scrollableElement.getScrollPosition().scrollTop+L})})),y=(S=this._lastDocStates)==null?void 0:S[b.getKey()];return y&&Mn(L=>{b.setViewState(y,L)}),g.set(_,b),b}),getItem:_=>g.get(_)}}),this._viewItems=this._viewItemsInfo.map(this,l=>l.items),this._spaceBetweenPx=0,this._totalHeight=this._viewItems.map(this,(l,c)=>l.reduce((u,f)=>u+f.contentHeight.read(c)+this._spaceBetweenPx,0)),this._contextKeyService=this._register(this._parentContextKeyService.createScoped(this._element)),this._instantiationService=this._register(this._parentInstantiationService.createChild(new s0([ht,this._contextKeyService]))),this._lastDocStates={},this._contextKeyService.createKey(B.inMultiDiffEditor.key,!0),this._register(ka((l,c)=>{const u=this._viewModel.read(l);if(u&&u.contextKeys)for(const[f,g]of Object.entries(u.contextKeys)){const p=this._contextKeyService.createKey(f,void 0);p.set(g),c.add(it(()=>p.reset()))}}));const a=this._parentContextKeyService.createKey(B.multiDiffEditorAllCollapsed.key,!1);this._register(bt(l=>{const c=this._viewModel.read(l);if(c){const u=c.items.read(l).every(f=>f.collapsed.read(l));a.set(u)}})),this._register(bt(l=>{const c=this._dimension.read(l);this._sizeObserver.observe(c)})),this._register(bt(l=>{const c=this._viewItems.read(l);this._elements.placeholder.classList.toggle("visible",c.length===0)})),this._scrollableElements.content.style.position="relative",this._register(bt(l=>{const c=this._sizeObserver.height.read(l);this._scrollableElements.root.style.height=`${c}px`;const u=this._totalHeight.read(l);this._scrollableElements.content.style.height=`${u}px`;const f=this._sizeObserver.width.read(l);let g=f;const p=this._viewItems.read(l),_=iK(p,Yr(b=>b.maxScroll.read(l).maxScroll,sd));if(_){const b=_.maxScroll.read(l);g=f+b.maxScroll}this._scrollableElement.setScrollDimensions({width:f,height:c,scrollHeight:u,scrollWidth:g})})),e.replaceChildren(this._elements.root),this._register(it(()=>{e.replaceChildren()})),this._register(this._register(bt(l=>{Bx(c=>{this.render(l)})})))}render(e){const t=this.scrollTop.read(e);let i=0,n=0,s=0;const r=this._sizeObserver.height.read(e),a=Vt.ofStartAndLength(t,r),l=this._sizeObserver.width.read(e);for(const c of this._viewItems.read(e)){const u=c.contentHeight.read(e),f=Math.min(u,r),g=Vt.ofStartAndLength(n,f),p=Vt.ofStartAndLength(s,u);if(p.isBefore(a))i-=u-f,c.hide();else if(p.isAfter(a))c.hide();else{const _=Math.max(0,Math.min(a.start-p.start,u-f));i-=_;const b=Vt.ofStartAndLength(t+i,r);c.render(g,_,l,b)}n+=f+this._spaceBetweenPx,s+=u+this._spaceBetweenPx}this._scrollableElements.content.style.transform=`translateY(${-(t+i)}px)`}};LU=t8e([sre(4,ht),sre(5,nt)],LU);class i8e extends X{constructor(e,t,i,n){super(),this.viewModel=e,this._objectPool=t,this._scrollLeft=i,this._deltaScrollVertical=n,this._templateRef=this._register(FD(this,void 0)),this.contentHeight=Qe(this,s=>{var r,a;return((a=(r=this._templateRef.read(s))==null?void 0:r.object.contentHeight)==null?void 0:a.read(s))??this.viewModel.lastTemplateData.read(s).contentHeight}),this.maxScroll=Qe(this,s=>{var r;return((r=this._templateRef.read(s))==null?void 0:r.object.maxScroll.read(s))??{maxScroll:0,scrollWidth:0}}),this.template=Qe(this,s=>{var r;return(r=this._templateRef.read(s))==null?void 0:r.object}),this._isHidden=Wt(this,!1),this._isFocused=Qe(this,s=>{var r;return((r=this.template.read(s))==null?void 0:r.isFocused.read(s))??!1}),this.viewModel.setIsFocused(this._isFocused,void 0),this._register(bt(s=>{var a;const r=this._scrollLeft.read(s);(a=this._templateRef.read(s))==null||a.object.setScrollLeft(r)})),this._register(bt(s=>{const r=this._templateRef.read(s);!r||!this._isHidden.read(s)||r.object.isFocused.read(s)||this._clear()}))}dispose(){this._clear(),super.dispose()}toString(){var e;return`VirtualViewItem(${(e=this.viewModel.documentDiffItem.modified)==null?void 0:e.uri.toString()})`}getKey(){return this.viewModel.getKey()}setViewState(e,t){var r;this.viewModel.collapsed.set(e.collapsed,t),this._updateTemplateData(t);const i=this.viewModel.lastTemplateData.get(),n=(r=e.selections)==null?void 0:r.map(Ke.liftSelection);this.viewModel.lastTemplateData.set({...i,selections:n},t);const s=this._templateRef.get();s&&n&&s.object.editor.setSelections(n)}_updateTemplateData(e){const t=this._templateRef.get();t&&this.viewModel.lastTemplateData.set({contentHeight:t.object.contentHeight.get(),selections:t.object.editor.getSelections()??void 0},e)}_clear(){const e=this._templateRef.get();e&&Mn(t=>{this._updateTemplateData(t),e.object.hide(),this._templateRef.set(void 0,t)})}hide(){this._isHidden.set(!0,void 0)}render(e,t,i,n){this._isHidden.set(!1,void 0);let s=this._templateRef.get();if(!s){s=this._objectPool.getUnusedObj(new J9e(this.viewModel,this._deltaScrollVertical)),this._templateRef.set(s,void 0);const r=this.viewModel.lastTemplateData.get().selections;r&&s.object.editor.setSelections(r)}s.object.render(e,i,t,n)}}W("multiDiffEditor.headerBackground",{dark:"#262626",light:"tab.inactiveBackground",hcDark:"tab.inactiveBackground",hcLight:"tab.inactiveBackground"},v("multiDiffEditor.headerBackground","The background color of the diff editor's header"));W("multiDiffEditor.background",ud,v("multiDiffEditor.background","The background color of the multi file diff editor"));W("multiDiffEditor.border",{dark:"sideBarSectionHeader.border",light:"#cccccc",hcDark:"sideBarSectionHeader.border",hcLight:"#cccccc"},v("multiDiffEditor.border","The border color of the multi file diff editor"));var n8e=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},s8e=function(o,e){return function(t,i){e(t,i,o)}};let xU=class extends X{constructor(e,t,i){super(),this._element=e,this._workbenchUIElementFactory=t,this._instantiationService=i,this._dimension=Wt(this,void 0),this._viewModel=Wt(this,void 0),this._widgetImpl=n_(this,(n,s)=>(Ga(tO,n),s.add(this._instantiationService.createInstance(Ga(LU,n),this._element,this._dimension,this._viewModel,this._workbenchUIElementFactory)))),this._register(e0(this._widgetImpl))}};xU=n8e([s8e(2,nt)],xU);function o8e(o,e,t){return mt.initialize(t||{}).createInstance(wU,o,e)}function r8e(o){return mt.get(hi).onCodeEditorAdd(t=>{o(t)})}function a8e(o){return mt.get(hi).onDiffEditorAdd(t=>{o(t)})}function l8e(){return mt.get(hi).listCodeEditors()}function c8e(){return mt.get(hi).listDiffEditors()}function d8e(o,e,t){return mt.initialize(t||{}).createInstance(SU,o,e)}function u8e(o,e){const t=mt.initialize(e||{});return new xU(o,{},t)}function h8e(o){if(typeof o.id!="string"||typeof o.run!="function")throw new Error("Invalid command descriptor, `id` and `run` are required properties!");return ii.registerCommand(o.id,o.run)}function f8e(o){if(typeof o.id!="string"||typeof o.label!="string"||typeof o.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");const e=de.deserialize(o.precondition),t=(n,...s)=>Bs.runEditorCommand(n,s,e,(r,a,l)=>Promise.resolve(o.run(a,...l))),i=new le;if(i.add(ii.registerCommand(o.id,t)),o.contextMenuGroupId){const n={command:{id:o.id,title:o.label},when:e,group:o.contextMenuGroupId,order:o.contextMenuOrder||0};i.add(lo.appendMenuItem(qe.EditorContext,n))}if(Array.isArray(o.keybindings)){const n=mt.get(Di);if(!(n instanceof bS))console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService");else{const s=de.and(e,de.deserialize(o.keybindingContext));i.add(n.addDynamicKeybindings(o.keybindings.map(r=>({keybinding:r,command:o.id,when:s}))))}}return i}function g8e(o){return Wfe([o])}function Wfe(o){const e=mt.get(Di);return e instanceof bS?e.addDynamicKeybindings(o.map(t=>({keybinding:t.keybinding,command:t.command,commandArgs:t.commandArgs,when:de.deserialize(t.when)}))):(console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),X.None)}function p8e(o,e,t){const i=mt.get(In),n=i.getLanguageIdByMimeType(e)||e;return Bfe(mt.get(un),i,o,n,t)}function m8e(o,e){const t=mt.get(In),i=t.getLanguageIdByMimeType(e)||e||Xr;o.setLanguage(t.createById(i))}function _8e(o,e,t){o&&mt.get(Kh).changeOne(e,o.uri,t)}function v8e(o){mt.get(Kh).changeAll(o,[])}function b8e(o){return mt.get(Kh).read(o)}function C8e(o){return mt.get(Kh).onMarkerChanged(o)}function y8e(o){return mt.get(un).getModel(o)}function w8e(){return mt.get(un).getModels()}function S8e(o){return mt.get(un).onModelAdded(o)}function L8e(o){return mt.get(un).onModelRemoved(o)}function x8e(o){return mt.get(un).onModelLanguageChanged(t=>{o({model:t.model,oldLanguage:t.oldLanguageId})})}function k8e(o){return uBe(mt.get(un),o)}function D8e(o,e){const t=mt.get(In),i=mt.get(Ql);return SG.colorizeElement(i,t,o,e).then(()=>{i.registerEditorContainer(o)})}function E8e(o,e,t){const i=mt.get(In);return mt.get(Ql).registerEditorContainer(Vi.document.body),SG.colorize(i,o,e,t)}function I8e(o,e,t=4){return mt.get(Ql).registerEditorContainer(Vi.document.body),SG.colorizeModelLine(o,e,t)}function T8e(o){const e=Kn.get(o);return e||{getInitialState:()=>uS,tokenize:(t,i,n)=>RK(o,n)}}function N8e(o,e){Kn.getOrCreate(e);const t=T8e(e),i=zh(o),n=[];let s=t.getInitialState();for(let r=0,a=i.length;r<a;r++){const l=i[r],c=t.tokenize(l,!0,s);n[r]=c.tokens,s=c.endState}return n}function R8e(o,e){mt.get(Ql).defineTheme(o,e)}function M8e(o){mt.get(Ql).setTheme(o)}function A8e(){hV.clearAllFontInfos()}function P8e(o,e){return ii.registerCommand({id:o,handler:e})}function O8e(o){return mt.get(Ma).registerOpener({async open(t){return typeof t=="string"&&(t=st.parse(t)),o.open(t)}})}function F8e(o){return mt.get(hi).registerCodeEditorOpenHandler(async(t,i,n)=>{var a;if(!i)return null;const s=(a=t.options)==null?void 0:a.selection;let r;return s&&typeof s.endLineNumber=="number"&&typeof s.endColumn=="number"?r=s:s&&(r={lineNumber:s.startLineNumber,column:s.startColumn}),await o.openCodeEditor(i,t.resource,r)?i:null})}function B8e(){return{create:o8e,getEditors:l8e,getDiffEditors:c8e,onDidCreateEditor:r8e,onDidCreateDiffEditor:a8e,createDiffEditor:d8e,addCommand:h8e,addEditorAction:f8e,addKeybindingRule:g8e,addKeybindingRules:Wfe,createModel:p8e,setModelLanguage:m8e,setModelMarkers:_8e,getModelMarkers:b8e,removeAllMarkers:v8e,onDidChangeMarkers:C8e,getModels:w8e,getModel:y8e,onDidCreateModel:S8e,onWillDisposeModel:L8e,onDidChangeModelLanguage:x8e,createWebWorker:k8e,colorizeElement:D8e,colorize:E8e,colorizeModelLine:I8e,tokenize:N8e,defineTheme:R8e,setTheme:M8e,remeasureFonts:A8e,registerCommand:P8e,registerLinkOpener:O8e,registerEditorOpener:F8e,AccessibilitySupport:a8,ContentWidgetPositionPreference:f8,CursorChangeReason:g8,DefaultEndOfLine:p8,EditorAutoIndentStrategy:_8,EditorOption:v8,EndOfLinePreference:b8,EndOfLineSequence:C8,MinimapPosition:N8,MinimapSectionHeaderStyle:R8,MouseTargetType:M8,OverlayWidgetPositionPreference:O8,OverviewRulerLane:F8,GlyphMarginLane:y8,RenderLineNumbersType:H8,RenderMinimap:V8,ScrollbarVisibility:U8,ScrollType:z8,TextEditorCursorBlinkingStyle:Y8,TextEditorCursorStyle:Z8,TrackedRangeStickiness:X8,WrappingIndent:Q8,InjectedTextCursorStops:L8,PositionAffinity:W8,ShowLightbulbIconMode:j8,ConfigurationChangedEvent:Ile,BareFontInfo:Yv,FontInfo:uV,TextModelResolvedOptions:mM,FindMatch:bD,ApplyUpdateResult:tk,EditorZoom:mc,createMultiFileDiffEditor:u8e,EditorType:_I,EditorOptions:yu}}function W8e(o,e){if(!e||!Array.isArray(e))return!1;for(const t of e)if(!o(t))return!1;return!0}function BR(o,e){return typeof o=="boolean"?o:e}function ore(o,e){return typeof o=="string"?o:e}function H8e(o){const e={};for(const t of o)e[t]=!0;return e}function rre(o,e=!1){e&&(o=o.map(function(i){return i.toLowerCase()}));const t=H8e(o);return e?function(i){return t[i.toLowerCase()]!==void 0&&t.hasOwnProperty(i.toLowerCase())}:function(i){return t[i]!==void 0&&t.hasOwnProperty(i)}}function kU(o,e,t){e=e.replace(/@@/g,"");let i=0,n;do n=!1,e=e.replace(/@(\w+)/g,function(r,a){n=!0;let l="";if(typeof o[a]=="string")l=o[a];else if(o[a]&&o[a]instanceof RegExp)l=o[a].source;else throw o[a]===void 0?mn(o,"language definition does not contain attribute '"+a+"', used at: "+e):mn(o,"attribute reference '"+a+"' must be a string, used at: "+e);return wv(l)?"":"(?:"+l+")"}),i++;while(n&&i<5);e=e.replace(/\x01/g,"@");const s=(o.ignoreCase?"i":"")+(o.unicode?"u":"");if(t&&e.match(/\$[sS](\d\d?)/g)){let a=null,l=null;return c=>(l&&a===c||(a=c,l=new RegExp(TBe(o,e,c),s)),l)}return new RegExp(e,s)}function V8e(o,e,t,i){if(i<0)return o;if(i<e.length)return e[i];if(i>=100){i=i-100;const n=t.split(".");if(n.unshift(t),i<n.length)return n[i]}return null}function z8e(o,e,t,i){let n=-1,s=t,r=t.match(/^\$(([sS]?)(\d\d?)|#)(.*)$/);r&&(r[3]&&(n=parseInt(r[3]),r[2]&&(n=n+100)),s=r[4]);let a="~",l=s;!s||s.length===0?(a="!=",l=""):/^\w*$/.test(l)?a="==":(r=s.match(/^(@|!@|~|!~|==|!=)(.*)$/),r&&(a=r[1],l=r[2]));let c;if((a==="~"||a==="!~")&&/^(\w|\|)*$/.test(l)){const u=rre(l.split("|"),o.ignoreCase);c=function(f){return a==="~"?u(f):!u(f)}}else if(a==="@"||a==="!@"){const u=o[l];if(!u)throw mn(o,"the @ match target '"+l+"' is not defined, in rule: "+e);if(!W8e(function(g){return typeof g=="string"},u))throw mn(o,"the @ match target '"+l+"' must be an array of strings, in rule: "+e);const f=rre(u,o.ignoreCase);c=function(g){return a==="@"?f(g):!f(g)}}else if(a==="~"||a==="!~")if(l.indexOf("$")<0){const u=kU(o,"^"+l+"$",!1);c=function(f){return a==="~"?u.test(f):!u.test(f)}}else c=function(u,f,g,p){return kU(o,"^"+Wp(o,l,f,g,p)+"$",!1).test(u)};else if(l.indexOf("$")<0){const u=pg(o,l);c=function(f){return a==="=="?f===u:f!==u}}else{const u=pg(o,l);c=function(f,g,p,_,b){const y=Wp(o,u,g,p,_);return a==="=="?f===y:f!==y}}return n===-1?{name:t,value:i,test:function(u,f,g,p){return c(u,u,f,g,p)}}:{name:t,value:i,test:function(u,f,g,p){const _=V8e(u,f,g,n);return c(_||"",u,f,g,p)}}}function DU(o,e,t){if(t){if(typeof t=="string")return t;if(t.token||t.token===""){if(typeof t.token!="string")throw mn(o,"a 'token' attribute must be of type string, in rule: "+e);{const i={token:t.token};if(t.token.indexOf("$")>=0&&(i.tokenSubst=!0),typeof t.bracket=="string")if(t.bracket==="@open")i.bracket=1;else if(t.bracket==="@close")i.bracket=-1;else throw mn(o,"a 'bracket' attribute must be either '@open' or '@close', in rule: "+e);if(t.next){if(typeof t.next!="string")throw mn(o,"the next state must be a string value in rule: "+e);{let n=t.next;if(!/^(@pop|@push|@popall)$/.test(n)&&(n[0]==="@"&&(n=n.substr(1)),n.indexOf("$")<0&&!NBe(o,Wp(o,n,"",[],""))))throw mn(o,"the next state '"+t.next+"' is not defined in rule: "+e);i.next=n}}return typeof t.goBack=="number"&&(i.goBack=t.goBack),typeof t.switchTo=="string"&&(i.switchTo=t.switchTo),typeof t.log=="string"&&(i.log=t.log),typeof t.nextEmbedded=="string"&&(i.nextEmbedded=t.nextEmbedded,o.usesEmbedded=!0),i}}else if(Array.isArray(t)){const i=[];for(let n=0,s=t.length;n<s;n++)i[n]=DU(o,e,t[n]);return{group:i}}else if(t.cases){const i=[];for(const s in t.cases)if(t.cases.hasOwnProperty(s)){const r=DU(o,e,t.cases[s]);s==="@default"||s==="@"||s===""?i.push({test:void 0,value:r,name:s}):s==="@eos"?i.push({test:function(a,l,c,u){return u},value:r,name:s}):i.push(z8e(o,e,s,r))}const n=o.defaultToken;return{test:function(s,r,a,l){for(const c of i)if(!c.test||c.test(s,r,a,l))return c.value;return n}}}else throw mn(o,"an action must be a string, an object with a 'token' or 'cases' attribute, or an array of actions; in rule: "+e)}else return{token:""}}class U8e{constructor(e){this.regex=new RegExp(""),this.action={token:""},this.matchOnlyAtLineStart=!1,this.name="",this.name=e}setRegex(e,t){let i;if(typeof t=="string")i=t;else if(t instanceof RegExp)i=t.source;else throw mn(e,"rules must start with a match string or regular expression: "+this.name);this.matchOnlyAtLineStart=i.length>0&&i[0]==="^",this.name=this.name+": "+i,this.regex=kU(e,"^(?:"+(this.matchOnlyAtLineStart?i.substr(1):i)+")",!0)}setAction(e,t){this.action=DU(e,this.name,t)}resolveRegex(e){return this.regex instanceof RegExp?this.regex:this.regex(e)}}function Hfe(o,e){if(!e||typeof e!="object")throw new Error("Monarch: expecting a language definition object");const t={languageId:o,includeLF:BR(e.includeLF,!1),noThrow:!1,maxStack:100,start:typeof e.start=="string"?e.start:null,ignoreCase:BR(e.ignoreCase,!1),unicode:BR(e.unicode,!1),tokenPostfix:ore(e.tokenPostfix,"."+o),defaultToken:ore(e.defaultToken,"source"),usesEmbedded:!1,stateNames:{},tokenizer:{},brackets:[]},i=e;i.languageId=o,i.includeLF=t.includeLF,i.ignoreCase=t.ignoreCase,i.unicode=t.unicode,i.noThrow=t.noThrow,i.usesEmbedded=t.usesEmbedded,i.stateNames=e.tokenizer,i.defaultToken=t.defaultToken;function n(r,a,l){for(const c of l){let u=c.include;if(u){if(typeof u!="string")throw mn(t,"an 'include' attribute must be a string at: "+r);if(u[0]==="@"&&(u=u.substr(1)),!e.tokenizer[u])throw mn(t,"include target '"+u+"' is not defined at: "+r);n(r+"."+u,a,e.tokenizer[u])}else{const f=new U8e(r);if(Array.isArray(c)&&c.length>=1&&c.length<=3)if(f.setRegex(i,c[0]),c.length>=3)if(typeof c[1]=="string")f.setAction(i,{token:c[1],next:c[2]});else if(typeof c[1]=="object"){const g=c[1];g.next=c[2],f.setAction(i,g)}else throw mn(t,"a next state as the last element of a rule can only be given if the action is either an object or a string, at: "+r);else f.setAction(i,c[1]);else{if(!c.regex)throw mn(t,"a rule must either be an array, or an object with a 'regex' or 'include' field at: "+r);c.name&&typeof c.name=="string"&&(f.name=c.name),c.matchOnlyAtStart&&(f.matchOnlyAtLineStart=BR(c.matchOnlyAtLineStart,!1)),f.setRegex(i,c.regex),f.setAction(i,c.action)}a.push(f)}}}if(!e.tokenizer||typeof e.tokenizer!="object")throw mn(t,"a language definition must define the 'tokenizer' attribute as an object");t.tokenizer=[];for(const r in e.tokenizer)if(e.tokenizer.hasOwnProperty(r)){t.start||(t.start=r);const a=e.tokenizer[r];t.tokenizer[r]=new Array,n("tokenizer."+r,t.tokenizer[r],a)}if(t.usesEmbedded=i.usesEmbedded,e.brackets){if(!Array.isArray(e.brackets))throw mn(t,"the 'brackets' attribute must be defined as an array")}else e.brackets=[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"},{open:"<",close:">",token:"delimiter.angle"}];const s=[];for(const r of e.brackets){let a=r;if(a&&Array.isArray(a)&&a.length===3&&(a={token:a[2],open:a[0],close:a[1]}),a.open===a.close)throw mn(t,"open and close brackets in a 'brackets' attribute must be different: "+a.open+`
 hint: use the 'bracket' attribute if matching on equal brackets is required.`);if(typeof a.open=="string"&&typeof a.token=="string"&&typeof a.close=="string")s.push({token:a.token+t.tokenPostfix,open:pg(t,a.open),close:pg(t,a.close)});else throw mn(t,"every element in the 'brackets' array must be a '{open,close,token}' object or array")}return t.brackets=s,t.noThrow=!0,t}function $8e(o){iS.registerLanguage(o)}function j8e(){let o=[];return o=o.concat(iS.getLanguages()),o}function q8e(o){return mt.get(In).languageIdCodec.encodeLanguageId(o)}function K8e(o,e){return mt.withServices(()=>{const i=mt.get(In).onDidRequestRichLanguageFeatures(n=>{n===o&&(i.dispose(),e())});return i})}function G8e(o,e){return mt.withServices(()=>{const i=mt.get(In).onDidRequestBasicLanguageFeatures(n=>{n===o&&(i.dispose(),e())});return i})}function Y8e(o,e){if(!mt.get(In).isRegisteredLanguageId(o))throw new Error(`Cannot set configuration for unknown language ${o}`);return mt.get(On).register(o,e,100)}class Z8e{constructor(e,t){this._languageId=e,this._actual=t}dispose(){}getInitialState(){return this._actual.getInitialState()}tokenize(e,t,i){if(typeof this._actual.tokenize=="function")return dE.adaptTokenize(this._languageId,this._actual,e,i);throw new Error("Not supported!")}tokenizeEncoded(e,t,i){const n=this._actual.tokenizeEncoded(e,i);return new zF(n.tokens,n.endState)}}class dE{constructor(e,t,i,n){this._languageId=e,this._actual=t,this._languageService=i,this._standaloneThemeService=n}dispose(){}getInitialState(){return this._actual.getInitialState()}static _toClassicTokens(e,t){const i=[];let n=0;for(let s=0,r=e.length;s<r;s++){const a=e[s];let l=a.startIndex;s===0?l=0:l<n&&(l=n),i[s]=new dD(l,a.scopes,t),n=l}return i}static adaptTokenize(e,t,i,n){const s=t.tokenize(i,n),r=dE._toClassicTokens(s.tokens,e);let a;return s.endState.equals(n)?a=n:a=s.endState,new Nq(r,a)}tokenize(e,t,i){return dE.adaptTokenize(this._languageId,this._actual,e,i)}_toBinaryTokens(e,t){const i=e.encodeLanguageId(this._languageId),n=this._standaloneThemeService.getColorTheme().tokenTheme,s=[];let r=0,a=0;for(let c=0,u=t.length;c<u;c++){const f=t[c],g=n.match(i,f.scopes)|1024;if(r>0&&s[r-1]===g)continue;let p=f.startIndex;c===0?p=0:p<a&&(p=a),s[r++]=p,s[r++]=g,a=p}const l=new Uint32Array(r);for(let c=0;c<r;c++)l[c]=s[c];return l}tokenizeEncoded(e,t,i){const n=this._actual.tokenize(e,i),s=this._toBinaryTokens(this._languageService.languageIdCodec,n.tokens);let r;return n.endState.equals(i)?r=i:r=n.endState,new zF(s,r)}}function X8e(o){return typeof o.getInitialState=="function"}function Q8e(o){return"tokenizeEncoded"in o}function Vfe(o){return o&&typeof o.then=="function"}function J8e(o){const e=mt.get(Ql);if(o){const t=[null];for(let i=1,n=o.length;i<n;i++)t[i]=ue.fromHex(o[i]);e.setColorMapOverride(t)}else e.setColorMapOverride(null)}function zfe(o,e){return Q8e(e)?new Z8e(o,e):new dE(o,e,mt.get(In),mt.get(Ql))}function nY(o,e){const t=new Eke(async()=>{const i=await Promise.resolve(e.create());return i?X8e(i)?zfe(o,i):new QD(mt.get(In),mt.get(Ql),o,Hfe(o,i),mt.get(Ht)):null});return Kn.registerFactory(o,t)}function eVe(o,e){if(!mt.get(In).isRegisteredLanguageId(o))throw new Error(`Cannot set tokens provider for unknown language ${o}`);return Vfe(e)?nY(o,{create:()=>e}):Kn.register(o,zfe(o,e))}function tVe(o,e){const t=i=>new QD(mt.get(In),mt.get(Ql),o,Hfe(o,i),mt.get(Ht));return Vfe(e)?nY(o,{create:()=>e}):Kn.register(o,t(e))}function iVe(o,e){return mt.get(Ue).referenceProvider.register(o,e)}function nVe(o,e){return mt.get(Ue).renameProvider.register(o,e)}function sVe(o,e){return mt.get(Ue).newSymbolNamesProvider.register(o,e)}function oVe(o,e){return mt.get(Ue).signatureHelpProvider.register(o,e)}function rVe(o,e){return mt.get(Ue).hoverProvider.register(o,{provideHover:async(i,n,s,r)=>{const a=i.getWordAtPosition(n);return Promise.resolve(e.provideHover(i,n,s,r)).then(l=>{if(l)return!l.range&&a&&(l.range=new M(n.lineNumber,a.startColumn,n.lineNumber,a.endColumn)),l.range||(l.range=new M(n.lineNumber,n.column,n.lineNumber,n.column)),l})}})}function aVe(o,e){return mt.get(Ue).documentSymbolProvider.register(o,e)}function lVe(o,e){return mt.get(Ue).documentHighlightProvider.register(o,e)}function cVe(o,e){return mt.get(Ue).linkedEditingRangeProvider.register(o,e)}function dVe(o,e){return mt.get(Ue).definitionProvider.register(o,e)}function uVe(o,e){return mt.get(Ue).implementationProvider.register(o,e)}function hVe(o,e){return mt.get(Ue).typeDefinitionProvider.register(o,e)}function fVe(o,e){return mt.get(Ue).codeLensProvider.register(o,e)}function gVe(o,e,t){return mt.get(Ue).codeActionProvider.register(o,{providedCodeActionKinds:t==null?void 0:t.providedCodeActionKinds,documentation:t==null?void 0:t.documentation,provideCodeActions:(n,s,r,a)=>{const c=mt.get(Kh).read({resource:n.uri}).filter(u=>M.areIntersectingOrTouching(u,s));return e.provideCodeActions(n,s,{markers:c,only:r.only,trigger:r.trigger},a)},resolveCodeAction:e.resolveCodeAction})}function pVe(o,e){return mt.get(Ue).documentFormattingEditProvider.register(o,e)}function mVe(o,e){return mt.get(Ue).documentRangeFormattingEditProvider.register(o,e)}function _Ve(o,e){return mt.get(Ue).onTypeFormattingEditProvider.register(o,e)}function vVe(o,e){return mt.get(Ue).linkProvider.register(o,e)}function bVe(o,e){return mt.get(Ue).completionProvider.register(o,e)}function CVe(o,e){return mt.get(Ue).colorProvider.register(o,e)}function yVe(o,e){return mt.get(Ue).foldingRangeProvider.register(o,e)}function wVe(o,e){return mt.get(Ue).declarationProvider.register(o,e)}function SVe(o,e){return mt.get(Ue).selectionRangeProvider.register(o,e)}function LVe(o,e){return mt.get(Ue).documentSemanticTokensProvider.register(o,e)}function xVe(o,e){return mt.get(Ue).documentRangeSemanticTokensProvider.register(o,e)}function kVe(o,e){return mt.get(Ue).inlineCompletionsProvider.register(o,e)}function DVe(o,e){return mt.get(Ue).inlineEditProvider.register(o,e)}function EVe(o,e){return mt.get(Ue).inlayHintsProvider.register(o,e)}function IVe(){return{register:$8e,getLanguages:j8e,onLanguage:K8e,onLanguageEncountered:G8e,getEncodedLanguageId:q8e,setLanguageConfiguration:Y8e,setColorMap:J8e,registerTokensProviderFactory:nY,setTokensProvider:eVe,setMonarchTokensProvider:tVe,registerReferenceProvider:iVe,registerRenameProvider:nVe,registerNewSymbolNameProvider:sVe,registerCompletionItemProvider:bVe,registerSignatureHelpProvider:oVe,registerHoverProvider:rVe,registerDocumentSymbolProvider:aVe,registerDocumentHighlightProvider:lVe,registerLinkedEditingRangeProvider:cVe,registerDefinitionProvider:dVe,registerImplementationProvider:uVe,registerTypeDefinitionProvider:hVe,registerCodeLensProvider:fVe,registerCodeActionProvider:gVe,registerDocumentFormattingEditProvider:pVe,registerDocumentRangeFormattingEditProvider:mVe,registerOnTypeFormattingEditProvider:_Ve,registerLinkProvider:vVe,registerColorProvider:CVe,registerFoldingRangeProvider:yVe,registerDeclarationProvider:wVe,registerSelectionRangeProvider:SVe,registerDocumentSemanticTokensProvider:LVe,registerDocumentRangeSemanticTokensProvider:xVe,registerInlineCompletionsProvider:kVe,registerInlineEditProvider:DVe,registerInlayHintsProvider:EVe,DocumentHighlightKind:m8,CompletionItemKind:d8,CompletionItemTag:u8,CompletionItemInsertTextRule:c8,SymbolKind:K8,SymbolTag:G8,IndentAction:S8,CompletionTriggerKind:h8,SignatureHelpTriggerKind:q8,InlayHintKind:x8,InlineCompletionTriggerKind:k8,InlineEditTriggerKind:D8,CodeActionTriggerType:l8,NewSymbolNameTag:A8,NewSymbolNameTriggerKind:P8,PartialAcceptTriggerKind:B8,HoverVerbosityAction:w8,FoldingRangeKind:Pm,SelectedSuggestionInfo:jle}}const sY=Gt("IEditorCancelService"),Ufe=new Pe("cancellableOperation",!1,v("cancellableOperation","Whether the editor runs a cancellable operation, e.g. like 'Peek References'"));ei(sY,class{constructor(){this._tokens=new WeakMap}add(o,e){let t=this._tokens.get(o);t||(t=o.invokeWithinContext(n=>{const s=Ufe.bindTo(n.get(ht)),r=new jr;return{key:s,tokens:r}}),this._tokens.set(o,t));let i;return t.key.set(!0),i=t.tokens.push(e),()=>{i&&(i(),t.key.set(!t.tokens.isEmpty()),i=void 0)}}cancel(o){const e=this._tokens.get(o);if(!e)return;const t=e.tokens.pop();t&&(t.cancel(),e.key.set(!e.tokens.isEmpty()))}},1);class TVe extends An{constructor(e,t){super(t),this.editor=e,this._unregister=e.invokeWithinContext(i=>i.get(sY).add(e,this))}dispose(){this._unregister(),super.dispose()}}Re(new class extends Bs{constructor(){super({id:"editor.cancelOperation",kbOpts:{weight:100,primary:9},precondition:Ufe})}runEditorCommand(o,e){o.get(sY).cancel(e)}});let $fe=class EU{constructor(e,t){if(this.flags=t,this.flags&1){const i=e.getModel();this.modelVersionId=i?sC("{0}#{1}",i.uri.toString(),i.getVersionId()):null}else this.modelVersionId=null;this.flags&4?this.position=e.getPosition():this.position=null,this.flags&2?this.selection=e.getSelection():this.selection=null,this.flags&8?(this.scrollLeft=e.getScrollLeft(),this.scrollTop=e.getScrollTop()):(this.scrollLeft=-1,this.scrollTop=-1)}_equals(e){if(!(e instanceof EU))return!1;const t=e;return!(this.modelVersionId!==t.modelVersionId||this.scrollLeft!==t.scrollLeft||this.scrollTop!==t.scrollTop||!this.position&&t.position||this.position&&!t.position||this.position&&t.position&&!this.position.equals(t.position)||!this.selection&&t.selection||this.selection&&!t.selection||this.selection&&t.selection&&!this.selection.equalsRange(t.selection))}validate(e){return this._equals(new EU(e,this.flags))}};class Gm extends TVe{constructor(e,t,i,n){super(e,n),this._listener=new le,t&4&&this._listener.add(e.onDidChangeCursorPosition(s=>{(!i||!M.containsPosition(i,s.position))&&this.cancel()})),t&2&&this._listener.add(e.onDidChangeCursorSelection(s=>{(!i||!M.containsRange(i,s.selection))&&this.cancel()})),t&8&&this._listener.add(e.onDidScrollChange(s=>this.cancel())),t&1&&(this._listener.add(e.onDidChangeModel(s=>this.cancel())),this._listener.add(e.onDidChangeModelContent(s=>this.cancel())))}dispose(){this._listener.dispose(),super.dispose()}}class oY extends An{constructor(e,t){super(t),this._listener=e.onDidChangeContent(()=>this.cancel())}dispose(){this._listener.dispose(),super.dispose()}}function Vh(o){return o&&typeof o.getEditorType=="function"?o.getEditorType()===_I.ICodeEditor:!1}function rY(o){return o&&typeof o.getEditorType=="function"?o.getEditorType()===_I.IDiffEditor:!1}function NVe(o){return!!o&&typeof o=="object"&&typeof o.onDidChangeActiveEditor=="function"}function jfe(o){return Vh(o)?o:rY(o)?o.getModifiedEditor():NVe(o)&&Vh(o.activeCodeEditor)?o.activeCodeEditor:null}class SS{static _handleEolEdits(e,t){let i;const n=[];for(const s of t)typeof s.eol=="number"&&(i=s.eol),s.range&&typeof s.text=="string"&&n.push(s);return typeof i=="number"&&e.hasModel()&&e.getModel().pushEOL(i),n}static _isFullModelReplaceEdit(e,t){if(!e.hasModel())return!1;const i=e.getModel(),n=i.validateRange(t.range);return i.getFullModelRange().equalsRange(n)}static execute(e,t,i){i&&e.pushUndoStop();const n=Cu.capture(e),s=SS._handleEolEdits(e,t);s.length===1&&SS._isFullModelReplaceEdit(e,s[0])?e.executeEdits("formatEditsCommand",s.map(r=>Rn.replace(M.lift(r.range),r.text))):e.executeEdits("formatEditsCommand",s.map(r=>Rn.replaceMove(M.lift(r.range),r.text))),i&&e.pushUndoStop(),n.restoreRelativeVerticalPositionOfCursor(e)}}class are{constructor(e){this.value=e,this._lower=e.toLowerCase()}static toKey(e){return typeof e=="string"?e.toLowerCase():e._lower}}class RVe{constructor(e){if(this._set=new Set,e)for(const t of e)this.add(t)}add(e){this._set.add(are.toKey(e))}has(e){return this._set.has(are.toKey(e))}}function qfe(o,e,t){const i=[],n=new RVe,s=o.ordered(t);for(const a of s)i.push(a),a.extensionId&&n.add(a.extensionId);const r=e.ordered(t);for(const a of r){if(a.extensionId){if(n.has(a.extensionId))continue;n.add(a.extensionId)}i.push({displayName:a.displayName,extensionId:a.extensionId,provideDocumentFormattingEdits(l,c,u){return a.provideDocumentRangeFormattingEdits(l,l.getFullModelRange(),c,u)}})}return i}const eD=class eD{static setFormatterSelector(e){return{dispose:eD._selectors.unshift(e)}}static async select(e,t,i,n){if(e.length===0)return;const s=ti.first(eD._selectors);if(s)return await s(e,t,i,n)}};eD._selectors=new jr;let uE=eD;async function Kfe(o,e,t,i,n,s,r){const a=o.get(nt),{documentRangeFormattingEditProvider:l}=o.get(Ue),c=Vh(e)?e.getModel():e,u=l.ordered(c),f=await uE.select(u,c,i,2);f&&(n.report(f),await a.invokeFunction(MVe,f,e,t,s,r))}async function MVe(o,e,t,i,n,s){var S,L;const r=o.get(Aa),a=o.get(Oo),l=o.get(o_);let c,u;Vh(t)?(c=t.getModel(),u=new Gm(t,5,void 0,n)):(c=t,u=new oY(t,n));const f=[];let g=0;for(const x of Cq(i).sort(M.compareRangesUsingStarts))g>0&&M.areIntersectingOrTouching(f[g-1],x)?f[g-1]=M.fromPositions(f[g-1].getStartPosition(),x.getEndPosition()):g=f.push(x);const p=async x=>{var E,N;a.trace("[format][provideDocumentRangeFormattingEdits] (request)",(E=e.extensionId)==null?void 0:E.value,x);const k=await e.provideDocumentRangeFormattingEdits(c,x,c.getFormattingOptions(),u.token)||[];return a.trace("[format][provideDocumentRangeFormattingEdits] (response)",(N=e.extensionId)==null?void 0:N.value,k),k},_=(x,k)=>{if(!x.length||!k.length)return!1;const E=x.reduce((N,A)=>M.plusRange(N,A.range),x[0].range);if(!k.some(N=>M.intersectRanges(E,N.range)))return!1;for(const N of x)for(const A of k)if(M.intersectRanges(N.range,A.range))return!0;return!1},b=[],y=[];try{if(typeof e.provideDocumentRangesFormattingEdits=="function"){a.trace("[format][provideDocumentRangeFormattingEdits] (request)",(S=e.extensionId)==null?void 0:S.value,f);const x=await e.provideDocumentRangesFormattingEdits(c,f,c.getFormattingOptions(),u.token)||[];a.trace("[format][provideDocumentRangeFormattingEdits] (response)",(L=e.extensionId)==null?void 0:L.value,x),y.push(x)}else{for(const x of f){if(u.token.isCancellationRequested)return!0;y.push(await p(x))}for(let x=0;x<f.length;++x)for(let k=x+1;k<f.length;++k){if(u.token.isCancellationRequested)return!0;if(_(y[x],y[k])){const E=M.plusRange(f[x],f[k]),N=await p(E);f.splice(k,1),f.splice(x,1),f.push(E),y.splice(k,1),y.splice(x,1),y.push(N),x=0,k=0}}}for(const x of y){if(u.token.isCancellationRequested)return!0;const k=await r.computeMoreMinimalEdits(c.uri,x);k&&b.push(...k)}}finally{u.dispose()}if(b.length===0)return!1;if(Vh(t))SS.execute(t,b,!0),t.revealPositionInCenterIfOutsideViewport(t.getPosition(),1);else{const[{range:x}]=b,k=new Ke(x.startLineNumber,x.startColumn,x.endLineNumber,x.endColumn);c.pushEditOperations([k],b.map(E=>({text:E.text,range:M.lift(E.range),forceMoveMarkers:!0})),E=>{for(const{range:N}of E)if(M.areIntersectingOrTouching(N,k))return[new Ke(N.startLineNumber,N.startColumn,N.endLineNumber,N.endColumn)];return null})}return l.playSignal(Tl.format,{userGesture:s}),!0}async function AVe(o,e,t,i,n,s){const r=o.get(nt),a=o.get(Ue),l=Vh(e)?e.getModel():e,c=qfe(a.documentFormattingEditProvider,a.documentRangeFormattingEditProvider,l),u=await uE.select(c,l,t,1);u&&(i.report(u),await r.invokeFunction(PVe,u,e,t,n,s))}async function PVe(o,e,t,i,n,s){const r=o.get(Aa),a=o.get(o_);let l,c;Vh(t)?(l=t.getModel(),c=new Gm(t,5,void 0,n)):(l=t,c=new oY(t,n));let u;try{const f=await e.provideDocumentFormattingEdits(l,l.getFormattingOptions(),c.token);if(u=await r.computeMoreMinimalEdits(l.uri,f),c.token.isCancellationRequested)return!0}finally{c.dispose()}if(!u||u.length===0)return!1;if(Vh(t))SS.execute(t,u,i!==2),i!==2&&t.revealPositionInCenterIfOutsideViewport(t.getPosition(),1);else{const[{range:f}]=u,g=new Ke(f.startLineNumber,f.startColumn,f.endLineNumber,f.endColumn);l.pushEditOperations([g],u.map(p=>({text:p.text,range:M.lift(p.range),forceMoveMarkers:!0})),p=>{for(const{range:_}of p)if(M.areIntersectingOrTouching(_,g))return[new Ke(_.startLineNumber,_.startColumn,_.endLineNumber,_.endColumn)];return null})}return a.playSignal(Tl.format,{userGesture:s}),!0}async function OVe(o,e,t,i,n,s){const r=e.documentRangeFormattingEditProvider.ordered(t);for(const a of r){const l=await Promise.resolve(a.provideDocumentRangeFormattingEdits(t,i,n,s)).catch(rs);if(wr(l))return await o.computeMoreMinimalEdits(t.uri,l)}}async function FVe(o,e,t,i,n){const s=qfe(e.documentFormattingEditProvider,e.documentRangeFormattingEditProvider,t);for(const r of s){const a=await Promise.resolve(r.provideDocumentFormattingEdits(t,i,n)).catch(rs);if(wr(a))return await o.computeMoreMinimalEdits(t.uri,a)}}function Gfe(o,e,t,i,n,s,r){const a=e.onTypeFormattingEditProvider.ordered(t);return a.length===0||a[0].autoFormatTriggerCharacters.indexOf(n)<0?Promise.resolve(void 0):Promise.resolve(a[0].provideOnTypeFormattingEdits(t,i,n,s,r)).catch(rs).then(l=>o.computeMoreMinimalEdits(t.uri,l))}ii.registerCommand("_executeFormatRangeProvider",async function(o,...e){const[t,i,n]=e;ui(st.isUri(t)),ui(M.isIRange(i));const s=o.get(Na),r=o.get(Aa),a=o.get(Ue),l=await s.createModelReference(t);try{return OVe(r,a,l.object.textEditorModel,M.lift(i),n,Mt.None)}finally{l.dispose()}});ii.registerCommand("_executeFormatDocumentProvider",async function(o,...e){const[t,i]=e;ui(st.isUri(t));const n=o.get(Na),s=o.get(Aa),r=o.get(Ue),a=await n.createModelReference(t);try{return FVe(s,r,a.object.textEditorModel,i,Mt.None)}finally{a.dispose()}});ii.registerCommand("_executeFormatOnTypeProvider",async function(o,...e){const[t,i,n,s]=e;ui(st.isUri(t)),ui(G.isIPosition(i)),ui(typeof n=="string");const r=o.get(Na),a=o.get(Aa),l=o.get(Ue),c=await r.createModelReference(t);try{return Gfe(a,l,c.object.textEditorModel,G.lift(i),n,s,Mt.None)}finally{c.dispose()}});yu.wrappingIndent.defaultValue=0;yu.glyphMargin.defaultValue=!1;yu.autoIndent.defaultValue=3;yu.overviewRulerLanes.defaultValue=2;uE.setFormatterSelector((o,e,t)=>Promise.resolve(o[0]));const oa=qle();oa.editor=B8e();oa.languages=IVe();const BVe=oa.CancellationTokenSource,WVe=oa.Emitter,HVe=oa.KeyCode,VVe=oa.KeyMod,zVe=oa.Position,UVe=oa.Range,$Ve=oa.Selection,jVe=oa.SelectionDirection,qVe=oa.MarkerSeverity,KVe=oa.MarkerTag,GVe=oa.Uri,YVe=oa.Token,Yfe=oa.editor,aY=oa.languages,o9=globalThis.MonacoEnvironment;(o9!=null&&o9.globalAPI||typeof define=="function"&&define.amd)&&(globalThis.monaco=oa);typeof globalThis.require<"u"&&typeof globalThis.require.config=="function"&&globalThis.require.config({ignoreDuplicateModules:["vscode-languageserver-types","vscode-languageserver-types/main","vscode-languageserver-textdocument","vscode-languageserver-textdocument/main","vscode-nls","vscode-nls/vscode-nls","jsonc-parser","jsonc-parser/main","vscode-uri","vscode-uri/index","vs/basic-languages/typescript/typescript"]});const yI=Object.freeze(Object.defineProperty({__proto__:null,CancellationTokenSource:BVe,Emitter:WVe,KeyCode:HVe,KeyMod:VVe,MarkerSeverity:qVe,MarkerTag:KVe,Position:zVe,Range:UVe,Selection:$Ve,SelectionDirection:jVe,Token:YVe,Uri:GVe,editor:Yfe,languages:aY},Symbol.toStringTag,{value:"Module"}));/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.52.0(f6dc0eb8fce67e57f6036f4769d92c1666cdf546)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var ZVe=Object.defineProperty,XVe=Object.getOwnPropertyDescriptor,QVe=Object.getOwnPropertyNames,JVe=Object.prototype.hasOwnProperty,e6e=(o,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of QVe(e))!JVe.call(o,n)&&n!==t&&ZVe(o,n,{get:()=>e[n],enumerable:!(i=XVe(e,n))||i.enumerable});return o},t6e=(o,e,t)=>(e6e(o,e,"default"),t),$x={};t6e($x,yI);var Zfe={},r9={},i6e=class Xfe{static getOrCreate(e){return r9[e]||(r9[e]=new Xfe(e)),r9[e]}constructor(e){this._languageId=e,this._loadingTriggered=!1,this._lazyLoadPromise=new Promise((t,i)=>{this._lazyLoadPromiseResolve=t,this._lazyLoadPromiseReject=i})}load(){return this._loadingTriggered||(this._loadingTriggered=!0,Zfe[this._languageId].loader().then(e=>this._lazyLoadPromiseResolve(e),e=>this._lazyLoadPromiseReject(e))),this._lazyLoadPromise}};function lt(o){const e=o.id;Zfe[e]=o,$x.languages.register(o);const t=i6e.getOrCreate(e);$x.languages.registerTokensProviderFactory(e,{create:async()=>(await t.load()).language}),$x.languages.onLanguageEncountered(e,async()=>{const i=await t.load();$x.languages.setLanguageConfiguration(e,i.conf)})}lt({id:"abap",extensions:[".abap"],aliases:["abap","ABAP"],loader:()=>ot(()=>import("./abap-Dwu-KH2x.js"),[],import.meta.url)});lt({id:"apex",extensions:[".cls"],aliases:["Apex","apex"],mimetypes:["text/x-apex-source","text/x-apex"],loader:()=>ot(()=>import("./apex-Dn-XaljK.js"),[],import.meta.url)});lt({id:"azcli",extensions:[".azcli"],aliases:["Azure CLI","azcli"],loader:()=>ot(()=>import("./azcli-C9RgAbUI.js"),[],import.meta.url)});lt({id:"bat",extensions:[".bat",".cmd"],aliases:["Batch","bat"],loader:()=>ot(()=>import("./bat-CoZ5qQQA.js"),[],import.meta.url)});lt({id:"bicep",extensions:[".bicep"],aliases:["Bicep"],loader:()=>ot(()=>import("./bicep-BTXPn4uT.js"),[],import.meta.url)});lt({id:"cameligo",extensions:[".mligo"],aliases:["Cameligo"],loader:()=>ot(()=>import("./cameligo-J_4-LjdT.js"),[],import.meta.url)});lt({id:"clojure",extensions:[".clj",".cljs",".cljc",".edn"],aliases:["clojure","Clojure"],loader:()=>ot(()=>import("./clojure-DDKRPAGl.js"),[],import.meta.url)});lt({id:"coffeescript",extensions:[".coffee"],aliases:["CoffeeScript","coffeescript","coffee"],mimetypes:["text/x-coffeescript","text/coffeescript"],loader:()=>ot(()=>import("./coffee-C8z2l6sj.js"),[],import.meta.url)});lt({id:"c",extensions:[".c",".h"],aliases:["C","c"],loader:()=>ot(()=>import("./cpp-DI3p9f9v.js"),[],import.meta.url)});lt({id:"cpp",extensions:[".cpp",".cc",".cxx",".hpp",".hh",".hxx"],aliases:["C++","Cpp","cpp"],loader:()=>ot(()=>import("./cpp-DI3p9f9v.js"),[],import.meta.url)});lt({id:"csharp",extensions:[".cs",".csx",".cake"],aliases:["C#","csharp"],loader:()=>ot(()=>import("./csharp-Bya7J2fC.js"),[],import.meta.url)});lt({id:"csp",extensions:[".csp"],aliases:["CSP","csp"],loader:()=>ot(()=>import("./csp-g7vr-vut.js"),[],import.meta.url)});lt({id:"css",extensions:[".css"],aliases:["CSS","css"],mimetypes:["text/css"],loader:()=>ot(()=>import("./css-fOVBx6Gk.js"),[],import.meta.url)});lt({id:"cypher",extensions:[".cypher",".cyp"],aliases:["Cypher","OpenCypher"],loader:()=>ot(()=>import("./cypher-DciL1opS.js"),[],import.meta.url)});lt({id:"dart",extensions:[".dart"],aliases:["Dart","dart"],mimetypes:["text/x-dart-source","text/x-dart"],loader:()=>ot(()=>import("./dart-CAkRrlCV.js"),[],import.meta.url)});lt({id:"dockerfile",extensions:[".dockerfile"],filenames:["Dockerfile"],aliases:["Dockerfile"],loader:()=>ot(()=>import("./dockerfile-CHkS34TV.js"),[],import.meta.url)});lt({id:"ecl",extensions:[".ecl"],aliases:["ECL","Ecl","ecl"],loader:()=>ot(()=>import("./ecl-qjrLrnvP.js"),[],import.meta.url)});lt({id:"elixir",extensions:[".ex",".exs"],aliases:["Elixir","elixir","ex"],loader:()=>ot(()=>import("./elixir-Bn2aVyyF.js"),[],import.meta.url)});lt({id:"flow9",extensions:[".flow"],aliases:["Flow9","Flow","flow9","flow"],loader:()=>ot(()=>import("./flow9-CcGMeAxr.js"),[],import.meta.url)});lt({id:"fsharp",extensions:[".fs",".fsi",".ml",".mli",".fsx",".fsscript"],aliases:["F#","FSharp","fsharp"],loader:()=>ot(()=>import("./fsharp-P5WqO7sL.js"),[],import.meta.url)});lt({id:"freemarker2",extensions:[".ftl",".ftlh",".ftlx"],aliases:["FreeMarker2","Apache FreeMarker2"],loader:()=>ot(()=>import("./freemarker2-Cz3o7OKw.js"),[],import.meta.url).then(o=>o.TagAutoInterpolationDollar)});lt({id:"freemarker2.tag-angle.interpolation-dollar",aliases:["FreeMarker2 (Angle/Dollar)","Apache FreeMarker2 (Angle/Dollar)"],loader:()=>ot(()=>import("./freemarker2-Cz3o7OKw.js"),[],import.meta.url).then(o=>o.TagAngleInterpolationDollar)});lt({id:"freemarker2.tag-bracket.interpolation-dollar",aliases:["FreeMarker2 (Bracket/Dollar)","Apache FreeMarker2 (Bracket/Dollar)"],loader:()=>ot(()=>import("./freemarker2-Cz3o7OKw.js"),[],import.meta.url).then(o=>o.TagBracketInterpolationDollar)});lt({id:"freemarker2.tag-angle.interpolation-bracket",aliases:["FreeMarker2 (Angle/Bracket)","Apache FreeMarker2 (Angle/Bracket)"],loader:()=>ot(()=>import("./freemarker2-Cz3o7OKw.js"),[],import.meta.url).then(o=>o.TagAngleInterpolationBracket)});lt({id:"freemarker2.tag-bracket.interpolation-bracket",aliases:["FreeMarker2 (Bracket/Bracket)","Apache FreeMarker2 (Bracket/Bracket)"],loader:()=>ot(()=>import("./freemarker2-Cz3o7OKw.js"),[],import.meta.url).then(o=>o.TagBracketInterpolationBracket)});lt({id:"freemarker2.tag-auto.interpolation-dollar",aliases:["FreeMarker2 (Auto/Dollar)","Apache FreeMarker2 (Auto/Dollar)"],loader:()=>ot(()=>import("./freemarker2-Cz3o7OKw.js"),[],import.meta.url).then(o=>o.TagAutoInterpolationDollar)});lt({id:"freemarker2.tag-auto.interpolation-bracket",aliases:["FreeMarker2 (Auto/Bracket)","Apache FreeMarker2 (Auto/Bracket)"],loader:()=>ot(()=>import("./freemarker2-Cz3o7OKw.js"),[],import.meta.url).then(o=>o.TagAutoInterpolationBracket)});lt({id:"go",extensions:[".go"],aliases:["Go"],loader:()=>ot(()=>import("./go-DHzw8g6E.js"),[],import.meta.url)});lt({id:"graphql",extensions:[".graphql",".gql"],aliases:["GraphQL","graphql","gql"],mimetypes:["application/graphql"],loader:()=>ot(()=>import("./graphql-DHR0rah7.js"),[],import.meta.url)});lt({id:"handlebars",extensions:[".handlebars",".hbs"],aliases:["Handlebars","handlebars","hbs"],mimetypes:["text/x-handlebars-template"],loader:()=>ot(()=>import("./handlebars-DU8LMx1-.js"),[],import.meta.url)});lt({id:"hcl",extensions:[".tf",".tfvars",".hcl"],aliases:["Terraform","tf","HCL","hcl"],loader:()=>ot(()=>import("./hcl-C75BKXms.js"),[],import.meta.url)});lt({id:"html",extensions:[".html",".htm",".shtml",".xhtml",".mdoc",".jsp",".asp",".aspx",".jshtm"],aliases:["HTML","htm","html","xhtml"],mimetypes:["text/html","text/x-jshtm","text/template","text/ng-template"],loader:()=>ot(()=>import("./html-DxlG4nYm.js"),[],import.meta.url)});lt({id:"ini",extensions:[".ini",".properties",".gitconfig"],filenames:["config",".gitattributes",".gitconfig",".editorconfig"],aliases:["Ini","ini"],loader:()=>ot(()=>import("./ini-BJrO4HmQ.js"),[],import.meta.url)});lt({id:"java",extensions:[".java",".jav"],aliases:["Java","java"],mimetypes:["text/x-java-source","text/x-java"],loader:()=>ot(()=>import("./java-BZVcG1df.js"),[],import.meta.url)});lt({id:"javascript",extensions:[".js",".es6",".jsx",".mjs",".cjs"],firstLine:"^#!.*\\bnode",filenames:["jakefile"],aliases:["JavaScript","javascript","js"],mimetypes:["text/javascript"],loader:()=>ot(()=>import("./javascript-CANBgRCY.js"),__vite__mapDeps([0,1]),import.meta.url)});lt({id:"julia",extensions:[".jl"],aliases:["julia","Julia"],loader:()=>ot(()=>import("./julia-y6tXNwRO.js"),[],import.meta.url)});lt({id:"kotlin",extensions:[".kt",".kts"],aliases:["Kotlin","kotlin"],mimetypes:["text/x-kotlin-source","text/x-kotlin"],loader:()=>ot(()=>import("./kotlin-a3XSJ_gM.js"),[],import.meta.url)});lt({id:"less",extensions:[".less"],aliases:["Less","less"],mimetypes:["text/x-less","text/less"],loader:()=>ot(()=>import("./less-DFUTkVLx.js"),[],import.meta.url)});lt({id:"lexon",extensions:[".lex"],aliases:["Lexon"],loader:()=>ot(()=>import("./lexon-DVsYuwex.js"),[],import.meta.url)});lt({id:"lua",extensions:[".lua"],aliases:["Lua","lua"],loader:()=>ot(()=>import("./lua-DYx-Jejz.js"),[],import.meta.url)});lt({id:"liquid",extensions:[".liquid",".html.liquid"],aliases:["Liquid","liquid"],mimetypes:["application/liquid"],loader:()=>ot(()=>import("./liquid-CbfZwb_h.js"),[],import.meta.url)});lt({id:"m3",extensions:[".m3",".i3",".mg",".ig"],aliases:["Modula-3","Modula3","modula3","m3"],loader:()=>ot(()=>import("./m3-BMrvfaad.js"),[],import.meta.url)});lt({id:"markdown",extensions:[".md",".markdown",".mdown",".mkdn",".mkd",".mdwn",".mdtxt",".mdtext"],aliases:["Markdown","markdown"],loader:()=>ot(()=>import("./markdown-DuPmBnHi.js"),[],import.meta.url)});lt({id:"mdx",extensions:[".mdx"],aliases:["MDX","mdx"],loader:()=>ot(()=>import("./mdx-DnL1BuZq.js"),[],import.meta.url)});lt({id:"mips",extensions:[".s"],aliases:["MIPS","MIPS-V"],mimetypes:["text/x-mips","text/mips","text/plaintext"],loader:()=>ot(()=>import("./mips-BqUeXQd9.js"),[],import.meta.url)});lt({id:"msdax",extensions:[".dax",".msdax"],aliases:["DAX","MSDAX"],loader:()=>ot(()=>import("./msdax-Dw-TSVhm.js"),[],import.meta.url)});lt({id:"mysql",extensions:[],aliases:["MySQL","mysql"],loader:()=>ot(()=>import("./mysql-CcpH9Ljq.js"),[],import.meta.url)});lt({id:"objective-c",extensions:[".m"],aliases:["Objective-C"],loader:()=>ot(()=>import("./objective-c-BRNxDdm3.js"),[],import.meta.url)});lt({id:"pascal",extensions:[".pas",".p",".pp"],aliases:["Pascal","pas"],mimetypes:["text/x-pascal-source","text/x-pascal"],loader:()=>ot(()=>import("./pascal-Cn8aAeCV.js"),[],import.meta.url)});lt({id:"pascaligo",extensions:[".ligo"],aliases:["Pascaligo","ligo"],loader:()=>ot(()=>import("./pascaligo-dBAnVStS.js"),[],import.meta.url)});lt({id:"perl",extensions:[".pl",".pm"],aliases:["Perl","pl"],loader:()=>ot(()=>import("./perl-C4L3BrdA.js"),[],import.meta.url)});lt({id:"pgsql",extensions:[],aliases:["PostgreSQL","postgres","pg","postgre"],loader:()=>ot(()=>import("./pgsql-BOSk5tQb.js"),[],import.meta.url)});lt({id:"php",extensions:[".php",".php4",".php5",".phtml",".ctp"],aliases:["PHP","php"],mimetypes:["application/x-php"],loader:()=>ot(()=>import("./php-DzsKq5vr.js"),[],import.meta.url)});lt({id:"pla",extensions:[".pla"],loader:()=>ot(()=>import("./pla-C6GoMDq5.js"),[],import.meta.url)});lt({id:"postiats",extensions:[".dats",".sats",".hats"],aliases:["ATS","ATS/Postiats"],loader:()=>ot(()=>import("./postiats-DQpJ_7Kk.js"),[],import.meta.url)});lt({id:"powerquery",extensions:[".pq",".pqm"],aliases:["PQ","M","Power Query","Power Query M"],loader:()=>ot(()=>import("./powerquery-M-mSA4YD.js"),[],import.meta.url)});lt({id:"powershell",extensions:[".ps1",".psm1",".psd1"],aliases:["PowerShell","powershell","ps","ps1"],loader:()=>ot(()=>import("./powershell-DzOgjbHk.js"),[],import.meta.url)});lt({id:"proto",extensions:[".proto"],aliases:["protobuf","Protocol Buffers"],loader:()=>ot(()=>import("./protobuf-BIE5FnyZ.js"),[],import.meta.url)});lt({id:"pug",extensions:[".jade",".pug"],aliases:["Pug","Jade","jade"],loader:()=>ot(()=>import("./pug-s9KOoKAL.js"),[],import.meta.url)});lt({id:"python",extensions:[".py",".rpy",".pyw",".cpy",".gyp",".gypi"],aliases:["Python","py"],firstLine:"^#!/.*\\bpython[0-9.-]*\\b",loader:()=>ot(()=>import("./python-D5Jx9RuZ.js"),[],import.meta.url)});lt({id:"qsharp",extensions:[".qs"],aliases:["Q#","qsharp"],loader:()=>ot(()=>import("./qsharp-DWDrKSir.js"),[],import.meta.url)});lt({id:"r",extensions:[".r",".rhistory",".rmd",".rprofile",".rt"],aliases:["R","r"],loader:()=>ot(()=>import("./r-DnKTOUT4.js"),[],import.meta.url)});lt({id:"razor",extensions:[".cshtml"],aliases:["Razor","razor"],mimetypes:["text/x-cshtml"],loader:()=>ot(()=>import("./razor-BfBepqu_.js"),[],import.meta.url)});lt({id:"redis",extensions:[".redis"],aliases:["redis"],loader:()=>ot(()=>import("./redis-CWZNkOVt.js"),[],import.meta.url)});lt({id:"redshift",extensions:[],aliases:["Redshift","redshift"],loader:()=>ot(()=>import("./redshift-Bhrh1xcx.js"),[],import.meta.url)});lt({id:"restructuredtext",extensions:[".rst"],aliases:["reStructuredText","restructuredtext"],loader:()=>ot(()=>import("./restructuredtext-CWmU_seV.js"),[],import.meta.url)});lt({id:"ruby",extensions:[".rb",".rbx",".rjs",".gemspec",".pp"],filenames:["rakefile","Gemfile"],aliases:["Ruby","rb"],loader:()=>ot(()=>import("./ruby-2Tz7EiV8.js"),[],import.meta.url)});lt({id:"rust",extensions:[".rs",".rlib"],aliases:["Rust","rust"],loader:()=>ot(()=>import("./rust-CrxrYIVW.js"),[],import.meta.url)});lt({id:"sb",extensions:[".sb"],aliases:["Small Basic","sb"],loader:()=>ot(()=>import("./sb-DkpzO6Ij.js"),[],import.meta.url)});lt({id:"scala",extensions:[".scala",".sc",".sbt"],aliases:["Scala","scala","SBT","Sbt","sbt","Dotty","dotty"],mimetypes:["text/x-scala-source","text/x-scala","text/x-sbt","text/x-dotty"],loader:()=>ot(()=>import("./scala-Du7mGxrp.js"),[],import.meta.url)});lt({id:"scheme",extensions:[".scm",".ss",".sch",".rkt"],aliases:["scheme","Scheme"],loader:()=>ot(()=>import("./scheme-DnCYVA2x.js"),[],import.meta.url)});lt({id:"scss",extensions:[".scss"],aliases:["Sass","sass","scss"],mimetypes:["text/x-scss","text/scss"],loader:()=>ot(()=>import("./scss-3iLYYaxs.js"),[],import.meta.url)});lt({id:"shell",extensions:[".sh",".bash"],aliases:["Shell","sh"],loader:()=>ot(()=>import("./shell-D4ITwtg2.js"),[],import.meta.url)});lt({id:"sol",extensions:[".sol"],aliases:["sol","solidity","Solidity"],loader:()=>ot(()=>import("./solidity-Bq53zNw4.js"),[],import.meta.url)});lt({id:"aes",extensions:[".aes"],aliases:["aes","sophia","Sophia"],loader:()=>ot(()=>import("./sophia-BtzCauDs.js"),[],import.meta.url)});lt({id:"sparql",extensions:[".rq"],aliases:["sparql","SPARQL"],loader:()=>ot(()=>import("./sparql-7--tI-JV.js"),[],import.meta.url)});lt({id:"sql",extensions:[".sql"],aliases:["SQL"],loader:()=>ot(()=>import("./sql-B8Hnjumu.js"),[],import.meta.url)});lt({id:"st",extensions:[".st",".iecst",".iecplc",".lc3lib",".TcPOU",".TcDUT",".TcGVL",".TcIO"],aliases:["StructuredText","scl","stl"],loader:()=>ot(()=>import("./st-BtpAQKub.js"),[],import.meta.url)});lt({id:"swift",aliases:["Swift","swift"],extensions:[".swift"],mimetypes:["text/swift"],loader:()=>ot(()=>import("./swift-CVGPmAnX.js"),[],import.meta.url)});lt({id:"systemverilog",extensions:[".sv",".svh"],aliases:["SV","sv","SystemVerilog","systemverilog"],loader:()=>ot(()=>import("./systemverilog-CzfWLrvP.js"),[],import.meta.url)});lt({id:"verilog",extensions:[".v",".vh"],aliases:["V","v","Verilog","verilog"],loader:()=>ot(()=>import("./systemverilog-CzfWLrvP.js"),[],import.meta.url)});lt({id:"tcl",extensions:[".tcl"],aliases:["tcl","Tcl","tcltk","TclTk","tcl/tk","Tcl/Tk"],loader:()=>ot(()=>import("./tcl-0V1PA5XN.js"),[],import.meta.url)});lt({id:"twig",extensions:[".twig"],aliases:["Twig","twig"],mimetypes:["text/x-twig"],loader:()=>ot(()=>import("./twig-BwWq3-l7.js"),[],import.meta.url)});lt({id:"typescript",extensions:[".ts",".tsx",".cts",".mts"],aliases:["TypeScript","ts","typescript"],mimetypes:["text/typescript"],loader:()=>ot(()=>import("./typescript-dI1oFzg_.js"),[],import.meta.url)});lt({id:"typespec",extensions:[".tsp"],aliases:["TypeSpec"],loader:()=>ot(()=>import("./typespec-B73e1L9X.js"),[],import.meta.url)});lt({id:"vb",extensions:[".vb"],aliases:["Visual Basic","vb"],loader:()=>ot(()=>import("./vb-ByO2b-39.js"),[],import.meta.url)});lt({id:"wgsl",extensions:[".wgsl"],aliases:["WebGPU Shading Language","WGSL","wgsl"],loader:()=>ot(()=>import("./wgsl-DYQqGqAW.js"),[],import.meta.url)});lt({id:"xml",extensions:[".xml",".xsd",".dtd",".ascx",".csproj",".config",".props",".targets",".wxi",".wxl",".wxs",".xaml",".svg",".svgz",".opf",".xslt",".xsl"],firstLine:"(\\<\\?xml.*)|(\\<svg)|(\\<\\!doctype\\s+svg)",aliases:["XML","xml"],mimetypes:["text/xml","application/xml","application/xaml+xml","application/xml-dtd"],loader:()=>ot(()=>import("./xml-C1v408Pc.js"),[],import.meta.url)});lt({id:"yaml",extensions:[".yaml",".yml"],aliases:["YAML","yaml","YML","yml"],mimetypes:["application/x-yaml","text/x-yaml"],loader:()=>ot(()=>import("./yaml-CsLSpAZj.js"),[],import.meta.url)});/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.52.0(f6dc0eb8fce67e57f6036f4769d92c1666cdf546)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var n6e=Object.defineProperty,s6e=Object.getOwnPropertyDescriptor,o6e=Object.getOwnPropertyNames,r6e=Object.prototype.hasOwnProperty,a6e=(o,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of o6e(e))!r6e.call(o,n)&&n!==t&&n6e(o,n,{get:()=>e[n],enumerable:!(i=s6e(e,n))||i.enumerable});return o},l6e=(o,e,t)=>(a6e(o,e,"default"),t),a0={};l6e(a0,yI);var lY=class{constructor(e,t,i){this._onDidChange=new a0.Emitter,this._languageId=e,this.setOptions(t),this.setModeConfiguration(i)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get modeConfiguration(){return this._modeConfiguration}get diagnosticsOptions(){return this.options}get options(){return this._options}setOptions(e){this._options=e||Object.create(null),this._onDidChange.fire(this)}setDiagnosticsOptions(e){this.setOptions(e)}setModeConfiguration(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)}},cY={validate:!0,lint:{compatibleVendorPrefixes:"ignore",vendorPrefix:"warning",duplicateProperties:"warning",emptyRules:"warning",importStatement:"ignore",boxModel:"ignore",universalSelector:"ignore",zeroUnits:"ignore",fontFaceProperties:"warning",hexColorLength:"error",argumentsInColorFunction:"error",unknownProperties:"warning",ieHack:"ignore",unknownVendorSpecificProperties:"ignore",propertyIgnoredDueToDisplay:"warning",important:"ignore",float:"ignore",idSelector:"ignore"},data:{useDefaultDataProvider:!0},format:{newlineBetweenSelectors:!0,newlineBetweenRules:!0,spaceAroundSelectorSeparator:!1,braceStyle:"collapse",maxPreserveNewLines:void 0,preserveNewLines:!0}},dY={completionItems:!0,hovers:!0,documentSymbols:!0,definitions:!0,references:!0,documentHighlights:!0,rename:!0,colors:!0,foldingRanges:!0,diagnostics:!0,selectionRanges:!0,documentFormattingEdits:!0,documentRangeFormattingEdits:!0},Qfe=new lY("css",cY,dY),Jfe=new lY("scss",cY,dY),ege=new lY("less",cY,dY);a0.languages.css={cssDefaults:Qfe,lessDefaults:ege,scssDefaults:Jfe};function uY(){return ot(()=>import("./cssMode-D1VWzNis.js"),[],import.meta.url)}a0.languages.onLanguage("less",()=>{uY().then(o=>o.setupMode(ege))});a0.languages.onLanguage("scss",()=>{uY().then(o=>o.setupMode(Jfe))});a0.languages.onLanguage("css",()=>{uY().then(o=>o.setupMode(Qfe))});/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.52.0(f6dc0eb8fce67e57f6036f4769d92c1666cdf546)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var c6e=Object.defineProperty,d6e=Object.getOwnPropertyDescriptor,u6e=Object.getOwnPropertyNames,h6e=Object.prototype.hasOwnProperty,f6e=(o,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of u6e(e))!h6e.call(o,n)&&n!==t&&c6e(o,n,{get:()=>e[n],enumerable:!(i=d6e(e,n))||i.enumerable});return o},g6e=(o,e,t)=>(f6e(o,e,"default"),t),X4={};g6e(X4,yI);var p6e=class{constructor(e,t,i){this._onDidChange=new X4.Emitter,this._languageId=e,this.setOptions(t),this.setModeConfiguration(i)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get options(){return this._options}get modeConfiguration(){return this._modeConfiguration}setOptions(e){this._options=e||Object.create(null),this._onDidChange.fire(this)}setModeConfiguration(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)}},m6e={tabSize:4,insertSpaces:!1,wrapLineLength:120,unformatted:'default": "a, abbr, acronym, b, bdo, big, br, button, cite, code, dfn, em, i, img, input, kbd, label, map, object, q, samp, select, small, span, strong, sub, sup, textarea, tt, var',contentUnformatted:"pre",indentInnerHtml:!1,preserveNewLines:!0,maxPreserveNewLines:void 0,indentHandlebars:!1,endWithNewline:!1,extraLiners:"head, body, /html",wrapAttributes:"auto"},Q4={format:m6e,suggest:{},data:{useDefaultDataProvider:!0}};function J4(o){return{completionItems:!0,hovers:!0,documentSymbols:!0,links:!0,documentHighlights:!0,rename:!0,colors:!0,foldingRanges:!0,selectionRanges:!0,diagnostics:o===Tk,documentFormattingEdits:o===Tk,documentRangeFormattingEdits:o===Tk}}var Tk="html",lre="handlebars",cre="razor",tge=e5(Tk,Q4,J4(Tk)),_6e=tge.defaults,ige=e5(lre,Q4,J4(lre)),v6e=ige.defaults,nge=e5(cre,Q4,J4(cre)),b6e=nge.defaults;X4.languages.html={htmlDefaults:_6e,razorDefaults:b6e,handlebarDefaults:v6e,htmlLanguageService:tge,handlebarLanguageService:ige,razorLanguageService:nge,registerHTMLLanguageService:e5};function C6e(){return ot(()=>import("./htmlMode-DZZCA_PG.js"),[],import.meta.url)}function e5(o,e=Q4,t=J4(o)){const i=new p6e(o,e,t);let n;const s=X4.languages.onLanguage(o,async()=>{n=(await C6e()).setupMode(i)});return{defaults:i,dispose(){s.dispose(),n==null||n.dispose(),n=void 0}}}/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.52.0(f6dc0eb8fce67e57f6036f4769d92c1666cdf546)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var y6e=Object.defineProperty,w6e=Object.getOwnPropertyDescriptor,S6e=Object.getOwnPropertyNames,L6e=Object.prototype.hasOwnProperty,x6e=(o,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of S6e(e))!L6e.call(o,n)&&n!==t&&y6e(o,n,{get:()=>e[n],enumerable:!(i=w6e(e,n))||i.enumerable});return o},k6e=(o,e,t)=>(x6e(o,e,"default"),t),wI={};k6e(wI,yI);var D6e=class{constructor(e,t,i){this._onDidChange=new wI.Emitter,this._languageId=e,this.setDiagnosticsOptions(t),this.setModeConfiguration(i)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get modeConfiguration(){return this._modeConfiguration}get diagnosticsOptions(){return this._diagnosticsOptions}setDiagnosticsOptions(e){this._diagnosticsOptions=e||Object.create(null),this._onDidChange.fire(this)}setModeConfiguration(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)}},E6e={validate:!0,allowComments:!0,schemas:[],enableSchemaRequest:!1,schemaRequest:"warning",schemaValidation:"warning",comments:"error",trailingCommas:"error"},I6e={documentFormattingEdits:!0,documentRangeFormattingEdits:!0,completionItems:!0,hovers:!0,documentSymbols:!0,tokens:!0,colors:!0,foldingRanges:!0,diagnostics:!0,selectionRanges:!0},sge=new D6e("json",E6e,I6e),T6e=()=>oge().then(o=>o.getWorker());wI.languages.json={jsonDefaults:sge,getWorker:T6e};function oge(){return ot(()=>import("./jsonMode-ByFCGs_h.js"),[],import.meta.url)}wI.languages.register({id:"json",extensions:[".json",".bowerrc",".jshintrc",".jscsrc",".eslintrc",".babelrc",".har"],aliases:["JSON","json"],mimetypes:["application/json"]});wI.languages.onLanguage("json",()=>{oge().then(o=>o.setupMode(sge))});/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.52.0(f6dc0eb8fce67e57f6036f4769d92c1666cdf546)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var N6e=Object.defineProperty,R6e=Object.getOwnPropertyDescriptor,M6e=Object.getOwnPropertyNames,A6e=Object.prototype.hasOwnProperty,P6e=(o,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of M6e(e))!A6e.call(o,n)&&n!==t&&N6e(o,n,{get:()=>e[n],enumerable:!(i=R6e(e,n))||i.enumerable});return o},O6e=(o,e,t)=>(P6e(o,e,"default"),t),F6e="5.4.5",LS={};O6e(LS,yI);var rge=(o=>(o[o.None=0]="None",o[o.CommonJS=1]="CommonJS",o[o.AMD=2]="AMD",o[o.UMD=3]="UMD",o[o.System=4]="System",o[o.ES2015=5]="ES2015",o[o.ESNext=99]="ESNext",o))(rge||{}),age=(o=>(o[o.None=0]="None",o[o.Preserve=1]="Preserve",o[o.React=2]="React",o[o.ReactNative=3]="ReactNative",o[o.ReactJSX=4]="ReactJSX",o[o.ReactJSXDev=5]="ReactJSXDev",o))(age||{}),lge=(o=>(o[o.CarriageReturnLineFeed=0]="CarriageReturnLineFeed",o[o.LineFeed=1]="LineFeed",o))(lge||{}),cge=(o=>(o[o.ES3=0]="ES3",o[o.ES5=1]="ES5",o[o.ES2015=2]="ES2015",o[o.ES2016=3]="ES2016",o[o.ES2017=4]="ES2017",o[o.ES2018=5]="ES2018",o[o.ES2019=6]="ES2019",o[o.ES2020=7]="ES2020",o[o.ESNext=99]="ESNext",o[o.JSON=100]="JSON",o[o.Latest=99]="Latest",o))(cge||{}),dge=(o=>(o[o.Classic=1]="Classic",o[o.NodeJs=2]="NodeJs",o))(dge||{}),uge=class{constructor(o,e,t,i,n){this._onDidChange=new LS.Emitter,this._onDidExtraLibsChange=new LS.Emitter,this._extraLibs=Object.create(null),this._removedExtraLibs=Object.create(null),this._eagerModelSync=!1,this.setCompilerOptions(o),this.setDiagnosticsOptions(e),this.setWorkerOptions(t),this.setInlayHintsOptions(i),this.setModeConfiguration(n),this._onDidExtraLibsChangeTimeout=-1}get onDidChange(){return this._onDidChange.event}get onDidExtraLibsChange(){return this._onDidExtraLibsChange.event}get modeConfiguration(){return this._modeConfiguration}get workerOptions(){return this._workerOptions}get inlayHintsOptions(){return this._inlayHintsOptions}getExtraLibs(){return this._extraLibs}addExtraLib(o,e){let t;if(typeof e>"u"?t=`ts:extralib-${Math.random().toString(36).substring(2,15)}`:t=e,this._extraLibs[t]&&this._extraLibs[t].content===o)return{dispose:()=>{}};let i=1;return this._removedExtraLibs[t]&&(i=this._removedExtraLibs[t]+1),this._extraLibs[t]&&(i=this._extraLibs[t].version+1),this._extraLibs[t]={content:o,version:i},this._fireOnDidExtraLibsChangeSoon(),{dispose:()=>{let n=this._extraLibs[t];n&&n.version===i&&(delete this._extraLibs[t],this._removedExtraLibs[t]=i,this._fireOnDidExtraLibsChangeSoon())}}}setExtraLibs(o){for(const e in this._extraLibs)this._removedExtraLibs[e]=this._extraLibs[e].version;if(this._extraLibs=Object.create(null),o&&o.length>0)for(const e of o){const t=e.filePath||`ts:extralib-${Math.random().toString(36).substring(2,15)}`,i=e.content;let n=1;this._removedExtraLibs[t]&&(n=this._removedExtraLibs[t]+1),this._extraLibs[t]={content:i,version:n}}this._fireOnDidExtraLibsChangeSoon()}_fireOnDidExtraLibsChangeSoon(){this._onDidExtraLibsChangeTimeout===-1&&(this._onDidExtraLibsChangeTimeout=window.setTimeout(()=>{this._onDidExtraLibsChangeTimeout=-1,this._onDidExtraLibsChange.fire(void 0)},0))}getCompilerOptions(){return this._compilerOptions}setCompilerOptions(o){this._compilerOptions=o||Object.create(null),this._onDidChange.fire(void 0)}getDiagnosticsOptions(){return this._diagnosticsOptions}setDiagnosticsOptions(o){this._diagnosticsOptions=o||Object.create(null),this._onDidChange.fire(void 0)}setWorkerOptions(o){this._workerOptions=o||Object.create(null),this._onDidChange.fire(void 0)}setInlayHintsOptions(o){this._inlayHintsOptions=o||Object.create(null),this._onDidChange.fire(void 0)}setMaximumWorkerIdleTime(o){}setEagerModelSync(o){this._eagerModelSync=o}getEagerModelSync(){return this._eagerModelSync}setModeConfiguration(o){this._modeConfiguration=o||Object.create(null),this._onDidChange.fire(void 0)}},B6e=F6e,hge={completionItems:!0,hovers:!0,documentSymbols:!0,definitions:!0,references:!0,documentHighlights:!0,rename:!0,diagnostics:!0,documentRangeFormattingEdits:!0,signatureHelp:!0,onTypeFormattingEdits:!0,codeActions:!0,inlayHints:!0},fge=new uge({allowNonTsExtensions:!0,target:99},{noSemanticValidation:!1,noSyntaxValidation:!1,onlyVisible:!1},{},{},hge),gge=new uge({allowNonTsExtensions:!0,allowJs:!0,target:99},{noSemanticValidation:!0,noSyntaxValidation:!1,onlyVisible:!1},{},{},hge),W6e=()=>t5().then(o=>o.getTypeScriptWorker()),H6e=()=>t5().then(o=>o.getJavaScriptWorker());LS.languages.typescript={ModuleKind:rge,JsxEmit:age,NewLineKind:lge,ScriptTarget:cge,ModuleResolutionKind:dge,typescriptVersion:B6e,typescriptDefaults:fge,javascriptDefaults:gge,getTypeScriptWorker:W6e,getJavaScriptWorker:H6e};function t5(){return ot(()=>import("./tsMode-Bz6v6zGX.js"),[],import.meta.url)}LS.languages.onLanguage("typescript",()=>t5().then(o=>o.setupTypeScript(fge)));LS.languages.onLanguage("javascript",()=>t5().then(o=>o.setupJavaScript(gge)));class V6e extends na{constructor(){super({id:"diffEditor.toggleCollapseUnchangedRegions",title:pt("toggleCollapseUnchangedRegions","Toggle Collapse Unchanged Regions"),icon:Se.map,toggled:de.has("config.diffEditor.hideUnchangedRegions.enabled"),precondition:de.has("isInDiffEditor"),menu:{when:de.has("isInDiffEditor"),id:qe.EditorTitle,order:22,group:"navigation"}})}run(e,...t){const i=e.get(Ht),n=!i.getValue("diffEditor.hideUnchangedRegions.enabled");i.updateValue("diffEditor.hideUnchangedRegions.enabled",n)}}class pge extends na{constructor(){super({id:"diffEditor.toggleShowMovedCodeBlocks",title:pt("toggleShowMovedCodeBlocks","Toggle Show Moved Code Blocks"),precondition:de.has("isInDiffEditor")})}run(e,...t){const i=e.get(Ht),n=!i.getValue("diffEditor.experimental.showMoves");i.updateValue("diffEditor.experimental.showMoves",n)}}class mge extends na{constructor(){super({id:"diffEditor.toggleUseInlineViewWhenSpaceIsLimited",title:pt("toggleUseInlineViewWhenSpaceIsLimited","Toggle Use Inline View When Space Is Limited"),precondition:de.has("isInDiffEditor")})}run(e,...t){const i=e.get(Ht),n=!i.getValue("diffEditor.useInlineViewWhenSpaceIsLimited");i.updateValue("diffEditor.useInlineViewWhenSpaceIsLimited",n)}}const SI=pt("diffEditor","Diff Editor");class z6e extends wu{constructor(){super({id:"diffEditor.switchSide",title:pt("switchSide","Switch Side"),icon:Se.arrowSwap,precondition:de.has("isInDiffEditor"),f1:!0,category:SI})}runEditorCommand(e,t,i){const n=l0(e);if(n instanceof Eg){if(i&&i.dryRun)return{destinationSelection:n.mapToOtherSide().destinationSelection};n.switchSide()}}}class U6e extends wu{constructor(){super({id:"diffEditor.exitCompareMove",title:pt("exitCompareMove","Exit Compare Move"),icon:Se.close,precondition:B.comparingMovedCode,f1:!1,category:SI,keybinding:{weight:1e4,primary:9}})}runEditorCommand(e,t,...i){const n=l0(e);n instanceof Eg&&n.exitCompareMove()}}class $6e extends wu{constructor(){super({id:"diffEditor.collapseAllUnchangedRegions",title:pt("collapseAllUnchangedRegions","Collapse All Unchanged Regions"),icon:Se.fold,precondition:de.has("isInDiffEditor"),f1:!0,category:SI})}runEditorCommand(e,t,...i){const n=l0(e);n instanceof Eg&&n.collapseAllUnchangedRegions()}}class j6e extends wu{constructor(){super({id:"diffEditor.showAllUnchangedRegions",title:pt("showAllUnchangedRegions","Show All Unchanged Regions"),icon:Se.unfold,precondition:de.has("isInDiffEditor"),f1:!0,category:SI})}runEditorCommand(e,t,...i){const n=l0(e);n instanceof Eg&&n.showAllUnchangedRegions()}}class IU extends na{constructor(){super({id:"diffEditor.revert",title:pt("revert","Revert"),f1:!1,category:SI})}run(e,t){const i=q6e(e,t.originalUri,t.modifiedUri);i instanceof Eg&&i.revertRangeMappings(t.mapping.innerChanges??[])}}const _ge=pt("accessibleDiffViewer","Accessible Diff Viewer"),Z2=class Z2 extends na{constructor(){super({id:Z2.id,title:pt("editor.action.accessibleDiffViewer.next","Go to Next Difference"),category:_ge,precondition:de.has("isInDiffEditor"),keybinding:{primary:65,weight:100},f1:!0})}run(e){const t=l0(e);t==null||t.accessibleDiffViewerNext()}};Z2.id="editor.action.accessibleDiffViewer.next";let hE=Z2;const X2=class X2 extends na{constructor(){super({id:X2.id,title:pt("editor.action.accessibleDiffViewer.prev","Go to Previous Difference"),category:_ge,precondition:de.has("isInDiffEditor"),keybinding:{primary:1089,weight:100},f1:!0})}run(e){const t=l0(e);t==null||t.accessibleDiffViewerPrev()}};X2.id="editor.action.accessibleDiffViewer.prev";let iO=X2;function q6e(o,e,t){return o.get(hi).listDiffEditors().find(s=>{var l,c;const r=s.getModifiedEditor(),a=s.getOriginalEditor();return r&&((l=r.getModel())==null?void 0:l.uri.toString())===t.toString()&&a&&((c=a.getModel())==null?void 0:c.uri.toString())===e.toString()})||null}function l0(o){const t=o.get(hi).listDiffEditors(),i=Mo();if(i)for(const n of t){const s=n.getContainerDomNode();if(K6e(s,i))return n}return null}function K6e(o,e){let t=e;for(;t;){if(t===o)return!0;t=t.parentElement}return!1}Xi(V6e);Xi(pge);Xi(mge);lo.appendMenuItem(qe.EditorTitle,{command:{id:new mge().desc.id,title:v("useInlineViewWhenSpaceIsLimited","Use Inline View When Space Is Limited"),toggled:de.has("config.diffEditor.useInlineViewWhenSpaceIsLimited"),precondition:de.has("isInDiffEditor")},order:11,group:"1_diff",when:de.and(B.diffEditorRenderSideBySideInlineBreakpointReached,de.has("isInDiffEditor"))});lo.appendMenuItem(qe.EditorTitle,{command:{id:new pge().desc.id,title:v("showMoves","Show Moved Code Blocks"),icon:Se.move,toggled:$S.create("config.diffEditor.experimental.showMoves",!0),precondition:de.has("isInDiffEditor")},order:10,group:"1_diff",when:de.has("isInDiffEditor")});Xi(IU);for(const o of[{icon:Se.arrowRight,key:B.diffEditorInlineMode.toNegated()},{icon:Se.discard,key:B.diffEditorInlineMode}])lo.appendMenuItem(qe.DiffEditorHunkToolbar,{command:{id:new IU().desc.id,title:v("revertHunk","Revert Block"),icon:o.icon},when:de.and(B.diffEditorModifiedWritable,o.key),order:5,group:"primary"}),lo.appendMenuItem(qe.DiffEditorSelectionToolbar,{command:{id:new IU().desc.id,title:v("revertSelection","Revert Selection"),icon:o.icon},when:de.and(B.diffEditorModifiedWritable,o.key),order:5,group:"primary"});Xi(z6e);Xi(U6e);Xi($6e);Xi(j6e);lo.appendMenuItem(qe.EditorTitle,{command:{id:hE.id,title:v("Open Accessible Diff Viewer","Open Accessible Diff Viewer"),precondition:de.has("isInDiffEditor")},order:10,group:"2_diff",when:de.and(B.accessibleDiffViewerVisible.negate(),de.has("isInDiffEditor"))});ii.registerCommandAlias("editor.action.diffReview.next",hE.id);Xi(hE);ii.registerCommandAlias("editor.action.diffReview.prev",iO.id);Xi(iO);var G6e=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Y6e=function(o,e){return function(t,i){e(t,i,o)}},TU;const i5=new Pe("selectionAnchorSet",!1);var mb;let Ym=(mb=class{static get(e){return e.getContribution(TU.ID)}constructor(e,t){this.editor=e,this.selectionAnchorSetContextKey=i5.bindTo(t),this.modelChangeListener=e.onDidChangeModel(()=>this.selectionAnchorSetContextKey.reset())}setSelectionAnchor(){if(this.editor.hasModel()){const e=this.editor.getPosition();this.editor.changeDecorations(t=>{this.decorationId&&t.removeDecoration(this.decorationId),this.decorationId=t.addDecoration(Ke.fromPositions(e,e),{description:"selection-anchor",stickiness:1,hoverMessage:new Xo().appendText(v("selectionAnchor","Selection Anchor")),className:"selection-anchor"})}),this.selectionAnchorSetContextKey.set(!!this.decorationId),ta(v("anchorSet","Anchor set at {0}:{1}",e.lineNumber,e.column))}}goToSelectionAnchor(){if(this.editor.hasModel()&&this.decorationId){const e=this.editor.getModel().getDecorationRange(this.decorationId);e&&this.editor.setPosition(e.getStartPosition())}}selectFromAnchorToCursor(){if(this.editor.hasModel()&&this.decorationId){const e=this.editor.getModel().getDecorationRange(this.decorationId);if(e){const t=this.editor.getPosition();this.editor.setSelection(Ke.fromPositions(e.getStartPosition(),t)),this.cancelSelectionAnchor()}}}cancelSelectionAnchor(){if(this.decorationId){const e=this.decorationId;this.editor.changeDecorations(t=>{t.removeDecoration(e),this.decorationId=void 0}),this.selectionAnchorSetContextKey.set(!1)}}dispose(){this.cancelSelectionAnchor(),this.modelChangeListener.dispose()}},TU=mb,mb.ID="editor.contrib.selectionAnchorController",mb);Ym=TU=G6e([Y6e(1,ht)],Ym);class Z6e extends Ve{constructor(){super({id:"editor.action.setSelectionAnchor",label:v("setSelectionAnchor","Set Selection Anchor"),alias:"Set Selection Anchor",precondition:void 0,kbOpts:{kbExpr:B.editorTextFocus,primary:Is(2089,2080),weight:100}})}async run(e,t){var i;(i=Ym.get(t))==null||i.setSelectionAnchor()}}class X6e extends Ve{constructor(){super({id:"editor.action.goToSelectionAnchor",label:v("goToSelectionAnchor","Go to Selection Anchor"),alias:"Go to Selection Anchor",precondition:i5})}async run(e,t){var i;(i=Ym.get(t))==null||i.goToSelectionAnchor()}}class Q6e extends Ve{constructor(){super({id:"editor.action.selectFromAnchorToCursor",label:v("selectFromAnchorToCursor","Select from Anchor to Cursor"),alias:"Select from Anchor to Cursor",precondition:i5,kbOpts:{kbExpr:B.editorTextFocus,primary:Is(2089,2089),weight:100}})}async run(e,t){var i;(i=Ym.get(t))==null||i.selectFromAnchorToCursor()}}class J6e extends Ve{constructor(){super({id:"editor.action.cancelSelectionAnchor",label:v("cancelSelectionAnchor","Cancel Selection Anchor"),alias:"Cancel Selection Anchor",precondition:i5,kbOpts:{kbExpr:B.editorTextFocus,primary:9,weight:100}})}async run(e,t){var i;(i=Ym.get(t))==null||i.cancelSelectionAnchor()}}oi(Ym.ID,Ym,4);be(Z6e);be(X6e);be(Q6e);be(J6e);const eze=W("editorOverviewRuler.bracketMatchForeground","#A0A0A0",v("overviewRulerBracketMatchForeground","Overview ruler marker color for matching brackets."));class tze extends Ve{constructor(){super({id:"editor.action.jumpToBracket",label:v("smartSelect.jumpBracket","Go to Bracket"),alias:"Go to Bracket",precondition:void 0,kbOpts:{kbExpr:B.editorTextFocus,primary:3165,weight:100}})}run(e,t){var i;(i=bC.get(t))==null||i.jumpToBracket()}}class ize extends Ve{constructor(){super({id:"editor.action.selectToBracket",label:v("smartSelect.selectToBracket","Select to Bracket"),alias:"Select to Bracket",precondition:void 0,metadata:{description:pt("smartSelect.selectToBracketDescription","Select the text inside and including the brackets or curly braces"),args:[{name:"args",schema:{type:"object",properties:{selectBrackets:{type:"boolean",default:!0}}}}]}})}run(e,t,i){var s;let n=!0;i&&i.selectBrackets===!1&&(n=!1),(s=bC.get(t))==null||s.selectToBracket(n)}}class nze extends Ve{constructor(){super({id:"editor.action.removeBrackets",label:v("smartSelect.removeBrackets","Remove Brackets"),alias:"Remove Brackets",precondition:void 0,kbOpts:{kbExpr:B.editorTextFocus,primary:2561,weight:100}})}run(e,t){var i;(i=bC.get(t))==null||i.removeBrackets(this.id)}}class sze{constructor(e,t,i){this.position=e,this.brackets=t,this.options=i}}const Ap=class Ap extends X{static get(e){return e.getContribution(Ap.ID)}constructor(e){super(),this._editor=e,this._lastBracketsData=[],this._lastVersionId=0,this._decorations=this._editor.createDecorationsCollection(),this._updateBracketsSoon=this._register(new Oi(()=>this._updateBrackets(),50)),this._matchBrackets=this._editor.getOption(72),this._updateBracketsSoon.schedule(),this._register(e.onDidChangeCursorPosition(t=>{this._matchBrackets!=="never"&&this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModelContent(t=>{this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModel(t=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModelLanguageConfiguration(t=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeConfiguration(t=>{t.hasChanged(72)&&(this._matchBrackets=this._editor.getOption(72),this._decorations.clear(),this._lastBracketsData=[],this._lastVersionId=0,this._updateBracketsSoon.schedule())})),this._register(e.onDidBlurEditorWidget(()=>{this._updateBracketsSoon.schedule()})),this._register(e.onDidFocusEditorWidget(()=>{this._updateBracketsSoon.schedule()}))}jumpToBracket(){if(!this._editor.hasModel())return;const e=this._editor.getModel(),t=this._editor.getSelections().map(i=>{const n=i.getStartPosition(),s=e.bracketPairs.matchBracket(n);let r=null;if(s)s[0].containsPosition(n)&&!s[1].containsPosition(n)?r=s[1].getStartPosition():s[1].containsPosition(n)&&(r=s[0].getStartPosition());else{const a=e.bracketPairs.findEnclosingBrackets(n);if(a)r=a[1].getStartPosition();else{const l=e.bracketPairs.findNextBracket(n);l&&l.range&&(r=l.range.getStartPosition())}}return r?new Ke(r.lineNumber,r.column,r.lineNumber,r.column):new Ke(n.lineNumber,n.column,n.lineNumber,n.column)});this._editor.setSelections(t),this._editor.revealRange(t[0])}selectToBracket(e){if(!this._editor.hasModel())return;const t=this._editor.getModel(),i=[];this._editor.getSelections().forEach(n=>{const s=n.getStartPosition();let r=t.bracketPairs.matchBracket(s);if(!r&&(r=t.bracketPairs.findEnclosingBrackets(s),!r)){const c=t.bracketPairs.findNextBracket(s);c&&c.range&&(r=t.bracketPairs.matchBracket(c.range.getStartPosition()))}let a=null,l=null;if(r){r.sort(M.compareRangesUsingStarts);const[c,u]=r;if(a=e?c.getStartPosition():c.getEndPosition(),l=e?u.getEndPosition():u.getStartPosition(),u.containsPosition(s)){const f=a;a=l,l=f}}a&&l&&i.push(new Ke(a.lineNumber,a.column,l.lineNumber,l.column))}),i.length>0&&(this._editor.setSelections(i),this._editor.revealRange(i[0]))}removeBrackets(e){if(!this._editor.hasModel())return;const t=this._editor.getModel();this._editor.getSelections().forEach(i=>{const n=i.getPosition();let s=t.bracketPairs.matchBracket(n);s||(s=t.bracketPairs.findEnclosingBrackets(n)),s&&(this._editor.pushUndoStop(),this._editor.executeEdits(e,[{range:s[0],text:""},{range:s[1],text:""}]),this._editor.pushUndoStop())})}_updateBrackets(){if(this._matchBrackets==="never")return;this._recomputeBrackets();const e=[];let t=0;for(const i of this._lastBracketsData){const n=i.brackets;n&&(e[t++]={range:n[0],options:i.options},e[t++]={range:n[1],options:i.options})}this._decorations.set(e)}_recomputeBrackets(){if(!this._editor.hasModel()||!this._editor.hasWidgetFocus()){this._lastBracketsData=[],this._lastVersionId=0;return}const e=this._editor.getSelections();if(e.length>100){this._lastBracketsData=[],this._lastVersionId=0;return}const t=this._editor.getModel(),i=t.getVersionId();let n=[];this._lastVersionId===i&&(n=this._lastBracketsData);const s=[];let r=0;for(let f=0,g=e.length;f<g;f++){const p=e[f];p.isEmpty()&&(s[r++]=p.getStartPosition())}s.length>1&&s.sort(G.compare);const a=[];let l=0,c=0;const u=n.length;for(let f=0,g=s.length;f<g;f++){const p=s[f];for(;c<u&&n[c].position.isBefore(p);)c++;if(c<u&&n[c].position.equals(p))a[l++]=n[c];else{let _=t.bracketPairs.matchBracket(p,20),b=Ap._DECORATION_OPTIONS_WITH_OVERVIEW_RULER;!_&&this._matchBrackets==="always"&&(_=t.bracketPairs.findEnclosingBrackets(p,20),b=Ap._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER),a[l++]=new sze(p,_,b)}}this._lastBracketsData=a,this._lastVersionId=i}};Ap.ID="editor.contrib.bracketMatchingController",Ap._DECORATION_OPTIONS_WITH_OVERVIEW_RULER=Dt.register({description:"bracket-match-overview",stickiness:1,className:"bracket-match",overviewRuler:{color:Gn(eze),position:Hl.Center}}),Ap._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER=Dt.register({description:"bracket-match-no-overview",stickiness:1,className:"bracket-match"});let bC=Ap;oi(bC.ID,bC,1);be(ize);be(tze);be(nze);lo.appendMenuItem(qe.MenubarGoMenu,{group:"5_infile_nav",command:{id:"editor.action.jumpToBracket",title:v({key:"miGoToBracket",comment:["&& denotes a mnemonic"]},"Go to &&Bracket")},order:2});class oze{constructor(e,t){this._selection=e,this._isMovingLeft=t}getEditOperations(e,t){if(this._selection.startLineNumber!==this._selection.endLineNumber||this._selection.isEmpty())return;const i=this._selection.startLineNumber,n=this._selection.startColumn,s=this._selection.endColumn;if(!(this._isMovingLeft&&n===1)&&!(!this._isMovingLeft&&s===e.getLineMaxColumn(i)))if(this._isMovingLeft){const r=new M(i,n-1,i,n),a=e.getValueInRange(r);t.addEditOperation(r,null),t.addEditOperation(new M(i,s,i,s),a)}else{const r=new M(i,s,i,s+1),a=e.getValueInRange(r);t.addEditOperation(r,null),t.addEditOperation(new M(i,n,i,n),a)}}computeCursorState(e,t){return this._isMovingLeft?new Ke(this._selection.startLineNumber,this._selection.startColumn-1,this._selection.endLineNumber,this._selection.endColumn-1):new Ke(this._selection.startLineNumber,this._selection.startColumn+1,this._selection.endLineNumber,this._selection.endColumn+1)}}class vge extends Ve{constructor(e,t){super(t),this.left=e}run(e,t){if(!t.hasModel())return;const i=[],n=t.getSelections();for(const s of n)i.push(new oze(s,this.left));t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop()}}class rze extends vge{constructor(){super(!0,{id:"editor.action.moveCarretLeftAction",label:v("caret.moveLeft","Move Selected Text Left"),alias:"Move Selected Text Left",precondition:B.writable})}}class aze extends vge{constructor(){super(!1,{id:"editor.action.moveCarretRightAction",label:v("caret.moveRight","Move Selected Text Right"),alias:"Move Selected Text Right",precondition:B.writable})}}be(rze);be(aze);class lze extends Ve{constructor(){super({id:"editor.action.transposeLetters",label:v("transposeLetters.label","Transpose Letters"),alias:"Transpose Letters",precondition:B.writable,kbOpts:{kbExpr:B.textInputFocus,primary:0,mac:{primary:306},weight:100}})}run(e,t){if(!t.hasModel())return;const i=t.getModel(),n=[],s=t.getSelections();for(const r of s){if(!r.isEmpty())continue;const a=r.startLineNumber,l=r.startColumn,c=i.getLineMaxColumn(a);if(a===1&&(l===1||l===2&&c===2))continue;const u=l===c?r.getPosition():Ti.rightPosition(i,r.getPosition().lineNumber,r.getPosition().column),f=Ti.leftPosition(i,u),g=Ti.leftPosition(i,f),p=i.getValueInRange(M.fromPositions(g,f)),_=i.getValueInRange(M.fromPositions(f,u)),b=M.fromPositions(g,u);n.push(new Ro(b,_+p))}n.length>0&&(t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop())}}be(lze);const n5=function(){if(typeof crypto=="object"&&typeof crypto.randomUUID=="function")return crypto.randomUUID.bind(crypto);let o;typeof crypto=="object"&&typeof crypto.getRandomValues=="function"?o=crypto.getRandomValues.bind(crypto):o=function(i){for(let n=0;n<i.length;n++)i[n]=Math.floor(Math.random()*256);return i};const e=new Uint8Array(16),t=[];for(let i=0;i<256;i++)t.push(i.toString(16).padStart(2,"0"));return function(){o(e),e[6]=e[6]&15|64,e[8]=e[8]&63|128;let n=0,s="";return s+=t[e[n++]],s+=t[e[n++]],s+=t[e[n++]],s+=t[e[n++]],s+="-",s+=t[e[n++]],s+=t[e[n++]],s+="-",s+=t[e[n++]],s+=t[e[n++]],s+="-",s+=t[e[n++]],s+=t[e[n++]],s+="-",s+=t[e[n++]],s+=t[e[n++]],s+=t[e[n++]],s+=t[e[n++]],s+=t[e[n++]],s+=t[e[n++]],s}}();function hY(o){return{asString:async()=>o,asFile:()=>{},value:typeof o=="string"?o:void 0}}function cze(o,e,t){const i={id:n5(),name:o,uri:e,data:t};return{asString:async()=>"",asFile:()=>i,value:void 0}}class bge{constructor(){this._entries=new Map}get size(){let e=0;for(const t of this._entries)e++;return e}has(e){return this._entries.has(this.toKey(e))}matches(e){const t=[...this._entries.keys()];return ti.some(this,([i,n])=>n.asFile())&&t.push("files"),yge(nO(e),t)}get(e){var t;return(t=this._entries.get(this.toKey(e)))==null?void 0:t[0]}append(e,t){const i=this._entries.get(e);i?i.push(t):this._entries.set(this.toKey(e),[t])}replace(e,t){this._entries.set(this.toKey(e),[t])}delete(e){this._entries.delete(this.toKey(e))}*[Symbol.iterator](){for(const[e,t]of this._entries)for(const i of t)yield[e,i]}toKey(e){return nO(e)}}function nO(o){return o.toLowerCase()}function Cge(o,e){return yge(nO(o),e.map(nO))}function yge(o,e){if(o==="*/*")return e.length>0;if(e.includes(o))return!0;const t=o.match(/^([a-z]+)\/([a-z]+|\*)$/i);if(!t)return!1;const[i,n,s]=t;return s==="*"?e.some(r=>r.startsWith(n+"/")):!1}const s5=Object.freeze({create:o=>bg(o.map(e=>e.toString())).join(`\r
`),split:o=>o.split(`\r
`),parse:o=>s5.split(o).filter(e=>!e.startsWith("#"))}),oh=class oh{constructor(e){this.value=e}equals(e){return this.value===e.value}contains(e){return this.equals(e)||this.value===""||e.value.startsWith(this.value+oh.sep)}intersects(e){return this.contains(e)||e.contains(this)}append(...e){return new oh((this.value?[this.value,...e]:e).join(oh.sep))}};oh.sep=".",oh.None=new oh("@@none@@"),oh.Empty=new oh("");let Dn=oh;const dre={EDITORS:"CodeEditors",FILES:"CodeFiles"};class dze{}const uze={DragAndDropContribution:"workbench.contributions.dragAndDrop"};Pn.add(uze.DragAndDropContribution,new dze);const tD=class tD{constructor(){}static getInstance(){return tD.INSTANCE}hasData(e){return e&&e===this.proto}getData(e){if(this.hasData(e))return this.data}};tD.INSTANCE=new tD;let NU=tD;function wge(o){const e=new bge;for(const t of o.items){const i=t.type;if(t.kind==="string"){const n=new Promise(s=>t.getAsString(s));e.append(i,hY(n))}else if(t.kind==="file"){const n=t.getAsFile();n&&e.append(i,hze(n))}}return e}function hze(o){const e=o.path?st.parse(o.path):void 0;return cze(o.name,e,async()=>new Uint8Array(await o.arrayBuffer()))}const fze=Object.freeze([dre.EDITORS,dre.FILES,BD.RESOURCES,BD.INTERNAL_URI_LIST]);function Sge(o,e=!1){const t=wge(o),i=t.get(BD.INTERNAL_URI_LIST);if(i)t.replace(ss.uriList,i);else if(e||!t.has(ss.uriList)){const n=[];for(const s of o.items){const r=s.getAsFile();if(r){const a=r.path;try{a?n.push(st.file(a).toString()):n.push(st.parse(r.name,!0).toString())}catch{}}}n.length&&t.replace(ss.uriList,hY(s5.create(n)))}for(const n of fze)t.delete(n);return t}var fY=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},fE=function(o,e){return function(t,i){e(t,i,o)}};class gY{async provideDocumentPasteEdits(e,t,i,n,s){const r=await this.getEdit(i,s);if(r)return{edits:[{insertText:r.insertText,title:r.title,kind:r.kind,handledMimeType:r.handledMimeType,yieldTo:r.yieldTo}],dispose(){}}}async provideDocumentDropEdits(e,t,i,n){const s=await this.getEdit(i,n);if(s)return{edits:[{insertText:s.insertText,title:s.title,kind:s.kind,handledMimeType:s.handledMimeType,yieldTo:s.yieldTo}],dispose(){}}}}const iD=class iD extends gY{constructor(){super(...arguments),this.kind=iD.kind,this.dropMimeTypes=[ss.text],this.pasteMimeTypes=[ss.text]}async getEdit(e,t){const i=e.get(ss.text);if(!i||e.has(ss.uriList))return;const n=await i.asString();return{handledMimeType:ss.text,title:v("text.label","Insert Plain Text"),insertText:n,kind:this.kind}}};iD.id="text",iD.kind=new Dn("text.plain");let CC=iD;class Lge extends gY{constructor(){super(...arguments),this.kind=new Dn("uri.absolute"),this.dropMimeTypes=[ss.uriList],this.pasteMimeTypes=[ss.uriList]}async getEdit(e,t){const i=await xge(e);if(!i.length||t.isCancellationRequested)return;let n=0;const s=i.map(({uri:a,originalText:l})=>a.scheme===Lt.file?a.fsPath:(n++,l)).join(" ");let r;return n>0?r=i.length>1?v("defaultDropProvider.uriList.uris","Insert Uris"):v("defaultDropProvider.uriList.uri","Insert Uri"):r=i.length>1?v("defaultDropProvider.uriList.paths","Insert Paths"):v("defaultDropProvider.uriList.path","Insert Path"),{handledMimeType:ss.uriList,insertText:s,title:r,kind:this.kind}}}let sO=class extends gY{constructor(e){super(),this._workspaceContextService=e,this.kind=new Dn("uri.relative"),this.dropMimeTypes=[ss.uriList],this.pasteMimeTypes=[ss.uriList]}async getEdit(e,t){const i=await xge(e);if(!i.length||t.isCancellationRequested)return;const n=rd(i.map(({uri:s})=>{const r=this._workspaceContextService.getWorkspaceFolder(s);return r?bAe(r.uri,s):void 0}));if(n.length)return{handledMimeType:ss.uriList,insertText:n.join(" "),title:i.length>1?v("defaultDropProvider.uriList.relativePaths","Insert Relative Paths"):v("defaultDropProvider.uriList.relativePath","Insert Relative Path"),kind:this.kind}}};sO=fY([fE(0,fC)],sO);class gze{constructor(){this.kind=new Dn("html"),this.pasteMimeTypes=["text/html"],this._yieldTo=[{mimeType:ss.text}]}async provideDocumentPasteEdits(e,t,i,n,s){var l;if(n.triggerKind!==hD.PasteAs&&!((l=n.only)!=null&&l.contains(this.kind)))return;const r=i.get("text/html"),a=await(r==null?void 0:r.asString());if(!(!a||s.isCancellationRequested))return{dispose(){},edits:[{insertText:a,yieldTo:this._yieldTo,title:v("pasteHtmlLabel","Insert HTML"),kind:this.kind}]}}}async function xge(o){const e=o.get(ss.uriList);if(!e)return[];const t=await e.asString(),i=[];for(const n of s5.parse(t))try{i.push({uri:st.parse(n),originalText:n})}catch{}return i}let RU=class extends X{constructor(e,t){super(),this._register(e.documentDropEditProvider.register("*",new CC)),this._register(e.documentDropEditProvider.register("*",new Lge)),this._register(e.documentDropEditProvider.register("*",new sO(t)))}};RU=fY([fE(0,Ue),fE(1,fC)],RU);let MU=class extends X{constructor(e,t){super(),this._register(e.documentPasteEditProvider.register("*",new CC)),this._register(e.documentPasteEditProvider.register("*",new Lge)),this._register(e.documentPasteEditProvider.register("*",new sO(t))),this._register(e.documentPasteEditProvider.register("*",new gze))}};MU=fY([fE(0,Ue),fE(1,fC)],MU);const Kc=class Kc{constructor(){this.value="",this.pos=0}static isDigitCharacter(e){return e>=48&&e<=57}static isVariableCharacter(e){return e===95||e>=97&&e<=122||e>=65&&e<=90}text(e){this.value=e,this.pos=0}tokenText(e){return this.value.substr(e.pos,e.len)}next(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};const e=this.pos;let t=0,i=this.value.charCodeAt(e),n;if(n=Kc._table[i],typeof n=="number")return this.pos+=1,{type:n,pos:e,len:1};if(Kc.isDigitCharacter(i)){n=8;do t+=1,i=this.value.charCodeAt(e+t);while(Kc.isDigitCharacter(i));return this.pos+=t,{type:n,pos:e,len:t}}if(Kc.isVariableCharacter(i)){n=9;do i=this.value.charCodeAt(e+ ++t);while(Kc.isVariableCharacter(i)||Kc.isDigitCharacter(i));return this.pos+=t,{type:n,pos:e,len:t}}n=10;do t+=1,i=this.value.charCodeAt(e+t);while(!isNaN(i)&&typeof Kc._table[i]>"u"&&!Kc.isDigitCharacter(i)&&!Kc.isVariableCharacter(i));return this.pos+=t,{type:n,pos:e,len:t}}};Kc._table={36:0,58:1,44:2,123:3,125:4,92:5,47:6,124:7,43:11,45:12,63:13};let AU=Kc;class c0{constructor(){this._children=[]}appendChild(e){return e instanceof zr&&this._children[this._children.length-1]instanceof zr?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this}replace(e,t){const{parent:i}=e,n=i.children.indexOf(e),s=i.children.slice(0);s.splice(n,1,...t),i._children=s,function r(a,l){for(const c of a)c.parent=l,r(c.children,c)}(t,i)}get children(){return this._children}get rightMostDescendant(){return this._children.length>0?this._children[this._children.length-1].rightMostDescendant:this}get snippet(){let e=this;for(;;){if(!e)return;if(e instanceof LI)return e;e=e.parent}}toString(){return this.children.reduce((e,t)=>e+t.toString(),"")}len(){return 0}}class zr extends c0{constructor(e){super(),this.value=e}toString(){return this.value}len(){return this.value.length}clone(){return new zr(this.value)}}class kge extends c0{}class pc extends kge{static compareByIndex(e,t){return e.index===t.index?0:e.isFinalTabstop?1:t.isFinalTabstop||e.index<t.index?-1:e.index>t.index?1:0}constructor(e){super(),this.index=e}get isFinalTabstop(){return this.index===0}get choice(){return this._children.length===1&&this._children[0]instanceof d0?this._children[0]:void 0}clone(){const e=new pc(this.index);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(t=>t.clone()),e}}class d0 extends c0{constructor(){super(...arguments),this.options=[]}appendChild(e){return e instanceof zr&&(e.parent=this,this.options.push(e)),this}toString(){return this.options[0].value}len(){return this.options[0].len()}clone(){const e=new d0;return this.options.forEach(e.appendChild,e),e}}class pY extends c0{constructor(){super(...arguments),this.regexp=new RegExp("")}resolve(e){const t=this;let i=!1,n=e.replace(this.regexp,function(){return i=!0,t._replace(Array.prototype.slice.call(arguments,0,-2))});return!i&&this._children.some(s=>s instanceof Kd&&!!s.elseValue)&&(n=this._replace([])),n}_replace(e){let t="";for(const i of this._children)if(i instanceof Kd){let n=e[i.index]||"";n=i.resolve(n),t+=n}else t+=i.toString();return t}toString(){return""}clone(){const e=new pY;return e.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),e._children=this.children.map(t=>t.clone()),e}}class Kd extends c0{constructor(e,t,i,n){super(),this.index=e,this.shorthandName=t,this.ifValue=i,this.elseValue=n}resolve(e){return this.shorthandName==="upcase"?e?e.toLocaleUpperCase():"":this.shorthandName==="downcase"?e?e.toLocaleLowerCase():"":this.shorthandName==="capitalize"?e?e[0].toLocaleUpperCase()+e.substr(1):"":this.shorthandName==="pascalcase"?e?this._toPascalCase(e):"":this.shorthandName==="camelcase"?e?this._toCamelCase(e):"":e&&typeof this.ifValue=="string"?this.ifValue:!e&&typeof this.elseValue=="string"?this.elseValue:e||""}_toPascalCase(e){const t=e.match(/[a-z0-9]+/gi);return t?t.map(i=>i.charAt(0).toUpperCase()+i.substr(1)).join(""):e}_toCamelCase(e){const t=e.match(/[a-z0-9]+/gi);return t?t.map((i,n)=>n===0?i.charAt(0).toLowerCase()+i.substr(1):i.charAt(0).toUpperCase()+i.substr(1)).join(""):e}clone(){return new Kd(this.index,this.shorthandName,this.ifValue,this.elseValue)}}class gE extends kge{constructor(e){super(),this.name=e}resolve(e){let t=e.resolve(this);return this.transform&&(t=this.transform.resolve(t||"")),t!==void 0?(this._children=[new zr(t)],!0):!1}clone(){const e=new gE(this.name);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(t=>t.clone()),e}}function ure(o,e){const t=[...o];for(;t.length>0;){const i=t.shift();if(!e(i))break;t.unshift(...i.children)}}class LI extends c0{get placeholderInfo(){if(!this._placeholders){const e=[];let t;this.walk(function(i){return i instanceof pc&&(e.push(i),t=!t||t.index<i.index?i:t),!0}),this._placeholders={all:e,last:t}}return this._placeholders}get placeholders(){const{all:e}=this.placeholderInfo;return e}offset(e){let t=0,i=!1;return this.walk(n=>n===e?(i=!0,!1):(t+=n.len(),!0)),i?t:-1}fullLen(e){let t=0;return ure([e],i=>(t+=i.len(),!0)),t}enclosingPlaceholders(e){const t=[];let{parent:i}=e;for(;i;)i instanceof pc&&t.push(i),i=i.parent;return t}resolveVariables(e){return this.walk(t=>(t instanceof gE&&t.resolve(e)&&(this._placeholders=void 0),!0)),this}appendChild(e){return this._placeholders=void 0,super.appendChild(e)}replace(e,t){return this._placeholders=void 0,super.replace(e,t)}clone(){const e=new LI;return this._children=this.children.map(t=>t.clone()),e}walk(e){ure(this.children,e)}}class yC{constructor(){this._scanner=new AU,this._token={type:14,pos:0,len:0}}static escape(e){return e.replace(/\$|}|\\/g,"\\$&")}static guessNeedsClipboard(e){return/\${?CLIPBOARD/.test(e)}parse(e,t,i){const n=new LI;return this.parseFragment(e,n),this.ensureFinalTabstop(n,i??!1,t??!1),n}parseFragment(e,t){const i=t.children.length;for(this._scanner.text(e),this._token=this._scanner.next();this._parse(t););const n=new Map,s=[];t.walk(l=>(l instanceof pc&&(l.isFinalTabstop?n.set(0,void 0):!n.has(l.index)&&l.children.length>0?n.set(l.index,l.children):s.push(l)),!0));const r=(l,c)=>{const u=n.get(l.index);if(!u)return;const f=new pc(l.index);f.transform=l.transform;for(const g of u){const p=g.clone();f.appendChild(p),p instanceof pc&&n.has(p.index)&&!c.has(p.index)&&(c.add(p.index),r(p,c),c.delete(p.index))}t.replace(l,[f])},a=new Set;for(const l of s)r(l,a);return t.children.slice(i)}ensureFinalTabstop(e,t,i){(t||i&&e.placeholders.length>0)&&(e.placeholders.find(s=>s.index===0)||e.appendChild(new pc(0)))}_accept(e,t){if(e===void 0||this._token.type===e){const i=t?this._scanner.tokenText(this._token):!0;return this._token=this._scanner.next(),i}return!1}_backTo(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1}_until(e){const t=this._token;for(;this._token.type!==e;){if(this._token.type===14)return!1;if(this._token.type===5){const n=this._scanner.next();if(n.type!==0&&n.type!==4&&n.type!==5)return!1}this._token=this._scanner.next()}const i=this._scanner.value.substring(t.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),i}_parse(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)}_parseEscaped(e){let t;return(t=this._accept(5,!0))?(t=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||t,e.appendChild(new zr(t)),!0):!1}_parseTabstopOrVariableName(e){let t;const i=this._token;return this._accept(0)&&(t=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(t)?new pc(Number(t)):new gE(t)),!0):this._backTo(i)}_parseComplexPlaceholder(e){let t;const i=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(8,!0))))return this._backTo(i);const s=new pc(Number(t));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(s),!0;if(!this._parse(s))return e.appendChild(new zr("${"+t+":")),s.children.forEach(e.appendChild,e),!0}else if(s.index>0&&this._accept(7)){const r=new d0;for(;;){if(this._parseChoiceElement(r)){if(this._accept(2))continue;if(this._accept(7)&&(s.appendChild(r),this._accept(4)))return e.appendChild(s),!0}return this._backTo(i),!1}}else return this._accept(6)?this._parseTransform(s)?(e.appendChild(s),!0):(this._backTo(i),!1):this._accept(4)?(e.appendChild(s),!0):this._backTo(i)}_parseChoiceElement(e){const t=this._token,i=[];for(;!(this._token.type===2||this._token.type===7);){let n;if((n=this._accept(5,!0))?n=this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||n:n=this._accept(void 0,!0),!n)return this._backTo(t),!1;i.push(n)}return i.length===0?(this._backTo(t),!1):(e.appendChild(new zr(i.join(""))),!0)}_parseComplexVariable(e){let t;const i=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(9,!0))))return this._backTo(i);const s=new gE(t);if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(s),!0;if(!this._parse(s))return e.appendChild(new zr("${"+t+":")),s.children.forEach(e.appendChild,e),!0}else return this._accept(6)?this._parseTransform(s)?(e.appendChild(s),!0):(this._backTo(i),!1):this._accept(4)?(e.appendChild(s),!0):this._backTo(i)}_parseTransform(e){const t=new pY;let i="",n="";for(;!this._accept(6);){let s;if(s=this._accept(5,!0)){s=this._accept(6,!0)||s,i+=s;continue}if(this._token.type!==14){i+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){let s;if(s=this._accept(5,!0)){s=this._accept(5,!0)||this._accept(6,!0)||s,t.appendChild(new zr(s));continue}if(!(this._parseFormatString(t)||this._parseAnything(t)))return!1}for(;!this._accept(4);){if(this._token.type!==14){n+=this._accept(void 0,!0);continue}return!1}try{t.regexp=new RegExp(i,n)}catch{return!1}return e.transform=t,!0}_parseFormatString(e){const t=this._token;if(!this._accept(0))return!1;let i=!1;this._accept(3)&&(i=!0);const n=this._accept(8,!0);if(n)if(i){if(this._accept(4))return e.appendChild(new Kd(Number(n))),!0;if(!this._accept(1))return this._backTo(t),!1}else return e.appendChild(new Kd(Number(n))),!0;else return this._backTo(t),!1;if(this._accept(6)){const s=this._accept(9,!0);return!s||!this._accept(4)?(this._backTo(t),!1):(e.appendChild(new Kd(Number(n),s)),!0)}else if(this._accept(11)){const s=this._until(4);if(s)return e.appendChild(new Kd(Number(n),void 0,s,void 0)),!0}else if(this._accept(12)){const s=this._until(4);if(s)return e.appendChild(new Kd(Number(n),void 0,void 0,s)),!0}else if(this._accept(13)){const s=this._until(1);if(s){const r=this._until(4);if(r)return e.appendChild(new Kd(Number(n),void 0,s,r)),!0}}else{const s=this._until(4);if(s)return e.appendChild(new Kd(Number(n),void 0,void 0,s)),!0}return this._backTo(t),!1}_parseAnything(e){return this._token.type!==14?(e.appendChild(new zr(this._scanner.tokenText(this._token))),this._accept(void 0),!0):!1}}function Dge(o,e,t){var i,n;return(typeof t.insertText=="string"?t.insertText==="":t.insertText.snippet==="")?{edits:((i=t.additionalEdit)==null?void 0:i.edits)??[]}:{edits:[...e.map(s=>new um(o,{range:s,text:typeof t.insertText=="string"?yC.escape(t.insertText)+"$0":t.insertText.snippet,insertAsSnippet:!0})),...((n=t.additionalEdit)==null?void 0:n.edits)??[]]}}function Ege(o){function e(r,a){return"mimeType"in r?r.mimeType===a.handledMimeType:!!a.kind&&r.kind.contains(a.kind)}const t=new Map;for(const r of o)for(const a of r.yieldTo??[])for(const l of o)if(l!==r&&e(a,l)){let c=t.get(r);c||(c=[],t.set(r,c)),c.push(l)}if(!t.size)return Array.from(o);const i=new Set,n=[];function s(r){if(!r.length)return[];const a=r[0];if(n.includes(a))return console.warn("Yield to cycle detected",a),r;if(i.has(a))return s(r.slice(1));let l=[];const c=t.get(a);return c&&(n.push(a),l=s(c),n.pop()),i.add(a),[...l,a,...s(r.slice(1))]}return s(Array.from(o))}var pze=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},mze=function(o,e){return function(t,i){e(t,i,o)}};const _ze=Dt.register({description:"inline-progress-widget",stickiness:1,showIfCollapsed:!0,after:{content:tce,inlineClassName:"inline-editor-progress-decoration",inlineClassNameAffectsLetterSpacing:!0}}),Q2=class Q2 extends X{constructor(e,t,i,n,s){super(),this.typeId=e,this.editor=t,this.range=i,this.delegate=s,this.allowEditorOverflow=!1,this.suppressMouseDown=!0,this.create(n),this.editor.addContentWidget(this),this.editor.layoutContentWidget(this)}create(e){this.domNode=xe(".inline-progress-widget"),this.domNode.role="button",this.domNode.title=e;const t=xe("span.icon");this.domNode.append(t),t.classList.add(...ut.asClassNameArray(Se.loading),"codicon-modifier-spin");const i=()=>{const n=this.editor.getOption(67);this.domNode.style.height=`${n}px`,this.domNode.style.width=`${Math.ceil(.8*n)}px`};i(),this._register(this.editor.onDidChangeConfiguration(n=>{(n.hasChanged(52)||n.hasChanged(67))&&i()})),this._register(se(this.domNode,Le.CLICK,n=>{this.delegate.cancel()}))}getId(){return Q2.baseId+"."+this.typeId}getDomNode(){return this.domNode}getPosition(){return{position:{lineNumber:this.range.startLineNumber,column:this.range.startColumn},preference:[0]}}dispose(){super.dispose(),this.editor.removeContentWidget(this)}};Q2.baseId="editor.widget.inlineProgressWidget";let PU=Q2,oO=class extends X{constructor(e,t,i){super(),this.id=e,this._editor=t,this._instantiationService=i,this._showDelay=500,this._showPromise=this._register(new Xs),this._currentWidget=this._register(new Xs),this._operationIdPool=0,this._currentDecorations=t.createDecorationsCollection()}dispose(){super.dispose(),this._currentDecorations.clear()}async showWhile(e,t,i,n,s){const r=this._operationIdPool++;this._currentOperation=r,this.clear(),this._showPromise.value=Bm(()=>{const a=M.fromPositions(e);this._currentDecorations.set([{range:a,options:_ze}]).length>0&&(this._currentWidget.value=this._instantiationService.createInstance(PU,this.id,this._editor,a,t,n))},s??this._showDelay);try{return await i}finally{this._currentOperation===r&&(this.clear(),this._currentOperation=void 0)}}clear(){this._showPromise.clear(),this._currentDecorations.clear(),this._currentWidget.clear()}};oO=pze([mze(2,nt)],oO);var vze=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},hre=function(o,e){return function(t,i){e(t,i,o)}},BM,mm;let nl=(mm=class{static get(e){return e.getContribution(BM.ID)}constructor(e,t,i){this._openerService=i,this._messageWidget=new Xs,this._messageListeners=new le,this._mouseOverMessage=!1,this._editor=e,this._visible=BM.MESSAGE_VISIBLE.bindTo(t)}dispose(){var e;(e=this._message)==null||e.dispose(),this._messageListeners.dispose(),this._messageWidget.dispose(),this._visible.reset()}showMessage(e,t){ta(uu(e)?e.value:e),this._visible.set(!0),this._messageWidget.clear(),this._messageListeners.clear(),this._message=uu(e)?L4(e,{actionHandler:{callback:n=>{this.closeMessage(),MK(this._openerService,n,uu(e)?e.isTrusted:void 0)},disposables:this._messageListeners}}):void 0,this._messageWidget.value=new fre(this._editor,t,typeof e=="string"?e:this._message.element),this._messageListeners.add(Ee.debounce(this._editor.onDidBlurEditorText,(n,s)=>s,0)(()=>{this._mouseOverMessage||this._messageWidget.value&&Ks(Mo(),this._messageWidget.value.getDomNode())||this.closeMessage()})),this._messageListeners.add(this._editor.onDidChangeCursorPosition(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidDispose(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidChangeModel(()=>this.closeMessage())),this._messageListeners.add(se(this._messageWidget.value.getDomNode(),Le.MOUSE_ENTER,()=>this._mouseOverMessage=!0,!0)),this._messageListeners.add(se(this._messageWidget.value.getDomNode(),Le.MOUSE_LEAVE,()=>this._mouseOverMessage=!1,!0));let i;this._messageListeners.add(this._editor.onMouseMove(n=>{n.target.position&&(i?i.containsPosition(n.target.position)||this.closeMessage():i=new M(t.lineNumber-3,1,n.target.position.lineNumber+3,1))}))}closeMessage(){this._visible.reset(),this._messageListeners.clear(),this._messageWidget.value&&this._messageListeners.add(fre.fadeOut(this._messageWidget.value))}},BM=mm,mm.ID="editor.contrib.messageController",mm.MESSAGE_VISIBLE=new Pe("messageVisible",!1,v("messageVisible","Whether the editor is currently showing an inline message")),mm);nl=BM=vze([hre(1,ht),hre(2,Ma)],nl);const bze=Bs.bindToContribution(nl.get);Re(new bze({id:"leaveEditorMessage",precondition:nl.MESSAGE_VISIBLE,handler:o=>o.closeMessage(),kbOpts:{weight:130,primary:9}}));let fre=class{static fadeOut(e){const t=()=>{e.dispose(),clearTimeout(i),e.getDomNode().removeEventListener("animationend",t)},i=setTimeout(t,110);return e.getDomNode().addEventListener("animationend",t),e.getDomNode().classList.add("fadeOut"),{dispose:t}}constructor(e,{lineNumber:t,column:i},n){this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._editor=e,this._editor.revealLinesInCenterIfOutsideViewport(t,t,0),this._position={lineNumber:t,column:i},this._domNode=document.createElement("div"),this._domNode.classList.add("monaco-editor-overlaymessage"),this._domNode.style.marginLeft="-6px";const s=document.createElement("div");s.classList.add("anchor","top"),this._domNode.appendChild(s);const r=document.createElement("div");typeof n=="string"?(r.classList.add("message"),r.textContent=n):(n.classList.add("message"),r.appendChild(n)),this._domNode.appendChild(r);const a=document.createElement("div");a.classList.add("anchor","below"),this._domNode.appendChild(a),this._editor.addContentWidget(this),this._domNode.classList.add("fadeIn")}dispose(){this._editor.removeContentWidget(this)}getId(){return"messageoverlay"}getDomNode(){return this._domNode}getPosition(){return{position:this._position,preference:[1,2],positionAffinity:1}}afterRender(e){this._domNode.classList.toggle("below",e===2)}};oi(nl.ID,nl,4);function a9(o,e){return e&&(o.stack||o.stacktrace)?v("stackTrace.format","{0}: {1}",pre(o),gre(o.stack)||gre(o.stacktrace)):pre(o)}function gre(o){return Array.isArray(o)?o.join(`
`):o}function pre(o){return o.code==="ERR_UNC_HOST_NOT_ALLOWED"?`${o.message}. Please update the 'security.allowedUNCHosts' setting if you want to allow this host.`:typeof o.code=="string"&&typeof o.errno=="number"&&typeof o.syscall=="string"?v("nodeExceptionMessage","A system error occurred ({0})",o.message):o.message||v("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}function rO(o=null,e=!1){if(!o)return v("error.defaultMessage","An unknown error occurred. Please consult the log for more details.");if(Array.isArray(o)){const t=rd(o),i=rO(t[0],e);return t.length>1?v("error.moreErrors","{0} ({1} errors in total)",i,t.length):i}if(xa(o))return o;if(o.detail){const t=o.detail;if(t.error)return a9(t.error,e);if(t.exception)return a9(t.exception,e)}return o.stack?a9(o,e):o.message?o.message:v("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}var Ige=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},O1=function(o,e){return function(t,i){e(t,i,o)}},OU,_b;let FU=(_b=class extends X{constructor(e,t,i,n,s,r,a,l,c,u){super(),this.typeId=e,this.editor=t,this.showCommand=n,this.range=s,this.edits=r,this.onSelectNewEdit=a,this._contextMenuService=l,this._keybindingService=u,this.allowEditorOverflow=!0,this.suppressMouseDown=!0,this.create(),this.visibleContext=i.bindTo(c),this.visibleContext.set(!0),this._register(it(()=>this.visibleContext.reset())),this.editor.addContentWidget(this),this.editor.layoutContentWidget(this),this._register(it(()=>this.editor.removeContentWidget(this))),this._register(this.editor.onDidChangeCursorPosition(f=>{s.containsPosition(f.position)||this.dispose()})),this._register(Ee.runAndSubscribe(u.onDidUpdateKeybindings,()=>{this._updateButtonTitle()}))}_updateButtonTitle(){var t;const e=(t=this._keybindingService.lookupKeybinding(this.showCommand.id))==null?void 0:t.getLabel();this.button.element.title=this.showCommand.label+(e?` (${e})`:"")}create(){this.domNode=xe(".post-edit-widget"),this.button=this._register(new hP(this.domNode,{supportIcons:!0})),this.button.label="$(insert)",this._register(se(this.domNode,Le.CLICK,()=>this.showSelector()))}getId(){return OU.baseId+"."+this.typeId}getDomNode(){return this.domNode}getPosition(){return{position:this.range.getEndPosition(),preference:[2]}}showSelector(){this._contextMenuService.showContextMenu({getAnchor:()=>{const e=os(this.button.element);return{x:e.left+e.width,y:e.top+e.height}},getActions:()=>this.edits.allEdits.map((e,t)=>Zv({id:"",label:e.title,checked:t===this.edits.activeEditIndex,run:()=>{if(t!==this.edits.activeEditIndex)return this.onSelectNewEdit(t)}}))})}},OU=_b,_b.baseId="editor.widget.postEditWidget",_b);FU=OU=Ige([O1(7,cl),O1(8,ht),O1(9,Di)],FU);let aO=class extends X{constructor(e,t,i,n,s,r,a){super(),this._id=e,this._editor=t,this._visibleContext=i,this._showCommand=n,this._instantiationService=s,this._bulkEditService=r,this._notificationService=a,this._currentWidget=this._register(new Xs),this._register(Ee.any(t.onDidChangeModel,t.onDidChangeModelContent)(()=>this.clear()))}async applyEditAndShowIfNeeded(e,t,i,n,s){const r=this._editor.getModel();if(!r||!e.length)return;const a=t.allEdits.at(t.activeEditIndex);if(!a)return;const l=async y=>{const S=this._editor.getModel();S&&(await S.undo(),this.applyEditAndShowIfNeeded(e,{activeEditIndex:y,allEdits:t.allEdits},i,n,s))},c=(y,S)=>{Tc(y)||(this._notificationService.error(S),i&&this.show(e[0],t,l))};let u;try{u=await n(a,s)}catch(y){return c(y,v("resolveError",`Error resolving edit '{0}':
{1}`,a.title,rO(y)))}if(s.isCancellationRequested)return;const f=Dge(r.uri,e,u),g=e[0],p=r.deltaDecorations([],[{range:g,options:{description:"paste-line-suffix",stickiness:0}}]);this._editor.focus();let _,b;try{_=await this._bulkEditService.apply(f,{editor:this._editor,token:s}),b=r.getDecorationRange(p[0])}catch(y){return c(y,v("applyError",`Error applying edit '{0}':
{1}`,a.title,rO(y)))}finally{r.deltaDecorations(p,[])}s.isCancellationRequested||i&&_.isApplied&&t.allEdits.length>1&&this.show(b??g,t,l)}show(e,t,i){this.clear(),this._editor.hasModel()&&(this._currentWidget.value=this._instantiationService.createInstance(FU,this._id,this._editor,this._visibleContext,this._showCommand,e,t,i))}clear(){this._currentWidget.clear()}tryShowSelector(){var e;(e=this._currentWidget.value)==null||e.showSelector()}};aO=Ige([O1(4,nt),O1(5,rI),O1(6,fs)],aO);var Cze=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},rw=function(o,e){return function(t,i){e(t,i,o)}},dv;const Tge="editor.changePasteType",mY=new Pe("pasteWidgetVisible",!1,v("pasteWidgetVisible","Whether the paste widget is showing")),l9="application/vnd.code.copyMetadata";var vb;let Ig=(vb=class extends X{static get(e){return e.getContribution(dv.ID)}constructor(e,t,i,n,s,r,a){super(),this._bulkEditService=i,this._clipboardService=n,this._languageFeaturesService=s,this._quickInputService=r,this._progressService=a,this._editor=e;const l=e.getContainerDomNode();this._register(se(l,"copy",c=>this.handleCopy(c))),this._register(se(l,"cut",c=>this.handleCopy(c))),this._register(se(l,"paste",c=>this.handlePaste(c),!0)),this._pasteProgressManager=this._register(new oO("pasteIntoEditor",e,t)),this._postPasteWidgetManager=this._register(t.createInstance(aO,"pasteIntoEditor",e,mY,{id:Tge,label:v("postPasteWidgetTitle","Show paste options...")}))}changePasteType(){this._postPasteWidgetManager.tryShowSelector()}pasteAs(e){this._editor.focus();try{this._pasteAsActionContext={preferred:e},US().execCommand("paste")}finally{this._pasteAsActionContext=void 0}}clearWidgets(){this._postPasteWidgetManager.clear()}isPasteAsEnabled(){return this._editor.getOption(85).enabled}async finishedPaste(){await this._currentPasteOperation}handleCopy(e){var b,y,S,L;if(!this._editor.hasTextFocus()||((y=(b=this._clipboardService).clearInternalState)==null||y.call(b),!e.clipboardData||!this.isPasteAsEnabled()))return;const t=this._editor.getModel(),i=this._editor.getSelections();if(!t||!(i!=null&&i.length))return;const n=this._editor.getOption(37);let s=i;const r=i.length===1&&i[0].isEmpty();if(r){if(!n)return;s=[new M(s[0].startLineNumber,1,s[0].startLineNumber,1+t.getLineLength(s[0].startLineNumber))]}const a=(S=this._editor._getViewModel())==null?void 0:S.getPlainTextToCopy(i,n,Po),c={multicursorText:Array.isArray(a)?a:null,pasteOnNewLine:r,mode:null},u=this._languageFeaturesService.documentPasteEditProvider.ordered(t).filter(x=>!!x.prepareDocumentPaste);if(!u.length){this.setCopyMetadata(e.clipboardData,{defaultPastePayload:c});return}const f=wge(e.clipboardData),g=u.flatMap(x=>x.copyMimeTypes??[]),p=n5();this.setCopyMetadata(e.clipboardData,{id:p,providerCopyMimeTypes:g,defaultPastePayload:c});const _=Gs(async x=>{const k=rd(await Promise.all(u.map(async E=>{try{return await E.prepareDocumentPaste(t,s,f,x)}catch(N){console.error(N);return}})));k.reverse();for(const E of k)for(const[N,A]of E)f.replace(N,A);return f});(L=dv._currentCopyOperation)==null||L.dataTransferPromise.cancel(),dv._currentCopyOperation={handle:p,dataTransferPromise:_}}async handlePaste(e){var l,c,u;if(!e.clipboardData||!this._editor.hasTextFocus())return;(l=nl.get(this._editor))==null||l.closeMessage(),(c=this._currentPasteOperation)==null||c.cancel(),this._currentPasteOperation=void 0;const t=this._editor.getModel(),i=this._editor.getSelections();if(!(i!=null&&i.length)||!t||this._editor.getOption(92)||!this.isPasteAsEnabled()&&!this._pasteAsActionContext)return;const n=this.fetchCopyMetadata(e),s=Sge(e.clipboardData);s.delete(l9);const r=[...e.clipboardData.types,...(n==null?void 0:n.providerCopyMimeTypes)??[],ss.uriList],a=this._languageFeaturesService.documentPasteEditProvider.ordered(t).filter(f=>{var p,_;const g=(p=this._pasteAsActionContext)==null?void 0:p.preferred;return g&&f.providedPasteEditKinds&&!this.providerMatchesPreference(f,g)?!1:(_=f.pasteMimeTypes)==null?void 0:_.some(b=>Cge(b,r))});if(!a.length){(u=this._pasteAsActionContext)!=null&&u.preferred&&this.showPasteAsNoEditMessage(i,this._pasteAsActionContext.preferred);return}e.preventDefault(),e.stopImmediatePropagation(),this._pasteAsActionContext?this.showPasteAsPick(this._pasteAsActionContext.preferred,a,i,s,n):this.doPasteInline(a,i,s,n,e)}showPasteAsNoEditMessage(e,t){var i;(i=nl.get(this._editor))==null||i.showMessage(v("pasteAsError","No paste edits for '{0}' found",t instanceof Dn?t.value:t.providerId),e[0].getStartPosition())}doPasteInline(e,t,i,n,s){const r=this._editor;if(!r.hasModel())return;const a=new Gm(r,3,void 0),l=Gs(async c=>{const u=this._editor;if(!u.hasModel())return;const f=u.getModel(),g=new le,p=g.add(new An(c));g.add(a.token.onCancellationRequested(()=>p.cancel()));const _=p.token;try{if(await this.mergeInDataFromCopy(i,n,_),_.isCancellationRequested)return;const b=e.filter(L=>this.isSupportedPasteProvider(L,i));if(!b.length||b.length===1&&b[0]instanceof CC)return this.applyDefaultPasteHandler(i,n,_,s);const y={triggerKind:hD.Automatic},S=await this.getPasteEdits(b,i,f,t,y,_);if(g.add(S),_.isCancellationRequested)return;if(S.edits.length===1&&S.edits[0].provider instanceof CC)return this.applyDefaultPasteHandler(i,n,_,s);if(S.edits.length){const L=u.getOption(85).showPasteSelector==="afterPaste";return this._postPasteWidgetManager.applyEditAndShowIfNeeded(t,{activeEditIndex:0,allEdits:S.edits},L,(x,k)=>new Promise((E,N)=>{(async()=>{var A,P;try{const H=(P=(A=x.provider).resolveDocumentPasteEdit)==null?void 0:P.call(A,x,k),ee=new zS,Q=H&&await this._pasteProgressManager.showWhile(t[0].getEndPosition(),v("resolveProcess","Resolving paste edit. Click to cancel"),Promise.race([ee.p,H]),{cancel:()=>(ee.cancel(),N(new ad))},0);return Q&&(x.additionalEdit=Q.additionalEdit),E(x)}catch(H){return N(H)}})()}),_)}await this.applyDefaultPasteHandler(i,n,_,s)}finally{g.dispose(),this._currentPasteOperation===l&&(this._currentPasteOperation=void 0)}});this._pasteProgressManager.showWhile(t[0].getEndPosition(),v("pasteIntoEditorProgress","Running paste handlers. Click to cancel and do basic paste"),l,{cancel:async()=>{try{if(l.cancel(),a.token.isCancellationRequested)return;await this.applyDefaultPasteHandler(i,n,a.token,s)}finally{a.dispose()}}}).then(()=>{a.dispose()}),this._currentPasteOperation=l}showPasteAsPick(e,t,i,n,s){const r=Gs(async a=>{const l=this._editor;if(!l.hasModel())return;const c=l.getModel(),u=new le,f=u.add(new Gm(l,3,void 0,a));try{if(await this.mergeInDataFromCopy(n,s,f.token),f.token.isCancellationRequested)return;let g=t.filter(S=>this.isSupportedPasteProvider(S,n,e));e&&(g=g.filter(S=>this.providerMatchesPreference(S,e)));const p={triggerKind:hD.PasteAs,only:e&&e instanceof Dn?e:void 0};let _=u.add(await this.getPasteEdits(g,n,c,i,p,f.token));if(f.token.isCancellationRequested)return;if(e&&(_={edits:_.edits.filter(S=>e instanceof Dn?e.contains(S.kind):e.providerId===S.provider.id),dispose:_.dispose}),!_.edits.length){p.only&&this.showPasteAsNoEditMessage(i,p.only);return}let b;if(e)b=_.edits.at(0);else{const S=await this._quickInputService.pick(_.edits.map(L=>{var x;return{label:L.title,description:(x=L.kind)==null?void 0:x.value,edit:L}}),{placeHolder:v("pasteAsPickerPlaceholder","Select Paste Action")});b=S==null?void 0:S.edit}if(!b)return;const y=Dge(c.uri,i,b);await this._bulkEditService.apply(y,{editor:this._editor})}finally{u.dispose(),this._currentPasteOperation===r&&(this._currentPasteOperation=void 0)}});this._progressService.withProgress({location:10,title:v("pasteAsProgress","Running paste handlers")},()=>r)}setCopyMetadata(e,t){e.setData(l9,JSON.stringify(t))}fetchCopyMetadata(e){if(!e.clipboardData)return;const t=e.clipboardData.getData(l9);if(t)try{return JSON.parse(t)}catch{return}const[i,n]=$z.getTextData(e.clipboardData);if(n)return{defaultPastePayload:{mode:n.mode,multicursorText:n.multicursorText??null,pasteOnNewLine:!!n.isFromEmptySelection}}}async mergeInDataFromCopy(e,t,i){var n;if(t!=null&&t.id&&((n=dv._currentCopyOperation)==null?void 0:n.handle)===t.id){const s=await dv._currentCopyOperation.dataTransferPromise;if(i.isCancellationRequested)return;for(const[r,a]of s)e.replace(r,a)}if(!e.has(ss.uriList)){const s=await this._clipboardService.readResources();if(i.isCancellationRequested)return;s.length&&e.append(ss.uriList,hY(s5.create(s)))}}async getPasteEdits(e,t,i,n,s,r){const a=new le,l=await QE(Promise.all(e.map(async u=>{var f,g;try{const p=await((f=u.provideDocumentPasteEdits)==null?void 0:f.call(u,i,n,t,s,r));return p&&a.add(p),(g=p==null?void 0:p.edits)==null?void 0:g.map(_=>({..._,provider:u}))}catch(p){Tc(p)||console.error(p);return}})),r),c=rd(l??[]).flat().filter(u=>!s.only||s.only.contains(u.kind));return{edits:Ege(c),dispose:()=>a.dispose()}}async applyDefaultPasteHandler(e,t,i,n){const s=e.get(ss.text)??e.get("text"),r=await(s==null?void 0:s.asString())??"";if(i.isCancellationRequested)return;const a={clipboardEvent:n,text:r,pasteOnNewLine:(t==null?void 0:t.defaultPastePayload.pasteOnNewLine)??!1,multicursorText:(t==null?void 0:t.defaultPastePayload.multicursorText)??null,mode:null};this._editor.trigger("keyboard","paste",a)}isSupportedPasteProvider(e,t,i){var n;return(n=e.pasteMimeTypes)!=null&&n.some(s=>t.matches(s))?!i||this.providerMatchesPreference(e,i):!1}providerMatchesPreference(e,t){return t instanceof Dn?e.providedPasteEditKinds?e.providedPasteEditKinds.some(i=>t.contains(i)):!0:e.id===t.providerId}},dv=vb,vb.ID="editor.contrib.copyPasteActionController",vb);Ig=dv=Cze([rw(1,nt),rw(2,rI),rw(3,Bg),rw(4,Ue),rw(5,Rc),rw(6,cue)],Ig);const wC="9_cutcopypaste",yze=su||document.queryCommandSupported("cut"),Nge=su||document.queryCommandSupported("copy"),wze=typeof navigator.clipboard>"u"||Lc?document.queryCommandSupported("paste"):!0;function _Y(o){return o.register(),o}const Sze=yze?_Y(new jS({id:"editor.action.clipboardCutAction",precondition:void 0,kbOpts:su?{primary:2102,win:{primary:2102,secondary:[1044]},weight:100}:void 0,menuOpts:[{menuId:qe.MenubarEditMenu,group:"2_ccp",title:v({key:"miCut",comment:["&& denotes a mnemonic"]},"Cu&&t"),order:1},{menuId:qe.EditorContext,group:wC,title:v("actions.clipboard.cutLabel","Cut"),when:B.writable,order:1},{menuId:qe.CommandPalette,group:"",title:v("actions.clipboard.cutLabel","Cut"),order:1},{menuId:qe.SimpleEditorContext,group:wC,title:v("actions.clipboard.cutLabel","Cut"),when:B.writable,order:1}]})):void 0,Lze=Nge?_Y(new jS({id:"editor.action.clipboardCopyAction",precondition:void 0,kbOpts:su?{primary:2081,win:{primary:2081,secondary:[2067]},weight:100}:void 0,menuOpts:[{menuId:qe.MenubarEditMenu,group:"2_ccp",title:v({key:"miCopy",comment:["&& denotes a mnemonic"]},"&&Copy"),order:2},{menuId:qe.EditorContext,group:wC,title:v("actions.clipboard.copyLabel","Copy"),order:2},{menuId:qe.CommandPalette,group:"",title:v("actions.clipboard.copyLabel","Copy"),order:1},{menuId:qe.SimpleEditorContext,group:wC,title:v("actions.clipboard.copyLabel","Copy"),order:2}]})):void 0;lo.appendMenuItem(qe.MenubarEditMenu,{submenu:qe.MenubarCopy,title:pt("copy as","Copy As"),group:"2_ccp",order:3});lo.appendMenuItem(qe.EditorContext,{submenu:qe.EditorContextCopy,title:pt("copy as","Copy As"),group:wC,order:3});lo.appendMenuItem(qe.EditorContext,{submenu:qe.EditorContextShare,title:pt("share","Share"),group:"11_share",order:-1,when:de.and(de.notEquals("resourceScheme","output"),B.editorTextFocus)});lo.appendMenuItem(qe.ExplorerContext,{submenu:qe.ExplorerContextShare,title:pt("share","Share"),group:"11_share",order:-1});const c9=wze?_Y(new jS({id:"editor.action.clipboardPasteAction",precondition:void 0,kbOpts:su?{primary:2100,win:{primary:2100,secondary:[1043]},linux:{primary:2100,secondary:[1043]},weight:100}:void 0,menuOpts:[{menuId:qe.MenubarEditMenu,group:"2_ccp",title:v({key:"miPaste",comment:["&& denotes a mnemonic"]},"&&Paste"),order:4},{menuId:qe.EditorContext,group:wC,title:v("actions.clipboard.pasteLabel","Paste"),when:B.writable,order:4},{menuId:qe.CommandPalette,group:"",title:v("actions.clipboard.pasteLabel","Paste"),order:1},{menuId:qe.SimpleEditorContext,group:wC,title:v("actions.clipboard.pasteLabel","Paste"),when:B.writable,order:4}]})):void 0;class xze extends Ve{constructor(){super({id:"editor.action.clipboardCopyWithSyntaxHighlightingAction",label:v("actions.clipboard.copyWithSyntaxHighlightingLabel","Copy With Syntax Highlighting"),alias:"Copy With Syntax Highlighting",precondition:void 0,kbOpts:{kbExpr:B.textInputFocus,primary:0,weight:100}})}run(e,t){!t.hasModel()||!t.getOption(37)&&t.getSelection().isEmpty()||(zz.forceCopyWithSyntaxHighlighting=!0,t.focus(),t.getContainerDomNode().ownerDocument.execCommand("copy"),zz.forceCopyWithSyntaxHighlighting=!1)}}function Rge(o,e){o&&(o.addImplementation(1e4,"code-editor",(t,i)=>{const n=t.get(hi).getFocusedCodeEditor();if(n&&n.hasTextFocus()){const s=n.getOption(37),r=n.getSelection();return r&&r.isEmpty()&&!s||n.getContainerDomNode().ownerDocument.execCommand(e),!0}return!1}),o.addImplementation(0,"generic-dom",(t,i)=>(US().execCommand(e),!0)))}Rge(Sze,"cut");Rge(Lze,"copy");c9&&(c9.addImplementation(1e4,"code-editor",(o,e)=>{var s;const t=o.get(hi),i=o.get(Bg),n=t.getFocusedCodeEditor();return n&&n.hasTextFocus()?n.getContainerDomNode().ownerDocument.execCommand("paste")?((s=Ig.get(n))==null?void 0:s.finishedPaste())??Promise.resolve():NC?(async()=>{const a=await i.readText();if(a!==""){const l=tE.INSTANCE.get(a);let c=!1,u=null,f=null;l&&(c=n.getOption(37)&&!!l.isFromEmptySelection,u=typeof l.multicursorText<"u"?l.multicursorText:null,f=l.mode),n.trigger("keyboard","paste",{text:a,pasteOnNewLine:c,multicursorText:u,mode:f})}})():!0:!1}),c9.addImplementation(0,"generic-dom",(o,e)=>(US().execCommand("paste"),!0)));Nge&&be(xze);const _n=new class{constructor(){this.QuickFix=new Dn("quickfix"),this.Refactor=new Dn("refactor"),this.RefactorExtract=this.Refactor.append("extract"),this.RefactorInline=this.Refactor.append("inline"),this.RefactorMove=this.Refactor.append("move"),this.RefactorRewrite=this.Refactor.append("rewrite"),this.Notebook=new Dn("notebook"),this.Source=new Dn("source"),this.SourceOrganizeImports=this.Source.append("organizeImports"),this.SourceFixAll=this.Source.append("fixAll"),this.SurroundWith=this.Refactor.append("surround")}};var ll;(function(o){o.Refactor="refactor",o.RefactorPreview="refactor preview",o.Lightbulb="lightbulb",o.Default="other (default)",o.SourceAction="source action",o.QuickFix="quick fix action",o.FixAll="fix all",o.OrganizeImports="organize imports",o.AutoFix="auto fix",o.QuickFixHover="quick fix hover window",o.OnSave="save participants",o.ProblemsView="problems view"})(ll||(ll={}));function kze(o,e){return!(o.include&&!o.include.intersects(e)||o.excludes&&o.excludes.some(t=>Mge(e,t,o.include))||!o.includeSourceActions&&_n.Source.contains(e))}function Dze(o,e){const t=e.kind?new Dn(e.kind):void 0;return!(o.include&&(!t||!o.include.contains(t))||o.excludes&&t&&o.excludes.some(i=>Mge(t,i,o.include))||!o.includeSourceActions&&t&&_n.Source.contains(t)||o.onlyIncludePreferredActions&&!e.isPreferred)}function Mge(o,e,t){return!(!e.contains(o)||t&&e.contains(t))}class yh{static fromUser(e,t){return!e||typeof e!="object"?new yh(t.kind,t.apply,!1):new yh(yh.getKindFromUser(e,t.kind),yh.getApplyFromUser(e,t.apply),yh.getPreferredUser(e))}static getApplyFromUser(e,t){switch(typeof e.apply=="string"?e.apply.toLowerCase():""){case"first":return"first";case"never":return"never";case"ifsingle":return"ifSingle";default:return t}}static getKindFromUser(e,t){return typeof e.kind=="string"?new Dn(e.kind):t}static getPreferredUser(e){return typeof e.preferred=="boolean"?e.preferred:!1}constructor(e,t,i){this.kind=e,this.apply=t,this.preferred=i}}class Eze{constructor(e,t,i){this.action=e,this.provider=t,this.highlightRange=i}async resolve(e){var t;if((t=this.provider)!=null&&t.resolveCodeAction&&!this.action.edit){let i;try{i=await this.provider.resolveCodeAction(this.action,e)}catch(n){rs(n)}i&&(this.action.edit=i.edit)}return this}}const Age="editor.action.codeAction",vY="editor.action.quickFix",Pge="editor.action.autoFix",Oge="editor.action.refactor",Fge="editor.action.sourceAction",BU="editor.action.organizeImports",WU="editor.action.fixAll";class Nk extends X{static codeActionsPreferredComparator(e,t){return e.isPreferred&&!t.isPreferred?-1:!e.isPreferred&&t.isPreferred?1:0}static codeActionsComparator({action:e},{action:t}){return e.isAI&&!t.isAI?1:!e.isAI&&t.isAI?-1:wr(e.diagnostics)?wr(t.diagnostics)?Nk.codeActionsPreferredComparator(e,t):-1:wr(t.diagnostics)?1:Nk.codeActionsPreferredComparator(e,t)}constructor(e,t,i){super(),this.documentation=t,this._register(i),this.allActions=[...e].sort(Nk.codeActionsComparator),this.validActions=this.allActions.filter(({action:n})=>!n.disabled)}get hasAutoFix(){return this.validActions.some(({action:e})=>!!e.kind&&_n.QuickFix.contains(new Dn(e.kind))&&!!e.isPreferred)}get hasAIFix(){return this.validActions.some(({action:e})=>!!e.isAI)}get allAIFixes(){return this.validActions.every(({action:e})=>!!e.isAI)}}const mre={actions:[],documentation:void 0};async function $w(o,e,t,i,n,s){var b;const r=i.filter||{},a={...r,excludes:[...r.excludes||[],_n.Notebook]},l={only:(b=r.include)==null?void 0:b.value,trigger:i.type},c=new oY(e,s),u=i.type===2,f=Ize(o,e,u?a:r),g=new le,p=f.map(async y=>{try{n.report(y);const S=await y.provideCodeActions(e,t,l,c.token);if(S&&g.add(S),c.token.isCancellationRequested)return mre;const L=((S==null?void 0:S.actions)||[]).filter(k=>k&&Dze(r,k)),x=Nze(y,L,r.include);return{actions:L.map(k=>new Eze(k,y)),documentation:x}}catch(S){if(Tc(S))throw S;return rs(S),mre}}),_=o.onDidChange(()=>{const y=o.all(e);En(y,f)||c.cancel()});try{const y=await Promise.all(p),S=y.map(x=>x.actions).flat(),L=[...rd(y.map(x=>x.documentation)),...Tze(o,e,i,S)];return new Nk(S,L,g)}finally{_.dispose(),c.dispose()}}function Ize(o,e,t){return o.all(e).filter(i=>i.providedCodeActionKinds?i.providedCodeActionKinds.some(n=>kze(t,new Dn(n))):!0)}function*Tze(o,e,t,i){var n,s,r;if(e&&i.length)for(const a of o.all(e))a._getAdditionalMenuItems&&(yield*(r=a._getAdditionalMenuItems)==null?void 0:r.call(a,{trigger:t.type,only:(s=(n=t.filter)==null?void 0:n.include)==null?void 0:s.value},i.map(l=>l.action)))}function Nze(o,e,t){if(!o.documentation)return;const i=o.documentation.map(n=>({kind:new Dn(n.kind),command:n.command}));if(t){let n;for(const s of i)s.kind.contains(t)&&(n?n.kind.contains(s.kind)&&(n=s):n=s);if(n)return n==null?void 0:n.command}for(const n of e)if(n.kind){for(const s of i)if(s.kind.contains(new Dn(n.kind)))return s.command}}var Wv;(function(o){o.OnSave="onSave",o.FromProblemsView="fromProblemsView",o.FromCodeActions="fromCodeActions",o.FromAILightbulb="fromAILightbulb"})(Wv||(Wv={}));async function Rze(o,e,t,i,n=Mt.None){var c;const s=o.get(rI),r=o.get(nn),a=o.get(tr),l=o.get(fs);if(a.publicLog2("codeAction.applyCodeAction",{codeActionTitle:e.action.title,codeActionKind:e.action.kind,codeActionIsPreferred:!!e.action.isPreferred,reason:t}),await e.resolve(n),!n.isCancellationRequested&&!((c=e.action.edit)!=null&&c.edits.length&&!(await s.apply(e.action.edit,{editor:i==null?void 0:i.editor,label:e.action.title,quotableLabel:e.action.title,code:"undoredo.codeAction",respectAutoSaveConfig:t!==Wv.OnSave,showPreview:i==null?void 0:i.preview})).isApplied)&&e.action.command)try{await r.executeCommand(e.action.command.id,...e.action.command.arguments||[])}catch(u){const f=Mze(u);l.error(typeof f=="string"?f:v("applyCodeActionFailed","An unknown error occurred while applying the code action"))}}function Mze(o){return typeof o=="string"?o:o instanceof Error&&typeof o.message=="string"?o.message:void 0}ii.registerCommand("_executeCodeActionProvider",async function(o,e,t,i,n){if(!(e instanceof st))throw yc();const{codeActionProvider:s}=o.get(Ue),r=o.get(un).getModel(e);if(!r)throw yc();const a=Ke.isISelection(t)?Ke.liftSelection(t):M.isIRange(t)?r.validateRange(t):void 0;if(!a)throw yc();const l=typeof i=="string"?new Dn(i):void 0,c=await $w(s,r,a,{type:1,triggerAction:ll.Default,filter:{includeSourceActions:!0,include:l}},iu.None,Mt.None),u=[],f=Math.min(c.validActions.length,typeof n=="number"?n:0);for(let g=0;g<f;g++)u.push(c.validActions[g].resolve(Mt.None));try{return await Promise.all(u),c.validActions.map(g=>g.action)}finally{setTimeout(()=>c.dispose(),100)}});var Aze=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Pze=function(o,e){return function(t,i){e(t,i,o)}},HU,bb;let VU=(bb=class{constructor(e){this.keybindingService=e}getResolver(){const e=new fu(()=>this.keybindingService.getKeybindings().filter(t=>HU.codeActionCommands.indexOf(t.command)>=0).filter(t=>t.resolvedKeybinding).map(t=>{let i=t.commandArgs;return t.command===BU?i={kind:_n.SourceOrganizeImports.value}:t.command===WU&&(i={kind:_n.SourceFixAll.value}),{resolvedKeybinding:t.resolvedKeybinding,...yh.fromUser(i,{kind:Dn.None,apply:"never"})}}));return t=>{if(t.kind){const i=this.bestKeybindingForCodeAction(t,e.value);return i==null?void 0:i.resolvedKeybinding}}}bestKeybindingForCodeAction(e,t){if(!e.kind)return;const i=new Dn(e.kind);return t.filter(n=>n.kind.contains(i)).filter(n=>n.preferred?e.isPreferred:!0).reduceRight((n,s)=>n?n.kind.contains(s.kind)?s:n:s,void 0)}},HU=bb,bb.codeActionCommands=[Oge,Age,Fge,BU,WU],bb);VU=HU=Aze([Pze(0,Di)],VU);W("symbolIcon.arrayForeground",zt,v("symbolIcon.arrayForeground","The foreground color for array symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));W("symbolIcon.booleanForeground",zt,v("symbolIcon.booleanForeground","The foreground color for boolean symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));W("symbolIcon.classForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},v("symbolIcon.classForeground","The foreground color for class symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));W("symbolIcon.colorForeground",zt,v("symbolIcon.colorForeground","The foreground color for color symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));W("symbolIcon.constantForeground",zt,v("symbolIcon.constantForeground","The foreground color for constant symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));W("symbolIcon.constructorForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},v("symbolIcon.constructorForeground","The foreground color for constructor symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));W("symbolIcon.enumeratorForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},v("symbolIcon.enumeratorForeground","The foreground color for enumerator symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));W("symbolIcon.enumeratorMemberForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},v("symbolIcon.enumeratorMemberForeground","The foreground color for enumerator member symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));W("symbolIcon.eventForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},v("symbolIcon.eventForeground","The foreground color for event symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));W("symbolIcon.fieldForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},v("symbolIcon.fieldForeground","The foreground color for field symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));W("symbolIcon.fileForeground",zt,v("symbolIcon.fileForeground","The foreground color for file symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));W("symbolIcon.folderForeground",zt,v("symbolIcon.folderForeground","The foreground color for folder symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));W("symbolIcon.functionForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},v("symbolIcon.functionForeground","The foreground color for function symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));W("symbolIcon.interfaceForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},v("symbolIcon.interfaceForeground","The foreground color for interface symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));W("symbolIcon.keyForeground",zt,v("symbolIcon.keyForeground","The foreground color for key symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));W("symbolIcon.keywordForeground",zt,v("symbolIcon.keywordForeground","The foreground color for keyword symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));W("symbolIcon.methodForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},v("symbolIcon.methodForeground","The foreground color for method symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));W("symbolIcon.moduleForeground",zt,v("symbolIcon.moduleForeground","The foreground color for module symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));W("symbolIcon.namespaceForeground",zt,v("symbolIcon.namespaceForeground","The foreground color for namespace symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));W("symbolIcon.nullForeground",zt,v("symbolIcon.nullForeground","The foreground color for null symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));W("symbolIcon.numberForeground",zt,v("symbolIcon.numberForeground","The foreground color for number symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));W("symbolIcon.objectForeground",zt,v("symbolIcon.objectForeground","The foreground color for object symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));W("symbolIcon.operatorForeground",zt,v("symbolIcon.operatorForeground","The foreground color for operator symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));W("symbolIcon.packageForeground",zt,v("symbolIcon.packageForeground","The foreground color for package symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));W("symbolIcon.propertyForeground",zt,v("symbolIcon.propertyForeground","The foreground color for property symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));W("symbolIcon.referenceForeground",zt,v("symbolIcon.referenceForeground","The foreground color for reference symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));W("symbolIcon.snippetForeground",zt,v("symbolIcon.snippetForeground","The foreground color for snippet symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));W("symbolIcon.stringForeground",zt,v("symbolIcon.stringForeground","The foreground color for string symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));W("symbolIcon.structForeground",zt,v("symbolIcon.structForeground","The foreground color for struct symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));W("symbolIcon.textForeground",zt,v("symbolIcon.textForeground","The foreground color for text symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));W("symbolIcon.typeParameterForeground",zt,v("symbolIcon.typeParameterForeground","The foreground color for type parameter symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));W("symbolIcon.unitForeground",zt,v("symbolIcon.unitForeground","The foreground color for unit symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));W("symbolIcon.variableForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},v("symbolIcon.variableForeground","The foreground color for variable symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));const Bge=Object.freeze({kind:Dn.Empty,title:v("codeAction.widget.id.more","More Actions...")}),Oze=Object.freeze([{kind:_n.QuickFix,title:v("codeAction.widget.id.quickfix","Quick Fix")},{kind:_n.RefactorExtract,title:v("codeAction.widget.id.extract","Extract"),icon:Se.wrench},{kind:_n.RefactorInline,title:v("codeAction.widget.id.inline","Inline"),icon:Se.wrench},{kind:_n.RefactorRewrite,title:v("codeAction.widget.id.convert","Rewrite"),icon:Se.wrench},{kind:_n.RefactorMove,title:v("codeAction.widget.id.move","Move"),icon:Se.wrench},{kind:_n.SurroundWith,title:v("codeAction.widget.id.surround","Surround With"),icon:Se.surroundWith},{kind:_n.Source,title:v("codeAction.widget.id.source","Source Action"),icon:Se.symbolFile},Bge]);function Fze(o,e,t){if(!e)return o.map(s=>{var r;return{kind:"action",item:s,group:Bge,disabled:!!s.action.disabled,label:s.action.disabled||s.action.title,canPreview:!!((r=s.action.edit)!=null&&r.edits.length)}});const i=Oze.map(s=>({group:s,actions:[]}));for(const s of o){const r=s.action.kind?new Dn(s.action.kind):Dn.None;for(const a of i)if(a.group.kind.contains(r)){a.actions.push(s);break}}const n=[];for(const s of i)if(s.actions.length){n.push({kind:"header",group:s.group});for(const r of s.actions){const a=s.group;n.push({kind:"action",item:r,group:r.action.isAI?{title:a.title,kind:a.kind,icon:Se.sparkle}:a,label:r.action.title,disabled:!!r.action.disabled,keybinding:t(r.action)})}}return n}var Bze=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Wze=function(o,e){return function(t,i){e(t,i,o)}},Cw;const _re=hn("gutter-lightbulb",Se.lightBulb,v("gutterLightbulbWidget","Icon which spawns code actions menu from the gutter when there is no space in the editor.")),vre=hn("gutter-lightbulb-auto-fix",Se.lightbulbAutofix,v("gutterLightbulbAutoFixWidget","Icon which spawns code actions menu from the gutter when there is no space in the editor and a quick fix is available.")),bre=hn("gutter-lightbulb-sparkle",Se.lightbulbSparkle,v("gutterLightbulbAIFixWidget","Icon which spawns code actions menu from the gutter when there is no space in the editor and an AI fix is available.")),Cre=hn("gutter-lightbulb-aifix-auto-fix",Se.lightbulbSparkleAutofix,v("gutterLightbulbAIFixAutoFixWidget","Icon which spawns code actions menu from the gutter when there is no space in the editor and an AI fix and a quick fix is available.")),yre=hn("gutter-lightbulb-sparkle-filled",Se.sparkleFilled,v("gutterLightbulbSparkleFilledWidget","Icon which spawns code actions menu from the gutter when there is no space in the editor and an AI fix and a quick fix is available."));var Wd;(function(o){o.Hidden={type:0};class e{constructor(i,n,s,r){this.actions=i,this.trigger=n,this.editorPosition=s,this.widgetPosition=r,this.type=1}}o.Showing=e})(Wd||(Wd={}));var dg;let pE=(dg=class extends X{constructor(e,t){super(),this._editor=e,this._keybindingService=t,this._onClick=this._register(new Y),this.onClick=this._onClick.event,this._state=Wd.Hidden,this._gutterState=Wd.Hidden,this._iconClasses=[],this.lightbulbClasses=["codicon-"+_re.id,"codicon-"+Cre.id,"codicon-"+vre.id,"codicon-"+bre.id,"codicon-"+yre.id],this.gutterDecoration=Cw.GUTTER_DECORATION,this._domNode=xe("div.lightBulbWidget"),this._domNode.role="listbox",this._register(Jo.ignoreTarget(this._domNode)),this._editor.addContentWidget(this),this._register(this._editor.onDidChangeModelContent(i=>{const n=this._editor.getModel();(this.state.type!==1||!n||this.state.editorPosition.lineNumber>=n.getLineCount())&&this.hide(),(this.gutterState.type!==1||!n||this.gutterState.editorPosition.lineNumber>=n.getLineCount())&&this.gutterHide()})),this._register($De(this._domNode,i=>{if(this.state.type!==1)return;this._editor.focus(),i.preventDefault();const{top:n,height:s}=os(this._domNode),r=this._editor.getOption(67);let a=Math.floor(r/3);this.state.widgetPosition.position!==null&&this.state.widgetPosition.position.lineNumber<this.state.editorPosition.lineNumber&&(a+=r),this._onClick.fire({x:i.posx,y:n+s+a,actions:this.state.actions,trigger:this.state.trigger})})),this._register(se(this._domNode,"mouseenter",i=>{(i.buttons&1)===1&&this.hide()})),this._register(Ee.runAndSubscribe(this._keybindingService.onDidUpdateKeybindings,()=>{var i,n;this._preferredKbLabel=((i=this._keybindingService.lookupKeybinding(Pge))==null?void 0:i.getLabel())??void 0,this._quickFixKbLabel=((n=this._keybindingService.lookupKeybinding(vY))==null?void 0:n.getLabel())??void 0,this._updateLightBulbTitleAndIcon()})),this._register(this._editor.onMouseDown(async i=>{if(!i.target.element||!this.lightbulbClasses.some(l=>i.target.element&&i.target.element.classList.contains(l))||this.gutterState.type!==1)return;this._editor.focus();const{top:n,height:s}=os(i.target.element),r=this._editor.getOption(67);let a=Math.floor(r/3);this.gutterState.widgetPosition.position!==null&&this.gutterState.widgetPosition.position.lineNumber<this.gutterState.editorPosition.lineNumber&&(a+=r),this._onClick.fire({x:i.event.posx,y:n+s+a,actions:this.gutterState.actions,trigger:this.gutterState.trigger})}))}dispose(){super.dispose(),this._editor.removeContentWidget(this),this._gutterDecorationID&&this._removeGutterDecoration(this._gutterDecorationID)}getId(){return"LightBulbWidget"}getDomNode(){return this._domNode}getPosition(){return this._state.type===1?this._state.widgetPosition:null}update(e,t,i){if(e.validActions.length<=0)return this.gutterHide(),this.hide();if(!this._editor.hasTextFocus())return this.gutterHide(),this.hide();if(!this._editor.getOptions().get(65).enabled)return this.gutterHide(),this.hide();const r=this._editor.getModel();if(!r)return this.gutterHide(),this.hide();const{lineNumber:a,column:l}=r.validatePosition(i),c=r.getOptions().tabSize,u=this._editor.getOptions().get(50),f=r.getLineContent(a),g=A4(f,c),p=u.spaceWidth*g>22,_=E=>E>2&&this._editor.getTopForLineNumber(E)===this._editor.getTopForLineNumber(E-1),b=this._editor.getLineDecorations(a);let y=!1;if(b)for(const E of b){const N=E.options.glyphMarginClassName;if(N&&!this.lightbulbClasses.some(A=>N.includes(A))){y=!0;break}}let S=a,L=1;if(!p){const E=N=>{const A=r.getLineContent(N);return/^\s*$|^\s+/.test(A)||A.length<=L};if(a>1&&!_(a-1)){const N=r.getLineCount(),A=a===N,P=a>1&&E(a-1),H=!A&&E(a+1),ee=E(a),Q=!H&&!P;if(!H&&!P&&!y)return this.gutterState=new Wd.Showing(e,t,i,{position:{lineNumber:S,column:L},preference:Cw._posPref}),this.renderGutterLightbub(),this.hide();P||A||P&&!ee?S-=1:(H||Q&&ee)&&(S+=1)}else if(a===1&&(a===r.getLineCount()||!E(a+1)&&!E(a)))if(this.gutterState=new Wd.Showing(e,t,i,{position:{lineNumber:S,column:L},preference:Cw._posPref}),y)this.gutterHide();else return this.renderGutterLightbub(),this.hide();else if(a<r.getLineCount()&&!_(a+1))S+=1;else if(l*u.spaceWidth<22)return this.hide();L=/^\S\s*$/.test(r.getLineContent(S))?2:1}this.state=new Wd.Showing(e,t,i,{position:{lineNumber:S,column:L},preference:Cw._posPref}),this._gutterDecorationID&&(this._removeGutterDecoration(this._gutterDecorationID),this.gutterHide());const x=e.validActions,k=e.validActions[0].action.kind;if(x.length!==1||!k){this._editor.layoutContentWidget(this);return}this._editor.layoutContentWidget(this)}hide(){this.state!==Wd.Hidden&&(this.state=Wd.Hidden,this._editor.layoutContentWidget(this))}gutterHide(){this.gutterState!==Wd.Hidden&&(this._gutterDecorationID&&this._removeGutterDecoration(this._gutterDecorationID),this.gutterState=Wd.Hidden)}get state(){return this._state}set state(e){this._state=e,this._updateLightBulbTitleAndIcon()}get gutterState(){return this._gutterState}set gutterState(e){this._gutterState=e,this._updateGutterLightBulbTitleAndIcon()}_updateLightBulbTitleAndIcon(){if(this._domNode.classList.remove(...this._iconClasses),this._iconClasses=[],this.state.type!==1)return;let e,t=!1;this.state.actions.allAIFixes?(e=Se.sparkleFilled,this.state.actions.validActions.length===1&&(t=!0)):this.state.actions.hasAutoFix?this.state.actions.hasAIFix?e=Se.lightbulbSparkleAutofix:e=Se.lightbulbAutofix:this.state.actions.hasAIFix?e=Se.lightbulbSparkle:e=Se.lightBulb,this._updateLightbulbTitle(this.state.actions.hasAutoFix,t),this._iconClasses=ut.asClassNameArray(e),this._domNode.classList.add(...this._iconClasses)}_updateGutterLightBulbTitleAndIcon(){if(this.gutterState.type!==1)return;let e,t=!1;this.gutterState.actions.allAIFixes?(e=yre,this.gutterState.actions.validActions.length===1&&(t=!0)):this.gutterState.actions.hasAutoFix?this.gutterState.actions.hasAIFix?e=Cre:e=vre:this.gutterState.actions.hasAIFix?e=bre:e=_re,this._updateLightbulbTitle(this.gutterState.actions.hasAutoFix,t);const i=Dt.register({description:"codicon-gutter-lightbulb-decoration",glyphMarginClassName:ut.asClassName(e),glyphMargin:{position:cd.Left},stickiness:1});this.gutterDecoration=i}renderGutterLightbub(){const e=this._editor.getSelection();e&&(this._gutterDecorationID===void 0?this._addGutterDecoration(e.startLineNumber):this._updateGutterDecoration(this._gutterDecorationID,e.startLineNumber))}_addGutterDecoration(e){this._editor.changeDecorations(t=>{this._gutterDecorationID=t.addDecoration(new M(e,0,e,0),this.gutterDecoration)})}_removeGutterDecoration(e){this._editor.changeDecorations(t=>{t.removeDecoration(e),this._gutterDecorationID=void 0})}_updateGutterDecoration(e,t){this._editor.changeDecorations(i=>{i.changeDecoration(e,new M(t,0,t,0)),i.changeDecorationOptions(e,this.gutterDecoration)})}_updateLightbulbTitle(e,t){this.state.type===1&&(t?this.title=v("codeActionAutoRun","Run: {0}",this.state.actions.validActions[0].action.title):e&&this._preferredKbLabel?this.title=v("preferredcodeActionWithKb","Show Code Actions. Preferred Quick Fix Available ({0})",this._preferredKbLabel):!e&&this._quickFixKbLabel?this.title=v("codeActionWithKb","Show Code Actions ({0})",this._quickFixKbLabel):e||(this.title=v("codeAction","Show Code Actions")))}set title(e){this._domNode.title=e}},Cw=dg,dg.GUTTER_DECORATION=Dt.register({description:"codicon-gutter-lightbulb-decoration",glyphMarginClassName:ut.asClassName(Se.lightBulb),glyphMargin:{position:cd.Left},stickiness:1}),dg.ID="editor.contrib.lightbulbWidget",dg._posPref=[0],dg);pE=Cw=Bze([Wze(1,Di)],pE);var Wge=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},zU=function(o,e){return function(t,i){e(t,i,o)}};const Hge="acceptSelectedCodeAction",Vge="previewSelectedCodeAction";class Hze{get templateId(){return"header"}renderTemplate(e){e.classList.add("group-header");const t=document.createElement("span");return e.append(t),{container:e,text:t}}renderElement(e,t,i){var n;i.text.textContent=((n=e.group)==null?void 0:n.title)??""}disposeTemplate(e){}}let UU=class{get templateId(){return"action"}constructor(e,t){this._supportsPreview=e,this._keybindingService=t}renderTemplate(e){e.classList.add(this.templateId);const t=document.createElement("div");t.className="icon",e.append(t);const i=document.createElement("span");i.className="title",e.append(i);const n=new n0(e,Ja);return{container:e,icon:t,text:i,keybinding:n}}renderElement(e,t,i){var r,a,l;if((r=e.group)!=null&&r.icon?(i.icon.className=ut.asClassName(e.group.icon),e.group.icon.color&&(i.icon.style.color=He(e.group.icon.color.id))):(i.icon.className=ut.asClassName(Se.lightBulb),i.icon.style.color="var(--vscode-editorLightBulb-foreground)"),!e.item||!e.label)return;i.text.textContent=zge(e.label),i.keybinding.set(e.keybinding),oEe(!!e.keybinding,i.keybinding.element);const n=(a=this._keybindingService.lookupKeybinding(Hge))==null?void 0:a.getLabel(),s=(l=this._keybindingService.lookupKeybinding(Vge))==null?void 0:l.getLabel();i.container.classList.toggle("option-disabled",e.disabled),e.disabled?i.container.title=e.label:n&&s?this._supportsPreview&&e.canPreview?i.container.title=v({key:"label-preview",comment:['placeholders are keybindings, e.g "F2 to Apply, Shift+F2 to Preview"']},"{0} to Apply, {1} to Preview",n,s):i.container.title=v({key:"label",comment:['placeholder is a keybinding, e.g "F2 to Apply"']},"{0} to Apply",n):i.container.title=""}disposeTemplate(e){e.keybinding.dispose()}};UU=Wge([zU(1,Di)],UU);class Vze extends UIEvent{constructor(){super("acceptSelectedAction")}}class wre extends UIEvent{constructor(){super("previewSelectedAction")}}function zze(o){if(o.kind==="action")return o.label}let $U=class extends X{constructor(e,t,i,n,s,r){super(),this._delegate=n,this._contextViewService=s,this._keybindingService=r,this._actionLineHeight=24,this._headerLineHeight=26,this.cts=this._register(new An),this.domNode=document.createElement("div"),this.domNode.classList.add("actionList");const a={getHeight:l=>l.kind==="header"?this._headerLineHeight:this._actionLineHeight,getTemplateId:l=>l.kind};this._list=this._register(new Xl(e,this.domNode,a,[new UU(t,this._keybindingService),new Hze],{keyboardSupport:!1,typeNavigationEnabled:!0,keyboardNavigationLabelProvider:{getKeyboardNavigationLabel:zze},accessibilityProvider:{getAriaLabel:l=>{if(l.kind==="action"){let c=l.label?zge(l==null?void 0:l.label):"";return l.disabled&&(c=v({key:"customQuickFixWidget.labels",comment:["Action widget labels for accessibility."]},"{0}, Disabled Reason: {1}",c,l.disabled)),c}return null},getWidgetAriaLabel:()=>v({key:"customQuickFixWidget",comment:["An action widget option"]},"Action Widget"),getRole:l=>l.kind==="action"?"option":"separator",getWidgetRole:()=>"listbox"}})),this._list.style(OC),this._register(this._list.onMouseClick(l=>this.onListClick(l))),this._register(this._list.onMouseOver(l=>this.onListHover(l))),this._register(this._list.onDidChangeFocus(()=>this.onFocus())),this._register(this._list.onDidChangeSelection(l=>this.onListSelection(l))),this._allMenuItems=i,this._list.splice(0,this._list.length,this._allMenuItems),this._list.length&&this.focusNext()}focusCondition(e){return!e.disabled&&e.kind==="action"}hide(e){this._delegate.onHide(e),this.cts.cancel(),this._contextViewService.hideContextView()}layout(e){const t=this._allMenuItems.filter(l=>l.kind==="header").length,n=this._allMenuItems.length*this._actionLineHeight+t*this._headerLineHeight-t*this._actionLineHeight;this._list.layout(n);let s=e;if(this._allMenuItems.length>=50)s=380;else{const l=this._allMenuItems.map((c,u)=>{const f=this.domNode.ownerDocument.getElementById(this._list.getElementID(u));if(f){f.style.width="auto";const g=f.getBoundingClientRect().width;return f.style.width="",g}return 0});s=Math.max(...l,e)}const a=Math.min(n,this.domNode.ownerDocument.body.clientHeight*.7);return this._list.layout(a,s),this.domNode.style.height=`${a}px`,this._list.domFocus(),s}focusPrevious(){this._list.focusPrevious(1,!0,void 0,this.focusCondition)}focusNext(){this._list.focusNext(1,!0,void 0,this.focusCondition)}acceptSelected(e){const t=this._list.getFocus();if(t.length===0)return;const i=t[0],n=this._list.element(i);if(!this.focusCondition(n))return;const s=e?new wre:new Vze;this._list.setSelection([i],s)}onListSelection(e){if(!e.elements.length)return;const t=e.elements[0];t.item&&this.focusCondition(t)?this._delegate.onSelect(t.item,e.browserEvent instanceof wre):this._list.setSelection([])}onFocus(){var n,s;const e=this._list.getFocus();if(e.length===0)return;const t=e[0],i=this._list.element(t);(s=(n=this._delegate).onFocus)==null||s.call(n,i.item)}async onListHover(e){const t=e.element;if(t&&t.item&&this.focusCondition(t)){if(this._delegate.onHover&&!t.disabled&&t.kind==="action"){const i=await this._delegate.onHover(t.item,this.cts.token);t.canPreview=i?i.canPreview:void 0}e.index&&this._list.splice(e.index,1,[t])}this._list.setFocus(typeof e.index=="number"?[e.index]:[])}onListClick(e){e.element&&this.focusCondition(e.element)&&this._list.setFocus([])}};$U=Wge([zU(4,Pg),zU(5,Di)],$U);function zge(o){return o.replace(/\r\n|\r|\n/g," ")}var Uze=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},d9=function(o,e){return function(t,i){e(t,i,o)}};W("actionBar.toggledBackground",iI,v("actionBar.toggledBackground","Background color for toggled action items in action bar."));const SC={Visible:new Pe("codeActionMenuVisible",!1,v("codeActionMenuVisible","Whether the action widget list is visible"))},UC=Gt("actionWidgetService");let LC=class extends X{get isVisible(){return SC.Visible.getValue(this._contextKeyService)||!1}constructor(e,t,i){super(),this._contextViewService=e,this._contextKeyService=t,this._instantiationService=i,this._list=this._register(new Xs)}show(e,t,i,n,s,r,a){const l=SC.Visible.bindTo(this._contextKeyService),c=this._instantiationService.createInstance($U,e,t,i,n);this._contextViewService.showContextView({getAnchor:()=>s,render:u=>(l.set(!0),this._renderWidget(u,c,a??[])),onHide:u=>{l.reset(),this._onWidgetClosed(u)}},r,!1)}acceptSelected(e){var t;(t=this._list.value)==null||t.acceptSelected(e)}focusPrevious(){var e,t;(t=(e=this._list)==null?void 0:e.value)==null||t.focusPrevious()}focusNext(){var e,t;(t=(e=this._list)==null?void 0:e.value)==null||t.focusNext()}hide(e){var t;(t=this._list.value)==null||t.hide(e),this._list.clear()}_renderWidget(e,t,i){var p;const n=document.createElement("div");if(n.classList.add("action-widget"),e.appendChild(n),this._list.value=t,this._list.value)n.appendChild(this._list.value.domNode);else throw new Error("List has no value");const s=new le,r=document.createElement("div"),a=e.appendChild(r);a.classList.add("context-view-block"),s.add(se(a,Le.MOUSE_DOWN,_=>_.stopPropagation()));const l=document.createElement("div"),c=e.appendChild(l);c.classList.add("context-view-pointerBlock"),s.add(se(c,Le.POINTER_MOVE,()=>c.remove())),s.add(se(c,Le.MOUSE_DOWN,()=>c.remove()));let u=0;if(i.length){const _=this._createActionBar(".action-widget-action-bar",i);_&&(n.appendChild(_.getContainer().parentElement),s.add(_),u=_.getContainer().offsetWidth)}const f=(p=this._list.value)==null?void 0:p.layout(u);n.style.width=`${f}px`;const g=s.add(pu(e));return s.add(g.onDidBlur(()=>this.hide(!0))),s}_createActionBar(e,t){if(!t.length)return;const i=xe(e),n=new zl(i);return n.push(t,{icon:!1,label:!0}),n}_onWidgetClosed(e){var t;(t=this._list.value)==null||t.hide(e)}};LC=Uze([d9(0,Pg),d9(1,ht),d9(2,nt)],LC);ei(UC,LC,1);const xI=1100;Xi(class extends na{constructor(){super({id:"hideCodeActionWidget",title:pt("hideCodeActionWidget.title","Hide action widget"),precondition:SC.Visible,keybinding:{weight:xI,primary:9,secondary:[1033]}})}run(o){o.get(UC).hide(!0)}});Xi(class extends na{constructor(){super({id:"selectPrevCodeAction",title:pt("selectPrevCodeAction.title","Select previous action"),precondition:SC.Visible,keybinding:{weight:xI,primary:16,secondary:[2064],mac:{primary:16,secondary:[2064,302]}}})}run(o){const e=o.get(UC);e instanceof LC&&e.focusPrevious()}});Xi(class extends na{constructor(){super({id:"selectNextCodeAction",title:pt("selectNextCodeAction.title","Select next action"),precondition:SC.Visible,keybinding:{weight:xI,primary:18,secondary:[2066],mac:{primary:18,secondary:[2066,300]}}})}run(o){const e=o.get(UC);e instanceof LC&&e.focusNext()}});Xi(class extends na{constructor(){super({id:Hge,title:pt("acceptSelected.title","Accept selected action"),precondition:SC.Visible,keybinding:{weight:xI,primary:3,secondary:[2137]}})}run(o){const e=o.get(UC);e instanceof LC&&e.acceptSelected()}});Xi(class extends na{constructor(){super({id:Vge,title:pt("previewSelected.title","Preview selected action"),precondition:SC.Visible,keybinding:{weight:xI,primary:2051}})}run(o){const e=o.get(UC);e instanceof LC&&e.acceptSelected(!0)}});const Uge=new Pe("supportedCodeAction",""),Sre="_typescript.applyFixAllCodeAction";class $ze extends X{constructor(e,t,i,n=250){super(),this._editor=e,this._markerService=t,this._signalChange=i,this._delay=n,this._autoTriggerTimer=this._register(new gd),this._register(this._markerService.onMarkerChanged(s=>this._onMarkerChanges(s))),this._register(this._editor.onDidChangeCursorPosition(()=>this._tryAutoTrigger()))}trigger(e){const t=this._getRangeOfSelectionUnlessWhitespaceEnclosed(e);this._signalChange(t?{trigger:e,selection:t}:void 0)}_onMarkerChanges(e){const t=this._editor.getModel();t&&e.some(i=>AD(i,t.uri))&&this._tryAutoTrigger()}_tryAutoTrigger(){this._autoTriggerTimer.cancelAndSet(()=>{this.trigger({type:2,triggerAction:ll.Default})},this._delay)}_getRangeOfSelectionUnlessWhitespaceEnclosed(e){if(!this._editor.hasModel())return;const t=this._editor.getSelection();if(e.type===1)return t;const i=this._editor.getOption(65).enabled;if(i!==Zc.Off){{if(i===Zc.On)return t;if(i===Zc.OnCode){if(!t.isEmpty())return t;const s=this._editor.getModel(),{lineNumber:r,column:a}=t.getPosition(),l=s.getLineContent(r);if(l.length===0)return;if(a===1){if(/\s/.test(l[0]))return}else if(a===s.getLineMaxColumn(r)){if(/\s/.test(l[l.length-1]))return}else if(/\s/.test(l[a-2])&&/\s/.test(l[a-1]))return}}return t}}}var xv;(function(o){o.Empty={type:0};class e{constructor(i,n,s){this.trigger=i,this.position=n,this._cancellablePromise=s,this.type=1,this.actions=s.catch(r=>{if(Tc(r))return $ge;throw r})}cancel(){this._cancellablePromise.cancel()}}o.Triggered=e})(xv||(xv={}));const $ge=Object.freeze({allActions:[],validActions:[],dispose:()=>{},documentation:[],hasAutoFix:!1,hasAIFix:!1,allAIFixes:!1});class jze extends X{constructor(e,t,i,n,s,r,a){super(),this._editor=e,this._registry=t,this._markerService=i,this._progressService=s,this._configurationService=r,this._telemetryService=a,this._codeActionOracle=this._register(new Xs),this._state=xv.Empty,this._onDidChangeState=this._register(new Y),this.onDidChangeState=this._onDidChangeState.event,this._disposed=!1,this._supportedCodeActions=Uge.bindTo(n),this._register(this._editor.onDidChangeModel(()=>this._update())),this._register(this._editor.onDidChangeModelLanguage(()=>this._update())),this._register(this._registry.onDidChange(()=>this._update())),this._register(this._editor.onDidChangeConfiguration(l=>{l.hasChanged(65)&&this._update()})),this._update()}dispose(){this._disposed||(this._disposed=!0,super.dispose(),this.setState(xv.Empty,!0))}_settingEnabledNearbyQuickfixes(){var t;const e=(t=this._editor)==null?void 0:t.getModel();return this._configurationService?this._configurationService.getValue("editor.codeActionWidget.includeNearbyQuickFixes",{resource:e==null?void 0:e.uri}):!1}_update(){if(this._disposed)return;this._codeActionOracle.value=void 0,this.setState(xv.Empty);const e=this._editor.getModel();if(e&&this._registry.has(e)&&!this._editor.getOption(92)){const t=this._registry.all(e).flatMap(i=>i.providedCodeActionKinds??[]);this._supportedCodeActions.set(t.join(" ")),this._codeActionOracle.value=new $ze(this._editor,this._markerService,i=>{var l;if(!i){this.setState(xv.Empty);return}const n=i.selection.getStartPosition(),s=Gs(async c=>{var u,f,g,p,_,b,y,S,L,x;if(this._settingEnabledNearbyQuickfixes()&&i.trigger.type===1&&(i.trigger.triggerAction===ll.QuickFix||(f=(u=i.trigger.filter)==null?void 0:u.include)!=null&&f.contains(_n.QuickFix))){const k=await $w(this._registry,e,i.selection,i.trigger,iu.None,c),E=[...k.allActions];if(c.isCancellationRequested)return $ge;const N=(g=k.validActions)==null?void 0:g.some(P=>P.action.kind?_n.QuickFix.contains(new Dn(P.action.kind)):!1),A=this._markerService.read({resource:e.uri});if(N){for(const P of k.validActions)(_=(p=P.action.command)==null?void 0:p.arguments)!=null&&_.some(H=>typeof H=="string"&&H.includes(Sre))&&(P.action.diagnostics=[...A.filter(H=>H.relatedInformation)]);return{validActions:k.validActions,allActions:E,documentation:k.documentation,hasAutoFix:k.hasAutoFix,hasAIFix:k.hasAIFix,allAIFixes:k.allAIFixes,dispose:()=>{k.dispose()}}}else if(!N&&A.length>0){const P=i.selection.getPosition();let H=P,ee=Number.MAX_VALUE;const Q=[...k.validActions];for(const J of A){const Z=J.endColumn,he=J.endLineNumber,Ce=J.startLineNumber;if(he===P.lineNumber||Ce===P.lineNumber){H=new G(he,Z);const we={type:i.trigger.type,triggerAction:i.trigger.triggerAction,filter:{include:(b=i.trigger.filter)!=null&&b.include?(y=i.trigger.filter)==null?void 0:y.include:_n.QuickFix},autoApply:i.trigger.autoApply,context:{notAvailableMessage:((S=i.trigger.context)==null?void 0:S.notAvailableMessage)||"",position:H}},me=new Ke(H.lineNumber,H.column,H.lineNumber,H.column),pe=await $w(this._registry,e,me,we,iu.None,c);if(pe.validActions.length!==0){for(const Fe of pe.validActions)(x=(L=Fe.action.command)==null?void 0:L.arguments)!=null&&x.some(Ye=>typeof Ye=="string"&&Ye.includes(Sre))&&(Fe.action.diagnostics=[...A.filter(Ye=>Ye.relatedInformation)]);k.allActions.length===0&&E.push(...pe.allActions),Math.abs(P.column-Z)<ee?Q.unshift(...pe.validActions):Q.push(...pe.validActions)}ee=Math.abs(P.column-Z)}}const te=Q.filter((J,Z,he)=>he.findIndex(Ce=>Ce.action.title===J.action.title)===Z);return te.sort((J,Z)=>J.action.isPreferred&&!Z.action.isPreferred?-1:!J.action.isPreferred&&Z.action.isPreferred||J.action.isAI&&!Z.action.isAI?1:!J.action.isAI&&Z.action.isAI?-1:0),{validActions:te,allActions:E,documentation:k.documentation,hasAutoFix:k.hasAutoFix,hasAIFix:k.hasAIFix,allAIFixes:k.allAIFixes,dispose:()=>{k.dispose()}}}}if(i.trigger.type===1){const k=new uo,E=await $w(this._registry,e,i.selection,i.trigger,iu.None,c);return this._telemetryService&&this._telemetryService.publicLog2("codeAction.invokedDurations",{codeActions:E.validActions.length,duration:k.elapsed()}),E}return $w(this._registry,e,i.selection,i.trigger,iu.None,c)});i.trigger.type===1&&((l=this._progressService)==null||l.showWhile(s,250));const r=new xv.Triggered(i.trigger,n,s);let a=!1;this._state.type===1&&(a=this._state.trigger.type===1&&r.type===1&&r.trigger.type===2&&this._state.position!==r.position),a?setTimeout(()=>{this.setState(r)},500):this.setState(r)},void 0),this._codeActionOracle.value.trigger({type:2,triggerAction:ll.Default})}else this._supportedCodeActions.reset()}trigger(e){var t;(t=this._codeActionOracle.value)==null||t.trigger(e)}setState(e,t){e!==this._state&&(this._state.type===1&&this._state.cancel(),this._state=e,!t&&!this._disposed&&this._onDidChangeState.fire(e))}}var qze=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Ku=function(o,e){return function(t,i){e(t,i,o)}},yw;const Kze="quickfix-edit-highlight";var _m;let xS=(_m=class extends X{static get(e){return e.getContribution(yw.ID)}constructor(e,t,i,n,s,r,a,l,c,u,f){super(),this._commandService=a,this._configurationService=l,this._actionWidgetService=c,this._instantiationService=u,this._telemetryService=f,this._activeCodeActions=this._register(new Xs),this._showDisabled=!1,this._disposed=!1,this._editor=e,this._model=this._register(new jze(this._editor,s.codeActionProvider,t,i,r,l,this._telemetryService)),this._register(this._model.onDidChangeState(g=>this.update(g))),this._lightBulbWidget=new fu(()=>{const g=this._editor.getContribution(pE.ID);return g&&this._register(g.onClick(p=>this.showCodeActionsFromLightbulb(p.actions,p))),g}),this._resolver=n.createInstance(VU),this._register(this._editor.onDidLayoutChange(()=>this._actionWidgetService.hide()))}dispose(){this._disposed=!0,super.dispose()}async showCodeActionsFromLightbulb(e,t){if(e.allAIFixes&&e.validActions.length===1){const i=e.validActions[0],n=i.action.command;n&&n.id==="inlineChat.start"&&n.arguments&&n.arguments.length>=1&&(n.arguments[0]={...n.arguments[0],autoSend:!1}),await this._applyCodeAction(i,!1,!1,Wv.FromAILightbulb);return}await this.showCodeActionList(e,t,{includeDisabledActions:!1,fromLightbulb:!0})}showCodeActions(e,t,i){return this.showCodeActionList(t,i,{includeDisabledActions:!1,fromLightbulb:!1})}manualTriggerAtCurrentPosition(e,t,i,n){var r;if(!this._editor.hasModel())return;(r=nl.get(this._editor))==null||r.closeMessage();const s=this._editor.getPosition();this._trigger({type:1,triggerAction:t,filter:i,autoApply:n,context:{notAvailableMessage:e,position:s}})}_trigger(e){return this._model.trigger(e)}async _applyCodeAction(e,t,i,n){try{await this._instantiationService.invokeFunction(Rze,e,n,{preview:i,editor:this._editor})}finally{t&&this._trigger({type:2,triggerAction:ll.QuickFix,filter:{}})}}hideLightBulbWidget(){var e,t;(e=this._lightBulbWidget.rawValue)==null||e.hide(),(t=this._lightBulbWidget.rawValue)==null||t.gutterHide()}async update(e){var n,s,r,a,l;if(e.type!==1){this.hideLightBulbWidget();return}let t;try{t=await e.actions}catch(c){wt(c);return}if(this._disposed)return;const i=this._editor.getSelection();if((i==null?void 0:i.startLineNumber)===e.position.lineNumber)if((n=this._lightBulbWidget.value)==null||n.update(t,e.trigger,e.position),e.trigger.type===1){if((s=e.trigger.filter)!=null&&s.include){const u=this.tryGetValidActionToApply(e.trigger,t);if(u){try{this.hideLightBulbWidget(),await this._applyCodeAction(u,!1,!1,Wv.FromCodeActions)}finally{t.dispose()}return}if(e.trigger.context){const f=this.getInvalidActionThatWouldHaveBeenApplied(e.trigger,t);if(f&&f.action.disabled){(r=nl.get(this._editor))==null||r.showMessage(f.action.disabled,e.trigger.context.position),t.dispose();return}}}const c=!!((a=e.trigger.filter)!=null&&a.include);if(e.trigger.context&&(!t.allActions.length||!c&&!t.validActions.length)){(l=nl.get(this._editor))==null||l.showMessage(e.trigger.context.notAvailableMessage,e.trigger.context.position),this._activeCodeActions.value=t,t.dispose();return}this._activeCodeActions.value=t,this.showCodeActionList(t,this.toCoords(e.position),{includeDisabledActions:c,fromLightbulb:!1})}else this._actionWidgetService.isVisible?t.dispose():this._activeCodeActions.value=t}getInvalidActionThatWouldHaveBeenApplied(e,t){if(t.allActions.length&&(e.autoApply==="first"&&t.validActions.length===0||e.autoApply==="ifSingle"&&t.allActions.length===1))return t.allActions.find(({action:i})=>i.disabled)}tryGetValidActionToApply(e,t){if(t.validActions.length&&(e.autoApply==="first"&&t.validActions.length>0||e.autoApply==="ifSingle"&&t.validActions.length===1))return t.validActions[0]}async showCodeActionList(e,t,i){const n=this._editor.createDecorationsCollection(),s=this._editor.getDomNode();if(!s)return;const r=i.includeDisabledActions&&(this._showDisabled||e.validActions.length===0)?e.allActions:e.validActions;if(!r.length)return;const a=G.isIPosition(t)?this.toCoords(t):t,l={onSelect:async(c,u)=>{this._applyCodeAction(c,!0,!!u,i.fromLightbulb?Wv.FromAILightbulb:Wv.FromCodeActions),this._actionWidgetService.hide(!1),n.clear()},onHide:c=>{var u;(u=this._editor)==null||u.focus(),n.clear()},onHover:async(c,u)=>{var p;if(u.isCancellationRequested)return;let f=!1;const g=c.action.kind;if(g){const _=new Dn(g);f=[_n.RefactorExtract,_n.RefactorInline,_n.RefactorRewrite,_n.RefactorMove,_n.Source].some(y=>y.contains(_))}return{canPreview:f||!!((p=c.action.edit)!=null&&p.edits.length)}},onFocus:c=>{var u,f;if(c&&c.action){const g=c.action.ranges,p=c.action.diagnostics;if(n.clear(),g&&g.length>0){const _=p&&(p==null?void 0:p.length)>1?p.map(b=>({range:b,options:yw.DECORATION})):g.map(b=>({range:b,options:yw.DECORATION}));n.set(_)}else if(p&&p.length>0){const _=p.map(y=>({range:y,options:yw.DECORATION}));n.set(_);const b=p[0];if(b.startLineNumber&&b.startColumn){const y=(f=(u=this._editor.getModel())==null?void 0:u.getWordAtPosition({lineNumber:b.startLineNumber,column:b.startColumn}))==null?void 0:f.word;Oh(v("editingNewSelection","Context: {0} at line {1} and column {2}.",y,b.startLineNumber,b.startColumn))}}}else n.clear()}};this._actionWidgetService.show("codeActionWidget",!0,Fze(r,this._shouldShowHeaders(),this._resolver.getResolver()),l,a,s,this._getActionBarActions(e,t,i))}toCoords(e){if(!this._editor.hasModel())return{x:0,y:0};this._editor.revealPosition(e,1),this._editor.render();const t=this._editor.getScrolledVisiblePosition(e),i=os(this._editor.getDomNode()),n=i.left+t.left,s=i.top+t.top+t.height;return{x:n,y:s}}_shouldShowHeaders(){var t;const e=(t=this._editor)==null?void 0:t.getModel();return this._configurationService.getValue("editor.codeActionWidget.showHeaders",{resource:e==null?void 0:e.uri})}_getActionBarActions(e,t,i){if(i.fromLightbulb)return[];const n=e.documentation.map(s=>({id:s.id,label:s.title,tooltip:s.tooltip??"",class:void 0,enabled:!0,run:()=>this._commandService.executeCommand(s.id,...s.arguments??[])}));return i.includeDisabledActions&&e.validActions.length>0&&e.allActions.length!==e.validActions.length&&n.push(this._showDisabled?{id:"hideMoreActions",label:v("hideMoreActions","Hide Disabled"),enabled:!0,tooltip:"",class:void 0,run:()=>(this._showDisabled=!1,this.showCodeActionList(e,t,i))}:{id:"showMoreActions",label:v("showMoreActions","Show Disabled"),enabled:!0,tooltip:"",class:void 0,run:()=>(this._showDisabled=!0,this.showCodeActionList(e,t,i))}),n}},yw=_m,_m.ID="editor.contrib.codeActionController",_m.DECORATION=Dt.register({description:"quickfix-highlight",className:Kze}),_m);xS=yw=qze([Ku(1,Kh),Ku(2,ht),Ku(3,nt),Ku(4,Ue),Ku(5,i_),Ku(6,nn),Ku(7,Ht),Ku(8,UC),Ku(9,nt),Ku(10,tr)],xS);Nc((o,e)=>{((n,s)=>{s&&e.addRule(`.monaco-editor ${n} { background-color: ${s}; }`)})(".quickfix-edit-highlight",o.getColor(ig));const i=o.getColor(Zp);i&&e.addRule(`.monaco-editor .quickfix-edit-highlight { border: 1px ${lu(o.type)?"dotted":"solid"} ${i}; box-sizing: border-box; }`)});function kI(o){return de.regex(Uge.keys()[0],new RegExp("(\\s|^)"+Ul(o.value)+"\\b"))}const bY={type:"object",defaultSnippets:[{body:{kind:""}}],properties:{kind:{type:"string",description:v("args.schema.kind","Kind of the code action to run.")},apply:{type:"string",description:v("args.schema.apply","Controls when the returned actions are applied."),default:"ifSingle",enum:["first","ifSingle","never"],enumDescriptions:[v("args.schema.apply.first","Always apply the first returned code action."),v("args.schema.apply.ifSingle","Apply the first returned code action if it is the only one."),v("args.schema.apply.never","Do not apply the returned code actions.")]},preferred:{type:"boolean",default:!1,description:v("args.schema.preferred","Controls if only preferred code actions should be returned.")}}};function $C(o,e,t,i,n=ll.Default){if(o.hasModel()){const s=xS.get(o);s==null||s.manualTriggerAtCurrentPosition(e,n,t,i)}}class Gze extends Ve{constructor(){super({id:vY,label:v("quickfix.trigger.label","Quick Fix..."),alias:"Quick Fix...",precondition:de.and(B.writable,B.hasCodeActionsProvider),kbOpts:{kbExpr:B.textInputFocus,primary:2137,weight:100}})}run(e,t){return $C(t,v("editor.action.quickFix.noneMessage","No code actions available"),void 0,void 0,ll.QuickFix)}}class Yze extends Bs{constructor(){super({id:Age,precondition:de.and(B.writable,B.hasCodeActionsProvider),metadata:{description:"Trigger a code action",args:[{name:"args",schema:bY}]}})}runEditorCommand(e,t,i){const n=yh.fromUser(i,{kind:Dn.Empty,apply:"ifSingle"});return $C(t,typeof(i==null?void 0:i.kind)=="string"?n.preferred?v("editor.action.codeAction.noneMessage.preferred.kind","No preferred code actions for '{0}' available",i.kind):v("editor.action.codeAction.noneMessage.kind","No code actions for '{0}' available",i.kind):n.preferred?v("editor.action.codeAction.noneMessage.preferred","No preferred code actions available"):v("editor.action.codeAction.noneMessage","No code actions available"),{include:n.kind,includeSourceActions:!0,onlyIncludePreferredActions:n.preferred},n.apply)}}class Zze extends Ve{constructor(){super({id:Oge,label:v("refactor.label","Refactor..."),alias:"Refactor...",precondition:de.and(B.writable,B.hasCodeActionsProvider),kbOpts:{kbExpr:B.textInputFocus,primary:3120,mac:{primary:1328},weight:100},contextMenuOpts:{group:"1_modification",order:2,when:de.and(B.writable,kI(_n.Refactor))},metadata:{description:"Refactor...",args:[{name:"args",schema:bY}]}})}run(e,t,i){const n=yh.fromUser(i,{kind:_n.Refactor,apply:"never"});return $C(t,typeof(i==null?void 0:i.kind)=="string"?n.preferred?v("editor.action.refactor.noneMessage.preferred.kind","No preferred refactorings for '{0}' available",i.kind):v("editor.action.refactor.noneMessage.kind","No refactorings for '{0}' available",i.kind):n.preferred?v("editor.action.refactor.noneMessage.preferred","No preferred refactorings available"):v("editor.action.refactor.noneMessage","No refactorings available"),{include:_n.Refactor.contains(n.kind)?n.kind:Dn.None,onlyIncludePreferredActions:n.preferred},n.apply,ll.Refactor)}}class Xze extends Ve{constructor(){super({id:Fge,label:v("source.label","Source Action..."),alias:"Source Action...",precondition:de.and(B.writable,B.hasCodeActionsProvider),contextMenuOpts:{group:"1_modification",order:2.1,when:de.and(B.writable,kI(_n.Source))},metadata:{description:"Source Action...",args:[{name:"args",schema:bY}]}})}run(e,t,i){const n=yh.fromUser(i,{kind:_n.Source,apply:"never"});return $C(t,typeof(i==null?void 0:i.kind)=="string"?n.preferred?v("editor.action.source.noneMessage.preferred.kind","No preferred source actions for '{0}' available",i.kind):v("editor.action.source.noneMessage.kind","No source actions for '{0}' available",i.kind):n.preferred?v("editor.action.source.noneMessage.preferred","No preferred source actions available"):v("editor.action.source.noneMessage","No source actions available"),{include:_n.Source.contains(n.kind)?n.kind:Dn.None,includeSourceActions:!0,onlyIncludePreferredActions:n.preferred},n.apply,ll.SourceAction)}}class Qze extends Ve{constructor(){super({id:BU,label:v("organizeImports.label","Organize Imports"),alias:"Organize Imports",precondition:de.and(B.writable,kI(_n.SourceOrganizeImports)),kbOpts:{kbExpr:B.textInputFocus,primary:1581,weight:100}})}run(e,t){return $C(t,v("editor.action.organize.noneMessage","No organize imports action available"),{include:_n.SourceOrganizeImports,includeSourceActions:!0},"ifSingle",ll.OrganizeImports)}}class Jze extends Ve{constructor(){super({id:WU,label:v("fixAll.label","Fix All"),alias:"Fix All",precondition:de.and(B.writable,kI(_n.SourceFixAll))})}run(e,t){return $C(t,v("fixAll.noneMessage","No fix all action available"),{include:_n.SourceFixAll,includeSourceActions:!0},"ifSingle",ll.FixAll)}}class eUe extends Ve{constructor(){super({id:Pge,label:v("autoFix.label","Auto Fix..."),alias:"Auto Fix...",precondition:de.and(B.writable,kI(_n.QuickFix)),kbOpts:{kbExpr:B.textInputFocus,primary:1625,mac:{primary:2649},weight:100}})}run(e,t){return $C(t,v("editor.action.autoFix.noneMessage","No auto fixes available"),{include:_n.QuickFix,onlyIncludePreferredActions:!0},"ifSingle",ll.AutoFix)}}oi(xS.ID,xS,3);oi(pE.ID,pE,4);be(Gze);be(Zze);be(Xze);be(Qze);be(eUe);be(Jze);Re(new Yze);Pn.as(pd.Configuration).registerConfiguration({...aI,properties:{"editor.codeActionWidget.showHeaders":{type:"boolean",scope:5,description:v("showCodeActionHeaders","Enable/disable showing group headers in the Code Action menu."),default:!0}}});Pn.as(pd.Configuration).registerConfiguration({...aI,properties:{"editor.codeActionWidget.includeNearbyQuickFixes":{type:"boolean",scope:5,description:v("includeNearbyQuickFixes","Enable/disable showing nearest Quick Fix within a line when not currently on a diagnostic."),default:!0}}});Pn.as(pd.Configuration).registerConfiguration({...aI,properties:{"editor.codeActions.triggerOnFocusChange":{type:"boolean",scope:5,markdownDescription:v("triggerOnFocusChange","Enable triggering {0} when {1} is set to {2}. Code Actions must be set to {3} to be triggered for window and focus changes.","`#editor.codeActionsOnSave#`","`#files.autoSave#`","`afterDelay`","`always`"),default:!1}}});class jU{constructor(){this.lenses=[],this._disposables=new le}dispose(){this._disposables.dispose()}get isDisposed(){return this._disposables.isDisposed}add(e,t){this._disposables.add(e);for(const i of e.lenses)this.lenses.push({symbol:i,provider:t})}}async function jge(o,e,t){const i=o.ordered(e),n=new Map,s=new jU,r=i.map(async(a,l)=>{n.set(a,l);try{const c=await Promise.resolve(a.provideCodeLenses(e,t));c&&s.add(c,a)}catch(c){rs(c)}});return await Promise.all(r),s.lenses=s.lenses.sort((a,l)=>a.symbol.range.startLineNumber<l.symbol.range.startLineNumber?-1:a.symbol.range.startLineNumber>l.symbol.range.startLineNumber?1:n.get(a.provider)<n.get(l.provider)?-1:n.get(a.provider)>n.get(l.provider)?1:a.symbol.range.startColumn<l.symbol.range.startColumn?-1:a.symbol.range.startColumn>l.symbol.range.startColumn?1:0),s}ii.registerCommand("_executeCodeLensProvider",function(o,...e){let[t,i]=e;ui(st.isUri(t)),ui(typeof i=="number"||!i);const{codeLensProvider:n}=o.get(Ue),s=o.get(un).getModel(t);if(!s)throw yc();const r=[],a=new le;return jge(n,s,Mt.None).then(l=>{a.add(l);const c=[];for(const u of l.lenses)i==null||u.symbol.command?r.push(u.symbol):i-- >0&&u.provider.resolveCodeLens&&c.push(Promise.resolve(u.provider.resolveCodeLens(s,u.symbol,Mt.None)).then(f=>r.push(f||u.symbol)));return Promise.all(c)}).then(()=>r).finally(()=>{setTimeout(()=>a.dispose(),100)})});var tUe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},iUe=function(o,e){return function(t,i){e(t,i,o)}};const qge=Gt("ICodeLensCache");class Lre{constructor(e,t){this.lineCount=e,this.data=t}}let qU=class{constructor(e){this._fakeProvider=new class{provideCodeLenses(){throw new Error("not supported")}},this._cache=new $h(20,.75);const t="codelens/cache";Rx(Vi,()=>e.remove(t,1));const i="codelens/cache2",n=e.get(i,1,"{}");this._deserialize(n);const s=Ee.filter(e.onWillSaveState,r=>r.reason===HD.SHUTDOWN);Ee.once(s)(r=>{e.store(i,this._serialize(),1,1)})}put(e,t){const i=t.lenses.map(r=>{var a;return{range:r.symbol.range,command:r.symbol.command&&{id:"",title:(a=r.symbol.command)==null?void 0:a.title}}}),n=new jU;n.add({lenses:i,dispose:()=>{}},this._fakeProvider);const s=new Lre(e.getLineCount(),n);this._cache.set(e.uri.toString(),s)}get(e){const t=this._cache.get(e.uri.toString());return t&&t.lineCount===e.getLineCount()?t.data:void 0}delete(e){this._cache.delete(e.uri.toString())}_serialize(){const e=Object.create(null);for(const[t,i]of this._cache){const n=new Set;for(const s of i.data.lenses)n.add(s.symbol.range.startLineNumber);e[t]={lineCount:i.lineCount,lines:[...n.values()]}}return JSON.stringify(e)}_deserialize(e){try{const t=JSON.parse(e);for(const i in t){const n=t[i],s=[];for(const a of n.lines)s.push({range:new M(a,1,a,11)});const r=new jU;r.add({lenses:s,dispose(){}},this._fakeProvider),this._cache.set(i,new Lre(n.lineCount,r))}}catch{}}};qU=tUe([iUe(0,md)],qU);ei(qge,qU,1);class nUe{constructor(e,t,i){this.afterColumn=1073741824,this.afterLineNumber=e,this.heightInPx=t,this._onHeight=i,this.suppressMouseDown=!0,this.domNode=document.createElement("div")}onComputedHeight(e){this._lastHeight===void 0?this._lastHeight=e:this._lastHeight!==e&&(this._lastHeight=e,this._onHeight())}isVisible(){return this._lastHeight!==0&&this.domNode.hasAttribute("monaco-visible-view-zone")}}const nD=class nD{constructor(e,t){this.allowEditorOverflow=!1,this.suppressMouseDown=!0,this._commands=new Map,this._isEmpty=!0,this._editor=e,this._id=`codelens.widget-${nD._idPool++}`,this.updatePosition(t),this._domNode=document.createElement("span"),this._domNode.className="codelens-decoration"}withCommands(e,t){this._commands.clear();const i=[];let n=!1;for(let s=0;s<e.length;s++){const r=e[s];if(r&&(n=!0,r.command)){const a=dm(r.command.title.trim());if(r.command.id){const l=`c${nD._idPool++}`;i.push(xe("a",{id:l,title:r.command.tooltip,role:"button"},...a)),this._commands.set(l,r.command)}else i.push(xe("span",{title:r.command.tooltip},...a));s+1<e.length&&i.push(xe("span",void 0,"|"))}}n?(Co(this._domNode,...i),this._isEmpty&&t&&this._domNode.classList.add("fadein"),this._isEmpty=!1):Co(this._domNode,xe("span",void 0,"no commands"))}getCommand(e){return e.parentElement===this._domNode?this._commands.get(e.id):void 0}getId(){return this._id}getDomNode(){return this._domNode}updatePosition(e){const t=this._editor.getModel().getLineFirstNonWhitespaceColumn(e);this._widgetPosition={position:{lineNumber:e,column:t},preference:[1]}}getPosition(){return this._widgetPosition||null}};nD._idPool=0;let KU=nD;class u9{constructor(){this._removeDecorations=[],this._addDecorations=[],this._addDecorationsCallbacks=[]}addDecoration(e,t){this._addDecorations.push(e),this._addDecorationsCallbacks.push(t)}removeDecoration(e){this._removeDecorations.push(e)}commit(e){const t=e.deltaDecorations(this._removeDecorations,this._addDecorations);for(let i=0,n=t.length;i<n;i++)this._addDecorationsCallbacks[i](t[i])}}const xre=Dt.register({collapseOnReplaceEdit:!0,description:"codelens"});class kre{constructor(e,t,i,n,s,r){this._isDisposed=!1,this._editor=t,this._data=e,this._decorationIds=[];let a;const l=[];this._data.forEach((c,u)=>{c.symbol.command&&l.push(c.symbol),i.addDecoration({range:c.symbol.range,options:xre},f=>this._decorationIds[u]=f),a?a=M.plusRange(a,c.symbol.range):a=M.lift(c.symbol.range)}),this._viewZone=new nUe(a.startLineNumber-1,s,r),this._viewZoneId=n.addZone(this._viewZone),l.length>0&&(this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(l,!1))}_createContentWidgetIfNecessary(){this._contentWidget?this._editor.layoutContentWidget(this._contentWidget):(this._contentWidget=new KU(this._editor,this._viewZone.afterLineNumber+1),this._editor.addContentWidget(this._contentWidget))}dispose(e,t){this._decorationIds.forEach(e.removeDecoration,e),this._decorationIds=[],t==null||t.removeZone(this._viewZoneId),this._contentWidget&&(this._editor.removeContentWidget(this._contentWidget),this._contentWidget=void 0),this._isDisposed=!0}isDisposed(){return this._isDisposed}isValid(){return this._decorationIds.some((e,t)=>{const i=this._editor.getModel().getDecorationRange(e),n=this._data[t].symbol;return!!(i&&M.isEmpty(n.range)===i.isEmpty())})}updateCodeLensSymbols(e,t){this._decorationIds.forEach(t.removeDecoration,t),this._decorationIds=[],this._data=e,this._data.forEach((i,n)=>{t.addDecoration({range:i.symbol.range,options:xre},s=>this._decorationIds[n]=s)})}updateHeight(e,t){this._viewZone.heightInPx=e,t.layoutZone(this._viewZoneId),this._contentWidget&&this._editor.layoutContentWidget(this._contentWidget)}computeIfNecessary(e){if(!this._viewZone.isVisible())return null;for(let t=0;t<this._decorationIds.length;t++){const i=e.getDecorationRange(this._decorationIds[t]);i&&(this._data[t].symbol.range=i)}return this._data}updateCommands(e){this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(e,!0);for(let t=0;t<this._data.length;t++){const i=e[t];if(i){const{symbol:n}=this._data[t];n.command=i.command||n.command}}}getCommand(e){var t;return(t=this._contentWidget)==null?void 0:t.getCommand(e)}getLineNumber(){const e=this._editor.getModel().getDecorationRange(this._decorationIds[0]);return e?e.startLineNumber:-1}update(e){if(this.isValid()){const t=this._editor.getModel().getDecorationRange(this._decorationIds[0]);t&&(this._viewZone.afterLineNumber=t.startLineNumber-1,e.layoutZone(this._viewZoneId),this._contentWidget&&(this._contentWidget.updatePosition(t.startLineNumber),this._editor.layoutContentWidget(this._contentWidget)))}}}var sUe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},kx=function(o,e){return function(t,i){e(t,i,o)}},V1;let mE=(V1=class{constructor(e,t,i,n,s,r){this._editor=e,this._languageFeaturesService=t,this._commandService=n,this._notificationService=s,this._codeLensCache=r,this._disposables=new le,this._localToDispose=new le,this._lenses=[],this._oldCodeLensModels=new le,this._provideCodeLensDebounce=i.for(t.codeLensProvider,"CodeLensProvide",{min:250}),this._resolveCodeLensesDebounce=i.for(t.codeLensProvider,"CodeLensResolve",{min:250,salt:"resolve"}),this._resolveCodeLensesScheduler=new Oi(()=>this._resolveCodeLensesInViewport(),this._resolveCodeLensesDebounce.default()),this._disposables.add(this._editor.onDidChangeModel(()=>this._onModelChange())),this._disposables.add(this._editor.onDidChangeModelLanguage(()=>this._onModelChange())),this._disposables.add(this._editor.onDidChangeConfiguration(a=>{(a.hasChanged(50)||a.hasChanged(19)||a.hasChanged(18))&&this._updateLensStyle(),a.hasChanged(17)&&this._onModelChange()})),this._disposables.add(t.codeLensProvider.onDidChange(this._onModelChange,this)),this._onModelChange(),this._updateLensStyle()}dispose(){var e;this._localDispose(),this._disposables.dispose(),this._oldCodeLensModels.dispose(),(e=this._currentCodeLensModel)==null||e.dispose()}_getLayoutInfo(){const e=Math.max(1.3,this._editor.getOption(67)/this._editor.getOption(52));let t=this._editor.getOption(19);return(!t||t<5)&&(t=this._editor.getOption(52)*.9|0),{fontSize:t,codeLensHeight:t*e|0}}_updateLensStyle(){const{codeLensHeight:e,fontSize:t}=this._getLayoutInfo(),i=this._editor.getOption(18),n=this._editor.getOption(50),{style:s}=this._editor.getContainerDomNode();s.setProperty("--vscode-editorCodeLens-lineHeight",`${e}px`),s.setProperty("--vscode-editorCodeLens-fontSize",`${t}px`),s.setProperty("--vscode-editorCodeLens-fontFeatureSettings",n.fontFeatureSettings),i&&(s.setProperty("--vscode-editorCodeLens-fontFamily",i),s.setProperty("--vscode-editorCodeLens-fontFamilyDefault",Zr.fontFamily)),this._editor.changeViewZones(r=>{for(const a of this._lenses)a.updateHeight(e,r)})}_localDispose(){var e,t,i;(e=this._getCodeLensModelPromise)==null||e.cancel(),this._getCodeLensModelPromise=void 0,(t=this._resolveCodeLensesPromise)==null||t.cancel(),this._resolveCodeLensesPromise=void 0,this._localToDispose.clear(),this._oldCodeLensModels.clear(),(i=this._currentCodeLensModel)==null||i.dispose()}_onModelChange(){this._localDispose();const e=this._editor.getModel();if(!e||!this._editor.getOption(17)||e.isTooLargeForTokenization())return;const t=this._codeLensCache.get(e);if(t&&this._renderCodeLensSymbols(t),!this._languageFeaturesService.codeLensProvider.has(e)){t&&Bm(()=>{const n=this._codeLensCache.get(e);t===n&&(this._codeLensCache.delete(e),this._onModelChange())},30*1e3,this._localToDispose);return}for(const n of this._languageFeaturesService.codeLensProvider.all(e))if(typeof n.onDidChange=="function"){const s=n.onDidChange(()=>i.schedule());this._localToDispose.add(s)}const i=new Oi(()=>{var s;const n=Date.now();(s=this._getCodeLensModelPromise)==null||s.cancel(),this._getCodeLensModelPromise=Gs(r=>jge(this._languageFeaturesService.codeLensProvider,e,r)),this._getCodeLensModelPromise.then(r=>{this._currentCodeLensModel&&this._oldCodeLensModels.add(this._currentCodeLensModel),this._currentCodeLensModel=r,this._codeLensCache.put(e,r);const a=this._provideCodeLensDebounce.update(e,Date.now()-n);i.delay=a,this._renderCodeLensSymbols(r),this._resolveCodeLensesInViewportSoon()},wt)},this._provideCodeLensDebounce.get(e));this._localToDispose.add(i),this._localToDispose.add(it(()=>this._resolveCodeLensesScheduler.cancel())),this._localToDispose.add(this._editor.onDidChangeModelContent(()=>{var n;this._editor.changeDecorations(s=>{this._editor.changeViewZones(r=>{const a=[];let l=-1;this._lenses.forEach(u=>{!u.isValid()||l===u.getLineNumber()?a.push(u):(u.update(r),l=u.getLineNumber())});const c=new u9;a.forEach(u=>{u.dispose(c,r),this._lenses.splice(this._lenses.indexOf(u),1)}),c.commit(s)})}),i.schedule(),this._resolveCodeLensesScheduler.cancel(),(n=this._resolveCodeLensesPromise)==null||n.cancel(),this._resolveCodeLensesPromise=void 0})),this._localToDispose.add(this._editor.onDidFocusEditorText(()=>{i.schedule()})),this._localToDispose.add(this._editor.onDidBlurEditorText(()=>{i.cancel()})),this._localToDispose.add(this._editor.onDidScrollChange(n=>{n.scrollTopChanged&&this._lenses.length>0&&this._resolveCodeLensesInViewportSoon()})),this._localToDispose.add(this._editor.onDidLayoutChange(()=>{this._resolveCodeLensesInViewportSoon()})),this._localToDispose.add(it(()=>{if(this._editor.getModel()){const n=Cu.capture(this._editor);this._editor.changeDecorations(s=>{this._editor.changeViewZones(r=>{this._disposeAllLenses(s,r)})}),n.restore(this._editor)}else this._disposeAllLenses(void 0,void 0)})),this._localToDispose.add(this._editor.onMouseDown(n=>{if(n.target.type!==9)return;let s=n.target.element;if((s==null?void 0:s.tagName)==="SPAN"&&(s=s.parentElement),(s==null?void 0:s.tagName)==="A")for(const r of this._lenses){const a=r.getCommand(s);if(a){this._commandService.executeCommand(a.id,...a.arguments||[]).catch(l=>this._notificationService.error(l));break}}})),i.schedule()}_disposeAllLenses(e,t){const i=new u9;for(const n of this._lenses)n.dispose(i,t);e&&i.commit(e),this._lenses.length=0}_renderCodeLensSymbols(e){if(!this._editor.hasModel())return;const t=this._editor.getModel().getLineCount(),i=[];let n;for(const a of e.lenses){const l=a.symbol.range.startLineNumber;l<1||l>t||(n&&n[n.length-1].symbol.range.startLineNumber===l?n.push(a):(n=[a],i.push(n)))}if(!i.length&&!this._lenses.length)return;const s=Cu.capture(this._editor),r=this._getLayoutInfo();this._editor.changeDecorations(a=>{this._editor.changeViewZones(l=>{const c=new u9;let u=0,f=0;for(;f<i.length&&u<this._lenses.length;){const g=i[f][0].symbol.range.startLineNumber,p=this._lenses[u].getLineNumber();p<g?(this._lenses[u].dispose(c,l),this._lenses.splice(u,1)):p===g?(this._lenses[u].updateCodeLensSymbols(i[f],c),f++,u++):(this._lenses.splice(u,0,new kre(i[f],this._editor,c,l,r.codeLensHeight,()=>this._resolveCodeLensesInViewportSoon())),u++,f++)}for(;u<this._lenses.length;)this._lenses[u].dispose(c,l),this._lenses.splice(u,1);for(;f<i.length;)this._lenses.push(new kre(i[f],this._editor,c,l,r.codeLensHeight,()=>this._resolveCodeLensesInViewportSoon())),f++;c.commit(a)})}),s.restore(this._editor)}_resolveCodeLensesInViewportSoon(){this._editor.getModel()&&this._resolveCodeLensesScheduler.schedule()}_resolveCodeLensesInViewport(){var r;(r=this._resolveCodeLensesPromise)==null||r.cancel(),this._resolveCodeLensesPromise=void 0;const e=this._editor.getModel();if(!e)return;const t=[],i=[];if(this._lenses.forEach(a=>{const l=a.computeIfNecessary(e);l&&(t.push(l),i.push(a))}),t.length===0)return;const n=Date.now(),s=Gs(a=>{const l=t.map((c,u)=>{const f=new Array(c.length),g=c.map((p,_)=>!p.symbol.command&&typeof p.provider.resolveCodeLens=="function"?Promise.resolve(p.provider.resolveCodeLens(e,p.symbol,a)).then(b=>{f[_]=b},rs):(f[_]=p.symbol,Promise.resolve(void 0)));return Promise.all(g).then(()=>{!a.isCancellationRequested&&!i[u].isDisposed()&&i[u].updateCommands(f)})});return Promise.all(l)});this._resolveCodeLensesPromise=s,this._resolveCodeLensesPromise.then(()=>{const a=this._resolveCodeLensesDebounce.update(e,Date.now()-n);this._resolveCodeLensesScheduler.delay=a,this._currentCodeLensModel&&this._codeLensCache.put(e,this._currentCodeLensModel),this._oldCodeLensModels.clear(),s===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)},a=>{wt(a),s===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)})}async getModel(){var e;return await this._getCodeLensModelPromise,await this._resolveCodeLensesPromise,(e=this._currentCodeLensModel)!=null&&e.isDisposed?void 0:this._currentCodeLensModel}},V1.ID="css.editor.codeLens",V1);mE=sUe([kx(1,Ue),kx(2,Yl),kx(3,nn),kx(4,fs),kx(5,qge)],mE);oi(mE.ID,mE,1);be(class extends Ve{constructor(){super({id:"codelens.showLensesInCurrentLine",precondition:B.hasCodeLensProvider,label:v("showLensOnLine","Show CodeLens Commands For Current Line"),alias:"Show CodeLens Commands For Current Line"})}async run(e,t){if(!t.hasModel())return;const i=e.get(Rc),n=e.get(nn),s=e.get(fs),r=t.getSelection().positionLineNumber,a=t.getContribution(mE.ID);if(!a)return;const l=await a.getModel();if(!l)return;const c=[];for(const g of l.lenses)g.symbol.command&&g.symbol.range.startLineNumber===r&&c.push({label:g.symbol.command.title,command:g.symbol.command});if(c.length===0)return;const u=await i.pick(c,{canPickMany:!1,placeHolder:v("placeHolder","Select a command")});if(!u)return;let f=u.command;if(l.isDisposed){const g=await a.getModel(),p=g==null?void 0:g.lenses.find(_=>{var b;return _.symbol.range.startLineNumber===r&&((b=_.symbol.command)==null?void 0:b.title)===f.title});if(!p||!p.symbol.command)return;f=p.symbol.command}try{await n.executeCommand(f.id,...f.arguments||[])}catch(g){s.error(g)}}});var Kge=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},GU=function(o,e){return function(t,i){e(t,i,o)}};let _E=class{constructor(e){this._editorWorkerService=e}async provideDocumentColors(e,t){return this._editorWorkerService.computeDefaultDocumentColors(e.uri)}provideColorPresentations(e,t,i){const n=t.range,s=t.color,r=s.alpha,a=new ue(new li(Math.round(255*s.red),Math.round(255*s.green),Math.round(255*s.blue),r)),l=r?ue.Format.CSS.formatRGB(a):ue.Format.CSS.formatRGBA(a),c=r?ue.Format.CSS.formatHSL(a):ue.Format.CSS.formatHSLA(a),u=r?ue.Format.CSS.formatHex(a):ue.Format.CSS.formatHexA(a),f=[];return f.push({label:l,textEdit:{range:n,text:l}}),f.push({label:c,textEdit:{range:n,text:c}}),f.push({label:u,textEdit:{range:n,text:u}}),f}};_E=Kge([GU(0,Aa)],_E);let YU=class extends X{constructor(e,t){super(),this._register(e.colorProvider.register("*",new _E(t)))}};YU=Kge([GU(0,Ue),GU(1,Aa)],YU);o0(YU);async function Gge(o,e,t,i=!0){return CY(new oUe,o,e,t,i)}function Yge(o,e,t,i){return Promise.resolve(t.provideColorPresentations(o,e,i))}class oUe{constructor(){}async compute(e,t,i,n){const s=await e.provideDocumentColors(t,i);if(Array.isArray(s))for(const r of s)n.push({colorInfo:r,provider:e});return Array.isArray(s)}}class rUe{constructor(){}async compute(e,t,i,n){const s=await e.provideDocumentColors(t,i);if(Array.isArray(s))for(const r of s)n.push({range:r.range,color:[r.color.red,r.color.green,r.color.blue,r.color.alpha]});return Array.isArray(s)}}class aUe{constructor(e){this.colorInfo=e}async compute(e,t,i,n){const s=await e.provideColorPresentations(t,this.colorInfo,Mt.None);return Array.isArray(s)&&n.push(...s),Array.isArray(s)}}async function CY(o,e,t,i,n){let s=!1,r;const a=[],l=e.ordered(t);for(let c=l.length-1;c>=0;c--){const u=l[c];if(u instanceof _E)r=u;else try{await o.compute(u,t,i,a)&&(s=!0)}catch(f){rs(f)}}return s?a:r&&n?(await o.compute(r,t,i,a),a):[]}function Zge(o,e){const{colorProvider:t}=o.get(Ue),i=o.get(un).getModel(e);if(!i)throw yc();const n=o.get(Ht).getValue("editor.defaultColorDecorators",{resource:e});return{model:i,colorProviderRegistry:t,isDefaultColorDecoratorsEnabled:n}}ii.registerCommand("_executeDocumentColorProvider",function(o,...e){const[t]=e;if(!(t instanceof st))throw yc();const{model:i,colorProviderRegistry:n,isDefaultColorDecoratorsEnabled:s}=Zge(o,t);return CY(new rUe,n,i,Mt.None,s)});ii.registerCommand("_executeColorPresentationProvider",function(o,...e){const[t,i]=e,{uri:n,range:s}=i;if(!(n instanceof st)||!Array.isArray(t)||t.length!==4||!M.isIRange(s))throw yc();const{model:r,colorProviderRegistry:a,isDefaultColorDecoratorsEnabled:l}=Zge(o,n),[c,u,f,g]=t;return CY(new aUe({range:s,color:{red:c,green:u,blue:f,alpha:g}}),a,r,Mt.None,l)});var lUe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},h9=function(o,e){return function(t,i){e(t,i,o)}},ZU;const Xge=Object.create({});var vm;let kS=(vm=class extends X{constructor(e,t,i,n){super(),this._editor=e,this._configurationService=t,this._languageFeaturesService=i,this._localToDispose=this._register(new le),this._decorationsIds=[],this._colorDatas=new Map,this._colorDecoratorIds=this._editor.createDecorationsCollection(),this._ruleFactory=new MP(this._editor),this._decoratorLimitReporter=new cUe,this._colorDecorationClassRefs=this._register(new le),this._debounceInformation=n.for(i.colorProvider,"Document Colors",{min:ZU.RECOMPUTE_TIME}),this._register(e.onDidChangeModel(()=>{this._isColorDecoratorsEnabled=this.isEnabled(),this.updateColors()})),this._register(e.onDidChangeModelLanguage(()=>this.updateColors())),this._register(i.colorProvider.onDidChange(()=>this.updateColors())),this._register(e.onDidChangeConfiguration(s=>{const r=this._isColorDecoratorsEnabled;this._isColorDecoratorsEnabled=this.isEnabled(),this._isDefaultColorDecoratorsEnabled=this._editor.getOption(148);const a=r!==this._isColorDecoratorsEnabled||s.hasChanged(21),l=s.hasChanged(148);(a||l)&&(this._isColorDecoratorsEnabled?this.updateColors():this.removeAllDecorations())})),this._timeoutTimer=null,this._computePromise=null,this._isColorDecoratorsEnabled=this.isEnabled(),this._isDefaultColorDecoratorsEnabled=this._editor.getOption(148),this.updateColors()}isEnabled(){const e=this._editor.getModel();if(!e)return!1;const t=e.getLanguageId(),i=this._configurationService.getValue(t);if(i&&typeof i=="object"){const n=i.colorDecorators;if(n&&n.enable!==void 0&&!n.enable)return n.enable}return this._editor.getOption(20)}static get(e){return e.getContribution(this.ID)}dispose(){this.stop(),this.removeAllDecorations(),super.dispose()}updateColors(){if(this.stop(),!this._isColorDecoratorsEnabled)return;const e=this._editor.getModel();!e||!this._languageFeaturesService.colorProvider.has(e)||(this._localToDispose.add(this._editor.onDidChangeModelContent(()=>{this._timeoutTimer||(this._timeoutTimer=new gd,this._timeoutTimer.cancelAndSet(()=>{this._timeoutTimer=null,this.beginCompute()},this._debounceInformation.get(e)))})),this.beginCompute())}async beginCompute(){this._computePromise=Gs(async e=>{const t=this._editor.getModel();if(!t)return[];const i=new uo(!1),n=await Gge(this._languageFeaturesService.colorProvider,t,e,this._isDefaultColorDecoratorsEnabled);return this._debounceInformation.update(t,i.elapsed()),n});try{const e=await this._computePromise;this.updateDecorations(e),this.updateColorDecorators(e),this._computePromise=null}catch(e){wt(e)}}stop(){this._timeoutTimer&&(this._timeoutTimer.cancel(),this._timeoutTimer=null),this._computePromise&&(this._computePromise.cancel(),this._computePromise=null),this._localToDispose.clear()}updateDecorations(e){const t=e.map(i=>({range:{startLineNumber:i.colorInfo.range.startLineNumber,startColumn:i.colorInfo.range.startColumn,endLineNumber:i.colorInfo.range.endLineNumber,endColumn:i.colorInfo.range.endColumn},options:Dt.EMPTY}));this._editor.changeDecorations(i=>{this._decorationsIds=i.deltaDecorations(this._decorationsIds,t),this._colorDatas=new Map,this._decorationsIds.forEach((n,s)=>this._colorDatas.set(n,e[s]))})}updateColorDecorators(e){this._colorDecorationClassRefs.clear();const t=[],i=this._editor.getOption(21);for(let s=0;s<e.length&&t.length<i;s++){const{red:r,green:a,blue:l,alpha:c}=e[s].colorInfo.color,u=new li(Math.round(r*255),Math.round(a*255),Math.round(l*255),c),f=`rgba(${u.r}, ${u.g}, ${u.b}, ${u.a})`,g=this._colorDecorationClassRefs.add(this._ruleFactory.createClassNameRef({backgroundColor:f}));t.push({range:{startLineNumber:e[s].colorInfo.range.startLineNumber,startColumn:e[s].colorInfo.range.startColumn,endLineNumber:e[s].colorInfo.range.endLineNumber,endColumn:e[s].colorInfo.range.endColumn},options:{description:"colorDetector",before:{content:tce,inlineClassName:`${g.className} colorpicker-color-decoration`,inlineClassNameAffectsLetterSpacing:!0,attachedData:Xge}}})}const n=i<e.length?i:!1;this._decoratorLimitReporter.update(e.length,n),this._colorDecoratorIds.set(t)}removeAllDecorations(){this._editor.removeDecorations(this._decorationsIds),this._decorationsIds=[],this._colorDecoratorIds.clear(),this._colorDecorationClassRefs.clear()}getColorData(e){const t=this._editor.getModel();if(!t)return null;const i=t.getDecorationsInRange(M.fromPositions(e,e)).filter(n=>this._colorDatas.has(n.id));return i.length===0?null:this._colorDatas.get(i[0].id)}isColorDecoration(e){return this._colorDecoratorIds.has(e)}},ZU=vm,vm.ID="editor.contrib.colorDetector",vm.RECOMPUTE_TIME=1e3,vm);kS=ZU=lUe([h9(1,Ht),h9(2,Ue),h9(3,Yl)],kS);class cUe{constructor(){this._onDidChange=new Y,this._computed=0,this._limited=!1}update(e,t){(e!==this._computed||t!==this._limited)&&(this._computed=e,this._limited=t,this._onDidChange.fire())}}oi(kS.ID,kS,1);class dUe{get color(){return this._color}set color(e){this._color.equals(e)||(this._color=e,this._onDidChangeColor.fire(e))}get presentation(){return this.colorPresentations[this.presentationIndex]}get colorPresentations(){return this._colorPresentations}set colorPresentations(e){this._colorPresentations=e,this.presentationIndex>e.length-1&&(this.presentationIndex=0),this._onDidChangePresentation.fire(this.presentation)}constructor(e,t,i){this.presentationIndex=i,this._onColorFlushed=new Y,this.onColorFlushed=this._onColorFlushed.event,this._onDidChangeColor=new Y,this.onDidChangeColor=this._onDidChangeColor.event,this._onDidChangePresentation=new Y,this.onDidChangePresentation=this._onDidChangePresentation.event,this.originalColor=e,this._color=e,this._colorPresentations=t}selectNextColorPresentation(){this.presentationIndex=(this.presentationIndex+1)%this.colorPresentations.length,this.flushColor(),this._onDidChangePresentation.fire(this.presentation)}guessColorPresentation(e,t){let i=-1;for(let n=0;n<this.colorPresentations.length;n++)if(t.toLowerCase()===this.colorPresentations[n].label){i=n;break}if(i===-1){const n=t.split("(")[0].toLowerCase();for(let s=0;s<this.colorPresentations.length;s++)if(this.colorPresentations[s].label.toLowerCase().startsWith(n)){i=s;break}}i!==-1&&i!==this.presentationIndex&&(this.presentationIndex=i,this._onDidChangePresentation.fire(this.presentation))}flushColor(){this._onColorFlushed.fire(this._color)}}const Pl=xe;class uUe extends X{constructor(e,t,i,n=!1){super(),this.model=t,this.showingStandaloneColorPicker=n,this._closeButton=null,this._domNode=Pl(".colorpicker-header"),ge(e,this._domNode),this._pickedColorNode=ge(this._domNode,Pl(".picked-color")),ge(this._pickedColorNode,Pl("span.codicon.codicon-color-mode")),this._pickedColorPresentation=ge(this._pickedColorNode,document.createElement("span")),this._pickedColorPresentation.classList.add("picked-color-presentation");const s=v("clickToToggleColorOptions","Click to toggle color options (rgb/hsl/hex)");this._pickedColorNode.setAttribute("title",s),this._originalColorNode=ge(this._domNode,Pl(".original-color")),this._originalColorNode.style.backgroundColor=ue.Format.CSS.format(this.model.originalColor)||"",this.backgroundColor=i.getColorTheme().getColor(BA)||ue.white,this._register(i.onDidColorThemeChange(r=>{this.backgroundColor=r.getColor(BA)||ue.white})),this._register(se(this._pickedColorNode,Le.CLICK,()=>this.model.selectNextColorPresentation())),this._register(se(this._originalColorNode,Le.CLICK,()=>{this.model.color=this.model.originalColor,this.model.flushColor()})),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this._register(t.onDidChangePresentation(this.onDidChangePresentation,this)),this._pickedColorNode.style.backgroundColor=ue.Format.CSS.format(t.color)||"",this._pickedColorNode.classList.toggle("light",t.color.rgba.a<.5?this.backgroundColor.isLighter():t.color.isLighter()),this.onDidChangeColor(this.model.color),this.showingStandaloneColorPicker&&(this._domNode.classList.add("standalone-colorpicker"),this._closeButton=this._register(new hUe(this._domNode)))}get closeButton(){return this._closeButton}get pickedColorNode(){return this._pickedColorNode}get originalColorNode(){return this._originalColorNode}onDidChangeColor(e){this._pickedColorNode.style.backgroundColor=ue.Format.CSS.format(e)||"",this._pickedColorNode.classList.toggle("light",e.rgba.a<.5?this.backgroundColor.isLighter():e.isLighter()),this.onDidChangePresentation()}onDidChangePresentation(){this._pickedColorPresentation.textContent=this.model.presentation?this.model.presentation.label:""}}class hUe extends X{constructor(e){super(),this._onClicked=this._register(new Y),this.onClicked=this._onClicked.event,this._button=document.createElement("div"),this._button.classList.add("close-button"),ge(e,this._button);const t=document.createElement("div");t.classList.add("close-button-inner-div"),ge(this._button,t),ge(t,Pl(".button"+ut.asCSSSelector(hn("color-picker-close",Se.close,v("closeIcon","Icon to close the color picker"))))).classList.add("close-icon"),this._register(se(this._button,Le.CLICK,()=>{this._onClicked.fire()}))}}class fUe extends X{constructor(e,t,i,n=!1){super(),this.model=t,this.pixelRatio=i,this._insertButton=null,this._domNode=Pl(".colorpicker-body"),ge(e,this._domNode),this._saturationBox=new gUe(this._domNode,this.model,this.pixelRatio),this._register(this._saturationBox),this._register(this._saturationBox.onDidChange(this.onDidSaturationValueChange,this)),this._register(this._saturationBox.onColorFlushed(this.flushColor,this)),this._opacityStrip=new pUe(this._domNode,this.model,n),this._register(this._opacityStrip),this._register(this._opacityStrip.onDidChange(this.onDidOpacityChange,this)),this._register(this._opacityStrip.onColorFlushed(this.flushColor,this)),this._hueStrip=new mUe(this._domNode,this.model,n),this._register(this._hueStrip),this._register(this._hueStrip.onDidChange(this.onDidHueChange,this)),this._register(this._hueStrip.onColorFlushed(this.flushColor,this)),n&&(this._insertButton=this._register(new _Ue(this._domNode)),this._domNode.classList.add("standalone-colorpicker"))}flushColor(){this.model.flushColor()}onDidSaturationValueChange({s:e,v:t}){const i=this.model.color.hsva;this.model.color=new ue(new xh(i.h,e,t,i.a))}onDidOpacityChange(e){const t=this.model.color.hsva;this.model.color=new ue(new xh(t.h,t.s,t.v,e))}onDidHueChange(e){const t=this.model.color.hsva,i=(1-e)*360;this.model.color=new ue(new xh(i===360?0:i,t.s,t.v,t.a))}get domNode(){return this._domNode}get saturationBox(){return this._saturationBox}get enterButton(){return this._insertButton}layout(){this._saturationBox.layout(),this._opacityStrip.layout(),this._hueStrip.layout()}}class gUe extends X{constructor(e,t,i){super(),this.model=t,this.pixelRatio=i,this._onDidChange=new Y,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new Y,this.onColorFlushed=this._onColorFlushed.event,this._domNode=Pl(".saturation-wrap"),ge(e,this._domNode),this._canvas=document.createElement("canvas"),this._canvas.className="saturation-box",ge(this._domNode,this._canvas),this.selection=Pl(".saturation-selection"),ge(this._domNode,this.selection),this.layout(),this._register(se(this._domNode,Le.POINTER_DOWN,n=>this.onPointerDown(n))),this._register(this.model.onDidChangeColor(this.onDidChangeColor,this)),this.monitor=null}get domNode(){return this._domNode}onPointerDown(e){if(!e.target||!(e.target instanceof Element))return;this.monitor=this._register(new YS);const t=os(this._domNode);e.target!==this.selection&&this.onDidChangePosition(e.offsetX,e.offsetY),this.monitor.startMonitoring(e.target,e.pointerId,e.buttons,n=>this.onDidChangePosition(n.pageX-t.left,n.pageY-t.top),()=>null);const i=se(e.target.ownerDocument,Le.POINTER_UP,()=>{this._onColorFlushed.fire(),i.dispose(),this.monitor&&(this.monitor.stopMonitoring(!0),this.monitor=null)},!0)}onDidChangePosition(e,t){const i=Math.max(0,Math.min(1,e/this.width)),n=Math.max(0,Math.min(1,1-t/this.height));this.paintSelection(i,n),this._onDidChange.fire({s:i,v:n})}layout(){this.width=this._domNode.offsetWidth,this.height=this._domNode.offsetHeight,this._canvas.width=this.width*this.pixelRatio,this._canvas.height=this.height*this.pixelRatio,this.paint();const e=this.model.color.hsva;this.paintSelection(e.s,e.v)}paint(){const e=this.model.color.hsva,t=new ue(new xh(e.h,1,1,1)),i=this._canvas.getContext("2d"),n=i.createLinearGradient(0,0,this._canvas.width,0);n.addColorStop(0,"rgba(255, 255, 255, 1)"),n.addColorStop(.5,"rgba(255, 255, 255, 0.5)"),n.addColorStop(1,"rgba(255, 255, 255, 0)");const s=i.createLinearGradient(0,0,0,this._canvas.height);s.addColorStop(0,"rgba(0, 0, 0, 0)"),s.addColorStop(1,"rgba(0, 0, 0, 1)"),i.rect(0,0,this._canvas.width,this._canvas.height),i.fillStyle=ue.Format.CSS.format(t),i.fill(),i.fillStyle=n,i.fill(),i.fillStyle=s,i.fill()}paintSelection(e,t){this.selection.style.left=`${e*this.width}px`,this.selection.style.top=`${this.height-t*this.height}px`}onDidChangeColor(e){if(this.monitor&&this.monitor.isMonitoring())return;this.paint();const t=e.hsva;this.paintSelection(t.s,t.v)}}class Qge extends X{constructor(e,t,i=!1){super(),this.model=t,this._onDidChange=new Y,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new Y,this.onColorFlushed=this._onColorFlushed.event,i?(this.domNode=ge(e,Pl(".standalone-strip")),this.overlay=ge(this.domNode,Pl(".standalone-overlay"))):(this.domNode=ge(e,Pl(".strip")),this.overlay=ge(this.domNode,Pl(".overlay"))),this.slider=ge(this.domNode,Pl(".slider")),this.slider.style.top="0px",this._register(se(this.domNode,Le.POINTER_DOWN,n=>this.onPointerDown(n))),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this.layout()}layout(){this.height=this.domNode.offsetHeight-this.slider.offsetHeight;const e=this.getValue(this.model.color);this.updateSliderPosition(e)}onDidChangeColor(e){const t=this.getValue(e);this.updateSliderPosition(t)}onPointerDown(e){if(!e.target||!(e.target instanceof Element))return;const t=this._register(new YS),i=os(this.domNode);this.domNode.classList.add("grabbing"),e.target!==this.slider&&this.onDidChangeTop(e.offsetY),t.startMonitoring(e.target,e.pointerId,e.buttons,s=>this.onDidChangeTop(s.pageY-i.top),()=>null);const n=se(e.target.ownerDocument,Le.POINTER_UP,()=>{this._onColorFlushed.fire(),n.dispose(),t.stopMonitoring(!0),this.domNode.classList.remove("grabbing")},!0)}onDidChangeTop(e){const t=Math.max(0,Math.min(1,1-e/this.height));this.updateSliderPosition(t),this._onDidChange.fire(t)}updateSliderPosition(e){this.slider.style.top=`${(1-e)*this.height}px`}}class pUe extends Qge{constructor(e,t,i=!1){super(e,t,i),this.domNode.classList.add("opacity-strip"),this.onDidChangeColor(this.model.color)}onDidChangeColor(e){super.onDidChangeColor(e);const{r:t,g:i,b:n}=e.rgba,s=new ue(new li(t,i,n,1)),r=new ue(new li(t,i,n,0));this.overlay.style.background=`linear-gradient(to bottom, ${s} 0%, ${r} 100%)`}getValue(e){return e.hsva.a}}class mUe extends Qge{constructor(e,t,i=!1){super(e,t,i),this.domNode.classList.add("hue-strip")}getValue(e){return 1-e.hsva.h/360}}class _Ue extends X{constructor(e){super(),this._onClicked=this._register(new Y),this.onClicked=this._onClicked.event,this._button=ge(e,document.createElement("button")),this._button.classList.add("insert-button"),this._button.textContent="Insert",this._register(se(this._button,Le.CLICK,()=>{this._onClicked.fire()}))}get button(){return this._button}}class vUe extends Zl{constructor(e,t,i,n,s=!1){super(),this.model=t,this.pixelRatio=i,this._register(_D.getInstance(at(e)).onDidChange(()=>this.layout())),this._domNode=Pl(".colorpicker-widget"),e.appendChild(this._domNode),this.header=this._register(new uUe(this._domNode,this.model,n,s)),this.body=this._register(new fUe(this._domNode,this.model,this.pixelRatio,s))}layout(){this.body.layout()}get domNode(){return this._domNode}}class f9{constructor(e,t,i,n){this.priority=e,this.range=t,this.initialMousePosX=i,this.initialMousePosY=n,this.type=1}equals(e){return e.type===1&&this.range.equalsRange(e.range)}canAdoptVisibleHover(e,t){return e.type===1&&t.lineNumber===this.range.startLineNumber}}class WM{constructor(e,t,i,n,s,r){this.priority=e,this.owner=t,this.range=i,this.initialMousePosX=n,this.initialMousePosY=s,this.supportsMarkerHover=r,this.type=2}equals(e){return e.type===2&&this.owner===e.owner}canAdoptVisibleHover(e,t){return e.type===2&&this.owner===e.owner}}class xC{constructor(e){this.renderedHoverParts=e}dispose(){for(const e of this.renderedHoverParts)e.dispose()}}const jC=new class{constructor(){this._participants=[]}register(e){this._participants.push(e)}getAll(){return this._participants}};var Jge=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},epe=function(o,e){return function(t,i){e(t,i,o)}};class bUe{constructor(e,t,i,n){this.owner=e,this.range=t,this.model=i,this.provider=n,this.forceShowAtRange=!0}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}let vE=class{constructor(e,t){this._editor=e,this._themeService=t,this.hoverOrdinal=2}computeSync(e,t){return[]}computeAsync(e,t,i){return Fl.fromPromise(this._computeAsync(e,t,i))}async _computeAsync(e,t,i){if(!this._editor.hasModel())return[];const n=kS.get(this._editor);if(!n)return[];for(const s of t){if(!n.isColorDecoration(s))continue;const r=n.getColorData(s.range.getStartPosition());if(r)return[await tpe(this,this._editor.getModel(),r.colorInfo,r.provider)]}return[]}renderHoverParts(e,t){const i=ipe(this,this._editor,this._themeService,t,e);if(!i)return new xC([]);this._colorPicker=i.colorPicker;const n={hoverPart:i.hoverPart,hoverElement:this._colorPicker.domNode,dispose(){i.disposables.dispose()}};return new xC([n])}handleResize(){var e;(e=this._colorPicker)==null||e.layout()}isColorPickerVisible(){return!!this._colorPicker}};vE=Jge([epe(1,Ws)],vE);class CUe{constructor(e,t,i,n){this.owner=e,this.range=t,this.model=i,this.provider=n}}let bE=class{constructor(e,t){this._editor=e,this._themeService=t,this._color=null}async createColorHover(e,t,i){if(!this._editor.hasModel()||!kS.get(this._editor))return null;const s=await Gge(i,this._editor.getModel(),Mt.None);let r=null,a=null;for(const f of s){const g=f.colorInfo;M.containsRange(g.range,e.range)&&(r=g,a=f.provider)}const l=r??e,c=a??t,u=!!r;return{colorHover:await tpe(this,this._editor.getModel(),l,c),foundInEditor:u}}async updateEditorModel(e){if(!this._editor.hasModel())return;const t=e.model;let i=new M(e.range.startLineNumber,e.range.startColumn,e.range.endLineNumber,e.range.endColumn);this._color&&(await HM(this._editor.getModel(),t,this._color,i,e),i=npe(this._editor,i,t))}renderHoverParts(e,t){return ipe(this,this._editor,this._themeService,t,e)}set color(e){this._color=e}get color(){return this._color}};bE=Jge([epe(1,Ws)],bE);async function tpe(o,e,t,i){const n=e.getValueInRange(t.range),{red:s,green:r,blue:a,alpha:l}=t.color,c=new li(Math.round(s*255),Math.round(r*255),Math.round(a*255),l),u=new ue(c),f=await Yge(e,t,i,Mt.None),g=new dUe(u,[],0);return g.colorPresentations=f||[],g.guessColorPresentation(u,n),o instanceof vE?new bUe(o,M.lift(t.range),g,i):new CUe(o,M.lift(t.range),g,i)}function ipe(o,e,t,i,n){if(i.length===0||!e.hasModel())return;if(n.setMinimumDimensions){const g=e.getOption(67)+8;n.setMinimumDimensions(new Ri(302,g))}const s=new le,r=i[0],a=e.getModel(),l=r.model,c=s.add(new vUe(n.fragment,l,e.getOption(144),t,o instanceof bE));let u=!1,f=new M(r.range.startLineNumber,r.range.startColumn,r.range.endLineNumber,r.range.endColumn);if(o instanceof bE){const g=r.model.color;o.color=g,HM(a,l,g,f,r),s.add(l.onColorFlushed(p=>{o.color=p}))}else s.add(l.onColorFlushed(async g=>{await HM(a,l,g,f,r),u=!0,f=npe(e,f,l)}));return s.add(l.onDidChangeColor(g=>{HM(a,l,g,f,r)})),s.add(e.onDidChangeModelContent(g=>{u?u=!1:(n.hide(),e.focus())})),{hoverPart:r,colorPicker:c,disposables:s}}function npe(o,e,t){const i=[],n=t.presentation.textEdit??{range:e,text:t.presentation.label,forceMoveMarkers:!1};i.push(n),t.presentation.additionalTextEdits&&i.push(...t.presentation.additionalTextEdits);const s=M.lift(n.range),r=o.getModel()._setTrackedRange(null,s,3);return o.executeEdits("colorpicker",i),o.pushUndoStop(),o.getModel()._getTrackedRange(r)??s}async function HM(o,e,t,i,n){const s=await Yge(o,{range:i,color:{red:t.rgba.r/255,green:t.rgba.g/255,blue:t.rgba.b/255,alpha:t.rgba.a}},n.provider,Mt.None);e.colorPresentations=s||[]}const spe="editor.action.showHover",yUe="editor.action.showDefinitionPreviewHover",wUe="editor.action.scrollUpHover",SUe="editor.action.scrollDownHover",LUe="editor.action.scrollLeftHover",xUe="editor.action.scrollRightHover",kUe="editor.action.pageUpHover",DUe="editor.action.pageDownHover",EUe="editor.action.goToTopHover",IUe="editor.action.goToBottomHover",o5="editor.action.increaseHoverVerbosityLevel",TUe=v({key:"increaseHoverVerbosityLevel",comment:["Label for action that will increase the hover verbosity level."]},"Increase Hover Verbosity Level"),r5="editor.action.decreaseHoverVerbosityLevel",NUe=v({key:"decreaseHoverVerbosityLevel",comment:["Label for action that will decrease the hover verbosity level."]},"Decrease Hover Verbosity Level"),ope="editor.action.inlineSuggest.commit",rpe="editor.action.inlineSuggest.showPrevious",ape="editor.action.inlineSuggest.showNext";var yY=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Jc=function(o,e){return function(t,i){e(t,i,o)}},VM;let XU=class extends X{constructor(e,t,i){super(),this.editor=e,this.model=t,this.instantiationService=i,this.alwaysShowToolbar=Ni(this,this.editor.onDidChangeConfiguration,()=>this.editor.getOption(62).showToolbar==="always"),this.sessionPosition=void 0,this.position=Qe(this,n=>{var l,c;const s=(l=this.model.read(n))==null?void 0:l.primaryGhostText.read(n);if(!this.alwaysShowToolbar.read(n)||!s||s.parts.length===0)return this.sessionPosition=void 0,null;const r=s.parts[0].column;this.sessionPosition&&this.sessionPosition.lineNumber!==s.lineNumber&&(this.sessionPosition=void 0);const a=new G(s.lineNumber,Math.min(r,((c=this.sessionPosition)==null?void 0:c.column)??Number.MAX_SAFE_INTEGER));return this.sessionPosition=a,a}),this._register(ka((n,s)=>{const r=this.model.read(n);if(!r||!this.alwaysShowToolbar.read(n))return;const a=n_((c,u)=>{const f=u.add(this.instantiationService.createInstance(DS,this.editor,!0,this.position,r.selectedInlineCompletionIndex,r.inlineCompletionsCount,r.activeCommands));return e.addContentWidget(f),u.add(it(()=>e.removeContentWidget(f))),u.add(bt(g=>{this.position.read(g)&&r.lastTriggerKind.read(g)!==ru.Explicit&&r.triggerExplicitly()})),f}),l=uI(this,(c,u)=>!!this.position.read(c)||!!u);s.add(bt(c=>{l.read(c)&&a.read(c)}))}))}};XU=yY([Jc(2,nt)],XU);const RUe=hn("inline-suggestion-hints-next",Se.chevronRight,v("parameterHintsNextIcon","Icon for show next parameter hint.")),MUe=hn("inline-suggestion-hints-previous",Se.chevronLeft,v("parameterHintsPreviousIcon","Icon for show previous parameter hint."));var bm;let DS=(bm=class extends X{static get dropDownVisible(){return this._dropDownVisible}createCommandAction(e,t,i){const n=new tl(e,t,i,!0,()=>this._commandService.executeCommand(e)),s=this.keybindingService.lookupKeybinding(e,this._contextKeyService);let r=t;return s&&(r=v({key:"content",comment:["A label","A keybinding"]},"{0} ({1})",t,s.getLabel())),n.tooltip=r,n}constructor(e,t,i,n,s,r,a,l,c,u,f){super(),this.editor=e,this.withBorder=t,this._position=i,this._currentSuggestionIdx=n,this._suggestionCount=s,this._extraCommands=r,this._commandService=a,this.keybindingService=c,this._contextKeyService=u,this._menuService=f,this.id=`InlineSuggestionHintsContentWidget${VM.id++}`,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this.nodes=jt("div.inlineSuggestionsHints",{className:this.withBorder?".withBorder":""},[jt("div@toolBar")]),this.previousAction=this.createCommandAction(rpe,v("previous","Previous"),ut.asClassName(MUe)),this.availableSuggestionCountAction=new tl("inlineSuggestionHints.availableSuggestionCount","",void 0,!1),this.nextAction=this.createCommandAction(ape,v("next","Next"),ut.asClassName(RUe)),this.inlineCompletionsActionsMenus=this._register(this._menuService.createMenu(qe.InlineCompletionsActions,this._contextKeyService)),this.clearAvailableSuggestionCountLabelDebounced=this._register(new Oi(()=>{this.availableSuggestionCountAction.label=""},100)),this.disableButtonsDebounced=this._register(new Oi(()=>{this.previousAction.enabled=this.nextAction.enabled=!1},100)),this.toolBar=this._register(l.createInstance(QU,this.nodes.toolBar,qe.InlineSuggestionToolbar,{menuOptions:{renderShortTitle:!0},toolbarOptions:{primaryGroup:g=>g.startsWith("primary")},actionViewItemProvider:(g,p)=>{if(g instanceof il)return l.createInstance(PUe,g,void 0);if(g===this.availableSuggestionCountAction){const _=new AUe(void 0,g,{label:!0,icon:!1});return _.setClass("availableSuggestionCount"),_}},telemetrySource:"InlineSuggestionToolbar"})),this.toolBar.setPrependedPrimaryActions([this.previousAction,this.availableSuggestionCountAction,this.nextAction]),this._register(this.toolBar.onDidChangeDropdownVisibility(g=>{VM._dropDownVisible=g})),this._register(bt(g=>{this._position.read(g),this.editor.layoutContentWidget(this)})),this._register(bt(g=>{const p=this._suggestionCount.read(g),_=this._currentSuggestionIdx.read(g);p!==void 0?(this.clearAvailableSuggestionCountLabelDebounced.cancel(),this.availableSuggestionCountAction.label=`${_+1}/${p}`):this.clearAvailableSuggestionCountLabelDebounced.schedule(),p!==void 0&&p>1?(this.disableButtonsDebounced.cancel(),this.previousAction.enabled=this.nextAction.enabled=!0):this.disableButtonsDebounced.schedule()})),this._register(bt(g=>{const _=this._extraCommands.read(g).map(b=>({class:void 0,id:b.id,enabled:!0,tooltip:b.tooltip||"",label:b.title,run:y=>this._commandService.executeCommand(b.id)}));for(const[b,y]of this.inlineCompletionsActionsMenus.getActions())for(const S of y)S instanceof il&&_.push(S);_.length>0&&_.unshift(new Zs),this.toolBar.setAdditionalSecondaryActions(_)}))}getId(){return this.id}getDomNode(){return this.nodes.root}getPosition(){return{position:this._position.get(),preference:[1,2],positionAffinity:3}}},VM=bm,bm._dropDownVisible=!1,bm.id=0,bm);DS=VM=yY([Jc(6,nn),Jc(7,nt),Jc(8,Di),Jc(9,ht),Jc(10,Gl)],DS);class AUe extends pS{constructor(){super(...arguments),this._className=void 0}setClass(e){this._className=e}render(e){super.render(e),this._className&&e.classList.add(this._className)}updateTooltip(){}}let PUe=class extends Um{updateLabel(){const e=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!e)return super.updateLabel();if(this.label){const t=jt("div.keybinding").root;this._register(new n0(t,Ja,{disableTitle:!0,...Hhe})).set(e),this.label.textContent=this._action.label,this.label.appendChild(t),this.label.classList.add("inlineSuggestionStatusBarItemLabel")}}updateTooltip(){}},QU=class extends lE{constructor(e,t,i,n,s,r,a,l,c){super(e,{resetMenu:t,...i},n,s,r,a,l,c),this.menuId=t,this.options2=i,this.menuService=n,this.contextKeyService=s,this.menu=this._store.add(this.menuService.createMenu(this.menuId,this.contextKeyService,{emitEventsForSubmenuChanges:!0})),this.additionalActions=[],this.prependedPrimaryActions=[],this._store.add(this.menu.onDidChange(()=>this.updateToolbar())),this.updateToolbar()}updateToolbar(){var i,n,s,r,a,l,c;const e=[],t=[];R4(this.menu,(i=this.options2)==null?void 0:i.menuOptions,{primary:e,secondary:t},(s=(n=this.options2)==null?void 0:n.toolbarOptions)==null?void 0:s.primaryGroup,(a=(r=this.options2)==null?void 0:r.toolbarOptions)==null?void 0:a.shouldInlineSubmenu,(c=(l=this.options2)==null?void 0:l.toolbarOptions)==null?void 0:c.useSeparatorsInPrimaryActions),t.push(...this.additionalActions),e.unshift(...this.prependedPrimaryActions),this.setActions(e,t)}setPrependedPrimaryActions(e){En(this.prependedPrimaryActions,e,(t,i)=>t===i)||(this.prependedPrimaryActions=e,this.updateToolbar())}setAdditionalSecondaryActions(e){En(this.additionalActions,e,(t,i)=>t===i)||(this.additionalActions=e,this.updateToolbar())}};QU=yY([Jc(3,Gl),Jc(4,ht),Jc(5,cl),Jc(6,Di),Jc(7,nn),Jc(8,tr)],QU);function a5(o,e,t){const i=os(o);return!(e<i.left||e>i.left+i.width||t<i.top||t>i.top+i.height)}let OUe=class{constructor(e,t,i){this.value=e,this.isComplete=t,this.hasLoadingMessage=i}};class lpe extends X{constructor(e,t){super(),this._editor=e,this._computer=t,this._onResult=this._register(new Y),this.onResult=this._onResult.event,this._firstWaitScheduler=this._register(new Oi(()=>this._triggerAsyncComputation(),0)),this._secondWaitScheduler=this._register(new Oi(()=>this._triggerSyncComputation(),0)),this._loadingMessageScheduler=this._register(new Oi(()=>this._triggerLoadingMessage(),0)),this._state=0,this._asyncIterable=null,this._asyncIterableDone=!1,this._result=[]}dispose(){this._asyncIterable&&(this._asyncIterable.cancel(),this._asyncIterable=null),super.dispose()}get _hoverTime(){return this._editor.getOption(60).delay}get _firstWaitTime(){return this._hoverTime/2}get _secondWaitTime(){return this._hoverTime-this._firstWaitTime}get _loadingMessageTime(){return 3*this._hoverTime}_setState(e,t=!0){this._state=e,t&&this._fireResult()}_triggerAsyncComputation(){this._setState(2),this._secondWaitScheduler.schedule(this._secondWaitTime),this._computer.computeAsync?(this._asyncIterableDone=!1,this._asyncIterable=uDe(e=>this._computer.computeAsync(e)),(async()=>{try{for await(const e of this._asyncIterable)e&&(this._result.push(e),this._fireResult());this._asyncIterableDone=!0,(this._state===3||this._state===4)&&this._setState(0)}catch(e){wt(e)}})()):this._asyncIterableDone=!0}_triggerSyncComputation(){this._computer.computeSync&&(this._result=this._result.concat(this._computer.computeSync())),this._setState(this._asyncIterableDone?0:3)}_triggerLoadingMessage(){this._state===3&&this._setState(4)}_fireResult(){if(this._state===1||this._state===2)return;const e=this._state===0,t=this._state===4;this._onResult.fire(new OUe(this._result.slice(0),e,t))}start(e){if(e===0)this._state===0&&(this._setState(1),this._firstWaitScheduler.schedule(this._firstWaitTime),this._loadingMessageScheduler.schedule(this._loadingMessageTime));else switch(this._state){case 0:this._triggerAsyncComputation(),this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break;case 2:this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break}}cancel(){this._firstWaitScheduler.cancel(),this._secondWaitScheduler.cancel(),this._loadingMessageScheduler.cancel(),this._asyncIterable&&(this._asyncIterable.cancel(),this._asyncIterable=null),this._result=[],this._setState(0,!1)}}class wY{constructor(){this._onDidWillResize=new Y,this.onDidWillResize=this._onDidWillResize.event,this._onDidResize=new Y,this.onDidResize=this._onDidResize.event,this._sashListener=new le,this._size=new Ri(0,0),this._minSize=new Ri(0,0),this._maxSize=new Ri(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),this.domNode=document.createElement("div"),this._eastSash=new Yo(this.domNode,{getVerticalSashLeft:()=>this._size.width},{orientation:0}),this._westSash=new Yo(this.domNode,{getVerticalSashLeft:()=>0},{orientation:0}),this._northSash=new Yo(this.domNode,{getHorizontalSashTop:()=>0},{orientation:1,orthogonalEdge:fP.North}),this._southSash=new Yo(this.domNode,{getHorizontalSashTop:()=>this._size.height},{orientation:1,orthogonalEdge:fP.South}),this._northSash.orthogonalStartSash=this._westSash,this._northSash.orthogonalEndSash=this._eastSash,this._southSash.orthogonalStartSash=this._westSash,this._southSash.orthogonalEndSash=this._eastSash;let e,t=0,i=0;this._sashListener.add(Ee.any(this._northSash.onDidStart,this._eastSash.onDidStart,this._southSash.onDidStart,this._westSash.onDidStart)(()=>{e===void 0&&(this._onDidWillResize.fire(),e=this._size,t=0,i=0)})),this._sashListener.add(Ee.any(this._northSash.onDidEnd,this._eastSash.onDidEnd,this._southSash.onDidEnd,this._westSash.onDidEnd)(()=>{e!==void 0&&(e=void 0,t=0,i=0,this._onDidResize.fire({dimension:this._size,done:!0}))})),this._sashListener.add(this._eastSash.onDidChange(n=>{e&&(i=n.currentX-n.startX,this.layout(e.height+t,e.width+i),this._onDidResize.fire({dimension:this._size,done:!1,east:!0}))})),this._sashListener.add(this._westSash.onDidChange(n=>{e&&(i=-(n.currentX-n.startX),this.layout(e.height+t,e.width+i),this._onDidResize.fire({dimension:this._size,done:!1,west:!0}))})),this._sashListener.add(this._northSash.onDidChange(n=>{e&&(t=-(n.currentY-n.startY),this.layout(e.height+t,e.width+i),this._onDidResize.fire({dimension:this._size,done:!1,north:!0}))})),this._sashListener.add(this._southSash.onDidChange(n=>{e&&(t=n.currentY-n.startY,this.layout(e.height+t,e.width+i),this._onDidResize.fire({dimension:this._size,done:!1,south:!0}))})),this._sashListener.add(Ee.any(this._eastSash.onDidReset,this._westSash.onDidReset)(n=>{this._preferredSize&&(this.layout(this._size.height,this._preferredSize.width),this._onDidResize.fire({dimension:this._size,done:!0}))})),this._sashListener.add(Ee.any(this._northSash.onDidReset,this._southSash.onDidReset)(n=>{this._preferredSize&&(this.layout(this._preferredSize.height,this._size.width),this._onDidResize.fire({dimension:this._size,done:!0}))}))}dispose(){this._northSash.dispose(),this._southSash.dispose(),this._eastSash.dispose(),this._westSash.dispose(),this._sashListener.dispose(),this._onDidResize.dispose(),this._onDidWillResize.dispose(),this.domNode.remove()}enableSashes(e,t,i,n){this._northSash.state=e?3:0,this._eastSash.state=t?3:0,this._southSash.state=i?3:0,this._westSash.state=n?3:0}layout(e=this.size.height,t=this.size.width){const{height:i,width:n}=this._minSize,{height:s,width:r}=this._maxSize;e=Math.max(i,Math.min(s,e)),t=Math.max(n,Math.min(r,t));const a=new Ri(t,e);Ri.equals(a,this._size)||(this.domNode.style.height=e+"px",this.domNode.style.width=t+"px",this._size=a,this._northSash.layout(),this._eastSash.layout(),this._southSash.layout(),this._westSash.layout())}clearSashHoverState(){this._eastSash.clearSashHoverState(),this._westSash.clearSashHoverState(),this._northSash.clearSashHoverState(),this._southSash.clearSashHoverState()}get size(){return this._size}set maxSize(e){this._maxSize=e}get maxSize(){return this._maxSize}set minSize(e){this._minSize=e}get minSize(){return this._minSize}set preferredSize(e){this._preferredSize=e}get preferredSize(){return this._preferredSize}}const FUe=30,BUe=24;class WUe extends X{constructor(e,t=new Ri(10,10)){super(),this._editor=e,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._resizableNode=this._register(new wY),this._contentPosition=null,this._isResizing=!1,this._resizableNode.domNode.style.position="absolute",this._resizableNode.minSize=Ri.lift(t),this._resizableNode.layout(t.height,t.width),this._resizableNode.enableSashes(!0,!0,!0,!0),this._register(this._resizableNode.onDidResize(i=>{this._resize(new Ri(i.dimension.width,i.dimension.height)),i.done&&(this._isResizing=!1)})),this._register(this._resizableNode.onDidWillResize(()=>{this._isResizing=!0}))}get isResizing(){return this._isResizing}getDomNode(){return this._resizableNode.domNode}getPosition(){return this._contentPosition}get position(){var e;return(e=this._contentPosition)!=null&&e.position?G.lift(this._contentPosition.position):void 0}_availableVerticalSpaceAbove(e){const t=this._editor.getDomNode(),i=this._editor.getScrolledVisiblePosition(e);return!t||!i?void 0:os(t).top+i.top-FUe}_availableVerticalSpaceBelow(e){const t=this._editor.getDomNode(),i=this._editor.getScrolledVisiblePosition(e);if(!t||!i)return;const n=os(t),s=Wm(t.ownerDocument.body),r=n.top+i.top+i.height;return s.height-r-BUe}_findPositionPreference(e,t){const i=Math.min(this._availableVerticalSpaceBelow(t)??1/0,e),n=Math.min(this._availableVerticalSpaceAbove(t)??1/0,e),s=Math.min(Math.max(n,i),e),r=Math.min(e,s);let a;return this._editor.getOption(60).above?a=r<=n?1:2:a=r<=i?2:1,a===1?this._resizableNode.enableSashes(!0,!0,!1,!1):this._resizableNode.enableSashes(!1,!0,!0,!1),a}_resize(e){this._resizableNode.layout(e.height,e.width)}}var HUe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},WR=function(o,e){return function(t,i){e(t,i,o)}},Ju;const Dre=30,VUe=6;var Cm;let JU=(Cm=class extends WUe{get isVisibleFromKeyboard(){var e;return((e=this._renderedHover)==null?void 0:e.source)===1}get isVisible(){return this._hoverVisibleKey.get()??!1}get isFocused(){return this._hoverFocusedKey.get()??!1}constructor(e,t,i,n,s){const r=e.getOption(67)+8,a=150,l=new Ri(a,r);super(e,l),this._configurationService=i,this._accessibilityService=n,this._keybindingService=s,this._hover=this._register(new yK),this._onDidResize=this._register(new Y),this.onDidResize=this._onDidResize.event,this._minimumSize=l,this._hoverVisibleKey=B.hoverVisible.bindTo(t),this._hoverFocusedKey=B.hoverFocused.bindTo(t),ge(this._resizableNode.domNode,this._hover.containerDomNode),this._resizableNode.domNode.style.zIndex="50",this._register(this._editor.onDidLayoutChange(()=>{this.isVisible&&this._updateMaxDimensions()})),this._register(this._editor.onDidChangeConfiguration(u=>{u.hasChanged(50)&&this._updateFont()}));const c=this._register(pu(this._resizableNode.domNode));this._register(c.onDidFocus(()=>{this._hoverFocusedKey.set(!0)})),this._register(c.onDidBlur(()=>{this._hoverFocusedKey.set(!1)})),this._setRenderedHover(void 0),this._editor.addContentWidget(this)}dispose(){var e;super.dispose(),(e=this._renderedHover)==null||e.dispose(),this._editor.removeContentWidget(this)}getId(){return Ju.ID}static _applyDimensions(e,t,i){const n=typeof t=="number"?`${t}px`:t,s=typeof i=="number"?`${i}px`:i;e.style.width=n,e.style.height=s}_setContentsDomNodeDimensions(e,t){const i=this._hover.contentsDomNode;return Ju._applyDimensions(i,e,t)}_setContainerDomNodeDimensions(e,t){const i=this._hover.containerDomNode;return Ju._applyDimensions(i,e,t)}_setHoverWidgetDimensions(e,t){this._setContentsDomNodeDimensions(e,t),this._setContainerDomNodeDimensions(e,t),this._layoutContentWidget()}static _applyMaxDimensions(e,t,i){const n=typeof t=="number"?`${t}px`:t,s=typeof i=="number"?`${i}px`:i;e.style.maxWidth=n,e.style.maxHeight=s}_setHoverWidgetMaxDimensions(e,t){Ju._applyMaxDimensions(this._hover.contentsDomNode,e,t),Ju._applyMaxDimensions(this._hover.containerDomNode,e,t),this._hover.containerDomNode.style.setProperty("--vscode-hover-maxWidth",typeof e=="number"?`${e}px`:e),this._layoutContentWidget()}_setAdjustedHoverWidgetDimensions(e){this._setHoverWidgetMaxDimensions("none","none");const t=e.width,i=e.height;this._setHoverWidgetDimensions(t,i)}_updateResizableNodeMaxDimensions(){const e=this._findMaximumRenderingWidth()??1/0,t=this._findMaximumRenderingHeight()??1/0;this._resizableNode.maxSize=new Ri(e,t),this._setHoverWidgetMaxDimensions(e,t)}_resize(e){Ju._lastDimensions=new Ri(e.width,e.height),this._setAdjustedHoverWidgetDimensions(e),this._resizableNode.layout(e.height,e.width),this._updateResizableNodeMaxDimensions(),this._hover.scrollbar.scanDomNode(),this._editor.layoutContentWidget(this),this._onDidResize.fire()}_findAvailableSpaceVertically(){var t;const e=(t=this._renderedHover)==null?void 0:t.showAtPosition;if(e)return this._positionPreference===1?this._availableVerticalSpaceAbove(e):this._availableVerticalSpaceBelow(e)}_findMaximumRenderingHeight(){const e=this._findAvailableSpaceVertically();if(!e)return;let t=VUe;return Array.from(this._hover.contentsDomNode.children).forEach(i=>{t+=i.clientHeight}),Math.min(e,t)}_isHoverTextOverflowing(){this._hover.containerDomNode.style.setProperty("--vscode-hover-whiteSpace","nowrap"),this._hover.containerDomNode.style.setProperty("--vscode-hover-sourceWhiteSpace","nowrap");const e=Array.from(this._hover.contentsDomNode.children).some(t=>t.scrollWidth>t.clientWidth);return this._hover.containerDomNode.style.removeProperty("--vscode-hover-whiteSpace"),this._hover.containerDomNode.style.removeProperty("--vscode-hover-sourceWhiteSpace"),e}_findMaximumRenderingWidth(){if(!this._editor||!this._editor.hasModel())return;const e=this._isHoverTextOverflowing(),t=typeof this._contentWidth>"u"?0:this._contentWidth-2;return e||this._hover.containerDomNode.clientWidth<t?Wm(this._hover.containerDomNode.ownerDocument.body).width-14:this._hover.containerDomNode.clientWidth+2}isMouseGettingCloser(e,t){if(!this._renderedHover)return!1;if(this._renderedHover.initialMousePosX===void 0||this._renderedHover.initialMousePosY===void 0)return this._renderedHover.initialMousePosX=e,this._renderedHover.initialMousePosY=t,!1;const i=os(this.getDomNode());this._renderedHover.closestMouseDistance===void 0&&(this._renderedHover.closestMouseDistance=Ere(this._renderedHover.initialMousePosX,this._renderedHover.initialMousePosY,i.left,i.top,i.width,i.height));const n=Ere(e,t,i.left,i.top,i.width,i.height);return n>this._renderedHover.closestMouseDistance+4?!1:(this._renderedHover.closestMouseDistance=Math.min(this._renderedHover.closestMouseDistance,n),!0)}_setRenderedHover(e){var t;(t=this._renderedHover)==null||t.dispose(),this._renderedHover=e,this._hoverVisibleKey.set(!!e),this._hover.containerDomNode.classList.toggle("hidden",!e)}_updateFont(){const{fontSize:e,lineHeight:t}=this._editor.getOption(50),i=this._hover.contentsDomNode;i.style.fontSize=`${e}px`,i.style.lineHeight=`${t/e}`,Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach(s=>this._editor.applyFontInfo(s))}_updateContent(e){const t=this._hover.contentsDomNode;t.style.paddingBottom="",t.textContent="",t.appendChild(e)}_layoutContentWidget(){this._editor.layoutContentWidget(this),this._hover.onContentsChanged()}_updateMaxDimensions(){const e=Math.max(this._editor.getLayoutInfo().height/4,250,Ju._lastDimensions.height),t=Math.max(this._editor.getLayoutInfo().width*.66,500,Ju._lastDimensions.width);this._setHoverWidgetMaxDimensions(t,e)}_render(e){this._setRenderedHover(e),this._updateFont(),this._updateContent(e.domNode),this._updateMaxDimensions(),this.onContentsChanged(),this._editor.render()}getPosition(){return this._renderedHover?{position:this._renderedHover.showAtPosition,secondaryPosition:this._renderedHover.showAtSecondaryPosition,positionAffinity:this._renderedHover.shouldAppearBeforeContent?3:void 0,preference:[this._positionPreference??1]}:null}show(e){var r;if(!this._editor||!this._editor.hasModel())return;this._render(e);const t=Jf(this._hover.containerDomNode),i=e.showAtPosition;this._positionPreference=this._findPositionPreference(t,i)??1,this.onContentsChanged(),e.shouldFocus&&this._hover.containerDomNode.focus(),this._onDidResize.fire();const s=this._hover.containerDomNode.ownerDocument.activeElement===this._hover.containerDomNode&&$de(this._configurationService.getValue("accessibility.verbosity.hover")===!0&&this._accessibilityService.isScreenReaderOptimized(),((r=this._keybindingService.lookupKeybinding("editor.action.accessibleView"))==null?void 0:r.getAriaLabel())??"");s&&(this._hover.contentsDomNode.ariaLabel=this._hover.contentsDomNode.textContent+", "+s)}hide(){if(!this._renderedHover)return;const e=this._renderedHover.shouldFocus||this._hoverFocusedKey.get();this._setRenderedHover(void 0),this._resizableNode.maxSize=new Ri(1/0,1/0),this._resizableNode.clearSashHoverState(),this._hoverFocusedKey.set(!1),this._editor.layoutContentWidget(this),e&&this._editor.focus()}_removeConstraintsRenderNormally(){const e=this._editor.getLayoutInfo();this._resizableNode.layout(e.height,e.width),this._setHoverWidgetDimensions("auto","auto")}setMinimumDimensions(e){this._minimumSize=new Ri(Math.max(this._minimumSize.width,e.width),Math.max(this._minimumSize.height,e.height)),this._updateMinimumWidth()}_updateMinimumWidth(){const e=typeof this._contentWidth>"u"?this._minimumSize.width:Math.min(this._contentWidth,this._minimumSize.width);this._resizableNode.minSize=new Ri(e,this._minimumSize.height)}onContentsChanged(){var n;this._removeConstraintsRenderNormally();const e=this._hover.containerDomNode;let t=Jf(e),i=qa(e);if(this._resizableNode.layout(t,i),this._setHoverWidgetDimensions(i,t),t=Jf(e),i=qa(e),this._contentWidth=i,this._updateMinimumWidth(),this._resizableNode.layout(t,i),(n=this._renderedHover)!=null&&n.showAtPosition){const s=Jf(this._hover.containerDomNode);this._positionPreference=this._findPositionPreference(s,this._renderedHover.showAtPosition)}this._layoutContentWidget()}focus(){this._hover.containerDomNode.focus()}scrollUp(){const e=this._hover.scrollbar.getScrollPosition().scrollTop,t=this._editor.getOption(50);this._hover.scrollbar.setScrollPosition({scrollTop:e-t.lineHeight})}scrollDown(){const e=this._hover.scrollbar.getScrollPosition().scrollTop,t=this._editor.getOption(50);this._hover.scrollbar.setScrollPosition({scrollTop:e+t.lineHeight})}scrollLeft(){const e=this._hover.scrollbar.getScrollPosition().scrollLeft;this._hover.scrollbar.setScrollPosition({scrollLeft:e-Dre})}scrollRight(){const e=this._hover.scrollbar.getScrollPosition().scrollLeft;this._hover.scrollbar.setScrollPosition({scrollLeft:e+Dre})}pageUp(){const e=this._hover.scrollbar.getScrollPosition().scrollTop,t=this._hover.scrollbar.getScrollDimensions().height;this._hover.scrollbar.setScrollPosition({scrollTop:e-t})}pageDown(){const e=this._hover.scrollbar.getScrollPosition().scrollTop,t=this._hover.scrollbar.getScrollDimensions().height;this._hover.scrollbar.setScrollPosition({scrollTop:e+t})}goToTop(){this._hover.scrollbar.setScrollPosition({scrollTop:0})}goToBottom(){this._hover.scrollbar.setScrollPosition({scrollTop:this._hover.scrollbar.getScrollDimensions().scrollHeight})}},Ju=Cm,Cm.ID="editor.contrib.resizableContentHoverWidget",Cm._lastDimensions=new Ri(0,0),Cm);JU=Ju=HUe([WR(1,ht),WR(2,Ht),WR(3,dl),WR(4,Di)],JU);function Ere(o,e,t,i,n,s){const r=t+n/2,a=i+s/2,l=Math.max(Math.abs(o-r)-n/2,0),c=Math.max(Math.abs(e-a)-s/2,0);return Math.sqrt(l*l+c*c)}class lO{get anchor(){return this._anchor}set anchor(e){this._anchor=e}get shouldFocus(){return this._shouldFocus}set shouldFocus(e){this._shouldFocus=e}get source(){return this._source}set source(e){this._source=e}get insistOnKeepingHoverVisible(){return this._insistOnKeepingHoverVisible}set insistOnKeepingHoverVisible(e){this._insistOnKeepingHoverVisible=e}constructor(e,t){this._editor=e,this._participants=t,this._anchor=null,this._shouldFocus=!1,this._source=0,this._insistOnKeepingHoverVisible=!1}static _getLineDecorations(e,t){if(t.type!==1&&!t.supportsMarkerHover)return[];const i=e.getModel(),n=t.range.startLineNumber;if(n>i.getLineCount())return[];const s=i.getLineMaxColumn(n);return e.getLineDecorations(n).filter(r=>{if(r.options.isWholeLine)return!0;const a=r.range.startLineNumber===n?r.range.startColumn:1,l=r.range.endLineNumber===n?r.range.endColumn:s;if(r.options.showIfCollapsed){if(a>t.range.startColumn+1||t.range.endColumn-1>l)return!1}else if(a>t.range.startColumn||t.range.endColumn>l)return!1;return!0})}computeAsync(e){const t=this._anchor;if(!this._editor.hasModel()||!t)return Fl.EMPTY;const i=lO._getLineDecorations(this._editor,t);return Fl.merge(this._participants.map(n=>n.computeAsync?n.computeAsync(t,i,e):Fl.EMPTY))}computeSync(){if(!this._editor.hasModel()||!this._anchor)return[];const e=lO._getLineDecorations(this._editor,this._anchor);let t=[];for(const i of this._participants)t=t.concat(i.computeSync(this._anchor,e));return rd(t)}}class cpe{constructor(e,t,i){this.anchor=e,this.hoverParts=t,this.isComplete=i}filter(e){const t=this.hoverParts.filter(i=>i.isValidForHoverAnchor(e));return t.length===this.hoverParts.length?this:new zUe(this,this.anchor,t,this.isComplete)}}class zUe extends cpe{constructor(e,t,i,n){super(t,i,n),this.original=e}filter(e){return this.original.filter(e)}}var UUe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},$Ue=function(o,e){return function(t,i){e(t,i,o)}};const Ire=xe;let cO=class extends X{get hasContent(){return this._hasContent}constructor(e){super(),this._keybindingService=e,this.actions=[],this._hasContent=!1,this.hoverElement=Ire("div.hover-row.status-bar"),this.hoverElement.tabIndex=0,this.actionsElement=ge(this.hoverElement,Ire("div.actions"))}addAction(e){const t=this._keybindingService.lookupKeybinding(e.commandId),i=t?t.getLabel():null;this._hasContent=!0;const n=this._register(C4.render(this.actionsElement,e,i));return this.actions.push(n),n}append(e){const t=ge(this.actionsElement,e);return this._hasContent=!0,t}};cO=UUe([$Ue(0,Di)],cO);class jUe{constructor(e,t,i){this.provider=e,this.hover=t,this.ordinal=i}}async function qUe(o,e,t,i,n){const s=await Promise.resolve(o.provideHover(t,i,n)).catch(rs);if(!(!s||!KUe(s)))return new jUe(o,s,e)}function SY(o,e,t,i,n=!1){const r=o.ordered(e,n).map((a,l)=>qUe(a,l,e,t,i));return Fl.fromPromises(r).coalesce()}function dpe(o,e,t,i,n=!1){return SY(o,e,t,i,n).map(s=>s.hover).toPromise()}Ra("_executeHoverProvider",(o,e,t)=>{const i=o.get(Ue);return dpe(i.hoverProvider,e,t,Mt.None)});Ra("_executeHoverProvider_recursive",(o,e,t)=>{const i=o.get(Ue);return dpe(i.hoverProvider,e,t,Mt.None,!0)});function KUe(o){const e=typeof o.range<"u",t=typeof o.contents<"u"&&o.contents&&o.contents.length>0;return e&&t}var GUe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Q_=function(o,e){return function(t,i){e(t,i,o)}};const jw=xe,YUe=hn("hover-increase-verbosity",Se.add,v("increaseHoverVerbosity","Icon for increaseing hover verbosity.")),ZUe=hn("hover-decrease-verbosity",Se.remove,v("decreaseHoverVerbosity","Icon for decreasing hover verbosity."));class ed{constructor(e,t,i,n,s,r=void 0){this.owner=e,this.range=t,this.contents=i,this.isBeforeContent=n,this.ordinal=s,this.source=r}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}class upe{constructor(e,t,i){this.hover=e,this.hoverProvider=t,this.hoverPosition=i}supportsVerbosityAction(e){switch(e){case Ya.Increase:return this.hover.canIncreaseVerbosity??!1;case Ya.Decrease:return this.hover.canDecreaseVerbosity??!1}}}let CE=class{constructor(e,t,i,n,s,r,a,l){this._editor=e,this._languageService=t,this._openerService=i,this._configurationService=n,this._languageFeaturesService=s,this._keybindingService=r,this._hoverService=a,this._commandService=l,this.hoverOrdinal=3}createLoadingMessage(e){return new ed(this,e.range,[new Xo().appendText(v("modesContentHover.loading","Loading..."))],!1,2e3)}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1)return[];const i=this._editor.getModel(),n=e.range.startLineNumber,s=i.getLineMaxColumn(n),r=[];let a=1e3;const l=i.getLineLength(n),c=i.getLanguageIdAtPosition(e.range.startLineNumber,e.range.startColumn),u=this._editor.getOption(118),f=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:c});let g=!1;u>=0&&l>u&&e.range.startColumn>=u&&(g=!0,r.push(new ed(this,e.range,[{value:v("stopped rendering","Rendering paused for long line for performance reasons. This can be configured via `editor.stopRenderingLineAfter`.")}],!1,a++))),!g&&typeof f=="number"&&l>=f&&r.push(new ed(this,e.range,[{value:v("too many characters","Tokenization is skipped for long lines for performance reasons. This can be configured via `editor.maxTokenizationLineLength`.")}],!1,a++));let p=!1;for(const _ of t){const b=_.range.startLineNumber===n?_.range.startColumn:1,y=_.range.endLineNumber===n?_.range.endColumn:s,S=_.options.hoverMessage;if(!S||dS(S))continue;_.options.beforeContentClassName&&(p=!0);const L=new M(e.range.startLineNumber,b,e.range.startLineNumber,y);r.push(new ed(this,L,Cq(S),p,a++))}return r}computeAsync(e,t,i){if(!this._editor.hasModel()||e.type!==1)return Fl.EMPTY;const n=this._editor.getModel(),s=this._languageFeaturesService.hoverProvider;return s.has(n)?this._getMarkdownHovers(s,n,e,i):Fl.EMPTY}_getMarkdownHovers(e,t,i,n){const s=i.range.getStartPosition();return SY(e,t,s,n).filter(l=>!dS(l.hover.contents)).map(l=>{const c=l.hover.range?M.lift(l.hover.range):i.range,u=new upe(l.hover,l.provider,s);return new ed(this,c,l.hover.contents,!1,l.ordinal,u)})}renderHoverParts(e,t){return this._renderedHoverParts=new XUe(t,e.fragment,this,this._editor,this._languageService,this._openerService,this._commandService,this._keybindingService,this._hoverService,this._configurationService,e.onContentsChanged),this._renderedHoverParts}updateMarkdownHoverVerbosityLevel(e,t,i){var n;return Promise.resolve((n=this._renderedHoverParts)==null?void 0:n.updateMarkdownHoverPartVerbosityLevel(e,t,i))}};CE=GUe([Q_(1,In),Q_(2,Ma),Q_(3,Ht),Q_(4,Ue),Q_(5,Di),Q_(6,qh),Q_(7,nn)],CE);class HR{constructor(e,t,i){this.hoverPart=e,this.hoverElement=t,this.disposables=i}dispose(){this.disposables.dispose()}}class XUe{constructor(e,t,i,n,s,r,a,l,c,u,f){this._hoverParticipant=i,this._editor=n,this._languageService=s,this._openerService=r,this._commandService=a,this._keybindingService=l,this._hoverService=c,this._configurationService=u,this._onFinishedRendering=f,this._ongoingHoverOperations=new Map,this._disposables=new le,this.renderedHoverParts=this._renderHoverParts(e,t,this._onFinishedRendering),this._disposables.add(it(()=>{this.renderedHoverParts.forEach(g=>{g.dispose()}),this._ongoingHoverOperations.forEach(g=>{g.tokenSource.dispose(!0)})}))}_renderHoverParts(e,t,i){return e.sort(Yr(n=>n.ordinal,sd)),e.map(n=>{const s=this._renderHoverPart(n,i);return t.appendChild(s.hoverElement),s})}_renderHoverPart(e,t){const i=this._renderMarkdownHover(e,t),n=i.hoverElement,s=e.source,r=new le;if(r.add(i),!s)return new HR(e,n,r);const a=s.supportsVerbosityAction(Ya.Increase),l=s.supportsVerbosityAction(Ya.Decrease);if(!a&&!l)return new HR(e,n,r);const c=jw("div.verbosity-actions");return n.prepend(c),r.add(this._renderHoverExpansionAction(c,Ya.Increase,a)),r.add(this._renderHoverExpansionAction(c,Ya.Decrease,l)),new HR(e,n,r)}_renderMarkdownHover(e,t){return hpe(this._editor,e,this._languageService,this._openerService,t)}_renderHoverExpansionAction(e,t,i){const n=new le,s=t===Ya.Increase,r=ge(e,jw(ut.asCSSSelector(s?YUe:ZUe)));r.tabIndex=0;const a=new aS("mouse",!1,{target:e,position:{hoverPosition:0}},this._configurationService,this._hoverService);if(n.add(this._hoverService.setupManagedHover(a,r,JUe(this._keybindingService,t))),!i)return r.classList.add("disabled"),n;r.classList.add("enabled");const l=()=>this._commandService.executeCommand(t===Ya.Increase?o5:r5);return n.add(new jde(r,l)),n.add(new qde(r,l,[3,10])),n}async updateMarkdownHoverPartVerbosityLevel(e,t,i=!0){const n=this._editor.getModel();if(!n)return;const s=this._getRenderedHoverPartAtIndex(t),r=s==null?void 0:s.hoverPart.source;if(!s||!(r!=null&&r.supportsVerbosityAction(e)))return;const a=await this._fetchHover(r,n,e);if(!a)return;const l=new upe(a,r.hoverProvider,r.hoverPosition),c=s.hoverPart,u=new ed(this._hoverParticipant,c.range,a.contents,c.isBeforeContent,c.ordinal,l),f=this._renderHoverPart(u,this._onFinishedRendering);return this._replaceRenderedHoverPartAtIndex(t,f,u),i&&this._focusOnHoverPartWithIndex(t),{hoverPart:u,hoverElement:f.hoverElement}}async _fetchHover(e,t,i){let n=i===Ya.Increase?1:-1;const s=e.hoverProvider,r=this._ongoingHoverOperations.get(s);r&&(r.tokenSource.cancel(),n+=r.verbosityDelta);const a=new An;this._ongoingHoverOperations.set(s,{verbosityDelta:n,tokenSource:a});const l={verbosityRequest:{verbosityDelta:n,previousHover:e.hover}};let c;try{c=await Promise.resolve(s.provideHover(t,e.hoverPosition,a.token,l))}catch(u){rs(u)}return a.dispose(),this._ongoingHoverOperations.delete(s),c}_replaceRenderedHoverPartAtIndex(e,t,i){if(e>=this.renderedHoverParts.length||e<0)return;const n=this.renderedHoverParts[e],s=n.hoverElement,r=t.hoverElement,a=Array.from(r.children);s.replaceChildren(...a);const l=new HR(i,s,t.disposables);s.focus(),n.dispose(),this.renderedHoverParts[e]=l}_focusOnHoverPartWithIndex(e){this.renderedHoverParts[e].hoverElement.focus()}_getRenderedHoverPartAtIndex(e){return this.renderedHoverParts[e]}dispose(){this._disposables.dispose()}}function QUe(o,e,t,i,n){e.sort(Yr(r=>r.ordinal,sd));const s=[];for(const r of e)s.push(hpe(t,r,i,n,o.onContentsChanged));return new xC(s)}function hpe(o,e,t,i,n){const s=new le,r=jw("div.hover-row"),a=jw("div.hover-row-contents");r.appendChild(a);const l=e.contents;for(const u of l){if(dS(u))continue;const f=jw("div.markdown-hover"),g=ge(f,jw("div.hover-contents")),p=s.add(new kg({editor:o},t,i));s.add(p.onDidRenderAsync(()=>{g.className="hover-contents code-hover-contents",n()}));const _=s.add(p.render(u));g.appendChild(_.element),a.appendChild(f)}return{hoverPart:e,hoverElement:r,dispose(){s.dispose()}}}function JUe(o,e){switch(e){case Ya.Increase:{const t=o.lookupKeybinding(o5);return t?v("increaseVerbosityWithKb","Increase Hover Verbosity ({0})",t.getLabel()):v("increaseVerbosity","Increase Hover Verbosity")}case Ya.Decrease:{const t=o.lookupKeybinding(r5);return t?v("decreaseVerbosityWithKb","Decrease Hover Verbosity ({0})",t.getLabel()):v("decreaseVerbosity","Decrease Hover Verbosity")}}}function e$(o,e){return!!o[e]}class g9{constructor(e,t){this.target=e.target,this.isLeftClick=e.event.leftButton,this.isMiddleClick=e.event.middleButton,this.isRightClick=e.event.rightButton,this.hasTriggerModifier=e$(e.event,t.triggerModifier),this.hasSideBySideModifier=e$(e.event,t.triggerSideBySideModifier),this.isNoneOrSingleMouseDown=e.event.detail<=1}}class Tre{constructor(e,t){this.keyCodeIsTriggerKey=e.keyCode===t.triggerKey,this.keyCodeIsSideBySideKey=e.keyCode===t.triggerSideBySideKey,this.hasTriggerModifier=e$(e,t.triggerModifier)}}class VR{constructor(e,t,i,n){this.triggerKey=e,this.triggerModifier=t,this.triggerSideBySideKey=i,this.triggerSideBySideModifier=n}equals(e){return this.triggerKey===e.triggerKey&&this.triggerModifier===e.triggerModifier&&this.triggerSideBySideKey===e.triggerSideBySideKey&&this.triggerSideBySideModifier===e.triggerSideBySideModifier}}function Nre(o){return o==="altKey"?Kt?new VR(57,"metaKey",6,"altKey"):new VR(5,"ctrlKey",6,"altKey"):Kt?new VR(6,"altKey",57,"metaKey"):new VR(6,"altKey",5,"ctrlKey")}class l5 extends X{constructor(e,t){super(),this._onMouseMoveOrRelevantKeyDown=this._register(new Y),this.onMouseMoveOrRelevantKeyDown=this._onMouseMoveOrRelevantKeyDown.event,this._onExecute=this._register(new Y),this.onExecute=this._onExecute.event,this._onCancel=this._register(new Y),this.onCancel=this._onCancel.event,this._editor=e,this._extractLineNumberFromMouseEvent=(t==null?void 0:t.extractLineNumberFromMouseEvent)??(i=>i.target.position?i.target.position.lineNumber:0),this._opts=Nre(this._editor.getOption(78)),this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._register(this._editor.onDidChangeConfiguration(i=>{if(i.hasChanged(78)){const n=Nre(this._editor.getOption(78));if(this._opts.equals(n))return;this._opts=n,this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._onCancel.fire()}})),this._register(this._editor.onMouseMove(i=>this._onEditorMouseMove(new g9(i,this._opts)))),this._register(this._editor.onMouseDown(i=>this._onEditorMouseDown(new g9(i,this._opts)))),this._register(this._editor.onMouseUp(i=>this._onEditorMouseUp(new g9(i,this._opts)))),this._register(this._editor.onKeyDown(i=>this._onEditorKeyDown(new Tre(i,this._opts)))),this._register(this._editor.onKeyUp(i=>this._onEditorKeyUp(new Tre(i,this._opts)))),this._register(this._editor.onMouseDrag(()=>this._resetHandler())),this._register(this._editor.onDidChangeCursorSelection(i=>this._onDidChangeCursorSelection(i))),this._register(this._editor.onDidChangeModel(i=>this._resetHandler())),this._register(this._editor.onDidChangeModelContent(()=>this._resetHandler())),this._register(this._editor.onDidScrollChange(i=>{(i.scrollTopChanged||i.scrollLeftChanged)&&this._resetHandler()}))}_onDidChangeCursorSelection(e){e.selection&&e.selection.startColumn!==e.selection.endColumn&&this._resetHandler()}_onEditorMouseMove(e){this._lastMouseMoveEvent=e,this._onMouseMoveOrRelevantKeyDown.fire([e,null])}_onEditorMouseDown(e){this._hasTriggerKeyOnMouseDown=e.hasTriggerModifier,this._lineNumberOnMouseDown=this._extractLineNumberFromMouseEvent(e)}_onEditorMouseUp(e){const t=this._extractLineNumberFromMouseEvent(e);this._hasTriggerKeyOnMouseDown&&this._lineNumberOnMouseDown&&this._lineNumberOnMouseDown===t&&this._onExecute.fire(e)}_onEditorKeyDown(e){this._lastMouseMoveEvent&&(e.keyCodeIsTriggerKey||e.keyCodeIsSideBySideKey&&e.hasTriggerModifier)?this._onMouseMoveOrRelevantKeyDown.fire([this._lastMouseMoveEvent,e]):e.hasTriggerModifier&&this._onCancel.fire()}_onEditorKeyUp(e){e.keyCodeIsTriggerKey&&this._onCancel.fire()}_resetHandler(){this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._onCancel.fire()}}class fpe{constructor(e,t){this.range=e,this.direction=t}}class LY{constructor(e,t,i){this.hint=e,this.anchor=t,this.provider=i,this._isResolved=!1}with(e){const t=new LY(this.hint,e.anchor,this.provider);return t._isResolved=this._isResolved,t._currentResolve=this._currentResolve,t}async resolve(e){if(typeof this.provider.resolveInlayHint=="function"){if(this._currentResolve)return await this._currentResolve,e.isCancellationRequested?void 0:this.resolve(e);this._isResolved||(this._currentResolve=this._doResolve(e).finally(()=>this._currentResolve=void 0)),await this._currentResolve}}async _doResolve(e){try{const t=await Promise.resolve(this.provider.resolveInlayHint(this.hint,e));this.hint.tooltip=(t==null?void 0:t.tooltip)??this.hint.tooltip,this.hint.label=(t==null?void 0:t.label)??this.hint.label,this.hint.textEdits=(t==null?void 0:t.textEdits)??this.hint.textEdits,this._isResolved=!0}catch(t){rs(t),this._isResolved=!1}}}const l1=class l1{static async create(e,t,i,n){const s=[],r=e.ordered(t).reverse().map(a=>i.map(async l=>{try{const c=await a.provideInlayHints(t,l,n);(c!=null&&c.hints.length||a.onDidChangeInlayHints)&&s.push([c??l1._emptyInlayHintList,a])}catch(c){rs(c)}}));if(await Promise.all(r.flat()),n.isCancellationRequested||t.isDisposed())throw new ad;return new l1(i,s,t)}constructor(e,t,i){this._disposables=new le,this.ranges=e,this.provider=new Set;const n=[];for(const[s,r]of t){this._disposables.add(s),this.provider.add(r);for(const a of s.hints){const l=i.validatePosition(a.position);let c="before";const u=l1._getRangeAtPosition(i,l);let f;u.getStartPosition().isBefore(l)?(f=M.fromPositions(u.getStartPosition(),l),c="after"):(f=M.fromPositions(l,u.getEndPosition()),c="before"),n.push(new LY(a,new fpe(f,c),r))}}this.items=n.sort((s,r)=>G.compare(s.hint.position,r.hint.position))}dispose(){this._disposables.dispose()}static _getRangeAtPosition(e,t){const i=t.lineNumber,n=e.getWordAtPosition(t);if(n)return new M(i,n.startColumn,i,n.endColumn);e.tokenization.tokenizeIfCheap(i);const s=e.tokenization.getLineTokens(i),r=t.column-1,a=s.findTokenIndexAtOffset(r);let l=s.getStartOffset(a),c=s.getEndOffset(a);return c-l===1&&(l===r&&a>1?(l=s.getStartOffset(a-1),c=s.getEndOffset(a-1)):c===r&&a<s.getCount()-1&&(l=s.getStartOffset(a+1),c=s.getEndOffset(a+1))),new M(i,l+1,i,c+1)}};l1._emptyInlayHintList=Object.freeze({dispose(){},hints:[]});let dO=l1;function e$e(o){return st.from({scheme:Lt.command,path:o.id,query:o.arguments&&encodeURIComponent(JSON.stringify(o.arguments))}).toString()}var t$e=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Lf=function(o,e){return function(t,i){e(t,i,o)}};let fd=class extends oE{constructor(e,t,i,n,s,r,a,l,c,u,f,g,p){super(e,{...n.getRawOptions(),overflowWidgetsDomNode:n.getOverflowWidgetsDomNode()},i,s,r,a,l,c,u,f,g,p),this._parentEditor=n,this._overwriteOptions=t,super.updateOptions(this._overwriteOptions),this._register(n.onDidChangeConfiguration(_=>this._onParentConfigurationChanged(_)))}getParentEditor(){return this._parentEditor}_onParentConfigurationChanged(e){super.updateOptions(this._parentEditor.getRawOptions()),super.updateOptions(this._overwriteOptions)}updateOptions(e){WF(this._overwriteOptions,e,!0),super.updateOptions(this._overwriteOptions)}};fd=t$e([Lf(4,nt),Lf(5,hi),Lf(6,nn),Lf(7,ht),Lf(8,Ws),Lf(9,fs),Lf(10,dl),Lf(11,On),Lf(12,Ue)],fd);const Rre=new ue(new li(0,122,204)),i$e={showArrow:!0,showFrame:!0,className:"",frameColor:Rre,arrowColor:Rre,keepEditorSelection:!1},n$e="vs.editor.contrib.zoneWidget";class s$e{constructor(e,t,i,n,s,r,a,l){this.id="",this.domNode=e,this.afterLineNumber=t,this.afterColumn=i,this.heightInLines=n,this.showInHiddenAreas=a,this.ordinal=l,this._onDomNodeTop=s,this._onComputedHeight=r}onDomNodeTop(e){this._onDomNodeTop(e)}onComputedHeight(e){this._onComputedHeight(e)}}class o$e{constructor(e,t){this._id=e,this._domNode=t}getId(){return this._id}getDomNode(){return this._domNode}getPosition(){return null}}const J2=class J2{constructor(e){this._editor=e,this._ruleName=J2._IdGenerator.nextId(),this._decorations=this._editor.createDecorationsCollection(),this._color=null,this._height=-1}dispose(){this.hide(),dV(this._ruleName)}set color(e){this._color!==e&&(this._color=e,this._updateStyle())}set height(e){this._height!==e&&(this._height=e,this._updateStyle())}_updateStyle(){dV(this._ruleName),yA(`.monaco-editor ${this._ruleName}`,`border-style: solid; border-color: transparent; border-bottom-color: ${this._color}; border-width: ${this._height}px; bottom: -${this._height}px !important; margin-left: -${this._height}px; `)}show(e){e.column===1&&(e={lineNumber:e.lineNumber,column:2}),this._decorations.set([{range:M.fromPositions(e),options:{description:"zone-widget-arrow",className:this._ruleName,stickiness:1}}])}hide(){this._decorations.clear()}};J2._IdGenerator=new TK(".arrow-decoration-");let t$=J2;class r$e{constructor(e,t={}){this._arrow=null,this._overlayWidget=null,this._resizeSash=null,this._viewZone=null,this._disposables=new le,this.container=null,this._isShowing=!1,this.editor=e,this._positionMarkerId=this.editor.createDecorationsCollection(),this.options=Wf(t),WF(this.options,i$e,!1),this.domNode=document.createElement("div"),this.options.isAccessible||(this.domNode.setAttribute("aria-hidden","true"),this.domNode.setAttribute("role","presentation")),this._disposables.add(this.editor.onDidLayoutChange(i=>{const n=this._getWidth(i);this.domNode.style.width=n+"px",this.domNode.style.left=this._getLeft(i)+"px",this._onWidth(n)}))}dispose(){this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this._viewZone&&this.editor.changeViewZones(e=>{this._viewZone&&e.removeZone(this._viewZone.id),this._viewZone=null}),this._positionMarkerId.clear(),this._disposables.dispose()}create(){this.domNode.classList.add("zone-widget"),this.options.className&&this.domNode.classList.add(this.options.className),this.container=document.createElement("div"),this.container.classList.add("zone-widget-container"),this.domNode.appendChild(this.container),this.options.showArrow&&(this._arrow=new t$(this.editor),this._disposables.add(this._arrow)),this._fillContainer(this.container),this._initSash(),this._applyStyles()}style(e){e.frameColor&&(this.options.frameColor=e.frameColor),e.arrowColor&&(this.options.arrowColor=e.arrowColor),this._applyStyles()}_applyStyles(){if(this.container&&this.options.frameColor){const e=this.options.frameColor.toString();this.container.style.borderTopColor=e,this.container.style.borderBottomColor=e}if(this._arrow&&this.options.arrowColor){const e=this.options.arrowColor.toString();this._arrow.color=e}}_getWidth(e){return e.width-e.minimap.minimapWidth-e.verticalScrollbarWidth}_getLeft(e){return e.minimap.minimapWidth>0&&e.minimap.minimapLeft===0?e.minimap.minimapWidth:0}_onViewZoneTop(e){this.domNode.style.top=e+"px"}_onViewZoneHeight(e){var t;if(this.domNode.style.height=`${e}px`,this.container){const i=e-this._decoratingElementsHeight();this.container.style.height=`${i}px`;const n=this.editor.getLayoutInfo();this._doLayout(i,this._getWidth(n))}(t=this._resizeSash)==null||t.layout()}get position(){const e=this._positionMarkerId.getRange(0);if(e)return e.getStartPosition()}show(e,t){const i=M.isIRange(e)?M.lift(e):M.fromPositions(e);this._isShowing=!0,this._showImpl(i,t),this._isShowing=!1,this._positionMarkerId.set([{range:i,options:Dt.EMPTY}])}hide(){var e;this._viewZone&&(this.editor.changeViewZones(t=>{this._viewZone&&t.removeZone(this._viewZone.id)}),this._viewZone=null),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),(e=this._arrow)==null||e.hide(),this._positionMarkerId.clear()}_decoratingElementsHeight(){const e=this.editor.getOption(67);let t=0;if(this.options.showArrow){const i=Math.round(e/3);t+=2*i}if(this.options.showFrame){const i=Math.round(e/9);t+=2*i}return t}_showImpl(e,t){const i=e.getStartPosition(),n=this.editor.getLayoutInfo(),s=this._getWidth(n);this.domNode.style.width=`${s}px`,this.domNode.style.left=this._getLeft(n)+"px";const r=document.createElement("div");r.style.overflow="hidden";const a=this.editor.getOption(67);if(!this.options.allowUnlimitedHeight){const g=Math.max(12,this.editor.getLayoutInfo().height/a*.8);t=Math.min(t,g)}let l=0,c=0;if(this._arrow&&this.options.showArrow&&(l=Math.round(a/3),this._arrow.height=l,this._arrow.show(i)),this.options.showFrame&&(c=Math.round(a/9)),this.editor.changeViewZones(g=>{this._viewZone&&g.removeZone(this._viewZone.id),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this.domNode.style.top="-1000px",this._viewZone=new s$e(r,i.lineNumber,i.column,t,p=>this._onViewZoneTop(p),p=>this._onViewZoneHeight(p),this.options.showInHiddenAreas,this.options.ordinal),this._viewZone.id=g.addZone(this._viewZone),this._overlayWidget=new o$e(n$e+this._viewZone.id,this.domNode),this.editor.addOverlayWidget(this._overlayWidget)}),this.container&&this.options.showFrame){const g=this.options.frameWidth?this.options.frameWidth:c;this.container.style.borderTopWidth=g+"px",this.container.style.borderBottomWidth=g+"px"}const u=t*a-this._decoratingElementsHeight();this.container&&(this.container.style.top=l+"px",this.container.style.height=u+"px",this.container.style.overflow="hidden"),this._doLayout(u,s),this.options.keepEditorSelection||this.editor.setSelection(e);const f=this.editor.getModel();if(f){const g=f.validateRange(new M(e.startLineNumber,1,e.endLineNumber+1,1));this.revealRange(g,g.startLineNumber===f.getLineCount())}}revealRange(e,t){t?this.editor.revealLineNearTop(e.endLineNumber,0):this.editor.revealRange(e,0)}setCssClass(e,t){this.container&&(t&&this.container.classList.remove(t),this.container.classList.add(e))}_onWidth(e){}_doLayout(e,t){}_relayout(e){this._viewZone&&this._viewZone.heightInLines!==e&&this.editor.changeViewZones(t=>{this._viewZone&&(this._viewZone.heightInLines=e,t.layoutZone(this._viewZone.id))})}_initSash(){if(this._resizeSash)return;this._resizeSash=this._disposables.add(new Yo(this.domNode,this,{orientation:1})),this.options.isResizeable||(this._resizeSash.state=0);let e;this._disposables.add(this._resizeSash.onDidStart(t=>{this._viewZone&&(e={startY:t.startY,heightInLines:this._viewZone.heightInLines})})),this._disposables.add(this._resizeSash.onDidEnd(()=>{e=void 0})),this._disposables.add(this._resizeSash.onDidChange(t=>{if(e){const i=(t.currentY-e.startY)/this.editor.getOption(67),n=i<0?Math.ceil(i):Math.floor(i),s=e.heightInLines+n;s>5&&s<35&&this._relayout(s)}}))}getHorizontalSashLeft(){return 0}getHorizontalSashTop(){return(this.domNode.style.height===null?0:parseInt(this.domNode.style.height))-this._decoratingElementsHeight()/2}getHorizontalSashWidth(){const e=this.editor.getLayoutInfo();return e.width-e.minimap.minimapWidth}}var gpe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},ppe=function(o,e){return function(t,i){e(t,i,o)}};const mpe=Gt("IPeekViewService");ei(mpe,class{constructor(){this._widgets=new Map}addExclusiveWidget(o,e){const t=this._widgets.get(o);t&&(t.listener.dispose(),t.widget.dispose());const i=()=>{const n=this._widgets.get(o);n&&n.widget===e&&(n.listener.dispose(),this._widgets.delete(o))};this._widgets.set(o,{widget:e,listener:e.onDidClose(i)})}},1);var Ia;(function(o){o.inPeekEditor=new Pe("inReferenceSearchEditor",!0,v("inReferenceSearchEditor","Whether the current code editor is embedded inside peek")),o.notInPeekEditor=o.inPeekEditor.toNegated()})(Ia||(Ia={}));var z1;let uO=(z1=class{constructor(e,t){e instanceof fd&&Ia.inPeekEditor.bindTo(t)}dispose(){}},z1.ID="editor.contrib.referenceController",z1);uO=gpe([ppe(1,ht)],uO);oi(uO.ID,uO,0);function a$e(o){const e=o.get(hi).getFocusedCodeEditor();return e instanceof fd?e.getParentEditor():e}const l$e={headerBackgroundColor:ue.white,primaryHeadingColor:ue.fromHex("#333333"),secondaryHeadingColor:ue.fromHex("#6c6c6cb3")};let hO=class extends r$e{constructor(e,t,i){super(e,t),this.instantiationService=i,this._onDidClose=new Y,this.onDidClose=this._onDidClose.event,WF(this.options,l$e,!1)}dispose(){this.disposed||(this.disposed=!0,super.dispose(),this._onDidClose.fire(this))}style(e){const t=this.options;e.headerBackgroundColor&&(t.headerBackgroundColor=e.headerBackgroundColor),e.primaryHeadingColor&&(t.primaryHeadingColor=e.primaryHeadingColor),e.secondaryHeadingColor&&(t.secondaryHeadingColor=e.secondaryHeadingColor),super.style(e)}_applyStyles(){super._applyStyles();const e=this.options;this._headElement&&e.headerBackgroundColor&&(this._headElement.style.backgroundColor=e.headerBackgroundColor.toString()),this._primaryHeading&&e.primaryHeadingColor&&(this._primaryHeading.style.color=e.primaryHeadingColor.toString()),this._secondaryHeading&&e.secondaryHeadingColor&&(this._secondaryHeading.style.color=e.secondaryHeadingColor.toString()),this._bodyElement&&e.frameColor&&(this._bodyElement.style.borderColor=e.frameColor.toString())}_fillContainer(e){this.setCssClass("peekview-widget"),this._headElement=xe(".head"),this._bodyElement=xe(".body"),this._fillHead(this._headElement),this._fillBody(this._bodyElement),e.appendChild(this._headElement),e.appendChild(this._bodyElement)}_fillHead(e,t){this._titleElement=xe(".peekview-title"),this.options.supportOnTitleClick&&(this._titleElement.classList.add("clickable"),Bn(this._titleElement,"click",s=>this._onTitleClick(s))),ge(this._headElement,this._titleElement),this._fillTitleIcon(this._titleElement),this._primaryHeading=xe("span.filename"),this._secondaryHeading=xe("span.dirname"),this._metaHeading=xe("span.meta"),ge(this._titleElement,this._primaryHeading,this._secondaryHeading,this._metaHeading);const i=xe(".peekview-actions");ge(this._headElement,i);const n=this._getActionBarOptions();this._actionbarWidget=new zl(i,n),this._disposables.add(this._actionbarWidget),t||this._actionbarWidget.push(new tl("peekview.close",v("label.close","Close"),ut.asClassName(Se.close),!0,()=>(this.dispose(),Promise.resolve())),{label:!1,icon:!0})}_fillTitleIcon(e){}_getActionBarOptions(){return{actionViewItemProvider:Nue.bind(void 0,this.instantiationService),orientation:0}}_onTitleClick(e){}setTitle(e,t){this._primaryHeading&&this._secondaryHeading&&(this._primaryHeading.innerText=e,this._primaryHeading.setAttribute("title",e),t?this._secondaryHeading.innerText=t:bo(this._secondaryHeading))}setMetaTitle(e){this._metaHeading&&(e?(this._metaHeading.innerText=e,Za(this._metaHeading)):Hr(this._metaHeading))}_doLayout(e,t){if(!this._isShowing&&e<0){this.dispose();return}const i=Math.ceil(this.editor.getOption(67)*1.2),n=Math.round(e-(i+2));this._doLayoutHead(i,t),this._doLayoutBody(n,t)}_doLayoutHead(e,t){this._headElement&&(this._headElement.style.height=`${e}px`,this._headElement.style.lineHeight=this._headElement.style.height)}_doLayoutBody(e,t){this._bodyElement&&(this._bodyElement.style.height=`${e}px`)}};hO=gpe([ppe(2,nt)],hO);const c$e=W("peekViewTitle.background",{dark:"#252526",light:"#F3F3F3",hcDark:ue.black,hcLight:ue.white},v("peekViewTitleBackground","Background color of the peek view title area.")),_pe=W("peekViewTitleLabel.foreground",{dark:ue.white,light:ue.black,hcDark:ue.white,hcLight:jh},v("peekViewTitleForeground","Color of the peek view title.")),vpe=W("peekViewTitleDescription.foreground",{dark:"#ccccccb3",light:"#616161",hcDark:"#FFFFFF99",hcLight:"#292929"},v("peekViewTitleInfoForeground","Color of the peek view title info.")),d$e=W("peekView.border",{dark:Ph,light:Ph,hcDark:si,hcLight:si},v("peekViewBorder","Color of the peek view borders and arrow.")),u$e=W("peekViewResult.background",{dark:"#252526",light:"#F3F3F3",hcDark:ue.black,hcLight:ue.white},v("peekViewResultsBackground","Background color of the peek view result list."));W("peekViewResult.lineForeground",{dark:"#bbbbbb",light:"#646465",hcDark:ue.white,hcLight:jh},v("peekViewResultsMatchForeground","Foreground color for line nodes in the peek view result list."));W("peekViewResult.fileForeground",{dark:ue.white,light:"#1E1E1E",hcDark:ue.white,hcLight:jh},v("peekViewResultsFileForeground","Foreground color for file nodes in the peek view result list."));W("peekViewResult.selectionBackground",{dark:"#3399ff33",light:"#3399ff33",hcDark:null,hcLight:null},v("peekViewResultsSelectionBackground","Background color of the selected entry in the peek view result list."));W("peekViewResult.selectionForeground",{dark:ue.white,light:"#6C6C6C",hcDark:ue.white,hcLight:jh},v("peekViewResultsSelectionForeground","Foreground color of the selected entry in the peek view result list."));const bpe=W("peekViewEditor.background",{dark:"#001F33",light:"#F2F8FC",hcDark:ue.black,hcLight:ue.white},v("peekViewEditorBackground","Background color of the peek view editor."));W("peekViewEditorGutter.background",bpe,v("peekViewEditorGutterBackground","Background color of the gutter in the peek view editor."));W("peekViewEditorStickyScroll.background",bpe,v("peekViewEditorStickScrollBackground","Background color of sticky scroll in the peek view editor."));W("peekViewResult.matchHighlightBackground",{dark:"#ea5c004d",light:"#ea5c004d",hcDark:null,hcLight:null},v("peekViewResultsMatchHighlight","Match highlight color in the peek view result list."));W("peekViewEditor.matchHighlightBackground",{dark:"#ff8f0099",light:"#f5d802de",hcDark:null,hcLight:null},v("peekViewEditorMatchHighlight","Match highlight color in the peek view editor."));W("peekViewEditor.matchHighlightBorder",{dark:null,light:null,hcDark:vn,hcLight:vn},v("peekViewEditorMatchHighlightBorder","Match highlight border in the peek view editor."));class Zm{constructor(e,t,i,n){this.isProviderFirst=e,this.parent=t,this.link=i,this._rangeCallback=n,this.id=e6.nextId()}get uri(){return this.link.uri}get range(){return this._range??this.link.targetSelectionRange??this.link.range}set range(e){this._range=e,this._rangeCallback(this)}get ariaMessage(){var t;const e=(t=this.parent.getPreview(this))==null?void 0:t.preview(this.range);return e?v({key:"aria.oneReference.preview",comment:["Placeholders are: 0: filename, 1:line number, 2: column number, 3: preview snippet of source code"]},"{0} in {1} on line {2} at column {3}",e.value,Dc(this.uri),this.range.startLineNumber,this.range.startColumn):v("aria.oneReference","in {0} on line {1} at column {2}",Dc(this.uri),this.range.startLineNumber,this.range.startColumn)}}class h$e{constructor(e){this._modelReference=e}dispose(){this._modelReference.dispose()}preview(e,t=8){const i=this._modelReference.object.textEditorModel;if(!i)return;const{startLineNumber:n,startColumn:s,endLineNumber:r,endColumn:a}=e,l=i.getWordUntilPosition({lineNumber:n,column:s-t}),c=new M(n,l.startColumn,n,s),u=new M(r,a,r,1073741824),f=i.getValueInRange(c).replace(/^\s+/,""),g=i.getValueInRange(e),p=i.getValueInRange(u).replace(/\s+$/,"");return{value:f+g+p,highlight:{start:f.length,end:f.length+g.length}}}}class yE{constructor(e,t){this.parent=e,this.uri=t,this.children=[],this._previews=new co}dispose(){$i(this._previews.values()),this._previews.clear()}getPreview(e){return this._previews.get(e.uri)}get ariaMessage(){const e=this.children.length;return e===1?v("aria.fileReferences.1","1 symbol in {0}, full path {1}",Dc(this.uri),this.uri.fsPath):v("aria.fileReferences.N","{0} symbols in {1}, full path {2}",e,Dc(this.uri),this.uri.fsPath)}async resolve(e){if(this._previews.size!==0)return this;for(const t of this.children)if(!this._previews.has(t.uri))try{const i=await e.createModelReference(t.uri);this._previews.set(t.uri,new h$e(i))}catch(i){wt(i)}return this}}class sl{constructor(e,t){this.groups=[],this.references=[],this._onDidChangeReferenceRange=new Y,this.onDidChangeReferenceRange=this._onDidChangeReferenceRange.event,this._links=e,this._title=t;const[i]=e;e.sort(sl._compareReferences);let n;for(const s of e)if((!n||!bn.isEqual(n.uri,s.uri,!0))&&(n=new yE(this,s.uri),this.groups.push(n)),n.children.length===0||sl._compareReferences(s,n.children[n.children.length-1])!==0){const r=new Zm(i===s,n,s,a=>this._onDidChangeReferenceRange.fire(a));this.references.push(r),n.children.push(r)}}dispose(){$i(this.groups),this._onDidChangeReferenceRange.dispose(),this.groups.length=0}clone(){return new sl(this._links,this._title)}get title(){return this._title}get isEmpty(){return this.groups.length===0}get ariaMessage(){return this.isEmpty?v("aria.result.0","No results found"):this.references.length===1?v("aria.result.1","Found 1 symbol in {0}",this.references[0].uri.fsPath):this.groups.length===1?v("aria.result.n1","Found {0} symbols in {1}",this.references.length,this.groups[0].uri.fsPath):v("aria.result.nm","Found {0} symbols in {1} files",this.references.length,this.groups.length)}nextOrPreviousReference(e,t){const{parent:i}=e;let n=i.children.indexOf(e);const s=i.children.length,r=i.parent.groups.length;return r===1||t&&n+1<s||!t&&n>0?(t?n=(n+1)%s:n=(n+s-1)%s,i.children[n]):(n=i.parent.groups.indexOf(i),t?(n=(n+1)%r,i.parent.groups[n].children[0]):(n=(n+r-1)%r,i.parent.groups[n].children[i.parent.groups[n].children.length-1]))}nearestReference(e,t){const i=this.references.map((n,s)=>({idx:s,prefixLen:Om(n.uri.toString(),e.toString()),offsetDist:Math.abs(n.range.startLineNumber-t.lineNumber)*100+Math.abs(n.range.startColumn-t.column)})).sort((n,s)=>n.prefixLen>s.prefixLen?-1:n.prefixLen<s.prefixLen?1:n.offsetDist<s.offsetDist?-1:n.offsetDist>s.offsetDist?1:0)[0];if(i)return this.references[i.idx]}referenceAt(e,t){for(const i of this.references)if(i.uri.toString()===e.toString()&&M.containsPosition(i.range,t))return i}firstReference(){for(const e of this.references)if(e.isProviderFirst)return e;return this.references[0]}static _compareReferences(e,t){return bn.compare(e.uri,t.uri)||M.compareRangesUsingStarts(e.range,t.range)}}var c5=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},d5=function(o,e){return function(t,i){e(t,i,o)}},i$;let n$=class{constructor(e){this._resolverService=e}hasChildren(e){return e instanceof sl||e instanceof yE}getChildren(e){if(e instanceof sl)return e.groups;if(e instanceof yE)return e.resolve(this._resolverService).then(t=>t.children);throw new Error("bad tree")}};n$=c5([d5(0,Na)],n$);class f$e{getHeight(){return 23}getTemplateId(e){return e instanceof yE?fO.id:gO.id}}let s$=class{constructor(e){this._keybindingService=e}getKeyboardNavigationLabel(e){var t;if(e instanceof Zm){const i=(t=e.parent.getPreview(e))==null?void 0:t.preview(e.range);if(i)return i.value}return Dc(e.uri)}};s$=c5([d5(0,Di)],s$);class g$e{getId(e){return e instanceof Zm?e.id:e.uri}}let o$=class extends X{constructor(e,t){super(),this._labelService=t;const i=document.createElement("div");i.classList.add("reference-file"),this.file=this._register(new wP(i,{supportHighlights:!0})),this.badge=new J6(ge(i,xe(".count")),{},Iue),e.appendChild(i)}set(e,t){const i=w4(e.uri);this.file.setLabel(this._labelService.getUriBasenameLabel(e.uri),this._labelService.getUriLabel(i,{relative:!0}),{title:this._labelService.getUriLabel(e.uri),matches:t});const n=e.children.length;this.badge.setCount(n),n>1?this.badge.setTitleFormat(v("referencesCount","{0} references",n)):this.badge.setTitleFormat(v("referenceCount","{0} reference",n))}};o$=c5([d5(1,hS)],o$);var Cb;let fO=(Cb=class{constructor(e){this._instantiationService=e,this.templateId=i$.id}renderTemplate(e){return this._instantiationService.createInstance(o$,e)}renderElement(e,t,i){i.set(e.element,sI(e.filterData))}disposeTemplate(e){e.dispose()}},i$=Cb,Cb.id="FileReferencesRenderer",Cb);fO=i$=c5([d5(0,nt)],fO);class p$e extends X{constructor(e){super(),this.label=this._register(new fm(e))}set(e,t){var n;const i=(n=e.parent.getPreview(e))==null?void 0:n.preview(e.range);if(!i||!i.value)this.label.set(`${Dc(e.uri)}:${e.range.startLineNumber+1}:${e.range.startColumn+1}`);else{const{value:s,highlight:r}=i;t&&!du.isDefault(t)?(this.label.element.classList.toggle("referenceMatch",!1),this.label.set(s,sI(t))):(this.label.element.classList.toggle("referenceMatch",!0),this.label.set(s,[r]))}}}const eF=class eF{constructor(){this.templateId=eF.id}renderTemplate(e){return new p$e(e)}renderElement(e,t,i){i.set(e.element,e.filterData)}disposeTemplate(e){e.dispose()}};eF.id="OneReferenceRenderer";let gO=eF;class m$e{getWidgetAriaLabel(){return v("treeAriaLabel","References")}getAriaLabel(e){return e.ariaMessage}}var _$e=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},aw=function(o,e){return function(t,i){e(t,i,o)}};const tF=class tF{constructor(e,t){this._editor=e,this._model=t,this._decorations=new Map,this._decorationIgnoreSet=new Set,this._callOnDispose=new le,this._callOnModelChange=new le,this._callOnDispose.add(this._editor.onDidChangeModel(()=>this._onModelChanged())),this._onModelChanged()}dispose(){this._callOnModelChange.dispose(),this._callOnDispose.dispose(),this.removeDecorations()}_onModelChanged(){this._callOnModelChange.clear();const e=this._editor.getModel();if(e){for(const t of this._model.references)if(t.uri.toString()===e.uri.toString()){this._addDecorations(t.parent);return}}}_addDecorations(e){if(!this._editor.hasModel())return;this._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations(()=>this._onDecorationChanged()));const t=[],i=[];for(let n=0,s=e.children.length;n<s;n++){const r=e.children[n];this._decorationIgnoreSet.has(r.id)||r.uri.toString()===this._editor.getModel().uri.toString()&&(t.push({range:r.range,options:tF.DecorationOptions}),i.push(n))}this._editor.changeDecorations(n=>{const s=n.deltaDecorations([],t);for(let r=0;r<s.length;r++)this._decorations.set(s[r],e.children[i[r]])})}_onDecorationChanged(){const e=[],t=this._editor.getModel();if(t){for(const[i,n]of this._decorations){const s=t.getDecorationRange(i);if(!s)continue;let r=!1;if(!M.equalsRange(s,n.range)){if(M.spansMultipleLines(s))r=!0;else{const a=n.range.endColumn-n.range.startColumn,l=s.endColumn-s.startColumn;a!==l&&(r=!0)}r?(this._decorationIgnoreSet.add(n.id),e.push(i)):n.range=s}}for(let i=0,n=e.length;i<n;i++)this._decorations.delete(e[i]);this._editor.removeDecorations(e)}}removeDecorations(){this._editor.removeDecorations([...this._decorations.keys()]),this._decorations.clear()}};tF.DecorationOptions=Dt.register({description:"reference-decoration",stickiness:1,className:"reference-decoration"});let r$=tF;class v$e{constructor(){this.ratio=.7,this.heightInLines=18}static fromJSON(e){let t,i;try{const n=JSON.parse(e);t=n.ratio,i=n.heightInLines}catch{}return{ratio:t||.7,heightInLines:i||18}}}class b$e extends az{}let a$=class extends hO{constructor(e,t,i,n,s,r,a,l,c){super(e,{showFrame:!1,showArrow:!0,isResizeable:!0,isAccessible:!0,supportOnTitleClick:!0},r),this._defaultTreeKeyboardSupport=t,this.layoutData=i,this._textModelResolverService=s,this._instantiationService=r,this._peekViewService=a,this._uriLabel=l,this._keybindingService=c,this._disposeOnNewModel=new le,this._callOnDispose=new le,this._onDidSelectReference=new Y,this.onDidSelectReference=this._onDidSelectReference.event,this._dim=new Ri(0,0),this._isClosing=!1,this._applyTheme(n.getColorTheme()),this._callOnDispose.add(n.onDidColorThemeChange(this._applyTheme.bind(this))),this._peekViewService.addExclusiveWidget(e,this),this.create()}get isClosing(){return this._isClosing}dispose(){this._isClosing=!0,this.setModel(void 0),this._callOnDispose.dispose(),this._disposeOnNewModel.dispose(),$i(this._preview),$i(this._previewNotAvailableMessage),$i(this._tree),$i(this._previewModelReference),this._splitView.dispose(),super.dispose()}_applyTheme(e){const t=e.getColor(d$e)||ue.transparent;this.style({arrowColor:t,frameColor:t,headerBackgroundColor:e.getColor(c$e)||ue.transparent,primaryHeadingColor:e.getColor(_pe),secondaryHeadingColor:e.getColor(vpe)})}show(e){super.show(e,this.layoutData.heightInLines||18)}focusOnReferenceTree(){this._tree.domFocus()}focusOnPreviewEditor(){this._preview.focus()}isPreviewEditorFocused(){return this._preview.hasTextFocus()}_onTitleClick(e){this._preview&&this._preview.getModel()&&this._onDidSelectReference.fire({element:this._getFocusedReference(),kind:e.ctrlKey||e.metaKey||e.altKey?"side":"open",source:"title"})}_fillBody(e){this.setCssClass("reference-zone-widget"),this._messageContainer=ge(e,xe("div.messages")),Hr(this._messageContainer),this._splitView=new yhe(e,{orientation:1}),this._previewContainer=ge(e,xe("div.preview.inline"));const t={scrollBeyondLastLine:!1,scrollbar:{verticalScrollbarSize:14,horizontal:"auto",useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,alwaysConsumeMouseWheel:!0},overviewRulerLanes:2,fixedOverflowWidgets:!0,minimap:{enabled:!1}};this._preview=this._instantiationService.createInstance(fd,this._previewContainer,t,{},this.editor),Hr(this._previewContainer),this._previewNotAvailableMessage=this._instantiationService.createInstance(nu,v("missingPreviewMessage","no preview available"),Xr,nu.DEFAULT_CREATION_OPTIONS,null),this._treeContainer=ge(e,xe("div.ref-tree.inline"));const i={keyboardSupport:this._defaultTreeKeyboardSupport,accessibilityProvider:new m$e,keyboardNavigationLabelProvider:this._instantiationService.createInstance(s$),identityProvider:new g$e,openOnSingleClick:!0,selectionNavigation:!0,overrideStyles:{listBackground:u$e}};this._defaultTreeKeyboardSupport&&this._callOnDispose.add(Bn(this._treeContainer,"keydown",s=>{s.equals(9)&&(this._keybindingService.dispatchEvent(s,s.target),s.stopPropagation())},!0)),this._tree=this._instantiationService.createInstance(b$e,"ReferencesWidget",this._treeContainer,new f$e,[this._instantiationService.createInstance(fO),this._instantiationService.createInstance(gO)],this._instantiationService.createInstance(n$),i),this._splitView.addView({onDidChange:Ee.None,element:this._previewContainer,minimumSize:200,maximumSize:Number.MAX_VALUE,layout:s=>{this._preview.layout({height:this._dim.height,width:s})}},pP.Distribute),this._splitView.addView({onDidChange:Ee.None,element:this._treeContainer,minimumSize:100,maximumSize:Number.MAX_VALUE,layout:s=>{this._treeContainer.style.height=`${this._dim.height}px`,this._treeContainer.style.width=`${s}px`,this._tree.layout(this._dim.height,s)}},pP.Distribute),this._disposables.add(this._splitView.onDidSashChange(()=>{this._dim.width&&(this.layoutData.ratio=this._splitView.getViewSize(0)/this._dim.width)},void 0));const n=(s,r)=>{s instanceof Zm&&(r==="show"&&this._revealReference(s,!1),this._onDidSelectReference.fire({element:s,kind:r,source:"tree"}))};this._disposables.add(this._tree.onDidOpen(s=>{s.sideBySide?n(s.element,"side"):s.editorOptions.pinned?n(s.element,"goto"):n(s.element,"show")})),Hr(this._treeContainer)}_onWidth(e){this._dim&&this._doLayoutBody(this._dim.height,e)}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._dim=new Ri(t,e),this.layoutData.heightInLines=this._viewZone?this._viewZone.heightInLines:this.layoutData.heightInLines,this._splitView.layout(t),this._splitView.resizeView(0,t*this.layoutData.ratio)}setSelection(e){return this._revealReference(e,!0).then(()=>{this._model&&(this._tree.setSelection([e]),this._tree.setFocus([e]))})}setModel(e){return this._disposeOnNewModel.clear(),this._model=e,this._model?this._onNewModel():Promise.resolve()}_onNewModel(){return this._model?this._model.isEmpty?(this.setTitle(""),this._messageContainer.innerText=v("noResults","No results"),Za(this._messageContainer),Promise.resolve(void 0)):(Hr(this._messageContainer),this._decorationsManager=new r$(this._preview,this._model),this._disposeOnNewModel.add(this._decorationsManager),this._disposeOnNewModel.add(this._model.onDidChangeReferenceRange(e=>this._tree.rerender(e))),this._disposeOnNewModel.add(this._preview.onMouseDown(e=>{const{event:t,target:i}=e;if(t.detail!==2)return;const n=this._getFocusedReference();n&&this._onDidSelectReference.fire({element:{uri:n.uri,range:i.range},kind:t.ctrlKey||t.metaKey||t.altKey?"side":"open",source:"editor"})})),this.container.classList.add("results-loaded"),Za(this._treeContainer),Za(this._previewContainer),this._splitView.layout(this._dim.width),this.focusOnReferenceTree(),this._tree.setInput(this._model.groups.length===1?this._model.groups[0]:this._model)):Promise.resolve(void 0)}_getFocusedReference(){const[e]=this._tree.getFocus();if(e instanceof Zm)return e;if(e instanceof yE&&e.children.length>0)return e.children[0]}async revealReference(e){await this._revealReference(e,!1),this._onDidSelectReference.fire({element:e,kind:"goto",source:"tree"})}async _revealReference(e,t){if(this._revealedReference===e)return;this._revealedReference=e,e.uri.scheme!==Lt.inMemory?this.setTitle(pAe(e.uri),this._uriLabel.getUriLabel(w4(e.uri))):this.setTitle(v("peekView.alternateTitle","References"));const i=this._textModelResolverService.createModelReference(e.uri);this._tree.getInput()===e.parent?this._tree.reveal(e):(t&&this._tree.reveal(e.parent),await this._tree.expand(e.parent),this._tree.reveal(e));const n=await i;if(!this._model){n.dispose();return}$i(this._previewModelReference);const s=n.object;if(s){const r=this._preview.getModel()===s.textEditorModel?0:1,a=M.lift(e.range).collapseToStart();this._previewModelReference=n,this._preview.setModel(s.textEditorModel),this._preview.setSelection(a),this._preview.revealRangeInCenter(a,r)}else this._preview.setModel(this._previewNotAvailableMessage),n.dispose()}};a$=_$e([aw(3,Ws),aw(4,Na),aw(5,nt),aw(6,mpe),aw(7,hS),aw(8,Di)],a$);var C$e=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},lw=function(o,e){return function(t,i){e(t,i,o)}},zM;const qC=new Pe("referenceSearchVisible",!1,v("referenceSearchVisible","Whether reference peek is visible, like 'Peek References' or 'Peek Definition'"));var yb;let kC=(yb=class{static get(e){return e.getContribution(zM.ID)}constructor(e,t,i,n,s,r,a,l){this._defaultTreeKeyboardSupport=e,this._editor=t,this._editorService=n,this._notificationService=s,this._instantiationService=r,this._storageService=a,this._configurationService=l,this._disposables=new le,this._requestIdPool=0,this._ignoreModelChangeEvent=!1,this._referenceSearchVisible=qC.bindTo(i)}dispose(){var e,t;this._referenceSearchVisible.reset(),this._disposables.dispose(),(e=this._widget)==null||e.dispose(),(t=this._model)==null||t.dispose(),this._widget=void 0,this._model=void 0}toggleWidget(e,t,i){let n;if(this._widget&&(n=this._widget.position),this.closeWidget(),n&&e.containsPosition(n))return;this._peekMode=i,this._referenceSearchVisible.set(!0),this._disposables.add(this._editor.onDidChangeModelLanguage(()=>{this.closeWidget()})),this._disposables.add(this._editor.onDidChangeModel(()=>{this._ignoreModelChangeEvent||this.closeWidget()}));const s="peekViewLayout",r=v$e.fromJSON(this._storageService.get(s,0,"{}"));this._widget=this._instantiationService.createInstance(a$,this._editor,this._defaultTreeKeyboardSupport,r),this._widget.setTitle(v("labelLoading","Loading...")),this._widget.show(e),this._disposables.add(this._widget.onDidClose(()=>{t.cancel(),this._widget?(this._storageService.store(s,JSON.stringify(this._widget.layoutData),0,1),this._widget.isClosing||this.closeWidget(),this._widget=void 0):this.closeWidget()})),this._disposables.add(this._widget.onDidSelectReference(l=>{const{element:c,kind:u}=l;if(c)switch(u){case"open":(l.source!=="editor"||!this._configurationService.getValue("editor.stablePeek"))&&this.openReference(c,!1,!1);break;case"side":this.openReference(c,!0,!1);break;case"goto":i?this._gotoReference(c,!0):this.openReference(c,!1,!0);break}}));const a=++this._requestIdPool;t.then(l=>{var c;if(a!==this._requestIdPool||!this._widget){l.dispose();return}return(c=this._model)==null||c.dispose(),this._model=l,this._widget.setModel(this._model).then(()=>{if(this._widget&&this._model&&this._editor.hasModel()){this._model.isEmpty?this._widget.setMetaTitle(""):this._widget.setMetaTitle(v("metaTitle.N","{0} ({1})",this._model.title,this._model.references.length));const u=this._editor.getModel().uri,f=new G(e.startLineNumber,e.startColumn),g=this._model.nearestReference(u,f);if(g)return this._widget.setSelection(g).then(()=>{this._widget&&this._editor.getOption(87)==="editor"&&this._widget.focusOnPreviewEditor()})}})},l=>{this._notificationService.error(l)})}changeFocusBetweenPreviewAndReferences(){this._widget&&(this._widget.isPreviewEditorFocused()?this._widget.focusOnReferenceTree():this._widget.focusOnPreviewEditor())}async goToNextOrPreviousReference(e){if(!this._editor.hasModel()||!this._model||!this._widget)return;const t=this._widget.position;if(!t)return;const i=this._model.nearestReference(this._editor.getModel().uri,t);if(!i)return;const n=this._model.nextOrPreviousReference(i,e),s=this._editor.hasTextFocus(),r=this._widget.isPreviewEditorFocused();await this._widget.setSelection(n),await this._gotoReference(n,!1),s?this._editor.focus():this._widget&&r&&this._widget.focusOnPreviewEditor()}async revealReference(e){!this._editor.hasModel()||!this._model||!this._widget||await this._widget.revealReference(e)}closeWidget(e=!0){var t,i;(t=this._widget)==null||t.dispose(),(i=this._model)==null||i.dispose(),this._referenceSearchVisible.reset(),this._disposables.clear(),this._widget=void 0,this._model=void 0,e&&this._editor.focus(),this._requestIdPool+=1}_gotoReference(e,t){var n;(n=this._widget)==null||n.hide(),this._ignoreModelChangeEvent=!0;const i=M.lift(e.range).collapseToStart();return this._editorService.openCodeEditor({resource:e.uri,options:{selection:i,selectionSource:"code.jump",pinned:t}},this._editor).then(s=>{if(this._ignoreModelChangeEvent=!1,!s||!this._widget){this.closeWidget();return}if(this._editor===s)this._widget.show(i),this._widget.focusOnReferenceTree();else{const r=zM.get(s),a=this._model.clone();this.closeWidget(),s.focus(),r==null||r.toggleWidget(i,Gs(l=>Promise.resolve(a)),this._peekMode??!1)}},s=>{this._ignoreModelChangeEvent=!1,wt(s)})}openReference(e,t,i){t||this.closeWidget();const{uri:n,range:s}=e;this._editorService.openCodeEditor({resource:n,options:{selection:s,selectionSource:"code.jump",pinned:i}},this._editor,t)}},zM=yb,yb.ID="editor.contrib.referencesController",yb);kC=zM=C$e([lw(2,ht),lw(3,hi),lw(4,fs),lw(5,nt),lw(6,md),lw(7,Ht)],kC);function KC(o,e){const t=a$e(o);if(!t)return;const i=kC.get(t);i&&e(i)}ea.registerCommandAndKeybindingRule({id:"togglePeekWidgetFocus",weight:100,primary:Is(2089,60),when:de.or(qC,Ia.inPeekEditor),handler(o){KC(o,e=>{e.changeFocusBetweenPreviewAndReferences()})}});ea.registerCommandAndKeybindingRule({id:"goToNextReference",weight:90,primary:62,secondary:[70],when:de.or(qC,Ia.inPeekEditor),handler(o){KC(o,e=>{e.goToNextOrPreviousReference(!0)})}});ea.registerCommandAndKeybindingRule({id:"goToPreviousReference",weight:90,primary:1086,secondary:[1094],when:de.or(qC,Ia.inPeekEditor),handler(o){KC(o,e=>{e.goToNextOrPreviousReference(!1)})}});ii.registerCommandAlias("goToNextReferenceFromEmbeddedEditor","goToNextReference");ii.registerCommandAlias("goToPreviousReferenceFromEmbeddedEditor","goToPreviousReference");ii.registerCommandAlias("closeReferenceSearchEditor","closeReferenceSearch");ii.registerCommand("closeReferenceSearch",o=>KC(o,e=>e.closeWidget()));ea.registerKeybindingRule({id:"closeReferenceSearch",weight:-1,primary:9,secondary:[1033],when:de.and(Ia.inPeekEditor,de.not("config.editor.stablePeek"))});ea.registerKeybindingRule({id:"closeReferenceSearch",weight:250,primary:9,secondary:[1033],when:de.and(qC,de.not("config.editor.stablePeek"),de.or(B.editorTextFocus,Nhe.negate()))});ea.registerCommandAndKeybindingRule({id:"revealReference",weight:200,primary:3,mac:{primary:3,secondary:[2066]},when:de.and(qC,Ahe,fG.negate(),gG.negate()),handler(o){var i;const t=(i=o.get(Mc).lastFocusedList)==null?void 0:i.getFocus();Array.isArray(t)&&t[0]instanceof Zm&&KC(o,n=>n.revealReference(t[0]))}});ea.registerCommandAndKeybindingRule({id:"openReferenceToSide",weight:100,primary:2051,mac:{primary:259},when:de.and(qC,Ahe,fG.negate(),gG.negate()),handler(o){var i;const t=(i=o.get(Mc).lastFocusedList)==null?void 0:i.getFocus();Array.isArray(t)&&t[0]instanceof Zm&&KC(o,n=>n.openReference(t[0],!0,!0))}});ii.registerCommand("openReference",o=>{var i;const t=(i=o.get(Mc).lastFocusedList)==null?void 0:i.getFocus();Array.isArray(t)&&t[0]instanceof Zm&&KC(o,n=>n.openReference(t[0],!1,!0))});var Cpe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},jx=function(o,e){return function(t,i){e(t,i,o)}};const xY=new Pe("hasSymbols",!1,v("hasSymbols","Whether there are symbol locations that can be navigated via keyboard-only.")),u5=Gt("ISymbolNavigationService");let l$=class{constructor(e,t,i,n){this._editorService=t,this._notificationService=i,this._keybindingService=n,this._currentModel=void 0,this._currentIdx=-1,this._ignoreEditorChange=!1,this._ctxHasSymbols=xY.bindTo(e)}reset(){var e,t;this._ctxHasSymbols.reset(),(e=this._currentState)==null||e.dispose(),(t=this._currentMessage)==null||t.dispose(),this._currentModel=void 0,this._currentIdx=-1}put(e){const t=e.parent.parent;if(t.references.length<=1){this.reset();return}this._currentModel=t,this._currentIdx=t.references.indexOf(e),this._ctxHasSymbols.set(!0),this._showMessage();const i=new c$(this._editorService),n=i.onDidChange(s=>{if(this._ignoreEditorChange)return;const r=this._editorService.getActiveCodeEditor();if(!r)return;const a=r.getModel(),l=r.getPosition();if(!a||!l)return;let c=!1,u=!1;for(const f of t.references)if(AD(f.uri,a.uri))c=!0,u=u||M.containsPosition(f.range,l);else if(c)break;(!c||!u)&&this.reset()});this._currentState=od(i,n)}revealNext(e){if(!this._currentModel)return Promise.resolve();this._currentIdx+=1,this._currentIdx%=this._currentModel.references.length;const t=this._currentModel.references[this._currentIdx];return this._showMessage(),this._ignoreEditorChange=!0,this._editorService.openCodeEditor({resource:t.uri,options:{selection:M.collapseToStart(t.range),selectionRevealType:3}},e).finally(()=>{this._ignoreEditorChange=!1})}_showMessage(){var i;(i=this._currentMessage)==null||i.dispose();const e=this._keybindingService.lookupKeybinding("editor.gotoNextSymbolFromResult"),t=e?v("location.kb","Symbol {0} of {1}, {2} for next",this._currentIdx+1,this._currentModel.references.length,e.getLabel()):v("location","Symbol {0} of {1}",this._currentIdx+1,this._currentModel.references.length);this._currentMessage=this._notificationService.status(t)}};l$=Cpe([jx(0,ht),jx(1,hi),jx(2,fs),jx(3,Di)],l$);ei(u5,l$,1);Re(new class extends Bs{constructor(){super({id:"editor.gotoNextSymbolFromResult",precondition:xY,kbOpts:{weight:100,primary:70}})}runEditorCommand(o,e){return o.get(u5).revealNext(e)}});ea.registerCommandAndKeybindingRule({id:"editor.gotoNextSymbolFromResult.cancel",weight:100,when:xY,primary:9,handler(o){o.get(u5).reset()}});let c$=class{constructor(e){this._listener=new Map,this._disposables=new le,this._onDidChange=new Y,this.onDidChange=this._onDidChange.event,this._disposables.add(e.onCodeEditorRemove(this._onDidRemoveEditor,this)),this._disposables.add(e.onCodeEditorAdd(this._onDidAddEditor,this)),e.listCodeEditors().forEach(this._onDidAddEditor,this)}dispose(){this._disposables.dispose(),this._onDidChange.dispose(),$i(this._listener.values())}_onDidAddEditor(e){this._listener.set(e,od(e.onDidChangeCursorPosition(t=>this._onDidChange.fire({editor:e})),e.onDidChangeModelContent(t=>this._onDidChange.fire({editor:e}))))}_onDidRemoveEditor(e){var t;(t=this._listener.get(e))==null||t.dispose(),this._listener.delete(e)}};c$=Cpe([jx(0,hi)],c$);function d$(o,e){return e.uri.scheme===o.uri.scheme?!0:!rV(e.uri,Lt.walkThroughSnippet,Lt.vscodeChatCodeBlock,Lt.vscodeChatCodeCompareBlock)}async function DI(o,e,t,i,n){const r=t.ordered(o,i).map(l=>Promise.resolve(n(l,o,e)).then(void 0,c=>{rs(c)})),a=await Promise.all(r);return rd(a.flat()).filter(l=>d$(o,l))}function EI(o,e,t,i,n){return DI(e,t,o,i,(s,r,a)=>s.provideDefinition(r,a,n))}function kY(o,e,t,i,n){return DI(e,t,o,i,(s,r,a)=>s.provideDeclaration(r,a,n))}function DY(o,e,t,i,n){return DI(e,t,o,i,(s,r,a)=>s.provideImplementation(r,a,n))}function EY(o,e,t,i,n){return DI(e,t,o,i,(s,r,a)=>s.provideTypeDefinition(r,a,n))}function II(o,e,t,i,n,s){return DI(e,t,o,n,async(r,a,l)=>{var f,g;const c=(f=await r.provideReferences(a,l,{includeDeclaration:!0},s))==null?void 0:f.filter(p=>d$(a,p));if(!i||!c||c.length!==2)return c;const u=(g=await r.provideReferences(a,l,{includeDeclaration:!1},s))==null?void 0:g.filter(p=>d$(a,p));return u&&u.length===1?u:c})}async function Yh(o){const e=await o(),t=new sl(e,""),i=t.references.map(n=>n.link);return t.dispose(),i}Ra("_executeDefinitionProvider",(o,e,t)=>{const i=o.get(Ue),n=EI(i.definitionProvider,e,t,!1,Mt.None);return Yh(()=>n)});Ra("_executeDefinitionProvider_recursive",(o,e,t)=>{const i=o.get(Ue),n=EI(i.definitionProvider,e,t,!0,Mt.None);return Yh(()=>n)});Ra("_executeTypeDefinitionProvider",(o,e,t)=>{const i=o.get(Ue),n=EY(i.typeDefinitionProvider,e,t,!1,Mt.None);return Yh(()=>n)});Ra("_executeTypeDefinitionProvider_recursive",(o,e,t)=>{const i=o.get(Ue),n=EY(i.typeDefinitionProvider,e,t,!0,Mt.None);return Yh(()=>n)});Ra("_executeDeclarationProvider",(o,e,t)=>{const i=o.get(Ue),n=kY(i.declarationProvider,e,t,!1,Mt.None);return Yh(()=>n)});Ra("_executeDeclarationProvider_recursive",(o,e,t)=>{const i=o.get(Ue),n=kY(i.declarationProvider,e,t,!0,Mt.None);return Yh(()=>n)});Ra("_executeReferenceProvider",(o,e,t)=>{const i=o.get(Ue),n=II(i.referenceProvider,e,t,!1,!1,Mt.None);return Yh(()=>n)});Ra("_executeReferenceProvider_recursive",(o,e,t)=>{const i=o.get(Ue),n=II(i.referenceProvider,e,t,!1,!0,Mt.None);return Yh(()=>n)});Ra("_executeImplementationProvider",(o,e,t)=>{const i=o.get(Ue),n=DY(i.implementationProvider,e,t,!1,Mt.None);return Yh(()=>n)});Ra("_executeImplementationProvider_recursive",(o,e,t)=>{const i=o.get(Ue),n=DY(i.implementationProvider,e,t,!0,Mt.None);return Yh(()=>n)});lo.appendMenuItem(qe.EditorContext,{submenu:qe.EditorContextPeek,title:v("peek.submenu","Peek"),group:"navigation",order:100});class ES{static is(e){return!e||typeof e!="object"?!1:!!(e instanceof ES||G.isIPosition(e.position)&&e.model)}constructor(e,t){this.model=e,this.position=t}}const Gc=class Gc extends wu{static all(){return Gc._allSymbolNavigationCommands.values()}static _patchConfig(e){const t={...e,f1:!0};if(t.menu)for(const i of ti.wrap(t.menu))(i.id===qe.EditorContext||i.id===qe.EditorContextPeek)&&(i.when=de.and(e.precondition,i.when));return t}constructor(e,t){super(Gc._patchConfig(t)),this.configuration=e,Gc._allSymbolNavigationCommands.set(t.id,this)}runEditorCommand(e,t,i,n){if(!t.hasModel())return Promise.resolve(void 0);const s=e.get(fs),r=e.get(hi),a=e.get(i_),l=e.get(u5),c=e.get(Ue),u=e.get(nt),f=t.getModel(),g=t.getPosition(),p=ES.is(i)?i:new ES(f,g),_=new Gm(t,5),b=QE(this._getLocationModel(c,p.model,p.position,_.token),_.token).then(async y=>{var x;if(!y||_.token.isCancellationRequested)return;ta(y.ariaMessage);let S;if(y.referenceAt(f.uri,g)){const k=this._getAlternativeCommand(t);!Gc._activeAlternativeCommands.has(k)&&Gc._allSymbolNavigationCommands.has(k)&&(S=Gc._allSymbolNavigationCommands.get(k))}const L=y.references.length;if(L===0){if(!this.configuration.muteMessage){const k=f.getWordAtPosition(g);(x=nl.get(t))==null||x.showMessage(this._getNoResultFoundMessage(k),g)}}else if(L===1&&S)Gc._activeAlternativeCommands.add(this.desc.id),u.invokeFunction(k=>S.runEditorCommand(k,t,i,n).finally(()=>{Gc._activeAlternativeCommands.delete(this.desc.id)}));else return this._onResult(r,l,t,y,n)},y=>{s.error(y)}).finally(()=>{_.dispose()});return a.showWhile(b,250),b}async _onResult(e,t,i,n,s){const r=this._getGoToPreference(i);if(!(i instanceof fd)&&(this.configuration.openInPeek||r==="peek"&&n.references.length>1))this._openInPeek(i,n,s);else{const a=n.firstReference(),l=n.references.length>1&&r==="gotoAndPeek",c=await this._openReference(i,e,a,this.configuration.openToSide,!l);l&&c?this._openInPeek(c,n,s):n.dispose(),r==="goto"&&t.put(a)}}async _openReference(e,t,i,n,s){let r;if(xke(i)&&(r=i.targetSelectionRange),r||(r=i.range),!r)return;const a=await t.openCodeEditor({resource:i.uri,options:{selection:M.collapseToStart(r),selectionRevealType:3,selectionSource:"code.jump"}},e,n);if(a){if(s){const l=a.getModel(),c=a.createDecorationsCollection([{range:r,options:{description:"symbol-navigate-action-highlight",className:"symbolHighlight"}}]);setTimeout(()=>{a.getModel()===l&&c.clear()},350)}return a}}_openInPeek(e,t,i){const n=kC.get(e);n&&e.hasModel()?n.toggleWidget(i??e.getSelection(),Gs(s=>Promise.resolve(t)),this.configuration.openInPeek):t.dispose()}};Gc._allSymbolNavigationCommands=new Map,Gc._activeAlternativeCommands=new Set;let Tg=Gc;class TI extends Tg{async _getLocationModel(e,t,i,n){return new sl(await EI(e.definitionProvider,t,i,!1,n),v("def.title","Definitions"))}_getNoResultFoundMessage(e){return e&&e.word?v("noResultWord","No definition found for '{0}'",e.word):v("generic.noResults","No definition found")}_getAlternativeCommand(e){return e.getOption(58).alternativeDefinitionCommand}_getGoToPreference(e){return e.getOption(58).multipleDefinitions}}var ym;Xi((ym=class extends TI{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:ym.id,title:{...pt("actions.goToDecl.label","Go to Definition"),mnemonicTitle:v({key:"miGotoDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Definition")},precondition:B.hasDefinitionProvider,keybinding:[{when:B.editorTextFocus,primary:70,weight:100},{when:de.and(B.editorTextFocus,Ihe),primary:2118,weight:100}],menu:[{id:qe.EditorContext,group:"navigation",order:1.1},{id:qe.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:2}]}),ii.registerCommandAlias("editor.action.goToDeclaration",ym.id)}},ym.id="editor.action.revealDefinition",ym));var wm;Xi((wm=class extends TI{constructor(){super({openToSide:!0,openInPeek:!1,muteMessage:!1},{id:wm.id,title:pt("actions.goToDeclToSide.label","Open Definition to the Side"),precondition:de.and(B.hasDefinitionProvider,B.isInEmbeddedEditor.toNegated()),keybinding:[{when:B.editorTextFocus,primary:Is(2089,70),weight:100},{when:de.and(B.editorTextFocus,Ihe),primary:Is(2089,2118),weight:100}]}),ii.registerCommandAlias("editor.action.openDeclarationToTheSide",wm.id)}},wm.id="editor.action.revealDefinitionAside",wm));var Sm;Xi((Sm=class extends TI{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:Sm.id,title:pt("actions.previewDecl.label","Peek Definition"),precondition:de.and(B.hasDefinitionProvider,Ia.notInPeekEditor,B.isInEmbeddedEditor.toNegated()),keybinding:{when:B.editorTextFocus,primary:582,linux:{primary:3140},weight:100},menu:{id:qe.EditorContextPeek,group:"peek",order:2}}),ii.registerCommandAlias("editor.action.previewDeclaration",Sm.id)}},Sm.id="editor.action.peekDefinition",Sm));class ype extends Tg{async _getLocationModel(e,t,i,n){return new sl(await kY(e.declarationProvider,t,i,!1,n),v("decl.title","Declarations"))}_getNoResultFoundMessage(e){return e&&e.word?v("decl.noResultWord","No declaration found for '{0}'",e.word):v("decl.generic.noResults","No declaration found")}_getAlternativeCommand(e){return e.getOption(58).alternativeDeclarationCommand}_getGoToPreference(e){return e.getOption(58).multipleDeclarations}}var wb;Xi((wb=class extends ype{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:wb.id,title:{...pt("actions.goToDeclaration.label","Go to Declaration"),mnemonicTitle:v({key:"miGotoDeclaration",comment:["&& denotes a mnemonic"]},"Go to &&Declaration")},precondition:de.and(B.hasDeclarationProvider,B.isInEmbeddedEditor.toNegated()),menu:[{id:qe.EditorContext,group:"navigation",order:1.3},{id:qe.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:3}]})}_getNoResultFoundMessage(e){return e&&e.word?v("decl.noResultWord","No declaration found for '{0}'",e.word):v("decl.generic.noResults","No declaration found")}},wb.id="editor.action.revealDeclaration",wb));Xi(class extends ype{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.peekDeclaration",title:pt("actions.peekDecl.label","Peek Declaration"),precondition:de.and(B.hasDeclarationProvider,Ia.notInPeekEditor,B.isInEmbeddedEditor.toNegated()),menu:{id:qe.EditorContextPeek,group:"peek",order:3}})}});class wpe extends Tg{async _getLocationModel(e,t,i,n){return new sl(await EY(e.typeDefinitionProvider,t,i,!1,n),v("typedef.title","Type Definitions"))}_getNoResultFoundMessage(e){return e&&e.word?v("goToTypeDefinition.noResultWord","No type definition found for '{0}'",e.word):v("goToTypeDefinition.generic.noResults","No type definition found")}_getAlternativeCommand(e){return e.getOption(58).alternativeTypeDefinitionCommand}_getGoToPreference(e){return e.getOption(58).multipleTypeDefinitions}}var Sb;Xi((Sb=class extends wpe{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:Sb.ID,title:{...pt("actions.goToTypeDefinition.label","Go to Type Definition"),mnemonicTitle:v({key:"miGotoTypeDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Type Definition")},precondition:B.hasTypeDefinitionProvider,keybinding:{when:B.editorTextFocus,primary:0,weight:100},menu:[{id:qe.EditorContext,group:"navigation",order:1.4},{id:qe.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:3}]})}},Sb.ID="editor.action.goToTypeDefinition",Sb));var Lb;Xi((Lb=class extends wpe{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:Lb.ID,title:pt("actions.peekTypeDefinition.label","Peek Type Definition"),precondition:de.and(B.hasTypeDefinitionProvider,Ia.notInPeekEditor,B.isInEmbeddedEditor.toNegated()),menu:{id:qe.EditorContextPeek,group:"peek",order:4}})}},Lb.ID="editor.action.peekTypeDefinition",Lb));class Spe extends Tg{async _getLocationModel(e,t,i,n){return new sl(await DY(e.implementationProvider,t,i,!1,n),v("impl.title","Implementations"))}_getNoResultFoundMessage(e){return e&&e.word?v("goToImplementation.noResultWord","No implementation found for '{0}'",e.word):v("goToImplementation.generic.noResults","No implementation found")}_getAlternativeCommand(e){return e.getOption(58).alternativeImplementationCommand}_getGoToPreference(e){return e.getOption(58).multipleImplementations}}var xb;Xi((xb=class extends Spe{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:xb.ID,title:{...pt("actions.goToImplementation.label","Go to Implementations"),mnemonicTitle:v({key:"miGotoImplementation",comment:["&& denotes a mnemonic"]},"Go to &&Implementations")},precondition:B.hasImplementationProvider,keybinding:{when:B.editorTextFocus,primary:2118,weight:100},menu:[{id:qe.EditorContext,group:"navigation",order:1.45},{id:qe.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:4}]})}},xb.ID="editor.action.goToImplementation",xb));var kb;Xi((kb=class extends Spe{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:kb.ID,title:pt("actions.peekImplementation.label","Peek Implementations"),precondition:de.and(B.hasImplementationProvider,Ia.notInPeekEditor,B.isInEmbeddedEditor.toNegated()),keybinding:{when:B.editorTextFocus,primary:3142,weight:100},menu:{id:qe.EditorContextPeek,group:"peek",order:5}})}},kb.ID="editor.action.peekImplementation",kb));class Lpe extends Tg{_getNoResultFoundMessage(e){return e?v("references.no","No references found for '{0}'",e.word):v("references.noGeneric","No references found")}_getAlternativeCommand(e){return e.getOption(58).alternativeReferenceCommand}_getGoToPreference(e){return e.getOption(58).multipleReferences}}Xi(class extends Lpe{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:"editor.action.goToReferences",title:{...pt("goToReferences.label","Go to References"),mnemonicTitle:v({key:"miGotoReference",comment:["&& denotes a mnemonic"]},"Go to &&References")},precondition:de.and(B.hasReferenceProvider,Ia.notInPeekEditor,B.isInEmbeddedEditor.toNegated()),keybinding:{when:B.editorTextFocus,primary:1094,weight:100},menu:[{id:qe.EditorContext,group:"navigation",order:1.45},{id:qe.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:5}]})}async _getLocationModel(e,t,i,n){return new sl(await II(e.referenceProvider,t,i,!0,!1,n),v("ref.title","References"))}});Xi(class extends Lpe{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.referenceSearch.trigger",title:pt("references.action.label","Peek References"),precondition:de.and(B.hasReferenceProvider,Ia.notInPeekEditor,B.isInEmbeddedEditor.toNegated()),menu:{id:qe.EditorContextPeek,group:"peek",order:6}})}async _getLocationModel(e,t,i,n){return new sl(await II(e.referenceProvider,t,i,!1,!1,n),v("ref.title","References"))}});class y$e extends Tg{constructor(e,t,i){super(e,{id:"editor.action.goToLocation",title:pt("label.generic","Go to Any Symbol"),precondition:de.and(Ia.notInPeekEditor,B.isInEmbeddedEditor.toNegated())}),this._references=t,this._gotoMultipleBehaviour=i}async _getLocationModel(e,t,i,n){return new sl(this._references,v("generic.title","Locations"))}_getNoResultFoundMessage(e){return e&&v("generic.noResult","No results for '{0}'",e.word)||""}_getGoToPreference(e){return this._gotoMultipleBehaviour??e.getOption(58).multipleReferences}_getAlternativeCommand(){return""}}ii.registerCommand({id:"editor.action.goToLocations",metadata:{description:"Go to locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:st},{name:"position",description:"The position at which to start",constraint:G.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto`"},{name:"noResultsMessage",description:"Human readable message that shows when locations is empty."}]},handler:async(o,e,t,i,n,s,r)=>{ui(st.isUri(e)),ui(G.isIPosition(t)),ui(Array.isArray(i)),ui(typeof n>"u"||typeof n=="string"),ui(typeof r>"u"||typeof r=="boolean");const a=o.get(hi),l=await a.openCodeEditor({resource:e},a.getFocusedCodeEditor());if(Vh(l))return l.setPosition(t),l.revealPositionInCenterIfOutsideViewport(t,0),l.invokeWithinContext(c=>{const u=new class extends y$e{_getNoResultFoundMessage(f){return s||super._getNoResultFoundMessage(f)}}({muteMessage:!s,openInPeek:!!r,openToSide:!1},i,n);c.get(nt).invokeFunction(u.run.bind(u),l)})}});ii.registerCommand({id:"editor.action.peekLocations",metadata:{description:"Peek locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:st},{name:"position",description:"The position at which to start",constraint:G.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto`"}]},handler:async(o,e,t,i,n)=>{o.get(nn).executeCommand("editor.action.goToLocations",e,t,i,n,void 0,!0)}});ii.registerCommand({id:"editor.action.findReferences",handler:(o,e,t)=>{ui(st.isUri(e)),ui(G.isIPosition(t));const i=o.get(Ue),n=o.get(hi);return n.openCodeEditor({resource:e},n.getFocusedCodeEditor()).then(s=>{if(!Vh(s)||!s.hasModel())return;const r=kC.get(s);if(!r)return;const a=Gs(c=>II(i.referenceProvider,s.getModel(),G.lift(t),!1,!1,c).then(u=>new sl(u,v("ref.title","References")))),l=new M(t.lineNumber,t.column,t.lineNumber,t.column);return Promise.resolve(r.toggleWidget(l,a,!1))})}});ii.registerCommandAlias("editor.action.showReferences","editor.action.peekLocations");async function w$e(o,e,t,i){const n=o.get(Na),s=o.get(cl),r=o.get(nn),a=o.get(nt),l=o.get(fs);if(await i.item.resolve(Mt.None),!i.part.location)return;const c=i.part.location,u=[],f=new Set(lo.getMenuItems(qe.EditorContext).map(p=>m1(p)?p.command.id:n5()));for(const p of Tg.all())f.has(p.desc.id)&&u.push(new tl(p.desc.id,il.label(p.desc,{renderShortTitle:!0}),void 0,!0,async()=>{const _=await n.createModelReference(c.uri);try{const b=new ES(_.object.textEditorModel,M.getStartPosition(c.range)),y=i.item.anchor.range;await a.invokeFunction(p.runEditorCommand.bind(p),e,b,y)}finally{_.dispose()}}));if(i.part.command){const{command:p}=i.part;u.push(new Zs),u.push(new tl(p.id,p.title,void 0,!0,async()=>{try{await r.executeCommand(p.id,...p.arguments??[])}catch(_){l.notify({severity:d4.Error,source:i.item.provider.displayName,message:_})}}))}const g=e.getOption(128);s.showContextMenu({domForShadowRoot:g?e.getDomNode()??void 0:void 0,getAnchor:()=>{const p=os(t);return{x:p.left,y:p.top+p.height+8}},getActions:()=>u,onHide:()=>{e.focus()},autoSelectFirstItem:!0})}async function xpe(o,e,t,i){const s=await o.get(Na).createModelReference(i.uri);await t.invokeWithinContext(async r=>{const a=e.hasSideBySideModifier,l=r.get(ht),c=Ia.inPeekEditor.getValue(l),u=!a&&t.getOption(89)&&!c;return new TI({openToSide:a,openInPeek:u,muteMessage:!0},{title:{value:"",original:""},id:"",precondition:void 0}).run(r,new ES(s.object.textEditorModel,M.getStartPosition(i.range)),M.lift(i.range))}),s.dispose()}var S$e=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},cw=function(o,e){return function(t,i){e(t,i,o)}},ww;class pO{constructor(){this._entries=new $h(50)}get(e){const t=pO._key(e);return this._entries.get(t)}set(e,t){const i=pO._key(e);this._entries.set(i,t)}static _key(e){return`${e.uri.toString()}/${e.getVersionId()}`}}const kpe=Gt("IInlayHintsCache");ei(kpe,pO,1);class u${constructor(e,t){this.item=e,this.index=t}get part(){const e=this.item.hint.label;return typeof e=="string"?{label:e}:e[this.index]}}class L$e{constructor(e,t){this.part=e,this.hasTriggerModifier=t}}var ug;let wE=(ug=class{static get(e){return e.getContribution(ww.ID)??void 0}constructor(e,t,i,n,s,r,a){this._editor=e,this._languageFeaturesService=t,this._inlayHintsCache=n,this._commandService=s,this._notificationService=r,this._instaService=a,this._disposables=new le,this._sessionDisposables=new le,this._decorationsMetadata=new Map,this._ruleFactory=new MP(this._editor),this._activeRenderMode=0,this._debounceInfo=i.for(t.inlayHintsProvider,"InlayHint",{min:25}),this._disposables.add(t.inlayHintsProvider.onDidChange(()=>this._update())),this._disposables.add(e.onDidChangeModel(()=>this._update())),this._disposables.add(e.onDidChangeModelLanguage(()=>this._update())),this._disposables.add(e.onDidChangeConfiguration(l=>{l.hasChanged(142)&&this._update()})),this._update()}dispose(){this._sessionDisposables.dispose(),this._removeAllDecorations(),this._disposables.dispose()}_update(){this._sessionDisposables.clear(),this._removeAllDecorations();const e=this._editor.getOption(142);if(e.enabled==="off")return;const t=this._editor.getModel();if(!t||!this._languageFeaturesService.inlayHintsProvider.has(t))return;if(e.enabled==="on")this._activeRenderMode=0;else{let a,l;e.enabled==="onUnlessPressed"?(a=0,l=1):(a=1,l=0),this._activeRenderMode=a,this._sessionDisposables.add(eg.getInstance().event(c=>{if(!this._editor.hasModel())return;const u=c.altKey&&c.ctrlKey&&!(c.shiftKey||c.metaKey)?l:a;if(u!==this._activeRenderMode){this._activeRenderMode=u;const f=this._editor.getModel(),g=this._copyInlayHintsWithCurrentAnchor(f);this._updateHintsDecorators([f.getFullModelRange()],g),r.schedule(0)}}))}const i=this._inlayHintsCache.get(t);i&&this._updateHintsDecorators([t.getFullModelRange()],i),this._sessionDisposables.add(it(()=>{t.isDisposed()||this._cacheHintsForFastRestore(t)}));let n;const s=new Set,r=new Oi(async()=>{const a=Date.now();n==null||n.dispose(!0),n=new An;const l=t.onWillDispose(()=>n==null?void 0:n.cancel());try{const c=n.token,u=await dO.create(this._languageFeaturesService.inlayHintsProvider,t,this._getHintsRanges(),c);if(r.delay=this._debounceInfo.update(t,Date.now()-a),c.isCancellationRequested){u.dispose();return}for(const f of u.provider)typeof f.onDidChangeInlayHints=="function"&&!s.has(f)&&(s.add(f),this._sessionDisposables.add(f.onDidChangeInlayHints(()=>{r.isScheduled()||r.schedule()})));this._sessionDisposables.add(u),this._updateHintsDecorators(u.ranges,u.items),this._cacheHintsForFastRestore(t)}catch(c){wt(c)}finally{n.dispose(),l.dispose()}},this._debounceInfo.get(t));this._sessionDisposables.add(r),this._sessionDisposables.add(it(()=>n==null?void 0:n.dispose(!0))),r.schedule(0),this._sessionDisposables.add(this._editor.onDidScrollChange(a=>{(a.scrollTopChanged||!r.isScheduled())&&r.schedule()})),this._sessionDisposables.add(this._editor.onDidChangeModelContent(a=>{n==null||n.cancel();const l=Math.max(r.delay,1250);r.schedule(l)})),this._sessionDisposables.add(this._installDblClickGesture(()=>r.schedule(0))),this._sessionDisposables.add(this._installLinkGesture()),this._sessionDisposables.add(this._installContextMenu())}_installLinkGesture(){const e=new le,t=e.add(new l5(this._editor)),i=new le;return e.add(i),e.add(t.onMouseMoveOrRelevantKeyDown(n=>{const[s]=n,r=this._getInlayHintLabelPart(s),a=this._editor.getModel();if(!r||!a){i.clear();return}const l=new An;i.add(it(()=>l.dispose(!0))),r.item.resolve(l.token),this._activeInlayHintPart=r.part.command||r.part.location?new L$e(r,s.hasTriggerModifier):void 0;const c=a.validatePosition(r.item.hint.position).lineNumber,u=new M(c,1,c,a.getLineMaxColumn(c)),f=this._getInlineHintsForRange(u);this._updateHintsDecorators([u],f),i.add(it(()=>{this._activeInlayHintPart=void 0,this._updateHintsDecorators([u],f)}))})),e.add(t.onCancel(()=>i.clear())),e.add(t.onExecute(async n=>{const s=this._getInlayHintLabelPart(n);if(s){const r=s.part;r.location?this._instaService.invokeFunction(xpe,n,this._editor,r.location):o8.is(r.command)&&await this._invokeCommand(r.command,s.item)}})),e}_getInlineHintsForRange(e){const t=new Set;for(const i of this._decorationsMetadata.values())e.containsRange(i.item.anchor.range)&&t.add(i.item);return Array.from(t)}_installDblClickGesture(e){return this._editor.onMouseUp(async t=>{if(t.event.detail!==2)return;const i=this._getInlayHintLabelPart(t);if(i&&(t.event.preventDefault(),await i.item.resolve(Mt.None),wr(i.item.hint.textEdits))){const n=i.item.hint.textEdits.map(s=>Rn.replace(M.lift(s.range),s.text));this._editor.executeEdits("inlayHint.default",n),e()}})}_installContextMenu(){return this._editor.onContextMenu(async e=>{if(!Ys(e.event.target))return;const t=this._getInlayHintLabelPart(e);t&&await this._instaService.invokeFunction(w$e,this._editor,e.event.target,t)})}_getInlayHintLabelPart(e){var i;if(e.target.type!==6)return;const t=(i=e.target.detail.injectedText)==null?void 0:i.options;if(t instanceof jm&&(t==null?void 0:t.attachedData)instanceof u$)return t.attachedData}async _invokeCommand(e,t){try{await this._commandService.executeCommand(e.id,...e.arguments??[])}catch(i){this._notificationService.notify({severity:d4.Error,source:t.provider.displayName,message:i})}}_cacheHintsForFastRestore(e){const t=this._copyInlayHintsWithCurrentAnchor(e);this._inlayHintsCache.set(e,t)}_copyInlayHintsWithCurrentAnchor(e){const t=new Map;for(const[i,n]of this._decorationsMetadata){if(t.has(n.item))continue;const s=e.getDecorationRange(i);if(s){const r=new fpe(s,n.item.anchor.direction),a=n.item.with({anchor:r});t.set(n.item,a)}}return Array.from(t.values())}_getHintsRanges(){const t=this._editor.getModel(),i=this._editor.getVisibleRangesPlusViewportAboveBelow(),n=[];for(const s of i.sort(M.compareRangesUsingStarts)){const r=t.validateRange(new M(s.startLineNumber-30,s.startColumn,s.endLineNumber+30,s.endColumn));n.length===0||!M.areIntersectingOrTouching(n[n.length-1],r)?n.push(r):n[n.length-1]=M.plusRange(n[n.length-1],r)}return n}_updateHintsDecorators(e,t){var _,b;const i=[],n=(y,S,L,x,k)=>{const E={content:L,inlineClassNameAffectsLetterSpacing:!0,inlineClassName:S.className,cursorStops:x,attachedData:k};i.push({item:y,classNameRef:S,decoration:{range:y.anchor.range,options:{description:"InlayHint",showIfCollapsed:y.anchor.range.isEmpty(),collapseOnReplaceEdit:!y.anchor.range.isEmpty(),stickiness:0,[y.anchor.direction]:this._activeRenderMode===0?E:void 0}}})},s=(y,S)=>{const L=this._ruleFactory.createClassNameRef({width:`${r/3|0}px`,display:"inline-block"});n(y,L,"",S?id.Right:id.None)},{fontSize:r,fontFamily:a,padding:l,isUniform:c}=this._getLayoutInfo(),u="--code-editorInlayHintsFontFamily";this._editor.getContainerDomNode().style.setProperty(u,a);let f={line:0,totalLen:0};for(const y of t){if(f.line!==y.anchor.range.startLineNumber&&(f={line:y.anchor.range.startLineNumber,totalLen:0}),f.totalLen>ww._MAX_LABEL_LEN)continue;y.hint.paddingLeft&&s(y,!1);const S=typeof y.hint.label=="string"?[{label:y.hint.label}]:y.hint.label;for(let L=0;L<S.length;L++){const x=S[L],k=L===0,E=L===S.length-1,N={fontSize:`${r}px`,fontFamily:`var(${u}), ${Zr.fontFamily}`,verticalAlign:c?"baseline":"middle",unicodeBidi:"isolate"};wr(y.hint.textEdits)&&(N.cursor="default"),this._fillInColors(N,y.hint),(x.command||x.location)&&((_=this._activeInlayHintPart)==null?void 0:_.part.item)===y&&this._activeInlayHintPart.part.index===L&&(N.textDecoration="underline",this._activeInlayHintPart.hasTriggerModifier&&(N.color=Gn(KNe),N.cursor="pointer")),l&&(k&&E?(N.padding=`1px ${Math.max(1,r/4)|0}px`,N.borderRadius=`${r/4|0}px`):k?(N.padding=`1px 0 1px ${Math.max(1,r/4)|0}px`,N.borderRadius=`${r/4|0}px 0 0 ${r/4|0}px`):E?(N.padding=`1px ${Math.max(1,r/4)|0}px 1px 0`,N.borderRadius=`0 ${r/4|0}px ${r/4|0}px 0`):N.padding="1px 0 1px 0");let A=x.label;f.totalLen+=A.length;let P=!1;const H=f.totalLen-ww._MAX_LABEL_LEN;if(H>0&&(A=A.slice(0,-H)+"",P=!0),n(y,this._ruleFactory.createClassNameRef(N),x$e(A),E&&!y.hint.paddingRight?id.Right:id.None,new u$(y,L)),P)break}if(y.hint.paddingRight&&s(y,!0),i.length>ww._MAX_DECORATORS)break}const g=[];for(const[y,S]of this._decorationsMetadata){const L=(b=this._editor.getModel())==null?void 0:b.getDecorationRange(y);L&&e.some(x=>x.containsRange(L))&&(g.push(y),S.classNameRef.dispose(),this._decorationsMetadata.delete(y))}const p=Cu.capture(this._editor);this._editor.changeDecorations(y=>{const S=y.deltaDecorations(g,i.map(L=>L.decoration));for(let L=0;L<S.length;L++){const x=i[L];this._decorationsMetadata.set(S[L],x)}}),p.restore(this._editor)}_fillInColors(e,t){t.kind===hA.Parameter?(e.backgroundColor=Gn(tRe),e.color=Gn(eRe)):t.kind===hA.Type?(e.backgroundColor=Gn(JNe),e.color=Gn(QNe)):(e.backgroundColor=Gn(pK),e.color=Gn(gK))}_getLayoutInfo(){const e=this._editor.getOption(142),t=e.padding,i=this._editor.getOption(52),n=this._editor.getOption(49);let s=e.fontSize;(!s||s<5||s>i)&&(s=i);const r=e.fontFamily||n;return{fontSize:s,fontFamily:r,padding:t,isUniform:!t&&r===n&&s===i}}_removeAllDecorations(){this._editor.removeDecorations(Array.from(this._decorationsMetadata.keys()));for(const e of this._decorationsMetadata.values())e.classNameRef.dispose();this._decorationsMetadata.clear()}},ww=ug,ug.ID="editor.contrib.InlayHints",ug._MAX_DECORATORS=1500,ug._MAX_LABEL_LEN=43,ug);wE=ww=S$e([cw(1,Ue),cw(2,Yl),cw(3,kpe),cw(4,nn),cw(5,fs),cw(6,nt)],wE);function x$e(o){return o.replace(/[ \t]/g,"")}ii.registerCommand("_executeInlayHintProvider",async(o,...e)=>{const[t,i]=e;ui(st.isUri(t)),ui(M.isIRange(i));const{inlayHintsProvider:n}=o.get(Ue),s=await o.get(Na).createModelReference(t);try{const r=await dO.create(n,s.object.textEditorModel,[M.lift(i)],Mt.None),a=r.items.map(l=>l.hint);return setTimeout(()=>r.dispose(),0),a}finally{s.dispose()}});var k$e=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},wp=function(o,e){return function(t,i){e(t,i,o)}};class Mre extends WM{constructor(e,t,i,n){super(10,t,e.item.anchor.range,i,n,!0),this.part=e}}let mO=class extends CE{constructor(e,t,i,n,s,r,a,l,c){super(e,t,i,r,l,n,s,c),this._resolverService=a,this.hoverOrdinal=6}suggestHoverAnchor(e){var n;if(!wE.get(this._editor)||e.target.type!==6)return null;const i=(n=e.target.detail.injectedText)==null?void 0:n.options;return i instanceof jm&&i.attachedData instanceof u$?new Mre(i.attachedData,this,e.event.posx,e.event.posy):null}computeSync(){return[]}computeAsync(e,t,i){return e instanceof Mre?new Fl(async n=>{const{part:s}=e;if(await s.item.resolve(i),i.isCancellationRequested)return;let r;typeof s.item.hint.tooltip=="string"?r=new Xo().appendText(s.item.hint.tooltip):s.item.hint.tooltip&&(r=s.item.hint.tooltip),r&&n.emitOne(new ed(this,e.range,[r],!1,0)),wr(s.item.hint.textEdits)&&n.emitOne(new ed(this,e.range,[new Xo().appendText(v("hint.dbl","Double-click to insert"))],!1,10001));let a;if(typeof s.part.tooltip=="string"?a=new Xo().appendText(s.part.tooltip):s.part.tooltip&&(a=s.part.tooltip),a&&n.emitOne(new ed(this,e.range,[a],!1,1)),s.part.location||s.part.command){let c;const f=this._editor.getOption(78)==="altKey"?Kt?v("links.navigate.kb.meta.mac","cmd + click"):v("links.navigate.kb.meta","ctrl + click"):Kt?v("links.navigate.kb.alt.mac","option + click"):v("links.navigate.kb.alt","alt + click");s.part.location&&s.part.command?c=new Xo().appendText(v("hint.defAndCommand","Go to Definition ({0}), right click for more",f)):s.part.location?c=new Xo().appendText(v("hint.def","Go to Definition ({0})",f)):s.part.command&&(c=new Xo(`[${v("hint.cmd","Execute Command")}](${e$e(s.part.command)} "${s.part.command.title}") (${f})`,{isTrusted:!0})),c&&n.emitOne(new ed(this,e.range,[c],!1,1e4))}const l=await this._resolveInlayHintLabelPartHover(s,i);for await(const c of l)n.emitOne(c)}):Fl.EMPTY}async _resolveInlayHintLabelPartHover(e,t){if(!e.part.location)return Fl.EMPTY;const{uri:i,range:n}=e.part.location,s=await this._resolverService.createModelReference(i);try{const r=s.object.textEditorModel;return this._languageFeaturesService.hoverProvider.has(r)?SY(this._languageFeaturesService.hoverProvider,r,new G(n.startLineNumber,n.startColumn),t).filter(a=>!dS(a.hover.contents)).map(a=>new ed(this,e.item.anchor.range,a.hover.contents,!1,2+a.ordinal)):Fl.EMPTY}finally{s.dispose()}}};mO=k$e([wp(1,In),wp(2,Ma),wp(3,Di),wp(4,qh),wp(5,Ht),wp(6,Na),wp(7,Ue),wp(8,nn)],mO);class IY extends X{constructor(e,t,i,n,s,r){super();const a=t.anchor,l=t.hoverParts;this._renderedHoverParts=this._register(new h$(e,i,l,r,s));const{showAtPosition:c,showAtSecondaryPosition:u}=IY.computeHoverPositions(e,a.range,l);this.shouldAppearBeforeContent=l.some(f=>f.isBeforeContent),this.showAtPosition=c,this.showAtSecondaryPosition=u,this.initialMousePosX=a.initialMousePosX,this.initialMousePosY=a.initialMousePosY,this.shouldFocus=n.shouldFocus,this.source=n.source}get domNode(){return this._renderedHoverParts.domNode}get domNodeHasChildren(){return this._renderedHoverParts.domNodeHasChildren}get focusedHoverPartIndex(){return this._renderedHoverParts.focusedHoverPartIndex}async updateHoverVerbosityLevel(e,t,i){this._renderedHoverParts.updateHoverVerbosityLevel(e,t,i)}isColorPickerVisible(){return this._renderedHoverParts.isColorPickerVisible()}static computeHoverPositions(e,t,i){let n=1;if(e.hasModel()){const u=e._getViewModel(),f=u.coordinatesConverter,g=f.convertModelRangeToViewRange(t),p=u.getLineMinColumn(g.startLineNumber),_=new G(g.startLineNumber,p);n=f.convertViewPositionToModelPosition(_).column}const s=t.startLineNumber;let r=t.startColumn,a;for(const u of i){const f=u.range,g=f.startLineNumber===s,p=f.endLineNumber===s;if(g&&p){const b=f.startColumn,y=Math.min(r,b);r=Math.max(y,n)}u.forceShowAtRange&&(a=f)}let l,c;if(a){const u=a.getStartPosition();l=u,c=u}else l=t.getStartPosition(),c=new G(s,r);return{showAtPosition:l,showAtSecondaryPosition:c}}}class D$e{constructor(e,t){this._statusBar=t,e.appendChild(this._statusBar.hoverElement)}get hoverElement(){return this._statusBar.hoverElement}get actions(){return this._statusBar.actions}dispose(){this._statusBar.dispose()}}const iF=class iF extends X{constructor(e,t,i,n,s){super(),this._renderedParts=[],this._focusedHoverPartIndex=-1,this._context=s,this._fragment=document.createDocumentFragment(),this._register(this._renderParts(t,i,s,n)),this._register(this._registerListenersOnRenderedParts()),this._register(this._createEditorDecorations(e,i)),this._updateMarkdownAndColorParticipantInfo(t)}_createEditorDecorations(e,t){if(t.length===0)return X.None;let i=t[0].range;for(const s of t){const r=s.range;i=M.plusRange(i,r)}const n=e.createDecorationsCollection();return n.set([{range:i,options:iF._DECORATION_OPTIONS}]),it(()=>{n.clear()})}_renderParts(e,t,i,n){const s=new cO(n),r={fragment:this._fragment,statusBar:s,...i},a=new le;for(const c of e){const u=this._renderHoverPartsForParticipant(t,c,r);a.add(u);for(const f of u.renderedHoverParts)this._renderedParts.push({type:"hoverPart",participant:c,hoverPart:f.hoverPart,hoverElement:f.hoverElement})}const l=this._renderStatusBar(this._fragment,s);return l&&(a.add(l),this._renderedParts.push({type:"statusBar",hoverElement:l.hoverElement,actions:l.actions})),it(()=>{a.dispose()})}_renderHoverPartsForParticipant(e,t,i){const n=e.filter(r=>r.owner===t);return n.length>0?t.renderHoverParts(i,n):new xC([])}_renderStatusBar(e,t){if(t.hasContent)return new D$e(e,t)}_registerListenersOnRenderedParts(){const e=new le;return this._renderedParts.forEach((t,i)=>{const n=t.hoverElement;n.tabIndex=0,e.add(se(n,Le.FOCUS_IN,s=>{s.stopPropagation(),this._focusedHoverPartIndex=i})),e.add(se(n,Le.FOCUS_OUT,s=>{s.stopPropagation(),this._focusedHoverPartIndex=-1}))}),e}_updateMarkdownAndColorParticipantInfo(e){const t=e.find(i=>i instanceof CE&&!(i instanceof mO));t&&(this._markdownHoverParticipant=t),this._colorHoverParticipant=e.find(i=>i instanceof vE)}async updateHoverVerbosityLevel(e,t,i){if(!this._markdownHoverParticipant)return;const n=this._normalizedIndexToMarkdownHoverIndexRange(this._markdownHoverParticipant,t);if(n===void 0)return;const s=await this._markdownHoverParticipant.updateMarkdownHoverVerbosityLevel(e,n,i);s&&(this._renderedParts[t]={type:"hoverPart",participant:this._markdownHoverParticipant,hoverPart:s.hoverPart,hoverElement:s.hoverElement},this._context.onContentsChanged())}isColorPickerVisible(){var e;return((e=this._colorHoverParticipant)==null?void 0:e.isColorPickerVisible())??!1}_normalizedIndexToMarkdownHoverIndexRange(e,t){const i=this._renderedParts[t];if(!i||i.type!=="hoverPart"||!(i.participant===e))return;const s=this._renderedParts.findIndex(r=>r.type==="hoverPart"&&r.participant===e);if(s===-1)throw new wi;return t-s}get domNode(){return this._fragment}get domNodeHasChildren(){return this._fragment.hasChildNodes()}get focusedHoverPartIndex(){return this._focusedHoverPartIndex}};iF._DECORATION_OPTIONS=Dt.register({description:"content-hover-highlight",className:"hoverHighlight"});let h$=iF;var E$e=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Are=function(o,e){return function(t,i){e(t,i,o)}};let f$=class extends X{constructor(e,t,i){super(),this._editor=e,this._instantiationService=t,this._keybindingService=i,this._currentResult=null,this._onContentsChanged=this._register(new Y),this.onContentsChanged=this._onContentsChanged.event,this._contentHoverWidget=this._register(this._instantiationService.createInstance(JU,this._editor)),this._participants=this._initializeHoverParticipants(),this._computer=new lO(this._editor,this._participants),this._hoverOperation=this._register(new lpe(this._editor,this._computer)),this._registerListeners()}_initializeHoverParticipants(){const e=[];for(const t of jC.getAll()){const i=this._instantiationService.createInstance(t,this._editor);e.push(i)}return e.sort((t,i)=>t.hoverOrdinal-i.hoverOrdinal),this._register(this._contentHoverWidget.onDidResize(()=>{this._participants.forEach(t=>{var i;return(i=t.handleResize)==null?void 0:i.call(t)})})),e}_registerListeners(){this._register(this._hoverOperation.onResult(t=>{if(!this._computer.anchor)return;const i=t.hasLoadingMessage?this._addLoadingMessage(t.value):t.value;this._withResult(new cpe(this._computer.anchor,i,t.isComplete))}));const e=this._contentHoverWidget.getDomNode();this._register(Bn(e,"keydown",t=>{t.equals(9)&&this.hide()})),this._register(Bn(e,"mouseleave",t=>{this._onMouseLeave(t)})),this._register(Kn.onDidChange(()=>{this._contentHoverWidget.position&&this._currentResult&&this._setCurrentResult(this._currentResult)}))}_startShowingOrUpdateHover(e,t,i,n,s){if(!(this._contentHoverWidget.position&&this._currentResult))return e?(this._startHoverOperationIfNecessary(e,t,i,n,!1),!0):!1;const a=this._editor.getOption(60).sticky,l=s&&this._contentHoverWidget.isMouseGettingCloser(s.event.posx,s.event.posy);return a&&l?(e&&this._startHoverOperationIfNecessary(e,t,i,n,!0),!0):e?this._currentResult.anchor.equals(e)?!0:e.canAdoptVisibleHover(this._currentResult.anchor,this._contentHoverWidget.position)?(this._setCurrentResult(this._currentResult.filter(e)),this._startHoverOperationIfNecessary(e,t,i,n,!1),!0):(this._setCurrentResult(null),this._startHoverOperationIfNecessary(e,t,i,n,!1),!0):(this._setCurrentResult(null),!1)}_startHoverOperationIfNecessary(e,t,i,n,s){this._computer.anchor&&this._computer.anchor.equals(e)||(this._hoverOperation.cancel(),this._computer.anchor=e,this._computer.shouldFocus=n,this._computer.source=i,this._computer.insistOnKeepingHoverVisible=s,this._hoverOperation.start(t))}_setCurrentResult(e){let t=e;if(this._currentResult===t)return;t&&t.hoverParts.length===0&&(t=null),this._currentResult=t,this._currentResult?this._showHover(this._currentResult):this._hideHover()}_addLoadingMessage(e){if(!this._computer.anchor)return e;for(const t of this._participants){if(!t.createLoadingMessage)continue;const i=t.createLoadingMessage(this._computer.anchor);if(i)return e.slice(0).concat([i])}return e}_withResult(e){if(this._contentHoverWidget.position&&this._currentResult&&this._currentResult.isComplete||this._setCurrentResult(e),!e.isComplete)return;const n=e.hoverParts.length===0,s=this._computer.insistOnKeepingHoverVisible;n&&s||this._setCurrentResult(e)}_showHover(e){const t=this._getHoverContext();this._renderedContentHover=new IY(this._editor,e,this._participants,this._computer,t,this._keybindingService),this._renderedContentHover.domNodeHasChildren?this._contentHoverWidget.show(this._renderedContentHover):this._renderedContentHover.dispose()}_hideHover(){this._contentHoverWidget.hide()}_getHoverContext(){return{hide:()=>{this.hide()},onContentsChanged:()=>{this._onContentsChanged.fire(),this._contentHoverWidget.onContentsChanged()},setMinimumDimensions:n=>{this._contentHoverWidget.setMinimumDimensions(n)}}}showsOrWillShow(e){if(this._contentHoverWidget.isResizing)return!0;const i=this._findHoverAnchorCandidates(e);if(!(i.length>0))return this._startShowingOrUpdateHover(null,0,0,!1,e);const s=i[0];return this._startShowingOrUpdateHover(s,0,0,!1,e)}_findHoverAnchorCandidates(e){const t=[];for(const n of this._participants){if(!n.suggestHoverAnchor)continue;const s=n.suggestHoverAnchor(e);s&&t.push(s)}const i=e.target;switch(i.type){case 6:{t.push(new f9(0,i.range,e.event.posx,e.event.posy));break}case 7:{const n=this._editor.getOption(50).typicalHalfwidthCharacterWidth/2;if(!(!i.detail.isAfterLines&&typeof i.detail.horizontalDistanceToText=="number"&&i.detail.horizontalDistanceToText<n))break;t.push(new f9(0,i.range,e.event.posx,e.event.posy));break}}return t.sort((n,s)=>s.priority-n.priority),t}_onMouseLeave(e){const t=this._editor.getDomNode();(!t||!a5(t,e.x,e.y))&&this.hide()}startShowingAtRange(e,t,i,n){this._startShowingOrUpdateHover(new f9(0,e,void 0,void 0),t,i,n,null)}async updateHoverVerbosityLevel(e,t,i){var n;(n=this._renderedContentHover)==null||n.updateHoverVerbosityLevel(e,t,i)}focusedHoverPartIndex(){var e;return((e=this._renderedContentHover)==null?void 0:e.focusedHoverPartIndex)??-1}containsNode(e){return e?this._contentHoverWidget.getDomNode().contains(e):!1}focus(){this._contentHoverWidget.focus()}scrollUp(){this._contentHoverWidget.scrollUp()}scrollDown(){this._contentHoverWidget.scrollDown()}scrollLeft(){this._contentHoverWidget.scrollLeft()}scrollRight(){this._contentHoverWidget.scrollRight()}pageUp(){this._contentHoverWidget.pageUp()}pageDown(){this._contentHoverWidget.pageDown()}goToTop(){this._contentHoverWidget.goToTop()}goToBottom(){this._contentHoverWidget.goToBottom()}hide(){this._computer.anchor=null,this._hoverOperation.cancel(),this._setCurrentResult(null)}getDomNode(){return this._contentHoverWidget.getDomNode()}get isColorPickerVisible(){var e;return((e=this._renderedContentHover)==null?void 0:e.isColorPickerVisible())??!1}get isVisibleFromKeyboard(){return this._contentHoverWidget.isVisibleFromKeyboard}get isVisible(){return this._contentHoverWidget.isVisible}get isFocused(){return this._contentHoverWidget.isFocused}get isResizing(){return this._contentHoverWidget.isResizing}get widget(){return this._contentHoverWidget}};f$=E$e([Are(1,nt),Are(2,Di)],f$);var I$e=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Pre=function(o,e){return function(t,i){e(t,i,o)}},g$;const T$e=!1;var Db;let Lr=(Db=class extends X{constructor(e,t,i){super(),this._editor=e,this._instantiationService=t,this._keybindingService=i,this._onHoverContentsChanged=this._register(new Y),this.shouldKeepOpenOnEditorMouseMoveOrLeave=!1,this._listenersStore=new le,this._hoverState={mouseDown:!1,activatedByDecoratorClick:!1},this._reactToEditorMouseMoveRunner=this._register(new Oi(()=>this._reactToEditorMouseMove(this._mouseMoveEvent),0)),this._hookListeners(),this._register(this._editor.onDidChangeConfiguration(n=>{n.hasChanged(60)&&(this._unhookListeners(),this._hookListeners())}))}static get(e){return e.getContribution(g$.ID)}_hookListeners(){const e=this._editor.getOption(60);this._hoverSettings={enabled:e.enabled,sticky:e.sticky,hidingDelay:e.hidingDelay},e.enabled?(this._listenersStore.add(this._editor.onMouseDown(t=>this._onEditorMouseDown(t))),this._listenersStore.add(this._editor.onMouseUp(()=>this._onEditorMouseUp())),this._listenersStore.add(this._editor.onMouseMove(t=>this._onEditorMouseMove(t))),this._listenersStore.add(this._editor.onKeyDown(t=>this._onKeyDown(t)))):(this._listenersStore.add(this._editor.onMouseMove(t=>this._onEditorMouseMove(t))),this._listenersStore.add(this._editor.onKeyDown(t=>this._onKeyDown(t)))),this._listenersStore.add(this._editor.onMouseLeave(t=>this._onEditorMouseLeave(t))),this._listenersStore.add(this._editor.onDidChangeModel(()=>{this._cancelScheduler(),this._hideWidgets()})),this._listenersStore.add(this._editor.onDidChangeModelContent(()=>this._cancelScheduler())),this._listenersStore.add(this._editor.onDidScrollChange(t=>this._onEditorScrollChanged(t)))}_unhookListeners(){this._listenersStore.clear()}_cancelScheduler(){this._mouseMoveEvent=void 0,this._reactToEditorMouseMoveRunner.cancel()}_onEditorScrollChanged(e){(e.scrollTopChanged||e.scrollLeftChanged)&&this._hideWidgets()}_onEditorMouseDown(e){this._hoverState.mouseDown=!0,!this._shouldNotHideCurrentHoverWidget(e)&&this._hideWidgets()}_shouldNotHideCurrentHoverWidget(e){return this._isMouseOnContentHoverWidget(e)||this._isContentWidgetResizing()}_isMouseOnContentHoverWidget(e){var i;const t=(i=this._contentWidget)==null?void 0:i.getDomNode();return t?a5(t,e.event.posx,e.event.posy):!1}_onEditorMouseUp(){this._hoverState.mouseDown=!1}_onEditorMouseLeave(e){this.shouldKeepOpenOnEditorMouseMoveOrLeave||(this._cancelScheduler(),this._shouldNotHideCurrentHoverWidget(e))||this._hideWidgets()}_shouldNotRecomputeCurrentHoverWidget(e){const t=this._hoverSettings.sticky,i=(r,a)=>{const l=this._isMouseOnContentHoverWidget(r);return a&&l},n=r=>{var c;const a=this._isMouseOnContentHoverWidget(r),l=((c=this._contentWidget)==null?void 0:c.isColorPickerVisible)??!1;return a&&l},s=(r,a)=>{var l,c,u,f;return(a&&((c=this._contentWidget)==null?void 0:c.containsNode((l=r.event.browserEvent.view)==null?void 0:l.document.activeElement))&&!((f=(u=r.event.browserEvent.view)==null?void 0:u.getSelection())!=null&&f.isCollapsed))??!1};return i(e,t)||n(e)||s(e,t)}_onEditorMouseMove(e){var a,l,c,u;if(this.shouldKeepOpenOnEditorMouseMoveOrLeave||(this._mouseMoveEvent=e,(a=this._contentWidget)!=null&&a.isFocused||(l=this._contentWidget)!=null&&l.isResizing))return;const t=this._hoverSettings.sticky;if(t&&((c=this._contentWidget)!=null&&c.isVisibleFromKeyboard))return;if(this._shouldNotRecomputeCurrentHoverWidget(e)){this._reactToEditorMouseMoveRunner.cancel();return}const n=this._hoverSettings.hidingDelay;if(((u=this._contentWidget)==null?void 0:u.isVisible)&&t&&n>0){this._reactToEditorMouseMoveRunner.isScheduled()||this._reactToEditorMouseMoveRunner.schedule(n);return}this._reactToEditorMouseMove(e)}_reactToEditorMouseMove(e){var l;if(!e)return;const i=(l=e.target.element)==null?void 0:l.classList.contains("colorpicker-color-decoration"),n=this._editor.getOption(149),s=this._hoverSettings.enabled,r=this._hoverState.activatedByDecoratorClick;if(i&&(n==="click"&&!r||n==="hover"&&!s&&!T$e||n==="clickAndHover"&&!s&&!r)||!i&&!s&&!r){this._hideWidgets();return}this._tryShowHoverWidget(e)||this._hideWidgets()}_tryShowHoverWidget(e){return this._getOrCreateContentWidget().showsOrWillShow(e)}_onKeyDown(e){var n;if(!this._editor.hasModel())return;const t=this._keybindingService.softDispatch(e,this._editor.getDomNode()),i=t.kind===1||t.kind===2&&(t.commandId===spe||t.commandId===o5||t.commandId===r5)&&((n=this._contentWidget)==null?void 0:n.isVisible);e.keyCode===5||e.keyCode===6||e.keyCode===57||e.keyCode===4||i||this._hideWidgets()}_hideWidgets(){var e,t;this._hoverState.mouseDown&&((e=this._contentWidget)!=null&&e.isColorPickerVisible)||DS.dropDownVisible||(this._hoverState.activatedByDecoratorClick=!1,(t=this._contentWidget)==null||t.hide())}_getOrCreateContentWidget(){return this._contentWidget||(this._contentWidget=this._instantiationService.createInstance(f$,this._editor),this._listenersStore.add(this._contentWidget.onContentsChanged(()=>this._onHoverContentsChanged.fire()))),this._contentWidget}showContentHover(e,t,i,n,s=!1){this._hoverState.activatedByDecoratorClick=s,this._getOrCreateContentWidget().startShowingAtRange(e,t,i,n)}_isContentWidgetResizing(){var e;return((e=this._contentWidget)==null?void 0:e.widget.isResizing)||!1}focusedHoverPartIndex(){return this._getOrCreateContentWidget().focusedHoverPartIndex()}updateHoverVerbosityLevel(e,t,i){this._getOrCreateContentWidget().updateHoverVerbosityLevel(e,t,i)}focus(){var e;(e=this._contentWidget)==null||e.focus()}scrollUp(){var e;(e=this._contentWidget)==null||e.scrollUp()}scrollDown(){var e;(e=this._contentWidget)==null||e.scrollDown()}scrollLeft(){var e;(e=this._contentWidget)==null||e.scrollLeft()}scrollRight(){var e;(e=this._contentWidget)==null||e.scrollRight()}pageUp(){var e;(e=this._contentWidget)==null||e.pageUp()}pageDown(){var e;(e=this._contentWidget)==null||e.pageDown()}goToTop(){var e;(e=this._contentWidget)==null||e.goToTop()}goToBottom(){var e;(e=this._contentWidget)==null||e.goToBottom()}get isColorPickerVisible(){var e;return(e=this._contentWidget)==null?void 0:e.isColorPickerVisible}get isHoverVisible(){var e;return(e=this._contentWidget)==null?void 0:e.isVisible}dispose(){var e;super.dispose(),this._unhookListeners(),this._listenersStore.dispose(),(e=this._contentWidget)==null||e.dispose()}},g$=Db,Db.ID="editor.contrib.contentHover",Db);Lr=g$=I$e([Pre(1,nt),Pre(2,Di)],Lr);const hZ=class hZ extends X{constructor(e){super(),this._editor=e,this._register(e.onMouseDown(t=>this.onMouseDown(t)))}dispose(){super.dispose()}onMouseDown(e){const t=this._editor.getOption(149);if(t!=="click"&&t!=="clickAndHover")return;const i=e.target;if(i.type!==6||!i.detail.injectedText||i.detail.injectedText.options.attachedData!==Xge||!i.range)return;const n=this._editor.getContribution(Lr.ID);if(n&&!n.isColorPickerVisible){const s=new M(i.range.startLineNumber,i.range.startColumn+1,i.range.endLineNumber,i.range.endColumn+1);n.showContentHover(s,1,0,!1,!0)}}};hZ.ID="editor.contrib.colorContribution";let _O=hZ;oi(_O.ID,_O,2);jC.register(vE);var Dpe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},qw=function(o,e){return function(t,i){e(t,i,o)}},p$,m$,Eb;let DC=(Eb=class extends X{constructor(e,t,i){super(),this._editor=e,this._instantiationService=i,this._standaloneColorPickerWidget=null,this._standaloneColorPickerVisible=B.standaloneColorPickerVisible.bindTo(t),this._standaloneColorPickerFocused=B.standaloneColorPickerFocused.bindTo(t)}showOrFocus(){var e;this._editor.hasModel()&&(this._standaloneColorPickerVisible.get()?this._standaloneColorPickerFocused.get()||(e=this._standaloneColorPickerWidget)==null||e.focus():this._standaloneColorPickerWidget=this._instantiationService.createInstance(_$,this._editor,this._standaloneColorPickerVisible,this._standaloneColorPickerFocused))}hide(){var e;this._standaloneColorPickerFocused.set(!1),this._standaloneColorPickerVisible.set(!1),(e=this._standaloneColorPickerWidget)==null||e.hide(),this._editor.focus()}insertColor(){var e;(e=this._standaloneColorPickerWidget)==null||e.updateEditor(),this.hide()}static get(e){return e.getContribution(p$.ID)}},p$=Eb,Eb.ID="editor.contrib.standaloneColorPickerController",Eb);DC=p$=Dpe([qw(1,ht),qw(2,nt)],DC);oi(DC.ID,DC,1);const Ore=8,N$e=22;var Ib;let _$=(Ib=class extends X{constructor(e,t,i,n,s,r,a){var f;super(),this._editor=e,this._standaloneColorPickerVisible=t,this._standaloneColorPickerFocused=i,this._keybindingService=s,this._languageFeaturesService=r,this._editorWorkerService=a,this.allowEditorOverflow=!0,this._position=void 0,this._body=document.createElement("div"),this._colorHover=null,this._selectionSetInEditor=!1,this._onResult=this._register(new Y),this.onResult=this._onResult.event,this._standaloneColorPickerVisible.set(!0),this._standaloneColorPickerParticipant=n.createInstance(bE,this._editor),this._position=(f=this._editor._getViewModel())==null?void 0:f.getPrimaryCursorState().modelState.position;const l=this._editor.getSelection(),c=l?{startLineNumber:l.startLineNumber,startColumn:l.startColumn,endLineNumber:l.endLineNumber,endColumn:l.endColumn}:{startLineNumber:0,endLineNumber:0,endColumn:0,startColumn:0},u=this._register(pu(this._body));this._register(u.onDidBlur(g=>{this.hide()})),this._register(u.onDidFocus(g=>{this.focus()})),this._register(this._editor.onDidChangeCursorPosition(()=>{this._selectionSetInEditor?this._selectionSetInEditor=!1:this.hide()})),this._register(this._editor.onMouseMove(g=>{var _;const p=(_=g.target.element)==null?void 0:_.classList;p&&p.contains("colorpicker-color-decoration")&&this.hide()})),this._register(this.onResult(g=>{this._render(g.value,g.foundInEditor)})),this._start(c),this._body.style.zIndex="50",this._editor.addContentWidget(this)}updateEditor(){this._colorHover&&this._standaloneColorPickerParticipant.updateEditorModel(this._colorHover)}getId(){return m$.ID}getDomNode(){return this._body}getPosition(){if(!this._position)return null;const e=this._editor.getOption(60).above;return{position:this._position,secondaryPosition:this._position,preference:e?[1,2]:[2,1],positionAffinity:2}}hide(){this.dispose(),this._standaloneColorPickerVisible.set(!1),this._standaloneColorPickerFocused.set(!1),this._editor.removeContentWidget(this),this._editor.focus()}focus(){this._standaloneColorPickerFocused.set(!0),this._body.focus()}async _start(e){const t=await this._computeAsync(e);t&&this._onResult.fire(new R$e(t.result,t.foundInEditor))}async _computeAsync(e){if(!this._editor.hasModel())return null;const t={range:e,color:{red:0,green:0,blue:0,alpha:1}},i=await this._standaloneColorPickerParticipant.createColorHover(t,new _E(this._editorWorkerService),this._languageFeaturesService.colorProvider);return i?{result:i.colorHover,foundInEditor:i.foundInEditor}:null}_render(e,t){const i=document.createDocumentFragment(),n=this._register(new cO(this._keybindingService)),s={fragment:i,statusBar:n,onContentsChanged:()=>{},hide:()=>this.hide()};this._colorHover=e;const r=this._standaloneColorPickerParticipant.renderHoverParts(s,[e]);if(!r)return;this._register(r.disposables);const a=r.colorPicker;this._body.classList.add("standalone-colorpicker-body"),this._body.style.maxHeight=Math.max(this._editor.getLayoutInfo().height/4,250)+"px",this._body.style.maxWidth=Math.max(this._editor.getLayoutInfo().width*.66,500)+"px",this._body.tabIndex=0,this._body.appendChild(i),a.layout();const l=a.body,c=l.saturationBox.domNode.clientWidth,u=l.domNode.clientWidth-c-N$e-Ore,f=a.body.enterButton;f==null||f.onClicked(()=>{this.updateEditor(),this.hide()});const g=a.header,p=g.pickedColorNode;p.style.width=c+Ore+"px";const _=g.originalColorNode;_.style.width=u+"px";const b=a.header.closeButton;b==null||b.onClicked(()=>{this.hide()}),t&&(f&&(f.button.textContent="Replace"),this._selectionSetInEditor=!0,this._editor.setSelection(e.range)),this._editor.layoutContentWidget(this)}},m$=Ib,Ib.ID="editor.contrib.standaloneColorPickerWidget",Ib);_$=m$=Dpe([qw(3,nt),qw(4,Di),qw(5,Ue),qw(6,Aa)],_$);class R$e{constructor(e,t){this.value=e,this.foundInEditor=t}}class M$e extends wu{constructor(){super({id:"editor.action.showOrFocusStandaloneColorPicker",title:{...pt("showOrFocusStandaloneColorPicker","Show or Focus Standalone Color Picker"),mnemonicTitle:v({key:"mishowOrFocusStandaloneColorPicker",comment:["&& denotes a mnemonic"]},"&&Show or Focus Standalone Color Picker")},precondition:void 0,menu:[{id:qe.CommandPalette}],metadata:{description:pt("showOrFocusStandaloneColorPickerDescription","Show or focus a standalone color picker which uses the default color provider. It displays hex/rgb/hsl colors.")}})}runEditorCommand(e,t){var i;(i=DC.get(t))==null||i.showOrFocus()}}class A$e extends Ve{constructor(){super({id:"editor.action.hideColorPicker",label:v({key:"hideColorPicker",comment:["Action that hides the color picker"]},"Hide the Color Picker"),alias:"Hide the Color Picker",precondition:B.standaloneColorPickerVisible.isEqualTo(!0),kbOpts:{primary:9,weight:100},metadata:{description:pt("hideColorPickerDescription","Hide the standalone color picker.")}})}run(e,t){var i;(i=DC.get(t))==null||i.hide()}}class P$e extends Ve{constructor(){super({id:"editor.action.insertColorWithStandaloneColorPicker",label:v({key:"insertColorWithStandaloneColorPicker",comment:["Action that inserts color with standalone color picker"]},"Insert Color with Standalone Color Picker"),alias:"Insert Color with Standalone Color Picker",precondition:B.standaloneColorPickerFocused.isEqualTo(!0),kbOpts:{primary:3,weight:100},metadata:{description:pt("insertColorWithStandaloneColorPickerDescription","Insert hex/rgb/hsl colors with the focused standalone color picker.")}})}run(e,t){var i;(i=DC.get(t))==null||i.insertColor()}}be(A$e);be(P$e);Xi(M$e);class sm{constructor(e,t,i){this.languageConfigurationService=i,this._selection=e,this._insertSpace=t,this._usedEndToken=null}static _haystackHasNeedleAtOffset(e,t,i){if(i<0)return!1;const n=t.length,s=e.length;if(i+n>s)return!1;for(let r=0;r<n;r++){const a=e.charCodeAt(i+r),l=t.charCodeAt(r);if(a!==l&&!(a>=65&&a<=90&&a+32===l)&&!(l>=65&&l<=90&&l+32===a))return!1}return!0}_createOperationsForBlockComment(e,t,i,n,s,r){const a=e.startLineNumber,l=e.startColumn,c=e.endLineNumber,u=e.endColumn,f=s.getLineContent(a),g=s.getLineContent(c);let p=f.lastIndexOf(t,l-1+t.length),_=g.indexOf(i,u-1-i.length);if(p!==-1&&_!==-1)if(a===c)f.substring(p+t.length,_).indexOf(i)>=0&&(p=-1,_=-1);else{const y=f.substring(p+t.length),S=g.substring(0,_);(y.indexOf(i)>=0||S.indexOf(i)>=0)&&(p=-1,_=-1)}let b;p!==-1&&_!==-1?(n&&p+t.length<f.length&&f.charCodeAt(p+t.length)===32&&(t=t+" "),n&&_>0&&g.charCodeAt(_-1)===32&&(i=" "+i,_-=1),b=sm._createRemoveBlockCommentOperations(new M(a,p+t.length+1,c,_+1),t,i)):(b=sm._createAddBlockCommentOperations(e,t,i,this._insertSpace),this._usedEndToken=b.length===1?i:null);for(const y of b)r.addTrackedEditOperation(y.range,y.text)}static _createRemoveBlockCommentOperations(e,t,i){const n=[];return M.isEmpty(e)?n.push(Rn.delete(new M(e.startLineNumber,e.startColumn-t.length,e.endLineNumber,e.endColumn+i.length))):(n.push(Rn.delete(new M(e.startLineNumber,e.startColumn-t.length,e.startLineNumber,e.startColumn))),n.push(Rn.delete(new M(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn+i.length)))),n}static _createAddBlockCommentOperations(e,t,i,n){const s=[];return M.isEmpty(e)?s.push(Rn.replace(new M(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),t+"  "+i)):(s.push(Rn.insert(new G(e.startLineNumber,e.startColumn),t+(n?" ":""))),s.push(Rn.insert(new G(e.endLineNumber,e.endColumn),(n?" ":"")+i))),s}getEditOperations(e,t){const i=this._selection.startLineNumber,n=this._selection.startColumn;e.tokenization.tokenizeIfCheap(i);const s=e.getLanguageIdAtPosition(i,n),r=this.languageConfigurationService.getLanguageConfiguration(s).comments;!r||!r.blockCommentStartToken||!r.blockCommentEndToken||this._createOperationsForBlockComment(this._selection,r.blockCommentStartToken,r.blockCommentEndToken,this._insertSpace,e,t)}computeCursorState(e,t){const i=t.getInverseEditOperations();if(i.length===2){const n=i[0],s=i[1];return new Ke(n.range.endLineNumber,n.range.endColumn,s.range.startLineNumber,s.range.startColumn)}else{const n=i[0].range,s=this._usedEndToken?-this._usedEndToken.length-1:0;return new Ke(n.endLineNumber,n.endColumn+s,n.endLineNumber,n.endColumn+s)}}}class Rf{constructor(e,t,i,n,s,r,a){this.languageConfigurationService=e,this._selection=t,this._indentSize=i,this._type=n,this._insertSpace=s,this._selectionId=null,this._deltaColumn=0,this._moveEndPositionDown=!1,this._ignoreEmptyLines=r,this._ignoreFirstLine=a||!1}static _gatherPreflightCommentStrings(e,t,i,n){e.tokenization.tokenizeIfCheap(t);const s=e.getLanguageIdAtPosition(t,1),r=n.getLanguageConfiguration(s).comments,a=r?r.lineCommentToken:null;if(!a)return null;const l=[];for(let c=0,u=i-t+1;c<u;c++)l[c]={ignore:!1,commentStr:a,commentStrOffset:0,commentStrLength:a.length};return l}static _analyzeLines(e,t,i,n,s,r,a,l){let c=!0,u;e===0?u=!0:e===1?u=!1:u=!0;for(let f=0,g=n.length;f<g;f++){const p=n[f],_=s+f;if(_===s&&a){p.ignore=!0;continue}const b=i.getLineContent(_),y=Sr(b);if(y===-1){p.ignore=r,p.commentStrOffset=b.length;continue}if(c=!1,p.ignore=!1,p.commentStrOffset=y,u&&!sm._haystackHasNeedleAtOffset(b,p.commentStr,y)&&(e===0?u=!1:e===1||(p.ignore=!0)),u&&t){const S=y+p.commentStrLength;S<b.length&&b.charCodeAt(S)===32&&(p.commentStrLength+=1)}}if(e===0&&c){u=!1;for(let f=0,g=n.length;f<g;f++)n[f].ignore=!1}return{supported:!0,shouldRemoveComments:u,lines:n}}static _gatherPreflightData(e,t,i,n,s,r,a,l){const c=Rf._gatherPreflightCommentStrings(i,n,s,l);return c===null?{supported:!1}:Rf._analyzeLines(e,t,i,c,n,r,a,l)}_executeLineComments(e,t,i,n){let s;i.shouldRemoveComments?s=Rf._createRemoveLineCommentsOperations(i.lines,n.startLineNumber):(Rf._normalizeInsertionPoint(e,i.lines,n.startLineNumber,this._indentSize),s=this._createAddLineCommentsOperations(i.lines,n.startLineNumber));const r=new G(n.positionLineNumber,n.positionColumn);for(let a=0,l=s.length;a<l;a++)t.addEditOperation(s[a].range,s[a].text),M.isEmpty(s[a].range)&&M.getStartPosition(s[a].range).equals(r)&&e.getLineContent(r.lineNumber).length+1===r.column&&(this._deltaColumn=(s[a].text||"").length);this._selectionId=t.trackSelection(n)}_attemptRemoveBlockComment(e,t,i,n){let s=t.startLineNumber,r=t.endLineNumber;const a=n.length+Math.max(e.getLineFirstNonWhitespaceColumn(t.startLineNumber),t.startColumn);let l=e.getLineContent(s).lastIndexOf(i,a-1),c=e.getLineContent(r).indexOf(n,t.endColumn-1-i.length);return l!==-1&&c===-1&&(c=e.getLineContent(s).indexOf(n,l+i.length),r=s),l===-1&&c!==-1&&(l=e.getLineContent(r).lastIndexOf(i,c),s=r),t.isEmpty()&&(l===-1||c===-1)&&(l=e.getLineContent(s).indexOf(i),l!==-1&&(c=e.getLineContent(s).indexOf(n,l+i.length))),l!==-1&&e.getLineContent(s).charCodeAt(l+i.length)===32&&(i+=" "),c!==-1&&e.getLineContent(r).charCodeAt(c-1)===32&&(n=" "+n,c-=1),l!==-1&&c!==-1?sm._createRemoveBlockCommentOperations(new M(s,l+i.length+1,r,c+1),i,n):null}_executeBlockComment(e,t,i){e.tokenization.tokenizeIfCheap(i.startLineNumber);const n=e.getLanguageIdAtPosition(i.startLineNumber,1),s=this.languageConfigurationService.getLanguageConfiguration(n).comments;if(!s||!s.blockCommentStartToken||!s.blockCommentEndToken)return;const r=s.blockCommentStartToken,a=s.blockCommentEndToken;let l=this._attemptRemoveBlockComment(e,i,r,a);if(!l){if(i.isEmpty()){const c=e.getLineContent(i.startLineNumber);let u=Sr(c);u===-1&&(u=c.length),l=sm._createAddBlockCommentOperations(new M(i.startLineNumber,u+1,i.startLineNumber,c.length+1),r,a,this._insertSpace)}else l=sm._createAddBlockCommentOperations(new M(i.startLineNumber,e.getLineFirstNonWhitespaceColumn(i.startLineNumber),i.endLineNumber,e.getLineMaxColumn(i.endLineNumber)),r,a,this._insertSpace);l.length===1&&(this._deltaColumn=r.length+1)}this._selectionId=t.trackSelection(i);for(const c of l)t.addEditOperation(c.range,c.text)}getEditOperations(e,t){let i=this._selection;if(this._moveEndPositionDown=!1,i.startLineNumber===i.endLineNumber&&this._ignoreFirstLine){t.addEditOperation(new M(i.startLineNumber,e.getLineMaxColumn(i.startLineNumber),i.startLineNumber+1,1),i.startLineNumber===e.getLineCount()?"":`
`),this._selectionId=t.trackSelection(i);return}i.startLineNumber<i.endLineNumber&&i.endColumn===1&&(this._moveEndPositionDown=!0,i=i.setEndPosition(i.endLineNumber-1,e.getLineMaxColumn(i.endLineNumber-1)));const n=Rf._gatherPreflightData(this._type,this._insertSpace,e,i.startLineNumber,i.endLineNumber,this._ignoreEmptyLines,this._ignoreFirstLine,this.languageConfigurationService);return n.supported?this._executeLineComments(e,t,n,i):this._executeBlockComment(e,t,i)}computeCursorState(e,t){let i=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(i=i.setEndPosition(i.endLineNumber+1,1)),new Ke(i.selectionStartLineNumber,i.selectionStartColumn+this._deltaColumn,i.positionLineNumber,i.positionColumn+this._deltaColumn)}static _createRemoveLineCommentsOperations(e,t){const i=[];for(let n=0,s=e.length;n<s;n++){const r=e[n];r.ignore||i.push(Rn.delete(new M(t+n,r.commentStrOffset+1,t+n,r.commentStrOffset+r.commentStrLength+1)))}return i}_createAddLineCommentsOperations(e,t){const i=[],n=this._insertSpace?" ":"";for(let s=0,r=e.length;s<r;s++){const a=e[s];a.ignore||i.push(Rn.insert(new G(t+s,a.commentStrOffset+1),a.commentStr+n))}return i}static nextVisibleColumn(e,t,i,n){return i?e+(t-e%t):e+n}static _normalizeInsertionPoint(e,t,i,n){let s=1073741824,r,a;for(let l=0,c=t.length;l<c;l++){if(t[l].ignore)continue;const u=e.getLineContent(i+l);let f=0;for(let g=0,p=t[l].commentStrOffset;f<s&&g<p;g++)f=Rf.nextVisibleColumn(f,n,u.charCodeAt(g)===9,1);f<s&&(s=f)}s=Math.floor(s/n)*n;for(let l=0,c=t.length;l<c;l++){if(t[l].ignore)continue;const u=e.getLineContent(i+l);let f=0;for(r=0,a=t[l].commentStrOffset;f<s&&r<a;r++)f=Rf.nextVisibleColumn(f,n,u.charCodeAt(r)===9,1);f>s?t[l].commentStrOffset=r-1:t[l].commentStrOffset=r}}}class TY extends Ve{constructor(e,t){super(t),this._type=e}run(e,t){const i=e.get(On);if(!t.hasModel())return;const n=t.getModel(),s=[],r=n.getOptions(),a=t.getOption(23),l=t.getSelections().map((u,f)=>({selection:u,index:f,ignoreFirstLine:!1}));l.sort((u,f)=>M.compareRangesUsingStarts(u.selection,f.selection));let c=l[0];for(let u=1;u<l.length;u++){const f=l[u];c.selection.endLineNumber===f.selection.startLineNumber&&(c.index<f.index?f.ignoreFirstLine=!0:(c.ignoreFirstLine=!0,c=f))}for(const u of l)s.push(new Rf(i,u.selection,r.indentSize,this._type,a.insertSpace,a.ignoreEmptyLines,u.ignoreFirstLine));t.pushUndoStop(),t.executeCommands(this.id,s),t.pushUndoStop()}}class O$e extends TY{constructor(){super(0,{id:"editor.action.commentLine",label:v("comment.line","Toggle Line Comment"),alias:"Toggle Line Comment",precondition:B.writable,kbOpts:{kbExpr:B.editorTextFocus,primary:2138,weight:100},menuOpts:{menuId:qe.MenubarEditMenu,group:"5_insert",title:v({key:"miToggleLineComment",comment:["&& denotes a mnemonic"]},"&&Toggle Line Comment"),order:1}})}}class F$e extends TY{constructor(){super(1,{id:"editor.action.addCommentLine",label:v("comment.line.add","Add Line Comment"),alias:"Add Line Comment",precondition:B.writable,kbOpts:{kbExpr:B.editorTextFocus,primary:Is(2089,2081),weight:100}})}}class B$e extends TY{constructor(){super(2,{id:"editor.action.removeCommentLine",label:v("comment.line.remove","Remove Line Comment"),alias:"Remove Line Comment",precondition:B.writable,kbOpts:{kbExpr:B.editorTextFocus,primary:Is(2089,2099),weight:100}})}}class W$e extends Ve{constructor(){super({id:"editor.action.blockComment",label:v("comment.block","Toggle Block Comment"),alias:"Toggle Block Comment",precondition:B.writable,kbOpts:{kbExpr:B.editorTextFocus,primary:1567,linux:{primary:3103},weight:100},menuOpts:{menuId:qe.MenubarEditMenu,group:"5_insert",title:v({key:"miToggleBlockComment",comment:["&& denotes a mnemonic"]},"Toggle &&Block Comment"),order:2}})}run(e,t){const i=e.get(On);if(!t.hasModel())return;const n=t.getOption(23),s=[],r=t.getSelections();for(const a of r)s.push(new sm(a,n.insertSpace,i));t.pushUndoStop(),t.executeCommands(this.id,s),t.pushUndoStop()}}be(O$e);be(F$e);be(B$e);be(W$e);var H$e=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},J_=function(o,e){return function(t,i){e(t,i,o)}},v$,Tb;let IS=(Tb=class{static get(e){return e.getContribution(v$.ID)}constructor(e,t,i,n,s,r,a,l){this._contextMenuService=t,this._contextViewService=i,this._contextKeyService=n,this._keybindingService=s,this._menuService=r,this._configurationService=a,this._workspaceContextService=l,this._toDispose=new le,this._contextMenuIsBeingShownCount=0,this._editor=e,this._toDispose.add(this._editor.onContextMenu(c=>this._onContextMenu(c))),this._toDispose.add(this._editor.onMouseWheel(c=>{if(this._contextMenuIsBeingShownCount>0){const u=this._contextViewService.getContextViewElement(),f=c.srcElement;f.shadowRoot&&aC(u)===f.shadowRoot||this._contextViewService.hideContextView()}})),this._toDispose.add(this._editor.onKeyDown(c=>{this._editor.getOption(24)&&c.keyCode===58&&(c.preventDefault(),c.stopPropagation(),this.showContextMenu())}))}_onContextMenu(e){if(!this._editor.hasModel())return;if(!this._editor.getOption(24)){this._editor.focus(),e.target.position&&!this._editor.getSelection().containsPosition(e.target.position)&&this._editor.setPosition(e.target.position);return}if(e.target.type===12||e.target.type===6&&e.target.detail.injectedText)return;if(e.event.preventDefault(),e.event.stopPropagation(),e.target.type===11)return this._showScrollbarContextMenu(e.event);if(e.target.type!==6&&e.target.type!==7&&e.target.type!==1)return;if(this._editor.focus(),e.target.position){let i=!1;for(const n of this._editor.getSelections())if(n.containsPosition(e.target.position)){i=!0;break}i||this._editor.setPosition(e.target.position)}let t=null;e.target.type!==1&&(t=e.event),this.showContextMenu(t)}showContextMenu(e){if(!this._editor.getOption(24)||!this._editor.hasModel())return;const t=this._getMenuActions(this._editor.getModel(),this._editor.contextMenuId);t.length>0&&this._doShowContextMenu(t,e)}_getMenuActions(e,t){const i=[],n=this._menuService.getMenuActions(t,this._contextKeyService,{arg:e.uri});for(const s of n){const[,r]=s;let a=0;for(const l of r)if(l instanceof _1){const c=this._getMenuActions(e,l.item.submenu);c.length>0&&(i.push(new tS(l.id,l.label,c)),a++)}else i.push(l),a++;a&&i.push(new Zs)}return i.length&&i.pop(),i}_doShowContextMenu(e,t=null){if(!this._editor.hasModel())return;const i=this._editor.getOption(60);this._editor.updateOptions({hover:{enabled:!1}});let n=t;if(!n){this._editor.revealPosition(this._editor.getPosition(),1),this._editor.render();const r=this._editor.getScrolledVisiblePosition(this._editor.getPosition()),a=os(this._editor.getDomNode()),l=a.left+r.left,c=a.top+r.top+r.height;n={x:l,y:c}}const s=this._editor.getOption(128)&&!hu;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:s?this._editor.getOverflowWidgetsDomNode()??this._editor.getDomNode():void 0,getAnchor:()=>n,getActions:()=>e,getActionViewItem:r=>{const a=this._keybindingFor(r);if(a)return new pS(r,r,{label:!0,keybinding:a.getLabel(),isMenu:!0});const l=r;return typeof l.getActionViewItem=="function"?l.getActionViewItem():new pS(r,r,{icon:!0,label:!0,isMenu:!0})},getKeyBinding:r=>this._keybindingFor(r),onHide:r=>{this._contextMenuIsBeingShownCount--,this._editor.updateOptions({hover:i})}})}_showScrollbarContextMenu(e){if(!this._editor.hasModel()||WPe(this._workspaceContextService.getWorkspace()))return;const t=this._editor.getOption(73);let i=0;const n=c=>({id:`menu-action-${++i}`,label:c.label,tooltip:"",class:void 0,enabled:typeof c.enabled>"u"?!0:c.enabled,checked:c.checked,run:c.run}),s=(c,u)=>new tS(`menu-action-${++i}`,c,u,void 0),r=(c,u,f,g,p)=>{if(!u)return n({label:c,enabled:u,run:()=>{}});const _=y=>()=>{this._configurationService.updateValue(f,y)},b=[];for(const y of p)b.push(n({label:y.label,checked:g===y.value,run:_(y.value)}));return s(c,b)},a=[];a.push(n({label:v("context.minimap.minimap","Minimap"),checked:t.enabled,run:()=>{this._configurationService.updateValue("editor.minimap.enabled",!t.enabled)}})),a.push(new Zs),a.push(n({label:v("context.minimap.renderCharacters","Render Characters"),enabled:t.enabled,checked:t.renderCharacters,run:()=>{this._configurationService.updateValue("editor.minimap.renderCharacters",!t.renderCharacters)}})),a.push(r(v("context.minimap.size","Vertical size"),t.enabled,"editor.minimap.size",t.size,[{label:v("context.minimap.size.proportional","Proportional"),value:"proportional"},{label:v("context.minimap.size.fill","Fill"),value:"fill"},{label:v("context.minimap.size.fit","Fit"),value:"fit"}])),a.push(r(v("context.minimap.slider","Slider"),t.enabled,"editor.minimap.showSlider",t.showSlider,[{label:v("context.minimap.slider.mouseover","Mouse Over"),value:"mouseover"},{label:v("context.minimap.slider.always","Always"),value:"always"}]));const l=this._editor.getOption(128)&&!hu;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:l?this._editor.getDomNode():void 0,getAnchor:()=>e,getActions:()=>a,onHide:c=>{this._contextMenuIsBeingShownCount--,this._editor.focus()}})}_keybindingFor(e){return this._keybindingService.lookupKeybinding(e.id)}dispose(){this._contextMenuIsBeingShownCount>0&&this._contextViewService.hideContextView(),this._toDispose.dispose()}},v$=Tb,Tb.ID="editor.contrib.contextmenu",Tb);IS=v$=H$e([J_(1,cl),J_(2,Pg),J_(3,ht),J_(4,Di),J_(5,Gl),J_(6,Ht),J_(7,fC)],IS);class V$e extends Ve{constructor(){super({id:"editor.action.showContextMenu",label:v("action.showContextMenu.label","Show Editor Context Menu"),alias:"Show Editor Context Menu",precondition:void 0,kbOpts:{kbExpr:B.textInputFocus,primary:1092,weight:100}})}run(e,t){var i;(i=IS.get(t))==null||i.showContextMenu()}}oi(IS.ID,IS,2);be(V$e);class p9{constructor(e){this.selections=e}equals(e){const t=this.selections.length,i=e.selections.length;if(t!==i)return!1;for(let n=0;n<t;n++)if(!this.selections[n].equalsSelection(e.selections[n]))return!1;return!0}}class m9{constructor(e,t,i){this.cursorState=e,this.scrollTop=t,this.scrollLeft=i}}const nF=class nF extends X{static get(e){return e.getContribution(nF.ID)}constructor(e){super(),this._editor=e,this._isCursorUndoRedo=!1,this._undoStack=[],this._redoStack=[],this._register(e.onDidChangeModel(t=>{this._undoStack=[],this._redoStack=[]})),this._register(e.onDidChangeModelContent(t=>{this._undoStack=[],this._redoStack=[]})),this._register(e.onDidChangeCursorSelection(t=>{if(this._isCursorUndoRedo||!t.oldSelections||t.oldModelVersionId!==t.modelVersionId)return;const i=new p9(t.oldSelections);this._undoStack.length>0&&this._undoStack[this._undoStack.length-1].cursorState.equals(i)||(this._undoStack.push(new m9(i,e.getScrollTop(),e.getScrollLeft())),this._redoStack=[],this._undoStack.length>50&&this._undoStack.shift())}))}cursorUndo(){!this._editor.hasModel()||this._undoStack.length===0||(this._redoStack.push(new m9(new p9(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._undoStack.pop()))}cursorRedo(){!this._editor.hasModel()||this._redoStack.length===0||(this._undoStack.push(new m9(new p9(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._redoStack.pop()))}_applyState(e){this._isCursorUndoRedo=!0,this._editor.setSelections(e.cursorState.selections),this._editor.setScrollPosition({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft}),this._isCursorUndoRedo=!1}};nF.ID="editor.contrib.cursorUndoRedoController";let TS=nF;class z$e extends Ve{constructor(){super({id:"cursorUndo",label:v("cursor.undo","Cursor Undo"),alias:"Cursor Undo",precondition:void 0,kbOpts:{kbExpr:B.textInputFocus,primary:2099,weight:100}})}run(e,t,i){var n;(n=TS.get(t))==null||n.cursorUndo()}}class U$e extends Ve{constructor(){super({id:"cursorRedo",label:v("cursor.redo","Cursor Redo"),alias:"Cursor Redo",precondition:void 0})}run(e,t,i){var n;(n=TS.get(t))==null||n.cursorRedo()}}oi(TS.ID,TS,0);be(z$e);be(U$e);class $$e{constructor(e,t,i){this.selection=e,this.targetPosition=t,this.copy=i,this.targetSelection=null}getEditOperations(e,t){const i=e.getValueInRange(this.selection);if(this.copy||t.addEditOperation(this.selection,null),t.addEditOperation(new M(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column),i),this.selection.containsPosition(this.targetPosition)&&!(this.copy&&(this.selection.getEndPosition().equals(this.targetPosition)||this.selection.getStartPosition().equals(this.targetPosition)))){this.targetSelection=this.selection;return}if(this.copy){this.targetSelection=new Ke(this.targetPosition.lineNumber,this.targetPosition.column,this.selection.endLineNumber-this.selection.startLineNumber+this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}if(this.targetPosition.lineNumber>this.selection.endLineNumber){this.targetSelection=new Ke(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}if(this.targetPosition.lineNumber<this.selection.endLineNumber){this.targetSelection=new Ke(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber+this.selection.endLineNumber-this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}this.selection.endColumn<=this.targetPosition.column?this.targetSelection=new Ke(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column-this.selection.endColumn+this.selection.startColumn:this.targetPosition.column-this.selection.endColumn+this.selection.startColumn,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column:this.selection.endColumn):this.targetSelection=new Ke(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column+this.selection.endColumn-this.selection.startColumn)}computeCursorState(e,t){return this.targetSelection}}function dw(o){return Kt?o.altKey:o.ctrlKey}const Pp=class Pp extends X{constructor(e){super(),this._editor=e,this._dndDecorationIds=this._editor.createDecorationsCollection(),this._register(this._editor.onMouseDown(t=>this._onEditorMouseDown(t))),this._register(this._editor.onMouseUp(t=>this._onEditorMouseUp(t))),this._register(this._editor.onMouseDrag(t=>this._onEditorMouseDrag(t))),this._register(this._editor.onMouseDrop(t=>this._onEditorMouseDrop(t))),this._register(this._editor.onMouseDropCanceled(()=>this._onEditorMouseDropCanceled())),this._register(this._editor.onKeyDown(t=>this.onEditorKeyDown(t))),this._register(this._editor.onKeyUp(t=>this.onEditorKeyUp(t))),this._register(this._editor.onDidBlurEditorWidget(()=>this.onEditorBlur())),this._register(this._editor.onDidBlurEditorText(()=>this.onEditorBlur())),this._mouseDown=!1,this._modifierPressed=!1,this._dragSelection=null}onEditorBlur(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1}onEditorKeyDown(e){!this._editor.getOption(35)||this._editor.getOption(22)||(dw(e)&&(this._modifierPressed=!0),this._mouseDown&&dw(e)&&this._editor.updateOptions({mouseStyle:"copy"}))}onEditorKeyUp(e){!this._editor.getOption(35)||this._editor.getOption(22)||(dw(e)&&(this._modifierPressed=!1),this._mouseDown&&e.keyCode===Pp.TRIGGER_KEY_VALUE&&this._editor.updateOptions({mouseStyle:"default"}))}_onEditorMouseDown(e){this._mouseDown=!0}_onEditorMouseUp(e){this._mouseDown=!1,this._editor.updateOptions({mouseStyle:"text"})}_onEditorMouseDrag(e){const t=e.target;if(this._dragSelection===null){const n=(this._editor.getSelections()||[]).filter(s=>t.position&&s.containsPosition(t.position));if(n.length===1)this._dragSelection=n[0];else return}dw(e.event)?this._editor.updateOptions({mouseStyle:"copy"}):this._editor.updateOptions({mouseStyle:"default"}),t.position&&(this._dragSelection.containsPosition(t.position)?this._removeDecoration():this.showAt(t.position))}_onEditorMouseDropCanceled(){this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}_onEditorMouseDrop(e){if(e.target&&(this._hitContent(e.target)||this._hitMargin(e.target))&&e.target.position){const t=new G(e.target.position.lineNumber,e.target.position.column);if(this._dragSelection===null){let i=null;if(e.event.shiftKey){const n=this._editor.getSelection();if(n){const{selectionStartLineNumber:s,selectionStartColumn:r}=n;i=[new Ke(s,r,t.lineNumber,t.column)]}}else i=(this._editor.getSelections()||[]).map(n=>n.containsPosition(t)?new Ke(t.lineNumber,t.column,t.lineNumber,t.column):n);this._editor.setSelections(i||[],"mouse",3)}else(!this._dragSelection.containsPosition(t)||(dw(e.event)||this._modifierPressed)&&(this._dragSelection.getEndPosition().equals(t)||this._dragSelection.getStartPosition().equals(t)))&&(this._editor.pushUndoStop(),this._editor.executeCommand(Pp.ID,new $$e(this._dragSelection,t,dw(e.event)||this._modifierPressed)),this._editor.pushUndoStop())}this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}showAt(e){this._dndDecorationIds.set([{range:new M(e.lineNumber,e.column,e.lineNumber,e.column),options:Pp._DECORATION_OPTIONS}]),this._editor.revealPosition(e,1)}_removeDecoration(){this._dndDecorationIds.clear()}_hitContent(e){return e.type===6||e.type===7}_hitMargin(e){return e.type===2||e.type===3||e.type===4}dispose(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1,super.dispose()}};Pp.ID="editor.contrib.dragAndDrop",Pp.TRIGGER_KEY_VALUE=Kt?6:5,Pp._DECORATION_OPTIONS=Dt.register({description:"dnd-target",className:"dnd-target"});let vO=Pp;oi(vO.ID,vO,2);oi(Ig.ID,Ig,0);o0(MU);Re(new class extends Bs{constructor(){super({id:Tge,precondition:mY,kbOpts:{weight:100,primary:2137}})}runEditorCommand(o,e){var t;return(t=Ig.get(e))==null?void 0:t.changePasteType()}});Re(new class extends Bs{constructor(){super({id:"editor.hidePasteWidget",precondition:mY,kbOpts:{weight:100,primary:9}})}runEditorCommand(o,e){var t;(t=Ig.get(e))==null||t.clearWidgets()}});var Nb;be((Nb=class extends Ve{constructor(){super({id:"editor.action.pasteAs",label:v("pasteAs","Paste As..."),alias:"Paste As...",precondition:B.writable,metadata:{description:"Paste as",args:[{name:"args",schema:Nb.argsSchema}]}})}run(e,t,i){var s;let n=typeof(i==null?void 0:i.kind)=="string"?i.kind:void 0;return!n&&i&&(n=typeof i.id=="string"?i.id:void 0),(s=Ig.get(t))==null?void 0:s.pasteAs(n?new Dn(n):void 0)}},Nb.argsSchema={type:"object",properties:{kind:{type:"string",description:v("pasteAs.kind","The kind of the paste edit to try applying. If not provided or there are multiple edits for this kind, the editor will show a picker.")}}},Nb));be(class extends Ve{constructor(){super({id:"editor.action.pasteAsText",label:v("pasteAsText","Paste as Text"),alias:"Paste as Text",precondition:B.writable})}run(o,e){var t;return(t=Ig.get(e))==null?void 0:t.pasteAs({providerId:CC.id})}});class j$e{constructor(){this._dragOperations=new Map}removeDragOperationTransfer(e){if(e&&this._dragOperations.has(e)){const t=this._dragOperations.get(e);return this._dragOperations.delete(e),t}}}class Fre{constructor(e){this.identifier=e}}const Epe=Gt("treeViewsDndService");ei(Epe,j$e,1);var q$e=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},zR=function(o,e){return function(t,i){e(t,i,o)}},b$;const Ipe="editor.experimental.dropIntoEditor.defaultProvider",Tpe="editor.changeDropType",NY=new Pe("dropWidgetVisible",!1,v("dropWidgetVisible","Whether the drop widget is showing"));var Rb;let NS=(Rb=class extends X{static get(e){return e.getContribution(b$.ID)}constructor(e,t,i,n,s){super(),this._configService=i,this._languageFeaturesService=n,this._treeViewsDragAndDropService=s,this.treeItemsTransfer=NU.getInstance(),this._dropProgressManager=this._register(t.createInstance(oO,"dropIntoEditor",e)),this._postDropWidgetManager=this._register(t.createInstance(aO,"dropIntoEditor",e,NY,{id:Tpe,label:v("postDropWidgetTitle","Show drop options...")})),this._register(e.onDropIntoEditor(r=>this.onDropIntoEditor(e,r.position,r.event)))}clearWidgets(){this._postDropWidgetManager.clear()}changeDropType(){this._postDropWidgetManager.tryShowSelector()}async onDropIntoEditor(e,t,i){var s;if(!i.dataTransfer||!e.hasModel())return;(s=this._currentOperation)==null||s.cancel(),e.focus(),e.setPosition(t);const n=Gs(async r=>{const a=new le,l=a.add(new Gm(e,1,void 0,r));try{const c=await this.extractDataTransferData(i);if(c.size===0||l.token.isCancellationRequested)return;const u=e.getModel();if(!u)return;const f=this._languageFeaturesService.documentDropEditProvider.ordered(u).filter(p=>p.dropMimeTypes?p.dropMimeTypes.some(_=>c.matches(_)):!0),g=a.add(await this.getDropEdits(f,u,t,c,l));if(l.token.isCancellationRequested)return;if(g.edits.length){const p=this.getInitialActiveEditIndex(u,g.edits),_=e.getOption(36).showDropSelector==="afterDrop";await this._postDropWidgetManager.applyEditAndShowIfNeeded([M.fromPositions(t)],{activeEditIndex:p,allEdits:g.edits},_,async b=>b,r)}}finally{a.dispose(),this._currentOperation===n&&(this._currentOperation=void 0)}});this._dropProgressManager.showWhile(t,v("dropIntoEditorProgress","Running drop handlers. Click to cancel"),n,{cancel:()=>n.cancel()}),this._currentOperation=n}async getDropEdits(e,t,i,n,s){const r=new le,a=await QE(Promise.all(e.map(async c=>{try{const u=await c.provideDocumentDropEdits(t,i,n,s.token);return u&&r.add(u),u==null?void 0:u.edits.map(f=>({...f,providerId:c.id}))}catch(u){console.error(u)}})),s.token),l=rd(a??[]).flat();return{edits:Ege(l),dispose:()=>r.dispose()}}getInitialActiveEditIndex(e,t){const i=this._configService.getValue(Ipe,{resource:e.uri});for(const[n,s]of Object.entries(i)){const r=new Dn(s),a=t.findIndex(l=>r.value===l.providerId&&l.handledMimeType&&Cge(n,[l.handledMimeType]));if(a>=0)return a}return 0}async extractDataTransferData(e){if(!e.dataTransfer)return new bge;const t=Sge(e.dataTransfer);if(this.treeItemsTransfer.hasData(Fre.prototype)){const i=this.treeItemsTransfer.getData(Fre.prototype);if(Array.isArray(i))for(const n of i){const s=await this._treeViewsDragAndDropService.removeDragOperationTransfer(n.identifier);if(s)for(const[r,a]of s)t.replace(r,a)}}return t}},b$=Rb,Rb.ID="editor.contrib.dropIntoEditorController",Rb);NS=b$=q$e([zR(1,nt),zR(2,Ht),zR(3,Ue),zR(4,Epe)],NS);oi(NS.ID,NS,2);o0(RU);Re(new class extends Bs{constructor(){super({id:Tpe,precondition:NY,kbOpts:{weight:100,primary:2137}})}runEditorCommand(o,e,t){var i;(i=NS.get(e))==null||i.changeDropType()}});Re(new class extends Bs{constructor(){super({id:"editor.hideDropWidget",precondition:NY,kbOpts:{weight:100,primary:9}})}runEditorCommand(o,e,t){var i;(i=NS.get(e))==null||i.clearWidgets()}});Pn.as(pd.Configuration).registerConfiguration({...aI,properties:{[Ipe]:{type:"object",scope:5,description:v("defaultProviderDescription","Configures the default drop provider to use for content of a given mime type."),default:{},additionalProperties:{type:"string"}}}});const fr=class fr{constructor(e){this._editor=e,this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null,this._startPosition=this._editor.getPosition()}dispose(){this._editor.removeDecorations(this._allDecorations()),this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}reset(){this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}getCount(){return this._decorations.length}getFindScope(){return this._findScopeDecorationIds[0]?this._editor.getModel().getDecorationRange(this._findScopeDecorationIds[0]):null}getFindScopes(){if(this._findScopeDecorationIds.length){const e=this._findScopeDecorationIds.map(t=>this._editor.getModel().getDecorationRange(t)).filter(t=>!!t);if(e.length)return e}return null}getStartPosition(){return this._startPosition}setStartPosition(e){this._startPosition=e,this.setCurrentFindMatch(null)}_getDecorationIndex(e){const t=this._decorations.indexOf(e);return t>=0?t+1:1}getDecorationRangeAt(e){const t=e<this._decorations.length?this._decorations[e]:null;return t?this._editor.getModel().getDecorationRange(t):null}getCurrentMatchesPosition(e){const t=this._editor.getModel().getDecorationsInRange(e);for(const i of t){const n=i.options;if(n===fr._FIND_MATCH_DECORATION||n===fr._CURRENT_FIND_MATCH_DECORATION)return this._getDecorationIndex(i.id)}return 0}setCurrentFindMatch(e){let t=null,i=0;if(e)for(let n=0,s=this._decorations.length;n<s;n++){const r=this._editor.getModel().getDecorationRange(this._decorations[n]);if(e.equalsRange(r)){t=this._decorations[n],i=n+1;break}}return(this._highlightedDecorationId!==null||t!==null)&&this._editor.changeDecorations(n=>{if(this._highlightedDecorationId!==null&&(n.changeDecorationOptions(this._highlightedDecorationId,fr._FIND_MATCH_DECORATION),this._highlightedDecorationId=null),t!==null&&(this._highlightedDecorationId=t,n.changeDecorationOptions(this._highlightedDecorationId,fr._CURRENT_FIND_MATCH_DECORATION)),this._rangeHighlightDecorationId!==null&&(n.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),t!==null){let s=this._editor.getModel().getDecorationRange(t);if(s.startLineNumber!==s.endLineNumber&&s.endColumn===1){const r=s.endLineNumber-1,a=this._editor.getModel().getLineMaxColumn(r);s=new M(s.startLineNumber,s.startColumn,r,a)}this._rangeHighlightDecorationId=n.addDecoration(s,fr._RANGE_HIGHLIGHT_DECORATION)}}),i}set(e,t){this._editor.changeDecorations(i=>{let n=fr._FIND_MATCH_DECORATION;const s=[];if(e.length>1e3){n=fr._FIND_MATCH_NO_OVERVIEW_DECORATION;const a=this._editor.getModel().getLineCount(),c=this._editor.getLayoutInfo().height/a,u=Math.max(2,Math.ceil(3/c));let f=e[0].range.startLineNumber,g=e[0].range.endLineNumber;for(let p=1,_=e.length;p<_;p++){const b=e[p].range;g+u>=b.startLineNumber?b.endLineNumber>g&&(g=b.endLineNumber):(s.push({range:new M(f,1,g,1),options:fr._FIND_MATCH_ONLY_OVERVIEW_DECORATION}),f=b.startLineNumber,g=b.endLineNumber)}s.push({range:new M(f,1,g,1),options:fr._FIND_MATCH_ONLY_OVERVIEW_DECORATION})}const r=new Array(e.length);for(let a=0,l=e.length;a<l;a++)r[a]={range:e[a].range,options:n};this._decorations=i.deltaDecorations(this._decorations,r),this._overviewRulerApproximateDecorations=i.deltaDecorations(this._overviewRulerApproximateDecorations,s),this._rangeHighlightDecorationId&&(i.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),this._findScopeDecorationIds.length&&(this._findScopeDecorationIds.forEach(a=>i.removeDecoration(a)),this._findScopeDecorationIds=[]),t!=null&&t.length&&(this._findScopeDecorationIds=t.map(a=>i.addDecoration(a,fr._FIND_SCOPE_DECORATION)))})}matchBeforePosition(e){if(this._decorations.length===0)return null;for(let t=this._decorations.length-1;t>=0;t--){const i=this._decorations[t],n=this._editor.getModel().getDecorationRange(i);if(!(!n||n.endLineNumber>e.lineNumber)){if(n.endLineNumber<e.lineNumber)return n;if(!(n.endColumn>e.column))return n}}return this._editor.getModel().getDecorationRange(this._decorations[this._decorations.length-1])}matchAfterPosition(e){if(this._decorations.length===0)return null;for(let t=0,i=this._decorations.length;t<i;t++){const n=this._decorations[t],s=this._editor.getModel().getDecorationRange(n);if(!(!s||s.startLineNumber<e.lineNumber)){if(s.startLineNumber>e.lineNumber)return s;if(!(s.startColumn<e.column))return s}}return this._editor.getModel().getDecorationRange(this._decorations[0])}_allDecorations(){let e=[];return e=e.concat(this._decorations),e=e.concat(this._overviewRulerApproximateDecorations),this._findScopeDecorationIds.length&&e.push(...this._findScopeDecorationIds),this._rangeHighlightDecorationId&&e.push(this._rangeHighlightDecorationId),e}};fr._CURRENT_FIND_MATCH_DECORATION=Dt.register({description:"current-find-match",stickiness:1,zIndex:13,className:"currentFindMatch",inlineClassName:"currentFindMatchInline",showIfCollapsed:!0,overviewRuler:{color:Gn(h7),position:Hl.Center},minimap:{color:Gn(qV),position:1}}),fr._FIND_MATCH_DECORATION=Dt.register({description:"find-match",stickiness:1,zIndex:10,className:"findMatch",inlineClassName:"findMatchInline",showIfCollapsed:!0,overviewRuler:{color:Gn(h7),position:Hl.Center},minimap:{color:Gn(qV),position:1}}),fr._FIND_MATCH_NO_OVERVIEW_DECORATION=Dt.register({description:"find-match-no-overview",stickiness:1,className:"findMatch",showIfCollapsed:!0}),fr._FIND_MATCH_ONLY_OVERVIEW_DECORATION=Dt.register({description:"find-match-only-overview",stickiness:1,overviewRuler:{color:Gn(h7),position:Hl.Center}}),fr._RANGE_HIGHLIGHT_DECORATION=Dt.register({description:"find-range-highlight",stickiness:1,className:"rangeHighlight",isWholeLine:!0}),fr._FIND_SCOPE_DECORATION=Dt.register({description:"find-scope",className:"findScope",isWholeLine:!0});let C$=fr;class K$e{constructor(e,t,i){this._editorSelection=e,this._ranges=t,this._replaceStrings=i,this._trackedEditorSelectionId=null}getEditOperations(e,t){if(this._ranges.length>0){const i=[];for(let r=0;r<this._ranges.length;r++)i.push({range:this._ranges[r],text:this._replaceStrings[r]});i.sort((r,a)=>M.compareRangesUsingStarts(r.range,a.range));const n=[];let s=i[0];for(let r=1;r<i.length;r++)s.range.endLineNumber===i[r].range.startLineNumber&&s.range.endColumn===i[r].range.startColumn?(s.range=s.range.plusRange(i[r].range),s.text=s.text+i[r].text):(n.push(s),s=i[r]);n.push(s);for(const r of n)t.addEditOperation(r.range,r.text)}this._trackedEditorSelectionId=t.trackSelection(this._editorSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._trackedEditorSelectionId)}}function Npe(o,e){if(o&&o[0]!==""){const t=Bre(o,e,"-"),i=Bre(o,e,"_");return t&&!i?Wre(o,e,"-"):!t&&i?Wre(o,e,"_"):o[0].toUpperCase()===o[0]?e.toUpperCase():o[0].toLowerCase()===o[0]?e.toLowerCase():$ke(o[0][0])&&e.length>0?e[0].toUpperCase()+e.substr(1):o[0][0].toUpperCase()!==o[0][0]&&e.length>0?e[0].toLowerCase()+e.substr(1):e}else return e}function Bre(o,e,t){return o[0].indexOf(t)!==-1&&e.indexOf(t)!==-1&&o[0].split(t).length===e.split(t).length}function Wre(o,e,t){const i=e.split(t),n=o[0].split(t);let s="";return i.forEach((r,a)=>{s+=Npe([n[a]],r)+t}),s.slice(0,-1)}class Hre{constructor(e){this.staticValue=e,this.kind=0}}class G$e{constructor(e){this.pieces=e,this.kind=1}}class RS{static fromStaticValue(e){return new RS([sb.staticValue(e)])}get hasReplacementPatterns(){return this._state.kind===1}constructor(e){!e||e.length===0?this._state=new Hre(""):e.length===1&&e[0].staticValue!==null?this._state=new Hre(e[0].staticValue):this._state=new G$e(e)}buildReplaceString(e,t){if(this._state.kind===0)return t?Npe(e,this._state.staticValue):this._state.staticValue;let i="";for(let n=0,s=this._state.pieces.length;n<s;n++){const r=this._state.pieces[n];if(r.staticValue!==null){i+=r.staticValue;continue}let a=RS._substitute(r.matchIndex,e);if(r.caseOps!==null&&r.caseOps.length>0){const l=[],c=r.caseOps.length;let u=0;for(let f=0,g=a.length;f<g;f++){if(u>=c){l.push(a.slice(f));break}switch(r.caseOps[u]){case"U":l.push(a[f].toUpperCase());break;case"u":l.push(a[f].toUpperCase()),u++;break;case"L":l.push(a[f].toLowerCase());break;case"l":l.push(a[f].toLowerCase()),u++;break;default:l.push(a[f])}}a=l.join("")}i+=a}return i}static _substitute(e,t){if(t===null)return"";if(e===0)return t[0];let i="";for(;e>0;){if(e<t.length)return(t[e]||"")+i;i=String(e%10)+i,e=Math.floor(e/10)}return"$"+i}}class sb{static staticValue(e){return new sb(e,-1,null)}static caseOps(e,t){return new sb(null,e,t)}constructor(e,t,i){this.staticValue=e,this.matchIndex=t,!i||i.length===0?this.caseOps=null:this.caseOps=i.slice(0)}}class Y$e{constructor(e){this._source=e,this._lastCharIndex=0,this._result=[],this._resultLen=0,this._currentStaticPiece=""}emitUnchanged(e){this._emitStatic(this._source.substring(this._lastCharIndex,e)),this._lastCharIndex=e}emitStatic(e,t){this._emitStatic(e),this._lastCharIndex=t}_emitStatic(e){e.length!==0&&(this._currentStaticPiece+=e)}emitMatchIndex(e,t,i){this._currentStaticPiece.length!==0&&(this._result[this._resultLen++]=sb.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),this._result[this._resultLen++]=sb.caseOps(e,i),this._lastCharIndex=t}finalize(){return this.emitUnchanged(this._source.length),this._currentStaticPiece.length!==0&&(this._result[this._resultLen++]=sb.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),new RS(this._result)}}function Z$e(o){if(!o||o.length===0)return new RS(null);const e=[],t=new Y$e(o);for(let i=0,n=o.length;i<n;i++){const s=o.charCodeAt(i);if(s===92){if(i++,i>=n)break;const r=o.charCodeAt(i);switch(r){case 92:t.emitUnchanged(i-1),t.emitStatic("\\",i+1);break;case 110:t.emitUnchanged(i-1),t.emitStatic(`
`,i+1);break;case 116:t.emitUnchanged(i-1),t.emitStatic("	",i+1);break;case 117:case 85:case 108:case 76:t.emitUnchanged(i-1),t.emitStatic("",i+1),e.push(String.fromCharCode(r));break}continue}if(s===36){if(i++,i>=n)break;const r=o.charCodeAt(i);if(r===36){t.emitUnchanged(i-1),t.emitStatic("$",i+1);continue}if(r===48||r===38){t.emitUnchanged(i-1),t.emitMatchIndex(0,i+1,e),e.length=0;continue}if(49<=r&&r<=57){let a=r-48;if(i+1<n){const l=o.charCodeAt(i+1);if(48<=l&&l<=57){i++,a=a*10+(l-48),t.emitUnchanged(i-2),t.emitMatchIndex(a,i+1,e),e.length=0;continue}}t.emitUnchanged(i-1),t.emitMatchIndex(a,i+1,e),e.length=0;continue}}}return t.finalize()}const Wg=new Pe("findWidgetVisible",!1);Wg.toNegated();const h5=new Pe("findInputFocussed",!1),RY=new Pe("replaceInputFocussed",!1),UR={primary:545,mac:{primary:2593}},$R={primary:565,mac:{primary:2613}},jR={primary:560,mac:{primary:2608}},qR={primary:554,mac:{primary:2602}},KR={primary:558,mac:{primary:2606}},ln={StartFindAction:"actions.find",StartFindWithSelection:"actions.findWithSelection",StartFindWithArgs:"editor.actions.findWithArgs",NextMatchFindAction:"editor.action.nextMatchFindAction",PreviousMatchFindAction:"editor.action.previousMatchFindAction",GoToMatchFindAction:"editor.action.goToMatchFindAction",NextSelectionMatchFindAction:"editor.action.nextSelectionMatchFindAction",PreviousSelectionMatchFindAction:"editor.action.previousSelectionMatchFindAction",StartFindReplaceAction:"editor.action.startFindReplaceAction",CloseFindWidgetCommand:"closeFindWidget",ToggleCaseSensitiveCommand:"toggleFindCaseSensitive",ToggleWholeWordCommand:"toggleFindWholeWord",ToggleRegexCommand:"toggleFindRegex",ToggleSearchScopeCommand:"toggleFindInSelection",TogglePreserveCaseCommand:"togglePreserveCase",ReplaceOneAction:"editor.action.replaceOne",ReplaceAllAction:"editor.action.replaceAll",SelectAllMatchesAction:"editor.action.selectAllMatches"},om=19999,X$e=240;class Rk{constructor(e,t){this._toDispose=new le,this._editor=e,this._state=t,this._isDisposed=!1,this._startSearchingTimer=new gd,this._decorations=new C$(e),this._toDispose.add(this._decorations),this._updateDecorationsScheduler=new Oi(()=>{if(this._editor.hasModel())return this.research(!1)},100),this._toDispose.add(this._updateDecorationsScheduler),this._toDispose.add(this._editor.onDidChangeCursorPosition(i=>{(i.reason===3||i.reason===5||i.reason===6)&&this._decorations.setStartPosition(this._editor.getPosition())})),this._ignoreModelContentChanged=!1,this._toDispose.add(this._editor.onDidChangeModelContent(i=>{this._ignoreModelContentChanged||(i.isFlush&&this._decorations.reset(),this._decorations.setStartPosition(this._editor.getPosition()),this._updateDecorationsScheduler.schedule())})),this._toDispose.add(this._state.onFindReplaceStateChange(i=>this._onStateChanged(i))),this.research(!1,this._state.searchScope)}dispose(){this._isDisposed=!0,$i(this._startSearchingTimer),this._toDispose.dispose()}_onStateChanged(e){this._isDisposed||this._editor.hasModel()&&(e.searchString||e.isReplaceRevealed||e.isRegex||e.wholeWord||e.matchCase||e.searchScope)&&(this._editor.getModel().isTooLargeForSyncing()?(this._startSearchingTimer.cancel(),this._startSearchingTimer.setIfNotSet(()=>{e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor)},X$e)):e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor))}static _getSearchRange(e,t){return t||e.getFullModelRange()}research(e,t){let i=null;typeof t<"u"?t!==null&&(Array.isArray(t)?i=t:i=[t]):i=this._decorations.getFindScopes(),i!==null&&(i=i.map(a=>{if(a.startLineNumber!==a.endLineNumber){let l=a.endLineNumber;return a.endColumn===1&&(l=l-1),new M(a.startLineNumber,1,l,this._editor.getModel().getLineMaxColumn(l))}return a}));const n=this._findMatches(i,!1,om);this._decorations.set(n,i);const s=this._editor.getSelection();let r=this._decorations.getCurrentMatchesPosition(s);if(r===0&&n.length>0){const a=wD(n.map(l=>l.range),l=>M.compareRangesUsingStarts(l,s)>=0);r=a>0?a-1+1:r}this._state.changeMatchInfo(r,this._decorations.getCount(),void 0),e&&this._editor.getOption(41).cursorMoveOnType&&this._moveToNextMatch(this._decorations.getStartPosition())}_hasMatches(){return this._state.matchesCount>0}_cannotFind(){if(!this._hasMatches()){const e=this._decorations.getFindScope();return e&&this._editor.revealRangeInCenterIfOutsideViewport(e,0),!0}return!1}_setCurrentFindMatch(e){const t=this._decorations.setCurrentFindMatch(e);this._state.changeMatchInfo(t,this._decorations.getCount(),e),this._editor.setSelection(e),this._editor.revealRangeInCenterIfOutsideViewport(e,0)}_prevSearchPosition(e){const t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0);let{lineNumber:i,column:n}=e;const s=this._editor.getModel();return t||n===1?(i===1?i=s.getLineCount():i--,n=s.getLineMaxColumn(i)):n--,new G(i,n)}_moveToPrevMatch(e,t=!1){if(!this._state.canNavigateBack()){const u=this._decorations.matchAfterPosition(e);u&&this._setCurrentFindMatch(u);return}if(this._decorations.getCount()<om){let u=this._decorations.matchBeforePosition(e);u&&u.isEmpty()&&u.getStartPosition().equals(e)&&(e=this._prevSearchPosition(e),u=this._decorations.matchBeforePosition(e)),u&&this._setCurrentFindMatch(u);return}if(this._cannotFind())return;const i=this._decorations.getFindScope(),n=Rk._getSearchRange(this._editor.getModel(),i);n.getEndPosition().isBefore(e)&&(e=n.getEndPosition()),e.isBefore(n.getStartPosition())&&(e=n.getEndPosition());const{lineNumber:s,column:r}=e,a=this._editor.getModel();let l=new G(s,r),c=a.findPreviousMatch(this._state.searchString,l,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(132):null,!1);if(c&&c.range.isEmpty()&&c.range.getStartPosition().equals(l)&&(l=this._prevSearchPosition(l),c=a.findPreviousMatch(this._state.searchString,l,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(132):null,!1)),!!c){if(!t&&!n.containsRange(c.range))return this._moveToPrevMatch(c.range.getStartPosition(),!0);this._setCurrentFindMatch(c.range)}}moveToPrevMatch(){this._moveToPrevMatch(this._editor.getSelection().getStartPosition())}_nextSearchPosition(e){const t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0);let{lineNumber:i,column:n}=e;const s=this._editor.getModel();return t||n===s.getLineMaxColumn(i)?(i===s.getLineCount()?i=1:i++,n=1):n++,new G(i,n)}_moveToNextMatch(e){if(!this._state.canNavigateForward()){const i=this._decorations.matchBeforePosition(e);i&&this._setCurrentFindMatch(i);return}if(this._decorations.getCount()<om){let i=this._decorations.matchAfterPosition(e);i&&i.isEmpty()&&i.getStartPosition().equals(e)&&(e=this._nextSearchPosition(e),i=this._decorations.matchAfterPosition(e)),i&&this._setCurrentFindMatch(i);return}const t=this._getNextMatch(e,!1,!0);t&&this._setCurrentFindMatch(t.range)}_getNextMatch(e,t,i,n=!1){if(this._cannotFind())return null;const s=this._decorations.getFindScope(),r=Rk._getSearchRange(this._editor.getModel(),s);r.getEndPosition().isBefore(e)&&(e=r.getStartPosition()),e.isBefore(r.getStartPosition())&&(e=r.getStartPosition());const{lineNumber:a,column:l}=e,c=this._editor.getModel();let u=new G(a,l),f=c.findNextMatch(this._state.searchString,u,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(132):null,t);return i&&f&&f.range.isEmpty()&&f.range.getStartPosition().equals(u)&&(u=this._nextSearchPosition(u),f=c.findNextMatch(this._state.searchString,u,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(132):null,t)),f?!n&&!r.containsRange(f.range)?this._getNextMatch(f.range.getEndPosition(),t,i,!0):f:null}moveToNextMatch(){this._moveToNextMatch(this._editor.getSelection().getEndPosition())}_moveToMatch(e){const t=this._decorations.getDecorationRangeAt(e);t&&this._setCurrentFindMatch(t)}moveToMatch(e){this._moveToMatch(e)}_getReplacePattern(){return this._state.isRegex?Z$e(this._state.replaceString):RS.fromStaticValue(this._state.replaceString)}replace(){if(!this._hasMatches())return;const e=this._getReplacePattern(),t=this._editor.getSelection(),i=this._getNextMatch(t.getStartPosition(),!0,!1);if(i)if(t.equalsRange(i.range)){const n=e.buildReplaceString(i.matches,this._state.preserveCase),s=new Ro(t,n);this._executeEditorCommand("replace",s),this._decorations.setStartPosition(new G(t.startLineNumber,t.startColumn+n.length)),this.research(!0)}else this._decorations.setStartPosition(this._editor.getPosition()),this._setCurrentFindMatch(i.range)}_findMatches(e,t,i){const n=(e||[null]).map(s=>Rk._getSearchRange(this._editor.getModel(),s));return this._editor.getModel().findMatches(this._state.searchString,n,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(132):null,t,i)}replaceAll(){if(!this._hasMatches())return;const e=this._decorations.getFindScopes();e===null&&this._state.matchesCount>=om?this._largeReplaceAll():this._regularReplaceAll(e),this.research(!1)}_largeReplaceAll(){const t=new sv(this._state.searchString,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(132):null).parseSearchRequest();if(!t)return;let i=t.regex;if(!i.multiline){let f="mu";i.ignoreCase&&(f+="i"),i.global&&(f+="g"),i=new RegExp(i.source,f)}const n=this._editor.getModel(),s=n.getValue(1),r=n.getFullModelRange(),a=this._getReplacePattern();let l;const c=this._state.preserveCase;a.hasReplacementPatterns||c?l=s.replace(i,function(){return a.buildReplaceString(arguments,c)}):l=s.replace(i,a.buildReplaceString(null,c));const u=new EG(r,l,this._editor.getSelection());this._executeEditorCommand("replaceAll",u)}_regularReplaceAll(e){const t=this._getReplacePattern(),i=this._findMatches(e,t.hasReplacementPatterns||this._state.preserveCase,1073741824),n=[];for(let r=0,a=i.length;r<a;r++)n[r]=t.buildReplaceString(i[r].matches,this._state.preserveCase);const s=new K$e(this._editor.getSelection(),i.map(r=>r.range),n);this._executeEditorCommand("replaceAll",s)}selectAllMatches(){if(!this._hasMatches())return;const e=this._decorations.getFindScopes();let i=this._findMatches(e,!1,1073741824).map(s=>new Ke(s.range.startLineNumber,s.range.startColumn,s.range.endLineNumber,s.range.endColumn));const n=this._editor.getSelection();for(let s=0,r=i.length;s<r;s++)if(i[s].equalsRange(n)){i=[n].concat(i.slice(0,s)).concat(i.slice(s+1));break}this._editor.setSelections(i)}_executeEditorCommand(e,t){try{this._ignoreModelContentChanged=!0,this._editor.pushUndoStop(),this._editor.executeCommand(e,t),this._editor.pushUndoStop()}finally{this._ignoreModelContentChanged=!1}}}const sF=class sF extends Zl{constructor(e,t,i){super(),this._hideSoon=this._register(new Oi(()=>this._hide(),2e3)),this._isVisible=!1,this._editor=e,this._state=t,this._keybindingService=i,this._domNode=document.createElement("div"),this._domNode.className="findOptionsWidget",this._domNode.style.display="none",this._domNode.style.top="10px",this._domNode.style.zIndex="12",this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true");const n={inputActiveOptionBorder:He(m4),inputActiveOptionForeground:He(_4),inputActiveOptionBackground:He(iI)},s=this._register(gS());this.caseSensitive=this._register(new phe({appendTitle:this._keybindingLabelFor(ln.ToggleCaseSensitiveCommand),isChecked:this._state.matchCase,hoverDelegate:s,...n})),this._domNode.appendChild(this.caseSensitive.domNode),this._register(this.caseSensitive.onChange(()=>{this._state.change({matchCase:this.caseSensitive.checked},!1)})),this.wholeWords=this._register(new mhe({appendTitle:this._keybindingLabelFor(ln.ToggleWholeWordCommand),isChecked:this._state.wholeWord,hoverDelegate:s,...n})),this._domNode.appendChild(this.wholeWords.domNode),this._register(this.wholeWords.onChange(()=>{this._state.change({wholeWord:this.wholeWords.checked},!1)})),this.regex=this._register(new _he({appendTitle:this._keybindingLabelFor(ln.ToggleRegexCommand),isChecked:this._state.isRegex,hoverDelegate:s,...n})),this._domNode.appendChild(this.regex.domNode),this._register(this.regex.onChange(()=>{this._state.change({isRegex:this.regex.checked},!1)})),this._editor.addOverlayWidget(this),this._register(this._state.onFindReplaceStateChange(r=>{let a=!1;r.isRegex&&(this.regex.checked=this._state.isRegex,a=!0),r.wholeWord&&(this.wholeWords.checked=this._state.wholeWord,a=!0),r.matchCase&&(this.caseSensitive.checked=this._state.matchCase,a=!0),!this._state.isRevealed&&a&&this._revealTemporarily()})),this._register(se(this._domNode,Le.MOUSE_LEAVE,r=>this._onMouseLeave())),this._register(se(this._domNode,"mouseover",r=>this._onMouseOver()))}_keybindingLabelFor(e){const t=this._keybindingService.lookupKeybinding(e);return t?` (${t.getLabel()})`:""}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return sF.ID}getDomNode(){return this._domNode}getPosition(){return{preference:0}}highlightFindOptions(){this._revealTemporarily()}_revealTemporarily(){this._show(),this._hideSoon.schedule()}_onMouseLeave(){this._hideSoon.schedule()}_onMouseOver(){this._hideSoon.cancel()}_show(){this._isVisible||(this._isVisible=!0,this._domNode.style.display="block")}_hide(){this._isVisible&&(this._isVisible=!1,this._domNode.style.display="none")}};sF.ID="editor.contrib.findOptionsWidget";let y$=sF;function GR(o,e){return o===1?!0:o===2?!1:e}class Q$e extends X{get searchString(){return this._searchString}get replaceString(){return this._replaceString}get isRevealed(){return this._isRevealed}get isReplaceRevealed(){return this._isReplaceRevealed}get isRegex(){return GR(this._isRegexOverride,this._isRegex)}get wholeWord(){return GR(this._wholeWordOverride,this._wholeWord)}get matchCase(){return GR(this._matchCaseOverride,this._matchCase)}get preserveCase(){return GR(this._preserveCaseOverride,this._preserveCase)}get actualIsRegex(){return this._isRegex}get actualWholeWord(){return this._wholeWord}get actualMatchCase(){return this._matchCase}get actualPreserveCase(){return this._preserveCase}get searchScope(){return this._searchScope}get matchesPosition(){return this._matchesPosition}get matchesCount(){return this._matchesCount}get currentMatch(){return this._currentMatch}constructor(){super(),this._onFindReplaceStateChange=this._register(new Y),this.onFindReplaceStateChange=this._onFindReplaceStateChange.event,this._searchString="",this._replaceString="",this._isRevealed=!1,this._isReplaceRevealed=!1,this._isRegex=!1,this._isRegexOverride=0,this._wholeWord=!1,this._wholeWordOverride=0,this._matchCase=!1,this._matchCaseOverride=0,this._preserveCase=!1,this._preserveCaseOverride=0,this._searchScope=null,this._matchesPosition=0,this._matchesCount=0,this._currentMatch=null,this._loop=!0,this._isSearching=!1,this._filters=null}changeMatchInfo(e,t,i){const n={moveCursor:!1,updateHistory:!1,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1,isSearching:!1,filters:!1};let s=!1;t===0&&(e=0),e>t&&(e=t),this._matchesPosition!==e&&(this._matchesPosition=e,n.matchesPosition=!0,s=!0),this._matchesCount!==t&&(this._matchesCount=t,n.matchesCount=!0,s=!0),typeof i<"u"&&(M.equalsRange(this._currentMatch,i)||(this._currentMatch=i,n.currentMatch=!0,s=!0)),s&&this._onFindReplaceStateChange.fire(n)}change(e,t,i=!0){var u;const n={moveCursor:t,updateHistory:i,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1,isSearching:!1,filters:!1};let s=!1;const r=this.isRegex,a=this.wholeWord,l=this.matchCase,c=this.preserveCase;typeof e.searchString<"u"&&this._searchString!==e.searchString&&(this._searchString=e.searchString,n.searchString=!0,s=!0),typeof e.replaceString<"u"&&this._replaceString!==e.replaceString&&(this._replaceString=e.replaceString,n.replaceString=!0,s=!0),typeof e.isRevealed<"u"&&this._isRevealed!==e.isRevealed&&(this._isRevealed=e.isRevealed,n.isRevealed=!0,s=!0),typeof e.isReplaceRevealed<"u"&&this._isReplaceRevealed!==e.isReplaceRevealed&&(this._isReplaceRevealed=e.isReplaceRevealed,n.isReplaceRevealed=!0,s=!0),typeof e.isRegex<"u"&&(this._isRegex=e.isRegex),typeof e.wholeWord<"u"&&(this._wholeWord=e.wholeWord),typeof e.matchCase<"u"&&(this._matchCase=e.matchCase),typeof e.preserveCase<"u"&&(this._preserveCase=e.preserveCase),typeof e.searchScope<"u"&&((u=e.searchScope)!=null&&u.every(f=>{var g;return(g=this._searchScope)==null?void 0:g.some(p=>!M.equalsRange(p,f))})||(this._searchScope=e.searchScope,n.searchScope=!0,s=!0)),typeof e.loop<"u"&&this._loop!==e.loop&&(this._loop=e.loop,n.loop=!0,s=!0),typeof e.isSearching<"u"&&this._isSearching!==e.isSearching&&(this._isSearching=e.isSearching,n.isSearching=!0,s=!0),typeof e.filters<"u"&&(this._filters?this._filters.update(e.filters):this._filters=e.filters,n.filters=!0,s=!0),this._isRegexOverride=typeof e.isRegexOverride<"u"?e.isRegexOverride:0,this._wholeWordOverride=typeof e.wholeWordOverride<"u"?e.wholeWordOverride:0,this._matchCaseOverride=typeof e.matchCaseOverride<"u"?e.matchCaseOverride:0,this._preserveCaseOverride=typeof e.preserveCaseOverride<"u"?e.preserveCaseOverride:0,r!==this.isRegex&&(s=!0,n.isRegex=!0),a!==this.wholeWord&&(s=!0,n.wholeWord=!0),l!==this.matchCase&&(s=!0,n.matchCase=!0),c!==this.preserveCase&&(s=!0,n.preserveCase=!0),s&&this._onFindReplaceStateChange.fire(n)}canNavigateBack(){return this.canNavigateInLoop()||this.matchesPosition!==1}canNavigateForward(){return this.canNavigateInLoop()||this.matchesPosition<this.matchesCount}canNavigateInLoop(){return this._loop||this.matchesCount>=om}}const J$e=v("defaultLabel","input"),eje=v("label.preserveCaseToggle","Preserve Case");class tje extends t0{constructor(e){super({icon:Se.preserveCase,title:eje+e.appendTitle,isChecked:e.isChecked,hoverDelegate:e.hoverDelegate??sa("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class ije extends Zl{constructor(e,t,i,n){super(),this._showOptionButtons=i,this.fixFocusOnOptionClickEnabled=!0,this.cachedOptionsWidth=0,this._onDidOptionChange=this._register(new Y),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new Y),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new Y),this._onInput=this._register(new Y),this._onKeyUp=this._register(new Y),this._onPreserveCaseKeyDown=this._register(new Y),this.onPreserveCaseKeyDown=this._onPreserveCaseKeyDown.event,this.contextViewProvider=t,this.placeholder=n.placeholder||"",this.validation=n.validation,this.label=n.label||J$e;const s=n.appendPreserveCaseLabel||"",r=n.history||[],a=!!n.flexibleHeight,l=!!n.flexibleWidth,c=n.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new vhe(this.domNode,this.contextViewProvider,{ariaLabel:this.label||"",placeholder:this.placeholder||"",validationOptions:{validation:this.validation},history:r,showHistoryHint:n.showHistoryHint,flexibleHeight:a,flexibleWidth:l,flexibleMaxHeight:c,inputBoxStyles:n.inputBoxStyles})),this.preserveCase=this._register(new tje({appendTitle:s,isChecked:!1,...n.toggleStyles})),this._register(this.preserveCase.onChange(g=>{this._onDidOptionChange.fire(g),!g&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.preserveCase.onKeyDown(g=>{this._onPreserveCaseKeyDown.fire(g)})),this._showOptionButtons?this.cachedOptionsWidth=this.preserveCase.width():this.cachedOptionsWidth=0;const u=[this.preserveCase.domNode];this.onkeydown(this.domNode,g=>{if(g.equals(15)||g.equals(17)||g.equals(9)){const p=u.indexOf(this.domNode.ownerDocument.activeElement);if(p>=0){let _=-1;g.equals(17)?_=(p+1)%u.length:g.equals(15)&&(p===0?_=u.length-1:_=p-1),g.equals(9)?(u[p].blur(),this.inputBox.focus()):_>=0&&u[_].focus(),Jt.stop(g,!0)}}});const f=document.createElement("div");f.className="controls",f.style.display=this._showOptionButtons?"block":"none",f.appendChild(this.preserveCase.domNode),this.domNode.appendChild(f),e==null||e.appendChild(this.domNode),this.onkeydown(this.inputBox.inputElement,g=>this._onKeyDown.fire(g)),this.onkeyup(this.inputBox.inputElement,g=>this._onKeyUp.fire(g)),this.oninput(this.inputBox.inputElement,g=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,g=>this._onMouseDown.fire(g))}enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.preserveCase.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.preserveCase.disable()}setEnabled(e){e?this.enable():this.disable()}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getPreserveCase(){return this.preserveCase.checked}setPreserveCase(e){this.preserveCase.checked=e}focusOnPreserve(){this.preserveCase.focus()}validate(){var e;(e=this.inputBox)==null||e.validate()}set width(e){this.inputBox.paddingRight=this.cachedOptionsWidth,this.domNode.style.width=e+"px"}dispose(){super.dispose()}}var Rpe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Mpe=function(o,e){return function(t,i){e(t,i,o)}};const MY=new Pe("suggestWidgetVisible",!1,v("suggestWidgetVisible","Whether suggestion are visible")),AY="historyNavigationWidgetFocus",Ape="historyNavigationForwardsEnabled",Ppe="historyNavigationBackwardsEnabled";let _g;const YR=[];function Ope(o,e){if(YR.includes(e))throw new Error("Cannot register the same widget multiple times");YR.push(e);const t=new le,i=new Pe(AY,!1).bindTo(o),n=new Pe(Ape,!0).bindTo(o),s=new Pe(Ppe,!0).bindTo(o),r=()=>{i.set(!0),_g=e},a=()=>{i.set(!1),_g===e&&(_g=void 0)};return YF(e.element)&&r(),t.add(e.onDidFocus(()=>r())),t.add(e.onDidBlur(()=>a())),t.add(it(()=>{YR.splice(YR.indexOf(e),1),a()})),{historyNavigationForwardsEnablement:n,historyNavigationBackwardsEnablement:s,dispose(){t.dispose()}}}let w$=class extends bhe{constructor(e,t,i,n){super(e,t,i);const s=this._register(n.createScoped(this.inputBox.element));this._register(Ope(s,this.inputBox))}};w$=Rpe([Mpe(3,ht)],w$);let S$=class extends ije{constructor(e,t,i,n,s=!1){super(e,t,s,i);const r=this._register(n.createScoped(this.inputBox.element));this._register(Ope(r,this.inputBox))}};S$=Rpe([Mpe(3,ht)],S$);ea.registerCommandAndKeybindingRule({id:"history.showPrevious",weight:200,when:de.and(de.has(AY),de.equals(Ppe,!0),de.not("isComposing"),MY.isEqualTo(!1)),primary:16,secondary:[528],handler:o=>{_g==null||_g.showPreviousValue()}});ea.registerCommandAndKeybindingRule({id:"history.showNext",weight:200,when:de.and(de.has(AY),de.equals(Ape,!0),de.not("isComposing"),MY.isEqualTo(!1)),primary:18,secondary:[530],handler:o=>{_g==null||_g.showNextValue()}});function Vre(o){var e,t;return((e=o.lookupKeybinding("history.showPrevious"))==null?void 0:e.getElectronAccelerator())==="Up"&&((t=o.lookupKeybinding("history.showNext"))==null?void 0:t.getElectronAccelerator())==="Down"}const zre=hn("find-collapsed",Se.chevronRight,v("findCollapsedIcon","Icon to indicate that the editor find widget is collapsed.")),Ure=hn("find-expanded",Se.chevronDown,v("findExpandedIcon","Icon to indicate that the editor find widget is expanded.")),nje=hn("find-selection",Se.selection,v("findSelectionIcon","Icon for 'Find in Selection' in the editor find widget.")),sje=hn("find-replace",Se.replace,v("findReplaceIcon","Icon for 'Replace' in the editor find widget.")),oje=hn("find-replace-all",Se.replaceAll,v("findReplaceAllIcon","Icon for 'Replace All' in the editor find widget.")),rje=hn("find-previous-match",Se.arrowUp,v("findPreviousMatchIcon","Icon for 'Find Previous' in the editor find widget.")),aje=hn("find-next-match",Se.arrowDown,v("findNextMatchIcon","Icon for 'Find Next' in the editor find widget.")),lje=v("label.findDialog","Find / Replace"),cje=v("label.find","Find"),dje=v("placeholder.find","Find"),uje=v("label.previousMatchButton","Previous Match"),hje=v("label.nextMatchButton","Next Match"),fje=v("label.toggleSelectionFind","Find in Selection"),gje=v("label.closeButton","Close"),pje=v("label.replace","Replace"),mje=v("placeholder.replace","Replace"),_je=v("label.replaceButton","Replace"),vje=v("label.replaceAllButton","Replace All"),bje=v("label.toggleReplaceButton","Toggle Replace"),Cje=v("title.matchesCountLimit","Only the first {0} results are highlighted, but all find operations work on the entire text.",om),yje=v("label.matchesLocation","{0} of {1}"),$re=v("label.noResults","No results"),Gu=419,wje=275,Sje=wje-54;let Dx=69;const Lje=33,jre="ctrlEnterReplaceAll.windows.donotask",qre=Kt?256:2048;class _9{constructor(e){this.afterLineNumber=e,this.heightInPx=Lje,this.suppressMouseDown=!1,this.domNode=document.createElement("div"),this.domNode.className="dock-find-viewzone"}}function Kre(o,e,t){const i=!!e.match(/\n/);if(t&&i&&t.selectionStart>0){o.stopPropagation();return}}function Gre(o,e,t){const i=!!e.match(/\n/);if(t&&i&&t.selectionEnd<t.value.length){o.stopPropagation();return}}const oF=class oF extends Zl{constructor(e,t,i,n,s,r,a,l,c,u){super(),this._hoverService=u,this._cachedHeight=null,this._revealTimeouts=[],this._codeEditor=e,this._controller=t,this._state=i,this._contextViewProvider=n,this._keybindingService=s,this._contextKeyService=r,this._storageService=l,this._notificationService=c,this._ctrlEnterReplaceAllWarningPrompted=!!l.getBoolean(jre,0),this._isVisible=!1,this._isReplaceVisible=!1,this._ignoreChangeEvent=!1,this._updateHistoryDelayer=new xc(500),this._register(it(()=>this._updateHistoryDelayer.cancel())),this._register(this._state.onFindReplaceStateChange(f=>this._onStateChanged(f))),this._buildDomNode(),this._updateButtons(),this._tryUpdateWidgetWidth(),this._findInput.inputBox.layout(),this._register(this._codeEditor.onDidChangeConfiguration(f=>{if(f.hasChanged(92)&&(this._codeEditor.getOption(92)&&this._state.change({isReplaceRevealed:!1},!1),this._updateButtons()),f.hasChanged(146)&&this._tryUpdateWidgetWidth(),f.hasChanged(2)&&this.updateAccessibilitySupport(),f.hasChanged(41)){const g=this._codeEditor.getOption(41).loop;this._state.change({loop:g},!1);const p=this._codeEditor.getOption(41).addExtraSpaceOnTop;p&&!this._viewZone&&(this._viewZone=new _9(0),this._showViewZone()),!p&&this._viewZone&&this._removeViewZone()}})),this.updateAccessibilitySupport(),this._register(this._codeEditor.onDidChangeCursorSelection(()=>{this._isVisible&&this._updateToggleSelectionFindButton()})),this._register(this._codeEditor.onDidFocusEditorWidget(async()=>{if(this._isVisible){const f=await this._controller.getGlobalBufferTerm();f&&f!==this._state.searchString&&(this._state.change({searchString:f},!1),this._findInput.select())}})),this._findInputFocused=h5.bindTo(r),this._findFocusTracker=this._register(pu(this._findInput.inputBox.inputElement)),this._register(this._findFocusTracker.onDidFocus(()=>{this._findInputFocused.set(!0),this._updateSearchScope()})),this._register(this._findFocusTracker.onDidBlur(()=>{this._findInputFocused.set(!1)})),this._replaceInputFocused=RY.bindTo(r),this._replaceFocusTracker=this._register(pu(this._replaceInput.inputBox.inputElement)),this._register(this._replaceFocusTracker.onDidFocus(()=>{this._replaceInputFocused.set(!0),this._updateSearchScope()})),this._register(this._replaceFocusTracker.onDidBlur(()=>{this._replaceInputFocused.set(!1)})),this._codeEditor.addOverlayWidget(this),this._codeEditor.getOption(41).addExtraSpaceOnTop&&(this._viewZone=new _9(0)),this._register(this._codeEditor.onDidChangeModel(()=>{this._isVisible&&(this._viewZoneId=void 0)})),this._register(this._codeEditor.onDidScrollChange(f=>{if(f.scrollTopChanged){this._layoutViewZone();return}setTimeout(()=>{this._layoutViewZone()},0)}))}getId(){return oF.ID}getDomNode(){return this._domNode}getPosition(){return this._isVisible?{preference:0}:null}_onStateChanged(e){if(e.searchString){try{this._ignoreChangeEvent=!0,this._findInput.setValue(this._state.searchString)}finally{this._ignoreChangeEvent=!1}this._updateButtons()}if(e.replaceString&&(this._replaceInput.inputBox.value=this._state.replaceString),e.isRevealed&&(this._state.isRevealed?this._reveal():this._hide(!0)),e.isReplaceRevealed&&(this._state.isReplaceRevealed?!this._codeEditor.getOption(92)&&!this._isReplaceVisible&&(this._isReplaceVisible=!0,this._replaceInput.width=qa(this._findInput.domNode),this._updateButtons(),this._replaceInput.inputBox.layout()):this._isReplaceVisible&&(this._isReplaceVisible=!1,this._updateButtons())),(e.isRevealed||e.isReplaceRevealed)&&(this._state.isRevealed||this._state.isReplaceRevealed)&&this._tryUpdateHeight()&&this._showViewZone(),e.isRegex&&this._findInput.setRegex(this._state.isRegex),e.wholeWord&&this._findInput.setWholeWords(this._state.wholeWord),e.matchCase&&this._findInput.setCaseSensitive(this._state.matchCase),e.preserveCase&&this._replaceInput.setPreserveCase(this._state.preserveCase),e.searchScope&&(this._state.searchScope?this._toggleSelectionFind.checked=!0:this._toggleSelectionFind.checked=!1,this._updateToggleSelectionFindButton()),e.searchString||e.matchesCount||e.matchesPosition){const t=this._state.searchString.length>0&&this._state.matchesCount===0;this._domNode.classList.toggle("no-results",t),this._updateMatchesCount(),this._updateButtons()}(e.searchString||e.currentMatch)&&this._layoutViewZone(),e.updateHistory&&this._delayedUpdateHistory(),e.loop&&this._updateButtons()}_delayedUpdateHistory(){this._updateHistoryDelayer.trigger(this._updateHistory.bind(this)).then(void 0,wt)}_updateHistory(){this._state.searchString&&this._findInput.inputBox.addToHistory(),this._state.replaceString&&this._replaceInput.inputBox.addToHistory()}_updateMatchesCount(){var t;this._matchesCount.style.minWidth=Dx+"px",this._state.matchesCount>=om?this._matchesCount.title=Cje:this._matchesCount.title="",(t=this._matchesCount.firstChild)==null||t.remove();let e;if(this._state.matchesCount>0){let i=String(this._state.matchesCount);this._state.matchesCount>=om&&(i+="+");let n=String(this._state.matchesPosition);n==="0"&&(n="?"),e=sC(yje,n,i)}else e=$re;this._matchesCount.appendChild(document.createTextNode(e)),ta(this._getAriaLabel(e,this._state.currentMatch,this._state.searchString)),Dx=Math.max(Dx,this._matchesCount.clientWidth)}_getAriaLabel(e,t,i){if(e===$re)return i===""?v("ariaSearchNoResultEmpty","{0} found",e):v("ariaSearchNoResult","{0} found for '{1}'",e,i);if(t){const n=v("ariaSearchNoResultWithLineNum","{0} found for '{1}', at {2}",e,i,t.startLineNumber+":"+t.startColumn),s=this._codeEditor.getModel();return s&&t.startLineNumber<=s.getLineCount()&&t.startLineNumber>=1?`${s.getLineContent(t.startLineNumber)}, ${n}`:n}return v("ariaSearchNoResultWithLineNumNoCurrentMatch","{0} found for '{1}'",e,i)}_updateToggleSelectionFindButton(){const e=this._codeEditor.getSelection(),t=e?e.startLineNumber!==e.endLineNumber||e.startColumn!==e.endColumn:!1,i=this._toggleSelectionFind.checked;this._isVisible&&(i||t)?this._toggleSelectionFind.enable():this._toggleSelectionFind.disable()}_updateButtons(){this._findInput.setEnabled(this._isVisible),this._replaceInput.setEnabled(this._isVisible&&this._isReplaceVisible),this._updateToggleSelectionFindButton(),this._closeBtn.setEnabled(this._isVisible);const e=this._state.searchString.length>0,t=!!this._state.matchesCount;this._prevBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateBack()),this._nextBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateForward()),this._replaceBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._replaceAllBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._domNode.classList.toggle("replaceToggled",this._isReplaceVisible),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);const i=!this._codeEditor.getOption(92);this._toggleReplaceBtn.setEnabled(this._isVisible&&i)}_reveal(){if(this._revealTimeouts.forEach(e=>{clearTimeout(e)}),this._revealTimeouts=[],!this._isVisible){this._isVisible=!0;const e=this._codeEditor.getSelection();switch(this._codeEditor.getOption(41).autoFindInSelection){case"always":this._toggleSelectionFind.checked=!0;break;case"never":this._toggleSelectionFind.checked=!1;break;case"multiline":{const i=!!e&&e.startLineNumber!==e.endLineNumber;this._toggleSelectionFind.checked=i;break}}this._tryUpdateWidgetWidth(),this._updateButtons(),this._revealTimeouts.push(setTimeout(()=>{this._domNode.classList.add("visible"),this._domNode.setAttribute("aria-hidden","false")},0)),this._revealTimeouts.push(setTimeout(()=>{this._findInput.validate()},200)),this._codeEditor.layoutOverlayWidget(this);let t=!0;if(this._codeEditor.getOption(41).seedSearchStringFromSelection&&e){const i=this._codeEditor.getDomNode();if(i){const n=os(i),s=this._codeEditor.getScrolledVisiblePosition(e.getStartPosition()),r=n.left+(s?s.left:0),a=s?s.top:0;if(this._viewZone&&a<this._viewZone.heightInPx){e.endLineNumber>e.startLineNumber&&(t=!1);const l=vce(this._domNode).left;r>l&&(t=!1);const c=this._codeEditor.getScrolledVisiblePosition(e.getEndPosition());n.left+(c?c.left:0)>l&&(t=!1)}}}this._showViewZone(t)}}_hide(e){this._revealTimeouts.forEach(t=>{clearTimeout(t)}),this._revealTimeouts=[],this._isVisible&&(this._isVisible=!1,this._updateButtons(),this._domNode.classList.remove("visible"),this._domNode.setAttribute("aria-hidden","true"),this._findInput.clearMessage(),e&&this._codeEditor.focus(),this._codeEditor.layoutOverlayWidget(this),this._removeViewZone())}_layoutViewZone(e){if(!this._codeEditor.getOption(41).addExtraSpaceOnTop){this._removeViewZone();return}if(!this._isVisible)return;const i=this._viewZone;this._viewZoneId!==void 0||!i||this._codeEditor.changeViewZones(n=>{i.heightInPx=this._getHeight(),this._viewZoneId=n.addZone(i),this._codeEditor.setScrollTop(e||this._codeEditor.getScrollTop()+i.heightInPx)})}_showViewZone(e=!0){if(!this._isVisible||!this._codeEditor.getOption(41).addExtraSpaceOnTop)return;this._viewZone===void 0&&(this._viewZone=new _9(0));const i=this._viewZone;this._codeEditor.changeViewZones(n=>{if(this._viewZoneId!==void 0){const s=this._getHeight();if(s===i.heightInPx)return;const r=s-i.heightInPx;i.heightInPx=s,n.layoutZone(this._viewZoneId),e&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+r);return}else{let s=this._getHeight();if(s-=this._codeEditor.getOption(84).top,s<=0)return;i.heightInPx=s,this._viewZoneId=n.addZone(i),e&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+s)}})}_removeViewZone(){this._codeEditor.changeViewZones(e=>{this._viewZoneId!==void 0&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0,this._viewZone&&(this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()-this._viewZone.heightInPx),this._viewZone=void 0))})}_tryUpdateWidgetWidth(){if(!this._isVisible||!this._domNode.isConnected)return;const e=this._codeEditor.getLayoutInfo();if(e.contentWidth<=0){this._domNode.classList.add("hiddenEditor");return}else this._domNode.classList.contains("hiddenEditor")&&this._domNode.classList.remove("hiddenEditor");const i=e.width,n=e.minimap.minimapWidth;let s=!1,r=!1,a=!1;if(this._resized&&qa(this._domNode)>Gu){this._domNode.style.maxWidth=`${i-28-n-15}px`,this._replaceInput.width=qa(this._findInput.domNode);return}if(Gu+28+n>=i&&(r=!0),Gu+28+n-Dx>=i&&(a=!0),Gu+28+n-Dx>=i+50&&(s=!0),this._domNode.classList.toggle("collapsed-find-widget",s),this._domNode.classList.toggle("narrow-find-widget",a),this._domNode.classList.toggle("reduced-find-widget",r),!a&&!s&&(this._domNode.style.maxWidth=`${i-28-n-15}px`),this._findInput.layout({collapsedFindWidget:s,narrowFindWidget:a,reducedFindWidget:r}),this._resized){const l=this._findInput.inputBox.element.clientWidth;l>0&&(this._replaceInput.width=l)}else this._isReplaceVisible&&(this._replaceInput.width=qa(this._findInput.domNode))}_getHeight(){let e=0;return e+=4,e+=this._findInput.inputBox.height+2,this._isReplaceVisible&&(e+=4,e+=this._replaceInput.inputBox.height+2),e+=4,e}_tryUpdateHeight(){const e=this._getHeight();return this._cachedHeight!==null&&this._cachedHeight===e?!1:(this._cachedHeight=e,this._domNode.style.height=`${e}px`,!0)}focusFindInput(){this._findInput.select(),this._findInput.focus()}focusReplaceInput(){this._replaceInput.select(),this._replaceInput.focus()}highlightFindOptions(){this._findInput.highlightFindOptions()}_updateSearchScope(){if(this._codeEditor.hasModel()&&this._toggleSelectionFind.checked){const e=this._codeEditor.getSelections();e.map(t=>{t.endColumn===1&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(t.endLineNumber-1)));const i=this._state.currentMatch;return t.startLineNumber!==t.endLineNumber&&!M.equalsRange(t,i)?t:null}).filter(t=>!!t),e.length&&this._state.change({searchScope:e},!0)}}_onFindInputMouseDown(e){e.middleButton&&e.stopPropagation()}_onFindInputKeyDown(e){if(e.equals(qre|3))if(this._keybindingService.dispatchEvent(e,e.target)){e.preventDefault();return}else{this._findInput.inputBox.insertAtCursor(`
`),e.preventDefault();return}if(e.equals(2)){this._isReplaceVisible?this._replaceInput.focus():this._findInput.focusOnCaseSensitive(),e.preventDefault();return}if(e.equals(2066)){this._codeEditor.focus(),e.preventDefault();return}if(e.equals(16))return Kre(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea"));if(e.equals(18))return Gre(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea"))}_onReplaceInputKeyDown(e){if(e.equals(qre|3))if(this._keybindingService.dispatchEvent(e,e.target)){e.preventDefault();return}else{Po&&su&&!this._ctrlEnterReplaceAllWarningPrompted&&(this._notificationService.info(v("ctrlEnter.keybindingChanged","Ctrl+Enter now inserts line break instead of replacing all. You can modify the keybinding for editor.action.replaceAll to override this behavior.")),this._ctrlEnterReplaceAllWarningPrompted=!0,this._storageService.store(jre,!0,0,0)),this._replaceInput.inputBox.insertAtCursor(`
`),e.preventDefault();return}if(e.equals(2)){this._findInput.focusOnCaseSensitive(),e.preventDefault();return}if(e.equals(1026)){this._findInput.focus(),e.preventDefault();return}if(e.equals(2066)){this._codeEditor.focus(),e.preventDefault();return}if(e.equals(16))return Kre(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea"));if(e.equals(18))return Gre(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea"))}getVerticalSashLeft(e){return 0}_keybindingLabelFor(e){const t=this._keybindingService.lookupKeybinding(e);return t?` (${t.getLabel()})`:""}_buildDomNode(){this._findInput=this._register(new w$(null,this._contextViewProvider,{width:Sje,label:cje,placeholder:dje,appendCaseSensitiveLabel:this._keybindingLabelFor(ln.ToggleCaseSensitiveCommand),appendWholeWordsLabel:this._keybindingLabelFor(ln.ToggleWholeWordCommand),appendRegexLabel:this._keybindingLabelFor(ln.ToggleRegexCommand),validation:u=>{if(u.length===0||!this._findInput.getRegex())return null;try{return new RegExp(u,"gu"),null}catch(f){return{content:f.message}}},flexibleHeight:!0,flexibleWidth:!0,flexibleMaxHeight:118,showCommonFindToggles:!0,showHistoryHint:()=>Vre(this._keybindingService),inputBoxStyles:eP,toggleStyles:JA},this._contextKeyService)),this._findInput.setRegex(!!this._state.isRegex),this._findInput.setCaseSensitive(!!this._state.matchCase),this._findInput.setWholeWords(!!this._state.wholeWord),this._register(this._findInput.onKeyDown(u=>this._onFindInputKeyDown(u))),this._register(this._findInput.inputBox.onDidChange(()=>{this._ignoreChangeEvent||this._state.change({searchString:this._findInput.getValue()},!0)})),this._register(this._findInput.onDidOptionChange(()=>{this._state.change({isRegex:this._findInput.getRegex(),wholeWord:this._findInput.getWholeWords(),matchCase:this._findInput.getCaseSensitive()},!0)})),this._register(this._findInput.onCaseSensitiveKeyDown(u=>{u.equals(1026)&&this._isReplaceVisible&&(this._replaceInput.focus(),u.preventDefault())})),this._register(this._findInput.onRegexKeyDown(u=>{u.equals(2)&&this._isReplaceVisible&&(this._replaceInput.focusOnPreserve(),u.preventDefault())})),this._register(this._findInput.inputBox.onDidHeightChange(u=>{this._tryUpdateHeight()&&this._showViewZone()})),Qr&&this._register(this._findInput.onMouseDown(u=>this._onFindInputMouseDown(u))),this._matchesCount=document.createElement("div"),this._matchesCount.className="matchesCount",this._updateMatchesCount();const i=this._register(gS());this._prevBtn=this._register(new uw({label:uje+this._keybindingLabelFor(ln.PreviousMatchFindAction),icon:rje,hoverDelegate:i,onTrigger:()=>{Kp(this._codeEditor.getAction(ln.PreviousMatchFindAction)).run().then(void 0,wt)}},this._hoverService)),this._nextBtn=this._register(new uw({label:hje+this._keybindingLabelFor(ln.NextMatchFindAction),icon:aje,hoverDelegate:i,onTrigger:()=>{Kp(this._codeEditor.getAction(ln.NextMatchFindAction)).run().then(void 0,wt)}},this._hoverService));const n=document.createElement("div");n.className="find-part",n.appendChild(this._findInput.domNode);const s=document.createElement("div");s.className="find-actions",n.appendChild(s),s.appendChild(this._matchesCount),s.appendChild(this._prevBtn.domNode),s.appendChild(this._nextBtn.domNode),this._toggleSelectionFind=this._register(new t0({icon:nje,title:fje+this._keybindingLabelFor(ln.ToggleSearchScopeCommand),isChecked:!1,hoverDelegate:i,inputActiveOptionBackground:He(iI),inputActiveOptionBorder:He(m4),inputActiveOptionForeground:He(_4)})),this._register(this._toggleSelectionFind.onChange(()=>{if(this._toggleSelectionFind.checked){if(this._codeEditor.hasModel()){let u=this._codeEditor.getSelections();u=u.map(f=>(f.endColumn===1&&f.endLineNumber>f.startLineNumber&&(f=f.setEndPosition(f.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(f.endLineNumber-1))),f.isEmpty()?null:f)).filter(f=>!!f),u.length&&this._state.change({searchScope:u},!0)}}else this._state.change({searchScope:null},!0)})),s.appendChild(this._toggleSelectionFind.domNode),this._closeBtn=this._register(new uw({label:gje+this._keybindingLabelFor(ln.CloseFindWidgetCommand),icon:Yhe,hoverDelegate:i,onTrigger:()=>{this._state.change({isRevealed:!1,searchScope:null},!1)},onKeyDown:u=>{u.equals(2)&&this._isReplaceVisible&&(this._replaceBtn.isEnabled()?this._replaceBtn.focus():this._codeEditor.focus(),u.preventDefault())}},this._hoverService)),this._replaceInput=this._register(new S$(null,void 0,{label:pje,placeholder:mje,appendPreserveCaseLabel:this._keybindingLabelFor(ln.TogglePreserveCaseCommand),history:[],flexibleHeight:!0,flexibleWidth:!0,flexibleMaxHeight:118,showHistoryHint:()=>Vre(this._keybindingService),inputBoxStyles:eP,toggleStyles:JA},this._contextKeyService,!0)),this._replaceInput.setPreserveCase(!!this._state.preserveCase),this._register(this._replaceInput.onKeyDown(u=>this._onReplaceInputKeyDown(u))),this._register(this._replaceInput.inputBox.onDidChange(()=>{this._state.change({replaceString:this._replaceInput.inputBox.value},!1)})),this._register(this._replaceInput.inputBox.onDidHeightChange(u=>{this._isReplaceVisible&&this._tryUpdateHeight()&&this._showViewZone()})),this._register(this._replaceInput.onDidOptionChange(()=>{this._state.change({preserveCase:this._replaceInput.getPreserveCase()},!0)})),this._register(this._replaceInput.onPreserveCaseKeyDown(u=>{u.equals(2)&&(this._prevBtn.isEnabled()?this._prevBtn.focus():this._nextBtn.isEnabled()?this._nextBtn.focus():this._toggleSelectionFind.enabled?this._toggleSelectionFind.focus():this._closeBtn.isEnabled()&&this._closeBtn.focus(),u.preventDefault())}));const r=this._register(gS());this._replaceBtn=this._register(new uw({label:_je+this._keybindingLabelFor(ln.ReplaceOneAction),icon:sje,hoverDelegate:r,onTrigger:()=>{this._controller.replace()},onKeyDown:u=>{u.equals(1026)&&(this._closeBtn.focus(),u.preventDefault())}},this._hoverService)),this._replaceAllBtn=this._register(new uw({label:vje+this._keybindingLabelFor(ln.ReplaceAllAction),icon:oje,hoverDelegate:r,onTrigger:()=>{this._controller.replaceAll()}},this._hoverService));const a=document.createElement("div");a.className="replace-part",a.appendChild(this._replaceInput.domNode);const l=document.createElement("div");l.className="replace-actions",a.appendChild(l),l.appendChild(this._replaceBtn.domNode),l.appendChild(this._replaceAllBtn.domNode),this._toggleReplaceBtn=this._register(new uw({label:bje,className:"codicon toggle left",onTrigger:()=>{this._state.change({isReplaceRevealed:!this._isReplaceVisible},!1),this._isReplaceVisible&&(this._replaceInput.width=qa(this._findInput.domNode),this._replaceInput.inputBox.layout()),this._showViewZone()}},this._hoverService)),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible),this._domNode=document.createElement("div"),this._domNode.className="editor-widget find-widget",this._domNode.setAttribute("aria-hidden","true"),this._domNode.ariaLabel=lje,this._domNode.role="dialog",this._domNode.style.width=`${Gu}px`,this._domNode.appendChild(this._toggleReplaceBtn.domNode),this._domNode.appendChild(n),this._domNode.appendChild(this._closeBtn.domNode),this._domNode.appendChild(a),this._resizeSash=this._register(new Yo(this._domNode,this,{orientation:0,size:2})),this._resized=!1;let c=Gu;this._register(this._resizeSash.onDidStart(()=>{c=qa(this._domNode)})),this._register(this._resizeSash.onDidChange(u=>{this._resized=!0;const f=c+u.startX-u.currentX;if(f<Gu)return;const g=parseFloat(GF(this._domNode).maxWidth)||0;f>g||(this._domNode.style.width=`${f}px`,this._isReplaceVisible&&(this._replaceInput.width=qa(this._findInput.domNode)),this._findInput.inputBox.layout(),this._tryUpdateHeight())})),this._register(this._resizeSash.onDidReset(()=>{const u=qa(this._domNode);if(u<Gu)return;let f=Gu;if(!this._resized||u===Gu){const g=this._codeEditor.getLayoutInfo();f=g.width-28-g.minimap.minimapWidth-15,this._resized=!0}this._domNode.style.width=`${f}px`,this._isReplaceVisible&&(this._replaceInput.width=qa(this._findInput.domNode)),this._findInput.inputBox.layout()}))}updateAccessibilitySupport(){const e=this._codeEditor.getOption(2);this._findInput.setFocusInputOnOptionClick(e!==2)}};oF.ID="editor.contrib.findWidget";let L$=oF;class uw extends Zl{constructor(e,t){super(),this._opts=e;let i="button";this._opts.className&&(i=i+" "+this._opts.className),this._opts.icon&&(i=i+" "+ut.asClassName(this._opts.icon)),this._domNode=document.createElement("div"),this._domNode.tabIndex=0,this._domNode.className=i,this._domNode.setAttribute("role","button"),this._domNode.setAttribute("aria-label",this._opts.label),this._register(t.setupManagedHover(e.hoverDelegate??sa("element"),this._domNode,this._opts.label)),this.onclick(this._domNode,n=>{this._opts.onTrigger(),n.preventDefault()}),this.onkeydown(this._domNode,n=>{var s,r;if(n.equals(10)||n.equals(3)){this._opts.onTrigger(),n.preventDefault();return}(r=(s=this._opts).onKeyDown)==null||r.call(s,n)})}get domNode(){return this._domNode}isEnabled(){return this._domNode.tabIndex>=0}focus(){this._domNode.focus()}setEnabled(e){this._domNode.classList.toggle("disabled",!e),this._domNode.setAttribute("aria-disabled",String(!e)),this._domNode.tabIndex=e?0:-1}setExpanded(e){this._domNode.setAttribute("aria-expanded",String(!!e)),e?(this._domNode.classList.remove(...ut.asClassNameArray(zre)),this._domNode.classList.add(...ut.asClassNameArray(Ure))):(this._domNode.classList.remove(...ut.asClassNameArray(Ure)),this._domNode.classList.add(...ut.asClassNameArray(zre)))}}Nc((o,e)=>{const t=o.getColor(Zp);t&&e.addRule(`.monaco-editor .findMatch { border: 1px ${lu(o.type)?"dotted":"solid"} ${t}; box-sizing: border-box; }`);const i=o.getColor(XNe);i&&e.addRule(`.monaco-editor .findScope { border: 1px ${lu(o.type)?"dashed":"solid"} ${i}; }`);const n=o.getColor(si);n&&e.addRule(`.monaco-editor .find-widget { border: 1px solid ${n}; }`);const s=o.getColor(YNe);s&&e.addRule(`.monaco-editor .findMatchInline { color: ${s}; }`);const r=o.getColor(ZNe);r&&e.addRule(`.monaco-editor .currentFindMatchInline { color: ${r}; }`)});var Fpe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},fc=function(o,e){return function(t,i){e(t,i,o)}},x$;const xje=524288;function k$(o,e="single",t=!1){if(!o.hasModel())return null;const i=o.getSelection();if(e==="single"&&i.startLineNumber===i.endLineNumber||e==="multiple"){if(i.isEmpty()){const n=o.getConfiguredWordAtPosition(i.getStartPosition());if(n&&t===!1)return n.word}else if(o.getModel().getValueLengthInRange(i)<xje)return o.getModel().getValueInRange(i)}return null}var Mb;let Ta=(Mb=class extends X{get editor(){return this._editor}static get(e){return e.getContribution(x$.ID)}constructor(e,t,i,n,s,r){super(),this._editor=e,this._findWidgetVisible=Wg.bindTo(t),this._contextKeyService=t,this._storageService=i,this._clipboardService=n,this._notificationService=s,this._hoverService=r,this._updateHistoryDelayer=new xc(500),this._state=this._register(new Q$e),this.loadQueryState(),this._register(this._state.onFindReplaceStateChange(a=>this._onStateChanged(a))),this._model=null,this._register(this._editor.onDidChangeModel(()=>{const a=this._editor.getModel()&&this._state.isRevealed;this.disposeModel(),this._state.change({searchScope:null,matchCase:this._storageService.getBoolean("editor.matchCase",1,!1),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,!1),isRegex:this._storageService.getBoolean("editor.isRegex",1,!1),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,!1)},!1),a&&this._start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!1,updateSearchScope:!1,loop:this._editor.getOption(41).loop})}))}dispose(){this.disposeModel(),super.dispose()}disposeModel(){this._model&&(this._model.dispose(),this._model=null)}_onStateChanged(e){this.saveQueryState(e),e.isRevealed&&(this._state.isRevealed?this._findWidgetVisible.set(!0):(this._findWidgetVisible.reset(),this.disposeModel())),e.searchString&&this.setGlobalBufferTerm(this._state.searchString)}saveQueryState(e){e.isRegex&&this._storageService.store("editor.isRegex",this._state.actualIsRegex,1,1),e.wholeWord&&this._storageService.store("editor.wholeWord",this._state.actualWholeWord,1,1),e.matchCase&&this._storageService.store("editor.matchCase",this._state.actualMatchCase,1,1),e.preserveCase&&this._storageService.store("editor.preserveCase",this._state.actualPreserveCase,1,1)}loadQueryState(){this._state.change({matchCase:this._storageService.getBoolean("editor.matchCase",1,this._state.matchCase),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,this._state.wholeWord),isRegex:this._storageService.getBoolean("editor.isRegex",1,this._state.isRegex),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,this._state.preserveCase)},!1)}isFindInputFocused(){return!!h5.getValue(this._contextKeyService)}getState(){return this._state}closeFindWidget(){this._state.change({isRevealed:!1,searchScope:null},!1),this._editor.focus()}toggleCaseSensitive(){this._state.change({matchCase:!this._state.matchCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleWholeWords(){this._state.change({wholeWord:!this._state.wholeWord},!1),this._state.isRevealed||this.highlightFindOptions()}toggleRegex(){this._state.change({isRegex:!this._state.isRegex},!1),this._state.isRevealed||this.highlightFindOptions()}togglePreserveCase(){this._state.change({preserveCase:!this._state.preserveCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleSearchScope(){if(this._state.searchScope)this._state.change({searchScope:null},!0);else if(this._editor.hasModel()){let e=this._editor.getSelections();e=e.map(t=>(t.endColumn===1&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,this._editor.getModel().getLineMaxColumn(t.endLineNumber-1))),t.isEmpty()?null:t)).filter(t=>!!t),e.length&&this._state.change({searchScope:e},!0)}}setSearchString(e){this._state.isRegex&&(e=Ul(e)),this._state.change({searchString:e},!1)}highlightFindOptions(e=!1){}async _start(e,t){if(this.disposeModel(),!this._editor.hasModel())return;const i={...t,isRevealed:!0};if(e.seedSearchStringFromSelection==="single"){const n=k$(this._editor,e.seedSearchStringFromSelection,e.seedSearchStringFromNonEmptySelection);n&&(this._state.isRegex?i.searchString=Ul(n):i.searchString=n)}else if(e.seedSearchStringFromSelection==="multiple"&&!e.updateSearchScope){const n=k$(this._editor,e.seedSearchStringFromSelection);n&&(i.searchString=n)}if(!i.searchString&&e.seedSearchStringFromGlobalClipboard){const n=await this.getGlobalBufferTerm();if(!this._editor.hasModel())return;n&&(i.searchString=n)}if(e.forceRevealReplace||i.isReplaceRevealed?i.isReplaceRevealed=!0:this._findWidgetVisible.get()||(i.isReplaceRevealed=!1),e.updateSearchScope){const n=this._editor.getSelections();n.some(s=>!s.isEmpty())&&(i.searchScope=n)}i.loop=e.loop,this._state.change(i,!1),this._model||(this._model=new Rk(this._editor,this._state))}start(e,t){return this._start(e,t)}moveToNextMatch(){return this._model?(this._model.moveToNextMatch(),!0):!1}moveToPrevMatch(){return this._model?(this._model.moveToPrevMatch(),!0):!1}goToMatch(e){return this._model?(this._model.moveToMatch(e),!0):!1}replace(){return this._model?(this._model.replace(),!0):!1}replaceAll(){var e;return this._model?(e=this._editor.getModel())!=null&&e.isTooLargeForHeapOperation()?(this._notificationService.warn(v("too.large.for.replaceall","The file is too large to perform a replace all operation.")),!1):(this._model.replaceAll(),!0):!1}selectAllMatches(){return this._model?(this._model.selectAllMatches(),this._editor.focus(),!0):!1}async getGlobalBufferTerm(){return this._editor.getOption(41).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()?this._clipboardService.readFindText():""}setGlobalBufferTerm(e){this._editor.getOption(41).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()&&this._clipboardService.writeFindText(e)}},x$=Mb,Mb.ID="editor.contrib.findController",Mb);Ta=x$=Fpe([fc(1,ht),fc(2,md),fc(3,Bg),fc(4,fs),fc(5,qh)],Ta);let D$=class extends Ta{constructor(e,t,i,n,s,r,a,l,c){super(e,i,a,l,r,c),this._contextViewService=t,this._keybindingService=n,this._themeService=s,this._widget=null,this._findOptionsWidget=null}async _start(e,t){this._widget||this._createFindWidget();const i=this._editor.getSelection();let n=!1;switch(this._editor.getOption(41).autoFindInSelection){case"always":n=!0;break;case"never":n=!1;break;case"multiline":{n=!!i&&i.startLineNumber!==i.endLineNumber;break}}e.updateSearchScope=e.updateSearchScope||n,await super._start(e,t),this._widget&&(e.shouldFocus===2?this._widget.focusReplaceInput():e.shouldFocus===1&&this._widget.focusFindInput())}highlightFindOptions(e=!1){this._widget||this._createFindWidget(),this._state.isRevealed&&!e?this._widget.highlightFindOptions():this._findOptionsWidget.highlightFindOptions()}_createFindWidget(){this._widget=this._register(new L$(this._editor,this,this._state,this._contextViewService,this._keybindingService,this._contextKeyService,this._themeService,this._storageService,this._notificationService,this._hoverService)),this._findOptionsWidget=this._register(new y$(this._editor,this._state,this._keybindingService))}};D$=Fpe([fc(1,Pg),fc(2,ht),fc(3,Di),fc(4,Ws),fc(5,fs),fc(6,md),fc(7,Bg),fc(8,qh)],D$);const kje=Pce(new Ace({id:ln.StartFindAction,label:v("startFindAction","Find"),alias:"Find",precondition:de.or(B.focus,de.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2084,weight:100},menuOpts:{menuId:qe.MenubarEditMenu,group:"3_find",title:v({key:"miFind",comment:["&& denotes a mnemonic"]},"&&Find"),order:1}}));kje.addImplementation(0,(o,e,t)=>{const i=Ta.get(e);return i?i.start({forceRevealReplace:!1,seedSearchStringFromSelection:e.getOption(41).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:e.getOption(41).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:e.getOption(41).globalFindClipboard,shouldFocus:1,shouldAnimate:!0,updateSearchScope:!1,loop:e.getOption(41).loop}):!1});const Dje={description:"Open a new In-Editor Find Widget.",args:[{name:"Open a new In-Editor Find Widget args",schema:{properties:{searchString:{type:"string"},replaceString:{type:"string"},isRegex:{type:"boolean"},matchWholeWord:{type:"boolean"},isCaseSensitive:{type:"boolean"},preserveCase:{type:"boolean"},findInSelection:{type:"boolean"}}}}]};class Eje extends Ve{constructor(){super({id:ln.StartFindWithArgs,label:v("startFindWithArgsAction","Find With Arguments"),alias:"Find With Arguments",precondition:void 0,kbOpts:{kbExpr:null,primary:0,weight:100},metadata:Dje})}async run(e,t,i){const n=Ta.get(t);if(n){const s=i?{searchString:i.searchString,replaceString:i.replaceString,isReplaceRevealed:i.replaceString!==void 0,isRegex:i.isRegex,wholeWord:i.matchWholeWord,matchCase:i.isCaseSensitive,preserveCase:i.preserveCase}:{};await n.start({forceRevealReplace:!1,seedSearchStringFromSelection:n.getState().searchString.length===0&&t.getOption(41).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:t.getOption(41).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:!0,shouldFocus:1,shouldAnimate:!0,updateSearchScope:(i==null?void 0:i.findInSelection)||!1,loop:t.getOption(41).loop},s),n.setGlobalBufferTerm(n.getState().searchString)}}}class Ije extends Ve{constructor(){super({id:ln.StartFindWithSelection,label:v("startFindWithSelectionAction","Find With Selection"),alias:"Find With Selection",precondition:void 0,kbOpts:{kbExpr:null,primary:0,mac:{primary:2083},weight:100}})}async run(e,t){const i=Ta.get(t);i&&(await i.start({forceRevealReplace:!1,seedSearchStringFromSelection:"multiple",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(41).loop}),i.setGlobalBufferTerm(i.getState().searchString))}}class Bpe extends Ve{async run(e,t){const i=Ta.get(t);i&&!this._run(i)&&(await i.start({forceRevealReplace:!1,seedSearchStringFromSelection:i.getState().searchString.length===0&&t.getOption(41).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:t.getOption(41).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:!0,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(41).loop}),this._run(i))}}class Tje extends Bpe{constructor(){super({id:ln.NextMatchFindAction,label:v("findNextMatchAction","Find Next"),alias:"Find Next",precondition:void 0,kbOpts:[{kbExpr:B.focus,primary:61,mac:{primary:2085,secondary:[61]},weight:100},{kbExpr:de.and(B.focus,h5),primary:3,weight:100}]})}_run(e){return e.moveToNextMatch()?(e.editor.pushUndoStop(),!0):!1}}class Nje extends Bpe{constructor(){super({id:ln.PreviousMatchFindAction,label:v("findPreviousMatchAction","Find Previous"),alias:"Find Previous",precondition:void 0,kbOpts:[{kbExpr:B.focus,primary:1085,mac:{primary:3109,secondary:[1085]},weight:100},{kbExpr:de.and(B.focus,h5),primary:1027,weight:100}]})}_run(e){return e.moveToPrevMatch()}}class Rje extends Ve{constructor(){super({id:ln.GoToMatchFindAction,label:v("findMatchAction.goToMatch","Go to Match..."),alias:"Go to Match...",precondition:Wg}),this._highlightDecorations=[]}run(e,t,i){const n=Ta.get(t);if(!n)return;const s=n.getState().matchesCount;if(s<1){e.get(fs).notify({severity:d4.Warning,message:v("findMatchAction.noResults","No matches. Try searching for something else.")});return}const r=e.get(Rc),a=new le,l=a.add(r.createInputBox());l.placeholder=v("findMatchAction.inputPlaceHolder","Type a number to go to a specific match (between 1 and {0})",s);const c=f=>{const g=parseInt(f);if(isNaN(g))return;const p=n.getState().matchesCount;if(g>0&&g<=p)return g-1;if(g<0&&g>=-p)return p+g},u=f=>{const g=c(f);if(typeof g=="number"){l.validationMessage=void 0,n.goToMatch(g);const p=n.getState().currentMatch;p&&this.addDecorations(t,p)}else l.validationMessage=v("findMatchAction.inputValidationMessage","Please type a number between 1 and {0}",n.getState().matchesCount),this.clearDecorations(t)};a.add(l.onDidChangeValue(f=>{u(f)})),a.add(l.onDidAccept(()=>{const f=c(l.value);typeof f=="number"?(n.goToMatch(f),l.hide()):l.validationMessage=v("findMatchAction.inputValidationMessage","Please type a number between 1 and {0}",n.getState().matchesCount)})),a.add(l.onDidHide(()=>{this.clearDecorations(t),a.dispose()})),l.show()}clearDecorations(e){e.changeDecorations(t=>{this._highlightDecorations=t.deltaDecorations(this._highlightDecorations,[])})}addDecorations(e,t){e.changeDecorations(i=>{this._highlightDecorations=i.deltaDecorations(this._highlightDecorations,[{range:t,options:{description:"find-match-quick-access-range-highlight",className:"rangeHighlight",isWholeLine:!0}},{range:t,options:{description:"find-match-quick-access-range-highlight-overview",overviewRuler:{color:Gn(Oue),position:Hl.Full}}}])})}}class Wpe extends Ve{async run(e,t){const i=Ta.get(t);if(!i)return;const n=k$(t,"single",!1);n&&i.setSearchString(n),this._run(i)||(await i.start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(41).loop}),this._run(i))}}class Mje extends Wpe{constructor(){super({id:ln.NextSelectionMatchFindAction,label:v("nextSelectionMatchFindAction","Find Next Selection"),alias:"Find Next Selection",precondition:void 0,kbOpts:{kbExpr:B.focus,primary:2109,weight:100}})}_run(e){return e.moveToNextMatch()}}class Aje extends Wpe{constructor(){super({id:ln.PreviousSelectionMatchFindAction,label:v("previousSelectionMatchFindAction","Find Previous Selection"),alias:"Find Previous Selection",precondition:void 0,kbOpts:{kbExpr:B.focus,primary:3133,weight:100}})}_run(e){return e.moveToPrevMatch()}}const Pje=Pce(new Ace({id:ln.StartFindReplaceAction,label:v("startReplace","Replace"),alias:"Replace",precondition:de.or(B.focus,de.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2086,mac:{primary:2596},weight:100},menuOpts:{menuId:qe.MenubarEditMenu,group:"3_find",title:v({key:"miReplace",comment:["&& denotes a mnemonic"]},"&&Replace"),order:2}}));Pje.addImplementation(0,(o,e,t)=>{if(!e.hasModel()||e.getOption(92))return!1;const i=Ta.get(e);if(!i)return!1;const n=e.getSelection(),s=i.isFindInputFocused(),r=!n.isEmpty()&&n.startLineNumber===n.endLineNumber&&e.getOption(41).seedSearchStringFromSelection!=="never"&&!s,a=s||r?2:1;return i.start({forceRevealReplace:!0,seedSearchStringFromSelection:r?"single":"none",seedSearchStringFromNonEmptySelection:e.getOption(41).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:e.getOption(41).seedSearchStringFromSelection!=="never",shouldFocus:a,shouldAnimate:!0,updateSearchScope:!1,loop:e.getOption(41).loop})});oi(Ta.ID,D$,0);be(Eje);be(Ije);be(Tje);be(Nje);be(Rje);be(Mje);be(Aje);const xu=Bs.bindToContribution(Ta.get);Re(new xu({id:ln.CloseFindWidgetCommand,precondition:Wg,handler:o=>o.closeFindWidget(),kbOpts:{weight:105,kbExpr:de.and(B.focus,de.not("isComposing")),primary:9,secondary:[1033]}}));Re(new xu({id:ln.ToggleCaseSensitiveCommand,precondition:void 0,handler:o=>o.toggleCaseSensitive(),kbOpts:{weight:105,kbExpr:B.focus,primary:UR.primary,mac:UR.mac,win:UR.win,linux:UR.linux}}));Re(new xu({id:ln.ToggleWholeWordCommand,precondition:void 0,handler:o=>o.toggleWholeWords(),kbOpts:{weight:105,kbExpr:B.focus,primary:$R.primary,mac:$R.mac,win:$R.win,linux:$R.linux}}));Re(new xu({id:ln.ToggleRegexCommand,precondition:void 0,handler:o=>o.toggleRegex(),kbOpts:{weight:105,kbExpr:B.focus,primary:jR.primary,mac:jR.mac,win:jR.win,linux:jR.linux}}));Re(new xu({id:ln.ToggleSearchScopeCommand,precondition:void 0,handler:o=>o.toggleSearchScope(),kbOpts:{weight:105,kbExpr:B.focus,primary:qR.primary,mac:qR.mac,win:qR.win,linux:qR.linux}}));Re(new xu({id:ln.TogglePreserveCaseCommand,precondition:void 0,handler:o=>o.togglePreserveCase(),kbOpts:{weight:105,kbExpr:B.focus,primary:KR.primary,mac:KR.mac,win:KR.win,linux:KR.linux}}));Re(new xu({id:ln.ReplaceOneAction,precondition:Wg,handler:o=>o.replace(),kbOpts:{weight:105,kbExpr:B.focus,primary:3094}}));Re(new xu({id:ln.ReplaceOneAction,precondition:Wg,handler:o=>o.replace(),kbOpts:{weight:105,kbExpr:de.and(B.focus,RY),primary:3}}));Re(new xu({id:ln.ReplaceAllAction,precondition:Wg,handler:o=>o.replaceAll(),kbOpts:{weight:105,kbExpr:B.focus,primary:2563}}));Re(new xu({id:ln.ReplaceAllAction,precondition:Wg,handler:o=>o.replaceAll(),kbOpts:{weight:105,kbExpr:de.and(B.focus,RY),primary:void 0,mac:{primary:2051}}}));Re(new xu({id:ln.SelectAllMatchesAction,precondition:Wg,handler:o=>o.selectAllMatches(),kbOpts:{weight:105,kbExpr:B.focus,primary:515}}));const Oje={0:" ",1:"u",2:"r"},Yre=65535,Gd=16777215,Zre=4278190080;class v9{constructor(e){const t=Math.ceil(e/32);this._states=new Uint32Array(t)}get(e){const t=e/32|0,i=e%32;return(this._states[t]&1<<i)!==0}set(e,t){const i=e/32|0,n=e%32,s=this._states[i];t?this._states[i]=s|1<<n:this._states[i]=s&~(1<<n)}}class Nl{constructor(e,t,i){if(e.length!==t.length||e.length>Yre)throw new Error("invalid startIndexes or endIndexes size");this._startIndexes=e,this._endIndexes=t,this._collapseStates=new v9(e.length),this._userDefinedStates=new v9(e.length),this._recoveredStates=new v9(e.length),this._types=i,this._parentsComputed=!1}ensureParentIndices(){if(!this._parentsComputed){this._parentsComputed=!0;const e=[],t=(i,n)=>{const s=e[e.length-1];return this.getStartLineNumber(s)<=i&&this.getEndLineNumber(s)>=n};for(let i=0,n=this._startIndexes.length;i<n;i++){const s=this._startIndexes[i],r=this._endIndexes[i];if(s>Gd||r>Gd)throw new Error("startLineNumber or endLineNumber must not exceed "+Gd);for(;e.length>0&&!t(s,r);)e.pop();const a=e.length>0?e[e.length-1]:-1;e.push(i),this._startIndexes[i]=s+((a&255)<<24),this._endIndexes[i]=r+((a&65280)<<16)}}}get length(){return this._startIndexes.length}getStartLineNumber(e){return this._startIndexes[e]&Gd}getEndLineNumber(e){return this._endIndexes[e]&Gd}getType(e){return this._types?this._types[e]:void 0}hasTypes(){return!!this._types}isCollapsed(e){return this._collapseStates.get(e)}setCollapsed(e,t){this._collapseStates.set(e,t)}isUserDefined(e){return this._userDefinedStates.get(e)}setUserDefined(e,t){return this._userDefinedStates.set(e,t)}isRecovered(e){return this._recoveredStates.get(e)}setRecovered(e,t){return this._recoveredStates.set(e,t)}getSource(e){return this.isUserDefined(e)?1:this.isRecovered(e)?2:0}setSource(e,t){t===1?(this.setUserDefined(e,!0),this.setRecovered(e,!1)):t===2?(this.setUserDefined(e,!1),this.setRecovered(e,!0)):(this.setUserDefined(e,!1),this.setRecovered(e,!1))}setCollapsedAllOfType(e,t){let i=!1;if(this._types)for(let n=0;n<this._types.length;n++)this._types[n]===e&&(this.setCollapsed(n,t),i=!0);return i}toRegion(e){return new Fje(this,e)}getParentIndex(e){this.ensureParentIndices();const t=((this._startIndexes[e]&Zre)>>>24)+((this._endIndexes[e]&Zre)>>>16);return t===Yre?-1:t}contains(e,t){return this.getStartLineNumber(e)<=t&&this.getEndLineNumber(e)>=t}findIndex(e){let t=0,i=this._startIndexes.length;if(i===0)return-1;for(;t<i;){const n=Math.floor((t+i)/2);e<this.getStartLineNumber(n)?i=n:t=n+1}return t-1}findRange(e){let t=this.findIndex(e);if(t>=0){if(this.getEndLineNumber(t)>=e)return t;for(t=this.getParentIndex(t);t!==-1;){if(this.contains(t,e))return t;t=this.getParentIndex(t)}}return-1}toString(){const e=[];for(let t=0;t<this.length;t++)e[t]=`[${Oje[this.getSource(t)]}${this.isCollapsed(t)?"+":"-"}] ${this.getStartLineNumber(t)}/${this.getEndLineNumber(t)}`;return e.join(", ")}toFoldRange(e){return{startLineNumber:this._startIndexes[e]&Gd,endLineNumber:this._endIndexes[e]&Gd,type:this._types?this._types[e]:void 0,isCollapsed:this.isCollapsed(e),source:this.getSource(e)}}static fromFoldRanges(e){const t=e.length,i=new Uint32Array(t),n=new Uint32Array(t);let s=[],r=!1;for(let l=0;l<t;l++){const c=e[l];i[l]=c.startLineNumber,n[l]=c.endLineNumber,s.push(c.type),c.type&&(r=!0)}r||(s=void 0);const a=new Nl(i,n,s);for(let l=0;l<t;l++)e[l].isCollapsed&&a.setCollapsed(l,!0),a.setSource(l,e[l].source);return a}static sanitizeAndMerge(e,t,i,n){i=i??Number.MAX_VALUE;const s=(y,S)=>Array.isArray(y)?L=>L<S?y[L]:void 0:L=>L<S?y.toFoldRange(L):void 0,r=s(e,e.length),a=s(t,t.length);let l=0,c=0,u=r(0),f=a(0);const g=[];let p,_=0;const b=[];for(;u||f;){let y;if(f&&(!u||u.startLineNumber>=f.startLineNumber))u&&u.startLineNumber===f.startLineNumber?(f.source===1?y=f:(y=u,y.isCollapsed=f.isCollapsed&&(u.endLineNumber===f.endLineNumber||!(n!=null&&n.startsInside(u.startLineNumber+1,u.endLineNumber+1))),y.source=0),u=r(++l)):(y=f,f.isCollapsed&&f.source===0&&(y.source=2)),f=a(++c);else{let S=c,L=f;for(;;){if(!L||L.startLineNumber>u.endLineNumber){y=u;break}if(L.source===1&&L.endLineNumber>u.endLineNumber)break;L=a(++S)}u=r(++l)}if(y){for(;p&&p.endLineNumber<y.startLineNumber;)p=g.pop();y.endLineNumber>y.startLineNumber&&y.startLineNumber>_&&y.endLineNumber<=i&&(!p||p.endLineNumber>=y.endLineNumber)&&(b.push(y),_=y.startLineNumber,p&&g.push(p),p=y)}}return b}}class Fje{constructor(e,t){this.ranges=e,this.index=t}get startLineNumber(){return this.ranges.getStartLineNumber(this.index)}get endLineNumber(){return this.ranges.getEndLineNumber(this.index)}get regionIndex(){return this.index}get parentIndex(){return this.ranges.getParentIndex(this.index)}get isCollapsed(){return this.ranges.isCollapsed(this.index)}containedBy(e){return e.startLineNumber<=this.startLineNumber&&e.endLineNumber>=this.endLineNumber}containsLine(e){return this.startLineNumber<=e&&e<=this.endLineNumber}}class Bje{get regions(){return this._regions}get textModel(){return this._textModel}constructor(e,t){this._updateEventEmitter=new Y,this.onDidChange=this._updateEventEmitter.event,this._textModel=e,this._decorationProvider=t,this._regions=new Nl(new Uint32Array(0),new Uint32Array(0)),this._editorDecorationIds=[]}toggleCollapseState(e){if(!e.length)return;e=e.sort((i,n)=>i.regionIndex-n.regionIndex);const t={};this._decorationProvider.changeDecorations(i=>{let n=0,s=-1,r=-1;const a=l=>{for(;n<l;){const c=this._regions.getEndLineNumber(n),u=this._regions.isCollapsed(n);if(c<=s){const f=this.regions.getSource(n)!==0;i.changeDecorationOptions(this._editorDecorationIds[n],this._decorationProvider.getDecorationOption(u,c<=r,f))}u&&c>r&&(r=c),n++}};for(const l of e){const c=l.regionIndex,u=this._editorDecorationIds[c];if(u&&!t[u]){t[u]=!0,a(c);const f=!this._regions.isCollapsed(c);this._regions.setCollapsed(c,f),s=Math.max(s,this._regions.getEndLineNumber(c))}}a(this._regions.length)}),this._updateEventEmitter.fire({model:this,collapseStateChanged:e})}removeManualRanges(e){const t=new Array,i=n=>{for(const s of e)if(!(s.startLineNumber>n.endLineNumber||n.startLineNumber>s.endLineNumber))return!0;return!1};for(let n=0;n<this._regions.length;n++){const s=this._regions.toFoldRange(n);(s.source===0||!i(s))&&t.push(s)}this.updatePost(Nl.fromFoldRanges(t))}update(e,t){const i=this._currentFoldedOrManualRanges(t),n=Nl.sanitizeAndMerge(e,i,this._textModel.getLineCount(),t);this.updatePost(Nl.fromFoldRanges(n))}updatePost(e){const t=[];let i=-1;for(let n=0,s=e.length;n<s;n++){const r=e.getStartLineNumber(n),a=e.getEndLineNumber(n),l=e.isCollapsed(n),c=e.getSource(n)!==0,u={startLineNumber:r,startColumn:this._textModel.getLineMaxColumn(r),endLineNumber:a,endColumn:this._textModel.getLineMaxColumn(a)+1};t.push({range:u,options:this._decorationProvider.getDecorationOption(l,a<=i,c)}),l&&a>i&&(i=a)}this._decorationProvider.changeDecorations(n=>this._editorDecorationIds=n.deltaDecorations(this._editorDecorationIds,t)),this._regions=e,this._updateEventEmitter.fire({model:this})}_currentFoldedOrManualRanges(e){const t=[];for(let i=0,n=this._regions.length;i<n;i++){let s=this.regions.isCollapsed(i);const r=this.regions.getSource(i);if(s||r!==0){const a=this._regions.toFoldRange(i),l=this._textModel.getDecorationRange(this._editorDecorationIds[i]);l&&(s&&(e!=null&&e.startsInside(l.startLineNumber+1,l.endLineNumber))&&(s=!1),t.push({startLineNumber:l.startLineNumber,endLineNumber:l.endLineNumber,type:a.type,isCollapsed:s,source:r}))}}return t}getMemento(){const e=this._currentFoldedOrManualRanges(),t=[],i=this._textModel.getLineCount();for(let n=0,s=e.length;n<s;n++){const r=e[n];if(r.startLineNumber>=r.endLineNumber||r.startLineNumber<1||r.endLineNumber>i)continue;const a=this._getLinesChecksum(r.startLineNumber+1,r.endLineNumber);t.push({startLineNumber:r.startLineNumber,endLineNumber:r.endLineNumber,isCollapsed:r.isCollapsed,source:r.source,checksum:a})}return t.length>0?t:void 0}applyMemento(e){if(!Array.isArray(e))return;const t=[],i=this._textModel.getLineCount();for(const s of e){if(s.startLineNumber>=s.endLineNumber||s.startLineNumber<1||s.endLineNumber>i)continue;const r=this._getLinesChecksum(s.startLineNumber+1,s.endLineNumber);(!s.checksum||r===s.checksum)&&t.push({startLineNumber:s.startLineNumber,endLineNumber:s.endLineNumber,type:void 0,isCollapsed:s.isCollapsed??!0,source:s.source??0})}const n=Nl.sanitizeAndMerge(this._regions,t,i);this.updatePost(Nl.fromFoldRanges(n))}_getLinesChecksum(e,t){return jF(this._textModel.getLineContent(e)+this._textModel.getLineContent(t))%1e6}dispose(){this._decorationProvider.removeDecorations(this._editorDecorationIds)}getAllRegionsAtLine(e,t){const i=[];if(this._regions){let n=this._regions.findRange(e),s=1;for(;n>=0;){const r=this._regions.toRegion(n);(!t||t(r,s))&&i.push(r),s++,n=r.parentIndex}}return i}getRegionAtLine(e){if(this._regions){const t=this._regions.findRange(e);if(t>=0)return this._regions.toRegion(t)}return null}getRegionsInside(e,t){const i=[],n=e?e.regionIndex+1:0,s=e?e.endLineNumber:Number.MAX_VALUE;if(t&&t.length===2){const r=[];for(let a=n,l=this._regions.length;a<l;a++){const c=this._regions.toRegion(a);if(this._regions.getStartLineNumber(a)<s){for(;r.length>0&&!c.containedBy(r[r.length-1]);)r.pop();r.push(c),t(c,r.length)&&i.push(c)}else break}}else for(let r=n,a=this._regions.length;r<a;r++){const l=this._regions.toRegion(r);if(this._regions.getStartLineNumber(r)<s)(!t||t(l))&&i.push(l);else break}return i}}function PY(o,e,t){const i=[];for(const n of t){const s=o.getRegionAtLine(n);if(s){const r=!s.isCollapsed;if(i.push(s),e>1){const a=o.getRegionsInside(s,(l,c)=>l.isCollapsed!==r&&c<e);i.push(...a)}}}o.toggleCollapseState(i)}function u0(o,e,t=Number.MAX_VALUE,i){const n=[];if(i&&i.length>0)for(const s of i){const r=o.getRegionAtLine(s);if(r&&(r.isCollapsed!==e&&n.push(r),t>1)){const a=o.getRegionsInside(r,(l,c)=>l.isCollapsed!==e&&c<t);n.push(...a)}}else{const s=o.getRegionsInside(null,(r,a)=>r.isCollapsed!==e&&a<t);n.push(...s)}o.toggleCollapseState(n)}function Hpe(o,e,t,i){const n=[];for(const s of i){const r=o.getAllRegionsAtLine(s,(a,l)=>a.isCollapsed!==e&&l<=t);n.push(...r)}o.toggleCollapseState(n)}function Wje(o,e,t){const i=[];for(const n of t){const s=o.getAllRegionsAtLine(n,r=>r.isCollapsed!==e);s.length>0&&i.push(s[0])}o.toggleCollapseState(i)}function Hje(o,e,t,i){const n=(r,a)=>a===e&&r.isCollapsed!==t&&!i.some(l=>r.containsLine(l)),s=o.getRegionsInside(null,n);o.toggleCollapseState(s)}function Vpe(o,e,t){const i=[];for(const r of t){const a=o.getAllRegionsAtLine(r,void 0);a.length>0&&i.push(a[0])}const n=r=>i.every(a=>!a.containedBy(r)&&!r.containedBy(a))&&r.isCollapsed!==e,s=o.getRegionsInside(null,n);o.toggleCollapseState(s)}function OY(o,e,t){const i=o.textModel,n=o.regions,s=[];for(let r=n.length-1;r>=0;r--)if(t!==n.isCollapsed(r)){const a=n.getStartLineNumber(r);e.test(i.getLineContent(a))&&s.push(n.toRegion(r))}o.toggleCollapseState(s)}function FY(o,e,t){const i=o.regions,n=[];for(let s=i.length-1;s>=0;s--)t!==i.isCollapsed(s)&&e===i.getType(s)&&n.push(i.toRegion(s));o.toggleCollapseState(n)}function Vje(o,e){let t=null;const i=e.getRegionAtLine(o);if(i!==null&&(t=i.startLineNumber,o===t)){const n=i.parentIndex;n!==-1?t=e.regions.getStartLineNumber(n):t=null}return t}function zje(o,e){let t=e.getRegionAtLine(o);if(t!==null&&t.startLineNumber===o){if(o!==t.startLineNumber)return t.startLineNumber;{const i=t.parentIndex;let n=0;for(i!==-1&&(n=e.regions.getStartLineNumber(t.parentIndex));t!==null;)if(t.regionIndex>0){if(t=e.regions.toRegion(t.regionIndex-1),t.startLineNumber<=n)return null;if(t.parentIndex===i)return t.startLineNumber}else return null}}else if(e.regions.length>0)for(t=e.regions.toRegion(e.regions.length-1);t!==null;){if(t.startLineNumber<o)return t.startLineNumber;t.regionIndex>0?t=e.regions.toRegion(t.regionIndex-1):t=null}return null}function Uje(o,e){let t=e.getRegionAtLine(o);if(t!==null&&t.startLineNumber===o){const i=t.parentIndex;let n=0;if(i!==-1)n=e.regions.getEndLineNumber(t.parentIndex);else{if(e.regions.length===0)return null;n=e.regions.getEndLineNumber(e.regions.length-1)}for(;t!==null;)if(t.regionIndex<e.regions.length){if(t=e.regions.toRegion(t.regionIndex+1),t.startLineNumber>=n)return null;if(t.parentIndex===i)return t.startLineNumber}else return null}else if(e.regions.length>0)for(t=e.regions.toRegion(0);t!==null;){if(t.startLineNumber>o)return t.startLineNumber;t.regionIndex<e.regions.length?t=e.regions.toRegion(t.regionIndex+1):t=null}return null}class $je{get onDidChange(){return this._updateEventEmitter.event}get hiddenRanges(){return this._hiddenRanges}constructor(e){this._updateEventEmitter=new Y,this._hasLineChanges=!1,this._foldingModel=e,this._foldingModelListener=e.onDidChange(t=>this.updateHiddenRanges()),this._hiddenRanges=[],e.regions.length&&this.updateHiddenRanges()}notifyChangeModelContent(e){this._hiddenRanges.length&&!this._hasLineChanges&&(this._hasLineChanges=e.changes.some(t=>t.range.endLineNumber!==t.range.startLineNumber||Vm(t.text)[0]!==0))}updateHiddenRanges(){let e=!1;const t=[];let i=0,n=0,s=Number.MAX_VALUE,r=-1;const a=this._foldingModel.regions;for(;i<a.length;i++){if(!a.isCollapsed(i))continue;const l=a.getStartLineNumber(i)+1,c=a.getEndLineNumber(i);s<=l&&c<=r||(!e&&n<this._hiddenRanges.length&&this._hiddenRanges[n].startLineNumber===l&&this._hiddenRanges[n].endLineNumber===c?(t.push(this._hiddenRanges[n]),n++):(e=!0,t.push(new M(l,1,c,1))),s=l,r=c)}(this._hasLineChanges||e||n<this._hiddenRanges.length)&&this.applyHiddenRanges(t)}applyHiddenRanges(e){this._hiddenRanges=e,this._hasLineChanges=!1,this._updateEventEmitter.fire(e)}hasRanges(){return this._hiddenRanges.length>0}isHidden(e){return Xre(this._hiddenRanges,e)!==null}adjustSelections(e){let t=!1;const i=this._foldingModel.textModel;let n=null;const s=r=>((!n||!jje(r,n))&&(n=Xre(this._hiddenRanges,r)),n?n.startLineNumber-1:null);for(let r=0,a=e.length;r<a;r++){let l=e[r];const c=s(l.startLineNumber);c&&(l=l.setStartPosition(c,i.getLineMaxColumn(c)),t=!0);const u=s(l.endLineNumber);u&&(l=l.setEndPosition(u,i.getLineMaxColumn(u)),t=!0),e[r]=l}return t}dispose(){this.hiddenRanges.length>0&&(this._hiddenRanges=[],this._updateEventEmitter.fire(this._hiddenRanges)),this._foldingModelListener&&(this._foldingModelListener.dispose(),this._foldingModelListener=null)}}function jje(o,e){return o>=e.startLineNumber&&o<=e.endLineNumber}function Xre(o,e){const t=wD(o,i=>e<i.startLineNumber)-1;return t>=0&&o[t].endLineNumber>=e?o[t]:null}const qje=5e3,Kje="indent";class BY{constructor(e,t,i){this.editorModel=e,this.languageConfigurationService=t,this.foldingRangesLimit=i,this.id=Kje}dispose(){}compute(e){const t=this.languageConfigurationService.getLanguageConfiguration(this.editorModel.getLanguageId()).foldingRules,i=t&&!!t.offSide,n=t&&t.markers;return Promise.resolve(Zje(this.editorModel,i,n,this.foldingRangesLimit))}}let Gje=class{constructor(e){this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0,this._foldingRangesLimit=e}insertFirst(e,t,i){if(e>Gd||t>Gd)return;const n=this._length;this._startIndexes[n]=e,this._endIndexes[n]=t,this._length++,i<1e3&&(this._indentOccurrences[i]=(this._indentOccurrences[i]||0)+1)}toIndentRanges(e){const t=this._foldingRangesLimit.limit;if(this._length<=t){this._foldingRangesLimit.update(this._length,!1);const i=new Uint32Array(this._length),n=new Uint32Array(this._length);for(let s=this._length-1,r=0;s>=0;s--,r++)i[r]=this._startIndexes[s],n[r]=this._endIndexes[s];return new Nl(i,n)}else{this._foldingRangesLimit.update(this._length,t);let i=0,n=this._indentOccurrences.length;for(let l=0;l<this._indentOccurrences.length;l++){const c=this._indentOccurrences[l];if(c){if(c+i>t){n=l;break}i+=c}}const s=e.getOptions().tabSize,r=new Uint32Array(t),a=new Uint32Array(t);for(let l=this._length-1,c=0;l>=0;l--){const u=this._startIndexes[l],f=e.getLineContent(u),g=A4(f,s);(g<n||g===n&&i++<t)&&(r[c]=u,a[c]=this._endIndexes[l],c++)}return new Nl(r,a)}}};const Yje={limit:qje,update:()=>{}};function Zje(o,e,t,i=Yje){const n=o.getOptions().tabSize,s=new Gje(i);let r;t&&(r=new RegExp(`(${t.start.source})|(?:${t.end.source})`));const a=[],l=o.getLineCount()+1;a.push({indent:-1,endAbove:l,line:l});for(let c=o.getLineCount();c>0;c--){const u=o.getLineContent(c),f=A4(u,n);let g=a[a.length-1];if(f===-1){e&&(g.endAbove=c);continue}let p;if(r&&(p=u.match(r)))if(p[1]){let _=a.length-1;for(;_>0&&a[_].indent!==-2;)_--;if(_>0){a.length=_+1,g=a[_],s.insertFirst(c,g.line,f),g.line=c,g.indent=f,g.endAbove=c;continue}}else{a.push({indent:-2,endAbove:c,line:c});continue}if(g.indent>f){do a.pop(),g=a[a.length-1];while(g.indent>f);const _=g.endAbove-1;_-c>=1&&s.insertFirst(c,_,f)}g.indent===f?g.endAbove=c:a.push({indent:f,endAbove:c,line:c})}return s.toIndentRanges(o)}const Xje=W("editor.foldBackground",{light:Pt(Yp,.3),dark:Pt(Yp,.3),hcDark:null,hcLight:null},v("foldBackgroundBackground","Background color behind folded ranges. The color must not be opaque so as not to hide underlying decorations."),!0);W("editor.foldPlaceholderForeground",{light:"#808080",dark:"#808080",hcDark:null,hcLight:null},v("collapsedTextColor","Color of the collapsed text after the first line of a folded range."));W("editorGutter.foldingControlForeground",FA,v("editorGutter.foldingControlForeground","Color of the folding control in the editor gutter."));const bO=hn("folding-expanded",Se.chevronDown,v("foldingExpandedIcon","Icon for expanded ranges in the editor glyph margin.")),CO=hn("folding-collapsed",Se.chevronRight,v("foldingCollapsedIcon","Icon for collapsed ranges in the editor glyph margin.")),Qre=hn("folding-manual-collapsed",CO,v("foldingManualCollapedIcon","Icon for manually collapsed ranges in the editor glyph margin.")),Jre=hn("folding-manual-expanded",bO,v("foldingManualExpandedIcon","Icon for manually expanded ranges in the editor glyph margin.")),b9={color:Gn(Xje),position:1},hw=v("linesCollapsed","Click to expand the range."),ZR=v("linesExpanded","Click to collapse the range."),ks=class ks{constructor(e){this.editor=e,this.showFoldingControls="mouseover",this.showFoldingHighlights=!0}getDecorationOption(e,t,i){return t?ks.HIDDEN_RANGE_DECORATION:this.showFoldingControls==="never"?e?this.showFoldingHighlights?ks.NO_CONTROLS_COLLAPSED_HIGHLIGHTED_RANGE_DECORATION:ks.NO_CONTROLS_COLLAPSED_RANGE_DECORATION:ks.NO_CONTROLS_EXPANDED_RANGE_DECORATION:e?i?this.showFoldingHighlights?ks.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:ks.MANUALLY_COLLAPSED_VISUAL_DECORATION:this.showFoldingHighlights?ks.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:ks.COLLAPSED_VISUAL_DECORATION:this.showFoldingControls==="mouseover"?i?ks.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION:ks.EXPANDED_AUTO_HIDE_VISUAL_DECORATION:i?ks.MANUALLY_EXPANDED_VISUAL_DECORATION:ks.EXPANDED_VISUAL_DECORATION}changeDecorations(e){return this.editor.changeDecorations(e)}removeDecorations(e){this.editor.removeDecorations(e)}};ks.COLLAPSED_VISUAL_DECORATION=Dt.register({description:"folding-collapsed-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,linesDecorationsTooltip:hw,firstLineDecorationClassName:ut.asClassName(CO)}),ks.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=Dt.register({description:"folding-collapsed-highlighted-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",minimap:b9,isWholeLine:!0,linesDecorationsTooltip:hw,firstLineDecorationClassName:ut.asClassName(CO)}),ks.MANUALLY_COLLAPSED_VISUAL_DECORATION=Dt.register({description:"folding-manually-collapsed-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,linesDecorationsTooltip:hw,firstLineDecorationClassName:ut.asClassName(Qre)}),ks.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=Dt.register({description:"folding-manually-collapsed-highlighted-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",minimap:b9,isWholeLine:!0,linesDecorationsTooltip:hw,firstLineDecorationClassName:ut.asClassName(Qre)}),ks.NO_CONTROLS_COLLAPSED_RANGE_DECORATION=Dt.register({description:"folding-no-controls-range-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,linesDecorationsTooltip:hw}),ks.NO_CONTROLS_COLLAPSED_HIGHLIGHTED_RANGE_DECORATION=Dt.register({description:"folding-no-controls-range-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",minimap:b9,isWholeLine:!0,linesDecorationsTooltip:hw}),ks.EXPANDED_VISUAL_DECORATION=Dt.register({description:"folding-expanded-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+ut.asClassName(bO),linesDecorationsTooltip:ZR}),ks.EXPANDED_AUTO_HIDE_VISUAL_DECORATION=Dt.register({description:"folding-expanded-auto-hide-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:ut.asClassName(bO),linesDecorationsTooltip:ZR}),ks.MANUALLY_EXPANDED_VISUAL_DECORATION=Dt.register({description:"folding-manually-expanded-visual-decoration",stickiness:0,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+ut.asClassName(Jre),linesDecorationsTooltip:ZR}),ks.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION=Dt.register({description:"folding-manually-expanded-auto-hide-visual-decoration",stickiness:0,isWholeLine:!0,firstLineDecorationClassName:ut.asClassName(Jre),linesDecorationsTooltip:ZR}),ks.NO_CONTROLS_EXPANDED_RANGE_DECORATION=Dt.register({description:"folding-no-controls-range-decoration",stickiness:0,isWholeLine:!0}),ks.HIDDEN_RANGE_DECORATION=Dt.register({description:"folding-hidden-range-decoration",stickiness:1});let E$=ks;const Qje={},Jje="syntax";class WY{constructor(e,t,i,n,s){this.editorModel=e,this.providers=t,this.handleFoldingRangesChange=i,this.foldingRangesLimit=n,this.fallbackRangeProvider=s,this.id=Jje,this.disposables=new le,s&&this.disposables.add(s);for(const r of t)typeof r.onDidChange=="function"&&this.disposables.add(r.onDidChange(i))}compute(e){return eqe(this.providers,this.editorModel,e).then(t=>{var i;return t?iqe(t,this.foldingRangesLimit):((i=this.fallbackRangeProvider)==null?void 0:i.compute(e))??null})}dispose(){this.disposables.dispose()}}function eqe(o,e,t){let i=null;const n=o.map((s,r)=>Promise.resolve(s.provideFoldingRanges(e,Qje,t)).then(a=>{if(!t.isCancellationRequested&&Array.isArray(a)){Array.isArray(i)||(i=[]);const l=e.getLineCount();for(const c of a)c.start>0&&c.end>c.start&&c.end<=l&&i.push({start:c.start,end:c.end,rank:r,kind:c.kind})}},rs));return Promise.all(n).then(s=>i)}class tqe{constructor(e){this._startIndexes=[],this._endIndexes=[],this._nestingLevels=[],this._nestingLevelCounts=[],this._types=[],this._length=0,this._foldingRangesLimit=e}add(e,t,i,n){if(e>Gd||t>Gd)return;const s=this._length;this._startIndexes[s]=e,this._endIndexes[s]=t,this._nestingLevels[s]=n,this._types[s]=i,this._length++,n<30&&(this._nestingLevelCounts[n]=(this._nestingLevelCounts[n]||0)+1)}toIndentRanges(){const e=this._foldingRangesLimit.limit;if(this._length<=e){this._foldingRangesLimit.update(this._length,!1);const t=new Uint32Array(this._length),i=new Uint32Array(this._length);for(let n=0;n<this._length;n++)t[n]=this._startIndexes[n],i[n]=this._endIndexes[n];return new Nl(t,i,this._types)}else{this._foldingRangesLimit.update(this._length,e);let t=0,i=this._nestingLevelCounts.length;for(let a=0;a<this._nestingLevelCounts.length;a++){const l=this._nestingLevelCounts[a];if(l){if(l+t>e){i=a;break}t+=l}}const n=new Uint32Array(e),s=new Uint32Array(e),r=[];for(let a=0,l=0;a<this._length;a++){const c=this._nestingLevels[a];(c<i||c===i&&t++<e)&&(n[l]=this._startIndexes[a],s[l]=this._endIndexes[a],r[l]=this._types[a],l++)}return new Nl(n,s,r)}}}function iqe(o,e){const t=o.sort((r,a)=>{let l=r.start-a.start;return l===0&&(l=r.rank-a.rank),l}),i=new tqe(e);let n;const s=[];for(const r of t)if(!n)n=r,i.add(r.start,r.end,r.kind&&r.kind.value,s.length);else if(r.start>n.start)if(r.end<=n.end)s.push(n),n=r,i.add(r.start,r.end,r.kind&&r.kind.value,s.length);else{if(r.start>n.end){do n=s.pop();while(n&&r.start>n.end);n&&s.push(n),n=r}i.add(r.start,r.end,r.kind&&r.kind.value,s.length)}return i.toIndentRanges()}var nqe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Ex=function(o,e){return function(t,i){e(t,i,o)}},uv;const Fo=new Pe("foldingEnabled",!1);var Ab;let Xm=(Ab=class extends X{static get(e){return e.getContribution(uv.ID)}static getFoldingRangeProviders(e,t){var n;const i=e.foldingRangeProvider.ordered(t);return((n=uv._foldingRangeSelector)==null?void 0:n.call(uv,i,t))??i}constructor(e,t,i,n,s,r){super(),this.contextKeyService=t,this.languageConfigurationService=i,this.languageFeaturesService=r,this.localToDispose=this._register(new le),this.editor=e,this._foldingLimitReporter=new zpe(e);const a=this.editor.getOptions();this._isEnabled=a.get(43),this._useFoldingProviders=a.get(44)!=="indentation",this._unfoldOnClickAfterEndOfLine=a.get(48),this._restoringViewState=!1,this._currentModelHasFoldedImports=!1,this._foldingImportsByDefault=a.get(46),this.updateDebounceInfo=s.for(r.foldingRangeProvider,"Folding",{min:200}),this.foldingModel=null,this.hiddenRangeModel=null,this.rangeProvider=null,this.foldingRegionPromise=null,this.foldingModelPromise=null,this.updateScheduler=null,this.cursorChangedScheduler=null,this.mouseDownInfo=null,this.foldingDecorationProvider=new E$(e),this.foldingDecorationProvider.showFoldingControls=a.get(111),this.foldingDecorationProvider.showFoldingHighlights=a.get(45),this.foldingEnabled=Fo.bindTo(this.contextKeyService),this.foldingEnabled.set(this._isEnabled),this._register(this.editor.onDidChangeModel(()=>this.onModelChanged())),this._register(this.editor.onDidChangeConfiguration(l=>{if(l.hasChanged(43)&&(this._isEnabled=this.editor.getOptions().get(43),this.foldingEnabled.set(this._isEnabled),this.onModelChanged()),l.hasChanged(47)&&this.onModelChanged(),l.hasChanged(111)||l.hasChanged(45)){const c=this.editor.getOptions();this.foldingDecorationProvider.showFoldingControls=c.get(111),this.foldingDecorationProvider.showFoldingHighlights=c.get(45),this.triggerFoldingModelChanged()}l.hasChanged(44)&&(this._useFoldingProviders=this.editor.getOptions().get(44)!=="indentation",this.onFoldingStrategyChanged()),l.hasChanged(48)&&(this._unfoldOnClickAfterEndOfLine=this.editor.getOptions().get(48)),l.hasChanged(46)&&(this._foldingImportsByDefault=this.editor.getOptions().get(46))})),this.onModelChanged()}saveViewState(){const e=this.editor.getModel();if(!e||!this._isEnabled||e.isTooLargeForTokenization())return{};if(this.foldingModel){const t=this.foldingModel.getMemento(),i=this.rangeProvider?this.rangeProvider.id:void 0;return{collapsedRegions:t,lineCount:e.getLineCount(),provider:i,foldedImports:this._currentModelHasFoldedImports}}}restoreViewState(e){const t=this.editor.getModel();if(!(!t||!this._isEnabled||t.isTooLargeForTokenization()||!this.hiddenRangeModel)&&e&&(this._currentModelHasFoldedImports=!!e.foldedImports,e.collapsedRegions&&e.collapsedRegions.length>0&&this.foldingModel)){this._restoringViewState=!0;try{this.foldingModel.applyMemento(e.collapsedRegions)}finally{this._restoringViewState=!1}}}onModelChanged(){this.localToDispose.clear();const e=this.editor.getModel();!this._isEnabled||!e||e.isTooLargeForTokenization()||(this._currentModelHasFoldedImports=!1,this.foldingModel=new Bje(e,this.foldingDecorationProvider),this.localToDispose.add(this.foldingModel),this.hiddenRangeModel=new $je(this.foldingModel),this.localToDispose.add(this.hiddenRangeModel),this.localToDispose.add(this.hiddenRangeModel.onDidChange(t=>this.onHiddenRangesChanges(t))),this.updateScheduler=new xc(this.updateDebounceInfo.get(e)),this.cursorChangedScheduler=new Oi(()=>this.revealCursor(),200),this.localToDispose.add(this.cursorChangedScheduler),this.localToDispose.add(this.languageFeaturesService.foldingRangeProvider.onDidChange(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelLanguageConfiguration(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelContent(t=>this.onDidChangeModelContent(t))),this.localToDispose.add(this.editor.onDidChangeCursorPosition(()=>this.onCursorPositionChanged())),this.localToDispose.add(this.editor.onMouseDown(t=>this.onEditorMouseDown(t))),this.localToDispose.add(this.editor.onMouseUp(t=>this.onEditorMouseUp(t))),this.localToDispose.add({dispose:()=>{var t,i;this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),(t=this.updateScheduler)==null||t.cancel(),this.updateScheduler=null,this.foldingModel=null,this.foldingModelPromise=null,this.hiddenRangeModel=null,this.cursorChangedScheduler=null,(i=this.rangeProvider)==null||i.dispose(),this.rangeProvider=null}}),this.triggerFoldingModelChanged())}onFoldingStrategyChanged(){var e;(e=this.rangeProvider)==null||e.dispose(),this.rangeProvider=null,this.triggerFoldingModelChanged()}getRangeProvider(e){if(this.rangeProvider)return this.rangeProvider;const t=new BY(e,this.languageConfigurationService,this._foldingLimitReporter);if(this.rangeProvider=t,this._useFoldingProviders&&this.foldingModel){const i=uv.getFoldingRangeProviders(this.languageFeaturesService,e);i.length>0&&(this.rangeProvider=new WY(e,i,()=>this.triggerFoldingModelChanged(),this._foldingLimitReporter,t))}return this.rangeProvider}getFoldingModel(){return this.foldingModelPromise}onDidChangeModelContent(e){var t;(t=this.hiddenRangeModel)==null||t.notifyChangeModelContent(e),this.triggerFoldingModelChanged()}triggerFoldingModelChanged(){this.updateScheduler&&(this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.foldingModelPromise=this.updateScheduler.trigger(()=>{const e=this.foldingModel;if(!e)return null;const t=new uo,i=this.getRangeProvider(e.textModel),n=this.foldingRegionPromise=Gs(s=>i.compute(s));return n.then(s=>{if(s&&n===this.foldingRegionPromise){let r;if(this._foldingImportsByDefault&&!this._currentModelHasFoldedImports){const c=s.setCollapsedAllOfType(Pm.Imports.value,!0);c&&(r=Cu.capture(this.editor),this._currentModelHasFoldedImports=c)}const a=this.editor.getSelections();e.update(s,sqe(a)),r==null||r.restore(this.editor);const l=this.updateDebounceInfo.update(e.textModel,t.elapsed());this.updateScheduler&&(this.updateScheduler.defaultDelay=l)}return e})}).then(void 0,e=>(wt(e),null)))}onHiddenRangesChanges(e){if(this.hiddenRangeModel&&e.length&&!this._restoringViewState){const t=this.editor.getSelections();t&&this.hiddenRangeModel.adjustSelections(t)&&this.editor.setSelections(t)}this.editor.setHiddenAreas(e,this)}onCursorPositionChanged(){this.hiddenRangeModel&&this.hiddenRangeModel.hasRanges()&&this.cursorChangedScheduler.schedule()}revealCursor(){const e=this.getFoldingModel();e&&e.then(t=>{if(t){const i=this.editor.getSelections();if(i&&i.length>0){const n=[];for(const s of i){const r=s.selectionStartLineNumber;this.hiddenRangeModel&&this.hiddenRangeModel.isHidden(r)&&n.push(...t.getAllRegionsAtLine(r,a=>a.isCollapsed&&r>a.startLineNumber))}n.length&&(t.toggleCollapseState(n),this.reveal(i[0].getPosition()))}}}).then(void 0,wt)}onEditorMouseDown(e){if(this.mouseDownInfo=null,!this.hiddenRangeModel||!e.target||!e.target.range||!e.event.leftButton&&!e.event.middleButton)return;const t=e.target.range;let i=!1;switch(e.target.type){case 4:{const n=e.target.detail,s=e.target.element.offsetLeft;if(n.offsetX-s<4)return;i=!0;break}case 7:{if(this._unfoldOnClickAfterEndOfLine&&this.hiddenRangeModel.hasRanges()&&!e.target.detail.isAfterLines)break;return}case 6:{if(this.hiddenRangeModel.hasRanges()){const n=this.editor.getModel();if(n&&t.startColumn===n.getLineMaxColumn(t.startLineNumber))break}return}default:return}this.mouseDownInfo={lineNumber:t.startLineNumber,iconClicked:i}}onEditorMouseUp(e){const t=this.foldingModel;if(!t||!this.mouseDownInfo||!e.target)return;const i=this.mouseDownInfo.lineNumber,n=this.mouseDownInfo.iconClicked,s=e.target.range;if(!s||s.startLineNumber!==i)return;if(n){if(e.target.type!==4)return}else{const a=this.editor.getModel();if(!a||s.startColumn!==a.getLineMaxColumn(i))return}const r=t.getRegionAtLine(i);if(r&&r.startLineNumber===i){const a=r.isCollapsed;if(n||a){const l=e.event.altKey;let c=[];if(l){const u=g=>!g.containedBy(r)&&!r.containedBy(g),f=t.getRegionsInside(null,u);for(const g of f)g.isCollapsed&&c.push(g);c.length===0&&(c=f)}else{const u=e.event.middleButton||e.event.shiftKey;if(u)for(const f of t.getRegionsInside(r))f.isCollapsed===a&&c.push(f);(a||!u||c.length===0)&&c.push(r)}t.toggleCollapseState(c),this.reveal({lineNumber:i,column:1})}}}reveal(e){this.editor.revealPositionInCenterIfOutsideViewport(e,0)}},uv=Ab,Ab.ID="editor.contrib.folding",Ab);Xm=uv=nqe([Ex(1,ht),Ex(2,On),Ex(3,fs),Ex(4,Yl),Ex(5,Ue)],Xm);class zpe{constructor(e){this.editor=e,this._onDidChange=new Y,this._computed=0,this._limited=!1}get limit(){return this.editor.getOptions().get(47)}update(e,t){(e!==this._computed||t!==this._limited)&&(this._computed=e,this._limited=t,this._onDidChange.fire())}}class nr extends Ve{runEditorCommand(e,t,i){const n=e.get(On),s=Xm.get(t);if(!s)return;const r=s.getFoldingModel();if(r)return this.reportTelemetry(e,t),r.then(a=>{if(a){this.invoke(s,a,t,i,n);const l=t.getSelection();l&&s.reveal(l.getStartPosition())}})}getSelectedLines(e){const t=e.getSelections();return t?t.map(i=>i.startLineNumber):[]}getLineNumbers(e,t){return e&&e.selectionLines?e.selectionLines.map(i=>i+1):this.getSelectedLines(t)}run(e,t){}}function sqe(o){return!o||o.length===0?{startsInside:()=>!1}:{startsInside(e,t){for(const i of o){const n=i.startLineNumber;if(n>=e&&n<=t)return!0}return!1}}}function Upe(o){if(!yr(o)){if(!ao(o))return!1;const e=o;if(!yr(e.levels)&&!Rm(e.levels)||!yr(e.direction)&&!xa(e.direction)||!yr(e.selectionLines)&&(!Array.isArray(e.selectionLines)||!e.selectionLines.every(Rm)))return!1}return!0}class oqe extends nr{constructor(){super({id:"editor.unfold",label:v("unfoldAction.label","Unfold"),alias:"Unfold",precondition:Fo,kbOpts:{kbExpr:B.editorTextFocus,primary:3166,mac:{primary:2654},weight:100},metadata:{description:"Unfold the content in the editor",args:[{name:"Unfold editor argument",description:`Property-value pairs that can be passed through this argument:
						* 'levels': Number of levels to unfold. If not set, defaults to 1.
						* 'direction': If 'up', unfold given number of levels up otherwise unfolds down.
						* 'selectionLines': Array of the start lines (0-based) of the editor selections to apply the unfold action to. If not set, the active selection(s) will be used.
						`,constraint:Upe,schema:{type:"object",properties:{levels:{type:"number",default:1},direction:{type:"string",enum:["up","down"],default:"down"},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,i,n){const s=n&&n.levels||1,r=this.getLineNumbers(n,i);n&&n.direction==="up"?Hpe(t,!1,s,r):u0(t,!1,s,r)}}class rqe extends nr{constructor(){super({id:"editor.unfoldRecursively",label:v("unFoldRecursivelyAction.label","Unfold Recursively"),alias:"Unfold Recursively",precondition:Fo,kbOpts:{kbExpr:B.editorTextFocus,primary:Is(2089,2142),weight:100}})}invoke(e,t,i,n){u0(t,!1,Number.MAX_VALUE,this.getSelectedLines(i))}}class aqe extends nr{constructor(){super({id:"editor.fold",label:v("foldAction.label","Fold"),alias:"Fold",precondition:Fo,kbOpts:{kbExpr:B.editorTextFocus,primary:3164,mac:{primary:2652},weight:100},metadata:{description:"Fold the content in the editor",args:[{name:"Fold editor argument",description:`Property-value pairs that can be passed through this argument:
							* 'levels': Number of levels to fold.
							* 'direction': If 'up', folds given number of levels up otherwise folds down.
							* 'selectionLines': Array of the start lines (0-based) of the editor selections to apply the fold action to. If not set, the active selection(s) will be used.
							If no levels or direction is set, folds the region at the locations or if already collapsed, the first uncollapsed parent instead.
						`,constraint:Upe,schema:{type:"object",properties:{levels:{type:"number"},direction:{type:"string",enum:["up","down"]},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,i,n){const s=this.getLineNumbers(n,i),r=n&&n.levels,a=n&&n.direction;typeof r!="number"&&typeof a!="string"?Wje(t,!0,s):a==="up"?Hpe(t,!0,r||1,s):u0(t,!0,r||1,s)}}class lqe extends nr{constructor(){super({id:"editor.toggleFold",label:v("toggleFoldAction.label","Toggle Fold"),alias:"Toggle Fold",precondition:Fo,kbOpts:{kbExpr:B.editorTextFocus,primary:Is(2089,2090),weight:100}})}invoke(e,t,i){const n=this.getSelectedLines(i);PY(t,1,n)}}class cqe extends nr{constructor(){super({id:"editor.foldRecursively",label:v("foldRecursivelyAction.label","Fold Recursively"),alias:"Fold Recursively",precondition:Fo,kbOpts:{kbExpr:B.editorTextFocus,primary:Is(2089,2140),weight:100}})}invoke(e,t,i){const n=this.getSelectedLines(i);u0(t,!0,Number.MAX_VALUE,n)}}class dqe extends nr{constructor(){super({id:"editor.toggleFoldRecursively",label:v("toggleFoldRecursivelyAction.label","Toggle Fold Recursively"),alias:"Toggle Fold Recursively",precondition:Fo,kbOpts:{kbExpr:B.editorTextFocus,primary:Is(2089,3114),weight:100}})}invoke(e,t,i){const n=this.getSelectedLines(i);PY(t,Number.MAX_VALUE,n)}}class uqe extends nr{constructor(){super({id:"editor.foldAllBlockComments",label:v("foldAllBlockComments.label","Fold All Block Comments"),alias:"Fold All Block Comments",precondition:Fo,kbOpts:{kbExpr:B.editorTextFocus,primary:Is(2089,2138),weight:100}})}invoke(e,t,i,n,s){if(t.regions.hasTypes())FY(t,Pm.Comment.value,!0);else{const r=i.getModel();if(!r)return;const a=s.getLanguageConfiguration(r.getLanguageId()).comments;if(a&&a.blockCommentStartToken){const l=new RegExp("^\\s*"+Ul(a.blockCommentStartToken));OY(t,l,!0)}}}}class hqe extends nr{constructor(){super({id:"editor.foldAllMarkerRegions",label:v("foldAllMarkerRegions.label","Fold All Regions"),alias:"Fold All Regions",precondition:Fo,kbOpts:{kbExpr:B.editorTextFocus,primary:Is(2089,2077),weight:100}})}invoke(e,t,i,n,s){if(t.regions.hasTypes())FY(t,Pm.Region.value,!0);else{const r=i.getModel();if(!r)return;const a=s.getLanguageConfiguration(r.getLanguageId()).foldingRules;if(a&&a.markers&&a.markers.start){const l=new RegExp(a.markers.start);OY(t,l,!0)}}}}class fqe extends nr{constructor(){super({id:"editor.unfoldAllMarkerRegions",label:v("unfoldAllMarkerRegions.label","Unfold All Regions"),alias:"Unfold All Regions",precondition:Fo,kbOpts:{kbExpr:B.editorTextFocus,primary:Is(2089,2078),weight:100}})}invoke(e,t,i,n,s){if(t.regions.hasTypes())FY(t,Pm.Region.value,!1);else{const r=i.getModel();if(!r)return;const a=s.getLanguageConfiguration(r.getLanguageId()).foldingRules;if(a&&a.markers&&a.markers.start){const l=new RegExp(a.markers.start);OY(t,l,!1)}}}}class gqe extends nr{constructor(){super({id:"editor.foldAllExcept",label:v("foldAllExcept.label","Fold All Except Selected"),alias:"Fold All Except Selected",precondition:Fo,kbOpts:{kbExpr:B.editorTextFocus,primary:Is(2089,2136),weight:100}})}invoke(e,t,i){const n=this.getSelectedLines(i);Vpe(t,!0,n)}}class pqe extends nr{constructor(){super({id:"editor.unfoldAllExcept",label:v("unfoldAllExcept.label","Unfold All Except Selected"),alias:"Unfold All Except Selected",precondition:Fo,kbOpts:{kbExpr:B.editorTextFocus,primary:Is(2089,2134),weight:100}})}invoke(e,t,i){const n=this.getSelectedLines(i);Vpe(t,!1,n)}}class mqe extends nr{constructor(){super({id:"editor.foldAll",label:v("foldAllAction.label","Fold All"),alias:"Fold All",precondition:Fo,kbOpts:{kbExpr:B.editorTextFocus,primary:Is(2089,2069),weight:100}})}invoke(e,t,i){u0(t,!0)}}class _qe extends nr{constructor(){super({id:"editor.unfoldAll",label:v("unfoldAllAction.label","Unfold All"),alias:"Unfold All",precondition:Fo,kbOpts:{kbExpr:B.editorTextFocus,primary:Is(2089,2088),weight:100}})}invoke(e,t,i){u0(t,!1)}}const c1=class c1 extends nr{getFoldingLevel(){return parseInt(this.id.substr(c1.ID_PREFIX.length))}invoke(e,t,i){Hje(t,this.getFoldingLevel(),!0,this.getSelectedLines(i))}};c1.ID_PREFIX="editor.foldLevel",c1.ID=e=>c1.ID_PREFIX+e;let yO=c1;class vqe extends nr{constructor(){super({id:"editor.gotoParentFold",label:v("gotoParentFold.label","Go to Parent Fold"),alias:"Go to Parent Fold",precondition:Fo,kbOpts:{kbExpr:B.editorTextFocus,weight:100}})}invoke(e,t,i){const n=this.getSelectedLines(i);if(n.length>0){const s=Vje(n[0],t);s!==null&&i.setSelection({startLineNumber:s,startColumn:1,endLineNumber:s,endColumn:1})}}}class bqe extends nr{constructor(){super({id:"editor.gotoPreviousFold",label:v("gotoPreviousFold.label","Go to Previous Folding Range"),alias:"Go to Previous Folding Range",precondition:Fo,kbOpts:{kbExpr:B.editorTextFocus,weight:100}})}invoke(e,t,i){const n=this.getSelectedLines(i);if(n.length>0){const s=zje(n[0],t);s!==null&&i.setSelection({startLineNumber:s,startColumn:1,endLineNumber:s,endColumn:1})}}}class Cqe extends nr{constructor(){super({id:"editor.gotoNextFold",label:v("gotoNextFold.label","Go to Next Folding Range"),alias:"Go to Next Folding Range",precondition:Fo,kbOpts:{kbExpr:B.editorTextFocus,weight:100}})}invoke(e,t,i){const n=this.getSelectedLines(i);if(n.length>0){const s=Uje(n[0],t);s!==null&&i.setSelection({startLineNumber:s,startColumn:1,endLineNumber:s,endColumn:1})}}}class yqe extends nr{constructor(){super({id:"editor.createFoldingRangeFromSelection",label:v("createManualFoldRange.label","Create Folding Range from Selection"),alias:"Create Folding Range from Selection",precondition:Fo,kbOpts:{kbExpr:B.editorTextFocus,primary:Is(2089,2135),weight:100}})}invoke(e,t,i){var r;const n=[],s=i.getSelections();if(s){for(const a of s){let l=a.endLineNumber;a.endColumn===1&&--l,l>a.startLineNumber&&(n.push({startLineNumber:a.startLineNumber,endLineNumber:l,type:void 0,isCollapsed:!0,source:1}),i.setSelection({startLineNumber:a.startLineNumber,startColumn:1,endLineNumber:a.startLineNumber,endColumn:1}))}if(n.length>0){n.sort((l,c)=>l.startLineNumber-c.startLineNumber);const a=Nl.sanitizeAndMerge(t.regions,n,(r=i.getModel())==null?void 0:r.getLineCount());t.updatePost(Nl.fromFoldRanges(a))}}}}class wqe extends nr{constructor(){super({id:"editor.removeManualFoldingRanges",label:v("removeManualFoldingRanges.label","Remove Manual Folding Ranges"),alias:"Remove Manual Folding Ranges",precondition:Fo,kbOpts:{kbExpr:B.editorTextFocus,primary:Is(2089,2137),weight:100}})}invoke(e,t,i){const n=i.getSelections();if(n){const s=[];for(const r of n){const{startLineNumber:a,endLineNumber:l}=r;s.push(l>=a?{startLineNumber:a,endLineNumber:l}:{endLineNumber:l,startLineNumber:a})}t.removeManualRanges(s),e.triggerFoldingModelChanged()}}}oi(Xm.ID,Xm,0);be(oqe);be(rqe);be(aqe);be(cqe);be(dqe);be(mqe);be(_qe);be(uqe);be(hqe);be(fqe);be(gqe);be(pqe);be(lqe);be(vqe);be(bqe);be(Cqe);be(yqe);be(wqe);for(let o=1;o<=7;o++)VEe(new yO({id:yO.ID(o),label:v("foldLevelAction.label","Fold Level {0}",o),alias:`Fold Level ${o}`,precondition:Fo,kbOpts:{kbExpr:B.editorTextFocus,primary:Is(2089,2048|21+o),weight:100}}));ii.registerCommand("_executeFoldingRangeProvider",async function(o,...e){const[t]=e;if(!(t instanceof st))throw yc();const i=o.get(Ue),n=o.get(un).getModel(t);if(!n)throw yc();const s=o.get(Ht);if(!s.getValue("editor.folding",{resource:t}))return[];const r=o.get(On),a=s.getValue("editor.foldingStrategy",{resource:t}),l={get limit(){return s.getValue("editor.foldingMaximumRegions",{resource:t})},update:(p,_)=>{}},c=new BY(n,r,l);let u=c;if(a!=="indentation"){const p=Xm.getFoldingRangeProviders(i,n);p.length&&(u=new WY(n,p,()=>{},l,c))}const f=await u.compute(Mt.None),g=[];try{if(f)for(let p=0;p<f.length;p++){const _=f.getType(p);g.push({start:f.getStartLineNumber(p),end:f.getEndLineNumber(p),kind:_?Pm.fromValue(_):void 0})}return g}finally{u.dispose()}});class Sqe extends Ve{constructor(){super({id:"editor.action.fontZoomIn",label:v("EditorFontZoomIn.label","Increase Editor Font Size"),alias:"Increase Editor Font Size",precondition:void 0})}run(e,t){mc.setZoomLevel(mc.getZoomLevel()+1)}}class Lqe extends Ve{constructor(){super({id:"editor.action.fontZoomOut",label:v("EditorFontZoomOut.label","Decrease Editor Font Size"),alias:"Decrease Editor Font Size",precondition:void 0})}run(e,t){mc.setZoomLevel(mc.getZoomLevel()-1)}}class xqe extends Ve{constructor(){super({id:"editor.action.fontZoomReset",label:v("EditorFontZoomReset.label","Reset Editor Font Size"),alias:"Reset Editor Font Size",precondition:void 0})}run(e,t){mc.setZoomLevel(0)}}be(Sqe);be(Lqe);be(xqe);var $pe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Mk=function(o,e){return function(t,i){e(t,i,o)}},U1;let wO=(U1=class{constructor(e,t,i,n){this._editor=e,this._languageFeaturesService=t,this._workerService=i,this._accessibilitySignalService=n,this._disposables=new le,this._sessionDisposables=new le,this._disposables.add(t.onTypeFormattingEditProvider.onDidChange(this._update,this)),this._disposables.add(e.onDidChangeModel(()=>this._update())),this._disposables.add(e.onDidChangeModelLanguage(()=>this._update())),this._disposables.add(e.onDidChangeConfiguration(s=>{s.hasChanged(56)&&this._update()})),this._update()}dispose(){this._disposables.dispose(),this._sessionDisposables.dispose()}_update(){if(this._sessionDisposables.clear(),!this._editor.getOption(56)||!this._editor.hasModel())return;const e=this._editor.getModel(),[t]=this._languageFeaturesService.onTypeFormattingEditProvider.ordered(e);if(!t||!t.autoFormatTriggerCharacters)return;const i=new DA;for(const n of t.autoFormatTriggerCharacters)i.add(n.charCodeAt(0));this._sessionDisposables.add(this._editor.onDidType(n=>{const s=n.charCodeAt(n.length-1);i.has(s)&&this._trigger(String.fromCharCode(s))}))}_trigger(e){if(!this._editor.hasModel()||this._editor.getSelections().length>1||!this._editor.getSelection().isEmpty())return;const t=this._editor.getModel(),i=this._editor.getPosition(),n=new An,s=this._editor.onDidChangeModelContent(r=>{if(r.isFlush){n.cancel(),s.dispose();return}for(let a=0,l=r.changes.length;a<l;a++)if(r.changes[a].range.endLineNumber<=i.lineNumber){n.cancel(),s.dispose();return}});Gfe(this._workerService,this._languageFeaturesService,t,i,e,t.getFormattingOptions(),n.token).then(r=>{n.token.isCancellationRequested||wr(r)&&(this._accessibilitySignalService.playSignal(Tl.format,{userGesture:!1}),SS.execute(this._editor,r,!0))}).finally(()=>{s.dispose()})}},U1.ID="editor.contrib.autoFormat",U1);wO=$pe([Mk(1,Ue),Mk(2,Aa),Mk(3,o_)],wO);var $1;let SO=($1=class{constructor(e,t,i){this.editor=e,this._languageFeaturesService=t,this._instantiationService=i,this._callOnDispose=new le,this._callOnModel=new le,this._callOnDispose.add(e.onDidChangeConfiguration(()=>this._update())),this._callOnDispose.add(e.onDidChangeModel(()=>this._update())),this._callOnDispose.add(e.onDidChangeModelLanguage(()=>this._update())),this._callOnDispose.add(t.documentRangeFormattingEditProvider.onDidChange(this._update,this))}dispose(){this._callOnDispose.dispose(),this._callOnModel.dispose()}_update(){this._callOnModel.clear(),this.editor.getOption(55)&&this.editor.hasModel()&&this._languageFeaturesService.documentRangeFormattingEditProvider.has(this.editor.getModel())&&this._callOnModel.add(this.editor.onDidPaste(({range:e})=>this._trigger(e)))}_trigger(e){this.editor.hasModel()&&(this.editor.getSelections().length>1||this._instantiationService.invokeFunction(Kfe,this.editor,e,2,iu.None,Mt.None,!1).catch(wt))}},$1.ID="editor.contrib.formatOnPaste",$1);SO=$pe([Mk(1,Ue),Mk(2,nt)],SO);class kqe extends Ve{constructor(){super({id:"editor.action.formatDocument",label:v("formatDocument.label","Format Document"),alias:"Format Document",precondition:de.and(B.notInCompositeEditor,B.writable,B.hasDocumentFormattingProvider),kbOpts:{kbExpr:B.editorTextFocus,primary:1572,linux:{primary:3111},weight:100},contextMenuOpts:{group:"1_modification",order:1.3}})}async run(e,t){if(t.hasModel()){const i=e.get(nt);await e.get(i_).showWhile(i.invokeFunction(AVe,t,1,iu.None,Mt.None,!0),250)}}}class Dqe extends Ve{constructor(){super({id:"editor.action.formatSelection",label:v("formatSelection.label","Format Selection"),alias:"Format Selection",precondition:de.and(B.writable,B.hasDocumentSelectionFormattingProvider),kbOpts:{kbExpr:B.editorTextFocus,primary:Is(2089,2084),weight:100},contextMenuOpts:{when:B.hasNonEmptySelection,group:"1_modification",order:1.31}})}async run(e,t){if(!t.hasModel())return;const i=e.get(nt),n=t.getModel(),s=t.getSelections().map(a=>a.isEmpty()?new M(a.startLineNumber,1,a.startLineNumber,n.getLineMaxColumn(a.startLineNumber)):a);await e.get(i_).showWhile(i.invokeFunction(Kfe,t,s,1,iu.None,Mt.None,!0),250)}}oi(wO.ID,wO,2);oi(SO.ID,SO,2);be(kqe);be(Dqe);ii.registerCommand("editor.action.format",async o=>{const e=o.get(hi).getFocusedCodeEditor();if(!e||!e.hasModel())return;const t=o.get(nn);e.getSelection().isEmpty()?await t.executeCommand("editor.action.formatDocument"):await t.executeCommand("editor.action.formatSelection")});var Eqe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},C9=function(o,e){return function(t,i){e(t,i,o)}};class Kw{remove(){var e;(e=this.parent)==null||e.children.delete(this.id)}static findId(e,t){let i;typeof e=="string"?i=`${t.id}/${e}`:(i=`${t.id}/${e.name}`,t.children.get(i)!==void 0&&(i=`${t.id}/${e.name}_${e.range.startLineNumber}_${e.range.startColumn}`));let n=i;for(let s=0;t.children.get(n)!==void 0;s++)n=`${i}_${s}`;return n}static empty(e){return e.children.size===0}}class I$ extends Kw{constructor(e,t,i){super(),this.id=e,this.parent=t,this.symbol=i,this.children=new Map}}class jpe extends Kw{constructor(e,t,i,n){super(),this.id=e,this.parent=t,this.label=i,this.order=n,this.children=new Map}}class Uf extends Kw{static create(e,t,i){const n=new An(i),s=new Uf(t.uri),r=e.ordered(t),a=r.map((c,u)=>{const f=Kw.findId(`provider_${u}`,s),g=new jpe(f,s,c.displayName??"Unknown Outline Provider",u);return Promise.resolve(c.provideDocumentSymbols(t,n.token)).then(p=>{for(const _ of p||[])Uf._makeOutlineElement(_,g);return g},p=>(rs(p),g)).then(p=>{Kw.empty(p)?p.remove():s._groups.set(f,p)})}),l=e.onDidChange(()=>{const c=e.ordered(t);En(c,r)||n.cancel()});return Promise.all(a).then(()=>n.token.isCancellationRequested&&!i.isCancellationRequested?Uf.create(e,t,i):s._compact()).finally(()=>{n.dispose(),l.dispose(),n.dispose()})}static _makeOutlineElement(e,t){const i=Kw.findId(e,t),n=new I$(i,t,e);if(e.children)for(const s of e.children)Uf._makeOutlineElement(s,n);t.children.set(n.id,n)}constructor(e){super(),this.uri=e,this.id="root",this.parent=void 0,this._groups=new Map,this.children=new Map,this.id="root",this.parent=void 0}_compact(){let e=0;for(const[t,i]of this._groups)i.children.size===0?this._groups.delete(t):e+=1;if(e!==1)this.children=this._groups;else{const t=ti.first(this._groups.values());for(const[,i]of t.children)i.parent=this,this.children.set(i.id,i)}return this}getTopLevelSymbols(){const e=[];for(const t of this.children.values())t instanceof I$?e.push(t.symbol):e.push(...ti.map(t.children.values(),i=>i.symbol));return e.sort((t,i)=>M.compareRangesUsingStarts(t.range,i.range))}asListOfDocumentSymbols(){const e=this.getTopLevelSymbols(),t=[];return Uf._flattenDocumentSymbols(t,e,""),t.sort((i,n)=>G.compare(M.getStartPosition(i.range),M.getStartPosition(n.range))||G.compare(M.getEndPosition(n.range),M.getEndPosition(i.range)))}static _flattenDocumentSymbols(e,t,i){for(const n of t)e.push({kind:n.kind,tags:n.tags,name:n.name,detail:n.detail,containerName:n.containerName||i,range:n.range,selectionRange:n.selectionRange,children:void 0}),n.children&&Uf._flattenDocumentSymbols(e,n.children,n.name)}}const NI=Gt("IOutlineModelService");let T$=class{constructor(e,t,i){this._languageFeaturesService=e,this._disposables=new le,this._cache=new $h(10,.7),this._debounceInformation=t.for(e.documentSymbolProvider,"DocumentSymbols",{min:350}),this._disposables.add(i.onModelRemoved(n=>{this._cache.delete(n.id)}))}dispose(){this._disposables.dispose()}async getOrCreate(e,t){const i=this._languageFeaturesService.documentSymbolProvider,n=i.ordered(e);let s=this._cache.get(e.id);if(!s||s.versionId!==e.getVersionId()||!En(s.provider,n)){const a=new An;s={versionId:e.getVersionId(),provider:n,promiseCnt:0,source:a,promise:Uf.create(i,e,a.token),model:void 0},this._cache.set(e.id,s);const l=Date.now();s.promise.then(c=>{s.model=c,this._debounceInformation.update(e,Date.now()-l)}).catch(c=>{this._cache.delete(e.id)})}if(s.model)return s.model;s.promiseCnt+=1;const r=t.onCancellationRequested(()=>{--s.promiseCnt===0&&(s.source.cancel(),this._cache.delete(e.id))});try{return await s.promise}finally{r.dispose()}}};T$=Eqe([C9(0,Ue),C9(1,Yl),C9(2,un)],T$);ei(NI,T$,1);ii.registerCommand("_executeDocumentSymbolProvider",async function(o,...e){const[t]=e;ui(st.isUri(t));const i=o.get(NI),s=await o.get(Na).createModelReference(t);try{return(await i.getOrCreate(s.object.textEditorModel,Mt.None)).getTopLevelSymbols()}finally{s.dispose()}});const rh=class rh extends X{constructor(e,t){super(),this.contextKeyService=e,this.model=t,this.inlineCompletionVisible=rh.inlineSuggestionVisible.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentation=rh.inlineSuggestionHasIndentation.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentationLessThanTabSize=rh.inlineSuggestionHasIndentationLessThanTabSize.bindTo(this.contextKeyService),this.suppressSuggestions=rh.suppressSuggestions.bindTo(this.contextKeyService),this._register(bt(i=>{const n=this.model.read(i),s=n==null?void 0:n.state.read(i),r=!!(s!=null&&s.inlineCompletion)&&(s==null?void 0:s.primaryGhostText)!==void 0&&!(s!=null&&s.primaryGhostText.isEmpty());this.inlineCompletionVisible.set(r),s!=null&&s.primaryGhostText&&(s!=null&&s.inlineCompletion)&&this.suppressSuggestions.set(s.inlineCompletion.inlineCompletion.source.inlineCompletions.suppressSuggestions)})),this._register(bt(i=>{const n=this.model.read(i);let s=!1,r=!0;const a=n==null?void 0:n.primaryGhostText.read(i);if(n!=null&&n.selectedSuggestItem&&a&&a.parts.length>0){const{column:l,lines:c}=a.parts[0],u=c[0],f=n.textModel.getLineIndentColumn(a.lineNumber);if(l<=f){let p=Sr(u);p===-1&&(p=u.length-1),s=p>0;const _=n.textModel.getOptions().tabSize;r=Fs.visibleColumnFromColumn(u,p+1,_)<_}}this.inlineCompletionSuggestsIndentation.set(s),this.inlineCompletionSuggestsIndentationLessThanTabSize.set(r)}))}};rh.inlineSuggestionVisible=new Pe("inlineSuggestionVisible",!1,v("inlineSuggestionVisible","Whether an inline suggestion is visible")),rh.inlineSuggestionHasIndentation=new Pe("inlineSuggestionHasIndentation",!1,v("inlineSuggestionHasIndentation","Whether the inline suggestion starts with whitespace")),rh.inlineSuggestionHasIndentationLessThanTabSize=new Pe("inlineSuggestionHasIndentationLessThanTabSize",!0,v("inlineSuggestionHasIndentationLessThanTabSize","Whether the inline suggestion starts with whitespace that is less than what would be inserted by tab")),rh.suppressSuggestions=new Pe("inlineSuggestionSuppressSuggestions",void 0,v("suppressSuggestions","Whether suggestions should be suppressed for the current suggestion"));let ol=rh;function Iqe(o){const e=new le,t=e.add(wce());return e.add(bt(i=>{t.setStyle(o.read(i))})),e}class SE{constructor(e,t){this.lineNumber=e,this.parts=t}equals(e){return this.lineNumber===e.lineNumber&&this.parts.length===e.parts.length&&this.parts.every((t,i)=>t.equals(e.parts[i]))}renderForScreenReader(e){if(this.parts.length===0)return"";const t=this.parts[this.parts.length-1],i=e.substr(0,t.column-1);return new nK([...this.parts.map(s=>new Mh(M.fromPositions(new G(1,s.column)),s.lines.join(`
`)))]).applyToString(i).substring(this.parts[0].column-1)}isEmpty(){return this.parts.every(e=>e.lines.length===0)}get lineCount(){return 1+this.parts.reduce((e,t)=>e+t.lines.length-1,0)}}class LO{constructor(e,t,i){this.column=e,this.text=t,this.preview=i,this.lines=zh(this.text)}equals(e){return this.column===e.column&&this.lines.length===e.lines.length&&this.lines.every((t,i)=>t===e.lines[i])}}class N${constructor(e,t,i,n=0){this.lineNumber=e,this.columnRange=t,this.text=i,this.additionalReservedLineCount=n,this.parts=[new LO(this.columnRange.endColumnExclusive,this.text,!1)],this.newLines=zh(this.text)}renderForScreenReader(e){return this.newLines.join(`
`)}get lineCount(){return this.newLines.length}isEmpty(){return this.parts.every(e=>e.lines.length===0)}equals(e){return this.lineNumber===e.lineNumber&&this.columnRange.equals(e.columnRange)&&this.newLines.length===e.newLines.length&&this.newLines.every((t,i)=>t===e.newLines[i])&&this.additionalReservedLineCount===e.additionalReservedLineCount}}function eae(o,e){return En(o,e,qpe)}function qpe(o,e){return o===e?!0:!o||!e?!1:o instanceof SE&&e instanceof SE||o instanceof N$&&e instanceof N$?o.equals(e):!1}const Tqe=[];function Nqe(){return Tqe}class Kpe{constructor(e,t){if(this.startColumn=e,this.endColumnExclusive=t,e>t)throw new wi(`startColumn ${e} cannot be after endColumnExclusive ${t}`)}toRange(e){return new M(e,this.startColumn,e,this.endColumnExclusive)}equals(e){return this.startColumn===e.startColumn&&this.endColumnExclusive===e.endColumnExclusive}}function Gpe(o,e){const t=new le,i=o.createDecorationsCollection();return t.add(cI({debugName:()=>`Apply decorations from ${e.debugName}`},n=>{const s=e.read(n);i.set(s)})),t.add({dispose:()=>{i.clear()}}),t}function Rqe(o,e){return new G(o.lineNumber+e.lineNumber-1,e.lineNumber===1?o.column+e.column-1:e.column)}function tae(o,e){return new G(o.lineNumber-e.lineNumber+1,o.lineNumber-e.lineNumber===0?o.column-e.column+1:o.column)}var Mqe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Aqe=function(o,e){return function(t,i){e(t,i,o)}};const iae="ghost-text";let R$=class extends X{constructor(e,t,i){super(),this.editor=e,this.model=t,this.languageService=i,this.isDisposed=Wt(this,!1),this.currentTextModel=Ni(this,this.editor.onDidChangeModel,()=>this.editor.getModel()),this.uiState=Qe(this,n=>{if(this.isDisposed.read(n))return;const s=this.currentTextModel.read(n);if(s!==this.model.targetTextModel.read(n))return;const r=this.model.ghostText.read(n);if(!r)return;const a=r instanceof N$?r.columnRange:void 0,l=[],c=[];function u(b,y){if(c.length>0){const S=c[c.length-1];y&&S.decorations.push(new Kr(S.content.length+1,S.content.length+1+b[0].length,y,0)),S.content+=b[0],b=b.slice(1)}for(const S of b)c.push({content:S,decorations:y?[new Kr(1,S.length+1,y,0)]:[]})}const f=s.getLineContent(r.lineNumber);let g,p=0;for(const b of r.parts){let y=b.lines;g===void 0?(l.push({column:b.column,text:y[0],preview:b.preview}),y=y.slice(1)):u([f.substring(p,b.column-1)],void 0),y.length>0&&(u(y,iae),g===void 0&&b.column<=f.length&&(g=b.column)),p=b.column-1}g!==void 0&&u([f.substring(p)],void 0);const _=g!==void 0?new Kpe(g,f.length+1):void 0;return{replacedRange:a,inlineTexts:l,additionalLines:c,hiddenRange:_,lineNumber:r.lineNumber,additionalReservedLineCount:this.model.minReservedLineCount.read(n),targetTextModel:s}}),this.decorations=Qe(this,n=>{const s=this.uiState.read(n);if(!s)return[];const r=[];s.replacedRange&&r.push({range:s.replacedRange.toRange(s.lineNumber),options:{inlineClassName:"inline-completion-text-to-replace",description:"GhostTextReplacement"}}),s.hiddenRange&&r.push({range:s.hiddenRange.toRange(s.lineNumber),options:{inlineClassName:"ghost-text-hidden",description:"ghost-text-hidden"}});for(const a of s.inlineTexts)r.push({range:M.fromPositions(new G(s.lineNumber,a.column)),options:{description:iae,after:{content:a.text,inlineClassName:a.preview?"ghost-text-decoration-preview":"ghost-text-decoration",cursorStops:id.Left},showIfCollapsed:!0}});return r}),this.additionalLinesWidget=this._register(new Pqe(this.editor,this.languageService.languageIdCodec,Qe(n=>{const s=this.uiState.read(n);return s?{lineNumber:s.lineNumber,additionalLines:s.additionalLines,minReservedLineCount:s.additionalReservedLineCount,targetTextModel:s.targetTextModel}:void 0}))),this._register(it(()=>{this.isDisposed.set(!0,void 0)})),this._register(Gpe(this.editor,this.decorations))}ownsViewZone(e){return this.additionalLinesWidget.viewZoneId===e}};R$=Mqe([Aqe(2,In)],R$);class Pqe extends X{get viewZoneId(){return this._viewZoneId}constructor(e,t,i){super(),this.editor=e,this.languageIdCodec=t,this.lines=i,this._viewZoneId=void 0,this.editorOptionsChanged=No("editorOptionChanged",Ee.filter(this.editor.onDidChangeConfiguration,n=>n.hasChanged(33)||n.hasChanged(118)||n.hasChanged(100)||n.hasChanged(95)||n.hasChanged(51)||n.hasChanged(50)||n.hasChanged(67))),this._register(bt(n=>{const s=this.lines.read(n);this.editorOptionsChanged.read(n),s?this.updateLines(s.lineNumber,s.additionalLines,s.minReservedLineCount):this.clear()}))}dispose(){super.dispose(),this.clear()}clear(){this.editor.changeViewZones(e=>{this._viewZoneId&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0)})}updateLines(e,t,i){const n=this.editor.getModel();if(!n)return;const{tabSize:s}=n.getOptions();this.editor.changeViewZones(r=>{this._viewZoneId&&(r.removeZone(this._viewZoneId),this._viewZoneId=void 0);const a=Math.max(t.length,i);if(a>0){const l=document.createElement("div");Oqe(l,s,t,this.editor.getOptions(),this.languageIdCodec),this._viewZoneId=r.addZone({afterLineNumber:e,heightInLines:a,domNode:l,afterColumnAffinity:1})}})}}function Oqe(o,e,t,i,n){const s=i.get(33),r=i.get(118),a="none",l=i.get(95),c=i.get(51),u=i.get(50),f=i.get(67),g=new qS(1e4);g.appendString('<div class="suggest-preview-text">');for(let b=0,y=t.length;b<y;b++){const S=t[b],L=S.content;g.appendString('<div class="view-line'),g.appendString('" style="top:'),g.appendString(String(b*f)),g.appendString('px;width:1000000px;">');const x=ZE(L),k=eS(L),E=ho.createEmpty(L,n);vI(new r_(u.isMonospace&&!s,u.canUseHalfwidthRightwardsArrow,L,!1,x,k,0,E,S.decorations,e,0,u.spaceWidth,u.middotWidth,u.wsmiddotWidth,r,a,l,c!==Mm.OFF,null),g),g.appendString("</div>")}g.appendString("</div>"),yo(o,u);const p=g.build(),_=nae?nae.createHTML(p):p;o.innerHTML=_}const nae=Ag("editorGhostText",{createHTML:o=>o});function Fqe(o,e){const t=new $ue,i=new que(t,c=>e.getLanguageConfiguration(c)),n=new jue(new Bqe([o]),i),s=W6(n,[],void 0,!0);let r="";const a=o.getLineContent();function l(c,u){if(c.kind===2)if(l(c.openingBracket,u),u=Zn(u,c.openingBracket.length),c.child&&(l(c.child,u),u=Zn(u,c.child.length)),c.closingBracket)l(c.closingBracket,u),u=Zn(u,c.closingBracket.length);else{const g=i.getSingleLanguageBracketTokens(c.openingBracket.languageId).findClosingTokenText(c.openingBracket.bracketIds);r+=g}else if(c.kind!==3){if(c.kind===0||c.kind===1)r+=a.substring(u,Zn(u,c.length));else if(c.kind===4)for(const f of c.children)l(f,u),u=Zn(u,f.length)}}return l(s,qr),r}class Bqe{constructor(e){this.lines=e,this.tokenization={getLineTokens:t=>this.lines[t-1]}}getLineCount(){return this.lines.length}getLineLength(e){return this.lines[e-1].getLineContent().length}}async function Ype(o,e,t,i,n=Mt.None,s){const r=e instanceof G?Vqe(e,t):e,a=o.all(t),l=new Qq;for(const S of a)S.groupId&&l.add(S.groupId,S);function c(S){if(!S.yieldsToGroupIds)return[];const L=[];for(const x of S.yieldsToGroupIds||[]){const k=l.get(x);for(const E of k)L.push(E)}return L}const u=new Map,f=new Set;function g(S,L){if(L=[...L,S],f.has(S))return L;f.add(S);try{const x=c(S);for(const k of x){const E=g(k,L);if(E)return E}}finally{f.delete(S)}}function p(S){const L=u.get(S);if(L)return L;const x=g(S,[]);x&&rs(new Error(`Inline completions: cyclic yield-to dependency detected. Path: ${x.map(E=>E.toString?E.toString():""+E).join(" -> ")}`));const k=new zS;return u.set(S,k.p),(async()=>{var E;if(!x){const N=c(S);for(const A of N){const P=await p(A);if(P&&P.items.length>0)return}}try{return e instanceof G?await S.provideInlineCompletions(t,e,i,n):await((E=S.provideInlineEdits)==null?void 0:E.call(S,t,e,i,n))}catch(N){rs(N);return}})().then(E=>k.complete(E),E=>k.error(E)),k.p}const _=await Promise.all(a.map(async S=>({provider:S,completions:await p(S)}))),b=new Map,y=[];for(const S of _){const L=S.completions;if(!L)continue;const x=new Hqe(L,S.provider);y.push(x);for(const k of L.items){const E=xO.from(k,x,r,t,s);b.set(E.hash(),E)}}return new Wqe(Array.from(b.values()),new Set(b.keys()),y)}class Wqe{constructor(e,t,i){this.completions=e,this.hashs=t,this.providerResults=i}has(e){return this.hashs.has(e.hash())}dispose(){for(const e of this.providerResults)e.removeRef()}}class Hqe{constructor(e,t){this.inlineCompletions=e,this.provider=t,this.refCount=1}addRef(){this.refCount++}removeRef(){this.refCount--,this.refCount===0&&this.provider.freeInlineCompletions(this.inlineCompletions)}}class xO{static from(e,t,i,n,s){let r,a,l=e.range?M.lift(e.range):i;if(typeof e.insertText=="string"){if(r=e.insertText,s&&e.completeBracketPairs){r=sae(r,l.getStartPosition(),n,s);const c=r.length-e.insertText.length;c!==0&&(l=new M(l.startLineNumber,l.startColumn,l.endLineNumber,l.endColumn+c))}a=void 0}else if("snippet"in e.insertText){const c=e.insertText.snippet.length;if(s&&e.completeBracketPairs){e.insertText.snippet=sae(e.insertText.snippet,l.getStartPosition(),n,s);const f=e.insertText.snippet.length-c;f!==0&&(l=new M(l.startLineNumber,l.startColumn,l.endLineNumber,l.endColumn+f))}const u=new yC().parse(e.insertText.snippet);u.children.length===1&&u.children[0]instanceof zr?(r=u.children[0].value,a=void 0):(r=u.toString(),a={snippet:e.insertText.snippet,range:l})}else s4(e.insertText);return new xO(r,e.command,l,r,a,e.additionalTextEdits||Nqe(),e,t)}constructor(e,t,i,n,s,r,a,l){this.filterText=e,this.command=t,this.range=i,this.insertText=n,this.snippetInfo=s,this.additionalTextEdits=r,this.sourceInlineCompletion=a,this.source=l,e=e.replace(/\r\n|\r/g,`
`),n=e.replace(/\r\n|\r/g,`
`)}withRange(e){return new xO(this.filterText,this.command,e,this.insertText,this.snippetInfo,this.additionalTextEdits,this.sourceInlineCompletion,this.source)}hash(){return JSON.stringify({insertText:this.insertText,range:this.range.toString()})}toSingleTextEdit(){return new Mh(this.range,this.insertText)}}function Vqe(o,e){const t=e.getWordAtPosition(o),i=e.getLineMaxColumn(o.lineNumber);return t?new M(o.lineNumber,t.startColumn,o.lineNumber,i):M.fromPositions(o,o.with(void 0,i))}function sae(o,e,t,i){const s=t.getLineContent(e.lineNumber).substring(0,e.column-1)+o,r=t.tokenization.tokenizeLineWithEdit(e,s.length-(e.column-1),o),a=r==null?void 0:r.sliceAndInflate(e.column-1,s.length,0);return a?Fqe(a,i):o}function ob(o,e,t){const i=t?o.range.intersectRanges(t):o.range;if(!i)return o;const n=e.getValueInRange(i,1),s=Om(n,o.text),r=dd.ofText(n.substring(0,s)).addToPosition(o.range.getStartPosition()),a=o.text.substring(s),l=M.fromPositions(r,o.range.getEndPosition());return new Mh(l,a)}function Zpe(o,e){return o.text.startsWith(e.text)&&zqe(o.range,e.range)}function oae(o,e,t,i,n=0){let s=ob(o,e);if(s.range.endLineNumber!==s.range.startLineNumber)return;const r=e.getLineContent(s.range.startLineNumber),a=Ui(r).length;if(s.range.startColumn-1<=a){const _=Ui(s.text).length,b=r.substring(s.range.startColumn-1,a),[y,S]=[s.range.getStartPosition(),s.range.getEndPosition()],L=y.column+b.length<=S.column?y.delta(0,b.length):S,x=M.fromPositions(L,S),k=s.text.startsWith(b)?s.text.substring(b.length):s.text.substring(_);s=new Mh(x,k)}const c=e.getValueInRange(s.range),u=Uqe(c,s.text);if(!u)return;const f=s.range.startLineNumber,g=new Array;if(t==="prefix"){const _=u.filter(b=>b.originalLength===0);if(_.length>1||_.length===1&&_[0].originalStart!==c.length)return}const p=s.text.length-n;for(const _ of u){const b=s.range.startColumn+_.originalStart+_.originalLength;if(t==="subwordSmart"&&i&&i.lineNumber===s.range.startLineNumber&&b<i.column||_.originalLength>0)return;if(_.modifiedLength===0)continue;const y=_.modifiedStart+_.modifiedLength,S=Math.max(_.modifiedStart,Math.min(y,p)),L=s.text.substring(_.modifiedStart,S),x=s.text.substring(S,Math.max(_.modifiedStart,y));L.length>0&&g.push(new LO(b,L,!1)),x.length>0&&g.push(new LO(b,x,!0))}return new SE(f,g)}function zqe(o,e){return e.getStartPosition().equals(o.getStartPosition())&&e.getEndPosition().isBeforeOrEqual(o.getEndPosition())}let Yu;function Uqe(o,e){if((Yu==null?void 0:Yu.originalValue)===o&&(Yu==null?void 0:Yu.newValue)===e)return Yu==null?void 0:Yu.changes;{let t=aae(o,e,!0);if(t){const i=rae(t);if(i>0){const n=aae(o,e,!1);n&&rae(n)<i&&(t=n)}}return Yu={originalValue:o,newValue:e,changes:t},t}}function rae(o){let e=0;for(const t of o)e+=t.originalLength;return e}function aae(o,e,t){if(o.length>5e3||e.length>5e3)return;function i(c){let u=0;for(let f=0,g=c.length;f<g;f++){const p=c.charCodeAt(f);p>u&&(u=p)}return u}const n=Math.max(i(o),i(e));function s(c){if(c<0)throw new Error("unexpected");return n+c+1}function r(c){let u=0,f=0;const g=new Int32Array(c.length);for(let p=0,_=c.length;p<_;p++)if(t&&c[p]==="("){const b=f*100+u;g[p]=s(2*b),u++}else if(t&&c[p]===")"){u=Math.max(u-1,0);const b=f*100+u;g[p]=s(2*b+1),u===0&&f++}else g[p]=c.charCodeAt(p);return g}const a=r(o),l=r(e);return new bh({getElements:()=>a},{getElements:()=>l}).ComputeDiff(!1).changes}var $qe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},lae=function(o,e){return function(t,i){e(t,i,o)}};let M$=class extends X{constructor(e,t,i,n,s){super(),this.textModel=e,this.versionId=t,this._debounceValue=i,this.languageFeaturesService=n,this.languageConfigurationService=s,this._updateOperation=this._register(new Xs),this.inlineCompletions=FD("inlineCompletions",void 0),this.suggestWidgetInlineCompletions=FD("suggestWidgetInlineCompletions",void 0),this._register(this.textModel.onDidChangeContent(()=>{this._updateOperation.clear()}))}fetch(e,t,i){var u,f;const n=new qqe(e,t,this.textModel.getVersionId()),s=t.selectedSuggestionInfo?this.suggestWidgetInlineCompletions:this.inlineCompletions;if((u=this._updateOperation.value)!=null&&u.request.satisfies(n))return this._updateOperation.value.promise;if((f=s.get())!=null&&f.request.satisfies(n))return Promise.resolve(!0);const r=!!this._updateOperation.value;this._updateOperation.clear();const a=new An,l=(async()=>{if((r||t.triggerKind===ru.Automatic)&&await jqe(this._debounceValue.get(this.textModel),a.token),a.token.isCancellationRequested||this._store.isDisposed||this.textModel.getVersionId()!==n.versionId)return!1;const p=new Date,_=await Ype(this.languageFeaturesService.inlineCompletionsProvider,e,this.textModel,t,a.token,this.languageConfigurationService);if(a.token.isCancellationRequested||this._store.isDisposed||this.textModel.getVersionId()!==n.versionId)return!1;const b=new Date;this._debounceValue.update(this.textModel,b.getTime()-p.getTime());const y=new Gqe(_,n,this.textModel,this.versionId);if(i){const S=i.toInlineCompletion(void 0);i.canBeReused(this.textModel,e)&&!_.has(S)&&y.prepend(i.inlineCompletion,S.range,!0)}return this._updateOperation.clear(),Mn(S=>{s.set(y,S)}),!0})(),c=new Kqe(n,a,l);return this._updateOperation.value=c,l}clear(e){this._updateOperation.clear(),this.inlineCompletions.set(void 0,e),this.suggestWidgetInlineCompletions.set(void 0,e)}clearSuggestWidgetInlineCompletions(e){var t;(t=this._updateOperation.value)!=null&&t.request.context.selectedSuggestionInfo&&this._updateOperation.clear(),this.suggestWidgetInlineCompletions.set(void 0,e)}cancelUpdate(){this._updateOperation.clear()}};M$=$qe([lae(3,Ue),lae(4,On)],M$);function jqe(o,e){return new Promise(t=>{let i;const n=setTimeout(()=>{i&&i.dispose(),t()},o);e&&(i=e.onCancellationRequested(()=>{clearTimeout(n),i&&i.dispose(),t()}))})}class qqe{constructor(e,t,i){this.position=e,this.context=t,this.versionId=i}satisfies(e){return this.position.equals(e.position)&&b6(this.context.selectedSuggestionInfo,e.context.selectedSuggestionInfo,KPe())&&(e.context.triggerKind===ru.Automatic||this.context.triggerKind===ru.Explicit)&&this.versionId===e.versionId}}class Kqe{constructor(e,t,i){this.request=e,this.cancellationTokenSource=t,this.promise=i}dispose(){this.cancellationTokenSource.cancel()}}class Gqe{get inlineCompletions(){return this._inlineCompletions}constructor(e,t,i,n){this.inlineCompletionProviderResult=e,this.request=t,this._textModel=i,this._versionId=n,this._refCount=1,this._prependedInlineCompletionItems=[];const s=i.deltaDecorations([],e.completions.map(r=>({range:r.range,options:{description:"inline-completion-tracking-range"}})));this._inlineCompletions=e.completions.map((r,a)=>new cae(r,s[a],this._textModel,this._versionId))}clone(){return this._refCount++,this}dispose(){if(this._refCount--,this._refCount===0){setTimeout(()=>{this._textModel.isDisposed()||this._textModel.deltaDecorations(this._inlineCompletions.map(e=>e.decorationId),[])},0),this.inlineCompletionProviderResult.dispose();for(const e of this._prependedInlineCompletionItems)e.source.removeRef()}}prepend(e,t,i){i&&e.source.addRef();const n=this._textModel.deltaDecorations([],[{range:t,options:{description:"inline-completion-tracking-range"}}])[0];this._inlineCompletions.unshift(new cae(e,n,this._textModel,this._versionId)),this._prependedInlineCompletionItems.push(e)}}class cae{get forwardStable(){return this.inlineCompletion.source.inlineCompletions.enableForwardStability??!1}constructor(e,t,i,n){this.inlineCompletion=e,this.decorationId=t,this._textModel=i,this._modelVersion=n,this.semanticId=JSON.stringify([this.inlineCompletion.filterText,this.inlineCompletion.insertText,this.inlineCompletion.range.getStartPosition().toString()]),this._updatedRange=Ml({owner:this,equalsFn:M.equalsRange},s=>(this._modelVersion.read(s),this._textModel.getDecorationRange(this.decorationId)))}toInlineCompletion(e){return this.inlineCompletion.withRange(this._updatedRange.read(e)??y9)}toSingleTextEdit(e){return new Mh(this._updatedRange.read(e)??y9,this.inlineCompletion.insertText)}isVisible(e,t,i){const n=ob(this._toFilterTextReplacement(i),e),s=this._updatedRange.read(i);if(!s||!this.inlineCompletion.range.getStartPosition().equals(s.getStartPosition())||t.lineNumber!==n.range.startLineNumber)return!1;const r=e.getValueInRange(n.range,1),a=n.text,l=Math.max(0,t.column-n.range.startColumn);let c=a.substring(0,l),u=a.substring(l),f=r.substring(0,l),g=r.substring(l);const p=e.getLineIndentColumn(n.range.startLineNumber);return n.range.startColumn<=p&&(f=f.trimStart(),f.length===0&&(g=g.trimStart()),c=c.trimStart(),c.length===0&&(u=u.trimStart())),c.startsWith(f)&&!!Zde(g,u)}canBeReused(e,t){const i=this._updatedRange.read(void 0);return!!i&&i.containsPosition(t)&&this.isVisible(e,t,void 0)&&dd.ofRange(i).isGreaterThanOrEqualTo(dd.ofRange(this.inlineCompletion.range))}_toFilterTextReplacement(e){return new Mh(this._updatedRange.read(e)??y9,this.inlineCompletion.filterText)}}const y9=new M(1,1,1,1),At={Visible:MY,HasFocusedSuggestion:new Pe("suggestWidgetHasFocusedSuggestion",!1,v("suggestWidgetHasSelection","Whether any suggestion is focused")),DetailsVisible:new Pe("suggestWidgetDetailsVisible",!1,v("suggestWidgetDetailsVisible","Whether suggestion details are visible")),MultipleSuggestions:new Pe("suggestWidgetMultipleSuggestions",!1,v("suggestWidgetMultipleSuggestions","Whether there are multiple suggestions to pick from")),MakesTextEdit:new Pe("suggestionMakesTextEdit",!0,v("suggestionMakesTextEdit","Whether inserting the current suggestion yields in a change or has everything already been typed")),AcceptSuggestionsOnEnter:new Pe("acceptSuggestionOnEnter",!0,v("acceptSuggestionOnEnter","Whether suggestions are inserted when pressing Enter")),HasInsertAndReplaceRange:new Pe("suggestionHasInsertAndReplaceRange",!1,v("suggestionHasInsertAndReplaceRange","Whether the current suggestion has insert and replace behaviour")),InsertMode:new Pe("suggestionInsertMode",void 0,{type:"string",description:v("suggestionInsertMode","Whether the default behaviour is to insert or replace")}),CanResolve:new Pe("suggestionCanResolve",!1,v("suggestionCanResolve","Whether the current suggestion supports to resolve further details"))},gm=new qe("suggestWidgetStatusBar");class Yqe{constructor(e,t,i,n){var s;this.position=e,this.completion=t,this.container=i,this.provider=n,this.isInvalid=!1,this.score=du.Default,this.distance=0,this.textLabel=typeof t.label=="string"?t.label:(s=t.label)==null?void 0:s.label,this.labelLow=this.textLabel.toLowerCase(),this.isInvalid=!this.textLabel,this.sortTextLow=t.sortText&&t.sortText.toLowerCase(),this.filterTextLow=t.filterText&&t.filterText.toLowerCase(),this.extensionId=t.extensionId,M.isIRange(t.range)?(this.editStart=new G(t.range.startLineNumber,t.range.startColumn),this.editInsertEnd=new G(t.range.endLineNumber,t.range.endColumn),this.editReplaceEnd=new G(t.range.endLineNumber,t.range.endColumn),this.isInvalid=this.isInvalid||M.spansMultipleLines(t.range)||t.range.startLineNumber!==e.lineNumber):(this.editStart=new G(t.range.insert.startLineNumber,t.range.insert.startColumn),this.editInsertEnd=new G(t.range.insert.endLineNumber,t.range.insert.endColumn),this.editReplaceEnd=new G(t.range.replace.endLineNumber,t.range.replace.endColumn),this.isInvalid=this.isInvalid||M.spansMultipleLines(t.range.insert)||M.spansMultipleLines(t.range.replace)||t.range.insert.startLineNumber!==e.lineNumber||t.range.replace.startLineNumber!==e.lineNumber||t.range.insert.startColumn!==t.range.replace.startColumn),typeof n.resolveCompletionItem!="function"&&(this._resolveCache=Promise.resolve(),this._resolveDuration=0)}get isResolved(){return this._resolveDuration!==void 0}get resolveDuration(){return this._resolveDuration!==void 0?this._resolveDuration:-1}async resolve(e){if(!this._resolveCache){const t=e.onCancellationRequested(()=>{this._resolveCache=void 0,this._resolveDuration=void 0}),i=new uo(!0);this._resolveCache=Promise.resolve(this.provider.resolveCompletionItem(this.completion,e)).then(n=>{Object.assign(this.completion,n),this._resolveDuration=i.elapsed()},n=>{Tc(n)&&(this._resolveCache=void 0,this._resolveDuration=void 0)}).finally(()=>{t.dispose()})}return this._resolveCache}}const rF=class rF{constructor(e=2,t=new Set,i=new Set,n=new Map,s=!0){this.snippetSortOrder=e,this.kindFilter=t,this.providerFilter=i,this.providerItemsToReuse=n,this.showDeprecated=s}};rF.default=new rF;let LE=rF;class Zqe{constructor(e,t,i,n){this.items=e,this.needsClipboard=t,this.durations=i,this.disposable=n}}async function HY(o,e,t,i=LE.default,n={triggerKind:0},s=Mt.None){const r=new uo;t=t.clone();const a=e.getWordAtPosition(t),l=a?new M(t.lineNumber,a.startColumn,t.lineNumber,a.endColumn):M.fromPositions(t),c={replace:l,insert:l.setEndPosition(t.lineNumber,t.column)},u=[],f=new le,g=[];let p=!1;const _=(y,S,L)=>{var k;let x=!1;if(!S)return x;for(const E of S.suggestions)if(!i.kindFilter.has(E.kind)){if(!i.showDeprecated&&((k=E==null?void 0:E.tags)!=null&&k.includes(1)))continue;E.range||(E.range=c),E.sortText||(E.sortText=typeof E.label=="string"?E.label:E.label.label),!p&&E.insertTextRules&&E.insertTextRules&4&&(p=yC.guessNeedsClipboard(E.insertText)),u.push(new Yqe(t,E,S,y)),x=!0}return VF(S)&&f.add(S),g.push({providerName:y._debugDisplayName??"unknown_provider",elapsedProvider:S.duration??-1,elapsedOverall:L.elapsed()}),x},b=(async()=>{})();for(const y of o.orderedGroups(e)){let S=!1;if(await Promise.all(y.map(async L=>{if(i.providerItemsToReuse.has(L)){const x=i.providerItemsToReuse.get(L);x.forEach(k=>u.push(k)),S=S||x.length>0;return}if(!(i.providerFilter.size>0&&!i.providerFilter.has(L)))try{const x=new uo,k=await L.provideCompletionItems(e,t,n,s);S=_(L,k,x)||S}catch(x){rs(x)}})),S||s.isCancellationRequested)break}return await b,s.isCancellationRequested?(f.dispose(),Promise.reject(new ad)):new Zqe(u.sort(Jqe(i.snippetSortOrder)),p,{entries:g,elapsed:r.elapsed()},f)}function VY(o,e){if(o.sortTextLow&&e.sortTextLow){if(o.sortTextLow<e.sortTextLow)return-1;if(o.sortTextLow>e.sortTextLow)return 1}return o.textLabel<e.textLabel?-1:o.textLabel>e.textLabel?1:o.completion.kind-e.completion.kind}function Xqe(o,e){if(o.completion.kind!==e.completion.kind){if(o.completion.kind===27)return-1;if(e.completion.kind===27)return 1}return VY(o,e)}function Qqe(o,e){if(o.completion.kind!==e.completion.kind){if(o.completion.kind===27)return 1;if(e.completion.kind===27)return-1}return VY(o,e)}const f5=new Map;f5.set(0,Xqe);f5.set(2,Qqe);f5.set(1,VY);function Jqe(o){return f5.get(o)}ii.registerCommand("_executeCompletionItemProvider",async(o,...e)=>{const[t,i,n,s]=e;ui(st.isUri(t)),ui(G.isIPosition(i)),ui(typeof n=="string"||!n),ui(typeof s=="number"||!s);const{completionProvider:r}=o.get(Ue),a=await o.get(Na).createModelReference(t);try{const l={incomplete:!1,suggestions:[]},c=[],u=a.object.textEditorModel.validatePosition(i),f=await HY(r,a.object.textEditorModel,u,void 0,{triggerCharacter:n??void 0,triggerKind:n?1:0});for(const g of f.items)c.length<(s??0)&&c.push(g.resolve(Mt.None)),l.incomplete=l.incomplete||g.container.incomplete,l.suggestions.push(g.completion);try{return await Promise.all(c),l}finally{setTimeout(()=>f.disposable.dispose(),100)}}finally{a.dispose()}});function eKe(o,e){var t;(t=o.getContribution("editor.contrib.suggestController"))==null||t.triggerSuggest(new Set().add(e),void 0,!0)}class Gw{static isAllOff(e){return e.other==="off"&&e.comments==="off"&&e.strings==="off"}static isAllOn(e){return e.other==="on"&&e.comments==="on"&&e.strings==="on"}static valueFor(e,t){switch(t){case 1:return e.comments;case 2:return e.strings;default:return e.other}}}function dae(o,e=Po){return vNe(o,e)?o.charAt(0).toUpperCase()+o.slice(1):o}var tKe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},iKe=function(o,e){return function(t,i){e(t,i,o)}};class uae{constructor(e){this._delegates=e}resolve(e){for(const t of this._delegates){const i=t.resolve(e);if(i!==void 0)return i}}}class hae{constructor(e,t,i,n){this._model=e,this._selection=t,this._selectionIdx=i,this._overtypingCapturer=n}resolve(e){const{name:t}=e;if(t==="SELECTION"||t==="TM_SELECTED_TEXT"){let i=this._model.getValueInRange(this._selection)||void 0,n=this._selection.startLineNumber!==this._selection.endLineNumber;if(!i&&this._overtypingCapturer){const s=this._overtypingCapturer.getLastOvertypedInfo(this._selectionIdx);s&&(i=s.value,n=s.multiline)}if(i&&n&&e.snippet){const s=this._model.getLineContent(this._selection.startLineNumber),r=Ui(s,0,this._selection.startColumn-1);let a=r;e.snippet.walk(c=>c===e?!1:(c instanceof zr&&(a=Ui(zh(c.value).pop())),!0));const l=Om(a,r);i=i.replace(/(\r\n|\r|\n)(.*)/g,(c,u,f)=>`${u}${a.substr(l)}${f}`)}return i}else{if(t==="TM_CURRENT_LINE")return this._model.getLineContent(this._selection.positionLineNumber);if(t==="TM_CURRENT_WORD"){const i=this._model.getWordAtPosition({lineNumber:this._selection.positionLineNumber,column:this._selection.positionColumn});return i&&i.word||void 0}else{if(t==="TM_LINE_INDEX")return String(this._selection.positionLineNumber-1);if(t==="TM_LINE_NUMBER")return String(this._selection.positionLineNumber);if(t==="CURSOR_INDEX")return String(this._selectionIdx);if(t==="CURSOR_NUMBER")return String(this._selectionIdx+1)}}}}class fae{constructor(e,t){this._labelService=e,this._model=t}resolve(e){const{name:t}=e;if(t==="TM_FILENAME")return lm(this._model.uri.fsPath);if(t==="TM_FILENAME_BASE"){const i=lm(this._model.uri.fsPath),n=i.lastIndexOf(".");return n<=0?i:i.slice(0,n)}else{if(t==="TM_DIRECTORY")return Wle(this._model.uri.fsPath)==="."?"":this._labelService.getUriLabel(w4(this._model.uri));if(t==="TM_FILEPATH")return this._labelService.getUriLabel(this._model.uri);if(t==="RELATIVE_FILEPATH")return this._labelService.getUriLabel(this._model.uri,{relative:!0,noPrefix:!0})}}}class gae{constructor(e,t,i,n){this._readClipboardText=e,this._selectionIdx=t,this._selectionCount=i,this._spread=n}resolve(e){if(e.name!=="CLIPBOARD")return;const t=this._readClipboardText();if(t){if(this._spread){const i=t.split(/\r\n|\n|\r/).filter(n=>!Gle(n));if(i.length===this._selectionCount)return i[this._selectionIdx]}return t}}}let kO=class{constructor(e,t,i){this._model=e,this._selection=t,this._languageConfigurationService=i}resolve(e){const{name:t}=e,i=this._model.getLanguageIdAtPosition(this._selection.selectionStartLineNumber,this._selection.selectionStartColumn),n=this._languageConfigurationService.getLanguageConfiguration(i).comments;if(n){if(t==="LINE_COMMENT")return n.lineCommentToken||void 0;if(t==="BLOCK_COMMENT_START")return n.blockCommentStartToken||void 0;if(t==="BLOCK_COMMENT_END")return n.blockCommentEndToken||void 0}}};kO=tKe([iKe(2,On)],kO);const ah=class ah{constructor(){this._date=new Date}resolve(e){const{name:t}=e;if(t==="CURRENT_YEAR")return String(this._date.getFullYear());if(t==="CURRENT_YEAR_SHORT")return String(this._date.getFullYear()).slice(-2);if(t==="CURRENT_MONTH")return String(this._date.getMonth().valueOf()+1).padStart(2,"0");if(t==="CURRENT_DATE")return String(this._date.getDate().valueOf()).padStart(2,"0");if(t==="CURRENT_HOUR")return String(this._date.getHours().valueOf()).padStart(2,"0");if(t==="CURRENT_MINUTE")return String(this._date.getMinutes().valueOf()).padStart(2,"0");if(t==="CURRENT_SECOND")return String(this._date.getSeconds().valueOf()).padStart(2,"0");if(t==="CURRENT_DAY_NAME")return ah.dayNames[this._date.getDay()];if(t==="CURRENT_DAY_NAME_SHORT")return ah.dayNamesShort[this._date.getDay()];if(t==="CURRENT_MONTH_NAME")return ah.monthNames[this._date.getMonth()];if(t==="CURRENT_MONTH_NAME_SHORT")return ah.monthNamesShort[this._date.getMonth()];if(t==="CURRENT_SECONDS_UNIX")return String(Math.floor(this._date.getTime()/1e3));if(t==="CURRENT_TIMEZONE_OFFSET"){const i=this._date.getTimezoneOffset(),n=i>0?"-":"+",s=Math.trunc(Math.abs(i/60)),r=s<10?"0"+s:s,a=Math.abs(i)-s*60,l=a<10?"0"+a:a;return n+r+":"+l}}};ah.dayNames=[v("Sunday","Sunday"),v("Monday","Monday"),v("Tuesday","Tuesday"),v("Wednesday","Wednesday"),v("Thursday","Thursday"),v("Friday","Friday"),v("Saturday","Saturday")],ah.dayNamesShort=[v("SundayShort","Sun"),v("MondayShort","Mon"),v("TuesdayShort","Tue"),v("WednesdayShort","Wed"),v("ThursdayShort","Thu"),v("FridayShort","Fri"),v("SaturdayShort","Sat")],ah.monthNames=[v("January","January"),v("February","February"),v("March","March"),v("April","April"),v("May","May"),v("June","June"),v("July","July"),v("August","August"),v("September","September"),v("October","October"),v("November","November"),v("December","December")],ah.monthNamesShort=[v("JanuaryShort","Jan"),v("FebruaryShort","Feb"),v("MarchShort","Mar"),v("AprilShort","Apr"),v("MayShort","May"),v("JuneShort","Jun"),v("JulyShort","Jul"),v("AugustShort","Aug"),v("SeptemberShort","Sep"),v("OctoberShort","Oct"),v("NovemberShort","Nov"),v("DecemberShort","Dec")];let DO=ah;class pae{constructor(e){this._workspaceService=e}resolve(e){if(!this._workspaceService)return;const t=OPe(this._workspaceService.getWorkspace());if(!APe(t)){if(e.name==="WORKSPACE_NAME")return this._resolveWorkspaceName(t);if(e.name==="WORKSPACE_FOLDER")return this._resoveWorkspacePath(t)}}_resolveWorkspaceName(e){if(u6(e))return lm(e.uri.path);let t=lm(e.configPath.path);return t.endsWith(h6)&&(t=t.substr(0,t.length-h6.length-1)),t}_resoveWorkspacePath(e){if(u6(e))return dae(e.uri.fsPath);const t=lm(e.configPath.path);let i=e.configPath.fsPath;return i.endsWith(t)&&(i=i.substr(0,i.length-t.length-1)),i?dae(i):"/"}}class mae{resolve(e){const{name:t}=e;if(t==="RANDOM")return Math.random().toString().slice(-6);if(t==="RANDOM_HEX")return Math.random().toString(16).slice(-6);if(t==="UUID")return n5()}}var nKe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},sKe=function(o,e){return function(t,i){e(t,i,o)}},Fd;const Yc=class Yc{constructor(e,t,i){this._editor=e,this._snippet=t,this._snippetLineLeadingWhitespace=i,this._offset=-1,this._nestingLevel=1,this._placeholderGroups=xte(t.placeholders,pc.compareByIndex),this._placeholderGroupsIdx=-1}initialize(e){this._offset=e.newPosition}dispose(){this._placeholderDecorations&&this._editor.removeDecorations([...this._placeholderDecorations.values()]),this._placeholderGroups.length=0}_initDecorations(){if(this._offset===-1)throw new Error("Snippet not initialized!");if(this._placeholderDecorations)return;this._placeholderDecorations=new Map;const e=this._editor.getModel();this._editor.changeDecorations(t=>{for(const i of this._snippet.placeholders){const n=this._snippet.offset(i),s=this._snippet.fullLen(i),r=M.fromPositions(e.getPositionAt(this._offset+n),e.getPositionAt(this._offset+n+s)),a=i.isFinalTabstop?Yc._decor.inactiveFinal:Yc._decor.inactive,l=t.addDecoration(r,a);this._placeholderDecorations.set(i,l)}})}move(e){if(!this._editor.hasModel())return[];if(this._initDecorations(),this._placeholderGroupsIdx>=0){const n=[];for(const s of this._placeholderGroups[this._placeholderGroupsIdx])if(s.transform){const r=this._placeholderDecorations.get(s),a=this._editor.getModel().getDecorationRange(r),l=this._editor.getModel().getValueInRange(a),c=s.transform.resolve(l).split(/\r\n|\r|\n/);for(let u=1;u<c.length;u++)c[u]=this._editor.getModel().normalizeIndentation(this._snippetLineLeadingWhitespace+c[u]);n.push(Rn.replace(a,c.join(this._editor.getModel().getEOL())))}n.length>0&&this._editor.executeEdits("snippet.placeholderTransform",n)}let t=!1;e===!0&&this._placeholderGroupsIdx<this._placeholderGroups.length-1?(this._placeholderGroupsIdx+=1,t=!0):e===!1&&this._placeholderGroupsIdx>0&&(this._placeholderGroupsIdx-=1,t=!0);const i=this._editor.getModel().changeDecorations(n=>{const s=new Set,r=[];for(const a of this._placeholderGroups[this._placeholderGroupsIdx]){const l=this._placeholderDecorations.get(a),c=this._editor.getModel().getDecorationRange(l);r.push(new Ke(c.startLineNumber,c.startColumn,c.endLineNumber,c.endColumn)),t=t&&this._hasPlaceholderBeenCollapsed(a),n.changeDecorationOptions(l,a.isFinalTabstop?Yc._decor.activeFinal:Yc._decor.active),s.add(a);for(const u of this._snippet.enclosingPlaceholders(a)){const f=this._placeholderDecorations.get(u);n.changeDecorationOptions(f,u.isFinalTabstop?Yc._decor.activeFinal:Yc._decor.active),s.add(u)}}for(const[a,l]of this._placeholderDecorations)s.has(a)||n.changeDecorationOptions(l,a.isFinalTabstop?Yc._decor.inactiveFinal:Yc._decor.inactive);return r});return t?this.move(e):i??[]}_hasPlaceholderBeenCollapsed(e){let t=e;for(;t;){if(t instanceof pc){const i=this._placeholderDecorations.get(t);if(this._editor.getModel().getDecorationRange(i).isEmpty()&&t.toString().length>0)return!0}t=t.parent}return!1}get isAtFirstPlaceholder(){return this._placeholderGroupsIdx<=0||this._placeholderGroups.length===0}get isAtLastPlaceholder(){return this._placeholderGroupsIdx===this._placeholderGroups.length-1}get hasPlaceholder(){return this._snippet.placeholders.length>0}get isTrivialSnippet(){if(this._snippet.placeholders.length===0)return!0;if(this._snippet.placeholders.length===1){const[e]=this._snippet.placeholders;if(e.isFinalTabstop&&this._snippet.rightMostDescendant===e)return!0}return!1}computePossibleSelections(){const e=new Map;for(const t of this._placeholderGroups){let i;for(const n of t){if(n.isFinalTabstop)break;i||(i=[],e.set(n.index,i));const s=this._placeholderDecorations.get(n),r=this._editor.getModel().getDecorationRange(s);if(!r){e.delete(n.index);break}i.push(r)}}return e}get activeChoice(){if(!this._placeholderDecorations)return;const e=this._placeholderGroups[this._placeholderGroupsIdx][0];if(!(e!=null&&e.choice))return;const t=this._placeholderDecorations.get(e);if(!t)return;const i=this._editor.getModel().getDecorationRange(t);if(i)return{range:i,choice:e.choice}}get hasChoice(){let e=!1;return this._snippet.walk(t=>(e=t instanceof d0,!e)),e}merge(e){const t=this._editor.getModel();this._nestingLevel*=10,this._editor.changeDecorations(i=>{for(const n of this._placeholderGroups[this._placeholderGroupsIdx]){const s=e.shift();console.assert(s._offset!==-1),console.assert(!s._placeholderDecorations);const r=s._snippet.placeholderInfo.last.index;for(const l of s._snippet.placeholderInfo.all)l.isFinalTabstop?l.index=n.index+(r+1)/this._nestingLevel:l.index=n.index+l.index/this._nestingLevel;this._snippet.replace(n,s._snippet.children);const a=this._placeholderDecorations.get(n);i.removeDecoration(a),this._placeholderDecorations.delete(n);for(const l of s._snippet.placeholders){const c=s._snippet.offset(l),u=s._snippet.fullLen(l),f=M.fromPositions(t.getPositionAt(s._offset+c),t.getPositionAt(s._offset+c+u)),g=i.addDecoration(f,Yc._decor.inactive);this._placeholderDecorations.set(l,g)}}this._placeholderGroups=xte(this._snippet.placeholders,pc.compareByIndex)})}};Yc._decor={active:Dt.register({description:"snippet-placeholder-1",stickiness:0,className:"snippet-placeholder"}),inactive:Dt.register({description:"snippet-placeholder-2",stickiness:1,className:"snippet-placeholder"}),activeFinal:Dt.register({description:"snippet-placeholder-3",stickiness:1,className:"finish-snippet-placeholder"}),inactiveFinal:Dt.register({description:"snippet-placeholder-4",stickiness:1,className:"finish-snippet-placeholder"})};let EO=Yc;const _ae={overwriteBefore:0,overwriteAfter:0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0};let IO=Fd=class{static adjustWhitespace(e,t,i,n,s){const r=e.getLineContent(t.lineNumber),a=Ui(r,0,t.column-1);let l;return n.walk(c=>{if(!(c instanceof zr)||c.parent instanceof d0||s&&!s.has(c))return!0;const u=c.value.split(/\r\n|\r|\n/);if(i){const g=n.offset(c);if(g===0)u[0]=e.normalizeIndentation(u[0]);else{l=l??n.toString();const p=l.charCodeAt(g-1);(p===10||p===13)&&(u[0]=e.normalizeIndentation(a+u[0]))}for(let p=1;p<u.length;p++)u[p]=e.normalizeIndentation(a+u[p])}const f=u.join(e.getEOL());return f!==c.value&&(c.parent.replace(c,[new zr(f)]),l=void 0),!0}),a}static adjustSelection(e,t,i,n){if(i!==0||n!==0){const{positionLineNumber:s,positionColumn:r}=t,a=r-i,l=r+n,c=e.validateRange({startLineNumber:s,startColumn:a,endLineNumber:s,endColumn:l});t=Ke.createWithDirection(c.startLineNumber,c.startColumn,c.endLineNumber,c.endColumn,t.getDirection())}return t}static createEditsAndSnippetsFromSelections(e,t,i,n,s,r,a,l,c){const u=[],f=[];if(!e.hasModel())return{edits:u,snippets:f};const g=e.getModel(),p=e.invokeWithinContext(k=>k.get(fC)),_=e.invokeWithinContext(k=>new fae(k.get(hS),g)),b=()=>a,y=g.getValueInRange(Fd.adjustSelection(g,e.getSelection(),i,0)),S=g.getValueInRange(Fd.adjustSelection(g,e.getSelection(),0,n)),L=g.getLineFirstNonWhitespaceColumn(e.getSelection().positionLineNumber),x=e.getSelections().map((k,E)=>({selection:k,idx:E})).sort((k,E)=>M.compareRangesUsingStarts(k.selection,E.selection));for(const{selection:k,idx:E}of x){let N=Fd.adjustSelection(g,k,i,0),A=Fd.adjustSelection(g,k,0,n);y!==g.getValueInRange(N)&&(N=k),S!==g.getValueInRange(A)&&(A=k);const P=k.setStartPosition(N.startLineNumber,N.startColumn).setEndPosition(A.endLineNumber,A.endColumn),H=new yC().parse(t,!0,s),ee=P.getStartPosition(),Q=Fd.adjustWhitespace(g,ee,r||E>0&&L!==g.getLineFirstNonWhitespaceColumn(k.positionLineNumber),H);H.resolveVariables(new uae([_,new gae(b,E,x.length,e.getOption(79)==="spread"),new hae(g,k,E,l),new kO(g,k,c),new DO,new pae(p),new mae])),u[E]=Rn.replace(P,H.toString()),u[E].identifier={major:E,minor:0},u[E]._isTracked=!0,f[E]=new EO(e,H,Q)}return{edits:u,snippets:f}}static createEditsAndSnippetsFromEdits(e,t,i,n,s,r,a){if(!e.hasModel()||t.length===0)return{edits:[],snippets:[]};const l=[],c=e.getModel(),u=new yC,f=new LI,g=new uae([e.invokeWithinContext(_=>new fae(_.get(hS),c)),new gae(()=>s,0,e.getSelections().length,e.getOption(79)==="spread"),new hae(c,e.getSelection(),0,r),new kO(c,e.getSelection(),a),new DO,new pae(e.invokeWithinContext(_=>_.get(fC))),new mae]);t=t.sort((_,b)=>M.compareRangesUsingStarts(_.range,b.range));let p=0;for(let _=0;_<t.length;_++){const{range:b,template:y}=t[_];if(_>0){const E=t[_-1].range,N=M.fromPositions(E.getEndPosition(),b.getStartPosition()),A=new zr(c.getValueInRange(N));f.appendChild(A),p+=A.value.length}const S=u.parseFragment(y,f);Fd.adjustWhitespace(c,b.getStartPosition(),!0,f,new Set(S)),f.resolveVariables(g);const L=f.toString(),x=L.slice(p);p=L.length;const k=Rn.replace(b,x);k.identifier={major:_,minor:0},k._isTracked=!0,l.push(k)}return u.ensureFinalTabstop(f,i,!0),{edits:l,snippets:[new EO(e,f,"")]}}constructor(e,t,i=_ae,n){this._editor=e,this._template=t,this._options=i,this._languageConfigurationService=n,this._templateMerges=[],this._snippets=[]}dispose(){$i(this._snippets)}_logInfo(){return`template="${this._template}", merged_templates="${this._templateMerges.join(" -> ")}"`}insert(){if(!this._editor.hasModel())return;const{edits:e,snippets:t}=typeof this._template=="string"?Fd.createEditsAndSnippetsFromSelections(this._editor,this._template,this._options.overwriteBefore,this._options.overwriteAfter,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer,this._languageConfigurationService):Fd.createEditsAndSnippetsFromEdits(this._editor,this._template,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer,this._languageConfigurationService);this._snippets=t,this._editor.executeEdits("snippet",e,i=>{const n=i.filter(s=>!!s.identifier);for(let s=0;s<t.length;s++)t[s].initialize(n[s].textChange);return this._snippets[0].hasPlaceholder?this._move(!0):n.map(s=>Ke.fromPositions(s.range.getEndPosition()))}),this._editor.revealRange(this._editor.getSelections()[0])}merge(e,t=_ae){if(!this._editor.hasModel())return;this._templateMerges.push([this._snippets[0]._nestingLevel,this._snippets[0]._placeholderGroupsIdx,e]);const{edits:i,snippets:n}=Fd.createEditsAndSnippetsFromSelections(this._editor,e,t.overwriteBefore,t.overwriteAfter,!0,t.adjustWhitespace,t.clipboardText,t.overtypingCapturer,this._languageConfigurationService);this._editor.executeEdits("snippet",i,s=>{const r=s.filter(l=>!!l.identifier);for(let l=0;l<n.length;l++)n[l].initialize(r[l].textChange);const a=n[0].isTrivialSnippet;if(!a){for(const l of this._snippets)l.merge(n);console.assert(n.length===0)}return this._snippets[0].hasPlaceholder&&!a?this._move(void 0):r.map(l=>Ke.fromPositions(l.range.getEndPosition()))})}next(){const e=this._move(!0);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}prev(){const e=this._move(!1);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}_move(e){const t=[];for(const i of this._snippets){const n=i.move(e);t.push(...n)}return t}get isAtFirstPlaceholder(){return this._snippets[0].isAtFirstPlaceholder}get isAtLastPlaceholder(){return this._snippets[0].isAtLastPlaceholder}get hasPlaceholder(){return this._snippets[0].hasPlaceholder}get hasChoice(){return this._snippets[0].hasChoice}get activeChoice(){return this._snippets[0].activeChoice}isSelectionWithinPlaceholders(){if(!this.hasPlaceholder)return!1;const e=this._editor.getSelections();if(e.length<this._snippets.length)return!1;const t=new Map;for(const i of this._snippets){const n=i.computePossibleSelections();if(t.size===0)for(const[s,r]of n){r.sort(M.compareRangesUsingStarts);for(const a of e)if(r[0].containsRange(a)){t.set(s,[]);break}}if(t.size===0)return!1;t.forEach((s,r)=>{s.push(...n.get(r))})}e.sort(M.compareRangesUsingStarts);for(const[i,n]of t){if(n.length!==e.length){t.delete(i);continue}n.sort(M.compareRangesUsingStarts);for(let s=0;s<n.length;s++)if(!n[s].containsRange(e[s])){t.delete(i);continue}}return t.size>0}};IO=Fd=nKe([sKe(3,On)],IO);var oKe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},XR=function(o,e){return function(t,i){e(t,i,o)}},Sw;const vae={overwriteBefore:0,overwriteAfter:0,undoStopBefore:!0,undoStopAfter:!0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0};var Sh;let ia=(Sh=class{static get(e){return e.getContribution(Sw.ID)}constructor(e,t,i,n,s){this._editor=e,this._logService=t,this._languageFeaturesService=i,this._languageConfigurationService=s,this._snippetListener=new le,this._modelVersionId=-1,this._inSnippet=Sw.InSnippetMode.bindTo(n),this._hasNextTabstop=Sw.HasNextTabstop.bindTo(n),this._hasPrevTabstop=Sw.HasPrevTabstop.bindTo(n)}dispose(){var e;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),(e=this._session)==null||e.dispose(),this._snippetListener.dispose()}insert(e,t){try{this._doInsert(e,typeof t>"u"?vae:{...vae,...t})}catch(i){this.cancel(),this._logService.error(i),this._logService.error("snippet_error"),this._logService.error("insert_template=",e),this._logService.error("existing_template=",this._session?this._session._logInfo():"<no_session>")}}_doInsert(e,t){var i;if(this._editor.hasModel()){if(this._snippetListener.clear(),t.undoStopBefore&&this._editor.getModel().pushStackElement(),this._session&&typeof e!="string"&&this.cancel(),this._session?(ui(typeof e=="string"),this._session.merge(e,t)):(this._modelVersionId=this._editor.getModel().getAlternativeVersionId(),this._session=new IO(this._editor,e,t,this._languageConfigurationService),this._session.insert()),t.undoStopAfter&&this._editor.getModel().pushStackElement(),(i=this._session)!=null&&i.hasChoice){const n={_debugDisplayName:"snippetChoiceCompletions",provideCompletionItems:(u,f)=>{if(!this._session||u!==this._editor.getModel()||!G.equals(this._editor.getPosition(),f))return;const{activeChoice:g}=this._session;if(!g||g.choice.options.length===0)return;const p=u.getValueInRange(g.range),_=!!g.choice.options.find(y=>y.value===p),b=[];for(let y=0;y<g.choice.options.length;y++){const S=g.choice.options[y];b.push({kind:13,label:S.value,insertText:S.value,sortText:"a".repeat(y+1),range:g.range,filterText:_?`${p}_${S.value}`:void 0,command:{id:"jumpToNextSnippetPlaceholder",title:v("next","Go to next placeholder...")}})}return{suggestions:b}}},s=this._editor.getModel();let r,a=!1;const l=()=>{r==null||r.dispose(),a=!1},c=()=>{a||(r=this._languageFeaturesService.completionProvider.register({language:s.getLanguageId(),pattern:s.uri.fsPath,scheme:s.uri.scheme,exclusive:!0},n),this._snippetListener.add(r),a=!0)};this._choiceCompletions={provider:n,enable:c,disable:l}}this._updateState(),this._snippetListener.add(this._editor.onDidChangeModelContent(n=>n.isFlush&&this.cancel())),this._snippetListener.add(this._editor.onDidChangeModel(()=>this.cancel())),this._snippetListener.add(this._editor.onDidChangeCursorSelection(()=>this._updateState()))}}_updateState(){if(!(!this._session||!this._editor.hasModel())){if(this._modelVersionId===this._editor.getModel().getAlternativeVersionId())return this.cancel();if(!this._session.hasPlaceholder)return this.cancel();if(this._session.isAtLastPlaceholder||!this._session.isSelectionWithinPlaceholders())return this._editor.getModel().pushStackElement(),this.cancel();this._inSnippet.set(!0),this._hasPrevTabstop.set(!this._session.isAtFirstPlaceholder),this._hasNextTabstop.set(!this._session.isAtLastPlaceholder),this._handleChoice()}}_handleChoice(){var t;if(!this._session||!this._editor.hasModel()){this._currentChoice=void 0;return}const{activeChoice:e}=this._session;if(!e||!this._choiceCompletions){(t=this._choiceCompletions)==null||t.disable(),this._currentChoice=void 0;return}this._currentChoice!==e.choice&&(this._currentChoice=e.choice,this._choiceCompletions.enable(),queueMicrotask(()=>{eKe(this._editor,this._choiceCompletions.provider)}))}finish(){for(;this._inSnippet.get();)this.next()}cancel(e=!1){var t;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),this._snippetListener.clear(),this._currentChoice=void 0,(t=this._session)==null||t.dispose(),this._session=void 0,this._modelVersionId=-1,e&&this._editor.setSelections([this._editor.getSelection()])}prev(){var e;(e=this._session)==null||e.prev(),this._updateState()}next(){var e;(e=this._session)==null||e.next(),this._updateState()}isInSnippet(){return!!this._inSnippet.get()}},Sw=Sh,Sh.ID="snippetController2",Sh.InSnippetMode=new Pe("inSnippetMode",!1,v("inSnippetMode","Whether the editor in current in snippet mode")),Sh.HasNextTabstop=new Pe("hasNextTabstop",!1,v("hasNextTabstop","Whether there is a next tab stop when in snippet mode")),Sh.HasPrevTabstop=new Pe("hasPrevTabstop",!1,v("hasPrevTabstop","Whether there is a previous tab stop when in snippet mode")),Sh);ia=Sw=oKe([XR(1,Oo),XR(2,Ue),XR(3,ht),XR(4,On)],ia);oi(ia.ID,ia,4);const g5=Bs.bindToContribution(ia.get);Re(new g5({id:"jumpToNextSnippetPlaceholder",precondition:de.and(ia.InSnippetMode,ia.HasNextTabstop),handler:o=>o.next(),kbOpts:{weight:130,kbExpr:B.textInputFocus,primary:2}}));Re(new g5({id:"jumpToPrevSnippetPlaceholder",precondition:de.and(ia.InSnippetMode,ia.HasPrevTabstop),handler:o=>o.prev(),kbOpts:{weight:130,kbExpr:B.textInputFocus,primary:1026}}));Re(new g5({id:"leaveSnippet",precondition:ia.InSnippetMode,handler:o=>o.cancel(!0),kbOpts:{weight:130,kbExpr:B.textInputFocus,primary:9,secondary:[1033]}}));Re(new g5({id:"acceptSnippet",precondition:ia.InSnippetMode,handler:o=>o.finish()}));var rKe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},w9=function(o,e){return function(t,i){e(t,i,o)}};let A$=class extends X{get isAcceptingPartially(){return this._isAcceptingPartially}constructor(e,t,i,n,s,r,a,l,c,u,f,g){super(),this.textModel=e,this.selectedSuggestItem=t,this._textModelVersionId=i,this._positions=n,this._debounceValue=s,this._suggestPreviewEnabled=r,this._suggestPreviewMode=a,this._inlineSuggestMode=l,this._enabled=c,this._instantiationService=u,this._commandService=f,this._languageConfigurationService=g,this._source=this._register(this._instantiationService.createInstance(M$,this.textModel,this._textModelVersionId,this._debounceValue)),this._isActive=Wt(this,!1),this._forceUpdateExplicitlySignal=JS(this),this._selectedInlineCompletionId=Wt(this,void 0),this._primaryPosition=Qe(this,_=>this._positions.read(_)[0]??new G(1,1)),this._isAcceptingPartially=!1,this._preserveCurrentCompletionReasons=new Set([Mf.Redo,Mf.Undo,Mf.AcceptWord]),this._fetchInlineCompletionsPromise=vue({owner:this,createEmptyChangeSummary:()=>({preserveCurrentCompletion:!1,inlineCompletionTriggerKind:ru.Automatic}),handleChange:(_,b)=>(_.didChange(this._textModelVersionId)&&this._preserveCurrentCompletionReasons.has(this._getReason(_.change))?b.preserveCurrentCompletion=!0:_.didChange(this._forceUpdateExplicitlySignal)&&(b.inlineCompletionTriggerKind=ru.Explicit),!0)},(_,b)=>{if(this._forceUpdateExplicitlySignal.read(_),!(this._enabled.read(_)&&this.selectedSuggestItem.read(_)||this._isActive.read(_))){this._source.cancelUpdate();return}this._textModelVersionId.read(_);const S=this._source.suggestWidgetInlineCompletions.get(),L=this.selectedSuggestItem.read(_);if(S&&!L){const A=this._source.inlineCompletions.get();Mn(P=>{(!A||S.request.versionId>A.request.versionId)&&this._source.inlineCompletions.set(S.clone(),P),this._source.clearSuggestWidgetInlineCompletions(P)})}const x=this._primaryPosition.read(_),k={triggerKind:b.inlineCompletionTriggerKind,selectedSuggestionInfo:L==null?void 0:L.toSelectedSuggestionInfo()},E=this.selectedInlineCompletion.get(),N=b.preserveCurrentCompletion||E!=null&&E.forwardStable?E:void 0;return this._source.fetch(x,k,N)}),this._filteredInlineCompletionItems=Ml({owner:this,equalsFn:YA()},_=>{const b=this._source.inlineCompletions.read(_);if(!b)return[];const y=this._primaryPosition.read(_);return b.inlineCompletions.filter(L=>L.isVisible(this.textModel,y,_))}),this.selectedInlineCompletionIndex=Qe(this,_=>{const b=this._selectedInlineCompletionId.read(_),y=this._filteredInlineCompletionItems.read(_),S=this._selectedInlineCompletionId===void 0?-1:y.findIndex(L=>L.semanticId===b);return S===-1?(this._selectedInlineCompletionId.set(void 0,void 0),0):S}),this.selectedInlineCompletion=Qe(this,_=>{const b=this._filteredInlineCompletionItems.read(_),y=this.selectedInlineCompletionIndex.read(_);return b[y]}),this.activeCommands=Ml({owner:this,equalsFn:YA()},_=>{var b;return((b=this.selectedInlineCompletion.read(_))==null?void 0:b.inlineCompletion.source.inlineCompletions.commands)??[]}),this.lastTriggerKind=this._source.inlineCompletions.map(this,_=>_==null?void 0:_.request.context.triggerKind),this.inlineCompletionsCount=Qe(this,_=>{if(this.lastTriggerKind.read(_)===ru.Explicit)return this._filteredInlineCompletionItems.read(_).length}),this.state=Ml({owner:this,equalsFn:(_,b)=>!_||!b?_===b:eae(_.ghostTexts,b.ghostTexts)&&_.inlineCompletion===b.inlineCompletion&&_.suggestItem===b.suggestItem},_=>{const b=this.textModel,y=this.selectedSuggestItem.read(_);if(y){const S=ob(y.toSingleTextEdit(),b),L=this._computeAugmentation(S,_);if(!this._suggestPreviewEnabled.read(_)&&!L)return;const k=(L==null?void 0:L.edit)??S,E=L?L.edit.text.length-S.text.length:0,N=this._suggestPreviewMode.read(_),A=this._positions.read(_),P=[k,...S9(this.textModel,A,k)],H=P.map((Q,te)=>oae(Q,b,N,A[te],E)).filter(Dh),ee=H[0]??new SE(k.range.endLineNumber,[]);return{edits:P,primaryGhostText:ee,ghostTexts:H,inlineCompletion:L==null?void 0:L.completion,suggestItem:y}}else{if(!this._isActive.read(_))return;const S=this.selectedInlineCompletion.read(_);if(!S)return;const L=S.toSingleTextEdit(_),x=this._inlineSuggestMode.read(_),k=this._positions.read(_),E=[L,...S9(this.textModel,k,L)],N=E.map((A,P)=>oae(A,b,x,k[P],0)).filter(Dh);return N[0]?{edits:E,primaryGhostText:N[0],ghostTexts:N,inlineCompletion:S,suggestItem:void 0}:void 0}}),this.ghostTexts=Ml({owner:this,equalsFn:eae},_=>{const b=this.state.read(_);if(b)return b.ghostTexts}),this.primaryGhostText=Ml({owner:this,equalsFn:qpe},_=>{const b=this.state.read(_);if(b)return b==null?void 0:b.primaryGhostText}),this._register(e0(this._fetchInlineCompletionsPromise));let p;this._register(bt(_=>{var S,L;const b=this.state.read(_),y=b==null?void 0:b.inlineCompletion;if((y==null?void 0:y.semanticId)!==(p==null?void 0:p.semanticId)&&(p=y,y)){const x=y.inlineCompletion,k=x.source;(L=(S=k.provider).handleItemDidShow)==null||L.call(S,k.inlineCompletions,x.sourceInlineCompletion,x.insertText)}}))}_getReason(e){return e!=null&&e.isUndoing?Mf.Undo:e!=null&&e.isRedoing?Mf.Redo:this.isAcceptingPartially?Mf.AcceptWord:Mf.Other}async trigger(e){this._isActive.set(!0,e),await this._fetchInlineCompletionsPromise.get()}async triggerExplicitly(e){gC(e,t=>{this._isActive.set(!0,t),this._forceUpdateExplicitlySignal.trigger(t)}),await this._fetchInlineCompletionsPromise.get()}stop(e){gC(e,t=>{this._isActive.set(!1,t),this._source.clear(t)})}_computeAugmentation(e,t){const i=this.textModel,n=this._source.suggestWidgetInlineCompletions.read(t),s=n?n.inlineCompletions:[this.selectedInlineCompletion.read(t)].filter(Dh);return fTe(s,a=>{let l=a.toSingleTextEdit(t);return l=ob(l,i,M.fromPositions(l.range.getStartPosition(),e.range.getEndPosition())),Zpe(l,e)?{completion:a,edit:l}:void 0})}async _deltaSelectedInlineCompletionIndex(e){await this.triggerExplicitly();const t=this._filteredInlineCompletionItems.get()||[];if(t.length>0){const i=(this.selectedInlineCompletionIndex.get()+e+t.length)%t.length;this._selectedInlineCompletionId.set(t[i].semanticId,void 0)}else this._selectedInlineCompletionId.set(void 0,void 0)}async next(){await this._deltaSelectedInlineCompletionIndex(1)}async previous(){await this._deltaSelectedInlineCompletionIndex(-1)}async accept(e){var n;if(e.getModel()!==this.textModel)throw new wi;const t=this.state.get();if(!t||t.primaryGhostText.isEmpty()||!t.inlineCompletion)return;const i=t.inlineCompletion.toInlineCompletion(void 0);if(i.command&&i.source.addRef(),e.pushUndoStop(),i.snippetInfo)e.executeEdits("inlineSuggestion.accept",[Rn.replace(i.range,""),...i.additionalTextEdits]),e.setPosition(i.snippetInfo.range.getStartPosition(),"inlineCompletionAccept"),(n=ia.get(e))==null||n.insert(i.snippetInfo.snippet,{undoStopBefore:!1});else{const s=t.edits,r=bae(s).map(a=>Ke.fromPositions(a));e.executeEdits("inlineSuggestion.accept",[...s.map(a=>Rn.replace(a.range,a.text)),...i.additionalTextEdits]),e.setSelections(r,"inlineCompletionAccept")}this.stop(),i.command&&(await this._commandService.executeCommand(i.command.id,...i.command.arguments||[]).then(void 0,rs),i.source.removeRef())}async acceptNextWord(e){await this._acceptNext(e,(t,i)=>{const n=this.textModel.getLanguageIdAtPosition(t.lineNumber,t.column),s=this._languageConfigurationService.getLanguageConfiguration(n),r=new RegExp(s.wordDefinition.source,s.wordDefinition.flags.replace("g","")),a=i.match(r);let l=0;a&&a.index!==void 0?a.index===0?l=a[0].length:l=a.index:l=i.length;const u=/\s+/g.exec(i);return u&&u.index!==void 0&&u.index+u[0].length<l&&(l=u.index+u[0].length),l},0)}async acceptNextLine(e){await this._acceptNext(e,(t,i)=>{const n=i.match(/\n/);return n&&n.index!==void 0?n.index+1:i.length},1)}async _acceptNext(e,t,i){if(e.getModel()!==this.textModel)throw new wi;const n=this.state.get();if(!n||n.primaryGhostText.isEmpty()||!n.inlineCompletion)return;const s=n.primaryGhostText,r=n.inlineCompletion.toInlineCompletion(void 0);if(r.snippetInfo||r.filterText!==r.insertText){await this.accept(e);return}const a=s.parts[0],l=new G(s.lineNumber,a.column),c=a.text,u=t(l,c);if(u===c.length&&s.parts.length===1){this.accept(e);return}const f=c.substring(0,u),g=this._positions.get(),p=g[0];r.source.addRef();try{this._isAcceptingPartially=!0;try{e.pushUndoStop();const _=M.fromPositions(p,l),b=e.getModel().getValueInRange(_)+f,y=new Mh(_,b),S=[y,...S9(this.textModel,g,y)],L=bae(S).map(x=>Ke.fromPositions(x));e.executeEdits("inlineSuggestion.accept",S.map(x=>Rn.replace(x.range,x.text))),e.setSelections(L,"inlineCompletionPartialAccept"),e.revealPositionInCenterIfOutsideViewport(e.getPosition(),1)}finally{this._isAcceptingPartially=!1}if(r.source.provider.handlePartialAccept){const _=M.fromPositions(r.range.getStartPosition(),dd.ofText(f).addToPosition(l)),b=e.getModel().getValueInRange(_,1);r.source.provider.handlePartialAccept(r.source.inlineCompletions,r.sourceInlineCompletion,b.length,{kind:i})}}finally{r.source.removeRef()}}handleSuggestAccepted(e){var s,r;const t=ob(e.toSingleTextEdit(),this.textModel),i=this._computeAugmentation(t,void 0);if(!i)return;const n=i.completion.inlineCompletion;(r=(s=n.source.provider).handlePartialAccept)==null||r.call(s,n.source.inlineCompletions,n.sourceInlineCompletion,t.text.length,{kind:2})}};A$=rKe([w9(9,nt),w9(10,nn),w9(11,On)],A$);var Mf;(function(o){o[o.Undo=0]="Undo",o[o.Redo=1]="Redo",o[o.AcceptWord=2]="AcceptWord",o[o.Other=3]="Other"})(Mf||(Mf={}));function S9(o,e,t){if(e.length===1)return[];const i=e[0],n=e.slice(1),s=t.range.getStartPosition(),r=t.range.getEndPosition(),a=o.getValueInRange(M.fromPositions(i,r)),l=tae(i,s);if(l.lineNumber<1)return wt(new wi(`positionWithinTextEdit line number should be bigger than 0.
			Invalid subtraction between ${i.toString()} and ${s.toString()}`)),[];const c=aKe(t.text,l);return n.map(u=>{const f=Rqe(tae(u,s),r),g=o.getValueInRange(M.fromPositions(u,f)),p=Om(a,g),_=M.fromPositions(u,u.delta(0,p));return new Mh(_,c)})}function aKe(o,e){let t="";const i=Bke(o);for(let n=e.lineNumber-1;n<i.length;n++)t+=i[n].substring(n===e.lineNumber-1?e.column-1:0);return t}function bae(o){const e=tA.createSortPermutation(o,Yr(s=>s.range,M.compareRangesUsingStarts)),i=new nK(e.apply(o)).getNewRanges();return e.inverse().apply(i).map(s=>s.getEndPosition())}var lKe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Cae=function(o,e){return function(t,i){e(t,i,o)}},qx;class zY{constructor(e){this.name=e}select(e,t,i){if(i.length===0)return 0;const n=i[0].score[0];for(let s=0;s<i.length;s++){const{score:r,completion:a}=i[s];if(r[0]!==n)break;if(a.preselect)return s}return 0}}class yae extends zY{constructor(){super("first")}memorize(e,t,i){}toJSON(){}fromJSON(){}}class cKe extends zY{constructor(){super("recentlyUsed"),this._cache=new $h(300,.66),this._seq=0}memorize(e,t,i){const n=`${e.getLanguageId()}/${i.textLabel}`;this._cache.set(n,{touch:this._seq++,type:i.completion.kind,insertText:i.completion.insertText})}select(e,t,i){if(i.length===0)return 0;const n=e.getLineContent(t.lineNumber).substr(t.column-10,t.column-1);if(/\s$/.test(n))return super.select(e,t,i);const s=i[0].score[0];let r=-1,a=-1,l=-1;for(let c=0;c<i.length&&i[c].score[0]===s;c++){const u=`${e.getLanguageId()}/${i[c].textLabel}`,f=this._cache.peek(u);if(f&&f.touch>l&&f.type===i[c].completion.kind&&f.insertText===i[c].completion.insertText&&(l=f.touch,a=c),i[c].completion.preselect&&r===-1)return r=c}return a!==-1?a:r!==-1?r:0}toJSON(){return this._cache.toJSON()}fromJSON(e){this._cache.clear();const t=0;for(const[i,n]of e)n.touch=t,n.type=typeof n.type=="number"?n.type:uD.fromString(n.type),this._cache.set(i,n);this._seq=this._cache.size}}class dKe extends zY{constructor(){super("recentlyUsedByPrefix"),this._trie=y1.forStrings(),this._seq=0}memorize(e,t,i){const{word:n}=e.getWordUntilPosition(t),s=`${e.getLanguageId()}/${n}`;this._trie.set(s,{type:i.completion.kind,insertText:i.completion.insertText,touch:this._seq++})}select(e,t,i){const{word:n}=e.getWordUntilPosition(t);if(!n)return super.select(e,t,i);const s=`${e.getLanguageId()}/${n}`;let r=this._trie.get(s);if(r||(r=this._trie.findSubstr(s)),r)for(let a=0;a<i.length;a++){const{kind:l,insertText:c}=i[a].completion;if(l===r.type&&c===r.insertText)return a}return super.select(e,t,i)}toJSON(){const e=[];return this._trie.forEach((t,i)=>e.push([i,t])),e.sort((t,i)=>-(t[1].touch-i[1].touch)).forEach((t,i)=>t[1].touch=i),e.slice(0,200)}fromJSON(e){if(this._trie.clear(),e.length>0){this._seq=e[0][1].touch+1;for(const[t,i]of e)i.type=typeof i.type=="number"?i.type:uD.fromString(i.type),this._trie.set(t,i)}}}var Lm;let P$=(Lm=class{constructor(e,t){this._storageService=e,this._configService=t,this._disposables=new le,this._persistSoon=new Oi(()=>this._saveState(),500),this._disposables.add(e.onWillSaveState(i=>{i.reason===HD.SHUTDOWN&&this._saveState()}))}dispose(){this._disposables.dispose(),this._persistSoon.dispose()}memorize(e,t,i){this._withStrategy(e,t).memorize(e,t,i),this._persistSoon.schedule()}select(e,t,i){return this._withStrategy(e,t).select(e,t,i)}_withStrategy(e,t){var n;const i=this._configService.getValue("editor.suggestSelection",{overrideIdentifier:e.getLanguageIdAtPosition(t.lineNumber,t.column),resource:e.uri});if(((n=this._strategy)==null?void 0:n.name)!==i){this._saveState();const s=qx._strategyCtors.get(i)||yae;this._strategy=new s;try{const a=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,l=this._storageService.get(`${qx._storagePrefix}/${i}`,a);l&&this._strategy.fromJSON(JSON.parse(l))}catch{}}return this._strategy}_saveState(){if(this._strategy){const t=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,i=JSON.stringify(this._strategy);this._storageService.store(`${qx._storagePrefix}/${this._strategy.name}`,i,t,1)}}},qx=Lm,Lm._strategyCtors=new Map([["recentlyUsedByPrefix",dKe],["recentlyUsed",cKe],["first",yae]]),Lm._storagePrefix="suggest/memories",Lm);P$=qx=lKe([Cae(0,md),Cae(1,Ht)],P$);const p5=Gt("ISuggestMemories");ei(p5,P$,1);var uKe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},hKe=function(o,e){return function(t,i){e(t,i,o)}},O$,Pb;let TO=(Pb=class{constructor(e,t){this._editor=e,this._enabled=!1,this._ckAtEnd=O$.AtEnd.bindTo(t),this._configListener=this._editor.onDidChangeConfiguration(i=>i.hasChanged(124)&&this._update()),this._update()}dispose(){var e;this._configListener.dispose(),(e=this._selectionListener)==null||e.dispose(),this._ckAtEnd.reset()}_update(){const e=this._editor.getOption(124)==="on";if(this._enabled!==e)if(this._enabled=e,this._enabled){const t=()=>{if(!this._editor.hasModel()){this._ckAtEnd.set(!1);return}const i=this._editor.getModel(),n=this._editor.getSelection(),s=i.getWordAtPosition(n.getStartPosition());if(!s){this._ckAtEnd.set(!1);return}this._ckAtEnd.set(s.endColumn===n.getStartPosition().column)};this._selectionListener=this._editor.onDidChangeCursorSelection(t),t()}else this._selectionListener&&(this._ckAtEnd.reset(),this._selectionListener.dispose(),this._selectionListener=void 0)}},O$=Pb,Pb.AtEnd=new Pe("atEndOfWord",!1),Pb);TO=O$=uKe([hKe(1,ht)],TO);var fKe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},gKe=function(o,e){return function(t,i){e(t,i,o)}},Kx,Ob;let MS=(Ob=class{constructor(e,t){this._editor=e,this._index=0,this._ckOtherSuggestions=Kx.OtherSuggestions.bindTo(t)}dispose(){this.reset()}reset(){var e;this._ckOtherSuggestions.reset(),(e=this._listener)==null||e.dispose(),this._model=void 0,this._acceptNext=void 0,this._ignore=!1}set({model:e,index:t},i){if(e.items.length===0){this.reset();return}if(Kx._moveIndex(!0,e,t)===t){this.reset();return}this._acceptNext=i,this._model=e,this._index=t,this._listener=this._editor.onDidChangeCursorPosition(()=>{this._ignore||this.reset()}),this._ckOtherSuggestions.set(!0)}static _moveIndex(e,t,i){let n=i;for(let s=t.items.length;s>0&&(n=(n+t.items.length+(e?1:-1))%t.items.length,!(n===i||!t.items[n].completion.additionalTextEdits));s--);return n}next(){this._move(!0)}prev(){this._move(!1)}_move(e){if(this._model)try{this._ignore=!0,this._index=Kx._moveIndex(e,this._model,this._index),this._acceptNext({index:this._index,item:this._model.items[this._index],model:this._model})}finally{this._ignore=!1}}},Kx=Ob,Ob.OtherSuggestions=new Pe("hasOtherSuggestions",!1),Ob);MS=Kx=fKe([gKe(1,ht)],MS);class pKe{constructor(e,t,i,n){this._disposables=new le,this._disposables.add(i.onDidSuggest(s=>{s.completionModel.items.length===0&&this.reset()})),this._disposables.add(i.onDidCancel(s=>{this.reset()})),this._disposables.add(t.onDidShow(()=>this._onItem(t.getFocusedItem()))),this._disposables.add(t.onDidFocus(this._onItem,this)),this._disposables.add(t.onDidHide(this.reset,this)),this._disposables.add(e.onWillType(s=>{if(this._active&&!t.isFrozen()&&i.state!==0){const r=s.charCodeAt(s.length-1);this._active.acceptCharacters.has(r)&&e.getOption(0)&&n(this._active.item)}}))}_onItem(e){if(!e||!wr(e.item.completion.commitCharacters)){this.reset();return}if(this._active&&this._active.item.item===e.item)return;const t=new DA;for(const i of e.item.completion.commitCharacters)i.length>0&&t.add(i.charCodeAt(0));this._active={acceptCharacters:t,item:e}}reset(){this._active=void 0}dispose(){this._disposables.dispose()}}const hc=class hc{async provideSelectionRanges(e,t){const i=[];for(const n of t){const s=[];i.push(s);const r=new Map;await new Promise(a=>hc._bracketsRightYield(a,0,e,n,r)),await new Promise(a=>hc._bracketsLeftYield(a,0,e,n,r,s))}return i}static _bracketsRightYield(e,t,i,n,s){const r=new Map,a=Date.now();for(;;){if(t>=hc._maxRounds){e();break}if(!n){e();break}const l=i.bracketPairs.findNextBracket(n);if(!l){e();break}if(Date.now()-a>hc._maxDuration){setTimeout(()=>hc._bracketsRightYield(e,t+1,i,n,s));break}if(l.bracketInfo.isOpeningBracket){const u=l.bracketInfo.bracketText,f=r.has(u)?r.get(u):0;r.set(u,f+1)}else{const u=l.bracketInfo.getOpeningBrackets()[0].bracketText;let f=r.has(u)?r.get(u):0;if(f-=1,r.set(u,Math.max(0,f)),f<0){let g=s.get(u);g||(g=new jr,s.set(u,g)),g.push(l.range)}}n=l.range.getEndPosition()}}static _bracketsLeftYield(e,t,i,n,s,r){const a=new Map,l=Date.now();for(;;){if(t>=hc._maxRounds&&s.size===0){e();break}if(!n){e();break}const c=i.bracketPairs.findPrevBracket(n);if(!c){e();break}if(Date.now()-l>hc._maxDuration){setTimeout(()=>hc._bracketsLeftYield(e,t+1,i,n,s,r));break}if(c.bracketInfo.isOpeningBracket){const f=c.bracketInfo.bracketText;let g=a.has(f)?a.get(f):0;if(g-=1,a.set(f,Math.max(0,g)),g<0){const p=s.get(f);if(p){const _=p.shift();p.size===0&&s.delete(f);const b=M.fromPositions(c.range.getEndPosition(),_.getStartPosition()),y=M.fromPositions(c.range.getStartPosition(),_.getEndPosition());r.push({range:b}),r.push({range:y}),hc._addBracketLeading(i,y,r)}}}else{const f=c.bracketInfo.getOpeningBrackets()[0].bracketText,g=a.has(f)?a.get(f):0;a.set(f,g+1)}n=c.range.getStartPosition()}}static _addBracketLeading(e,t,i){if(t.startLineNumber===t.endLineNumber)return;const n=t.startLineNumber,s=e.getLineFirstNonWhitespaceColumn(n);s!==0&&s!==t.startColumn&&(i.push({range:M.fromPositions(new G(n,s),t.getEndPosition())}),i.push({range:M.fromPositions(new G(n,1),t.getEndPosition())}));const r=n-1;if(r>0){const a=e.getLineFirstNonWhitespaceColumn(r);a===t.startColumn&&a!==e.getLineLastNonWhitespaceColumn(r)&&(i.push({range:M.fromPositions(new G(r,a),t.getEndPosition())}),i.push({range:M.fromPositions(new G(r,1),t.getEndPosition())}))}}};hc._maxDuration=30,hc._maxRounds=2;let NO=hc;const lh=class lh{static async create(e,t){if(!t.getOption(119).localityBonus||!t.hasModel())return lh.None;const i=t.getModel(),n=t.getPosition();if(!e.canComputeWordRanges(i.uri))return lh.None;const[s]=await new NO().provideSelectionRanges(i,[n]);if(s.length===0)return lh.None;const r=await e.computeWordRanges(i.uri,s[0].range);if(!r)return lh.None;const a=i.getWordUntilPosition(n);return delete r[a.word],new class extends lh{distance(l,c){if(!n.equals(t.getPosition()))return 0;if(c.kind===17)return 2<<20;const u=typeof c.label=="string"?c.label:c.label.label,f=r[u];if(gle(f))return 2<<20;const g=oD(f,M.fromPositions(l),M.compareRangesUsingStarts),p=g>=0?f[g]:f[Math.max(0,~g-1)];let _=s.length;for(const b of s){if(!M.containsRange(b.range,p))break;_-=1}return _}}}};lh.None=new class extends lh{distance(){return 0}};let RO=lh,wae=class{constructor(e,t){this.leadingLineContent=e,this.characterCountDelta=t}};class Up{constructor(e,t,i,n,s,r,a=MD.default,l=void 0){this.clipboardText=l,this._snippetCompareFn=Up._compareCompletionItems,this._items=e,this._column=t,this._wordDistance=n,this._options=s,this._refilterKind=1,this._lineContext=i,this._fuzzyScoreOptions=a,r==="top"?this._snippetCompareFn=Up._compareCompletionItemsSnippetsUp:r==="bottom"&&(this._snippetCompareFn=Up._compareCompletionItemsSnippetsDown)}get lineContext(){return this._lineContext}set lineContext(e){(this._lineContext.leadingLineContent!==e.leadingLineContent||this._lineContext.characterCountDelta!==e.characterCountDelta)&&(this._refilterKind=this._lineContext.characterCountDelta<e.characterCountDelta&&this._filteredItems?2:1,this._lineContext=e)}get items(){return this._ensureCachedState(),this._filteredItems}getItemsByProvider(){return this._ensureCachedState(),this._itemsByProvider}getIncompleteProvider(){this._ensureCachedState();const e=new Set;for(const[t,i]of this.getItemsByProvider())i.length>0&&i[0].container.incomplete&&e.add(t);return e}get stats(){return this._ensureCachedState(),this._stats}_ensureCachedState(){this._refilterKind!==0&&this._createCachedState()}_createCachedState(){this._itemsByProvider=new Map;const e=[],{leadingLineContent:t,characterCountDelta:i}=this._lineContext;let n="",s="";const r=this._refilterKind===1?this._items:this._filteredItems,a=[],l=!this._options.filterGraceful||r.length>2e3?hC:sAe;for(let c=0;c<r.length;c++){const u=r[c];if(u.isInvalid)continue;const f=this._itemsByProvider.get(u.provider);f?f.push(u):this._itemsByProvider.set(u.provider,[u]);const g=u.position.column-u.editStart.column,p=g+i-(u.position.column-this._column);if(n.length!==p&&(n=p===0?"":t.slice(-p),s=n.toLowerCase()),u.word=n,p===0)u.score=du.Default;else{let _=0;for(;_<g;){const b=n.charCodeAt(_);if(b===32||b===9)_+=1;else break}if(_>=p)u.score=du.Default;else if(typeof u.completion.filterText=="string"){const b=l(n,s,_,u.completion.filterText,u.filterTextLow,0,this._fuzzyScoreOptions);if(!b)continue;J8(u.completion.filterText,u.textLabel)===0?u.score=b:(u.score=eAe(n,s,_,u.textLabel,u.labelLow,0),u.score[0]=b[0])}else{const b=l(n,s,_,u.textLabel,u.labelLow,0,this._fuzzyScoreOptions);if(!b)continue;u.score=b}}u.idx=c,u.distance=this._wordDistance.distance(u.position,u.completion),a.push(u),e.push(u.textLabel.length)}this._filteredItems=a.sort(this._snippetCompareFn),this._refilterKind=0,this._stats={pLabelLen:e.length?$9(e.length-.85,e,(c,u)=>c-u):0}}static _compareCompletionItems(e,t){return e.score[0]>t.score[0]?-1:e.score[0]<t.score[0]?1:e.distance<t.distance?-1:e.distance>t.distance?1:e.idx<t.idx?-1:e.idx>t.idx?1:0}static _compareCompletionItemsSnippetsDown(e,t){if(e.completion.kind!==t.completion.kind){if(e.completion.kind===27)return 1;if(t.completion.kind===27)return-1}return Up._compareCompletionItems(e,t)}static _compareCompletionItemsSnippetsUp(e,t){if(e.completion.kind!==t.completion.kind){if(e.completion.kind===27)return-1;if(t.completion.kind===27)return 1}return Up._compareCompletionItems(e,t)}}var mKe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Sp=function(o,e){return function(t,i){e(t,i,o)}},F$;class ev{static shouldAutoTrigger(e){if(!e.hasModel())return!1;const t=e.getModel(),i=e.getPosition();t.tokenization.tokenizeIfCheap(i.lineNumber);const n=t.getWordAtPosition(i);return!(!n||n.endColumn!==i.column&&n.startColumn+1!==i.column||!isNaN(Number(n.word)))}constructor(e,t,i){this.leadingLineContent=e.getLineContent(t.lineNumber).substr(0,t.column-1),this.leadingWord=e.getWordUntilPosition(t),this.lineNumber=t.lineNumber,this.column=t.column,this.triggerOptions=i}}function _Ke(o,e,t){if(!e.getContextKeyValue(ol.inlineSuggestionVisible.key))return!0;const i=e.getContextKeyValue(ol.suppressSuggestions.key);return i!==void 0?!i:!o.getOption(62).suppressSuggestions}function vKe(o,e,t){if(!e.getContextKeyValue("inlineSuggestionVisible"))return!0;const i=e.getContextKeyValue(ol.suppressSuggestions.key);return i!==void 0?!i:!o.getOption(62).suppressSuggestions}let MO=F$=class{constructor(e,t,i,n,s,r,a,l,c){this._editor=e,this._editorWorkerService=t,this._clipboardService=i,this._telemetryService=n,this._logService=s,this._contextKeyService=r,this._configurationService=a,this._languageFeaturesService=l,this._envService=c,this._toDispose=new le,this._triggerCharacterListener=new le,this._triggerQuickSuggest=new gd,this._triggerState=void 0,this._completionDisposables=new le,this._onDidCancel=new Y,this._onDidTrigger=new Y,this._onDidSuggest=new Y,this.onDidCancel=this._onDidCancel.event,this.onDidTrigger=this._onDidTrigger.event,this.onDidSuggest=this._onDidSuggest.event,this._telemetryGate=0,this._currentSelection=this._editor.getSelection()||new Ke(1,1,1,1),this._toDispose.add(this._editor.onDidChangeModel(()=>{this._updateTriggerCharacters(),this.cancel()})),this._toDispose.add(this._editor.onDidChangeModelLanguage(()=>{this._updateTriggerCharacters(),this.cancel()})),this._toDispose.add(this._editor.onDidChangeConfiguration(()=>{this._updateTriggerCharacters()})),this._toDispose.add(this._languageFeaturesService.completionProvider.onDidChange(()=>{this._updateTriggerCharacters(),this._updateActiveSuggestSession()}));let u=!1;this._toDispose.add(this._editor.onDidCompositionStart(()=>{u=!0})),this._toDispose.add(this._editor.onDidCompositionEnd(()=>{u=!1,this._onCompositionEnd()})),this._toDispose.add(this._editor.onDidChangeCursorSelection(f=>{u||this._onCursorChange(f)})),this._toDispose.add(this._editor.onDidChangeModelContent(()=>{!u&&this._triggerState!==void 0&&this._refilterCompletionItems()})),this._updateTriggerCharacters()}dispose(){$i(this._triggerCharacterListener),$i([this._onDidCancel,this._onDidSuggest,this._onDidTrigger,this._triggerQuickSuggest]),this._toDispose.dispose(),this._completionDisposables.dispose(),this.cancel()}_updateTriggerCharacters(){if(this._triggerCharacterListener.clear(),this._editor.getOption(92)||!this._editor.hasModel()||!this._editor.getOption(122))return;const e=new Map;for(const i of this._languageFeaturesService.completionProvider.all(this._editor.getModel()))for(const n of i.triggerCharacters||[]){let s=e.get(n);s||(s=new Set,e.set(n,s)),s.add(i)}const t=i=>{var r;if(!vKe(this._editor,this._contextKeyService,this._configurationService)||ev.shouldAutoTrigger(this._editor))return;if(!i){const a=this._editor.getPosition();i=this._editor.getModel().getLineContent(a.lineNumber).substr(0,a.column-1)}let n="";oC(i.charCodeAt(i.length-1))?qs(i.charCodeAt(i.length-2))&&(n=i.substr(i.length-2)):n=i.charAt(i.length-1);const s=e.get(n);if(s){const a=new Map;if(this._completionModel)for(const[l,c]of this._completionModel.getItemsByProvider())s.has(l)||a.set(l,c);this.trigger({auto:!0,triggerKind:1,triggerCharacter:n,retrigger:!!this._completionModel,clipboardText:(r=this._completionModel)==null?void 0:r.clipboardText,completionOptions:{providerFilter:s,providerItemsToReuse:a}})}};this._triggerCharacterListener.add(this._editor.onDidType(t)),this._triggerCharacterListener.add(this._editor.onDidCompositionEnd(()=>t()))}get state(){return this._triggerState?this._triggerState.auto?2:1:0}cancel(e=!1){var t;this._triggerState!==void 0&&(this._triggerQuickSuggest.cancel(),(t=this._requestToken)==null||t.cancel(),this._requestToken=void 0,this._triggerState=void 0,this._completionModel=void 0,this._context=void 0,this._onDidCancel.fire({retrigger:e}))}clear(){this._completionDisposables.clear()}_updateActiveSuggestSession(){this._triggerState!==void 0&&(!this._editor.hasModel()||!this._languageFeaturesService.completionProvider.has(this._editor.getModel())?this.cancel():this.trigger({auto:this._triggerState.auto,retrigger:!0}))}_onCursorChange(e){if(!this._editor.hasModel())return;const t=this._currentSelection;if(this._currentSelection=this._editor.getSelection(),!e.selection.isEmpty()||e.reason!==0&&e.reason!==3||e.source!=="keyboard"&&e.source!=="deleteLeft"){this.cancel();return}this._triggerState===void 0&&e.reason===0?(t.containsRange(this._currentSelection)||t.getEndPosition().isBeforeOrEqual(this._currentSelection.getPosition()))&&this._doTriggerQuickSuggest():this._triggerState!==void 0&&e.reason===3&&this._refilterCompletionItems()}_onCompositionEnd(){this._triggerState===void 0?this._doTriggerQuickSuggest():this._refilterCompletionItems()}_doTriggerQuickSuggest(){var e;Gw.isAllOff(this._editor.getOption(90))||this._editor.getOption(119).snippetsPreventQuickSuggestions&&((e=ia.get(this._editor))!=null&&e.isInSnippet())||(this.cancel(),this._triggerQuickSuggest.cancelAndSet(()=>{if(this._triggerState!==void 0||!ev.shouldAutoTrigger(this._editor)||!this._editor.hasModel()||!this._editor.hasWidgetFocus())return;const t=this._editor.getModel(),i=this._editor.getPosition(),n=this._editor.getOption(90);if(!Gw.isAllOff(n)){if(!Gw.isAllOn(n)){t.tokenization.tokenizeIfCheap(i.lineNumber);const s=t.tokenization.getLineTokens(i.lineNumber),r=s.getStandardTokenType(s.findTokenIndexAtOffset(Math.max(i.column-1-1,0)));if(Gw.valueFor(n,r)!=="on")return}_Ke(this._editor,this._contextKeyService,this._configurationService)&&this._languageFeaturesService.completionProvider.has(t)&&this.trigger({auto:!0})}},this._editor.getOption(91)))}_refilterCompletionItems(){ui(this._editor.hasModel()),ui(this._triggerState!==void 0);const e=this._editor.getModel(),t=this._editor.getPosition(),i=new ev(e,t,{...this._triggerState,refilter:!0});this._onNewContext(i)}trigger(e){var g,p,_;if(!this._editor.hasModel())return;const t=this._editor.getModel(),i=new ev(t,this._editor.getPosition(),e);this.cancel(e.retrigger),this._triggerState=e,this._onDidTrigger.fire({auto:e.auto,shy:e.shy??!1,position:this._editor.getPosition()}),this._context=i;let n={triggerKind:e.triggerKind??0};e.triggerCharacter&&(n={triggerKind:1,triggerCharacter:e.triggerCharacter}),this._requestToken=new An;const s=this._editor.getOption(113);let r=1;switch(s){case"top":r=0;break;case"bottom":r=2;break}const{itemKind:a,showDeprecated:l}=F$.createSuggestFilter(this._editor),c=new LE(r,((g=e.completionOptions)==null?void 0:g.kindFilter)??a,(p=e.completionOptions)==null?void 0:p.providerFilter,(_=e.completionOptions)==null?void 0:_.providerItemsToReuse,l),u=RO.create(this._editorWorkerService,this._editor),f=HY(this._languageFeaturesService.completionProvider,t,this._editor.getPosition(),c,n,this._requestToken.token);Promise.all([f,u]).then(async([b,y])=>{var E;if((E=this._requestToken)==null||E.dispose(),!this._editor.hasModel())return;let S=e==null?void 0:e.clipboardText;if(!S&&b.needsClipboard&&(S=await this._clipboardService.readText()),this._triggerState===void 0)return;const L=this._editor.getModel(),x=new ev(L,this._editor.getPosition(),e),k={...MD.default,firstMatchCanBeWeak:!this._editor.getOption(119).matchOnWordStartOnly};if(this._completionModel=new Up(b.items,this._context.column,{leadingLineContent:x.leadingLineContent,characterCountDelta:x.column-this._context.column},y,this._editor.getOption(119),this._editor.getOption(113),k,S),this._completionDisposables.add(b.disposable),this._onNewContext(x),this._reportDurationsTelemetry(b.durations),!this._envService.isBuilt||this._envService.isExtensionDevelopment)for(const N of b.items)N.isInvalid&&this._logService.warn(`[suggest] did IGNORE invalid completion item from ${N.provider._debugDisplayName}`,N.completion)}).catch(wt)}_reportDurationsTelemetry(e){this._telemetryGate++%230===0&&setTimeout(()=>{this._telemetryService.publicLog2("suggest.durations.json",{data:JSON.stringify(e)}),this._logService.debug("suggest.durations.json",e)})}static createSuggestFilter(e){const t=new Set;e.getOption(113)==="none"&&t.add(27);const n=e.getOption(119);return n.showMethods||t.add(0),n.showFunctions||t.add(1),n.showConstructors||t.add(2),n.showFields||t.add(3),n.showVariables||t.add(4),n.showClasses||t.add(5),n.showStructs||t.add(6),n.showInterfaces||t.add(7),n.showModules||t.add(8),n.showProperties||t.add(9),n.showEvents||t.add(10),n.showOperators||t.add(11),n.showUnits||t.add(12),n.showValues||t.add(13),n.showConstants||t.add(14),n.showEnums||t.add(15),n.showEnumMembers||t.add(16),n.showKeywords||t.add(17),n.showWords||t.add(18),n.showColors||t.add(19),n.showFiles||t.add(20),n.showReferences||t.add(21),n.showColors||t.add(22),n.showFolders||t.add(23),n.showTypeParameters||t.add(24),n.showSnippets||t.add(27),n.showUsers||t.add(25),n.showIssues||t.add(26),{itemKind:t,showDeprecated:n.showDeprecated}}_onNewContext(e){if(this._context){if(e.lineNumber!==this._context.lineNumber){this.cancel();return}if(Ui(e.leadingLineContent)!==Ui(this._context.leadingLineContent)){this.cancel();return}if(e.column<this._context.column){e.leadingWord.word?this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0}):this.cancel();return}if(this._completionModel){if(e.leadingWord.word.length!==0&&e.leadingWord.startColumn>this._context.leadingWord.startColumn){if(ev.shouldAutoTrigger(this._editor)&&this._context){const i=this._completionModel.getItemsByProvider();this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0,clipboardText:this._completionModel.clipboardText,completionOptions:{providerItemsToReuse:i}})}return}if(e.column>this._context.column&&this._completionModel.getIncompleteProvider().size>0&&e.leadingWord.word.length!==0){const t=new Map,i=new Set;for(const[n,s]of this._completionModel.getItemsByProvider())s.length>0&&s[0].container.incomplete?i.add(n):t.set(n,s);this.trigger({auto:this._context.triggerOptions.auto,triggerKind:2,retrigger:!0,clipboardText:this._completionModel.clipboardText,completionOptions:{providerFilter:i,providerItemsToReuse:t}})}else{const t=this._completionModel.lineContext;let i=!1;if(this._completionModel.lineContext={leadingLineContent:e.leadingLineContent,characterCountDelta:e.column-this._context.column},this._completionModel.items.length===0){const n=ev.shouldAutoTrigger(this._editor);if(!this._context){this.cancel();return}if(n&&this._context.leadingWord.endColumn<e.leadingWord.startColumn){this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0});return}if(this._context.triggerOptions.auto){this.cancel();return}else if(this._completionModel.lineContext=t,i=this._completionModel.items.length>0,i&&e.leadingWord.word.length===0){this.cancel();return}}this._onDidSuggest.fire({completionModel:this._completionModel,triggerOptions:e.triggerOptions,isFrozen:i})}}}}};MO=F$=mKe([Sp(1,Aa),Sp(2,Bg),Sp(3,tr),Sp(4,Oo),Sp(5,ht),Sp(6,Ht),Sp(7,Ue),Sp(8,aK)],MO);const aF=class aF{constructor(e,t){this._disposables=new le,this._lastOvertyped=[],this._locked=!1,this._disposables.add(e.onWillType(()=>{if(this._locked||!e.hasModel())return;const i=e.getSelections(),n=i.length;let s=!1;for(let a=0;a<n;a++)if(!i[a].isEmpty()){s=!0;break}if(!s){this._lastOvertyped.length!==0&&(this._lastOvertyped.length=0);return}this._lastOvertyped=[];const r=e.getModel();for(let a=0;a<n;a++){const l=i[a];if(r.getValueLengthInRange(l)>aF._maxSelectionLength)return;this._lastOvertyped[a]={value:r.getValueInRange(l),multiline:l.startLineNumber!==l.endLineNumber}}})),this._disposables.add(t.onDidTrigger(i=>{this._locked=!0})),this._disposables.add(t.onDidCancel(i=>{this._locked=!1}))}getLastOvertypedInfo(e){if(e>=0&&e<this._lastOvertyped.length)return this._lastOvertyped[e]}dispose(){this._disposables.dispose()}};aF._maxSelectionLength=51200;let B$=aF;var bKe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},L9=function(o,e){return function(t,i){e(t,i,o)}};let W$=class{constructor(e,t,i,n,s){this._menuId=t,this._menuService=n,this._contextKeyService=s,this._menuDisposables=new le,this.element=ge(e,xe(".suggest-status-bar"));const r=a=>a instanceof il?i.createInstance(WK,a,{useComma:!0}):void 0;this._leftActions=new zl(this.element,{actionViewItemProvider:r}),this._rightActions=new zl(this.element,{actionViewItemProvider:r}),this._leftActions.domNode.classList.add("left"),this._rightActions.domNode.classList.add("right")}dispose(){this._menuDisposables.dispose(),this._leftActions.dispose(),this._rightActions.dispose(),this.element.remove()}show(){const e=this._menuService.createMenu(this._menuId,this._contextKeyService),t=()=>{const i=[],n=[];for(const[s,r]of e.getActions())s==="left"?i.push(...r):n.push(...r);this._leftActions.clear(),this._leftActions.push(i),this._rightActions.clear(),this._rightActions.push(n)};this._menuDisposables.add(e.onDidChange(()=>t())),this._menuDisposables.add(e)}hide(){this._menuDisposables.clear()}};W$=bKe([L9(2,nt),L9(3,Gl),L9(4,ht)],W$);var CKe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},yKe=function(o,e){return function(t,i){e(t,i,o)}};function UY(o){return!!o&&!!(o.completion.documentation||o.completion.detail&&o.completion.detail!==o.completion.label)}let H$=class{constructor(e,t){this._editor=e,this._onDidClose=new Y,this.onDidClose=this._onDidClose.event,this._onDidChangeContents=new Y,this.onDidChangeContents=this._onDidChangeContents.event,this._disposables=new le,this._renderDisposeable=new le,this._borderWidth=1,this._size=new Ri(330,0),this.domNode=xe(".suggest-details"),this.domNode.classList.add("no-docs"),this._markdownRenderer=t.createInstance(kg,{editor:e}),this._body=xe(".body"),this._scrollbar=new nI(this._body,{alwaysConsumeMouseWheel:!0}),ge(this.domNode,this._scrollbar.getDomNode()),this._disposables.add(this._scrollbar),this._header=ge(this._body,xe(".header")),this._close=ge(this._header,xe("span"+ut.asCSSSelector(Se.close))),this._close.title=v("details.close","Close"),this._type=ge(this._header,xe("p.type")),this._docs=ge(this._body,xe("p.docs")),this._configureFont(),this._disposables.add(this._editor.onDidChangeConfiguration(i=>{i.hasChanged(50)&&this._configureFont()}))}dispose(){this._disposables.dispose(),this._renderDisposeable.dispose()}_configureFont(){const e=this._editor.getOptions(),t=e.get(50),i=t.getMassagedFontFamily(),n=e.get(120)||t.fontSize,s=e.get(121)||t.lineHeight,r=t.fontWeight,a=`${n}px`,l=`${s}px`;this.domNode.style.fontSize=a,this.domNode.style.lineHeight=`${s/n}`,this.domNode.style.fontWeight=r,this.domNode.style.fontFeatureSettings=t.fontFeatureSettings,this._type.style.fontFamily=i,this._close.style.height=l,this._close.style.width=l}getLayoutInfo(){const e=this._editor.getOption(121)||this._editor.getOption(50).lineHeight,t=this._borderWidth,i=t*2;return{lineHeight:e,borderWidth:t,borderHeight:i,verticalPadding:22,horizontalPadding:14}}renderLoading(){this._type.textContent=v("loading","Loading..."),this._docs.textContent="",this.domNode.classList.remove("no-docs","no-type"),this.layout(this.size.width,this.getLayoutInfo().lineHeight*2),this._onDidChangeContents.fire(this)}renderItem(e,t){var s;this._renderDisposeable.clear();let{detail:i,documentation:n}=e.completion;if(t){let r="";r+=`score: ${e.score[0]}
`,r+=`prefix: ${e.word??"(no prefix)"}
`,r+=`word: ${e.completion.filterText?e.completion.filterText+" (filterText)":e.textLabel}
`,r+=`distance: ${e.distance} (localityBonus-setting)
`,r+=`index: ${e.idx}, based on ${e.completion.sortText&&`sortText: "${e.completion.sortText}"`||"label"}
`,r+=`commit_chars: ${(s=e.completion.commitCharacters)==null?void 0:s.join("")}
`,n=new Xo().appendCodeblock("empty",r),i=`Provider: ${e.provider._debugDisplayName}`}if(!t&&!UY(e)){this.clearContents();return}if(this.domNode.classList.remove("no-docs","no-type"),i){const r=i.length>1e5?`${i.substr(0,1e5)}`:i;this._type.textContent=r,this._type.title=r,Za(this._type),this._type.classList.toggle("auto-wrap",!/\r?\n^\s+/gmi.test(r))}else bo(this._type),this._type.title="",Hr(this._type),this.domNode.classList.add("no-type");if(bo(this._docs),typeof n=="string")this._docs.classList.remove("markdown-docs"),this._docs.textContent=n;else if(n){this._docs.classList.add("markdown-docs"),bo(this._docs);const r=this._markdownRenderer.render(n);this._docs.appendChild(r.element),this._renderDisposeable.add(r),this._renderDisposeable.add(this._markdownRenderer.onDidRenderAsync(()=>{this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}))}this.domNode.style.userSelect="text",this.domNode.tabIndex=-1,this._close.onmousedown=r=>{r.preventDefault(),r.stopPropagation()},this._close.onclick=r=>{r.preventDefault(),r.stopPropagation(),this._onDidClose.fire()},this._body.scrollTop=0,this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}clearContents(){this.domNode.classList.add("no-docs"),this._type.textContent="",this._docs.textContent=""}get isEmpty(){return this.domNode.classList.contains("no-docs")}get size(){return this._size}layout(e,t){const i=new Ri(e,t);Ri.equals(i,this._size)||(this._size=i,qDe(this.domNode,e,t)),this._scrollbar.scanDomNode()}scrollDown(e=8){this._body.scrollTop+=e}scrollUp(e=8){this._body.scrollTop-=e}scrollTop(){this._body.scrollTop=0}scrollBottom(){this._body.scrollTop=this._body.scrollHeight}pageDown(){this.scrollDown(80)}pageUp(){this.scrollUp(80)}set borderWidth(e){this._borderWidth=e}get borderWidth(){return this._borderWidth}};H$=CKe([yKe(1,nt)],H$);class wKe{constructor(e,t){this.widget=e,this._editor=t,this.allowEditorOverflow=!0,this._disposables=new le,this._added=!1,this._preferAlignAtTop=!0,this._resizable=new wY,this._resizable.domNode.classList.add("suggest-details-container"),this._resizable.domNode.appendChild(e.domNode),this._resizable.enableSashes(!1,!0,!0,!1);let i,n,s=0,r=0;this._disposables.add(this._resizable.onDidWillResize(()=>{i=this._topLeft,n=this._resizable.size})),this._disposables.add(this._resizable.onDidResize(a=>{if(i&&n){this.widget.layout(a.dimension.width,a.dimension.height);let l=!1;a.west&&(r=n.width-a.dimension.width,l=!0),a.north&&(s=n.height-a.dimension.height,l=!0),l&&this._applyTopLeft({top:i.top+s,left:i.left+r})}a.done&&(i=void 0,n=void 0,s=0,r=0,this._userSize=a.dimension)})),this._disposables.add(this.widget.onDidChangeContents(()=>{this._anchorBox&&this._placeAtAnchor(this._anchorBox,this._userSize??this.widget.size,this._preferAlignAtTop)}))}dispose(){this._resizable.dispose(),this._disposables.dispose(),this.hide()}getId(){return"suggest.details"}getDomNode(){return this._resizable.domNode}getPosition(){return this._topLeft?{preference:this._topLeft}:null}show(){this._added||(this._editor.addOverlayWidget(this),this._added=!0)}hide(e=!1){this._resizable.clearSashHoverState(),this._added&&(this._editor.removeOverlayWidget(this),this._added=!1,this._anchorBox=void 0,this._topLeft=void 0),e&&(this._userSize=void 0,this.widget.clearContents())}placeAtAnchor(e,t){const i=e.getBoundingClientRect();this._anchorBox=i,this._preferAlignAtTop=t,this._placeAtAnchor(this._anchorBox,this._userSize??this.widget.size,t)}_placeAtAnchor(e,t,i){const n=Wm(this.getDomNode().ownerDocument.body),s=this.widget.getLayoutInfo(),r=new Ri(220,2*s.lineHeight),a=e.top,l=function(){const E=n.width-(e.left+e.width+s.borderWidth+s.horizontalPadding),N=-s.borderWidth+e.left+e.width,A=new Ri(E,n.height-e.top-s.borderHeight-s.verticalPadding),P=A.with(void 0,e.top+e.height-s.borderHeight-s.verticalPadding);return{top:a,left:N,fit:E-t.width,maxSizeTop:A,maxSizeBottom:P,minSize:r.with(Math.min(E,r.width))}}(),c=function(){const E=e.left-s.borderWidth-s.horizontalPadding,N=Math.max(s.horizontalPadding,e.left-t.width-s.borderWidth),A=new Ri(E,n.height-e.top-s.borderHeight-s.verticalPadding),P=A.with(void 0,e.top+e.height-s.borderHeight-s.verticalPadding);return{top:a,left:N,fit:E-t.width,maxSizeTop:A,maxSizeBottom:P,minSize:r.with(Math.min(E,r.width))}}(),u=function(){const E=e.left,N=-s.borderWidth+e.top+e.height,A=new Ri(e.width-s.borderHeight,n.height-e.top-e.height-s.verticalPadding);return{top:N,left:E,fit:A.height-t.height,maxSizeBottom:A,maxSizeTop:A,minSize:r.with(A.width)}}(),f=[l,c,u],g=f.find(E=>E.fit>=0)??f.sort((E,N)=>N.fit-E.fit)[0],p=e.top+e.height-s.borderHeight;let _,b=t.height;const y=Math.max(g.maxSizeTop.height,g.maxSizeBottom.height);b>y&&(b=y);let S;i?b<=g.maxSizeTop.height?(_=!0,S=g.maxSizeTop):(_=!1,S=g.maxSizeBottom):b<=g.maxSizeBottom.height?(_=!1,S=g.maxSizeBottom):(_=!0,S=g.maxSizeTop);let{top:L,left:x}=g;!_&&b>e.height&&(L=p-b);const k=this._editor.getDomNode();if(k){const E=k.getBoundingClientRect();L-=E.top,x-=E.left}this._applyTopLeft({left:x,top:L}),this._resizable.enableSashes(!_,g===l,_,g!==l),this._resizable.minSize=g.minSize,this._resizable.maxSize=S,this._resizable.layout(b,Math.min(S.width,t.width)),this.widget.layout(this._resizable.size.width,this._resizable.size.height)}_applyTopLeft(e){this._topLeft=e,this._editor.layoutOverlayWidget(this)}}var kh;(function(o){o[o.FILE=0]="FILE",o[o.FOLDER=1]="FOLDER",o[o.ROOT_FOLDER=2]="ROOT_FOLDER"})(kh||(kh={}));const SKe=/(?:\/|^)(?:([^\/]+)\/)?([^\/]+)$/;function QR(o,e,t,i,n){if(ut.isThemeIcon(n))return[`codicon-${n.id}`,"predefined-file-icon"];if(st.isUri(n))return[];const s=i===kh.ROOT_FOLDER?["rootfolder-icon"]:i===kh.FOLDER?["folder-icon"]:["file-icon"];if(t){let r;if(t.scheme===Lt.data)r=zm.parseMetaData(t).get(zm.META_DATA_LABEL);else{const a=t.path.match(SKe);a?(r=JR(a[2].toLowerCase()),a[1]&&s.push(`${JR(a[1].toLowerCase())}-name-dir-icon`)):r=JR(t.authority.toLowerCase())}if(i===kh.ROOT_FOLDER)s.push(`${r}-root-name-folder-icon`);else if(i===kh.FOLDER)s.push(`${r}-name-folder-icon`);else{if(r){if(s.push(`${r}-name-file-icon`),s.push("name-file-icon"),r.length<=255){const l=r.split(".");for(let c=1;c<l.length;c++)s.push(`${l.slice(c).join(".")}-ext-file-icon`)}s.push("ext-file-icon")}const a=LKe(o,e,t);a&&s.push(`${JR(a)}-lang-file-icon`)}}return s}function LKe(o,e,t){if(!t)return null;let i=null;if(t.scheme===Lt.data){const s=zm.parseMetaData(t).get(zm.META_DATA_MIME);s&&(i=e.getLanguageIdByMimeType(s))}else{const n=o.getModel(t);n&&(i=n.getLanguageId())}return i&&i!==Xr?i:e.guessLanguageIdByFilepathOrFirstLine(t)}function JR(o){return o.replace(/[\s]/g,"/")}var xKe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},x9=function(o,e){return function(t,i){e(t,i,o)}};function Xpe(o){return`suggest-aria-id:${o}`}const kKe=hn("suggest-more-info",Se.chevronRight,v("suggestMoreInfoIcon","Icon for more information in the suggest widget."));var Qd;const DKe=new(Qd=class{extract(e,t){if(e.textLabel.match(Qd._regexStrict))return t[0]=e.textLabel,!0;if(e.completion.detail&&e.completion.detail.match(Qd._regexStrict))return t[0]=e.completion.detail,!0;if(e.completion.documentation){const i=typeof e.completion.documentation=="string"?e.completion.documentation:e.completion.documentation.value,n=Qd._regexRelaxed.exec(i);if(n&&(n.index===0||n.index+n[0].length===i.length))return t[0]=n[0],!0}return!1}},Qd._regexRelaxed=/(#([\da-fA-F]{3}){1,2}|(rgb|hsl)a\(\s*(\d{1,3}%?\s*,\s*){3}(1|0?\.\d+)\)|(rgb|hsl)\(\s*\d{1,3}%?(\s*,\s*\d{1,3}%?){2}\s*\))/,Qd._regexStrict=new RegExp(`^${Qd._regexRelaxed.source}$`,"i"),Qd);let V$=class{constructor(e,t,i,n){this._editor=e,this._modelService=t,this._languageService=i,this._themeService=n,this._onDidToggleDetails=new Y,this.onDidToggleDetails=this._onDidToggleDetails.event,this.templateId="suggestion"}dispose(){this._onDidToggleDetails.dispose()}renderTemplate(e){const t=new le,i=e;i.classList.add("show-file-icons");const n=ge(e,xe(".icon")),s=ge(n,xe("span.colorspan")),r=ge(e,xe(".contents")),a=ge(r,xe(".main")),l=ge(a,xe(".icon-label.codicon")),c=ge(a,xe("span.left")),u=ge(a,xe("span.right")),f=new wP(c,{supportHighlights:!0,supportIcons:!0});t.add(f);const g=ge(c,xe("span.signature-label")),p=ge(c,xe("span.qualifier-label")),_=ge(u,xe("span.details-label")),b=ge(u,xe("span.readMore"+ut.asCSSSelector(kKe)));return b.title=v("readMore","Read More"),{root:i,left:c,right:u,icon:n,colorspan:s,iconLabel:f,iconContainer:l,parametersLabel:g,qualifierLabel:p,detailsLabel:_,readMore:b,disposables:t,configureFont:()=>{const S=this._editor.getOptions(),L=S.get(50),x=L.getMassagedFontFamily(),k=L.fontFeatureSettings,E=S.get(120)||L.fontSize,N=S.get(121)||L.lineHeight,A=L.fontWeight,P=L.letterSpacing,H=`${E}px`,ee=`${N}px`,Q=`${P}px`;i.style.fontSize=H,i.style.fontWeight=A,i.style.letterSpacing=Q,a.style.fontFamily=x,a.style.fontFeatureSettings=k,a.style.lineHeight=ee,n.style.height=ee,n.style.width=ee,b.style.height=ee,b.style.width=ee}}}renderElement(e,t,i){i.configureFont();const{completion:n}=e;i.root.id=Xpe(t),i.colorspan.style.backgroundColor="";const s={labelEscapeNewLines:!0,matches:sI(e.score)},r=[];if(n.kind===19&&DKe.extract(e,r))i.icon.className="icon customcolor",i.iconContainer.className="icon hide",i.colorspan.style.backgroundColor=r[0];else if(n.kind===20&&this._themeService.getFileIconTheme().hasFileIcons){i.icon.className="icon hide",i.iconContainer.className="icon hide";const a=QR(this._modelService,this._languageService,st.from({scheme:"fake",path:e.textLabel}),kh.FILE),l=QR(this._modelService,this._languageService,st.from({scheme:"fake",path:n.detail}),kh.FILE);s.extraClasses=a.length>l.length?a:l}else n.kind===23&&this._themeService.getFileIconTheme().hasFolderIcons?(i.icon.className="icon hide",i.iconContainer.className="icon hide",s.extraClasses=[QR(this._modelService,this._languageService,st.from({scheme:"fake",path:e.textLabel}),kh.FOLDER),QR(this._modelService,this._languageService,st.from({scheme:"fake",path:n.detail}),kh.FOLDER)].flat()):(i.icon.className="icon hide",i.iconContainer.className="",i.iconContainer.classList.add("suggest-icon",...ut.asClassNameArray(uD.toIcon(n.kind))));n.tags&&n.tags.indexOf(1)>=0&&(s.extraClasses=(s.extraClasses||[]).concat(["deprecated"]),s.matches=[]),i.iconLabel.setLabel(e.textLabel,void 0,s),typeof n.label=="string"?(i.parametersLabel.textContent="",i.detailsLabel.textContent=k9(n.detail||""),i.root.classList.add("string-label")):(i.parametersLabel.textContent=k9(n.label.detail||""),i.detailsLabel.textContent=k9(n.label.description||""),i.root.classList.remove("string-label")),this._editor.getOption(119).showInlineDetails?Za(i.detailsLabel):Hr(i.detailsLabel),UY(e)?(i.right.classList.add("can-expand-details"),Za(i.readMore),i.readMore.onmousedown=a=>{a.stopPropagation(),a.preventDefault()},i.readMore.onclick=a=>{a.stopPropagation(),a.preventDefault(),this._onDidToggleDetails.fire()}):(i.right.classList.remove("can-expand-details"),Hr(i.readMore),i.readMore.onmousedown=null,i.readMore.onclick=null)}disposeTemplate(e){e.disposables.dispose()}};V$=xKe([x9(1,un),x9(2,In),x9(3,Ws)],V$);function k9(o){return o.replace(/\r\n|\r|\n/g,"")}var EKe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},eM=function(o,e){return function(t,i){e(t,i,o)}},Lw;W("editorSuggestWidget.background",Bl,v("editorSuggestWidgetBackground","Background color of the suggest widget."));W("editorSuggestWidget.border",hK,v("editorSuggestWidgetBorder","Border color of the suggest widget."));const IKe=W("editorSuggestWidget.foreground",jh,v("editorSuggestWidgetForeground","Foreground color of the suggest widget."));W("editorSuggestWidget.selectedForeground",ID,v("editorSuggestWidgetSelectedForeground","Foreground color of the selected entry in the suggest widget."));W("editorSuggestWidget.selectedIconForeground",bK,v("editorSuggestWidgetSelectedIconForeground","Icon foreground color of the selected entry in the suggest widget."));const TKe=W("editorSuggestWidget.selectedBackground",TD,v("editorSuggestWidgetSelectedBackground","Background color of the selected entry in the suggest widget."));W("editorSuggestWidget.highlightForeground",Rw,v("editorSuggestWidgetHighlightForeground","Color of the match highlights in the suggest widget."));W("editorSuggestWidget.focusHighlightForeground",sMe,v("editorSuggestWidgetFocusHighlightForeground","Color of the match highlights in the suggest widget when an item is focused."));W("editorSuggestWidgetStatus.foreground",Pt(IKe,.5),v("editorSuggestWidgetStatusForeground","Foreground color of the suggest widget status."));class NKe{constructor(e,t){this._service=e,this._key=`suggestWidget.size/${t.getEditorType()}/${t instanceof fd}`}restore(){const e=this._service.get(this._key,0)??"";try{const t=JSON.parse(e);if(Ri.is(t))return Ri.lift(t)}catch{}}store(e){this._service.store(this._key,JSON.stringify(e),0,1)}reset(){this._service.remove(this._key,0)}}var xm;let z$=(xm=class{constructor(e,t,i,n,s){this.editor=e,this._storageService=t,this._state=0,this._isAuto=!1,this._pendingLayout=new Xs,this._pendingShowDetails=new Xs,this._ignoreFocusEvents=!1,this._forceRenderingAbove=!1,this._explainMode=!1,this._showTimeout=new gd,this._disposables=new le,this._onDidSelect=new nC,this._onDidFocus=new nC,this._onDidHide=new Y,this._onDidShow=new Y,this.onDidSelect=this._onDidSelect.event,this.onDidFocus=this._onDidFocus.event,this.onDidHide=this._onDidHide.event,this.onDidShow=this._onDidShow.event,this._onDetailsKeydown=new Y,this.onDetailsKeyDown=this._onDetailsKeydown.event,this.element=new wY,this.element.domNode.classList.add("editor-widget","suggest-widget"),this._contentWidget=new RKe(this,e),this._persistedSize=new NKe(t,e);class r{constructor(p,_,b=!1,y=!1){this.persistedSize=p,this.currentSize=_,this.persistHeight=b,this.persistWidth=y}}let a;this._disposables.add(this.element.onDidWillResize(()=>{this._contentWidget.lockPreference(),a=new r(this._persistedSize.restore(),this.element.size)})),this._disposables.add(this.element.onDidResize(g=>{var p,_;if(this._resize(g.dimension.width,g.dimension.height),a&&(a.persistHeight=a.persistHeight||!!g.north||!!g.south,a.persistWidth=a.persistWidth||!!g.east||!!g.west),!!g.done){if(a){const{itemHeight:b,defaultSize:y}=this.getLayoutInfo(),S=Math.round(b/2);let{width:L,height:x}=this.element.size;(!a.persistHeight||Math.abs(a.currentSize.height-x)<=S)&&(x=((p=a.persistedSize)==null?void 0:p.height)??y.height),(!a.persistWidth||Math.abs(a.currentSize.width-L)<=S)&&(L=((_=a.persistedSize)==null?void 0:_.width)??y.width),this._persistedSize.store(new Ri(L,x))}this._contentWidget.unlockPreference(),a=void 0}})),this._messageElement=ge(this.element.domNode,xe(".message")),this._listElement=ge(this.element.domNode,xe(".tree"));const l=this._disposables.add(s.createInstance(H$,this.editor));l.onDidClose(this.toggleDetails,this,this._disposables),this._details=new wKe(l,this.editor);const c=()=>this.element.domNode.classList.toggle("no-icons",!this.editor.getOption(119).showIcons);c();const u=s.createInstance(V$,this.editor);this._disposables.add(u),this._disposables.add(u.onDidToggleDetails(()=>this.toggleDetails())),this._list=new Xl("SuggestWidget",this._listElement,{getHeight:g=>this.getLayoutInfo().itemHeight,getTemplateId:g=>"suggestion"},[u],{alwaysConsumeMouseWheel:!0,useShadows:!1,mouseSupport:!1,multipleSelectionSupport:!1,accessibilityProvider:{getRole:()=>"option",getWidgetAriaLabel:()=>v("suggest","Suggest"),getWidgetRole:()=>"listbox",getAriaLabel:g=>{let p=g.textLabel;if(typeof g.completion.label!="string"){const{detail:S,description:L}=g.completion.label;S&&L?p=v("label.full","{0} {1}, {2}",p,S,L):S?p=v("label.detail","{0} {1}",p,S):L&&(p=v("label.desc","{0}, {1}",p,L))}if(!g.isResolved||!this._isDetailsVisible())return p;const{documentation:_,detail:b}=g.completion,y=sC("{0}{1}",b||"",_?typeof _=="string"?_:_.value:"");return v("ariaCurrenttSuggestionReadDetails","{0}, docs: {1}",p,y)}}}),this._list.style(FC({listInactiveFocusBackground:TKe,listInactiveFocusOutline:vn})),this._status=s.createInstance(W$,this.element.domNode,gm);const f=()=>this.element.domNode.classList.toggle("with-status-bar",this.editor.getOption(119).showStatusBar);f(),this._disposables.add(n.onDidColorThemeChange(g=>this._onThemeChange(g))),this._onThemeChange(n.getColorTheme()),this._disposables.add(this._list.onMouseDown(g=>this._onListMouseDownOrTap(g))),this._disposables.add(this._list.onTap(g=>this._onListMouseDownOrTap(g))),this._disposables.add(this._list.onDidChangeSelection(g=>this._onListSelection(g))),this._disposables.add(this._list.onDidChangeFocus(g=>this._onListFocus(g))),this._disposables.add(this.editor.onDidChangeCursorSelection(()=>this._onCursorSelectionChanged())),this._disposables.add(this.editor.onDidChangeConfiguration(g=>{g.hasChanged(119)&&(f(),c()),this._completionModel&&(g.hasChanged(50)||g.hasChanged(120)||g.hasChanged(121))&&this._list.splice(0,this._list.length,this._completionModel.items)})),this._ctxSuggestWidgetVisible=At.Visible.bindTo(i),this._ctxSuggestWidgetDetailsVisible=At.DetailsVisible.bindTo(i),this._ctxSuggestWidgetMultipleSuggestions=At.MultipleSuggestions.bindTo(i),this._ctxSuggestWidgetHasFocusedSuggestion=At.HasFocusedSuggestion.bindTo(i),this._disposables.add(Bn(this._details.widget.domNode,"keydown",g=>{this._onDetailsKeydown.fire(g)})),this._disposables.add(this.editor.onMouseDown(g=>this._onEditorMouseDown(g)))}dispose(){var e;this._details.widget.dispose(),this._details.dispose(),this._list.dispose(),this._status.dispose(),this._disposables.dispose(),(e=this._loadingTimeout)==null||e.dispose(),this._pendingLayout.dispose(),this._pendingShowDetails.dispose(),this._showTimeout.dispose(),this._contentWidget.dispose(),this.element.dispose()}_onEditorMouseDown(e){this._details.widget.domNode.contains(e.target.element)?this._details.widget.domNode.focus():this.element.domNode.contains(e.target.element)&&this.editor.focus()}_onCursorSelectionChanged(){this._state!==0&&this._contentWidget.layout()}_onListMouseDownOrTap(e){typeof e.element>"u"||typeof e.index>"u"||(e.browserEvent.preventDefault(),e.browserEvent.stopPropagation(),this._select(e.element,e.index))}_onListSelection(e){e.elements.length&&this._select(e.elements[0],e.indexes[0])}_select(e,t){const i=this._completionModel;i&&(this._onDidSelect.fire({item:e,index:t,model:i}),this.editor.focus())}_onThemeChange(e){this._details.widget.borderWidth=lu(e.type)?2:1}_onListFocus(e){var n;if(this._ignoreFocusEvents)return;if(!e.elements.length){this._currentSuggestionDetails&&(this._currentSuggestionDetails.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=void 0),this.editor.setAriaOptions({activeDescendant:void 0}),this._ctxSuggestWidgetHasFocusedSuggestion.set(!1);return}if(!this._completionModel)return;this._ctxSuggestWidgetHasFocusedSuggestion.set(!0);const t=e.elements[0],i=e.indexes[0];t!==this._focusedItem&&((n=this._currentSuggestionDetails)==null||n.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=t,this._list.reveal(i),this._currentSuggestionDetails=Gs(async s=>{const r=Bm(()=>{this._isDetailsVisible()&&this.showDetails(!0)},250),a=s.onCancellationRequested(()=>r.dispose());try{return await t.resolve(s)}finally{r.dispose(),a.dispose()}}),this._currentSuggestionDetails.then(()=>{i>=this._list.length||t!==this._list.element(i)||(this._ignoreFocusEvents=!0,this._list.splice(i,1,[t]),this._list.setFocus([i]),this._ignoreFocusEvents=!1,this._isDetailsVisible()?this.showDetails(!1):this.element.domNode.classList.remove("docs-side"),this.editor.setAriaOptions({activeDescendant:Xpe(i)}))}).catch(wt)),this._onDidFocus.fire({item:t,index:i,model:this._completionModel})}_setState(e){if(this._state!==e)switch(this._state=e,this.element.domNode.classList.toggle("frozen",e===4),this.element.domNode.classList.remove("message"),e){case 0:Hr(this._messageElement,this._listElement,this._status.element),this._details.hide(!0),this._status.hide(),this._contentWidget.hide(),this._ctxSuggestWidgetVisible.reset(),this._ctxSuggestWidgetMultipleSuggestions.reset(),this._ctxSuggestWidgetHasFocusedSuggestion.reset(),this._showTimeout.cancel(),this.element.domNode.classList.remove("visible"),this._list.splice(0,this._list.length),this._focusedItem=void 0,this._cappedHeight=void 0,this._explainMode=!1;break;case 1:this.element.domNode.classList.add("message"),this._messageElement.textContent=Lw.LOADING_MESSAGE,Hr(this._listElement,this._status.element),Za(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0,Oh(Lw.LOADING_MESSAGE);break;case 2:this.element.domNode.classList.add("message"),this._messageElement.textContent=Lw.NO_SUGGESTIONS_MESSAGE,Hr(this._listElement,this._status.element),Za(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0,Oh(Lw.NO_SUGGESTIONS_MESSAGE);break;case 3:Hr(this._messageElement),Za(this._listElement,this._status.element),this._show();break;case 4:Hr(this._messageElement),Za(this._listElement,this._status.element),this._show();break;case 5:Hr(this._messageElement),Za(this._listElement,this._status.element),this._details.show(),this._show();break}}_show(){this._status.show(),this._contentWidget.show(),this._layout(this._persistedSize.restore()),this._ctxSuggestWidgetVisible.set(!0),this._showTimeout.cancelAndSet(()=>{this.element.domNode.classList.add("visible"),this._onDidShow.fire(this)},100)}showTriggered(e,t){this._state===0&&(this._contentWidget.setPosition(this.editor.getPosition()),this._isAuto=!!e,this._isAuto||(this._loadingTimeout=Bm(()=>this._setState(1),t)))}showSuggestions(e,t,i,n,s){var l,c;if(this._contentWidget.setPosition(this.editor.getPosition()),(l=this._loadingTimeout)==null||l.dispose(),(c=this._currentSuggestionDetails)==null||c.cancel(),this._currentSuggestionDetails=void 0,this._completionModel!==e&&(this._completionModel=e),i&&this._state!==2&&this._state!==0){this._setState(4);return}const r=this._completionModel.items.length,a=r===0;if(this._ctxSuggestWidgetMultipleSuggestions.set(r>1),a){this._setState(n?0:2),this._completionModel=void 0;return}this._focusedItem=void 0,this._onDidFocus.pause(),this._onDidSelect.pause();try{this._list.splice(0,this._list.length,this._completionModel.items),this._setState(i?4:3),this._list.reveal(t,0),this._list.setFocus(s?[]:[t])}finally{this._onDidFocus.resume(),this._onDidSelect.resume()}this._pendingLayout.value=bA(at(this.element.domNode),()=>{this._pendingLayout.clear(),this._layout(this.element.size),this._details.widget.domNode.classList.remove("focused")})}focusSelected(){this._list.length>0&&this._list.setFocus([0])}selectNextPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageDown(),!0;case 1:return!this._isAuto;default:return this._list.focusNextPage(),!0}}selectNext(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusNext(1,!0),!0}}selectLast(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollBottom(),!0;case 1:return!this._isAuto;default:return this._list.focusLast(),!0}}selectPreviousPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageUp(),!0;case 1:return!this._isAuto;default:return this._list.focusPreviousPage(),!0}}selectPrevious(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusPrevious(1,!0),!1}}selectFirst(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollTop(),!0;case 1:return!this._isAuto;default:return this._list.focusFirst(),!0}}getFocusedItem(){if(this._state!==0&&this._state!==2&&this._state!==1&&this._completionModel&&this._list.getFocus().length>0)return{item:this._list.getFocusedElements()[0],index:this._list.getFocus()[0],model:this._completionModel}}toggleDetailsFocus(){this._state===5?(this._setState(3),this._details.widget.domNode.classList.remove("focused")):this._state===3&&this._isDetailsVisible()&&(this._setState(5),this._details.widget.domNode.classList.add("focused"))}toggleDetails(){this._isDetailsVisible()?(this._pendingShowDetails.clear(),this._ctxSuggestWidgetDetailsVisible.set(!1),this._setDetailsVisible(!1),this._details.hide(),this.element.domNode.classList.remove("shows-details")):(UY(this._list.getFocusedElements()[0])||this._explainMode)&&(this._state===3||this._state===5||this._state===4)&&(this._ctxSuggestWidgetDetailsVisible.set(!0),this._setDetailsVisible(!0),this.showDetails(!1))}showDetails(e){this._pendingShowDetails.value=bA(at(this.element.domNode),()=>{this._pendingShowDetails.clear(),this._details.show(),e?this._details.widget.renderLoading():this._details.widget.renderItem(this._list.getFocusedElements()[0],this._explainMode),this._details.widget.isEmpty?this._details.hide():(this._positionDetails(),this.element.domNode.classList.add("shows-details")),this.editor.focus()})}toggleExplainMode(){this._list.getFocusedElements()[0]&&(this._explainMode=!this._explainMode,this._isDetailsVisible()?this.showDetails(!1):this.toggleDetails())}resetPersistedSize(){this._persistedSize.reset()}hideWidget(){var i;this._pendingLayout.clear(),this._pendingShowDetails.clear(),(i=this._loadingTimeout)==null||i.dispose(),this._setState(0),this._onDidHide.fire(this),this.element.clearSashHoverState();const e=this._persistedSize.restore(),t=Math.ceil(this.getLayoutInfo().itemHeight*4.3);e&&e.height<t&&this._persistedSize.store(e.with(void 0,t))}isFrozen(){return this._state===4}_afterRender(e){if(e===null){this._isDetailsVisible()&&this._details.hide();return}this._state===2||this._state===1||(this._isDetailsVisible()&&!this._details.widget.isEmpty&&this._details.show(),this._positionDetails())}_layout(e){var r,a;if(!this.editor.hasModel()||!this.editor.getDomNode())return;const t=Wm(this.element.domNode.ownerDocument.body),i=this.getLayoutInfo();e||(e=i.defaultSize);let n=e.height,s=e.width;if(this._status.element.style.height=`${i.itemHeight}px`,this._state===2||this._state===1)n=i.itemHeight+i.borderHeight,s=i.defaultSize.width/2,this.element.enableSashes(!1,!1,!1,!1),this.element.minSize=this.element.maxSize=new Ri(s,n),this._contentWidget.setPreference(2);else{const l=t.width-i.borderHeight-2*i.horizontalPadding;s>l&&(s=l);const c=this._completionModel?this._completionModel.stats.pLabelLen*i.typicalHalfwidthCharacterWidth:s,u=i.statusBarHeight+this._list.contentHeight+i.borderHeight,f=i.itemHeight+i.statusBarHeight,g=os(this.editor.getDomNode()),p=this.editor.getScrolledVisiblePosition(this.editor.getPosition()),_=g.top+p.top+p.height,b=Math.min(t.height-_-i.verticalPadding,u),y=g.top+p.top-i.verticalPadding,S=Math.min(y,u);let L=Math.min(Math.max(S,b)+i.borderHeight,u);n===((r=this._cappedHeight)==null?void 0:r.capped)&&(n=this._cappedHeight.wanted),n<f&&(n=f),n>L&&(n=L),n>b||this._forceRenderingAbove&&y>150?(this._contentWidget.setPreference(1),this.element.enableSashes(!0,!0,!1,!1),L=S):(this._contentWidget.setPreference(2),this.element.enableSashes(!1,!0,!0,!1),L=b),this.element.preferredSize=new Ri(c,i.defaultSize.height),this.element.maxSize=new Ri(l,L),this.element.minSize=new Ri(220,f),this._cappedHeight=n===u?{wanted:((a=this._cappedHeight)==null?void 0:a.wanted)??e.height,capped:n}:void 0}this._resize(s,n)}_resize(e,t){const{width:i,height:n}=this.element.maxSize;e=Math.min(i,e),t=Math.min(n,t);const{statusBarHeight:s}=this.getLayoutInfo();this._list.layout(t-s,e),this._listElement.style.height=`${t-s}px`,this.element.layout(t,e),this._contentWidget.layout(),this._positionDetails()}_positionDetails(){var e;this._isDetailsVisible()&&this._details.placeAtAnchor(this.element.domNode,((e=this._contentWidget.getPosition())==null?void 0:e.preference[0])===2)}getLayoutInfo(){const e=this.editor.getOption(50),t=Wr(this.editor.getOption(121)||e.lineHeight,8,1e3),i=!this.editor.getOption(119).showStatusBar||this._state===2||this._state===1?0:t,n=this._details.widget.borderWidth,s=2*n;return{itemHeight:t,statusBarHeight:i,borderWidth:n,borderHeight:s,typicalHalfwidthCharacterWidth:e.typicalHalfwidthCharacterWidth,verticalPadding:22,horizontalPadding:14,defaultSize:new Ri(430,i+12*t+s)}}_isDetailsVisible(){return this._storageService.getBoolean("expandSuggestionDocs",0,!1)}_setDetailsVisible(e){this._storageService.store("expandSuggestionDocs",e,0,0)}forceRenderingAbove(){this._forceRenderingAbove||(this._forceRenderingAbove=!0,this._layout(this._persistedSize.restore()))}stopForceRenderingAbove(){this._forceRenderingAbove=!1}},Lw=xm,xm.LOADING_MESSAGE=v("suggestWidget.loading","Loading..."),xm.NO_SUGGESTIONS_MESSAGE=v("suggestWidget.noSuggestions","No suggestions."),xm);z$=Lw=EKe([eM(1,md),eM(2,ht),eM(3,Ws),eM(4,nt)],z$);class RKe{constructor(e,t){this._widget=e,this._editor=t,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._preferenceLocked=!1,this._added=!1,this._hidden=!1}dispose(){this._added&&(this._added=!1,this._editor.removeContentWidget(this))}getId(){return"editor.widget.suggestWidget"}getDomNode(){return this._widget.element.domNode}show(){this._hidden=!1,this._added||(this._added=!0,this._editor.addContentWidget(this))}hide(){this._hidden||(this._hidden=!0,this.layout())}layout(){this._editor.layoutContentWidget(this)}getPosition(){return this._hidden||!this._position||!this._preference?null:{position:this._position,preference:[this._preference]}}beforeRender(){const{height:e,width:t}=this._widget.element.size,{borderWidth:i,horizontalPadding:n}=this._widget.getLayoutInfo();return new Ri(t+2*i+n,e+2*i)}afterRender(e){this._widget._afterRender(e)}setPreference(e){this._preferenceLocked||(this._preference=e)}lockPreference(){this._preferenceLocked=!0}unlockPreference(){this._preferenceLocked=!1}setPosition(e){this._position=e}}var MKe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},fw=function(o,e){return function(t,i){e(t,i,o)}},U$;class AKe{constructor(e,t){if(this._model=e,this._position=t,this._decorationOptions=Dt.register({description:"suggest-line-suffix",stickiness:1}),e.getLineMaxColumn(t.lineNumber)!==t.column){const n=e.getOffsetAt(t),s=e.getPositionAt(n+1);e.changeDecorations(r=>{this._marker&&r.removeDecoration(this._marker),this._marker=r.addDecoration(M.fromPositions(t,s),this._decorationOptions)})}}dispose(){this._marker&&!this._model.isDisposed()&&this._model.changeDecorations(e=>{e.removeDecoration(this._marker),this._marker=void 0})}delta(e){if(this._model.isDisposed()||this._position.lineNumber!==e.lineNumber)return 0;if(this._marker){const t=this._model.getDecorationRange(this._marker);return this._model.getOffsetAt(t.getStartPosition())-this._model.getOffsetAt(e)}else return this._model.getLineMaxColumn(e.lineNumber)-e.column}}var Fb;let nd=(Fb=class{static get(e){return e.getContribution(U$.ID)}constructor(e,t,i,n,s,r,a){this._memoryService=t,this._commandService=i,this._contextKeyService=n,this._instantiationService=s,this._logService=r,this._telemetryService=a,this._lineSuffix=new Xs,this._toDispose=new le,this._selectors=new PKe(f=>f.priority),this._onWillInsertSuggestItem=new Y,this.onWillInsertSuggestItem=this._onWillInsertSuggestItem.event,this.editor=e,this.model=s.createInstance(MO,this.editor),this._selectors.register({priority:0,select:(f,g,p)=>this._memoryService.select(f,g,p)});const l=At.InsertMode.bindTo(n);l.set(e.getOption(119).insertMode),this._toDispose.add(this.model.onDidTrigger(()=>l.set(e.getOption(119).insertMode))),this.widget=this._toDispose.add(new UH(at(e.getDomNode()),()=>{const f=this._instantiationService.createInstance(z$,this.editor);this._toDispose.add(f),this._toDispose.add(f.onDidSelect(y=>this._insertSuggestion(y,0),this));const g=new pKe(this.editor,f,this.model,y=>this._insertSuggestion(y,2));this._toDispose.add(g);const p=At.MakesTextEdit.bindTo(this._contextKeyService),_=At.HasInsertAndReplaceRange.bindTo(this._contextKeyService),b=At.CanResolve.bindTo(this._contextKeyService);return this._toDispose.add(it(()=>{p.reset(),_.reset(),b.reset()})),this._toDispose.add(f.onDidFocus(({item:y})=>{const S=this.editor.getPosition(),L=y.editStart.column,x=S.column;let k=!0;this.editor.getOption(1)==="smart"&&this.model.state===2&&!y.completion.additionalTextEdits&&!(y.completion.insertTextRules&4)&&x-L===y.completion.insertText.length&&(k=this.editor.getModel().getValueInRange({startLineNumber:S.lineNumber,startColumn:L,endLineNumber:S.lineNumber,endColumn:x})!==y.completion.insertText),p.set(k),_.set(!G.equals(y.editInsertEnd,y.editReplaceEnd)),b.set(!!y.provider.resolveCompletionItem||!!y.completion.documentation||y.completion.detail!==y.completion.label)})),this._toDispose.add(f.onDetailsKeyDown(y=>{if(y.toKeyCodeChord().equals(new wg(!0,!1,!1,!1,33))||Kt&&y.toKeyCodeChord().equals(new wg(!1,!1,!1,!0,33))){y.stopPropagation();return}y.toKeyCodeChord().isModifierKey()||this.editor.focus()})),f})),this._overtypingCapturer=this._toDispose.add(new UH(at(e.getDomNode()),()=>this._toDispose.add(new B$(this.editor,this.model)))),this._alternatives=this._toDispose.add(new UH(at(e.getDomNode()),()=>this._toDispose.add(new MS(this.editor,this._contextKeyService)))),this._toDispose.add(s.createInstance(TO,e)),this._toDispose.add(this.model.onDidTrigger(f=>{this.widget.value.showTriggered(f.auto,f.shy?250:50),this._lineSuffix.value=new AKe(this.editor.getModel(),f.position)})),this._toDispose.add(this.model.onDidSuggest(f=>{if(f.triggerOptions.shy)return;let g=-1;for(const _ of this._selectors.itemsOrderedByPriorityDesc)if(g=_.select(this.editor.getModel(),this.editor.getPosition(),f.completionModel.items),g!==-1)break;if(g===-1&&(g=0),this.model.state===0)return;let p=!1;if(f.triggerOptions.auto){const _=this.editor.getOption(119);_.selectionMode==="never"||_.selectionMode==="always"?p=_.selectionMode==="never":_.selectionMode==="whenTriggerCharacter"?p=f.triggerOptions.triggerKind!==1:_.selectionMode==="whenQuickSuggestion"&&(p=f.triggerOptions.triggerKind===1&&!f.triggerOptions.refilter)}this.widget.value.showSuggestions(f.completionModel,g,f.isFrozen,f.triggerOptions.auto,p)})),this._toDispose.add(this.model.onDidCancel(f=>{f.retrigger||this.widget.value.hideWidget()})),this._toDispose.add(this.editor.onDidBlurEditorWidget(()=>{this.model.cancel(),this.model.clear()}));const c=At.AcceptSuggestionsOnEnter.bindTo(n),u=()=>{const f=this.editor.getOption(1);c.set(f==="on"||f==="smart")};this._toDispose.add(this.editor.onDidChangeConfiguration(()=>u())),u()}dispose(){this._alternatives.dispose(),this._toDispose.dispose(),this.widget.dispose(),this.model.dispose(),this._lineSuffix.dispose(),this._onWillInsertSuggestItem.dispose()}_insertSuggestion(e,t){if(!e||!e.item){this._alternatives.value.reset(),this.model.cancel(),this.model.clear();return}if(!this.editor.hasModel())return;const i=ia.get(this.editor);if(!i)return;this._onWillInsertSuggestItem.fire({item:e.item});const n=this.editor.getModel(),s=n.getAlternativeVersionId(),{item:r}=e,a=[],l=new An;t&1||this.editor.pushUndoStop();const c=this.getOverwriteInfo(r,!!(t&8));this._memoryService.memorize(n,this.editor.getPosition(),r);const u=r.isResolved;let f=-1,g=-1;if(Array.isArray(r.completion.additionalTextEdits)){this.model.cancel();const _=Cu.capture(this.editor);this.editor.executeEdits("suggestController.additionalTextEdits.sync",r.completion.additionalTextEdits.map(b=>{let y=M.lift(b.range);if(y.startLineNumber===r.position.lineNumber&&y.startColumn>r.position.column){const S=this.editor.getPosition().column-r.position.column,L=S,x=M.spansMultipleLines(y)?0:S;y=new M(y.startLineNumber,y.startColumn+L,y.endLineNumber,y.endColumn+x)}return Rn.replaceMove(y,b.text)})),_.restoreRelativeVerticalPositionOfCursor(this.editor)}else if(!u){const _=new uo;let b;const y=n.onDidChangeContent(k=>{if(k.isFlush){l.cancel(),y.dispose();return}for(const E of k.changes){const N=M.getEndPosition(E.range);(!b||G.isBefore(N,b))&&(b=N)}}),S=t;t|=2;let L=!1;const x=this.editor.onWillType(()=>{x.dispose(),L=!0,S&2||this.editor.pushUndoStop()});a.push(r.resolve(l.token).then(()=>{if(!r.completion.additionalTextEdits||l.token.isCancellationRequested)return;if(b&&r.completion.additionalTextEdits.some(E=>G.isBefore(b,M.getStartPosition(E.range))))return!1;L&&this.editor.pushUndoStop();const k=Cu.capture(this.editor);return this.editor.executeEdits("suggestController.additionalTextEdits.async",r.completion.additionalTextEdits.map(E=>Rn.replaceMove(M.lift(E.range),E.text))),k.restoreRelativeVerticalPositionOfCursor(this.editor),(L||!(S&2))&&this.editor.pushUndoStop(),!0}).then(k=>{this._logService.trace("[suggest] async resolving of edits DONE (ms, applied?)",_.elapsed(),k),g=k===!0?1:k===!1?0:-2}).finally(()=>{y.dispose(),x.dispose()}))}let{insertText:p}=r.completion;if(r.completion.insertTextRules&4||(p=yC.escape(p)),this.model.cancel(),i.insert(p,{overwriteBefore:c.overwriteBefore,overwriteAfter:c.overwriteAfter,undoStopBefore:!1,undoStopAfter:!1,adjustWhitespace:!(r.completion.insertTextRules&1),clipboardText:e.model.clipboardText,overtypingCapturer:this._overtypingCapturer.value}),t&2||this.editor.pushUndoStop(),r.completion.command)if(r.completion.command.id===AO.id)this.model.trigger({auto:!0,retrigger:!0});else{const _=new uo;a.push(this._commandService.executeCommand(r.completion.command.id,...r.completion.command.arguments?[...r.completion.command.arguments]:[]).catch(b=>{r.completion.extensionId?rs(b):wt(b)}).finally(()=>{f=_.elapsed()}))}t&4&&this._alternatives.value.set(e,_=>{for(l.cancel();n.canUndo();){s!==n.getAlternativeVersionId()&&n.undo(),this._insertSuggestion(_,3|(t&8?8:0));break}}),this._alertCompletionItem(r),Promise.all(a).finally(()=>{this._reportSuggestionAcceptedTelemetry(r,n,u,f,g,e.index,e.model.items),this.model.clear(),l.dispose()})}_reportSuggestionAcceptedTelemetry(e,t,i,n,s,r,a){var g;if(Math.floor(Math.random()*100)===0)return;const l=new Map;for(let p=0;p<Math.min(30,a.length);p++){const _=a[p].textLabel;l.has(_)?l.get(_).push(p):l.set(_,[p])}const c=l.get(e.textLabel),f=c&&c.length>1?c[0]:-1;this._telemetryService.publicLog2("suggest.acceptedSuggestion",{extensionId:((g=e.extensionId)==null?void 0:g.value)??"unknown",providerId:e.provider._debugDisplayName??"unknown",kind:e.completion.kind,basenameHash:jF(Dc(t.uri)).toString(16),languageId:t.getLanguageId(),fileExtension:mAe(t.uri),resolveInfo:e.provider.resolveCompletionItem?i?1:0:-1,resolveDuration:e.resolveDuration,commandDuration:n,additionalEditsAsync:s,index:r,firstIndex:f})}getOverwriteInfo(e,t){ui(this.editor.hasModel());let i=this.editor.getOption(119).insertMode==="replace";t&&(i=!i);const n=e.position.column-e.editStart.column,s=(i?e.editReplaceEnd.column:e.editInsertEnd.column)-e.position.column,r=this.editor.getPosition().column-e.position.column,a=this._lineSuffix.value?this._lineSuffix.value.delta(this.editor.getPosition()):0;return{overwriteBefore:n+r,overwriteAfter:s+a}}_alertCompletionItem(e){if(wr(e.completion.additionalTextEdits)){const t=v("aria.alert.snippet","Accepting '{0}' made {1} additional edits",e.textLabel,e.completion.additionalTextEdits.length);ta(t)}}triggerSuggest(e,t,i){this.editor.hasModel()&&(this.model.trigger({auto:t??!1,completionOptions:{providerFilter:e,kindFilter:i?new Set:void 0}}),this.editor.revealPosition(this.editor.getPosition(),0),this.editor.focus())}triggerSuggestAndAcceptBest(e){if(!this.editor.hasModel())return;const t=this.editor.getPosition(),i=()=>{t.equals(this.editor.getPosition())&&this._commandService.executeCommand(e.fallback)},n=s=>{if(s.completion.insertTextRules&4||s.completion.additionalTextEdits)return!0;const r=this.editor.getPosition(),a=s.editStart.column,l=r.column;return l-a!==s.completion.insertText.length?!0:this.editor.getModel().getValueInRange({startLineNumber:r.lineNumber,startColumn:a,endLineNumber:r.lineNumber,endColumn:l})!==s.completion.insertText};Ee.once(this.model.onDidTrigger)(s=>{const r=[];Ee.any(this.model.onDidTrigger,this.model.onDidCancel)(()=>{$i(r),i()},void 0,r),this.model.onDidSuggest(({completionModel:a})=>{if($i(r),a.items.length===0){i();return}const l=this._memoryService.select(this.editor.getModel(),this.editor.getPosition(),a.items),c=a.items[l];if(!n(c)){i();return}this.editor.pushUndoStop(),this._insertSuggestion({index:l,item:c,model:a},7)},void 0,r)}),this.model.trigger({auto:!1,shy:!0}),this.editor.revealPosition(t,0),this.editor.focus()}acceptSelectedSuggestion(e,t){const i=this.widget.value.getFocusedItem();let n=0;e&&(n|=4),t&&(n|=8),this._insertSuggestion(i,n)}acceptNextSuggestion(){this._alternatives.value.next()}acceptPrevSuggestion(){this._alternatives.value.prev()}cancelSuggestWidget(){this.model.cancel(),this.model.clear(),this.widget.value.hideWidget()}focusSuggestion(){this.widget.value.focusSelected()}selectNextSuggestion(){this.widget.value.selectNext()}selectNextPageSuggestion(){this.widget.value.selectNextPage()}selectLastSuggestion(){this.widget.value.selectLast()}selectPrevSuggestion(){this.widget.value.selectPrevious()}selectPrevPageSuggestion(){this.widget.value.selectPreviousPage()}selectFirstSuggestion(){this.widget.value.selectFirst()}toggleSuggestionDetails(){this.widget.value.toggleDetails()}toggleExplainMode(){this.widget.value.toggleExplainMode()}toggleSuggestionFocus(){this.widget.value.toggleDetailsFocus()}resetWidgetSize(){this.widget.value.resetPersistedSize()}forceRenderingAbove(){this.widget.value.forceRenderingAbove()}stopForceRenderingAbove(){this.widget.isInitialized&&this.widget.value.stopForceRenderingAbove()}registerSelector(e){return this._selectors.register(e)}},U$=Fb,Fb.ID="editor.contrib.suggestController",Fb);nd=U$=MKe([fw(1,p5),fw(2,nn),fw(3,ht),fw(4,nt),fw(5,Oo),fw(6,tr)],nd);class PKe{constructor(e){this.prioritySelector=e,this._items=new Array}register(e){if(this._items.indexOf(e)!==-1)throw new Error("Value is already registered");return this._items.push(e),this._items.sort((t,i)=>this.prioritySelector(i)-this.prioritySelector(t)),{dispose:()=>{const t=this._items.indexOf(e);t>=0&&this._items.splice(t,1)}}}get itemsOrderedByPriorityDesc(){return this._items}}const lF=class lF extends Ve{constructor(){super({id:lF.id,label:v("suggest.trigger.label","Trigger Suggest"),alias:"Trigger Suggest",precondition:de.and(B.writable,B.hasCompletionItemProvider,At.Visible.toNegated()),kbOpts:{kbExpr:B.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[521,2087]},weight:100}})}run(e,t,i){const n=nd.get(t);if(!n)return;let s;i&&typeof i=="object"&&i.auto===!0&&(s=!0),n.triggerSuggest(void 0,s,void 0)}};lF.id="editor.action.triggerSuggest";let AO=lF;oi(nd.ID,nd,2);be(AO);const Kl=190,ra=Bs.bindToContribution(nd.get);Re(new ra({id:"acceptSelectedSuggestion",precondition:de.and(At.Visible,At.HasFocusedSuggestion),handler(o){o.acceptSelectedSuggestion(!0,!1)},kbOpts:[{primary:2,kbExpr:de.and(At.Visible,B.textInputFocus),weight:Kl},{primary:3,kbExpr:de.and(At.Visible,B.textInputFocus,At.AcceptSuggestionsOnEnter,At.MakesTextEdit),weight:Kl}],menuOpts:[{menuId:gm,title:v("accept.insert","Insert"),group:"left",order:1,when:At.HasInsertAndReplaceRange.toNegated()},{menuId:gm,title:v("accept.insert","Insert"),group:"left",order:1,when:de.and(At.HasInsertAndReplaceRange,At.InsertMode.isEqualTo("insert"))},{menuId:gm,title:v("accept.replace","Replace"),group:"left",order:1,when:de.and(At.HasInsertAndReplaceRange,At.InsertMode.isEqualTo("replace"))}]}));Re(new ra({id:"acceptAlternativeSelectedSuggestion",precondition:de.and(At.Visible,B.textInputFocus,At.HasFocusedSuggestion),kbOpts:{weight:Kl,kbExpr:B.textInputFocus,primary:1027,secondary:[1026]},handler(o){o.acceptSelectedSuggestion(!1,!0)},menuOpts:[{menuId:gm,group:"left",order:2,when:de.and(At.HasInsertAndReplaceRange,At.InsertMode.isEqualTo("insert")),title:v("accept.replace","Replace")},{menuId:gm,group:"left",order:2,when:de.and(At.HasInsertAndReplaceRange,At.InsertMode.isEqualTo("replace")),title:v("accept.insert","Insert")}]}));ii.registerCommandAlias("acceptSelectedSuggestionOnEnter","acceptSelectedSuggestion");Re(new ra({id:"hideSuggestWidget",precondition:At.Visible,handler:o=>o.cancelSuggestWidget(),kbOpts:{weight:Kl,kbExpr:B.textInputFocus,primary:9,secondary:[1033]}}));Re(new ra({id:"selectNextSuggestion",precondition:de.and(At.Visible,de.or(At.MultipleSuggestions,At.HasFocusedSuggestion.negate())),handler:o=>o.selectNextSuggestion(),kbOpts:{weight:Kl,kbExpr:B.textInputFocus,primary:18,secondary:[2066],mac:{primary:18,secondary:[2066,300]}}}));Re(new ra({id:"selectNextPageSuggestion",precondition:de.and(At.Visible,de.or(At.MultipleSuggestions,At.HasFocusedSuggestion.negate())),handler:o=>o.selectNextPageSuggestion(),kbOpts:{weight:Kl,kbExpr:B.textInputFocus,primary:12,secondary:[2060]}}));Re(new ra({id:"selectLastSuggestion",precondition:de.and(At.Visible,de.or(At.MultipleSuggestions,At.HasFocusedSuggestion.negate())),handler:o=>o.selectLastSuggestion()}));Re(new ra({id:"selectPrevSuggestion",precondition:de.and(At.Visible,de.or(At.MultipleSuggestions,At.HasFocusedSuggestion.negate())),handler:o=>o.selectPrevSuggestion(),kbOpts:{weight:Kl,kbExpr:B.textInputFocus,primary:16,secondary:[2064],mac:{primary:16,secondary:[2064,302]}}}));Re(new ra({id:"selectPrevPageSuggestion",precondition:de.and(At.Visible,de.or(At.MultipleSuggestions,At.HasFocusedSuggestion.negate())),handler:o=>o.selectPrevPageSuggestion(),kbOpts:{weight:Kl,kbExpr:B.textInputFocus,primary:11,secondary:[2059]}}));Re(new ra({id:"selectFirstSuggestion",precondition:de.and(At.Visible,de.or(At.MultipleSuggestions,At.HasFocusedSuggestion.negate())),handler:o=>o.selectFirstSuggestion()}));Re(new ra({id:"focusSuggestion",precondition:de.and(At.Visible,At.HasFocusedSuggestion.negate()),handler:o=>o.focusSuggestion(),kbOpts:{weight:Kl,kbExpr:B.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[2087]}}}));Re(new ra({id:"focusAndAcceptSuggestion",precondition:de.and(At.Visible,At.HasFocusedSuggestion.negate()),handler:o=>{o.focusSuggestion(),o.acceptSelectedSuggestion(!0,!1)}}));Re(new ra({id:"toggleSuggestionDetails",precondition:de.and(At.Visible,At.HasFocusedSuggestion),handler:o=>o.toggleSuggestionDetails(),kbOpts:{weight:Kl,kbExpr:B.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[2087]}},menuOpts:[{menuId:gm,group:"right",order:1,when:de.and(At.DetailsVisible,At.CanResolve),title:v("detail.more","Show Less")},{menuId:gm,group:"right",order:1,when:de.and(At.DetailsVisible.toNegated(),At.CanResolve),title:v("detail.less","Show More")}]}));Re(new ra({id:"toggleExplainMode",precondition:At.Visible,handler:o=>o.toggleExplainMode(),kbOpts:{weight:100,primary:2138}}));Re(new ra({id:"toggleSuggestionFocus",precondition:At.Visible,handler:o=>o.toggleSuggestionFocus(),kbOpts:{weight:Kl,kbExpr:B.textInputFocus,primary:2570,mac:{primary:778}}}));Re(new ra({id:"insertBestCompletion",precondition:de.and(B.textInputFocus,de.equals("config.editor.tabCompletion","on"),TO.AtEnd,At.Visible.toNegated(),MS.OtherSuggestions.toNegated(),ia.InSnippetMode.toNegated()),handler:(o,e)=>{o.triggerSuggestAndAcceptBest(ao(e)?{fallback:"tab",...e}:{fallback:"tab"})},kbOpts:{weight:Kl,primary:2}}));Re(new ra({id:"insertNextSuggestion",precondition:de.and(B.textInputFocus,de.equals("config.editor.tabCompletion","on"),MS.OtherSuggestions,At.Visible.toNegated(),ia.InSnippetMode.toNegated()),handler:o=>o.acceptNextSuggestion(),kbOpts:{weight:Kl,kbExpr:B.textInputFocus,primary:2}}));Re(new ra({id:"insertPrevSuggestion",precondition:de.and(B.textInputFocus,de.equals("config.editor.tabCompletion","on"),MS.OtherSuggestions,At.Visible.toNegated(),ia.InSnippetMode.toNegated()),handler:o=>o.acceptPrevSuggestion(),kbOpts:{weight:Kl,kbExpr:B.textInputFocus,primary:1026}}));be(class extends Ve{constructor(){super({id:"editor.action.resetSuggestSize",label:v("suggest.reset.label","Reset Suggest Widget Size"),alias:"Reset Suggest Widget Size",precondition:void 0})}run(o,e){var t;(t=nd.get(e))==null||t.resetWidgetSize()}});class OKe extends X{get selectedItem(){return this._currentSuggestItemInfo}constructor(e,t,i){super(),this.editor=e,this.suggestControllerPreselector=t,this.onWillAccept=i,this.isSuggestWidgetVisible=!1,this.isShiftKeyPressed=!1,this._isActive=!1,this._currentSuggestItemInfo=void 0,this._onDidSelectedItemChange=this._register(new Y),this.onDidSelectedItemChange=this._onDidSelectedItemChange.event,this._register(e.onKeyDown(s=>{s.shiftKey&&!this.isShiftKeyPressed&&(this.isShiftKeyPressed=!0,this.update(this._isActive))})),this._register(e.onKeyUp(s=>{s.shiftKey&&this.isShiftKeyPressed&&(this.isShiftKeyPressed=!1,this.update(this._isActive))}));const n=nd.get(this.editor);if(n){this._register(n.registerSelector({priority:100,select:(a,l,c)=>{const u=this.editor.getModel();if(!u)return-1;const f=this.suggestControllerPreselector(),g=f?ob(f,u):void 0;if(!g)return-1;const p=G.lift(l),_=c.map((y,S)=>{const L=Ak.fromSuggestion(n,u,p,y,this.isShiftKeyPressed),x=ob(L.toSingleTextEdit(),u),k=Zpe(g,x);return{index:S,valid:k,prefixLength:x.text.length,suggestItem:y}}).filter(y=>y&&y.valid&&y.prefixLength>0),b=iK(_,Yr(y=>y.prefixLength,sd));return b?b.index:-1}}));let s=!1;const r=()=>{s||(s=!0,this._register(n.widget.value.onDidShow(()=>{this.isSuggestWidgetVisible=!0,this.update(!0)})),this._register(n.widget.value.onDidHide(()=>{this.isSuggestWidgetVisible=!1,this.update(!1)})),this._register(n.widget.value.onDidFocus(()=>{this.isSuggestWidgetVisible=!0,this.update(!0)})))};this._register(Ee.once(n.model.onDidTrigger)(a=>{r()})),this._register(n.onWillInsertSuggestItem(a=>{const l=this.editor.getPosition(),c=this.editor.getModel();if(!l||!c)return;const u=Ak.fromSuggestion(n,c,l,a.item,this.isShiftKeyPressed);this.onWillAccept(u)}))}this.update(this._isActive)}update(e){const t=this.getSuggestItemInfo();(this._isActive!==e||!FKe(this._currentSuggestItemInfo,t))&&(this._isActive=e,this._currentSuggestItemInfo=t,this._onDidSelectedItemChange.fire())}getSuggestItemInfo(){const e=nd.get(this.editor);if(!e||!this.isSuggestWidgetVisible)return;const t=e.widget.value.getFocusedItem(),i=this.editor.getPosition(),n=this.editor.getModel();if(!(!t||!i||!n))return Ak.fromSuggestion(e,n,i,t.item,this.isShiftKeyPressed)}stopForceRenderingAbove(){const e=nd.get(this.editor);e==null||e.stopForceRenderingAbove()}forceRenderingAbove(){const e=nd.get(this.editor);e==null||e.forceRenderingAbove()}}class Ak{static fromSuggestion(e,t,i,n,s){let{insertText:r}=n.completion,a=!1;if(n.completion.insertTextRules&4){const c=new yC().parse(r);c.children.length<100&&IO.adjustWhitespace(t,i,!0,c),r=c.toString(),a=!0}const l=e.getOverwriteInfo(n,s);return new Ak(M.fromPositions(i.delta(0,-l.overwriteBefore),i.delta(0,Math.max(l.overwriteAfter,0))),r,n.completion.kind,a)}constructor(e,t,i,n){this.range=e,this.insertText=t,this.completionItemKind=i,this.isSnippetText=n}equals(e){return this.range.equalsRange(e.range)&&this.insertText===e.insertText&&this.completionItemKind===e.completionItemKind&&this.isSnippetText===e.isSnippetText}toSelectedSuggestionInfo(){return new jle(this.range,this.insertText,this.completionItemKind,this.isSnippetText)}toSingleTextEdit(){return new Mh(this.range,this.insertText)}}function FKe(o,e){return o===e?!0:!o||!e?!1:o.equals(e)}var BKe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},xf=function(o,e){return function(t,i){e(t,i,o)}},$$,Bb;let Ic=(Bb=class extends X{static get(e){return e.getContribution($$.ID)}constructor(e,t,i,n,s,r,a,l,c,u){super(),this.editor=e,this._instantiationService=t,this._contextKeyService=i,this._configurationService=n,this._commandService=s,this._debounceService=r,this._languageFeaturesService=a,this._accessibilitySignalService=l,this._keybindingService=c,this._accessibilityService=u,this._editorObs=Qa(this.editor),this._positions=Qe(this,g=>{var p;return((p=this._editorObs.selections.read(g))==null?void 0:p.map(_=>_.getEndPosition()))??[new G(1,1)]}),this._suggestWidgetAdaptor=this._register(new OKe(this.editor,()=>{var g,p;return this._editorObs.forceUpdate(),(p=(g=this.model.get())==null?void 0:g.selectedInlineCompletion.get())==null?void 0:p.toSingleTextEdit(void 0)},g=>this._editorObs.forceUpdate(p=>{var _;(_=this.model.get())==null||_.handleSuggestAccepted(g)}))),this._suggestWidgetSelectedItem=Ni(this,g=>this._suggestWidgetAdaptor.onDidSelectedItemChange(()=>{this._editorObs.forceUpdate(p=>g(void 0))}),()=>this._suggestWidgetAdaptor.selectedItem),this._enabledInConfig=Ni(this,this.editor.onDidChangeConfiguration,()=>this.editor.getOption(62).enabled),this._isScreenReaderEnabled=Ni(this,this._accessibilityService.onDidChangeScreenReaderOptimized,()=>this._accessibilityService.isScreenReaderOptimized()),this._editorDictationInProgress=Ni(this,this._contextKeyService.onDidChangeContext,()=>this._contextKeyService.getContext(this.editor.getDomNode()).getValue("editorDictation.inProgress")===!0),this._enabled=Qe(this,g=>this._enabledInConfig.read(g)&&(!this._isScreenReaderEnabled.read(g)||!this._editorDictationInProgress.read(g))),this._debounceValue=this._debounceService.for(this._languageFeaturesService.inlineCompletionsProvider,"InlineCompletionsDebounce",{min:50,max:50}),this.model=vr(this,g=>{if(this._editorObs.isReadonly.read(g))return;const p=this._editorObs.model.read(g);return p?this._instantiationService.createInstance(A$,p,this._suggestWidgetSelectedItem,this._editorObs.versionId,this._positions,this._debounceValue,Ni(this.editor.onDidChangeConfiguration,()=>this.editor.getOption(119).preview),Ni(this.editor.onDidChangeConfiguration,()=>this.editor.getOption(119).previewMode),Ni(this.editor.onDidChangeConfiguration,()=>this.editor.getOption(62).mode),this._enabled):void 0}).recomputeInitiallyAndOnChange(this._store),this._ghostTexts=Qe(this,g=>{const p=this.model.read(g);return(p==null?void 0:p.ghostTexts.read(g))??[]}),this._stablizedGhostTexts=WKe(this._ghostTexts,this._store),this._ghostTextWidgets=dOe(this,this._stablizedGhostTexts,(g,p)=>p.add(this._instantiationService.createInstance(R$,this.editor,{ghostText:g,minReservedLineCount:Cc(0),targetTextModel:this.model.map(_=>_==null?void 0:_.textModel)}))).recomputeInitiallyAndOnChange(this._store),this._playAccessibilitySignal=JS(this),this._fontFamily=Ni(this,this.editor.onDidChangeConfiguration,()=>this.editor.getOption(62).fontFamily),this._register(new ol(this._contextKeyService,this.model)),this._register(vU(this._editorObs.onDidType,(g,p)=>{var _;this._enabled.get()&&((_=this.model.get())==null||_.trigger())})),this._register(this._commandService.onDidExecuteCommand(g=>{new Set([M1.Tab.id,M1.DeleteLeft.id,M1.DeleteRight.id,ope,"acceptSelectedSuggestion"]).has(g.commandId)&&e.hasTextFocus()&&this._enabled.get()&&this._editorObs.forceUpdate(_=>{var b;(b=this.model.get())==null||b.trigger(_)})})),this._register(vU(this._editorObs.selections,(g,p)=>{var _;p.some(b=>b.reason===3||b.source==="api")&&((_=this.model.get())==null||_.stop())})),this._register(this.editor.onDidBlurEditorWidget(()=>{this._contextKeyService.getContextKeyValue("accessibleViewIsShown")||this._configurationService.getValue("editor.inlineSuggest.keepOnBlur")||e.getOption(62).keepOnBlur||DS.dropDownVisible||Mn(g=>{var p;(p=this.model.get())==null||p.stop(g)})})),this._register(bt(g=>{var _;const p=(_=this.model.read(g))==null?void 0:_.state.read(g);p!=null&&p.suggestItem?p.primaryGhostText.lineCount>=2&&this._suggestWidgetAdaptor.forceRenderingAbove():this._suggestWidgetAdaptor.stopForceRenderingAbove()})),this._register(it(()=>{this._suggestWidgetAdaptor.stopForceRenderingAbove()}));const f=uI(this,(g,p)=>{var y;const _=this.model.read(g),b=_==null?void 0:_.state.read(g);return this._suggestWidgetSelectedItem.get()?p:(y=b==null?void 0:b.inlineCompletion)==null?void 0:y.semanticId});this._register(P9e(Qe(g=>(this._playAccessibilitySignal.read(g),f.read(g),{})),async(g,p,_)=>{const b=this.model.get(),y=b==null?void 0:b.state.get();if(!y||!b)return;const S=b.textModel.getLineContent(y.primaryGhostText.lineNumber);await Sg(50,X9(_)),await Cue(this._suggestWidgetSelectedItem,yr,()=>!1,X9(_)),await this._accessibilitySignalService.playSignal(Tl.inlineSuggestion),this.editor.getOption(8)&&this._provideScreenReaderUpdate(y.primaryGhostText.renderForScreenReader(S))})),this._register(new XU(this.editor,this.model,this._instantiationService)),this._register(Iqe(Qe(g=>{const p=this._fontFamily.read(g);return p===""||p==="default"?"":`
.monaco-editor .ghost-text-decoration,
.monaco-editor .ghost-text-decoration-preview,
.monaco-editor .ghost-text {
	font-family: ${p};
}`}))),this._register(this._configurationService.onDidChangeConfiguration(g=>{g.affectsConfiguration("accessibility.verbosity.inlineCompletions")&&this.editor.updateOptions({inlineCompletionsAccessibilityVerbose:this._configurationService.getValue("accessibility.verbosity.inlineCompletions")})})),this.editor.updateOptions({inlineCompletionsAccessibilityVerbose:this._configurationService.getValue("accessibility.verbosity.inlineCompletions")})}playAccessibilitySignal(e){this._playAccessibilitySignal.trigger(e)}_provideScreenReaderUpdate(e){const t=this._contextKeyService.getContextKeyValue("accessibleViewIsShown"),i=this._keybindingService.lookupKeybinding("editor.action.accessibleView");let n;!t&&i&&this.editor.getOption(150)&&(n=v("showAccessibleViewHint","Inspect this in the accessible view ({0})",i.getAriaLabel())),ta(n?e+", "+n:e)}shouldShowHoverAt(e){var i;const t=(i=this.model.get())==null?void 0:i.primaryGhostText.get();return t?t.parts.some(n=>e.containsPosition(new G(t.lineNumber,n.column))):!1}shouldShowHoverAtViewZone(e){var t;return((t=this._ghostTextWidgets.get()[0])==null?void 0:t.ownsViewZone(e))??!1}},$$=Bb,Bb.ID="editor.contrib.inlineCompletionsController",Bb);Ic=$$=BKe([xf(1,nt),xf(2,ht),xf(3,Ht),xf(4,nn),xf(5,Yl),xf(6,Ue),xf(7,o_),xf(8,Di),xf(9,dl)],Ic);function WKe(o,e){const t=Wt("result",[]),i=[];return e.add(bt(n=>{const s=o.read(n);Mn(r=>{if(s.length!==i.length){i.length=s.length;for(let a=0;a<i.length;a++)i[a]||(i[a]=Wt("item",s[a]));t.set([...i],r)}i.forEach((a,l)=>a.set(s[l],r))})})),t}const cF=class cF extends Ve{constructor(){super({id:cF.ID,label:v("action.inlineSuggest.showNext","Show Next Inline Suggestion"),alias:"Show Next Inline Suggestion",precondition:de.and(B.writable,ol.inlineSuggestionVisible),kbOpts:{weight:100,primary:606}})}async run(e,t){var n;const i=Ic.get(t);(n=i==null?void 0:i.model.get())==null||n.next()}};cF.ID=ape;let j$=cF;const dF=class dF extends Ve{constructor(){super({id:dF.ID,label:v("action.inlineSuggest.showPrevious","Show Previous Inline Suggestion"),alias:"Show Previous Inline Suggestion",precondition:de.and(B.writable,ol.inlineSuggestionVisible),kbOpts:{weight:100,primary:604}})}async run(e,t){var n;const i=Ic.get(t);(n=i==null?void 0:i.model.get())==null||n.previous()}};dF.ID=rpe;let q$=dF;class HKe extends Ve{constructor(){super({id:"editor.action.inlineSuggest.trigger",label:v("action.inlineSuggest.trigger","Trigger Inline Suggestion"),alias:"Trigger Inline Suggestion",precondition:B.writable})}async run(e,t){const i=Ic.get(t);await _ue(async n=>{var s;await((s=i==null?void 0:i.model.get())==null?void 0:s.triggerExplicitly(n)),i==null||i.playAccessibilitySignal(n)})}}class VKe extends Ve{constructor(){super({id:"editor.action.inlineSuggest.acceptNextWord",label:v("action.inlineSuggest.acceptNextWord","Accept Next Word Of Inline Suggestion"),alias:"Accept Next Word Of Inline Suggestion",precondition:de.and(B.writable,ol.inlineSuggestionVisible),kbOpts:{weight:101,primary:2065,kbExpr:de.and(B.writable,ol.inlineSuggestionVisible)},menuOpts:[{menuId:qe.InlineSuggestionToolbar,title:v("acceptWord","Accept Word"),group:"primary",order:2}]})}async run(e,t){var n;const i=Ic.get(t);await((n=i==null?void 0:i.model.get())==null?void 0:n.acceptNextWord(i.editor))}}class zKe extends Ve{constructor(){super({id:"editor.action.inlineSuggest.acceptNextLine",label:v("action.inlineSuggest.acceptNextLine","Accept Next Line Of Inline Suggestion"),alias:"Accept Next Line Of Inline Suggestion",precondition:de.and(B.writable,ol.inlineSuggestionVisible),kbOpts:{weight:101},menuOpts:[{menuId:qe.InlineSuggestionToolbar,title:v("acceptLine","Accept Line"),group:"secondary",order:2}]})}async run(e,t){var n;const i=Ic.get(t);await((n=i==null?void 0:i.model.get())==null?void 0:n.acceptNextLine(i.editor))}}class UKe extends Ve{constructor(){super({id:ope,label:v("action.inlineSuggest.accept","Accept Inline Suggestion"),alias:"Accept Inline Suggestion",precondition:ol.inlineSuggestionVisible,menuOpts:[{menuId:qe.InlineSuggestionToolbar,title:v("accept","Accept"),group:"primary",order:1}],kbOpts:{primary:2,weight:200,kbExpr:de.and(ol.inlineSuggestionVisible,B.tabMovesFocus.toNegated(),ol.inlineSuggestionHasIndentationLessThanTabSize,At.Visible.toNegated(),B.hoverFocused.toNegated())}})}async run(e,t){var n;const i=Ic.get(t);i&&((n=i.model.get())==null||n.accept(i.editor),i.editor.focus())}}const uF=class uF extends Ve{constructor(){super({id:uF.ID,label:v("action.inlineSuggest.hide","Hide Inline Suggestion"),alias:"Hide Inline Suggestion",precondition:ol.inlineSuggestionVisible,kbOpts:{weight:100,primary:9}})}async run(e,t){const i=Ic.get(t);Mn(n=>{var s;(s=i==null?void 0:i.model.get())==null||s.stop(n)})}};uF.ID="editor.action.inlineSuggest.hide";let K$=uF;const hF=class hF extends na{constructor(){super({id:hF.ID,title:v("action.inlineSuggest.alwaysShowToolbar","Always Show Toolbar"),f1:!1,precondition:void 0,menu:[{id:qe.InlineSuggestionToolbar,group:"secondary",order:10}],toggled:de.equals("config.editor.inlineSuggest.showToolbar","always")})}async run(e,t){const i=e.get(Ht),s=i.getValue("editor.inlineSuggest.showToolbar")==="always"?"onHover":"always";i.updateValue("editor.inlineSuggest.showToolbar",s)}};hF.ID="editor.action.inlineSuggest.toggleAlwaysShowToolbar";let G$=hF;var $Ke=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Ix=function(o,e){return function(t,i){e(t,i,o)}};class jKe{constructor(e,t,i){this.owner=e,this.range=t,this.controller=i}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}let Y$=class{constructor(e,t,i,n,s,r){this._editor=e,this._languageService=t,this._openerService=i,this.accessibilityService=n,this._instantiationService=s,this._telemetryService=r,this.hoverOrdinal=4}suggestHoverAnchor(e){const t=Ic.get(this._editor);if(!t)return null;const i=e.target;if(i.type===8){const n=i.detail;if(t.shouldShowHoverAtViewZone(n.viewZoneId))return new WM(1e3,this,M.fromPositions(this._editor.getModel().validatePosition(n.positionBefore||n.position)),e.event.posx,e.event.posy,!1)}return i.type===7&&t.shouldShowHoverAt(i.range)?new WM(1e3,this,i.range,e.event.posx,e.event.posy,!1):i.type===6&&i.detail.mightBeForeignElement&&t.shouldShowHoverAt(i.range)?new WM(1e3,this,i.range,e.event.posx,e.event.posy,!1):null}computeSync(e,t){if(this._editor.getOption(62).showToolbar!=="onHover")return[];const i=Ic.get(this._editor);return i&&i.shouldShowHoverAt(e.range)?[new jKe(this,e.range,i)]:[]}renderHoverParts(e,t){const i=new le,n=t[0];this._telemetryService.publicLog2("inlineCompletionHover.shown"),this.accessibilityService.isScreenReaderOptimized()&&!this._editor.getOption(8)&&i.add(this.renderScreenReaderText(e,n));const s=n.controller.model.get(),r=this._instantiationService.createInstance(DS,this._editor,!1,Cc(null),s.selectedInlineCompletionIndex,s.inlineCompletionsCount,s.activeCommands),a=r.getDomNode();e.fragment.appendChild(a),s.triggerExplicitly(),i.add(r);const l={hoverPart:n,hoverElement:a,dispose(){i.dispose()}};return new xC([l])}renderScreenReaderText(e,t){const i=new le,n=xe,s=n("div.hover-row.markdown-hover"),r=ge(s,n("div.hover-contents",{"aria-live":"assertive"})),a=i.add(new kg({editor:this._editor},this._languageService,this._openerService)),l=c=>{i.add(a.onDidRenderAsync(()=>{r.className="hover-contents code-hover-contents",e.onContentsChanged()}));const u=v("inlineSuggestionFollows","Suggestion:"),f=i.add(a.render(new Xo().appendText(u).appendCodeblock("text",c)));r.replaceChildren(f.element)};return i.add(bt(c=>{var f;const u=(f=t.controller.model.read(c))==null?void 0:f.primaryGhostText.read(c);if(u){const g=this._editor.getModel().getLineContent(u.lineNumber);l(u.renderForScreenReader(g))}else Co(r)})),e.fragment.appendChild(s),i}};Y$=$Ke([Ix(1,In),Ix(2,Ma),Ix(3,dl),Ix(4,nt),Ix(5,tr)],Y$);class qKe{}const m5=new class{constructor(){this._implementations=[]}register(e){return this._implementations.push(e),{dispose:()=>{const t=this._implementations.indexOf(e);t!==-1&&this._implementations.splice(t,1)}}}getImplementations(){return this._implementations}};oi(Ic.ID,Ic,3);be(HKe);be(j$);be(q$);be(VKe);be(zKe);be(UKe);be(K$);Xi(G$);jC.register(Y$);m5.register(new qKe);var KKe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},D9=function(o,e){return function(t,i){e(t,i,o)}},Gx,km;let xE=(km=class{constructor(e,t,i,n){this.textModelResolverService=t,this.languageService=i,this.languageFeaturesService=n,this.toUnhook=new le,this.toUnhookForKeyboard=new le,this.currentWordAtPosition=null,this.previousPromise=null,this.editor=e,this.linkDecorations=this.editor.createDecorationsCollection();const s=new l5(e);this.toUnhook.add(s),this.toUnhook.add(s.onMouseMoveOrRelevantKeyDown(([r,a])=>{this.startFindDefinitionFromMouse(r,a??void 0)})),this.toUnhook.add(s.onExecute(r=>{this.isEnabled(r)&&this.gotoDefinition(r.target.position,r.hasSideBySideModifier).catch(a=>{wt(a)}).finally(()=>{this.removeLinkDecorations()})})),this.toUnhook.add(s.onCancel(()=>{this.removeLinkDecorations(),this.currentWordAtPosition=null}))}static get(e){return e.getContribution(Gx.ID)}async startFindDefinitionFromCursor(e){await this.startFindDefinition(e),this.toUnhookForKeyboard.add(this.editor.onDidChangeCursorPosition(()=>{this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear()})),this.toUnhookForKeyboard.add(this.editor.onKeyDown(t=>{t&&(this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear())}))}startFindDefinitionFromMouse(e,t){if(e.target.type===9&&this.linkDecorations.length>0)return;if(!this.editor.hasModel()||!this.isEnabled(e,t)){this.currentWordAtPosition=null,this.removeLinkDecorations();return}const i=e.target.position;this.startFindDefinition(i)}async startFindDefinition(e){var r;this.toUnhookForKeyboard.clear();const t=e?(r=this.editor.getModel())==null?void 0:r.getWordAtPosition(e):null;if(!t){this.currentWordAtPosition=null,this.removeLinkDecorations();return}if(this.currentWordAtPosition&&this.currentWordAtPosition.startColumn===t.startColumn&&this.currentWordAtPosition.endColumn===t.endColumn&&this.currentWordAtPosition.word===t.word)return;this.currentWordAtPosition=t;const i=new $fe(this.editor,15);this.previousPromise&&(this.previousPromise.cancel(),this.previousPromise=null),this.previousPromise=Gs(a=>this.findDefinition(e,a));let n;try{n=await this.previousPromise}catch(a){wt(a);return}if(!n||!n.length||!i.validate(this.editor)){this.removeLinkDecorations();return}const s=n[0].originSelectionRange?M.lift(n[0].originSelectionRange):new M(e.lineNumber,t.startColumn,e.lineNumber,t.endColumn);if(n.length>1){let a=s;for(const{originSelectionRange:l}of n)l&&(a=M.plusRange(a,l));this.addDecoration(a,new Xo().appendText(v("multipleResults","Click to show {0} definitions.",n.length)))}else{const a=n[0];if(!a.uri)return;this.textModelResolverService.createModelReference(a.uri).then(l=>{if(!l.object||!l.object.textEditorModel){l.dispose();return}const{object:{textEditorModel:c}}=l,{startLineNumber:u}=a.range;if(u<1||u>c.getLineCount()){l.dispose();return}const f=this.getPreviewValue(c,u,a),g=this.languageService.guessLanguageIdByFilepathOrFirstLine(c.uri);this.addDecoration(s,f?new Xo().appendCodeblock(g||"",f):void 0),l.dispose()})}}getPreviewValue(e,t,i){let n=i.range;return n.endLineNumber-n.startLineNumber>=Gx.MAX_SOURCE_PREVIEW_LINES&&(n=this.getPreviewRangeBasedOnIndentation(e,t)),this.stripIndentationFromPreviewRange(e,t,n)}stripIndentationFromPreviewRange(e,t,i){let s=e.getLineFirstNonWhitespaceColumn(t);for(let a=t+1;a<i.endLineNumber;a++){const l=e.getLineFirstNonWhitespaceColumn(a);s=Math.min(s,l)}return e.getValueInRange(i).replace(new RegExp(`^\\s{${s-1}}`,"gm"),"").trim()}getPreviewRangeBasedOnIndentation(e,t){const i=e.getLineFirstNonWhitespaceColumn(t),n=Math.min(e.getLineCount(),t+Gx.MAX_SOURCE_PREVIEW_LINES);let s=t+1;for(;s<n;s++){const r=e.getLineFirstNonWhitespaceColumn(s);if(i===r)break}return new M(t,1,s+1,1)}addDecoration(e,t){const i={range:e,options:{description:"goto-definition-link",inlineClassName:"goto-definition-link",hoverMessage:t}};this.linkDecorations.set([i])}removeLinkDecorations(){this.linkDecorations.clear()}isEnabled(e,t){var i;return this.editor.hasModel()&&e.isLeftClick&&e.isNoneOrSingleMouseDown&&e.target.type===6&&!(((i=e.target.detail.injectedText)==null?void 0:i.options)instanceof jm)&&(e.hasTriggerModifier||(t?t.keyCodeIsTriggerKey:!1))&&this.languageFeaturesService.definitionProvider.has(this.editor.getModel())}findDefinition(e,t){const i=this.editor.getModel();return i?EI(this.languageFeaturesService.definitionProvider,i,e,!1,t):Promise.resolve(null)}gotoDefinition(e,t){return this.editor.setPosition(e),this.editor.invokeWithinContext(i=>{const n=!t&&this.editor.getOption(89)&&!this.isInPeekEditor(i);return new TI({openToSide:t,openInPeek:n,muteMessage:!0},{title:{value:"",original:""},id:"",precondition:void 0}).run(i)})}isInPeekEditor(e){const t=e.get(ht);return Ia.inPeekEditor.getValue(t)}dispose(){this.toUnhook.dispose(),this.toUnhookForKeyboard.dispose()}},Gx=km,km.ID="editor.contrib.gotodefinitionatposition",km.MAX_SOURCE_PREVIEW_LINES=8,km);xE=Gx=KKe([D9(1,Na),D9(2,In),D9(3,Ue)],xE);oi(xE.ID,xE,2);var Qpe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},PO=function(o,e){return function(t,i){e(t,i,o)}};class Sae{constructor(e,t,i){this.marker=e,this.index=t,this.total=i}}let Z$=class{constructor(e,t,i){this._markerService=t,this._configService=i,this._onDidChange=new Y,this.onDidChange=this._onDidChange.event,this._dispoables=new le,this._markers=[],this._nextIdx=-1,st.isUri(e)?this._resourceFilter=a=>a.toString()===e.toString():e&&(this._resourceFilter=e);const n=this._configService.getValue("problems.sortOrder"),s=(a,l)=>{let c=gD(a.resource.toString(),l.resource.toString());return c===0&&(n==="position"?c=M.compareRangesUsingStarts(a,l)||Yn.compare(a.severity,l.severity):c=Yn.compare(a.severity,l.severity)||M.compareRangesUsingStarts(a,l)),c},r=()=>{this._markers=this._markerService.read({resource:st.isUri(e)?e:void 0,severities:Yn.Error|Yn.Warning|Yn.Info}),typeof e=="function"&&(this._markers=this._markers.filter(a=>this._resourceFilter(a.resource))),this._markers.sort(s)};r(),this._dispoables.add(t.onMarkerChanged(a=>{(!this._resourceFilter||a.some(l=>this._resourceFilter(l)))&&(r(),this._nextIdx=-1,this._onDidChange.fire())}))}dispose(){this._dispoables.dispose(),this._onDidChange.dispose()}matches(e){return!this._resourceFilter&&!e?!0:!this._resourceFilter||!e?!1:this._resourceFilter(e)}get selected(){const e=this._markers[this._nextIdx];return e&&new Sae(e,this._nextIdx+1,this._markers.length)}_initIdx(e,t,i){let n=!1,s=this._markers.findIndex(r=>r.resource.toString()===e.uri.toString());s<0&&(s=oD(this._markers,{resource:e.uri},(r,a)=>gD(r.resource.toString(),a.resource.toString())),s<0&&(s=~s));for(let r=s;r<this._markers.length;r++){let a=M.lift(this._markers[r]);if(a.isEmpty()){const l=e.getWordAtPosition(a.getStartPosition());l&&(a=new M(a.startLineNumber,l.startColumn,a.startLineNumber,l.endColumn))}if(t&&(a.containsPosition(t)||t.isBeforeOrEqual(a.getStartPosition()))){this._nextIdx=r,n=!0;break}if(this._markers[r].resource.toString()!==e.uri.toString())break}n||(this._nextIdx=i?0:this._markers.length-1),this._nextIdx<0&&(this._nextIdx=this._markers.length-1)}resetIndex(){this._nextIdx=-1}move(e,t,i){if(this._markers.length===0)return!1;const n=this._nextIdx;return this._nextIdx===-1?this._initIdx(t,i,e):e?this._nextIdx=(this._nextIdx+1)%this._markers.length:e||(this._nextIdx=(this._nextIdx-1+this._markers.length)%this._markers.length),n!==this._nextIdx}find(e,t){let i=this._markers.findIndex(n=>n.resource.toString()===e.toString());if(!(i<0)){for(;i<this._markers.length;i++)if(M.containsPosition(this._markers[i],t))return new Sae(this._markers[i],i+1,this._markers.length)}}};Z$=Qpe([PO(1,Kh),PO(2,Ht)],Z$);const Jpe=Gt("IMarkerNavigationService");let X$=class{constructor(e,t){this._markerService=e,this._configService=t,this._provider=new jr}getMarkerList(e){for(const t of this._provider){const i=t.getMarkerList(e);if(i)return i}return new Z$(e,this._markerService,this._configService)}};X$=Qpe([PO(0,Kh),PO(1,Ht)],X$);ei(Jpe,X$,1);var Q$;(function(o){function e(t){switch(t){case hs.Ignore:return"severity-ignore "+ut.asClassName(Se.info);case hs.Info:return ut.asClassName(Se.info);case hs.Warning:return ut.asClassName(Se.warning);case hs.Error:return ut.asClassName(Se.error);default:return""}}o.className=e})(Q$||(Q$={}));var GKe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},gw=function(o,e){return function(t,i){e(t,i,o)}},J$;class YKe{constructor(e,t,i,n,s){this._openerService=n,this._labelService=s,this._lines=0,this._longestLineLength=0,this._relatedDiagnostics=new WeakMap,this._disposables=new le,this._editor=t;const r=document.createElement("div");r.className="descriptioncontainer",this._messageBlock=document.createElement("div"),this._messageBlock.classList.add("message"),this._messageBlock.setAttribute("aria-live","assertive"),this._messageBlock.setAttribute("role","alert"),r.appendChild(this._messageBlock),this._relatedBlock=document.createElement("div"),r.appendChild(this._relatedBlock),this._disposables.add(Bn(this._relatedBlock,"click",a=>{a.preventDefault();const l=this._relatedDiagnostics.get(a.target);l&&i(l)})),this._scrollable=new Ude(r,{horizontal:1,vertical:1,useShadows:!1,horizontalScrollbarSize:6,verticalScrollbarSize:6}),e.appendChild(this._scrollable.getDomNode()),this._disposables.add(this._scrollable.onScroll(a=>{r.style.left=`-${a.scrollLeft}px`,r.style.top=`-${a.scrollTop}px`})),this._disposables.add(this._scrollable)}dispose(){$i(this._disposables)}update(e){const{source:t,message:i,relatedInformation:n,code:s}=e;let r=((t==null?void 0:t.length)||0)+2;s&&(typeof s=="string"?r+=s.length:r+=s.value.length);const a=zh(i);this._lines=a.length,this._longestLineLength=0;for(const g of a)this._longestLineLength=Math.max(g.length+r,this._longestLineLength);bo(this._messageBlock),this._messageBlock.setAttribute("aria-label",this.getAriaLabel(e)),this._editor.applyFontInfo(this._messageBlock);let l=this._messageBlock;for(const g of a)l=document.createElement("div"),l.innerText=g,g===""&&(l.style.height=this._messageBlock.style.lineHeight),this._messageBlock.appendChild(l);if(t||s){const g=document.createElement("span");if(g.classList.add("details"),l.appendChild(g),t){const p=document.createElement("span");p.innerText=t,p.classList.add("source"),g.appendChild(p)}if(s)if(typeof s=="string"){const p=document.createElement("span");p.innerText=`(${s})`,p.classList.add("code"),g.appendChild(p)}else{this._codeLink=xe("a.code-link"),this._codeLink.setAttribute("href",`${s.target.toString()}`),this._codeLink.onclick=_=>{this._openerService.open(s.target,{allowCommands:!0}),_.preventDefault(),_.stopPropagation()};const p=ge(this._codeLink,xe("span"));p.innerText=s.value,g.appendChild(this._codeLink)}}if(bo(this._relatedBlock),this._editor.applyFontInfo(this._relatedBlock),wr(n)){const g=this._relatedBlock.appendChild(document.createElement("div"));g.style.paddingTop=`${Math.floor(this._editor.getOption(67)*.66)}px`,this._lines+=1;for(const p of n){const _=document.createElement("div"),b=document.createElement("a");b.classList.add("filename"),b.innerText=`${this._labelService.getUriBasenameLabel(p.resource)}(${p.startLineNumber}, ${p.startColumn}): `,b.title=this._labelService.getUriLabel(p.resource),this._relatedDiagnostics.set(b,p);const y=document.createElement("span");y.innerText=p.message,_.appendChild(b),_.appendChild(y),this._lines+=1,g.appendChild(_)}}const c=this._editor.getOption(50),u=Math.ceil(c.typicalFullwidthCharacterWidth*this._longestLineLength*.75),f=c.lineHeight*this._lines;this._scrollable.setScrollDimensions({scrollWidth:u,scrollHeight:f})}layout(e,t){this._scrollable.getDomNode().style.height=`${e}px`,this._scrollable.getDomNode().style.width=`${t}px`,this._scrollable.setScrollDimensions({width:t,height:e})}getHeightInLines(){return Math.min(17,this._lines)}getAriaLabel(e){let t="";switch(e.severity){case Yn.Error:t=v("Error","Error");break;case Yn.Warning:t=v("Warning","Warning");break;case Yn.Info:t=v("Info","Info");break;case Yn.Hint:t=v("Hint","Hint");break}let i=v("marker aria","{0} at {1}. ",t,e.startLineNumber+":"+e.startColumn);const n=this._editor.getModel();return n&&e.startLineNumber<=n.getLineCount()&&e.startLineNumber>=1&&(i=`${n.getLineContent(e.startLineNumber)}, ${i}`),i}}var Wb;let kE=(Wb=class extends hO{constructor(e,t,i,n,s,r,a){super(e,{showArrow:!0,showFrame:!0,isAccessible:!0,frameWidth:1},s),this._themeService=t,this._openerService=i,this._menuService=n,this._contextKeyService=r,this._labelService=a,this._callOnDispose=new le,this._onDidSelectRelatedInformation=new Y,this.onDidSelectRelatedInformation=this._onDidSelectRelatedInformation.event,this._severity=Yn.Warning,this._backgroundColor=ue.white,this._applyTheme(t.getColorTheme()),this._callOnDispose.add(t.onDidColorThemeChange(this._applyTheme.bind(this))),this.create()}_applyTheme(e){this._backgroundColor=e.getColor(JKe);let t=ej,i=ZKe;this._severity===Yn.Warning?(t=UM,i=XKe):this._severity===Yn.Info&&(t=tj,i=QKe);const n=e.getColor(t),s=e.getColor(i);this.style({arrowColor:n,frameColor:n,headerBackgroundColor:s,primaryHeadingColor:e.getColor(_pe),secondaryHeadingColor:e.getColor(vpe)})}_applyStyles(){this._parentContainer&&(this._parentContainer.style.backgroundColor=this._backgroundColor?this._backgroundColor.toString():""),super._applyStyles()}dispose(){this._callOnDispose.dispose(),super.dispose()}_fillHead(e){super._fillHead(e),this._disposables.add(this._actionbarWidget.actionRunner.onWillRun(n=>this.editor.focus()));const t=[],i=this._menuService.getMenuActions(J$.TitleMenu,this._contextKeyService);R4(i,t),this._actionbarWidget.push(t,{label:!1,icon:!0,index:0})}_fillTitleIcon(e){this._icon=ge(e,xe(""))}_fillBody(e){this._parentContainer=e,e.classList.add("marker-widget"),this._parentContainer.tabIndex=0,this._parentContainer.setAttribute("role","tooltip"),this._container=document.createElement("div"),e.appendChild(this._container),this._message=new YKe(this._container,this.editor,t=>this._onDidSelectRelatedInformation.fire(t),this._openerService,this._labelService),this._disposables.add(this._message)}show(){throw new Error("call showAtMarker")}showAtMarker(e,t,i){this._container.classList.remove("stale"),this._message.update(e),this._severity=e.severity,this._applyTheme(this._themeService.getColorTheme());const n=M.lift(e),s=this.editor.getPosition(),r=s&&n.containsPosition(s)?s:n.getStartPosition();super.show(r,this.computeRequiredHeight());const a=this.editor.getModel();if(a){const l=i>1?v("problems","{0} of {1} problems",t,i):v("change","{0} of {1} problem",t,i);this.setTitle(Dc(a.uri),l)}this._icon.className=`codicon ${Q$.className(Yn.toSeverity(this._severity))}`,this.editor.revealPositionNearTop(r,0),this.editor.focus()}updateMarker(e){this._container.classList.remove("stale"),this._message.update(e)}showStale(){this._container.classList.add("stale"),this._relayout()}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._heightInPixel=e,this._message.layout(e,t),this._container.style.height=`${e}px`}_onWidth(e){this._message.layout(this._heightInPixel,e)}_relayout(){super._relayout(this.computeRequiredHeight())}computeRequiredHeight(){return 3+this._message.getHeightInLines()}},J$=Wb,Wb.TitleMenu=new qe("gotoErrorTitleMenu"),Wb);kE=J$=GKe([gw(1,Ws),gw(2,Ma),gw(3,Gl),gw(4,nt),gw(5,ht),gw(6,hS)],kE);const Lae=xD(g4,$Ne),xae=xD(xg,kD),kae=xD(Ph,DD),ej=W("editorMarkerNavigationError.background",{dark:Lae,light:Lae,hcDark:si,hcLight:si},v("editorMarkerNavigationError","Editor marker navigation widget error color.")),ZKe=W("editorMarkerNavigationError.headerBackground",{dark:Pt(ej,.1),light:Pt(ej,.1),hcDark:null,hcLight:null},v("editorMarkerNavigationErrorHeaderBackground","Editor marker navigation widget error heading background.")),UM=W("editorMarkerNavigationWarning.background",{dark:xae,light:xae,hcDark:si,hcLight:si},v("editorMarkerNavigationWarning","Editor marker navigation widget warning color.")),XKe=W("editorMarkerNavigationWarning.headerBackground",{dark:Pt(UM,.1),light:Pt(UM,.1),hcDark:"#0C141F",hcLight:Pt(UM,.2)},v("editorMarkerNavigationWarningBackground","Editor marker navigation widget warning heading background.")),tj=W("editorMarkerNavigationInfo.background",{dark:kae,light:kae,hcDark:si,hcLight:si},v("editorMarkerNavigationInfo","Editor marker navigation widget info color.")),QKe=W("editorMarkerNavigationInfo.headerBackground",{dark:Pt(tj,.1),light:Pt(tj,.1),hcDark:null,hcLight:null},v("editorMarkerNavigationInfoHeaderBackground","Editor marker navigation widget info heading background.")),JKe=W("editorMarkerNavigation.background",ud,v("editorMarkerNavigationBackground","Editor marker navigation widget background."));var eGe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},tM=function(o,e){return function(t,i){e(t,i,o)}},Yx,Hb;let EC=(Hb=class{static get(e){return e.getContribution(Yx.ID)}constructor(e,t,i,n,s){this._markerNavigationService=t,this._contextKeyService=i,this._editorService=n,this._instantiationService=s,this._sessionDispoables=new le,this._editor=e,this._widgetVisible=eme.bindTo(this._contextKeyService)}dispose(){this._cleanUp(),this._sessionDispoables.dispose()}_cleanUp(){this._widgetVisible.reset(),this._sessionDispoables.clear(),this._widget=void 0,this._model=void 0}_getOrCreateModel(e){if(this._model&&this._model.matches(e))return this._model;let t=!1;return this._model&&(t=!0,this._cleanUp()),this._model=this._markerNavigationService.getMarkerList(e),t&&this._model.move(!0,this._editor.getModel(),this._editor.getPosition()),this._widget=this._instantiationService.createInstance(kE,this._editor),this._widget.onDidClose(()=>this.close(),this,this._sessionDispoables),this._widgetVisible.set(!0),this._sessionDispoables.add(this._model),this._sessionDispoables.add(this._widget),this._sessionDispoables.add(this._editor.onDidChangeCursorPosition(i=>{var n,s,r;(!((n=this._model)!=null&&n.selected)||!M.containsPosition((s=this._model)==null?void 0:s.selected.marker,i.position))&&((r=this._model)==null||r.resetIndex())})),this._sessionDispoables.add(this._model.onDidChange(()=>{if(!this._widget||!this._widget.position||!this._model)return;const i=this._model.find(this._editor.getModel().uri,this._widget.position);i?this._widget.updateMarker(i.marker):this._widget.showStale()})),this._sessionDispoables.add(this._widget.onDidSelectRelatedInformation(i=>{this._editorService.openCodeEditor({resource:i.resource,options:{pinned:!0,revealIfOpened:!0,selection:M.lift(i).collapseToStart()}},this._editor),this.close(!1)})),this._sessionDispoables.add(this._editor.onDidChangeModel(()=>this._cleanUp())),this._model}close(e=!0){this._cleanUp(),e&&this._editor.focus()}showAtMarker(e){if(this._editor.hasModel()){const t=this._getOrCreateModel(this._editor.getModel().uri);t.resetIndex(),t.move(!0,this._editor.getModel(),new G(e.startLineNumber,e.startColumn)),t.selected&&this._widget.showAtMarker(t.selected.marker,t.selected.index,t.selected.total)}}async nagivate(e,t){var i,n;if(this._editor.hasModel()){const s=this._getOrCreateModel(t?void 0:this._editor.getModel().uri);if(s.move(e,this._editor.getModel(),this._editor.getPosition()),!s.selected)return;if(s.selected.marker.resource.toString()!==this._editor.getModel().uri.toString()){this._cleanUp();const r=await this._editorService.openCodeEditor({resource:s.selected.marker.resource,options:{pinned:!1,revealIfOpened:!0,selectionRevealType:2,selection:s.selected.marker}},this._editor);r&&((i=Yx.get(r))==null||i.close(),(n=Yx.get(r))==null||n.nagivate(e,t))}else this._widget.showAtMarker(s.selected.marker,s.selected.index,s.selected.total)}}},Yx=Hb,Hb.ID="editor.contrib.markerController",Hb);EC=Yx=eGe([tM(1,Jpe),tM(2,ht),tM(3,hi),tM(4,nt)],EC);class _5 extends Ve{constructor(e,t,i){super(i),this._next=e,this._multiFile=t}async run(e,t){var i;t.hasModel()&&((i=EC.get(t))==null||i.nagivate(this._next,this._multiFile))}}const Nv=class Nv extends _5{constructor(){super(!0,!1,{id:Nv.ID,label:Nv.LABEL,alias:"Go to Next Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:B.focus,primary:578,weight:100},menuOpts:{menuId:kE.TitleMenu,title:Nv.LABEL,icon:hn("marker-navigation-next",Se.arrowDown,v("nextMarkerIcon","Icon for goto next marker.")),group:"navigation",order:1}})}};Nv.ID="editor.action.marker.next",Nv.LABEL=v("markerAction.next.label","Go to Next Problem (Error, Warning, Info)");let OO=Nv;const Rv=class Rv extends _5{constructor(){super(!1,!1,{id:Rv.ID,label:Rv.LABEL,alias:"Go to Previous Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:B.focus,primary:1602,weight:100},menuOpts:{menuId:kE.TitleMenu,title:Rv.LABEL,icon:hn("marker-navigation-previous",Se.arrowUp,v("previousMarkerIcon","Icon for goto previous marker.")),group:"navigation",order:2}})}};Rv.ID="editor.action.marker.prev",Rv.LABEL=v("markerAction.previous.label","Go to Previous Problem (Error, Warning, Info)");let ij=Rv;class tGe extends _5{constructor(){super(!0,!0,{id:"editor.action.marker.nextInFiles",label:v("markerAction.nextInFiles.label","Go to Next Problem in Files (Error, Warning, Info)"),alias:"Go to Next Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:B.focus,primary:66,weight:100},menuOpts:{menuId:qe.MenubarGoMenu,title:v({key:"miGotoNextProblem",comment:["&& denotes a mnemonic"]},"Next &&Problem"),group:"6_problem_nav",order:1}})}}class iGe extends _5{constructor(){super(!1,!0,{id:"editor.action.marker.prevInFiles",label:v("markerAction.previousInFiles.label","Go to Previous Problem in Files (Error, Warning, Info)"),alias:"Go to Previous Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:B.focus,primary:1090,weight:100},menuOpts:{menuId:qe.MenubarGoMenu,title:v({key:"miGotoPreviousProblem",comment:["&& denotes a mnemonic"]},"Previous &&Problem"),group:"6_problem_nav",order:2}})}}oi(EC.ID,EC,4);be(OO);be(ij);be(tGe);be(iGe);const eme=new Pe("markersNavigationVisible",!1),nGe=Bs.bindToContribution(EC.get);Re(new nGe({id:"closeMarkersNavigation",precondition:eme,handler:o=>o.close(),kbOpts:{weight:150,kbExpr:B.focus,primary:9,secondary:[1033]}}));var Hd;(function(o){o.NoAutoFocus="noAutoFocus",o.FocusIfVisible="focusIfVisible",o.AutoFocusImmediately="autoFocusImmediately"})(Hd||(Hd={}));class sGe extends Ve{constructor(){super({id:spe,label:v({key:"showOrFocusHover",comment:["Label for action that will trigger the showing/focusing of a hover in the editor.","If the hover is not visible, it will show the hover.","This allows for users to show the hover without using the mouse."]},"Show or Focus Hover"),metadata:{description:pt("showOrFocusHoverDescription","Show or focus the editor hover which shows documentation, references, and other content for a symbol at the current cursor position."),args:[{name:"args",schema:{type:"object",properties:{focus:{description:"Controls if and when the hover should take focus upon being triggered by this action.",enum:[Hd.NoAutoFocus,Hd.FocusIfVisible,Hd.AutoFocusImmediately],enumDescriptions:[v("showOrFocusHover.focus.noAutoFocus","The hover will not automatically take focus."),v("showOrFocusHover.focus.focusIfVisible","The hover will take focus only if it is already visible."),v("showOrFocusHover.focus.autoFocusImmediately","The hover will automatically take focus when it appears.")],default:Hd.FocusIfVisible}}}}]},alias:"Show or Focus Hover",precondition:void 0,kbOpts:{kbExpr:B.editorTextFocus,primary:Is(2089,2087),weight:100}})}run(e,t,i){if(!t.hasModel())return;const n=Lr.get(t);if(!n)return;const s=i==null?void 0:i.focus;let r=Hd.FocusIfVisible;Object.values(Hd).includes(s)?r=s:typeof s=="boolean"&&s&&(r=Hd.AutoFocusImmediately);const a=c=>{const u=t.getPosition(),f=new M(u.lineNumber,u.column,u.lineNumber,u.column);n.showContentHover(f,1,1,c)},l=t.getOption(2)===2;n.isHoverVisible?r!==Hd.NoAutoFocus?n.focus():a(l):a(l||r===Hd.AutoFocusImmediately)}}class oGe extends Ve{constructor(){super({id:yUe,label:v({key:"showDefinitionPreviewHover",comment:["Label for action that will trigger the showing of definition preview hover in the editor.","This allows for users to show the definition preview hover without using the mouse."]},"Show Definition Preview Hover"),alias:"Show Definition Preview Hover",precondition:void 0,metadata:{description:pt("showDefinitionPreviewHoverDescription","Show the definition preview hover in the editor.")}})}run(e,t){const i=Lr.get(t);if(!i)return;const n=t.getPosition();if(!n)return;const s=new M(n.lineNumber,n.column,n.lineNumber,n.column),r=xE.get(t);if(!r)return;r.startFindDefinitionFromCursor(n).then(()=>{i.showContentHover(s,1,1,!0)})}}class rGe extends Ve{constructor(){super({id:wUe,label:v({key:"scrollUpHover",comment:["Action that allows to scroll up in the hover widget with the up arrow when the hover widget is focused."]},"Scroll Up Hover"),alias:"Scroll Up Hover",precondition:B.hoverFocused,kbOpts:{kbExpr:B.hoverFocused,primary:16,weight:100},metadata:{description:pt("scrollUpHoverDescription","Scroll up the editor hover.")}})}run(e,t){const i=Lr.get(t);i&&i.scrollUp()}}class aGe extends Ve{constructor(){super({id:SUe,label:v({key:"scrollDownHover",comment:["Action that allows to scroll down in the hover widget with the up arrow when the hover widget is focused."]},"Scroll Down Hover"),alias:"Scroll Down Hover",precondition:B.hoverFocused,kbOpts:{kbExpr:B.hoverFocused,primary:18,weight:100},metadata:{description:pt("scrollDownHoverDescription","Scroll down the editor hover.")}})}run(e,t){const i=Lr.get(t);i&&i.scrollDown()}}class lGe extends Ve{constructor(){super({id:LUe,label:v({key:"scrollLeftHover",comment:["Action that allows to scroll left in the hover widget with the left arrow when the hover widget is focused."]},"Scroll Left Hover"),alias:"Scroll Left Hover",precondition:B.hoverFocused,kbOpts:{kbExpr:B.hoverFocused,primary:15,weight:100},metadata:{description:pt("scrollLeftHoverDescription","Scroll left the editor hover.")}})}run(e,t){const i=Lr.get(t);i&&i.scrollLeft()}}class cGe extends Ve{constructor(){super({id:xUe,label:v({key:"scrollRightHover",comment:["Action that allows to scroll right in the hover widget with the right arrow when the hover widget is focused."]},"Scroll Right Hover"),alias:"Scroll Right Hover",precondition:B.hoverFocused,kbOpts:{kbExpr:B.hoverFocused,primary:17,weight:100},metadata:{description:pt("scrollRightHoverDescription","Scroll right the editor hover.")}})}run(e,t){const i=Lr.get(t);i&&i.scrollRight()}}class dGe extends Ve{constructor(){super({id:kUe,label:v({key:"pageUpHover",comment:["Action that allows to page up in the hover widget with the page up command when the hover widget is focused."]},"Page Up Hover"),alias:"Page Up Hover",precondition:B.hoverFocused,kbOpts:{kbExpr:B.hoverFocused,primary:11,secondary:[528],weight:100},metadata:{description:pt("pageUpHoverDescription","Page up the editor hover.")}})}run(e,t){const i=Lr.get(t);i&&i.pageUp()}}class uGe extends Ve{constructor(){super({id:DUe,label:v({key:"pageDownHover",comment:["Action that allows to page down in the hover widget with the page down command when the hover widget is focused."]},"Page Down Hover"),alias:"Page Down Hover",precondition:B.hoverFocused,kbOpts:{kbExpr:B.hoverFocused,primary:12,secondary:[530],weight:100},metadata:{description:pt("pageDownHoverDescription","Page down the editor hover.")}})}run(e,t){const i=Lr.get(t);i&&i.pageDown()}}class hGe extends Ve{constructor(){super({id:EUe,label:v({key:"goToTopHover",comment:["Action that allows to go to the top of the hover widget with the home command when the hover widget is focused."]},"Go To Top Hover"),alias:"Go To Bottom Hover",precondition:B.hoverFocused,kbOpts:{kbExpr:B.hoverFocused,primary:14,secondary:[2064],weight:100},metadata:{description:pt("goToTopHoverDescription","Go to the top of the editor hover.")}})}run(e,t){const i=Lr.get(t);i&&i.goToTop()}}class fGe extends Ve{constructor(){super({id:IUe,label:v({key:"goToBottomHover",comment:["Action that allows to go to the bottom in the hover widget with the end command when the hover widget is focused."]},"Go To Bottom Hover"),alias:"Go To Bottom Hover",precondition:B.hoverFocused,kbOpts:{kbExpr:B.hoverFocused,primary:13,secondary:[2066],weight:100},metadata:{description:pt("goToBottomHoverDescription","Go to the bottom of the editor hover.")}})}run(e,t){const i=Lr.get(t);i&&i.goToBottom()}}class gGe extends Ve{constructor(){super({id:o5,label:TUe,alias:"Increase Hover Verbosity Level",precondition:B.hoverVisible})}run(e,t,i){const n=Lr.get(t);if(!n)return;const s=(i==null?void 0:i.index)!==void 0?i.index:n.focusedHoverPartIndex();n.updateHoverVerbosityLevel(Ya.Increase,s,i==null?void 0:i.focus)}}class pGe extends Ve{constructor(){super({id:r5,label:NUe,alias:"Decrease Hover Verbosity Level",precondition:B.hoverVisible})}run(e,t,i){var r;const n=Lr.get(t);if(!n)return;const s=(i==null?void 0:i.index)!==void 0?i.index:n.focusedHoverPartIndex();(r=Lr.get(t))==null||r.updateHoverVerbosityLevel(Ya.Decrease,s,i==null?void 0:i.focus)}}var mGe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},E9=function(o,e){return function(t,i){e(t,i,o)}};const Uc=xe;class _Ge{constructor(e,t,i){this.owner=e,this.range=t,this.marker=i}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}const Dae={type:1,filter:{include:_n.QuickFix},triggerAction:ll.QuickFixHover};let nj=class{constructor(e,t,i,n){this._editor=e,this._markerDecorationsService=t,this._openerService=i,this._languageFeaturesService=n,this.hoverOrdinal=1,this.recentMarkerCodeActionsInfo=void 0}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1&&!e.supportsMarkerHover)return[];const i=this._editor.getModel(),n=e.range.startLineNumber,s=i.getLineMaxColumn(n),r=[];for(const a of t){const l=a.range.startLineNumber===n?a.range.startColumn:1,c=a.range.endLineNumber===n?a.range.endColumn:s,u=this._markerDecorationsService.getMarker(i.uri,a);if(!u)continue;const f=new M(e.range.startLineNumber,l,e.range.startLineNumber,c);r.push(new _Ge(this,f,u))}return r}renderHoverParts(e,t){if(!t.length)return new xC([]);const i=new le,n=[];t.forEach(r=>{const a=this._renderMarkerHover(r);e.fragment.appendChild(a.hoverElement),n.push(a)});const s=t.length===1?t[0]:t.sort((r,a)=>Yn.compare(r.marker.severity,a.marker.severity))[0];return this.renderMarkerStatusbar(e,s,i),new xC(n)}_renderMarkerHover(e){const t=new le,i=Uc("div.hover-row"),n=ge(i,Uc("div.marker.hover-contents")),{source:s,message:r,code:a,relatedInformation:l}=e.marker;this._editor.applyFontInfo(n);const c=ge(n,Uc("span"));if(c.style.whiteSpace="pre-wrap",c.innerText=r,s||a)if(a&&typeof a!="string"){const f=Uc("span");if(s){const b=ge(f,Uc("span"));b.innerText=s}const g=ge(f,Uc("a.code-link"));g.setAttribute("href",a.target.toString()),t.add(se(g,"click",b=>{this._openerService.open(a.target,{allowCommands:!0}),b.preventDefault(),b.stopPropagation()}));const p=ge(g,Uc("span"));p.innerText=a.value;const _=ge(n,f);_.style.opacity="0.6",_.style.paddingLeft="6px"}else{const f=ge(n,Uc("span"));f.style.opacity="0.6",f.style.paddingLeft="6px",f.innerText=s&&a?`${s}(${a})`:s||`(${a})`}if(wr(l))for(const{message:f,resource:g,startLineNumber:p,startColumn:_}of l){const b=ge(n,Uc("div"));b.style.marginTop="8px";const y=ge(b,Uc("a"));y.innerText=`${Dc(g)}(${p}, ${_}): `,y.style.cursor="pointer",t.add(se(y,"click",L=>{if(L.stopPropagation(),L.preventDefault(),this._openerService){const x={selection:{startLineNumber:p,startColumn:_}};this._openerService.open(g,{fromUserGesture:!0,editorOptions:x}).catch(wt)}}));const S=ge(b,Uc("span"));S.innerText=f,this._editor.applyFontInfo(S)}return{hoverPart:e,hoverElement:i,dispose:()=>t.dispose()}}renderMarkerStatusbar(e,t,i){if(t.marker.severity===Yn.Error||t.marker.severity===Yn.Warning||t.marker.severity===Yn.Info){const n=EC.get(this._editor);n&&e.statusBar.addAction({label:v("view problem","View Problem"),commandId:OO.ID,run:()=>{e.hide(),n.showAtMarker(t.marker),this._editor.focus()}})}if(!this._editor.getOption(92)){const n=e.statusBar.append(Uc("div"));this.recentMarkerCodeActionsInfo&&(sP.makeKey(this.recentMarkerCodeActionsInfo.marker)===sP.makeKey(t.marker)?this.recentMarkerCodeActionsInfo.hasCodeActions||(n.textContent=v("noQuickFixes","No quick fixes available")):this.recentMarkerCodeActionsInfo=void 0);const s=this.recentMarkerCodeActionsInfo&&!this.recentMarkerCodeActionsInfo.hasCodeActions?X.None:Bm(()=>n.textContent=v("checkingForQuickFixes","Checking for quick fixes..."),200,i);n.textContent||(n.textContent="");const r=this.getCodeActions(t.marker);i.add(it(()=>r.cancel())),r.then(a=>{if(s.dispose(),this.recentMarkerCodeActionsInfo={marker:t.marker,hasCodeActions:a.validActions.length>0},!this.recentMarkerCodeActionsInfo.hasCodeActions){a.dispose(),n.textContent=v("noQuickFixes","No quick fixes available");return}n.style.display="none";let l=!1;i.add(it(()=>{l||a.dispose()})),e.statusBar.addAction({label:v("quick fixes","Quick Fix..."),commandId:vY,run:c=>{l=!0;const u=xS.get(this._editor),f=os(c);e.hide(),u==null||u.showCodeActions(Dae,a,{x:f.left,y:f.top,width:f.width,height:f.height})}})},wt)}}getCodeActions(e){return Gs(t=>$w(this._languageFeaturesService.codeActionProvider,this._editor.getModel(),new M(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),Dae,iu.None,t))}};nj=mGe([E9(1,UK),E9(2,Ma),E9(3,Ue)],nj);class vGe{get lineNumber(){return this._lineNumber}set lineNumber(e){this._lineNumber=e}get lane(){return this._laneOrLine}set lane(e){this._laneOrLine=e}constructor(e){this._editor=e,this._lineNumber=-1,this._laneOrLine=cd.Center}computeSync(){var s;const e=r=>({value:r}),t=this._editor.getLineDecorations(this._lineNumber),i=[],n=this._laneOrLine==="lineNo";if(!t)return i;for(const r of t){const a=((s=r.options.glyphMargin)==null?void 0:s.position)??cd.Center;if(!n&&a!==this._laneOrLine)continue;const l=n?r.options.lineNumberHoverMessage:r.options.glyphMarginHoverMessage;!l||dS(l)||i.push(...Cq(l).map(e))}return i}}var bGe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Eae=function(o,e){return function(t,i){e(t,i,o)}},sj;const Iae=xe;var Vb;let oj=(Vb=class extends X{constructor(e,t,i){super(),this._renderDisposeables=this._register(new le),this._editor=e,this._isVisible=!1,this._messages=[],this._hover=this._register(new yK),this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._markdownRenderer=this._register(new kg({editor:this._editor},t,i)),this._computer=new vGe(this._editor),this._hoverOperation=this._register(new lpe(this._editor,this._computer)),this._register(this._hoverOperation.onResult(n=>{this._withResult(n.value)})),this._register(this._editor.onDidChangeModelDecorations(()=>this._onModelDecorationsChanged())),this._register(this._editor.onDidChangeConfiguration(n=>{n.hasChanged(50)&&this._updateFont()})),this._register(Bn(this._hover.containerDomNode,"mouseleave",n=>{this._onMouseLeave(n)})),this._editor.addOverlayWidget(this)}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return sj.ID}getDomNode(){return this._hover.containerDomNode}getPosition(){return null}_updateFont(){Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach(t=>this._editor.applyFontInfo(t))}_onModelDecorationsChanged(){this._isVisible&&(this._hoverOperation.cancel(),this._hoverOperation.start(0))}showsOrWillShow(e){const t=e.target;return t.type===2&&t.detail.glyphMarginLane?(this._startShowingAt(t.position.lineNumber,t.detail.glyphMarginLane),!0):t.type===3?(this._startShowingAt(t.position.lineNumber,"lineNo"),!0):!1}_startShowingAt(e,t){this._computer.lineNumber===e&&this._computer.lane===t||(this._hoverOperation.cancel(),this.hide(),this._computer.lineNumber=e,this._computer.lane=t,this._hoverOperation.start(0))}hide(){this._computer.lineNumber=-1,this._hoverOperation.cancel(),this._isVisible&&(this._isVisible=!1,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible))}_withResult(e){this._messages=e,this._messages.length>0?this._renderMessages(this._computer.lineNumber,this._messages):this.hide()}_renderMessages(e,t){this._renderDisposeables.clear();const i=document.createDocumentFragment();for(const n of t){const s=Iae("div.hover-row.markdown-hover"),r=ge(s,Iae("div.hover-contents")),a=this._renderDisposeables.add(this._markdownRenderer.render(n.value));r.appendChild(a.element),i.appendChild(s)}this._updateContents(i),this._showAt(e)}_updateContents(e){this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(e),this._updateFont()}_showAt(e){this._isVisible||(this._isVisible=!0,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible));const t=this._editor.getLayoutInfo(),i=this._editor.getTopForLineNumber(e),n=this._editor.getScrollTop(),s=this._editor.getOption(67),r=this._hover.containerDomNode.clientHeight,a=i-n-(r-s)/2,l=t.glyphMarginLeft+t.glyphMarginWidth+(this._computer.lane==="lineNo"?t.lineNumbersWidth:0);this._hover.containerDomNode.style.left=`${l}px`,this._hover.containerDomNode.style.top=`${Math.max(Math.round(a),0)}px`}_onMouseLeave(e){const t=this._editor.getDomNode();(!t||!a5(t,e.x,e.y))&&this.hide()}},sj=Vb,Vb.ID="editor.contrib.modesGlyphHoverWidget",Vb);oj=sj=bGe([Eae(1,In),Eae(2,Ma)],oj);var CGe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},yGe=function(o,e){return function(t,i){e(t,i,o)}},j1;let FO=(j1=class extends X{constructor(e,t){super(),this._editor=e,this._instantiationService=t,this.shouldKeepOpenOnEditorMouseMoveOrLeave=!1,this._listenersStore=new le,this._hoverState={mouseDown:!1},this._reactToEditorMouseMoveRunner=this._register(new Oi(()=>this._reactToEditorMouseMove(this._mouseMoveEvent),0)),this._hookListeners(),this._register(this._editor.onDidChangeConfiguration(i=>{i.hasChanged(60)&&(this._unhookListeners(),this._hookListeners())}))}_hookListeners(){const e=this._editor.getOption(60);this._hoverSettings={enabled:e.enabled,sticky:e.sticky,hidingDelay:e.hidingDelay},e.enabled?(this._listenersStore.add(this._editor.onMouseDown(t=>this._onEditorMouseDown(t))),this._listenersStore.add(this._editor.onMouseUp(()=>this._onEditorMouseUp())),this._listenersStore.add(this._editor.onMouseMove(t=>this._onEditorMouseMove(t))),this._listenersStore.add(this._editor.onKeyDown(t=>this._onKeyDown(t)))):(this._listenersStore.add(this._editor.onMouseMove(t=>this._onEditorMouseMove(t))),this._listenersStore.add(this._editor.onKeyDown(t=>this._onKeyDown(t)))),this._listenersStore.add(this._editor.onMouseLeave(t=>this._onEditorMouseLeave(t))),this._listenersStore.add(this._editor.onDidChangeModel(()=>{this._cancelScheduler(),this._hideWidgets()})),this._listenersStore.add(this._editor.onDidChangeModelContent(()=>this._cancelScheduler())),this._listenersStore.add(this._editor.onDidScrollChange(t=>this._onEditorScrollChanged(t)))}_unhookListeners(){this._listenersStore.clear()}_cancelScheduler(){this._mouseMoveEvent=void 0,this._reactToEditorMouseMoveRunner.cancel()}_onEditorScrollChanged(e){(e.scrollTopChanged||e.scrollLeftChanged)&&this._hideWidgets()}_onEditorMouseDown(e){this._hoverState.mouseDown=!0,!this._isMouseOnMarginHoverWidget(e)&&this._hideWidgets()}_isMouseOnMarginHoverWidget(e){var i;const t=(i=this._glyphWidget)==null?void 0:i.getDomNode();return t?a5(t,e.event.posx,e.event.posy):!1}_onEditorMouseUp(){this._hoverState.mouseDown=!1}_onEditorMouseLeave(e){this.shouldKeepOpenOnEditorMouseMoveOrLeave||(this._cancelScheduler(),this._isMouseOnMarginHoverWidget(e))||this._hideWidgets()}_shouldNotRecomputeCurrentHoverWidget(e){const t=this._hoverSettings.sticky,i=this._isMouseOnMarginHoverWidget(e);return t&&i}_onEditorMouseMove(e){if(this.shouldKeepOpenOnEditorMouseMoveOrLeave)return;if(this._mouseMoveEvent=e,this._shouldNotRecomputeCurrentHoverWidget(e)){this._reactToEditorMouseMoveRunner.cancel();return}this._reactToEditorMouseMove(e)}_reactToEditorMouseMove(e){!e||this._tryShowHoverWidget(e)||this._hideWidgets()}_tryShowHoverWidget(e){return this._getOrCreateGlyphWidget().showsOrWillShow(e)}_onKeyDown(e){this._editor.hasModel()&&(e.keyCode===5||e.keyCode===6||e.keyCode===57||e.keyCode===4||this._hideWidgets())}_hideWidgets(){var e;(e=this._glyphWidget)==null||e.hide()}_getOrCreateGlyphWidget(){return this._glyphWidget||(this._glyphWidget=this._instantiationService.createInstance(oj,this._editor)),this._glyphWidget}dispose(){var e;super.dispose(),this._unhookListeners(),this._listenersStore.dispose(),(e=this._glyphWidget)==null||e.dispose()}},j1.ID="editor.contrib.marginHover",j1);FO=CGe([yGe(1,nt)],FO);class wGe{}class SGe{}class LGe{}oi(Lr.ID,Lr,2);oi(FO.ID,FO,2);be(sGe);be(oGe);be(rGe);be(aGe);be(lGe);be(cGe);be(dGe);be(uGe);be(hGe);be(fGe);be(gGe);be(pGe);jC.register(CE);jC.register(nj);Nc((o,e)=>{const t=o.getColor(Tde);t&&(e.addRule(`.monaco-editor .monaco-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${t.transparent(.5)}; }`),e.addRule(`.monaco-editor .monaco-hover hr { border-top: 1px solid ${t.transparent(.5)}; }`),e.addRule(`.monaco-editor .monaco-hover hr { border-bottom: 0px solid ${t.transparent(.5)}; }`))});m5.register(new wGe);m5.register(new SGe);m5.register(new LGe);function ja(o,e){let t=0;for(let i=0;i<o.length;i++)o.charAt(i)==="	"?t+=e:t++;return t}function Pk(o,e,t){o=o<0?0:o;let i="";if(!t){const n=Math.floor(o/e);o=o%e;for(let s=0;s<n;s++)i+="	"}for(let n=0;n<o;n++)i+=" ";return i}function tme(o,e,t,i){if(o.getLineCount()===1&&o.getLineMaxColumn(1)===1)return[];const n=e.getLanguageConfiguration(o.getLanguageId()).indentRulesSupport;if(!n)return[];const s=new IG(o,n,e);for(i=Math.min(i,o.getLineCount());t<=i&&s.shouldIgnore(t);)t++;if(t>i-1)return[];const{tabSize:r,indentSize:a,insertSpaces:l}=o.getOptions(),c=(b,y)=>(y=y||1,Ec.shiftIndent(b,b.length+y,r,a,l)),u=(b,y)=>(y=y||1,Ec.unshiftIndent(b,b.length+y,r,a,l)),f=[],g=o.getLineContent(t);let p=Ui(g),_=p;s.shouldIncrease(t)?(_=c(_),p=c(p)):s.shouldIndentNextLine(t)&&(_=c(_)),t++;for(let b=t;b<=i;b++){if(xGe(o,b))continue;const y=o.getLineContent(b),S=Ui(y),L=_;s.shouldDecrease(b,L)&&(_=u(_),p=u(p)),S!==_&&f.push(Rn.replaceMove(new Ke(b,1,b,S.length+1),$K(_,a,l))),!s.shouldIgnore(b)&&(s.shouldIncrease(b,L)?(p=c(p),_=p):s.shouldIndentNextLine(b,L)?_=c(_):_=p)}return f}function xGe(o,e){return o.tokenization.isCheapToTokenize(e)?o.tokenization.getLineTokens(e).getStandardTokenType(0)===2:!1}var kGe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},DGe=function(o,e){return function(t,i){e(t,i,o)}};const fF=class fF extends Ve{constructor(){super({id:fF.ID,label:v("indentationToSpaces","Convert Indentation to Spaces"),alias:"Convert Indentation to Spaces",precondition:B.writable,metadata:{description:pt("indentationToSpacesDescription","Convert the tab indentation to spaces.")}})}run(e,t){const i=t.getModel();if(!i)return;const n=i.getOptions(),s=t.getSelection();if(!s)return;const r=new RGe(s,n.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[r]),t.pushUndoStop(),i.updateOptions({insertSpaces:!0})}};fF.ID="editor.action.indentationToSpaces";let rj=fF;const gF=class gF extends Ve{constructor(){super({id:gF.ID,label:v("indentationToTabs","Convert Indentation to Tabs"),alias:"Convert Indentation to Tabs",precondition:B.writable,metadata:{description:pt("indentationToTabsDescription","Convert the spaces indentation to tabs.")}})}run(e,t){const i=t.getModel();if(!i)return;const n=i.getOptions(),s=t.getSelection();if(!s)return;const r=new MGe(s,n.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[r]),t.pushUndoStop(),i.updateOptions({insertSpaces:!1})}};gF.ID="editor.action.indentationToTabs";let aj=gF;class $Y extends Ve{constructor(e,t,i){super(i),this.insertSpaces=e,this.displaySizeOnly=t}run(e,t){const i=e.get(Rc),n=e.get(un),s=t.getModel();if(!s)return;const r=n.getCreationOptions(s.getLanguageId(),s.uri,s.isForSimpleWidget),a=s.getOptions(),l=[1,2,3,4,5,6,7,8].map(u=>({id:u.toString(),label:u.toString(),description:u===r.tabSize&&u===a.tabSize?v("configuredTabSize","Configured Tab Size"):u===r.tabSize?v("defaultTabSize","Default Tab Size"):u===a.tabSize?v("currentTabSize","Current Tab Size"):void 0})),c=Math.min(s.getOptions().tabSize-1,7);setTimeout(()=>{i.pick(l,{placeHolder:v({key:"selectTabWidth",comment:["Tab corresponds to the tab key"]},"Select Tab Size for Current File"),activeItem:l[c]}).then(u=>{if(u&&s&&!s.isDisposed()){const f=parseInt(u.label,10);this.displaySizeOnly?s.updateOptions({tabSize:f}):s.updateOptions({tabSize:f,indentSize:f,insertSpaces:this.insertSpaces})}})},50)}}const pF=class pF extends $Y{constructor(){super(!1,!1,{id:pF.ID,label:v("indentUsingTabs","Indent Using Tabs"),alias:"Indent Using Tabs",precondition:void 0,metadata:{description:pt("indentUsingTabsDescription","Use indentation with tabs.")}})}};pF.ID="editor.action.indentUsingTabs";let lj=pF;const mF=class mF extends $Y{constructor(){super(!0,!1,{id:mF.ID,label:v("indentUsingSpaces","Indent Using Spaces"),alias:"Indent Using Spaces",precondition:void 0,metadata:{description:pt("indentUsingSpacesDescription","Use indentation with spaces.")}})}};mF.ID="editor.action.indentUsingSpaces";let cj=mF;const _F=class _F extends $Y{constructor(){super(!0,!0,{id:_F.ID,label:v("changeTabDisplaySize","Change Tab Display Size"),alias:"Change Tab Display Size",precondition:void 0,metadata:{description:pt("changeTabDisplaySizeDescription","Change the space size equivalent of the tab.")}})}};_F.ID="editor.action.changeTabDisplaySize";let dj=_F;const vF=class vF extends Ve{constructor(){super({id:vF.ID,label:v("detectIndentation","Detect Indentation from Content"),alias:"Detect Indentation from Content",precondition:void 0,metadata:{description:pt("detectIndentationDescription","Detect the indentation from content.")}})}run(e,t){const i=e.get(un),n=t.getModel();if(!n)return;const s=i.getCreationOptions(n.getLanguageId(),n.uri,n.isForSimpleWidget);n.detectIndentation(s.insertSpaces,s.tabSize)}};vF.ID="editor.action.detectIndentation";let uj=vF;class EGe extends Ve{constructor(){super({id:"editor.action.reindentlines",label:v("editor.reindentlines","Reindent Lines"),alias:"Reindent Lines",precondition:B.writable,metadata:{description:pt("editor.reindentlinesDescription","Reindent the lines of the editor.")}})}run(e,t){const i=e.get(On),n=t.getModel();if(!n)return;const s=tme(n,i,1,n.getLineCount());s.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,s),t.pushUndoStop())}}class IGe extends Ve{constructor(){super({id:"editor.action.reindentselectedlines",label:v("editor.reindentselectedlines","Reindent Selected Lines"),alias:"Reindent Selected Lines",precondition:B.writable,metadata:{description:pt("editor.reindentselectedlinesDescription","Reindent the selected lines of the editor.")}})}run(e,t){const i=e.get(On),n=t.getModel();if(!n)return;const s=t.getSelections();if(s===null)return;const r=[];for(const a of s){let l=a.startLineNumber,c=a.endLineNumber;if(l!==c&&a.endColumn===1&&c--,l===1){if(l===c)continue}else l--;const u=tme(n,i,l,c);r.push(...u)}r.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,r),t.pushUndoStop())}}class TGe{constructor(e,t){this._initialSelection=t,this._edits=[],this._selectionId=null;for(const i of e)i.range&&typeof i.text=="string"&&this._edits.push(i)}getEditOperations(e,t){for(const n of this._edits)t.addEditOperation(M.lift(n.range),n.text);let i=!1;Array.isArray(this._edits)&&this._edits.length===1&&this._initialSelection.isEmpty()&&(this._edits[0].range.startColumn===this._initialSelection.endColumn&&this._edits[0].range.startLineNumber===this._initialSelection.endLineNumber?(i=!0,this._selectionId=t.trackSelection(this._initialSelection,!0)):this._edits[0].range.endColumn===this._initialSelection.startColumn&&this._edits[0].range.endLineNumber===this._initialSelection.startLineNumber&&(i=!0,this._selectionId=t.trackSelection(this._initialSelection,!1))),i||(this._selectionId=t.trackSelection(this._initialSelection))}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}var q1;let BO=(q1=class{constructor(e,t){this.editor=e,this._languageConfigurationService=t,this.callOnDispose=new le,this.callOnModel=new le,this.callOnDispose.add(e.onDidChangeConfiguration(()=>this.update())),this.callOnDispose.add(e.onDidChangeModel(()=>this.update())),this.callOnDispose.add(e.onDidChangeModelLanguage(()=>this.update()))}update(){this.callOnModel.clear(),!(this.editor.getOption(12)<4||this.editor.getOption(55))&&this.editor.hasModel()&&this.callOnModel.add(this.editor.onDidPaste(({range:e})=>{this.trigger(e)}))}trigger(e){const t=this.editor.getSelections();if(t===null||t.length>1)return;const i=this.editor.getModel();if(!i||this.rangeContainsOnlyWhitespaceCharacters(i,e)||NGe(i,e)||!i.tokenization.isCheapToTokenize(e.getStartPosition().lineNumber))return;const s=this.editor.getOption(12),{tabSize:r,indentSize:a,insertSpaces:l}=i.getOptions(),c=[],u={shiftIndent:_=>Ec.shiftIndent(_,_.length+1,r,a,l),unshiftIndent:_=>Ec.unshiftIndent(_,_.length+1,r,a,l)};let f=e.startLineNumber;for(;f<=e.endLineNumber;){if(this.shouldIgnoreLine(i,f)){f++;continue}break}if(f>e.endLineNumber)return;let g=i.getLineContent(f);if(!/\S/.test(g.substring(0,e.startColumn-1))){const _=wk(s,i,i.getLanguageId(),f,u,this._languageConfigurationService);if(_!==null){const b=Ui(g),y=ja(_,r),S=ja(b,r);if(y!==S){const L=Pk(y,r,l);c.push({range:new M(f,1,f,b.length+1),text:L}),g=L+g.substring(b.length)}else{const L=pfe(i,f,this._languageConfigurationService);if(L===0||L===8)return}}}const p=f;for(;f<e.endLineNumber;){if(!/\S/.test(i.getLineContent(f+1))){f++;continue}break}if(f!==e.endLineNumber){const b=wk(s,{tokenization:{getLineTokens:y=>i.tokenization.getLineTokens(y),getLanguageId:()=>i.getLanguageId(),getLanguageIdAtPosition:(y,S)=>i.getLanguageIdAtPosition(y,S)},getLineContent:y=>y===p?g:i.getLineContent(y)},i.getLanguageId(),f+1,u,this._languageConfigurationService);if(b!==null){const y=ja(b,r),S=ja(Ui(i.getLineContent(f+1)),r);if(y!==S){const L=y-S;for(let x=f+1;x<=e.endLineNumber;x++){const k=i.getLineContent(x),E=Ui(k),A=ja(E,r)+L,P=Pk(A,r,l);P!==E&&c.push({range:new M(x,1,x,E.length+1),text:P})}}}}if(c.length>0){this.editor.pushUndoStop();const _=new TGe(c,this.editor.getSelection());this.editor.executeCommand("autoIndentOnPaste",_),this.editor.pushUndoStop()}}rangeContainsOnlyWhitespaceCharacters(e,t){const i=s=>s.trim().length===0;let n=!0;if(t.startLineNumber===t.endLineNumber){const r=e.getLineContent(t.startLineNumber).substring(t.startColumn-1,t.endColumn-1);n=i(r)}else for(let s=t.startLineNumber;s<=t.endLineNumber;s++){const r=e.getLineContent(s);if(s===t.startLineNumber){const a=r.substring(t.startColumn-1);n=i(a)}else if(s===t.endLineNumber){const a=r.substring(0,t.endColumn-1);n=i(a)}else n=e.getLineFirstNonWhitespaceColumn(s)===0;if(!n)break}return n}shouldIgnoreLine(e,t){e.tokenization.forceTokenization(t);const i=e.getLineFirstNonWhitespaceColumn(t);if(i===0)return!0;const n=e.tokenization.getLineTokens(t);if(n.getCount()>0){const s=n.findTokenIndexAtOffset(i);if(s>=0&&n.getStandardTokenType(s)===1)return!0}return!1}dispose(){this.callOnDispose.dispose(),this.callOnModel.dispose()}},q1.ID="editor.contrib.autoIndentOnPaste",q1);BO=kGe([DGe(1,On)],BO);function NGe(o,e){const t=i=>XAe(o,i)===2;return t(e.getStartPosition())||t(e.getEndPosition())}function ime(o,e,t,i){if(o.getLineCount()===1&&o.getLineMaxColumn(1)===1)return;let n="";for(let r=0;r<t;r++)n+=" ";const s=new RegExp(n,"gi");for(let r=1,a=o.getLineCount();r<=a;r++){let l=o.getLineFirstNonWhitespaceColumn(r);if(l===0&&(l=o.getLineMaxColumn(r)),l===1)continue;const c=new M(r,1,r,l),u=o.getValueInRange(c),f=i?u.replace(/\t/ig,n):u.replace(s,"	");e.addEditOperation(c,f)}}class RGe{constructor(e,t){this.selection=e,this.tabSize=t,this.selectionId=null}getEditOperations(e,t){this.selectionId=t.trackSelection(this.selection),ime(e,t,this.tabSize,!0)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}}class MGe{constructor(e,t){this.selection=e,this.tabSize=t,this.selectionId=null}getEditOperations(e,t){this.selectionId=t.trackSelection(this.selection),ime(e,t,this.tabSize,!1)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}}oi(BO.ID,BO,2);be(rj);be(aj);be(lj);be(cj);be(dj);be(uj);be(EGe);be(IGe);oi(wE.ID,wE,1);jC.register(mO);class AGe{constructor(e,t,i){this._editRange=e,this._originalSelection=t,this._text=i}getEditOperations(e,t){t.addTrackedEditOperation(this._editRange,this._text)}computeCursorState(e,t){const n=t.getInverseEditOperations()[0].range;return this._originalSelection.isEmpty()?new Ke(n.endLineNumber,Math.min(this._originalSelection.positionColumn,n.endColumn),n.endLineNumber,Math.min(this._originalSelection.positionColumn,n.endColumn)):new Ke(n.endLineNumber,n.endColumn-this._text.length,n.endLineNumber,n.endColumn)}}var PGe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},OGe=function(o,e){return function(t,i){e(t,i,o)}},$M,Dm;let AS=(Dm=class{static get(e){return e.getContribution($M.ID)}constructor(e,t){this.editor=e,this.editorWorkerService=t,this.decorations=this.editor.createDecorationsCollection()}dispose(){}run(e,t){var l;(l=this.currentRequest)==null||l.cancel();const i=this.editor.getSelection(),n=this.editor.getModel();if(!n||!i)return;let s=i;if(s.startLineNumber!==s.endLineNumber)return;const r=new $fe(this.editor,5),a=n.uri;return this.editorWorkerService.canNavigateValueSet(a)?(this.currentRequest=Gs(c=>this.editorWorkerService.navigateValueSet(a,s,t)),this.currentRequest.then(c=>{var _;if(!c||!c.range||!c.value||!r.validate(this.editor))return;const u=M.lift(c.range);let f=c.range;const g=c.value.length-(s.endColumn-s.startColumn);f={startLineNumber:f.startLineNumber,startColumn:f.startColumn,endLineNumber:f.endLineNumber,endColumn:f.startColumn+c.value.length},g>1&&(s=new Ke(s.startLineNumber,s.startColumn,s.endLineNumber,s.endColumn+g-1));const p=new AGe(u,s,c.value);this.editor.pushUndoStop(),this.editor.executeCommand(e,p),this.editor.pushUndoStop(),this.decorations.set([{range:f,options:$M.DECORATION}]),(_=this.decorationRemover)==null||_.cancel(),this.decorationRemover=Sg(350),this.decorationRemover.then(()=>this.decorations.clear()).catch(wt)}).catch(wt)):Promise.resolve(void 0)}},$M=Dm,Dm.ID="editor.contrib.inPlaceReplaceController",Dm.DECORATION=Dt.register({description:"in-place-replace",className:"valueSetReplacement"}),Dm);AS=$M=PGe([OGe(1,Aa)],AS);class FGe extends Ve{constructor(){super({id:"editor.action.inPlaceReplace.up",label:v("InPlaceReplaceAction.previous.label","Replace with Previous Value"),alias:"Replace with Previous Value",precondition:B.writable,kbOpts:{kbExpr:B.editorTextFocus,primary:3159,weight:100}})}run(e,t){const i=AS.get(t);return i?i.run(this.id,!1):Promise.resolve(void 0)}}class BGe extends Ve{constructor(){super({id:"editor.action.inPlaceReplace.down",label:v("InPlaceReplaceAction.next.label","Replace with Next Value"),alias:"Replace with Next Value",precondition:B.writable,kbOpts:{kbExpr:B.editorTextFocus,primary:3161,weight:100}})}run(e,t){const i=AS.get(t);return i?i.run(this.id,!0):Promise.resolve(void 0)}}oi(AS.ID,AS,4);be(FGe);be(BGe);class WGe extends Ve{constructor(){super({id:"expandLineSelection",label:v("expandLineSelection","Expand Line Selection"),alias:"Expand Line Selection",precondition:void 0,kbOpts:{weight:0,kbExpr:B.textInputFocus,primary:2090}})}run(e,t,i){if(i=i||{},!t.hasModel())return;const n=t._getViewModel();n.model.pushStackElement(),n.setCursorStates(i.source,3,po.expandLineSelection(n,n.getCursorStates())),n.revealAllCursors(i.source,!0)}}be(WGe);class HGe{constructor(e,t,i){this._selection=e,this._cursors=t,this._selectionId=null,this._trimInRegexesAndStrings=i}getEditOperations(e,t){const i=VGe(e,this._cursors,this._trimInRegexesAndStrings);for(let n=0,s=i.length;n<s;n++){const r=i[n];t.addEditOperation(r.range,r.text)}this._selectionId=t.trackSelection(this._selection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}function VGe(o,e,t){e.sort((a,l)=>a.lineNumber===l.lineNumber?a.column-l.column:a.lineNumber-l.lineNumber);for(let a=e.length-2;a>=0;a--)e[a].lineNumber===e[a+1].lineNumber&&e.splice(a,1);const i=[];let n=0,s=0;const r=e.length;for(let a=1,l=o.getLineCount();a<=l;a++){const c=o.getLineContent(a),u=c.length+1;let f=0;if(s<r&&e[s].lineNumber===a&&(f=e[s].column,s++,f===u)||c.length===0)continue;const g=au(c);let p=0;if(g===-1)p=1;else if(g!==c.length-1)p=g+2;else continue;if(!t){if(!o.tokenization.hasAccurateTokensForLine(a))continue;const _=o.tokenization.getLineTokens(a),b=_.getStandardTokenType(_.findTokenIndexAtOffset(p));if(b===2||b===3)continue}p=Math.max(f,p),i[n++]=Rn.delete(new M(a,p,a,u))}return i}class nme{constructor(e,t,i){this._selection=e,this._isCopyingDown=t,this._noop=i||!1,this._selectionDirection=0,this._selectionId=null,this._startLineNumberDelta=0,this._endLineNumberDelta=0}getEditOperations(e,t){let i=this._selection;this._startLineNumberDelta=0,this._endLineNumberDelta=0,i.startLineNumber<i.endLineNumber&&i.endColumn===1&&(this._endLineNumberDelta=1,i=i.setEndPosition(i.endLineNumber-1,e.getLineMaxColumn(i.endLineNumber-1)));const n=[];for(let r=i.startLineNumber;r<=i.endLineNumber;r++)n.push(e.getLineContent(r));const s=n.join(`
`);s===""&&this._isCopyingDown&&(this._startLineNumberDelta++,this._endLineNumberDelta++),this._noop?t.addEditOperation(new M(i.endLineNumber,e.getLineMaxColumn(i.endLineNumber),i.endLineNumber+1,1),i.endLineNumber===e.getLineCount()?"":`
`):this._isCopyingDown?t.addEditOperation(new M(i.startLineNumber,1,i.startLineNumber,1),s+`
`):t.addEditOperation(new M(i.endLineNumber,e.getLineMaxColumn(i.endLineNumber),i.endLineNumber,e.getLineMaxColumn(i.endLineNumber)),`
`+s),this._selectionId=t.trackSelection(i),this._selectionDirection=this._selection.getDirection()}computeCursorState(e,t){let i=t.getTrackedSelection(this._selectionId);if(this._startLineNumberDelta!==0||this._endLineNumberDelta!==0){let n=i.startLineNumber,s=i.startColumn,r=i.endLineNumber,a=i.endColumn;this._startLineNumberDelta!==0&&(n=n+this._startLineNumberDelta,s=1),this._endLineNumberDelta!==0&&(r=r+this._endLineNumberDelta,a=1),i=Ke.createWithDirection(n,s,r,a,this._selectionDirection)}return i}}var zGe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},UGe=function(o,e){return function(t,i){e(t,i,o)}};let hj=class{constructor(e,t,i,n){this._languageConfigurationService=n,this._selection=e,this._isMovingDown=t,this._autoIndent=i,this._selectionId=null,this._moveEndLineSelectionShrink=!1}getEditOperations(e,t){const i=()=>e.getLanguageId(),n=(f,g)=>e.getLanguageIdAtPosition(f,g),s=e.getLineCount();if(this._isMovingDown&&this._selection.endLineNumber===s){this._selectionId=t.trackSelection(this._selection);return}if(!this._isMovingDown&&this._selection.startLineNumber===1){this._selectionId=t.trackSelection(this._selection);return}this._moveEndPositionDown=!1;let r=this._selection;r.startLineNumber<r.endLineNumber&&r.endColumn===1&&(this._moveEndPositionDown=!0,r=r.setEndPosition(r.endLineNumber-1,e.getLineMaxColumn(r.endLineNumber-1)));const{tabSize:a,indentSize:l,insertSpaces:c}=e.getOptions(),u=this.buildIndentConverter(a,l,c);if(r.startLineNumber===r.endLineNumber&&e.getLineMaxColumn(r.startLineNumber)===1){const f=r.startLineNumber,g=this._isMovingDown?f+1:f-1;e.getLineMaxColumn(g)===1?t.addEditOperation(new M(1,1,1,1),null):(t.addEditOperation(new M(f,1,f,1),e.getLineContent(g)),t.addEditOperation(new M(g,1,g,e.getLineMaxColumn(g)),null)),r=new Ke(g,1,g,1)}else{let f,g;if(this._isMovingDown){f=r.endLineNumber+1,g=e.getLineContent(f),t.addEditOperation(new M(f-1,e.getLineMaxColumn(f-1),f,e.getLineMaxColumn(f)),null);let p=g;if(this.shouldAutoIndent(e,r)){const _=this.matchEnterRule(e,u,a,f,r.startLineNumber-1);if(_!==null){const y=Ui(e.getLineContent(f)),S=_+ja(y,a);p=Pk(S,a,c)+this.trimStart(g)}else{const y={tokenization:{getLineTokens:L=>L===r.startLineNumber?e.tokenization.getLineTokens(f):e.tokenization.getLineTokens(L),getLanguageId:i,getLanguageIdAtPosition:n},getLineContent:L=>L===r.startLineNumber?e.getLineContent(f):e.getLineContent(L)},S=wk(this._autoIndent,y,e.getLanguageIdAtPosition(f,1),r.startLineNumber,u,this._languageConfigurationService);if(S!==null){const L=Ui(e.getLineContent(f)),x=ja(S,a),k=ja(L,a);x!==k&&(p=Pk(x,a,c)+this.trimStart(g))}}t.addEditOperation(new M(r.startLineNumber,1,r.startLineNumber,1),p+`
`);const b=this.matchEnterRuleMovingDown(e,u,a,r.startLineNumber,f,p);if(b!==null)b!==0&&this.getIndentEditsOfMovingBlock(e,t,r,a,c,b);else{const y={tokenization:{getLineTokens:L=>L===r.startLineNumber?e.tokenization.getLineTokens(f):L>=r.startLineNumber+1&&L<=r.endLineNumber+1?e.tokenization.getLineTokens(L-1):e.tokenization.getLineTokens(L),getLanguageId:i,getLanguageIdAtPosition:n},getLineContent:L=>L===r.startLineNumber?p:L>=r.startLineNumber+1&&L<=r.endLineNumber+1?e.getLineContent(L-1):e.getLineContent(L)},S=wk(this._autoIndent,y,e.getLanguageIdAtPosition(f,1),r.startLineNumber+1,u,this._languageConfigurationService);if(S!==null){const L=Ui(e.getLineContent(r.startLineNumber)),x=ja(S,a),k=ja(L,a);if(x!==k){const E=x-k;this.getIndentEditsOfMovingBlock(e,t,r,a,c,E)}}}}else t.addEditOperation(new M(r.startLineNumber,1,r.startLineNumber,1),p+`
`)}else if(f=r.startLineNumber-1,g=e.getLineContent(f),t.addEditOperation(new M(f,1,f+1,1),null),t.addEditOperation(new M(r.endLineNumber,e.getLineMaxColumn(r.endLineNumber),r.endLineNumber,e.getLineMaxColumn(r.endLineNumber)),`
`+g),this.shouldAutoIndent(e,r)){const p={tokenization:{getLineTokens:b=>b===f?e.tokenization.getLineTokens(r.startLineNumber):e.tokenization.getLineTokens(b),getLanguageId:i,getLanguageIdAtPosition:n},getLineContent:b=>b===f?e.getLineContent(r.startLineNumber):e.getLineContent(b)},_=this.matchEnterRule(e,u,a,r.startLineNumber,r.startLineNumber-2);if(_!==null)_!==0&&this.getIndentEditsOfMovingBlock(e,t,r,a,c,_);else{const b=wk(this._autoIndent,p,e.getLanguageIdAtPosition(r.startLineNumber,1),f,u,this._languageConfigurationService);if(b!==null){const y=Ui(e.getLineContent(r.startLineNumber)),S=ja(b,a),L=ja(y,a);if(S!==L){const x=S-L;this.getIndentEditsOfMovingBlock(e,t,r,a,c,x)}}}}}this._selectionId=t.trackSelection(r)}buildIndentConverter(e,t,i){return{shiftIndent:n=>Ec.shiftIndent(n,n.length+1,e,t,i),unshiftIndent:n=>Ec.unshiftIndent(n,n.length+1,e,t,i)}}parseEnterResult(e,t,i,n,s){if(s){let r=s.indentation;s.indentAction===Es.None||s.indentAction===Es.Indent?r=s.indentation+s.appendText:s.indentAction===Es.IndentOutdent?r=s.indentation:s.indentAction===Es.Outdent&&(r=t.unshiftIndent(s.indentation)+s.appendText);const a=e.getLineContent(n);if(this.trimStart(a).indexOf(this.trimStart(r))>=0){const l=Ui(e.getLineContent(n));let c=Ui(r);const u=pfe(e,n,this._languageConfigurationService);u!==null&&u&2&&(c=t.unshiftIndent(c));const f=ja(c,i),g=ja(l,i);return f-g}}return null}matchEnterRuleMovingDown(e,t,i,n,s,r){if(au(r)>=0){const a=e.getLineMaxColumn(s),l=R1(this._autoIndent,e,new M(s,a,s,a),this._languageConfigurationService);return this.parseEnterResult(e,t,i,n,l)}else{let a=n-1;for(;a>=1;){const u=e.getLineContent(a);if(au(u)>=0)break;a--}if(a<1||n>e.getLineCount())return null;const l=e.getLineMaxColumn(a),c=R1(this._autoIndent,e,new M(a,l,a,l),this._languageConfigurationService);return this.parseEnterResult(e,t,i,n,c)}}matchEnterRule(e,t,i,n,s,r){let a=s;for(;a>=1;){let u;if(a===s&&r!==void 0?u=r:u=e.getLineContent(a),au(u)>=0)break;a--}if(a<1||n>e.getLineCount())return null;const l=e.getLineMaxColumn(a),c=R1(this._autoIndent,e,new M(a,l,a,l),this._languageConfigurationService);return this.parseEnterResult(e,t,i,n,c)}trimStart(e){return e.replace(/^\s+/,"")}shouldAutoIndent(e,t){if(this._autoIndent<4||!e.tokenization.isCheapToTokenize(t.startLineNumber))return!1;const i=e.getLanguageIdAtPosition(t.startLineNumber,1),n=e.getLanguageIdAtPosition(t.endLineNumber,1);return!(i!==n||this._languageConfigurationService.getLanguageConfiguration(i).indentRulesSupport===null)}getIndentEditsOfMovingBlock(e,t,i,n,s,r){for(let a=i.startLineNumber;a<=i.endLineNumber;a++){const l=e.getLineContent(a),c=Ui(l),f=ja(c,n)+r,g=Pk(f,n,s);g!==c&&(t.addEditOperation(new M(a,1,a,c.length+1),g),a===i.endLineNumber&&i.endColumn<=c.length+1&&g===""&&(this._moveEndLineSelectionShrink=!0))}}computeCursorState(e,t){let i=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(i=i.setEndPosition(i.endLineNumber+1,1)),this._moveEndLineSelectionShrink&&i.startLineNumber<i.endLineNumber&&(i=i.setEndPosition(i.endLineNumber,2)),i}};hj=zGe([UGe(3,On)],hj);const d1=class d1{static getCollator(){return d1._COLLATOR||(d1._COLLATOR=new Intl.Collator),d1._COLLATOR}constructor(e,t){this.selection=e,this.descending=t,this.selectionId=null}getEditOperations(e,t){const i=$Ge(e,this.selection,this.descending);i&&t.addEditOperation(i.range,i.text),this.selectionId=t.trackSelection(this.selection)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}static canRun(e,t,i){if(e===null)return!1;const n=sme(e,t,i);if(!n)return!1;for(let s=0,r=n.before.length;s<r;s++)if(n.before[s]!==n.after[s])return!0;return!1}};d1._COLLATOR=null;let DE=d1;function sme(o,e,t){const i=e.startLineNumber;let n=e.endLineNumber;if(e.endColumn===1&&n--,i>=n)return null;const s=[];for(let a=i;a<=n;a++)s.push(o.getLineContent(a));let r=s.slice(0);return r.sort(DE.getCollator().compare),t===!0&&(r=r.reverse()),{startLineNumber:i,endLineNumber:n,before:s,after:r}}function $Ge(o,e,t){const i=sme(o,e,t);return i?Rn.replace(new M(i.startLineNumber,1,i.endLineNumber,o.getLineMaxColumn(i.endLineNumber)),i.after.join(`
`)):null}class ome extends Ve{constructor(e,t){super(t),this.down=e}run(e,t){if(!t.hasModel())return;const i=t.getSelections().map((r,a)=>({selection:r,index:a,ignore:!1}));i.sort((r,a)=>M.compareRangesUsingStarts(r.selection,a.selection));let n=i[0];for(let r=1;r<i.length;r++){const a=i[r];n.selection.endLineNumber===a.selection.startLineNumber&&(n.index<a.index?a.ignore=!0:(n.ignore=!0,n=a))}const s=[];for(const r of i)s.push(new nme(r.selection,this.down,r.ignore));t.pushUndoStop(),t.executeCommands(this.id,s),t.pushUndoStop()}}class jGe extends ome{constructor(){super(!1,{id:"editor.action.copyLinesUpAction",label:v("lines.copyUp","Copy Line Up"),alias:"Copy Line Up",precondition:B.writable,kbOpts:{kbExpr:B.editorTextFocus,primary:1552,linux:{primary:3600},weight:100},menuOpts:{menuId:qe.MenubarSelectionMenu,group:"2_line",title:v({key:"miCopyLinesUp",comment:["&& denotes a mnemonic"]},"&&Copy Line Up"),order:1}})}}class qGe extends ome{constructor(){super(!0,{id:"editor.action.copyLinesDownAction",label:v("lines.copyDown","Copy Line Down"),alias:"Copy Line Down",precondition:B.writable,kbOpts:{kbExpr:B.editorTextFocus,primary:1554,linux:{primary:3602},weight:100},menuOpts:{menuId:qe.MenubarSelectionMenu,group:"2_line",title:v({key:"miCopyLinesDown",comment:["&& denotes a mnemonic"]},"Co&&py Line Down"),order:2}})}}class KGe extends Ve{constructor(){super({id:"editor.action.duplicateSelection",label:v("duplicateSelection","Duplicate Selection"),alias:"Duplicate Selection",precondition:B.writable,menuOpts:{menuId:qe.MenubarSelectionMenu,group:"2_line",title:v({key:"miDuplicateSelection",comment:["&& denotes a mnemonic"]},"&&Duplicate Selection"),order:5}})}run(e,t,i){if(!t.hasModel())return;const n=[],s=t.getSelections(),r=t.getModel();for(const a of s)if(a.isEmpty())n.push(new nme(a,!0));else{const l=new Ke(a.endLineNumber,a.endColumn,a.endLineNumber,a.endColumn);n.push(new NWe(l,r.getValueInRange(a)))}t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()}}class rme extends Ve{constructor(e,t){super(t),this.down=e}run(e,t){const i=e.get(On),n=[],s=t.getSelections()||[],r=t.getOption(12);for(const a of s)n.push(new hj(a,this.down,r,i));t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()}}class GGe extends rme{constructor(){super(!1,{id:"editor.action.moveLinesUpAction",label:v("lines.moveUp","Move Line Up"),alias:"Move Line Up",precondition:B.writable,kbOpts:{kbExpr:B.editorTextFocus,primary:528,linux:{primary:528},weight:100},menuOpts:{menuId:qe.MenubarSelectionMenu,group:"2_line",title:v({key:"miMoveLinesUp",comment:["&& denotes a mnemonic"]},"Mo&&ve Line Up"),order:3}})}}class YGe extends rme{constructor(){super(!0,{id:"editor.action.moveLinesDownAction",label:v("lines.moveDown","Move Line Down"),alias:"Move Line Down",precondition:B.writable,kbOpts:{kbExpr:B.editorTextFocus,primary:530,linux:{primary:530},weight:100},menuOpts:{menuId:qe.MenubarSelectionMenu,group:"2_line",title:v({key:"miMoveLinesDown",comment:["&& denotes a mnemonic"]},"Move &&Line Down"),order:4}})}}class ame extends Ve{constructor(e,t){super(t),this.descending=e}run(e,t){if(!t.hasModel())return;const i=t.getModel();let n=t.getSelections();n.length===1&&n[0].isEmpty()&&(n=[new Ke(1,1,i.getLineCount(),i.getLineMaxColumn(i.getLineCount()))]);for(const r of n)if(!DE.canRun(t.getModel(),r,this.descending))return;const s=[];for(let r=0,a=n.length;r<a;r++)s[r]=new DE(n[r],this.descending);t.pushUndoStop(),t.executeCommands(this.id,s),t.pushUndoStop()}}class ZGe extends ame{constructor(){super(!1,{id:"editor.action.sortLinesAscending",label:v("lines.sortAscending","Sort Lines Ascending"),alias:"Sort Lines Ascending",precondition:B.writable})}}class XGe extends ame{constructor(){super(!0,{id:"editor.action.sortLinesDescending",label:v("lines.sortDescending","Sort Lines Descending"),alias:"Sort Lines Descending",precondition:B.writable})}}class QGe extends Ve{constructor(){super({id:"editor.action.removeDuplicateLines",label:v("lines.deleteDuplicates","Delete Duplicate Lines"),alias:"Delete Duplicate Lines",precondition:B.writable})}run(e,t){if(!t.hasModel())return;const i=t.getModel();if(i.getLineCount()===1&&i.getLineMaxColumn(1)===1)return;const n=[],s=[];let r=0,a=!0,l=t.getSelections();l.length===1&&l[0].isEmpty()&&(l=[new Ke(1,1,i.getLineCount(),i.getLineMaxColumn(i.getLineCount()))],a=!1);for(const c of l){const u=new Set,f=[];for(let b=c.startLineNumber;b<=c.endLineNumber;b++){const y=i.getLineContent(b);u.has(y)||(f.push(y),u.add(y))}const g=new Ke(c.startLineNumber,1,c.endLineNumber,i.getLineMaxColumn(c.endLineNumber)),p=c.startLineNumber-r,_=new Ke(p,1,p+f.length-1,f[f.length-1].length);n.push(Rn.replace(g,f.join(`
`))),s.push(_),r+=c.endLineNumber-c.startLineNumber+1-f.length}t.pushUndoStop(),t.executeEdits(this.id,n,a?s:void 0),t.pushUndoStop()}}const bF=class bF extends Ve{constructor(){super({id:bF.ID,label:v("lines.trimTrailingWhitespace","Trim Trailing Whitespace"),alias:"Trim Trailing Whitespace",precondition:B.writable,kbOpts:{kbExpr:B.editorTextFocus,primary:Is(2089,2102),weight:100}})}run(e,t,i){let n=[];i.reason==="auto-save"&&(n=(t.getSelections()||[]).map(u=>new G(u.positionLineNumber,u.positionColumn)));const s=t.getSelection();if(s===null)return;const r=e.get(Ht),a=t.getModel(),l=r.getValue("files.trimTrailingWhitespaceInRegexAndStrings",{overrideIdentifier:a==null?void 0:a.getLanguageId(),resource:a==null?void 0:a.uri}),c=new HGe(s,n,l);t.pushUndoStop(),t.executeCommands(this.id,[c]),t.pushUndoStop()}};bF.ID="editor.action.trimTrailingWhitespace";let fj=bF;class JGe extends Ve{constructor(){super({id:"editor.action.deleteLines",label:v("lines.delete","Delete Line"),alias:"Delete Line",precondition:B.writable,kbOpts:{kbExpr:B.textInputFocus,primary:3113,weight:100}})}run(e,t){if(!t.hasModel())return;const i=this._getLinesToRemove(t),n=t.getModel();if(n.getLineCount()===1&&n.getLineMaxColumn(1)===1)return;let s=0;const r=[],a=[];for(let l=0,c=i.length;l<c;l++){const u=i[l];let f=u.startLineNumber,g=u.endLineNumber,p=1,_=n.getLineMaxColumn(g);g<n.getLineCount()?(g+=1,_=1):f>1&&(f-=1,p=n.getLineMaxColumn(f)),r.push(Rn.replace(new Ke(f,p,g,_),"")),a.push(new Ke(f-s,u.positionColumn,f-s,u.positionColumn)),s+=u.endLineNumber-u.startLineNumber+1}t.pushUndoStop(),t.executeEdits(this.id,r,a),t.pushUndoStop()}_getLinesToRemove(e){const t=e.getSelections().map(s=>{let r=s.endLineNumber;return s.startLineNumber<s.endLineNumber&&s.endColumn===1&&(r-=1),{startLineNumber:s.startLineNumber,selectionStartColumn:s.selectionStartColumn,endLineNumber:r,positionColumn:s.positionColumn}});t.sort((s,r)=>s.startLineNumber===r.startLineNumber?s.endLineNumber-r.endLineNumber:s.startLineNumber-r.startLineNumber);const i=[];let n=t[0];for(let s=1;s<t.length;s++)n.endLineNumber+1>=t[s].startLineNumber?n.endLineNumber=t[s].endLineNumber:(i.push(n),n=t[s]);return i.push(n),i}}class eYe extends Ve{constructor(){super({id:"editor.action.indentLines",label:v("lines.indent","Indent Line"),alias:"Indent Line",precondition:B.writable,kbOpts:{kbExpr:B.editorTextFocus,primary:2142,weight:100}})}run(e,t){const i=t._getViewModel();i&&(t.pushUndoStop(),t.executeCommands(this.id,zp.indent(i.cursorConfig,t.getModel(),t.getSelections())),t.pushUndoStop())}}class tYe extends Ve{constructor(){super({id:"editor.action.outdentLines",label:v("lines.outdent","Outdent Line"),alias:"Outdent Line",precondition:B.writable,kbOpts:{kbExpr:B.editorTextFocus,primary:2140,weight:100}})}run(e,t){M1.Outdent.runEditorCommand(e,t,null)}}class iYe extends Ve{constructor(){super({id:"editor.action.insertLineBefore",label:v("lines.insertBefore","Insert Line Above"),alias:"Insert Line Above",precondition:B.writable,kbOpts:{kbExpr:B.editorTextFocus,primary:3075,weight:100}})}run(e,t){const i=t._getViewModel();i&&(t.pushUndoStop(),t.executeCommands(this.id,K4.lineInsertBefore(i.cursorConfig,t.getModel(),t.getSelections())))}}class nYe extends Ve{constructor(){super({id:"editor.action.insertLineAfter",label:v("lines.insertAfter","Insert Line Below"),alias:"Insert Line Below",precondition:B.writable,kbOpts:{kbExpr:B.editorTextFocus,primary:2051,weight:100}})}run(e,t){const i=t._getViewModel();i&&(t.pushUndoStop(),t.executeCommands(this.id,K4.lineInsertAfter(i.cursorConfig,t.getModel(),t.getSelections())))}}class lme extends Ve{run(e,t){if(!t.hasModel())return;const i=t.getSelection(),n=this._getRangesToDelete(t),s=[];for(let l=0,c=n.length-1;l<c;l++){const u=n[l],f=n[l+1];M.intersectRanges(u,f)===null?s.push(u):n[l+1]=M.plusRange(u,f)}s.push(n[n.length-1]);const r=this._getEndCursorState(i,s),a=s.map(l=>Rn.replace(l,""));t.pushUndoStop(),t.executeEdits(this.id,a,r),t.pushUndoStop()}}class sYe extends lme{constructor(){super({id:"deleteAllLeft",label:v("lines.deleteAllLeft","Delete All Left"),alias:"Delete All Left",precondition:B.writable,kbOpts:{kbExpr:B.textInputFocus,primary:0,mac:{primary:2049},weight:100}})}_getEndCursorState(e,t){let i=null;const n=[];let s=0;return t.forEach(r=>{let a;if(r.endColumn===1&&s>0){const l=r.startLineNumber-s;a=new Ke(l,r.startColumn,l,r.startColumn)}else a=new Ke(r.startLineNumber,r.startColumn,r.startLineNumber,r.startColumn);s+=r.endLineNumber-r.startLineNumber,r.intersectRanges(e)?i=a:n.push(a)}),i&&n.unshift(i),n}_getRangesToDelete(e){const t=e.getSelections();if(t===null)return[];let i=t;const n=e.getModel();return n===null?[]:(i.sort(M.compareRangesUsingStarts),i=i.map(s=>{if(s.isEmpty())if(s.startColumn===1){const r=Math.max(1,s.startLineNumber-1),a=s.startLineNumber===1?1:n.getLineLength(r)+1;return new M(r,a,s.startLineNumber,1)}else return new M(s.startLineNumber,1,s.startLineNumber,s.startColumn);else return new M(s.startLineNumber,1,s.endLineNumber,s.endColumn)}),i)}}class oYe extends lme{constructor(){super({id:"deleteAllRight",label:v("lines.deleteAllRight","Delete All Right"),alias:"Delete All Right",precondition:B.writable,kbOpts:{kbExpr:B.textInputFocus,primary:0,mac:{primary:297,secondary:[2068]},weight:100}})}_getEndCursorState(e,t){let i=null;const n=[];for(let s=0,r=t.length,a=0;s<r;s++){const l=t[s],c=new Ke(l.startLineNumber-a,l.startColumn,l.startLineNumber-a,l.startColumn);l.intersectRanges(e)?i=c:n.push(c)}return i&&n.unshift(i),n}_getRangesToDelete(e){const t=e.getModel();if(t===null)return[];const i=e.getSelections();if(i===null)return[];const n=i.map(s=>{if(s.isEmpty()){const r=t.getLineMaxColumn(s.startLineNumber);return s.startColumn===r?new M(s.startLineNumber,s.startColumn,s.startLineNumber+1,1):new M(s.startLineNumber,s.startColumn,s.startLineNumber,r)}return s});return n.sort(M.compareRangesUsingStarts),n}}class rYe extends Ve{constructor(){super({id:"editor.action.joinLines",label:v("lines.joinLines","Join Lines"),alias:"Join Lines",precondition:B.writable,kbOpts:{kbExpr:B.editorTextFocus,primary:0,mac:{primary:296},weight:100}})}run(e,t){const i=t.getSelections();if(i===null)return;let n=t.getSelection();if(n===null)return;i.sort(M.compareRangesUsingStarts);const s=[],r=i.reduce((g,p)=>g.isEmpty()?g.endLineNumber===p.startLineNumber?(n.equalsSelection(g)&&(n=p),p):p.startLineNumber>g.endLineNumber+1?(s.push(g),p):new Ke(g.startLineNumber,g.startColumn,p.endLineNumber,p.endColumn):p.startLineNumber>g.endLineNumber?(s.push(g),p):new Ke(g.startLineNumber,g.startColumn,p.endLineNumber,p.endColumn));s.push(r);const a=t.getModel();if(a===null)return;const l=[],c=[];let u=n,f=0;for(let g=0,p=s.length;g<p;g++){const _=s[g],b=_.startLineNumber,y=1;let S=0,L,x;const k=a.getLineLength(_.endLineNumber)-_.endColumn;if(_.isEmpty()||_.startLineNumber===_.endLineNumber){const A=_.getStartPosition();A.lineNumber<a.getLineCount()?(L=b+1,x=a.getLineMaxColumn(L)):(L=A.lineNumber,x=a.getLineMaxColumn(A.lineNumber))}else L=_.endLineNumber,x=a.getLineMaxColumn(L);let E=a.getLineContent(b);for(let A=b+1;A<=L;A++){const P=a.getLineContent(A),H=a.getLineFirstNonWhitespaceColumn(A);if(H>=1){let ee=!0;E===""&&(ee=!1),ee&&(E.charAt(E.length-1)===" "||E.charAt(E.length-1)==="	")&&(ee=!1,E=E.replace(/[\s\uFEFF\xA0]+$/g," "));const Q=P.substr(H-1);E+=(ee?" ":"")+Q,ee?S=Q.length+1:S=Q.length}else S=0}const N=new M(b,y,L,x);if(!N.isEmpty()){let A;_.isEmpty()?(l.push(Rn.replace(N,E)),A=new Ke(N.startLineNumber-f,E.length-S+1,b-f,E.length-S+1)):_.startLineNumber===_.endLineNumber?(l.push(Rn.replace(N,E)),A=new Ke(_.startLineNumber-f,_.startColumn,_.endLineNumber-f,_.endColumn)):(l.push(Rn.replace(N,E)),A=new Ke(_.startLineNumber-f,_.startColumn,_.startLineNumber-f,E.length-k)),M.intersectRanges(N,n)!==null?u=A:c.push(A)}f+=N.endLineNumber-N.startLineNumber}c.unshift(u),t.pushUndoStop(),t.executeEdits(this.id,l,c),t.pushUndoStop()}}class aYe extends Ve{constructor(){super({id:"editor.action.transpose",label:v("editor.transpose","Transpose Characters around the Cursor"),alias:"Transpose Characters around the Cursor",precondition:B.writable})}run(e,t){const i=t.getSelections();if(i===null)return;const n=t.getModel();if(n===null)return;const s=[];for(let r=0,a=i.length;r<a;r++){const l=i[r];if(!l.isEmpty())continue;const c=l.getStartPosition(),u=n.getLineMaxColumn(c.lineNumber);if(c.column>=u){if(c.lineNumber===n.getLineCount())continue;const f=new M(c.lineNumber,Math.max(1,c.column-1),c.lineNumber+1,1),g=n.getValueInRange(f).split("").reverse().join("");s.push(new Ro(new Ke(c.lineNumber,Math.max(1,c.column-1),c.lineNumber+1,1),g))}else{const f=new M(c.lineNumber,Math.max(1,c.column-1),c.lineNumber,c.column+1),g=n.getValueInRange(f).split("").reverse().join("");s.push(new EG(f,g,new Ke(c.lineNumber,c.column+1,c.lineNumber,c.column+1)))}}t.pushUndoStop(),t.executeCommands(this.id,s),t.pushUndoStop()}}class GC extends Ve{run(e,t){const i=t.getSelections();if(i===null)return;const n=t.getModel();if(n===null)return;const s=t.getOption(132),r=[];for(const a of i)if(a.isEmpty()){const l=a.getStartPosition(),c=t.getConfiguredWordAtPosition(l);if(!c)continue;const u=new M(l.lineNumber,c.startColumn,l.lineNumber,c.endColumn),f=n.getValueInRange(u);r.push(Rn.replace(u,this._modifyText(f,s)))}else{const l=n.getValueInRange(a);r.push(Rn.replace(a,this._modifyText(l,s)))}t.pushUndoStop(),t.executeEdits(this.id,r),t.pushUndoStop()}}class lYe extends GC{constructor(){super({id:"editor.action.transformToUppercase",label:v("editor.transformToUppercase","Transform to Uppercase"),alias:"Transform to Uppercase",precondition:B.writable})}_modifyText(e,t){return e.toLocaleUpperCase()}}class cYe extends GC{constructor(){super({id:"editor.action.transformToLowercase",label:v("editor.transformToLowercase","Transform to Lowercase"),alias:"Transform to Lowercase",precondition:B.writable})}_modifyText(e,t){return e.toLocaleLowerCase()}}class vg{constructor(e,t){this._pattern=e,this._flags=t,this._actual=null,this._evaluated=!1}get(){if(!this._evaluated){this._evaluated=!0;try{this._actual=new RegExp(this._pattern,this._flags)}catch{}}return this._actual}isSupported(){return this.get()!==null}}const CF=class CF extends GC{constructor(){super({id:"editor.action.transformToTitlecase",label:v("editor.transformToTitlecase","Transform to Title Case"),alias:"Transform to Title Case",precondition:B.writable})}_modifyText(e,t){const i=CF.titleBoundary.get();return i?e.toLocaleLowerCase().replace(i,n=>n.toLocaleUpperCase()):e}};CF.titleBoundary=new vg("(^|[^\\p{L}\\p{N}']|((^|\\P{L})'))\\p{L}","gmu");let WO=CF;const u1=class u1 extends GC{constructor(){super({id:"editor.action.transformToSnakecase",label:v("editor.transformToSnakecase","Transform to Snake Case"),alias:"Transform to Snake Case",precondition:B.writable})}_modifyText(e,t){const i=u1.caseBoundary.get(),n=u1.singleLetters.get();return!i||!n?e:e.replace(i,"$1_$2").replace(n,"$1_$2$3").toLocaleLowerCase()}};u1.caseBoundary=new vg("(\\p{Ll})(\\p{Lu})","gmu"),u1.singleLetters=new vg("(\\p{Lu}|\\p{N})(\\p{Lu})(\\p{Ll})","gmu");let Ok=u1;const yF=class yF extends GC{constructor(){super({id:"editor.action.transformToCamelcase",label:v("editor.transformToCamelcase","Transform to Camel Case"),alias:"Transform to Camel Case",precondition:B.writable})}_modifyText(e,t){const i=yF.wordBoundary.get();if(!i)return e;const n=e.split(i);return n.shift()+n.map(r=>r.substring(0,1).toLocaleUpperCase()+r.substring(1)).join("")}};yF.wordBoundary=new vg("[_\\s-]","gm");let HO=yF;const h1=class h1 extends GC{constructor(){super({id:"editor.action.transformToPascalcase",label:v("editor.transformToPascalcase","Transform to Pascal Case"),alias:"Transform to Pascal Case",precondition:B.writable})}_modifyText(e,t){const i=h1.wordBoundary.get(),n=h1.wordBoundaryToMaintain.get();return!i||!n?e:e.split(n).map(a=>a.split(i)).flat().map(a=>a.substring(0,1).toLocaleUpperCase()+a.substring(1)).join("")}};h1.wordBoundary=new vg("[_\\s-]","gm"),h1.wordBoundaryToMaintain=new vg("(?<=\\.)","gm");let VO=h1;const Op=class Op extends GC{static isSupported(){return[this.caseBoundary,this.singleLetters,this.underscoreBoundary].every(t=>t.isSupported())}constructor(){super({id:"editor.action.transformToKebabcase",label:v("editor.transformToKebabcase","Transform to Kebab Case"),alias:"Transform to Kebab Case",precondition:B.writable})}_modifyText(e,t){const i=Op.caseBoundary.get(),n=Op.singleLetters.get(),s=Op.underscoreBoundary.get();return!i||!n||!s?e:e.replace(s,"$1-$3").replace(i,"$1-$2").replace(n,"$1-$2").toLocaleLowerCase()}};Op.caseBoundary=new vg("(\\p{Ll})(\\p{Lu})","gmu"),Op.singleLetters=new vg("(\\p{Lu}|\\p{N})(\\p{Lu}\\p{Ll})","gmu"),Op.underscoreBoundary=new vg("(\\S)(_)(\\S)","gm");let zO=Op;be(jGe);be(qGe);be(KGe);be(GGe);be(YGe);be(ZGe);be(XGe);be(QGe);be(fj);be(JGe);be(eYe);be(tYe);be(iYe);be(nYe);be(sYe);be(oYe);be(rYe);be(aYe);be(lYe);be(cYe);Ok.caseBoundary.isSupported()&&Ok.singleLetters.isSupported()&&be(Ok);HO.wordBoundary.isSupported()&&be(HO);VO.wordBoundary.isSupported()&&be(VO);WO.titleBoundary.isSupported()&&be(WO);zO.isSupported()&&be(zO);var dYe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},iM=function(o,e){return function(t,i){e(t,i,o)}},jM;const cme=new Pe("LinkedEditingInputVisible",!1),uYe="linked-editing-decoration";var Em;let PS=(Em=class extends X{static get(e){return e.getContribution(jM.ID)}constructor(e,t,i,n,s){super(),this.languageConfigurationService=n,this._syncRangesToken=0,this._localToDispose=this._register(new le),this._editor=e,this._providers=i.linkedEditingRangeProvider,this._enabled=!1,this._visibleContextKey=cme.bindTo(t),this._debounceInformation=s.for(this._providers,"Linked Editing",{max:200}),this._currentDecorations=this._editor.createDecorationsCollection(),this._languageWordPattern=null,this._currentWordPattern=null,this._ignoreChangeEvent=!1,this._localToDispose=this._register(new le),this._rangeUpdateTriggerPromise=null,this._rangeSyncTriggerPromise=null,this._currentRequestCts=null,this._currentRequestPosition=null,this._currentRequestModelVersion=null,this._register(this._editor.onDidChangeModel(()=>this.reinitialize(!0))),this._register(this._editor.onDidChangeConfiguration(r=>{(r.hasChanged(70)||r.hasChanged(94))&&this.reinitialize(!1)})),this._register(this._providers.onDidChange(()=>this.reinitialize(!1))),this._register(this._editor.onDidChangeModelLanguage(()=>this.reinitialize(!0))),this.reinitialize(!0)}reinitialize(e){const t=this._editor.getModel(),i=t!==null&&(this._editor.getOption(70)||this._editor.getOption(94))&&this._providers.has(t);if(i===this._enabled&&!e||(this._enabled=i,this.clearRanges(),this._localToDispose.clear(),!i||t===null))return;this._localToDispose.add(Ee.runAndSubscribe(t.onDidChangeLanguageConfiguration,()=>{this._languageWordPattern=this.languageConfigurationService.getLanguageConfiguration(t.getLanguageId()).getWordDefinition()}));const n=new xc(this._debounceInformation.get(t)),s=()=>{this._rangeUpdateTriggerPromise=n.trigger(()=>this.updateRanges(),this._debounceDuration??this._debounceInformation.get(t))},r=new xc(0),a=l=>{this._rangeSyncTriggerPromise=r.trigger(()=>this._syncRanges(l))};this._localToDispose.add(this._editor.onDidChangeCursorPosition(()=>{s()})),this._localToDispose.add(this._editor.onDidChangeModelContent(l=>{if(!this._ignoreChangeEvent&&this._currentDecorations.length>0){const c=this._currentDecorations.getRange(0);if(c&&l.changes.every(u=>c.intersectRanges(u.range))){a(this._syncRangesToken);return}}s()})),this._localToDispose.add({dispose:()=>{n.dispose(),r.dispose()}}),this.updateRanges()}_syncRanges(e){if(!this._editor.hasModel()||e!==this._syncRangesToken||this._currentDecorations.length===0)return;const t=this._editor.getModel(),i=this._currentDecorations.getRange(0);if(!i||i.startLineNumber!==i.endLineNumber)return this.clearRanges();const n=t.getValueInRange(i);if(this._currentWordPattern){const r=n.match(this._currentWordPattern);if((r?r[0].length:0)!==n.length)return this.clearRanges()}const s=[];for(let r=1,a=this._currentDecorations.length;r<a;r++){const l=this._currentDecorations.getRange(r);if(l)if(l.startLineNumber!==l.endLineNumber)s.push({range:l,text:n});else{let c=t.getValueInRange(l),u=n,f=l.startColumn,g=l.endColumn;const p=Om(c,u);f+=p,c=c.substr(p),u=u.substr(p);const _=gA(c,u);g-=_,c=c.substr(0,c.length-_),u=u.substr(0,u.length-_),(f!==g||u.length!==0)&&s.push({range:new M(l.startLineNumber,f,l.endLineNumber,g),text:u})}}if(s.length!==0)try{this._editor.popUndoStop(),this._ignoreChangeEvent=!0;const r=this._editor._getViewModel().getPrevEditOperationType();this._editor.executeEdits("linkedEditing",s),this._editor._getViewModel().setPrevEditOperationType(r)}finally{this._ignoreChangeEvent=!1}}dispose(){this.clearRanges(),super.dispose()}clearRanges(){this._visibleContextKey.set(!1),this._currentDecorations.clear(),this._currentRequestCts&&(this._currentRequestCts.cancel(),this._currentRequestCts=null,this._currentRequestPosition=null)}async updateRanges(e=!1){if(!this._editor.hasModel()){this.clearRanges();return}const t=this._editor.getPosition();if(!this._enabled&&!e||this._editor.getSelections().length>1){this.clearRanges();return}const i=this._editor.getModel(),n=i.getVersionId();if(this._currentRequestPosition&&this._currentRequestModelVersion===n){if(t.equals(this._currentRequestPosition))return;if(this._currentDecorations.length>0){const r=this._currentDecorations.getRange(0);if(r&&r.containsPosition(t))return}}this.clearRanges(),this._currentRequestPosition=t,this._currentRequestModelVersion=n;const s=this._currentRequestCts=new An;try{const r=new uo(!1),a=await dme(this._providers,i,t,s.token);if(this._debounceInformation.update(i,r.elapsed()),s!==this._currentRequestCts||(this._currentRequestCts=null,n!==i.getVersionId()))return;let l=[];a!=null&&a.ranges&&(l=a.ranges),this._currentWordPattern=(a==null?void 0:a.wordPattern)||this._languageWordPattern;let c=!1;for(let f=0,g=l.length;f<g;f++)if(M.containsPosition(l[f],t)){if(c=!0,f!==0){const p=l[f];l.splice(f,1),l.unshift(p)}break}if(!c){this.clearRanges();return}const u=l.map(f=>({range:f,options:jM.DECORATION}));this._visibleContextKey.set(!0),this._currentDecorations.set(u),this._syncRangesToken++}catch(r){Tc(r)||wt(r),(this._currentRequestCts===s||!this._currentRequestCts)&&this.clearRanges()}}},jM=Em,Em.ID="editor.contrib.linkedEditing",Em.DECORATION=Dt.register({description:"linked-editing",stickiness:0,className:uYe}),Em);PS=jM=dYe([iM(1,ht),iM(2,Ue),iM(3,On),iM(4,Yl)],PS);class hYe extends Ve{constructor(){super({id:"editor.action.linkedEditing",label:v("linkedEditing.label","Start Linked Editing"),alias:"Start Linked Editing",precondition:de.and(B.writable,B.hasRenameProvider),kbOpts:{kbExpr:B.editorTextFocus,primary:3132,weight:100}})}runCommand(e,t){const i=e.get(hi),[n,s]=Array.isArray(t)&&t||[void 0,void 0];return st.isUri(n)&&G.isIPosition(s)?i.openCodeEditor({resource:n},i.getActiveCodeEditor()).then(r=>{r&&(r.setPosition(s),r.invokeWithinContext(a=>(this.reportTelemetry(a,r),this.run(a,r))))},wt):super.runCommand(e,t)}run(e,t){const i=PS.get(t);return i?Promise.resolve(i.updateRanges(!0)):Promise.resolve()}}const fYe=Bs.bindToContribution(PS.get);Re(new fYe({id:"cancelLinkedEditingInput",precondition:cme,handler:o=>o.clearRanges(),kbOpts:{kbExpr:B.editorTextFocus,weight:199,primary:9,secondary:[1033]}}));function dme(o,e,t,i){const n=o.ordered(e);return Hq(n.map(s=>async()=>{try{return await s.provideLinkedEditingRanges(e,t,i)}catch(r){rs(r);return}}),s=>!!s&&wr(s==null?void 0:s.ranges))}W("editor.linkedEditingBackground",{dark:ue.fromHex("#f00").transparent(.3),light:ue.fromHex("#f00").transparent(.3),hcDark:ue.fromHex("#f00").transparent(.3),hcLight:ue.white},v("editorLinkedEditingBackground","Background color when the editor auto renames on type."));Ra("_executeLinkedEditingProvider",(o,e,t)=>{const{linkedEditingRangeProvider:i}=o.get(Ue);return dme(i,e,t,Mt.None)});oi(PS.ID,PS,1);be(hYe);let gYe=class{constructor(e,t){this._link=e,this._provider=t}toJSON(){return{range:this.range,url:this.url,tooltip:this.tooltip}}get range(){return this._link.range}get url(){return this._link.url}get tooltip(){return this._link.tooltip}async resolve(e){return this._link.url?this._link.url:typeof this._provider.resolveLink=="function"?Promise.resolve(this._provider.resolveLink(this._link,e)).then(t=>(this._link=t||this._link,this._link.url?this.resolve(e):Promise.reject(new Error("missing")))):Promise.reject(new Error("missing"))}};class UO{constructor(e){this._disposables=new le;let t=[];for(const[i,n]of e){const s=i.links.map(r=>new gYe(r,n));t=UO._union(t,s),VF(i)&&this._disposables.add(i)}this.links=t}dispose(){this._disposables.dispose(),this.links.length=0}static _union(e,t){const i=[];let n,s,r,a;for(n=0,r=0,s=e.length,a=t.length;n<s&&r<a;){const l=e[n],c=t[r];if(M.areIntersectingOrTouching(l.range,c.range)){n++;continue}M.compareRangesUsingStarts(l.range,c.range)<0?(i.push(l),n++):(i.push(c),r++)}for(;n<s;n++)i.push(e[n]);for(;r<a;r++)i.push(t[r]);return i}}function ume(o,e,t){const i=[],n=o.ordered(e).reverse().map((s,r)=>Promise.resolve(s.provideLinks(e,t)).then(a=>{a&&(i[r]=[a,s])},rs));return Promise.all(n).then(()=>{const s=new UO(rd(i));return t.isCancellationRequested?(s.dispose(),new UO([])):s})}ii.registerCommand("_executeLinkProvider",async(o,...e)=>{let[t,i]=e;ui(t instanceof st),typeof i!="number"&&(i=0);const{linkProvider:n}=o.get(Ue),s=o.get(un).getModel(t);if(!s)return[];const r=await ume(n,s,Mt.None);if(!r)return[];for(let l=0;l<Math.min(i,r.links.length);l++)await r.links[l].resolve(Mt.None);const a=r.links.slice(0);return r.dispose(),a});var pYe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},nM=function(o,e){return function(t,i){e(t,i,o)}},gj,zb;let EE=(zb=class extends X{static get(e){return e.getContribution(gj.ID)}constructor(e,t,i,n,s){super(),this.editor=e,this.openerService=t,this.notificationService=i,this.languageFeaturesService=n,this.providers=this.languageFeaturesService.linkProvider,this.debounceInformation=s.for(this.providers,"Links",{min:1e3,max:4e3}),this.computeLinks=this._register(new Oi(()=>this.computeLinksNow(),1e3)),this.computePromise=null,this.activeLinksList=null,this.currentOccurrences={},this.activeLinkDecorationId=null;const r=this._register(new l5(e));this._register(r.onMouseMoveOrRelevantKeyDown(([a,l])=>{this._onEditorMouseMove(a,l)})),this._register(r.onExecute(a=>{this.onEditorMouseUp(a)})),this._register(r.onCancel(a=>{this.cleanUpActiveLinkDecoration()})),this._register(e.onDidChangeConfiguration(a=>{a.hasChanged(71)&&(this.updateDecorations([]),this.stop(),this.computeLinks.schedule(0))})),this._register(e.onDidChangeModelContent(a=>{this.editor.hasModel()&&this.computeLinks.schedule(this.debounceInformation.get(this.editor.getModel()))})),this._register(e.onDidChangeModel(a=>{this.currentOccurrences={},this.activeLinkDecorationId=null,this.stop(),this.computeLinks.schedule(0)})),this._register(e.onDidChangeModelLanguage(a=>{this.stop(),this.computeLinks.schedule(0)})),this._register(this.providers.onDidChange(a=>{this.stop(),this.computeLinks.schedule(0)})),this.computeLinks.schedule(0)}async computeLinksNow(){if(!this.editor.hasModel()||!this.editor.getOption(71))return;const e=this.editor.getModel();if(!e.isTooLargeForSyncing()&&this.providers.has(e)){this.activeLinksList&&(this.activeLinksList.dispose(),this.activeLinksList=null),this.computePromise=Gs(t=>ume(this.providers,e,t));try{const t=new uo(!1);if(this.activeLinksList=await this.computePromise,this.debounceInformation.update(e,t.elapsed()),e.isDisposed())return;this.updateDecorations(this.activeLinksList.links)}catch(t){wt(t)}finally{this.computePromise=null}}}updateDecorations(e){const t=this.editor.getOption(78)==="altKey",i=[],n=Object.keys(this.currentOccurrences);for(const r of n){const a=this.currentOccurrences[r];i.push(a.decorationId)}const s=[];if(e)for(const r of e)s.push(F1.decoration(r,t));this.editor.changeDecorations(r=>{const a=r.deltaDecorations(i,s);this.currentOccurrences={},this.activeLinkDecorationId=null;for(let l=0,c=a.length;l<c;l++){const u=new F1(e[l],a[l]);this.currentOccurrences[u.decorationId]=u}})}_onEditorMouseMove(e,t){const i=this.editor.getOption(78)==="altKey";if(this.isEnabled(e,t)){this.cleanUpActiveLinkDecoration();const n=this.getLinkOccurrence(e.target.position);n&&this.editor.changeDecorations(s=>{n.activate(s,i),this.activeLinkDecorationId=n.decorationId})}else this.cleanUpActiveLinkDecoration()}cleanUpActiveLinkDecoration(){const e=this.editor.getOption(78)==="altKey";if(this.activeLinkDecorationId){const t=this.currentOccurrences[this.activeLinkDecorationId];t&&this.editor.changeDecorations(i=>{t.deactivate(i,e)}),this.activeLinkDecorationId=null}}onEditorMouseUp(e){if(!this.isEnabled(e))return;const t=this.getLinkOccurrence(e.target.position);t&&this.openLinkOccurrence(t,e.hasSideBySideModifier,!0)}openLinkOccurrence(e,t,i=!1){if(!this.openerService)return;const{link:n}=e;n.resolve(Mt.None).then(s=>{if(typeof s=="string"&&this.editor.hasModel()){const r=this.editor.getModel().uri;if(r.scheme===Lt.file&&s.startsWith(`${Lt.file}:`)){const a=st.parse(s);if(a.scheme===Lt.file){const l=Qu(a);let c=null;l.startsWith("/./")||l.startsWith("\\.\\")?c=`.${l.substr(1)}`:(l.startsWith("//./")||l.startsWith("\\\\.\\"))&&(c=`.${l.substr(2)}`),c&&(s=_Ae(r,c))}}}return this.openerService.open(s,{openToSide:t,fromUserGesture:i,allowContributedOpeners:!0,allowCommands:!0,fromWorkspace:!0})},s=>{const r=s instanceof Error?s.message:s;r==="invalid"?this.notificationService.warn(v("invalid.url","Failed to open this link because it is not well-formed: {0}",n.url.toString())):r==="missing"?this.notificationService.warn(v("missing.url","Failed to open this link because its target is missing.")):wt(s)})}getLinkOccurrence(e){if(!this.editor.hasModel()||!e)return null;const t=this.editor.getModel().getDecorationsInRange({startLineNumber:e.lineNumber,startColumn:e.column,endLineNumber:e.lineNumber,endColumn:e.column},0,!0);for(const i of t){const n=this.currentOccurrences[i.id];if(n)return n}return null}isEnabled(e,t){return!!(e.target.type===6&&(e.hasTriggerModifier||t&&t.keyCodeIsTriggerKey))}stop(){var e;this.computeLinks.cancel(),this.activeLinksList&&((e=this.activeLinksList)==null||e.dispose(),this.activeLinksList=null),this.computePromise&&(this.computePromise.cancel(),this.computePromise=null)}dispose(){super.dispose(),this.stop()}},gj=zb,zb.ID="editor.linkDetector",zb);EE=gj=pYe([nM(1,Ma),nM(2,fs),nM(3,Ue),nM(4,Yl)],EE);const Tae={general:Dt.register({description:"detected-link",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link"}),active:Dt.register({description:"detected-link-active",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link-active"})};class F1{static decoration(e,t){return{range:e.range,options:F1._getOptions(e,t,!1)}}static _getOptions(e,t,i){const n={...i?Tae.active:Tae.general};return n.hoverMessage=mYe(e,t),n}constructor(e,t){this.link=e,this.decorationId=t}activate(e,t){e.changeDecorationOptions(this.decorationId,F1._getOptions(this.link,t,!0))}deactivate(e,t){e.changeDecorationOptions(this.decorationId,F1._getOptions(this.link,t,!1))}}function mYe(o,e){const t=o.url&&/^command:/i.test(o.url.toString()),i=o.tooltip?o.tooltip:t?v("links.navigate.executeCmd","Execute command"):v("links.navigate.follow","Follow link"),n=e?Kt?v("links.navigate.kb.meta.mac","cmd + click"):v("links.navigate.kb.meta","ctrl + click"):Kt?v("links.navigate.kb.alt.mac","option + click"):v("links.navigate.kb.alt","alt + click");if(o.url){let s="";if(/^command:/i.test(o.url.toString())){const a=o.url.toString().match(/^command:([^?#]+)/);if(a){const l=a[1];s=v("tooltip.explanation","Execute command {0}",l)}}return new Xo("",!0).appendLink(o.url.toString(!0).replace(/ /g,"%20"),i,s).appendMarkdown(` (${n})`)}else return new Xo().appendText(`${i} (${n})`)}class _Ye extends Ve{constructor(){super({id:"editor.action.openLink",label:v("label","Open Link"),alias:"Open Link",precondition:void 0})}run(e,t){const i=EE.get(t);if(!i||!t.hasModel())return;const n=t.getSelections();for(const s of n){const r=i.getLinkOccurrence(s.getEndPosition());r&&i.openLinkOccurrence(r,!1)}}}oi(EE.ID,EE,1);be(_Ye);const fZ=class fZ extends X{constructor(e){super(),this._editor=e,this._register(this._editor.onMouseDown(t=>{const i=this._editor.getOption(118);i>=0&&t.target.type===6&&t.target.position.column>=i&&this._editor.updateOptions({stopRenderingLineAfter:-1})}))}};fZ.ID="editor.contrib.longLinesHelper";let $O=fZ;oi($O.ID,$O,2);const vYe=W("editor.wordHighlightBackground",{dark:"#575757B8",light:"#57575740",hcDark:null,hcLight:null},v("wordHighlight","Background color of a symbol during read-access, like reading a variable. The color must not be opaque so as not to hide underlying decorations."),!0);W("editor.wordHighlightStrongBackground",{dark:"#004972B8",light:"#0e639c40",hcDark:null,hcLight:null},v("wordHighlightStrong","Background color of a symbol during write-access, like writing to a variable. The color must not be opaque so as not to hide underlying decorations."),!0);W("editor.wordHighlightTextBackground",vYe,v("wordHighlightText","Background color of a textual occurrence for a symbol. The color must not be opaque so as not to hide underlying decorations."),!0);const bYe=W("editor.wordHighlightBorder",{light:null,dark:null,hcDark:vn,hcLight:vn},v("wordHighlightBorder","Border color of a symbol during read-access, like reading a variable."));W("editor.wordHighlightStrongBorder",{light:null,dark:null,hcDark:vn,hcLight:vn},v("wordHighlightStrongBorder","Border color of a symbol during write-access, like writing to a variable."));W("editor.wordHighlightTextBorder",bYe,v("wordHighlightTextBorder","Border color of a textual occurrence for a symbol."));const CYe=W("editorOverviewRuler.wordHighlightForeground","#A0A0A0CC",v("overviewRulerWordHighlightForeground","Overview ruler marker color for symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),yYe=W("editorOverviewRuler.wordHighlightStrongForeground","#C0A0C0CC",v("overviewRulerWordHighlightStrongForeground","Overview ruler marker color for write-access symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),wYe=W("editorOverviewRuler.wordHighlightTextForeground",Mde,v("overviewRulerWordHighlightTextForeground","Overview ruler marker color of a textual occurrence for a symbol. The color must not be opaque so as not to hide underlying decorations."),!0),SYe=Dt.register({description:"word-highlight-strong",stickiness:1,className:"wordHighlightStrong",overviewRuler:{color:Gn(yYe),position:Hl.Center},minimap:{color:Gn(p4),position:1}}),LYe=Dt.register({description:"word-highlight-text",stickiness:1,className:"wordHighlightText",overviewRuler:{color:Gn(wYe),position:Hl.Center},minimap:{color:Gn(p4),position:1}}),xYe=Dt.register({description:"selection-highlight-overview",stickiness:1,className:"selectionHighlight",overviewRuler:{color:Gn(Mde),position:Hl.Center},minimap:{color:Gn(p4),position:1}}),kYe=Dt.register({description:"selection-highlight",stickiness:1,className:"selectionHighlight"}),DYe=Dt.register({description:"word-highlight",stickiness:1,className:"wordHighlight",overviewRuler:{color:Gn(CYe),position:Hl.Center},minimap:{color:Gn(p4),position:1}});function EYe(o){return o===J1.Write?SYe:o===J1.Text?LYe:DYe}function IYe(o){return o?kYe:xYe}Nc((o,e)=>{const t=o.getColor(fK);t&&e.addRule(`.monaco-editor .selectionHighlight { background-color: ${t.transparent(.5)}; }`)});var TYe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},NYe=function(o,e){return function(t,i){e(t,i,o)}},pj;function a_(o,e){const t=e.filter(i=>!o.find(n=>n.equals(i)));if(t.length>=1){const i=t.map(s=>`line ${s.viewState.position.lineNumber} column ${s.viewState.position.column}`).join(", "),n=t.length===1?v("cursorAdded","Cursor added: {0}",i):v("cursorsAdded","Cursors added: {0}",i);Oh(n)}}class RYe extends Ve{constructor(){super({id:"editor.action.insertCursorAbove",label:v("mutlicursor.insertAbove","Add Cursor Above"),alias:"Add Cursor Above",precondition:void 0,kbOpts:{kbExpr:B.editorTextFocus,primary:2576,linux:{primary:1552,secondary:[3088]},weight:100},menuOpts:{menuId:qe.MenubarSelectionMenu,group:"3_multi",title:v({key:"miInsertCursorAbove",comment:["&& denotes a mnemonic"]},"&&Add Cursor Above"),order:2}})}run(e,t,i){if(!t.hasModel())return;let n=!0;i&&i.logicalLine===!1&&(n=!1);const s=t._getViewModel();if(s.cursorConfig.readOnly)return;s.model.pushStackElement();const r=s.getCursorStates();s.setCursorStates(i.source,3,po.addCursorUp(s,r,n)),s.revealTopMostCursor(i.source),a_(r,s.getCursorStates())}}class MYe extends Ve{constructor(){super({id:"editor.action.insertCursorBelow",label:v("mutlicursor.insertBelow","Add Cursor Below"),alias:"Add Cursor Below",precondition:void 0,kbOpts:{kbExpr:B.editorTextFocus,primary:2578,linux:{primary:1554,secondary:[3090]},weight:100},menuOpts:{menuId:qe.MenubarSelectionMenu,group:"3_multi",title:v({key:"miInsertCursorBelow",comment:["&& denotes a mnemonic"]},"A&&dd Cursor Below"),order:3}})}run(e,t,i){if(!t.hasModel())return;let n=!0;i&&i.logicalLine===!1&&(n=!1);const s=t._getViewModel();if(s.cursorConfig.readOnly)return;s.model.pushStackElement();const r=s.getCursorStates();s.setCursorStates(i.source,3,po.addCursorDown(s,r,n)),s.revealBottomMostCursor(i.source),a_(r,s.getCursorStates())}}class AYe extends Ve{constructor(){super({id:"editor.action.insertCursorAtEndOfEachLineSelected",label:v("mutlicursor.insertAtEndOfEachLineSelected","Add Cursors to Line Ends"),alias:"Add Cursors to Line Ends",precondition:void 0,kbOpts:{kbExpr:B.editorTextFocus,primary:1575,weight:100},menuOpts:{menuId:qe.MenubarSelectionMenu,group:"3_multi",title:v({key:"miInsertCursorAtEndOfEachLineSelected",comment:["&& denotes a mnemonic"]},"Add C&&ursors to Line Ends"),order:4}})}getCursorsForSelection(e,t,i){if(!e.isEmpty()){for(let n=e.startLineNumber;n<e.endLineNumber;n++){const s=t.getLineMaxColumn(n);i.push(new Ke(n,s,n,s))}e.endColumn>1&&i.push(new Ke(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn))}}run(e,t){if(!t.hasModel())return;const i=t.getModel(),n=t.getSelections(),s=t._getViewModel(),r=s.getCursorStates(),a=[];n.forEach(l=>this.getCursorsForSelection(l,i,a)),a.length>0&&t.setSelections(a),a_(r,s.getCursorStates())}}class PYe extends Ve{constructor(){super({id:"editor.action.addCursorsToBottom",label:v("mutlicursor.addCursorsToBottom","Add Cursors To Bottom"),alias:"Add Cursors To Bottom",precondition:void 0})}run(e,t){if(!t.hasModel())return;const i=t.getSelections(),n=t.getModel().getLineCount(),s=[];for(let l=i[0].startLineNumber;l<=n;l++)s.push(new Ke(l,i[0].startColumn,l,i[0].endColumn));const r=t._getViewModel(),a=r.getCursorStates();s.length>0&&t.setSelections(s),a_(a,r.getCursorStates())}}class OYe extends Ve{constructor(){super({id:"editor.action.addCursorsToTop",label:v("mutlicursor.addCursorsToTop","Add Cursors To Top"),alias:"Add Cursors To Top",precondition:void 0})}run(e,t){if(!t.hasModel())return;const i=t.getSelections(),n=[];for(let a=i[0].startLineNumber;a>=1;a--)n.push(new Ke(a,i[0].startColumn,a,i[0].endColumn));const s=t._getViewModel(),r=s.getCursorStates();n.length>0&&t.setSelections(n),a_(r,s.getCursorStates())}}class sM{constructor(e,t,i){this.selections=e,this.revealRange=t,this.revealScrollType=i}}class IE{static create(e,t){if(!e.hasModel())return null;const i=t.getState();if(!e.hasTextFocus()&&i.isRevealed&&i.searchString.length>0)return new IE(e,t,!1,i.searchString,i.wholeWord,i.matchCase,null);let n=!1,s,r;const a=e.getSelections();a.length===1&&a[0].isEmpty()?(n=!0,s=!0,r=!0):(s=i.wholeWord,r=i.matchCase);const l=e.getSelection();let c,u=null;if(l.isEmpty()){const f=e.getConfiguredWordAtPosition(l.getStartPosition());if(!f)return null;c=f.word,u=new Ke(l.startLineNumber,f.startColumn,l.startLineNumber,f.endColumn)}else c=e.getModel().getValueInRange(l).replace(/\r\n/g,`
`);return new IE(e,t,n,c,s,r,u)}constructor(e,t,i,n,s,r,a){this._editor=e,this.findController=t,this.isDisconnectedFromFindController=i,this.searchText=n,this.wholeWord=s,this.matchCase=r,this.currentMatch=a}addSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const e=this._getNextMatch();if(!e)return null;const t=this._editor.getSelections();return new sM(t.concat(e),e,0)}moveSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const e=this._getNextMatch();if(!e)return null;const t=this._editor.getSelections();return new sM(t.slice(0,t.length-1).concat(e),e,0)}_getNextMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const n=this.currentMatch;return this.currentMatch=null,n}this.findController.highlightFindOptions();const e=this._editor.getSelections(),t=e[e.length-1],i=this._editor.getModel().findNextMatch(this.searchText,t.getEndPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(132):null,!1);return i?new Ke(i.range.startLineNumber,i.range.startColumn,i.range.endLineNumber,i.range.endColumn):null}addSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const e=this._getPreviousMatch();if(!e)return null;const t=this._editor.getSelections();return new sM(t.concat(e),e,0)}moveSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const e=this._getPreviousMatch();if(!e)return null;const t=this._editor.getSelections();return new sM(t.slice(0,t.length-1).concat(e),e,0)}_getPreviousMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const n=this.currentMatch;return this.currentMatch=null,n}this.findController.highlightFindOptions();const e=this._editor.getSelections(),t=e[e.length-1],i=this._editor.getModel().findPreviousMatch(this.searchText,t.getStartPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(132):null,!1);return i?new Ke(i.range.startLineNumber,i.range.startColumn,i.range.endLineNumber,i.range.endColumn):null}selectAll(e){if(!this._editor.hasModel())return[];this.findController.highlightFindOptions();const t=this._editor.getModel();return e?t.findMatches(this.searchText,e,!1,this.matchCase,this.wholeWord?this._editor.getOption(132):null,!1,1073741824):t.findMatches(this.searchText,!0,!1,this.matchCase,this.wholeWord?this._editor.getOption(132):null,!1,1073741824)}}const wF=class wF extends X{static get(e){return e.getContribution(wF.ID)}constructor(e){super(),this._sessionDispose=this._register(new le),this._editor=e,this._ignoreSelectionChange=!1,this._session=null}dispose(){this._endSession(),super.dispose()}_beginSessionIfNeeded(e){if(!this._session){const t=IE.create(this._editor,e);if(!t)return;this._session=t;const i={searchString:this._session.searchText};this._session.isDisconnectedFromFindController&&(i.wholeWordOverride=1,i.matchCaseOverride=1,i.isRegexOverride=2),e.getState().change(i,!1),this._sessionDispose.add(this._editor.onDidChangeCursorSelection(n=>{this._ignoreSelectionChange||this._endSession()})),this._sessionDispose.add(this._editor.onDidBlurEditorText(()=>{this._endSession()})),this._sessionDispose.add(e.getState().onFindReplaceStateChange(n=>{(n.matchCase||n.wholeWord)&&this._endSession()}))}}_endSession(){if(this._sessionDispose.clear(),this._session&&this._session.isDisconnectedFromFindController){const e={wholeWordOverride:0,matchCaseOverride:0,isRegexOverride:0};this._session.findController.getState().change(e,!1)}this._session=null}_setSelections(e){this._ignoreSelectionChange=!0,this._editor.setSelections(e),this._ignoreSelectionChange=!1}_expandEmptyToWord(e,t){if(!t.isEmpty())return t;const i=this._editor.getConfiguredWordAtPosition(t.getStartPosition());return i?new Ke(t.startLineNumber,i.startColumn,t.startLineNumber,i.endColumn):t}_applySessionResult(e){e&&(this._setSelections(e.selections),e.revealRange&&this._editor.revealRangeInCenterIfOutsideViewport(e.revealRange,e.revealScrollType))}getSession(e){return this._session}addSelectionToNextFindMatch(e){if(this._editor.hasModel()){if(!this._session){const t=this._editor.getSelections();if(t.length>1){const n=e.getState().matchCase;if(!hme(this._editor.getModel(),t,n)){const r=this._editor.getModel(),a=[];for(let l=0,c=t.length;l<c;l++)a[l]=this._expandEmptyToWord(r,t[l]);this._editor.setSelections(a);return}}}this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToNextFindMatch())}}addSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToPreviousFindMatch())}moveSelectionToNextFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToNextFindMatch())}moveSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToPreviousFindMatch())}selectAll(e){if(!this._editor.hasModel())return;let t=null;const i=e.getState();if(i.isRevealed&&i.searchString.length>0&&i.isRegex){const n=this._editor.getModel();i.searchScope?t=n.findMatches(i.searchString,i.searchScope,i.isRegex,i.matchCase,i.wholeWord?this._editor.getOption(132):null,!1,1073741824):t=n.findMatches(i.searchString,!0,i.isRegex,i.matchCase,i.wholeWord?this._editor.getOption(132):null,!1,1073741824)}else{if(this._beginSessionIfNeeded(e),!this._session)return;t=this._session.selectAll(i.searchScope)}if(t.length>0){const n=this._editor.getSelection();for(let s=0,r=t.length;s<r;s++){const a=t[s];if(a.range.intersectRanges(n)){t[s]=t[0],t[0]=a;break}}this._setSelections(t.map(s=>new Ke(s.range.startLineNumber,s.range.startColumn,s.range.endLineNumber,s.range.endColumn)))}}};wF.ID="editor.contrib.multiCursorController";let OS=wF;class h0 extends Ve{run(e,t){const i=OS.get(t);if(!i)return;const n=t._getViewModel();if(n){const s=n.getCursorStates(),r=Ta.get(t);if(r)this._run(i,r);else{const a=e.get(nt).createInstance(Ta,t);this._run(i,a),a.dispose()}a_(s,n.getCursorStates())}}}class FYe extends h0{constructor(){super({id:"editor.action.addSelectionToNextFindMatch",label:v("addSelectionToNextFindMatch","Add Selection To Next Find Match"),alias:"Add Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:B.focus,primary:2082,weight:100},menuOpts:{menuId:qe.MenubarSelectionMenu,group:"3_multi",title:v({key:"miAddSelectionToNextFindMatch",comment:["&& denotes a mnemonic"]},"Add &&Next Occurrence"),order:5}})}_run(e,t){e.addSelectionToNextFindMatch(t)}}class BYe extends h0{constructor(){super({id:"editor.action.addSelectionToPreviousFindMatch",label:v("addSelectionToPreviousFindMatch","Add Selection To Previous Find Match"),alias:"Add Selection To Previous Find Match",precondition:void 0,menuOpts:{menuId:qe.MenubarSelectionMenu,group:"3_multi",title:v({key:"miAddSelectionToPreviousFindMatch",comment:["&& denotes a mnemonic"]},"Add P&&revious Occurrence"),order:6}})}_run(e,t){e.addSelectionToPreviousFindMatch(t)}}class WYe extends h0{constructor(){super({id:"editor.action.moveSelectionToNextFindMatch",label:v("moveSelectionToNextFindMatch","Move Last Selection To Next Find Match"),alias:"Move Last Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:B.focus,primary:Is(2089,2082),weight:100}})}_run(e,t){e.moveSelectionToNextFindMatch(t)}}class HYe extends h0{constructor(){super({id:"editor.action.moveSelectionToPreviousFindMatch",label:v("moveSelectionToPreviousFindMatch","Move Last Selection To Previous Find Match"),alias:"Move Last Selection To Previous Find Match",precondition:void 0})}_run(e,t){e.moveSelectionToPreviousFindMatch(t)}}class VYe extends h0{constructor(){super({id:"editor.action.selectHighlights",label:v("selectAllOccurrencesOfFindMatch","Select All Occurrences of Find Match"),alias:"Select All Occurrences of Find Match",precondition:void 0,kbOpts:{kbExpr:B.focus,primary:3114,weight:100},menuOpts:{menuId:qe.MenubarSelectionMenu,group:"3_multi",title:v({key:"miSelectHighlights",comment:["&& denotes a mnemonic"]},"Select All &&Occurrences"),order:7}})}_run(e,t){e.selectAll(t)}}class zYe extends h0{constructor(){super({id:"editor.action.changeAll",label:v("changeAll.label","Change All Occurrences"),alias:"Change All Occurrences",precondition:de.and(B.writable,B.editorTextFocus),kbOpts:{kbExpr:B.editorTextFocus,primary:2108,weight:100},contextMenuOpts:{group:"1_modification",order:1.2}})}_run(e,t){e.selectAll(t)}}class UYe{constructor(e,t,i,n,s){this._model=e,this._searchText=t,this._matchCase=i,this._wordSeparators=n,this._modelVersionId=this._model.getVersionId(),this._cachedFindMatches=null,s&&this._model===s._model&&this._searchText===s._searchText&&this._matchCase===s._matchCase&&this._wordSeparators===s._wordSeparators&&this._modelVersionId===s._modelVersionId&&(this._cachedFindMatches=s._cachedFindMatches)}findMatches(){return this._cachedFindMatches===null&&(this._cachedFindMatches=this._model.findMatches(this._searchText,!0,!1,this._matchCase,this._wordSeparators,!1).map(e=>e.range),this._cachedFindMatches.sort(M.compareRangesUsingStarts)),this._cachedFindMatches}}var Ub;let jO=(Ub=class extends X{constructor(e,t){super(),this._languageFeaturesService=t,this.editor=e,this._isEnabled=e.getOption(109),this._decorations=e.createDecorationsCollection(),this.updateSoon=this._register(new Oi(()=>this._update(),300)),this.state=null,this._register(e.onDidChangeConfiguration(n=>{this._isEnabled=e.getOption(109)})),this._register(e.onDidChangeCursorSelection(n=>{this._isEnabled&&(n.selection.isEmpty()?n.reason===3?(this.state&&this._setState(null),this.updateSoon.schedule()):this._setState(null):this._update())})),this._register(e.onDidChangeModel(n=>{this._setState(null)})),this._register(e.onDidChangeModelContent(n=>{this._isEnabled&&this.updateSoon.schedule()}));const i=Ta.get(e);i&&this._register(i.getState().onFindReplaceStateChange(n=>{this._update()})),this.updateSoon.schedule()}_update(){this._setState(pj._createState(this.state,this._isEnabled,this.editor))}static _createState(e,t,i){if(!t||!i.hasModel())return null;const n=i.getSelection();if(n.startLineNumber!==n.endLineNumber)return null;const s=OS.get(i);if(!s)return null;const r=Ta.get(i);if(!r)return null;let a=s.getSession(r);if(!a){const u=i.getSelections();if(u.length>1){const g=r.getState().matchCase;if(!hme(i.getModel(),u,g))return null}a=IE.create(i,r)}if(!a||a.currentMatch||/^[ \t]+$/.test(a.searchText)||a.searchText.length>200)return null;const l=r.getState(),c=l.matchCase;if(l.isRevealed){let u=l.searchString;c||(u=u.toLowerCase());let f=a.searchText;if(c||(f=f.toLowerCase()),u===f&&a.matchCase===l.matchCase&&a.wholeWord===l.wholeWord&&!l.isRegex)return null}return new UYe(i.getModel(),a.searchText,a.matchCase,a.wholeWord?i.getOption(132):null,e)}_setState(e){if(this.state=e,!this.state){this._decorations.clear();return}if(!this.editor.hasModel())return;const t=this.editor.getModel();if(t.isTooLargeForTokenization())return;const i=this.state.findMatches(),n=this.editor.getSelections();n.sort(M.compareRangesUsingStarts);const s=[];for(let c=0,u=0,f=i.length,g=n.length;c<f;){const p=i[c];if(u>=g)s.push(p),c++;else{const _=M.compareRangesUsingStarts(p,n[u]);_<0?((n[u].isEmpty()||!M.areIntersecting(p,n[u]))&&s.push(p),c++):(_>0||c++,u++)}}const r=this.editor.getOption(81)!=="off",a=this._languageFeaturesService.documentHighlightProvider.has(t)&&r,l=s.map(c=>({range:c,options:IYe(a)}));this._decorations.set(l)}dispose(){this._setState(null),super.dispose()}},pj=Ub,Ub.ID="editor.contrib.selectionHighlighter",Ub);jO=pj=TYe([NYe(1,Ue)],jO);function hme(o,e,t){const i=Nae(o,e[0],!t);for(let n=1,s=e.length;n<s;n++){const r=e[n];if(r.isEmpty())return!1;const a=Nae(o,r,!t);if(i!==a)return!1}return!0}function Nae(o,e,t){const i=o.getValueInRange(e);return t?i.toLowerCase():i}class $Ye extends Ve{constructor(){super({id:"editor.action.focusNextCursor",label:v("mutlicursor.focusNextCursor","Focus Next Cursor"),metadata:{description:v("mutlicursor.focusNextCursor.description","Focuses the next cursor"),args:[]},alias:"Focus Next Cursor",precondition:void 0})}run(e,t,i){if(!t.hasModel())return;const n=t._getViewModel();if(n.cursorConfig.readOnly)return;n.model.pushStackElement();const s=Array.from(n.getCursorStates()),r=s.shift();r&&(s.push(r),n.setCursorStates(i.source,3,s),n.revealPrimaryCursor(i.source,!0),a_(s,n.getCursorStates()))}}class jYe extends Ve{constructor(){super({id:"editor.action.focusPreviousCursor",label:v("mutlicursor.focusPreviousCursor","Focus Previous Cursor"),metadata:{description:v("mutlicursor.focusPreviousCursor.description","Focuses the previous cursor"),args:[]},alias:"Focus Previous Cursor",precondition:void 0})}run(e,t,i){if(!t.hasModel())return;const n=t._getViewModel();if(n.cursorConfig.readOnly)return;n.model.pushStackElement();const s=Array.from(n.getCursorStates()),r=s.pop();r&&(s.unshift(r),n.setCursorStates(i.source,3,s),n.revealPrimaryCursor(i.source,!0),a_(s,n.getCursorStates()))}}oi(OS.ID,OS,4);oi(jO.ID,jO,1);be(RYe);be(MYe);be(AYe);be(FYe);be(BYe);be(WYe);be(HYe);be(VYe);be(zYe);be(PYe);be(OYe);be($Ye);be(jYe);const qYe="editor.action.inlineEdit.accept",KYe="editor.action.inlineEdit.reject",GYe="editor.action.inlineEdit.jumpTo",YYe="editor.action.inlineEdit.jumpBack";var ZYe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},XYe=function(o,e){return function(t,i){e(t,i,o)}};const I9="inline-edit";let mj=class extends X{constructor(e,t,i){super(),this.editor=e,this.model=t,this.languageService=i,this.isDisposed=Wt(this,!1),this.currentTextModel=Ni(this,this.editor.onDidChangeModel,()=>this.editor.getModel()),this.uiState=Qe(this,n=>{var L;if(this.isDisposed.read(n))return;const s=this.currentTextModel.read(n);if(s!==this.model.targetTextModel.read(n))return;const r=this.model.ghostText.read(n);if(!r)return;let a=(L=this.model.range)==null?void 0:L.read(n);a&&a.startLineNumber===a.endLineNumber&&a.startColumn===a.endColumn&&(a=void 0);const l=(a?a.startLineNumber===a.endLineNumber:!0)&&r.parts.length===1&&r.parts[0].lines.length===1,c=r.parts.length===1&&r.parts[0].lines.every(x=>x.length===0),u=[],f=[];function g(x,k){if(f.length>0){const E=f[f.length-1];k&&E.decorations.push(new Kr(E.content.length+1,E.content.length+1+x[0].length,k,0)),E.content+=x[0],x=x.slice(1)}for(const E of x)f.push({content:E,decorations:k?[new Kr(1,E.length+1,k,0)]:[]})}const p=s.getLineContent(r.lineNumber);let _,b=0;if(!c&&(l||!a)){for(const x of r.parts){let k=x.lines;a&&!l&&(g(k,I9),k=[]),_===void 0?(u.push({column:x.column,text:k[0],preview:x.preview}),k=k.slice(1)):g([p.substring(b,x.column-1)],void 0),k.length>0&&(g(k,I9),_===void 0&&x.column<=p.length&&(_=x.column)),b=x.column-1}_!==void 0&&g([p.substring(b)],void 0)}const y=_!==void 0?new Kpe(_,p.length+1):void 0,S=l||!a?r.lineNumber:a.endLineNumber-1;return{inlineTexts:u,additionalLines:f,hiddenRange:y,lineNumber:S,additionalReservedLineCount:this.model.minReservedLineCount.read(n),targetTextModel:s,range:a,isSingleLine:l,isPureRemove:c}}),this.decorations=Qe(this,n=>{const s=this.uiState.read(n);if(!s)return[];const r=[];if(s.hiddenRange&&r.push({range:s.hiddenRange.toRange(s.lineNumber),options:{inlineClassName:"inline-edit-hidden",description:"inline-edit-hidden"}}),s.range){const a=[];if(s.isSingleLine)a.push(s.range);else if(!s.isPureRemove){const l=s.range.endLineNumber-s.range.startLineNumber;for(let c=0;c<l;c++){const u=s.range.startLineNumber+c,f=s.targetTextModel.getLineFirstNonWhitespaceColumn(u),g=s.targetTextModel.getLineLastNonWhitespaceColumn(u),p=new M(u,f,u,g);a.push(p)}}for(const l of a)r.push({range:l,options:wS})}if(s.range&&!s.isSingleLine&&s.isPureRemove){const a=new M(s.range.startLineNumber,1,s.range.endLineNumber-1,1);r.push({range:a,options:rE})}for(const a of s.inlineTexts)r.push({range:M.fromPositions(new G(s.lineNumber,a.column)),options:{description:I9,after:{content:a.text,inlineClassName:a.preview?"inline-edit-decoration-preview":"inline-edit-decoration",cursorStops:id.Left},showIfCollapsed:!0}});return r}),this._register(it(()=>{this.isDisposed.set(!0,void 0)})),this._register(Gpe(this.editor,this.decorations))}};mj=ZYe([XYe(2,In)],mj);var jY=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},_h=function(o,e){return function(t,i){e(t,i,o)}},qM;let _j=class extends X{constructor(e,t,i){super(),this.editor=e,this.model=t,this.instantiationService=i,this.alwaysShowToolbar=Ni(this,this.editor.onDidChangeConfiguration,()=>this.editor.getOption(63).showToolbar==="always"),this.sessionPosition=void 0,this.position=Qe(this,n=>{var l,c;const s=(l=this.model.read(n))==null?void 0:l.model.ghostText.read(n);if(!this.alwaysShowToolbar.read(n)||!s||s.parts.length===0)return this.sessionPosition=void 0,null;const r=s.parts[0].column;this.sessionPosition&&this.sessionPosition.lineNumber!==s.lineNumber&&(this.sessionPosition=void 0);const a=new G(s.lineNumber,Math.min(r,((c=this.sessionPosition)==null?void 0:c.column)??Number.MAX_SAFE_INTEGER));return this.sessionPosition=a,a}),this._register(ka((n,s)=>{if(!this.model.read(n)||!this.alwaysShowToolbar.read(n))return;const a=s.add(this.instantiationService.createInstance(vj,this.editor,!0,this.position));e.addContentWidget(a),s.add(it(()=>e.removeContentWidget(a)))}))}};_j=jY([_h(2,nt)],_j);var Im;let vj=(Im=class extends X{constructor(e,t,i,n,s,r){super(),this.editor=e,this.withBorder=t,this._position=i,this._contextKeyService=s,this._menuService=r,this.id=`InlineEditHintsContentWidget${qM.id++}`,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this.nodes=jt("div.inlineEditHints",{className:this.withBorder?".withBorder":""},[jt("div@toolBar")]),this.inlineCompletionsActionsMenus=this._register(this._menuService.createMenu(qe.InlineEditActions,this._contextKeyService)),this.toolBar=this._register(n.createInstance(bj,this.nodes.toolBar,this.editor,qe.InlineEditToolbar,{menuOptions:{renderShortTitle:!0},toolbarOptions:{primaryGroup:a=>a.startsWith("primary")},actionViewItemProvider:(a,l)=>{if(a instanceof il)return n.createInstance(QYe,a,void 0)},telemetrySource:"InlineEditToolbar"})),this._register(this.toolBar.onDidChangeDropdownVisibility(a=>{qM._dropDownVisible=a})),this._register(bt(a=>{this._position.read(a),this.editor.layoutContentWidget(this)})),this._register(bt(a=>{const l=[];for(const[c,u]of this.inlineCompletionsActionsMenus.getActions())for(const f of u)f instanceof il&&l.push(f);l.length>0&&l.unshift(new Zs),this.toolBar.setAdditionalSecondaryActions(l)}))}getId(){return this.id}getDomNode(){return this.nodes.root}getPosition(){return{position:this._position.get(),preference:[1,2],positionAffinity:3}}},qM=Im,Im._dropDownVisible=!1,Im.id=0,Im);vj=qM=jY([_h(3,nt),_h(4,ht),_h(5,Gl)],vj);class QYe extends Um{updateLabel(){const e=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!e)return super.updateLabel();if(this.label){const t=jt("div.keybinding").root;this._register(new n0(t,Ja,{disableTitle:!0,...Hhe})).set(e),this.label.textContent=this._action.label,this.label.appendChild(t),this.label.classList.add("inlineEditStatusBarItemLabel")}}updateTooltip(){}}let bj=class extends lE{constructor(e,t,i,n,s,r,a,l,c,u){super(e,{resetMenu:i,...n},s,r,a,l,c,u),this.editor=t,this.menuId=i,this.options2=n,this.menuService=s,this.contextKeyService=r,this.menu=this._store.add(this.menuService.createMenu(this.menuId,this.contextKeyService,{emitEventsForSubmenuChanges:!0})),this.additionalActions=[],this.prependedPrimaryActions=[],this._store.add(this.menu.onDidChange(()=>this.updateToolbar())),this._store.add(this.editor.onDidChangeCursorPosition(()=>this.updateToolbar())),this.updateToolbar()}updateToolbar(){var i,n,s,r,a,l,c;const e=[],t=[];R4(this.menu,(i=this.options2)==null?void 0:i.menuOptions,{primary:e,secondary:t},(s=(n=this.options2)==null?void 0:n.toolbarOptions)==null?void 0:s.primaryGroup,(a=(r=this.options2)==null?void 0:r.toolbarOptions)==null?void 0:a.shouldInlineSubmenu,(c=(l=this.options2)==null?void 0:l.toolbarOptions)==null?void 0:c.useSeparatorsInPrimaryActions),t.push(...this.additionalActions),e.unshift(...this.prependedPrimaryActions),this.setActions(e,t)}setAdditionalSecondaryActions(e){En(this.additionalActions,e,(t,i)=>t===i)||(this.additionalActions=e,this.updateToolbar())}};bj=jY([_h(4,Gl),_h(5,ht),_h(6,cl),_h(7,Di),_h(8,nn),_h(9,tr)],bj);var fme=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},KM=function(o,e){return function(t,i){e(t,i,o)}},Zx,Cj;function*JYe(o,e,t=1){e===void 0&&([e,o]=[o,0]);for(let i=o;i<e;i+=t)yield i}function T9(o){var i;const e=((i=o[0].match(/^\s*/))==null?void 0:i[0])??"",t=e.length;return{text:o.map(n=>n.replace(new RegExp("^"+e),"")),shift:t}}var $b;let yj=($b=class extends X{static _createUniqueUri(){return st.from({scheme:"inline-edit-widget",path:new Date().toString()+String(Zx._modelId++)})}constructor(e,t,i,n,s){super(),this._editor=e,this._model=t,this._instantiationService=i,this._diffProviderFactoryService=n,this._modelService=s,this._position=Qe(this,r=>{const a=this._model.read(r);if(!a||a.text.length===0||a.range.startLineNumber===a.range.endLineNumber&&!(a.range.startColumn===a.range.endColumn&&a.range.startColumn===1))return null;const l=this._editor.getModel();if(!l)return null;const c=Array.from(JYe(a.range.startLineNumber,a.range.endLineNumber+1)),u=c.map(b=>l.getLineLastNonWhitespaceColumn(b)),f=Math.max(...u),g=c[u.indexOf(f)],p=new G(g,f);return{top:a.range.startLineNumber,left:p}}),this._text=Qe(this,r=>{const a=this._model.read(r);if(!a)return{text:"",shift:0};const l=T9(a.text.split(`
`));return{text:l.text.join(`
`),shift:l.shift}}),this._originalModel=vr(()=>this._modelService.createModel("",null,Zx._createUniqueUri())).keepObserved(this._store),this._modifiedModel=vr(()=>this._modelService.createModel("",null,Zx._createUniqueUri())).keepObserved(this._store),this._diff=Qe(this,r=>{var a,l;return(l=(a=this._diffPromise.read(r))==null?void 0:a.promiseResult.read(r))==null?void 0:l.data}),this._diffPromise=Qe(this,r=>{const a=this._model.read(r);if(!a)return;const l=this._editor.getModel();if(!l)return;const c=T9(l.getValueInRange(a.range).split(`
`)).text.join(`
`),u=T9(a.text.split(`
`)).text.join(`
`);this._originalModel.get().setValue(c),this._modifiedModel.get().setValue(u);const f=this._diffProviderFactoryService.createDiffProvider({diffAlgorithm:"advanced"});return I4.fromFn(async()=>{const g=await f.computeDiff(this._originalModel.get(),this._modifiedModel.get(),{computeMoves:!1,ignoreTrimWhitespace:!1,maxComputationTimeMs:1e3},Mt.None);if(!g.identical)return g.changes})}),this._register(ka((r,a)=>{if(!this._model.read(r)||this._position.get()===null)return;const c=a.add(this._instantiationService.createInstance(wj,this._editor,this._position,this._text.map(u=>u.text),this._text.map(u=>u.shift),this._diff));e.addOverlayWidget(c),a.add(it(()=>e.removeOverlayWidget(c)))}))}},Zx=$b,$b._modelId=0,$b);yj=Zx=fme([KM(2,nt),KM(3,CI),KM(4,un)],yj);var jb;let wj=(jb=class extends X{constructor(e,t,i,n,s,r){var a;super(),this._editor=e,this._position=t,this._text=i,this._shift=n,this._diff=s,this._instantiationService=r,this.id=`InlineEditSideBySideContentWidget${Cj.id++}`,this.allowEditorOverflow=!1,this._nodes=xe("div.inlineEditSideBySide",void 0),this._scrollChanged=No("editor.onDidScrollChange",this._editor.onDidScrollChange),this._previewEditor=this._register(this._instantiationService.createInstance(fd,this._nodes,{glyphMargin:!1,lineNumbers:"off",minimap:{enabled:!1},guides:{indentation:!1,bracketPairs:!1,bracketPairsHorizontal:!1,highlightActiveIndentation:!1},folding:!1,selectOnLineNumbers:!1,selectionHighlight:!1,columnSelection:!1,overviewRulerBorder:!1,overviewRulerLanes:0,lineDecorationsWidth:0,lineNumbersMinChars:0,scrollbar:{vertical:"hidden",horizontal:"hidden",alwaysConsumeMouseWheel:!1,handleMouseWheel:!1},readOnly:!0,wordWrap:"off",wordWrapOverride1:"off",wordWrapOverride2:"off",wrappingIndent:"none",wrappingStrategy:void 0},{contributions:[],isSimpleWidget:!0},this._editor)),this._previewEditorObs=Qa(this._previewEditor),this._editorObs=Qa(this._editor),this._previewTextModel=this._register(this._instantiationService.createInstance(nu,"",((a=this._editor.getModel())==null?void 0:a.getLanguageId())??Xr,nu.DEFAULT_CREATION_OPTIONS,null)),this._setText=Qe(l=>{const c=this._text.read(l);c&&this._previewTextModel.setValue(c)}).recomputeInitiallyAndOnChange(this._store),this._decorations=Qe(this,l=>{this._setText.read(l);const c=this._position.read(l);if(!c)return{org:[],mod:[]};const u=this._diff.read(l);if(!u)return{org:[],mod:[]};const f=[],g=[];if(u.length===1&&u[0].innerChanges[0].modifiedRange.equalsRange(this._previewTextModel.getFullModelRange()))return{org:[],mod:[]};const p=this._shift.get(),_=b=>new M(b.startLineNumber+c.top-1,b.startColumn+p,b.endLineNumber+c.top-1,b.endColumn+p);for(const b of u)if(b.original.isEmpty||f.push({range:_(b.original.toInclusiveRange()),options:rE}),b.modified.isEmpty||g.push({range:b.modified.toInclusiveRange(),options:YP}),b.modified.isEmpty||b.original.isEmpty)b.original.isEmpty||f.push({range:_(b.original.toInclusiveRange()),options:ZG}),b.modified.isEmpty||g.push({range:b.modified.toInclusiveRange(),options:GG});else for(const y of b.innerChanges||[])b.original.contains(y.originalRange.startLineNumber)&&f.push({range:_(y.originalRange),options:y.originalRange.isEmpty()?XG:wS}),b.modified.contains(y.modifiedRange.startLineNumber)&&g.push({range:y.modifiedRange,options:y.modifiedRange.isEmpty()?YG:ZP});return{org:f,mod:g}}),this._originalDecorations=Qe(this,l=>this._decorations.read(l).org),this._modifiedDecorations=Qe(this,l=>this._decorations.read(l).mod),this._previewEditor.setModel(this._previewTextModel),this._register(this._editorObs.setDecorations(this._originalDecorations)),this._register(this._previewEditorObs.setDecorations(this._modifiedDecorations)),this._register(bt(l=>{const c=this._previewEditorObs.contentWidth.read(l),u=this._text.read(l).split(`
`).length-1,f=this._editor.getOption(67)*u;c<=0||this._previewEditor.layout({height:f,width:c})})),this._register(bt(l=>{this._position.read(l),this._editor.layoutOverlayWidget(this)})),this._register(bt(l=>{this._scrollChanged.read(l),this._position.read(l)&&this._editor.layoutOverlayWidget(this)}))}getId(){return this.id}getDomNode(){return this._nodes}getPosition(){const e=this._position.get();if(!e)return null;const t=this._editor.getLayoutInfo(),i=this._editor.getScrolledVisiblePosition(new G(e.top,1));if(!i)return null;const n=i.top-1,s=this._editor.getOffsetForColumn(e.left.lineNumber,e.left.column);return{preference:{left:t.contentLeft+s+10,top:n}}}},Cj=jb,jb.id=0,jb);wj=Cj=fme([KM(5,nt)],wj);var eZe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},tv=function(o,e){return function(t,i){e(t,i,o)}},Xx,gc;let Gr=(gc=class extends X{static get(e){return e.getContribution(Xx.ID)}constructor(e,t,i,n,s,r,a,l){super(),this.editor=e,this.instantiationService=t,this.contextKeyService=i,this.languageFeaturesService=n,this._commandService=s,this._configurationService=r,this._diffProviderFactoryService=a,this._modelService=l,this._isVisibleContext=Xx.inlineEditVisibleContext.bindTo(this.contextKeyService),this._isCursorAtInlineEditContext=Xx.cursorAtInlineEditContext.bindTo(this.contextKeyService),this._currentEdit=Wt(this,void 0),this._currentWidget=vr(this._currentEdit,_=>{const b=this._currentEdit.read(_);if(!b)return;const y=b.range.endLineNumber,S=b.range.endColumn,L=b.text.endsWith(`
`)&&!(b.range.startLineNumber===b.range.endLineNumber&&b.range.startColumn===b.range.endColumn)?b.text.slice(0,-1):b.text,x=new SE(y,[new LO(S,L,!1)]),k=b.range.startLineNumber===b.range.endLineNumber&&x.parts.length===1&&x.parts[0].lines.length===1,E=b.text==="";return!k&&!E?void 0:this.instantiationService.createInstance(mj,this.editor,{ghostText:Cc(x),minReservedLineCount:Cc(0),targetTextModel:Cc(this.editor.getModel()??void 0),range:Cc(b.range)})}),this._isAccepting=Wt(this,!1),this._enabled=Ni(this,this.editor.onDidChangeConfiguration,()=>this.editor.getOption(63).enabled),this._fontFamily=Ni(this,this.editor.onDidChangeConfiguration,()=>this.editor.getOption(63).fontFamily);const c=No("InlineEditController.modelContentChangedSignal",e.onDidChangeModelContent);this._register(bt(_=>{this._enabled.read(_)&&(c.read(_),!this._isAccepting.read(_)&&this.getInlineEdit(e,!0))}));const u=Ni(this,e.onDidChangeCursorPosition,()=>e.getPosition());this._register(bt(_=>{if(!this._enabled.read(_))return;const b=u.read(_);b&&this.checkCursorPosition(b)})),this._register(bt(_=>{const b=this._currentEdit.read(_);if(this._isCursorAtInlineEditContext.set(!1),!b){this._isVisibleContext.set(!1);return}this._isVisibleContext.set(!0);const y=e.getPosition();y&&this.checkCursorPosition(y)}));const f=No("InlineEditController.editorBlurSignal",e.onDidBlurEditorWidget);this._register(bt(async _=>{var b;this._enabled.read(_)&&(f.read(_),!(this._configurationService.getValue("editor.experimentalInlineEdit.keepOnBlur")||e.getOption(63).keepOnBlur)&&((b=this._currentRequestCts)==null||b.dispose(!0),this._currentRequestCts=void 0,await this.clear(!1)))}));const g=No("InlineEditController.editorFocusSignal",e.onDidFocusEditorText);this._register(bt(_=>{this._enabled.read(_)&&(g.read(_),this.getInlineEdit(e,!0))}));const p=this._register(wce());this._register(bt(_=>{const b=this._fontFamily.read(_);p.setStyle(b===""||b==="default"?"":`
.monaco-editor .inline-edit-decoration,
.monaco-editor .inline-edit-decoration-preview,
.monaco-editor .inline-edit {
	font-family: ${b};
}`)})),this._register(new _j(this.editor,this._currentWidget,this.instantiationService)),this._register(new yj(this.editor,this._currentEdit,this.instantiationService,this._diffProviderFactoryService,this._modelService))}checkCursorPosition(e){if(!this._currentEdit){this._isCursorAtInlineEditContext.set(!1);return}const t=this._currentEdit.get();if(!t){this._isCursorAtInlineEditContext.set(!1);return}this._isCursorAtInlineEditContext.set(M.containsPosition(t.range,e))}validateInlineEdit(e,t){var i;if(t.text.includes(`
`)&&t.range.startLineNumber!==t.range.endLineNumber&&t.range.startColumn!==t.range.endColumn){if(t.range.startColumn!==1)return!1;const s=t.range.endLineNumber,r=t.range.endColumn,a=((i=e.getModel())==null?void 0:i.getLineLength(s))??0;if(r!==a+1)return!1}return!0}async fetchInlineEdit(e,t){this._currentRequestCts&&this._currentRequestCts.dispose(!0);const i=e.getModel();if(!i)return;const n=i.getVersionId(),s=this.languageFeaturesService.inlineEditProvider.all(i);if(s.length===0)return;const r=s[0];this._currentRequestCts=new An;const a=this._currentRequestCts.token,l=t?fA.Automatic:fA.Invoke;if(t&&await tZe(50,a),a.isCancellationRequested||i.isDisposed()||i.getVersionId()!==n)return;const u=await r.provideInlineEdit(i,{triggerKind:l},a);if(u&&!(a.isCancellationRequested||i.isDisposed()||i.getVersionId()!==n)&&this.validateInlineEdit(e,u))return u}async getInlineEdit(e,t){this._isCursorAtInlineEditContext.set(!1),await this.clear();const i=await this.fetchInlineEdit(e,t);i&&this._currentEdit.set(i,void 0)}async trigger(){await this.getInlineEdit(this.editor,!1)}async jumpBack(){this._jumpBackPosition&&(this.editor.setPosition(this._jumpBackPosition),this.editor.revealPositionInCenterIfOutsideViewport(this._jumpBackPosition))}async accept(){this._isAccepting.set(!0,void 0);const e=this._currentEdit.get();if(!e)return;let t=e.text;e.text.startsWith(`
`)&&(t=e.text.substring(1)),this.editor.pushUndoStop(),this.editor.executeEdits("acceptCurrent",[Rn.replace(M.lift(e.range),t)]),e.accepted&&await this._commandService.executeCommand(e.accepted.id,...e.accepted.arguments||[]).then(void 0,rs),this.freeEdit(e),Mn(i=>{this._currentEdit.set(void 0,i),this._isAccepting.set(!1,i)})}jumpToCurrent(){var i;this._jumpBackPosition=(i=this.editor.getSelection())==null?void 0:i.getStartPosition();const e=this._currentEdit.get();if(!e)return;const t=G.lift({lineNumber:e.range.startLineNumber,column:e.range.startColumn});this.editor.setPosition(t),this.editor.revealPositionInCenterIfOutsideViewport(t)}async clear(e=!0){const t=this._currentEdit.get();t&&(t!=null&&t.rejected)&&e&&await this._commandService.executeCommand(t.rejected.id,...t.rejected.arguments||[]).then(void 0,rs),t&&this.freeEdit(t),this._currentEdit.set(void 0,void 0)}freeEdit(e){const t=this.editor.getModel();if(!t)return;const i=this.languageFeaturesService.inlineEditProvider.all(t);i.length!==0&&i[0].freeInlineEdit(e)}},Xx=gc,gc.ID="editor.contrib.inlineEditController",gc.inlineEditVisibleKey="inlineEditVisible",gc.inlineEditVisibleContext=new Pe(gc.inlineEditVisibleKey,!1),gc.cursorAtInlineEditKey="cursorAtInlineEdit",gc.cursorAtInlineEditContext=new Pe(gc.cursorAtInlineEditKey,!1),gc);Gr=Xx=eZe([tv(1,nt),tv(2,ht),tv(3,Ue),tv(4,nn),tv(5,Ht),tv(6,CI),tv(7,un)],Gr);function tZe(o,e){return new Promise(t=>{let i;const n=setTimeout(()=>{i&&i.dispose(),t()},o);e&&(i=e.onCancellationRequested(()=>{clearTimeout(n),i&&i.dispose(),t()}))})}let iZe=class extends Ve{constructor(){super({id:qYe,label:"Accept Inline Edit",alias:"Accept Inline Edit",precondition:de.and(B.writable,Gr.inlineEditVisibleContext),kbOpts:[{weight:101,primary:2,kbExpr:de.and(B.writable,Gr.inlineEditVisibleContext,Gr.cursorAtInlineEditContext)}],menuOpts:[{menuId:qe.InlineEditToolbar,title:"Accept",group:"primary",order:1}]})}async run(e,t){const i=Gr.get(t);await(i==null?void 0:i.accept())}};class nZe extends Ve{constructor(){const e=de.and(B.writable,de.not(Gr.inlineEditVisibleKey));super({id:"editor.action.inlineEdit.trigger",label:"Trigger Inline Edit",alias:"Trigger Inline Edit",precondition:e,kbOpts:{weight:101,primary:2646,kbExpr:e}})}async run(e,t){const i=Gr.get(t);i==null||i.trigger()}}class sZe extends Ve{constructor(){const e=de.and(B.writable,Gr.inlineEditVisibleContext,de.not(Gr.cursorAtInlineEditKey));super({id:GYe,label:"Jump to Inline Edit",alias:"Jump to Inline Edit",precondition:e,kbOpts:{weight:101,primary:2646,kbExpr:e},menuOpts:[{menuId:qe.InlineEditToolbar,title:"Jump To Edit",group:"primary",order:3,when:e}]})}async run(e,t){const i=Gr.get(t);i==null||i.jumpToCurrent()}}class oZe extends Ve{constructor(){const e=de.and(B.writable,Gr.cursorAtInlineEditContext);super({id:YYe,label:"Jump Back from Inline Edit",alias:"Jump Back from Inline Edit",precondition:e,kbOpts:{weight:110,primary:2646,kbExpr:e},menuOpts:[{menuId:qe.InlineEditToolbar,title:"Jump Back",group:"primary",order:3,when:e}]})}async run(e,t){const i=Gr.get(t);i==null||i.jumpBack()}}class rZe extends Ve{constructor(){const e=de.and(B.writable,Gr.inlineEditVisibleContext);super({id:KYe,label:"Reject Inline Edit",alias:"Reject Inline Edit",precondition:e,kbOpts:{weight:100,primary:9,kbExpr:e},menuOpts:[{menuId:qe.InlineEditToolbar,title:"Reject",group:"secondary",order:2}]})}async run(e,t){const i=Gr.get(t);await(i==null?void 0:i.clear())}}be(iZe);be(rZe);be(sZe);be(oZe);be(nZe);oi(Gr.ID,Gr,3);const aZe="editor.action.inlineEdits.accept",lZe="editor.action.inlineEdits.showPrevious",cZe="editor.action.inlineEdits.showNext",FS=new Pe("inlineEditsVisible",!1,v("inlineEditsVisible","Whether an inline edit is visible")),dZe=new Pe("inlineEditsIsPinned",!1,v("isPinned","Whether an inline edit is visible")),gZ=class gZ extends X{constructor(e){super(),this._editor=e,this._editorObs=Qa(this._editor),this._placeholderText=this._editorObs.getOption(88),this._state=Ml({owner:this,equalsFn:ZA},t=>{const i=this._placeholderText.read(t);if(i&&this._editorObs.valueIsEmpty.read(t))return{placeholder:i}}),this._shouldViewBeAlive=uZe(this,t=>{var i;return((i=this._state.read(t))==null?void 0:i.placeholder)!==void 0}),this._view=n_((t,i)=>{if(!this._shouldViewBeAlive.read(t))return;const n=jt("div.editorPlaceholder");i.add(bt(s=>{const r=this._state.read(s),a=(r==null?void 0:r.placeholder)!==void 0;n.root.style.display=a?"block":"none",n.root.innerText=(r==null?void 0:r.placeholder)??""})),i.add(bt(s=>{const r=this._editorObs.layoutInfo.read(s);n.root.style.left=`${r.contentLeft}px`,n.root.style.width=r.contentWidth-r.verticalScrollbarWidth+"px",n.root.style.top=`${this._editor.getTopForLineNumber(0)}px`})),i.add(bt(s=>{n.root.style.fontFamily=this._editorObs.getOption(49).read(s),n.root.style.fontSize=this._editorObs.getOption(52).read(s)+"px",n.root.style.lineHeight=this._editorObs.getOption(67).read(s)+"px"})),i.add(this._editorObs.createOverlayWidget({allowEditorOverflow:!1,minContentWidthInPx:Cc(0),position:Cc(null),domNode:n.root}))}),this._view.recomputeInitiallyAndOnChange(this._store)}};gZ.ID="editor.contrib.placeholderText";let TE=gZ;function uZe(o,e){return uI(o,(t,i)=>i===!0?!0:e(t))}var hZe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},fZe=function(o,e){return function(t,i){e(t,i,o)}};class gZe{constructor(e,t,i){this.range=e,this.newLines=t,this.changes=i}}let Sj=class extends X{constructor(e,t,i,n){super(),this._editor=e,this._edit=t,this._userPrompt=i,this._instantiationService=n,this._editorObs=Qa(this._editor),this._elements=jt("div.inline-edits-widget",{style:{position:"absolute",overflow:"visible",top:"0px",left:"0px"}},[jt("div@editorContainer",{style:{position:"absolute",top:"0px",left:"0px",width:"500px",height:"500px"}},[jt("div.toolbar@toolbar",{style:{position:"absolute",top:"-25px",left:"0px"}}),jt("div.promptEditor@promptEditor",{style:{position:"absolute",top:"-25px",left:"80px",width:"300px",height:"22px"}}),jt("div.preview@editor",{style:{position:"absolute",top:"0px",left:"0px"}})]),Zy("svg",{style:{overflow:"visible",pointerEvents:"none"}},[Zy("defs",[Zy("linearGradient",{id:"Gradient2",x1:"0",y1:"0",x2:"1",y2:"0"},[Zy("stop",{offset:"0%",class:"gradient-stop"}),Zy("stop",{offset:"100%",class:"gradient-stop"})])]),Zy("path@path",{d:"",fill:"url(#Gradient2)"})])]),this._previewTextModel=this._register(this._instantiationService.createInstance(nu,"",Xr,nu.DEFAULT_CREATION_OPTIONS,null)),this._setText=Qe(r=>{const a=this._edit.read(r);a&&this._previewTextModel.setValue(a.newLines.join(`
`))}).recomputeInitiallyAndOnChange(this._store),this._promptTextModel=this._register(this._instantiationService.createInstance(nu,"",Xr,nu.DEFAULT_CREATION_OPTIONS,null)),this._promptEditor=this._register(this._instantiationService.createInstance(fd,this._elements.promptEditor,{glyphMargin:!1,lineNumbers:"off",minimap:{enabled:!1},guides:{indentation:!1,bracketPairs:!1,bracketPairsHorizontal:!1,highlightActiveIndentation:!1},folding:!1,selectOnLineNumbers:!1,selectionHighlight:!1,columnSelection:!1,overviewRulerBorder:!1,overviewRulerLanes:0,lineDecorationsWidth:0,lineNumbersMinChars:0,placeholder:"Describe the change you want...",fontFamily:Sfe},{contributions:Xv.getSomeEditorContributions([nd.ID,TE.ID,IS.ID]),isSimpleWidget:!0},this._editor)),this._previewEditor=this._register(this._instantiationService.createInstance(fd,this._elements.editor,{glyphMargin:!1,lineNumbers:"off",minimap:{enabled:!1},guides:{indentation:!1,bracketPairs:!1,bracketPairsHorizontal:!1,highlightActiveIndentation:!1},folding:!1,selectOnLineNumbers:!1,selectionHighlight:!1,columnSelection:!1,overviewRulerBorder:!1,overviewRulerLanes:0,lineDecorationsWidth:0,lineNumbersMinChars:0},{contributions:[]},this._editor)),this._previewEditorObs=Qa(this._previewEditor),this._decorations=Qe(this,r=>{var u;this._setText.read(r);const a=(u=this._edit.read(r))==null?void 0:u.changes;if(!a)return[];const l=[],c=[];if(a.length===1&&a[0].innerChanges[0].modifiedRange.equalsRange(this._previewTextModel.getFullModelRange()))return[];for(const f of a)if(f.original.isEmpty||l.push({range:f.original.toInclusiveRange(),options:rE}),f.modified.isEmpty||c.push({range:f.modified.toInclusiveRange(),options:YP}),f.modified.isEmpty||f.original.isEmpty)f.original.isEmpty||l.push({range:f.original.toInclusiveRange(),options:ZG}),f.modified.isEmpty||c.push({range:f.modified.toInclusiveRange(),options:GG});else for(const g of f.innerChanges||[])f.original.contains(g.originalRange.startLineNumber)&&l.push({range:g.originalRange,options:g.originalRange.isEmpty()?XG:wS}),f.modified.contains(g.modifiedRange.startLineNumber)&&c.push({range:g.modifiedRange,options:g.modifiedRange.isEmpty()?YG:ZP});return c}),this._layout1=Qe(this,r=>{const a=this._editor.getModel(),l=this._edit.read(r);if(!l)return null;const c=l.range;let u=0;for(let p=c.startLineNumber;p<c.endLineNumberExclusive;p++){const _=a.getLineMaxColumn(p),b=this._editor.getOffsetForColumn(p,_);u=Math.max(u,b)}return{left:this._editor.getLayoutInfo().contentLeft+u}}),this._layout=Qe(this,r=>{const a=this._edit.read(r);if(!a)return null;const l=a.range,c=this._editorObs.scrollLeft.read(r),u=this._layout1.read(r).left+20-c,f=this._editor.getTopForLineNumber(l.startLineNumber)-this._editorObs.scrollTop.read(r),g=this._editor.getTopForLineNumber(l.endLineNumberExclusive)-this._editorObs.scrollTop.read(r),p=new Yw(u,f),_=new Yw(u,g),b=g-f,y=50,S=this._editor.getOption(67)*a.newLines.length,L=b-S,x=new Yw(u+y,f+L/2),k=new Yw(u+y,g-L/2);return{topCode:p,bottomCode:_,codeHeight:b,topEdit:x,bottomEdit:k,editHeight:S}});const s=Qe(this,r=>this._edit.read(r)!==void 0||this._userPrompt.read(r)!==void 0);this._register(Dg(this._elements.root,{display:Qe(this,r=>s.read(r)?"block":"none")})),this._register(zw(this._editor.getDomNode(),this._elements.root)),this._register(Qa(e).createOverlayWidget({domNode:this._elements.root,position:Cc(null),allowEditorOverflow:!1,minContentWidthInPx:Qe(r=>{var c;const a=(c=this._layout1.read(r))==null?void 0:c.left;if(a===void 0)return 0;const l=this._previewEditorObs.contentWidth.read(r);return a+l})})),this._previewEditor.setModel(this._previewTextModel),this._register(this._previewEditorObs.setDecorations(this._decorations)),this._register(bt(r=>{const a=this._layout.read(r);if(!a)return;const{topCode:l,bottomCode:c,topEdit:u,bottomEdit:f,editHeight:g}=a,p=10,_=0,b=40,y=new mZe().moveTo(l).lineTo(l.deltaX(p)).curveTo(l.deltaX(p+b),u.deltaX(-b-_),u.deltaX(-_)).lineTo(u).lineTo(f).lineTo(f.deltaX(-_)).curveTo(f.deltaX(-b-_),c.deltaX(p+b),c.deltaX(p)).lineTo(c).build();this._elements.path.setAttribute("d",y),this._elements.editorContainer.style.top=`${u.y}px`,this._elements.editorContainer.style.left=`${u.x}px`,this._elements.editorContainer.style.height=`${g}px`;const S=this._previewEditorObs.contentWidth.read(r);this._previewEditor.layout({height:g,width:S})})),this._promptEditor.setModel(this._promptTextModel),this._promptEditor.layout(),this._register(_Ze(pZe(this._userPrompt,r=>r??"",r=>r),Qa(this._promptEditor).value)),this._register(bt(r=>{const a=Qa(this._promptEditor).isFocused.read(r);this._elements.root.classList.toggle("focused",a)}))}};Sj=hZe([fZe(3,nt)],Sj);function pZe(o,e,t){return lI(void 0,i=>e(o.read(i)),(i,n)=>o.set(t(i),n))}class Yw{constructor(e,t){this.x=e,this.y=t}deltaX(e){return new Yw(this.x+e,this.y)}}class mZe{constructor(){this._data=""}moveTo(e){return this._data+=`M ${e.x} ${e.y} `,this}lineTo(e){return this._data+=`L ${e.x} ${e.y} `,this}curveTo(e,t,i){return this._data+=`C ${e.x} ${e.y} ${t.x} ${t.y} ${i.x} ${i.y} `,this}build(){return this._data}}function _Ze(o,e){const t=new le;return t.add(bt(i=>{const n=o.read(i);e.set(n,void 0)})),t.add(bt(i=>{const n=e.read(i);o.set(n,void 0)})),t}var vZe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},N9=function(o,e){return function(t,i){e(t,i,o)}},Qx,qb;let Lj=(qb=class extends X{static _createUniqueUri(){return st.from({scheme:"inline-edits",path:new Date().toString()+String(Qx._modelId++)})}constructor(e,t,i,n,s,r,a){super(),this.textModel=e,this._textModelVersionId=t,this._selection=i,this._debounceValue=n,this.languageFeaturesService=s,this._diffProviderFactoryService=r,this._modelService=a,this._forceUpdateExplicitlySignal=JS(this),this._selectedInlineCompletionId=Wt(this,void 0),this._isActive=Wt(this,!1),this._originalModel=vr(()=>this._modelService.createModel("",null,Qx._createUniqueUri())).keepObserved(this._store),this._modifiedModel=vr(()=>this._modelService.createModel("",null,Qx._createUniqueUri())).keepObserved(this._store),this._pinnedRange=new CZe(this.textModel,this._textModelVersionId),this.isPinned=this._pinnedRange.range.map(l=>!!l),this.userPrompt=Wt(this,void 0),this.inlineEdit=Qe(this,l=>{var c,u;return(u=(c=this._inlineEdit.read(l))==null?void 0:c.promiseResult.read(l))==null?void 0:u.data}),this._inlineEdit=Qe(this,l=>{const c=this.selectedInlineEdit.read(l);if(!c)return;const u=c.inlineCompletion.range;if(c.inlineCompletion.insertText.trim()==="")return;let f=c.inlineCompletion.insertText.split(/\r\n|\r|\n/);function g(y){var L;const S=((L=y[0].match(/^\s*/))==null?void 0:L[0])??"";return y.map(x=>x.replace(new RegExp("^"+S),""))}f=g(f);let _=this.textModel.getValueInRange(u).split(/\r\n|\r|\n/);_=g(_),this._originalModel.get().setValue(_.join(`
`)),this._modifiedModel.get().setValue(f.join(`
`));const b=this._diffProviderFactoryService.createDiffProvider({diffAlgorithm:"advanced"});return I4.fromFn(async()=>{const y=await b.computeDiff(this._originalModel.get(),this._modifiedModel.get(),{computeMoves:!1,ignoreTrimWhitespace:!1,maxComputationTimeMs:1e3},Mt.None);if(!y.identical)return new gZe(It.fromRangeInclusive(u),g(f),y.changes)})}),this._fetchStore=this._register(new le),this._inlineEditsFetchResult=FD(this,void 0),this._inlineEdits=Ml({owner:this,equalsFn:ZA},l=>{var c;return((c=this._inlineEditsFetchResult.read(l))==null?void 0:c.completions.map(u=>new bZe(u)))??[]}),this._fetchInlineEditsPromise=vue({owner:this,createEmptyChangeSummary:()=>({inlineCompletionTriggerKind:ru.Automatic}),handleChange:(l,c)=>(l.didChange(this._forceUpdateExplicitlySignal)&&(c.inlineCompletionTriggerKind=ru.Explicit),!0)},async(l,c)=>{this._fetchStore.clear(),this._forceUpdateExplicitlySignal.read(l),this._textModelVersionId.read(l);function u(b,y){return y(b)}const f=this._pinnedRange.range.read(l)??u(this._selection.read(l),b=>b.isEmpty()?void 0:b);if(!f){this._inlineEditsFetchResult.set(void 0,void 0),this.userPrompt.set(void 0,void 0);return}const g={triggerKind:c.inlineCompletionTriggerKind,selectedSuggestionInfo:void 0,userPrompt:this.userPrompt.read(l)},p=X9(this._fetchStore);await Sg(200,p);const _=await Ype(this.languageFeaturesService.inlineCompletionsProvider,f,this.textModel,g,p);p.isCancellationRequested||this._inlineEditsFetchResult.set(_,void 0)}),this._filteredInlineEditItems=Ml({owner:this,equalsFn:YA()},l=>this._inlineEdits.read(l)),this.selectedInlineCompletionIndex=Qe(this,l=>{const c=this._selectedInlineCompletionId.read(l),u=this._filteredInlineEditItems.read(l),f=this._selectedInlineCompletionId===void 0?-1:u.findIndex(g=>g.semanticId===c);return f===-1?(this._selectedInlineCompletionId.set(void 0,void 0),0):f}),this.selectedInlineEdit=Qe(this,l=>{const c=this._filteredInlineEditItems.read(l),u=this.selectedInlineCompletionIndex.read(l);return c[u]}),this._register(e0(this._fetchInlineEditsPromise))}async triggerExplicitly(e){gC(e,t=>{this._isActive.set(!0,t),this._forceUpdateExplicitlySignal.trigger(t)}),await this._fetchInlineEditsPromise.get()}stop(e){gC(e,t=>{this.userPrompt.set(void 0,t),this._isActive.set(!1,t),this._inlineEditsFetchResult.set(void 0,t),this._pinnedRange.setRange(void 0,t)})}async _deltaSelectedInlineCompletionIndex(e){await this.triggerExplicitly();const t=this._filteredInlineEditItems.get()||[];if(t.length>0){const i=(this.selectedInlineCompletionIndex.get()+e+t.length)%t.length;this._selectedInlineCompletionId.set(t[i].semanticId,void 0)}else this._selectedInlineCompletionId.set(void 0,void 0)}async next(){await this._deltaSelectedInlineCompletionIndex(1)}async previous(){await this._deltaSelectedInlineCompletionIndex(-1)}async accept(e){if(e.getModel()!==this.textModel)throw new wi;const t=this.selectedInlineEdit.get();t&&(e.pushUndoStop(),e.executeEdits("inlineSuggestion.accept",[t.inlineCompletion.toSingleTextEdit().toSingleEditOperation()]),this.stop())}},Qx=qb,qb._modelId=0,qb);Lj=Qx=vZe([N9(4,Ue),N9(5,CI),N9(6,un)],Lj);class bZe{constructor(e){this.inlineCompletion=e,this.semanticId=this.inlineCompletion.hash()}}class CZe extends X{constructor(e,t){super(),this._textModel=e,this._versionId=t,this._decorations=Wt(this,[]),this.range=Qe(this,i=>{this._versionId.read(i);const n=this._decorations.read(i)[0];return n?this._textModel.getDecorationRange(n)??null:null}),this._register(it(()=>{this._textModel.deltaDecorations(this._decorations.get(),[])}))}setRange(e,t){this._decorations.set(this._textModel.deltaDecorations(this._decorations.get(),e?[{range:e,options:{description:"trackedRange"}}]:[]),t)}}var yZe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Tx=function(o,e){return function(t,i){e(t,i,o)}},xj,Kb;let Ng=(Kb=class extends X{static get(e){return e.getContribution(xj.ID)}constructor(e,t,i,n,s,r){super(),this.editor=e,this._instantiationService=t,this._contextKeyService=i,this._debounceService=n,this._languageFeaturesService=s,this._configurationService=r,this._enabled=V9e("editor.inlineEdits.enabled",!1,this._configurationService),this._editorObs=Qa(this.editor),this._selection=Qe(this,a=>this._editorObs.cursorSelection.read(a)??new Ke(1,1,1,1)),this._debounceValue=this._debounceService.for(this._languageFeaturesService.inlineCompletionsProvider,"InlineEditsDebounce",{min:50,max:50}),this.model=vr(this,a=>{if(!this._enabled.read(a)||this._editorObs.isReadonly.read(a))return;const l=this._editorObs.model.read(a);return l?this._instantiationService.createInstance(Ga(Lj,a),l,this._editorObs.versionId,this._selection,this._debounceValue):void 0}),this._hadInlineEdit=uI(this,(a,l)=>{var c;return l||((c=this.model.read(a))==null?void 0:c.inlineEdit.read(a))!==void 0}),this._widget=vr(this,a=>{if(this._hadInlineEdit.read(a))return this._instantiationService.createInstance(Ga(Sj,a),this.editor,this.model.map((l,c)=>l==null?void 0:l.inlineEdit.read(c)),wZe(l=>{var c;return((c=this.model.read(l))==null?void 0:c.userPrompt)??Wt("empty","")}))}),this._register(Bd(FS,this._contextKeyService,a=>{var l;return!!((l=this.model.read(a))!=null&&l.inlineEdit.read(a))})),this._register(Bd(dZe,this._contextKeyService,a=>{var l;return!!((l=this.model.read(a))!=null&&l.isPinned.read(a))})),this.model.recomputeInitiallyAndOnChange(this._store),this._widget.recomputeInitiallyAndOnChange(this._store)}},xj=Kb,Kb.ID="editor.contrib.inlineEditsController",Kb);Ng=xj=yZe([Tx(1,nt),Tx(2,ht),Tx(3,Yl),Tx(4,Ue),Tx(5,Ht)],Ng);function wZe(o){return lI(void 0,e=>o(e).read(e),(e,t)=>{o(void 0).set(e,t)})}function RI(o){return{label:o.value,alias:o.original}}const SF=class SF extends Ve{constructor(){super({id:SF.ID,...RI(pt("action.inlineEdits.showNext","Show Next Inline Edit")),precondition:de.and(B.writable,FS),kbOpts:{weight:100,primary:606}})}async run(e,t){var n;const i=Ng.get(t);(n=i==null?void 0:i.model.get())==null||n.next()}};SF.ID=cZe;let kj=SF;const LF=class LF extends Ve{constructor(){super({id:LF.ID,...RI(pt("action.inlineEdits.showPrevious","Show Previous Inline Edit")),precondition:de.and(B.writable,FS),kbOpts:{weight:100,primary:604}})}async run(e,t){var n;const i=Ng.get(t);(n=i==null?void 0:i.model.get())==null||n.previous()}};LF.ID=lZe;let Dj=LF;class SZe extends Ve{constructor(){super({id:"editor.action.inlineEdits.trigger",...RI(pt("action.inlineEdits.trigger","Trigger Inline Edit")),precondition:B.writable})}async run(e,t){const i=Ng.get(t);await _ue(async n=>{var s;await((s=i==null?void 0:i.model.get())==null?void 0:s.triggerExplicitly(n))})}}class LZe extends Ve{constructor(){super({id:aZe,...RI(pt("action.inlineEdits.accept","Accept Inline Edit")),precondition:FS,menuOpts:{menuId:qe.InlineEditsActions,title:v("inlineEditsActions","Accept Inline Edit"),group:"primary",order:1,icon:Se.check},kbOpts:{primary:2058,weight:2e4,kbExpr:FS}})}async run(e,t){var n;t instanceof fd&&(t=t.getParentEditor());const i=Ng.get(t);i&&((n=i.model.get())==null||n.accept(i.editor),i.editor.focus())}}const xF=class xF extends Ve{constructor(){super({id:xF.ID,...RI(pt("action.inlineEdits.hide","Hide Inline Edit")),precondition:FS,kbOpts:{weight:100,primary:9}})}async run(e,t){const i=Ng.get(t);Mn(n=>{var s;(s=i==null?void 0:i.model.get())==null||s.stop(n)})}};xF.ID="editor.action.inlineEdits.hide";let Ej=xF;oi(Ng.ID,Ng,3);be(SZe);be(kj);be(Dj);be(LZe);be(Ej);const IC={Visible:new Pe("parameterHintsVisible",!1),MultipleSignatures:new Pe("parameterHintsMultipleSignatures",!1)};async function gme(o,e,t,i,n){const s=o.ordered(e);for(const r of s)try{const a=await r.provideSignatureHelp(e,t,n,i);if(a)return a}catch(a){rs(a)}}ii.registerCommand("_executeSignatureHelpProvider",async(o,...e)=>{const[t,i,n]=e;ui(st.isUri(t)),ui(G.isIPosition(i)),ui(typeof n=="string"||!n);const s=o.get(Ue),r=await o.get(Na).createModelReference(t);try{const a=await gme(s.signatureHelpProvider,r.object.textEditorModel,G.lift(i),{triggerKind:Eh.Invoke,isRetrigger:!1,triggerCharacter:n},Mt.None);return a?(setTimeout(()=>a.dispose(),0),a.value):void 0}finally{r.dispose()}});var Tp;(function(o){o.Default={type:0};class e{constructor(n,s){this.request=n,this.previouslyActiveHints=s,this.type=2}}o.Pending=e;class t{constructor(n){this.hints=n,this.type=1}}o.Active=t})(Tp||(Tp={}));const kF=class kF extends X{constructor(e,t,i=kF.DEFAULT_DELAY){super(),this._onChangedHints=this._register(new Y),this.onChangedHints=this._onChangedHints.event,this.triggerOnType=!1,this._state=Tp.Default,this._pendingTriggers=[],this._lastSignatureHelpResult=this._register(new Xs),this.triggerChars=new DA,this.retriggerChars=new DA,this.triggerId=0,this.editor=e,this.providers=t,this.throttledDelayer=new xc(i),this._register(this.editor.onDidBlurEditorWidget(()=>this.cancel())),this._register(this.editor.onDidChangeConfiguration(()=>this.onEditorConfigurationChange())),this._register(this.editor.onDidChangeModel(n=>this.onModelChanged())),this._register(this.editor.onDidChangeModelLanguage(n=>this.onModelChanged())),this._register(this.editor.onDidChangeCursorSelection(n=>this.onCursorChange(n))),this._register(this.editor.onDidChangeModelContent(n=>this.onModelContentChange())),this._register(this.providers.onDidChange(this.onModelChanged,this)),this._register(this.editor.onDidType(n=>this.onDidType(n))),this.onEditorConfigurationChange(),this.onModelChanged()}get state(){return this._state}set state(e){this._state.type===2&&this._state.request.cancel(),this._state=e}cancel(e=!1){this.state=Tp.Default,this.throttledDelayer.cancel(),e||this._onChangedHints.fire(void 0)}trigger(e,t){const i=this.editor.getModel();if(!i||!this.providers.has(i))return;const n=++this.triggerId;this._pendingTriggers.push(e),this.throttledDelayer.trigger(()=>this.doTrigger(n),t).catch(wt)}next(){if(this.state.type!==1)return;const e=this.state.hints.signatures.length,t=this.state.hints.activeSignature,i=t%e===e-1,n=this.editor.getOption(86).cycle;if((e<2||i)&&!n){this.cancel();return}this.updateActiveSignature(i&&n?0:t+1)}previous(){if(this.state.type!==1)return;const e=this.state.hints.signatures.length,t=this.state.hints.activeSignature,i=t===0,n=this.editor.getOption(86).cycle;if((e<2||i)&&!n){this.cancel();return}this.updateActiveSignature(i&&n?e-1:t-1)}updateActiveSignature(e){this.state.type===1&&(this.state=new Tp.Active({...this.state.hints,activeSignature:e}),this._onChangedHints.fire(this.state.hints))}async doTrigger(e){const t=this.state.type===1||this.state.type===2,i=this.getLastActiveHints();if(this.cancel(!0),this._pendingTriggers.length===0)return!1;const n=this._pendingTriggers.reduce(xZe);this._pendingTriggers=[];const s={triggerKind:n.triggerKind,triggerCharacter:n.triggerCharacter,isRetrigger:t,activeSignatureHelp:i};if(!this.editor.hasModel())return!1;const r=this.editor.getModel(),a=this.editor.getPosition();this.state=new Tp.Pending(Gs(l=>gme(this.providers,r,a,s,l)),i);try{const l=await this.state.request;return e!==this.triggerId?(l==null||l.dispose(),!1):!l||!l.value.signatures||l.value.signatures.length===0?(l==null||l.dispose(),this._lastSignatureHelpResult.clear(),this.cancel(),!1):(this.state=new Tp.Active(l.value),this._lastSignatureHelpResult.value=l,this._onChangedHints.fire(this.state.hints),!0)}catch(l){return e===this.triggerId&&(this.state=Tp.Default),wt(l),!1}}getLastActiveHints(){switch(this.state.type){case 1:return this.state.hints;case 2:return this.state.previouslyActiveHints;default:return}}get isTriggered(){return this.state.type===1||this.state.type===2||this.throttledDelayer.isTriggered()}onModelChanged(){this.cancel(),this.triggerChars.clear(),this.retriggerChars.clear();const e=this.editor.getModel();if(e)for(const t of this.providers.ordered(e)){for(const i of t.signatureHelpTriggerCharacters||[])if(i.length){const n=i.charCodeAt(0);this.triggerChars.add(n),this.retriggerChars.add(n)}for(const i of t.signatureHelpRetriggerCharacters||[])i.length&&this.retriggerChars.add(i.charCodeAt(0))}}onDidType(e){if(!this.triggerOnType)return;const t=e.length-1,i=e.charCodeAt(t);(this.triggerChars.has(i)||this.isTriggered&&this.retriggerChars.has(i))&&this.trigger({triggerKind:Eh.TriggerCharacter,triggerCharacter:e.charAt(t)})}onCursorChange(e){e.source==="mouse"?this.cancel():this.isTriggered&&this.trigger({triggerKind:Eh.ContentChange})}onModelContentChange(){this.isTriggered&&this.trigger({triggerKind:Eh.ContentChange})}onEditorConfigurationChange(){this.triggerOnType=this.editor.getOption(86).enabled,this.triggerOnType||this.cancel()}dispose(){this.cancel(!0),super.dispose()}};kF.DEFAULT_DELAY=120;let Ij=kF;function xZe(o,e){switch(e.triggerKind){case Eh.Invoke:return e;case Eh.ContentChange:return o;case Eh.TriggerCharacter:default:return e}}var kZe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},oM=function(o,e){return function(t,i){e(t,i,o)}},Tj;const Cl=xe,DZe=hn("parameter-hints-next",Se.chevronDown,v("parameterHintsNextIcon","Icon for show next parameter hint.")),EZe=hn("parameter-hints-previous",Se.chevronUp,v("parameterHintsPreviousIcon","Icon for show previous parameter hint."));var Gb;let Nj=(Gb=class extends X{constructor(e,t,i,n,s,r){super(),this.editor=e,this.model=t,this.telemetryService=r,this.renderDisposeables=this._register(new le),this.visible=!1,this.announcedLabel=null,this.allowEditorOverflow=!0,this.markdownRenderer=this._register(new kg({editor:e},s,n)),this.keyVisible=IC.Visible.bindTo(i),this.keyMultipleSignatures=IC.MultipleSignatures.bindTo(i)}createParameterHintDOMNodes(){const e=Cl(".editor-widget.parameter-hints-widget"),t=ge(e,Cl(".phwrapper"));t.tabIndex=-1;const i=ge(t,Cl(".controls")),n=ge(i,Cl(".button"+ut.asCSSSelector(EZe))),s=ge(i,Cl(".overloads")),r=ge(i,Cl(".button"+ut.asCSSSelector(DZe)));this._register(se(n,"click",g=>{Jt.stop(g),this.previous()})),this._register(se(r,"click",g=>{Jt.stop(g),this.next()}));const a=Cl(".body"),l=new nI(a,{alwaysConsumeMouseWheel:!0});this._register(l),t.appendChild(l.getDomNode());const c=ge(a,Cl(".signature")),u=ge(a,Cl(".docs"));e.style.userSelect="text",this.domNodes={element:e,signature:c,overloads:s,docs:u,scrollbar:l},this.editor.addContentWidget(this),this.hide(),this._register(this.editor.onDidChangeCursorSelection(g=>{this.visible&&this.editor.layoutContentWidget(this)}));const f=()=>{if(!this.domNodes)return;const g=this.editor.getOption(50),p=this.domNodes.element;p.style.fontSize=`${g.fontSize}px`,p.style.lineHeight=`${g.lineHeight/g.fontSize}`,p.style.setProperty("--vscode-parameterHintsWidget-editorFontFamily",g.fontFamily),p.style.setProperty("--vscode-parameterHintsWidget-editorFontFamilyDefault",Zr.fontFamily)};f(),this._register(Ee.chain(this.editor.onDidChangeConfiguration.bind(this.editor),g=>g.filter(p=>p.hasChanged(50)))(f)),this._register(this.editor.onDidLayoutChange(g=>this.updateMaxHeight())),this.updateMaxHeight()}show(){this.visible||(this.domNodes||this.createParameterHintDOMNodes(),this.keyVisible.set(!0),this.visible=!0,setTimeout(()=>{var e;(e=this.domNodes)==null||e.element.classList.add("visible")},100),this.editor.layoutContentWidget(this))}hide(){var e;this.renderDisposeables.clear(),this.visible&&(this.keyVisible.reset(),this.visible=!1,this.announcedLabel=null,(e=this.domNodes)==null||e.element.classList.remove("visible"),this.editor.layoutContentWidget(this))}getPosition(){return this.visible?{position:this.editor.getPosition(),preference:[1,2]}:null}render(e){if(this.renderDisposeables.clear(),!this.domNodes)return;const t=e.signatures.length>1;this.domNodes.element.classList.toggle("multiple",t),this.keyMultipleSignatures.set(t),this.domNodes.signature.innerText="",this.domNodes.docs.innerText="";const i=e.signatures[e.activeSignature];if(!i)return;const n=ge(this.domNodes.signature,Cl(".code")),s=i.parameters.length>0,r=i.activeParameter??e.activeParameter;if(s)this.renderParameters(n,i,r);else{const c=ge(n,Cl("span"));c.textContent=i.label}const a=i.parameters[r];if(a!=null&&a.documentation){const c=Cl("span.documentation");if(typeof a.documentation=="string")c.textContent=a.documentation;else{const u=this.renderMarkdownDocs(a.documentation);c.appendChild(u.element)}ge(this.domNodes.docs,Cl("p",{},c))}if(i.documentation!==void 0)if(typeof i.documentation=="string")ge(this.domNodes.docs,Cl("p",{},i.documentation));else{const c=this.renderMarkdownDocs(i.documentation);ge(this.domNodes.docs,c.element)}const l=this.hasDocs(i,a);if(this.domNodes.signature.classList.toggle("has-docs",l),this.domNodes.docs.classList.toggle("empty",!l),this.domNodes.overloads.textContent=String(e.activeSignature+1).padStart(e.signatures.length.toString().length,"0")+"/"+e.signatures.length,a){let c="";const u=i.parameters[r];Array.isArray(u.label)?c=i.label.substring(u.label[0],u.label[1]):c=u.label,u.documentation&&(c+=typeof u.documentation=="string"?`, ${u.documentation}`:`, ${u.documentation.value}`),i.documentation&&(c+=typeof i.documentation=="string"?`, ${i.documentation}`:`, ${i.documentation.value}`),this.announcedLabel!==c&&(ta(v("hint","{0}, hint",c)),this.announcedLabel=c)}this.editor.layoutContentWidget(this),this.domNodes.scrollbar.scanDomNode()}renderMarkdownDocs(e){const t=new uo,i=this.renderDisposeables.add(this.markdownRenderer.render(e,{asyncRenderCallback:()=>{var s;(s=this.domNodes)==null||s.scrollbar.scanDomNode()}}));i.element.classList.add("markdown-docs");const n=t.elapsed();return n>300&&this.telemetryService.publicLog2("parameterHints.parseMarkdown",{renderDuration:n}),i}hasDocs(e,t){return!!(t&&typeof t.documentation=="string"&&Kp(t.documentation).length>0||t&&typeof t.documentation=="object"&&Kp(t.documentation).value.length>0||e.documentation&&typeof e.documentation=="string"&&Kp(e.documentation).length>0||e.documentation&&typeof e.documentation=="object"&&Kp(e.documentation.value).length>0)}renderParameters(e,t,i){const[n,s]=this.getParameterLabelOffsets(t,i),r=document.createElement("span");r.textContent=t.label.substring(0,n);const a=document.createElement("span");a.textContent=t.label.substring(n,s),a.className="parameter active";const l=document.createElement("span");l.textContent=t.label.substring(s),ge(e,r,a,l)}getParameterLabelOffsets(e,t){const i=e.parameters[t];if(i){if(Array.isArray(i.label))return i.label;if(i.label.length){const n=new RegExp(`(\\W|^)${Ul(i.label)}(?=\\W|$)`,"g");n.test(e.label);const s=n.lastIndex-i.label.length;return s>=0?[s,n.lastIndex]:[0,0]}else return[0,0]}else return[0,0]}next(){this.editor.focus(),this.model.next()}previous(){this.editor.focus(),this.model.previous()}getDomNode(){return this.domNodes||this.createParameterHintDOMNodes(),this.domNodes.element}getId(){return Tj.ID}updateMaxHeight(){if(!this.domNodes)return;const t=`${Math.max(this.editor.getLayoutInfo().height/4,250)}px`;this.domNodes.element.style.maxHeight=t;const i=this.domNodes.element.getElementsByClassName("phwrapper");i.length&&(i[0].style.maxHeight=t)}},Tj=Gb,Gb.ID="editor.widget.parameterHintsWidget",Gb);Nj=Tj=kZe([oM(2,ht),oM(3,Ma),oM(4,In),oM(5,tr)],Nj);W("editorHoverWidget.highlightForeground",Rw,v("editorHoverWidgetHighlightForeground","Foreground color of the active item in the parameter hint."));var IZe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Rae=function(o,e){return function(t,i){e(t,i,o)}},Rj,Yb;let BS=(Yb=class extends X{static get(e){return e.getContribution(Rj.ID)}constructor(e,t,i){super(),this.editor=e,this.model=this._register(new Ij(e,i.signatureHelpProvider)),this._register(this.model.onChangedHints(n=>{var s;n?(this.widget.value.show(),this.widget.value.render(n)):(s=this.widget.rawValue)==null||s.hide()})),this.widget=new fu(()=>this._register(t.createInstance(Nj,this.editor,this.model)))}cancel(){this.model.cancel()}previous(){var e;(e=this.widget.rawValue)==null||e.previous()}next(){var e;(e=this.widget.rawValue)==null||e.next()}trigger(e){this.model.trigger(e,0)}},Rj=Yb,Yb.ID="editor.controller.parameterHints",Yb);BS=Rj=IZe([Rae(1,nt),Rae(2,Ue)],BS);class TZe extends Ve{constructor(){super({id:"editor.action.triggerParameterHints",label:v("parameterHints.trigger.label","Trigger Parameter Hints"),alias:"Trigger Parameter Hints",precondition:B.hasSignatureHelpProvider,kbOpts:{kbExpr:B.editorTextFocus,primary:3082,weight:100}})}run(e,t){const i=BS.get(t);i==null||i.trigger({triggerKind:Eh.Invoke})}}oi(BS.ID,BS,2);be(TZe);const qY=175,KY=Bs.bindToContribution(BS.get);Re(new KY({id:"closeParameterHints",precondition:IC.Visible,handler:o=>o.cancel(),kbOpts:{weight:qY,kbExpr:B.focus,primary:9,secondary:[1033]}}));Re(new KY({id:"showPrevParameterHint",precondition:de.and(IC.Visible,IC.MultipleSignatures),handler:o=>o.previous(),kbOpts:{weight:qY,kbExpr:B.focus,primary:16,secondary:[528],mac:{primary:16,secondary:[528,302]}}}));Re(new KY({id:"showNextParameterHint",precondition:de.and(IC.Visible,IC.MultipleSignatures),handler:o=>o.next(),kbOpts:{weight:qY,kbExpr:B.focus,primary:18,secondary:[530],mac:{primary:18,secondary:[530,300]}}}));var NZe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},RZe=function(o,e){return function(t,i){e(t,i,o)}};class MZe{constructor(e){this.instantiationService=e}init(...e){}}function AZe(o,e){return class extends e{constructor(){super(...arguments),this._autorun=void 0}init(...i){this._autorun=ka((n,s)=>{const r=Ga(o(),n);s.add(this.instantiationService.createInstance(r,...i))})}dispose(){var i;(i=this._autorun)==null||i.dispose()}}}function PZe(o){return Z4()?AZe(o,Mj):o()}let Mj=class extends MZe{constructor(e,t){super(t),this.init(e)}};Mj=NZe([RZe(1,nt)],Mj);oi(TE.ID,PZe(()=>TE),0);W("editor.placeholder.foreground",T2e,v("placeholderForeground","Foreground color of the placeholder text in the editor."));var OZe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},rM=function(o,e){return function(t,i){e(t,i,o)}};const f0=new Pe("renameInputVisible",!1,v("renameInputVisible","Whether the rename input widget is visible"));new Pe("renameInputFocused",!1,v("renameInputFocused","Whether the rename input widget is focused"));let Aj=class{constructor(e,t,i,n,s,r){this._editor=e,this._acceptKeybindings=t,this._themeService=i,this._keybindingService=n,this._logService=r,this.allowEditorOverflow=!0,this._disposables=new le,this._visibleContextKey=f0.bindTo(s),this._isEditingRenameCandidate=!1,this._nRenameSuggestionsInvocations=0,this._hadAutomaticRenameSuggestionsInvocation=!1,this._candidates=new Set,this._beforeFirstInputFieldEditSW=new uo,this._inputWithButton=new FZe,this._disposables.add(this._inputWithButton),this._editor.addContentWidget(this),this._disposables.add(this._editor.onDidChangeConfiguration(a=>{a.hasChanged(50)&&this._updateFont()})),this._disposables.add(i.onDidColorThemeChange(this._updateStyles,this))}dispose(){this._disposables.dispose(),this._editor.removeContentWidget(this)}getId(){return"__renameInputWidget"}getDomNode(){return this._domNode||(this._domNode=document.createElement("div"),this._domNode.className="monaco-editor rename-box",this._domNode.appendChild(this._inputWithButton.domNode),this._renameCandidateListView=this._disposables.add(new GY(this._domNode,{fontInfo:this._editor.getOption(50),onFocusChange:e=>{this._inputWithButton.input.value=e,this._isEditingRenameCandidate=!1},onSelectionChange:()=>{this._isEditingRenameCandidate=!1,this.acceptInput(!1)}})),this._disposables.add(this._inputWithButton.onDidInputChange(()=>{var e,t,i;((e=this._renameCandidateListView)==null?void 0:e.focusedCandidate)!==void 0&&(this._isEditingRenameCandidate=!0),this._timeBeforeFirstInputFieldEdit??(this._timeBeforeFirstInputFieldEdit=this._beforeFirstInputFieldEditSW.elapsed()),((t=this._renameCandidateProvidersCts)==null?void 0:t.token.isCancellationRequested)===!1&&this._renameCandidateProvidersCts.cancel(),(i=this._renameCandidateListView)==null||i.clearFocus()})),this._label=document.createElement("div"),this._label.className="rename-label",this._domNode.appendChild(this._label),this._updateFont(),this._updateStyles(this._themeService.getColorTheme())),this._domNode}_updateStyles(e){if(!this._domNode)return;const t=e.getColor(GS),i=e.getColor(Nde);this._domNode.style.backgroundColor=String(e.getColor(Bl)??""),this._domNode.style.boxShadow=t?` 0 0 8px 2px ${t}`:"",this._domNode.style.border=i?`1px solid ${i}`:"",this._domNode.style.color=String(e.getColor(Ade)??"");const n=e.getColor(Pde);this._inputWithButton.domNode.style.backgroundColor=String(e.getColor(KV)??""),this._inputWithButton.input.style.backgroundColor=String(e.getColor(KV)??""),this._inputWithButton.domNode.style.borderWidth=n?"1px":"0px",this._inputWithButton.domNode.style.borderStyle=n?"solid":"none",this._inputWithButton.domNode.style.borderColor=(n==null?void 0:n.toString())??"none"}_updateFont(){if(this._domNode===void 0)return;ui(this._label!==void 0,"RenameWidget#_updateFont: _label must not be undefined given _domNode is defined"),this._editor.applyFontInfo(this._inputWithButton.input);const e=this._editor.getOption(50);this._label.style.fontSize=`${this._computeLabelFontSize(e.fontSize)}px`}_computeLabelFontSize(e){return e*.8}getPosition(){if(!this._visible||!this._editor.hasModel()||!this._editor.getDomNode())return null;const e=Wm(this.getDomNode().ownerDocument.body),t=os(this._editor.getDomNode()),i=this._getTopForPosition();this._nPxAvailableAbove=i+t.top,this._nPxAvailableBelow=e.height-this._nPxAvailableAbove;const n=this._editor.getOption(67),{totalHeight:s}=NE.getLayoutInfo({lineHeight:n}),r=this._nPxAvailableBelow>s*6?[2,1]:[1,2];return{position:this._position,preference:r}}beforeRender(){var i,n;const[e,t]=this._acceptKeybindings;return this._label.innerText=v({key:"label",comment:['placeholders are keybindings, e.g "F2 to Rename, Shift+F2 to Preview"']},"{0} to Rename, {1} to Preview",(i=this._keybindingService.lookupKeybinding(e))==null?void 0:i.getLabel(),(n=this._keybindingService.lookupKeybinding(t))==null?void 0:n.getLabel()),this._domNode.style.minWidth="200px",null}afterRender(e){if(e===null){this.cancelInput(!0,"afterRender (because position is null)");return}if(!this._editor.hasModel()||!this._editor.getDomNode())return;ui(this._renameCandidateListView),ui(this._nPxAvailableAbove!==void 0),ui(this._nPxAvailableBelow!==void 0);const t=Jf(this._inputWithButton.domNode),i=Jf(this._label);let n;e===2?n=this._nPxAvailableBelow:n=this._nPxAvailableAbove,this._renameCandidateListView.layout({height:n-i-t,width:qa(this._inputWithButton.domNode)})}acceptInput(e){var t;this._trace("invoking acceptInput"),(t=this._currentAcceptInput)==null||t.call(this,e)}cancelInput(e,t){var i;(i=this._currentCancelInput)==null||i.call(this,e)}focusNextRenameSuggestion(){var e;(e=this._renameCandidateListView)!=null&&e.focusNext()||(this._inputWithButton.input.value=this._currentName)}focusPreviousRenameSuggestion(){var e;(e=this._renameCandidateListView)!=null&&e.focusPrevious()||(this._inputWithButton.input.value=this._currentName)}getInput(e,t,i,n,s){const{start:r,end:a}=this._getSelection(e,t);this._renameCts=s;const l=new le;this._nRenameSuggestionsInvocations=0,this._hadAutomaticRenameSuggestionsInvocation=!1,n===void 0?this._inputWithButton.button.style.display="none":(this._inputWithButton.button.style.display="flex",this._requestRenameCandidatesOnce=n,this._requestRenameCandidates(t,!1),l.add(se(this._inputWithButton.button,"click",()=>this._requestRenameCandidates(t,!0))),l.add(se(this._inputWithButton.button,Le.KEY_DOWN,u=>{const f=new Zi(u);(f.equals(3)||f.equals(10))&&(f.stopPropagation(),f.preventDefault(),this._requestRenameCandidates(t,!0))}))),this._isEditingRenameCandidate=!1,this._domNode.classList.toggle("preview",i),this._position=new G(e.startLineNumber,e.startColumn),this._currentName=t,this._inputWithButton.input.value=t,this._inputWithButton.input.setAttribute("selectionStart",r.toString()),this._inputWithButton.input.setAttribute("selectionEnd",a.toString()),this._inputWithButton.input.size=Math.max((e.endColumn-e.startColumn)*1.1,20),this._beforeFirstInputFieldEditSW.reset(),l.add(it(()=>{this._renameCts=void 0,s.dispose(!0)})),l.add(it(()=>{this._renameCandidateProvidersCts!==void 0&&(this._renameCandidateProvidersCts.dispose(!0),this._renameCandidateProvidersCts=void 0)})),l.add(it(()=>this._candidates.clear()));const c=new zS;return c.p.finally(()=>{l.dispose(),this._hide()}),this._currentCancelInput=u=>{var f;return this._trace("invoking _currentCancelInput"),this._currentAcceptInput=void 0,this._currentCancelInput=void 0,(f=this._renameCandidateListView)==null||f.clearCandidates(),c.complete(u),!0},this._currentAcceptInput=u=>{this._trace("invoking _currentAcceptInput"),ui(this._renameCandidateListView!==void 0);const f=this._renameCandidateListView.nCandidates;let g,p;const _=this._renameCandidateListView.focusedCandidate;if(_!==void 0?(this._trace("using new name from renameSuggestion"),g=_,p={k:"renameSuggestion"}):(this._trace("using new name from inputField"),g=this._inputWithButton.input.value,p=this._isEditingRenameCandidate?{k:"userEditedRenameSuggestion"}:{k:"inputField"}),g===t||g.trim().length===0){this.cancelInput(!0,"_currentAcceptInput (because newName === value || newName.trim().length === 0)");return}this._currentAcceptInput=void 0,this._currentCancelInput=void 0,this._renameCandidateListView.clearCandidates(),c.complete({newName:g,wantsPreview:i&&u,stats:{source:p,nRenameSuggestions:f,timeBeforeFirstInputFieldEdit:this._timeBeforeFirstInputFieldEdit,nRenameSuggestionsInvocations:this._nRenameSuggestionsInvocations,hadAutomaticRenameSuggestionsInvocation:this._hadAutomaticRenameSuggestionsInvocation}})},l.add(s.token.onCancellationRequested(()=>this.cancelInput(!0,"cts.token.onCancellationRequested"))),l.add(this._editor.onDidBlurEditorWidget(()=>{var u;return this.cancelInput(!((u=this._domNode)!=null&&u.ownerDocument.hasFocus()),"editor.onDidBlurEditorWidget")})),this._show(),c.p}_requestRenameCandidates(e,t){if(this._requestRenameCandidatesOnce!==void 0&&(this._renameCandidateProvidersCts!==void 0&&this._renameCandidateProvidersCts.dispose(!0),ui(this._renameCts),this._inputWithButton.buttonState!=="stop")){this._renameCandidateProvidersCts=new An;const i=t?fD.Invoke:fD.Automatic,n=this._requestRenameCandidatesOnce(i,this._renameCandidateProvidersCts.token);if(n.length===0){this._inputWithButton.setSparkleButton();return}t||(this._hadAutomaticRenameSuggestionsInvocation=!0),this._nRenameSuggestionsInvocations+=1,this._inputWithButton.setStopButton(),this._updateRenameCandidates(n,e,this._renameCts.token)}}_getSelection(e,t){ui(this._editor.hasModel());const i=this._editor.getSelection();let n=0,s=t.length;return!M.isEmpty(i)&&!M.spansMultipleLines(i)&&M.containsRange(e,i)&&(n=Math.max(0,i.startColumn-e.startColumn),s=Math.min(e.endColumn,i.endColumn)-e.startColumn),{start:n,end:s}}_show(){this._trace("invoking _show"),this._editor.revealLineInCenterIfOutsideViewport(this._position.lineNumber,0),this._visible=!0,this._visibleContextKey.set(!0),this._editor.layoutContentWidget(this),setTimeout(()=>{this._inputWithButton.input.focus(),this._inputWithButton.input.setSelectionRange(parseInt(this._inputWithButton.input.getAttribute("selectionStart")),parseInt(this._inputWithButton.input.getAttribute("selectionEnd")))},100)}async _updateRenameCandidates(e,t,i){const n=(...c)=>this._trace("_updateRenameCandidates",...c);n("start");const s=await QE(Promise.allSettled(e),i);if(this._inputWithButton.setSparkleButton(),s===void 0){n("returning early - received updateRenameCandidates results - undefined");return}const r=s.flatMap(c=>c.status==="fulfilled"&&Dh(c.value)?c.value:[]);n(`received updateRenameCandidates results - total (unfiltered) ${r.length} candidates.`);const a=bg(r,c=>c.newSymbolName);n(`distinct candidates - ${a.length} candidates.`);const l=a.filter(({newSymbolName:c})=>c.trim().length>0&&c!==this._inputWithButton.input.value&&c!==t&&!this._candidates.has(c));if(n(`valid distinct candidates - ${r.length} candidates.`),l.forEach(c=>this._candidates.add(c.newSymbolName)),l.length<1){n("returning early - no valid distinct candidates");return}n("setting candidates"),this._renameCandidateListView.setCandidates(l),n("asking editor to re-layout"),this._editor.layoutContentWidget(this)}_hide(){this._trace("invoked _hide"),this._visible=!1,this._visibleContextKey.reset(),this._editor.layoutContentWidget(this)}_getTopForPosition(){const e=this._editor.getVisibleRanges();let t;return e.length>0?t=e[0].startLineNumber:(this._logService.warn("RenameWidget#_getTopForPosition: this should not happen - visibleRanges is empty"),t=Math.max(1,this._position.lineNumber-5)),this._editor.getTopForLineNumber(this._position.lineNumber)-this._editor.getTopForLineNumber(t)}_trace(...e){this._logService.trace("RenameWidget",...e)}};Aj=OZe([rM(2,Ws),rM(3,Di),rM(4,ht),rM(5,Oo)],Aj);class GY{constructor(e,t){this._disposables=new le,this._availableHeight=0,this._minimumWidth=0,this._lineHeight=t.fontInfo.lineHeight,this._typicalHalfwidthCharacterWidth=t.fontInfo.typicalHalfwidthCharacterWidth,this._listContainer=document.createElement("div"),this._listContainer.className="rename-box rename-candidate-list-container",e.appendChild(this._listContainer),this._listWidget=GY._createListWidget(this._listContainer,this._candidateViewHeight,t.fontInfo),this._listWidget.onDidChangeFocus(i=>{i.elements.length===1&&t.onFocusChange(i.elements[0].newSymbolName)},this._disposables),this._listWidget.onDidChangeSelection(i=>{i.elements.length===1&&t.onSelectionChange()},this._disposables),this._disposables.add(this._listWidget.onDidBlur(i=>{this._listWidget.setFocus([])})),this._listWidget.style(FC({listInactiveFocusForeground:ID,listInactiveFocusBackground:TD}))}dispose(){this._listWidget.dispose(),this._disposables.dispose()}layout({height:e,width:t}){this._availableHeight=e,this._minimumWidth=t}setCandidates(e){this._listWidget.splice(0,0,e);const t=this._pickListHeight(this._listWidget.length),i=this._pickListWidth(e);this._listWidget.layout(t,i),this._listContainer.style.height=`${t}px`,this._listContainer.style.width=`${i}px`,Oh(v("renameSuggestionsReceivedAria","Received {0} rename suggestions",e.length))}clearCandidates(){this._listContainer.style.height="0px",this._listContainer.style.width="0px",this._listWidget.splice(0,this._listWidget.length,[])}get nCandidates(){return this._listWidget.length}get focusedCandidate(){if(this._listWidget.length===0)return;const e=this._listWidget.getSelectedElements()[0];if(e!==void 0)return e.newSymbolName;const t=this._listWidget.getFocusedElements()[0];if(t!==void 0)return t.newSymbolName}focusNext(){if(this._listWidget.length===0)return!1;const e=this._listWidget.getFocus();if(e.length===0)return this._listWidget.focusFirst(),this._listWidget.reveal(0),!0;if(e[0]===this._listWidget.length-1)return this._listWidget.setFocus([]),this._listWidget.reveal(0),!1;{this._listWidget.focusNext();const t=this._listWidget.getFocus()[0];return this._listWidget.reveal(t),!0}}focusPrevious(){if(this._listWidget.length===0)return!1;const e=this._listWidget.getFocus();if(e.length===0){this._listWidget.focusLast();const t=this._listWidget.getFocus()[0];return this._listWidget.reveal(t),!0}else{if(e[0]===0)return this._listWidget.setFocus([]),!1;{this._listWidget.focusPrevious();const t=this._listWidget.getFocus()[0];return this._listWidget.reveal(t),!0}}}clearFocus(){this._listWidget.setFocus([])}get _candidateViewHeight(){const{totalHeight:e}=NE.getLayoutInfo({lineHeight:this._lineHeight});return e}_pickListHeight(e){const t=this._candidateViewHeight*e;return Math.min(t,this._availableHeight,this._candidateViewHeight*7)}_pickListWidth(e){const t=Math.ceil(Math.max(...e.map(n=>n.newSymbolName.length))*this._typicalHalfwidthCharacterWidth);return Math.max(this._minimumWidth,25+t+10)}static _createListWidget(e,t,i){const n=new class{getTemplateId(r){return"candidate"}getHeight(r){return t}},s=new class{constructor(){this.templateId="candidate"}renderTemplate(r){return new NE(r,i)}renderElement(r,a,l){l.populate(r)}disposeTemplate(r){r.dispose()}};return new Xl("NewSymbolNameCandidates",e,n,[s],{keyboardSupport:!1,mouseSupport:!0,multipleSelectionSupport:!1})}}class FZe{constructor(){this._onDidInputChange=new Y,this.onDidInputChange=this._onDidInputChange.event,this._disposables=new le}get domNode(){return this._domNode||(this._domNode=document.createElement("div"),this._domNode.className="rename-input-with-button",this._domNode.style.display="flex",this._domNode.style.flexDirection="row",this._domNode.style.alignItems="center",this._inputNode=document.createElement("input"),this._inputNode.className="rename-input",this._inputNode.type="text",this._inputNode.style.border="none",this._inputNode.setAttribute("aria-label",v("renameAriaLabel","Rename input. Type new name and press Enter to commit.")),this._domNode.appendChild(this._inputNode),this._buttonNode=document.createElement("div"),this._buttonNode.className="rename-suggestions-button",this._buttonNode.setAttribute("tabindex","0"),this._buttonGenHoverText=v("generateRenameSuggestionsButton","Generate new name suggestions"),this._buttonCancelHoverText=v("cancelRenameSuggestionsButton","Cancel"),this._buttonHover=Su().setupManagedHover(sa("element"),this._buttonNode,this._buttonGenHoverText),this._disposables.add(this._buttonHover),this._domNode.appendChild(this._buttonNode),this._disposables.add(se(this.input,Le.INPUT,()=>this._onDidInputChange.fire())),this._disposables.add(se(this.input,Le.KEY_DOWN,e=>{const t=new Zi(e);(t.keyCode===15||t.keyCode===17)&&this._onDidInputChange.fire()})),this._disposables.add(se(this.input,Le.CLICK,()=>this._onDidInputChange.fire())),this._disposables.add(se(this.input,Le.FOCUS,()=>{this.domNode.style.outlineWidth="1px",this.domNode.style.outlineStyle="solid",this.domNode.style.outlineOffset="-1px",this.domNode.style.outlineColor="var(--vscode-focusBorder)"})),this._disposables.add(se(this.input,Le.BLUR,()=>{this.domNode.style.outline="none"}))),this._domNode}get input(){return ui(this._inputNode),this._inputNode}get button(){return ui(this._buttonNode),this._buttonNode}get buttonState(){return this._buttonState}setSparkleButton(){var e;this._buttonState="sparkle",this._sparkleIcon??(this._sparkleIcon=uC(Se.sparkle)),bo(this.button),this.button.appendChild(this._sparkleIcon),this.button.setAttribute("aria-label","Generating new name suggestions"),(e=this._buttonHover)==null||e.update(this._buttonGenHoverText),this.input.focus()}setStopButton(){var e;this._buttonState="stop",this._stopIcon??(this._stopIcon=uC(Se.primitiveSquare)),bo(this.button),this.button.appendChild(this._stopIcon),this.button.setAttribute("aria-label","Cancel generating new name suggestions"),(e=this._buttonHover)==null||e.update(this._buttonCancelHoverText),this.input.focus()}dispose(){this._disposables.dispose()}}const sD=class sD{constructor(e,t){this._domNode=document.createElement("div"),this._domNode.className="rename-box rename-candidate",this._domNode.style.display="flex",this._domNode.style.columnGap="5px",this._domNode.style.alignItems="center",this._domNode.style.height=`${t.lineHeight}px`,this._domNode.style.padding=`${sD._PADDING}px`;const i=document.createElement("div");i.style.display="flex",i.style.alignItems="center",i.style.width=i.style.height=`${t.lineHeight*.8}px`,this._domNode.appendChild(i),this._icon=uC(Se.sparkle),this._icon.style.display="none",i.appendChild(this._icon),this._label=document.createElement("div"),yo(this._label,t),this._domNode.appendChild(this._label),e.appendChild(this._domNode)}populate(e){this._updateIcon(e),this._updateLabel(e)}_updateIcon(e){var i;const t=!!((i=e.tags)!=null&&i.includes(s8.AIGenerated));this._icon.style.display=t?"inherit":"none"}_updateLabel(e){this._label.innerText=e.newSymbolName}static getLayoutInfo({lineHeight:e}){return{totalHeight:e+sD._PADDING*2}}dispose(){}};sD._PADDING=2;let NE=sD;var BZe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Lp=function(o,e){return function(t,i){e(t,i,o)}},Pj;class YY{constructor(e,t,i){this.model=e,this.position=t,this._providerRenameIdx=0,this._providers=i.ordered(e)}hasProvider(){return this._providers.length>0}async resolveRenameLocation(e){const t=[];for(this._providerRenameIdx=0;this._providerRenameIdx<this._providers.length;this._providerRenameIdx++){const n=this._providers[this._providerRenameIdx];if(!n.resolveRenameLocation)break;const s=await n.resolveRenameLocation(this.model,this.position,e);if(s){if(s.rejectReason){t.push(s.rejectReason);continue}return s}}this._providerRenameIdx=0;const i=this.model.getWordAtPosition(this.position);return i?{range:new M(this.position.lineNumber,i.startColumn,this.position.lineNumber,i.endColumn),text:i.word,rejectReason:t.length>0?t.join(`
`):void 0}:{range:M.fromPositions(this.position),text:"",rejectReason:t.length>0?t.join(`
`):void 0}}async provideRenameEdits(e,t){return this._provideRenameEdits(e,this._providerRenameIdx,[],t)}async _provideRenameEdits(e,t,i,n){const s=this._providers[t];if(!s)return{edits:[],rejectReason:i.join(`
`)};const r=await s.provideRenameEdits(this.model,this.position,e,n);if(r){if(r.rejectReason)return this._provideRenameEdits(e,t+1,i.concat(r.rejectReason),n)}else return this._provideRenameEdits(e,t+1,i.concat(v("no result","No result.")),n);return r}}async function WZe(o,e,t,i){const n=new YY(e,t,o),s=await n.resolveRenameLocation(Mt.None);return s!=null&&s.rejectReason?{edits:[],rejectReason:s.rejectReason}:n.provideRenameEdits(i,Mt.None)}var Zb;let Qm=(Zb=class{static get(e){return e.getContribution(Pj.ID)}constructor(e,t,i,n,s,r,a,l,c){this.editor=e,this._instaService=t,this._notificationService=i,this._bulkEditService=n,this._progressService=s,this._logService=r,this._configService=a,this._languageFeaturesService=l,this._telemetryService=c,this._disposableStore=new le,this._cts=new An,this._renameWidget=this._disposableStore.add(this._instaService.createInstance(Aj,this.editor,["acceptRenameInput","acceptRenameInputWithPreview"]))}dispose(){this._disposableStore.dispose(),this._cts.dispose(!0)}async run(){var _,b;const e=this._logService.trace.bind(this._logService,"[rename]");if(this._cts.dispose(!0),this._cts=new An,!this.editor.hasModel()){e("editor has no model");return}const t=this.editor.getPosition(),i=new YY(this.editor.getModel(),t,this._languageFeaturesService.renameProvider);if(!i.hasProvider()){e("skeleton has no provider");return}const n=new Gm(this.editor,5,void 0,this._cts.token);let s;try{e("resolving rename location");const y=i.resolveRenameLocation(n.token);this._progressService.showWhile(y,250),s=await y,e("resolved rename location")}catch(y){y instanceof ad?e("resolve rename location cancelled",JSON.stringify(y,null,"	")):(e("resolve rename location failed",y instanceof Error?y:JSON.stringify(y,null,"	")),(typeof y=="string"||uu(y))&&((_=nl.get(this.editor))==null||_.showMessage(y||v("resolveRenameLocationFailed","An unknown error occurred while resolving rename location"),t)));return}finally{n.dispose()}if(!s){e("returning early - no loc");return}if(s.rejectReason){e(`returning early - rejected with reason: ${s.rejectReason}`,s.rejectReason),(b=nl.get(this.editor))==null||b.showMessage(s.rejectReason,t);return}if(n.token.isCancellationRequested){e("returning early - cts1 cancelled");return}const r=new Gm(this.editor,5,s.range,this._cts.token),a=this.editor.getModel(),l=this._languageFeaturesService.newSymbolNamesProvider.all(a),c=await Promise.all(l.map(async y=>[y,await y.supportsAutomaticNewSymbolNamesTriggerKind??!1])),u=(y,S)=>{let L=c.slice();return y===fD.Automatic&&(L=L.filter(([x,k])=>k)),L.map(([x])=>x.provideNewSymbolNames(a,s.range,y,S))};e("creating rename input field and awaiting its result");const f=this._bulkEditService.hasPreviewHandler()&&this._configService.getValue(this.editor.getModel().uri,"editor.rename.enablePreview"),g=await this._renameWidget.getInput(s.range,s.text,f,l.length>0?u:void 0,r);if(e("received response from rename input field"),l.length>0&&this._reportTelemetry(l.length,a.getLanguageId(),g),typeof g=="boolean"){e(`returning early - rename input field response - ${g}`),g&&this.editor.focus(),r.dispose();return}this.editor.focus(),e("requesting rename edits");const p=QE(i.provideRenameEdits(g.newName,r.token),r.token).then(async y=>{if(!y){e("returning early - no rename edits result");return}if(!this.editor.hasModel()){e("returning early - no model after rename edits are provided");return}if(y.rejectReason){e(`returning early - rejected with reason: ${y.rejectReason}`),this._notificationService.info(y.rejectReason);return}this.editor.setSelection(M.fromPositions(this.editor.getSelection().getPosition())),e("applying edits"),this._bulkEditService.apply(y,{editor:this.editor,showPreview:g.wantsPreview,label:v("label","Renaming '{0}' to '{1}'",s==null?void 0:s.text,g.newName),code:"undoredo.rename",quotableLabel:v("quotableLabel","Renaming {0} to {1}",s==null?void 0:s.text,g.newName),respectAutoSaveConfig:!0}).then(S=>{e("edits applied"),S.ariaSummary&&ta(v("aria","Successfully renamed '{0}' to '{1}'. Summary: {2}",s.text,g.newName,S.ariaSummary))}).catch(S=>{e(`error when applying edits ${JSON.stringify(S,null,"	")}`),this._notificationService.error(v("rename.failedApply","Rename failed to apply edits")),this._logService.error(S)})},y=>{e("error when providing rename edits",JSON.stringify(y,null,"	")),this._notificationService.error(v("rename.failed","Rename failed to compute edits")),this._logService.error(y)}).finally(()=>{r.dispose()});return e("returning rename operation"),this._progressService.showWhile(p,250),p}acceptRenameInput(e){this._renameWidget.acceptInput(e)}cancelRenameInput(){this._renameWidget.cancelInput(!0,"cancelRenameInput command")}focusNextRenameSuggestion(){this._renameWidget.focusNextRenameSuggestion()}focusPreviousRenameSuggestion(){this._renameWidget.focusPreviousRenameSuggestion()}_reportTelemetry(e,t,i){const n=typeof i=="boolean"?{kind:"cancelled",languageId:t,nRenameSuggestionProviders:e}:{kind:"accepted",languageId:t,nRenameSuggestionProviders:e,source:i.stats.source.k,nRenameSuggestions:i.stats.nRenameSuggestions,timeBeforeFirstInputFieldEdit:i.stats.timeBeforeFirstInputFieldEdit,wantsPreview:i.wantsPreview,nRenameSuggestionsInvocations:i.stats.nRenameSuggestionsInvocations,hadAutomaticRenameSuggestionsInvocation:i.stats.hadAutomaticRenameSuggestionsInvocation};this._telemetryService.publicLog2("renameInvokedEvent",n)}},Pj=Zb,Zb.ID="editor.contrib.renameController",Zb);Qm=Pj=BZe([Lp(1,nt),Lp(2,fs),Lp(3,rI),Lp(4,i_),Lp(5,Oo),Lp(6,c4),Lp(7,Ue),Lp(8,tr)],Qm);class HZe extends Ve{constructor(){super({id:"editor.action.rename",label:v("rename.label","Rename Symbol"),alias:"Rename Symbol",precondition:de.and(B.writable,B.hasRenameProvider),kbOpts:{kbExpr:B.editorTextFocus,primary:60,weight:100},contextMenuOpts:{group:"1_modification",order:1.1}})}runCommand(e,t){const i=e.get(hi),[n,s]=Array.isArray(t)&&t||[void 0,void 0];return st.isUri(n)&&G.isIPosition(s)?i.openCodeEditor({resource:n},i.getActiveCodeEditor()).then(r=>{r&&(r.setPosition(s),r.invokeWithinContext(a=>(this.reportTelemetry(a,r),this.run(a,r))))},wt):super.runCommand(e,t)}run(e,t){const i=e.get(Oo),n=Qm.get(t);return n?(i.trace("[RenameAction] got controller, running..."),n.run()):(i.trace("[RenameAction] returning early - controller missing"),Promise.resolve())}}oi(Qm.ID,Qm,4);be(HZe);const ZY=Bs.bindToContribution(Qm.get);Re(new ZY({id:"acceptRenameInput",precondition:f0,handler:o=>o.acceptRenameInput(!1),kbOpts:{weight:199,kbExpr:de.and(B.focus,de.not("isComposing")),primary:3}}));Re(new ZY({id:"acceptRenameInputWithPreview",precondition:de.and(f0,de.has("config.editor.rename.enablePreview")),handler:o=>o.acceptRenameInput(!0),kbOpts:{weight:199,kbExpr:de.and(B.focus,de.not("isComposing")),primary:2051}}));Re(new ZY({id:"cancelRenameInput",precondition:f0,handler:o=>o.cancelRenameInput(),kbOpts:{weight:199,kbExpr:B.focus,primary:9,secondary:[1033]}}));Xi(class extends na{constructor(){super({id:"focusNextRenameSuggestion",title:{...pt("focusNextRenameSuggestion","Focus Next Rename Suggestion")},precondition:f0,keybinding:[{primary:18,weight:199}]})}run(e){const t=e.get(hi).getFocusedCodeEditor();if(!t)return;const i=Qm.get(t);i&&i.focusNextRenameSuggestion()}});Xi(class extends na{constructor(){super({id:"focusPreviousRenameSuggestion",title:{...pt("focusPreviousRenameSuggestion","Focus Previous Rename Suggestion")},precondition:f0,keybinding:[{primary:16,weight:199}]})}run(e){const t=e.get(hi).getFocusedCodeEditor();if(!t)return;const i=Qm.get(t);i&&i.focusPreviousRenameSuggestion()}});Ra("_executeDocumentRenameProvider",function(o,e,t,...i){const[n]=i;ui(typeof n=="string");const{renameProvider:s}=o.get(Ue);return WZe(s,e,t,n)});Ra("_executePrepareRename",async function(o,e,t){const{renameProvider:i}=o.get(Ue),s=await new YY(e,t,i).resolveRenameLocation(Mt.None);if(s!=null&&s.rejectReason)throw new Error(s.rejectReason);return s});Pn.as(pd.Configuration).registerConfiguration({id:"editor",properties:{"editor.rename.enablePreview":{scope:5,description:v("enablePreview","Enable/disable the ability to preview changes before renaming"),default:!0,type:"boolean"}}});var VZe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Mae=function(o,e){return function(t,i){e(t,i,o)}},K1;let qO=(K1=class extends X{constructor(e,t,i){super(),this.editor=e,this.languageConfigurationService=t,this.editorWorkerService=i,this.decorations=this.editor.createDecorationsCollection(),this.options=this.createOptions(e.getOption(73)),this.computePromise=null,this.currentOccurrences={},this._register(e.onDidChangeModel(n=>{this.currentOccurrences={},this.options=this.createOptions(e.getOption(73)),this.stop(),this.computeSectionHeaders.schedule(0)})),this._register(e.onDidChangeModelLanguage(n=>{this.currentOccurrences={},this.options=this.createOptions(e.getOption(73)),this.stop(),this.computeSectionHeaders.schedule(0)})),this._register(t.onDidChange(n=>{var r;const s=(r=this.editor.getModel())==null?void 0:r.getLanguageId();s&&n.affects(s)&&(this.currentOccurrences={},this.options=this.createOptions(e.getOption(73)),this.stop(),this.computeSectionHeaders.schedule(0))})),this._register(e.onDidChangeConfiguration(n=>{this.options&&!n.hasChanged(73)||(this.options=this.createOptions(e.getOption(73)),this.updateDecorations([]),this.stop(),this.computeSectionHeaders.schedule(0))})),this._register(this.editor.onDidChangeModelContent(n=>{this.computeSectionHeaders.schedule()})),this._register(e.onDidChangeModelTokens(n=>{this.computeSectionHeaders.isScheduled()||this.computeSectionHeaders.schedule(1e3)})),this.computeSectionHeaders=this._register(new Oi(()=>{this.findSectionHeaders()},250)),this.computeSectionHeaders.schedule(0)}createOptions(e){if(!e||!this.editor.hasModel())return;const t=this.editor.getModel().getLanguageId();if(!t)return;const i=this.languageConfigurationService.getLanguageConfiguration(t).comments,n=this.languageConfigurationService.getLanguageConfiguration(t).foldingRules;if(!(!i&&!(n!=null&&n.markers)))return{foldingRules:n,findMarkSectionHeaders:e.showMarkSectionHeaders,findRegionSectionHeaders:e.showRegionSectionHeaders}}findSectionHeaders(){var i,n;if(!this.editor.hasModel()||!((i=this.options)!=null&&i.findMarkSectionHeaders)&&!((n=this.options)!=null&&n.findRegionSectionHeaders))return;const e=this.editor.getModel();if(e.isDisposed()||e.isTooLargeForSyncing())return;const t=e.getVersionId();this.editorWorkerService.findSectionHeaders(e.uri,this.options).then(s=>{e.isDisposed()||e.getVersionId()!==t||this.updateDecorations(s)})}updateDecorations(e){const t=this.editor.getModel();t&&(e=e.filter(s=>{if(!s.shouldBeInComments)return!0;const r=t.validateRange(s.range),a=t.tokenization.getLineTokens(r.startLineNumber),l=a.findTokenIndexAtOffset(r.startColumn-1),c=a.getStandardTokenType(l);return a.getLanguageId(l)===t.getLanguageId()&&c===1}));const i=Object.values(this.currentOccurrences).map(s=>s.decorationId),n=e.map(s=>zZe(s));this.editor.changeDecorations(s=>{const r=s.deltaDecorations(i,n);this.currentOccurrences={};for(let a=0,l=r.length;a<l;a++){const c={sectionHeader:e[a],decorationId:r[a]};this.currentOccurrences[c.decorationId]=c}})}stop(){this.computeSectionHeaders.cancel(),this.computePromise&&(this.computePromise.cancel(),this.computePromise=null)}dispose(){super.dispose(),this.stop(),this.decorations.clear()}},K1.ID="editor.sectionHeaderDetector",K1);qO=VZe([Mae(1,On),Mae(2,Aa)],qO);function zZe(o){return{range:o.range,options:Dt.createDynamic({description:"section-header",stickiness:3,collapseOnReplaceEdit:!0,minimap:{color:void 0,position:1,sectionHeaderStyle:o.hasSeparatorLine?2:1,sectionHeaderText:o.text}})}}oi(qO.ID,qO,1);function UZe(o){for(let e=0,t=o.length;e<t;e+=4){const i=o[e+0],n=o[e+1],s=o[e+2],r=o[e+3];o[e+0]=r,o[e+1]=s,o[e+2]=n,o[e+3]=i}}function $Ze(o){const e=new Uint8Array(o.buffer,o.byteOffset,o.length*4);return kle()||UZe(e),r4.wrap(e)}function pme(o){const e=new Uint32Array(jZe(o));let t=0;if(e[t++]=o.id,o.type==="full")e[t++]=1,e[t++]=o.data.length,e.set(o.data,t),t+=o.data.length;else{e[t++]=2,e[t++]=o.deltas.length;for(const i of o.deltas)e[t++]=i.start,e[t++]=i.deleteCount,i.data?(e[t++]=i.data.length,e.set(i.data,t),t+=i.data.length):e[t++]=0}return $Ze(e)}function jZe(o){let e=0;if(e+=2,o.type==="full")e+=1+o.data.length;else{e+=1,e+=3*o.deltas.length;for(const t of o.deltas)t.data&&(e+=t.data.length)}return e}function v5(o){return o&&!!o.data}function mme(o){return o&&Array.isArray(o.edits)}class qZe{constructor(e,t,i){this.provider=e,this.tokens=t,this.error=i}}function _me(o,e){return o.has(e)}function KZe(o,e){const t=o.orderedGroups(e);return t.length>0?t[0]:[]}async function vme(o,e,t,i,n){const s=KZe(o,e),r=await Promise.all(s.map(async a=>{let l,c=null;try{l=await a.provideDocumentSemanticTokens(e,a===t?i:null,n)}catch(u){c=u,l=null}return(!l||!v5(l)&&!mme(l))&&(l=null),new qZe(a,l,c)}));for(const a of r){if(a.error)throw a.error;if(a.tokens)return a}return r.length>0?r[0]:null}function GZe(o,e){const t=o.orderedGroups(e);return t.length>0?t[0]:null}class YZe{constructor(e,t){this.provider=e,this.tokens=t}}function ZZe(o,e){return o.has(e)}function bme(o,e){const t=o.orderedGroups(e);return t.length>0?t[0]:[]}async function XY(o,e,t,i){const n=bme(o,e),s=await Promise.all(n.map(async r=>{let a;try{a=await r.provideDocumentRangeSemanticTokens(e,t,i)}catch(l){rs(l),a=null}return(!a||!v5(a))&&(a=null),new YZe(r,a)}));for(const r of s)if(r.tokens)return r;return s.length>0?s[0]:null}ii.registerCommand("_provideDocumentSemanticTokensLegend",async(o,...e)=>{const[t]=e;ui(t instanceof st);const i=o.get(un).getModel(t);if(!i)return;const{documentSemanticTokensProvider:n}=o.get(Ue),s=GZe(n,i);return s?s[0].getLegend():o.get(nn).executeCommand("_provideDocumentRangeSemanticTokensLegend",t)});ii.registerCommand("_provideDocumentSemanticTokens",async(o,...e)=>{const[t]=e;ui(t instanceof st);const i=o.get(un).getModel(t);if(!i)return;const{documentSemanticTokensProvider:n}=o.get(Ue);if(!_me(n,i))return o.get(nn).executeCommand("_provideDocumentRangeSemanticTokens",t,i.getFullModelRange());const s=await vme(n,i,null,null,Mt.None);if(!s)return;const{provider:r,tokens:a}=s;if(!a||!v5(a))return;const l=pme({id:0,type:"full",data:a.data});return a.resultId&&r.releaseDocumentSemanticTokens(a.resultId),l});ii.registerCommand("_provideDocumentRangeSemanticTokensLegend",async(o,...e)=>{const[t,i]=e;ui(t instanceof st);const n=o.get(un).getModel(t);if(!n)return;const{documentRangeSemanticTokensProvider:s}=o.get(Ue),r=bme(s,n);if(r.length===0)return;if(r.length===1)return r[0].getLegend();if(!i||!M.isIRange(i))return console.warn("provideDocumentRangeSemanticTokensLegend might be out-of-sync with provideDocumentRangeSemanticTokens unless a range argument is passed in"),r[0].getLegend();const a=await XY(s,n,M.lift(i),Mt.None);if(a)return a.provider.getLegend()});ii.registerCommand("_provideDocumentRangeSemanticTokens",async(o,...e)=>{const[t,i]=e;ui(t instanceof st),ui(M.isIRange(i));const n=o.get(un).getModel(t);if(!n)return;const{documentRangeSemanticTokensProvider:s}=o.get(Ue),r=await XY(s,n,M.lift(i),Mt.None);if(!(!r||!r.tokens))return pme({id:0,type:"full",data:r.tokens.data})});const QY="editor.semanticHighlighting";function GM(o,e,t){var n;const i=(n=t.getValue(QY,{overrideIdentifier:o.getLanguageId(),resource:o.uri}))==null?void 0:n.enabled;return typeof i=="boolean"?i:e.getColorTheme().semanticHighlighting}var Cme=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},vh=function(o,e){return function(t,i){e(t,i,o)}},Ep;let Oj=class extends X{constructor(e,t,i,n,s,r){super(),this._watchers=Object.create(null);const a=u=>{this._watchers[u.uri.toString()]=new Fj(u,e,i,s,r)},l=(u,f)=>{f.dispose(),delete this._watchers[u.uri.toString()]},c=()=>{for(const u of t.getModels()){const f=this._watchers[u.uri.toString()];GM(u,i,n)?f||a(u):f&&l(u,f)}};t.getModels().forEach(u=>{GM(u,i,n)&&a(u)}),this._register(t.onModelAdded(u=>{GM(u,i,n)&&a(u)})),this._register(t.onModelRemoved(u=>{const f=this._watchers[u.uri.toString()];f&&l(u,f)})),this._register(n.onDidChangeConfiguration(u=>{u.affectsConfiguration(QY)&&c()})),this._register(i.onDidColorThemeChange(c))}dispose(){for(const e of Object.values(this._watchers))e.dispose();super.dispose()}};Oj=Cme([vh(0,u4),vh(1,un),vh(2,Ws),vh(3,Ht),vh(4,Yl),vh(5,Ue)],Oj);var Tm;let Fj=(Tm=class extends X{constructor(e,t,i,n,s){super(),this._semanticTokensStylingService=t,this._isDisposed=!1,this._model=e,this._provider=s.documentSemanticTokensProvider,this._debounceInformation=n.for(this._provider,"DocumentSemanticTokens",{min:Ep.REQUEST_MIN_DELAY,max:Ep.REQUEST_MAX_DELAY}),this._fetchDocumentSemanticTokens=this._register(new Oi(()=>this._fetchDocumentSemanticTokensNow(),Ep.REQUEST_MIN_DELAY)),this._currentDocumentResponse=null,this._currentDocumentRequestCancellationTokenSource=null,this._documentProvidersChangeListeners=[],this._providersChangedDuringRequest=!1,this._register(this._model.onDidChangeContent(()=>{this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._register(this._model.onDidChangeAttached(()=>{this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._register(this._model.onDidChangeLanguage(()=>{this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule(0)}));const r=()=>{$i(this._documentProvidersChangeListeners),this._documentProvidersChangeListeners=[];for(const a of this._provider.all(e))typeof a.onDidChange=="function"&&this._documentProvidersChangeListeners.push(a.onDidChange(()=>{if(this._currentDocumentRequestCancellationTokenSource){this._providersChangedDuringRequest=!0;return}this._fetchDocumentSemanticTokens.schedule(0)}))};r(),this._register(this._provider.onDidChange(()=>{r(),this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._register(i.onDidColorThemeChange(a=>{this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._fetchDocumentSemanticTokens.schedule(0)}dispose(){this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),$i(this._documentProvidersChangeListeners),this._documentProvidersChangeListeners=[],this._setDocumentSemanticTokens(null,null,null,[]),this._isDisposed=!0,super.dispose()}_fetchDocumentSemanticTokensNow(){if(this._currentDocumentRequestCancellationTokenSource)return;if(!_me(this._provider,this._model)){this._currentDocumentResponse&&this._model.tokenization.setSemanticTokens(null,!1);return}if(!this._model.isAttachedToEditor())return;const e=new An,t=this._currentDocumentResponse?this._currentDocumentResponse.provider:null,i=this._currentDocumentResponse&&this._currentDocumentResponse.resultId||null,n=vme(this._provider,this._model,t,i,e.token);this._currentDocumentRequestCancellationTokenSource=e,this._providersChangedDuringRequest=!1;const s=[],r=this._model.onDidChangeContent(l=>{s.push(l)}),a=new uo(!1);n.then(l=>{if(this._debounceInformation.update(this._model,a.elapsed()),this._currentDocumentRequestCancellationTokenSource=null,r.dispose(),!l)this._setDocumentSemanticTokens(null,null,null,s);else{const{provider:c,tokens:u}=l,f=this._semanticTokensStylingService.getStyling(c);this._setDocumentSemanticTokens(c,u||null,f,s)}},l=>{l&&(Tc(l)||typeof l.message=="string"&&l.message.indexOf("busy")!==-1)||wt(l),this._currentDocumentRequestCancellationTokenSource=null,r.dispose(),(s.length>0||this._providersChangedDuringRequest)&&(this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model)))})}static _copy(e,t,i,n,s){s=Math.min(s,i.length-n,e.length-t);for(let r=0;r<s;r++)i[n+r]=e[t+r]}_setDocumentSemanticTokens(e,t,i,n){const s=this._currentDocumentResponse,r=()=>{(n.length>0||this._providersChangedDuringRequest)&&!this._fetchDocumentSemanticTokens.isScheduled()&&this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))};if(this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._isDisposed){e&&t&&e.releaseDocumentSemanticTokens(t.resultId);return}if(!e||!i){this._model.tokenization.setSemanticTokens(null,!1);return}if(!t){this._model.tokenization.setSemanticTokens(null,!0),r();return}if(mme(t)){if(!s){this._model.tokenization.setSemanticTokens(null,!0);return}if(t.edits.length===0)t={resultId:t.resultId,data:s.data};else{let a=0;for(const g of t.edits)a+=(g.data?g.data.length:0)-g.deleteCount;const l=s.data,c=new Uint32Array(l.length+a);let u=l.length,f=c.length;for(let g=t.edits.length-1;g>=0;g--){const p=t.edits[g];if(p.start>l.length){i.warnInvalidEditStart(s.resultId,t.resultId,g,p.start,l.length),this._model.tokenization.setSemanticTokens(null,!0);return}const _=u-(p.start+p.deleteCount);_>0&&(Ep._copy(l,u-_,c,f-_,_),f-=_),p.data&&(Ep._copy(p.data,0,c,f-p.data.length,p.data.length),f-=p.data.length),u=p.start}u>0&&Ep._copy(l,0,c,0,u),t={resultId:t.resultId,data:c}}}if(v5(t)){this._currentDocumentResponse=new XZe(e,t.resultId,t.data);const a=mde(t,i,this._model.getLanguageId());if(n.length>0)for(const l of n)for(const c of a)for(const u of l.changes)c.applyEdit(u.range,u.text);this._model.tokenization.setSemanticTokens(a,!0)}else this._model.tokenization.setSemanticTokens(null,!0);r()}},Ep=Tm,Tm.REQUEST_MIN_DELAY=300,Tm.REQUEST_MAX_DELAY=2e3,Tm);Fj=Ep=Cme([vh(1,u4),vh(2,Ws),vh(3,Yl),vh(4,Ue)],Fj);class XZe{constructor(e,t,i){this.provider=e,this.resultId=t,this.data=i}dispose(){this.provider.releaseDocumentSemanticTokens(this.resultId)}}o0(Oj);var QZe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Nx=function(o,e){return function(t,i){e(t,i,o)}},G1;let KO=(G1=class extends X{constructor(e,t,i,n,s,r){super(),this._semanticTokensStylingService=t,this._themeService=i,this._configurationService=n,this._editor=e,this._provider=r.documentRangeSemanticTokensProvider,this._debounceInformation=s.for(this._provider,"DocumentRangeSemanticTokens",{min:100,max:500}),this._tokenizeViewport=this._register(new Oi(()=>this._tokenizeViewportNow(),100)),this._outstandingRequests=[];const a=()=>{this._editor.hasModel()&&this._tokenizeViewport.schedule(this._debounceInformation.get(this._editor.getModel()))};this._register(this._editor.onDidScrollChange(()=>{a()})),this._register(this._editor.onDidChangeModel(()=>{this._cancelAll(),a()})),this._register(this._editor.onDidChangeModelContent(l=>{this._cancelAll(),a()})),this._register(this._provider.onDidChange(()=>{this._cancelAll(),a()})),this._register(this._configurationService.onDidChangeConfiguration(l=>{l.affectsConfiguration(QY)&&(this._cancelAll(),a())})),this._register(this._themeService.onDidColorThemeChange(()=>{this._cancelAll(),a()})),a()}_cancelAll(){for(const e of this._outstandingRequests)e.cancel();this._outstandingRequests=[]}_removeOutstandingRequest(e){for(let t=0,i=this._outstandingRequests.length;t<i;t++)if(this._outstandingRequests[t]===e){this._outstandingRequests.splice(t,1);return}}_tokenizeViewportNow(){if(!this._editor.hasModel())return;const e=this._editor.getModel();if(e.tokenization.hasCompleteSemanticTokens())return;if(!GM(e,this._themeService,this._configurationService)){e.tokenization.hasSomeSemanticTokens()&&e.tokenization.setSemanticTokens(null,!1);return}if(!ZZe(this._provider,e)){e.tokenization.hasSomeSemanticTokens()&&e.tokenization.setSemanticTokens(null,!1);return}const t=this._editor.getVisibleRangesPlusViewportAboveBelow();this._outstandingRequests=this._outstandingRequests.concat(t.map(i=>this._requestRange(e,i)))}_requestRange(e,t){const i=e.getVersionId(),n=Gs(r=>Promise.resolve(XY(this._provider,e,t,r))),s=new uo(!1);return n.then(r=>{if(this._debounceInformation.update(e,s.elapsed()),!r||!r.tokens||e.isDisposed()||e.getVersionId()!==i)return;const{provider:a,tokens:l}=r,c=this._semanticTokensStylingService.getStyling(a);e.tokenization.setPartialSemanticTokens(t,mde(l,c,e.getLanguageId()))}).then(()=>this._removeOutstandingRequest(n),()=>this._removeOutstandingRequest(n)),n}},G1.ID="editor.contrib.viewportSemanticTokens",G1);KO=QZe([Nx(1,u4),Nx(2,Ws),Nx(3,Ht),Nx(4,Yl),Nx(5,Ue)],KO);oi(KO.ID,KO,1);class JZe{constructor(e=!0){this.selectSubwords=e}provideSelectionRanges(e,t){const i=[];for(const n of t){const s=[];i.push(s),this.selectSubwords&&this._addInWordRanges(s,e,n),this._addWordRanges(s,e,n),this._addWhitespaceLine(s,e,n),s.push({range:e.getFullModelRange()})}return i}_addInWordRanges(e,t,i){const n=t.getWordAtPosition(i);if(!n)return;const{word:s,startColumn:r}=n,a=i.column-r;let l=a,c=a,u=0;for(;l>=0;l--){const f=s.charCodeAt(l);if(l!==a&&(f===95||f===45))break;if(Gp(f)&&gh(u))break;u=f}for(l+=1;c<s.length;c++){const f=s.charCodeAt(c);if(gh(f)&&Gp(u))break;if(f===95||f===45)break;u=f}l<c&&e.push({range:new M(i.lineNumber,r+l,i.lineNumber,r+c)})}_addWordRanges(e,t,i){const n=t.getWordAtPosition(i);n&&e.push({range:new M(i.lineNumber,n.startColumn,i.lineNumber,n.endColumn)})}_addWhitespaceLine(e,t,i){t.getLineLength(i.lineNumber)>0&&t.getLineFirstNonWhitespaceColumn(i.lineNumber)===0&&t.getLineLastNonWhitespaceColumn(i.lineNumber)===0&&e.push({range:new M(i.lineNumber,1,i.lineNumber,t.getLineMaxColumn(i.lineNumber))})}}var eXe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},tXe=function(o,e){return function(t,i){e(t,i,o)}},Bj;class JY{constructor(e,t){this.index=e,this.ranges=t}mov(e){const t=this.index+(e?1:-1);if(t<0||t>=this.ranges.length)return this;const i=new JY(t,this.ranges);return i.ranges[t].equalsRange(this.ranges[this.index])?i.mov(e):i}}var Xb;let RE=(Xb=class{static get(e){return e.getContribution(Bj.ID)}constructor(e,t){this._editor=e,this._languageFeaturesService=t,this._ignoreSelection=!1}dispose(){var e;(e=this._selectionListener)==null||e.dispose()}async run(e){if(!this._editor.hasModel())return;const t=this._editor.getSelections(),i=this._editor.getModel();if(this._state||await wme(this._languageFeaturesService.selectionRangeProvider,i,t.map(s=>s.getPosition()),this._editor.getOption(114),Mt.None).then(s=>{var r;if(!(!wr(s)||s.length!==t.length)&&!(!this._editor.hasModel()||!En(this._editor.getSelections(),t,(a,l)=>a.equalsSelection(l)))){for(let a=0;a<s.length;a++)s[a]=s[a].filter(l=>l.containsPosition(t[a].getStartPosition())&&l.containsPosition(t[a].getEndPosition())),s[a].unshift(t[a]);this._state=s.map(a=>new JY(0,a)),(r=this._selectionListener)==null||r.dispose(),this._selectionListener=this._editor.onDidChangeCursorPosition(()=>{var a;this._ignoreSelection||((a=this._selectionListener)==null||a.dispose(),this._state=void 0)})}}),!this._state)return;this._state=this._state.map(s=>s.mov(e));const n=this._state.map(s=>Ke.fromPositions(s.ranges[s.index].getStartPosition(),s.ranges[s.index].getEndPosition()));this._ignoreSelection=!0;try{this._editor.setSelections(n)}finally{this._ignoreSelection=!1}}},Bj=Xb,Xb.ID="editor.contrib.smartSelectController",Xb);RE=Bj=eXe([tXe(1,Ue)],RE);class yme extends Ve{constructor(e,t){super(t),this._forward=e}async run(e,t){const i=RE.get(t);i&&await i.run(this._forward)}}class iXe extends yme{constructor(){super(!0,{id:"editor.action.smartSelect.expand",label:v("smartSelect.expand","Expand Selection"),alias:"Expand Selection",precondition:void 0,kbOpts:{kbExpr:B.editorTextFocus,primary:1553,mac:{primary:3345,secondary:[1297]},weight:100},menuOpts:{menuId:qe.MenubarSelectionMenu,group:"1_basic",title:v({key:"miSmartSelectGrow",comment:["&& denotes a mnemonic"]},"&&Expand Selection"),order:2}})}}ii.registerCommandAlias("editor.action.smartSelect.grow","editor.action.smartSelect.expand");class nXe extends yme{constructor(){super(!1,{id:"editor.action.smartSelect.shrink",label:v("smartSelect.shrink","Shrink Selection"),alias:"Shrink Selection",precondition:void 0,kbOpts:{kbExpr:B.editorTextFocus,primary:1551,mac:{primary:3343,secondary:[1295]},weight:100},menuOpts:{menuId:qe.MenubarSelectionMenu,group:"1_basic",title:v({key:"miSmartSelectShrink",comment:["&& denotes a mnemonic"]},"&&Shrink Selection"),order:3}})}}oi(RE.ID,RE,4);be(iXe);be(nXe);async function wme(o,e,t,i,n){const s=o.all(e).concat(new JZe(i.selectSubwords));s.length===1&&s.unshift(new NO);const r=[],a=[];for(const l of s)r.push(Promise.resolve(l.provideSelectionRanges(e,t,n)).then(c=>{if(wr(c)&&c.length===t.length)for(let u=0;u<t.length;u++){a[u]||(a[u]=[]);for(const f of c[u])M.isIRange(f.range)&&M.containsPosition(f.range,t[u])&&a[u].push(M.lift(f.range))}},rs));return await Promise.all(r),a.map(l=>{if(l.length===0)return[];l.sort((g,p)=>G.isBefore(g.getStartPosition(),p.getStartPosition())?1:G.isBefore(p.getStartPosition(),g.getStartPosition())||G.isBefore(g.getEndPosition(),p.getEndPosition())?-1:G.isBefore(p.getEndPosition(),g.getEndPosition())?1:0);const c=[];let u;for(const g of l)(!u||M.containsRange(g,u)&&!M.equalsRange(g,u))&&(c.push(g),u=g);if(!i.selectLeadingAndTrailingWhitespace)return c;const f=[c[0]];for(let g=1;g<c.length;g++){const p=c[g-1],_=c[g];if(_.startLineNumber!==p.startLineNumber||_.endLineNumber!==p.endLineNumber){const b=new M(p.startLineNumber,e.getLineFirstNonWhitespaceColumn(p.startLineNumber),p.endLineNumber,e.getLineLastNonWhitespaceColumn(p.endLineNumber));b.containsRange(p)&&!b.equalsRange(p)&&_.containsRange(b)&&!_.equalsRange(b)&&f.push(b);const y=new M(p.startLineNumber,1,p.endLineNumber,e.getLineMaxColumn(p.endLineNumber));y.containsRange(p)&&!y.equalsRange(b)&&_.containsRange(y)&&!_.equalsRange(y)&&f.push(y)}f.push(_)}return f})}ii.registerCommand("_executeSelectionRangeProvider",async function(o,...e){const[t,i]=e;ui(st.isUri(t));const n=o.get(Ue).selectionRangeProvider,s=await o.get(Na).createModelReference(t);try{return wme(n,s.object.textEditorModel,i,{selectLeadingAndTrailingWhitespace:!0,selectSubwords:!0},Mt.None)}finally{s.dispose()}});const sXe=Object.freeze({View:pt("view","View"),Help:pt("help","Help"),Test:pt("test","Test"),File:pt("file","File"),Preferences:pt("preferences","Preferences"),Developer:pt({key:"developer",comment:["A developer on Code itself or someone diagnosing issues in Code"]},"Developer")});class Fk{constructor(e,t,i,n=null){this.startLineNumbers=e,this.endLineNumbers=t,this.lastLineRelativePosition=i,this.showEndForLine=n}equals(e){return!!e&&this.lastLineRelativePosition===e.lastLineRelativePosition&&this.showEndForLine===e.showEndForLine&&En(this.startLineNumbers,e.startLineNumbers)&&En(this.endLineNumbers,e.endLineNumbers)}static get Empty(){return new Fk([],[],0)}}const Aae=Ag("stickyScrollViewLayer",{createHTML:o=>o}),R9="data-sticky-line-index",Pae="data-sticky-is-line",oXe="data-sticky-is-line-number",Oae="data-sticky-is-folding-icon";class rXe extends X{constructor(e){super(),this._editor=e,this._foldingIconStore=new le,this._rootDomNode=document.createElement("div"),this._lineNumbersDomNode=document.createElement("div"),this._linesDomNodeScrollable=document.createElement("div"),this._linesDomNode=document.createElement("div"),this._lineHeight=this._editor.getOption(67),this._renderedStickyLines=[],this._lineNumbers=[],this._lastLineRelativePosition=0,this._minContentWidthInPx=0,this._isOnGlyphMargin=!1,this._lineNumbersDomNode.className="sticky-widget-line-numbers",this._lineNumbersDomNode.setAttribute("role","none"),this._linesDomNode.className="sticky-widget-lines",this._linesDomNode.setAttribute("role","list"),this._linesDomNodeScrollable.className="sticky-widget-lines-scrollable",this._linesDomNodeScrollable.appendChild(this._linesDomNode),this._rootDomNode.className="sticky-widget",this._rootDomNode.classList.toggle("peek",e instanceof fd),this._rootDomNode.appendChild(this._lineNumbersDomNode),this._rootDomNode.appendChild(this._linesDomNodeScrollable);const t=()=>{this._linesDomNode.style.left=this._editor.getOption(116).scrollWithEditor?`-${this._editor.getScrollLeft()}px`:"0px"};this._register(this._editor.onDidChangeConfiguration(i=>{i.hasChanged(116)&&t(),i.hasChanged(67)&&(this._lineHeight=this._editor.getOption(67))})),this._register(this._editor.onDidScrollChange(i=>{i.scrollLeftChanged&&t(),i.scrollWidthChanged&&this._updateWidgetWidth()})),this._register(this._editor.onDidChangeModel(()=>{t(),this._updateWidgetWidth()})),this._register(this._foldingIconStore),t(),this._register(this._editor.onDidLayoutChange(i=>{this._updateWidgetWidth()})),this._updateWidgetWidth()}get lineNumbers(){return this._lineNumbers}get lineNumberCount(){return this._lineNumbers.length}getRenderedStickyLine(e){return this._renderedStickyLines.find(t=>t.lineNumber===e)}getCurrentLines(){return this._lineNumbers}setState(e,t,i){if(i===void 0&&(!this._previousState&&!e||this._previousState&&this._previousState.equals(e)))return;const n=this._isWidgetHeightZero(e),s=n?void 0:e,r=n?0:this._findLineToRebuildWidgetFrom(e,i);this._renderRootNode(s,t,r),this._previousState=e}_isWidgetHeightZero(e){if(!e)return!0;const t=e.startLineNumbers.length*this._lineHeight+e.lastLineRelativePosition;if(t>0){this._lastLineRelativePosition=e.lastLineRelativePosition;const i=[...e.startLineNumbers];e.showEndForLine!==null&&(i[e.showEndForLine]=e.endLineNumbers[e.showEndForLine]),this._lineNumbers=i}else this._lastLineRelativePosition=0,this._lineNumbers=[];return t===0}_findLineToRebuildWidgetFrom(e,t){if(!e||!this._previousState)return 0;if(t!==void 0)return t;const i=this._previousState,n=e.startLineNumbers.findIndex(s=>!i.startLineNumbers.includes(s));return n===-1?0:n}_updateWidgetWidth(){const e=this._editor.getLayoutInfo(),t=e.contentLeft;this._lineNumbersDomNode.style.width=`${t}px`,this._linesDomNodeScrollable.style.setProperty("--vscode-editorStickyScroll-scrollableWidth",`${this._editor.getScrollWidth()-e.verticalScrollbarWidth}px`),this._rootDomNode.style.width=`${e.width-e.verticalScrollbarWidth}px`}_clearStickyLinesFromLine(e){this._foldingIconStore.clear();for(let t=e;t<this._renderedStickyLines.length;t++){const i=this._renderedStickyLines[t];i.lineNumberDomNode.remove(),i.lineDomNode.remove()}this._renderedStickyLines=this._renderedStickyLines.slice(0,e),this._rootDomNode.style.display="none"}_useFoldingOpacityTransition(e){this._lineNumbersDomNode.style.setProperty("--vscode-editorStickyScroll-foldingOpacityTransition",`opacity ${e?.5:0}s`)}_setFoldingIconsVisibility(e){for(const t of this._renderedStickyLines){const i=t.foldingIcon;i&&i.setVisible(e?!0:i.isCollapsed)}}async _renderRootNode(e,t,i){if(this._clearStickyLinesFromLine(i),!e)return;for(const a of this._renderedStickyLines)this._updateTopAndZIndexOfStickyLine(a);const n=this._editor.getLayoutInfo(),s=this._lineNumbers.slice(i);for(const[a,l]of s.entries()){const c=this._renderChildNode(a+i,l,t,n);c&&(this._linesDomNode.appendChild(c.lineDomNode),this._lineNumbersDomNode.appendChild(c.lineNumberDomNode),this._renderedStickyLines.push(c))}t&&(this._setFoldingHoverListeners(),this._useFoldingOpacityTransition(!this._isOnGlyphMargin));const r=this._lineNumbers.length*this._lineHeight+this._lastLineRelativePosition;this._rootDomNode.style.display="block",this._lineNumbersDomNode.style.height=`${r}px`,this._linesDomNodeScrollable.style.height=`${r}px`,this._rootDomNode.style.height=`${r}px`,this._rootDomNode.style.marginLeft="0px",this._minContentWidthInPx=Math.max(...this._renderedStickyLines.map(a=>a.scrollWidth))+n.verticalScrollbarWidth,this._editor.layoutOverlayWidget(this)}_setFoldingHoverListeners(){this._editor.getOption(111)==="mouseover"&&(this._foldingIconStore.add(se(this._lineNumbersDomNode,Le.MOUSE_ENTER,()=>{this._isOnGlyphMargin=!0,this._setFoldingIconsVisibility(!0)})),this._foldingIconStore.add(se(this._lineNumbersDomNode,Le.MOUSE_LEAVE,()=>{this._isOnGlyphMargin=!1,this._useFoldingOpacityTransition(!0),this._setFoldingIconsVisibility(!1)})))}_renderChildNode(e,t,i,n){const s=this._editor._getViewModel();if(!s)return;const r=s.coordinatesConverter.convertModelPositionToViewPosition(new G(t,1)).lineNumber,a=s.getViewLineRenderingData(r),l=this._editor.getOption(68);let c;try{c=Kr.filter(a.inlineDecorations,r,a.minColumn,a.maxColumn)}catch{c=[]}const u=new r_(!0,!0,a.content,a.continuesWithWrappedLine,a.isBasicASCII,a.containsRTL,0,a.tokens,c,a.tabSize,a.startVisibleColumn,1,1,1,500,"none",!0,!0,null),f=new qS(2e3),g=vI(u,f);let p;Aae?p=Aae.createHTML(f.build()):p=f.build();const _=document.createElement("span");_.setAttribute(R9,String(e)),_.setAttribute(Pae,""),_.setAttribute("role","listitem"),_.tabIndex=0,_.className="sticky-line-content",_.classList.add(`stickyLine${t}`),_.style.lineHeight=`${this._lineHeight}px`,_.innerHTML=p;const b=document.createElement("span");b.setAttribute(R9,String(e)),b.setAttribute(oXe,""),b.className="sticky-line-number",b.style.lineHeight=`${this._lineHeight}px`;const y=n.contentLeft;b.style.width=`${y}px`;const S=document.createElement("span");l.renderType===1||l.renderType===3&&t%10===0?S.innerText=t.toString():l.renderType===2&&(S.innerText=Math.abs(t-this._editor.getPosition().lineNumber).toString()),S.className="sticky-line-number-inner",S.style.lineHeight=`${this._lineHeight}px`,S.style.width=`${n.lineNumbersWidth}px`,S.style.paddingLeft=`${n.lineNumbersLeft}px`,b.appendChild(S);const L=this._renderFoldingIconForLine(i,t);L&&b.appendChild(L.domNode),this._editor.applyFontInfo(_),this._editor.applyFontInfo(S),b.style.lineHeight=`${this._lineHeight}px`,_.style.lineHeight=`${this._lineHeight}px`,b.style.height=`${this._lineHeight}px`,_.style.height=`${this._lineHeight}px`;const x=new aXe(e,t,_,b,L,g.characterMapping,_.scrollWidth);return this._updateTopAndZIndexOfStickyLine(x)}_updateTopAndZIndexOfStickyLine(e){var u;const t=e.index,i=e.lineDomNode,n=e.lineNumberDomNode,s=t===this._lineNumbers.length-1,r="0",a="1";i.style.zIndex=s?r:a,n.style.zIndex=s?r:a;const l=`${t*this._lineHeight+this._lastLineRelativePosition+((u=e.foldingIcon)!=null&&u.isCollapsed?1:0)}px`,c=`${t*this._lineHeight}px`;return i.style.top=s?l:c,n.style.top=s?l:c,e}_renderFoldingIconForLine(e,t){const i=this._editor.getOption(111);if(!e||i==="never")return;const n=e.regions,s=n.findRange(t),r=n.getStartLineNumber(s);if(!(t===r))return;const l=n.isCollapsed(s),c=new lXe(l,r,n.getEndLineNumber(s),this._lineHeight);return c.setVisible(this._isOnGlyphMargin?!0:l||i==="always"),c.domNode.setAttribute(Oae,""),c}getId(){return"editor.contrib.stickyScrollWidget"}getDomNode(){return this._rootDomNode}getPosition(){return{preference:2,stackOridinal:10}}getMinContentWidthInPx(){return this._minContentWidthInPx}focusLineWithIndex(e){0<=e&&e<this._renderedStickyLines.length&&this._renderedStickyLines[e].lineDomNode.focus()}getEditorPositionFromNode(e){if(!e||e.children.length>0)return null;const t=this._getRenderedStickyLineFromChildDomNode(e);if(!t)return null;const i=kG(t.characterMapping,e,0);return new G(t.lineNumber,i)}getLineNumberFromChildDomNode(e){var t;return((t=this._getRenderedStickyLineFromChildDomNode(e))==null?void 0:t.lineNumber)??null}_getRenderedStickyLineFromChildDomNode(e){const t=this.getLineIndexFromChildDomNode(e);return t===null||t<0||t>=this._renderedStickyLines.length?null:this._renderedStickyLines[t]}getLineIndexFromChildDomNode(e){const t=this._getAttributeValue(e,R9);return t?parseInt(t,10):null}isInStickyLine(e){return this._getAttributeValue(e,Pae)!==void 0}isInFoldingIconDomNode(e){return this._getAttributeValue(e,Oae)!==void 0}_getAttributeValue(e,t){for(;e&&e!==this._rootDomNode;){const i=e.getAttribute(t);if(i!==null)return i;e=e.parentElement}}}class aXe{constructor(e,t,i,n,s,r,a){this.index=e,this.lineNumber=t,this.lineDomNode=i,this.lineNumberDomNode=n,this.foldingIcon=s,this.characterMapping=r,this.scrollWidth=a}}class lXe{constructor(e,t,i,n){this.isCollapsed=e,this.foldingStartLine=t,this.foldingEndLine=i,this.dimension=n,this.domNode=document.createElement("div"),this.domNode.style.width=`${n}px`,this.domNode.style.height=`${n}px`,this.domNode.className=ut.asClassName(e?CO:bO)}setVisible(e){this.domNode.style.cursor=e?"pointer":"default",this.domNode.style.opacity=e?"1":"0"}}class Bk{constructor(e,t){this.startLineNumber=e,this.endLineNumber=t}}class GO{constructor(e,t,i){this.range=e,this.children=t,this.parent=i}}class Sme{constructor(e,t,i,n){this.uri=e,this.version=t,this.element=i,this.outlineProviderId=n}}var b5=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},ME=function(o,e){return function(t,i){e(t,i,o)}},Wk;(function(o){o.OUTLINE_MODEL="outlineModel",o.FOLDING_PROVIDER_MODEL="foldingProviderModel",o.INDENTATION_MODEL="indentationModel"})(Wk||(Wk={}));var rm;(function(o){o[o.VALID=0]="VALID",o[o.INVALID=1]="INVALID",o[o.CANCELED=2]="CANCELED"})(rm||(rm={}));let Wj=class extends X{constructor(e,t,i,n){switch(super(),this._editor=e,this._modelProviders=[],this._modelPromise=null,this._updateScheduler=this._register(new xc(300)),this._updateOperation=this._register(new le),this._editor.getOption(116).defaultModel){case Wk.OUTLINE_MODEL:this._modelProviders.push(new Hj(this._editor,n));case Wk.FOLDING_PROVIDER_MODEL:this._modelProviders.push(new zj(this._editor,t,n));case Wk.INDENTATION_MODEL:this._modelProviders.push(new Vj(this._editor,i));break}}dispose(){this._modelProviders.forEach(e=>e.dispose()),this._updateOperation.clear(),this._cancelModelPromise(),super.dispose()}_cancelModelPromise(){this._modelPromise&&(this._modelPromise.cancel(),this._modelPromise=null)}async update(e){return this._updateOperation.clear(),this._updateOperation.add({dispose:()=>{this._cancelModelPromise(),this._updateScheduler.cancel()}}),this._cancelModelPromise(),await this._updateScheduler.trigger(async()=>{for(const t of this._modelProviders){const{statusPromise:i,modelPromise:n}=t.computeStickyModel(e);this._modelPromise=n;const s=await i;if(this._modelPromise!==n)return null;switch(s){case rm.CANCELED:return this._updateOperation.clear(),null;case rm.VALID:return t.stickyModel}}return null}).catch(t=>(wt(t),null))}};Wj=b5([ME(2,nt),ME(3,Ue)],Wj);class Lme extends X{constructor(e){super(),this._editor=e,this._stickyModel=null}get stickyModel(){return this._stickyModel}_invalid(){return this._stickyModel=null,rm.INVALID}computeStickyModel(e){if(e.isCancellationRequested||!this.isProviderValid())return{statusPromise:this._invalid(),modelPromise:null};const t=Gs(i=>this.createModelFromProvider(i));return{statusPromise:t.then(i=>this.isModelValid(i)?e.isCancellationRequested?rm.CANCELED:(this._stickyModel=this.createStickyModel(e,i),rm.VALID):this._invalid()).then(void 0,i=>(wt(i),rm.CANCELED)),modelPromise:t}}isModelValid(e){return!0}isProviderValid(){return!0}}let Hj=class extends Lme{constructor(e,t){super(e),this._languageFeaturesService=t}createModelFromProvider(e){return Uf.create(this._languageFeaturesService.documentSymbolProvider,this._editor.getModel(),e)}createStickyModel(e,t){var r;const{stickyOutlineElement:i,providerID:n}=this._stickyModelFromOutlineModel(t,(r=this._stickyModel)==null?void 0:r.outlineProviderId),s=this._editor.getModel();return new Sme(s.uri,s.getVersionId(),i,n)}isModelValid(e){return e&&e.children.size>0}_stickyModelFromOutlineModel(e,t){let i;if(ti.first(e.children.values())instanceof jpe){const a=ti.find(e.children.values(),l=>l.id===t);if(a)i=a.children;else{let l="",c=-1,u;for(const[f,g]of e.children.entries()){const p=this._findSumOfRangesOfGroup(g);p>c&&(u=g,c=p,l=g.id)}t=l,i=u.children}}else i=e.children;const n=[],s=Array.from(i.values()).sort((a,l)=>{const c=new Bk(a.symbol.range.startLineNumber,a.symbol.range.endLineNumber),u=new Bk(l.symbol.range.startLineNumber,l.symbol.range.endLineNumber);return this._comparator(c,u)});for(const a of s)n.push(this._stickyModelFromOutlineElement(a,a.symbol.selectionRange.startLineNumber));return{stickyOutlineElement:new GO(void 0,n,void 0),providerID:t}}_stickyModelFromOutlineElement(e,t){const i=[];for(const s of e.children.values())if(s.symbol.selectionRange.startLineNumber!==s.symbol.range.endLineNumber)if(s.symbol.selectionRange.startLineNumber!==t)i.push(this._stickyModelFromOutlineElement(s,s.symbol.selectionRange.startLineNumber));else for(const r of s.children.values())i.push(this._stickyModelFromOutlineElement(r,s.symbol.selectionRange.startLineNumber));i.sort((s,r)=>this._comparator(s.range,r.range));const n=new Bk(e.symbol.selectionRange.startLineNumber,e.symbol.range.endLineNumber);return new GO(n,i,void 0)}_comparator(e,t){return e.startLineNumber!==t.startLineNumber?e.startLineNumber-t.startLineNumber:t.endLineNumber-e.endLineNumber}_findSumOfRangesOfGroup(e){let t=0;for(const i of e.children.values())t+=this._findSumOfRangesOfGroup(i);return e instanceof I$?t+e.symbol.range.endLineNumber-e.symbol.selectionRange.startLineNumber:t}};Hj=b5([ME(1,Ue)],Hj);class xme extends Lme{constructor(e){super(e),this._foldingLimitReporter=new zpe(e)}createStickyModel(e,t){const i=this._fromFoldingRegions(t),n=this._editor.getModel();return new Sme(n.uri,n.getVersionId(),i,void 0)}isModelValid(e){return e!==null}_fromFoldingRegions(e){const t=e.length,i=[],n=new GO(void 0,[],void 0);for(let s=0;s<t;s++){const r=e.getParentIndex(s);let a;r!==-1?a=i[r]:a=n;const l=new GO(new Bk(e.getStartLineNumber(s),e.getEndLineNumber(s)+1),[],a);a.children.push(l),i.push(l)}return n}}let Vj=class extends xme{constructor(e,t){super(e),this._languageConfigurationService=t,this.provider=this._register(new BY(e.getModel(),this._languageConfigurationService,this._foldingLimitReporter))}async createModelFromProvider(e){return this.provider.compute(e)}};Vj=b5([ME(1,On)],Vj);let zj=class extends xme{constructor(e,t,i){super(e),this._languageFeaturesService=i;const n=Xm.getFoldingRangeProviders(this._languageFeaturesService,e.getModel());n.length>0&&(this.provider=this._register(new WY(e.getModel(),n,t,this._foldingLimitReporter,void 0)))}isProviderValid(){return this.provider!==void 0}async createModelFromProvider(e){var t;return((t=this.provider)==null?void 0:t.compute(e))??null}};zj=b5([ME(2,Ue)],zj);var cXe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Fae=function(o,e){return function(t,i){e(t,i,o)}};class dXe{constructor(e,t,i){this.startLineNumber=e,this.endLineNumber=t,this.nestingDepth=i}}let Uj=class extends X{constructor(e,t,i){super(),this._languageFeaturesService=t,this._languageConfigurationService=i,this._onDidChangeStickyScroll=this._register(new Y),this.onDidChangeStickyScroll=this._onDidChangeStickyScroll.event,this._model=null,this._cts=null,this._stickyModelProvider=null,this._editor=e,this._sessionStore=this._register(new le),this._updateSoon=this._register(new Oi(()=>this.update(),50)),this._register(this._editor.onDidChangeConfiguration(n=>{n.hasChanged(116)&&this.readConfiguration()})),this.readConfiguration()}readConfiguration(){this._sessionStore.clear(),this._editor.getOption(116).enabled&&(this._sessionStore.add(this._editor.onDidChangeModel(()=>{this._model=null,this.updateStickyModelProvider(),this._onDidChangeStickyScroll.fire(),this.update()})),this._sessionStore.add(this._editor.onDidChangeHiddenAreas(()=>this.update())),this._sessionStore.add(this._editor.onDidChangeModelContent(()=>this._updateSoon.schedule())),this._sessionStore.add(this._languageFeaturesService.documentSymbolProvider.onDidChange(()=>this.update())),this._sessionStore.add(it(()=>{var t;(t=this._stickyModelProvider)==null||t.dispose(),this._stickyModelProvider=null})),this.updateStickyModelProvider(),this.update())}getVersionId(){var e;return(e=this._model)==null?void 0:e.version}updateStickyModelProvider(){var t;(t=this._stickyModelProvider)==null||t.dispose(),this._stickyModelProvider=null;const e=this._editor;e.hasModel()&&(this._stickyModelProvider=new Wj(e,()=>this._updateSoon.schedule(),this._languageConfigurationService,this._languageFeaturesService))}async update(){var e;(e=this._cts)==null||e.dispose(!0),this._cts=new An,await this.updateStickyModel(this._cts.token),this._onDidChangeStickyScroll.fire()}async updateStickyModel(e){if(!this._editor.hasModel()||!this._stickyModelProvider||this._editor.getModel().isTooLargeForTokenization()){this._model=null;return}const t=await this._stickyModelProvider.update(e);e.isCancellationRequested||(this._model=t)}updateIndex(e){return e===-1?e=0:e<0&&(e=-e-2),e}getCandidateStickyLinesIntersectingFromStickyModel(e,t,i,n,s){if(t.children.length===0)return;let r=s;const a=[];for(let u=0;u<t.children.length;u++){const f=t.children[u];f.range&&a.push(f.range.startLineNumber)}const l=this.updateIndex(oD(a,e.startLineNumber,(u,f)=>u-f)),c=this.updateIndex(oD(a,e.startLineNumber+n,(u,f)=>u-f));for(let u=l;u<=c;u++){const f=t.children[u];if(!f)return;if(f.range){const g=f.range.startLineNumber,p=f.range.endLineNumber;e.startLineNumber<=p+1&&g-1<=e.endLineNumber&&g!==r&&(r=g,i.push(new dXe(g,p-1,n+1)),this.getCandidateStickyLinesIntersectingFromStickyModel(e,f,i,n+1,g))}else this.getCandidateStickyLinesIntersectingFromStickyModel(e,f,i,n,s)}}getCandidateStickyLinesIntersecting(e){var n,s;if(!((n=this._model)!=null&&n.element))return[];let t=[];this.getCandidateStickyLinesIntersectingFromStickyModel(e,this._model.element,t,0,-1);const i=(s=this._editor._getViewModel())==null?void 0:s.getHiddenAreas();if(i)for(const r of i)t=t.filter(a=>!(a.startLineNumber>=r.startLineNumber&&a.endLineNumber<=r.endLineNumber+1));return t}};Uj=cXe([Fae(1,Ue),Fae(2,On)],Uj);var uXe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},pw=function(o,e){return function(t,i){e(t,i,o)}},$j,Qb;let Rg=(Qb=class extends X{constructor(e,t,i,n,s,r,a){super(),this._editor=e,this._contextMenuService=t,this._languageFeaturesService=i,this._instaService=n,this._contextKeyService=a,this._sessionStore=new le,this._maxStickyLines=Number.MAX_SAFE_INTEGER,this._candidateDefinitionsLength=-1,this._focusedStickyElementIndex=-1,this._enabled=!1,this._focused=!1,this._positionRevealed=!1,this._onMouseDown=!1,this._endLineNumbers=[],this._stickyScrollWidget=new rXe(this._editor),this._stickyLineCandidateProvider=new Uj(this._editor,i,s),this._register(this._stickyScrollWidget),this._register(this._stickyLineCandidateProvider),this._widgetState=Fk.Empty,this._onDidResize(),this._readConfiguration();const l=this._stickyScrollWidget.getDomNode();this._register(this._editor.onDidChangeConfiguration(u=>{this._readConfigurationChange(u)})),this._register(se(l,Le.CONTEXT_MENU,async u=>{this._onContextMenu(at(l),u)})),this._stickyScrollFocusedContextKey=B.stickyScrollFocused.bindTo(this._contextKeyService),this._stickyScrollVisibleContextKey=B.stickyScrollVisible.bindTo(this._contextKeyService);const c=this._register(pu(l));this._register(c.onDidBlur(u=>{this._positionRevealed===!1&&l.clientHeight===0?(this._focusedStickyElementIndex=-1,this.focus()):this._disposeFocusStickyScrollStore()})),this._register(c.onDidFocus(u=>{this.focus()})),this._registerMouseListeners(),this._register(se(l,Le.MOUSE_DOWN,u=>{this._onMouseDown=!0}))}static get(e){return e.getContribution($j.ID)}_disposeFocusStickyScrollStore(){var e;this._stickyScrollFocusedContextKey.set(!1),(e=this._focusDisposableStore)==null||e.dispose(),this._focused=!1,this._positionRevealed=!1,this._onMouseDown=!1}focus(){if(this._onMouseDown){this._onMouseDown=!1,this._editor.focus();return}this._stickyScrollFocusedContextKey.get()!==!0&&(this._focused=!0,this._focusDisposableStore=new le,this._stickyScrollFocusedContextKey.set(!0),this._focusedStickyElementIndex=this._stickyScrollWidget.lineNumbers.length-1,this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex))}focusNext(){this._focusedStickyElementIndex<this._stickyScrollWidget.lineNumberCount-1&&this._focusNav(!0)}focusPrevious(){this._focusedStickyElementIndex>0&&this._focusNav(!1)}selectEditor(){this._editor.focus()}_focusNav(e){this._focusedStickyElementIndex=e?this._focusedStickyElementIndex+1:this._focusedStickyElementIndex-1,this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex)}goToFocused(){const e=this._stickyScrollWidget.lineNumbers;this._disposeFocusStickyScrollStore(),this._revealPosition({lineNumber:e[this._focusedStickyElementIndex],column:1})}_revealPosition(e){this._reveaInEditor(e,()=>this._editor.revealPosition(e))}_revealLineInCenterIfOutsideViewport(e){this._reveaInEditor(e,()=>this._editor.revealLineInCenterIfOutsideViewport(e.lineNumber,0))}_reveaInEditor(e,t){this._focused&&this._disposeFocusStickyScrollStore(),this._positionRevealed=!0,t(),this._editor.setSelection(M.fromPositions(e)),this._editor.focus()}_registerMouseListeners(){const e=this._register(new le),t=this._register(new l5(this._editor,{extractLineNumberFromMouseEvent:s=>{const r=this._stickyScrollWidget.getEditorPositionFromNode(s.target.element);return r?r.lineNumber:0}})),i=s=>{if(!this._editor.hasModel()||s.target.type!==12||s.target.detail!==this._stickyScrollWidget.getId())return null;const r=s.target.element;if(!r||r.innerText!==r.innerHTML)return null;const a=this._stickyScrollWidget.getEditorPositionFromNode(r);return a?{range:new M(a.lineNumber,a.column,a.lineNumber,a.column+r.innerText.length),textElement:r}:null},n=this._stickyScrollWidget.getDomNode();this._register(Bn(n,Le.CLICK,s=>{if(s.ctrlKey||s.altKey||s.metaKey||!s.leftButton)return;if(s.shiftKey){const c=this._stickyScrollWidget.getLineIndexFromChildDomNode(s.target);if(c===null)return;const u=new G(this._endLineNumbers[c],1);this._revealLineInCenterIfOutsideViewport(u);return}if(this._stickyScrollWidget.isInFoldingIconDomNode(s.target)){const c=this._stickyScrollWidget.getLineNumberFromChildDomNode(s.target);this._toggleFoldingRegionForLine(c);return}if(!this._stickyScrollWidget.isInStickyLine(s.target))return;let l=this._stickyScrollWidget.getEditorPositionFromNode(s.target);if(!l){const c=this._stickyScrollWidget.getLineNumberFromChildDomNode(s.target);if(c===null)return;l=new G(c,1)}this._revealPosition(l)})),this._register(Bn(n,Le.MOUSE_MOVE,s=>{if(s.shiftKey){const r=this._stickyScrollWidget.getLineIndexFromChildDomNode(s.target);if(r===null||this._showEndForLine!==null&&this._showEndForLine===r)return;this._showEndForLine=r,this._renderStickyScroll();return}this._showEndForLine!==void 0&&(this._showEndForLine=void 0,this._renderStickyScroll())})),this._register(se(n,Le.MOUSE_LEAVE,s=>{this._showEndForLine!==void 0&&(this._showEndForLine=void 0,this._renderStickyScroll())})),this._register(t.onMouseMoveOrRelevantKeyDown(([s,r])=>{const a=i(s);if(!a||!s.hasTriggerModifier||!this._editor.hasModel()){e.clear();return}const{range:l,textElement:c}=a;if(!l.equalsRange(this._stickyRangeProjectedOnEditor))this._stickyRangeProjectedOnEditor=l,e.clear();else if(c.style.textDecoration==="underline")return;const u=new An;e.add(it(()=>u.dispose(!0)));let f;EI(this._languageFeaturesService.definitionProvider,this._editor.getModel(),new G(l.startLineNumber,l.startColumn+1),!1,u.token).then(g=>{if(!u.token.isCancellationRequested)if(g.length!==0){this._candidateDefinitionsLength=g.length;const p=c;f!==p?(e.clear(),f=p,f.style.textDecoration="underline",e.add(it(()=>{f.style.textDecoration="none"}))):f||(f=p,f.style.textDecoration="underline",e.add(it(()=>{f.style.textDecoration="none"})))}else e.clear()})})),this._register(t.onCancel(()=>{e.clear()})),this._register(t.onExecute(async s=>{if(s.target.type!==12||s.target.detail!==this._stickyScrollWidget.getId())return;const r=this._stickyScrollWidget.getEditorPositionFromNode(s.target.element);r&&(!this._editor.hasModel()||!this._stickyRangeProjectedOnEditor||(this._candidateDefinitionsLength>1&&(this._focused&&this._disposeFocusStickyScrollStore(),this._revealPosition({lineNumber:r.lineNumber,column:1})),this._instaService.invokeFunction(xpe,s,this._editor,{uri:this._editor.getModel().uri,range:this._stickyRangeProjectedOnEditor})))}))}_onContextMenu(e,t){const i=new td(e,t);this._contextMenuService.showContextMenu({menuId:qe.StickyScrollContext,getAnchor:()=>i})}_toggleFoldingRegionForLine(e){if(!this._foldingModel||e===null)return;const t=this._stickyScrollWidget.getRenderedStickyLine(e),i=t==null?void 0:t.foldingIcon;if(!i)return;PY(this._foldingModel,Number.MAX_VALUE,[e]),i.isCollapsed=!i.isCollapsed;const n=(i.isCollapsed?this._editor.getTopForLineNumber(i.foldingEndLine):this._editor.getTopForLineNumber(i.foldingStartLine))-this._editor.getOption(67)*t.index+1;this._editor.setScrollTop(n),this._renderStickyScroll(e)}_readConfiguration(){const e=this._editor.getOption(116);if(e.enabled===!1){this._editor.removeOverlayWidget(this._stickyScrollWidget),this._sessionStore.clear(),this._enabled=!1;return}else e.enabled&&!this._enabled&&(this._editor.addOverlayWidget(this._stickyScrollWidget),this._sessionStore.add(this._editor.onDidScrollChange(i=>{i.scrollTopChanged&&(this._showEndForLine=void 0,this._renderStickyScroll())})),this._sessionStore.add(this._editor.onDidLayoutChange(()=>this._onDidResize())),this._sessionStore.add(this._editor.onDidChangeModelTokens(i=>this._onTokensChange(i))),this._sessionStore.add(this._stickyLineCandidateProvider.onDidChangeStickyScroll(()=>{this._showEndForLine=void 0,this._renderStickyScroll()})),this._enabled=!0);this._editor.getOption(68).renderType===2&&this._sessionStore.add(this._editor.onDidChangeCursorPosition(()=>{this._showEndForLine=void 0,this._renderStickyScroll(0)}))}_readConfigurationChange(e){(e.hasChanged(116)||e.hasChanged(73)||e.hasChanged(67)||e.hasChanged(111)||e.hasChanged(68))&&this._readConfiguration(),e.hasChanged(68)&&this._renderStickyScroll(0)}_needsUpdate(e){const t=this._stickyScrollWidget.getCurrentLines();for(const i of t)for(const n of e.ranges)if(i>=n.fromLineNumber&&i<=n.toLineNumber)return!0;return!1}_onTokensChange(e){this._needsUpdate(e)&&this._renderStickyScroll(0)}_onDidResize(){const t=this._editor.getLayoutInfo().height/this._editor.getOption(67);this._maxStickyLines=Math.round(t*.25)}async _renderStickyScroll(e){const t=this._editor.getModel();if(!t||t.isTooLargeForTokenization()){this._resetState();return}const i=this._updateAndGetMinRebuildFromLine(e),n=this._stickyLineCandidateProvider.getVersionId();if(n===void 0||n===t.getVersionId())if(!this._focused)await this._updateState(i);else if(this._focusedStickyElementIndex===-1)await this._updateState(i),this._focusedStickyElementIndex=this._stickyScrollWidget.lineNumberCount-1,this._focusedStickyElementIndex!==-1&&this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex);else{const r=this._stickyScrollWidget.lineNumbers[this._focusedStickyElementIndex];await this._updateState(i),this._stickyScrollWidget.lineNumberCount===0?this._focusedStickyElementIndex=-1:(this._stickyScrollWidget.lineNumbers.includes(r)||(this._focusedStickyElementIndex=this._stickyScrollWidget.lineNumberCount-1),this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex))}}_updateAndGetMinRebuildFromLine(e){if(e!==void 0){const t=this._minRebuildFromLine!==void 0?this._minRebuildFromLine:1/0;this._minRebuildFromLine=Math.min(e,t)}return this._minRebuildFromLine}async _updateState(e){var i;this._minRebuildFromLine=void 0,this._foldingModel=await((i=Xm.get(this._editor))==null?void 0:i.getFoldingModel())??void 0,this._widgetState=this.findScrollWidgetState();const t=this._widgetState.startLineNumbers.length>0;this._stickyScrollVisibleContextKey.set(t),this._stickyScrollWidget.setState(this._widgetState,this._foldingModel,e)}async _resetState(){this._minRebuildFromLine=void 0,this._foldingModel=void 0,this._widgetState=Fk.Empty,this._stickyScrollVisibleContextKey.set(!1),this._stickyScrollWidget.setState(void 0,void 0)}findScrollWidgetState(){const e=this._editor.getOption(67),t=Math.min(this._maxStickyLines,this._editor.getOption(116).maxLineCount),i=this._editor.getScrollTop();let n=0;const s=[],r=[],a=this._editor.getVisibleRanges();if(a.length!==0){const l=new Bk(a[0].startLineNumber,a[a.length-1].endLineNumber),c=this._stickyLineCandidateProvider.getCandidateStickyLinesIntersecting(l);for(const u of c){const f=u.startLineNumber,g=u.endLineNumber,p=u.nestingDepth;if(g-f>0){const _=(p-1)*e,b=p*e,y=this._editor.getBottomForLineNumber(f)-i,S=this._editor.getTopForLineNumber(g)-i,L=this._editor.getBottomForLineNumber(g)-i;if(_>S&&_<=L){s.push(f),r.push(g+1),n=L-b;break}else b>y&&b<=L&&(s.push(f),r.push(g+1));if(s.length===t)break}}}return this._endLineNumbers=r,new Fk(s,r,n,this._showEndForLine)}dispose(){super.dispose(),this._sessionStore.dispose()}},$j=Qb,Qb.ID="store.contrib.stickyScrollController",Qb);Rg=$j=uXe([pw(1,cl),pw(2,Ue),pw(3,nt),pw(4,On),pw(5,Yl),pw(6,ht)],Rg);class hXe extends na{constructor(){super({id:"editor.action.toggleStickyScroll",title:{...pt("toggleEditorStickyScroll","Toggle Editor Sticky Scroll"),mnemonicTitle:v({key:"mitoggleStickyScroll",comment:["&& denotes a mnemonic"]},"&&Toggle Editor Sticky Scroll")},metadata:{description:pt("toggleEditorStickyScroll.description","Toggle/enable the editor sticky scroll which shows the nested scopes at the top of the viewport")},category:sXe.View,toggled:{condition:de.equals("config.editor.stickyScroll.enabled",!0),title:v("stickyScroll","Sticky Scroll"),mnemonicTitle:v({key:"miStickyScroll",comment:["&& denotes a mnemonic"]},"&&Sticky Scroll")},menu:[{id:qe.CommandPalette},{id:qe.MenubarAppearanceMenu,group:"4_editor",order:3},{id:qe.StickyScrollContext}]})}async run(e){const t=e.get(Ht),i=!t.getValue("editor.stickyScroll.enabled");return t.updateValue("editor.stickyScroll.enabled",i)}}const C5=100;class fXe extends wu{constructor(){super({id:"editor.action.focusStickyScroll",title:{...pt("focusStickyScroll","Focus on the editor sticky scroll"),mnemonicTitle:v({key:"mifocusStickyScroll",comment:["&& denotes a mnemonic"]},"&&Focus Sticky Scroll")},precondition:de.and(de.has("config.editor.stickyScroll.enabled"),B.stickyScrollVisible),menu:[{id:qe.CommandPalette}]})}runEditorCommand(e,t){var i;(i=Rg.get(t))==null||i.focus()}}class gXe extends wu{constructor(){super({id:"editor.action.selectNextStickyScrollLine",title:pt("selectNextStickyScrollLine.title","Select the next editor sticky scroll line"),precondition:B.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:C5,primary:18}})}runEditorCommand(e,t){var i;(i=Rg.get(t))==null||i.focusNext()}}class pXe extends wu{constructor(){super({id:"editor.action.selectPreviousStickyScrollLine",title:pt("selectPreviousStickyScrollLine.title","Select the previous sticky scroll line"),precondition:B.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:C5,primary:16}})}runEditorCommand(e,t){var i;(i=Rg.get(t))==null||i.focusPrevious()}}class mXe extends wu{constructor(){super({id:"editor.action.goToFocusedStickyScrollLine",title:pt("goToFocusedStickyScrollLine.title","Go to the focused sticky scroll line"),precondition:B.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:C5,primary:3}})}runEditorCommand(e,t){var i;(i=Rg.get(t))==null||i.goToFocused()}}class _Xe extends wu{constructor(){super({id:"editor.action.selectEditor",title:pt("selectEditor.title","Select Editor"),precondition:B.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:C5,primary:9}})}runEditorCommand(e,t){var i;(i=Rg.get(t))==null||i.selectEditor()}}oi(Rg.ID,Rg,1);Xi(hXe);Xi(fXe);Xi(pXe);Xi(gXe);Xi(mXe);Xi(_Xe);var kme=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Jx=function(o,e){return function(t,i){e(t,i,o)}};class vXe{constructor(e,t,i,n,s,r){this.range=e,this.insertText=t,this.filterText=i,this.additionalTextEdits=n,this.command=s,this.completion=r}}let jj=class extends Uxe{constructor(e,t,i,n,s,r){super(s.disposable),this.model=e,this.line=t,this.word=i,this.completionModel=n,this._suggestMemoryService=r}canBeReused(e,t,i){return this.model===e&&this.line===t&&this.word.word.length>0&&this.word.startColumn===i.startColumn&&this.word.endColumn<i.endColumn&&this.completionModel.getIncompleteProvider().size===0}get items(){const e=[],{items:t}=this.completionModel,i=this._suggestMemoryService.select(this.model,{lineNumber:this.line,column:this.word.endColumn+this.completionModel.lineContext.characterCountDelta},t),n=ti.slice(t,i),s=ti.slice(t,0,i);let r=5;for(const a of ti.concat(n,s)){if(a.score===du.Default)continue;const l=new M(a.editStart.lineNumber,a.editStart.column,a.editInsertEnd.lineNumber,a.editInsertEnd.column+this.completionModel.lineContext.characterCountDelta),c=a.completion.insertTextRules&&a.completion.insertTextRules&4?{snippet:a.completion.insertText}:a.completion.insertText;e.push(new vXe(l,c,a.filterTextLow??a.labelLow,a.completion.additionalTextEdits,a.completion.command,a)),r-->=0&&a.resolve(Mt.None)}return e}};jj=kme([Jx(5,p5)],jj);let qj=class extends X{constructor(e,t,i,n){super(),this._languageFeatureService=e,this._clipboardService=t,this._suggestMemoryService=i,this._editorService=n,this._store.add(e.inlineCompletionsProvider.register("*",this))}async provideInlineCompletions(e,t,i,n){var p;if(i.selectedSuggestionInfo)return;let s;for(const _ of this._editorService.listCodeEditors())if(_.getModel()===e){s=_;break}if(!s)return;const r=s.getOption(90);if(Gw.isAllOff(r))return;e.tokenization.tokenizeIfCheap(t.lineNumber);const a=e.tokenization.getLineTokens(t.lineNumber),l=a.getStandardTokenType(a.findTokenIndexAtOffset(Math.max(t.column-1-1,0)));if(Gw.valueFor(r,l)!=="inline")return;let c=e.getWordAtPosition(t),u;if(c!=null&&c.word||(u=this._getTriggerCharacterInfo(e,t)),!(c!=null&&c.word)&&!u||(c||(c=e.getWordUntilPosition(t)),c.endColumn!==t.column))return;let f;const g=e.getValueInRange(new M(t.lineNumber,1,t.lineNumber,t.column));if(!u&&((p=this._lastResult)!=null&&p.canBeReused(e,t.lineNumber,c))){const _=new wae(g,t.column-this._lastResult.word.endColumn);this._lastResult.completionModel.lineContext=_,this._lastResult.acquire(),f=this._lastResult}else{const _=await HY(this._languageFeatureService.completionProvider,e,t,new LE(void 0,MO.createSuggestFilter(s).itemKind,u==null?void 0:u.providers),u&&{triggerKind:1,triggerCharacter:u.ch},n);let b;_.needsClipboard&&(b=await this._clipboardService.readText());const y=new Up(_.items,t.column,new wae(g,0),RO.None,s.getOption(119),s.getOption(113),{boostFullMatch:!1,firstMatchCanBeWeak:!1},b);f=new jj(e,t.lineNumber,c,y,_,this._suggestMemoryService)}return this._lastResult=f,f}handleItemDidShow(e,t){t.completion.resolve(Mt.None)}freeInlineCompletions(e){e.release()}_getTriggerCharacterInfo(e,t){var s;const i=e.getValueInRange(M.fromPositions({lineNumber:t.lineNumber,column:t.column-1},t)),n=new Set;for(const r of this._languageFeatureService.completionProvider.all(e))(s=r.triggerCharacters)!=null&&s.includes(i)&&n.add(r);if(n.size!==0)return{providers:n,ch:i}}};qj=kme([Jx(0,Ue),Jx(1,Bg),Jx(2,p5),Jx(3,hi)],qj);o0(qj);class bXe extends Ve{constructor(){super({id:"editor.action.forceRetokenize",label:v("forceRetokenize","Developer: Force Retokenize"),alias:"Developer: Force Retokenize",precondition:void 0})}run(e,t){if(!t.hasModel())return;const i=t.getModel();i.tokenization.resetTokenization();const n=new uo;i.tokenization.forceTokenization(i.getLineCount()),n.stop(),console.log(`tokenization took ${n.elapsed()}`)}}be(bXe);const DF=class DF extends na{constructor(){super({id:DF.ID,title:pt({key:"toggle.tabMovesFocus",comment:["Turn on/off use of tab key for moving focus around VS Code"]},"Toggle Tab Key Moves Focus"),precondition:void 0,keybinding:{primary:2091,mac:{primary:1323},weight:100},metadata:{description:pt("tabMovesFocusDescriptions","Determines whether the tab key moves focus around the workbench or inserts the tab character in the current editor. This is also called tab trapping, tab navigation, or tab focus mode.")},f1:!0})}run(){const t=!CS.getTabFocusMode();CS.setTabFocusMode(t),ta(t?v("toggle.tabMovesFocus.on","Pressing Tab will now move focus to the next focusable element"):v("toggle.tabMovesFocus.off","Pressing Tab will now insert the tab character"))}};DF.ID="editor.action.toggleTabFocusMode";let Kj=DF;Xi(Kj);var CXe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Bae=function(o,e){return function(t,i){e(t,i,o)}};let Gj=class extends X{get enabled(){return this._enabled}set enabled(e){e?(this.el.setAttribute("aria-disabled","false"),this.el.tabIndex=0,this.el.style.pointerEvents="auto",this.el.style.opacity="1",this.el.style.cursor="pointer",this._enabled=!1):(this.el.setAttribute("aria-disabled","true"),this.el.tabIndex=-1,this.el.style.pointerEvents="none",this.el.style.opacity="0.4",this.el.style.cursor="default",this._enabled=!0),this._enabled=e}constructor(e,t,i={},n,s){super(),this._link=t,this._hoverService=n,this._enabled=!0,this.el=ge(e,xe("a.monaco-link",{tabIndex:t.tabIndex??0,href:t.href},t.label)),this.hoverDelegate=i.hoverDelegate??sa("mouse"),this.setTooltip(t.title),this.el.setAttribute("role","button");const r=this._register(new Zt(this.el,"click")),a=this._register(new Zt(this.el,"keypress")),l=Ee.chain(a.event,f=>f.map(g=>new Zi(g)).filter(g=>g.keyCode===3)),c=this._register(new Zt(this.el,tn.Tap)).event;this._register(Jo.addTarget(this.el));const u=Ee.any(r.event,l,c);this._register(u(f=>{this.enabled&&(Jt.stop(f,!0),i!=null&&i.opener?i.opener(this._link.href):s.open(this._link.href,{allowCommands:!0}))})),this.enabled=!0}setTooltip(e){this.hoverDelegate.showNativeHover?this.el.title=e??"":!this.hover&&e?this.hover=this._register(this._hoverService.setupManagedHover(this.hoverDelegate,this.el,e)):this.hover&&this.hover.update(e)}};Gj=CXe([Bae(3,qh),Bae(4,Ma)],Gj);var Dme=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Eme=function(o,e){return function(t,i){e(t,i,o)}};const yXe=26;let Yj=class extends X{constructor(e,t){super(),this._editor=e,this.instantiationService=t,this.banner=this._register(this.instantiationService.createInstance(Zj))}hide(){this._editor.setBanner(null,0),this.banner.clear()}show(e){this.banner.show({...e,onClose:()=>{var t;this.hide(),(t=e.onClose)==null||t.call(e)}}),this._editor.setBanner(this.banner.element,yXe)}};Yj=Dme([Eme(1,nt)],Yj);let Zj=class extends X{constructor(e){super(),this.instantiationService=e,this.markdownRenderer=this.instantiationService.createInstance(kg,{}),this.element=xe("div.editor-banner"),this.element.tabIndex=0}getAriaLabel(e){if(e.ariaLabel)return e.ariaLabel;if(typeof e.message=="string")return e.message}getBannerMessage(e){if(typeof e=="string"){const t=xe("span");return t.innerText=e,t}return this.markdownRenderer.render(e).element}clear(){bo(this.element)}show(e){bo(this.element);const t=this.getAriaLabel(e);t&&this.element.setAttribute("aria-label",t);const i=ge(this.element,xe("div.icon-container"));i.setAttribute("aria-hidden","true"),e.icon&&i.appendChild(xe(`div${ut.asCSSSelector(e.icon)}`));const n=ge(this.element,xe("div.message-container"));if(n.setAttribute("aria-hidden","true"),n.appendChild(this.getBannerMessage(e.message)),this.messageActionsContainer=ge(this.element,xe("div.message-actions-container")),e.actions)for(const r of e.actions)this._register(this.instantiationService.createInstance(Gj,this.messageActionsContainer,{...r,tabIndex:-1},{}));const s=ge(this.element,xe("div.action-container"));this.actionBar=this._register(new zl(s)),this.actionBar.push(this._register(new tl("banner.close","Close Banner",ut.asClassName(Yhe),!0,()=>{typeof e.onClose=="function"&&e.onClose()})),{icon:!0,label:!1}),this.actionBar.setFocusable(!1)}};Zj=Dme([Eme(0,nt)],Zj);var eZ=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},B1=function(o,e){return function(t,i){e(t,i,o)}};const wXe=hn("extensions-warning-message",Se.warning,v("warningIcon","Icon shown with a warning message in the extensions editor."));var Y1;let AE=(Y1=class extends X{constructor(e,t,i,n){super(),this._editor=e,this._editorWorkerService=t,this._workspaceTrustService=i,this._highlighter=null,this._bannerClosed=!1,this._updateState=s=>{if(s&&s.hasMore){if(this._bannerClosed)return;const r=Math.max(s.ambiguousCharacterCount,s.nonBasicAsciiCharacterCount,s.invisibleCharacterCount);let a;if(s.nonBasicAsciiCharacterCount>=r)a={message:v("unicodeHighlighting.thisDocumentHasManyNonBasicAsciiUnicodeCharacters","This document contains many non-basic ASCII unicode characters"),command:new OE};else if(s.ambiguousCharacterCount>=r)a={message:v("unicodeHighlighting.thisDocumentHasManyAmbiguousUnicodeCharacters","This document contains many ambiguous unicode characters"),command:new TC};else if(s.invisibleCharacterCount>=r)a={message:v("unicodeHighlighting.thisDocumentHasManyInvisibleUnicodeCharacters","This document contains many invisible unicode characters"),command:new PE};else throw new Error("Unreachable");this._bannerController.show({id:"unicodeHighlightBanner",message:a.message,icon:wXe,actions:[{label:a.command.shortLabel,href:`command:${a.command.id}`}],onClose:()=>{this._bannerClosed=!0}})}else this._bannerController.hide()},this._bannerController=this._register(n.createInstance(Yj,e)),this._register(this._editor.onDidChangeModel(()=>{this._bannerClosed=!1,this._updateHighlighter()})),this._options=e.getOption(126),this._register(i.onDidChangeTrust(s=>{this._updateHighlighter()})),this._register(e.onDidChangeConfiguration(s=>{s.hasChanged(126)&&(this._options=e.getOption(126),this._updateHighlighter())})),this._updateHighlighter()}dispose(){this._highlighter&&(this._highlighter.dispose(),this._highlighter=null),super.dispose()}_updateHighlighter(){if(this._updateState(null),this._highlighter&&(this._highlighter.dispose(),this._highlighter=null),!this._editor.hasModel())return;const e=SXe(this._workspaceTrustService.isWorkspaceTrusted(),this._options);if([e.nonBasicASCII,e.ambiguousCharacters,e.invisibleCharacters].every(i=>i===!1))return;const t={nonBasicASCII:e.nonBasicASCII,ambiguousCharacters:e.ambiguousCharacters,invisibleCharacters:e.invisibleCharacters,includeComments:e.includeComments,includeStrings:e.includeStrings,allowedCodePoints:Object.keys(e.allowedCharacters).map(i=>i.codePointAt(0)),allowedLocales:Object.keys(e.allowedLocales).map(i=>i==="_os"?new Intl.NumberFormat().resolvedOptions().locale:i==="_vscode"?VLe:i)};this._editorWorkerService.canComputeUnicodeHighlights(this._editor.getModel().uri)?this._highlighter=new Xj(this._editor,t,this._updateState,this._editorWorkerService):this._highlighter=new LXe(this._editor,t,this._updateState)}getDecorationInfo(e){return this._highlighter?this._highlighter.getDecorationInfo(e):null}},Y1.ID="editor.contrib.unicodeHighlighter",Y1);AE=eZ([B1(1,Aa),B1(2,uue),B1(3,nt)],AE);function SXe(o,e){return{nonBasicASCII:e.nonBasicASCII===xl?!o:e.nonBasicASCII,ambiguousCharacters:e.ambiguousCharacters,invisibleCharacters:e.invisibleCharacters,includeComments:e.includeComments===xl?!o:e.includeComments,includeStrings:e.includeStrings===xl?!o:e.includeStrings,allowedCharacters:e.allowedCharacters,allowedLocales:e.allowedLocales}}let Xj=class extends X{constructor(e,t,i,n){super(),this._editor=e,this._options=t,this._updateState=i,this._editorWorkerService=n,this._model=this._editor.getModel(),this._decorations=this._editor.createDecorationsCollection(),this._updateSoon=this._register(new Oi(()=>this._update(),250)),this._register(this._editor.onDidChangeModelContent(()=>{this._updateSoon.schedule()})),this._updateSoon.schedule()}dispose(){this._decorations.clear(),super.dispose()}_update(){if(this._model.isDisposed())return;if(!this._model.mightContainNonBasicASCII()){this._decorations.clear();return}const e=this._model.getVersionId();this._editorWorkerService.computedUnicodeHighlights(this._model.uri,this._options).then(t=>{if(this._model.isDisposed()||this._model.getVersionId()!==e)return;this._updateState(t);const i=[];if(!t.hasMore)for(const n of t.ranges)i.push({range:n,options:YO.instance.getDecorationFromOptions(this._options)});this._decorations.set(i)})}getDecorationInfo(e){if(!this._decorations.has(e))return null;const t=this._editor.getModel();if(!VG(t,e))return null;const i=t.getValueInRange(e.range);return{reason:Tme(i,this._options),inComment:zG(t,e),inString:UG(t,e)}}};Xj=eZ([B1(3,Aa)],Xj);class LXe extends X{constructor(e,t,i){super(),this._editor=e,this._options=t,this._updateState=i,this._model=this._editor.getModel(),this._decorations=this._editor.createDecorationsCollection(),this._updateSoon=this._register(new Oi(()=>this._update(),250)),this._register(this._editor.onDidLayoutChange(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidScrollChange(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidChangeHiddenAreas(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidChangeModelContent(()=>{this._updateSoon.schedule()})),this._updateSoon.schedule()}dispose(){this._decorations.clear(),super.dispose()}_update(){if(this._model.isDisposed())return;if(!this._model.mightContainNonBasicASCII()){this._decorations.clear();return}const e=this._editor.getVisibleRanges(),t=[],i={ranges:[],ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0,hasMore:!1};for(const n of e){const s=eK.computeUnicodeHighlights(this._model,this._options,n);for(const r of s.ranges)i.ranges.push(r);i.ambiguousCharacterCount+=i.ambiguousCharacterCount,i.invisibleCharacterCount+=i.invisibleCharacterCount,i.nonBasicAsciiCharacterCount+=i.nonBasicAsciiCharacterCount,i.hasMore=i.hasMore||s.hasMore}if(!i.hasMore)for(const n of i.ranges)t.push({range:n,options:YO.instance.getDecorationFromOptions(this._options)});this._updateState(i),this._decorations.set(t)}getDecorationInfo(e){if(!this._decorations.has(e))return null;const t=this._editor.getModel(),i=t.getValueInRange(e.range);return VG(t,e)?{reason:Tme(i,this._options),inComment:zG(t,e),inString:UG(t,e)}:null}}const Ime=v("unicodeHighlight.configureUnicodeHighlightOptions","Configure Unicode Highlight Options");let Qj=class{constructor(e,t,i){this._editor=e,this._languageService=t,this._openerService=i,this.hoverOrdinal=5}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1)return[];const i=this._editor.getModel(),n=this._editor.getContribution(AE.ID);if(!n)return[];const s=[],r=new Set;let a=300;for(const l of t){const c=n.getDecorationInfo(l);if(!c)continue;const f=i.getValueInRange(l.range).codePointAt(0),g=M9(f);let p;switch(c.reason.kind){case 0:{ZE(c.reason.confusableWith)?p=v("unicodeHighlight.characterIsAmbiguousASCII","The character {0} could be confused with the ASCII character {1}, which is more common in source code.",g,M9(c.reason.confusableWith.codePointAt(0))):p=v("unicodeHighlight.characterIsAmbiguous","The character {0} could be confused with the character {1}, which is more common in source code.",g,M9(c.reason.confusableWith.codePointAt(0)));break}case 1:p=v("unicodeHighlight.characterIsInvisible","The character {0} is invisible.",g);break;case 2:p=v("unicodeHighlight.characterIsNonBasicAscii","The character {0} is not a basic ASCII character.",g);break}if(r.has(p))continue;r.add(p);const _={codePoint:f,reason:c.reason,inComment:c.inComment,inString:c.inString},b=v("unicodeHighlight.adjustSettings","Adjust settings"),y=`command:${ZO.ID}?${encodeURIComponent(JSON.stringify(_))}`,S=new Xo("",!0).appendMarkdown(p).appendText(" ").appendLink(y,b,Ime);s.push(new ed(this,l.range,[S],!1,a++))}return s}renderHoverParts(e,t){return QUe(e,t,this._editor,this._languageService,this._openerService)}};Qj=eZ([B1(1,In),B1(2,Ma)],Qj);function Jj(o){return`U+${o.toString(16).padStart(4,"0")}`}function M9(o){let e=`\`${Jj(o)}\``;return Kv.isInvisibleCharacter(o)||(e+=` "${`${xXe(o)}`}"`),e}function xXe(o){return o===96?"`` ` ``":"`"+String.fromCodePoint(o)+"`"}function Tme(o,e){return eK.computeUnicodeHighlightReason(o,e)}const EF=class EF{constructor(){this.map=new Map}getDecorationFromOptions(e){return this.getDecoration(!e.includeComments,!e.includeStrings)}getDecoration(e,t){const i=`${e}${t}`;let n=this.map.get(i);return n||(n=Dt.createDynamic({description:"unicode-highlight",stickiness:1,className:"unicode-highlight",showIfCollapsed:!0,overviewRuler:null,minimap:null,hideInCommentTokens:e,hideInStringTokens:t}),this.map.set(i,n)),n}};EF.instance=new EF;let YO=EF;class kXe extends Ve{constructor(){super({id:TC.ID,label:v("action.unicodeHighlight.disableHighlightingInComments","Disable highlighting of characters in comments"),alias:"Disable highlighting of characters in comments",precondition:void 0}),this.shortLabel=v("unicodeHighlight.disableHighlightingInComments.shortLabel","Disable Highlight In Comments")}async run(e,t,i){const n=e==null?void 0:e.get(Ht);n&&this.runAction(n)}async runAction(e){await e.updateValue(Ca.includeComments,!1,2)}}class DXe extends Ve{constructor(){super({id:TC.ID,label:v("action.unicodeHighlight.disableHighlightingInStrings","Disable highlighting of characters in strings"),alias:"Disable highlighting of characters in strings",precondition:void 0}),this.shortLabel=v("unicodeHighlight.disableHighlightingInStrings.shortLabel","Disable Highlight In Strings")}async run(e,t,i){const n=e==null?void 0:e.get(Ht);n&&this.runAction(n)}async runAction(e){await e.updateValue(Ca.includeStrings,!1,2)}}const IF=class IF extends Ve{constructor(){super({id:IF.ID,label:v("action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters","Disable highlighting of ambiguous characters"),alias:"Disable highlighting of ambiguous characters",precondition:void 0}),this.shortLabel=v("unicodeHighlight.disableHighlightingOfAmbiguousCharacters.shortLabel","Disable Ambiguous Highlight")}async run(e,t,i){const n=e==null?void 0:e.get(Ht);n&&this.runAction(n)}async runAction(e){await e.updateValue(Ca.ambiguousCharacters,!1,2)}};IF.ID="editor.action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters";let TC=IF;const TF=class TF extends Ve{constructor(){super({id:TF.ID,label:v("action.unicodeHighlight.disableHighlightingOfInvisibleCharacters","Disable highlighting of invisible characters"),alias:"Disable highlighting of invisible characters",precondition:void 0}),this.shortLabel=v("unicodeHighlight.disableHighlightingOfInvisibleCharacters.shortLabel","Disable Invisible Highlight")}async run(e,t,i){const n=e==null?void 0:e.get(Ht);n&&this.runAction(n)}async runAction(e){await e.updateValue(Ca.invisibleCharacters,!1,2)}};TF.ID="editor.action.unicodeHighlight.disableHighlightingOfInvisibleCharacters";let PE=TF;const NF=class NF extends Ve{constructor(){super({id:NF.ID,label:v("action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters","Disable highlighting of non basic ASCII characters"),alias:"Disable highlighting of non basic ASCII characters",precondition:void 0}),this.shortLabel=v("unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters.shortLabel","Disable Non ASCII Highlight")}async run(e,t,i){const n=e==null?void 0:e.get(Ht);n&&this.runAction(n)}async runAction(e){await e.updateValue(Ca.nonBasicASCII,!1,2)}};NF.ID="editor.action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters";let OE=NF;const RF=class RF extends Ve{constructor(){super({id:RF.ID,label:v("action.unicodeHighlight.showExcludeOptions","Show Exclude Options"),alias:"Show Exclude Options",precondition:void 0})}async run(e,t,i){const{codePoint:n,reason:s,inString:r,inComment:a}=i,l=String.fromCodePoint(n),c=e.get(Rc),u=e.get(Ht);function f(_){return Kv.isInvisibleCharacter(_)?v("unicodeHighlight.excludeInvisibleCharFromBeingHighlighted","Exclude {0} (invisible character) from being highlighted",Jj(_)):v("unicodeHighlight.excludeCharFromBeingHighlighted","Exclude {0} from being highlighted",`${Jj(_)} "${l}"`)}const g=[];if(s.kind===0)for(const _ of s.notAmbiguousInLocales)g.push({label:v("unicodeHighlight.allowCommonCharactersInLanguage",'Allow unicode characters that are more common in the language "{0}".',_),run:async()=>{IXe(u,[_])}});if(g.push({label:f(n),run:()=>EXe(u,[n])}),a){const _=new kXe;g.push({label:_.label,run:async()=>_.runAction(u)})}else if(r){const _=new DXe;g.push({label:_.label,run:async()=>_.runAction(u)})}if(s.kind===0){const _=new TC;g.push({label:_.label,run:async()=>_.runAction(u)})}else if(s.kind===1){const _=new PE;g.push({label:_.label,run:async()=>_.runAction(u)})}else if(s.kind===2){const _=new OE;g.push({label:_.label,run:async()=>_.runAction(u)})}else TXe(s);const p=await c.pick(g,{title:Ime});p&&await p.run()}};RF.ID="editor.action.unicodeHighlight.showExcludeOptions";let ZO=RF;async function EXe(o,e){const t=o.getValue(Ca.allowedCharacters);let i;typeof t=="object"&&t?i=t:i={};for(const n of e)i[String.fromCodePoint(n)]=!0;await o.updateValue(Ca.allowedCharacters,i,2)}async function IXe(o,e){var n;const t=(n=o.inspect(Ca.allowedLocales).user)==null?void 0:n.value;let i;typeof t=="object"&&t?i=Object.assign({},t):i={};for(const s of e)i[s]=!0;await o.updateValue(Ca.allowedLocales,i,2)}function TXe(o){throw new Error(`Unexpected value: ${o}`)}be(TC);be(PE);be(OE);be(ZO);oi(AE.ID,AE,1);jC.register(Qj);var NXe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Wae=function(o,e){return function(t,i){e(t,i,o)}};const Nme="ignoreUnusualLineTerminators";function RXe(o,e,t){o.setModelProperty(e.uri,Nme,t)}function MXe(o,e){return o.getModelProperty(e.uri,Nme)}var Z1;let XO=(Z1=class extends X{constructor(e,t,i){super(),this._editor=e,this._dialogService=t,this._codeEditorService=i,this._isPresentingDialog=!1,this._config=this._editor.getOption(127),this._register(this._editor.onDidChangeConfiguration(n=>{n.hasChanged(127)&&(this._config=this._editor.getOption(127),this._checkForUnusualLineTerminators())})),this._register(this._editor.onDidChangeModel(()=>{this._checkForUnusualLineTerminators()})),this._register(this._editor.onDidChangeModelContent(n=>{n.isUndoing||this._checkForUnusualLineTerminators()})),this._checkForUnusualLineTerminators()}async _checkForUnusualLineTerminators(){if(this._config==="off"||!this._editor.hasModel())return;const e=this._editor.getModel();if(!e.mightContainUnusualLineTerminators()||MXe(this._codeEditorService,e)===!0||this._editor.getOption(92))return;if(this._config==="auto"){e.removeUnusualLineTerminators(this._editor.getSelections());return}if(this._isPresentingDialog)return;let i;try{this._isPresentingDialog=!0,i=await this._dialogService.confirm({title:v("unusualLineTerminators.title","Unusual Line Terminators"),message:v("unusualLineTerminators.message","Detected unusual line terminators"),detail:v("unusualLineTerminators.detail","The file '{0}' contains one or more unusual line terminator characters, like Line Separator (LS) or Paragraph Separator (PS).\n\nIt is recommended to remove them from the file. This can be configured via `editor.unusualLineTerminators`.",Dc(e.uri)),primaryButton:v({key:"unusualLineTerminators.fix",comment:["&& denotes a mnemonic"]},"&&Remove Unusual Line Terminators"),cancelButton:v("unusualLineTerminators.ignore","Ignore")})}finally{this._isPresentingDialog=!1}if(!i.confirmed){RXe(this._codeEditorService,e,!0);return}e.removeUnusualLineTerminators(this._editor.getSelections())}},Z1.ID="editor.contrib.unusualLineTerminatorsDetector",Z1);XO=NXe([Wae(1,tI),Wae(2,hi)],XO);oi(XO.ID,XO,1);var AXe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},PXe=function(o,e){return function(t,i){e(t,i,o)}};class Hae{constructor(){this.selector={language:"*"}}provideDocumentHighlights(e,t,i){const n=[],s=e.getWordAtPosition({lineNumber:t.lineNumber,column:t.column});return s?e.isDisposed()?void 0:e.findMatches(s.word,!0,!1,!0,oA,!1).map(a=>({range:a.range,kind:J1.Text})):Promise.resolve(n)}provideMultiDocumentHighlights(e,t,i,n){const s=new co,r=e.getWordAtPosition({lineNumber:t.lineNumber,column:t.column});if(!r)return Promise.resolve(s);for(const a of[e,...i]){if(a.isDisposed())continue;const c=a.findMatches(r.word,!0,!1,!0,oA,!1).map(u=>({range:u.range,kind:J1.Text}));c&&s.set(a.uri,c)}return s}}let eq=class extends X{constructor(e){super(),this._register(e.documentHighlightProvider.register("*",new Hae)),this._register(e.multiDocumentHighlightProvider.register("*",new Hae))}};eq=AXe([PXe(0,Ue)],eq);var Rme=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},YM=function(o,e){return function(t,i){e(t,i,o)}},cs,tq;const tZ=new Pe("hasWordHighlights",!1);function Mme(o,e,t,i){const n=o.ordered(e);return Hq(n.map(s=>()=>Promise.resolve(s.provideDocumentHighlights(e,t,i)).then(void 0,rs)),s=>s!=null).then(s=>{if(s){const r=new co;return r.set(e.uri,s),r}return new co})}function OXe(o,e,t,i,n,s){const r=o.ordered(e);return Hq(r.map(a=>()=>{const l=s.filter(c=>Xce(c)).filter(c=>cK(a.selector,c.uri,c.getLanguageId(),!0,void 0,void 0)>0);return Promise.resolve(a.provideMultiDocumentHighlights(e,t,l,n)).then(void 0,rs)}),a=>a!=null)}class Ame{constructor(e,t,i){this._model=e,this._selection=t,this._wordSeparators=i,this._wordRange=this._getCurrentWordRange(e,t),this._result=null}get result(){return this._result||(this._result=Gs(e=>this._compute(this._model,this._selection,this._wordSeparators,e))),this._result}_getCurrentWordRange(e,t){const i=e.getWordAtPosition(t.getPosition());return i?new M(t.startLineNumber,i.startColumn,t.startLineNumber,i.endColumn):null}isValid(e,t,i){const n=t.startLineNumber,s=t.startColumn,r=t.endColumn,a=this._getCurrentWordRange(e,t);let l=!!(this._wordRange&&this._wordRange.equalsRange(a));for(let c=0,u=i.length;!l&&c<u;c++){const f=i.getRange(c);f&&f.startLineNumber===n&&f.startColumn<=s&&f.endColumn>=r&&(l=!0)}return l}cancel(){this.result.cancel()}}class FXe extends Ame{constructor(e,t,i,n){super(e,t,i),this._providers=n}_compute(e,t,i,n){return Mme(this._providers,e,t.getPosition(),n).then(s=>s||new co)}}class BXe extends Ame{constructor(e,t,i,n,s){super(e,t,i),this._providers=n,this._otherModels=s}_compute(e,t,i,n){return OXe(this._providers,e,t.getPosition(),i,n,this._otherModels).then(s=>s||new co)}}function WXe(o,e,t,i,n){return new FXe(e,t,n,o)}function HXe(o,e,t,i,n,s){return new BXe(e,t,n,o,s)}Ra("_executeDocumentHighlights",async(o,e,t)=>{const i=o.get(Ue),n=await Mme(i.documentHighlightProvider,e,t,Mt.None);return n==null?void 0:n.get(e.uri)});var Nm;let iq=(Nm=class{constructor(e,t,i,n,s){this.toUnhook=new le,this.workerRequestTokenId=0,this.workerRequestCompleted=!1,this.workerRequestValue=new co,this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1,this.runDelayer=this.toUnhook.add(new xc(50)),this.editor=e,this.providers=t,this.multiDocumentProviders=i,this.codeEditorService=s,this._hasWordHighlights=tZ.bindTo(n),this._ignorePositionChangeEvent=!1,this.occurrencesHighlight=this.editor.getOption(81),this.model=this.editor.getModel(),this.toUnhook.add(e.onDidChangeCursorPosition(r=>{this._ignorePositionChangeEvent||this.occurrencesHighlight!=="off"&&this.runDelayer.trigger(()=>{this._onPositionChanged(r)})})),this.toUnhook.add(e.onDidFocusEditorText(r=>{this.occurrencesHighlight!=="off"&&(this.workerRequest||this.runDelayer.trigger(()=>{this._run()}))})),this.toUnhook.add(e.onDidChangeModelContent(r=>{UF(this.model.uri,"output")||this._stopAll()})),this.toUnhook.add(e.onDidChangeModel(r=>{!r.newModelUrl&&r.oldModelUrl?this._stopSingular():cs.query&&this._run()})),this.toUnhook.add(e.onDidChangeConfiguration(r=>{var l,c;const a=this.editor.getOption(81);if(this.occurrencesHighlight!==a)switch(this.occurrencesHighlight=a,a){case"off":this._stopAll();break;case"singleFile":this._stopAll((c=(l=cs.query)==null?void 0:l.modelInfo)==null?void 0:c.model);break;case"multiFile":cs.query&&this._run(!0);break;default:console.warn("Unknown occurrencesHighlight setting value:",a);break}})),this.decorations=this.editor.createDecorationsCollection(),this.workerRequestTokenId=0,this.workerRequest=null,this.workerRequestCompleted=!1,this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1,cs.query&&this._run()}hasDecorations(){return this.decorations.length>0}restore(){this.occurrencesHighlight!=="off"&&(this.runDelayer.cancel(),this._run())}_getSortedHighlights(){return this.decorations.getRanges().sort(M.compareRangesUsingStarts)}moveNext(){const e=this._getSortedHighlights(),i=(e.findIndex(s=>s.containsPosition(this.editor.getPosition()))+1)%e.length,n=e[i];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(n.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(n);const s=this._getWord();if(s){const r=this.editor.getModel().getLineContent(n.startLineNumber);ta(`${r}, ${i+1} of ${e.length} for '${s.word}'`)}}finally{this._ignorePositionChangeEvent=!1}}moveBack(){const e=this._getSortedHighlights(),i=(e.findIndex(s=>s.containsPosition(this.editor.getPosition()))-1+e.length)%e.length,n=e[i];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(n.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(n);const s=this._getWord();if(s){const r=this.editor.getModel().getLineContent(n.startLineNumber);ta(`${r}, ${i+1} of ${e.length} for '${s.word}'`)}}finally{this._ignorePositionChangeEvent=!1}}_removeSingleDecorations(){if(!this.editor.hasModel())return;const e=cs.storedDecorationIDs.get(this.editor.getModel().uri);e&&(this.editor.removeDecorations(e),cs.storedDecorationIDs.delete(this.editor.getModel().uri),this.decorations.length>0&&(this.decorations.clear(),this._hasWordHighlights.set(!1)))}_removeAllDecorations(e){const t=this.codeEditorService.listCodeEditors(),i=[];for(const n of t){if(!n.hasModel()||AD(n.getModel().uri,e==null?void 0:e.uri))continue;const s=cs.storedDecorationIDs.get(n.getModel().uri);if(!s)continue;n.removeDecorations(s),i.push(n.getModel().uri);const r=Jm.get(n);r!=null&&r.wordHighlighter&&r.wordHighlighter.decorations.length>0&&(r.wordHighlighter.decorations.clear(),r.wordHighlighter.workerRequest=null,r.wordHighlighter._hasWordHighlights.set(!1))}for(const n of i)cs.storedDecorationIDs.delete(n)}_stopSingular(){var e,t,i,n;this._removeSingleDecorations(),this.editor.hasTextFocus()&&(((e=this.editor.getModel())==null?void 0:e.uri.scheme)!==Lt.vscodeNotebookCell&&((i=(t=cs.query)==null?void 0:t.modelInfo)==null?void 0:i.model.uri.scheme)!==Lt.vscodeNotebookCell?(cs.query=null,this._run()):(n=cs.query)!=null&&n.modelInfo&&(cs.query.modelInfo=null)),this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1),this.workerRequest!==null&&(this.workerRequest.cancel(),this.workerRequest=null),this.workerRequestCompleted||(this.workerRequestTokenId++,this.workerRequestCompleted=!0)}_stopAll(e){this._removeAllDecorations(e),this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1),this.workerRequest!==null&&(this.workerRequest.cancel(),this.workerRequest=null),this.workerRequestCompleted||(this.workerRequestTokenId++,this.workerRequestCompleted=!0)}_onPositionChanged(e){var t;if(this.occurrencesHighlight==="off"){this._stopAll();return}if(e.reason!==3&&((t=this.editor.getModel())==null?void 0:t.uri.scheme)!==Lt.vscodeNotebookCell){this._stopAll();return}this._run()}_getWord(){const e=this.editor.getSelection(),t=e.startLineNumber,i=e.startColumn;return this.model.isDisposed()?null:this.model.getWordAtPosition({lineNumber:t,column:i})}getOtherModelsToHighlight(e){if(!e)return[];if(e.uri.scheme===Lt.vscodeNotebookCell){const s=[],r=this.codeEditorService.listCodeEditors();for(const a of r){const l=a.getModel();l&&l!==e&&l.uri.scheme===Lt.vscodeNotebookCell&&s.push(l)}return s}const i=[],n=this.codeEditorService.listCodeEditors();for(const s of n){if(!rY(s))continue;const r=s.getModel();r&&e===r.modified&&i.push(r.modified)}if(i.length)return i;if(this.occurrencesHighlight==="singleFile")return[];for(const s of n){const r=s.getModel();r&&r!==e&&i.push(r)}return i}_run(e){var n,s;let t;if(this.editor.hasTextFocus()){const r=this.editor.getSelection();if(!r||r.startLineNumber!==r.endLineNumber){cs.query=null,this._stopAll();return}const a=r.startColumn,l=r.endColumn,c=this._getWord();if(!c||c.startColumn>a||c.endColumn<l){cs.query=null,this._stopAll();return}t=this.workerRequest&&this.workerRequest.isValid(this.model,r,this.decorations),cs.query={modelInfo:{model:this.model,selection:r},word:c}}else if(!cs.query){this._stopAll();return}if(this.lastCursorPositionChangeTime=new Date().getTime(),t)this.workerRequestCompleted&&this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1,this._beginRenderDecorations());else if(AD(this.editor.getModel().uri,(n=cs.query.modelInfo)==null?void 0:n.model.uri)){if(!e){const l=this.decorations.getRanges();for(const c of l)if(c.containsPosition(this.editor.getPosition()))return}this._stopAll(e?this.model:void 0);const r=++this.workerRequestTokenId;this.workerRequestCompleted=!1;const a=this.getOtherModelsToHighlight(this.editor.getModel());if(!cs.query||!cs.query.modelInfo||cs.query.modelInfo.model.isDisposed())return;this.workerRequest=this.computeWithModel(cs.query.modelInfo.model,cs.query.modelInfo.selection,cs.query.word,a),(s=this.workerRequest)==null||s.result.then(l=>{r===this.workerRequestTokenId&&(this.workerRequestCompleted=!0,this.workerRequestValue=l||[],this._beginRenderDecorations())},wt)}}computeWithModel(e,t,i,n){return n.length?HXe(this.multiDocumentProviders,e,t,i,this.editor.getOption(132),n):WXe(this.providers,e,t,i,this.editor.getOption(132))}_beginRenderDecorations(){const e=new Date().getTime(),t=this.lastCursorPositionChangeTime+250;e>=t?(this.renderDecorationsTimer=-1,this.renderDecorations()):this.renderDecorationsTimer=setTimeout(()=>{this.renderDecorations()},t-e)}renderDecorations(){var t,i,n;this.renderDecorationsTimer=-1;const e=this.codeEditorService.listCodeEditors();for(const s of e){const r=Jm.get(s);if(!r)continue;const a=[],l=(t=s.getModel())==null?void 0:t.uri;if(l&&this.workerRequestValue.has(l)){const c=cs.storedDecorationIDs.get(l),u=this.workerRequestValue.get(l);if(u)for(const g of u)g.range&&a.push({range:g.range,options:EYe(g.kind)});let f=[];s.changeDecorations(g=>{f=g.deltaDecorations(c??[],a)}),cs.storedDecorationIDs=cs.storedDecorationIDs.set(l,f),a.length>0&&((i=r.wordHighlighter)==null||i.decorations.set(a),(n=r.wordHighlighter)==null||n._hasWordHighlights.set(!0))}}}dispose(){this._stopSingular(),this.toUnhook.dispose()}},cs=Nm,Nm.storedDecorationIDs=new co,Nm.query=null,Nm);iq=cs=Rme([YM(4,hi)],iq);var Jb;let Jm=(Jb=class extends X{static get(e){return e.getContribution(tq.ID)}constructor(e,t,i,n){super(),this._wordHighlighter=null;const s=()=>{e.hasModel()&&!e.getModel().isTooLargeForTokenization()&&(this._wordHighlighter=new iq(e,i.documentHighlightProvider,i.multiDocumentHighlightProvider,t,n))};this._register(e.onDidChangeModel(r=>{this._wordHighlighter&&(this._wordHighlighter.dispose(),this._wordHighlighter=null),s()})),s()}get wordHighlighter(){return this._wordHighlighter}saveViewState(){return!!(this._wordHighlighter&&this._wordHighlighter.hasDecorations())}moveNext(){var e;(e=this._wordHighlighter)==null||e.moveNext()}moveBack(){var e;(e=this._wordHighlighter)==null||e.moveBack()}restoreViewState(e){this._wordHighlighter&&e&&this._wordHighlighter.restore()}dispose(){this._wordHighlighter&&(this._wordHighlighter.dispose(),this._wordHighlighter=null),super.dispose()}},tq=Jb,Jb.ID="editor.contrib.wordHighlighter",Jb);Jm=tq=Rme([YM(1,ht),YM(2,Ue),YM(3,hi)],Jm);class Pme extends Ve{constructor(e,t){super(t),this._isNext=e}run(e,t){const i=Jm.get(t);i&&(this._isNext?i.moveNext():i.moveBack())}}class VXe extends Pme{constructor(){super(!0,{id:"editor.action.wordHighlight.next",label:v("wordHighlight.next.label","Go to Next Symbol Highlight"),alias:"Go to Next Symbol Highlight",precondition:tZ,kbOpts:{kbExpr:B.editorTextFocus,primary:65,weight:100}})}}class zXe extends Pme{constructor(){super(!1,{id:"editor.action.wordHighlight.prev",label:v("wordHighlight.previous.label","Go to Previous Symbol Highlight"),alias:"Go to Previous Symbol Highlight",precondition:tZ,kbOpts:{kbExpr:B.editorTextFocus,primary:1089,weight:100}})}}class UXe extends Ve{constructor(){super({id:"editor.action.wordHighlight.trigger",label:v("wordHighlight.trigger.label","Trigger Symbol Highlight"),alias:"Trigger Symbol Highlight",precondition:void 0,kbOpts:{kbExpr:B.editorTextFocus,primary:0,weight:100}})}run(e,t,i){const n=Jm.get(t);n&&n.restoreViewState(!0)}}oi(Jm.ID,Jm,0);be(VXe);be(zXe);be(UXe);o0(eq);class y5 extends Bs{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode,this._wordNavigationType=e.wordNavigationType}runEditorCommand(e,t,i){if(!t.hasModel())return;const n=kc(t.getOption(132),t.getOption(131)),s=t.getModel(),r=t.getSelections(),a=r.length>1,l=r.map(c=>{const u=new G(c.positionLineNumber,c.positionColumn),f=this._move(n,s,u,this._wordNavigationType,a);return this._moveTo(c,f,this._inSelectionMode)});if(s.pushStackElement(),t._getViewModel().setCursorStates("moveWordCommand",3,l.map(c=>di.fromModelSelection(c))),l.length===1){const c=new G(l[0].positionLineNumber,l[0].positionColumn);t.revealPosition(c,0)}}_moveTo(e,t,i){return i?new Ke(e.selectionStartLineNumber,e.selectionStartColumn,t.lineNumber,t.column):new Ke(t.lineNumber,t.column,t.lineNumber,t.column)}}class l_ extends y5{_move(e,t,i,n,s){return xi.moveWordLeft(e,t,i,n,s)}}class c_ extends y5{_move(e,t,i,n,s){return xi.moveWordRight(e,t,i,n)}}class $Xe extends l_{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartLeft",precondition:void 0})}}class jXe extends l_{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndLeft",precondition:void 0})}}class qXe extends l_{constructor(){var e;super({inSelectionMode:!1,wordNavigationType:1,id:"cursorWordLeft",precondition:void 0,kbOpts:{kbExpr:de.and(B.textInputFocus,(e=de.and(oI,P4))==null?void 0:e.negate()),primary:2063,mac:{primary:527},weight:100}})}}class KXe extends l_{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartLeftSelect",precondition:void 0})}}class GXe extends l_{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndLeftSelect",precondition:void 0})}}class YXe extends l_{constructor(){var e;super({inSelectionMode:!0,wordNavigationType:1,id:"cursorWordLeftSelect",precondition:void 0,kbOpts:{kbExpr:de.and(B.textInputFocus,(e=de.and(oI,P4))==null?void 0:e.negate()),primary:3087,mac:{primary:1551},weight:100}})}}class ZXe extends l_{constructor(){super({inSelectionMode:!1,wordNavigationType:3,id:"cursorWordAccessibilityLeft",precondition:void 0})}_move(e,t,i,n,s){return super._move(kc(yu.wordSeparators.defaultValue,e.intlSegmenterLocales),t,i,n,s)}}class XXe extends l_{constructor(){super({inSelectionMode:!0,wordNavigationType:3,id:"cursorWordAccessibilityLeftSelect",precondition:void 0})}_move(e,t,i,n,s){return super._move(kc(yu.wordSeparators.defaultValue,e.intlSegmenterLocales),t,i,n,s)}}class QXe extends c_{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartRight",precondition:void 0})}}class JXe extends c_{constructor(){var e;super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndRight",precondition:void 0,kbOpts:{kbExpr:de.and(B.textInputFocus,(e=de.and(oI,P4))==null?void 0:e.negate()),primary:2065,mac:{primary:529},weight:100}})}}class eQe extends c_{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordRight",precondition:void 0})}}class tQe extends c_{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartRightSelect",precondition:void 0})}}class iQe extends c_{constructor(){var e;super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndRightSelect",precondition:void 0,kbOpts:{kbExpr:de.and(B.textInputFocus,(e=de.and(oI,P4))==null?void 0:e.negate()),primary:3089,mac:{primary:1553},weight:100}})}}class nQe extends c_{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordRightSelect",precondition:void 0})}}class sQe extends c_{constructor(){super({inSelectionMode:!1,wordNavigationType:3,id:"cursorWordAccessibilityRight",precondition:void 0})}_move(e,t,i,n,s){return super._move(kc(yu.wordSeparators.defaultValue,e.intlSegmenterLocales),t,i,n,s)}}class oQe extends c_{constructor(){super({inSelectionMode:!0,wordNavigationType:3,id:"cursorWordAccessibilityRightSelect",precondition:void 0})}_move(e,t,i,n,s){return super._move(kc(yu.wordSeparators.defaultValue,e.intlSegmenterLocales),t,i,n,s)}}class w5 extends Bs{constructor(e){super(e),this._whitespaceHeuristics=e.whitespaceHeuristics,this._wordNavigationType=e.wordNavigationType}runEditorCommand(e,t,i){const n=e.get(On);if(!t.hasModel())return;const s=kc(t.getOption(132),t.getOption(131)),r=t.getModel(),a=t.getSelections(),l=t.getOption(6),c=t.getOption(11),u=n.getLanguageConfiguration(r.getLanguageId()).getAutoClosingPairs(),f=t._getViewModel(),g=a.map(p=>{const _=this._delete({wordSeparators:s,model:r,selection:p,whitespaceHeuristics:this._whitespaceHeuristics,autoClosingDelete:t.getOption(9),autoClosingBrackets:l,autoClosingQuotes:c,autoClosingPairs:u,autoClosedCharacters:f.getCursorAutoClosedCharacters()},this._wordNavigationType);return new Ro(_,"")});t.pushUndoStop(),t.executeCommands(this.id,g),t.pushUndoStop()}}class iZ extends w5{_delete(e,t){const i=xi.deleteWordLeft(e,t);return i||new M(1,1,1,1)}}class nZ extends w5{_delete(e,t){const i=xi.deleteWordRight(e,t);if(i)return i;const n=e.model.getLineCount(),s=e.model.getLineMaxColumn(n);return new M(n,s,n,s)}}class rQe extends iZ{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartLeft",precondition:B.writable})}}class aQe extends iZ{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndLeft",precondition:B.writable})}}class lQe extends iZ{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordLeft",precondition:B.writable,kbOpts:{kbExpr:B.textInputFocus,primary:2049,mac:{primary:513},weight:100}})}}class cQe extends nZ{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartRight",precondition:B.writable})}}class dQe extends nZ{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndRight",precondition:B.writable})}}class uQe extends nZ{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordRight",precondition:B.writable,kbOpts:{kbExpr:B.textInputFocus,primary:2068,mac:{primary:532},weight:100}})}}class hQe extends Ve{constructor(){super({id:"deleteInsideWord",precondition:B.writable,label:v("deleteInsideWord","Delete Word"),alias:"Delete Word"})}run(e,t,i){if(!t.hasModel())return;const n=kc(t.getOption(132),t.getOption(131)),s=t.getModel(),a=t.getSelections().map(l=>{const c=xi.deleteInsideWord(n,s,l);return new Ro(c,"")});t.pushUndoStop(),t.executeCommands(this.id,a),t.pushUndoStop()}}Re(new $Xe);Re(new jXe);Re(new qXe);Re(new KXe);Re(new GXe);Re(new YXe);Re(new QXe);Re(new JXe);Re(new eQe);Re(new tQe);Re(new iQe);Re(new nQe);Re(new ZXe);Re(new XXe);Re(new sQe);Re(new oQe);Re(new rQe);Re(new aQe);Re(new lQe);Re(new cQe);Re(new dQe);Re(new uQe);be(hQe);class fQe extends w5{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordPartLeft",precondition:B.writable,kbOpts:{kbExpr:B.textInputFocus,primary:0,mac:{primary:769},weight:100}})}_delete(e,t){const i=q4.deleteWordPartLeft(e);return i||new M(1,1,1,1)}}class gQe extends w5{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordPartRight",precondition:B.writable,kbOpts:{kbExpr:B.textInputFocus,primary:0,mac:{primary:788},weight:100}})}_delete(e,t){const i=q4.deleteWordPartRight(e);if(i)return i;const n=e.model.getLineCount(),s=e.model.getLineMaxColumn(n);return new M(n,s,n,s)}}class Ome extends y5{_move(e,t,i,n,s){return q4.moveWordPartLeft(e,t,i,s)}}class pQe extends Ome{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordPartLeft",precondition:void 0,kbOpts:{kbExpr:B.textInputFocus,primary:0,mac:{primary:783},weight:100}})}}ii.registerCommandAlias("cursorWordPartStartLeft","cursorWordPartLeft");class mQe extends Ome{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordPartLeftSelect",precondition:void 0,kbOpts:{kbExpr:B.textInputFocus,primary:0,mac:{primary:1807},weight:100}})}}ii.registerCommandAlias("cursorWordPartStartLeftSelect","cursorWordPartLeftSelect");class Fme extends y5{_move(e,t,i,n,s){return q4.moveWordPartRight(e,t,i)}}class _Qe extends Fme{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordPartRight",precondition:void 0,kbOpts:{kbExpr:B.textInputFocus,primary:0,mac:{primary:785},weight:100}})}}class vQe extends Fme{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordPartRightSelect",precondition:void 0,kbOpts:{kbExpr:B.textInputFocus,primary:0,mac:{primary:1809},weight:100}})}}Re(new fQe);Re(new gQe);Re(new pQe);Re(new mQe);Re(new _Qe);Re(new vQe);const pZ=class pZ extends X{constructor(e){super(),this.editor=e,this._register(this.editor.onDidAttemptReadOnlyEdit(()=>this._onDidAttemptReadOnlyEdit()))}_onDidAttemptReadOnlyEdit(){const e=nl.get(this.editor);if(e&&this.editor.hasModel()){let t=this.editor.getOptions().get(93);t||(this.editor.isSimpleWidget?t=new Xo(v("editor.simple.readonly","Cannot edit in read-only input")):t=new Xo(v("editor.readonly","Cannot edit in read-only editor"))),e.showMessage(t,this.editor.getPosition())}}};pZ.ID="editor.contrib.readOnlyMessageController";let QO=pZ;oi(QO.ID,QO,2);var bQe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Vae=function(o,e){return function(t,i){e(t,i,o)}};let nq=class extends X{constructor(e,t,i){super(),this._textModel=e,this._languageFeaturesService=t,this._outlineModelService=i,this._currentModel=Wt(this,void 0);const n=No("documentSymbolProvider.onDidChange",this._languageFeaturesService.documentSymbolProvider.onDidChange),s=No("_textModel.onDidChangeContent",Ee.debounce(r=>this._textModel.onDidChangeContent(r),()=>{},100));this._register(ka(async(r,a)=>{n.read(r),s.read(r);const l=a.add(new o9e),c=await this._outlineModelService.getOrCreate(this._textModel,l.token);a.isDisposed||this._currentModel.set(c,void 0)}))}getBreadcrumbItems(e,t){const i=this._currentModel.read(t);if(!i)return[];const n=i.asListOfDocumentSymbols().filter(s=>e.contains(s.range.startLineNumber)&&!e.contains(s.range.endLineNumber));return n.sort(mle(Yr(s=>s.range.endLineNumber-s.range.startLineNumber,sd))),n.map(s=>({name:s.name,kind:s.kind,startLineNumber:s.range.startLineNumber}))}};nq=bQe([Vae(1,Ue),Vae(2,NI)],nq);QP.setBreadcrumbsSourceFactory((o,e)=>e.createInstance(nq,o));const mZ=class mZ extends X{constructor(e){super(),this.editor=e,this.widget=null,hu&&(this._register(e.onDidChangeConfiguration(()=>this.update())),this.update())}update(){const e=!this.editor.getOption(92);!this.widget&&e?this.widget=new sq(this.editor):this.widget&&!e&&(this.widget.dispose(),this.widget=null)}dispose(){super.dispose(),this.widget&&(this.widget.dispose(),this.widget=null)}};mZ.ID="editor.contrib.iPadShowKeyboard";let JO=mZ;const MF=class MF extends X{constructor(e){super(),this.editor=e,this._domNode=document.createElement("textarea"),this._domNode.className="iPadShowKeyboard",this._register(se(this._domNode,"touchstart",t=>{this.editor.focus()})),this._register(se(this._domNode,"focus",t=>{this.editor.focus()})),this.editor.addOverlayWidget(this)}dispose(){this.editor.removeOverlayWidget(this),super.dispose()}getId(){return MF.ID}getDomNode(){return this._domNode}getPosition(){return{preference:1}}};MF.ID="editor.contrib.ShowKeyboardWidget";let sq=MF;oi(JO.ID,JO,3);var CQe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},zae=function(o,e){return function(t,i){e(t,i,o)}},oq,eC;let FE=(eC=class extends X{static get(e){return e.getContribution(oq.ID)}constructor(e,t,i){super(),this._editor=e,this._languageService=i,this._widget=null,this._register(this._editor.onDidChangeModel(n=>this.stop())),this._register(this._editor.onDidChangeModelLanguage(n=>this.stop())),this._register(Kn.onDidChange(n=>this.stop())),this._register(this._editor.onKeyUp(n=>n.keyCode===9&&this.stop()))}dispose(){this.stop(),super.dispose()}launch(){this._widget||this._editor.hasModel()&&(this._widget=new rq(this._editor,this._languageService))}stop(){this._widget&&(this._widget.dispose(),this._widget=null)}},oq=eC,eC.ID="editor.contrib.inspectTokens",eC);FE=oq=CQe([zae(1,Ql),zae(2,In)],FE);class yQe extends Ve{constructor(){super({id:"editor.action.inspectTokens",label:f6.inspectTokensAction,alias:"Developer: Inspect Tokens",precondition:void 0})}run(e,t){const i=FE.get(t);i==null||i.launch()}}function wQe(o){let e="";for(let t=0,i=o.length;t<i;t++){const n=o.charCodeAt(t);switch(n){case 9:e+="";break;case 32:e+="";break;default:e+=String.fromCharCode(n)}}return e}function SQe(o,e){const t=Kn.get(e);if(t)return t;const i=o.encodeLanguageId(e);return{getInitialState:()=>uS,tokenize:(n,s,r)=>RK(e,r),tokenizeEncoded:(n,s,r)=>x4(i,r)}}const AF=class AF extends X{constructor(e,t){super(),this.allowEditorOverflow=!0,this._editor=e,this._languageService=t,this._model=this._editor.getModel(),this._domNode=document.createElement("div"),this._domNode.className="tokens-inspect-widget",this._tokenizationSupport=SQe(this._languageService.languageIdCodec,this._model.getLanguageId()),this._compute(this._editor.getPosition()),this._register(this._editor.onDidChangeCursorPosition(i=>this._compute(this._editor.getPosition()))),this._editor.addContentWidget(this)}dispose(){this._editor.removeContentWidget(this),super.dispose()}getId(){return AF._ID}_compute(e){const t=this._getTokensAtLine(e.lineNumber);let i=0;for(let l=t.tokens1.length-1;l>=0;l--){const c=t.tokens1[l];if(e.column-1>=c.offset){i=l;break}}let n=0;for(let l=t.tokens2.length>>>1;l>=0;l--)if(e.column-1>=t.tokens2[l<<1]){n=l;break}const s=this._model.getLineContent(e.lineNumber);let r="";if(i<t.tokens1.length){const l=t.tokens1[i].offset,c=i+1<t.tokens1.length?t.tokens1[i+1].offset:s.length;r=s.substring(l,c)}Co(this._domNode,xe("h2.tm-token",void 0,wQe(r),xe("span.tm-token-length",void 0,`${r.length} ${r.length===1?"char":"chars"}`))),ge(this._domNode,xe("hr.tokens-inspect-separator",{style:"clear:both"}));const a=(n<<1)+1<t.tokens2.length?this._decodeMetadata(t.tokens2[(n<<1)+1]):null;ge(this._domNode,xe("table.tm-metadata-table",void 0,xe("tbody",void 0,xe("tr",void 0,xe("td.tm-metadata-key",void 0,"language"),xe("td.tm-metadata-value",void 0,`${a?a.languageId:"-?-"}`)),xe("tr",void 0,xe("td.tm-metadata-key",void 0,"token type"),xe("td.tm-metadata-value",void 0,`${a?this._tokenTypeToString(a.tokenType):"-?-"}`)),xe("tr",void 0,xe("td.tm-metadata-key",void 0,"font style"),xe("td.tm-metadata-value",void 0,`${a?this._fontStyleToString(a.fontStyle):"-?-"}`)),xe("tr",void 0,xe("td.tm-metadata-key",void 0,"foreground"),xe("td.tm-metadata-value",void 0,`${a?ue.Format.CSS.formatHex(a.foreground):"-?-"}`)),xe("tr",void 0,xe("td.tm-metadata-key",void 0,"background"),xe("td.tm-metadata-value",void 0,`${a?ue.Format.CSS.formatHex(a.background):"-?-"}`))))),ge(this._domNode,xe("hr.tokens-inspect-separator")),i<t.tokens1.length&&ge(this._domNode,xe("span.tm-token-type",void 0,t.tokens1[i].type)),this._editor.layoutContentWidget(this)}_decodeMetadata(e){const t=Kn.getColorMap(),i=wa.getLanguageId(e),n=wa.getTokenType(e),s=wa.getFontStyle(e),r=wa.getForeground(e),a=wa.getBackground(e);return{languageId:this._languageService.languageIdCodec.decodeLanguageId(i),tokenType:n,fontStyle:s,foreground:t[r],background:t[a]}}_tokenTypeToString(e){switch(e){case 0:return"Other";case 1:return"Comment";case 2:return"String";case 3:return"RegEx";default:return"??"}}_fontStyleToString(e){let t="";return e&1&&(t+="italic "),e&2&&(t+="bold "),e&4&&(t+="underline "),e&8&&(t+="strikethrough "),t.length===0&&(t="---"),t}_getTokensAtLine(e){const t=this._getStateBeforeLine(e),i=this._tokenizationSupport.tokenize(this._model.getLineContent(e),!0,t),n=this._tokenizationSupport.tokenizeEncoded(this._model.getLineContent(e),!0,t);return{startState:t,tokens1:i.tokens,tokens2:n.tokens,endState:i.endState}}_getStateBeforeLine(e){let t=this._tokenizationSupport.getInitialState();for(let i=1;i<e;i++)t=this._tokenizationSupport.tokenize(this._model.getLineContent(i),!0,t).endState;return t}getDomNode(){return this._domNode}getPosition(){return{position:this._editor.getPosition(),preference:[2,1]}}};AF._ID="editor.contrib.inspectTokensWidget";let rq=AF;oi(FE.ID,FE,4);be(yQe);var LQe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Uae=function(o,e){return function(t,i){e(t,i,o)}},ek,tC;let aq=(tC=class{constructor(e,t){this.quickInputService=e,this.keybindingService=t,this.registry=Pn.as(BC.Quickaccess)}provide(e){const t=new le;return t.add(e.onDidAccept(()=>{const[i]=e.selectedItems;i&&this.quickInputService.quickAccess.show(i.prefix,{preserveValue:!0})})),t.add(e.onDidChangeValue(i=>{const n=this.registry.getQuickAccessProvider(i.substr(ek.PREFIX.length));n&&n.prefix&&n.prefix!==ek.PREFIX&&this.quickInputService.quickAccess.show(n.prefix,{preserveValue:!0})})),e.items=this.getQuickAccessProviders().filter(i=>i.prefix!==ek.PREFIX),t}getQuickAccessProviders(){return this.registry.getQuickAccessProviders().sort((t,i)=>t.prefix.localeCompare(i.prefix)).flatMap(t=>this.createPicks(t))}createPicks(e){return e.helpEntries.map(t=>{const i=t.prefix||e.prefix,n=i||"";return{prefix:i,label:n,keybinding:t.commandId?this.keybindingService.lookupKeybinding(t.commandId):void 0,ariaLabel:v("helpPickAriaLabel","{0}, {1}",n,t.description),description:t.description}})}},ek=tC,tC.PREFIX="?",tC);aq=ek=LQe([Uae(0,Rc),Uae(1,Di)],aq);Pn.as(BC.Quickaccess).registerQuickAccessProvider({ctor:aq,prefix:"",helpEntries:[{description:g6.helpQuickAccessActionLabel}]});class Bme{constructor(e){this.options=e,this.rangeHighlightDecorationId=void 0}provide(e,t,i){var r;const n=new le;e.canAcceptInBackground=!!((r=this.options)!=null&&r.canAcceptInBackground),e.matchOnLabel=e.matchOnDescription=e.matchOnDetail=e.sortByLabel=!1;const s=n.add(new Xs);return s.value=this.doProvide(e,t,i),n.add(this.onDidActiveTextEditorControlChange(()=>{s.value=void 0,s.value=this.doProvide(e,t)})),n}doProvide(e,t,i){const n=new le,s=this.activeTextEditorControl;if(s&&this.canProvideWithTextEditor(s)){const r={editor:s},a=jfe(s);if(a){let l=s.saveViewState()??void 0;n.add(a.onDidChangeCursorPosition(()=>{l=s.saveViewState()??void 0})),r.restoreViewState=()=>{l&&s===this.activeTextEditorControl&&s.restoreViewState(l)},n.add(Am(t.onCancellationRequested)(()=>{var c;return(c=r.restoreViewState)==null?void 0:c.call(r)}))}n.add(it(()=>this.clearDecorations(s))),n.add(this.provideWithTextEditor(r,e,t,i))}else n.add(this.provideWithoutTextEditor(e,t));return n}canProvideWithTextEditor(e){return!0}gotoLocation({editor:e},t){e.setSelection(t.range,"code.jump"),e.revealRangeInCenter(t.range,0),t.preserveFocus||e.focus();const i=e.getModel();i&&"getLineContent"in i&&Oh(`${i.getLineContent(t.range.startLineNumber)}`)}getModel(e){var t;return rY(e)?(t=e.getModel())==null?void 0:t.modified:e.getModel()}addDecorations(e,t){e.changeDecorations(i=>{const n=[];this.rangeHighlightDecorationId&&(n.push(this.rangeHighlightDecorationId.overviewRulerDecorationId),n.push(this.rangeHighlightDecorationId.rangeHighlightId),this.rangeHighlightDecorationId=void 0);const s=[{range:t,options:{description:"quick-access-range-highlight",className:"rangeHighlight",isWholeLine:!0}},{range:t,options:{description:"quick-access-range-highlight-overview",overviewRuler:{color:Gn(Oue),position:Hl.Full}}}],[r,a]=i.deltaDecorations(n,s);this.rangeHighlightDecorationId={rangeHighlightId:r,overviewRulerDecorationId:a}})}clearDecorations(e){const t=this.rangeHighlightDecorationId;t&&(e.changeDecorations(i=>{i.deltaDecorations([t.overviewRulerDecorationId,t.rangeHighlightId],[])}),this.rangeHighlightDecorationId=void 0)}}const PF=class PF extends Bme{constructor(){super({canAcceptInBackground:!0})}provideWithoutTextEditor(e){const t=v("cannotRunGotoLine","Open a text editor first to go to a line.");return e.items=[{label:t}],e.ariaLabel=t,X.None}provideWithTextEditor(e,t,i){const n=e.editor,s=new le;s.add(t.onDidAccept(l=>{const[c]=t.selectedItems;if(c){if(!this.isValidLineNumber(n,c.lineNumber))return;this.gotoLocation(e,{range:this.toRange(c.lineNumber,c.column),keyMods:t.keyMods,preserveFocus:l.inBackground}),l.inBackground||t.hide()}}));const r=()=>{const l=this.parsePosition(n,t.value.trim().substr(PF.PREFIX.length)),c=this.getPickLabel(n,l.lineNumber,l.column);if(t.items=[{lineNumber:l.lineNumber,column:l.column,label:c}],t.ariaLabel=c,!this.isValidLineNumber(n,l.lineNumber)){this.clearDecorations(n);return}const u=this.toRange(l.lineNumber,l.column);n.revealRangeInCenter(u,0),this.addDecorations(n,u)};r(),s.add(t.onDidChangeValue(()=>r()));const a=jfe(n);return a&&a.getOptions().get(68).renderType===2&&(a.updateOptions({lineNumbers:"on"}),s.add(it(()=>a.updateOptions({lineNumbers:"relative"})))),s}toRange(e=1,t=1){return{startLineNumber:e,startColumn:t,endLineNumber:e,endColumn:t}}parsePosition(e,t){const i=t.split(/,|:|#/).map(s=>parseInt(s,10)).filter(s=>!isNaN(s)),n=this.lineCount(e)+1;return{lineNumber:i[0]>0?i[0]:n+i[0],column:i[1]}}getPickLabel(e,t,i){if(this.isValidLineNumber(e,t))return this.isValidColumn(e,t,i)?v("gotoLineColumnLabel","Go to line {0} and character {1}.",t,i):v("gotoLineLabel","Go to line {0}.",t);const n=e.getPosition()||{lineNumber:1,column:1},s=this.lineCount(e);return s>1?v("gotoLineLabelEmptyWithLimit","Current Line: {0}, Character: {1}. Type a line number between 1 and {2} to navigate to.",n.lineNumber,n.column,s):v("gotoLineLabelEmpty","Current Line: {0}, Character: {1}. Type a line number to navigate to.",n.lineNumber,n.column)}isValidLineNumber(e,t){return!t||typeof t!="number"?!1:t>0&&t<=this.lineCount(e)}isValidColumn(e,t,i){if(!i||typeof i!="number")return!1;const n=this.getModel(e);if(!n)return!1;const s={lineNumber:t,column:i};return n.validatePosition(s).equals(s)}lineCount(e){var t;return((t=this.getModel(e))==null?void 0:t.getLineCount())??0}};PF.PREFIX=":";let lq=PF;var xQe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},kQe=function(o,e){return function(t,i){e(t,i,o)}};let BE=class extends lq{constructor(e){super(),this.editorService=e,this.onDidActiveTextEditorControlChange=Ee.None}get activeTextEditorControl(){return this.editorService.getFocusedCodeEditor()??void 0}};BE=xQe([kQe(0,hi)],BE);var iC;let Wme=(iC=class extends Ve{constructor(){super({id:iC.ID,label:KA.gotoLineActionLabel,alias:"Go to Line/Column...",precondition:void 0,kbOpts:{kbExpr:B.focus,primary:2085,mac:{primary:293},weight:100}})}run(e){e.get(Rc).quickAccess.show(BE.PREFIX)}},iC.ID="editor.action.gotoLine",iC);be(Wme);Pn.as(BC.Quickaccess).registerQuickAccessProvider({ctor:BE,prefix:BE.PREFIX,helpEntries:[{description:KA.gotoLineActionLabel,commandId:Wme.ID}]});const Hme=[void 0,[]];function A9(o,e,t=0,i=0){const n=e;return n.values&&n.values.length>1?DQe(o,n.values,t,i):Vme(o,e,t,i)}function DQe(o,e,t,i){let n=0;const s=[];for(const r of e){const[a,l]=Vme(o,r,t,i);if(typeof a!="number")return Hme;n+=a,s.push(...l)}return[n,EQe(s)]}function Vme(o,e,t,i){const n=hC(e.original,e.originalLowercase,t,o,o.toLowerCase(),i,{firstMatchCanBeWeak:!0,boostFullMatch:!0});return n?[n[0],sI(n)]:Hme}function EQe(o){const e=o.sort((n,s)=>n.start-s.start),t=[];let i;for(const n of e)!i||!IQe(i,n)?(i=n,t.push(n)):(i.start=Math.min(i.start,n.start),i.end=Math.max(i.end,n.end));return t}function IQe(o,e){return!(o.end<e.start||e.end<o.start)}function $ae(o){return o.startsWith('"')&&o.endsWith('"')}const zme=" ";function cq(o){typeof o!="string"&&(o="");const e=o.toLowerCase(),{pathNormalized:t,normalized:i,normalizedLowercase:n}=jae(o),s=t.indexOf(ou)>=0,r=$ae(o);let a;const l=o.split(zme);if(l.length>1)for(const c of l){const u=$ae(c),{pathNormalized:f,normalized:g,normalizedLowercase:p}=jae(c);g&&(a||(a=[]),a.push({original:c,originalLowercase:c.toLowerCase(),pathNormalized:f,normalized:g,normalizedLowercase:p,expectContiguousMatch:u}))}return{original:o,originalLowercase:e,pathNormalized:t,normalized:i,normalizedLowercase:n,values:a,containsPathSeparator:s,expectContiguousMatch:r}}function jae(o){let e;Po?e=o.replace(/\//g,ou):e=o.replace(/\\/g,ou);const t=Oke(e).replace(/\s|"/g,"");return{pathNormalized:e,normalized:t,normalizedLowercase:t.toLowerCase()}}function qae(o){return Array.isArray(o)?cq(o.map(e=>e.original).join(zme)):cq(o.original)}var TQe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Kae=function(o,e){return function(t,i){e(t,i,o)}},ZM,Jd;let rb=(Jd=class extends Bme{constructor(e,t,i=Object.create(null)){super(i),this._languageFeaturesService=e,this._outlineModelService=t,this.options=i,this.options.canAcceptInBackground=!0}provideWithoutTextEditor(e){return this.provideLabelPick(e,v("cannotRunGotoSymbolWithoutEditor","To go to a symbol, first open a text editor with symbol information.")),X.None}provideWithTextEditor(e,t,i,n){const s=e.editor,r=this.getModel(s);return r?this._languageFeaturesService.documentSymbolProvider.has(r)?this.doProvideWithEditorSymbols(e,r,t,i,n):this.doProvideWithoutEditorSymbols(e,r,t,i):X.None}doProvideWithoutEditorSymbols(e,t,i,n){const s=new le;return this.provideLabelPick(i,v("cannotRunGotoSymbolWithoutSymbolProvider","The active text editor does not provide symbol information.")),(async()=>!await this.waitForLanguageSymbolRegistry(t,s)||n.isCancellationRequested||s.add(this.doProvideWithEditorSymbols(e,t,i,n)))(),s}provideLabelPick(e,t){e.items=[{label:t,index:0,kind:14}],e.ariaLabel=t}async waitForLanguageSymbolRegistry(e,t){if(this._languageFeaturesService.documentSymbolProvider.has(e))return!0;const i=new zS,n=t.add(this._languageFeaturesService.documentSymbolProvider.onDidChange(()=>{this._languageFeaturesService.documentSymbolProvider.has(e)&&(n.dispose(),i.complete(!0))}));return t.add(it(()=>i.complete(!1))),i.p}doProvideWithEditorSymbols(e,t,i,n,s){var f;const r=e.editor,a=new le;a.add(i.onDidAccept(g=>{var _;const[p]=i.selectedItems;p&&p.range&&(this.gotoLocation(e,{range:p.range.selection,keyMods:i.keyMods,preserveFocus:g.inBackground}),(_=s==null?void 0:s.handleAccept)==null||_.call(s,p),g.inBackground||i.hide())})),a.add(i.onDidTriggerItemButton(({item:g})=>{g&&g.range&&(this.gotoLocation(e,{range:g.range.selection,keyMods:i.keyMods,forceSideBySide:!0}),i.hide())}));const l=this.getDocumentSymbols(t,n);let c;const u=async g=>{c==null||c.dispose(!0),i.busy=!1,c=new An(n),i.busy=!0;try{const p=cq(i.value.substr(ZM.PREFIX.length).trim()),_=await this.doGetSymbolPicks(l,p,void 0,c.token,t);if(n.isCancellationRequested)return;if(_.length>0){if(i.items=_,g&&p.original.length===0){const b=CD(_,y=>!!(y.type!=="separator"&&y.range&&M.containsPosition(y.range.decoration,g)));b&&(i.activeItems=[b])}}else p.original.length>0?this.provideLabelPick(i,v("noMatchingSymbolResults","No matching editor symbols")):this.provideLabelPick(i,v("noSymbolResults","No editor symbols"))}finally{n.isCancellationRequested||(i.busy=!1)}};return a.add(i.onDidChangeValue(()=>u(void 0))),u((f=r.getSelection())==null?void 0:f.getPosition()),a.add(i.onDidChangeActive(()=>{const[g]=i.activeItems;g&&g.range&&(r.revealRangeInCenter(g.range.selection,0),this.addDecorations(r,g.range.decoration))})),a}async doGetSymbolPicks(e,t,i,n,s){var y,S;const r=await e;if(n.isCancellationRequested)return[];const a=t.original.indexOf(ZM.SCOPE_PREFIX)===0,l=a?1:0;let c,u;t.values&&t.values.length>1?(c=qae(t.values[0]),u=qae(t.values.slice(1))):c=t;let f;const g=(S=(y=this.options)==null?void 0:y.openSideBySideDirection)==null?void 0:S.call(y);g&&(f=[{iconClass:g==="right"?ut.asClassName(Se.splitHorizontal):ut.asClassName(Se.splitVertical),tooltip:g==="right"?v("openToSide","Open to the Side"):v("openToBottom","Open to the Bottom")}]);const p=[];for(let L=0;L<r.length;L++){const x=r[L],k=Ake(x.name),E=`$(${uA.toIcon(x.kind).id}) ${k}`,N=E.length-k.length;let A=x.containerName;i!=null&&i.extraContainerLabel&&(A?A=`${i.extraContainerLabel}  ${A}`:A=i.extraContainerLabel);let P,H,ee,Q;if(t.original.length>l){let J=!1;if(c!==t&&([P,H]=A9(E,{...t,values:void 0},l,N),typeof P=="number"&&(J=!0)),typeof P!="number"&&([P,H]=A9(E,c,l,N),typeof P!="number"))continue;if(!J&&u){if(A&&u.original.length>0&&([ee,Q]=A9(A,u)),typeof ee!="number")continue;typeof P=="number"&&(P+=ee)}}const te=x.tags&&x.tags.indexOf(1)>=0;p.push({index:L,kind:x.kind,score:P,label:E,ariaLabel:Dke(x.name,x.kind),description:A,highlights:te?void 0:{label:H,description:Q},range:{selection:M.collapseToStart(x.selectionRange),decoration:x.range},uri:s.uri,symbolName:k,strikethrough:te,buttons:f})}const _=p.sort((L,x)=>a?this.compareByKindAndScore(L,x):this.compareByScore(L,x));let b=[];if(a){let E=function(){x&&typeof L=="number"&&k>0&&(x.label=sC(O9[L]||P9,k))},L,x,k=0;for(const N of _)L!==N.kind?(E(),L=N.kind,k=1,x={type:"separator"},b.push(x)):k++,b.push(N);E()}else _.length>0&&(b=[{label:v("symbols","symbols ({0})",p.length),type:"separator"},..._]);return b}compareByScore(e,t){if(typeof e.score!="number"&&typeof t.score=="number")return 1;if(typeof e.score=="number"&&typeof t.score!="number")return-1;if(typeof e.score=="number"&&typeof t.score=="number"){if(e.score>t.score)return-1;if(e.score<t.score)return 1}return e.index<t.index?-1:e.index>t.index?1:0}compareByKindAndScore(e,t){const i=O9[e.kind]||P9,n=O9[t.kind]||P9,s=i.localeCompare(n);return s===0?this.compareByScore(e,t):s}async getDocumentSymbols(e,t){const i=await this._outlineModelService.getOrCreate(e,t);return t.isCancellationRequested?[]:i.asListOfDocumentSymbols()}},ZM=Jd,Jd.PREFIX="@",Jd.SCOPE_PREFIX=":",Jd.PREFIX_BY_CATEGORY=`${Jd.PREFIX}${Jd.SCOPE_PREFIX}`,Jd);rb=ZM=TQe([Kae(0,Ue),Kae(1,NI)],rb);const P9=v("property","properties ({0})"),O9={5:v("method","methods ({0})"),11:v("function","functions ({0})"),8:v("_constructor","constructors ({0})"),12:v("variable","variables ({0})"),4:v("class","classes ({0})"),22:v("struct","structs ({0})"),23:v("event","events ({0})"),24:v("operator","operators ({0})"),10:v("interface","interfaces ({0})"),2:v("namespace","namespaces ({0})"),3:v("package","packages ({0})"),25:v("typeParameter","type parameters ({0})"),1:v("modules","modules ({0})"),6:v("property","properties ({0})"),9:v("enum","enumerations ({0})"),21:v("enumMember","enumeration members ({0})"),14:v("string","strings ({0})"),0:v("file","files ({0})"),17:v("array","arrays ({0})"),15:v("number","numbers ({0})"),16:v("boolean","booleans ({0})"),18:v("object","objects ({0})"),19:v("key","keys ({0})"),7:v("field","fields ({0})"),13:v("constant","constants ({0})")};var NQe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},F9=function(o,e){return function(t,i){e(t,i,o)}};let dq=class extends rb{constructor(e,t,i){super(t,i),this.editorService=e,this.onDidActiveTextEditorControlChange=Ee.None}get activeTextEditorControl(){return this.editorService.getFocusedCodeEditor()??void 0}};dq=NQe([F9(0,hi),F9(1,Ue),F9(2,NI)],dq);const OF=class OF extends Ve{constructor(){super({id:OF.ID,label:OD.quickOutlineActionLabel,alias:"Go to Symbol...",precondition:B.hasDocumentSymbolProvider,kbOpts:{kbExpr:B.focus,primary:3117,weight:100},contextMenuOpts:{group:"navigation",order:3}})}run(e){e.get(Rc).quickAccess.show(rb.PREFIX,{itemActivation:qd.NONE})}};OF.ID="editor.action.quickOutline";let e2=OF;be(e2);Pn.as(BC.Quickaccess).registerQuickAccessProvider({ctor:dq,prefix:rb.PREFIX,helpEntries:[{description:OD.quickOutlineActionLabel,prefix:rb.PREFIX,commandId:e2.ID},{description:OD.quickOutlineByCategoryActionLabel,prefix:rb.PREFIX_BY_CATEGORY}]});function RQe(o){const e=new Map;for(const t of o)e.set(t,(e.get(t)??0)+1);return e}class Hk{constructor(){this.chunkCount=0,this.chunkOccurrences=new Map,this.documents=new Map}calculateScores(e,t){const i=this.computeEmbedding(e),n=new Map,s=[];for(const[r,a]of this.documents){if(t.isCancellationRequested)return[];for(const l of a.chunks){const c=this.computeSimilarityScore(l,i,n);c>0&&s.push({key:r,score:c})}}return s}static termFrequencies(e){return RQe(Hk.splitTerms(e))}static*splitTerms(e){const t=i=>i.toLowerCase();for(const[i]of e.matchAll(new RegExp("\\b\\p{Letter}[\\p{Letter}\\d]{2,}\\b","gu"))){yield t(i);const n=i.replace(/([a-z])([A-Z])/g,"$1 $2").split(/\s+/g);if(n.length>1)for(const s of n)s.length>2&&new RegExp("\\p{Letter}{3,}","gu").test(s)&&(yield t(s))}}updateDocuments(e){for(const{key:t}of e)this.deleteDocument(t);for(const t of e){const i=[];for(const n of t.textChunks){const s=Hk.termFrequencies(n);for(const r of s.keys())this.chunkOccurrences.set(r,(this.chunkOccurrences.get(r)??0)+1);i.push({text:n,tf:s})}this.chunkCount+=i.length,this.documents.set(t.key,{chunks:i})}return this}deleteDocument(e){const t=this.documents.get(e);if(t){this.documents.delete(e),this.chunkCount-=t.chunks.length;for(const i of t.chunks)for(const n of i.tf.keys()){const s=this.chunkOccurrences.get(n);if(typeof s=="number"){const r=s-1;r<=0?this.chunkOccurrences.delete(n):this.chunkOccurrences.set(n,r)}}}}computeSimilarityScore(e,t,i){let n=0;for(const[s,r]of Object.entries(t)){const a=e.tf.get(s);if(!a)continue;let l=i.get(s);typeof l!="number"&&(l=this.computeIdf(s),i.set(s,l));const c=a*l;n+=c*r}return n}computeEmbedding(e){const t=Hk.termFrequencies(e);return this.computeTfidf(t)}computeIdf(e){const t=this.chunkOccurrences.get(e)??0;return t>0?Math.log((this.chunkCount+1)/t):0}computeTfidf(e){const t=Object.create(null);for(const[i,n]of e){const s=this.computeIdf(i);s>0&&(t[i]=n*s)}return t}}function MQe(o){var i;const e=o.slice(0);e.sort((n,s)=>s.score-n.score);const t=((i=e[0])==null?void 0:i.score)??0;if(t>0)for(const n of e)n.score/=t;return e}var Zw;(function(o){o[o.NO_ACTION=0]="NO_ACTION",o[o.CLOSE_PICKER=1]="CLOSE_PICKER",o[o.REFRESH_PICKER=2]="REFRESH_PICKER",o[o.REMOVE_ITEM=3]="REMOVE_ITEM"})(Zw||(Zw={}));function B9(o){const e=o;return Array.isArray(e.items)}function Gae(o){const e=o;return!!e.picks&&e.additionalPicks instanceof Promise}class AQe extends X{constructor(e,t){super(),this.prefix=e,this.options=t}provide(e,t,i){var c;const n=new le;e.canAcceptInBackground=!!((c=this.options)!=null&&c.canAcceptInBackground),e.matchOnLabel=e.matchOnDescription=e.matchOnDetail=e.sortByLabel=!1;let s;const r=n.add(new Xs),a=async()=>{var y;const u=r.value=new le;s==null||s.dispose(!0),e.busy=!1,s=new An(t);const f=s.token;let g=e.value.substring(this.prefix.length);(y=this.options)!=null&&y.shouldSkipTrimPickFilter||(g=g.trim());const p=this._getPicks(g,u,f,i),_=(S,L)=>{var E;let x,k;if(B9(S)?(x=S.items,k=S.active):x=S,x.length===0){if(L)return!1;(g.length>0||e.hideInput)&&((E=this.options)!=null&&E.noResultsPick)&&(aD(this.options.noResultsPick)?x=[this.options.noResultsPick(g)]:x=[this.options.noResultsPick])}return e.items=x,k&&(e.activeItems=[k]),!0},b=async S=>{let L=!1,x=!1;await Promise.all([(async()=>{typeof S.mergeDelay=="number"&&(await Sg(S.mergeDelay),f.isCancellationRequested)||x||(L=_(S.picks,!0))})(),(async()=>{e.busy=!0;try{const k=await S.additionalPicks;if(f.isCancellationRequested)return;let E,N;B9(S.picks)?(E=S.picks.items,N=S.picks.active):E=S.picks;let A,P;if(B9(k)?(A=k.items,P=k.active):A=k,A.length>0||!L){let H;if(!N&&!P){const ee=e.activeItems[0];ee&&E.indexOf(ee)!==-1&&(H=ee)}_({items:[...E,...A],active:N||P||H})}}finally{f.isCancellationRequested||(e.busy=!1),x=!0}})()])};if(p!==null)if(Gae(p))await b(p);else if(!(p instanceof Promise))_(p);else{e.busy=!0;try{const S=await p;if(f.isCancellationRequested)return;Gae(S)?await b(S):_(S)}finally{f.isCancellationRequested||(e.busy=!1)}}};n.add(e.onDidChangeValue(()=>a())),a(),n.add(e.onDidAccept(u=>{var g;if(i!=null&&i.handleAccept){u.inBackground||e.hide(),(g=i.handleAccept)==null||g.call(i,e.activeItems[0]);return}const[f]=e.selectedItems;typeof(f==null?void 0:f.accept)=="function"&&(u.inBackground||e.hide(),f.accept(e.keyMods,u))}));const l=async(u,f)=>{var p;if(typeof f.trigger!="function")return;const g=((p=f.buttons)==null?void 0:p.indexOf(u))??-1;if(g>=0){const _=f.trigger(g,e.keyMods),b=typeof _=="number"?_:await _;if(t.isCancellationRequested)return;switch(b){case Zw.NO_ACTION:break;case Zw.CLOSE_PICKER:e.hide();break;case Zw.REFRESH_PICKER:a();break;case Zw.REMOVE_ITEM:{const y=e.items.indexOf(f);if(y!==-1){const S=e.items.slice(),L=S.splice(y,1),x=e.activeItems.filter(E=>E!==L[0]),k=e.keepScrollPosition;e.keepScrollPosition=!0,e.items=S,x&&(e.activeItems=x),e.keepScrollPosition=k}break}}}};return n.add(e.onDidTriggerItemButton(({button:u,item:f})=>l(u,f))),n.add(e.onDidTriggerSeparatorButton(({button:u,separator:f})=>l(u,f))),n}}var Ume=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},$p=function(o,e){return function(t,i){e(t,i,o)}},hv,Ps,Lh;let uq=(Lh=class extends AQe{constructor(e,t,i,n,s,r){super(hv.PREFIX,e),this.instantiationService=t,this.keybindingService=i,this.commandService=n,this.telemetryService=s,this.dialogService=r,this.commandsHistory=this._register(this.instantiationService.createInstance(hq)),this.options=e}async _getPicks(e,t,i,n){var p,_;const s=await this.getCommandPicks(i);if(i.isCancellationRequested)return[];const r=Am(()=>{const b=new Hk;b.updateDocuments(s.map(S=>({key:S.commandId,textChunks:[this.getTfIdfChunk(S)]})));const y=b.calculateScores(e,i);return MQe(y).filter(S=>S.score>hv.TFIDF_THRESHOLD).slice(0,hv.TFIDF_MAX_RESULTS)}),a=[];for(const b of s){const y=hv.WORD_FILTER(e,b.label)??void 0,S=b.commandAlias?hv.WORD_FILTER(e,b.commandAlias)??void 0:void 0;if(y||S)b.highlights={label:y,detail:this.options.showAlias?S:void 0},a.push(b);else if(e===b.commandId)a.push(b);else if(e.length>=3){const L=r();if(i.isCancellationRequested)return[];const x=L.find(k=>k.key===b.commandId);x&&(b.tfIdfScore=x.score,a.push(b))}}const l=new Map;for(const b of a){const y=l.get(b.label);y?(b.description=b.commandId,y.description=y.commandId):l.set(b.label,b)}a.sort((b,y)=>{if(b.tfIdfScore&&y.tfIdfScore)return b.tfIdfScore===y.tfIdfScore?b.label.localeCompare(y.label):y.tfIdfScore-b.tfIdfScore;if(b.tfIdfScore)return 1;if(y.tfIdfScore)return-1;const S=this.commandsHistory.peek(b.commandId),L=this.commandsHistory.peek(y.commandId);if(S&&L)return S>L?-1:1;if(S)return-1;if(L)return 1;if(this.options.suggestedCommandIds){const x=this.options.suggestedCommandIds.has(b.commandId),k=this.options.suggestedCommandIds.has(y.commandId);if(x&&k)return 0;if(x)return-1;if(k)return 1}return b.label.localeCompare(y.label)});const c=[];let u=!1,f=!0,g=!!this.options.suggestedCommandIds;for(let b=0;b<a.length;b++){const y=a[b];b===0&&this.commandsHistory.peek(y.commandId)&&(c.push({type:"separator",label:v("recentlyUsed","recently used")}),u=!0),f&&y.tfIdfScore!==void 0&&(c.push({type:"separator",label:v("suggested","similar commands")}),f=!1),g&&y.tfIdfScore===void 0&&!this.commandsHistory.peek(y.commandId)&&((p=this.options.suggestedCommandIds)!=null&&p.has(y.commandId))&&(c.push({type:"separator",label:v("commonlyUsed","commonly used")}),u=!0,g=!1),u&&y.tfIdfScore===void 0&&!this.commandsHistory.peek(y.commandId)&&!((_=this.options.suggestedCommandIds)!=null&&_.has(y.commandId))&&(c.push({type:"separator",label:v("morecCommands","other commands")}),u=!1),c.push(this.toCommandPick(y,n))}return this.hasAdditionalCommandPicks(e,i)?{picks:c,additionalPicks:(async()=>{var S;const b=await this.getAdditionalCommandPicks(s,a,e,i);if(i.isCancellationRequested)return[];const y=b.map(L=>this.toCommandPick(L,n));return f&&((S=y[0])==null?void 0:S.type)!=="separator"&&y.unshift({type:"separator",label:v("suggested","similar commands")}),y})()}:c}toCommandPick(e,t){if(e.type==="separator")return e;const i=this.keybindingService.lookupKeybinding(e.commandId),n=i?v("commandPickAriaLabelWithKeybinding","{0}, {1}",e.label,i.getAriaLabel()):e.label;return{...e,ariaLabel:n,detail:this.options.showAlias&&e.commandAlias!==e.label?e.commandAlias:void 0,keybinding:i,accept:async()=>{var s;this.commandsHistory.push(e.commandId),this.telemetryService.publicLog2("workbenchActionExecuted",{id:e.commandId,from:(t==null?void 0:t.from)??"quick open"});try{(s=e.args)!=null&&s.length?await this.commandService.executeCommand(e.commandId,...e.args):await this.commandService.executeCommand(e.commandId)}catch(r){Tc(r)||this.dialogService.error(v("canNotRun","Command '{0}' resulted in an error",e.label),rO(r))}}}}getTfIdfChunk({label:e,commandAlias:t,commandDescription:i}){let n=e;return t&&t!==e&&(n+=` - ${t}`),i&&i.value!==e&&(n+=` - ${i.value===i.original?i.value:`${i.value} (${i.original})`}`),n}},hv=Lh,Lh.PREFIX=">",Lh.TFIDF_THRESHOLD=.5,Lh.TFIDF_MAX_RESULTS=5,Lh.WORD_FILTER=SK(RD,ZMe,Yde),Lh);uq=hv=Ume([$p(1,nt),$p(2,Di),$p(3,nn),$p(4,tr),$p(5,tI)],uq);var eu;let hq=(eu=class extends X{constructor(e,t,i){super(),this.storageService=e,this.configurationService=t,this.logService=i,this.configuredCommandsHistoryLength=0,this.updateConfiguration(),this.load(),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(e=>this.updateConfiguration(e))),this._register(this.storageService.onWillSaveState(e=>{e.reason===HD.SHUTDOWN&&this.saveState()}))}updateConfiguration(e){e&&!e.affectsConfiguration("workbench.commandPalette.history")||(this.configuredCommandsHistoryLength=Ps.getConfiguredCommandHistoryLength(this.configurationService),Ps.cache&&Ps.cache.limit!==this.configuredCommandsHistoryLength&&(Ps.cache.limit=this.configuredCommandsHistoryLength,Ps.hasChanges=!0))}load(){const e=this.storageService.get(Ps.PREF_KEY_CACHE,0);let t;if(e)try{t=JSON.parse(e)}catch(n){this.logService.error(`[CommandsHistory] invalid data: ${n}`)}const i=Ps.cache=new $h(this.configuredCommandsHistoryLength,1);if(t){let n;t.usesLRU?n=t.entries:n=t.entries.sort((s,r)=>s.value-r.value),n.forEach(s=>i.set(s.key,s.value))}Ps.counter=this.storageService.getNumber(Ps.PREF_KEY_COUNTER,0,Ps.counter)}push(e){Ps.cache&&(Ps.cache.set(e,Ps.counter++),Ps.hasChanges=!0)}peek(e){var t;return(t=Ps.cache)==null?void 0:t.peek(e)}saveState(){if(!Ps.cache||!Ps.hasChanges)return;const e={usesLRU:!0,entries:[]};Ps.cache.forEach((t,i)=>e.entries.push({key:i,value:t})),this.storageService.store(Ps.PREF_KEY_CACHE,JSON.stringify(e),0,0),this.storageService.store(Ps.PREF_KEY_COUNTER,Ps.counter,0,0),Ps.hasChanges=!1}static getConfiguredCommandHistoryLength(e){var n,s;const i=(s=(n=e.getValue().workbench)==null?void 0:n.commandPalette)==null?void 0:s.history;return typeof i=="number"?i:Ps.DEFAULT_COMMANDS_HISTORY_LENGTH}},Ps=eu,eu.DEFAULT_COMMANDS_HISTORY_LENGTH=50,eu.PREF_KEY_CACHE="commandPalette.mru.cache",eu.PREF_KEY_COUNTER="commandPalette.mru.counter",eu.counter=1,eu.hasChanges=!1,eu);hq=Ps=Ume([$p(0,md),$p(1,Ht),$p(2,Oo)],hq);class PQe extends uq{constructor(e,t,i,n,s,r){super(e,t,i,n,s,r)}getCodeEditorCommandPicks(){var i;const e=this.activeTextEditorControl;if(!e)return[];const t=[];for(const n of e.getSupportedActions()){let s;(i=n.metadata)!=null&&i.description&&(GOe(n.metadata.description)?s=n.metadata.description:s={original:n.metadata.description,value:n.metadata.description}),t.push({commandId:n.id,commandAlias:n.alias,commandDescription:s,label:IK(n.label)||n.id})}return t}}var OQe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},mw=function(o,e){return function(t,i){e(t,i,o)}};let WE=class extends PQe{get activeTextEditorControl(){return this.codeEditorService.getFocusedCodeEditor()??void 0}constructor(e,t,i,n,s,r){super({showAlias:!1},e,i,n,s,r),this.codeEditorService=t}async getCommandPicks(){return this.getCodeEditorCommandPicks()}hasAdditionalCommandPicks(){return!1}async getAdditionalCommandPicks(){return[]}};WE=OQe([mw(0,nt),mw(1,hi),mw(2,Di),mw(3,nn),mw(4,tr),mw(5,tI)],WE);const FF=class FF extends Ve{constructor(){super({id:FF.ID,label:GA.quickCommandActionLabel,alias:"Command Palette",precondition:void 0,kbOpts:{kbExpr:B.focus,primary:59,weight:100},contextMenuOpts:{group:"z_commands",order:1}})}run(e){e.get(Rc).quickAccess.show(WE.PREFIX)}};FF.ID="editor.action.quickCommand";let t2=FF;be(t2);Pn.as(BC.Quickaccess).registerQuickAccessProvider({ctor:WE,prefix:WE.PREFIX,helpEntries:[{description:GA.quickCommandHelp,commandId:t2.ID}]});var FQe=function(o,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(s=(n<3?r(s):n>3?r(e,t,s):r(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},_w=function(o,e){return function(t,i){e(t,i,o)}};let fq=class extends kC{constructor(e,t,i,n,s,r,a){super(!0,e,t,i,n,s,r,a)}};fq=FQe([_w(1,ht),_w(2,hi),_w(3,fs),_w(4,nt),_w(5,md),_w(6,Ht)],fq);oi(kC.ID,fq,4);class BQe extends Ve{constructor(){super({id:"editor.action.toggleHighContrast",label:m6.toggleHighContrast,alias:"Toggle High Contrast Theme",precondition:void 0}),this._originalThemeName=null}run(e,t){const i=e.get(Ql),n=i.getColorTheme();lu(n.type)?(i.setTheme(this._originalThemeName||(sS(n.type)?E1:Zf)),this._originalThemeName=null):(i.setTheme(sS(n.type)?tb:ib),this._originalThemeName=n.themeName)}}be(BQe);self.MonacoEnvironment={getWorker:function(o,e){return e==="json"?new CLe:e==="javascript"||e==="typescript"?new yLe:new bLe}};console.log("!!!!!!! varhubModules",ule);console.log("!!!!!!! selfModules",hle);aY.typescript.javascriptDefaults.addExtraLib(ule,"varhubModules.d.ts");aY.typescript.javascriptDefaults.addExtraLib(hle,"modules.d.ts");const Yae=Ii.memo(({language:o,value:e,disabled:t=!1,defaultValue:i,onChange:n})=>{const s=Ii.useRef(null),r=Ii.useRef(void 0);return Ii.useEffect(()=>{r.current&&e!==r.current.getValue()&&r.current.setValue(String(e))},[e]),Ii.useEffect(()=>{r.current&&r.current.updateOptions({readOnly:t})},[t]),Ii.useEffect(()=>{if(!s.current)return;const a=Yfe.create(s.current,{automaticLayout:!0,language:o,value:e??i??"",useShadowDOM:!0,readOnly:t,theme:"vs-light"});r.current=a;const l=()=>{n==null||n(a.getValue())},c=a.onDidChangeModelContent(l);return()=>{c.dispose(),a.dispose()}},[o]),en.jsxDEV("div",{className:`code-editor ${t?"_disabled":""}`,style:{height:500},ref:s},void 0,!1,{fileName:"/home/runner/work/varhub-source/varhub-source/src/components/code/Editor.tsx",lineNumber:67,columnNumber:9},void 0)});class WQe{constructor(e){Qt(this,"index",0);Qt(this,"dataView");this.dataView=e instanceof DataView?e:e instanceof ArrayBuffer?new DataView(e):new DataView(e.buffer,e.byteOffset,e.byteLength)}assertSize(e){if(this.dataView.byteLength<this.index+e)throw new Error("wrong binary state-data format")}getNextUint8(){return this.dataView.getUint8(this.index++)}getNextInt32(){const e=this.dataView.getInt32(this.index,!0);return this.index+=4,e}getNextFloat64(){const e=this.dataView.getFloat64(this.index,!0);return this.index+=8,e}skipBytes(e=1){this.assertSize(e),this.index+=e}getNextUint8Array(e){this.assertSize(e);const t=this.dataView.buffer.slice(this.dataView.byteOffset+this.index,this.dataView.byteOffset+this.index+e),i=new Uint8Array(t);return this.index+=e,i}getNextUintSizeAndUint8Array(e=1){const i=this.getNextInt32()*e;return this.getNextUint8Array(i)}readUintSizeAndArrayBuf(e=1){const{buffer:t,byteLength:i,byteOffset:n}=this.getNextUintSizeAndUint8Array(e);return t.slice(n,n+i)}hasBytes(){return this.index<this.dataView.byteLength}}const gq=new TextEncoder,aM=new TextDecoder;function XM(...o){const e=o.flatMap(s=>Ef(s)),t=e.reduce((s,r)=>s+(typeof r=="number"?1:r.byteLength),0),i=new Uint8Array(t);let n=0;for(let s of e)if(typeof s=="number")i[n++]=s;else{const r=new Uint8Array(s.buffer,s.byteOffset,s.byteLength);i.set(r,n),n+=s.byteLength}return i}function Ef(o,e){if(e!=null&&e.has(o))throw new Error("wrong xj format: recursive");if(o===null)return[0];if(o===void 0)return[21];if(typeof o=="boolean")return[o?2:1];if(typeof o=="number")return Number.isInteger(o)&&o>=0&&o<=15?[240+o]:[3,Float64Array.of(o)];if(typeof o=="bigint"){const[t,...i]=Ef(o.toString(10));return[4,...i]}if(typeof o=="string"){gq.encode(o);const t=gq.encode(o);return[5,Uint32Array.of(t.byteLength),t]}if(o instanceof ArrayBuffer)return[6,Uint32Array.of(o.byteLength),new Uint8Array(o)];if(o instanceof Int8Array)return[7,Uint32Array.of(o.length),o];if(o instanceof Int16Array)return[8,Uint32Array.of(o.length),o];if(o instanceof Int32Array)return[9,Uint32Array.of(o.length),o];if(o instanceof Uint8Array)return[10,Uint32Array.of(o.length),o];if(o instanceof Uint16Array)return[11,Uint32Array.of(o.length),o];if(o instanceof Uint32Array)return[12,Uint32Array.of(o.length),o];if(o instanceof Uint8ClampedArray)return[13,Uint32Array.of(o.length),o];if(o instanceof Float32Array)return[14,Uint32Array.of(o.length),o];if(o instanceof Float64Array)return[15,Uint32Array.of(o.length),o];if(o instanceof BigInt64Array)return[16,Uint32Array.of(o.length),o];if(o instanceof BigUint64Array)return[17,Uint32Array.of(o.length),o];if(Array.isArray(o))return[18,Uint32Array.of(o.length),...o.flatMap(t=>Ef(t,new Set(e).add(o)))];if(o instanceof Error){const[,...t]=Ef(String(o.name)),[,...i]=Ef(String(o.message)),[,...n]=Ef(String(o.stack));let s=[0];if(o.cause!==void 0)try{s=[1,...Ef(o.cause)]}catch{}return[20,...t,...i,...n,...s]}if(typeof o=="object"){const t=Object.getOwnPropertyNames(o).sort(),i=o;return[19,Uint32Array.of(t.length),...t.flatMap(n=>{const[s,...r]=Ef(n);return[...r,...Ef(i[n],new Set(e).add(o))]})]}throw new Error("wrong xj format: wrong type")}function $me(o,e=1/0){typeof o=="string"&&(o=gq.encode(o));const t=[],i=new WQe(o);for(;e-- >0&&i.hasBytes();)t.push(xw(i));return t}function xw(o,e){if(e==null&&(e=o.getNextUint8()),e===0)return null;if(e===1)return!1;if(e===2)return!0;if(e===3)return o.getNextFloat64();if(e===4)return BigInt(xw(o,5));if(e===5)return aM.decode(o.getNextUintSizeAndUint8Array());if(e===6)return o.readUintSizeAndArrayBuf();if(e===7)return new Int8Array(o.readUintSizeAndArrayBuf());if(e===8)return new Int16Array(o.readUintSizeAndArrayBuf(2));if(e===9)return new Int32Array(o.readUintSizeAndArrayBuf(4));if(e===10)return new Uint8Array(o.readUintSizeAndArrayBuf());if(e===11)return new Uint16Array(o.readUintSizeAndArrayBuf(2));if(e===12)return new Uint32Array(o.readUintSizeAndArrayBuf(4));if(e===13)return new Uint8ClampedArray(o.readUintSizeAndArrayBuf());if(e===14)return new Float32Array(o.readUintSizeAndArrayBuf(4));if(e===15)return new Float64Array(o.readUintSizeAndArrayBuf(8));if(e===16)return new BigInt64Array(o.readUintSizeAndArrayBuf(8));if(e===17)return new BigUint64Array(o.readUintSizeAndArrayBuf(8));if(e===18)return Array.from({length:o.getNextInt32()}).map(()=>xw(o));if(e===19){const t=Object.create(null);let i=o.getNextInt32();for(;i-- >0;)Object.defineProperty(t,xw(o,5),{value:xw(o),enumerable:!0,writable:!0});return t}if(e===20){const t=aM.decode(o.getNextUintSizeAndUint8Array()),i=aM.decode(o.getNextUintSizeAndUint8Array()),n=aM.decode(o.getNextUintSizeAndUint8Array()),s=o.getNextUint8();let r;if(!s)r=new Error(i);else{const a=xw(o);r=new Error(i,{cause:a})}return r.name=t,r.stack=n,r}if(e!==21){if(e>=240&&e<=255)return e-240;throw new Error("wrong binary state-data format")}}var Ud;class HE{constructor(){xs(this,Ud,{});const e=this;Object.assign(this,{on(t,i){let n=et(e,Ud)[t];return n||(n=et(e,Ud)[t]=[]),n.push({listener:i,context:this}),this},once(t,i){let n=et(e,Ud)[t];return n||(n=et(e,Ud)[t]=[]),n.push({listener:i,context:this,once:!0}),this},off(t,i){if(!i)return delete et(e,Ud)[t],this;let n=et(e,Ud)[t];if(!n)return this;const s=n.findIndex(r=>r.listener===i);return s!==-1&&n.splice(s,1),this}})}emit(e,...t){let i=et(this,Ud)[e];if(!i||i.length===0)return!1;for(const{listener:n,once:s,context:r}of i)s&&this.off(e,n),n.apply(r,t);return!0}emitWithTry(e,...t){let i=et(this,Ud)[e];if(!i||i.length===0)return!1;for(const{listener:n,once:s,context:r}of i)try{s&&this.off(e,n),n.apply(r,t)}catch{}return!0}}Ud=new WeakMap;var $d,uh,Hv,$f,Vv;class HQe{constructor(e){xs(this,$d);xs(this,uh,new HE);xs(this,Hv);xs(this,$f,!1);xs(this,Vv,!1);if(ls(this,$d,e),e.binaryType="arraybuffer",e.readyState===WebSocket.CLOSING||e.readyState===WebSocket.CLOSED)throw new Error("websocket is closed");e.readyState===WebSocket.CONNECTING?(e.addEventListener("open",()=>{ls(this,$f,!0),ls(this,Vv,!1),et(this,uh).emitWithTry("open")}),ls(this,Hv,new Promise((t,i)=>{this.on("open",()=>{t()}),this.on("close",()=>{i()})}))):(ls(this,$f,!0),ls(this,Hv,Promise.resolve())),e.addEventListener("message",t=>{et(this,uh).emitWithTry("message",...$me(t.data))}),e.addEventListener("close",t=>{const i=et(this,$f);ls(this,$f,!1),ls(this,Vv,!0),et(this,uh).emitWithTry("close",t.reason,i)}),e.addEventListener("error",()=>{ls(this,$f,!1),ls(this,Vv,!0),et(this,uh).emitWithTry("error")}),et(this,Hv).catch(()=>{})}then(e,t){return et(this,Hv).then(()=>[this]).then(e,t)}get ready(){return et(this,$f)}get closed(){return et(this,Vv)}send(...e){const t=XM(...e);return et(this,$d).send(t),this}on(e,t){return et(this,uh).on.call(this,e,t),this}once(e,t){return et(this,uh).once.call(this,e,t),this}off(e,t){return et(this,uh).off.call(this,e,t),this}close(e){et(this,$d).readyState===WebSocket.CLOSED||et(this,$d).readyState===WebSocket.CLOSING||et(this,$d).close(4e3,e??void 0)}[Symbol.dispose](){this.close("disposed")}[Symbol.asyncDispose](){return et(this,$d).readyState===WebSocket.CLOSED?Promise.resolve():new Promise(e=>{et(this,$d).close(4e3,"disposed"),et(this,$d).addEventListener("close",()=>e())})}}$d=new WeakMap,uh=new WeakMap,Hv=new WeakMap,$f=new WeakMap,Vv=new WeakMap;var Fr,VE,zE,jf,hh,zv,jp,Uv,X1,qf,UE;class VQe{constructor(e){xs(this,Fr);xs(this,VE,null);xs(this,zE,null);xs(this,jf,new HE);xs(this,hh,new HE);xs(this,zv,null);xs(this,jp,Promise.withResolvers());xs(this,Uv,!1);xs(this,X1,!1);xs(this,qf);xs(this,UE,(e,...t)=>{et(this,Fr).send(XM(e,...t))});ls(this,Fr,e),et(this,jp).promise.catch(()=>{}),e.binaryType="arraybuffer",ls(this,qf,new zQe(et(this,hh),et(this,UE))),e.addEventListener("message",t=>{const[i,...n]=$me(t.data);et(this,jf).emitWithTry(String(i),...n)}),e.addEventListener("close",t=>{ls(this,X1,!0),ls(this,Uv,!1),et(this,hh).emitWithTry("close"),et(this,jp).reject(new Error(t.reason))}),e.addEventListener("error",()=>{ls(this,X1,!0),ls(this,Uv,!1),et(this,hh).emitWithTry("error"),et(this,jp).reject(new Error("unknown websocket error"))}),et(this,jf).on("connectionEnter",(t,...i)=>{et(this,qf).onEnter(t,...i)}),et(this,jf).on("connectionJoin",t=>{et(this,qf).onJoin(t)}),et(this,jf).on("connectionClosed",(t,i,n)=>{et(this,qf).onClose(t,i,n)}),et(this,jf).on("connectionMessage",(t,...i)=>{et(this,qf).onMessage(t,...i)}),et(this,jf).on("init",(t,i,n)=>{ls(this,VE,t),ls(this,zv,i??null),ls(this,zE,n??null),et(this,jp).resolve(),ls(this,Uv,!0),et(this,hh).emitWithTry("init")})}then(e,t){return et(this,jp).promise.then(()=>[this]).then(e,t)}getConnections(e){return et(this,qf).getConnections(e)}get ready(){return et(this,Uv)}get closed(){return et(this,X1)}get message(){return et(this,zv)}set message(e){if(et(this,Fr).readyState!==WebSocket.OPEN)throw new Error("websocket is not ready");et(this,zv)!==e&&(ls(this,zv,e),et(this,UE).call(this,"publicMessage",e))}get id(){return et(this,VE)}get integrity(){return et(this,zE)}broadcast(...e){if(et(this,Fr).readyState!==WebSocket.OPEN)throw new Error("websocket is not ready");return et(this,Fr).send(XM("broadcast",...e)),this}destroy(){if(et(this,Fr).readyState!==WebSocket.OPEN)throw new Error("websocket is not ready");et(this,Fr).send(XM("destroy")),et(this,Fr).close()}on(e,t){return et(this,hh).on.call(this,e,t),this}once(e,t){return et(this,hh).once.call(this,e,t),this}off(e,t){return et(this,hh).off.call(this,e,t),this}[Symbol.dispose](){et(this,Fr).readyState!==WebSocket.CLOSED&&et(this,Fr).close()}[Symbol.asyncDispose](){return et(this,Fr).readyState===WebSocket.CLOSED?Promise.resolve():new Promise(e=>{et(this,Fr).addEventListener("close",()=>e()),et(this,Fr).addEventListener("error",()=>e()),et(this,Fr).close()})}}Fr=new WeakMap,VE=new WeakMap,zE=new WeakMap,jf=new WeakMap,hh=new WeakMap,zv=new WeakMap,jp=new WeakMap,Uv=new WeakMap,X1=new WeakMap,qf=new WeakMap,UE=new WeakMap;class zQe{constructor(e,t){Qt(this,"roomEmitter");Qt(this,"roomAction");Qt(this,"connections",new Map);Qt(this,"readyConnections",new Set);Qt(this,"connectionEmitters",new WeakMap);this.roomEmitter=e,this.roomAction=t}onEnter(e,...t){const i=new UQe(e,t,this);return this.connections.set(e,i),this.roomEmitter.emitWithTry("connection",i,...t),i.deferred||i.open(),i}onJoin(e){const t=this.connections.get(e);t&&(this.readyConnections.has(t)||(this.readyConnections.add(t),this.getConnectionEmitter(t).emitWithTry("open"),this.roomEmitter.emitWithTry("connectionOpen",t)))}onClose(e,t,i){const n=this.connections.get(e);n&&(this.connections.delete(e),this.readyConnections.delete(n),this.getConnectionEmitter(n).emitWithTry("close",i,t),this.roomEmitter.emitWithTry("connectionClose",n,i,t))}onMessage(e,...t){const i=this.connections.get(e);i&&(this.getConnectionEmitter(i).emitWithTry("message",...t),this.roomEmitter.emitWithTry("connectionMessage",i,...t))}getConnections(e){const t=[...this.connections.values()];return new Set(t.filter(i=>{if(e){for(let n of Object.keys(e))if(i[n]!==e[n])return!1}return!0}))}isReady(e){const t=this.connections.get(e);return t?this.readyConnections.has(t):!1}join(e){this.onJoin(e),this.roomAction("join",e)}isClosed(e){return!this.connections.has(e)}send(e,...t){this.roomAction("send",e,...t)}close(e,t){const i=this.connections.get(e),n=i&&this.readyConnections.has(i);this.onClose(e,!!n,t??null),this.roomAction("kick",e,t??null)}getConnectionEmitter(e){let t=this.connectionEmitters.get(e);return t||(t=new HE,this.connectionEmitters.set(e,t)),t}}var jd,$E,fh,$v,jv,jE;class UQe{constructor(e,t,i){xs(this,jd);xs(this,$E);xs(this,fh);xs(this,$v);xs(this,jv,Promise.withResolvers());xs(this,jE,!1);ls(this,jd,e),ls(this,fh,i),ls(this,$E,t);const n=ls(this,$v,et(this,fh).getConnectionEmitter(this));n.on("open",()=>et(this,jv).resolve()),n.on("close",s=>et(this,jv).reject(s)),et(this,jv).promise.catch(()=>{})}then(e,t){return et(this,jv).promise.then(()=>[this]).then(e,t)}get parameters(){return et(this,$E)}get deferred(){return et(this,jE)&&!this.ready&&!this.closed}defer(e,...t){ls(this,jE,!0);try{const i=e.call(this,this,...t);return i&&typeof i=="object"&&"then"in i&&typeof i.then=="function"?i.then(n=>(this.deferred&&this.open(),n),n=>{throw this.deferred&&this.close(n==null?n:String(n)),n}):i}catch(i){throw this.close(i==null?null:String(i)),i}}get ready(){return et(this,fh).isReady(et(this,jd))}get closed(){return et(this,fh).isClosed(et(this,jd))}open(){return et(this,fh).join(et(this,jd)),this}send(...e){return et(this,fh).send(et(this,jd),...e),this}on(e,t){return et(this,$v).on(e,t),this}once(e,t){return et(this,$v).once(e,t),this}off(e,t){return et(this,$v).off(e,t),this}close(e){et(this,fh).close(et(this,jd),e)}toString(){return"Connection("+et(this,jd)+")"}valueOf(){return et(this,jd)}}jd=new WeakMap,$E=new WeakMap,fh=new WeakMap,$v=new WeakMap,jv=new WeakMap,jE=new WeakMap;var qp,Nh,QM,JM;class jme{constructor(e){xs(this,Nh);xs(this,qp);ls(this,qp,e instanceof URL?e:new URL(e))}get url(){return et(this,qp).href}async createRoom(e,t){return U_(this,Nh,QM).call(this,"POST",`room/${encodeURIComponent(e)}`,JSON.stringify(t))}createRoomSocket(e={}){const t=U_(this,Nh,JM).call(this,"room/ws",e);return new VQe(t)}async findRooms(e){return U_(this,Nh,QM).call(this,"GET",`rooms/${encodeURIComponent(e)}`)}async getRoomMessage(e,t){return U_(this,Nh,QM).call(this,"GET",`room/${encodeURIComponent(e)}`)}join(e,t={}){const i=U_(this,Nh,JM).call(this,`room/${encodeURIComponent(e)}`,t,["params"]);return new HQe(i)}createLogger(e){return U_(this,Nh,JM).call(this,`log/${encodeURIComponent(String(e))}`)}}qp=new WeakMap,Nh=new WeakSet,QM=async function(e,t,i){const n=new URL(t,et(this,qp)),s=await fetch(n,{method:e,headers:{"Content-Type":"application/json"},body:i});if(!s.ok)throw new Error(await s.text());return s.json()},JM=function(e,t,i){const n=new URL(et(this,qp));n.protocol=et(this,qp).protocol.replace("http","ws");const s=new URL(e,n);if(t)for(let[a,l]of Object.entries(t))l!==void 0&&(i!=null&&i.includes(a)&&(l=JSON.stringify(l)),s.searchParams.set(a,l));const r=new WebSocket(s);return r.binaryType="arraybuffer",r};const $Qe=function(o,{key:e="$rpc"}={}){return new jQe(o,e).defaultChannel.proxy};class jQe{constructor(e,t){Qt(this,"client");Qt(this,"key");Qt(this,"currentChannelId",0);Qt(this,"defaultChannel");Qt(this,"channels",new Map);Qt(this,"onMessage",(...e)=>{if(e.length<3)return;const[t,i,n,...s]=e;if(t!==this.key)return;const r=this.channels.get(i);if(r){if(n===3||n===0)return r.onResponse(n,s[0],s[1]);if(n===2)return r.onState(s[0]);if(n===1)return r.onClose(s[0]);if(n===4)return r.onEvent(s[0],s[1])}});this.client=e,this.key=t,this.defaultChannel=new Zae(this,void 0),this.channels.set(void 0,this.defaultChannel),e.on("message",this.onMessage)}createNextChannel(){const e=this.currentChannelId++,t=new Zae(this,e);return this.channels.set(e,t),t}}const qQe=function(){};var ole;ole=Symbol.dispose;class Zae{constructor(e,t){Qt(this,"manager");Qt(this,"channelId");Qt(this,"proxy");Qt(this,"state");Qt(this,"events",new HE);Qt(this,"resolver",Promise.withResolvers());Qt(this,"ready",!1);Qt(this,"closed",!1);Qt(this,"currentCallId",0);Qt(this,"responseEventTarget",new EventTarget);Qt(this,"proxyApply",(e,...t)=>new Promise((i,n)=>{if(this.closed)throw new Error("channel is closed");const s=this.currentCallId++,r=c=>{if(!(c instanceof CustomEvent))return;const[u,f]=c.detail;l(u?n:i,f)},a=c=>{l(n,new Error(c??"connection closed"))},l=(c,...u)=>{this.responseEventTarget.removeEventListener(s,r),this.events.off("close",a),c(...u)};this.responseEventTarget.addEventListener(s,r,{once:!0}),this.events.once("close",a),this.send(0,s,e,t)}));Qt(this,"proxyConstruct",(e,...t)=>{if(this.closed)throw new Error("channel is closed");const i=this.manager.createNextChannel();return this.send(2,i.channelId,e,t),i.proxy});Qt(this,"then",(e,t)=>this.resolver.promise.then(()=>[this.proxy]).then(e,t));Qt(this,"close",e=>{this.closed||(this.ready=!1,this.closed=!0,this.channelId===void 0?this.manager.client.close(e):this.send(1,e),this.events.emitWithTry("close",e),this.resolver.reject(e),this.manager.channels.delete(this.channelId))});Qt(this,ole,()=>{this.close("disposed")});this.manager=e,this.channelId=t,this.proxy=this.createProxy(),this.resolver.promise.catch(()=>{}),t===void 0&&(e.client.ready?this.send(0):e.client.once("open",()=>{this.send(0)})),e.client.once("close",i=>this.onClose(i))}onState(e){if(this.closed)return;const t=this.state,i=this.ready;this.state=e,this.ready=!0,i?this.events.emitWithTry("state",e,t):(this.events.emitWithTry("init"),this.events.emitWithTry("state",e),this.resolver.resolve())}onClose(e){if(this.closed)return;const t=this.ready;this.ready=!1,this.closed=!0,t||this.events.emitWithTry("error",e),this.events.emitWithTry("close",e),this.resolver.reject(e),this.manager.channels.delete(this.channelId)}onEvent(e,t){const i=JSON.stringify(e);this.events.emitWithTry(i,...t)}onResponse(e,t,i){this.responseEventTarget.dispatchEvent(new CustomEvent(t,{detail:[e,i]}))}async send(e,...t){this.manager.client.ready||await this.manager.client,this.manager.client.send(this.manager.key,this.channelId,e,...t)}createProxy(e=[]){const t=new Map,i=this.events,n={on:function(r,a){return i.on.call(this,W9(e,r),a)},once:function(r,a){return i.once.call(this,W9(e,r),a)},off:function(r,a){return i.off.call(this,W9(e,r),a)}},s={get:(r,a)=>{if(e.length===0){if(a===Symbol.dispose)return this[Symbol.dispose];if(a==="ready")return this.ready;if(a==="closed")return this.closed;if(a==="state")return this.state;if(a==="then")return this.then;if(a==="call")return this.proxyApply;if(a==="create")return this.proxyConstruct;if(a==="close")return this.close}if(a in n)return n[a];if(typeof a!="string")return;if(t.has(a))return t.get(a);const l=this.createProxy([...e,a]);return t.set(a,l),l},apply:(r,a,l)=>this.proxyApply(e,...l),construct:(r,a)=>this.proxyConstruct(e,...a),isExtensible(){return!1},getPrototypeOf(){return null},setPrototypeOf(){return!1},defineProperty(){throw new Error("can not define property of channel")},set(){throw new Error("can not set property of channel")},delete(){throw new Error("can not delete property of channel")},has(){return!1},ownKeys(){return["prototype"]}};return new Proxy(qQe,s)}}function W9(o,e){return o.length>0?JSON.stringify([...o,e]):e==="close"||e==="init"||e==="error"||e==="state"?e:JSON.stringify([e])}const KQe=`import room from "varhub:room";
import RAPIER from 'https://cdn.skypack.dev/@dimforge/rapier2d-compat';
// import network from "varhub:api/network";

room.on("join", () => {
	room.broadcast("updatePlayers", room.getPlayers());
});

export function sendMessage(msg){
	room.broadcast("message", this.player, msg);
	return true;
}

export function getRapier(){
	return RAPIER;
}
`,H9=(o,e)=>{const[t,i]=Ii.useState(()=>{let n;try{n=JSON.parse(localStorage.getItem(o)??"")}catch{n=e}return n});return Ii.useEffect(()=>{localStorage.setItem(o,JSON.stringify(t))},[t,o]),[t,i]},GQe=()=>{const[o,e]=H9("code",KQe),[t,i]=H9("jsonCode","{}"),[n,s]=Ii.useState(Math.random().toString(36).substring(2)),[r,a]=H9("url","https://varhub.dpohvar.ru/"),[l,c]=Ii.useState(""),[u,f]=Ii.useState(!1),g=Ii.useMemo(()=>{try{return n?`devtools://devtools/bundled/inspector.html?experiments=true&v8only=true&ws=${new URL(r).host}/log/${n}`:void 0}catch{}},[r,n]),p=Ii.useMemo(()=>{if(!r||!l)return null;const S=new URL(location.href);return S.searchParams.set("url",r),S.searchParams.set("room",l),S.href},[l,r]),_=async()=>{if(!u)try{f(!0);const L=await new jme(r).createRoom("ivm",{module:{main:"index.js",source:{"index.js":o}},integrity:!1,config:t?JSON.parse(t):void 0,inspect:n??void 0});c(L.id)}finally{f(!1)}},[b,y]=Ii.useState("index.js");return en.jsxDEV("div",{children:[en.jsxDEV("div",{className:"form-line _no-grow",children:[en.jsxDEV("button",{onClick:()=>y("index.js"),className:b==="index.js"?"_tab-active":void 0,children:en.jsxDEV("code",{children:"index.js"},void 0,!1,{fileName:"/home/runner/work/varhub-source/varhub-source/src/components/CreateRoom.tsx",lineNumber:58,columnNumber:6},void 0)},void 0,!1,{fileName:"/home/runner/work/varhub-source/varhub-source/src/components/CreateRoom.tsx",lineNumber:57,columnNumber:5},void 0),en.jsxDEV("button",{onClick:()=>y("varhub:config"),className:b==="varhub:config"?"_tab-active":void 0,children:en.jsxDEV("code",{children:"varhub:config"},void 0,!1,{fileName:"/home/runner/work/varhub-source/varhub-source/src/components/CreateRoom.tsx",lineNumber:61,columnNumber:6},void 0)},void 0,!1,{fileName:"/home/runner/work/varhub-source/varhub-source/src/components/CreateRoom.tsx",lineNumber:60,columnNumber:5},void 0)]},void 0,!0,{fileName:"/home/runner/work/varhub-source/varhub-source/src/components/CreateRoom.tsx",lineNumber:56,columnNumber:4},void 0),b==="index.js"&&en.jsxDEV(Yae,{language:"javascript",defaultValue:o,onChange:e,disabled:!!(u||l)},b,!1,{fileName:"/home/runner/work/varhub-source/varhub-source/src/components/CreateRoom.tsx",lineNumber:65,columnNumber:5},void 0),b==="varhub:config"&&en.jsxDEV(Yae,{language:"json",defaultValue:t,onChange:i,disabled:!!(u||l)},b,!1,{fileName:"/home/runner/work/varhub-source/varhub-source/src/components/CreateRoom.tsx",lineNumber:68,columnNumber:5},void 0),en.jsxDEV("div",{className:"form-line",children:[en.jsxDEV("input",{disabled:!!(u||l),placeholder:"varhub url",value:r,onChange:S=>a(S.target.value)},void 0,!1,{fileName:"/home/runner/work/varhub-source/varhub-source/src/components/CreateRoom.tsx",lineNumber:72,columnNumber:5},void 0),en.jsxDEV("input",{disabled:!!(u||l),placeholder:"logger id",value:n,onChange:S=>s(S.target.value)},void 0,!1,{fileName:"/home/runner/work/varhub-source/varhub-source/src/components/CreateRoom.tsx",lineNumber:73,columnNumber:5},void 0),en.jsxDEV("button",{disabled:!!(u||l),onClick:_,children:"Create room"},void 0,!1,{fileName:"/home/runner/work/varhub-source/varhub-source/src/components/CreateRoom.tsx",lineNumber:74,columnNumber:5},void 0)]},void 0,!0,{fileName:"/home/runner/work/varhub-source/varhub-source/src/components/CreateRoom.tsx",lineNumber:71,columnNumber:4},void 0),g&&en.jsxDEV("div",{children:["create logger by opening url:",en.jsxDEV("p",{children:en.jsxDEV("code",{children:g},void 0,!1,{fileName:"/home/runner/work/varhub-source/varhub-source/src/components/CreateRoom.tsx",lineNumber:79,columnNumber:8},void 0)},void 0,!1,{fileName:"/home/runner/work/varhub-source/varhub-source/src/components/CreateRoom.tsx",lineNumber:79,columnNumber:5},void 0)]},void 0,!0,{fileName:"/home/runner/work/varhub-source/varhub-source/src/components/CreateRoom.tsx",lineNumber:77,columnNumber:30},void 0),l&&en.jsxDEV("div",{children:[en.jsxDEV("p",{children:["Room ",en.jsxDEV("code",{children:l},void 0,!1,{fileName:"/home/runner/work/varhub-source/varhub-source/src/components/CreateRoom.tsx",lineNumber:84,columnNumber:14},void 0)," created at ",en.jsxDEV("code",{children:r},void 0,!1,{fileName:"/home/runner/work/varhub-source/varhub-source/src/components/CreateRoom.tsx",lineNumber:84,columnNumber:47},void 0)]},void 0,!0,{fileName:"/home/runner/work/varhub-source/varhub-source/src/components/CreateRoom.tsx",lineNumber:84,columnNumber:6},void 0),en.jsxDEV("p",{children:en.jsxDEV("a",{href:p??"",target:"_blank",rel:"noopener noreferrer",children:p},void 0,!1,{fileName:"/home/runner/work/varhub-source/varhub-source/src/components/CreateRoom.tsx",lineNumber:86,columnNumber:7},void 0)},void 0,!1,{fileName:"/home/runner/work/varhub-source/varhub-source/src/components/CreateRoom.tsx",lineNumber:85,columnNumber:6},void 0)]},void 0,!0,{fileName:"/home/runner/work/varhub-source/varhub-source/src/components/CreateRoom.tsx",lineNumber:83,columnNumber:5},void 0)]},void 0,!0,{fileName:"/home/runner/work/varhub-source/varhub-source/src/components/CreateRoom.tsx",lineNumber:55,columnNumber:3},void 0)};function pq(){return qme=pq=Object.assign||function(o){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(o[i]=t[i])}return o},pq.apply(this,arguments)}var qme=pq;const Ur=WS(qme);function YQe(o,e){if(o==null)return{};var t={},i=Object.keys(o),n,s;for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&(t[n]=o[n]);return t}var ZQe=YQe,XQe=ZQe;function QQe(o,e){if(o==null)return{};var t=XQe(o,e),i,n;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(o);for(n=0;n<s.length;n++)i=s[n],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(o,i)&&(t[i]=o[i])}return t}var JQe=QQe;const Hg=WS(JQe);function mq(o){var e,t,i="";if(o)if(typeof o=="object")if(Array.isArray(o))for(e=0;e<o.length;e++)o[e]&&(t=mq(o[e]))&&(i&&(i+=" "),i+=t);else for(e in o)o[e]&&(t=mq(e))&&(i&&(i+=" "),i+=t);else typeof o!="boolean"&&!o.call&&(i&&(i+=" "),i+=o);return i}function $r(){for(var o=0,e,t="";o<arguments.length;)(e=mq(arguments[o++]))&&(t&&(t+=" "),t+=e);return t}const S5={small:"12px",medium:"16px",large:"20px","x-large":"24px"},L5={inline:"Icon-inline-929ed31"},eJe=["className","fill","size","inline"],tJe=o=>{const{className:e,fill:t,size:i,inline:n}=o,s=Hg(o,eJe),r=i?S5[i]:void 0;return $e.createElement("svg",Ur({"aria-hidden":!0,focusable:"false",viewBox:"0 0 17 30",className:$r(e,{[L5.inline]:n}),width:r,height:r,fill:t||"currentColor"},s),$e.createElement("path",{d:"M2.021 0l14.491 13.923c.326.336.488.695.488 1.077s-.162.741-.488 1.077L2.022 30 .14 27.846 13.448 15 0 2.154 2.021 0z"}))},iJe=["className","fill","size","inline"],nJe=o=>{const{className:e,fill:t,size:i,inline:n}=o,s=Hg(o,iJe),r=i?S5[i]:void 0;return $e.createElement("svg",Ur({"aria-hidden":!0,focusable:"false",viewBox:"0 0 45 45",className:$r(e,{[L5.inline]:n}),width:r,height:r,fill:t||"currentColor"},s),$e.createElement("path",{d:"M6.59 6.59c8.787-8.787 23.033-8.787 31.82 0 8.787 8.787 8.787 23.033 0 31.82-8.787 8.787-23.033 8.787-31.82 0-8.787-8.787-8.787-23.033 0-31.82zm25.102 3.182L22.5 18.965l-9.192-9.193-3.536 3.536 9.193 9.192-9.193 9.192 3.536 3.536 9.192-9.193 9.192 9.193 3.536-3.536-9.193-9.192 9.193-9.192-3.536-3.536z"}))},sJe=["className","fill","size","inline"],oJe=o=>{const{className:e,fill:t,size:i,inline:n}=o,s=Hg(o,sJe),r=i?S5[i]:void 0;return $e.createElement("svg",Ur({"aria-hidden":!0,focusable:"false",viewBox:"0 0 20 30",className:$r(e,{[L5.inline]:n}),width:r,height:r,fill:t||"currentColor"},s),$e.createElement("path",{d:"M15.104 30L.492 16.077C.163 15.741 0 15.382 0 15.002c0-.384.163-.743.492-1.079L15.104 0 17 2.154 3.583 15.002 17 27.846 15.104 30z"}),$e.createElement("circle",{cx:"17",cy:"15",r:"3"}))},rJe=["className","fill","size","inline"],aJe=o=>{const{className:e,fill:t,size:i,inline:n}=o,s=Hg(o,rJe),r=i?S5[i]:void 0;return $e.createElement("svg",Ur({"aria-hidden":!0,focusable:"false",viewBox:"2 2 20 20",className:$r(e,{[L5.inline]:n}),width:r,height:r,fill:t||"currentColor"},s),$e.createElement("path",{d:"M13.232 3.645l.08.125 8.484 14.915c.134.235.204.501.204.773 0 .801-.601 1.46-1.37 1.535l-.145.007H3.515c-.266 0-.528-.072-.759-.208a1.557 1.557 0 01-.619-1.975l.067-.132L10.69 3.77a1.53 1.53 0 01.552-.562 1.499 1.499 0 011.991.437zM12 16a1 1 0 100 2 1 1 0 000-2zm0-6a1 1 0 00-1 1v3l.007.117A1 1 0 0013 14v-3l-.007-.117A1 1 0 0012 10z"}))};function lJe(o,e,t){return e in o?Object.defineProperty(o,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):o[e]=t,o}var cJe=lJe,dJe=cJe;function Xae(o,e){var t=Object.keys(o);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(o);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(o,n).enumerable})),t.push.apply(t,i)}return t}function uJe(o){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Xae(t,!0).forEach(function(i){dJe(o,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(t)):Xae(t).forEach(function(i){Object.defineProperty(o,i,Object.getOwnPropertyDescriptor(t,i))})}return o}var hJe=uJe;const Qae=WS(hJe);function fJe(o,e){if(o==null)return{};var t={},i=Object.keys(o),n,s;for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&(t[n]=o[n]);return t}var gJe=fJe,pJe=gJe;function mJe(o,e){if(o==null)return{};var t=pJe(o,e),i,n;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(o);for(n=0;n<s.length;n++)i=s[n],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(o,i)&&(t[i]=o[i])}return t}var _Je=mJe;const vJe=WS(_Je),bJe=["children"],_q=$e.createContext({theme:"chrome",colorScheme:"light"}),CJe=o=>{let{children:e}=o,t=vJe(o,bJe);const i=$e.useContext(_q);return $e.createElement(_q.Provider,{value:Qae(Qae({},i),t)},e)},MI=(o,e={})=>{const t=$e.useContext(_q),i=o.theme||t.theme||"chrome",n=o.colorScheme||t.colorScheme||"light",s=$r(e[i],e[n]);return{currentColorScheme:n,currentTheme:i,themeClass:s}},sZ=o=>Array.isArray(o)||ArrayBuffer.isView(o)&&!(o instanceof DataView),Kme=o=>o!==null&&typeof o=="object"&&!sZ(o)&&!(o instanceof Date)&&!(o instanceof RegExp)&&!(o instanceof Error)&&!(o instanceof WeakMap)&&!(o instanceof WeakSet),yJe=o=>Kme(o)||sZ(o)||typeof o=="function"||o instanceof Promise,Gme=o=>{const e=/unique/;return Promise.race([o,e]).then(t=>t===e?["pending"]:["fulfilled",t],t=>["rejected",t])},eh=async(o,e,t,i,n,s)=>{const r={key:o,depth:t,value:e,type:"value",parent:void 0};if(e&&yJe(e)&&t<100){const a=[];let l="object";if(sZ(e)){for(let c=0;c<e.length;c++)a.push(async()=>{const u=await eh(c.toString(),e[c],t+1,i);return u.parent=r,u});l="array"}else{const c=Object.getOwnPropertyNames(e);i&&c.sort();for(let u=0;u<c.length;u++){let f;try{f=e[c[u]]}catch{}a.push(async()=>{const g=await eh(c[u],f,t+1,i);return g.parent=r,g})}if(typeof e=="function"&&(l="function"),e instanceof Promise){const[u,f]=await Gme(e);a.push(async()=>{const g=await eh("<state>",u,t+1,i);return g.parent=r,g}),u!=="pending"&&a.push(async()=>{const g=await eh("<value>",f,t+1,i);return g.parent=r,g}),l="promise"}if(e instanceof Map){const f=Array.from(e.entries()).map(g=>{const[p,_]=g;return{"<key>":p,"<value>":_}});a.push(async()=>{const g=await eh("<entries>",f,t+1,i);return g.parent=r,g}),a.push(async()=>{const g=await eh("size",e.size,t+1,i);return g.parent=r,g}),l="map"}if(e instanceof Set){const f=Array.from(e.entries()).map(g=>g[1]);a.push(async()=>{const g=await eh("<entries>",f,t+1,i);return g.parent=r,g}),a.push(async()=>{const g=await eh("size",e.size,t+1,i);return g.parent=r,g}),l="set"}}e!==Object.prototype&&s&&a.push(async()=>{const c=await eh("<prototype>",Object.getPrototypeOf(e),t+1,i,!0);return c.parent=r,c}),r.type=l,r.children=a,r.isPrototype=n}return r},wJe=(o,e,t)=>eh("root",o,0,e===!1?e:!0,void 0,t===!1?t:!0);function SJe(o,e,t){return e in o?Object.defineProperty(o,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):o[e]=t,o}var LJe=SJe,xJe=LJe;function Jae(o,e){var t=Object.keys(o);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(o);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(o,n).enumerable})),t.push.apply(t,i)}return t}function kJe(o){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Jae(t,!0).forEach(function(i){xJe(o,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(t)):Jae(t).forEach(function(i){Object.defineProperty(o,i,Object.getOwnPropertyDescriptor(t,i))})}return o}var DJe=kJe;const ele=WS(DJe),V9=$e.createContext({isChild:!1,depth:0,hasHover:!0}),yl={tree:"Tree-tree-fbbbe38",item:"Tree-item-353d6f3",group:"Tree-group-d3c3d8a",label:"Tree-label-d819155",focusWhite:"Tree-focusWhite-f1e00c2",arrow:"Tree-arrow-03ab2e7",hover:"Tree-hover-3cc4e5d",open:"Tree-open-3f1a336",dark:"Tree-dark-1b4aa00",chrome:"Tree-chrome-bcbcac6",light:"Tree-light-09174ee"},EJe=["theme","hover","colorScheme","children","label","className","onUpdate","onSelect","open"],i2=o=>{const{theme:e,hover:t,colorScheme:i,children:n,label:s,className:r,onUpdate:a,onSelect:l,open:c}=o,u=Hg(o,EJe),{themeClass:f,currentTheme:g}=MI({theme:e,colorScheme:i},yl),[p,_]=Ii.useState(c);Ii.useEffect(()=>{_(c)},[c]);const b=me=>{_(me),a&&a(me)},y=$e.Children.count(n)>0,S=(me,pe)=>{if(me.isSameNode(pe||null))return;const Fe=me.querySelector('[tabindex="-1"]');Fe==null||Fe.focus(),me.setAttribute("aria-selected","true"),pe==null||pe.removeAttribute("aria-selected")},L=(me,pe)=>{let Fe=me;for(;Fe&&Fe.parentElement;){if(Fe.getAttribute("role")===pe)return Fe;Fe=Fe.parentElement}return null},x=me=>{const pe=L(me,"tree");return pe?Array.from(pe.querySelectorAll("li")):[]},k=me=>{const pe=L(me,"group"),Fe=pe==null?void 0:pe.previousElementSibling;if(Fe&&Fe.getAttribute("tabindex")==="-1"){const Ye=Fe.parentElement,Ut=me.parentElement;S(Ye,Ut)}},E=(me,pe)=>{const Fe=x(me);Fe.forEach(Ye=>{Ye.removeAttribute("aria-selected")}),pe==="start"&&Fe[0]&&S(Fe[0]),pe==="end"&&Fe[Fe.length-1]&&S(Fe[Fe.length-1])},N=(me,pe)=>{const Fe=x(me)||[];for(let Ye=0;Ye<Fe.length;Ye++){const Ut=Fe[Ye];if(Ut.getAttribute("aria-selected")==="true"){pe==="up"&&Fe[Ye-1]?S(Fe[Ye-1],Ut):pe==="down"&&Fe[Ye+1]&&S(Fe[Ye+1],Ut);return}}S(Fe[0])},A=(me,pe)=>{const Fe=me.target;(me.key==="Enter"||me.key===" ")&&b(!p),me.key==="ArrowRight"&&p&&!pe?N(Fe,"down"):me.key==="ArrowRight"&&b(!0),me.key==="ArrowLeft"&&(!p||pe)?k(Fe):me.key==="ArrowLeft"&&b(!1),me.key==="ArrowDown"&&N(Fe,"down"),me.key==="ArrowUp"&&N(Fe,"up"),me.key==="Home"&&E(Fe,"start"),me.key==="End"&&E(Fe,"end")},P=(me,pe)=>{const Fe=me.target,Ye=L(Fe,"treeitem"),Ut=x(Fe)||[];let dt=!1;for(let Ot=0;Ot<Ut.length;Ot++){const Bi=Ut[Ot];if(Bi.getAttribute("aria-selected")==="true"){Ye&&(dt=!0,S(Ye,Bi));break}}!dt&&Ye&&S(Ye),pe||b(!p)},H=me=>{const pe=me.currentTarget;!pe.contains(document.activeElement)&&pe.getAttribute("role")==="tree"&&pe.setAttribute("tabindex","0")},ee=me=>{const pe=me.target;if(pe.getAttribute("role")==="tree"){const Fe=pe.querySelector('[aria-selected="true"]');Fe?S(Fe):N(pe,"down"),pe.setAttribute("tabindex","-1")}},Q=()=>{l==null||l()},te=me=>{const pe=me*.9+.3;return{paddingLeft:`${pe}em`,width:`calc(100% - ${pe}em)`}},{isChild:J,depth:Z,hasHover:he}=$e.useContext(V9),Ce=he?t:!1;if(!J)return $e.createElement("ul",Ur({role:"tree",tabIndex:0,className:$r(yl.tree,yl.group,f,r),onFocus:ee,onBlur:H},u),$e.createElement(V9.Provider,{value:{isChild:!0,depth:0,hasHover:Ce}},$e.createElement(i2,o)));if(!y)return $e.createElement("li",Ur({role:"treeitem",className:yl.item},u),$e.createElement("div",{role:"button",className:$r(yl.label,{[yl.hover]:Ce,[yl.focusWhite]:g==="firefox"}),tabIndex:-1,style:te(Z),onKeyDown:me=>{A(me,J)},onClick:me=>P(me,!0),onFocus:Q},$e.createElement("span",null,s)));const we=$r(yl.arrow,{[yl.open]:p});return $e.createElement("li",{role:"treeitem","aria-expanded":p,className:yl.item},$e.createElement("div",{role:"button",tabIndex:-1,className:$r(yl.label,{[yl.hover]:Ce,[yl.focusWhite]:g==="firefox"}),style:te(Z),onClick:me=>P(me),onKeyDown:me=>A(me),onFocus:Q},$e.createElement("span",null,$e.createElement("span",{"aria-hidden":!0,className:we}),$e.createElement("span",null,s))),$e.createElement("ul",Ur({role:"group",className:$r(r,yl.group)},u),p&&$e.Children.map(n,me=>$e.createElement(V9.Provider,{value:{isChild:!0,depth:Z+1,hasHover:Ce}},me))))};i2.defaultProps={open:!1,hover:!0};const Ds={"object-inspector":"ObjectInspector-object-inspector-0c33e82",objectInspector:"ObjectInspector-object-inspector-0c33e82","object-label":"ObjectInspector-object-label-b81482b",objectLabel:"ObjectInspector-object-label-b81482b",text:"ObjectInspector-text-25f57f3",key:"ObjectInspector-key-4f712bb",value:"ObjectInspector-value-f7ec2e5",string:"ObjectInspector-string-c496000",regex:"ObjectInspector-regex-59d45a3",error:"ObjectInspector-error-b818698",boolean:"ObjectInspector-boolean-2dd1642",number:"ObjectInspector-number-a6daabb",undefined:"ObjectInspector-undefined-3a68263",null:"ObjectInspector-null-74acb50",function:"ObjectInspector-function-07bbdcd","function-decorator":"ObjectInspector-function-decorator-3d22c24",functionDecorator:"ObjectInspector-function-decorator-3d22c24",prototype:"ObjectInspector-prototype-f2449ee",dark:"ObjectInspector-dark-0c96c97",chrome:"ObjectInspector-chrome-2f3ca98",light:"ObjectInspector-light-78bef54"},IJe=["ast","theme","showKey","colorScheme","className"],wl=(o,e,t,i,n)=>{const s=o.includes("-")?`"${o}"`:o,r=n<=0;return $e.createElement("span",{className:Ds.text},!r&&i&&$e.createElement($e.Fragment,null,$e.createElement("span",{className:Ds.key},s),$e.createElement("span",null,":")),$e.createElement("span",{className:t},e))},oZ=o=>{const{ast:e,theme:t,showKey:i,colorScheme:n,className:s}=o,r=Hg(o,IJe),{themeClass:a}=MI({theme:t,colorScheme:n},Ds),[l,c]=Ii.useState($e.createElement("span",null));let u=$e.createElement("span",null);return Ii.useEffect(()=>{e.value instanceof Promise&&(async g=>{c(wl(e.key,`Promise { "${await Gme(g)}" }`,Ds.key,i,e.depth))})(e.value)},[e,i]),typeof e.value=="number"||typeof e.value=="bigint"?u=wl(e.key,String(e.value),Ds.number,i,e.depth):typeof e.value=="boolean"?u=wl(e.key,String(e.value),Ds.boolean,i,e.depth):typeof e.value=="string"?u=wl(e.key,`"${e.value}"`,Ds.string,i,e.depth):typeof e.value>"u"?u=wl(e.key,"undefined",Ds.undefined,i,e.depth):typeof e.value=="symbol"?u=wl(e.key,e.value.toString(),Ds.string,i,e.depth):typeof e.value=="function"?u=wl(e.key,`${e.value.name}()`,Ds.key,i,e.depth):typeof e.value=="object"&&(e.value===null?u=wl(e.key,"null",Ds.null,i,e.depth):Array.isArray(e.value)?u=wl(e.key,`Array(${e.value.length})`,Ds.key,i,e.depth):e.value instanceof Date?u=wl(e.key,`Date ${e.value.toString()}`,Ds.value,i,e.depth):e.value instanceof RegExp?u=wl(e.key,e.value.toString(),Ds.regex,i,e.depth):e.value instanceof Error?u=wl(e.key,e.value.toString(),Ds.error,i,e.depth):Kme(e.value)?u=wl(e.key,"{}",Ds.key,i,e.depth):u=wl(e.key,e.value.constructor.name,Ds.key,i,e.depth)),$e.createElement("span",Ur({className:$r(a,s)},r),l,u)};oZ.defaultProps={showKey:!0};const TJe=["ast","theme","previewMax","open","colorScheme","className"],AI=(o,e,t)=>{const i=[];for(let n=0;n<o.length;n++){const s=o[n];if(s.isPrototype||(i.push($e.createElement(oZ,{key:s.key,ast:s,showKey:t})),n<o.length-1?i.push(", "):i.push(" ")),s.isPrototype&&n===o.length-1&&(i.pop(),i.push(" ")),n===e-1&&o.length>e){i.push(" ");break}}return i},NJe=(o,e,t,i)=>{const n=o.value.length;return e?$e.createElement("span",null,"Array(",n,")"):$e.createElement($e.Fragment,null,$e.createElement("span",null,`${i==="firefox"?"Array":""}(${n}) [ `),AI(o.children,t,!1),$e.createElement("span",null,"]"))},RJe=(o,e,t,i)=>o.isPrototype?$e.createElement("span",null,`Object ${i==="firefox"?"{  }":""}`):e?$e.createElement("span",null,"{}"):$e.createElement($e.Fragment,null,$e.createElement("span",null,`${i==="firefox"?"Object ":""}{ `),AI(o.children,t,!0),$e.createElement("span",null,"}")),MJe=(o,e,t)=>e?$e.createElement("span",null,`Promise { "${String(o.children[0].value)}" }`):$e.createElement($e.Fragment,null,$e.createElement("span",null,"Promise { "),AI(o.children,t,!0),$e.createElement("span",null,"}")),AJe=(o,e,t,i)=>{const{size:n}=o.value;return e?$e.createElement("span",null,`Map(${n})`):$e.createElement($e.Fragment,null,$e.createElement("span",null,`Map${i==="chrome"?`(${n})`:""} { `),AI(o.children,t,!0),$e.createElement("span",null,"}"))},PJe=(o,e,t)=>{const{size:i}=o.value;return e?$e.createElement("span",null,"Set(",i,")"):$e.createElement($e.Fragment,null,$e.createElement("span",null,`Set(${o.value.size}) {`),AI(o.children,t,!0),$e.createElement("span",null,"}"))},Yme=o=>{const{ast:e,theme:t,previewMax:i,open:n,colorScheme:s,className:r}=o,a=Hg(o,TJe),{themeClass:l,currentTheme:c}=MI({theme:t,colorScheme:s},Ds),u=e.isPrototype||!1,f=$r(Ds.objectLabel,l,r,{[Ds.prototype]:u}),g=e.depth<=0,p=()=>$e.createElement("span",{className:u?Ds.prototype:Ds.key},g?"":`${e.key}: `);return e.type==="array"?$e.createElement("span",Ur({className:f},a),$e.createElement(p,null),NJe(e,n,i,c)):e.type==="function"?$e.createElement("span",Ur({className:f},a),$e.createElement(p,null),c==="chrome"&&$e.createElement("span",{className:Ds.functionDecorator}," "),$e.createElement("span",{className:$r({[Ds.function]:!u})},`${e.value.name}()`)):e.type==="promise"?$e.createElement("span",Ur({className:f},a),$e.createElement(p,null),MJe(e,n,i)):e.type==="map"?$e.createElement("span",Ur({className:f},a),$e.createElement(p,null),AJe(e,n,i,c)):e.type==="set"?$e.createElement("span",Ur({className:f},a),$e.createElement(p,null),PJe(e,n,i)):$e.createElement("span",Ur({className:f},a),$e.createElement(p,null),RJe(e,n,i,c))};Yme.defaultProps={previewMax:8,open:!1};const rZ=o=>{const{ast:e,expandLevel:t,depth:i}=o,[n,s]=Ii.useState(),[r,a]=Ii.useState(i<t);return Ii.useEffect(()=>{(async()=>{if(e.type!=="value"){const c=e.children.map(g=>g()),u=await Promise.all(c),f=ele(ele({},e),{},{children:u});s(f)}})()},[e]),n?$e.createElement(i2,{hover:!1,open:r,label:$e.createElement(Yme,{open:r,ast:n}),onSelect:()=>{var l;(l=o.onSelect)===null||l===void 0||l.call(o,e)},onUpdate:l=>{a(l)}},n.children.map(l=>$e.createElement(rZ,{key:l.key,ast:l,depth:i+1,expandLevel:t,onSelect:o.onSelect}))):$e.createElement(i2,{hover:!1,label:$e.createElement(oZ,{ast:e}),onSelect:()=>{var l;(l=o.onSelect)===null||l===void 0||l.call(o,e)}})};rZ.defaultProps={expandLevel:0,depth:0};const OJe=["data","expandLevel","sortKeys","includePrototypes","className","theme","colorScheme","onSelect"],Zme=o=>{const{data:e,expandLevel:t,sortKeys:i,includePrototypes:n,className:s,theme:r,colorScheme:a,onSelect:l}=o,c=Hg(o,OJe),[u,f]=Ii.useState(void 0),{themeClass:g,currentTheme:p,currentColorScheme:_}=MI({theme:r,colorScheme:a},Ds);return Ii.useEffect(()=>{(async()=>{f(await wJe(e,i,n))})()},[e,i,n]),$e.createElement("div",Ur({className:$r(Ds.objectInspector,s,g)},c),u&&$e.createElement(CJe,{theme:p,colorScheme:_},$e.createElement(rZ,{ast:u,expandLevel:t,onSelect:l})))};Zme.defaultProps={expandLevel:0,sortKeys:!0,includePrototypes:!0};const ba={console:"Console-console-8f70aaf",input:"Console-input-f574b6b",error:"Console-error-989a8e1",icon:"Console-icon-92529e7",resultText:"Console-resultText-1077e07",warning:"Console-warning-142bf8d",inputWrapper:"Console-inputWrapper-89ed196","icon-focus":"Console-icon-focus-91067bf",iconFocus:"Console-icon-focus-91067bf",resultWrapper:"Console-resultWrapper-8362c1d",resultLine:"Console-resultLine-915a13e",expressionText:"Console-expressionText-5121d9f",resultsScrollWrapper:"Console-resultsScrollWrapper-e7512a9",results:"Console-results-375fc62",dark:"Console-dark-4ae3210",chrome:"Console-chrome-f2e559f",light:"Console-light-1998f9b"},FJe=["execute","history","resultComponent","theme","colorScheme","className"],BJe=({result:o})=>$e.createElement("div",null,JSON.stringify(o)),WJe=({result:o})=>$e.createElement(Zme,{includePrototypes:!1,data:o}),HJe=o=>{const e=o.resultComponent,t=o.result instanceof Error||o.severity==="error",i=!t&&o.severity==="warning";let n=oJe;return t&&(n=nJe),i&&(n=aJe),$e.createElement("li",{className:ba.resultWrapper},$e.createElement("div",{className:ba.resultLine},$e.createElement(aZ,null),$e.createElement("div",{className:ba.expressionText},o.expression)),$e.createElement("div",{className:$r(ba.resultLine,{[ba.error]:t,[ba.warning]:i})},$e.createElement(n,{inline:!0,className:ba.icon}),$e.createElement("div",{className:ba.resultText},$e.createElement(e,{result:o.result}))))},aZ=o=>{const{focused:e}=o;return $e.createElement(tJe,{inline:!0,className:$r(ba.icon,{[ba.iconFocus]:e})})};aZ.defaultProps={focused:!1};const VJe=o=>{const{history:e,onSubmit:t}=o,[i,n]=$e.useState(0),[s,r]=$e.useState(!1),[a,l]=$e.useState(""),c=f=>{if(f.key==="ArrowUp"||f.key==="ArrowDown"){var g;f.preventDefault();const p=f.key==="ArrowUp"?i+1:Math.max(0,i-1);if(p===0){n(p),l("");return}const _=p>e.length||(g=e[e.length-p])===null||g===void 0?void 0:g.expression;if(!_)return;l(_),n(p);return}f.key==="Enter"&&a&&(t(a),l(""))},u=f=>{l(f.target.value)};return $e.createElement("div",{className:ba.inputWrapper},$e.createElement(aZ,{focused:s}),$e.createElement("input",{value:a,className:ba.input,"aria-label":"Enter an expression",onFocus:()=>{r(!0)},onBlur:()=>{r(!1)},onKeyDown:c,onChange:u}))},zJe=o=>{const[e,t]=$e.useState([]);return o?[o,()=>{}]:[e,t]},Xme=o=>{const{execute:e,history:t,resultComponent:i,theme:n,colorScheme:s,className:r}=o,a=Hg(o,FJe),[l,c]=zJe(t),{themeClass:u}=MI({theme:n,colorScheme:s},ba),f=$e.useRef(null);return $e.useEffect(()=>{f.current&&(f.current.scrollTop=f.current.scrollHeight)},[l.length]),$e.createElement("div",Ur({},a,{className:$r(ba.console,u,r)}),$e.createElement("div",{ref:f,className:ba.resultsScrollWrapper},$e.createElement("ul",{className:ba.results},l.map(g=>$e.createElement(HJe,Ur({key:g.id,resultComponent:i},g))))),$e.createElement(VJe,{history:l,onSubmit:g=>{const p=e(g);c([...l,{id:`item-${l.length}`,expression:g,result:p}])}}))};Xme.defaultProps={execute:o=>o,resultComponent:BJe};const UJe=(async function(){}).constructor,$Je=({client:o,rpc:e})=>{const[t,i]=Ii.useState([]);console.log("RENDER CLIENT",o.ready);const[n,s]=Ii.useState(!1),r=Ii.useCallback(u=>{i(f=>[...f,{...u,id:String(f.length)}])},[]);Ii.useEffect(()=>{const u=(...f)=>{r({expression:void 0,severity:"warning",result:f})};return o.on("message",u),console.log("SUBSCRIBE-ON-CLIENT"),()=>void o.off("message",u)},[o]);const a=Ii.useMemo(()=>{const u=Object.create(null);return u.console=console,u},[]),l=Ii.useMemo(()=>new Proxy(a,{has:()=>!0,get:(u,f)=>typeof f=="symbol"?{}:f in u?u[f]:e[f]}),[o]),c=Ii.useCallback(async u=>{try{if(n)throw new Error("Processing failed");s(!0);let f=!1,g;try{try{g=new Function("p",`with(p) return ${u}`)}catch{g=new UJe("p",`with(p) return ${u}`),f=!0}}catch(p){r({result:p,severity:"error",expression:u});return}if(f)try{const p=await g.call(a,l);a.$_=p,r({result:p,expression:u})}catch(p){r({result:p,severity:"error",expression:u})}else try{const p=g.call(a,l);a.$_=p,r({result:p,expression:u})}catch(p){r({result:p,severity:"error",expression:u})}}finally{s(!1)}},[]);return en.jsxDEV("div",{className:"console-box",children:en.jsxDEV(Xme,{theme:"chrome",execute:c,resultComponent:WJe,history:t},void 0,!1,{fileName:"/home/runner/work/varhub-source/varhub-source/src/components/RoomActions.tsx",lineNumber:85,columnNumber:4},void 0)},void 0,!1,{fileName:"/home/runner/work/varhub-source/varhub-source/src/components/RoomActions.tsx",lineNumber:84,columnNumber:3},void 0)},jJe=({url:o,roomId:e})=>{const[t,i]=Ii.useState(!1),[n,s]=Ii.useState(""),[r,a]=Ii.useState(null),[l,c]=Ii.useState(null),[u,f]=Ii.useState(null);Ii.useEffect(()=>{if(!r)return c(null);if(r.ready)return c("ready");if(r.closed)return c("closed");c("connecting");const y=()=>c("ready"),S=()=>c("closed");return r.on("open",y),r.on("close",S),()=>{r.off("open",y),r.off("close",S)}},[r]);const g=Ii.useMemo(()=>new jme(o),["url"]),[p,_]=Ii.useState(null);Ii.useEffect(()=>{let y=!0;return g.getRoomMessage(e).then(S=>y&&_(S)).finally(()=>y&&i(!1)),()=>{y=!1,_(null),i(!1)}},[g]);const b=()=>{if(!t)try{i(!0);const y=g.join(e,{params:[n]});a(()=>y);const S=new $Qe(y,"$rpc");f(()=>S)}finally{i(!1)}};return Ii.useEffect(()=>{if(!r)return;const y=()=>a(null);return r.on("close",y),r.on("open",()=>console.log("CLIENT-READY")),r.on("message",(...S)=>console.log("CLIENT-MESSAGE",S)),()=>void r.off("close",y)},[r]),!r||!u?en.jsxDEV(en.Fragment,{children:[en.jsxDEV("div",{className:"form-line",children:[en.jsxDEV("input",{value:n,placeholder:"name",autoFocus:!0,disabled:!!t,onKeyDown:y=>y.key==="Enter"&&b(),onChange:y=>s(y.target.value)},void 0,!1,{fileName:"/home/runner/work/varhub-source/varhub-source/src/components/EnterRoom.tsx",lineNumber:74,columnNumber:5},void 0),en.jsxDEV("button",{disabled:!!t,onClick:b,children:"Join"},void 0,!1,{fileName:"/home/runner/work/varhub-source/varhub-source/src/components/EnterRoom.tsx",lineNumber:82,columnNumber:5},void 0)]},void 0,!0,{fileName:"/home/runner/work/varhub-source/varhub-source/src/components/EnterRoom.tsx",lineNumber:73,columnNumber:4},void 0),p!==null&&en.jsxDEV("div",{children:en.jsxDEV("code",{children:p},void 0,!1,{fileName:"/home/runner/work/varhub-source/varhub-source/src/components/EnterRoom.tsx",lineNumber:85,columnNumber:5},void 0)},void 0,!1,{fileName:"/home/runner/work/varhub-source/varhub-source/src/components/EnterRoom.tsx",lineNumber:84,columnNumber:27},void 0)]},void 0,!0,{fileName:"/home/runner/work/varhub-source/varhub-source/src/components/EnterRoom.tsx",lineNumber:72,columnNumber:3},void 0):l!=="ready"?en.jsxDEV("p",{children:["Client status ",l]},void 0,!0,{fileName:"/home/runner/work/varhub-source/varhub-source/src/components/EnterRoom.tsx",lineNumber:91,columnNumber:10},void 0):en.jsxDEV($Je,{rpc:u,client:r},void 0,!1,{fileName:"/home/runner/work/varhub-source/varhub-source/src/components/EnterRoom.tsx",lineNumber:94,columnNumber:9},void 0)},qJe=()=>{const o=Ii.useMemo(()=>{const e=new URLSearchParams(location.search),t=e.get("url"),i=e.get("room");if(!(!t||!i))return{url:t,roomId:i}},[]);return o?en.jsxDEV(jJe,{...o},void 0,!1,{fileName:"/home/runner/work/varhub-source/varhub-source/src/components/App.tsx",lineNumber:18,columnNumber:9},void 0):en.jsxDEV(GQe,{},void 0,!1,{fileName:"/home/runner/work/varhub-source/varhub-source/src/components/App.tsx",lineNumber:16,columnNumber:3},void 0)},KJe=U9.createRoot(document.getElementById("root"));KJe.render(en.jsxDEV(qJe,{},void 0,!1,{fileName:"/home/runner/work/varhub-source/varhub-source/src/index.tsx",lineNumber:6,columnNumber:13},void 0));export{yI as m,fge as t};
